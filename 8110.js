"use strict";var Zn=Object.defineProperty;var Jn=(C,A,r)=>A in C?Zn(C,A,{enumerable:!0,configurable:!0,writable:!0,value:r}):C[A]=r;var p=(C,A,r)=>(Jn(C,typeof A!="symbol"?A+"":A,r),r);exports.id=8110,exports.ids=[8110],exports.modules={398110:(C,A,r)=>{r.d(A,{getDefaultRoleAssumer:()=>Wt,getDefaultRoleAssumerWithWebIdentity:()=>$t});var N=r(952111),ke=r(446903),G=r(175377),Z=r(12841),W=r(698122),Kt=r(840380),kt=r(149980),zt=r(854204),Ht=r(542577),J=r(818090),V=r(225762),i=r(313814),Ot=r(622963),Y=r(741175);const Ft=async(e,n,t)=>({operation:(0,Y.u)(n).operation,region:await(0,Y.t)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function jt(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(n,t)=>({signingProperties:{config:n,context:t}})}}function Ut(e){return{schemeId:"smithy.api#noAuth"}}const Mt=e=>{const n=[];switch(e.operation){case"AssumeRoleWithWebIdentity":{n.push(Ut(e));break}default:n.push(jt(e))}return n},Lt=e=>Object.assign(e,{stsClientCtor:B}),_t=e=>{const n=Lt(e),t=(0,Ot.h)(n);return Object.assign(t,{authSchemePreference:(0,Y.t)(e.authSchemePreference??[])})},Nt=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),ze={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};var Vt=r(313659),Bt=r(63866),Gt=r(669152),He=r(277708),Oe=r(3871),Fe=r(288056),Zt=r(235629),D=r(584747),je=r(278007),Jt=r(833625),Yt=r(336995),Qt=r(260105),Ue=r(833652),Me=r(366821),Xt=r(754779),Q=r(45833);const Le="required",c="type",d="fn",l="argv",w="ref",_e=!1,X=!0,T="booleanEquals",f="stringEquals",Ne="sigv4",Ve="sts",Be="us-east-1",m="endpoint",Ge="https://sts.{Region}.{PartitionResult#dnsSuffix}",P="tree",$="error",q="getAttr",Ze={[Le]:!1,[c]:"String"},ee={[Le]:!0,default:!1,[c]:"Boolean"},Je={[w]:"Endpoint"},Ye={[d]:"isSet",[l]:[{[w]:"Region"}]},g={[w]:"Region"},Qe={[d]:"aws.partition",[l]:[g],assign:"PartitionResult"},Xe={[w]:"UseFIPS"},qe={[w]:"UseDualStack"},y={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:Ne,signingName:Ve,signingRegion:Be}]},headers:{}},E={},et={conditions:[{[d]:f,[l]:[g,"aws-global"]}],[m]:y,[c]:m},tt={[d]:T,[l]:[Xe,!0]},nt={[d]:T,[l]:[qe,!0]},st={[d]:q,[l]:[{[w]:"PartitionResult"},"supportsFIPS"]},ot={[w]:"PartitionResult"},rt={[d]:T,[l]:[!0,{[d]:q,[l]:[ot,"supportsDualStack"]}]},it=[{[d]:"isSet",[l]:[Je]}],ct=[tt],at=[nt],qt={version:"1.0",parameters:{Region:Ze,UseDualStack:ee,UseFIPS:ee,Endpoint:Ze,UseGlobalEndpoint:ee},rules:[{conditions:[{[d]:T,[l]:[{[w]:"UseGlobalEndpoint"},X]},{[d]:"not",[l]:it},Ye,Qe,{[d]:T,[l]:[Xe,_e]},{[d]:T,[l]:[qe,_e]}],rules:[{conditions:[{[d]:f,[l]:[g,"ap-northeast-1"]}],endpoint:y,[c]:m},{conditions:[{[d]:f,[l]:[g,"ap-south-1"]}],endpoint:y,[c]:m},{conditions:[{[d]:f,[l]:[g,"ap-southeast-1"]}],endpoint:y,[c]:m},{conditions:[{[d]:f,[l]:[g,"ap-southeast-2"]}],endpoint:y,[c]:m},et,{conditions:[{[d]:f,[l]:[g,"ca-central-1"]}],endpoint:y,[c]:m},{conditions:[{[d]:f,[l]:[g,"eu-central-1"]}],endpoint:y,[c]:m},{conditions:[{[d]:f,[l]:[g,"eu-north-1"]}],endpoint:y,[c]:m},{conditions:[{[d]:f,[l]:[g,"eu-west-1"]}],endpoint:y,[c]:m},{conditions:[{[d]:f,[l]:[g,"eu-west-2"]}],endpoint:y,[c]:m},{conditions:[{[d]:f,[l]:[g,"eu-west-3"]}],endpoint:y,[c]:m},{conditions:[{[d]:f,[l]:[g,"sa-east-1"]}],endpoint:y,[c]:m},{conditions:[{[d]:f,[l]:[g,Be]}],endpoint:y,[c]:m},{conditions:[{[d]:f,[l]:[g,"us-east-2"]}],endpoint:y,[c]:m},{conditions:[{[d]:f,[l]:[g,"us-west-1"]}],endpoint:y,[c]:m},{conditions:[{[d]:f,[l]:[g,"us-west-2"]}],endpoint:y,[c]:m},{endpoint:{url:Ge,properties:{authSchemes:[{name:Ne,signingName:Ve,signingRegion:"{Region}"}]},headers:E},[c]:m}],[c]:P},{conditions:it,rules:[{conditions:ct,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[c]:$},{conditions:at,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[c]:$},{endpoint:{url:Je,properties:E,headers:E},[c]:m}],[c]:P},{conditions:[Ye],rules:[{conditions:[Qe],rules:[{conditions:[tt,nt],rules:[{conditions:[{[d]:T,[l]:[X,st]},rt],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:E,headers:E},[c]:m}],[c]:P},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[c]:$}],[c]:P},{conditions:ct,rules:[{conditions:[{[d]:T,[l]:[st,X]}],rules:[{conditions:[{[d]:f,[l]:[{[d]:q,[l]:[ot,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:E,headers:E},[c]:m},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:E,headers:E},[c]:m}],[c]:P},{error:"FIPS is enabled but this partition does not support FIPS",[c]:$}],[c]:P},{conditions:at,rules:[{conditions:[rt],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:E,headers:E},[c]:m}],[c]:P},{error:"DualStack is enabled but this partition does not support DualStack",[c]:$}],[c]:P},et,{endpoint:{url:Ge,properties:E,headers:E},[c]:m}],[c]:P}],[c]:P},{error:"Invalid Configuration: Missing Region",[c]:$}]},en=new Q.kS({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),tn=(e,n={})=>en.get(e,()=>(0,Q.sO)(qt,{endpointParams:e,logger:n.logger}));Q.mw.aws=Xt.UF;const nn=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??Ue.E,base64Encoder:e?.base64Encoder??Ue.n,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??tn,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??Mt,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:n=>n.getIdentityProvider("aws.auth#sigv4"),signer:new He.f2},{schemeId:"smithy.api#noAuth",identityProvider:n=>n.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Fe.m}],logger:e?.logger??new i.N4,serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??Qt.D,utf8Decoder:e?.utf8Decoder??Me.ar,utf8Encoder:e?.utf8Encoder??Me.Pq});var sn=r(613849);const on=e=>{(0,i.I9)(process.version);const n=(0,sn.I)(e),t=()=>n().then(i.lT),s=nn(e);(0,Bt.I)(process.version);const o={profile:e?.profile,logger:s.logger};return{...s,...e,runtime:"node",defaultsMode:n,authSchemePreference:e?.authSchemePreference??(0,D.Z)(Gt.$,o),bodyLengthChecker:e?.bodyLengthChecker??Jt.n,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,Oe.pf)({serviceId:s.serviceId,clientVersion:Vt.rE}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:u=>u.getIdentityProvider("aws.auth#sigv4")||(async a=>await e.credentialDefaultProvider(a?.__config||{})()),signer:new He.f2},{schemeId:"smithy.api#noAuth",identityProvider:u=>u.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Fe.m}],maxAttempts:e?.maxAttempts??(0,D.Z)(V.qs,e),region:e?.region??(0,D.Z)(W.GG,{...W.zH,...o}),requestHandler:je.$c.create(e?.requestHandler??t),retryMode:e?.retryMode??(0,D.Z)({...V.kN,default:async()=>(await t()).retryMode||Yt.L0},e),sha256:e?.sha256??Zt.V.bind(null,"sha256"),streamCollector:e?.streamCollector??je.kv,useDualstackEndpoint:e?.useDualstackEndpoint??(0,D.Z)(W.e$,o),useFipsEndpoint:e?.useFipsEndpoint??(0,D.Z)(W.Ko,o),userAgentAppId:e?.userAgentAppId??(0,D.Z)(Oe.hV,o)}};var dt=r(610312),te=r(517583);const rn=e=>{const n=e.httpAuthSchemes;let t=e.httpAuthSchemeProvider,s=e.credentials;return{setHttpAuthScheme(o){const u=n.findIndex(a=>a.schemeId===o.schemeId);u===-1?n.push(o):n.splice(u,1,o)},httpAuthSchemes(){return n},setHttpAuthSchemeProvider(o){t=o},httpAuthSchemeProvider(){return t},setCredentials(o){s=o},credentials(){return s}}},cn=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),an=(e,n)=>{const t=Object.assign((0,dt.Rq)(e),(0,i.xA)(e),(0,te.eS)(e),rn(e));return n.forEach(s=>s.configure(t)),Object.assign(e,(0,dt.$3)(t),(0,i.uv)(t),(0,te.jt)(t),cn(t))};class B extends i.Kj{constructor(...[t]){const s=on(t||{});super(s);p(this,"config");this.initConfig=s;const o=Nt(s),u=(0,Z.Dc)(o),a=(0,V.$z)(u),S=(0,W.TD)(a),I=(0,N.OV)(S),R=(0,J.Co)(I),M=_t(R),_=an(M,t?.extensions||[]);this.config=_,this.middlewareStack.use((0,Z.sM)(this.config)),this.middlewareStack.use((0,V.ey)(this.config)),this.middlewareStack.use((0,Ht.vK)(this.config)),this.middlewareStack.use((0,N.TC)(this.config)),this.middlewareStack.use((0,ke.Y7)(this.config)),this.middlewareStack.use((0,G.n4)(this.config)),this.middlewareStack.use((0,Kt.w)(this.config,{httpAuthSchemeParametersProvider:Ft,identityProviderConfigProvider:async L=>new kt.h({"aws.auth#sigv4":L.credentials})})),this.middlewareStack.use((0,zt.l)(this.config))}destroy(){super.destroy()}}var lt=r(948416);class v extends i.TJ{constructor(n){super(n),Object.setPrototypeOf(this,v.prototype)}}const ut=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:i.$H}}),dn=e=>({...e,...e.Credentials&&{Credentials:ut(e.Credentials)}});class ne extends v{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t});p(this,"name","ExpiredTokenException");p(this,"$fault","client");Object.setPrototypeOf(this,ne.prototype)}}class se extends v{constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t});p(this,"name","MalformedPolicyDocumentException");p(this,"$fault","client");Object.setPrototypeOf(this,se.prototype)}}class oe extends v{constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t});p(this,"name","PackedPolicyTooLargeException");p(this,"$fault","client");Object.setPrototypeOf(this,oe.prototype)}}class re extends v{constructor(t){super({name:"RegionDisabledException",$fault:"client",...t});p(this,"name","RegionDisabledException");p(this,"$fault","client");Object.setPrototypeOf(this,re.prototype)}}class ie extends v{constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t});p(this,"name","IDPRejectedClaimException");p(this,"$fault","client");Object.setPrototypeOf(this,ie.prototype)}}class ce extends v{constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t});p(this,"name","InvalidIdentityTokenException");p(this,"$fault","client");Object.setPrototypeOf(this,ce.prototype)}}const ln=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:i.$H}}),un=e=>({...e,...e.Credentials&&{Credentials:ut(e.Credentials)}});class ae extends v{constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t});p(this,"name","IDPCommunicationErrorException");p(this,"$fault","client");Object.setPrototypeOf(this,ae.prototype)}}var de=r(487600);const mn=async(e,n)=>{const t=pt;let s;return s=Pt({...In(e,n),[Et]:Mn,[At]:St}),yt(n,t,"/",void 0,s)},hn=async(e,n)=>{const t=pt;let s;return s=Pt({...Rn(e,n),[Et]:Ln,[At]:St}),yt(n,t,"/",void 0,s)},fn=async(e,n)=>{if(e.statusCode>=300)return mt(e,n);const t=await(0,de.t_)(e.body,n);let s={};return s=Wn(t.AssumeRoleResult,n),{$metadata:x(e),...s}},gn=async(e,n)=>{if(e.statusCode>=300)return mt(e,n);const t=await(0,de.t_)(e.body,n);let s={};return s=$n(t.AssumeRoleWithWebIdentityResult,n),{$metadata:x(e),...s}},mt=async(e,n)=>{const t={...e,body:await(0,de.FI)(e.body,n)},s=_n(e,t.body);switch(s){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await yn(t,n);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await An(t,n);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await Pn(t,n);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await vn(t,n);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await pn(t,n);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await Sn(t,n);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await En(t,n);default:const o=t.body;return Un({output:e,parsedBody:o.Error,errorCode:s})}},yn=async(e,n)=>{const t=e.body,s=Kn(t.Error,n),o=new ne({$metadata:x(e),...s});return(0,i.Mw)(o,t)},pn=async(e,n)=>{const t=e.body,s=kn(t.Error,n),o=new ae({$metadata:x(e),...s});return(0,i.Mw)(o,t)},Sn=async(e,n)=>{const t=e.body,s=zn(t.Error,n),o=new ie({$metadata:x(e),...s});return(0,i.Mw)(o,t)},En=async(e,n)=>{const t=e.body,s=Hn(t.Error,n),o=new ce({$metadata:x(e),...s});return(0,i.Mw)(o,t)},An=async(e,n)=>{const t=e.body,s=On(t.Error,n),o=new se({$metadata:x(e),...s});return(0,i.Mw)(o,t)},Pn=async(e,n)=>{const t=e.body,s=Fn(t.Error,n),o=new oe({$metadata:x(e),...s});return(0,i.Mw)(o,t)},vn=async(e,n)=>{const t=e.body,s=jn(t.Error,n),o=new re({$metadata:x(e),...s});return(0,i.Mw)(o,t)},In=(e,n)=>{const t={};if(e[j]!=null&&(t[j]=e[j]),e[U]!=null&&(t[U]=e[U]),e[O]!=null){const s=ht(e[O],n);e[O]?.length===0&&(t.PolicyArns=[]),Object.entries(s).forEach(([o,u])=>{const a=`PolicyArns.${o}`;t[a]=u})}if(e[H]!=null&&(t[H]=e[H]),e[z]!=null&&(t[z]=e[z]),e[xe]!=null){const s=Dn(e[xe],n);e[xe]?.length===0&&(t.Tags=[]),Object.entries(s).forEach(([o,u])=>{const a=`Tags.${o}`;t[a]=u})}if(e[we]!=null){const s=Tn(e[we],n);e[we]?.length===0&&(t.TransitiveTagKeys=[]),Object.entries(s).forEach(([o,u])=>{const a=`TransitiveTagKeys.${o}`;t[a]=u})}if(e[ye]!=null&&(t[ye]=e[ye]),e[Re]!=null&&(t[Re]=e[Re]),e[be]!=null&&(t[be]=e[be]),e[b]!=null&&(t[b]=e[b]),e[Ee]!=null){const s=bn(e[Ee],n);e[Ee]?.length===0&&(t.ProvidedContexts=[]),Object.entries(s).forEach(([o,u])=>{const a=`ProvidedContexts.${o}`;t[a]=u})}return t},Rn=(e,n)=>{const t={};if(e[j]!=null&&(t[j]=e[j]),e[U]!=null&&(t[U]=e[U]),e[De]!=null&&(t[De]=e[De]),e[Ae]!=null&&(t[Ae]=e[Ae]),e[O]!=null){const s=ht(e[O],n);e[O]?.length===0&&(t.PolicyArns=[]),Object.entries(s).forEach(([o,u])=>{const a=`PolicyArns.${o}`;t[a]=u})}return e[H]!=null&&(t[H]=e[H]),e[z]!=null&&(t[z]=e[z]),t},ht=(e,n)=>{const t={};let s=1;for(const o of e){if(o===null)continue;const u=Cn(o,n);Object.entries(u).forEach(([a,S])=>{t[`member.${s}.${a}`]=S}),s++}return t},Cn=(e,n)=>{const t={};return e[We]!=null&&(t[We]=e[We]),t},xn=(e,n)=>{const t={};return e[Se]!=null&&(t[Se]=e[Se]),e[fe]!=null&&(t[fe]=e[fe]),t},bn=(e,n)=>{const t={};let s=1;for(const o of e){if(o===null)continue;const u=xn(o,n);Object.entries(u).forEach(([a,S])=>{t[`member.${s}.${a}`]=S}),s++}return t},wn=(e,n)=>{const t={};return e[pe]!=null&&(t[pe]=e[pe]),e[Te]!=null&&(t[Te]=e[Te]),t},Tn=(e,n)=>{const t={};let s=1;for(const o of e)o!==null&&(t[`member.${s}`]=o,s++);return t},Dn=(e,n)=>{const t={};let s=1;for(const o of e){if(o===null)continue;const u=wn(o,n);Object.entries(u).forEach(([a,S])=>{t[`member.${s}.${a}`]=S}),s++}return t},ft=(e,n)=>{const t={};return e[ue]!=null&&(t[ue]=(0,i.lK)(e[ue])),e[me]!=null&&(t[me]=(0,i.lK)(e[me])),t},Wn=(e,n)=>{const t={};return e[k]!=null&&(t[k]=gt(e[k],n)),e[K]!=null&&(t[K]=ft(e[K],n)),e[F]!=null&&(t[F]=(0,i.xW)(e[F])),e[b]!=null&&(t[b]=(0,i.lK)(e[b])),t},$n=(e,n)=>{const t={};return e[k]!=null&&(t[k]=gt(e[k],n)),e[Ie]!=null&&(t[Ie]=(0,i.lK)(e[Ie])),e[K]!=null&&(t[K]=ft(e[K],n)),e[F]!=null&&(t[F]=(0,i.xW)(e[F])),e[Pe]!=null&&(t[Pe]=(0,i.lK)(e[Pe])),e[he]!=null&&(t[he]=(0,i.lK)(e[he])),e[b]!=null&&(t[b]=(0,i.lK)(e[b])),t},gt=(e,n)=>{const t={};return e[le]!=null&&(t[le]=(0,i.lK)(e[le])),e[ve]!=null&&(t[ve]=(0,i.lK)(e[ve])),e[Ce]!=null&&(t[Ce]=(0,i.lK)(e[Ce])),e[ge]!=null&&(t[ge]=(0,i.Y0)((0,i.t_)(e[ge]))),t},Kn=(e,n)=>{const t={};return e[h]!=null&&(t[h]=(0,i.lK)(e[h])),t},kn=(e,n)=>{const t={};return e[h]!=null&&(t[h]=(0,i.lK)(e[h])),t},zn=(e,n)=>{const t={};return e[h]!=null&&(t[h]=(0,i.lK)(e[h])),t},Hn=(e,n)=>{const t={};return e[h]!=null&&(t[h]=(0,i.lK)(e[h])),t},On=(e,n)=>{const t={};return e[h]!=null&&(t[h]=(0,i.lK)(e[h])),t},Fn=(e,n)=>{const t={};return e[h]!=null&&(t[h]=(0,i.lK)(e[h])),t},jn=(e,n)=>{const t={};return e[h]!=null&&(t[h]=(0,i.lK)(e[h])),t},x=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Qn=(e,n)=>collectBody(e,n).then(t=>n.utf8Encoder(t)),Un=(0,i.jr)(v),yt=async(e,n,t,s,o)=>{const{hostname:u,protocol:a="https",port:S,path:I}=await e.endpoint(),R={protocol:a,hostname:u,port:S,method:"POST",path:I.endsWith("/")?I.slice(0,-1)+t:I+t,headers:n};return s!==void 0&&(R.hostname=s),o!==void 0&&(R.body=o),new te.Kd(R)},pt={"content-type":"application/x-www-form-urlencoded"},St="2011-06-15",Et="Action",le="AccessKeyId",Mn="AssumeRole",ue="AssumedRoleId",K="AssumedRoleUser",Ln="AssumeRoleWithWebIdentity",me="Arn",he="Audience",k="Credentials",fe="ContextAssertion",z="DurationSeconds",ge="Expiration",ye="ExternalId",pe="Key",H="Policy",O="PolicyArns",Se="ProviderArn",Ee="ProvidedContexts",Ae="ProviderId",F="PackedPolicySize",Pe="Provider",j="RoleArn",U="RoleSessionName",ve="SecretAccessKey",Ie="SubjectFromWebIdentityToken",b="SourceIdentity",Re="SerialNumber",Ce="SessionToken",xe="Tags",be="TokenCode",we="TransitiveTagKeys",At="Version",Te="Value",De="WebIdentityToken",We="arn",h="message",Pt=e=>Object.entries(e).map(([n,t])=>(0,i.$6)(n)+"="+(0,i.$6)(t)).join("&"),_n=(e,n)=>{if(n.Error?.Code!==void 0)return n.Error.Code;if(e.statusCode==404)return"NotFound"};class vt extends i.uB.classBuilder().ep(ze).m(function(n,t,s,o){return[(0,lt.TM)(s,this.serialize,this.deserialize),(0,J.rD)(s,n.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,dn).ser(mn).de(fn).build(){}class It extends i.uB.classBuilder().ep(ze).m(function(n,t,s,o){return[(0,lt.TM)(s,this.serialize,this.deserialize),(0,J.rD)(s,n.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(ln,un).ser(hn).de(gn).build(){}const Nn={AssumeRoleCommand:vt,AssumeRoleWithWebIdentityCommand:It};class Vn extends B{}(0,i.J1)(Nn,Vn);var $e=r(23388);const Rt="us-east-1",Ct=e=>{if(typeof e?.Arn=="string"){const n=e.Arn.split(":");if(n.length>4&&n[4]!=="")return n[4]}},xt=async(e,n,t)=>{const s=typeof e=="function"?await e():e,o=typeof n=="function"?await n():n;return t?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${s} (provider)`,`${o} (parent client)`,`${Rt} (STS default)`),s??o??Rt},bt=(e,n)=>{let t,s;return async(o,u)=>{if(s=o,!t){const{logger:M=e?.parentClientConfig?.logger,region:_,requestHandler:L=e?.parentClientConfig?.requestHandler,credentialProviderLogger:Ke}=e,Bn=await xt(_,e?.parentClientConfig?.region,Ke),Gn=!Tt(L);t=new n({profile:e?.parentClientConfig?.profile,credentialDefaultProvider:()=>async()=>s,region:Bn,requestHandler:Gn?L:void 0,logger:M})}const{Credentials:a,AssumedRoleUser:S}=await t.send(new vt(u));if(!a||!a.AccessKeyId||!a.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${u.RoleArn}`);const I=Ct(S),R={accessKeyId:a.AccessKeyId,secretAccessKey:a.SecretAccessKey,sessionToken:a.SessionToken,expiration:a.Expiration,...a.CredentialScope&&{credentialScope:a.CredentialScope},...I&&{accountId:I}};return(0,$e.g)(R,"CREDENTIALS_STS_ASSUME_ROLE","i"),R}},wt=(e,n)=>{let t;return async s=>{if(!t){const{logger:I=e?.parentClientConfig?.logger,region:R,requestHandler:M=e?.parentClientConfig?.requestHandler,credentialProviderLogger:_}=e,L=await xt(R,e?.parentClientConfig?.region,_),Ke=!Tt(M);t=new n({profile:e?.parentClientConfig?.profile,region:L,requestHandler:Ke?M:void 0,logger:I})}const{Credentials:o,AssumedRoleUser:u}=await t.send(new It(s));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${s.RoleArn}`);const a=Ct(u),S={accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration,...o.CredentialScope&&{credentialScope:o.CredentialScope},...a&&{accountId:a}};return a&&(0,$e.g)(S,"RESOLVED_ACCOUNT_ID","T"),(0,$e.g)(S,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),S}},Xn=e=>n=>e({roleAssumer:bt(n,n.stsClientCtor),roleAssumerWithWebIdentity:wt(n,n.stsClientCtor),...n}),Tt=e=>e?.metadata?.handlerProtocol==="h2",Dt=(e,n)=>n?class extends e{constructor(s){super(s);for(const o of n)this.middlewareStack.use(o)}}:e,Wt=(e={},n)=>bt(e,Dt(B,n)),$t=(e={},n)=>wt(e,Dt(B,n)),qn=e=>n=>e({roleAssumer:Wt(n),roleAssumerWithWebIdentity:$t(n),...n})},288056:(C,A,r)=>{r.d(A,{m:()=>N});class N{async sign(G,Z,W){return G}}},313659:C=>{C.exports={rE:"3.858.0"}}};

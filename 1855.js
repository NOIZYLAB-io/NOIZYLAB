"use strict";exports.id=1855,exports.ids=[1855],exports.modules={121855:(_s,Ot,d)=>{d.d(Ot,{getDefaultRoleAssumer:()=>Gt,getDefaultRoleAssumerWithWebIdentity:()=>Ut});var ie=d(334546),Je=d(408029),r=d(323007);const Kt=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),qe={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};class _ extends r.ServiceException{constructor(n){super(n),Object.setPrototypeOf(this,_.prototype)}}class ce extends _{constructor(n){super({name:"ExpiredTokenException",$fault:"client",...n}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,ce.prototype)}}class ae extends _{constructor(n){super({name:"MalformedPolicyDocumentException",$fault:"client",...n}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,ae.prototype)}}class de extends _{constructor(n){super({name:"PackedPolicyTooLargeException",$fault:"client",...n}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,de.prototype)}}class le extends _{constructor(n){super({name:"RegionDisabledException",$fault:"client",...n}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,le.prototype)}}class fe extends _{constructor(n){super({name:"IDPRejectedClaimException",$fault:"client",...n}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,fe.prototype)}}class me extends _{constructor(n){super({name:"InvalidIdentityTokenException",$fault:"client",...n}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,me.prototype)}}class ue extends _{constructor(n){super({name:"IDPCommunicationErrorException",$fault:"client",...n}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,ue.prototype)}}class he extends _{constructor(n){super({name:"InvalidAuthorizationMessageException",$fault:"client",...n}),this.name="InvalidAuthorizationMessageException",this.$fault="client",Object.setPrototypeOf(this,he.prototype)}}const J=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:r.SENSITIVE_STRING}}),Bt=e=>({...e,...e.Credentials&&{Credentials:J(e.Credentials)}}),Ts=e=>({...e,...e.SAMLAssertion&&{SAMLAssertion:SENSITIVE_STRING}}),ws=e=>({...e,...e.Credentials&&{Credentials:J(e.Credentials)}}),Nt=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:r.SENSITIVE_STRING}}),jt=e=>({...e,...e.Credentials&&{Credentials:J(e.Credentials)}}),Ds=e=>({...e,...e.Credentials&&{Credentials:J(e.Credentials)}}),$s=e=>({...e,...e.Credentials&&{Credentials:J(e.Credentials)}});var Ht=d(712763),Vt=d(53127);const ye=(e,n)=>(0,Vt.w)(e,n).then(t=>{if(t.length){const s=new Ht.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(E,I)=>I.trim()===""&&I.includes(`
`)?"":void 0});s.addEntity("#xD","\r"),s.addEntity("#10",`
`);let o;try{o=s.parse(t,!0)}catch(E){throw E&&typeof E=="object"&&Object.defineProperty(E,"$responseBodyText",{value:t}),E}const a="#text",i=Object.keys(o)[0],h=o[i];return h[a]&&(h[i]=h[a],delete h[a]),(0,r.getValueFromTextNode)(h)}return{}}),Zt=async(e,n)=>{const t=await ye(e,n);return t.Error&&(t.Error.message=t.Error.message??t.Error.Message),t},Ws=(e,n)=>{if(n?.Error?.Code!==void 0)return n.Error.Code;if(n?.Code!==void 0)return n.Code;if(e.statusCode==404)return"NotFound"};var ge=d(890130);const Xt=async(e,n)=>{const t=k;let s;return s=G({...an(e,n),[z]:Gn,[F]:L}),M(n,t,"/",void 0,s)},Ms=async(e,n)=>{const t=k;let s;return s=G({...dn(e,n),[z]:Un,[F]:L}),M(n,t,"/",void 0,s)},Qt=async(e,n)=>{const t=k;let s;return s=G({...ln(e,n),[z]:On,[F]:L}),M(n,t,"/",void 0,s)},ks=async(e,n)=>{const t=k;let s;return s=G({...fn(e,n),[z]:Kn,[F]:L}),M(n,t,"/",void 0,s)},Ls=async(e,n)=>{const t=k;let s;return s=G({...mn(e,n),[z]:Bn,[F]:L}),M(n,t,"/",void 0,s)},zs=async(e,n)=>{const t=k;let s;return s=G({...un(e,n),[z]:Nn,[F]:L}),M(n,t,"/",void 0,s)},Fs=async(e,n)=>{const t=k;let s;return s=G({...hn(e,n),[z]:jn,[F]:L}),M(n,t,"/",void 0,s)},Gs=async(e,n)=>{const t=k;let s;return s=G({...yn(e,n),[z]:Hn,[F]:L}),M(n,t,"/",void 0,s)},Yt=async(e,n)=>{if(e.statusCode>=300)return W(e,n);const t=await ye(e.body,n);let s={};return s=Rn(t.AssumeRoleResult,n),{$metadata:S(e),...s}},Us=async(e,n)=>{if(e.statusCode>=300)return W(e,n);const t=await parseBody(e.body,n);let s={};return s=vn(t.AssumeRoleWithSAMLResult,n),{$metadata:S(e),...s}},Jt=async(e,n)=>{if(e.statusCode>=300)return W(e,n);const t=await ye(e.body,n);let s={};return s=In(t.AssumeRoleWithWebIdentityResult,n),{$metadata:S(e),...s}},Os=async(e,n)=>{if(e.statusCode>=300)return W(e,n);const t=await parseBody(e.body,n);let s={};return s=Cn(t.DecodeAuthorizationMessageResult,n),{$metadata:S(e),...s}},Ks=async(e,n)=>{if(e.statusCode>=300)return W(e,n);const t=await parseBody(e.body,n);let s={};return s=bn(t.GetAccessKeyInfoResult,n),{$metadata:S(e),...s}},Bs=async(e,n)=>{if(e.statusCode>=300)return W(e,n);const t=await parseBody(e.body,n);let s={};return s=_n(t.GetCallerIdentityResult,n),{$metadata:S(e),...s}},Ns=async(e,n)=>{if(e.statusCode>=300)return W(e,n);const t=await parseBody(e.body,n);let s={};return s=Tn(t.GetFederationTokenResult,n),{$metadata:S(e),...s}},js=async(e,n)=>{if(e.statusCode>=300)return W(e,n);const t=await parseBody(e.body,n);let s={};return s=wn(t.GetSessionTokenResult,n),{$metadata:S(e),...s}},W=async(e,n)=>{const t={...e,body:await Zt(e.body,n)},s=Vn(e,t.body);switch(s){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await qt(t,n);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await on(t,n);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await rn(t,n);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await cn(t,n);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await tn(t,n);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await sn(t,n);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await en(t,n);case"InvalidAuthorizationMessageException":case"com.amazonaws.sts#InvalidAuthorizationMessageException":throw await nn(t,n);default:const o=t.body;return Fn({output:e,parsedBody:o.Error,errorCode:s})}},qt=async(e,n)=>{const t=e.body,s=Pn(t.Error,n),o=new ce({$metadata:S(e),...s});return(0,r.decorateServiceException)(o,t)},en=async(e,n)=>{const t=e.body,s=Dn(t.Error,n),o=new ue({$metadata:S(e),...s});return(0,r.decorateServiceException)(o,t)},tn=async(e,n)=>{const t=e.body,s=$n(t.Error,n),o=new fe({$metadata:S(e),...s});return(0,r.decorateServiceException)(o,t)},nn=async(e,n)=>{const t=e.body,s=Wn(t.Error,n),o=new he({$metadata:S(e),...s});return(0,r.decorateServiceException)(o,t)},sn=async(e,n)=>{const t=e.body,s=Mn(t.Error,n),o=new me({$metadata:S(e),...s});return(0,r.decorateServiceException)(o,t)},on=async(e,n)=>{const t=e.body,s=kn(t.Error,n),o=new ae({$metadata:S(e),...s});return(0,r.decorateServiceException)(o,t)},rn=async(e,n)=>{const t=e.body,s=Ln(t.Error,n),o=new de({$metadata:S(e),...s});return(0,r.decorateServiceException)(o,t)},cn=async(e,n)=>{const t=e.body,s=zn(t.Error,n),o=new le({$metadata:S(e),...s});return(0,r.decorateServiceException)(o,t)},an=(e,n)=>{const t={};if(e[$]!=null&&(t[$]=e[$]),e[j]!=null&&(t[j]=e[j]),e[P]!=null){const s=se(e[P],n);e[P]?.length===0&&(t.PolicyArns=[]),Object.entries(s).forEach(([o,a])=>{const i=`PolicyArns.${o}`;t[i]=a})}if(e[C]!=null&&(t[C]=e[C]),e[R]!=null&&(t[R]=e[R]),e[V]!=null){const s=et(e[V],n);e[V]?.length===0&&(t.Tags=[]),Object.entries(s).forEach(([o,a])=>{const i=`Tags.${o}`;t[i]=a})}if(e[Oe]!=null){const s=pn(e[Oe],n);e[Oe]?.length===0&&(t.TransitiveTagKeys=[]),Object.entries(s).forEach(([o,a])=>{const i=`TransitiveTagKeys.${o}`;t[i]=a})}if(e[ve]!=null&&(t[ve]=e[ve]),e[H]!=null&&(t[H]=e[H]),e[Z]!=null&&(t[Z]=e[Z]),e[b]!=null&&(t[b]=e[b]),e[$e]!=null){const s=An(e[$e],n);e[$e]?.length===0&&(t.ProvidedContexts=[]),Object.entries(s).forEach(([o,a])=>{const i=`ProvidedContexts.${o}`;t[i]=a})}return t},dn=(e,n)=>{const t={};if(e[$]!=null&&(t[$]=e[$]),e[we]!=null&&(t[we]=e[we]),e[ze]!=null&&(t[ze]=e[ze]),e[P]!=null){const s=se(e[P],n);e[P]?.length===0&&(t.PolicyArns=[]),Object.entries(s).forEach(([o,a])=>{const i=`PolicyArns.${o}`;t[i]=a})}return e[C]!=null&&(t[C]=e[C]),e[R]!=null&&(t[R]=e[R]),t},ln=(e,n)=>{const t={};if(e[$]!=null&&(t[$]=e[$]),e[j]!=null&&(t[j]=e[j]),e[Ne]!=null&&(t[Ne]=e[Ne]),e[We]!=null&&(t[We]=e[We]),e[P]!=null){const s=se(e[P],n);e[P]?.length===0&&(t.PolicyArns=[]),Object.entries(s).forEach(([o,a])=>{const i=`PolicyArns.${o}`;t[i]=a})}return e[C]!=null&&(t[C]=e[C]),e[R]!=null&&(t[R]=e[R]),t},fn=(e,n)=>{const t={};return e[Ie]!=null&&(t[Ie]=e[Ie]),t},mn=(e,n)=>{const t={};return e[K]!=null&&(t[K]=e[K]),t},un=(e,n)=>({}),hn=(e,n)=>{const t={};if(e[_e]!=null&&(t[_e]=e[_e]),e[C]!=null&&(t[C]=e[C]),e[P]!=null){const s=se(e[P],n);e[P]?.length===0&&(t.PolicyArns=[]),Object.entries(s).forEach(([o,a])=>{const i=`PolicyArns.${o}`;t[i]=a})}if(e[R]!=null&&(t[R]=e[R]),e[V]!=null){const s=et(e[V],n);e[V]?.length===0&&(t.Tags=[]),Object.entries(s).forEach(([o,a])=>{const i=`Tags.${o}`;t[i]=a})}return t},yn=(e,n)=>{const t={};return e[R]!=null&&(t[R]=e[R]),e[H]!=null&&(t[H]=e[H]),e[Z]!=null&&(t[Z]=e[Z]),t},se=(e,n)=>{const t={};let s=1;for(const o of e){if(o===null)continue;const a=gn(o,n);Object.entries(a).forEach(([i,h])=>{t[`member.${s}.${i}`]=h}),s++}return t},gn=(e,n)=>{const t={};return e[je]!=null&&(t[je]=e[je]),t},Sn=(e,n)=>{const t={};return e[De]!=null&&(t[De]=e[De]),e[Ee]!=null&&(t[Ee]=e[Ee]),t},An=(e,n)=>{const t={};let s=1;for(const o of e){if(o===null)continue;const a=Sn(o,n);Object.entries(a).forEach(([i,h])=>{t[`member.${s}.${i}`]=h}),s++}return t},En=(e,n)=>{const t={};return e[be]!=null&&(t[be]=e[be]),e[Be]!=null&&(t[Be]=e[Be]),t},pn=(e,n)=>{const t={};let s=1;for(const o of e)o!==null&&(t[`member.${s}`]=o,s++);return t},et=(e,n)=>{const t={};let s=1;for(const o of e){if(o===null)continue;const a=En(o,n);Object.entries(a).forEach(([i,h])=>{t[`member.${s}.${i}`]=h}),s++}return t},Se=(e,n)=>{const t={};return e[Ae]!=null&&(t[Ae]=(0,r.expectString)(e[Ae])),e[D]!=null&&(t[D]=(0,r.expectString)(e[D])),t},Rn=(e,n)=>{const t={};return e[p]!=null&&(t[p]=q(e[p],n)),e[w]!=null&&(t[w]=Se(e[w],n)),e[x]!=null&&(t[x]=(0,r.strictParseInt32)(e[x])),e[b]!=null&&(t[b]=(0,r.expectString)(e[b])),t},vn=(e,n)=>{const t={};return e[p]!=null&&(t[p]=q(e[p],n)),e[w]!=null&&(t[w]=Se(e[w],n)),e[x]!=null&&(t[x]=__strictParseInt32(e[x])),e[ke]!=null&&(t[ke]=__expectString(e[ke])),e[Ge]!=null&&(t[Ge]=__expectString(e[Ge])),e[xe]!=null&&(t[xe]=__expectString(e[xe])),e[N]!=null&&(t[N]=__expectString(e[N])),e[Te]!=null&&(t[Te]=__expectString(e[Te])),e[b]!=null&&(t[b]=__expectString(e[b])),t},In=(e,n)=>{const t={};return e[p]!=null&&(t[p]=q(e[p],n)),e[Fe]!=null&&(t[Fe]=(0,r.expectString)(e[Fe])),e[w]!=null&&(t[w]=Se(e[w],n)),e[x]!=null&&(t[x]=(0,r.strictParseInt32)(e[x])),e[Me]!=null&&(t[Me]=(0,r.expectString)(e[Me])),e[N]!=null&&(t[N]=(0,r.expectString)(e[N])),e[b]!=null&&(t[b]=(0,r.expectString)(e[b])),t},q=(e,n)=>{const t={};return e[K]!=null&&(t[K]=(0,r.expectString)(e[K])),e[Le]!=null&&(t[Le]=(0,r.expectString)(e[Le])),e[Ue]!=null&&(t[Ue]=(0,r.expectString)(e[Ue])),e[Re]!=null&&(t[Re]=(0,r.expectNonNull)((0,r.parseRfc3339DateTimeWithOffset)(e[Re]))),t},Cn=(e,n)=>{const t={};return e[pe]!=null&&(t[pe]=__expectString(e[pe])),t},Pn=(e,n)=>{const t={};return e[m]!=null&&(t[m]=(0,r.expectString)(e[m])),t},xn=(e,n)=>{const t={};return e[Pe]!=null&&(t[Pe]=__expectString(e[Pe])),e[D]!=null&&(t[D]=__expectString(e[D])),t},bn=(e,n)=>{const t={};return e[B]!=null&&(t[B]=__expectString(e[B])),t},_n=(e,n)=>{const t={};return e[Ke]!=null&&(t[Ke]=__expectString(e[Ke])),e[B]!=null&&(t[B]=__expectString(e[B])),e[D]!=null&&(t[D]=__expectString(e[D])),t},Tn=(e,n)=>{const t={};return e[p]!=null&&(t[p]=q(e[p],n)),e[Ce]!=null&&(t[Ce]=xn(e[Ce],n)),e[x]!=null&&(t[x]=__strictParseInt32(e[x])),t},wn=(e,n)=>{const t={};return e[p]!=null&&(t[p]=q(e[p],n)),t},Dn=(e,n)=>{const t={};return e[m]!=null&&(t[m]=(0,r.expectString)(e[m])),t},$n=(e,n)=>{const t={};return e[m]!=null&&(t[m]=(0,r.expectString)(e[m])),t},Wn=(e,n)=>{const t={};return e[m]!=null&&(t[m]=(0,r.expectString)(e[m])),t},Mn=(e,n)=>{const t={};return e[m]!=null&&(t[m]=(0,r.expectString)(e[m])),t},kn=(e,n)=>{const t={};return e[m]!=null&&(t[m]=(0,r.expectString)(e[m])),t},Ln=(e,n)=>{const t={};return e[m]!=null&&(t[m]=(0,r.expectString)(e[m])),t},zn=(e,n)=>{const t={};return e[m]!=null&&(t[m]=(0,r.expectString)(e[m])),t},S=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Hs=(e,n)=>collectBody(e,n).then(t=>n.utf8Encoder(t)),Fn=(0,r.withBaseException)(_),M=async(e,n,t,s,o)=>{const{hostname:a,protocol:i="https",port:h,path:E}=await e.endpoint(),I={protocol:i,hostname:a,port:h,method:"POST",path:E.endsWith("/")?E.slice(0,-1)+t:E+t,headers:n};return s!==void 0&&(I.hostname=s),o!==void 0&&(I.body=o),new ge.Kd(I)},k={"content-type":"application/x-www-form-urlencoded"},L="2011-06-15",z="Action",K="AccessKeyId",Gn="AssumeRole",Ae="AssumedRoleId",w="AssumedRoleUser",Un="AssumeRoleWithSAML",On="AssumeRoleWithWebIdentity",B="Account",D="Arn",N="Audience",p="Credentials",Ee="ContextAssertion",Kn="DecodeAuthorizationMessage",pe="DecodedMessage",R="DurationSeconds",Re="Expiration",ve="ExternalId",Ie="EncodedMessage",Ce="FederatedUser",Pe="FederatedUserId",Bn="GetAccessKeyInfo",Nn="GetCallerIdentity",jn="GetFederationToken",Hn="GetSessionToken",xe="Issuer",be="Key",_e="Name",Te="NameQualifier",C="Policy",P="PolicyArns",we="PrincipalArn",De="ProviderArn",$e="ProvidedContexts",We="ProviderId",x="PackedPolicySize",Me="Provider",$="RoleArn",j="RoleSessionName",ke="Subject",Le="SecretAccessKey",ze="SAMLAssertion",Fe="SubjectFromWebIdentityToken",b="SourceIdentity",H="SerialNumber",Ge="SubjectType",Ue="SessionToken",V="Tags",Z="TokenCode",Oe="TransitiveTagKeys",Ke="UserId",F="Version",Be="Value",Ne="WebIdentityToken",je="arn",m="message",G=e=>Object.entries(e).map(([n,t])=>(0,r.extendedEncodeURIComponent)(n)+"="+(0,r.extendedEncodeURIComponent)(t)).join("&"),Vn=(e,n)=>{if(n.Error?.Code!==void 0)return n.Error.Code;if(e.statusCode==404)return"NotFound"};class Zn extends r.Command.classBuilder().ep({...qe}).m(function(n,t,s,o){return[(0,Je.TM)(s,this.serialize,this.deserialize),(0,ie.rD)(s,n.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,Bt).ser(Xt).de(Yt).build(){}class Xn extends r.Command.classBuilder().ep({...qe}).m(function(n,t,s,o){return[(0,Je.TM)(s,this.serialize,this.deserialize),(0,ie.rD)(s,n.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(Nt,jt).ser(Qt).de(Jt).build(){}const tt="us-east-1",nt=e=>{if(typeof e?.Arn=="string"){const n=e.Arn.split(":");if(n.length>4&&n[4]!=="")return n[4]}},st=async(e,n,t)=>{const s=typeof e=="function"?await e():e,o=typeof n=="function"?await n():n;return t?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${s} (provider)`,`${o} (parent client)`,`${tt} (STS default)`),s??o??tt},ot=(e,n)=>{let t,s;return async(o,a)=>{if(s=o,!t){const{logger:I=e?.parentClientConfig?.logger,region:Q,requestHandler:Y=e?.parentClientConfig?.requestHandler,credentialProviderLogger:Ye}=e,xs=await st(Q,e?.parentClientConfig?.region,Ye),bs=!it(Y);t=new n({credentialDefaultProvider:()=>async()=>s,region:xs,requestHandler:bs?Y:void 0,logger:I})}const{Credentials:i,AssumedRoleUser:h}=await t.send(new Zn(a));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${a.RoleArn}`);const E=nt(h);return{accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration,...i.CredentialScope&&{credentialScope:i.CredentialScope},...E&&{accountId:E}}}},rt=(e,n)=>{let t;return async s=>{if(!t){const{logger:h=e?.parentClientConfig?.logger,region:E,requestHandler:I=e?.parentClientConfig?.requestHandler,credentialProviderLogger:Q}=e,Y=await st(E,e?.parentClientConfig?.region,Q),Ye=!it(I);t=new n({region:Y,requestHandler:Ye?I:void 0,logger:h})}const{Credentials:o,AssumedRoleUser:a}=await t.send(new Xn(s));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${s.RoleArn}`);const i=nt(a);return{accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration,...o.CredentialScope&&{credentialScope:o.CredentialScope},...i&&{accountId:i}}}},Vs=e=>n=>e({roleAssumer:ot(n,n.stsClientCtor),roleAssumerWithWebIdentity:rt(n,n.stsClientCtor),...n}),it=e=>e?.metadata?.handlerProtocol==="h2";var ct=d(731758),Qn=d(146170),Yn=d(196692),at=d(633202),ee=d(57801),te=d(125158),Jn=d(251320),oe=d(425263),qn=d(250784),dt=d(442952);const es=async(e,n,t)=>({operation:(0,dt.u)(n).operation,region:await(0,dt.t)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function ts(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(n,t)=>({signingProperties:{config:n,context:t}})}}function lt(e){return{schemeId:"smithy.api#noAuth"}}const ns=e=>{const n=[];switch(e.operation){case"AssumeRoleWithSAML":{n.push(lt(e));break}case"AssumeRoleWithWebIdentity":{n.push(lt(e));break}default:n.push(ts(e))}return n},ss=e=>({...e,stsClientCtor:Qe}),os=e=>{const n=ss(e);return{...(0,qn.h)(n)}},rs={rE:"3.637.0"};var is=d(668227),ft=d(59065),mt=d(434054),cs=d(62438),as=d(951461),ne=d(75854),ut=d(132117),ds=d(788226),ls=d(994134),fs=d(142640),ht=d(361821);const ms=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]";var He=d(320181);const us=(e,n=0,t=e.byteLength-n)=>{if(!ms(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return He.Buffer.from(e,n,t)},hs=(e,n)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return n?He.Buffer.from(e,n):He.Buffer.from(e)},ys=e=>{const n=hs(e,"utf8");return new Uint8Array(n.buffer,n.byteOffset,n.byteLength/Uint8Array.BYTES_PER_ELEMENT)},Zs=e=>typeof e=="string"?fromUtf8(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),gs=e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return us(e.buffer,e.byteOffset,e.byteLength).toString("utf8")};var Ss=d(206775),yt=d(405332);const gt="required",c="type",l="fn",f="argv",U="ref",St=!1,Ve=!0,O="booleanEquals",y="stringEquals",At="sigv4",Et="sts",pt="us-east-1",u="endpoint",Rt="https://sts.{Region}.{PartitionResult#dnsSuffix}",T="tree",X="error",Ze="getAttr",vt={[gt]:!1,[c]:"String"},Xe={[gt]:!0,default:!1,[c]:"Boolean"},It={[U]:"Endpoint"},Ct={[l]:"isSet",[f]:[{[U]:"Region"}]},g={[U]:"Region"},Pt={[l]:"aws.partition",[f]:[g],assign:"PartitionResult"},xt={[U]:"UseFIPS"},bt={[U]:"UseDualStack"},A={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:At,signingName:Et,signingRegion:pt}]},headers:{}},v={},_t={conditions:[{[l]:y,[f]:[g,"aws-global"]}],[u]:A,[c]:u},Tt={[l]:O,[f]:[xt,!0]},wt={[l]:O,[f]:[bt,!0]},Dt={[l]:Ze,[f]:[{[U]:"PartitionResult"},"supportsFIPS"]},$t={[U]:"PartitionResult"},Wt={[l]:O,[f]:[!0,{[l]:Ze,[f]:[$t,"supportsDualStack"]}]},Mt=[{[l]:"isSet",[f]:[It]}],kt=[Tt],Lt=[wt],As={version:"1.0",parameters:{Region:vt,UseDualStack:Xe,UseFIPS:Xe,Endpoint:vt,UseGlobalEndpoint:Xe},rules:[{conditions:[{[l]:O,[f]:[{[U]:"UseGlobalEndpoint"},Ve]},{[l]:"not",[f]:Mt},Ct,Pt,{[l]:O,[f]:[xt,St]},{[l]:O,[f]:[bt,St]}],rules:[{conditions:[{[l]:y,[f]:[g,"ap-northeast-1"]}],endpoint:A,[c]:u},{conditions:[{[l]:y,[f]:[g,"ap-south-1"]}],endpoint:A,[c]:u},{conditions:[{[l]:y,[f]:[g,"ap-southeast-1"]}],endpoint:A,[c]:u},{conditions:[{[l]:y,[f]:[g,"ap-southeast-2"]}],endpoint:A,[c]:u},_t,{conditions:[{[l]:y,[f]:[g,"ca-central-1"]}],endpoint:A,[c]:u},{conditions:[{[l]:y,[f]:[g,"eu-central-1"]}],endpoint:A,[c]:u},{conditions:[{[l]:y,[f]:[g,"eu-north-1"]}],endpoint:A,[c]:u},{conditions:[{[l]:y,[f]:[g,"eu-west-1"]}],endpoint:A,[c]:u},{conditions:[{[l]:y,[f]:[g,"eu-west-2"]}],endpoint:A,[c]:u},{conditions:[{[l]:y,[f]:[g,"eu-west-3"]}],endpoint:A,[c]:u},{conditions:[{[l]:y,[f]:[g,"sa-east-1"]}],endpoint:A,[c]:u},{conditions:[{[l]:y,[f]:[g,pt]}],endpoint:A,[c]:u},{conditions:[{[l]:y,[f]:[g,"us-east-2"]}],endpoint:A,[c]:u},{conditions:[{[l]:y,[f]:[g,"us-west-1"]}],endpoint:A,[c]:u},{conditions:[{[l]:y,[f]:[g,"us-west-2"]}],endpoint:A,[c]:u},{endpoint:{url:Rt,properties:{authSchemes:[{name:At,signingName:Et,signingRegion:"{Region}"}]},headers:v},[c]:u}],[c]:T},{conditions:Mt,rules:[{conditions:kt,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[c]:X},{conditions:Lt,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[c]:X},{endpoint:{url:It,properties:v,headers:v},[c]:u}],[c]:T},{conditions:[Ct],rules:[{conditions:[Pt],rules:[{conditions:[Tt,wt],rules:[{conditions:[{[l]:O,[f]:[Ve,Dt]},Wt],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:v,headers:v},[c]:u}],[c]:T},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[c]:X}],[c]:T},{conditions:kt,rules:[{conditions:[{[l]:O,[f]:[Dt,Ve]}],rules:[{conditions:[{[l]:y,[f]:[{[l]:Ze,[f]:[$t,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:v,headers:v},[c]:u},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:v,headers:v},[c]:u}],[c]:T},{error:"FIPS is enabled but this partition does not support FIPS",[c]:X}],[c]:T},{conditions:Lt,rules:[{conditions:[Wt],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:v,headers:v},[c]:u}],[c]:T},{error:"DualStack is enabled but this partition does not support DualStack",[c]:X}],[c]:T},_t,{endpoint:{url:Rt,properties:v,headers:v},[c]:u}],[c]:T}],[c]:T},{error:"Invalid Configuration: Missing Region",[c]:X}]},Es=(e,n={})=>(0,yt.sO)(As,{endpointParams:e,logger:n.logger});yt.mw.aws=Ss.UF;const ps=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??ht.E,base64Encoder:e?.base64Encoder??ht.n,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Es,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??ns,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:n=>n.getIdentityProvider("aws.auth#sigv4"),signer:new ft.f2},{schemeId:"smithy.api#noAuth",identityProvider:n=>n.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new te.mR}],logger:e?.logger??new r.NoOpLogger,serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??fs.D,utf8Decoder:e?.utf8Decoder??ys,utf8Encoder:e?.utf8Encoder??gs});var Rs=d(534546);const vs=e=>{(0,r.emitWarningIfUnsupportedVersion)(process.version);const n=(0,Rs.I)(e),t=()=>n().then(r.loadConfigsForDefaultMode),s=ps(e);return(0,is.I)(process.version),{...s,...e,runtime:"node",defaultsMode:n,bodyLengthChecker:e?.bodyLengthChecker??ds.n,credentialDefaultProvider:e?.credentialDefaultProvider??mt.v6,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,cs.mJ)({serviceId:s.serviceId,clientVersion:rs.rE}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:o=>o.getIdentityProvider("aws.auth#sigv4")||(async a=>await(0,mt.v6)(a?.__config||{})()),signer:new ft.f2},{schemeId:"smithy.api#noAuth",identityProvider:o=>o.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new te.mR}],maxAttempts:e?.maxAttempts??(0,ne.Z)(oe.qs),region:e?.region??(0,ne.Z)(ee.GG,ee.zH),requestHandler:ut.$c.create(e?.requestHandler??t),retryMode:e?.retryMode??(0,ne.Z)({...oe.kN,default:async()=>(await t()).retryMode||ls.L0}),sha256:e?.sha256??as.V.bind(null,"sha256"),streamCollector:e?.streamCollector??ut.kv,useDualstackEndpoint:e?.useDualstackEndpoint??(0,ne.Z)(ee.e$),useFipsEndpoint:e?.useFipsEndpoint??(0,ne.Z)(ee.Ko)}};var zt=d(303119);const Is=e=>{const n=e.httpAuthSchemes;let t=e.httpAuthSchemeProvider,s=e.credentials;return{setHttpAuthScheme(o){const a=n.findIndex(i=>i.schemeId===o.schemeId);a===-1?n.push(o):n.splice(a,1,o)},httpAuthSchemes(){return n},setHttpAuthSchemeProvider(o){t=o},httpAuthSchemeProvider(){return t},setCredentials(o){s=o},credentials(){return s}}},Cs=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),re=e=>e,Ps=(e,n)=>{const t={...re((0,zt.Rq)(e)),...re((0,r.getDefaultExtensionConfiguration)(e)),...re((0,ge.eS)(e)),...re(Is(e))};return n.forEach(s=>s.configure(t)),{...e,...(0,zt.$3)(t),...(0,r.resolveDefaultRuntimeConfig)(t),...(0,ge.jt)(t),...Cs(t)}};class Qe extends r.Client{constructor(...[n]){const t=vs(n||{}),s=Kt(t),o=(0,at.Dc)(s),a=(0,oe.$z)(o),i=(0,ee.TD)(a),h=(0,ct.OV)(i),E=(0,ie.Co)(h),I=os(E),Q=Ps(I,n?.extensions||[]);super(Q),this.config=Q,this.middlewareStack.use((0,at.sM)(this.config)),this.middlewareStack.use((0,oe.ey)(this.config)),this.middlewareStack.use((0,Jn.vK)(this.config)),this.middlewareStack.use((0,ct.TC)(this.config)),this.middlewareStack.use((0,Qn.Y7)(this.config)),this.middlewareStack.use((0,Yn.n4)(this.config)),this.middlewareStack.use((0,te.wB)(this.config,{httpAuthSchemeParametersProvider:es,identityProviderConfigProvider:async Y=>new te.h$({"aws.auth#sigv4":Y.credentials})})),this.middlewareStack.use((0,te.lW)(this.config))}destroy(){super.destroy()}}const Ft=(e,n)=>n?class extends e{constructor(s){super(s);for(const o of n)this.middlewareStack.use(o)}}:e,Gt=(e={},n)=>ot(e,Ft(Qe,n)),Ut=(e={},n)=>rt(e,Ft(Qe,n)),Qs=e=>n=>e({roleAssumer:Gt(n),roleAssumerWithWebIdentity:Ut(n),...n})}};

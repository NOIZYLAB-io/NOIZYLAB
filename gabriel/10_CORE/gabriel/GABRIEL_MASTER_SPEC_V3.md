# GABRIEL MASTER SPEC v3 (The Industry Breaker)

**Mission**: Sovereign Entity on M2 Ultra. Smartest, Fastest, Most Useful.

## 1. MIACLE BULLETS: The "Universe-Best" Architecture

* **Reflex Brain (Local)**: M2 Ultra Native (MLX). Instant.
* **Truth Memory (MemCell++)**: Evidence-locked, hash-verified, Conflict-first.
* **GraphRAG**: Semantic + Relational recall.
* **Tool OS**: Audio/Video tools that output *artifacts* (Files), not advice.
* **Duplex Voice**: Interruptible, state-driven, prosody-reactive.
* **Living Avatar**: State Machine (Idling/Thinking/Speaking), HUD, Visemes.

## 2. MEMCELL++ (Truth Engine)

* **Atomic Only**: 1 claim per cell.
* **Provenance**: `source_id` + `locator` mandatory.
* **Conflict-First**: Contradictions = `CONFLICT` MemCell (never overwrite).
* **Checksums**: SHA256 everything.
* **Decision Ledger**: Major choices = `DECISION` MemCell (Rationale/Rollback).

## 3. PROMPT CONTRACTS (v4)

* **Inputs**: Strict sources.
* **Outputs**: `MIACLE BULLETS` (Max 12), `NEXT ACTIONS` (Commands), `EVIDENCE MAP`.
* **Scoring**: Accuracy/Actionability checks. Auto-rerun if <0.95.

## 4. TOOL OS (Real Tools)

* **Audio**: Audit (LUFS/Spectra), Stems, Repair, Mix Notes, Reference Match.
* **Video**: Scene Detect, Silence Cut, Captions, Versioning.
* **Rule**: All tools must produce a Plan + Artifact List + Runbook.

## 5. VOICE & AVATAR

* **Voice**: Realtime Duplex (Interruptible).
* **Avatar State**: `IDLE`, `LISTEN`, `THINK`, `SPEAK`, `ALERT`, `EXECUTE_CONFIRM`.
* **HUD**: Confidence Score + Evidence Sources + Next Action.

## 6. BUILD ORDER

1. **MemCell++ / Overlap Engine** (Stability).
2. **Tool OS** (Utility).
3. **Duplex Voice** (Interaction).
4. **Avatar Runtime** (Presence).

## 7. GLOBAL RULES (Antigravity)

* **Storage Root**: `GABRIEL:/MC96/GABRIEL_CORE/`
* **Operating Style**: Tight bullets, File Paths, Exact Clicks.
* **Safety**: Destructive actions require `EXECUTE` command.

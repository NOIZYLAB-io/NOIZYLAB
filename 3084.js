try{let a="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},b=(new a.Error).stack;b&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[b]="9e7cb474-e5da-45f4-a173-0f77a660286c",a._sentryDebugIdIdentifier="sentry-dbid-9e7cb474-e5da-45f4-a173-0f77a660286c")}catch(a){}"use strict";exports.id=3084,exports.ids=[3084],exports.modules={5998:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{E7:()=>m,Kq:()=>p,R4:()=>n,checkAnthropicAuthStatus:()=>o});var e=c(944);c(7004);var f=c(74688),g=c(13234),h=c(55511),i=c.n(h),j=c(36676),k=a([g]);g=(k.then?(await k)():k)[0];let q=null;async function l(){return q||(q=(await (0,f.S)()).anthropic),q}async function m(){try{let a=await l(),b=function(){let a=i().randomBytes(32).toString("base64url"),b=i().createHash("sha256").update(a).digest("base64url");return{verifier:a,challenge:b}}(),c=i().randomBytes(32).toString("base64url"),d=new URL(a.authorizeUrl);d.searchParams.set("code","true"),d.searchParams.set("client_id",a.clientId),d.searchParams.set("response_type","code"),d.searchParams.set("redirect_uri",a.redirectUri),d.searchParams.set("scope",a.scopes.join(" ")),d.searchParams.set("state",c),d.searchParams.set("code_challenge",b.challenge),d.searchParams.set("code_challenge_method","S256");let e={verifier:b.verifier,state:c,timestamp:Date.now()};return g.Hv.upsert({key:"anthropic-oauth-data",value:JSON.stringify(e)}),{success:!0,authUrl:d.toString(),verifier:b.verifier,state:c}}catch(a){return console.error("Error starting OAuth flow:",a),{success:!1,error:"Failed to start OAuth flow"}}}async function n(a){if(!a)return{success:!1,error:"Missing authorization code"};try{let b,c=await l(),[d,e]=a.includes("#")?a.split("#"):[a,null],f=g.Hv.get("anthropic-oauth-data");if(!f)return{success:!1,error:"OAuth session not found. Please start the authentication process again."};try{b=JSON.parse(f)}catch(a){return{success:!1,error:"Invalid OAuth session data"}}if(Date.now()-b.timestamp>6e5)return g.Hv.delete("anthropic-oauth-data"),{success:!1,error:"OAuth session expired. Please try again."};let h={grant_type:"authorization_code",code:d,redirect_uri:c.redirectUri,client_id:c.clientId,code_verifier:b.verifier,state:e||b.state},i=await fetch(c.tokenUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});if(!i.ok){let a=await i.text();throw Error(`Token exchange failed: ${a}`)}let j=await i.json(),k=await fetch(c.apiKeyUrl,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${j.access_token}`},body:JSON.stringify({})});if(!k.ok){let a=await k.text();throw Error(`API key creation failed: ${a}`)}let m=await k.json();return g.FI.upsert({provider:"Anthropic",apikey:m.raw_key,google_Oauth:JSON.stringify({type:"oauth_generated",key_id:m.id,key_name:m.name,created_at:m.created_at,partial_key_hint:m.partial_key_hint})}),g.Hv.delete("anthropic-oauth-data"),{success:!0,apiKey:m.raw_key,keyName:m.name}}catch(a){return console.error("Error in OAuth callback:",a),g.Hv.delete("anthropic-oauth-data"),{success:!1,error:a.message||"Failed to complete OAuth flow"}}}async function o(){try{let a=g.FI.getByProvider("Anthropic");if(!a?.apikey)return{authenticated:!1};let b=null;if(a.google_Oauth)try{b=JSON.parse(a.google_Oauth)}catch{}return{authenticated:!0,isOAuthGenerated:b?.type==="oauth_generated",keyName:b?.key_name,keyHint:b?.partial_key_hint}}catch(a){return console.error("Error checking auth status:",a),{authenticated:!1}}}async function p(){try{let a=g.FI.getByProvider("Anthropic");if(a?.google_Oauth)try{let b=JSON.parse(a.google_Oauth);"oauth_generated"===b.type&&g.FI.upsert({provider:"Anthropic",apikey:"",google_Oauth:""})}catch{}return{success:!0}}catch(a){return console.error("Error during logout:",a),{success:!1,error:"Failed to logout"}}}(0,j.D)([m,n,o,p]),(0,e.A)(m,"001d55d5a5d4c93beca86646ee895886308e320f2d",null),(0,e.A)(n,"40c132d4fa406e3f9b0e437d71e868748209040841",null),(0,e.A)(o,"00dcd264352f6c4673761b7f1d1e8f3203e1a71d17",null),(0,e.A)(p,"004bf879b687265cc29c2ec7a432c4a08d6d745deb",null),d()}catch(a){d(a)}})},6088:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A:()=>h});var e=c(43084),f=c(3999),g=a([e]);e=(g.then?(await g)():g)[0];let h={context:{secrets:{delete:async a=>await f.A.delete(`${await (0,e.bm)()}/secret/${a}`),store:async(a,b)=>await f.A.post(`${await (0,e.bm)()}/secrets`,{key:a,value:b})},globalState:{update:async(a,b)=>await f.A.post(`${await (0,e.bm)()}/globalState`,{key:a,value:b})}},window:{showErrorMessage:async a=>await f.A.post(`${await (0,e.bm)()}/showErrorMessage`,{message:a}),showWarningMessage:async a=>await f.A.post(`${await (0,e.bm)()}/showWarningMessage`,{message:a}),showInformationMessage:async a=>await f.A.post(`${await (0,e.bm)()}/showInformationMessage`,{message:a})},commands:{executeCommand:async a=>await f.A.post(`${await (0,e.bm)()}/executeCommand`,{command:a})},workspace:{getConfiguration:()=>({update:async(a,b)=>await f.A.post(`${await (0,e.bm)()}/config`,{key:a,value:b})})},newFileWithCode:async a=>await f.A.post(`${await (0,e.bm)()}/newFileWithCode`,{code:a}),insertCode:async a=>await f.A.post(`${await (0,e.bm)()}/insertCode`,{code:a}),getSelectedText:async()=>(await f.A.get(`${await (0,e.bm)()}/getSelectedText`)).data,getLanguage:async()=>{let a=await f.A.get(`${await (0,e.bm)()}/language`);return a.data.includes("react")?"jsx":a.data},getFileName:async()=>(await f.A.get(`${await (0,e.bm)()}/filename`)).data,getIdeLanguage:async()=>(await f.A.get(`${await (0,e.bm)()}/ideLanguage`)).data,getVersion:async()=>(await f.A.get(`${await (0,e.bm)()}/version`)).data};d()}catch(a){d(a)}})},33295:(a,b,c)=>{c.d(b,{G:()=>q});var d=c(55511),e=c.n(d),f=c(29021),g=c(5230),h=c(81630),i=c(91645),j=c(21820),k=c(33873),l=c.n(k),m=c(79551),n=c(74688);let o=null,p="https://developers.google.com/gemini-code-assist/auth_failure_gemini";class q{constructor(){this.clientInitialized=!1,this.client=new g.OAuth2Client}async ensureOAuthConfig(){o||(o=(await (0,n.S)()).gemini),this.clientInitialized||(this.client=new g.OAuth2Client(o.clientId,o.clientSecret,"http://localhost"),this.client.on("tokens",async a=>{await this.cacheCredentials(a)}),this.clientInitialized=!0)}getCodeGPTCredentialPath(){return l().join(j.homedir(),".codegpt","gemini-oauth.json")}async cacheCredentials(a){let b=this.getCodeGPTCredentialPath();await f.promises.mkdir(l().dirname(b),{recursive:!0});let c=JSON.stringify(a,null,2);await f.promises.writeFile(b,c)}async loadCachedCredentials(){await this.ensureOAuthConfig();try{let a=this.getCodeGPTCredentialPath(),b=await f.promises.readFile(a,"utf-8");this.client.setCredentials(JSON.parse(b));let{token:c}=await this.client.getAccessToken();if(!c)return!1;return await this.client.getTokenInfo(c),!0}catch{return!1}}async clearCachedCredentials(){try{await f.promises.rm(this.getCodeGPTCredentialPath(),{force:!0})}catch{}}getAvailablePort(){return new Promise((a,b)=>{let c=0;try{let d=i.createServer();d.listen(0,()=>{c=d.address().port}),d.on("listening",()=>{d.close(),d.unref()}),d.on("error",a=>b(a)),d.on("close",()=>a(c))}catch(a){b(a)}})}async fetchUserInfo(){try{let{token:a}=await this.client.getAccessToken();if(!a)return{};let b=await fetch("https://www.googleapis.com/oauth2/v2/userinfo",{headers:{Authorization:`Bearer ${a}`}});if(!b.ok)return console.error("Failed to fetch user info:",b.status,b.statusText),{};return await b.json()}catch(a){return console.error("Error retrieving user info:",a),{}}}async authWithWeb(){await this.ensureOAuthConfig();let a=await this.getAvailablePort(),b=`http://localhost:${a}/oauth2callback`,c=e().randomBytes(32).toString("hex");return{authUrl:this.client.generateAuthUrl({client_id:o.clientId,redirect_uri:b,access_type:"offline",scope:o.scopes,state:c}),loginCompletePromise:new Promise((d,e)=>{let f=h.createServer(async(g,h)=>{try{g.url.includes("/oauth2callback")||(h.writeHead(301,{Location:p}),h.end(),e(Error("Unexpected request: "+g.url)));let f=new m.URL(g.url,`http://localhost:${a}`).searchParams;if(f.get("error"))h.writeHead(301,{Location:p}),h.end(),e(Error(`Error during authentication: ${f.get("error")}`));else if(f.get("state")!==c)h.end("State mismatch. Possible CSRF attack"),e(Error("State mismatch. Possible CSRF attack"));else if(f.get("code")){let{tokens:a}=await this.client.getToken({code:f.get("code"),redirect_uri:b});this.client.setCredentials(a),await this.cacheCredentials(a),this.fetchUserInfo().catch(()=>{}),h.writeHead(301,{Location:"https://developers.google.com/gemini-code-assist/auth_success_gemini"}),h.end(),d()}else e(Error("No code found in request"))}catch(a){e(a)}finally{f.close()}});f.listen(a)})}}async getAuthenticatedClient(){return await this.loadCachedCredentials()?this.client:null}async isAuthenticated(){return await this.loadCachedCredentials()}}},43084:(a,b,c)=>{c.a(a,async(a,d)=>{try{let o;c.d(b,{AX:()=>y,BN:()=>Z,Bj:()=>D,CA:()=>ai,CG:()=>as,CZ:()=>r,Ct:()=>G,DH:()=>an,Dk:()=>p,Hu:()=>v,I3:()=>al,IO:()=>ao,JP:()=>U,Jw:()=>t,MP:()=>C,RK:()=>am,S_:()=>aa,So:()=>ac,TG:()=>B,Tq:()=>X,UU:()=>_,Vn:()=>at,WP:()=>O,Ww:()=>W,XQ:()=>ak,Yp:()=>au,_P:()=>R,_R:()=>ar,_S:()=>I,_X:()=>aq,_f:()=>u,aM:()=>K,bm:()=>ag,fm:()=>ae,gn:()=>M,gv:()=>$,hq:()=>E,iJ:()=>L,iR:()=>aj,ju:()=>ah,lG:()=>Y,le:()=>A,m_:()=>F,o0:()=>af,pc:()=>Q,pe:()=>N,ph:()=>ad,s_:()=>w,t2:()=>ab,vE:()=>T,vK:()=>q,vR:()=>J,vV:()=>V,vk:()=>z,wt:()=>x,x6:()=>s,yH:()=>H,zU:()=>P});var e=c(944);c(7004);var f=c(13234),g=c(39040),h=c(6088),i=c(3999),j=c(54777),k=c(31921),l=c(31421),m=c(36676),n=a([f,h]);[f,h]=n.then?(await n)():n;let p=async a=>{i.A.post(`${await ag()}/copy`,{code:a})},q=async()=>{try{let a=await fetch(`${await ag()}/paste`);return await a.text()}catch(a){return console.error("Error pasting text:",a),""}},r=async a=>{i.A.post(`${await ag()}/openUrl`,{url:a})},s=async a=>i.A.post(`${await ag()}/openWebviewUrl`,{url:a}).then(a=>a.data),t=async a=>i.A.post(`${await ag()}/insertCode`,{code:a}).then(a=>a.data),u=async a=>i.A.post(`${await ag()}/insertCodeInTerminal`,{code:a}).then(a=>a.data),v=async(a,b)=>i.A.post(`${await ag()}/config`,{key:a,value:b}).then(a=>a.data),w=async(a,b)=>{f.FI.upsert({provider:b,organization_id:a})},x=async(a,b)=>{let c=f.FI.getByProvider(b),d=!c||!c.apikey;return f.FI.upsert({provider:b,apikey:a}),{isFirstConnection:d}},y=async(a,b)=>{let c=f.FI.getByProvider(b),d=!c||!c.custom_link;return f.FI.upsert({provider:b,custom_link:a}),{isFirstConnection:d}},z=async a=>{let b=f.FI.getByProvider("Google AI Studio"),c=!b||!b.google_Oauth;return f.FI.upsert({provider:"Google AI Studio",google_Oauth:a}),{ok:!0,error:"",isFirstConnection:c}},A=async(a,b)=>{f.$W.upsert({provider:b,max_tokens:Number(a)})},B=async(a,b)=>{f.$W.upsert({provider:b,temperature:Number(a)})},C=async(a,b)=>{f.$W.upsert({provider:b,memory:Number(a)})},D=async(a,b)=>{f.FI.upsert({provider:b,region:a})},E=async(a,b)=>{f.FI.upsert({provider:b,access_key_id:a})},F=async(a,b)=>{f.FI.upsert({provider:b,secret_access_key:a})},G=async(a,b)=>{f.FI.upsert({provider:b,session_token:a})},H=async a=>i.A.post(`${await ag()}/changeIframeUrl`,{url:a}).then(a=>a.data),I=async a=>(f.DV.upsert({enabled:+!!a}),i.A.post(`${await ag()}/autocompleteEnabled`,{value:+!!a}).then(a=>a.data)),J=async a=>{f.DV.upsert({max_tokens:Number(a)})},K=async a=>{let[b,c]=a.split(" - ");f.DV.upsert({model:c,provider:b})},L=async a=>{f.DV.upsert({delay:Number(a)})},M=async()=>i.A.get(`${await ag()}/cleanCache`).then(a=>a.data),N=async()=>({selectedCode:await i.A.get(`${await ag()}/getSelectedText/full`).then(a=>a.data)}),O=async()=>await h.A.getFileName(),P=async()=>{let a=await new Promise(a=>{(0,l.exec)("ollama ls",b=>{a(!b)})});if(a)return!0;try{let b=await fetch("http://localhost:54112/1/api/ollama/tags");a=200===b.status}catch(b){console.error("Error checking Ollama status:",b),a=!1}return a},Q=async()=>await i.A.get(`${await ag()}/getProjectStructure`).then(a=>a.data),R=async(a,b,c)=>{let d=new URLSearchParams({...a?{filePath:a}:{},...b?{from:b.toString()}:{},...c?{to:c.toString()}:{}});return await i.A.get(`${await ag()}/getFileContent?${d.toString()}`).then(a=>a.data)},S=new Map,T=async()=>{let a=await ag();if(S.has(a))return i.A.get(`${a}/getAllPathsFromProject`).then(b=>{S.set(a,b.data)}).catch(()=>{S.set(a,[])}),S.get(a);let b=await i.A.get(`${a}/getAllPathsFromProject`).then(a=>a.data).catch(()=>[]);return S.set(a,b),b},U=async({filePath:a,content:b})=>await i.A.post(`${await ag()}/writeFileContent`,{filePath:a,content:b}).then(a=>a.data),V=async({folderPath:a})=>await i.A.post(`${await ag()}/createFolder`,{folderPath:a}).then(a=>a.data),W=async({filePath:a})=>{console.log("[deleteFile] Attempting to delete file:",a);try{return(await i.A.post(`${await ag()}/deleteFile`,{filePath:a})).data}catch(b){return b.response?.data?.error||`Failed to delete file: ${a}`}},X=async({filePath:a,absolutePath:b=!1,startLine:c,endLine:d})=>await i.A.post(`${await ag()}/openFile`,{filePath:a,startLine:c,endLine:d,absolutePath:b}).then(a=>a.data),Y=async a=>{let b=await T()||[];return b.length?new j.A(b).search(a,{limit:6}):[]},Z=async()=>{let a=await T()||[];if(!a.length)return[];let b=new Set;for(let c of a){let a=c?.split("/"),d=a?.length>1?a?.pop():c,e=d?.split(".")??[],f=e?.length>1&&e?.pop();f&&b.add(f)}return Array.from(b)},$=async()=>await i.A.get(`${await ag()}/extensionVersion`).then(a=>!1===a.data.ok?(console.error("Error in getExtensionVersion:",a.data.error),null):a.data),_=async({model:a,fromMarketplace:b,graph:c,provider:d})=>{console.log({model:a,fromMarketplace:b,provider:d,graph:c}),await i.A.post(`${await ag()}/model`,{model:a,fromMarketplace:b,provider:d,graph:c})},aa=async a=>(f.mf.upsert({enabled:+!!a}),await i.A.post(`${await ag()}/autoSelect`,{enabled:a}).then(a=>a.data)),ab=async()=>await i.A.get(`${await ag()}/autoSelect`).then(a=>a.data),ac=async a=>{let b=f.$W.getByProvider(a);return b?.memory??10},ad=async(a,b)=>{f.Hv.upsert({key:a,value:b})},ae=async a=>f.Hv.get(a),af=async()=>f.jM.get(),ag=async()=>{let a=await ah();return a.includes("?")&&(a=a.split("?")[0]),console.log({extensionUrl:`http://localhost:${a}`}),`http://localhost:${a}`},ah=async()=>{let a=(await (0,k.b3)()).get("referer");return a&&a.split("/")[3]||"54113"},ai=async()=>{try{let a=await fetch(`${await ag()}/workspaceFolder`);return await a.text()}catch(a){return console.error("Error getting workspace folder:",a),""}},aj=async()=>{try{let a=await ai(),{ok:b}=JSON.parse(a);return!1!==b}catch{return!0}},ak=async({type:a,currentKey:b})=>{let c=f.Hv.getAll().filter(c=>c.key.startsWith(`${a}-`)&&!c.key.startsWith(`${a}-${b}`));c?.forEach(a=>f.Hv.delete(a.key))},al=async()=>{["mention-prompts-all","recommended-codegpt-models-all","agent-default-all","extension-version-all","funnel-all","marketplace-agents-all","marketplace-groups-all","providers-all"].forEach(a=>f.Hv.delete(a))},am=async()=>{if(o)return o;let a=await (0,g.zf)();return o=a.json,a.json},an=async()=>{try{let a=await ah().catch(()=>"54113"),b=await fetch(`http://localhost:${a}/api/codegptplusbeta/me`);if(!b.ok)throw Error(`HTTP error! status: ${b.status}`);let c=await b.json();if(c?.planId==="prod_S3MhTzkaqqx3CG"){let a=await aq();if(a&&a.length>0)return{id:a[0].id,label:a[0].name,image:"",fromMarketplace:!0,description:a[0].name};return null}}catch(a){console.error("Error checking for byok plan:",a)}return await am()},ao=async()=>(await (0,g.GT)()).json,ap="favoritesModels",aq=async()=>await ae(ap)||[],ar=async a=>await ad(ap,a),as=async a=>{let b=f.FI.getByProvider(a);return b?.apikey},at=async a=>{fetch(`${await ag()}/chatLog`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:a})}).catch(a=>{console.log({e:a})})},au=async()=>{let{checkGeminiAuthStatus:a}=await Promise.resolve().then(c.bind(c,49091)),{checkClaudeCodeAuthStatus:b}=await Promise.resolve().then(c.bind(c,80346)),{checkAnthropicAuthStatus:d}=await Promise.resolve().then(c.bind(c,5998)),e=f.FI.getAll(),g=[];for(let a of e)(a.apikey||a.google_Oauth||a.access_key_id||a.secret_access_key)&&g.push(a.provider);try{let[c,e,f]=await Promise.all([a(),b(),d()]);c.authenticated&&!g.includes("gemini-cli")&&g.push("gemini-cli"),e.authenticated&&!g.includes("claudecode")&&g.push("claudecode"),f.authenticated&&f.isOAuthGenerated&&!g.includes("anthropic")&&g.push("anthropic")}catch(a){console.error("Error checking OAuth status:",a)}return{hasCredentials:g.length>0,providers:g}};(0,m.D)([p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,H,I,J,K,L,N,O,P,Q,R,Y,T,U,Z,$,G,_,M,X,aa,ab,ac,ad,ae,ag,ah,al,ai,aj,ak,am,an,ao,af,at,aq,ar,as,au,V,W]),(0,e.A)(p,"7f3b338623c6b25d468c011a877ced2d44f9165778",null),(0,e.A)(q,"7f844cc301f9e42ff0fb3575df8417e84acfea29b1",null),(0,e.A)(r,"7f7fe7826220a12d2099e5b840c52efcaf939fb8ba",null),(0,e.A)(s,"7f65783ac58872e424c7116f5599b861d010064ac0",null),(0,e.A)(t,"7f0af8946c2f791bce5a0c430fad4e71f048487151",null),(0,e.A)(u,"7fe06261fb9c771b900a33950f37b0a32f3e5ab7f0",null),(0,e.A)(v,"7f7e653bfe259d7ea29e2c879ab0c1b5accf2972dc",null),(0,e.A)(w,"7f7d456ddb5c958cf0f0d13902951c3a7737d5c810",null),(0,e.A)(x,"7f838a09f813a7d570cc51fe951f4a2d1ee2146f50",null),(0,e.A)(y,"7f0566c403b90a3d254d390be4deab5c55f8d1fc28",null),(0,e.A)(z,"7f2f64c37fcbcbaa3395d88945bbb7fcbb84fc98c8",null),(0,e.A)(A,"7fa80ae36b245e191fc8bbb8a60e6626fbb8ff1b63",null),(0,e.A)(B,"7fdba7daef6d4be7406fb0bc4c54c742e5808e998b",null),(0,e.A)(C,"7f3ca7f909e09b7d4d9f5a4838317174e8a7d7b46b",null),(0,e.A)(D,"7f60a0e38f633add5a2060bb403e40484221cb3963",null),(0,e.A)(E,"7f0f78abdd12af11abe362af22815c34ee005f5d8a",null),(0,e.A)(F,"7ff614af3a067f551f6c4cd17e8cf318ea07c22367",null),(0,e.A)(H,"7ff5dfdf5861d8f1897e99dade51478c3b816906d1",null),(0,e.A)(I,"7fe294823f432c007f8630802895799538f7cebac1",null),(0,e.A)(J,"7fefb712d18f4ed13aa35c7139ac0f2fc32b3fb805",null),(0,e.A)(K,"7f8175a2c02e851a38d814e57d119667c68893fc79",null),(0,e.A)(L,"7fa7e9030f944657b59c793aca7fa46ca49c83d183",null),(0,e.A)(N,"7f134900d4bf06854b779403a8f49a0d784ccfadf5",null),(0,e.A)(O,"7ffcb12e013ceaec048bb182cdeb2ebbc3390eda5a",null),(0,e.A)(P,"7fa4237ecc1a1f87ec57b9005f1d331238474b4f79",null),(0,e.A)(Q,"7f90342c086a67f6319e95f0aed84011087d20a982",null),(0,e.A)(R,"7f87664bba07dbcc5d7fd2e685dd7e83aa38995cfd",null),(0,e.A)(Y,"7feb25f0e713cb75614174f5fa7dea04257020682d",null),(0,e.A)(T,"7f4e8f4de614f3f2fcc09a8d87f5522dc35a2392f2",null),(0,e.A)(U,"7fcef053cd05202271d6a7728ed3fba16491916587",null),(0,e.A)(Z,"7f6f85a0370f774688bec005ccc032097f0b18a837",null),(0,e.A)($,"7f73c0f5fdb4e1b7e91f0bfceba06852578a1f5388",null),(0,e.A)(G,"7f1ca76ad82c277a917e60247cc1d448253da82967",null),(0,e.A)(_,"7f6fff10d9ca47d5f6bd548c24918aa433a59ee206",null),(0,e.A)(M,"7f3ff666dfdc7702683ee1820591a8733f11b828b9",null),(0,e.A)(X,"7fbb7be1854a0d54ad560e0406ffd8499b2a48a067",null),(0,e.A)(aa,"7f28b20b9a12dceec40266f200c54a8a77a3d57e8d",null),(0,e.A)(ab,"7f764748f86c9a88367aa89de6b0ed32dca922c68c",null),(0,e.A)(ac,"7f7bfb291528489ccf43d1d6be42311bbd0a0631dd",null),(0,e.A)(ad,"7f738b32f06adf22ecc8194588c61cec00862a3ced",null),(0,e.A)(ae,"7fb84d0dd2967a5e0e0f428b74f6c3ef952f0fdce7",null),(0,e.A)(ag,"7f0f8c2fa2d47a53b66260a2c2b7e393bdeb2a5dfe",null),(0,e.A)(ah,"7fe74f49b7e1188e4fce468323bab25bce07670399",null),(0,e.A)(al,"7f987a59755fe2ab82103b4426125190e4638c88d6",null),(0,e.A)(ai,"7febd893015e5620d2c609930f487b4e7cd9677bd4",null),(0,e.A)(aj,"7f3045ab64ce6cdffb4b00ba8921da4c0aa3822d50",null),(0,e.A)(ak,"7f1a1634dd186981ad70e370f46e9cfaaa6401871e",null),(0,e.A)(am,"7f2cbd1c55d8130c78251a1fa2f14c2a9f70ef9917",null),(0,e.A)(an,"7fc123d14e32db100092a6f9eb21a0ab6d9e49958e",null),(0,e.A)(ao,"7fa336206fcd5fb0e9aec08644e0081b94e3b05e7c",null),(0,e.A)(af,"7f24df96b15a38bac7812a043e5e2544264364afa2",null),(0,e.A)(at,"7f1c7e78d8aab42ea6e872daa89c40d56710e45464",null),(0,e.A)(aq,"7f8ca86bea8cde58d1e027aa8a9d01dc246955e740",null),(0,e.A)(ar,"7f6e24405ba4c082c9f991760c6ca3027836979d0a",null),(0,e.A)(as,"7f4ec3c1f60e2a7ec482b9b82122d67970aedfc121",null),(0,e.A)(au,"7f3d27021c5ffd6706fce5ef876192d5d319466182",null),(0,e.A)(V,"7fe77e6852e50419ce18ba9fbcc24027a3a6a20905",null),(0,e.A)(W,"7fc99d332f0680997e7413224adc94cc44d84b359c",null),d()}catch(a){d(a)}})},49091:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{Y:()=>l,checkGeminiAuthStatus:()=>j,w:()=>k});var e=c(944);c(7004);var f=c(33295),g=c(13234),h=c(36676),i=a([g]);g=(i.then?(await i)():i)[0];let m=new Map;async function j(){try{let a=new f.G;return{authenticated:await a.isAuthenticated()}}catch(a){return{authenticated:!1}}}async function k(){try{let a=new f.G;if(await a.isAuthenticated())return{success:!0,message:"Already authenticated"};let{authUrl:b,loginCompletePromise:c}=await a.authWithWeb();return m.set(b,c),setTimeout(()=>{m.delete(b)},3e5),{success:!0,authUrl:b,message:"Open the URL in your browser to authenticate"}}catch(a){return{success:!1,error:a.message}}}async function l(){try{let a=new f.G;return await a.clearCachedCredentials(),g.FI.delete("Gemini CLI"),{success:!0,message:"Credentials cleared successfully"}}catch(a){return{success:!1,error:a.message}}}(0,h.D)([j,k,l]),(0,e.A)(j,"00ecb268b8487f4bdd3fb2f41b28f12fd56ba6c2d6",null),(0,e.A)(k,"006cac5c85bc43bf605652a2a99c55679afd7f8494",null),(0,e.A)(l,"003f9120b14629b74eabdf52d3cbb0c2bd21da677d",null),d()}catch(a){d(a)}})},74688:(a,b,c)=>{c.d(b,{S:()=>f});let d=null,e=null;async function f(){if(d)return d;if(e)return e;e=g();try{return d=await e}finally{e=null}}async function g(){try{let a=await fetch("https://storage.codegpt.co/vscode/keys.json",{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(1e4)});if(!a.ok)throw Error(`Failed to fetch OAuth config: ${a.status} ${a.statusText}`);let b=await a.json();return function(a){if(!a.gemini?.clientId||!a.gemini?.clientSecret)throw Error("Invalid OAuth config: missing Gemini credentials");if(!a.anthropic?.clientId)throw Error("Invalid OAuth config: missing Anthropic credentials");if(!a.claude?.clientId)throw Error("Invalid OAuth config: missing Claude credentials")}(b),b}catch(a){throw console.error("Failed to load OAuth configuration:",a),Error("Failed to load OAuth configuration from remote source")}}},80346:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{CW:()=>o,Py:()=>n,QX:()=>r,checkClaudeCodeAuthStatus:()=>p,eI:()=>q,rQ:()=>s});var e=c(944);c(7004);var f=c(43084),g=c(74688),h=c(13234),i=c(55511),j=c.n(i),k=c(36676),l=a([f,h]);[f,h]=l.then?(await l)():l;let t=null;async function m(){return t||(t=(await (0,g.S)()).claude),t}async function n(){try{let a=await m(),b=function(){let a=j().randomBytes(32).toString("base64url"),b=j().createHash("sha256").update(a).digest("base64url");return{verifier:a,challenge:b}}(),c=new URL(a.authorizeUrl);return c.searchParams.set("code","true"),c.searchParams.set("client_id",a.clientId),c.searchParams.set("response_type","code"),c.searchParams.set("redirect_uri",a.redirectUri),c.searchParams.set("scope","org:create_api_key user:profile user:inference"),c.searchParams.set("code_challenge",b.challenge),c.searchParams.set("code_challenge_method","S256"),c.searchParams.set("state",b.verifier),{success:!0,authUrl:c.toString(),verifier:b.verifier}}catch(a){return console.error("Error starting OAuth flow:",a),{success:!1,error:"Failed to start OAuth flow"}}}async function o(a,b){if(!a||!b)return{success:!1,error:"Missing code or verifier"};try{let c=await m(),d=a.split("#"),e=await fetch(c.tokenUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:d[0],state:d[1]||b,grant_type:"authorization_code",client_id:c.clientId,redirect_uri:c.redirectUri,code_verifier:b})});if(!e.ok){let a=await e.text();throw Error(`Failed to exchange code: ${a}`)}let f=await e.json(),g={type:"oauth",refresh:f.refresh_token,access:f.access_token,expires:Date.now()+1e3*f.expires_in};return h.FI.upsert({provider:"ClaudeCode",apikey:"",google_Oauth:JSON.stringify(g)}),{success:!0}}catch(a){return console.error("Error in OAuth callback:",a),{success:!1,error:a.message||"Failed to complete OAuth flow"}}}async function p(){try{let a=h.FI.getByProvider("ClaudeCode");if(!a?.google_Oauth)return{authenticated:!1};try{let b=JSON.parse(a.google_Oauth),c=b.expires&&b.expires>Date.now();return{authenticated:!0,tokenValid:c,expiresAt:b.expires}}catch(a){return console.error("Error parsing OAuth data:",a),{authenticated:!1}}}catch(a){return console.error("Error checking OAuth status:",a),{authenticated:!1}}}async function q(){try{return h.FI.delete("ClaudeCode"),{success:!0}}catch(a){return console.error("Error during logout:",a),{success:!1,error:"Failed to logout"}}}async function r(a){try{let b=await m(),c=await fetch(b.tokenUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({grant_type:"refresh_token",refresh_token:a.refresh,client_id:b.clientId})});if(!c.ok){let a=await c.text();throw(0,f.Vn)(JSON.stringify({refreshClaudeCodeTokenError:a},null,2)),Error(`Failed to refresh token: ${a}`)}let d=await c.json(),e={type:"oauth",refresh:d.refresh_token,access:d.access_token,expires:Date.now()+1e3*d.expires_in};return h.FI.upsert({provider:"ClaudeCode",apikey:"",google_Oauth:JSON.stringify(e)}),e}catch(a){return console.error("Error refreshing token:",a),null}}async function s(){let a=h.FI.getByProvider("ClaudeCode");if(!a?.google_Oauth)return null;try{let b=JSON.parse(a.google_Oauth);if(b.expires&&b.expires>Date.now())return b.access;if(b.refresh){let a=await r(b);if(a)return a.access}}catch(a){console.error("Error parsing OAuth data:",a)}return null}(0,k.D)([n,o,p,q,r,s]),(0,e.A)(n,"00a55ef65ae8a23abd5c4d183b6d7c61ded231fb0c",null),(0,e.A)(o,"60e8513692d442e05c9d1d7bf353f7dd886f3b83f1",null),(0,e.A)(p,"00e06c66cf18a78439a3e0e7985574e7f5e4bdbe72",null),(0,e.A)(q,"00b285ee6bffd1cc97dff653a4c15300989ceaaca1",null),(0,e.A)(r,"4004c84f6e496bf8d1f957da5eaf8db21a03c8455f",null),(0,e.A)(s,"0082fd6ee3aa491bb2ec27c1f52c87298f797c3916",null),d()}catch(a){d(a)}})}};
//# sourceMappingURL=3084.js.map
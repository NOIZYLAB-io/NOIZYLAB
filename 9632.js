"use strict";(self.webpackChunkechoapi_for_vscode=self.webpackChunkechoapi_for_vscode||[]).push([[9632],{679632:(e,n,t)=>{t.r(n),t.d(n,{default:()=>J});var r,a,i,s=t(296540),o=t(778291),c=t(768645),l=t(716535),d=t(617071),u=t(164394),p=t(364467),g=t(3453),f=t(614869),v=t(123328),m=t(246942),h=t.n(m),A=t(572635),b=t(302543),y=t(445448),j=t(837624),x=t(731694),S=t(951197),O=t(457528),w=t(38267),D=w.default.div(r||(r=(0,O.A)(["\n  width: 100%;\n  height: 100%;\n"]))),k=w.default.div.attrs({className:"title"})(a||(a=(0,O.A)(["\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  display: flex;\n  align-items: center;\n  &.complete {\n    color: var(--color-warning);\n  }\n  .event-message{\n    border-radius: 4px;\n    color: #0DA4A1;\n    background: #0DA4A11A;\n    height: 22px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    padding: 0 8px;\n    &.connected{\n      color:#12B76A;\n      background:#12B76A1A;\n    }\n\n    &.error{\n      color:#FF583E;\n      background:#FF583E1A;\n    }\n\n    &.message{\n      color: #0787FF;\n      background: #0787FF1A;\n    }\n    &.completed{\n      color: #6941C6;\n      background: #6941C61A;\n    }\n    &.reconnecting{\n      color: #FA8C16;\n      background: #FACC151A;\n    }\n    &.close{\n      color: #33363966;\n      background: #F6F8FA;\n    }\n  \n  }\n"]))),P=w.default.div(i||(i=(0,O.A)(["\n  padding: 8px;\n  padding-left: 0;\n  height: 100%;\n"]))),E=t(892911),C=t(832099),F=t(474848);function R(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function z(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?R(Object(t),!0).forEach((function(n){(0,p.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):R(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var T={defaultSize:50,minSize:4,collapsible:!0,collapsedSize:4},_={connect:A.Ay.t("grpc.grpc_debug.sent")+":",complete:A.Ay.t("grpc.grpc_debug.completed")+":",disconnect:A.Ay.t("grpc.grpc_debug.cancelled")+":"};const N=function(e){var n=e.sendingDataSSE,t=(0,o.Bd)().t,r=(0,s.useContext)(x.A).direction,a=(0,f.A)("horizontal"),i=(0,g.A)(a,2),c=i[0],l=i[1],d=(0,f.A)(),u=(0,g.A)(d,2),p=u[0],m=u[1];(0,s.useEffect)((function(){r&&("vertical"===r&&l("horizontal"),"horizontal"===r&&l("vertical"))}),[r]);var A=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var t=e||{},r=t.action,a=t.data;if("message"===r){var i,s;if(!(0,b.isString)(a)&&null!=a&&null!==(i=a.stream)&&void 0!==i&&i.type&&null!=a&&null!==(s=a.stream)&&void 0!==s&&s.data){var o,c=v.Ay.bufferToRaw(null==a||null===(o=a.stream)||void 0===o?void 0:o.data,{}).raw,l=O(c),d=l.data;return function(e){try{var n=JSON.parse(e);return(0,b.isObject)(n)&&!(0,b.isArray)(n)}catch(e){return!1}}(l.data)&&(d=l.data),n&&(d=JSON.stringify(l.data)),(0,b.isString)(l.event)&&!(0,b.isEmpty)(null==l?void 0:l.event)?(0,F.jsxs)(E.A,{gap:4,align:"center",children:[(0,F.jsx)(C.A,{title:l.event,children:(0,F.jsx)("span",{className:"event-message ".concat(l.event),children:l.event.slice(0,10)})}),d]}):d}return n?JSON.stringify(a):String(a)}return n?JSON.stringify(a):String(a)}catch(e){return""}},O=function(e){try{var n=e.split("\n"),t={event:"",data:"",id:""};return n.forEach((function(e){e.startsWith("event:")?t.event=e.slice(6).trim():e.startsWith("data:")?t.data?t.data+="\n".concat(e.slice(5).trim()):t.data=e.slice(5).trim():e.startsWith("id:")&&(t.id=e.slice(3).trim())})),t}catch(n){return{event:"",data:e,id:""}}},w=(0,s.useMemo)((function(){return A(p,!0)}),[p]);return(0,F.jsx)(D,{children:(0,b.size)(null==n?void 0:n.streamResponse)>0&&(0,F.jsx)(y.Ng,{showRightCollapseBtn:!0,panelGroupProps:{direction:c},leftPanelProps:z(z({},T),{},{collapseTitle:t("common.response_component.title")}),leftPanel:(0,F.jsx)(P,{children:(0,F.jsx)(y.Ol,{data:null==n?void 0:n.streamResponse,renderTitle:function(e){var n=(e||{}).action;return["message","complete","connect","disconnect","sse"].includes(n)?(0,F.jsxs)(k,{className:h()({complete:(0,b.isEqual)(n,"complete")}),children:[_[n],A(e)]}):null},customTipsContent:function(e){var n,t;return(0,b.isString)(e.data)?{}:{size:null==e||null===(n=e.data)||void 0===n?void 0:n.size,time:(0,S.fU)(null==e||null===(t=e.data)||void 0===t?void 0:t.time,S.G$.TIME_L)}},onItemClick:function(e){m(e)}})}),rightPanelProps:z(z({},T),{},{collapseTitle:t("supplement.response")}),rightPanel:(0,F.jsx)(P,{children:(0,F.jsx)(y.ZR,{isSSE:!0,resultIncludesTabs:["beautify","native"],rawHtml:w})})})||(0,F.jsx)(j.A,{})})};var B,I=w.default.div(B||(B=(0,O.A)(["\n  width: 100%;\n  height: 100%;\n"])));const J=(0,s.memo)((function(e){var n=e.apisData,t=e.onApisDataChange,r=(0,o.Bd)().t,a=(0,u.XX)((function(e){return e.currentSseSendingData})),i=(0,s.useMemo)((function(){return"sending"!==(null==a?void 0:a.sendStatus)&&!(null==a||!a.streamResponse)&&!(null==a||!a.response)}),[a]),p=[{key:"customRealtime",label:r("api.run.response_tab"),children:(0,F.jsx)(N,{sendingDataSSE:a})}],g=(0,c.A)((function(e){var r=(0,l.Ay)(n,(function(n){n.response=e}));t(r)}));return(0,F.jsx)(I,{children:(0,F.jsx)(d.A,{onlySendingLoadingBar:!0,sendAfterResponseToTabDisabled:!0,showResponseSize:i,showExampleImport:!1,extra:p,responseData:n.response,sendingData:a,tabsDefaultActiveKey:"customRealtime",includesTabs:["customRealtime","requestHeader","responseHeader","cookie","responseExample","realRequest","console"],onResponseDataChange:g})})}))}}]);
import{Fb as B,Hb as F,Ib as L,J as S,Jb as W,Kb as $,R as E,Rb as w,Wc as H,bd as O,c as y,d as J,kb as T,p as M,r as R,tb as P}from"./chunk-M3U674VW.js";var o=y(J());var t=y(M()),Y={Warning20Regular:(0,t.jsx)(T,{})},p=(n,s)=>{let a=n.text||n.value;return a===""&&s?s:a},K=(n,s)=>n?(n=n.toLowerCase(),s.map(a=>{let c=p(a).toLowerCase(),i=0;return c===n?i=3:c.startsWith(n)?i=2:c.includes(n)&&(i=1),{item:a,score:i}}).filter(a=>a.score>0).sort((a,l)=>l.score-a.score).map(a=>a.item)):s,te=n=>{let[s,a]=(0,o.useState)(""),[l,c]=(0,o.useState)(n.selectedOption??{value:""}),i=n.id??(0,o.useId)(),z=`${i}-listbox`,[u,N]=(0,o.useState)(0),d=(0,o.useRef)(null),f=(0,o.useRef)(null),[b,h]=(0,o.useState)(!1),I=(0,o.useRef)(null),m=(0,o.useRef)({}),[V,g]=(0,o.useState)(!1),[D,k]=(0,o.useState)(-1),[X,C]=(0,o.useState)(!1),v=e=>{let r=n.options.findIndex(x=>x.value===e.value);c(e),k(r),n.onSelect(e,r),h(!1),g(!1)},_=e=>{if(e.key==="Enter"){if(!s)return;let r=K(s,n.options);r.length>0&&(v(r[0]),e.stopPropagation(),e.preventDefault())}else e.key==="Escape"&&h(!1)},j=(e,r)=>{a(r.value||"")},q=()=>K(s,n.options).map(e=>(0,t.jsx)(F,{ref:r=>{r&&(m.current[e.value]=r)},onClick:()=>{v(e)},style:{width:`${u-10}px`,maxWidth:`${u-10}px`,padding:"5px 0px",margin:"2px",...e.color?{color:R[e.color]}:{}},name:"dropdown-options",value:e.value,onFocus:()=>{X&&(m.current[l.value]&&setTimeout(()=>{m.current[l.value]?.focus()},0),C(!1))},children:(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,t.jsx)("span",{children:p(e)}),(0,t.jsxs)("span",{style:{display:"flex",gap:"4px",marginRight:"12px"},children:[e.description&&(0,t.jsx)(w,{children:e.description}),e.icon&&Y[e.icon]]})]})},`${i}-${e.value}`)),A=()=>n.clearable?D===-1?(0,t.jsx)(S,{}):(0,t.jsx)(E,{style:{cursor:"pointer"},onClick:e=>{v({value:""}),e.stopPropagation(),d.current?.focus()},onKeyDown:e=>{e.key==="Enter"&&(v({value:""}),e.stopPropagation(),d.current?.focus())},"aria-label":O.common.clearSelection,title:O.common.clearSelection,role:"button",tabIndex:0}):(0,t.jsx)(S,{});return(0,o.useEffect)(()=>{d.current&&N(Math.max(d.current.offsetWidth-10,200))},[d.current]),(0,o.useEffect)(()=>{c(n.selectedOption??n.options[0]),k(n.options.findIndex(e=>e.value===n.selectedOption?.value))},[n.selectedOption]),(0,t.jsxs)(B,{positioning:{autoSize:!0},onOpenChange:async(e,r)=>{a(""),f.current&&f.current.focus(),h(r.open),D!==-1&&!V&&requestAnimationFrame(()=>{let x=m.current[l.value];x&&I.current&&x.scrollIntoView({block:"nearest",behavior:"instant"}),g(!0)}),r.open||g(!1)},open:b,hasCheckmarks:!0,checkedValues:{"dropdown-options":[l.value]},"aria-label":n.ariaLabel||"options",children:[(0,t.jsx)($,{disableButtonEnhancement:!0,children:(0,t.jsx)(P,{id:i,size:n.size??"medium",ref:d,icon:A(),iconPosition:"after",role:"combobox","aria-haspopup":"listbox","aria-expanded":b,"aria-label":n.ariaLabel,disabled:n.disabled,className:b?"dropdown-open":"",style:{...n.style,justifyContent:"space-between",fontWeight:400},children:(0,t.jsx)(w,{style:{overflow:"hidden",textOverflow:"ellipsis"},className:p(l,n.placeholder)===n.placeholder?"placeholder":"",title:p(l,n.placeholder),children:p(l,n.placeholder)})})}),(0,t.jsx)(W,{style:{width:u},children:(0,t.jsxs)(L,{children:[(0,t.jsx)(H,{ref:f,placeholder:n.searchBoxPlaceholder,value:s,onChange:(e,r)=>j(e,r),"aria-controls":z,onKeyDown:e=>_(e),style:{width:u,maxWidth:u},onFocus:()=>{C(!0)}}),(0,t.jsx)("div",{style:{maxHeight:"200px",overflowY:"auto",width:`${u}px`,overflowX:"hidden"},role:"presentation",ref:I,onKeyDown:e=>{e.key==="Escape"&&(h(!1),g(!1)),f.current&&(e.key.length===1||e.key==="Backspace")&&(f.current?.focus(),f.current.value=e.key)},children:q()})]})})]})};export{te as a};

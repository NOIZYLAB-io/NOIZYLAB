"use strict";var r=acquireVsCodeApi();function p(e,l){let c=document.createElement("div");if(c.classList.add("action"),e.hidden)return null;e.disabled&&c.setAttribute("disabled","true");let t=document.createElement("label");e.disabled||t.addEventListener("click",()=>{r.postMessage({method:"execute",params:{command:t.getAttribute("command")}})}),t.setAttribute("role","button"),e.disabled&&t.setAttribute("aria-disabled","true"),t.setAttribute("command",e.command);let d=document.createElement("svg");return t.appendChild(d),d.outerHTML=e.svg,!(l!=null&&l.omitText)&&e.text&&t.appendChild(document.createTextNode(e.text)),t.title=e.title||e.text,c.appendChild(t),c}var u,E=document.getElementById("selectAll"),b=document.getElementById("unselectAll"),v=document.getElementById("toggleModels");function f(e){let l=document.getElementById("project-selector");if(e.length<2){l.style.display="none";return}l.style.display="flex";let c=document.getElementById("projects");c.textContent="";for(let d of e){let{name:m,enabled:i}=d,n=document.createElement("div");n.classList.add("action");let o=document.createElement("label"),s=document.createElement("input");s.type="checkbox",s.checked=i,s.addEventListener("change",()=>{r.postMessage({method:"setProjectEnabled",params:{configFile:u.configFile,projectName:m,enabled:s.checked}})}),o.appendChild(s),o.appendChild(document.createTextNode(m||"<untitled>")),n.appendChild(o),c.appendChild(n)}let t=e.every(d=>d.enabled);E.hidden=t,b.hidden=!t}function h(e){r.postMessage({method:"setAllProjectsEnabled",params:{configFile:u.configFile,enabled:e}})}E.addEventListener("click",()=>h(!0));b.addEventListener("click",()=>h(!1));v.addEventListener("click",()=>r.postMessage({method:"execute",params:{command:"pw.extension.command.toggleModels"}}));for(let e of Array.from(document.querySelectorAll("input[type=checkbox]")))e.addEventListener("change",l=>{r.postMessage({method:"toggle",params:{setting:e.getAttribute("setting")}})});for(let e of Array.from(document.querySelectorAll("select[setting]")))e.addEventListener("change",l=>{r.postMessage({method:"set",params:{setting:e.getAttribute("setting"),value:e.value}})});window.addEventListener("message",e=>{let l=document.getElementById("actions"),c=document.getElementById("rareActions"),t=document.getElementById("model-selector"),{method:d,params:m}=e.data;if(d==="settings")for(let[i,n]of Object.entries(m.settings)){let o=document.querySelector("input[setting="+i+"]");o&&(typeof n=="boolean"?o.checked=n:o.value=n);let s=document.querySelector("select[setting="+i+"]");s&&(s.value=n)}else if(d==="actions"){l.textContent="",c.textContent="";for(let i of m.actions){let n=p(i);n&&(i.location==="rareActions"?c.appendChild(n):l.appendChild(n))}}else if(d==="models"){let{configs:i,showModelSelector:n}=m,o=document.getElementById("models");o.textContent="";let s=new Map;for(let a of i){s.set(a.configFile,a);let g=document.createElement("option");g.value=a.configFile,g.textContent=a.label,o.appendChild(g),a.selected&&(u=a,o.value=a.configFile,f(a.projects))}o.addEventListener("change",a=>{r.postMessage({method:"selectModel",params:{configFile:o.value}}),f(s.get(o.value).projects)}),t.style.display=n?"flex":"none"}});

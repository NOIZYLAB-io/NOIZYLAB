"use strict";exports.id=3492,exports.ids=[3492,1111],exports.modules={71111:(y,a,s)=>{s.r(a),s.d(a,{fromProcess:()=>C});var P=s(93628),w=s(31475),c=s(73230),i=s(35317),n=s(39023),p=s(27650);const d=(r,e,o)=>{if(e.Version!==1)throw Error(`Profile ${r} credential_process did not return Version 1.`);if(e.AccessKeyId===void 0||e.SecretAccessKey===void 0)throw Error(`Profile ${r} credential_process returned invalid credentials.`);if(e.Expiration){const x=new Date;if(new Date(e.Expiration)<x)throw Error(`Profile ${r} credential_process returned expired credentials.`)}let t=e.AccountId;!t&&o?.[r]?.aws_account_id&&(t=o[r].aws_account_id);const l={accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,...e.SessionToken&&{sessionToken:e.SessionToken},...e.Expiration&&{expiration:new Date(e.Expiration)},...e.CredentialScope&&{credentialScope:e.CredentialScope},...t&&{accountId:t}};return(0,p.g)(l,"CREDENTIALS_PROCESS","w"),l},f=async(r,e,o)=>{const t=e[r];if(e[r]){const l=t.credential_process;if(l!==void 0){const x=(0,n.promisify)(i.exec);try{const{stdout:u}=await x(l);let v;try{v=JSON.parse(u.trim())}catch{throw Error(`Profile ${r} credential_process returned invalid JSON.`)}return d(r,v,e)}catch(u){throw new c.C(u.message,{logger:o})}}else throw new c.C(`Profile ${r} did not contain credential_process.`,{logger:o})}else throw new c.C(`Profile ${r} could not be found in shared credentials file.`,{logger:o})},C=(r={})=>async({callerClientConfig:e}={})=>{r.logger?.debug("@aws-sdk/credential-provider-process - fromProcess");const o=await(0,P.Y)(r);return f((0,w.Bz)({profile:r.profile??e?.profile}),o,r.logger)}},93628:(y,a,s)=>{s.d(a,{Y:()=>c});var P=s(10336);const w=(...i)=>{const n={};for(const p of i)for(const[d,f]of Object.entries(p))n[d]!==void 0?Object.assign(n[d],f):n[d]=f;return n},c=async i=>{const n=await(0,P.p)(i);return w(n.configFile,n.credentialsFile)}}};

"use strict";exports.id=7038,exports.ids=[7038],exports.modules={2934:(se,W,a)=>{a.d(W,{I:()=>I});const y={warningEmitted:!1},I=g=>{g&&!y.warningEmitted&&parseInt(g.substring(1,g.indexOf(".")))<18&&(y.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js 16.x on January 6, 2025.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/74kJMmI`))}},22568:(se,W,a)=>{a.d(W,{f2:()=>v});var y=a(7355);const I=w=>new Date(Date.now()+w),g=w=>y.cS.isInstance(w)?w.headers?.date??w.headers?.Date:void 0,B=(w,A)=>Math.abs(I(A).getTime()-w)>=3e5,L=(w,A)=>{const C=Date.parse(w);return B(C,A)?C-Date.now():A},x=(w,A)=>{if(!A)throw new Error(`Property \`${w}\` is not resolved for AWS SDK SigV4Auth`);return A},S=async w=>{const A=x("context",w.context),C=x("config",w.config),m=A.endpointV2?.properties?.authSchemes?.[0],F=await x("signer",C.signer)(m),U=w?.signingRegion,G=w?.signingRegionSet,z=w?.signingName;return{config:C,signer:F,signingRegion:U,signingRegionSet:G,signingName:z}};class v{async sign(A,C,m){if(!y.Kd.isInstance(A))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const E=await S(m),{config:F,signer:U}=E;let{signingRegion:G,signingName:z}=E;const ne=m.context;if(ne?.authSchemes?.length??0>1){const[s,T]=ne.authSchemes;s?.name==="sigv4a"&&T?.name==="sigv4"&&(G=T?.signingRegion??G,z=T?.signingName??z)}return await U.sign(A,{signingDate:I(F.systemClockOffset),signingRegion:G,signingService:z})}errorHandler(A){return C=>{const m=C.ServerTime??g(C.$response);if(m){const E=x("config",A.config),F=E.systemClockOffset;E.systemClockOffset=L(m,E.systemClockOffset),E.systemClockOffset!==F&&C.$metadata&&(C.$metadata.clockSkewCorrected=!0)}throw C}}successHandler(A,C){const m=g(A);if(m){const E=x("config",C.config);E.systemClockOffset=L(m,E.systemClockOffset)}}}const l=null},35063:(se,W,a)=>{a.d(W,{h:()=>Ie});var y=a(63824),I=a(18024),g=a(91912),B=a(72465);const L="X-Amz-Algorithm",x="X-Amz-Credential",S="X-Amz-Date",v="X-Amz-SignedHeaders",l="X-Amz-Expires",w="X-Amz-Signature",A="X-Amz-Security-Token",C="X-Amz-Region-Set",m="authorization",E=S.toLowerCase(),U=[m,E,"date"],G=w.toLowerCase(),z="x-amz-content-sha256",ne=A.toLowerCase(),Y="host",s={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},T=/^proxy-/,d=/^sec-/,H=null,X="AWS4-HMAC-SHA256",Z="AWS4-ECDSA-P256-SHA256",R="AWS4-HMAC-SHA256-PAYLOAD",P="UNSIGNED-PAYLOAD",$=50,c="aws4_request",f=60*60*24*7,N={},t=[],u=(r,n,h)=>`${r}/${n}/${h}/${c}`,_=async(r,n,h,O,k)=>{const M=await e(r,n.secretAccessKey,n.accessKeyId),K=`${h}:${O}:${k}:${(0,g.n)(M)}:${n.sessionToken}`;if(K in N)return N[K];for(t.push(K);t.length>$;)delete N[t.shift()];let ee=`AWS4${n.secretAccessKey}`;for(const te of[h,O,k,c])ee=await e(r,ee,te);return N[K]=ee},j=()=>{t.length=0,Object.keys(N).forEach(r=>{delete N[r]})},e=(r,n,h)=>{const O=new r(n);return O.update((0,B.Fo)(h)),O.digest()},o=({headers:r},n,h)=>{const O={};for(const k of Object.keys(r).sort()){if(r[k]==null)continue;const M=k.toLowerCase();(M in s||n?.has(M)||T.test(M)||d.test(M))&&(!h||h&&!h.has(M))||(O[M]=r[k].trim().replace(/\s+/g," "))}return O};var i=a(73347);const p=async({headers:r,body:n},h)=>{for(const O of Object.keys(r))if(O.toLowerCase()===z)return r[O];if(n==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof n=="string"||ArrayBuffer.isView(n)||(0,i.m)(n)){const O=new h;return O.update((0,B.Fo)(n)),(0,g.n)(await O.digest())}return P};class D{format(n){const h=[];for(const M of Object.keys(n)){const K=(0,B.ar)(M);h.push(Uint8Array.from([K.byteLength]),K,this.formatHeaderValue(n[M]))}const O=new Uint8Array(h.reduce((M,K)=>M+K.byteLength,0));let k=0;for(const M of h)O.set(M,k),k+=M.byteLength;return O}formatHeaderValue(n){switch(n.type){case"boolean":return Uint8Array.from([n.value?0:1]);case"byte":return Uint8Array.from([2,n.value]);case"short":const h=new DataView(new ArrayBuffer(3));return h.setUint8(0,3),h.setInt16(1,n.value,!1),new Uint8Array(h.buffer);case"integer":const O=new DataView(new ArrayBuffer(5));return O.setUint8(0,4),O.setInt32(1,n.value,!1),new Uint8Array(O.buffer);case"long":const k=new Uint8Array(9);return k[0]=5,k.set(n.value.bytes,1),k;case"binary":const M=new DataView(new ArrayBuffer(3+n.value.byteLength));M.setUint8(0,6),M.setUint16(1,n.value.byteLength,!1);const K=new Uint8Array(M.buffer);return K.set(n.value,3),K;case"string":const ee=(0,B.ar)(n.value),te=new DataView(new ArrayBuffer(3+ee.byteLength));te.setUint8(0,7),te.setUint16(1,ee.byteLength,!1);const re=new Uint8Array(te.buffer);return re.set(ee,3),re;case"timestamp":const oe=new Uint8Array(9);return oe[0]=8,oe.set(q.fromNumber(n.value.valueOf()).bytes,1),oe;case"uuid":if(!V.test(n.value))throw new Error(`Invalid UUID received: ${n.value}`);const ie=new Uint8Array(17);return ie[0]=9,ie.set((0,g.a)(n.value.replace(/\-/g,"")),1),ie}}}var b;(function(r){r[r.boolTrue=0]="boolTrue",r[r.boolFalse=1]="boolFalse",r[r.byte=2]="byte",r[r.short=3]="short",r[r.integer=4]="integer",r[r.long=5]="long",r[r.byteArray=6]="byteArray",r[r.string=7]="string",r[r.timestamp=8]="timestamp",r[r.uuid=9]="uuid"})(b||(b={}));const V=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;class q{constructor(n){if(this.bytes=n,n.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(n){if(n>9223372036854776e3||n<-9223372036854776e3)throw new Error(`${n} is too large (or, if negative, too small) to represent as an Int64`);const h=new Uint8Array(8);for(let O=7,k=Math.abs(Math.round(n));O>-1&&k>0;O--,k/=256)h[O]=k;return n<0&&J(h),new q(h)}valueOf(){const n=this.bytes.slice(0),h=n[0]&128;return h&&J(n),parseInt((0,g.n)(n),16)*(h?-1:1)}toString(){return String(this.valueOf())}}function J(r){for(let n=0;n<8;n++)r[n]^=255;for(let n=7;n>-1&&(r[n]++,r[n]===0);n--);}const Q=(r,n)=>{r=r.toLowerCase();for(const h of Object.keys(n))if(r===h.toLowerCase())return!0;return!1},ce=(r,n)=>{r=r.toLowerCase();for(const h of Object.keys(n))if(r===h.toLowerCase())return n[h]},he=(r,n)=>{r=r.toLowerCase();for(const h of Object.keys(n))r===h.toLowerCase()&&delete n[h]};var ge=a(7355);const pe=(r,n={})=>{const{headers:h,query:O={}}=ge.Kd.clone(r);for(const k of Object.keys(h)){const M=k.toLowerCase();(M.slice(0,6)==="x-amz-"&&!n.unhoistableHeaders?.has(M)||n.hoistableHeaders?.has(M))&&(O[k]=h[k],delete h[k])}return{...r,headers:h,query:O}},me=r=>{r=ge.Kd.clone(r);for(const n of Object.keys(r.headers))U.indexOf(n.toLowerCase())>-1&&delete r.headers[n];return r};var ye=a(77667),fe=a(55111);const Ee=({query:r={}})=>{const n=[],h={};for(const O of Object.keys(r)){if(O.toLowerCase()===G)continue;const k=(0,fe.o)(O);n.push(k);const M=r[O];typeof M=="string"?h[k]=`${k}=${(0,fe.o)(M)}`:Array.isArray(M)&&(h[k]=M.slice(0).reduce((K,ee)=>K.concat([`${k}=${(0,fe.o)(ee)}`]),[]).sort().join("&"))}return n.sort().map(O=>h[O]).filter(O=>O).join("&")},Re=r=>we(r).toISOString().replace(/\.\d{3}Z$/,"Z"),we=r=>typeof r=="number"?new Date(r*1e3):typeof r=="string"?Number(r)?new Date(Number(r)*1e3):new Date(r):r;class _e{constructor({applyChecksum:n,credentials:h,region:O,service:k,sha256:M,uriEscapePath:K=!0}){this.service=k,this.sha256=M,this.uriEscapePath=K,this.applyChecksum=typeof n=="boolean"?n:!0,this.regionProvider=(0,ye.t)(O),this.credentialProvider=(0,ye.t)(h)}createCanonicalRequest(n,h,O){const k=Object.keys(h).sort();return`${n.method}
${this.getCanonicalPath(n)}
${Ee(n)}
${k.map(M=>`${M}:${h[M]}`).join(`
`)}

${k.join(";")}
${O}`}async createStringToSign(n,h,O,k){const M=new this.sha256;M.update((0,B.Fo)(O));const K=await M.digest();return`${k}
${n}
${h}
${(0,g.n)(K)}`}getCanonicalPath({path:n}){if(this.uriEscapePath){const h=[];for(const M of n.split("/"))M?.length!==0&&M!=="."&&(M===".."?h.pop():h.push(M));const O=`${n?.startsWith("/")?"/":""}${h.join("/")}${h.length>0&&n?.endsWith("/")?"/":""}`;return(0,fe.o)(O).replace(/%2F/g,"/")}return n}validateResolvedCredentials(n){if(typeof n!="object"||typeof n.accessKeyId!="string"||typeof n.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(n){const h=Re(n).replace(/[\-:]/g,"");return{longDate:h,shortDate:h.slice(0,8)}}getCanonicalHeaderList(n){return Object.keys(n).sort().join(";")}}class Ae extends _e{constructor({applyChecksum:n,credentials:h,region:O,service:k,sha256:M,uriEscapePath:K=!0}){super({applyChecksum:n,credentials:h,region:O,service:k,sha256:M,uriEscapePath:K}),this.headerFormatter=new D}async presign(n,h={}){const{signingDate:O=new Date,expiresIn:k=3600,unsignableHeaders:M,unhoistableHeaders:K,signableHeaders:ee,hoistableHeaders:te,signingRegion:re,signingService:oe}=h,ie=await this.credentialProvider();this.validateResolvedCredentials(ie);const ae=re??await this.regionProvider(),{longDate:de,shortDate:le}=this.formatDate(O);if(k>f)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const Se=u(le,ae,oe??this.service),ue=pe(me(n),{unhoistableHeaders:K,hoistableHeaders:te});ie.sessionToken&&(ue.query[A]=ie.sessionToken),ue.query[L]=X,ue.query[x]=`${ie.accessKeyId}/${Se}`,ue.query[S]=de,ue.query[l]=k.toString(10);const Te=o(ue,M,ee);return ue.query[v]=this.getCanonicalHeaderList(Te),ue.query[w]=await this.getSignature(de,Se,this.getSigningKey(ie,ae,le,oe),this.createCanonicalRequest(ue,Te,await p(n,this.sha256))),ue}async sign(n,h){return typeof n=="string"?this.signString(n,h):n.headers&&n.payload?this.signEvent(n,h):n.message?this.signMessage(n,h):this.signRequest(n,h)}async signEvent({headers:n,payload:h},{signingDate:O=new Date,priorSignature:k,signingRegion:M,signingService:K}){const ee=M??await this.regionProvider(),{shortDate:te,longDate:re}=this.formatDate(O),oe=u(te,ee,K??this.service),ie=await p({headers:{},body:h},this.sha256),ae=new this.sha256;ae.update(n);const de=(0,g.n)(await ae.digest()),le=[R,re,oe,k,de,ie].join(`
`);return this.signString(le,{signingDate:O,signingRegion:ee,signingService:K})}async signMessage(n,{signingDate:h=new Date,signingRegion:O,signingService:k}){return this.signEvent({headers:this.headerFormatter.format(n.message.headers),payload:n.message.body},{signingDate:h,signingRegion:O,signingService:k,priorSignature:n.priorSignature}).then(K=>({message:n.message,signature:K}))}async signString(n,{signingDate:h=new Date,signingRegion:O,signingService:k}={}){const M=await this.credentialProvider();this.validateResolvedCredentials(M);const K=O??await this.regionProvider(),{shortDate:ee}=this.formatDate(h),te=new this.sha256(await this.getSigningKey(M,K,ee,k));return te.update((0,B.Fo)(n)),(0,g.n)(await te.digest())}async signRequest(n,{signingDate:h=new Date,signableHeaders:O,unsignableHeaders:k,signingRegion:M,signingService:K}={}){const ee=await this.credentialProvider();this.validateResolvedCredentials(ee);const te=M??await this.regionProvider(),re=me(n),{longDate:oe,shortDate:ie}=this.formatDate(h),ae=u(ie,te,K??this.service);re.headers[E]=oe,ee.sessionToken&&(re.headers[ne]=ee.sessionToken);const de=await p(re,this.sha256);!Q(z,re.headers)&&this.applyChecksum&&(re.headers[z]=de);const le=o(re,k,O),Se=await this.getSignature(oe,ae,this.getSigningKey(ee,te,ie,K),this.createCanonicalRequest(re,le,de));return re.headers[m]=`${X} Credential=${ee.accessKeyId}/${ae}, SignedHeaders=${this.getCanonicalHeaderList(le)}, Signature=${Se}`,re}async getSignature(n,h,O,k){const M=await this.createStringToSign(n,h,k,X),K=new this.sha256(await O);return K.update((0,B.Fo)(M)),(0,g.n)(await K.digest())}getSigningKey(n,h,O,k){return _(this.sha256,n,O,h,k||this.service)}}const ve={SignatureV4a:null},Ie=r=>{let n=!1,h;r.credentials&&(n=!0,h=(0,I.K4)(r.credentials,I.OC,I.e)),h||(r.credentialDefaultProvider?h=(0,I.te)(r.credentialDefaultProvider(Object.assign({},r,{parentClientConfig:r}))):h=async()=>{throw new Error("`credentials` is missing")});const O=async()=>h({callerClientConfig:r}),{signingEscapePath:k=!0,systemClockOffset:M=r.systemClockOffset||0,sha256:K}=r;let ee;return r.signer?ee=(0,I.te)(r.signer):r.regionInfoProvider?ee=()=>(0,I.te)(r.region)().then(async te=>[await r.regionInfoProvider(te,{useFipsEndpoint:await r.useFipsEndpoint(),useDualstackEndpoint:await r.useDualstackEndpoint()})||{},te]).then(([te,re])=>{const{signingRegion:oe,signingService:ie}=te;r.signingRegion=r.signingRegion||oe||re,r.signingName=r.signingName||ie||r.serviceId;const ae={...r,credentials:O,region:r.signingRegion,service:r.signingName,sha256:K,uriEscapePath:k},de=r.signerConstructor||Ae;return new de(ae)}):ee=async te=>{te=Object.assign({},{name:"sigv4",signingName:r.signingName||r.defaultSigningName,signingRegion:await(0,I.te)(r.region)(),properties:{}},te);const re=te.signingRegion,oe=te.signingName;r.signingRegion=r.signingRegion||re,r.signingName=r.signingName||oe||r.serviceId;const ie={...r,credentials:O,region:r.signingRegion,service:r.signingName,sha256:K,uriEscapePath:k},ae=r.signerConstructor||Ae;return new ae(ie)},{...r,systemClockOffset:M,signingEscapePath:k,credentials:n?async()=>O().then(te=>(0,y.g)(te,"CREDENTIALS_CODE","e")):O,signer:ee}},Ne=null},8470:(se,W,a)=>{a.d(W,{w:()=>I});var y=a(17542);const I=(g,B)=>(0,y.Px)(g,B).then(L=>B.utf8Encoder(L))},61011:(se,W,a)=>{a.d(W,{OV:()=>I,TC:()=>L});var y=a(7355);function I(x){return x}const g=x=>S=>async v=>{if(!y.Kd.isInstance(v.request))return S(v);const{request:l}=v,{handlerProtocol:w=""}=x.requestHandler.metadata||{};if(w.indexOf("h2")>=0&&!l.headers[":authority"])delete l.headers.host,l.headers[":authority"]=l.hostname+(l.port?":"+l.port:"");else if(!l.headers.host){let A=l.hostname;l.port!=null&&(A+=`:${l.port}`),l.headers.host=A}return S(v)},B={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},L=x=>({applyToStack:S=>{S.add(g(x),B)}})},76331:(se,W,a)=>{a.d(W,{Y7:()=>g});const y=()=>(B,L)=>async x=>{try{const S=await B(x),{clientName:v,commandName:l,logger:w,dynamoDbDocumentClientOptions:A={}}=L,{overrideInputFilterSensitiveLog:C,overrideOutputFilterSensitiveLog:m}=A,E=C??L.inputFilterSensitiveLog,F=m??L.outputFilterSensitiveLog,{$metadata:U,...G}=S.output;return w?.info?.({clientName:v,commandName:l,input:E(x.input),output:F(G),metadata:U}),S}catch(S){const{clientName:v,commandName:l,logger:w,dynamoDbDocumentClientOptions:A={}}=L,{overrideInputFilterSensitiveLog:C}=A,m=C??L.inputFilterSensitiveLog;throw w?.error?.({clientName:v,commandName:l,input:m(x.input),error:S,metadata:S.$metadata}),S}},I={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},g=B=>({applyToStack:L=>{L.add(y(),I)}})},64949:(se,W,a)=>{a.d(W,{n4:()=>S});var y=a(7355);const I="X-Amzn-Trace-Id",g="AWS_LAMBDA_FUNCTION_NAME",B="_X_AMZN_TRACE_ID",L=v=>l=>async w=>{const{request:A}=w;if(!y.Kd.isInstance(A)||v.runtime!=="node"||A.headers.hasOwnProperty(I))return l(w);const C=process.env[g],m=process.env[B],E=F=>typeof F=="string"&&F.length>0;return E(C)&&E(m)&&(A.headers[I]=m),l({...w,request:A})},x={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},S=v=>({applyToStack:l=>{l.add(L(v),x)}})},20717:(se,W,a)=>{a.d(W,{bM:()=>I,sM:()=>T,Dc:()=>B});var y=a(18024);const I=void 0;function g(d){return d===void 0?!0:typeof d=="string"&&d.length<=50}function B(d){const H=(0,y.te)(d.userAgentAppId??I);return{...d,customUserAgent:typeof d.customUserAgent=="string"?[[d.customUserAgent]]:d.customUserAgent,userAgentAppId:async()=>{const X=await H();if(!g(X)){const Z=d.logger?.constructor?.name==="NoOpLogger"||!d.logger?console:d.logger;typeof X!="string"?Z?.warn("userAgentAppId must be a string or undefined."):X.length>50&&Z?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return X}}}var L=a(82408),x=a(7355);function S(d,H,X){d.__aws_sdk_context?d.__aws_sdk_context.features||(d.__aws_sdk_context.features={}):d.__aws_sdk_context={features:{}},d.__aws_sdk_context.features[H]=X}const v=/\d{12}\.ddb/;async function l(d,H,X){if(X.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&S(d,"PROTOCOL_RPC_V2_CBOR","M"),typeof H.retryStrategy=="function"){const P=await H.retryStrategy();typeof P.acquireInitialRetryToken=="function"?P.constructor?.name?.includes("Adaptive")?S(d,"RETRY_MODE_ADAPTIVE","F"):S(d,"RETRY_MODE_STANDARD","E"):S(d,"RETRY_MODE_LEGACY","D")}if(typeof H.accountIdEndpointMode=="function"){const P=d.endpointV2;switch(String(P?.url?.hostname).match(v)&&S(d,"ACCOUNT_ID_ENDPOINT","O"),await H.accountIdEndpointMode?.()){case"disabled":S(d,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":S(d,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":S(d,"ACCOUNT_ID_MODE_REQUIRED","R");break}}const R=d.__smithy_context?.selectedHttpAuthScheme?.identity;if(R?.$source){const P=R;P.accountId&&S(d,"RESOLVED_ACCOUNT_ID","T");for(const[$,c]of Object.entries(P.$source??{}))S(d,$,c)}}const w="user-agent",A="x-amz-user-agent",C=" ",m="/",E=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,F=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,U="-",G=1024;function z(d){let H="";for(const X in d){const Z=d[X];if(H.length+Z.length+1<=G){H.length?H+=","+Z:H+=Z;continue}break}return H}const ne=d=>(H,X)=>async Z=>{const{request:R}=Z;if(!x.Kd.isInstance(R))return H(Z);const{headers:P}=R,$=X?.userAgent?.map(Y)||[],c=(await d.defaultUserAgentProvider()).map(Y);await l(X,d,Z);const f=X;c.push(`m/${z(Object.assign({},X.__smithy_context?.features,f.__aws_sdk_context?.features))}`);const N=d?.customUserAgent?.map(Y)||[],t=await d.userAgentAppId();t&&c.push(Y([`app/${t}`]));const u=(0,L.vL)(),_=(u?[u]:[]).concat([...c,...$,...N]).join(C),j=[...c.filter(e=>e.startsWith("aws-sdk-")),...N].join(C);return d.runtime!=="browser"?(j&&(P[A]=P[A]?`${P[w]} ${j}`:j),P[w]=_):P[A]=_,H({...Z,request:R})},Y=d=>{const H=d[0].split(m).map($=>$.replace(E,U)).join(m),X=d[1]?.replace(F,U),Z=H.indexOf(m),R=H.substring(0,Z);let P=H.substring(Z+1);return R==="api"&&(P=P.toLowerCase()),[R,P,X].filter($=>$&&$.length>0).reduce(($,c,f)=>{switch(f){case 0:return c;case 1:return`${$}/${c}`;default:return`${$}#${c}`}},"")},s={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},T=d=>({applyToStack:H=>{H.add(ne(d),s)}})},48892:(se,W,a)=>{a.d(W,{Rq:()=>y,$3:()=>I});const y=S=>{let v=async()=>{if(S.region===void 0)throw new Error("Region is missing from runtimeConfig");const l=S.region;return typeof l=="string"?l:l()};return{setRegion(l){v=l},region(){return v}}},I=S=>({region:S.region()}),g="AWS_REGION",B="region",L={environmentVariableSelector:S=>S[g],configFileSelector:S=>S[B],default:()=>{throw new Error("Region is missing")}},x={preferredFile:"credentials"}},82408:(se,W,a)=>{a.d(W,{UF:()=>m,vL:()=>C});var y=a(29013);const I=(E,F=!1)=>{if(F){for(const U of E.split("."))if(!I(U))return!1;return!0}return!(!(0,y.X8)(E)||E.length<3||E.length>63||E!==E.toLowerCase()||(0,y.oX)(E))},g=":",B="/",L=E=>{const F=E.split(g);if(F.length<6)return null;const[U,G,z,ne,Y,...s]=F;if(U!=="arn"||G===""||z===""||s.join(g)==="")return null;const T=s.map(d=>d.split(B)).flat();return{partition:G,service:z,region:ne,accountId:Y,resourceId:T}};let S=JSON.parse('{"partitions":[{"id":"aws","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","implicitGlobalRegion":"us-east-1","name":"aws","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^(us|eu|ap|sa|ca|me|af|il|mx)\\\\-\\\\w+\\\\-\\\\d+$","regions":{"af-south-1":{"description":"Africa (Cape Town)"},"ap-east-1":{"description":"Asia Pacific (Hong Kong)"},"ap-northeast-1":{"description":"Asia Pacific (Tokyo)"},"ap-northeast-2":{"description":"Asia Pacific (Seoul)"},"ap-northeast-3":{"description":"Asia Pacific (Osaka)"},"ap-south-1":{"description":"Asia Pacific (Mumbai)"},"ap-south-2":{"description":"Asia Pacific (Hyderabad)"},"ap-southeast-1":{"description":"Asia Pacific (Singapore)"},"ap-southeast-2":{"description":"Asia Pacific (Sydney)"},"ap-southeast-3":{"description":"Asia Pacific (Jakarta)"},"ap-southeast-4":{"description":"Asia Pacific (Melbourne)"},"ap-southeast-5":{"description":"Asia Pacific (Malaysia)"},"ap-southeast-7":{"description":"Asia Pacific (Thailand)"},"aws-global":{"description":"AWS Standard global region"},"ca-central-1":{"description":"Canada (Central)"},"ca-west-1":{"description":"Canada West (Calgary)"},"eu-central-1":{"description":"Europe (Frankfurt)"},"eu-central-2":{"description":"Europe (Zurich)"},"eu-north-1":{"description":"Europe (Stockholm)"},"eu-south-1":{"description":"Europe (Milan)"},"eu-south-2":{"description":"Europe (Spain)"},"eu-west-1":{"description":"Europe (Ireland)"},"eu-west-2":{"description":"Europe (London)"},"eu-west-3":{"description":"Europe (Paris)"},"il-central-1":{"description":"Israel (Tel Aviv)"},"me-central-1":{"description":"Middle East (UAE)"},"me-south-1":{"description":"Middle East (Bahrain)"},"mx-central-1":{"description":"Mexico (Central)"},"sa-east-1":{"description":"South America (Sao Paulo)"},"us-east-1":{"description":"US East (N. Virginia)"},"us-east-2":{"description":"US East (Ohio)"},"us-west-1":{"description":"US West (N. California)"},"us-west-2":{"description":"US West (Oregon)"}}},{"id":"aws-cn","outputs":{"dnsSuffix":"amazonaws.com.cn","dualStackDnsSuffix":"api.amazonwebservices.com.cn","implicitGlobalRegion":"cn-northwest-1","name":"aws-cn","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^cn\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-cn-global":{"description":"AWS China global region"},"cn-north-1":{"description":"China (Beijing)"},"cn-northwest-1":{"description":"China (Ningxia)"}}},{"id":"aws-us-gov","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","implicitGlobalRegion":"us-gov-west-1","name":"aws-us-gov","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^us\\\\-gov\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-us-gov-global":{"description":"AWS GovCloud (US) global region"},"us-gov-east-1":{"description":"AWS GovCloud (US-East)"},"us-gov-west-1":{"description":"AWS GovCloud (US-West)"}}},{"id":"aws-iso","outputs":{"dnsSuffix":"c2s.ic.gov","dualStackDnsSuffix":"c2s.ic.gov","implicitGlobalRegion":"us-iso-east-1","name":"aws-iso","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-iso\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-global":{"description":"AWS ISO (US) global region"},"us-iso-east-1":{"description":"US ISO East"},"us-iso-west-1":{"description":"US ISO WEST"}}},{"id":"aws-iso-b","outputs":{"dnsSuffix":"sc2s.sgov.gov","dualStackDnsSuffix":"sc2s.sgov.gov","implicitGlobalRegion":"us-isob-east-1","name":"aws-iso-b","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-isob\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-b-global":{"description":"AWS ISOB (US) global region"},"us-isob-east-1":{"description":"US ISOB East (Ohio)"}}},{"id":"aws-iso-e","outputs":{"dnsSuffix":"cloud.adc-e.uk","dualStackDnsSuffix":"cloud.adc-e.uk","implicitGlobalRegion":"eu-isoe-west-1","name":"aws-iso-e","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^eu\\\\-isoe\\\\-\\\\w+\\\\-\\\\d+$","regions":{"eu-isoe-west-1":{"description":"EU ISOE West"}}},{"id":"aws-iso-f","outputs":{"dnsSuffix":"csp.hci.ic.gov","dualStackDnsSuffix":"csp.hci.ic.gov","implicitGlobalRegion":"us-isof-south-1","name":"aws-iso-f","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-isof\\\\-\\\\w+\\\\-\\\\d+$","regions":{}}],"version":"1.1"}'),v="";const l=E=>{const{partitions:F}=S;for(const G of F){const{regions:z,outputs:ne}=G;for(const[Y,s]of Object.entries(z))if(Y===E)return{...ne,...s}}for(const G of F){const{regionRegex:z,outputs:ne}=G;if(new RegExp(z).test(E))return{...ne}}const U=F.find(G=>G.id==="aws");if(!U)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...U.outputs}},w=(E,F="")=>{S=E,v=F},A=()=>{w(partitionsInfo,"")},C=()=>v,m={isVirtualHostableS3Bucket:I,parseArn:L,partition:l};y.mw.aws=m},12155:(se,W,a)=>{a.d(W,{hV:()=>A,pf:()=>L});var y=a(70857),I=a(932);const g={isCrtAvailable:!1},B=()=>g.isCrtAvailable?["md/crt-avail"]:null,L=({serviceId:C,clientVersion:m})=>async E=>{const F=[["aws-sdk-js",m],["ua","2.1"],[`os/${(0,y.platform)()}`,(0,y.release)()],["lang/js"],["md/nodejs",`${I.versions.node}`]],U=B();U&&F.push(U),C&&F.push([`api/${C}`,m]),I.env.AWS_EXECUTION_ENV&&F.push([`exec-env/${I.env.AWS_EXECUTION_ENV}`]);const G=await E?.userAgentAppId?.();return G?[...F,[`app/${G}`]]:[...F]},x=null;var S=a(20717);const v="AWS_SDK_UA_APP_ID",l="sdk_ua_app_id",w="sdk-ua-app-id",A={environmentVariableSelector:C=>C[v],configFileSelector:C=>C[l]??C[w],default:S.bM}},21672:(se,W,a)=>{a.d(W,{zH:()=>G,GG:()=>U,e$:()=>x,Ko:()=>w,TD:()=>Y});const y=(s,T,d)=>{if(T in s){if(s[T]==="true")return!0;if(s[T]==="false")return!1;throw new Error(`Cannot load ${d} "${T}". Expected "true" or "false", got ${s[T]}.`)}};var I;(function(s){s.ENV="env",s.CONFIG="shared config entry"})(I||(I={}));const g="AWS_USE_DUALSTACK_ENDPOINT",B="use_dualstack_endpoint",L=!1,x={environmentVariableSelector:s=>y(s,g,I.ENV),configFileSelector:s=>y(s,B,I.CONFIG),default:!1},S="AWS_USE_FIPS_ENDPOINT",v="use_fips_endpoint",l=!1,w={environmentVariableSelector:s=>y(s,S,I.ENV),configFileSelector:s=>y(s,v,I.CONFIG),default:!1};var A=a(77667);const C=s=>{const{tls:T,endpoint:d,urlParser:H,useDualstackEndpoint:X}=s;return Object.assign(s,{tls:T??!0,endpoint:normalizeProvider(typeof d=="string"?H(d):d),isCustomEndpoint:!0,useDualstackEndpoint:normalizeProvider(X??!1)})},m=s=>{const T=normalizeProvider(s.useDualstackEndpoint??!1),{endpoint:d,useFipsEndpoint:H,urlParser:X,tls:Z}=s;return Object.assign(s,{tls:Z??!0,endpoint:d?normalizeProvider(typeof d=="string"?X(d):d):()=>getEndpointFromRegion({...s,useDualstackEndpoint:T,useFipsEndpoint:H}),isCustomEndpoint:!!d,useDualstackEndpoint:T})},E="AWS_REGION",F="region",U={environmentVariableSelector:s=>s[E],configFileSelector:s=>s[F],default:()=>{throw new Error("Region is missing")}},G={preferredFile:"credentials"},z=s=>typeof s=="string"&&(s.startsWith("fips-")||s.endsWith("-fips")),ne=s=>z(s)?["fips-aws-global","aws-fips"].includes(s)?"us-east-1":s.replace(/fips-(dkr-|prod-)?|-fips/,""):s,Y=s=>{const{region:T,useFipsEndpoint:d}=s;if(!T)throw new Error("Region is missing");return Object.assign(s,{region:async()=>{if(typeof T=="string")return ne(T);const H=await T();return ne(H)},useFipsEndpoint:async()=>{const H=typeof T=="string"?T:await T();return z(H)?!0:typeof d!="function"?Promise.resolve(!!d):d()}})}},18024:(se,W,a)=>{a.d(W,{h$:()=>s,mR:()=>H,e:()=>P,wB:()=>v,lW:()=>G,OC:()=>R,K4:()=>$,te:()=>z,lI:()=>ne.lI,J7:()=>Y});var y=a(13599);const I=c=>c[SMITHY_CONTEXT_KEY]||(c[SMITHY_CONTEXT_KEY]={});var g=a(77667);const B=(c,f)=>{if(!f||f.length===0)return c;const N=[];for(const t of f)for(const u of c)u.schemeId.split("#")[1]===t&&N.push(u);for(const t of c)N.find(({schemeId:u})=>u===t.schemeId)||N.push(t);return N};function L(c){const f=new Map;for(const N of c)f.set(N.schemeId,N);return f}const x=(c,f)=>(N,t)=>async u=>{const _=c.httpAuthSchemeProvider(await f.httpAuthSchemeParametersProvider(c,t,u.input)),j=c.authSchemePreference?await c.authSchemePreference():[],e=B(_,j),o=L(c.httpAuthSchemes),i=(0,g.u)(t),p=[];for(const D of e){const b=o.get(D.schemeId);if(!b){p.push(`HttpAuthScheme \`${D.schemeId}\` was not enabled for this service.`);continue}const V=b.identityProvider(await f.identityProviderConfigProvider(c));if(!V){p.push(`HttpAuthScheme \`${D.schemeId}\` did not have an IdentityProvider configured.`);continue}const{identityProperties:q={},signingProperties:J={}}=D.propertiesExtractor?.(c,t)||{};D.identityProperties=Object.assign(D.identityProperties||{},q),D.signingProperties=Object.assign(D.signingProperties||{},J),i.selectedHttpAuthScheme={httpAuthOption:D,identity:await V(D.identityProperties),signer:b.signer};break}if(!i.selectedHttpAuthScheme)throw new Error(p.join(`
`));return N(u)},S={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},v=(c,{httpAuthSchemeParametersProvider:f,identityProviderConfigProvider:N})=>({applyToStack:t=>{t.addRelativeTo(x(c,{httpAuthSchemeParametersProvider:f,identityProviderConfigProvider:N}),S)}});var l=a(39988);const w={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:l.Ou.name},A=(c,{httpAuthSchemeParametersProvider:f,identityProviderConfigProvider:N})=>({applyToStack:t=>{t.addRelativeTo(httpAuthSchemeMiddleware(c,{httpAuthSchemeParametersProvider:f,identityProviderConfigProvider:N}),w)}});var C=a(7355);const m=c=>f=>{throw f},E=(c,f)=>{},F=c=>(f,N)=>async t=>{if(!C.Kd.isInstance(t.request))return f(t);const _=(0,g.u)(N).selectedHttpAuthScheme;if(!_)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:j={}},identity:e,signer:o}=_,i=await f({...t,request:await o.sign(t.request,e,j)}).catch((o.errorHandler||m)(j));return(o.successHandler||E)(i.response,j),i},U={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},G=c=>({applyToStack:f=>{f.addRelativeTo(F(c),U)}}),z=c=>{if(typeof c=="function")return c;const f=Promise.resolve(c);return()=>f};var ne=a(31866);function Y(c,f,N){c.__smithy_context?c.__smithy_context.features||(c.__smithy_context.features={}):c.__smithy_context={features:{}},c.__smithy_context.features[f]=N}class s{constructor(f){this.authSchemes=new Map;for(const[N,t]of Object.entries(f))t!==void 0&&this.authSchemes.set(N,t)}getIdentityProvider(f){return this.authSchemes.get(f)}}class T{async sign(f,N,t){if(!t)throw new Error("request could not be signed with `apiKey` since the `name` and `in` signer properties are missing");if(!t.name)throw new Error("request could not be signed with `apiKey` since the `name` signer property is missing");if(!t.in)throw new Error("request could not be signed with `apiKey` since the `in` signer property is missing");if(!N.apiKey)throw new Error("request could not be signed with `apiKey` since the `apiKey` is not defined");const u=HttpRequest.clone(f);if(t.in===HttpApiKeyAuthLocation.QUERY)u.query[t.name]=N.apiKey;else if(t.in===HttpApiKeyAuthLocation.HEADER)u.headers[t.name]=t.scheme?`${t.scheme} ${N.apiKey}`:N.apiKey;else throw new Error("request can only be signed with `apiKey` locations `query` or `header`, but found: `"+t.in+"`");return u}}class d{async sign(f,N,t){const u=HttpRequest.clone(f);if(!N.token)throw new Error("request could not be signed with `token` since the `token` is not defined");return u.headers.Authorization=`Bearer ${N.token}`,u}}class H{async sign(f,N,t){return f}}const R=(c=>f=>P(f)&&f.expiration.getTime()-Date.now()<c)(3e5),P=c=>c.expiration!==void 0,$=(c,f,N)=>{if(c===void 0)return;const t=typeof c!="function"?async()=>Promise.resolve(c):c;let u,_,j,e=!1;const o=async i=>{_||(_=t(i));try{u=await _,j=!0,e=!1}finally{_=void 0}return u};return f===void 0?async i=>((!j||i?.forceRefresh)&&(u=await o(i)),u):async i=>((!j||i?.forceRefresh)&&(u=await o(i)),e?u:N(u)?(f(u)&&await o(i),u):(e=!0,u))}},63665:(se,W,a)=>{a.d(W,{V:()=>S});var y=a(29078),I=a(72465),g=a(20181),B=a.n(g),L=a(76982),x=a.n(L);class S{constructor(w,A){this.algorithmIdentifier=w,this.secret=A,this.reset()}update(w,A){this.hash.update((0,I.Fo)(v(w,A)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?(0,L.createHmac)(this.algorithmIdentifier,v(this.secret)):(0,L.createHash)(this.algorithmIdentifier)}}function v(l,w){return g.Buffer.isBuffer(l)?l:typeof l=="string"?(0,y.s)(l,w):ArrayBuffer.isView(l)?(0,y.Q)(l.buffer,l.byteOffset,l.byteLength):(0,y.Q)(l)}},49853:(se,W,a)=>{a.d(W,{vK:()=>L});var y=a(7355);const I="content-length";function g(x){return S=>async v=>{const l=v.request;if(y.Kd.isInstance(l)){const{body:w,headers:A}=l;if(w&&Object.keys(A).map(C=>C.toLowerCase()).indexOf(I)===-1)try{const C=x(w);l.headers={...l.headers,[I]:String(C)}}catch{}}return S({...v,request:l})}}const B={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},L=x=>({applyToStack:S=>{S.add(g(x.bodyLengthChecker),B)}})},92169:(se,W,a)=>{a.d(W,{rD:()=>X,Co:()=>Z});const y=async R=>{const P=R?.Bucket||"";if(typeof R.Bucket=="string"&&(R.Bucket=P.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),v(P)){if(R.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!S(P)||P.indexOf(".")!==-1&&!String(R.Endpoint).startsWith("http:")||P.toLowerCase()!==P||P.length<3)&&(R.ForcePathStyle=!0);return R.DisableMultiRegionAccessPoints&&(R.disableMultiRegionAccessPoints=!0,R.DisableMRAP=!0),R},I=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,g=/(\d+\.){3}\d+/,B=/\.\./,L=/\./,x=/^(.+\.)?s3(-fips)?(\.dualstack)?[.-]([a-z0-9-]+)\./,S=R=>I.test(R)&&!g.test(R)&&!B.test(R),v=R=>{const[P,$,c,,,f]=R.split(":"),N=P==="arn"&&R.split(":").length>=6,t=Boolean(N&&$&&c&&f);if(N&&!t)throw new Error(`Invalid ARN: ${R} was an invalid ARN.`);return t},l=(R,P,$)=>{const c=async()=>{const f=$[R]??$[P];return typeof f=="function"?f():f};return R==="credentialScope"||P==="CredentialScope"?async()=>{const f=typeof $.credentials=="function"?await $.credentials():$.credentials;return f?.credentialScope??f?.CredentialScope}:R==="accountId"||P==="AccountId"?async()=>{const f=typeof $.credentials=="function"?await $.credentials():$.credentials;return f?.accountId??f?.AccountId}:R==="endpoint"||P==="endpoint"?async()=>{const f=await c();if(f&&typeof f=="object"){if("url"in f)return f.url.href;if("hostname"in f){const{protocol:N,hostname:t,port:u,path:_}=f;return`${N}//${t}${u?":"+u:""}${_}`}}return f}:c};var w=a(23087),A=a(95418);const C="AWS_ENDPOINT_URL",m="endpoint_url",E=R=>({environmentVariableSelector:P=>{const $=R.split(" ").map(N=>N.toUpperCase()),c=P[[C,...$].join("_")];if(c)return c;const f=P[C];if(f)return f},configFileSelector:(P,$)=>{if($&&P.services){const f=$[["services",P.services].join(A.QD)];if(f){const N=R.split(" ").map(u=>u.toLowerCase()),t=f[[N.join("_"),m].join(A.QD)];if(t)return t}}const c=P[m];if(c)return c},default:void 0}),F=async R=>(0,w.Z)(E(R??""))();var U=a(68677);const G=R=>typeof R=="object"?"url"in R?(0,U.D)(R.url):R:(0,U.D)(R),z=async(R,P,$,c)=>{if(!$.endpoint){let t;$.serviceConfiguredEndpoint?t=await $.serviceConfiguredEndpoint():t=await F($.serviceId),t&&($.endpoint=()=>Promise.resolve(G(t)))}const f=await ne(R,P,$);if(typeof $.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return $.endpointProvider(f,c)},ne=async(R,P,$)=>{const c={},f=P?.getEndpointParameterInstructions?.()||{};for(const[N,t]of Object.entries(f))switch(t.type){case"staticContextParams":c[N]=t.value;break;case"contextParams":c[N]=R[t.name];break;case"clientContextParams":case"builtInParams":c[N]=await l(t.name,N,$)();break;case"operationContextParams":c[N]=t.get(R);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(t))}return Object.keys(f).length===0&&Object.assign(c,$),String($.serviceId).toLowerCase()==="s3"&&await y(c),c};var Y=a(18024),s=a(77667);const T=({config:R,instructions:P})=>($,c)=>async f=>{R.endpoint&&(0,Y.J7)(c,"ENDPOINT_OVERRIDE","N");const N=await z(f.input,{getEndpointParameterInstructions(){return P}},{...R},c);c.endpointV2=N,c.authSchemes=N.properties?.authSchemes;const t=c.authSchemes?.[0];if(t){c.signing_region=t.signingRegion,c.signing_service=t.signingName;const _=(0,s.u)(c)?.selectedHttpAuthScheme?.httpAuthOption;_&&(_.signingProperties=Object.assign(_.signingProperties||{},{signing_region:t.signingRegion,signingRegion:t.signingRegion,signing_service:t.signingName,signingName:t.signingName,signingRegionSet:t.signingRegionSet},t.properties))}return $({...f})};var d=a(39988);const H={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:d.Ou.name},X=(R,P)=>({applyToStack:$=>{$.addRelativeTo(T({config:R,instructions:P}),H)}}),Z=R=>{const P=R.tls??!0,{endpoint:$,useDualstackEndpoint:c,useFipsEndpoint:f}=R,N=$!=null?async()=>G(await(0,s.t)($)()):void 0,u=Object.assign(R,{endpoint:N,tls:P,isCustomEndpoint:!!$,useDualstackEndpoint:(0,s.t)(c??!1),useFipsEndpoint:(0,s.t)(f??!1)});let _;return u.serviceConfiguredEndpoint=async()=>(R.serviceId&&!_&&(_=F(R.serviceId)),_),u}},80070:(se,W,a)=>{a.d(W,{qs:()=>F,kN:()=>ne,ey:()=>f,$z:()=>U});var y=a(39055),I=a(7355),g=a(54882),B=a(3682);const L=(t,u)=>{const _=t,j=u?.noRetryIncrement??y.XP,e=u?.retryCost??y.XS,o=u?.timeoutRetryCost??y.Rn;let i=t;const p=q=>q.name==="TimeoutError"?o:e,D=q=>p(q)<=i;return Object.freeze({hasRetryTokens:D,retrieveRetryTokens:q=>{if(!D(q))throw new Error("No retry token available");const J=p(q);return i-=J,J},releaseRetryTokens:q=>{i+=q??j,i=Math.min(i,_)}})},x=(t,u)=>Math.floor(Math.min(y.G8,Math.random()*2**u*t)),S=t=>t?(0,g.S0)(t)||(0,g.h5)(t)||(0,g.Qb)(t)||(0,g.bV)(t):!1,v=t=>t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):typeof t=="string"?new Error(t):new Error(`AWS SDK error wrapper for ${t}`);class l{constructor(u,_){this.maxAttemptsProvider=u,this.mode=y.cm.STANDARD,this.retryDecider=_?.retryDecider??S,this.delayDecider=_?.delayDecider??x,this.retryQuota=_?.retryQuota??L(y.Df)}shouldRetry(u,_,j){return _<j&&this.retryDecider(u)&&this.retryQuota.hasRetryTokens(u)}async getMaxAttempts(){let u;try{u=await this.maxAttemptsProvider()}catch{u=y.Gz}return u}async retry(u,_,j){let e,o=0,i=0;const p=await this.getMaxAttempts(),{request:D}=_;for(I.Kd.isInstance(D)&&(D.headers[y.l5]=(0,B.A)());;)try{I.Kd.isInstance(D)&&(D.headers[y.ok]=`attempt=${o+1}; max=${p}`),j?.beforeRequest&&await j.beforeRequest();const{response:b,output:V}=await u(_);return j?.afterRequest&&j.afterRequest(b),this.retryQuota.releaseRetryTokens(e),V.$metadata.attempts=o+1,V.$metadata.totalRetryDelay=i,{response:b,output:V}}catch(b){const V=v(b);if(o++,this.shouldRetry(V,o,p)){e=this.retryQuota.retrieveRetryTokens(V);const q=this.delayDecider((0,g.Qb)(V)?y.jh:y.bp,o),J=w(V.$response),Q=Math.max(J||0,q);i+=Q,await new Promise(ce=>setTimeout(ce,Q));continue}throw V.$metadata||(V.$metadata={}),V.$metadata.attempts=o,V.$metadata.totalRetryDelay=i,V}}}const w=t=>{if(!I.cS.isInstance(t))return;const u=Object.keys(t.headers).find(o=>o.toLowerCase()==="retry-after");if(!u)return;const _=t.headers[u],j=Number(_);return Number.isNaN(j)?new Date(_).getTime()-Date.now():j*1e3};class A extends l{constructor(u,_){const{rateLimiter:j,...e}=_??{};super(u,e),this.rateLimiter=j??new y.QJ,this.mode=y.cm.ADAPTIVE}async retry(u,_){return super.retry(u,_,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:j=>{this.rateLimiter.updateClientSendingRate(j)}})}}var C=a(77667);const m="AWS_MAX_ATTEMPTS",E="max_attempts",F={environmentVariableSelector:t=>{const u=t[m];if(!u)return;const _=parseInt(u);if(Number.isNaN(_))throw new Error(`Environment variable ${m} mast be a number, got "${u}"`);return _},configFileSelector:t=>{const u=t[E];if(!u)return;const _=parseInt(u);if(Number.isNaN(_))throw new Error(`Shared config file entry ${E} mast be a number, got "${u}"`);return _},default:y.Gz},U=t=>{const{retryStrategy:u,retryMode:_,maxAttempts:j}=t,e=(0,C.t)(j??y.Gz);return Object.assign(t,{maxAttempts:e,retryStrategy:async()=>u||(await(0,C.t)(_)()===y.cm.ADAPTIVE?new y.Y(e):new y.ru(e))})},G="AWS_RETRY_MODE",z="retry_mode",ne={environmentVariableSelector:t=>t[G],configFileSelector:t=>t[z],default:y.L0},Y=()=>t=>async u=>{const{request:_}=u;return HttpRequest.isInstance(_)&&(delete _.headers[INVOCATION_ID_HEADER],delete _.headers[REQUEST_HEADER]),t(u)},s={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},T=t=>({applyToStack:u=>{u.addRelativeTo(Y(),s)}});var d=a(17542),H=a(2203);const X=t=>t?.body instanceof H.Readable||typeof ReadableStream<"u"&&t?.body instanceof ReadableStream,Z=t=>(u,_)=>async j=>{let e=await t.retryStrategy();const o=await t.maxAttempts();if(R(e)){e=e;let i=await e.acquireInitialRetryToken(_.partition_id),p=new Error,D=0,b=0;const{request:V}=j,q=I.Kd.isInstance(V);for(q&&(V.headers[y.l5]=(0,B.A)());;)try{q&&(V.headers[y.ok]=`attempt=${D+1}; max=${o}`);const{response:J,output:Q}=await u(j);return e.recordSuccess(i),Q.$metadata.attempts=D+1,Q.$metadata.totalRetryDelay=b,{response:J,output:Q}}catch(J){const Q=P(J);if(p=v(J),q&&X(V))throw(_.logger instanceof d.N4?console:_.logger)?.warn("An error was encountered in a non-retryable streaming request."),p;try{i=await e.refreshRetryTokenForRetry(i,Q)}catch{throw p.$metadata||(p.$metadata={}),p.$metadata.attempts=D+1,p.$metadata.totalRetryDelay=b,p}D=i.getRetryCount();const ce=i.getRetryDelay();b+=ce,await new Promise(he=>setTimeout(he,ce))}}else return e=e,e?.mode&&(_.userAgent=[..._.userAgent||[],["cfg/retry-mode",e.mode]]),e.retry(u,j)},R=t=>typeof t.acquireInitialRetryToken<"u"&&typeof t.refreshRetryTokenForRetry<"u"&&typeof t.recordSuccess<"u",P=t=>{const u={error:t,errorType:$(t)},_=N(t.$response);return _&&(u.retryAfterHint=_),u},$=t=>(0,g.Qb)(t)?"THROTTLING":(0,g.bV)(t)?"TRANSIENT":(0,g.GQ)(t)?"SERVER_ERROR":"CLIENT_ERROR",c={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},f=t=>({applyToStack:u=>{u.add(Z(t),c)}}),N=t=>{if(!I.cS.isInstance(t))return;const u=Object.keys(t.headers).find(o=>o.toLowerCase()==="retry-after");if(!u)return;const _=t.headers[u],j=Number(_);return Number.isNaN(j)?new Date(_):new Date(j*1e3)}},39988:(se,W,a)=>{a.d(W,{TM:()=>S,Ou:()=>x});var y=a(7355);const I=(v,l)=>(w,A)=>async C=>{const{response:m}=await w(C);try{const E=await l(m,v);return{response:m,output:E}}catch(E){if(Object.defineProperty(E,"$response",{value:m}),!("$metadata"in E)){const F="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{E.message+=`
  `+F}catch{!A.logger||A.logger?.constructor?.name==="NoOpLogger"?console.warn(F):A.logger?.warn?.(F)}typeof E.$responseBodyText<"u"&&E.$response&&(E.$response.body=E.$responseBodyText);try{if(y.cS.isInstance(m)){const{headers:U={}}=m,G=Object.entries(U);E.$metadata={httpStatusCode:m.statusCode,requestId:g(/^x-[\w-]+-request-?id$/,G),extendedRequestId:g(/^x-[\w-]+-id-2$/,G),cfId:g(/^x-[\w-]+-cf-id$/,G)}}}catch{}}throw E}},g=(v,l)=>(l.find(([w])=>w.match(v))||[void 0,void 0])[1],B=(v,l)=>(w,A)=>async C=>{const m=v,E=A.endpointV2?.url&&m.urlParser?async()=>m.urlParser(A.endpointV2.url):m.endpoint;if(!E)throw new Error("No valid endpoint provider available.");const F=await l(C.input,{...v,endpoint:E});return w({...C,request:F})},L={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},x={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function S(v,l,w){return{applyToStack:A=>{A.add(I(v,w),L),A.add(B(v,l),x)}}}},54882:(se,W,a)=>{a.d(W,{h5:()=>S,S0:()=>x,GQ:()=>C,Qb:()=>w,bV:()=>A});const y=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],I=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],g=["TimeoutError","RequestTimeout","RequestTimeoutException"],B=[500,502,503,504],L=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],x=m=>m.$retryable!==void 0,S=m=>y.includes(m.name),v=m=>m.$metadata?.clockSkewCorrected,l=m=>{const E=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return m&&m instanceof TypeError?E.has(m.message):!1},w=m=>m.$metadata?.httpStatusCode===429||I.includes(m.name)||m.$retryable?.throttling==!0,A=(m,E=0)=>v(m)||g.includes(m.name)||L.includes(m?.code||"")||B.includes(m.$metadata?.httpStatusCode||0)||l(m)||m.cause!==void 0&&E<=10&&A(m.cause,E+1),C=m=>{if(m.$metadata?.httpStatusCode!==void 0){const E=m.$metadata.httpStatusCode;return 500<=E&&E<=599&&!A(m)}return!1}},35037:(se,W,a)=>{a.d(W,{n:()=>I});var y=a(79896);const I=g=>{if(!g)return 0;if(typeof g=="string")return Buffer.byteLength(g);if(typeof g.byteLength=="number")return g.byteLength;if(typeof g.size=="number")return g.size;if(typeof g.start=="number"&&typeof g.end=="number")return g.end+1-g.start;if(typeof g.path=="string"||Buffer.isBuffer(g.path))return(0,y.lstatSync)(g.path).size;if(typeof g.fd=="number")return(0,y.fstatSync)(g.fd).size;throw new Error(`Body Length computation failed for ${g}`)}},9277:(se,W,a)=>{a.d(W,{I:()=>m});var y=a(21672),I=a(23087),g=a(292);const B="AWS_EXECUTION_ENV",L="AWS_REGION",x="AWS_DEFAULT_REGION",S="AWS_EC2_METADATA_DISABLED",v=["in-region","cross-region","mobile","standard","legacy"],l="/latest/meta-data/placement/region",w="AWS_DEFAULTS_MODE",A="defaults_mode",C={environmentVariableSelector:U=>U[w],configFileSelector:U=>U[A],default:"legacy"},m=({region:U=(0,I.Z)(y.GG),defaultsMode:G=(0,I.Z)(C)}={})=>(0,g.Bj)(async()=>{const z=typeof G=="function"?await G():G;switch(z?.toLowerCase()){case"auto":return E(U);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(z?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${v.join(", ")}, got ${z}`)}}),E=async U=>{if(U){const G=typeof U=="function"?await U():U,z=await F();return z?G===z?"in-region":"cross-region":"standard"}return"standard"},F=async()=>{if(process.env[B]&&(process.env[L]||process.env[x]))return process.env[L]??process.env[x];if(!process.env[S])try{const{getInstanceMetadataEndpoint:U,httpRequest:G}=await Promise.resolve().then(a.bind(a,81221)),z=await U();return(await G({...z,path:l})).toString()}catch{}}},29013:(se,W,a)=>{a.d(W,{kS:()=>y,mw:()=>x,oX:()=>g,X8:()=>L,sO:()=>j});class y{constructor({size:o,params:i}){this.data=new Map,this.parameters=[],this.capacity=o??50,i&&(this.parameters=i)}get(o,i){const p=this.hash(o);if(p===!1)return i();if(!this.data.has(p)){if(this.data.size>this.capacity+10){const D=this.data.keys();let b=0;for(;;){const{value:V,done:q}=D.next();if(this.data.delete(V),q||++b>10)break}}this.data.set(p,i())}return this.data.get(p)}size(){return this.data.size}hash(o){let i="";const{parameters:p}=this;if(p.length===0)return!1;for(const D of p){const b=String(o[D]??"");if(b.includes("|;"))return!1;i+=b+"|;"}return i}}const I=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),g=e=>I.test(e)||e.startsWith("[")&&e.endsWith("]"),B=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),L=(e,o=!1)=>{if(!o)return B.test(e);const i=e.split(".");for(const p of i)if(!L(p))return!1;return!0},x={},S="endpoints";function v(e){return typeof e!="object"||e==null?e:"ref"in e?`$${v(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(v).join(", ")})`:JSON.stringify(e,null,2)}class l extends Error{constructor(o){super(o),this.name="EndpointError"}}const w=(e,o)=>e===o,A=e=>{const o=e.split("."),i=[];for(const p of o){const D=p.indexOf("[");if(D!==-1){if(p.indexOf("]")!==p.length-1)throw new l(`Path: '${e}' does not end with ']'`);const b=p.slice(D+1,-1);if(Number.isNaN(parseInt(b)))throw new l(`Invalid array index: '${b}' in path: '${e}'`);D!==0&&i.push(p.slice(0,D)),i.push(b)}else i.push(p)}return i},C=(e,o)=>A(o).reduce((i,p)=>{if(typeof i!="object")throw new l(`Index '${p}' in '${o}' not found in '${JSON.stringify(e)}'`);return Array.isArray(i)?i[parseInt(p)]:i[p]},e),m=e=>e!=null,E=e=>!e;var F=a(13599);const U={[F.Ue.HTTP]:80,[F.Ue.HTTPS]:443},s={booleanEquals:w,getAttr:C,isSet:m,isValidHostLabel:L,not:E,parseURL:e=>{const o=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){const{hostname:ge,port:pe,protocol:me="",path:ye="",query:fe={}}=e,Ee=new URL(`${me}//${ge}${pe?`:${pe}`:""}${ye}`);return Ee.search=Object.entries(fe).map(([Re,we])=>`${Re}=${we}`).join("&"),Ee}return new URL(e)}catch{return null}})();if(!o)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;const i=o.href,{host:p,hostname:D,pathname:b,protocol:V,search:q}=o;if(q)return null;const J=V.slice(0,-1);if(!Object.values(F.Ue).includes(J))return null;const Q=g(D),ce=i.includes(`${p}:${U[J]}`)||typeof e=="string"&&e.includes(`${p}:${U[J]}`),he=`${p}${ce?`:${U[J]}`:""}`;return{scheme:J,authority:he,path:b,normalizedPath:b.endsWith("/")?b:`${b}/`,isIp:Q}},stringEquals:(e,o)=>e===o,substring:(e,o,i,p)=>o>=i||e.length<i?null:p?e.substring(e.length-i,e.length-o):e.substring(o,i),uriEncode:e=>encodeURIComponent(e).replace(/[!*'()]/g,o=>`%${o.charCodeAt(0).toString(16).toUpperCase()}`)},T=(e,o)=>{const i=[],p={...o.endpointParams,...o.referenceRecord};let D=0;for(;D<e.length;){const b=e.indexOf("{",D);if(b===-1){i.push(e.slice(D));break}i.push(e.slice(D,b));const V=e.indexOf("}",b);if(V===-1){i.push(e.slice(b));break}e[b+1]==="{"&&e[V+1]==="}"&&(i.push(e.slice(b+1,V)),D=V+2);const q=e.substring(b+1,V);if(q.includes("#")){const[J,Q]=q.split("#");i.push(C(p[J],Q))}else i.push(p[q]);D=V+1}return i.join("")},d=({ref:e},o)=>({...o.endpointParams,...o.referenceRecord})[e],H=(e,o,i)=>{if(typeof e=="string")return T(e,i);if(e.fn)return X(e,i);if(e.ref)return d(e,i);throw new l(`'${o}': ${String(e)} is not a string, function or reference.`)},X=({fn:e,argv:o},i)=>{const p=o.map(b=>["boolean","number"].includes(typeof b)?b:H(b,"arg",i)),D=e.split(".");return D[0]in x&&D[1]!=null?x[D[0]][D[1]](...p):s[e](...p)},Z=({assign:e,...o},i)=>{if(e&&e in i.referenceRecord)throw new l(`'${e}' is already defined in Reference Record.`);const p=X(o,i);return i.logger?.debug?.(`${S} evaluateCondition: ${v(o)} = ${v(p)}`),{result:p===""?!0:!!p,...e!=null&&{toAssign:{name:e,value:p}}}},R=(e=[],o)=>{const i={};for(const p of e){const{result:D,toAssign:b}=Z(p,{...o,referenceRecord:{...o.referenceRecord,...i}});if(!D)return{result:D};b&&(i[b.name]=b.value,o.logger?.debug?.(`${S} assign: ${b.name} := ${v(b.value)}`))}return{result:!0,referenceRecord:i}},P=(e,o)=>Object.entries(e).reduce((i,[p,D])=>({...i,[p]:D.map(b=>{const V=H(b,"Header value entry",o);if(typeof V!="string")throw new l(`Header '${p}' value '${V}' is not a string`);return V})}),{}),$=(e,o)=>{if(Array.isArray(e))return e.map(i=>$(i,o));switch(typeof e){case"string":return T(e,o);case"object":if(e===null)throw new l(`Unexpected endpoint property: ${e}`);return c(e,o);case"boolean":return e;default:throw new l(`Unexpected endpoint property type: ${typeof e}`)}},c=(e,o)=>Object.entries(e).reduce((i,[p,D])=>({...i,[p]:$(D,o)}),{}),f=(e,o)=>{const i=H(e,"Endpoint URL",o);if(typeof i=="string")try{return new URL(i)}catch(p){throw console.error(`Failed to construct URL with ${i}`,p),p}throw new l(`Endpoint URL must be a string, got ${typeof i}`)},N=(e,o)=>{const{conditions:i,endpoint:p}=e,{result:D,referenceRecord:b}=R(i,o);if(!D)return;const V={...o,referenceRecord:{...o.referenceRecord,...b}},{url:q,properties:J,headers:Q}=p;return o.logger?.debug?.(`${S} Resolving endpoint from template: ${v(p)}`),{...Q!=null&&{headers:P(Q,V)},...J!=null&&{properties:c(J,V)},url:f(q,V)}},t=(e,o)=>{const{conditions:i,error:p}=e,{result:D,referenceRecord:b}=R(i,o);if(!!D)throw new l(H(p,"Error",{...o,referenceRecord:{...o.referenceRecord,...b}}))},u=(e,o)=>{const{conditions:i,rules:p}=e,{result:D,referenceRecord:b}=R(i,o);if(!!D)return _(p,{...o,referenceRecord:{...o.referenceRecord,...b}})},_=(e,o)=>{for(const i of e)if(i.type==="endpoint"){const p=N(i,o);if(p)return p}else if(i.type==="error")t(i,o);else if(i.type==="tree"){const p=u(i,o);if(p)return p}else throw new l(`Unknown endpoint rule: ${i}`);throw new l("Rules evaluation failed")},j=(e,o)=>{const{endpointParams:i,logger:p}=o,{parameters:D,rules:b}=e;o.logger?.debug?.(`${S} Initial EndpointParams: ${v(i)}`);const V=Object.entries(D).filter(([,Q])=>Q.default!=null).map(([Q,ce])=>[Q,ce.default]);if(V.length>0)for(const[Q,ce]of V)i[Q]=i[Q]??ce;const q=Object.entries(D).filter(([,Q])=>Q.required).map(([Q])=>Q);for(const Q of q)if(i[Q]==null)throw new l(`Missing required parameter: '${Q}'`);const J=_(b,{endpointParams:i,logger:p,referenceRecord:{}});return o.logger?.debug?.(`${S} Resolved endpoint: ${v(J)}`),J}},39055:(se,W,a)=>{a.d(W,{Y:()=>z,Gz:()=>I,bp:()=>x,L0:()=>g,QJ:()=>L,Df:()=>l,l5:()=>m,G8:()=>S,XP:()=>C,ok:()=>E,XS:()=>w,cm:()=>y,ru:()=>G,jh:()=>v,Rn:()=>A});var y;(function(Y){Y.STANDARD="standard",Y.ADAPTIVE="adaptive"})(y||(y={}));const I=3,g=y.STANDARD;var B=a(54882);class L{constructor(s){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=s?.beta??.7,this.minCapacity=s?.minCapacity??1,this.minFillRate=s?.minFillRate??.5,this.scaleConstant=s?.scaleConstant??.4,this.smooth=s?.smooth??.8;const T=this.getCurrentTimeInSeconds();this.lastThrottleTime=T,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(s){if(!!this.enabled){if(this.refillTokenBucket(),s>this.currentCapacity){const T=(s-this.currentCapacity)/this.fillRate*1e3;await new Promise(d=>L.setTimeoutFn(d,T))}this.currentCapacity=this.currentCapacity-s}}refillTokenBucket(){const s=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=s;return}const T=(s-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+T),this.lastTimestamp=s}updateClientSendingRate(s){let T;if(this.updateMeasuredRate(),(0,B.Qb)(s)){const H=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=H,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),T=this.cubicThrottle(H),this.enableTokenBucket()}else this.calculateTimeWindow(),T=this.cubicSuccess(this.getCurrentTimeInSeconds());const d=Math.min(T,2*this.measuredTxRate);this.updateTokenBucketRate(d)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(s){return this.getPrecise(s*this.beta)}cubicSuccess(s){return this.getPrecise(this.scaleConstant*Math.pow(s-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(s){this.refillTokenBucket(),this.fillRate=Math.max(s,this.minFillRate),this.maxCapacity=Math.max(s,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const s=this.getCurrentTimeInSeconds(),T=Math.floor(s*2)/2;if(this.requestCount++,T>this.lastTxRateBucket){const d=this.requestCount/(T-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(d*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=T}}getPrecise(s){return parseFloat(s.toFixed(8))}}L.setTimeoutFn=setTimeout;const x=100,S=20*1e3,v=500,l=500,w=5,A=10,C=1,m="amz-sdk-invocation-id",E="amz-sdk-request",F=()=>{let Y=x;return{computeNextBackoffDelay:d=>Math.floor(Math.min(S,Math.random()*2**d*Y)),setDelayBase:d=>{Y=d}}},U=({retryDelay:Y,retryCount:s,retryCost:T})=>({getRetryCount:()=>s,getRetryDelay:()=>Math.min(S,Y),getRetryCost:()=>T});class G{constructor(s){this.maxAttempts=s,this.mode=y.STANDARD,this.capacity=l,this.retryBackoffStrategy=F(),this.maxAttemptsProvider=typeof s=="function"?s:async()=>s}async acquireInitialRetryToken(s){return U({retryDelay:x,retryCount:0})}async refreshRetryTokenForRetry(s,T){const d=await this.getMaxAttempts();if(this.shouldRetry(s,T,d)){const H=T.errorType;this.retryBackoffStrategy.setDelayBase(H==="THROTTLING"?v:x);const X=this.retryBackoffStrategy.computeNextBackoffDelay(s.getRetryCount()),Z=T.retryAfterHint?Math.max(T.retryAfterHint.getTime()-Date.now()||0,X):X,R=this.getCapacityCost(H);return this.capacity-=R,U({retryDelay:Z,retryCount:s.getRetryCount()+1,retryCost:R})}throw new Error("No retry token available")}recordSuccess(s){this.capacity=Math.max(l,this.capacity+(s.getRetryCost()??C))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${I}`),I}}shouldRetry(s,T,d){return s.getRetryCount()+1<d&&this.capacity>=this.getCapacityCost(T.errorType)&&this.isRetryableError(T.errorType)}getCapacityCost(s){return s==="TRANSIENT"?A:w}isRetryableError(s){return s==="THROTTLING"||s==="TRANSIENT"}}class z{constructor(s,T){this.maxAttemptsProvider=s,this.mode=y.ADAPTIVE;const{rateLimiter:d}=T??{};this.rateLimiter=d??new L,this.standardRetryStrategy=new G(s)}async acquireInitialRetryToken(s){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(s)}async refreshRetryTokenForRetry(s,T){return this.rateLimiter.updateClientSendingRate(T),this.standardRetryStrategy.refreshRetryTokenForRetry(s,T)}recordSuccess(s){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(s)}}class ne extends G{constructor(s,T=x){super(typeof s=="function"?s:async()=>s),typeof T=="number"?this.computeNextBackoffDelay=()=>T:this.computeNextBackoffDelay=T}async refreshRetryTokenForRetry(s,T){const d=await super.refreshRetryTokenForRetry(s,T);return d.getRetryDelay=()=>this.computeNextBackoffDelay(d.getRetryCount()),d}}}};

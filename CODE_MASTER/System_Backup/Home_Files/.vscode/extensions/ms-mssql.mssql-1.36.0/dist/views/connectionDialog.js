import{a as it,b as Ze,c as at}from"./chunk-YXV74ZSF.js";import{a as st}from"./chunk-H77WAXRA.js";import{a as ct}from"./chunk-K55OXETV.js";import{a as Z,b as X}from"./chunk-4FRWMI4R.js";import{a as nn,b as lt}from"./chunk-4KN7ZFA5.js";import{a as rt}from"./chunk-KR6XSNEV.js";import{a as tt,b as nt}from"./chunk-OJNDYEPL.js";import{a as dt,b as pt,c as io}from"./chunk-L7S3JX2N.js";import"./chunk-BYXBJQAS.js";import{$b as no,Bc as $o,C as bo,Cb as M,D as yo,Dc as Qo,Ec as Jo,Fb as Ho,Fc as Xo,Gb as He,Ha as Ao,Hc as Yo,Ib as Ve,Ic as jo,Jb as Oe,Jc as et,Ka as Fo,Kb as We,Lb as Ue,Mb as qe,Na as eo,Oc as o,P as fe,Pc as tn,Ra as ko,Sa as _o,Sb as to,Va as Lo,W as ge,Za as zo,_a as To,a as U,ad as ve,bd as Fe,c as r,d as R,db as ce,dd as ot,ea as wo,eb as A,f as on,fb as Bo,gb as q,hb as me,i as So,j as Ne,ja as Me,jb as Pe,k as G,ka as Io,lb as oo,mb as No,mc as Vo,nb as Re,nc as Oo,ob as Ae,oc as Wo,p as C,pa as je,pb as ie,pc as Uo,qb as Mo,r as ho,sb as Ge,t as xo,tb as Po,u as Do,ub as Ro,vb as Go,vc as qo,wb as Eo,wc as Ce,xb as Ee,yb as W,yc as Zo,zc as Ko}from"./chunk-V3XRZIHQ.js";var xt=U((yi,ln)=>{ln.exports="./azure-color-UYJZ4QKS.svg"});var wt=U((Ji,dn)=>{dn.exports="./database_light-P2676YLL.svg"});var It=U((Xi,pn)=>{pn.exports="./database_dark-Z7UUEBQM.svg"});var Tt=U((kr,Cn)=>{Cn.exports="./sqlDb-inverse-YCMP72FI.svg"});var Bt=U((_r,vn)=>{vn.exports="./sqlDb-BXJJW4WD.svg"});var Nt=U((Lr,Sn)=>{Sn.exports="./dataWarehouse-inverse-RLYUTFYC.svg"});var Mt=U((zr,hn)=>{hn.exports="./dataWarehouse-AX33OQQX.svg"});var Et=U((ma,bn)=>{bn.exports="./fabric-color-4AIH5OH5.svg"});var Ot=U((Pa,An)=>{An.exports="./azure-inverse-CNJSMW3K.svg"});var Wt=U((Ra,Fn)=>{Fn.exports="./azure-DLOJF6JL.svg"});var Ut=U((Ga,kn)=>{kn.exports="./fabric-inverse-3JVOGGD3.svg"});var qt=U((Ea,_n)=>{_n.exports="./fabric-N36XTJD5.svg"});var Jt=r(on());var $t=r(nn());var re=r(R());var ut=r(R());var ro=r(tn());var ao;(n=>n.type=new ro.RequestType("getConnectionDisplayName"))(ao||={});var so;(n=>n.type=new ro.RequestType("getSqlAnalyticsEndpointUriFromFabric"))(so||={});var gt=r(C()),L=(0,ut.createContext)(void 0),ft=({children:e})=>{let n=nt(),i=n?.state;return(0,gt.jsx)(L.Provider,{value:{state:i,themeKind:n?.themeKind,...ot(n),loadConnection:function(t){n?.extensionRpc.action("loadConnection",{connection:t})},formAction:function(t){n?.extensionRpc.action("formAction",{event:t})},setConnectionInputType:function(t){n?.extensionRpc.action("setConnectionInputType",{inputMode:t})},connect:function(){n?.extensionRpc.action("connect")},loadAzureServers:function(t){n?.extensionRpc.action("loadAzureServers",{subscriptionId:t})},addFirewallRule:function(t){n?.extensionRpc.action("addFirewallRule",{firewallRuleSpec:t})},createConnectionGroup:function(t){n.extensionRpc.action("createConnectionGroup",{connectionGroupSpec:t})},openCreateConnectionGroupDialog:function(){n.extensionRpc.action("openCreateConnectionGroupDialog")},closeDialog:function(){n?.extensionRpc.action("closeDialog")},closeMessage:function(){n.extensionRpc.action("closeMessage")},filterAzureSubscriptions:function(){n.extensionRpc.action("filterAzureSubscriptions")},refreshConnectionsList:function(){n.extensionRpc.action("refreshConnectionsList")},deleteSavedConnection:function(t){n.extensionRpc.action("deleteSavedConnection",{connection:t})},removeRecentConnection:function(t){n.extensionRpc.action("removeRecentConnection",{connection:t})},loadFromConnectionString:function(t){n.extensionRpc.action("loadFromConnectionString",{connectionString:t})},openConnectionStringDialog:function(){n.extensionRpc.action("openConnectionStringDialog")},signIntoAzureForFirewallRule:function(){n.extensionRpc.action("signIntoAzureForFirewallRule")},signIntoAzureForBrowse:function(t){n.extensionRpc.action("signIntoAzureForBrowse",{browseTarget:t})},selectAzureAccount:t=>{n.extensionRpc.action("selectAzureAccount",{accountId:t})},selectAzureTenant:t=>{n.extensionRpc.action("selectAzureTenant",{tenantId:t})},selectFabricWorkspace:t=>{n.extensionRpc.action("selectFabricWorkspace",{workspaceId:t})},getConnectionDisplayName:async function(t){return await n.extensionRpc.sendRequest(ao.type,t)},getSqlAnalyticsEndpointUriFromFabric:async function(t){return await n.extensionRpc.sendRequest(so.type,t)}},children:e})};var T=r(C()),ke="buttonContainer",Ct=G({paneTitle:{marginTop:"12px",marginBottom:"12px",marginRight:"12px"},main:{gap:"5px",display:"flex",flexDirection:"column",flexWrap:"wrap"},connectionContainer:{width:"100%",maxWidth:"100%",height:"fit-content",padding:"5px",margin:"0px",[`& .${ke}`]:{visibility:"hidden"},":hover":{[`& .${ke}`]:{visibility:"visible"}},":focus-within":{[`& .${ke}`]:{visibility:"visible"}},":focus":{[`& .${ke}`]:{visibility:"visible"}}},horizontalCardImage:{width:"50px",height:"30px",paddingRight:"0px"},caption:{color:ho.colorNeutralForeground3},text:{margin:"0"}}),vt=()=>{let e=Ct(),n=(0,re.useContext)(L);if(n!==void 0)return(0,T.jsxs)("div",{children:[(0,T.jsxs)("div",{className:e.paneTitle,children:[(0,T.jsx)(M,{weight:"semibold",className:e.paneTitle,children:o.connectionDialog.savedConnections}),(0,T.jsx)(A,{icon:(0,T.jsx)(je,{}),appearance:"subtle",onClick:n.refreshConnectionsList,title:o.common.refresh})]}),(0,T.jsx)("div",{className:e.main,children:n.state?.savedConnections.map((i,t)=>(0,T.jsx)(mt,{connection:i,actionButton:{icon:(0,T.jsx)(eo,{}),onClick:s=>{n.deleteSavedConnection(i),s.stopPropagation()},tooltip:o.connectionDialog.deleteSavedConnection}},"saved"+t))}),(0,T.jsxs)("div",{className:e.paneTitle,children:[(0,T.jsx)(M,{weight:"semibold",className:e.paneTitle,children:o.connectionDialog.recentConnections}),(0,T.jsx)(A,{icon:(0,T.jsx)(je,{}),appearance:"subtle",onClick:n.refreshConnectionsList,title:o.common.refresh})]}),(0,T.jsx)(qo,{children:n.state?.recentConnections.map((i,t)=>(0,T.jsx)(mt,{connection:i,actionButton:{icon:(0,T.jsx)(eo,{}),onClick:s=>{n.removeRecentConnection(i),s.stopPropagation()},tooltip:o.connectionDialog.removeRecentConnection}},"mru"+t))})]})},mt=({connection:e,actionButton:n})=>{let i=Ct(),t=(0,re.useContext)(L),[s,a]=(0,re.useState)(e.profileName||e.server),[f,c]=(0,re.useState)(!1);if((0,re.useEffect)(()=>{let g=!0;return(async()=>{if(t&&!f){let h=await t.getConnectionDisplayName(e);g&&(a(h),c(!0))}})(),()=>{g=!1}},[t,e]),t!==void 0)return(0,T.jsx)(Wo,{className:i.connectionContainer,appearance:"subtle",tabIndex:0,onClick:()=>{t.loadConnection(e)},onKeyDown:g=>{(g.key==="Enter"||g.key===" ")&&(g.preventDefault(),t.loadConnection(e))},title:o.connectionDialog.connectTo(s),role:"button",style:{cursor:"pointer"},children:(0,T.jsx)(Uo,{image:(0,T.jsx)(Io,{fontSize:20}),header:s,action:n&&(0,T.jsx)("div",{className:ke,children:(0,T.jsx)(A,{icon:n.icon,appearance:"subtle",onClick:g=>{g.stopPropagation(),n.onClick(g)},onKeyDown:g=>{(g.key==="Enter"||g.key===" ")&&(g.preventDefault(),g.stopPropagation(),n.onClick(g))},title:n.tooltip,tabIndex:0})})})})};var Zt=r(R());var _=r(R());var St=r(R());var co=r(C()),rn="connectButton",Se=({style:e,className:n})=>{let i=(0,St.useContext)(L);if(i)return(0,co.jsx)(A,{id:rn,type:"submit",appearance:"primary",disabled:i.state.connectionStatus==="loading"||!i.state.readyToConnect,className:n,style:e,iconPosition:"after",icon:i.state.connectionStatus==="loading"?(0,co.jsx)(W,{size:"tiny"}):void 0,children:o.connectionDialog.connect})};var _e=r(R());var V=r(C()),he=({isAdvancedDrawerOpen:e,setIsAdvancedDrawerOpen:n})=>{let i=(0,_e.useContext)(L),[t,s]=(0,_e.useState)(""),[a,f]=(0,_e.useState)(["General"]),c=lt();if(i===void 0)return;function g(h){return h.options.some(m=>y(i?.state?.formComponents[m]))}function y(h){return t?h.label.toLowerCase().includes(t.toLowerCase())||h.propertyName.toLowerCase().includes(t.toLowerCase()):!0}return(0,V.jsxs)($o,{position:"end",size:"medium",open:e,onOpenChange:(h,{open:m})=>n(m),children:[(0,V.jsx)(Jo,{children:(0,V.jsx)(Xo,{action:(0,V.jsx)(A,{appearance:"subtle","aria-label":"Close",icon:(0,V.jsx)(ko,{}),onClick:()=>n(!1)}),children:o.connectionDialog.advancedConnectionSettings})}),(0,V.jsxs)(Qo,{children:[(0,V.jsx)(Yo,{size:"medium",style:{width:"100%",maxWidth:"100%"},placeholder:o.connectionDialog.searchSettings,onChange:(h,m)=>{s(m.value??"")},value:t}),(0,V.jsx)(xo,{multiple:!0,collapsible:!0,onToggle:(h,m)=>{t||f(m.openItems)},openItems:t?i.state.connectionComponents.groupedAdvancedOptions.map(h=>h.groupName):a,children:i.state.connectionComponents.groupedAdvancedOptions.filter(h=>g(h)).map((h,m)=>(0,V.jsxs)(Do,{value:h.groupName,className:c.accordionItem,children:[(0,V.jsx)(zo,{children:h.groupName}),(0,V.jsx)(To,{children:h.options.filter(d=>y(i.state.formComponents[d])).map((d,N)=>(0,V.jsx)(Z,{context:i,component:i.state.formComponents[d],idx:N},N))})]},m))})]})]})};function Le(e,n,i,t,s=1){if(e===void 0||e&&!t.includes(e)){let a;if(t.length>0)switch(s){case 0:a=t.length>0?t[0]:void 0;break;case 2:a=t.length===1?t[0]:void 0;break;case 1:default:a=void 0}n(a),i(a??"")}}var Ke=r(R());var xe=r(C()),an=G({decoration:{display:"flex",alignItems:"center",columnGap:"4px"}}),De=({label:e,required:n,clearable:i,content:t,decoration:s})=>{let a=X(),f=an(),[c,g]=(0,Ke.useState)("");(0,Ke.useEffect)(()=>{t.valueList.includes(t.value)&&g("")},[t.value]);let y=()=>{t.value&&g(t.valueList.includes(t.value)?"":t.invalidOptionErrorMessage)},h=m=>{t.setSelection(m.value??""),t.setValue(m.value??"")};return(0,xe.jsx)("div",{className:a.formComponentDiv,children:(0,xe.jsx)(me,{label:s?(0,xe.jsxs)("div",{className:f.decoration,children:[e,s]}):e,orientation:"horizontal",required:n,validationMessage:c,onBlur:y,children:(0,xe.jsx)(rt,{size:"small",selectedOption:{value:t.value},onSelect:h,placeholder:t.placeholder,searchBoxPlaceholder:t.placeholder,options:t.valueList.map(m=>({value:m,label:m})),clearable:i})})})};var Q=r(C()),po=({loadAccountStatus:e,hasAccounts:n,brandImageSource:i,signInText:t,linkText:s,loadingText:a,onSignInClick:f})=>{let c=sn();if(!(e==="loaded"&&n))return(0,Q.jsxs)("div",{className:c.notSignedInContainer,children:[(e==="notStarted"||e==="loaded"&&!n)&&(0,Q.jsxs)("div",{className:c.notSignedInContainer,children:[(0,Q.jsx)("img",{className:c.icon,src:i,alt:t}),(0,Q.jsx)("div",{children:t}),(0,Q.jsx)(ie,{className:c.signInLink,onClick:f,children:s})]}),e==="loading"&&(0,Q.jsxs)("div",{className:c.notSignedInContainer,children:[(0,Q.jsx)("img",{className:c.icon,src:i,alt:t}),(0,Q.jsx)("div",{children:a}),(0,Q.jsx)(W,{size:"large",style:{marginTop:"10px"}})]})]})},ht=po,sn=G({icon:{width:"75px",height:"75px",marginBottom:"10px"},notSignedInContainer:{marginTop:"20px",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"},signInLink:{marginTop:"8px"}});var v=r(C()),cn=()=>xt(),bt=()=>{let e=(0,_.useContext)(L);if(e===void 0)return;let n=X(),[i,t]=(0,_.useState)(!1),[s,a]=(0,_.useState)([]),[f,c]=(0,_.useState)(void 0),[g,y]=(0,_.useState)(""),[h,m]=(0,_.useState)([]),[d,N]=(0,_.useState)(void 0),[w,O]=(0,_.useState)(""),[K,$]=(0,_.useState)([]),[E,S]=(0,_.useState)(void 0),[b,te]=(0,_.useState)(""),[se,Xe]=(0,_.useState)([]),[J,Ye]=(0,_.useState)(void 0),[u,k]=(0,_.useState)(""),[ne,le]=(0,_.useState)([]),[Xt,go]=(0,_.useState)(void 0),[Yt,jt]=(0,_.useState)("");function mo(p){if(p===void 0&&e?.state.formState.server==="")return;Ye(p);let I="";p&&(I=e?.state.azureServers.find(Be=>Be.server===p)?.uri||""),Co("server",I)}function en(){switch(e.state.azureAccounts.length){case 0:return o.azure.notSignedIn;case 1:return e.state.azureAccounts[0].name;default:return o.azure.nAccounts(e.state.azureAccounts.length)}}(0,_.useEffect)(()=>{let p=Fe(e.state.azureSubscriptions.map(I=>`${I.name} (${I.id})`));a(p.sort()),Le(f,c,y,p,1)},[e.state.azureSubscriptions]),(0,_.useEffect)(()=>{let p=e.state.azureServers;f&&(p=p.filter(F=>F.subscription===f));let I=Fe(p.map(F=>F.resourceGroup));m(I.sort()),Le(d,N,O,I,1)},[s,f,e.state.azureServers]),(0,_.useEffect)(()=>{let p=e.state.azureServers;f&&(p=p.filter(F=>F.subscription===f)),d&&(p=p.filter(F=>F.resourceGroup===d));let I=Fe(p.map(F=>F.location));$(I.sort()),Le(E,S,te,I,1)},[h,d,e.state.azureServers]),(0,_.useEffect)(()=>{if(e.state.loadingAzureAccountsStatus!=="loaded")return;let p=e.state.azureServers;f&&(p=p.filter(F=>F.subscription===f)),d&&(p=p.filter(F=>F.resourceGroup===d)),E&&(p=p.filter(F=>F.location===E));let I=Fe(p.map(F=>F.server));Xe(I.sort()),J===""?k(""):Le(J,mo,k,I,0)},[K,E,e.state.azureServers]),(0,_.useEffect)(()=>{if(!J)return;let p=e.state.azureServers.find(F=>F.server===J);if(!p)return;let I=p.databases;le(I.sort()),go(I.length===1?I[0]:void 0)},[J]);function Co(p,I){e.formAction({propertyName:p,value:I,isAction:!1})}let vo=(e.state.azureAccounts?.length??0)>0;return(0,v.jsxs)("div",{children:[(0,v.jsx)(po,{loadAccountStatus:e.state.loadingAzureAccountsStatus,hasAccounts:vo,brandImageSource:cn(),signInText:o.connectionDialog.signIntoAzureToBrowse,linkText:o.azure.signIntoAzure,loadingText:o.azure.loadingAzureAccounts,onSignInClick:()=>e.signIntoAzureForBrowse("azureBrowse")}),e.state.loadingAzureAccountsStatus==="loaded"&&vo&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:n.formComponentDiv,style:{marginTop:"0",marginBottom:"12px"},children:(0,v.jsx)(me,{orientation:"horizontal",children:(0,v.jsx)(ce,{content:(0,v.jsxs)(v.Fragment,{children:[e.state.azureAccounts.length===0&&(0,v.jsx)("span",{children:o.azure.clickToSignIntoAnAzureAccount}),e.state.azureAccounts.length>0&&(0,v.jsxs)(v.Fragment,{children:[o.azure.currentlySignedInAs,(0,v.jsx)("br",{}),(0,v.jsx)("ul",{children:e.state.azureAccounts.map(p=>(0,v.jsx)("li",{children:p.name},p.id))})]})]}),relationship:"description",children:(0,v.jsxs)(ie,{onClick:()=>{e.signIntoAzureForBrowse("azureBrowse")},inline:!0,children:[en()," \u2022 ",e.state.azureAccounts.length===0?o.azure.signIntoAzure:o.azure.addAccount]})})})}),(0,v.jsx)(De,{label:o.connectionDialog.subscriptionLabel,clearable:!0,decoration:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(A,{icon:(0,v.jsx)(_o,{}),appearance:"subtle",title:o.connectionDialog.filterSubscriptions,onClick:()=>{e.filterAzureSubscriptions()},size:"small"}),e.state.loadingAzureSubscriptionsStatus==="loading"?(0,v.jsx)(W,{size:"tiny"}):void 0]}),content:{valueList:s,value:g,setValue:y,selection:f,setSelection:p=>{if(c(p),p===void 0)return;let I=p.indexOf("(");if(I===-1)return;let F=p.indexOf(")",I);if(F===-1)return;let Be=p.substring(I+1,F);Be.length!==0&&e.loadAzureServers(Be)},placeholder:o.connectionDialog.azureFilterPlaceholder(o.connectionDialog.subscription),invalidOptionErrorMessage:o.connectionDialog.invalidAzureBrowse(o.connectionDialog.subscription)}}),(0,v.jsx)(De,{label:o.connectionDialog.resourceGroupLabel,clearable:!0,content:{valueList:h,value:w,setValue:O,selection:d,setSelection:N,placeholder:o.connectionDialog.azureFilterPlaceholder(o.connectionDialog.resourceGroup),invalidOptionErrorMessage:o.connectionDialog.invalidAzureBrowse(o.connectionDialog.resourceGroup)}}),(0,v.jsx)(De,{label:o.connectionDialog.locationLabel,clearable:!0,content:{valueList:K,value:b,setValue:te,selection:E,setSelection:S,placeholder:o.connectionDialog.azureFilterPlaceholder(o.connectionDialog.location),invalidOptionErrorMessage:o.connectionDialog.invalidAzureBrowse(o.connectionDialog.location)}}),(0,v.jsx)(De,{label:o.connectionDialog.serverLabel,required:!0,decoration:e.state.loadingAzureServersStatus==="loading"?(0,v.jsx)(W,{size:"tiny"}):void 0,content:{valueList:se,value:u,setValue:k,selection:J,setSelection:mo,invalidOptionErrorMessage:o.connectionDialog.invalidAzureBrowse(o.connectionDialog.server)}}),J&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(Z,{context:e,component:e.state.formComponents.trustServerCertificate,idx:0,props:{orientation:"horizontal"}}),(0,v.jsx)(De,{label:o.connectionDialog.databaseLabel,clearable:!0,content:{valueList:ne,value:Yt,setValue:jt,selection:Xt,setSelection:p=>{go(p),Co("database",p??"")},placeholder:`<${o.connectionDialog.default}>`,invalidOptionErrorMessage:o.connectionDialog.invalidAzureBrowse(o.connectionDialog.database)}}),e.state.connectionComponents.mainOptions.filter(p=>!["server","database","trustServerCertificate"].includes(p)).map((p,I)=>{let F=e.state.formComponents[p];if(F?.hidden===!1)return(0,v.jsx)(Z,{context:e,component:F,idx:I,props:{orientation:"horizontal"}},I)})]}),(0,v.jsx)(he,{isAdvancedDrawerOpen:i,setIsAdvancedDrawerOpen:t}),(0,v.jsxs)("div",{className:n.formNavTray,children:[(0,v.jsx)(A,{onClick:p=>{t(!i)},className:n.formNavTrayButton,children:o.connectionDialog.advancedSettings}),(0,v.jsx)("div",{className:n.formNavTrayRight,children:(0,v.jsx)(Se,{className:n.formNavTrayButton})})]})]})]})};var $e=r(R());var Y=r(C()),yt=()=>{let e=(0,$e.useContext)(L),[n,i]=(0,$e.useState)(!1),t=X();if(e!==void 0)return(0,Y.jsxs)("div",{children:[e.state.connectionComponents.mainOptions.map((s,a)=>{let f=e.state.formComponents[s];if(f?.hidden===!1)return(0,Y.jsx)(Z,{context:e,component:f,idx:a,props:{orientation:"horizontal"}},a)}),(0,Y.jsx)(he,{isAdvancedDrawerOpen:n,setIsAdvancedDrawerOpen:i}),(0,Y.jsxs)("div",{className:t.formNavTray,children:[(0,Y.jsx)(A,{onClick:s=>{i(!n)},className:t.formNavTrayButton,children:o.connectionDialog.advancedSettings}),(0,Y.jsx)("div",{className:t.formNavTrayRight,children:(0,Y.jsx)(Se,{className:t.formNavTrayButton})})]})]})};var At=r(R());var ze=r(C()),un=wt(),fn=It(),Ft=()=>{let e=(0,At.useContext)(L);return(0,ze.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,ze.jsx)(Ae,{style:{padding:"10px"},src:e?.themeKind===1?un:fn,alt:o.connectionDialog.connectToDatabase,height:60,width:60}),(0,ze.jsx)(M,{size:500,style:{lineHeight:"60px"},weight:"medium",children:o.connectionDialog.connectToDatabase})]})};var be=r(R());var H=r(C()),kt=({dialogProps:e})=>{let n=(0,be.useContext)(L),i=(0,be.useRef)(null);if(n.state.dialog?.type!=="trustServerCert")return;(0,be.useEffect)(()=>{i.current&&i.current.focus()},[]);let t=()=>{n.closeDialog()};return(0,H.jsx)(He,{open:e.type==="trustServerCert",children:(0,H.jsx)(Ue,{onKeyDown:s=>{s.key==="Escape"&&t()},children:(0,H.jsxs)(Oe,{children:[(0,H.jsx)(We,{children:o.connectionDialog.connectionErrorTitle}),(0,H.jsxs)(qe,{children:[(0,H.jsx)(Ce,{intent:"error",style:{paddingRight:"12px"},children:e.message}),(0,H.jsx)("br",{}),o.connectionDialog.trustServerCertMessage,(0,H.jsx)("br",{}),(0,H.jsx)("br",{}),o.connectionDialog.trustServerCertPrompt," ",(0,H.jsx)(ie,{href:it,children:o.connectionDialog.readMore})]}),(0,H.jsxs)(Ve,{children:[(0,H.jsx)(A,{ref:i,appearance:"primary",style:{width:"auto",whiteSpace:"nowrap"},onClick:()=>{n.closeDialog(),n.formAction({propertyName:"trustServerCertificate",value:!0,isAction:!1}),n.connect()},children:o.connectionDialog.enableTrustServerCertificateButton}),(0,H.jsx)(A,{appearance:"secondary",onClick:t,children:o.common.cancel})]})]})})})};var ae=r(R());var z=r(C()),_t=({dialogProps:e})=>{let n=(0,ae.useContext)(L),[i,t]=(0,ae.useState)(e.connectionString||""),s=(0,ae.useRef)(null);if((0,ae.useEffect)(()=>{s.current&&setTimeout(()=>{s.current?.focus()},50)},[]),n.state.dialog?.type!=="loadFromConnectionString")return;let a=async()=>{try{await navigator.clipboard.writeText(i)}catch(c){console.error("Failed to copy connection string: ",c)}},f=async()=>{try{let c=await navigator.clipboard.readText();t(c)}catch(c){console.error("Failed to paste connection string: ",c)}};return(0,z.jsx)(He,{open:e.type==="loadFromConnectionString",children:(0,z.jsx)(Ue,{children:(0,z.jsxs)(Oe,{children:[(0,z.jsxs)(We,{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,z.jsx)("span",{children:o.connectionDialog.loadFromConnectionString}),(0,z.jsxs)("div",{style:{display:"flex",gap:"5px"},children:[(0,z.jsx)(A,{appearance:"transparent",size:"small",icon:(0,z.jsx)(Fo,{}),onClick:a,title:o.connectionDialog.copyConnectionString}),(0,z.jsx)(A,{appearance:"transparent",size:"small",icon:(0,z.jsx)(Ao,{}),onClick:f,title:o.connectionDialog.pasteConnectionString})]})]}),(0,z.jsxs)(qe,{children:[e.connectionStringError&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Ce,{intent:"error",style:{paddingRight:"12px"},children:e.connectionStringError}),(0,z.jsx)("br",{})]}),(0,z.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginTop:"10px"},children:[" ",(0,z.jsx)(Ho,{ref:s,value:i,onChange:(c,g)=>t(g.value),resize:"none",style:{height:"200px"}})]})]}),(0,z.jsxs)(Ve,{children:[(0,z.jsx)(A,{appearance:"primary",onClick:()=>{n.loadFromConnectionString(i)},children:o.common.load}),(0,z.jsx)(A,{appearance:"secondary",onClick:()=>{n.closeDialog()},children:o.common.cancel})]})]})})})};var Ie=r(R());var Qe=(i=>(i.SqlDatabase="SQLDatabase",i.SqlAnalyticsEndpoint="SQLEndpoint",i))(Qe||{});var ue=r(R());var ye=r(R());var P=r(C()),gn=({onSignIntoMicrosoftAccount:e,onSelectAccountId:n,onSelectTenantId:i,onSearchValueChanged:t,searchValue:s="",selectedTypeFilters:a=[],azureAccounts:f=[],selectedAccountId:c="",azureTenants:g=[],selectedTenantId:y="",azureTenantsLoadStatus:h="notStarted"})=>{let m=mn(),[d,N]=(0,ye.useState)(""),[w,O]=(0,ye.useState)("");(0,ye.useEffect)(()=>{if(c){let S=f.find(b=>b.id===c);S&&K({},{optionText:S.name,optionValue:S.id,selectedOptions:[S.id]})}},[c]),(0,ye.useEffect)(()=>{if(y){let S=g.find(b=>b.id===y);S&&$({},{optionText:S.name,optionValue:S.id,selectedOptions:[S.id]})}},[y]);function K(S,b){if(b.optionValue===Ze){e();return}let te=b.optionText||"",se=b.optionValue||"";N(te),n(se)}function $(S,b){let te=b.optionText||"",se=b.optionValue||"";O(te),i(se)}function E(S,b){t(S),b?.stopPropagation()}return(0,P.jsxs)("div",{className:m.headerContainer,children:[(0,P.jsxs)("div",{className:m.dropdownContainer,children:[(0,P.jsxs)("div",{className:m.dropdownGroup,children:[(0,P.jsx)(q,{className:m.dropdownLabel,children:o.connectionDialog.account}),(0,P.jsxs)(oo,{className:m.compactDropdown,value:d,selectedOptions:c?[c]:[],onOptionSelect:K,placeholder:o.connectionDialog.selectAnAccount,size:"small",children:[(0,P.jsx)(Pe,{text:o.fabric.addFabricAccount,value:Ze,children:o.azure.addAzureAccount},Ze),f.map(S=>(0,P.jsx)(Pe,{value:S.id,text:S.name,children:S.name},S.id))]})]}),(0,P.jsxs)("div",{className:m.dropdownGroup,children:[(0,P.jsx)(q,{className:m.dropdownLabel,children:o.azure.tenant}),(0,P.jsx)(oo,{className:m.compactDropdown,value:h==="loading"?void 0:w,selectedOptions:y?[y]:[],onOptionSelect:$,placeholder:h==="loading"?o.azure.loadingTenants:o.azure.selectATenant,disabled:h==="loading",size:"small",children:g.map(S=>(0,P.jsx)(Pe,{value:S.id,text:S.name,children:S.name},S.id))})]})]}),(0,P.jsx)("div",{className:m.searchAndFilterSection,children:(0,P.jsx)(Re,{className:m.inputSection,placeholder:o.connectionDialog.filterByKeyword,contentBefore:(0,P.jsx)(Me,{"aria-label":o.connectionDialog.filterByKeyword}),contentAfter:s?(0,P.jsx)(fe,{style:{cursor:"pointer"},onClick:S=>E("",S),onKeyDown:S=>{S.key==="Enter"&&E("",S)},"aria-label":o.common.clear,title:o.common.clear,role:"button",tabIndex:s?0:-1}):void 0,onChange:(S,b)=>E(b.value,S),value:s})})]})},Lt=gn,mn=G({headerContainer:{display:"flex",flexDirection:"row",alignItems:"flex-end",padding:"8px",minWidth:0},dropdownContainer:{display:"flex",flexDirection:"row",gap:"12px",alignItems:"flex-start",flexShrink:0},dropdownGroup:{display:"flex",flexDirection:"column",width:"200px",flexShrink:0},dropdownLabel:{fontSize:"12px",marginBottom:"4px",display:"block"},compactDropdown:{width:"200px",minWidth:"200px",fontSize:"12px","& .fui-Dropdown__button":{fontSize:"12px",minHeight:"24px",padding:"4px 8px"},"& .fui-Option":{fontSize:"12px",minHeight:"24px"}},inputSection:{flex:1,minWidth:0,width:"100%",fontSize:"12px"},searchAndFilterSection:{display:"flex",flexDirection:"row",alignItems:"center",flex:1,minWidth:0,marginLeft:"8px"}});var we=r(R());var pe=G({workspaceExplorer:{display:"flex",height:"400px",width:"100%",gap:"10px",overflow:"hidden"},workspaceList:{display:"flex",flexDirection:"column",width:"250px",minWidth:"250px",height:"100%",overflow:"hidden",borderRight:"1px solid var(--vscode-panel-border)",backgroundColor:"var(--vscode-sideBar-background)"},workspaceListCollapsed:{display:"flex",flexDirection:"column",width:"36px",minWidth:"36px",overflow:"visible",justifyContent:"flex-start",alignItems:"center",borderRight:"1px solid var(--vscode-panel-border)",backgroundColor:"var(--vscode-sideBar-background)"},workspaceContentList:{flexGrow:1,overflow:"auto",height:"100%",display:"flex",flexDirection:"column"},workspaceTitle:{fontSize:"13px",fontWeight:"600",marginBottom:"8px",paddingLeft:"8px",paddingTop:"4px",paddingRight:"4px",flexShrink:0},workspaceListContainer:{flexGrow:1,overflow:"auto",paddingLeft:"4px",paddingRight:"4px"},workspaceHeader:{flexShrink:0,padding:"8px",gap:"8px",display:"flex",alignItems:"center"},workspaceSearchBox:{marginTop:"4px",marginBottom:"8px",paddingLeft:"4px",paddingRight:"4px"},workspaceItem:{...Ne.padding("4px","8px","4px","24px"),cursor:"pointer",borderRadius:"2px",marginBottom:"1px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:"13px",height:"24px",lineHeight:"24px",position:"relative","&:hover":{backgroundColor:"var(--vscode-list-hoverBackground)"}},workspaceItemSelected:{backgroundColor:"var(--vscode-list-activeSelectionBackground)",color:"var(--vscode-list-activeSelectionForeground)",fontWeight:"600","@media (forced-colors:active)":{background:"Highlight",color:"HighlightText"},"&:hover":{backgroundColor:"var(--vscode-list-activeSelectionBackground)"}},collapseButton:{width:"calc(100% - 5px)",height:"24px",marginBottom:"8px",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingLeft:"5px"},collapseButtonIcon:{fontSize:"12px"},collapseWorkspaceListButton:{width:"24px",height:"24px",display:"flex",justifyContent:"center",alignItems:"center"},headerRow:{backgroundColor:"var(--vscode-editor-inactiveSelectionBackground)",height:"22px",minHeight:"22px",maxHeight:"22px"},tableRow:{height:"22px",minHeight:"22px",maxHeight:"22px",cursor:"pointer","&:hover":{backgroundColor:"var(--vscode-list-hoverBackground)"},"&:nth-child(odd)":{backgroundColor:"rgba(0, 0, 0, 0.1)"}},selectedDataGridRow:{backgroundColor:"var(--vscode-list-activeSelectionBackground)",color:"var(--vscode-list-activeSelectionForeground)","&:hover":{backgroundColor:"var(--vscode-list-activeSelectionBackground)"}},workspaceListMessageContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"absolute",top:0,left:0,right:0,bottom:0,padding:"16px"},workspaceContentMessageContainer:{padding:"16px",color:"var(--vscode-descriptionForeground)",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",flexDirection:"column",textAlign:"center",minHeight:"0",flex:"1 1 auto"},iconContainer:{width:"16px",height:"16px",marginRight:"8px",flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center"},errorIcon:{width:"20px",height:"20px",marginBottom:"8px",flexShrink:0},workspaceExplorerMessage:{padding:"8px",color:"var(--vscode-descriptionForeground)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"8px",textAlign:"center",minHeight:"60px"},messageText:{textAlign:"center",maxWidth:"100%",wordWrap:"break-word",overflowWrap:"break-word"},hideTextOverflowCell:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},filterIcon:{width:"12px",height:"12px"}});var uo=r(C()),zt=()=>(0,uo.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",children:(0,uo.jsx)("path",{d:"M0,1.53H16V3.24l-6,6v6.27H6V9.22l-6-6ZM15,2.82V2.53H1v.29l6,6v5.69H9V8.8Z"})});var l=r(C()),Pt=({onSelectDatabase:e,fabricWorkspacesLoadStatus:n,selectedWorkspace:i,searchFilter:t="",theme:s})=>{let a=pe(),[f,c]=(0,we.useState)(void 0),[g,y]=(0,we.useState)(Te.ShowAll),h=(0,we.useMemo)(()=>{if(!i?.databases)return[];let u=[];if(i?.databases&&i.databases.length>0&&i.databases.forEach(k=>{u.push({...k,typeDisplayName:fo(k.type)})}),g!==Te.ShowAll&&(u=u.filter(k=>k.type===g)),t.trim()){let k=t.toLowerCase();u=u.filter(ne=>ne.displayName.toLowerCase().includes(k)||ne.typeDisplayName.toLowerCase().includes(k))}return u},[i?.id,i?.loadStatus,t,g]),m=(0,we.useMemo)(()=>[to({columnId:"name",compare:(u,k)=>u.displayName.localeCompare(k.displayName),renderHeaderCell:()=>`${o.connectionDialog.nameColumnHeader}`,renderCell:u=>(0,l.jsx)(no,{children:(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"100%",minWidth:0},children:[(0,l.jsx)("img",{src:Xe(u.type,s),alt:u.typeDisplayName,style:{width:"20px",height:"20px",marginRight:"8px",flexShrink:0}}),(0,l.jsx)(M,{truncate:!0,className:a.hideTextOverflowCell,children:u.displayName})]})})}),to({columnId:"type",compare:(u,k)=>u.typeDisplayName.localeCompare(k.typeDisplayName),renderHeaderCell:()=>(0,l.jsxs)("div",{children:[o.connectionDialog.typeColumnHeader,(0,l.jsxs)(Mo,{children:[(0,l.jsx)(Go,{children:(0,l.jsx)(ce,{content:o.connectionDialog.filterByType,relationship:"label",children:(0,l.jsx)(Bo,{icon:(0,l.jsx)(zt,{}),appearance:"transparent",onClick:u=>u.stopPropagation()})})}),(0,l.jsx)(Ro,{onClick:u=>u.stopPropagation(),children:(0,l.jsxs)(Po,{checkedValues:{sqlType:[g]},onCheckedValueChange:N,children:[(0,l.jsx)(Ge,{name:"sqlType",value:Te.ShowAll,children:o.connectionDialog.showAll}),(0,l.jsx)(Ge,{name:"sqlType",value:Te.SqlDatabase,children:o.connectionDialog.sqlDatabase}),(0,l.jsx)(Ge,{name:"sqlType",value:Te.SqlAnalyticsEndpoint,children:o.connectionDialog.sqlAnalyticsEndpoint})]})})]})]}),renderCell:u=>(0,l.jsx)(no,{children:(0,l.jsx)(M,{truncate:!0,className:a.hideTextOverflowCell,children:u.typeDisplayName})})})],[s,g]);function d(u){c(u.id),e(u)}function N(u,k){y(k.checkedItems[0])}let w=()=>{if(n.status!=="notStarted"){if(n.status==="loading")return O();if(n.status==="error")return K();if(n.status==="loaded"&&!i)return $(n.message);if(!(!i||i.loadStatus.status==="notStarted"))return i.loadStatus.status==="loading"?E():i.loadStatus.status==="error"?S():i.loadStatus.status==="loaded"?i.databases.length===0?b():te():(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(q,{children:"Unexpected state:"}),(0,l.jsxs)(q,{children:["FabricWorkspaceLoadStatus: ",n.status]}),(0,l.jsxs)(q,{children:["SelectedWorkspace: ",i?.id]}),(0,l.jsxs)(q,{children:["SelectedWorkspace.Status: ",i?.loadStatus.status]}),(0,l.jsxs)(q,{children:["SelectedWorkspace.Databases: ",i?.databases.length]})]})}},O=()=>(0,l.jsxs)("div",{className:a.workspaceContentMessageContainer,role:"status","aria-live":"polite",children:[(0,l.jsx)(W,{size:"medium"}),(0,l.jsx)(M,{className:a.messageText,children:o.connectionDialog.loadingWorkspaces})]}),K=()=>(0,l.jsxs)("div",{className:a.workspaceContentMessageContainer,role:"alert","aria-live":"polite",children:[(0,l.jsx)(ge,{className:a.errorIcon}),(0,l.jsx)(M,{className:a.messageText,children:n.message||o.connectionDialog.errorLoadingWorkspaces})]}),$=u=>(0,l.jsx)("div",{className:a.workspaceContentMessageContainer,role:"alert","aria-live":"polite",children:u||o.connectionDialog.selectAWorkspaceToViewDatabases}),E=()=>(0,l.jsxs)("div",{className:a.workspaceContentMessageContainer,role:"status","aria-live":"polite",children:[(0,l.jsx)(W,{size:"medium"}),(0,l.jsx)(M,{className:a.messageText,children:o.connectionDialog.loadingDatabasesInWorkspace(i?.displayName)})]}),S=()=>(0,l.jsxs)("div",{className:a.workspaceContentMessageContainer,role:"alert","aria-live":"polite",children:[(0,l.jsx)(ge,{className:a.errorIcon}),(0,l.jsx)(M,{className:a.messageText,children:i.loadStatus.message||o.connectionDialog.errorLoadingDatabases})]}),b=()=>(0,l.jsx)("div",{className:a.workspaceContentMessageContainer,role:"alert","aria-live":"polite",children:o.connectionDialog.noDatabasesFoundInWorkspace(i?.displayName)}),te=()=>(0,l.jsxs)(pt,{items:h,columns:m,getRowId:u=>u.id,size:"small",focusMode:"composite",resizableColumns:!0,columnSizingOptions:xn,sortable:!0,style:{flexGrow:1,height:"100%",width:"100%",minWidth:0,overflow:"hidden"},children:[(0,l.jsx)(Vo,{children:(0,l.jsx)(io,{children:({renderHeaderCell:u})=>(0,l.jsx)(Oo,{children:u()})})}),(0,l.jsx)(dt,{itemSize:30,height:360,width:"100%",children:se})]});function se({item:u,rowId:k},ne){return(0,l.jsx)(io,{className:f===u.id?a.selectedDataGridRow:void 0,style:ne,onClick:()=>{d(u)},onKeyDown:le=>{(le.key==="Enter"||le.key===" ")&&(d(u),le.preventDefault())},children:({renderCell:le})=>(0,l.jsx)(l.Fragment,{children:le(u)})},k)}function Xe(u,k){switch(u){case"SQLDatabase":return J(k);case"SQLEndpoint":return Ye(k);default:return console.error(`Unknown artifact type for getItemIcon(): ${u}`),J(k)}}function J(u){return ve(u)==="dark"?Tt():Bt()}function Ye(u){return ve(u)==="dark"?Nt():Mt()}return(0,l.jsx)("div",{className:a.workspaceContentList,children:w()})};function fo(e){switch(e){case"SQLDatabase":return o.connectionDialog.sqlDatabase;case"SQLEndpoint":return o.connectionDialog.sqlAnalyticsEndpoint;default:return console.error(`Unknown artifact type for getTypeDisplayName(): ${e}`),e}}var Te={ShowAll:"ShowAll",...Qe},xn={name:{minWidth:80,defaultWidth:120},type:{minWidth:80,defaultWidth:110}};var j=r(R());var x=r(C()),Rt=({workspaces:e,onSelectWorkspace:n,selectedWorkspace:i,fabricWorkspacesLoadStatus:t})=>{let s=pe(),[a,f]=(0,j.useState)(!1),c=i?[i.id]:[],g=()=>{f(!a)},[y,h]=(0,j.useState)("");function m(w){h(""),w?.stopPropagation()}let d=(0,j.useMemo)(()=>{if(!y.trim())return e;let w=y.toLowerCase();return e.filter(O=>O.displayName.toLowerCase().includes(w))},[e,y]);(0,j.useEffect)(()=>{t.status==="loaded"&&e.length>0&&!i&&n(e[0])},[e,i,t.status,n]);let N=(0,j.useCallback)((w,O)=>{if(O.selectedItems.length>0){let K=O.selectedItems[0],$=e.find(E=>E.id===K);$&&n($)}},[e,n]);return(0,x.jsxs)("div",{className:a?s.workspaceListCollapsed:s.workspaceList,children:[(0,x.jsxs)("div",{className:s.workspaceHeader,children:[!a&&(0,x.jsx)(Re,{placeholder:o.connectionDialog.searchWorkspaces,value:y,onChange:w=>h(w.target.value),contentBefore:(0,x.jsx)(Me,{}),contentAfter:(0,x.jsx)(fe,{style:{cursor:"pointer",visibility:y?"visible":"hidden"},onClick:m,onKeyDown:w=>{w.key==="Enter"&&m(w)},"aria-label":o.common.clear,title:o.common.clear,role:"button",tabIndex:y?0:-1}),size:"small",style:{flex:1}}),(0,x.jsx)(A,{appearance:"subtle",size:"small",icon:a?(0,x.jsx)(yo,{className:s.collapseButtonIcon}):(0,x.jsx)(bo,{className:s.collapseButtonIcon}),onClick:g,onKeyDown:w=>{(w.key==="Enter"||w.key===" ")&&(g(),w.preventDefault())},"aria-label":a?o.connectionDialog.expandWorkspaceExplorer:o.connectionDialog.collapseWorkspaceExplorer,title:a?o.connectionDialog.expandWorkspaceExplorer:o.connectionDialog.collapseWorkspaceExplorer,className:s.collapseWorkspaceListButton})]}),!a&&(0,x.jsxs)("div",{className:s.workspaceListContainer,style:{position:"relative"},children:[t.status==="loading"&&(0,x.jsxs)("div",{className:s.workspaceListMessageContainer,children:[(0,x.jsx)(W,{size:"medium"}),(0,x.jsx)(M,{className:s.messageText,children:o.connectionDialog.loadingWorkspaces})]}),t.status==="error"&&(0,x.jsxs)("div",{className:s.workspaceListMessageContainer,children:[(0,x.jsx)(ce,{content:t.message||o.connectionDialog.errorLoadingWorkspaces,relationship:"label",children:(0,x.jsx)(ge,{className:s.errorIcon})}),(0,x.jsx)(M,{className:s.messageText,children:o.connectionDialog.errorLoadingWorkspaces})]}),t.status==="loaded"&&(0,x.jsxs)(x.Fragment,{children:[!d||d.length===0&&(0,x.jsx)("div",{className:s.workspaceListMessageContainer,children:(0,x.jsx)(M,{className:s.messageText,children:o.connectionDialog.noWorkspacesFound})}),d.length>0&&(0,x.jsx)(jo,{role:"listbox","aria-label":o.connectionDialog.fabricWorkspaces,selectionMode:"single",navigationMode:"composite",selectedItems:c,onSelectionChange:N,children:d.map(w=>(0,x.jsx)(Dn,{workspace:w,isSelected:c.includes(w.id)},w.id))})]})]})]})},Dn=({workspace:e,isSelected:n})=>{let i=pe();return(0,x.jsx)(et,{value:e.id,className:So(i.workspaceItem,n&&i.workspaceItemSelected),"aria-label":e.displayName,title:e.displayName,checkmark:null,children:(0,x.jsxs)("div",{style:{display:"flex",alignItems:"center",minHeight:"20px"},children:[(0,x.jsxs)("div",{className:i.iconContainer,children:[e.loadStatus.status==="error"&&(0,x.jsx)(ce,{content:e.loadStatus.message??"",relationship:"label",children:(0,x.jsx)(ge,{style:{width:"100%",height:"100%"}})}),e.loadStatus.status==="loading"&&(0,x.jsx)(W,{size:"extra-tiny",style:{width:"100%",height:"100%"}}),(e.loadStatus.status==="loaded"||e.loadStatus.status==="notStarted")&&(0,x.jsx)(wo,{style:{width:"100%",height:"100%"}})]}),(0,x.jsx)(M,{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1},children:e.displayName})]})},e.id)};var ee=r(C()),Gt=({fabricWorkspaces:e,fabricWorkspacesLoadStatus:n,onSignIntoMicrosoftAccount:i,onSelectAccountId:t,onSelectTenantId:s,onSelectWorkspace:a,onSelectDatabase:f})=>{let c=(0,ue.useContext)(L);if(c===void 0)return;let g=pe(),[y,h]=(0,ue.useState)(""),[m,d]=(0,ue.useState)(void 0),N=(0,ue.useMemo)(()=>{if(!(e.length===0||!m))return e.find(b=>b.id===m)},[e,m]);function w(){i()}function O(b){t(b)}function K(b){s(b)}function $(b){d(b.id),a(b)}function E(b){f(b)}function S(b){h(b)}return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(Lt,{searchValue:y,azureAccounts:c.state.azureAccounts,azureTenants:c.state.azureTenants,selectedAccountId:c.state.selectedAccountId,selectedTenantId:c.state.selectedTenantId,azureTenantsLoadStatus:c.state.loadingAzureTenantsStatus,onSignIntoMicrosoftAccount:w,onSelectAccountId:O,onSelectTenantId:K,onSearchValueChanged:S}),(0,ee.jsxs)("div",{className:g.workspaceExplorer,children:[(0,ee.jsx)(Rt,{workspaces:e,selectedWorkspace:N,fabricWorkspacesLoadStatus:n,onSelectWorkspace:$}),(0,ee.jsx)(Pt,{fabricWorkspacesLoadStatus:c.state.fabricWorkspacesLoadStatus,selectedWorkspace:N,searchFilter:y,onSelectDatabase:E,theme:c.themeKind})]})]})};var B=r(C()),Vt=()=>{let e=(0,Ie.useContext)(L);if(e===void 0)return;let n=yn(),i=X(),[t,s]=(0,Ie.useState)(!1);(0,Ie.useEffect)(()=>{if(e.state.loadingAzureAccountsStatus==="loaded"&&e.state.azureAccounts&&!e.state.selectedAccountId){let d=e.state.azureAccounts[0];d&&e.selectAzureAccount(d.id)}},[e.state.loadingAzureAccountsStatus,e.state.azureAccounts]);function a(d,N){e.formAction({propertyName:d,value:N,isAction:!1})}function f(){e?.signIntoAzureForBrowse("fabricBrowse")}function c(d){e.selectAzureAccount(d)}function g(d){e.selectAzureTenant(d)}function y(d){e.selectFabricWorkspace(d.id)}async function h(d){switch(d.type){case"SQLEndpoint":{let N=await e.getSqlAnalyticsEndpointUriFromFabric(d);a("server",N),a("profileName",Ht(d)),a("authenticationType","AzureMFA");return}case"SQLDatabase":a("server",d.server),a("database",d.database),a("profileName",Ht(d)),a("authenticationType","AzureMFA");return;default:e.log("Unknown server type selected.","error")}}let m=(e.state.azureAccounts?.length??0)>0;return(0,B.jsxs)("div",{children:[(0,B.jsx)(ht,{loadAccountStatus:e.state.loadingAzureAccountsStatus,hasAccounts:m,brandImageSource:wn(),signInText:o.connectionDialog.signIntoFabricToBrowse,linkText:o.connectionDialog.signIntoFabric,loadingText:o.connectionDialog.loadingFabricAccounts,onSignInClick:()=>{e.signIntoAzureForBrowse("fabricBrowse")}}),e.state.loadingAzureAccountsStatus==="loaded"&&m&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("div",{className:n.componentGroupHeader,children:(0,B.jsx)(q,{children:o.connectionDialog.fabricWorkspaces})}),(0,B.jsx)("div",{className:n.componentGroupContainer,children:(0,B.jsx)(Gt,{fabricWorkspaces:e.state.fabricWorkspaces,fabricWorkspacesLoadStatus:e.state.fabricWorkspacesLoadStatus,onSignIntoMicrosoftAccount:f,onSelectAccountId:c,onSelectTenantId:g,onSelectWorkspace:y,onSelectDatabase:h})}),e.state.formState.server&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("div",{className:n.componentGroupHeader,style:{marginTop:"16px"},children:(0,B.jsx)(q,{children:o.connectionDialog.connectionAuthentication})}),(0,B.jsx)("div",{className:n.componentGroupContainer,children:e.state.connectionComponents.mainOptions.filter(d=>In.includes(d)).map((d,N)=>{let w=e.state.formComponents[d];if(w?.hidden===!1)return(0,B.jsx)(Z,{context:e,component:w,idx:N,props:{orientation:"horizontal"},componentProps:{disabled:d==="authenticationType"}},N)})})]}),(0,B.jsx)(he,{isAdvancedDrawerOpen:t,setIsAdvancedDrawerOpen:s}),(0,B.jsxs)("div",{className:i.formNavTray,children:[(0,B.jsx)(A,{onClick:d=>{s(!t)},className:i.formNavTrayButton,children:o.connectionDialog.advancedSettings}),(0,B.jsx)("div",{className:i.formNavTrayRight,children:(0,B.jsx)(Se,{className:i.formNavTrayButton})})]})]})]})},yn=G({icon:{width:"75px",height:"75px",marginBottom:"10px"},signInLink:{marginTop:"8px"},formRow:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},componentGroupHeader:{marginBottom:"8px"},componentGroupContainer:{padding:"8px",border:"0.5px solid var(--vscode-editorWidget-border)",borderRadius:"2px"}}),wn=()=>Et(),In=["authenticationType","accountId","tenantId"];function Ht(e){return`${e.displayName} (${fo(e.type)})`}var D=r(C());function Ln(e){switch(e?.state.selectedInputMode){case"parameters":return(0,D.jsx)(yt,{});case"azureBrowse":return(0,D.jsx)(bt,{});case"fabricBrowse":return(0,D.jsx)(Vt,{})}}var zn=G({inputLink:{display:"flex",alignItems:"center"}}),Kt=()=>{let e=(0,Zt.useContext)(L),n=X(),i=zn();function t(f){return ve(f)==="dark"?Ot():Wt()}function s(f){return ve(f)==="dark"?Ut():qt()}function a(f){f.preventDefault(),e.connect()}return(0,D.jsxs)("form",{onSubmit:a,className:n.formRoot,children:[(0,D.jsx)(Ft,{}),(0,D.jsxs)("div",{className:n.formDiv,style:{overflow:"auto"},children:[e.state.formError&&(0,D.jsxs)(Ce,{intent:"error",style:{minHeight:"min-content"},children:[(0,D.jsx)(Ko,{style:{padding:"8px 0"},children:e.state.formError}),(0,D.jsx)(Zo,{containerAction:(0,D.jsx)(A,{onClick:e.closeMessage,"aria-label":o.common.dismiss,appearance:"transparent",icon:(0,D.jsx)(fe,{})})})]}),e.state.dialog?.type==="trustServerCert"&&(0,D.jsx)(kt,{dialogProps:e.state.dialog}),e.state.dialog?.type==="addFirewallRule"&&(0,D.jsx)(at,{state:e.state.dialog.props,addFirewallRule:e.addFirewallRule,closeDialog:e.closeDialog,signIntoAzure:e.signIntoAzureForFirewallRule}),e.state.dialog?.type==="loadFromConnectionString"&&(0,D.jsx)(_t,{dialogProps:e.state.dialog}),e.state.dialog?.type==="createConnectionGroup"&&(0,D.jsx)(ct,{state:e.state.dialog.props,saveConnectionGroup:e.createConnectionGroup,closeDialog:e.closeDialog}),(0,D.jsx)(Z,{context:e,component:e.state.formComponents.profileName,idx:0,props:{orientation:"horizontal"}}),(0,D.jsx)(Z,{context:e,component:e.state.formComponents.groupId,idx:0,props:{orientation:"horizontal"},componentProps:{onSelect:f=>{f.value===st?e.openCreateConnectionGroupDialog():e.formAction({propertyName:"groupId",isAction:!1,value:f.value})}}}),(0,D.jsx)("div",{className:n.formComponentDiv,children:(0,D.jsx)(me,{label:"Input type",orientation:"horizontal",children:(0,D.jsxs)(Eo,{onChange:(f,c)=>{e.setConnectionInputType(c.value)},value:e.state.selectedInputMode,children:[(0,D.jsx)(Ee,{value:"parameters",label:(0,D.jsxs)("div",{className:i.inputLink,children:[(0,D.jsx)(Lo,{style:{marginRight:"8px"}}),o.connectionDialog.parameters,(0,D.jsx)("span",{style:{margin:"0 8px"}}),(0,D.jsx)(ie,{onClick:()=>{e.openConnectionStringDialog()},inline:!0,children:o.connectionDialog.loadFromConnectionString})]})}),(0,D.jsx)(Ee,{value:"azureBrowse",label:(0,D.jsxs)("div",{className:i.inputLink,children:[(0,D.jsx)(Ae,{src:t(e.themeKind),alt:"Azure",height:20,width:20,style:{marginRight:"8px"}}),o.connectionDialog.browseAzure]})}),(0,D.jsx)(Ee,{value:"fabricBrowse",label:(0,D.jsxs)("div",{className:i.inputLink,children:[(0,D.jsx)(Ae,{src:s(e.themeKind),alt:"Fabric",height:20,width:20,style:{marginRight:"8px"}}),o.connectionDialog.browseFabric]})})]})})}),Ln(e)]})]})};var oe=r(C()),Tn=G({root:{flexDirection:"row",display:"flex",height:"100%",width:"100%",maxWidth:"100%",maxHeight:"100%"},mainContainer:{...Ne.flex(1),height:"100%"},mruContainer:{position:"relative",height:"100%",width:"325px",padding:"20px"},mruPaneHandle:{position:"absolute",top:"0",left:"0",width:"10px",height:"100%",cursor:"ew-resize",zIndex:1}}),Qt=()=>{let e=Tn();return(0,oe.jsxs)("div",{className:e.root,children:[(0,oe.jsx)("div",{className:e.mainContainer,children:(0,oe.jsx)(Kt,{})}),(0,oe.jsx)(No,{style:{width:"5px",height:"100%",flex:0},vertical:!0}),(0,oe.jsx)($t.ResizableBox,{className:e.mruContainer,width:350,height:1/0,maxConstraints:[800,1/0],minConstraints:[300,1/0],resizeHandles:["w"],handle:(0,oe.jsx)("div",{className:e.mruPaneHandle}),children:(0,oe.jsx)(vt,{})})]})};var Je=r(C());Jt.default.createRoot(document.getElementById("root")).render((0,Je.jsx)(tt,{children:(0,Je.jsx)(ft,{children:(0,Je.jsx)(Qt,{})})}));

/*
 * wallaby-core
 * https://wallabyjs.com
 * Copyright (c) 2014-2025 Wallaby.js - All Rights Reserved.
 *
 * This source code file is a part of wallaby-core and is a proprietary (closed source) software.

 * IMPORTANT:
 * Wallaby.js is a tool made by software developers for software developers with passion and love for what we do.
 * Pirating the tool is not only illegal and just morally wrong,
 * it is also unfair to other fellow programmers who are using it legally,
 * and very harmful for the tool and its future.
 */
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();const Eae="modulepreload",Nae=function(n,e){return new URL(n,e).href},$O={},Oa=function(e,t,i){let s=Promise.resolve();if(t&&t.length>0){const r=document.getElementsByTagName("link");s=Promise.all(t.map(o=>{if(o=Nae(o,i),o in $O)return;$O[o]=!0;const a=o.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!i)for(let u=r.length-1;u>=0;u--){const h=r[u];if(h.href===o&&(!a||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const d=document.createElement("link");if(d.rel=a?"stylesheet":Eae,a||(d.as="script",d.crossOrigin=""),d.href=o,document.head.appendChild(d),a)return new Promise((u,h)=>{d.addEventListener("load",u),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${o}`)))})}))}return s.then(()=>e()).catch(r=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=r,window.dispatchEvent(o),!o.defaultPrevented)throw r})},Rae=(n,e)=>n===e,gr=Symbol("solid-proxy"),mg=Symbol("solid-track"),dC={equals:Rae};let DJ=NJ;const tu=1,uC=2,IJ={owned:null,cleanups:null,context:null,owner:null};var tn=null;let FT=null,Wae=null,Nn=null,Yr=null,Ad=null,Ak=0;function Kr(n,e){const t=Nn,i=tn,s=n.length===0,r=e===void 0?i:e,o=s?IJ:{owned:null,cleanups:null,context:r?r.context:null,owner:r},a=s?n:()=>n(()=>Qn(()=>Zk(o)));tn=o,Nn=null;try{return Uh(a,!0)}finally{Nn=t,tn=i}}function he(n,e){e=e?Object.assign({},dC,e):dC;const t={value:n,observers:null,observerSlots:null,comparator:e.equals||void 0},i=s=>(typeof s=="function"&&(s=s(t.value)),EJ(t,s));return[MJ.bind(t),i]}function wS(n,e,t){const i=Ok(n,e,!0,tu);Qb(i)}function Me(n,e,t){const i=Ok(n,e,!1,tu);Qb(i)}function Fi(n,e,t){DJ=Pae;const i=Ok(n,e,!1,tu);(!t||!t.render)&&(i.user=!0),Ad?Ad.push(i):Qb(i)}function J(n,e,t){t=t?Object.assign({},dC,t):dC;const i=Ok(n,e,!0,0);return i.observers=null,i.observerSlots=null,i.comparator=t.equals||void 0,Qb(i),MJ.bind(i)}function lh(n){return Uh(n,!1)}function Qn(n){if(Nn===null)return n();const e=Nn;Nn=null;try{return n()}finally{Nn=e}}function go(n,e,t){const i=Array.isArray(n);let s,r=t&&t.defer;return o=>{let a;if(i){a=Array(n.length);for(let c=0;c<n.length;c++)a[c]=n[c]()}else a=n();if(r){r=!1;return}const l=Qn(()=>e(a,s,o));return s=a,l}}function Bn(n){Fi(()=>Qn(n))}function Ot(n){return tn===null||(tn.cleanups===null?tn.cleanups=[n]:tn.cleanups.push(n)),n}function C_(){return Nn}function Zo(){return tn}function tg(n,e){const t=tn,i=Nn;tn=n,Nn=null;try{return Uh(e,!0)}catch(s){XF(s)}finally{tn=t,Nn=i}}function Aae(n){const e=Nn,t=tn;return Promise.resolve().then(()=>{Nn=e,tn=t;let i;return Uh(n,!1),Nn=tn=null,i?i.done:void 0})}function Fk(n,e){const t=Symbol("context");return{id:t,Provider:Zae(t),defaultValue:n}}function Vk(n){return tn&&tn.context&&tn.context[n.id]!==void 0?tn.context[n.id]:n.defaultValue}function Pk(n){const e=J(n),t=J(()=>i9(e()));return t.toArray=()=>{const i=t();return Array.isArray(i)?i:i!=null?[i]:[]},t}function MJ(){if(this.sources&&this.state)if(this.state===tu)Qb(this);else{const n=Yr;Yr=null,Uh(()=>fC(this),!1),Yr=n}if(Nn){const n=this.observers?this.observers.length:0;Nn.sources?(Nn.sources.push(this),Nn.sourceSlots.push(n)):(Nn.sources=[this],Nn.sourceSlots=[n]),this.observers?(this.observers.push(Nn),this.observerSlots.push(Nn.sources.length-1)):(this.observers=[Nn],this.observerSlots=[Nn.sources.length-1])}return this.value}function EJ(n,e,t){let i=n.value;return(!n.comparator||!n.comparator(i,e))&&(n.value=e,n.observers&&n.observers.length&&Uh(()=>{for(let s=0;s<n.observers.length;s+=1){const r=n.observers[s],o=FT&&FT.running;o&&FT.disposed.has(r),(o?!r.tState:!r.state)&&(r.pure?Yr.push(r):Ad.push(r),r.observers&&RJ(r)),o||(r.state=tu)}if(Yr.length>1e6)throw Yr=[],new Error},!1)),e}function Qb(n){if(!n.fn)return;Zk(n);const e=Ak;Fae(n,n.value,e)}function Fae(n,e,t){let i;const s=tn,r=Nn;Nn=tn=n;try{i=n.fn(e)}catch(o){return n.pure&&(n.state=tu,n.owned&&n.owned.forEach(Zk),n.owned=null),n.updatedAt=t+1,XF(o)}finally{Nn=r,tn=s}(!n.updatedAt||n.updatedAt<=t)&&(n.updatedAt!=null&&"observers"in n?EJ(n,i):n.value=i,n.updatedAt=t)}function Ok(n,e,t,i=tu,s){const r={fn:n,state:i,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:tn,context:tn?tn.context:null,pure:t};return tn===null||tn!==IJ&&(tn.owned?tn.owned.push(r):tn.owned=[r]),r}function hC(n){if(n.state===0)return;if(n.state===uC)return fC(n);if(n.suspense&&Qn(n.suspense.inFallback))return n.suspense.effects.push(n);const e=[n];for(;(n=n.owner)&&(!n.updatedAt||n.updatedAt<Ak);)n.state&&e.push(n);for(let t=e.length-1;t>=0;t--)if(n=e[t],n.state===tu)Qb(n);else if(n.state===uC){const i=Yr;Yr=null,Uh(()=>fC(n,e[0]),!1),Yr=i}}function Uh(n,e){if(Yr)return n();let t=!1;e||(Yr=[]),Ad?t=!0:Ad=[],Ak++;try{const i=n();return Vae(t),i}catch(i){t||(Ad=null),Yr=null,XF(i)}}function Vae(n){if(Yr&&(NJ(Yr),Yr=null),n)return;const e=Ad;Ad=null,e.length&&Uh(()=>DJ(e),!1)}function NJ(n){for(let e=0;e<n.length;e++)hC(n[e])}function Pae(n){let e,t=0;for(e=0;e<n.length;e++){const i=n[e];i.user?n[t++]=i:hC(i)}for(e=0;e<t;e++)hC(n[e])}function fC(n,e){n.state=0;for(let t=0;t<n.sources.length;t+=1){const i=n.sources[t];if(i.sources){const s=i.state;s===tu?i!==e&&(!i.updatedAt||i.updatedAt<Ak)&&hC(i):s===uC&&fC(i,e)}}}function RJ(n){for(let e=0;e<n.observers.length;e+=1){const t=n.observers[e];t.state||(t.state=uC,t.pure?Yr.push(t):Ad.push(t),t.observers&&RJ(t))}}function Zk(n){let e;if(n.sources)for(;n.sources.length;){const t=n.sources.pop(),i=n.sourceSlots.pop(),s=t.observers;if(s&&s.length){const r=s.pop(),o=t.observerSlots.pop();i<s.length&&(r.sourceSlots[o]=i,s[i]=r,t.observerSlots[i]=o)}}if(n.owned){for(e=n.owned.length-1;e>=0;e--)Zk(n.owned[e]);n.owned=null}if(n.cleanups){for(e=n.cleanups.length-1;e>=0;e--)n.cleanups[e]();n.cleanups=null}n.state=0}function Oae(n){return n instanceof Error?n:new Error(typeof n=="string"?n:"Unknown error",{cause:n})}function XF(n,e=tn){throw Oae(n)}function i9(n){if(typeof n=="function"&&!n.length)return i9(n());if(Array.isArray(n)){const e=[];for(let t=0;t<n.length;t++){const i=i9(n[t]);Array.isArray(i)?e.push.apply(e,i):e.push(i)}return e}return n}function Zae(n,e){return function(i){let s;return Me(()=>s=Qn(()=>(tn.context={...tn.context,[n]:i.value},Pk(()=>i.children))),void 0),s}}const n9=Symbol("fallback");function gC(n){for(let e=0;e<n.length;e++)n[e]()}function WJ(n,e,t={}){let i=[],s=[],r=[],o=0,a=e.length>1?[]:null;return Ot(()=>gC(r)),()=>{let l=n()||[],c,d;return l[mg],Qn(()=>{let h=l.length,f,g,m,p,b,w,v,_,y;if(h===0)o!==0&&(gC(r),r=[],i=[],s=[],o=0,a&&(a=[])),t.fallback&&(i=[n9],s[0]=Kr(C=>(r[0]=C,t.fallback())),o=1);else if(o===0){for(s=new Array(h),d=0;d<h;d++)i[d]=l[d],s[d]=Kr(u);o=h}else{for(m=new Array(h),p=new Array(h),a&&(b=new Array(h)),w=0,v=Math.min(o,h);w<v&&i[w]===l[w];w++);for(v=o-1,_=h-1;v>=w&&_>=w&&i[v]===l[_];v--,_--)m[_]=s[v],p[_]=r[v],a&&(b[_]=a[v]);for(f=new Map,g=new Array(_+1),d=_;d>=w;d--)y=l[d],c=f.get(y),g[d]=c===void 0?-1:c,f.set(y,d);for(c=w;c<=v;c++)y=i[c],d=f.get(y),d!==void 0&&d!==-1?(m[d]=s[c],p[d]=r[c],a&&(b[d]=a[c]),d=g[d],f.set(y,d)):r[c]();for(d=w;d<h;d++)d in m?(s[d]=m[d],r[d]=p[d],a&&(a[d]=b[d],a[d](d))):s[d]=Kr(u);s=s.slice(0,o=h),i=l.slice(0)}return s});function u(h){if(r[d]=h,a){const[f,g]=he(d);return a[d]=g,e(l[d],f)}return e(l[d])}}}function Gae(n,e,t={}){let i=[],s=[],r=[],o=[],a=0,l;return Ot(()=>gC(r)),()=>{const c=n()||[];return c[mg],Qn(()=>{if(c.length===0)return a!==0&&(gC(r),r=[],i=[],s=[],a=0,o=[]),t.fallback&&(i=[n9],s[0]=Kr(u=>(r[0]=u,t.fallback())),a=1),s;for(i[0]===n9&&(r[0](),r=[],i=[],s=[],a=0),l=0;l<c.length;l++)l<i.length&&i[l]!==c[l]?o[l](()=>c[l]):l>=i.length&&(s[l]=Kr(d));for(;l<i.length;l++)r[l]();return a=o.length=r.length=c.length,i=c.slice(0),s=s.slice(0,a)});function d(u){r[l]=u;const[h,f]=he(c[l]);return o[l]=f,e(h,l)}}}function x(n,e){return Qn(()=>n(e||{}))}function Ow(){return!0}const s9={get(n,e,t){return e===gr?t:n.get(e)},has(n,e){return e===gr?!0:n.has(e)},set:Ow,deleteProperty:Ow,getOwnPropertyDescriptor(n,e){return{configurable:!0,enumerable:!0,get(){return n.get(e)},set:Ow,deleteProperty:Ow}},ownKeys(n){return n.keys()}};function VT(n){return(n=typeof n=="function"?n():n)?n:{}}function Bae(){for(let n=0,e=this.length;n<e;++n){const t=this[n]();if(t!==void 0)return t}}function pg(...n){let e=!1;for(let o=0;o<n.length;o++){const a=n[o];e=e||!!a&&gr in a,n[o]=typeof a=="function"?(e=!0,J(a)):a}if(e)return new Proxy({get(o){for(let a=n.length-1;a>=0;a--){const l=VT(n[a])[o];if(l!==void 0)return l}},has(o){for(let a=n.length-1;a>=0;a--)if(o in VT(n[a]))return!0;return!1},keys(){const o=[];for(let a=0;a<n.length;a++)o.push(...Object.keys(VT(n[a])));return[...new Set(o)]}},s9);const t={},i=Object.create(null);for(let o=n.length-1;o>=0;o--){const a=n[o];if(!a)continue;const l=Object.getOwnPropertyNames(a);for(let c=l.length-1;c>=0;c--){const d=l[c];if(d==="__proto__"||d==="constructor")continue;const u=Object.getOwnPropertyDescriptor(a,d);if(!i[d])i[d]=u.get?{enumerable:!0,configurable:!0,get:Bae.bind(t[d]=[u.get.bind(a)])}:u.value!==void 0?u:void 0;else{const h=t[d];h&&(u.get?h.push(u.get.bind(a)):u.value!==void 0&&h.push(()=>u.value))}}}const s={},r=Object.keys(i);for(let o=r.length-1;o>=0;o--){const a=r[o],l=i[a];l&&l.get?Object.defineProperty(s,a,l):s[a]=l?l.value:void 0}return s}function Xae(n,...e){if(gr in n){const s=new Set(e.length>1?e.flat():e[0]),r=e.map(o=>new Proxy({get(a){return o.includes(a)?n[a]:void 0},has(a){return o.includes(a)&&a in n},keys(){return o.filter(a=>a in n)}},s9));return r.push(new Proxy({get(o){return s.has(o)?void 0:n[o]},has(o){return s.has(o)?!1:o in n},keys(){return Object.keys(n).filter(o=>!s.has(o))}},s9)),r}const t={},i=e.map(()=>({}));for(const s of Object.getOwnPropertyNames(n)){const r=Object.getOwnPropertyDescriptor(n,s),o=!r.get&&!r.set&&r.enumerable&&r.writable&&r.configurable;let a=!1,l=0;for(const c of e)c.includes(s)&&(a=!0,o?i[l][s]=r.value:Object.defineProperty(i[l],s,r)),++l;a||(o?t[s]=r.value:Object.defineProperty(t,s,r))}return[...i,t]}const AJ=n=>`Stale read from <${n}>.`;function ln(n){const e="fallback"in n&&{fallback:()=>n.fallback};return J(WJ(()=>n.each,n.children,e||void 0))}function Jp(n){const e="fallback"in n&&{fallback:()=>n.fallback};return J(Gae(()=>n.each,n.children,e||void 0))}function se(n){const e=n.keyed,t=J(()=>n.when,void 0,{equals:(i,s)=>e?i===s:!i==!s});return J(()=>{const i=t();if(i){const s=n.children;return typeof s=="function"&&s.length>0?Qn(()=>s(e?i:()=>{if(!Qn(t))throw AJ("Show");return n.when})):s}return n.fallback},void 0,void 0)}function Fn(n){let e=!1;const t=(r,o)=>(e?r[1]===o[1]:!r[1]==!o[1])&&r[2]===o[2],i=Pk(()=>n.children),s=J(()=>{let r=i();Array.isArray(r)||(r=[r]);for(let o=0;o<r.length;o++){const a=r[o].when;if(a)return e=!!r[o].keyed,[o,a,r[o]]}return[-1]},void 0,{equals:t});return J(()=>{const[r,o,a]=s();if(r<0)return n.fallback;const l=a.children;return typeof l=="function"&&l.length>0?Qn(()=>l(e?o:()=>{if(Qn(s)[0]!==r)throw AJ("Match");return a.when})):l},void 0,void 0)}function ot(n){return n}const zae=void 0,Hae=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],Uae=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...Hae]),Yae=new Set(["innerHTML","textContent","innerText","children"]),Kae=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),jae=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function Jae(n,e){const t=jae[n];return typeof t=="object"?t[e]?t.$:void 0:t}const $ae=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),Qae=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),qae={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function ele(n,e,t){let i=t.length,s=e.length,r=i,o=0,a=0,l=e[s-1].nextSibling,c=null;for(;o<s||a<r;){if(e[o]===t[a]){o++,a++;continue}for(;e[s-1]===t[r-1];)s--,r--;if(s===o){const d=r<i?a?t[a-1].nextSibling:t[r-a]:l;for(;a<r;)n.insertBefore(t[a++],d)}else if(r===a)for(;o<s;)(!c||!c.has(e[o]))&&e[o].remove(),o++;else if(e[o]===t[r-1]&&t[a]===e[s-1]){const d=e[--s].nextSibling;n.insertBefore(t[a++],e[o++].nextSibling),n.insertBefore(t[--r],d),e[s]=t[r]}else{if(!c){c=new Map;let u=a;for(;u<r;)c.set(t[u],u++)}const d=c.get(e[o]);if(d!=null)if(a<d&&d<r){let u=o,h=1,f;for(;++u<s&&u<r&&!((f=c.get(e[u]))==null||f!==d+h);)h++;if(h>d-a){const g=e[o];for(;a<d;)n.insertBefore(t[a++],g)}else n.replaceChild(t[a++],e[o++])}else o++;else e[o++].remove()}}}const QO="_$DX_DELEGATE";function tle(n,e,t,i={}){let s;return Kr(r=>{s=r,e===document?n():A(e,n(),e.firstChild?null:void 0,t)},i.owner),()=>{s(),e.textContent=""}}function G(n,e,t){let i;const s=()=>{const o=document.createElement("template");return o.innerHTML=n,t?o.content.firstChild.firstChild:o.content.firstChild},r=e?()=>Qn(()=>document.importNode(i||(i=s()),!0)):()=>(i||(i=s())).cloneNode(!0);return r.cloneNode=r,r}function dn(n,e=window.document){const t=e[QO]||(e[QO]=new Set);for(let i=0,s=n.length;i<s;i++){const r=n[i];t.has(r)||(t.add(r),e.addEventListener(r,ole))}}function xt(n,e,t){t==null?n.removeAttribute(e):n.setAttribute(e,t)}function ile(n,e,t,i){i==null?n.removeAttributeNS(e,t):n.setAttributeNS(e,t,i)}function mr(n,e){e==null?n.removeAttribute("class"):n.className=e}function Yh(n,e,t,i){if(i)Array.isArray(t)?(n[`$$${e}`]=t[0],n[`$$${e}Data`]=t[1]):n[`$$${e}`]=t;else if(Array.isArray(t)){const s=t[0];n.addEventListener(e,t[0]=r=>s.call(n,t[1],r))}else n.addEventListener(e,t)}function nn(n,e,t={}){const i=Object.keys(e||{}),s=Object.keys(t);let r,o;for(r=0,o=s.length;r<o;r++){const a=s[r];!a||a==="undefined"||e[a]||(qO(n,a,!1),delete t[a])}for(r=0,o=i.length;r<o;r++){const a=i[r],l=!!e[a];!a||a==="undefined"||t[a]===l||!l||(qO(n,a,!0),t[a]=l)}return t}function Dl(n,e,t){if(!e)return t?xt(n,"style"):e;const i=n.style;if(typeof e=="string")return i.cssText=e;typeof t=="string"&&(i.cssText=t=void 0),t||(t={}),e||(e={});let s,r;for(r in t)e[r]==null&&i.removeProperty(r),delete t[r];for(r in e)s=e[r],s!==t[r]&&(i.setProperty(r,s),t[r]=s);return t}function nle(n,e={},t,i){const s={};return i||Me(()=>s.children=$p(n,e.children,s.children)),Me(()=>e.ref&&e.ref(n)),Me(()=>sle(n,e,t,!0,s,!0)),s}function We(n,e,t){return Qn(()=>n(e,t))}function A(n,e,t,i){if(t!==void 0&&!i&&(i=[]),typeof e!="function")return $p(n,e,i,t);Me(s=>$p(n,e(),s,t),i)}function sle(n,e,t,i,s={},r=!1){e||(e={});for(const o in s)if(!(o in e)){if(o==="children")continue;s[o]=eZ(n,o,null,s[o],t,r)}for(const o in e){if(o==="children"){i||$p(n,e.children);continue}const a=e[o];s[o]=eZ(n,o,a,s[o],t,r)}}function rle(n){return n.toLowerCase().replace(/-([a-z])/g,(e,t)=>t.toUpperCase())}function qO(n,e,t){const i=e.trim().split(/\s+/);for(let s=0,r=i.length;s<r;s++)n.classList.toggle(i[s],t)}function eZ(n,e,t,i,s,r){let o,a,l,c,d;if(e==="style")return Dl(n,t,i);if(e==="classList")return nn(n,t,i);if(t===i)return i;if(e==="ref")r||t(n);else if(e.slice(0,3)==="on:"){const u=e.slice(3);i&&n.removeEventListener(u,i),t&&n.addEventListener(u,t)}else if(e.slice(0,10)==="oncapture:"){const u=e.slice(10);i&&n.removeEventListener(u,i,!0),t&&n.addEventListener(u,t,!0)}else if(e.slice(0,2)==="on"){const u=e.slice(2).toLowerCase(),h=$ae.has(u);if(!h&&i){const f=Array.isArray(i)?i[0]:i;n.removeEventListener(u,f)}(h||t)&&(Yh(n,u,t,h),h&&dn([u]))}else if(e.slice(0,5)==="attr:")xt(n,e.slice(5),t);else if((d=e.slice(0,5)==="prop:")||(l=Yae.has(e))||!s&&((c=Jae(e,n.tagName))||(a=Uae.has(e)))||(o=n.nodeName.includes("-")))d&&(e=e.slice(5),a=!0),e==="class"||e==="className"?mr(n,t):o&&!a&&!l?n[rle(e)]=t:n[c||e]=t;else{const u=s&&e.indexOf(":")>-1&&qae[e.split(":")[0]];u?ile(n,u,e,t):xt(n,Kae[e]||e,t)}return t}function ole(n){const e=`$$${n.type}`;let t=n.composedPath&&n.composedPath()[0]||n.target;for(n.target!==t&&Object.defineProperty(n,"target",{configurable:!0,value:t}),Object.defineProperty(n,"currentTarget",{configurable:!0,get(){return t||document}});t;){const i=t[e];if(i&&!t.disabled){const s=t[`${e}Data`];if(s!==void 0?i.call(t,s,n):i.call(t,n),n.cancelBubble)return}t=t._$host||t.parentNode||t.host}}function $p(n,e,t,i,s){for(;typeof t=="function";)t=t();if(e===t)return t;const r=typeof e,o=i!==void 0;if(n=o&&t[0]&&t[0].parentNode||n,r==="string"||r==="number")if(r==="number"&&(e=e.toString()),o){let a=t[0];a&&a.nodeType===3?a.data!==e&&(a.data=e):a=document.createTextNode(e),t=Sm(n,t,i,a)}else t!==""&&typeof t=="string"?t=n.firstChild.data=e:t=n.textContent=e;else if(e==null||r==="boolean")t=Sm(n,t,i);else{if(r==="function")return Me(()=>{let a=e();for(;typeof a=="function";)a=a();t=$p(n,a,t,i)}),()=>t;if(Array.isArray(e)){const a=[],l=t&&Array.isArray(t);if(r9(a,e,t,s))return Me(()=>t=$p(n,a,t,i,!0)),()=>t;if(a.length===0){if(t=Sm(n,t,i),o)return t}else l?t.length===0?tZ(n,a,i):ele(n,t,a):(t&&Sm(n),tZ(n,a));t=a}else if(e.nodeType){if(Array.isArray(t)){if(o)return t=Sm(n,t,i,e);Sm(n,t,null,e)}else t==null||t===""||!n.firstChild?n.appendChild(e):n.replaceChild(e,n.firstChild);t=e}}return t}function r9(n,e,t,i){let s=!1;for(let r=0,o=e.length;r<o;r++){let a=e[r],l=t&&t[r],c;if(!(a==null||a===!0||a===!1))if((c=typeof a)=="object"&&a.nodeType)n.push(a);else if(Array.isArray(a))s=r9(n,a,l)||s;else if(c==="function")if(i){for(;typeof a=="function";)a=a();s=r9(n,Array.isArray(a)?a:[a],Array.isArray(l)?l:[l])||s}else n.push(a),s=!0;else{const d=String(a);l&&l.nodeType===3&&l.data===d?n.push(l):n.push(document.createTextNode(d))}}return s}function tZ(n,e,t=null){for(let i=0,s=e.length;i<s;i++)n.insertBefore(e[i],t)}function Sm(n,e,t,i){if(t===void 0)return n.textContent="";const s=i||document.createTextNode("");if(e.length){let r=!1;for(let o=e.length-1;o>=0;o--){const a=e[o];if(s!==a){const l=a.parentNode===n;!r&&!o?l?n.replaceChild(s,a):n.insertBefore(s,t):l&&a.remove()}else r=!0}}else n.insertBefore(s,t);return[s]}const ale=!1,lle="http://www.w3.org/2000/svg";function cle(n,e=!1){return e?document.createElementNS(lle,n):document.createElement(n)}function zF(n){const[e,t]=Xae(n,["component"]),i=J(()=>e.component);return J(()=>{const s=i();switch(typeof s){case"function":return Qn(()=>s(t));case"string":const r=Qae.has(s),o=cle(s,r);return nle(o,t,r),o}})}function FJ(){let n=new Set;function e(s){return n.add(s),()=>n.delete(s)}let t=!1;function i(s,r){if(t)return!(t=!1);const o={to:s,options:r,defaultPrevented:!1,preventDefault:()=>o.defaultPrevented=!0};for(const a of n)a.listener({...o,from:a.location,retry:l=>{l&&(t=!0),a.navigate(s,{...r,resolve:!1})}});return!o.defaultPrevented}return{subscribe:e,confirm:i}}let o9;function HF(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),o9=window.history.state._depth}HF();function dle(n){return{...n,_depth:window.history.state&&window.history.state._depth}}function ule(n,e){let t=!1;return()=>{const i=o9;HF();const s=i==null?null:o9-i;if(t){t=!1;return}s&&e(s)?(t=!0,window.history.go(-s)):n()}}const hle=/^(?:[a-z0-9]+:)?\/\//i,fle=/^\/+|(\/)\/+$/g,VJ="http://sr";function Hv(n,e=!1){const t=n.replace(fle,"$1");return t?e||/^[?#]/.test(t)?t:"/"+t:""}function yS(n,e,t){if(hle.test(e))return;const i=Hv(n),s=t&&Hv(t);let r="";return!s||e.startsWith("/")?r=i:s.toLowerCase().indexOf(i.toLowerCase())!==0?r=i+s:r=s,(r||"/")+Hv(e,!r)}function gle(n,e){return Hv(n).replace(/\/*(\*.*)?$/g,"")+Hv(e)}function PJ(n){const e={};return n.searchParams.forEach((t,i)=>{e[i]=t}),e}function mle(n,e,t){const[i,s]=n.split("/*",2),r=i.split("/").filter(Boolean),o=r.length;return a=>{const l=a.split("/").filter(Boolean),c=l.length-o;if(c<0||c>0&&s===void 0&&!e)return null;const d={path:o?"":"/",params:{}},u=h=>t===void 0?void 0:t[h];for(let h=0;h<o;h++){const f=r[h],g=l[h],m=f[0]===":",p=m?f.slice(1):f;if(m&&PT(g,u(p)))d.params[p]=g;else if(m||!PT(g,f))return null;d.path+=`/${g}`}if(s){const h=c?l.slice(-c).join("/"):"";if(PT(h,u(s)))d.params[s]=h;else return null}return d}}function PT(n,e){const t=i=>i.localeCompare(n,void 0,{sensitivity:"base"})===0;return e===void 0?!0:typeof e=="string"?t(e):typeof e=="function"?e(n):Array.isArray(e)?e.some(t):e instanceof RegExp?e.test(n):!1}function ple(n){const[e,t]=n.pattern.split("/*",2),i=e.split("/").filter(Boolean);return i.reduce((s,r)=>s+(r.startsWith(":")?2:3),i.length-(t===void 0?0:1))}function OJ(n){const e=new Map,t=Zo();return new Proxy({},{get(i,s){return e.has(s)||tg(t,()=>e.set(s,J(()=>n()[s]))),e.get(s)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(n())}})}function ZJ(n){let e=/(\/?\:[^\/]+)\?/.exec(n);if(!e)return[n];let t=n.slice(0,e.index),i=n.slice(e.index+e[0].length);const s=[t,t+=e[1]];for(;e=/^(\/\:[^\/]+)\?/.exec(i);)s.push(t+=e[1]),i=i.slice(e[0].length);return ZJ(i).reduce((r,o)=>[...r,...s.map(a=>a+o)],[])}const ble=100,vle=Fk(),GJ=Fk();function _le(n,e=""){const{component:t,preload:i,load:s,children:r,info:o}=n,a=!r||Array.isArray(r)&&!r.length,l={key:n,component:t,preload:i||s,info:o};return BJ(n.path).reduce((c,d)=>{for(const u of ZJ(d)){const h=gle(e,u);let f=a?h:h.split("/*",1)[0];f=f.split("/").map(g=>g.startsWith(":")||g.startsWith("*")?g:encodeURIComponent(g)).join("/"),c.push({...l,originalPath:d,pattern:f,matcher:mle(f,!a,n.matchFilters)})}return c},[])}function wle(n,e=0){return{routes:n,score:ple(n[n.length-1])*1e4-e,matcher(t){const i=[];for(let s=n.length-1;s>=0;s--){const r=n[s],o=r.matcher(t);if(!o)return null;i.unshift({...o,route:r})}return i}}}function BJ(n){return Array.isArray(n)?n:[n]}function XJ(n,e="",t=[],i=[]){const s=BJ(n);for(let r=0,o=s.length;r<o;r++){const a=s[r];if(a&&typeof a=="object"){a.hasOwnProperty("path")||(a.path="");const l=_le(a,e);for(const c of l){t.push(c);const d=Array.isArray(a.children)&&a.children.length===0;if(a.children&&!d)XJ(a.children,c.pattern,t,i);else{const u=wle([...t],i.length);i.push(u)}t.pop()}}}return t.length?i:i.sort((r,o)=>o.score-r.score)}function OT(n,e){for(let t=0,i=n.length;t<i;t++){const s=n[t].matcher(e);if(s)return s}return[]}function yle(n,e){const t=new URL(VJ),i=J(l=>{const c=n();try{return new URL(c,t)}catch{return console.error(`Invalid path ${c}`),l}},t,{equals:(l,c)=>l.href===c.href}),s=J(()=>i().pathname),r=J(()=>i().search,!0),o=J(()=>i().hash),a=()=>"";return{get pathname(){return s()},get search(){return r()},get hash(){return o()},get state(){return e()},get key(){return a()},query:OJ(go(r,()=>PJ(i())))}}let Nf;function Sle(){return Nf}function Cle(n,e,t,i={}){const{signal:[s,r],utils:o={}}=n,a=o.parsePath||(E=>E),l=o.renderPath||(E=>E),c=o.beforeLeave||FJ(),d=yS("",i.base||"");if(d===void 0)throw new Error(`${d} is not a valid base path`);d&&!s().value&&r({value:d,replace:!0,scroll:!1});const[u,h]=he(!1);let f;const g=(E,W)=>{W.value===m()&&W.state===b()||(f===void 0&&h(!0),Nf=E,f=W,Aae(()=>{f===W&&(p(f.value),w(f.state),y[1]([]))}).finally(()=>{f===W&&lh(()=>{Nf=void 0,E==="navigate"&&D(f),h(!1),f=void 0})}))},[m,p]=he(s().value),[b,w]=he(s().state),v=yle(m,b),_=[],y=he([]),C=J(()=>typeof i.transformUrl=="function"?OT(e(),i.transformUrl(v.pathname)):OT(e(),v.pathname)),S=OJ(()=>{const E=C(),W={};for(let P=0;P<E.length;P++)Object.assign(W,E[P].params);return W}),k={pattern:d,path:()=>d,outlet:()=>null,resolvePath(E){return yS(d,E)}};return Me(go(s,E=>g("native",E),{defer:!0})),{base:k,location:v,params:S,isRouting:u,renderPath:l,parsePath:a,navigatorFactory:T,matches:C,beforeLeave:c,preloadRoute:M,singleFlight:i.singleFlight===void 0?!0:i.singleFlight,submissions:y};function I(E,W,P){Qn(()=>{if(typeof W=="number"){W&&(o.go?o.go(W):console.warn("Router integration does not support relative routing"));return}const{replace:N,resolve:H,scroll:U,state:B}={replace:!1,resolve:!0,scroll:!0,...P},Y=H?E.resolvePath(W):yS("",W);if(Y===void 0)throw new Error(`Path '${W}' is not a routable path`);if(_.length>=ble)throw new Error("Too many redirects");const ne=m();(Y!==ne||B!==b())&&(ale||c.confirm(Y,P)&&(_.push({value:ne,replace:N,scroll:U,state:b()}),g("navigate",{value:Y,state:B})))})}function T(E){return E=E||Vk(GJ)||k,(W,P)=>I(E,W,P)}function D(E){const W=_[0];W&&(r({...E,replace:W.replace,scroll:W.scroll}),_.length=0)}function M(E,W={}){const P=OT(e(),E.pathname),N=Nf;Nf="preload";for(let H in P){const{route:U,params:B}=P[H];U.component&&U.component.preload&&U.component.preload();const{preload:Y}=U;W.preloadData&&Y&&tg(t(),()=>Y({params:B,location:{pathname:E.pathname,search:E.search,hash:E.hash,query:PJ(E),state:null,key:""},intent:"preload"}))}Nf=N}}function Lle(n,e,t,i){const{base:s,location:r,params:o}=n,{pattern:a,component:l,preload:c}=i().route,d=J(()=>i().path);l&&l.preload&&l.preload();const u=c?c({params:o,location:r,intent:Nf||"initial"}):void 0;return{parent:e,pattern:a,path:d,outlet:()=>l?x(l,{params:o,location:r,data:u,get children(){return t()}}):t(),resolvePath(f){return yS(s.path(),f,d())}}}const kle=n=>e=>{const{base:t}=e,i=Pk(()=>e.children),s=J(()=>XJ(i(),e.base||""));let r;const o=Cle(n,s,()=>r,{base:t,singleFlight:e.singleFlight,transformUrl:e.transformUrl});return n.create&&n.create(o),x(vle.Provider,{value:o,get children(){return x(xle,{routerState:o,get root(){return e.root},get preload(){return e.rootPreload||e.rootLoad},get children(){return[J(()=>(r=Zo())&&null),x(Tle,{routerState:o,get branches(){return s()}})]}})}})};function xle(n){const e=n.routerState.location,t=n.routerState.params,i=J(()=>n.preload&&Qn(()=>{n.preload({params:t,location:e,intent:Sle()||"initial"})}));return x(se,{get when(){return n.root},keyed:!0,get fallback(){return n.children},children:s=>x(s,{params:t,location:e,get data(){return i()},get children(){return n.children}})})}function Tle(n){const e=[];let t;const i=J(go(n.routerState.matches,(s,r,o)=>{let a=r&&s.length===r.length;const l=[];for(let c=0,d=s.length;c<d;c++){const u=r&&r[c],h=s[c];o&&u&&h.route.key===u.route.key?l[c]=o[c]:(a=!1,e[c]&&e[c](),Kr(f=>{e[c]=f,l[c]=Lle(n.routerState,l[c-1]||n.routerState.base,iZ(()=>i()[c+1]),()=>n.routerState.matches()[c])}))}return e.splice(s.length).forEach(c=>c()),o&&a?o:(t=l[0],l)}));return iZ(()=>i()&&t)()}const iZ=n=>()=>x(se,{get when(){return n()},keyed:!0,children:e=>x(GJ.Provider,{value:e,get children(){return e.outlet()}})}),Dle=n=>{const e=Pk(()=>n.children);return pg(n,{get children(){return e()}})};function Ile([n,e],t,i){return[t?()=>t(n()):n,i?s=>e(i(s)):e]}function Mle(n){if(n==="#")return null;try{return document.querySelector(n)}catch{return null}}function Ele(n){let e=!1;const t=s=>typeof s=="string"?{value:s}:s,i=Ile(he(t(n.get()),{equals:(s,r)=>s.value===r.value&&s.state===r.state}),void 0,s=>(!e&&n.set(s),s));return n.init&&Ot(n.init((s=n.get())=>{e=!0,i[1](t(s)),e=!1})),kle({signal:i,create:n.create,utils:n.utils})}function Nle(n,e,t){return n.addEventListener(e,t),()=>n.removeEventListener(e,t)}function Rle(n,e){const t=Mle(`#${n}`);t?t.scrollIntoView():e&&window.scrollTo(0,0)}const Wle=new Map;function Ale(n=!0,e=!1,t="/_server",i){return s=>{const r=s.base.path(),o=s.navigatorFactory(s.base);let a={};function l(m){return m.namespaceURI==="http://www.w3.org/2000/svg"}function c(m){if(m.defaultPrevented||m.button!==0||m.metaKey||m.altKey||m.ctrlKey||m.shiftKey)return;const p=m.composedPath().find(C=>C instanceof Node&&C.nodeName.toUpperCase()==="A");if(!p||e&&!p.hasAttribute("link"))return;const b=l(p),w=b?p.href.baseVal:p.href;if((b?p.target.baseVal:p.target)||!w&&!p.hasAttribute("state"))return;const _=(p.getAttribute("rel")||"").split(/\s+/);if(p.hasAttribute("download")||_&&_.includes("external"))return;const y=b?new URL(w,document.baseURI):new URL(w);if(!(y.origin!==window.location.origin||r&&y.pathname&&!y.pathname.toLowerCase().startsWith(r.toLowerCase())))return[p,y]}function d(m){const p=c(m);if(!p)return;const[b,w]=p,v=s.parsePath(w.pathname+w.search+w.hash),_=b.getAttribute("state");m.preventDefault(),o(v,{resolve:!1,replace:b.hasAttribute("replace"),scroll:!b.hasAttribute("noscroll"),state:_&&JSON.parse(_)})}function u(m){const p=c(m);if(!p)return;const[b,w]=p;typeof i=="function"&&(w.pathname=i(w.pathname)),a[w.pathname]||s.preloadRoute(w,{preloadData:b.getAttribute("preload")!=="false"})}function h(m){const p=c(m);if(!p)return;const[b,w]=p;typeof i=="function"&&(w.pathname=i(w.pathname)),!a[w.pathname]&&(a[w.pathname]=setTimeout(()=>{s.preloadRoute(w,{preloadData:b.getAttribute("preload")!=="false"}),delete a[w.pathname]},200))}function f(m){const p=c(m);if(!p)return;const[,b]=p;typeof i=="function"&&(b.pathname=i(b.pathname)),a[b.pathname]&&(clearTimeout(a[b.pathname]),delete a[b.pathname])}function g(m){if(m.defaultPrevented)return;let p=m.submitter&&m.submitter.hasAttribute("formaction")?m.submitter.getAttribute("formaction"):m.target.getAttribute("action");if(!p)return;if(!p.startsWith("https://action/")){const w=new URL(p,VJ);if(p=s.parsePath(w.pathname+w.search),!p.startsWith(t))return}if(m.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const b=Wle.get(p);if(b){m.preventDefault();const w=new FormData(m.target,m.submitter);b.call({r:s,f:m.target},m.target.enctype==="multipart/form-data"?w:new URLSearchParams(w))}}dn(["click","submit"]),document.addEventListener("click",d),n&&(document.addEventListener("mouseover",h),document.addEventListener("mouseout",f),document.addEventListener("focusin",u),document.addEventListener("touchstart",u)),document.addEventListener("submit",g),Ot(()=>{document.removeEventListener("click",d),n&&(document.removeEventListener("mouseover",h),document.removeEventListener("mouseout",f),document.removeEventListener("focusin",u),document.removeEventListener("touchstart",u)),document.removeEventListener("submit",g)})}}function Fle(n){const e=()=>{const i=window.location.pathname.replace(/^\/+/,"/")+window.location.search;return{value:n.transformUrl?n.transformUrl(i)+window.location.hash:i+window.location.hash,state:window.history.state}},t=FJ();return Ele({get:e,set({value:i,replace:s,scroll:r,state:o}){s?window.history.replaceState(dle(o),"",i):window.history.pushState(o,"",i),Rle(decodeURIComponent(window.location.hash.slice(1)),r),HF()},init:i=>Nle(window,"popstate",ule(i,s=>{if(s&&s<0)return!t.confirm(s);{const r=e();return!t.confirm(r.value,{state:r.state})}})),create:Ale(n.preload,n.explicitLinks,n.actionBase,n.transformUrl),utils:{go:i=>window.history.go(i),beforeLeave:t}})(n)}const Qp=Symbol("store-raw"),Lc=Symbol("store-node"),xa=Symbol("store-has"),zJ=Symbol("store-self");function HJ(n){let e=n[gr];if(!e&&(Object.defineProperty(n,gr,{value:e=new Proxy(n,Ple)}),!Array.isArray(n))){const t=Object.keys(n),i=Object.getOwnPropertyDescriptors(n);for(let s=0,r=t.length;s<r;s++){const o=t[s];i[o].get&&Object.defineProperty(n,o,{enumerable:i[o].enumerable,get:i[o].get.bind(e)})}}return e}function Il(n){let e;return n!=null&&typeof n=="object"&&(n[gr]||!(e=Object.getPrototypeOf(n))||e===Object.prototype||Array.isArray(n))}function Za(n,e=new Set){let t,i,s,r;if(t=n!=null&&n[Qp])return t;if(!Il(n)||e.has(n))return n;if(Array.isArray(n)){Object.isFrozen(n)?n=n.slice(0):e.add(n);for(let o=0,a=n.length;o<a;o++)s=n[o],(i=Za(s,e))!==s&&(n[o]=i)}else{Object.isFrozen(n)?n=Object.assign({},n):e.add(n);const o=Object.keys(n),a=Object.getOwnPropertyDescriptors(n);for(let l=0,c=o.length;l<c;l++)r=o[l],!a[r].get&&(s=n[r],(i=Za(s,e))!==s&&(n[r]=i))}return n}function qp(n,e){let t=n[e];return t||Object.defineProperty(n,e,{value:t=Object.create(null)}),t}function bg(n,e,t){if(n[e])return n[e];const[i,s]=he(t,{equals:!1,internal:!0});return i.$=s,n[e]=i}function Vle(n,e){const t=Reflect.getOwnPropertyDescriptor(n,e);return!t||t.get||!t.configurable||e===gr||e===Lc||(delete t.value,delete t.writable,t.get=()=>n[gr][e]),t}function UF(n){C_()&&bg(qp(n,Lc),zJ)()}function UJ(n){return UF(n),Reflect.ownKeys(n)}const Ple={get(n,e,t){if(e===Qp)return n;if(e===gr)return t;if(e===mg)return UF(n),t;const i=qp(n,Lc),s=i[e];let r=s?s():n[e];if(e===Lc||e===xa||e==="__proto__")return r;if(!s){const o=Object.getOwnPropertyDescriptor(n,e);C_()&&(typeof r!="function"||n.hasOwnProperty(e))&&!(o&&o.get)&&(r=bg(i,e,r)())}return Il(r)?HJ(r):r},has(n,e){return e===Qp||e===gr||e===mg||e===Lc||e===xa||e==="__proto__"?!0:(C_()&&bg(qp(n,xa),e)(),e in n)},set(){return!0},deleteProperty(){return!0},ownKeys:UJ,getOwnPropertyDescriptor:Vle};function Gr(n,e,t,i=!1){if(!i&&n[e]===t)return;const s=n[e],r=n.length;t===void 0?(delete n[e],n[xa]&&n[xa][e]&&s!==void 0&&n[xa][e].$()):(n[e]=t,n[xa]&&n[xa][e]&&s===void 0&&n[xa][e].$());let o=qp(n,Lc),a;if((a=bg(o,e,s))&&a.$(()=>t),Array.isArray(n)&&n.length!==r){for(let l=n.length;l<r;l++)(a=o[l])&&a.$();(a=bg(o,"length",r))&&a.$(n.length)}(a=o[zJ])&&a.$()}function YJ(n,e){const t=Object.keys(e);for(let i=0;i<t.length;i+=1){const s=t[i];Gr(n,s,e[s])}}function Ole(n,e){if(typeof e=="function"&&(e=e(n)),e=Za(e),Array.isArray(e)){if(n===e)return;let t=0,i=e.length;for(;t<i;t++){const s=e[t];n[t]!==s&&Gr(n,t,s)}Gr(n,"length",i)}else YJ(n,e)}function pv(n,e,t=[]){let i,s=n;if(e.length>1){i=e.shift();const o=typeof i,a=Array.isArray(n);if(Array.isArray(i)){for(let l=0;l<i.length;l++)pv(n,[i[l]].concat(e),t);return}else if(a&&o==="function"){for(let l=0;l<n.length;l++)i(n[l],l)&&pv(n,[l].concat(e),t);return}else if(a&&o==="object"){const{from:l=0,to:c=n.length-1,by:d=1}=i;for(let u=l;u<=c;u+=d)pv(n,[u].concat(e),t);return}else if(e.length>1){pv(n[i],e,[i].concat(t));return}s=n[i],t=[i].concat(t)}let r=e[0];typeof r=="function"&&(r=r(s,t),r===s)||i===void 0&&r==null||(r=Za(r),i===void 0||Il(s)&&Il(r)&&!Array.isArray(r)?YJ(s,r):Gr(n,i,r))}function O1(...[n,e]){const t=Za(n||{}),i=Array.isArray(t),s=HJ(t);function r(...o){lh(()=>{i&&o.length===1?Ole(t,o[0]):pv(t,o)})}return[s,r]}function Zle(n,e){const t=Reflect.getOwnPropertyDescriptor(n,e);return!t||t.get||t.set||!t.configurable||e===gr||e===Lc||(delete t.value,delete t.writable,t.get=()=>n[gr][e],t.set=i=>n[gr][e]=i),t}const Gle={get(n,e,t){if(e===Qp)return n;if(e===gr)return t;if(e===mg)return UF(n),t;const i=qp(n,Lc),s=i[e];let r=s?s():n[e];if(e===Lc||e===xa||e==="__proto__")return r;if(!s){const o=Object.getOwnPropertyDescriptor(n,e),a=typeof r=="function";if(C_()&&(!a||n.hasOwnProperty(e))&&!(o&&o.get))r=bg(i,e,r)();else if(r!=null&&a&&r===Array.prototype[e])return(...l)=>lh(()=>Array.prototype[e].apply(t,l))}return Il(r)?KJ(r):r},has(n,e){return e===Qp||e===gr||e===mg||e===Lc||e===xa||e==="__proto__"?!0:(C_()&&bg(qp(n,xa),e)(),e in n)},set(n,e,t){return lh(()=>Gr(n,e,Za(t))),!0},deleteProperty(n,e){return lh(()=>Gr(n,e,void 0,!0)),!0},ownKeys:UJ,getOwnPropertyDescriptor:Zle};function KJ(n){let e=n[gr];if(!e){Object.defineProperty(n,gr,{value:e=new Proxy(n,Gle)});const t=Object.keys(n),i=Object.getOwnPropertyDescriptors(n),s=Object.getPrototypeOf(n),r=n!==null&&typeof n=="object"&&!Array.isArray(n)&&s!==Object.prototype;if(r){const o=Object.getOwnPropertyDescriptors(s);t.push(...Object.keys(o)),Object.assign(i,o)}for(let o=0,a=t.length;o<a;o++){const l=t[o];if(!(r&&l==="constructor")){if(i[l].get){const c=i[l].get.bind(e);Object.defineProperty(n,l,{get:c,configurable:!0})}if(i[l].set){const c=i[l].set;Object.defineProperty(n,l,{set:u=>lh(()=>c.call(e,u)),configurable:!0})}}}}return e}function mC(n,e){const t=Za(n||{});return KJ(t)}const a9=Symbol("store-root");function Bm(n,e,t,i,s){const r=e[t];if(n===r)return;const o=Array.isArray(n);if(t!==a9&&(!Il(n)||!Il(r)||o!==Array.isArray(r)||s&&n[s]!==r[s])){Gr(e,t,n);return}if(o){if(n.length&&r.length&&(!i||s&&n[0]&&n[0][s]!=null)){let c,d,u,h,f,g,m,p;for(u=0,h=Math.min(r.length,n.length);u<h&&(r[u]===n[u]||s&&r[u]&&n[u]&&r[u][s]===n[u][s]);u++)Bm(n[u],r,u,i,s);const b=new Array(n.length),w=new Map;for(h=r.length-1,f=n.length-1;h>=u&&f>=u&&(r[h]===n[f]||s&&r[u]&&n[u]&&r[h][s]===n[f][s]);h--,f--)b[f]=r[h];if(u>f||u>h){for(d=u;d<=f;d++)Gr(r,d,n[d]);for(;d<n.length;d++)Gr(r,d,b[d]),Bm(n[d],r,d,i,s);r.length>n.length&&Gr(r,"length",n.length);return}for(m=new Array(f+1),d=f;d>=u;d--)g=n[d],p=s&&g?g[s]:g,c=w.get(p),m[d]=c===void 0?-1:c,w.set(p,d);for(c=u;c<=h;c++)g=r[c],p=s&&g?g[s]:g,d=w.get(p),d!==void 0&&d!==-1&&(b[d]=r[c],d=m[d],w.set(p,d));for(d=u;d<n.length;d++)d in b?(Gr(r,d,b[d]),Bm(n[d],r,d,i,s)):Gr(r,d,n[d])}else for(let c=0,d=n.length;c<d;c++)Bm(n[c],r,c,i,s);r.length>n.length&&Gr(r,"length",n.length);return}const a=Object.keys(n);for(let c=0,d=a.length;c<d;c++)Bm(n[a[c]],r,a[c],i,s);const l=Object.keys(r);for(let c=0,d=l.length;c<d;c++)n[l[c]]===void 0&&Gr(r,l[c],void 0)}function At(n,e={}){const{merge:t,key:i="id"}=e,s=Za(n);return r=>{if(!Il(r)||!Il(s))return s;const o=Bm(s,{[a9]:r},a9,t,i);return o===void 0?r:o}}const pC=new WeakMap,jJ={get(n,e){if(e===Qp)return n;const t=n[e];let i;return Il(t)?pC.get(t)||(pC.set(t,i=new Proxy(t,jJ)),i):t},set(n,e,t){return Gr(n,e,Za(t)),!0},deleteProperty(n,e){return Gr(n,e,void 0,!0),!0}};function Gt(n){return e=>{if(Il(e)){let t;(t=pC.get(e))||pC.set(e,t=new Proxy(e,jJ)),n(t)}return e}}const Ble="1.0.0";function Xle(n){return{panels:{"quokka.settings":{collapsed:!0},"sideview.tests.errors":{size:35,collapsed:!0},"sideview.tests.logs":{size:35,collapsed:!0},"sideview.tests.coverage":{size:35,collapsed:!0},"sideview.tests.alt.details.errors":{size:30,collapsed:!1},"sideview.tests.alt.details.logs":{size:40,collapsed:!1},"sideview.tests.alt.details.coverage":{size:30,collapsed:!1}},logs:{headers:!n},errors:{fullSourceLinks:!0,wordWrap:!0},overviewTests:{},tests:{layout:"horizontal",errors:!0,logs:!0,coveredFiles:!0},debugger:{codePreview:!0,echo:!0,lockPrePost:!0},editor:{uncoveredRegions:!0},consoleOutput:{autoScroll:!0,wordWrap:!1},standalone:{cli:{},tests:{layout:"horizontal"}},linkedMode:{fileNavigation:"browser",fileNavigationWithModifier:"editor"},welcomeMessage:!0,wallabyV3Message:!0,valuePeek:!1}}const ZT="systemPaused",zle="coreUpdated",Ue={OverviewTests:"overview.tests",OverviewErrors:"overview.errors",OverviewLogs:"overview.logs",OverviewStatus:"overview.status",OverviewDebugger:"overview.debugger",OverviewDebuggerLogs:"overview.debugger.logs",OverviewDebuggerErrors:"overview.debugger.errors",OverviewDebuggerStatus:"overview.debugger.status",OverviewDebuggerStatusFiles:"overview.debugger.status.files",OverviewDebuggerStatusGuide:"overview.debugger.status.guide",SideViewErrorsViewer:"sideview.errors.viewer",SideViewErrorsDetails:"sideview.errors.details",SideViewTestsTree:"sideview.tests.tree",SideViewTestsErrors:"sideview.tests.errors",SideViewTestsLogs:"sideview.tests.logs",SideViewTestsCoverage:"sideview.tests.coverage",SideViewTestsAltTree:"sideview.tests.alt.tree",SideViewTestsAltDetails:"sideview.tests.alt.details",SideViewTestsAltDetailsErrors:"sideview.tests.alt.details.errors",SideViewTestsAltDetailsLogs:"sideview.tests.alt.details.logs",SideViewTestsAltDetailsCoverage:"sideview.tests.alt.details.coverage",SideViewCoverageTree:"sideview.coverage.tree",SideViewCoverageTable:"sideview.coverage.table",SideViewStatus:"sideview.status",SideViewStatusSummary:"sideview.status.summary",SideViewStatusConsole:"sideview.status.console",StandaloneMain:"standalone.main",StandaloneMainSideView:"standalone.main.sideview",StandaloneMainCode:"standalone.main.code",StandaloneOverview:"standalone.overview",QuokkaStatus:"quokka.status",QuokkaLogs:"quokka.logs",QuokkaSettings:"quokka.settings",QuokkaErrors:"quokka.errors",QuokkaDebugger:"quokka.debugger"},Zt={Logs:"logs",Errors:"errors",Tests:"tests",Coverage:"coverage",Status:"status",Shortcuts:"shortcuts"};var l9=function(n,e){return l9=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])},l9(n,e)};function Kh(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");l9(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Hle(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(d){try{c(i.next(d))}catch(u){o(u)}}function l(d){try{c(i.throw(d))}catch(u){o(u)}}function c(d){d.done?r(d.value):s(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}function JJ(n,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,s,r,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(t=0)),t;)try{if(i=1,s&&(r=c[0]&2?s.return:c[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,c[1])).done)return r;switch(s=0,r&&(c=[c[0]&2,r.value]),c[0]){case 0:case 1:r=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,s=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!r||c[1]>r[0]&&c[1]<r[3])){t.label=c[1];break}if(c[0]===6&&t.label<r[1]){t.label=r[1],r=c;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(c);break}r[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(d){c=[6,d],s=0}finally{i=r=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function eb(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function bC(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),s,r=[],o;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)r.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return r}function vC(n,e,t){if(t||arguments.length===2)for(var i=0,s=e.length,r;i<s;i++)(r||!(i in e))&&(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return n.concat(r||Array.prototype.slice.call(e))}function Cp(n){return this instanceof Cp?(this.v=n,this):new Cp(n)}function Ule(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),s,r=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){i[h]&&(s[h]=function(f){return new Promise(function(g,m){r.push([h,f,g,m])>1||a(h,f)})})}function a(h,f){try{l(i[h](f))}catch(g){u(r[0][3],g)}}function l(h){h.value instanceof Cp?Promise.resolve(h.value.v).then(c,d):u(r[0][2],h)}function c(h){a("next",h)}function d(h){a("throw",h)}function u(h,f){h(f),r.shift(),r.length&&a(r[0][0],r[0][1])}}function Yle(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof eb=="function"?eb(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=n[r]&&function(o){return new Promise(function(a,l){o=n[r](o),s(a,l,o.done,o.value)})}}function s(r,o,a,l){Promise.resolve(l).then(function(c){r({value:c,done:a})},o)}}function Tr(n){return typeof n=="function"}function $J(n){var e=function(i){Error.call(i),i.stack=new Error().stack},t=n(e);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var GT=$J(function(n){return function(t){n(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(i,s){return s+1+") "+i.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function _C(n,e){if(n){var t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Z1=function(){function n(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return n.prototype.unsubscribe=function(){var e,t,i,s,r;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=eb(o),l=a.next();!l.done;l=a.next()){var c=l.value;c.remove(this)}}catch(m){e={error:m}}finally{try{l&&!l.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}else o.remove(this);var d=this.initialTeardown;if(Tr(d))try{d()}catch(m){r=m instanceof GT?m.errors:[m]}var u=this._finalizers;if(u){this._finalizers=null;try{for(var h=eb(u),f=h.next();!f.done;f=h.next()){var g=f.value;try{nZ(g)}catch(m){r=r??[],m instanceof GT?r=vC(vC([],bC(r)),bC(m.errors)):r.push(m)}}}catch(m){i={error:m}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}}if(r)throw new GT(r)}},n.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)nZ(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}},n.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},n.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},n.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&_C(t,e)},n.prototype.remove=function(e){var t=this._finalizers;t&&_C(t,e),e instanceof n&&e._removeParent(this)},n.EMPTY=function(){var e=new n;return e.closed=!0,e}(),n}(),QJ=Z1.EMPTY;function qJ(n){return n instanceof Z1||n&&"closed"in n&&Tr(n.remove)&&Tr(n.add)&&Tr(n.unsubscribe)}function nZ(n){Tr(n)?n():n.unsubscribe()}var e$={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},t$={setTimeout:function(n,e){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];return setTimeout.apply(void 0,vC([n,e],bC(t)))},clearTimeout:function(n){var e=t$.delegate;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function i$(n){t$.setTimeout(function(){throw n})}function sZ(){}function SS(n){n()}var YF=function(n){Kh(e,n);function e(t){var i=n.call(this)||this;return i.isStopped=!1,t?(i.destination=t,qJ(t)&&t.add(i)):i.destination=$le,i}return e.create=function(t,i,s){return new c9(t,i,s)},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Z1),Kle=Function.prototype.bind;function BT(n,e){return Kle.call(n,e)}var jle=function(){function n(e){this.partialObserver=e}return n.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(i){Zw(i)}},n.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(i){Zw(i)}else Zw(e)},n.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){Zw(t)}},n}(),c9=function(n){Kh(e,n);function e(t,i,s){var r=n.call(this)||this,o;if(Tr(t)||!t)o={next:t??void 0,error:i??void 0,complete:s??void 0};else{var a;r&&e$.useDeprecatedNextContext?(a=Object.create(t),a.unsubscribe=function(){return r.unsubscribe()},o={next:t.next&&BT(t.next,a),error:t.error&&BT(t.error,a),complete:t.complete&&BT(t.complete,a)}):o=t}return r.destination=new jle(o),r}return e}(YF);function Zw(n){i$(n)}function Jle(n){throw n}var $le={closed:!0,next:sZ,error:Jle,complete:sZ},KF=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Qle(n){return n}function qle(n){return n.length===0?Qle:n.length===1?n[0]:function(t){return n.reduce(function(i,s){return s(i)},t)}}var Ga=function(){function n(e){e&&(this._subscribe=e)}return n.prototype.lift=function(e){var t=new n;return t.source=this,t.operator=e,t},n.prototype.subscribe=function(e,t,i){var s=this,r=tce(e)?e:new c9(e,t,i);return SS(function(){var o=s,a=o.operator,l=o.source;r.add(a?a.call(r,l):l?s._subscribe(r):s._trySubscribe(r))}),r},n.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},n.prototype.forEach=function(e,t){var i=this;return t=rZ(t),new t(function(s,r){var o=new c9({next:function(a){try{e(a)}catch(l){r(l),o.unsubscribe()}},error:r,complete:s});i.subscribe(o)})},n.prototype._subscribe=function(e){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(e)},n.prototype[KF]=function(){return this},n.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return qle(e)(this)},n.prototype.toPromise=function(e){var t=this;return e=rZ(e),new e(function(i,s){var r;t.subscribe(function(o){return r=o},function(o){return s(o)},function(){return i(r)})})},n.create=function(e){return new n(e)},n}();function rZ(n){var e;return(e=n??e$.Promise)!==null&&e!==void 0?e:Promise}function ece(n){return n&&Tr(n.next)&&Tr(n.error)&&Tr(n.complete)}function tce(n){return n&&n instanceof YF||ece(n)&&qJ(n)}function ice(n){return Tr(n?.lift)}function Gk(n){return function(e){if(ice(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function jF(n,e,t,i,s){return new nce(n,e,t,i,s)}var nce=function(n){Kh(e,n);function e(t,i,s,r,o,a){var l=n.call(this,t)||this;return l.onFinalize=o,l.shouldUnsubscribe=a,l._next=i?function(c){try{i(c)}catch(d){t.error(d)}}:n.prototype._next,l._error=r?function(c){try{r(c)}catch(d){t.error(d)}finally{this.unsubscribe()}}:n.prototype._error,l._complete=s?function(){try{s()}catch(c){t.error(c)}finally{this.unsubscribe()}}:n.prototype._complete,l}return e.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var i=this.closed;n.prototype.unsubscribe.call(this),!i&&((t=this.onFinalize)===null||t===void 0||t.call(this))}},e}(YF),sce=$J(function(n){return function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),n$=function(n){Kh(e,n);function e(){var t=n.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return e.prototype.lift=function(t){var i=new oZ(this,this);return i.operator=t,i},e.prototype._throwIfClosed=function(){if(this.closed)throw new sce},e.prototype.next=function(t){var i=this;SS(function(){var s,r;if(i._throwIfClosed(),!i.isStopped){i.currentObservers||(i.currentObservers=Array.from(i.observers));try{for(var o=eb(i.currentObservers),a=o.next();!a.done;a=o.next()){var l=a.value;l.next(t)}}catch(c){s={error:c}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(s)throw s.error}}}})},e.prototype.error=function(t){var i=this;SS(function(){if(i._throwIfClosed(),!i.isStopped){i.hasError=i.isStopped=!0,i.thrownError=t;for(var s=i.observers;s.length;)s.shift().error(t)}})},e.prototype.complete=function(){var t=this;SS(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var i=t.observers;i.length;)i.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(t){return this._throwIfClosed(),n.prototype._trySubscribe.call(this,t)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var i=this,s=this,r=s.hasError,o=s.isStopped,a=s.observers;return r||o?QJ:(this.currentObservers=null,a.push(t),new Z1(function(){i.currentObservers=null,_C(a,t)}))},e.prototype._checkFinalizedStatuses=function(t){var i=this,s=i.hasError,r=i.thrownError,o=i.isStopped;s?t.error(r):o&&t.complete()},e.prototype.asObservable=function(){var t=new Ga;return t.source=this,t},e.create=function(t,i){return new oZ(t,i)},e}(Ga),oZ=function(n){Kh(e,n);function e(t,i){var s=n.call(this)||this;return s.destination=t,s.source=i,s}return e.prototype.next=function(t){var i,s;(s=(i=this.destination)===null||i===void 0?void 0:i.next)===null||s===void 0||s.call(i,t)},e.prototype.error=function(t){var i,s;(s=(i=this.destination)===null||i===void 0?void 0:i.error)===null||s===void 0||s.call(i,t)},e.prototype.complete=function(){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||i===void 0||i.call(t)},e.prototype._subscribe=function(t){var i,s;return(s=(i=this.source)===null||i===void 0?void 0:i.subscribe(t))!==null&&s!==void 0?s:QJ},e}(n$),rce={now:function(){return Date.now()},delegate:void 0},oce=function(n){Kh(e,n);function e(t,i){return n.call(this)||this}return e.prototype.schedule=function(t,i){return this},e}(Z1),d9={setInterval:function(n,e){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];return setInterval.apply(void 0,vC([n,e],bC(t)))},clearInterval:function(n){var e=d9.delegate;return(e?.clearInterval||clearInterval)(n)},delegate:void 0},ace=function(n){Kh(e,n);function e(t,i){var s=n.call(this,t,i)||this;return s.scheduler=t,s.work=i,s.pending=!1,s}return e.prototype.schedule=function(t,i){var s;if(i===void 0&&(i=0),this.closed)return this;this.state=t;var r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,i)),this.pending=!0,this.delay=i,this.id=(s=this.id)!==null&&s!==void 0?s:this.requestAsyncId(o,this.id,i),this},e.prototype.requestAsyncId=function(t,i,s){return s===void 0&&(s=0),d9.setInterval(t.flush.bind(t,this),s)},e.prototype.recycleAsyncId=function(t,i,s){if(s===void 0&&(s=0),s!=null&&this.delay===s&&this.pending===!1)return i;i!=null&&d9.clearInterval(i)},e.prototype.execute=function(t,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var s=this._execute(t,i);if(s)return s;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,i){var s=!1,r;try{this.work(t)}catch(o){s=!0,r=o||new Error("Scheduled action threw falsy error")}if(s)return this.unsubscribe(),r},e.prototype.unsubscribe=function(){if(!this.closed){var t=this,i=t.id,s=t.scheduler,r=s.actions;this.work=this.state=this.scheduler=null,this.pending=!1,_C(r,this),i!=null&&(this.id=this.recycleAsyncId(s,i,null)),this.delay=null,n.prototype.unsubscribe.call(this)}},e}(oce),aZ=function(){function n(e,t){t===void 0&&(t=n.now),this.schedulerActionCtor=e,this.now=t}return n.prototype.schedule=function(e,t,i){return t===void 0&&(t=0),new this.schedulerActionCtor(this,e).schedule(i,t)},n.now=rce.now,n}(),lce=function(n){Kh(e,n);function e(t,i){i===void 0&&(i=aZ.now);var s=n.call(this,t,i)||this;return s.actions=[],s._active=!1,s}return e.prototype.flush=function(t){var i=this.actions;if(this._active){i.push(t);return}var s;this._active=!0;do if(s=t.execute(t.state,t.delay))break;while(t=i.shift());if(this._active=!1,s){for(;t=i.shift();)t.unsubscribe();throw s}},e}(aZ),cce=new lce(ace),s$=function(n){return n&&typeof n.length=="number"&&typeof n!="function"};function r$(n){return Tr(n?.then)}function o$(n){return Tr(n[KF])}function a$(n){return Symbol.asyncIterator&&Tr(n?.[Symbol.asyncIterator])}function l$(n){return new TypeError("You provided "+(n!==null&&typeof n=="object"?"an invalid object":"'"+n+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function dce(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var c$=dce();function d$(n){return Tr(n?.[c$])}function u$(n){return Ule(this,arguments,function(){var t,i,s,r;return JJ(this,function(o){switch(o.label){case 0:t=n.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,Cp(t.read())];case 3:return i=o.sent(),s=i.value,r=i.done,r?[4,Cp(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,Cp(s)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function h$(n){return Tr(n?.getReader)}function JF(n){if(n instanceof Ga)return n;if(n!=null){if(o$(n))return uce(n);if(s$(n))return hce(n);if(r$(n))return fce(n);if(a$(n))return f$(n);if(d$(n))return gce(n);if(h$(n))return mce(n)}throw l$(n)}function uce(n){return new Ga(function(e){var t=n[KF]();if(Tr(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function hce(n){return new Ga(function(e){for(var t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function fce(n){return new Ga(function(e){n.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,i$)})}function gce(n){return new Ga(function(e){var t,i;try{for(var s=eb(n),r=s.next();!r.done;r=s.next()){var o=r.value;if(e.next(o),e.closed)return}}catch(a){t={error:a}}finally{try{r&&!r.done&&(i=s.return)&&i.call(s)}finally{if(t)throw t.error}}e.complete()})}function f$(n){return new Ga(function(e){pce(n,e).catch(function(t){return e.error(t)})})}function mce(n){return f$(u$(n))}function pce(n,e){var t,i,s,r;return Hle(this,void 0,void 0,function(){var o,a;return JJ(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),t=Yle(n),l.label=1;case 1:return[4,t.next()];case 2:if(i=l.sent(),!!i.done)return[3,4];if(o=i.value,e.next(o),e.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=l.sent(),s={error:a},[3,11];case 6:return l.trys.push([6,,9,10]),i&&!i.done&&(r=t.return)?[4,r.call(t)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(s)throw s.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function ig(n,e,t,i,s){i===void 0&&(i=0),s===void 0&&(s=!1);var r=e.schedule(function(){t(),s?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(r),!s)return r}function g$(n,e){return e===void 0&&(e=0),Gk(function(t,i){t.subscribe(jF(i,function(s){return ig(i,n,function(){return i.next(s)},e)},function(){return ig(i,n,function(){return i.complete()},e)},function(s){return ig(i,n,function(){return i.error(s)},e)}))})}function m$(n,e){return e===void 0&&(e=0),Gk(function(t,i){i.add(n.schedule(function(){return t.subscribe(i)},e))})}function bce(n,e){return JF(n).pipe(m$(e),g$(e))}function vce(n,e){return JF(n).pipe(m$(e),g$(e))}function _ce(n,e){return new Ga(function(t){var i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function wce(n,e){return new Ga(function(t){var i;return ig(t,e,function(){i=n[c$](),ig(t,e,function(){var s,r,o;try{s=i.next(),r=s.value,o=s.done}catch(a){t.error(a);return}o?t.complete():t.next(r)},0,!0)}),function(){return Tr(i?.return)&&i.return()}})}function p$(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ga(function(t){ig(t,e,function(){var i=n[Symbol.asyncIterator]();ig(t,e,function(){i.next().then(function(s){s.done?t.complete():t.next(s.value)})},0,!0)})})}function yce(n,e){return p$(u$(n),e)}function Sce(n,e){if(n!=null){if(o$(n))return bce(n,e);if(s$(n))return _ce(n,e);if(r$(n))return vce(n,e);if(a$(n))return p$(n,e);if(d$(n))return wce(n,e);if(h$(n))return yce(n,e)}throw l$(n)}function Cce(n,e){return e?Sce(n,e):JF(n)}function Lce(n,e){return Gk(function(t,i){var s=0;t.subscribe(jF(i,function(r){i.next(n.call(e,r,s++))}))})}function kce(n,e){return e===void 0&&(e=cce),Gk(function(t,i){var s=null,r=null,o=null,a=function(){if(s){s.unsubscribe(),s=null;var c=r;r=null,i.next(c)}};function l(){var c=o+n,d=e.now();if(d<c){s=this.schedule(void 0,c-d),i.add(s);return}a()}t.subscribe(jF(i,function(c){r=c,o=e.now(),s||(s=e.schedule(l,n),i.add(s))},function(){a(),i.complete()},void 0,function(){r=s=null}))})}const xce="",Tce="dark",Dce={"checkbox.border":"#3C3C3C","editor.background":"#1F1F1F","editor.foreground":"#CCCCCC","editor.inactiveSelectionBackground":"#3A3D41","editorIndentGuide.background1":"#404040","editorIndentGuide.activeBackground1":"#707070","editor.selectionHighlightBackground":"#ADD6FF26","list.dropBackground":"#383B3D","activityBarBadge.background":"#0078D4","sideBarTitle.foreground":"#CCCCCC","input.placeholderForeground":"#989898","menu.background":"#1F1F1F","menu.foreground":"#CCCCCC","menu.separatorBackground":"#454545","menu.border":"#454545","menu.selectionBackground":"#0078d4","statusBarItem.remoteForeground":"#FFFFFF","statusBarItem.remoteBackground":"#0078D4","ports.iconRunningProcessForeground":"#369432","sideBarSectionHeader.background":"#181818","sideBarSectionHeader.border":"#2B2B2B","tab.selectedBackground":"#222222","tab.selectedForeground":"#ffffffa0","tab.lastPinnedBorder":"#ccc3","list.activeSelectionIconForeground":"#FFF","terminal.inactiveSelectionBackground":"#3A3D41","widget.border":"#313131","actionBar.toggledBackground":"#383a49","activityBar.activeBorder":"#0078D4","activityBar.background":"#181818","activityBar.border":"#2B2B2B","activityBar.foreground":"#D7D7D7","activityBar.inactiveForeground":"#868686","activityBarBadge.foreground":"#FFFFFF","badge.background":"#616161","badge.foreground":"#F8F8F8","button.background":"#0078D4","button.border":"#FFFFFF12","button.foreground":"#FFFFFF","button.hoverBackground":"#026EC1","button.secondaryBackground":"#313131","button.secondaryForeground":"#CCCCCC","button.secondaryHoverBackground":"#3C3C3C","chat.slashCommandBackground":"#34414B","chat.slashCommandForeground":"#40A6FF","chat.editedFileForeground":"#E2C08D","checkbox.background":"#313131","debugToolBar.background":"#181818",descriptionForeground:"#9D9D9D","dropdown.background":"#313131","dropdown.border":"#3C3C3C","dropdown.foreground":"#CCCCCC","dropdown.listBackground":"#1F1F1F","editor.findMatchBackground":"#9E6A03","editorGroup.border":"#FFFFFF17","editorGroupHeader.tabsBackground":"#181818","editorGroupHeader.tabsBorder":"#2B2B2B","editorGutter.addedBackground":"#2EA043","editorGutter.deletedBackground":"#F85149","editorGutter.modifiedBackground":"#0078D4","editorLineNumber.activeForeground":"#CCCCCC","editorLineNumber.foreground":"#6E7681","editorOverviewRuler.border":"#010409","editorWidget.background":"#202020",errorForeground:"#F85149",focusBorder:"#0078D4",foreground:"#CCCCCC","icon.foreground":"#CCCCCC","input.background":"#313131","input.border":"#3C3C3C","input.foreground":"#CCCCCC","inputOption.activeBackground":"#2489DB82","inputOption.activeBorder":"#2488DB","keybindingLabel.foreground":"#CCCCCC","notificationCenterHeader.background":"#1F1F1F","notificationCenterHeader.foreground":"#CCCCCC","notifications.background":"#1F1F1F","notifications.border":"#2B2B2B","notifications.foreground":"#CCCCCC","panel.background":"#181818","panel.border":"#2B2B2B","panelInput.border":"#2B2B2B","panelTitle.activeBorder":"#0078D4","panelTitle.activeForeground":"#CCCCCC","panelTitle.inactiveForeground":"#9D9D9D","peekViewEditor.background":"#1F1F1F","peekViewEditor.matchHighlightBackground":"#BB800966","peekViewResult.background":"#1F1F1F","peekViewResult.matchHighlightBackground":"#BB800966","pickerGroup.border":"#3C3C3C","progressBar.background":"#0078D4","quickInput.background":"#222222","quickInput.foreground":"#CCCCCC","settings.dropdownBackground":"#313131","settings.dropdownBorder":"#3C3C3C","settings.headerForeground":"#FFFFFF","settings.modifiedItemIndicator":"#BB800966","sideBar.background":"#181818","sideBar.border":"#2B2B2B","sideBar.foreground":"#CCCCCC","sideBarSectionHeader.foreground":"#CCCCCC","statusBar.background":"#181818","statusBar.border":"#2B2B2B","statusBar.debuggingBackground":"#0078D4","statusBar.debuggingForeground":"#FFFFFF","statusBar.focusBorder":"#0078D4","statusBar.foreground":"#CCCCCC","statusBar.noFolderBackground":"#1F1F1F","statusBarItem.focusBorder":"#0078D4","statusBarItem.prominentBackground":"#6E768166","tab.activeBackground":"#1F1F1F","tab.activeBorder":"#1F1F1F","tab.activeBorderTop":"#0078D4","tab.activeForeground":"#FFFFFF","tab.selectedBorderTop":"#6caddf","tab.border":"#2B2B2B","tab.hoverBackground":"#1F1F1F","tab.inactiveBackground":"#181818","tab.inactiveForeground":"#9D9D9D","tab.unfocusedActiveBorder":"#1F1F1F","tab.unfocusedActiveBorderTop":"#2B2B2B","tab.unfocusedHoverBackground":"#1F1F1F","terminal.foreground":"#CCCCCC","terminal.tab.activeBorder":"#0078D4","textBlockQuote.background":"#2B2B2B","textBlockQuote.border":"#616161","textCodeBlock.background":"#2B2B2B","textLink.activeForeground":"#4daafc","textLink.foreground":"#4daafc","textPreformat.foreground":"#D0D0D0","textPreformat.background":"#3C3C3C","textSeparator.foreground":"#21262D","titleBar.activeBackground":"#181818","titleBar.activeForeground":"#CCCCCC","titleBar.border":"#2B2B2B","titleBar.inactiveBackground":"#1F1F1F","titleBar.inactiveForeground":"#9D9D9D","welcomePage.tileBackground":"#2B2B2B","welcomePage.progress.foreground":"#0078D4"},Ice={"meta.embedded":{foreground:"#D4D4D4"},"source.groovy.embedded":{foreground:"#D4D4D4"},"string meta.image.inline.markdown":{foreground:"#D4D4D4"},"variable.legacy.builtin.python":{foreground:"#D4D4D4"},emphasis:{style:"italic"},strong:{style:"bold"},header:{foreground:"#000080"},comment:{foreground:"#6A9955"},"constant.language":{foreground:"#569cd6"},"constant.numeric":{foreground:"#b5cea8"},"variable.other.enummember":{foreground:"#4FC1FF"},"keyword.operator.plus.exponent":{foreground:"#b5cea8"},"keyword.operator.minus.exponent":{foreground:"#b5cea8"},"constant.regexp":{foreground:"#646695"},"entity.name.tag":{foreground:"#569cd6"},"entity.name.tag.css":{foreground:"#d7ba7d"},"entity.name.tag.less":{foreground:"#d7ba7d"},"entity.other.attribute-name":{foreground:"#9cdcfe"},"entity.other.attribute-name.class.css":{foreground:"#d7ba7d"},"source.css entity.other.attribute-name.class":{foreground:"#d7ba7d"},"entity.other.attribute-name.id.css":{foreground:"#d7ba7d"},"entity.other.attribute-name.parent-selector.css":{foreground:"#d7ba7d"},"entity.other.attribute-name.parent.less":{foreground:"#d7ba7d"},"source.css entity.other.attribute-name.pseudo-class":{foreground:"#d7ba7d"},"entity.other.attribute-name.pseudo-element.css":{foreground:"#d7ba7d"},"source.css.less entity.other.attribute-name.id":{foreground:"#d7ba7d"},"entity.other.attribute-name.scss":{foreground:"#d7ba7d"},invalid:{foreground:"#f44747"},"markup.underline":{style:"underline"},"markup.bold":{foreground:"#569cd6",style:"bold"},"markup.heading":{foreground:"#569cd6",style:"bold"},"markup.italic":{style:"italic"},"markup.strikethrough":{style:"strikethrough"},"markup.inserted":{foreground:"#b5cea8"},"markup.deleted":{foreground:"#ce9178"},"markup.changed":{foreground:"#569cd6"},"punctuation.definition.quote.begin.markdown":{foreground:"#6A9955"},"punctuation.definition.list.begin.markdown":{foreground:"#6796e6"},"markup.inline.raw":{foreground:"#ce9178"},"punctuation.definition.tag":{foreground:"#808080"},"meta.preprocessor":{foreground:"#569cd6"},"entity.name.function.preprocessor":{foreground:"#569cd6"},"meta.preprocessor.string":{foreground:"#ce9178"},"meta.preprocessor.numeric":{foreground:"#b5cea8"},"meta.structure.dictionary.key.python":{foreground:"#9cdcfe"},"meta.diff.header":{foreground:"#569cd6"},storage:{foreground:"#569cd6"},"storage.type":{foreground:"#569cd6"},"storage.modifier":{foreground:"#569cd6"},"keyword.operator.noexcept":{foreground:"#569cd6"},string:{foreground:"#ce9178"},"meta.embedded.assembly":{foreground:"#ce9178"},"string.tag":{foreground:"#ce9178"},"string.value":{foreground:"#ce9178"},"string.regexp":{foreground:"#d16969"},"punctuation.definition.template-expression.begin":{foreground:"#569cd6"},"punctuation.definition.template-expression.end":{foreground:"#569cd6"},"punctuation.section.embedded":{foreground:"#569cd6"},"meta.template.expression":{foreground:"#d4d4d4"},"support.type.vendored.property-name":{foreground:"#9cdcfe"},"support.type.property-name":{foreground:"#9cdcfe"},"source.css variable":{foreground:"#9cdcfe"},"source.coffee.embedded":{foreground:"#9cdcfe"},keyword:{foreground:"#569cd6"},"keyword.control":{foreground:"#C586C0"},"keyword.operator":{foreground:"#d4d4d4"},"keyword.operator.new":{foreground:"#569cd6"},"keyword.operator.expression":{foreground:"#569cd6"},"keyword.operator.cast":{foreground:"#569cd6"},"keyword.operator.sizeof":{foreground:"#569cd6"},"keyword.operator.alignof":{foreground:"#569cd6"},"keyword.operator.typeid":{foreground:"#569cd6"},"keyword.operator.alignas":{foreground:"#569cd6"},"keyword.operator.instanceof":{foreground:"#569cd6"},"keyword.operator.logical.python":{foreground:"#569cd6"},"keyword.operator.wordlike":{foreground:"#569cd6"},"keyword.other.unit":{foreground:"#b5cea8"},"punctuation.section.embedded.begin.php":{foreground:"#569cd6"},"punctuation.section.embedded.end.php":{foreground:"#569cd6"},"support.function.git-rebase":{foreground:"#9cdcfe"},"constant.sha.git-rebase":{foreground:"#b5cea8"},"storage.modifier.import.java":{foreground:"#d4d4d4"},"variable.language.wildcard.java":{foreground:"#d4d4d4"},"storage.modifier.package.java":{foreground:"#d4d4d4"},"variable.language":{foreground:"#569cd6"},"entity.name.function":{foreground:"#DCDCAA"},"support.function":{foreground:"#DCDCAA"},"support.constant.handlebars":{foreground:"#DCDCAA"},"source.powershell variable.other.member":{foreground:"#DCDCAA"},"entity.name.operator.custom-literal":{foreground:"#DCDCAA"},"support.class":{foreground:"#4EC9B0"},"support.type":{foreground:"#4EC9B0"},"entity.name.type":{foreground:"#4EC9B0"},"entity.name.namespace":{foreground:"#4EC9B0"},"entity.other.attribute":{foreground:"#4EC9B0"},"entity.name.scope-resolution":{foreground:"#4EC9B0"},"entity.name.class":{foreground:"#4EC9B0"},"storage.type.numeric.go":{foreground:"#4EC9B0"},"storage.type.byte.go":{foreground:"#4EC9B0"},"storage.type.boolean.go":{foreground:"#4EC9B0"},"storage.type.string.go":{foreground:"#4EC9B0"},"storage.type.uintptr.go":{foreground:"#4EC9B0"},"storage.type.error.go":{foreground:"#4EC9B0"},"storage.type.rune.go":{foreground:"#4EC9B0"},"storage.type.cs":{foreground:"#4EC9B0"},"storage.type.generic.cs":{foreground:"#4EC9B0"},"storage.type.modifier.cs":{foreground:"#4EC9B0"},"storage.type.variable.cs":{foreground:"#4EC9B0"},"storage.type.annotation.java":{foreground:"#4EC9B0"},"storage.type.generic.java":{foreground:"#4EC9B0"},"storage.type.java":{foreground:"#4EC9B0"},"storage.type.object.array.java":{foreground:"#4EC9B0"},"storage.type.primitive.array.java":{foreground:"#4EC9B0"},"storage.type.primitive.java":{foreground:"#4EC9B0"},"storage.type.token.java":{foreground:"#4EC9B0"},"storage.type.groovy":{foreground:"#4EC9B0"},"storage.type.annotation.groovy":{foreground:"#4EC9B0"},"storage.type.parameters.groovy":{foreground:"#4EC9B0"},"storage.type.generic.groovy":{foreground:"#4EC9B0"},"storage.type.object.array.groovy":{foreground:"#4EC9B0"},"storage.type.primitive.array.groovy":{foreground:"#4EC9B0"},"storage.type.primitive.groovy":{foreground:"#4EC9B0"},"meta.type.cast.expr":{foreground:"#4EC9B0"},"meta.type.new.expr":{foreground:"#4EC9B0"},"support.constant.math":{foreground:"#4EC9B0"},"support.constant.dom":{foreground:"#4EC9B0"},"support.constant.json":{foreground:"#4EC9B0"},"entity.other.inherited-class":{foreground:"#4EC9B0"},"source.cpp keyword.operator.new":{foreground:"#C586C0"},"keyword.operator.delete":{foreground:"#C586C0"},"keyword.other.using":{foreground:"#C586C0"},"keyword.other.directive.using":{foreground:"#C586C0"},"keyword.other.operator":{foreground:"#C586C0"},"entity.name.operator":{foreground:"#C586C0"},variable:{foreground:"#9CDCFE"},"meta.definition.variable.name":{foreground:"#9CDCFE"},"support.variable":{foreground:"#9CDCFE"},"entity.name.variable":{foreground:"#9CDCFE"},"constant.other.placeholder":{foreground:"#9CDCFE"},"variable.other.constant":{foreground:"#4FC1FF"},"meta.object-literal.key":{foreground:"#9CDCFE"},"support.constant.property-value":{foreground:"#CE9178"},"support.constant.font-name":{foreground:"#CE9178"},"support.constant.media-type":{foreground:"#CE9178"},"support.constant.media":{foreground:"#CE9178"},"constant.other.color.rgb-value":{foreground:"#CE9178"},"constant.other.rgb-value":{foreground:"#CE9178"},"support.constant.color":{foreground:"#CE9178"},"punctuation.definition.group.regexp":{foreground:"#CE9178"},"punctuation.definition.group.assertion.regexp":{foreground:"#CE9178"},"punctuation.definition.character-class.regexp":{foreground:"#CE9178"},"punctuation.character.set.begin.regexp":{foreground:"#CE9178"},"punctuation.character.set.end.regexp":{foreground:"#CE9178"},"keyword.operator.negation.regexp":{foreground:"#CE9178"},"support.other.parenthesis.regexp":{foreground:"#CE9178"},"constant.character.character-class.regexp":{foreground:"#d16969"},"constant.other.character-class.set.regexp":{foreground:"#d16969"},"constant.other.character-class.regexp":{foreground:"#d16969"},"constant.character.set.regexp":{foreground:"#d16969"},"keyword.operator.or.regexp":{foreground:"#DCDCAA"},"keyword.control.anchor.regexp":{foreground:"#DCDCAA"},"keyword.operator.quantifier.regexp":{foreground:"#d7ba7d"},"constant.character":{foreground:"#569cd6"},"constant.other.option":{foreground:"#569cd6"},"constant.character.escape":{foreground:"#d7ba7d"},"entity.name.label":{foreground:"#C8C8C8"}},$F={name:xce,type:Tce,ui:Dce,code:Ice},Mce="",Ece="light",Nce={"checkbox.border":"#CECECE","editor.background":"#FFFFFF","editor.foreground":"#3B3B3B","editor.inactiveSelectionBackground":"#E5EBF1","editorIndentGuide.background1":"#D3D3D3","editorIndentGuide.activeBackground1":"#939393","editor.selectionHighlightBackground":"#ADD6FF80","editorSuggestWidget.background":"#F8F8F8","activityBarBadge.background":"#005FB8","sideBarTitle.foreground":"#3B3B3B","list.hoverBackground":"#F2F2F2","menu.border":"#CECECE","input.placeholderForeground":"#767676","searchEditor.textInputBorder":"#CECECE","settings.textInputBorder":"#CECECE","settings.numberInputBorder":"#CECECE","statusBarItem.remoteForeground":"#FFFFFF","statusBarItem.remoteBackground":"#005FB8","ports.iconRunningProcessForeground":"#369432","sideBarSectionHeader.background":"#F8F8F8","sideBarSectionHeader.border":"#E5E5E5","tab.selectedForeground":"#333333b3","tab.selectedBackground":"#ffffffa5","tab.lastPinnedBorder":"#D4D4D4","notebook.cellBorderColor":"#E5E5E5","notebook.selectedCellBackground":"#C8DDF150","statusBarItem.errorBackground":"#C72E0F","list.activeSelectionIconForeground":"#000000","list.focusAndSelectionOutline":"#005FB8","terminal.inactiveSelectionBackground":"#E5EBF1","widget.border":"#E5E5E5","actionBar.toggledBackground":"#dddddd","diffEditor.unchangedRegionBackground":"#f8f8f8","activityBar.activeBorder":"#005FB8","activityBar.background":"#F8F8F8","activityBar.border":"#E5E5E5","activityBar.foreground":"#1F1F1F","activityBar.inactiveForeground":"#616161","activityBarBadge.foreground":"#FFFFFF","badge.background":"#CCCCCC","badge.foreground":"#3B3B3B","button.background":"#005FB8","button.border":"#0000001a","button.foreground":"#FFFFFF","button.hoverBackground":"#0258A8","button.secondaryBackground":"#E5E5E5","button.secondaryForeground":"#3B3B3B","button.secondaryHoverBackground":"#CCCCCC","chat.slashCommandBackground":"#D2ECFF","chat.slashCommandForeground":"#306CA2","chat.editedFileForeground":"#895503","checkbox.background":"#F8F8F8",descriptionForeground:"#3B3B3B","dropdown.background":"#FFFFFF","dropdown.border":"#CECECE","dropdown.foreground":"#3B3B3B","dropdown.listBackground":"#FFFFFF","editorGroup.border":"#E5E5E5","editorGroupHeader.tabsBackground":"#F8F8F8","editorGroupHeader.tabsBorder":"#E5E5E5","editorGutter.addedBackground":"#2EA043","editorGutter.deletedBackground":"#F85149","editorGutter.modifiedBackground":"#005FB8","editorLineNumber.activeForeground":"#171184","editorLineNumber.foreground":"#6E7681","editorOverviewRuler.border":"#E5E5E5","editorWidget.background":"#F8F8F8",errorForeground:"#F85149",focusBorder:"#005FB8",foreground:"#3B3B3B","icon.foreground":"#3B3B3B","input.background":"#FFFFFF","input.border":"#CECECE","input.foreground":"#3B3B3B","inputOption.activeBackground":"#BED6ED","inputOption.activeBorder":"#005FB8","inputOption.activeForeground":"#000000","keybindingLabel.foreground":"#3B3B3B","list.activeSelectionBackground":"#E8E8E8","list.activeSelectionForeground":"#000000","menu.selectionBackground":"#005FB8","menu.selectionForeground":"#ffffff","notificationCenterHeader.background":"#FFFFFF","notificationCenterHeader.foreground":"#3B3B3B","notifications.background":"#FFFFFF","notifications.border":"#E5E5E5","notifications.foreground":"#3B3B3B","panel.background":"#F8F8F8","panel.border":"#E5E5E5","panelInput.border":"#E5E5E5","panelTitle.activeBorder":"#005FB8","panelTitle.activeForeground":"#3B3B3B","panelTitle.inactiveForeground":"#3B3B3B","peekViewEditor.matchHighlightBackground":"#BB800966","peekViewResult.background":"#FFFFFF","peekViewResult.matchHighlightBackground":"#BB800966","pickerGroup.border":"#E5E5E5","pickerGroup.foreground":"#8B949E","progressBar.background":"#005FB8","quickInput.background":"#F8F8F8","quickInput.foreground":"#3B3B3B","settings.dropdownBackground":"#FFFFFF","settings.dropdownBorder":"#CECECE","settings.headerForeground":"#1F1F1F","settings.modifiedItemIndicator":"#BB800966","sideBar.background":"#F8F8F8","sideBar.border":"#E5E5E5","sideBar.foreground":"#3B3B3B","sideBarSectionHeader.foreground":"#3B3B3B","statusBar.background":"#F8F8F8","statusBar.foreground":"#3B3B3B","statusBar.border":"#E5E5E5","statusBar.debuggingBackground":"#FD716C","statusBar.debuggingForeground":"#000000","statusBar.focusBorder":"#005FB8","statusBar.noFolderBackground":"#F8F8F8","statusBarItem.focusBorder":"#005FB8","statusBarItem.prominentBackground":"#6E768166","tab.activeBackground":"#FFFFFF","tab.activeBorder":"#F8F8F8","tab.activeBorderTop":"#005FB8","tab.activeForeground":"#3B3B3B","tab.selectedBorderTop":"#68a3da","tab.border":"#E5E5E5","tab.hoverBackground":"#FFFFFF","tab.inactiveBackground":"#F8F8F8","tab.inactiveForeground":"#868686","tab.unfocusedActiveBorder":"#F8F8F8","tab.unfocusedActiveBorderTop":"#E5E5E5","tab.unfocusedHoverBackground":"#F8F8F8","terminalCursor.foreground":"#005FB8","terminal.foreground":"#3B3B3B","terminal.tab.activeBorder":"#005FB8","textBlockQuote.background":"#F8F8F8","textBlockQuote.border":"#E5E5E5","textCodeBlock.background":"#F8F8F8","textLink.activeForeground":"#005FB8","textLink.foreground":"#005FB8","textPreformat.foreground":"#3B3B3B","textPreformat.background":"#0000001F","textSeparator.foreground":"#21262D","titleBar.activeBackground":"#F8F8F8","titleBar.activeForeground":"#1E1E1E","titleBar.border":"#E5E5E5","titleBar.inactiveBackground":"#F8F8F8","titleBar.inactiveForeground":"#8B949E","welcomePage.tileBackground":"#F3F3F3"},Rce={"meta.embedded":{foreground:"#000000ff"},"source.groovy.embedded":{foreground:"#000000ff"},"string meta.image.inline.markdown":{foreground:"#000000ff"},"variable.legacy.builtin.python":{foreground:"#000000ff"},emphasis:{style:"italic"},strong:{style:"bold"},"meta.diff.header":{foreground:"#000080"},comment:{foreground:"#008000"},"constant.language":{foreground:"#0000ff"},"constant.numeric":{foreground:"#098658"},"variable.other.enummember":{foreground:"#0070C1"},"keyword.operator.plus.exponent":{foreground:"#098658"},"keyword.operator.minus.exponent":{foreground:"#098658"},"constant.regexp":{foreground:"#811f3f"},"entity.name.tag":{foreground:"#800000"},"entity.name.selector":{foreground:"#800000"},"entity.other.attribute-name":{foreground:"#e50000"},"entity.other.attribute-name.class.css":{foreground:"#800000"},"source.css entity.other.attribute-name.class":{foreground:"#800000"},"entity.other.attribute-name.id.css":{foreground:"#800000"},"entity.other.attribute-name.parent-selector.css":{foreground:"#800000"},"entity.other.attribute-name.parent.less":{foreground:"#800000"},"source.css entity.other.attribute-name.pseudo-class":{foreground:"#800000"},"entity.other.attribute-name.pseudo-element.css":{foreground:"#800000"},"source.css.less entity.other.attribute-name.id":{foreground:"#800000"},"entity.other.attribute-name.scss":{foreground:"#800000"},invalid:{foreground:"#cd3131"},"markup.underline":{style:"underline"},"markup.bold":{foreground:"#000080",style:"bold"},"markup.heading":{foreground:"#800000",style:"bold"},"markup.italic":{style:"italic"},"markup.strikethrough":{style:"strikethrough"},"markup.inserted":{foreground:"#098658"},"markup.deleted":{foreground:"#a31515"},"markup.changed":{foreground:"#0451a5"},"punctuation.definition.quote.begin.markdown":{foreground:"#0451a5"},"punctuation.definition.list.begin.markdown":{foreground:"#0451a5"},"markup.inline.raw":{foreground:"#800000"},"punctuation.definition.tag":{foreground:"#800000"},"meta.preprocessor":{foreground:"#0000ff"},"entity.name.function.preprocessor":{foreground:"#0000ff"},"meta.preprocessor.string":{foreground:"#a31515"},"meta.preprocessor.numeric":{foreground:"#098658"},"meta.structure.dictionary.key.python":{foreground:"#0451a5"},storage:{foreground:"#0000ff"},"storage.type":{foreground:"#0000ff"},"storage.modifier":{foreground:"#0000ff"},"keyword.operator.noexcept":{foreground:"#0000ff"},string:{foreground:"#a31515"},"meta.embedded.assembly":{foreground:"#a31515"},"string.comment.buffered.block.pug":{foreground:"#0000ff"},"string.quoted.pug":{foreground:"#0000ff"},"string.interpolated.pug":{foreground:"#0000ff"},"string.unquoted.plain.in.yaml":{foreground:"#0000ff"},"string.unquoted.plain.out.yaml":{foreground:"#0000ff"},"string.unquoted.block.yaml":{foreground:"#0000ff"},"string.quoted.single.yaml":{foreground:"#0000ff"},"string.quoted.double.xml":{foreground:"#0000ff"},"string.quoted.single.xml":{foreground:"#0000ff"},"string.unquoted.cdata.xml":{foreground:"#0000ff"},"string.quoted.double.html":{foreground:"#0000ff"},"string.quoted.single.html":{foreground:"#0000ff"},"string.unquoted.html":{foreground:"#0000ff"},"string.quoted.single.handlebars":{foreground:"#0000ff"},"string.quoted.double.handlebars":{foreground:"#0000ff"},"string.regexp":{foreground:"#811f3f"},"punctuation.definition.template-expression.begin":{foreground:"#0000ff"},"punctuation.definition.template-expression.end":{foreground:"#0000ff"},"punctuation.section.embedded":{foreground:"#0000ff"},"meta.template.expression":{foreground:"#000000"},"support.constant.property-value":{foreground:"#0451a5"},"support.constant.font-name":{foreground:"#0451a5"},"support.constant.media-type":{foreground:"#0451a5"},"support.constant.media":{foreground:"#0451a5"},"constant.other.color.rgb-value":{foreground:"#0451a5"},"constant.other.rgb-value":{foreground:"#0451a5"},"support.constant.color":{foreground:"#0451a5"},"support.type.vendored.property-name":{foreground:"#e50000"},"support.type.property-name":{foreground:"#e50000"},"source.css variable":{foreground:"#e50000"},"source.coffee.embedded":{foreground:"#e50000"},"support.type.property-name.json":{foreground:"#0451a5"},keyword:{foreground:"#0000ff"},"keyword.control":{foreground:"#AF00DB"},"keyword.operator":{foreground:"#000000"},"keyword.operator.new":{foreground:"#0000ff"},"keyword.operator.expression":{foreground:"#0000ff"},"keyword.operator.cast":{foreground:"#0000ff"},"keyword.operator.sizeof":{foreground:"#0000ff"},"keyword.operator.alignof":{foreground:"#0000ff"},"keyword.operator.typeid":{foreground:"#0000ff"},"keyword.operator.alignas":{foreground:"#0000ff"},"keyword.operator.instanceof":{foreground:"#0000ff"},"keyword.operator.logical.python":{foreground:"#0000ff"},"keyword.operator.wordlike":{foreground:"#0000ff"},"keyword.other.unit":{foreground:"#098658"},"punctuation.section.embedded.begin.php":{foreground:"#800000"},"punctuation.section.embedded.end.php":{foreground:"#800000"},"support.function.git-rebase":{foreground:"#0451a5"},"constant.sha.git-rebase":{foreground:"#098658"},"storage.modifier.import.java":{foreground:"#000000"},"variable.language.wildcard.java":{foreground:"#000000"},"storage.modifier.package.java":{foreground:"#000000"},"variable.language":{foreground:"#0000ff"},"entity.name.function":{foreground:"#795E26"},"support.function":{foreground:"#795E26"},"support.constant.handlebars":{foreground:"#795E26"},"source.powershell variable.other.member":{foreground:"#795E26"},"entity.name.operator.custom-literal":{foreground:"#795E26"},"support.class":{foreground:"#267f99"},"support.type":{foreground:"#267f99"},"entity.name.type":{foreground:"#267f99"},"entity.name.namespace":{foreground:"#267f99"},"entity.other.attribute":{foreground:"#267f99"},"entity.name.scope-resolution":{foreground:"#267f99"},"entity.name.class":{foreground:"#267f99"},"storage.type.numeric.go":{foreground:"#267f99"},"storage.type.byte.go":{foreground:"#267f99"},"storage.type.boolean.go":{foreground:"#267f99"},"storage.type.string.go":{foreground:"#267f99"},"storage.type.uintptr.go":{foreground:"#267f99"},"storage.type.error.go":{foreground:"#267f99"},"storage.type.rune.go":{foreground:"#267f99"},"storage.type.cs":{foreground:"#267f99"},"storage.type.generic.cs":{foreground:"#267f99"},"storage.type.modifier.cs":{foreground:"#267f99"},"storage.type.variable.cs":{foreground:"#267f99"},"storage.type.annotation.java":{foreground:"#267f99"},"storage.type.generic.java":{foreground:"#267f99"},"storage.type.java":{foreground:"#267f99"},"storage.type.object.array.java":{foreground:"#267f99"},"storage.type.primitive.array.java":{foreground:"#267f99"},"storage.type.primitive.java":{foreground:"#267f99"},"storage.type.token.java":{foreground:"#267f99"},"storage.type.groovy":{foreground:"#267f99"},"storage.type.annotation.groovy":{foreground:"#267f99"},"storage.type.parameters.groovy":{foreground:"#267f99"},"storage.type.generic.groovy":{foreground:"#267f99"},"storage.type.object.array.groovy":{foreground:"#267f99"},"storage.type.primitive.array.groovy":{foreground:"#267f99"},"storage.type.primitive.groovy":{foreground:"#267f99"},"meta.type.cast.expr":{foreground:"#267f99"},"meta.type.new.expr":{foreground:"#267f99"},"support.constant.math":{foreground:"#267f99"},"support.constant.dom":{foreground:"#267f99"},"support.constant.json":{foreground:"#267f99"},"entity.other.inherited-class":{foreground:"#267f99"},"source.cpp keyword.operator.new":{foreground:"#AF00DB"},"source.cpp keyword.operator.delete":{foreground:"#AF00DB"},"keyword.other.using":{foreground:"#AF00DB"},"keyword.other.directive.using":{foreground:"#AF00DB"},"keyword.other.operator":{foreground:"#AF00DB"},"entity.name.operator":{foreground:"#AF00DB"},variable:{foreground:"#001080"},"meta.definition.variable.name":{foreground:"#001080"},"support.variable":{foreground:"#001080"},"entity.name.variable":{foreground:"#001080"},"constant.other.placeholder":{foreground:"#001080"},"variable.other.constant":{foreground:"#0070C1"},"meta.object-literal.key":{foreground:"#001080"},"punctuation.definition.group.regexp":{foreground:"#d16969"},"punctuation.definition.group.assertion.regexp":{foreground:"#d16969"},"punctuation.definition.character-class.regexp":{foreground:"#d16969"},"punctuation.character.set.begin.regexp":{foreground:"#d16969"},"punctuation.character.set.end.regexp":{foreground:"#d16969"},"keyword.operator.negation.regexp":{foreground:"#d16969"},"support.other.parenthesis.regexp":{foreground:"#d16969"},"constant.character.character-class.regexp":{foreground:"#811f3f"},"constant.other.character-class.set.regexp":{foreground:"#811f3f"},"constant.other.character-class.regexp":{foreground:"#811f3f"},"constant.character.set.regexp":{foreground:"#811f3f"},"keyword.operator.quantifier.regexp":{foreground:"#000000"},"keyword.operator.or.regexp":{foreground:"#EE0000"},"keyword.control.anchor.regexp":{foreground:"#EE0000"},"constant.character":{foreground:"#0000ff"},"constant.other.option":{foreground:"#0000ff"},"constant.character.escape":{foreground:"#EE0000"},"entity.name.label":{foreground:"#000000"}},b$={name:Mce,type:Ece,ui:Nce,code:Rce},Wce=""+new URL("dark_plus-_jXt5Hic.json",import.meta.url).href,Ace=""+new URL("light_plus-kxjxhiC_.json",import.meta.url).href,Fce=""+new URL("dark_vs-5mIQ9Fkt.json",import.meta.url).href,Vce=""+new URL("light_vs-tPP3uKoU.json",import.meta.url).href,Pce=""+new URL("abyss-_SJBLiyb.json",import.meta.url).href,Oce="data:application/json;base64,ewogICJuYW1lIjogIiIsCiAgInR5cGUiOiAiZGFyayIsCiAgInVpIjoge30sCiAgImNvZGUiOiB7fQp9",Zce=""+new URL("kimbie-dark-tiBCTYr-.json",import.meta.url).href,Gce=""+new URL("monokai-exTrh5zY.json",import.meta.url).href,Bce=""+new URL("quietlight-GjP0nlwr.json",import.meta.url).href,Xce=""+new URL("red-EQgY7P1b.json",import.meta.url).href,zce=""+new URL("solarized-dark-V1Xmyc1a.json",import.meta.url).href,Hce=""+new URL("solarized-light-aRsP7wqf.json",import.meta.url).href,Uce=""+new URL("tomorrow-night-blue-GMow87lW.json",import.meta.url).href,Yce=""+new URL("hc_black-sEshpHge.json",import.meta.url).href,Kce=""+new URL("hc_light-89Ajhcak.json",import.meta.url).href,jce=""+new URL("github-dark-17lxy6Os.json",import.meta.url).href,Jce=""+new URL("github-dark-default-94TyN3-P.json",import.meta.url).href,$ce=""+new URL("github-dark-dimmed-8IZYKmdq.json",import.meta.url).href,Qce=""+new URL("github-dark-high-contrast-gRe31ZGT.json",import.meta.url).href,qce=""+new URL("github-dark-colorblind-5frKVna7.json",import.meta.url).href,ede=""+new URL("github-light-fGbJTWmB.json",import.meta.url).href,tde=""+new URL("github-light-default-rKTZjzVm.json",import.meta.url).href,ide=""+new URL("github-light-high-contrast-5v9B8pl1.json",import.meta.url).href,nde=""+new URL("github-light-colorblind-ueb1034m.json",import.meta.url).href,sde=""+new URL("OneDark-Pro-vAGfQaiU.json",import.meta.url).href,rde=""+new URL("OneDark-Pro-darker-8Zglf9xF.json",import.meta.url).href,ode=""+new URL("OneDark-Pro-flat-Qeu_l7rA.json",import.meta.url).href,ade=""+new URL("OneDark-Pro-mix--gVV1dc8.json",import.meta.url).href,lde=""+new URL("dracula-YrUf7GB2.json",import.meta.url).href,cde=""+new URL("dracula-soft-hSlJFjcb.json",import.meta.url).href,dde=""+new URL("OneDark-LRY1caEo.json",import.meta.url).href,ude=""+new URL("Material-Theme-Darker-High-Contrast-P7wTIyfA.json",import.meta.url).href,hde=""+new URL("Material-Theme-Darker-330InK91.json",import.meta.url).href,fde=""+new URL("Material-Theme-Deepforest-High-Contrast-CbZ0sM_N.json",import.meta.url).href,gde=""+new URL("Material-Theme-Deepforest-rwafoH2-.json",import.meta.url).href,mde=""+new URL("Material-Theme-Default-High-Contrast-dzGa7GgB.json",import.meta.url).href,pde=""+new URL("Material-Theme-Default-n1APmw20.json",import.meta.url).href,bde=""+new URL("Material-Theme-Lighter-High-Contrast-UsFxVRzG.json",import.meta.url).href,vde=""+new URL("Material-Theme-Lighter-r4yHvZs-.json",import.meta.url).href,_de=""+new URL("Material-Theme-Ocean-High-Contrast-PwWIPDVn.json",import.meta.url).href,wde=""+new URL("Material-Theme-Ocean-5aakk7Dm.json",import.meta.url).href,yde=""+new URL("Material-Theme-Palenight-High-Contrast-T3ODZOkP.json",import.meta.url).href,Sde=""+new URL("Material-Theme-Palenight-jZ9jlKnc.json",import.meta.url).href,Cde=""+new URL("Monokai Classic-oziypU6E.json",import.meta.url).href,Lde=""+new URL("Monokai Pro-nD56CpIN.json",import.meta.url).href,kde=""+new URL("Monokai Pro (Filter Machine)-TIBCl2J0.json",import.meta.url).href,xde=""+new URL("Monokai Pro (Filter Octagon)-F7GU58y6.json",import.meta.url).href,Tde=""+new URL("Monokai Pro (Filter Ristretto)-_CmQ_wxD.json",import.meta.url).href,Dde=""+new URL("Monokai Pro (Filter Spectrum)-tker_IiS.json",import.meta.url).href,Ide=""+new URL("WinterIsComing-dark-blue-color-theme-QDY1yfCm.json",import.meta.url).href,Mde=""+new URL("WinterIsComing-dark-blue-color-no-italics-theme-c4KNameA.json",import.meta.url).href,Ede=""+new URL("WinterIsComing-dark-color-theme-lqPw2HRY.json",import.meta.url).href,Nde=""+new URL("WinterIsComing-dark-color-no-italics-theme-M6gjNdBC.json",import.meta.url).href,Rde=""+new URL("WinterIsComing-light-color-theme-vRSw0Fsk.json",import.meta.url).href,Wde=""+new URL("WinterIsComing-light-color-no-italics-theme-OCtHpnCQ.json",import.meta.url).href,Ade=""+new URL("nord-color-theme-bo4QN9js.json",import.meta.url).href,Fde=""+new URL("Night Owl-color-theme--6_6pTbu.json",import.meta.url).href,Vde=""+new URL("Night Owl-color-theme-noitalic-SqAxGYrY.json",import.meta.url).href,Pde=""+new URL("Night Owl-Light-color-theme-GAS2tC0h.json",import.meta.url).href,Ode=""+new URL("Night Owl-Light-color-theme-noitalic-HGdFKhw2.json",import.meta.url).href,Zde=""+new URL("ayu-dark-zlvop4S6.json",import.meta.url).href,Gde=""+new URL("ayu-dark-bordered-P1Fld3_R.json",import.meta.url).href,Bde=""+new URL("ayu-light--7utdipD.json",import.meta.url).href,Xde=""+new URL("ayu-light-bordered-uaOgn1o_.json",import.meta.url).href,zde=""+new URL("ayu-mirage-wiIfmqGo.json",import.meta.url).href,Hde=""+new URL("ayu-mirage-bordered-K7lQJ_aH.json",import.meta.url).href,Ude=""+new URL("synthwave-color-theme-m7PwMmWm.json",import.meta.url).href,Yde=""+new URL("shades-of-purple-color-theme-ma4vtJmI.json",import.meta.url).href,Kde=""+new URL("shades-of-purple-color-theme-super-dark-Z8EKiPcd.json",import.meta.url).href,jde=""+new URL("catppuccin-frappe-_czCnIUd.json",import.meta.url).href,Jde=""+new URL("catppuccin-latte-Rn_4gE4p.json",import.meta.url).href,$de=""+new URL("catppuccin-macchiato-T73X_Qio.json",import.meta.url).href,Qde=""+new URL("catppuccin-mocha-LxjPSDax.json",import.meta.url).href,qde=""+new URL("tokyo-night-color-theme-WGWlHXpp.json",import.meta.url).href,eue=""+new URL("tokyo-night-light-color-theme-7_BWmUGU.json",import.meta.url).href,tue=""+new URL("tokyo-night-storm-color-theme-4wUq-Y8e.json",import.meta.url).href,iue=""+new URL("JellyFish Theme-color-theme-6uAUsuIF.json",import.meta.url).href,nue=""+new URL("gruvbox-dark-hard-jSrqxUJp.json",import.meta.url).href,sue=""+new URL("gruvbox-dark-medium-tZB5QuRS.json",import.meta.url).href,rue=""+new URL("gruvbox-dark-soft-seZLVJxl.json",import.meta.url).href,oue=""+new URL("gruvbox-light-hard-ByYmFbJn.json",import.meta.url).href,aue=""+new URL("gruvbox-light-medium-DVDq5iJn.json",import.meta.url).href,lue=""+new URL("gruvbox-light-soft-fRY7CXe-.json",import.meta.url).href,cue=""+new URL("kanagawa-color-theme-ol5dHvqa.json",import.meta.url).href,QF=$F,due=b$,uue=$F,qF={type:uue.type};async function gt(n){return await(await fetch(n)).json()}const e4=[{id:"Default Dark Modern",name:"Dark Modern",available:!0,load:()=>new Promise(n=>n($F))},{id:"Default Dark+",name:"Dark Plus",available:!0,load:()=>gt(Wce)},{id:"Visual Studio Dark ",name:"Dark (Visual Studio)",available:!0,load:()=>gt(Fce)},{id:"Default Light Modern",name:"Light Modern",available:!0,load:()=>new Promise(n=>n(b$))},{id:"Default Light+",name:"Light Plus",available:!0,load:()=>gt(Ace)},{id:"Visual Studio Light",name:"Light (Visual Studio)",available:!0,load:()=>gt(Vce)},{id:"GitHub Dark",name:"GitHub Dark",available:!0,load:()=>gt(jce)},{id:"GitHub Dark Default",name:"GitHub Dark Default",available:!0,load:()=>gt(Jce)},{id:"GitHub Dark Dimmed",name:"GitHub Dark Dimmed",available:!0,load:()=>gt($ce)},{id:"GitHub Dark High Contrast",name:"GitHub Dark High Contrast",available:!0,load:()=>gt(Qce)},{id:"GitHub Dark Colorblind (Beta)",name:"GitHub Dark Colorblind",available:!0,load:()=>gt(qce)},{id:"GitHub Light",name:"GitHub Light",available:!0,load:()=>gt(ede)},{id:"GitHub Light Default",name:"GitHub Light Default",available:!0,load:()=>gt(tde)},{id:"GitHub Light High Contrast",name:"GitHub Light High Contrast",available:!0,load:()=>gt(ide)},{id:"GitHub Light Colorblind (Beta)",name:"GitHub Light Colorblind",available:!0,load:()=>gt(nde)},{id:"One Dark Pro",name:"One Dark Pro",available:!0,load:()=>gt(sde)},{id:"One Dark Pro Darker",name:"One Dark Pro Darker",available:!0,load:()=>gt(rde)},{id:"One Dark Pro Flat",name:"One Dark Pro Flat",available:!0,load:()=>gt(ode)},{id:"One Dark Pro Mix",name:"One Dark Pro Mix",available:!0,load:()=>gt(ade)},{id:"Dracula Theme",name:"Dracula",available:!0,load:()=>gt(lde)},{id:"Dracula Theme Soft",name:"Dracula Soft",available:!0,load:()=>gt(cde)},{id:"Synthwave '84",name:"Synthwave '84",available:!0,load:()=>gt(Ude)},{id:"Shades of Purple",name:"Shades of Purple",available:!0,load:()=>gt(Yde)},{id:"Shades of Purple (Super Dark)",name:"Shades of Purple (Super Dark)",available:!0,load:()=>gt(Kde)},{id:"Tokyo Night",name:"Tokyo Night",available:!0,load:()=>gt(qde)},{id:"Tokyo Night Light",name:"Tokyo Night Light",available:!0,load:()=>gt(eue)},{id:"Tokyo Night Storm",name:"Tokyo Night Storm",available:!0,load:()=>gt(tue)},{id:"Catppuccin Latte",name:"Catppuccin Latte",available:!0,load:()=>gt(Jde)},{id:"Catppuccin Mocha",name:"Catppuccin Mocha",available:!0,load:()=>gt(Qde)},{id:"Catppuccin Macchiato",name:"Catppuccin Macchiato",available:!0,load:()=>gt($de)},{id:"Catppuccin Frapp",name:"Catppuccin Frapp",available:!0,load:()=>gt(jde)},{id:"Gruvbox Dark Hard",name:"Gruvbox Dark Hard",available:!0,load:()=>gt(nue)},{id:"Gruvbox Dark Medium",name:"Gruvbox Dark Medium",available:!0,load:()=>gt(sue)},{id:"Gruvbox Dark Soft",name:"Gruvbox Dark Soft",available:!0,load:()=>gt(rue)},{id:"Gruvbox Light Hard",name:"Gruvbox Light Hard",available:!0,load:()=>gt(oue)},{id:"Gruvbox Light Medium",name:"Gruvbox Light Medium",available:!0,load:()=>gt(aue)},{id:"Gruvbox Light Soft",name:"Gruvbox Light Soft",available:!0,load:()=>gt(lue)},{id:"Kanagawa",name:"Kanagawa",available:!0,load:()=>gt(cue)},{id:"Nord",name:"Nord",available:!0,load:()=>gt(Ade)},{id:"JellyFish",name:"JellyFish",available:!0,load:()=>gt(iue)},{id:"Atom One Dark",name:"Atom One Dark",available:!0,load:()=>gt(dde)},{id:"Material Theme",name:"Material Theme",available:!0,load:()=>gt(pde)},{id:"Material Theme High Contrast",name:"Material Theme High Contrast",available:!0,load:()=>gt(mde)},{id:"Material Theme Darker",name:"Material Theme Darker",available:!0,load:()=>gt(hde)},{id:"Material Theme Darker High Contrast",name:"Material Theme Darker High Contrast",available:!0,load:()=>gt(ude)},{id:"Material Theme Deepforest",name:"Material Theme Deepforest",available:!0,load:()=>gt(gde)},{id:"Material Theme Deepforest High Contrast",name:"Material Theme Deepforest High Contrast",available:!0,load:()=>gt(fde)},{id:"Material Theme Lighter",name:"Material Theme Lighter",available:!0,load:()=>gt(vde)},{id:"Material Theme Lighter High Contrast",name:"Material Theme Lighter High Contrast",available:!0,load:()=>gt(bde)},{id:"Material Theme Ocean",name:"Material Theme Ocean",available:!0,load:()=>gt(wde)},{id:"Material Theme Ocean High Contrast",name:"Material Theme Ocean High Contrast",available:!0,load:()=>gt(_de)},{id:"Material Theme Palenight",name:"Material Theme Palenight",available:!0,load:()=>gt(Sde)},{id:"Material Theme Palenight High Contrast",name:"Material Theme Palenight High Contrast",available:!0,load:()=>gt(yde)},{id:"Monokai Classic",name:"Monokai Classic",available:!0,load:()=>gt(Cde)},{id:"Monokai Pro",name:"Monokai Pro",available:!0,load:()=>gt(Lde)},{id:"Monokai Pro (Filter Machine)",name:"Monokai Pro (Filter Machine)",available:!0,load:()=>gt(kde)},{id:"Monokai Pro (Filter Octagon)",name:"Monokai Pro (Filter Octagon)",available:!0,load:()=>gt(xde)},{id:"Monokai Pro (Filter Ristretto)",name:"Monokai Pro (Filter Ristretto)",available:!0,load:()=>gt(Tde)},{id:"Monokai Pro (Filter Spectrum)",name:"Monokai Pro (Filter Spectrum)",available:!0,load:()=>gt(Dde)},{id:"Night Owl",name:"Night Owl",available:!0,load:()=>gt(Fde)},{id:"Night Owl (No Italics)",name:"Night Owl (No Italics)",available:!0,load:()=>gt(Vde)},{id:"Night Owl Light",name:"Night Owl Light",available:!0,load:()=>gt(Pde)},{id:"Night Owl Light (No Italics)",name:"Night Owl Light (No Italics)",available:!0,load:()=>gt(Ode)},{id:"Ayu Dark",name:"Ayu Dark",available:!0,load:()=>gt(Zde)},{id:"Ayu Dark Bordered",name:"Ayu Dark Bordered",available:!0,load:()=>gt(Gde)},{id:"Ayu Light",name:"Ayu Light",available:!0,load:()=>gt(Bde)},{id:"Ayu Light Bordered",name:"Ayu Light Bordered",available:!0,load:()=>gt(Xde)},{id:"Ayu Mirage",name:"Ayu Mirage",available:!0,load:()=>gt(zde)},{id:"Ayu Mirage Bordered",name:"Ayu Mirage Bordered",available:!0,load:()=>gt(Hde)},{id:"Winter is Coming (Dark Black)",name:"Winter is Coming (Dark Black)",available:!0,load:()=>gt(Ede)},{id:"Winter is Coming (Dark Black - No Italics)",name:"Winter is Coming (Dark Black - No Italics)",available:!0,load:()=>gt(Nde)},{id:"Winter is Coming (Dark Blue)",name:"Winter is Coming (Dark Blue)",available:!0,load:()=>gt(Ide)},{id:"Winter is Coming (Dark Blue - No Italics)",name:"Winter is Coming (Dark Blue - No Italics)",available:!0,load:()=>gt(Mde)},{id:"Winter is Coming (Light)",name:"Winter is Coming (Light)",available:!0,load:()=>gt(Rde)},{id:"Winter is Coming (Light - No Italics)",name:"Winter is Coming (Light - No Italics)",available:!0,load:()=>gt(Wde)},{id:"Abyss",name:"Abyss",available:!0,load:()=>gt(Pce)},{id:"Kimbie Dark",name:"Kimbie Dark",available:!0,load:()=>gt(Zce)},{id:"Monokai",name:"Monokai",available:!0,load:()=>gt(Gce)},{id:"Monokai Dimmed ",name:"Monokai Dimmed",available:!1,load:()=>gt(Oce)},{id:"Quiet Light",name:"Quiet Light",available:!0,load:()=>gt(Bce)},{id:"Red",name:"Red",available:!0,load:()=>gt(Xce)},{id:"Solarized Dark",name:"Solarized Dark",available:!0,load:()=>gt(zce)},{id:"Solarized Light",name:"Solarized Light",available:!0,load:()=>gt(Hce)},{id:"Tomorrow Night Blue",name:"Tomorrow Night Blue",available:!0,load:()=>gt(Uce)},{id:"Default High Contrast",name:"High Contrast Dark",available:!0,load:()=>gt(Yce)},{id:"Default High Contrast Light",name:"High Contrast Light",available:!0,load:()=>gt(Kce)}];async function lZ(n,e){const t=e4.find(i=>i.id===n);return e?t?await t.load():e==="light"?due:QF:t?await t.load():void 0}const v$=new n$;function _$(n){qF.type=n,v$.next()}const t4=v$;var Yn=(n=>(n[n.Null=0]="Null",n[n.Backspace=8]="Backspace",n[n.Tab=9]="Tab",n[n.LineFeed=10]="LineFeed",n[n.CarriageReturn=13]="CarriageReturn",n[n.Space=32]="Space",n[n.ExclamationMark=33]="ExclamationMark",n[n.DoubleQuote=34]="DoubleQuote",n[n.Hash=35]="Hash",n[n.DollarSign=36]="DollarSign",n[n.PercentSign=37]="PercentSign",n[n.Ampersand=38]="Ampersand",n[n.SingleQuote=39]="SingleQuote",n[n.OpenParen=40]="OpenParen",n[n.CloseParen=41]="CloseParen",n[n.Asterisk=42]="Asterisk",n[n.Plus=43]="Plus",n[n.Comma=44]="Comma",n[n.Dash=45]="Dash",n[n.Period=46]="Period",n[n.Slash=47]="Slash",n[n.Digit0=48]="Digit0",n[n.Digit1=49]="Digit1",n[n.Digit2=50]="Digit2",n[n.Digit3=51]="Digit3",n[n.Digit4=52]="Digit4",n[n.Digit5=53]="Digit5",n[n.Digit6=54]="Digit6",n[n.Digit7=55]="Digit7",n[n.Digit8=56]="Digit8",n[n.Digit9=57]="Digit9",n[n.Colon=58]="Colon",n[n.Semicolon=59]="Semicolon",n[n.LessThan=60]="LessThan",n[n.Equals=61]="Equals",n[n.GreaterThan=62]="GreaterThan",n[n.QuestionMark=63]="QuestionMark",n[n.AtSign=64]="AtSign",n[n.A=65]="A",n[n.B=66]="B",n[n.C=67]="C",n[n.D=68]="D",n[n.E=69]="E",n[n.F=70]="F",n[n.G=71]="G",n[n.H=72]="H",n[n.I=73]="I",n[n.J=74]="J",n[n.K=75]="K",n[n.L=76]="L",n[n.M=77]="M",n[n.N=78]="N",n[n.O=79]="O",n[n.P=80]="P",n[n.Q=81]="Q",n[n.R=82]="R",n[n.S=83]="S",n[n.T=84]="T",n[n.U=85]="U",n[n.V=86]="V",n[n.W=87]="W",n[n.X=88]="X",n[n.Y=89]="Y",n[n.Z=90]="Z",n[n.OpenSquareBracket=91]="OpenSquareBracket",n[n.Backslash=92]="Backslash",n[n.CloseSquareBracket=93]="CloseSquareBracket",n[n.Caret=94]="Caret",n[n.Underline=95]="Underline",n[n.BackTick=96]="BackTick",n[n.a=97]="a",n[n.b=98]="b",n[n.c=99]="c",n[n.d=100]="d",n[n.e=101]="e",n[n.f=102]="f",n[n.g=103]="g",n[n.h=104]="h",n[n.i=105]="i",n[n.j=106]="j",n[n.k=107]="k",n[n.l=108]="l",n[n.m=109]="m",n[n.n=110]="n",n[n.o=111]="o",n[n.p=112]="p",n[n.q=113]="q",n[n.r=114]="r",n[n.s=115]="s",n[n.t=116]="t",n[n.u=117]="u",n[n.v=118]="v",n[n.w=119]="w",n[n.x=120]="x",n[n.y=121]="y",n[n.z=122]="z",n[n.OpenCurlyBrace=123]="OpenCurlyBrace",n[n.Pipe=124]="Pipe",n[n.CloseCurlyBrace=125]="CloseCurlyBrace",n[n.Tilde=126]="Tilde",n[n.NoBreakSpace=160]="NoBreakSpace",n[n.U_Combining_Grave_Accent=768]="U_Combining_Grave_Accent",n[n.U_Combining_Acute_Accent=769]="U_Combining_Acute_Accent",n[n.U_Combining_Circumflex_Accent=770]="U_Combining_Circumflex_Accent",n[n.U_Combining_Tilde=771]="U_Combining_Tilde",n[n.U_Combining_Macron=772]="U_Combining_Macron",n[n.U_Combining_Overline=773]="U_Combining_Overline",n[n.U_Combining_Breve=774]="U_Combining_Breve",n[n.U_Combining_Dot_Above=775]="U_Combining_Dot_Above",n[n.U_Combining_Diaeresis=776]="U_Combining_Diaeresis",n[n.U_Combining_Hook_Above=777]="U_Combining_Hook_Above",n[n.U_Combining_Ring_Above=778]="U_Combining_Ring_Above",n[n.U_Combining_Double_Acute_Accent=779]="U_Combining_Double_Acute_Accent",n[n.U_Combining_Caron=780]="U_Combining_Caron",n[n.U_Combining_Vertical_Line_Above=781]="U_Combining_Vertical_Line_Above",n[n.U_Combining_Double_Vertical_Line_Above=782]="U_Combining_Double_Vertical_Line_Above",n[n.U_Combining_Double_Grave_Accent=783]="U_Combining_Double_Grave_Accent",n[n.U_Combining_Candrabindu=784]="U_Combining_Candrabindu",n[n.U_Combining_Inverted_Breve=785]="U_Combining_Inverted_Breve",n[n.U_Combining_Turned_Comma_Above=786]="U_Combining_Turned_Comma_Above",n[n.U_Combining_Comma_Above=787]="U_Combining_Comma_Above",n[n.U_Combining_Reversed_Comma_Above=788]="U_Combining_Reversed_Comma_Above",n[n.U_Combining_Comma_Above_Right=789]="U_Combining_Comma_Above_Right",n[n.U_Combining_Grave_Accent_Below=790]="U_Combining_Grave_Accent_Below",n[n.U_Combining_Acute_Accent_Below=791]="U_Combining_Acute_Accent_Below",n[n.U_Combining_Left_Tack_Below=792]="U_Combining_Left_Tack_Below",n[n.U_Combining_Right_Tack_Below=793]="U_Combining_Right_Tack_Below",n[n.U_Combining_Left_Angle_Above=794]="U_Combining_Left_Angle_Above",n[n.U_Combining_Horn=795]="U_Combining_Horn",n[n.U_Combining_Left_Half_Ring_Below=796]="U_Combining_Left_Half_Ring_Below",n[n.U_Combining_Up_Tack_Below=797]="U_Combining_Up_Tack_Below",n[n.U_Combining_Down_Tack_Below=798]="U_Combining_Down_Tack_Below",n[n.U_Combining_Plus_Sign_Below=799]="U_Combining_Plus_Sign_Below",n[n.U_Combining_Minus_Sign_Below=800]="U_Combining_Minus_Sign_Below",n[n.U_Combining_Palatalized_Hook_Below=801]="U_Combining_Palatalized_Hook_Below",n[n.U_Combining_Retroflex_Hook_Below=802]="U_Combining_Retroflex_Hook_Below",n[n.U_Combining_Dot_Below=803]="U_Combining_Dot_Below",n[n.U_Combining_Diaeresis_Below=804]="U_Combining_Diaeresis_Below",n[n.U_Combining_Ring_Below=805]="U_Combining_Ring_Below",n[n.U_Combining_Comma_Below=806]="U_Combining_Comma_Below",n[n.U_Combining_Cedilla=807]="U_Combining_Cedilla",n[n.U_Combining_Ogonek=808]="U_Combining_Ogonek",n[n.U_Combining_Vertical_Line_Below=809]="U_Combining_Vertical_Line_Below",n[n.U_Combining_Bridge_Below=810]="U_Combining_Bridge_Below",n[n.U_Combining_Inverted_Double_Arch_Below=811]="U_Combining_Inverted_Double_Arch_Below",n[n.U_Combining_Caron_Below=812]="U_Combining_Caron_Below",n[n.U_Combining_Circumflex_Accent_Below=813]="U_Combining_Circumflex_Accent_Below",n[n.U_Combining_Breve_Below=814]="U_Combining_Breve_Below",n[n.U_Combining_Inverted_Breve_Below=815]="U_Combining_Inverted_Breve_Below",n[n.U_Combining_Tilde_Below=816]="U_Combining_Tilde_Below",n[n.U_Combining_Macron_Below=817]="U_Combining_Macron_Below",n[n.U_Combining_Low_Line=818]="U_Combining_Low_Line",n[n.U_Combining_Double_Low_Line=819]="U_Combining_Double_Low_Line",n[n.U_Combining_Tilde_Overlay=820]="U_Combining_Tilde_Overlay",n[n.U_Combining_Short_Stroke_Overlay=821]="U_Combining_Short_Stroke_Overlay",n[n.U_Combining_Long_Stroke_Overlay=822]="U_Combining_Long_Stroke_Overlay",n[n.U_Combining_Short_Solidus_Overlay=823]="U_Combining_Short_Solidus_Overlay",n[n.U_Combining_Long_Solidus_Overlay=824]="U_Combining_Long_Solidus_Overlay",n[n.U_Combining_Right_Half_Ring_Below=825]="U_Combining_Right_Half_Ring_Below",n[n.U_Combining_Inverted_Bridge_Below=826]="U_Combining_Inverted_Bridge_Below",n[n.U_Combining_Square_Below=827]="U_Combining_Square_Below",n[n.U_Combining_Seagull_Below=828]="U_Combining_Seagull_Below",n[n.U_Combining_X_Above=829]="U_Combining_X_Above",n[n.U_Combining_Vertical_Tilde=830]="U_Combining_Vertical_Tilde",n[n.U_Combining_Double_Overline=831]="U_Combining_Double_Overline",n[n.U_Combining_Grave_Tone_Mark=832]="U_Combining_Grave_Tone_Mark",n[n.U_Combining_Acute_Tone_Mark=833]="U_Combining_Acute_Tone_Mark",n[n.U_Combining_Greek_Perispomeni=834]="U_Combining_Greek_Perispomeni",n[n.U_Combining_Greek_Koronis=835]="U_Combining_Greek_Koronis",n[n.U_Combining_Greek_Dialytika_Tonos=836]="U_Combining_Greek_Dialytika_Tonos",n[n.U_Combining_Greek_Ypogegrammeni=837]="U_Combining_Greek_Ypogegrammeni",n[n.U_Combining_Bridge_Above=838]="U_Combining_Bridge_Above",n[n.U_Combining_Equals_Sign_Below=839]="U_Combining_Equals_Sign_Below",n[n.U_Combining_Double_Vertical_Line_Below=840]="U_Combining_Double_Vertical_Line_Below",n[n.U_Combining_Left_Angle_Below=841]="U_Combining_Left_Angle_Below",n[n.U_Combining_Not_Tilde_Above=842]="U_Combining_Not_Tilde_Above",n[n.U_Combining_Homothetic_Above=843]="U_Combining_Homothetic_Above",n[n.U_Combining_Almost_Equal_To_Above=844]="U_Combining_Almost_Equal_To_Above",n[n.U_Combining_Left_Right_Arrow_Below=845]="U_Combining_Left_Right_Arrow_Below",n[n.U_Combining_Upwards_Arrow_Below=846]="U_Combining_Upwards_Arrow_Below",n[n.U_Combining_Grapheme_Joiner=847]="U_Combining_Grapheme_Joiner",n[n.U_Combining_Right_Arrowhead_Above=848]="U_Combining_Right_Arrowhead_Above",n[n.U_Combining_Left_Half_Ring_Above=849]="U_Combining_Left_Half_Ring_Above",n[n.U_Combining_Fermata=850]="U_Combining_Fermata",n[n.U_Combining_X_Below=851]="U_Combining_X_Below",n[n.U_Combining_Left_Arrowhead_Below=852]="U_Combining_Left_Arrowhead_Below",n[n.U_Combining_Right_Arrowhead_Below=853]="U_Combining_Right_Arrowhead_Below",n[n.U_Combining_Right_Arrowhead_And_Up_Arrowhead_Below=854]="U_Combining_Right_Arrowhead_And_Up_Arrowhead_Below",n[n.U_Combining_Right_Half_Ring_Above=855]="U_Combining_Right_Half_Ring_Above",n[n.U_Combining_Dot_Above_Right=856]="U_Combining_Dot_Above_Right",n[n.U_Combining_Asterisk_Below=857]="U_Combining_Asterisk_Below",n[n.U_Combining_Double_Ring_Below=858]="U_Combining_Double_Ring_Below",n[n.U_Combining_Zigzag_Above=859]="U_Combining_Zigzag_Above",n[n.U_Combining_Double_Breve_Below=860]="U_Combining_Double_Breve_Below",n[n.U_Combining_Double_Breve=861]="U_Combining_Double_Breve",n[n.U_Combining_Double_Macron=862]="U_Combining_Double_Macron",n[n.U_Combining_Double_Macron_Below=863]="U_Combining_Double_Macron_Below",n[n.U_Combining_Double_Tilde=864]="U_Combining_Double_Tilde",n[n.U_Combining_Double_Inverted_Breve=865]="U_Combining_Double_Inverted_Breve",n[n.U_Combining_Double_Rightwards_Arrow_Below=866]="U_Combining_Double_Rightwards_Arrow_Below",n[n.U_Combining_Latin_Small_Letter_A=867]="U_Combining_Latin_Small_Letter_A",n[n.U_Combining_Latin_Small_Letter_E=868]="U_Combining_Latin_Small_Letter_E",n[n.U_Combining_Latin_Small_Letter_I=869]="U_Combining_Latin_Small_Letter_I",n[n.U_Combining_Latin_Small_Letter_O=870]="U_Combining_Latin_Small_Letter_O",n[n.U_Combining_Latin_Small_Letter_U=871]="U_Combining_Latin_Small_Letter_U",n[n.U_Combining_Latin_Small_Letter_C=872]="U_Combining_Latin_Small_Letter_C",n[n.U_Combining_Latin_Small_Letter_D=873]="U_Combining_Latin_Small_Letter_D",n[n.U_Combining_Latin_Small_Letter_H=874]="U_Combining_Latin_Small_Letter_H",n[n.U_Combining_Latin_Small_Letter_M=875]="U_Combining_Latin_Small_Letter_M",n[n.U_Combining_Latin_Small_Letter_R=876]="U_Combining_Latin_Small_Letter_R",n[n.U_Combining_Latin_Small_Letter_T=877]="U_Combining_Latin_Small_Letter_T",n[n.U_Combining_Latin_Small_Letter_V=878]="U_Combining_Latin_Small_Letter_V",n[n.U_Combining_Latin_Small_Letter_X=879]="U_Combining_Latin_Small_Letter_X",n[n.LINE_SEPARATOR=8232]="LINE_SEPARATOR",n[n.PARAGRAPH_SEPARATOR=8233]="PARAGRAPH_SEPARATOR",n[n.NEXT_LINE=133]="NEXT_LINE",n[n.U_CIRCUMFLEX=94]="U_CIRCUMFLEX",n[n.U_GRAVE_ACCENT=96]="U_GRAVE_ACCENT",n[n.U_DIAERESIS=168]="U_DIAERESIS",n[n.U_MACRON=175]="U_MACRON",n[n.U_ACUTE_ACCENT=180]="U_ACUTE_ACCENT",n[n.U_CEDILLA=184]="U_CEDILLA",n[n.U_MODIFIER_LETTER_LEFT_ARROWHEAD=706]="U_MODIFIER_LETTER_LEFT_ARROWHEAD",n[n.U_MODIFIER_LETTER_RIGHT_ARROWHEAD=707]="U_MODIFIER_LETTER_RIGHT_ARROWHEAD",n[n.U_MODIFIER_LETTER_UP_ARROWHEAD=708]="U_MODIFIER_LETTER_UP_ARROWHEAD",n[n.U_MODIFIER_LETTER_DOWN_ARROWHEAD=709]="U_MODIFIER_LETTER_DOWN_ARROWHEAD",n[n.U_MODIFIER_LETTER_CENTRED_RIGHT_HALF_RING=722]="U_MODIFIER_LETTER_CENTRED_RIGHT_HALF_RING",n[n.U_MODIFIER_LETTER_CENTRED_LEFT_HALF_RING=723]="U_MODIFIER_LETTER_CENTRED_LEFT_HALF_RING",n[n.U_MODIFIER_LETTER_UP_TACK=724]="U_MODIFIER_LETTER_UP_TACK",n[n.U_MODIFIER_LETTER_DOWN_TACK=725]="U_MODIFIER_LETTER_DOWN_TACK",n[n.U_MODIFIER_LETTER_PLUS_SIGN=726]="U_MODIFIER_LETTER_PLUS_SIGN",n[n.U_MODIFIER_LETTER_MINUS_SIGN=727]="U_MODIFIER_LETTER_MINUS_SIGN",n[n.U_BREVE=728]="U_BREVE",n[n.U_DOT_ABOVE=729]="U_DOT_ABOVE",n[n.U_RING_ABOVE=730]="U_RING_ABOVE",n[n.U_OGONEK=731]="U_OGONEK",n[n.U_SMALL_TILDE=732]="U_SMALL_TILDE",n[n.U_DOUBLE_ACUTE_ACCENT=733]="U_DOUBLE_ACUTE_ACCENT",n[n.U_MODIFIER_LETTER_RHOTIC_HOOK=734]="U_MODIFIER_LETTER_RHOTIC_HOOK",n[n.U_MODIFIER_LETTER_CROSS_ACCENT=735]="U_MODIFIER_LETTER_CROSS_ACCENT",n[n.U_MODIFIER_LETTER_EXTRA_HIGH_TONE_BAR=741]="U_MODIFIER_LETTER_EXTRA_HIGH_TONE_BAR",n[n.U_MODIFIER_LETTER_HIGH_TONE_BAR=742]="U_MODIFIER_LETTER_HIGH_TONE_BAR",n[n.U_MODIFIER_LETTER_MID_TONE_BAR=743]="U_MODIFIER_LETTER_MID_TONE_BAR",n[n.U_MODIFIER_LETTER_LOW_TONE_BAR=744]="U_MODIFIER_LETTER_LOW_TONE_BAR",n[n.U_MODIFIER_LETTER_EXTRA_LOW_TONE_BAR=745]="U_MODIFIER_LETTER_EXTRA_LOW_TONE_BAR",n[n.U_MODIFIER_LETTER_YIN_DEPARTING_TONE_MARK=746]="U_MODIFIER_LETTER_YIN_DEPARTING_TONE_MARK",n[n.U_MODIFIER_LETTER_YANG_DEPARTING_TONE_MARK=747]="U_MODIFIER_LETTER_YANG_DEPARTING_TONE_MARK",n[n.U_MODIFIER_LETTER_UNASPIRATED=749]="U_MODIFIER_LETTER_UNASPIRATED",n[n.U_MODIFIER_LETTER_LOW_DOWN_ARROWHEAD=751]="U_MODIFIER_LETTER_LOW_DOWN_ARROWHEAD",n[n.U_MODIFIER_LETTER_LOW_UP_ARROWHEAD=752]="U_MODIFIER_LETTER_LOW_UP_ARROWHEAD",n[n.U_MODIFIER_LETTER_LOW_LEFT_ARROWHEAD=753]="U_MODIFIER_LETTER_LOW_LEFT_ARROWHEAD",n[n.U_MODIFIER_LETTER_LOW_RIGHT_ARROWHEAD=754]="U_MODIFIER_LETTER_LOW_RIGHT_ARROWHEAD",n[n.U_MODIFIER_LETTER_LOW_RING=755]="U_MODIFIER_LETTER_LOW_RING",n[n.U_MODIFIER_LETTER_MIDDLE_GRAVE_ACCENT=756]="U_MODIFIER_LETTER_MIDDLE_GRAVE_ACCENT",n[n.U_MODIFIER_LETTER_MIDDLE_DOUBLE_GRAVE_ACCENT=757]="U_MODIFIER_LETTER_MIDDLE_DOUBLE_GRAVE_ACCENT",n[n.U_MODIFIER_LETTER_MIDDLE_DOUBLE_ACUTE_ACCENT=758]="U_MODIFIER_LETTER_MIDDLE_DOUBLE_ACUTE_ACCENT",n[n.U_MODIFIER_LETTER_LOW_TILDE=759]="U_MODIFIER_LETTER_LOW_TILDE",n[n.U_MODIFIER_LETTER_RAISED_COLON=760]="U_MODIFIER_LETTER_RAISED_COLON",n[n.U_MODIFIER_LETTER_BEGIN_HIGH_TONE=761]="U_MODIFIER_LETTER_BEGIN_HIGH_TONE",n[n.U_MODIFIER_LETTER_END_HIGH_TONE=762]="U_MODIFIER_LETTER_END_HIGH_TONE",n[n.U_MODIFIER_LETTER_BEGIN_LOW_TONE=763]="U_MODIFIER_LETTER_BEGIN_LOW_TONE",n[n.U_MODIFIER_LETTER_END_LOW_TONE=764]="U_MODIFIER_LETTER_END_LOW_TONE",n[n.U_MODIFIER_LETTER_SHELF=765]="U_MODIFIER_LETTER_SHELF",n[n.U_MODIFIER_LETTER_OPEN_SHELF=766]="U_MODIFIER_LETTER_OPEN_SHELF",n[n.U_MODIFIER_LETTER_LOW_LEFT_ARROW=767]="U_MODIFIER_LETTER_LOW_LEFT_ARROW",n[n.U_GREEK_LOWER_NUMERAL_SIGN=885]="U_GREEK_LOWER_NUMERAL_SIGN",n[n.U_GREEK_TONOS=900]="U_GREEK_TONOS",n[n.U_GREEK_DIALYTIKA_TONOS=901]="U_GREEK_DIALYTIKA_TONOS",n[n.U_GREEK_KORONIS=8125]="U_GREEK_KORONIS",n[n.U_GREEK_PSILI=8127]="U_GREEK_PSILI",n[n.U_GREEK_PERISPOMENI=8128]="U_GREEK_PERISPOMENI",n[n.U_GREEK_DIALYTIKA_AND_PERISPOMENI=8129]="U_GREEK_DIALYTIKA_AND_PERISPOMENI",n[n.U_GREEK_PSILI_AND_VARIA=8141]="U_GREEK_PSILI_AND_VARIA",n[n.U_GREEK_PSILI_AND_OXIA=8142]="U_GREEK_PSILI_AND_OXIA",n[n.U_GREEK_PSILI_AND_PERISPOMENI=8143]="U_GREEK_PSILI_AND_PERISPOMENI",n[n.U_GREEK_DASIA_AND_VARIA=8157]="U_GREEK_DASIA_AND_VARIA",n[n.U_GREEK_DASIA_AND_OXIA=8158]="U_GREEK_DASIA_AND_OXIA",n[n.U_GREEK_DASIA_AND_PERISPOMENI=8159]="U_GREEK_DASIA_AND_PERISPOMENI",n[n.U_GREEK_DIALYTIKA_AND_VARIA=8173]="U_GREEK_DIALYTIKA_AND_VARIA",n[n.U_GREEK_DIALYTIKA_AND_OXIA=8174]="U_GREEK_DIALYTIKA_AND_OXIA",n[n.U_GREEK_VARIA=8175]="U_GREEK_VARIA",n[n.U_GREEK_OXIA=8189]="U_GREEK_OXIA",n[n.U_GREEK_DASIA=8190]="U_GREEK_DASIA",n[n.U_IDEOGRAPHIC_FULL_STOP=12290]="U_IDEOGRAPHIC_FULL_STOP",n[n.U_LEFT_CORNER_BRACKET=12300]="U_LEFT_CORNER_BRACKET",n[n.U_RIGHT_CORNER_BRACKET=12301]="U_RIGHT_CORNER_BRACKET",n[n.U_LEFT_BLACK_LENTICULAR_BRACKET=12304]="U_LEFT_BLACK_LENTICULAR_BRACKET",n[n.U_RIGHT_BLACK_LENTICULAR_BRACKET=12305]="U_RIGHT_BLACK_LENTICULAR_BRACKET",n[n.U_OVERLINE=8254]="U_OVERLINE",n[n.UTF8_BOM=65279]="UTF8_BOM",n[n.U_FULLWIDTH_SEMICOLON=65307]="U_FULLWIDTH_SEMICOLON",n[n.U_FULLWIDTH_COMMA=65292]="U_FULLWIDTH_COMMA",n))(Yn||{});function ch(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}let Ut=class{_rgbaBrand=void 0;r;g;b;a;constructor(e,t,i,s=1){this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,i))|0,this.a=ch(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}},Cm=class bv{_hslaBrand=void 0;h;s;l;a;constructor(e,t,i,s){this.h=Math.max(Math.min(360,e),0)|0,this.s=ch(Math.max(Math.min(1,t),0),3),this.l=ch(Math.max(Math.min(1,i),0),3),this.a=ch(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,s=e.b/255,r=e.a,o=Math.max(t,i,s),a=Math.min(t,i,s);let l=0,c=0;const d=(a+o)/2,u=o-a;if(u>0){switch(c=Math.min(d<=.5?u/(2*d):u/(2-2*d),1),o){case t:l=(i-s)/u+(i<s?6:0);break;case i:l=(s-t)/u+2;break;case s:l=(t-i)/u+4;break}l*=60,l=Math.round(l)}return new bv(l,c,d,r)}static _hue2rgb(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*6*i:i<1/2?t:i<2/3?e+(t-e)*(2/3-i)*6:e}static toRGBA(e){const t=e.h/360,{s:i,l:s,a:r}=e;let o,a,l;if(i===0)o=a=l=s;else{const c=s<.5?s*(1+i):s+i-s*i,d=2*s-c;o=bv._hue2rgb(d,c,t+1/3),a=bv._hue2rgb(d,c,t),l=bv._hue2rgb(d,c,t-1/3)}return new Ut(Math.round(o*255),Math.round(a*255),Math.round(l*255),r)}},Gw=class w${_hsvaBrand=void 0;h;s;v;a;constructor(e,t,i,s){this.h=Math.max(Math.min(360,e),0)|0,this.s=ch(Math.max(Math.min(1,t),0),3),this.v=ch(Math.max(Math.min(1,i),0),3),this.a=ch(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,s=e.b/255,r=Math.max(t,i,s),o=Math.min(t,i,s),a=r-o,l=r===0?0:a/r;let c;return a===0?c=0:r===t?c=((i-s)/a%6+6)%6:r===i?c=(s-t)/a+2:c=(t-i)/a+4,new w$(Math.round(c*60),l,r,e.a)}static toRGBA(e){const{h:t,s:i,v:s,a:r}=e,o=s*i,a=o*(1-Math.abs(t/60%2-1)),l=s-o;let[c,d,u]=[0,0,0];return t<60?(c=o,d=a):t<120?(c=a,d=o):t<180?(d=o,u=a):t<240?(d=a,u=o):t<300?(c=a,u=o):t<=360&&(c=o,u=a),c=Math.round((c+l)*255),d=Math.round((d+l)*255),u=Math.round((u+l)*255),new Ut(c,d,u,r)}},ye=class pn{static fromHex(e){return pn.Format.CSS.parseHex(e)||pn.red}static equals(e,t){return!e&&!t?!0:!e||!t?!1:e.equals(t)}rgba;_hsla;get hsla(){return this._hsla?this._hsla:Cm.fromRGBA(this.rgba)}_hsva;get hsva(){return this._hsva?this._hsva:Gw.fromRGBA(this.rgba)}constructor(e){if(e)if(e instanceof Ut)this.rgba=e;else if(e instanceof Cm)this._hsla=e,this.rgba=Cm.toRGBA(e);else if(e instanceof Gw)this._hsva=e,this.rgba=Gw.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}equals(e){return!!e&&Ut.equals(this.rgba,e.rgba)&&Cm.equals(this.hsla,e.hsla)&&Gw.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=pn._relativeLuminanceForComponent(this.rgba.r),t=pn._relativeLuminanceForComponent(this.rgba.g),i=pn._relativeLuminanceForComponent(this.rgba.b),s=.2126*e+.7152*t+.0722*i;return ch(s,4)}reduceRelativeLuminace(e,t){let{r:i,g:s,b:r}=e.rgba,o=this.getContrastRatio(e);for(;o<t&&(i>0||s>0||r>0);)i-=Math.max(0,Math.ceil(i*.1)),s-=Math.max(0,Math.ceil(s*.1)),r-=Math.max(0,Math.ceil(r*.1)),o=this.getContrastRatio(new pn(new Ut(i,s,r)));return new pn(new Ut(i,s,r))}increaseRelativeLuminace(e,t){let{r:i,g:s,b:r}=e.rgba,o=this.getContrastRatio(e);for(;o<t&&(i<255||s<255||r<255);)i=Math.min(255,i+Math.ceil((255-i)*.1)),s=Math.min(255,s+Math.ceil((255-s)*.1)),r=Math.min(255,r+Math.ceil((255-r)*.1)),o=this.getContrastRatio(new pn(new Ut(i,s,r)));return new pn(new Ut(i,s,r))}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}getContrastRatio(e){const t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t>i?(t+.05)/(i+.05):(i+.05)/(t+.05)}isDarker(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3<128}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t>i}isDarkerThan(e){const t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t<i}ensureConstrast(e,t){const i=this.getRelativeLuminance(),s=e.getRelativeLuminance();if(this.getContrastRatio(e)<t){if(s<i){const l=this.reduceRelativeLuminace(e,t),c=this.getContrastRatio(l);if(c<t){const d=this.increaseRelativeLuminace(e,t),u=this.getContrastRatio(d);return c>u?l:d}return l}const o=this.increaseRelativeLuminace(e,t),a=this.getContrastRatio(o);if(a<t){const l=this.reduceRelativeLuminace(e,t),c=this.getContrastRatio(l);return a>c?o:l}return o}return e}lighten(e){return new pn(new Cm(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new pn(new Cm(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:i,b:s,a:r}=this.rgba;return new pn(new Ut(t,i,s,r*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new pn(new Ut(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}blend(e){const t=e.rgba,i=this.rgba.a,s=t.a,r=i+s*(1-i);if(r<1e-6)return pn.transparent;const o=this.rgba.r*i/r+t.r*s*(1-i)/r,a=this.rgba.g*i/r+t.g*s*(1-i)/r,l=this.rgba.b*i/r+t.b*s*(1-i)/r;return new pn(new Ut(o,a,l,r))}makeOpaque(e){if(this.isOpaque()||e.rgba.a!==1)return this;const{r:t,g:i,b:s,a:r}=this.rgba;return new pn(new Ut(e.rgba.r-r*(e.rgba.r-t),e.rgba.g-r*(e.rgba.g-i),e.rgba.b-r*(e.rgba.b-s),1))}flatten(...e){const t=e.reduceRight((i,s)=>pn._flatten(s,i));return pn._flatten(this,t)}static _flatten(e,t){const i=1-e.rgba.a;return new pn(new Ut(i*t.rgba.r+e.rgba.a*e.rgba.r,i*t.rgba.g+e.rgba.a*e.rgba.g,i*t.rgba.b+e.rgba.a*e.rgba.b))}_toString;toString(){return this._toString||(this._toString=pn.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,i){if(e.isLighterThan(t))return e;i=i||.5;const s=e.getRelativeLuminance(),r=t.getRelativeLuminance();return i=i*(r-s)/r,e.lighten(i)}static getDarkerColor(e,t,i){if(e.isDarkerThan(t))return e;i=i||.5;const s=e.getRelativeLuminance(),r=t.getRelativeLuminance();return i=i*(s-r)/s,e.darken(i)}static white=new pn(new Ut(255,255,255,1));static black=new pn(new Ut(0,0,0,1));static red=new pn(new Ut(255,0,0,1));static blue=new pn(new Ut(0,0,255,1));static green=new pn(new Ut(0,255,0,1));static cyan=new pn(new Ut(0,255,255,1));static lightgrey=new pn(new Ut(211,211,211,1));static transparent=new pn(new Ut(0,0,0,0))};(n=>{(e=>{(t=>{function i(f){return f.rgba.a===1?`rgb(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b})`:n.Format.CSS.formatRGBA(f)}t.formatRGB=i;function s(f){return`rgba(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b}, ${+f.rgba.a.toFixed(2)})`}t.formatRGBA=s;function r(f){return f.hsla.a===1?`hsl(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%)`:n.Format.CSS.formatHSLA(f)}t.formatHSL=r;function o(f){return`hsla(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%, ${f.hsla.a.toFixed(2)})`}t.formatHSLA=o;function a(f){const g=f.toString(16);return g.length!==2?"0"+g:g}function l(f){return`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}`}t.formatHex=l;function c(f,g=!1){return g&&f.rgba.a===1?n.Format.CSS.formatHex(f):`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}${a(Math.round(f.rgba.a*255))}`}t.formatHexA=c;function d(f){return f.isOpaque()?n.Format.CSS.formatHex(f):n.Format.CSS.formatRGBA(f)}t.format=d;function u(f){const g=f.length;if(g===0||f.charCodeAt(0)!==Yn.Hash)return null;if(g===7){const m=16*h(f.charCodeAt(1))+h(f.charCodeAt(2)),p=16*h(f.charCodeAt(3))+h(f.charCodeAt(4)),b=16*h(f.charCodeAt(5))+h(f.charCodeAt(6));return new n(new Ut(m,p,b,1))}if(g===9){const m=16*h(f.charCodeAt(1))+h(f.charCodeAt(2)),p=16*h(f.charCodeAt(3))+h(f.charCodeAt(4)),b=16*h(f.charCodeAt(5))+h(f.charCodeAt(6)),w=16*h(f.charCodeAt(7))+h(f.charCodeAt(8));return new n(new Ut(m,p,b,w/255))}if(g===4){const m=h(f.charCodeAt(1)),p=h(f.charCodeAt(2)),b=h(f.charCodeAt(3));return new n(new Ut(16*m+m,16*p+p,16*b+b))}if(g===5){const m=h(f.charCodeAt(1)),p=h(f.charCodeAt(2)),b=h(f.charCodeAt(3)),w=h(f.charCodeAt(4));return new n(new Ut(16*m+m,16*p+p,16*b+b,(16*w+w)/255))}return null}t.parseHex=u;function h(f){switch(f){case Yn.Digit0:return 0;case Yn.Digit1:return 1;case Yn.Digit2:return 2;case Yn.Digit3:return 3;case Yn.Digit4:return 4;case Yn.Digit5:return 5;case Yn.Digit6:return 6;case Yn.Digit7:return 7;case Yn.Digit8:return 8;case Yn.Digit9:return 9;case Yn.a:return 10;case Yn.A:return 10;case Yn.b:return 11;case Yn.B:return 11;case Yn.c:return 12;case Yn.C:return 12;case Yn.d:return 13;case Yn.D:return 13;case Yn.e:return 14;case Yn.E:return 14;case Yn.f:return 15;case Yn.F:return 15}return 0}})(e.CSS||(e.CSS={}))})(n.Format||(n.Format={}))})(ye||(ye={}));function hue(n){return n!==null&&typeof n=="object"&&"light"in n&&"dark"in n}let fue=class{colorsById;constructor(){this.colorsById={}}registerColor(e,t,i,s=!1,r){const o={id:e,description:i,defaults:t,needsTransparency:s,deprecationMessage:r};return this.colorsById[e]=o,e}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,t){const i=this.colorsById[e];if(i?.defaults){const s=hue(i.defaults)?i.defaults[t.type]:i.defaults;return ol(s,t)}}toString(){const e=(t,i)=>{const s=t.indexOf(".")===-1?0:1,r=i.indexOf(".")===-1?0:1;return s!==r?s-r:t.localeCompare(i)};return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}};const i4=new fue;function V(n,e,t,i,s){return i4.registerColor(n,e,t,i,s)}function gue(n,e){switch(n.op){case 0:return ol(n.value,e)?.darken(n.factor);case 1:return ol(n.value,e)?.lighten(n.factor);case 2:return ol(n.value,e)?.transparent(n.factor);case 3:{const t=ol(n.background,e);return t?ol(n.value,e)?.makeOpaque(t):ol(n.value,e)}case 4:for(const t of n.values){const i=ol(t,e);if(i)return i}return;case 6:return ol(e.defines(n.if)?n.then:n.else,e);case 5:{const t=ol(n.value,e);if(!t)return;const i=ol(n.background,e);return i?t.isDarkerThan(i)?ye.getLighterColor(t,i,n.factor).transparent(n.transparency):ye.getDarkerColor(t,i,n.factor).transparent(n.transparency):t.transparent(n.factor*n.transparency)}default:throw new Error("Unreachable")}}function ca(n,e){return{op:0,value:n,factor:e}}function Ra(n,e){return{op:1,value:n,factor:e}}function Je(n,e){return{op:2,value:n,factor:e}}function cZ(n,e){return{op:3,value:n,background:e}}function dZ(...n){return{op:4,values:n}}function mue(n,e,t){return{op:6,if:n,then:e,else:t}}function uZ(n,e,t,i){return{op:5,value:n,background:e,factor:t,transparency:i}}function ol(n,e){if(n!==null){if(typeof n=="string")return n[0]==="#"?ye.fromHex(n):e.getColor(n);if(n instanceof ye)return n;if(typeof n=="object")return gue(n,e)}}function F(n,e,...t){return e}const Ri=V("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},F("foreground","Overall foreground color. This color is only used if not overridden by a component."));V("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},F("disabledForeground","Overall foreground for disabled elements. This color is only used if not overridden by a component."));const hZ=V("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},F("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component."));V("descriptionForeground",{light:"#717171",dark:Je(Ri,.7),hcDark:Je(Ri,.7),hcLight:Je(Ri,.7)},F("descriptionForeground","Foreground color for description text providing additional information, for example for a label."));const u9=V("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},F("iconForeground","The default color for icons in the workbench.")),Ml=V("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#006BBD"},F("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),ut=V("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},F("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),fn=V("contrastActiveBorder",{light:null,dark:null,hcDark:Ml,hcLight:Ml},F("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast."));V("selection.background",null,F("selectionBackground","The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor."));const pue=V("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},F("textLinkForeground","Foreground color for links in text."));V("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},F("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover."));V("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:ye.black,hcLight:"#292929"},F("textSeparatorForeground","Color for text separators."));V("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#000000",hcLight:"#FFFFFF"},F("textPreformatForeground","Foreground color for preformatted text segments."));V("textPreformat.background",{light:"#0000001A",dark:"#FFFFFF1A",hcDark:"#FFFFFF",hcLight:"#09345f"},F("textPreformatBackground","Background color for preformatted text segments."));V("textBlockQuote.background",{light:"#f2f2f2",dark:"#222222",hcDark:null,hcLight:"#F2F2F2"},F("textBlockQuoteBackground","Background color for block quotes in text."));V("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:ye.white,hcLight:"#292929"},F("textBlockQuoteBorder","Border color for block quotes in text."));V("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:ye.black,hcLight:"#F2F2F2"},F("textCodeBlockBackground","Background color for code blocks in text."));V("sash.hoverBorder",Ml,F("sashActiveBorder","Border color of active sashes."));const CS=V("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:ye.black,hcLight:"#0F4A85"},F("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),bue=V("badge.foreground",{dark:ye.white,light:"#333",hcDark:ye.white,hcLight:ye.white},F("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),n4=V("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},F("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),vue=V("scrollbarSlider.background",{dark:ye.fromHex("#797979").transparent(.4),light:ye.fromHex("#646464").transparent(.4),hcDark:Je(ut,.6),hcLight:Je(ut,.4)},F("scrollbarSliderBackground","Scrollbar slider background color.")),_ue=V("scrollbarSlider.hoverBackground",{dark:ye.fromHex("#646464").transparent(.7),light:ye.fromHex("#646464").transparent(.7),hcDark:Je(ut,.8),hcLight:Je(ut,.8)},F("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),wue=V("scrollbarSlider.activeBackground",{dark:ye.fromHex("#BFBFBF").transparent(.4),light:ye.fromHex("#000000").transparent(.6),hcDark:ut,hcLight:ut},F("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on."));V("progressBar.background",{dark:ye.fromHex("#0E70C0"),light:ye.fromHex("#0E70C0"),hcDark:ut,hcLight:ut},F("progressBarBackground","Background color of the progress bar that can show for long running operations."));const El=V("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:ye.black,hcLight:ye.white},F("editorBackground","Editor background color.")),Ec=V("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:ye.white,hcLight:Ri},F("editorForeground","Editor default foreground color."));V("editorStickyScroll.background",El,F("editorStickyScrollBackground","Background color of sticky scroll in the editor"));V("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:ye.fromHex("#0F4A85").transparent(.1)},F("editorStickyScrollHoverBackground","Background color of sticky scroll on hover in the editor"));V("editorStickyScroll.border",{dark:null,light:null,hcDark:ut,hcLight:ut},F("editorStickyScrollBorder","Border color of sticky scroll in the editor"));V("editorStickyScroll.shadow",n4,F("editorStickyScrollShadow"," Shadow color of sticky scroll in the editor"));const ea=V("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:ye.white},F("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),G1=V("editorWidget.foreground",Ri,F("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),yue=V("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:ut,hcLight:ut},F("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget."));V("editorWidget.resizeBorder",null,F("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget."));V("editorError.background",null,F("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const Yd=V("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},F("editorError.foreground","Foreground color of error squigglies in the editor."));V("editorError.border",{dark:null,light:null,hcDark:ye.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},F("errorBorder","If set, color of double underlines for errors in the editor."));const Sue=V("editorWarning.background",null,F("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),Nc=V("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD370",hcLight:"#895503"},F("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),wC=V("editorWarning.border",{dark:null,light:null,hcDark:ye.fromHex("#FFCC00").transparent(.8),hcLight:ye.fromHex("#FFCC00").transparent(.8)},F("warningBorder","If set, color of double underlines for warnings in the editor."));V("editorInfo.background",null,F("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const Ba=V("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},F("editorInfo.foreground","Foreground color of info squigglies in the editor.")),yC=V("editorInfo.border",{dark:null,light:null,hcDark:ye.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},F("infoBorder","If set, color of double underlines for infos in the editor."));V("editorHint.foreground",{dark:ye.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},F("editorHint.foreground","Foreground color of hint squigglies in the editor."));V("editorHint.border",{dark:null,light:null,hcDark:ye.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},F("hintBorder","If set, color of double underlines for hints in the editor."));V("editorLink.activeForeground",{dark:"#4E94CE",light:ye.blue,hcDark:ye.cyan,hcLight:"#292929"},F("activeLinkForeground","Color of active links."));const Km=V("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},F("editorSelectionBackground","Color of the editor selection."));V("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:ye.white},F("editorSelectionForeground","Color of the selected text for high contrast."));V("editor.inactiveSelectionBackground",{light:Je(Km,.5),dark:Je(Km,.5),hcDark:Je(Km,.7),hcLight:Je(Km,.5)},F("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0);V("editor.selectionHighlightBackground",{light:uZ(Km,El,.3,.6),dark:uZ(Km,El,.3,.6),hcDark:null,hcLight:null},F("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0);V("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:fn,hcLight:fn},F("editorSelectionHighlightBorder","Border color for regions with the same content as the selection."));V("editor.compositionBorder",{light:"#000000",dark:"#ffffff",hcLight:"#000000",hcDark:"#ffffff"},F("editorCompositionBorder","The border color for an IME composition."));V("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},F("editorFindMatch","Color of the current search match."));V("editor.findMatchForeground",null,F("editorFindMatchForeground","Text color of the current search match."));const zu=V("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},F("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0);V("editor.findMatchHighlightForeground",null,F("findMatchHighlightForeground","Foreground color of the other search matches."),!0);V("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},F("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);V("editor.findMatchBorder",{light:null,dark:null,hcDark:fn,hcLight:fn},F("editorFindMatchBorder","Border color of the current search match."));const jm=V("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:fn,hcLight:fn},F("findMatchHighlightBorder","Border color of the other search matches."));V("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:Je(fn,.4),hcLight:Je(fn,.4)},F("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);V("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},F("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0);const fZ=V("editorHoverWidget.background",ea,F("hoverBackground","Background color of the editor hover."));V("editorHoverWidget.foreground",G1,F("hoverForeground","Foreground color of the editor hover."));V("editorHoverWidget.border",yue,F("hoverBorder","Border color of the editor hover."));V("editorHoverWidget.statusBarBackground",{dark:Ra(fZ,.2),light:ca(fZ,.05),hcDark:ea,hcLight:ea},F("statusBarBackground","Background color of the editor hover status bar."));const y$=V("editorInlayHint.foreground",{dark:"#969696",light:"#969696",hcDark:ye.white,hcLight:ye.black},F("editorInlayHintForeground","Foreground color of inline hints")),S$=V("editorInlayHint.background",{dark:Je(CS,.1),light:Je(CS,.1),hcDark:Je(ye.white,.1),hcLight:Je(CS,.1)},F("editorInlayHintBackground","Background color of inline hints"));V("editorInlayHint.typeForeground",y$,F("editorInlayHintForegroundTypes","Foreground color of inline hints for types"));V("editorInlayHint.typeBackground",S$,F("editorInlayHintBackgroundTypes","Background color of inline hints for types"));V("editorInlayHint.parameterForeground",y$,F("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters"));V("editorInlayHint.parameterBackground",S$,F("editorInlayHintBackgroundParameter","Background color of inline hints for parameters"));const Cue=V("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},F("editorLightBulbForeground","The color used for the lightbulb actions icon."));V("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},F("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon."));V("editorLightBulbAi.foreground",Cue,F("editorLightBulbAiForeground","The color used for the lightbulb AI icon."));V("editor.snippetTabstopHighlightBackground",{dark:new ye(new Ut(124,124,124,.3)),light:new ye(new Ut(10,50,100,.2)),hcDark:new ye(new Ut(124,124,124,.3)),hcLight:new ye(new Ut(10,50,100,.2))},F("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop."));V("editor.snippetTabstopHighlightBorder",null,F("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop."));V("editor.snippetFinalTabstopHighlightBackground",null,F("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet."));V("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new ye(new Ut(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},F("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet."));const gZ=new ye(new Ut(155,185,85,.2)),mZ=new ye(new Ut(255,0,0,.2)),SC=V("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c40",hcDark:null,hcLight:null},F("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),tb=V("diffEditor.removedTextBackground",{dark:"#ff000033",light:"#ff000033",hcDark:null,hcLight:null},F("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);V("diffEditor.insertedLineBackground",{dark:gZ,light:gZ,hcDark:null,hcLight:null},F("diffEditorInsertedLines","Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0);V("diffEditor.removedLineBackground",{dark:mZ,light:mZ,hcDark:null,hcLight:null},F("diffEditorRemovedLines","Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);V("diffEditorGutter.insertedLineBackground",null,F("diffEditorInsertedLineGutter","Background color for the margin where lines got inserted."));V("diffEditorGutter.removedLineBackground",null,F("diffEditorRemovedLineGutter","Background color for the margin where lines got removed."));V("diffEditorOverview.insertedForeground",null,F("diffEditorOverviewInserted","Diff overview ruler foreground for inserted content."));V("diffEditorOverview.removedForeground",null,F("diffEditorOverviewRemoved","Diff overview ruler foreground for removed content."));V("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},F("diffEditorInsertedOutline","Outline color for the text that got inserted."));V("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},F("diffEditorRemovedOutline","Outline color for text that got removed."));V("diffEditor.border",{dark:null,light:null,hcDark:ut,hcLight:ut},F("diffEditorBorder","Border color between the two text editors."));V("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},F("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views."));V("diffEditor.unchangedRegionBackground","sideBar.background",F("diffEditor.unchangedRegionBackground","The background color of unchanged blocks in the diff editor."));V("diffEditor.unchangedRegionForeground","foreground",F("diffEditor.unchangedRegionForeground","The foreground color of unchanged blocks in the diff editor."));V("diffEditor.unchangedCodeBackground",{dark:"#74747429",light:"#b8b8b829",hcDark:null,hcLight:null},F("diffEditor.unchangedCodeBackground","The background color of unchanged code in the diff editor."));const Lue=V("widget.shadow",{dark:Je(ye.black,.36),light:Je(ye.black,.16),hcDark:null,hcLight:null},F("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),CC=V("widget.border",{dark:null,light:null,hcDark:ut,hcLight:ut},F("widgetBorder","Border color of widgets such as find/replace inside the editor.")),LC=V("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},F("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse"));V("toolbar.hoverOutline",{dark:null,light:null,hcDark:fn,hcLight:fn},F("toolbarHoverOutline","Toolbar outline when hovering over actions using the mouse"));V("toolbar.activeBackground",{dark:Ra(LC,.1),light:ca(LC,.1),hcDark:null,hcLight:null},F("toolbarActiveBackground","Toolbar background when holding the mouse over actions"));V("breadcrumb.foreground",Je(Ri,.8),F("breadcrumbsFocusForeground","Color of focused breadcrumb items."));V("breadcrumb.background",El,F("breadcrumbsBackground","Background color of breadcrumb items."));V("breadcrumb.focusForeground",{light:ca(Ri,.2),dark:Ra(Ri,.1),hcDark:Ra(Ri,.1),hcLight:Ra(Ri,.1)},F("breadcrumbsFocusForeground","Color of focused breadcrumb items."));V("breadcrumb.activeSelectionForeground",{light:ca(Ri,.2),dark:Ra(Ri,.1),hcDark:Ra(Ri,.1),hcLight:Ra(Ri,.1)},F("breadcrumbsSelectedForeground","Color of selected breadcrumb items."));V("breadcrumbPicker.background",ea,F("breadcrumbsSelectedBackground","Background color of breadcrumb item picker."));const C$=.5,pZ=ye.fromHex("#40C8AE").transparent(C$),bZ=ye.fromHex("#40A6FF").transparent(C$),vZ=ye.fromHex("#606060").transparent(.4),s4=.4,ib=1,h9=V("merge.currentHeaderBackground",{dark:pZ,light:pZ,hcDark:null,hcLight:null},F("mergeCurrentHeaderBackground","Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);V("merge.currentContentBackground",Je(h9,s4),F("mergeCurrentContentBackground","Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const f9=V("merge.incomingHeaderBackground",{dark:bZ,light:bZ,hcDark:null,hcLight:null},F("mergeIncomingHeaderBackground","Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);V("merge.incomingContentBackground",Je(f9,s4),F("mergeIncomingContentBackground","Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const g9=V("merge.commonHeaderBackground",{dark:vZ,light:vZ,hcDark:null,hcLight:null},F("mergeCommonHeaderBackground","Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);V("merge.commonContentBackground",Je(g9,s4),F("mergeCommonContentBackground","Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const nb=V("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},F("mergeBorder","Border color on headers and the splitter in inline merge-conflicts."));V("editorOverviewRuler.currentContentForeground",{dark:Je(h9,ib),light:Je(h9,ib),hcDark:nb,hcLight:nb},F("overviewRulerCurrentContentForeground","Current overview ruler foreground for inline merge-conflicts."));V("editorOverviewRuler.incomingContentForeground",{dark:Je(f9,ib),light:Je(f9,ib),hcDark:nb,hcLight:nb},F("overviewRulerIncomingContentForeground","Incoming overview ruler foreground for inline merge-conflicts."));V("editorOverviewRuler.commonContentForeground",{dark:Je(g9,ib),light:Je(g9,ib),hcDark:nb,hcLight:nb},F("overviewRulerCommonContentForeground","Common ancestor overview ruler foreground for inline merge-conflicts."));V("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:"#AB5A00"},F("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0);const kue=V("editorOverviewRuler.selectionHighlightForeground","#A0A0A0CC",F("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0);V("problemsErrorIcon.foreground",Yd,F("problemsErrorIconForeground","The color used for the problems error icon."));V("problemsWarningIcon.foreground",Nc,F("problemsWarningIconForeground","The color used for the problems warning icon."));V("problemsInfoIcon.foreground",Ba,F("problemsInfoIconForeground","The color used for the problems info icon."));const xue=V("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},F("minimapFindMatchHighlight","Minimap marker color for find matches."),!0);V("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},F("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0);V("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},F("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0);V("minimap.infoHighlight",{dark:Ba,light:Ba,hcDark:yC,hcLight:yC},F("minimapInfo","Minimap marker color for infos."));V("minimap.warningHighlight",{dark:Nc,light:Nc,hcDark:wC,hcLight:wC},F("overviewRuleWarning","Minimap marker color for warnings."));V("minimap.errorHighlight",{dark:new ye(new Ut(255,18,18,.7)),light:new ye(new Ut(255,18,18,.7)),hcDark:new ye(new Ut(255,50,50,1)),hcLight:"#B5200D"},F("minimapError","Minimap marker color for errors."));V("minimap.background",null,F("minimapBackground","Minimap background color."));V("minimap.foregroundOpacity",ye.fromHex("#000f"),F("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.'));V("minimapSlider.background",Je(vue,.5),F("minimapSliderBackground","Minimap slider background color."));V("minimapSlider.hoverBackground",Je(_ue,.5),F("minimapSliderHoverBackground","Minimap slider background color when hovering."));V("minimapSlider.activeBackground",Je(wue,.5),F("minimapSliderActiveBackground","Minimap slider background color when clicked on."));V("charts.foreground",Ri,F("chartsForeground","The foreground color used in charts."));V("charts.lines",Je(Ri,.5),F("chartsLines","The color used for horizontal lines in charts."));const _Z=V("charts.red",Yd,F("chartsRed","The red color used in chart visualizations."));V("charts.blue",Ba,F("chartsBlue","The blue color used in chart visualizations."));V("charts.yellow",Nc,F("chartsYellow","The yellow color used in chart visualizations."));V("charts.orange",xue,F("chartsOrange","The orange color used in chart visualizations."));const wZ=V("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},F("chartsGreen","The green color used in chart visualizations."));V("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},F("chartsPurple","The purple color used in chart visualizations."));V("input.background",{dark:"#3C3C3C",light:ye.white,hcDark:ye.black,hcLight:ye.white},F("inputBoxBackground","Input box background."));V("input.foreground",Ri,F("inputBoxForeground","Input box foreground."));const XT=V("input.border",{dark:null,light:null,hcDark:ut,hcLight:ut},F("inputBoxBorder","Input box border.")),Tue=V("inputOption.activeBorder",{dark:"#007ACC",light:"#007ACC",hcDark:ut,hcLight:ut},F("inputBoxActiveOptionBorder","Border color of activated options in input fields.")),Due=V("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},F("inputOption.hoverBackground","Background color of activated options in input fields.")),L$=V("inputOption.activeBackground",{dark:Je(Ml,.4),light:Je(Ml,.2),hcDark:ye.transparent,hcLight:ye.transparent},F("inputOption.activeBackground","Background hover color of options in input fields."));V("actionBar.toggledBackground",L$,F("actionBar.toggledBackground","Background color for toggled action items in action bar."));const Iue=V("inputOption.activeForeground",{dark:ye.white,light:ye.black,hcDark:Ri,hcLight:Ri},F("inputOption.activeForeground","Foreground color of activated options in input fields."));V("input.placeholderForeground",{light:Je(Ri,.5),dark:Je(Ri,.5),hcDark:Je(Ri,.7),hcLight:Je(Ri,.7)},F("inputPlaceholderForeground","Input box foreground color for placeholder text."));V("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:ye.black,hcLight:ye.white},F("inputValidationInfoBackground","Input validation background color for information severity."));V("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:Ri},F("inputValidationInfoForeground","Input validation foreground color for information severity."));V("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:ut,hcLight:ut},F("inputValidationInfoBorder","Input validation border color for information severity."));V("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:ye.black,hcLight:ye.white},F("inputValidationWarningBackground","Input validation background color for warning severity."));V("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:Ri},F("inputValidationWarningForeground","Input validation foreground color for warning severity."));V("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:ut,hcLight:ut},F("inputValidationWarningBorder","Input validation border color for warning severity."));V("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:ye.black,hcLight:ye.white},F("inputValidationErrorBackground","Input validation background color for error severity."));V("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:Ri},F("inputValidationErrorForeground","Input validation foreground color for error severity."));V("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:ut,hcLight:ut},F("inputValidationErrorBorder","Input validation border color for error severity."));const r4=V("dropdown.background",{dark:"#3C3C3C",light:ye.white,hcDark:ye.black,hcLight:ye.white},F("dropdownBackground","Dropdown background."));V("dropdown.listBackground",{dark:null,light:null,hcDark:ye.black,hcLight:ye.white},F("dropdownListBackground","Dropdown list background."));const k$=V("dropdown.foreground",{dark:"#F0F0F0",light:Ri,hcDark:ye.white,hcLight:Ri},F("dropdownForeground","Dropdown foreground.")),Mue=V("dropdown.border",{dark:r4,light:"#CECECE",hcDark:ut,hcLight:ut},F("dropdownBorder","Dropdown border.")),Eue=V("button.foreground",ye.white,F("buttonForeground","Button foreground color."));V("button.separator",Je(Eue,.4),F("buttonSeparator","Button separator color."));const Bw=V("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},F("buttonBackground","Button background color."));V("button.hoverBackground",{dark:Ra(Bw,.2),light:ca(Bw,.2),hcDark:Bw,hcLight:Bw},F("buttonHoverBackground","Button background color when hovering."));V("button.border",ut,F("buttonBorder","Button border color."));V("button.secondaryForeground",{dark:ye.white,light:ye.white,hcDark:ye.white,hcLight:Ri},F("buttonSecondaryForeground","Secondary button foreground color."));const yZ=V("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:ye.white},F("buttonSecondaryBackground","Secondary button background color."));V("button.secondaryHoverBackground",{dark:Ra(yZ,.2),light:ca(yZ,.2),hcDark:null,hcLight:null},F("buttonSecondaryHoverBackground","Secondary button background color when hovering."));const Xw=V("radio.activeForeground",Iue,F("radioActiveForeground","Foreground color of active radio option."));V("radio.activeBackground",L$,F("radioBackground","Background color of active radio option."));V("radio.activeBorder",Tue,F("radioActiveBorder","Border color of the active radio option."));V("radio.inactiveForeground",null,F("radioInactiveForeground","Foreground color of inactive radio option."));V("radio.inactiveBackground",null,F("radioInactiveBackground","Background color of inactive radio option."));V("radio.inactiveBorder",{light:Je(Xw,.2),dark:Je(Xw,.2),hcDark:Je(Xw,.4),hcLight:Je(Xw,.2)},F("radioInactiveBorder","Border color of the inactive radio option."));V("radio.inactiveHoverBackground",Due,F("radioHoverBackground","Background color of inactive active radio option when hovering."));V("checkbox.background",r4,F("checkbox.background","Background color of checkbox widget."));V("checkbox.selectBackground",ea,F("checkbox.select.background","Background color of checkbox widget when the element it's in is selected."));V("checkbox.foreground",k$,F("checkbox.foreground","Foreground color of checkbox widget."));V("checkbox.border",Mue,F("checkbox.border","Border color of checkbox widget."));V("checkbox.selectBorder",u9,F("checkbox.select.border","Border color of checkbox widget when the element it's in is selected."));V("keybindingLabel.background",{dark:new ye(new Ut(128,128,128,.17)),light:new ye(new Ut(221,221,221,.4)),hcDark:ye.transparent,hcLight:ye.transparent},F("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut."));V("keybindingLabel.foreground",{dark:ye.fromHex("#CCCCCC"),light:ye.fromHex("#555555"),hcDark:ye.white,hcLight:Ri},F("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut."));V("keybindingLabel.border",{dark:new ye(new Ut(51,51,51,.6)),light:new ye(new Ut(204,204,204,.4)),hcDark:new ye(new Ut(111,195,223)),hcLight:ut},F("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut."));V("keybindingLabel.bottomBorder",{dark:new ye(new Ut(68,68,68,.6)),light:new ye(new Ut(187,187,187,.4)),hcDark:new ye(new Ut(111,195,223)),hcLight:Ri},F("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut."));V("list.focusBackground",null,F("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not."));V("list.focusForeground",null,F("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not."));V("list.focusOutline",{dark:Ml,light:Ml,hcDark:fn,hcLight:fn},F("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not."));V("list.focusAndSelectionOutline",null,F("listFocusAndSelectionOutline","List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not."));const wd=V("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:ye.fromHex("#0F4A85").transparent(.1)},F("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Bk=V("list.activeSelectionForeground",{dark:ye.white,light:ye.white,hcDark:null,hcLight:null},F("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Nue=V("list.activeSelectionIconForeground",null,F("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not."));V("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:ye.fromHex("#0F4A85").transparent(.1)},F("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not."));V("list.inactiveSelectionForeground",null,F("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not."));V("list.inactiveSelectionIconForeground",null,F("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not."));V("list.inactiveFocusBackground",null,F("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not."));V("list.inactiveFocusOutline",null,F("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not."));V("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:ye.white.transparent(.1),hcLight:ye.fromHex("#0F4A85").transparent(.1)},F("listHoverBackground","List/Tree background when hovering over items using the mouse."));V("list.hoverForeground",null,F("listHoverForeground","List/Tree foreground when hovering over items using the mouse."));V("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},F("listDropBackground","List/Tree drag and drop background when moving items over other items when using the mouse."));V("list.dropBetweenBackground",{dark:u9,light:u9,hcDark:null,hcLight:null},F("listDropBetweenBackground","List/Tree drag and drop border color when moving items between items when using the mouse."));const zw=V("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:Ml,hcLight:Ml},F("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree."));V("list.focusHighlightForeground",{dark:zw,light:mue(wd,zw,"#BBE7FF"),hcDark:zw,hcLight:zw},F("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree."));V("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},F("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer."));V("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},F("listErrorForeground","Foreground color of list items containing errors."));V("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},F("listWarningForeground","Foreground color of list items containing warnings."));V("listFilterWidget.background",{light:ca(ea,0),dark:Ra(ea,0),hcDark:ea,hcLight:ea},F("listFilterWidgetBackground","Background color of the type filter widget in lists and trees."));V("listFilterWidget.outline",{dark:ye.transparent,light:ye.transparent,hcDark:"#f38518",hcLight:"#007ACC"},F("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees."));V("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:ut,hcLight:ut},F("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches."));V("listFilterWidget.shadow",Lue,F("listFilterWidgetShadow","Shadow color of the type filter widget in lists and trees."));V("list.filterMatchBackground",{dark:zu,light:zu,hcDark:null,hcLight:null},F("listFilterMatchHighlight","Background color of the filtered match."));V("list.filterMatchBorder",{dark:jm,light:jm,hcDark:ut,hcLight:fn},F("listFilterMatchHighlightBorder","Border color of the filtered match."));V("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},F("listDeemphasizedForeground","List/Tree foreground color for items that are deemphasized."));const m9=V("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},F("treeIndentGuidesStroke","Tree stroke color for the indentation guides."));V("tree.inactiveIndentGuidesStroke",Je(m9,.4),F("treeInactiveIndentGuidesStroke","Tree stroke color for the indentation guides that are not active."));V("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},F("tableColumnsBorder","Table border color between columns."));V("tree.tableOddRowsBackground",{dark:Je(Ri,.04),light:Je(Ri,.04),hcDark:null,hcLight:null},F("tableOddRowsBackgroundColor","Background color for odd table rows."));V("editorActionList.background",ea,F("editorActionListBackground","Action List background color."));V("editorActionList.foreground",G1,F("editorActionListForeground","Action List foreground color."));V("editorActionList.focusForeground",Bk,F("editorActionListFocusForeground","Action List foreground color for the focused item."));V("editorActionList.focusBackground",wd,F("editorActionListFocusBackground","Action List background color for the focused item."));V("menu.border",{dark:null,light:null,hcDark:ut,hcLight:ut},F("menuBorder","Border color of menus."));V("menu.foreground",k$,F("menuForeground","Foreground color of menu items."));V("menu.background",r4,F("menuBackground","Background color of menu items."));V("menu.selectionForeground",Bk,F("menuSelectionForeground","Foreground color of the selected menu item in menus."));V("menu.selectionBackground",wd,F("menuSelectionBackground","Background color of the selected menu item in menus."));V("menu.selectionBorder",{dark:null,light:null,hcDark:fn,hcLight:fn},F("menuSelectionBorder","Border color of the selected menu item in menus."));V("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:ut,hcLight:ut},F("menuSeparatorBackground","Color of a separator menu item in menus."));V("quickInput.background",ea,F("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette."));V("quickInput.foreground",G1,F("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette."));V("quickInputTitle.background",{dark:new ye(new Ut(255,255,255,.105)),light:new ye(new Ut(0,0,0,.06)),hcDark:"#000000",hcLight:ye.white},F("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette."));V("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:ye.white,hcLight:"#0F4A85"},F("pickerGroupForeground","Quick picker color for grouping labels."));V("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:ye.white,hcLight:"#0F4A85"},F("pickerGroupBorder","Quick picker color for grouping borders."));const SZ=V("quickInput.list.focusBackground",null,"",void 0,F("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead"));V("quickInputList.focusForeground",Bk,F("quickInput.listFocusForeground","Quick picker foreground color for the focused item."));V("quickInputList.focusIconForeground",Nue,F("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item."));V("quickInputList.focusBackground",{dark:dZ(SZ,wd),light:dZ(SZ,wd),hcDark:null,hcLight:null},F("quickInput.listFocusBackground","Quick picker background color for the focused item."));V("search.resultsInfoForeground",{light:Ri,dark:Je(Ri,.65),hcDark:Ri,hcLight:Ri},F("search.resultsInfoForeground","Color of the text in the search viewlet's completion message."));V("searchEditor.findMatchBackground",{light:Je(zu,.66),dark:Je(zu,.66),hcDark:zu,hcLight:zu},F("searchEditor.queryMatch","Color of the Search Editor query matches."));V("searchEditor.findMatchBorder",{light:Je(jm,.66),dark:Je(jm,.66),hcDark:jm,hcLight:jm},F("searchEditor.editorFindMatchBorder","Border color of the Search Editor query matches."));V("editor.lineHighlightBackground",null,F("lineHighlight","Background color for the highlight of line at the cursor position."));V("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:ut},F("lineHighlightBorderBox","Background color for the border around the line at the cursor position."));V("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},F("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0);V("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:fn,hcLight:fn},F("rangeHighlightBorder","Background color of the border around highlighted ranges."));V("editor.symbolHighlightBackground",{dark:zu,light:zu,hcDark:null,hcLight:null},F("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0);V("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:fn,hcLight:fn},F("symbolHighlightBorder","Background color of the border around highlighted symbols."));const x$=V("editorCursor.foreground",{dark:"#AEAFAD",light:ye.black,hcDark:ye.white,hcLight:"#0F4A85"},F("caret","Color of the editor cursor.")),T$=V("editorCursor.background",null,F("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor."));V("editorMultiCursor.primary.foreground",x$,F("editorMultiCursorPrimaryForeground","Color of the primary editor cursor when multiple cursors are present."));V("editorMultiCursor.primary.background",T$,F("editorMultiCursorPrimaryBackground","The background color of the primary editor cursor when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor."));V("editorMultiCursor.secondary.foreground",x$,F("editorMultiCursorSecondaryForeground","Color of secondary editor cursors when multiple cursors are present."));V("editorMultiCursor.secondary.background",T$,F("editorMultiCursorSecondaryBackground","The background color of secondary editor cursors when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor."));const D$=V("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},F("editorWhitespaces","Color of whitespace characters in the editor."));V("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:ye.white,hcLight:"#292929"},F("editorLineNumbers","Color of editor line numbers."));const Rue=V("editorIndentGuide.background",D$,F("editorIndentGuides","Color of the editor indentation guides."),!1,F("deprecatedEditorIndentGuides","'editorIndentGuide.background' is deprecated. Use 'editorIndentGuide.background1' instead.")),Wue=V("editorIndentGuide.activeBackground",D$,F("editorActiveIndentGuide","Color of the active editor indentation guides."),!1,F("deprecatedEditorActiveIndentGuide","'editorIndentGuide.activeBackground' is deprecated. Use 'editorIndentGuide.activeBackground1' instead."));V("editorIndentGuide.background1",Rue,F("editorIndentGuides1","Color of the editor indentation guides (1)."));V("editorIndentGuide.background2","#00000000",F("editorIndentGuides2","Color of the editor indentation guides (2)."));V("editorIndentGuide.background3","#00000000",F("editorIndentGuides3","Color of the editor indentation guides (3)."));V("editorIndentGuide.background4","#00000000",F("editorIndentGuides4","Color of the editor indentation guides (4)."));V("editorIndentGuide.background5","#00000000",F("editorIndentGuides5","Color of the editor indentation guides (5)."));V("editorIndentGuide.background6","#00000000",F("editorIndentGuides6","Color of the editor indentation guides (6)."));V("editorIndentGuide.activeBackground1",Wue,F("editorActiveIndentGuide1","Color of the active editor indentation guides (1)."));V("editorIndentGuide.activeBackground2","#00000000",F("editorActiveIndentGuide2","Color of the active editor indentation guides (2)."));V("editorIndentGuide.activeBackground3","#00000000",F("editorActiveIndentGuide3","Color of the active editor indentation guides (3)."));V("editorIndentGuide.activeBackground4","#00000000",F("editorActiveIndentGuide4","Color of the active editor indentation guides (4)."));V("editorIndentGuide.activeBackground5","#00000000",F("editorActiveIndentGuide5","Color of the active editor indentation guides (5)."));V("editorIndentGuide.activeBackground6","#00000000",F("editorActiveIndentGuide6","Color of the active editor indentation guides (6)."));const Aue=V("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:fn,hcLight:fn},F("editorActiveLineNumber","Color of editor active line number"),!1,F("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead."));V("editorLineNumber.activeForeground",Aue,F("editorActiveLineNumber","Color of editor active line number"));V("editorLineNumber.dimmedForeground",null,F("editorDimmedLineNumber","Color of the final editor line when editor.renderFinalNewline is set to dimmed."));V("editorRuler.foreground",{dark:"#5A5A5A",light:ye.lightgrey,hcDark:ye.white,hcLight:"#292929"},F("editorRuler","Color of the editor rulers."));V("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},F("editorCodeLensForeground","Foreground color of editor CodeLens"));V("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},F("editorBracketMatchBackground","Background color behind matching brackets"));V("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:ut,hcLight:ut},F("editorBracketMatchBorder","Color for matching brackets boxes"));V("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},F("editorOverviewRulerBorder","Color of the overview ruler border."));V("editorOverviewRuler.background",null,F("editorOverviewRulerBackground","Background color of the editor overview ruler."));V("editorGutter.background",El,F("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers."));V("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:ye.fromHex("#fff").transparent(.8),hcLight:ut},F("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor."));V("editorUnnecessaryCode.opacity",{dark:ye.fromHex("#000a"),light:ye.fromHex("#0007"),hcDark:null,hcLight:null},F("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`));V("editorGhostText.border",{dark:null,light:null,hcDark:ye.fromHex("#fff").transparent(.8),hcLight:ye.fromHex("#292929").transparent(.8)},F("editorGhostTextBorder","Border color of ghost text in the editor."));V("editorGhostText.foreground",{dark:ye.fromHex("#ffffff56"),light:ye.fromHex("#0007"),hcDark:null,hcLight:null},F("editorGhostTextForeground","Foreground color of the ghost text in the editor."));V("editorGhostText.background",null,F("editorGhostTextBackground","Background color of the ghost text in the editor."));const Fue=new ye(new Ut(0,122,204,.6));V("editorOverviewRuler.rangeHighlightForeground",Fue,F("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0);V("editorOverviewRuler.errorForeground",{dark:new ye(new Ut(255,18,18,.7)),light:new ye(new Ut(255,18,18,.7)),hcDark:new ye(new Ut(255,50,50,1)),hcLight:"#B5200D"},F("overviewRuleError","Overview ruler marker color for errors."));V("editorOverviewRuler.warningForeground",{dark:Nc,light:Nc,hcDark:wC,hcLight:wC},F("overviewRuleWarning","Overview ruler marker color for warnings."));V("editorOverviewRuler.infoForeground",{dark:Ba,light:Ba,hcDark:yC,hcLight:yC},F("overviewRuleInfo","Overview ruler marker color for infos."));V("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},F("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization."));V("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},F("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization."));V("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},F("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization."));V("editorBracketHighlight.foreground4","#00000000",F("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization."));V("editorBracketHighlight.foreground5","#00000000",F("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization."));V("editorBracketHighlight.foreground6","#00000000",F("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization."));V("editorBracketHighlight.unexpectedBracket.foreground",{dark:new ye(new Ut(255,18,18,.8)),light:new ye(new Ut(255,18,18,.8)),hcDark:"new Color(new RGBA(255, 50, 50, 1))",hcLight:"#B5200D"},F("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets."));V("editorBracketPairGuide.background1","#00000000",F("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides."));V("editorBracketPairGuide.background2","#00000000",F("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides."));V("editorBracketPairGuide.background3","#00000000",F("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides."));V("editorBracketPairGuide.background4","#00000000",F("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides."));V("editorBracketPairGuide.background5","#00000000",F("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides."));V("editorBracketPairGuide.background6","#00000000",F("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides."));V("editorBracketPairGuide.activeBackground1","#00000000",F("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides."));V("editorBracketPairGuide.activeBackground2","#00000000",F("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides."));V("editorBracketPairGuide.activeBackground3","#00000000",F("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides."));V("editorBracketPairGuide.activeBackground4","#00000000",F("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides."));V("editorBracketPairGuide.activeBackground5","#00000000",F("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides."));V("editorBracketPairGuide.activeBackground6","#00000000",F("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));V("editorUnicodeHighlight.border",Nc,F("editorUnicodeHighlight.border","Border color used to highlight unicode characters."));V("editorUnicodeHighlight.background",Sue,F("editorUnicodeHighlight.background","Background color used to highlight unicode characters."));var Xm=(n=>(n.DARK="dark",n.LIGHT="light",n.HIGH_CONTRAST_DARK="hcDark",n.HIGH_CONTRAST_LIGHT="hcLight",n))(Xm||{});const I$=V("tab.activeBackground",El,F("tabActiveBackground","Active tab background color in an active group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups."));V("tab.unfocusedActiveBackground",I$,F("tabUnfocusedActiveBackground","Active tab background color in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups."));const Vue=V("tab.inactiveBackground",{dark:"#2D2D2D",light:"#ECECEC",hcDark:null,hcLight:null},F("tabInactiveBackground","Inactive tab background color in an active group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups."));V("tab.unfocusedInactiveBackground",Vue,F("tabUnfocusedInactiveBackground","Inactive tab background color in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups."));const vg=V("tab.activeForeground",{dark:ye.white,light:"#333333",hcDark:ye.white,hcLight:"#292929"},F("tabActiveForeground","Active tab foreground color in an active group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),CZ=V("tab.inactiveForeground",{dark:Je(vg,.5),light:Je(vg,.7),hcDark:ye.white,hcLight:"#292929"},F("tabInactiveForeground","Inactive tab foreground color in an active group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups."));V("tab.unfocusedActiveForeground",{dark:Je(vg,.5),light:Je(vg,.7),hcDark:ye.white,hcLight:"#292929"},F("tabUnfocusedActiveForeground","Active tab foreground color in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups."));V("tab.unfocusedInactiveForeground",{dark:Je(CZ,.5),light:Je(CZ,.5),hcDark:ye.white,hcLight:"#292929"},F("tabUnfocusedInactiveForeground","Inactive tab foreground color in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups."));const LZ=V("tab.hoverBackground",null,F("tabHoverBackground","Tab background color when hovering. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups."));V("tab.unfocusedHoverBackground",{dark:Je(LZ,.5),light:Je(LZ,.7),hcDark:null,hcLight:null},F("tabUnfocusedHoverBackground","Tab background color in an unfocused group when hovering. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups."));const kZ=V("tab.hoverForeground",null,F("tabHoverForeground","Tab foreground color when hovering. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups."));V("tab.unfocusedHoverForeground",{dark:Je(kZ,.5),light:Je(kZ,.5),hcDark:null,hcLight:null},F("tabUnfocusedHoverForeground","Tab foreground color in an unfocused group when hovering. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups."));V("tab.border",{dark:"#252526",light:"#F3F3F3",hcDark:ut,hcLight:ut},F("tabBorder","Border to separate tabs from each other. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups."));V("tab.lastPinnedBorder",{dark:m9,light:m9,hcDark:ut,hcLight:ut},F("lastPinnedTabBorder","Border to separate pinned tabs from other tabs. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups."));const xZ=V("tab.activeBorder",null,F("tabActiveBorder","Border on the bottom of an active tab. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups."));V("tab.unfocusedActiveBorder",{dark:Je(xZ,.5),light:Je(xZ,.7),hcDark:null,hcLight:null},F("tabActiveUnfocusedBorder","Border on the bottom of an active tab in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups."));const p9=V("tab.activeBorderTop",{dark:null,light:null,hcDark:null,hcLight:"#B5200D"},F("tabActiveBorderTop","Border to the top of an active tab. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups."));V("tab.unfocusedActiveBorderTop",{dark:Je(p9,.5),light:Je(p9,.7),hcDark:null,hcLight:"#B5200D"},F("tabActiveUnfocusedBorderTop","Border to the top of an active tab in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups."));V("tab.selectedBorderTop",p9,F("tabSelectedBorderTop","Border to the top of a selected tab. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups."));V("tab.selectedBackground",I$,F("tabSelectedBackground","Background of a selected tab. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups."));V("tab.selectedForeground",vg,F("tabSelectedForeground","Foreground of a selected tab. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups."));const TZ=V("tab.hoverBorder",null,F("tabHoverBorder","Border to highlight tabs when hovering. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups."));V("tab.unfocusedHoverBorder",{dark:Je(TZ,.5),light:Je(TZ,.7),hcDark:null,hcLight:ut},F("tabUnfocusedHoverBorder","Border to highlight tabs in an unfocused group when hovering. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups."));V("tab.dragAndDropBorder",{dark:vg,light:vg,hcDark:fn,hcLight:fn},F("tabDragAndDropBorder","Border between tabs to indicate that a tab can be inserted between two tabs. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups."));const kC=V("tab.activeModifiedBorder",{dark:"#3399CC",light:"#33AAEE",hcDark:null,hcLight:ut},F("tabActiveModifiedBorder","Border on the top of modified active tabs in an active group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),DZ=V("tab.inactiveModifiedBorder",{dark:Je(kC,.5),light:Je(kC,.5),hcDark:ye.white,hcLight:ut},F("tabInactiveModifiedBorder","Border on the top of modified inactive tabs in an active group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups."));V("tab.unfocusedActiveModifiedBorder",{dark:Je(kC,.5),light:Je(kC,.7),hcDark:ye.white,hcLight:ut},F("unfocusedActiveModifiedBorder","Border on the top of modified active tabs in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups."));V("tab.unfocusedInactiveModifiedBorder",{dark:Je(DZ,.5),light:Je(DZ,.5),hcDark:ye.white,hcLight:ut},F("unfocusedINactiveModifiedBorder","Border on the top of modified inactive tabs in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups."));V("editorPane.background",El,F("editorPaneBackground","Background color of the editor pane visible on the left and right side of the centered editor layout."));V("editorGroup.emptyBackground",null,F("editorGroupEmptyBackground","Background color of an empty editor group. Editor groups are the containers of editors."));V("editorGroup.focusedEmptyBorder",{dark:null,light:null,hcDark:Ml,hcLight:Ml},F("editorGroupFocusedEmptyBorder","Border color of an empty editor group that is focused. Editor groups are the containers of editors."));V("editorGroupHeader.tabsBackground",{dark:"#252526",light:"#F3F3F3",hcDark:null,hcLight:null},F("tabsContainerBackground","Background color of the editor group title header when tabs are enabled. Editor groups are the containers of editors."));V("editorGroupHeader.tabsBorder",null,F("tabsContainerBorder","Border color of the editor group title header when tabs are enabled. Editor groups are the containers of editors."));V("editorGroupHeader.noTabsBackground",El,F("editorGroupHeaderBackground",'Background color of the editor group title header when (`"workbench.editor.showTabs": "single"`). Editor groups are the containers of editors.'));V("editorGroupHeader.border",{dark:null,light:null,hcDark:ut,hcLight:ut},F("editorTitleContainerBorder","Border color of the editor group title header. Editor groups are the containers of editors."));const M$=V("editorGroup.border",{dark:"#444444",light:"#E7E7E7",hcDark:ut,hcLight:ut},F("editorGroupBorder","Color to separate multiple editor groups from each other. Editor groups are the containers of editors.")),E$=V("editorGroup.dropBackground",{dark:ye.fromHex("#53595D").transparent(.5),light:ye.fromHex("#2677CB").transparent(.18),hcDark:null,hcLight:ye.fromHex("#0F4A85").transparent(.5)},F("editorDragAndDropBackground","Background color when dragging editors around. The color should have transparency so that the editor contents can still shine through."));V("editorGroup.dropIntoPromptForeground",G1,F("editorDropIntoPromptForeground","Foreground color of text shown over editors when dragging files. This text informs the user that they can hold shift to drop into the editor."));V("editorGroup.dropIntoPromptBackground",ea,F("editorDropIntoPromptBackground","Background color of text shown over editors when dragging files. This text informs the user that they can hold shift to drop into the editor."));V("editorGroup.dropIntoPromptBorder",{dark:null,light:null,hcDark:ut,hcLight:ut},F("editorDropIntoPromptBorder","Border color of text shown over editors when dragging files. This text informs the user that they can hold shift to drop into the editor."));V("sideBySideEditor.horizontalBorder",M$,F("sideBySideEditor.horizontalBorder","Color to separate two editors from each other when shown side by side in an editor group from top to bottom."));V("sideBySideEditor.verticalBorder",M$,F("sideBySideEditor.verticalBorder","Color to separate two editors from each other when shown side by side in an editor group from left to right."));const Pue=V("panel.background",El,F("panelBackground","Panel background color. Panels are shown below the editor area and contain views like output and integrated terminal.")),Oue=V("panel.border",{dark:ye.fromHex("#808080").transparent(.35),light:ye.fromHex("#808080").transparent(.35),hcDark:ut,hcLight:ut},F("panelBorder","Panel border color to separate the panel from the editor. Panels are shown below the editor area and contain views like output and integrated terminal.")),L_=V("panelTitle.activeForeground",{dark:"#E7E7E7",light:"#424242",hcDark:ye.white,hcLight:Ec},F("panelActiveTitleForeground","Title color for the active panel. Panels are shown below the editor area and contain views like output and integrated terminal."));V("panelTitle.inactiveForeground",{dark:Je(L_,.6),light:Je(L_,.75),hcDark:ye.white,hcLight:Ec},F("panelInactiveTitleForeground","Title color for the inactive panel. Panels are shown below the editor area and contain views like output and integrated terminal."));V("panelTitle.activeBorder",{dark:L_,light:L_,hcDark:ut,hcLight:"#B5200D"},F("panelActiveTitleBorder","Border color for the active panel title. Panels are shown below the editor area and contain views like output and integrated terminal."));V("panelInput.border",{dark:XT,light:ye.fromHex("#ddd"),hcDark:XT,hcLight:XT},F("panelInputBorder","Input box border for inputs in the panel."));V("panel.dropBorder",L_,F("panelDragAndDropBorder","Drag and drop feedback color for the panel titles. Panels are shown below the editor area and contain views like output and integrated terminal."));V("panelSection.dropBackground",E$,F("panelSectionDragAndDropBackground","Drag and drop feedback color for the panel sections. The color should have transparency so that the panel sections can still shine through. Panels are shown below the editor area and contain views like output and integrated terminal. Panel sections are views nested within the panels."));V("panelSectionHeader.background",{dark:ye.fromHex("#808080").transparent(.2),light:ye.fromHex("#808080").transparent(.2),hcDark:null,hcLight:null},F("panelSectionHeaderBackground","Panel section header background color. Panels are shown below the editor area and contain views like output and integrated terminal. Panel sections are views nested within the panels."));V("panelSectionHeader.foreground",null,F("panelSectionHeaderForeground","Panel section header foreground color. Panels are shown below the editor area and contain views like output and integrated terminal. Panel sections are views nested within the panels."));V("panelSectionHeader.border",ut,F("panelSectionHeaderBorder","Panel section header border color used when multiple views are stacked vertically in the panel. Panels are shown below the editor area and contain views like output and integrated terminal. Panel sections are views nested within the panels."));V("panelSection.border",Oue,F("panelSectionBorder","Panel section border color used when multiple views are stacked horizontally in the panel. Panels are shown below the editor area and contain views like output and integrated terminal. Panel sections are views nested within the panels."));V("panelStickyScroll.background",Pue,F("panelStickyScrollBackground","Background color of sticky scroll in the panel."));V("panelStickyScroll.border",null,F("panelStickyScrollBorder","Border color of sticky scroll in the panel."));V("panelStickyScroll.shadow",n4,F("panelStickyScrollShadow","Shadow color of sticky scroll in the panel."));const Zue=V("outputView.background",null,F("outputViewBackground","Output view background color."));V("outputViewStickyScroll.background",Zue,F("outputViewStickyScrollBackground","Output view sticky scroll background color."));V("banner.background",{dark:wd,light:ca(wd,.3),hcDark:wd,hcLight:wd},F("banner.background","Banner background color. The banner is shown under the title bar of the window."));V("banner.foreground",Bk,F("banner.foreground","Banner foreground color. The banner is shown under the title bar of the window."));V("banner.iconForeground",Ba,F("banner.iconForeground","Banner icon color. The banner is shown under the title bar of the window."));const dh=V("statusBar.foreground",{dark:"#FFFFFF",light:"#FFFFFF",hcDark:"#FFFFFF",hcLight:Ec},F("statusBarForeground","Status bar foreground color when a workspace or folder is opened. The status bar is shown in the bottom of the window."));V("statusBar.noFolderForeground",dh,F("statusBarNoFolderForeground","Status bar foreground color when no folder is opened. The status bar is shown in the bottom of the window."));V("statusBar.background",{dark:"#007ACC",light:"#007ACC",hcDark:null,hcLight:null},F("statusBarBackground","Status bar background color when a workspace or folder is opened. The status bar is shown in the bottom of the window."));V("statusBar.noFolderBackground",{dark:"#68217A",light:"#68217A",hcDark:null,hcLight:null},F("statusBarNoFolderBackground","Status bar background color when no folder is opened. The status bar is shown in the bottom of the window."));const Gue=V("statusBar.border",{dark:null,light:null,hcDark:ut,hcLight:ut},F("statusBarBorder","Status bar border color separating to the sidebar and editor. The status bar is shown in the bottom of the window."));V("statusBar.focusBorder",{dark:dh,light:dh,hcDark:null,hcLight:dh},F("statusBarFocusBorder","Status bar border color when focused on keyboard navigation. The status bar is shown in the bottom of the window."));V("statusBar.noFolderBorder",Gue,F("statusBarNoFolderBorder","Status bar border color separating to the sidebar and editor when no folder is opened. The status bar is shown in the bottom of the window."));V("statusBarItem.activeBackground",{dark:ye.white.transparent(.18),light:ye.white.transparent(.18),hcDark:ye.white.transparent(.18),hcLight:ye.black.transparent(.18)},F("statusBarItemActiveBackground","Status bar item background color when clicking. The status bar is shown in the bottom of the window."));V("statusBarItem.focusBorder",{dark:dh,light:dh,hcDark:null,hcLight:fn},F("statusBarItemFocusBorder","Status bar item border color when focused on keyboard navigation. The status bar is shown in the bottom of the window."));const uh=V("statusBarItem.hoverBackground",{dark:ye.white.transparent(.12),light:ye.white.transparent(.12),hcDark:ye.white.transparent(.12),hcLight:ye.black.transparent(.12)},F("statusBarItemHoverBackground","Status bar item background color when hovering. The status bar is shown in the bottom of the window.")),B1=V("statusBarItem.hoverForeground",dh,F("statusBarItemHoverForeground","Status bar item foreground color when hovering. The status bar is shown in the bottom of the window."));V("statusBarItem.compactHoverBackground",{dark:ye.white.transparent(.2),light:ye.white.transparent(.2),hcDark:ye.white.transparent(.2),hcLight:ye.black.transparent(.2)},F("statusBarItemCompactHoverBackground","Status bar item background color when hovering an item that contains two hovers. The status bar is shown in the bottom of the window."));V("statusBarItem.prominentForeground",dh,F("statusBarProminentItemForeground","Status bar prominent items foreground color. Prominent items stand out from other status bar entries to indicate importance. The status bar is shown in the bottom of the window."));V("statusBarItem.prominentBackground",ye.black.transparent(.5),F("statusBarProminentItemBackground","Status bar prominent items background color. Prominent items stand out from other status bar entries to indicate importance. The status bar is shown in the bottom of the window."));V("statusBarItem.prominentHoverForeground",B1,F("statusBarProminentItemHoverForeground","Status bar prominent items foreground color when hovering. Prominent items stand out from other status bar entries to indicate importance. The status bar is shown in the bottom of the window."));V("statusBarItem.prominentHoverBackground",{dark:ye.black.transparent(.3),light:ye.black.transparent(.3),hcDark:ye.black.transparent(.3),hcLight:null},F("statusBarProminentItemHoverBackground","Status bar prominent items background color when hovering. Prominent items stand out from other status bar entries to indicate importance. The status bar is shown in the bottom of the window."));V("statusBarItem.errorBackground",{dark:ca(hZ,.4),light:ca(hZ,.4),hcDark:null,hcLight:"#B5200D"},F("statusBarErrorItemBackground","Status bar error items background color. Error items stand out from other status bar entries to indicate error conditions. The status bar is shown in the bottom of the window."));V("statusBarItem.errorForeground",ye.white,F("statusBarErrorItemForeground","Status bar error items foreground color. Error items stand out from other status bar entries to indicate error conditions. The status bar is shown in the bottom of the window."));V("statusBarItem.errorHoverForeground",B1,F("statusBarErrorItemHoverForeground","Status bar error items foreground color when hovering. Error items stand out from other status bar entries to indicate error conditions. The status bar is shown in the bottom of the window."));V("statusBarItem.errorHoverBackground",uh,F("statusBarErrorItemHoverBackground","Status bar error items background color when hovering. Error items stand out from other status bar entries to indicate error conditions. The status bar is shown in the bottom of the window."));V("statusBarItem.warningBackground",{dark:ca(Nc,.4),light:ca(Nc,.4),hcDark:null,hcLight:"#895503"},F("statusBarWarningItemBackground","Status bar warning items background color. Warning items stand out from other status bar entries to indicate warning conditions. The status bar is shown in the bottom of the window."));V("statusBarItem.warningForeground",ye.white,F("statusBarWarningItemForeground","Status bar warning items foreground color. Warning items stand out from other status bar entries to indicate warning conditions. The status bar is shown in the bottom of the window."));V("statusBarItem.warningHoverForeground",B1,F("statusBarWarningItemHoverForeground","Status bar warning items foreground color when hovering. Warning items stand out from other status bar entries to indicate warning conditions. The status bar is shown in the bottom of the window."));V("statusBarItem.warningHoverBackground",uh,F("statusBarWarningItemHoverBackground","Status bar warning items background color when hovering. Warning items stand out from other status bar entries to indicate warning conditions. The status bar is shown in the bottom of the window."));V("activityBar.background",{dark:"#333333",light:"#2C2C2C",hcDark:"#000000",hcLight:"#FFFFFF"},F("activityBarBackground","Activity bar background color. The activity bar is showing on the far left or right and allows to switch between views of the side bar."));const sb=V("activityBar.foreground",{dark:ye.white,light:ye.white,hcDark:ye.white,hcLight:Ec},F("activityBarForeground","Activity bar item foreground color when it is active. The activity bar is showing on the far left or right and allows to switch between views of the side bar."));V("activityBar.inactiveForeground",{dark:Je(sb,.4),light:Je(sb,.4),hcDark:ye.white,hcLight:Ec},F("activityBarInActiveForeground","Activity bar item foreground color when it is inactive. The activity bar is showing on the far left or right and allows to switch between views of the side bar."));V("activityBar.border",{dark:null,light:null,hcDark:ut,hcLight:ut},F("activityBarBorder","Activity bar border color separating to the side bar. The activity bar is showing on the far left or right and allows to switch between views of the side bar."));V("activityBar.activeBorder",{dark:sb,light:sb,hcDark:ut,hcLight:ut},F("activityBarActiveBorder","Activity bar border color for the active item. The activity bar is showing on the far left or right and allows to switch between views of the side bar."));V("activityBar.activeFocusBorder",{dark:null,light:null,hcDark:null,hcLight:"#B5200D"},F("activityBarActiveFocusBorder","Activity bar focus border color for the active item. The activity bar is showing on the far left or right and allows to switch between views of the side bar."));V("activityBar.activeBackground",null,F("activityBarActiveBackground","Activity bar background color for the active item. The activity bar is showing on the far left or right and allows to switch between views of the side bar."));V("activityBar.dropBorder",{dark:sb,light:sb,hcDark:null,hcLight:null},F("activityBarDragAndDropBorder","Drag and drop feedback color for the activity bar items. The activity bar is showing on the far left or right and allows to switch between views of the side bar."));const N$=V("activityBarBadge.background",{dark:"#007ACC",light:"#007ACC",hcDark:"#000000",hcLight:"#0F4A85"},F("activityBarBadgeBackground","Activity notification badge background color. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),R$=V("activityBarBadge.foreground",ye.white,F("activityBarBadgeForeground","Activity notification badge foreground color. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),k_=V("activityBarTop.foreground",{dark:"#E7E7E7",light:"#424242",hcDark:ye.white,hcLight:Ec},F("activityBarTop","Active foreground color of the item in the Activity bar when it is on top / bottom. The activity allows to switch between views of the side bar."));V("activityBarTop.activeBorder",{dark:k_,light:k_,hcDark:ut,hcLight:"#B5200D"},F("activityBarTopActiveFocusBorder","Focus border color for the active item in the Activity bar when it is on top / bottom. The activity allows to switch between views of the side bar."));V("activityBarTop.activeBackground",null,F("activityBarTopActiveBackground","Background color for the active item in the Activity bar when it is on top / bottom. The activity allows to switch between views of the side bar."));V("activityBarTop.inactiveForeground",{dark:Je(k_,.6),light:Je(k_,.75),hcDark:ye.white,hcLight:Ec},F("activityBarTopInActiveForeground","Inactive foreground color of the item in the Activity bar when it is on top / bottom. The activity allows to switch between views of the side bar."));V("activityBarTop.dropBorder",k_,F("activityBarTopDragAndDropBorder","Drag and drop feedback color for the items in the Activity bar when it is on top / bottom. The activity allows to switch between views of the side bar."));V("activityBarTop.background",null,F("activityBarTopBackground","Background color of the activity bar when set to top / bottom."));V("profileBadge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:ye.white,hcLight:ye.black},F("profileBadgeBackground","Profile badge background color. The profile badge shows on top of the settings gear icon in the activity bar."));V("profileBadge.foreground",{dark:ye.white,light:"#333333",hcDark:ye.black,hcLight:ye.white},F("profileBadgeForeground","Profile badge foreground color. The profile badge shows on top of the settings gear icon in the activity bar."));V("statusBarItem.remoteBackground",N$,F("statusBarItemHostBackground","Background color for the remote indicator on the status bar."));const Bue=V("statusBarItem.remoteForeground",R$,F("statusBarItemHostForeground","Foreground color for the remote indicator on the status bar."));V("statusBarItem.remoteHoverForeground",B1,F("statusBarRemoteItemHoverForeground","Foreground color for the remote indicator on the status bar when hovering."));V("statusBarItem.remoteHoverBackground",{dark:uh,light:uh,hcDark:uh,hcLight:null},F("statusBarRemoteItemHoverBackground","Background color for the remote indicator on the status bar when hovering."));V("statusBarItem.offlineBackground","#6c1717",F("statusBarItemOfflineBackground","Status bar item background color when the workbench is offline."));V("statusBarItem.offlineForeground",Bue,F("statusBarItemOfflineForeground","Status bar item foreground color when the workbench is offline."));V("statusBarItem.offlineHoverForeground",B1,F("statusBarOfflineItemHoverForeground","Status bar item foreground hover color when the workbench is offline."));V("statusBarItem.offlineHoverBackground",{dark:uh,light:uh,hcDark:uh,hcLight:null},F("statusBarOfflineItemHoverBackground","Status bar item background hover color when the workbench is offline."));V("extensionBadge.remoteBackground",N$,F("extensionBadge.remoteBackground","Background color for the remote badge in the extensions view."));V("extensionBadge.remoteForeground",R$,F("extensionBadge.remoteForeground","Foreground color for the remote badge in the extensions view."));const W$=V("sideBar.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#000000",hcLight:"#FFFFFF"},F("sideBarBackground","Side bar background color. The side bar is the container for views like explorer and search.")),A$=V("sideBar.foreground",null,F("sideBarForeground","Side bar foreground color. The side bar is the container for views like explorer and search."));V("sideBar.border",{dark:null,light:null,hcDark:ut,hcLight:ut},F("sideBarBorder","Side bar border color on the side separating to the editor. The side bar is the container for views like explorer and search."));V("sideBarTitle.background",W$,F("sideBarTitleBackground","Side bar title background color. The side bar is the container for views like explorer and search."));V("sideBarTitle.foreground",A$,F("sideBarTitleForeground","Side bar title foreground color. The side bar is the container for views like explorer and search."));V("sideBar.dropBackground",E$,F("sideBarDragAndDropBackground","Drag and drop feedback color for the side bar sections. The color should have transparency so that the side bar sections can still shine through. The side bar is the container for views like explorer and search. Side bar sections are views nested within the side bar."));V("sideBarSectionHeader.background",{dark:ye.fromHex("#808080").transparent(.2),light:ye.fromHex("#808080").transparent(.2),hcDark:null,hcLight:null},F("sideBarSectionHeaderBackground","Side bar section header background color. The side bar is the container for views like explorer and search. Side bar sections are views nested within the side bar."));V("sideBarSectionHeader.foreground",A$,F("sideBarSectionHeaderForeground","Side bar section header foreground color. The side bar is the container for views like explorer and search. Side bar sections are views nested within the side bar."));const Xue=V("sideBarSectionHeader.border",ut,F("sideBarSectionHeaderBorder","Side bar section header border color. The side bar is the container for views like explorer and search. Side bar sections are views nested within the side bar."));V("sideBarActivityBarTop.border",Xue,F("sideBarActivityBarTopBorder","Border color between the activity bar at the top/bottom and the views."));V("sideBarStickyScroll.background",W$,F("sideBarStickyScrollBackground","Background color of sticky scroll in the side bar."));V("sideBarStickyScroll.border",null,F("sideBarStickyScrollBorder","Border color of sticky scroll in the side bar."));V("sideBarStickyScroll.shadow",n4,F("sideBarStickyScrollShadow","Shadow color of sticky scroll in the side bar."));const bc=V("titleBar.activeForeground",{dark:"#CCCCCC",light:"#333333",hcDark:"#FFFFFF",hcLight:"#292929"},F("titleBarActiveForeground","Title bar foreground when the window is active.")),F$=V("titleBar.inactiveForeground",{dark:Je(bc,.6),light:Je(bc,.6),hcDark:null,hcLight:"#292929"},F("titleBarInactiveForeground","Title bar foreground when the window is inactive.")),IZ=V("titleBar.activeBackground",{dark:"#3C3C3C",light:"#DDDDDD",hcDark:"#000000",hcLight:"#FFFFFF"},F("titleBarActiveBackground","Title bar background when the window is active."));V("titleBar.inactiveBackground",{dark:Je(IZ,.6),light:Je(IZ,.6),hcDark:null,hcLight:null},F("titleBarInactiveBackground","Title bar background when the window is inactive."));V("titleBar.border",{dark:null,light:null,hcDark:ut,hcLight:ut},F("titleBarBorder","Title bar border color."));const zue=V("menubar.selectionForeground",bc,F("menubarSelectionForeground","Foreground color of the selected menu item in the menubar.")),MZ=V("menubar.selectionBackground",{dark:LC,light:LC,hcDark:null,hcLight:null},F("menubarSelectionBackground","Background color of the selected menu item in the menubar."));V("menubar.selectionBorder",{dark:null,light:null,hcDark:fn,hcLight:fn},F("menubarSelectionBorder","Border color of the selected menu item in the menubar."));V("commandCenter.foreground",bc,F("commandCenter-foreground","Foreground color of the command center"),!1);V("commandCenter.activeForeground",zue,F("commandCenter-activeForeground","Active foreground color of the command center"),!1);V("commandCenter.inactiveForeground",F$,F("commandCenter-inactiveForeground","Foreground color of the command center when the window is inactive"),!1);V("commandCenter.background",{dark:ye.white.transparent(.05),hcDark:null,light:ye.black.transparent(.05),hcLight:null},F("commandCenter-background","Background color of the command center"),!1);V("commandCenter.activeBackground",{dark:ye.white.transparent(.08),hcDark:MZ,light:ye.black.transparent(.08),hcLight:MZ},F("commandCenter-activeBackground","Active background color of the command center"),!1);V("commandCenter.border",{dark:Je(bc,.2),hcDark:ut,light:Je(bc,.2),hcLight:ut},F("commandCenter-border","Border color of the command center"),!1);V("commandCenter.activeBorder",{dark:Je(bc,.3),hcDark:bc,light:Je(bc,.3),hcLight:bc},F("commandCenter-activeBorder","Active border color of the command center"),!1);V("commandCenter.inactiveBorder",Je(F$,.25),F("commandCenter-inactiveBorder","Border color of the command center when the window is inactive"),!1);V("notificationCenter.border",{dark:CC,light:CC,hcDark:ut,hcLight:ut},F("notificationCenterBorder","Notifications center border color. Notifications slide in from the bottom right of the window."));V("notificationToast.border",{dark:CC,light:CC,hcDark:ut,hcLight:ut},F("notificationToastBorder","Notification toast border color. Notifications slide in from the bottom right of the window."));V("notifications.foreground",G1,F("notificationsForeground","Notifications foreground color. Notifications slide in from the bottom right of the window."));const Hw=V("notifications.background",ea,F("notificationsBackground","Notifications background color. Notifications slide in from the bottom right of the window."));V("notificationLink.foreground",pue,F("notificationsLink","Notification links foreground color. Notifications slide in from the bottom right of the window."));V("notificationCenterHeader.foreground",null,F("notificationCenterHeaderForeground","Notifications center header foreground color. Notifications slide in from the bottom right of the window."));const Hue=V("notificationCenterHeader.background",{dark:Ra(Hw,.3),light:ca(Hw,.05),hcDark:Hw,hcLight:Hw},F("notificationCenterHeaderBackground","Notifications center header background color. Notifications slide in from the bottom right of the window."));V("notifications.border",Hue,F("notificationsBorder","Notifications border color separating from other notifications in the notifications center. Notifications slide in from the bottom right of the window."));V("notificationsErrorIcon.foreground",Yd,F("notificationsErrorIconForeground","The color used for the icon of error notifications. Notifications slide in from the bottom right of the window."));V("notificationsWarningIcon.foreground",Nc,F("notificationsWarningIconForeground","The color used for the icon of warning notifications. Notifications slide in from the bottom right of the window."));V("notificationsInfoIcon.foreground",Ba,F("notificationsInfoIconForeground","The color used for the icon of info notifications. Notifications slide in from the bottom right of the window."));V("window.activeBorder",{dark:null,light:null,hcDark:ut,hcLight:ut},F("windowActiveBorder","The color used for the border of the window when it is active. Only supported in the macOS and Linux desktop client when using the custom title bar."));V("window.inactiveBorder",{dark:null,light:null,hcDark:ut,hcLight:ut},F("windowInactiveBorder","The color used for the border of the window when it is inactive. Only supported in the macOS and Linux desktop client when using the custom title bar."));const Uue=V("testing.iconFailed",{dark:"#f14c4c",light:"#f14c4c",hcDark:"#f14c4c",hcLight:"#B5200D"},F("testing.iconFailed","Color for the 'failed' icon in the test explorer.")),Yue=V("testing.iconErrored",{dark:"#f14c4c",light:"#f14c4c",hcDark:"#f14c4c",hcLight:"#B5200D"},F("testing.iconErrored","Color for the 'Errored' icon in the test explorer.")),V$=V("testing.iconPassed",{dark:"#73c991",light:"#73c991",hcDark:"#73c991",hcLight:"#007100"},F("testing.iconPassed","Color for the 'passed' icon in the test explorer."));V("testing.runAction",V$,F("testing.runAction","Color for 'run' icons in the editor."));const Kue=V("testing.iconQueued","#cca700",F("testing.iconQueued","Color for the 'Queued' icon in the test explorer.")),jue=V("testing.iconUnset","#848484",F("testing.iconUnset","Color for the 'Unset' icon in the test explorer.")),Jue=V("testing.iconSkipped","#848484",F("testing.iconSkipped","Color for the 'Skipped' icon in the test explorer."));V("testing.peekBorder",{dark:Yd,light:Yd,hcDark:ut,hcLight:ut},F("testing.peekBorder","Color of the peek view borders and arrow."));V("testing.messagePeekBorder",{dark:Ba,light:Ba,hcDark:ut,hcLight:ut},F("testing.messagePeekBorder","Color of the peek view borders and arrow when peeking a logged message."));V("testing.peekHeaderBackground",{dark:Je(Yd,.1),light:Je(Yd,.1),hcDark:null,hcLight:null},F("testing.peekBorder","Color of the peek view borders and arrow."));V("testing.messagePeekHeaderBackground",{dark:Je(Ba,.1),light:Je(Ba,.1),hcDark:null,hcLight:null},F("testing.messagePeekHeaderBackground","Color of the peek view borders and arrow when peeking a logged message."));const EZ=V("testing.coveredBackground",{dark:SC,light:SC,hcDark:null,hcLight:null},F("testing.coveredBackground","Background color of text that was covered."));V("testing.coveredBorder",{dark:Je(EZ,.75),light:Je(EZ,.75),hcDark:ut,hcLight:ut},F("testing.coveredBorder","Border color of text that was covered."));V("testing.coveredGutterBackground",{dark:Je(SC,.6),light:Je(SC,.6),hcDark:wZ,hcLight:wZ},F("testing.coveredGutterBackground","Gutter color of regions where code was covered."));V("testing.uncoveredBranchBackground",{dark:cZ(Je(tb,2),El),light:cZ(Je(tb,2),El),hcDark:null,hcLight:null},F("testing.uncoveredBranchBackground","Background of the widget shown for an uncovered branch."));const NZ=V("testing.uncoveredBackground",{dark:tb,light:tb,hcDark:null,hcLight:null},F("testing.uncoveredBackground","Background color of text that was not covered."));V("testing.uncoveredBorder",{dark:Je(NZ,.75),light:Je(NZ,.75),hcDark:ut,hcLight:ut},F("testing.uncoveredBorder","Border color of text that was not covered."));V("testing.uncoveredGutterBackground",{dark:Je(tb,1.5),light:Je(tb,1.5),hcDark:_Z,hcLight:_Z},F("testing.uncoveredGutterBackground","Gutter color of regions where code not covered."));V("testing.coverCountBadgeBackground",CS,F("testing.coverCountBadgeBackground","Background for the badge indicating execution count"));V("testing.coverCountBadgeForeground",bue,F("testing.coverCountBadgeForeground","Foreground for the badge indicating execution count"));V("testing.message.error.decorationForeground",{dark:Yd,light:Yd,hcDark:Ec,hcLight:Ec},F("testing.message.error.decorationForeground","Text color of test error messages shown inline in the editor."));V("testing.message.error.lineBackground",{dark:new ye(new Ut(255,0,0,.1)),light:new ye(new Ut(255,0,0,.1)),hcDark:null,hcLight:null},F("testing.message.error.marginBackground","Margin color beside error messages shown inline in the editor."));V("testing.message.info.decorationForeground",Je(Ec,.5),F("testing.message.info.decorationForeground","Text color of test info messages shown inline in the editor."));V("testing.message.info.lineBackground",null,F("testing.message.info.marginBackground","Margin color beside info messages shown inline in the editor."));V("testing.iconErrored.retired",Je(Yue,.7),F("testing.iconErrored.retired","Retired color for the 'Errored' icon in the test explorer."));V("testing.iconFailed.retired",Je(Uue,.7),F("testing.iconFailed.retired","Retired color for the 'failed' icon in the test explorer."));V("testing.iconPassed.retired",Je(V$,.7),F("testing.iconPassed.retired","Retired color for the 'passed' icon in the test explorer."));V("testing.iconQueued.retired",Je(Kue,.7),F("testing.iconQueued.retired","Retired color for the 'Queued' icon in the test explorer."));V("testing.iconUnset.retired",Je(jue,.7),F("testing.iconUnset.retired","Retired color for the 'Unset' icon in the test explorer."));V("testing.iconSkipped.retired",Je(Jue,.7),F("testing.iconSkipped.retired","Retired color for the 'Skipped' icon in the test explorer."));V("editor.stackFrameHighlightBackground",{dark:"#ffff0033",light:"#ffff6673",hcDark:"#ffff0033",hcLight:"#ffff6673"},F("topStackFrameLineHighlight","Background color for the highlight of line at the top stack frame position."));V("editor.focusedStackFrameHighlightBackground",{dark:"#7abd7a4d",light:"#cee7ce73",hcDark:"#7abd7a4d",hcLight:"#cee7ce73"},F("focusedStackFrameLineHighlight","Background color for the highlight of line at focused stack frame position."));const $ue=V("editor.wordHighlightBackground",{dark:"#575757B8",light:"#57575740",hcDark:null,hcLight:null},F("wordHighlight","Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations."),!0);V("editor.wordHighlightStrongBackground",{dark:"#004972B8",light:"#0e639c40",hcDark:null,hcLight:null},F("wordHighlightStrong","Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations."),!0);V("editor.wordHighlightTextBackground",$ue,F("wordHighlightText","Background color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations."),!0);const Que=V("editor.wordHighlightBorder",{light:null,dark:null,hcDark:fn,hcLight:fn},F("wordHighlightBorder","Border color of a symbol during read-access, like reading a variable."));V("editor.wordHighlightStrongBorder",{light:null,dark:null,hcDark:fn,hcLight:fn},F("wordHighlightStrongBorder","Border color of a symbol during write-access, like writing to a variable."));V("editor.wordHighlightTextBorder",Que,F("wordHighlightTextBorder","Border color of a textual occurrence for a symbol."));V("editorOverviewRuler.wordHighlightForeground","#A0A0A0CC",F("overviewRulerWordHighlightForeground","Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0);V("editorOverviewRuler.wordHighlightStrongForeground","#C0A0C0CC",F("overviewRulerWordHighlightStrongForeground","Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0);V("editorOverviewRuler.wordHighlightTextForeground",kue,F("overviewRulerWordHighlightTextForeground","Overview ruler marker color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations."),!0);let RZ=new Set,zT;async function que(){try{const n=acquireVsCodeApi();return n.postMessage({type:"firstPing"}),setTimeout(()=>{n.postMessage({type:"secondPing"})},1),new Promise(e=>{const t=i=>{i?.data?.type==="allowedToStart"&&(window.removeEventListener("message",t),e())};window.addEventListener("message",t)})}catch(n){console.error(n)}}async function x_(n,e){if(n){const t=document.querySelector(":root"),i=t.style,s=n.settings,r=n.theme;let o,a=r?.code,l=r?.ui;const c=n.theme?.type||"dark",d=s?.["custom.kind"]==="remote";if(e&&(ihe(t.classList,c),d&&(o=await lZ(r?.name,r?.type),o&&(l=o.ui)),l)){const u=new Set,h=new ehe(the(c),l);i4.getColors().forEach(f=>{const g=h.getColor(f.id);if(g){const m=nhe(f.id);u.add(m),i.setProperty(m,g.toString())}});for(const f of[...RZ].filter(g=>!u.has(g)))i.removeProperty(f);RZ=u}if(d&&(o=e?o:await lZ(r?.name),o&&(a=o.code)),a){const u={class:a["support.class"]||a["support.type"]||{},new:a["keyword.operator.new"]||{},operator:a["keyword.operator"]||{},string:a.string||{},number:a["constant.numeric"]||a.constant||{},boolean:a["constant.language"]||a.constant||{},undefined:a["constant.language"]||a.constant||{},null:a["constant.language"]||a.constant||{},regexp:a["string.regexp"]||a.string||{},function:a["entity.name.function"]||{},property:a["entity.name.variable"]||a["entity.name.label"]||a["variable.other.property"]||a["variable.other"]||a.variable||{},type:a["entity.name.type.ts"]||a["entity.name.type.interface.ts"]||a["entity.other.inherited-class.ts"]||a["entity.name.type.alias.ts"]||a["entity.name.type.class.ts"]||a["entity.name.type.enum.ts"]||a["support.type"]||a["support.class"]||a.support||{},inserted:a["markup.inserted"]||{},deleted:a["markup.deleted"]||{},punctuation:a.punctuation||{},comment:a.comment||{}};for(const h in u){const f=u[h],g=f?.style||"";i.setProperty(`--token-scope-${h}-foreground`,f?.foreground||"var(--foreground)"),i.setProperty(`--token-scope-${h}-font-style`,g.includes("italic")?"italic":""),i.setProperty(`--token-scope-${h}-font-weight`,g.includes("bold")?"bold":"normal"),i.setProperty(`--token-${h}-text-decoration`,(g.includes("underline")?"underline":" ")+(g.includes("strikethrough")?"line-through":""))}}if(s){for(const u in s)if(s){if(u==="editor.scrollbar.verticalScrollbarSize"&&s[u]&&i.setProperty("--vscode-editor-scrollbar-verticalScrollbarSize",s[u]||null),u==="editor.scrollbar.horizontalScrollbarSize"&&s[u]&&i.setProperty("--vscode-editor-scrollbar-horizontalScrollbarSize",s[u]||null),u==="workbench.sash.size"&&s[u]&&i.setProperty("--vscode-sash-size",s[u]?`${s[u]}px`:null),u==="editor.fontLigatures"&&s[u]&&i.setProperty("--vscode-editor-fontLigatures",s[u]||null),u==="editor.cursorStyle"&&s[u]&&i.setProperty("--vscode-editor-cursorStyle",s[u]||null),u==="editor.cursorBlinking"&&s[u]&&i.setProperty("--vscode-editor-cursorBlinking",s[u]||null),u==="editor.cursorSmoothCaretAnimation"&&s[u]&&i.setProperty("--vscode-editor-cursorSmoothCaretAnimation",s[u]||null),u==="wallaby.fontSize"&&s[u]){const h=parseInt(s[u],10);h>0&&i.setProperty("--panel-font-size",`${h}px`)}e&&(u==="window.fontFamily"&&s[u]!==void 0&&i.setProperty("--vscode-font-family",s[u]||null),u==="editor.fontFamily"&&s[u]!==void 0&&i.setProperty("--vscode-editor-font-family",s[u]||null),u==="editor.fontSize"&&s[u]&&i.setProperty("--vscode-editor-font-size",s[u]?`${s[u]}px`:null),u==="editor.fontWeight"&&s[u]&&i.setProperty("--vscode-editor-font-weight",s[u]||null),i.setProperty("--panel-scrollbar-width","0.5rem"),i.setProperty("--panel-scrollbar-height","0.5rem"))}}await Oa(()=>Promise.resolve({}),__vite__mapDeps([0]),import.meta.url),a&&(zT||(zT=(await Oa(()=>Promise.resolve().then(()=>tx),void 0,import.meta.url)).customize),await zT(a)),_$(r?.type||o?.type||"dark")}}class ehe{constructor(e,t){this.type=e,this._colors=new Map;for(const i in t)if(t[i])try{const s=t[i];s instanceof Array?this._colors.set(i,ye.fromHex(s[0])):this._colors.set(i,ye.fromHex(s))}catch(s){console.error(i,t[i]),console.error(s,i,t[i])}this._defaultColors=Object.create(null)}_colors;_defaultColors;_getDefault(e){let t=this._defaultColors[e];return t||(t=i4.resolveDefaultColor(e,this),this._defaultColors[e]=t,t)}getColor(e,t){const i=this._colors.get(e);if(i)return i;if(t!==!1)return this._getDefault(e)}defines(e){return this._colors.has(e)}}function the(n){switch(n){case"light":return Xm.LIGHT;case"dark":return Xm.DARK;case"hc-dark":return Xm.HIGH_CONTRAST_DARK;case"hc-light":return Xm.HIGH_CONTRAST_LIGHT;default:return Xm.DARK}}function ihe(n,e){const t=["vscode-dark","vscode-light","vscode-high-contrast","vscode-high-contrast-light"];let i="vscode-dark";switch(e){case"dark":i="vscode-dark";break;case"light":i="vscode-light";break;case"hc-dark":i="vscode-high-contrast";break;case"hc-light":i="vscode-high-contrast-light";break}n.add(i),t.filter(s=>s!==i).forEach(s=>n.remove(s))}function nhe(n){return`--vscode-${n.replaceAll(".","-")}`}function vl(n){const[e,t]=O1(n.initial||{}),i=she(n.constructor,e,t);return Ot(()=>{i.dispose&&i.dispose()}),x(n.constructor.Provider,{initial:i,get children(){return n.view({state:e,setState:t})}})}function she(n,e,t){return new n(e,t)}function Go(n,e){const t=Fk(e);return[i=>x(t.Provider,{value:n(i),get children(){return i.children}}),()=>Vk(t)]}function WZ(n){const{values:e}=n,t=i=>{let s=e[i];if(!s)return n.children;const r={get children(){return t(i+1)}};return Array.isArray(s)&&(r.value=s[1],s=s[0],typeof s!="function"&&(s=s.Provider)),x(s,r)};return t(0)}function AZ(n){return[n.get,n.set]}const FZ=Promise.resolve();function rhe(n){return n?FZ.then(this?n.bind(this):n):FZ}function qb(n){return typeof n=="function"}function ohe(n){return Array.isArray(n)&&n.length===2&&typeof n[0]=="function"&&typeof n[1]=="function"}const ahe=()=>{};function P$(n){return ohe(n)?n:qb(n)?[n,ahe]:he(n)}function lhe(n){return n===void 0||!qb(n)?he(n)[0]:n}function kn(n){return typeof n=="function"?n():n}const Xk=typeof window<"u",che=n=>n!=null,dhe=Object.prototype.toString,uhe=n=>dhe.call(n)==="[object Object]",Wa=()=>{},hhe=fhe();function fhe(){var n;return Xk&&((n=window?.navigator)==null?void 0:n.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent)}function o4(n,e){function t(...i){return new Promise((s,r)=>{Promise.resolve(n(()=>e.apply(this,i),{fn:e,thisArg:this,args:i})).then(s).catch(r)})}return t}const O$=n=>n();function ghe(n,e={}){let t,i,s=Wa;const r=l=>{clearTimeout(l),s(),s=Wa},o=Zo();return l=>{const c=kn(n),d=kn(e.maxWait);return t&&r(t),c<=0||d!==void 0&&d<=0?(i&&(r(i),i=null),new Promise(u=>{tg(o,()=>{u(l())})})):new Promise((u,h)=>{s=e.rejectOnCancel?h:u,d&&!i&&(i=setTimeout(()=>{t&&r(t),i=null,u(l())},d)),t=setTimeout(()=>{i&&r(i),i=null,u(l())},c)})}}function mhe(n,e=!0,t=!0,i=!1){let s=0,r,o=!0,a=Wa,l;const c=Zo(),d=()=>{r&&(clearTimeout(r),r=void 0,a(),a=Wa)};return h=>{const f=kn(n),g=Date.now()-s,m=()=>l=h();if(d(),f<=0){s=Date.now(),tg(c,()=>{m()});return}return g>f&&(t||!o)?(s=Date.now(),tg(c,()=>{m()})):e&&(l=new Promise((p,b)=>{a=i?b:p,r=setTimeout(()=>{s=Date.now(),o=!0,tg(c,()=>{p(m())}),d()},Math.max(0,f-g))})),!t&&!r&&(r=setTimeout(()=>o=!0,f)),o=!1,l}}function phe(n=O$){const[e,t]=he(!0);function i(){t(!1)}function s(){t(!0)}return{isActive:e,pause:i,resume:s,eventFilter:(...o)=>{e()&&n(...o)}}}function Z$(n,e=200,t={}){return o4(ghe(e,t),n)}function a4(n,e=200,t={}){const[i,s]=he(n()),r=Z$(()=>{s(()=>n())},e,t);return Fi(go(n,()=>{r()},{defer:!0})),i}function G$(n,e=200,t=!1,i=!0,s=!1){return o4(mhe(e,t,i,s),n)}function bhe(n,e=200,t=!0,i=!0){if(e<=0)return n;const[s,r]=he(n()),o=G$(()=>{r(()=>n())},e,t,i);return Fi(go(n,()=>{o()},{defer:!0})),s}function e0(n){return Zo()?(Ot(n),!0):!1}function vhe(n,e){const t={};return Object.keys(n).forEach(i=>{t[i]=J(()=>n[i]??e?.[i])}),t}function $e(n,e,t){const[i,s]=he(!0);return Fi(go(_he(n),(o,a,l)=>{i()&&e(o,a,l)},t)),()=>{s(!1)}}function _he(n){return Array.isArray(n)?n:uhe(n)?Object.values(vhe(n)):qb(n)?n:()=>n}function rb(n){return qb(n)?n:()=>n}function whe(n,e=!0){Zo()?Bn(n):e?n():rhe(n)}function yhe(n,e,t={}){const{eventFilter:i=O$,...s}=t;return $e(n,o4(i,e),s)}function She(n,e,t={}){const{eventFilter:i,defer:s=!0}=t,{eventFilter:r,pause:o,resume:a,isActive:l}=phe(i);return{stop:yhe(n,e,{defer:s,eventFilter:r}),pause:o,resume:a,isActive:l}}const ja=Xk?window:void 0,Che=Xk?window.document:void 0;function oa(...n){let e,t,i,s;if(typeof n[0]=="string"||Array.isArray(n[0])?([t,i,s]=n,e=ja):[e,t,i,s]=n,!e)return Wa;Array.isArray(t)||(t=[t]),Array.isArray(i)||(i=[i]);const r=[],o=()=>{r.forEach(d=>d()),r.length=0},a=(d,u,h,f)=>(d.addEventListener(u,h,f),()=>d.removeEventListener(u,h,f)),l=$e([rb(e),rb(s)],([d,u])=>{o(),d&&r.push(...t.flatMap(h=>i.map(f=>a(d,h,f,u))))}),c=()=>{l(),o()};return e0(c),c}let VZ=!1;function B$(n,e,t={}){const{window:i=ja,ignore:s=[],capture:r=!0,detectIframe:o=!1}=t;if(!i)return;hhe&&!VZ&&(VZ=!0,Array.from(i.document.body.children).forEach(h=>h.addEventListener("click",Wa)),i.document.documentElement.addEventListener("click",Wa));let a=!0;const l=h=>s.some(f=>{if(typeof f=="string")return Array.from(i.document.querySelectorAll(f)).some(m=>m===h.target||h.composedPath().includes(m));const g=kn(f);return g&&(h.target===g||h.composedPath().includes(g))}),d=[oa(i,"click",h=>{const f=kn(n);if(!(!f||f===h.target||h.composedPath().includes(f))){if(h.detail===0&&(a=!l(h)),!a){a=!0;return}e(h)}},{passive:!0,capture:r}),oa(i,"pointerdown",h=>{const f=kn(n);f&&(a=!h.composedPath().includes(f)&&!l(h))},{passive:!0}),o&&oa(i,"blur",h=>{setTimeout(()=>{var f;const g=kn(n);((f=i.document.activeElement)==null?void 0:f.tagName)==="IFRAME"&&!g?.contains(i.document.activeElement)&&e(h)},0)})].filter(Boolean);return()=>d.forEach(h=>h())}function Lhe(){const[n,e]=he(!1);return Zo()&&Bn(()=>{e(!0)}),n}function zk(n){const e=Lhe();return J(()=>(e(),!!n()))}function khe(n,e={}){const{window:t=ja}=e,i=zk(()=>t&&"matchMedia"in t&&typeof t.matchMedia=="function");let s;const[r,o]=he(!1),a=d=>{o(d.matches)},l=()=>{s&&("removeEventListener"in s?s.removeEventListener("change",a):s.removeListener(a))},c=$e([rb(n),i],()=>{i()&&(l(),s=t.matchMedia(kn(n)),"addEventListener"in s?s.addEventListener("change",a):s.addListener(a),o(s.matches))});return e0(()=>{c(),l(),s=void 0}),r}function X$(n,e,t={}){const{window:i=ja,...s}=t;let r;const o=zk(()=>i&&"MutationObserver"in i),a=()=>{r&&(r.disconnect(),r=void 0)},l=$e(rb(n),d=>{a(),o()&&i&&d&&(r=new MutationObserver(e),r.observe(d,s))}),c=()=>{a(),l()};return e0(c),{isSupported:o,stop:c}}function HT(n,e={}){const t=e.draggingElement??ja,i=e.handle??n,s=mC({value:kn(e.initialValue)??{x:0,y:0}}),r=mC({value:void 0}),o=u=>e.pointerTypes?e.pointerTypes.includes(u.pointerType):!0,a=u=>{kn(e.preventDefault)&&u.preventDefault(),kn(e.stopPropagation)&&u.stopPropagation()},l=u=>{var h;if(!o(u)||kn(e.exact)&&u.target!==kn(n))return;const f=kn(n).getBoundingClientRect(),g={x:u.clientX-f.left,y:u.clientY-f.top};((h=e.onStart)==null?void 0:h.call(e,g,u))!==!1&&(r.value=g,a(u))},c=u=>{var h;o(u)&&r.value&&(s.value={x:u.clientX-r.value.x,y:u.clientY-r.value.y},(h=e.onMove)==null||h.call(e,s.value,u),a(u))},d=u=>{var h;o(u)&&r.value&&(r.value=void 0,(h=e.onEnd)==null||h.call(e,s.value,u),a(u))};return Xk&&(oa(i,"pointerdown",l,!0),oa(t,"pointermove",c,!0),oa(t,"pointerup",d,!0)),{x:()=>s.value.x,y:()=>s.value.y,position:s,isDragging:J(()=>!!r.value),style:J(()=>({left:`${s.value.x}px`,top:`${s.value.y}px`}))}}function jh(n,e,t={}){const{window:i=ja,...s}=t;let r;const o=zk(()=>i&&"ResizeObserver"in i),a=()=>{r&&(r.disconnect(),r=void 0)},l=J(()=>Array.isArray(n)?n.map(kn):[kn(n)]),c=$e(l,u=>{if(a(),o()&&i){r=new ResizeObserver(e);for(const h of u)h&&r.observe(h,s)}},{defer:!1}),d=()=>{a(),c()};return e0(d),{isSupported:o,stop:d}}function xhe(n,e={width:0,height:0},t={}){const{window:i=ja,box:s="content-box"}=t,r=J(()=>{var d,u;return(u=(d=kn(n))==null?void 0:d.namespaceURI)==null?void 0:u.includes("svg")}),[o,a]=he(e.width),[l,c]=he(e.height);return jh(n,([d])=>{const u=s==="border-box"?d.borderBoxSize:s==="content-box"?d.contentBoxSize:d.devicePixelContentBoxSize;if(i&&r()){const h=kn(n);if(h){const f=i.getComputedStyle(h);a(Number.parseFloat(f.width)),c(Number.parseFloat(f.height))}}else if(u){const h=Array.isArray(u)?u:[u];a(h.reduce((f,{inlineSize:g})=>f+Number(g),0)),c(h.reduce((f,{blockSize:g})=>f+Number(g),0))}else a(d.contentRect.width),c(d.contentRect.height)},t),Fi(go(rb(n),d=>{a(d?e.width:0),c(d?e.height:0)},{defer:!0})),{width:o,height:l}}function The(n,e,t={}){const{root:i,rootMargin:s="0px",threshold:r=.1,window:o=ja,immediate:a=!0}=t,l=zk(()=>o&&"IntersectionObserver"in o),c=J(()=>{const m=kn(n);return(Array.isArray(m)?m:[m]).map(kn).filter(che)});let d=Wa;const[u,h]=he(a),f=l()?$e(()=>[c(),kn(i),u],([m,p,b])=>{if(d(),!b||!m.length)return;const w=new IntersectionObserver(e,{root:kn(p),rootMargin:s,threshold:r});m.forEach(v=>v&&w.observe(v)),d=()=>{w.disconnect(),d=Wa}},{defer:!a}):Wa,g=()=>{d(),f(),h(!1)};return e0(g),{isSupported:l,isActive:u,pause(){d(),h(!1)},resume(){h(!0)},stop:g}}const PZ=1;function t0(n,e={}){const{throttle:t=0,idle:i=200,onStop:s=Wa,onScroll:r=Wa,offset:o={left:0,right:0,top:0,bottom:0},eventListenerOptions:a={capture:!1,passive:!0},behavior:l="auto",window:c=ja}=e,[d,u]=he(0),[h,f]=he(0),[g,m]=AZ({get(){return d()},set(D){w(D,void 0)}}),[p,b]=AZ({get(){return h()},set(D){w(void 0,D)}});function w(D,M){var E;if(!c)return;const W=kn(n);W&&((E=W instanceof Document?c.document.body:W)==null||E.scrollTo({top:kn(M)??p(),left:kn(D)??g(),behavior:kn(l)}))}const[v,_]=he(!1),y=mC({left:!0,right:!1,top:!0,bottom:!1}),C=mC({left:!1,right:!1,top:!1,bottom:!1}),S=D=>{v()&&(_(!1),C.left=!1,C.right=!1,C.top=!1,C.bottom=!1,s(D))},k=Z$(S,t+i),I=D=>{if(!c)return;const M=D===c?D.document.documentElement:D===c.document?D.documentElement:D,{display:E,flexDirection:W}=getComputedStyle(M),P=M.scrollLeft;C.left=P<d(),C.right=P>d();const N=Math.abs(P)<=0+(o.left??0),H=Math.abs(P)+M.clientWidth>=M.scrollWidth-(o.right??0)-PZ;E==="flex"&&W==="row-reverse"?(y.left=H,y.right=N):(y.left=N,y.right=H),u(P);let U=M.scrollTop;D===c.document&&!U&&(U=c.document.body.scrollTop),C.top=U<h(),C.bottom=U>h();const B=Math.abs(U)<=0+(o.top??0),Y=Math.abs(U)+M.clientHeight>=M.scrollHeight-(o.bottom??0)-PZ;E==="flex"&&W==="column-reverse"?(y.top=Y,y.bottom=B):(y.top=B,y.bottom=Y),f(U)},T=D=>{if(!c)return;const M=D.target===c.document?D.target.documentElement:D.target;I(M),_(!0),k(D),r(D)};return oa(n,"scroll",t?G$(T,t,!0,!1):T,a),oa(n,"scrollend",S,a),{x:g,setX:m,y:p,setY:b,isScrolling:v,arrivedState:y,directions:C,measure(){const D=kn(n);c&&D&&I(D)}}}const Dhe={page:n=>[n.pageX,n.pageY],client:n=>[n.clientX,n.clientY],screen:n=>[n.screenX,n.screenY],movement:n=>n instanceof Touch?null:[n.movementX,n.movementY]};function Ihe(n={}){const{type:e="page",touch:t=!0,resetOnTouchEnds:i=!1,initialValue:s={x:0,y:0},window:r=ja,target:o=r,eventFilter:a}=n,[l,c]=he(s.x),[d,u]=he(s.y),[h,f]=he(null),g=typeof e=="function"?e:Dhe[e],m=_=>{const y=g(_);if(y){const[C,S]=y;c(C),u(S),f("mouse")}},p=_=>{if(_.touches.length>0){const y=g(_.touches[0]);if(y){const[C,S]=y;c(C),u(S),f("touch")}}},b=()=>{c(s.x),u(s.y)},w=a?_=>a(()=>m(_),{}):_=>m(_),v=a?_=>a(()=>p(_),{}):_=>p(_);if(o){const _={passive:!0};oa(o,["mousemove","dragover"],w,_),t&&e!=="movement"&&(oa(o,["touchstart","touchmove"],v,_),i&&oa(o,"touchend",b,_))}return{x:l,y:d,setX:c,setY:u,sourceType:h}}function Rf(n,e={}){const{handleOutside:t=!0,window:i=ja}=e,{x:s,y:r,sourceType:o}=Ihe(e),a=lhe(n??i?.document.body),[l,c]=he(0),[d,u]=he(0),[h,f]=he(0),[g,m]=he(0),[p,b]=he(0),[w,v]=he(0),[_,y]=he(!0);let C=()=>{};return i&&(C=$e([a,s,r],()=>{const S=a();if(!S)return;const{left:k,top:I,width:T,height:D}=S.getBoundingClientRect();f(k+i.pageXOffset),m(I+i.pageYOffset),b(D),v(T);const M=s()-h(),E=r()-g();y(T===0||D===0||M<=0||E<=0||M>T||E>D),(t||!_())&&(c(M),u(E))}),oa(document,"mouseleave",()=>{y(!0)})),{x:s,y:r,sourceType:o,elementX:l,elementY:d,elementPositionX:h,elementPositionY:g,elementHeight:p,elementWidth:w,isOutside:_,stop:C}}function Mhe(n=null,e={}){var t;const{document:i=Che}=e,s=P$(n??i?.title??null),r=!!(n&&qb(n));function o(a){if(!("titleTemplate"in e))return a;const l=e.titleTemplate??"%s";return typeof l=="function"?l(a):kn(l).replace(/%s/g,a)}return Fi(go(s[0],(a,l)=>{a!==l&&i&&(i.title=o(typeof a=="string"?a:""))})),e.observe&&!e.titleTemplate&&i&&!r&&X$((t=i.head)==null?void 0:t.querySelector("title"),()=>{i&&i.title!==s[0]()&&s[1](o(i.title))},{childList:!0}),r?s[0]:s}function Hk(n,e){const{containerStyle:t,wrapperProps:i,scrollTo:s,calculateRange:r,currentList:o,setContainerRef:a}="itemHeight"in e?Rhe(e,n):Nhe(e,n);return{list:o,scrollTo:s,containerProps:{ref:l=>a(l),onScroll:()=>{r()},style:t},wrapperProps:i}}function z$(n){const[e,t]=he(null),i=xhe(e),[s,r]=he([]),[o,a]=P$(n),[l,c]=he({start:0,end:10});return{state:l,setState:c,currentList:s,setCurrentList:r,source:o,setSource:a,setContainerRef:t,containerRef:e,size:i}}function H$(n,e,t){return i=>{if(typeof t=="number")return Math.ceil(i/t);const{start:s=0}=n();let r=0,o=0;for(let a=s;a<e().length;a++){const l=t(a);if(r+=l,o=a,r>i){o=a;break}}return o-s}}function U$(n,e){return t=>{if(typeof e=="number")return Math.floor(t/e)+1;let i=0,s=0;for(let r=0;r<n().length;r++){const o=e(r);if(i+=o,i>=t){s=r;break}}return s+1}}function Y$(n,e,t,i,{containerRef:s,state:r,setState:o,source:a,setCurrentList:l}){return()=>{const c=s();if(c){const d=t(n==="vertical"?c.scrollTop:c.scrollLeft),u=i(n==="vertical"?c.clientHeight:c.clientWidth),h=d-e,f=d+u+e;o({start:h<0?0:h,end:f>a().length?a().length:f}),l(a().slice(r().start,r().end).map((g,m)=>({data:g,index:m+r().start})))}}}function K$(n,e){return t=>typeof n=="number"?t*n:e().slice(0,t).reduce((s,r,o)=>s+n(o),0)}function j$(n,e,t){$e([n.width,n.height,rb(e)],()=>{t()},{defer:!0})}function J$(n,e){return J(()=>typeof n=="number"?e().length*n:e().reduce((t,i,s)=>t+n(s),0))}const Ehe={horizontal:"scrollLeft",vertical:"scrollTop"};function $$(n,e,t,i){return s=>{const r=i();r&&(r[Ehe[n]]=t(s),e())}}function Nhe(n,e){const t=z$(e),{state:i,source:s,currentList:r,size:o,containerRef:a,setContainerRef:l}=t,c={"overflow-x":"auto"},{itemWidth:d,overscan:u=5}=n,h=H$(i,s,d),f=U$(s,d),g=Y$("horizontal",u,f,h,t),m=K$(d,s),p=J(()=>m(i().start)),b=J$(d,s);j$(o,e,g);const w=$$("horizontal",g,m,a),v=J(()=>({style:{height:"100%",width:`${b()-p()}px`,"margin-left":`${p()}px`,display:"flex"}}));return{scrollTo:w,calculateRange:g,wrapperProps:v,containerStyle:c,setContainerRef:l,currentList:r,containerRef:a}}function Rhe(n,e){const t=z$(e),{state:i,source:s,currentList:r,size:o,containerRef:a,setContainerRef:l}=t,c={"overflow-y":"auto"},{itemHeight:d,overscan:u=5}=n,h=H$(i,s,d),f=U$(s,d),g=Y$("vertical",u,f,h,t),m=K$(d,s),p=J(()=>m(i().start)),b=J$(d,s);j$(o,e,g);const w=$$("vertical",g,m,a),v=J(()=>({style:{width:"100%",height:`${b()-p()}px`,"margin-top":`${p()}px`}}));return{calculateRange:g,scrollTo:w,containerStyle:c,wrapperProps:v,currentList:r,containerRef:a,setContainerRef:l}}function Uk(n={}){const{window:e=ja,initialWidth:t=Number.POSITIVE_INFINITY,initialHeight:i=Number.POSITIVE_INFINITY,listenOrientation:s=!0,includeScrollbar:r=!0}=n,[o,a]=he(t),[l,c]=he(i),d=()=>{e&&(r?(a(e.innerWidth),c(e.innerHeight)):(a(e.document.documentElement.clientWidth),c(e.document.documentElement.clientHeight)))};if(d(),whe(d),oa("resize",d,{passive:!0}),s){const u=khe("(orientation: portrait)");Fi(go(u,()=>{d()}))}return{width:o,height:l}}var Eo="top",Xa="bottom",za="right",No="left",l4="auto",X1=[Eo,Xa,za,No],ob="start",T_="end",Whe="clippingParents",Q$="viewport",V0="popper",Ahe="reference",OZ=X1.reduce(function(n,e){return n.concat([e+"-"+ob,e+"-"+T_])},[]),q$=[].concat(X1,[l4]).reduce(function(n,e){return n.concat([e,e+"-"+ob,e+"-"+T_])},[]),Fhe="beforeRead",Vhe="read",Phe="afterRead",Ohe="beforeMain",Zhe="main",Ghe="afterMain",Bhe="beforeWrite",Xhe="write",zhe="afterWrite",Hhe=[Fhe,Vhe,Phe,Ohe,Zhe,Ghe,Bhe,Xhe,zhe];function Rc(n){return n?(n.nodeName||"").toLowerCase():null}function da(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function _g(n){var e=da(n).Element;return n instanceof e||n instanceof Element}function Aa(n){var e=da(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function c4(n){if(typeof ShadowRoot>"u")return!1;var e=da(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function Uhe(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var i=e.styles[t]||{},s=e.attributes[t]||{},r=e.elements[t];!Aa(r)||!Rc(r)||(Object.assign(r.style,i),Object.keys(s).forEach(function(o){var a=s[o];a===!1?r.removeAttribute(o):r.setAttribute(o,a===!0?"":a)}))})}function Yhe(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(i){var s=e.elements[i],r=e.attributes[i]||{},o=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:t[i]),a=o.reduce(function(l,c){return l[c]="",l},{});!Aa(s)||!Rc(s)||(Object.assign(s.style,a),Object.keys(r).forEach(function(l){s.removeAttribute(l)}))})}}const eQ={name:"applyStyles",enabled:!0,phase:"write",fn:Uhe,effect:Yhe,requires:["computeStyles"]};function kc(n){return n.split("-")[0]}var ng=Math.max,xC=Math.min,ab=Math.round;function b9(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function tQ(){return!/^((?!chrome|android).)*safari/i.test(b9())}function lb(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var i=n.getBoundingClientRect(),s=1,r=1;e&&Aa(n)&&(s=n.offsetWidth>0&&ab(i.width)/n.offsetWidth||1,r=n.offsetHeight>0&&ab(i.height)/n.offsetHeight||1);var o=_g(n)?da(n):window,a=o.visualViewport,l=!tQ()&&t,c=(i.left+(l&&a?a.offsetLeft:0))/s,d=(i.top+(l&&a?a.offsetTop:0))/r,u=i.width/s,h=i.height/r;return{width:u,height:h,top:d,right:c+u,bottom:d+h,left:c,x:c,y:d}}function d4(n){var e=lb(n),t=n.offsetWidth,i=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:i}}function iQ(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&c4(t)){var i=e;do{if(i&&n.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Kd(n){return da(n).getComputedStyle(n)}function Khe(n){return["table","td","th"].indexOf(Rc(n))>=0}function Jh(n){return((_g(n)?n.ownerDocument:n.document)||window.document).documentElement}function Yk(n){return Rc(n)==="html"?n:n.assignedSlot||n.parentNode||(c4(n)?n.host:null)||Jh(n)}function ZZ(n){return!Aa(n)||Kd(n).position==="fixed"?null:n.offsetParent}function jhe(n){var e=/firefox/i.test(b9()),t=/Trident/i.test(b9());if(t&&Aa(n)){var i=Kd(n);if(i.position==="fixed")return null}var s=Yk(n);for(c4(s)&&(s=s.host);Aa(s)&&["html","body"].indexOf(Rc(s))<0;){var r=Kd(s);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||e&&r.willChange==="filter"||e&&r.filter&&r.filter!=="none")return s;s=s.parentNode}return null}function z1(n){for(var e=da(n),t=ZZ(n);t&&Khe(t)&&Kd(t).position==="static";)t=ZZ(t);return t&&(Rc(t)==="html"||Rc(t)==="body"&&Kd(t).position==="static")?e:t||jhe(n)||e}function u4(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function Uv(n,e,t){return ng(n,xC(e,t))}function Jhe(n,e,t){var i=Uv(n,e,t);return i>t?t:i}function nQ(){return{top:0,right:0,bottom:0,left:0}}function sQ(n){return Object.assign({},nQ(),n)}function rQ(n,e){return e.reduce(function(t,i){return t[i]=n,t},{})}var $he=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,sQ(typeof e!="number"?e:rQ(e,X1))};function Qhe(n){var e,t=n.state,i=n.name,s=n.options,r=t.elements.arrow,o=t.modifiersData.popperOffsets,a=kc(t.placement),l=u4(a),c=[No,za].indexOf(a)>=0,d=c?"height":"width";if(!(!r||!o)){var u=$he(s.padding,t),h=d4(r),f=l==="y"?Eo:No,g=l==="y"?Xa:za,m=t.rects.reference[d]+t.rects.reference[l]-o[l]-t.rects.popper[d],p=o[l]-t.rects.reference[l],b=z1(r),w=b?l==="y"?b.clientHeight||0:b.clientWidth||0:0,v=m/2-p/2,_=u[f],y=w-h[d]-u[g],C=w/2-h[d]/2+v,S=Uv(_,C,y),k=l;t.modifiersData[i]=(e={},e[k]=S,e.centerOffset=S-C,e)}}function qhe(n){var e=n.state,t=n.options,i=t.element,s=i===void 0?"[data-popper-arrow]":i;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||iQ(e.elements.popper,s)&&(e.elements.arrow=s))}const efe={name:"arrow",enabled:!0,phase:"main",fn:Qhe,effect:qhe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function cb(n){return n.split("-")[1]}var tfe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ife(n,e){var t=n.x,i=n.y,s=e.devicePixelRatio||1;return{x:ab(t*s)/s||0,y:ab(i*s)/s||0}}function GZ(n){var e,t=n.popper,i=n.popperRect,s=n.placement,r=n.variation,o=n.offsets,a=n.position,l=n.gpuAcceleration,c=n.adaptive,d=n.roundOffsets,u=n.isFixed,h=o.x,f=h===void 0?0:h,g=o.y,m=g===void 0?0:g,p=typeof d=="function"?d({x:f,y:m}):{x:f,y:m};f=p.x,m=p.y;var b=o.hasOwnProperty("x"),w=o.hasOwnProperty("y"),v=No,_=Eo,y=window;if(c){var C=z1(t),S="clientHeight",k="clientWidth";if(C===da(t)&&(C=Jh(t),Kd(C).position!=="static"&&a==="absolute"&&(S="scrollHeight",k="scrollWidth")),C=C,s===Eo||(s===No||s===za)&&r===T_){_=Xa;var I=u&&C===y&&y.visualViewport?y.visualViewport.height:C[S];m-=I-i.height,m*=l?1:-1}if(s===No||(s===Eo||s===Xa)&&r===T_){v=za;var T=u&&C===y&&y.visualViewport?y.visualViewport.width:C[k];f-=T-i.width,f*=l?1:-1}}var D=Object.assign({position:a},c&&tfe),M=d===!0?ife({x:f,y:m},da(t)):{x:f,y:m};if(f=M.x,m=M.y,l){var E;return Object.assign({},D,(E={},E[_]=w?"0":"",E[v]=b?"0":"",E.transform=(y.devicePixelRatio||1)<=1?"translate("+f+"px, "+m+"px)":"translate3d("+f+"px, "+m+"px, 0)",E))}return Object.assign({},D,(e={},e[_]=w?m+"px":"",e[v]=b?f+"px":"",e.transform="",e))}function nfe(n){var e=n.state,t=n.options,i=t.gpuAcceleration,s=i===void 0?!0:i,r=t.adaptive,o=r===void 0?!0:r,a=t.roundOffsets,l=a===void 0?!0:a,c={placement:kc(e.placement),variation:cb(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,GZ(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,GZ(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const sfe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:nfe,data:{}};var Uw={passive:!0};function rfe(n){var e=n.state,t=n.instance,i=n.options,s=i.scroll,r=s===void 0?!0:s,o=i.resize,a=o===void 0?!0:o,l=da(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return r&&c.forEach(function(d){d.addEventListener("scroll",t.update,Uw)}),a&&l.addEventListener("resize",t.update,Uw),function(){r&&c.forEach(function(d){d.removeEventListener("scroll",t.update,Uw)}),a&&l.removeEventListener("resize",t.update,Uw)}}const ofe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:rfe,data:{}};var afe={left:"right",right:"left",bottom:"top",top:"bottom"};function LS(n){return n.replace(/left|right|bottom|top/g,function(e){return afe[e]})}var lfe={start:"end",end:"start"};function BZ(n){return n.replace(/start|end/g,function(e){return lfe[e]})}function h4(n){var e=da(n),t=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:t,scrollTop:i}}function f4(n){return lb(Jh(n)).left+h4(n).scrollLeft}function cfe(n,e){var t=da(n),i=Jh(n),s=t.visualViewport,r=i.clientWidth,o=i.clientHeight,a=0,l=0;if(s){r=s.width,o=s.height;var c=tQ();(c||!c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:r,height:o,x:a+f4(n),y:l}}function dfe(n){var e,t=Jh(n),i=h4(n),s=(e=n.ownerDocument)==null?void 0:e.body,r=ng(t.scrollWidth,t.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=ng(t.scrollHeight,t.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-i.scrollLeft+f4(n),l=-i.scrollTop;return Kd(s||t).direction==="rtl"&&(a+=ng(t.clientWidth,s?s.clientWidth:0)-r),{width:r,height:o,x:a,y:l}}function g4(n){var e=Kd(n),t=e.overflow,i=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+s+i)}function oQ(n){return["html","body","#document"].indexOf(Rc(n))>=0?n.ownerDocument.body:Aa(n)&&g4(n)?n:oQ(Yk(n))}function Yv(n,e){var t;e===void 0&&(e=[]);var i=oQ(n),s=i===((t=n.ownerDocument)==null?void 0:t.body),r=da(i),o=s?[r].concat(r.visualViewport||[],g4(i)?i:[]):i,a=e.concat(o);return s?a:a.concat(Yv(Yk(o)))}function v9(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function ufe(n,e){var t=lb(n,!1,e==="fixed");return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}function XZ(n,e,t){return e===Q$?v9(cfe(n,t)):_g(e)?ufe(e,t):v9(dfe(Jh(n)))}function hfe(n){var e=Yv(Yk(n)),t=["absolute","fixed"].indexOf(Kd(n).position)>=0,i=t&&Aa(n)?z1(n):n;return _g(i)?e.filter(function(s){return _g(s)&&iQ(s,i)&&Rc(s)!=="body"}):[]}function ffe(n,e,t,i){var s=e==="clippingParents"?hfe(n):[].concat(e),r=[].concat(s,[t]),o=r[0],a=r.reduce(function(l,c){var d=XZ(n,c,i);return l.top=ng(d.top,l.top),l.right=xC(d.right,l.right),l.bottom=xC(d.bottom,l.bottom),l.left=ng(d.left,l.left),l},XZ(n,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function aQ(n){var e=n.reference,t=n.element,i=n.placement,s=i?kc(i):null,r=i?cb(i):null,o=e.x+e.width/2-t.width/2,a=e.y+e.height/2-t.height/2,l;switch(s){case Eo:l={x:o,y:e.y-t.height};break;case Xa:l={x:o,y:e.y+e.height};break;case za:l={x:e.x+e.width,y:a};break;case No:l={x:e.x-t.width,y:a};break;default:l={x:e.x,y:e.y}}var c=s?u4(s):null;if(c!=null){var d=c==="y"?"height":"width";switch(r){case ob:l[c]=l[c]-(e[d]/2-t[d]/2);break;case T_:l[c]=l[c]+(e[d]/2-t[d]/2);break}}return l}function D_(n,e){e===void 0&&(e={});var t=e,i=t.placement,s=i===void 0?n.placement:i,r=t.strategy,o=r===void 0?n.strategy:r,a=t.boundary,l=a===void 0?Whe:a,c=t.rootBoundary,d=c===void 0?Q$:c,u=t.elementContext,h=u===void 0?V0:u,f=t.altBoundary,g=f===void 0?!1:f,m=t.padding,p=m===void 0?0:m,b=sQ(typeof p!="number"?p:rQ(p,X1)),w=h===V0?Ahe:V0,v=n.rects.popper,_=n.elements[g?w:h],y=ffe(_g(_)?_:_.contextElement||Jh(n.elements.popper),l,d,o),C=lb(n.elements.reference),S=aQ({reference:C,element:v,strategy:"absolute",placement:s}),k=v9(Object.assign({},v,S)),I=h===V0?k:C,T={top:y.top-I.top+b.top,bottom:I.bottom-y.bottom+b.bottom,left:y.left-I.left+b.left,right:I.right-y.right+b.right},D=n.modifiersData.offset;if(h===V0&&D){var M=D[s];Object.keys(T).forEach(function(E){var W=[za,Xa].indexOf(E)>=0?1:-1,P=[Eo,Xa].indexOf(E)>=0?"y":"x";T[E]+=M[P]*W})}return T}function gfe(n,e){e===void 0&&(e={});var t=e,i=t.placement,s=t.boundary,r=t.rootBoundary,o=t.padding,a=t.flipVariations,l=t.allowedAutoPlacements,c=l===void 0?q$:l,d=cb(i),u=d?a?OZ:OZ.filter(function(g){return cb(g)===d}):X1,h=u.filter(function(g){return c.indexOf(g)>=0});h.length===0&&(h=u);var f=h.reduce(function(g,m){return g[m]=D_(n,{placement:m,boundary:s,rootBoundary:r,padding:o})[kc(m)],g},{});return Object.keys(f).sort(function(g,m){return f[g]-f[m]})}function mfe(n){if(kc(n)===l4)return[];var e=LS(n);return[BZ(n),e,BZ(e)]}function pfe(n){var e=n.state,t=n.options,i=n.name;if(!e.modifiersData[i]._skip){for(var s=t.mainAxis,r=s===void 0?!0:s,o=t.altAxis,a=o===void 0?!0:o,l=t.fallbackPlacements,c=t.padding,d=t.boundary,u=t.rootBoundary,h=t.altBoundary,f=t.flipVariations,g=f===void 0?!0:f,m=t.allowedAutoPlacements,p=e.options.placement,b=kc(p),w=b===p,v=l||(w||!g?[LS(p)]:mfe(p)),_=[p].concat(v).reduce(function(ge,Ie){return ge.concat(kc(Ie)===l4?gfe(e,{placement:Ie,boundary:d,rootBoundary:u,padding:c,flipVariations:g,allowedAutoPlacements:m}):Ie)},[]),y=e.rects.reference,C=e.rects.popper,S=new Map,k=!0,I=_[0],T=0;T<_.length;T++){var D=_[T],M=kc(D),E=cb(D)===ob,W=[Eo,Xa].indexOf(M)>=0,P=W?"width":"height",N=D_(e,{placement:D,boundary:d,rootBoundary:u,altBoundary:h,padding:c}),H=W?E?za:No:E?Xa:Eo;y[P]>C[P]&&(H=LS(H));var U=LS(H),B=[];if(r&&B.push(N[M]<=0),a&&B.push(N[H]<=0,N[U]<=0),B.every(function(ge){return ge})){I=D,k=!1;break}S.set(D,B)}if(k)for(var Y=g?3:1,ne=function(Ie){var xe=_.find(function(z){var K=S.get(z);if(K)return K.slice(0,Ie).every(function(Se){return Se})});if(xe)return I=xe,"break"},ee=Y;ee>0;ee--){var $=ne(ee);if($==="break")break}e.placement!==I&&(e.modifiersData[i]._skip=!0,e.placement=I,e.reset=!0)}}const bfe={name:"flip",enabled:!0,phase:"main",fn:pfe,requiresIfExists:["offset"],data:{_skip:!1}};function zZ(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function HZ(n){return[Eo,za,Xa,No].some(function(e){return n[e]>=0})}function vfe(n){var e=n.state,t=n.name,i=e.rects.reference,s=e.rects.popper,r=e.modifiersData.preventOverflow,o=D_(e,{elementContext:"reference"}),a=D_(e,{altBoundary:!0}),l=zZ(o,i),c=zZ(a,s,r),d=HZ(l),u=HZ(c);e.modifiersData[t]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:u},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":u})}const _fe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:vfe};function wfe(n,e,t){var i=kc(n),s=[No,Eo].indexOf(i)>=0?-1:1,r=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,o=r[0],a=r[1];return o=o||0,a=(a||0)*s,[No,za].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function yfe(n){var e=n.state,t=n.options,i=n.name,s=t.offset,r=s===void 0?[0,0]:s,o=q$.reduce(function(d,u){return d[u]=wfe(u,e.rects,r),d},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[i]=o}const Sfe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:yfe};function Cfe(n){var e=n.state,t=n.name;e.modifiersData[t]=aQ({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const Lfe={name:"popperOffsets",enabled:!0,phase:"read",fn:Cfe,data:{}};function kfe(n){return n==="x"?"y":"x"}function xfe(n){var e=n.state,t=n.options,i=n.name,s=t.mainAxis,r=s===void 0?!0:s,o=t.altAxis,a=o===void 0?!1:o,l=t.boundary,c=t.rootBoundary,d=t.altBoundary,u=t.padding,h=t.tether,f=h===void 0?!0:h,g=t.tetherOffset,m=g===void 0?0:g,p=D_(e,{boundary:l,rootBoundary:c,padding:u,altBoundary:d}),b=kc(e.placement),w=cb(e.placement),v=!w,_=u4(b),y=kfe(_),C=e.modifiersData.popperOffsets,S=e.rects.reference,k=e.rects.popper,I=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,T=typeof I=="number"?{mainAxis:I,altAxis:I}:Object.assign({mainAxis:0,altAxis:0},I),D=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,M={x:0,y:0};if(C){if(r){var E,W=_==="y"?Eo:No,P=_==="y"?Xa:za,N=_==="y"?"height":"width",H=C[_],U=H+p[W],B=H-p[P],Y=f?-k[N]/2:0,ne=w===ob?S[N]:k[N],ee=w===ob?-k[N]:-S[N],$=e.elements.arrow,ge=f&&$?d4($):{width:0,height:0},Ie=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:nQ(),xe=Ie[W],z=Ie[P],K=Uv(0,S[N],ge[N]),Se=v?S[N]/2-Y-K-xe-T.mainAxis:ne-K-xe-T.mainAxis,De=v?-S[N]/2+Y+K+z+T.mainAxis:ee+K+z+T.mainAxis,ke=e.elements.arrow&&z1(e.elements.arrow),je=ke?_==="y"?ke.clientTop||0:ke.clientLeft||0:0,et=(E=D?.[_])!=null?E:0,mt=H+Se-et-je,ze=H+De-et,ht=Uv(f?xC(U,mt):U,H,f?ng(B,ze):B);C[_]=ht,M[_]=ht-H}if(a){var nt,zt=_==="x"?Eo:No,Fe=_==="x"?Xa:za,re=C[y],ie=y==="y"?"height":"width",de=re+p[zt],Z=re-p[Fe],O=[Eo,No].indexOf(b)!==-1,q=(nt=D?.[y])!=null?nt:0,Q=O?de:re-S[ie]-k[ie]-q+T.altAxis,ce=O?re+S[ie]+k[ie]-q-T.altAxis:Z,be=f&&O?Jhe(Q,re,ce):Uv(f?Q:de,re,f?ce:Z);C[y]=be,M[y]=be-re}e.modifiersData[i]=M}}const Tfe={name:"preventOverflow",enabled:!0,phase:"main",fn:xfe,requiresIfExists:["offset"]};function Dfe(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function Ife(n){return n===da(n)||!Aa(n)?h4(n):Dfe(n)}function Mfe(n){var e=n.getBoundingClientRect(),t=ab(e.width)/n.offsetWidth||1,i=ab(e.height)/n.offsetHeight||1;return t!==1||i!==1}function Efe(n,e,t){t===void 0&&(t=!1);var i=Aa(e),s=Aa(e)&&Mfe(e),r=Jh(e),o=lb(n,s,t),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!t)&&((Rc(e)!=="body"||g4(r))&&(a=Ife(e)),Aa(e)?(l=lb(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):r&&(l.x=f4(r))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function Nfe(n){var e=new Map,t=new Set,i=[];n.forEach(function(r){e.set(r.name,r)});function s(r){t.add(r.name);var o=[].concat(r.requires||[],r.requiresIfExists||[]);o.forEach(function(a){if(!t.has(a)){var l=e.get(a);l&&s(l)}}),i.push(r)}return n.forEach(function(r){t.has(r.name)||s(r)}),i}function Rfe(n){var e=Nfe(n);return Hhe.reduce(function(t,i){return t.concat(e.filter(function(s){return s.phase===i}))},[])}function Wfe(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function Afe(n){var e=n.reduce(function(t,i){var s=t[i.name];return t[i.name]=s?Object.assign({},s,i,{options:Object.assign({},s.options,i.options),data:Object.assign({},s.data,i.data)}):i,t},{});return Object.keys(e).map(function(t){return e[t]})}var UZ={placement:"bottom",modifiers:[],strategy:"absolute"};function YZ(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function Ffe(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,i=t===void 0?[]:t,s=e.defaultOptions,r=s===void 0?UZ:s;return function(a,l,c){c===void 0&&(c=r);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},UZ,r),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},u=[],h=!1,f={state:d,setOptions:function(b){var w=typeof b=="function"?b(d.options):b;m(),d.options=Object.assign({},r,d.options,w),d.scrollParents={reference:_g(a)?Yv(a):a.contextElement?Yv(a.contextElement):[],popper:Yv(l)};var v=Rfe(Afe([].concat(i,d.options.modifiers)));return d.orderedModifiers=v.filter(function(_){return _.enabled}),g(),f.update()},forceUpdate:function(){if(!h){var b=d.elements,w=b.reference,v=b.popper;if(YZ(w,v)){d.rects={reference:Efe(w,z1(v),d.options.strategy==="fixed"),popper:d4(v)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(T){return d.modifiersData[T.name]=Object.assign({},T.data)});for(var _=0;_<d.orderedModifiers.length;_++){if(d.reset===!0){d.reset=!1,_=-1;continue}var y=d.orderedModifiers[_],C=y.fn,S=y.options,k=S===void 0?{}:S,I=y.name;typeof C=="function"&&(d=C({state:d,options:k,name:I,instance:f})||d)}}}},update:Wfe(function(){return new Promise(function(p){f.forceUpdate(),p(d)})}),destroy:function(){m(),h=!0}};if(!YZ(a,l))return f;f.setOptions(c).then(function(p){!h&&c.onFirstUpdate&&c.onFirstUpdate(p)});function g(){d.orderedModifiers.forEach(function(p){var b=p.name,w=p.options,v=w===void 0?{}:w,_=p.effect;if(typeof _=="function"){var y=_({state:d,name:b,instance:f,options:v}),C=function(){};u.push(y||C)}})}function m(){u.forEach(function(p){return p()}),u=[]}return f}}var Vfe=[ofe,Lfe,sfe,eQ,Sfe,bfe,Tfe,efe,_fe],Pfe=Ffe({defaultModifiers:Vfe}),Ofe="tippy-box",lQ="tippy-content",Zfe="tippy-backdrop",cQ="tippy-arrow",dQ="tippy-svg-arrow",Cf={passive:!0,capture:!0},uQ=function(){return document.body};function UT(n,e,t){if(Array.isArray(n)){var i=n[e];return i??(Array.isArray(t)?t[e]:t)}return n}function m4(n,e){var t={}.toString.call(n);return t.indexOf("[object")===0&&t.indexOf(e+"]")>-1}function hQ(n,e){return typeof n=="function"?n.apply(void 0,e):n}function KZ(n,e){if(e===0)return n;var t;return function(i){clearTimeout(t),t=setTimeout(function(){n(i)},e)}}function Gfe(n){return n.split(/\s+/).filter(Boolean)}function zm(n){return[].concat(n)}function jZ(n,e){n.indexOf(e)===-1&&n.push(e)}function Bfe(n){return n.filter(function(e,t){return n.indexOf(e)===t})}function Xfe(n){return n.split("-")[0]}function TC(n){return[].slice.call(n)}function JZ(n){return Object.keys(n).reduce(function(e,t){return n[t]!==void 0&&(e[t]=n[t]),e},{})}function Kv(){return document.createElement("div")}function Kk(n){return["Element","Fragment"].some(function(e){return m4(n,e)})}function zfe(n){return m4(n,"NodeList")}function Hfe(n){return m4(n,"MouseEvent")}function Ufe(n){return!!(n&&n._tippy&&n._tippy.reference===n)}function Yfe(n){return Kk(n)?[n]:zfe(n)?TC(n):Array.isArray(n)?n:TC(document.querySelectorAll(n))}function YT(n,e){n.forEach(function(t){t&&(t.style.transitionDuration=e+"ms")})}function $Z(n,e){n.forEach(function(t){t&&t.setAttribute("data-state",e)})}function Kfe(n){var e,t=zm(n),i=t[0];return i!=null&&(e=i.ownerDocument)!=null&&e.body?i.ownerDocument:document}function jfe(n,e){var t=e.clientX,i=e.clientY;return n.every(function(s){var r=s.popperRect,o=s.popperState,a=s.props,l=a.interactiveBorder,c=Xfe(o.placement),d=o.modifiersData.offset;if(!d)return!0;var u=c==="bottom"?d.top.y:0,h=c==="top"?d.bottom.y:0,f=c==="right"?d.left.x:0,g=c==="left"?d.right.x:0,m=r.top-i+u>l,p=i-r.bottom-h>l,b=r.left-t+f>l,w=t-r.right-g>l;return m||p||b||w})}function KT(n,e,t){var i=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(s){n[i](s,t)})}function QZ(n,e){for(var t=e;t;){var i;if(n.contains(t))return!0;t=t.getRootNode==null||(i=t.getRootNode())==null?void 0:i.host}return!1}var ac={isTouch:!1},qZ=0;function Jfe(){ac.isTouch||(ac.isTouch=!0,window.performance&&document.addEventListener("mousemove",fQ))}function fQ(){var n=performance.now();n-qZ<20&&(ac.isTouch=!1,document.removeEventListener("mousemove",fQ)),qZ=n}function $fe(){var n=document.activeElement;if(Ufe(n)){var e=n._tippy;n.blur&&!e.state.isVisible&&n.blur()}}function Qfe(){document.addEventListener("touchstart",Jfe,Cf),window.addEventListener("blur",$fe)}var qfe=typeof window<"u"&&typeof document<"u",ege=qfe?!!window.msCrypto:!1,tge={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},ige={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},yl=Object.assign({appendTo:uQ,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},tge,ige),nge=Object.keys(yl),sge=function(e){var t=Object.keys(e);t.forEach(function(i){yl[i]=e[i]})};function gQ(n){var e=n.plugins||[],t=e.reduce(function(i,s){var r=s.name,o=s.defaultValue;if(r){var a;i[r]=n[r]!==void 0?n[r]:(a=yl[r])!=null?a:o}return i},{});return Object.assign({},n,t)}function rge(n,e){var t=e?Object.keys(gQ(Object.assign({},yl,{plugins:e}))):nge,i=t.reduce(function(s,r){var o=(n.getAttribute("data-tippy-"+r)||"").trim();if(!o)return s;if(r==="content")s[r]=o;else try{s[r]=JSON.parse(o)}catch{s[r]=o}return s},{});return i}function eG(n,e){var t=Object.assign({},e,{content:hQ(e.content,[n])},e.ignoreAttributes?{}:rge(n,e.plugins));return t.aria=Object.assign({},yl.aria,t.aria),t.aria={expanded:t.aria.expanded==="auto"?e.interactive:t.aria.expanded,content:t.aria.content==="auto"?e.interactive?null:"describedby":t.aria.content},t}var oge=function(){return"innerHTML"};function _9(n,e){n[oge()]=e}function tG(n){var e=Kv();return n===!0?e.className=cQ:(e.className=dQ,Kk(n)?e.appendChild(n):_9(e,n)),e}function iG(n,e){Kk(e.content)?(_9(n,""),n.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?_9(n,e.content):n.textContent=e.content)}function w9(n){var e=n.firstElementChild,t=TC(e.children);return{box:e,content:t.find(function(i){return i.classList.contains(lQ)}),arrow:t.find(function(i){return i.classList.contains(cQ)||i.classList.contains(dQ)}),backdrop:t.find(function(i){return i.classList.contains(Zfe)})}}function mQ(n){var e=Kv(),t=Kv();t.className=Ofe,t.setAttribute("data-state","hidden"),t.setAttribute("tabindex","-1");var i=Kv();i.className=lQ,i.setAttribute("data-state","hidden"),iG(i,n.props),e.appendChild(t),t.appendChild(i),s(n.props,n.props);function s(r,o){var a=w9(e),l=a.box,c=a.content,d=a.arrow;o.theme?l.setAttribute("data-theme",o.theme):l.removeAttribute("data-theme"),typeof o.animation=="string"?l.setAttribute("data-animation",o.animation):l.removeAttribute("data-animation"),o.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof o.maxWidth=="number"?o.maxWidth+"px":o.maxWidth,o.role?l.setAttribute("role",o.role):l.removeAttribute("role"),(r.content!==o.content||r.allowHTML!==o.allowHTML)&&iG(c,n.props),o.arrow?d?r.arrow!==o.arrow&&(l.removeChild(d),l.appendChild(tG(o.arrow))):l.appendChild(tG(o.arrow)):d&&l.removeChild(d)}return{popper:e,onUpdate:s}}mQ.$$tippy=!0;var age=1,Yw=[],jT=[];function lge(n,e){var t=eG(n,Object.assign({},yl,gQ(JZ(e)))),i,s,r,o=!1,a=!1,l=!1,c=!1,d,u,h,f=[],g=KZ(mt,t.interactiveDebounce),m,p=age++,b=null,w=Bfe(t.plugins),v={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},_={id:p,reference:n,popper:Kv(),popperInstance:b,props:t,state:v,plugins:w,clearDelayTimeouts:Q,setProps:ce,setContent:be,show:Ae,hide:Pe,hideWithInteractivity:tt,enable:O,disable:q,unmount:qe,destroy:wt};if(!t.render)return _;var y=t.render(_),C=y.popper,S=y.onUpdate;C.setAttribute("data-tippy-root",""),C.id="tippy-"+_.id,_.popper=C,n._tippy=_,C._tippy=_;var k=w.map(function(me){return me.fn(_)}),I=n.hasAttribute("aria-expanded");return ke(),Y(),H(),U("onCreate",[_]),t.showOnCreate&&de(),C.addEventListener("mouseenter",function(){_.props.interactive&&_.state.isVisible&&_.clearDelayTimeouts()}),C.addEventListener("mouseleave",function(){_.props.interactive&&_.props.trigger.indexOf("mouseenter")>=0&&W().addEventListener("mousemove",g)}),_;function T(){var me=_.props.touch;return Array.isArray(me)?me:[me,0]}function D(){return T()[0]==="hold"}function M(){var me;return!!((me=_.props.render)!=null&&me.$$tippy)}function E(){return m||n}function W(){var me=E().parentNode;return me?Kfe(me):document}function P(){return w9(C)}function N(me){return _.state.isMounted&&!_.state.isVisible||ac.isTouch||d&&d.type==="focus"?0:UT(_.props.delay,me?0:1,yl.delay)}function H(me){me===void 0&&(me=!1),C.style.pointerEvents=_.props.interactive&&!me?"":"none",C.style.zIndex=""+_.props.zIndex}function U(me,fe,Ze){if(Ze===void 0&&(Ze=!0),k.forEach(function(Xe){Xe[me]&&Xe[me].apply(Xe,fe)}),Ze){var Ye;(Ye=_.props)[me].apply(Ye,fe)}}function B(){var me=_.props.aria;if(me.content){var fe="aria-"+me.content,Ze=C.id,Ye=zm(_.props.triggerTarget||n);Ye.forEach(function(Xe){var oe=Xe.getAttribute(fe);if(_.state.isVisible)Xe.setAttribute(fe,oe?oe+" "+Ze:Ze);else{var le=oe&&oe.replace(Ze,"").trim();le?Xe.setAttribute(fe,le):Xe.removeAttribute(fe)}})}}function Y(){if(!(I||!_.props.aria.expanded)){var me=zm(_.props.triggerTarget||n);me.forEach(function(fe){_.props.interactive?fe.setAttribute("aria-expanded",_.state.isVisible&&fe===E()?"true":"false"):fe.removeAttribute("aria-expanded")})}}function ne(){W().removeEventListener("mousemove",g),Yw=Yw.filter(function(me){return me!==g})}function ee(me){if(!(ac.isTouch&&(l||me.type==="mousedown"))){var fe=me.composedPath&&me.composedPath()[0]||me.target;if(!(_.props.interactive&&QZ(C,fe))){if(zm(_.props.triggerTarget||n).some(function(Ze){return QZ(Ze,fe)})){if(ac.isTouch||_.state.isVisible&&_.props.trigger.indexOf("click")>=0)return}else U("onClickOutside",[_,me]);_.props.hideOnClick===!0&&(_.clearDelayTimeouts(),_.hide(),a=!0,setTimeout(function(){a=!1}),_.state.isMounted||xe())}}}function $(){l=!0}function ge(){l=!1}function Ie(){var me=W();me.addEventListener("mousedown",ee,!0),me.addEventListener("touchend",ee,Cf),me.addEventListener("touchstart",ge,Cf),me.addEventListener("touchmove",$,Cf)}function xe(){var me=W();me.removeEventListener("mousedown",ee,!0),me.removeEventListener("touchend",ee,Cf),me.removeEventListener("touchstart",ge,Cf),me.removeEventListener("touchmove",$,Cf)}function z(me,fe){Se(me,function(){!_.state.isVisible&&C.parentNode&&C.parentNode.contains(C)&&fe()})}function K(me,fe){Se(me,fe)}function Se(me,fe){var Ze=P().box;function Ye(Xe){Xe.target===Ze&&(KT(Ze,"remove",Ye),fe())}if(me===0)return fe();KT(Ze,"remove",u),KT(Ze,"add",Ye),u=Ye}function De(me,fe,Ze){Ze===void 0&&(Ze=!1);var Ye=zm(_.props.triggerTarget||n);Ye.forEach(function(Xe){Xe.addEventListener(me,fe,Ze),f.push({node:Xe,eventType:me,handler:fe,options:Ze})})}function ke(){D()&&(De("touchstart",et,{passive:!0}),De("touchend",ze,{passive:!0})),Gfe(_.props.trigger).forEach(function(me){if(me!=="manual")switch(De(me,et),me){case"mouseenter":De("mouseleave",ze);break;case"focus":De(ege?"focusout":"blur",ht);break;case"focusin":De("focusout",ht);break}})}function je(){f.forEach(function(me){var fe=me.node,Ze=me.eventType,Ye=me.handler,Xe=me.options;fe.removeEventListener(Ze,Ye,Xe)}),f=[]}function et(me){var fe,Ze=!1;if(!(!_.state.isEnabled||nt(me)||a)){var Ye=((fe=d)==null?void 0:fe.type)==="focus";d=me,m=me.currentTarget,Y(),!_.state.isVisible&&Hfe(me)&&Yw.forEach(function(Xe){return Xe(me)}),me.type==="click"&&(_.props.trigger.indexOf("mouseenter")<0||o)&&_.props.hideOnClick!==!1&&_.state.isVisible?Ze=!0:de(me),me.type==="click"&&(o=!Ze),Ze&&!Ye&&Z(me)}}function mt(me){var fe=me.target,Ze=E().contains(fe)||C.contains(fe);if(!(me.type==="mousemove"&&Ze)){var Ye=ie().concat(C).map(function(Xe){var oe,le=Xe._tippy,Ve=(oe=le.popperInstance)==null?void 0:oe.state;return Ve?{popperRect:Xe.getBoundingClientRect(),popperState:Ve,props:t}:null}).filter(Boolean);jfe(Ye,me)&&(ne(),Z(me))}}function ze(me){var fe=nt(me)||_.props.trigger.indexOf("click")>=0&&o;if(!fe){if(_.props.interactive){_.hideWithInteractivity(me);return}Z(me)}}function ht(me){_.props.trigger.indexOf("focusin")<0&&me.target!==E()||_.props.interactive&&me.relatedTarget&&C.contains(me.relatedTarget)||Z(me)}function nt(me){return ac.isTouch?D()!==me.type.indexOf("touch")>=0:!1}function zt(){Fe();var me=_.props,fe=me.popperOptions,Ze=me.placement,Ye=me.offset,Xe=me.getReferenceClientRect,oe=me.moveTransition,le=M()?w9(C).arrow:null,Ve=Xe?{getBoundingClientRect:Xe,contextElement:Xe.contextElement||E()}:n,ae={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(He){var lt=He.state;if(M()){var ft=P(),kt=ft.box;["placement","reference-hidden","escaped"].forEach(function(ii){ii==="placement"?kt.setAttribute("data-placement",lt.placement):lt.attributes.popper["data-popper-"+ii]?kt.setAttribute("data-"+ii,""):kt.removeAttribute("data-"+ii)}),lt.attributes.popper={}}}},_e=[{name:"offset",options:{offset:Ye}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!oe}},ae];M()&&le&&_e.push({name:"arrow",options:{element:le,padding:3}}),_e.push.apply(_e,fe?.modifiers||[]),_.popperInstance=Pfe(Ve,C,Object.assign({},fe,{placement:Ze,onFirstUpdate:h,modifiers:_e}))}function Fe(){_.popperInstance&&(_.popperInstance.destroy(),_.popperInstance=null)}function re(){var me=_.props.appendTo,fe,Ze=E();_.props.interactive&&me===uQ||me==="parent"?fe=Ze.parentNode:fe=hQ(me,[Ze]),fe.contains(C)||fe.appendChild(C),_.state.isMounted=!0,zt()}function ie(){return TC(C.querySelectorAll("[data-tippy-root]"))}function de(me){_.clearDelayTimeouts(),me&&U("onTrigger",[_,me]),Ie();var fe=N(!0),Ze=T(),Ye=Ze[0],Xe=Ze[1];ac.isTouch&&Ye==="hold"&&Xe&&(fe=Xe),fe?i=setTimeout(function(){_.show()},fe):_.show()}function Z(me){if(_.clearDelayTimeouts(),U("onUntrigger",[_,me]),!_.state.isVisible){xe();return}if(!(_.props.trigger.indexOf("mouseenter")>=0&&_.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(me.type)>=0&&o)){var fe=N(!1);fe?s=setTimeout(function(){_.state.isVisible&&_.hide()},fe):r=requestAnimationFrame(function(){_.hide()})}}function O(){_.state.isEnabled=!0}function q(){_.hide(),_.state.isEnabled=!1}function Q(){clearTimeout(i),clearTimeout(s),cancelAnimationFrame(r)}function ce(me){if(!_.state.isDestroyed){U("onBeforeUpdate",[_,me]),je();var fe=_.props,Ze=eG(n,Object.assign({},fe,JZ(me),{ignoreAttributes:!0}));_.props=Ze,ke(),fe.interactiveDebounce!==Ze.interactiveDebounce&&(ne(),g=KZ(mt,Ze.interactiveDebounce)),fe.triggerTarget&&!Ze.triggerTarget?zm(fe.triggerTarget).forEach(function(Ye){Ye.removeAttribute("aria-expanded")}):Ze.triggerTarget&&n.removeAttribute("aria-expanded"),Y(),H(),S&&S(fe,Ze),_.popperInstance&&(zt(),ie().forEach(function(Ye){requestAnimationFrame(Ye._tippy.popperInstance.forceUpdate)})),U("onAfterUpdate",[_,me])}}function be(me){_.setProps({content:me})}function Ae(){var me=_.state.isVisible,fe=_.state.isDestroyed,Ze=!_.state.isEnabled,Ye=ac.isTouch&&!_.props.touch,Xe=UT(_.props.duration,0,yl.duration);if(!(me||fe||Ze||Ye)&&!E().hasAttribute("disabled")&&(U("onShow",[_],!1),_.props.onShow(_)!==!1)){if(_.state.isVisible=!0,M()&&(C.style.visibility="visible"),H(),Ie(),_.state.isMounted||(C.style.transition="none"),M()){var oe=P(),le=oe.box,Ve=oe.content;YT([le,Ve],0)}h=function(){var _e;if(!(!_.state.isVisible||c)){if(c=!0,C.offsetHeight,C.style.transition=_.props.moveTransition,M()&&_.props.animation){var Oe=P(),He=Oe.box,lt=Oe.content;YT([He,lt],Xe),$Z([He,lt],"visible")}B(),Y(),jZ(jT,_),(_e=_.popperInstance)==null||_e.forceUpdate(),U("onMount",[_]),_.props.animation&&M()&&K(Xe,function(){_.state.isShown=!0,U("onShown",[_])})}},re()}}function Pe(){var me=!_.state.isVisible,fe=_.state.isDestroyed,Ze=!_.state.isEnabled,Ye=UT(_.props.duration,1,yl.duration);if(!(me||fe||Ze)&&(U("onHide",[_],!1),_.props.onHide(_)!==!1)){if(_.state.isVisible=!1,_.state.isShown=!1,c=!1,o=!1,M()&&(C.style.visibility="hidden"),ne(),xe(),H(!0),M()){var Xe=P(),oe=Xe.box,le=Xe.content;_.props.animation&&(YT([oe,le],Ye),$Z([oe,le],"hidden"))}B(),Y(),_.props.animation?M()&&z(Ye,_.unmount):_.unmount()}}function tt(me){W().addEventListener("mousemove",g),jZ(Yw,g),g(me)}function qe(){_.state.isVisible&&_.hide(),_.state.isMounted&&(Fe(),ie().forEach(function(me){me._tippy.unmount()}),C.parentNode&&C.parentNode.removeChild(C),jT=jT.filter(function(me){return me!==_}),_.state.isMounted=!1,U("onHidden",[_]))}function wt(){_.state.isDestroyed||(_.clearDelayTimeouts(),_.unmount(),je(),delete n._tippy,_.state.isDestroyed=!0,U("onDestroy",[_]))}}function i0(n,e){e===void 0&&(e={});var t=yl.plugins.concat(e.plugins||[]);Qfe();var i=Object.assign({},e,{plugins:t}),s=Yfe(n),r=s.reduce(function(o,a){var l=a&&lge(a,i);return l&&o.push(l),o},[]);return Kk(n)?r[0]:r}i0.defaultProps=yl;i0.setDefaultProps=sge;i0.currentInput=ac;Object.assign({},eQ,{effect:function(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow)}});i0.setDefaultProps({render:mQ});var cge=Object.defineProperty,nG=Object.getOwnPropertySymbols,dge=Object.prototype.hasOwnProperty,uge=Object.prototype.propertyIsEnumerable,sG=(n,e,t)=>e in n?cge(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,hge=(n,e)=>{for(var t in e||(e={}))dge.call(e,t)&&sG(n,t,e[t]);if(nG)for(var t of nG(e))uge.call(e,t)&&sG(n,t,e[t]);return n};function fge(n,e){Fi(()=>{let t=e(),i=i0(n,Qn(()=>t?.props));wS(()=>{t!=null&&t.disabled?i.disable():i.enable()}),wS(()=>{t!=null&&t.hidden?i.hide():i.show()}),wS(()=>{var s;i.setProps(hge({},(s=t?.props)!=null?s:{}))}),Ot(()=>{i.destroy()})})}const pQ=1500,gge=150;let P0=pQ,JT;const Lm=new Map;function Te(n,e){fge(n,()=>{const t=e(),i=t?.instanceType||"default",s=t?.defaultDelay??pQ,r=t?.shortDelay??gge;P0=s;const o=t?.content;return o?{hideOnClick:!0,hidden:!0,props:{showOnCreate:!1,onCreate(a){t.onCreate?.(a)},content:typeof o=="string"?o:typeof o=="function"?void 0:()=>Kr(()=>o),onShow:a=>{t.onShow?.(a);const l=()=>{for(const[c,{instanceType:d}]of Lm.entries())c!==a&&d===i&&c.hide()};typeof o=="function"?(l(),Kr(()=>{const{content:c,readyToRender:d}=o(),u=()=>{a.setContent(c);const h=a.popper.querySelector(".tippy-box");h&&(h.style.display=""),a.popperInstance?.update()};d()?setTimeout(u,0):$e(d,h=>{h&&u()})}),Lm.set(a,{instanceType:i})):t.delay===void 0&&Lm.set(a,{displayTimeout:setTimeout(()=>{l();const c=a.popper.querySelector(".tippy-box");c&&(c.style.display=""),a.popperInstance?.update(),P0=r},P0),instanceType:i}),clearTimeout(JT)},onHide:a=>{t.onHide?.(a),clearTimeout(Lm.get(a)?.displayTimeout),Lm.delete(a),Lm.size===0&&(clearTimeout(JT),P0!==s&&(JT=setTimeout(()=>{P0=s},1e3)))},delay:t.delay??[0,null],duration:0,interactive:!0,appendTo:()=>document.body,allowHTML:!0,trigger:t.trigger||"mouseenter",placement:t.placement||"auto-start",offset:t.offset,maxWidth:t.maxWidth,zIndex:t.zIndex,getReferenceClientRect:t.getReferenceClientRect,onMount:a=>{const l=a.popper.querySelector(".tippy-box");l&&(t.class&&l.classList.add(...t.class.split(" ")),(t.delay===void 0||typeof o=="function")&&(l.style.display="none"))}}}:{disabled:!0,hidden:!0}})}var mge=!!zae,pge=mge?n=>Zo()?Ot(n):n:Ot;function bQ(n,e=Zo()){let t=0,i,s;return()=>(t++,Ot(()=>{t--,queueMicrotask(()=>{!t&&s&&(s(),s=i=void 0)})}),s||Kr(r=>i=n(s=r),e),i)}function vQ(n,e,t,i){return n.addEventListener(e,t,i),pge(n.removeEventListener.bind(n,e,t,i))}const db=navigator.platform.toUpperCase().indexOf("MAC")>=0,Hr=db?"":"Ctrl";function y9(n){return fr(n)&&(n.key==="c"||n.key==="a"||n.key==="f"||n.key==="r"||n.key==="="||n.key==="-")||n.key==="Tab"||n.key==="F5"||n.key==="F12"}function rt(n){return n.altKey||n.ctrlKey||n.metaKey||n.shiftKey}function fr(n){return db?n.metaKey:n.ctrlKey}function Kw(n){return n.altKey||n.ctrlKey||n.metaKey}function hh(n,e){if(e=e||{},db){if(n.metaKey)return new MouseEvent("click",{...e,metaKey:!0,bubbles:!0})}else if(n.ctrlKey)return new MouseEvent("click",{...e,ctrlKey:!0,bubbles:!0});return new MouseEvent("click",{...e,bubbles:!0})}const bge=bQ(()=>{const[n,e]=he(null);return vQ(window,"keydown",t=>{e(t),setTimeout(()=>e(null))},{capture:!0}),n});var vge=G('<ul class="context-menu bg-[--menu-background] text-[length:--panel-font-size] text-[--menu-foreground] outline-none [&amp;_li.disabled]:cursor-default [&amp;_li.disabled]:text-[--menu-disabled-foreground] [&amp;_li.separator]:h-[1px] [&amp;_li.separator]:border-t [&amp;_li.separator]:border-t-[--editor-hover-widget-border] [&amp;_li.separator]:py-0 [&amp;_li.separator]:mx-0 [&amp;_li:focus_span]:text-[--menu-selection-foreground] [&amp;_li:not(.disabled)]:cursor-pointer [&amp;_li:not(.disabled)]:text-[--menu-foreground] [&amp;_li]:mx-[0.26625rem] [&amp;_li]:my-[0.3em] [&amp;_li]:flex [&amp;_li]:flex-row [&amp;_li]:items-center [&amp;_li]:py-[0.2rem] [&amp;_li]:pr-[1.625rem] [&amp;_li]:outline-none focus:[&amp;_li]:rounded-[--menu-border-radius] focus:[&amp;_li]:border-[--focus-border] focus:[&amp;_li]:bg-[--menu-selection-background] focus:[&amp;_li]:text-[--menu-selection-foreground] [&amp;_span.check]:w-[1.625rem] [&amp;_span.check]:min-w-[1.625rem] [&amp;_span.shortcut]:ml-auto [&amp;_span.shortcut]:pl-[2rem] [&amp;_span.shortcut]:text-[--menu-disabled-foreground]"tabindex=-1>'),_ge=G('<li class="separator disabled">'),wge=G('<li><span class="codicon check"></span><span class=shortcut>');const wg={text:""};let _Q=0,S9,C9;function wQ(n){S9=n.clientX,C9=n.clientY}function yge(){_Q++===0&&document.addEventListener("mousemove",wQ)}function Sge(){--_Q===0&&document.removeEventListener("mousemove",wQ)}function Cge(){const n=document.createElement("div");n.className="fixed inset-0 bg-transparent pointer-events-auto z-20 context-menu-overlay",document.body.appendChild(n)}function Lge(){document.querySelector(".context-menu-overlay")?.remove()}function xh(n,e){const t=e();if(!t)return;const[i,s]=t.menuOpen;let r,o,a=null;function l(b){u(b)&&(b.preventDefault(),b.stopPropagation())}function c(b){if(b.preventDefault(),b.stopPropagation(),b.key==="Escape"){o.hide();return}const w=b.target;if(w.matches("ul")&&(b.key==="ArrowDown"?w.querySelector("li:not(.disabled)")?.focus():b.key==="ArrowUp"&&w.querySelector("li:last-of-type:not(.disabled)")?.focus()),w.matches("li"))if(b.key==="ArrowDown"){let v=w.nextElementSibling;for(;v&&v.classList.contains("disabled");)v=v.nextElementSibling;(v||w.parentElement?.querySelector("li:not(.disabled)"))?.focus()}else if(b.key==="ArrowUp"){let v=w.previousElementSibling;for(;v&&v.classList.contains("disabled");)v=v.previousElementSibling;(v||w.parentElement?.querySelector("li:last-of-type:not(.disabled)"))?.focus()}else(b.key===" "||b.key==="Enter")&&w.dispatchEvent(new MouseEvent("click",{bubbles:!0}))}function d(b){b.target&&u(b)&&(b.preventDefault(),b.stopPropagation(),t.keyboardTrigger?.beforeOpen(b.target,b.currentTarget)&&s(!0))}function u(b){return b.key==="F10"&&b.shiftKey||b.key==="."&&fr(b)||b.key==="ContextMenu"}function h(b){b.preventDefault(),b.stopPropagation()}function f(b){b.preventDefault(),b.stopPropagation()}function g(b){b.currentTarget?.querySelector("ul")?.focus()}const m={placement:"bottom-start",trigger:"manual",hideOnClick:!0,interactive:!0,delay:0,duration:0,allowHTML:!0,appendTo:document.querySelector("body"),onShow:b=>{const w=t.menuItemFactory();if(!w||w.length===0)return!1;b.setContent(Kr(()=>(()=>{var v=vge();return A(v,x(ln,{each:w,children:_=>_===wg?_ge():(()=>{var y=wge(),C=y.firstChild,S=C.nextSibling;return y.addEventListener("mouseenter",k=>k.currentTarget.focus()),y.$$click=k=>{_.action?.(k),s(!1)},A(y,()=>_.text,S),A(S,()=>_.shortcut),Me(k=>{var I=_.action?"-1":void 0,T=!_.action,D=_.checked===!0;return I!==k.e&&xt(y,"tabindex",k.e=I),T!==k.t&&y.classList.toggle("disabled",k.t=T),D!==k.a&&C.classList.toggle("codicon-check",k.a=D),k},{e:void 0,t:void 0,a:void 0}),y})()})),v})())),b.popper.classList.add("context-menu"),b.popper.addEventListener("mousedown",h),b.popper.addEventListener("mouseleave",g),b.popper.addEventListener("contextmenu",f),document.addEventListener("keydown",c),document.addEventListener("keyup",l),requestAnimationFrame(()=>{Cge()}),s(!0)},onShown:b=>{r=document.activeElement,b.popper.querySelector("ul")?.focus()},onHide:b=>{b.setContent(""),b.popper.removeEventListener("mousedown",h),b.popper.removeEventListener("mouseleave",g),b.popper.removeEventListener("contextmenu",f),document.removeEventListener("keydown",c),document.removeEventListener("keyup",l),Lge(),s(!1),requestAnimationFrame(()=>{r?.focus?.({preventScroll:!0}),r=null})},getReferenceClientRect:t.menuPositionOverride?()=>{let b,w;const v=t.menuPositionOverride();if(!v)b=S9,w=C9;else{const _=v();_?(b=_[0],w=_[1]):(b=S9,w=C9)}return{width:0,height:0,top:w,right:b,bottom:w,left:b}}:null,popperOptions:{strategy:"fixed",modifiers:[{name:"preventOverflow",options:{boundary:"viewport",padding:2}},{name:"flip",options:{fallbackPlacements:["top","bottom","right","left"]}}]}},p=t.tippyPropOverrides?{...m,...t.tippyPropOverrides}:m;Bn(()=>{if(t.keyboardTrigger){let b=n;for(;b;){if(b.getAttribute("data-namespace")===t.keyboardTrigger.namespace){a=b;break}b=b.parentElement}}a?.addEventListener("keyup",d),yge(),o=i0(n,p),Fi(()=>{i()?o.show():o.hide()})}),Ot(()=>{o.destroy(),a?.removeEventListener("keyup",d),Sge()})}dn(["click"]);var kge=G("<button>"),xge=G("<a target=_blank>"),Tge=G('<svg class="h-[--panel-smaller-font-size] w-[--panel-smaller-font-size] fill-[--foreground] opacity-90"xmlns=http://www.w3.org/2000/svg viewBox="0 0 256 512"><path d="M.1 29.3C-1.4 47 11.7 62.4 29.3 63.9l8 .7C70.5 67.3 96 95 96 128.3L96 224l-32 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l32 0 0 95.7c0 33.3-25.5 61-58.7 63.8l-8 .7C11.7 449.6-1.4 465 .1 482.7s16.9 30.7 34.5 29.2l8-.7c34.1-2.8 64.2-18.9 85.4-42.9c21.2 24 51.2 40 85.4 42.9l8 .7c17.6 1.5 33.1-11.6 34.5-29.2s-11.6-33.1-29.2-34.5l-8-.7C185.5 444.7 160 417 160 383.7l0-95.7 32 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-32 0 0-95.7c0-33.3 25.5-61 58.7-63.8l8-.7c17.6-1.5 30.7-16.9 29.2-34.5S239-1.4 221.3 .1l-8 .7C179.2 3.6 149.2 19.7 128 43.7c-21.2-24-51.2-40-85.4-42.9l-8-.7C17-1.4 1.6 11.7 .1 29.3z">');function Ee(n){const[e,t]=he(),[i,s]=he(!1);Fi(()=>{t(n.classList)});const r=(()=>{var o=kge();return We(xh,o,()=>xh&&n.menuItems&&{menuItemFactory:n.menuItems,menuOpen:[i,s],tippyPropOverrides:{maxWidth:"95vw"}}),We(Te,o,()=>Te&&{content:n.tooltip,...n.tooltipOpts}),o.$$focusout=a=>n.onFocusOut?.(a),Yh(o,"click",n.onClick?n.onClick:n.menuItems?()=>s(!i()):void 0,!0),A(o,()=>n.children),Me(a=>{var l=n.contentEditable,c=n.namespace,d=n.tabIndex===void 0?-1:n.tabIndex,u=e(),h=n.style,f=`icon ${n.onClick||n.menuItems?"clickableIcon":""} icon-opacity codicon p-[0.15625rem] ${n.class||void 0}`;return l!==a.e&&xt(o,"contenteditable",a.e=l),c!==a.t&&xt(o,"data-namespace",a.t=c),d!==a.a&&xt(o,"tabindex",a.a=d),a.o=nn(o,u,a.o),a.i=Dl(o,h,a.i),f!==a.n&&mr(o,a.n=f),a},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),o})();return n.href?(()=>{var o=xge();return A(o,r),Me(()=>xt(o,"href",n.href)),o})():r}const $T=Tge();dn(["click","focusout"]);const yQ=6.8,ub="When you focus a test, coverage indicators in the editor will be updated to show only the coverage for the focused test. Inline logs and errors displayed in the editor will also be updated to show only the logs and errors for the focused test.",SQ="When enabled, hovering over any expression or selection will evaluate, capture, and display the associated value(s).",CQ="When disabled, the inline view will be used to display the diff when horizontal space is limited.",Dge="Copilot Chat is used to send error details (message, stack trace, and test name) to the AI model. The model may use Wallaby tools for additional info, but all tool calls require explicit user permission by default.";function rG(n,e,t){let i=0,s=n.length;for(;i<s;){const r=i+s>>>1;t(n[r],e)<0?i=r+1:s=r}return i}const bn={tests:100,logs:1e3,preCompletedLogs:100,errors:100,errorSizeBytesToSkipCompactDiff:15e3,errorExpectedActualSizeBytesToSkipCompactDiff:18e3,errorSizeBytesToPartiallyTruncate:2e4,errorsWithFullDisplayOnly:30,errorSizeBytesWithFullDisplayOnly:5e4,errorSizeBytesToFullyTruncateIfExceeded:1e4},Ige=300,[Mge,LQ]=Go(n=>n.value),[Ege,jk]=Go(n=>n.value);function Nge(n){return JSON.parse(n.value)}function Rge(n){return n=n.replace(/\\/g,"/"),n[0]!=="/"&&(n=`/${n}`),encodeURI(`file://${n}`).replace(/[?#]/g,encodeURIComponent)}function kQ(n){try{const e=new URL(n).pathname;return decodeURIComponent(e)}catch{return}}function Wge(n){return xQ(n)||n.startsWith("file")?n:Rge(n)}function xQ(n){return n.startsWith("http://")||n.startsWith("https://")}function TQ(n,e){if(xQ(n))return n;if(n.startsWith("file")&&(n=kQ(n)||n),n=n.replace(/\\/g,"/"),e&&(e=e.replace(/\\/g,"/"),n.startsWith(e))){let t=n.substring(e.length);return t.startsWith("/")&&(t=t.substring(1)),t}return n}function oG(n,e){return n.length>e?n.substr(0,e):n}var Age=G('<div class="code absolute z-[9998] max-w-[90%] overflow-y-auto rounded-[var(--editor-hover-widget-border-radius)] border border-[--editor-hover-widget-border] bg-[--editor-hover-widget-code-background] text-[length:var(--panel-font-size)] outline-none"data-namespace=shared.popup.fragment tabindex=-1><div class="mb-1 flex flex-row items-center justify-center border-b border-b-[--editor-hover-widget-border] py-[0.1875rem] pl-3 pr-1 text-[--subtle-foreground] [&amp;_button]:!text-[length:--icon-font-size]"><div class="flex-grow truncate pr-1">:</div><div></div></div><div class="overflow-auto pb-1">'),Fge=G('<span class="text-[var(--source-context-foreground)] opacity-80"> '),Vge=G('<p class="m-0 ml-3 mr-3 whitespace-pre"><span class=" inline-block select-none pr-3 text-[--editor-line-number-foreground]"></span><span class=inline-block>');let xs;const kS=(n,e)=>n===void 0&&e===void 0||(n?.frame===void 0&&e?.frame===void 0&&n?.file===e?.file&&n?.line===e?.line||n?.frame!==void 0&&e?.frame!==void 0&&n?.frame===e?.frame)&&n?.navigatable===e?.navigatable&&n?.context===e?.context,[Hi,Hu]=he(void 0,{equals:kS}),Pge=()=>Hi()!==void 0;let ao;function I_(n,e){ao?.(),Kr(t=>{M_(n,()=>({file:e.file,line:e.line||1,cwd:e.cwd,options:{focus:!0,select:!0,closeOnClickOutside:!0},navigatable:!0}));const i=n.closest(".scrollable,.scrollable_");let s;if(i){const r=n.getBoundingClientRect(),o=i.getBoundingClientRect();s=r.top>=o.top&&r.bottom<=o.bottom&&r.left>=o.left&&r.right<=o.right?r:o}else s=n.getBoundingClientRect();if(s)ao=()=>{Pge()&&n.dispatchEvent(new CustomEvent("hideCodeFragment")),t(),ao=void 0},n.dispatchEvent(new CustomEvent("showCodeFragment",{detail:s}));else return})}function H1(n){return ao?(Hi()&&(n.key==="Enter"||n.key===" ")&&jk().navigate({file:Hi().file,line:Hi().line,column:Hi().column},n,{...Hi().options||{},focus:n.key==="Enter"}),ao(),!0):!1}function Oge(){const n=LQ(),[e,t]=he();B$(e,()=>{xs&&(xs=void 0,Hu(void 0),ao?.())});const i=o=>{Hi().navigatable&&(o.preventDefault(),o.stopPropagation(),xs=void 0,n.navigate({file:Hi().file,line:Hi().line,column:Hi().column},o,Hi().options),Hu(void 0),ao?.())},s=()=>Hi().content,r=()=>s().frame.end.toString().length;return x(se,{get when(){return Hi()},get children(){var o=Age(),a=o.firstChild,l=a.firstChild,c=l.firstChild,d=l.nextSibling,u=a.nextSibling;return o.addEventListener("mouseleave",()=>{xs=void 0,setTimeout(()=>xs===void 0&&Hu(void 0),150),ao?.()}),o.$$keydown=h=>{h.key==="Escape"&&(xs=void 0,Hu(void 0),ao?.(),h.preventDefault(),h.stopPropagation())},o.addEventListener("mouseenter",()=>Hi()&&(xs={file:Hi().file,line:Hi().line,frame:Hi().frame,cwd:Hi().cwd,navigatable:Hi().navigatable,element:e(),handleMouseMove:Hi().handleMouseMove})),We(h=>{t(h),Fi(()=>Hi()&&Zge(h,Hi().position.x,Hi().position.y))},o),l.$$click=i,A(l,()=>TQ(Hi().file,Hi().cwd),c),A(l,()=>Hi().line,null),A(l,(()=>{var h=J(()=>!!Hi().context);return()=>h()?(()=>{var f=Fge();return f.firstChild,A(f,()=>Hi().context,null),f})():null})(),null),A(d,x(se,{get when(){return Hi().navigatable},get children(){return x(Ee,{class:"codicon-go-to-file pl-[0.09375rem] pr-[0.21875rem]",get style(){return{color:Hi().color?`color-mix(in srgb, ${Hi().color} 45%, var(--subtle-foreground))`:void 0}},onClick:i,get tooltip(){return`Open in editor${n.editorTooltipAddendum()()}${ao?"<br/><br/><span class='keyboard-shortcut'>Enter</span> to open and focus, <span class='keyboard-shortcut'>Space</span> to open without focus":""}`}})}})),A(u,()=>Hi()?.content.lines.map((h,f)=>{const g=s().frame.start+f;return(()=>{var m=Vge(),p=m.firstChild,b=p.nextSibling;return A(p,()=>g.toString().padStart(r()," ")),b.innerHTML=h,Me(w=>{var v=s().current===f?"var(--editor-line-number-active-foreground)":void 0,_=s().current!==f?.6:void 0;return v!==w.e&&((w.e=v)!=null?p.style.setProperty("color",v):p.style.removeProperty("color")),_!==w.t&&((w.t=_)!=null?b.style.setProperty("opacity",_):b.style.removeProperty("opacity")),w},{e:void 0,t:void 0}),m})()})),Me(()=>(Hi().navigatable?"pointer":"default")!=null?l.style.setProperty("cursor",Hi().navigatable?"pointer":"default"):l.style.removeProperty("cursor")),o}})}function M_(n,e){const t=jk(),i=async(d,u,h)=>{const f=e();if(f&&!(xs&&kS(xs,f)&&Gge(xs.element,n))&&(xs={...f,element:n},h||await new Promise(g=>setTimeout(g,f.delay||200)),xs&&kS(xs,f)&&xs.element===n)){Hu(void 0),await new Promise(p=>setTimeout(p,1));let g={file:f.file,line:f.line,cwd:f.cwd};f.frame!==void 0&&(g=await t.getLocationByTraceFrame(f.frame)||g);const m=await t.highlight(g.file,g.line||1);xs&&kS(xs,f)&&xs.element===n&&(Hu(m?{file:g.file,line:g.line,cwd:g.cwd,column:f.column,navigatable:f.navigatable,handleMouseMove:f.handleMouseMove,options:f.options,context:f.context,content:m,position:{x:d,y:u},color:f.color}:void 0),t.featureUsed("codeTooltip"))}},s=d=>{try{xs=void 0,d?Hu(void 0):setTimeout(()=>{xs===void 0&&Hu(void 0)},200)}finally{ao?.()}},r=async d=>{d.detail&&(ao||(ao=()=>{ao=void 0,o()}),await i(d.detail.x,d.detail.y,!0))},o=()=>{s(!0)},a=async d=>{await i(d.clientX,d.clientY,!1)},l=()=>{ao||s(!1)},c=async d=>{if(xs&&!xs.handleMouseMove){n.removeEventListener("mousemove",c);return}await i(d.clientX,d.clientY,!1)};n.addEventListener("showCodeFragment",r),n.addEventListener("hideCodeFragment",o),n.addEventListener("mouseenter",a),n.addEventListener("mouseleave",l),n.addEventListener("mousemove",c),Ot(()=>n.removeEventListener("showCodeFragment",r)),Ot(()=>n.removeEventListener("hideCodeFragment",o)),Ot(()=>n.removeEventListener("mouseenter",a)),Ot(()=>n.removeEventListener("mouseleave",l)),Ot(()=>n.removeEventListener("mousemove",c))}function Zge(n,e,t){const i=n.offsetHeight,s=n.offsetWidth,r=10;n.style.maxHeight="unset";const o=t+i+r<n.parentElement.offsetHeight,a=t-i-r>0;!o&&!a&&(n.style.maxHeight=`${n.parentElement.offsetHeight}px`),n.style.top=`${o?t+r:a?t-i-r:0}px`;const l=e+s<n.parentElement.offsetWidth;e-s>0?n.style.right=`${n.parentElement.offsetWidth-e}px`:l&&(n.style.left=`${e}px`)}function Gge(n,e){return n===e?!0:n instanceof HTMLElement?n.getAttribute("data-id")===e.getAttribute("data-id"):!1}dn(["keydown","click"]);function Bge(n,e){const t=/^#([A-Fa-f0-9]{3,8})$/.test(e)?aG(e):Xge(e);if(/^#([A-Fa-f0-9]{3,8})$/.test(n)){const r=aG(n);return lG(r,t)}const i=/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([\d.]+))?\)/,s=n.match(i);if(s){const r=parseInt(s[1]),o=parseInt(s[2]),a=parseInt(s[3]),l=s[4]!==void 0?parseFloat(s[4]):1;return lG({r,g:o,b:a,a:l},t)}return n}function aG(n){n.length===4&&(n="#"+[...n.slice(1)].map(o=>o+o).join(""));const e=parseInt(n.slice(1),16),t=e>>16&255,i=e>>8&255,s=e&255,r=n.length===9?(e&255)/255:1;return{r:t,g:i,b:s,a:r}}function Xge(n){const e=/rgb\((\d+),\s*(\d+),\s*(\d+)\)/,t=n.match(e);return t?{r:parseInt(t[1]),g:parseInt(t[2]),b:parseInt(t[3])}:{r:255,g:255,b:255}}function lG(n,e){const t=Math.round(n.r*n.a+e.r*(1-n.a)),i=Math.round(n.g*n.a+e.g*(1-n.a)),s=Math.round(n.b*n.a+e.b*(1-n.a));return`rgb(${t}, ${i}, ${s})`}function Th(n){const[e,t]=he(!1);let i;return Fi(()=>{n.when,clearTimeout(i),n.delay===0?t(!0):(t(!1),i=setTimeout(()=>t(!0),n.delay||250))}),Ot(()=>clearTimeout(i)),x(se,{get when(){return e()},get fallback(){return n.untilThen},get children(){return x(se,{get when(){return n.when??!0},get fallback(){return n.fallback},get children(){return n.children}})}})}function Pt(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}var xn=-1,Wn=1,yi=0;Pt.prototype.diff_main=function(n,e,t,i){typeof i>"u"&&(this.Diff_Timeout<=0?i=Number.MAX_VALUE:i=new Date().getTime()+this.Diff_Timeout*1e3);var s=i;if(n==null||e==null)throw new Error("Null input. (diff_main)");if(n==e)return n?[[yi,n]]:[];typeof t>"u"&&(t=!0);var r=t,o=this.diff_commonPrefix(n,e),a=n.substring(0,o);n=n.substring(o),e=e.substring(o),o=this.diff_commonSuffix(n,e);var l=n.substring(n.length-o);n=n.substring(0,n.length-o),e=e.substring(0,e.length-o);var c=this.diff_compute_(n,e,r,s);return a&&c.unshift([yi,a]),l&&c.push([yi,l]),this.diff_cleanupMerge(c),c};Pt.prototype.diff_compute_=function(n,e,t,i){var s;if(!n)return[[Wn,e]];if(!e)return[[xn,n]];var r=n.length>e.length?n:e,o=n.length>e.length?e:n,a=r.indexOf(o);if(a!=-1)return s=[[Wn,r.substring(0,a)],[yi,o],[Wn,r.substring(a+o.length)]],n.length>e.length&&(s[0][0]=s[2][0]=xn),s;if(o.length==1)return[[xn,n],[Wn,e]];var l=this.diff_halfMatch_(n,e);if(l){var c=l[0],d=l[1],u=l[2],h=l[3],f=l[4],g=this.diff_main(c,u,t,i),m=this.diff_main(d,h,t,i);return g.concat([[yi,f]],m)}return t&&n.length>100&&e.length>100?this.diff_lineMode_(n,e,i):this.diff_bisect_(n,e,i)};Pt.prototype.diff_lineMode_=function(n,e,t){var i=this.diff_linesToChars_(n,e);n=i.chars1,e=i.chars2;var s=i.lineArray,r=this.diff_main(n,e,!1,t);this.diff_charsToLines_(r,s),this.diff_cleanupSemantic(r),r.push([yi,""]);for(var o=0,a=0,l=0,c="",d="";o<r.length;){switch(r[o][0]){case Wn:l++,d+=r[o][1];break;case xn:a++,c+=r[o][1];break;case yi:if(a>=1&&l>=1){r.splice(o-a-l,a+l),o=o-a-l;for(var i=this.diff_main(c,d,!1,t),u=i.length-1;u>=0;u--)r.splice(o,0,i[u]);o=o+i.length}l=0,a=0,c="",d="";break}o++}return r.pop(),r};Pt.prototype.diff_bisect_=function(n,e,t){for(var i=n.length,s=e.length,r=Math.ceil((i+s)/2),o=r,a=2*r,l=new Array(a),c=new Array(a),d=0;d<a;d++)l[d]=-1,c[d]=-1;l[o+1]=0,c[o+1]=0;for(var u=i-s,h=u%2!=0,f=0,g=0,m=0,p=0,b=0;b<r&&!(new Date().getTime()>t);b++){for(var w=-b+f;w<=b-g;w+=2){var v=o+w,_;w==-b||w!=b&&l[v-1]<l[v+1]?_=l[v+1]:_=l[v-1]+1;for(var y=_-w;_<i&&y<s&&n.charAt(_)==e.charAt(y);)_++,y++;if(l[v]=_,_>i)g+=2;else if(y>s)f+=2;else if(h){var C=o+u-w;if(C>=0&&C<a&&c[C]!=-1){var S=i-c[C];if(_>=S)return this.diff_bisectSplit_(n,e,_,y,t)}}}for(var k=-b+m;k<=b-p;k+=2){var C=o+k,S;k==-b||k!=b&&c[C-1]<c[C+1]?S=c[C+1]:S=c[C-1]+1;for(var I=S-k;S<i&&I<s&&n.charAt(i-S-1)==e.charAt(s-I-1);)S++,I++;if(c[C]=S,S>i)p+=2;else if(I>s)m+=2;else if(!h){var v=o+u-k;if(v>=0&&v<a&&l[v]!=-1){var _=l[v],y=o+_-v;if(S=i-S,_>=S)return this.diff_bisectSplit_(n,e,_,y,t)}}}}return[[xn,n],[Wn,e]]};Pt.prototype.diff_bisectSplit_=function(n,e,t,i,s){var r=n.substring(0,t),o=e.substring(0,i),a=n.substring(t),l=e.substring(i),c=this.diff_main(r,o,!1,s),d=this.diff_main(a,l,!1,s);return c.concat(d)};Pt.prototype.diff_linesToChars_=function(n,e){var t=[],i=Object.create(null);t[0]="";function s(a){for(var l="",c=0,d=-1,u=t.length;d<a.length-1;){d=a.indexOf(`
`,c),d==-1&&(d=a.length-1);var h=a.substring(c,d+1);c=d+1,i[h]!==void 0?l+=String.fromCharCode(i[h]):(l+=String.fromCharCode(u),i[h]=u,t[u++]=h)}return l}var r=s(n),o=s(e);return{chars1:r,chars2:o,lineArray:t}};Pt.prototype.diff_wordMode=function(n,e){var t=this.diff_linesToWords_(n,e),i=t.chars1,s=t.chars2,r=t.lineArray,o=this.diff_main(i,s,!1);return this.diff_charsToLines_(o,r),o};Pt.prototype.diff_linesToWords_=function(n,e){var t=[],i=Object.create(null);t[0]="";var s=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/;function r(c){for(var d=c.split(/(\s+|\b)/),u=0;u<d.length-1;u++)!d[u+1]&&d[u+2]&&s.test(d[u])&&s.test(d[u+2])&&(d[u]+=d[u+2],d.splice(u+1,2),u--);return d}function o(c){for(var d="",u=r(c),h=t.length,f=0,g=u.length;f<g;f++){var m=u[f];i[m]!==void 0?d+=String.fromCharCode(i[m]):(d+=String.fromCharCode(h),i[m]=h,t[h++]=m)}return d}var a=o(n),l=o(e);return{chars1:a,chars2:l,lineArray:t}};Pt.prototype.diff_charsToLines_=function(n,e){for(var t=0;t<n.length;t++){for(var i=n[t][1],s=[],r=0;r<i.length;r++)s[r]=e[i.charCodeAt(r)];n[t][1]=s.join("")}};Pt.prototype.diff_commonPrefix=function(n,e){if(!n||!e||n.charAt(0)!=e.charAt(0))return 0;for(var t=0,i=Math.min(n.length,e.length),s=i,r=0;t<s;)n.substring(r,s)==e.substring(r,s)?(t=s,r=t):i=s,s=Math.floor((i-t)/2+t);return s};Pt.prototype.diff_commonSuffix=function(n,e){if(!n||!e||n.charAt(n.length-1)!=e.charAt(e.length-1))return 0;for(var t=0,i=Math.min(n.length,e.length),s=i,r=0;t<s;)n.substring(n.length-s,n.length-r)==e.substring(e.length-s,e.length-r)?(t=s,r=t):i=s,s=Math.floor((i-t)/2+t);return s};Pt.prototype.diff_commonOverlap_=function(n,e){var t=n.length,i=e.length;if(t==0||i==0)return 0;t>i?n=n.substring(t-i):t<i&&(e=e.substring(0,t));var s=Math.min(t,i);if(n==e)return s;for(var r=0,o=1;;){var a=n.substring(s-o),l=e.indexOf(a);if(l==-1)return r;o+=l,(l==0||n.substring(s-o)==e.substring(0,o))&&(r=o,o++)}};Pt.prototype.diff_halfMatch_=function(n,e){if(this.Diff_Timeout<=0)return null;var t=n.length>e.length?n:e,i=n.length>e.length?e:n;if(t.length<4||i.length*2<t.length)return null;var s=this;function r(g,m,p){for(var b=g.substring(p,p+Math.floor(g.length/4)),w=-1,v="",_,y,C,S;(w=m.indexOf(b,w+1))!=-1;){var k=s.diff_commonPrefix(g.substring(p),m.substring(w)),I=s.diff_commonSuffix(g.substring(0,p),m.substring(0,w));v.length<I+k&&(v=m.substring(w-I,w)+m.substring(w,w+k),_=g.substring(0,p-I),y=g.substring(p+k),C=m.substring(0,w-I),S=m.substring(w+k))}return v.length*2>=g.length?[_,y,C,S,v]:null}var o=r(t,i,Math.ceil(t.length/4)),a=r(t,i,Math.ceil(t.length/2)),l;if(!o&&!a)return null;a?o?l=o[4].length>a[4].length?o:a:l=a:l=o;var c,d,u,h;n.length>e.length?(c=l[0],d=l[1],u=l[2],h=l[3]):(u=l[0],h=l[1],c=l[2],d=l[3]);var f=l[4];return[c,d,u,h,f]};Pt.prototype.diff_cleanupSemantic=function(n){for(var e=!1,t=[],i=0,s=null,r=0,o=0,a=0,l=0,c=0;r<n.length;)n[r][0]==yi?(t[i++]=r,o=l,a=c,l=0,c=0,s=n[r][1]):(n[r][0]==Wn?l+=n[r][1].length:c+=n[r][1].length,s&&s.length<=Math.max(o,a)&&s.length<=Math.max(l,c)&&(n.splice(t[i-1],0,[xn,s]),n[t[i-1]+1][0]=Wn,i--,i--,r=i>0?t[i-1]:-1,o=0,a=0,l=0,c=0,s=null,e=!0)),r++;for(e&&this.diff_cleanupMerge(n),this.diff_cleanupSemanticLossless(n),r=1;r<n.length;){if(n[r-1][0]==xn&&n[r][0]==Wn){var d=n[r-1][1],u=n[r][1],h=this.diff_commonOverlap_(d,u),f=this.diff_commonOverlap_(u,d);h>=f?(h>=d.length/2||h>=u.length/2)&&(n.splice(r,0,[yi,u.substring(0,h)]),n[r-1][1]=d.substring(0,d.length-h),n[r+1][1]=u.substring(h),r++):(f>=d.length/2||f>=u.length/2)&&(n.splice(r,0,[yi,d.substring(0,f)]),n[r-1][0]=Wn,n[r-1][1]=u.substring(0,u.length-f),n[r+1][0]=xn,n[r+1][1]=d.substring(f),r++),r++}r++}};Pt.prototype.diff_cleanupSemanticLossless=function(n){function e(f,g){if(!f||!g)return 6;var m=f.charAt(f.length-1),p=g.charAt(0),b=m.match(Pt.nonAlphaNumericRegex_),w=p.match(Pt.nonAlphaNumericRegex_),v=b&&m.match(Pt.whitespaceRegex_),_=w&&p.match(Pt.whitespaceRegex_),y=v&&m.match(Pt.linebreakRegex_),C=_&&p.match(Pt.linebreakRegex_),S=y&&f.match(Pt.blanklineEndRegex_),k=C&&g.match(Pt.blanklineStartRegex_);return S||k?5:y||C?4:b&&!v&&_?3:v||_?2:b||w?1:0}for(var t=1;t<n.length-1;){if(n[t-1][0]==yi&&n[t+1][0]==yi){var i=n[t-1][1],s=n[t][1],r=n[t+1][1],o=this.diff_commonSuffix(i,s);if(o){var a=s.substring(s.length-o);i=i.substring(0,i.length-o),s=a+s.substring(0,s.length-o),r=a+r}for(var l=i,c=s,d=r,u=e(i,s)+e(s,r);s.charAt(0)===r.charAt(0);){i+=s.charAt(0),s=s.substring(1)+r.charAt(0),r=r.substring(1);var h=e(i,s)+e(s,r);h>=u&&(u=h,l=i,c=s,d=r)}n[t-1][1]!=l&&(l?n[t-1][1]=l:(n.splice(t-1,1),t--),n[t][1]=c,d?n[t+1][1]=d:(n.splice(t+1,1),t--))}t++}};Pt.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/;Pt.whitespaceRegex_=/\s/;Pt.linebreakRegex_=/[\r\n]/;Pt.blanklineEndRegex_=/\n\r?\n$/;Pt.blanklineStartRegex_=/^\r?\n\r?\n/;Pt.prototype.diff_cleanupEfficiency=function(n){for(var e=!1,t=[],i=0,s=null,r=0,o=!1,a=!1,l=!1,c=!1;r<n.length;)n[r][0]==yi?(n[r][1].length<this.Diff_EditCost&&(l||c)?(t[i++]=r,o=l,a=c,s=n[r][1]):(i=0,s=null),l=c=!1):(n[r][0]==xn?c=!0:l=!0,s&&(o&&a&&l&&c||s.length<this.Diff_EditCost/2&&o+a+l+c==3)&&(n.splice(t[i-1],0,[xn,s]),n[t[i-1]+1][0]=Wn,i--,s=null,o&&a?(l=c=!0,i=0):(i--,r=i>0?t[i-1]:-1,l=c=!1),e=!0)),r++;e&&this.diff_cleanupMerge(n)};Pt.prototype.diff_cleanupMerge=function(n){n.push([yi,""]);for(var e=0,t=0,i=0,s="",r="",o;e<n.length;)switch(n[e][0]){case Wn:i++,r+=n[e][1],e++;break;case xn:t++,s+=n[e][1],e++;break;case yi:t+i>1?(t!==0&&i!==0&&(o=this.diff_commonPrefix(r,s),o!==0&&(e-t-i>0&&n[e-t-i-1][0]==yi?n[e-t-i-1][1]+=r.substring(0,o):(n.splice(0,0,[yi,r.substring(0,o)]),e++),r=r.substring(o),s=s.substring(o)),o=this.diff_commonSuffix(r,s),o!==0&&(n[e][1]=r.substring(r.length-o)+n[e][1],r=r.substring(0,r.length-o),s=s.substring(0,s.length-o))),t===0?n.splice(e-i,t+i,[Wn,r]):i===0?n.splice(e-t,t+i,[xn,s]):n.splice(e-t-i,t+i,[xn,s],[Wn,r]),e=e-t-i+(t?1:0)+(i?1:0)+1):e!==0&&n[e-1][0]==yi?(n[e-1][1]+=n[e][1],n.splice(e,1)):e++,i=0,t=0,s="",r="";break}n[n.length-1][1]===""&&n.pop();var a=!1;for(e=1;e<n.length-1;)n[e-1][0]==yi&&n[e+1][0]==yi&&(n[e][1].substring(n[e][1].length-n[e-1][1].length)==n[e-1][1]?(n[e][1]=n[e-1][1]+n[e][1].substring(0,n[e][1].length-n[e-1][1].length),n[e+1][1]=n[e-1][1]+n[e+1][1],n.splice(e-1,1),a=!0):n[e][1].substring(0,n[e+1][1].length)==n[e+1][1]&&(n[e-1][1]+=n[e+1][1],n[e][1]=n[e][1].substring(n[e+1][1].length)+n[e+1][1],n.splice(e+1,1),a=!0)),e++;a&&this.diff_cleanupMerge(n)};Pt.prototype.diff_xIndex=function(n,e){var t=0,i=0,s=0,r=0,o;for(o=0;o<n.length&&(n[o][0]!==Wn&&(t+=n[o][1].length),n[o][0]!==xn&&(i+=n[o][1].length),!(t>e));o++)s=t,r=i;return n.length!=o&&n[o][0]===xn?r:r+(e-s)};Pt.prototype.diff_prettyHtml=function(n){for(var e=[],t=/&/g,i=/</g,s=/>/g,r=/\n/g,o=0;o<n.length;o++){var a=n[o][0],l=n[o][1],c=l.replace(t,"&amp;").replace(i,"&lt;").replace(s,"&gt;").replace(r,"&para;<br>");switch(a){case Wn:e[o]='<ins style="background:#e6ffe6;">'+c+"</ins>";break;case xn:e[o]='<del style="background:#ffe6e6;">'+c+"</del>";break;case yi:e[o]="<span>"+c+"</span>";break}}return e.join("")};Pt.prototype.diff_prettyCompactHtml=function(n){for(var e=[],t=0;t<n.length;t++){var i=t===0,s=t===n.length-1,r=n[t][0],o=n[t][1];switch(r){case Wn:e[t]='<ins style="background:#e6ffe6;">'+this.prepare_text_(o)+"</ins>";break;case xn:e[t]='<del style="background:#ffe6e6;">'+this.prepare_text_(o)+"</del>";break;case yi:e[t]="<span>"+this.truncate_context_(o,i,s)+"</span>";break}}return e.join("")};Pt.prototype.prepare_text_=function(n){var e=/&/g,t=/</g,i=/>/g,s=/\n/g;return n.replace(e,"&amp;").replace(t,"&lt;").replace(i,"&gt;").replace(s,"&para;<br>")};Pt.prototype.truncate_context_=function(n,e,t){var i=n.split(/\r\n|\r|\n/),s='<span class="dots">...</span>',r=i.length,o=4;return r<=o?this.prepare_text_(n):!e&&!t&&r<=o*2?this.prepare_text_(n):e?s+this.prepare_text_(`
`+i.slice(-o).join(`
`)):t?this.prepare_text_(i.slice(0,o).join(`
`)+`
`)+s:this.prepare_text_(i.slice(0,o).join(`
`)+`
`)+s+this.prepare_text_(`
`+i.slice(-o).join(`
`))};Pt.prototype.diff_text1=function(n){for(var e=[],t=0;t<n.length;t++)n[t][0]!==Wn&&(e[t]=n[t][1]);return e.join("")};Pt.prototype.diff_text2=function(n){for(var e=[],t=0;t<n.length;t++)n[t][0]!==xn&&(e[t]=n[t][1]);return e.join("")};Pt.prototype.diff_levenshtein=function(n){for(var e=0,t=0,i=0,s=0;s<n.length;s++){var r=n[s][0],o=n[s][1];switch(r){case Wn:t+=o.length;break;case xn:i+=o.length;break;case yi:e+=Math.max(t,i),t=0,i=0;break}}return e+=Math.max(t,i),e};Pt.prototype.diff_toDelta=function(n){for(var e=[],t=0;t<n.length;t++)switch(n[t][0]){case Wn:e[t]="+"+encodeURI(n[t][1]);break;case xn:e[t]="-"+n[t][1].length;break;case yi:e[t]="="+n[t][1].length;break}return e.join("	").replace(/%20/g," ")};Pt.prototype.diff_fromDelta=function(n,e){for(var t=[],i=0,s=0,r=e.split(/\t/g),o=0;o<r.length;o++){var a=r[o].substring(1);switch(r[o].charAt(0)){case"+":try{t[i++]=[Wn,decodeURI(a)]}catch{throw new Error("Illegal escape in diff_fromDelta: "+a)}break;case"-":case"=":var l=parseInt(a,10);if(isNaN(l)||l<0)throw new Error("Invalid number in diff_fromDelta: "+a);var c=n.substring(s,s+=l);r[o].charAt(0)=="="?t[i++]=[yi,c]:t[i++]=[xn,c];break;default:if(r[o])throw new Error("Invalid diff operation in diff_fromDelta: "+r[o])}}if(s!=n.length)throw new Error("Delta length ("+s+") does not equal source text length ("+n.length+").");return t};Pt.prototype.match_main=function(n,e,t){if(n==null||e==null||t==null)throw new Error("Null input. (match_main)");return t=Math.max(0,Math.min(t,n.length)),n==e?0:n.length?n.substring(t,t+e.length)==e?t:this.match_bitap_(n,e,t):-1};Pt.prototype.match_bitap_=function(n,e,t){if(e.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var i=this.match_alphabet_(e),s=this;function r(_,y){var C=_/e.length,S=Math.abs(t-y);return s.Match_Distance?C+S/s.Match_Distance:S?1:C}var o=this.Match_Threshold,a=n.indexOf(e,t);a!=-1&&(o=Math.min(r(0,a),o),a=n.lastIndexOf(e,t+e.length),a!=-1&&(o=Math.min(r(0,a),o)));var l=1<<e.length-1;a=-1;for(var c,d,u=e.length+n.length,h,f=0;f<e.length;f++){for(c=0,d=u;c<d;)r(f,t+d)<=o?c=d:u=d,d=Math.floor((u-c)/2+c);u=d;var g=Math.max(1,t-d+1),m=Math.min(t+d,n.length)+e.length,p=Array(m+2);p[m+1]=(1<<f)-1;for(var b=m;b>=g;b--){var w=i[n.charAt(b-1)];if(f===0?p[b]=(p[b+1]<<1|1)&w:p[b]=(p[b+1]<<1|1)&w|((h[b+1]|h[b])<<1|1)|h[b+1],p[b]&l){var v=r(f,b-1);if(v<=o)if(o=v,a=b-1,a>t)g=Math.max(1,2*t-a);else break}}if(r(f+1,t)>o)break;h=p}return a};Pt.prototype.match_alphabet_=function(n){for(var e={},t=0;t<n.length;t++)e[n.charAt(t)]=0;for(var t=0;t<n.length;t++)e[n.charAt(t)]|=1<<n.length-t-1;return e};Pt.prototype.patch_addContext_=function(n,e){if(e.length!=0){for(var t=e.substring(n.start2,n.start2+n.length1),i=0;e.indexOf(t)!=e.lastIndexOf(t)&&t.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)i+=this.Patch_Margin,t=e.substring(n.start2-i,n.start2+n.length1+i);i+=this.Patch_Margin;var s=e.substring(n.start2-i,n.start2);s&&n.diffs.unshift([yi,s]);var r=e.substring(n.start2+n.length1,n.start2+n.length1+i);r&&n.diffs.push([yi,r]),n.start1-=s.length,n.start2-=s.length,n.length1+=s.length+r.length,n.length2+=s.length+r.length}};Pt.prototype.patch_make=function(n,e,t){var i,s;if(typeof n=="string"&&typeof e=="string"&&typeof t>"u")i=n,s=this.diff_main(i,e,!0),s.length>2&&(this.diff_cleanupSemantic(s),this.diff_cleanupEfficiency(s));else if(n&&typeof n=="object"&&typeof e>"u"&&typeof t>"u")s=n,i=this.diff_text1(s);else if(typeof n=="string"&&e&&typeof e=="object"&&typeof t>"u")i=n,s=e;else if(typeof n=="string"&&typeof e=="string"&&t&&typeof t=="object")i=n,s=t;else throw new Error("Unknown call format to patch_make.");if(s.length===0)return[];for(var r=[],o=new Pt.patch_obj,a=0,l=0,c=0,d=i,u=i,h=0;h<s.length;h++){var f=s[h][0],g=s[h][1];switch(!a&&f!==yi&&(o.start1=l,o.start2=c),f){case Wn:o.diffs[a++]=s[h],o.length2+=g.length,u=u.substring(0,c)+g+u.substring(c);break;case xn:o.length1+=g.length,o.diffs[a++]=s[h],u=u.substring(0,c)+u.substring(c+g.length);break;case yi:g.length<=2*this.Patch_Margin&&a&&s.length!=h+1?(o.diffs[a++]=s[h],o.length1+=g.length,o.length2+=g.length):g.length>=2*this.Patch_Margin&&a&&(this.patch_addContext_(o,d),r.push(o),o=new Pt.patch_obj,a=0,d=u,l=c);break}f!==Wn&&(l+=g.length),f!==xn&&(c+=g.length)}return a&&(this.patch_addContext_(o,d),r.push(o)),r};Pt.prototype.patch_deepCopy=function(n){for(var e=[],t=0;t<n.length;t++){var i=n[t],s=new Pt.patch_obj;s.diffs=[];for(var r=0;r<i.diffs.length;r++)s.diffs[r]=i.diffs[r].slice();s.start1=i.start1,s.start2=i.start2,s.length1=i.length1,s.length2=i.length2,e[t]=s}return e};Pt.prototype.patch_apply=function(n,e){if(n.length==0)return[e,[]];n=this.patch_deepCopy(n);var t=this.patch_addPadding(n);e=t+e+t,this.patch_splitMax(n);for(var i=0,s=[],r=0;r<n.length;r++){var o=n[r].start2+i,a=this.diff_text1(n[r].diffs),l,c=-1;if(a.length>this.Match_MaxBits?(l=this.match_main(e,a.substring(0,this.Match_MaxBits),o),l!=-1&&(c=this.match_main(e,a.substring(a.length-this.Match_MaxBits),o+a.length-this.Match_MaxBits),(c==-1||l>=c)&&(l=-1))):l=this.match_main(e,a,o),l==-1)s[r]=!1,i-=n[r].length2-n[r].length1;else{s[r]=!0,i=l-o;var d;if(c==-1?d=e.substring(l,l+a.length):d=e.substring(l,c+this.Match_MaxBits),a==d)e=e.substring(0,l)+this.diff_text2(n[r].diffs)+e.substring(l+a.length);else{var u=this.diff_main(a,d,!1);if(a.length>this.Match_MaxBits&&this.diff_levenshtein(u)/a.length>this.Patch_DeleteThreshold)s[r]=!1;else{this.diff_cleanupSemanticLossless(u);for(var h=0,f,g=0;g<n[r].diffs.length;g++){var m=n[r].diffs[g];m[0]!==yi&&(f=this.diff_xIndex(u,h)),m[0]===Wn?e=e.substring(0,l+f)+m[1]+e.substring(l+f):m[0]===xn&&(e=e.substring(0,l+f)+e.substring(l+this.diff_xIndex(u,h+m[1].length))),m[0]!==xn&&(h+=m[1].length)}}}}}return e=e.substring(t.length,e.length-t.length),[e,s]};Pt.prototype.patch_addPadding=function(n){for(var e=this.Patch_Margin,t="",i=1;i<=e;i++)t+=String.fromCharCode(i);for(var i=0;i<n.length;i++)n[i].start1+=e,n[i].start2+=e;var s=n[0],r=s.diffs;if(r.length==0||r[0][0]!=yi)r.unshift([yi,t]),s.start1-=e,s.start2-=e,s.length1+=e,s.length2+=e;else if(e>r[0][1].length){var o=e-r[0][1].length;r[0][1]=t.substring(r[0][1].length)+r[0][1],s.start1-=o,s.start2-=o,s.length1+=o,s.length2+=o}if(s=n[n.length-1],r=s.diffs,r.length==0||r[r.length-1][0]!=yi)r.push([yi,t]),s.length1+=e,s.length2+=e;else if(e>r[r.length-1][1].length){var o=e-r[r.length-1][1].length;r[r.length-1][1]+=t.substring(0,o),s.length1+=o,s.length2+=o}return t};Pt.prototype.patch_splitMax=function(n){for(var e=this.Match_MaxBits,t=0;t<n.length;t++)if(!(n[t].length1<=e)){var i=n[t];n.splice(t--,1);for(var s=i.start1,r=i.start2,o="";i.diffs.length!==0;){var a=new Pt.patch_obj,l=!0;for(a.start1=s-o.length,a.start2=r-o.length,o!==""&&(a.length1=a.length2=o.length,a.diffs.push([yi,o]));i.diffs.length!==0&&a.length1<e-this.Patch_Margin;){var c=i.diffs[0][0],d=i.diffs[0][1];c===Wn?(a.length2+=d.length,r+=d.length,a.diffs.push(i.diffs.shift()),l=!1):c===xn&&a.diffs.length==1&&a.diffs[0][0]==yi&&d.length>2*e?(a.length1+=d.length,s+=d.length,l=!1,a.diffs.push([c,d]),i.diffs.shift()):(d=d.substring(0,e-a.length1-this.Patch_Margin),a.length1+=d.length,s+=d.length,c===yi?(a.length2+=d.length,r+=d.length):l=!1,a.diffs.push([c,d]),d==i.diffs[0][1]?i.diffs.shift():i.diffs[0][1]=i.diffs[0][1].substring(d.length))}o=this.diff_text2(a.diffs),o=o.substring(o.length-this.Patch_Margin);var u=this.diff_text1(i.diffs).substring(0,this.Patch_Margin);u!==""&&(a.length1+=u.length,a.length2+=u.length,a.diffs.length!==0&&a.diffs[a.diffs.length-1][0]===yi?a.diffs[a.diffs.length-1][1]+=u:a.diffs.push([yi,u])),l||n.splice(++t,0,a)}}};Pt.prototype.patch_toText=function(n){for(var e=[],t=0;t<n.length;t++)e[t]=n[t];return e.join("")};Pt.prototype.patch_fromText=function(n){var e=[];if(!n)return e;for(var t=n.split(`
`),i=0,s=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;i<t.length;){var r=t[i].match(s);if(!r)throw new Error("Invalid patch string: "+t[i]);var o=new Pt.patch_obj;for(e.push(o),o.start1=parseInt(r[1],10),r[2]===""?(o.start1--,o.length1=1):r[2]=="0"?o.length1=0:(o.start1--,o.length1=parseInt(r[2],10)),o.start2=parseInt(r[3],10),r[4]===""?(o.start2--,o.length2=1):r[4]=="0"?o.length2=0:(o.start2--,o.length2=parseInt(r[4],10)),i++;i<t.length;){var a=t[i].charAt(0);try{var l=decodeURI(t[i].substring(1))}catch{throw new Error("Illegal escape in patch_fromText: "+l)}if(a=="-")o.diffs.push([xn,l]);else if(a=="+")o.diffs.push([Wn,l]);else if(a==" ")o.diffs.push([yi,l]);else{if(a=="@")break;if(a!=="")throw new Error('Invalid patch mode "'+a+'" in: '+l)}i++}}return e};Pt.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0};Pt.patch_obj.prototype.toString=function(){var n,e;this.length1===0?n=this.start1+",0":this.length1==1?n=this.start1+1:n=this.start1+1+","+this.length1,this.length2===0?e=this.start2+",0":this.length2==1?e=this.start2+1:e=this.start2+1+","+this.length2;for(var t=["@@ -"+n+" +"+e+` @@
`],i,s=0;s<this.diffs.length;s++){switch(this.diffs[s][0]){case Wn:i="+";break;case xn:i="-";break;case yi:i=" ";break}t[s+1]=i+encodeURI(this.diffs[s][1])+`
`}return t.join("").replace(/%20/g," ")};const cG=new Pt,zge=/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-PRZcf-nqry=><]/g;function Hge(n){return n.startsWith("http://")||n.startsWith("https://")}function Dh(n,e=25){const t=Hge(n);let i=(t?`${n.split(":").shift()}://.../`:"")+n.replace(/\\/g,"/").split("/").pop();return i=t?i.split("?").shift():i,DC(i,e)}function Uge(n){return n.replace(/\\/g,"/").split("/").slice(0,-1).join("/")}function Yge(n){return n.replace(/^\//,"").replace(/node_modules/g,"")}function DC(n,e=25){return n.length>e&&(n=n.substring(0,e-3)+"..."),n}function DQ(n){const e=[...n];return e.shift(),e}function Kge(n,e){return cG.diff_prettyCompactHtml(cG.diff_wordMode(n,e)).replace(/&para;<br>/g,`
`).replace(/<br>/g,`
`).replace(/<\/?span[^>]*>/g,"").replace(/style="background:#e6ffe6;"/g,"").replace(/style="background:#ffe6e6;"/g,"")}function xS(n){return!n||typeof n!="string"?n:n.replace(zge,"")}function Lp(n){return n.find(e=>!e.notMappedFile)}function Jk(n){let e=!1;if(n.length){const t=Math.min(n.reduce((i,s)=>s.context&&s.context.length>i?s.context.length:i,0)||0,30);n.forEach(i=>{i.context=DC(i.context||"",t),i.context.length<t&&(i.context=i.context.padEnd(t," ")),i.context.length&&(i.context+=" "),i.notMappedFile||(e=!0)})}return e}function QT(n){const e=n&&n.callStackNode&&n.props?.map((t,i)=>({...t.target,context:n.callStack?.context?.[i]}));if(e)return Jk(e),e}function IQ(n,...e){if(e.length<2)throw new Error("At least one path and a value are required");e.pop();const t=e,i=t.reduce((s,r)=>s?.[r],n);return t.reduceRight((s,r)=>({[r]:s}),i)}class p4{constructor(e,t){this.properties=t,this.sequenceNumber=1,this.awaitingPromises={},this.sendAcknowledgement=!0,this.remoteApiAcknowledgement=!0,this.onConnectedListeners=[],this.onVersionMismatchListeners=[],this.onDisposeListeners=[];const i=this;this.id=p4.nextId++,this._api=new Proxy({},{get:function(s,r){return async(...o)=>await i._sendInternal({method:r,args:o})}}),this.inboundApi=e(this)}static{this.nextId=0}get api(){return this._api}async processMethod(e,t,i){i?this.sendAcknowledgement&&e.sequenceNumber&&this.sendMessage({sequenceNumber:e.sequenceNumber,error:i}):this.sendAcknowledgement&&e.sequenceNumber&&this.sendMessage({sequenceNumber:e.sequenceNumber,result:{value:t}})}async processResult(e,t,i,s){t(s)}async processError(e,t,i,s){i(s)}async processMessageReceived(e){if(e.method)try{const t=await this.inboundApi[e.method].apply(this.inboundApi,e.args);await this.processMethod(e,t,void 0)}catch(t){t=t||new Error("An unknown error occurred"),await this.processMethod(e,void 0,t)}else if(e.result){const{sequenceNumber:t,result:i}=e;if(this.awaitingPromises[t]){const{resolve:s,reject:r}=this.awaitingPromises[t];delete this.awaitingPromises[t],s&&i&&await this.processResult(e,s,r,i.value)}}else if(e.error){const{sequenceNumber:t,error:i}=e;if(this.awaitingPromises[t]){const{resolve:s,reject:r}=this.awaitingPromises[t];delete this.awaitingPromises[t],s&&r&&await this.processError(e,s,r,i)}}}rejectAwaitingPromises(e){Object.values(this.awaitingPromises).forEach(({reject:t})=>t(e))}async onMessageReceived(e){this.processMessageReceived(e)}async _sendInternal(e){if(this.remoteApiAcknowledgement&&(this.remoteApiAcknowledgement===!0||this.remoteApiAcknowledgement(e)))return e.sequenceNumber=this.sequenceNumber++,await new Promise(async(i,s)=>{this.awaitingPromises[e.sequenceNumber]={resolve:i,reject:s};try{await this.sendMessage(e)}catch(r){delete this.awaitingPromises[e.sequenceNumber],s(r)}});try{await this.sendMessage(e)}catch{}}dispose(){this.onDisposeListeners.map(e=>e()),this.onDisposeListeners=[],this.onConnectedListeners=[],this.onVersionMismatchListeners=[],this.rejectAwaitingPromises(new Error("Channel disposed"))}subscribeOnConnected(e){this.onConnectedListeners.push(e)}unsubscribeOnConnected(e){this.onConnectedListeners=this.onConnectedListeners.filter(t=>t!==e)}connected(){this.onConnectedListeners.map(e=>e()),this.onConnectedListeners=[]}subscribeOnVersionMismatch(e){this.onVersionMismatchListeners.push(e)}unsubscribeOnVersionMismatch(e){this.onVersionMismatchListeners=this.onVersionMismatchListeners.filter(t=>t!==e)}versionMismatch(e,t){this.onVersionMismatchListeners.map(i=>i(e,t))}subscribeOnDispose(e){this.onDisposeListeners.push(e)}unsubscribeOnDispose(e){this.onDisposeListeners=this.onDisposeListeners.filter(t=>t!==e)}replaceReceiver(e){this._originalProcessMessageReceived||(this._originalProcessMessageReceived=this.processMessageReceived);let t=e.allowedCalls;this.processMessageReceived=i=>{if(e.filter(i)){if(t<=0)return e.replacement(i);t--}return this._originalProcessMessageReceived.bind(this)(i)}}restoreReceiver(){this.processMessageReceived=(this._originalProcessMessageReceived||this.processMessageReceived).bind(this),delete this._originalProcessMessageReceived}}class jge{constructor(e,t){this.inboundApiFactory=e,this.channelBaseConstructor=t,this._channels=[]}get channels(){return[...this._channels]}createChannel(e){const t=new this.channelBaseConstructor(this.inboundApiFactory,e);return this._channels.push(t),t.connected(),t}destroyChannel(e){const t=this._channels.indexOf(e);t!==-1&&this._channels.splice(t,1)[0].dispose()}dispose(){this.channels.map(e=>this.destroyChannel(e))}}function Jge(n,e){n.addEventListener("message",t=>{try{const i=JSON.parse(t.data.toString());e(i)}catch(i){console.error("incoming message processing error: %s",i?.message)}})}function $ge(n){return new Promise((e,t)=>{n.readyState===WebSocket.OPEN?e(n):n.readyState===WebSocket.CONNECTING?n.addEventListener("open",()=>{e(n)},{once:!0}):t(new Error("WebSocket is not in a state to send messages"))})}function Qge(n,e,t){const{isSecure:i,host:s,port:r,secret:o,onSocketClosedDueToError:a,onClose:l,clientType:c}=n,d=i?"wss://":"ws://",u=r?`:${r}`:"",h=o?`?secret=${o}`:"",f=c?h?`&clientType=${c}`:`?clientType=${c}`:"",g=new WebSocket(d+(s||"localhost")+u+h+f);return t&&Jge(g,t),g.onclose=({code:m,reason:p})=>{console.info("client disconnected: %s %s",m,p);try{l&&l(g,m,p?.toString())}catch(b){console.error("error when closing connection: %s",b?.message)}},g.onerror=m=>{try{console.error("connection error",m),a&&a(m)}catch(p){console.error("error when processing connection error: %s",p?.message)}},g.onopen=m=>{e(m)},g}class qge extends p4{started=!1;version="";onSocketError=()=>{};setOptions(e,t){this.onSocketError=e,this.version=t}async sendMessage(e){if(!this.properties){console.error("Channel has been disposed"),this.onSocketError(new Event("Channel has been disposed"));return}if(!this.started)try{await $ge(this.properties),this.started=!0}catch(i){console.error("WebSocket failed to become ready to send messages %s",i?.message),this.onSocketError(i);return}let t;try{e.version=this.version,t=JSON.stringify(e)}catch(i){console.error("failed to serialize message: %s",i?.message);return}try{this.properties.send(t)}catch(i){console.error("WebSocket send error: %s",i?.message),this.onSocketError(i)}}async processMethod(e,t,i){i&&console.error("error processing message: %s, %s",JSON.stringify(e),i?.stack),await super.processMethod(e,t,i)}async processError(e,t,i,s){s&&console.error("error processing message: %s, %s",JSON.stringify(e),s.toString()),await super.processError(e,t,i,s)}async processMessageReceived(e){await super.processMessageReceived(e)}}class MQ extends jge{ignoreErrorResults;onSocketError;constructor(e,t){super(t,qge),this.ignoreErrorResults=!!e.ignoreErrorResults,this.onSocketError=e.onSocketError||(s=>{this.channels.forEach(r=>{r.rejectAwaitingPromises(s),this.destroyChannel(r)})}),e.onSocketClosedDueToError||(e.onSocketClosedDueToError=s=>{this.channels.forEach(r=>{r.rejectAwaitingPromises(s),this.destroyChannel(r)})}),e.onClose||(e.onClose=(s,r,o)=>{this.channels.forEach(a=>{a.rejectAwaitingPromises(new Event(`WebSocket closed with code ${r} and reason ${o}`)),this.destroyChannel(a)})});const i=Qge(e,s=>{this.createChannel(i).setOptions(this.onSocketError,e.version)},s=>{this.channels.forEach(r=>{r.onMessageReceived(s)})})}async dispose(){this.channels.forEach(e=>{try{e.properties.readyState!==WebSocket.CLOSED&&e.properties.readyState!==WebSocket.CLOSING&&e.properties?.close()}catch(t){console.error("Error closing channel:",t)}}),await super.dispose()}}class Fo{_disposables;constructor(e){this._disposables=[],e&&this.add(e)}add(e){e.dispose?this._disposables.push(e):this._disposables.push({dispose:e})}dispose(){this._disposables.forEach(e=>e.dispose())}}let EQ,NQ;function eme(){const n=new Map;return[new Proxy({},{get:function(e,t){return function(i){let s=n.get(t);return s?s.push(i):(s=[i],n.set(t,s)),new Fo(()=>{let r=s.indexOf(i);for(;r>=0;)s.splice(r,1),r=s.indexOf(i)})}}}),new Proxy({},{get:function(e,t){return async(...i)=>{n.get(`on${t.charAt(0).toUpperCase()}${t.slice(1)}`)?.forEach(s=>{try{s(...i)}catch(r){console.error(r)}})}}})]}async function tme(n,e,t,i,s){const r=new Fo;let o,a,l=[t||(window.location.port?parseInt(window.location.port,10):void 0)];for(const c of l){const d=await new Promise(u=>{try{const h=new MQ({version:Ble,isSecure:n,host:e||"localhost",port:c,secret:i,onSocketError(f){console.log("Socket error",f)},onClose(){s?.onClose?.(),u(void 0)},onSocketClosedDueToError(){s?.onCloseDueToError?.(),u(void 0)}},f=>{const[g,m]=eme();return a=g,u({dispose:()=>h?.dispose(),instance:f}),m})}catch(h){console.error(h)}});if(d){r.add(d),o=d.instance.api;break}}return{disposable:r,appToCore:o,coreToApp:a}}async function dG(n,e,t,i,s){const r=await tme(n,e,t,i,s);return{appToCore:EQ,coreToApp:NQ}=r,r}const RQ=()=>EQ,[ime,U1]=Go(RQ),[nme,Y1]=Go(()=>NQ),sme=/^(?!(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$)[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*$/,rme=/^(0|[1-9][0-9]*)$/,ome=/'([^\\']|\\')*'/;function b4(n,e){return e?.reduce((t,i)=>{if(i.rangeNode){const s={...i,parent:void 0,cappedRange:void 0},r=i.id===n.id&&i.name===n.name;i.props?!i.props.length&&r||i.props.length&&!i.props[0].rangeNode?(s.props=!0,delete s.capped):s.props=b4(n,i.props):r&&(s.props=!0,delete s.capped),t.push(s)}return t},[])||[]}function ame(n,e){if(!n&&!e)return;if(!n)return e;if(!e)return n;const t=WQ(n.props,e.props);return{length:Math.max(n.length||0,e.length||0),props:t}}function WQ(n,e){if(!e||!e.length)return n;if(!n||!n.length)return e;const t=[...n];for(const i of e){const s=t.findIndex(r=>r.id===i.id&&r.name===i.name);if(s>=0){const r=t[s];if(r.props===!0)continue;i.props===!0?t[s]={...r,props:!0}:r.props&&i.props?t[s]={...r,props:WQ(r.props,i.props)}:i.props&&(t[s]={...r,props:i.props})}else return e}return t}function lme(n){if(n.error)return;if(n.type==="array")return n.length&&n.length>5?"Array("+n.length+")":"";const e=n.type;if(!e)return;const t=e.toLowerCase();return t==="function"?""+(n.funcName?" "+n.funcName:""):t==="string"||t==="number"||t==="symbol"||t==="object"||t==="null"||t==="undefined"||t==="boolean"||t==="date"||t==="regexp"?void 0:e}function AQ(n){return n.type==="array"?`Array(${n.length!==void 0?n.length:""})`:n.type}function FQ(n){return n?n.match(rme)?"["+n+"]":n.match(sme)?"."+n:n.match(ome)?"["+n+"]":"['"+n+"']":""}let fs=class{constructor(e={selection:{implicit:{}}},t){this._state=e,this._setState=t,this._appToCore=U1()}_appToCore;selectLog(e){this._setState(Gt(t=>{t.selection.log=e}))}showAsDiagram(e){this._setState("selection","diagram",e)}hideLogStackTrace(){this._state.logs&&this._setState(Gt(e=>{e.logs.stackTraceToShow=void 0}))}requestValues(e,t){e.path?this._setState(Gt(i=>{i.filesWithExpressionsToEvaluate=i.filesWithExpressionsToEvaluate||{files:{},expressions:{}};const s=e.path[0],r=cme(s),o=i.filesWithExpressionsToEvaluate.files[r]=i.filesWithExpressionsToEvaluate.files[r]||{};o[s]=!0;let a=i.filesWithExpressionsToEvaluate.expressions;for(const c of e.path)a[c]=a[c]||{},a=a[c];a.props=a.props||e.props,a.strLength=a.strLength||e.strLength;const l=a;if(l.ranges=ame(l.ranges,e.ranges),s.indexOf("#")>=0){const c=s.split("#")[0];o[c]=!0,i.filesWithExpressionsToEvaluate.expressions[c]=i.filesWithExpressionsToEvaluate.expressions[c]||{}}this._appToCore.requestValues(i.filesWithExpressionsToEvaluate.expressions,t.loc).then(c=>{!c&&this._state.logs&&this._state.logs.showStackTraceFor&&this._setState("logs","showStackTraceFor",void 0)})})):e.stackNode&&this.requestCallStackNode(e.stackNode,t)}requestCallStackNode(e,t){e.props?.length?this._setState(Gt(i=>{i.logs&&(i.logs.showStackTraceFor=void 0,i.logs.stackTraceToShow=QT(e))})):(this._setState(Gt(i=>{i.logs&&(i.logs.showStackTraceFor={logId:t.id,expressionToEvaluateKey:e.queryPath[0]})})),this.requestValues({path:e.queryPath},t),this._appToCore.featureUsed("callStack"))}requestLogEntryDetailsWithLargestAvailableValue(e,t,i){return this._appToCore.getLogEntryDetailsWithLargestAvailableValue(t,i).then(s=>{if(s){const r=s.watchExpressionId||s.id,o=O0(s,e);return this._state.logs?.items[o]?.logs[r]&&this._setState("logs","items",o,"logs",r,l=>({...l,value:s.value,valueWasRequestedShallow:!1})),s}})}copyValue(e){this._appToCore.copyValue(e)}dispose(){}static updateLogs(e,t,i,s,r){let o,a,l=0;const c=e.logs?.items?.watch?.logs,d=t.reduce((u,h)=>{const f=r?{...h,test:r}:h;f.order=l++;const g=O0(f),m=u[g]=u[g]||{test:f.test,watch:f.watchExpressionId?!0:void 0,logs:{}},p=f.watchExpressionId||f.id;m.logs[p]=f;let b;if(e.selection.implicit.log?e.selection.implicit.log===p&&(o={logOrExpressionId:p,logSource:g}):f.watchExpressionId&&!c?.[f.watchExpressionId]?(b=!0,o={logOrExpressionId:p,logSource:g}):i&&(!o||!o.logOrExpressionId)&&(i.logOrExpressionId===p?o={logOrExpressionId:p,logSource:g}:i.logSource===g&&(o={logSource:g})),e.selection.implicit.logs?.has(p)?f.selection={active:e.selection.implicit.log===p,marked:!0}:b&&(f.selection={active:!0,marked:!0}),s){const w=f.value.id;if(f.id===s.logId&&w){if(s.expressionToEvaluateKey===w)a=QT(f.value.props?.[0]);else if(w.split(",valueContainer")[0]===s.expressionToEvaluateKey.split("#")[0]){const v=parseInt(s.expressionToEvaluateKey.split("#")[1],10);a=QT(f.value.props?.[0]?.props?.[v]?.props?.[0])}}}return u},{});if(!o){const u=Object.keys(d)[0];if(u){const h=d[u].logs,f=Object.keys(h)[0];f&&(o={logOrExpressionId:f,logSource:u})}}return{selected:o,items:d,stackTraceToShow:a}}static updateLogsSelection(e,t,i,s){let r=!1;if(i){const o=i.length>0?i[0]:void 0;let a;const l=e.selection.implicit.logs||new Set,c=new Set(i);if(e.logs){const d=Object.values(e.logs?.items||{}).reduce((u,h)=>{for(const f of Object.values(h.logs))u[f.id]=f,f.watchExpressionId&&(u[f.watchExpressionId]=f);return u},{});if(l.forEach(u=>{const h=d[u];h&&t("logs","items",O0(h),"logs",h.watchExpressionId||h.id,f=>({...f,selection:void 0}))}),c.forEach(u=>{const h=d[u];h?t("logs","items",O0(h),"logs",h.watchExpressionId||h.id,f=>({...f,selection:{active:u===o&&!s?.markOnly,marked:!0}})):r=!0}),o){const u=d[o];a=u&&O0(u)}}else r=!0;t("selection",Gt(d=>{s?.markOnly||(d.log=o&&a?{logOrExpressionId:o,logSource:a}:void 0,d.implicit.log=o,d.diagram=s?.diagram&&d.log?{...d.log}:void 0),d.implicit.logs=c}))}return r}static resetExpressionsToEvaluate(e,t){if(e.filesWithExpressionsToEvaluate)if(!t)e.filesWithExpressionsToEvaluate={files:{},expressions:{}};else for(const i of t){const s=e.filesWithExpressionsToEvaluate.files[i];if(s){delete e.filesWithExpressionsToEvaluate.files[i];for(const r of Object.keys(s))delete e.filesWithExpressionsToEvaluate.expressions[r]}}}static Provider};function O0(n,e){return n.watchExpressionId?"watch":e||n.test?.id||"global"}function cme(n){return n.split(",")[0]}const[dme,Bg]=Go(n=>n.initial);fs.Provider=dme;function Jm(n){const e=new fs(n.state(n.parent),n.setState);return Ot(()=>e.dispose()),x(fs.Provider,{initial:e,get children(){return n.view({state:n.parent})}})}var ume=bQ(()=>{const[n,e]=he(null);return vQ(window,"keydown",t=>{e(t),setTimeout(()=>e(null))}),n});function hme(n){const e=jk();$e(bge(),d=>{if(d&&d.key==="f"&&fr(d)){if(c(d)){const u=d.target;if(u?.hasAttribute("data-namespace")){const h=u.getAttribute("data-namespace");if(h){n.onKeyPress(d,h);return}}}e.isIntegratedOverview()&&(d.preventDefault(),d.stopPropagation())}}),$e(ume(),d=>{if(d&&c(d)){let u=null;const h=d.target;h?.hasAttribute("data-namespace")?(u=h.getAttribute("data-namespace"),u&&(d.key!==i?n.onKeyPress(d,u):(e.showShortcuts(u),d.preventDefault(),d.stopPropagation()))):d.target===window.document.body&&n.onFocus()}});const t="g",i="?",s=e.isStandalone()?2e3:1e3;let r,o;const a=5e3;let l;function c(d){if(e.isIntegratedVSCode()){if(d.key==="k"&&(d.ctrlKey||d.metaKey))return l?l=void 0:l=Date.now(),!1;if(d.key!=="Control"&&d.key!=="Meta"&&d.key!=="Alt"&&d.key!=="Shift"){const h=l;if(l=void 0,h&&Date.now()-h<a)return!1}else if(l)return!1}const u=window.document.activeElement;if(u?.nodeName!=="INPUT"&&u?.nodeName!=="TEXTAREA"&&u?.type!=="text"){const h=rt(d);if(d.key===t&&!h&&!r)return r=Date.now(),o=void 0,d.preventDefault(),d.stopPropagation(),!1;{let f,g;if(h||(f=r,r=void 0,g=o,o=void 0),f&&Date.now()-f<s&&!h)if(e.isStandalone()){if(g)return g==="o"?n.onKeyPress(d,"overview"):g==="s"&&n.onKeyPress(d,"details"),d.preventDefault(),d.stopPropagation(),!1;if(d.key==="o"||d.key==="s")return r=Date.now(),o=d.key,d.preventDefault(),d.stopPropagation(),!1}else{if(e.isIntegratedOverview()||e.isIntegratedSideView()||e.isIntegratedQuokkaOutput())return d.key==="o"&&e.isIntegratedSideView()?(e.focus("overview"),d.preventDefault(),d.stopPropagation(),!1):d.key==="s"&&e.isIntegratedOverview()?(e.focus("side-view"),d.preventDefault(),d.stopPropagation(),!1):(e.isIntegratedOverview()?n.onKeyPress(d,"overview"):e.isIntegratedSideView()?n.onKeyPress(d,"details"):e.isIntegratedQuokkaOutput()&&n.onKeyPress(d,"quokka.output"),!1);if(e.isIntegratedNinja())return n.onKeyPress(d,"console-ninja.panel"),!1}}}else if(d.key===i)return!1;return!0}return[]}function fme(n,e){return qb(n)?new Ga(t=>$e(n,i=>t.next(i),e)):Cce(n)}function gme(n){return{next:e=>{n(()=>e)}}}function VQ(n){e0(()=>{n.unsubscribe()})}var mme=G("<span class=pr-0.5>"),pme=G('<span class="codicon codicon-eye icon-opacity cursor-default !px-0 pb-[0.0625rem] align-middle !text-[length:--icon-font-size] !text-[--foreground] hover:brightness-125">'),bme=G("<span><span>");class vme extends CustomEvent{constructor(e){super("previewSourceLinkInEditor"),this.keyboardEvent=e}}function fh(n){const[e,t]=he();Fi(()=>{t(n.classList)});const i=LQ(),s=J(()=>{if(n.codeFragmentTooltipOptions){const r=n.codeFragmentTooltipOptions();if(r)return{...r,options:n.options}}});return(()=>{var r=bme(),o=r.firstChild;return o.$$click=a=>{i.navigate(n.value,a,n.options),n.preventClickDefault&&(a.preventDefault(),a.stopPropagation())},o.addEventListener("previewSourceLinkInEditor",a=>i.navigate(n.value,a.keyboardEvent,{...n.options||{},focus:!1})),A(o,x(se,{get when(){return!n.lineAndColumnOnly},get children(){return J(()=>!!n.compactFileNameOnly)()?Dh(n.value.file):Yge(n.value.file)}}),null),A(o,x(se,{get when(){return n.value.line!==void 0},get children(){var a=mme();return A(a,()=>n.lineAndColumnOnly?"":":",null),A(a,()=>n.value.line,null),A(a,()=>n.noColumn?"":n.value.column!==void 0?`:${n.value.column+1}`:":1",null),a}}),null),A(r,x(se,{get when(){return n.value.line!==void 0},get children(){var a=pme();return We(M_,a,()=>M_&&s()),A(a,()=>n.textModeOptions?.addSpace?" ":""),Me(l=>{var c=n.id,d=n.textModeOptions?n.textModeOptions.contentEditable:!1;return c!==l.e&&xt(a,"data-id",l.e=c),d!==l.t&&xt(a,"contenteditable",l.t=d),l},{e:void 0,t:void 0}),a}}),null),Me(a=>{var l=n.class||"source-link hover:underline",c=e();return l!==a.e&&mr(o,a.e=l),a.t=nn(o,c,a.t),a},{e:void 0,t:void 0}),r})()}dn(["click"]);class $k{constructor(e,t){this._namespace=e,this._appService=t}matches(e){return e.startsWith(this._namespace)}handle(e,t,i){if(e=this._narrow(e),!t.target)return;const s=t.target,r=a=>{t.preventDefault(),t.stopPropagation()};if(H1(t))return r();const o=this._locateErrorsElement(e,s);if(t.key==="Escape"&&!rt(t)&&this._appService.getFindState()()?.namespace===this._namespace)return this._appService.closeFind(),r(o?.focus());if(t.key==="f"&&fr(t)||t.key==="/"&&!rt(t))return r(this._appService.showFind(this._namespace));if(e.startsWith("diff")){if(e.startsWith("diff")){if(t.key==="Escape"&&!rt(t)){if(e==="diff"||e==="diff.content")return o?.focus();if(e==="diff.header.action")return r(this._locateDiffEditorElement(s)?.focus())}if(t.key==="ArrowUp"&&!rt(t)){if(e==="diff"||e==="diff.content")return o?.focus();if(e==="diff.header.action")return o?.focus()}if(t.key==="ArrowDown"&&!rt(t))return r(this._locateDiffEditorElement(s)?.focus())}}else if(o){const a=document.getSelection();if(e==="."||e==="content")return r(o.focus());if(e==="header.action"){if((t.key==="ArrowDown"||t.key==="ArrowUp")&&!rt(t)||t.key==="Escape"&&!rt(t))return r(o.focus())}else if(e.endsWith("error.action")){if((t.key==="ArrowUp"||t.key==="ArrowDown"||t.key=="Escape")&&!rt(t))return r(o.focus());if((t.key==="ArrowRight"||t.key==="ArrowLeft")&&!rt(t)){const l=this._locateErrorElement(a?.anchorNode?.parentElement);if(l)return r(this._selectItemAction(l,s,t.key==="ArrowRight"))}else if(t.key==="Enter"||t.key===" ")return r(s.dispatchEvent(hh(t)))}else if(e==="content.viewer"&&t.key!=="ArrowDown"&&t.key!=="ArrowUp"&&t.key!=="ArrowLeft"&&t.key!=="ArrowRight"){if(t.key==="Home"||t.key==="End"){if(db&&fr(t)){if(a){const c=t.key==="Home"?o.firstElementChild:o.lastElementChild;if(c){const d=t.key==="Home"?c:qT(c);a.setPosition(d,t.key==="Home"?0:1);const u=o.parentElement?.parentElement;u&&(u.scrollTop=d.offsetTop)}}return r()}return}if((t.key==="PageUp"||t.key==="PageDown")&&!rt(t)){if(db||this._appService.isIntegratedVSCode()){const c=o.parentElement?.parentElement;if(c&&a){const u=c.getBoundingClientRect().height,h=o.getBoundingClientRect().height;if(u>=h){const f=t.key==="PageUp"?o.firstElementChild:o.lastElementChild;if(f){const g=t.key==="PageUp"?f:qT(f);a.setPosition(g,t.key==="PageUp"?0:1),c&&(c.scrollTop=g.offsetTop)}}else{const f=u/2,g=c.scrollTop;c.scrollTop+=t.key==="PageUp"?-f:f;const m=_me(c);if(m)if(m===o.parentElement)a.setPosition(o.firstElementChild);else if(g!==0&&g===c.scrollTop)if(o.lastElementChild){const p=qT(o.lastElementChild);p?a.setPosition(p,1):a.setPosition(m)}else a.setPosition(m);else a.setPosition(m)}}return r()}return}if(t.key===" ")return r(this._navigate(i,t,a,!1));if(t.key==="Enter"){const c=this._isAction(a);return c?c.lastElementChild?.dispatchEvent(hh(t)):(this._navigate(i,t,a,!0),a?.anchorNode?.parentElement?.dispatchEvent(hh(t))),r()}if(t.key==="e"&&!rt(t))return r(this._navigate(i,t,a,!0,!0));let l=this._locateErrorElement(a?.anchorNode?.parentElement);if(l||(l=this._locateErrorElement(o)),t.key==="Tab"&&!rt(t)&&!this._appService.isIntegratedQuokkaOutput()&&l)return r(this._selectItemAction(l,null,!1));if(t.key==="f"&&!rt(t)&&l&&!this._appService.getDebuggerStarted()()){const c=this._getError(i,l);if(c&&c.test)return r(this._appService.toggleTestFilter(c.test.path))}if(t.key==="d"&&!rt(t)&&l&&!this._appService.getDebuggerStarted()()){const c=this._getError(i,l);if(c&&c.test)return r(this._appService.debug(c.test.path))}if(t.key==="p"&&!rt(t)&&l&&!this._appService.getDebuggerStarted()()){const c=this._getError(i,l);if(c&&c.test)return r(this._appService.profile(c.test.path))}if(t.key==="u"&&!rt(t)&&l){const c=this._getError(i,l),d=c&&Lp(c.stack);if(c&&c.snapshot&&d?.file)return r(this._appService.updateSnapshots(d))}if(t.key==="v"&&!rt(t)&&l)return r(this._navigateToDiff(l,t,i));if(t.key==="s"&&!rt(t)&&this._namespace.startsWith("overview")&&l){const c=this._getError(i,l);if(c&&c.id)return r(this._appService.openInSideView(Zt.Errors,{errors:{selection:{errorId:c?.id}}}))}if(t.key==="s"&&!rt(t)&&this._namespace.startsWith("details")&&l){const c=this._getError(i,l);if(c&&c.id)return i.selection.error?r(this._appService.openInSideView(Zt.Errors,{})):r(this._appService.openInSideView(Zt.Errors,{errors:{selection:{errorId:c?.id}}}))}if(t.key==="."&&!rt(t)){const c=this._isSourceLink(a);if(c){const d=c.getBoundingClientRect();d&&c.parentElement?.lastChild?.dispatchEvent(new CustomEvent("showCodeFragment",{detail:d}))}else if(l){const d=this._getError(i,l);if(d){const u=Lp(d.stack);u&&I_(a?.anchorNode?.parentElement||l,u)}}return r()}if(t.key==="Escape"&&!rt(t))return a&&!a?.isCollapsed?a?.collapseToEnd():this._appService.focus("editor"),r();if(!y9(t))return r()}}else if(e==="."||e==="content"){if(t.key==="Escape"&&!rt(t))return r(this._appService.focus("editor"))}else if(e==="header.action"&&t.key==="Escape"&&!rt(t)){let a=s.closest(`[data-namespace="${this._namespace}"]`);if(a||(a=s.parentElement?.parentElement?.nextElementSibling?.querySelector(`[data-namespace="${this._namespace}"]`),a))return r(a.focus())}}_getError(e,t){const i=t.getAttribute("data-id")||"";return e.errors?.allById?.[i]}_narrow(e){return e=e.replace(`${this._namespace}.`,""),e=e.replace(this._namespace,"."),e}_navigate(e,t,i,s,r=!1){if(i&&e.errors){const o=this._locateErrorElement(i.anchorNode?.parentElement);if(o)if(r)this._navigateToError(o,t,e,s);else{const a=this._isSourceLink(i);s?a?i?.anchorNode?.parentElement?.dispatchEvent(new MouseEvent("click")):this._isTestName(i)?this._navigateToTest(o,t,e,s):this._navigateToError(o,t,e,s):a?a.dispatchEvent(new vme(t)):this._isTestName(i)?this._navigateToTest(o,t,e,s):this._navigateToError(o,t,e,s)}}}_navigateToDiff(e,t,i){const s=this._getError(i,e);if(s&&s.test&&s.id&&(s.actual||s.expected))return this._appService.showSideBySideDiff({id:s.id,test:s.test.path,expected:s.expected,actual:s.actual},t)}_navigateToTest(e,t,i,s){const r=this._getError(i,e);r&&r.test&&r.test.location&&this._appService.navigate(r.test.location,t,{focus:s})}_navigateToError(e,t,i,s){const r=this._getError(i,e),o=r&&Lp(r.stack);r&&o&&o.file&&this._appService.navigate({file:o.file,line:o.line,column:o.column},t,{focus:s})}_isTestName(e){return e.anchorNode?.parentElement?.getAttribute("aria-role")==="test name"}_isAction(e){if(!e)return;const t=e.anchorNode?.parentElement;if(t)return t.getAttribute("aria-role")==="action"?t:t.closest('[aria-role="action"]')}_isSourceLink(e){if(!e)return;const t=s=>s?.classList.contains("source-link");let i=e.anchorNode?.parentElement;return t(i)?i:t(i?.parentElement)?i?.parentElement:void 0}_locateErrorsElement(e,t){if(e==="content.viewer")return t;if(e==="."||e==="content")return t.querySelector(`[data-namespace="${this._namespace}.content.viewer"]`);if(e==="header.action"){let i=t.closest(`[data-namespace="${this._namespace}"]`);return i?i.querySelector(`[data-namespace="${this._namespace}.content.viewer"]`):t.parentElement?.parentElement?.nextElementSibling?.querySelector(`[data-namespace="${this._namespace}.content.viewer"]`)}if(e.endsWith("error.action"))return t.parentElement?.parentElement?.parentElement?.parentElement;if(e.startsWith("diff"))for(;t;){if(t.getAttribute("data-namespace")===`${this._namespace}`)return t.querySelector(`[data-namespace="${this._namespace}.content.viewer"]`);t=t.parentElement}}_locateErrorElement(e){let t=e?.getAttribute("data-namespace")===`${this._namespace}.content.viewer`?e:null;if(t=t||e?.querySelector(`[data-namespace="${this._namespace}.content.viewer"]`),t)return e=t.querySelector("[data-id]"),e;for(;e;){if(e.getAttribute("data-id"))return e;e=e.parentElement}return null}_locateDiffEditorElement(e){for(;e;){if(e.getAttribute("data-namespace")===`${this._namespace}`){const t=e.querySelectorAll("textarea");return t.length?t[t.length-1]:void 0}e=e.parentElement}}_selectItemAction(e,t,i){const s=e.querySelectorAll("button");if(s.length){let r=-1;if(t){for(let o=0;o<s.length;o++)if(s[o]===t){r=o;break}}else return s[0].focus(),!0;return r=r>=0?r:0,i?(r+1>s.length-1||s[r+1].focus(),!0):r-1>=0?(s[r-1].focus(),!0):!1}return!1}}function qT(n){let e=n.lastElementChild;for(;e&&e.nodeType===Node.ELEMENT_NODE&&e.lastElementChild;)e=e.lastElementChild;return e}function _me(n){const e=n.getBoundingClientRect();for(let t=0;t<n.children.length;t++){const i=n.children[t],s=PQ(e,i);if(s)return s}return null}function PQ(n,e){const t=e.getBoundingClientRect();if(t.top>=n.top&&t.bottom<=n.bottom)return e;for(let i=0;i<e.children.length;i++){const s=e.children[i],r=PQ(n,s);if(r)return r}return null}var eD=Symbol("fallback");function uG(n){for(const e of n)e.dispose()}function wme(n,e,t,i={}){const s=new Map;return Ot(()=>uG(s.values())),()=>{const o=n()||[];return o[mg],Qn(()=>{if(!o.length)return uG(s.values()),s.clear(),i.fallback?[Kr(u=>(s.set(eD,{dispose:u}),i.fallback()))]:[];const a=new Array(o.length),l=s.get(eD);if(!s.size||l){l?.dispose(),s.delete(eD);for(let d=0;d<o.length;d++){const u=o[d],h=e(u,d);r(a,u,d,h)}return a}const c=new Set(s.keys());for(let d=0;d<o.length;d++){const u=o[d],h=e(u,d);c.delete(h);const f=s.get(h);f?(a[d]=f.mapped,f.setIndex?.(d),f.setItem(()=>u)):r(a,u,d,h)}for(const d of c)s.get(d)?.dispose(),s.delete(d);return a})};function r(o,a,l,c){Kr(d=>{const[u,h]=he(a),f={setItem:h,dispose:d};if(t.length>1){const[g,m]=he(l);f.setIndex=m,f.mapped=t(u,g)}else f.mapped=t(u);s.set(c,f),o[l]=f.mapped})}}function yd(n){const{by:e}=n;return J(wme(()=>n.each,typeof e=="function"?e:t=>t[e],n.children,"fallback"in n?{fallback:()=>n.fallback}:void 0))}function yme(n){const e=n.children;return J(WJ(()=>n.of&&Object.keys(n.of),e.length<3?t=>e(t,()=>n.of[t]):(t,i)=>e(t,()=>n.of[t],i),"fallback"in n?{fallback:()=>n.fallback}:void 0))}var yg=(n,e)=>{let t;const i=()=>clearTimeout(t);return Zo()&&Ot(i),Object.assign((...r)=>{t!==void 0&&i(),t=setTimeout(()=>n(...r),e)},{clear:i})},Sme=(n,e)=>{let t=!1,i,s;const r=(...a)=>{s=a,!t&&(t=!0,i=setTimeout(()=>{n(...s),t=!1},e))},o=()=>{clearTimeout(i),t=!1};return Zo()&&Ot(o),Object.assign(r,{clear:o})},Cme=window.requestIdleCallback?(n,e)=>{let t=!1,i,s;const r=(...a)=>{s=a,!t&&(t=!0,i=requestIdleCallback(()=>{n(...s),t=!1},{timeout:e}))},o=()=>{cancelIdleCallback(i),t=!1};return Zo()&&Ot(o),Object.assign(r,{clear:o})}:n=>Sme(n),Lme=G("<span>"),kme=G("<span class=test-name-separator> / ");function v4(n){const e=J(()=>DQ(n.test.path));return x(ln,{get each(){return e()},children:(t,i)=>[(()=>{var s=Lme();return A(s,t),s})(),x(se,{get when(){return i()!==e().length-1},get children(){return kme()}})]})}var xme=G('<div class="pointer-events-none absolute bottom-0 left-0 right-0 top-0 overflow-x-hidden overflow-y-hidden"><div class="codicon codicon-kebab-vertical pointer-events-auto absolute z-10 cursor-pointer !text-[length:--panel-larger-font-size] opacity-25">');function Tme(n){const e=Bg(),[t,i]=he(),[s,r]=he(!1),[o,a]=he({x:0,y:0}),[l,c]=he(!1),d=1,u=20,h=3;let f,g,m,p,b=Date.now(),w=0,v=0,_=null;const[y,C]=he(()=>zt());Bn(()=>{g=f.parentElement,g.addEventListener("mousemove",S),g.addEventListener("mousedown",B),g.addEventListener("mouseup",Y),g.addEventListener("mouseenter",xe),g.addEventListener("mouseleave",z),g.addEventListener("contextmenu",E),g.addEventListener("scroll",M),g.addEventListener(hb.name,H),g.addEventListener(K1.name,U),g.addEventListener(fb.name,ne),g.addEventListener(gb.name,ee),g.addEventListener("focusin",$),g.addEventListener("focusout",ge),document.addEventListener("selectionchange",N),window.addEventListener("blur",Ie),_=new ResizeObserver(()=>De()),_.observe(g)}),Ot(()=>{g.removeEventListener("mousemove",S),g.removeEventListener("mousedown",B),g.removeEventListener("mouseup",Y),g.removeEventListener("mouseenter",xe),g.removeEventListener("mouseleave",z),g.removeEventListener("contextmenu",E),g.removeEventListener("scroll",M),g.removeEventListener(hb.name,H),g.removeEventListener(fb.name,ne),g.removeEventListener(gb.name,ee),g.removeEventListener("focusin",$),g.removeEventListener("focusout",ge),document.removeEventListener("selectionchange",N),window.removeEventListener("blur",Ie),_?.disconnect()});function S(Fe){if(l()||b>Date.now())return;const re=Fe.target;if(!re||re===t()||T())return;const ie=re.closest(".logentry")||re.closest(".preview");if(ie){K(ie,Fe.clientY);return}k();const de=document.elementFromPoint(v,Fe.clientY),Z=de?.closest(".logentry");Z?K(Z,Fe.clientY):de&&I(de,Fe.clientY)&&Se()}function k(){if(!w){const Fe=g.querySelector(".content");Fe&&(w=parseFloat(getComputedStyle(Fe).marginLeft),v=Fe.getBoundingClientRect().x)}}function I(Fe,re){const ie=Fe.lastElementChild?.lastElementChild;if(!ie||ie.parentElement?.querySelector("br")?.className==="hidden"||ie.previousElementSibling?.classList.contains("level-expander-ellipsis"))return!1;const Z=ie.getBoundingClientRect(),O=Math.floor(Z.y)-h,q=Math.ceil(Z.y+Z.height);return re>=O&&re<=q}function T(){return g.querySelector(":scope>.item.editable")}function D(Fe){return Fe instanceof HTMLElement&&(g.contains(Fe)||!!Fe.closest(".tippy-box"))}function M(){Se()}function E(Fe){Fe.preventDefault(),Fe.stopPropagation()}function W(Fe){Fe.preventDefault(),Fe.stopPropagation()}function P(Fe){je(Fe),m&&c(!0)}function N(){const Fe=document.getSelection(),re=Fe?.anchorNode;if(!re||!Fe.isCollapsed)return;const ie=re.nodeType===Node.ELEMENT_NODE?re:re.parentElement;if(!ie||!ke(ie))return;k();const de=ie.closest(".logentry")??ie.closest(".preview");K(de,ie.getBoundingClientRect().y)}function H(Fe){N()}function U(Fe){m?.closest(".item")===Fe.target&&Se()}function B(){p=m}function Y(Fe){Fe.button===2&&(Fe.preventDefault(),Fe.stopPropagation(),m===p&&P(Fe))}function ne(Fe){je(Fe);const re=mt(m);re?.noCopyReason?.()||ze(re,ie=>e.copyValue(ie))}function ee(Fe){je(Fe),ht(mt(m),m,re=>e.copyValue(re))}function $(Fe){const re=Fe.target;!m&&re&&g.contains(re)&&re.classList.contains("item")&&K(re,-1)}function ge(Fe){D(Fe.relatedTarget)||(Se(),c(!1))}function Ie(){Se(),c(!1)}function xe(){C(void 0)}function z(Fe){!l()&&!D(Fe.relatedTarget)&&!T()&&Se(),D(Fe.relatedTarget)||C(()=>zt)}function K(Fe,re){if(!Fe||Fe.classList.contains("group-item")||I(Fe,re)){Se();return}if(m=Fe,Fe.className==="logentry"){const ie=Fe.getBoundingClientRect();let de,Z=!1;const O=document.elementFromPoint(v,ie.y);if(O?.className==="indentation"){const q=O.parentElement?.querySelectorAll(":scope>.indentation"),Q=q?.[q.length-1];Q&&(de=Q.getBoundingClientRect(),Z=q.length===1)}if(de){const q=t().clientWidth,Q=f.getBoundingClientRect();k(),a({x:Z?de.x-(w+q)/2-Q.x:de.x-(de.width+q-d)/2-Q.x,y:ie.y-Q.y}),r(!0)}}else r(!1)}function Se(){m=void 0,r(!1)}function De(){w=0,v=0}function ke(Fe){return Fe.closest(".item")?.classList.contains("editable")}function je(Fe){return et(Fe.target)}function et(Fe){if(!s()&&Fe){const re=Fe?.closest(".item");re&&K(re,-1)}}function mt(Fe){if(!Fe)return;const re=Fe.closest(".preview");return re?re.closest(".item")?.entryInfo:Fe.entryInfo}function ze(Fe,re){Fe?.value().then(ie=>ie&&re(ie))}function ht(Fe,re,ie){if(!Fe)return;const de=Fe.isRoot?Fe.rootContext?.():re.closest(".item").entryInfo?.rootContext?.();ze(Fe,Z=>{const O=(de?[de]:["root"]).concat(Z.queryPath?.slice(1).map(q=>q.startsWith("_p_")?q.substring(3):q).map(q=>FQ(q))||[]).join("");O&&ie(O)})}function nt(){const Fe=m,re=mt(Fe);if(!re)return[];const ie=()=>{ze(re,O=>e.copyValue(O)),b=Date.now()+u},de=()=>{ht(re,Fe,O=>e.copyValue(O)),b=Date.now()+u},Z=re.noCopyReason?.();return[Z?{text:Z}:{text:"Copy value",action:ie,shortcut:"Shift+C"},{text:"Copy path",action:de,shortcut:"Shift+D"}]}function zt(){const Fe=g.getBoundingClientRect();return[Math.max(Fe.x+g.clientWidth/2-200,Fe.x+50),Math.max(Fe.y+g.clientHeight/2-50,Fe.y+50)]}return(()=>{var Fe=xme(),re=Fe.firstChild;return We(xh,Fe,()=>xh&&{menuItemFactory:nt,menuOpen:[l,c],menuPositionOverride:y,keyboardTrigger:{namespace:n.namespace,beforeOpen:(ie,de)=>{const Z=de.querySelector(".selected")||de.querySelector(".item");return et(Z),!!m}}}),We(ie=>f=ie,Fe),We(Te,re,()=>Te&&{defaultDelay:2e3,shortDelay:2e3,content:`
            <table class="keyboard-shortcut-tooltip-table">
              <tr><td>Copy value</td><td><span class="kbd">Shift</span> + <span class="kbd">C</span></td></tr>
              <tr><td>Copy path</td><td><span class="kbd">Shift</span> + <span class="kbd">D</span></td></tr>
              <tr>
                <td>Context menu</td>
                <td>
                  <span class="kbd">Shift</span> + <span class="kbd">F10</span> or
                  <br />
                  <span class="keyboard-shortcut">${Hr}</span> + <span class="kbd">.</span>
                </td>
              </tr>
            </table>`}),re.$$click=ie=>{c(!0)},re.$$mousedown=W,We(i,re),Me(ie=>{var de=`${o().x}px`,Z=`${o().y}px`,O=s()?"visible":"hidden";return de!==ie.e&&((ie.e=de)!=null?re.style.setProperty("left",de):re.style.removeProperty("left")),Z!==ie.t&&((ie.t=Z)!=null?re.style.setProperty("top",Z):re.style.removeProperty("top")),O!==ie.a&&((ie.a=O)!=null?re.style.setProperty("visibility",O):re.style.removeProperty("visibility")),ie},{e:void 0,t:void 0,a:void 0}),Fe})()}class hb extends CustomEvent{static name="enteredtextmode";constructor(){super(hb.name,{bubbles:!0})}}class K1 extends CustomEvent{static name="exitedtextmode";constructor(){super(K1.name,{bubbles:!0})}}class fb extends CustomEvent{static name="copyvaluerequested";constructor(){super(fb.name,{bubbles:!0})}}class gb extends CustomEvent{static name="copypathrequested";constructor(){super(gb.name,{bubbles:!0})}}dn(["mousedown","click"]);class Dme{listeners={};onceListeners={};on(e,t){this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t)}once(e,t){this.onceListeners[e]||(this.onceListeners[e]=new Set),this.onceListeners[e].add(t)}off(e,t){this.listeners[e]?.delete(t),this.listeners[e]?.size===0&&delete this.listeners[e],this.onceListeners[e]?.delete(t),this.onceListeners[e]?.size===0&&delete this.onceListeners[e]}emit(e,t){const i=this.listeners[e];i&&[...i].forEach(r=>r(t));const s=this.onceListeners[e];s&&[...s].forEach(r=>{r(t),this.off(e,r)})}}class Ime extends Dme{}let hG=!1,fG=new Set,tD;async function gG(n,e){await Mme();const t=document.querySelector(":root");n&&t&&await Eme(n,t),_$(n?.theme?.type||"dark")}async function Mme(){hG||(hG=!0,await Oa(()=>Promise.resolve({}),__vite__mapDeps([1]),import.meta.url))}async function Eme(n,e){const t=e.style,i=new Set;function s(l,c){if(!c)return;const d=`--intellij-${l}`;t.setProperty(d,c),i.add(d)}const r=n.theme?.ui;if(r)for(const l of Object.keys(r))s(l,r[l]);const o=n.theme?.code;if(o){!o.tokenDiffInserted&&r?.diffInserted&&(o.tokenDiffInserted={foreground:r.diffInserted}),!o.tokenDiffDeleted&&r?.diffDeleted&&(o.tokenDiffDeleted={foreground:r.diffDeleted});for(const c of Object.keys(o)){const d=o[c];d&&(d.foreground&&s(`${c}-foreground`,d.foreground),d.background&&s(`${c}-background`,d.background),s(`${c}-style`,d.style==="italic"?"italic":"normal"))}const l={};for(const[c,d]of Wme.entries())if(o[c])for(const u of d)l[u]=o[c];tD||(tD=(await Oa(()=>Promise.resolve().then(()=>tx),void 0,import.meta.url)).customize),await tD(l)}const a=n.settings;if(a){let l=function(d,u){const h=a[d];h&&s(d,u?u(h):h)};l("editorFontFamily"),l("editorFontLigatures"),Nme(a.editorFontFamily,a.editorFontPsName);const c=a.fontSize;if(c){const d=parseInt(c,10);d>0?t.setProperty("--panel-font-size",`${d}px`):t.removeProperty("--panel-font-size")}else t.removeProperty("--panel-font-size")}for(const l of[...fG].filter(c=>!i.has(c)))t.removeProperty(l);fG=i}function Nme(n,e){const t=`
      @font-face {
          font-family: '${n}';
          src: url('fonts/${e}');
      }
  `;Rme(t,"intellij-font-face")}function Rme(n,e){let t=document.getElementById(e);t||(t=document.createElement("style"),t.id=e,document.head.appendChild(t)),t.textContent=n}const Wme=new Map([["tokenDiffInserted",["markup.inserted"]],["tokenDiffDeleted",["markup.deleted"]],["tokenKeyword",["constant.language","entity.name.tag","markup.bold","markup.heading","markup.changed","meta.preprocessor","entity.name.function.preprocessor","meta.diff.header","storage","storage.type","storage.modifier","keyword.operator.noexcept","punctuation.definition.template-expression.begin","punctuation.definition.template-expression.end","punctuation.section.embedded","keyword","keyword.operator.new","keyword.operator.expression","keyword.operator.cast","keyword.operator.sizeof","keyword.operator.alignof","keyword.operator.typeid","keyword.operator.alignas","keyword.operator.instanceof","keyword.operator.logical.python","keyword.operator.wordlike","punctuation.section.embedded.begin.php","punctuation.section.embedded.end.php","variable.language","constant.character","constant.other.option"]],["tokenNumber",["constant.numeric","keyword.operator.plus.exponent","keyword.operator.minus.exponent","meta.preprocessor.numeric","keyword.other.unit","constant.sha.git-rebase"]],["tokenString",["markup.inline.raw","meta.preprocessor.string","string","meta.embedded.assembly","string.tag","string.value","support.constant.property-value","support.constant.font-name","support.constant.media-type","support.constant.media","constant.other.color.rgb-value","constant.other.rgb-value","support.constant.color","punctuation.definition.group.regexp","punctuation.definition.group.assertion.regexp","punctuation.definition.character-class.regexp","punctuation.character.set.begin.regexp","punctuation.character.set.end.regexp","keyword.operator.negation.regexp","support.other.parenthesis.regexp"]],["tokenComment",["comment","punctuation.definition.quote.begin.markdown"]],["tokenRegexp",["string.regexp","constant.character.character-class.regexp","constant.other.character-class.set.regexp","constant.other.character-class.regexp","constant.character.set.regexp"]],["#D4D4D4",["meta.embedded","source.groovy.embedded","string meta.image.inline.markdown","variable.legacy.builtin.python","meta.template.expression","keyword.operator","storage.modifier.import.java","variable.language.wildcard.java","storage.modifier.package.java"]],["#000080",["header"]],["#4FC1FF",["variable.other.enummember","variable.other.constant"]],["#646695",["constant.regexp"]],["#D7BA7D",["entity.name.tag.css","entity.name.tag.less","entity.other.attribute-name.class.css","source.css entity.other.attribute-name.class","entity.other.attribute-name.id.css","entity.other.attribute-name.parent-selector.css","entity.other.attribute-name.parent.less","source.css entity.other.attribute-name.pseudo-class","entity.other.attribute-name.pseudo-element.css","source.css.less entity.other.attribute-name.id","entity.other.attribute-name.scss","keyword.operator.quantifier.regexp","constant.character.escape"]],["#9CDCFE",["entity.other.attribute-name","meta.structure.dictionary.key.python","support.type.vendored.property-name","support.type.property-name","source.css variable","source.coffee.embedded","support.function.git-rebase","variable","meta.definition.variable.name","support.variable","entity.name.variable","constant.other.placeholder","meta.object-literal.key"]],["#F44747",["invalid"]],["#6796E6",["punctuation.definition.list.begin.markdown"]],["#808080",["punctuation.definition.tag"]],["#C586C0",["keyword.control","source.cpp keyword.operator.new","keyword.operator.delete","keyword.other.using","keyword.other.directive.using","keyword.other.operator","entity.name.operator"]],["#DCDCAA",["entity.name.function","support.function","support.constant.handlebars","source.powershell variable.other.member","entity.name.operator.custom-literal","keyword.operator.or.regexp","keyword.control.anchor.regexp"]],["#4EC9B0",["support.class","support.type","entity.name.type","entity.name.namespace","entity.other.attribute","entity.name.scope-resolution","entity.name.class","storage.type.numeric.go","storage.type.byte.go","storage.type.boolean.go","storage.type.string.go","storage.type.uintptr.go","storage.type.error.go","storage.type.rune.go","storage.type.cs","storage.type.generic.cs","storage.type.modifier.cs","storage.type.variable.cs","storage.type.annotation.java","storage.type.generic.java","storage.type.java","storage.type.object.array.java","storage.type.primitive.array.java","storage.type.primitive.java","storage.type.token.java","storage.type.groovy","storage.type.annotation.groovy","storage.type.parameters.groovy","storage.type.generic.groovy","storage.type.object.array.groovy","storage.type.primitive.array.groovy","storage.type.primitive.groovy","meta.type.cast.expr","meta.type.new.expr","support.constant.math","support.constant.dom","support.constant.json","entity.other.inherited-class"]],["#C8C8C8",["entity.name.label"]]]);async function TS(n){const e=await e4.find(t=>t.name===n?.theme)?.load()||QF;await x_({theme:e,settings:{"editor.fontFamily":n?.editorFontFamily,"window.fontFamily":n?.panelFontFamily}},!0)}let iD,Qk=class{constructor(e={connecting:!0,kind:"standalone",sideViewScreen:{name:Zt.Logs},status:{state:"starting",firstTestResultAvailable:!1,longRunningOperation:!1,troubleshootingHint:[]},testFiles:[]},t){this._state=e,this._setState=t;const[i,s]=O1(Xle(this._state.kind==="quokka.output"));this._settingsState=i,this._setSettingsState=s;const r=this;this._doSetSettingsState=function(){try{return r._setSettingsState.apply(this,arguments)}finally{const a=IQ(r._settingsState,...arguments);r._appToCore.updateAppSettings(a)}},this._updateSettingsDebounced=yg(a=>this._appToCore?.updateAppSettings(a),1e3),this._disposable=new Fo,this._setState(Gt(a=>{a.connecting=!0})),this.connect().then(()=>this._onConnected()),this._state.kind!=="quokka.output"&&this.setPanelState(Ue.OverviewDebugger,a=>({...a,collapsed:!0}));const o=J(()=>this._state.testFiles);this._testFilesDebounced=a4(o,100,{maxWait:100}),$e([()=>this._state.openedTab?.requestedLocation?.line,()=>this._state.trackCodeViewerCursor],()=>{const a=this._state.openedTab?.requestedLocation?.line,l=this._state.trackCodeViewerCursor;a&&l&&this._appToCore.codeViewerCursorPositionChanged(this._state.openedTab.requestedLocation)})}_appToCore;_coreToApp;_disposable;_settingsState;_setSettingsState;_doSetSettingsState;_reconnectTimeout;_trackStatusCount=0;_trackTestRunCount=0;_trackExecutionProgressCount=0;_trackStatsCount=0;_trackTestDataCount=0;_trackDiagnosticMessagesCount=0;_diagnosticMessagesEmitter=new Ime;_testFilesDebounced;_testFileStatusIndex=new Map;_updateSettingsDebounced;_onConnected(){this._appToCore.handshake({kind:this._state.kind}),this._appToCore.trackEditorCursor(),this._appToCore.trackProjectConfig(),this.isStandalone()&&this.trackStats(),this.trackStatus(),this._disposable.add(this._coreToApp.onPauseState(this.onPauseStateChanged.bind(this))),this._disposable.add(this._coreToApp.onDebuggerState(this.onDebuggerStateChanged.bind(this))),this._disposable.add(this._coreToApp.onOpenedFile(this.onOpenedFileChanged.bind(this))),this._disposable.add(this._coreToApp.onOpenedDiff(this.onOpenedDiffChanged.bind(this))),this._disposable.add(this._coreToApp.onRunStats(this.onRunStatsAvailable.bind(this))),this._disposable.add(this._coreToApp.onTestRunModeParams(this.onTestRunModeParamsChanged.bind(this))),this._disposable.add(this._coreToApp.onOpenInSideView(this.onOpenInSideView.bind(this))),this._disposable.add(this._coreToApp.onAccountDetails(this.onAccountDetailsChanged.bind(this))),this._disposable.add(this._coreToApp.onStatus(this.onStatus.bind(this))),this._disposable.add(this._coreToApp.onTestRunStatus(this.onTestRunStatus.bind(this))),this._disposable.add(this._coreToApp.onTestRunTestFileUpdated(this.onTestRunTestFileUpdated.bind(this))),this._disposable.add(this._coreToApp.onDiagnosticMessages(this.onDiagnosticMessages.bind(this))),this._disposable.add(this._coreToApp.onExecutionProgress(this.onExecutionProgress.bind(this))),this._disposable.add(this._coreToApp.onProject(this.onProject.bind(this)))}appSettings(){return[this._settingsState,this._doSetSettingsState]}isStandalone(){return this._state.kind==="standalone"}isIntegratedOverview(){return this._state.kind==="overview"}isIntegratedSideView(){return this._state.kind==="side-view"}isIntegratedNinja(){return!1}isEditorConnected(){return this._state.editor!=="unknown"}isEditorConnectedWithNoPreferences(){return this.isEditorConnected()&&(this._state.editor==="vs"||this._state.editor==="sublime"||this._state.editor==="atom")}isIntegratedVSCode(){return!this.isStandalone()&&this._state.editor==="vscode"}isIntegratedIntelliJ(){return!this.isStandalone()&&this._state.editor==="intellij"}getCoreVersion(){return this._state.version}isIntegratedQuokkaOutput(){return this._state.kind==="quokka.output"}isAiAvailable(){return J(()=>!!this._state.aiAvailable)}canShowCoverageInExplorer(){return J(()=>this._state.canShowCoverageInExplorer)}showCoverageInExplorer(){return J(()=>this._state.showCoverageInExplorer)}featureUsed(e){this._appToCore.featureUsed(e)}getDebuggerStarted(){return J(()=>this._state.debuggerStarted)}getTestRunModeParams(){return J(()=>this._state.testRunMode)}getProject(){return J(()=>this._state.project)}getFindState(){return J(()=>this._state.find)}shouldOpenInEditor(e){return!this.isStandalone()||this.isEditorConnected()&&(!fr(e)&&this._settingsState.linkedMode.fileNavigation!=="browser"||fr(e)&&this._settingsState.linkedMode.fileNavigationWithModifier!=="browser"||this._allowedToRunInEditorWithoutSpecialKeys())}shouldOpenInBrowser(e){return this.isStandalone()&&!this.isEditorConnected()||this.isStandalone()&&this.isEditorConnected()&&(!fr(e)&&this._settingsState.linkedMode.fileNavigation!=="editor"&&!this._allowedToRunInEditorWithoutSpecialKeys()||fr(e)&&this._settingsState.linkedMode.fileNavigationWithModifier!=="editor")}editorTooltipAddendum(e="navigation"){return J(()=>{if(!this.isStandalone()||!this.isEditorConnected())return"";if(this._allowedToRunInEditorWithoutSpecialKeys()&&this._settingsState.linkedMode.fileNavigation!=="editor")return'<br/><br/>Show the "Code" Panel to to display in your browser';const t=i=>{switch(e){case"debugger":return`to run to your ${i?"code editor":"code viewer"} active line`;case"navigation":return`to navigate in your ${i?"editor":"browser"}`;case"diff":return`to show side-by-side diff in your ${i?"editor":"browser"}`;case"lineTests":return`to start tracking current line in your ${i?"code editor":"code viewer"}`}};return!this._allowedToRunInEditorWithoutSpecialKeys()&&this._settingsState.linkedMode.fileNavigation==="browser"&&this._settingsState.linkedMode.fileNavigationWithModifier!=="browser"?`<br/><br/>Hold <span class='keyboard-shortcut'>${Hr}</span> ${t(!0)}`:this._settingsState.linkedMode.fileNavigation==="editor"&&this._settingsState.linkedMode.fileNavigationWithModifier!=="editor"?`<br/><br/>Hold <span class='keyboard-shortcut'>${Hr}</span> ${t(!1)}`:""})}navigate(e,t,i){this.shouldOpenInEditor(t)&&this._appToCore.navigate(e,i),this.shouldOpenInBrowser(t)&&(this.openCodePanelIfRequired(!0),this.openFile(e,i))}_allowedToOpenFileInApp(){return this.isStandalone()?this.isEditorConnected()?!this._getPanelState(Ue.StandaloneMainCode).collapsed:!0:!1}_allowedToRunInEditorWithoutSpecialKeys(){return this.isStandalone()&&this.isEditorConnected()&&!!this._getPanelState(Ue.StandaloneMainCode).collapsed}openCodePanelIfRequired(e){this.isStandalone()&&this._getPanelState(Ue.StandaloneMainCode).collapsed&&(!this.isEditorConnected()||e)&&this.setPanelState(Ue.StandaloneMainCode,t=>({...t,collapsed:!t.collapsed,size:t.size||50}))}openPanelIfRequired(e){this._getPanelState(e).collapsed&&this.setPanelState(e,t=>({...t,collapsed:!t.collapsed,size:t.size||50}))}openFile(e,t){this._allowedToOpenFileInApp()&&(this._state.openedTab?.requestedLocation?.file===e.file?this._setState(Gt(i=>{i.openedTab.requestedLocation={...e,options:t},delete i.openedTab.diff})):(this._setState(Gt(i=>{i.openedTab=i.openedTab||{requestedLocation:e},i.openedTab.requestedLocation={...e,options:t},delete i.openedTab.diff})),this._appToCore.openFile(e.file)))}closeAllFiles(){this._appToCore.closeAllFiles(),this._setState("openedTab",void 0)}updateOpenedSourceFilePosition(e){this._state.openedTab?.requestedLocation&&this._setState(Gt(t=>{t.openedTab.requestedLocation.line=e.line,t.openedTab.requestedLocation.column=e.column}))}trackCodeViewerCursor(){this._setState("trackCodeViewerCursor",!0)}untrackCodeViewerCursor(){this._setState("trackCodeViewerCursor",void 0)}onOpenedFileChanged(e){(!this._state.openedTab||this._state.openedTab?.requestedLocation?.file===e.path||e.forcedLocation)&&(this.openCodePanelIfRequired(!1),this._state.openedTab?this._setState("openedTab",Gt(t=>{e.forcedLocation&&(t.requestedLocation={file:e.path,...e.forcedLocation}),t.source=e})):this._setState(Gt(t=>{t.openedTab={requestedLocation:{file:e.path,...e.forcedLocation},source:e}})))}onOpenedDiffChanged(e){this._state.openedTab?.diff&&this._setState("openedTab",At({diff:{actual:e.actual,expected:e.expected}}))}onRunStatsAvailable(e){this._setState("runStats",At(e))}onTestRunModeParamsChanged(e){this._setState("testRunMode",At(Object.keys(e).length>0?e:void 0))}onOpenInSideView(e){if(e.name===Zt.Shortcuts){e.state?.shortcuts?.open?this._setState("shortcuts","lastFocusedNamespace"):this.closeShortcuts();return}this._setState("sideViewScreen",e)}onAccountDetailsChanged(e){this._setState("account",At(e)),this._state.openedTab?.account&&this._setState("openedTab","account",At(e))}getRunStats(){return J(()=>this._state.runStats)}getStatus(){return J(()=>this._state.status)}getTestFilesStatus(){return this._testFilesDebounced}getTestFilesTotal(){return J(()=>this._state.testFilesTotal)}getTestFilesStarted(){return J(()=>this._state.testFilesStarted)}getFailingStatus(){return J(()=>!!this._state.runStats?.failing||!!this._state.runStats?.hasRunErrors)}getSideViewTab(){return J(()=>this._state.sideViewScreen)}getPausedState(){return J(()=>this._state.pausedState)}focus(e){this._appToCore.focus(e)}closeFind(){this._setState("find",void 0)}showFind(e){this._setState("find",{namespace:e,lastShowTime:Date.now()})}closeShortcuts(){this._setState("shortcuts",void 0)}showShortcuts(e,t){const i=t&&this._state.kind!=="standalone";this._state.shortcuts?(this.closeShortcuts(),i&&this._appToCore.openInSideView({name:Zt.Shortcuts,state:{shortcuts:{open:void 0}}})):(this._setState("shortcuts",e),i&&this._appToCore.openInSideView({name:Zt.Shortcuts,state:{shortcuts:{open:!0}}}))}debug(e){this._appToCore.debug(e)}investigateWithAi(e,t){this._appToCore.investigateWithAi(e,t)}getLocationByTraceFrame(e){return this._appToCore.getLocationByTraceFrame(e)}stepInDebugger(e,t){if(!t){this._appToCore.stepInDebugger(e);return}this.shouldOpenInEditor(t)&&this._appToCore.stepInDebugger(e),e.runViaEditor?.line&&t&&this.shouldOpenInBrowser(t)&&this._state.openedTab?.requestedLocation&&(e.file=this._state.openedTab.requestedLocation.file,e.line=this._state.openedTab.requestedLocation.line,delete e.runViaEditor,this._appToCore.stepInDebugger(e))}stopDebugger(){this._appToCore.stopDebugger()}sendTraceFramesData(e,t){this._appToCore.sendTraceFramesData(e,t)}sendCurrentStepEcho(){this._appToCore.sendCurrentStepEcho()}stopSendingCurrentStepEcho(){this._appToCore.stopSendingCurrentStepEcho()}addWatchExpression(e,t,i){this._appToCore.addWatchExpression(e,t,i)}removeWatchExpressions(e){this._appToCore.removeWatchExpressions(e)}evaluateWatchExpressions(){this._appToCore.evaluateWatchExpressions()}showCallStack(){this._appToCore.showCallStack(),this.featureUsed("callStack")}profile(e){this._appToCore.profile(e)}toggleTestFilter(e,t){this._appToCore.toggleTestFilter(e,t)}updateSnapshots(e){this._appToCore.updateSnapshots(e)}showSideBySideDiff(e,t){const i=this.shouldOpenInEditor(t),s=this.shouldOpenInBrowser(t);this._appToCore.showSideBySideDiff(e.test,e.id,{showInEditor:i,showInBrowser:s}),s&&(e.actual!==void 0||e.expected!==void 0)&&(this.openCodePanelIfRequired(!0),this._setState("openedTab",At({diff:{actual:e.actual,expected:e.expected}})))}copyDiagnosticsReport(){this._appToCore.copyDiagnosticsReport()}requestTrial(e){this._state.openedTab?.account&&this._setState("openedTab","account","requestingTrial",!0),this._appToCore.requestTrial(e).then(t=>{this._state.openedTab?.account&&(this._setState("openedTab","account","requestingTrial",void 0),this._setState("openedTab","account","trialRequestResult",t))})}resetAccountRequests(){this._state.openedTab?.account&&(this._setState("openedTab","account","trialRequestResult",void 0),this._setState("openedTab","account","activationRequestResult",void 0),this._setState("openedTab","account","requestingTrial",void 0),this._setState("openedTab","account","activating",void 0))}activateLicense(e){this._state.openedTab?.account&&this._setState("openedTab","account","activating",!0),this._appToCore.activateLicense(e).then(t=>{this._state.openedTab?.account&&(this._setState("openedTab","account","activating",void 0),this._setState("openedTab","account","activationRequestResult",t))})}async highlight(e,t){const i=e.endsWith(".vue")?"vue":e.endsWith(".svelte")?"svelte":"typescript",s=i==="vue"||i==="svelte"?75:3,r=await this._appToCore.extractFileFragment(e,{line:t,frame:s});if(r&&r.lines.length>0)return iD||(iD=(await Oa(()=>Promise.resolve().then(()=>tx),void 0,import.meta.url)).highlight),await iD(i,r,i==="vue"||i==="svelte"?3:void 0)}trackStatus(){this._trackStatusCount++,this._appToCore.trackStatus()}untrackStatus(){this._trackStatusCount--,this._trackStatusCount===0&&this._appToCore.untrackStatus()}trackTestRun(){this._trackTestRunCount++,this._appToCore.trackTestRun()}untrackTestRun(){this._trackTestRunCount--,this._trackTestRunCount===0&&this._appToCore.untrackTestRun()}trackExecutionProgress(){this._trackExecutionProgressCount++,this._appToCore.trackExecutionProgress()}untrackExecutionProgress(){this._trackExecutionProgressCount--,this._trackExecutionProgressCount===0&&this._appToCore.untrackExecutionProgress()}trackStats(){this._trackStatsCount++,this._appToCore.trackStats()}untrackStats(){this._trackStatsCount--,this._trackStatsCount===0&&this._appToCore.untrackStats()}optInToLogsAndErrors(){this._trackTestDataCount++}optOutFromLogsAndErrors(){this._trackTestDataCount--,this._trackTestDataCount===0&&this._appToCore.untrackAllLogsAndErrors()}trackDiagnosticMessages(){this._trackDiagnosticMessagesCount++,this._appToCore.trackDiagnosticMessages()}untrackDiagnosticMessages(){this._trackDiagnosticMessagesCount--,this._trackDiagnosticMessagesCount===0&&this._appToCore.untrackDiagnosticMessages()}pause(){this._appToCore.pause()}resume(){this._appToCore.resume()}restart(){this._setState("restarting",!0),Kr(()=>{$e(()=>this._state.disconnected,async t=>{if(t){this._setState("reconnectingAfterRestart",!0);let i;const s=()=>{i&&clearTimeout(i)},r=await Promise.race([new Promise(o=>setTimeout(o,1e4)),new Promise(o=>{const a=()=>{s(),i=setTimeout(l,250)},l=()=>{try{dG(this._state.network?.isSecure,this._state.network?.host,this._state.network?.port,this._state.network?.secret,{onCloseDueToError:()=>a()}).then(({coreToApp:c})=>c.onHandshake(async d=>o(!0))).catch(()=>a())}catch{a()}};l()})]);s(),r?window.location.reload():(this._setState("failedToReconnectAfterRestart",!0),this._setState("reconnectingAfterRestart",void 0))}}),this._appToCore.restart()})}getPanelState(e,t){return J(()=>this._getPanelState(e,t))}_getPanelState(e,t){return this._settingsState.panels?.[e]||t||{}}setPanelState(e,t){const{size:i,collapsed:s}=this._getPanelState(e),r={panels:{...this._settingsState.panels,[e]:t(this._settingsState.panels?.[e]||{})}};this._setSettingsState({...this._settingsState,...r});const{size:o,collapsed:a}=this._getPanelState(e);(s!==a||i!==o)&&this._updateSettingsDebounced(r)}onPauseStateChanged(e){this._setState("pausedState",e)}onDebuggerStateChanged(e){this._state.kind!=="quokka.output"&&(e?.started?(this.isStandalone()&&this.openPanelIfRequired(Ue.StandaloneOverview),this.setPanelState(Ue.OverviewDebugger,t=>({...t,collapsed:!1,size:t.size||20}))):this.setPanelState(Ue.OverviewDebugger,t=>({...t,collapsed:!0}))),this._setState("debuggerState",e),this._setState("debuggerStarted",e?.started)}onStatus(e){this._setState("status",At(e))}onTestRunStatus(e){this._testFileStatusIndex.clear(),e.tests.reduce((t,i,s)=>(this._testFileStatusIndex.set(i.id,s),t.total++,(i.status==="complete"||i.status==="running")&&t.started++,t),{total:0,started:0,files:{}}),this._setState("testFiles",e.tests)}onExecutionProgress(e){this._setState("testFilesStarted",e.startedOrCompleted),this._setState("testFilesTotal",e.total)}onProject(e){this._setState("project",At(e))}onTestRunTestFileUpdated(e){const t=this._testFileStatusIndex.get(e.id);t===void 0||!this._state.testFiles[t]===void 0||this._setState("testFiles",t,e)}onDiagnosticMessages(e){e.initial?this._diagnosticMessagesEmitter.emit("initial",e.messages):this._diagnosticMessagesEmitter.emit("incremental",e.messages)}openAccountDetails(e){this.closeAllFiles(),this.openCodePanelIfRequired(!0),this._setState("openedTab",At({account:this._state.account?{...this._state.account,...e}:void 0})),this.resetAccountRequests()}openSettings(){this.closeAllFiles(),this.openCodePanelIfRequired(!0),this._setState("openedTab",At({settings:{}}))}clearNotifications(){this._setState("notifications",void 0)}async connect(){let e=!1,t,i;const s=()=>{this._state.stopped||(this._setState("disconnected",!0),e=!0,i&&i(),this._state.restarting||(this._disposable.dispose(),this._disposable=new Fo,this._setState("connecting",!0),this._setState("status",{state:"starting",firstTestResultAvailable:!1}),clearTimeout(this._reconnectTimeout),this._reconnectTimeout=setTimeout(()=>{this.connect().then(()=>{this._state.disconnected||this._onConnected()})},1e3)))},{disposable:r,appToCore:o,coreToApp:a}=await dG(this._state.network?.isSecure,this._state.network?.host,this._state.network?.port,this._state.network?.secret,{onClose:()=>s(),onCloseDueToError:()=>s()});if(e)return;const l=new Promise((d,u)=>{t=d,i=u});let c;c=a.onHandshake(async d=>{c.dispose(),d.editor.type==="vscode"?(await x_(d.editor,this._state.kind==="standalone"),this._state.kind!=="standalone"&&(document.body.getAttribute("data-vscode-theme-id")&&document.body.getAttribute("data-vscode-theme-id")!==d.editor.theme?.name&&o.themeChanged(document.body.getAttribute("data-vscode-theme-id")),new MutationObserver(h=>{h.forEach(f=>{f.type==="attributes"&&f.attributeName==="data-vscode-theme-id"&&o.themeChanged(document.body.getAttribute("data-vscode-theme-id"))})}).observe(document.body,{attributes:!0,attributeFilter:["data-vscode-theme-id"]}))):d.editor.type==="intellij"?await gG(d.editor,this._state.kind==="standalone"):await TS({theme:d.settings.standalone.cli.theme,editorFontFamily:d.settings.standalone.cli.editorFontFamily,panelFontFamily:d.settings.standalone.cli.panelFontFamily}),this._setState(Gt(u=>{u.editor=d.editor.type,u.pausedState=d.pausedState,u.debuggerState=d.debuggerState,u.project=d.project,u.version=d.version,u.notifications=d.notifications,u.sideViewScreen=d.settings.sideViewScreen?{name:d.settings.sideViewScreen}:{name:Zt.Tests},u.aiAvailable=d.editor.aiAvailable,u.canShowCoverageInExplorer=d.editor.canShowCoverageInExplorer,u.showCoverageInExplorer=d.editor.showCoverageInExplorer,this.onDebuggerStateChanged(d.debuggerState),d.testRunMode&&this.onTestRunModeParamsChanged(d.testRunMode),d.account&&this.onAccountDetailsChanged(d.account),u.quokkaConfig=d.quokka})),this._setSettingsState(u=>({...u,...d.settings})),t&&(t(),t=void 0)});try{await Promise.race([l,new Promise((d,u)=>setTimeout(()=>u(new Error("Handshake timeout")),12e4))])}catch{console.error("Handshake failed");return}e||(this._disposable.add(a.onPreferences(async d=>{this._setState("canShowCoverageInExplorer",d.editor?.canShowCoverageInExplorer),this._setState("showCoverageInExplorer",d.editor?.showCoverageInExplorer),this._state.editor==="vscode"?await x_(d.editor,this._state.kind==="standalone"):this._state.editor==="intellij"&&await gG(d.editor,this._state.kind==="standalone")})),this._disposable.add(r),this._appToCore=o,this._coreToApp=a,this._setState(Gt(d=>{delete d.disconnected,d.connecting=!1})))}openInSideView(e,t){const i={name:e,state:t};this._setState("sideViewScreen",i);const s=this._settingsState.panels?.[Ue.StandaloneMainSideView]||{},r={panels:{...this._settingsState.panels,[Ue.StandaloneMainSideView]:{...s,collapsed:!1,size:s.size||50}},sideViewScreen:e};this._setSettingsState({...this._settingsState,...r}),this._appToCore?.updateAppSettings(r),this._state.kind!=="standalone"&&this._appToCore.openInSideView(i)}getDiagnosticMessagesEmitter(){return this._diagnosticMessagesEmitter}clearPreviousDiagnosticMessages(){this._appToCore.clearPreviousDiagnosticMessages()}openMcpSettings(){this._appToCore.openMcpSettings()}installCoreVersion(){this._appToCore.installCoreVersion()}toggleCoverageInExplorer(e){this._appToCore.toggleCoverageInExplorer(e)}showFileUncoveredRegions(e,t,i){this.shouldOpenInEditor(i)&&this._appToCore.showFileUncoveredRegions(e,i.buttons===999),this.shouldOpenInBrowser(i)&&(this.openCodePanelIfRequired(!0),this.openFile({file:t}))}dispose(){this._setState("stopped",!0),clearTimeout(this._reconnectTimeout),this._disposable.dispose()}static Provider};const[Ame,Dt]=Go(n=>n.initial);Qk.Provider=Ame;var vc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qk(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var OQ={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(vc,()=>{return t={770:function(s,r,o){var a=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(r,"__esModule",{value:!0}),r.setDefaultDebugCall=r.createOnigScanner=r.createOnigString=r.loadWASM=r.OnigScanner=r.OnigString=void 0;const l=a(o(418));let c=null,d=!1;class u{static _utf8ByteLength(b){let w=0;for(let v=0,_=b.length;v<_;v++){const y=b.charCodeAt(v);let C=y,S=!1;if(y>=55296&&y<=56319&&v+1<_){const k=b.charCodeAt(v+1);k>=56320&&k<=57343&&(C=65536+(y-55296<<10)|k-56320,S=!0)}w+=C<=127?1:C<=2047?2:C<=65535?3:4,S&&v++}return w}constructor(b){const w=b.length,v=u._utf8ByteLength(b),_=v!==w,y=_?new Uint32Array(w+1):null;_&&(y[w]=v);const C=_?new Uint32Array(v+1):null;_&&(C[v]=w);const S=new Uint8Array(v);let k=0;for(let I=0;I<w;I++){const T=b.charCodeAt(I);let D=T,M=!1;if(T>=55296&&T<=56319&&I+1<w){const E=b.charCodeAt(I+1);E>=56320&&E<=57343&&(D=65536+(T-55296<<10)|E-56320,M=!0)}_&&(y[I]=k,M&&(y[I+1]=k),D<=127?C[k+0]=I:D<=2047?(C[k+0]=I,C[k+1]=I):D<=65535?(C[k+0]=I,C[k+1]=I,C[k+2]=I):(C[k+0]=I,C[k+1]=I,C[k+2]=I,C[k+3]=I)),D<=127?S[k++]=D:D<=2047?(S[k++]=192|(1984&D)>>>6,S[k++]=128|(63&D)>>>0):D<=65535?(S[k++]=224|(61440&D)>>>12,S[k++]=128|(4032&D)>>>6,S[k++]=128|(63&D)>>>0):(S[k++]=240|(1835008&D)>>>18,S[k++]=128|(258048&D)>>>12,S[k++]=128|(4032&D)>>>6,S[k++]=128|(63&D)>>>0),M&&I++}this.utf16Length=w,this.utf8Length=v,this.utf16Value=b,this.utf8Value=S,this.utf16OffsetToUtf8=y,this.utf8OffsetToUtf16=C}createString(b){const w=b._omalloc(this.utf8Length);return b.HEAPU8.set(this.utf8Value,w),w}}class h{constructor(b){if(this.id=++h.LAST_ID,!c)throw new Error("Must invoke loadWASM first.");this._onigBinding=c,this.content=b;const w=new u(b);this.utf16Length=w.utf16Length,this.utf8Length=w.utf8Length,this.utf16OffsetToUtf8=w.utf16OffsetToUtf8,this.utf8OffsetToUtf16=w.utf8OffsetToUtf16,this.utf8Length<1e4&&!h._sharedPtrInUse?(h._sharedPtr||(h._sharedPtr=c._omalloc(1e4)),h._sharedPtrInUse=!0,c.HEAPU8.set(w.utf8Value,h._sharedPtr),this.ptr=h._sharedPtr):this.ptr=w.createString(c)}convertUtf8OffsetToUtf16(b){return this.utf8OffsetToUtf16?b<0?0:b>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[b]:b}convertUtf16OffsetToUtf8(b){return this.utf16OffsetToUtf8?b<0?0:b>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[b]:b}dispose(){this.ptr===h._sharedPtr?h._sharedPtrInUse=!1:this._onigBinding._ofree(this.ptr)}}r.OnigString=h,h.LAST_ID=0,h._sharedPtr=0,h._sharedPtrInUse=!1;class f{constructor(b,w){var v,_;if(!c)throw new Error("Must invoke loadWASM first.");const y=[],C=[];for(let M=0,E=b.length;M<E;M++){const W=new u(b[M]);y[M]=W.createString(c),C[M]=W.utf8Length}const S=c._omalloc(4*b.length);c.HEAPU32.set(y,S/4);const k=c._omalloc(4*b.length);c.HEAPU32.set(C,k/4),this._onigBinding=c,this._options=(v=w?.options)!==null&&v!==void 0?v:[10];const I=this.onigOptions(this._options),T=this.onigSyntax((_=w?.syntax)!==null&&_!==void 0?_:0),D=c._createOnigScanner(S,k,b.length,I,T);this._ptr=D;for(let M=0,E=b.length;M<E;M++)c._ofree(y[M]);c._ofree(k),c._ofree(S),D===0&&function(M){throw new Error(M.UTF8ToString(M._getLastOnigError()))}(c)}dispose(){this._onigBinding._freeOnigScanner(this._ptr)}findNextMatchSync(b,w,v){let _=d,y=this._options;if(Array.isArray(v)?(v.includes(25)&&(_=!0),y=y.concat(v)):typeof v=="boolean"&&(_=v),typeof b=="string"){b=new h(b);const C=this._findNextMatchSync(b,w,_,y);return b.dispose(),C}return this._findNextMatchSync(b,w,_,y)}_findNextMatchSync(b,w,v,_){const y=this._onigBinding,C=this.onigOptions(_);let S;if(S=v?y._findNextOnigScannerMatchDbg(this._ptr,b.id,b.ptr,b.utf8Length,b.convertUtf16OffsetToUtf8(w),C):y._findNextOnigScannerMatch(this._ptr,b.id,b.ptr,b.utf8Length,b.convertUtf16OffsetToUtf8(w),C),S===0)return null;const k=y.HEAPU32;let I=S/4;const T=k[I++],D=k[I++];let M=[];for(let E=0;E<D;E++){const W=b.convertUtf8OffsetToUtf16(k[I++]),P=b.convertUtf8OffsetToUtf16(k[I++]);M[E]={start:W,end:P,length:P-W}}return{index:T,captureIndices:M}}onigOptions(b){return b.map(w=>this.onigOption(w)).reduce((w,v)=>w|v,this._onigBinding.ONIG_OPTION_NONE)}onigSyntax(b){switch(b){case 0:return this._onigBinding.ONIG_SYNTAX_DEFAULT;case 1:return this._onigBinding.ONIG_SYNTAX_ASIS;case 2:return this._onigBinding.ONIG_SYNTAX_POSIX_BASIC;case 3:return this._onigBinding.ONIG_SYNTAX_POSIX_EXTENDED;case 4:return this._onigBinding.ONIG_SYNTAX_EMACS;case 5:return this._onigBinding.ONIG_SYNTAX_GREP;case 6:return this._onigBinding.ONIG_SYNTAX_GNU_REGEX;case 7:return this._onigBinding.ONIG_SYNTAX_JAVA;case 8:return this._onigBinding.ONIG_SYNTAX_PERL;case 9:return this._onigBinding.ONIG_SYNTAX_PERL_NG;case 10:return this._onigBinding.ONIG_SYNTAX_RUBY;case 11:return this._onigBinding.ONIG_SYNTAX_PYTHON;case 12:return this._onigBinding.ONIG_SYNTAX_ONIGURUMA}}onigOption(b){switch(b){case 1:return this._onigBinding.ONIG_OPTION_NONE;case 0:case 25:return this._onigBinding.ONIG_OPTION_DEFAULT;case 2:return this._onigBinding.ONIG_OPTION_IGNORECASE;case 3:return this._onigBinding.ONIG_OPTION_EXTEND;case 4:return this._onigBinding.ONIG_OPTION_MULTILINE;case 5:return this._onigBinding.ONIG_OPTION_SINGLELINE;case 6:return this._onigBinding.ONIG_OPTION_FIND_LONGEST;case 7:return this._onigBinding.ONIG_OPTION_FIND_NOT_EMPTY;case 8:return this._onigBinding.ONIG_OPTION_NEGATE_SINGLELINE;case 9:return this._onigBinding.ONIG_OPTION_DONT_CAPTURE_GROUP;case 10:return this._onigBinding.ONIG_OPTION_CAPTURE_GROUP;case 11:return this._onigBinding.ONIG_OPTION_NOTBOL;case 12:return this._onigBinding.ONIG_OPTION_NOTEOL;case 13:return this._onigBinding.ONIG_OPTION_CHECK_VALIDITY_OF_STRING;case 14:return this._onigBinding.ONIG_OPTION_IGNORECASE_IS_ASCII;case 15:return this._onigBinding.ONIG_OPTION_WORD_IS_ASCII;case 16:return this._onigBinding.ONIG_OPTION_DIGIT_IS_ASCII;case 17:return this._onigBinding.ONIG_OPTION_SPACE_IS_ASCII;case 18:return this._onigBinding.ONIG_OPTION_POSIX_IS_ASCII;case 19:return this._onigBinding.ONIG_OPTION_TEXT_SEGMENT_EXTENDED_GRAPHEME_CLUSTER;case 20:return this._onigBinding.ONIG_OPTION_TEXT_SEGMENT_WORD;case 21:return this._onigBinding.ONIG_OPTION_NOT_BEGIN_STRING;case 22:return this._onigBinding.ONIG_OPTION_NOT_END_STRING;case 23:return this._onigBinding.ONIG_OPTION_NOT_BEGIN_POSITION;case 24:return this._onigBinding.ONIG_OPTION_CALLBACK_EACH_MATCH}}}r.OnigScanner=f;let g=!1,m=null;r.loadWASM=function(p){if(g)return m;let b,w,v,_;if(g=!0,function(y){return typeof y.instantiator=="function"}(p))b=p.instantiator,w=p.print;else{let y;(function(C){return C.data!==void 0})(p)?(y=p.data,w=p.print):y=p,b=function(C){return typeof Response<"u"&&C instanceof Response}(y)?typeof WebAssembly.instantiateStreaming=="function"?function(C){return S=>WebAssembly.instantiateStreaming(C,S)}(y):function(C){return async S=>{const k=await C.arrayBuffer();return WebAssembly.instantiate(k,S)}}(y):function(C){return S=>WebAssembly.instantiate(C,S)}(y)}return m=new Promise((y,C)=>{v=y,_=C}),function(y,C,S,k){(0,l.default)({print:C,instantiateWasm:(I,T)=>{if(typeof performance>"u"){const D=()=>Date.now();I.env.emscripten_get_now=D,I.wasi_snapshot_preview1.emscripten_get_now=D}return y(I).then(D=>T(D.instance),k),{}}}).then(I=>{c=I,S()})}(b,w,v,_),m},r.createOnigString=function(p){return new h(p)},r.createOnigScanner=function(p){return new f(p)},r.setDefaultDebugCall=function(p){d=p}},418:s=>{var r=(typeof document<"u"&&document.currentScript&&document.currentScript.src,function(o={}){var a,l,c=o;c.ready=new Promise((oe,le)=>{a=oe,l=le});var d,u=Object.assign({},c);typeof read<"u"&&read,d=oe=>{if(typeof readbuffer=="function")return new Uint8Array(readbuffer(oe));let le=read(oe,"binary");return typeof le=="object"||P(Ve),le;var Ve},typeof clearTimeout>"u"&&(globalThis.clearTimeout=oe=>{}),typeof setTimeout>"u"&&(globalThis.setTimeout=oe=>typeof oe=="function"?oe():P()),typeof scriptArgs<"u"&&scriptArgs,typeof onig_print<"u"&&(typeof console>"u"&&(console={}),console.log=onig_print,console.warn=console.error=typeof printErr<"u"?printErr:onig_print);var h,f,g=c.print||console.log.bind(console),m=c.printErr||console.error.bind(console);Object.assign(c,u),u=null,c.arguments&&c.arguments,c.thisProgram&&c.thisProgram,c.quit&&c.quit,c.wasmBinary&&(h=c.wasmBinary),c.noExitRuntime,typeof WebAssembly!="object"&&P("no native wasm support detected");var p,b,w,v,_,y,C,S,k=!1;function I(){var oe=f.buffer;c.HEAP8=p=new Int8Array(oe),c.HEAP16=w=new Int16Array(oe),c.HEAPU8=b=new Uint8Array(oe),c.HEAPU16=v=new Uint16Array(oe),c.HEAP32=_=new Int32Array(oe),c.HEAPU32=y=new Uint32Array(oe),c.HEAPF32=C=new Float32Array(oe),c.HEAPF64=S=new Float64Array(oe)}var T=[],D=[],M=[],E=0,W=null;function P(oe){c.onAbort&&c.onAbort(oe),m(oe="Aborted("+oe+")"),k=!0,oe+=". Build with -sASSERTIONS for more info.";var le=new WebAssembly.RuntimeError(oe);throw l(le),le}var N,H;function U(oe){return oe.startsWith("data:application/octet-stream;base64,")}function B(oe){if(oe==N&&h)return new Uint8Array(h);if(d)return d(oe);throw"both async and sync fetching of the wasm failed"}function Y(oe,le,Ve){return function(ae){return Promise.resolve().then(()=>B(ae))}(oe).then(ae=>WebAssembly.instantiate(ae,le)).then(ae=>ae).then(Ve,ae=>{m(`failed to asynchronously prepare wasm: ${ae}`),P(ae)})}U(N="onig.wasm")||(H=N,N=c.locateFile?c.locateFile(H,""):""+H);var ne=oe=>{for(;oe.length>0;)oe.shift()(c)},ee=void 0,$=oe=>{for(var le="",Ve=oe;b[Ve];)le+=ee[b[Ve++]];return le},ge={},Ie={},xe=void 0,z=oe=>{throw new xe(oe)},K=void 0,Se=(oe,le,Ve)=>{function ae(lt){var ft=Ve(lt);ft.length!==oe.length&&(ii=>{throw new K(ii)})("Mismatched type converter count");for(var kt=0;kt<oe.length;++kt)De(oe[kt],ft[kt])}oe.forEach(function(lt){});var _e=new Array(le.length),Oe=[],He=0;le.forEach((lt,ft)=>{Ie.hasOwnProperty(lt)?_e[ft]=Ie[lt]:(Oe.push(lt),ge.hasOwnProperty(lt)||(ge[lt]=[]),ge[lt].push(()=>{_e[ft]=Ie[lt],++He===Oe.length&&ae(_e)}))}),Oe.length===0&&ae(_e)};function De(oe,le,Ve={}){if(!("argPackAdvance"in le))throw new TypeError("registerType registeredInstance requires argPackAdvance");return function(ae,_e,Oe={}){var He=_e.name;if(ae||z(`type "${He}" must have a positive integer typeid pointer`),Ie.hasOwnProperty(ae)){if(Oe.ignoreDuplicateRegistrations)return;z(`Cannot register type '${He}' twice`)}if(Ie[ae]=_e,ge.hasOwnProperty(ae)){var lt=ge[ae];delete ge[ae],lt.forEach(ft=>ft())}}(oe,le,Ve)}function ke(){this.allocated=[void 0],this.freelist=[]}var je=new ke,et=()=>{for(var oe=0,le=je.reserved;le<je.allocated.length;++le)je.allocated[le]!==void 0&&++oe;return oe},mt=oe=>(oe||z("Cannot use deleted val. handle = "+oe),je.get(oe).value),ze=oe=>{switch(oe){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return je.allocate({refcount:1,value:oe})}};function ht(oe){return this.fromWireType(_[oe>>2])}var nt=(oe,le)=>{switch(le){case 4:return function(Ve){return this.fromWireType(C[Ve>>2])};case 8:return function(Ve){return this.fromWireType(S[Ve>>3])};default:throw new TypeError(`invalid float width (${le}): ${oe}`)}},zt=(oe,le,Ve)=>{switch(le){case 1:return Ve?ae=>p[ae>>0]:ae=>b[ae>>0];case 2:return Ve?ae=>w[ae>>1]:ae=>v[ae>>1];case 4:return Ve?ae=>_[ae>>2]:ae=>y[ae>>2];default:throw new TypeError(`invalid integer width (${le}): ${oe}`)}};function Fe(oe){return this.fromWireType(y[oe>>2])}var re,ie=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,de=(oe,le,Ve)=>{for(var ae=le+Ve,_e=le;oe[_e]&&!(_e>=ae);)++_e;if(_e-le>16&&oe.buffer&&ie)return ie.decode(oe.subarray(le,_e));for(var Oe="";le<_e;){var He=oe[le++];if(128&He){var lt=63&oe[le++];if((224&He)!=192){var ft=63&oe[le++];if((He=(240&He)==224?(15&He)<<12|lt<<6|ft:(7&He)<<18|lt<<12|ft<<6|63&oe[le++])<65536)Oe+=String.fromCharCode(He);else{var kt=He-65536;Oe+=String.fromCharCode(55296|kt>>10,56320|1023&kt)}}else Oe+=String.fromCharCode((31&He)<<6|lt)}else Oe+=String.fromCharCode(He)}return Oe},Z=(oe,le)=>oe?de(b,oe,le):"",O=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,q=(oe,le)=>{for(var Ve=oe,ae=Ve>>1,_e=ae+le/2;!(ae>=_e)&&v[ae];)++ae;if((Ve=ae<<1)-oe>32&&O)return O.decode(b.subarray(oe,Ve));for(var Oe="",He=0;!(He>=le/2);++He){var lt=w[oe+2*He>>1];if(lt==0)break;Oe+=String.fromCharCode(lt)}return Oe},Q=(oe,le,Ve)=>{if(Ve===void 0&&(Ve=2147483647),Ve<2)return 0;for(var ae=le,_e=(Ve-=2)<2*oe.length?Ve/2:oe.length,Oe=0;Oe<_e;++Oe){var He=oe.charCodeAt(Oe);w[le>>1]=He,le+=2}return w[le>>1]=0,le-ae},ce=oe=>2*oe.length,be=(oe,le)=>{for(var Ve=0,ae="";!(Ve>=le/4);){var _e=_[oe+4*Ve>>2];if(_e==0)break;if(++Ve,_e>=65536){var Oe=_e-65536;ae+=String.fromCharCode(55296|Oe>>10,56320|1023&Oe)}else ae+=String.fromCharCode(_e)}return ae},Ae=(oe,le,Ve)=>{if(Ve===void 0&&(Ve=2147483647),Ve<4)return 0;for(var ae=le,_e=ae+Ve-4,Oe=0;Oe<oe.length;++Oe){var He=oe.charCodeAt(Oe);if(He>=55296&&He<=57343&&(He=65536+((1023&He)<<10)|1023&oe.charCodeAt(++Oe)),_[le>>2]=He,(le+=4)+4>_e)break}return _[le>>2]=0,le-ae},Pe=oe=>{for(var le=0,Ve=0;Ve<oe.length;++Ve){var ae=oe.charCodeAt(Ve);ae>=55296&&ae<=57343&&++Ve,le+=4}return le};re=()=>performance.now();var tt=oe=>{var le=(oe-f.buffer.byteLength+65535)/65536;try{return f.grow(le),I(),1}catch{}},qe=[null,[],[]];(()=>{for(var oe=new Array(256),le=0;le<256;++le)oe[le]=String.fromCharCode(le);ee=oe})(),xe=c.BindingError=class extends Error{constructor(oe){super(oe),this.name="BindingError"}},K=c.InternalError=class extends Error{constructor(oe){super(oe),this.name="InternalError"}},Object.assign(ke.prototype,{get(oe){return this.allocated[oe]},has(oe){return this.allocated[oe]!==void 0},allocate(oe){var le=this.freelist.pop()||this.allocated.length;return this.allocated[le]=oe,le},free(oe){this.allocated[oe]=void 0,this.freelist.push(oe)}}),je.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),je.reserved=je.allocated.length,c.count_emval_handles=et;var wt,me={_embind_register_bigint:(oe,le,Ve,ae,_e)=>{},_embind_register_bool:(oe,le,Ve,ae)=>{De(oe,{name:le=$(le),fromWireType:function(_e){return!!_e},toWireType:function(_e,Oe){return Oe?Ve:ae},argPackAdvance:8,readValueFromPointer:function(_e){return this.fromWireType(b[_e])},destructorFunction:null})},_embind_register_constant:(oe,le,Ve)=>{oe=$(oe),Se([],[le],function(ae){return ae=ae[0],c[oe]=ae.fromWireType(Ve),[]})},_embind_register_emval:(oe,le)=>{De(oe,{name:le=$(le),fromWireType:Ve=>{var ae=mt(Ve);return(_e=>{_e>=je.reserved&&--je.get(_e).refcount==0&&je.free(_e)})(Ve),ae},toWireType:(Ve,ae)=>ze(ae),argPackAdvance:8,readValueFromPointer:ht,destructorFunction:null})},_embind_register_float:(oe,le,Ve)=>{De(oe,{name:le=$(le),fromWireType:ae=>ae,toWireType:(ae,_e)=>_e,argPackAdvance:8,readValueFromPointer:nt(le,Ve),destructorFunction:null})},_embind_register_integer:(oe,le,Ve,ae,_e)=>{le=$(le);var Oe=ft=>ft;if(ae===0){var He=32-8*Ve;Oe=ft=>ft<<He>>>He}var lt=le.includes("unsigned");De(oe,{name:le,fromWireType:Oe,toWireType:lt?function(ft,kt){return this.name,kt>>>0}:function(ft,kt){return this.name,kt},argPackAdvance:8,readValueFromPointer:zt(le,Ve,ae!==0),destructorFunction:null})},_embind_register_memory_view:(oe,le,Ve)=>{var ae=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][le];function _e(Oe){var He=y[Oe>>2],lt=y[Oe+4>>2];return new ae(p.buffer,lt,He)}De(oe,{name:Ve=$(Ve),fromWireType:_e,argPackAdvance:8,readValueFromPointer:_e},{ignoreDuplicateRegistrations:!0})},_embind_register_std_string:(oe,le)=>{var Ve=(le=$(le))==="std::string";De(oe,{name:le,fromWireType:ae=>{var _e,Oe=y[ae>>2],He=ae+4;if(Ve)for(var lt=He,ft=0;ft<=Oe;++ft){var kt=He+ft;if(ft==Oe||b[kt]==0){var ii=Z(lt,kt-lt);_e===void 0?_e=ii:(_e+="\0",_e+=ii),lt=kt+1}}else{var Ht=new Array(Oe);for(ft=0;ft<Oe;++ft)Ht[ft]=String.fromCharCode(b[He+ft]);_e=Ht.join("")}return Ye(ae),_e},toWireType:(ae,_e)=>{var Oe;_e instanceof ArrayBuffer&&(_e=new Uint8Array(_e));var He=typeof _e=="string";He||_e instanceof Uint8Array||_e instanceof Uint8ClampedArray||_e instanceof Int8Array||z("Cannot pass non-string to std::string"),Oe=Ve&&He?(Ht=>{for(var pi=0,ui=0;ui<Ht.length;++ui){var Ei=Ht.charCodeAt(ui);Ei<=127?pi++:Ei<=2047?pi+=2:Ei>=55296&&Ei<=57343?(pi+=4,++ui):pi+=3}return pi})(_e):_e.length;var lt=Ze(4+Oe+1),ft=lt+4;if(y[lt>>2]=Oe,Ve&&He)((Ht,pi,ui,Ei)=>{if(!(Ei>0))return 0;for(var As=ui,nr=ui+Ei-1,ni=0;ni<Ht.length;++ni){var Qi=Ht.charCodeAt(ni);if(Qi>=55296&&Qi<=57343&&(Qi=65536+((1023&Qi)<<10)|1023&Ht.charCodeAt(++ni)),Qi<=127){if(ui>=nr)break;pi[ui++]=Qi}else if(Qi<=2047){if(ui+1>=nr)break;pi[ui++]=192|Qi>>6,pi[ui++]=128|63&Qi}else if(Qi<=65535){if(ui+2>=nr)break;pi[ui++]=224|Qi>>12,pi[ui++]=128|Qi>>6&63,pi[ui++]=128|63&Qi}else{if(ui+3>=nr)break;pi[ui++]=240|Qi>>18,pi[ui++]=128|Qi>>12&63,pi[ui++]=128|Qi>>6&63,pi[ui++]=128|63&Qi}}pi[ui]=0})(_e,b,ft,Oe+1);else if(He)for(var kt=0;kt<Oe;++kt){var ii=_e.charCodeAt(kt);ii>255&&(Ye(ft),z("String has UTF-16 code units that do not fit in 8 bits")),b[ft+kt]=ii}else for(kt=0;kt<Oe;++kt)b[ft+kt]=_e[kt];return ae!==null&&ae.push(Ye,lt),lt},argPackAdvance:8,readValueFromPointer:Fe,destructorFunction:ae=>Ye(ae)})},_embind_register_std_wstring:(oe,le,Ve)=>{var ae,_e,Oe,He,lt;Ve=$(Ve),le===2?(ae=q,_e=Q,He=ce,Oe=()=>v,lt=1):le===4&&(ae=be,_e=Ae,He=Pe,Oe=()=>y,lt=2),De(oe,{name:Ve,fromWireType:ft=>{for(var kt,ii=y[ft>>2],Ht=Oe(),pi=ft+4,ui=0;ui<=ii;++ui){var Ei=ft+4+ui*le;if(ui==ii||Ht[Ei>>lt]==0){var As=ae(pi,Ei-pi);kt===void 0?kt=As:(kt+="\0",kt+=As),pi=Ei+le}}return Ye(ft),kt},toWireType:(ft,kt)=>{typeof kt!="string"&&z(`Cannot pass non-string to C++ string type ${Ve}`);var ii=He(kt),Ht=Ze(4+ii+le);return y[Ht>>2]=ii>>lt,_e(kt,Ht+4,ii+le),ft!==null&&ft.push(Ye,Ht),Ht},argPackAdvance:8,readValueFromPointer:ht,destructorFunction:ft=>Ye(ft)})},_embind_register_void:(oe,le)=>{De(oe,{isVoid:!0,name:le=$(le),argPackAdvance:0,fromWireType:()=>{},toWireType:(Ve,ae)=>{}})},emscripten_get_now:re,emscripten_memcpy_big:(oe,le,Ve)=>b.copyWithin(oe,le,le+Ve),emscripten_resize_heap:oe=>{var le=b.length,Ve=2147483648;if((oe>>>=0)>Ve)return!1;for(var ae,_e=1;_e<=4;_e*=2){var Oe=le*(1+.2/_e);Oe=Math.min(Oe,oe+100663296);var He=Math.min(Ve,(ae=Math.max(oe,Oe))+(65536-ae%65536)%65536);if(tt(He))return!0}return!1},fd_write:(oe,le,Ve,ae)=>{for(var _e=0,Oe=0;Oe<Ve;Oe++){var He=y[le>>2],lt=y[le+4>>2];le+=8;for(var ft=0;ft<lt;ft++)kt=oe,ii=b[He+ft],Ht=void 0,Ht=qe[kt],ii===0||ii===10?((kt===1?g:m)(de(Ht,0)),Ht.length=0):Ht.push(ii);_e+=lt}var kt,ii,Ht;return y[ae>>2]=_e,0}},fe=function(){var oe,le,Ve,ae,_e={env:me,wasi_snapshot_preview1:me};function Oe(He,lt){var ft,kt=He.exports;return f=(fe=kt).memory,I(),fe.__indirect_function_table,ft=fe.__wasm_call_ctors,D.unshift(ft),function(ii){if(E--,c.monitorRunDependencies&&c.monitorRunDependencies(E),E==0&&W){var Ht=W;W=null,Ht()}}(),kt}if(E++,c.monitorRunDependencies&&c.monitorRunDependencies(E),c.instantiateWasm)try{return c.instantiateWasm(_e,Oe)}catch(He){m(`Module.instantiateWasm callback failed with error: ${He}`),l(He)}return(oe=h,le=N,Ve=_e,ae=function(He){Oe(He.instance)},oe||typeof WebAssembly.instantiateStreaming!="function"||U(le)||typeof fetch!="function"?Y(le,Ve,ae):fetch(le,{credentials:"same-origin"}).then(He=>WebAssembly.instantiateStreaming(He,Ve).then(ae,function(lt){return m(`wasm streaming compile failed: ${lt}`),m("falling back to ArrayBuffer instantiation"),Y(le,Ve,ae)}))).catch(l),{}}(),Ze=oe=>(Ze=fe.malloc)(oe),Ye=oe=>(Ye=fe.free)(oe);function Xe(){function oe(){wt||(wt=!0,c.calledRun=!0,k||(ne(D),a(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),function(){if(c.postRun)for(typeof c.postRun=="function"&&(c.postRun=[c.postRun]);c.postRun.length;)le=c.postRun.shift(),M.unshift(le);var le;ne(M)}()))}E>0||(function(){if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)le=c.preRun.shift(),T.unshift(le);var le;ne(T)}(),E>0||(c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),oe()},1)):oe()))}if(c._omalloc=oe=>(c._omalloc=fe.omalloc)(oe),c._ofree=oe=>(c._ofree=fe.ofree)(oe),c._getLastOnigError=()=>(c._getLastOnigError=fe.getLastOnigError)(),c._createOnigScanner=(oe,le,Ve,ae,_e)=>(c._createOnigScanner=fe.createOnigScanner)(oe,le,Ve,ae,_e),c._freeOnigScanner=oe=>(c._freeOnigScanner=fe.freeOnigScanner)(oe),c._findNextOnigScannerMatch=(oe,le,Ve,ae,_e,Oe)=>(c._findNextOnigScannerMatch=fe.findNextOnigScannerMatch)(oe,le,Ve,ae,_e,Oe),c._findNextOnigScannerMatchDbg=(oe,le,Ve,ae,_e,Oe)=>(c._findNextOnigScannerMatchDbg=fe.findNextOnigScannerMatchDbg)(oe,le,Ve,ae,_e,Oe),c.__embind_initialize_bindings=()=>(c.__embind_initialize_bindings=fe._embind_initialize_bindings)(),c.dynCall_jiji=(oe,le,Ve,ae,_e)=>(c.dynCall_jiji=fe.dynCall_jiji)(oe,le,Ve,ae,_e),c.UTF8ToString=Z,W=function oe(){wt||Xe(),wt||(W=oe)},c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();return Xe(),o.ready});s.exports=r}},i={},function s(r){var o=i[r];if(o!==void 0)return o.exports;var a=i[r]={exports:{}};return t[r].call(a.exports,a,a.exports,s),a.exports}(770);var t,i})})(OQ);var nD=OQ.exports,ZQ={exports:{}};(function(n,e){var t={};(function(i,s){n.exports=s()})(vc,()=>(()=>{var i={350:(r,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UseOnigurumaFindOptions=o.DebugFlags=void 0,o.DebugFlags={InDebugMode:typeof process<"u"&&!!t.VSCODE_TEXTMATE_DEBUG},o.UseOnigurumaFindOptions=!1},442:(r,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.applyStateStackDiff=o.diffStateStacksRefEq=void 0;const l=a(391);o.diffStateStacksRefEq=function(c,d){let u=0;const h=[];let f=c,g=d;for(;f!==g;)f&&(!g||f.depth>=g.depth)?(u++,f=f.parent):(h.push(g.toStateStackFrame()),g=g.parent);return{pops:u,newFrames:h.reverse()}},o.applyStateStackDiff=function(c,d){let u=c;for(let h=0;h<d.pops;h++)u=u.parent;for(const h of d.newFrames)u=l.StateStackImpl.pushFrame(u,h);return u}},36:(r,o)=>{var a;Object.defineProperty(o,"__esModule",{value:!0}),o.toOptionalTokenType=o.EncodedTokenAttributes=void 0,(a=o.EncodedTokenAttributes||(o.EncodedTokenAttributes={})).toBinaryStr=function(l){return l.toString(2).padStart(32,"0")},a.print=function(l){const c=a.getLanguageId(l),d=a.getTokenType(l),u=a.getFontStyle(l),h=a.getForeground(l),f=a.getBackground(l);console.log({languageId:c,tokenType:d,fontStyle:u,foreground:h,background:f})},a.getLanguageId=function(l){return(255&l)>>>0},a.getTokenType=function(l){return(768&l)>>>8},a.containsBalancedBrackets=function(l){return(1024&l)!=0},a.getFontStyle=function(l){return(30720&l)>>>11},a.getForeground=function(l){return(16744448&l)>>>15},a.getBackground=function(l){return(4278190080&l)>>>24},a.set=function(l,c,d,u,h,f,g){let m=a.getLanguageId(l),p=a.getTokenType(l),b=a.containsBalancedBrackets(l)?1:0,w=a.getFontStyle(l),v=a.getForeground(l),_=a.getBackground(l);return c!==0&&(m=c),d!==8&&(p=d),u!==null&&(b=u?1:0),h!==-1&&(w=h),f!==0&&(v=f),g!==0&&(_=g),(m<<0|p<<8|b<<10|w<<11|v<<15|_<<24)>>>0},o.toOptionalTokenType=function(l){return l}},996:(r,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BasicScopeAttributesProvider=o.BasicScopeAttributes=void 0;const l=a(878);class c{constructor(f,g){this.languageId=f,this.tokenType=g}}o.BasicScopeAttributes=c;class d{constructor(f,g){this._getBasicScopeAttributes=new l.CachedFn(m=>{const p=this._scopeToLanguage(m),b=this._toStandardTokenType(m);return new c(p,b)}),this._defaultAttributes=new c(f,8),this._embeddedLanguagesMatcher=new u(Object.entries(g||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(f){return f===null?d._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(f)}_scopeToLanguage(f){return this._embeddedLanguagesMatcher.match(f)||0}_toStandardTokenType(f){const g=f.match(d.STANDARD_TOKEN_TYPE_REGEXP);if(!g)return 8;switch(g[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}}o.BasicScopeAttributesProvider=d,d._NULL_SCOPE_METADATA=new c(0,0),d.STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/;class u{constructor(f){if(f.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(f);const g=f.map(([m,p])=>l.escapeRegExpCharacters(m));g.sort(),g.reverse(),this.scopesRegExp=new RegExp(`^((${g.join(")|(")}))($|\\.)`,"")}}match(f){if(!this.scopesRegExp)return;const g=f.match(this.scopesRegExp);return g?this.values.get(g[1]):void 0}}},947:(r,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.LineTokens=o.BalancedBracketSelectors=o.StateStackImpl=o.AttributedScopeStack=o.Grammar=o.createGrammar=void 0;const l=a(350),c=a(36),d=a(736),u=a(44),h=a(792),f=a(583),g=a(878),m=a(996),p=a(47);function b(I,T,D,M,E){const W=d.createMatchers(T,w),P=h.RuleFactory.getCompiledRuleId(D,M,E.repository);for(const N of W)I.push({debugSelector:T,matcher:N.matcher,ruleId:P,grammar:E,priority:N.priority})}function w(I,T){if(T.length<I.length)return!1;let D=0;return I.every(M=>{for(let E=D;E<T.length;E++)if(v(T[E],M))return D=E+1,!0;return!1})}function v(I,T){if(!I)return!1;if(I===T)return!0;const D=T.length;return I.length>D&&I.substr(0,D)===T&&I[D]==="."}o.createGrammar=function(I,T,D,M,E,W,P,N){return new _(I,T,D,M,E,W,P,N)};class _{constructor(T,D,M,E,W,P,N,H){if(this._rootScopeName=T,this.balancedBracketSelectors=P,this._onigLib=H,this._basicScopeAttributesProvider=new m.BasicScopeAttributesProvider(M,E),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=N,this._grammar=y(D,null),this._injections=null,this._tokenTypeMatchers=[],W)for(const U of Object.keys(W)){const B=d.createMatchers(U,w);for(const Y of B)this._tokenTypeMatchers.push({matcher:Y.matcher,type:W[U]})}}get themeProvider(){return this._grammarRepository}dispose(){for(const T of this._ruleId2desc)T&&T.dispose()}createOnigScanner(T){return this._onigLib.createOnigScanner(T)}createOnigString(T){return this._onigLib.createOnigString(T)}getMetadataForScope(T){return this._basicScopeAttributesProvider.getBasicScopeAttributes(T)}_collectInjections(){const T=[],D=this._rootScopeName,M=(E=>E===this._rootScopeName?this._grammar:this.getExternalGrammar(E))(D);if(M){const E=M.injections;if(E)for(let P in E)b(T,P,E[P],this,M);const W=this._grammarRepository.injections(D);W&&W.forEach(P=>{const N=this.getExternalGrammar(P);if(N){const H=N.injectionSelector;H&&b(T,H,N,this,N)}})}return T.sort((E,W)=>E.priority-W.priority),T}getInjections(){if(this._injections===null&&(this._injections=this._collectInjections(),l.DebugFlags.InDebugMode&&this._injections.length>0)){console.log(`Grammar ${this._rootScopeName} contains the following injections:`);for(const T of this._injections)console.log(`  - ${T.debugSelector}`)}return this._injections}registerRule(T){const D=++this._lastRuleId,M=T(h.ruleIdFromNumber(D));return this._ruleId2desc[D]=M,M}getRule(T){return this._ruleId2desc[h.ruleIdToNumber(T)]}getExternalGrammar(T,D){if(this._includedGrammars[T])return this._includedGrammars[T];if(this._grammarRepository){const M=this._grammarRepository.lookup(T);if(M)return this._includedGrammars[T]=y(M,D&&D.$base),this._includedGrammars[T]}}tokenizeLine(T,D,M=0){const E=this._tokenize(T,D,!1,M);return{tokens:E.lineTokens.getResult(E.ruleStack,E.lineLength),ruleStack:E.ruleStack,stoppedEarly:E.stoppedEarly}}tokenizeLine2(T,D,M=0){const E=this._tokenize(T,D,!0,M);return{tokens:E.lineTokens.getBinaryResult(E.ruleStack,E.lineLength),ruleStack:E.ruleStack,stoppedEarly:E.stoppedEarly}}_tokenize(T,D,M,E){let W;if(this._rootId===-1&&(this._rootId=h.RuleFactory.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections()),D&&D!==S.NULL)W=!1,D.reset();else{W=!0;const B=this._basicScopeAttributesProvider.getDefaultAttributes(),Y=this.themeProvider.getDefaults(),ne=c.EncodedTokenAttributes.set(0,B.languageId,B.tokenType,null,Y.fontStyle,Y.foregroundId,Y.backgroundId),ee=this.getRule(this._rootId).getName(null,null);let $;$=ee?C.createRootAndLookUpScopeName(ee,ne,this):C.createRoot("unknown",ne),D=new S(null,this._rootId,-1,-1,!1,null,$,$)}T+=`
`;const P=this.createOnigString(T),N=P.content.length,H=new k(M,T,this._tokenTypeMatchers,this.balancedBracketSelectors),U=p._tokenizeString(this,P,W,0,D,H,!0,E);return u.disposeOnigString(P),{lineLength:N,lineTokens:H,ruleStack:U.stack,stoppedEarly:U.stoppedEarly}}}function y(I,T){return(I=g.clone(I)).repository=I.repository||{},I.repository.$self={$vscodeTextmateLocation:I.$vscodeTextmateLocation,patterns:I.patterns,name:I.scopeName},I.repository.$base=T||I.repository.$self,I}o.Grammar=_;class C{constructor(T,D,M){this.parent=T,this.scopePath=D,this.tokenAttributes=M}static fromExtension(T,D){let M=T,E=T?.scopePath??null;for(const W of D)E=f.ScopeStack.push(E,W.scopeNames),M=new C(M,E,W.encodedTokenAttributes);return M}static createRoot(T,D){return new C(null,new f.ScopeStack(null,T),D)}static createRootAndLookUpScopeName(T,D,M){const E=M.getMetadataForScope(T),W=new f.ScopeStack(null,T),P=M.themeProvider.themeMatch(W),N=C.mergeAttributes(D,E,P);return new C(null,W,N)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(T){return C.equals(this,T)}static equals(T,D){for(;;){if(T===D||!T&&!D)return!0;if(!T||!D||T.scopeName!==D.scopeName||T.tokenAttributes!==D.tokenAttributes)return!1;T=T.parent,D=D.parent}}static mergeAttributes(T,D,M){let E=-1,W=0,P=0;return M!==null&&(E=M.fontStyle,W=M.foregroundId,P=M.backgroundId),c.EncodedTokenAttributes.set(T,D.languageId,D.tokenType,null,E,W,P)}pushAttributed(T,D){if(T===null)return this;if(T.indexOf(" ")===-1)return C._pushAttributed(this,T,D);const M=T.split(/ /g);let E=this;for(const W of M)E=C._pushAttributed(E,W,D);return E}static _pushAttributed(T,D,M){const E=M.getMetadataForScope(D),W=T.scopePath.push(D),P=M.themeProvider.themeMatch(W),N=C.mergeAttributes(T.tokenAttributes,E,P);return new C(T,W,N)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(T){const D=[];let M=this;for(;M&&M!==T;)D.push({encodedTokenAttributes:M.tokenAttributes,scopeNames:M.scopePath.getExtensionIfDefined(M.parent?.scopePath??null)}),M=M.parent;return M===T?D.reverse():void 0}}o.AttributedScopeStack=C;class S{constructor(T,D,M,E,W,P,N,H){this.parent=T,this.ruleId=D,this.beginRuleCapturedEOL=W,this.endRule=P,this.nameScopesList=N,this.contentNameScopesList=H,this._stackElementBrand=void 0,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=M,this._anchorPos=E}equals(T){return T!==null&&S._equals(this,T)}static _equals(T,D){return T===D||!!this._structuralEquals(T,D)&&C.equals(T.contentNameScopesList,D.contentNameScopesList)}static _structuralEquals(T,D){for(;;){if(T===D||!T&&!D)return!0;if(!T||!D||T.depth!==D.depth||T.ruleId!==D.ruleId||T.endRule!==D.endRule)return!1;T=T.parent,D=D.parent}}clone(){return this}static _reset(T){for(;T;)T._enterPos=-1,T._anchorPos=-1,T=T.parent}reset(){S._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(T,D,M,E,W,P,N){return new S(this,T,D,M,E,W,P,N)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(T){return T.getRule(this.ruleId)}toString(){const T=[];return this._writeString(T,0),"["+T.join(",")+"]"}_writeString(T,D){return this.parent&&(D=this.parent._writeString(T,D)),T[D++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,D}withContentNameScopesList(T){return this.contentNameScopesList===T?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,T)}withEndRule(T){return this.endRule===T?this:new S(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,T,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(T){let D=this;for(;D&&D._enterPos===T._enterPos;){if(D.ruleId===T.ruleId)return!0;D=D.parent}return!1}toStateStackFrame(){return{ruleId:h.ruleIdToNumber(this.ruleId),beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(T,D){const M=C.fromExtension(T?.nameScopesList??null,D.nameScopesList);return new S(T,h.ruleIdFromNumber(D.ruleId),D.enterPos??-1,D.anchorPos??-1,D.beginRuleCapturedEOL,D.endRule,M,C.fromExtension(M,D.contentNameScopesList))}}o.StateStackImpl=S,S.NULL=new S(null,0,0,0,!1,null,null,null),o.BalancedBracketSelectors=class{constructor(I,T){this.allowAny=!1,this.balancedBracketScopes=I.flatMap(D=>D==="*"?(this.allowAny=!0,[]):d.createMatchers(D,w).map(M=>M.matcher)),this.unbalancedBracketScopes=T.flatMap(D=>d.createMatchers(D,w).map(M=>M.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(I){for(const T of this.unbalancedBracketScopes)if(T(I))return!1;for(const T of this.balancedBracketScopes)if(T(I))return!0;return this.allowAny}};class k{constructor(T,D,M,E){this.balancedBracketSelectors=E,this._emitBinaryTokens=T,this._tokenTypeOverrides=M,l.DebugFlags.InDebugMode?this._lineText=D:this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}produce(T,D){this.produceFromScopes(T.contentNameScopesList,D)}produceFromScopes(T,D){if(this._lastTokenEndIndex>=D)return;if(this._emitBinaryTokens){let E=T?.tokenAttributes??0,W=!1;if(this.balancedBracketSelectors?.matchesAlways&&(W=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const P=T?.getScopeNames()??[];for(const N of this._tokenTypeOverrides)N.matcher(P)&&(E=c.EncodedTokenAttributes.set(E,0,c.toOptionalTokenType(N.type),null,-1,0,0));this.balancedBracketSelectors&&(W=this.balancedBracketSelectors.match(P))}if(W&&(E=c.EncodedTokenAttributes.set(E,0,8,W,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===E)return void(this._lastTokenEndIndex=D);if(l.DebugFlags.InDebugMode){const P=T?.getScopeNames()??[];console.log("  token: |"+this._lineText.substring(this._lastTokenEndIndex,D).replace(/\n$/,"\\n")+"|");for(let N=0;N<P.length;N++)console.log("      * "+P[N])}return this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(E),void(this._lastTokenEndIndex=D)}const M=T?.getScopeNames()??[];if(l.DebugFlags.InDebugMode){console.log("  token: |"+this._lineText.substring(this._lastTokenEndIndex,D).replace(/\n$/,"\\n")+"|");for(let E=0;E<M.length;E++)console.log("      * "+M[E])}this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:D,scopes:M}),this._lastTokenEndIndex=D}getResult(T,D){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===D-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(T,D),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(T,D){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===D-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(T,D),this._binaryTokens[this._binaryTokens.length-2]=0);const M=new Uint32Array(this._binaryTokens.length);for(let E=0,W=this._binaryTokens.length;E<W;E++)M[E]=this._binaryTokens[E];return M}}o.LineTokens=k},965:(r,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.parseInclude=o.TopLevelRepositoryReference=o.TopLevelReference=o.RelativeReference=o.SelfReference=o.BaseReference=o.ScopeDependencyProcessor=o.ExternalReferenceCollector=o.TopLevelRepositoryRuleReference=o.TopLevelRuleReference=void 0;const l=a(878);class c{constructor(S){this.scopeName=S}toKey(){return this.scopeName}}o.TopLevelRuleReference=c;class d{constructor(S,k){this.scopeName=S,this.ruleName=k}toKey(){return`${this.scopeName}#${this.ruleName}`}}o.TopLevelRepositoryRuleReference=d;class u{constructor(){this._references=[],this._seenReferenceKeys=new Set,this.visitedRule=new Set}get references(){return this._references}add(S){const k=S.toKey();this._seenReferenceKeys.has(k)||(this._seenReferenceKeys.add(k),this._references.push(S))}}function h(C,S,k,I){const T=k.lookup(C.scopeName);if(!T){if(C.scopeName===S)throw new Error(`No grammar provided for <${S}>`);return}const D=k.lookup(S);C instanceof c?g({baseGrammar:D,selfGrammar:T},I):f(C.ruleName,{baseGrammar:D,selfGrammar:T,repository:T.repository},I);const M=k.injections(C.scopeName);if(M)for(const E of M)I.add(new c(E))}function f(C,S,k){S.repository&&S.repository[C]&&m([S.repository[C]],S,k)}function g(C,S){C.selfGrammar.patterns&&Array.isArray(C.selfGrammar.patterns)&&m(C.selfGrammar.patterns,{...C,repository:C.selfGrammar.repository},S),C.selfGrammar.injections&&m(Object.values(C.selfGrammar.injections),{...C,repository:C.selfGrammar.repository},S)}function m(C,S,k){for(const I of C){if(k.visitedRule.has(I))continue;k.visitedRule.add(I);const T=I.repository?l.mergeObjects({},S.repository,I.repository):S.repository;Array.isArray(I.patterns)&&m(I.patterns,{...S,repository:T},k);const D=I.include;if(!D)continue;const M=y(D);switch(M.kind){case 0:g({...S,selfGrammar:S.baseGrammar},k);break;case 1:g(S,k);break;case 2:f(M.ruleName,{...S,repository:T},k);break;case 3:case 4:const E=M.scopeName===S.selfGrammar.scopeName?S.selfGrammar:M.scopeName===S.baseGrammar.scopeName?S.baseGrammar:void 0;if(E){const W={baseGrammar:S.baseGrammar,selfGrammar:E,repository:T};M.kind===4?f(M.ruleName,W,k):g(W,k)}else M.kind===4?k.add(new d(M.scopeName,M.ruleName)):k.add(new c(M.scopeName))}}}o.ExternalReferenceCollector=u,o.ScopeDependencyProcessor=class{constructor(C,S){this.repo=C,this.initialScopeName=S,this.seenFullScopeRequests=new Set,this.seenPartialScopeRequests=new Set,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new c(this.initialScopeName)]}processQueue(){const C=this.Q;this.Q=[];const S=new u;for(const k of C)h(k,this.initialScopeName,this.repo,S);for(const k of S.references)if(k instanceof c){if(this.seenFullScopeRequests.has(k.scopeName))continue;this.seenFullScopeRequests.add(k.scopeName),this.Q.push(k)}else{if(this.seenFullScopeRequests.has(k.scopeName)||this.seenPartialScopeRequests.has(k.toKey()))continue;this.seenPartialScopeRequests.add(k.toKey()),this.Q.push(k)}}};class p{constructor(){this.kind=0}}o.BaseReference=p;class b{constructor(){this.kind=1}}o.SelfReference=b;class w{constructor(S){this.ruleName=S,this.kind=2}}o.RelativeReference=w;class v{constructor(S){this.scopeName=S,this.kind=3}}o.TopLevelReference=v;class _{constructor(S,k){this.scopeName=S,this.ruleName=k,this.kind=4}}function y(C){if(C==="$base")return new p;if(C==="$self")return new b;const S=C.indexOf("#");if(S===-1)return new v(C);if(S===0)return new w(C.substring(1));{const k=C.substring(0,S),I=C.substring(S+1);return new _(k,I)}}o.TopLevelRepositoryReference=_,o.parseInclude=y},391:function(r,o,a){var l=this&&this.__createBinding||(Object.create?function(d,u,h,f){f===void 0&&(f=h),Object.defineProperty(d,f,{enumerable:!0,get:function(){return u[h]}})}:function(d,u,h,f){f===void 0&&(f=h),d[f]=u[h]}),c=this&&this.__exportStar||function(d,u){for(var h in d)h==="default"||Object.prototype.hasOwnProperty.call(u,h)||l(u,d,h)};Object.defineProperty(o,"__esModule",{value:!0}),c(a(947),o)},47:(r,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.LocalStackElement=o._tokenizeString=void 0;const l=a(350),c=a(44),d=a(792),u=a(878);class h{constructor(_,y){this.stack=_,this.stoppedEarly=y}}function f(v,_,y,C,S,k,I,T){const D=_.content.length;let M=!1,E=-1;if(I){const N=function(H,U,B,Y,ne,ee){let $=ne.beginRuleCapturedEOL?0:-1;const ge=[];for(let Ie=ne;Ie;Ie=Ie.pop()){const xe=Ie.getRule(H);xe instanceof d.BeginWhileRule&&ge.push({rule:xe,stack:Ie})}for(let Ie=ge.pop();Ie;Ie=ge.pop()){const{ruleScanner:xe,findOptions:z}=m(Ie.rule,H,Ie.stack.endRule,B,Y===$),K=xe.findNextMatchSync(U,Y,z);if(l.DebugFlags.InDebugMode&&(console.log("  scanning for while rule"),console.log(xe.toString())),!K){l.DebugFlags.InDebugMode&&console.log("  popping "+Ie.rule.debugName+" - "+Ie.rule.debugWhileRegExp),ne=Ie.stack.pop();break}if(K.ruleId!==d.whileRuleId){ne=Ie.stack.pop();break}K.captureIndices&&K.captureIndices.length&&(ee.produce(Ie.stack,K.captureIndices[0].start),b(H,U,B,Ie.stack,ee,Ie.rule.whileCaptures,K.captureIndices),ee.produce(Ie.stack,K.captureIndices[0].end),$=K.captureIndices[0].end,K.captureIndices[0].end>Y&&(Y=K.captureIndices[0].end,B=!1))}return{stack:ne,linePos:Y,anchorPosition:$,isFirstLine:B}}(v,_,y,C,S,k);S=N.stack,C=N.linePos,y=N.isFirstLine,E=N.anchorPosition}const W=Date.now();for(;!M;){if(T!==0&&Date.now()-W>T)return new h(S,!0);P()}return new h(S,!1);function P(){l.DebugFlags.InDebugMode&&(console.log(""),console.log(`@@scanNext ${C}: |${_.content.substr(C).replace(/\n$/,"\\n")}|`));const N=function(Y,ne,ee,$,ge,Ie){const xe=function(ke,je,et,mt,ze,ht){const nt=ze.getRule(ke),{ruleScanner:zt,findOptions:Fe}=g(nt,ke,ze.endRule,et,mt===ht);let re=0;l.DebugFlags.InDebugMode&&(re=u.performanceNow());const ie=zt.findNextMatchSync(je,mt,Fe);if(l.DebugFlags.InDebugMode){const de=u.performanceNow()-re;de>5&&console.warn(`Rule ${nt.debugName} (${nt.id}) matching took ${de} against '${je}'`),console.log(`  scanning for (linePos: ${mt}, anchorPosition: ${ht})`),console.log(zt.toString()),ie&&console.log(`matched rule id: ${ie.ruleId} from ${ie.captureIndices[0].start} to ${ie.captureIndices[0].end}`)}return ie?{captureIndices:ie.captureIndices,matchedRuleId:ie.ruleId}:null}(Y,ne,ee,$,ge,Ie),z=Y.getInjections();if(z.length===0)return xe;const K=function(ke,je,et,mt,ze,ht,nt){let zt,Fe=Number.MAX_VALUE,re=null,ie=0;const de=ht.contentNameScopesList.getScopeNames();for(let Z=0,O=ke.length;Z<O;Z++){const q=ke[Z];if(!q.matcher(de))continue;const Q=je.getRule(q.ruleId),{ruleScanner:ce,findOptions:be}=g(Q,je,null,mt,ze===nt),Ae=ce.findNextMatchSync(et,ze,be);if(!Ae)continue;l.DebugFlags.InDebugMode&&(console.log(`  matched injection: ${q.debugSelector}`),console.log(ce.toString()));const Pe=Ae.captureIndices[0].start;if(!(Pe>=Fe)&&(Fe=Pe,re=Ae.captureIndices,zt=Ae.ruleId,ie=q.priority,Fe===ze))break}return re?{priorityMatch:ie===-1,captureIndices:re,matchedRuleId:zt}:null}(z,Y,ne,ee,$,ge,Ie);if(!K)return xe;if(!xe)return K;const Se=xe.captureIndices[0].start,De=K.captureIndices[0].start;return De<Se||K.priorityMatch&&De===Se?K:xe}(v,_,y,C,S,E);if(!N)return l.DebugFlags.InDebugMode&&console.log("  no more matches."),k.produce(S,D),void(M=!0);const H=N.captureIndices,U=N.matchedRuleId,B=!!(H&&H.length>0)&&H[0].end>C;if(U===d.endRuleId){const Y=S.getRule(v);l.DebugFlags.InDebugMode&&console.log("  popping "+Y.debugName+" - "+Y.debugEndRegExp),k.produce(S,H[0].start),S=S.withContentNameScopesList(S.nameScopesList),b(v,_,y,S,k,Y.endCaptures,H),k.produce(S,H[0].end);const ne=S;if(S=S.parent,E=ne.getAnchorPos(),!B&&ne.getEnterPos()===C)return l.DebugFlags.InDebugMode&&console.error("[1] - Grammar is in an endless loop - Grammar pushed & popped a rule without advancing"),S=ne,k.produce(S,D),void(M=!0)}else{const Y=v.getRule(U);k.produce(S,H[0].start);const ne=S,ee=Y.getName(_.content,H),$=S.contentNameScopesList.pushAttributed(ee,v);if(S=S.push(U,C,E,H[0].end===D,null,$,$),Y instanceof d.BeginEndRule){const ge=Y;l.DebugFlags.InDebugMode&&console.log("  pushing "+ge.debugName+" - "+ge.debugBeginRegExp),b(v,_,y,S,k,ge.beginCaptures,H),k.produce(S,H[0].end),E=H[0].end;const Ie=ge.getContentName(_.content,H),xe=$.pushAttributed(Ie,v);if(S=S.withContentNameScopesList(xe),ge.endHasBackReferences&&(S=S.withEndRule(ge.getEndWithResolvedBackReferences(_.content,H))),!B&&ne.hasSameRuleAs(S))return l.DebugFlags.InDebugMode&&console.error("[2] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),S=S.pop(),k.produce(S,D),void(M=!0)}else if(Y instanceof d.BeginWhileRule){const ge=Y;l.DebugFlags.InDebugMode&&console.log("  pushing "+ge.debugName),b(v,_,y,S,k,ge.beginCaptures,H),k.produce(S,H[0].end),E=H[0].end;const Ie=ge.getContentName(_.content,H),xe=$.pushAttributed(Ie,v);if(S=S.withContentNameScopesList(xe),ge.whileHasBackReferences&&(S=S.withEndRule(ge.getWhileWithResolvedBackReferences(_.content,H))),!B&&ne.hasSameRuleAs(S))return l.DebugFlags.InDebugMode&&console.error("[3] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),S=S.pop(),k.produce(S,D),void(M=!0)}else{const ge=Y;if(l.DebugFlags.InDebugMode&&console.log("  matched "+ge.debugName+" - "+ge.debugMatchRegExp),b(v,_,y,S,k,ge.captures,H),k.produce(S,H[0].end),S=S.pop(),!B)return l.DebugFlags.InDebugMode&&console.error("[4] - Grammar is in an endless loop - Grammar is not advancing, nor is it pushing/popping"),S=S.safePop(),k.produce(S,D),void(M=!0)}}H[0].end>C&&(C=H[0].end,y=!1)}}function g(v,_,y,C,S){return l.UseOnigurumaFindOptions?{ruleScanner:v.compile(_,y),findOptions:p(C,S)}:{ruleScanner:v.compileAG(_,y,C,S),findOptions:0}}function m(v,_,y,C,S){return l.UseOnigurumaFindOptions?{ruleScanner:v.compileWhile(_,y),findOptions:p(C,S)}:{ruleScanner:v.compileWhileAG(_,y,C,S),findOptions:0}}function p(v,_){let y=0;return v||(y|=1),_||(y|=4),y}function b(v,_,y,C,S,k,I){if(k.length===0)return;const T=_.content,D=Math.min(k.length,I.length),M=[],E=I[0].end;for(let W=0;W<D;W++){const P=k[W];if(P===null)continue;const N=I[W];if(N.length===0)continue;if(N.start>E)break;for(;M.length>0&&M[M.length-1].endPos<=N.start;)S.produceFromScopes(M[M.length-1].scopes,M[M.length-1].endPos),M.pop();if(M.length>0?S.produceFromScopes(M[M.length-1].scopes,N.start):S.produce(C,N.start),P.retokenizeCapturedWithRuleId){const U=P.getName(T,I),B=C.contentNameScopesList.pushAttributed(U,v),Y=P.getContentName(T,I),ne=B.pushAttributed(Y,v),ee=C.push(P.retokenizeCapturedWithRuleId,N.start,-1,!1,null,B,ne),$=v.createOnigString(T.substring(0,N.end));f(v,$,y&&N.start===0,N.start,ee,S,!1,0),c.disposeOnigString($);continue}const H=P.getName(T,I);if(H!==null){const U=(M.length>0?M[M.length-1].scopes:C.contentNameScopesList).pushAttributed(H,v);M.push(new w(U,N.end))}}for(;M.length>0;)S.produceFromScopes(M[M.length-1].scopes,M[M.length-1].endPos),M.pop()}o._tokenizeString=f;class w{constructor(_,y){this.scopes=_,this.endPos=y}}o.LocalStackElement=w},974:(r,o)=>{function a(u,h){throw new Error("Near offset "+u.pos+": "+h+" ~~~"+u.source.substr(u.pos,50)+"~~~")}Object.defineProperty(o,"__esModule",{value:!0}),o.parseJSON=void 0,o.parseJSON=function(u,h,f){let g=new l(u),m=new c,p=0,b=null,w=[],v=[];function _(){w.push(p),v.push(b)}function y(){p=w.pop(),b=v.pop()}function C(S){a(g,S)}for(;d(g,m);){if(p===0){if(b!==null&&C("too many constructs in root"),m.type===3){b={},f&&(b.$vscodeTextmateLocation=m.toLocation(h)),_(),p=1;continue}if(m.type===2){b=[],_(),p=4;continue}C("unexpected token in root")}if(p===2){if(m.type===5){y();continue}if(m.type===7){p=3;continue}C("expected , or }")}if(p===1||p===3){if(p===1&&m.type===5){y();continue}if(m.type===1){let S=m.value;if(d(g,m)&&m.type===6||C("expected colon"),d(g,m)||C("expected value"),p=2,m.type===1){b[S]=m.value;continue}if(m.type===8){b[S]=null;continue}if(m.type===9){b[S]=!0;continue}if(m.type===10){b[S]=!1;continue}if(m.type===11){b[S]=parseFloat(m.value);continue}if(m.type===2){let k=[];b[S]=k,_(),p=4,b=k;continue}if(m.type===3){let k={};f&&(k.$vscodeTextmateLocation=m.toLocation(h)),b[S]=k,_(),p=1,b=k;continue}}C("unexpected token in dict")}if(p===5){if(m.type===4){y();continue}if(m.type===7){p=6;continue}C("expected , or ]")}if(p===4||p===6){if(p===4&&m.type===4){y();continue}if(p=5,m.type===1){b.push(m.value);continue}if(m.type===8){b.push(null);continue}if(m.type===9){b.push(!0);continue}if(m.type===10){b.push(!1);continue}if(m.type===11){b.push(parseFloat(m.value));continue}if(m.type===2){let S=[];b.push(S),_(),p=4,b=S;continue}if(m.type===3){let S={};f&&(S.$vscodeTextmateLocation=m.toLocation(h)),b.push(S),_(),p=1,b=S;continue}C("unexpected token in array")}C("unknown state")}return v.length!==0&&C("unclosed constructs"),b};class l{constructor(h){this.source=h,this.pos=0,this.len=h.length,this.line=1,this.char=0}}class c{constructor(){this.value=null,this.type=0,this.offset=-1,this.len=-1,this.line=-1,this.char=-1}toLocation(h){return{filename:h,line:this.line,char:this.char}}}function d(u,h){h.value=null,h.type=0,h.offset=-1,h.len=-1,h.line=-1,h.char=-1;let f,g=u.source,m=u.pos,p=u.len,b=u.line,w=u.char;for(;;){if(m>=p)return!1;if(f=g.charCodeAt(m),f!==32&&f!==9&&f!==13){if(f!==10)break;m++,b++,w=0}else m++,w++}if(h.offset=m,h.line=b,h.char=w,f===34){for(h.type=1,m++,w++;;){if(m>=p)return!1;if(f=g.charCodeAt(m),m++,w++,f!==92){if(f===34)break}else m++,w++}h.value=g.substring(h.offset+1,m-1).replace(/\\u([0-9A-Fa-f]{4})/g,(v,_)=>String.fromCodePoint(parseInt(_,16))).replace(/\\(.)/g,(v,_)=>{switch(_){case'"':return'"';case"\\":return"\\";case"/":return"/";case"b":return"\b";case"f":return"\f";case"n":return`
`;case"r":return"\r";case"t":return"	";default:a(u,"invalid escape sequence")}throw new Error("unreachable")})}else if(f===91)h.type=2,m++,w++;else if(f===123)h.type=3,m++,w++;else if(f===93)h.type=4,m++,w++;else if(f===125)h.type=5,m++,w++;else if(f===58)h.type=6,m++,w++;else if(f===44)h.type=7,m++,w++;else if(f===110){if(h.type=8,m++,w++,f=g.charCodeAt(m),f!==117||(m++,w++,f=g.charCodeAt(m),f!==108)||(m++,w++,f=g.charCodeAt(m),f!==108))return!1;m++,w++}else if(f===116){if(h.type=9,m++,w++,f=g.charCodeAt(m),f!==114||(m++,w++,f=g.charCodeAt(m),f!==117)||(m++,w++,f=g.charCodeAt(m),f!==101))return!1;m++,w++}else if(f===102){if(h.type=10,m++,w++,f=g.charCodeAt(m),f!==97||(m++,w++,f=g.charCodeAt(m),f!==108)||(m++,w++,f=g.charCodeAt(m),f!==115)||(m++,w++,f=g.charCodeAt(m),f!==101))return!1;m++,w++}else for(h.type=11;;){if(m>=p)return!1;if(f=g.charCodeAt(m),!(f===46||f>=48&&f<=57||f===101||f===69||f===45||f===43))break;m++,w++}return h.len=m-h.offset,h.value===null&&(h.value=g.substr(h.offset,h.len)),u.pos=m,u.line=b,u.char=w,!0}},787:function(r,o,a){var l=this&&this.__createBinding||(Object.create?function(p,b,w,v){v===void 0&&(v=w),Object.defineProperty(p,v,{enumerable:!0,get:function(){return b[w]}})}:function(p,b,w,v){v===void 0&&(v=w),p[v]=b[w]}),c=this&&this.__exportStar||function(p,b){for(var w in p)w==="default"||Object.prototype.hasOwnProperty.call(b,w)||l(b,p,w)};Object.defineProperty(o,"__esModule",{value:!0}),o.applyStateStackDiff=o.diffStateStacksRefEq=o.parseRawGrammar=o.INITIAL=o.Registry=void 0;const d=a(391),u=a(50),h=a(652),f=a(583),g=a(965),m=a(442);Object.defineProperty(o,"applyStateStackDiff",{enumerable:!0,get:function(){return m.applyStateStackDiff}}),Object.defineProperty(o,"diffStateStacksRefEq",{enumerable:!0,get:function(){return m.diffStateStacksRefEq}}),c(a(44),o),o.Registry=class{constructor(p){this._options=p,this._syncRegistry=new h.SyncRegistry(f.Theme.createFromRawTheme(p.theme,p.colorMap),p.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(p,b){this._syncRegistry.setTheme(f.Theme.createFromRawTheme(p,b))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(p,b,w){return this.loadGrammarWithConfiguration(p,b,{embeddedLanguages:w})}loadGrammarWithConfiguration(p,b,w){return this._loadGrammar(p,b,w.embeddedLanguages,w.tokenTypes,new d.BalancedBracketSelectors(w.balancedBracketSelectors||[],w.unbalancedBracketSelectors||[]))}loadGrammar(p){return this._loadGrammar(p,0,null,null,null)}async _loadGrammar(p,b,w,v,_){const y=new g.ScopeDependencyProcessor(this._syncRegistry,p);for(;y.Q.length>0;)await Promise.all(y.Q.map(C=>this._loadSingleGrammar(C.scopeName))),y.processQueue();return this._grammarForScopeName(p,b,w,v,_)}async _loadSingleGrammar(p){return this._ensureGrammarCache.has(p)||this._ensureGrammarCache.set(p,this._doLoadSingleGrammar(p)),this._ensureGrammarCache.get(p)}async _doLoadSingleGrammar(p){const b=await this._options.loadGrammar(p);if(b){const w=typeof this._options.getInjections=="function"?this._options.getInjections(p):void 0;this._syncRegistry.addGrammar(b,w)}}async addGrammar(p,b=[],w=0,v=null){return this._syncRegistry.addGrammar(p,b),await this._grammarForScopeName(p.scopeName,w,v)}_grammarForScopeName(p,b=0,w=null,v=null,_=null){return this._syncRegistry.grammarForScopeName(p,b,w,v,_)}},o.INITIAL=d.StateStackImpl.NULL,o.parseRawGrammar=u.parseRawGrammar},736:(r,o)=>{function a(l){return!!l&&!!l.match(/[\w\.:]+/)}Object.defineProperty(o,"__esModule",{value:!0}),o.createMatchers=void 0,o.createMatchers=function(l,c){const d=[],u=function(m){let p=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,b=p.exec(m);return{next:()=>{if(!b)return null;const w=b[0];return b=p.exec(m),w}}}(l);let h=u.next();for(;h!==null;){let m=0;if(h.length===2&&h.charAt(1)===":"){switch(h.charAt(0)){case"R":m=1;break;case"L":m=-1;break;default:console.log(`Unknown priority ${h} in scope selector`)}h=u.next()}let p=g();if(d.push({matcher:p,priority:m}),h!==",")break;h=u.next()}return d;function f(){if(h==="-"){h=u.next();const m=f();return p=>!!m&&!m(p)}if(h==="("){h=u.next();const m=function(){const p=[];let b=g();for(;b&&(p.push(b),h==="|"||h===",");){do h=u.next();while(h==="|"||h===",");b=g()}return w=>p.some(v=>v(w))}();return h===")"&&(h=u.next()),m}if(a(h)){const m=[];do m.push(h),h=u.next();while(a(h));return p=>c(m,p)}return null}function g(){const m=[];let p=f();for(;p;)m.push(p),p=f();return b=>m.every(w=>w(b))}}},44:(r,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.disposeOnigString=void 0,o.disposeOnigString=function(a){typeof a.dispose=="function"&&a.dispose()}},50:(r,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.parseRawGrammar=void 0;const l=a(69),c=a(350),d=a(974);o.parseRawGrammar=function(u,h=null){return h!==null&&/\.json$/.test(h)?(f=u,g=h,c.DebugFlags.InDebugMode?d.parseJSON(f,g,!0):JSON.parse(f)):function(m,p){return c.DebugFlags.InDebugMode?l.parseWithLocation(m,p,"$vscodeTextmateLocation"):l.parsePLIST(m)}(u,h);var f,g}},69:(r,o)=>{function a(l,c,d){const u=l.length;let h=0,f=1,g=0;function m(K){if(d===null)h+=K;else for(;K>0;)l.charCodeAt(h)===10?(h++,f++,g=0):(h++,g++),K--}function p(K){d===null?h=K:m(K-h)}function b(){for(;h<u;){let K=l.charCodeAt(h);if(K!==32&&K!==9&&K!==13&&K!==10)break;m(1)}}function w(K){return l.substr(h,K.length)===K&&(m(K.length),!0)}function v(K){let Se=l.indexOf(K,h);p(Se!==-1?Se+K.length:u)}function _(K){let Se=l.indexOf(K,h);if(Se!==-1){let De=l.substring(h,Se);return p(Se+K.length),De}{let De=l.substr(h);return p(u),De}}u>0&&l.charCodeAt(0)===65279&&(h=1);let y=0,C=null,S=[],k=[],I=null;function T(K,Se){S.push(y),k.push(C),y=K,C=Se}function D(){if(S.length===0)return M("illegal state stack");y=S.pop(),C=k.pop()}function M(K){throw new Error("Near offset "+h+": "+K+" ~~~"+l.substr(h,50)+"~~~")}const E=function(){if(I===null)return M("missing <key>");let K={};d!==null&&(K[d]={filename:c,line:f,char:g}),C[I]=K,I=null,T(1,K)},W=function(){if(I===null)return M("missing <key>");let K=[];C[I]=K,I=null,T(2,K)},P=function(){let K={};d!==null&&(K[d]={filename:c,line:f,char:g}),C.push(K),T(1,K)},N=function(){let K=[];C.push(K),T(2,K)};function H(){if(y!==1)return M("unexpected </dict>");D()}function U(){return y===1||y!==2?M("unexpected </array>"):void D()}function B(K){if(y===1){if(I===null)return M("missing <key>");C[I]=K,I=null}else y===2?C.push(K):C=K}function Y(K){if(isNaN(K))return M("cannot parse float");if(y===1){if(I===null)return M("missing <key>");C[I]=K,I=null}else y===2?C.push(K):C=K}function ne(K){if(isNaN(K))return M("cannot parse integer");if(y===1){if(I===null)return M("missing <key>");C[I]=K,I=null}else y===2?C.push(K):C=K}function ee(K){if(y===1){if(I===null)return M("missing <key>");C[I]=K,I=null}else y===2?C.push(K):C=K}function $(K){if(y===1){if(I===null)return M("missing <key>");C[I]=K,I=null}else y===2?C.push(K):C=K}function ge(K){if(y===1){if(I===null)return M("missing <key>");C[I]=K,I=null}else y===2?C.push(K):C=K}function Ie(){let K=_(">"),Se=!1;return K.charCodeAt(K.length-1)===47&&(Se=!0,K=K.substring(0,K.length-1)),{name:K.trim(),isClosed:Se}}function xe(K){if(K.isClosed)return"";let Se=_("</");return v(">"),Se.replace(/&#([0-9]+);/g,function(De,ke){return String.fromCodePoint(parseInt(ke,10))}).replace(/&#x([0-9a-f]+);/g,function(De,ke){return String.fromCodePoint(parseInt(ke,16))}).replace(/&amp;|&lt;|&gt;|&quot;|&apos;/g,function(De){switch(De){case"&amp;":return"&";case"&lt;":return"<";case"&gt;":return">";case"&quot;":return'"';case"&apos;":return"'"}return De})}for(;h<u&&(b(),!(h>=u));){const K=l.charCodeAt(h);if(m(1),K!==60)return M("expected <");if(h>=u)return M("unexpected end of input");const Se=l.charCodeAt(h);if(Se===63){m(1),v("?>");continue}if(Se===33){if(m(1),w("--")){v("-->");continue}v(">");continue}if(Se===47){if(m(1),b(),w("plist")){v(">");continue}if(w("dict")){v(">"),H();continue}if(w("array")){v(">"),U();continue}return M("unexpected closed tag")}let De=Ie();switch(De.name){case"dict":y===1?E():y===2?P():(C={},d!==null&&(C[d]={filename:c,line:f,char:g}),T(1,C)),De.isClosed&&H();continue;case"array":y===1?W():y===2?N():(C=[],T(2,C)),De.isClosed&&U();continue;case"key":z=xe(De),y!==1?M("unexpected <key>"):I!==null?M("too many <key>"):I=z;continue;case"string":B(xe(De));continue;case"real":Y(parseFloat(xe(De)));continue;case"integer":ne(parseInt(xe(De),10));continue;case"date":ee(new Date(xe(De)));continue;case"data":$(xe(De));continue;case"true":xe(De),ge(!0);continue;case"false":xe(De),ge(!1);continue}if(!/^plist/.test(De.name))return M("unexpected opened tag "+De.name)}var z;return C}Object.defineProperty(o,"__esModule",{value:!0}),o.parsePLIST=o.parseWithLocation=void 0,o.parseWithLocation=function(l,c,d){return a(l,c,d)},o.parsePLIST=function(l){return a(l,null,null)}},652:(r,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SyncRegistry=void 0;const l=a(391);o.SyncRegistry=class{constructor(c,d){this._onigLibPromise=d,this._grammars=new Map,this._rawGrammars=new Map,this._injectionGrammars=new Map,this._theme=c}dispose(){for(const c of this._grammars.values())c.dispose()}setTheme(c){this._theme=c}getColorMap(){return this._theme.getColorMap()}addGrammar(c,d){this._rawGrammars.set(c.scopeName,c),d&&this._injectionGrammars.set(c.scopeName,d)}lookup(c){return this._rawGrammars.get(c)}injections(c){return this._injectionGrammars.get(c)}getDefaults(){return this._theme.getDefaults()}themeMatch(c){return this._theme.match(c)}async grammarForScopeName(c,d,u,h,f){if(!this._grammars.has(c)){let g=this._rawGrammars.get(c);if(!g)return null;this._grammars.set(c,l.createGrammar(c,g,d,u,h,f,this,await this._onigLibPromise))}return this._grammars.get(c)}}},792:(r,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CompiledRule=o.RegExpSourceList=o.RegExpSource=o.RuleFactory=o.BeginWhileRule=o.BeginEndRule=o.IncludeOnlyRule=o.MatchRule=o.CaptureRule=o.Rule=o.ruleIdToNumber=o.ruleIdFromNumber=o.whileRuleId=o.endRuleId=void 0;const l=a(878),c=a(965),d=/\\(\d+)/,u=/\\(\d+)/g;o.endRuleId=-1,o.whileRuleId=-2,o.ruleIdFromNumber=function(C){return C},o.ruleIdToNumber=function(C){return C};class h{constructor(S,k,I,T){this.$location=S,this.id=k,this._name=I||null,this._nameIsCapturing=l.RegexSource.hasCaptures(this._name),this._contentName=T||null,this._contentNameIsCapturing=l.RegexSource.hasCaptures(this._contentName)}get debugName(){const S=this.$location?`${l.basename(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${S}`}getName(S,k){return this._nameIsCapturing&&this._name!==null&&S!==null&&k!==null?l.RegexSource.replaceCaptures(this._name,S,k):this._name}getContentName(S,k){return this._contentNameIsCapturing&&this._contentName!==null?l.RegexSource.replaceCaptures(this._contentName,S,k):this._contentName}}o.Rule=h;class f extends h{constructor(S,k,I,T,D){super(S,k,I,T),this.retokenizeCapturedWithRuleId=D}dispose(){}collectPatterns(S,k){throw new Error("Not supported!")}compile(S,k){throw new Error("Not supported!")}compileAG(S,k,I,T){throw new Error("Not supported!")}}o.CaptureRule=f;class g extends h{constructor(S,k,I,T,D){super(S,k,I,null),this._match=new v(T,this.id),this.captures=D,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(S,k){k.push(this._match)}compile(S,k){return this._getCachedCompiledPatterns(S).compile(S)}compileAG(S,k,I,T){return this._getCachedCompiledPatterns(S).compileAG(S,I,T)}_getCachedCompiledPatterns(S){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new _,this.collectPatterns(S,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}}o.MatchRule=g;class m extends h{constructor(S,k,I,T,D){super(S,k,I,T),this.patterns=D.patterns,this.hasMissingPatterns=D.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(S,k){for(const I of this.patterns)S.getRule(I).collectPatterns(S,k)}compile(S,k){return this._getCachedCompiledPatterns(S).compile(S)}compileAG(S,k,I,T){return this._getCachedCompiledPatterns(S).compileAG(S,I,T)}_getCachedCompiledPatterns(S){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new _,this.collectPatterns(S,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}}o.IncludeOnlyRule=m;class p extends h{constructor(S,k,I,T,D,M,E,W,P,N){super(S,k,I,T),this._begin=new v(D,this.id),this.beginCaptures=M,this._end=new v(E||"",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=W,this.applyEndPatternLast=P||!1,this.patterns=N.patterns,this.hasMissingPatterns=N.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(S,k){return this._end.resolveBackReferences(S,k)}collectPatterns(S,k){k.push(this._begin)}compile(S,k){return this._getCachedCompiledPatterns(S,k).compile(S)}compileAG(S,k,I,T){return this._getCachedCompiledPatterns(S,k).compileAG(S,I,T)}_getCachedCompiledPatterns(S,k){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new _;for(const I of this.patterns)S.getRule(I).collectPatterns(S,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,k):this._cachedCompiledPatterns.setSource(0,k)),this._cachedCompiledPatterns}}o.BeginEndRule=p;class b extends h{constructor(S,k,I,T,D,M,E,W,P){super(S,k,I,T),this._begin=new v(D,this.id),this.beginCaptures=M,this.whileCaptures=W,this._while=new v(E,o.whileRuleId),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=P.patterns,this.hasMissingPatterns=P.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(S,k){return this._while.resolveBackReferences(S,k)}collectPatterns(S,k){k.push(this._begin)}compile(S,k){return this._getCachedCompiledPatterns(S).compile(S)}compileAG(S,k,I,T){return this._getCachedCompiledPatterns(S).compileAG(S,I,T)}_getCachedCompiledPatterns(S){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new _;for(const k of this.patterns)S.getRule(k).collectPatterns(S,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(S,k){return this._getCachedCompiledWhilePatterns(S,k).compile(S)}compileWhileAG(S,k,I,T){return this._getCachedCompiledWhilePatterns(S,k).compileAG(S,I,T)}_getCachedCompiledWhilePatterns(S,k){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new _,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,k||""),this._cachedCompiledWhilePatterns}}o.BeginWhileRule=b;class w{static createCaptureRule(S,k,I,T,D){return S.registerRule(M=>new f(k,M,I,T,D))}static getCompiledRuleId(S,k,I){return S.id||k.registerRule(T=>{if(S.id=T,S.match)return new g(S.$vscodeTextmateLocation,S.id,S.name,S.match,w._compileCaptures(S.captures,k,I));if(S.begin===void 0){S.repository&&(I=l.mergeObjects({},I,S.repository));let D=S.patterns;return D===void 0&&S.include&&(D=[{include:S.include}]),new m(S.$vscodeTextmateLocation,S.id,S.name,S.contentName,w._compilePatterns(D,k,I))}return S.while?new b(S.$vscodeTextmateLocation,S.id,S.name,S.contentName,S.begin,w._compileCaptures(S.beginCaptures||S.captures,k,I),S.while,w._compileCaptures(S.whileCaptures||S.captures,k,I),w._compilePatterns(S.patterns,k,I)):new p(S.$vscodeTextmateLocation,S.id,S.name,S.contentName,S.begin,w._compileCaptures(S.beginCaptures||S.captures,k,I),S.end,w._compileCaptures(S.endCaptures||S.captures,k,I),S.applyEndPatternLast,w._compilePatterns(S.patterns,k,I))}),S.id}static _compileCaptures(S,k,I){let T=[];if(S){let D=0;for(const M in S){if(M==="$vscodeTextmateLocation")continue;const E=parseInt(M,10);E>D&&(D=E)}for(let M=0;M<=D;M++)T[M]=null;for(const M in S){if(M==="$vscodeTextmateLocation")continue;const E=parseInt(M,10);let W=0;S[M].patterns&&(W=w.getCompiledRuleId(S[M],k,I)),T[E]=w.createCaptureRule(k,S[M].$vscodeTextmateLocation,S[M].name,S[M].contentName,W)}}return T}static _compilePatterns(S,k,I){let T=[];if(S)for(let D=0,M=S.length;D<M;D++){const E=S[D];let W=-1;if(E.include){const P=c.parseInclude(E.include);switch(P.kind){case 0:case 1:W=w.getCompiledRuleId(I[E.include],k,I);break;case 2:let N=I[P.ruleName];N&&(W=w.getCompiledRuleId(N,k,I));break;case 3:case 4:const H=P.scopeName,U=P.kind===4?P.ruleName:null,B=k.getExternalGrammar(H,I);if(B)if(U){let Y=B.repository[U];Y&&(W=w.getCompiledRuleId(Y,k,B.repository))}else W=w.getCompiledRuleId(B.repository.$self,k,B.repository)}}else W=w.getCompiledRuleId(E,k,I);if(W!==-1){const P=k.getRule(W);let N=!1;if((P instanceof m||P instanceof p||P instanceof b)&&P.hasMissingPatterns&&P.patterns.length===0&&(N=!0),N)continue;T.push(W)}}return{patterns:T,hasMissingPatterns:(S?S.length:0)!==T.length}}}o.RuleFactory=w;class v{constructor(S,k){if(S){const I=S.length;let T=0,D=[],M=!1;for(let E=0;E<I;E++)if(S.charAt(E)==="\\"&&E+1<I){const W=S.charAt(E+1);W==="z"?(D.push(S.substring(T,E)),D.push("$(?!\\n)(?<!\\n)"),T=E+2):W!=="A"&&W!=="G"||(M=!0),E++}this.hasAnchor=M,T===0?this.source=S:(D.push(S.substring(T,I)),this.source=D.join(""))}else this.hasAnchor=!1,this.source=S;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=k,this.hasBackReferences=d.test(this.source)}clone(){return new v(this.source,this.ruleId)}setSource(S){this.source!==S&&(this.source=S,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(S,k){let I=k.map(T=>S.substring(T.start,T.end));return u.lastIndex=0,this.source.replace(u,(T,D)=>l.escapeRegExpCharacters(I[parseInt(D,10)]||""))}_buildAnchorCache(){let S,k,I,T,D=[],M=[],E=[],W=[];for(S=0,k=this.source.length;S<k;S++)I=this.source.charAt(S),D[S]=I,M[S]=I,E[S]=I,W[S]=I,I==="\\"&&S+1<k&&(T=this.source.charAt(S+1),T==="A"?(D[S+1]="",M[S+1]="",E[S+1]="A",W[S+1]="A"):T==="G"?(D[S+1]="",M[S+1]="G",E[S+1]="",W[S+1]="G"):(D[S+1]=T,M[S+1]=T,E[S+1]=T,W[S+1]=T),S++);return{A0_G0:D.join(""),A0_G1:M.join(""),A1_G0:E.join(""),A1_G1:W.join("")}}resolveAnchors(S,k){return this.hasAnchor&&this._anchorCache?S?k?this._anchorCache.A1_G1:this._anchorCache.A1_G0:k?this._anchorCache.A0_G1:this._anchorCache.A0_G0:this.source}}o.RegExpSource=v;class _{constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(S){this._items.push(S),this._hasAnchors=this._hasAnchors||S.hasAnchor}unshift(S){this._items.unshift(S),this._hasAnchors=this._hasAnchors||S.hasAnchor}length(){return this._items.length}setSource(S,k){this._items[S].source!==k&&(this._disposeCaches(),this._items[S].setSource(k))}compile(S){if(!this._cached){let k=this._items.map(I=>I.source);this._cached=new y(S,k,this._items.map(I=>I.ruleId))}return this._cached}compileAG(S,k,I){return this._hasAnchors?k?I?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(S,k,I)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(S,k,I)),this._anchorCache.A1_G0):I?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(S,k,I)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(S,k,I)),this._anchorCache.A0_G0):this.compile(S)}_resolveAnchors(S,k,I){let T=this._items.map(D=>D.resolveAnchors(k,I));return new y(S,T,this._items.map(D=>D.ruleId))}}o.RegExpSourceList=_;class y{constructor(S,k,I){this.regExps=k,this.rules=I,this.scanner=S.createOnigScanner(k)}dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const S=[];for(let k=0,I=this.rules.length;k<I;k++)S.push("   - "+this.rules[k]+": "+this.regExps[k]);return S.join(`
`)}findNextMatchSync(S,k,I){const T=this.scanner.findNextMatchSync(S,k,I);return T?{ruleId:this.rules[T.index],captureIndices:T.captureIndices}:null}}o.CompiledRule=y},583:(r,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ThemeTrieElement=o.ThemeTrieElementRule=o.ColorMap=o.fontStyleToString=o.ParsedThemeRule=o.parseTheme=o.StyleAttributes=o.ScopeStack=o.Theme=void 0;const l=a(878);class c{constructor(_,y,C){this._colorMap=_,this._defaults=y,this._root=C,this._cachedMatchRoot=new l.CachedFn(S=>this._root.match(S))}static createFromRawTheme(_,y){return this.createFromParsedTheme(f(_),y)}static createFromParsedTheme(_,y){return function(C,S){C.sort((W,P)=>{let N=l.strcmp(W.scope,P.scope);return N!==0?N:(N=l.strArrCmp(W.parentScopes,P.parentScopes),N!==0?N:W.index-P.index)});let k=0,I="#000000",T="#ffffff";for(;C.length>=1&&C[0].scope==="";){let W=C.shift();W.fontStyle!==-1&&(k=W.fontStyle),W.foreground!==null&&(I=W.foreground),W.background!==null&&(T=W.background)}let D=new m(S),M=new h(k,D.getId(I),D.getId(T)),E=new w(new b(0,null,-1,0,0),[]);for(let W=0,P=C.length;W<P;W++){let N=C[W];E.insert(0,N.scope,N.parentScopes,N.fontStyle,D.getId(N.foreground),D.getId(N.background))}return new c(D,M,E)}(_,y)}getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(_){if(_===null)return this._defaults;const y=_.scopeName,C=this._cachedMatchRoot.get(y).find(S=>function(k,I){if(I.length===0)return!0;for(let T=0;T<I.length;T++){let D=I[T],M=!1;if(D===">"){if(T===I.length-1)return!1;D=I[++T],M=!0}for(;k&&!u(k.scopeName,D);){if(M)return!1;k=k.parent}if(!k)return!1;k=k.parent}return!0}(_.parent,S.parentScopes));return C?new h(C.fontStyle,C.foreground,C.background):null}}o.Theme=c;class d{constructor(_,y){this.parent=_,this.scopeName=y}static push(_,y){for(const C of y)_=new d(_,C);return _}static from(..._){let y=null;for(let C=0;C<_.length;C++)y=new d(y,_[C]);return y}push(_){return new d(this,_)}getSegments(){let _=this;const y=[];for(;_;)y.push(_.scopeName),_=_.parent;return y.reverse(),y}toString(){return this.getSegments().join(" ")}extends(_){return this===_||this.parent!==null&&this.parent.extends(_)}getExtensionIfDefined(_){const y=[];let C=this;for(;C&&C!==_;)y.push(C.scopeName),C=C.parent;return C===_?y.reverse():void 0}}function u(v,_){return _===v||v.startsWith(_)&&v[_.length]==="."}o.ScopeStack=d;class h{constructor(_,y,C){this.fontStyle=_,this.foregroundId=y,this.backgroundId=C}}function f(v){if(!v)return[];if(!v.settings||!Array.isArray(v.settings))return[];let _=v.settings,y=[],C=0;for(let S=0,k=_.length;S<k;S++){let I,T=_[S];if(!T.settings)continue;if(typeof T.scope=="string"){let W=T.scope;W=W.replace(/^[,]+/,""),W=W.replace(/[,]+$/,""),I=W.split(",")}else I=Array.isArray(T.scope)?T.scope:[""];let D=-1;if(typeof T.settings.fontStyle=="string"){D=0;let W=T.settings.fontStyle.split(" ");for(let P=0,N=W.length;P<N;P++)switch(W[P]){case"italic":D|=1;break;case"bold":D|=2;break;case"underline":D|=4;break;case"strikethrough":D|=8}}let M=null;typeof T.settings.foreground=="string"&&l.isValidHexColor(T.settings.foreground)&&(M=T.settings.foreground);let E=null;typeof T.settings.background=="string"&&l.isValidHexColor(T.settings.background)&&(E=T.settings.background);for(let W=0,P=I.length;W<P;W++){let N=I[W].trim().split(" "),H=N[N.length-1],U=null;N.length>1&&(U=N.slice(0,N.length-1),U.reverse()),y[C++]=new g(H,U,S,D,M,E)}}return y}o.StyleAttributes=h,o.parseTheme=f;class g{constructor(_,y,C,S,k,I){this.scope=_,this.parentScopes=y,this.index=C,this.fontStyle=S,this.foreground=k,this.background=I}}o.ParsedThemeRule=g,o.fontStyleToString=function(v){if(v===-1)return"not set";let _="";return 1&v&&(_+="italic "),2&v&&(_+="bold "),4&v&&(_+="underline "),8&v&&(_+="strikethrough "),_===""&&(_="none"),_.trim()};class m{constructor(_){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(_)){this._isFrozen=!0;for(let y=0,C=_.length;y<C;y++)this._color2id[_[y]]=y,this._id2color[y]=_[y]}else this._isFrozen=!1}getId(_){if(_===null)return 0;_=_.toUpperCase();let y=this._color2id[_];if(y)return y;if(this._isFrozen)throw new Error(`Missing color in color map - ${_}`);return y=++this._lastColorId,this._color2id[_]=y,this._id2color[y]=_,y}getColorMap(){return this._id2color.slice(0)}}o.ColorMap=m;const p=Object.freeze([]);class b{constructor(_,y,C,S,k){this.scopeDepth=_,this.parentScopes=y||p,this.fontStyle=C,this.foreground=S,this.background=k}clone(){return new b(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(_){let y=[];for(let C=0,S=_.length;C<S;C++)y[C]=_[C].clone();return y}acceptOverwrite(_,y,C,S){this.scopeDepth>_?console.log("how did this happen?"):this.scopeDepth=_,y!==-1&&(this.fontStyle=y),C!==0&&(this.foreground=C),S!==0&&(this.background=S)}}o.ThemeTrieElementRule=b;class w{constructor(_,y=[],C={}){this._mainRule=_,this._children=C,this._rulesWithParentScopes=y}static _cmpBySpecificity(_,y){if(_.scopeDepth!==y.scopeDepth)return y.scopeDepth-_.scopeDepth;let C=0,S=0;for(;_.parentScopes[C]===">"&&C++,y.parentScopes[S]===">"&&S++,!(C>=_.parentScopes.length||S>=y.parentScopes.length);){const k=y.parentScopes[S].length-_.parentScopes[C].length;if(k!==0)return k;C++,S++}return y.parentScopes.length-_.parentScopes.length}match(_){if(_!==""){let C,S,k=_.indexOf(".");if(k===-1?(C=_,S=""):(C=_.substring(0,k),S=_.substring(k+1)),this._children.hasOwnProperty(C))return this._children[C].match(S)}const y=this._rulesWithParentScopes.concat(this._mainRule);return y.sort(w._cmpBySpecificity),y}insert(_,y,C,S,k,I){if(y==="")return void this._doInsertHere(_,C,S,k,I);let T,D,M,E=y.indexOf(".");E===-1?(T=y,D=""):(T=y.substring(0,E),D=y.substring(E+1)),this._children.hasOwnProperty(T)?M=this._children[T]:(M=new w(this._mainRule.clone(),b.cloneArr(this._rulesWithParentScopes)),this._children[T]=M),M.insert(_+1,D,C,S,k,I)}_doInsertHere(_,y,C,S,k){if(y!==null){for(let I=0,T=this._rulesWithParentScopes.length;I<T;I++){let D=this._rulesWithParentScopes[I];if(l.strArrCmp(D.parentScopes,y)===0)return void D.acceptOverwrite(_,C,S,k)}C===-1&&(C=this._mainRule.fontStyle),S===0&&(S=this._mainRule.foreground),k===0&&(k=this._mainRule.background),this._rulesWithParentScopes.push(new b(_,y,C,S,k))}else this._mainRule.acceptOverwrite(_,C,S,k)}}o.ThemeTrieElement=w},878:(r,o)=>{function a(d){return Array.isArray(d)?function(u){let h=[];for(let f=0,g=u.length;f<g;f++)h[f]=a(u[f]);return h}(d):typeof d=="object"?function(u){let h={};for(let f in u)h[f]=a(u[f]);return h}(d):d}Object.defineProperty(o,"__esModule",{value:!0}),o.performanceNow=o.CachedFn=o.escapeRegExpCharacters=o.isValidHexColor=o.strArrCmp=o.strcmp=o.RegexSource=o.basename=o.mergeObjects=o.clone=void 0,o.clone=function(d){return a(d)},o.mergeObjects=function(d,...u){return u.forEach(h=>{for(let f in h)d[f]=h[f]}),d},o.basename=function d(u){const h=~u.lastIndexOf("/")||~u.lastIndexOf("\\");return h===0?u:~h==u.length-1?d(u.substring(0,u.length-1)):u.substr(1+~h)};let l=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g;function c(d,u){return d<u?-1:d>u?1:0}o.RegexSource=class{static hasCaptures(d){return d!==null&&(l.lastIndex=0,l.test(d))}static replaceCaptures(d,u,h){return d.replace(l,(f,g,m,p)=>{let b=h[parseInt(g||m,10)];if(!b)return f;{let w=u.substring(b.start,b.end);for(;w[0]===".";)w=w.substring(1);switch(p){case"downcase":return w.toLowerCase();case"upcase":return w.toUpperCase();default:return w}}})}},o.strcmp=c,o.strArrCmp=function(d,u){if(d===null&&u===null)return 0;if(!d)return-1;if(!u)return 1;let h=d.length,f=u.length;if(h===f){for(let g=0;g<h;g++){let m=c(d[g],u[g]);if(m!==0)return m}return 0}return h-f},o.isValidHexColor=function(d){return!!(/^#[0-9a-f]{6}$/i.test(d)||/^#[0-9a-f]{8}$/i.test(d)||/^#[0-9a-f]{3}$/i.test(d)||/^#[0-9a-f]{4}$/i.test(d))},o.escapeRegExpCharacters=function(d){return d.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")},o.CachedFn=class{constructor(d){this.fn=d,this.cache=new Map}get(d){if(this.cache.has(d))return this.cache.get(d);const u=this.fn(d);return this.cache.set(d,u),u}},o.performanceNow=typeof performance>"u"?function(){return Date.now()}:function(){return performance.now()}}},s={};return function r(o){var a=s[o];if(a!==void 0)return a.exports;var l=s[o]={exports:{}};return i[o].call(l.exports,l,l.exports,r),l.exports}(787)})())})(ZQ);var IC=ZQ.exports;class Fme{_locked=!1;_waiting=[];get locked(){return this._locked}async lock(){if(!this._locked)this._locked=!0;else return new Promise(e=>{this._waiting.push(e)})}unlock(){if(this._waiting.length>0){const e=this._waiting.shift();e&&e()}else this._locked=!1}}const Vme=""+new URL("onig-sIwl6pz-.wasm",import.meta.url).href,Pme=""+new URL("javascript.tmLanguage-HDSMuL7K.json",import.meta.url).href,Ome=""+new URL("svelte.tmLanguage-56cyxSas.json",import.meta.url).href,Zme=""+new URL("typescript.tmLanguage-zyHvLQfi.json",import.meta.url).href,Gme=""+new URL("vue.tmLanguage-GZHfp8fS.json",import.meta.url).href,Bme="data:application/json;base64,ewogICJzY29wZU5hbWUiOiAic291cmNlLmNvbnNvbGUiLAogICJuYW1lIjogImNvbnNvbGUiLAogICJwYXR0ZXJucyI6IFsKICAgIHsKICAgICAgImNvbW1lbnQiOiAiRXJyb3IgTWVzc2FnZSIsCiAgICAgICJiZWdpbiI6ICJeKFxcZHsyfTpcXGR7Mn06XFxkezJ9XFwuXFxkezN9KSAoXFxbRVJST1JcXF0pICIsCiAgICAgICJlbmQiOiAiKD89XlxcZHsyfTpcXGR7Mn06XFxkezJ9XFwuXFxkezN9IFxcWyhJTkZPfEVSUk9SfFdBUk4pXFxdIHxcXFopIiwKICAgICAgImJlZ2luQ2FwdHVyZXMiOiB7CiAgICAgICAgIjEiOiB7ICJuYW1lIjogImNvbW1lbnQud2FsbGFieS1jb25zb2xlIiB9LAogICAgICAgICIyIjogeyAibmFtZSI6ICJ0b2tlbi5lcnJvci10b2tlbi53YWxsYWJ5LWNvbnNvbGUgaW52YWxpZC53YWxsYWJ5LWNvbnNvbGUiIH0KICAgICAgfQogICAgfSwKICAgIHsKICAgICAgImNvbW1lbnQiOiAiSW5mbyBNZXNzYWdlIiwKICAgICAgImJlZ2luIjogIl4oXFxkezJ9OlxcZHsyfTpcXGR7Mn1cXC5cXGR7M30pIChcXFtJTkZPXFxdKSAiLAogICAgICAiZW5kIjogIig/PV5cXGR7Mn06XFxkezJ9OlxcZHsyfVxcLlxcZHszfSBcXFsoSU5GT3xFUlJPUnxXQVJOKVxcXSB8XFxaKSIsCiAgICAgICJiZWdpbkNhcHR1cmVzIjogewogICAgICAgICIxIjogeyAibmFtZSI6ICJjb21tZW50LndhbGxhYnktY29uc29sZSIgfSwKICAgICAgICAiMiI6IHsgIm5hbWUiOiAidG9rZW4uaW5mby10b2tlbi53YWxsYWJ5LWNvbnNvbGUgY29uc3RhbnQubnVtZXJpYy53YWxsYWJ5LWNvbnNvbGUiIH0KICAgICAgfQogICAgfSwKICAgIHsKICAgICAgImNvbW1lbnQiOiAiV2FybmluZyBNZXNzYWdlIiwKICAgICAgImJlZ2luIjogIl4oXFxkezJ9OlxcZHsyfTpcXGR7Mn1cXC5cXGR7M30pIChcXFtXQVJOXFxdKSAiLAogICAgICAiZW5kIjogIig/PV5cXGR7Mn06XFxkezJ9OlxcZHsyfVxcLlxcZHszfSBcXFsoSU5GT3xFUlJPUnxXQVJOKVxcXSB8XFxaKSIsCiAgICAgICJiZWdpbkNhcHR1cmVzIjogewogICAgICAgICIxIjogeyAibmFtZSI6ICJjb21tZW50LndhbGxhYnktY29uc29sZSIgfSwKICAgICAgICAiMiI6IHsgIm5hbWUiOiAidG9rZW4ud2Fybi10b2tlbi53YWxsYWJ5LWNvbnNvbGUgc3RyaW5nLnZhbHVlLndhbGxhYnktY29uc29sZSIgfQogICAgICB9CiAgICB9CiAgXQp9Cg==",Xme="data:application/json;base64,ewoJImluZm9ybWF0aW9uX2Zvcl9jb250cmlidXRvcnMiOiBbCgkJIlRoaXMgZmlsZSBoYXMgYmVlbiBjb252ZXJ0ZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vdGV4dG1hdGUvZGlmZi50bWJ1bmRsZS9ibG9iL21hc3Rlci9TeW50YXhlcy9EaWZmLnBsaXN0IiwKCQkiSWYgeW91IHdhbnQgdG8gcHJvdmlkZSBhIGZpeCBvciBpbXByb3ZlbWVudCwgcGxlYXNlIGNyZWF0ZSBhIHB1bGwgcmVxdWVzdCBhZ2FpbnN0IHRoZSBvcmlnaW5hbCByZXBvc2l0b3J5LiIsCgkJIk9uY2UgYWNjZXB0ZWQgdGhlcmUsIHdlIGFyZSBoYXBweSB0byByZWNlaXZlIGFuIHVwZGF0ZSByZXF1ZXN0LiIKCV0sCgkidmVyc2lvbiI6ICJodHRwczovL2dpdGh1Yi5jb20vdGV4dG1hdGUvZGlmZi50bWJ1bmRsZS9jb21taXQvMDU5M2JiNzc1ZWFiMTgyNGFmOTdlZjIxNzJmZDM4ODIyYWJkOTdkNyIsCgkibmFtZSI6ICJEaWZmIiwKCSJzY29wZU5hbWUiOiAic291cmNlLmRpZmYiLAoJInBhdHRlcm5zIjogWwoJCXsKCQkJImNhcHR1cmVzIjogewoJCQkJIjEiOiB7CgkJCQkJIm5hbWUiOiAicHVuY3R1YXRpb24uZGVmaW5pdGlvbi5zZXBhcmF0b3IuZGlmZiIKCQkJCX0KCQkJfSwKCQkJIm1hdGNoIjogIl4oKFxcKnsxNX0pfCg9ezY3fSl8KC17M30pKSRcXG4/IiwKCQkJIm5hbWUiOiAibWV0YS5zZXBhcmF0b3IuZGlmZiIKCQl9LAoJCXsKCQkJIm1hdGNoIjogIl5cXGQrKCxcXGQrKSooYXxkfGMpXFxkKygsXFxkKykqJFxcbj8iLAoJCQkibmFtZSI6ICJtZXRhLmRpZmYucmFuZ2Uubm9ybWFsIgoJCX0sCgkJewoJCQkiY2FwdHVyZXMiOiB7CgkJCQkiMSI6IHsKCQkJCQkibmFtZSI6ICJwdW5jdHVhdGlvbi5kZWZpbml0aW9uLnJhbmdlLmRpZmYiCgkJCQl9LAoJCQkJIjIiOiB7CgkJCQkJIm5hbWUiOiAibWV0YS50b2MtbGlzdC5saW5lLW51bWJlci5kaWZmIgoJCQkJfSwKCQkJCSIzIjogewoJCQkJCSJuYW1lIjogInB1bmN0dWF0aW9uLmRlZmluaXRpb24ucmFuZ2UuZGlmZiIKCQkJCX0KCQkJfSwKCQkJIm1hdGNoIjogIl4oQEApXFxzKiguKz8pXFxzKihAQCkoJFxcbj8pPyIsCgkJCSJuYW1lIjogIm1ldGEuZGlmZi5yYW5nZS51bmlmaWVkIgoJCX0sCgkJewoJCQkiY2FwdHVyZXMiOiB7CgkJCQkiMyI6IHsKCQkJCQkibmFtZSI6ICJwdW5jdHVhdGlvbi5kZWZpbml0aW9uLnJhbmdlLmRpZmYiCgkJCQl9LAoJCQkJIjQiOiB7CgkJCQkJIm5hbWUiOiAicHVuY3R1YXRpb24uZGVmaW5pdGlvbi5yYW5nZS5kaWZmIgoJCQkJfSwKCQkJCSI2IjogewoJCQkJCSJuYW1lIjogInB1bmN0dWF0aW9uLmRlZmluaXRpb24ucmFuZ2UuZGlmZiIKCQkJCX0sCgkJCQkiNyI6IHsKCQkJCQkibmFtZSI6ICJwdW5jdHVhdGlvbi5kZWZpbml0aW9uLnJhbmdlLmRpZmYiCgkJCQl9CgkJCX0sCgkJCSJtYXRjaCI6ICJeKCgoXFwtezN9KSAuKyAoXFwtezR9KSl8KChcXCp7M30pIC4rIChcXCp7NH0pKSkkXFxuPyIsCgkJCSJuYW1lIjogIm1ldGEuZGlmZi5yYW5nZS5jb250ZXh0IgoJCX0sCgkJewoJCQkibWF0Y2giOiAiXmRpZmYgLS1naXQgYS8uKiRcXG4/IiwKCQkJIm5hbWUiOiAibWV0YS5kaWZmLmhlYWRlci5naXQiCgkJfSwKCQl7CgkJCSJtYXRjaCI6ICJeZGlmZiAoLXxcXFMrXFxzK1xcUyspLiokXFxuPyIsCgkJCSJuYW1lIjogIm1ldGEuZGlmZi5oZWFkZXIuY29tbWFuZCIKCQl9LAoJCXsKCQkJImNhcHR1cmVzIjogewoJCQkJIjQiOiB7CgkJCQkJIm5hbWUiOiAicHVuY3R1YXRpb24uZGVmaW5pdGlvbi5mcm9tLWZpbGUuZGlmZiIKCQkJCX0sCgkJCQkiNiI6IHsKCQkJCQkibmFtZSI6ICJwdW5jdHVhdGlvbi5kZWZpbml0aW9uLmZyb20tZmlsZS5kaWZmIgoJCQkJfSwKCQkJCSI3IjogewoJCQkJCSJuYW1lIjogInB1bmN0dWF0aW9uLmRlZmluaXRpb24uZnJvbS1maWxlLmRpZmYiCgkJCQl9CgkJCX0sCgkJCSJtYXRjaCI6ICIoXigoKC17M30pIC4rKXwoKFxcKnszfSkgLispKSRcXG4/fF4oPXs0fSkgLisoPz0gLSApKSIsCgkJCSJuYW1lIjogIm1ldGEuZGlmZi5oZWFkZXIuZnJvbS1maWxlIgoJCX0sCgkJewoJCQkiY2FwdHVyZXMiOiB7CgkJCQkiMiI6IHsKCQkJCQkibmFtZSI6ICJwdW5jdHVhdGlvbi5kZWZpbml0aW9uLnRvLWZpbGUuZGlmZiIKCQkJCX0sCgkJCQkiMyI6IHsKCQkJCQkibmFtZSI6ICJwdW5jdHVhdGlvbi5kZWZpbml0aW9uLnRvLWZpbGUuZGlmZiIKCQkJCX0sCgkJCQkiNCI6IHsKCQkJCQkibmFtZSI6ICJwdW5jdHVhdGlvbi5kZWZpbml0aW9uLnRvLWZpbGUuZGlmZiIKCQkJCX0KCQkJfSwKCQkJIm1hdGNoIjogIiheKFxcK3szfSkgLiskXFxuP3wgKC0pIC4qICg9ezR9KSRcXG4/KSIsCgkJCSJuYW1lIjogIm1ldGEuZGlmZi5oZWFkZXIudG8tZmlsZSIKCQl9LAoJCXsKCQkJImNhcHR1cmVzIjogewoJCQkJIjMiOiB7CgkJCQkJIm5hbWUiOiAicHVuY3R1YXRpb24uZGVmaW5pdGlvbi5pbnNlcnRlZC5kaWZmIgoJCQkJfSwKCQkJCSI2IjogewoJCQkJCSJuYW1lIjogInB1bmN0dWF0aW9uLmRlZmluaXRpb24uaW5zZXJ0ZWQuZGlmZiIKCQkJCX0KCQkJfSwKCQkJIm1hdGNoIjogIl4oKCg+KSggLiopPyl8KChcXCspLiopKSRcXG4/IiwKCQkJIm5hbWUiOiAibWFya3VwLmluc2VydGVkLmRpZmYiCgkJfSwKCQl7CgkJCSJjYXB0dXJlcyI6IHsKCQkJCSIxIjogewoJCQkJCSJuYW1lIjogInB1bmN0dWF0aW9uLmRlZmluaXRpb24uY2hhbmdlZC5kaWZmIgoJCQkJfQoJCQl9LAoJCQkibWF0Y2giOiAiXighKS4qJFxcbj8iLAoJCQkibmFtZSI6ICJtYXJrdXAuY2hhbmdlZC5kaWZmIgoJCX0sCgkJewoJCQkiY2FwdHVyZXMiOiB7CgkJCQkiMyI6IHsKCQkJCQkibmFtZSI6ICJwdW5jdHVhdGlvbi5kZWZpbml0aW9uLmRlbGV0ZWQuZGlmZiIKCQkJCX0sCgkJCQkiNiI6IHsKCQkJCQkibmFtZSI6ICJwdW5jdHVhdGlvbi5kZWZpbml0aW9uLmRlbGV0ZWQuZGlmZiIKCQkJCX0KCQkJfSwKCQkJIm1hdGNoIjogIl4oKCg8KSggLiopPyl8KCgtKS4qKSkkXFxuPyIsCgkJCSJuYW1lIjogIm1hcmt1cC5kZWxldGVkLmRpZmYiCgkJfSwKCQl7CgkJCSJiZWdpbiI6ICJeKCMpIiwKCQkJImNhcHR1cmVzIjogewoJCQkJIjEiOiB7CgkJCQkJIm5hbWUiOiAicHVuY3R1YXRpb24uZGVmaW5pdGlvbi5jb21tZW50LmRpZmYiCgkJCQl9CgkJCX0sCgkJCSJjb21tZW50IjogIkdpdCBwcm9kdWNlcyB1bmlmaWVkIGRpZmZzIHdpdGggZW1iZWRkZWQgY29tbWVudHNcIiIsCgkJCSJlbmQiOiAiXFxuIiwKCQkJIm5hbWUiOiAiY29tbWVudC5saW5lLm51bWJlci1zaWduLmRpZmYiCgkJfSwKCQl7CgkJCSJtYXRjaCI6ICJeaW5kZXggWzAtOWEtZl17Nyw0MH1cXC5cXC5bMC05YS1mXXs3LDQwfS4qJFxcbj8iLAoJCQkibmFtZSI6ICJtZXRhLmRpZmYuaW5kZXguZ2l0IgoJCX0sCgkJewoJCQkiY2FwdHVyZXMiOiB7CgkJCQkiMSI6IHsKCQkJCQkibmFtZSI6ICJwdW5jdHVhdGlvbi5zZXBhcmF0b3Iua2V5LXZhbHVlLmRpZmYiCgkJCQl9LAoJCQkJIjIiOiB7CgkJCQkJIm5hbWUiOiAibWV0YS50b2MtbGlzdC5maWxlLW5hbWUuZGlmZiIKCQkJCX0KCQkJfSwKCQkJIm1hdGNoIjogIl5JbmRleCg6KSAoLispJFxcbj8iLAoJCQkibmFtZSI6ICJtZXRhLmRpZmYuaW5kZXgiCgkJfSwKCQl7CgkJCSJtYXRjaCI6ICJeT25seSBpbiAuKjogLiokXFxuPyIsCgkJCSJuYW1lIjogIm1ldGEuZGlmZi5vbmx5LWluIgoJCX0KCV0KfQo=",MC=new Fme,_4=new Set(["typescript","javascript","vue","svelte","console","diff"]),zme=new Map([["typescript","source.ts"],["javascript","source.js"],["vue","source.vue"],["svelte","source.svelte"],["console","source.console"],["diff","source.diff"]]),Hme=new Map([["source.ts","typescript"],["source.js","javascript"],["source.vue","vue"],["source.svelte","svelte"],["source.console","console"],["source.diff","diff"]]);let L9={},$m,sD,rD,jw;function GQ(){return $m}let Ume=class{static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getInlineStyleFromMetadata(e,t){const i=this.getForeground(e),s=this.getFontStyle(e);let r=t[i];(i===0||i===1)&&r==="#000000"&&(r="var(--editor-foreground)");let o=`color: ${r};`;s&1&&(o+="font-style: italic;"),s&2&&(o+="font-weight: bold;");let a="";return s&4&&(a+=" underline"),s&8&&(a+=" line-through"),a&&(o+=`text-decoration:${a};`),o}},mG=class{_tokens;_tokensCount;constructor(e){this._tokens=e,this._tokensCount=this._tokens.length>>>1}getCount(){return this._tokensCount}getEndOffset(e){return this._tokens[e<<1]}getInlineStyle(e,t){const i=this._tokens[(e<<1)+1];return Ume.getInlineStyleFromMetadata(i,t)}static convertToEndOffset(e,t){const s=(e.length>>>1)-1;for(let r=0;r<s;r++)e[r<<1]=e[r+1<<1];e[s<<1]=t}};async function ex(){try{if(await MC.lock(),!rD){const n=await fetch(Vme);await nD.loadWASM(n);const e=new Map;e.set("javascript",await(await fetch(Pme)).text()),e.set("typescript",await(await fetch(Zme)).text()),e.set("vue",await(await fetch(Gme)).text()),e.set("svelte",await(await fetch(Ome)).text()),e.set("console",await(await fetch(Bme)).text()),e.set("diff",await(await fetch(Xme)).text()),rD=e}if(!$m){$m={settings:[]};for(const n in L9){const e=L9[n];e!==void 0&&$m.settings.push({scope:n,settings:{foreground:e.foreground,background:e.background,fontStyle:e.style}})}sD=new IC.Registry({onigLib:Promise.resolve({createOnigScanner:nD.createOnigScanner,createOnigString:nD.createOnigString}),theme:$m,loadGrammar:async n=>{let e=Hme.get(n);return IC.parseRawGrammar(e&&rD?.get(e)||"{}","example.json")}}),jw||(jw=new Map);for(const n of _4){const e=zme.get(n),t=await sD.loadGrammar(e||"source.ts");t&&jw.set(n,t)}}return{grammars:jw,registry:sD}}finally{MC.unlock()}}async function Yme(n){try{await MC.lock(),$m=void 0,L9=n}finally{MC.unlock()}}async function w4(n,e,t){try{const{grammars:i,registry:s}=await ex();if(i.has(n)){const r=i.get(n);if(!r||e.lines.length===0)return;const o=s.getColorMap();let a=[],l=IC.INITIAL;for(let f=0;f<e.lines.length;f++){const g=e.lines[f],m=r.tokenizeLine2(g,l);mG.convertToEndOffset(m.tokens,g.length);const p=new mG(m.tokens);a.push(g===""?void 0:Kme(g,p,o,2,!1)),l=m.ruleStack}let c=e.current,d=e.frame;if(t&&a.length>=t*2+1){const f=a.slice(e.current-t,e.current+t+1),g=a.length-f.length;a=f,c=t,d={start:e.frame.start+g,end:e.frame.end-g}}const u=/^\s+/u,h=a.filter(f=>f).map(f=>f[0]);if(!h.some(f=>!u.test(f.content||""))){const f=Math.min(...h.map(g=>{if(!g.content)return 0;const m=g.content.match(u);return m?m[0].length:0}));h.forEach(g=>g.content=(g.content||"").slice(f))}return{lines:a.map(f=>f?f.map(g=>`<span style="${g.style};white-space:pre">${g.content}</span>`).join(""):"<br>"),current:c,frame:d}}}catch(i){console.error(i)}}function Kme(n,e,t,i,s){const r=[];let o=0,a=0,l=!0;for(let c=0,d=e.getCount();c<d;c++){const u=e.getEndOffset(c);let h="";for(;o<u;o++){const f=n.charCodeAt(o);switch(f){case 9:{let g=i-(o+a)%i;for(a+=g-1;g>0;)s&&l?(h+="&#160;",l=!1):(h+=" ",l=!0),g--;break}case 60:h+="&lt;",l=!1;break;case 62:h+="&gt;",l=!1;break;case 38:h+="&amp;",l=!1;break;case 0:h+="&#00;",l=!1;break;case 65279:case 8232:case 8233:case 133:h+="",l=!1;break;case 13:h+="&#8203",l=!1;break;case 32:s&&l?(h+="&#160;",l=!1):(h+=" ",l=!0);break;default:h+=String.fromCharCode(f),l=!1}}if(r.push({style:e.getInlineStyle(c,t),content:h}),u>n.length||o>=n.length)break}return r}const tx=Object.freeze(Object.defineProperty({__proto__:null,customize:Yme,getCurrentTheme:GQ,highlight:w4,languages:_4,load:ex},Symbol.toStringTag,{value:"Module"}));var jme=G("<span class=token-regexp>"),Jme=G("<span class=token-boolean>"),$me=G("<span class=whitespace-pre-line>"),pG=G("<span class=token-number>"),Qme=G("<span class=token-undefined>"),qme=G("<span class=token-null>"),epe=G("<span class=token-error>"),tpe=G('<span class="raw [word-spacing:0]">'),y4=G("<span>"),ipe=G("<span class=token-class>"),S4=G("<span class=token-string>"),npe=G("<span>..."),Jw=G("<span class=token-type> "),km=G("<span class=token-punctuation>"),bG=G('<span class="token-punctuation level-expander-ellipsis">...'),spe=G("<span class=token-punctuation>..."),k9=G("<br>"),rpe=G("<span><span class=token-punctuation></span><span></span><span class=token-punctuation>"),ope=G("<span class=logentry><br>"),BQ=G("<span class=token-property>"),ape=G("<span class=token-comment> "),lpe=G('<span class="actions [&amp;_button]:p-[0.0625rem] [&amp;_button]:!pb-[0.03125rem] [&amp;_button]:!pt-[0.09375rem] [&amp;_button]:!text-[length:--icon-smaller-font-size]">'),cpe=G("<span class=level-expander-chevron>  "),dpe=G("<span class=indentation>"),upe=G("<span class=token-string>'<!>'"),hpe=G("<span class=token-operator> +"),fpe=G("<span><span class=token-string>"),gpe=G("<span class=token-new>new "),mpe=G("<span class=token-class>Date"),ppe=G("<span class=token-punctuation>("),bpe=G("<span class=token-punctuation>)");function EC(n){const e=()=>n.data.type?.toLowerCase(),t=()=>n.data.value!==void 0?n.data.value+"":"";return x(Fn,{get fallback(){return J(()=>n.data.value===void 0)()?(()=>{const i={...n.context,depth:n.context.depth+1};return x(Lpe,{get data(){return n.data},context:i,get onDataAvailable(){return n.onDataAvailable},get onValueLoadRequest(){return n.onValueLoadRequest}})})():(()=>{var i=S4();return A(i,x(vr,{get value(){return t()},get onDataAvailable(){return n.onDataAvailable},get context(){return n.context}})),i})()},get children(){return[x(ot,{get when(){return e()==="date"},get children(){return x(Ipe,{get data(){return n.data},get context(){return n.context},get onDataAvailable(){return n.onDataAvailable}})}}),x(ot,{get when(){return e()==="regexp"},get children(){var i=jme();return A(i,x(vr,{get value(){return t()},get context(){return n.context},get onDataAvailable(){return n.onDataAvailable}})),i}}),x(ot,{get when(){return e()==="boolean"},get children(){var i=Jme();return A(i,x(vr,{get value(){return t()},get context(){return n.context},get onDataAvailable(){return n.onDataAvailable}})),i}}),x(ot,{get when(){return e()==="string"},get children(){return x(se,{get when(){return n.displayRawValue},get fallback(){return x(Dpe,{get data(){return n.data},get context(){return n.context},get onDataAvailable(){return n.onDataAvailable},get onValueLoadRequest(){return n.onValueLoadRequest},get isArrayProp(){return n.isArrayProp}})},get children(){var i=$me();return A(i,()=>zQ(n.data)+(n.data.capped?"...":"")),i}})}}),x(ot,{get when(){return e()==="number"},get children(){var i=pG();return A(i,x(Fn,{get fallback(){return x(vr,{get value(){return n.data.value+""},get context(){return n.context},get onDataAvailable(){return n.onDataAvailable}})},get children(){return[x(ot,{get when(){return n.data.nan},get children(){return x(vr,{value:"NaN",get context(){return n.context},get onDataAvailable(){return n.onDataAvailable}})}}),x(ot,{get when(){return n.data.positiveInfinity},get children(){return x(vr,{value:"Infinity",get context(){return n.context},get onDataAvailable(){return n.onDataAvailable}})}}),x(ot,{get when(){return n.data.negativeInfinity},get children(){return x(vr,{value:"-Infinity",get context(){return n.context},get onDataAvailable(){return n.onDataAvailable}})}}),x(ot,{get when(){return n.data.negativeZero},get children(){return x(vr,{value:"-0",get context(){return n.context},get onDataAvailable(){return n.onDataAvailable}})}})]}})),i}}),x(ot,{get when(){return e()==="bigint"},get children(){var i=pG();return A(i,x(vr,{get value(){return`${n.data.value}n`},get context(){return n.context},get onDataAvailable(){return n.onDataAvailable}})),i}}),x(ot,{get when(){return e()==="undefined"},get children(){var i=Qme();return A(i,x(vr,{get value(){return e()},get context(){return n.context},get onDataAvailable(){return n.onDataAvailable}})),i}}),x(ot,{get when(){return e()==="null"},get children(){var i=qme();return A(i,x(vr,{get value(){return e()},get context(){return n.context},get onDataAvailable(){return n.onDataAvailable}})),i}}),x(ot,{get when(){return e()==="unknown"},get children(){var i=epe();return A(i,x(vr,{get value(){return`${n.data.error?n.context.multiline?n.data.error:xS(n.data.error).replace(/\r?\n|\r/g," ").replace(/\s\s+/g," "):""}`},get context(){return n.context},get onDataAvailable(){return n.onDataAvailable}})),Me(()=>i.classList.toggle("!whitespace-break-spaces",!!n.context.multiline)),i}}),x(ot,{get when(){return e()==="raw"},get children(){var i=tpe();return A(i,x(vr,{get value(){return J(()=>!!n.context.multiline)()?n.data.value:xS(n.data.value).replace(/\r?\n|\r/g," ").replace(/\s\s+/g," ")},get context(){return n.context},get onDataAvailable(){return n.onDataAvailable}})),Me(()=>i.classList.toggle("!whitespace-break-spaces",!!n.context.multiline)),i}}),x(ot,{get when(){return e()==="html"},get children(){var i=y4();return A(i,x(se,{get when(){return n.context.multiline},get fallback(){return x(vr,{get value(){return xS(n.data.value).replace(/\r?\n|\r/g," ").replace(/\s\s+/g," ")},get context(){return n.context},get onDataAvailable(){return n.onDataAvailable}})},get children(){return x(Tpe,{get value(){return n.data.value},get context(){return n.context},get onDataAvailable(){return n.onDataAvailable}})}})),Me(()=>i.classList.toggle("!whitespace-break-spaces",!!n.context.multiline)),i}}),x(ot,{get when(){return e()==="symbol"},get children(){var i=ipe();return A(i,x(vr,{get value(){return t()},get context(){return n.context},get onDataAvailable(){return n.onDataAvailable}})),i}})]}})}const vG=1,$w=vG+vG,oD=3,vpe="[",_pe="]",wpe="{",ype="}",Spe="(",Cpe=")";function Lpe(n){const e=n.context.multiline,t=n.context.indentationLvl+1,i=J(()=>n.data.type==="array"||!!n.data.rangeNode),s=J(()=>i()||n.data.functionsNode?[vpe,_pe]:n.data.getter?[Spe,Cpe]:[wpe,ype]),r=J(()=>lme(n.data)),o=J(()=>n.context.omitTypes||e&&n.context.depth===1),a=J(()=>{const N=r();return!o()&&N?N:""}),l=J(()=>a()?a().length+1:0),[c,d]=he(!0),u=n.context.displayPropLimit,h=J(()=>{const N=u,H=n.data.props?.slice()||[];H[0]?.callStackNode&&H.shift();const U=[];let B=0;const Y=[];let ne,ee;for(var $=0;$<H.length&&(B<N||!c());$++){const ge=H[$];if(ge.functionsNode){ee=ge;continue}if(ge.type==="function"&&!n.data.functionsNode){Y.push(ge);continue}if(ge.loadActionNode){ne=ge;continue}if(ge.rangeNode){const Ie=n.data.parent||n.data;U.push({...ge,parent:Ie,queryPath:Ie.queryPath})}else U.push(ge);B++}if(ee&&U.push({...ee,queryPath:n.data.queryPath}),ne)U.push(n.data.functionsNode?{...ne,expandable:!0,queryPath:n.data.queryPath}:ne);else if(B===N)U.push({loadActionNode:!0,loadAction:e?()=>d(!1):void 0});else if(n.data.cappedRange){const ge=n.data.parent||n.data;U.push({loadActionNode:!0,expandable:!0,parent:ge,queryPath:ge.queryPath})}if(B<N&&Y.length>0){const ge=Y.slice(0,N-B);for(const Ie of ge)U.push(Ie)}return U}),[f,g]=he(!e),[m,p]=he({},{equals:!1}),b=J(()=>h().length),w=J(()=>b()>0),[v,_]=he(Array.from({length:b()}),{equals:!1}),y=J(()=>n.data.expandable&&!(n.context.depth===1&&n.data.props?.length===1&&n.data.props?.[0]?.callStackNode)),C=J(()=>y()&&!w()),[S,k]=he({expanded:!0,wasExpanded:!1,changeReason:"reset"}),I=J(()=>y()&&S().changeReason!=="user"&&(n.context.collapsedUntilExpandedByUser||n.data.functionsNode||n.context.depth>=n.context.maxDepth||n.context.depth>1&&(n.data.props?.length||0)>n.context.expandedPropLimit)),T={toggle:()=>k(N=>{if(!N.expanded){if(n.data.loadAction)return n.data.loadAction(),{...N,expanded:!0,loading:!0,changeReason:"user"};if(C()){if(n.context.disallowValueLoad())return{...N,expanded:!1,changeReason:"user"};const H=n.data.parent?{ranges:{props:b4(n.data,n.data.parent.props),length:n.data.parent.length}}:n.data.loadActionNode?{props:Number.MAX_VALUE}:{};return n.onValueLoadRequest({path:n.data.queryPath,...H}),{...N,expanded:!0,loading:!0,changeReason:"user"}}}return{expanded:!N.expanded,wasExpanded:N.expanded,changeReason:"user"}}),get collapsed(){return!S().expanded},get expanding(){return!!S().loading},get hasLoadedValue(){return w()}},[D,M]=he(n.context.maxLineLength()),[E,W]=he(!1);if(e){const N=J(()=>D()-n.context.indentationLvl*2-n.context.linePrefixLength),H=J(()=>D()-(n.context.indentationLvl+1)*2);$e(n.context.maxLineLength,U=>{M(U),W(!0)}),$e([f,y,w],()=>{const U=f(),B=y(),Y=w();k(ne=>{if(!ne.expanded){if(U)return{expanded:!0,changeReason:"inline",wasExpanded:ne.expanded};if(!B)return{expanded:!0,changeReason:"expandable",wasExpanded:ne.expanded}}return n.context.depth===1?{expanded:!0,changeReason:"reset",wasExpanded:ne.expanded}:(!ne.expanded||ne.expanded&&!ne.wasExpanded)&&ne.changeReason!=="user"&&ne.changeReason!=="reset"||I()?{expanded:!1,changeReason:"reset",wasExpanded:ne.expanded}:ne.expanded!==Y?{expanded:Y,changeReason:"props",wasExpanded:ne.expanded}:{...ne,loading:void 0}})}),$e(h,U=>{p(B=>U.reduce((ne,ee)=>(ne[ee.id]=B[ee.id],ne),{}))}),$e([m,i,l,C,I],()=>{const U=i(),B=Object.values(m());if(B.some(K=>K===void 0))return;let Y=0,ne=!1;for(let K=0;K<B.length;K++){const Se=B[K];Y+=Se.length||0,ne=ne||Se.expander?.hasLoadedValue===!1||Se.hasPropsStoppingParentInlining===!0}const ee=Y+l()+$w+2,$=I(),ge=C(),Ie=E(),xe=S().changeReason==="user";W(!1);const z=(Ie||xe)&&N()>=ee&&!ge&&!$&&!ne;if(g(z),n.onDataAvailable({length:ee,expander:z?void 0:T,hasPropsStoppingParentInlining:ne}),!z&&(Ie||xe)&&U&&B.length>0){let K=m()[h()[0]?.id]?.length||0;const Se=H();for(let De=1;De<h().length;De++){const ke=m()[h()[De]?.id],je=ke?.length||0;K+=je;const et=m()[h()[De-1]?.id],mt=!!et?.expander||et?.hasPropsStoppingParentInlining,ze=!!ke?.expander||ke?.hasPropsStoppingParentInlining,ht=v()[De];Se>=K&&!mt&&!ze?ht||_(nt=>(nt[De]=!0,nt)):(ht&&_(nt=>(nt[De]=void 0,nt)),K=je)}}else _(Array.from({length:h().length}))},{defer:!0})}const P={...n.context,linePrefixLength:0,indentationLvl:t};return x(Fn,{get fallback(){return(()=>{var N=rpe(),H=N.firstChild,U=H.nextSibling,B=U.nextSibling;return A(N,x(se,{get when(){return a()},get children(){var Y=Jw(),ne=Y.firstChild;return A(Y,a,ne),Y}}),H),A(H,()=>s()[0]),A(N,x(se,{get when(){return f()},children:" "}),U),A(U,x(yd,{get each(){return h()},by:Y=>Y.id,children:(Y,ne)=>{const ee=J(()=>ne()<h().length-1),$=J(()=>f()||v()[ne()]),[ge,Ie]=he(),xe=e?Se=>{const De=Se.length+(ee()?2:0),ke=Se.expander;Ie(ke);const je=Qn(m)[Y().id];!Qn(E)&&je&&je.expander===Se.expander&&je.length===De&&je.hasPropsStoppingParentInlining===Se.hasPropsStoppingParentInlining||p(et=>(et[Y().id]={...je,...Se,length:De},et))}:Se=>{},z=J(()=>n.data.proxyContainerNode!==void 0||n.data.proxyNode!==void 0?{container:n.data.proxyContainerNode!==void 0,member:n.data.proxyNode!==void 0}:void 0),K={value:()=>new Promise(Se=>Se(Y())),isRoot:!1,noCopyReason:()=>Y().getter?"Expand to enable copy":void 0};return(()=>{var Se=ope(),De=Se.firstChild;return We(ke=>ke.entryInfo=K,Se),A(Se,x(se,{get when(){return!$()},get children(){return x(NC,{level:t,get expander(){return ge()}})}}),null),A(Se,x(se,{get when(){return z()},get fallback(){return x(kpe,{get i(){return ne()},get data(){return Y()},context:P,get isArray(){return i()},onDataAvailable:xe,get onValueLoadRequest(){return n.onValueLoadRequest}})},get children(){return x(xpe,{get isProxy(){return z()},get data(){return Y()},context:P,get isArray(){return i()},onDataAvailable:xe,get onValueLoadRequest(){return n.onValueLoadRequest}})}}),null),A(Se,x(se,{get when(){return ee()},get children(){return[",",J(()=>f()||v()[ne()+1]?" ":"")]}}),null),Me(()=>De.classList.toggle("hidden",!!$())),Se})()}}),null),A(U,x(se,{get when(){return!f()},get fallback(){return" "},get children(){return[k9(),x(NC,{level:t-1})]}}),null),A(N,x(se,{get when(){return!S().expanded},get children(){return(()=>{var Y=bG();return Y.$$click=()=>T.toggle(),Me(()=>Y.classList.toggle("has-no-loaded-value",!T.hasLoadedValue)),Y})()}}),B),A(B,()=>s().slice(1)),Me(Y=>{var ne=!S().expanded,ee=!!(n.context.noValueLoadBeyondMaxDepth&&n.context.depth>n.context.maxDepth);return ne!==Y.e&&U.classList.toggle("hidden",Y.e=ne),ee!==Y.t&&U.classList.toggle("disallow-value-load",Y.t=ee),Y},{e:void 0,t:void 0}),N})()},get children(){return[x(ot,{get when(){return n.data.loadActionNode},get children(){return x(Qw,{length:oD,get context(){return n.context},onDataAvailable:N=>n.onDataAvailable({...N,expander:T}),get children(){var N=npe();return N.$$click=()=>T.toggle(),mr(N,e?"token-load level-expander-ellipsis":"token-punctuation"),Me(()=>N.classList.toggle("has-no-loaded-value",!T.hasLoadedValue)),N}})}}),x(ot,{get when(){return J(()=>!!(n.data.capped||n.data.cappedElements))()&&!w()||I()||C()},get children(){return x(Qw,{get length(){return $w+oD+l()},get context(){return n.context},onDataAvailable:N=>n.onDataAvailable({...N,expander:T,hasPropsStoppingParentInlining:N.hasPropsStoppingParentInlining||I()}),get children(){return[x(se,{get when(){return a()},get children(){var N=Jw(),H=N.firstChild;return A(N,a,H),N}}),(()=>{var N=km();return A(N,()=>s()[0]),N})(),(()=>{var N=bG();return N.$$click=()=>T.toggle(),Me(()=>N.classList.toggle("has-no-loaded-value",!T.hasLoadedValue)),N})(),(()=>{var N=km();return A(N,()=>s().slice(1)),N})()]}})}}),x(ot,{get when(){return r()==="Promise"},get children(){return x(Qw,{get length(){return $w+oD+l()},get context(){return n.context},onDataAvailable:N=>n.onDataAvailable(N),get children(){return[(()=>{var N=Jw(),H=N.firstChild;return A(N,a,H),N})(),(()=>{var N=km();return A(N,()=>s()[0]),N})(),spe(),(()=>{var N=km();return A(N,()=>s().slice(1)),N})()]}})}}),x(ot,{get when(){return!y()},get children(){return x(Qw,{get length(){return $w+l()},get context(){return n.context},onDataAvailable:N=>n.onDataAvailable({...N}),get children(){return[x(se,{get when(){return a()},get children(){var N=Jw(),H=N.firstChild;return A(N,a,H),N}}),(()=>{var N=km();return A(N,()=>s()[0]),N})(),(()=>{var N=km();return A(N,()=>s().slice(1)),N})()]}})}})]}})}function XQ(n){var e=Math.floor(Number(n));return e!==1/0&&String(e)===n&&e>=0}function kpe(n){const e=J(()=>n.data.name?.toString()||(n.data.functionsNode?"":"")),t=J(()=>XQ(e())),i=J(()=>!n.data.loadActionNode&&(!n.isArray||!t())),s=J(()=>i()?e().length+2:0),r=J(()=>({...n.context,linePrefixLength:s(),collapsedUntilExpandedByUser:n.i>n.context.expandedPropLimit})),[o,a]=he(void 0);return Fi(()=>{o()!==void 0&&n.onDataAvailable({...o(),length:s()+o().length})},{defer:!0}),[x(se,{get when(){return i()},get children(){var l=BQ();return A(l,()=>`${e()}: `),l}}),x(EC,{get data(){return n.data},get context(){return r()},onDataAvailable:a,get onValueLoadRequest(){return n.onValueLoadRequest},get isArrayProp(){return n.isArray}})]}function xpe(n){const e=J(()=>n.isProxy.container?n.data.label?.name.toLowerCase()||"members":n.data.proxyData.path.join(".")),t=J(()=>XQ(e())),i=J(()=>!n.data.loadActionNode&&(!n.isArray||!t())),s=J(()=>i()?e().length+2+(n.isProxy?.member?n.data.proxyData.trap.length+1:0):0),r=J(()=>({...n.context,linePrefixLength:s()})),[o,a]=he(void 0);return Fi(()=>{o()!==void 0&&n.onDataAvailable({...o(),length:s()+o().length})},{defer:!0}),[x(se,{get when(){return i()},get children(){return[x(se,{get when(){return n.isProxy?.member},get children(){var l=ape(),c=l.firstChild;return A(l,()=>n.data.proxyData.trap,c),l}}),(()=>{var l=BQ();return A(l,()=>`${e()}: `),Me(()=>l.classList.toggle("token-comment",!!n.isProxy?.container)),l})(),x(se,{get when(){return n.context.multiline&&n.isProxy?.member&&n.data.props?.[0]?.callStackNode},get children(){var l=lpe();return A(l,x(Ee,{class:"codicon-layers",contentEditable:!0,onClick:()=>{n.onValueLoadRequest({stackNode:n.data.props?.[0]})},tooltip:"Show call stack"})),l}})]}}),x(EC,{get data(){return n.data},get context(){return r()},onDataAvailable:a,get onValueLoadRequest(){return n.onValueLoadRequest},get isArrayProp(){return n.isArray}})]}function NC(n){return x(ln,{get each(){return Array(n.level)},children:(e,t)=>(()=>{var i=dpe();return A(i,x(se,{get when(){return J(()=>!!n.expander)()&&t()===n.level-1},fallback:"  ",get children(){var s=cpe();return s.$$click=()=>n.expander.toggle(),s.addEventListener("valueToggleExternally",()=>n.expander.toggle()),Me(r=>{var o=!!n.expander.collapsed,a=!!n.expander.expanding,l=!n.expander.hasLoadedValue;return o!==r.e&&s.classList.toggle("collapsed",r.e=o),a!==r.t&&s.classList.toggle("expanding",r.t=a),l!==r.a&&s.classList.toggle("has-no-loaded-value",r.a=l),r},{e:void 0,t:void 0,a:void 0}),s}})),i})()})}function Qw(n){return Fi(()=>{n.context.maxLineLength()&&n.onDataAvailable({length:n.length})}),J(()=>n.children)}function vr(n){return Fi(()=>{n.context.maxLineLength()&&n.onDataAvailable({length:n.value.length})}),J(()=>n.value)}function Tpe(n){const[e,t]=he(null);return Fi(async()=>{try{const s=(await w4("svelte",{lines:n.value.split(`
`),current:0,frame:{start:0,end:n.value.length}}))?.lines.join(`
`);s&&(e().innerHTML=s)}catch(i){console.error("Log HTML highlighting failed",i)}n.context.maxLineLength()&&n.onDataAvailable({length:n.value.length})}),(()=>{var i=y4();return We(t,i),A(i,()=>n.value),i})()}function zQ(n){return(n.value||(n.capped===!0?"":n.capped)||"")+""}function Dpe(n){const e=J(()=>!!(n.context.multiline&&n.data.capped)),t=J(()=>zQ(n.data)),i=J(()=>{let S=t();return S=S.length>n.context.maxStrLength?`${S.substring(0,n.context.maxStrLength)}...`:typeof n.data.capped=="string"||n.data.capped===!0?`${S} ... (length: ${n.data.length||"unknown"})`:S,xS(S).replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/'/g,"\\'")}),s=J(()=>i().split(`
`)),r=J(()=>n.context.maxLineLength()-n.context.indentationLvl*2-n.context.linePrefixLength),o=2,c=2+o+2,d=J(()=>!e()&&s()[0].length+(s().length>1?c:o)<=r()),u=J(()=>n.context.multiline&&!n.isArrayProp&&i().length>16&&s().length>1&&i().length>r()),[h,f]=he(d()),[g,m]=he(u());$e([r,()=>n.isArrayProp],()=>{f(d()),m(u())});const[p,b]=he(!0),w={toggle:()=>b(S=>!S),get collapsed(){return!p()},get expanding(){return!1},get hasLoadedValue(){return!0}},[v,_]=he(!1),y={toggle:()=>{_(!0),n.onValueLoadRequest({path:n.data.queryPath,strLength:Number.MAX_VALUE})},get collapsed(){return!0},get expanding(){return v()},get hasLoadedValue(){return n.data.capped===void 0}},C=J(()=>!g()&&e());return Fi(()=>{const S=s();if(_(!1),!g()){b(!0);return}n.onDataAvailable({length:S.reduce((k,I)=>k+I.length+c,-c+o),expander:w,hasPropsStoppingParentInlining:!0})}),[x(se,{get when(){return n.context.indentationLvl>0&&!h()&&!n.isArrayProp},get children(){return x(se,{get when(){return!w.collapsed},get fallback(){return(()=>{var S=upe(),k=S.firstChild,I=k.nextSibling;return I.nextSibling,A(S,()=>s()[0].substring(0,13)+"...",I),S})()},get children(){return[(()=>{var S=k9();return Me(()=>S.classList.toggle("hidden",!!n.isArrayProp)),S})(),x(NC,{get level(){return n.context.indentationLvl+1},get expander(){return C()?y:void 0}})]}})}}),x(se,{get when(){return g()},get fallback(){return(()=>{var S=S4();return A(S,x(vr,{get value(){return`'${s().join("\\n")}'`},get context(){return n.context},onDataAvailable:k=>n.onDataAvailable({...k,hasPropsStoppingParentInlining:!h(),expander:n.isArrayProp&&e()?y:void 0})})),S})()},get children(){var S=y4();return A(S,x(ln,{get each(){return s()},children:(k,I)=>{const T=()=>I()===s().length-1;return(()=>{var D=fpe(),M=D.firstChild;return A(M,x(vr,{get value(){return`'${k}${T()?"":"\\n"}'`},onDataAvailable:()=>{},get context(){return n.context}})),A(D,x(se,{get when(){return!T()},get children(){return[hpe(),k9(),x(NC,{get level(){return n.context.indentationLvl+1},get expander(){return e()&&I()===s().length-2?y:void 0}})]}}),null),D})()}})),Me(()=>S.classList.toggle("hidden",!!w.collapsed)),S}})]}function Ipe(n){const r="new ".length+"Date".length+"(".length+")".length,o=J(()=>`'${new Date(n.data.value).toJSON()}'`);return Fi(()=>{n.onDataAvailable({length:o().length+r})}),[gpe(),mpe(),ppe(),(()=>{var a=S4();return A(a,o),a})(),bpe()]}dn(["click"]);var C4={exports:{}},ix={},HQ={},Ti={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n._registerNode=n.Konva=n.glob=void 0;const e=Math.PI/180;function t(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}n.glob=typeof vc<"u"?vc:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},n.Konva={_global:n.glob,version:"9.3.20",isBrowser:t(),isUnminified:/param/.test(function(s){}.toString()),dblClickWindow:400,getAngle(s){return n.Konva.angleDeg?s*e:s},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return n.Konva.DD.isDragging},isTransforming(){var s;return(s=n.Konva.Transformer)===null||s===void 0?void 0:s.isTransforming()},isDragReady(){return!!n.Konva.DD.node},releaseCanvasOnDestroy:!0,document:n.glob.document,_injectGlobal(s){n.glob.Konva=s}};const i=s=>{n.Konva[s.prototype.getClassName()]=s};n._registerNode=i,n.Konva._injectGlobal(n.Konva)})(Ti);var ls={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Util=n.Transform=void 0;const e=Ti;class t{constructor(_=[1,0,0,1,0,0]){this.dirty=!1,this.m=_&&_.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new t(this.m)}copyInto(_){_.m[0]=this.m[0],_.m[1]=this.m[1],_.m[2]=this.m[2],_.m[3]=this.m[3],_.m[4]=this.m[4],_.m[5]=this.m[5]}point(_){const y=this.m;return{x:y[0]*_.x+y[2]*_.y+y[4],y:y[1]*_.x+y[3]*_.y+y[5]}}translate(_,y){return this.m[4]+=this.m[0]*_+this.m[2]*y,this.m[5]+=this.m[1]*_+this.m[3]*y,this}scale(_,y){return this.m[0]*=_,this.m[1]*=_,this.m[2]*=y,this.m[3]*=y,this}rotate(_){const y=Math.cos(_),C=Math.sin(_),S=this.m[0]*y+this.m[2]*C,k=this.m[1]*y+this.m[3]*C,I=this.m[0]*-C+this.m[2]*y,T=this.m[1]*-C+this.m[3]*y;return this.m[0]=S,this.m[1]=k,this.m[2]=I,this.m[3]=T,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(_,y){const C=this.m[0]+this.m[2]*y,S=this.m[1]+this.m[3]*y,k=this.m[2]+this.m[0]*_,I=this.m[3]+this.m[1]*_;return this.m[0]=C,this.m[1]=S,this.m[2]=k,this.m[3]=I,this}multiply(_){const y=this.m[0]*_.m[0]+this.m[2]*_.m[1],C=this.m[1]*_.m[0]+this.m[3]*_.m[1],S=this.m[0]*_.m[2]+this.m[2]*_.m[3],k=this.m[1]*_.m[2]+this.m[3]*_.m[3],I=this.m[0]*_.m[4]+this.m[2]*_.m[5]+this.m[4],T=this.m[1]*_.m[4]+this.m[3]*_.m[5]+this.m[5];return this.m[0]=y,this.m[1]=C,this.m[2]=S,this.m[3]=k,this.m[4]=I,this.m[5]=T,this}invert(){const _=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),y=this.m[3]*_,C=-this.m[1]*_,S=-this.m[2]*_,k=this.m[0]*_,I=_*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),T=_*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=y,this.m[1]=C,this.m[2]=S,this.m[3]=k,this.m[4]=I,this.m[5]=T,this}getMatrix(){return this.m}decompose(){const _=this.m[0],y=this.m[1],C=this.m[2],S=this.m[3],k=this.m[4],I=this.m[5],T=_*S-y*C,D={x:k,y:I,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(_!=0||y!=0){const M=Math.sqrt(_*_+y*y);D.rotation=y>0?Math.acos(_/M):-Math.acos(_/M),D.scaleX=M,D.scaleY=T/M,D.skewX=(_*C+y*S)/T,D.skewY=0}else if(C!=0||S!=0){const M=Math.sqrt(C*C+S*S);D.rotation=Math.PI/2-(S>0?Math.acos(-C/M):-Math.acos(C/M)),D.scaleX=T/M,D.scaleY=M,D.skewX=0,D.skewY=(_*C+y*S)/T}return D.rotation=n.Util._getRotation(D.rotation),D}}n.Transform=t;const i="[object Array]",s="[object Number]",r="[object String]",o="[object Boolean]",a=Math.PI/180,l=180/Math.PI,c="#",d="",u="0",h="Konva warning: ",f="Konva error: ",g="rgb(",m={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},p=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let b=[];const w=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(v){setTimeout(v,60)};n.Util={_isElement(v){return!!(v&&v.nodeType==1)},_isFunction(v){return!!(v&&v.constructor&&v.call&&v.apply)},_isPlainObject(v){return!!v&&v.constructor===Object},_isArray(v){return Object.prototype.toString.call(v)===i},_isNumber(v){return Object.prototype.toString.call(v)===s&&!isNaN(v)&&isFinite(v)},_isString(v){return Object.prototype.toString.call(v)===r},_isBoolean(v){return Object.prototype.toString.call(v)===o},isObject(v){return v instanceof Object},isValidSelector(v){if(typeof v!="string")return!1;const _=v[0];return _==="#"||_==="."||_===_.toUpperCase()},_sign(v){return v===0||v>0?1:-1},requestAnimFrame(v){b.push(v),b.length===1&&w(function(){const _=b;b=[],_.forEach(function(y){y()})})},createCanvasElement(){const v=document.createElement("canvas");try{v.style=v.style||{}}catch{}return v},createImageElement(){return document.createElement("img")},_isInDocument(v){for(;v=v.parentNode;)if(v==document)return!0;return!1},_urlToImage(v,_){const y=n.Util.createImageElement();y.onload=function(){_(y)},y.src=v},_rgbToHex(v,_,y){return((1<<24)+(v<<16)+(_<<8)+y).toString(16).slice(1)},_hexToRgb(v){v=v.replace(c,d);const _=parseInt(v,16);return{r:_>>16&255,g:_>>8&255,b:_&255}},getRandomColor(){let v=(Math.random()*16777215<<0).toString(16);for(;v.length<6;)v=u+v;return c+v},getRGB(v){let _;return v in m?(_=m[v],{r:_[0],g:_[1],b:_[2]}):v[0]===c?this._hexToRgb(v.substring(1)):v.substr(0,4)===g?(_=p.exec(v.replace(/ /g,"")),{r:parseInt(_[1],10),g:parseInt(_[2],10),b:parseInt(_[3],10)}):{r:0,g:0,b:0}},colorToRGBA(v){return v=v||"black",n.Util._namedColorToRBA(v)||n.Util._hex3ColorToRGBA(v)||n.Util._hex4ColorToRGBA(v)||n.Util._hex6ColorToRGBA(v)||n.Util._hex8ColorToRGBA(v)||n.Util._rgbColorToRGBA(v)||n.Util._rgbaColorToRGBA(v)||n.Util._hslColorToRGBA(v)},_namedColorToRBA(v){const _=m[v.toLowerCase()];return _?{r:_[0],g:_[1],b:_[2],a:1}:null},_rgbColorToRGBA(v){if(v.indexOf("rgb(")===0){v=v.match(/rgb\(([^)]+)\)/)[1];const _=v.split(/ *, */).map(Number);return{r:_[0],g:_[1],b:_[2],a:1}}},_rgbaColorToRGBA(v){if(v.indexOf("rgba(")===0){v=v.match(/rgba\(([^)]+)\)/)[1];const _=v.split(/ *, */).map((y,C)=>y.slice(-1)==="%"?C===3?parseInt(y)/100:parseInt(y)/100*255:Number(y));return{r:_[0],g:_[1],b:_[2],a:_[3]}}},_hex8ColorToRGBA(v){if(v[0]==="#"&&v.length===9)return{r:parseInt(v.slice(1,3),16),g:parseInt(v.slice(3,5),16),b:parseInt(v.slice(5,7),16),a:parseInt(v.slice(7,9),16)/255}},_hex6ColorToRGBA(v){if(v[0]==="#"&&v.length===7)return{r:parseInt(v.slice(1,3),16),g:parseInt(v.slice(3,5),16),b:parseInt(v.slice(5,7),16),a:1}},_hex4ColorToRGBA(v){if(v[0]==="#"&&v.length===5)return{r:parseInt(v[1]+v[1],16),g:parseInt(v[2]+v[2],16),b:parseInt(v[3]+v[3],16),a:parseInt(v[4]+v[4],16)/255}},_hex3ColorToRGBA(v){if(v[0]==="#"&&v.length===4)return{r:parseInt(v[1]+v[1],16),g:parseInt(v[2]+v[2],16),b:parseInt(v[3]+v[3],16),a:1}},_hslColorToRGBA(v){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(v)){const[_,...y]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(v),C=Number(y[0])/360,S=Number(y[1])/100,k=Number(y[2])/100;let I,T,D;if(S===0)return D=k*255,{r:Math.round(D),g:Math.round(D),b:Math.round(D),a:1};k<.5?I=k*(1+S):I=k+S-k*S;const M=2*k-I,E=[0,0,0];for(let W=0;W<3;W++)T=C+1/3*-(W-1),T<0&&T++,T>1&&T--,6*T<1?D=M+(I-M)*6*T:2*T<1?D=I:3*T<2?D=M+(I-M)*(2/3-T)*6:D=M,E[W]=D*255;return{r:Math.round(E[0]),g:Math.round(E[1]),b:Math.round(E[2]),a:1}}},haveIntersection(v,_){return!(_.x>v.x+v.width||_.x+_.width<v.x||_.y>v.y+v.height||_.y+_.height<v.y)},cloneObject(v){const _={};for(const y in v)this._isPlainObject(v[y])?_[y]=this.cloneObject(v[y]):this._isArray(v[y])?_[y]=this.cloneArray(v[y]):_[y]=v[y];return _},cloneArray(v){return v.slice(0)},degToRad(v){return v*a},radToDeg(v){return v*l},_degToRad(v){return n.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),n.Util.degToRad(v)},_radToDeg(v){return n.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),n.Util.radToDeg(v)},_getRotation(v){return e.Konva.angleDeg?n.Util.radToDeg(v):v},_capitalize(v){return v.charAt(0).toUpperCase()+v.slice(1)},throw(v){throw new Error(f+v)},error(v){console.error(f+v)},warn(v){e.Konva.showWarnings&&console.warn(h+v)},each(v,_){for(const y in v)_(y,v[y])},_inRange(v,_,y){return _<=v&&v<y},_getProjectionToSegment(v,_,y,C,S,k){let I,T,D;const M=(v-y)*(v-y)+(_-C)*(_-C);if(M==0)I=v,T=_,D=(S-y)*(S-y)+(k-C)*(k-C);else{const E=((S-v)*(y-v)+(k-_)*(C-_))/M;E<0?(I=v,T=_,D=(v-S)*(v-S)+(_-k)*(_-k)):E>1?(I=y,T=C,D=(y-S)*(y-S)+(C-k)*(C-k)):(I=v+E*(y-v),T=_+E*(C-_),D=(I-S)*(I-S)+(T-k)*(T-k))}return[I,T,D]},_getProjectionToLine(v,_,y){const C=n.Util.cloneObject(v);let S=Number.MAX_VALUE;return _.forEach(function(k,I){if(!y&&I===_.length-1)return;const T=_[(I+1)%_.length],D=n.Util._getProjectionToSegment(k.x,k.y,T.x,T.y,v.x,v.y),M=D[0],E=D[1],W=D[2];W<S&&(C.x=M,C.y=E,S=W)}),C},_prepareArrayForTween(v,_,y){const C=[],S=[];if(v.length>_.length){const I=_;_=v,v=I}for(let I=0;I<v.length;I+=2)C.push({x:v[I],y:v[I+1]});for(let I=0;I<_.length;I+=2)S.push({x:_[I],y:_[I+1]});const k=[];return S.forEach(function(I){const T=n.Util._getProjectionToLine(I,C,y);k.push(T.x),k.push(T.y)}),k},_prepareToStringify(v){let _;v.visitedByCircularReferenceRemoval=!0;for(const y in v)if(v.hasOwnProperty(y)&&v[y]&&typeof v[y]=="object"){if(_=Object.getOwnPropertyDescriptor(v,y),v[y].visitedByCircularReferenceRemoval||n.Util._isElement(v[y]))if(_.configurable)delete v[y];else return null;else if(n.Util._prepareToStringify(v[y])===null)if(_.configurable)delete v[y];else return null}return delete v.visitedByCircularReferenceRemoval,v},_assign(v,_){for(const y in _)v[y]=_[y];return v},_getFirstPointerId(v){return v.touches?v.changedTouches[0].identifier:v.pointerId||999},releaseCanvas(...v){e.Konva.releaseCanvasOnDestroy&&v.forEach(_=>{_.width=0,_.height=0})},drawRoundedRectPath(v,_,y,C){let S=0,k=0,I=0,T=0;typeof C=="number"?S=k=I=T=Math.min(C,_/2,y/2):(S=Math.min(C[0]||0,_/2,y/2),k=Math.min(C[1]||0,_/2,y/2),T=Math.min(C[2]||0,_/2,y/2),I=Math.min(C[3]||0,_/2,y/2)),v.moveTo(S,0),v.lineTo(_-k,0),v.arc(_-k,k,k,Math.PI*3/2,0,!1),v.lineTo(_,y-T),v.arc(_-T,y-T,T,0,Math.PI/2,!1),v.lineTo(I,y),v.arc(I,y-I,I,Math.PI/2,Math.PI,!1),v.lineTo(0,S),v.arc(S,S,S,Math.PI,Math.PI*3/2,!1)}}})(ls);var qn={},Mi={},ti={};Object.defineProperty(ti,"__esModule",{value:!0});ti.RGBComponent=Mpe;ti.alphaComponent=Epe;ti.getNumberValidator=Npe;ti.getNumberOrArrayOfNumbersValidator=Rpe;ti.getNumberOrAutoValidator=Wpe;ti.getStringValidator=Ape;ti.getStringOrGradientValidator=Fpe;ti.getFunctionValidator=Vpe;ti.getNumberArrayValidator=Ppe;ti.getBooleanValidator=Ope;ti.getComponentValidator=Zpe;const iu=Ti,vs=ls;function nu(n){return vs.Util._isString(n)?'"'+n+'"':Object.prototype.toString.call(n)==="[object Number]"||vs.Util._isBoolean(n)?n:Object.prototype.toString.call(n)}function Mpe(n){return n>255?255:n<0?0:Math.round(n)}function Epe(n){return n>1?1:n<1e-4?1e-4:n}function Npe(){if(iu.Konva.isUnminified)return function(n,e){return vs.Util._isNumber(n)||vs.Util.warn(nu(n)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),n}}function Rpe(n){if(iu.Konva.isUnminified)return function(e,t){let i=vs.Util._isNumber(e),s=vs.Util._isArray(e)&&e.length==n;return!i&&!s&&vs.Util.warn(nu(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or Array<number>('+n+")"),e}}function Wpe(){if(iu.Konva.isUnminified)return function(n,e){var t=vs.Util._isNumber(n),i=n==="auto";return t||i||vs.Util.warn(nu(n)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),n}}function Ape(){if(iu.Konva.isUnminified)return function(n,e){return vs.Util._isString(n)||vs.Util.warn(nu(n)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),n}}function Fpe(){if(iu.Konva.isUnminified)return function(n,e){const t=vs.Util._isString(n),i=Object.prototype.toString.call(n)==="[object CanvasGradient]"||n&&n.addColorStop;return t||i||vs.Util.warn(nu(n)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),n}}function Vpe(){if(iu.Konva.isUnminified)return function(n,e){return vs.Util._isFunction(n)||vs.Util.warn(nu(n)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),n}}function Ppe(){if(iu.Konva.isUnminified)return function(n,e){const t=Int8Array?Object.getPrototypeOf(Int8Array):null;return t&&n instanceof t||(vs.Util._isArray(n)?n.forEach(function(i){vs.Util._isNumber(i)||vs.Util.warn('"'+e+'" attribute has non numeric element '+i+". Make sure that all elements are numbers.")}):vs.Util.warn(nu(n)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),n}}function Ope(){if(iu.Konva.isUnminified)return function(n,e){var t=n===!0||n===!1;return t||vs.Util.warn(nu(n)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),n}}function Zpe(n){if(iu.Konva.isUnminified)return function(e,t){return e==null||vs.Util.isObject(e)||vs.Util.warn(nu(e)+' is a not valid value for "'+t+'" attribute. The value should be an object with properties '+n),e}}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Factory=void 0;const e=ls,t=ti,i="get",s="set";n.Factory={addGetterSetter(r,o,a,l,c){n.Factory.addGetter(r,o,a),n.Factory.addSetter(r,o,l,c),n.Factory.addOverloadedGetterSetter(r,o)},addGetter(r,o,a){var l=i+e.Util._capitalize(o);r.prototype[l]=r.prototype[l]||function(){const c=this.attrs[o];return c===void 0?a:c}},addSetter(r,o,a,l){var c=s+e.Util._capitalize(o);r.prototype[c]||n.Factory.overWriteSetter(r,o,a,l)},overWriteSetter(r,o,a,l){var c=s+e.Util._capitalize(o);r.prototype[c]=function(d){return a&&d!==void 0&&d!==null&&(d=a.call(this,d,o)),this._setAttr(o,d),l&&l.call(this),this}},addComponentsGetterSetter(r,o,a,l,c){const d=a.length,u=e.Util._capitalize,h=i+u(o),f=s+u(o);r.prototype[h]=function(){const m={};for(let p=0;p<d;p++){const b=a[p];m[b]=this.getAttr(o+u(b))}return m};const g=(0,t.getComponentValidator)(a);r.prototype[f]=function(m){const p=this.attrs[o];l&&(m=l.call(this,m,o)),g&&g.call(this,m,o);for(const b in m)m.hasOwnProperty(b)&&this._setAttr(o+u(b),m[b]);return m||a.forEach(b=>{this._setAttr(o+u(b),void 0)}),this._fireChangeEvent(o,p,m),c&&c.call(this),this},n.Factory.addOverloadedGetterSetter(r,o)},addOverloadedGetterSetter(r,o){var a=e.Util._capitalize(o),l=s+a,c=i+a;r.prototype[o]=function(){return arguments.length?(this[l](arguments[0]),this):this[c]()}},addDeprecatedGetterSetter(r,o,a,l){e.Util.error("Adding deprecated "+o);const c=i+e.Util._capitalize(o),d=o+" property is deprecated and will be removed soon. Look at Konva change log for more information.";r.prototype[c]=function(){e.Util.error(d);const u=this.attrs[o];return u===void 0?a:u},n.Factory.addSetter(r,o,l,function(){e.Util.error(d)}),n.Factory.addOverloadedGetterSetter(r,o)},backCompat(r,o){e.Util.each(o,function(a,l){const c=r.prototype[l],d=i+e.Util._capitalize(a),u=s+e.Util._capitalize(a);function h(){c.apply(this,arguments),e.Util.error('"'+a+'" method is deprecated and will be removed soon. Use ""'+l+'" instead.')}r.prototype[a]=h,r.prototype[d]=h,r.prototype[u]=h})},afterSetFilter(){this._filterUpToDate=!1}}})(Mi);var Ll={},Fd={};Object.defineProperty(Fd,"__esModule",{value:!0});Fd.HitContext=Fd.SceneContext=Fd.Context=void 0;const UQ=ls,Gpe=Ti;function Bpe(n){const e=[],t=n.length,i=UQ.Util;for(let s=0;s<t;s++){let r=n[s];i._isNumber(r)?r=Math.round(r*1e3)/1e3:i._isString(r)||(r=r+""),e.push(r)}return e}const _G=",",Xpe="(",zpe=")",Hpe="([",Upe="])",Ype=";",Kpe="()",jpe="=",wG=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],Jpe=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],$pe=100;let nx=class{constructor(e){this.canvas=e,Gpe.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,t){let i=this.traceArr,s=i.length,r="",o,a,l,c;for(o=0;o<s;o++)a=i[o],l=a.method,l?(c=a.args,r+=l,e?r+=Kpe:UQ.Util._isArray(c[0])?r+=Hpe+c.join(_G)+Upe:(t&&(c=c.map(d=>typeof d=="number"?Math.floor(d):d)),r+=Xpe+c.join(_G)+zpe)):(r+=a.property,e||(r+=jpe+a.val)),r+=Ype;return r}clearTrace(){this.traceArr=[]}_trace(e){let t=this.traceArr,i;t.push(e),i=t.length,i>=$pe&&t.shift()}reset(){const e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){const t=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,t.getWidth()/t.pixelRatio,t.getHeight()/t.pixelRatio)}_applyLineCap(e){const t=e.attrs.lineCap;t&&this.setAttr("lineCap",t)}_applyOpacity(e){const t=e.getAbsoluteOpacity();t!==1&&this.setAttr("globalAlpha",t)}_applyLineJoin(e){const t=e.attrs.lineJoin;t&&this.setAttr("lineJoin",t)}setAttr(e,t){this._context[e]=t}arc(e,t,i,s,r,o){this._context.arc(e,t,i,s,r,o)}arcTo(e,t,i,s,r){this._context.arcTo(e,t,i,s,r)}beginPath(){this._context.beginPath()}bezierCurveTo(e,t,i,s,r,o){this._context.bezierCurveTo(e,t,i,s,r,o)}clearRect(e,t,i,s){this._context.clearRect(e,t,i,s)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,t){const i=arguments;if(i.length===2)return this._context.createImageData(e,t);if(i.length===1)return this._context.createImageData(e)}createLinearGradient(e,t,i,s){return this._context.createLinearGradient(e,t,i,s)}createPattern(e,t){return this._context.createPattern(e,t)}createRadialGradient(e,t,i,s,r,o){return this._context.createRadialGradient(e,t,i,s,r,o)}drawImage(e,t,i,s,r,o,a,l,c){const d=arguments,u=this._context;d.length===3?u.drawImage(e,t,i):d.length===5?u.drawImage(e,t,i,s,r):d.length===9&&u.drawImage(e,t,i,s,r,o,a,l,c)}ellipse(e,t,i,s,r,o,a,l){this._context.ellipse(e,t,i,s,r,o,a,l)}isPointInPath(e,t,i,s){return i?this._context.isPointInPath(i,e,t,s):this._context.isPointInPath(e,t,s)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,t,i,s){this._context.fillRect(e,t,i,s)}strokeRect(e,t,i,s){this._context.strokeRect(e,t,i,s)}fillText(e,t,i,s){s?this._context.fillText(e,t,i,s):this._context.fillText(e,t,i)}measureText(e){return this._context.measureText(e)}getImageData(e,t,i,s){return this._context.getImageData(e,t,i,s)}lineTo(e,t){this._context.lineTo(e,t)}moveTo(e,t){this._context.moveTo(e,t)}rect(e,t,i,s){this._context.rect(e,t,i,s)}roundRect(e,t,i,s,r){this._context.roundRect(e,t,i,s,r)}putImageData(e,t,i){this._context.putImageData(e,t,i)}quadraticCurveTo(e,t,i,s){this._context.quadraticCurveTo(e,t,i,s)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,t){this._context.scale(e,t)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,t,i,s,r,o){this._context.setTransform(e,t,i,s,r,o)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,t,i,s){this._context.strokeText(e,t,i,s)}transform(e,t,i,s,r,o){this._context.transform(e,t,i,s,r,o)}translate(e,t){this._context.translate(e,t)}_enableTrace(){let e=this,t=wG.length,i=this.setAttr,s,r;const o=function(a){let l=e[a],c;e[a]=function(){return r=Bpe(Array.prototype.slice.call(arguments,0)),c=l.apply(e,arguments),e._trace({method:a,args:r}),c}};for(s=0;s<t;s++)o(wG[s]);e.setAttr=function(){i.apply(e,arguments);const a=arguments[0];let l=arguments[1];(a==="shadowOffsetX"||a==="shadowOffsetY"||a==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),e._trace({property:a,val:l})}}_applyGlobalCompositeOperation(e){const t=e.attrs.globalCompositeOperation;!t||t==="source-over"||this.setAttr("globalCompositeOperation",t)}};Fd.Context=nx;Jpe.forEach(function(n){Object.defineProperty(nx.prototype,n,{get(){return this._context[n]},set(e){this._context[n]=e}})});class Qpe extends nx{constructor(e,{willReadFrequently:t=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:t})}_fillColor(e){const t=e.fill();this.setAttr("fillStyle",t),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){const t=e._getLinearGradient();t&&(this.setAttr("fillStyle",t),e._fillFunc(this))}_fillRadialGradient(e){const t=e._getRadialGradient();t&&(this.setAttr("fillStyle",t),e._fillFunc(this))}_fill(e){const t=e.fill(),i=e.getFillPriority();if(t&&i==="color"){this._fillColor(e);return}const s=e.getFillPatternImage();if(s&&i==="pattern"){this._fillPattern(e);return}const r=e.getFillLinearGradientColorStops();if(r&&i==="linear-gradient"){this._fillLinearGradient(e);return}const o=e.getFillRadialGradientColorStops();if(o&&i==="radial-gradient"){this._fillRadialGradient(e);return}t?this._fillColor(e):s?this._fillPattern(e):r?this._fillLinearGradient(e):o&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const t=e.getStrokeLinearGradientStartPoint(),i=e.getStrokeLinearGradientEndPoint(),s=e.getStrokeLinearGradientColorStops(),r=this.createLinearGradient(t.x,t.y,i.x,i.y);if(s){for(let o=0;o<s.length;o+=2)r.addColorStop(s[o],s[o+1]);this.setAttr("strokeStyle",r)}}_stroke(e){const t=e.dash(),i=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!i){this.save();const r=this.getCanvas().getPixelRatio();this.setTransform(r,0,0,r,0,0)}this._applyLineCap(e),t&&e.dashEnabled()&&(this.setLineDash(t),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),e.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),i||this.restore()}}_applyShadow(e){var t,i,s;const r=(t=e.getShadowRGBA())!==null&&t!==void 0?t:"black",o=(i=e.getShadowBlur())!==null&&i!==void 0?i:5,a=(s=e.getShadowOffset())!==null&&s!==void 0?s:{x:0,y:0},l=e.getAbsoluteScale(),c=this.canvas.getPixelRatio(),d=l.x*c,u=l.y*c;this.setAttr("shadowColor",r),this.setAttr("shadowBlur",o*Math.min(Math.abs(d),Math.abs(u))),this.setAttr("shadowOffsetX",a.x*d),this.setAttr("shadowOffsetY",a.y*u)}}Fd.SceneContext=Qpe;class qpe extends nx{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const t=e.getStrokeScaleEnabled();if(!t){this.save();const r=this.getCanvas().getPixelRatio();this.setTransform(r,0,0,r,0,0)}this._applyLineCap(e);const i=e.hitStrokeWidth(),s=i==="auto"?e.strokeWidth():i;this.setAttr("lineWidth",s),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),t||this.restore()}}}Fd.HitContext=qpe;Object.defineProperty(Ll,"__esModule",{value:!0});Ll.HitCanvas=Ll.SceneCanvas=Ll.Canvas=void 0;const RC=ls,YQ=Fd,KQ=Ti;let qw;function ebe(){if(qw)return qw;const n=RC.Util.createCanvasElement(),e=n.getContext("2d");return qw=function(){const t=KQ.Konva._global.devicePixelRatio||1,i=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/i}(),RC.Util.releaseCanvas(n),qw}class L4{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const i=(e||{}).pixelRatio||KQ.Konva.pixelRatio||ebe();this.pixelRatio=i,this._canvas=RC.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){const t=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/t,this.getHeight()/t)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";const t=this.pixelRatio;this.getContext()._context.scale(t,t)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";const t=this.pixelRatio;this.getContext()._context.scale(t,t)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,t){this.setWidth(e||0),this.setHeight(t||0)}toDataURL(e,t){try{return this._canvas.toDataURL(e,t)}catch{try{return this._canvas.toDataURL()}catch(s){return RC.Util.error("Unable to get data URL. "+s.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}Ll.Canvas=L4;class tbe extends L4{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new YQ.SceneContext(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}}Ll.SceneCanvas=tbe;class ibe extends L4{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new YQ.HitContext(this),this.setSize(e.width,e.height)}}Ll.HitCanvas=ibe;var sx={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.DD=void 0;const e=Ti,t=ls;n.DD={get isDragging(){let i=!1;return n.DD._dragElements.forEach(s=>{s.dragStatus==="dragging"&&(i=!0)}),i},justDragged:!1,get node(){let i;return n.DD._dragElements.forEach(s=>{i=s.node}),i},_dragElements:new Map,_drag(i){const s=[];n.DD._dragElements.forEach((r,o)=>{const{node:a}=r,l=a.getStage();l.setPointersPositions(i),r.pointerId===void 0&&(r.pointerId=t.Util._getFirstPointerId(i));const c=l._changedPointerPositions.find(d=>d.id===r.pointerId);if(c){if(r.dragStatus!=="dragging"){const d=a.dragDistance();if(Math.max(Math.abs(c.x-r.startPointerPos.x),Math.abs(c.y-r.startPointerPos.y))<d||(a.startDrag({evt:i}),!a.isDragging()))return}a._setDragPosition(i,r),s.push(a)}}),s.forEach(r=>{r.fire("dragmove",{type:"dragmove",target:r,evt:i},!0)})},_endDragBefore(i){const s=[];n.DD._dragElements.forEach(r=>{const{node:o}=r,a=o.getStage();if(i&&a.setPointersPositions(i),!a._changedPointerPositions.find(d=>d.id===r.pointerId))return;(r.dragStatus==="dragging"||r.dragStatus==="stopped")&&(n.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,r.dragStatus="stopped");const c=r.node.getLayer()||r.node instanceof e.Konva.Stage&&r.node;c&&s.indexOf(c)===-1&&s.push(c)}),s.forEach(r=>{r.draw()})},_endDragAfter(i){n.DD._dragElements.forEach((s,r)=>{s.dragStatus==="stopped"&&s.node.fire("dragend",{type:"dragend",target:s.node,evt:i},!0),s.dragStatus!=="dragging"&&n.DD._dragElements.delete(r)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",n.DD._endDragBefore,!0),window.addEventListener("touchend",n.DD._endDragBefore,!0),window.addEventListener("touchcancel",n.DD._endDragBefore,!0),window.addEventListener("mousemove",n.DD._drag),window.addEventListener("touchmove",n.DD._drag),window.addEventListener("mouseup",n.DD._endDragAfter,!1),window.addEventListener("touchend",n.DD._endDragAfter,!1),window.addEventListener("touchcancel",n.DD._endDragAfter,!1))})(sx);Object.defineProperty(qn,"__esModule",{value:!0});qn.Node=void 0;const Wi=ls,j1=Mi,Z0=Ll,pu=Ti,_a=sx,Rs=ti,DS="absoluteOpacity",ey="allEventListeners",sd="absoluteTransform",yG="absoluteScale",gf="canvas",nbe="Change",sbe="children",rbe="konva",x9="listening",SG="mouseenter",CG="mouseleave",LG="set",kG="Shape",IS=" ",xG="stage",Lu="transform",obe="Stage",T9="visible",abe=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(IS);let lbe=1,mi=class D9{constructor(e){this._id=lbe++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===Lu||e===sd)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,t){let i=this._cache.get(e);return(i===void 0||(e===Lu||e===sd)&&i.dirty===!0)&&(i=t.call(this),this._cache.set(e,i)),i}_calculate(e,t,i){if(!this._attachedDepsListeners.get(e)){const s=t.map(r=>r+"Change.konva").join(IS);this.on(s,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,i)}_getCanvasCache(){return this._cache.get(gf)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===sd&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(gf)){const{scene:e,filter:t,hit:i}=this._cache.get(gf);Wi.Util.releaseCanvas(e,t,i),this._cache.delete(gf)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){const t=e||{};let i={};(t.x===void 0||t.y===void 0||t.width===void 0||t.height===void 0)&&(i=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let s=Math.ceil(t.width||i.width),r=Math.ceil(t.height||i.height),o=t.pixelRatio,a=t.x===void 0?Math.floor(i.x):t.x,l=t.y===void 0?Math.floor(i.y):t.y,c=t.offset||0,d=t.drawBorder||!1,u=t.hitCanvasPixelRatio||1;if(!s||!r){Wi.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const h=Math.abs(Math.round(i.x)-a)>.5?1:0,f=Math.abs(Math.round(i.y)-l)>.5?1:0;s+=c*2+h,r+=c*2+f,a-=c,l-=c;const g=new Z0.SceneCanvas({pixelRatio:o,width:s,height:r}),m=new Z0.SceneCanvas({pixelRatio:o,width:0,height:0,willReadFrequently:!0}),p=new Z0.HitCanvas({pixelRatio:u,width:s,height:r}),b=g.getContext(),w=p.getContext();return p.isCache=!0,g.isCache=!0,this._cache.delete(gf),this._filterUpToDate=!1,t.imageSmoothingEnabled===!1&&(g.getContext()._context.imageSmoothingEnabled=!1,m.getContext()._context.imageSmoothingEnabled=!1),b.save(),w.save(),b.translate(-a,-l),w.translate(-a,-l),this._isUnderCache=!0,this._clearSelfAndDescendantCache(DS),this._clearSelfAndDescendantCache(yG),this.drawScene(g,this),this.drawHit(p,this),this._isUnderCache=!1,b.restore(),w.restore(),d&&(b.save(),b.beginPath(),b.rect(0,0,s,r),b.closePath(),b.setAttr("strokeStyle","red"),b.setAttr("lineWidth",5),b.stroke(),b.restore()),this._cache.set(gf,{scene:g,filter:m,hit:p,x:a,y:l}),this._requestDraw(),this}isCached(){return this._cache.has(gf)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,t){const i=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}];let s=1/0,r=1/0,o=-1/0,a=-1/0;const l=this.getAbsoluteTransform(t);return i.forEach(function(c){const d=l.point(c);s===void 0&&(s=o=d.x,r=a=d.y),s=Math.min(s,d.x),r=Math.min(r,d.y),o=Math.max(o,d.x),a=Math.max(a,d.y)}),{x:s,y:r,width:o-s,height:a-r}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const t=this._getCanvasCache();e.translate(t.x,t.y);const i=this._getCachedSceneCanvas(),s=i.pixelRatio;e.drawImage(i._canvas,0,0,i.width/s,i.height/s),e.restore()}_drawCachedHitCanvas(e){const t=this._getCanvasCache(),i=t.hit;e.save(),e.translate(t.x,t.y),e.drawImage(i._canvas,0,0,i.width/i.pixelRatio,i.height/i.pixelRatio),e.restore()}_getCachedSceneCanvas(){let e=this.filters(),t=this._getCanvasCache(),i=t.scene,s=t.filter,r=s.getContext(),o,a,l,c;if(e){if(!this._filterUpToDate){const d=i.pixelRatio;s.setSize(i.width/i.pixelRatio,i.height/i.pixelRatio);try{for(o=e.length,r.clear(),r.drawImage(i._canvas,0,0,i.getWidth()/d,i.getHeight()/d),a=r.getImageData(0,0,s.getWidth(),s.getHeight()),l=0;l<o;l++){if(c=e[l],typeof c!="function"){Wi.Util.error("Filter should be type of function, but got "+typeof c+" instead. Please check correct filters");continue}c.call(this,a),r.putImageData(a,0,0)}}catch(u){Wi.Util.error("Unable to apply filter. "+u.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return s}return i}on(e,t){if(this._cache&&this._cache.delete(ey),arguments.length===3)return this._delegate.apply(this,arguments);let i=e.split(IS),s=i.length,r,o,a,l,c;for(r=0;r<s;r++)o=i[r],a=o.split("."),l=a[0],c=a[1]||"",this.eventListeners[l]||(this.eventListeners[l]=[]),this.eventListeners[l].push({name:c,handler:t});return this}off(e,t){let i=(e||"").split(IS),s=i.length,r,o,a,l,c,d;if(this._cache&&this._cache.delete(ey),!e)for(o in this.eventListeners)this._off(o);for(r=0;r<s;r++)if(a=i[r],l=a.split("."),c=l[0],d=l[1],c)this.eventListeners[c]&&this._off(c,d,t);else for(o in this.eventListeners)this._off(o,d,t);return this}dispatchEvent(e){const t={target:this,type:e.type,evt:e};return this.fire(e.type,t),this}addEventListener(e,t){return this.on(e,function(i){t.call(this,i.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,t,i){const s=this;this.on(e,function(r){const o=r.target.findAncestors(t,!0,s);for(let a=0;a<o.length;a++)r=Wi.Util.cloneObject(r),r.currentTarget=o[a],i.call(o[a],r)})}remove(){return this.isDragging()&&this.stopDrag(),_a.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(sd),this._clearSelfAndDescendantCache(DS),this._clearSelfAndDescendantCache(yG),this._clearSelfAndDescendantCache(xG),this._clearSelfAndDescendantCache(T9),this._clearSelfAndDescendantCache(x9)}_remove(){this._clearCaches();const e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){const t="get"+Wi.Util._capitalize(e);return Wi.Util._isFunction(this[t])?this[t]():this.attrs[e]}getAncestors(){let e=this.getParent(),t=[];for(;e;)t.push(e),e=e.getParent();return t}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{let t,i;if(!e)return this;for(t in e)t!==sbe&&(i=LG+Wi.Util._capitalize(t),Wi.Util._isFunction(this[i])?this[i](e[t]):this._setAttr(t,e[t]))}),this}isListening(){return this._getCache(x9,this._isListening)}_isListening(e){if(!this.listening())return!1;const i=this.getParent();return i&&i!==e&&this!==e?i._isListening(e):!0}isVisible(){return this._getCache(T9,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const i=this.getParent();return i&&i!==e&&this!==e?i._isVisible(e):!0}shouldDrawHit(e,t=!1){if(e)return this._isVisible(e)&&this._isListening(e);const i=this.getLayer();let s=!1;_a.DD._dragElements.forEach(o=>{o.dragStatus==="dragging"&&(o.node.nodeType==="Stage"||o.node.getLayer()===i)&&(s=!0)});const r=!t&&!pu.Konva.hitOnDragEnabled&&(s||pu.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!r}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let e=this.getDepth(),t=this,i=0,s,r,o,a;function l(d){for(s=[],r=d.length,o=0;o<r;o++)a=d[o],i++,a.nodeType!==kG&&(s=s.concat(a.getChildren().slice())),a._id===t._id&&(o=r);s.length>0&&s[0].getDepth()<=e&&l(s)}const c=this.getStage();return t.nodeType!==obe&&c&&l(c.getChildren()),i}getDepth(){let e=0,t=this.parent;for(;t;)e++,t=t.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Lu),this._clearSelfAndDescendantCache(sd)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const e=this.getStage();if(!e)return null;const t=e.getPointerPosition();if(!t)return null;const i=this.getAbsoluteTransform().copy();return i.invert(),i.point(t)}getAbsolutePosition(e){let t=!1,i=this.parent;for(;i;){if(i.isCached()){t=!0;break}i=i.parent}t&&!e&&(e=!0);const s=this.getAbsoluteTransform(e).getMatrix(),r=new Wi.Transform,o=this.offset();return r.m=s.slice(),r.translate(o.x,o.y),r.getTranslation()}setAbsolutePosition(e){const{x:t,y:i,...s}=this._clearTransform();this.attrs.x=t,this.attrs.y=i,this._clearCache(Lu);const r=this._getAbsoluteTransform().copy();return r.invert(),r.translate(e.x,e.y),e={x:this.attrs.x+r.getTranslation().x,y:this.attrs.y+r.getTranslation().y},this._setTransform(s),this.setPosition({x:e.x,y:e.y}),this._clearCache(Lu),this._clearSelfAndDescendantCache(sd),this}_setTransform(e){let t;for(t in e)this.attrs[t]=e[t]}_clearTransform(){const e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){let t=e.x,i=e.y,s=this.x(),r=this.y();return t!==void 0&&(s+=t),i!==void 0&&(r+=i),this.setPosition({x:s,y:r}),this}_eachAncestorReverse(e,t){let i=[],s=this.getParent(),r,o;if(!(t&&t._id===this._id)){for(i.unshift(this);s&&(!t||s._id!==t._id);)i.unshift(s),s=s.parent;for(r=i.length,o=0;o<r;o++)e(i[o])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return Wi.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const e=this.index,t=this.parent.getChildren().length;return e<t-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return Wi.Util.warn("Node has no parent. moveUp function is ignored."),!1;const e=this.index,t=this.parent.getChildren().length;return e<t-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return Wi.Util.warn("Node has no parent. moveDown function is ignored."),!1;const e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return Wi.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return Wi.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&Wi.Util.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const t=this.index;return this.parent.children.splice(t,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(DS,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let e=this.opacity();const t=this.getParent();return t&&!t._isUnderCache&&(e*=t.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){let e=this.getAttrs(),t,i,s,r,o;const a={attrs:{},className:this.getClassName()};for(t in e)i=e[t],o=Wi.Util.isObject(i)&&!Wi.Util._isPlainObject(i)&&!Wi.Util._isArray(i),!o&&(s=typeof this[t]=="function"&&this[t],delete e[t],r=s?s.call(this):null,e[t]=i,r!==i&&(a.attrs[t]=i));return Wi.Util._prepareToStringify(a)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,t,i){const s=[];t&&this._isMatch(e)&&s.push(this);let r=this.parent;for(;r;){if(r===i)return s;r._isMatch(e)&&s.push(r),r=r.parent}return s}isAncestorOf(e){return!1}findAncestor(e,t,i){return this.findAncestors(e,t,i)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);let t=e.replace(/ /g,"").split(","),i=t.length,s,r;for(s=0;s<i;s++)if(r=t[s],Wi.Util.isValidSelector(r)||(Wi.Util.warn('Selector "'+r+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),Wi.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),Wi.Util.warn("Konva is awesome, right?")),r.charAt(0)==="#"){if(this.id()===r.slice(1))return!0}else if(r.charAt(0)==="."){if(this.hasName(r.slice(1)))return!0}else if(this.className===r||this.nodeType===r)return!0;return!1}getLayer(){const e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(xG,this._getStage)}_getStage(){const e=this.getParent();return e?e.getStage():null}fire(e,t={},i){return t.target=t.target||this,i?this._fireAndBubble(e,t):this._fire(e,t),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(sd,this._getAbsoluteTransform)}_getAbsoluteTransform(e){let t;if(e)return t=new Wi.Transform,this._eachAncestorReverse(function(i){const s=i.transformsEnabled();s==="all"?t.multiply(i.getTransform()):s==="position"&&t.translate(i.x()-i.offsetX(),i.y()-i.offsetY())},e),t;{t=this._cache.get(sd)||new Wi.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(t):t.reset();const i=this.transformsEnabled();if(i==="all")t.multiply(this.getTransform());else if(i==="position"){const s=this.attrs.x||0,r=this.attrs.y||0,o=this.attrs.offsetX||0,a=this.attrs.offsetY||0;t.translate(s-o,r-a)}return t.dirty=!1,t}}getAbsoluteScale(e){let t=this;for(;t;)t._isUnderCache&&(e=t),t=t.getParent();const s=this.getAbsoluteTransform(e).decompose();return{x:s.scaleX,y:s.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Lu,this._getTransform)}_getTransform(){var e,t;const i=this._cache.get(Lu)||new Wi.Transform;i.reset();const s=this.x(),r=this.y(),o=pu.Konva.getAngle(this.rotation()),a=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,l=(t=this.attrs.scaleY)!==null&&t!==void 0?t:1,c=this.attrs.skewX||0,d=this.attrs.skewY||0,u=this.attrs.offsetX||0,h=this.attrs.offsetY||0;return(s!==0||r!==0)&&i.translate(s,r),o!==0&&i.rotate(o),(c!==0||d!==0)&&i.skew(c,d),(a!==1||l!==1)&&i.scale(a,l),(u!==0||h!==0)&&i.translate(-1*u,-1*h),i.dirty=!1,i}clone(e){let t=Wi.Util.cloneObject(this.attrs),i,s,r,o,a;for(i in e)t[i]=e[i];const l=new this.constructor(t);for(i in this.eventListeners)for(s=this.eventListeners[i],r=s.length,o=0;o<r;o++)a=s[o],a.name.indexOf(rbe)<0&&(l.eventListeners[i]||(l.eventListeners[i]=[]),l.eventListeners[i].push(a));return l}_toKonvaCanvas(e){e=e||{};const t=this.getClientRect(),i=this.getStage(),s=e.x!==void 0?e.x:Math.floor(t.x),r=e.y!==void 0?e.y:Math.floor(t.y),o=e.pixelRatio||1,a=new Z0.SceneCanvas({width:e.width||Math.ceil(t.width)||(i?i.width():0),height:e.height||Math.ceil(t.height)||(i?i.height():0),pixelRatio:o}),l=a.getContext(),c=new Z0.SceneCanvas({width:a.width/a.pixelRatio+Math.abs(s),height:a.height/a.pixelRatio+Math.abs(r),pixelRatio:a.pixelRatio});return e.imageSmoothingEnabled===!1&&(l._context.imageSmoothingEnabled=!1),l.save(),(s||r)&&l.translate(-1*s,-1*r),this.drawScene(a,void 0,c),l.restore(),a}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};const t=e.mimeType||null,i=e.quality||null,s=this._toKonvaCanvas(e).toDataURL(t,i);return e.callback&&e.callback(s),s}toImage(e){return new Promise((t,i)=>{try{const s=e?.callback;s&&delete e.callback,Wi.Util._urlToImage(this.toDataURL(e),function(r){t(r),s?.(r)})}catch(s){i(s)}})}toBlob(e){return new Promise((t,i)=>{try{const s=e?.callback;s&&delete e.callback,this.toCanvas(e).toBlob(r=>{t(r),s?.(r)},e?.mimeType,e?.quality)}catch(s){i(s)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():pu.Konva.dragDistance}_off(e,t,i){let s=this.eventListeners[e],r,o,a;for(r=0;r<s.length;r++)if(o=s[r].name,a=s[r].handler,(o!=="konva"||t==="konva")&&(!t||o===t)&&(!i||i===a)){if(s.splice(r,1),s.length===0){delete this.eventListeners[e];break}r--}}_fireChangeEvent(e,t,i){this._fire(e+nbe,{oldVal:t,newVal:i})}addName(e){if(!this.hasName(e)){const t=this.name(),i=t?t+" "+e:e;this.name(i)}return this}hasName(e){if(!e)return!1;const t=this.name();return t?(t||"").split(/\s/g).indexOf(e)!==-1:!1}removeName(e){const t=(this.name()||"").split(/\s/g),i=t.indexOf(e);return i!==-1&&(t.splice(i,1),this.name(t.join(" "))),this}setAttr(e,t){const i=this[LG+Wi.Util._capitalize(e)];return Wi.Util._isFunction(i)?i.call(this,t):this._setAttr(e,t),this}_requestDraw(){if(pu.Konva.autoDrawEnabled){const e=this.getLayer()||this.getStage();e?.batchDraw()}}_setAttr(e,t){const i=this.attrs[e];i===t&&!Wi.Util.isObject(t)||(t==null?delete this.attrs[e]:this.attrs[e]=t,this._shouldFireChangeEvents&&this._fireChangeEvent(e,i,t),this._requestDraw())}_setComponentAttr(e,t,i){let s;i!==void 0&&(s=this.attrs[e],s||(this.attrs[e]=this.getAttr(e)),this.attrs[e][t]=i,this._fireChangeEvent(e,s,i))}_fireAndBubble(e,t,i){if(t&&this.nodeType===kG&&(t.target=this),!((e===SG||e===CG)&&(i&&(this===i||this.isAncestorOf&&this.isAncestorOf(i))||this.nodeType==="Stage"&&!i))){this._fire(e,t);const r=(e===SG||e===CG)&&i&&i.isAncestorOf&&i.isAncestorOf(this)&&!i.isAncestorOf(this.parent);(t&&!t.cancelBubble||!t)&&this.parent&&this.parent.isListening()&&!r&&(i&&i.parent?this._fireAndBubble.call(this.parent,e,t,i):this._fireAndBubble.call(this.parent,e,t))}}_getProtoListeners(e){var t,i,s;const r=(t=this._cache.get(ey))!==null&&t!==void 0?t:{};let o=r?.[e];if(o===void 0){o=[];let a=Object.getPrototypeOf(this);for(;a;){const l=(s=(i=a.eventListeners)===null||i===void 0?void 0:i[e])!==null&&s!==void 0?s:[];o.push(...l),a=Object.getPrototypeOf(a)}r[e]=o,this._cache.set(ey,r)}return o}_fire(e,t){t=t||{},t.currentTarget=this,t.type=e;const i=this._getProtoListeners(e);if(i)for(var s=0;s<i.length;s++)i[s].handler.call(this,t);const r=this.eventListeners[e];if(r)for(var s=0;s<r.length;s++)r[s].handler.call(this,t)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){const t=e?e.pointerId:void 0,i=this.getStage(),s=this.getAbsolutePosition();if(!i)return;const r=i._getPointerById(t)||i._changedPointerPositions[0]||s;_a.DD._dragElements.set(this._id,{node:this,startPointerPos:r,offset:{x:r.x-s.x,y:r.y-s.y},dragStatus:"ready",pointerId:t})}startDrag(e,t=!0){_a.DD._dragElements.has(this._id)||this._createDragElement(e);const i=_a.DD._dragElements.get(this._id);i.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},t)}_setDragPosition(e,t){const i=this.getStage()._getPointerById(t.pointerId);if(!i)return;let s={x:i.x-t.offset.x,y:i.y-t.offset.y};const r=this.dragBoundFunc();if(r!==void 0){const o=r.call(this,s,e);o?s=o:Wi.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==s.x||this._lastPos.y!==s.y)&&(this.setAbsolutePosition(s),this._requestDraw()),this._lastPos=s}stopDrag(e){const t=_a.DD._dragElements.get(this._id);t&&(t.dragStatus="stopped"),_a.DD._endDragBefore(e),_a.DD._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=_a.DD._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){if(!(!(e.evt.button!==void 0)||pu.Konva.dragButtons.indexOf(e.evt.button)>=0)||this.isDragging())return;let s=!1;_a.DD._dragElements.forEach(r=>{this.isAncestorOf(r.node)&&(s=!0)}),s||this._createDragElement(e)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const t=_a.DD._dragElements.get(this._id),i=t&&t.dragStatus==="dragging",s=t&&t.dragStatus==="ready";i?this.stopDrag():s&&_a.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const t=this.getStage();if(!t)return!1;const i={x:-e.x,y:-e.y,width:t.width()+2*e.x,height:t.height()+2*e.y};return Wi.Util.haveIntersection(i,this.getClientRect())}static create(e,t){return Wi.Util._isString(e)&&(e=JSON.parse(e)),this._createNode(e,t)}static _createNode(e,t){let i=D9.prototype.getClassName.call(e),s=e.children,r,o,a;t&&(e.attrs.container=t),pu.Konva[i]||(Wi.Util.warn('Can not find a node with class name "'+i+'". Fallback to "Shape".'),i="Shape");const l=pu.Konva[i];if(r=new l(e.attrs),s)for(o=s.length,a=0;a<o;a++)r.add(D9._createNode(s[a]));return r}};qn.Node=mi;mi.prototype.nodeType="Node";mi.prototype._attrsAffectingSize=[];mi.prototype.eventListeners={};mi.prototype.on.call(mi.prototype,abe,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(Lu),this._clearSelfAndDescendantCache(sd)});mi.prototype.on.call(mi.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(T9)});mi.prototype.on.call(mi.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(x9)});mi.prototype.on.call(mi.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(DS)});const Pn=j1.Factory.addGetterSetter;Pn(mi,"zIndex");Pn(mi,"absolutePosition");Pn(mi,"position");Pn(mi,"x",0,(0,Rs.getNumberValidator)());Pn(mi,"y",0,(0,Rs.getNumberValidator)());Pn(mi,"globalCompositeOperation","source-over",(0,Rs.getStringValidator)());Pn(mi,"opacity",1,(0,Rs.getNumberValidator)());Pn(mi,"name","",(0,Rs.getStringValidator)());Pn(mi,"id","",(0,Rs.getStringValidator)());Pn(mi,"rotation",0,(0,Rs.getNumberValidator)());j1.Factory.addComponentsGetterSetter(mi,"scale",["x","y"]);Pn(mi,"scaleX",1,(0,Rs.getNumberValidator)());Pn(mi,"scaleY",1,(0,Rs.getNumberValidator)());j1.Factory.addComponentsGetterSetter(mi,"skew",["x","y"]);Pn(mi,"skewX",0,(0,Rs.getNumberValidator)());Pn(mi,"skewY",0,(0,Rs.getNumberValidator)());j1.Factory.addComponentsGetterSetter(mi,"offset",["x","y"]);Pn(mi,"offsetX",0,(0,Rs.getNumberValidator)());Pn(mi,"offsetY",0,(0,Rs.getNumberValidator)());Pn(mi,"dragDistance",void 0,(0,Rs.getNumberValidator)());Pn(mi,"width",0,(0,Rs.getNumberValidator)());Pn(mi,"height",0,(0,Rs.getNumberValidator)());Pn(mi,"listening",!0,(0,Rs.getBooleanValidator)());Pn(mi,"preventDefault",!0,(0,Rs.getBooleanValidator)());Pn(mi,"filters",void 0,function(n){return this._filterUpToDate=!1,n});Pn(mi,"visible",!0,(0,Rs.getBooleanValidator)());Pn(mi,"transformsEnabled","all",(0,Rs.getStringValidator)());Pn(mi,"size");Pn(mi,"dragBoundFunc");Pn(mi,"draggable",!1,(0,Rs.getBooleanValidator)());j1.Factory.backCompat(mi,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});var Xg={};Object.defineProperty(Xg,"__esModule",{value:!0});Xg.Container=void 0;const n0=Mi,aD=qn,rx=ti;class zg extends aD.Node{constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];const t=this.children||[],i=[];return t.forEach(function(s){e(s)&&i.push(s)}),i}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(let i=0;i<e.length;i++)this.add(e[i]);return this}const t=e[0];return t.getParent()?(t.moveTo(this),this):(this._validateAdd(t),t.index=this.getChildren().length,t.parent=this,t._clearCaches(),this.getChildren().push(t),this._fire("add",{child:t}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){const t=this._generalFind(e,!0);return t.length>0?t[0]:void 0}_generalFind(e,t){const i=[];return this._descendants(s=>{const r=s._isMatch(e);return r&&i.push(s),!!(r&&t)}),i}_descendants(e){let t=!1;const i=this.getChildren();for(const s of i){if(t=e(s),t)return!0;if(s.hasChildren()&&(t=s._descendants(e),t))return!0}return!1}toObject(){const e=aD.Node.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(t=>{e.children.push(t.toObject())}),e}isAncestorOf(e){let t=e.getParent();for(;t;){if(t._id===this._id)return!0;t=t.getParent()}return!1}clone(e){const t=aD.Node.prototype.clone.call(this,e);return this.getChildren().forEach(function(i){t.add(i.clone())}),t}getAllIntersections(e){const t=[];return this.find("Shape").forEach(i=>{i.isVisible()&&i.intersects(e)&&t.push(i)}),t}_clearSelfAndDescendantCache(e){var t;super._clearSelfAndDescendantCache(e),!this.isCached()&&((t=this.children)===null||t===void 0||t.forEach(function(i){i._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(t,i){t.index=i}),this._requestDraw()}drawScene(e,t,i){const s=this.getLayer(),r=e||s&&s.getCanvas(),o=r&&r.getContext(),a=this._getCanvasCache(),l=a&&a.scene,c=r&&r.isCache;if(!this.isVisible()&&!c)return this;if(l){o.save();const d=this.getAbsoluteTransform(t).getMatrix();o.transform(d[0],d[1],d[2],d[3],d[4],d[5]),this._drawCachedSceneCanvas(o),o.restore()}else this._drawChildren("drawScene",r,t,i);return this}drawHit(e,t){if(!this.shouldDrawHit(t))return this;const i=this.getLayer(),s=e||i&&i.hitCanvas,r=s&&s.getContext(),o=this._getCanvasCache();if(o&&o.hit){r.save();const l=this.getAbsoluteTransform(t).getMatrix();r.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(r),r.restore()}else this._drawChildren("drawHit",s,t);return this}_drawChildren(e,t,i,s){var r;const o=t&&t.getContext(),a=this.clipWidth(),l=this.clipHeight(),c=this.clipFunc(),d=typeof a=="number"&&typeof l=="number"||c,u=i===this;if(d){o.save();const f=this.getAbsoluteTransform(i);let g=f.getMatrix();o.transform(g[0],g[1],g[2],g[3],g[4],g[5]),o.beginPath();let m;if(c)m=c.call(this,o,this);else{const p=this.clipX(),b=this.clipY();o.rect(p||0,b||0,a,l)}o.clip.apply(o,m),g=f.copy().invert().getMatrix(),o.transform(g[0],g[1],g[2],g[3],g[4],g[5])}const h=!u&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";h&&(o.save(),o._applyGlobalCompositeOperation(this)),(r=this.children)===null||r===void 0||r.forEach(function(f){f[e](t,i,s)}),h&&o.restore(),d&&o.restore()}getClientRect(e={}){var t;const i=e.skipTransform,s=e.relativeTo;let r,o,a,l,c={x:1/0,y:1/0,width:0,height:0};const d=this;(t=this.children)===null||t===void 0||t.forEach(function(f){if(!f.visible())return;const g=f.getClientRect({relativeTo:d,skipShadow:e.skipShadow,skipStroke:e.skipStroke});g.width===0&&g.height===0||(r===void 0?(r=g.x,o=g.y,a=g.x+g.width,l=g.y+g.height):(r=Math.min(r,g.x),o=Math.min(o,g.y),a=Math.max(a,g.x+g.width),l=Math.max(l,g.y+g.height)))});const u=this.find("Shape");let h=!1;for(let f=0;f<u.length;f++)if(u[f]._isVisible(this)){h=!0;break}return h&&r!==void 0?c={x:r,y:o,width:a-r,height:l-o}:c={x:0,y:0,width:0,height:0},i?c:this._transformedRect(c,s)}}Xg.Container=zg;n0.Factory.addComponentsGetterSetter(zg,"clip",["x","y","width","height"]);n0.Factory.addGetterSetter(zg,"clipX",void 0,(0,rx.getNumberValidator)());n0.Factory.addGetterSetter(zg,"clipY",void 0,(0,rx.getNumberValidator)());n0.Factory.addGetterSetter(zg,"clipWidth",void 0,(0,rx.getNumberValidator)());n0.Factory.addGetterSetter(zg,"clipHeight",void 0,(0,rx.getNumberValidator)());n0.Factory.addGetterSetter(zg,"clipFunc");var jQ={},$h={};Object.defineProperty($h,"__esModule",{value:!0});$h.getCapturedShape=dbe;$h.createEvent=k4;$h.hasPointerCapture=ube;$h.setPointerCapture=hbe;$h.releaseCapture=$Q;const cbe=Ti,E_=new Map,JQ=cbe.Konva._global.PointerEvent!==void 0;function dbe(n){return E_.get(n)}function k4(n){return{evt:n,pointerId:n.pointerId}}function ube(n,e){return E_.get(n)===e}function hbe(n,e){$Q(n),e.getStage()&&(E_.set(n,e),JQ&&e._fire("gotpointercapture",k4(new PointerEvent("gotpointercapture"))))}function $Q(n,e){const t=E_.get(n);if(!t)return;const i=t.getStage();i&&i.content,E_.delete(n),JQ&&t._fire("lostpointercapture",k4(new PointerEvent("lostpointercapture")))}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Stage=n.stages=void 0;const e=ls,t=Mi,i=Xg,s=Ti,r=Ll,o=sx,a=Ti,l=$h,c="Stage",d="string",u="px",h="mouseout",f="mouseleave",g="mouseover",m="mouseenter",p="mousemove",b="mousedown",w="mouseup",v="pointermove",_="pointerdown",y="pointerup",C="pointercancel",S="lostpointercapture",k="pointerout",I="pointerleave",T="pointerover",D="pointerenter",M="contextmenu",E="touchstart",W="touchend",P="touchmove",N="touchcancel",H="wheel",U=5,B=[[m,"_pointerenter"],[b,"_pointerdown"],[p,"_pointermove"],[w,"_pointerup"],[f,"_pointerleave"],[E,"_pointerdown"],[P,"_pointermove"],[W,"_pointerup"],[N,"_pointercancel"],[g,"_pointerover"],[H,"_wheel"],[M,"_contextmenu"],[_,"_pointerdown"],[v,"_pointermove"],[y,"_pointerup"],[C,"_pointercancel"],[S,"_lostpointercapture"]],Y={mouse:{[k]:h,[I]:f,[T]:g,[D]:m,[v]:p,[_]:b,[y]:w,[C]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[k]:"touchout",[I]:"touchleave",[T]:"touchover",[D]:"touchenter",[v]:P,[_]:E,[y]:W,[C]:N,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[k]:k,[I]:I,[T]:T,[D]:D,[v]:v,[_]:_,[y]:y,[C]:C,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},ne=xe=>xe.indexOf("pointer")>=0?"pointer":xe.indexOf("touch")>=0?"touch":"mouse",ee=xe=>{const z=ne(xe);if(z==="pointer")return s.Konva.pointerEventsEnabled&&Y.pointer;if(z==="touch")return Y.touch;if(z==="mouse")return Y.mouse};function $(xe={}){return(xe.clipFunc||xe.clipWidth||xe.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),xe}const ge="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";n.stages=[];class Ie extends i.Container{constructor(z){super($(z)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),n.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{$(this.attrs)}),this._checkVisibility()}_validateAdd(z){const K=z.getType()==="Layer",Se=z.getType()==="FastLayer";K||Se||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const z=this.visible()?"":"none";this.content.style.display=z}setContainer(z){if(typeof z===d){if(z.charAt(0)==="."){const Se=z.slice(1);z=document.getElementsByClassName(Se)[0]}else{var K;z.charAt(0)!=="#"?K=z:K=z.slice(1),z=document.getElementById(K)}if(!z)throw"Can not find container in document with id "+K}return this._setAttr("container",z),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),z.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const z=this.children,K=z.length;for(let Se=0;Se<K;Se++)z[Se].clear();return this}clone(z){return z||(z={}),z.container=typeof document<"u"&&document.createElement("div"),i.Container.prototype.clone.call(this,z)}destroy(){super.destroy();const z=this.content;z&&e.Util._isInDocument(z)&&this.container().removeChild(z);const K=n.stages.indexOf(this);return K>-1&&n.stages.splice(K,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const z=this._pointerPositions[0]||this._changedPointerPositions[0];return z?{x:z.x,y:z.y}:(e.Util.warn(ge),null)}_getPointerById(z){return this._pointerPositions.find(K=>K.id===z)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(z){z=z||{},z.x=z.x||0,z.y=z.y||0,z.width=z.width||this.width(),z.height=z.height||this.height();const K=new r.SceneCanvas({width:z.width,height:z.height,pixelRatio:z.pixelRatio||1}),Se=K.getContext()._context,De=this.children;return(z.x||z.y)&&Se.translate(-1*z.x,-1*z.y),De.forEach(function(ke){if(!ke.isVisible())return;const je=ke._toKonvaCanvas(z);Se.drawImage(je._canvas,z.x,z.y,je.getWidth()/je.getPixelRatio(),je.getHeight()/je.getPixelRatio())}),K}getIntersection(z){if(!z)return null;const K=this.children,Se=K.length,De=Se-1;for(let ke=De;ke>=0;ke--){const je=K[ke].getIntersection(z);if(je)return je}return null}_resizeDOM(){const z=this.width(),K=this.height();this.content&&(this.content.style.width=z+u,this.content.style.height=K+u),this.bufferCanvas.setSize(z,K),this.bufferHitCanvas.setSize(z,K),this.children.forEach(Se=>{Se.setSize({width:z,height:K}),Se.draw()})}add(z,...K){if(arguments.length>1){for(let De=0;De<arguments.length;De++)this.add(arguments[De]);return this}super.add(z);const Se=this.children.length;return Se>U&&e.Util.warn("The stage has "+Se+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),z.setSize({width:this.width(),height:this.height()}),z.draw(),s.Konva.isBrowser&&this.content.appendChild(z.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(z){return l.hasPointerCapture(z,this)}setPointerCapture(z){l.setPointerCapture(z,this)}releaseCapture(z){l.releaseCapture(z,this)}getLayers(){return this.children}_bindContentEvents(){s.Konva.isBrowser&&B.forEach(([z,K])=>{this.content.addEventListener(z,Se=>{this[K](Se)},{passive:!1})})}_pointerenter(z){this.setPointersPositions(z);const K=ee(z.type);K&&this._fire(K.pointerenter,{evt:z,target:this,currentTarget:this})}_pointerover(z){this.setPointersPositions(z);const K=ee(z.type);K&&this._fire(K.pointerover,{evt:z,target:this,currentTarget:this})}_getTargetShape(z){let K=this[z+"targetShape"];return K&&!K.getStage()&&(K=null),K}_pointerleave(z){const K=ee(z.type),Se=ne(z.type);if(!K)return;this.setPointersPositions(z);const De=this._getTargetShape(Se),ke=!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled;De&&ke?(De._fireAndBubble(K.pointerout,{evt:z}),De._fireAndBubble(K.pointerleave,{evt:z}),this._fire(K.pointerleave,{evt:z,target:this,currentTarget:this}),this[Se+"targetShape"]=null):ke&&(this._fire(K.pointerleave,{evt:z,target:this,currentTarget:this}),this._fire(K.pointerout,{evt:z,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(z){const K=ee(z.type),Se=ne(z.type);if(!K)return;this.setPointersPositions(z);let De=!1;this._changedPointerPositions.forEach(ke=>{const je=this.getIntersection(ke);if(o.DD.justDragged=!1,s.Konva["_"+Se+"ListenClick"]=!0,!je||!je.isListening()){this[Se+"ClickStartShape"]=void 0;return}s.Konva.capturePointerEventsEnabled&&je.setPointerCapture(ke.id),this[Se+"ClickStartShape"]=je,je._fireAndBubble(K.pointerdown,{evt:z,pointerId:ke.id}),De=!0;const et=z.type.indexOf("touch")>=0;je.preventDefault()&&z.cancelable&&et&&z.preventDefault()}),De||this._fire(K.pointerdown,{evt:z,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(z){const K=ee(z.type),Se=ne(z.type);if(!K||(s.Konva.isDragging()&&o.DD.node.preventDefault()&&z.cancelable&&z.preventDefault(),this.setPointersPositions(z),!(!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled)))return;const ke={};let je=!1;const et=this._getTargetShape(Se);this._changedPointerPositions.forEach(mt=>{const ze=l.getCapturedShape(mt.id)||this.getIntersection(mt),ht=mt.id,nt={evt:z,pointerId:ht},zt=et!==ze;if(zt&&et&&(et._fireAndBubble(K.pointerout,{...nt},ze),et._fireAndBubble(K.pointerleave,{...nt},ze)),ze){if(ke[ze._id])return;ke[ze._id]=!0}ze&&ze.isListening()?(je=!0,zt&&(ze._fireAndBubble(K.pointerover,{...nt},et),ze._fireAndBubble(K.pointerenter,{...nt},et),this[Se+"targetShape"]=ze),ze._fireAndBubble(K.pointermove,{...nt})):et&&(this._fire(K.pointerover,{evt:z,target:this,currentTarget:this,pointerId:ht}),this[Se+"targetShape"]=null)}),je||this._fire(K.pointermove,{evt:z,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(z){const K=ee(z.type),Se=ne(z.type);if(!K)return;this.setPointersPositions(z);const De=this[Se+"ClickStartShape"],ke=this[Se+"ClickEndShape"],je={};let et=!1;this._changedPointerPositions.forEach(mt=>{const ze=l.getCapturedShape(mt.id)||this.getIntersection(mt);if(ze){if(ze.releaseCapture(mt.id),je[ze._id])return;je[ze._id]=!0}const ht=mt.id,nt={evt:z,pointerId:ht};let zt=!1;s.Konva["_"+Se+"InDblClickWindow"]?(zt=!0,clearTimeout(this[Se+"DblTimeout"])):o.DD.justDragged||(s.Konva["_"+Se+"InDblClickWindow"]=!0,clearTimeout(this[Se+"DblTimeout"])),this[Se+"DblTimeout"]=setTimeout(function(){s.Konva["_"+Se+"InDblClickWindow"]=!1},s.Konva.dblClickWindow),ze&&ze.isListening()?(et=!0,this[Se+"ClickEndShape"]=ze,ze._fireAndBubble(K.pointerup,{...nt}),s.Konva["_"+Se+"ListenClick"]&&De&&De===ze&&(ze._fireAndBubble(K.pointerclick,{...nt}),zt&&ke&&ke===ze&&ze._fireAndBubble(K.pointerdblclick,{...nt}))):(this[Se+"ClickEndShape"]=null,s.Konva["_"+Se+"ListenClick"]&&this._fire(K.pointerclick,{evt:z,target:this,currentTarget:this,pointerId:ht}),zt&&this._fire(K.pointerdblclick,{evt:z,target:this,currentTarget:this,pointerId:ht}))}),et||this._fire(K.pointerup,{evt:z,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),s.Konva["_"+Se+"ListenClick"]=!1,z.cancelable&&Se!=="touch"&&Se!=="pointer"&&z.preventDefault()}_contextmenu(z){this.setPointersPositions(z);const K=this.getIntersection(this.getPointerPosition());K&&K.isListening()?K._fireAndBubble(M,{evt:z}):this._fire(M,{evt:z,target:this,currentTarget:this})}_wheel(z){this.setPointersPositions(z);const K=this.getIntersection(this.getPointerPosition());K&&K.isListening()?K._fireAndBubble(H,{evt:z}):this._fire(H,{evt:z,target:this,currentTarget:this})}_pointercancel(z){this.setPointersPositions(z);const K=l.getCapturedShape(z.pointerId)||this.getIntersection(this.getPointerPosition());K&&K._fireAndBubble(y,l.createEvent(z)),l.releaseCapture(z.pointerId)}_lostpointercapture(z){l.releaseCapture(z.pointerId)}setPointersPositions(z){const K=this._getContentPosition();let Se=null,De=null;z=z||window.event,z.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(z.touches,ke=>{this._pointerPositions.push({id:ke.identifier,x:(ke.clientX-K.left)/K.scaleX,y:(ke.clientY-K.top)/K.scaleY})}),Array.prototype.forEach.call(z.changedTouches||z.touches,ke=>{this._changedPointerPositions.push({id:ke.identifier,x:(ke.clientX-K.left)/K.scaleX,y:(ke.clientY-K.top)/K.scaleY})})):(Se=(z.clientX-K.left)/K.scaleX,De=(z.clientY-K.top)/K.scaleY,this.pointerPos={x:Se,y:De},this._pointerPositions=[{x:Se,y:De,id:e.Util._getFirstPointerId(z)}],this._changedPointerPositions=[{x:Se,y:De,id:e.Util._getFirstPointerId(z)}])}_setPointerPosition(z){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(z)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const z=this.content.getBoundingClientRect();return{top:z.top,left:z.left,scaleX:z.width/this.content.clientWidth||1,scaleY:z.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new r.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new r.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!s.Konva.isBrowser)return;const z=this.container();if(!z)throw"Stage has no container. A container is required.";z.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),z.appendChild(this.content),this._resizeDOM()}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(z){z.batchDraw()}),this}}n.Stage=Ie,Ie.prototype.nodeType=c,(0,a._registerNode)(Ie),t.Factory.addGetterSetter(Ie,"container"),s.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{n.stages.forEach(xe=>{xe.batchDraw()})})})(jQ);var J1={},qs={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Shape=n.shapes=void 0;const e=Ti,t=ls,i=Mi,s=qn,r=ti,o=Ti,a=$h,l="hasShadow",c="shadowRGBA",d="patternImage",u="linearGradient",h="radialGradient";let f;function g(){return f||(f=t.Util.createCanvasElement().getContext("2d"),f)}n.shapes={};function m(I){const T=this.attrs.fillRule;T?I.fill(T):I.fill()}function p(I){I.stroke()}function b(I){const T=this.attrs.fillRule;T?I.fill(T):I.fill()}function w(I){I.stroke()}function v(){this._clearCache(l)}function _(){this._clearCache(c)}function y(){this._clearCache(d)}function C(){this._clearCache(u)}function S(){this._clearCache(h)}class k extends s.Node{constructor(T){super(T);let D;for(;D=t.Util.getRandomColor(),!(D&&!(D in n.shapes)););this.colorKey=D,n.shapes[D]=this}getContext(){return t.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return t.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(l,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(d,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const D=g().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(D&&D.setTransform){const M=new t.Transform;M.translate(this.fillPatternX(),this.fillPatternY()),M.rotate(e.Konva.getAngle(this.fillPatternRotation())),M.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),M.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const E=M.getMatrix(),W=typeof DOMMatrix>"u"?{a:E[0],b:E[1],c:E[2],d:E[3],e:E[4],f:E[5]}:new DOMMatrix(E);D.setTransform(W)}return D}}_getLinearGradient(){return this._getCache(u,this.__getLinearGradient)}__getLinearGradient(){const T=this.fillLinearGradientColorStops();if(T){const D=g(),M=this.fillLinearGradientStartPoint(),E=this.fillLinearGradientEndPoint(),W=D.createLinearGradient(M.x,M.y,E.x,E.y);for(let P=0;P<T.length;P+=2)W.addColorStop(T[P],T[P+1]);return W}}_getRadialGradient(){return this._getCache(h,this.__getRadialGradient)}__getRadialGradient(){const T=this.fillRadialGradientColorStops();if(T){const D=g(),M=this.fillRadialGradientStartPoint(),E=this.fillRadialGradientEndPoint(),W=D.createRadialGradient(M.x,M.y,this.fillRadialGradientStartRadius(),E.x,E.y,this.fillRadialGradientEndRadius());for(let P=0;P<T.length;P+=2)W.addColorStop(T[P],T[P+1]);return W}}getShadowRGBA(){return this._getCache(c,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const T=t.Util.colorToRGBA(this.shadowColor());if(T)return"rgba("+T.r+","+T.g+","+T.b+","+T.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const T=this.hitStrokeWidth();return T==="auto"?this.hasStroke():this.strokeEnabled()&&!!T}intersects(T){const D=this.getStage();if(!D)return!1;const M=D.bufferHitCanvas;return M.getContext().clear(),this.drawHit(M,void 0,!0),M.context.getImageData(Math.round(T.x),Math.round(T.y),1,1).data[3]>0}destroy(){return s.Node.prototype.destroy.call(this),delete n.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(T){var D;if(!((D=this.attrs.perfectDrawEnabled)!==null&&D!==void 0?D:!0))return!1;const E=T||this.hasFill(),W=this.hasStroke(),P=this.getAbsoluteOpacity()!==1;if(E&&W&&P)return!0;const N=this.hasShadow(),H=this.shadowForStrokeEnabled();return!!(E&&W&&N&&H)}setStrokeHitEnabled(T){t.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),T?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const T=this.size();return{x:this._centroid?-T.width/2:0,y:this._centroid?-T.height/2:0,width:T.width,height:T.height}}getClientRect(T={}){let D=!1,M=this.getParent();for(;M;){if(M.isCached()){D=!0;break}M=M.getParent()}const E=T.skipTransform,W=T.relativeTo||D&&this.getStage()||void 0,P=this.getSelfRect(),H=!T.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,U=P.width+H,B=P.height+H,Y=!T.skipShadow&&this.hasShadow(),ne=Y?this.shadowOffsetX():0,ee=Y?this.shadowOffsetY():0,$=U+Math.abs(ne),ge=B+Math.abs(ee),Ie=Y&&this.shadowBlur()||0,xe=$+Ie*2,z=ge+Ie*2,K={width:xe,height:z,x:-(H/2+Ie)+Math.min(ne,0)+P.x,y:-(H/2+Ie)+Math.min(ee,0)+P.y};return E?K:this._transformedRect(K,W)}drawScene(T,D,M){const E=this.getLayer();let W=T||E.getCanvas(),P=W.getContext(),N=this._getCanvasCache(),H=this.getSceneFunc(),U=this.hasShadow(),B,Y;const ne=W.isCache,ee=D===this;if(!this.isVisible()&&!ee)return this;if(N){P.save();const ge=this.getAbsoluteTransform(D).getMatrix();return P.transform(ge[0],ge[1],ge[2],ge[3],ge[4],ge[5]),this._drawCachedSceneCanvas(P),P.restore(),this}if(!H)return this;if(P.save(),this._useBufferCanvas()&&!ne){B=this.getStage();const ge=M||B.bufferCanvas;Y=ge.getContext(),Y.clear(),Y.save(),Y._applyLineJoin(this);var $=this.getAbsoluteTransform(D).getMatrix();Y.transform($[0],$[1],$[2],$[3],$[4],$[5]),H.call(this,Y,this),Y.restore();const Ie=ge.pixelRatio;U&&P._applyShadow(this),P._applyOpacity(this),P._applyGlobalCompositeOperation(this),P.drawImage(ge._canvas,0,0,ge.width/Ie,ge.height/Ie)}else{if(P._applyLineJoin(this),!ee){var $=this.getAbsoluteTransform(D).getMatrix();P.transform($[0],$[1],$[2],$[3],$[4],$[5]),P._applyOpacity(this),P._applyGlobalCompositeOperation(this)}U&&P._applyShadow(this),H.call(this,P,this)}return P.restore(),this}drawHit(T,D,M=!1){if(!this.shouldDrawHit(D,M))return this;const E=this.getLayer(),W=T||E.hitCanvas,P=W&&W.getContext(),N=this.hitFunc()||this.sceneFunc(),H=this._getCanvasCache(),U=H&&H.hit;if(this.colorKey||t.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),U){P.save();const Y=this.getAbsoluteTransform(D).getMatrix();return P.transform(Y[0],Y[1],Y[2],Y[3],Y[4],Y[5]),this._drawCachedHitCanvas(P),P.restore(),this}if(!N)return this;if(P.save(),P._applyLineJoin(this),!(this===D)){const Y=this.getAbsoluteTransform(D).getMatrix();P.transform(Y[0],Y[1],Y[2],Y[3],Y[4],Y[5])}return N.call(this,P,this),P.restore(),this}drawHitFromCache(T=0){const D=this._getCanvasCache(),M=this._getCachedSceneCanvas(),E=D.hit,W=E.getContext(),P=E.getWidth(),N=E.getHeight();W.clear(),W.drawImage(M._canvas,0,0,P,N);try{const H=W.getImageData(0,0,P,N),U=H.data,B=U.length,Y=t.Util._hexToRgb(this.colorKey);for(let ne=0;ne<B;ne+=4)U[ne+3]>T?(U[ne]=Y.r,U[ne+1]=Y.g,U[ne+2]=Y.b,U[ne+3]=255):U[ne+3]=0;W.putImageData(H,0,0)}catch(H){t.Util.error("Unable to draw hit graph from cached scene canvas. "+H.message)}return this}hasPointerCapture(T){return a.hasPointerCapture(T,this)}setPointerCapture(T){a.setPointerCapture(T,this)}releaseCapture(T){a.releaseCapture(T,this)}}n.Shape=k,k.prototype._fillFunc=m,k.prototype._strokeFunc=p,k.prototype._fillFuncHit=b,k.prototype._strokeFuncHit=w,k.prototype._centroid=!1,k.prototype.nodeType="Shape",(0,o._registerNode)(k),k.prototype.eventListeners={},k.prototype.on.call(k.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",v),k.prototype.on.call(k.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",_),k.prototype.on.call(k.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",y),k.prototype.on.call(k.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",C),k.prototype.on.call(k.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",S),i.Factory.addGetterSetter(k,"stroke",void 0,(0,r.getStringOrGradientValidator)()),i.Factory.addGetterSetter(k,"strokeWidth",2,(0,r.getNumberValidator)()),i.Factory.addGetterSetter(k,"fillAfterStrokeEnabled",!1),i.Factory.addGetterSetter(k,"hitStrokeWidth","auto",(0,r.getNumberOrAutoValidator)()),i.Factory.addGetterSetter(k,"strokeHitEnabled",!0,(0,r.getBooleanValidator)()),i.Factory.addGetterSetter(k,"perfectDrawEnabled",!0,(0,r.getBooleanValidator)()),i.Factory.addGetterSetter(k,"shadowForStrokeEnabled",!0,(0,r.getBooleanValidator)()),i.Factory.addGetterSetter(k,"lineJoin"),i.Factory.addGetterSetter(k,"lineCap"),i.Factory.addGetterSetter(k,"sceneFunc"),i.Factory.addGetterSetter(k,"hitFunc"),i.Factory.addGetterSetter(k,"dash"),i.Factory.addGetterSetter(k,"dashOffset",0,(0,r.getNumberValidator)()),i.Factory.addGetterSetter(k,"shadowColor",void 0,(0,r.getStringValidator)()),i.Factory.addGetterSetter(k,"shadowBlur",0,(0,r.getNumberValidator)()),i.Factory.addGetterSetter(k,"shadowOpacity",1,(0,r.getNumberValidator)()),i.Factory.addComponentsGetterSetter(k,"shadowOffset",["x","y"]),i.Factory.addGetterSetter(k,"shadowOffsetX",0,(0,r.getNumberValidator)()),i.Factory.addGetterSetter(k,"shadowOffsetY",0,(0,r.getNumberValidator)()),i.Factory.addGetterSetter(k,"fillPatternImage"),i.Factory.addGetterSetter(k,"fill",void 0,(0,r.getStringOrGradientValidator)()),i.Factory.addGetterSetter(k,"fillPatternX",0,(0,r.getNumberValidator)()),i.Factory.addGetterSetter(k,"fillPatternY",0,(0,r.getNumberValidator)()),i.Factory.addGetterSetter(k,"fillLinearGradientColorStops"),i.Factory.addGetterSetter(k,"strokeLinearGradientColorStops"),i.Factory.addGetterSetter(k,"fillRadialGradientStartRadius",0),i.Factory.addGetterSetter(k,"fillRadialGradientEndRadius",0),i.Factory.addGetterSetter(k,"fillRadialGradientColorStops"),i.Factory.addGetterSetter(k,"fillPatternRepeat","repeat"),i.Factory.addGetterSetter(k,"fillEnabled",!0),i.Factory.addGetterSetter(k,"strokeEnabled",!0),i.Factory.addGetterSetter(k,"shadowEnabled",!0),i.Factory.addGetterSetter(k,"dashEnabled",!0),i.Factory.addGetterSetter(k,"strokeScaleEnabled",!0),i.Factory.addGetterSetter(k,"fillPriority","color"),i.Factory.addComponentsGetterSetter(k,"fillPatternOffset",["x","y"]),i.Factory.addGetterSetter(k,"fillPatternOffsetX",0,(0,r.getNumberValidator)()),i.Factory.addGetterSetter(k,"fillPatternOffsetY",0,(0,r.getNumberValidator)()),i.Factory.addComponentsGetterSetter(k,"fillPatternScale",["x","y"]),i.Factory.addGetterSetter(k,"fillPatternScaleX",1,(0,r.getNumberValidator)()),i.Factory.addGetterSetter(k,"fillPatternScaleY",1,(0,r.getNumberValidator)()),i.Factory.addComponentsGetterSetter(k,"fillLinearGradientStartPoint",["x","y"]),i.Factory.addComponentsGetterSetter(k,"strokeLinearGradientStartPoint",["x","y"]),i.Factory.addGetterSetter(k,"fillLinearGradientStartPointX",0),i.Factory.addGetterSetter(k,"strokeLinearGradientStartPointX",0),i.Factory.addGetterSetter(k,"fillLinearGradientStartPointY",0),i.Factory.addGetterSetter(k,"strokeLinearGradientStartPointY",0),i.Factory.addComponentsGetterSetter(k,"fillLinearGradientEndPoint",["x","y"]),i.Factory.addComponentsGetterSetter(k,"strokeLinearGradientEndPoint",["x","y"]),i.Factory.addGetterSetter(k,"fillLinearGradientEndPointX",0),i.Factory.addGetterSetter(k,"strokeLinearGradientEndPointX",0),i.Factory.addGetterSetter(k,"fillLinearGradientEndPointY",0),i.Factory.addGetterSetter(k,"strokeLinearGradientEndPointY",0),i.Factory.addComponentsGetterSetter(k,"fillRadialGradientStartPoint",["x","y"]),i.Factory.addGetterSetter(k,"fillRadialGradientStartPointX",0),i.Factory.addGetterSetter(k,"fillRadialGradientStartPointY",0),i.Factory.addComponentsGetterSetter(k,"fillRadialGradientEndPoint",["x","y"]),i.Factory.addGetterSetter(k,"fillRadialGradientEndPointX",0),i.Factory.addGetterSetter(k,"fillRadialGradientEndPointY",0),i.Factory.addGetterSetter(k,"fillPatternRotation",0),i.Factory.addGetterSetter(k,"fillRule",void 0,(0,r.getStringValidator)()),i.Factory.backCompat(k,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(qs);Object.defineProperty(J1,"__esModule",{value:!0});J1.Layer=void 0;const Qc=ls,lD=Xg,xm=qn,x4=Mi,TG=Ll,fbe=ti,gbe=qs,mbe=Ti,pbe="#",bbe="beforeDraw",vbe="draw",QQ=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],_be=QQ.length;class s0 extends lD.Container{constructor(e){super(e),this.canvas=new TG.SceneCanvas,this.hitCanvas=new TG.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);const t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),e<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[e+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){xm.Node.prototype.moveToTop.call(this);const e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!xm.Node.prototype.moveUp.call(this))return!1;const t=this.getStage();return!t||!t.content?!1:(t.content.removeChild(this.getNativeCanvasElement()),this.index<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[this.index+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(xm.Node.prototype.moveDown.call(this)){const e=this.getStage();if(e){const t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(xm.Node.prototype.moveToBottom.call(this)){const e=this.getStage();if(e){const t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const e=this.getNativeCanvasElement();return xm.Node.prototype.remove.call(this),e&&e.parentNode&&Qc.Util._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:t}){return this.canvas.setSize(e,t),this.hitCanvas.setSize(e,t),this._setSmoothEnabled(),this}_validateAdd(e){const t=e.getType();t!=="Group"&&t!=="Shape"&&Qc.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e=e||{},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),xm.Node.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){Qc.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){Qc.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,Qc.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;let t=1,i=!1;for(;;){for(let s=0;s<_be;s++){const r=QQ[s],o=this._getIntersection({x:e.x+r.x*t,y:e.y+r.y*t}),a=o.shape;if(a)return a;if(i=!!o.antialiased,!o.antialiased)break}if(i)t+=1;else return null}}_getIntersection(e){const t=this.hitCanvas.pixelRatio,i=this.hitCanvas.context.getImageData(Math.round(e.x*t),Math.round(e.y*t),1,1).data,s=i[3];if(s===255){const r=Qc.Util._rgbToHex(i[0],i[1],i[2]),o=gbe.shapes[pbe+r];return o?{shape:o}:{antialiased:!0}}else if(s>0)return{antialiased:!0};return{}}drawScene(e,t){const i=this.getLayer(),s=e||i&&i.getCanvas();return this._fire(bbe,{node:this}),this.clearBeforeDraw()&&s.getContext().clear(),lD.Container.prototype.drawScene.call(this,s,t),this._fire(vbe,{node:this}),this}drawHit(e,t){const i=this.getLayer(),s=e||i&&i.hitCanvas;return i&&i.clearBeforeDraw()&&i.getHitCanvas().getContext().clear(),lD.Container.prototype.drawHit.call(this,s,t),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){Qc.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return Qc.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const e=this.parent;!!this.hitCanvas._canvas.parentNode?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}destroy(){return Qc.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}J1.Layer=s0;s0.prototype.nodeType="Layer";(0,mbe._registerNode)(s0);x4.Factory.addGetterSetter(s0,"imageSmoothingEnabled",!0);x4.Factory.addGetterSetter(s0,"clearBeforeDraw",!0);x4.Factory.addGetterSetter(s0,"hitGraphEnabled",!0,(0,fbe.getBooleanValidator)());var ox={};Object.defineProperty(ox,"__esModule",{value:!0});ox.FastLayer=void 0;const wbe=ls,ybe=J1,Sbe=Ti;class T4 extends ybe.Layer{constructor(e){super(e),this.listening(!1),wbe.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}ox.FastLayer=T4;T4.prototype.nodeType="FastLayer";(0,Sbe._registerNode)(T4);var r0={};Object.defineProperty(r0,"__esModule",{value:!0});r0.Group=void 0;const Cbe=ls,Lbe=Xg,kbe=Ti;class D4 extends Lbe.Container{_validateAdd(e){const t=e.getType();t!=="Group"&&t!=="Shape"&&Cbe.Util.throw("You may only add groups and shapes to groups.")}}r0.Group=D4;D4.prototype.nodeType="Group";(0,kbe._registerNode)(D4);var o0={};Object.defineProperty(o0,"__esModule",{value:!0});o0.Animation=void 0;const cD=Ti,DG=ls,dD=function(){return cD.glob.performance&&cD.glob.performance.now?function(){return cD.glob.performance.now()}:function(){return new Date().getTime()}}();class uc{constructor(e,t){this.id=uc.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:dD(),frameRate:0},this.func=e,this.setLayers(t)}setLayers(e){let t=[];return e&&(t=Array.isArray(e)?e:[e]),this.layers=t,this}getLayers(){return this.layers}addLayer(e){const t=this.layers,i=t.length;for(let s=0;s<i;s++)if(t[s]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){const t=uc.animations,i=t.length;for(let s=0;s<i;s++)if(t[s].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=dD(),uc._addAnimation(this),this}stop(){return uc._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){const t=e.id,i=this.animations,s=i.length;for(let r=0;r<s;r++)if(i[r].id===t){this.animations.splice(r,1);break}}static _runFrames(){const e={},t=this.animations;for(let i=0;i<t.length;i++){const s=t[i],r=s.layers,o=s.func;s._updateFrameObject(dD());const a=r.length;let l;if(o?l=o.call(s,s.frame)!==!1:l=!0,!!l)for(let c=0;c<a;c++){const d=r[c];d._id!==void 0&&(e[d._id]=d)}}for(const i in e)e.hasOwnProperty(i)&&e[i].batchDraw()}static _animationLoop(){const e=uc;e.animations.length?(e._runFrames(),DG.Util.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,DG.Util.requestAnimFrame(this._animationLoop))}}o0.Animation=uc;uc.animations=[];uc.animIdCounter=0;uc.animRunning=!1;var qQ={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Easings=n.Tween=void 0;const e=ls,t=o0,i=qn,s=Ti,r={node:1,duration:1,easing:1,onFinish:1,yoyo:1},o=1,a=2,l=3,c=["fill","stroke","shadowColor"];let d=0;class u{constructor(g,m,p,b,w,v,_){this.prop=g,this.propFunc=m,this.begin=b,this._pos=b,this.duration=v,this._change=0,this.prevPos=0,this.yoyo=_,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=p,this._change=w-this.begin,this.pause()}fire(g){const m=this[g];m&&m()}setTime(g){g>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():g<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=g,this.update())}getTime(){return this._time}setPosition(g){this.prevPos=this._pos,this.propFunc(g),this._pos=g}getPosition(g){return g===void 0&&(g=this._time),this.func(g,this.begin,this._change,this.duration)}play(){this.state=a,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=l,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(g){this.pause(),this._time=g,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const g=this.getTimer()-this._startTime;this.state===a?this.setTime(g):this.state===l&&this.setTime(this.duration-g)}pause(){this.state=o,this.fire("onPause")}getTimer(){return new Date().getTime()}}class h{constructor(g){const m=this,p=g.node,b=p._id,w=g.easing||n.Easings.Linear,v=!!g.yoyo;let _,y;typeof g.duration>"u"?_=.3:g.duration===0?_=.001:_=g.duration,this.node=p,this._id=d++;const C=p.getLayer()||(p instanceof s.Konva.Stage?p.getLayers():null);C||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new t.Animation(function(){m.tween.onEnterFrame()},C),this.tween=new u(y,function(S){m._tweenFunc(S)},w,0,1,_*1e3,v),this._addListeners(),h.attrs[b]||(h.attrs[b]={}),h.attrs[b][this._id]||(h.attrs[b][this._id]={}),h.tweens[b]||(h.tweens[b]={});for(y in g)r[y]===void 0&&this._addAttr(y,g[y]);this.reset(),this.onFinish=g.onFinish,this.onReset=g.onReset,this.onUpdate=g.onUpdate}_addAttr(g,m){const p=this.node,b=p._id;let w,v,_,y,C;const S=h.tweens[b][g];S&&delete h.attrs[b][S][g];let k=p.getAttr(g);if(e.Util._isArray(m))if(w=[],v=Math.max(m.length,k.length),g==="points"&&m.length!==k.length&&(m.length>k.length?(y=k,k=e.Util._prepareArrayForTween(k,m,p.closed())):(_=m,m=e.Util._prepareArrayForTween(m,k,p.closed()))),g.indexOf("fill")===0)for(let I=0;I<v;I++)if(I%2===0)w.push(m[I]-k[I]);else{const T=e.Util.colorToRGBA(k[I]);C=e.Util.colorToRGBA(m[I]),k[I]=T,w.push({r:C.r-T.r,g:C.g-T.g,b:C.b-T.b,a:C.a-T.a})}else for(let I=0;I<v;I++)w.push(m[I]-k[I]);else c.indexOf(g)!==-1?(k=e.Util.colorToRGBA(k),C=e.Util.colorToRGBA(m),w={r:C.r-k.r,g:C.g-k.g,b:C.b-k.b,a:C.a-k.a}):w=m-k;h.attrs[b][this._id][g]={start:k,diff:w,end:m,trueEnd:_,trueStart:y},h.tweens[b][g]=this._id}_tweenFunc(g){const m=this.node,p=h.attrs[m._id][this._id];let b,w,v,_,y,C,S,k;for(b in p){if(w=p[b],v=w.start,_=w.diff,k=w.end,e.Util._isArray(v))if(y=[],S=Math.max(v.length,k.length),b.indexOf("fill")===0)for(C=0;C<S;C++)C%2===0?y.push((v[C]||0)+_[C]*g):y.push("rgba("+Math.round(v[C].r+_[C].r*g)+","+Math.round(v[C].g+_[C].g*g)+","+Math.round(v[C].b+_[C].b*g)+","+(v[C].a+_[C].a*g)+")");else for(C=0;C<S;C++)y.push((v[C]||0)+_[C]*g);else c.indexOf(b)!==-1?y="rgba("+Math.round(v.r+_.r*g)+","+Math.round(v.g+_.g*g)+","+Math.round(v.b+_.b*g)+","+(v.a+_.a*g)+")":y=v+_*g;m.setAttr(b,y)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const g=this.node,m=h.attrs[g._id][this._id];m.points&&m.points.trueEnd&&g.setAttr("points",m.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const g=this.node,m=h.attrs[g._id][this._id];m.points&&m.points.trueStart&&g.points(m.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(g){return this.tween.seek(g*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const g=this.node._id,m=this._id,p=h.tweens[g];this.pause();for(const b in p)delete h.tweens[g][b];delete h.attrs[g][m]}}n.Tween=h,h.attrs={},h.tweens={},i.Node.prototype.to=function(f){const g=f.onFinish;f.node=this,f.onFinish=function(){this.destroy(),g&&g()},new h(f).play()},n.Easings={BackEaseIn(f,g,m,p){return m*(f/=p)*f*((1.70158+1)*f-1.70158)+g},BackEaseOut(f,g,m,p){return m*((f=f/p-1)*f*((1.70158+1)*f+1.70158)+1)+g},BackEaseInOut(f,g,m,p){let b=1.70158;return(f/=p/2)<1?m/2*(f*f*(((b*=1.525)+1)*f-b))+g:m/2*((f-=2)*f*(((b*=1.525)+1)*f+b)+2)+g},ElasticEaseIn(f,g,m,p,b,w){let v=0;return f===0?g:(f/=p)===1?g+m:(w||(w=p*.3),!b||b<Math.abs(m)?(b=m,v=w/4):v=w/(2*Math.PI)*Math.asin(m/b),-(b*Math.pow(2,10*(f-=1))*Math.sin((f*p-v)*(2*Math.PI)/w))+g)},ElasticEaseOut(f,g,m,p,b,w){let v=0;return f===0?g:(f/=p)===1?g+m:(w||(w=p*.3),!b||b<Math.abs(m)?(b=m,v=w/4):v=w/(2*Math.PI)*Math.asin(m/b),b*Math.pow(2,-10*f)*Math.sin((f*p-v)*(2*Math.PI)/w)+m+g)},ElasticEaseInOut(f,g,m,p,b,w){let v=0;return f===0?g:(f/=p/2)===2?g+m:(w||(w=p*(.3*1.5)),!b||b<Math.abs(m)?(b=m,v=w/4):v=w/(2*Math.PI)*Math.asin(m/b),f<1?-.5*(b*Math.pow(2,10*(f-=1))*Math.sin((f*p-v)*(2*Math.PI)/w))+g:b*Math.pow(2,-10*(f-=1))*Math.sin((f*p-v)*(2*Math.PI)/w)*.5+m+g)},BounceEaseOut(f,g,m,p){return(f/=p)<1/2.75?m*(7.5625*f*f)+g:f<2/2.75?m*(7.5625*(f-=1.5/2.75)*f+.75)+g:f<2.5/2.75?m*(7.5625*(f-=2.25/2.75)*f+.9375)+g:m*(7.5625*(f-=2.625/2.75)*f+.984375)+g},BounceEaseIn(f,g,m,p){return m-n.Easings.BounceEaseOut(p-f,0,m,p)+g},BounceEaseInOut(f,g,m,p){return f<p/2?n.Easings.BounceEaseIn(f*2,0,m,p)*.5+g:n.Easings.BounceEaseOut(f*2-p,0,m,p)*.5+m*.5+g},EaseIn(f,g,m,p){return m*(f/=p)*f+g},EaseOut(f,g,m,p){return-m*(f/=p)*(f-2)+g},EaseInOut(f,g,m,p){return(f/=p/2)<1?m/2*f*f+g:-m/2*(--f*(f-2)-1)+g},StrongEaseIn(f,g,m,p){return m*(f/=p)*f*f*f*f+g},StrongEaseOut(f,g,m,p){return m*((f=f/p-1)*f*f*f*f+1)+g},StrongEaseInOut(f,g,m,p){return(f/=p/2)<1?m/2*f*f*f*f*f+g:m/2*((f-=2)*f*f*f*f+2)+g},Linear(f,g,m,p){return m*f/p+g}}})(qQ);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Konva=void 0;const e=Ti,t=ls,i=qn,s=Xg,r=jQ,o=J1,a=ox,l=r0,c=sx,d=qs,u=o0,h=qQ,f=Fd,g=Ll;n.Konva=t.Util._assign(e.Konva,{Util:t.Util,Transform:t.Transform,Node:i.Node,Container:s.Container,Stage:r.Stage,stages:r.stages,Layer:o.Layer,FastLayer:a.FastLayer,Group:l.Group,DD:c.DD,Shape:d.Shape,shapes:d.shapes,Animation:u.Animation,Tween:h.Tween,Easings:h.Easings,Context:f.Context,Canvas:g.Canvas}),n.default=n.Konva})(HQ);var ax={};Object.defineProperty(ax,"__esModule",{value:!0});ax.Arc=void 0;const lx=Mi,xbe=qs,IG=Ti,cx=ti,Tbe=Ti;class su extends xbe.Shape{_sceneFunc(e){const t=IG.Konva.getAngle(this.angle()),i=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,t,i),e.arc(0,0,this.innerRadius(),t,0,!i),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),t=this.outerRadius(),i=this.clockwise(),s=IG.Konva.getAngle(i?360-this.angle():this.angle()),r=Math.cos(Math.min(s,Math.PI)),o=1,a=Math.sin(Math.min(Math.max(Math.PI,s),3*Math.PI/2)),l=Math.sin(Math.min(s,Math.PI/2)),c=r*(r>0?e:t),d=o*t,u=a*(a>0?e:t),h=l*(l>0?t:e);return{x:c,y:i?-1*h:u,width:d-c,height:h-u}}}ax.Arc=su;su.prototype._centroid=!0;su.prototype.className="Arc";su.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];(0,Tbe._registerNode)(su);lx.Factory.addGetterSetter(su,"innerRadius",0,(0,cx.getNumberValidator)());lx.Factory.addGetterSetter(su,"outerRadius",0,(0,cx.getNumberValidator)());lx.Factory.addGetterSetter(su,"angle",0,(0,cx.getNumberValidator)());lx.Factory.addGetterSetter(su,"clockwise",!1,(0,cx.getBooleanValidator)());var dx={},$1={};Object.defineProperty($1,"__esModule",{value:!0});$1.Line=void 0;const ux=Mi,Dbe=Ti,Ibe=qs,eq=ti;function I9(n,e,t,i,s,r,o){const a=Math.sqrt(Math.pow(t-n,2)+Math.pow(i-e,2)),l=Math.sqrt(Math.pow(s-t,2)+Math.pow(r-i,2)),c=o*a/(a+l),d=o*l/(a+l),u=t-c*(s-n),h=i-c*(r-e),f=t+d*(s-n),g=i+d*(r-e);return[u,h,f,g]}function MG(n,e){const t=n.length,i=[];for(let s=2;s<t-2;s+=2){const r=I9(n[s-2],n[s-1],n[s],n[s+1],n[s+2],n[s+3],e);isNaN(r[0])||(i.push(r[0]),i.push(r[1]),i.push(n[s]),i.push(n[s+1]),i.push(r[2]),i.push(r[3]))}return i}class Qh extends Ibe.Shape{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){let t=this.points(),i=t.length,s=this.tension(),r=this.closed(),o=this.bezier(),a,l,c;if(i){if(e.beginPath(),e.moveTo(t[0],t[1]),s!==0&&i>4){for(a=this.getTensionPoints(),l=a.length,c=r?0:4,r||e.quadraticCurveTo(a[0],a[1],a[2],a[3]);c<l-2;)e.bezierCurveTo(a[c++],a[c++],a[c++],a[c++],a[c++],a[c++]);r||e.quadraticCurveTo(a[l-2],a[l-1],t[i-2],t[i-1])}else if(o)for(c=2;c<i;)e.bezierCurveTo(t[c++],t[c++],t[c++],t[c++],t[c++],t[c++]);else for(c=2;c<i;c+=2)e.lineTo(t[c],t[c+1]);r?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():MG(this.points(),this.tension())}_getTensionPointsClosed(){const e=this.points(),t=e.length,i=this.tension(),s=I9(e[t-2],e[t-1],e[0],e[1],e[2],e[3],i),r=I9(e[t-4],e[t-3],e[t-2],e[t-1],e[0],e[1],i),o=MG(e,i);return[s[2],s[3]].concat(o).concat([r[0],r[1],e[t-2],e[t-1],r[2],r[3],s[0],s[1],e[0],e[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();let t=e[0],i=e[0],s=e[1],r=e[1],o,a;for(let l=0;l<e.length/2;l++)o=e[l*2],a=e[l*2+1],t=Math.min(t,o),i=Math.max(i,o),s=Math.min(s,a),r=Math.max(r,a);return{x:t,y:s,width:i-t,height:r-s}}}$1.Line=Qh;Qh.prototype.className="Line";Qh.prototype._attrsAffectingSize=["points","bezier","tension"];(0,Dbe._registerNode)(Qh);ux.Factory.addGetterSetter(Qh,"closed",!1);ux.Factory.addGetterSetter(Qh,"bezier",!1);ux.Factory.addGetterSetter(Qh,"tension",0,(0,eq.getNumberValidator)());ux.Factory.addGetterSetter(Qh,"points",[],(0,eq.getNumberArrayValidator)());var a0={},tq={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.t2length=n.getQuadraticArcLength=n.getCubicArcLength=n.binomialCoefficients=n.cValues=n.tValues=void 0,n.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],n.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],n.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(o,a,l)=>{let c,d;const h=l/2;c=0;for(let f=0;f<20;f++)d=h*n.tValues[20][f]+h,c+=n.cValues[20][f]*i(o,a,d);return h*c};n.getCubicArcLength=e;const t=(o,a,l)=>{l===void 0&&(l=1);const c=o[0]-2*o[1]+o[2],d=a[0]-2*a[1]+a[2],u=2*o[1]-2*o[0],h=2*a[1]-2*a[0],f=4*(c*c+d*d),g=4*(c*u+d*h),m=u*u+h*h;if(f===0)return l*Math.sqrt(Math.pow(o[2]-o[0],2)+Math.pow(a[2]-a[0],2));const p=g/(2*f),b=m/f,w=l+p,v=b-p*p,_=w*w+v>0?Math.sqrt(w*w+v):0,y=p*p+v>0?Math.sqrt(p*p+v):0,C=p+Math.sqrt(p*p+v)!==0?v*Math.log(Math.abs((w+_)/(p+y))):0;return Math.sqrt(f)/2*(w*_-p*y+C)};n.getQuadraticArcLength=t;function i(o,a,l){const c=s(1,l,o),d=s(1,l,a),u=c*c+d*d;return Math.sqrt(u)}const s=(o,a,l)=>{const c=l.length-1;let d,u;if(c===0)return 0;if(o===0){u=0;for(let h=0;h<=c;h++)u+=n.binomialCoefficients[c][h]*Math.pow(1-a,c-h)*Math.pow(a,h)*l[h];return u}else{d=new Array(c);for(let h=0;h<c;h++)d[h]=c*(l[h+1]-l[h]);return s(o-1,a,d)}},r=(o,a,l)=>{let c=1,d=o/a,u=(o-l(d))/a,h=0;for(;c>.001;){const f=l(d+u),g=Math.abs(o-f)/a;if(g<c)c=g,d+=u;else{const m=l(d-u),p=Math.abs(o-m)/a;p<c?(c=p,d-=u):u/=2}if(h++,h>500)break}return d};n.t2length=r})(tq);Object.defineProperty(a0,"__esModule",{value:!0});a0.Path=void 0;const Mbe=Mi,Ebe=qs,Nbe=Ti,Tm=tq;class Us extends Ebe.Shape{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Us.parsePathData(this.data()),this.pathLength=Us.getPathLength(this.dataArray)}_sceneFunc(e){const t=this.dataArray;e.beginPath();let i=!1;for(let m=0;m<t.length;m++){const p=t[m].command,b=t[m].points;switch(p){case"L":e.lineTo(b[0],b[1]);break;case"M":e.moveTo(b[0],b[1]);break;case"C":e.bezierCurveTo(b[0],b[1],b[2],b[3],b[4],b[5]);break;case"Q":e.quadraticCurveTo(b[0],b[1],b[2],b[3]);break;case"A":var s=b[0],r=b[1],o=b[2],a=b[3],l=b[4],c=b[5],d=b[6],u=b[7],h=o>a?o:a,f=o>a?1:o/a,g=o>a?a/o:1;e.translate(s,r),e.rotate(d),e.scale(f,g),e.arc(0,0,h,l,l+c,1-u),e.scale(1/f,1/g),e.rotate(-d),e.translate(-s,-r);break;case"z":i=!0,e.closePath();break}}!i&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){let e=[];this.dataArray.forEach(function(l){if(l.command==="A"){const c=l.points[4],d=l.points[5],u=l.points[4]+d;let h=Math.PI/180;if(Math.abs(c-u)<h&&(h=Math.abs(c-u)),d<0)for(let f=c-h;f>u;f-=h){const g=Us.getPointOnEllipticalArc(l.points[0],l.points[1],l.points[2],l.points[3],f,0);e.push(g.x,g.y)}else for(let f=c+h;f<u;f+=h){const g=Us.getPointOnEllipticalArc(l.points[0],l.points[1],l.points[2],l.points[3],f,0);e.push(g.x,g.y)}}else if(l.command==="C")for(let c=0;c<=1;c+=.01){const d=Us.getPointOnCubicBezier(c,l.start.x,l.start.y,l.points[0],l.points[1],l.points[2],l.points[3],l.points[4],l.points[5]);e.push(d.x,d.y)}else e=e.concat(l.points)});let t=e[0],i=e[0],s=e[1],r=e[1],o,a;for(let l=0;l<e.length/2;l++)o=e[l*2],a=e[l*2+1],isNaN(o)||(t=Math.min(t,o),i=Math.max(i,o)),isNaN(a)||(s=Math.min(s,a),r=Math.max(r,a));return{x:t,y:s,width:i-t,height:r-s}}getLength(){return this.pathLength}getPointAtLength(e){return Us.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,t,i,s){return Math.sqrt((i-e)*(i-e)+(s-t)*(s-t))}static getPathLength(e){let t=0;for(let i=0;i<e.length;++i)t+=e[i].pathLength;return t}static getPointAtLengthOfDataArray(e,t){let i,s=0,r=t.length;if(!r)return null;for(;s<r&&e>t[s].pathLength;)e-=t[s].pathLength,++s;if(s===r)return i=t[s-1].points.slice(-2),{x:i[0],y:i[1]};if(e<.01)return i=t[s].points.slice(0,2),{x:i[0],y:i[1]};const o=t[s],a=o.points;switch(o.command){case"L":return Us.getPointOnLine(e,o.start.x,o.start.y,a[0],a[1]);case"C":return Us.getPointOnCubicBezier((0,Tm.t2length)(e,Us.getPathLength(t),m=>(0,Tm.getCubicArcLength)([o.start.x,a[0],a[2],a[4]],[o.start.y,a[1],a[3],a[5]],m)),o.start.x,o.start.y,a[0],a[1],a[2],a[3],a[4],a[5]);case"Q":return Us.getPointOnQuadraticBezier((0,Tm.t2length)(e,Us.getPathLength(t),m=>(0,Tm.getQuadraticArcLength)([o.start.x,a[0],a[2]],[o.start.y,a[1],a[3]],m)),o.start.x,o.start.y,a[0],a[1],a[2],a[3]);case"A":var l=a[0],c=a[1],d=a[2],u=a[3],h=a[4],f=a[5],g=a[6];return h+=f*e/o.pathLength,Us.getPointOnEllipticalArc(l,c,d,u,h,g)}return null}static getPointOnLine(e,t,i,s,r,o,a){o=o??t,a=a??i;const l=this.getLineLength(t,i,s,r);if(l<1e-10)return{x:t,y:i};if(s===t)return{x:o,y:a+(r>i?e:-e)};const c=(r-i)/(s-t),d=Math.sqrt(e*e/(1+c*c))*(s<t?-1:1),u=c*d;if(Math.abs(a-i-c*(o-t))<1e-10)return{x:o+d,y:a+u};const h=((o-t)*(s-t)+(a-i)*(r-i))/(l*l),f=t+h*(s-t),g=i+h*(r-i),m=this.getLineLength(o,a,f,g),p=Math.sqrt(e*e-m*m),b=Math.sqrt(p*p/(1+c*c))*(s<t?-1:1),w=c*b;return{x:f+b,y:g+w}}static getPointOnCubicBezier(e,t,i,s,r,o,a,l,c){function d(p){return p*p*p}function u(p){return 3*p*p*(1-p)}function h(p){return 3*p*(1-p)*(1-p)}function f(p){return(1-p)*(1-p)*(1-p)}const g=l*d(e)+o*u(e)+s*h(e)+t*f(e),m=c*d(e)+a*u(e)+r*h(e)+i*f(e);return{x:g,y:m}}static getPointOnQuadraticBezier(e,t,i,s,r,o,a){function l(f){return f*f}function c(f){return 2*f*(1-f)}function d(f){return(1-f)*(1-f)}const u=o*l(e)+s*c(e)+t*d(e),h=a*l(e)+r*c(e)+i*d(e);return{x:u,y:h}}static getPointOnEllipticalArc(e,t,i,s,r,o){const a=Math.cos(o),l=Math.sin(o),c={x:i*Math.cos(r),y:s*Math.sin(r)};return{x:e+(c.x*a-c.y*l),y:t+(c.x*l+c.y*a)}}static parsePathData(e){if(!e)return[];let t=e;const i=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];t=t.replace(new RegExp(" ","g"),",");for(var s=0;s<i.length;s++)t=t.replace(new RegExp(i[s],"g"),"|"+i[s]);const r=t.split("|"),o=[],a=[];let l=0,c=0;const d=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let u;for(s=1;s<r.length;s++){let k=r[s],I=k.charAt(0);for(k=k.slice(1),a.length=0;u=d.exec(k);)a.push(u[0]);const T=[];for(let D=0,M=a.length;D<M;D++){if(a[D]==="00"){T.push(0,0);continue}const E=parseFloat(a[D]);isNaN(E)?T.push(0):T.push(E)}for(;T.length>0&&!isNaN(T[0]);){let D="",M=[];const E=l,W=c;var h,f,g,m,p,b,w,v,_,y;switch(I){case"l":l+=T.shift(),c+=T.shift(),D="L",M.push(l,c);break;case"L":l=T.shift(),c=T.shift(),M.push(l,c);break;case"m":var C=T.shift(),S=T.shift();if(l+=C,c+=S,D="M",o.length>2&&o[o.length-1].command==="z"){for(let P=o.length-2;P>=0;P--)if(o[P].command==="M"){l=o[P].points[0]+C,c=o[P].points[1]+S;break}}M.push(l,c),I="l";break;case"M":l=T.shift(),c=T.shift(),D="M",M.push(l,c),I="L";break;case"h":l+=T.shift(),D="L",M.push(l,c);break;case"H":l=T.shift(),D="L",M.push(l,c);break;case"v":c+=T.shift(),D="L",M.push(l,c);break;case"V":c=T.shift(),D="L",M.push(l,c);break;case"C":M.push(T.shift(),T.shift(),T.shift(),T.shift()),l=T.shift(),c=T.shift(),M.push(l,c);break;case"c":M.push(l+T.shift(),c+T.shift(),l+T.shift(),c+T.shift()),l+=T.shift(),c+=T.shift(),D="C",M.push(l,c);break;case"S":f=l,g=c,h=o[o.length-1],h.command==="C"&&(f=l+(l-h.points[2]),g=c+(c-h.points[3])),M.push(f,g,T.shift(),T.shift()),l=T.shift(),c=T.shift(),D="C",M.push(l,c);break;case"s":f=l,g=c,h=o[o.length-1],h.command==="C"&&(f=l+(l-h.points[2]),g=c+(c-h.points[3])),M.push(f,g,l+T.shift(),c+T.shift()),l+=T.shift(),c+=T.shift(),D="C",M.push(l,c);break;case"Q":M.push(T.shift(),T.shift()),l=T.shift(),c=T.shift(),M.push(l,c);break;case"q":M.push(l+T.shift(),c+T.shift()),l+=T.shift(),c+=T.shift(),D="Q",M.push(l,c);break;case"T":f=l,g=c,h=o[o.length-1],h.command==="Q"&&(f=l+(l-h.points[0]),g=c+(c-h.points[1])),l=T.shift(),c=T.shift(),D="Q",M.push(f,g,l,c);break;case"t":f=l,g=c,h=o[o.length-1],h.command==="Q"&&(f=l+(l-h.points[0]),g=c+(c-h.points[1])),l+=T.shift(),c+=T.shift(),D="Q",M.push(f,g,l,c);break;case"A":m=T.shift(),p=T.shift(),b=T.shift(),w=T.shift(),v=T.shift(),_=l,y=c,l=T.shift(),c=T.shift(),D="A",M=this.convertEndpointToCenterParameterization(_,y,l,c,w,v,m,p,b);break;case"a":m=T.shift(),p=T.shift(),b=T.shift(),w=T.shift(),v=T.shift(),_=l,y=c,l+=T.shift(),c+=T.shift(),D="A",M=this.convertEndpointToCenterParameterization(_,y,l,c,w,v,m,p,b);break}o.push({command:D||I,points:M,start:{x:E,y:W},pathLength:this.calcLength(E,W,D||I,M)})}(I==="z"||I==="Z")&&o.push({command:"z",points:[],start:void 0,pathLength:0})}return o}static calcLength(e,t,i,s){let r,o,a,l;const c=Us;switch(i){case"L":return c.getLineLength(e,t,s[0],s[1]);case"C":return(0,Tm.getCubicArcLength)([e,s[0],s[2],s[4]],[t,s[1],s[3],s[5]],1);case"Q":return(0,Tm.getQuadraticArcLength)([e,s[0],s[2]],[t,s[1],s[3]],1);case"A":r=0;var d=s[4],u=s[5],h=s[4]+u,f=Math.PI/180;if(Math.abs(d-h)<f&&(f=Math.abs(d-h)),o=c.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],d,0),u<0)for(l=d-f;l>h;l-=f)a=c.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],l,0),r+=c.getLineLength(o.x,o.y,a.x,a.y),o=a;else for(l=d+f;l<h;l+=f)a=c.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],l,0),r+=c.getLineLength(o.x,o.y,a.x,a.y),o=a;return a=c.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],h,0),r+=c.getLineLength(o.x,o.y,a.x,a.y),r}return 0}static convertEndpointToCenterParameterization(e,t,i,s,r,o,a,l,c){const d=c*(Math.PI/180),u=Math.cos(d)*(e-i)/2+Math.sin(d)*(t-s)/2,h=-1*Math.sin(d)*(e-i)/2+Math.cos(d)*(t-s)/2,f=u*u/(a*a)+h*h/(l*l);f>1&&(a*=Math.sqrt(f),l*=Math.sqrt(f));let g=Math.sqrt((a*a*(l*l)-a*a*(h*h)-l*l*(u*u))/(a*a*(h*h)+l*l*(u*u)));r===o&&(g*=-1),isNaN(g)&&(g=0);const m=g*a*h/l,p=g*-l*u/a,b=(e+i)/2+Math.cos(d)*m-Math.sin(d)*p,w=(t+s)/2+Math.sin(d)*m+Math.cos(d)*p,v=function(T){return Math.sqrt(T[0]*T[0]+T[1]*T[1])},_=function(T,D){return(T[0]*D[0]+T[1]*D[1])/(v(T)*v(D))},y=function(T,D){return(T[0]*D[1]<T[1]*D[0]?-1:1)*Math.acos(_(T,D))},C=y([1,0],[(u-m)/a,(h-p)/l]),S=[(u-m)/a,(h-p)/l],k=[(-1*u-m)/a,(-1*h-p)/l];let I=y(S,k);return _(S,k)<=-1&&(I=Math.PI),_(S,k)>=1&&(I=0),o===0&&I>0&&(I=I-2*Math.PI),o===1&&I<0&&(I=I+2*Math.PI),[b,w,a,l,C,I,d,o]}}a0.Path=Us;Us.prototype.className="Path";Us.prototype._attrsAffectingSize=["data"];(0,Nbe._registerNode)(Us);Mbe.Factory.addGetterSetter(Us,"data");Object.defineProperty(dx,"__esModule",{value:!0});dx.Arrow=void 0;const hx=Mi,Rbe=$1,iq=ti,Wbe=Ti,EG=a0;class Hg extends Rbe.Line{_sceneFunc(e){super._sceneFunc(e);const t=Math.PI*2,i=this.points();let s=i;const r=this.tension()!==0&&i.length>4;r&&(s=this.getTensionPoints());const o=this.pointerLength(),a=i.length;let l,c;if(r){const h=[s[s.length-4],s[s.length-3],s[s.length-2],s[s.length-1],i[a-2],i[a-1]],f=EG.Path.calcLength(s[s.length-4],s[s.length-3],"C",h),g=EG.Path.getPointOnQuadraticBezier(Math.min(1,1-o/f),h[0],h[1],h[2],h[3],h[4],h[5]);l=i[a-2]-g.x,c=i[a-1]-g.y}else l=i[a-2]-i[a-4],c=i[a-1]-i[a-3];const d=(Math.atan2(c,l)+t)%t,u=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(i[a-2],i[a-1]),e.rotate(d),e.moveTo(0,0),e.lineTo(-o,u/2),e.lineTo(-o,-u/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(i[0],i[1]),r?(l=(s[0]+s[2])/2-i[0],c=(s[1]+s[3])/2-i[1]):(l=i[2]-i[0],c=i[3]-i[1]),e.rotate((Math.atan2(-c,-l)+t)%t),e.moveTo(0,0),e.lineTo(-o,u/2),e.lineTo(-o,-u/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){const t=this.dashEnabled();t&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),t&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),t=this.pointerWidth()/2;return{x:e.x,y:e.y-t,width:e.width,height:e.height+t*2}}}dx.Arrow=Hg;Hg.prototype.className="Arrow";(0,Wbe._registerNode)(Hg);hx.Factory.addGetterSetter(Hg,"pointerLength",10,(0,iq.getNumberValidator)());hx.Factory.addGetterSetter(Hg,"pointerWidth",10,(0,iq.getNumberValidator)());hx.Factory.addGetterSetter(Hg,"pointerAtBeginning",!1);hx.Factory.addGetterSetter(Hg,"pointerAtEnding",!0);var fx={};Object.defineProperty(fx,"__esModule",{value:!0});fx.Circle=void 0;const Abe=Mi,Fbe=qs,Vbe=ti,Pbe=Ti;class l0 extends Fbe.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}}fx.Circle=l0;l0.prototype._centroid=!0;l0.prototype.className="Circle";l0.prototype._attrsAffectingSize=["radius"];(0,Pbe._registerNode)(l0);Abe.Factory.addGetterSetter(l0,"radius",0,(0,Vbe.getNumberValidator)());var gx={};Object.defineProperty(gx,"__esModule",{value:!0});gx.Ellipse=void 0;const I4=Mi,Obe=qs,nq=ti,Zbe=Ti;class qh extends Obe.Shape{_sceneFunc(e){const t=this.radiusX(),i=this.radiusY();e.beginPath(),e.save(),t!==i&&e.scale(1,i/t),e.arc(0,0,t,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}gx.Ellipse=qh;qh.prototype.className="Ellipse";qh.prototype._centroid=!0;qh.prototype._attrsAffectingSize=["radiusX","radiusY"];(0,Zbe._registerNode)(qh);I4.Factory.addComponentsGetterSetter(qh,"radius",["x","y"]);I4.Factory.addGetterSetter(qh,"radiusX",0,(0,nq.getNumberValidator)());I4.Factory.addGetterSetter(qh,"radiusY",0,(0,nq.getNumberValidator)());var mx={};Object.defineProperty(mx,"__esModule",{value:!0});mx.Image=void 0;const uD=ls,Ug=Mi,Gbe=qs,Bbe=Ti,Q1=ti;class Ja extends Gbe.Shape{constructor(e){super(e),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",t=>{this._removeImageLoad(t.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",this._loadListener)}_removeImageLoad(e){e&&e.removeEventListener&&e.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const e=!!this.cornerRadius(),t=this.hasShadow();return e&&t?!0:super._useBufferCanvas(!0)}_sceneFunc(e){const t=this.getWidth(),i=this.getHeight(),s=this.cornerRadius(),r=this.attrs.image;let o;if(r){const a=this.attrs.cropWidth,l=this.attrs.cropHeight;a&&l?o=[r,this.cropX(),this.cropY(),a,l,0,0,t,i]:o=[r,0,0,t,i]}(this.hasFill()||this.hasStroke()||s)&&(e.beginPath(),s?uD.Util.drawRoundedRectPath(e,t,i,s):e.rect(0,0,t,i),e.closePath(),e.fillStrokeShape(this)),r&&(s&&e.clip(),e.drawImage.apply(e,o))}_hitFunc(e){const t=this.width(),i=this.height(),s=this.cornerRadius();e.beginPath(),s?uD.Util.drawRoundedRectPath(e,t,i,s):e.rect(0,0,t,i),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,t;return(e=this.attrs.width)!==null&&e!==void 0?e:(t=this.image())===null||t===void 0?void 0:t.width}getHeight(){var e,t;return(e=this.attrs.height)!==null&&e!==void 0?e:(t=this.image())===null||t===void 0?void 0:t.height}static fromURL(e,t,i=null){const s=uD.Util.createImageElement();s.onload=function(){const r=new Ja({image:s});t(r)},s.onerror=i,s.crossOrigin="Anonymous",s.src=e}}mx.Image=Ja;Ja.prototype.className="Image";(0,Bbe._registerNode)(Ja);Ug.Factory.addGetterSetter(Ja,"cornerRadius",0,(0,Q1.getNumberOrArrayOfNumbersValidator)(4));Ug.Factory.addGetterSetter(Ja,"image");Ug.Factory.addComponentsGetterSetter(Ja,"crop",["x","y","width","height"]);Ug.Factory.addGetterSetter(Ja,"cropX",0,(0,Q1.getNumberValidator)());Ug.Factory.addGetterSetter(Ja,"cropY",0,(0,Q1.getNumberValidator)());Ug.Factory.addGetterSetter(Ja,"cropWidth",0,(0,Q1.getNumberValidator)());Ug.Factory.addGetterSetter(Ja,"cropHeight",0,(0,Q1.getNumberValidator)());var mb={};Object.defineProperty(mb,"__esModule",{value:!0});mb.Tag=mb.Label=void 0;const px=Mi,Xbe=qs,zbe=r0,M4=ti,sq=Ti,rq=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],Hbe="Change.konva",Ube="none",M9="up",E9="right",N9="down",R9="left",Ybe=rq.length;let E4=class extends zbe.Group{constructor(e){super(e),this.on("add.konva",function(t){this._addListeners(t.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){let t=this,i;const s=function(){t._sync()};for(i=0;i<Ybe;i++)e.on(rq[i]+Hbe,s)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let e=this.getText(),t=this.getTag(),i,s,r,o,a,l,c;if(e&&t){switch(i=e.width(),s=e.height(),r=t.pointerDirection(),o=t.pointerWidth(),c=t.pointerHeight(),a=0,l=0,r){case M9:a=i/2,l=-1*c;break;case E9:a=i+o,l=s/2;break;case N9:a=i/2,l=s+c;break;case R9:a=-1*o,l=s/2;break}t.setAttrs({x:-1*a,y:-1*l,width:i,height:s}),e.setAttrs({x:-1*a,y:-1*l})}}};mb.Label=E4;E4.prototype.className="Label";(0,sq._registerNode)(E4);class Yg extends Xbe.Shape{_sceneFunc(e){const t=this.width(),i=this.height(),s=this.pointerDirection(),r=this.pointerWidth(),o=this.pointerHeight(),a=this.cornerRadius();let l=0,c=0,d=0,u=0;typeof a=="number"?l=c=d=u=Math.min(a,t/2,i/2):(l=Math.min(a[0]||0,t/2,i/2),c=Math.min(a[1]||0,t/2,i/2),u=Math.min(a[2]||0,t/2,i/2),d=Math.min(a[3]||0,t/2,i/2)),e.beginPath(),e.moveTo(l,0),s===M9&&(e.lineTo((t-r)/2,0),e.lineTo(t/2,-1*o),e.lineTo((t+r)/2,0)),e.lineTo(t-c,0),e.arc(t-c,c,c,Math.PI*3/2,0,!1),s===E9&&(e.lineTo(t,(i-o)/2),e.lineTo(t+r,i/2),e.lineTo(t,(i+o)/2)),e.lineTo(t,i-u),e.arc(t-u,i-u,u,0,Math.PI/2,!1),s===N9&&(e.lineTo((t+r)/2,i),e.lineTo(t/2,i+o),e.lineTo((t-r)/2,i)),e.lineTo(d,i),e.arc(d,i-d,d,Math.PI/2,Math.PI,!1),s===R9&&(e.lineTo(0,(i+o)/2),e.lineTo(-1*r,i/2),e.lineTo(0,(i-o)/2)),e.lineTo(0,l),e.arc(l,l,l,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){let e=0,t=0,i=this.pointerWidth(),s=this.pointerHeight(),r=this.pointerDirection(),o=this.width(),a=this.height();return r===M9?(t-=s,a+=s):r===N9?a+=s:r===R9?(e-=i*1.5,o+=i):r===E9&&(o+=i*1.5),{x:e,y:t,width:o,height:a}}}mb.Tag=Yg;Yg.prototype.className="Tag";(0,sq._registerNode)(Yg);px.Factory.addGetterSetter(Yg,"pointerDirection",Ube);px.Factory.addGetterSetter(Yg,"pointerWidth",0,(0,M4.getNumberValidator)());px.Factory.addGetterSetter(Yg,"pointerHeight",0,(0,M4.getNumberValidator)());px.Factory.addGetterSetter(Yg,"cornerRadius",0,(0,M4.getNumberOrArrayOfNumbersValidator)(4));var q1={};Object.defineProperty(q1,"__esModule",{value:!0});q1.Rect=void 0;const Kbe=Mi,jbe=qs,Jbe=Ti,$be=ls,Qbe=ti;class bx extends jbe.Shape{_sceneFunc(e){const t=this.cornerRadius(),i=this.width(),s=this.height();e.beginPath(),t?$be.Util.drawRoundedRectPath(e,i,s,t):e.rect(0,0,i,s),e.closePath(),e.fillStrokeShape(this)}}q1.Rect=bx;bx.prototype.className="Rect";(0,Jbe._registerNode)(bx);Kbe.Factory.addGetterSetter(bx,"cornerRadius",0,(0,Qbe.getNumberOrArrayOfNumbersValidator)(4));var vx={};Object.defineProperty(vx,"__esModule",{value:!0});vx.RegularPolygon=void 0;const oq=Mi,qbe=qs,aq=ti,e0e=Ti;class Kg extends qbe.Shape{_sceneFunc(e){const t=this._getPoints();e.beginPath(),e.moveTo(t[0].x,t[0].y);for(let i=1;i<t.length;i++)e.lineTo(t[i].x,t[i].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,t=this.attrs.radius||0,i=[];for(let s=0;s<e;s++)i.push({x:t*Math.sin(s*2*Math.PI/e),y:-1*t*Math.cos(s*2*Math.PI/e)});return i}getSelfRect(){const e=this._getPoints();let t=e[0].x,i=e[0].y,s=e[0].x,r=e[0].y;return e.forEach(o=>{t=Math.min(t,o.x),i=Math.max(i,o.x),s=Math.min(s,o.y),r=Math.max(r,o.y)}),{x:t,y:s,width:i-t,height:r-s}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}vx.RegularPolygon=Kg;Kg.prototype.className="RegularPolygon";Kg.prototype._centroid=!0;Kg.prototype._attrsAffectingSize=["radius"];(0,e0e._registerNode)(Kg);oq.Factory.addGetterSetter(Kg,"radius",0,(0,aq.getNumberValidator)());oq.Factory.addGetterSetter(Kg,"sides",0,(0,aq.getNumberValidator)());var _x={};Object.defineProperty(_x,"__esModule",{value:!0});_x.Ring=void 0;const lq=Mi,t0e=qs,cq=ti,i0e=Ti,NG=Math.PI*2;class jg extends t0e.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,NG,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),NG,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}_x.Ring=jg;jg.prototype.className="Ring";jg.prototype._centroid=!0;jg.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,i0e._registerNode)(jg);lq.Factory.addGetterSetter(jg,"innerRadius",0,(0,cq.getNumberValidator)());lq.Factory.addGetterSetter(jg,"outerRadius",0,(0,cq.getNumberValidator)());var wx={};Object.defineProperty(wx,"__esModule",{value:!0});wx.Sprite=void 0;const Jg=Mi,n0e=qs,s0e=o0,dq=ti,r0e=Ti;class Xc extends n0e.Shape{constructor(e){super(e),this._updated=!0,this.anim=new s0e.Animation(()=>{const t=this._updated;return this._updated=!1,t}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){const t=this.animation(),i=this.frameIndex(),s=i*4,r=this.animations()[t],o=this.frameOffsets(),a=r[s+0],l=r[s+1],c=r[s+2],d=r[s+3],u=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,c,d),e.closePath(),e.fillStrokeShape(this)),u)if(o){const h=o[t],f=i*2;e.drawImage(u,a,l,c,d,h[f+0],h[f+1],c,d)}else e.drawImage(u,a,l,c,d,0,0,c,d)}_hitFunc(e){const t=this.animation(),i=this.frameIndex(),s=i*4,r=this.animations()[t],o=this.frameOffsets(),a=r[s+2],l=r[s+3];if(e.beginPath(),o){const c=o[t],d=i*2;e.rect(c[d+0],c[d+1],a,l)}else e.rect(0,0,a,l);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const e=this.frameIndex(),t=this.animation(),i=this.animations(),s=i[t],r=s.length/4;e<r-1?this.frameIndex(e+1):this.frameIndex(0)}}wx.Sprite=Xc;Xc.prototype.className="Sprite";(0,r0e._registerNode)(Xc);Jg.Factory.addGetterSetter(Xc,"animation");Jg.Factory.addGetterSetter(Xc,"animations");Jg.Factory.addGetterSetter(Xc,"frameOffsets");Jg.Factory.addGetterSetter(Xc,"image");Jg.Factory.addGetterSetter(Xc,"frameIndex",0,(0,dq.getNumberValidator)());Jg.Factory.addGetterSetter(Xc,"frameRate",17,(0,dq.getNumberValidator)());Jg.Factory.backCompat(Xc,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});var yx={};Object.defineProperty(yx,"__esModule",{value:!0});yx.Star=void 0;const N4=Mi,o0e=qs,R4=ti,a0e=Ti;class ef extends o0e.Shape{_sceneFunc(e){const t=this.innerRadius(),i=this.outerRadius(),s=this.numPoints();e.beginPath(),e.moveTo(0,0-i);for(let r=1;r<s*2;r++){const o=r%2===0?i:t,a=o*Math.sin(r*Math.PI/s),l=-1*o*Math.cos(r*Math.PI/s);e.lineTo(a,l)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}yx.Star=ef;ef.prototype.className="Star";ef.prototype._centroid=!0;ef.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,a0e._registerNode)(ef);N4.Factory.addGetterSetter(ef,"numPoints",5,(0,R4.getNumberValidator)());N4.Factory.addGetterSetter(ef,"innerRadius",0,(0,R4.getNumberValidator)());N4.Factory.addGetterSetter(ef,"outerRadius",0,(0,R4.getNumberValidator)());var c0={};Object.defineProperty(c0,"__esModule",{value:!0});c0.Text=void 0;c0.stringToArray=Lf;const W9=ls,qr=Mi,l0e=qs,hD=Ti,tf=ti,c0e=Ti;function Lf(n){return[...n].reduce((e,t,i,s)=>{if(/\p{Emoji}/u.test(t)){const r=s[i+1];r&&/\p{Emoji_Modifier}|\u200D/u.test(r)?(e.push(t+r),s[i+1]=""):e.push(t)}else/\p{Regional_Indicator}{2}/u.test(t+(s[i+1]||""))?e.push(t+s[i+1]):i>0&&/\p{Mn}|\p{Me}|\p{Mc}/u.test(t)?e[e.length-1]+=t:t&&e.push(t);return e},[])}const Dm="auto",d0e="center",uq="inherit",G0="justify",u0e="Change.konva",h0e="2d",RG="-",hq="left",f0e="text",g0e="Text",m0e="top",p0e="bottom",WG="middle",fq="normal",b0e="px ",ty=" ",v0e="right",AG="rtl",_0e="word",w0e="char",FG="none",fD="",gq=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],y0e=gq.length;function S0e(n){return n.split(",").map(e=>{e=e.trim();const t=e.indexOf(" ")>=0,i=e.indexOf('"')>=0||e.indexOf("'")>=0;return t&&!i&&(e=`"${e}"`),e}).join(", ")}let iy;function gD(){return iy||(iy=W9.Util.createCanvasElement().getContext(h0e),iy)}function C0e(n){n.fillText(this._partialText,this._partialTextX,this._partialTextY)}function L0e(n){n.setAttr("miterLimit",2),n.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function k0e(n){return n=n||{},!n.fillLinearGradientColorStops&&!n.fillRadialGradientColorStops&&!n.fillPatternImage&&(n.fill=n.fill||"black"),n}let ys=class extends l0e.Shape{constructor(e){super(k0e(e)),this._partialTextX=0,this._partialTextY=0;for(let t=0;t<y0e;t++)this.on(gq[t]+u0e,this._setTextData);this._setTextData()}_sceneFunc(e){const t=this.textArr,i=t.length;if(!this.text())return;let s=this.padding(),r=this.fontSize(),o=this.lineHeight()*r,a=this.verticalAlign(),l=this.direction(),c=0,d=this.align(),u=this.getWidth(),h=this.letterSpacing(),f=this.fill(),g=this.textDecoration(),m=g.indexOf("underline")!==-1,p=g.indexOf("line-through")!==-1,b;l=l===uq?e.direction:l;let w=o/2,v=WG;if(hD.Konva._fixTextRendering){const M=this.measureSize("M");v="alphabetic",w=(M.fontBoundingBoxAscent-M.fontBoundingBoxDescent)/2+o/2}var _=0,y=0;for(l===AG&&e.setAttr("direction",l),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",v),e.setAttr("textAlign",hq),a===WG?c=(this.getHeight()-i*o-s*2)/2:a===p0e&&(c=this.getHeight()-i*o-s*2),e.translate(s,c+s),b=0;b<i;b++){var _=0,y=0,C=t[b],S=C.text,k=C.width,I=C.lastInParagraph,T,D;if(e.save(),d===v0e?_+=u-k-s*2:d===d0e&&(_+=(u-k-s*2)/2),m){e.save(),e.beginPath();const W=hD.Konva._fixTextRendering?Math.round(r/4):Math.round(r/2),P=_,N=w+y+W;e.moveTo(P,N),T=S.split(" ").length-1,D=d===G0&&!I?u-s*2:k,e.lineTo(P+Math.round(D),N),e.lineWidth=r/15;const H=this._getLinearGradient();e.strokeStyle=H||f,e.stroke(),e.restore()}if(p){e.save(),e.beginPath();const W=hD.Konva._fixTextRendering?-Math.round(r/4):0;e.moveTo(_,w+y+W),T=S.split(" ").length-1,D=d===G0&&!I?u-s*2:k,e.lineTo(_+Math.round(D),w+y+W),e.lineWidth=r/15;const P=this._getLinearGradient();e.strokeStyle=P||f,e.stroke(),e.restore()}if(l!==AG&&(h!==0||d===G0)){T=S.split(" ").length-1;const W=Lf(S);for(let P=0;P<W.length;P++){const N=W[P];N===" "&&!I&&d===G0&&(_+=(u-s*2-k)/T),this._partialTextX=_,this._partialTextY=w+y,this._partialText=N,e.fillStrokeShape(this),_+=this.measureSize(N).width+h}}else h!==0&&e.setAttr("letterSpacing",`${h}px`),this._partialTextX=_,this._partialTextY=w+y,this._partialText=S,e.fillStrokeShape(this);e.restore(),i>1&&(w+=o)}}_hitFunc(e){const t=this.getWidth(),i=this.getHeight();e.beginPath(),e.rect(0,0,t,i),e.closePath(),e.fillStrokeShape(this)}setText(e){const t=W9.Util._isString(e)?e:e==null?"":e+"";return this._setAttr(f0e,t),this}getWidth(){return this.attrs.width===Dm||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===Dm||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return W9.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var t,i,s,r,o,a,l,c,d,u,h;let f=gD(),g=this.fontSize(),m;f.save(),f.font=this._getContextFont(),m=f.measureText(e),f.restore();const p=g/100;return{actualBoundingBoxAscent:(t=m.actualBoundingBoxAscent)!==null&&t!==void 0?t:71.58203125*p,actualBoundingBoxDescent:(i=m.actualBoundingBoxDescent)!==null&&i!==void 0?i:0,actualBoundingBoxLeft:(s=m.actualBoundingBoxLeft)!==null&&s!==void 0?s:-7.421875*p,actualBoundingBoxRight:(r=m.actualBoundingBoxRight)!==null&&r!==void 0?r:75.732421875*p,alphabeticBaseline:(o=m.alphabeticBaseline)!==null&&o!==void 0?o:0,emHeightAscent:(a=m.emHeightAscent)!==null&&a!==void 0?a:100*p,emHeightDescent:(l=m.emHeightDescent)!==null&&l!==void 0?l:-20*p,fontBoundingBoxAscent:(c=m.fontBoundingBoxAscent)!==null&&c!==void 0?c:91*p,fontBoundingBoxDescent:(d=m.fontBoundingBoxDescent)!==null&&d!==void 0?d:21*p,hangingBaseline:(u=m.hangingBaseline)!==null&&u!==void 0?u:72.80000305175781*p,ideographicBaseline:(h=m.ideographicBaseline)!==null&&h!==void 0?h:-21*p,width:m.width,height:g}}_getContextFont(){return this.fontStyle()+ty+this.fontVariant()+ty+(this.fontSize()+b0e)+S0e(this.fontFamily())}_addTextLine(e){this.align()===G0&&(e=e.trim());const i=this._getTextWidth(e);return this.textArr.push({text:e,width:i,lastInParagraph:!1})}_getTextWidth(e){const t=this.letterSpacing(),i=e.length;return gD().measureText(e).width+t*i}_setTextData(){let e=this.text().split(`
`),t=+this.fontSize(),i=0,s=this.lineHeight()*t,r=this.attrs.width,o=this.attrs.height,a=r!==Dm&&r!==void 0,l=o!==Dm&&o!==void 0,c=this.padding(),d=r-c*2,u=o-c*2,h=0,f=this.wrap(),g=f!==FG,m=f!==w0e&&g,p=this.ellipsis();this.textArr=[],gD().font=this._getContextFont();const b=p?this._getTextWidth(fD):0;for(let w=0,v=e.length;w<v;++w){let _=e[w],y=this._getTextWidth(_);if(a&&y>d)for(;_.length>0;){let C=0,S=Lf(_).length,k="",I=0;for(;C<S;){const T=C+S>>>1,D=Lf(_),M=D.slice(0,T+1).join(""),E=this._getTextWidth(M);(p&&l&&h+s>u?E+b:E)<=d?(C=T+1,k=M,I=E):S=T}if(k){if(m){const M=Lf(_),E=Lf(k),W=M[E.length],P=W===ty||W===RG;let N;if(P&&I<=d)N=E.length;else{const H=E.lastIndexOf(ty),U=E.lastIndexOf(RG);N=Math.max(H,U)+1}N>0&&(C=N,k=M.slice(0,C).join(""),I=this._getTextWidth(k))}if(k=k.trimRight(),this._addTextLine(k),i=Math.max(i,I),h+=s,this._shouldHandleEllipsis(h)){this._tryToAddEllipsisToLastLine();break}if(_=Lf(_).slice(C).join("").trimLeft(),_.length>0&&(y=this._getTextWidth(_),y<=d)){this._addTextLine(_),h+=s,i=Math.max(i,y);break}}else break}else this._addTextLine(_),h+=s,i=Math.max(i,y),this._shouldHandleEllipsis(h)&&w<v-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),l&&h+s>u)break}this.textHeight=t,this.textWidth=i}_shouldHandleEllipsis(e){const t=+this.fontSize(),i=this.lineHeight()*t,s=this.attrs.height,r=s!==Dm&&s!==void 0,o=this.padding(),a=s-o*2;return!(this.wrap()!==FG)||r&&e+i>a}_tryToAddEllipsisToLastLine(){const e=this.attrs.width,t=e!==Dm&&e!==void 0,i=this.padding(),s=e-i*2,r=this.ellipsis(),o=this.textArr[this.textArr.length-1];!o||!r||(t&&(this._getTextWidth(o.text+fD)<s||(o.text=o.text.slice(0,o.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(o.text+fD))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const e=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,t=this.hasShadow();return e&&t?!0:super._useBufferCanvas()}};c0.Text=ys;ys.prototype._fillFunc=C0e;ys.prototype._strokeFunc=L0e;ys.prototype.className=g0e;ys.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];(0,c0e._registerNode)(ys);qr.Factory.overWriteSetter(ys,"width",(0,tf.getNumberOrAutoValidator)());qr.Factory.overWriteSetter(ys,"height",(0,tf.getNumberOrAutoValidator)());qr.Factory.addGetterSetter(ys,"direction",uq);qr.Factory.addGetterSetter(ys,"fontFamily","Arial");qr.Factory.addGetterSetter(ys,"fontSize",12,(0,tf.getNumberValidator)());qr.Factory.addGetterSetter(ys,"fontStyle",fq);qr.Factory.addGetterSetter(ys,"fontVariant",fq);qr.Factory.addGetterSetter(ys,"padding",0,(0,tf.getNumberValidator)());qr.Factory.addGetterSetter(ys,"align",hq);qr.Factory.addGetterSetter(ys,"verticalAlign",m0e);qr.Factory.addGetterSetter(ys,"lineHeight",1,(0,tf.getNumberValidator)());qr.Factory.addGetterSetter(ys,"wrap",_0e);qr.Factory.addGetterSetter(ys,"ellipsis",!1,(0,tf.getBooleanValidator)());qr.Factory.addGetterSetter(ys,"letterSpacing",0,(0,tf.getNumberValidator)());qr.Factory.addGetterSetter(ys,"text","",(0,tf.getStringValidator)());qr.Factory.addGetterSetter(ys,"textDecoration","");var Sx={};Object.defineProperty(Sx,"__esModule",{value:!0});Sx.TextPath=void 0;const mD=ls,Ol=Mi,x0e=qs,B0=a0,pD=c0,mq=ti,T0e=Ti,D0e="",pq="normal";function bq(n){n.fillText(this.partialText,0,0)}function vq(n){n.strokeText(this.partialText,0,0)}class er extends x0e.Shape{constructor(e){super(e),this.dummyCanvas=mD.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return B0.Path.getPathLength(this.dataArray)}_getPointAtLength(e){if(!this.attrs.data)return null;const t=this.pathLength;return e-1>t?null:B0.Path.getPointAtLengthOfDataArray(e,this.dataArray)}_readDataAttribute(){this.dataArray=B0.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();const t=this.textDecoration(),i=this.fill(),s=this.fontSize(),r=this.glyphInfo;t==="underline"&&e.beginPath();for(let o=0;o<r.length;o++){e.save();const a=r[o].p0;e.translate(a.x,a.y),e.rotate(r[o].rotation),this.partialText=r[o].text,e.fillStrokeShape(this),t==="underline"&&(o===0&&e.moveTo(0,s/2+1),e.lineTo(s,s/2+1)),e.restore()}t==="underline"&&(e.strokeStyle=i,e.lineWidth=s/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();const t=this.glyphInfo;if(t.length>=1){const i=t[0].p0;e.moveTo(i.x,i.y)}for(let i=0;i<t.length;i++){const s=t[i].p1;e.lineTo(s.x,s.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return mD.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return pD.Text.prototype.setText.call(this,e)}_getContextFont(){return pD.Text.prototype._getContextFont.call(this)}_getTextSize(e){const i=this.dummyCanvas.getContext("2d");i.save(),i.font=this._getContextFont();const s=i.measureText(e);return i.restore(),{width:s.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:e,height:t}=this._getTextSize(this.attrs.text);if(this.textWidth=e,this.textHeight=t,this.glyphInfo=[],!this.attrs.data)return null;const i=this.letterSpacing(),s=this.align(),r=this.kerningFunc(),o=Math.max(this.textWidth+((this.attrs.text||"").length-1)*i,0);let a=0;s==="center"&&(a=Math.max(0,this.pathLength/2-o/2)),s==="right"&&(a=Math.max(0,this.pathLength-o));const l=(0,pD.stringToArray)(this.text());let c=a;for(let d=0;d<l.length;d++){const u=this._getPointAtLength(c);if(!u)return;let h=this._getTextSize(l[d]).width+i;if(l[d]===" "&&s==="justify"){const w=this.text().split(" ").length-1;h+=(this.pathLength-o)/w}const f=this._getPointAtLength(c+h);if(!f)return;const g=B0.Path.getLineLength(u.x,u.y,f.x,f.y);let m=0;if(r)try{m=r(l[d-1],l[d])*this.fontSize()}catch{m=0}u.x+=m,f.x+=m,this.textWidth+=m;const p=B0.Path.getPointOnLine(m+g/2,u.x,u.y,f.x,f.y),b=Math.atan2(f.y-u.y,f.x-u.x);this.glyphInfo.push({transposeX:p.x,transposeY:p.y,text:l[d],rotation:b,p0:u,p1:f}),c+=h}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const e=[];this.glyphInfo.forEach(function(c){e.push(c.p0.x),e.push(c.p0.y),e.push(c.p1.x),e.push(c.p1.y)});let t=e[0]||0,i=e[0]||0,s=e[1]||0,r=e[1]||0,o,a;for(let c=0;c<e.length/2;c++)o=e[c*2],a=e[c*2+1],t=Math.min(t,o),i=Math.max(i,o),s=Math.min(s,a),r=Math.max(r,a);const l=this.fontSize();return{x:t-l/2,y:s-l/2,width:i-t+l,height:r-s+l}}destroy(){return mD.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}Sx.TextPath=er;er.prototype._fillFunc=bq;er.prototype._strokeFunc=vq;er.prototype._fillFuncHit=bq;er.prototype._strokeFuncHit=vq;er.prototype.className="TextPath";er.prototype._attrsAffectingSize=["text","fontSize","data"];(0,T0e._registerNode)(er);Ol.Factory.addGetterSetter(er,"data");Ol.Factory.addGetterSetter(er,"fontFamily","Arial");Ol.Factory.addGetterSetter(er,"fontSize",12,(0,mq.getNumberValidator)());Ol.Factory.addGetterSetter(er,"fontStyle",pq);Ol.Factory.addGetterSetter(er,"align","left");Ol.Factory.addGetterSetter(er,"letterSpacing",0,(0,mq.getNumberValidator)());Ol.Factory.addGetterSetter(er,"textBaseline","middle");Ol.Factory.addGetterSetter(er,"fontVariant",pq);Ol.Factory.addGetterSetter(er,"text",D0e);Ol.Factory.addGetterSetter(er,"textDecoration","");Ol.Factory.addGetterSetter(er,"kerningFunc",void 0);var Cx={};Object.defineProperty(Cx,"__esModule",{value:!0});Cx.Transformer=void 0;const Cn=ls,un=Mi,VG=qn,I0e=qs,M0e=q1,PG=r0,dl=Ti,nf=ti,E0e=Ti,_q="tr-konva",N0e=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(n=>n+`.${_q}`).join(" "),OG="nodesRect",R0e=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],W0e={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},A0e="ontouchstart"in dl.Konva._global;function F0e(n,e,t){if(n==="rotater")return t;e+=Cn.Util.degToRad(W0e[n]||0);const i=(Cn.Util.radToDeg(e)%360+360)%360;return Cn.Util._inRange(i,315+22.5,360)||Cn.Util._inRange(i,0,22.5)?"ns-resize":Cn.Util._inRange(i,45-22.5,45+22.5)?"nesw-resize":Cn.Util._inRange(i,90-22.5,90+22.5)?"ew-resize":Cn.Util._inRange(i,135-22.5,135+22.5)?"nwse-resize":Cn.Util._inRange(i,180-22.5,180+22.5)?"ns-resize":Cn.Util._inRange(i,225-22.5,225+22.5)?"nesw-resize":Cn.Util._inRange(i,270-22.5,270+22.5)?"ew-resize":Cn.Util._inRange(i,315-22.5,315+22.5)?"nwse-resize":(Cn.Util.error("Transformer has unknown angle for cursor detection: "+i),"pointer")}const WC=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],ZG=1e8;function V0e(n){return{x:n.x+n.width/2*Math.cos(n.rotation)+n.height/2*Math.sin(-n.rotation),y:n.y+n.height/2*Math.cos(n.rotation)+n.width/2*Math.sin(n.rotation)}}function wq(n,e,t){const i=t.x+(n.x-t.x)*Math.cos(e)-(n.y-t.y)*Math.sin(e),s=t.y+(n.x-t.x)*Math.sin(e)+(n.y-t.y)*Math.cos(e);return{...n,rotation:n.rotation+e,x:i,y:s}}function P0e(n,e){const t=V0e(n);return wq(n,e,t)}function O0e(n,e,t){let i=e;for(let s=0;s<n.length;s++){const r=dl.Konva.getAngle(n[s]),o=Math.abs(r-e)%(Math.PI*2);Math.min(o,Math.PI*2-o)<t&&(i=r)}return i}let A9=0;class zi extends PG.Group{constructor(e){super(e),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(N0e,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return Cn.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return _q+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach();const t=e.filter(s=>s.isAncestorOf(this)?(Cn.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=e=t,e.length===1&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(s=>{const r=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(s._attrsAffectingSize.length){const o=s._attrsAffectingSize.map(a=>a+"Change."+this._getEventNamespace()).join(" ");s.on(o,r)}s.on(R0e.map(o=>o+`.${this._getEventNamespace()}`).join(" "),r),s.on(`absoluteTransformChange.${this._getEventNamespace()}`,r),this._proxyDrag(s)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(e){let t;e.on(`dragstart.${this._getEventNamespace()}`,i=>{t=e.getAbsolutePosition(),!this.isDragging()&&e!==this.findOne(".back")&&this.startDrag(i,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,i=>{if(!t)return;const s=e.getAbsolutePosition(),r=s.x-t.x,o=s.y-t.y;this.nodes().forEach(a=>{if(a===e||a.isDragging())return;const l=a.getAbsolutePosition();a.setAbsolutePosition({x:l.x+r,y:l.y+o}),a.startDrag(i)}),t=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(OG),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(OG,this.__getNodeRect)}__getNodeShape(e,t=this.rotation(),i){const s=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),r=e.getAbsoluteScale(i),o=e.getAbsolutePosition(i),a=s.x*r.x-e.offsetX()*r.x,l=s.y*r.y-e.offsetY()*r.y,c=(dl.Konva.getAngle(e.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),d={x:o.x+a*Math.cos(c)+l*Math.sin(-c),y:o.y+l*Math.cos(c)+a*Math.sin(c),width:s.width*r.x,height:s.height*r.y,rotation:c};return wq(d,-dl.Konva.getAngle(t),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-ZG,y:-ZG,width:0,height:0,rotation:0};const t=[];this.nodes().map(c=>{const d=c.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),u=[{x:d.x,y:d.y},{x:d.x+d.width,y:d.y},{x:d.x+d.width,y:d.y+d.height},{x:d.x,y:d.y+d.height}],h=c.getAbsoluteTransform();u.forEach(function(f){const g=h.point(f);t.push(g)})});const i=new Cn.Transform;i.rotate(-dl.Konva.getAngle(this.rotation()));let s=1/0,r=1/0,o=-1/0,a=-1/0;t.forEach(function(c){const d=i.point(c);s===void 0&&(s=o=d.x,r=a=d.y),s=Math.min(s,d.x),r=Math.min(r,d.y),o=Math.max(o,d.x),a=Math.max(a,d.y)}),i.invert();const l=i.point({x:s,y:r});return{x:l.x,y:l.y,width:o-s,height:a-r,rotation:dl.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),WC.forEach(e=>{this._createAnchor(e)}),this._createAnchor("rotater")}_createAnchor(e){const t=new M0e.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:A0e?10:"auto"}),i=this;t.on("mousedown touchstart",function(s){i._handleMouseDown(s)}),t.on("dragstart",s=>{t.stopDrag(),s.cancelBubble=!0}),t.on("dragend",s=>{s.cancelBubble=!0}),t.on("mouseenter",()=>{const s=dl.Konva.getAngle(this.rotation()),r=this.rotateAnchorCursor(),o=F0e(e,s,r);t.getStage().content&&(t.getStage().content.style.cursor=o),this._cursorChange=!0}),t.on("mouseout",()=>{t.getStage().content&&(t.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(t)}_createBack(){const e=new I0e.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(t,i){const s=i.getParent(),r=s.padding();t.beginPath(),t.rect(-r,-r,i.width()+r*2,i.height()+r*2),t.moveTo(i.width()/2,-r),s.rotateEnabled()&&s.rotateLineVisible()&&t.lineTo(i.width()/2,-s.rotateAnchorOffset()*Cn.Util._sign(i.height())-r),t.fillStrokeShape(i)},hitFunc:(t,i)=>{if(!this.shouldOverdrawWholeArea())return;const s=this.padding();t.beginPath(),t.rect(-s,-s,i.width()+s*2,i.height()+s*2),t.fillStrokeShape(i)}});this.add(e),this._proxyDrag(e),e.on("dragstart",t=>{t.cancelBubble=!0}),e.on("dragmove",t=>{t.cancelBubble=!0}),e.on("dragend",t=>{t.cancelBubble=!0}),this.on("dragmove",t=>{this.update()})}_handleMouseDown(e){if(this._transforming)return;this._movingAnchorName=e.target.name().split(" ")[0];const t=this._getNodeRect(),i=t.width,s=t.height,r=Math.sqrt(Math.pow(i,2)+Math.pow(s,2));this.sin=Math.abs(s/r),this.cos=Math.abs(i/r),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const o=e.target.getAbsolutePosition(),a=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:a.x-o.x,y:a.y-o.y},A9++,this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(l=>{l._fire("transformstart",{evt:e.evt,target:l})})}_handleMouseMove(e){let t,i,s;const r=this.findOne("."+this._movingAnchorName),o=r.getStage();o.setPointersPositions(e);const a=o.getPointerPosition();let l={x:a.x-this._anchorDragOffset.x,y:a.y-this._anchorDragOffset.y};const c=r.getAbsolutePosition();this.anchorDragBoundFunc()&&(l=this.anchorDragBoundFunc()(c,l,e)),r.setAbsolutePosition(l);const d=r.getAbsolutePosition();if(c.x===d.x&&c.y===d.y)return;if(this._movingAnchorName==="rotater"){const y=this._getNodeRect();t=r.x()-y.width/2,i=-r.y()+y.height/2;let C=Math.atan2(-i,t)+Math.PI/2;y.height<0&&(C-=Math.PI);const k=dl.Konva.getAngle(this.rotation())+C,I=dl.Konva.getAngle(this.rotationSnapTolerance()),D=O0e(this.rotationSnaps(),k,I)-y.rotation,M=P0e(y,D);this._fitNodesInto(M,e);return}const u=this.shiftBehavior();let h;u==="inverted"?h=this.keepRatio()&&!e.shiftKey:u==="none"?h=this.keepRatio():h=this.keepRatio()||e.shiftKey;var b=this.centeredScaling()||e.altKey;if(this._movingAnchorName==="top-left"){if(h){var f=b?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};s=Math.sqrt(Math.pow(f.x-r.x(),2)+Math.pow(f.y-r.y(),2));var g=this.findOne(".top-left").x()>f.x?-1:1,m=this.findOne(".top-left").y()>f.y?-1:1;t=s*this.cos*g,i=s*this.sin*m,this.findOne(".top-left").x(f.x-t),this.findOne(".top-left").y(f.y-i)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(r.y());else if(this._movingAnchorName==="top-right"){if(h){var f=b?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};s=Math.sqrt(Math.pow(r.x()-f.x,2)+Math.pow(f.y-r.y(),2));var g=this.findOne(".top-right").x()<f.x?-1:1,m=this.findOne(".top-right").y()>f.y?-1:1;t=s*this.cos*g,i=s*this.sin*m,this.findOne(".top-right").x(f.x+t),this.findOne(".top-right").y(f.y-i)}var p=r.position();this.findOne(".top-left").y(p.y),this.findOne(".bottom-right").x(p.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(r.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(r.x());else if(this._movingAnchorName==="bottom-left"){if(h){var f=b?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};s=Math.sqrt(Math.pow(f.x-r.x(),2)+Math.pow(r.y()-f.y,2));var g=f.x<r.x()?-1:1,m=r.y()<f.y?-1:1;t=s*this.cos*g,i=s*this.sin*m,r.x(f.x-t),r.y(f.y+i)}p=r.position(),this.findOne(".top-left").x(p.x),this.findOne(".bottom-right").y(p.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(r.y());else if(this._movingAnchorName==="bottom-right"){if(h){var f=b?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};s=Math.sqrt(Math.pow(r.x()-f.x,2)+Math.pow(r.y()-f.y,2));var g=this.findOne(".bottom-right").x()<f.x?-1:1,m=this.findOne(".bottom-right").y()<f.y?-1:1;t=s*this.cos*g,i=s*this.sin*m,this.findOne(".bottom-right").x(f.x+t),this.findOne(".bottom-right").y(f.y+i)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var b=this.centeredScaling()||e.altKey;if(b){const y=this.findOne(".top-left"),C=this.findOne(".bottom-right"),S=y.x(),k=y.y(),I=this.getWidth()-C.x(),T=this.getHeight()-C.y();C.move({x:-S,y:-k}),y.move({x:I,y:T})}const w=this.findOne(".top-left").getAbsolutePosition();t=w.x,i=w.y;const v=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),_=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:t,y:i,width:v,height:_,rotation:dl.Konva.getAngle(this.rotation())},e)}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){var t;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const i=this.getNode();A9--,this._fire("transformend",{evt:e,target:i}),(t=this.getLayer())===null||t===void 0||t.batchDraw(),i&&this._nodes.forEach(s=>{var r;s._fire("transformend",{evt:e,target:s}),(r=s.getLayer())===null||r===void 0||r.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(e,t){const i=this._getNodeRect(),s=1;if(Cn.Util._inRange(e.width,-this.padding()*2-s,s)){this.update();return}if(Cn.Util._inRange(e.height,-this.padding()*2-s,s)){this.update();return}const r=new Cn.Transform;if(r.rotate(dl.Konva.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){const h=r.point({x:-this.padding()*2,y:0});e.x+=h.x,e.y+=h.y,e.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=h.x,this._anchorDragOffset.y-=h.y}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){const h=r.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=h.x,this._anchorDragOffset.y-=h.y,e.width+=this.padding()*2}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){const h=r.point({x:0,y:-this.padding()*2});e.x+=h.x,e.y+=h.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=h.x,this._anchorDragOffset.y-=h.y,e.height+=this.padding()*2}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const h=r.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=h.x,this._anchorDragOffset.y-=h.y,e.height+=this.padding()*2}if(this.boundBoxFunc()){const h=this.boundBoxFunc()(i,e);h?e=h:Cn.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const o=1e7,a=new Cn.Transform;a.translate(i.x,i.y),a.rotate(i.rotation),a.scale(i.width/o,i.height/o);const l=new Cn.Transform,c=e.width/o,d=e.height/o;this.flipEnabled()===!1?(l.translate(e.x,e.y),l.rotate(e.rotation),l.translate(e.width<0?e.width:0,e.height<0?e.height:0),l.scale(Math.abs(c),Math.abs(d))):(l.translate(e.x,e.y),l.rotate(e.rotation),l.scale(c,d));const u=l.multiply(a.invert());this._nodes.forEach(h=>{var f;const g=h.getParent().getAbsoluteTransform(),m=h.getTransform().copy();m.translate(h.offsetX(),h.offsetY());const p=new Cn.Transform;p.multiply(g.copy().invert()).multiply(u).multiply(g).multiply(m);const b=p.decompose();h.setAttrs(b),(f=h.getLayer())===null||f===void 0||f.batchDraw()}),this.rotation(Cn.Util._getRotation(e.rotation)),this._nodes.forEach(h=>{this._fire("transform",{evt:t,target:h}),h._fire("transform",{evt:t,target:h})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,t){this.findOne(e).setAttrs(t)}update(){var e;const t=this._getNodeRect();this.rotation(Cn.Util._getRotation(t.rotation));const i=t.width,s=t.height,r=this.enabledAnchors(),o=this.resizeEnabled(),a=this.padding(),l=this.anchorSize(),c=this.find("._anchor");c.forEach(u=>{u.setAttrs({width:l,height:l,offsetX:l/2,offsetY:l/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:l/2+a,offsetY:l/2+a,visible:o&&r.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:i/2,y:0,offsetY:l/2+a,visible:o&&r.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:i,y:0,offsetX:l/2-a,offsetY:l/2+a,visible:o&&r.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:s/2,offsetX:l/2+a,visible:o&&r.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:i,y:s/2,offsetX:l/2-a,visible:o&&r.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:s,offsetX:l/2+a,offsetY:l/2-a,visible:o&&r.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:i/2,y:s,offsetY:l/2-a,visible:o&&r.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:i,y:s,offsetX:l/2-a,offsetY:l/2-a,visible:o&&r.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:i/2,y:-this.rotateAnchorOffset()*Cn.Util._sign(s)-a,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:i,height:s,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const d=this.anchorStyleFunc();d&&c.forEach(u=>{d(u)}),(e=this.getLayer())===null||e===void 0||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),PG.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return VG.Node.prototype.toObject.call(this)}clone(e){return VG.Node.prototype.clone.call(this,e)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}Cx.Transformer=zi;zi.isTransforming=()=>A9>0;function Z0e(n){return n instanceof Array||Cn.Util.warn("enabledAnchors value should be an array"),n instanceof Array&&n.forEach(function(e){WC.indexOf(e)===-1&&Cn.Util.warn("Unknown anchor name: "+e+". Available names are: "+WC.join(", "))}),n||[]}zi.prototype.className="Transformer";(0,E0e._registerNode)(zi);un.Factory.addGetterSetter(zi,"enabledAnchors",WC,Z0e);un.Factory.addGetterSetter(zi,"flipEnabled",!0,(0,nf.getBooleanValidator)());un.Factory.addGetterSetter(zi,"resizeEnabled",!0);un.Factory.addGetterSetter(zi,"anchorSize",10,(0,nf.getNumberValidator)());un.Factory.addGetterSetter(zi,"rotateEnabled",!0);un.Factory.addGetterSetter(zi,"rotateLineVisible",!0);un.Factory.addGetterSetter(zi,"rotationSnaps",[]);un.Factory.addGetterSetter(zi,"rotateAnchorOffset",50,(0,nf.getNumberValidator)());un.Factory.addGetterSetter(zi,"rotateAnchorCursor","crosshair");un.Factory.addGetterSetter(zi,"rotationSnapTolerance",5,(0,nf.getNumberValidator)());un.Factory.addGetterSetter(zi,"borderEnabled",!0);un.Factory.addGetterSetter(zi,"anchorStroke","rgb(0, 161, 255)");un.Factory.addGetterSetter(zi,"anchorStrokeWidth",1,(0,nf.getNumberValidator)());un.Factory.addGetterSetter(zi,"anchorFill","white");un.Factory.addGetterSetter(zi,"anchorCornerRadius",0,(0,nf.getNumberValidator)());un.Factory.addGetterSetter(zi,"borderStroke","rgb(0, 161, 255)");un.Factory.addGetterSetter(zi,"borderStrokeWidth",1,(0,nf.getNumberValidator)());un.Factory.addGetterSetter(zi,"borderDash");un.Factory.addGetterSetter(zi,"keepRatio",!0);un.Factory.addGetterSetter(zi,"shiftBehavior","default");un.Factory.addGetterSetter(zi,"centeredScaling",!1);un.Factory.addGetterSetter(zi,"ignoreStroke",!1);un.Factory.addGetterSetter(zi,"padding",0,(0,nf.getNumberValidator)());un.Factory.addGetterSetter(zi,"nodes");un.Factory.addGetterSetter(zi,"node");un.Factory.addGetterSetter(zi,"boundBoxFunc");un.Factory.addGetterSetter(zi,"anchorDragBoundFunc");un.Factory.addGetterSetter(zi,"anchorStyleFunc");un.Factory.addGetterSetter(zi,"shouldOverdrawWholeArea",!1);un.Factory.addGetterSetter(zi,"useSingleNodeRotation",!0);un.Factory.backCompat(zi,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});var Lx={};Object.defineProperty(Lx,"__esModule",{value:!0});Lx.Wedge=void 0;const kx=Mi,G0e=qs,B0e=Ti,yq=ti,X0e=Ti;class ru extends G0e.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,B0e.Konva.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}Lx.Wedge=ru;ru.prototype.className="Wedge";ru.prototype._centroid=!0;ru.prototype._attrsAffectingSize=["radius"];(0,X0e._registerNode)(ru);kx.Factory.addGetterSetter(ru,"radius",0,(0,yq.getNumberValidator)());kx.Factory.addGetterSetter(ru,"angle",0,(0,yq.getNumberValidator)());kx.Factory.addGetterSetter(ru,"clockwise",!1);kx.Factory.backCompat(ru,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var xx={};Object.defineProperty(xx,"__esModule",{value:!0});xx.Blur=void 0;const GG=Mi,z0e=qn,H0e=ti;function BG(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const U0e=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Y0e=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function K0e(n,e){const t=n.data,i=n.width,s=n.height;let r,o,a,l,c,d,u,h,f,g,m,p,b,w,v,_,y,C,S,k,I,T,D,M;const E=e+e+1,W=i-1,P=s-1,N=e+1,H=N*(N+1)/2,U=new BG,B=U0e[e],Y=Y0e[e];let ne=null,ee=U,$=null,ge=null;for(a=1;a<E;a++)ee=ee.next=new BG,a===N&&(ne=ee);for(ee.next=U,u=d=0,o=0;o<s;o++){for(_=y=C=S=h=f=g=m=0,p=N*(k=t[d]),b=N*(I=t[d+1]),w=N*(T=t[d+2]),v=N*(D=t[d+3]),h+=H*k,f+=H*I,g+=H*T,m+=H*D,ee=U,a=0;a<N;a++)ee.r=k,ee.g=I,ee.b=T,ee.a=D,ee=ee.next;for(a=1;a<N;a++)l=d+((W<a?W:a)<<2),h+=(ee.r=k=t[l])*(M=N-a),f+=(ee.g=I=t[l+1])*M,g+=(ee.b=T=t[l+2])*M,m+=(ee.a=D=t[l+3])*M,_+=k,y+=I,C+=T,S+=D,ee=ee.next;for($=U,ge=ne,r=0;r<i;r++)t[d+3]=D=m*B>>Y,D!==0?(D=255/D,t[d]=(h*B>>Y)*D,t[d+1]=(f*B>>Y)*D,t[d+2]=(g*B>>Y)*D):t[d]=t[d+1]=t[d+2]=0,h-=p,f-=b,g-=w,m-=v,p-=$.r,b-=$.g,w-=$.b,v-=$.a,l=u+((l=r+e+1)<W?l:W)<<2,_+=$.r=t[l],y+=$.g=t[l+1],C+=$.b=t[l+2],S+=$.a=t[l+3],h+=_,f+=y,g+=C,m+=S,$=$.next,p+=k=ge.r,b+=I=ge.g,w+=T=ge.b,v+=D=ge.a,_-=k,y-=I,C-=T,S-=D,ge=ge.next,d+=4;u+=i}for(r=0;r<i;r++){for(y=C=S=_=f=g=m=h=0,d=r<<2,p=N*(k=t[d]),b=N*(I=t[d+1]),w=N*(T=t[d+2]),v=N*(D=t[d+3]),h+=H*k,f+=H*I,g+=H*T,m+=H*D,ee=U,a=0;a<N;a++)ee.r=k,ee.g=I,ee.b=T,ee.a=D,ee=ee.next;for(c=i,a=1;a<=e;a++)d=c+r<<2,h+=(ee.r=k=t[d])*(M=N-a),f+=(ee.g=I=t[d+1])*M,g+=(ee.b=T=t[d+2])*M,m+=(ee.a=D=t[d+3])*M,_+=k,y+=I,C+=T,S+=D,ee=ee.next,a<P&&(c+=i);for(d=r,$=U,ge=ne,o=0;o<s;o++)l=d<<2,t[l+3]=D=m*B>>Y,D>0?(D=255/D,t[l]=(h*B>>Y)*D,t[l+1]=(f*B>>Y)*D,t[l+2]=(g*B>>Y)*D):t[l]=t[l+1]=t[l+2]=0,h-=p,f-=b,g-=w,m-=v,p-=$.r,b-=$.g,w-=$.b,v-=$.a,l=r+((l=o+N)<P?l:P)*i<<2,h+=_+=$.r=t[l],f+=y+=$.g=t[l+1],g+=C+=$.b=t[l+2],m+=S+=$.a=t[l+3],$=$.next,p+=k=ge.r,b+=I=ge.g,w+=T=ge.b,v+=D=ge.a,_-=k,y-=I,C-=T,S-=D,ge=ge.next,d+=i}}const j0e=function(e){const t=Math.round(this.blurRadius());t>0&&K0e(e,t)};xx.Blur=j0e;GG.Factory.addGetterSetter(z0e.Node,"blurRadius",0,(0,H0e.getNumberValidator)(),GG.Factory.afterSetFilter);var Tx={};Object.defineProperty(Tx,"__esModule",{value:!0});Tx.Brighten=void 0;const XG=Mi,J0e=qn,$0e=ti,Q0e=function(n){const e=this.brightness()*255,t=n.data,i=t.length;for(let s=0;s<i;s+=4)t[s]+=e,t[s+1]+=e,t[s+2]+=e};Tx.Brighten=Q0e;XG.Factory.addGetterSetter(J0e.Node,"brightness",0,(0,$0e.getNumberValidator)(),XG.Factory.afterSetFilter);var Dx={};Object.defineProperty(Dx,"__esModule",{value:!0});Dx.Contrast=void 0;const zG=Mi,q0e=qn,eve=ti,tve=function(n){const e=Math.pow((this.contrast()+100)/100,2),t=n.data,i=t.length;let s=150,r=150,o=150;for(let a=0;a<i;a+=4)s=t[a],r=t[a+1],o=t[a+2],s/=255,s-=.5,s*=e,s+=.5,s*=255,r/=255,r-=.5,r*=e,r+=.5,r*=255,o/=255,o-=.5,o*=e,o+=.5,o*=255,s=s<0?0:s>255?255:s,r=r<0?0:r>255?255:r,o=o<0?0:o>255?255:o,t[a]=s,t[a+1]=r,t[a+2]=o};Dx.Contrast=tve;zG.Factory.addGetterSetter(q0e.Node,"contrast",0,(0,eve.getNumberValidator)(),zG.Factory.afterSetFilter);var Ix={};Object.defineProperty(Ix,"__esModule",{value:!0});Ix.Emboss=void 0;const Ih=Mi,Mx=qn,ive=ls,Sq=ti,nve=function(n){const e=this.embossStrength()*10,t=this.embossWhiteLevel()*255,i=this.embossDirection(),s=this.embossBlend(),r=n.data,o=n.width,a=n.height,l=o*4;let c=0,d=0,u=a;switch(i){case"top-left":c=-1,d=-1;break;case"top":c=-1,d=0;break;case"top-right":c=-1,d=1;break;case"right":c=0,d=1;break;case"bottom-right":c=1,d=1;break;case"bottom":c=1,d=0;break;case"bottom-left":c=1,d=-1;break;case"left":c=0,d=-1;break;default:ive.Util.error("Unknown emboss direction: "+i)}do{const h=(u-1)*l;let f=c;u+f<1&&(f=0),u+f>a&&(f=0);const g=(u-1+f)*o*4;let m=o;do{const p=h+(m-1)*4;let b=d;m+b<1&&(b=0),m+b>o&&(b=0);const w=g+(m-1+b)*4,v=r[p]-r[w],_=r[p+1]-r[w+1],y=r[p+2]-r[w+2];let C=v;const S=C>0?C:-C,k=_>0?_:-_,I=y>0?y:-y;if(k>S&&(C=_),I>S&&(C=y),C*=e,s){const T=r[p]+C,D=r[p+1]+C,M=r[p+2]+C;r[p]=T>255?255:T<0?0:T,r[p+1]=D>255?255:D<0?0:D,r[p+2]=M>255?255:M<0?0:M}else{let T=t-C;T<0?T=0:T>255&&(T=255),r[p]=r[p+1]=r[p+2]=T}}while(--m)}while(--u)};Ix.Emboss=nve;Ih.Factory.addGetterSetter(Mx.Node,"embossStrength",.5,(0,Sq.getNumberValidator)(),Ih.Factory.afterSetFilter);Ih.Factory.addGetterSetter(Mx.Node,"embossWhiteLevel",.5,(0,Sq.getNumberValidator)(),Ih.Factory.afterSetFilter);Ih.Factory.addGetterSetter(Mx.Node,"embossDirection","top-left",void 0,Ih.Factory.afterSetFilter);Ih.Factory.addGetterSetter(Mx.Node,"embossBlend",!1,void 0,Ih.Factory.afterSetFilter);var Ex={};Object.defineProperty(Ex,"__esModule",{value:!0});Ex.Enhance=void 0;const HG=Mi,sve=qn,rve=ti;function bD(n,e,t,i,s){const r=t-e,o=s-i;if(r===0)return i+o/2;if(o===0)return i;let a=(n-e)/r;return a=o*a+i,a}const ove=function(n){const e=n.data,t=e.length;let i=e[0],s=i,r,o=e[1],a=o,l,c=e[2],d=c,u;const h=this.enhance();if(h===0)return;for(let C=0;C<t;C+=4)r=e[C+0],r<i?i=r:r>s&&(s=r),l=e[C+1],l<o?o=l:l>a&&(a=l),u=e[C+2],u<c?c=u:u>d&&(d=u);s===i&&(s=255,i=0),a===o&&(a=255,o=0),d===c&&(d=255,c=0);let f,g,m,p,b,w,v,_,y;h>0?(g=s+h*(255-s),m=i-h*(i-0),b=a+h*(255-a),w=o-h*(o-0),_=d+h*(255-d),y=c-h*(c-0)):(f=(s+i)*.5,g=s+h*(s-f),m=i+h*(i-f),p=(a+o)*.5,b=a+h*(a-p),w=o+h*(o-p),v=(d+c)*.5,_=d+h*(d-v),y=c+h*(c-v));for(let C=0;C<t;C+=4)e[C+0]=bD(e[C+0],i,s,m,g),e[C+1]=bD(e[C+1],o,a,w,b),e[C+2]=bD(e[C+2],c,d,y,_)};Ex.Enhance=ove;HG.Factory.addGetterSetter(sve.Node,"enhance",0,(0,rve.getNumberValidator)(),HG.Factory.afterSetFilter);var Nx={};Object.defineProperty(Nx,"__esModule",{value:!0});Nx.Grayscale=void 0;const ave=function(n){const e=n.data,t=e.length;for(let i=0;i<t;i+=4){const s=.34*e[i]+.5*e[i+1]+.16*e[i+2];e[i]=s,e[i+1]=s,e[i+2]=s}};Nx.Grayscale=ave;var Rx={};Object.defineProperty(Rx,"__esModule",{value:!0});Rx.HSL=void 0;const pb=Mi,W4=qn,A4=ti;pb.Factory.addGetterSetter(W4.Node,"hue",0,(0,A4.getNumberValidator)(),pb.Factory.afterSetFilter);pb.Factory.addGetterSetter(W4.Node,"saturation",0,(0,A4.getNumberValidator)(),pb.Factory.afterSetFilter);pb.Factory.addGetterSetter(W4.Node,"luminance",0,(0,A4.getNumberValidator)(),pb.Factory.afterSetFilter);const lve=function(n){const e=n.data,t=e.length,i=1,s=Math.pow(2,this.saturation()),r=Math.abs(this.hue()+360)%360,o=this.luminance()*127,a=i*s*Math.cos(r*Math.PI/180),l=i*s*Math.sin(r*Math.PI/180),c=.299*i+.701*a+.167*l,d=.587*i-.587*a+.33*l,u=.114*i-.114*a-.497*l,h=.299*i-.299*a-.328*l,f=.587*i+.413*a+.035*l,g=.114*i-.114*a+.293*l,m=.299*i-.3*a+1.25*l,p=.587*i-.586*a-1.05*l,b=.114*i+.886*a-.2*l;let w,v,_,y;for(let C=0;C<t;C+=4)w=e[C+0],v=e[C+1],_=e[C+2],y=e[C+3],e[C+0]=c*w+d*v+u*_+o,e[C+1]=h*w+f*v+g*_+o,e[C+2]=m*w+p*v+b*_+o,e[C+3]=y};Rx.HSL=lve;var Wx={};Object.defineProperty(Wx,"__esModule",{value:!0});Wx.HSV=void 0;const bb=Mi,F4=qn,V4=ti,cve=function(n){const e=n.data,t=e.length,i=Math.pow(2,this.value()),s=Math.pow(2,this.saturation()),r=Math.abs(this.hue()+360)%360,o=i*s*Math.cos(r*Math.PI/180),a=i*s*Math.sin(r*Math.PI/180),l=.299*i+.701*o+.167*a,c=.587*i-.587*o+.33*a,d=.114*i-.114*o-.497*a,u=.299*i-.299*o-.328*a,h=.587*i+.413*o+.035*a,f=.114*i-.114*o+.293*a,g=.299*i-.3*o+1.25*a,m=.587*i-.586*o-1.05*a,p=.114*i+.886*o-.2*a;let b,w,v,_;for(let y=0;y<t;y+=4)b=e[y+0],w=e[y+1],v=e[y+2],_=e[y+3],e[y+0]=l*b+c*w+d*v,e[y+1]=u*b+h*w+f*v,e[y+2]=g*b+m*w+p*v,e[y+3]=_};Wx.HSV=cve;bb.Factory.addGetterSetter(F4.Node,"hue",0,(0,V4.getNumberValidator)(),bb.Factory.afterSetFilter);bb.Factory.addGetterSetter(F4.Node,"saturation",0,(0,V4.getNumberValidator)(),bb.Factory.afterSetFilter);bb.Factory.addGetterSetter(F4.Node,"value",0,(0,V4.getNumberValidator)(),bb.Factory.afterSetFilter);var Ax={};Object.defineProperty(Ax,"__esModule",{value:!0});Ax.Invert=void 0;const dve=function(n){const e=n.data,t=e.length;for(let i=0;i<t;i+=4)e[i]=255-e[i],e[i+1]=255-e[i+1],e[i+2]=255-e[i+2]};Ax.Invert=dve;var Fx={};Object.defineProperty(Fx,"__esModule",{value:!0});Fx.Kaleidoscope=void 0;const AC=Mi,Cq=qn,UG=ls,Lq=ti,uve=function(n,e,t){const i=n.data,s=e.data,r=n.width,o=n.height,a=t.polarCenterX||r/2,l=t.polarCenterY||o/2;let c=Math.sqrt(a*a+l*l),d=r-a,u=o-l;const h=Math.sqrt(d*d+u*u);c=h>c?h:c;const f=o,g=r,m=360/g*Math.PI/180;for(let p=0;p<g;p+=1){const b=Math.sin(p*m),w=Math.cos(p*m);for(let v=0;v<f;v+=1){d=Math.floor(a+c*v/f*w),u=Math.floor(l+c*v/f*b);let _=(u*r+d)*4;const y=i[_+0],C=i[_+1],S=i[_+2],k=i[_+3];_=(p+v*r)*4,s[_+0]=y,s[_+1]=C,s[_+2]=S,s[_+3]=k}}},hve=function(n,e,t){const i=n.data,s=e.data,r=n.width,o=n.height,a=t.polarCenterX||r/2,l=t.polarCenterY||o/2;let c=Math.sqrt(a*a+l*l),d=r-a,u=o-l;const h=Math.sqrt(d*d+u*u);c=h>c?h:c;const f=o,g=r,m=t.polarRotation||0;let p,b;for(d=0;d<r;d+=1)for(u=0;u<o;u+=1){const w=d-a,v=u-l,_=Math.sqrt(w*w+v*v)*f/c;let y=(Math.atan2(v,w)*180/Math.PI+360+m)%360;y=y*g/360,p=Math.floor(y),b=Math.floor(_);let C=(b*r+p)*4;const S=i[C+0],k=i[C+1],I=i[C+2],T=i[C+3];C=(u*r+d)*4,s[C+0]=S,s[C+1]=k,s[C+2]=I,s[C+3]=T}},fve=function(n){const e=n.width,t=n.height;let i,s,r,o,a,l,c,d,u,h,f=Math.round(this.kaleidoscopePower());const g=Math.round(this.kaleidoscopeAngle()),m=Math.floor(e*(g%360)/360);if(f<1)return;const p=UG.Util.createCanvasElement();p.width=e,p.height=t;const b=p.getContext("2d").getImageData(0,0,e,t);UG.Util.releaseCanvas(p),uve(n,b,{polarCenterX:e/2,polarCenterY:t/2});let w=e/Math.pow(2,f);for(;w<=8;)w=w*2,f-=1;w=Math.ceil(w);let v=w,_=0,y=v,C=1;for(m+w>e&&(_=v,y=0,C=-1),s=0;s<t;s+=1)for(i=_;i!==y;i+=C)r=Math.round(i+m)%e,u=(e*s+r)*4,a=b.data[u+0],l=b.data[u+1],c=b.data[u+2],d=b.data[u+3],h=(e*s+i)*4,b.data[h+0]=a,b.data[h+1]=l,b.data[h+2]=c,b.data[h+3]=d;for(s=0;s<t;s+=1)for(v=Math.floor(w),o=0;o<f;o+=1){for(i=0;i<v+1;i+=1)u=(e*s+i)*4,a=b.data[u+0],l=b.data[u+1],c=b.data[u+2],d=b.data[u+3],h=(e*s+v*2-i-1)*4,b.data[h+0]=a,b.data[h+1]=l,b.data[h+2]=c,b.data[h+3]=d;v*=2}hve(b,n,{polarRotation:0})};Fx.Kaleidoscope=fve;AC.Factory.addGetterSetter(Cq.Node,"kaleidoscopePower",2,(0,Lq.getNumberValidator)(),AC.Factory.afterSetFilter);AC.Factory.addGetterSetter(Cq.Node,"kaleidoscopeAngle",0,(0,Lq.getNumberValidator)(),AC.Factory.afterSetFilter);var Vx={};Object.defineProperty(Vx,"__esModule",{value:!0});Vx.Mask=void 0;const YG=Mi,gve=qn,mve=ti;function ny(n,e,t){let i=(t*n.width+e)*4;const s=[];return s.push(n.data[i++],n.data[i++],n.data[i++],n.data[i++]),s}function X0(n,e){return Math.sqrt(Math.pow(n[0]-e[0],2)+Math.pow(n[1]-e[1],2)+Math.pow(n[2]-e[2],2))}function pve(n){const e=[0,0,0];for(let t=0;t<n.length;t++)e[0]+=n[t][0],e[1]+=n[t][1],e[2]+=n[t][2];return e[0]/=n.length,e[1]/=n.length,e[2]/=n.length,e}function bve(n,e){const t=ny(n,0,0),i=ny(n,n.width-1,0),s=ny(n,0,n.height-1),r=ny(n,n.width-1,n.height-1),o=e||10;if(X0(t,i)<o&&X0(i,r)<o&&X0(r,s)<o&&X0(s,t)<o){const a=pve([i,t,r,s]),l=[];for(let c=0;c<n.width*n.height;c++){const d=X0(a,[n.data[c*4],n.data[c*4+1],n.data[c*4+2]]);l[c]=d<o?0:255}return l}}function vve(n,e){for(let t=0;t<n.width*n.height;t++)n.data[4*t+3]=e[t]}function _ve(n,e,t){const i=[1,1,1,1,0,1,1,1,1],s=Math.round(Math.sqrt(i.length)),r=Math.floor(s/2),o=[];for(let a=0;a<t;a++)for(let l=0;l<e;l++){const c=a*e+l;let d=0;for(let u=0;u<s;u++)for(let h=0;h<s;h++){const f=a+u-r,g=l+h-r;if(f>=0&&f<t&&g>=0&&g<e){const m=f*e+g,p=i[u*s+h];d+=n[m]*p}}o[c]=d===255*8?255:0}return o}function wve(n,e,t){const i=[1,1,1,1,1,1,1,1,1],s=Math.round(Math.sqrt(i.length)),r=Math.floor(s/2),o=[];for(let a=0;a<t;a++)for(let l=0;l<e;l++){const c=a*e+l;let d=0;for(let u=0;u<s;u++)for(let h=0;h<s;h++){const f=a+u-r,g=l+h-r;if(f>=0&&f<t&&g>=0&&g<e){const m=f*e+g,p=i[u*s+h];d+=n[m]*p}}o[c]=d>=255*4?255:0}return o}function yve(n,e,t){const i=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],s=Math.round(Math.sqrt(i.length)),r=Math.floor(s/2),o=[];for(let a=0;a<t;a++)for(let l=0;l<e;l++){const c=a*e+l;let d=0;for(let u=0;u<s;u++)for(let h=0;h<s;h++){const f=a+u-r,g=l+h-r;if(f>=0&&f<t&&g>=0&&g<e){const m=f*e+g,p=i[u*s+h];d+=n[m]*p}}o[c]=d}return o}const Sve=function(n){const e=this.threshold();let t=bve(n,e);return t&&(t=_ve(t,n.width,n.height),t=wve(t,n.width,n.height),t=yve(t,n.width,n.height),vve(n,t)),n};Vx.Mask=Sve;YG.Factory.addGetterSetter(gve.Node,"threshold",0,(0,mve.getNumberValidator)(),YG.Factory.afterSetFilter);var Px={};Object.defineProperty(Px,"__esModule",{value:!0});Px.Noise=void 0;const KG=Mi,Cve=qn,Lve=ti,kve=function(n){const e=this.noise()*255,t=n.data,i=t.length,s=e/2;for(let r=0;r<i;r+=4)t[r+0]+=s-2*s*Math.random(),t[r+1]+=s-2*s*Math.random(),t[r+2]+=s-2*s*Math.random()};Px.Noise=kve;KG.Factory.addGetterSetter(Cve.Node,"noise",.2,(0,Lve.getNumberValidator)(),KG.Factory.afterSetFilter);var Ox={};Object.defineProperty(Ox,"__esModule",{value:!0});Ox.Pixelate=void 0;const jG=Mi,xve=ls,Tve=qn,Dve=ti,Ive=function(n){let e=Math.ceil(this.pixelSize()),t=n.width,i=n.height,s,r,o,a,l,c,d,u=Math.ceil(t/e),h=Math.ceil(i/e),f,g,m,p,b,w,v,_=n.data;if(e<=0){xve.Util.error("pixelSize value can not be <= 0");return}for(b=0;b<u;b+=1)for(w=0;w<h;w+=1){for(a=0,l=0,c=0,d=0,f=b*e,g=f+e,m=w*e,p=m+e,v=0,s=f;s<g;s+=1)if(!(s>=t))for(r=m;r<p;r+=1)r>=i||(o=(t*r+s)*4,a+=_[o+0],l+=_[o+1],c+=_[o+2],d+=_[o+3],v+=1);for(a=a/v,l=l/v,c=c/v,d=d/v,s=f;s<g;s+=1)if(!(s>=t))for(r=m;r<p;r+=1)r>=i||(o=(t*r+s)*4,_[o+0]=a,_[o+1]=l,_[o+2]=c,_[o+3]=d)}};Ox.Pixelate=Ive;jG.Factory.addGetterSetter(Tve.Node,"pixelSize",8,(0,Dve.getNumberValidator)(),jG.Factory.afterSetFilter);var Zx={};Object.defineProperty(Zx,"__esModule",{value:!0});Zx.Posterize=void 0;const JG=Mi,Mve=qn,Eve=ti,Nve=function(n){const e=Math.round(this.levels()*254)+1,t=n.data,i=t.length,s=255/e;for(let r=0;r<i;r+=1)t[r]=Math.floor(t[r]/s)*s};Zx.Posterize=Nve;JG.Factory.addGetterSetter(Mve.Node,"levels",.5,(0,Eve.getNumberValidator)(),JG.Factory.afterSetFilter);var Gx={};Object.defineProperty(Gx,"__esModule",{value:!0});Gx.RGB=void 0;const FC=Mi,P4=qn,Rve=ti,Wve=function(n){const e=n.data,t=e.length,i=this.red(),s=this.green(),r=this.blue();for(let o=0;o<t;o+=4){const a=(.34*e[o]+.5*e[o+1]+.16*e[o+2])/255;e[o]=a*i,e[o+1]=a*s,e[o+2]=a*r,e[o+3]=e[o+3]}};Gx.RGB=Wve;FC.Factory.addGetterSetter(P4.Node,"red",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});FC.Factory.addGetterSetter(P4.Node,"green",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});FC.Factory.addGetterSetter(P4.Node,"blue",0,Rve.RGBComponent,FC.Factory.afterSetFilter);var Bx={};Object.defineProperty(Bx,"__esModule",{value:!0});Bx.RGBA=void 0;const N_=Mi,Xx=qn,Ave=ti,Fve=function(n){const e=n.data,t=e.length,i=this.red(),s=this.green(),r=this.blue(),o=this.alpha();for(let a=0;a<t;a+=4){const l=1-o;e[a]=i*o+e[a]*l,e[a+1]=s*o+e[a+1]*l,e[a+2]=r*o+e[a+2]*l}};Bx.RGBA=Fve;N_.Factory.addGetterSetter(Xx.Node,"red",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});N_.Factory.addGetterSetter(Xx.Node,"green",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});N_.Factory.addGetterSetter(Xx.Node,"blue",0,Ave.RGBComponent,N_.Factory.afterSetFilter);N_.Factory.addGetterSetter(Xx.Node,"alpha",1,function(n){return this._filterUpToDate=!1,n>1?1:n<0?0:n});var zx={};Object.defineProperty(zx,"__esModule",{value:!0});zx.Sepia=void 0;const Vve=function(n){const e=n.data,t=e.length;for(let i=0;i<t;i+=4){const s=e[i+0],r=e[i+1],o=e[i+2];e[i+0]=Math.min(255,s*.393+r*.769+o*.189),e[i+1]=Math.min(255,s*.349+r*.686+o*.168),e[i+2]=Math.min(255,s*.272+r*.534+o*.131)}};zx.Sepia=Vve;var Hx={};Object.defineProperty(Hx,"__esModule",{value:!0});Hx.Solarize=void 0;const Pve=function(n){const e=n.data,t=n.width,i=n.height,s=t*4;let r=i;do{const o=(r-1)*s;let a=t;do{const l=o+(a-1)*4;let c=e[l],d=e[l+1],u=e[l+2];c>127&&(c=255-c),d>127&&(d=255-d),u>127&&(u=255-u),e[l]=c,e[l+1]=d,e[l+2]=u}while(--a)}while(--r)};Hx.Solarize=Pve;var Ux={};Object.defineProperty(Ux,"__esModule",{value:!0});Ux.Threshold=void 0;const $G=Mi,Ove=qn,Zve=ti,Gve=function(n){const e=this.threshold()*255,t=n.data,i=t.length;for(let s=0;s<i;s+=1)t[s]=t[s]<e?0:255};Ux.Threshold=Gve;$G.Factory.addGetterSetter(Ove.Node,"threshold",.5,(0,Zve.getNumberValidator)(),$G.Factory.afterSetFilter);Object.defineProperty(ix,"__esModule",{value:!0});ix.Konva=void 0;const QG=HQ,Bve=ax,Xve=dx,zve=fx,Hve=gx,Uve=mx,qG=mb,Yve=$1,Kve=a0,jve=q1,Jve=vx,$ve=_x,Qve=wx,qve=yx,e_e=c0,t_e=Sx,i_e=Cx,n_e=Lx,s_e=xx,r_e=Tx,o_e=Dx,a_e=Ix,l_e=Ex,c_e=Nx,d_e=Rx,u_e=Wx,h_e=Ax,f_e=Fx,g_e=Vx,m_e=Px,p_e=Ox,b_e=Zx,v_e=Gx,__e=Bx,w_e=zx,y_e=Hx,S_e=Ux;ix.Konva=QG.Konva.Util._assign(QG.Konva,{Arc:Bve.Arc,Arrow:Xve.Arrow,Circle:zve.Circle,Ellipse:Hve.Ellipse,Image:Uve.Image,Label:qG.Label,Tag:qG.Tag,Line:Yve.Line,Path:Kve.Path,Rect:jve.Rect,RegularPolygon:Jve.RegularPolygon,Ring:$ve.Ring,Sprite:Qve.Sprite,Star:qve.Star,Text:e_e.Text,TextPath:t_e.TextPath,Transformer:i_e.Transformer,Wedge:n_e.Wedge,Filters:{Blur:s_e.Blur,Brighten:r_e.Brighten,Contrast:o_e.Contrast,Emboss:a_e.Emboss,Enhance:l_e.Enhance,Grayscale:c_e.Grayscale,HSL:d_e.HSL,HSV:u_e.HSV,Invert:h_e.Invert,Kaleidoscope:f_e.Kaleidoscope,Mask:g_e.Mask,Noise:m_e.Noise,Pixelate:p_e.Pixelate,Posterize:b_e.Posterize,RGB:v_e.RGB,RGBA:__e.RGBA,Sepia:w_e.Sepia,Solarize:y_e.Solarize,Threshold:S_e.Threshold}});var C_e=C4.exports;Object.defineProperty(C_e,"__esModule",{value:!0});const L_e=ix;C4.exports=L_e.Konva;var k_e=C4.exports;const ur=qk(k_e);function O4(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var vD,e7;function x_e(){if(e7)return vD;e7=1;function n(){this.__data__=[],this.size=0}return vD=n,vD}var _D,t7;function d0(){if(t7)return _D;t7=1;function n(e,t){return e===t||e!==e&&t!==t}return _D=n,_D}var wD,i7;function Yx(){if(i7)return wD;i7=1;var n=d0();function e(t,i){for(var s=t.length;s--;)if(n(t[s][0],i))return s;return-1}return wD=e,wD}var yD,n7;function T_e(){if(n7)return yD;n7=1;var n=Yx(),e=Array.prototype,t=e.splice;function i(s){var r=this.__data__,o=n(r,s);if(o<0)return!1;var a=r.length-1;return o==a?r.pop():t.call(r,o,1),--this.size,!0}return yD=i,yD}var SD,s7;function D_e(){if(s7)return SD;s7=1;var n=Yx();function e(t){var i=this.__data__,s=n(i,t);return s<0?void 0:i[s][1]}return SD=e,SD}var CD,r7;function I_e(){if(r7)return CD;r7=1;var n=Yx();function e(t){return n(this.__data__,t)>-1}return CD=e,CD}var LD,o7;function M_e(){if(o7)return LD;o7=1;var n=Yx();function e(t,i){var s=this.__data__,r=n(s,t);return r<0?(++this.size,s.push([t,i])):s[r][1]=i,this}return LD=e,LD}var kD,a7;function Kx(){if(a7)return kD;a7=1;var n=x_e(),e=T_e(),t=D_e(),i=I_e(),s=M_e();function r(o){var a=-1,l=o==null?0:o.length;for(this.clear();++a<l;){var c=o[a];this.set(c[0],c[1])}}return r.prototype.clear=n,r.prototype.delete=e,r.prototype.get=t,r.prototype.has=i,r.prototype.set=s,kD=r,kD}var xD,l7;function E_e(){if(l7)return xD;l7=1;var n=Kx();function e(){this.__data__=new n,this.size=0}return xD=e,xD}var TD,c7;function N_e(){if(c7)return TD;c7=1;function n(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}return TD=n,TD}var DD,d7;function R_e(){if(d7)return DD;d7=1;function n(e){return this.__data__.get(e)}return DD=n,DD}var ID,u7;function W_e(){if(u7)return ID;u7=1;function n(e){return this.__data__.has(e)}return ID=n,ID}var MD,h7;function kq(){if(h7)return MD;h7=1;var n=typeof vc=="object"&&vc&&vc.Object===Object&&vc;return MD=n,MD}var ED,f7;function Zl(){if(f7)return ED;f7=1;var n=kq(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return ED=t,ED}var ND,g7;function u0(){if(g7)return ND;g7=1;var n=Zl(),e=n.Symbol;return ND=e,ND}var RD,m7;function A_e(){if(m7)return RD;m7=1;var n=u0(),e=Object.prototype,t=e.hasOwnProperty,i=e.toString,s=n?n.toStringTag:void 0;function r(o){var a=t.call(o,s),l=o[s];try{o[s]=void 0;var c=!0}catch{}var d=i.call(o);return c&&(a?o[s]=l:delete o[s]),d}return RD=r,RD}var WD,p7;function F_e(){if(p7)return WD;p7=1;var n=Object.prototype,e=n.toString;function t(i){return e.call(i)}return WD=t,WD}var AD,b7;function $g(){if(b7)return AD;b7=1;var n=u0(),e=A_e(),t=F_e(),i="[object Null]",s="[object Undefined]",r=n?n.toStringTag:void 0;function o(a){return a==null?a===void 0?s:i:r&&r in Object(a)?e(a):t(a)}return AD=o,AD}var FD,v7;function $a(){if(v7)return FD;v7=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return FD=n,FD}var VD,_7;function ew(){if(_7)return VD;_7=1;var n=$g(),e=$a(),t="[object AsyncFunction]",i="[object Function]",s="[object GeneratorFunction]",r="[object Proxy]";function o(a){if(!e(a))return!1;var l=n(a);return l==i||l==s||l==t||l==r}return VD=o,VD}var PD,w7;function V_e(){if(w7)return PD;w7=1;var n=Zl(),e=n["__core-js_shared__"];return PD=e,PD}var OD,y7;function P_e(){if(y7)return OD;y7=1;var n=V_e(),e=function(){var i=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}();function t(i){return!!e&&e in i}return OD=t,OD}var ZD,S7;function xq(){if(S7)return ZD;S7=1;var n=Function.prototype,e=n.toString;function t(i){if(i!=null){try{return e.call(i)}catch{}try{return i+""}catch{}}return""}return ZD=t,ZD}var GD,C7;function O_e(){if(C7)return GD;C7=1;var n=ew(),e=P_e(),t=$a(),i=xq(),s=/[\\^$.*+?()[\]{}|]/g,r=/^\[object .+?Constructor\]$/,o=Function.prototype,a=Object.prototype,l=o.toString,c=a.hasOwnProperty,d=RegExp("^"+l.call(c).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function u(h){if(!t(h)||e(h))return!1;var f=n(h)?d:r;return f.test(i(h))}return GD=u,GD}var BD,L7;function Z_e(){if(L7)return BD;L7=1;function n(e,t){return e?.[t]}return BD=n,BD}var XD,k7;function Qg(){if(k7)return XD;k7=1;var n=O_e(),e=Z_e();function t(i,s){var r=e(i,s);return n(r)?r:void 0}return XD=t,XD}var zD,x7;function Z4(){if(x7)return zD;x7=1;var n=Qg(),e=Zl(),t=n(e,"Map");return zD=t,zD}var HD,T7;function jx(){if(T7)return HD;T7=1;var n=Qg(),e=n(Object,"create");return HD=e,HD}var UD,D7;function G_e(){if(D7)return UD;D7=1;var n=jx();function e(){this.__data__=n?n(null):{},this.size=0}return UD=e,UD}var YD,I7;function B_e(){if(I7)return YD;I7=1;function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return YD=n,YD}var KD,M7;function X_e(){if(M7)return KD;M7=1;var n=jx(),e="__lodash_hash_undefined__",t=Object.prototype,i=t.hasOwnProperty;function s(r){var o=this.__data__;if(n){var a=o[r];return a===e?void 0:a}return i.call(o,r)?o[r]:void 0}return KD=s,KD}var jD,E7;function z_e(){if(E7)return jD;E7=1;var n=jx(),e=Object.prototype,t=e.hasOwnProperty;function i(s){var r=this.__data__;return n?r[s]!==void 0:t.call(r,s)}return jD=i,jD}var JD,N7;function H_e(){if(N7)return JD;N7=1;var n=jx(),e="__lodash_hash_undefined__";function t(i,s){var r=this.__data__;return this.size+=this.has(i)?0:1,r[i]=n&&s===void 0?e:s,this}return JD=t,JD}var $D,R7;function U_e(){if(R7)return $D;R7=1;var n=G_e(),e=B_e(),t=X_e(),i=z_e(),s=H_e();function r(o){var a=-1,l=o==null?0:o.length;for(this.clear();++a<l;){var c=o[a];this.set(c[0],c[1])}}return r.prototype.clear=n,r.prototype.delete=e,r.prototype.get=t,r.prototype.has=i,r.prototype.set=s,$D=r,$D}var QD,W7;function Y_e(){if(W7)return QD;W7=1;var n=U_e(),e=Kx(),t=Z4();function i(){this.size=0,this.__data__={hash:new n,map:new(t||e),string:new n}}return QD=i,QD}var qD,A7;function K_e(){if(A7)return qD;A7=1;function n(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return qD=n,qD}var eI,F7;function Jx(){if(F7)return eI;F7=1;var n=K_e();function e(t,i){var s=t.__data__;return n(i)?s[typeof i=="string"?"string":"hash"]:s.map}return eI=e,eI}var tI,V7;function j_e(){if(V7)return tI;V7=1;var n=Jx();function e(t){var i=n(this,t).delete(t);return this.size-=i?1:0,i}return tI=e,tI}var iI,P7;function J_e(){if(P7)return iI;P7=1;var n=Jx();function e(t){return n(this,t).get(t)}return iI=e,iI}var nI,O7;function $_e(){if(O7)return nI;O7=1;var n=Jx();function e(t){return n(this,t).has(t)}return nI=e,nI}var sI,Z7;function Q_e(){if(Z7)return sI;Z7=1;var n=Jx();function e(t,i){var s=n(this,t),r=s.size;return s.set(t,i),this.size+=s.size==r?0:1,this}return sI=e,sI}var rI,G7;function G4(){if(G7)return rI;G7=1;var n=Y_e(),e=j_e(),t=J_e(),i=$_e(),s=Q_e();function r(o){var a=-1,l=o==null?0:o.length;for(this.clear();++a<l;){var c=o[a];this.set(c[0],c[1])}}return r.prototype.clear=n,r.prototype.delete=e,r.prototype.get=t,r.prototype.has=i,r.prototype.set=s,rI=r,rI}var oI,B7;function q_e(){if(B7)return oI;B7=1;var n=Kx(),e=Z4(),t=G4(),i=200;function s(r,o){var a=this.__data__;if(a instanceof n){var l=a.__data__;if(!e||l.length<i-1)return l.push([r,o]),this.size=++a.size,this;a=this.__data__=new t(l)}return a.set(r,o),this.size=a.size,this}return oI=s,oI}var aI,X7;function $x(){if(X7)return aI;X7=1;var n=Kx(),e=E_e(),t=N_e(),i=R_e(),s=W_e(),r=q_e();function o(a){var l=this.__data__=new n(a);this.size=l.size}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=i,o.prototype.has=s,o.prototype.set=r,aI=o,aI}var lI,z7;function B4(){if(z7)return lI;z7=1;function n(e,t){for(var i=-1,s=e==null?0:e.length;++i<s&&t(e[i],i,e)!==!1;);return e}return lI=n,lI}var cI,H7;function Tq(){if(H7)return cI;H7=1;var n=Qg(),e=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch{}}();return cI=e,cI}var dI,U7;function Qx(){if(U7)return dI;U7=1;var n=Tq();function e(t,i,s){i=="__proto__"&&n?n(t,i,{configurable:!0,enumerable:!0,value:s,writable:!0}):t[i]=s}return dI=e,dI}var uI,Y7;function qx(){if(Y7)return uI;Y7=1;var n=Qx(),e=d0(),t=Object.prototype,i=t.hasOwnProperty;function s(r,o,a){var l=r[o];(!(i.call(r,o)&&e(l,a))||a===void 0&&!(o in r))&&n(r,o,a)}return uI=s,uI}var hI,K7;function tw(){if(K7)return hI;K7=1;var n=qx(),e=Qx();function t(i,s,r,o){var a=!r;r||(r={});for(var l=-1,c=s.length;++l<c;){var d=s[l],u=o?o(r[d],i[d],d,r,i):void 0;u===void 0&&(u=i[d]),a?e(r,d,u):n(r,d,u)}return r}return hI=t,hI}var fI,j7;function e1e(){if(j7)return fI;j7=1;function n(e,t){for(var i=-1,s=Array(e);++i<e;)s[i]=t(i);return s}return fI=n,fI}var gI,J7;function zc(){if(J7)return gI;J7=1;function n(e){return e!=null&&typeof e=="object"}return gI=n,gI}var mI,$7;function t1e(){if($7)return mI;$7=1;var n=$g(),e=zc(),t="[object Arguments]";function i(s){return e(s)&&n(s)==t}return mI=i,mI}var pI,Q7;function iw(){if(Q7)return pI;Q7=1;var n=t1e(),e=zc(),t=Object.prototype,i=t.hasOwnProperty,s=t.propertyIsEnumerable,r=n(function(){return arguments}())?n:function(o){return e(o)&&i.call(o,"callee")&&!s.call(o,"callee")};return pI=r,pI}var bI,q7;function zs(){if(q7)return bI;q7=1;var n=Array.isArray;return bI=n,bI}var vv={exports:{}},vI,e8;function i1e(){if(e8)return vI;e8=1;function n(){return!1}return vI=n,vI}vv.exports;var t8;function h0(){return t8||(t8=1,function(n,e){var t=Zl(),i=i1e(),s=e&&!e.nodeType&&e,r=s&&!0&&n&&!n.nodeType&&n,o=r&&r.exports===s,a=o?t.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||i;n.exports=c}(vv,vv.exports)),vv.exports}var _I,i8;function e2(){if(i8)return _I;i8=1;var n=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(i,s){var r=typeof i;return s=s??n,!!s&&(r=="number"||r!="symbol"&&e.test(i))&&i>-1&&i%1==0&&i<s}return _I=t,_I}var wI,n8;function X4(){if(n8)return wI;n8=1;var n=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n}return wI=e,wI}var yI,s8;function n1e(){if(s8)return yI;s8=1;var n=$g(),e=X4(),t=zc(),i="[object Arguments]",s="[object Array]",r="[object Boolean]",o="[object Date]",a="[object Error]",l="[object Function]",c="[object Map]",d="[object Number]",u="[object Object]",h="[object RegExp]",f="[object Set]",g="[object String]",m="[object WeakMap]",p="[object ArrayBuffer]",b="[object DataView]",w="[object Float32Array]",v="[object Float64Array]",_="[object Int8Array]",y="[object Int16Array]",C="[object Int32Array]",S="[object Uint8Array]",k="[object Uint8ClampedArray]",I="[object Uint16Array]",T="[object Uint32Array]",D={};D[w]=D[v]=D[_]=D[y]=D[C]=D[S]=D[k]=D[I]=D[T]=!0,D[i]=D[s]=D[p]=D[r]=D[b]=D[o]=D[a]=D[l]=D[c]=D[d]=D[u]=D[h]=D[f]=D[g]=D[m]=!1;function M(E){return t(E)&&e(E.length)&&!!D[n(E)]}return yI=M,yI}var SI,r8;function t2(){if(r8)return SI;r8=1;function n(e){return function(t){return e(t)}}return SI=n,SI}var _v={exports:{}};_v.exports;var o8;function z4(){return o8||(o8=1,function(n,e){var t=kq(),i=e&&!e.nodeType&&e,s=i&&!0&&n&&!n.nodeType&&n,r=s&&s.exports===i,o=r&&t.process,a=function(){try{var l=s&&s.require&&s.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();n.exports=a}(_v,_v.exports)),_v.exports}var CI,a8;function nw(){if(a8)return CI;a8=1;var n=n1e(),e=t2(),t=z4(),i=t&&t.isTypedArray,s=i?e(i):n;return CI=s,CI}var LI,l8;function Dq(){if(l8)return LI;l8=1;var n=e1e(),e=iw(),t=zs(),i=h0(),s=e2(),r=nw(),o=Object.prototype,a=o.hasOwnProperty;function l(c,d){var u=t(c),h=!u&&e(c),f=!u&&!h&&i(c),g=!u&&!h&&!f&&r(c),m=u||h||f||g,p=m?n(c.length,String):[],b=p.length;for(var w in c)(d||a.call(c,w))&&!(m&&(w=="length"||f&&(w=="offset"||w=="parent")||g&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||s(w,b)))&&p.push(w);return p}return LI=l,LI}var kI,c8;function i2(){if(c8)return kI;c8=1;var n=Object.prototype;function e(t){var i=t&&t.constructor,s=typeof i=="function"&&i.prototype||n;return t===s}return kI=e,kI}var xI,d8;function Iq(){if(d8)return xI;d8=1;function n(e,t){return function(i){return e(t(i))}}return xI=n,xI}var TI,u8;function s1e(){if(u8)return TI;u8=1;var n=Iq(),e=n(Object.keys,Object);return TI=e,TI}var DI,h8;function H4(){if(h8)return DI;h8=1;var n=i2(),e=s1e(),t=Object.prototype,i=t.hasOwnProperty;function s(r){if(!n(r))return e(r);var o=[];for(var a in Object(r))i.call(r,a)&&a!="constructor"&&o.push(a);return o}return DI=s,DI}var II,f8;function ou(){if(f8)return II;f8=1;var n=ew(),e=X4();function t(i){return i!=null&&e(i.length)&&!n(i)}return II=t,II}var MI,g8;function sf(){if(g8)return MI;g8=1;var n=Dq(),e=H4(),t=ou();function i(s){return t(s)?n(s):e(s)}return MI=i,MI}var EI,m8;function r1e(){if(m8)return EI;m8=1;var n=tw(),e=sf();function t(i,s){return i&&n(s,e(s),i)}return EI=t,EI}var NI,p8;function o1e(){if(p8)return NI;p8=1;function n(e){var t=[];if(e!=null)for(var i in Object(e))t.push(i);return t}return NI=n,NI}var RI,b8;function a1e(){if(b8)return RI;b8=1;var n=$a(),e=i2(),t=o1e(),i=Object.prototype,s=i.hasOwnProperty;function r(o){if(!n(o))return t(o);var a=e(o),l=[];for(var c in o)c=="constructor"&&(a||!s.call(o,c))||l.push(c);return l}return RI=r,RI}var WI,v8;function qg(){if(v8)return WI;v8=1;var n=Dq(),e=a1e(),t=ou();function i(s){return t(s)?n(s,!0):e(s)}return WI=i,WI}var AI,_8;function l1e(){if(_8)return AI;_8=1;var n=tw(),e=qg();function t(i,s){return i&&n(s,e(s),i)}return AI=t,AI}var wv={exports:{}};wv.exports;var w8;function Mq(){return w8||(w8=1,function(n,e){var t=Zl(),i=e&&!e.nodeType&&e,s=i&&!0&&n&&!n.nodeType&&n,r=s&&s.exports===i,o=r?t.Buffer:void 0,a=o?o.allocUnsafe:void 0;function l(c,d){if(d)return c.slice();var u=c.length,h=a?a(u):new c.constructor(u);return c.copy(h),h}n.exports=l}(wv,wv.exports)),wv.exports}var FI,y8;function Eq(){if(y8)return FI;y8=1;function n(e,t){var i=-1,s=e.length;for(t||(t=Array(s));++i<s;)t[i]=e[i];return t}return FI=n,FI}var VI,S8;function Nq(){if(S8)return VI;S8=1;function n(e,t){for(var i=-1,s=e==null?0:e.length,r=0,o=[];++i<s;){var a=e[i];t(a,i,e)&&(o[r++]=a)}return o}return VI=n,VI}var PI,C8;function Rq(){if(C8)return PI;C8=1;function n(){return[]}return PI=n,PI}var OI,L8;function U4(){if(L8)return OI;L8=1;var n=Nq(),e=Rq(),t=Object.prototype,i=t.propertyIsEnumerable,s=Object.getOwnPropertySymbols,r=s?function(o){return o==null?[]:(o=Object(o),n(s(o),function(a){return i.call(o,a)}))}:e;return OI=r,OI}var ZI,k8;function c1e(){if(k8)return ZI;k8=1;var n=tw(),e=U4();function t(i,s){return n(i,e(i),s)}return ZI=t,ZI}var GI,x8;function Y4(){if(x8)return GI;x8=1;function n(e,t){for(var i=-1,s=t.length,r=e.length;++i<s;)e[r+i]=t[i];return e}return GI=n,GI}var BI,T8;function n2(){if(T8)return BI;T8=1;var n=Iq(),e=n(Object.getPrototypeOf,Object);return BI=e,BI}var XI,D8;function Wq(){if(D8)return XI;D8=1;var n=Y4(),e=n2(),t=U4(),i=Rq(),s=Object.getOwnPropertySymbols,r=s?function(o){for(var a=[];o;)n(a,t(o)),o=e(o);return a}:i;return XI=r,XI}var zI,I8;function d1e(){if(I8)return zI;I8=1;var n=tw(),e=Wq();function t(i,s){return n(i,e(i),s)}return zI=t,zI}var HI,M8;function Aq(){if(M8)return HI;M8=1;var n=Y4(),e=zs();function t(i,s,r){var o=s(i);return e(i)?o:n(o,r(i))}return HI=t,HI}var UI,E8;function Fq(){if(E8)return UI;E8=1;var n=Aq(),e=U4(),t=sf();function i(s){return n(s,t,e)}return UI=i,UI}var YI,N8;function u1e(){if(N8)return YI;N8=1;var n=Aq(),e=Wq(),t=qg();function i(s){return n(s,t,e)}return YI=i,YI}var KI,R8;function h1e(){if(R8)return KI;R8=1;var n=Qg(),e=Zl(),t=n(e,"DataView");return KI=t,KI}var jI,W8;function f1e(){if(W8)return jI;W8=1;var n=Qg(),e=Zl(),t=n(e,"Promise");return jI=t,jI}var JI,A8;function Vq(){if(A8)return JI;A8=1;var n=Qg(),e=Zl(),t=n(e,"Set");return JI=t,JI}var $I,F8;function g1e(){if(F8)return $I;F8=1;var n=Qg(),e=Zl(),t=n(e,"WeakMap");return $I=t,$I}var QI,V8;function f0(){if(V8)return QI;V8=1;var n=h1e(),e=Z4(),t=f1e(),i=Vq(),s=g1e(),r=$g(),o=xq(),a="[object Map]",l="[object Object]",c="[object Promise]",d="[object Set]",u="[object WeakMap]",h="[object DataView]",f=o(n),g=o(e),m=o(t),p=o(i),b=o(s),w=r;return(n&&w(new n(new ArrayBuffer(1)))!=h||e&&w(new e)!=a||t&&w(t.resolve())!=c||i&&w(new i)!=d||s&&w(new s)!=u)&&(w=function(v){var _=r(v),y=_==l?v.constructor:void 0,C=y?o(y):"";if(C)switch(C){case f:return h;case g:return a;case m:return c;case p:return d;case b:return u}return _}),QI=w,QI}var qI,P8;function m1e(){if(P8)return qI;P8=1;var n=Object.prototype,e=n.hasOwnProperty;function t(i){var s=i.length,r=new i.constructor(s);return s&&typeof i[0]=="string"&&e.call(i,"index")&&(r.index=i.index,r.input=i.input),r}return qI=t,qI}var eM,O8;function Pq(){if(O8)return eM;O8=1;var n=Zl(),e=n.Uint8Array;return eM=e,eM}var tM,Z8;function K4(){if(Z8)return tM;Z8=1;var n=Pq();function e(t){var i=new t.constructor(t.byteLength);return new n(i).set(new n(t)),i}return tM=e,tM}var iM,G8;function p1e(){if(G8)return iM;G8=1;var n=K4();function e(t,i){var s=i?n(t.buffer):t.buffer;return new t.constructor(s,t.byteOffset,t.byteLength)}return iM=e,iM}var nM,B8;function b1e(){if(B8)return nM;B8=1;var n=/\w*$/;function e(t){var i=new t.constructor(t.source,n.exec(t));return i.lastIndex=t.lastIndex,i}return nM=e,nM}var sM,X8;function v1e(){if(X8)return sM;X8=1;var n=u0(),e=n?n.prototype:void 0,t=e?e.valueOf:void 0;function i(s){return t?Object(t.call(s)):{}}return sM=i,sM}var rM,z8;function Oq(){if(z8)return rM;z8=1;var n=K4();function e(t,i){var s=i?n(t.buffer):t.buffer;return new t.constructor(s,t.byteOffset,t.length)}return rM=e,rM}var oM,H8;function _1e(){if(H8)return oM;H8=1;var n=K4(),e=p1e(),t=b1e(),i=v1e(),s=Oq(),r="[object Boolean]",o="[object Date]",a="[object Map]",l="[object Number]",c="[object RegExp]",d="[object Set]",u="[object String]",h="[object Symbol]",f="[object ArrayBuffer]",g="[object DataView]",m="[object Float32Array]",p="[object Float64Array]",b="[object Int8Array]",w="[object Int16Array]",v="[object Int32Array]",_="[object Uint8Array]",y="[object Uint8ClampedArray]",C="[object Uint16Array]",S="[object Uint32Array]";function k(I,T,D){var M=I.constructor;switch(T){case f:return n(I);case r:case o:return new M(+I);case g:return e(I,D);case m:case p:case b:case w:case v:case _:case y:case C:case S:return s(I,D);case a:return new M;case l:case u:return new M(I);case c:return t(I);case d:return new M;case h:return i(I)}}return oM=k,oM}var aM,U8;function Zq(){if(U8)return aM;U8=1;var n=$a(),e=Object.create,t=function(){function i(){}return function(s){if(!n(s))return{};if(e)return e(s);i.prototype=s;var r=new i;return i.prototype=void 0,r}}();return aM=t,aM}var lM,Y8;function Gq(){if(Y8)return lM;Y8=1;var n=Zq(),e=n2(),t=i2();function i(s){return typeof s.constructor=="function"&&!t(s)?n(e(s)):{}}return lM=i,lM}var cM,K8;function w1e(){if(K8)return cM;K8=1;var n=f0(),e=zc(),t="[object Map]";function i(s){return e(s)&&n(s)==t}return cM=i,cM}var dM,j8;function y1e(){if(j8)return dM;j8=1;var n=w1e(),e=t2(),t=z4(),i=t&&t.isMap,s=i?e(i):n;return dM=s,dM}var uM,J8;function S1e(){if(J8)return uM;J8=1;var n=f0(),e=zc(),t="[object Set]";function i(s){return e(s)&&n(s)==t}return uM=i,uM}var hM,$8;function C1e(){if($8)return hM;$8=1;var n=S1e(),e=t2(),t=z4(),i=t&&t.isSet,s=i?e(i):n;return hM=s,hM}var fM,Q8;function Bq(){if(Q8)return fM;Q8=1;var n=$x(),e=B4(),t=qx(),i=r1e(),s=l1e(),r=Mq(),o=Eq(),a=c1e(),l=d1e(),c=Fq(),d=u1e(),u=f0(),h=m1e(),f=_1e(),g=Gq(),m=zs(),p=h0(),b=y1e(),w=$a(),v=C1e(),_=sf(),y=qg(),C=1,S=2,k=4,I="[object Arguments]",T="[object Array]",D="[object Boolean]",M="[object Date]",E="[object Error]",W="[object Function]",P="[object GeneratorFunction]",N="[object Map]",H="[object Number]",U="[object Object]",B="[object RegExp]",Y="[object Set]",ne="[object String]",ee="[object Symbol]",$="[object WeakMap]",ge="[object ArrayBuffer]",Ie="[object DataView]",xe="[object Float32Array]",z="[object Float64Array]",K="[object Int8Array]",Se="[object Int16Array]",De="[object Int32Array]",ke="[object Uint8Array]",je="[object Uint8ClampedArray]",et="[object Uint16Array]",mt="[object Uint32Array]",ze={};ze[I]=ze[T]=ze[ge]=ze[Ie]=ze[D]=ze[M]=ze[xe]=ze[z]=ze[K]=ze[Se]=ze[De]=ze[N]=ze[H]=ze[U]=ze[B]=ze[Y]=ze[ne]=ze[ee]=ze[ke]=ze[je]=ze[et]=ze[mt]=!0,ze[E]=ze[W]=ze[$]=!1;function ht(nt,zt,Fe,re,ie,de){var Z,O=zt&C,q=zt&S,Q=zt&k;if(Fe&&(Z=ie?Fe(nt,re,ie,de):Fe(nt)),Z!==void 0)return Z;if(!w(nt))return nt;var ce=m(nt);if(ce){if(Z=h(nt),!O)return o(nt,Z)}else{var be=u(nt),Ae=be==W||be==P;if(p(nt))return r(nt,O);if(be==U||be==I||Ae&&!ie){if(Z=q||Ae?{}:g(nt),!O)return q?l(nt,s(Z,nt)):a(nt,i(Z,nt))}else{if(!ze[be])return ie?nt:{};Z=f(nt,be,O)}}de||(de=new n);var Pe=de.get(nt);if(Pe)return Pe;de.set(nt,Z),v(nt)?nt.forEach(function(wt){Z.add(ht(wt,zt,Fe,wt,nt,de))}):b(nt)&&nt.forEach(function(wt,me){Z.set(me,ht(wt,zt,Fe,me,nt,de))});var tt=Q?q?d:c:q?y:_,qe=ce?void 0:tt(nt);return e(qe||nt,function(wt,me){qe&&(me=wt,wt=nt[me]),t(Z,me,ht(wt,zt,Fe,me,nt,de))}),Z}return fM=ht,fM}var gM,q8;function L1e(){if(q8)return gM;q8=1;var n=Bq(),e=4;function t(i){return n(i,e)}return gM=t,gM}var mM,eB;function j4(){if(eB)return mM;eB=1;function n(e){return function(){return e}}return mM=n,mM}var pM,tB;function k1e(){if(tB)return pM;tB=1;function n(e){return function(t,i,s){for(var r=-1,o=Object(t),a=s(t),l=a.length;l--;){var c=a[e?l:++r];if(i(o[c],c,o)===!1)break}return t}}return pM=n,pM}var bM,iB;function J4(){if(iB)return bM;iB=1;var n=k1e(),e=n();return bM=e,bM}var vM,nB;function $4(){if(nB)return vM;nB=1;var n=J4(),e=sf();function t(i,s){return i&&n(i,s,e)}return vM=t,vM}var _M,sB;function x1e(){if(sB)return _M;sB=1;var n=ou();function e(t,i){return function(s,r){if(s==null)return s;if(!n(s))return t(s,r);for(var o=s.length,a=i?o:-1,l=Object(s);(i?a--:++a<o)&&r(l[a],a,l)!==!1;);return s}}return _M=e,_M}var wM,rB;function s2(){if(rB)return wM;rB=1;var n=$4(),e=x1e(),t=e(n);return wM=t,wM}var yM,oB;function em(){if(oB)return yM;oB=1;function n(e){return e}return yM=n,yM}var SM,aB;function Xq(){if(aB)return SM;aB=1;var n=em();function e(t){return typeof t=="function"?t:n}return SM=e,SM}var CM,lB;function zq(){if(lB)return CM;lB=1;var n=B4(),e=s2(),t=Xq(),i=zs();function s(r,o){var a=i(r)?n:e;return a(r,t(o))}return CM=s,CM}var LM,cB;function Hq(){return cB||(cB=1,LM=zq()),LM}var kM,dB;function T1e(){if(dB)return kM;dB=1;var n=s2();function e(t,i){var s=[];return n(t,function(r,o,a){i(r,o,a)&&s.push(r)}),s}return kM=e,kM}var xM,uB;function D1e(){if(uB)return xM;uB=1;var n="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,n),this}return xM=e,xM}var TM,hB;function I1e(){if(hB)return TM;hB=1;function n(e){return this.__data__.has(e)}return TM=n,TM}var DM,fB;function Uq(){if(fB)return DM;fB=1;var n=G4(),e=D1e(),t=I1e();function i(s){var r=-1,o=s==null?0:s.length;for(this.__data__=new n;++r<o;)this.add(s[r])}return i.prototype.add=i.prototype.push=e,i.prototype.has=t,DM=i,DM}var IM,gB;function M1e(){if(gB)return IM;gB=1;function n(e,t){for(var i=-1,s=e==null?0:e.length;++i<s;)if(t(e[i],i,e))return!0;return!1}return IM=n,IM}var MM,mB;function Yq(){if(mB)return MM;mB=1;function n(e,t){return e.has(t)}return MM=n,MM}var EM,pB;function Kq(){if(pB)return EM;pB=1;var n=Uq(),e=M1e(),t=Yq(),i=1,s=2;function r(o,a,l,c,d,u){var h=l&i,f=o.length,g=a.length;if(f!=g&&!(h&&g>f))return!1;var m=u.get(o),p=u.get(a);if(m&&p)return m==a&&p==o;var b=-1,w=!0,v=l&s?new n:void 0;for(u.set(o,a),u.set(a,o);++b<f;){var _=o[b],y=a[b];if(c)var C=h?c(y,_,b,a,o,u):c(_,y,b,o,a,u);if(C!==void 0){if(C)continue;w=!1;break}if(v){if(!e(a,function(S,k){if(!t(v,k)&&(_===S||d(_,S,l,c,u)))return v.push(k)})){w=!1;break}}else if(!(_===y||d(_,y,l,c,u))){w=!1;break}}return u.delete(o),u.delete(a),w}return EM=r,EM}var NM,bB;function E1e(){if(bB)return NM;bB=1;function n(e){var t=-1,i=Array(e.size);return e.forEach(function(s,r){i[++t]=[r,s]}),i}return NM=n,NM}var RM,vB;function Q4(){if(vB)return RM;vB=1;function n(e){var t=-1,i=Array(e.size);return e.forEach(function(s){i[++t]=s}),i}return RM=n,RM}var WM,_B;function N1e(){if(_B)return WM;_B=1;var n=u0(),e=Pq(),t=d0(),i=Kq(),s=E1e(),r=Q4(),o=1,a=2,l="[object Boolean]",c="[object Date]",d="[object Error]",u="[object Map]",h="[object Number]",f="[object RegExp]",g="[object Set]",m="[object String]",p="[object Symbol]",b="[object ArrayBuffer]",w="[object DataView]",v=n?n.prototype:void 0,_=v?v.valueOf:void 0;function y(C,S,k,I,T,D,M){switch(k){case w:if(C.byteLength!=S.byteLength||C.byteOffset!=S.byteOffset)return!1;C=C.buffer,S=S.buffer;case b:return!(C.byteLength!=S.byteLength||!D(new e(C),new e(S)));case l:case c:case h:return t(+C,+S);case d:return C.name==S.name&&C.message==S.message;case f:case m:return C==S+"";case u:var E=s;case g:var W=I&o;if(E||(E=r),C.size!=S.size&&!W)return!1;var P=M.get(C);if(P)return P==S;I|=a,M.set(C,S);var N=i(E(C),E(S),I,T,D,M);return M.delete(C),N;case p:if(_)return _.call(C)==_.call(S)}return!1}return WM=y,WM}var AM,wB;function R1e(){if(wB)return AM;wB=1;var n=Fq(),e=1,t=Object.prototype,i=t.hasOwnProperty;function s(r,o,a,l,c,d){var u=a&e,h=n(r),f=h.length,g=n(o),m=g.length;if(f!=m&&!u)return!1;for(var p=f;p--;){var b=h[p];if(!(u?b in o:i.call(o,b)))return!1}var w=d.get(r),v=d.get(o);if(w&&v)return w==o&&v==r;var _=!0;d.set(r,o),d.set(o,r);for(var y=u;++p<f;){b=h[p];var C=r[b],S=o[b];if(l)var k=u?l(S,C,b,o,r,d):l(C,S,b,r,o,d);if(!(k===void 0?C===S||c(C,S,a,l,d):k)){_=!1;break}y||(y=b=="constructor")}if(_&&!y){var I=r.constructor,T=o.constructor;I!=T&&"constructor"in r&&"constructor"in o&&!(typeof I=="function"&&I instanceof I&&typeof T=="function"&&T instanceof T)&&(_=!1)}return d.delete(r),d.delete(o),_}return AM=s,AM}var FM,yB;function W1e(){if(yB)return FM;yB=1;var n=$x(),e=Kq(),t=N1e(),i=R1e(),s=f0(),r=zs(),o=h0(),a=nw(),l=1,c="[object Arguments]",d="[object Array]",u="[object Object]",h=Object.prototype,f=h.hasOwnProperty;function g(m,p,b,w,v,_){var y=r(m),C=r(p),S=y?d:s(m),k=C?d:s(p);S=S==c?u:S,k=k==c?u:k;var I=S==u,T=k==u,D=S==k;if(D&&o(m)){if(!o(p))return!1;y=!0,I=!1}if(D&&!I)return _||(_=new n),y||a(m)?e(m,p,b,w,v,_):t(m,p,S,b,w,v,_);if(!(b&l)){var M=I&&f.call(m,"__wrapped__"),E=T&&f.call(p,"__wrapped__");if(M||E){var W=M?m.value():m,P=E?p.value():p;return _||(_=new n),v(W,P,b,w,_)}}return D?(_||(_=new n),i(m,p,b,w,v,_)):!1}return FM=g,FM}var VM,SB;function jq(){if(SB)return VM;SB=1;var n=W1e(),e=zc();function t(i,s,r,o,a){return i===s?!0:i==null||s==null||!e(i)&&!e(s)?i!==i&&s!==s:n(i,s,r,o,t,a)}return VM=t,VM}var PM,CB;function A1e(){if(CB)return PM;CB=1;var n=$x(),e=jq(),t=1,i=2;function s(r,o,a,l){var c=a.length,d=c,u=!l;if(r==null)return!d;for(r=Object(r);c--;){var h=a[c];if(u&&h[2]?h[1]!==r[h[0]]:!(h[0]in r))return!1}for(;++c<d;){h=a[c];var f=h[0],g=r[f],m=h[1];if(u&&h[2]){if(g===void 0&&!(f in r))return!1}else{var p=new n;if(l)var b=l(g,m,f,r,o,p);if(!(b===void 0?e(m,g,t|i,l,p):b))return!1}}return!0}return PM=s,PM}var OM,LB;function Jq(){if(LB)return OM;LB=1;var n=$a();function e(t){return t===t&&!n(t)}return OM=e,OM}var ZM,kB;function F1e(){if(kB)return ZM;kB=1;var n=Jq(),e=sf();function t(i){for(var s=e(i),r=s.length;r--;){var o=s[r],a=i[o];s[r]=[o,a,n(a)]}return s}return ZM=t,ZM}var GM,xB;function $q(){if(xB)return GM;xB=1;function n(e,t){return function(i){return i==null?!1:i[e]===t&&(t!==void 0||e in Object(i))}}return GM=n,GM}var BM,TB;function V1e(){if(TB)return BM;TB=1;var n=A1e(),e=F1e(),t=$q();function i(s){var r=e(s);return r.length==1&&r[0][2]?t(r[0][0],r[0][1]):function(o){return o===s||n(o,s,r)}}return BM=i,BM}var XM,DB;function g0(){if(DB)return XM;DB=1;var n=$g(),e=zc(),t="[object Symbol]";function i(s){return typeof s=="symbol"||e(s)&&n(s)==t}return XM=i,XM}var zM,IB;function q4(){if(IB)return zM;IB=1;var n=zs(),e=g0(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function s(r,o){if(n(r))return!1;var a=typeof r;return a=="number"||a=="symbol"||a=="boolean"||r==null||e(r)?!0:i.test(r)||!t.test(r)||o!=null&&r in Object(o)}return zM=s,zM}var HM,MB;function P1e(){if(MB)return HM;MB=1;var n=G4(),e="Expected a function";function t(i,s){if(typeof i!="function"||s!=null&&typeof s!="function")throw new TypeError(e);var r=function(){var o=arguments,a=s?s.apply(this,o):o[0],l=r.cache;if(l.has(a))return l.get(a);var c=i.apply(this,o);return r.cache=l.set(a,c)||l,c};return r.cache=new(t.Cache||n),r}return t.Cache=n,HM=t,HM}var UM,EB;function O1e(){if(EB)return UM;EB=1;var n=P1e(),e=500;function t(i){var s=n(i,function(o){return r.size===e&&r.clear(),o}),r=s.cache;return s}return UM=t,UM}var YM,NB;function Z1e(){if(NB)return YM;NB=1;var n=O1e(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,i=n(function(s){var r=[];return s.charCodeAt(0)===46&&r.push(""),s.replace(e,function(o,a,l,c){r.push(l?c.replace(t,"$1"):a||o)}),r});return YM=i,YM}var KM,RB;function r2(){if(RB)return KM;RB=1;function n(e,t){for(var i=-1,s=e==null?0:e.length,r=Array(s);++i<s;)r[i]=t(e[i],i,e);return r}return KM=n,KM}var jM,WB;function G1e(){if(WB)return jM;WB=1;var n=u0(),e=r2(),t=zs(),i=g0(),s=1/0,r=n?n.prototype:void 0,o=r?r.toString:void 0;function a(l){if(typeof l=="string")return l;if(t(l))return e(l,a)+"";if(i(l))return o?o.call(l):"";var c=l+"";return c=="0"&&1/l==-s?"-0":c}return jM=a,jM}var JM,AB;function Qq(){if(AB)return JM;AB=1;var n=G1e();function e(t){return t==null?"":n(t)}return JM=e,JM}var $M,FB;function o2(){if(FB)return $M;FB=1;var n=zs(),e=q4(),t=Z1e(),i=Qq();function s(r,o){return n(r)?r:e(r,o)?[r]:t(i(r))}return $M=s,$M}var QM,VB;function sw(){if(VB)return QM;VB=1;var n=g0(),e=1/0;function t(i){if(typeof i=="string"||n(i))return i;var s=i+"";return s=="0"&&1/i==-e?"-0":s}return QM=t,QM}var qM,PB;function a2(){if(PB)return qM;PB=1;var n=o2(),e=sw();function t(i,s){s=n(s,i);for(var r=0,o=s.length;i!=null&&r<o;)i=i[e(s[r++])];return r&&r==o?i:void 0}return qM=t,qM}var eE,OB;function B1e(){if(OB)return eE;OB=1;var n=a2();function e(t,i,s){var r=t==null?void 0:n(t,i);return r===void 0?s:r}return eE=e,eE}var tE,ZB;function X1e(){if(ZB)return tE;ZB=1;function n(e,t){return e!=null&&t in Object(e)}return tE=n,tE}var iE,GB;function qq(){if(GB)return iE;GB=1;var n=o2(),e=iw(),t=zs(),i=e2(),s=X4(),r=sw();function o(a,l,c){l=n(l,a);for(var d=-1,u=l.length,h=!1;++d<u;){var f=r(l[d]);if(!(h=a!=null&&c(a,f)))break;a=a[f]}return h||++d!=u?h:(u=a==null?0:a.length,!!u&&s(u)&&i(f,u)&&(t(a)||e(a)))}return iE=o,iE}var nE,BB;function eee(){if(BB)return nE;BB=1;var n=X1e(),e=qq();function t(i,s){return i!=null&&e(i,s,n)}return nE=t,nE}var sE,XB;function z1e(){if(XB)return sE;XB=1;var n=jq(),e=B1e(),t=eee(),i=q4(),s=Jq(),r=$q(),o=sw(),a=1,l=2;function c(d,u){return i(d)&&s(u)?r(o(d),u):function(h){var f=e(h,d);return f===void 0&&f===u?t(h,d):n(u,f,a|l)}}return sE=c,sE}var rE,zB;function tee(){if(zB)return rE;zB=1;function n(e){return function(t){return t?.[e]}}return rE=n,rE}var oE,HB;function H1e(){if(HB)return oE;HB=1;var n=a2();function e(t){return function(i){return n(i,t)}}return oE=e,oE}var aE,UB;function U1e(){if(UB)return aE;UB=1;var n=tee(),e=H1e(),t=q4(),i=sw();function s(r){return t(r)?n(i(r)):e(r)}return aE=s,aE}var lE,YB;function au(){if(YB)return lE;YB=1;var n=V1e(),e=z1e(),t=em(),i=zs(),s=U1e();function r(o){return typeof o=="function"?o:o==null?t:typeof o=="object"?i(o)?e(o[0],o[1]):n(o):s(o)}return lE=r,lE}var cE,KB;function iee(){if(KB)return cE;KB=1;var n=Nq(),e=T1e(),t=au(),i=zs();function s(r,o){var a=i(r)?n:e;return a(r,t(o,3))}return cE=s,cE}var dE,jB;function Y1e(){if(jB)return dE;jB=1;var n=Object.prototype,e=n.hasOwnProperty;function t(i,s){return i!=null&&e.call(i,s)}return dE=t,dE}var uE,JB;function nee(){if(JB)return uE;JB=1;var n=Y1e(),e=qq();function t(i,s){return i!=null&&e(i,s,n)}return uE=t,uE}var hE,$B;function K1e(){if($B)return hE;$B=1;var n=H4(),e=f0(),t=iw(),i=zs(),s=ou(),r=h0(),o=i2(),a=nw(),l="[object Map]",c="[object Set]",d=Object.prototype,u=d.hasOwnProperty;function h(f){if(f==null)return!0;if(s(f)&&(i(f)||typeof f=="string"||typeof f.splice=="function"||r(f)||a(f)||t(f)))return!f.length;var g=e(f);if(g==l||g==c)return!f.size;if(o(f))return!n(f).length;for(var m in f)if(u.call(f,m))return!1;return!0}return hE=h,hE}var fE,QB;function see(){if(QB)return fE;QB=1;function n(e){return e===void 0}return fE=n,fE}var gE,qB;function ree(){if(qB)return gE;qB=1;var n=s2(),e=ou();function t(i,s){var r=-1,o=e(i)?Array(i.length):[];return n(i,function(a,l,c){o[++r]=s(a,l,c)}),o}return gE=t,gE}var mE,e6;function oee(){if(e6)return mE;e6=1;var n=r2(),e=au(),t=ree(),i=zs();function s(r,o){var a=i(r)?n:t;return a(r,e(o,3))}return mE=s,mE}var pE,t6;function j1e(){if(t6)return pE;t6=1;function n(e,t,i,s){var r=-1,o=e==null?0:e.length;for(s&&o&&(i=e[++r]);++r<o;)i=t(i,e[r],r,e);return i}return pE=n,pE}var bE,i6;function J1e(){if(i6)return bE;i6=1;function n(e,t,i,s,r){return r(e,function(o,a,l){i=s?(s=!1,o):t(i,o,a,l)}),i}return bE=n,bE}var vE,n6;function aee(){if(n6)return vE;n6=1;var n=j1e(),e=s2(),t=au(),i=J1e(),s=zs();function r(o,a,l){var c=s(o)?n:i,d=arguments.length<3;return c(o,t(a,4),l,d,e)}return vE=r,vE}var _E,s6;function $1e(){if(s6)return _E;s6=1;var n=$g(),e=zs(),t=zc(),i="[object String]";function s(r){return typeof r=="string"||!e(r)&&t(r)&&n(r)==i}return _E=s,_E}var wE,r6;function Q1e(){if(r6)return wE;r6=1;var n=tee(),e=n("length");return wE=e,wE}var yE,o6;function q1e(){if(o6)return yE;o6=1;var n="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",s=e+t+i,r="\\ufe0e\\ufe0f",o="\\u200d",a=RegExp("["+o+n+s+r+"]");function l(c){return a.test(c)}return yE=l,yE}var SE,a6;function ewe(){if(a6)return SE;a6=1;var n="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",s=e+t+i,r="\\ufe0e\\ufe0f",o="["+n+"]",a="["+s+"]",l="\\ud83c[\\udffb-\\udfff]",c="(?:"+a+"|"+l+")",d="[^"+n+"]",u="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",f="\\u200d",g=c+"?",m="["+r+"]?",p="(?:"+f+"(?:"+[d,u,h].join("|")+")"+m+g+")*",b=m+g+p,w="(?:"+[d+a+"?",a,u,h,o].join("|")+")",v=RegExp(l+"(?="+l+")|"+w+b,"g");function _(y){for(var C=v.lastIndex=0;v.test(y);)++C;return C}return SE=_,SE}var CE,l6;function twe(){if(l6)return CE;l6=1;var n=Q1e(),e=q1e(),t=ewe();function i(s){return e(s)?t(s):n(s)}return CE=i,CE}var LE,c6;function iwe(){if(c6)return LE;c6=1;var n=H4(),e=f0(),t=ou(),i=$1e(),s=twe(),r="[object Map]",o="[object Set]";function a(l){if(l==null)return 0;if(t(l))return i(l)?s(l):l.length;var c=e(l);return c==r||c==o?l.size:n(l).length}return LE=a,LE}var kE,d6;function nwe(){if(d6)return kE;d6=1;var n=B4(),e=Zq(),t=$4(),i=au(),s=n2(),r=zs(),o=h0(),a=ew(),l=$a(),c=nw();function d(u,h,f){var g=r(u),m=g||o(u)||c(u);if(h=i(h,4),f==null){var p=u&&u.constructor;m?f=g?new p:[]:l(u)?f=a(p)?e(s(u)):{}:f={}}return(m?n:t)(u,function(b,w,v){return h(f,b,w,v)}),f}return kE=d,kE}var xE,u6;function swe(){if(u6)return xE;u6=1;var n=u0(),e=iw(),t=zs(),i=n?n.isConcatSpreadable:void 0;function s(r){return t(r)||e(r)||!!(i&&r&&r[i])}return xE=s,xE}var TE,h6;function eV(){if(h6)return TE;h6=1;var n=Y4(),e=swe();function t(i,s,r,o,a){var l=-1,c=i.length;for(r||(r=e),a||(a=[]);++l<c;){var d=i[l];s>0&&r(d)?s>1?t(d,s-1,r,o,a):n(a,d):o||(a[a.length]=d)}return a}return TE=t,TE}var DE,f6;function rwe(){if(f6)return DE;f6=1;function n(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}return DE=n,DE}var IE,g6;function lee(){if(g6)return IE;g6=1;var n=rwe(),e=Math.max;function t(i,s,r){return s=e(s===void 0?i.length-1:s,0),function(){for(var o=arguments,a=-1,l=e(o.length-s,0),c=Array(l);++a<l;)c[a]=o[s+a];a=-1;for(var d=Array(s+1);++a<s;)d[a]=o[a];return d[s]=r(c),n(i,this,d)}}return IE=t,IE}var ME,m6;function owe(){if(m6)return ME;m6=1;var n=j4(),e=Tq(),t=em(),i=e?function(s,r){return e(s,"toString",{configurable:!0,enumerable:!1,value:n(r),writable:!0})}:t;return ME=i,ME}var EE,p6;function awe(){if(p6)return EE;p6=1;var n=800,e=16,t=Date.now;function i(s){var r=0,o=0;return function(){var a=t(),l=e-(a-o);if(o=a,l>0){if(++r>=n)return arguments[0]}else r=0;return s.apply(void 0,arguments)}}return EE=i,EE}var NE,b6;function cee(){if(b6)return NE;b6=1;var n=owe(),e=awe(),t=e(n);return NE=t,NE}var RE,v6;function l2(){if(v6)return RE;v6=1;var n=em(),e=lee(),t=cee();function i(s,r){return t(e(s,r,n),s+"")}return RE=i,RE}var WE,_6;function dee(){if(_6)return WE;_6=1;function n(e,t,i,s){for(var r=e.length,o=i+(s?1:-1);s?o--:++o<r;)if(t(e[o],o,e))return o;return-1}return WE=n,WE}var AE,w6;function lwe(){if(w6)return AE;w6=1;function n(e){return e!==e}return AE=n,AE}var FE,y6;function cwe(){if(y6)return FE;y6=1;function n(e,t,i){for(var s=i-1,r=e.length;++s<r;)if(e[s]===t)return s;return-1}return FE=n,FE}var VE,S6;function dwe(){if(S6)return VE;S6=1;var n=dee(),e=lwe(),t=cwe();function i(s,r,o){return r===r?t(s,r,o):n(s,e,o)}return VE=i,VE}var PE,C6;function uwe(){if(C6)return PE;C6=1;var n=dwe();function e(t,i){var s=t==null?0:t.length;return!!s&&n(t,i,0)>-1}return PE=e,PE}var OE,L6;function hwe(){if(L6)return OE;L6=1;function n(e,t,i){for(var s=-1,r=e==null?0:e.length;++s<r;)if(i(t,e[s]))return!0;return!1}return OE=n,OE}var ZE,k6;function fwe(){if(k6)return ZE;k6=1;function n(){}return ZE=n,ZE}var GE,x6;function gwe(){if(x6)return GE;x6=1;var n=Vq(),e=fwe(),t=Q4(),i=1/0,s=n&&1/t(new n([,-0]))[1]==i?function(r){return new n(r)}:e;return GE=s,GE}var BE,T6;function mwe(){if(T6)return BE;T6=1;var n=Uq(),e=uwe(),t=hwe(),i=Yq(),s=gwe(),r=Q4(),o=200;function a(l,c,d){var u=-1,h=e,f=l.length,g=!0,m=[],p=m;if(d)g=!1,h=t;else if(f>=o){var b=c?null:s(l);if(b)return r(b);g=!1,h=i,p=new n}else p=c?[]:m;e:for(;++u<f;){var w=l[u],v=c?c(w):w;if(w=d||w!==0?w:0,g&&v===v){for(var _=p.length;_--;)if(p[_]===v)continue e;c&&p.push(v),m.push(w)}else h(p,v,d)||(p!==m&&p.push(v),m.push(w))}return m}return BE=a,BE}var XE,D6;function uee(){if(D6)return XE;D6=1;var n=ou(),e=zc();function t(i){return e(i)&&n(i)}return XE=t,XE}var zE,I6;function pwe(){if(I6)return zE;I6=1;var n=eV(),e=l2(),t=mwe(),i=uee(),s=e(function(r){return t(n(r,1,i,!0))});return zE=s,zE}var HE,M6;function bwe(){if(M6)return HE;M6=1;var n=r2();function e(t,i){return n(i,function(s){return t[s]})}return HE=e,HE}var UE,E6;function hee(){if(E6)return UE;E6=1;var n=bwe(),e=sf();function t(i){return i==null?[]:n(i,e(i))}return UE=t,UE}var YE,N6;function Qa(){if(N6)return YE;N6=1;var n;if(typeof O4=="function")try{n={clone:L1e(),constant:j4(),each:Hq(),filter:iee(),has:nee(),isArray:zs(),isEmpty:K1e(),isFunction:ew(),isUndefined:see(),keys:sf(),map:oee(),reduce:aee(),size:iwe(),transform:nwe(),union:pwe(),values:hee()}}catch{}return n||(n=window._),YE=n,YE}var KE,R6;function tV(){if(R6)return KE;R6=1;var n=Qa();KE=s;var e="\0",t="\0",i="";function s(d){this._isDirected=n.has(d,"directed")?d.directed:!0,this._isMultigraph=n.has(d,"multigraph")?d.multigraph:!1,this._isCompound=n.has(d,"compound")?d.compound:!1,this._label=void 0,this._defaultNodeLabelFn=n.constant(void 0),this._defaultEdgeLabelFn=n.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[t]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}s.prototype._nodeCount=0,s.prototype._edgeCount=0,s.prototype.isDirected=function(){return this._isDirected},s.prototype.isMultigraph=function(){return this._isMultigraph},s.prototype.isCompound=function(){return this._isCompound},s.prototype.setGraph=function(d){return this._label=d,this},s.prototype.graph=function(){return this._label},s.prototype.setDefaultNodeLabel=function(d){return n.isFunction(d)||(d=n.constant(d)),this._defaultNodeLabelFn=d,this},s.prototype.nodeCount=function(){return this._nodeCount},s.prototype.nodes=function(){return n.keys(this._nodes)},s.prototype.sources=function(){var d=this;return n.filter(this.nodes(),function(u){return n.isEmpty(d._in[u])})},s.prototype.sinks=function(){var d=this;return n.filter(this.nodes(),function(u){return n.isEmpty(d._out[u])})},s.prototype.setNodes=function(d,u){var h=arguments,f=this;return n.each(d,function(g){h.length>1?f.setNode(g,u):f.setNode(g)}),this},s.prototype.setNode=function(d,u){return n.has(this._nodes,d)?(arguments.length>1&&(this._nodes[d]=u),this):(this._nodes[d]=arguments.length>1?u:this._defaultNodeLabelFn(d),this._isCompound&&(this._parent[d]=t,this._children[d]={},this._children[t][d]=!0),this._in[d]={},this._preds[d]={},this._out[d]={},this._sucs[d]={},++this._nodeCount,this)},s.prototype.node=function(d){return this._nodes[d]},s.prototype.hasNode=function(d){return n.has(this._nodes,d)},s.prototype.removeNode=function(d){var u=this;if(n.has(this._nodes,d)){var h=function(f){u.removeEdge(u._edgeObjs[f])};delete this._nodes[d],this._isCompound&&(this._removeFromParentsChildList(d),delete this._parent[d],n.each(this.children(d),function(f){u.setParent(f)}),delete this._children[d]),n.each(n.keys(this._in[d]),h),delete this._in[d],delete this._preds[d],n.each(n.keys(this._out[d]),h),delete this._out[d],delete this._sucs[d],--this._nodeCount}return this},s.prototype.setParent=function(d,u){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(n.isUndefined(u))u=t;else{u+="";for(var h=u;!n.isUndefined(h);h=this.parent(h))if(h===d)throw new Error("Setting "+u+" as parent of "+d+" would create a cycle");this.setNode(u)}return this.setNode(d),this._removeFromParentsChildList(d),this._parent[d]=u,this._children[u][d]=!0,this},s.prototype._removeFromParentsChildList=function(d){delete this._children[this._parent[d]][d]},s.prototype.parent=function(d){if(this._isCompound){var u=this._parent[d];if(u!==t)return u}},s.prototype.children=function(d){if(n.isUndefined(d)&&(d=t),this._isCompound){var u=this._children[d];if(u)return n.keys(u)}else{if(d===t)return this.nodes();if(this.hasNode(d))return[]}},s.prototype.predecessors=function(d){var u=this._preds[d];if(u)return n.keys(u)},s.prototype.successors=function(d){var u=this._sucs[d];if(u)return n.keys(u)},s.prototype.neighbors=function(d){var u=this.predecessors(d);if(u)return n.union(u,this.successors(d))},s.prototype.isLeaf=function(d){var u;return this.isDirected()?u=this.successors(d):u=this.neighbors(d),u.length===0},s.prototype.filterNodes=function(d){var u=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});u.setGraph(this.graph());var h=this;n.each(this._nodes,function(m,p){d(p)&&u.setNode(p,m)}),n.each(this._edgeObjs,function(m){u.hasNode(m.v)&&u.hasNode(m.w)&&u.setEdge(m,h.edge(m))});var f={};function g(m){var p=h.parent(m);return p===void 0||u.hasNode(p)?(f[m]=p,p):p in f?f[p]:g(p)}return this._isCompound&&n.each(u.nodes(),function(m){u.setParent(m,g(m))}),u},s.prototype.setDefaultEdgeLabel=function(d){return n.isFunction(d)||(d=n.constant(d)),this._defaultEdgeLabelFn=d,this},s.prototype.edgeCount=function(){return this._edgeCount},s.prototype.edges=function(){return n.values(this._edgeObjs)},s.prototype.setPath=function(d,u){var h=this,f=arguments;return n.reduce(d,function(g,m){return f.length>1?h.setEdge(g,m,u):h.setEdge(g,m),m}),this},s.prototype.setEdge=function(){var d,u,h,f,g=!1,m=arguments[0];typeof m=="object"&&m!==null&&"v"in m?(d=m.v,u=m.w,h=m.name,arguments.length===2&&(f=arguments[1],g=!0)):(d=m,u=arguments[1],h=arguments[3],arguments.length>2&&(f=arguments[2],g=!0)),d=""+d,u=""+u,n.isUndefined(h)||(h=""+h);var p=a(this._isDirected,d,u,h);if(n.has(this._edgeLabels,p))return g&&(this._edgeLabels[p]=f),this;if(!n.isUndefined(h)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(d),this.setNode(u),this._edgeLabels[p]=g?f:this._defaultEdgeLabelFn(d,u,h);var b=l(this._isDirected,d,u,h);return d=b.v,u=b.w,Object.freeze(b),this._edgeObjs[p]=b,r(this._preds[u],d),r(this._sucs[d],u),this._in[u][p]=b,this._out[d][p]=b,this._edgeCount++,this},s.prototype.edge=function(d,u,h){var f=arguments.length===1?c(this._isDirected,arguments[0]):a(this._isDirected,d,u,h);return this._edgeLabels[f]},s.prototype.hasEdge=function(d,u,h){var f=arguments.length===1?c(this._isDirected,arguments[0]):a(this._isDirected,d,u,h);return n.has(this._edgeLabels,f)},s.prototype.removeEdge=function(d,u,h){var f=arguments.length===1?c(this._isDirected,arguments[0]):a(this._isDirected,d,u,h),g=this._edgeObjs[f];return g&&(d=g.v,u=g.w,delete this._edgeLabels[f],delete this._edgeObjs[f],o(this._preds[u],d),o(this._sucs[d],u),delete this._in[u][f],delete this._out[d][f],this._edgeCount--),this},s.prototype.inEdges=function(d,u){var h=this._in[d];if(h){var f=n.values(h);return u?n.filter(f,function(g){return g.v===u}):f}},s.prototype.outEdges=function(d,u){var h=this._out[d];if(h){var f=n.values(h);return u?n.filter(f,function(g){return g.w===u}):f}},s.prototype.nodeEdges=function(d,u){var h=this.inEdges(d,u);if(h)return h.concat(this.outEdges(d,u))};function r(d,u){d[u]?d[u]++:d[u]=1}function o(d,u){--d[u]||delete d[u]}function a(d,u,h,f){var g=""+u,m=""+h;if(!d&&g>m){var p=g;g=m,m=p}return g+i+m+i+(n.isUndefined(f)?e:f)}function l(d,u,h,f){var g=""+u,m=""+h;if(!d&&g>m){var p=g;g=m,m=p}var b={v:g,w:m};return f&&(b.name=f),b}function c(d,u){return a(d,u.v,u.w,u.name)}return KE}var jE,W6;function vwe(){return W6||(W6=1,jE="2.1.8"),jE}var JE,A6;function _we(){return A6||(A6=1,JE={Graph:tV(),version:vwe()}),JE}var $E,F6;function wwe(){if(F6)return $E;F6=1;var n=Qa(),e=tV();$E={write:t,read:r};function t(o){var a={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:i(o),edges:s(o)};return n.isUndefined(o.graph())||(a.value=n.clone(o.graph())),a}function i(o){return n.map(o.nodes(),function(a){var l=o.node(a),c=o.parent(a),d={v:a};return n.isUndefined(l)||(d.value=l),n.isUndefined(c)||(d.parent=c),d})}function s(o){return n.map(o.edges(),function(a){var l=o.edge(a),c={v:a.v,w:a.w};return n.isUndefined(a.name)||(c.name=a.name),n.isUndefined(l)||(c.value=l),c})}function r(o){var a=new e(o.options).setGraph(o.value);return n.each(o.nodes,function(l){a.setNode(l.v,l.value),l.parent&&a.setParent(l.v,l.parent)}),n.each(o.edges,function(l){a.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),a}return $E}var QE,V6;function ywe(){if(V6)return QE;V6=1;var n=Qa();QE=e;function e(t){var i={},s=[],r;function o(a){n.has(i,a)||(i[a]=!0,r.push(a),n.each(t.successors(a),o),n.each(t.predecessors(a),o))}return n.each(t.nodes(),function(a){r=[],o(a),r.length&&s.push(r)}),s}return QE}var qE,P6;function fee(){if(P6)return qE;P6=1;var n=Qa();qE=e;function e(){this._arr=[],this._keyIndices={}}return e.prototype.size=function(){return this._arr.length},e.prototype.keys=function(){return this._arr.map(function(t){return t.key})},e.prototype.has=function(t){return n.has(this._keyIndices,t)},e.prototype.priority=function(t){var i=this._keyIndices[t];if(i!==void 0)return this._arr[i].priority},e.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},e.prototype.add=function(t,i){var s=this._keyIndices;if(t=String(t),!n.has(s,t)){var r=this._arr,o=r.length;return s[t]=o,r.push({key:t,priority:i}),this._decrease(o),!0}return!1},e.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},e.prototype.decrease=function(t,i){var s=this._keyIndices[t];if(i>this._arr[s].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[s].priority+" New: "+i);this._arr[s].priority=i,this._decrease(s)},e.prototype._heapify=function(t){var i=this._arr,s=2*t,r=s+1,o=t;s<i.length&&(o=i[s].priority<i[o].priority?s:o,r<i.length&&(o=i[r].priority<i[o].priority?r:o),o!==t&&(this._swap(t,o),this._heapify(o)))},e.prototype._decrease=function(t){for(var i=this._arr,s=i[t].priority,r;t!==0&&(r=t>>1,!(i[r].priority<s));)this._swap(t,r),t=r},e.prototype._swap=function(t,i){var s=this._arr,r=this._keyIndices,o=s[t],a=s[i];s[t]=a,s[i]=o,r[a.key]=t,r[o.key]=i},qE}var eN,O6;function gee(){if(O6)return eN;O6=1;var n=Qa(),e=fee();eN=i;var t=n.constant(1);function i(r,o,a,l){return s(r,String(o),a||t,l||function(c){return r.outEdges(c)})}function s(r,o,a,l){var c={},d=new e,u,h,f=function(g){var m=g.v!==u?g.v:g.w,p=c[m],b=a(g),w=h.distance+b;if(b<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+g+" Weight: "+b);w<p.distance&&(p.distance=w,p.predecessor=u,d.decrease(m,w))};for(r.nodes().forEach(function(g){var m=g===o?0:Number.POSITIVE_INFINITY;c[g]={distance:m},d.add(g,m)});d.size()>0&&(u=d.removeMin(),h=c[u],h.distance!==Number.POSITIVE_INFINITY);)l(u).forEach(f);return c}return eN}var tN,Z6;function Swe(){if(Z6)return tN;Z6=1;var n=gee(),e=Qa();tN=t;function t(i,s,r){return e.transform(i.nodes(),function(o,a){o[a]=n(i,a,s,r)},{})}return tN}var iN,G6;function mee(){if(G6)return iN;G6=1;var n=Qa();iN=e;function e(t){var i=0,s=[],r={},o=[];function a(l){var c=r[l]={onStack:!0,lowlink:i,index:i++};if(s.push(l),t.successors(l).forEach(function(h){n.has(r,h)?r[h].onStack&&(c.lowlink=Math.min(c.lowlink,r[h].index)):(a(h),c.lowlink=Math.min(c.lowlink,r[h].lowlink))}),c.lowlink===c.index){var d=[],u;do u=s.pop(),r[u].onStack=!1,d.push(u);while(l!==u);o.push(d)}}return t.nodes().forEach(function(l){n.has(r,l)||a(l)}),o}return iN}var nN,B6;function Cwe(){if(B6)return nN;B6=1;var n=Qa(),e=mee();nN=t;function t(i){return n.filter(e(i),function(s){return s.length>1||s.length===1&&i.hasEdge(s[0],s[0])})}return nN}var sN,X6;function Lwe(){if(X6)return sN;X6=1;var n=Qa();sN=t;var e=n.constant(1);function t(s,r,o){return i(s,r||e,o||function(a){return s.outEdges(a)})}function i(s,r,o){var a={},l=s.nodes();return l.forEach(function(c){a[c]={},a[c][c]={distance:0},l.forEach(function(d){c!==d&&(a[c][d]={distance:Number.POSITIVE_INFINITY})}),o(c).forEach(function(d){var u=d.v===c?d.w:d.v,h=r(d);a[c][u]={distance:h,predecessor:c}})}),l.forEach(function(c){var d=a[c];l.forEach(function(u){var h=a[u];l.forEach(function(f){var g=h[c],m=d[f],p=h[f],b=g.distance+m.distance;b<p.distance&&(p.distance=b,p.predecessor=m.predecessor)})})}),a}return sN}var rN,z6;function pee(){if(z6)return rN;z6=1;var n=Qa();rN=e,e.CycleException=t;function e(i){var s={},r={},o=[];function a(l){if(n.has(r,l))throw new t;n.has(s,l)||(r[l]=!0,s[l]=!0,n.each(i.predecessors(l),a),delete r[l],o.push(l))}if(n.each(i.sinks(),a),n.size(s)!==i.nodeCount())throw new t;return o}function t(){}return t.prototype=new Error,rN}var oN,H6;function kwe(){if(H6)return oN;H6=1;var n=pee();oN=e;function e(t){try{n(t)}catch(i){if(i instanceof n.CycleException)return!1;throw i}return!0}return oN}var aN,U6;function bee(){if(U6)return aN;U6=1;var n=Qa();aN=e;function e(i,s,r){n.isArray(s)||(s=[s]);var o=(i.isDirected()?i.successors:i.neighbors).bind(i),a=[],l={};return n.each(s,function(c){if(!i.hasNode(c))throw new Error("Graph does not have node: "+c);t(i,c,r==="post",l,o,a)}),a}function t(i,s,r,o,a,l){n.has(o,s)||(o[s]=!0,r||l.push(s),n.each(a(s),function(c){t(i,c,r,o,a,l)}),r&&l.push(s))}return aN}var lN,Y6;function xwe(){if(Y6)return lN;Y6=1;var n=bee();lN=e;function e(t,i){return n(t,i,"post")}return lN}var cN,K6;function Twe(){if(K6)return cN;K6=1;var n=bee();cN=e;function e(t,i){return n(t,i,"pre")}return cN}var dN,j6;function Dwe(){if(j6)return dN;j6=1;var n=Qa(),e=tV(),t=fee();dN=i;function i(s,r){var o=new e,a={},l=new t,c;function d(h){var f=h.v===c?h.w:h.v,g=l.priority(f);if(g!==void 0){var m=r(h);m<g&&(a[f]=c,l.decrease(f,m))}}if(s.nodeCount()===0)return o;n.each(s.nodes(),function(h){l.add(h,Number.POSITIVE_INFINITY),o.setNode(h)}),l.decrease(s.nodes()[0],0);for(var u=!1;l.size()>0;){if(c=l.removeMin(),n.has(a,c))o.setEdge(c,a[c]);else{if(u)throw new Error("Input graph is not connected: "+s);u=!0}s.nodeEdges(c).forEach(d)}return o}return dN}var uN,J6;function Iwe(){return J6||(J6=1,uN={components:ywe(),dijkstra:gee(),dijkstraAll:Swe(),findCycles:Cwe(),floydWarshall:Lwe(),isAcyclic:kwe(),postorder:xwe(),preorder:Twe(),prim:Dwe(),tarjan:mee(),topsort:pee()}),uN}var hN,$6;function Mwe(){if($6)return hN;$6=1;var n=_we();return hN={Graph:n.Graph,json:wwe(),alg:Iwe(),version:n.version},hN}var VC;if(typeof O4=="function")try{VC=Mwe()}catch{}VC||(VC=window.graphlib);var Gl=VC,fN,Q6;function Ewe(){if(Q6)return fN;Q6=1;var n=Bq(),e=1,t=4;function i(s){return n(s,e|t)}return fN=i,fN}var gN,q6;function c2(){if(q6)return gN;q6=1;var n=d0(),e=ou(),t=e2(),i=$a();function s(r,o,a){if(!i(a))return!1;var l=typeof o;return(l=="number"?e(a)&&t(o,a.length):l=="string"&&o in a)?n(a[o],r):!1}return gN=s,gN}var mN,eX;function Nwe(){if(eX)return mN;eX=1;var n=l2(),e=d0(),t=c2(),i=qg(),s=Object.prototype,r=s.hasOwnProperty,o=n(function(a,l){a=Object(a);var c=-1,d=l.length,u=d>2?l[2]:void 0;for(u&&t(l[0],l[1],u)&&(d=1);++c<d;)for(var h=l[c],f=i(h),g=-1,m=f.length;++g<m;){var p=f[g],b=a[p];(b===void 0||e(b,s[p])&&!r.call(a,p))&&(a[p]=h[p])}return a});return mN=o,mN}var pN,tX;function Rwe(){if(tX)return pN;tX=1;var n=au(),e=ou(),t=sf();function i(s){return function(r,o,a){var l=Object(r);if(!e(r)){var c=n(o,3);r=t(r),o=function(u){return c(l[u],u,l)}}var d=s(r,o,a);return d>-1?l[c?r[d]:d]:void 0}}return pN=i,pN}var bN,iX;function Wwe(){if(iX)return bN;iX=1;var n=/\s/;function e(t){for(var i=t.length;i--&&n.test(t.charAt(i)););return i}return bN=e,bN}var vN,nX;function Awe(){if(nX)return vN;nX=1;var n=Wwe(),e=/^\s+/;function t(i){return i&&i.slice(0,n(i)+1).replace(e,"")}return vN=t,vN}var _N,sX;function Fwe(){if(sX)return _N;sX=1;var n=Awe(),e=$a(),t=g0(),i=NaN,s=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt;function l(c){if(typeof c=="number")return c;if(t(c))return i;if(e(c)){var d=typeof c.valueOf=="function"?c.valueOf():c;c=e(d)?d+"":d}if(typeof c!="string")return c===0?c:+c;c=n(c);var u=r.test(c);return u||o.test(c)?a(c.slice(2),u?2:8):s.test(c)?i:+c}return _N=l,_N}var wN,rX;function vee(){if(rX)return wN;rX=1;var n=Fwe(),e=1/0,t=17976931348623157e292;function i(s){if(!s)return s===0?s:0;if(s=n(s),s===e||s===-e){var r=s<0?-1:1;return r*t}return s===s?s:0}return wN=i,wN}var yN,oX;function Vwe(){if(oX)return yN;oX=1;var n=vee();function e(t){var i=n(t),s=i%1;return i===i?s?i-s:i:0}return yN=e,yN}var SN,aX;function Pwe(){if(aX)return SN;aX=1;var n=dee(),e=au(),t=Vwe(),i=Math.max;function s(r,o,a){var l=r==null?0:r.length;if(!l)return-1;var c=a==null?0:t(a);return c<0&&(c=i(l+c,0)),n(r,e(o,3),c)}return SN=s,SN}var CN,lX;function Owe(){if(lX)return CN;lX=1;var n=Rwe(),e=Pwe(),t=n(e);return CN=t,CN}var LN,cX;function _ee(){if(cX)return LN;cX=1;var n=eV();function e(t){var i=t==null?0:t.length;return i?n(t,1):[]}return LN=e,LN}var kN,dX;function Zwe(){if(dX)return kN;dX=1;var n=J4(),e=Xq(),t=qg();function i(s,r){return s==null?s:n(s,e(r),t)}return kN=i,kN}var xN,uX;function Gwe(){if(uX)return xN;uX=1;function n(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}return xN=n,xN}var TN,hX;function Bwe(){if(hX)return TN;hX=1;var n=Qx(),e=$4(),t=au();function i(s,r){var o={};return r=t(r,3),e(s,function(a,l,c){n(o,l,r(a,l,c))}),o}return TN=i,TN}var DN,fX;function iV(){if(fX)return DN;fX=1;var n=g0();function e(t,i,s){for(var r=-1,o=t.length;++r<o;){var a=t[r],l=i(a);if(l!=null&&(c===void 0?l===l&&!n(l):s(l,c)))var c=l,d=a}return d}return DN=e,DN}var IN,gX;function Xwe(){if(gX)return IN;gX=1;function n(e,t){return e>t}return IN=n,IN}var MN,mX;function zwe(){if(mX)return MN;mX=1;var n=iV(),e=Xwe(),t=em();function i(s){return s&&s.length?n(s,t,e):void 0}return MN=i,MN}var EN,pX;function wee(){if(pX)return EN;pX=1;var n=Qx(),e=d0();function t(i,s,r){(r!==void 0&&!e(i[s],r)||r===void 0&&!(s in i))&&n(i,s,r)}return EN=t,EN}var NN,bX;function Hwe(){if(bX)return NN;bX=1;var n=$g(),e=n2(),t=zc(),i="[object Object]",s=Function.prototype,r=Object.prototype,o=s.toString,a=r.hasOwnProperty,l=o.call(Object);function c(d){if(!t(d)||n(d)!=i)return!1;var u=e(d);if(u===null)return!0;var h=a.call(u,"constructor")&&u.constructor;return typeof h=="function"&&h instanceof h&&o.call(h)==l}return NN=c,NN}var RN,vX;function yee(){if(vX)return RN;vX=1;function n(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}return RN=n,RN}var WN,_X;function Uwe(){if(_X)return WN;_X=1;var n=tw(),e=qg();function t(i){return n(i,e(i))}return WN=t,WN}var AN,wX;function Ywe(){if(wX)return AN;wX=1;var n=wee(),e=Mq(),t=Oq(),i=Eq(),s=Gq(),r=iw(),o=zs(),a=uee(),l=h0(),c=ew(),d=$a(),u=Hwe(),h=nw(),f=yee(),g=Uwe();function m(p,b,w,v,_,y,C){var S=f(p,w),k=f(b,w),I=C.get(k);if(I){n(p,w,I);return}var T=y?y(S,k,w+"",p,b,C):void 0,D=T===void 0;if(D){var M=o(k),E=!M&&l(k),W=!M&&!E&&h(k);T=k,M||E||W?o(S)?T=S:a(S)?T=i(S):E?(D=!1,T=e(k,!0)):W?(D=!1,T=t(k,!0)):T=[]:u(k)||r(k)?(T=S,r(S)?T=g(S):(!d(S)||c(S))&&(T=s(k))):D=!1}D&&(C.set(k,T),_(T,k,v,y,C),C.delete(k)),n(p,w,T)}return AN=m,AN}var FN,yX;function Kwe(){if(yX)return FN;yX=1;var n=$x(),e=wee(),t=J4(),i=Ywe(),s=$a(),r=qg(),o=yee();function a(l,c,d,u,h){l!==c&&t(c,function(f,g){if(h||(h=new n),s(f))i(l,c,g,d,a,u,h);else{var m=u?u(o(l,g),f,g+"",l,c,h):void 0;m===void 0&&(m=f),e(l,g,m)}},r)}return FN=a,FN}var VN,SX;function jwe(){if(SX)return VN;SX=1;var n=l2(),e=c2();function t(i){return n(function(s,r){var o=-1,a=r.length,l=a>1?r[a-1]:void 0,c=a>2?r[2]:void 0;for(l=i.length>3&&typeof l=="function"?(a--,l):void 0,c&&e(r[0],r[1],c)&&(l=a<3?void 0:l,a=1),s=Object(s);++o<a;){var d=r[o];d&&i(s,d,o,l)}return s})}return VN=t,VN}var PN,CX;function Jwe(){if(CX)return PN;CX=1;var n=Kwe(),e=jwe(),t=e(function(i,s,r){n(i,s,r)});return PN=t,PN}var ON,LX;function See(){if(LX)return ON;LX=1;function n(e,t){return e<t}return ON=n,ON}var ZN,kX;function $we(){if(kX)return ZN;kX=1;var n=iV(),e=See(),t=em();function i(s){return s&&s.length?n(s,t,e):void 0}return ZN=i,ZN}var GN,xX;function Qwe(){if(xX)return GN;xX=1;var n=iV(),e=au(),t=See();function i(s,r){return s&&s.length?n(s,e(r,2),t):void 0}return GN=i,GN}var BN,TX;function qwe(){if(TX)return BN;TX=1;var n=Zl(),e=function(){return n.Date.now()};return BN=e,BN}var XN,DX;function eye(){if(DX)return XN;DX=1;var n=qx(),e=o2(),t=e2(),i=$a(),s=sw();function r(o,a,l,c){if(!i(o))return o;a=e(a,o);for(var d=-1,u=a.length,h=u-1,f=o;f!=null&&++d<u;){var g=s(a[d]),m=l;if(g==="__proto__"||g==="constructor"||g==="prototype")return o;if(d!=h){var p=f[g];m=c?c(p,g,f):void 0,m===void 0&&(m=i(p)?p:t(a[d+1])?[]:{})}n(f,g,m),f=f[g]}return o}return XN=r,XN}var zN,IX;function tye(){if(IX)return zN;IX=1;var n=a2(),e=eye(),t=o2();function i(s,r,o){for(var a=-1,l=r.length,c={};++a<l;){var d=r[a],u=n(s,d);o(u,d)&&e(c,t(d,s),u)}return c}return zN=i,zN}var HN,MX;function iye(){if(MX)return HN;MX=1;var n=tye(),e=eee();function t(i,s){return n(i,s,function(r,o){return e(i,o)})}return HN=t,HN}var UN,EX;function nye(){if(EX)return UN;EX=1;var n=_ee(),e=lee(),t=cee();function i(s){return t(e(s,void 0,n),s+"")}return UN=i,UN}var YN,NX;function sye(){if(NX)return YN;NX=1;var n=iye(),e=nye(),t=e(function(i,s){return i==null?{}:n(i,s)});return YN=t,YN}var KN,RX;function rye(){if(RX)return KN;RX=1;var n=Math.ceil,e=Math.max;function t(i,s,r,o){for(var a=-1,l=e(n((s-i)/(r||1)),0),c=Array(l);l--;)c[o?l:++a]=i,i+=r;return c}return KN=t,KN}var jN,WX;function oye(){if(WX)return jN;WX=1;var n=rye(),e=c2(),t=vee();function i(s){return function(r,o,a){return a&&typeof a!="number"&&e(r,o,a)&&(o=a=void 0),r=t(r),o===void 0?(o=r,r=0):o=t(o),a=a===void 0?r<o?1:-1:t(a),n(r,o,a,s)}}return jN=i,jN}var JN,AX;function aye(){if(AX)return JN;AX=1;var n=oye(),e=n();return JN=e,JN}var $N,FX;function lye(){if(FX)return $N;FX=1;function n(e,t){var i=e.length;for(e.sort(t);i--;)e[i]=e[i].value;return e}return $N=n,$N}var QN,VX;function cye(){if(VX)return QN;VX=1;var n=g0();function e(t,i){if(t!==i){var s=t!==void 0,r=t===null,o=t===t,a=n(t),l=i!==void 0,c=i===null,d=i===i,u=n(i);if(!c&&!u&&!a&&t>i||a&&l&&d&&!c&&!u||r&&l&&d||!s&&d||!o)return 1;if(!r&&!a&&!u&&t<i||u&&s&&o&&!r&&!a||c&&s&&o||!l&&o||!d)return-1}return 0}return QN=e,QN}var qN,PX;function dye(){if(PX)return qN;PX=1;var n=cye();function e(t,i,s){for(var r=-1,o=t.criteria,a=i.criteria,l=o.length,c=s.length;++r<l;){var d=n(o[r],a[r]);if(d){if(r>=c)return d;var u=s[r];return d*(u=="desc"?-1:1)}}return t.index-i.index}return qN=e,qN}var e5,OX;function uye(){if(OX)return e5;OX=1;var n=r2(),e=a2(),t=au(),i=ree(),s=lye(),r=t2(),o=dye(),a=em(),l=zs();function c(d,u,h){u.length?u=n(u,function(m){return l(m)?function(p){return e(p,m.length===1?m[0]:m)}:m}):u=[a];var f=-1;u=n(u,r(t));var g=i(d,function(m,p,b){var w=n(u,function(v){return v(m)});return{criteria:w,index:++f,value:m}});return s(g,function(m,p){return o(m,p,h)})}return e5=c,e5}var t5,ZX;function hye(){if(ZX)return t5;ZX=1;var n=eV(),e=uye(),t=l2(),i=c2(),s=t(function(r,o){if(r==null)return[];var a=o.length;return a>1&&i(r,o[0],o[1])?o=[]:a>2&&i(o[0],o[1],o[2])&&(o=[o[0]]),e(r,n(o,1),[])});return t5=s,t5}var i5,GX;function fye(){if(GX)return i5;GX=1;var n=Qq(),e=0;function t(i){var s=++e;return n(i)+s}return i5=t,i5}var n5,BX;function gye(){if(BX)return n5;BX=1;function n(e,t,i){for(var s=-1,r=e.length,o=t.length,a={};++s<r;){var l=s<o?t[s]:void 0;i(a,e[s],l)}return a}return n5=n,n5}var s5,XX;function mye(){if(XX)return s5;XX=1;var n=qx(),e=gye();function t(i,s){return e(i||[],s||[],n)}return s5=t,s5}var PC;if(typeof O4=="function")try{PC={cloneDeep:Ewe(),constant:j4(),defaults:Nwe(),each:Hq(),filter:iee(),find:Owe(),flatten:_ee(),forEach:zq(),forIn:Zwe(),has:nee(),isUndefined:see(),last:Gwe(),map:oee(),mapValues:Bwe(),max:zwe(),merge:Jwe(),min:$we(),minBy:Qwe(),now:qwe(),pick:sye(),range:aye(),reduce:aee(),sortBy:hye(),uniqueId:fye(),values:hee(),zipObject:mye()}}catch{}PC||(PC=window._);var es=PC,pye=d2;function d2(){var n={};n._next=n._prev=n,this._sentinel=n}d2.prototype.dequeue=function(){var n=this._sentinel,e=n._prev;if(e!==n)return Cee(e),e};d2.prototype.enqueue=function(n){var e=this._sentinel;n._prev&&n._next&&Cee(n),n._next=e._next,e._next._prev=n,e._next=n,n._prev=e};d2.prototype.toString=function(){for(var n=[],e=this._sentinel,t=e._prev;t!==e;)n.push(JSON.stringify(t,bye)),t=t._prev;return"["+n.join(", ")+"]"};function Cee(n){n._prev._next=n._next,n._next._prev=n._prev,delete n._next,delete n._prev}function bye(n,e){if(n!=="_next"&&n!=="_prev")return e}var Sd=es,vye=Gl.Graph,_ye=pye,wye=Sye,yye=Sd.constant(1);function Sye(n,e){if(n.nodeCount()<=1)return[];var t=Lye(n,e||yye),i=Cye(t.graph,t.buckets,t.zeroIdx);return Sd.flatten(Sd.map(i,function(s){return n.outEdges(s.v,s.w)}),!0)}function Cye(n,e,t){for(var i=[],s=e[e.length-1],r=e[0],o;n.nodeCount();){for(;o=r.dequeue();)r5(n,e,t,o);for(;o=s.dequeue();)r5(n,e,t,o);if(n.nodeCount()){for(var a=e.length-2;a>0;--a)if(o=e[a].dequeue(),o){i=i.concat(r5(n,e,t,o,!0));break}}}return i}function r5(n,e,t,i,s){var r=s?[]:void 0;return Sd.forEach(n.inEdges(i.v),function(o){var a=n.edge(o),l=n.node(o.v);s&&r.push({v:o.v,w:o.w}),l.out-=a,F9(e,t,l)}),Sd.forEach(n.outEdges(i.v),function(o){var a=n.edge(o),l=o.w,c=n.node(l);c.in-=a,F9(e,t,c)}),n.removeNode(i.v),r}function Lye(n,e){var t=new vye,i=0,s=0;Sd.forEach(n.nodes(),function(a){t.setNode(a,{v:a,in:0,out:0})}),Sd.forEach(n.edges(),function(a){var l=t.edge(a.v,a.w)||0,c=e(a),d=l+c;t.setEdge(a.v,a.w,d),s=Math.max(s,t.node(a.v).out+=c),i=Math.max(i,t.node(a.w).in+=c)});var r=Sd.range(s+i+3).map(function(){return new _ye}),o=i+1;return Sd.forEach(t.nodes(),function(a){F9(r,o,t.node(a))}),{graph:t,buckets:r,zeroIdx:o}}function F9(n,e,t){t.out?t.in?n[t.out-t.in+e].enqueue(t):n[n.length-1].enqueue(t):n[0].enqueue(t)}var Hf=es,kye=wye,xye={run:Tye,undo:Iye};function Tye(n){var e=n.graph().acyclicer==="greedy"?kye(n,t(n)):Dye(n);Hf.forEach(e,function(i){var s=n.edge(i);n.removeEdge(i),s.forwardName=i.name,s.reversed=!0,n.setEdge(i.w,i.v,s,Hf.uniqueId("rev"))});function t(i){return function(s){return i.edge(s).weight}}}function Dye(n){var e=[],t={},i={};function s(r){Hf.has(i,r)||(i[r]=!0,t[r]=!0,Hf.forEach(n.outEdges(r),function(o){Hf.has(t,o.w)?e.push(o):s(o.w)}),delete t[r])}return Hf.forEach(n.nodes(),s),e}function Iye(n){Hf.forEach(n.edges(),function(e){var t=n.edge(e);if(t.reversed){n.removeEdge(e);var i=t.forwardName;delete t.reversed,delete t.forwardName,n.setEdge(e.w,e.v,t,i)}})}var an=es,Lee=Gl.Graph,Vo={addDummyNode:kee,simplify:Mye,asNonCompoundGraph:Eye,successorWeights:Nye,predecessorWeights:Rye,intersectRect:Wye,buildLayerMatrix:Aye,normalizeRanks:Fye,removeEmptyRanks:Vye,addBorderNode:Pye,maxRank:xee,partition:Oye,time:Zye,notime:Gye};function kee(n,e,t,i){var s;do s=an.uniqueId(i);while(n.hasNode(s));return t.dummy=e,n.setNode(s,t),s}function Mye(n){var e=new Lee().setGraph(n.graph());return an.forEach(n.nodes(),function(t){e.setNode(t,n.node(t))}),an.forEach(n.edges(),function(t){var i=e.edge(t.v,t.w)||{weight:0,minlen:1},s=n.edge(t);e.setEdge(t.v,t.w,{weight:i.weight+s.weight,minlen:Math.max(i.minlen,s.minlen)})}),e}function Eye(n){var e=new Lee({multigraph:n.isMultigraph()}).setGraph(n.graph());return an.forEach(n.nodes(),function(t){n.children(t).length||e.setNode(t,n.node(t))}),an.forEach(n.edges(),function(t){e.setEdge(t,n.edge(t))}),e}function Nye(n){var e=an.map(n.nodes(),function(t){var i={};return an.forEach(n.outEdges(t),function(s){i[s.w]=(i[s.w]||0)+n.edge(s).weight}),i});return an.zipObject(n.nodes(),e)}function Rye(n){var e=an.map(n.nodes(),function(t){var i={};return an.forEach(n.inEdges(t),function(s){i[s.v]=(i[s.v]||0)+n.edge(s).weight}),i});return an.zipObject(n.nodes(),e)}function Wye(n,e){var t=n.x,i=n.y,s=e.x-t,r=e.y-i,o=n.width/2,a=n.height/2;if(!s&&!r)throw new Error("Not possible to find intersection inside of the rectangle");var l,c;return Math.abs(r)*o>Math.abs(s)*a?(r<0&&(a=-a),l=a*s/r,c=a):(s<0&&(o=-o),l=o,c=o*r/s),{x:t+l,y:i+c}}function Aye(n){var e=an.map(an.range(xee(n)+1),function(){return[]});return an.forEach(n.nodes(),function(t){var i=n.node(t),s=i.rank;an.isUndefined(s)||(e[s][i.order]=t)}),e}function Fye(n){var e=an.min(an.map(n.nodes(),function(t){return n.node(t).rank}));an.forEach(n.nodes(),function(t){var i=n.node(t);an.has(i,"rank")&&(i.rank-=e)})}function Vye(n){var e=an.min(an.map(n.nodes(),function(r){return n.node(r).rank})),t=[];an.forEach(n.nodes(),function(r){var o=n.node(r).rank-e;t[o]||(t[o]=[]),t[o].push(r)});var i=0,s=n.graph().nodeRankFactor;an.forEach(t,function(r,o){an.isUndefined(r)&&o%s!==0?--i:i&&an.forEach(r,function(a){n.node(a).rank+=i})})}function Pye(n,e,t,i){var s={width:0,height:0};return arguments.length>=4&&(s.rank=t,s.order=i),kee(n,"border",s,e)}function xee(n){return an.max(an.map(n.nodes(),function(e){var t=n.node(e).rank;if(!an.isUndefined(t))return t}))}function Oye(n,e){var t={lhs:[],rhs:[]};return an.forEach(n,function(i){e(i)?t.lhs.push(i):t.rhs.push(i)}),t}function Zye(n,e){var t=an.now();try{return e()}finally{console.log(n+" time: "+(an.now()-t)+"ms")}}function Gye(n,e){return e()}var Tee=es,Bye=Vo,Xye={run:zye,undo:Uye};function zye(n){n.graph().dummyChains=[],Tee.forEach(n.edges(),function(e){Hye(n,e)})}function Hye(n,e){var t=e.v,i=n.node(t).rank,s=e.w,r=n.node(s).rank,o=e.name,a=n.edge(e),l=a.labelRank;if(r!==i+1){n.removeEdge(e);var c,d,u;for(u=0,++i;i<r;++u,++i)a.points=[],d={width:0,height:0,edgeLabel:a,edgeObj:e,rank:i},c=Bye.addDummyNode(n,"edge",d,"_d"),i===l&&(d.width=a.width,d.height=a.height,d.dummy="edge-label",d.labelpos=a.labelpos),n.setEdge(t,c,{weight:a.weight},o),u===0&&n.graph().dummyChains.push(c),t=c;n.setEdge(t,s,{weight:a.weight},o)}}function Uye(n){Tee.forEach(n.graph().dummyChains,function(e){var t=n.node(e),i=t.edgeLabel,s;for(n.setEdge(t.edgeObj,i);t.dummy;)s=n.successors(e)[0],n.removeNode(e),i.points.push({x:t.x,y:t.y}),t.dummy==="edge-label"&&(i.x=t.x,i.y=t.y,i.width=t.width,i.height=t.height),e=s,t=n.node(e)})}var sy=es,u2={longestPath:Yye,slack:Kye};function Yye(n){var e={};function t(i){var s=n.node(i);if(sy.has(e,i))return s.rank;e[i]=!0;var r=sy.min(sy.map(n.outEdges(i),function(o){return t(o.w)-n.edge(o).minlen}));return(r===Number.POSITIVE_INFINITY||r===void 0||r===null)&&(r=0),s.rank=r}sy.forEach(n.sources(),t)}function Kye(n,e){return n.node(e.w).rank-n.node(e.v).rank-n.edge(e).minlen}var OC=es,jye=Gl.Graph,ZC=u2.slack,Dee=Jye;function Jye(n){var e=new jye({directed:!1}),t=n.nodes()[0],i=n.nodeCount();e.setNode(t,{});for(var s,r;$ye(e,n)<i;)s=Qye(e,n),r=e.hasNode(s.v)?ZC(n,s):-ZC(n,s),qye(e,n,r);return e}function $ye(n,e){function t(i){OC.forEach(e.nodeEdges(i),function(s){var r=s.v,o=i===r?s.w:r;!n.hasNode(o)&&!ZC(e,s)&&(n.setNode(o,{}),n.setEdge(i,o,{}),t(o))})}return OC.forEach(n.nodes(),t),n.nodeCount()}function Qye(n,e){return OC.minBy(e.edges(),function(t){if(n.hasNode(t.v)!==n.hasNode(t.w))return ZC(e,t)})}function qye(n,e,t){OC.forEach(n.nodes(),function(i){e.node(i).rank+=t})}var jd=es,eSe=Dee,tSe=u2.slack,iSe=u2.longestPath,nSe=Gl.alg.preorder,sSe=Gl.alg.postorder,rSe=Vo.simplify,oSe=tm;tm.initLowLimValues=sV;tm.initCutValues=nV;tm.calcCutValue=Iee;tm.leaveEdge=Eee;tm.enterEdge=Nee;tm.exchangeEdges=Ree;function tm(n){n=rSe(n),iSe(n);var e=eSe(n);sV(e),nV(e,n);for(var t,i;t=Eee(e);)i=Nee(e,n,t),Ree(e,n,t,i)}function nV(n,e){var t=sSe(n,n.nodes());t=t.slice(0,t.length-1),jd.forEach(t,function(i){aSe(n,e,i)})}function aSe(n,e,t){var i=n.node(t),s=i.parent;n.edge(t,s).cutvalue=Iee(n,e,t)}function Iee(n,e,t){var i=n.node(t),s=i.parent,r=!0,o=e.edge(t,s),a=0;return o||(r=!1,o=e.edge(s,t)),a=o.weight,jd.forEach(e.nodeEdges(t),function(l){var c=l.v===t,d=c?l.w:l.v;if(d!==s){var u=c===r,h=e.edge(l).weight;if(a+=u?h:-h,cSe(n,t,d)){var f=n.edge(t,d).cutvalue;a+=u?-f:f}}}),a}function sV(n,e){arguments.length<2&&(e=n.nodes()[0]),Mee(n,{},1,e)}function Mee(n,e,t,i,s){var r=t,o=n.node(i);return e[i]=!0,jd.forEach(n.neighbors(i),function(a){jd.has(e,a)||(t=Mee(n,e,t,a,i))}),o.low=r,o.lim=t++,s?o.parent=s:delete o.parent,t}function Eee(n){return jd.find(n.edges(),function(e){return n.edge(e).cutvalue<0})}function Nee(n,e,t){var i=t.v,s=t.w;e.hasEdge(i,s)||(i=t.w,s=t.v);var r=n.node(i),o=n.node(s),a=r,l=!1;r.lim>o.lim&&(a=o,l=!0);var c=jd.filter(e.edges(),function(d){return l===zX(n,n.node(d.v),a)&&l!==zX(n,n.node(d.w),a)});return jd.minBy(c,function(d){return tSe(e,d)})}function Ree(n,e,t,i){var s=t.v,r=t.w;n.removeEdge(s,r),n.setEdge(i.v,i.w,{}),sV(n),nV(n,e),lSe(n,e)}function lSe(n,e){var t=jd.find(n.nodes(),function(s){return!e.node(s).parent}),i=nSe(n,t);i=i.slice(1),jd.forEach(i,function(s){var r=n.node(s).parent,o=e.edge(s,r),a=!1;o||(o=e.edge(r,s),a=!0),e.node(s).rank=e.node(r).rank+(a?o.minlen:-o.minlen)})}function cSe(n,e,t){return n.hasEdge(e,t)}function zX(n,e,t){return t.low<=e.lim&&e.lim<=t.lim}var dSe=u2,Wee=dSe.longestPath,uSe=Dee,hSe=oSe,fSe=gSe;function gSe(n){switch(n.graph().ranker){case"network-simplex":HX(n);break;case"tight-tree":pSe(n);break;case"longest-path":mSe(n);break;default:HX(n)}}var mSe=Wee;function pSe(n){Wee(n),uSe(n)}function HX(n){hSe(n)}var V9=es,bSe=vSe;function vSe(n){var e=wSe(n);V9.forEach(n.graph().dummyChains,function(t){for(var i=n.node(t),s=i.edgeObj,r=_Se(n,e,s.v,s.w),o=r.path,a=r.lca,l=0,c=o[l],d=!0;t!==s.w;){if(i=n.node(t),d){for(;(c=o[l])!==a&&n.node(c).maxRank<i.rank;)l++;c===a&&(d=!1)}if(!d){for(;l<o.length-1&&n.node(c=o[l+1]).minRank<=i.rank;)l++;c=o[l]}n.setParent(t,c),t=n.successors(t)[0]}})}function _Se(n,e,t,i){var s=[],r=[],o=Math.min(e[t].low,e[i].low),a=Math.max(e[t].lim,e[i].lim),l,c;l=t;do l=n.parent(l),s.push(l);while(l&&(e[l].low>o||a>e[l].lim));for(c=l,l=i;(l=n.parent(l))!==c;)r.push(l);return{path:s.concat(r.reverse()),lca:c}}function wSe(n){var e={},t=0;function i(s){var r=t;V9.forEach(n.children(s),i),e[s]={low:r,lim:t++}}return V9.forEach(n.children(),i),e}var Cd=es,P9=Vo,ySe={run:SSe,cleanup:kSe};function SSe(n){var e=P9.addDummyNode(n,"root",{},"_root"),t=CSe(n),i=Cd.max(Cd.values(t))-1,s=2*i+1;n.graph().nestingRoot=e,Cd.forEach(n.edges(),function(o){n.edge(o).minlen*=s});var r=LSe(n)+1;Cd.forEach(n.children(),function(o){Aee(n,e,s,r,i,t,o)}),n.graph().nodeRankFactor=s}function Aee(n,e,t,i,s,r,o){var a=n.children(o);if(!a.length){o!==e&&n.setEdge(e,o,{weight:0,minlen:t});return}var l=P9.addBorderNode(n,"_bt"),c=P9.addBorderNode(n,"_bb"),d=n.node(o);n.setParent(l,o),d.borderTop=l,n.setParent(c,o),d.borderBottom=c,Cd.forEach(a,function(u){Aee(n,e,t,i,s,r,u);var h=n.node(u),f=h.borderTop?h.borderTop:u,g=h.borderBottom?h.borderBottom:u,m=h.borderTop?i:2*i,p=f!==g?1:s-r[o]+1;n.setEdge(l,f,{weight:m,minlen:p,nestingEdge:!0}),n.setEdge(g,c,{weight:m,minlen:p,nestingEdge:!0})}),n.parent(o)||n.setEdge(e,l,{weight:0,minlen:s+r[o]})}function CSe(n){var e={};function t(i,s){var r=n.children(i);r&&r.length&&Cd.forEach(r,function(o){t(o,s+1)}),e[i]=s}return Cd.forEach(n.children(),function(i){t(i,1)}),e}function LSe(n){return Cd.reduce(n.edges(),function(e,t){return e+n.edge(t).weight},0)}function kSe(n){var e=n.graph();n.removeNode(e.nestingRoot),delete e.nestingRoot,Cd.forEach(n.edges(),function(t){var i=n.edge(t);i.nestingEdge&&n.removeEdge(t)})}var o5=es,xSe=Vo,TSe=DSe;function DSe(n){function e(t){var i=n.children(t),s=n.node(t);if(i.length&&o5.forEach(i,e),o5.has(s,"minRank")){s.borderLeft=[],s.borderRight=[];for(var r=s.minRank,o=s.maxRank+1;r<o;++r)UX(n,"borderLeft","_bl",t,s,r),UX(n,"borderRight","_br",t,s,r)}}o5.forEach(n.children(),e)}function UX(n,e,t,i,s,r){var o={width:0,height:0,rank:r,borderType:e},a=s[e][r-1],l=xSe.addDummyNode(n,"border",o,t);s[e][r]=l,n.setParent(l,i),a&&n.setEdge(a,l,{weight:1})}var _c=es,ISe={adjust:MSe,undo:ESe};function MSe(n){var e=n.graph().rankdir.toLowerCase();(e==="lr"||e==="rl")&&Fee(n)}function ESe(n){var e=n.graph().rankdir.toLowerCase();(e==="bt"||e==="rl")&&NSe(n),(e==="lr"||e==="rl")&&(RSe(n),Fee(n))}function Fee(n){_c.forEach(n.nodes(),function(e){YX(n.node(e))}),_c.forEach(n.edges(),function(e){YX(n.edge(e))})}function YX(n){var e=n.width;n.width=n.height,n.height=e}function NSe(n){_c.forEach(n.nodes(),function(e){a5(n.node(e))}),_c.forEach(n.edges(),function(e){var t=n.edge(e);_c.forEach(t.points,a5),_c.has(t,"y")&&a5(t)})}function a5(n){n.y=-n.y}function RSe(n){_c.forEach(n.nodes(),function(e){l5(n.node(e))}),_c.forEach(n.edges(),function(e){var t=n.edge(e);_c.forEach(t.points,l5),_c.has(t,"x")&&l5(t)})}function l5(n){var e=n.x;n.x=n.y,n.y=e}var qc=es,WSe=ASe;function ASe(n){var e={},t=qc.filter(n.nodes(),function(a){return!n.children(a).length}),i=qc.max(qc.map(t,function(a){return n.node(a).rank})),s=qc.map(qc.range(i+1),function(){return[]});function r(a){if(!qc.has(e,a)){e[a]=!0;var l=n.node(a);s[l.rank].push(a),qc.forEach(n.successors(a),r)}}var o=qc.sortBy(t,function(a){return n.node(a).rank});return qc.forEach(o,r),s}var bu=es,FSe=VSe;function VSe(n,e){for(var t=0,i=1;i<e.length;++i)t+=PSe(n,e[i-1],e[i]);return t}function PSe(n,e,t){for(var i=bu.zipObject(t,bu.map(t,function(c,d){return d})),s=bu.flatten(bu.map(e,function(c){return bu.sortBy(bu.map(n.outEdges(c),function(d){return{pos:i[d.w],weight:n.edge(d).weight}}),"pos")}),!0),r=1;r<t.length;)r<<=1;var o=2*r-1;r-=1;var a=bu.map(new Array(o),function(){return 0}),l=0;return bu.forEach(s.forEach(function(c){var d=c.pos+r;a[d]+=c.weight;for(var u=0;d>0;)d%2&&(u+=a[d+1]),d=d-1>>1,a[d]+=c.weight;l+=c.weight*u})),l}var KX=es,OSe=ZSe;function ZSe(n,e){return KX.map(e,function(t){var i=n.inEdges(t);if(i.length){var s=KX.reduce(i,function(r,o){var a=n.edge(o),l=n.node(o.v);return{sum:r.sum+a.weight*l.order,weight:r.weight+a.weight}},{sum:0,weight:0});return{v:t,barycenter:s.sum/s.weight,weight:s.weight}}else return{v:t}})}var Yo=es,GSe=BSe;function BSe(n,e){var t={};Yo.forEach(n,function(s,r){var o=t[s.v]={indegree:0,in:[],out:[],vs:[s.v],i:r};Yo.isUndefined(s.barycenter)||(o.barycenter=s.barycenter,o.weight=s.weight)}),Yo.forEach(e.edges(),function(s){var r=t[s.v],o=t[s.w];!Yo.isUndefined(r)&&!Yo.isUndefined(o)&&(o.indegree++,r.out.push(t[s.w]))});var i=Yo.filter(t,function(s){return!s.indegree});return XSe(i)}function XSe(n){var e=[];function t(r){return function(o){o.merged||(Yo.isUndefined(o.barycenter)||Yo.isUndefined(r.barycenter)||o.barycenter>=r.barycenter)&&zSe(r,o)}}function i(r){return function(o){o.in.push(r),--o.indegree===0&&n.push(o)}}for(;n.length;){var s=n.pop();e.push(s),Yo.forEach(s.in.reverse(),t(s)),Yo.forEach(s.out,i(s))}return Yo.map(Yo.filter(e,function(r){return!r.merged}),function(r){return Yo.pick(r,["vs","i","barycenter","weight"])})}function zSe(n,e){var t=0,i=0;n.weight&&(t+=n.barycenter*n.weight,i+=n.weight),e.weight&&(t+=e.barycenter*e.weight,i+=e.weight),n.vs=e.vs.concat(n.vs),n.barycenter=t/i,n.weight=i,n.i=Math.min(e.i,n.i),e.merged=!0}var yv=es,HSe=Vo,USe=YSe;function YSe(n,e){var t=HSe.partition(n,function(d){return yv.has(d,"barycenter")}),i=t.lhs,s=yv.sortBy(t.rhs,function(d){return-d.i}),r=[],o=0,a=0,l=0;i.sort(KSe(!!e)),l=jX(r,s,l),yv.forEach(i,function(d){l+=d.vs.length,r.push(d.vs),o+=d.barycenter*d.weight,a+=d.weight,l=jX(r,s,l)});var c={vs:yv.flatten(r,!0)};return a&&(c.barycenter=o/a,c.weight=a),c}function jX(n,e,t){for(var i;e.length&&(i=yv.last(e)).i<=t;)e.pop(),n.push(i.vs),t++;return t}function KSe(n){return function(e,t){return e.barycenter<t.barycenter?-1:e.barycenter>t.barycenter?1:n?t.i-e.i:e.i-t.i}}var Fu=es,jSe=OSe,JSe=GSe,$Se=USe,QSe=Vee;function Vee(n,e,t,i){var s=n.children(e),r=n.node(e),o=r?r.borderLeft:void 0,a=r?r.borderRight:void 0,l={};o&&(s=Fu.filter(s,function(g){return g!==o&&g!==a}));var c=jSe(n,s);Fu.forEach(c,function(g){if(n.children(g.v).length){var m=Vee(n,g.v,t,i);l[g.v]=m,Fu.has(m,"barycenter")&&eCe(g,m)}});var d=JSe(c,t);qSe(d,l);var u=$Se(d,i);if(o&&(u.vs=Fu.flatten([o,u.vs,a],!0),n.predecessors(o).length)){var h=n.node(n.predecessors(o)[0]),f=n.node(n.predecessors(a)[0]);Fu.has(u,"barycenter")||(u.barycenter=0,u.weight=0),u.barycenter=(u.barycenter*u.weight+h.order+f.order)/(u.weight+2),u.weight+=2}return u}function qSe(n,e){Fu.forEach(n,function(t){t.vs=Fu.flatten(t.vs.map(function(i){return e[i]?e[i].vs:i}),!0)})}function eCe(n,e){Fu.isUndefined(n.barycenter)?(n.barycenter=e.barycenter,n.weight=e.weight):(n.barycenter=(n.barycenter*n.weight+e.barycenter*e.weight)/(n.weight+e.weight),n.weight+=e.weight)}var Sv=es,tCe=Gl.Graph,iCe=nCe;function nCe(n,e,t){var i=sCe(n),s=new tCe({compound:!0}).setGraph({root:i}).setDefaultNodeLabel(function(r){return n.node(r)});return Sv.forEach(n.nodes(),function(r){var o=n.node(r),a=n.parent(r);(o.rank===e||o.minRank<=e&&e<=o.maxRank)&&(s.setNode(r),s.setParent(r,a||i),Sv.forEach(n[t](r),function(l){var c=l.v===r?l.w:l.v,d=s.edge(c,r),u=Sv.isUndefined(d)?0:d.weight;s.setEdge(c,r,{weight:n.edge(l).weight+u})}),Sv.has(o,"minRank")&&s.setNode(r,{borderLeft:o.borderLeft[e],borderRight:o.borderRight[e]}))}),s}function sCe(n){for(var e;n.hasNode(e=Sv.uniqueId("_root")););return e}var rCe=es,oCe=aCe;function aCe(n,e,t){var i={},s;rCe.forEach(t,function(r){for(var o=n.parent(r),a,l;o;){if(a=n.parent(o),a?(l=i[a],i[a]=o):(l=s,s=o),l&&l!==o){e.setEdge(l,o);return}o=a}})}var gh=es,lCe=WSe,cCe=FSe,dCe=QSe,uCe=iCe,hCe=oCe,fCe=Gl.Graph,JX=Vo,gCe=mCe;function mCe(n){var e=JX.maxRank(n),t=$X(n,gh.range(1,e+1),"inEdges"),i=$X(n,gh.range(e-1,-1,-1),"outEdges"),s=lCe(n);QX(n,s);for(var r=Number.POSITIVE_INFINITY,o,a=0,l=0;l<4;++a,++l){pCe(a%2?t:i,a%4>=2),s=JX.buildLayerMatrix(n);var c=cCe(n,s);c<r&&(l=0,o=gh.cloneDeep(s),r=c)}QX(n,o)}function $X(n,e,t){return gh.map(e,function(i){return uCe(n,i,t)})}function pCe(n,e){var t=new fCe;gh.forEach(n,function(i){var s=i.graph().root,r=dCe(i,s,t,e);gh.forEach(r.vs,function(o,a){i.node(o).order=a}),hCe(i,t,r.vs)})}function QX(n,e){gh.forEach(e,function(t){gh.forEach(t,function(i,s){n.node(i).order=s})})}var hi=es,bCe=Gl.Graph,vCe=Vo,_Ce={positionX:SCe,findType1Conflicts:Pee,findType2Conflicts:Oee,addConflict:rV,hasConflict:Zee,verticalAlignment:Gee,horizontalCompaction:Bee,alignCoordinates:zee,findSmallestWidthAlignment:Xee,balance:Hee};function Pee(n,e){var t={};function i(s,r){var o=0,a=0,l=s.length,c=hi.last(r);return hi.forEach(r,function(d,u){var h=wCe(n,d),f=h?n.node(h).order:l;(h||d===c)&&(hi.forEach(r.slice(a,u+1),function(g){hi.forEach(n.predecessors(g),function(m){var p=n.node(m),b=p.order;(b<o||f<b)&&!(p.dummy&&n.node(g).dummy)&&rV(t,m,g)})}),a=u+1,o=f)}),r}return hi.reduce(e,i),t}function Oee(n,e){var t={};function i(r,o,a,l,c){var d;hi.forEach(hi.range(o,a),function(u){d=r[u],n.node(d).dummy&&hi.forEach(n.predecessors(d),function(h){var f=n.node(h);f.dummy&&(f.order<l||f.order>c)&&rV(t,h,d)})})}function s(r,o){var a=-1,l,c=0;return hi.forEach(o,function(d,u){if(n.node(d).dummy==="border"){var h=n.predecessors(d);h.length&&(l=n.node(h[0]).order,i(o,c,u,a,l),c=u,a=l)}i(o,c,o.length,l,r.length)}),o}return hi.reduce(e,s),t}function wCe(n,e){if(n.node(e).dummy)return hi.find(n.predecessors(e),function(t){return n.node(t).dummy})}function rV(n,e,t){if(e>t){var i=e;e=t,t=i}var s=n[e];s||(n[e]=s={}),s[t]=!0}function Zee(n,e,t){if(e>t){var i=e;e=t,t=i}return hi.has(n[e],t)}function Gee(n,e,t,i){var s={},r={},o={};return hi.forEach(e,function(a){hi.forEach(a,function(l,c){s[l]=l,r[l]=l,o[l]=c})}),hi.forEach(e,function(a){var l=-1;hi.forEach(a,function(c){var d=i(c);if(d.length){d=hi.sortBy(d,function(m){return o[m]});for(var u=(d.length-1)/2,h=Math.floor(u),f=Math.ceil(u);h<=f;++h){var g=d[h];r[c]===c&&l<o[g]&&!Zee(t,c,g)&&(r[g]=c,r[c]=s[c]=s[g],l=o[g])}}})}),{root:s,align:r}}function Bee(n,e,t,i,s){var r={},o=yCe(n,e,t,s),a=s?"borderLeft":"borderRight";function l(u,h){for(var f=o.nodes(),g=f.pop(),m={};g;)m[g]?u(g):(m[g]=!0,f.push(g),f=f.concat(h(g))),g=f.pop()}function c(u){r[u]=o.inEdges(u).reduce(function(h,f){return Math.max(h,r[f.v]+o.edge(f))},0)}function d(u){var h=o.outEdges(u).reduce(function(g,m){return Math.min(g,r[m.w]-o.edge(m))},Number.POSITIVE_INFINITY),f=n.node(u);h!==Number.POSITIVE_INFINITY&&f.borderType!==a&&(r[u]=Math.max(r[u],h))}return l(c,o.predecessors.bind(o)),l(d,o.successors.bind(o)),hi.forEach(i,function(u){r[u]=r[t[u]]}),r}function yCe(n,e,t,i){var s=new bCe,r=n.graph(),o=CCe(r.nodesep,r.edgesep,i);return hi.forEach(e,function(a){var l;hi.forEach(a,function(c){var d=t[c];if(s.setNode(d),l){var u=t[l],h=s.edge(u,d);s.setEdge(u,d,Math.max(o(n,c,l),h||0))}l=c})}),s}function Xee(n,e){return hi.minBy(hi.values(e),function(t){var i=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;return hi.forIn(t,function(r,o){var a=LCe(n,o)/2;i=Math.max(r+a,i),s=Math.min(r-a,s)}),i-s})}function zee(n,e){var t=hi.values(e),i=hi.min(t),s=hi.max(t);hi.forEach(["u","d"],function(r){hi.forEach(["l","r"],function(o){var a=r+o,l=n[a],c;if(l!==e){var d=hi.values(l);c=o==="l"?i-hi.min(d):s-hi.max(d),c&&(n[a]=hi.mapValues(l,function(u){return u+c}))}})})}function Hee(n,e){return hi.mapValues(n.ul,function(t,i){if(e)return n[e.toLowerCase()][i];var s=hi.sortBy(hi.map(n,i));return(s[1]+s[2])/2})}function SCe(n){var e=vCe.buildLayerMatrix(n),t=hi.merge(Pee(n,e),Oee(n,e)),i={},s;hi.forEach(["u","d"],function(o){s=o==="u"?e:hi.values(e).reverse(),hi.forEach(["l","r"],function(a){a==="r"&&(s=hi.map(s,function(u){return hi.values(u).reverse()}));var l=(o==="u"?n.predecessors:n.successors).bind(n),c=Gee(n,s,t,l),d=Bee(n,s,c.root,c.align,a==="r");a==="r"&&(d=hi.mapValues(d,function(u){return-u})),i[o+a]=d})});var r=Xee(n,i);return zee(i,r),Hee(i,n.graph().align)}function CCe(n,e,t){return function(i,s,r){var o=i.node(s),a=i.node(r),l=0,c;if(l+=o.width/2,hi.has(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":c=-o.width/2;break;case"r":c=o.width/2;break}if(c&&(l+=t?c:-c),c=0,l+=(o.dummy?e:n)/2,l+=(a.dummy?e:n)/2,l+=a.width/2,hi.has(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":c=a.width/2;break;case"r":c=-a.width/2;break}return c&&(l+=t?c:-c),c=0,l}}function LCe(n,e){return n.node(e).width}var Cv=es,Uee=Vo,kCe=_Ce.positionX,xCe=TCe;function TCe(n){n=Uee.asNonCompoundGraph(n),DCe(n),Cv.forEach(kCe(n),function(e,t){n.node(t).x=e})}function DCe(n){var e=Uee.buildLayerMatrix(n),t=n.graph().ranksep,i=0;Cv.forEach(e,function(s){var r=Cv.max(Cv.map(s,function(o){return n.node(o).height}));Cv.forEach(s,function(o){n.node(o).y=i+r/2}),i+=r+t})}var xi=es,qX=xye,ez=Xye,ICe=fSe,MCe=Vo.normalizeRanks,ECe=bSe,NCe=Vo.removeEmptyRanks,tz=ySe,RCe=TSe,iz=ISe,WCe=gCe,ACe=xCe,Mh=Vo,FCe=Gl.Graph,VCe=PCe;function PCe(n,e){var t=e&&e.debugTiming?Mh.time:Mh.notime;t("layout",function(){var i=t("  buildLayoutGraph",function(){return jCe(n)});t("  runLayout",function(){OCe(i,t)}),t("  updateInputGraph",function(){ZCe(n,i)})})}function OCe(n,e){e("    makeSpaceForEdgeLabels",function(){JCe(n)}),e("    removeSelfEdges",function(){rLe(n)}),e("    acyclic",function(){qX.run(n)}),e("    nestingGraph.run",function(){tz.run(n)}),e("    rank",function(){ICe(Mh.asNonCompoundGraph(n))}),e("    injectEdgeLabelProxies",function(){$Ce(n)}),e("    removeEmptyRanks",function(){NCe(n)}),e("    nestingGraph.cleanup",function(){tz.cleanup(n)}),e("    normalizeRanks",function(){MCe(n)}),e("    assignRankMinMax",function(){QCe(n)}),e("    removeEdgeLabelProxies",function(){qCe(n)}),e("    normalize.run",function(){ez.run(n)}),e("    parentDummyChains",function(){ECe(n)}),e("    addBorderSegments",function(){RCe(n)}),e("    order",function(){WCe(n)}),e("    insertSelfEdges",function(){oLe(n)}),e("    adjustCoordinateSystem",function(){iz.adjust(n)}),e("    position",function(){ACe(n)}),e("    positionSelfEdges",function(){aLe(n)}),e("    removeBorderNodes",function(){sLe(n)}),e("    normalize.undo",function(){ez.undo(n)}),e("    fixupEdgeLabelCoords",function(){iLe(n)}),e("    undoCoordinateSystem",function(){iz.undo(n)}),e("    translateGraph",function(){eLe(n)}),e("    assignNodeIntersects",function(){tLe(n)}),e("    reversePoints",function(){nLe(n)}),e("    acyclic.undo",function(){qX.undo(n)})}function ZCe(n,e){xi.forEach(n.nodes(),function(t){var i=n.node(t),s=e.node(t);i&&(i.x=s.x,i.y=s.y,e.children(t).length&&(i.width=s.width,i.height=s.height))}),xi.forEach(n.edges(),function(t){var i=n.edge(t),s=e.edge(t);i.points=s.points,xi.has(s,"x")&&(i.x=s.x,i.y=s.y)}),n.graph().width=e.graph().width,n.graph().height=e.graph().height}var GCe=["nodesep","edgesep","ranksep","marginx","marginy"],BCe={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},XCe=["acyclicer","ranker","rankdir","align"],zCe=["width","height"],HCe={width:0,height:0},UCe=["minlen","weight","width","height","labeloffset"],YCe={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},KCe=["labelpos"];function jCe(n){var e=new FCe({multigraph:!0,compound:!0}),t=d5(n.graph());return e.setGraph(xi.merge({},BCe,c5(t,GCe),xi.pick(t,XCe))),xi.forEach(n.nodes(),function(i){var s=d5(n.node(i));e.setNode(i,xi.defaults(c5(s,zCe),HCe)),e.setParent(i,n.parent(i))}),xi.forEach(n.edges(),function(i){var s=d5(n.edge(i));e.setEdge(i,xi.merge({},YCe,c5(s,UCe),xi.pick(s,KCe)))}),e}function JCe(n){var e=n.graph();e.ranksep/=2,xi.forEach(n.edges(),function(t){var i=n.edge(t);i.minlen*=2,i.labelpos.toLowerCase()!=="c"&&(e.rankdir==="TB"||e.rankdir==="BT"?i.width+=i.labeloffset:i.height+=i.labeloffset)})}function $Ce(n){xi.forEach(n.edges(),function(e){var t=n.edge(e);if(t.width&&t.height){var i=n.node(e.v),s=n.node(e.w),r={rank:(s.rank-i.rank)/2+i.rank,e};Mh.addDummyNode(n,"edge-proxy",r,"_ep")}})}function QCe(n){var e=0;xi.forEach(n.nodes(),function(t){var i=n.node(t);i.borderTop&&(i.minRank=n.node(i.borderTop).rank,i.maxRank=n.node(i.borderBottom).rank,e=xi.max(e,i.maxRank))}),n.graph().maxRank=e}function qCe(n){xi.forEach(n.nodes(),function(e){var t=n.node(e);t.dummy==="edge-proxy"&&(n.edge(t.e).labelRank=t.rank,n.removeNode(e))})}function eLe(n){var e=Number.POSITIVE_INFINITY,t=0,i=Number.POSITIVE_INFINITY,s=0,r=n.graph(),o=r.marginx||0,a=r.marginy||0;function l(c){var d=c.x,u=c.y,h=c.width,f=c.height;e=Math.min(e,d-h/2),t=Math.max(t,d+h/2),i=Math.min(i,u-f/2),s=Math.max(s,u+f/2)}xi.forEach(n.nodes(),function(c){l(n.node(c))}),xi.forEach(n.edges(),function(c){var d=n.edge(c);xi.has(d,"x")&&l(d)}),e-=o,i-=a,xi.forEach(n.nodes(),function(c){var d=n.node(c);d.x-=e,d.y-=i}),xi.forEach(n.edges(),function(c){var d=n.edge(c);xi.forEach(d.points,function(u){u.x-=e,u.y-=i}),xi.has(d,"x")&&(d.x-=e),xi.has(d,"y")&&(d.y-=i)}),r.width=t-e+o,r.height=s-i+a}function tLe(n){xi.forEach(n.edges(),function(e){var t=n.edge(e),i=n.node(e.v),s=n.node(e.w),r,o;t.points?(r=t.points[0],o=t.points[t.points.length-1]):(t.points=[],r=s,o=i),t.points.unshift(Mh.intersectRect(i,r)),t.points.push(Mh.intersectRect(s,o))})}function iLe(n){xi.forEach(n.edges(),function(e){var t=n.edge(e);if(xi.has(t,"x"))switch((t.labelpos==="l"||t.labelpos==="r")&&(t.width-=t.labeloffset),t.labelpos){case"l":t.x-=t.width/2+t.labeloffset;break;case"r":t.x+=t.width/2+t.labeloffset;break}})}function nLe(n){xi.forEach(n.edges(),function(e){var t=n.edge(e);t.reversed&&t.points.reverse()})}function sLe(n){xi.forEach(n.nodes(),function(e){if(n.children(e).length){var t=n.node(e),i=n.node(t.borderTop),s=n.node(t.borderBottom),r=n.node(xi.last(t.borderLeft)),o=n.node(xi.last(t.borderRight));t.width=Math.abs(o.x-r.x),t.height=Math.abs(s.y-i.y),t.x=r.x+t.width/2,t.y=i.y+t.height/2}}),xi.forEach(n.nodes(),function(e){n.node(e).dummy==="border"&&n.removeNode(e)})}function rLe(n){xi.forEach(n.edges(),function(e){if(e.v===e.w){var t=n.node(e.v);t.selfEdges||(t.selfEdges=[]),t.selfEdges.push({e,label:n.edge(e)}),n.removeEdge(e)}})}function oLe(n){var e=Mh.buildLayerMatrix(n);xi.forEach(e,function(t){var i=0;xi.forEach(t,function(s,r){var o=n.node(s);o.order=r+i,xi.forEach(o.selfEdges,function(a){Mh.addDummyNode(n,"selfedge",{width:a.label.width,height:a.label.height,rank:o.rank,order:r+ ++i,e:a.e,label:a.label},"_se")}),delete o.selfEdges})})}function aLe(n){xi.forEach(n.nodes(),function(e){var t=n.node(e);if(t.dummy==="selfedge"){var i=n.node(t.e.v),s=i.x+i.width/2,r=i.y,o=t.x-s,a=i.height/2;n.setEdge(t.e,t.label),n.removeNode(e),t.label.points=[{x:s+2*o/3,y:r-a},{x:s+5*o/6,y:r-a},{x:s+o,y:r},{x:s+5*o/6,y:r+a},{x:s+2*o/3,y:r+a}],t.label.x=t.x,t.label.y=t.y}})}function c5(n,e){return xi.mapValues(xi.pick(n,e),Number)}function d5(n){var e={};return xi.forEach(n,function(t,i){e[i.toLowerCase()]=t}),e}var ry=es,lLe=Vo,cLe=Gl.Graph,dLe={debugOrdering:uLe};function uLe(n){var e=lLe.buildLayerMatrix(n),t=new cLe({compound:!0,multigraph:!0}).setGraph({});return ry.forEach(n.nodes(),function(i){t.setNode(i,{label:i}),t.setParent(i,"layer"+n.node(i).rank)}),ry.forEach(n.edges(),function(i){t.setEdge(i.v,i.w,{},i.name)}),ry.forEach(e,function(i,s){var r="layer"+s;t.setNode(r,{rank:"same"}),ry.reduce(i,function(o,a){return t.setEdge(o,a,{style:"invis"}),a})}),t}var hLe="0.8.5",fLe={graphlib:Gl,layout:VCe,debug:dLe,util:{time:Vo.time,notime:Vo.notime},version:hLe};const Yee=qk(fLe),oV=.05,aV=2.5;function gLe(n){let e;const t={...n,interactionTimers:{nodeHighlight:void 0,nodeUnhighlight:void 0,edgeHighlight:void 0,edgeUnhighlight:void 0},update:()=>{e&&O9(t,e,t.data,t.opts)}};return{init:(i,s)=>{e=jee(t,i,s,{showRootNode:!0,layout:!0})},resize:()=>{t.onContainerResize?.()},update:i=>{tte(),O9(t,e,i,{layout:!0})},zoom:i=>{CLe(e,i)},fitView:()=>{LLe(t,e)},destroy:()=>{e.destroy()}}}function Kee(n){const e=n.nodes+n.edges;return e>250?16:e>100?8:0}function jee(n,e,t,i){tte();const s=new ur.Stage({container:e,width:e.clientWidth,height:e.clientHeight,draggable:!0});return s.add(new ur.Layer),s.on("dragmove",()=>{Eh(s),n.setCursorIcon("grabbing")}),s.on("dragend",()=>{n.setCursorIcon("default")}),Jee(s,n),s.on("click",r=>{r.target===s&&nte(n)}),s.on("mousemove",r=>{const o=n.hoveredEdge;o&&(clearTimeout(n.interactionTimers.edgeUnhighlight),Qee(n,o,Uu(),{updatePointer:!0,markHovered:!0}),n.interactionTimers.edgeUnhighlight=setTimeout(()=>{rw(n,o,Uu())},200))}),n.onContainerResize=()=>{s.size({width:e.clientWidth,height:e.clientHeight}),Eh(s),s.batchDraw()},O9(n,s,t,i),s}function Jee(n,e){n.off("wheel");const t=mLe(e.stats||{nodes:0,edges:0});n.on("wheel",ste(i=>{if(i.evt.ctrlKey||i.evt.metaKey){i.evt.preventDefault();const s={x:n.x()-i.evt.deltaX,y:n.y()-i.evt.deltaY};n.position(s)}else{if(Math.abs(i.evt.deltaY)<Math.abs(i.evt.deltaX))return;i.evt.preventDefault();const s=n.scaleX(),r=n.getPointerPosition();if(!r)return;const o={x:(r.x-n.x())/s,y:(r.y-n.y())/s},a=i.evt.deltaY>0?Math.max(s/t,oV):Math.min(s*t,aV),l={x:r.x-o.x*a,y:r.y-o.y*a};n.scale({x:a,y:a}),n.position(l)}Eh(n)},Kee(e.stats||{nodes:0,edges:0})))}function O9(n,e,t,i){if(e instanceof HTMLDivElement)return jee(n,e,t,i);{const s=n.baseFontSize*.8,r=280,o=n.baseFontSize+1;let a;if(n.lastClicked){const f=n.value?.node(n.lastClicked.nodeId);if(f){const g=f.visuals.group.absolutePosition(),p=e.getAbsoluteTransform().copy().invert().point(g);a={x:p.x*e.scaleX()+e.x(),y:p.y*e.scaleY()+e.y(),id:n.lastClicked.nodeId}}}else if(n.value){let f,g=1/0;const m=e.width(),p=e.height(),b=e.getAbsoluteTransform().copy().invert();if(n.value.nodes().forEach(w=>{const v=n.value.node(w);if(v&&v.visuals){const _=v.visuals.group.absolutePosition(),y=v.visuals.group.width(),C=v.visuals.group.height(),S=b.point(_),k=S.x*e.scaleX()+e.x(),I=S.y*e.scaleY()+e.y(),T=k+y*e.scaleX(),D=I+C*e.scaleY();T>0&&k<m&&D>0&&I<p&&k<g&&(g=k,f=v)}}),f){const w=f.visuals.group.absolutePosition(),v=b.point(w);a={x:v.x*e.scaleX()+e.x(),y:v.y*e.scaleY()+e.y(),id:f.id}}}e.getLayers()[0].destroyChildren(),n.collapsedNodes=n.collapsedNodes||new Set,n.loadAllPropsNodes=n.loadAllPropsNodes||new Set;const l=new Yee.graphlib.Graph({directed:!0,multigraph:!1,compound:!0});l.setDefaultEdgeLabel(()=>({})),n.value=l;const c=n.selectedNode?.id,d=n.hoveredNode?.id;n.firstRoot=void 0,n.hoveredEdge=void 0,n.selectedNode=void 0,n.hoveredNode=void 0,n.disallowValueLoad=n.disallowValueLoad,n.maxDepth=n.maxDepth,n.noValueLoadBeyondMaxDepth=n.noValueLoadBeyondMaxDepth;const u=[];let h=0;for(const f of t){const{nodeData:g}=ete(n,{fontSize:n.baseFontSize,headerFontSize:o,headerLineHeight:o*1.5,lineHeight:n.baseFontSize*1.5,padding:s,charWidth:sz(n.baseFontSize),headerCharWidth:sz(o),maxContentWidth:r-s*2,maxNodeWidth:r,stage:e,dragThrottleDelay:()=>Kee(n.stats)},f.value,qee(f.value,f.name),0,h++);u.push(g),g.name=f.name}if(n.firstRoot=u[0],n.opts=i,n.data=t,n.stats={nodes:n.value.nodeCount(),edges:n.value.edgeCount()},Jee(e,n),SLe(n,e,i),c){const f=n.value.node(c);f&&ES(n,f)}if(d){const f=n.value.node(d);f&&$ee(n,f,Uu())}if(a){const f=n.value?.node(a.id);if(f){const g=f.visuals.group.absolutePosition(),p=e.getAbsoluteTransform().copy().invert().point(g),b={x:p.x*e.scaleX()+e.x(),y:p.y*e.scaleY()+e.y()},w={x:a.x-b.x,y:a.y-b.y};e.position({x:e.x()+w.x,y:e.y()+w.y})}}return n.lastClicked=void 0,e.batchDraw(),Eh(e),e}}function Eh(n){const e=n.scaleX(),t=n.x(),i=n.y(),s=20,r=100;let o=s*e;const a=r*e;let l="--value-diagram-large-grid-border",c="--value-diagram-small-grid-border";o<3&&(l="--value-diagram-small-grid-border",c="--value-diagram-extra-small-grid-border"),o<1&&(l="--value-diagram-extra-small-grid-border",o=0);const d=t%o,u=i%o,h=t%a,f=i%a,g=n.container();g&&(g.style.backgroundImage=`
        linear-gradient(to right, var(${c}) 1px, transparent 1px),
        linear-gradient(to bottom, var(${c}) 1px, transparent 1px),
        linear-gradient(to right, var(${l}) 1px, transparent 1px),
        linear-gradient(to bottom, var(${l}) 1px, transparent 1px)
      `,g.style.backgroundSize=`
        ${o}px ${o}px,
        ${o}px ${o}px,
        ${a}px ${a}px,
        ${a}px ${a}px
      `,g.style.backgroundPosition=`
        ${d}px ${u}px,
        ${d}px ${u}px,
        ${h}px ${f}px,
        ${h}px ${f}px
      `)}function mLe(n){const{nodes:e,edges:t}=n,i=Math.max(e,t),s=1.08,r=2.3;if(i<=50)return s;const o=Math.log10(i),a=s+(o-1)*.03;return Math.min(r,Math.max(s,a))}function $ee(n,e,t){if(t.highlightedNodes.has(e))return;t.highlightedNodes.add(e),n.hoveredNode&&n.hoveredNode!==e&&Vd(n,n.hoveredNode,Uu());const i=n.hoveredEdge;i&&(rw(n,i,t),Vd(n,i.to,t),Vd(n,i.from,t),n.hoveredEdge=void 0),n.hoveredNode=e,n.selectedNode!==e&&e.visuals.highlight()}function Vd(n,e,t){t.unhighlightedNodes.has(e)||(t.unhighlightedNodes.add(e),n.selectedNode!==e&&e.visuals.unhighlight(),e.edges.forEach(i=>rw(n,i,t)),n.hoveredNode===e&&(n.hoveredNode=void 0))}function Qee(n,e,t,i){if(t.highlightedEdges.has(e))return;t.highlightedEdges.add(e);const s=n.hoveredNode,r=n.hoveredEdge;s&&Vd(n,s,t),Vd(n,e.from,t),Vd(n,e.to,t),e.visuals.highlight(i),r!==e&&r&&rw(n,r,t),i?.markHovered&&(n.hoveredEdge=e)}function rw(n,e,t){t.unhighlightedEdges.has(e)||(t.unhighlightedEdges.add(e),e.visuals.unhighlight(),Vd(n,e.to,t),Vd(n,e.from,t),n.hoveredEdge===e&&(n.hoveredEdge=void 0))}function Uu(){return{highlightedNodes:new Set,highlightedEdges:new Set,unhighlightedNodes:new Set,unhighlightedEdges:new Set}}function nz(n,e){return n.id===void 0&&(n.id=e.toString()),n.id}function qee(n,e){e=e||n.name||"unknown";const t=AQ(n);return`${e}${t?`: ${t}`:""}`}function ete(n,e,t,i,s,r,o){o&&!t.id&&nz(t,r);const a=o?.id?`${o.id}-${t.id}`:r.toString(),l={id:a,value:t,edges:[],visuals:{},width:0,height:0,parent:o};let c=0;const d=pLe(t,i,e,{getEdges:()=>l.edges,onProp:u=>{nz(u,c)},onExpandableProp:u=>{const h=!!u.props?.length,f=`${a}-${u.id}`,g=(h||!n.disallowValueLoad)&&(!n.noValueLoadBeyondMaxDepth||s<(n.maxDepth||Number.MAX_VALUE)),m=g&&h&&!n.collapsedNodes?.has(f);if(m||n.collapsedNodes?.add(f),u.rangeNode){const p=t.parent||t;u.parent=p,u.queryPath=p.queryPath}if(u.cappedRange){const p=t.parent||t;u.props=u.props||[],u.props.push({loadActionNode:!0,expandable:!0,parent:p,queryPath:p.queryPath})}if(m){const{nodeId:p,nodeData:b}=ete(n,e,u,qee(u),s+1,c,l),w={visuals:wLe({onEdgeClick:v=>{v==="end"?(rz(b),ES(n,b)):(rz(l),ES(n,l))},onMouseMove:()=>{clearTimeout(n.interactionTimers.edgeHighlight),clearTimeout(n.interactionTimers.edgeUnhighlight),clearTimeout(n.interactionTimers.nodeHighlight),clearTimeout(n.interactionTimers.nodeUnhighlight),queueMicrotask(()=>{clearTimeout(n.interactionTimers.edgeUnhighlight)}),n.interactionTimers.edgeHighlight=setTimeout(()=>{Qee(n,w,Uu(),{updatePointer:!0,markHovered:!0})},25)},onMouseOut:()=>{clearTimeout(n.interactionTimers.edgeHighlight),clearTimeout(n.interactionTimers.edgeUnhighlight),n.interactionTimers.edgeUnhighlight=setTimeout(()=>{rw(n,w,Uu())},100)}}),from:l,to:b,propertyId:u.id};n.value.setEdge(a,p,w),l.edges.push(w),b.edges.push(w)}return c++,{onPropValueClick:()=>{if(n.lastClicked={nodeId:a,propertyNodeId:f},n.collapsedNodes?.has(f)?n.collapsedNodes?.delete(f):n.collapsedNodes?.add(f),u.loadAction)u.loadAction();else if(h)n.update();else{const p=u.parent?{ranges:{props:b4(u,u.parent.props),length:u.parent.length}}:u.loadActionNode?{props:Number.MAX_VALUE}:{};n.loadValue({path:u.queryPath,...p})}},expanded:m,hovered:n.lastClicked?.propertyNodeId===f,allowedToExpand:g}},onNodeClick:()=>{ES(n,l)},onMouseMove:()=>{clearTimeout(n.interactionTimers.nodeHighlight),clearTimeout(n.interactionTimers.nodeUnhighlight),clearTimeout(n.interactionTimers.edgeHighlight),clearTimeout(n.interactionTimers.edgeUnhighlight),queueMicrotask(()=>{clearTimeout(n.interactionTimers.edgeUnhighlight)}),n.interactionTimers.nodeHighlight=setTimeout(()=>$ee(n,l,Uu()),25)},onMouseOut:()=>{clearTimeout(n.interactionTimers.nodeHighlight),clearTimeout(n.interactionTimers.nodeUnhighlight),n.interactionTimers.nodeUnhighlight=setTimeout(()=>{Vd(n,l,Uu())},100)},onElementWithTooltipMouseOver:(u,h,f)=>{n.onElementWithTooltipMouseOver({source:h,node:l,fullString:f,evt:u})},onElementWithTooltipMouseOut:()=>{n.onElementWithTooltipMouseOut()},onLoadAllPropsClick:()=>{n.loadAllPropsNodes=n.loadAllPropsNodes||new Set,n.loadAllPropsNodes.add(a),n.update()},loadAllProps:n.loadAllPropsNodes?.has(a)||void 0});return l.visuals=d,l.width=d.group.width(),l.height=d.group.height(),n.value.setNode(a,l),{nodeId:a,nodeData:l}}const u5=new Map;function sz(n){if(u5.has(n))return u5.get(n);const t=new ur.Text({text:"1",fontSize:n,fontFamily:bi("--value-diagram-editor-font-family")}).width();return u5.set(n,t),t}function pLe(n,e,t,i){const s=t.padding,r=t.fontSize,o=t.maxContentWidth,a=t.charWidth,l=t.maxNodeWidth,c=t.lineHeight,d=t.headerFontSize,u=t.headerLineHeight,h=t.headerCharWidth,f=c/4,g=new Map;let m=0,p=100;m+=s,m+=u;const b=[],w=[],v=[],_=new ur.Group({x:0,y:0,width:s*2,height:s*2,perfectDrawEnabled:!1,listening:!1}),y=new ur.Text({x:.4,y:0,fontSize:r,fontStyle:"bold",fontFamily:bi("--value-diagram-editor-font-family"),perfectDrawEnabled:!1,listening:!1});_.add(y),_.visible(!1);const C=i.loadAllProps?1/0:70;let S=0;for(const N of n.props||[]){let H=N;if(H.functionsNode||H.type==="function"||H.callStackNode)continue;if(S===C)H={expandable:!0,loadActionNode:!0,loadAction:i.onLoadAllPropsClick};else if(S>C)break;S++;const{value:U,css:B,name:Y,expandable:ne}=bLe(H);i.onProp(H);const ee=Y+" ",$=U;let ge=ee,Ie=$,xe=!1,z=!1,K=a*ge.length,Se=a*Ie.length;const De=K+Se;if(De>o){p=l;const mt=Math.floor(o/a);if(ge.length+Ie.length>mt){const ht=K/De,nt=Se/De,zt="";let Fe=Math.floor(mt*ht),re=Math.floor(mt*nt);const ie=ge.length>Fe,de=Ie.length>re,Z=mt-(ie?zt.length:0)-(de?zt.length:0);Fe=Math.floor(Z*ht),re=Math.floor(Z*nt);const O=4;Fe<O&&(Fe=O,re=Math.max(1,Z-O)),re<3&&Ie.length>0&&(re=3,Fe=Z-re),ge.length>Fe&&(ge=ge.substring(0,Fe)+zt,z=!0),Ie.length>re&&(Ie=Ie.substring(0,re)+zt,xe=!0)}}else p=Math.max(p,De+s*2);const ke=new ur.Line({id:"line",points:[.5,m,.5,m],stroke:bi("--value-diagram-node-property-border"),strokeWidth:1,perfectDrawEnabled:!1,listening:!1});v.push(ke),m+=f;const je=new ur.Text({x:s,y:m+f/2,text:ge,fill:bi("--token-scope-property-foreground"),fontSize:r,fontFamily:bi("--value-diagram-editor-font-family"),perfectDrawEnabled:!1,listening:z}),et=new ur.Text({x:K+s,y:m+(H.loadActionNode?0:f/2),text:Ie,fill:B,fontSize:r,fontFamily:bi("--value-diagram-editor-font-family"),perfectDrawEnabled:!1,listening:!0,hitStrokeWidth:r});if(xe&&(et.on("mouseover",mt=>{i.onElementWithTooltipMouseOver(mt.evt,"property value",$)}),et.on("mouseout",()=>{i.onElementWithTooltipMouseOut()})),z&&(je.on("mouseover",mt=>{i.onElementWithTooltipMouseOver(mt.evt,"property name",ee)}),je.on("mouseout",()=>{i.onElementWithTooltipMouseOut()})),w.push(et),b.push(je),b.push(et),g.set(H.id,m+r/2+1),m+=c,ne){const{onPropValueClick:mt,expanded:ze,hovered:ht,allowedToExpand:nt}=i.onExpandableProp(H);if(nt){const zt=Fe=>{Fe.getStage()&&(Fe.getStage().container().style.cursor="default"),Fe.fill(B),_.visible(!1)};et.on("mousemove",Fe=>{const re=Fe.target;re.getStage()&&(re.getStage().container().style.cursor="pointer"),H.loadActionNode||(y.text(ze?"-":"+"),y.fill(et.fill()),_.visible(!0),_.setPosition({x:re.x()+re.width(),y:re.y()-1}))}),et.on("mouseout",Fe=>{zt(Fe.target)}),et.on("click",Fe=>{const re=Fe.target;zt(re),mt(H)}),ht&&queueMicrotask(()=>{const Fe=et.getStage();if(!Fe)return;const re=Fe.getPointerPosition();if(!re)return;const ie=et.getAbsolutePosition(),de=et.width(),Z=et.height();re.x>=ie.x&&re.x<=ie.x+de&&re.y>=ie.y&&re.y<=ie.y+Z&&et.fire("mousemove",{target:et})})}}}const k=h*e.length+h*2+s*2;p=Math.max(p,Math.min(k,l));const I=yLe(e,h,p-s*2-h),T=new ur.Text({x:s,y:s,text:I,fill:bi("--value-diagram-foreground"),fontSize:d,fontStyle:"bold",fontFamily:bi("--value-diagram-editor-font-family"),perfectDrawEnabled:!1,listening:!1}),D=new ur.Text({x:p-s-a,y:s,width:d,height:u,text:"",fill:bi("--value-diagram-foreground"),fontSize:d,fontStyle:"bold",fontFamily:bi("--value-diagram-editor-font-family"),listening:!0});D.on("mouseover",N=>{i.onElementWithTooltipMouseOver(N.evt,"node header",e)}),D.on("mouseout",()=>{i.onElementWithTooltipMouseOut()});const M=new ur.Rect({id:"rect",width:p,height:m,fill:bi("--value-diagram-node-background"),cornerRadius:3,stroke:bi("--value-diagram-border"),strokeWidth:1,perfectDrawEnabled:!1,listening:!0});w.forEach((N,H)=>{const U=v[H],B=U.points();U.points([B[0],B[1],p-.5,B[3]]),N.setPosition({x:p-s-N.width(),y:N.y()})});const E=new ur.Group({draggable:!0,width:p,height:m});queueMicrotask(()=>{E.on("dragmove",ste(()=>{i.onNodeClick(),E.moveToTop(),i.getEdges().forEach(N=>{ite(t.stage,N),N.visuals.group.moveToBottom()})},t.dragThrottleDelay()))}),E.on("click",N=>{i.onNodeClick()});function W(){M.stroke(bi("--value-diagram-hover-stroke"))}function P(){M.stroke(bi("--value-diagram-border"))}return E.on("mousemove",N=>{i.onMouseMove()}),E.on("mouseout",N=>{i.onMouseOut()}),E.add(M,_,D,T),E.add(...v),E.add(...b),{group:E,propertyY:g,highlight:W,unhighlight:P}}function bLe(n){const e=n.type?.toLowerCase(),t=n.value!==void 0?n.value+"":"";let i=n.name||"unknown",s=t,r=bi("--token-scope-string-foreground");if(n.getter)s="get()",r=bi("--value-diagram-foreground");else if(n.loadActionNode)i="",s="...",r=bi("--value-diagram-attention-foreground");else if(e==="string")r=bi("--token-scope-string-foreground");else if(e==="number")r=bi("--token-scope-number-foreground"),n.nan?s="NaN":n.positiveInfinity?s="Infinity":n.negativeInfinity?s="-Infinity":n.negativeZero&&(s="-0");else if(e==="bigint")r=bi("--token-scope-number-foreground"),s+="n";else if(e==="boolean")r=bi("--token-scope-boolean-foreground");else if(e==="regexp")r=bi("--token-scope-regexp-foreground");else if(e==="undefined")s="undefined",r=bi("--token-scope-undefined-foreground");else if(e==="null")s="null",r=bi("--token-scope-null-foreground");else if(e==="unknown")s=n.error?n.error:"",r=bi("--value-diagram-error-foreground");else if(e==="symbol")r=bi("--token-scope-class-foreground");else if(e==="date")s=`${new Date(n.value).toJSON()}`,r=bi("--token-scope-class-foreground");else if(e==="raw")s=n.value,r=bi("--value-diagram-foreground");else if(e==="html")r=bi("--value-diagram-foreground");else if(n.value===void 0){const a=e==="array"||!!n.rangeNode,l=a&&n.length!==void 0;s=a?l?`Array(${n.length})`:"[]":`{${n.capped||e==="promise"&&!n.props?.length||n.expandable?"":""}}`,r=bi(l?"--token-scope-type-foreground":"--value-diagram-foreground")}const o=!!n.expandable;return o&&!n.loadActionNode&&(r=bi("--value-diagram-expandable-property-foreground")),{value:s.replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\n/g,"\\n"),css:r,name:i,expandable:o}}function Z9(n,e){const[t,i,s,r]=e,o=1-n,a=n*n,l=o*o,c=l*o,d=a*n,u=c*t.x+3*l*n*i.x+3*o*a*s.x+d*r.x,h=c*t.y+3*l*n*i.y+3*o*a*s.y+d*r.y;return{x:u,y:h}}function vLe(n,e){let t=1/0,i=0;const s=10;let r=0;for(let c=0;c<=s;c++){const d=c/s,u=Z9(d,e),h=Math.hypot(u.x-n.x,u.y-n.y);h<t&&(t=h,r=d)}const o=Math.max(0,r-.1),a=Math.min(1,r+.1),l=50;t=1/0;for(let c=0;c<=l;c++){const d=o+c/l*(a-o),u=Z9(d,e),h=Math.hypot(u.x-n.x,u.y-n.y);h<t&&(t=h,i=d)}return i}function _Le(n,e){const[t,i,s,r]=e,o=1-n,a=n*n,l=o*o,c=-3*t.x*l+3*i.x*(l-2*o*n)+3*s.x*(2*o*n-a)+3*r.x*a,d=-3*t.y*l+3*i.y*(l-2*o*n)+3*s.y*(2*o*n-a)+3*r.y*a;return Math.atan2(d,c)}function wLe(n){const e=new ur.Line({id:"line",points:[],stroke:bi("--value-diagram-border"),fill:bi("--value-diagram-border"),strokeWidth:2,hitStrokeWidth:15,pointerLength:10,pointerWidth:10,perfectDrawEnabled:!1,shadowForStrokeEnabled:!1,lineCap:"round",lineJoin:"round",listening:!0,bezier:!0}),t=new ur.Circle({id:"dot",radius:5,fill:bi("--value-diagram-border"),perfectDrawEnabled:!1,listening:!1}),i=new ur.RegularPolygon({id:"hover-arrowhead",sides:3,radius:8,fill:bi("--value-diagram-hover-stroke"),visible:!1,perfectDrawEnabled:!1}),s=new ur.Group({listening:!0});s.add(e,t,i);let r="end";s.on("mousemove",()=>{n.onMouseMove()});const o=c=>{c.getStage()&&(c.getStage().container().style.cursor="default"),e.stroke(bi("--value-diagram-border")),t.fill(bi("--value-diagram-border")),i.visible(!1)};return s.on("mouseout",c=>{n.onMouseOut()}),s.on("click",c=>{const d=c.target;o(d),n.onEdgeClick(r)}),{group:s,highlight:c=>{const d=s.getStage();if(d&&(d.container().style.cursor="pointer"),e.stroke(bi("--value-diagram-hover-stroke")),t.fill(bi("--value-diagram-hover-stroke")),c?.updatePointer){const u=d.getPointerPosition(),f=d.getAbsoluteTransform().copy().invert().point(u),g=e.points(),m=[{x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},{x:g[6],y:g[7]}],p=vLe(f,m),b=Z9(p,m),w=_Le(p,m);i.position({x:b.x,y:b.y}),r=p<.5?"end":"start";const v=r==="end"?w*180/Math.PI+90:w*180/Math.PI+270;return i.rotation(v),i.visible(!0),r==="end"?"to":"from"}},unhighlight:()=>{o(s)}}}function yLe(n,e,t){const i=Math.floor(t/e);return n.length<=i?n:n.slice(0,i-1)+""}function tte(){MS.clear()}const MS=new Map;function bi(n){if(MS.has(n))return MS.get(n);const e=getComputedStyle(document.body)?.getPropertyValue(n)?.trim();return MS.set(n,e||""),e}function ite(n,e){const{visuals:t,from:i,to:s,propertyId:r}=e,o=i.visuals.group.absolutePosition(),a=s.visuals.group.absolutePosition(),l=i.visuals.group.height(),c=s.visuals.group.height(),d=i.visuals.group.width(),u=n.getAbsoluteTransform().copy().invert(),h=u.point(o),f=u.point(a),g=i.visuals.propertyY.get(r),p=g!==void 0?h.y+g:h.y+l/2,b=h.x+d,w=f.x,v=f.y+c/2,y=(w-b)*.5;t.group.findOne("#line").points([b,p,b+y,p,w-y,v,w,v]),t.group.findOne("#dot").position({x:b,y:p})}function SLe(n,e,t){const i=n.firstRoot;if(kLe(n,e,t),i&&t?.showRootNode){e.scale({x:.8,y:.8});const s=e.getAbsoluteTransform().copy();let r=1/0,o=1/0,a=-1/0,l=-1/0;n.value.nodes().forEach(p=>{const b=n.value.node(p);if(b&&b.visuals){const w=b.visuals.group.absolutePosition();r=Math.min(r,w.x),o=Math.min(o,w.y),a=Math.max(a,w.x+b.visuals.group.width()),l=Math.max(l,w.y+b.visuals.group.height())}});const c=a-r,d=l-o,u=c<e.width()*.8,h=d<e.height()*.8,f=i.visuals.group.absolutePosition(),g={x:u?e.width()/2-c/2:20,y:h?e.height()/2-d/2:i.visuals.group.height()>e.height()?20:e.height()/2-i.visuals.group.height()/2},m=s.point(g);e.position({x:m.x-f.x,y:m.y-f.y}),i.visuals.group.moveToTop()}}function CLe(n,e){const t=n.scaleX(),i=Math.max(Math.min(t+e,aV),oV);if(i===t)return;const s=n.width(),r=n.height(),o=s/2,a=r/2,l={x:(o-n.x())/t,y:(a-n.y())/t},c={x:o-l.x*i,y:a-l.y*i};n.scale({x:i,y:i}),n.position(c),Eh(n)}function LLe(n,e){let t=1/0,i=1/0,s=-1/0,r=-1/0;if(n.value.nodes().map(v=>n.value.node(v).visuals.group).forEach(v=>{v.getAbsolutePosition();const _=v.getClientRect({relativeTo:e});t=Math.min(t,_.x),i=Math.min(i,_.y),s=Math.max(s,_.x+_.width),r=Math.max(r,_.y+_.height)}),t===1/0)return;const o=20;t-=o,i-=o,s+=o,r+=o;const a=s-t,l=r-i,c=e.width(),d=e.height(),u=c/a,h=d/l;let f=Math.min(u,h);f=Math.max(oV,Math.min(f,aV));const g=t+a/2,m=i+l/2;e.scale({x:1,y:1}),e.batchDraw(),e.scale({x:f,y:f});let p=d/2-m*f;const b=20*f;n.firstRoot.visuals.group.y()*f+p<b&&(p=b-n.firstRoot.visuals.group.y()*f),e.position({x:c/2-g*f,y:p}),Eh(e)}function kLe(n,e,t){t?.layout&&(n.value.setGraph({rankdir:"LR",nodesep:20,ranksep:Math.max((n.firstRoot?.visuals.group.width()||0)/2,150),marginx:40,marginy:40,ranker:"tight-tree"}),Yee.layout(n.value));const i=e.getLayers()[0],s=i.children.length===0;n.value.nodes().forEach(r=>{const o=n.value.node(r);o&&(o.visuals.group.position({x:o.x,y:o.y-o.height/2}),s&&i.add(o.visuals.group))}),n.value.edges().forEach(r=>{if(r){const o=n.value.edge(r);o&&(ite(e,o),s&&(i.add(o.visuals.group),o.visuals.group.moveToBottom()))}})}function rz(n){const e=n.visuals.group.getStage(),t=n.visuals.group,i=t.absolutePosition(),s=t.width(),r=t.height(),o=e.width(),a=e.height(),l=e.scaleX(),d=e.getAbsoluteTransform().copy().invert().point(i),u={left:d.x*l+e.x(),top:d.y*l+e.y(),right:(d.x+s)*l+e.x(),bottom:(d.y+r)*l+e.y()},h=20;if(u.left>=h&&u.top>=h&&u.right<=o-h&&u.bottom<=a-h)return;let g=e.x(),m=e.y();u.left<h?g=h-d.x*l:u.right>o-h&&(g=o-h-(d.x+s)*l),u.top<h?m=h-d.y*l:u.bottom>a-h&&(m=a-h-(d.y+r)*l);const p=s*l,b=r*l;p>o-h*2&&(g=h-d.x*l),b>a-h*2&&(m=h-d.y*l),new ur.Tween({node:e,duration:.3,easing:ur.Easings.EaseInOut,x:g,y:m,onUpdate:()=>{Eh(e)},onFinish:()=>{Eh(e)}}).play()}function ES(n,e){nte(n);const i=e.visuals.group.findOne("#rect");i.stroke(bi("--value-diagram-hover-stroke")),i.strokeWidth(1.5),n.selectedNode=e}function nte(n){if(!n.selectedNode)return;const t=n.selectedNode.visuals.group.findOne("#rect");t.stroke(bi("--value-diagram-border")),t.strokeWidth(1),n.selectedNode=void 0}const ste=(n,e)=>{let t=!1;return(...i)=>{t||(n(...i),t=!0,setTimeout(()=>t=!1,e))}};var xLe=G('<div class="flex h-fit max-w-[80vw] flex-row"><div class="code token-property flex-grow self-center break-all !text-[length:--panel-smaller-font-size]"></div><div class="ml-auto flex items-start justify-start self-start pl-1 [&amp;_button]:mx-[0.0625rem] [&amp;_button]:!text-[length:--icon-smallest-font-size]">'),TLe=G('<div class="relative h-full w-full overflow-hidden"><div class="h-full w-full overflow-hidden">'),DLe=G("<div>");function ILe(n){Dt().featureUsed("logsDiagram");const[t,i]=he(void 0),[s,r]=he("default"),o=J(()=>n.logs[n.logPath.logSource]?.logs[n.logPath.logOrExpressionId]),a=J(()=>o()?.value),l=()=>o()?.maybeObsolete===!0||n.disallowValueLoad||void 0;jh(t,()=>d.resize());const c=()=>[{value:Za(a()),name:o()?.context||"root"}],d=gLe({loadValue:U=>{n.logsService.requestValues(U,o())},onElementWithTooltipMouseOver:U=>{b(h(U)),T(!0)},onElementWithTooltipMouseOut:()=>{T(!1)},disallowValueLoad:l(),maxDepth:n.maxDepth,noValueLoadBeyondMaxDepth:n.noValueLoadBeyondMaxDepth,baseFontSize:n.baseFontSize,setCursorIcon:r}),u=Zo(),h=U=>tg(u,()=>{if(U.source==="property name"||U.source==="property value")return U.fullString;if(U.source==="node header"){let B=U.node;const Y=AQ(B.value),ne=[];for(;B?.parent;)B.value.name&&ne.unshift(FQ(B.value.name)),B=B.parent;return ne.unshift(B.name||"root"),(()=>{var ee=xLe(),$=ee.firstChild,ge=$.nextSibling;return A($,()=>ne.join("")+(Y?`: ${Y}`:"")),A(ge,x(Ee,{class:"codicon-copy",onClick:()=>{function Ie(xe){return delete xe.parent,xe.props&&xe.props.forEach(z=>Ie(z)),xe}n.logsService.copyValue(Ie(U.node.value))},tabIndex:0,get namespace(){return n.iconsNamespace},tooltip:"Copy value"}),null),A(ge,x(Ee,{class:"codicon-milestone",onClick:()=>n.logsService.copyValue(ne.join("")),tabIndex:0,get namespace(){return n.iconsNamespace},tooltip:"Copy path"}),null),ee})()}});function f(U){return{...U,props:U?.props?.map(B=>f(B))}}const[g,m]=he(void 0,{equals:!1});VQ(t4.subscribe(m)),$e([()=>f(a()),()=>({...o()}),g],()=>{a()&&d.update(c())},{defer:!0}),$e([t,a,o],()=>{!t()||!a()||!o()||(n.icons([x(Ee,{class:"codicon-zoom-in",onClick:()=>{d.zoom(.1)},tabIndex:0,get namespace(){return n.iconsNamespace},tooltip:"Zoom in"}),x(Ee,{class:"codicon-zoom-out",onClick:()=>{d.zoom(-.1)},tabIndex:0,get namespace(){return n.iconsNamespace},tooltip:"Zoom out"}),x(Ee,{class:"codicon-screen-full",onClick:()=>{d.fitView()},tabIndex:0,get namespace(){return n.iconsNamespace},tooltip:"Fit view"}),x(Ee,{class:"codicon-type-hierarchy-sub -rotate-90 activeIcon",onClick:()=>{n.close()},tabIndex:0,get namespace(){return n.iconsNamespace},tooltip:"Switch to tree view"})]),d.init(t(),c()))});const[p,b]=he(void 0),[w,v]=he(void 0),{x:_,y}=Rf(t,{handleOutside:!1}),C={x:0,y:0,width:0,height:0,left:0,right:0,top:0,bottom:0,toJSON:()=>{}},[S,k]=he(C),[I,T]=he(!1),D=()=>({x:0,y:0,width:0,height:0,left:_()+10,right:_(),top:y()+10,bottom:y(),toJSON:()=>{}}),M=()=>{clearTimeout(P),k(C),w()?.hide(),w()?.disable()},E=()=>{k(D()),clearTimeout(W),w()?.enable(),w()?.popperInstance?.update(),w()?.show()};let W,P;$e(I,U=>{clearTimeout(W),clearTimeout(P),U?P=setTimeout(()=>{E()},150):W=setTimeout(()=>{N()||M()},150)});const[N,H]=he(!1);return $e(N,U=>{!U&&!I()&&(clearTimeout(W),M())}),$e(w,U=>{U&&(U.popper.addEventListener("mouseenter",()=>{H(!0)}),U.popper.addEventListener("mouseleave",()=>{H(!1)}))}),Ot(()=>{n.close(),d.destroy(),clearTimeout(P),clearTimeout(W)}),(()=>{var U=TLe(),B=U.firstChild;return B.$$click=Y=>{const ne=w();ne&&!ne.state.isVisible&&I()&&(E(),Y.stopPropagation())},We(i,B),We(Te,B,()=>Te&&{onCreate(Y){v(Y),queueMicrotask(()=>{Y.hide(),Y.disable()})},content:(()=>{var Y=DLe();return A(Y,p),Y})(),getReferenceClientRect:S,defaultDelay:600,shortDelay:150,instanceType:"diagram",placement:"auto",trigger:"manual",delay:0}),Me(()=>s()!=null?B.style.setProperty("cursor",s()):B.style.removeProperty("cursor")),U})()}dn(["click"]);var rte={exports:{}};/*!***************************************************
* mark.js v8.11.1
* https://markjs.io/
* Copyright (c) 20142018, Julian Khnel
* Released under the MIT license https://git.io/vwTVl
*****************************************************/(function(n,e){(function(t,i){n.exports=i()})(vc,function(){var t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},i=function(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")},s=function(){function c(d,u){for(var h=0;h<u.length;h++){var f=u[h];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(d,f.key,f)}}return function(d,u,h){return u&&c(d.prototype,u),h&&c(d,h),d}}(),r=Object.assign||function(c){for(var d=1;d<arguments.length;d++){var u=arguments[d];for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])}return c},o=function(){function c(d){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5e3;i(this,c),this.ctx=d,this.iframes=u,this.exclude=h,this.iframesTimeout=f}return s(c,[{key:"getContexts",value:function(){var u=void 0,h=[];return typeof this.ctx>"u"||!this.ctx?u=[]:NodeList.prototype.isPrototypeOf(this.ctx)?u=Array.prototype.slice.call(this.ctx):Array.isArray(this.ctx)?u=this.ctx:typeof this.ctx=="string"?u=Array.prototype.slice.call(document.querySelectorAll(this.ctx)):u=[this.ctx],u.forEach(function(f){var g=h.filter(function(m){return m.contains(f)}).length>0;h.indexOf(f)===-1&&!g&&h.push(f)}),h}},{key:"getIframeContents",value:function(u,h){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},g=void 0;try{var m=u.contentWindow;if(g=m.document,!m||!g)throw new Error("iframe inaccessible")}catch{f()}g&&h(g)}},{key:"isIframeBlank",value:function(u){var h="about:blank",f=u.getAttribute("src").trim(),g=u.contentWindow.location.href;return g===h&&f!==h&&f}},{key:"observeIframeLoad",value:function(u,h,f){var g=this,m=!1,p=null,b=function w(){if(!m){m=!0,clearTimeout(p);try{g.isIframeBlank(u)||(u.removeEventListener("load",w),g.getIframeContents(u,h,f))}catch{f()}}};u.addEventListener("load",b),p=setTimeout(b,this.iframesTimeout)}},{key:"onIframeReady",value:function(u,h,f){try{u.contentWindow.document.readyState==="complete"?this.isIframeBlank(u)?this.observeIframeLoad(u,h,f):this.getIframeContents(u,h,f):this.observeIframeLoad(u,h,f)}catch{f()}}},{key:"waitForIframes",value:function(u,h){var f=this,g=0;this.forEachIframe(u,function(){return!0},function(m){g++,f.waitForIframes(m.querySelector("html"),function(){--g||h()})},function(m){m||h()})}},{key:"forEachIframe",value:function(u,h,f){var g=this,m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){},p=u.querySelectorAll("iframe"),b=p.length,w=0;p=Array.prototype.slice.call(p);var v=function(){--b<=0&&m(w)};b||v(),p.forEach(function(_){c.matches(_,g.exclude)?v():g.onIframeReady(_,function(y){h(_)&&(w++,f(y)),v()},v)})}},{key:"createIterator",value:function(u,h,f){return document.createNodeIterator(u,h,f,!1)}},{key:"createInstanceOnIframe",value:function(u){return new c(u.querySelector("html"),this.iframes)}},{key:"compareNodeIframe",value:function(u,h,f){var g=u.compareDocumentPosition(f),m=Node.DOCUMENT_POSITION_PRECEDING;if(g&m)if(h!==null){var p=h.compareDocumentPosition(f),b=Node.DOCUMENT_POSITION_FOLLOWING;if(p&b)return!0}else return!0;return!1}},{key:"getIteratorNode",value:function(u){var h=u.previousNode(),f=void 0;return h===null?f=u.nextNode():f=u.nextNode()&&u.nextNode(),{prevNode:h,node:f}}},{key:"checkIframeFilter",value:function(u,h,f,g){var m=!1,p=!1;return g.forEach(function(b,w){b.val===f&&(m=w,p=b.handled)}),this.compareNodeIframe(u,h,f)?(m===!1&&!p?g.push({val:f,handled:!0}):m!==!1&&!p&&(g[m].handled=!0),!0):(m===!1&&g.push({val:f,handled:!1}),!1)}},{key:"handleOpenIframes",value:function(u,h,f,g){var m=this;u.forEach(function(p){p.handled||m.getIframeContents(p.val,function(b){m.createInstanceOnIframe(b).forEachNode(h,f,g)})})}},{key:"iterateThroughNodes",value:function(u,h,f,g,m){for(var p=this,b=this.createIterator(h,u,g),w=[],v=[],_=void 0,y=void 0,C=function(){var k=p.getIteratorNode(b);return y=k.prevNode,_=k.node,_};C();)this.iframes&&this.forEachIframe(h,function(S){return p.checkIframeFilter(_,y,S,w)},function(S){p.createInstanceOnIframe(S).forEachNode(u,function(k){return v.push(k)},g)}),v.push(_);v.forEach(function(S){f(S)}),this.iframes&&this.handleOpenIframes(w,u,f,g),m()}},{key:"forEachNode",value:function(u,h,f){var g=this,m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){},p=this.getContexts(),b=p.length;b||m(),p.forEach(function(w){var v=function(){g.iterateThroughNodes(u,w,h,f,function(){--b<=0&&m()})};g.iframes?g.waitForIframes(w,v):v()})}}],[{key:"matches",value:function(u,h){var f=typeof h=="string"?[h]:h,g=u.matches||u.matchesSelector||u.msMatchesSelector||u.mozMatchesSelector||u.oMatchesSelector||u.webkitMatchesSelector;if(g){var m=!1;return f.every(function(p){return g.call(u,p)?(m=!0,!1):!0}),m}else return!1}}]),c}(),a=function(){function c(d){i(this,c),this.ctx=d,this.ie=!1;var u=window.navigator.userAgent;(u.indexOf("MSIE")>-1||u.indexOf("Trident")>-1)&&(this.ie=!0)}return s(c,[{key:"log",value:function(u){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"debug",f=this.opt.log;this.opt.debug&&(typeof f>"u"?"undefined":t(f))==="object"&&typeof f[h]=="function"&&f[h]("mark.js: "+u)}},{key:"escapeStr",value:function(u){return u.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},{key:"createRegExp",value:function(u){return this.opt.wildcards!=="disabled"&&(u=this.setupWildcardsRegExp(u)),u=this.escapeStr(u),Object.keys(this.opt.synonyms).length&&(u=this.createSynonymsRegExp(u)),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(u=this.setupIgnoreJoinersRegExp(u)),this.opt.diacritics&&(u=this.createDiacriticsRegExp(u)),u=this.createMergedBlanksRegExp(u),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(u=this.createJoinersRegExp(u)),this.opt.wildcards!=="disabled"&&(u=this.createWildcardsRegExp(u)),u=this.createAccuracyRegExp(u),u}},{key:"createSynonymsRegExp",value:function(u){var h=this.opt.synonyms,f=this.opt.caseSensitive?"":"i",g=this.opt.ignoreJoiners||this.opt.ignorePunctuation.length?"\0":"";for(var m in h)if(h.hasOwnProperty(m)){var p=h[m],b=this.opt.wildcards!=="disabled"?this.setupWildcardsRegExp(m):this.escapeStr(m),w=this.opt.wildcards!=="disabled"?this.setupWildcardsRegExp(p):this.escapeStr(p);b!==""&&w!==""&&(u=u.replace(new RegExp("("+this.escapeStr(b)+"|"+this.escapeStr(w)+")","gm"+f),g+("("+this.processSynomyms(b)+"|")+(this.processSynomyms(w)+")")+g))}return u}},{key:"processSynomyms",value:function(u){return(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(u=this.setupIgnoreJoinersRegExp(u)),u}},{key:"setupWildcardsRegExp",value:function(u){return u=u.replace(/(?:\\)*\?/g,function(h){return h.charAt(0)==="\\"?"?":""}),u.replace(/(?:\\)*\*/g,function(h){return h.charAt(0)==="\\"?"*":""})}},{key:"createWildcardsRegExp",value:function(u){var h=this.opt.wildcards==="withSpaces";return u.replace(/\u0001/g,h?"[\\S\\s]?":"\\S?").replace(/\u0002/g,h?"[\\S\\s]*?":"\\S*")}},{key:"setupIgnoreJoinersRegExp",value:function(u){return u.replace(/[^(|)\\]/g,function(h,f,g){var m=g.charAt(f+1);return/[(|)\\]/.test(m)||m===""?h:h+"\0"})}},{key:"createJoinersRegExp",value:function(u){var h=[],f=this.opt.ignorePunctuation;return Array.isArray(f)&&f.length&&h.push(this.escapeStr(f.join(""))),this.opt.ignoreJoiners&&h.push("\\u00ad\\u200b\\u200c\\u200d"),h.length?u.split(/\u0000+/).join("["+h.join("")+"]*"):u}},{key:"createDiacriticsRegExp",value:function(u){var h=this.opt.caseSensitive?"":"i",f=this.opt.caseSensitive?["a","A","c","C","d","D","e","E","i","I","l","L","n","N","o","O","r","R","s","S","t","T","u","U","y","Y","z","Z"]:["aA","cC","dD","eE","iI","lL","nN","oO","rR","sS","tT","uU","yY","zZ"],g=[];return u.split("").forEach(function(m){f.every(function(p){if(p.indexOf(m)!==-1){if(g.indexOf(p)>-1)return!1;u=u.replace(new RegExp("["+p+"]","gm"+h),"["+p+"]"),g.push(p)}return!0})}),u}},{key:"createMergedBlanksRegExp",value:function(u){return u.replace(/[\s]+/gmi,"[\\s]+")}},{key:"createAccuracyRegExp",value:function(u){var h=this,f="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~",g=this.opt.accuracy,m=typeof g=="string"?g:g.value,p=typeof g=="string"?[]:g.limiters,b="";switch(p.forEach(function(w){b+="|"+h.escapeStr(w)}),m){case"partially":default:return"()("+u+")";case"complementary":return b="\\s"+(b||this.escapeStr(f)),"()([^"+b+"]*"+u+"[^"+b+"]*)";case"exactly":return"(^|\\s"+b+")("+u+")(?=$|\\s"+b+")"}}},{key:"getSeparatedKeywords",value:function(u){var h=this,f=[];return u.forEach(function(g){h.opt.separateWordSearch?g.split(" ").forEach(function(m){m.trim()&&f.indexOf(m)===-1&&f.push(m)}):g.trim()&&f.indexOf(g)===-1&&f.push(g)}),{keywords:f.sort(function(g,m){return m.length-g.length}),length:f.length}}},{key:"isNumeric",value:function(u){return Number(parseFloat(u))==u}},{key:"checkRanges",value:function(u){var h=this;if(!Array.isArray(u)||Object.prototype.toString.call(u[0])!=="[object Object]")return this.log("markRanges() will only accept an array of objects"),this.opt.noMatch(u),[];var f=[],g=0;return u.sort(function(m,p){return m.start-p.start}).forEach(function(m){var p=h.callNoMatchOnInvalidRanges(m,g),b=p.start,w=p.end,v=p.valid;v&&(m.start=b,m.length=w-b,f.push(m),g=w)}),f}},{key:"callNoMatchOnInvalidRanges",value:function(u,h){var f=void 0,g=void 0,m=!1;return u&&typeof u.start<"u"?(f=parseInt(u.start,10),g=f+parseInt(u.length,10),this.isNumeric(u.start)&&this.isNumeric(u.length)&&g-h>0&&g-f>0?m=!0:(this.log("Ignoring invalid or overlapping range: "+(""+JSON.stringify(u))),this.opt.noMatch(u))):(this.log("Ignoring invalid range: "+JSON.stringify(u)),this.opt.noMatch(u)),{start:f,end:g,valid:m}}},{key:"checkWhitespaceRanges",value:function(u,h,f){var g=void 0,m=!0,p=f.length,b=h-p,w=parseInt(u.start,10)-b;return w=w>p?p:w,g=w+parseInt(u.length,10),g>p&&(g=p,this.log("End range automatically set to the max value of "+p)),w<0||g-w<0||w>p||g>p?(m=!1,this.log("Invalid range: "+JSON.stringify(u)),this.opt.noMatch(u)):f.substring(w,g).replace(/\s+/g,"")===""&&(m=!1,this.log("Skipping whitespace only range: "+JSON.stringify(u)),this.opt.noMatch(u)),{start:w,end:g,valid:m}}},{key:"getTextNodes",value:function(u){var h=this,f="",g=[];this.iterator.forEachNode(NodeFilter.SHOW_TEXT,function(m){g.push({start:f.length,end:(f+=m.textContent).length,node:m})},function(m){return h.matchesExclude(m.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},function(){u({value:f,nodes:g})})}},{key:"matchesExclude",value:function(u){return o.matches(u,this.opt.exclude.concat(["script","style","title","head","html"]))}},{key:"wrapRangeInTextNode",value:function(u,h,f){var g=this.opt.element?this.opt.element:"mark",m=u.splitText(h),p=m.splitText(f-h),b=document.createElement(g);return b.setAttribute("data-markjs","true"),this.opt.className&&b.setAttribute("class",this.opt.className),b.textContent=m.textContent,m.parentNode.replaceChild(b,m),p}},{key:"wrapRangeInMappedTextNode",value:function(u,h,f,g,m){var p=this;u.nodes.every(function(b,w){var v=u.nodes[w+1];if(typeof v>"u"||v.start>h){if(!g(b.node))return!1;var _=h-b.start,y=(f>b.end?b.end:f)-b.start,C=u.value.substr(0,b.start),S=u.value.substr(y+b.start);if(b.node=p.wrapRangeInTextNode(b.node,_,y),u.value=C+S,u.nodes.forEach(function(k,I){I>=w&&(u.nodes[I].start>0&&I!==w&&(u.nodes[I].start-=y),u.nodes[I].end-=y)}),f-=y,m(b.node.previousSibling,b.start),f>b.end)h=b.end;else return!1}return!0})}},{key:"wrapMatches",value:function(u,h,f,g,m){var p=this,b=h===0?0:h+1;this.getTextNodes(function(w){w.nodes.forEach(function(v){v=v.node;for(var _=void 0;(_=u.exec(v.textContent))!==null&&_[b]!=="";)if(f(_[b],v)){var y=_.index;if(b!==0)for(var C=1;C<b;C++)y+=_[C].length;v=p.wrapRangeInTextNode(v,y,y+_[b].length),g(v.previousSibling),u.lastIndex=0}}),m()})}},{key:"wrapMatchesAcrossElements",value:function(u,h,f,g,m){var p=this,b=h===0?0:h+1;this.getTextNodes(function(w){for(var v=void 0;(v=u.exec(w.value))!==null&&v[b]!=="";){var _=v.index;if(b!==0)for(var y=1;y<b;y++)_+=v[y].length;var C=_+v[b].length;p.wrapRangeInMappedTextNode(w,_,C,function(S){return f(v[b],S)},function(S,k){u.lastIndex=k,g(S)})}m()})}},{key:"wrapRangeFromIndex",value:function(u,h,f,g){var m=this;this.getTextNodes(function(p){var b=p.value.length;u.forEach(function(w,v){var _=m.checkWhitespaceRanges(w,b,p.value),y=_.start,C=_.end,S=_.valid;S&&m.wrapRangeInMappedTextNode(p,y,C,function(k){return h(k,w,p.value.substring(y,C),v)},function(k){f(k,w)})}),g()})}},{key:"unwrapMatches",value:function(u){for(var h=u.parentNode,f=document.createDocumentFragment();u.firstChild;)f.appendChild(u.removeChild(u.firstChild));h.replaceChild(f,u),this.ie?this.normalizeTextNode(h):h.normalize()}},{key:"normalizeTextNode",value:function(u){if(u){if(u.nodeType===3)for(;u.nextSibling&&u.nextSibling.nodeType===3;)u.nodeValue+=u.nextSibling.nodeValue,u.parentNode.removeChild(u.nextSibling);else this.normalizeTextNode(u.firstChild);this.normalizeTextNode(u.nextSibling)}}},{key:"markRegExp",value:function(u,h){var f=this;this.opt=h,this.log('Searching with expression "'+u+'"');var g=0,m="wrapMatches",p=function(w){g++,f.opt.each(w)};this.opt.acrossElements&&(m="wrapMatchesAcrossElements"),this[m](u,this.opt.ignoreGroups,function(b,w){return f.opt.filter(w,b,g)},p,function(){g===0&&f.opt.noMatch(u),f.opt.done(g)})}},{key:"mark",value:function(u,h){var f=this;this.opt=h;var g=0,m="wrapMatches",p=this.getSeparatedKeywords(typeof u=="string"?[u]:u),b=p.keywords,w=p.length,v=this.opt.caseSensitive?"":"i",_=function y(C){var S=new RegExp(f.createRegExp(C),"gm"+v),k=0;f.log('Searching with expression "'+S+'"'),f[m](S,1,function(I,T){return f.opt.filter(T,C,g,k)},function(I){k++,g++,f.opt.each(I)},function(){k===0&&f.opt.noMatch(C),b[w-1]===C?f.opt.done(g):y(b[b.indexOf(C)+1])})};this.opt.acrossElements&&(m="wrapMatchesAcrossElements"),w===0?this.opt.done(g):_(b[0])}},{key:"markRanges",value:function(u,h){var f=this;this.opt=h;var g=0,m=this.checkRanges(u);m&&m.length?(this.log("Starting to mark with the following ranges: "+JSON.stringify(m)),this.wrapRangeFromIndex(m,function(p,b,w,v){return f.opt.filter(p,b,w,v)},function(p,b){g++,f.opt.each(p,b)},function(){f.opt.done(g)})):this.opt.done(g)}},{key:"unmark",value:function(u){var h=this;this.opt=u;var f=this.opt.element?this.opt.element:"*";f+="[data-markjs]",this.opt.className&&(f+="."+this.opt.className),this.log('Removal selector "'+f+'"'),this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT,function(g){h.unwrapMatches(g)},function(g){var m=o.matches(g,f),p=h.matchesExclude(g);return!m||p?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},this.opt.done)}},{key:"opt",set:function(u){this._opt=r({},{element:"",className:"",exclude:[],iframes:!1,iframesTimeout:5e3,separateWordSearch:!0,diacritics:!0,synonyms:{},accuracy:"partially",acrossElements:!1,caseSensitive:!1,ignoreJoiners:!1,ignoreGroups:0,ignorePunctuation:[],wildcards:"disabled",each:function(){},noMatch:function(){},filter:function(){return!0},done:function(){},debug:!1,log:window.console},u)},get:function(){return this._opt}},{key:"iterator",get:function(){return new o(this.ctx,this.opt.iframes,this.opt.exclude,this.opt.iframesTimeout)}}]),c}();function l(c){var d=this,u=new a(c);return this.mark=function(h,f){return u.mark(h,f),d},this.markRegExp=function(h,f){return u.markRegExp(h,f),d},this.markRanges=function(h,f){return u.markRanges(h,f),d},this.unmark=function(h){return u.unmark(h),d},this}return l})})(rte);var MLe=rte.exports;const G9=qk(MLe);function Wc(n,e){const[t,i]=e().controller,s=e().prefix,r=new G9(n);let o=0,a=0,l=0;i({search:c=>{let d;const u=new Promise(h=>d=h);return c?r.unmark({element:"mark",done:()=>{r.mark(c,{acrossElements:!1,className:"search-result",separateWordSearch:!1,noMatch:()=>{o=0,l=0,a=0,d(void 0)},each:h=>{var g=(h.closest(".preview")||h.closest(".group"))?.getBoundingClientRect(),m=g?h.getBoundingClientRect():void 0;!g||m.left<g.right?(o++,h.id=`${s}_${o}`,o===1&&h.classList.add("search-result-active")):l++},done:h=>{if(o===0)o=0,l=0,a=0,r.unmark({element:"mark",done:()=>{d(void 0)}});else{o=1,a=h-l;const f=n.querySelector(`#${s}_${o}`);f&&oy(f),d({current:1,total:a})}}})}}):o>0?(o=0,l=0,a=0,r.unmark({element:"mark",done:()=>{d(void 0)}})):d(void 0),u},jumpToNext:async()=>{let c=n.querySelector(`#${s}_${o}`);if(c&&c.classList.remove("search-result-active"),o++,o>a&&(o=1),c=n.querySelector(`#${s}_${o}`),c)return c.classList.add("search-result-active"),oy(c),{current:o,total:a}},jumpToPrevious:async()=>{let c=n.querySelector(`#${s}_${o}`);if(c&&c.classList.remove("search-result-active"),o--,o<1&&(o=a),c=n.querySelector(`#${s}_${o}`),c)return c.classList.add("search-result-active"),oy(c),{current:o,total:a}},exit:c=>{let d;const u=new Promise(h=>d=h);if(c&&o>0){const h=n.querySelector(`#${s}_${o}`);if(h){const f=document.createRange();f.setStartBefore(h);const g=document.getSelection();g?.removeAllRanges(),g?.addRange(f),oy(h),h.closest("[data-id]")?.click(),h.closest("[data-id]")?.focus()}else n.closest('[data-namespace$="logs.content"]')?.focus()}else n.closest('[data-namespace$="logs.content"]')?.focus();return o=0,a=0,r.unmark({element:"mark",className:"search-result",done:()=>d()}),u}})}function oy(n){const e=n.closest(".scrollable,.scrollable_");e&&(e.scrollTop=n.offsetTop-e.getBoundingClientRect().height/3)}var ELe=G("<li>"),NLe=G('<div class="relative flex-1 cursor-default border-t border-t-[var(--panel-view-border)] outline-none"tabindex=-1><div class="flex max-h-7 flex-row items-center justify-center py-1 shadow-[var(--widget-shadow)]"><div class="flex-grow truncate px-2 py-0.5 pr-1 text-[length:--small-header-font-size] font-bold uppercase">Call Stack</div><div class="ml-auto flex pr-1 [&amp;_li]:flex [&amp;_li_button]:mx-[0.0625rem] [&amp;_li_button]:!text-[length:--icon-font-size]"><ul class="flex flex-row items-center justify-center"><li></li></ul></div></div><div class="panel-font-size absolute inset-0 top-7 flex cursor-text flex-col overflow-y-auto outline-none"tabindex=-1 data-vscode-context="{&quot;webviewSection&quot;: &quot;viewer&quot;, &quot;preventDefaultContextMenuItems&quot;: false}">'),RLe=G('<div class="mx-auto my-auto flex h-full w-full items-center justify-center px-3 text-center text-[length:--header-font-size] uppercase tracking-wide text-[var(--subtle-foreground)]">'),WLe=G('<span class="codicon codicon-info inline-flex justify-center pb-[0.14rem] pl-1 align-middle !text-[length:--icon-smaller-font-size]">'),ALe=G("<div class=cursor-default>"),FLe=G(`<div class="code w-full flex-1 overflow-y-auto overflow-x-hidden [word-spacing:-0.1rem] [&amp;>div.item.editable]:bg-[--text-mode-area-background] [&amp;>div.item.group-item]:bg-[--list-hover-background] [&amp;>div.item.marked]:after:absolute [&amp;>div.item.marked]:after:bottom-[-0.0625rem] [&amp;>div.item.marked]:after:right-[-0.0625rem] [&amp;>div.item.marked]:after:top-[-0.0625rem] [&amp;>div.item.marked]:after:border-r-[0.1875rem] [&amp;>div.item.marked]:after:border-r-[var(--focus-border)] [&amp;>div.item.marked]:after:content-[''] [&amp;>div.item.selected]:!border-[--focus-border-vivid] [&amp;>div.item:has(+div.item.selected)]:!border-b-transparent [&amp;>div.item]:relative [&amp;>div.item]:cursor-default [&amp;>div.item]:border [&amp;>div.item]:border-transparent [&amp;>div.item]:outline-none [&amp;>div.item_.token-punctuation]:tracking-tighter [&amp;_div.content[contentEditable='true']_.actions_.codicon-edit]:hidden [&amp;_div.content]:relative [&amp;_div.content]:ml-[0.625rem] [&amp;_div.content]:overflow-auto [&amp;_div.content]:pb-0.5 [&amp;_div.content]:pr-[0.625rem] [&amp;_div.content]:leading-[--log-viewer-line-height] [&amp;_div.content]:outline-none [&amp;_div.content_.actions]:float-right [&amp;_div.content_.actions]:mr-[-0.25rem] [&amp;_div.content_.actions]:inline-flex [&amp;_div.header]:flex [&amp;_div.header]:flex-row [&amp;_div.header]:items-center [&amp;_div.header]:justify-center [&amp;_div.header]:pl-1.5 [&amp;_div.header]:pr-2 [&amp;_div.header]:leading-[--log-viewer-preview-height] [&amp;_div.item-expander]:flex-shrink [&amp;_div.item-expander]:!text-[length:var(--panel-larger-font-size)] [&amp;_div.preview]:flex-grow [&amp;_div.preview]:truncate [&amp;_div.preview]:pr-0.5 [&amp;_div.preview]:[word-spacing:-0.25em] [&amp;_div.preview_span.token-punctuation]:tracking-[-.05rem] [&amp;_div.source-link]:ml-auto [&amp;_span.context]:opacity-80 [&amp;_span.indentation]:border-l [&amp;_span.indentation]:border-l-[var(--log-viewer-ruler)] [&amp;_span.indentation]:text-[length:var(--log-viewer-indentation-size)] [&amp;_span.level-expander-chevron]:cursor-pointer [&amp;_span.level-expander-ellipsis]:cursor-pointer [&amp;_span]:whitespace-pre"><a class=hidden target=_blank>`),VLe=G("<span class=context>: "),oz=G("<div class=source-link tabindex=-1>"),PLe=G('<div class=content tabindex=-1 data-vscode-context="{&quot;webviewSection&quot;: &quot;viewer&quot;, &quot;preventDefaultContextMenuItems&quot;: false}"><div class="actions flex items-center overflow-hidden [&amp;_.icon]:text-[length:--icon-smallest-font-size] [&amp;_.icon]:opacity-80 [&amp;_button]:mx-[0.0625rem] [&amp;_button]:my-[0.0625rem] [&amp;_button]:p-[0.0625rem]">'),OLe=G('<div class=item tabindex=-1><div class=header><div class="item-expander codicon icon-opacity cursor-pointer"></div><div class=preview>'),ZLe=G("<span>Value is not available"),GLe=G('<div class="item group-item"tabindex=-1><div><div class="group flex-grow truncate text-[length:--panel-smaller-font-size] opacity-80">'),BLe=G('<div class="flex h-[--log-viewer-preview-height] flex-row items-center"><div class="flex-grow truncate">Watch expressions</div><div class="[&amp;_button]:!ml-0.0625rem] ml-auto flex items-center justify-center [&amp;_.codicon]:!p-[0.0625rem] [&amp;_.codicon]:text-[length:--icon-smaller-font-size]">'),XLe=G('<span class="codicon codicon-eye icon-opacity">'),zLe=G('<span class="codicon codicon-info inline-flex justify-center pb-[0.08rem] pl-1 align-middle !text-[length:--icon-smallest-font-size]">'),HLe=G('<div class="item flex-grow !items-center !justify-center truncate pl-1.5 pr-1 text-center text-[length:--panel-smaller-font-size] leading-[--log-viewer-preview-height] tracking-tight text-[var(--subtle-foreground)] opacity-80">'),ULe=G('<span class="codicon codicon-globe icon-opacity">'),YLe=G('<span class="codicon codicon-beaker icon-opacity text-[--testing-icon-passed]">'),KLe=G('<span class="codicon codicon-error icon-opacity text-[--error-foreground]">'),jLe=G('<span class="codicon codicon-pass icon-opacity text-[--testing-icon-passed]">'),JLe=G("<span>@ "),$Le=G('<div class="code px-2 tracking-tight"><span class="whitespace-pre text-[var(--token-scope-function-foreground)]">');const az=30,QLe=/(\b(https?):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi;function ow(n){const e=n.namespace,t=Dt(),i=n.service,[s,r]=t.appSettings(),[o,a]=he(null),[l,c]=he(az),d=yg(Cme(T=>c(T)),300);jh(o,([T])=>{const D=T.borderBoxSize[0].inlineSize-1;if(D>0){const M=Math.floor(Math.max(Math.max((D||0)-8,0)/h(),5));az===l()?c(M):d(M)}});const u=J(()=>parseFloat(getComputedStyle(document.body)?.getPropertyValue("--panel-font-size").split("px")[0])),h=J(()=>yQ*u()/10),f=()=>s.logs.reverseStack,g=()=>s.logs.fullSourceLinks,m=()=>s.logs.headers,p=()=>s.logs.context,b=()=>t.getDebuggerStarted()(),w=J(()=>!!n.disallowValueLoad);$e(()=>n.state.selection.diagram,T=>{T||n.icons()});const[v,_]=he(null),[y,C]=he(),S=e==="logs",k=t.isStandalone()?"Select any expression in the code viewer to see its value":S?"Value currently unavailable; hover over expression again to refresh":"Hover over any expression in the editor to see its value",I=t.isStandalone()?"":'You may also <b>select and hover</b> over to evaluate the exact expression. "Show value" action does the same for the selected expression.';return x(se,{get when(){return n.state.logs},get fallback(){return(()=>{var T=RLe();return A(T,x(se,{get when(){return!b()},get fallback(){return(()=>{var D=ALe();return We(Te,D,()=>Te&&{content:I}),A(D,k,null),A(D,x(se,{get when(){return!t.isStandalone()&&!S},get children(){return WLe()}}),null),D})()},children:"no logs"})),T})()},get children(){return[x(se,{get when(){return n.state.selection.diagram},get fallback(){return(()=>{var T=FLe(),D=T.firstChild;return We(M=>{a(M),n.scrollableElementRef?.(M)},T),A(T,()=>{const M=(B,Y)=>{const ne=Xe=>{Ie(Xe),Se(!0)},[ee,$]=he(!1),[ge,Ie]=he(!1),[xe,z]=he(!1),[K,Se]=he(!1),De=()=>i.requestLogEntryDetailsWithLargestAvailableValue(B().test?.id||"global",B().test?.path||"global",B().id),ke=J(()=>B().maybeObsolete===!0||n.state.logs?.maybeObsolete===!0),je=J(()=>ke()||w()),et=J(()=>B().watchExpressionWithNoValue),mt=J(()=>{const Xe=B().value.props?.[0];return Xe?.callStackNode?Xe:void 0}),ze=()=>!et()&&!ke()&&mt(),ht=J(()=>B().value.type?.toLowerCase()==="string"),nt=()=>!ke()&&!et()&&ht(),zt=()=>!ke()&&!et()&&ht()&&B().value.capped,Fe=()=>!et(),re=()=>B().value.props?.find(Xe=>!Xe.callStackNode),ie=()=>ge()&&(ke()||ee()||et()),de=J(()=>!!B().watchExpressionId),Z=()=>de()&&!S,O=()=>b()&&B().traceFrame&&!ke()&&!de(),q=J(()=>B().watchExpressionId||B().id),Q=J(()=>n.state.selection.log?.logOrExpressionId===q()),ce=J(()=>B().selection),be=J(()=>B().watchExpressionId?"watch":B().test?.id||"global");$e(Y,Xe=>{ne(Xe)},{defer:!0}),$e(n.foldAllOpenedLogs,()=>{ne(!1)},{defer:!0}),$e(()=>B().valueWasRequestedShallow,Xe=>{Xe||$(!0)}),$e(()=>B().value.autoExpand,Xe=>{Xe?K()||(Ie(!0),z(!0)):xe()&&Ie(!1)}),$e(ge,Xe=>{Xe&&!ee()&&!ke()&&De()});const[Ae,Pe]=he(!1);let tt,qe;const wt=()=>{qe.focus({preventScroll:!0}),qe.setAttribute("contenteditable","true"),tt.classList.add("editable");const Xe=window.getSelection();(!Xe?.anchorNode?.parentNode||!qe.contains(Xe.anchorNode.parentNode))&&Xe?.setPosition(qe.lastChild),tt.dispatchEvent(new hb),t.featureUsed("logTextMode")},[me,fe]=he(!1),Ze=bhe(a4(me,150),250),Ye={value:()=>ee()?Promise.resolve(B().value):Promise.resolve(fe(!0)).then(()=>De()).then(Xe=>Xe?.value).finally(()=>fe(!1)),isRoot:!0,rootContext:()=>B().context};return(()=>{var Xe=OLe(),oe=Xe.firstChild,le=oe.firstChild,Ve=le.nextSibling;return We(ae=>{tt=ae,ae.entryInfo=Ye,$e([()=>ae,ce],()=>{if(ae&&ce()?.active){Ie(!0);const _e=ae.closest(".scrollable,.scrollable_");_e&&(_e.scrollTop=ae.offsetTop)}})},Xe),Xe.$$mousemove=ae=>{const _e=ae.target;if((_e.classList.contains("token-string")||_e.classList.contains("raw"))&&!_e.dataset.url){const lt=(_e.textContent||"").trim().match(QLe);if(lt){let ft=lt[0].replace(/^['"]|['"]$/g,"");_e.dataset.url=ft,_e.classList.add("hover:underline"),_e.classList.add("hover:cursor-pointer")}}},Xe.$$click=ae=>{const _e=ae.target;if(_e.dataset?.url){C(_e.dataset.url),v()?.click();return}i.selectLog({logOrExpressionId:q(),logSource:be()})},xt(Xe,"data-namespace",`${e}.logs.content.list.item`),le.$$click=()=>{ne(!ge())},le.addEventListener("logExpandExternally",()=>{ne(!0)}),le.addEventListener("logCollapseExternally",()=>{ne(!1)}),A(Ve,x(se,{get when(){return J(()=>!!p())()&&B().context},get children(){var ae=VLe(),_e=ae.firstChild;return A(ae,()=>B().context,_e),ae}}),null),A(Ve,x(se,{get when(){return!et()},get fallback(){return ZLe()},get children(){return x(EC,{get data(){return B().value},context:{depth:0,indentationLvl:0,linePrefixLength:0,displayPropLimit:5,maxDepth:3,maxStrLength:128,maxLineLength:()=>1/0,disallowValueLoad:w,expandedPropLimit:1/0},onDataAvailable:ae=>{},onValueLoadRequest:ae=>{}})}}),null),A(oe,x(se,{get when(){return B().loc?.line&&!S},get children(){var ae=oz();return ae.$$focusout=_e=>_e.target.setAttribute("tabindex","-2"),xt(ae,"data-namespace",`${e}.logs.content.list.item.link`),A(ae,x(fh,{get value(){return B().loc},get lineAndColumnOnly(){return!g()},class:"source-link select-none hover:underline",compactFileNameOnly:!0,get classList(){return{"[&_span]:!no-underline":ke(),"!cursor-default":ke(),"!text-[var(--subtle-foreground)]":ke()}},codeFragmentTooltipOptions:()=>!ke()&&B().loc.file&&B().loc.line?{file:B().loc.file,line:B().loc.line,navigatable:!0}:void 0})),ae}}),null),A(Xe,x(se,{get when(){return ie()},get children(){var ae=PLe(),_e=ae.firstChild;ae.$$dblclick=()=>wt(),ae.$$focusout=He=>{const lt=He.relatedTarget;lt&&(qe.contains(lt)||lt.closest(".tippy-box"))||qe.hasAttribute("contentEditable")&&(qe.removeAttribute("contentEditable"),tt.classList.remove("editable"),tt.dispatchEvent(new K1))},ae.addEventListener("paste",He=>He.preventDefault()),ae.addEventListener("cut",He=>He.preventDefault()),ae.$$input=()=>window.document.execCommand("undo");var Oe=qe;return typeof Oe=="function"?We(Oe,ae):qe=ae,xt(ae,"spellcheck",!1),ae.style.setProperty("caret-color","var(--editor-cursor-foreground)"),xt(ae,"data-namespace",`${e}.logs.content.list.item.viewer`),A(_e,x(Ee,{class:"codicon-edit",namespace:`${e}.logs.content.list.item.viewer.action`,tooltip:'Enter text mode <span class="keyboard-shortcut">Enter</span><br/><br/>Use <span class="keyboard-shortcut">Esc</span> to exit text mode',onClick:He=>{He.preventDefault(),He.stopPropagation(),wt()}}),null),A(_e,x(se,{get when(){return O()},get children(){return x(Ee,{class:"codicon-debug-line-by-line",namespace:`${e}.logs.content.list.item.viewer.action`,tooltip:"Step to log in debugger",onClick:()=>t.stepInDebugger({frame:B().traceFrame,playToExactFrame:!0})})}}),null),A(_e,x(se,{get when(){return nt()},get children(){return x(Ee,{onClick:()=>Pe(!Ae()),get tooltip(){return Ae()?"Show string literal":"Show raw string value"},class:"codicon-symbol-string !pt-[0.125rem]",get classList(){return{activeIcon:Ae()}},namespace:`${e}.logs.content.list.item.viewer.action`})}}),null),A(_e,x(se,{get when(){return zt()},get children(){return x(Ee,{onClick:()=>i.requestValues({path:B().value.queryPath,strLength:Number.MAX_VALUE},B()),tooltip:"Load full string value",class:"codicon-kebab-vertical rotate-90",namespace:`${e}.logs.content.list.item.viewer.action`})}}),null),A(_e,x(se,{get when(){return re()},get children(){return x(Ee,{onClick:()=>i.showAsDiagram({logSource:be(),logOrExpressionId:q()}),tooltip:"Show as diagram <span class='keyboard-shortcut'>D</span>",class:"codicon-type-hierarchy-sub -rotate-90",namespace:`${e}.logs.content.list.item.viewer.action`})}}),null),A(_e,x(se,{get when(){return ze()},get children(){return x(Ee,{class:"!pb-[0.03125rem] !pt-[0.09375rem]",onClick:()=>i.requestCallStackNode(mt(),B()),tooltip:"Show call stack",get classList(){return{"codicon-layers":!n.state.logs?.showStackTraceFor,"hover:!bg-[unset]":!!n.state.logs?.showStackTraceFor,"codicon-loading codicon-modifier-spin":!!n.state.logs?.showStackTraceFor}},namespace:`${e}.logs.content.list.item.viewer.action`})}}),null),A(_e,x(se,{get when(){return Fe()},get children(){return x(Ee,{onClick:()=>i.copyValue(B().value),tooltip:"Copy value <span class='keyboard-shortcut'>C</span>",class:"codicon-copy",namespace:`${e}.logs.content.list.item.viewer.action`})}}),null),A(_e,x(se,{get when(){return Z()},get children(){return x(Ee,{class:"codicon-close",tooltip:"Remove watch expression",onClick:He=>{t.removeWatchExpressions([B().loc]),He.preventDefault(),He.stopPropagation(),n.onFocus?.(`${e}.logs`,!0)},namespace:`${e}.logs.content.list.item.viewer.action`})}}),null),A(ae,x(se,{get when(){return!et()},get children(){return x(EC,{get data(){return B().value},get context(){return{depth:0,indentationLvl:0,linePrefixLength:0,displayPropLimit:200,maxDepth:n.maxDepth||5,noValueLoadBeyondMaxDepth:n.noValueLoadBeyondMaxDepth,maxStrLength:1/0,multiline:!0,maxLineLength:l,disallowValueLoad:je,expandedPropLimit:40}},onDataAvailable:He=>{},onValueLoadRequest:He=>i.requestValues(He,B()),get displayRawValue(){return Ae()}})}}),null),Me(()=>ae.classList.toggle("disallow-value-load",!!je())),ae}}),null),Me(ae=>{var _e={"opacity-50":ke(),selected:Q(),expanded:ge(),marked:ce()?.marked,"after:hidden":ge(),"!pb-0":ge()},Oe=B().id,He=B().watchExpressionId,lt=be(),ft=!!ge(),kt=!ge(),ii=!!Ze(),Ht=!!et(),pi=!!w();return ae.e=nn(Xe,_e,ae.e),Oe!==ae.t&&xt(Xe,"data-id",ae.t=Oe),He!==ae.a&&xt(Xe,"data-watch-id",ae.a=He),lt!==ae.o&&xt(Xe,"data-parent-id",ae.o=lt),ft!==ae.i&&le.classList.toggle("codicon-chevron-down",ae.i=ft),kt!==ae.n&&le.classList.toggle("codicon-chevron-right",ae.n=kt),ii!==ae.s&&le.classList.toggle("busy",ae.s=ii),Ht!==ae.h&&Ve.classList.toggle("text-[--subtle-foreground]",ae.h=Ht),pi!==ae.r&&Ve.classList.toggle("disallow-value-load",ae.r=pi),ae},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),Xe})()},E=()=>Object.values(n.state.logs.items.global?.logs||{}).sort((B,Y)=>(B.order??0)-(Y.order??0)),W=()=>Object.values(n.state.logs.items.watch?.logs||{}),P=()=>Object.values(n.state.logs.items||{}).filter(B=>B.test&&!B.watch),N=B=>(()=>{var Y=GLe(),ne=Y.firstChild,ee=ne.firstChild;return Y.$$click=()=>i.selectLog({logSource:B.id}),xt(Y,"data-namespace",`${e}.logs.content.list.group`),Y.addEventListener("logExpandExternally",B.onExpand),Y.addEventListener("logCollapseExternally",B.onCollapse),A(ne,()=>B.icon,ee),A(ee,()=>B.header),A(ne,x(se,{get when(){return B.location?.line},get children(){var $=oz();return xt($,"data-namespace",`${e}.logs.content.list.group.link`),A($,x(fh,{get value(){return B.location},get lineAndColumnOnly(){return!g()},compactFileNameOnly:!0,get classList(){return{"[&_span]:!no-underline":B.maybeObsolete,"!cursor-default":B.maybeObsolete,"!text-[var(--subtle-foreground)]":B.maybeObsolete}},codeFragmentTooltipOptions:()=>!B.maybeObsolete&&B.location.file&&B.location.line?{file:B.location.file,line:B.location.line,navigatable:!0}:void 0})),$}}),null),Me($=>{var ge=!!B.selected,Ie=B.id,xe=`header flex items-center
                  [&_span.codicon]:pl-0.5
                  [&_span.codicon]:pr-1
                  [&_span.codicon]:text-[length:--icon-smallest-font-size]
                  ${B.headerClass||""}`;return ge!==$.e&&Y.classList.toggle("selected",$.e=ge),Ie!==$.t&&xt(Y,"data-id",$.t=Ie),xe!==$.a&&mr(ne,$.a=xe),$},{e:void 0,t:void 0,a:void 0}),Y})(),[H,U]=he(!1,{equals:!1});return[x(se,{get when(){return b()},get children(){return[x(se,{when:!S,get children(){return x(N,{id:"watch",headerClass:"!pr-1.5",get header(){return(()=>{var B=BLe(),Y=B.firstChild,ne=Y.nextSibling;return A(ne,x(se,{get when(){return W().length},get children(){return[x(Ee,{class:"codicon-refresh",tabIndex:0,namespace:`${e}.logs.content.list.group.action`,tooltip:"Re-evaluate all watch expressions for the currently active frame",onClick:()=>t.evaluateWatchExpressions()}),x(Ee,{class:"codicon-close-all",tabIndex:0,namespace:`${e}.logs.content.list.group.action`,tooltip:"Remove all watch expressions",onClick:ee=>{t.removeWatchExpressions(),ee.preventDefault(),ee.stopPropagation(),n.onFocus?.(`${e}.logs`,!0)}})]}})),B})()},get icon(){return(()=>{var B=XLe();return We(Te,B,()=>Te&&{content:`Watch expressions are temporary logs evaluated in the context of the currently active frame.<br/><br/>${k}. ${I}<br/><br/>If the value of a watch expression is displayed as unavailable but can be evaluated in the context of the current step, use the "Re-evaluate" action to retrieve the value.`}),B})()},get maybeObsolete(){return n.state.logs?.maybeObsolete},get selected(){return n.state.selection.log?.logSource==="watch"&&!n.state.selection.log?.logOrExpressionId},onCollapse:()=>U(!1),onExpand:()=>U(!0)})}}),x(se,{get when(){return W().length},get fallback(){return(()=>{var B=HLe();return We(Te,B,()=>Te&&{content:I}),A(B,k,null),A(B,x(se,{get when(){return!t.isStandalone()},get children(){return zLe()}}),null),B})()},get children(){return x(yd,{get each(){return W()},by:B=>B.watchExpressionId,children:B=>M(B,H)})}})]}}),x(se,{get when(){return E().length},get children(){return[x(se,{get when(){return m()||b()},get children(){return x(N,{id:"global",get header(){return n.globalLogsHeader||"Ambient (non-test) logs"},get icon(){return ULe()},get maybeObsolete(){return n.state.logs?.maybeObsolete},get selected(){return n.state.selection.log?.logSource==="global"&&!n.state.selection.log?.logOrExpressionId},onCollapse:()=>U(!1),onExpand:()=>U(!0)})}}),x(yd,{get each(){return E()},by:B=>B.id,children:B=>M(B,H)})]}}),x(yd,{get each(){return P()},by:B=>B.test.id,children:B=>{const Y=()=>Object.values(B().logs).sort((Ie,xe)=>(Ie.order??0)-(xe.order??0)),ne=()=>B().test?.missing?void 0:B().test?.location,ee=()=>b()?(()=>{var Ie=YLe();return Me(()=>Ie.classList.toggle("!text-[--error-foreground]",B().test.errors.length>0)),Ie})():B().test.errors.length?KLe():jLe(),[$,ge]=he(!1,{equals:!1});return[x(se,{get when(){return m()||b()},get children(){return x(N,{get id(){return B().test.id},get header(){return J(()=>!!b())()?"Test logs":x(v4,{get test(){return B().test}})},get location(){return ne()},get icon(){return ee()},get selected(){return n.state.selection.log?.logSource===B().test?.id&&!n.state.selection.log?.logOrExpressionId},get maybeObsolete(){return n.state.logs?.maybeObsolete},onCollapse:()=>ge(!1),onExpand:()=>ge(!0)})}}),x(yd,{get each(){return Y()},by:Ie=>Ie.id,children:Ie=>M(Ie,$)})]}})]},D),A(T,x(Tme,{namespace:`${e}.logs`}),D),A(T,()=>n.append,D),We(_,D),Me(M=>{var E=!!n.scrollableElementRef,W=y();return E!==M.e&&T.classList.toggle("scrollable",M.e=E),W!==M.t&&xt(D,"href",M.t=W),M},{e:void 0,t:void 0}),T})()},get children(){return x(ILe,{get logs(){return n.state.logs.items},get logPath(){return n.state.selection.diagram},get baseFontSize(){return u()},get icons(){return n.icons},get iconsNamespace(){return`${n.namespace}.logs.header.action`},close:()=>i.showAsDiagram(),logsService:i,get disallowValueLoad(){return w()||n.state.logs?.maybeObsolete||void 0},get maxDepth(){return n.maxDepth},get noValueLoadBeyondMaxDepth(){return n.noValueLoadBeyondMaxDepth}})}}),x(se,{get when(){return n.state.logs?.stackTraceToShow},get children(){var T=NLe(),D=T.firstChild,M=D.firstChild,E=M.nextSibling,W=E.firstChild,P=W.firstChild,N=D.nextSibling;return xt(T,"data-namespace",`${e}.logs.content.stack`),A(W,x(se,{get when(){return n.state.logs.stackTraceToShow.length>1},get children(){var H=ELe();return A(H,x(Ee,{get classList(){return{activeIcon:f()}},tooltip:"Toggle reversed call stack order",class:"codicon-arrow-swap rotate-90 !text-[length:--icon-font-size]",tabIndex:0,onClick:()=>r("logs","reverseStack",!f()),namespace:`${e}.logs.content.stack.header.action`})),H}}),P),A(P,x(Ee,{tooltip:"Close",tabIndex:0,class:"codicon-close !text-[length:--icon-font-size]",onClick:()=>{i.hideLogStackTrace(),n.onFocus?.(`${e}.logs`,!0)},namespace:`${e}.logs.content.stack.header.action`})),We(H=>{Fi(()=>H.focus())},N),N.addEventListener("paste",H=>H.preventDefault()),N.addEventListener("cut",H=>H.preventDefault()),N.$$input=()=>window.document.execCommand("undo"),xt(N,"contenteditable",!0),xt(N,"spellcheck",!1),xt(N,"data-namespace",`${e}.logs.content.stack.viewer`),N.style.setProperty("caret-color","var(--editor-cursor-foreground)"),A(N,x(Jp,{get each(){return J(()=>!!f())()?n.state.logs.stackTraceToShow.slice().reverse():n.state.logs.stackTraceToShow},children:H=>(()=>{var U=$Le(),B=U.firstChild;return A(B,()=>H().context),A(U,x(se,{get when(){return H().file},get children(){return[JLe(),x(fh,{get value(){return H()},get options(){return{focus:!0,callStackFrame:H()}},compactFileNameOnly:!0,textModeOptions:{addSpace:!0,contentEditable:!1},codeFragmentTooltipOptions:()=>H().file&&H().line?{file:H().file,line:H().line,navigatable:!0}:void 0})]}}),null),U})()})),T}})]}})}class lz extends CustomEvent{constructor(){super("logCollapseExternally")}}class h5 extends CustomEvent{constructor(){super("logExpandExternally")}}class f5 extends CustomEvent{constructor(){super("valueToggleExternally")}}dn(["input","click","mousemove","focusout","dblclick"]);class aw{constructor(e,t,i){this._namespace=e,this._appService=t,this._logsService=i}matches(e){return e.startsWith(this._namespace)}handle(e,t,i){e=this._narrow(e);const s=document.getSelection();if(!t.target)return;const r=t.target,o=c=>{t.preventDefault(),t.stopPropagation()};if(H1(t))return o();if(t.key==="f"&&fr(t)||t.key==="/"&&!rt(t))return o(this._appService.showFind(this._namespace));const a=this._locateLogElement(e,r),l=a?.classList.contains("expanded");if(a){if(t.key==="Escape"&&!rt(t)&&this._appService.getFindState()()?.namespace===this._namespace)return this._appService.closeFind(),o(a.focus());if(e==="content.list.item.link"||e==="content.list.group.link")if((t.key==="ArrowDown"||t.key==="ArrowRight")&&l){const c=a.querySelector("button");return c?(c.setAttribute("contenteditable","false"),a.classList.remove("editable"),c.focus()):a.focus(),o()}else{if(t.key==="ArrowRight"&&!l)return o(this._expandLog(a));if(t.key==="ArrowLeft")return o(!l||e==="content.list.item.link"?a.focus():this._collapseLog(a));if(t.key==="Escape")return o(a.focus());if(t.key==="Enter")return r.firstChild?.firstChild?.dispatchEvent(hh(t)),a.focus(),o()}else if(e==="content.list.item.viewer.action")if(t.key==="ArrowUp"){if(this._selectLogLink(a))return o()}else{if(t.key==="Escape"||t.key==="ArrowDown")return o(a.focus());if(t.key==="ArrowRight")return this._selectLogAction(a,r,!0)?o():o(a.focus());if(t.key==="ArrowLeft")return this._selectLogAction(a,r,!1)?o():o(a.focus())}else if(e==="content.list.item.viewer"&&r.getAttribute("contenteditable")==="true")if(t.key!=="ArrowDown"&&t.key!=="ArrowUp"&&t.key!=="ArrowLeft"&&t.key!=="ArrowRight"){if(t.key==="Escape")return s&&!s?.isCollapsed?s?.collapseToEnd():(r.setAttribute("contenteditable","false"),a.classList.remove("editable"),a.dispatchEvent(new K1)),o();if(t.key==="Enter"){if(s&&s?.isCollapsed){const c=s.anchorNode?.parentElement;c&&(c.classList.contains("level-expander-chevron")?c.dispatchEvent(new f5):c.parentElement?.querySelector("&>span.indentation")?c.parentElement?.querySelector("&>span.indentation>span.level-expander-chevron")?.dispatchEvent(new f5):c.parentElement?.parentElement?.querySelector("&>span.indentation")&&c.parentElement?.parentElement?.querySelector("&>span.indentation>span.level-expander-chevron")?.dispatchEvent(new f5))}return o()}if(t.key==="Home"||t.key==="End"){if(fr(t)){if(s){const c=a.querySelector(".content");if(c){const d=c.lastElementChild;if(d){const u=d.children.length?t.key==="Home"?d.firstElementChild:g5(d):d;if(u){s.setPosition(u,t.key==="Home"?0:1);const h=a.closest(".scrollable,.scrollable_");if(h){const g=h.getBoundingClientRect().height;let m=h.scrollTop;if(t.key==="Home")a.offsetTop>h.scrollTop&&a.offsetTop<h.scrollTop+g||(m=a.offsetTop-g/3);else{const p=a.offsetTop+a.getBoundingClientRect().height;p>h.scrollTop&&p<h.scrollTop+g||(m=p-g/3)}h.scrollTop=m}}}}}return o()}return}if((t.key==="PageUp"||t.key==="PageDown")&&!rt(t)){if(db||this._appService.isIntegratedVSCode()){const c=a.closest(".scrollable,.scrollable_");if(c&&s){const d=c.getBoundingClientRect(),u=a.getBoundingClientRect(),h=d.height,f=u.height;if(f<h){const g=a.querySelector(".content");if(g){const m=g.lastElementChild;if(m){const p=m.children.length?t.key==="PageUp"?m.firstElementChild:g5(m):m;if(p){s.setPosition(p,t.key==="PageUp"?0:1);const b=a.closest(".scrollable,.scrollable_");if(b){let w=b.scrollTop;if(t.key==="PageUp")a.offsetTop>b.scrollTop&&a.offsetTop<b.scrollTop+h||(w=a.offsetTop-h/3);else{const v=a.offsetTop+a.getBoundingClientRect().height;v>b.scrollTop&&v<b.scrollTop+h||(w=v-h/3)}b.scrollTop=w}}}}}else{const g=h/2,m=a.querySelector(".content");if(m){const p=m.lastElementChild;if(p)if(t.key==="PageUp")if(a.offsetTop>c.scrollTop&&a.offsetTop<c.scrollTop+h){const b=p.children.length?p.firstElementChild:p;s.setPosition(b)}else if(c.scrollTop-=g,a.offsetTop>c.scrollTop&&a.offsetTop<c.scrollTop+h){const b=p.children.length?p.firstElementChild:p;s.setPosition(b)}else{const b=cz(c);s.setPosition(b)}else if(a.offsetTop+f>c.scrollTop&&a.offsetTop+f<c.scrollTop+h){const b=p.children.length?g5(p):p;s.setPosition(b,1)}else{c.scrollTop+=g;const b=cz(c);s.setPosition(b)}}}}return o()}return}if(t.key==="c"&&!rt(t)){const c=this._getLog(i.logs?.items,a);if(c)return o(this._logsService.copyValue(c.value))}if(t.key==="C"&&!Kw(t)&&a)return o(a.dispatchEvent(new fb));if(t.key==="D"&&!Kw(t)&&a)return o(a.dispatchEvent(new gb));if(!y9(t))return o()}else return;else if(e==="content.stack"){if(t.key==="Escape"||t.key==="ArrowUp")return this._logsService.hideLogStackTrace(),o(a.focus());if(t.key!=="Tab")return o(this._locateStackViewerElement(e,r)?.focus())}else{if(e==="content.stack.header.action")return t.key==="ArrowUp"?(this._logsService.hideLogStackTrace(),o(a.focus())):t.key==="Tab"||t.key===" "||t.key==="Enter"?void 0:o(this._locateStackViewerElement(e,r)?.focus());if(e==="content.stack.viewer")if(t.key!=="ArrowDown"&&t.key!=="ArrowUp"&&t.key!=="ArrowLeft"&&t.key!=="ArrowRight"&&t.key!=="Home"&&t.key!=="End"){if((t.key==="PageUp"||t.key==="PageDown")&&!rt(t))return this._appService.isIntegratedVSCode()?o():void 0;if(t.key==="Escape")return s&&!s?.isCollapsed?s?.collapseToEnd():r.parentElement?.focus(),o();if(t.key==="."&&!rt(t)){const c=this._isSourceLink(s),d=c?.getBoundingClientRect();d&&c?.parentElement?.lastChild?.dispatchEvent(new CustomEvent("showCodeFragment",{detail:d}))}if(t.key==="Enter")return s?.anchorNode?.parentElement?.dispatchEvent(hh(t)),o();if(!y9(t))return o()}else return;else if(e==="header.action"||e==="content.list.group.action"){if(t.key===" "||t.key==="Enter")return;if(t.key==="Escape")return o(a.focus())}}if(t.key==="."&&!rt(t)&&a){const c=this._getLog(i.logs?.items,a);if(c?.loc)I_(a,c.loc);else{const d=this._getHeaderLocation(i.logs?.items,a);d&&I_(a,d)}return o()}if(t.key==="ArrowUp"){if(fr(t))return o(a.parentElement?.scrollBy({top:-50,behavior:"smooth"}));if(a.previousElementSibling)return o(this._selectLog(a.previousElementSibling));o()}else if(t.key==="ArrowDown"){if(fr(t))return o(a.parentElement?.scrollBy({top:50,behavior:"smooth"}));if(a.nextElementSibling)return o(this._selectLog(a.nextElementSibling));o()}else{if(t.key==="Home")return o(this._selectLog(a.parentElement?.firstElementChild));if(t.key==="End")return o(this._selectLog(a.parentElement?.lastElementChild));if((t.key==="PageDown"||t.key==="PageUp")&&!rt(t)){const c=a.parentElement;if(c){const d=c.children.length;let u=0;for(let f=0;f<d;f++)if(c.children[f]===a){u=f;break}const h=u+(t.key==="PageUp"?-1:1)*12;return h<0?this._selectLog(a.parentElement?.firstElementChild):h>=d?this._selectLog(a.parentElement?.lastElementChild):this._selectLog(c.children[h]),o()}}else{if(t.key==="ArrowLeft")return e==="content.list.item.viewer"&&a.focus(),o(this._collapseLog(a));if(t.key==="Enter"&&e==="content.list.group")return o(this._expandLog(a));if(t.key==="ArrowRight"){if(a.classList.contains("expanded")){if(this._selectLogLink(a))return o()}else this._expandLog(a);return o()}else if(t.key==="e"&&!rt(t)){const c=this._getLog(i.logs?.items,a);return c?.loc&&this._appService.navigate(c.loc,t),o()}else{if(t.key==="s"&&!rt(t))return this._getLog(i.logs?.items,a)?.loc&&this._appService.openInSideView(Zt.Logs,i.selection?.log?{logs:{selection:i.selection?.log}}:void 0),o();if(t.key===" "){const c=this._getLog(i.logs?.items,a);return c?.loc&&this._appService.navigate(c.loc,t,{focus:!1}),o()}else if(t.key==="Enter"){if(e==="content.list.item"||e==="content.list.item.viewer"||e==="."){a.querySelector("&>.header>.item-expander")?.dispatchEvent(new h5);const c=a.querySelector("&>.content");return c&&(c.setAttribute("contenteditable","true"),a.classList.add("editable"),s?.anchorNode?.parentNode&&c.contains(s.anchorNode.parentNode)?c.focus():s?.setPosition(c.lastChild),c.dispatchEvent(new hb)),o()}}else if(t.key==="c"&&!rt(t)||t.key==="c"&&fr(t)&&(!s||s?.isCollapsed))if(e==="content.list.group"){const c=this._getLogs(i.logs?.items,a.getAttribute("data-id")||void 0);if(c)return o(this._logsService.copyValue(c.map(d=>({value:d.value,loc:d.loc}))))}else{const c=this._getLog(i.logs?.items,a);if(c)return o(this._logsService.copyValue(c.value))}else{if(t.key==="C"&&!Kw(t)&&a)return o(a.dispatchEvent(new fb));if(t.key==="D"&&!Kw(t)&&a)return o(a.dispatchEvent(new gb));if(t.key==="d"&&!rt(t)){const c=this._getLogMetadata(a);if(c)return o(this._logsService.showAsDiagram(c))}else{if(t.key==="Escape")return o(this._appService.focus("editor"));if(t.key==="Tab"&&!rt(t)&&(e==="content.list.item"||e==="content.list.group"||e==="content.list.item.viewer")&&this._selectLogLink(a))return o()}}}}}}else if(e==="."||e==="content"){if(t.key==="Escape"&&!rt(t))if(this._appService.getFindState()()?.namespace===this._namespace){this._appService.closeFind();let c=this._locateRootElement(r);if(c)return o(c.focus())}else return o(this._appService.focus("editor"))}else if(e==="header.action"&&t.key==="Escape"&&!rt(t)){let c=this._locateRootElement(r);return o(c?c.focus():r.parentElement?.parentElement?.nextElementSibling?.querySelector(`[data-namespace="${this._namespace}.content"]`)?.focus())}}_narrow(e){return e=e.replace(`${this._namespace}.`,""),e=e.replace(this._namespace,"."),e}_locateRootElement(e){return e.closest(`[data-namespace="${this._namespace}"]`)}_locateLogElement(e,t){if(e=="."||e=="content")return t.querySelector(".selected")||t.querySelector(".item");if(e==="header.action"){const i=t.closest(`[data-namespace="${this._namespace}"]`);return i?i.querySelector(".selected"):t.parentElement?.parentElement?.nextElementSibling?.querySelector(`[data-namespace="${this._namespace}.content"]`)?.querySelector(".selected")}if(e==="content.list.item"||e==="content.list.group")return t;if(e==="content.list.item.link"||e==="content.list.group.link")return t.parentElement?.parentElement;if(e==="content.list.group.action")return t.parentElement?.parentElement?.parentElement?.parentElement?.parentElement;if(e==="content.list.item.viewer")return t.parentElement;if(e==="content.list.item.viewer.action")return t.parentElement?.parentElement?.parentElement;if(e==="content.stack"||e==="content.stack.viewer"||e==="content.stack.header.action"){const i=t.closest(`[data-namespace="${this._namespace}"]`);return i?.querySelector(".selected")||i?.querySelector(".item")}}_locateStackViewerElement(e,t){if(e==="content.stack"){const i=t.lastChild;if(i)return i}if(e==="content.stack.header.action"){const i=t.parentElement?.parentElement?.parentElement?.parentElement?.parentElement?.lastChild;if(i)return i}}_selectLogAction(e,t,i){const s=e.querySelectorAll("button");if(s.length){let r=-1;for(let o=0;o<s.length;o++)if(s[o]===t){r=o;break}return r=r>=0?r:0,i?(r+1>s.length-1||s[r+1].focus(),!0):r-1>=0?(s[r-1].focus(),!0):this._selectLogLink(e)}return!1}_selectLogLink(e){const t=e.querySelector("&>div.header>div.source-link");return t?(t.focus(),!0):!1}_getLog(e,t){if(e&&t){const i=t,s=i.getAttribute("data-id"),r=i.getAttribute("data-watch-id"),o=i.getAttribute("data-parent-id"),a=i.getAttribute("data-namespace");if(s&&o&&a&&a.endsWith("content.list.item"))return e[o].logs[r||s]}}_getHeaderLocation(e,t){if(e&&t){const i=t,s=i.getAttribute("data-id"),r=i.getAttribute("data-parent-id");if(s&&!r)return e[s]?.test?.location}}_getLogMetadata(e){if(e){const t=e.getAttribute("data-id"),i=e.getAttribute("data-watch-id"),s=e.getAttribute("data-parent-id"),r=e.getAttribute("data-namespace");if(t&&s&&r&&r.endsWith("content.list.item"))return{logSource:s,logOrExpressionId:i||t}}}_getLogs(e,t){if(e&&t)return Object.values(e[t].logs)}_selectLog(e){const t=e?.getAttribute("data-id"),i=e?.getAttribute("data-watch-id"),s=e?.getAttribute("data-parent-id"),r=e?.getAttribute("data-namespace"),o=i||t;t&&o&&r&&(r.endsWith("content.list.item")&&s?(this._logsService.selectLog({logOrExpressionId:o,logSource:s}),e?.focus()):(this._logsService.selectLog({logSource:t}),e?.focus()))}_expandLog(e){const t=e.querySelector(".item-expander");t?t.dispatchEvent(new h5):e.dispatchEvent(new h5)}_collapseLog(e){const t=e.querySelector(".item-expander");t?t.dispatchEvent(new lz):e.dispatchEvent(new lz)}_isSourceLink(e){if(!e)return;const t=s=>s?.classList.contains("source-link");let i=e.anchorNode?.parentElement;return t(i)?i:t(i?.parentElement)?i?.parentElement:void 0}}function g5(n){let e=n.lastElementChild;for(;e&&e.nodeType===Node.ELEMENT_NODE&&e.lastElementChild;)e=e.lastElementChild;return e}function cz(n){const e=n.getBoundingClientRect();for(let t=0;t<n.children.length;t++){const i=n.children[t],s=ote(e,i);if(s)return s}return null}function ote(n,e){const t=e.getBoundingClientRect();let i=!1;t.top>=n.top&&t.bottom<=n.bottom&&(i=!0);for(let s=0;s<e.children.length;s++){const r=e.children[s],o=ote(n,r);if(o)return o}return i?e:null}var qLe=G('<div class="flex items-center [&amp;_.metric]:text-[length:--panel-smaller-font-size] [&amp;_.visual]:ml-1 [&amp;_.visual]:w-4 [&amp;_.visual]:h-[0.5625rem] [&amp;_.visual]:rounded-[0.0625rem] [&amp;_.visual]:border [&amp;_.visual]:border-[--testing-icon-passed] [&amp;_.visual.low]:border-[--editor-warning-foreground] [&amp;_.visual.not-applicable]:border-[--editor-ruler-foreground] [&amp;_.background]:h-full [&amp;_.background]:bg-[--testing-icon-passed] [&amp;_.low_.background]:bg-[--editor-warning-foreground] [&amp;_.not-applicable_.background]:bg-[--editor-ruler-foreground]"><span class=metric></span><div class=visual><div class=background>');function lV(n){const e=J(()=>{if(!n.coverage)return;const t=`<b>${n.coverage.ranges.covered}</b> code range${n.coverage.ranges.covered===1?"":"s"}`,i=`<b>${n.coverage.ranges.all}</b> total range${n.coverage.ranges.all===1?"":"s"}`;return n.coverage?`${t} of ${i} covered in the ${n.file?"file":"folder"}`:void 0});return(()=>{var t=qLe(),i=t.firstChild,s=i.nextSibling,r=s.firstChild;return We(Te,t,()=>Te&&{content:e()}),A(i,()=>n.coverage!==void 0?`${n.coverage.value}%`:"n/a"),Me(o=>{var a=!!n.coverage?.low,l=!n.coverage,c=`${n.coverage?.value}%`;return a!==o.e&&s.classList.toggle("low",o.e=a),l!==o.t&&s.classList.toggle("not-applicable",o.t=l),c!==o.a&&((o.a=c)!=null?r.style.setProperty("width",c):r.style.removeProperty("width")),o},{e:void 0,t:void 0,a:void 0}),t})()}var eke=G("<div>");function h2(n){const[e,t]=he(),[i,s]=he(n.text),r=[];return jh(e,o=>{const a=o[0];if(a){if(!r.length){const c=document.createElement("canvas").getContext("2d");if(c){const d=window.getComputedStyle(e());c.font=`${d.fontWeight} ${d.fontSize} ${d.fontFamily}`,r.push({minWidth:c.measureText(n.text).width,displayText:n.text});const u=n.text.split("/");for(;u.length>1;){u.shift();const h=u.join("/"),f=c.measureText(".../"+h).width;r.push({minWidth:f,displayText:".../"+h})}r.push({minWidth:0,displayText:".../"+u[0]})}}const l=a.contentRect.width;s(r.find(c=>c.minWidth<=l).displayText)}}),(()=>{var o=eke();return We(t,o),We(Te,o,()=>Te&&n.tooltip!==!1&&{content:n.text}||void 0),A(o,i),Me(()=>mr(o,n.class)),o})()}function lw(){return parseFloat(getComputedStyle(document.body)?.getPropertyValue("--panel-font-size").split("px")[0])*2-4}const GC="data-resizable-panel-id",tke="data-panel-resize-handle",ate=100;let Ld=function(n){return n.panelGroup="resizeablePanelGroup",n.panelGroupVertical="resizeablePanelGroup_vertical",n.resizeHandle="resizeablePanelGroup-resizeHandle",n.resizeHandleDisabled="resizeablePanelGroup-resizeHandle_disabled",n.panel="resizeablePanelGroup-panel",n.documentResizingHorizontalPanel="resizingHorizontalPanel",n.documentResizingVerticalPanel="resizingVerticalPanel",n}({});const BC=n=>n.includes("row"),ike=n=>n.includes("reverse"),nke=(n,e)=>{let t=0;for(const i of n.children)i.getAttribute(GC)&&(t+=i.getBoundingClientRect()[e]);return t},ske=(n,e,t)=>{let i=0;const s=J(()=>BC(t())?"width":"height");return Fi(go([n,s,e],([r,o])=>{r&&(i=nke(r,o))})),()=>i},ay=(n,e,t)=>n/e/t,rke=({zoom:n,scale:e})=>{let t=0,i=0;const[s,r]=he(0),[o,a]=he(0);return{deltaX:s,deltaY:o,init:l=>{t=ay(l.clientX,n(),e()),i=ay(l.clientY,n(),e()),lh(()=>{r(0),a(0)})},updateMouseDelta:l=>{lh(()=>{r(ay(l.clientX,n(),e())-t),a(ay(l.clientY,n(),e())-i)})}}},oke=({zoom:n,scale:e,direction:t,updateLayout:i,state:s,containerRef:r})=>{const o=rke({zoom:n,scale:e}),[a,l]=he(void 0),c=d=>u=>{o.init(u),l(d)};return Fi(go(a,d=>{if(!d)return;const u=ske(r,()=>s().layout.length,t),h=s().layout.map(w=>w.size),f=w=>o.updateMouseDelta(w),g=()=>l(void 0);document.addEventListener("mousemove",f),document.addEventListener("mouseup",g,{once:!0}),document.body.classList.add(BC(t())?Ld.documentResizingHorizontalPanel:Ld.documentResizingVerticalPanel);const m=BC(t()),p=ike(t())?-1:1;Fi(go(()=>(m?o.deltaX():o.deltaY())*p,w=>{const v=w*ate/u();v!==0&&i(v,d,h)})),Ot(()=>{document.body.classList.remove(Ld.documentResizingHorizontalPanel,Ld.documentResizingVerticalPanel),document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",g)})})),c},ake=n=>e=>Math.round(e*10**n)/10**n,B9=ake(4),m5=(n,e,t)=>Math.max(e,Math.min(n,t)),lte=1e-6,dz=n=>Math.abs(n)<lte,lke=(n,e,t,i)=>{let s=e.slice(),r=Math.sign(i)===1?"right":"left";const o=Math.abs(i),a=(r==="left"?-1:1)*Math.sign(i),l=n.length;let c=r==="left"?t+1:t,d;c>=l&&(c=t-1);const u=e[c]+a*o,h=m5(u,n[c].minSize,n[c].maxSize);if(n[c].collapsible&&e[c]===0&&u<n[c].minSize)return e;s[c]=h,d=Math.min(n[c].maxSize-e[c],o),r==="right"&&t===l-1&&(r="left");let f=0;const g=()=>r==="left"?t:t+1,m=w=>r==="left"?w>=0:w<l,p=w=>r==="left"?w-1:w+1;let b=g();for(;m(b);){if(e[b]===0){b=p(b);continue}const w=e[b]-a*d,v=m5(w,n[b].minSize,n[b].maxSize),_=e[b]-v;if(d-=_,f+=_,s[b]=v,b=p(b),dz(d))return s}for(b=g();m(b);){if(e[b]===0){b=p(b);continue}if(n[b].collapsible&&d>=n[b].minSize&&(d-=n[b].minSize,f+=n[b].minSize,s[b]=0),b=p(b),dz(d))break}return d>lte&&(s[c]=m5(e[c]+a*f,n[c].minSize,n[c].maxSize)),s},cke=(n,e,t)=>{const[i,s]=O1({layout:n},{name:"PanelStore"}),r=(c,d=100)=>{const u=c.reduce((h,f)=>h+f,0);return c.map(h=>B9(h/u*d))},o=c=>{const d=Za(c),u=Za(i.layout),h=u.map(g=>g.size),f=u.reduce((g,m)=>(g.set(m.id,m.size),g),new Map);if(h.length+1===d.length){const g=d.findIndex(b=>!f.has(b.id)),m=d[g];m.size===100&&(m.size=50);const p=r(h,100-m.size);d.splice(g,1);for(let b=0;b<p.length;b++)d[b].size=p[b];d.splice(g,0,m)}else if(h.length-1===d.length){const g=u.findIndex(p=>!d.find(b=>b.id===p.id));h.splice(g,1);const m=r(h);for(let p=0;p<m.length;p++)d[p].size=m[p]}else{const g=d.map(p=>p.size||f.get(p.id)||p.minSize||10),m=r(g);for(let p=0;p<m.length;p++)d[p].size=m[p]}s("layout",At(d))},a=J(()=>e()??lke);return{state:i,setConfig:o,updateLayout:(c,d,u)=>{const h=i.layout.findIndex(g=>g.id===d);if(h===-1)return;const f=Qn(a)(i.layout,u,h,c).map(B9);s(Gt(g=>{for(let m=0;m<f.length;m++)f[m]!==void 0&&(g.layout[m].size=f[m])})),t?.(f)}}},cV=Fk(),dV=n=>`SolidPanels: ${n}`,dke=n=>{let e=0,t=0;n.forEach(s=>{s.size?t+=s.size:e++});const i=B9((ate-t)/e);return n.map(s=>{const r={id:s.id,size:s.size??i,minSize:s.minSize,maxSize:s.maxSize,collapsible:s.collapsible,index:s.index??0},o=r.size<r.minSize,a=r.size>r.maxSize;return(o||a)&&console.warn(dV(`Error. Item with id="${s.id}" has wrong size limitations: its size (${r.size}%) is ${o?"less":"more"} than ${o?"minimum":"maximum"} size (${o?r.minSize:r.maxSize}%). `)),r})},jr=n=>{const e=pg({tag:"div",zoom:1,scale:1,direction:"row"},n),[t,i]=he(),[s,r]=O1([]),o=J(()=>dke(s)),{state:a,setConfig:l,updateLayout:c}=cke(o(),()=>e.resizeAlgorithm,e.onLayoutChange);wS(()=>{l(o())});const d=b=>r(Gt(w=>{w.push(b),b.index!==void 0&&w.sort((v,_)=>v.index-_.index)})),u=b=>{r(Gt(w=>{const v=w.findIndex(_=>_.id===b);v!==-1&&w.splice(v,1)}))},h=b=>J(()=>a.layout.find(w=>w.id===b)),f=oke({zoom:()=>e.zoom,scale:()=>e.scale,direction:()=>e.direction,state:()=>a,containerRef:t,updateLayout:c}),[g,m]=he(!1);Bn(()=>m(!0));const p=()=>g()?"":"hidden";return x(cV.Provider,{value:{registerPanel:d,unregisterPanel:u,useData:h,createMouseDownHandler:f,direction:()=>e.direction},get children(){return x(zF,{ref:i,get component(){return e.tag},get style(){return{"flex-direction":e.direction,visibility:p()}},get classList(){return{[Ld.panelGroup]:!0,[Ld.panelGroupVertical]:!BC(e.direction),[e.class??""]:!0}},get children(){return e.children}})}})},Lv=n=>{const e=pg({tag:"div",minSize:0,maxSize:100,collapsible:!1},n),t=Vk(cV);if(!t)return console.warn(dV("Error: Panel component must be rendered inside PanelGroup component")),null;const{registerPanel:i,unregisterPanel:s,useData:r}=t,o=r(e.id),a=()=>o()?.size;return Bn(()=>{const l=e.id;i({id:l,size:e.initialSize,minSize:e.minSize,maxSize:e.maxSize,collapsible:e.collapsible,index:e.index}),Ot(()=>s(l))}),Fi(()=>{e.collapsible&&Fi(go(a,(l,c)=>{if(!(l===void 0||c===void 0))return l===0&&c!==0&&e.onCollapse?.(),l!==0&&c===0&&e.onExpand?.(),l},{defer:!0}),Qn(a))}),Fi(()=>{const l=e.onResize;l&&Fi(go(a,c=>{c!==void 0&&l(c)}))}),x(zF,pg(()=>({[GC]:e.id}),{ref:e.ref,get component(){return e.tag},get classList(){return{[Ld.panel]:!0,[e.class??""]:!0}},get style(){return{"flex-grow":a(),"flex-shrink":1,"flex-basis":"0px",overflow:"hidden"}},get children(){return e.children}}))},X9=n=>{const e=pg({tag:"button",disabled:!1},n),t=Vk(cV);if(!t)return console.warn(dV("Error: Panel component must be rendered inside PanelGroup component")),null;const i=s=>{if(e.disabled)return;const r=s.currentTarget;let o=null;if(r instanceof HTMLElement){let l=r.previousElementSibling;for(;l;){const c=l.getAttribute(GC);if(c){o=c;break}l=l.previousElementSibling}}const a=r instanceof HTMLElement?r.nextElementSibling?.getAttribute(GC):null;o&&a&&t.createMouseDownHandler(o)(s)};return x(zF,pg({[tke]:!0,tabIndex:-1},{get component(){return e.tag},get disabled(){return e.disabled},get classList(){return{[Ld.resizeHandle]:!0,[Ld.resizeHandleDisabled]:e.disabled,[e.class??""]:!0}},onMouseDown:i,get children(){return e.children}}))};var uke=G('<div class="resizeablePanelGroup-panel flex h-7 cursor-pointer items-center justify-center truncate py-1 pl-2"><div class="header-font-size header-tracking flex-grow select-none truncate py-0.5 pr-1 font-bold uppercase"><span class=pb-0.5></span></div><div class="ml-auto flex pr-1 leading-none [&amp;_li]:flex [&amp;_li_button]:mx-[0.0625rem] [&amp;_li_button]:!text-[length:--icon-font-size]"><ul class="flex flex-row items-center justify-center"><li>');function uz(n){const e=n?.parentElement?.children;return e?e[0]===n||e[0]?.attributes.getNamedItem("data-panel-resize-handle")&&e[1]===n:!1}function ji(n){const e=jk(),t=e.getPanelState(n.id,n.defaultState);let[i,s]=he(),[r,o]=he(),[a,l]=he(!1);Me(()=>{i()?.parentElement&&o(i()?.parentElement),!uz(i())&&!n.notResizeable?l(!0):l(!1)}),X$(r,()=>{!uz(i())&&!n.notResizeable?l(!0):l(!1)},{childList:!0});const c=()=>{e.setPanelState(n.id,()=>({...t(),collapsed:!1}))};return x(se,{get when(){return J(()=>!t().collapsed)()&&t().size},get fallback(){return x(se,{get when(){return t().collapsed&&n.header},get children(){var d=uke(),u=d.firstChild,h=u.firstChild,f=u.nextSibling,g=f.firstChild,m=g.firstChild;return u.$$click=c,We(Te,h,()=>Te&&{content:n.header.tooltip}),A(h,()=>n.header.title),A(m,x(Ee,{class:"codicon-chevron-up",get tooltip(){return`Expand "${n.header.title}" panel`},tabIndex:0,get namespace(){return n.header.namespace},onClick:c})),d}})},get children(){return[x(se,{get when(){return a()},get children(){return x(X9,{})}}),x(Lv,{ref(d){var u=s;typeof u=="function"?u(d):s=d},get index(){return n.index},minSize:5,get id(){return n.id},get class(){return n.class},get initialSize(){return t().size},onResize:d=>{n.onResize&&n.onResize(i()?.offsetWidth),e.setPanelState(n.id,u=>({...u,size:d}))},get children(){return n.children}})]}})}dn(["click"]);var hke=G('<div class="relative h-full w-full outline-none"tabindex=-1><div></div><div tabindex=-1>');function m0(n){const[e,t]=he(),i=t0(e);$e(n.scrollable,o=>{o&&t(o)}),$e(i.y,o=>{n.onVerticalScroll?.(o)});const[s,r]=he(!1);return(()=>{var o=hke(),a=o.firstChild,l=a.nextSibling;return o.$$focusout=()=>r(!1),o.$$focusin=()=>{n.namespace&&n?.onFocus?.(n.namespace),r(!0)},A(o,x(ln,{get each(){return n.overlays||[]},children:c=>c}),l),We(c=>!n.scrollable&&t(c),l),A(l,()=>n.children),Me(c=>{var d=n.namespace,u=!!i.y(),h=`absolute left-0 right-0 top-[-1.75rem] z-[1] flex h-[1.75rem] cursor-default flex-row items-center justify-center shadow-[--widget-shadow] ${n.headerClass||""}`,f=n.namespace?`${n.namespace}.content`:void 0,g=`scrollable absolute inset-0 overflow-y-auto outline-none ${n.contentClass||""}`;return d!==c.e&&xt(o,"data-namespace",c.e=d),u!==c.t&&a.classList.toggle("shadow-header",c.t=u),h!==c.a&&mr(a,c.a=h),f!==c.o&&xt(l,"data-namespace",c.o=f),g!==c.i&&mr(l,c.i=g),c},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),o})()}dn(["focusin","focusout"]);function p5(n){return n[0]+"_"+n.slice(1).join(fke)}const fke="",hz="$$typeof: Symbol(jest.asymmetricMatcher)";function uV(n){const e=n.expected,t=n.actual;return n.formattedMessage?.body.format==="diff"&&n.formattedMessage.body.content&&(e?.indexOf(hz)!==-1||t?.indexOf(hz)!==-1)?gke(n.formattedMessage.body.content):{expected:e,actual:t}}function gke(n){const e=n.split(`
`);let t,i,s=!1,r=!1;for(const o of e){if(!s&&o.startsWith("+ Received")){s=!0;continue}if(!s||!r&&o.trim()==="")continue;r=!0;const a=o.substring(2);o.startsWith("- ")?t=t?t+`
`+a:a:(o.startsWith("+ ")||(t=t?t+`
`+a:a),i=i?i+`
`+a:a)}return{expected:t,actual:i}}function mke(n,e,t){switch(n){case"investigation":return{mode:"agent",query:`1. Analyze the failing test with Wallaby (use test id: "${p5(t)}" for tool calls) and identify the cause of the failure.
2. Use Wallaby's covered files to find relevant implementation files or narrow your search.
3. Use Wallaby's runtime values tool and coverage tool to support your reasoning.
4. Suggest and explain a code fix that will resolve the failure.
5. Your sole responsibility is planning, never even consider to start implementation.
When responding:
- Explain your reasoning step by step.
- Stop immediately if you consider starting implementation or switching to implementation mode.`};case"directFix":return{mode:"agent",query:`1. Analyze the failing test with Wallaby (use test id: "${p5(t)}" for tool calls) and identify the cause of the failure.
2. Use Wallaby's covered files to find relevant implementation files or narrow your search.
3. Use Wallaby's runtime values and coverage data to support your reasoning if needed.
4. Fix the issue and use Wallaby's to confirm that the test now passes, otherwise continue iterating until it passes.`};case"analyticalFix":return{mode:"agent",query:`1. Analyze the failing test with Wallaby (use test id: "${p5(t)}" for tool calls) and identify the cause of the failure.
2. Use Wallaby's covered files to find relevant implementation files or narrow your search.
3. Use Wallaby's runtime values tool and coverage tool to support your reasoning.
4. Suggest and explain a code fix that will resolve the failure.
5. After the fix, use Wallaby's reported test state to confirm that the test now passes.
6. If the test still fails, continue iterating with updated Wallaby data until it passes.
${e.snapshot?"7. If a snapshot update is needed, use Wallaby's snapshot tools for it.":""}
When responding:
- Explain your reasoning step by step.
- Use runtime and coverage data directly to justify your conclusions.`}}}const $n="runError";function vb(n,e,t){return n.id||`${e.path.join("-")}-${t}`}function Sg(n,e){const t=Jk(e?.includeMappedOnly?n.stack.filter(s=>!s.notMappedFile):n.stack);n.noMappedStack=!t,n.id&&(e?.active||e?.marked?n.selection={active:e?.active||!1,marked:e?.marked||!1}:n.selection=void 0),R_(n),!(e?.allowSkippingCompactDiff&&n.formattedMessage?.body.format==="diff")&&n.size<bn.errorSizeBytesToSkipCompactDiff&&(n.expected?.length||0)+(n.actual?.length||0)<bn.errorExpectedActualSizeBytesToSkipCompactDiff&&(cte(n),R_(n))}function R_(n){const e=n.formattedMessage?.header.content||n.message||"",t=n.formattedMessage?.body.content||"",i=n.compactDiffHtml||"";n.size=e.length+t.length+i.length}function cte(n){if(n.expected||n.actual){const{expected:e,actual:t}=uV(n);n.compactDiffHtml=Kge(e,t)}}function Cg(n){if(n>99e3){const e=Math.floor(n/6e4),t=Math.round(n%6e4/1e3);return`${e}m${t.toString().padStart(2,"0")}s`}else return n>1e4?`${Math.round(n/1e3)}s`:`${(Math.round(n/100)/10).toFixed(1)}s`}class pke{_baseQuantumMs=50;_timer;_scopes=new Map;_activeTasks=new Set;_idSeq=0;createScope(){const e=++this._idSeq,t={id:e,tasks:new Map,disposed:!1};return this._scopes.set(e,t),{addTask:(r,o)=>{if(t.disposed)return{request:()=>{},cancel:()=>{}};const a=++this._idSeq,l={id:a,cb:r,intervalMs:Math.max(1,Math.floor((o?.intervalMs??this._baseQuantumMs)/this._baseQuantumMs))*this._baseQuantumMs,active:!1,nextRunAt:0};return t.tasks.set(a,l),{request:()=>{if(t.disposed)return;const u=Date.now();l.active=!0,l.nextRunAt=u,this._activeTasks.add(l),this._ensureTimer()},cancel:()=>{t.disposed||(l.active&&(l.active=!1,l.nextRunAt=0,this._activeTasks.delete(l)),this._hasActiveTasks()||this._clearTimer())}}},dispose:()=>{if(!t.disposed){t.disposed=!0;for(const r of t.tasks.values())r.active&&this._activeTasks.delete(r);t.tasks.clear(),this._scopes.delete(e),this._hasActiveTasks()||this._clearTimer()}}}}_hasActiveTasks(){return this._activeTasks.size>0}_clearTimer(){this._timer&&(clearTimeout(this._timer),this._timer=void 0)}_ensureTimer(){this._timer||(this._timer=setTimeout(()=>this._tick(),this._baseQuantumMs))}_tick(){this._timer=void 0;const e=Date.now(),t=Array.from(this._activeTasks);for(const i of t){if(!i.active||i.nextRunAt>e)continue;i.cb(e)?i.nextRunAt=e+i.intervalMs:(i.active=!1,i.nextRunAt=0,this._activeTasks.delete(i))}this._hasActiveTasks()?this._timer=setTimeout(()=>this._tick(),this._baseQuantumMs):this._clearTimer()}}const dte=new pke;class ute{constructor(e,t,i){this.readAll=e,this.upsert=t,this.replaceAll=i}_use=dte.createScope();_taskHandle=this._use.addTask(()=>this._tickWrapper(),{intervalMs:50});_bufferMs=250;dispose(){this._clearTimer(),this._use.dispose()}_clearTimer(){this._taskHandle.cancel()}applyProgress(e,t={replaceAll:!0}){const i=Date.now();let s=!1;this._clearTimer();const r={};for(const o of e){const a=o.estimatedCompletionTime||0,l=Math.max(0,a-i);s=s||l>0,r[o.fileId]={...o,remainingTimeLabel:l>0?Cg(l):"",duration:l,isDeterminate:l>0,isIdle:o.status==="idle",hasTestFileProgressTime:o.status==="running"&&a>0}}if(t?.replaceAll&&this.replaceAll)this.replaceAll(r);else for(const[o,a]of Object.entries(r))this.upsert(o,a);s&&this._scheduleTick()}_scheduleTick(){this._taskHandle.request()}_tickWrapper(){const e=Date.now();let t=!1;const i=this.readAll()||{};for(const[s,r]of Object.entries(i)){const o=r.estimatedCompletionTime||0,a=Math.max(0,o-e),l=Math.max(0,o-e+this._bufferMs),c=l>0,d=c?Cg(a):"";l>0&&(t=!0),(r.remainingTimeLabel!==d||r.isDeterminate!==c)&&this.upsert(s,u=>({...u,remainingTimeLabel:d,isDeterminate:c,hasTestFileProgressTime:u.status==="running"&&(u.estimatedCompletionTime||0)>0&&a>0}))}return t}}class jn{constructor(e,t,i,s,r,o){this._state=e,this._setState=t,this._setLogsAndErrorState=i,this._appService=s,this._appToCore=r,this._threshold=o,this._disposable.add(()=>{this._progress?.dispose()})}_logsService;_lastTestTreeNodeId=BigInt(0);_trackedTestTreeNode=void 0;_manualSelectionMade=!1;_progress;_disposable=new Fo;static buildNodeTestPath(e){const t=[e.parent?e.name:e.key];let i=e.parent;for(i&&t.push(i.parent?i.name:i.key);i;)i=i.parent,i&&t.push(i.parent?i.name:i.key);return t.reverse()}static buildFileLocation(e){const t=[e];let i=e.parent;for(i&&t.unshift(i);i;)i=i.parent,i&&t.unshift(i);const s=t[0]?.type==="file"?t[0].name:void 0,r=t[t.length-1]?.location;if(s)return{file:s,...r}}get logs(){if(!(!this._state.tests.foreground||this._appService.isIntegratedOverview()))return this._logsService?this._logsService:this._logsService=new fs(this._state.tests.foreground.details,this._setState.bind(this,"tests","foreground","details"))}trackTree(){this._appToCore.trackTestTree()}untrackTree(){const e=this._state.tests.foreground;this._untrackNode(),this._appToCore.untrackTestTree(),(e?.search?.raw||e?.tree.selection&&this._manualSelectionMade)&&this._setState("tests","background",{search:e?.search?.raw,selection:e?.tree.selection?.path}),this._setState("tests","foreground",void 0),this._logsService=void 0,this._lastTestTreeNodeId=BigInt(0)}trackSelection(){const e=this._state.tests.foreground;if(e){const t=e.tree.selection;if(t&&t.id){const i=e.tree.nodes[t.id];if(i){this._trackNode(i.id,jn.buildNodeTestPath(i),i.type==="test");return}}this._untrackNode()}}_trackNode(e,t,i){const{logs:s,errors:r,coverage:o}=this._detailsToRequest;!o&&!s&&!r?this._trackedTestTreeNode?.id===e&&this._untrackNode():(!this._trackedTestTreeNode||this._trackedTestTreeNode.id!==e||this._trackedTestTreeNode.coverage!==o||this._trackedTestTreeNode.logs!==s||this._trackedTestTreeNode.errors!==r)&&(this._trackedTestTreeNode={id:e,coverage:o,logs:s,errors:r},this._appToCore.trackTestTreeDetails(t,i,this._trackedTestTreeNode))}_untrackNode(){this._state.tests.foreground&&this._clearDetailsState(),this._appToCore.untrackTestTreeDetails(),this._trackedTestTreeNode=void 0}_clearDetailsState(){this._setLogsAndErrorState("logs",void 0),this._setLogsAndErrorState("filesWithExpressionsToEvaluate",void 0),this._setLogsAndErrorState("errors",void 0),this._setLogsAndErrorState("runError",void 0)}toggleNode(e,t){const i=this._state.tests.foreground;if(i){const s=i.tree.nodes[e],r=!!i.search;if(s){const o=s.expanded;let a=s.parent,l=a||s;for(;a;)a=a.parent,a&&(l=a);this._setState("tests","foreground","tree","nodes",s.id,Gt(c=>{c&&(c.expanded=t===void 0?!o:t,c.expanded&&c.id===l.id?c.depth=this._countExpandedTreeNodes(c.children,r)+1:c.depth=1)})),l.expanded&&l.id!==s.id&&this._setState("tests","foreground","tree","nodes",l.id,Gt(c=>{c&&(c.depth=this._countExpandedTreeNodes(c.children,r)+1)}))}}}selectNode(e){const t=this._state.tests.foreground;if(t){this._manualSelectionMade=!0,this._setState("tests","foreground","tree","revelation",void 0);const i=t.tree.selection;if(i&&i.id){if(i.id===e)return;const r=t.tree.nodes[i.id];r&&this._setState("tests","foreground","tree","nodes",r.id,"selected",!1)}const s=t.tree.nodes[e];s?(this._setState("tests","foreground","tree","selection",this._buildSelection(s.id,t.tree.nodes)),this._setState("tests","foreground","tree","nodes",s.id,"selected",!0),this._trackNode(s.id,jn.buildNodeTestPath(s),s.type==="test")):this._untrackNode()}}revealNode(e){const t=this._state.tests.foreground;if(t){const i=t.tree.revelation?.index,s=t.tree.revelation?.id;i!==void 0&&(e(i),s&&(this._setState("tests","foreground","tree","nodes",s,"revealed",!0),this._setState("tests","foreground","tree","nodes",s,"revealed",!1)))}}locateNode(e){const t=this._state.tests.foreground;if(t){const i=t.search?.parsed?t.tree.files.matched.items:t.tree.files.all.items;if((e==="first"||e==="last")&&i.length===0)return!1;const s=e==="first"?i[0]:e==="last"?i[i.length-1]:t.tree.nodes[e],r=e!=="first"&&e!=="last";if(s){e=s.id;const o=!!t.search;this.selectNode(e);const a=[];a.push(s.id);let l=s.parent;l&&a.push(l.id);let c=l||s;for(;l;)l=l.parent,l&&(a.push(l.id),c=l);if(r)for(const d of a)this._setState("tests","foreground","tree","nodes",d,Gt(u=>{u&&(u.expanded=!0,u.id===c.id&&(u.depth=this._countExpandedTreeNodes(u.children,o)+1))}));return this._setState("tests","foreground","tree","revelation",{index:t.tree.files.all.indices[c.id],id:s.id}),!0}}return!1}toggleNodeFilter(e){const t=this._state.tests.foreground;if(t){const i=t.tree.nodes[e];i&&this._appService.toggleTestFilter(jn.buildNodeTestPath(i),{suite:i.type==="suite",source:"side-view"})}}loadTestDetails(e){this._setState("context",void 0),this._appToCore.getTestDetails(e).then(t=>{if(!t){this._setState("context",void 0);return}const i=t.flatMap(r=>r.globalErrors||[]).concat(t.flatMap(r=>r.errors.map(o=>({test:r,error:o}))).map(({test:r,error:o},a)=>({...o,id:vb(o,r,a),test:r}))),s={};i.forEach(r=>{r.maybeObsolete||Sg(r,{allowSkippingCompactDiff:this._appService.appSettings()[0].errors.diff?.compact==="auto"}),s[r.id]=r}),this._setState("context",{errors:i})})}navigateNode(e,t,i){const s=this._state.tests.foreground;if(s){const r=s.tree.nodes[e];if(r){let o=r.name,a=r.parent;for(a&&(o=a.name);a;)a=a.parent,a&&(o=a.name);const l={file:o,line:r.location?.line,column:r.location?.column};if(r.type==="suite"){const c=u=>{if(u)for(const h of u){if(h.type==="test")return h;const f=c(h.children);if(f)return f}},d=c(r.children);d&&(l.line=d.location?.line,l.column=d.location?.column)}l.line=l.line||1,l.column=l.column||0,this._appService.navigate(l,t,i||{focus:!1})}}}updateSearch(e){const t=this._state.tests.foreground;t&&(t.search?this._setState("tests","foreground","search","raw",e?.trim()):this._setState("tests","foreground","search",{raw:e?.trim()}))}convertSearch(e){this._convertSearch(e)&&this.search()}checkSearch(e){const t=this._state.tests.foreground?.search?.raw;if(t&&e.slow){const i=t.match(/@time\s*>\s*(\d+)/g);if(i&&i.length>0)return parseInt(i[i.length-1].replace(/@time\s*>\s*/,""))>=(this._threshold()||0)}return!1}search(e,t){const i=this._state.tests.foreground;if(i){let s=this._parseSearch(e===void 0?i.search?.raw:e);this._compareSearch(i.search?.parsed,s)||(s?this._setState("tests","foreground",Gt(r=>{let o;const a={},l=[],c={};let d=0,u=0;const h=!!(s.time||s.failed||s.skipped||s.todo||s.passed);for(const f of r.tree.files.all.items){const g=this._searchTreeNode(f,s,!1,h,d>50,"");g.matched&&(f.depth=g.depth,f.expanded&&(d+=g.depth),l.push(f),a[f.name]=f.id,c[f.id]=u,u++,!o&&g.selection&&(o={id:g.selection,fileId:f.id}))}r.tree.files.matched={items:l,indices:c,ids:a},r.search={raw:e||i.search?.raw,parsed:s},this._manualSelectionMade=!!o,this._selectTreeNode(o,r.tree,!0,!0),l.length===0&&t?.()})):this._setState("tests","foreground",Gt(r=>{for(const o of Object.values(r.tree.nodes))o&&(o.match=void 0,o.expanded=!1,o.parent||(o.depth=1));r.search=void 0,r.tree.files.matched={items:[],indices:{},ids:{}},this._selectTreeNode(void 0,r.tree,!1,!0)})))}}updateTree(e){if(e.incremental){if(this._state.tests.foreground){const t=this._state.tests.foreground.search;this._setState("tests","foreground","tree",Gt(i=>{const s={sort:!1,index:!1},r={sort:!1,index:!1};let o;for(const a of e.files){a.key&&!this._state.testFileProgressByFile[a.key]&&this._setState("testFileProgressByFile",a.key.toString(),{fileId:a.key.toString(),status:"idle",remainingTimeLabel:"",duration:0,isDeterminate:!1,isIdle:!0,hasTestFileProgressTime:!1});const l=i.nodes[i.files.all.ids[a.name]],c=this._buildTreeRoot(a,l,i.nodes,!this._manualSelectionMade,t?.parsed,l?.name||"");c?.selection&&(o=o||{id:c.selection,fileId:c.node.id}),c?(l||(s.sort=!0),i.nodes[c.node.id]=c.node,i.files.all.ids[c.node.name]=c.node.id):l&&(delete i.nodes[l.id],delete i.files.all.ids[l.name],s.index=!0),t&&(c&&c.matched?(i.files.matched.ids[c.node.name]||(r.sort=!0),i.files.matched.ids[c.node.name]=c.node.id):(o=void 0,l&&i.files.matched.ids[l.name]&&(delete i.files.matched.ids[l.name],r.index=!0)))}if(s.sort){const a={},l={},c=[];Object.keys(i.files.all.ids).sort((d,u)=>this._compareFilePaths(d,u)).forEach((d,u)=>{const h=i.files.all.ids[d];a[d]=h,l[h]=u,c.push(i.nodes[h])}),i.files.all={indices:l,items:c,ids:a}}else if(s.index){const a={},l=[];Object.values(i.files.all.ids).forEach((c,d)=>{a[c]=d,l.push(i.nodes[c])}),i.files.all={indices:a,items:l,ids:i.files.all.ids}}else i.files.all.items=Object.values(i.files.all.ids).map(a=>i.nodes[a]);if(t){if(r.sort){const a={},l={},c=[];Object.keys(i.files.matched.ids).sort((d,u)=>this._compareFilePaths(d,u)).forEach((d,u)=>{const h=i.files.matched.ids[d];a[d]=h,l[h]=u,c.push(i.nodes[h])}),i.files.matched={indices:l,items:c,ids:a}}else if(s.index){const a={},l=[];Object.values(i.files.matched.ids).forEach((c,d)=>{a[c]=d,l.push(i.nodes[c])}),i.files.matched={indices:a,items:l,ids:i.files.matched.ids}}else i.files.matched.items=Object.values(i.files.matched.ids).map(a=>i.nodes[a]);this._selectTreeNode(o,i,!0,!1)}else this._selectTreeNode(o,i,!1,!1)}))}}else{const t={all:{indices:{},items:[],ids:{}},matched:{indices:{},items:[],ids:{}}},i={};let s;if(e.files.sort((r,o)=>this._compareFilePaths(r.name,o.name)).forEach((r,o)=>{r.key&&!this._state.testFileProgressByFile[r.key]&&this._setState("testFileProgressByFile",r.key.toString(),{fileId:r.key.toString(),status:"idle",remainingTimeLabel:"",duration:0,isDeterminate:!1,isIdle:!0,hasTestFileProgressTime:!1});const a=this._buildTreeRoot(r,void 0,i,!this._manualSelectionMade,void 0,void 0);a&&(i[a.node.id]=a.node,t.all.ids[r.name]=a.node.id,t.all.indices[a.node.id]=o,t.all.items.push(a.node),s=s||this._buildSelection(a?.selection,i))}),!s){const r=t.all.items[0];r&&(s=this._buildSelection(r.id,i),r.selected=!0,this._trackNode(r.id,jn.buildNodeTestPath(r),r.type==="test"),this._manualSelectionMade=!1)}this._setState("tests","foreground",{tree:{files:t,nodes:i,selection:s},details:{coverage:{},selection:{implicit:{}}}})}}updateFilter(e){function t(i,s,r){let o;if(i&&s)for(const a of i){const l=s[a.name];l&&(l.filtered&&(a.type==="test"&&l.leaf===!0?(r.add(a.id),o=a.id):a.type==="suite"&&Object.keys(l.tests).length&&r.add(a.id)),a.children&&(o=t(a.children,l.tests,r)||o))}return o}if(this._state.tests.foreground){const i=this._state.tests.foreground,s=i.search,r=new Set;let o;for(const a in e.files){const l=i.tree.files.all.ids[a],c=i.tree.nodes[l];if(c){const d=e.files[a];d?.filtered&&r.add(c.id),o=t(c.children,d?.tests,r)||o}}this._setState("tests","foreground","tree","nodes",Gt(a=>{if(a)for(const l of Object.values(a))l&&(!s||l.match)&&(l.filtered=r.has(l.id))})),e.external&&o&&i.tree.nodes[o]?.filtered&&this.locateNode(o)}}updateTestFileProgress(e){this._progress||(this._progress=new ute(()=>this._state.testFileProgressByFile,(t,i)=>this._setState("testFileProgressByFile",t,i),t=>this._setState(Gt(i=>{const s=i.testFileProgressByFile;for(const r in t){const o=s[r],a=t[r];o&&o.status===a.status&&o.estimatedCompletionTime===a.estimatedCompletionTime||(s[r]=o?{...o,...a}:{...a})}})))),this._progress.applyProgress(e)}updateDetails(e){const t=this._state.tests.foreground;if(t){const{logs:i,errors:s,coverage:r}=this._detailsToRequest;e.logsAndErrors&&(i||s)?(this._appService.closeFind(),this._setLogsAndErrorState(Gt(o=>{const a=e.logsAndErrors,c=!!a.runError,d=a.runError?[{id:$n,message:a.runError.message,stack:[],header:a.runError.header}]:[],u=[];a.globalErrors&&d.push(...a.globalErrors);const h=a.idsOfTestFilesWithGlobalErrors&&a.idsOfTestFilesWithGlobalErrors.length>0&&new Set(a.idsOfTestFilesWithGlobalErrors);Object.values(a.tests).forEach(p=>{if(p.errors){const b=p.errors.map((w,v)=>({...w,id:vb(w,p,v),test:p}));d.push(...b)}p.logs&&u.push(...p.logs.map(b=>({...b,test:p}))),h&&h.delete(p.path[0].toString())});let f,g;if(h){if(o.errors?.all){f=[];for(const p of o.errors.all){const b=p.test?.path?.[0];b&&h.has(b.toString())&&(f=f||[],f.push({...p,maybeObsolete:!0}))}}if(o.logs?.items){g=[];for(const b of Object.values(o.logs.items)){const w=b.test?.path?.[0];w&&h.has(w.toString())&&(b.test&&(b.test.missing=!0),g.push(...Object.values(b.logs).map(v=>({...v,maybeObsolete:!0}))))}const p=o.logs.items.global?.logs;if(p){const b={...p};a.globalLogs.forEach(w=>{delete b[w.id]}),g.push(...Object.values(b).map(w=>({...w,maybeObsolete:!0})))}}}f&&d.push(...f),g&&u.push(...g);const m={};if(d.forEach(p=>{p.maybeObsolete||Sg(p,{marked:p.id&&!!t.details.selection.implicit.errors?.has(p.id)||void 0,active:t.details.selection.implicit.error===p.id,allowSkippingCompactDiff:this._appService.appSettings()[0].errors.diff?.compact==="auto"}),m[p.id]=p}),u.length>0){const p=fs.updateLogs(this._state.tests.foreground.details,u,o.selection.log,o.logs?.showStackTraceFor);o.selection.log=p.selected,this._setLogsAndErrorState("logs",At({items:p.items,maybeObsolete:c,stackTraceToShow:p.stackTraceToShow}))}else o.logs=void 0;d.length>0?this._setLogsAndErrorState("errors",At({singleTestSelected:!1,all:d,maybeObsolete:c,allById:m})):o.errors=void 0,delete o.selection.implicit.error,delete o.selection.implicit.log}))):this._clearDetailsState(),r&&e.coverage?this._setState("tests","foreground","details","coverage","items",At(e.coverage?.sort((o,a)=>this._compareFilePaths(o.path,a.path)),{key:"path"})):this._setState("tests","foreground","details","coverage","items",void 0)}}restoreSelection(e){const t=this._state.tests.foreground;if(t){const i=this._findClosestNode(e,t.search?t.tree.files.matched:t.tree.files.all);if(i)return this.locateNode(i.id)}return!1}showSearch(){this._setState("tests","searchControlVisible",!0)}hideSearch(){this._setState("tests","searchControlVisible",!1)}_buildTreeRoot(e,t,i,s,r,o){if(e.tests){let a,l;if(e.changed&&(e.status!=="stale"||!t)||!e.changed&&e.status!=="stale"&&t?.status==="stale"){const c={id:t?t.id:(this._lastTestTreeNodeId++).toString(),key:e.key,name:e.name,type:"file",expanded:t?.expanded||!1,selected:!1,filtered:e.filtered};t&&(t.replacementId=c.id);const d=this._buildTreeNodes(e.tests,this._indexTreeNodes(t?.children),c,i,s,r,o===void 0?void 0:o);return a=d.selection,t?.children&&this._releaseTreeNodeIds(t.children,i),c.children=d.children,c.count=d.count,c.time=this._roundTime(d.time),c.status=e.status==="stale"?"stale":e.status==="failed"?"failed":c.children?.length?d.failed?"failed":"executed":"unknown",c.expanded||=d.expanded,r&&(!!(r.time||r.skipped||r.todo)?d.matched&&(l=!0,c.match={}):this._matchTreeNode(c,r,o)?l=!0:d.matched&&(l=!0,c.match={})),c.expanded?c.depth=d.depth+1:c.depth=1,{node:c,selection:a,matched:l}}else if(t){if(e.status==="stale")t.status="stale",(t.match||r&&this._matchTreeNode(t,r,o))&&(l=!0),t.children&&this._traverseTreeNodes(t.children,c=>{c.status="stale",c.match&&(l=!0)});else{const c=this._updateTreeNodes(e.tests,this._indexTreeNodes(t?.children),s,r,"");a=c.selection,t.time=this._roundTime(c.time),t.status=c.failed?"failed":"executed",t.count=c.count,t.expanded||=c.expanded,t.filtered=e.filtered,t.selected=!1,delete t.match,r&&(!!(r.time||r.skipped||r.todo)?c.matched&&(l=!0,t.match={}):this._matchTreeNode(t,r,o)?l=!0:c.matched&&(l=!0,t.match={})),t.expanded?t.depth=c.depth+1:t.depth=1}return{node:t,selection:a,matched:l}}}}_buildTreeNodes(e,t,i,s,r,o,a){const l=[];let c=0,d=0,u=0,h=0,f=!1,g=!1,m,p;for(const b of e)if(b.tests&&b.tests.length>0){const w=t?.[b.name]?.suite,v={id:(this._lastTestTreeNodeId++).toString(),type:"suite",name:b.name,expanded:w?.expanded||!1,selected:!1,filtered:b.filtered,location:b.location,parent:i};w&&(w.replacementId=v.id),s[v.id]=v;const _=this._buildTreeNodes(b.tests,this._indexTreeNodes(w?.children),v,s,r,o,a===void 0?void 0:a+" "+b.name);c+=_.time,u+=_.count.total,h+=_.count.failing,f=_.failed||f,g||=_.expanded,m||=_.selection,l.push(v),v.time=this._roundTime(_.time),v.status=_.failed?"failed":"executed",v.count=_.count,v.children=_.children,v.expanded||=_.expanded,o&&(!!(o.time||o.failed||o.skipped||o.todo||o.passed)?_.matched&&(p=!0,v.match={}):this._matchTreeNode(v,o,a)?p=!0:_.matched&&(p=!0,v.match={})),v.expanded&&(d+=_.depth+1)}else{c+=b.time||0,b.status==="failed"&&(h++,f=!0),u++,d++;const w=t?.[b.name]?.test,v={id:(this._lastTestTreeNodeId++).toString(),type:"test",name:b.name,status:b.status,time:this._roundTime(b.time),expanded:!0,selected:!1,filtered:b.filtered,location:b.location,slow:b.slow,parent:i};if(w&&(w.replacementId=v.id),s[v.id]=v,l.push(v),o){const _=this._matchTreeNode(v,o,a);_&&(v.selected=r&&b.active||!1,v.selected&&(m=v.id)),p=_||p}else v.selected=r&&b.active||!1,v.selected&&(m=v.id);g||=v.selected}return{children:e.length>0?l:void 0,time:c,count:{total:u,failing:h},failed:f,expanded:g,depth:d,selection:m,matched:p}}_updateTreeNodes(e,t,i,s,r){let o,a=0,l=0,c=0,d=0,u=!1,h=!1,f;for(const g of e)if(g.tests&&g.tests.length>0){const m=t?.[g.name]?.suite;if(m){const p=this._updateTreeNodes(g.tests,this._indexTreeNodes(m?.children),i,s,r+" "+g.name);a+=p.time,c+=p.count.total,d+=p.count.failing,u=p.failed||u,h||=p.expanded,f||=p.selection,m.time=this._roundTime(p.time),m.status=p.failed?"failed":"executed",m.count=p.count,m.expanded||=p.expanded,m.filtered=g.filtered,m.selected=!1,delete m.match,s&&(!!(s.time||s.failed||s.skipped||s.todo||s.passed)?p.matched&&(o=!0,m.match={}):this._matchTreeNode(m,s,r)?o=!0:p.matched&&(o=!0,m.match={})),m.expanded&&(l+=p.depth+1)}}else{const m=t?.[g.name]?.test;if(m){if(m.status=g.status,m.time=this._roundTime(g.time),m.expanded=!0,m.selected=!1,m.filtered=g.filtered,m.slow=g.slow,a+=g.time||0,g.status==="failed"&&(d++,u=!0),c++,l++,delete m.match,s){const p=this._matchTreeNode(m,s,r);p&&(m.selected=i&&g.active||!1,m.selected&&(f=m.id)),o=p||o}else m.selected=i&&g.active||!1,m.selected&&(f=m.id);h||=m.selected}}return{time:a,depth:l,count:{total:c,failing:d},failed:u,expanded:h,selection:f,matched:o}}_searchTreeNode(e,t,i,s,r,o){let a=!1,l,c=1,d=!1;this._matchTreeNode(e,t,o)?(a=!0,d=!0,l||(l=e.id)):i&&(a=!0,d=!0,e.match={});let u=!0;if(e.children&&e.children.length>0)for(const h of e.children){const f=this._searchTreeNode(h,t,e.match?.text&&!s||i,s,r,o+" "+e.name);f.matched&&(c+=f.depth,u=!1),a||=f.expanded,!d&&f.matched&&(d=!0,e.match={}),l||(l=f.selection)}return u&&e.type!=="test"?(e.type!=="file"&&(d=!1,delete e.match),a=!1,i=!1,c=1,e.expanded=!1):(r?e.expanded=!1:(i||a)&&(e.expanded=!0),e.expanded||(c=1)),{expanded:(i||a)&&!r,depth:c,selection:l,matched:d}}_matchTreeNode(e,t,i){if(e.match=void 0,e.type!=="test")e.type==="file"?(t.failed&&(e.status==="failed"||e.status==="stale")||t.passed&&e.status!=="failed"&&e.status!=="stale"&&e.status!=="todo"&&e.status!=="skipped")&&(e.match={status:!0},t.text&&e.name.toLowerCase().includes(t.text.toLowerCase())&&(e.match.text=!0)):t.text&&e.name.toLowerCase().includes(t.text.toLowerCase())&&(e.match||(e.match={}),e.match.text=!0);else{if(t.failed||t.todo||t.skipped||t.passed)if(t.failed&&(e.status==="failed"||e.status==="stale")||t.todo&&e.status==="todo"||t.skipped&&e.status==="skipped"||t.passed&&e.status!=="failed"&&e.status!=="stale"&&e.status!=="todo"&&e.status!=="skipped")e.match={status:!0};else return delete e.match,!1;if(t.text&&(i===void 0?e.name:i+" "+e.name).toLowerCase().includes(t.text.toLowerCase())&&(e.match||(e.match={}),e.match.text=!0),t.time)if(e.time>=t.time)e.match={},e.match.time=!0;else return delete e.match,!1}return!!e.match}_indexTreeNodes(e){if(!e||e.length===0)return;const t={};for(const i of e)if(i.type==="suite"||i.type==="test"){const s=t[i.name];s?(i.type==="suite"&&(s.suite=i),i.type==="test"&&(s.test=i)):t[i.name]={suite:i.type==="suite"?i:void 0,test:i.type==="test"?i:void 0}}return t}_releaseTreeNodeIds(e,t){for(const i of e)i.children&&this._releaseTreeNodeIds(i.children,t),this._state.tests.foreground?.tree.selection?.id===i.id&&this._setState("tests","foreground","tree","selection",{id:i.replacementId,path:this._state.tests.foreground?.tree.selection.path}),delete t[i.id]}_traverseTreeNodes(e,t){for(const i of e)t(i),i.children&&this._traverseTreeNodes(i.children,t)}_selectTreeNode(e,t,i,s){if(e){let r=!0;if(t.selection?.id!==e.id){if(t.selection&&t.selection.id){const a=t.nodes[t.selection.id];a&&(a.selected=!1)}const o=t.nodes[e.id];if(o)o.selected=!0,this._trackNode(o.id,jn.buildNodeTestPath(o),o.type==="test"),t.selection={id:o.id};else{const a=i?t.files.matched.items:t.files.all.items;if(this._manualSelectionMade=!1,a.length>0){let l=t.nodes[a[0].id];l?(this._trackNode(l.id,jn.buildNodeTestPath(l),l.type==="test"),l.selected=!0,t.selection={id:l.id},t.revelation={index:0},r=!1):(t.selection=void 0,t.revelation={index:0},r=!1,setTimeout(()=>this._untrackNode(),0))}else t.selection=void 0,r=!1,setTimeout(()=>this._untrackNode(),0)}}if(r){const o=(i?t.files.matched:t.files.all).indices[e.fileId];t.revelation?t.revelation.index=o:t.revelation={index:o},e.fileId!==e.id&&(t.revelation.id=e.id)}}else{let r=t.selection&&t.selection.id?t.nodes[t.selection.id]:void 0;if(r)r.selected=!s;else if(t.selection&&t.selection.path&&!s){const o=i?t.files.matched:t.files.all;if(r=this._findClosestNode(t.selection.path,o),r){this._trackNode(r.id,jn.buildNodeTestPath(r),r.type==="test"),r.selected=!0,t.selection=this._buildSelection(r.id,t.nodes);return}}if(s||!r){const o=i?t.files.matched.items:t.files.all.items;if(o.length>0){let a=t.nodes[o[0].id];this._manualSelectionMade=!1,a?(this._trackNode(a.id,jn.buildNodeTestPath(a),a.type==="test"),a.selected=!0,t.revelation={index:0},t.selection=this._buildSelection(a.id,t.nodes)):(t.selection=void 0,setTimeout(()=>this._untrackNode(),0))}else t.selection=void 0,setTimeout(()=>this._untrackNode(),0)}}}_countExpandedTreeNodes(e,t){let i=0;if(!e)return i;for(const s of e)s.children&&s.expanded&&(i+=this._countExpandedTreeNodes(s.children,t)),(!t||s.match)&&i++;return i}_parseSearch(e){if(e){const t={};e.indexOf("@passed")>=0&&(t.passed=!0,e=e.replaceAll("@passed","")),e.indexOf("@failed")>=0&&(t.failed=!0,e=e.replaceAll("@failed","")),e.indexOf("@todo")>=0&&(t.todo=!0,e=e.replaceAll("@todo","")),e.indexOf("@skipped")>=0&&(t.skipped=!0,e=e.replaceAll("@skipped",""));const i=e.match(/@time\s*>\s*(\d+)/g);if(i&&i.length>0&&(t.time=parseInt(i[i.length-1].replace(/@time\s*>\s*/,"")),e=e.replaceAll(/@time\s*>\s*\d+/g,"")),e.trim().length>0&&(t.text=e.trim()),t.failed||t.skipped||t.todo||t.passed||t.time||t.text)return t}}_convertSearch(e){const t=this._state.tests.foreground;if(t){let i=function(o,a){a&&(s.indexOf(o)<0?s+=`${s.length>0?" ":""}${o}`:s=s.replaceAll(o,""))};t.search||this._setState("tests","foreground","search",{raw:""});let s=(t.search.raw||"").trim();i("@failed",e.failed),i("@todo",e.todo),i("@skipped",e.skipped);const r=this._threshold()||0;if(e.slow){const o=s.match(/@time\s*>\s*(\d+)/g);o&&o.length>0?s=parseInt(o[o.length-1].replace(/@time\s*>\s*/,""))>=r?s.replaceAll(/@time\s*>\s*\d+/g,""):`${s.length>0?" ":""}@time>${r}`:s+=`${s.length>0?" ":""}@time>${r}`}return this._setState("tests","foreground","search","raw",s.trim()),!0}return!1}_compareSearch(e,t){return!e&&!t?!0:!e||!t?!1:e.text===t.text&&e.time===t.time&&e.failed===t.failed&&e.skipped===t.skipped&&e.todo===t.todo&&e.passed===t.passed}_compareFilePaths(e,t){return e=e.toLowerCase(),t=t.toLowerCase(),e<t?-1:e>t?1:0}_roundTime(e){if(e!==void 0)return e>=100?Math.round(e):Math.round((e||0)*100)/100}_buildSelection(e,t){if(e){const i=t[e];return i?{id:e,path:jn.buildNodeTestPath(i)}:{id:e}}}_findClosestNode(e,t){let i;const s=t.items.find(r=>r.key===e[0]);if(s){const r=(o,a)=>{if(a.length){const l=o.find(c=>c.name===a[0]);return l&&l.children&&a.length>1&&r(l.children,a.slice(1))||l}};s.children&&(i=r(s.children,e.slice(1))),i||(i=s)}return i}get _detailsToRequest(){if(this._appService.isIntegratedOverview())return{coverage:!1,logs:!0,errors:!0};const[e]=this._appService.appSettings(),t=this._appService.isStandalone()?e.standalone.tests.layout==="horizontal":e.tests.layout==="horizontal",i=t?!e.panels?.[Ue.SideViewTestsCoverage]?.collapsed:!e.panels?.[Ue.SideViewTestsAltDetailsCoverage]?.collapsed,s=t?!e.panels?.[Ue.SideViewTestsLogs]?.collapsed:!e.panels?.[Ue.SideViewTestsAltDetailsLogs]?.collapsed,r=t?!e.panels?.[Ue.SideViewTestsErrors]?.collapsed:!e.panels?.[Ue.SideViewTestsAltDetailsErrors]?.collapsed;return{coverage:i,logs:s,errors:r}}dispose(){this._disposable.dispose()}static Provider}const[bke,vke]=Go(n=>n.initial);jn.Provider=bke;const _ke=1e3;class wn{constructor(e,t){this._state=e,this._setState=t,this._coreToApp=Y1(),this._appToCore=U1(),this._appService=Dt();const i=this._setState.bind(this,"tests","foreground","details");this._testsService=new jn(e,t,i,this._appService,this._appToCore,()=>this._state.project?.thresholds.slowTest),this._disposable.add(this._coreToApp.onProject(this.onProject.bind(this))),this._disposable.add(this._coreToApp.onFilesWithCoverage(this.onFilesWithCoverage.bind(this))),this._disposable.add(this._coreToApp.onTestTree(s=>this._testsService.updateTree(s))),this._disposable.add(this._coreToApp.onTestTreeFilter(s=>this._testsService.updateFilter(s))),this._disposable.add(this._coreToApp.onTestTreeDetails(s=>this._testsService.updateDetails(s))),this._disposable.add(this._coreToApp.onTestFileProgress(s=>this._testsService.updateTestFileProgress(s.testFileProgress))),this._disposable.add(this._coreToApp.onAllLogsAndErrors(this.onAllLogsAndErrors.bind(this))),this._disposable.add(this._coreToApp.onTestDetails(this.onTestDetails.bind(this))),this._disposable.add(this._coreToApp.onSelectedEntities(this.onSelectedEntities.bind(this))),this._disposable.add(this._coreToApp.onAutoSelectedEntities(this.onAutoSelectedEntities.bind(this))),this._disposable.add(this._coreToApp.onDebuggerState(this.onDebuggerStateChanged.bind(this))),this._disposable.add(this._coreToApp.onRunError(this.onRunErrorChanged.bind(this))),this._disposable.add(()=>this._testsService.dispose()),this._appToCore.trackProjectConfig()}_coreToApp;_appToCore;_disposable=new Fo;_testsService;_appService;get tests(){return this._testsService}trackFilesWithCoverage(){this._appToCore.trackFilesWithCoverage()}untrackFilesWithCoverage(){this._appToCore.untrackFilesWithCoverage(),this._setState("fileCoverage",void 0)}trackLogs(){this._appService.optInToLogsAndErrors(),this._appToCore.trackContextLogsAndErrors(),this._startApplyingLogsDisplayLimits()}_startApplyingLogsDisplayLimits(){this._setState("displayLimits",At({logs:{apply:!0}}))}untrackLogs(){this._appService.optOutFromLogsAndErrors(),this._setState("logs",void 0),this._setState("errors",void 0),this._setState("displayLimits","logs",void 0),this._setState("displayLimits","errors",void 0)}loadRestOfLogs(){this._setState("displayLimits",At({logs:{apply:!1}})),this._appToCore.trackContextLogsAndErrors()}syncLogSelection(e){e.logs?.selection&&(this._setState("selection","log",e.logs.selection),this._state.logs?.items?.[e.logs.selection.logSource]?.logs[e.logs.selection.logOrExpressionId]&&this._setState("logs","items",e.logs.selection.logSource,"logs",e.logs.selection.logOrExpressionId,"selection",t=>({...t,active:!0})))}trackErrors(){this._appService.optInToLogsAndErrors(),this._appToCore.trackContextLogsAndErrors(),this._startApplyingErrorsDisplayLimits()}_startApplyingErrorsDisplayLimits(){this._setState("displayLimits",At({errors:{apply:!0}}))}untrackErrors(){this._appService.optOutFromLogsAndErrors(),this._setState("logs",void 0),this._setState("errors",void 0),this._setState("displayLimits","logs",void 0),this._setState("displayLimits","errors",void 0)}loadRestOfErrors(){this._setState("displayLimits",At({errors:{apply:!1}})),this._appToCore.trackContextLogsAndErrors()}syncErrorSelection(e){if(!e||!e.errors?.selection){this._setState("selection","error",void 0);return}this._setState("selection","error",e.errors.selection)}selectFileTreeItem(e,t){this.isSelectFileTreeItem(e)&&!t||(this._setState("selectedFileTreeItem",{...e,sortedItems:[]}),this._setState("selectedFileTreeItem","sortedItems",At(this._allSortedFilesWithCoverage(e))))}isSelectFileTreeItem(e){return this._state.selectedFileTreeItem&&e.pathLabel===this._state.selectedFileTreeItem.pathLabel||!1}showFileUncoveredRegions(e,t,i){this._appService.shouldOpenInEditor(i)&&this._appToCore.showFileUncoveredRegions(e,i.buttons===999),this._appService.shouldOpenInBrowser(i)&&(this._appService.openCodePanelIfRequired(!0),this._appService.openFile({file:t}))}changeFileCoverageTableSort(e){this._setState(Gt(t=>{const i=t.fileCoverageTableSort;i.field===e?i.direction=i.direction==="asc"?"desc":i.direction==="desc"?"none":"asc":(i.field=e,i.direction="asc"),this._state.selectedFileTreeItem&&this._setState("selectedFileTreeItem","sortedItems",At(this._allSortedFilesWithCoverage(this._state.selectedFileTreeItem)))}))}onAllLogsAndErrors(e){this._appService.closeFind(),this._setState(Gt(t=>{t.runError=e.runError;const i=!!t.runError,s=e.runError?[{id:$n,message:e.runError.message,stack:[],header:e.runError.header}]:[],r=e.globalLogs.slice();e.globalErrors&&s.push(...e.globalErrors);const o=e.idsOfTestFilesWithGlobalErrors&&e.idsOfTestFilesWithGlobalErrors.length>0&&new Set(e.idsOfTestFilesWithGlobalErrors),a=Object.keys(t.filesWithExpressionsToEvaluate?.files||{}),l=a.length>0?new Set(a):void 0;r.forEach(f=>{f.fileId&&l?.delete(f.fileId)}),Object.values(e.tests).forEach(f=>{if(f.errors){const g=f.errors.map((m,p)=>({...m,id:vb(m,f,p),test:f}));s.push(...g)}f.logs&&r.push(...f.logs.map(g=>(g.fileId&&l?.delete(g.fileId),{...g,test:f}))),o&&o.delete(f.path[0].toString())}),l?.size!==0&&this._resetExpressionsToEvaluate(l);let c,d;if(o){if(t.errors?.all){c=[];for(const f of t.errors.all){const g=f.test?.path?.[0];g&&o.has(g.toString())&&(c=c||[],c.push({...f,maybeObsolete:!0}))}}if(t.logs?.items){d=[];for(const g of Object.values(t.logs.items)){const m=g.test?.path?.[0];m&&o.has(m.toString())&&(g.test&&(g.test.missing=!0),d.push(...Object.values(g.logs).map(p=>({...p,maybeObsolete:!0}))))}const f=t.logs.items.global?.logs;if(f){const g={...f};e.globalLogs.forEach(m=>{delete g[m.id]}),d.push(...Object.values(g).map(m=>({...m,maybeObsolete:!0})))}}}c&&s.push(...c),d&&r.push(...d),t.displayLimits?.errors?.apply?(t.displayLimits.errors.applied=s.splice(bn.errors).length>0,t.displayLimits.allErrorsLimitApplied=t.displayLimits.errors.applied):t.displayLimits&&(t.displayLimits.allErrorsLimitApplied=!1,s.length<bn.errors&&this._startApplyingErrorsDisplayLimits());const u={};let h=0;if(s.forEach((f,g)=>{f.maybeObsolete?R_(f):Sg(f,{marked:f.id&&!!this._state.selection.implicit.errors?.has(f.id)||void 0,active:this._state.selection.implicit.error===f.id,allowSkippingCompactDiff:this._appService.appSettings()[0].errors.diff?.compact==="auto"}),h+=f.size||0,(g>=bn.errorsWithFullDisplayOnly||g>0&&h>bn.errorSizeBytesWithFullDisplayOnly)&&(f.allowToDisplayFullyTruncated=!0),u[f.id]=f}),t.displayLimits?.logs?.apply?(t.displayLimits.logs.applied=r.splice(bn.logs).length>0,t.displayLimits.allLogsLimitApplied=t.displayLimits.logs.applied):t.displayLimits&&(t.displayLimits.allLogsLimitApplied=!1,r.length<bn.logs&&this._startApplyingLogsDisplayLimits()),r.length>0){const f=fs.updateLogs(this._state,r,t.selection.log,t.logs?.showStackTraceFor);t.selection.log=f.selected,this._setState("logs",At({items:f.items,maybeObsolete:i,stackTraceToShow:f.stackTraceToShow}))}else t.logs=void 0;s.length>0?this._setState("errors",At({singleTestSelected:!1,all:s,maybeObsolete:i,allById:u})):t.errors=void 0,delete t.selection.implicit.log}))}onTestDetails(e){this._appService.closeFind(),this._setState(Gt(t=>{const i=!!t.runError;let s,r,o;if(e.missing){if(t.errors?.all){s=[];for(const d of t.errors.all)d.test?.id===e.id&&(d.maybeObsolete=!0,s.push(d))}t.logs?.items&&(r=Object.values(t.logs?.items[e.id]?.logs||{}).map(d=>({...d,maybeObsolete:!0})))}t.debuggerState?.current?.watchExpressions&&(o=Object.values(t.debuggerState.current.watchExpressions).map(d=>({id:d.id,fileId:d.fileId,watchExpressionId:d.id,value:{autoExpand:!0},watchExpressionWithNoValue:!0,loc:{file:d.file,line:d.range[0],column:d.range[1]}})));const a=(t.runError?[{id:$n,message:t.runError.message,stack:[],header:t.runError.header}]:[]).concat(e.globalErrors||[]).concat(s||e.errors.map((d,u)=>({...d,id:vb(d,e,u),test:e})));t.displayLimits?.errors?.apply?t.displayLimits.errors.applied=a.splice(bn.errors).length>0:t.displayLimits&&a.length<bn.errors&&this._startApplyingErrorsDisplayLimits();const l={};a.forEach(d=>{d.maybeObsolete||Sg(d,{marked:d.id&&!!this._state.selection.implicit.errors?.has(d.id)||void 0,active:this._state.selection.implicit.error===d.id,allowSkippingCompactDiff:this._appService.appSettings()[0].errors.diff?.compact==="auto"}),l[d.id]=d});const c=(r||[]).concat(o||[]).concat(e.logs||[]);if(t.displayLimits?.logs?.apply?t.displayLimits.logs.applied=c.splice(bn.logs).length>0:t.displayLimits&&c.length<bn.logs&&this._startApplyingLogsDisplayLimits(),c?.length>0){const d=fs.updateLogs(this._state,c,t.selection.log,t.logs?.showStackTraceFor,e);t.selection.log=d.selected,this._setState("logs",At({items:d.items,maybeObsolete:i,stackTraceToShow:d.stackTraceToShow}))}else t.logs=void 0;a.length>0?this._setState("errors",At({singleTestSelected:!0,all:a,maybeObsolete:i,allById:l})):t.errors=void 0,delete t.selection.implicit.log,delete t.selection.error}))}onDebuggerStateChanged(e){this._setState("debuggerState",e.started?At(e):void 0)}onRunErrorChanged(e){const t=!!this._state.runError;!t&&!e||(this._appService.closeFind(),this._setState(Gt(i=>{if(i.runError=e,e){i.errors?i.errors.maybeObsolete=!0:i.errors={singleTestSelected:!1,all:[],allById:{},maybeObsolete:!0};const s={id:$n,message:e.message,stack:[],header:e.header};i.errors.all[0]?.id===$n?i.errors.all[0]=s:i.errors.all.unshift(s),i.errors.allById[$n]=s}else i.errors?.all[0]?.id===$n&&i.errors.all.shift(),delete i.errors?.allById?.[$n];this._setState("errors",At(i.errors)),i.logs&&(t?e||this._setState("logs",s=>({...s,maybeObsolete:void 0})):this._setState("logs",s=>({...s,maybeObsolete:!0})))})))}onAutoSelectedEntities(e){fs.updateLogsSelection(this._state,this._setState,e.logs,{markOnly:!0})}onSelectedEntities(e){fs.updateLogsSelection(this._state,this._setState,e.logs||[],{diagram:e.diagram})&&(this._state.displayLimits?.logs?.applied||this._state.displayLimits?.allLogsLimitApplied)&&this.loadRestOfLogs(),!e.suppressFocus&&e.logs&&e.logs.length>0&&e.target==="side-view"&&this._focus(),e.errors&&e.errors.length>0&&(this._setState("selection","error",{errorId:e.errors[0]}),!e.suppressFocus&&e.target==="side-view"&&this._focus())}_resetExpressionsToEvaluate(e){this._setState(Gt(t=>{fs.resetExpressionsToEvaluate(t,e)}))}onProject(e){this._setState("project",At(e))}onFilesWithCoverage(e){const t=this._state.project?.thresholds.lowCoverage||80,i=new Map;if(this._state.fileCoverage&&!e.full)this._setState(Gt(s=>{const r=s.fileCoverage;wn._registerFolderWithAffectedCoverage(i,r);for(const o of e.files){const a=o.path.split("/");let l=r;const c=[];for(const d of a){c.push(d),l.itemsByPath=l.itemsByPath||{};let u=wn._getFileCoverageTreeItem(l.itemsByPath,d);const h=c.length===a.length;if(u?h&&o.action!=="removed"&&!u.file||!h&&u.file?u=this._replaceFileCoverageTreeItem(l,c.slice(),u,o,d,h):h&&(o.action==="removed"?u.file&&(this._removeFileCoverageTreeItemByPath(l,u,d),this._removeEmptyParentFolders(l)):u.coverage=o.coverage):o.action!=="removed"&&(u=wn._addFileCoverageTreeItem(l,c.slice(),o,d,h)),!u){this._removeEmptyParentFolders(l);break}u.file||wn._registerFolderWithAffectedCoverage(i,u),l=u}}wn._updateAggregatedCoverage(i,t)})),this._state.selectedFileTreeItem&&i.has(this._state.selectedFileTreeItem.pathLabel)&&(this._state.selectedFileTreeItem.sortedItems.length>_ke?this._setState("fileCoverageTableSort","direction","none"):this._setState("selectedFileTreeItem","sortedItems",At(this._allSortedFilesWithCoverage(this._state.selectedFileTreeItem))));else{wn.resetVisibleItemsLimit();const s={name:this._state.project?.name||"<rootDir>",path:[],pathLabel:""};wn._registerFolderWithAffectedCoverage(i,s);for(const r of e.files){const o=r.path.split("/");let a=s;const l=[];for(const c of o){l.push(c),a.itemsByPath=a.itemsByPath||{};let d=wn._getFileCoverageTreeItem(a.itemsByPath,c);if(!d){const u=l.length===o.length;d={parent:a,name:c,path:l.slice(),pathLabel:l.join("/"),file:u?!0:void 0,id:u?r.id:void 0},u?d.coverage=r.coverage:wn._registerFolderWithAffectedCoverage(i,d),wn._setFileCoverageTreeItemByPath(a.itemsByPath,c,d)}a=d}}this._sortAllFoldersAndFilesWithCoverageByName(s),wn._updateAggregatedCoverage(i,t),this._setState("fileCoverage",s),this.selectFileTreeItem(s,!0)}}_removeEmptyParentFolders(e){if(!e.items?.length){let t=e;for(;t.parent;){const i=t.parent;if(i.items?.length===1)t=i;else break}t.parent&&this._removeFileCoverageTreeItemByPath(t.parent,t,t.name)}}_allSortedFilesWithCoverage(e){const t=this._state.fileCoverageTableSort,i=wn._allFilesWithCoverage(e);if(!t||t.direction==="none")return i;const s=t.direction,r=t.field==="coverageValue"?o=>o.coverage.value||0:t.field==="numberOfUncoveredRegions"?o=>o.coverage.ranges.all-o.coverage.ranges.covered:t.field==="numberOfCoverableRegions"?o=>o.coverage.ranges.all:o=>o.pathLabel;return i.sort((o,a)=>{const l=r(o),c=r(a);return l>c?s==="desc"?-1:1:l<c?s==="asc"?-1:1:0})}static _allFilesWithCoverage(e){const t=[];for(const i of e.items||[])i.file?i.coverage&&t.push(i):t.push(...wn._allFilesWithCoverage(i));return t}_replaceFileCoverageTreeItem(e,t,i,s,r,o){return this._removeFileCoverageTreeItemByPath(e,i,r),wn._addFileCoverageTreeItem(e,t,s,r,o)}static _addFileCoverageTreeItem(e,t,i,s,r){const o={name:s,path:t,pathLabel:t.join("/"),file:r?!0:void 0,coverage:r?i.coverage:void 0,id:r?i.id:void 0,parent:e};if(e.itemsByPath&&wn._setFileCoverageTreeItemByPath(e.itemsByPath,s,o),e.items){const a=rG(e.items,o,wn._fileFolderNameComparator);e.items.splice(a,0,o)}else e.items=[o];return o}_removeFileCoverageTreeItemByPath(e,t,i){if(e.itemsByPath&&wn._setFileCoverageTreeItemByPath(e.itemsByPath,i),e.items){const s=rG(e.items,t,wn._fileFolderNameComparator);e.items.splice(s,1)}this.isSelectFileTreeItem(t)&&this._setState("selectedFileTreeItem",void 0)}static _updateAggregatedCoverage(e,t){const i=Array.from(e.values()).sort((s,r)=>r.path.length-s.path.length);for(const s of i)s.coverage=wn._getAggregatedCoverage(s,t)}static _registerFolderWithAffectedCoverage(e,t){e.set(t.pathLabel,t)}static _getAggregatedCoverage(e,t){if(!e.items)return;const i={low:!1,value:0,ranges:{all:0,covered:0}};let s=!1;if(e.items.reduce((r,o)=>{const a=o.coverage;return a&&(r.ranges.all+=a.ranges.all,r.ranges.covered+=a.ranges.covered,s=!0),r},i),!!s)return i.value=Math.min(100,i.ranges.all?Math.round(1e4*i.ranges.covered/i.ranges.all)/100:0),i.low=i.value<t,i}static _getFileCoverageTreeItem(e,t){return e["_p"+t]}static _setFileCoverageTreeItemByPath(e,t,i){i===void 0?delete e["_p"+t]:e["_p"+t]=i}_sortAllFoldersAndFilesWithCoverageByName(e){if(e.itemsByPath){e.items=Object.values(e.itemsByPath),e.items.sort(wn._fileFolderNameComparator);for(const t of e.items)this._sortAllFoldersAndFilesWithCoverageByName(t)}}static _fileFolderNameComparator(e,t){const i=!e.file,s=!t.file;return i&&!s?-1:!i&&s?1:e.name<t.name?-1:e.name>t.name?1:0}dispose(){this._disposable.dispose()}_focus(){this._appService.isStandalone()||this._appToCore.focus("side-view")}static Provider;static numberOfInitiallyVisibleItems=0;static resetVisibleItemsLimit(){wn.numberOfInitiallyVisibleItems=0}}const[wke,lu]=Go(n=>n.initial);wn.Provider=wke;var yke=G("<div>Only coverage for source files run by the currently <b></b> tests is displayed."),Im=G("<br>"),Ske=G('<ul class="list-disc px-3 [&amp;_li]:font-bold">'),Cke=G("<li>"),Lke=G("<div>"),kke=G("<span class=kbd>Wallaby.js: Toggle Coverage Display in File Explorer"),xke=G("<b>always display code coverage in the editor file explorer"),Tke=G("<b>clicking this icon twice"),Dke=G("<span class=kbd>wallaby.showCoverageInExplorer"),Ike=G("<span class=kbd>testing.showCoverageInExplorer"),Mke=G('<div class="h-full w-full outline-none"tabindex=-1 data-namespace=details.coverage>'),Eke=G('<div class="mx-auto my-auto flex h-full w-full items-center justify-center px-3 text-center text-[length:--header-font-size] uppercase tracking-wide text-[var(--subtle-foreground)]">No coverage data available'),Nke=G('<div class="mx-auto my-auto flex h-full w-full items-center justify-center px-3 text-center text-[length:--header-font-size] uppercase tracking-wide text-[var(--subtle-foreground)]">Select a folder to view sortable coverage table,<br>or a file to view uncovered regions in your editor'),Rke=G('<div class=expander><span class="icon codicon"></span><span class="icon codicon">'),Wke=G('<div class=item><div class="header pl-[calc(var(--tree-level)*0.375rem)]"><span class=label>'),Ake=G('<span class="icon codicon codicon-file pl-4 brightness-75">'),Fke=G('<div class="relative h-full w-full"><div class="absolute top-0 h-[1.875rem] w-full px-2 shadow-[--widget-shadow]"><table class="w-full table-fixed text-[length:--panel-font-size] leading-[1.875rem] [&amp;_.sorter]:flex [&amp;_.sorter]:flex-col [&amp;_.sorter]:pl-1 [&amp;_.sorter_.icon]:w-2 [&amp;_.sorter_.icon]:text-[length:--icon-smallest-font-size] [&amp;_th:not(:first-child)>div]:justify-end [&amp;_th:not(:last-child)]:pr-2 [&amp;_th>div>span]:truncate [&amp;_th>div]:flex [&amp;_th>div]:items-center [&amp;_th]:text-[length:--small-header-font-size] [&amp;_th]:uppercase"><thead><tr><th class=w-[50%]></th><th class=w-[20%]></th><th class=w-[15%]></th><th class=w-[15%]></th></tr></thead></table></div><div class="scrollable absolute bottom-0 top-[1.875rem] w-full overflow-y-auto pb-1"><div><table class="w-full table-fixed text-[length:--panel-font-size] [&amp;_.coverage-indicator.low]:bg-[--editor-warning-foreground] [&amp;_.coverage-indicator.zero]:bg-[--error-foreground] [&amp;_.coverage-indicator]:absolute [&amp;_.coverage-indicator]:bottom-[-0.0625rem] [&amp;_.coverage-indicator]:h-[0.125rem] [&amp;_.coverage-indicator]:self-end [&amp;_.coverage-indicator]:bg-[--testing-icon-passed] [&amp;_.coverage]:relative [&amp;_.coverage]:flex [&amp;_.coverage]:flex-col [&amp;_.icon]:text-[length:--icon-font-size] [&amp;_tbody_tr]:h-[--panel-item-height] hover:[&amp;_tbody_tr]:bg-[var(--list-hover-background)] [&amp;_td:first-child]:cursor-pointer [&amp;_td:first-child]:pl-2 [&amp;_td:first-child_div]:truncate [&amp;_td:last-child]:!pr-3 [&amp;_td:not(:first-child)]:pr-5 [&amp;_td:not(:first-child)]:text-right [&amp;_td:not(:first-child)]:text-[length:--panel-smaller-font-size] [&amp;_td]:overflow-hidden [&amp;_td]:p-0 [&amp;_td]:leading-[var(--tree-item-line-height)] [&amp;_td_.icon]:brightness-75"><thead><tr><th class=w-[50%]></th><th class=w-[20%]></th><th class=w-[15%]></th><th class=w-[15%]></th></tr></thead><tbody>'),Vke=G('<tr><td><div class="flex items-center"><span class="icon codicon codicon-file"></span><div class="min-w-0 flex-grow pl-1"></div></div></td><td><div class=coverage><div>%</div><div class=coverage-indicator></div></div></td><td></td><td>'),Pke=G('<span class="icon codicon codicon-triangle-up">'),fz=G('<span class="icon codicon codicon-triangle-down">'),Oke=G('<div class="header-tracking cursor-pointer select-none"><span></span><div class=sorter>'),Zke=G('<span class="icon codicon codicon-triangle-up mb-[-0.1875rem]">');function Gke(n){const e=lu(),t=Dt(),i=t.canShowCoverageInExplorer(),s=t.showCoverageInExplorer(),[r,o]=he(i()===!0&&s()===void 0),a=t.getRunStats(),l=t.getTestRunModeParams(),c=J(()=>a()?.filtered||l()?.smartRunMode||l()?.included?.length);return Bn(()=>{if(t.trackStats(),wn.resetVisibleItemsLimit(),e.trackFilesWithCoverage(),i()===!0&&s()===void 0&&t.toggleCoverageInExplorer({show:!0}),n.icons([x(se,{get when(){return c()},get children(){return x(Ee,{class:"codicon-filter text-[--editor-warning-foreground]",tabIndex:0,namespace:"details.coverage.header.action",get tooltip(){return(()=>{var d=yke(),u=d.firstChild,h=u.nextSibling;return h.nextSibling,A(h,(()=>{var f=J(()=>!!a()?.filtered);return()=>f()?"focused":l()?.smartRunMode?"watched":"selected"})()),A(d,(()=>{var f=J(()=>!!l()?.included?.length);return()=>f()?[Im(),Im(),"Following test files are ",J(()=>l()?.smartRunMode?"watched":"selected"),":",(()=>{var g=Ske();return A(g,x(ln,{get each(){return l()?.included||[]},children:m=>(()=>{var p=Cke();return A(p,m),p})()})),g})()]:void 0})(),null),d})()}})}}),x(se,{get when(){return i()!==void 0},get children(){return x(Ee,{class:"codicon-files",get classList(){return{"transition-all duration-[1000ms] animate-pulse":r(),activeIcon:s()===!0,specialActiveIcon:s()===void 0&&i(),disabledIcon:i()===!1}},onClick:()=>{i()&&t.toggleCoverageInExplorer({save:!0})},tabIndex:0,namespace:"details.coverage.header.action",get tooltip(){return(()=>{var d=Lke();return A(d,(()=>{var u=J(()=>i()===!0);return()=>u()?[J(()=>s()!==!1?"Hide code coverage in the editor file explorer":"Show code coverage in the editor file explorer"),Im(),Im(),J((()=>{var h=J(()=>s()===void 0);return()=>h()?["Right now, the code coverage display is enabled in the editor file explorer because the Wallaby Coverage side view is open. Once you close it, the code coverage display will be disabled in the file explorer. If you want to ",xke(),", you can toggle it off and on by ",Tke(),"."]:["If you want to display code coverage in the editor file explorer only when the Wallaby Coverage side view is open, you can change the ",Dke()," ","setting in VS Code."]})()),Im(),Im(),["You may also use ",kke()," ","command in VS Code to toggle the code coverage display in the file explorer."]]:["Can not toggle coverage display in file explorer because your VS Code"," ",Ike()," setting does not allow it."]})()),d})()}})}})]),i()){const d=setTimeout(()=>{o(!1)},6e3);Ot(()=>{d&&clearTimeout(d)})}}),Ot(()=>{t.untrackStats(),e.untrackFilesWithCoverage(),i()===!0&&s()===void 0&&t.toggleCoverageInExplorer({})}),(()=>{var d=Mke();return A(d,x(se,{get when(){return n.state.fileCoverage},get fallback(){return x(Th,{get children(){return Eke()}})},get children(){return x(jr,{class:"h-full w-full",direction:"column",get children(){return[x(ji,{defaultState:{size:50},get id(){return Ue.SideViewCoverageTree},class:`[&_.icon]:icon-opacity flex
               w-full
               !overflow-y-auto
               text-[length:--panel-font-size]
               [&_.expander]:flex
               [&_.expander]:flex-row
               [&_.expander]:items-center
               [&_.header]:flex
               [&_.header]:h-[--panel-item-height]
               [&_.header]:cursor-pointer
               [&_.header]:flex-row
               [&_.header]:items-center
               [&_.header]:justify-center

               [&_.header]:pr-2
               [&_.header]:leading-[var(--tree-item-line-height)]
               hover:[&_.header]:bg-[var(--list-hover-background)]
               [&_.icon]:pr-1

               [&_.icon]:text-[length:--icon-font-size]
               [&_.item.selected>.header]:rounded-[var(--focus-border-radius)]
               [&_.item.selected>.header]:border-[var(--focus-border)]

               [&_.item.selected>.header]:bg-[var(--list-active-selection-background)]
               [&_.item.selected>.header]:text-[var(--list-active-selection-foreground)]
               [&_.item]:w-full


               [&_.label]:flex-grow
               [&_.label]:truncate
               [&_.label]:pb-[0.0625rem]
        `,get children(){return x(m0,{namespace:"details.coverage.tree",get children(){return x(se,{get when(){return n.state.fileCoverage},get children(){return x(hte,{get item(){return n.state.fileCoverage}})}})}})}}),x(ji,{defaultState:{size:50},get id(){return Ue.SideViewCoverageTable},get children(){return x(se,{get when(){return n.state.fileCoverage&&n.state.selectedFileTreeItem},get fallback(){return x(Th,{get children(){return Nke()}})},get children(){return x(Bke,{get items(){return n.state.selectedFileTreeItem.sortedItems},get level(){return n.state.selectedFileTreeItem.path.length},get sort(){return n.state.fileCoverageTableSort}})}})}})]}})}})),d})()}const gz=500;function hte(n){const e=lu(),t=Dt(),i=J(()=>!n.item.file),[s,r]=he(wn.numberOfInitiallyVisibleItems<=gz&&(!n.item.items?.length||n.item.items.length<gz/2));wn.numberOfInitiallyVisibleItems+=n.item.items?.length||0;const o=J(()=>n.item.coverage?.low),a=J(()=>e.isSelectFileTreeItem(n.item));return(()=>{var l=Wke(),c=l.firstChild,d=c.firstChild;return c.$$click=u=>{i()?e.selectFileTreeItem(n.item):t.showFileUncoveredRegions(n.item.id,n.item.path.join("/"),u)},A(c,x(se,{get when(){return i()},get fallback(){return(()=>{var u=Ake();return Me(h=>{var f=!o(),g=!!o();return f!==h.e&&u.classList.toggle("text-[--testing-icon-passed]",h.e=f),g!==h.t&&u.classList.toggle("text-[--editor-warning-foreground]",h.t=g),h},{e:void 0,t:void 0}),u})()},get children(){var u=Rke(),h=u.firstChild,f=h.nextSibling;return u.$$click=()=>{r(g=>!g)},Me(g=>{var m=!!s(),p=!s(),b=!!s(),w=!s();return m!==g.e&&h.classList.toggle("codicon-chevron-down",g.e=m),p!==g.t&&h.classList.toggle("codicon-chevron-right",g.t=p),b!==g.a&&f.classList.toggle("codicon-folder-opened",g.a=b),w!==g.o&&f.classList.toggle("codicon-folder",g.o=w),g},{e:void 0,t:void 0,a:void 0,o:void 0}),u}}),d),A(d,()=>n.item.name),A(c,x(lV,{get coverage(){return n.item.coverage},get file(){return!!n.item.file}}),null),A(l,x(se,{get when(){return J(()=>!!n.item.items)()&&s()},get children(){return x(ln,{get each(){return n.item.items},children:u=>x(hte,{item:u})})}}),null),Me(u=>{var h=!!a(),f=n.item.path.length+1;return h!==u.e&&l.classList.toggle("selected",u.e=h),f!==u.t&&((u.t=f)!=null?c.style.setProperty("--tree-level",f):c.style.removeProperty("--tree-level")),u},{e:void 0,t:void 0}),l})()}function Bke(n){const e=Dt(),[t,i]=he(),s=t0(t),r=J(()=>n.items.map(d=>d)),o=lw(),{list:a,containerProps:l,wrapperProps:c}=Hk(r,{overscan:50,itemHeight:o});return(()=>{var d=Fke(),u=d.firstChild,h=u.firstChild,f=h.firstChild,g=f.firstChild,m=g.firstChild,p=m.nextSibling,b=p.nextSibling,w=b.nextSibling,v=u.nextSibling,_=v.firstChild,y=_.firstChild,C=y.firstChild,S=C.nextSibling;return A(m,x(ly,{text:"Relative path",title:"Sort by <b>file path</b> relative to the selected folder",get sort(){return n.sort},field:"name"})),A(p,x(ly,{text:"Coverage",title:"Sort by <b>coverage</b> of the file (%)",get sort(){return n.sort},field:"coverageValue"})),A(b,x(ly,{text:"Total",title:"Sort by <b>total number of coverable branches</b> in the file",get sort(){return n.sort},field:"numberOfCoverableRegions"})),A(w,x(ly,{text:"Uncovered",title:"Sort by <b>number of not covered branches</b> in the file",get sort(){return n.sort},field:"numberOfUncoveredRegions"})),Yh(v,"scroll",l.onScroll),We(k=>{i(k),l.ref(k)},v),A(S,x(ln,{get each(){return a()},children:k=>{const I=k.data;return(()=>{var T=Vke(),D=T.firstChild,M=D.firstChild,E=M.firstChild,W=E.nextSibling,P=D.nextSibling,N=P.firstChild,H=N.firstChild,U=H.firstChild,B=H.nextSibling,Y=P.nextSibling,ne=Y.nextSibling;return D.$$click=ee=>e.showFileUncoveredRegions(I.id,I.path.join("/"),ee),We(Te,E,()=>Te&&{content:I.pathLabel}),A(W,x(h2,{get text(){return I.path.slice(n.level).join("/")},tooltip:!1})),A(H,()=>I.coverage.value,U),A(Y,()=>I.coverage.ranges.all),A(ne,()=>I.coverage.ranges.all-I.coverage.ranges.covered),Me(ee=>{var $=!I.coverage?.low,ge=!!I.coverage?.low,Ie=!!I.coverage.low,xe=!(I.coverage.value>0),z=I.coverage.value>0?`${I.coverage.value}%`:"2px";return $!==ee.e&&E.classList.toggle("text-[--testing-icon-passed]",ee.e=$),ge!==ee.t&&E.classList.toggle("text-[--editor-warning-foreground]",ee.t=ge),Ie!==ee.a&&B.classList.toggle("low",ee.a=Ie),xe!==ee.o&&B.classList.toggle("zero",ee.o=xe),z!==ee.i&&((ee.i=z)!=null?B.style.setProperty("width",z):B.style.removeProperty("width")),ee},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),T})()}})),Me(k=>{var I=!!s.y(),T=l.style,D=c().style;return I!==k.e&&u.classList.toggle("shadow-header",k.e=I),k.t=Dl(v,T,k.t),k.a=Dl(_,D,k.a),k},{e:void 0,t:void 0,a:void 0}),d})()}function ly(n){const e=lu(),t=J(()=>n.sort.field===n.field);return(()=>{var i=Oke(),s=i.firstChild,r=s.nextSibling;return i.$$click=()=>e.changeFileCoverageTableSort(n.field),We(Te,i,()=>Te&&{content:`${n.title}${t()&&n.sort.direction!=="none"?` (in ${n.sort.direction==="asc"?"ascending":"descending"} order)`:""}`}),A(s,()=>n.text),A(r,x(Fn,{get fallback(){return[Zke(),fz()]},get children(){return[x(ot,{get when(){return J(()=>n.sort.direction==="asc")()&&t()},get children(){return Pke()}}),x(ot,{get when(){return J(()=>n.sort.direction==="desc")()&&t()},get children(){return fz()}})]}})),Me(()=>r.classList.toggle("opacity-50",!t()||n.sort.direction==="none")),i})()}dn(["click"]);var Xke=G('<span class="pt-1.5 pb-1.5 flex items-center w-full justify-center">');function p0(n){return x(se,{get when(){return n.state?.applied},get children(){var e=Xke();return A(e,x(Ee,{class:"codicon-cloud-download",tooltip:"Load the rest of elements",get onClick(){return n.handler}})),e}})}var zke=G('<div class="m-[0_0_0_3px] box-border flex h-[25px] min-w-[70px] flex-initial select-none p-[2px_0_0_2px] text-center align-middle leading-[23px]">'),Hke=G('<div><div class="relative inset-0 w-full !overflow-visible overflow-y-clip outline-0"><div class="relative h-[41px] overflow-hidden"><div class="absolute right-[10px] z-[1] box-border h-[32px] w-[500px] min-w-[160px] max-w-[90%] overflow-hidden rounded-bl-[4px] rounded-br-[4px] bg-[--monaco-editor-widget-background] px-[4px] leading-[19px] text-[--monaco-editor-widget-foreground] shadow-[0_0_8px_2px_var(--widget-shadow)] transition-all duration-200 ease-linear"><div class="m-[3px_25px_0_17px] flex text-[12px]"><div class="relative flex flex-1 overflow-hidden align-middle"><div class=w-full><div><div class="relative h-full w-full"><textarea class="scrollbar-none m-0 box-border !block h-[23px] min-h-0 w-[calc(100%_-_6px)] resize-none bg-inherit px-[6px] py-[2px] text-[13px] text-[var(--monaco-input-foreground)] !outline-none"autocapitalize=off wrap=off></textarea></div></div></div></div><div class="flex h-[25px] items-center"><button></button><button></button></div></div><button tabindex=0 class="p-[3px] rounded-[5px] flex-initial ml-[3px] bg-center bg-no-repeat cursor-pointer flex items-center justify-center w-[unset] h-[unset] codicon codicon-close absolute right-[4px] top-[5px] hover:bg-[var(--input-option-hover-background)]"></button><div class="absolute !left-[0px] top-0 h-full !w-[2px] touch-none bg-[var(--monaco-editor-widget-border)]">');function Jd(n){const t=Dt().getFindState(),i=()=>t()?.lastShowTime,[s,r]=he(!1),[o,a]=he(!1),[l,c]=he(!1),[d,u]=he(""),[h,f]=he(""),[g,m]=he(!0);let p=null,b=null,w=[],v=null;const _="p-[3px] rounded-[5px] flex-initial ml-[3px] bg-center bg-no-repeat cursor-pointer flex items-center justify-center w-[unset] h-[unset]",y="text-[var(--monaco-disabled-foreground)] !cursor-default",C="hover:bg-[var(--input-option-hover-background)]";//! If we want find buttons later:
$e(i,()=>{n.isVisible()&&o()&&b&&b.focus()}),$e(n.isVisible,M=>{M?(r(!0),setTimeout(()=>a(!0),0)):(a(!1),setTimeout(()=>r(!1),200)),M||u("")}),$e(s,()=>{D()}),$e(n.searchStatus,M=>{const E=d();M&&M.searchTerm===E&&w[w.length-1]!==E&&(w=w.filter(W=>W!==E),w.push(E),w.length>20&&w.shift())}),$e(d,M=>{n.mode()==="change"?(n.onUpdateSearchTerm(M),f("")):h()&&(n.onUpdateSearchTerm(""),f(""))}),Fi(()=>{o()&&b&&b.focus()});const S=M=>{M.preventDefault(),M.stopPropagation()},k=M=>{S(M);const E=d();if(E){if(n.mode()==="enter"&&E!==h()){f(d()),n.onUpdateSearchTerm(d());return}M.shiftKey?n.onPreviousResult():n.onNextResult()}},I=M=>{if(w.length){const E=w.indexOf(d());E>0?u(w[E-1]):u(w[w.length-1])}S(M)},T=M=>{if(w.length){const E=w.indexOf(d());E===w.length-1?u(w[0]):u(w[E+1])}S(M)},D=()=>{v?.disconnect(),p&&(v=new ResizeObserver(M=>{const E=M[0];if(!E)return;const{width:W}=E.contentRect;m(W>360)}),v.observe(p),Ot(()=>{v?.disconnect()}))};return x(se,{get when(){return s()},get children(){var M=Hke(),E=M.firstChild,W=E.firstChild,P=W.firstChild,N=P.firstChild,H=N.firstChild,U=H.firstChild,B=U.firstChild,Y=B.firstChild,ne=Y.firstChild,ee=H.nextSibling,$=ee.firstChild,ge=$.nextSibling,Ie=N.nextSibling;return We(xe=>p=xe,E),P.$$keydown=xe=>{xe.key==="Escape"&&(S(xe),n.onClose(!0))},P.style.setProperty("border-left","1px solid var(--monaco-widget-border)"),P.style.setProperty("border-right","1px solid var(--monaco-widget-border)"),P.style.setProperty("border-bottom","1px solid var(--monaco-widget-border)"),ne.$$input=xe=>{u(xe.target.value)},ne.$$keydown=xe=>{xe.key==="Enter"?k(xe):xe.key==="ArrowUp"?I(xe):xe.key==="ArrowDown"&&T(xe)},ne.addEventListener("blur",()=>c(!1)),ne.addEventListener("focus",()=>c(!0)),We(xe=>b=xe,ne),xt(ne,"spellcheck",!1),ne.style.setProperty("scrollbar-width","none"),A(ee,x(se,{get when(){return g()},get children(){var xe=zke();return A(xe,x(Fn,{get children(){return[x(ot,{get when(){return!n.searchStatus()},children:"No results"}),x(ot,{get when(){return J(()=>n.searchStatus().current!==void 0)()&&n.searchStatus().total!==void 0},get children(){return`${n.searchStatus().current} of ${n.searchStatus().total}`}}),x(ot,{when:!0,children:"?"})]}})),xe}}),$),$.$$click=()=>n.onPreviousResult(),We(Te,$,()=>Te&&n.searchStatus()&&{content:'Previous Match <span class="keyboard-shortcut">Enter</span>'}),ge.$$click=()=>n.onNextResult(),We(Te,ge,()=>Te&&n.searchStatus()&&{content:'Next Match <span class="keyboard-shortcut">(Enter)</span>'}),Ie.$$click=()=>n.onClose(!1),We(Te,Ie,()=>Te&&{content:'Close <span class="keyboard-shortcut">Escape</span>'}),Me(xe=>{var z=o()?"translateY(0)":"translateY(calc(-100% - 10px))",K=`relative box-border block min-h-[25px] w-full overflow-hidden rounded-[2px] border border-[var(--monaco-input-border,transparent)] bg-[var(--monaco-input-background)] p-0 text-[13px] text-[var(--monaco-input-foreground)] ${l()?"!border-[var(--focus-border)]":""}`,Se=l()?"Find ( for history)":"Find",De=n.searchStatus()?0:-1,ke=`${_} codicon codicon-arrow-up ${n.searchStatus()?C:y}`,je=n.searchStatus()?0:-1,et=`${_} codicon codicon-arrow-down ${n.searchStatus()?C:y}`;return z!==xe.e&&((xe.e=z)!=null?P.style.setProperty("transform",z):P.style.removeProperty("transform")),K!==xe.t&&mr(B,xe.t=K),Se!==xe.a&&xt(ne,"placeholder",xe.a=Se),De!==xe.o&&xt($,"tabindex",xe.o=De),ke!==xe.i&&mr($,xe.i=ke),je!==xe.n&&xt(ge,"tabindex",xe.n=je),et!==xe.s&&mr(ge,xe.s=et),xe},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),Me(()=>ne.value=d()),M}})}dn(["keydown","input","click"]);var Uke=G('<div class="progress-container absolute bottom-0"><div class="progress-bit bg-[--progress-bar-background]">');function fte(n={}){return x(Th,{delay:Ige,get when(){return n.active},get children(){var e=Uke();return Me(t=>nn(e,{"active infinite":n.active},t)),e}})}var Yke=G('<div class="relative h-full w-full outline-none"><div><div class="flex min-w-0 flex-grow items-center"><div class="header-font-size header-tracking min-w-0 flex-shrink select-none truncate py-0.5 pr-1 font-bold uppercase"><span class="px-0.5 pb-0.5"></span></div><div class="flex min-w-0 flex-1 justify-end overflow-hidden"></div></div><div class="flex flex-shrink-0 pr-1 leading-none [&amp;_li]:flex [&amp;_li_button]:mx-[0.0625rem] [&amp;_li_button]:!text-[length:--icon-font-size]"><ul class="flex flex-row items-center justify-center"></ul></div></div><div tabindex=-1>'),Kke=G("<li>");function $r(n){const[e,t]=he(),i=t0(e);$e(n.scrollable,o=>{o&&t(o)}),$e(i.y,o=>{n.onVerticalScroll?.(o)}),jh(e,([o])=>{o.contentRect.height===0&&i.measure()});const[s,r]=he(!1);return(()=>{var o=Yke(),a=o.firstChild,l=a.firstChild,c=l.firstChild,d=c.firstChild,u=c.nextSibling,h=l.nextSibling,f=h.firstChild,g=a.nextSibling;return o.$$focusout=()=>r(!1),o.$$focusin=()=>{n.namespace&&n?.onFocus?.(n.namespace),r(!0)},A(a,x(fte,{get active(){return n.showProgress}}),l),We(Te,d,()=>Te&&{content:n.tooltip}),A(d,()=>n.header),A(u,x(ln,{get each(){return n.beforeIcons||[]},children:m=>m})),A(f,x(ln,{get each(){return n.icons||[]},children:m=>(()=>{var p=Kke();return A(p,m),p})()})),A(o,x(ln,{get each(){return n.overlays||[]},children:m=>m}),g),We(m=>!n.scrollable&&t(m),g),A(g,()=>n.children),Me(m=>{var p=n.tabIndex!==void 0?n.tabIndex:-1,b=n.namespace,w=!!i.y(),v=`relative flex h-7 cursor-default flex-row
                  items-center justify-center py-1 shadow-[--widget-shadow]  ${n.headerClass||""}`,_={"border-b border-b-[--focus-header-border]":s()},y=n.namespace?`${n.namespace}.content`:void 0,C=`${n.nonNativeScrollbars?"scrollable_":"scrollable"} absolute inset-0 top-7 overflow-y-auto outline-none ${n.contentClass||""}`;return p!==m.e&&xt(o,"tabindex",m.e=p),b!==m.t&&xt(o,"data-namespace",m.t=b),w!==m.a&&a.classList.toggle("shadow-header",m.a=w),v!==m.o&&mr(a,m.o=v),m.i=nn(d,_,m.i),y!==m.n&&xt(g,"data-namespace",m.n=y),C!==m.s&&mr(g,m.s=C),m},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),o})()}dn(["focusin","focusout"]);function XC(n){const e=Dt();return x(Ee,{get class(){return`codicon-report${n.class?` ${n.class}`:""}`},get namespace(){return n.namespace},get tabIndex(){return n.tabIndex},tooltip:`Copy Wallaby diagnostics report to clipboard
            <br/><br/>
            After you copy the report, you can paste it into
            <ul class="px-3 list-disc [&_a]:text-[--link-foreground] [&_a]:underline">
            <li><a href="https://github.com/wallabyjs/public/issues/new" target="_blank">support ticket</a>,</li>
            <li><a href="mailto:hello@wallabyjs.com" target="_blank">email to Wallaby support</a>,</li>
            <li><a href="https://wallabyjs.com/chat/" target="_blank">chat message</a> in our Discord channel.</li>
            </ul>`,onClick:()=>e.copyDiagnosticsReport()})}class jke extends CustomEvent{constructor(){super("beforeErrorHighlight",{bubbles:!0,composed:!0})}}class Jke extends CustomEvent{constructor(){super("afterErrorHighlight",{bubbles:!0,composed:!0})}}function Nh(n,e){const[t,i]=e().controller,s=e().prefix,r=new G9(n);let o=0,a=0,l,c;const d=h=>{if(o>0&&h.target){const f=h.target.querySelectorAll(".search-result");if(f.length>0){let g=f[0];const m=parseInt(g.getAttribute("data-search")||"0");g=f[f.length-1];const p=parseInt(g.getAttribute("data-search")||"0");m>0&&p>0&&(c={start:m,end:p})}}},u=h=>{if(l&&o>0&&c&&h.target){let f=c.start;new G9(h.target).mark(l,{className:"search-result",acrossElements:!1,separateWordSearch:!1,each:g=>{f<=c.end&&(g.id=`${s}_${f}`,o===f&&g.classList.add("search-result-active"),f++)}})}c=void 0};n.addEventListener("beforeErrorHighlight",d),Ot(()=>n.removeEventListener("beforeErrorHighlight",d)),n.addEventListener("afterErrorHighlight",u),Ot(()=>n.removeEventListener("afterErrorHighlight",u)),i({search:h=>{let f;const g=new Promise(m=>f=m);return l=h,h?r.unmark({done:()=>{r.mark(h,{className:"search-result",acrossElements:!1,separateWordSearch:!1,noMatch:()=>{o=0,a=0,f(void 0)},each:m=>{o++,o===1&&m.classList.add("search-result-active"),m.id=`${s}_${o}`,m.setAttribute("data-search",o.toString())},done:m=>{o=1,a=m;const p=n.querySelector(`#${s}_${o}`);p&&cy(p),f({current:1,total:m})}})}}):o>0?(o=0,a=0,r.unmark({element:"mark",className:"search-result",done:()=>{f(void 0)}})):f(void 0),g},jumpToNext:async()=>{let h=n.querySelector(`#${s}_${o}`);if(h&&h.classList.remove("search-result-active"),o++,o>a&&(o=1),h=n.querySelector(`#${s}_${o}`),h)return h.classList.add("search-result-active"),cy(h),{current:o,total:a}},jumpToPrevious:async()=>{let h=n.querySelector(`#${s}_${o}`);if(h&&h.classList.remove("search-result-active"),o--,o<1&&(o=a),h=n.querySelector(`#${s}_${o}`),h)return h.classList.add("search-result-active"),cy(h),{current:o,total:a}},exit:h=>{let f;const g=new Promise(m=>f=m);if(h){const m=n.querySelector(`#${s}_${o}`);if(m){const p=document.createRange();p.setStartBefore(m);const b=document.getSelection();b?.removeAllRanges(),b?.addRange(p),cy(m)}}return n.firstElementChild?.focus(),o=0,a=0,l=void 0,r.unmark({element:"mark",className:"search-result",done:()=>f()}),g}})}function cy(n){const t=n.closest("[data-id]")?.parentElement?.parentElement?.parentElement;t&&(t.scrollTop=n.offsetTop-t.getBoundingClientRect().height/2)}var $ke=G('<div class="mx-auto my-auto flex h-full w-full items-center justify-center px-3 text-center text-[length:--header-font-size] uppercase tracking-wide text-[var(--subtle-foreground)]">no errors matching the selection'),Qke=G('<div class="mx-auto my-auto flex h-full w-full items-center justify-center px-3 text-center text-[length:--header-font-size] uppercase tracking-wide text-[var(--subtle-foreground)]">no errors'),qke=G('<div data-vscode-context="{&quot;webviewSection&quot;: &quot;viewer&quot;, &quot;preventDefaultContextMenuItems&quot;: false}"class="pt-[0.0625rem] outline-none">'),exe=G('<div class="code mb-[0.5em] flex flex-col border-[var(--panel-view-border)] [&amp;:not(:first-child)]:border-t [&amp;:not(:first-child)]:pt-0.5">'),txe=G('<div class="flex items-center text-[length:--panel-smaller-font-size] [&amp;_.icon]:text-[length:--icon-smallest-font-size] [&amp;_.icon]:opacity-80"><div aria-role="test name"class="flex-grow opacity-80"></div><div class="ml-auto flex items-center justify-center pl-1 pr-[0.0625rem] selection:bg-transparent">'),ixe=G('<div class="[&amp;>del]:text-[var(--token-scope-deleted-foreground)] [&amp;>ins]:text-[var(--token-scope-inserted-foreground)] [&amp;>span.dots]:text-[var(--token-scope-function-foreground)]"aria-role="assert diff">'),nxe=G("<div class=errorForeground>"),sxe=G("<div class=my-2>"),rxe=G("<div>"),oxe=G("<div>Select error <span class=keyboard-shortcut>S</span><br><br>Selecting an error displays it in the current view (with a side-by-side diff if available) and hides all other errors."),axe=G('<div class="errorForeground flex items-center whitespace-break-spaces"><span>'),lxe=G('<div class="flex cursor-pointer items-center text-[length:--panel-subtle-font-size] opacity-80 [&amp;_.codicon]:!text-[length:--icon-smaller-font-size]"aria-role=action><span></span><span class=hover:underline>'),cxe=G("<span>@ "),dxe=G('<div class=tracking-tight><span class="whitespace-pre_ text-[var(--source-context-foreground)]">'),uxe=G('<button class="icon clickableIcon icon-opacity codicon codicon-chevron-down py-[0.15625rem] !text-[length:80%]"tabindex=-1>'),hxe=G('<div class="flex flex-row rounded-[0.1875rem] hover:bg-[var(--input-option-hover-background)]">'),fxe=G('<div class="flex flex-row rounded-[0.1875rem] hover:bg-[var(--input-option-hover-background)]"><button class="icon clickableIcon icon-opacity codicon codicon-chevron-down py-[0.15625rem] !text-[length:80%]"tabindex=-1>');function hV(n){const e=Dt(),[t]=e.appSettings(),i=()=>t.errors.fullSourceLinks,s=()=>t.errors.unmappedFiles,r=()=>t.errors.wordWrap,o=e.getDebuggerStarted(),[a,l]=n.viewerElement,[c,d]=n.revealing;return x(se,{get when(){return n.state.errors},get fallback(){return x(Th,{get children(){return Qke()}})},get children(){return x(se,{get when(){return n.state.selection.error&&!n.state.errors.allById[n.state.selection.error.errorId]},get fallback(){return[(()=>{var u=qke();return u.addEventListener("paste",h=>h.preventDefault()),u.addEventListener("cut",h=>h.preventDefault()),u.$$input=()=>window.document.execCommand("undo"),We(l,u),xt(u,"contenteditable",!0),xt(u,"spellcheck",!1),u.style.setProperty("caret-color","var(--editor-cursor-foreground)"),A(u,()=>{const h=(f,g=!0)=>{const m=J(()=>f().maybeObsolete||n.state.errors?.maybeObsolete&&f().id!==$n),p=J(()=>f().selection);return(()=>{var b=exe();return We(w=>{$e([()=>w,p],()=>{w&&p()?.active&&(d(!0),document.getSelection()?.setPosition(w),a()?.removeAttribute("data-unfocused-scrolling"),w.parentElement?.parentElement?.parentElement&&(w.parentElement.parentElement.parentElement.scrollTop=w.offsetTop),d(!1))})},b),A(b,x(fV,{get error(){return f()},get onSelect(){return n.onSelect},get maybeObsolete(){return m()},selectionAllowed:g,get chosen(){return p()},get showErrorsFullSourceLinks(){return i()},get showUnmappedFileSourceLinks(){return s()},get wordWrap(){return r()},get debuggerStarted(){return o()},get namespace(){return n.namespace}})),Me(w=>{var v=!!m(),_=f().id;return v!==w.e&&b.classList.toggle("opacity-50",w.e=v),_!==w.t&&xt(b,"data-id",w.t=_),w},{e:void 0,t:void 0}),b})()};return x(se,{get when(){return!n.state.selection.error},get fallback(){return h(()=>n.state.errors.allById[n.state.selection.error.errorId],!1)},get children(){return[x(yd,{get each(){const f=n.state.errors.all.findIndex(g=>g.test);return n.state.errors.all.slice(0,f>-1?f:void 0)},by:f=>f.id,children:f=>h(f)}),x(yd,{get each(){return Object.values(n.state.errors.allById||{}).filter(f=>f.test)},by:f=>f.id,children:f=>h(f)})]}})}),Me(()=>xt(u,"data-namespace",`${n.namespace}.errors.content.viewer`)),u})(),J(()=>n.append)]},get children(){return $ke()}})}})}function fV(n){const[e,t]=he(!1),i=Dt(),[s]=i.appSettings(),r=n.error.id===$n,o=`${n.namespace}.errors.content.viewer.error.action`,a=J(()=>n.error.formattedMessage?.header.content!==void 0&&n.error.formattedMessage?.body.content?n.error.formattedMessage.header.content:n.error.message),l=J(()=>n.error.formattedMessage?.body.content),c=J(()=>l()&&(n.error.formattedMessage?.body.format==="html"||n.error.formattedMessage?.body.format==="diff")),d=J(()=>e()||!n.error.allowToDisplayFullyTruncated||n.error.selection?.active?!1:(n.error.size||0)>bn.errorSizeBytesToFullyTruncateIfExceeded),u=J(()=>e()?!1:(n.error.size||0)>bn.errorSizeBytesToPartiallyTruncate),h=J(()=>n.error.snapshot?"Large snapshot error":n.error.compactDiffHtml?"Large diff error":DC(a()||"",100)||"Large error message"),f=J(()=>DC(a()||"",bn.errorSizeBytesToPartiallyTruncate)||"Large error message"),g=J(()=>{if(!(s.errors.diff?.compact==="auto"&&n.error.formattedMessage?.body.format==="diff")){if(n.error.compactDiffHtml)return n.error.compactDiffHtml;if(n.error.expected||n.error.actual){const v={expected:n.error.expected,actual:n.error.actual,formattedMessage:n.error.formattedMessage,compactDiffHtml:void 0};return cte(v),v.compactDiffHtml}}}),m=i.isAiAvailable(),[p,b]=he(null);let w;return $e([c,p,l],()=>{if(c()&&p()){w?.stop();const v=p().closest(".scrollable,.scrollable_")||p().closest(".tippy-box");v&&(w=The(p,async([{isIntersecting:_}])=>{if(_){w?.stop();const y=l();try{const S=(await w4(n.error.formattedMessage?.body.format==="html"?"svelte":"diff",{lines:y.split(`
`),current:0,frame:{start:0,end:y.length}}))?.lines.map(k=>k!=="<br>"?k:"").join(`
`);if(S){const k=p();k.dispatchEvent(new jke),k.innerHTML=S,k.dispatchEvent(new Jke)}}catch(C){console.error("Error body highlighting failed",C)}}},{root:v,threshold:0}))}}),[x(se,{get when(){return(n.error.test||r||n.error.snapshot||n.error.actual||n.error.expected)&&!n.omitTestName},get children(){var v=txe(),_=v.firstChild,y=_.nextSibling;return A(_,x(se,{get when(){return n.error.test},get fallback(){return n.error.header?`${n.error.header} error`:""},get children(){return x(v4,{get test(){return n.error.test}})}})),xt(y,"contenteditable",!1),A(y,x(se,{when:r,get children(){return x(XC,{namespace:o})}}),null),A(y,x(se,{get when(){return J(()=>!!n.error.snapshot)()&&Lp(n.error.stack)?.file},get children(){return x(Ee,{class:"codicon-device-camera pt-[0.1875rem]",namespace:o,tooltip:"Update test snapshot <span class='keyboard-shortcut'>U</span>",onClick:()=>i.updateSnapshots(Lp(n.error.stack))})}}),null),A(y,x(se,{get when(){return n.error.test&&n.error.id&&(n.error.actual||n.error.expected)},get children(){return x(Ee,{class:"codicon-diff",namespace:o,get tooltip(){return"Show side-by-side diff <span class='keyboard-shortcut'>V</span>"+i.editorTooltipAddendum("diff")()},onClick:C=>{const{expected:S,actual:k}=uV(n.error);i.showSideBySideDiff({id:n.error.id,test:n.error.test.path,expected:S,actual:k},C)}})}}),null),A(y,x(se,{get when(){return n.namespace==="details"&&!n.debuggerStarted&&n.selectionAllowed},get children(){return x(Ee,{class:"codicon-list-filter !py-0.5 pl-0.5 pr-0.5",namespace:o,get tooltip(){return oxe()},onClick:()=>n.onSelect?.(n.error.id)})}}),null),A(y,x(se,{get when(){return n.namespace==="overview"},get children(){return x(Ee,{class:"codicon-layout-sidebar-right !py-0.5 pl-0.5 pr-0.5",namespace:o,tooltip:'Open error in side view <span class="keyboard-shortcut">S</span>',onClick:()=>{n.error.id&&i.openInSideView(Zt.Errors,{errors:{selection:{errorId:n.error.id}}})}})}}),null),A(y,x(se,{get when(){return n.debuggerStarted&&n.error.traceFrame!==void 0},get children(){return x(Ee,{class:"codicon-debug-line-by-line",namespace:o,tooltip:"Step to error in debugger",onClick:()=>i.stepInDebugger({frame:n.error.traceFrame,playToExactFrame:!0})})}}),null),A(y,x(se,{get when(){return n.error.test&&!n.debuggerStarted},get children(){return x(Ee,{class:"codicon-filter !py-0.5 pl-0.5 pr-0.5",namespace:o,get tooltip(){return n.error.test?.focused?'Unfocus test <span class="keyboard-shortcut">F</span><br/><br/>'+ub:'Focus test <span class="keyboard-shortcut">F</span><br/><br/>'+ub},get classList(){return{"codicon-filter-filled":n.error.test?.focused}},onClick:()=>i.toggleTestFilter(n.error.test.path)})}}),null),A(y,x(se,{get when(){return n.error.test&&!n.debuggerStarted},get children(){return x(Ee,{class:"codicon-debug",namespace:o,tooltip:"Debug test <span class='keyboard-shortcut'>D</span>",onClick:()=>i.debug(n.error.test.path)})}}),null),A(y,x(se,{get when(){return m()&&n.error.test&&!n.debuggerStarted},get children(){return x(mxe,{get error(){return n.error},namespace:o})}}),null),A(y,x(gxe,{get error(){return n.error},namespace:o}),null),Me(C=>{var S=!!n.chosen?.marked,k=!!n.maybeObsolete;return S!==C.e&&_.classList.toggle("animate-hightlight",C.e=S),k!==C.t&&y.classList.toggle("invisible",C.t=k),C},{e:void 0,t:void 0}),v}}),x(se,{get when(){return!d()},get fallback(){return(()=>{var v=axe(),_=v.firstChild;return A(v,x(Ee,{class:"codicon-cloud-download -ml-[0.1875rem] mr-0.5 !text-[--foreground]",tooltip:"Show full error",onClick:()=>{t(!0)}}),_),A(_,h),v})()},get children(){return[x(se,{get when(){return g()},get children(){var v=ixe();return Me(_=>{var y=!!n.wordWrap,C=!n.wordWrap,S=g();return y!==_.e&&v.classList.toggle("whitespace-break-spaces",_.e=y),C!==_.t&&v.classList.toggle("whitespace-pre",_.t=C),S!==_.a&&(v.innerHTML=_.a=S),_},{e:void 0,t:void 0,a:void 0}),v}}),(()=>{var v=nxe();return A(v,(()=>{var _=J(()=>!!u());return()=>_()?[J(f)," ",x(Ee,{class:"codicon-cloud-download mb-[0.1875rem] ml-0.5 align-middle !text-[--foreground]",tooltip:"Show full error",onClick:()=>{t(!0)}})]:a()})()),Me(_=>{var y=!!n.wordWrap,C=!n.wordWrap;return y!==_.e&&v.classList.toggle("whitespace-break-spaces",_.e=y),C!==_.t&&v.classList.toggle("whitespace-pre",_.t=C),_},{e:void 0,t:void 0}),v})(),x(se,{get when(){return n.actions?.length},get children(){var v=sxe();return A(v,x(ln,{get each(){return n.actions},children:_=>(()=>{var y=lxe(),C=y.firstChild,S=C.nextSibling;return Yh(S,"click",_.action,!0),A(S,()=>_.name),Me(()=>mr(C,`codicon pr-1 ${_.class}`)),y})()})),v}}),x(se,{get when(){return l()},get children(){var v=rxe();return We(b,v),A(v,l),Me(_=>{var y=!!n.wordWrap,C=!n.wordWrap;return y!==_.e&&v.classList.toggle("whitespace-break-spaces",_.e=y),C!==_.t&&v.classList.toggle("whitespace-pre",_.t=C),_},{e:void 0,t:void 0}),v}})]}}),x(Jp,{get each(){return J(()=>!!(n.showUnmappedFileSourceLinks||!n.error.test&&n.error.noMappedStack))()?n.error.stack:n.error.stack.filter(v=>!v.notMappedFile)},children:v=>(()=>{var _=dxe(),y=_.firstChild;return A(y,()=>v().context),A(_,x(se,{get when(){return v().file},get children(){return[cxe(),x(fh,{get classList(){return{"[&_span]:!no-underline":n.maybeObsolete,"!cursor-default":n.maybeObsolete,"!text-[var(--subtle-foreground)]":n.maybeObsolete,"opacity-70":v().notMappedFile}},codeFragmentTooltipOptions:()=>!n.maybeObsolete&&v().file&&v().line?{file:v().file,line:v().line,column:v().column,navigatable:!0}:void 0,get value(){return v()},get compactFileNameOnly(){return!n.showErrorsFullSourceLinks},textModeOptions:{addSpace:!0,contentEditable:!0}})]}}),null),Me(C=>{var S=!!n.wordWrap,k=!n.wordWrap;return S!==C.e&&_.classList.toggle("whitespace-break-spaces",C.e=S),k!==C.t&&_.classList.toggle("whitespace-pre",C.t=k),C},{e:void 0,t:void 0}),_})()})]}function gxe(n){const e=Dt(),[t,i]=he(!1),s=f=>e.navigate(l(),f),r=f=>e.navigate(d(),f),o=f=>e.navigate(c(),f),a=f=>e.navigate(n.error.test?.location,f),l=()=>Lp(n.error.stack),c=()=>n.error.stack.find(f=>!f.notMappedFile&&f.file!==n.error.test?.location?.file),d=()=>n.error.test?.location&&[...n.error.stack].reverse().find(f=>!f.notMappedFile&&f.file===n.error.test.location.file),u=()=>!!n.error.test?.location,h=()=>{const f=[];return c()||d()?(c()&&f.push({text:"Open error in source",action:o}),d()&&f.push({text:"Open error in test",action:r})):f.push({text:"Open error",action:s,shortcut:"Enter"}),n.error.test?.location&&f.push({text:"Open test definition",action:a}),f};return x(se,{get when(){return l()},get children(){var f=hxe();return A(f,x(Ee,{class:"codicon-go-to-file pl-[0.09375rem] pr-[0.21875rem]",get classList(){return{"mr-[-0.075rem]":u()}},get namespace(){return n.namespace},get tooltip(){return"Open error line in editor <span class='keyboard-shortcut'>Enter</span>"+e.editorTooltipAddendum()()},onClick:s}),null),A(f,x(se,{get when(){return u()},get children(){var g=uxe();return We(Te,g,()=>Te&&{content:"More open options"}),g.$$click=()=>i(!t()),We(xh,g,()=>xh&&{menuItemFactory:h,menuOpen:[t,i]}),Me(()=>xt(g,"data-namespace",n.namespace)),g}}),null),f}})}function b5(n,e,t){return()=>n.investigateWithAi({...t,testData:{path:t.test.path,file:t.test?.location?.file}},mke(e,t,t.test.path))}function mxe(n){const e=Dt(),[t,i]=he(!1),s=b5(e,"investigation",n.error),r=b5(e,"directFix",n.error),o=b5(e,"analyticalFix",n.error),a=()=>[{text:"Analytical fix",action:o,shortcut:"Agent mode"},{text:"Direct fix",action:r,shortcut:"Agent mode"},{text:"Investigation only",action:s,shortcut:"Agent mode"}];return(()=>{var l=fxe(),c=l.firstChild;return A(l,x(Ee,{class:"codicon-copilot mr-[-0.075rem] pb-[0.17625rem] pt-[0.12625rem]",get namespace(){return n.namespace},tooltip:`Investigate error with AI<br/><br/>${Dge}`,onClick:o}),c),We(Te,c,()=>Te&&{content:"More open options"}),c.$$click=()=>i(!t()),We(xh,c,()=>xh&&{menuItemFactory:a,menuOpen:[t,i]}),Me(()=>xt(c,"data-namespace",n.namespace)),l})()}dn(["input","click"]);var pxe=G("<div>Select most recent error<br><br>Selecting an error displays it in the current view (with a side-by-side diff if available) and hides all other errors."),bxe=G('<div class="panel-font-size absolute inset-0 flex flex-col pl-2.5 pr-1"data-namespace=details.errors.content>'),vxe=G('<div class="h-full w-full outline-none"tabindex=-1 data-namespace=details.errors>'),_xe=G('<div class="h-full w-full flex-grow [&amp;_.monaco-editor-background]:bg-[var(--panel-view-background)] [&amp;_.monaco-editor]:bg-[var(--panel-view-background)] [&amp;_.monaco-editor_.margin]:bg-[var(--panel-view-background)] monaco-colors-container">');function wxe(n){const e=lu(),t=Dt(),[i,s]=t.appSettings(),r=t.getSideViewTab(),o=()=>i.errors.fullSourceLinks,a=()=>i.errors.unmappedFiles,l=()=>i.errors.wordWrap,c=()=>i.errors.diff?.compact!=="auto",d=he(),[u]=d,h=he(!1),[f]=h,g=t.getFindState(),[m,p]=he(),b=he(),[w]=b,v=J(()=>{if(n.state.selection.error||n.state.errors?.all.length===1){const E=n.state.selection.error?n.state.errors?.allById?.[n.state.selection.error.errorId]:n.state.errors?.all[0];if(E&&E?.actual!=null&&E?.expected!=null){const{expected:W,actual:P}=uV(E);return{expected:W,actual:P}}}}),_=()=>!!i.errors.diff?.wordWrap,y=()=>!!i.errors.diff?.useInlineViewWhenSpaceIsLimited,C=()=>!!i.errors.diff?.hideUnchangedRegions,[S,k]=he(void 0,{equals:()=>!1}),[I,T]=he(void 0,{equals:()=>!1}),D=()=>{const E=[];return E.push({text:"Display non-user code stack entries",action:()=>s("errors","unmappedFiles",!a()),checked:a()}),E.push({text:"Display file path in source links",action:()=>s("errors","fullSourceLinks",!o()),checked:o()}),E.push({text:"Display intra-line diff only if no line diff is available",action:()=>s("errors",Gt(W=>{W.diff||(W.diff={}),W.diff.compact=c()?"auto":"always"})),checked:!c()}),E};Bn(()=>{e.trackErrors(),n.icons([x(se,{get when(){return J(()=>!!n.state.errors?.all.length)()&&!t.getDebuggerStarted()()},get children(){return x(Ee,{class:"codicon-list-filter",get classList(){return{activeIcon:!!n.state.selection.error}},onClick:()=>{n.state.selection.error?e.syncErrorSelection():e.syncErrorSelection({errors:{selection:{errorId:n.state.errors?.all.length&&n.state.errors?.all[0].id||""}}}),u()?.focus()},tabIndex:0,namespace:"details.errors.header.action",get tooltip(){return J(()=>!n.state.selection.error)()?pxe():"Show all errors"}})}}),x(Ee,{class:"codicon-word-wrap",get classList(){return{activeIcon:l()}},onClick:()=>s("errors","wordWrap",!l()),tabIndex:0,namespace:"details.errors.header.action",tooltip:"Toggle word wrap in error messages"}),x(Ee,{menuItems:D,class:"codicon-ellipsis",tabIndex:0,namespace:"details.errors.header.action",tooltip:"More actions"})])}),Ot(()=>{e.untrackErrors()}),$e(()=>r().state,E=>{E&&e.syncErrorSelection(E)});let M=t.getDebuggerStarted()();return $e(t.getDebuggerStarted(),E=>{M!==E&&(M=E,e.syncErrorSelection())}),(()=>{var E=vxe();return A(E,x(jr,{class:"foreground h-full w-full",direction:"column",get children(){return[x(ji,{defaultState:{size:50},get id(){return Ue.SideViewErrorsViewer},get children(){return x(m0,{onVerticalScroll:W=>{W>0&&!f()&&u()&&(document.hasFocus()?u()?.hasAttribute("data-unfocused-scrolling")&&u()?.removeAttribute("data-unfocused-scrolling"):u()?.setAttribute("data-unfocused-scrolling","true"))},get overlays(){return[x(Jd,{onUpdateSearchTerm:async W=>{const P=await w()?.search(W);p(P?{searchTerm:W,current:P?.current,total:P?.total}:void 0)},onNextResult:async()=>{const W=await w()?.jumpToNext();p(W?{current:W?.current,total:W?.total}:void 0)},onPreviousResult:async()=>{const W=await w()?.jumpToPrevious();p(W?{current:W?.current,total:W?.total}:void 0)},onClose:async W=>{await w()?.exit(W),t.closeFind()},searchStatus:m,isVisible:()=>g()?.namespace==="details.errors",mode:()=>"enter"})]},get children(){var W=bxe();return We(Nh,W,()=>Nh&&{controller:b,prefix:"de"}),A(W,x(hV,{get state(){return n.state},namespace:"details",viewerElement:d,revealing:h,onSelect:P=>e.syncErrorSelection({errors:{selection:{errorId:P}}}),get append(){return x(p0,{get state(){return n.state.displayLimits?.errors},handler:()=>e.loadRestOfErrors()})}})),W}})}}),x(se,{get when(){return v()},get children(){return x(ji,{defaultState:{size:50},get id(){return Ue.SideViewErrorsDetails},get children(){return x($r,{header:"Expected vs Actual",headerClass:"pl-2 [&_span]:!pl-0",contentClass:"w-full text-[length:--panel-font-size]",namespace:"details.errors.diff",tabIndex:0,get icons(){return[x(Ee,{class:"codicon-arrow-up",tooltip:"Previous change <span class='keyboard-shortcut'>P</span>",namespace:"details.errors.diff.header.action",onClick:()=>{T()},tabIndex:0}),x(Ee,{class:"codicon-arrow-down",namespace:"details.errors.diff.header.action",tooltip:"Next change <span class='keyboard-shortcut'>N</span>",onClick:()=>{k()},tabIndex:0}),x(Ee,{class:"codicon-word-wrap",namespace:"details.errors.diff.header.action",get classList(){return{activeIcon:_()}},onClick:()=>{s("errors",Gt(W=>{W.diff||(W.diff={}),W.diff.wordWrap=!W.diff.wordWrap}))},tabIndex:0,tooltip:"Toggle word wrap"}),x(Ee,{class:"codicon-diff",namespace:"details.errors.diff.header.action",get classList(){return{activeIcon:!y()}},tooltip:`Toggle forcing side-by-side diff view<br/><br/>${CQ}`,onClick:()=>{s("errors",Gt(W=>{W.diff||(W.diff={}),W.diff.useInlineViewWhenSpaceIsLimited=!W.diff.useInlineViewWhenSpaceIsLimited}))},tabIndex:0}),x(Ee,{get classList(){return{"codicon-map":!C(),"codicon-map-filled":C()}},namespace:"details.errors.diff.header.action",tooltip:"Toggle collapsing unchanged regions",onClick:()=>{s("errors",Gt(W=>{W.diff||(W.diff={}),W.diff.hideUnchangedRegions=!W.diff.hideUnchangedRegions}))},tabIndex:0})]},get children(){return x(yxe,{get diff(){return v()},get options(){return{wrapWord:_(),useInlineViewWhenSpaceIsLimited:y(),hideUnchangedRegions:C()}},prevChange:I,nextChange:S,onEscape:()=>u()?.focus()})}})}})}})]}})),E})()}const yxe=n=>{let e,t;Bn(async()=>{try{const{monaco:s,inject:r}=await Oa(()=>Promise.resolve().then(()=>Pw),void 0,import.meta.url);t=i(s),await r();const o=n.diff.actual,a=n.diff.expected;t.setModel({original:s.editor.createModel(a||"","text/plain"),modified:s.editor.createModel(o||"","text/plain")}),t.addCommand(s.KeyCode.KeyP,()=>t?.goToDiff("previous"),"!findWidgetVisible && isInDiffEditor"),t.addCommand(s.KeyCode.KeyN,()=>t?.goToDiff("next"),"!findWidgetVisible && isInDiffEditor"),t.addCommand(s.KeyCode.Escape,()=>n.onEscape?.(),"!editorHasSelection && !editorHasMultipleSelections && !findWidgetVisible && isInDiffEditor"),t?.revealFirstDiff()}catch(s){console.error("Could not initialize Monaco",s)}}),Ot(()=>{const s=t?.getModel();s?.modified.dispose(),s?.original.dispose(),t?.dispose()}),$e([()=>n.diff],()=>{const s=n.diff.actual,r=n.diff.expected;if(!s&&!r)return;const o=t?.getModel();o&&(o.original.getValue()!==r&&o.original.setValue(r),o.modified.getValue()!==s&&o.modified.applyEdits([{range:o.modified.getFullModelRange(),text:s}]))},{defer:!0}),$e([n.prevChange],()=>{t?.goToDiff("previous")},{defer:!0}),$e([n.nextChange],()=>{t?.goToDiff("next")},{defer:!0}),$e([()=>n.options.wrapWord,()=>n.options.useInlineViewWhenSpaceIsLimited,()=>n.options.hideUnchangedRegions],()=>{t?.updateOptions({wordWrap:n.options.wrapWord?"on":"off",useInlineViewWhenSpaceIsLimited:n.options.useInlineViewWhenSpaceIsLimited,hideUnchangedRegions:{enabled:n.options.hideUnchangedRegions}})});const i=s=>{const r=parseFloat(getComputedStyle(document.body)?.getPropertyValue("--panel-font-size").split("px")[0])-1;return s.editor.createDiffEditor(e,{wordWrap:n.options.wrapWord?"on":"off",guides:{indentation:!1},useInlineViewWhenSpaceIsLimited:n.options.useInlineViewWhenSpaceIsLimited,hideUnchangedRegions:{enabled:n.options.hideUnchangedRegions},renderIndicators:!0,lineNumbers:"on",renderLineHighlight:"none",renderMarginRevertIcon:!1,renderGutterMenu:!1,originalEditable:!1,glyphMargin:!1,automaticLayout:!0,minimap:{enabled:!1},contextmenu:!1,quickSuggestions:!1,parameterHints:{enabled:!1},readOnly:!0,fontSize:r,fontFamily:"var(--editor-font-family)",padding:{top:9},scrollbar:{horizontalScrollbarSize:13,verticalScrollbarSize:13,horizontal:"hidden",vertical:"visible"},tabIndex:0,matchBrackets:"never",cursorBlinking:"blink"})};return(()=>{var s=_xe(),r=e;return typeof r=="function"?We(r,s):e=s,s})()};var Sxe=G('<div class="absolute inset-0 flex flex-col">'),Cxe=G('<div class="relative h-full w-full"><div class="panel-font-size absolute inset-0 overflow-y-auto">');function Lxe(n){const e=lu(),t=Dt(),i=Bg(),[s,r]=t.appSettings(),o=()=>s.logs.fullSourceLinks,a=()=>s.logs.headers,l=()=>s.logs.context,c=()=>t.getDebuggerStarted()(),[d,u]=he(void 0,{equals:!1}),[h,f]=he(!1),g=t.getFindState(),[m,p]=he(),b=he(),[w]=b,[v,_]=he();Bn(()=>{e.trackLogs()});const y=()=>{const k=[];return c()||k.push({text:"Display log test headers",action:()=>r("logs","headers",!a()),checked:a()}),k.push({text:"Display file name in source links",action:()=>r("logs","fullSourceLinks",!o()),checked:o()}),k.push({text:"Display value context when available",action:()=>r("logs","context",!l()),checked:l()}),k};$e(v,()=>{const k=v();k?n.icons(x(ln,{each:k,children:I=>I})):n.icons([x(Ee,{class:"codicon-fold-up",onClick:()=>u(),tabIndex:0,namespace:"details.logs.header.action",tooltip:"Fold all expanded log entries"}),x(Ee,{menuItems:y,class:"codicon-ellipsis",tabIndex:0,namespace:"details.logs.header.action",tooltip:"More actions"})])}),$e(()=>n.state.logs,k=>{k&&f(!0)}),$e([()=>t.getSideViewTab()().state,h],()=>{const k=t.getSideViewTab()().state;k&&h()&&e.syncLogSelection(k)}),Ot(()=>{e.untrackLogs()});const[C,S]=he();return(()=>{var k=Cxe(),I=k.firstChild;return A(I,x(m0,{scrollable:C,namespace:"details.logs",get overlays(){return[x(Jd,{onUpdateSearchTerm:async T=>{const D=await w()?.search(T);p(D?{searchTerm:T,current:D?.current,total:D?.total}:void 0)},onNextResult:async()=>{const T=await w()?.jumpToNext();p(T?{current:T?.current,total:T?.total}:void 0)},onPreviousResult:async()=>{const T=await w()?.jumpToPrevious();p(T?{current:T?.current,total:T?.total}:void 0)},onClose:async T=>{await w()?.exit(T),t.closeFind()},searchStatus:m,isVisible:()=>g()?.namespace==="details.logs",mode:()=>"enter"})]},get children(){var T=Sxe();return We(Wc,T,()=>Wc&&{controller:b,prefix:"dl"}),A(T,x(ow,{get state(){return n.state},service:i,namespace:"details",get onFocus(){return n.onFocus},foldAllOpenedLogs:d,scrollableElementRef:S,get append(){return x(p0,{get state(){return n.state.displayLimits?.logs},handler:()=>e.loadRestOfLogs()})},icons:_})),T}})),k})()}function gte(n){const t=Dt().getStatus(),i=()=>{const s=["idle","configurationError","pendingCannotDetermineTestsToRun","pendingInvalidSyntax","pendingSmartStart"],r=t().state;return!s.includes(r)};return x(se,{get when(){return i()},get children(){return x(Ee,{class:"text-[--editor-warning-foreground] hover:!bg-[unset] cursor-auto codicon-loading codicon-modifier-spin"})}})}function kxe({onlyFirst:n=!1}={}){const e=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(e,n?void 0:"g")}const xxe=kxe();function Txe(n){if(typeof n!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof n}\``);return n.replace(xxe,"")}const mz={diagnosticsCopied:n=>({type:"log",message:"Diagnostics report has been successfully copied to clipboard."}),console:n=>({type:"log",message:`console.${n.type}: ${n.message}`}),invalidBabelVersion:n=>({type:"error",message:`Babel version for compiler must be >= ${n.minVersion}`}),genericError:n=>({type:"error",message:n.message}),genericWarning:n=>({type:"warn",message:n.message}),secureLinkToLaunchLegacyUiService:n=>({type:"log",message:`To launch Wallaby App, open this link in your browser: ${n.url}`}),nodeRunnerStdErr:n=>({type:"error",message:n.message}),possiblyIncompatiblePatch:n=>({type:"warn",message:n.message}),uiServiceReady:n=>({type:"log",message:n.port?`Wallaby Linked Mode is available at http://localhost:${n.port}`:"Wallaby App (realtime reports) is available at http://localhost:51245"}),cannotDetermineTestsToRun:n=>{let e="Can't determine tests to run for the change.";return n.onlyRunSelectedTestFiles||(n.runAllTestsWhenNoAffectedTests?e+="\nTo prevent the full test run when can not determine tests to run, use `runAllTestsWhenNoAffectedTests: false` configuration option.":e+="\nTo run all tests when can not determine tests to run, use `runAllTestsWhenNoAffectedTests: true` configuration option."),{type:"log",message:e}},longRunningSetupTeardown:n=>({type:"warn",message:`Some long running code has been detected: ${n.type==="setup"?"Global Setup":"Global Teardown"}`}),finishedExecuting:n=>{let e=n.duration,t="millisecond(s)";return e>1e3&&(e=e/1e3,t="second(s)",e>60&&(e=e/60,t="minute(s)")),{type:"log",message:`Finished executing ${n.numberTests} affected test(s) in ${Math.round(e*100)/100} ${t}`}},testProgress:n=>({type:"log",message:n.message}),waitingForGlobalSetupTeardown:n=>({type:"log",message:`[${n.sessionId}] Global Setup and Teardown is not complete, waiting for ${n.timeoutMs}ms before recycling worker`}),recyclingWorker:n=>({type:"error",message:`[${n.sessionId}] ${n.reason}, recycling worker.`}),postProcessorLog:n=>({type:"log",message:n.message}),startupInfo:n=>({type:"log",message:n.message}),testTask:n=>({type:"log",message:n.message})};var Dxe=G('<div class="h-full w-full flex-grow monaco-colors-container [&amp;_.monaco-editor-background]:bg-[var(--panel-view-background)] [&amp;_.monaco-editor]:bg-[var(--panel-view-background)] [&amp;_.monaco-editor_.margin]:bg-[var(--panel-view-background)]">');function mte(n){let e;const t=new Set,i=Dt(),[s,r]=i.appSettings(),o=()=>s.consoleOutput.autoScroll,a=()=>s.consoleOutput.wordWrap||l(),[l,c]=he(n.wordWrap),d=i.getDiagnosticMessagesEmitter();let u,h;const f=[],g=b=>{if(!h||!u)return;const w=h.getModel();b.forEach(v=>{if(!mz[v.name])return;const _=mz[v.name](v);if(!_)return;if(f.length>1e4){const D=f.shift();w.applyEdits([{range:new u.Range(1,0,D,0),text:null}])}const y=w.getLineCount(),C=w.getLineLength(y),S=new u.Range(y,C+1,y,C+1),k=new Date(v.time).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3}),I=_.type==="error"?"[ERROR]":_.type==="log"?"[INFO]":"[WARN]",T=Txe(_.message);if(T){const D=T.split(`
`);f.push(D.length+2),w.applyEdits([{range:S,text:`${k} ${I} ${T}
`}])}}),o()&&h.revealLine(w.getLineCount())},m=b=>{g(b),d.on("incremental",g)},p=b=>{const w=b.editor.createModel("","console"),v=parseFloat(getComputedStyle(document.body)?.getPropertyValue("--panel-font-size").split("px")[0])-1;return b.editor.create(e,{model:w,automaticLayout:!0,minimap:{enabled:!1},contextmenu:!1,quickSuggestions:!1,parameterHints:{enabled:!1},readOnly:!0,fontSize:v,fontFamily:"var(--editor-font-family)",renderLineHighlightOnlyWhenFocus:!0,renderLineHighlight:"line",matchBrackets:"never",glyphMargin:!1,lineNumbers:"off",folding:!1,detectIndentation:!1,guides:{indentation:!1,bracketPairs:!1,bracketPairsHorizontal:!1,highlightActiveBracketPair:!1,highlightActiveIndentation:!1},wordWrap:a()?"on":"off"})};return Bn(async()=>{try{const{monaco:b,inject:w}=await Oa(()=>Promise.resolve().then(()=>Pw),void 0,import.meta.url),v=p(b);await w(),u=b,h=v,h.addCommand(u.KeyCode.Escape,()=>i.focus("editor"),"!editorHasSelection && !editorHasMultipleSelections && !findWidgetVisible"),i.trackDiagnosticMessages(),d.once("initial",m)}catch(b){console.error("Could not initialize Monaco",b)}}),Ot(()=>{h&&(i.untrackDiagnosticMessages(),d.off("initial",m),d.off("incremental",g),t.forEach(b=>b.dispose()),h.getModel()?.dispose(),h.dispose())}),$e([a],()=>{h&&h.updateOptions({wordWrap:a()?"on":"off"})}),x($r,{get header(){return n.header||"Console"},headerClass:"pl-2",get icons(){return[x(Ee,{class:"codicon-clear-all",onClick:()=>{if(!h||!u)return;const b=h.getModel();b&&(b.applyEdits([{range:new u.Range(1,0,b.getLineCount(),0),text:null}]),i.clearPreviousDiagnosticMessages())},tabIndex:0,get namespace(){return`${n.namespace}.header.action`},tooltip:"Clear Output"}),x(Ee,{class:"codicon-word-wrap",get classList(){return{activeIcon:a()}},onClick:()=>{r("consoleOutput","wordWrap",!a()),n.wordWrap&&c(!a())},tabIndex:0,get namespace(){return`${n.namespace}.header.action`},get tooltip(){return"Turn Word Wrap "+(a()?"Off":"On")}}),x(Ee,{get class(){return o()?"codicon-lock":"codicon-unlock"},onClick:()=>r("consoleOutput","autoScroll",!o()),tabIndex:0,get namespace(){return`${n.namespace}.header.action`},get tooltip(){return"Turn Auto Scrolling "+(o()?"Off":"On")}})]},contentClass:"top-7",get children(){var b=Dxe(),w=e;return typeof w=="function"?We(w,b):e=b,b}})}var Ixe=G("<div>"),Mxe=G('<span class="codicon codicon-circle cursor-auto">'),Exe=G('<svg class=text-[--editor-warning-foreground] width=13 height=13 viewBox="0 0 13 13"><circle cx=6.5 cy=6.5 r=5.5 fill=none stroke=currentColor stroke-width=1 stroke-dasharray=44 stroke-dashoffset=44>'),Nxe=G('<span class="codicon codicon-circle-filled icon-opacity text-[--testing-icon-failed]">'),Rxe=G('<span class="codicon codicon-circle-filled icon-opacity text-[--testing-icon-passed]">'),Wxe=G('<div class="mx-1 pt-[0.08rem] text-right font-mono text-[length:80%] text-[var(--subtle-foreground)]">(<!>)'),Axe=G('<div class="mx-1 flex cursor-pointer items-center text-[--editor-warning-foreground]"><span class="codicon codicon-watch pr-0.5">'),Fxe=G("<span class=px-[0.12rem]>/"),Vxe=G("<div class=cursor-pointer>"),Pxe=G('<div class="flex h-[--panel-item-height] items-center truncate pl-3 outline-none hover:bg-[var(--list-hover-background)] [&amp;_.codicon]:text-[length:--panel-font-size]"><div class="flex h-[--panel-item-height] cursor-pointer items-center"></div><div class="min-w-0 flex-grow cursor-pointer overflow-hidden text-ellipsis whitespace-nowrap pl-1"></div><div class="mx-1 pt-[0.08rem] font-mono text-[length:80%]"></div><div class=mx-1>'),Oxe=G('<span class="codicon codicon-loading codicon-modifier-spin cursor-auto text-[--editor-warning-foreground]">'),kv=G('<div class="codicon codicon-loading codicon-modifier-spin icon-opacity">'),Zxe=G("<div class=ml-2>Post Processing Files"),Gxe=G('<div class="mx-1 text-right font-mono lowercase">(<!>)'),Bxe=G("<div class=ml-2>Loading Configuration"),Xxe=G("<div class=ml-2>Discovering Testing Framework"),zxe=G("<div class=ml-2>Scanning File System"),Hxe=G("<div class=ml-2>Loading Project"),Uxe=G('<div class="ml-2 text-center"><p>Cannot start due to syntax errors,</p><p>please fix any syntax errors.'),Yxe=G("<div class=ml-2>Cannot Determine Tests to Run"),Kxe=G('<div class="ml-2 text-center"><p>Started with Smart Start,</p><p>Open or edit a file to start running tests.'),jxe=G("<div class=ml-2>An error occurred when starting Wallaby"),Jxe=G('<div class="mx-auto my-auto flex h-full w-full items-center justify-center px-3 text-center text-[length:--header-font-size] uppercase tracking-wide text-[var(--subtle-foreground)]">'),$xe=G("<div class=ml-2>Starting Wallaby"),Qxe=G('<div class="absolute top-0 h-[1.875rem] w-full pl-2 shadow-[--widget-shadow]"><div class="flex w-full text-[length:--small-header-font-size] font-bold leading-[1.875rem] uppercase"><div class=flex-1><div class="header-tracking select-none flex items-center"><span class=truncate>CHANGE / ACTION RELATED TEST FILES</span></div></div><div class=w-20><div class="header-tracking select-none flex items-center justify-end mx-1"><span class="mx-1 truncate"># TESTS'),qxe=G('<div class="scrollable absolute bottom-0 top-[1.875rem] w-full overflow-y-auto pb-1"><div>');function e2e(n){const e=Date.now(),[t,i]=he(n.displayAfter<e);return t()||Fi(()=>{const s=setTimeout(()=>{i(!0)},Math.max(0,n.displayAfter-e));Ot(()=>clearTimeout(s))}),(()=>{var s=Ixe();return A(s,()=>t()?n.children:null),s})()}const t2e=n=>{const[e,t]=he(0),[i,s]=he(0);$e(()=>n.testFile.estimatedCompletionTime,()=>{if(n.testFile.estimatedCompletionTime!==void 0){const o=n.testFile.estimatedCompletionTime,a=o-Date.now();if(a>0){t(a),s(a);const l=setTimeout(()=>{t(0)},a),c=setInterval(()=>{const d=Math.max(0,o-Date.now());s(o-Date.now()),d===0&&clearInterval(c)},50);Ot(()=>{clearTimeout(l),clearInterval(c)})}else t(0),s(0)}});const r=J(()=>{switch(n.testFile.status){case"notStarted":return"<b>Test file execution has not started</b><br>"+n.testFile.path;case"running":const o="<b>Test file execution in progress</b>: "+n.testFile.path;return n.testFile.numberOfTests===0?o:o+`<br><br><b>Pending</b>: ${n.testFile.numberOfTests-n.testFile.numberOfPassingTests-n.testFile.numberOfFailingTests}<br><b>Failing</b>: ${n.testFile.numberOfFailingTests}<br><b>Passing</b>: ${n.testFile.numberOfPassingTests-n.testFile.numberOfSkippedTests-n.testFile.numberOfTodoTests}<br>`+(n.testFile.numberOfSkippedTests>0?`<b>Skipped</b>: ${n.testFile.numberOfSkippedTests}<br>`:"")+(n.testFile.numberOfTodoTests>0?`<b>Todo</b>: ${n.testFile.numberOfTodoTests}<br>`:"")+`<b>Total</b>: ${n.testFile.numberOfTests}`;case"complete":return"<b>Test file execution complete</b>: "+n.testFile.path+`<br><br><b>Failing</b>: ${n.testFile.numberOfFailingTests}<br><b>Passing</b>: ${n.testFile.numberOfPassingTests-n.testFile.numberOfSkippedTests-n.testFile.numberOfTodoTests}<br>`+(n.testFile.numberOfSkippedTests>0?`<b>Skipped</b>: ${n.testFile.numberOfSkippedTests}<br>`:"")+(n.testFile.numberOfTodoTests>0?`<b>Todo</b>: ${n.testFile.numberOfTodoTests}<br>`:"")+`<b>Total</b>: ${n.testFile.numberOfTests}`}});return(()=>{var o=Pxe(),a=o.firstChild,l=a.nextSibling,c=l.nextSibling,d=c.nextSibling;return We(Te,a,()=>Te&&{content:r()}),A(a,x(Fn,{get children(){return[x(ot,{get when(){return n.testFile.status==="notStarted"},get children(){return Mxe()}}),x(ot,{get when(){return n.testFile.status==="running"},get children(){return x(se,{get when(){return e()>0},get fallback(){return Oxe()},get children(){var u=Exe(),h=u.firstChild;return h.style.setProperty("transform-origin","center"),h.style.setProperty("transform","rotate(-90deg)"),Me(()=>`circle-progress ${e()}ms linear`!=null?h.style.setProperty("animation",`circle-progress ${e()}ms linear`):h.style.removeProperty("animation")),u}})}}),x(ot,{get when(){return n.testFile.status==="complete"&&n.testFile.numberOfPassingTests!==n.testFile.numberOfTests||n.testFile.numberOfFailingTests===n.testFile.numberOfTests},get children(){return Nxe()}}),x(ot,{get when(){return n.testFile.status==="complete"&&n.testFile.numberOfTests!==0&&n.testFile.numberOfPassingTests===n.testFile.numberOfTests},get children(){return Rxe()}})]}})),l.$$click=u=>{u.preventDefault(),u.stopPropagation(),n.navigate({file:n.testFile.path},u,{focus:!1})},A(l,x(h2,{get class(){return n.testFile.status==="notStarted"?"text-[var(--subtle-foreground)]":""},get text(){return n.testFile.path},tooltip:!1})),A(o,x(se,{get when(){return J(()=>n.testFile.status==="running")()&&i()>0},get children(){var u=Wxe(),h=u.firstChild,f=h.nextSibling;return f.nextSibling,A(u,()=>Cg(i()),f),u}}),c),A(o,x(se,{get when(){return n.testFile.currentlyExecutingTest?.test},get children(){return x(e2e,{get displayAfter(){return n.testFile.currentlyExecutingTest.started+2e3},get children(){return x(se,{get when(){return n.testFile.status==="running"&&n.testFile.currentlyExecutingTest?.test},get children(){var u=Axe();return u.firstChild,We(Te,u,()=>Te&&{content:"Currently executing: "+n.testFile.currentlyExecutingTest.test[n.testFile.currentlyExecutingTest.test.length-1]}),u.$$click=h=>{h.preventDefault(),h.stopPropagation(),n.navigate({file:n.testFile.path,line:n.testFile.currentlyExecutingTest?.location.line,column:n.testFile.currentlyExecutingTest?.location.column},h,{focus:!1})},A(u,()=>n.testFile.currentlyExecutingTest.test[n.testFile.currentlyExecutingTest.test.length-1],null),u}})}})}}),c),We(Te,c,()=>Te&&{content:r()}),A(c,x(se,{get when(){return n.testFile.status!=="notStarted"},get children(){var u=Vxe();return A(u,x(se,{get when(){return n.testFile.status!=="complete"},get children(){return[J(()=>n.testFile.numberOfPassingTests+n.testFile.numberOfFailingTests),x(se,{get when(){return n.testFile.numberOfTests>0},get children(){return Fxe()}})]}}),null),A(u,x(se,{get when(){return n.testFile.numberOfTests>0},get children(){return n.testFile.numberOfTests}}),null),u}})),A(d,x(Ee,{class:"codicon-go-to-file !mt-[0.25em] !pr-[0.21875rem] pl-[0.09375rem]",onClick:u=>{u.preventDefault(),u.stopPropagation(),n.navigate({file:n.testFile.path},u,{focus:!1})},get tooltip(){return"Open in editor"+n.editorTooltipAddendum}})),o})()},i2e=n=>{const[e,t]=he(0),[i,s]=he(0);return $e(()=>n.status,()=>{if(n.status().estimatedCompletionTime!==void 0){const r=n.status().estimatedCompletionTime,o=r-Date.now();if(o>0){t(o),s(o);const a=setTimeout(()=>{t(0)},o),l=setInterval(()=>{const c=Math.max(0,r-Date.now());s(r-Date.now()),c===0&&clearInterval(l)},50);Ot(()=>{clearTimeout(a),clearInterval(l)})}else t(0),s(0)}}),[kv(),Zxe(),x(se,{get when(){return i()>0},get children(){var r=Gxe(),o=r.firstChild,a=o.nextSibling;return a.nextSibling,A(r,()=>Cg(i()),a),r}})]},n2e=n=>(()=>{var e=Jxe();return A(e,x(Fn,{get fallback(){return $xe()},get children(){return[x(ot,{get when(){return n.status().state==="loadingConfigFile"},get children(){return[kv(),Bxe()]}}),x(ot,{get when(){return n.status().state==="testConfigDiscovery"},get children(){return[kv(),Xxe()]}}),x(ot,{get when(){return n.status().state==="fileSystemScan"},get children(){return[kv(),zxe()]}}),x(ot,{get when(){return n.status().state==="loadingProject"},get children(){return[kv(),Hxe()]}}),x(ot,{get when(){return n.status().state==="postProcessing"},get children(){return x(i2e,{get status(){return n.status}})}}),x(ot,{get when(){return n.status().state==="pendingInvalidSyntax"},get children(){return Uxe()}}),x(ot,{get when(){return n.status().state==="pendingCannotDetermineTestsToRun"},get children(){return Yxe()}}),x(ot,{get when(){return n.status().state==="pendingSmartStart"},get children(){return Kxe()}}),x(ot,{get when(){return n.status().state==="configurationError"},get children(){return jxe()}})]}})),e})(),s2e=n=>{const e=Dt(),t=lw(),{list:i,containerProps:s,wrapperProps:r}=Hk(n.testFiles,{overscan:50,itemHeight:t}),[o,a]=he(),l=t0(o);return[(()=>{var c=Qxe();return Me(()=>c.classList.toggle("shadow-header",!!l.y())),c})(),(()=>{var c=qxe(),d=c.firstChild;return Yh(c,"scroll",s.onScroll),We(u=>{a(u),s.ref(u)},c),A(d,x(yd,{get each(){return i()},by:u=>u.data,children:u=>x(t2e,{get testFile(){return u().data},get editorTooltipAddendum(){return e.editorTooltipAddendum()()},navigate:(h,f,g)=>e.navigate(h,f,g)})})),Me(u=>{var h=s.style,f=r().style;return u.e=Dl(c,h,u.e),u.t=Dl(d,f,u.t),u},{e:void 0,t:void 0}),c})()]};function pte(n){const e=Dt();Bn(()=>{e.trackStatus(),e.trackTestRun()}),Ot(()=>{e.untrackStatus(),e.untrackTestRun()});const t=e.getStatus(),i=e.getTestFilesStatus();return x(m0,{get namespace(){return n.namespace},headerClass:"",contentClass:`
  overflow-x-hidden
  [&>div]:leading-[var(--list-item-line-height)]
  [&>div]:border [&>div]:border-transparent
  panel-font-size
  `,get children(){return x(se,{get when(){return t().state==="running"||t().firstTestResultAvailable},get fallback(){return x(n2e,{status:t})},get children(){return x(s2e,{status:t,testFiles:i})}})}})}dn(["click"]);var r2e=G('<div class="h-full w-full outline-none"tabindex=-1 data-namespace=details.status><span class=font-[family-name:--editor-font-family]>');function o2e(n){const e=Dt();return Bn(()=>{e.trackStatus(),n.icons(()=>[x(gte,{}),x(XC,{class:"!pb-[0.0625rem]",tabIndex:0,namespace:"details.status.header.action"})])}),Ot(()=>{e.untrackStatus()}),(()=>{var t=r2e();return t.firstChild,A(t,x(jr,{class:"foreground h-full w-full",direction:"column",get children(){return[x(ji,{defaultState:{size:80},get id(){return Ue.SideViewStatusSummary},get children(){return x(pte,{namespace:"details.status.files"})}}),x(ji,{defaultState:{size:20},get id(){return Ue.SideViewStatusConsole},get children(){return x(mte,{namespace:"details.status.console"})}})]}}),null),t})()}var a2e=G('<div class="mx-auto my-auto flex h-full w-full items-center justify-center px-3 text-center text-[length:--header-font-size] uppercase tracking-wide text-[--subtle-foreground]">'),l2e=G('<div class=item tabindex=-1 data-namespace=details.tests.coverage.item><span class="icon codicon codicon-file">');function pz(n){const e=Dt();return lu(),x($r,{header:"Covered Source Files",get onFocus(){return n.onFocus},headerClass:"pl-2 [&_span]:!pl-0",contentClass:`w-full text-[length:--panel-font-size]
               [&_.item]:w-full
               [&_.item]:flex
               [&_.item]:flex-row
               [&_.item]:cursor-pointer
               [&_.item]:items-center
               [&_.item]:justify-center
               [&_.item]:leading-[--tree-item-line-height]
               [&_.item]:h-[--panel-item-height]
               [&_.item]:pr-2
               [&_.item]:pl-2
               [&_.item]:outline-none

               focus:[&_.item]:bg-[--list-active-selection-background]
               focus:[&_.item]:text-[--list-active-selection-foreground]
               hover:[&_.item]:bg-[--list-hover-background]


               [&_.icon]:pr-1
               [&_.icon]:brightness-75
               [&_.icon]:text-[length:--icon-font-size]

               [&_.path]:grow
               [&_.path]:flex-grow
               [&_.path]:truncate
               [&_.path]:pb-[0.0625rem]`,tabIndex:0,namespace:"details.tests.coverage",tooltip:'Jump to Covered Source Files panel <span class="keyboard-shortcut">J</span>&nbsp;<span class="keyboard-shortcut">C</span>',get icons(){return[x(Ee,{class:"codicon-chevron-down",tooltip:'Collapse "Covered Source Files" panel',tabIndex:0,namespace:"details.tests.coverage.header.action",onClick:()=>{e.setPanelState(n.placement,t=>({...t,collapsed:!0})),n.onFocus?.("details.tests.tree",!0)}})]},get children(){return x(se,{get when(){return n.state.tests.foreground?.tree.selection&&n.state.tests.foreground?.details.coverage.items?.length},get fallback(){return(()=>{var t=a2e();return A(t,()=>n.state.tests.foreground?.tree.selection?"no coverage data for selected item":"no item selected"),t})()},get children(){return x(ln,{get each(){return n.state.tests.foreground?.details.coverage.items},children:t=>(()=>{var i=l2e(),s=i.firstChild;return i.$$click=r=>{e.showFileUncoveredRegions(t.path,t.path,r)},We(Te,s,()=>Te&&{content:t.path}),A(i,x(h2,{class:"path",get text(){return t.path},tooltip:!1}),null),A(i,x(lV,{get coverage(){return t.coverage},file:!0}),null),Me(r=>{var o=!t.coverage?.low,a=!!t.coverage?.low;return o!==r.e&&s.classList.toggle("text-[--testing-icon-passed]",r.e=o),a!==r.t&&s.classList.toggle("text-[--editor-warning-foreground]",r.t=a),r},{e:void 0,t:void 0}),i})()})}})}})}dn(["click"]);var c2e=G('<div class="h-full w-full">');function bz(n){const e=Dt(),[t,i]=e.appSettings(),s=()=>t.errors.fullSourceLinks,r=()=>t.errors.unmappedFiles,o=()=>t.errors.wordWrap,a=he(),[l]=a,c=he(!1),[d]=c,u=e.getFindState(),[h,f]=he(),g=he(),[m]=g;return x($r,{header:"Errors",headerClass:"pl-2 [&_span]:!pl-0",namespace:"details.tests.errors",tooltip:'Jump to Errors panel <span class="keyboard-shortcut">J</span>&nbsp;<span class="keyboard-shortcut">E</span>',onVerticalScroll:p=>{p>0&&!d()&&l()&&(document.hasFocus()?l()?.hasAttribute("data-unfocused-scrolling")&&l()?.removeAttribute("data-unfocused-scrolling"):l()?.setAttribute("data-unfocused-scrolling","true"))},get onFocus(){return n.onFocus},get icons(){return[x(Ee,{class:"codicon-package",get classList(){return{activeIcon:r()}},onClick:()=>i("errors","unmappedFiles",!r()),tabIndex:0,namespace:"details.tests.errors.header.action",tooltip:"Toggle non-user code stack entries display<br/><br/>Non-user code in this context is the code that                     is not instrumented by Wallaby, such as <b>node_modules</b> or files excluded from instrumentation                     in Wallaby config."}),x(Ee,{get classList(){return{"codicon-map":!s(),"codicon-map-filled":s()}},onClick:()=>i("errors","fullSourceLinks",!s()),tabIndex:0,namespace:"details.tests.errors.header.action",get tooltip(){return`${s()?"Hide":"Show"} file path in source links`}}),x(Ee,{class:"codicon-word-wrap",get classList(){return{activeIcon:o()}},onClick:()=>i("errors","wordWrap",!o()),tabIndex:0,namespace:"details.tests.errors.header.action",tooltip:"Toggle word wrap in error messages"}),x(Ee,{class:"codicon-chevron-down",tooltip:'Collapse "Errors" panel',tabIndex:0,namespace:"details.tests.errors.header.action",onClick:()=>{e.setPanelState(n.placement,p=>({...p,collapsed:!0})),n.onFocus?.("details.tests.tree",!0)}})]},contentClass:"ml-2.5 pr-1 panel-font-size",get overlays(){return[x(Jd,{onUpdateSearchTerm:async p=>{const b=await m()?.search(p);f(b?{searchTerm:p,current:b?.current,total:b?.total}:void 0)},onNextResult:async()=>{const p=await m()?.jumpToNext();f(p?{current:p?.current,total:p?.total}:void 0)},onPreviousResult:async()=>{const p=await m()?.jumpToPrevious();f(p?{current:p?.current,total:p?.total}:void 0)},onClose:async p=>{await m()?.exit(p),e.closeFind()},searchStatus:h,isVisible:()=>u()?.namespace==="details.tests.errors",mode:()=>"enter"})]},get children(){var p=c2e();return We(Nh,p,()=>Nh&&{controller:g,prefix:"dte"}),A(p,x(se,{get when(){return n.state.tests.foreground},get children(){return x(hV,{get state(){return n.state.tests.foreground.details},namespace:"details.tests",viewerElement:a,revealing:c})}})),p}})}var d2e=G('<div class="absolute inset-0 flex flex-col">');function vz(n){const e=Dt(),t=lu().tests,[i,s]=e.appSettings(),r=()=>i.logs.fullSourceLinks,o=()=>i.logs.headers,a=()=>i.logs.context,[l,c]=he(void 0,{equals:!1}),[d,u]=he(),h=()=>e.getDebuggerStarted()(),f=e.getFindState(),[g,m]=he(),p=he(),[b]=p,[w,v]=he();return x($r,{header:"Logs",headerClass:"pl-2 [&_span]:!pl-0",scrollable:d,namespace:"details.tests.logs",tooltip:'Jump to Logs panel <span class="keyboard-shortcut">J</span>&nbsp;<span class="keyboard-shortcut">L</span>',get onFocus(){return n.onFocus},get icons(){return w()??[x(se,{get when(){return!h()},get children(){return x(Ee,{class:"rotate-90 scale-x-[-1]",get classList(){return{"codicon-map":!o(),"codicon-map-filled":o()}},onClick:()=>s("logs","headers",!o()),tabIndex:0,namespace:"details.tests.logs.header.action",get tooltip(){return`${o()?"Hide":"Show"} log test headers`}})}}),x(Ee,{get classList(){return{"codicon-map":!r(),"codicon-map-filled":r()}},onClick:()=>s("logs","fullSourceLinks",!r()),tabIndex:0,namespace:"details.tests.logs.header.action",get tooltip(){return`${r()?"Hide":"Show"} file name in source links`}}),x(Ee,{class:"codicon-location",get classList(){return{activeIcon:a()}},onClick:()=>s("logs","context",!a()),tabIndex:0,namespace:"details.tests.logs.header.action",get tooltip(){return`${a()?"Hide value context":"Show value context when it is available"}`}}),x(Ee,{class:"codicon-fold-up",onClick:()=>c(),tabIndex:0,namespace:"details.tests.logs.header.action",tooltip:"Fold all expanded log entries"}),x(Ee,{class:"codicon-chevron-down",tooltip:'Collapse "Logs" panel',tabIndex:0,namespace:"details.tests.logs.header.action",onClick:()=>{e.setPanelState(n.placement,_=>({..._,collapsed:!0})),n.onFocus?.("details.tests.tree",!0)}})]},contentClass:"panel-font-size flex flex-col",get overlays(){return[x(Jd,{onUpdateSearchTerm:async _=>{const y=await b()?.search(_);m(y?{searchTerm:_,current:y?.current,total:y?.total}:void 0)},onNextResult:async()=>{const _=await b()?.jumpToNext();m(_?{current:_?.current,total:_?.total}:void 0)},onPreviousResult:async()=>{const _=await b()?.jumpToPrevious();m(_?{current:_?.current,total:_?.total}:void 0)},onClose:async _=>{await b()?.exit(_),e.closeFind()},searchStatus:g,isVisible:()=>f()?.namespace==="details.tests.logs",mode:()=>"enter"})]},get children(){var _=d2e();return We(Wc,_,()=>Wc&&{controller:p,prefix:"dtl"}),A(_,x(se,{get when(){return n.state.tests.foreground},get children(){return x(ow,{get state(){return n.state.tests.foreground?.details},get service(){return t.logs},namespace:"details.tests",get onFocus(){return n.onFocus},scrollableElementRef:u,foldAllOpenedLogs:l,icons:v})}})),_}})}var u2e=/[^\w\s]/g,h2e=/\s+/g,f2e=/.^/;function g2e(n){return n=n.trim().replace(u2e,""),n?new RegExp(n.replace(h2e,"|"),"gi"):f2e}var _z=n=>{for(const e of n)e.dispose()};function m2e(n,e){const{cacheSize:t=100}=e??{},i=[],s=Zo(),r=()=>i.length>t&&_z(i.splice(0,i.length-t));return Ot(()=>{_z(i),i.length=0}),(o,a)=>{let l=a.exec(o),c=0,d=0;if(!l||!l[0])return[o];const u=[],h=[];do{const f=l[0];let g=i[d];g?(d++,g.set(f)):Kr(m=>{const[p,b]=he(f);g={el:n(p),set:b,dispose:m}},s),c!==l.index&&u.push(o.slice(c,l.index)),u.push(g.el),h.push(g),c=l.index+f.length}while(l=a.exec(o));return i.splice(0,d),u.push(o.slice(c)),Ot(()=>{i.push.apply(i,h),setTimeout(r)}),u}}var p2e=G("<span>"),b2e=G('<svg class=inline-block width=1em height=1em viewBox="0 0 13 13"><circle cx=6.5 cy=6.5 r=5.5 fill=none stroke=currentColor stroke-width=0.8>'),v2e=G('<span class="codicon codicon-loading codicon-modifier-spin cursor-auto">');function bte(n){return x(se,{get when(){return n.progress.isDeterminate},get children(){var e=p2e();return A(e,()=>n.progress.remainingTimeLabel),Me(()=>mr(e,`font-mono ${n.class}`)),e}})}function vte(n){const r=2*Math.PI*5.5,a=`${r*(1-30/360)}`,l="0",c=500,[d,u]=he(null),[h,f]=he(void 0);let g,m=null,p=null,b=null,w=!1;function v(y){const C=getComputedStyle(y).strokeDashoffset,S=parseFloat(C);return Number.isNaN(S)?y.style.strokeDashoffset||a:String(S)}function _(y,C,S=a,k=l){if(C.style.strokeDashoffset=S,y===0){C.style.strokeDashoffset=k;return}m=C.animate([{strokeDashoffset:S},{strokeDashoffset:k}],{duration:y,easing:"linear",fill:"forwards"})}return Fi(()=>{const{isIdle:y,isDeterminate:C,estimatedCompletionTime:S}=n.progress;if(y){u(null),f(void 0),p&&(p.cancel(),p=null),m&&(m.cancel(),m=null),b&&(b.cancel(),b=null),w=!1;return}if(C&&S){if(b)return;if(h()!==S||d()==null){f(S);const k=Math.max(0,S-Date.now());u(k);const I=g;if(!I)return;if(w){const T=v(I);p&&(p.cancel(),p=null),m&&(I.style.strokeDashoffset=T,m.cancel(),m=null),p=I.animate([{strokeDashoffset:T},{strokeDashoffset:T}],{duration:c,easing:"linear",fill:"none"}),p.onfinish=()=>{const D=h(),M=D!=null?Math.max(0,D-Date.now()):d()??0,E=v(I);I.style.strokeDashoffset=E,M>=c*3?(b&&(b.cancel(),b=null),b=I.animate([{strokeDashoffset:T},{strokeDashoffset:a}],{duration:100,easing:"linear",fill:"forwards"}),b.onfinish=()=>{b=null;const W=h(),P=W!=null?Math.max(0,W-Date.now()):d()??0;I.style.strokeDashoffset=a,_(P,I),w=!0}):_(M,I,E,l),w=!0}}else p&&(p.cancel(),p=null),m&&(m.cancel(),m=null),_(k,I),w=!0}}else p&&(p.cancel(),p=null),m&&(m.cancel(),m=null),b&&(b.cancel(),b=null),w=!1}),Ot(()=>{p&&(p.cancel(),p=null),m&&(m.cancel(),m=null),b&&(b.cancel(),b=null)}),x(se,{get when(){return!n.progress.isIdle},get children(){return x(se,{get when(){return n.progress.isDeterminate},get fallback(){return v2e()},get children(){var y=b2e(),C=y.firstChild;return We(S=>{g=S},C),xt(C,"stroke-dasharray",`${r}`),xt(C,"stroke-dashoffset",a),C.style.setProperty("transform-origin","center"),C.style.setProperty("transform","rotate(-90deg)"),y}})}})}var _2e=G('<mark class="border-[--editor-find-match-highlight-border] bg-[--editor-find-match-highlight-background] text-[--editor-find-match-highlight-foreground]">'),w2e=G('<span class="expander codicon">'),y2e=G("<span class=codicon>"),S2e=G('<span class="codicon codicon-kebab-vertical !p-0 !text-[length:--icon-smallest-font-size]">'),C2e=G('<span class=count><span class="failing text-[--error-foreground]"></span><span class=px-[0.22em]>/</span><span class=total>'),L2e=G("<span class=time>"),k2e=G('<span class=time><mark class="border-[--editor-find-match-border] bg-[--editor-find-match-background] text-[--editor-find-match-foreground]">ms'),x2e=G('<div class=item tabindex=-1><div class="header select-none pl-[calc(var(--tree-level)*0.375rem)]"><div class="expander flex items-center justify-center"></div><span class=name></span><div class="side items-center">'),T2e=G('<span class="expander codicon codicon-chevron-right invisible">'),D2e=G('<div class="code flex flex-col">'),I2e=G('<div class="mx-1 my-0.5 overflow-auto px-1 py-0.5">'),M2e=G("<div>"),E2e=G('<div class="border-[var(--panel-view-border)] [&amp;:not(:first-child)]:border-t [&amp;:not(:first-child)]:pt-0.5 [&amp;:not(:last-child)]:mb-[0.5em]">'),N2e=G('<div class="px-1 py-[0.1875rem] [&amp;_button]:!text-[length:--icon-smallest-font-size]">'),R2e=G("<span class=count>"),W2e=G("<span class=count><span class=total>"),A2e=G("<span class=time>ms"),F2e=G('<li class="border-t border-[--menu-separator-background]"><span class=item tabindex=-1><span class="check codicon codicon-check"></span><span class=label>Show Tests Slower Than <!>ms'),V2e=G('<div class="fixed z-[9998] overflow-y-auto rounded-[--menu-border-radius] border border-[--menu-border] bg-[--menu-background] text-[length:--panel-font-size] text-[--menu-foreground] shadow-lg shadow-[--widget-shadow] outline-none [&amp;_.check]:pr-[0.3125rem] [&amp;_.check]:text-[length:--icon-font-size] [&amp;_.check]:!opacity-100 [&amp;_.item]:mx-[0.15625rem] [&amp;_.item]:my-[0.3em] [&amp;_.item]:flex [&amp;_.item]:cursor-pointer [&amp;_.item]:flex-row [&amp;_.item]:items-center [&amp;_.item]:py-[0.2rem] [&amp;_.item]:pl-[0.3125rem] [&amp;_.item]:pr-[1.125rem] [&amp;_.item]:text-[--menu-foreground] [&amp;_.item]:outline-none focus:[&amp;_.item]:rounded-[--menu-border-radius] focus:[&amp;_.item]:border-[--focus-border] focus:[&amp;_.item]:bg-[--menu-selection-background] focus:[&amp;_.item]:text-[--menu-selection-foreground]"tabindex=-1><ul><li><span tabindex=-1 class=item><span class="check codicon codicon-check"></span><span class=label>Show Failed Tests</span></span></li><li><span class=item tabindex=-1><span class="check codicon codicon-check"></span><span class=label>Show Todo Tests</span></span></li><li><span class=item tabindex=-1><span class="check codicon codicon-check"></span><span class=label>Show Skipped Tests</span></span></li><li class="border-t border-[--menu-separator-background]"><span class=item tabindex=-1><span class="check codicon codicon-check invisible"></span><span class=label>Clear Filter '),P2e=G('<div class="relative mb-1 pl-2 pr-[0.4375rem]"><input type=text class="mt-[0.0625rem] w-full truncate rounded-[--input-border-radius] border border-[--panel-view-input-border] bg-[--input-background] py-0.5 pl-1 pr-5 text-[--input-foreground] placeholder-[--editor-code-lens-foreground] shadow-[--widget-shadow] !outline-0 focus:border-[--focus-border-vivid]">'),O2e=G('<div class="scrollable relative h-full w-full outline-none"tabindex=-1><div class="[&amp;_.expander]:icon-opacity absolute [&amp;_.count]:w-[4em] [&amp;_.count]:cursor-default [&amp;_.count]:truncate [&amp;_.count]:text-right [&amp;_.count]:text-[80%] [&amp;_.expander>span]:text-[length:--icon-font-size] [&amp;_.expander>svg]:text-[length:--icon-font-size] [&amp;_.expander]:pr-1 [&amp;_.expander]:text-[length:--icon-font-size] [&amp;_.header]:flex [&amp;_.header]:h-[--panel-item-height] [&amp;_.header]:cursor-pointer [&amp;_.header]:flex-row [&amp;_.header]:items-center [&amp;_.header]:justify-center [&amp;_.header]:pr-[0.625rem] [&amp;_.header]:leading-[--tree-item-line-height] hover:[&amp;_.header]:bg-[--list-hover-background] [&amp;_.item.selected>.header]:rounded-[--focus-border-radius] [&amp;_.item.selected>.header]:border [&amp;_.item.selected>.header]:border-[--focus-border] [&amp;_.item.selected>.header]:bg-[--list-active-selection-background] [&amp;_.item.selected>.header]:text-[--list-active-selection-foreground] [&amp;_.item>.header]:border [&amp;_.item>.header]:border-transparent [&amp;_.item]:w-full [&amp;_.item]:outline-none [&amp;_.name]:grow [&amp;_.name]:truncate [&amp;_.name]:pb-[0.0625rem] [&amp;_.side]:ml-auto [&amp;_.side]:flex [&amp;_.side_button]:mx-0 [&amp;_.side_button]:!py-[0.09375rem] [&amp;_.side_button]:!text-[length:--icon-smallest-font-size] [&amp;_.time]:w-[5em] [&amp;_.time]:cursor-default [&amp;_.time]:truncate [&amp;_.time]:text-right [&amp;_.time]:text-[80%]">'),Z2e=G('<div class="flex h-full w-full flex-col text-[length:--panel-font-size] [&amp;_.icon]:text-[length:--icon-smaller-font-size]"tabindex=-1><div class="w-full flex-grow outline-none"tabindex=-1>'),G2e=G('<div class="mx-auto my-auto flex h-full w-full items-center justify-center px-3 text-center text-[length:--header-font-size] uppercase tracking-wide text-[--subtle-foreground]"tabindex=-1>no tests'),B2e=G('<div class="mx-auto my-auto flex h-full w-full items-center justify-center px-3 text-center text-[length:--header-font-size] uppercase tracking-wide text-[--subtle-foreground]">');function z9(n){const e=n.namespace,t=Dt(),i=vke(),[s,r]=t.appSettings(),o=()=>s.tests.autoCodePreview&&!n.compact,a=()=>t.isStandalone()?s.standalone.tests.layout:s.tests.layout,l=J(()=>g2e(n.state.tests.foreground?.search?.parsed?.text||"")),[c,d]=he(0),[u,h]=he();jh(u,([N])=>{d(N.borderBoxSize[0].inlineSize-1)});const f=()=>{const N=[];return N.push({text:"Enable file open on line click",action:()=>r("tests","autoCodePreview",!o()),checked:o()}),N.push({text:"Display test errors panel",action:()=>r("tests","errors",!s.tests.errors),checked:s.tests.errors}),N.push({text:"Display test logs panel",action:()=>r("tests","logs",!s.tests.logs),checked:s.tests.logs}),N.push({text:"Display covered files panel",action:()=>r("tests","coveredFiles",!s.tests.coveredFiles),checked:s.tests.coveredFiles}),N};Bn(()=>{i.trackTree(),n.setIcons([x(Ee,{get classList(){return{"codicon-split-vertical":a()==="vertical","codicon-split-horizontal":a()==="horizontal"}},onClick:()=>{const N=a()==="horizontal";t.isStandalone()?r("standalone","tests","layout",N?"vertical":"horizontal"):r("tests","layout",N?"vertical":"horizontal")},tabIndex:0,namespace:`${e}.header.action`,get tooltip(){return`Display selected test details ${a()==="horizontal"?"to the right of":"below"}                     the test tree`}}),x(Ee,{menuItems:f,class:"codicon-ellipsis",tabIndex:0,namespace:`${e}.header.action`,tooltip:"More actions"})])}),Ot(()=>i.untrackTree());const g=J(()=>n.state.tests.foreground),m=J(()=>(n.state.tests.foreground?.search?.parsed?n.state.tests.foreground?.tree.files.matched.items:n.state.tests.foreground?.tree.files.all.items)||[]),p=lw(),{list:b,containerProps:w,wrapperProps:v,scrollTo:_}=Hk(m,{overscan:25,itemHeight:N=>(m()[N].depth||1)*p}),y=m2e(N=>(()=>{var H=_2e();return A(H,N),H})());Fi(()=>{n.state.tests.foreground?.tree.revelation?.index!==void 0&&setTimeout(()=>i.revealNode(_),0)});const[C,S]=he(),k=t0(C);$e([C,()=>n.state.tests.searchControlVisible],()=>{n.setScrollable?.(n.state.tests.searchControlVisible?void 0:C())});const[I,T]=he(),D=he({active:!1},{equals:(N,H)=>N.active===H.active}),[M,E]=D;$e([()=>n.filter,g],()=>{g()&&(n.filter!==void 0?i.search(n.filter):n.state.tests.background&&(n.state.tests.background.search&&i.search(n.state.tests.background.search),n.state.tests.background.selection&&i.restoreSelection(n.state.tests.background.selection)))});function W(N){const H=Dt(),U=H.editorTooltipAddendum("navigation"),B=()=>H.getDebuggerStarted()(),[Y,ne]=he(void 0);return(()=>{var ee=x2e(),$=ee.firstChild,ge=$.firstChild,Ie=ge.nextSibling,xe=Ie.nextSibling;return We(z=>{N.level>1&&$e([()=>z,()=>N.node.revealed],()=>{if(z&&N.node.revealed)try{const K=z.closest(".root");if(K&&K.parentElement&&K.parentElement.parentElement){const Se=K.parentElement.parentElement.getBoundingClientRect().height,De=parseInt(window.getComputedStyle(K.parentElement).marginTop,10);K.parentElement.parentElement.scrollTop=z.offsetTop+De-Se/2}}catch{z.scrollIntoView({behavior:"instant",block:"center"})}})},ee),xt(ee,"data-namespace",`${e}.tree.item`),$.$$dblclick=z=>!o()&&i.navigateNode(N.node.id,z),$.$$click=z=>{N.node.selected?i.toggleNode(N.node.id):i.selectNode(N.node.id),o()&&i.navigateNode(N.node.id,z)},A($,x(se,{get when(){return N.node.type!=="test"},get fallback(){return T2e()},get children(){var z=w2e();return z.$$click=K=>{i.toggleNode(N.node.id),K.stopPropagation()},Me(K=>{var Se=!!N.node.expanded,De=!N.node.expanded;return Se!==K.e&&z.classList.toggle("codicon-chevron-down",K.e=Se),De!==K.t&&z.classList.toggle("codicon-chevron-right",K.t=De),K},{e:void 0,t:void 0}),z}}),ge),A(ge,x(Fn,{get children(){return[x(ot,{get when(){return N.testFileStatus&&!N.testFileStatus.isIdle},get children(){return x(vte,{get progress(){return N.testFileStatus}})}}),x(ot,{when:!0,get children(){var z=y2e();return We(Te,z,()=>Te&&{content:N.node.name}),Me(K=>{var Se=N.node.status==="executed",De=N.node.status==="failed",ke=N.node.status==="stale",je=N.node.status==="todo",et=N.node.status==="skipped",mt=N.node.status==="unknown";return Se!==K.e&&z.classList.toggle("codicon-pass",K.e=Se),De!==K.t&&z.classList.toggle("codicon-error",K.t=De),ke!==K.a&&z.classList.toggle("codicon-question",K.a=ke),je!==K.o&&z.classList.toggle("codicon-beaker",K.o=je),et!==K.i&&z.classList.toggle("codicon-beaker-stop",K.i=et),mt!==K.n&&z.classList.toggle("codicon-circle-filled",K.n=mt),K},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),z}})]}})),A(Ie,(()=>{var z=J(()=>!!(N.search&&N.search.text&&N.node.match?.text));return()=>z()?y(N.node.parent?wz(N.node.name):N.node.name,l()):(()=>{var K=J(()=>!!N.node.parent);return()=>K()?wz(N.node.name):N.node.name})()})()),A(xe,x(se,{get when(){return J(()=>N.node.type==="test")()&&(N.node.status==="executed"&&!B()||N.node.status==="failed")||!N.compact&&N.node.type==="file"&&N.node.status==="failed"},get children(){var z=S2e();return We(Te,z,()=>Te&&{onCreate(K){ne(K)},content:()=>{const K=jn.buildNodeTestPath(N.node);N.node.status==="failed"&&!N.compact&&i.loadTestDetails(K);const Se=()=>s.errors.fullSourceLinks,De=()=>s.errors.unmappedFiles,ke=()=>s.errors.wordWrap;return{content:N.node.status==="failed"&&!N.compact?(()=>{var je=M2e();return A(je,x(Qk.Provider,{initial:H,get children(){var et=I2e();return A(et,x(se,{get when(){return N.state.context},get children(){var mt=D2e();return A(mt,x(ln,{get each(){return N.state.context.errors},children:ze=>(()=>{var ht=E2e();return A(ht,x(fV,{error:ze,get showErrorsFullSourceLinks(){return Se()},get showUnmappedFileSourceLinks(){return De()},get debuggerStarted(){return B()},namespace:"unknown",get wordWrap(){return ke()}})),ht})()})),mt}})),et}})),je})():(()=>{var je=N2e();return A(je,x(Ee,{class:"codicon-chip pb-[0.1875rem] pt-[0.21875rem]",onClick:()=>H.profile(K)}),null),A(je,x(Ee,{class:"codicon-debug",onClick:()=>H.debug(K)}),null),je})(),readyToRender:N.node.status==="failed"&&!N.compact?()=>N.state.context!==void 0:()=>!0}},delay:[250,null],offset:[0,0],placement:"auto",class:"!max-h-[50vh] !overflow-auto !p-0",maxWidth:"80vw",instanceType:"test-details",zIndex:9997}),z.$$click=K=>{const Se=Y();Se&&!Se.state.isVisible&&(Se.show(),K.stopPropagation())},z}}),null),A(xe,x(Ee,{class:"codicon-filter pl-0.5 pr-0.5",get classList(){return{"codicon-filter-filled":N.node.filtered}},namespace:`${e}.tree.item.action`,onClick:z=>{i.toggleNodeFilter(N.node.id),z.stopPropagation()},get tooltip(){return N.node.filtered?`Unfocus ${N.node.type} <span class="keyboard-shortcut">F</span><br/><br/>${ub}`:`Focus ${N.node.type} <span class="keyboard-shortcut">F</span><br/><br/>${ub}`}}),null),A(xe,x(Ee,{class:"codicon-go-to-file pl-[0.08rem] pr-[0.2rem]",namespace:`${e}.tree.item.action`,onClick:z=>{i.navigateNode(N.node.id,z),z.stopPropagation()},get tooltip(){return"Open in editor <span class='keyboard-shortcut'>Enter</span>"+U()}}),null),A(xe,x(se,{get when(){return c()>500},get children(){return[x(se,{get when(){return N.node.count},get fallback(){return R2e()},get children(){return x(se,{get when(){return N.node.count.failing>0},get fallback(){return(()=>{var z=W2e(),K=z.firstChild;return We(Te,z,()=>Te&&{content:`<b>${N.node.count.total}</b> test${N.node.count.total>1?"s":""}                                   inside the node`}),A(K,()=>N.node.count.total),z})()},get children(){var z=C2e(),K=z.firstChild,Se=K.nextSibling,De=Se.nextSibling;return We(Te,z,()=>Te&&{content:`<b>${N.node.count.failing}</b> failing out of <b>${N.node.count.total}</b>                                 total test${N.node.count.total>1?"s":""} inside the node`}),A(K,()=>N.node.count.failing),A(De,()=>N.node.count.total),z}})}}),x(Fn,{get children(){return[x(ot,{get when(){return N.testFileStatus&&!N.testFileStatus.isIdle},get children(){var z=L2e();return A(z,x(bte,{get progress(){return N.testFileStatus},class:"!text-[length:85%] text-[var(--subtle-foreground)]"})),z}}),x(ot,{when:!0,get children(){return x(se,{get when(){return N.search&&N.search.time&&N.node.match?.time},get fallback(){return(()=>{var z=A2e(),K=z.firstChild;return A(z,()=>N.node.time||0,K),z})()},get children(){var z=k2e(),K=z.firstChild,Se=K.firstChild;return A(K,()=>N.node.time||0,Se),z}})}})]}})]}}),null),A(ee,x(se,{get when(){return N.node.children&&N.node.expanded},get children(){return x(Jp,{get each(){return J(()=>!N.search)()?N.node.children:N.node.children.filter(z=>z.match)},children:z=>x(W,{get state(){return N.state},get node(){return z()},get level(){return N.level+1},get search(){return N.search},get compact(){return N.compact}})})}}),null),Me(z=>{var K=N.node.id,Se=!!N.node.selected,De=N.level===1,ke=N.level>1,je=N.node.status==="unknown",et=N.level,mt=N.node.status==="executed",ze=N.node.status==="failed"||N.node.status==="stale",ht=N.node.status==="skipped",nt=N.node.status==="todo";return K!==z.e&&xt(ee,"data-id",z.e=K),Se!==z.t&&ee.classList.toggle("selected",z.t=Se),De!==z.a&&ee.classList.toggle("root",z.a=De),ke!==z.o&&ee.classList.toggle("child",z.o=ke),je!==z.i&&$.classList.toggle("text-[--testing-icon-unset]",z.i=je),et!==z.n&&((z.n=et)!=null?$.style.setProperty("--tree-level",et):$.style.removeProperty("--tree-level")),mt!==z.s&&ge.classList.toggle("text-[--testing-icon-passed]",z.s=mt),ze!==z.h&&ge.classList.toggle("text-[--testing-icon-failed]",z.h=ze),ht!==z.r&&ge.classList.toggle("text-[--testing-icon-queued]",z.r=ht),nt!==z.d&&ge.classList.toggle("text-[--testing-icon-skipped]",z.d=nt),z},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0}),ee})()}function P(N){const[H,U]=N.activation;function B(){U({active:!1})}Bn(()=>window.addEventListener("blur",B)),Ot(()=>window.removeEventListener("blur",B));const[Y,ne]=he();return B$(Y,()=>U({active:!1}),{ignore:[N.target]}),Fi(()=>Y()&&H().active&&H().position&&z2e(Y(),H().position.x,H().position.y)),x(se,{get when(){return J(()=>!!H().active)()&&H().position},get children(){var ee=V2e(),$=ee.firstChild,ge=$.firstChild,Ie=ge.firstChild,xe=Ie.firstChild,z=ge.nextSibling,K=z.firstChild,Se=K.firstChild,De=z.nextSibling,ke=De.firstChild,je=ke.firstChild,et=De.nextSibling,mt=et.firstChild;return We(ne,ee),ee.$$contextmenu=ze=>ze.preventDefault(),xt(ee,"data-namespace",`${e}.search.menu`),Ie.$$click=()=>{i.convertSearch({failed:!0}),U({active:!1})},Ie.addEventListener("mouseenter",ze=>{ze.currentTarget.focus()}),xt(Ie,"data-namespace",`${e}.search.menu.item`),K.$$click=()=>{i.convertSearch({todo:!0}),U({active:!1})},K.addEventListener("mouseenter",ze=>{ze.currentTarget.focus()}),xt(K,"data-namespace",`${e}.search.menu.item`),ke.$$click=()=>{i.convertSearch({skipped:!0}),U({active:!1})},ke.addEventListener("mouseenter",ze=>{ze.currentTarget.focus()}),xt(ke,"data-namespace",`${e}.search.menu.item`),A($,x(se,{get when(){return N.threshold},get children(){var ze=F2e(),ht=ze.firstChild,nt=ht.firstChild,zt=nt.nextSibling,Fe=zt.firstChild,re=Fe.nextSibling;return re.nextSibling,ht.$$click=()=>{i.convertSearch({slow:!0}),U({active:!1})},ht.addEventListener("mouseenter",ie=>{ie.currentTarget.focus()}),xt(ht,"data-namespace",`${e}.search.menu.item`),A(zt,()=>N.threshold,re),Me(()=>nt.classList.toggle("invisible",!i.checkSearch({slow:!0}))),ze}}),et),mt.$$click=()=>{i.search(""),U({active:!1})},mt.addEventListener("mouseenter",ze=>{ze.currentTarget.focus()}),xt(mt,"data-namespace",`${e}.search.menu.item`),Me(ze=>{var ht=!N.state?.failed,nt=!N.state?.todo,zt=!N.state?.skipped;return ht!==ze.e&&xe.classList.toggle("invisible",ze.e=ht),nt!==ze.t&&Se.classList.toggle("invisible",ze.t=nt),zt!==ze.a&&je.classList.toggle("invisible",ze.a=zt),ze},{e:void 0,t:void 0,a:void 0}),ee}})}return x(se,{get when(){return n.state.tests.foreground&&n.state.tests.foreground.tree.files.all.items.length>0},get fallback(){return(()=>{var N=G2e();return N.$$focusin=()=>{n?.onFocus?.(`${e}`)},N})()},get children(){var N=Z2e(),H=N.firstChild;return We(h,N),N.$$focusin=()=>{n?.onFocus?.(`${e}`)},A(N,x(se,{get when(){return n.state.tests.searchControlVisible},get children(){var U=P2e(),B=U.firstChild;return B.addEventListener("change",Y=>{i.search(void 0,()=>Y.target.focus())}),B.$$input=Y=>{i.updateSearch(Y.target.value)},xt(B,"data-namespace",`${e}.search.text`),A(U,x(Ee,{class:`codicon-filter absolute inset-y-0 right-[0.5625rem]
                   mb-[0.15rem] mt-[0.2rem] pl-0.5 pr-0.5 !opacity-100`,tabIndex:0,namespace:`${e}.search.action`,get classList(){return{"bg-[--input-option-hover-background]":M().active}},tooltip:"More filters",onClick:Y=>{const ne=Y.target;if(T(ne),M().active)E({active:!1});else{const ee=ne.getBoundingClientRect().left+document.documentElement.scrollLeft-2,$=ne.getBoundingClientRect().top+document.documentElement.scrollTop;E({active:!0,position:{x:ee,y:$}})}Y.stopPropagation()}}),null),A(U,x(P,{activation:D,target:I,get state(){return n.state.tests.foreground?.search?.parsed},get threshold(){return n.state.project?.thresholds.slowTest}}),null),Me(Y=>{var ne=!!k.y(),ee=`Filter (e.g. text @failed${n.compact?"":" @todo @skipped"} @time>10)`;return ne!==Y.e&&B.classList.toggle("shadow-header",Y.e=ne),ee!==Y.t&&xt(B,"placeholder",Y.t=ee),Y},{e:void 0,t:void 0}),Me(()=>B.value=n.state.tests.foreground?.search?.raw||""),U}}),H),xt(H,"data-namespace",`${e}.tree`),A(H,x(se,{get when(){return!n.state.tests.foreground.search?.parsed||n.state.tests.foreground.tree.files.matched.items.length>0},get fallback(){return(()=>{var U=B2e();return A(U,()=>`no ${n.state.tests.foreground.search?.parsed?`${X2e(n.state.tests.foreground.search?.parsed)?"failed":"matching"} `:""}tests found`),U})()},get children(){var U=O2e(),B=U.firstChild;return Yh(U,"scroll",w.onScroll),We(Y=>{S(Y),w.ref(Y)},U),xt(U,"data-namespace",`${e}.tree`),A(B,x(Jp,{get each(){return b()},children:Y=>x(W,{get state(){return n.state},get node(){return Y().data},level:1,get index(){return Y().index},get search(){return n.state.tests.foreground?.search?.parsed},get compact(){return n.compact},get testFileStatus(){return J(()=>Y().data.type==="file")()?n.state.testFileProgressByFile[Y().data.key]:void 0}})})),Me(Y=>{var ne=w.style,ee=v().style;return Y.e=Dl(U,ne,Y.e),Y.t=Dl(B,ee,Y.t),Y},{e:void 0,t:void 0}),U}})),N}})}function X2e(n){return n.failed&&!n.todo&&!n.skipped&&!n.passed&&!n.time&&!n.text}function wz(n){return n.replace(/\r?\n|\r/g," ").replace(/\s\s+/g," ")}function z2e(n,e,t){const i=n.offsetHeight,s=n.offsetWidth,r=5;n.style.maxHeight="unset";const o=t+i+r<document.body.offsetHeight,a=t-i-r>0;!o&&!a&&(n.style.maxHeight=`${document.body.offsetHeight}px`),n.style.top=`${o?t+r:a?t-i-r:0}px`;const l=e+s<document.body.offsetWidth;e-s>0?n.style.right=`${document.body.offsetWidth-e}px`:l&&(n.style.left=`${e}px`),n.focus()}dn(["click","dblclick","contextmenu","focusin","input"]);var H2e=G('<div class="h-full w-full outline-none"tabindex=-1 data-namespace=details.tests>'),U2e=G('<div class="mx-auto my-auto flex h-full w-full items-center justify-center px-3 text-center text-[length:--header-font-size] uppercase tracking-wide text-[var(--subtle-foreground)]">No test details panels are enabled');function Y2e(n){const e=Dt(),t=lu(),[i]=e.appSettings();let s;const r=J(()=>e.isStandalone()?i.standalone.tests.layout:i.tests.layout),o=J(()=>e.getPanelState(Ue.SideViewTestsErrors)()?.collapsed),a=J(()=>e.getPanelState(Ue.SideViewTestsLogs)()?.collapsed),l=J(()=>e.getPanelState(Ue.SideViewTestsCoverage)()?.collapsed);$e([()=>n.state.tests.foreground,r,o,a,l],()=>{r()==="horizontal"&&n.state.tests.foreground&&t.tests.trackSelection()});const c=J(()=>e.getPanelState(Ue.SideViewTestsAltDetailsErrors)()?.collapsed),d=J(()=>e.getPanelState(Ue.SideViewTestsAltDetailsLogs)()?.collapsed),u=J(()=>e.getPanelState(Ue.SideViewTestsAltDetailsCoverage)()?.collapsed);return $e([()=>n.state.tests.foreground,r,c,d,u],()=>{r()==="vertical"&&n.state.tests.foreground&&t.tests.trackSelection()}),$e(n.keyboard.focusedNamespace,h=>{if(h&&h.startsWith("details.tests.")){switch(h){case"details.tests.errors":r()==="horizontal"&&o()&&e.setPanelState(Ue.SideViewTestsErrors,g=>({...g,collapsed:!1,size:g.size||35})),r()==="vertical"&&c()&&e.setPanelState(Ue.SideViewTestsAltDetailsErrors,g=>({...g,collapsed:!1,size:g.size||30}));break;case"details.tests.logs":r()==="horizontal"&&a()&&e.setPanelState(Ue.SideViewTestsLogs,g=>({...g,collapsed:!1,size:g.size||35})),r()==="vertical"&&d()&&e.setPanelState(Ue.SideViewTestsAltDetailsLogs,g=>({...g,collapsed:!1,size:g.size||40}));break;case"details.tests.coverage":r()==="horizontal"&&l()&&e.setPanelState(Ue.SideViewTestsCoverage,g=>({...g,collapsed:!1,size:g.size||35})),r()==="vertical"&&u()&&e.setPanelState(Ue.SideViewTestsAltDetailsCoverage,g=>({...g,collapsed:!1,size:g.size||30}));break}h==="details.tests.errors"&&(h="details.tests.errors.content.viewer");let f=s.querySelector(`[data-namespace="${h}"]`);f?f.getAttribute("data-unfocused-scrolling")!=="true"?f.focus():setTimeout(()=>{let g=n.keyboard.lastFocusedNamespace();g==="details.tests.errors"&&(g="details.tests.errors.content.viewer"),h===g&&f.isConnected&&(f.matches(":focus")||(h==="details.tests.errors.content.viewer"&&(h="details.tests.errors"),s.querySelector(`[data-namespace="${h}"]`)?.focus()))},70):(h==="details.tests.errors.content.viewer"&&(h="details.tests.errors"),s.querySelector(`[data-namespace="${h}"]`)?.focus())}}),(()=>{var h=H2e(),f=s;return typeof f=="function"?We(f,h):s=h,A(h,x(se,{get when(){return r()==="horizontal"},get fallback(){return x(jr,{class:"foreground h-full w-full",direction:"row",get children(){return[x(ji,{get id(){return Ue.SideViewTestsAltTree},defaultState:{size:50},get children(){return x(jn.Provider,{get initial(){return t.tests},get children(){return x(z9,{get state(){return n.state},get setIcons(){return n.setIcons},onFocus:g=>n.keyboard.onFocus(g,!1),namespace:"details.tests",get filter(){return e.getSideViewTab()().state?.tests?.filter}})}})}}),x(ji,{get id(){return Ue.SideViewTestsAltDetails},defaultState:{size:50},get children(){return x(jr,{class:"foreground h-full w-full",direction:"column",get children(){return[x(se,{get when(){return i.tests.errors},get children(){return x(ji,{index:0,get id(){return Ue.SideViewTestsAltDetailsErrors},defaultState:{size:30},header:{title:"Errors",namespace:"details.tests.errors.header",tooltip:'Jump to Errors panel <span class="keyboard-shortcut">J</span>&nbsp;<span class="keyboard-shortcut">E</span>'},get children(){return x(bz,{get state(){return n.state},onFocus:g=>n.keyboard.onFocus(g,!1),get placement(){return Ue.SideViewTestsAltDetailsErrors}})}})}}),x(se,{get when(){return i.tests.logs},get children(){return x(ji,{index:1,get id(){return Ue.SideViewTestsAltDetailsLogs},defaultState:{size:40},header:{title:"Logs",namespace:"details.tests.logs.header",tooltip:'Jump to Logs panel <span class="keyboard-shortcut">J</span>&nbsp;<span class="keyboard-shortcut">L</span>'},get children(){return x(vz,{get state(){return n.state},onFocus:g=>n.keyboard.onFocus(g,!1),get placement(){return Ue.SideViewTestsAltDetailsLogs}})}})}}),x(se,{get when(){return i.tests.coveredFiles},get children(){return x(ji,{index:2,get id(){return Ue.SideViewTestsAltDetailsCoverage},defaultState:{size:30},header:{title:"Covered Source Files",namespace:"details.tests.coverage.header",tooltip:'Jump to Covered Source Files panel <span class="keyboard-shortcut">J</span>&nbsp;<span class="keyboard-shortcut">C</span>'},get children(){return x(pz,{get state(){return n.state},onFocus:g=>n.keyboard.onFocus(g,!1),get placement(){return Ue.SideViewTestsAltDetailsCoverage}})}})}}),x(se,{get when(){return!(i.tests.errors||i.tests.logs||i.tests.coveredFiles)},get children(){return U2e()}})]}})}})]}})},get children(){return x(jr,{class:"foreground h-full w-full",direction:"column",get children(){return[x(ji,{get id(){return Ue.SideViewTestsTree},defaultState:{size:65},get children(){return x(jn.Provider,{get initial(){return t.tests},get children(){return x(z9,{get state(){return n.state},get setIcons(){return n.setIcons},onFocus:g=>n.keyboard.onFocus(g,!1),namespace:"details.tests",get filter(){return e.getSideViewTab()().state?.tests?.filter}})}})}}),x(se,{get when(){return i.tests.errors},get children(){return x(ji,{index:0,get id(){return Ue.SideViewTestsErrors},defaultState:{size:35,collapsed:!0},header:{title:"Errors",namespace:"details.tests.errors.header",tooltip:'Jump to Errors panel <span class="keyboard-shortcut">J</span>&nbsp;<span class="keyboard-shortcut">E</span>'},get children(){return x(bz,{get state(){return n.state},onFocus:g=>n.keyboard.onFocus(g,!1),get placement(){return Ue.SideViewTestsErrors}})}})}}),x(se,{get when(){return i.tests.logs},get children(){return x(ji,{index:1,get id(){return Ue.SideViewTestsLogs},defaultState:{size:35,collapsed:!0},header:{title:"Logs",namespace:"details.tests.logs.header",tooltip:'Jump to Logs panel <span class="keyboard-shortcut">J</span>&nbsp;<span class="keyboard-shortcut">L</span>'},get children(){return x(vz,{get state(){return n.state},onFocus:g=>n.keyboard.onFocus(g,!1),get placement(){return Ue.SideViewTestsLogs}})}})}}),x(se,{get when(){return i.tests.coveredFiles},get children(){return x(ji,{index:2,get id(){return Ue.SideViewTestsCoverage},defaultState:{size:35,collapsed:!0},header:{title:"Covered Source Files",namespace:"details.tests.coverage.header",tooltip:'Jump to Covered Source Files panel <span class="keyboard-shortcut">J</span>&nbsp;<span class="keyboard-shortcut">C</span>'},get children(){return x(pz,{get state(){return n.state},onFocus:g=>n.keyboard.onFocus(g,!1),get placement(){return Ue.SideViewTestsCoverage}})}})}})]}})}})),h})()}class K2e{constructor(e){this._appService=e}_namespace="details.coverage";matches(e){return e.startsWith(this._namespace)}handle(e,t){if(e=this._narrow(e),!t.target)return;const i=t.target,s=o=>{t.preventDefault(),t.stopPropagation()},r=this._locateRootElement(e,i);if(t.key==="Escape"&&!rt(t)){if(e==="header.action")return s(r?.focus());this._appService.focus("editor")}}_locateRootElement(e,t){if(e===".")return t;if(e==="header.action")return t.closest(`[data-namespace="${this._namespace}"]`)}_narrow(e){return e=e.replace(`${this._namespace}.`,""),e=e.replace(this._namespace,"."),e}}class j2e{constructor(e){this._appService=e}_namespace="details.status";matches(e){return e.startsWith(this._namespace)}handle(e,t){if(e=this._narrow(e),!t.target)return;const i=t.target,s=o=>{t.preventDefault(),t.stopPropagation()},r=this._locateRootElement(e,i);if(t.key==="Escape"&&!rt(t)){if(e.endsWith("header.action"))return s(r?.focus());this._appService.focus("editor")}}_locateRootElement(e,t){if(e===".")return t;if(e==="header.action")return t.parentElement?.parentElement?.parentElement?.querySelector(`[data-namespace="${this._namespace}"]`);if(e.endsWith("header.action"))return t.closest(`[data-namespace="${this._namespace}"]`)}_narrow(e){return e=e.replace(`${this._namespace}.`,""),e=e.replace(this._namespace,"."),e}}const J2e="j",$2e=1e3;class _te{constructor(e,t,i,s,r=!1){this._namespace=e,this._keyboard=t,this._appService=i,this._testsService=s,this._compact=r}_leaderPressTimestamp=void 0;matches(e){return e.startsWith(this._namespace)}handle(e,t,i){function s(r){t.preventDefault(),t.stopPropagation()}if(H1(t))return s();if(i.tests.foreground){const r=window.document.activeElement;if(!this._compact&&r?.nodeName!=="INPUT"&&r?.nodeName!=="TEXTAREA"&&r?.type!=="text"){const l=rt(t);if(t.key===J2e&&!l&&!this._leaderPressTimestamp)return this._leaderPressTimestamp=Date.now(),s();{let c;if(l||(c=this._leaderPressTimestamp,this._leaderPressTimestamp=void 0),c&&Date.now()-c<$2e&&!l){switch(t.key){case"t":this._keyboard.onFocus(`${this._namespace}.tree`,!0);break;case"l":this._keyboard.onFocus(`${this._namespace}.logs`,!0);break;case"e":this._keyboard.onFocus(`${this._namespace}.errors`,!0);break;case"c":this._keyboard.onFocus(`${this._namespace}.coverage`,!0);break}return s()}}}if(i.tests.foreground.details&&!this._compact){const l=this._testsService.logs?new aw(`${this._namespace}.logs`,this._appService,this._testsService.logs):void 0,c=new $k(`${this._namespace}.errors`,this._appService);if(l?.matches(e)){l.handle(e,t,i.tests.foreground.details);return}else if(c.matches(e)){c.handle(e,t,i.tests.foreground.details);return}}if(e=this._narrow(e),!t.target)return;const o=t.target;if(e!=="search.text"&&e!=="search.menu"&&e!=="search.menu.item"&&!rt(t)&&t.key==="/"||t.key==="f"&&fr(t))return this._testsService.showSearch(),queueMicrotask(()=>{this._locateRootElement(e,o)?.querySelector(`[data-namespace="${this._namespace}.search.text"]`)?.focus()}),s();if(e==="header.action"){if(t.key==="Escape"&&!rt(t))return s(this._locateRootElement(e,o)?.focus())}else if(e==="search.text"){if(t.key==="Escape"&&!rt(t))return o.value?.trim()===""?s(this._locateRootElement(e,o)?.focus()):s();if(t.key==="Enter"&&!rt(t))return s(this._locateRootElement(e,o)?.focus())}else if(e==="search.action"){if(t.key==="Escape")return this._locateRootElement(e,o)?.focus(),s(this._locateRootElement(e,o)?.dispatchEvent(new MouseEvent("click",{bubbles:!0})))}else{if(e==="search.menu")return t.key==="ArrowDown"?s(o.querySelector(".item")?.focus()):t.key==="Escape"||t.key==="Tab"?(this._locateRootElement(e,o)?.focus(),s(this._locateRootElement(e,o)?.dispatchEvent(new MouseEvent("click",{bubbles:!0})))):s();if(e==="search.menu.item")return t.key==="ArrowDown"?s(o.parentElement?.nextElementSibling?.querySelector(".item")?.focus()):t.key==="ArrowUp"?s(o.parentElement?.previousElementSibling?.querySelector(".item")?.focus()):t.key===" "||t.key==="Enter"?(this._locateRootElement(e,o)?.focus(),s(o.dispatchEvent(new MouseEvent("click",{bubbles:!0})))):t.key==="ArrowUp"?s(o.parentElement?.previousElementSibling?.querySelector(".item")?.focus()):t.key==="Escape"||t.key==="Tab"?(this._locateRootElement(e,o)?.focus(),s(this._locateRootElement(e,o)?.dispatchEvent(new MouseEvent("click",{bubbles:!0})))):s();if(e==="coverage"&&!this._compact){if(t.key==="ArrowDown"&&!rt(t))return s(o.querySelector(".item")?.focus());if(t.key==="ArrowUp")return s(this._locateRootElement(e,o)?.focus());if(t.key==="Escape"&&!rt(t))return s(this._locateRootElement(e,o)?.focus());if(t.key==="Tab"&&t.shiftKey)return s(this._locateRootElement(e,o)?.focus())}else if(e==="coverage.item"&&!this._compact){if(t.key==="ArrowDown"&&!rt(t))return s(o.nextElementSibling?.focus());if(t.key==="ArrowUp"&&!rt(t)){const l=o.previousElementSibling;return s(l?l.focus():this._locateRootElement(e,o)?.focus())}else{if(t.key==="Tab"&&t.shiftKey)return s(this._locateRootElement(e,o)?.focus());if(t.key==="Escape"&&!rt(t))return s(this._locateRootElement(e,o)?.focus());if(t.key==="Enter"||t.key===" ")return s(o.dispatchEvent(hh(t,{buttons:t.key==="Enter"?999:void 0})))}}}if(e==="."||e.startsWith("tree")){if((t.key==="ArrowUp"||t.key==="ArrowDown")&&fr(t))return s(this._locateRootElement(e,o)?.querySelector(".scrollable,.scrollable_")?.scrollBy({top:t.key==="ArrowUp"?-50:50,behavior:"smooth"}));if(t.key==="Home"||t.key==="End")return s(this._testsService.locateNode(t.key==="Home"?"first":"last"))}const a=this._locateNodeElement(e,o,i.tests.foreground.tree,!0);if(a&&(e==="."||e.startsWith("tree"))){const l=a?.getAttribute("data-id");if(l){const c=i.tests.foreground.tree.nodes[l];if(c){if(t.key==="ArrowUp"&&!rt(t))return s(this._selectTestTreeNode(a,"up",1,i.tests.foreground.tree));if(t.key==="ArrowDown"&&!rt(t))return s(this._selectTestTreeNode(a,"down",1,i.tests.foreground.tree));if(t.key==="PageUp"&&!rt(t))return s(this._selectTestTreeNode(a,"up",12,i.tests.foreground.tree));if(t.key==="PageDown"&&!rt(t))return s(this._selectTestTreeNode(a,"down",12,i.tests.foreground.tree));if(t.key==="ArrowRight"&&!rt(t))return e==="tree.item.action"?s(this._selectNodeAction(a,o,!0)):c.expanded?s(this._selectTestTreeNode(a,"down",1,i.tests.foreground.tree)):s(this._testsService.toggleNode(l,!0));if(t.key==="ArrowLeft"&&!rt(t))return e==="tree.item.action"?s(this._selectNodeAction(a,o,!1)):c.expanded?s(this._testsService.toggleNode(l,!1)):c.parent?s(this._selectTestTreeNode(a,"parent",1,i.tests.foreground.tree)):s(this._selectTestTreeNode(a,"up",1,i.tests.foreground.tree));if(t.key==="Enter"||t.key===" ")return e.endsWith("action")?s(o.dispatchEvent(hh(t))):s(this._testsService.navigateNode(l,t,t.key!=="Enter"?{focus:!1}:{focus:!0}));if(t.key==="e"&&!rt(t))return s(this._testsService.navigateNode(l,t,{focus:!0}));if(t.key==="f"&&!rt(t))return s(this._testsService.toggleNodeFilter(l));if(t.key==="d"&&!rt(t))return s(this._appService.debug(jn.buildNodeTestPath(c)));if(t.key==="p"&&!rt(t))return s(this._appService.profile(jn.buildNodeTestPath(c)));if(t.key==="u"&&!rt(t)){const d=jn.buildFileLocation(c);return s(d&&this._appService.updateSnapshots(d))}else{if(t.key==="v"&&!rt(t))return c&&c.type==="test"&&c.status==="failed"&&this._appService.showSideBySideDiff({test:jn.buildNodeTestPath(c)},t),s();if(t.key==="s"&&!rt(t)&&!this._appService.isIntegratedSideView()){const d=jn.buildFileLocation(c),u=jn.buildNodeTestPath(c);d&&d.file?this._appService.openInSideView(Zt.Tests,{tests:{filter:[d.file,...u.slice(1)].join(" ")}}):this._appService.openInSideView(Zt.Tests,{tests:{filter:i.tests.foreground?.search?.raw||""}})}else if(t.key==="Tab"&&!rt(t)){if(e==="tree.item")return s(this._selectNodeAction(a,null,!0))}else if(t.key==="Escape"&&!rt(t)){if(e==="tree.item.action")return s(a.focus())}else if(t.key==="."&&!rt(t)&&e==="tree.item"){const d=jn.buildFileLocation(c);return d&&I_(a,d),s()}}}}}else{const l=this._locateNodeElement(e,o,i.tests.foreground.tree,!1);if(l){if(t.key==="ArrowUp"&&!rt(t))return s(this._selectTestTreeNode(l,"up",1,i.tests.foreground.tree));if(t.key==="ArrowDown"&&!rt(t))return s(this._selectTestTreeNode(l,"down",1,i.tests.foreground.tree));if(t.key==="PageUp"&&!rt(t))return s(this._selectTestTreeNode(l,"up",12,i.tests.foreground.tree));if(t.key==="PageDown"&&!rt(t))return s(this._selectTestTreeNode(l,"down",12,i.tests.foreground.tree))}}if(t.key==="Escape"&&!rt(t))return s(this._appService.focus("editor"))}}_locateNodeElement(e,t,i,s){if(!s&&(e==="header.action"||e==="search.action")){const r=this._locateRootElement(e,t);r&&(e=".",t=r)}if(e=="."||e==="tree"){const r=t.querySelector(".selected");return!r&&!s?t.querySelector(".item"):r}if(e==="tree.item"){if(i.selection&&i.selection.id===t?.getAttribute("data-id"))return t;const r=t.parentElement?.querySelector(".selected");return!r&&!s?t.parentElement?.querySelector(".item"):r}if(e==="tree.item.action")return t.parentElement?.parentElement?.parentElement}_selectTestTreeNode(e,t,i,s){let r;if(i===1)if(t==="down"){if(r=e.querySelector(".item")??e.nextElementSibling,!r){let l=e.parentElement;for(;l&&l.classList.contains("item");)if(r=l.nextElementSibling,!r)l=l.parentElement;else break}}else if(t==="up"){if(r=e.previousElementSibling,r?.classList.contains("item")){if(r){const l=r.querySelectorAll(".item");l.length&&(r=l.item(l.length-1))}}else if(r=e.parentElement,!r?.classList.contains("item")&&(r=e.previousElementSibling,r)){const l=r.querySelectorAll(".item");l.length&&(r=l.item(l.length-1))}}else t==="parent"&&(r=e.parentElement);else if(i>1){if(t==="parent")return;if(e.classList.contains("item")&&!e.classList.contains("child")?r=t==="down"?e.nextElementSibling:e.previousElementSibling:r=t==="down"?this._locateRootNodeElement(e)?.nextElementSibling:this._locateRootNodeElement(e)?.previousElementSibling,r){let l=1;for(;r&&l<i&&(t==="down"?r.nextElementSibling:r.previousElementSibling);)r=t==="down"?r.nextElementSibling:r.previousElementSibling,l++}}const o=r?.getAttribute("data-id");let a;o&&(a=s.nodes[o]),a&&(this._testsService.selectNode(o),r?.focus())}_selectNodeAction(e,t,i){const s=e.firstElementChild?.querySelectorAll("button")||[];if(s.length){let r=-1;if(t){for(let o=0;o<s.length;o++)if(s[o]===t){r=o;break}}else return s[0].focus(),!0;return r=r>=0?r:0,i?(r+1>s.length-1||s[r+1].focus(),!0):r-1>=0?(s[r-1].focus(),!0):!1}return!1}_locateRootNodeElement(e){let t=e.parentElement,i;for(;t;){if(t.classList.contains("item")&&!t.classList.contains("child")){i=t;break}if(!t.classList.contains("item"))return;t=t.parentElement}return i}_locateRootElement(e,t){if(e===".")return t;let i;if(e==="header.action"&&(i=t.parentElement?.parentElement?.parentElement?.querySelector(`[data-namespace="${this._namespace}"]`)),i)return i;let s=t.parentElement;for(;s;){if(s.getAttribute("data-namespace")===this._namespace)return s;s=s.parentElement}}_narrow(e){return e=e.replace(`${this._namespace}.`,""),e=e.replace(this._namespace,"."),e}}var Q2e=G('<div class="my-auto ml-auto flex h-full items-center px-1 align-middle [&amp;_button]:mx-[0.0625rem] [&amp;_button]:!text-[length:--icon-font-size]">'),q2e=G('<div class="flex h-full w-full flex-col"data-vscode-context="{&quot;webviewSection&quot;: &quot;side-view&quot;, &quot;preventDefaultContextMenuItems&quot;: true}"><div class="relative flex flex-row items-center"><ul class="header-tracking select-none truncate px-[0.0625rem] text-[length:--header-font-size] [&amp;_li.selected]:rounded-none [&amp;_li.selected]:border-b [&amp;_li.selected]:border-b-[--focus-header-border] [&amp;_li.selected]:text-[color:--foreground] [&amp;_li]:mx-2 [&amp;_li]:mb-[0.55em] [&amp;_li]:mt-[1em] [&amp;_li]:inline-block [&amp;_li]:cursor-pointer [&amp;_li]:px-0.5 [&amp;_li]:pb-0.5 [&amp;_li]:uppercase [&amp;_li]:text-[color:rgb(from_var(--foreground)_r_g_b_/_0.65)] focus-visible:[&amp;_li]:rounded-[--input-border-radius] focus-visible:[&amp;_li]:border-b-transparent focus-visible:[&amp;_li]:outline focus-visible:[&amp;_li]:outline-1 focus-visible:[&amp;_li]:outline-offset-2 focus-visible:[&amp;_li]:outline-[--focus-border-vivid]"><li tabindex=0>Logs</li><li tabindex=0>Errors</li><li tabindex=0>Tests</li><li tabindex=0>Coverage</li><li tabindex=0>Status</li></ul></div><div class=flex-grow>');function wte(n){const e=Dt(),t=lu(),i=Bg();let s;const[r,o]=he(),a=e.getSideViewTab(),l=J(()=>a().name),c=e.getStatus();$e(l,C=>{o(void 0),C&&e.featureUsed(`side_${C}`)});const[d,u]=he(!1),[h,f]=he(null),{isOutside:g}=Rf(h,{handleOutside:!1});VQ(fme(g).pipe(Lce(C=>!C),kce(500)).subscribe(gme(u)));function m(C){switch(C){case Zt.Logs:n.keyboard.onFocus("details.logs",!0);break;case Zt.Errors:n.keyboard.onFocus("details.errors",!0);break;case Zt.Tests:n.keyboard.onFocus("details.tests",!0);break;case Zt.Coverage:n.keyboard.onFocus("details.coverage",!0);break;case Zt.Status:n.keyboard.onFocus("details.status",!0);break}}$e(l,C=>m(C)),$e(n.keyboard.focusedNamespace,C=>{if(C&&C.startsWith("details")&&!C.startsWith("details.tests."))if(C==="details")m(l());else{C==="details.errors"&&(C="details.errors.content.viewer");let S=s.querySelector(`[data-namespace="${C}"]`);S?S.getAttribute("data-unfocused-scrolling")!=="true"?S.focus():setTimeout(()=>{let k=n.keyboard.lastFocusedNamespace();k==="details.errors"&&(k="details.errors.content.viewer"),C===k&&S.isConnected&&(S.matches(":focus")||(C==="details.errors.content.viewer"&&(C="details.errors"),s.querySelector(`[data-namespace="${C}"]`)?.focus()))},70):(C==="details.errors.content.viewer"&&(C="details.errors"),s.querySelector(`[data-namespace="${C}"]`)?.focus())}});const p=new aw("details.logs",e,i),b=new $k("details.errors",e),w=new _te("details.tests",n.keyboard,e,t.tests),v=new K2e(e),_=new j2e(e);$e(n.keyboard.key,C=>{if(C){const S=C.event,k=C.namespace;k==="details"?(S.key==="l"&&e.openInSideView(Zt.Logs),S.key==="e"&&e.openInSideView(Zt.Errors),S.key==="t"&&e.openInSideView(Zt.Tests),S.key==="c"&&e.openInSideView(Zt.Coverage),S.key==="s"&&e.openInSideView(Zt.Status),S.preventDefault(),S.stopPropagation()):p.matches(k)?p.handle(k,S,n.state):b.matches(k)?b.handle(k,S,n.state):w.matches(k)?w.handle(k,S,n.state):v.matches(k)?v.handle(k,S):_.matches(k)&&_.handle(k,S)}});function y(C,S){S?(S.key==="Enter"||S.key===" ")&&(S.preventDefault(),S.stopPropagation(),l()!==C?e.openInSideView(C):m(C)):e.openInSideView(C)}return(()=>{var C=q2e(),S=C.firstChild,k=S.firstChild,I=k.firstChild,T=I.nextSibling,D=T.nextSibling,M=D.nextSibling,E=M.nextSibling,W=S.nextSibling,P=s;return typeof P=="function"?We(P,C):s=C,A(S,x(fte,{get active(){return J(()=>c().state==="running")()&&l()===Zt.Coverage}}),k),We(f,k),I.addEventListener("keypress",N=>y(Zt.Logs,N)),I.$$click=()=>y(Zt.Logs),We(Te,I,()=>Te&&{content:`Go to Logs tab <span class="keyboard-shortcut">G</span>${e.isStandalone()?'&nbsp;<span class="keyboard-shortcut">S</span>':""}&nbsp;<span class="keyboard-shortcut">L</span>`}),T.addEventListener("keypress",N=>y(Zt.Errors,N)),T.$$click=()=>y(Zt.Errors),We(Te,T,()=>Te&&{content:`Go to Errors tab <span class="keyboard-shortcut">G</span>${e.isStandalone()?'&nbsp;<span class="keyboard-shortcut">S</span>':""}&nbsp;<span class="keyboard-shortcut">E</span>`}),D.addEventListener("keypress",N=>y(Zt.Tests,N)),D.$$click=()=>y(Zt.Tests),We(Te,D,()=>Te&&{content:`Go to Tests tab <span class="keyboard-shortcut">G</span>${e.isStandalone()?'&nbsp;<span class="keyboard-shortcut">S</span>':""}&nbsp;<span class="keyboard-shortcut">T</span>`}),M.addEventListener("keypress",N=>y(Zt.Coverage,N)),M.$$click=()=>y(Zt.Coverage),We(Te,M,()=>Te&&{content:`Go to Coverage tab <span class="keyboard-shortcut">G</span>${e.isStandalone()?'&nbsp;<span class="keyboard-shortcut">S</span>':""}&nbsp;<span class="keyboard-shortcut">C</span>`}),E.addEventListener("keypress",N=>y(Zt.Status,N)),E.$$click=()=>y(Zt.Status),We(Te,E,()=>Te&&{content:`Go to Status tab <span class="keyboard-shortcut">G</span>${e.isStandalone()?'&nbsp;<span class="keyboard-shortcut">S</span>':""}&nbsp;<span class="keyboard-shortcut">S</span>`}),A(S,x(se,{get when(){return r()},get children(){var N=Q2e();return A(N,r),N}}),null),A(W,x(Fn,{get children(){return[x(ot,{get when(){return l()===Zt.Logs},get children(){return x(Lxe,{get state(){return n.state},onFocus:N=>n.keyboard.onFocus(N,!0),icons:o})}}),x(ot,{get when(){return l()===Zt.Errors},get children(){return x(wxe,{get state(){return n.state},icons:o})}}),x(ot,{get when(){return l()===Zt.Tests},get children(){return x(Y2e,{get state(){return n.state},get keyboard(){return n.keyboard},setIcons:o})}}),x(ot,{get when(){return l()===Zt.Coverage},get children(){return x(Gke,{get state(){return n.state},icons:o})}}),x(ot,{get when(){return l()===Zt.Status},get children(){return x(o2e,{get state(){return n.state},icons:o})}})]}})),Me(N=>{var H=!!d(),U=l()===Zt.Logs,B=l()===Zt.Errors,Y=l()===Zt.Tests,ne=l()===Zt.Coverage,ee=l()===Zt.Status;return H!==N.e&&k.classList.toggle("!text-clip",N.e=H),U!==N.t&&I.classList.toggle("selected",N.t=U),B!==N.a&&T.classList.toggle("selected",N.a=B),Y!==N.o&&D.classList.toggle("selected",N.o=Y),ne!==N.i&&M.classList.toggle("selected",N.i=ne),ee!==N.n&&E.classList.toggle("selected",N.n=ee),N},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),C})()}dn(["click"]);class yte{constructor(e={file:"",id:"",range:"",selection:{implicit:{}},isQuokka:!1},t){this._state=e,this._setState=t,this._coreToApp=Y1(),this._appToCore=U1(),this._disposable.add(this._coreToApp.onLogsByLocation(i=>this.onTestDetails(i))),this._appService=Dt()}_coreToApp;_appToCore;_disposable=new Fo;_appService;trackLogsByLocation(){this._appToCore.trackLogsByLocation(this._state.file,this._state.id,this._range())}exploreEntity(){const e=this._range();if(!e)return;const t={location:{file:this._state.file,line:e[0],column:e[1]},source:{log:!0}};this._appToCore.exploreEntity(t)}_range(){return this._state.range?this._state.range.split(":").map(e=>+e):void 0}_prepareLogEntryDetails(e){const t=e.globalLogs.map(s=>({...s,test:void 0})),i=e.tests.map(s=>s.logs.map(r=>({...r,test:s}))).flat().concat(t);return fs.updateLogs(this._state,i)}onTestDetails(e,t){this._appService.closeFind(),this._setState(Gt(i=>{if(e){const s=this._prepareLogEntryDetails(e);i.selection.log=s.selected,this._setState("logs",At({items:s.items,stackTraceToShow:s.stackTraceToShow}))}else i.logs=void 0}))}dispose(){this._disposable.dispose()}static Provider}const[eTe,tTe]=Go(n=>n.initial);yte.Provider=eTe;var iTe=G('<div class="absolute inset-0 flex flex-col">');function nTe(n){const[e,t]=he(),i=Dt(),s=Bg(),r=tTe(),o=i.getFindState(),[a,l]=he(),c=he(),[d]=c,u=new aw("logs.logs",i,s);$e(n.keyboard.key,p=>{if(p){const b=p.event,w=p.namespace;u.matches(w)&&u.handle(w,b,n.state)}});function h(){r.exploreEntity()}const f=()=>i.getDebuggerStarted()();Bn(()=>{r.trackLogsByLocation()});const[g,m]=he();return x($r,{header:"Explore Value",headerClass:"pl-2",scrollable:e,namespace:"logs.logs",contentClass:"panel-font-size flex flex-col",get icons(){return g()??[x(se,{get when(){return!f()},get children(){return x(Ee,{class:"codicon-list-tree",tooltip:"Explore value",namespace:"logs.header.action",onClick:()=>{h()},tabIndex:0})}})]},get overlays(){return[x(Jd,{onUpdateSearchTerm:async p=>{const b=await d()?.search(p);l(b?{searchTerm:p,current:b?.current,total:b?.total}:void 0)},onNextResult:async()=>{const p=await d()?.jumpToNext();l(p?{current:p?.current,total:p?.total}:void 0)},onPreviousResult:async()=>{const p=await d()?.jumpToPrevious();l(p?{current:p?.current,total:p?.total}:void 0)},onClose:async p=>{await d()?.exit(p),i.closeFind()},searchStatus:a,isVisible:()=>o()?.namespace==="logs.logs",mode:()=>"enter"})]},get children(){var p=iTe();return We(Wc,p,()=>Wc&&{controller:c,prefix:"ll"}),A(p,x(ow,{get state(){return n.state},service:s,namespace:"logs",scrollableElementRef:t,icons:m})),p}})}var sTe=G("<a class=hidden target=_blank>"),rTe=G("<button>");function on(n){const[e,t]=he();Fi(()=>{t(n.classList)});const[i,s]=he(null);return(()=>{var r=rTe();return We(Te,r,()=>Te&&{content:n.tooltip,...n.tooltipOpts}),Yh(r,"click",n.onClick?n.onClick:n.href?()=>i()?.click():void 0,!0),A(r,x(se,{get when(){return n.href},get children(){var o=sTe();return We(s,o),Me(()=>xt(o,"href",n.href)),o}}),null),A(r,()=>n.children,null),Me(o=>{var a=e(),l=`
    text-[--button-foreground]
    bg-[--button-background]
    hover:bg-[--button-hover-background]
    border border-[--button-border]
    rounded-sm px-3 py-1
    ${n.class||""}`;return o.e=nn(r,a,o.e),l!==o.t&&mr(r,o.t=l),o},{e:void 0,t:void 0}),r})()}dn(["click"]);var oTe=G('<div class="value !w-auto text-right font-mono !font-normal dimmer"><span class="codicon codicon-files pr-1 !text-[length:90%]"></span><span class=px-[0.12rem]>/');function aTe(){const n=Dt(),e=n.getTestFilesTotal(),t=n.getTestFilesStarted();return Bn(()=>{n.trackExecutionProgress()}),Ot(()=>{n.untrackExecutionProgress()}),(()=>{var i=oTe(),s=i.firstChild,r=s.nextSibling;return A(i,t,r),A(i,e,null),i})()}var lTe=G('<div class="inline-flex justify-center pb-[0.1rem] pr-1 align-middle"><span class="codicon !text-[length:--icon-font-size]">');function cTe(n){const e=Dt(),t=e.getTestRunModeParams(),i=e.getProject();return x(se,{get when(){return i()},get children(){var s=lTe(),r=s.firstChild;return We(Te,s,()=>Te&&{content:n.tooltip&&zC(i(),e.isEditorConnected(),t(),e.getCoreVersion())||void 0}),Me(o=>{var a=!!t(),l={"codicon-root-folder":!!t(),"codicon-root-folder opacity-80":!t()};return a!==o.e&&s.classList.toggle("text-[--editor-warning-foreground]",o.e=a),o.t=nn(r,l,o.t),o},{e:void 0,t:void 0}),s}})}function zC(n,e,t,i){const s=Dh(n.path,1/0);return`
  <div class="[&_a]:text-[--link-foreground] [&_a]:underline [&_li]:break-words">
    Wallaby${i?` Core <b>v${i.version}${i.pinned?' <span class="text-[--editor-warning-foreground]">(pinned)</span>':""}</b>`:""} is currently running
    <ul class="px-3 list-disc">
    <li>in <span class='opacity-80'>${Uge(n.path)}</span></li>
    <li>with ${s==="auto.config"?"<b>auto-config</b>":`<b>${s}</b> config file`}</li>${t?`<li>
          ${t.smartRunMode?' in <b><a href="https://wallabyjs.com/docs/intro/smart-start.html" target="_blank">Smart Mode</a></b>':' only a subset of <b><a href="https://wallabyjs.com/docs/intro/selected-tests.html#automatic-test-focusing" target="_blank">selected tests</a></b>'}</li></ul>
    <br />
    ${t.included?.length?`Following test files are ${t.smartRunMode?"watched":"included"}:
    <ul class="px-3 list-disc [&_li]:font-bold">
      ${(t.included||[]).map(r=>`<li>${r}</li>`).join("")}
    </ul>
    <br />
    `:""}
    ${t.excluded?.length?`Following test files are excluded:
    <ul class="px-3 list-disc [&_li]:font-bold">
      ${(t.excluded||[]).map(r=>`<li>${r}</li>`).join("")}
    </ul>
    <br />
    `:""}
    ${t.smartRunMode?`<b>${t.smartRunMode==="edit"?e?"Edit":"Change and save":"Open"}</b> ${t.included?.length?"other":"some"} test files in your editor to monitor and execute more tests.`:"You can add more tests to the set of selected tests by using supported test modifiers (ie. <b>it.only</b> of <b>test.only</b>), or switch to running all tests by removing the test modifiers or file comments."}
      `:"</ul>"}
    ${t?.smartRunMode?"":'<br/>For large projects with many tests or with tests that take much time to run it is recommened to try <b><a href="https://wallabyjs.com/docs/intro/smart-start.html" target="_blank">Smart Mode</a></b>.'}
  </div>`}var dTe=G('<span class="mr-1 flex items-center justify-center"><span class="codicon codicon-color-mode pr-0.5 !text-[length:85%]"></span>%'),uTe=G('<span class="mr-1 flex items-center justify-center"><span class="codicon pr-0.5 !text-[length:85%]">'),hTe=G('<span class="font-mono text-[var(--subtle-foreground)]">(<!>)'),fTe=G('<span class="codicon codicon-loading codicon-modifier-spin ml-1 text-[var(--subtle-foreground)]">'),gTe=G('<div class="group cursor-default hover:brightness-125"><div class="label !normal-case"><span class="codicon codicon-file icon-opacity mr-1"></span></div><div class="value ml-1"><div class="flex items-center justify-center transition-opacity duration-300">'),mTe=G("<span>Click to show file uncovered regions"),H9=G("<br>"),pTe=G('<tr><td class="pr-2 font-bold">Code coverage</td><td class="font-bold text-[var(--testing-icon-passed)]">%'),bTe=G('<tr><td class="pr-2 font-bold">Failing</td><td class=text-[var(--error-foreground)]> test(s)'),vTe=G('<tr><td class="pr-2 font-bold">Total</td><td class=opacity-80> test(s)'),_Te=G('<div><table class="border-spacing-x-4 border-spacing-y-1"><tbody><tr><td class="pr-2 font-bold"> file</td><td class=opacity-80>'),wTe=G('<div class="group !mr-4 hover:brightness-125"><div class=label><span class="codicon codicon-pinned icon-opacity"></span></div><div class=value>v'),yTe=G('<div class="group !mr-4 cursor-default hover:brightness-125"><div class=label><span class="codicon codicon-root-folder icon-opacity"></span></div><div class=value> / '),STe=G('<div class="group !mr-1 cursor-pointer hover:brightness-125"><div class=label><span class="codicon codicon-color-mode icon-opacity"></span></div><div class="value !min-w-[4em]">%'),CTe=G('<div class=group><div class=label><span class="codicon codicon-beaker icon-opacity"></span></div><div class=value>'),LTe=G('<div class=group><div class=label><span class="codicon codicon-beaker-stop icon-opacity"></span></div><div class=value>'),kTe=G('<div class="dim flex"><div class="relative [&amp;_div.group:last-child_.value]:min-w-0"><div class="flex justify-end pr-1"><div class=group><div class=label><span class="codicon codicon-error icon-opacity"></span></div><div class=value></div></div><div class=group><div class=label><span class="codicon codicon-pass icon-opacity"></span></div><div class=value>'),xTe=G('<div class="flex h-full w-full items-center pl-2.5 text-[length:--panel-subtle-font-size] [&amp;_.codicon]:text-[length:--icon-smaller-font-size] [&amp;_button.dim]:opacity-70 [&amp;_div.dim]:opacity-70 [&amp;_div.dimmer]:opacity-65 [&amp;_div.group]:mr-1 [&amp;_div.group]:inline-flex [&amp;_div.group]:h-[--panel-item-height] [&amp;_div.label]:mr-1 [&amp;_div.label]:inline-flex [&amp;_div.label]:items-center [&amp;_div.label]:uppercase [&amp;_div.value]:ml-auto [&amp;_div.value]:inline-flex [&amp;_div.value]:min-w-[2em] [&amp;_div.value]:items-center [&amp;_div.value]:whitespace-nowrap"><div class="dim mr-2 flex-grow text-left"></div><div class="flex min-w-0 truncate">'),TTe=G('<div class="group cursor-pointer hover:brightness-125"><div class="label text-[--editor-warning-foreground]"><span class="codicon codicon-filter-filled icon-opacity"></span></div><div class=value>'),DTe=G('<div class="value ml-[0.12rem] mr-2 !w-auto flex-grow text-nowrap text-left font-mono !font-normal text-[var(--subtle-foreground)] [word-spacing:-0.25em]">(<!>)'),ITe=G('<div class="dimmer label text-nowrap pb-[0.03125rem] pr-1 text-left"><div><div class="codicon codicon-loading codicon-modifier-spin cursor-auto">'),MTe=G('<div class="ml-auto flex text-nowrap pl-3 text-[length:--panel-subtle-font-size]">'),ETe=G('<div class="ml-auto flex text-nowrap pl-3 text-[length:--panel-subtle-font-size]"><div class="value ml-[0.12rem] mr-2 !w-auto flex-grow cursor-default text-nowrap text-left font-mono !font-normal text-[var(--subtle-foreground)] [word-spacing:-0.25em]">'),NTe=G('<div class=min-w-full><div class="flex [&amp;_.codicon]:text-[length:--icon-smaller-font-size] [&amp;_div.dimmer]:opacity-65 [&amp;_div.label]:mr-1 [&amp;_div.label]:inline-flex [&amp;_div.label]:items-center [&amp;_div.label]:uppercase [&amp;_div.value]:ml-auto [&amp;_div.value]:inline-flex [&amp;_div.value]:min-w-[2em] [&amp;_div.value]:items-center"><div>Click to open "Status" side view'),RTe=G('<span title="Last run duration">'),WTe=G("<span> - "),ATe=G("<span>");function FTe(n){const e=Dt(),[t,i]=he(!1),[s,r]=he(!1),[o,a]=he(),l=J(()=>e.getProject()()?.thresholds?.lowCoverage||0),c=dte.createScope();Ot(()=>c.dispose());const d=J(()=>{const g=n.activeEditorFileStatus.status==="running";return{isRunning:g,showCountdown:g&&s(),showSpinner:g&&!s()&&t(),showAnyStatus:g&&(s()||t())}});Fi(()=>{const{estimatedCompletionTime:g,status:m}=n.activeEditorFileStatus;if(m==="running"&&typeof g=="number"){const p=b=>{const w=Math.max(0,g-b),v=w>0;if(v!==s()&&r(v),v){const _=Cg(w);_!==o()&&a(_)}else a(void 0),i(!0);return v};if(p(Date.now())){const b=c.addTask(p,{intervalMs:50});b.request(),Ot(()=>b.cancel())}}else s()&&r(!1),o()!==void 0&&a(void 0),i(!1)});const u=J(()=>n.activeEditorFileStatus.coverage!=null),h=J(()=>n.activeEditorFileStatus.coverage===100),f=J(()=>{if(n.activeEditorFileStatus.testFile?.total)return n.activeEditorFileStatus.testFile});return(()=>{var g=gTe(),m=g.firstChild;m.firstChild;var p=m.nextSibling,b=p.firstChild;return We(Te,g,()=>Te&&{content:(()=>{var w=_Te(),v=w.firstChild,_=v.firstChild,y=_.firstChild,C=y.firstChild,S=C.firstChild,k=C.nextSibling;return A(w,x(se,{get when(){return J(()=>!!u())()&&!h()},get children(){return[mTe(),H9(),H9()]}}),v),A(C,()=>n.activeEditorFileStatus.testFile?"Test":"Source",S),A(k,()=>n.activeEditorFileStatus.filePath),A(_,x(se,{get when(){return u()},get children(){var I=pTe(),T=I.firstChild,D=T.nextSibling,M=D.firstChild;return A(D,()=>n.activeEditorFileStatus.coverage.toFixed(2),M),Me(()=>D.classList.toggle("!text-[var(--editor-warning-foreground)]",n.activeEditorFileStatus.coverage<l())),I}}),null),A(_,x(se,{get when(){return f()},get children(){return[x(se,{get when(){return f()?.failing},get children(){var I=bTe(),T=I.firstChild,D=T.nextSibling,M=D.firstChild;return A(D,()=>f()?.failing,M),I}}),(()=>{var I=vTe(),T=I.firstChild,D=T.nextSibling,M=D.firstChild;return A(D,()=>f()?.total,M),I})()]}}),null),Me(()=>C.classList.toggle("!pr-1",!u()&&!f())),w})()}||void 0),g.$$click=w=>{!u()||h()||e.showFileUncoveredRegions(n.activeEditorFileStatus.filePath,n.activeEditorFileStatus.filePath,w)},A(m,()=>Dh(n.activeEditorFileStatus.filePath,1/0),null),A(p,x(se,{get when(){return u()},get children(){var w=dTe(),v=w.firstChild,_=v.nextSibling;return A(w,()=>n.activeEditorFileStatus.coverage.toFixed(2),_),w}}),b),A(p,x(se,{get when(){return f()},get children(){var w=uTe(),v=w.firstChild;return A(w,x(se,{get when(){return f().failing},get children(){return[J(()=>f().failing)," / "]}}),null),A(w,()=>f().total,null),Me(_=>{var y=!!f().failing,C=!f().failing;return y!==_.e&&v.classList.toggle("codicon-error",_.e=y),C!==_.t&&v.classList.toggle("codicon-check-all",_.t=C),_},{e:void 0,t:void 0}),w}}),b),A(b,x(se,{get when(){return d().showCountdown},get children(){var w=hTe(),v=w.firstChild,_=v.nextSibling;return _.nextSibling,A(w,o,_),w}}),null),A(b,x(se,{get when(){return d().showSpinner},get children(){return fTe()}}),null),Me(w=>{var v=!!(u()&&!h()),_=!!d().showAnyStatus,y=!d().showAnyStatus;return v!==w.e&&g.classList.toggle("cursor-pointer",w.e=v),_!==w.t&&b.classList.toggle("opacity-100",w.t=_),y!==w.a&&b.classList.toggle("opacity-0",w.a=y),w},{e:void 0,t:void 0,a:void 0}),g})()}function gV(n){he(!1);const e=Dt(),t=e.getRunStats(),i=e.getStatus(),s=J(()=>e.getTestRunModeParams()()),r=J(()=>e.getProject()()),o=J(()=>i().estimatedCompletionTime),[a,l]=he(),[c,d]=he(!1);$e(o,m=>{if(m!==void 0){const p=Math.max(0,m-Date.now());l(Cg(p)),d(p>0);const b=setTimeout(()=>{d(!1)},p+.25*1e3),w=setInterval(()=>{const v=Math.max(0,m-Date.now());l(Cg(v)),v===0&&clearInterval(w)},50);Ot(()=>{clearInterval(w),clearTimeout(b)})}else l(),d(!1)}),Bn(()=>{e.trackStats(),e.trackStatus()}),Ot(()=>{e.untrackStats(),e.untrackStatus()});const[u,h]=he(!0),f=J(m=>u()?{delay:i().state==="running"?0:void 0,onHide:()=>{h(!0)},onShow:()=>{h(!1)}}:m),g=()=>e.isEditorConnected();return(()=>{var m=xTe(),p=m.firstChild,b=p.nextSibling;return A(p,x(se,{get when(){return n.activeEditorFileStatus},get children(){return x(FTe,{get activeEditorFileStatus(){return n.activeEditorFileStatus}})}})),A(b,()=>n.additionalContent,null),A(b,x(se,{get when(){return t()?.firstTestResultAvailable},get children(){var w=kTe(),v=w.firstChild,_=v.firstChild,y=_.firstChild,C=y.firstChild,S=C.nextSibling,k=y.nextSibling,I=k.firstChild,T=I.nextSibling;return A(w,x(se,{get when(){return J(()=>!!e.getCoreVersion()?.pinned)()&&e.getCoreVersion()?.version},get children(){var D=wTe(),M=D.firstChild,E=M.nextSibling;return E.firstChild,D.$$click=()=>g()&&e.installCoreVersion(),We(Te,D,()=>Te&&{content:`${g()?"Click to install latest or different Wallaby Core version<br/><br/>":""}Currently used Wallaby Core v${e.getCoreVersion().version} is pinned and will not receive automatic updates.`}||void 0),A(E,()=>e.getCoreVersion().version,null),Me(W=>{var P=!!g(),N=!g();return P!==W.e&&D.classList.toggle("cursor-pointer",W.e=P),N!==W.t&&D.classList.toggle("cursor-default",W.t=N),W},{e:void 0,t:void 0}),D}}),v),A(w,x(se,{get when(){return r()},get children(){var D=yTe(),M=D.firstChild,E=M.firstChild,W=M.nextSibling,P=W.firstChild;return We(Te,D,()=>Te&&{content:`${zC(r(),e.isEditorConnected(),s(),e.getCoreVersion())}`}||void 0),A(W,()=>r().name,P),A(W,()=>Dh(r().path,1/0),null),Me(()=>E.classList.toggle("text-[--editor-warning-foreground]",!!s())),D}}),v),A(_,x(se,{get when(){return!t().filtered},get fallback(){return(()=>{var D=TTe(),M=D.firstChild,E=M.nextSibling;return D.$$click=()=>e.toggleTestFilter(),We(Te,D,()=>Te&&{content:"Unfocus all focused tests"}),A(E,()=>t().filtered),D})()},get children(){var D=STe(),M=D.firstChild,E=M.nextSibling,W=E.firstChild;return D.$$click=()=>e.openInSideView(Zt.Coverage),We(Te,D,()=>Te&&{content:'Open "Coverage" in side view'}),A(E,()=>t().coverage.value,W),D}}),y),y.$$click=()=>t().failing>0&&e.openInSideView(Zt.Tests,{tests:{filter:"@failed"}}),We(Te,y,()=>Te&&t().failing>0&&{content:"View <b>failing</b> tests in side view"}||void 0),A(S,()=>t().failing),k.$$click=()=>t().passing>0&&e.openInSideView(Zt.Tests,{tests:{filter:"@passed"}}),We(Te,k,()=>Te&&t().passing>0&&{content:"View <b>passing</b> tests in side view"}||void 0),A(T,()=>t().passing),A(_,x(se,{get when(){return t().todo>0},get children(){var D=CTe(),M=D.firstChild,E=M.nextSibling;return D.$$click=()=>t().todo>0&&e.openInSideView(Zt.Tests,{tests:{filter:"@todo"}}),We(Te,D,()=>Te&&t().todo>0&&{content:"View <b>todo</b> tests in side view"}||void 0),A(E,()=>t().todo),Me(W=>nn(D,{"cursor-pointer hover:brightness-125":t().todo>0},W)),D}}),null),A(_,x(se,{get when(){return t().skipped>0},get children(){var D=LTe(),M=D.firstChild,E=M.nextSibling;return D.$$click=()=>t().skipped>0&&e.openInSideView(Zt.Tests,{tests:{filter:"@skipped"}}),We(Te,D,()=>Te&&t().skipped>0&&{content:"View <b>skipped</b> tests in side view"}||void 0),A(E,()=>t().skipped),Me(W=>nn(D,{"cursor-pointer hover:brightness-125":t().skipped>0},W)),D}}),null),Me(D=>{var M=t().todo===0&&t().skipped===0,E=t().todo>0||t().skipped>0,W={"cursor-pointer hover:brightness-125":t().failing>0},P={"cursor-pointer hover:brightness-125":t().passing>0};return M!==D.e&&v.classList.toggle("min-w-[15em]",D.e=M),E!==D.t&&v.classList.toggle("min-w-[20em]",D.t=E),D.a=nn(y,W,D.a),D.o=nn(k,P,D.o),D},{e:void 0,t:void 0,a:void 0,o:void 0}),w}}),null),A(m,x(Ee,{class:"codicon-pulse dim mx-[0.09375rem] py-[0.12625rem] !text-[length:--panel-larger-font-size] transition-all",get classList(){return{"[animation:fade-pulse_1200ms_ease-in-out_infinite]":i().state!=="idle"&&i().state!=="pendingCannotDetermineTestsToRun"&&i().state!=="pendingInvalidSyntax"||i().longRunningOperation,"text-[--error-foreground]":i().longRunningOperation}},namespace:"overview.misc.action",onClick:()=>{e.openInSideView(Zt.Status)},tabIndex:0,get tooltipOpts(){return f()},get tooltip(){return(()=>{var w=NTe(),v=w.firstChild;return v.firstChild,A(v,x(Fn,{get children(){return[x(ot,{get when(){return i().state==="running"},get children(){var _=MTe();return A(_,x(Fn,{get children(){return[x(ot,{get when(){return c()},get children(){var y=DTe(),C=y.firstChild,S=C.nextSibling;return S.nextSibling,A(y,a,S),y}}),x(ot,{when:!0,get children(){var y=ITe(),C=y.firstChild;return Me(()=>mr(C,`inline-block text-[length:--icon-smaller-font-size] leading-[0] transition-all duration-[1000ms] ${i().longRunningOperation?"animate-pulse text-[--error-foreground]":""}`)),y}})]}}),null),A(_,x(aTe,{}),null),_}}),x(ot,{get when(){return i().timeToCompleteResult},get children(){var _=ETe(),y=_.firstChild;return A(y,(()=>{var C=J(()=>i().timeToCompleteResult===i().timeToFirstResult||!i().timeToFirstResult);return()=>C()?(()=>{var S=RTe();return A(S,()=>z0(i().timeToCompleteResult)),S})():(()=>{var S=WTe(),k=S.firstChild;return A(S,()=>z0(i().timeToFirstResult),k),A(S,()=>z0(i().timeToCompleteResult),null),Me(()=>xt(S,"title",`Time to first result: ${z0(i().timeToFirstResult)}
Accumulated run time: ${z0(i().timeToCompleteResult)}`)),S})()})()),_}})]}}),null),A(w,(()=>{var _=J(()=>!!r());return()=>_()?[H9(),(()=>{var y=ATe();return Me(()=>y.innerHTML=zC(r(),e.isEditorConnected(),s(),e.getCoreVersion())),y})()]:void 0})(),null),w})()}}),null),m})()}function z0(n){let e="ms",t=n;return t>1e3&&(t=t/1e3,e="s",t>60&&(t=t/60,e="m")),`${Math.round(t*100)/100}${e}`}dn(["click"]);const dy=(n,e)=>{let t=yg(n,e?.());return $e(e,i=>{t=yg(n,i)}),(...i)=>t(...i)};class mV{constructor(e={selection:{test:"allLogsAndErrors",implicit:{}},startupEvents:[],tests:{searchControlVisible:!0},testFileProgressByFile:{}},t){this._state=e,this._setState=t,this._coreToApp=Y1(),this._appToCore=U1(),this._appService=Dt(),this._disposable.add(this._coreToApp.onOverviewTests(this.onOverviewTests.bind(this))),this._disposable.add(this._coreToApp.onTestAddedToFilterFromEditor(this.onTestAddedToFilterFromEditor.bind(this))),this._disposable.add(this._coreToApp.onAllLogsAndErrors(this.onAllLogsAndErrors.bind(this))),this._disposable.add(this._coreToApp.onTestDetails(this.onTestDetails.bind(this))),this._disposable.add(this._coreToApp.onRunError(this.onRunErrorChanged.bind(this))),this._disposable.add(this._coreToApp.onSelectedEntities(this.onSelectedEntities.bind(this))),this._disposable.add(this._coreToApp.onAutoSelectedEntities(this.onAutoSelectedEntities.bind(this))),this._disposable.add(this._coreToApp.onDebuggerState(this.onDebuggerStateChanged.bind(this))),this._disposable.add(this._coreToApp.onTestNotFound(this.onTestNotFound.bind(this))),this._disposable.add(this._coreToApp.onCallStack(this.onCallStackAvailable.bind(this))),this._disposable.add(this._coreToApp.onStartupEvent(this.onStartupEvent.bind(this))),this._disposable.add(this._coreToApp.onActiveEditorFileStatus(this.onActiveEditorFileStatusChanged.bind(this))),this._disposable.add(this._coreToApp.onTestFileProgress(this.onTestFileProgress.bind(this))),this._disposable.add(this._coreToApp.onTestTree(i=>this._testsService?.updateTree(i))),this._disposable.add(this._coreToApp.onTestTreeFilter(i=>this._testsService?.updateFilter(i))),this._disposable.add(this._coreToApp.onTestTreeDetails(i=>this._testsService?.updateDetails(i))),this._disposable.add(this._coreToApp.onTrackedCursorLocation(i=>this.onTrackedCursorLocation(i))),this._disposable.add(()=>this.untrackOverviewTestList()),this._disposable.add(()=>{this._progress?.dispose(),this._appToCore.untrackOverviewTestList(),this._appService.optOutFromLogsAndErrors()}),this._setState("displayLimits",{tests:{apply:!0},logs:{apply:!0},errors:{apply:!0}}),$e(()=>this._appService.isIntegratedOverview()&&!this._state.lineTests?.loc,i=>{this._setState("allowedToShowTestTree",i)}),$e(()=>this._state.allowedToShowTestTree&&this._appService.appSettings()[0].overviewTests.tree,i=>{this._setState("showTestTree",i)})}_coreToApp;_appToCore;_disposable=new Fo;_appService;_testsService;_progress;get tests(){return this._testsService||(this._testsService=new jn(this._state,this._setState,this._setState,this._appService,this._appToCore,J(()=>this._appService.getProject()()?.thresholds.slowTest))),this._testsService}trackOverviewTestList(){this._appToCore.trackOverviewTestList(),!this._state.debuggerState?.started&&this._state.selection.test==="allLogsAndErrors"&&this._appToCore.trackAllLogsAndErrors(),this._appService.optInToLogsAndErrors(),this.selectAllLogsAndErrors()}untrackOverviewTestList(){this._appToCore.untrackOverviewTestList(),this._appService.optOutFromLogsAndErrors(),this._setState("testList",void 0)}trackStartupEvents(){this._appToCore.trackStartupEvents()}untrackStartupEvents(){this._appToCore.untrackStartupEvents()}selectTest(e){e.id!==this._state.selection.test&&(this._appToCore.trackTest(e.path,e.id),this._setState("selection","test",e.id),this._startApplyingLogsAndErrorsDisplayLimits())}_startApplyingLogsAndErrorsDisplayLimits(){this._startApplyingLogsDisplayLimits(),this._startApplyingErrorsDisplayLimits()}_startApplyingLogsDisplayLimits(){this._setState("displayLimits","logs",At({apply:!0}))}_startApplyingErrorsDisplayLimits(){this._setState("displayLimits","errors",At({apply:!0}))}selectAllLogsAndErrors(){if(this._state.selection.test!=="allLogsAndErrors"){if(this._appToCore.trackAllLogsAndErrors(),this._setState("selection","test","allLogsAndErrors"),this._state.testList){const e={...this._state.testList};let t=!1;for(const i of Object.values(e))i.passing&&!i.focused&&(delete e[i.id],t=!0);t&&this._setState("testList",At(e))}this._startApplyingLogsAndErrorsDisplayLimits()}}loadRestOfTests(){this._setState("displayLimits","tests",At({apply:!1})),this._appToCore.trackOverviewTestList()}loadRestOfLogs(){this._setState("displayLimits","logs",At({apply:!1})),this._appToCore.trackContextLogsAndErrors()}loadRestOfErrors(){this._setState("displayLimits","errors",At({apply:!1})),this._appToCore.trackContextLogsAndErrors()}onOverviewTests(e){this._setState(Gt(t=>{t.lineTests=e.lineTests?{loc:e.lineTests.loc,active:e.lineTests.active}:void 0,t.numberOfFailingTests=e.numberOfFailingTests,t.numberOfGlobalErrors=e.numberOfGlobalErrors,t.idsOfTestFilesWithGlobalErrors=e.idsOfTestFilesWithGlobalErrors?.reduce((a,l)=>(a[l]=!0,a),{});let i,s=!1;if(!t.lineTests&&e.idsOfTestFilesWithGlobalErrors&&t.testsByTestFile){e.tests||(e.tests={});const a=e.tests;for(const l of e.idsOfTestFilesWithGlobalErrors){const c=t.testsByTestFile[l];c&&Object.values(c).forEach(d=>{a[d.id]||(delete d.focused,a[d.id]=d)})}}const r=Object.values(e.tests||{}),o=e.tests?.[t.selection.test];if(t.selection.test!=="allLogsAndErrors"&&!o){const a=t.selection.test;if(t.selection.test="allLogsAndErrors",s=!0,!(t.numberOfDisplayedTests!==r.length)&&r.length){const c=t.testList?.[a]?.index;if(c!==void 0){const d=r[c];t.selection.test=d.id,s=!1,i=d.path}}}if(t.lineTests?.loc)if(s=!1,r.length){if(t.selection.test==="allLogsAndErrors"){const a=r[0];i=a.path,t.selection.test=a?.id}}else this._setState("logs",void 0),this._setState("errors",void 0),t.selection.test="allLogsAndErrors";if(t.testsByTestFile={},t.numberOfDisplayedTests=r.length,t.displayLimits?.tests?.apply&&(t.displayLimits.tests.applied=r.splice(bn.tests).length>0),r.length===0&&this._setState("displayLimits","tests",At({apply:!0})),this._setState("testList",At(r.reduce((a,l,c)=>{const d={...l,index:c},u=l.path[0]+"";if(u){let h=t.testsByTestFile[u];h||(h=t.testsByTestFile[l.path[0]]={}),h[l.id]=d,t.testFileProgressByFile[u]||this._setState("testFileProgressByFile",u,{fileId:u,status:"idle",remainingTimeLabel:"",duration:0,isDeterminate:!1,isIdle:!0,hasTestFileProgressTime:!1})}return a[l.id]=d,a},{}))),i?this._appToCore.trackTest(i):s&&this._appToCore.trackAllLogsAndErrors(),t.selection.selectOnNextTestListUpdate){const a=this._state.testList?.[t.selection.selectOnNextTestListUpdate];a&&this.selectTest({path:a.path,id:t.selection.selectOnNextTestListUpdate}),this._setState("selection","selectOnNextTestListUpdate",void 0)}}))}onTestAddedToFilterFromEditor(e){const t=this._state.testList?.[e];t?this.selectTest({path:t.path,id:e}):this._setState("selection","selectOnNextTestListUpdate",e)}resetOverviewTestListSource(){this._appToCore.resetOverviewTestListSource(),this._setState("selection","test","allLogsAndErrors"),this._appService.untrackCodeViewerCursor()}trackCurrentLineTests(e){this._appService.shouldOpenInEditor(e)?this._appToCore.trackCurrentLineTests({source:"editor"}):this._appService.shouldOpenInBrowser(e)&&(this._appToCore.trackCurrentLineTests({source:"code-viewer"}),this._appService.trackCodeViewerCursor()),this._setState("lineTests",t=>t?{...t,active:!0}:{active:!0})}untrackCurrentLineTests(){if(!this._state.lineTests?.active||!this._state.lineTests.loc){this.resetOverviewTestListSource();return}this._appToCore.untrackCurrentLineTests(),this._setState("lineTests",e=>e?{...e,active:!1}:{active:!1})}onAllLogsAndErrors(e){this._appService.closeFind(),this._setState(Gt(t=>{t.runError=e.runError;const i=!!t.runError,s=e.runError?[{id:$n,message:e.runError.message,stack:[],header:e.runError.header}]:[],r=e.globalLogs.slice();e.globalErrors&&s.push(...e.globalErrors);const o=t.idsOfTestFilesWithGlobalErrors&&Object.keys(t.idsOfTestFilesWithGlobalErrors).length&&{...t.idsOfTestFilesWithGlobalErrors},a=Object.keys(t.filesWithExpressionsToEvaluate?.files||{}),l=a.length>0?new Set(a):void 0;r.forEach(f=>{f.fileId&&l?.delete(f.fileId)}),Object.values(e.tests).forEach(f=>{if(f.errors){const g=f.errors.map((m,p)=>({...m,id:vb(m,f,p),test:f}));s.push(...g)}f.logs&&r.push(...f.logs.map(g=>(g.fileId&&l?.delete(g.fileId),{...g,test:f}))),o&&delete o[f.path[0]]}),l?.size!==0&&this._resetExpressionsToEvaluate(l);let c,d;if(o){if(t.errors?.all){c=[];for(const f of t.errors.all){const g=f.test?.path?.[0];g&&o[g]&&(c=c||[],c.push({...f,maybeObsolete:!0}))}}if(t.logs?.items){d=[];for(const g of Object.values(t.logs.items)){const m=g.test?.path?.[0];m&&o[m]&&(g.test&&(g.test.missing=!0),d.push(...Object.values(g.logs).map(p=>({...p,maybeObsolete:!0}))))}const f=t.logs.items.global?.logs;if(f){const g={...f};e.globalLogs.forEach(m=>{delete g[m.id]}),d.push(...Object.values(g).map(m=>({...m,maybeObsolete:!0})))}}}c&&s.push(...c),d&&r.push(...d),t.displayLimits?.errors?.apply?(t.displayLimits.errors.applied=s.splice(bn.errors).length>0,t.displayLimits.allErrorsLimitApplied=t.displayLimits.errors.applied):t.displayLimits&&(t.displayLimits.allErrorsLimitApplied=!1,s.length<bn.errors&&this._startApplyingErrorsDisplayLimits());const u={};let h=0;if(s.forEach((f,g)=>{f.maybeObsolete?R_(f):Sg(f,{marked:f.id&&!!this._state.selection.implicit.errors?.has(f.id)||void 0,active:this._state.selection.implicit.error===f.id,allowSkippingCompactDiff:this._appService.appSettings()[0].errors.diff?.compact==="auto"}),h+=f.size||0,(g>=bn.errorsWithFullDisplayOnly||g>0&&h>bn.errorSizeBytesWithFullDisplayOnly)&&(f.allowToDisplayFullyTruncated=!0),u[f.id]=f}),t.displayLimits?.logs?.apply?(t.displayLimits.logs.applied=r.splice(bn.logs).length>0,t.displayLimits.allLogsLimitApplied=t.displayLimits.logs.applied):t.displayLimits&&(t.displayLimits.allLogsLimitApplied=!1,r.length<bn.logs&&this._startApplyingLogsDisplayLimits()),r.length>0){const f=fs.updateLogs(this._state,r,t.selection.log,t.logs?.showStackTraceFor);t.selection.log=f.selected,this._setState("logs",At({items:f.items,maybeObsolete:i,stackTraceToShow:f.stackTraceToShow})),t.hasAnyLogs=!0}else t.logs=void 0,t.hasAnyLogs=!1;s.length>0?this._setState("errors",At({singleTestSelected:!1,all:s,maybeObsolete:i,allById:u})):t.errors=void 0,delete t.selection.implicit.test,delete t.selection.implicit.error,delete t.selection.implicit.log}))}onSelectedEntities(e){if(e.tests&&e.tests.length>0&&!this._state.debuggerState?.started)this._updateTestsSelection(e.tests)&&this._state.displayLimits?.tests?.applied&&this.loadRestOfTests(),!e.suppressFocus&&(!e.target||e.target==="overview")&&this._focus("overview.tests");else{if(e.errors&&e.errors.length>0){const t=this._updateErrorsSelection(e.errors);if(!e.logs||e.logs.length===0){t&&((this._state.displayLimits?.errors?.applied||this._state.displayLimits?.allErrorsLimitApplied)&&(!this._state.debuggerState?.started&&this._state.selection.test!=="allLogsAndErrors"?this._setState("displayLimits","errors",At({apply:!1})):this.loadRestOfErrors()),this._state.debuggerState?.started||(this._state.showTestTree?e.firstEntityOwner&&this._testsService?.restoreSelection(e.firstEntityOwner)||this._appService.appSettings()[1]("overviewTests","tree",!1):this.selectAllLogsAndErrors())),!e.suppressFocus&&(!e.target||e.target==="overview")&&this._focus("overview.errors");return}}else this._updateErrorsSelection([]);e.logs&&e.logs.length>0?(fs.updateLogsSelection(this._state,this._setState,e.logs,{diagram:e.diagram})&&((this._state.displayLimits?.logs?.applied||this._state.displayLimits?.allLogsLimitApplied)&&(!this._state.debuggerState?.started&&this._state.selection.test!=="allLogsAndErrors"?this._setState("displayLimits","logs",At({apply:!1})):this.loadRestOfLogs()),this._state.debuggerState?.started||(this._state.showTestTree?e.firstEntityOwner&&this._testsService?.restoreSelection(e.firstEntityOwner)||this._appService.appSettings()[1]("overviewTests","tree",!1):this.selectAllLogsAndErrors())),!e.suppressFocus&&(!e.target||e.target==="overview")&&this._focus("overview.logs")):fs.updateLogsSelection(this._state,this._setState,[],{diagram:e.diagram})}}onAutoSelectedEntities(e){fs.updateLogsSelection(this._state,this._setState,e.logs,{markOnly:!0})}onDebuggerStateChanged(e){this._setState("debuggerState",e.started?At(e):void 0),e?.current?.frame?.frame!==void 0&&this._state.debuggerCallStack?.frame!==void 0&&this._state.debuggerCallStack.stack.find(t=>t.frame===e.current.frame.frame)||this._setState("debuggerCallStack",void 0)}clearDebuggerCallStack(){this._setState("debuggerCallStack",void 0)}onCallStackAvailable(e){Jk(e.stack),this._setState("debuggerCallStack",e),this._appService.isIntegratedQuokkaOutput()||this._appService.openPanelIfRequired(Ue.OverviewDebuggerStatus)}onTestNotFound(){this.selectAllLogsAndErrors()}onStartupEvent(e){this._setState("startupEvents",t=>[...t.slice(-100),e])}onTrackedCursorLocation(e){this._setState("lineTests",{active:!0,loc:e})}onRunErrorChanged(e){this._appService.closeFind(),this._setState(Gt(t=>{const i=!!t.runError;if(!(!i&&!e)){if(t.runError=e,e){t.errors?t.errors.maybeObsolete=!0:t.errors={singleTestSelected:!1,all:[],allById:{},maybeObsolete:!0};const s={id:$n,message:e.message,stack:[],header:e.header};t.errors.all[0]?.id===$n?t.errors.all[0]=s:t.errors.all.unshift(s),t.errors.allById[$n]=s}else t.errors?.all[0]?.id===$n&&t.errors.all.shift(),delete t.errors?.allById?.[$n];this._setState("errors",At(t.errors)),t.logs&&(i?e||this._setState("logs",s=>({...s,maybeObsolete:void 0})):this._setState("logs",s=>({...s,maybeObsolete:!0})))}}))}onTestDetails(e){this._appService.closeFind(),this._setState(Gt(t=>{t.runError=e.runError;const i=!!t.runError;let s,r,o;if(e.missing){if(t.errors?.all){s=[];for(const d of t.errors.all)d.test?.id===e.id&&(d.maybeObsolete=!0,s.push(d))}t.logs?.items&&(r=Object.values(t.logs?.items[e.id]?.logs||{}).map(d=>({...d,maybeObsolete:!0})))}t.debuggerState?.current?.watchExpressions&&(o=Object.values(t.debuggerState.current.watchExpressions).map(d=>({id:d.id,fileId:d.fileId,watchExpressionId:d.id,value:{autoExpand:!0},watchExpressionWithNoValue:!0,loc:{file:d.file,line:d.range[0],column:d.range[1]}})));const a=(t.runError?[{id:$n,message:t.runError.message,stack:[],header:t.runError.header}]:[]).concat(e.globalErrors||[]).concat(s||e.errors.map((d,u)=>({...d,id:vb(d,e,u),test:e})));t.displayLimits?.errors?.apply?t.displayLimits.errors.applied=a.splice(bn.errors).length>0:t.displayLimits&&a.length<bn.errors&&this._startApplyingErrorsDisplayLimits();const l={};a.forEach(d=>{d.maybeObsolete||Sg(d,{marked:d.id&&!!this._state.selection.implicit.errors?.has(d.id)||void 0,active:this._state.selection.implicit.error===d.id,allowSkippingCompactDiff:this._appService.appSettings()[0].errors.diff?.compact==="auto"}),l[d.id]=d});const c=(r||[]).concat(o||[]).concat(e.logs||[]);if(t.displayLimits?.logs?.apply?t.displayLimits.logs.applied=c.splice(bn.logs).length>0:t.displayLimits&&c.length<bn.logs&&this._startApplyingLogsDisplayLimits(),c.length>0){const d=fs.updateLogs(this._state,c,t.selection.log,t.logs?.showStackTraceFor,e);t.selection.log=d.selected,this._setState("logs",At({items:d.items,maybeObsolete:i,stackTraceToShow:d.stackTraceToShow}))}else t.logs=void 0;a.length>0?this._setState("errors",At({singleTestSelected:!0,all:a,maybeObsolete:i,allById:l})):t.errors=void 0,delete t.selection.implicit.test,delete t.selection.implicit.error,delete t.selection.implicit.log}))}onActiveEditorFileStatusChanged(e){e.fileStatus!==void 0?this._setState("activeEditorFileStatus",At(e.fileStatus)):this._setState("activeEditorFileStatus",void 0)}onTestFileProgress(e){this._progress||(this._progress=new ute(()=>this._state.testFileProgressByFile,(t,i)=>this._setState("testFileProgressByFile",t,i),t=>this._setState(Gt(i=>{const s=i.testFileProgressByFile;for(const o in t){const a=s[o],l=t[o];a&&a.status===l.status&&a.estimatedCompletionTime===l.estimatedCompletionTime||(s[o]=a?{...a,...l}:{...l})}const r=i.testsByTestFile?new Set(Object.keys(i.testsByTestFile)):void 0;if(r)for(const o in s)r.has(o)||delete s[o]})))),this._progress.applyProgress(e.testFileProgress)}dispose(){this._disposable.dispose()}_resetExpressionsToEvaluate(e){this._setState(Gt(t=>{fs.resetExpressionsToEvaluate(t,e)}))}_updateTestsSelection(e){let t=!1;if(e){const i=this._state.selection.implicit.test;i&&this._setState("testList",i,r=>({...r,selection:void 0}));const s=e.length>0?e[0]:void 0;if(s){const r=this._state.testList?.[s];r?this.selectTest(r):t=!0,this._setState("testList",s,o=>({...o,selection:{active:!0}}))}this._setState("selection","implicit","test",s)}return t}_updateErrorsSelection(e){let t=!1;if(e){const i=e.length>0?e[0]:void 0,s=this._state.selection.implicit.errors||new Set,r=new Set(e);this._state.errors?(s.forEach(o=>{this._state.errors.allById?.[o]&&this._setState("errors","allById",o,a=>({...a,selection:void 0}))}),r.forEach(o=>{this._state.errors.allById?.[o]?this._setState("errors","allById",o,a=>({...a,selection:{active:o===i,marked:!0}})):t=!0})):t=!0,this._setState("selection","implicit",Gt(o=>{o.error=i,o.errors=r}))}return t}_focus(e){this._setState("selection","namespace",void 0),this._setState("selection","namespace",e),this._appService.isStandalone()||this._appToCore.focus("overview")}static Provider}const[VTe,im]=Go(n=>n.initial);mV.Provider=VTe;var yz=G("<div class=h-[15%]>"),PTe=G('<div class="marker z-20 bg-[--foreground] opacity-15 brightness-125">'),Sz=G('<span class="codicon codicon-lock !text-[length:--panel-smaller-font-size] text-[--editor-code-lens-foreground] opacity-60">'),OTe=G('<div class="absolute bottom-[-0.25rem] top-[-0.25rem] z-50 opacity-80 [&amp;_div.resizer]:absolute [&amp;_div.resizer]:top-0 [&amp;_div.resizer]:h-full [&amp;_div.resizer]:w-1 [&amp;_div.resizer]:cursor-col-resize [&amp;_div.resizer]:bg-[--editor-line-number-foreground]"><div class="h-full w-full bg-[--subtle-foreground] opacity-20"></div><div class="absolute left-0 right-0 top-0 z-10 h-[40%] cursor-grab"></div><div class="resizer left-0 z-0"></div><div class="resizer right-0 z-0">'),ZTe=G('<div class="relative h-[35%] w-full border border-[var(--editor-hover-widget-border)] [&amp;_div.area]:absolute [&amp;_div.area]:bottom-0 [&amp;_div.area]:top-0 [&amp;_div.marker.cut]:bottom-[-0.25rem] [&amp;_div.marker.cut]:top-[100%] [&amp;_div.marker.echo]:bottom-[-0.25rem] [&amp;_div.marker.echo]:top-[unset] [&amp;_div.marker.echo]:h-[0.5rem] [&amp;_div.marker.long]:bottom-[-0.25rem] [&amp;_div.marker]:absolute [&amp;_div.marker]:bottom-[-0.0625rem] [&amp;_div.marker]:top-[-0.0625rem] [&amp;_div.marker]:w-[0.0625rem]"><div class="marker long invisible z-40 bg-[--editor-code-lens-foreground]"></div><div class="marker z-20 bg-[--foreground] brightness-125"></div><div class="area stripes left-0 z-0 flex cursor-default items-center justify-center border-r border-r-[var(--editor-hover-widget-border)]"></div><div class="area stripes right-0 z-0 flex cursor-default items-center justify-center border-l border-l-[var(--editor-hover-widget-border)]">'),GTe=G('<div class="code flex h-[35%] w-full flex-row [&amp;_div.marker]:mt-[0.0625rem] [&amp;_div.marker]:h-[0.125rem] [&amp;_div.marker]:w-full [&amp;_div.step]:relative [&amp;_div.step]:z-0 [&amp;_div.step]:box-border [&amp;_div.step]:h-full [&amp;_div.step]:cursor-pointer [&amp;_div.step]:border-r [&amp;_div.step]:border-r-[--panel-view-background] [&amp;_div.step]:text-[length:--panel-smallest-font-size] [&amp;_div.tile-background]:absolute [&amp;_div.tile-background]:z-0 [&amp;_div.tile-background]:h-full [&amp;_div.tile-background]:w-full [&amp;_div.tile]:relative [&amp;_div.tile]:flex [&amp;_div.tile]:h-full [&amp;_div.tile]:w-full [&amp;_div.tile]:items-center [&amp;_div.tile]:justify-center [&amp;_div.tile]:font-bold [&amp;_div.transition]:absolute [&amp;_div.transition]:left-[-35%] [&amp;_div.transition]:top-[-0.125rem] [&amp;_div.transition]:h-[0.0625rem] [&amp;_div.transition]:w-[70%] [&amp;_span.loc]:z-10 [&amp;_span.loc]:leading-[--panel-smallest-font-size]">'),BTe=G('<div class="relative flex h-full flex-col px-2"><div class="mb-1.5 h-full">'),XTe=G('<div class="marker echo z-20 bg-[--foreground]">'),zTe=G('<div class="marker long z-10 bg-[--error-foreground]">'),HTe=G('<div class="marker long z-10 bg-[--link-foreground] opacity-60 brightness-125">'),UTe=G('<div class="marker long z-30 bg-[--stack-frame-highlight]">'),YTe=G('<div class="marker cut z-0 bg-[--editor-hover-widget-border]">'),KTe=G('<div class="step !cursor-default"><div class=tile><div class=tile-background>'),jTe=G("<span class=loc>"),JTe=G("<div class=transition>"),$Te=G('<div class="marker z-10 bg-[--foreground] brightness-125">'),QTe=G('<div class="marker z-10 bg-[--foreground] opacity-40 brightness-125">'),qTe=G('<div class="marker z-10 bg-[--stack-frame-highlight]">'),eDe=G('<div class="marker bg-[--error-foreground]">'),tDe=G('<div class="marker bg-[--link-foreground] opacity-60 brightness-125">'),iDe=G("<div class=step><div class=tile><div class=tile-background>"),nDe=G("<li>"),sDe=G('<div class="flex h-full flex-col"><div class="flex max-h-7 flex-row items-center justify-center py-1 shadow-[var(--widget-shadow)]"><div class="flex-grow truncate px-2 py-0.5 pr-1 text-[length:--small-header-font-size] font-bold uppercase">Call Stack</div><div class="ml-auto flex pr-1 [&amp;_li]:flex [&amp;_li_button]:mx-[0.0625rem] [&amp;_li_button]:!text-[length:--icon-font-size]"><ul class="flex flex-row items-center justify-center"><li></li></ul></div></div><div class="panel-font-size flex flex-grow cursor-text flex-col overflow-y-auto outline-none">'),rDe=G('<div class="pad h-full overflow-y-auto">'),oDe=G('<div class="flex h-full flex-col"><div class="pad flex cursor-default flex-col overflow-y-auto"><div class=legend><div class="color timeline relative"><div class="absolute mx-auto h-full w-[0.0625rem] bg-[--error-foreground]"></div></div><div class=text>step with error</div></div><div class=legend><div class="color timeline relative"><div class="absolute mx-auto h-full w-[0.0625rem] bg-[--link-foreground] brightness-125"></div></div><div class=text>step with log</div></div><div class=legend><div class="color timeline relative"><div class="absolute mx-auto h-full w-[0.0625rem] bg-[--foreground] brightness-125"></div></div><div class=text>active step</div></div><div class=legend><div class="color timeline relative"><div class="absolute mx-auto h-full w-[0.0625rem] bg-[--stack-frame-highlight]"></div></div><div class=text>call stack step</div></div><div class=legend><div class=color>7</div><div class=text>step at </div></div><div class="legend relative"><div class="absolute left-[0.1875rem] top-[0.125rem] h-[0.0625rem] w-[0.3125rem]"></div><div class="color !mr-0 !h-2.5 !w-[0.3125rem]"></div><div class="color ml-[0.0625rem] !h-2.5 !w-[0.3125rem]"></div><div class=text>function switch between 2 steps</div></div><div class="legend relative"><div class="absolute bottom-0.5 left-0 h-[0.125rem] w-[0.6875rem] bg-[--foreground] brightness-125"></div><div class="color mb-0.5 !h-2"></div><div class=text>active step</div></div><div class="legend relative"><div class="absolute bottom-0.5 left-0 h-[0.125rem] w-[0.6875rem] bg-[--error-foreground]"></div><div class="color mb-0.5 !h-2"></div><div class=text>step with error</div></div><div class="legend relative"><div class="absolute bottom-0.5 left-0 h-[0.125rem] w-[0.6875rem] bg-[--link-foreground] brightness-125"></div><div class="color mb-0.5 !h-2"></div><div class=text>step with log</div></div><div class="legend relative"><div class="absolute bottom-0.5 left-0 h-[0.125rem] w-[0.6875rem] bg-[--stack-frame-highlight]"></div><div class="color mb-0.5 !h-2"></div><div class=text>call stack step</div></div><div class=legend><div class=color></div><div class=text>step with no code mapping'),aDe=G("<span>@ "),lDe=G('<div class="code px-2 tracking-tight"><span class="whitespace-pre text-[var(--token-scope-function-foreground)]">'),cDe=G('<div class="legend actionable"><div class=color></div><div class=text></div><div class=icon>'),dDe=G('<div class="-mb-1 flex flex-row items-center"><div class="header-font-size header-tracking flex-grow select-none truncate px-2.5 font-bold uppercase">test timeline</div><div class="ml-auto flex flex-row items-center whitespace-nowrap pr-1.5 [&amp;_button]:mx-0.5 [&amp;_button]:!text-[length:--panel-larger-font-size] hover:[&amp;_button]:text-[--input-option-active-foreground]"><div class="flex items-center [&amp;_button]:text-[--editor-warning-foreground]"></div><div class="flex items-center brightness-110 [&amp;_button]:text-[--editor-info-foreground]">'),uDe=G('<div class="legend pad min-h-6 !max-w-[unset] items-center justify-center truncate !pr-1"><div class="header-tracking flex-grow select-none truncate text-[length:--small-header-font-size] font-bold uppercase">Indicator Guide');function hDe(n){let e=n.length,t;for(;e!=0;)t=Math.floor(Math.random()*e),e--,[n[e],n[t]]=[n[t],n[e]];return n}let Cz=[{background:"#fba25c",foreground:"#1e1e1e"},{background:"#b6d67a",foreground:"#1e1e1e"},{background:"#ddc027",foreground:"#1e1e1e"},{background:"#cbd5e1",foreground:"#333"},{background:"#f87171",foreground:"#1e1e1e"},{background:"#24d8c6",foreground:"#1e1e1e"},{background:"#d5c0fe",foreground:"#1e1e1e"},{background:"#97d2fe",foreground:"#1e1e1e"},{background:"#0e7490",foreground:"#cfcfcf"},{background:"#fed7aa",foreground:"#1e1e1e"}].concat(hDe([{background:"#64748b",foreground:"#cfcfcf"},{background:"#52525b",foreground:"#cfcfcf"},{background:"#d6d3d1",foreground:"#333"},{background:"#78716c",foreground:"#cfcfcf"},{background:"#decaca",foreground:"#1e1e1e"},{background:"#b91c1c",foreground:"#cfcfcf"},{background:"#ea580c",foreground:"#1e1e1e"},{background:"#9a3412",foreground:"#cfcfcf"},{background:"#eab308",foreground:"#1e1e1e"},{background:"#a16207",foreground:"#cfcfcf"},{background:"#a3e635",foreground:"#1e1e1e"},{background:"#65a30d",foreground:"#1e1e1e"},{background:"#99f6e4",foreground:"#1e1e1e"},{background:"#0f766e",foreground:"#cfcfcf"},{background:"#67e8f9",foreground:"#1e1e1e"},{background:"#06b6d4",foreground:"#1e1e1e"},{background:"#818cf8",foreground:"#1e1e1e"},{background:"#4f46e5",foreground:"#cfcfcf"},{background:"#e879f9",foreground:"#1e1e1e"},{background:"#c026d3",foreground:"#cfcfcf"}]));const sg="unknown",[fDe,gDe]=he(!0),[kp,U9]=he(new Map,{equals:!1}),mDe=kp;function Ste(){U9(n=>(n.clear(),n.set(sg,{name:"Unknown",background:"var(--editor-hover-widget-border)",foreground:"var(--foreground)"})))}Ste();function NS(n,e){let t=kp().get(n);return t?e&&t.name!==e&&(t.name=e,U9(i=>i)):(t={...Cz[(kp().size-1)%Cz.length],name:e||n},U9(i=>i.set(n,t))),t}function Cte(n){const e=Dt(),[t]=e.appSettings(),i=()=>t.debugger.codePreview,s=()=>t.debugger.echo,r=()=>t.debugger.lockPrePost||!1,o=J(()=>{const fe=n.state.errors?.all.filter(Oe=>Oe.traceFrame).map(Oe=>Oe.traceFrame),Ze=n.state.selection.log?.logOrExpressionId;let Ye;const Xe=Object.values(n.state.logs?.items||{}).reduce((Oe,He)=>(Object.values(He.logs).forEach(lt=>{lt.traceFrame&&!lt.watchExpressionId&&(Oe.push(lt.traceFrame),Ze===lt.id&&(Ye=lt.traceFrame))}),Oe),[]),oe=n.state.debuggerCallStack?.stack.map(Oe=>Oe.frame).filter(Oe=>Oe!==void 0&&Oe!==n.state.debuggerState?.current?.frame.frame),le=new Set([...fe||[],...Xe,...oe||[]]);Ye!==void 0&&le.add(Ye);const Ve=Object.values(n.state.debuggerState?.current?.trace.files||{}),ae=Ve.length===1?Ve[0].functions:void 0;return{...n.state.debuggerState?.current,trace:{...n.state.debuggerState?.current?.trace,watchedSteps:n.state.debuggerState?.current?.trace.watchedSteps,echoSteps:n.state.debuggerState?.current?.trace.echoSteps,errors:fe,logs:Xe,callStack:oe,selectedLog:Ye,files:n.state.debuggerState?.current?.trace.files},allKnownSteps:le,errors:new Set(fe),logs:new Set(Xe),echo:new Set(n.state.debuggerState?.current?.trace.echoSteps?.steps),callStack:new Set(oe),functionsOfSingleFile:ae}}),[a,l]=he({current:n.state.debuggerState.current.frame.frame}),[c,d]=he(!1);$e(()=>n.state.debuggerState?.current?.frame.frame,fe=>{a().current!==fe&&(l(Ze=>({current:fe,previous:Ze.current})),c()?d(!1):N.updateZoom({zoomStep:fe}))},{defer:!0});const[u,h]=he(null),[f,g]=he(null),[m,p]=he(null),[b,w]=he(null),[v,_]=he(null),{elementX:y,isOutside:C,elementWidth:S}=Rf(f,{handleOutside:!1}),{elementX:k,isOutside:I}=Rf(u,{handleOutside:!1}),{stop:T}=She(I,fe=>{fe||(N.useDebouncedStepDataRequest(),T())}),{isOutside:D}=Rf(m,{handleOutside:!1}),{isOutside:M}=Rf(b,{handleOutside:!1}),{isOutside:E}=Rf(v,{handleOutside:!1}),[W,P]=he(0);jh(f,([fe])=>{P(fe.borderBoxSize[0].inlineSize-1),N.updateZoom({force:!0})});const N=new wDe(o,W,r),[H,U]=he(null),[B,Y]=he(!1);$e(B,fe=>{fe&&e.featureUsed("timelineZoom")},{defer:!0});const ne=N.zoomedAreaStepGrid(),ee=J(()=>ne().steps.length),$=N.showStepTileBorder(),ge=J(()=>ee()&&Math.min(Math.round(2*(H()?.childElementCount||0)/100),10)),{x:Ie,isDragging:xe}=HT(m,{preventDefault:!0,stopPropagation:!1}),z=J(()=>Ie()-(f()?.offsetLeft||0)+1);$e(z,dy(fe=>{Y(!0),N.updateMinimapZoomLeft(fe,{snapToKnownStep:!0})},ge),{defer:!0});const{x:Se,isDragging:De}=HT(b,{preventDefault:!0,stopPropagation:!0}),ke=J(()=>Se()-(f()?.offsetLeft||0)+1),{x:je,isDragging:et}=HT(v,{preventDefault:!0,stopPropagation:!0}),mt=J(()=>je()-(f()?.offsetLeft||0)+1);$e(ke,dy(fe=>{Y(!0),N.updateMinimapZoomSizeFromLeft(fe)},ge),{defer:!0}),$e(mt,dy(fe=>{Y(!0),N.updateMinimapZoomSizeFromRight(fe)},ge),{defer:!0});const nt=J(()=>D()&&M()&&E()&&!xe()&&!De()&&!et());Bn(()=>{Ste(),P(S()),N.updateZoom({zoomStep:o().frame.frame})}),$e(r,()=>{N.updateZoom({force:!0})},{defer:!0});const[zt,Fe]=he(!0);$e(o,()=>{N.updateZoom({force:!0});const fe=Object.values(o().trace.files||{}),Ze=Object.entries(o().functionsOfSingleFile||{});Fe(!Ze.length),Ze.length?Ze.forEach(Ye=>NS(Ye[0]||sg,Ye[1].name)):fe.forEach(Ye=>NS(Ye.name||sg))},{defer:!0}),$e(N.hasPrePostTestSections(),fe=>{gDe(fe)}),$e(s,fe=>{fe?e.sendCurrentStepEcho():e.stopSendingCurrentStepEcho()}),$e([u],()=>{if(u()){const[fe,Ze]=he(0),[Ye,Xe]=he(0),le=dy(()=>{N.updateZoom({deltaX:fe(),deltaY:Ye(),mouseX:k()}),Ze(0),Xe(0),Y(!0)},J(()=>Math.round($()?2*ee()/100:0))),Ve=ae=>{const _e=ae;Ze(Oe=>Oe+_e.deltaX*(_e.ctrlKey?100:1)),Xe(Oe=>Oe+_e.deltaY*(_e.ctrlKey?100:1)),le()};u().addEventListener("mousewheel",Ve,{passive:!0})}});const re=J(()=>{const fe=o().trace.watchedSteps;return ne().steps.reduce((Ze,Ye)=>(Ze.steps[Ye.n]={...fe?.[Ye.n]||{},...Ye},Ze),{steps:{}})}),ie=J(()=>{if(o().trace.echoSteps)return{left:Math.abs(o().trace.echoSteps.steps[0]-o().frame.frame),right:Math.abs(o().trace.echoSteps.steps.slice(-1)[0]-o().frame.frame)}}),de=fe=>{const Ze=ie();if(Ze){const Ye=fe-o().frame.frame;return 1-Math.abs(Ye)/(Ye<0?Ze.left:Ze.right)}return 0},Z=J(()=>parseFloat(getComputedStyle(document.body)?.getPropertyValue("--panel-font-size").split("px")[0])-2),O=J(()=>yQ*Z()/10),q=N.miniMapStepGrid(),Q=N.preTestSection(),ce=N.postTestSection(),be=N.lockPrePostTestSections(),Ae=N.canMoveZoomControl(),Pe=N.canResizeZoomControl(),tt=N.zoomLeft(),qe=N.zoomWidth(),wt=fe=>fe.func?.toString()||fe.file||sg,me=(fe,Ze)=>o().functionsOfSingleFile?Ze.func===fe.func:Ze.file===fe.file;return(()=>{var fe=BTe(),Ze=fe.firstChild;return We(h,Ze),A(Ze,x(se,{get when(){return n.state.debuggerState.current.trace.length>1},get children(){return[yz(),(()=>{var Ye=ZTe(),Xe=Ye.firstChild,oe=Xe.nextSibling,le=oe.nextSibling,Ve=le.nextSibling;return Ye.$$click=()=>{if(!C()&&nt()){const ae=N.minimapStepIndexByX(y(),{snapToKnownStep:!0});e.stepInDebugger({frame:ae,playToExactFrame:!0}),N.updateZoom({zoomStep:ae})}},We(g,Ye),A(Ye,x(se,{get when(){return J(()=>a().previous!==void 0&&a().previous!==o().frame.frame)()&&!N.isKnownStepByNumber(a().previous)},get children(){var ae=PTe();return Me(()=>N.minimapStepX(a().previous)+"px"!=null?ae.style.setProperty("left",N.minimapStepX(a().previous)+"px"):ae.style.removeProperty("left")),ae}}),le),A(Ye,x(ln,{get each(){return J(()=>!!s())()&&o().trace.echoSteps?.steps||[]},children:ae=>x(se,{get when(){return ae!==o().frame.frame},get children(){var _e=XTe();return Me(Oe=>{var He=N.minimapStepX(ae)+"px",lt=o().trace.echoSteps.capped?de(ae):void 0;return He!==Oe.e&&((Oe.e=He)!=null?_e.style.setProperty("left",He):_e.style.removeProperty("left")),lt!==Oe.t&&((Oe.t=lt)!=null?_e.style.setProperty("opacity",lt):_e.style.removeProperty("opacity")),Oe},{e:void 0,t:void 0}),_e}})}),le),A(Ye,x(ln,{get each(){return o().trace.errors||[]},children:ae=>(()=>{var _e=zTe();return Me(()=>N.minimapStepX(ae)+"px"!=null?_e.style.setProperty("left",N.minimapStepX(ae)+"px"):_e.style.removeProperty("left")),_e})()}),le),A(Ye,x(ln,{get each(){return(o().trace.logs||[]).slice(0,1e3)},children:ae=>(()=>{var _e=HTe();return Me(Oe=>{var He=ae===o().trace.selectedLog,lt=N.minimapStepX(ae)+"px";return He!==Oe.e&&_e.classList.toggle("!opacity-100",Oe.e=He),lt!==Oe.t&&((Oe.t=lt)!=null?_e.style.setProperty("left",lt):_e.style.removeProperty("left")),Oe},{e:void 0,t:void 0}),_e})()}),le),A(Ye,x(ln,{get each(){return o().trace.callStack||[]},children:ae=>(()=>{var _e=UTe();return Me(()=>N.minimapStepX(ae)+"px"!=null?_e.style.setProperty("left",N.minimapStepX(ae)+"px"):_e.style.removeProperty("left")),_e})()}),le),A(Ye,x(ln,{get each(){return q().steps},children:ae=>(()=>{var _e=YTe();return Me(()=>ae.x+"px"!=null?_e.style.setProperty("left",ae.x+"px"):_e.style.removeProperty("left")),_e})()}),le),A(le,x(se,{get when(){return J(()=>!!be())()&&Q().textVisible},get children(){return Sz()}})),A(Ve,x(se,{get when(){return J(()=>!!be())()&&ce().textVisible},get children(){return Sz()}})),A(Ye,x(se,{get when(){return Ae()||Pe()},get children(){var ae=OTe(),_e=ae.firstChild,Oe=_e.nextSibling,He=Oe.nextSibling,lt=He.nextSibling;return We(p,Oe),We(w,He),We(_,lt),Me(ft=>{var kt=tt()-1+"px",ii=qe()+3+"px",Ht={"cursor-grabbing !h-full":xe()&&Ae(),"!cursor-default":!Ae()},pi=!Pe(),ui=!Pe();return kt!==ft.e&&((ft.e=kt)!=null?ae.style.setProperty("left",kt):ae.style.removeProperty("left")),ii!==ft.t&&((ft.t=ii)!=null?ae.style.setProperty("width",ii):ae.style.removeProperty("width")),ft.a=nn(Oe,Ht,ft.a),pi!==ft.o&&He.classList.toggle("!cursor-default",ft.o=pi),ui!==ft.i&&lt.classList.toggle("!cursor-default",ft.i=ui),ft},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),ae}}),null),Me(ae=>{var _e=!!(!C()&&nt()),Oe=!!N.isKnownOrCurrentStepByX(y()),He=N.minimapClosestStepX(y())+"px",lt=!N.isKnownStepByNumber(o().frame.frame),ft=N.minimapStepX(o().frame.frame)+"px",kt=!Q().visible,ii=!be(),Ht=Q().width+"px",pi=!ce().visible,ui=!be(),Ei=ce().x+"px";return _e!==ae.e&&Xe.classList.toggle("!visible",ae.e=_e),Oe!==ae.t&&Xe.classList.toggle("opacity-40",ae.t=Oe),He!==ae.a&&((ae.a=He)!=null?Xe.style.setProperty("left",He):Xe.style.removeProperty("left")),lt!==ae.o&&oe.classList.toggle("long",ae.o=lt),ft!==ae.i&&((ae.i=ft)!=null?oe.style.setProperty("left",ft):oe.style.removeProperty("left")),kt!==ae.n&&le.classList.toggle("hidden",ae.n=kt),ii!==ae.s&&le.classList.toggle("opacity-30",ae.s=ii),Ht!==ae.h&&((ae.h=Ht)!=null?le.style.setProperty("width",Ht):le.style.removeProperty("width")),pi!==ae.r&&Ve.classList.toggle("hidden",ae.r=pi),ui!==ae.d&&Ve.classList.toggle("opacity-30",ae.d=ui),Ei!==ae.l&&((ae.l=Ei)!=null?Ve.style.setProperty("left",Ei):Ve.style.removeProperty("left")),ae},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0}),Ye})(),yz(),(()=>{var Ye=GTe();return We(U,Ye),A(Ye,()=>{let Xe=0,oe=!1;return Object.values(re().steps).map(le=>{const Ve=re().steps,ae=wt(le);let _e=NS(ae);const Oe=_e.name,He=Ve[le.n-1];if(!Qn($)){const Ei=oe||He&&me(le,He);return Ei?(le.accumulatorStep=He.accumulatorStep!==void 0?He.accumulatorStep:He.n,Ve[le.accumulatorStep].accumulatorWidth[1](nr=>nr+le.width)):(Xe++,le.accumulatorWidth=he(le.width),Xe>500&&(oe=!0,_e={background:"inherit",foreground:"inherit",name:"..."})),Ei?null:(()=>{var As=KTe(),nr=As.firstChild,ni=nr.firstChild;return We(Te,As,()=>Te&&{content:Oe}),Me(Qi=>{var io=le.accumulatorWidth[0]()+"px",mu=_e.background;return io!==Qi.e&&((Qi.e=io)!=null?As.style.setProperty("width",io):As.style.removeProperty("width")),mu!==Qi.t&&((Qi.t=mu)!=null?ni.style.setProperty("background",mu):ni.style.removeProperty("background")),Qi},{e:void 0,t:void 0}),As})()}const ft=zt()&&He&&le.file===He.file&&le.depth!==He.depth;let kt=!1,ii=!1,Ht=!1;const pi=le.width-2;le.file&&(ii=(le.line||"").toString().length*O()<pi,ii?Ht=((le.line??"").toString().length+1+(le.columnRange?.[0]??"1").toString().length)*O()<pi:O()*.75<pi&&(kt=!0));const ui=J(()=>{if(i()&&!(!Ht&&!ii&&!kt))return{file:le.file,line:le.line,column:le.columnRange?.[0],navigatable:!0,context:le.file!==Oe?Oe:void 0,color:_e.background}});return(()=>{var Ei=iDe(),As=Ei.firstChild,nr=As.firstChild;return Ei.$$click=()=>{e.stepInDebugger({frame:le.n,playToExactFrame:!0}),d(!0)},A(As,x(se,{when:Ht||ii||kt,get children(){var ni=jTe();return We(M_,ni,()=>M_&&ui()),A(ni,x(Fn,{get fallback(){return""},get children(){return[x(ot,{when:Ht,get children(){return[J(()=>le.line),":",J(()=>le.columnRange[0]!==void 0?le.columnRange[0]+1:1)]}}),x(ot,{when:ii,get children(){return le.line}})]}})),Me(()=>_e.foreground!=null?ni.style.setProperty("color",_e.foreground):ni.style.removeProperty("color")),ni}}),null),A(Ei,x(se,{when:ft,get children(){var ni=JTe();return Me(()=>_e.background!=null?ni.style.setProperty("background",_e.background):ni.style.removeProperty("background")),ni}}),null),A(Ei,x(se,{get when(){return le.n===o().frame.frame},get children(){var ni=$Te();return Me(()=>ni.classList.toggle("!bottom-[-0.5rem]",!!N.isKnownStepByNumber(le.n))),ni}}),null),A(Ei,x(se,{get when(){return J(()=>!!(s()&&o().echo.has(le.n)))()&&le.n!==o().frame.frame},get children(){var ni=QTe();return Me(()=>ni.classList.toggle("!bottom-[-0.5rem]",!!N.isKnownStepByNumber(le.n))),ni}}),null),A(Ei,x(se,{get when(){return o().callStack.has(le.n)},get children(){var ni=qTe();return Me(()=>ni.classList.toggle("!bottom-[-0.5rem]",!!N.isKnownStepByNumber(le.n))),ni}}),null),A(Ei,x(se,{get when(){return o().errors.has(le.n)},get children(){return eDe()}}),null),A(Ei,x(se,{get when(){return o().logs.has(le.n)},get children(){var ni=tDe();return Me(()=>ni.classList.toggle("!opacity-100",le.n===o().trace.selectedLog)),ni}}),null),Me(ni=>{var Qi=le.width+"px",io=_e.background;return Qi!==ni.e&&((ni.e=Qi)!=null?Ei.style.setProperty("width",Qi):Ei.style.removeProperty("width")),io!==ni.t&&((ni.t=io)!=null?nr.style.setProperty("background",io):nr.style.removeProperty("background")),ni},{e:void 0,t:void 0}),Ei})()})}),Me(Xe=>nn(Ye,{"[&_div.step]:border-r-0":!$()},Xe)),Ye})()]}})),fe})()}const pDe="<br/><br/>The current step echo is a visual representation of <b>other hits on the line/branch of the current frame</b>. It is useful when you want to see where else the current line of code has been executed during the test and navigate to those steps.<br/><br/>Note that number of echo steps reported is limited to 100 steps in each direction.",bDe='<br/><br/>Pre-test section includes code steps executed before the test function, such as test file imports and "before" test hooks.<br/><br/>Post-test section includes steps executed after the test function, such as "after" test hooks.',Qm="Steps with runtime errors are marked with an error color on the zoomable timeline and are underlined with the same color in the zoomed-in area of the timeline.",qm='Steps with logs (logpoints, live comments, "console.log") are marked with an link color on the zoomable timeline and are underlined with the same color in the zoomed-in area of the timeline.<br/><br/>The step of the log entry currently selected in the "Logs" list is marked with a brighter color.',ep="Current step is marked with a warning color on the zoomable timeline and is underlined with the same color in the zoomed-in area of the timeline.<br/><br/>The current step echo is a visual representation of other hits on the line/branch of the current frame. It is displayed with the same color as the current step, but dimmed.",tp="Steps in the call stack are marked with a stack frame color on the zoomable timeline and are underlined with the same color in the zoomed-in area of the timeline.",Lte="The zoomed-in area below the timeline displays colored tiles with line and column numbers of the executed code steps.",v5=`${Lte} The tile's color represents the file of the step.`;function vDe(n){const e=Dt(),t=im(),[i,s]=e.appSettings(),r=()=>i.debugger.codePreview,o=()=>i.debugger.echo,a=()=>i.debugger.lockPrePost,l=J(()=>{const f=Array.from(kp().entries());return f[1]||f[0]}),c=J(()=>l()?.[1]),d=J(()=>Object.keys(n.state.debuggerState?.current?.trace.files||{})),u=e.getPanelState(Ue.OverviewDebuggerStatusGuide),h=J(()=>i.debugger.reverseStack);return x($r,{header:"Debugger",headerClass:"pl-2",get tooltip(){return`Go to Debugger panel <span class="keyboard-shortcut">G</span>${e.isStandalone()?'&nbsp;<span class="keyboard-shortcut">O</span>':""}&nbsp;<span class="keyboard-shortcut">D</span>`},namespace:"overview.debugger",get onFocus(){return n.onFocus},get icons(){return[x(Ee,{class:"codicon-radio-tower",get tooltip(){return(o()?"Hide current step echo":"Show current step echo")+pDe},onClick:()=>s("debugger","echo",!o()),get classList(){return{activeIcon:o()}},tabIndex:0,namespace:"overview.debugger.header.action"}),x(Ee,{class:"codicon-lock-small",get tooltip(){return(a()?"Make pre/post test sections use common scale<br/><br/>Use if you want zoom to work for the whole timeline.":"Make pre/post test sections fixed size with their own scale<br/><br/>Use if the sections take too much space and you don't want to zoom in them.")+bDe},onClick:()=>s("debugger","lockPrePost",!a()),get classList(){return{"!hidden":!fDe(),activeIcon:a()}},tabIndex:0,namespace:"overview.debugger.header.action"}),x(Ee,{class:"codicon-inspect",tooltip:"Toggle code preview display in debugger on line/column hover<br/><br/>When the timeline's zoom level allows, line and column numbers are displayed inside colored tiles that represent hits on the line/branch during test execution.",onClick:()=>s("debugger","codePreview",!r()),tabIndex:0,namespace:"overview.debugger.header.action",get classList(){return{activeIcon:r()}}}),x(se,{get when(){return n.state.debuggerState?.current?.trace?.maxLengthExceeded},get children(){return x(Ee,{class:"codicon-warning !text-[--editor-warning-foreground] opacity-80",tooltip:"Timeline is truncated, configure to record more steps",href:"https://wallabyjs.com/docs/config/overview.html#maximum-trace-steps",tabIndex:0,namespace:"overview.debugger.header.action"})}}),x(Ee,{get classList(){return{"codicon-chevron-down":n.orientation==="column","codicon-chevron-right":n.orientation==="row"}},tabIndex:0,namespace:"overview.debugger.header.action",onClick:()=>{e.setPanelState(n.panelId,f=>({...f,collapsed:!0})),n.onFocus?.("overview",!0)},tooltip:'Collapse "Debugger" panel'})]},contentClass:"panel-font-size",get children(){return x(Fn,{get children(){return[x(ot,{get when(){return n.state.debuggerCallStack},get children(){var f=sDe(),g=f.firstChild,m=g.firstChild,p=m.nextSibling,b=p.firstChild,w=b.firstChild,v=g.nextSibling;return A(b,x(se,{get when(){return n.state.debuggerCallStack.stack.length>1},get children(){var _=nDe();return A(_,x(Ee,{get classList(){return{activeIcon:h()}},tooltip:"Toggle reversed call stack order",class:"codicon-arrow-swap rotate-90 !text-[length:--icon-font-size]",tabIndex:0,onClick:()=>s("debugger","reverseStack",!h()),namespace:"debugger.logs.content.stack.header.action"})),_}}),w),A(w,x(Ee,{tooltip:"Close",tabIndex:0,class:"codicon-close !text-[length:--icon-font-size]",onClick:()=>{t.clearDebuggerCallStack(),n.onFocus?.("overview.debugger",!0)},namespace:"debugger.logs.content.stack.header.action"})),A(v,x(Jp,{get each(){return J(()=>!!h())()?n.state.debuggerCallStack.stack.slice().reverse():n.state.debuggerCallStack.stack},children:_=>(()=>{var y=lDe(),C=y.firstChild;return A(C,()=>_().context),A(y,x(se,{get when(){return _().file},get children(){return[aDe(),x(fh,{get value(){return _()},get options(){return{focus:!0,callStackFrame:_().frame!==n.state.debuggerState?.current?.frame?.frame?_():void 0}},compactFileNameOnly:!0,codeFragmentTooltipOptions:()=>_().file&&_().line?{file:_().file,line:_().line,navigatable:!0}:void 0})]}}),null),y})()})),f}}),x(ot,{get when(){return d().length},get children(){return x(jr,{class:`
          [&_div.color]:code h-full
          w-full
          [&_div.color]:mr-1
          [&_div.color]:mt-[0.0625rem]
          [&_div.color]:flex
          [&_div.color]:h-3
          [&_div.color]:w-[0.6875rem]
          [&_div.color]:flex-shrink-0
          [&_div.color]:items-center
          [&_div.color]:justify-center
          [&_div.color]:text-[length:--panel-smallest-font-size]
          [&_div.color]:font-bold
          [&_div.icon]:ml-auto
          [&_div.icon]:flex
          [&_div.icon]:items-center
          [&_div.icon]:justify-center
          [&_div.legend.actionable]:-ml-2.5

          [&_div.legend.actionable]:-mr-1.5
          [&_div.legend.actionable]:h-[--panel-item-height]
          [&_div.legend.actionable]:max-w-[unset]

          [&_div.legend.actionable]:pl-2.5
          [&_div.legend.actionable]:pr-1.5
          hover:[&_div.legend.actionable]:bg-[--list-hover-background]
          [&_div.legend.actionable_div.color]:h-[0.6rem]
          [&_div.legend.actionable_div.color]:w-[0.6rem]
          [&_div.legend.actionable_div.text]:pb-[0.0625rem]
          [&_div.legend]:flex
          [&_div.legend]:min-w-0
          [&_div.legend]:max-w-fit
          [&_div.legend]:flex-row
          [&_div.legend]:items-center
          [&_div.legend]:leading-[1.8em]
          [&_div.pad]:pl-2.5

          [&_div.pad]:pr-1.5
          [&_div.text]:truncate

          [&_div.text]:text-[length:--panel-font-size]
          [&_div.timeline]:border-b
          [&_div.timeline]:border-t
          [&_div.timeline]:border-[var(--editor-hover-widget-border)]

          [&_div_button]:!p-[0.09375rem]
          [&_div_button]:!text-[length:--icon-smaller-font-size]
          `,direction:"column",get children(){return[x(ji,{defaultState:{size:50},get id(){return Ue.OverviewDebuggerStatusFiles},get children(){var f=rDe();return A(f,x(ln,{get each(){return d()},children:g=>x(se,{when:g!==sg,get children(){var m=cDe(),p=m.firstChild,b=p.nextSibling,w=b.nextSibling;return We(Te,p,()=>Te&&{content:v5}),A(b,()=>Dh(g,1/0)),A(w,x(se,{get when(){return n.state.debuggerState?.current?.trace.files?.[g]},get children(){return x(Ee,{class:"codicon-debug-line-by-line",tooltip:"Step to the first line of the file executed by the test",onClick:()=>{const v=n.state.debuggerState?.current?.trace.files?.[g]?.start;v!==void 0&&e.stepInDebugger({frame:v,playToExactFrame:!0})}})}})),Me(()=>kp().get(g)?.background!=null?p.style.setProperty("background",kp().get(g)?.background):p.style.removeProperty("background")),m}})})),f}}),x(ji,{defaultState:{size:50},get id(){return Ue.OverviewDebuggerStatusGuide},get children(){var f=oDe(),g=f.firstChild,m=g.firstChild,p=m.nextSibling,b=p.nextSibling,w=b.firstChild,v=w.nextSibling;v.firstChild;var _=b.nextSibling,y=_.nextSibling,C=y.firstChild,S=C.nextSibling;S.firstChild;var k=y.nextSibling,I=k.firstChild,T=I.nextSibling,D=T.nextSibling,M=k.nextSibling,E=M.firstChild,W=E.nextSibling,P=W.nextSibling;P.firstChild;var N=M.nextSibling,H=N.firstChild,U=H.nextSibling,B=N.nextSibling,Y=B.firstChild,ne=Y.nextSibling,ee=B.nextSibling,$=ee.firstChild,ge=$.nextSibling,Ie=ee.nextSibling,xe=Ie.firstChild;return A(f,x(Lz,{get onFocus(){return n.onFocus}}),g),We(Te,m,()=>Te&&{content:Qm}),We(Te,p,()=>Te&&{content:qm}),We(Te,b,()=>Te&&{content:ep}),A(v,x(se,{get when(){return o()},children:" and its echo"}),null),We(Te,_,()=>Te&&{content:tp}),We(Te,y,()=>Te&&{content:v5}),A(S,(()=>{var z=J(()=>!!l()[0]);return()=>z()?Dh(l()[0],1/0)+" line 7":"line 7 of a file"})(),null),We(Te,k,()=>Te&&{content:`${v5}<br/><br/>If two adjacent steps are in the same file but different functions, a horizontal line indicating the <b>function change</b> is displayed above them.`}),We(Te,M,()=>Te&&{content:ep}),A(P,x(se,{get when(){return o()},children:" and its echo"}),null),We(Te,N,()=>Te&&{content:Qm}),We(Te,B,()=>Te&&{content:qm}),We(Te,ee,()=>Te&&{content:tp}),We(Te,Ie,()=>Te&&{content:"Steps with no code mapping typically mean executed statements of transpiled code that are not present in the original source code and can not mapped to the original source code by the provided source map."}),Me(z=>{var K=c().background,Se=c().foreground,De=c().background,ke=c().background,je=c().background,et=c().background,mt=c().background,ze=c().background,ht=c().background,nt=NS(sg).background;return K!==z.e&&((z.e=K)!=null?C.style.setProperty("background",K):C.style.removeProperty("background")),Se!==z.t&&((z.t=Se)!=null?C.style.setProperty("color",Se):C.style.removeProperty("color")),De!==z.a&&((z.a=De)!=null?I.style.setProperty("background",De):I.style.removeProperty("background")),ke!==z.o&&((z.o=ke)!=null?T.style.setProperty("background",ke):T.style.removeProperty("background")),je!==z.i&&((z.i=je)!=null?D.style.setProperty("background",je):D.style.removeProperty("background")),et!==z.n&&((z.n=et)!=null?W.style.setProperty("background",et):W.style.removeProperty("background")),mt!==z.s&&((z.s=mt)!=null?U.style.setProperty("background",mt):U.style.removeProperty("background")),ze!==z.h&&((z.h=ze)!=null?ne.style.setProperty("background",ze):ne.style.removeProperty("background")),ht!==z.r&&((z.r=ht)!=null?ge.style.setProperty("background",ht):ge.style.removeProperty("background")),nt!==z.d&&((z.d=nt)!=null?xe.style.setProperty("background",nt):xe.style.removeProperty("background")),z},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0}),f}}),x(se,{get when(){return u().collapsed||!u().size},get children(){return x(Lz,{collapsed:!0,get onFocus(){return n.onFocus}})}})]}})}})]}})}})}function _De(){const n=Dt();return(()=>{var e=dDe(),t=e.firstChild,i=t.nextSibling,s=i.firstChild,r=s.nextSibling;return A(i,x(Ee,{class:"codicon-layers",tabIndex:0,tooltip:"Show call stack",onClick:()=>n.showCallStack()}),s),A(s,x(se,{get when(){return n.isEditorConnected()},get children(){return x(Ee,{class:"codicon-debug-stackframe-active rotate-180",tabIndex:0,tooltip:"Run back to breakpoint",onClick:()=>n.stepInDebugger({back:!0,runViaEditor:{breakpoint:!0}})})}}),null),A(s,x(Ee,{class:"codicon-debug-continue rotate-180",tabIndex:0,tooltip:"Run back to active line",onClick:o=>n.stepInDebugger({back:!0,runViaEditor:{line:!0}},o)}),null),A(s,x(Ee,{class:"codicon-debug-step-out",tabIndex:0,tooltip:"Step back out",onClick:()=>n.stepInDebugger({back:!0,out:!0})}),null),A(s,x(Ee,{class:"codicon-debug-step-into",tabIndex:0,tooltip:"Step back into",onClick:()=>n.stepInDebugger({back:!0})}),null),A(s,x(Ee,{class:"codicon-debug-step-back",tabIndex:0,tooltip:"Step back over",onClick:()=>n.stepInDebugger({back:!0,over:!0})}),null),A(i,x(Ee,{class:"codicon-debug-stop text-[--error-foreground]",tabIndex:0,onClick:()=>n.stopDebugger(),tooltip:"Stop debugger"}),r),A(r,x(Ee,{class:"codicon-debug-step-over",tabIndex:0,tooltip:"Step over",onClick:()=>n.stepInDebugger({over:!0})}),null),A(r,x(Ee,{class:"codicon-debug-step-into",tabIndex:0,tooltip:"Step into",onClick:()=>n.stepInDebugger({})}),null),A(r,x(Ee,{class:"codicon-debug-step-out",tabIndex:0,tooltip:"Step out",onClick:()=>n.stepInDebugger({out:!0})}),null),A(r,x(Ee,{class:"codicon-debug-continue",tabIndex:0,get tooltip(){return"Run to active line"+n.editorTooltipAddendum("debugger")()},onClick:o=>n.stepInDebugger({runViaEditor:{line:!0}},o)}),null),A(r,x(se,{get when(){return n.isEditorConnected()},get children(){return x(Ee,{class:"codicon-debug-stackframe-active",tabIndex:0,tooltip:"Run to breakpoint",onClick:()=>n.stepInDebugger({runViaEditor:{breakpoint:!0}})})}}),null),e})()}function Lz(n){const e=Dt();return(()=>{var t=uDe();return t.firstChild,A(t,x(Ee,{get classList(){return{"codicon-chevron-down":!n.collapsed,"codicon-chevron-up":n.collapsed}},get tooltip(){return`${n.collapsed?"Expand":"Collapse"} "Indicator Guide" panel`},tabIndex:0,namespace:"overview.debugger.header.action",onClick:()=>{e.setPanelState(Ue.OverviewDebuggerStatusGuide,i=>n.collapsed?{...i,collapsed:!1,size:i.size||50}:{...i,collapsed:!0}),n.onFocus?.("overview.debugger",!0)}}),null),t})()}const kz=25,_5=30;class wDe{constructor(e,t,i){this._state=e,this._fullWidth=t,this._lockPrePostTestSections=i;const s=Dt();this._doRequestStepData=(u,h)=>{s.sendTraceFramesData(u,h)},this._requestStepData=()=>this._doRequestStepData;const[r,o]=he(0),[a,l]=he(0);this._zoomLeft=r,this._zoomWidth=a,this._setZoomLeft=o,this._setZoomWidth=l,this._xShift=()=>0,this._minimapStepWidth=J(()=>this._fullWidth()/(e().trace.length-1)),this._preTestSection=J(()=>{if(e().trace.testBodyStart===e().trace.testBodyEnd||e().trace.testBodyStart===0)return{x:0,width:0,visible:!1,textVisible:!1,startStep:0,endStep:0};if(e().trace.testBodyStart===e().trace.length-1)return{x:0,visible:this._sectionVisible(t()),width:t(),textVisible:this._sectionTextVisible(t()),startStep:0,endStep:e().trace.length-1};if(this._lockPrePostTestSections()){const u=this._lockedPrePostTestSectionWidth();return{x:0,width:u,visible:this._sectionVisible(u),textVisible:this._sectionTextVisible(u),startStep:0,endStep:e().trace.testBodyStart}}else{const u=this.minimapStepX(e().trace.testBodyStart)+1;return{x:0,width:u,visible:this._sectionVisible(u),textVisible:this._sectionTextVisible(u),startStep:0,endStep:e().trace.testBodyStart}}}),this._postTestSection=J(()=>{if(e().trace.testBodyStart===e().trace.testBodyEnd||e().trace.testBodyEnd>=e().trace.length-2)return{x:t()-1,width:0,visible:!1,textVisible:!1,startStep:e().trace.length-1,endStep:e().trace.length-1};if(this._lockPrePostTestSections()){const u=this._lockedPrePostTestSectionWidth();return{x:t()-1-u,width:u,visible:this._sectionVisible(u),textVisible:this._sectionTextVisible(u),startStep:e().trace.testBodyEnd+1,endStep:e().trace.length-1}}else{const u=this.minimapStepX(e().trace.testBodyEnd+1),h=t()-u-1;return{x:u,width:h,visible:this._sectionVisible(h),textVisible:this._sectionTextVisible(h),startStep:e().trace.testBodyEnd+1,endStep:e().trace.length-1}}}),this._hasPrePostTestSections=J(()=>this._preTestSection().width>0||this._postTestSection().width>0),this._testSectionWidth=J(()=>this._lockPrePostTestSections()?t()-this._preTestSection().width-this._postTestSection().width:t()),this._minimapStepWidth=J(()=>this._testSectionWidth()/(e().trace.length-1-(this._lockPrePostTestSections()?this._startStepShift()+this._endStepShift():0))),this._xShift=J(()=>this._lockPrePostTestSections()?this._preTestSection().width:0),this._minX=J(()=>this._xShift()-1),this._maxX=J(()=>this._lockPrePostTestSections()?this._preTestSection().width+this._testSectionWidth()-1:this._fullWidth()-1),this._maxZoomWidthWithStepTileBorder=J(()=>Math.min(this._testSectionWidth(),this._minimapStepWidth()*this._testSectionWidth()/5,this._minimapStepWidth()*1e3)),this._maxZoomWidth=J(()=>Math.min(this._testSectionWidth(),this._minimapStepWidth()*1500)),this._minZoomWidth=J(()=>Math.min(this._maxZoomWidth(),this._minimapStepWidth()*12)),this._showStepTileBorder=J(()=>this._zoomWidth()<=this._maxZoomWidthWithStepTileBorder()),this._canResizeZoomControl=J(()=>this._zoomWidth()<=this._maxZoomWidth()&&this._zoomWidth()>=this._minZoomWidth()&&this._minZoomWidth()<this._maxZoomWidth()&&this._isGreaterThanHalfStepSize(this._maxZoomWidth()-this._minZoomWidth())&&this._zoomWidth()>5),this._canMoveZoomRight=J(()=>this._zoomLeft()+this._zoomWidth()<this._maxX()&&this._isGreaterThanHalfStepSize(this._maxX()-this._zoomLeft()+this._zoomWidth())),this._canMoveZoomLeft=J(()=>this._zoomLeft()>this._minX()&&this._isGreaterThanHalfStepSize(this._zoomLeft()-this._minX())),this._canMoveZoomControl=J(()=>this._canMoveZoomLeft()||this._canMoveZoomRight()),this._preTestSectionStartStepWidth=J(()=>this._preTestSection().width/(this._preTestSection().endStep-this._preTestSection().startStep)),this._postTestSectionStartStepWidth=J(()=>this._postTestSection().width/(this._postTestSection().endStep-this._postTestSection().startStep)),this._minimapStepGrid=J(()=>{const u=[];if(this._minimapStepWidth()>=2)for(let g=this._startStep();g<=this._endStep();g++)u.push({x:this.minimapStepX(g),n:g});const f={steps:u,numberOfTestSectionSteps:u.length};if(this._lockPrePostTestSections()){const g=u.length>0;if(this._preTestSectionStartStepWidth()>=2)for(let m=this._preTestSection().endStep-(g?1:0);m>=this._preTestSection().startStep;m--)f.steps.unshift({x:this.minimapStepX(m),n:m});if(this._postTestSectionStartStepWidth()>=2)for(let m=this._postTestSection().startStep+(g?1:0);m<=this._postTestSection().endStep;m++)f.steps.push({x:this.minimapStepX(m),n:m})}return f});const c=this._requestStepData();this._zoomedAreaStepGrid=J(()=>{const u={steps:[]},h=[],f=S=>S,g=this.minimapStepIndexByX(this._zoomLeft(),{roundingFunction:f,ignoreSpecialSection:!0}),m=this.minimapStepIndexByX(this._zoomLeft()+this._zoomWidth()+(this._zoomLeft()+this._zoomWidth()===this._maxX()?1:0),{roundingFunction:f,ignoreSpecialSection:!0}),p=Math.ceil(g),b=Math.floor(m),w=b-p+1,v=p-g,_=m-b,y=(this._fullWidth()+1)/(v+_+w);let C=0;if(v>0){const S=v*y;h.push({x:C,n:p-1,width:S}),C=h[0].width}for(let S=p;S<=b;S++)h.push({x:C,n:S,width:y}),C+=y;if(_>0){const S=_*y;h.push({x:C,n:b+1,width:S})}if(h.length){const S=Math.round(w*Math.log10(e().trace.length)),k=Math.max(h[0].n-S,0),I=Math.min(h[h.length-1].n+S,e().trace.length-1);for(let T=k;T<=I;T++)if(!e().trace.watchedSteps?.[T]){c(k,I);break}}return u.steps=h,u});const d=J(()=>this._zoomedAreaStepGrid().steps.length);this._zoomFactor=J(()=>{const u=e().trace.length;return(d()/u)**-.75})}_isGreaterThanHalfStepSize(e){return e>this._minimapStepWidth()/2}useDebouncedStepDataRequest(){this._requestStepData=J(()=>yg(this._doRequestStepData,Math.log10(this._state().trace.length)*5)),this.useDebouncedStepDataRequest=()=>{}}isKnownStepByNumber(e){return this._state().allKnownSteps.has(e)}isKnownOrCurrentStepByX(e){const t=this.minimapStepIndexByX(e);return this._state().allKnownSteps.has(t)||t===this._state().frame.frame}minimapClosestStepX(e){const t=this.minimapStepIndexByX(e,{snapToKnownStep:!0});return this.minimapStepX(t)}minimapStepX(e,t){const i=t?.minX??this._xShift()-1,s=t?.maxX??(this._lockPrePostTestSections()&&this._postTestSection().width?this._postTestSection().x:this._fullWidth()-1),r=t?.startStepShift??this._startStepShift(),o=t?.endStepShift??this._endStepShift(),a=t?.stepStandardWidth??this._minimapStepWidth(),l=t?.xShift??this._xShift();if(!t?.ignoreSpecialSection&&this._lockPrePostTestSections()&&(e<this._startStep()||e>this._endStep())){if(this._preTestSection().width&&e<this._startStep())return this.minimapStepX(e,{ignoreSpecialSection:!0,minX:-1,maxX:this._xShift(),startStepShift:0,endStepShift:this._state().trace.length-1-this._startStep(),xShift:0,stepStandardWidth:this._preTestSectionStartStepWidth()});if(this._postTestSection().width&&e>this._endStep())return this.minimapStepX(e,{ignoreSpecialSection:!0,minX:this._postTestSection().x,maxX:this._fullWidth()-1,startStepShift:this._endStep(),endStepShift:0,xShift:this._fullWidth()-this._postTestSection().width,stepStandardWidth:this._postTestSectionStartStepWidth()})}return e-r===0?i:e+o===this._state().trace.length-1?s:a*(e-r)-1+l}zoomLeft(){return this._zoomLeft}zoomWidth(){return this._zoomWidth}minimapStepIndexByX(e,t){const i=t?.startStep??this._startStep(),s=t?.endStep??this._endStep(),r=t?.stepStandardWidth??this._minimapStepWidth(),o=t?.minX??-1,a=t?.maxX??this._testSectionWidth();let l=e-(t?.xShift??this._xShift()),c=t?.startStepShift??this._startStepShift();if(!t?.ignoreSpecialSection&&this._lockPrePostTestSections()&&(e<this._preTestSection().width||e>this._postTestSection().x)){if(e<this._preTestSection().width)return this.minimapStepIndexByX(e,{ignoreSpecialSection:!0,minX:0,maxX:this._xShift(),startStep:0,endStep:this._preTestSection().endStep,startStepShift:0,xShift:0,stepStandardWidth:this._preTestSectionStartStepWidth()});if(e>this._postTestSection().x)return this.minimapStepIndexByX(e,{ignoreSpecialSection:!0,minX:0,maxX:this._postTestSection().width-2,startStep:Math.min(this._postTestSection().startStep+1,this._state().trace.length-1),endStep:this._state().trace.length-1,startStepShift:this._endStep(),xShift:this._fullWidth()-this._postTestSection().width,stepStandardWidth:this._postTestSectionStartStepWidth()})}if(l<=o)return i;if(l>=a)return s;const u=(t?.roundingFunction||Math.round)((l+1)/r)+c;if(t?.snapToKnownStep){const h=t?.snapDistancePx||2;let f=s,g=i;if(Math.abs(this.minimapStepX(g)-e)<h)return g;if(Math.abs(this.minimapStepX(f)-e)<h)return f;let m=1/0,p=1/0;for(let w of[this._state().frame.frame,...this._state().allKnownSteps,...this._state().trace.echoSteps?.steps||[]]){const v=u-w,_=Math.abs(v);v>0&&_<m&&(g=w,m=_),v<0&&_<p&&(f=w,p=_)}const b=m<p?[g,g]:[f,g];for(let w of b)if(Math.abs(this.minimapStepX(w)-e)<h)return w}return u<=i?i:u>=s?s:u}updateZoom(e){const{deltaY:t,deltaX:i,zoomStep:s}=e;if(s!==void 0){const r=this._zoomWidth()>=this._minZoomWidth()&&this._zoomWidth()<=this._maxZoomWidth()?this._zoomWidth():Math.max(this._maxZoomWidthWithStepTileBorder()/2,this._minZoomWidth()),o=this.minimapStepX(s);let a=o-r/2,l=o+r/2;a<this._minX()&&(l+=this._minX()-a,a=this._minX()),l>this._maxX()&&(a-=l-this._maxX(),l=this._maxX());const c=Math.max(l-a,this._minZoomWidth()),d=this._zoomLeft();o>d&&o<d+c||this._setZoomLeft(a),this._setZoomWidth(c);return}if(t||e.force){let r=(t||0)/this._zoomFactor();this._setZoomLeft(o=>{const a=e.mouseX?e.mouseX/this._fullWidth():.5,l=1-a;let c=o-a*r,u=o+this._zoomWidth()+l*r-c;return u>this._maxZoomWidth()?(u=this._maxZoomWidth(),c=o+this._zoomWidth()-u):u<this._minZoomWidth()&&(u=this._minZoomWidth(),c=o+this._zoomWidth()-u),c<this._minX()&&(u=Math.min(u+(this._minX()-c),this._maxZoomWidth()),c=this._minX()),c+u>this._maxX()&&(c=this._maxX()-u),this._setZoomWidth(u),c})}i&&!t&&this.updateMinimapZoomLeft(this._zoomLeft()+i/(10*Math.log10(this._state().trace.length)))}updateMinimapZoomLeft(e,t){if(!this.canMoveZoomControl()())return;!this.canResizeZoomControl()()&&t?.snapToKnownStep&&(e=this.minimapClosestStepX(e)-this._zoomWidth()/2),e-this._zoomLeft()<0?e<this._minX()&&(e=this._minX()):e+this._zoomWidth()>this._maxX()&&(e=this._maxX()-this._zoomWidth()),this._setZoomLeft(e)}updateMinimapZoomSizeFromLeft(e){this.canResizeZoomControl()()&&this._setZoomLeft(t=>{e<this._minX()&&(e=this._minX());const i=t+this._zoomWidth();e>=i&&(e=i);const s=e-t;let r=this._zoomWidth()-s;return r>this._maxZoomWidth()?r=this._maxZoomWidth():r<this._minZoomWidth()&&(r=this._minZoomWidth(),e=t+this._zoomWidth()-r),this._setZoomWidth(r),e})}updateMinimapZoomSizeFromRight(e){if(!this.canResizeZoomControl()())return;let t=Math.max(Math.min(e,this._maxX())-this._zoomLeft(),0);this._setZoomWidth(t),t>this._maxZoomWidth()?(t=this._maxZoomWidth(),this._setZoomLeft(i=>i+this._zoomWidth()-t)):t<this._minZoomWidth()&&(t=this._minZoomWidth()),this._setZoomWidth(t)}miniMapStepGrid(){return this._minimapStepGrid}zoomedAreaStepGrid(){return this._zoomedAreaStepGrid}showStepTileBorder(){return this._showStepTileBorder}canResizeZoomControl(){return this._canResizeZoomControl}canMoveZoomControl(){return this._canMoveZoomControl}canMoveZoomRight(){return this._canMoveZoomRight}canMoveZoomLeft(){return this._canMoveZoomLeft}hasPrePostTestSections(){return this._hasPrePostTestSections}lockPrePostTestSections(){return this._lockPrePostTestSections}postTestSection(){return this._postTestSection}preTestSection(){return this._preTestSection}minimapStepWidth(){return this._minimapStepWidth}_startStep(){return this._lockPrePostTestSections()?this._preTestSection().endStep:0}_endStep(){return this._lockPrePostTestSections()?this._postTestSection().startStep:this._state().trace.length-1}_lockedPrePostTestSectionWidth(){return this._fullWidth()>_5*4?Math.max(this._fullWidth()/10,_5):kz*2}_sectionTextVisible(e){return e>=_5}_sectionVisible(e){return e>=kz}_startStepShift(){return this._lockPrePostTestSections()?this._preTestSection().endStep:0}_endStepShift(){return this._lockPrePostTestSections()?this._postTestSection().endStep-this._postTestSection().startStep:0}}dn(["click"]);class yDe{constructor(e){this._appService=e}_namespace="overview.debugger";matches(e){return e.startsWith(this._namespace)}handle(e,t){if(e=this._narrow(e),!t.target)return;const i=t.target,s=o=>{t.preventDefault(),t.stopPropagation()},r=this._locateRootElement(e,i);if(t.key==="Escape"&&!rt(t)){if(e===".")this._appService.focus("editor");else if(e==="header.action")return s(r?.focus())}}_locateRootElement(e,t){if(e===".")return t;if(e==="header.action")return t.closest(`[data-namespace="${this._namespace}"]`)}_narrow(e){return e=e.replace(`${this._namespace}.`,""),e=e.replace(this._namespace,"."),e}}var SDe=G('<div class="h-full w-full">');function xz(n){const e=Dt(),t=im(),[i,s]=e.appSettings(),r=()=>i.errors.fullSourceLinks,o=()=>i.errors.unmappedFiles,a=()=>i.errors.diff?.compact!=="auto",l=()=>i.errors.wordWrap,c=he(),[d]=c,u=he(!1),[h]=u,f=e.getFindState(),[g,m]=he(),p=he(),[b]=p,w=()=>{const v=[];return v.push({text:"Display non-user code stack entries",action:()=>s("errors","unmappedFiles",!o()),checked:o()}),v.push({text:"Display file path in source links",action:()=>s("errors","fullSourceLinks",!r()),checked:r()}),v.push({text:"Display intra-line diff only if no line diff is available",action:()=>s("errors",Gt(_=>{_.diff||(_.diff={}),_.diff.compact=a()?"auto":"always"})),checked:!a()}),v.push(wg),v.push({text:"Collapse Errors panel",action:()=>{e.setPanelState(n.panelId,_=>({..._,collapsed:!0})),n.onFocus?.("overview",!0)}}),v};return x($r,{header:"Errors",get headerClass(){return`pl-2 ${n.headerClass||""}`},namespace:"overview.errors",get showProgress(){return n.showProgress},onVerticalScroll:v=>{v>0&&!h()&&d()&&(document.hasFocus()?d()?.hasAttribute("data-unfocused-scrolling")&&d()?.removeAttribute("data-unfocused-scrolling"):d()?.setAttribute("data-unfocused-scrolling","true"))},get onFocus(){return n.onFocus},get tooltip(){return`Go to Errors panel <span class="keyboard-shortcut">G</span>${e.isStandalone()?'&nbsp;<span class="keyboard-shortcut">O</span>':""}&nbsp;<span class="keyboard-shortcut">E</span>`},get icons(){return[x(Ee,{class:"codicon-word-wrap",get classList(){return{activeIcon:l()}},onClick:()=>s("errors","wordWrap",!l()),tabIndex:0,namespace:"overview.errors.header.action",tooltip:"Toggle word wrap in error messages"}),x(Ee,{menuItems:w,class:"codicon-ellipsis",tabIndex:0,namespace:"overview.errors.header.action",tooltip:"More actions"})]},contentClass:"ml-2.5 pr-1 panel-font-size",get overlays(){return[x(Jd,{onUpdateSearchTerm:async v=>{const _=await b()?.search(v);m(_?{searchTerm:v,current:_?.current,total:_?.total}:void 0)},onNextResult:async()=>{const v=await b()?.jumpToNext();m(v?{current:v?.current,total:v?.total}:void 0)},onPreviousResult:async()=>{const v=await b()?.jumpToPrevious();m(v?{current:v?.current,total:v?.total}:void 0)},onClose:async v=>{await b()?.exit(v),e.closeFind()},searchStatus:g,isVisible:()=>f()?.namespace==="overview.errors",mode:()=>"enter"})]},get children(){var v=SDe();return We(Nh,v,()=>Nh&&{controller:p,prefix:"oe"}),A(v,x(hV,{get state(){return n.state},namespace:"overview",viewerElement:c,revealing:u,get append(){return x(p0,{get state(){return n.state.displayLimits?.errors},handler:()=>t.loadRestOfErrors()})}})),v}})}var CDe=G('<div class="absolute inset-0 flex flex-col">');function Tz(n){const e=Dt(),t=im(),i=Bg(),[s,r]=e.appSettings(),o=()=>s.logs.fullSourceLinks,a=()=>s.logs.headers,l=()=>s.logs.context,c=()=>s.valuePeek,[d,u]=he(void 0,{equals:!1}),[h,f]=he(),g=()=>e.getDebuggerStarted()(),m=e.getFindState(),[p,b]=he(),w=he(),[v]=w,[_,y]=he(),C=()=>{const S=[];return!g()&&!e.isStandalone()&&S.push({text:"Display log test headers",action:()=>r("logs","headers",!a()),checked:a()}),S.push({text:"Display file name in source links",action:()=>r("logs","fullSourceLinks",!o()),checked:o()}),S.push({text:"Display value context when available",action:()=>r("logs","context",!l()),checked:l()}),S.push(wg),S.push({text:"Fold all expanded log entries",action:()=>{u()}}),S.push({text:"Open Logs panel in side view",action:()=>{e.openInSideView(Zt.Logs,n.state.selection?.log?{logs:{selection:n.state.selection?.log}}:void 0)},shortcut:"S"}),S.push({text:"Collapse Logs panel",action:()=>{e.setPanelState(n.panelId,k=>({...k,collapsed:!0})),n.onFocus?.("overview",!0)}}),S};return x($r,{header:"Logs",headerClass:"pl-2",scrollable:h,namespace:"overview.logs",get tooltip(){return`Go to Logs panel <span class="keyboard-shortcut">G</span>${e.isStandalone()?'&nbsp;<span class="keyboard-shortcut">O</span>':""}&nbsp;<span class="keyboard-shortcut">L</span>`},get showProgress(){return n.showProgress},get onFocus(){return n.onFocus},get icons(){return _()??[x(se,{get when(){return J(()=>!g())()&&!e.isStandalone()},get children(){return x(Ee,{class:"codicon-inspect",get classList(){return{activeIcon:c()}},onClick:()=>r("valuePeek",!c()),tabIndex:0,namespace:"overview.logs.header.action",get tooltip(){return`${c()?"Disable":"Enable"} value peek<br/><br/>${SQ}`}})}}),x(Ee,{menuItems:C,class:"codicon-ellipsis",tabIndex:0,namespace:"overview.logs.header.action",tooltip:"More actions"})]},contentClass:"panel-font-size flex flex-col",get overlays(){return[x(Jd,{onUpdateSearchTerm:async S=>{const k=await v()?.search(S);b(k?{searchTerm:S,current:k?.current,total:k?.total}:void 0)},onNextResult:async()=>{const S=await v()?.jumpToNext();b(S?{current:S?.current,total:S?.total}:void 0)},onPreviousResult:async()=>{const S=await v()?.jumpToPrevious();b(S?{current:S?.current,total:S?.total}:void 0)},onClose:async S=>{await v()?.exit(S),e.closeFind()},searchStatus:p,isVisible:()=>m()?.namespace==="overview.logs",mode:()=>"enter"})]},get children(){var S=CDe();return We(Wc,S,()=>Wc&&{controller:w,prefix:"ol"}),A(S,x(ow,{get state(){return n.state},service:i,namespace:"overview",get onFocus(){return n.onFocus},scrollableElementRef:f,foldAllOpenedLogs:d,get append(){return x(p0,{get state(){return n.state.displayLimits?.logs},handler:()=>t.loadRestOfLogs()})},icons:y})),S}})}var LDe=G('<div class="h-full w-full relative outline-none panel-font-size"tabindex=-1><div class="py-1 shadow-[--widget-shadow] cursor-default flex flex-row items-center justify-center max-h-7 pl-2"><div class="uppercase flex-grow header-font-size font-bold truncate pr-1 py-0.5 header-tracking select-none"><span class="pb-0.5 px-0.5">Startup Events</span></div></div><div tabindex=-1 class="absolute outline-none inset-0 top-7 pl-2.5 overflow-x-auto overflow-y-clip">'),kDe=G('<div class="flex flex-row items-center"><div class="flex-grow truncate pr-1 opacity-80">');function xDe(n){const[e,t]=he(!1),[i,s]=he(),[r,o]=he(0),a=J(()=>n.state.startupEvents.slice(-r())),l=a4(a,100,{maxWait:100}),c=lw(),d=im();return Bn(()=>{d.trackStartupEvents()}),Ot(()=>{d.untrackStartupEvents()}),jh(i,u=>{const[h]=u,{height:f}=h.contentRect,g=Math.max(1,Math.floor(f/c));o(g)}),(()=>{var u=LDe(),h=u.firstChild,f=h.firstChild,g=f.firstChild,m=h.nextSibling;return u.$$focusout=()=>t(!1),u.$$focusin=()=>{t(!0)},We(p=>s(p),m),A(m,()=>l().map(p=>(()=>{var b=kDe(),w=b.firstChild;return We(Te,w,()=>Te&&{content:p}),A(w,p),Me(v=>Dl(b,`height: ${c}px`,v)),b})())),Me(p=>{var b=!!e(),w=!!e();return b!==p.e&&g.classList.toggle("border-b",p.e=b),w!==p.t&&g.classList.toggle("border-b-[--focus-header-border]",p.t=w),p},{e:void 0,t:void 0}),u})()}dn(["focusin","focusout"]);var TDe=G(`<div class="[&amp;_h2]:header-tracking px-2.5 pb-2 text-[length:--panel-font-size] [&amp;_a]:text-[--link-foreground] [&amp;_a]:underline [&amp;_h2]:pt-4 [&amp;_h2]:text-[length:--header-font-size] [&amp;_h2]:font-bold [&amp;_h2]:uppercase [&amp;_h2]:text-[--editor-warning-foreground] [&amp;_li]:break-words [&amp;_p:not(:first-child)]:pt-2 [&amp;_ul]:ml-3 [&amp;_ul]:list-disc [&amp;_ul]:space-y-1 [&amp;_ul]:pt-2"><p>It looks like Wallaby couldn't start properly. Please review the troubleshooting steps below to help resolve your issue.</p><h2>. Verify Tests Work Outside Wallaby.js</h2><p>Please make sure that your tests are running correctly (and passing) outside of Wallaby. Often the root cause of a Wallaby problem is an error in your tests/application code, or else a problem with your test runner configuration.</p><ul><li>Run your tests using your preferred command (e.g., <code>npm test</code> or <code>yarn test</code>).</li><li>If the tests pass outside of Wallaby, proceed with Wallaby-specific troubleshooting below.</li></ul><h2>. Inspect Wallaby Diagnostics Report</h2><p>Wallaby Diagnostics Report is a simple JSON text report that contains some basic information about your Wallaby config and project that is required to start troubleshooting most of Wallaby issues. The report may contain additional error details that can help you identify the cause of your issue.</p><ul><li><button class="text-[--link-foreground] underline">Click here</button> to copy the Wallaby Diagnostics Report to your clipboard.</li><li>Inspect the diagnostic report to identify the potential cause of the issue.</li></ul><h2>. Next Steps</h2><p>If these steps don't resolve the issue, try:</p><ul><li>Wallaby <a href=https://wallabyjs.com/docs/intro/troubleshooting.html target=_blank>troubleshooting docs</a> for additional troubleshooting steps.</li><li>Wallaby <a href=https://wallabyjs.com/docs/integration/overview.html target=_blank>supported technology docs</a> for troubleshooting steps specific to your technology.</li><li>Search our <a href="https://github.com/wallabyjs/public/issues?q=won%27t+start"target=_blank>Github issue repository</a> for similar issues and possible solutions.</li><li>Create a <a href=https://github.com/wallabyjs/public/issues/new target=_blank>new issue</a> in our Github repository.</li><li>Use Wallaby's community <a href=https://wallabyjs.com/chat/ target=_blank>discord chat</a> to solve your issue with the help of other Wallaby users and the Wallaby team.</li><li>Send us an <a href=mailto:hello@wallabyjs.com target=_blank>email</a>.`),DDe=G("<h2>. Check for Missing Jest Hoist Pattern"),IDe=G("<p>If you're using a package manager like pnpm or Yarn with PnP, Jest and its dependencies may need to be hoisted to be accessible by Wallaby. This is a common issue that can prevent Wallaby from properly running your tests."),MDe=G('<ul><li>Add <code>public-hoist-pattern[]=jest</code> to your <code>.npmrc</code> file in your project root.</li><li>After adding the hoist pattern, reinstall your dependencies with <code>pnpm install</code> or <code>yarn install</code>.</li><li>If the problem persists, check your Wallaby diagnostics report for additional messages that indicate more modules need to be hoisted. (<button class="text-[--link-foreground] underline">Click here</button> to copy the report to your clipboard.)'),EDe=G("<h2>. Check for Missing Vitest Hoist Patterns"),NDe=G("<p>If you're using a package manager like pnpm or Yarn with PnP, Vitest and its dependencies may need to be hoisted to be accessible by Wallaby. This is a common issue that can prevent Wallaby from properly running your tests."),RDe=G('<ul><li>Add <code>public-hoist-pattern[]=*vitest*</code> and <code>public-hoist-pattern[]=vite-node</code> to your <code>.npmrc</code> file in your project root.</li><li>After adding the hoist pattern, reinstall your dependencies with <code>pnpm install</code> or <code>yarn install</code>.</li><li>If the problem persists, check your Wallaby diagnostics report for additional messages that indicate more modules need to be hoisted. (<button class="text-[--link-foreground] underline">Click here</button> to copy the report to your clipboard.)');function WDe(){const n=Dt(),e=n.getStatus(),t=()=>e().troubleshootingHint.length;return(()=>{var i=TDe(),s=i.firstChild,r=s.nextSibling,o=r.firstChild,a=r.nextSibling,l=a.nextSibling,c=l.nextSibling,d=c.firstChild,u=c.nextSibling,h=u.nextSibling,f=h.firstChild,g=f.firstChild,m=h.nextSibling,p=m.firstChild;return A(i,()=>e().troubleshootingHint.map((b,w)=>x(Fn,{get children(){return[x(ot,{when:b==="pnpmJest",get children(){return[(()=>{var v=DDe(),_=v.firstChild;return A(v,w+1,_),v})(),IDe(),(()=>{var v=MDe(),_=v.firstChild,y=_.nextSibling,C=y.nextSibling,S=C.firstChild,k=S.nextSibling;return k.$$click=()=>n.copyDiagnosticsReport(),v})()]}}),x(ot,{when:b==="pnpmVitest",get children(){return[(()=>{var v=EDe(),_=v.firstChild;return A(v,w+1,_),v})(),NDe(),(()=>{var v=RDe(),_=v.firstChild,y=_.nextSibling,C=y.nextSibling,S=C.firstChild,k=S.nextSibling;return k.$$click=()=>n.copyDiagnosticsReport(),v})()]}})]}})),r),A(r,()=>t()+1,o),A(c,()=>t()+2,d),g.$$click=()=>n.copyDiagnosticsReport(),A(m,()=>t()+3,p),i})()}dn(["click"]);var ADe=G("<span>"),FDe=G("<div>"),Dz=G("<br>"),VDe=G("<span class=font-bold>Applied filter:"),PDe=G("<span class=opacity-80>"),ODe=G('<div class="[&amp;>div.selected.passing]:border-[transparent] [&amp;>div.selected.passing]:bg-[var(--list-hover-background)] [&amp;>div.selected.passing_.codicon-pass]:text-[--testing-icon-passed] [&amp;>div.selected]:rounded-[var(--focus-border-radius)] [&amp;>div.selected]:border-[var(--focus-border)] [&amp;>div.selected]:bg-[var(--list-active-selection-background)] [&amp;>div.selected]:text-[var(--list-active-selection-foreground)] hover:[&amp;>div.selected]:bg-[var(--list-active-selection-background)] [&amp;>div.selected_.file-name]:text-[var(--list-active-selection-foreground)] [&amp;>div]:border [&amp;>div]:border-transparent [&amp;>div]:pl-2.5 [&amp;>div]:leading-[var(--list-item-line-height)] hover:[&amp;>div]:bg-[var(--list-hover-background)] [&amp;_span.test-name-separator]:[word-spacing:-0.1em;]">'),ZDe=G('<div data-id=allLogsAndErrors data-index=0 tabindex=-1 class="flex h-[--panel-item-height] cursor-pointer items-center truncate outline-none"><span class="codicon codicon-output icon-opacity pr-1 !text-[length:--icon-smaller-font-size]"></span><span class=pb-[0.0625rem]>'),GDe=G("<span class=codicon>"),BDe=G('<div class="file-name truncate text-[length:--panel-smaller-font-size] leading-snug text-[var(--subtle-foreground)]">'),XDe=G("<li>"),zDe=G('<div class="progress flex pr-1">'),HDe=G('<div tabindex=-1 class="group flex cursor-pointer select-none flex-row outline-none [&amp;.selected_.icons]:flex"><div class="flex flex-grow truncate"><div class="flex flex-row items-center truncate"><div class="[&amp;_span]:icon-opacity flex [&amp;_span]:!text-[length:--icon-smaller-font-size]"></div><div class="truncate pb-[0.0625rem] pl-1"></div></div></div><div class="side-widget relative ml-auto flex pr-1 [&amp;_li]:flex [&amp;_li_button]:mx-0 [&amp;_li_button]:!py-[0.09375rem] [&amp;_li_button]:!text-[length:--icon-smallest-font-size]"><ul class="icons hidden flex-row justify-center group-hover:flex"><li></li><li></li><li>');function UDe(n){const e=Dt(),t=im(),[i,s]=e.appSettings(),[r,o]=he(),a=()=>n.state.lineTests?.loc?[x(fh,{class:"cursor-pointer font-mono font-normal normal-case hover:underline",get value(){return n.state.lineTests.loc},compactFileNameOnly:!0,noColumn:!0,codeFragmentTooltipOptions:()=>n.state.lineTests.loc.file&&n.state.lineTests.loc.line?{file:n.state.lineTests.loc.file,line:n.state.lineTests.loc.line,navigatable:!0}:void 0})," ","tests (",J(()=>n.state.numberOfDisplayedTests||0),")"]:(()=>{var g=ADe();return We(Te,g,()=>Te&&{content:`Go to Tests panel <span class="keyboard-shortcut">G</span>${e.isStandalone()?'&nbsp;<span class="keyboard-shortcut">O</span>':""}&nbsp;<span class="keyboard-shortcut">T</span>`}),A(g,x(Fn,{get children(){return[x(ot,{get when(){return n.state.showTestTree},children:"Test Explorer"}),x(ot,{when:!0,get children(){return["Failing tests (",J(()=>n.state.numberOfFailingTests||0),")"]}})]}})),g})(),l=()=>i.overviewTests.fileNames,c=()=>!i.overviewTests.treeSearchControlHidden,d=()=>!!n.state.tests.foreground?.search?.raw,u=()=>e.getDebuggerStarted()(),h=J(()=>n.state.tests.foreground?.search?.raw||i.overviewTests.treeFilter);$e(()=>n.state.tests.foreground?.search?.raw,g=>{n.state.showTestTree&&s("overviewTests","treeFilter",g||"")},{defer:!0}),$e([()=>i.overviewTests.treeSearchControlHidden,()=>n.state.showTestTree],()=>{n.state.showTestTree&&(i.overviewTests.treeSearchControlHidden?t.tests.hideSearch():t.tests.showSearch())}),$e([()=>n.state.tests.searchControlVisible,()=>n.state.showTestTree],()=>{n.state.showTestTree&&(n.state.tests.searchControlVisible?s("overviewTests","treeSearchControlHidden",!1):s("overviewTests","treeSearchControlHidden",!0))});const f=()=>{const g=[];return n.state.showTestTree||(g.push({text:"Display full test name file path",action:()=>s("overviewTests","fileNames",!l()),checked:l()}),g.push(wg)),g.push({text:"Open Tests panel in side view",action:()=>{e.openInSideView(Zt.Tests,n.state.testList?n.state.numberOfFailingTests?{tests:{filter:"@failed"}}:void 0:{tests:{filter:n.state.tests.foreground?.search?.raw||""}})},shortcut:"S"}),g.push({text:"Collapse Tests panel",action:()=>{e.setPanelState(n.panelId,m=>({...m,collapsed:!0})),n.onFocus?.("overview",!0)}}),g};return x($r,{get header(){return a()},namespace:"overview.tests",get onFocus(){return n.onFocus},get showProgress(){return n.showProgress},get icons(){return[x(se,{get when(){return!u()},get children(){return x(se,{get when(){return n.state.lineTests},get fallback(){return x(Ee,{tabIndex:0,class:"p-[0.21875rem]",namespace:"overview.tests.header.action",get tooltip(){return`Show tests covering the current line of code${e.editorTooltipAddendum("lineTests")()}`},onClick:g=>{t.trackCurrentLineTests(g),n.onFocus?.("overview.tests",!0)},children:$T})},get children(){return[x(Ee,{tabIndex:0,namespace:"overview.tests.header.action",class:"codicon-sign-out",tooltip:"Reset to failing tests",onClick:()=>{t.resetOverviewTestListSource(),n.onFocus?.("overview.tests",!0)}}),x(se,{get when(){return n.state.lineTests?.active},get fallback(){return x(Ee,{tabIndex:0,class:"p-[0.21875rem]",namespace:"overview.tests.header.action",get tooltip(){return`Resume tracking the current line of code${e.editorTooltipAddendum("lineTests")()}`},onClick:g=>{t.trackCurrentLineTests(g),n.onFocus?.("overview.tests",!0)},children:$T})},get children(){return x(Ee,{tabIndex:0,namespace:"overview.tests.header.action",class:"activeIcon p-[0.21875rem]",tooltip:"Stop tracking the current line of code",onClick:()=>{t.untrackCurrentLineTests(),n.onFocus?.("overview.tests",!0)},children:$T})}})]}})}}),x(se,{get when(){return n.state.showTestTree},get children(){return x(Ee,{tabIndex:0,namespace:"overview.tests.header.action",get classList(){return{"codicon-filter":!c()&&!d(),"codicon-filter-filled":!c()&&d(),"codicon-filter activeIcon":c()}},onClick:()=>s("overviewTests","treeSearchControlHidden",c()),get tooltip(){return(()=>{var g=FDe();return A(g,()=>`Click to ${c()?"hide":"show"} filter/search control`,null),A(g,(()=>{var m=J(()=>!!d());return()=>m()&&[Dz(),Dz(),VDe()," ",(()=>{var p=PDe();return A(p,()=>n.state.tests.foreground?.search?.raw),p})()]})(),null),g})()}})}}),x(se,{get when(){return n.state.allowedToShowTestTree},get children(){return x(Ee,{tabIndex:0,namespace:"overview.tests.header.action",class:"codicon-list-tree",get classList(){return{activeIcon:n.state.showTestTree}},onClick:()=>s("overviewTests","tree",!n.state.showTestTree),get tooltip(){return`Switch to ${n.state.showTestTree?"list":"tree"} view`}})}}),x(Ee,{menuItems:f,class:"codicon-ellipsis",tabIndex:0,namespace:"overview.tests.header.action",tooltip:"More actions"})]},headerClass:"pl-2",contentClass:`overflow-x-hidden
                    panel-font-size
                    `,scrollable:r,get children(){return x(Fn,{get children(){return[x(ot,{get when(){return n.state.showTestTree},get children(){return x(jn.Provider,{get initial(){return t.tests},get children(){return x(z9,{get state(){return n.state},setIcons:()=>{},onFocus:g=>n.keyboard.onFocus(g,!1),namespace:"overview.tests",compact:!0,get filter(){return h()},setScrollable:o})}})}}),x(ot,{when:!0,get children(){return x(YDe,{get state(){return n.state},get showTestFileNames(){return l()},namespace:"overview.tests"})}})]}})}})}function YDe(n){const e=Dt(),t=im(),i=J(()=>e.getTestRunModeParams()()),s=J(()=>e.getProject()()),r=()=>n.state.numberOfFailingTests||n.state.numberOfGlobalErrors?n.state.hasAnyLogs?"All logs and errors":"All errors":n.state.hasAnyLogs?"All logs":"No logs or errors";return Bn(()=>{t.trackOverviewTestList()}),Ot(()=>{t.untrackOverviewTestList()}),(()=>{var o=ODe();return A(o,()=>{const a="allLogsAndErrors",l=()=>n.state.selection.test===a;return x(se,{get when(){return!n.state.lineTests?.loc},get children(){var c=ZDe(),d=c.firstChild,u=d.nextSibling;return We(h=>$e([()=>h,l],()=>{h&&l()&&h.parentElement&&(h.parentElement.scrollTop=h.offsetTop)}),c),c.$$click=()=>t.selectAllLogsAndErrors(),We(Te,d,()=>Te&&{content:s()&&zC(s(),e.isEditorConnected(),i(),e.getCoreVersion())||void 0}),A(u,r),Me(h=>{var f=`${n.namespace}.content.item`,g=!!l();return f!==h.e&&xt(c,"data-namespace",h.e=f),g!==h.t&&c.classList.toggle("selected",h.t=g),h},{e:void 0,t:void 0}),c}})},null),A(o,x(yme,{get of(){return n.state.testList||{}},children:(a,l,c)=>{const d=J(()=>n.state.selection.test===a),u=J(()=>l().selection),h=J(()=>n.state.testFileProgressByFile[l().path[0]]),f=()=>`<span class='font-bold'>${DQ(l().path).join(" / ")}</span> ${KDe(l())}
                        <br/>at <span class='opacity-80'>${l().location.file}${l().location.line?`:${l().location.line}`:""}</span>`,g=J(()=>n.showTestFileNames&&l().location);return(()=>{var m=HDe(),p=m.firstChild,b=p.firstChild,w=b.firstChild,v=w.nextSibling,_=p.nextSibling,y=_.firstChild,C=y.firstChild,S=C.nextSibling,k=S.nextSibling;return We(I=>$e([()=>I,u],()=>{I&&u()?.active&&I.parentElement&&(I.parentElement.scrollTop=I.offsetTop)}),m),m.$$dblclick=I=>e.navigate(l().location,I),m.$$click=()=>t.selectTest(l()),xt(m,"data-id",a),A(w,x(Fn,{get children(){return[x(ot,{get when(){return h().status==="running"},get children(){return x(vte,{get progress(){return h()}})}}),x(ot,{when:!0,get children(){var I=GDe();return We(Te,I,()=>Te&&{content:f()}),Me(T=>{var D=!!(!l().passing&&l().hasFailingSnapshot&&!l().focused),M=!l().passing&&!l().focused,E=!!(l().passing&&!l().focused),W=!!(l().skipped&&!l().focused),P=!!(l().toBeDone&&!l().focused),N=!!l().focused;return D!==T.e&&I.classList.toggle("codicon-device-camera",T.e=D),M!==T.t&&I.classList.toggle("codicon-error",T.t=M),E!==T.a&&I.classList.toggle("codicon-pass",T.a=E),W!==T.o&&I.classList.toggle("codicon-beaker-stop",T.o=W),P!==T.i&&I.classList.toggle("codicon-beaker",T.i=P),N!==T.n&&I.classList.toggle("codicon-filter-filled",T.n=N),T},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),I}})]}})),A(v,(()=>{var I=J(()=>!!g());return()=>I()?x(v4,{get test(){return l()}}):l().name})()),A(p,x(se,{get when(){return g()},get children(){var I=BDe();return A(I,x(h2,{get text(){return`${l().location.file}${l().location.line?`:${l().location.line}`:""}`},tooltip:!1})),I}}),null),A(y,x(se,{get when(){return l().location},get children(){var I=XDe();return A(I,x(Ee,{tabIndex:-1,class:"codicon-go-to-file pl-[0.08rem] pr-[0.2rem]",get tooltip(){return`Open test ${l().passing||l().skipped||l().toBeDone?"":"error "}in editor <span class='keyboard-shortcut'>Enter</span><br/><br/>${f()}${e.editorTooltipAddendum()()}`},get namespace(){return`${n.namespace}.content.item.action`},onClick:T=>e.navigate(l().location,T)})),I}}),C),A(C,x(Ee,{tabIndex:-1,class:"codicon-filter pl-0.5 pr-0.5",get tooltip(){return J(()=>!!l().focused)()?'Unfocus test <span class="keyboard-shortcut">F</span><br/><br/>'+ub:`Focus test <span class="keyboard-shortcut">F</span><br/><br/>${f()}<br/><br/>`+ub},get namespace(){return`${n.namespace}.content.item.action`},get classList(){return{"codicon-filter-filled":l().focused}},onClick:()=>e.toggleTestFilter(l().path)})),A(S,x(Ee,{tabIndex:-1,class:"codicon-chip",get namespace(){return`${n.namespace}.content.item.action`},tooltip:"Profile test <span class='keyboard-shortcut'>P</span>",onClick:()=>e.profile(l().path)})),A(k,x(Ee,{tabIndex:-1,class:"codicon-debug",get tooltip(){return`Debug test <span class='keyboard-shortcut'>D</span><br/><br/>${f()}`},get namespace(){return`${n.namespace}.content.item.action`},onClick:()=>e.debug(l().path)})),A(_,x(se,{get when(){return h().hasTestFileProgressTime},get children(){var I=zDe();return A(I,x(bte,{get progress(){return h()},class:"!text-[length:65%]"})),Me(T=>nn(I,{hidden:!g(),"items-end justify-end ml-auto mt-auto":!!g()},T)),I}}),null),Me(I=>{var T=c()+1,D=`${n.namespace}.content.item`,M={"selected selected-test":d(),"h-[--panel-item-height]":!g(),passing:l().passing&&!l().focused},E={"flex-col pb-[0.15625rem]":!!g()},W=!l().passing,P=!!l().passing,N=!!l().skipped,H=!!l().toBeDone,U={"items-center justify-center":!g(),"items-start pt-[0.125rem]":!!g(),"flex-col":!!g()},B=!g(),Y=!!g();return T!==I.e&&xt(m,"data-index",I.e=T),D!==I.t&&xt(m,"data-namespace",I.t=D),I.a=nn(m,M,I.a),I.o=nn(p,E,I.o),W!==I.i&&w.classList.toggle("text-[--testing-icon-failed]",I.i=W),P!==I.n&&w.classList.toggle("text-[--testing-icon-passed]",I.n=P),N!==I.s&&w.classList.toggle("text-[--testing-icon-queued]",I.s=N),H!==I.h&&w.classList.toggle("text-[--testing-icon-skipped]",I.h=H),I.r=nn(_,U,I.r),B!==I.d&&y.classList.toggle("items-center",I.d=B),Y!==I.l&&y.classList.toggle("items-start",I.l=Y),I},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0}),m})()}}),null),A(o,x(p0,{get state(){return n.state.displayLimits?.tests},handler:()=>t.loadRestOfTests()}),null),o})()}function KDe(n){return n.skipped?`<span class="text-[--testing-icon-queued]">${(n.focused?"focused & ":"")+"skipped"}</span>`:n.toBeDone?`<span class="text-[--testing-icon-skipped]">${(n.focused?"focused & ":"")+"todo"}</span>`:n.passing?`<span class="text-[--testing-icon-passed]">${(n.focused?"focused & ":"")+"passed"}</span>`:`<span class="text-[--error-foreground]">${(n.focused?"focused & ":"")+`failed${n.hasFailingSnapshot?" snapshot":""}`}</span>`}dn(["click","dblclick"]);class jDe{constructor(e,t,i){this._appService=e,this._overviewService=t,this._keyboard=i}_namespace="overview.tests";matches(e){return e.startsWith(this._namespace)}handle(e,t,i){if(e=this._narrow(e),!t.target)return;const s=t.target,r=l=>{t.preventDefault(),t.stopPropagation()};if(H1(t))return r();const o=new _te("overview.tests",this._keyboard,this._appService,this._overviewService.tests,!0);if(!i.testList){o.handle(e,t,i);return}const a=this._locateTestElement(e,s);if(a&&i.testList){if(t.key==="ArrowUp")return fr(t)?r(a.parentElement?.scrollBy({top:-50,behavior:"smooth"})):r(this._selectTest(i.testList,a.previousElementSibling,!i.lineTests?.loc));if(t.key==="ArrowDown"){if(fr(t))return r(a.parentElement?.scrollBy({top:50,behavior:"smooth"}));if(a.nextSibling)return r(this._selectTest(i.testList,a.nextElementSibling,!1))}else{if(t.key==="Home"&&!rt(t))return this._selectTest(i.testList,a.parentElement?.firstElementChild,!i.lineTests?.loc);if(t.key==="End"&&!rt(t))return r(this._selectTest(i.testList,a.parentElement?.lastElementChild,!i.lineTests?.loc));if((t.key==="PageDown"||t.key==="PageUp")&&!rt(t)){const l=a.parentElement;if(l){const c=l.children.length,d=a.getBoundingClientRect().height,u=l.getBoundingClientRect().height,f=Number(a.getAttribute("data-index")||0)+(t.key==="PageUp"?-1:1)*Math.floor(u/d);f<0?this._selectTest(i.testList,a.parentElement?.firstElementChild,!i.lineTests?.loc):f>=c?this._selectTest(i.testList,a.parentElement?.lastElementChild,!i.lineTests?.loc):this._selectTest(i.testList,l.children[f],!i.lineTests?.loc)}return r()}else{if(t.key==="ArrowRight"&&!rt(t))return e.startsWith("header")||this._selectItemAction(a,e==="content.item.action"?s:null,!0),r();if(t.key==="ArrowLeft"&&!rt(t))return e.startsWith("header")||this._selectItemAction(a,e==="content.item.action"?s:null,!1),r();if(t.key==="Enter"||t.key===" "){if(e!=="header.action"){if(e==="content.item.action")s.dispatchEvent(hh(t));else{const l=this._getTest(i.testList,a);l&&l.location&&this._appService.navigate(l.location,t,t.key!=="Enter"?{focus:!1}:void 0)}return r()}}else if(t.key==="e"&&!rt(t)){const l=this._getTest(i.testList,a);return l&&l.location&&this._appService.navigate(l.location,t),r()}else if(t.key==="f"&&!rt(t)){const l=this._getTest(i.testList,a);return l&&this._appService.toggleTestFilter(l.path),r()}else if(t.key==="d"&&!rt(t)){const l=this._getTest(i.testList,a);return l&&this._appService.debug(l.path),r()}else if(t.key==="p"&&!rt(t)){const l=this._getTest(i.testList,a);return l&&this._appService.profile(l.path),r()}else if(t.key==="u"&&!rt(t)){const l=this._getTest(i.testList,a);return l&&l.hasFailingSnapshot&&l.location&&this._appService.updateSnapshots(l.location),r()}else if(t.key==="v"&&!rt(t)){const l=this._getTest(i.testList,a);return l&&!l.passing&&this._appService.showSideBySideDiff({test:l.path},t),r()}else{if(t.key==="Escape"&&!rt(t))return e.endsWith("action")?a.parentElement?.parentElement?.focus():this._appService.focus("editor"),r();if(t.key==="s"&&!rt(t)){const l=this._getTest(i.testList,a);return l&&l.location?.file?this._appService.openInSideView(Zt.Tests,{tests:{filter:[l.location.file,...l.path.slice(1)].join(" ")}}):i.numberOfFailingTests?this._appService.openInSideView(Zt.Tests,{tests:{filter:"@failed"}}):this._appService.openInSideView(Zt.Tests,void 0),r()}else if(t.key==="."&&!rt(t)){const l=this._getTest(i.testList,a);return l&&l.location?.file&&I_(a,l.location),r()}}}}}else if(t.key==="Escape"&&!rt(t))return e==="header.action"?s.closest(`[data-namespace="${this._namespace}"]`)?.focus():this._appService.focus("editor"),r()}_narrow(e){return e=e.replace(`${this._namespace}.`,""),e=e.replace(this._namespace,"."),e}_locateTestElement(e,t){if(e=="."||e==="content")return t.querySelector(".selected");if(e==="header.action"){const i=t.closest(`[data-namespace="${this._namespace}"]`);if(i)return i.querySelector(".selected")}if(e==="content.item")return t;if(e==="content.item.action")return t.parentElement?.parentElement?.parentElement?.parentElement}_selectItemAction(e,t,i){const s=e.querySelectorAll("button");if(s.length){let r=-1;if(t){for(let o=0;o<s.length;o++)if(s[o]===t){r=o;break}}else return s[0].focus(),!0;return r=r>=0?r:0,i?(r+1>s.length-1||s[r+1].focus(),!0):r-1>=0?(s[r-1].focus(),!0):!1}return!1}_getTest(e,t){if(t instanceof Element){const i=t.getAttribute("data-id");if(i&&e)return e[i]}}_selectTest(e,t,i=!0){const s=this._getTest(e,t);s?this._overviewService.selectTest(s):i&&this._overviewService.selectAllLogsAndErrors(),t instanceof HTMLElement&&t.focus()}}var JDe=G('<div class="absolute inset-0 z-20 mx-auto my-auto flex h-full w-full flex-col items-center justify-center"><p class="backlight relative text-[length:1.3rem] font-bold uppercase tracking-wide">Welcome to Wallaby</p><p class="mt-2 px-2 text-center text-[length:0.7rem] font-bold uppercase">Instant Feedback, Infinite Potential</p><p class="mt-3.5 [&amp;_button]:mx-2 [&amp;_button]:w-28 [&amp;_button]:text-[length:--panel-font-size]">'),Iz=G('<div class="pointer-events-none absolute inset-0 z-10 bg-[--panel-view-background] opacity-90">'),$De=G('<div class="absolute inset-0 z-20 mx-auto my-auto flex h-full w-full flex-col items-center justify-center"><p class="backlight relative text-[length:1.3rem] font-bold uppercase tracking-wide">Wallaby v3 has arrived</p><p class="mt-2 px-2 text-center text-[length:0.7rem] font-bold uppercase">Now Even faster with result streaming and cached results</p><p class="mt-3.5 [&amp;_button]:mx-2 [&amp;_button]:w-28 [&amp;_button]:text-[length:--panel-font-size]">'),QDe=G('<div class="relative h-full w-full"data-vscode-context="{&quot;webviewSection&quot;: &quot;overview&quot;, &quot;preventDefaultContextMenuItems&quot;: true}">'),kte=G('<div class="flex h-6 flex-shrink-0 items-center border-t border-[--panel-view-border]">'),qDe=G('<div class="foreground h-full w-full"><div class="flex h-full w-full"><div class="flex h-full w-full flex-col">'),eIe=G('<div class="flex h-full w-full"><div class="flex h-full w-full flex-col">'),tIe=G('<div class="foreground h-full w-full">'),iIe=G("<div>"),nIe=G('<div class="flex h-full w-full flex-col">'),sIe=G('<div class="mx-auto my-auto flex h-full w-full items-center justify-center px-3 text-center text-[length:--header-font-size] uppercase tracking-wide text-[var(--subtle-foreground)]">Select a panel to expand from the panels bar '),rIe=G('<div class="flex items-center truncate px-[0.09375rem]"><div class="flex opacity-70"></div><div class="flex opacity-70">');function xte(n){const e=Dt(),t=im(),i=Bg(),[s,r]=e.appSettings(),{width:o,height:a}=Uk(),l=()=>e.isStandalone()&&o()*2>a()||o()>a()?"row":"column",c=e.getStatus();let d;const u=J(()=>e.getPanelState(Ue.OverviewTests)().collapsed),h=J(()=>e.getPanelState(Ue.OverviewErrors)().collapsed),f=J(()=>e.getPanelState(Ue.OverviewLogs)().collapsed),g=J(()=>e.getPanelState(Ue.OverviewDebuggerErrors)().collapsed),m=J(()=>e.getPanelState(Ue.OverviewDebuggerLogs)().collapsed),p=J(()=>e.getPanelState(Ue.OverviewDebuggerStatus)().collapsed),b=J(()=>e.getDebuggerStarted()());$e(n.keyboard.focusedNamespace,C=>{if(C&&C.startsWith("overview")){C==="overview.tests"?b()?C="overview":u()&&e.setPanelState(Ue.OverviewTests,k=>({...k,collapsed:!1,size:k.size||20})):C==="overview.errors"?b()?g()&&e.setPanelState(Ue.OverviewDebuggerErrors,k=>({...k,collapsed:!1,size:k.size||20})):h()&&e.setPanelState(Ue.OverviewErrors,k=>({...k,collapsed:!1,size:k.size||40})):C==="overview.logs"?b()?m()&&e.setPanelState(Ue.OverviewDebuggerLogs,k=>({...k,collapsed:!1,size:k.size||60})):f()&&e.setPanelState(Ue.OverviewLogs,k=>({...k,collapsed:!1,size:k.size||40})):C==="overview.debugger"&&b()&&p()&&e.setPanelState(Ue.OverviewDebuggerStatus,k=>({...k,collapsed:!1,size:k.size||20})),C==="overview"&&(!u()&&!b()?C="overview.tests":!h()&&!b()||!g()&&b()?C="overview.errors":!f()&&!b()||!m()&&b()?C="overview.logs":!p()&&b()&&(C="overview.debugger")),C==="overview.errors"&&(C="overview.errors.content.viewer");let S=d.querySelector(`[data-namespace="${C}"]`);S?S.getAttribute("data-unfocused-scrolling")!=="true"?S.focus():setTimeout(()=>{let k=n.keyboard.lastFocusedNamespace();k==="overview.errors"&&(k="overview.errors.content.viewer"),C===k&&S.isConnected&&(S.matches(":focus")||(C==="overview.errors.content.viewer"&&(C="overview.errors"),d.querySelector(`[data-namespace="${C}"]`)?.focus()))},70):(C==="overview.errors.content.viewer"&&(C="overview.errors"),d.querySelector(`[data-namespace="${C}"]`)?.focus())}});const w=new jDe(e,t,n.keyboard),v=new $k("overview.errors",e),_=new aw("overview.logs",e,i),y=new yDe(e);return $e(n.keyboard.key,C=>{if(C){const S=C.event,k=C.namespace;k==="overview"?(S.key==="t"&&n.keyboard.onFocus("overview.tests",!0),S.key==="l"&&n.keyboard.onFocus("overview.logs",!0),S.key==="e"&&n.keyboard.onFocus("overview.errors",!0),S.key==="d"&&n.keyboard.onFocus("overview.debugger",!0),S.preventDefault(),S.stopPropagation()):w.matches(k)?w.handle(k,S,n.state):v.matches(k)?v.handle(k,S,n.state):_.matches(k)?_.handle(k,S,n.state):y.matches(k)&&y.handle(k,S)}}),$e(()=>n.state.selection.namespace,C=>{C&&n.keyboard?.onFocus(C,!1)}),(()=>{var C=QDe(),S=d;return typeof S=="function"?We(S,C):d=C,A(C,x(Fn,{get children(){return[x(ot,{get when(){return!c().firstTestResultAvailable},get children(){return x(oIe,{get state(){return n.state},get orientation(){return l()}})}}),x(ot,{when:!0,get children(){return x(aIe,{get state(){return n.state},get orientation(){return l()},onFocus:(k,I)=>{n.keyboard?.onFocus(k,I)},get keyboard(){return n.keyboard}})}})]}}),null),A(C,x(se,{get when(){return!e.isStandalone()&&s.welcomeMessage},get children(){return[(()=>{var k=JDe(),I=k.firstChild,T=I.nextSibling,D=T.nextSibling;return A(D,x(on,{href:"https://wallabyjs.com/blog/wallaby-v3.html",children:"Learn More"}),null),A(D,x(on,{onClick:()=>{r("welcomeMessage",!1),r("wallabyV3Message",!1)},children:"Get Started"}),null),Me(M=>nn(D,{"[&_button]:border-0":e.isIntegratedVSCode()},M)),k})(),Iz()]}}),null),A(C,x(se,{get when(){return!e.isStandalone()&&s.wallabyV3Message&&!s.welcomeMessage},get children(){return[(()=>{var k=$De(),I=k.firstChild,T=I.nextSibling,D=T.nextSibling;return A(D,x(on,{href:"https://wallabyjs.com/blog/wallaby-v3.html",children:"Learn More"}),null),A(D,x(on,{onClick:()=>{r("wallabyV3Message",!1)},children:"Get Started"}),null),Me(M=>nn(D,{"[&_button]:border-0":e.isIntegratedVSCode()},M)),k})(),Iz()]}}),null),C})()}function oIe(n){const e=Dt(),t=e.getStatus(),[i]=e.appSettings();return(()=>{var s=qDe(),r=s.firstChild,o=r.firstChild;return A(o,x(Fn,{get children(){return[x(ot,{get when(){return t().state==="configurationError"},get children(){return x(jr,{class:"relative h-full w-full justify-end",get direction(){return n.orientation},get children(){return[x(Lv,{id:"overview.loading.executionStatus",minSize:5,initialSize:50,get children(){return x(mte,{header:"Startup Error",wordWrap:!0,namespace:"overview.startup.error"})}}),x(X9,{}),x(Lv,{id:"overview.loading.events",minSize:5,initialSize:50,get children(){return x($r,{header:"Troubleshooting",headerClass:"pl-2",get icons(){return[x(Ee,{class:"codicon-book clickableIcon",tooltip:"Open Wallaby documentation",href:"https://wallabyjs.com/docs/intro/troubleshooting.html"}),x(XC,{class:"!pb-[0.0625rem]"}),x(Ee,{class:"codicon-github clickableIcon",tooltip:"Create a new issue in Wallaby GitHub repository",href:"https://github.com/wallabyjs/public/issues/new"}),x(Ee,{class:"codicon-comment-discussion clickableIcon",tooltip:"Join Wallaby Discord chat",href:"https://wallabyjs.com/chat/"}),x(Ee,{class:"codicon-mail clickableIcon !pb-[0.18rem]",tooltip:"Send an email to Wallaby support",href:"mailto:hello@wallabyjs.com"})]},get children(){return x(WDe,{})}})}})]}})}}),x(ot,{when:!0,get children(){return[x(jr,{class:"relative h-full min-h-0 w-full flex-1 justify-end",get direction(){return n.orientation},get children(){return[x(Lv,{id:"overview.loading.executionStatus",minSize:5,initialSize:50,get children(){return x($r,{header:"Status",headerClass:"pl-2",get icons(){return[x(gte,{}),x(XC,{class:"!pb-[0.0625rem]",namespace:"overview.errors.content.viewer.error.action"}),x(Ee,{get class(){return`codicon-pulse !text-[length:--panel-larger-font-size] transition-all duration-[1000ms] ${t().longRunningOperation?"animate-pulse text-[--error-foreground]":""}`},namespace:"overview.misc.action",onClick:()=>{e.openInSideView(Zt.Status)},tabIndex:0,tooltip:'Open "Status" side view'})]},get children(){return x(pte,{})}})}}),x(X9,{}),x(Lv,{id:"overview.loading.events",minSize:5,initialSize:50,get children(){return x(xDe,{get state(){return n.state}})}})]}}),x(se,{get when(){return!e.isStandalone()},get children(){var a=kte();return A(a,x(gV,{})),a}})]}})]}})),Me(a=>{var l={"border-t border-[--panel-view-border]":n.orientation==="row"&&e.isIntegratedVSCode(),"opacity-10":i.welcomeMessage||i.wallabyV3Message},c=n.orientation==="column",d={"border-r border-[--panel-view-border]":n.orientation==="row"};return a.e=nn(s,l,a.e),c!==a.t&&r.classList.toggle("flex-col",a.t=c),a.a=nn(o,d,a.a),a},{e:void 0,t:void 0,a:void 0}),s})()}function aIe(n){const e=Dt(),t=()=>!!n.state.debuggerState?.started,i=()=>t()&&n.state.debuggerState?.current?.trace.length!==1,[s]=e.appSettings(),r=e.getStatus(),o=J(()=>e.getPanelState(Ue.OverviewStatus)().collapsed),a=J(()=>e.getPanelState(Ue.OverviewTests)().collapsed),l=J(()=>e.getPanelState(Ue.OverviewErrors)().collapsed);return(()=>{var c=tIe();return A(c,x(se,{get when(){return!t()},get fallback(){return(()=>{var d=nIe();return A(d,x(se,{get when(){return i()},get children(){var u=iIe();return A(u,(()=>{var h=J(()=>!!e.isStandalone());return()=>h()&&x(_De,{})})(),null),A(u,x(Cte,{get state(){return n.state},get onFocus(){return n.onFocus}}),null),Me(()=>mr(u,e.isStandalone()?"flex h-[35%] max-h-[6.5rem] min-h-[4.75rem] flex-col pt-1":"h-[25%] max-h-[5rem] min-h-[3.125rem]")),u}}),null),A(d,x(jr,{get class(){return(e.isStandalone()?"h-[65%]":"h-[75%]")+" flex flex-grow justify-end border-t border-[--panel-view-border]"},get direction(){return n.orientation},get children(){return[x(ji,{index:0,get id(){return Ue.OverviewDebuggerErrors},defaultState:{size:20},class:"flex flex-col",get children(){return x(xz,{get state(){return n.state},get orientation(){return n.orientation},get panelId(){return Ue.OverviewDebuggerErrors},get onFocus(){return n.onFocus}})}}),x(ji,{index:1,get id(){return Ue.OverviewDebuggerLogs},defaultState:{size:60},class:"flex flex-col",get children(){return x(Tz,{get state(){return n.state},get orientation(){return n.orientation},get panelId(){return Ue.OverviewDebuggerLogs},get onFocus(){return n.onFocus}})}}),x(ji,{index:2,defaultState:{size:20},get id(){return Ue.OverviewDebuggerStatus},class:"flex items-center justify-center",get children(){return x(vDe,{get orientation(){return n.orientation},get state(){return n.state},get onFocus(){return n.onFocus},get panelId(){return Ue.OverviewDebuggerStatus}})}}),x(Mz,{get orientation(){return n.orientation},get collapsiblePanels(){return[{id:Ue.OverviewDebuggerLogs,icon:x(Ee,{class:"codicon-output !text-[length:--panel-larger-font-size]",namespace:"overview.logs.header.action",onClick:()=>{e.setPanelState(Ue.OverviewDebuggerLogs,u=>({...u,collapsed:!1,size:u.size||60})),n.onFocus?.("overview.logs",!0)},tabIndex:0,tooltip:'Expand "Logs" panel'})},{id:Ue.OverviewDebuggerErrors,icon:x(Ee,{class:"codicon-error !text-[length:--panel-larger-font-size]",namespace:"overview.errors.header.action",onClick:()=>{e.setPanelState(Ue.OverviewDebuggerErrors,u=>({...u,collapsed:!1,size:u.size||20})),n.onFocus?.("overview.errors",!0)},tabIndex:0,tooltip:'Expand "Errors" panel'})},{id:Ue.OverviewDebuggerStatus,icon:x(Ee,{class:"codicon-debug !text-[length:--panel-larger-font-size]",namespace:"overview.debugger.header.action",onClick:()=>{e.setPanelState(Ue.OverviewDebuggerStatus,u=>({...u,collapsed:!1,size:u.size||20})),n.onFocus?.("overview.debugger",!0)},tabIndex:0,tooltip:'Expand "Debugger" panel'})}]},otherIcons:[]})]}}),null),d})()},get children(){var d=eIe(),u=d.firstChild;return A(u,x(jr,{class:"relative h-full min-h-0 w-full flex-1 justify-end",get direction(){return n.orientation},get children(){return[x(ji,{index:0,get id(){return Ue.OverviewTests},defaultState:{size:25},get children(){return x(UDe,{get state(){return n.state},get panelId(){return Ue.OverviewTests},get orientation(){return n.orientation},get onFocus(){return n.onFocus},get keyboard(){return n.keyboard},get showProgress(){return J(()=>!!o())()&&r().state==="running"}})}}),x(ji,{index:1,get id(){return Ue.OverviewErrors},defaultState:{size:30},class:"flex flex-col",get children(){return x(xz,{get state(){return n.state},get orientation(){return n.orientation},get onFocus(){return n.onFocus},get panelId(){return Ue.OverviewErrors},get showProgress(){return J(()=>!!(o()&&a()))()&&r().state==="running"}})}}),x(ji,{index:2,get id(){return Ue.OverviewLogs},defaultState:{size:28},class:"flex flex-col",get children(){return x(Tz,{get orientation(){return n.orientation},get state(){return n.state},get onFocus(){return n.onFocus},get panelId(){return Ue.OverviewLogs},get showProgress(){return J(()=>!!(o()&&l()))()&&r().state==="running"}})}}),x(Mz,{get orientation(){return n.orientation},get collapsiblePanels(){return[{id:Ue.OverviewTests,icon:x(Ee,{class:"codicon-list-unordered !text-[length:--panel-larger-font-size]",namespace:"overview.misc.action",onClick:()=>{e.setPanelState(Ue.OverviewTests,h=>({...h,collapsed:!1,size:h.size||20})),n.onFocus?.("overview.tests",!0)},tabIndex:0,tooltip:'Expand "Tests" panel'})},{id:Ue.OverviewLogs,icon:x(Ee,{class:"codicon-output !text-[length:--panel-larger-font-size]",namespace:"overview.misc.action",onClick:()=>{e.setPanelState(Ue.OverviewLogs,h=>({...h,collapsed:!1,size:h.size||40})),n.onFocus?.("overview.logs",!0)},tabIndex:0,tooltip:'Expand "Logs" panel'})},{id:Ue.OverviewErrors,icon:x(Ee,{class:"codicon-error !text-[length:--panel-larger-font-size]",namespace:"overview.misc.action",onClick:()=>{e.setPanelState(Ue.OverviewErrors,h=>({...h,collapsed:!1,size:h.size||40})),n.onFocus?.("overview.errors",!0)},tabIndex:0,tooltip:'Expand "Errors" panel'})}]},get otherIcons(){return(e.isIntegratedVSCode()?[{icon:x(Ee,{class:"codicon-server !text-[length:--icon-smaller-font-size]",namespace:"overview.misc.action",onClick:()=>{e.openMcpSettings()},tabIndex:0,tooltip:"Open MCP server settings"})}]:[]).concat([{icon:x(Ee,{class:"codicon-record-keys !text-[length:--panel-larger-font-size]",namespace:"overview.misc.action",onClick:()=>{e.showShortcuts(n.keyboard.lastFocusedNamespace()||"overview.tests",!0)},tabIndex:0,tooltip:"Show keyboard shortcuts <span class='keyboard-shortcut'>?</span>"})}]).concat(e.isStandalone()?[]:[{icon:x(Ee,{class:"codicon-layout-panel !text-[length:--panel-larger-font-size]",namespace:"overview.misc.action",get classList(){return{"codicon-layout-panel-off":e.getPanelState(Ue.OverviewStatus)().collapsed}},onClick:()=>{e.setPanelState(Ue.OverviewStatus,h=>({...h,collapsed:!h.collapsed,size:h.size||10}))},tabIndex:0,get tooltip(){return`${e.getPanelState(Ue.OverviewStatus)().collapsed?"Expand":"Collapse"} "Summary" panel`}})}])}})]}}),null),A(u,x(se,{get when(){return J(()=>!e.isStandalone())()&&!e.getPanelState(Ue.OverviewStatus)().collapsed},get children(){var h=kte();return A(h,x(gV,{get activeEditorFileStatus(){return n.state.activeEditorFileStatus}})),h}}),null),Me(()=>d.classList.toggle("flex-col",n.orientation==="column")),d}})),Me(d=>nn(c,{"border-t border-[--panel-view-border]":n.orientation==="row"&&e.isIntegratedVSCode(),"opacity-10":!e.isStandalone()&&(s.welcomeMessage||s.wallabyV3Message)},d)),c})()}function Mz(n){const e=Dt(),t=J(()=>n.collapsiblePanels.filter(r=>{const o=e.getPanelState(r.id);return o().collapsed||!o().size})),i=J(()=>t().length===n.collapsiblePanels.length),s=J(()=>n.otherIcons);return[x(Th,{get when(){return i()},get children(){var r=sIe();return r.firstChild,A(r,()=>n.orientation==="column"?"below":"to the right",null),r}}),x(se,{get when(){return t().length||s().length},get children(){var r=rIe(),o=r.firstChild,a=o.nextSibling;return A(o,x(ln,{get each(){return t()},children:({icon:l})=>l})),A(a,x(ln,{get each(){return s()},children:({icon:l})=>l})),Me(l=>{var c={"border-l border-[--panel-view-border]":n.orientation==="row"&&i(),"pt-[0.3125rem]":n.orientation==="row","border-t border-[--panel-view-border]":n.orientation==="column"&&i(),"flex-col":n.orientation!=="column","justify-end":n.orientation==="column","py-[0.09375rem] pr-0.5 pl-1.5":n.orientation==="column","[&_button]:mb-0.5":n.orientation==="row","[&_button]:mr-0.5":n.orientation==="column"},d=n.orientation==="row",u={"mt-auto flex-col":n.orientation==="row","ml-auto":n.orientation==="column"};return l.e=nn(r,c,l.e),d!==l.t&&o.classList.toggle("flex-col",l.t=d),l.a=nn(a,u,l.a),l},{e:void 0,t:void 0,a:void 0}),r}})]}var lIe=G('<span><span class="text-[--testing-icon-passed] align-middle pb-0.5 codicon codicon-check !text-[length:--icon-font-size] pr-1"></span>Your trial request has been processed. Please check your email (including junk/spam folders).'),Ez=G("<h2>Almost there"),Nz=G('<p class="flex items-center">'),cIe=G('<p class="flex items-center [&amp;_button]:min-w-20"><input class="flex-grow max-w-80 py-0.5 px-1 rounded-[--input-border-radius] bg-[--input-background] text-[--input-foreground] placeholder-[--editor-code-lens-foreground] border border-[--input-border]"type=text placeholder="Email Address">'),dIe=G('<p class="text-[--error-foreground] text-[length:--panel-smaller-font-size]">Please enter valid email address.'),uIe=G("<h2>Activate license"),hIe=G('<p>If you purchased a <b>personal license</b> or your company has assigned you a license via their <a href="https://account.wallabyjs.com/?referrer=wsp"title="https://account.wallabyjs.com/?referrer=wsp">Wallaby Account</a>, then you may activate Wallaby using either your email address OR your license key.'),fIe=G('<p class="text-[--error-foreground] text-[length:--panel-smaller-font-size]">'),gIe=G('<div><textarea rows=4 class="w-full mt-4 p-1 rounded-[--input-border-radius] bg-[--input-background] text-[--input-foreground] border border-[--input-border] placeholder-[--editor-code-lens-foreground] resize-none"></textarea><div class=buttons>'),mIe=G("<p>Your license activation must be confirmed for your email address (<b class=user></b>). Please confirm your online activation request by following the instructions in the email we sent you."),pIe=G("<p>If you have not received an email from us, please check your junk/spam folders for an email from: <b>hello@wallabyjs.com</b>."),vu=G("<p class=buttons>"),bIe=G("<h2>License details"),vIe=G("<p>Your <b class=product></b> license is registered to <b class=user></b>. You are entitled to use the latest version of Wallaby and all updates and upgrades until <b class=date></b>."),_Ie=G("<p>If you would like purchase <a href=https://quokkajs.com/ title=https://quokkajs.com/>Quokka.js</a>, you may <b class=upgrade>upgrade</b> your existing license to <b class=product>Wallaby.js + Quokka.js</b> which is cheaper than purchasing both products separately."),wIe=G("<h2>Open source license details"),yIe=G("<p>Your <b class=product></b> license is registered to <b class=user></b>. You are entitled to use the latest version of Wallaby on <b class=upgrade>Open Source Projects</b>."),SIe=G("<p>If you would like to use Wallaby on closed-source personal or commercial projects, please <b class=upgrade>purchase a license</b>."),CIe=G("<h2>Expiring license details"),LIe=G("<p>Your <b class=product></b> license is registered to <b class=user></b>. Your license upgrade period expires in <b><span class=expiration></span></b>, on <b class=expiration></b>. If you would like continue to use the latest version of Wallaby and receive updates and upgrades for another year, you may <b class=upgrade>renew your license with limited time discount</b>."),kIe=G("<h2>Expired license details"),xIe=G("<p>Your <b class=product></b> license is registered to <b class=user></b>. Your license upgrade period has expired on <b class=expiration></b>, and <b class=expiration>you are no longer eligible for updates and upgrades</b>. If you would like to use the latest version of Wallaby and receive updates and upgrades for another year, you may <b class=upgrade>renew your license with limited time discount</b>."),TIe=G("<h2>Trial license details"),DIe=G("<p>You are currently using a fully-functional limited-time trial version of Wallaby. Your trial period finishes in <b><span class=expiration></span></b>, on <b class=expiration></b>. If you would like continue to use Wallaby after your trial is over, you may <b class=upgrade>purchase a license</b>."),IIe=G("<h2>Trial period is over"),MIe=G("<p>Your Wallaby <b class=expiration>trial period has ended</b>. If you would like to continue to use Wallaby, please <b class=upgrade>purchase a license</b>. If you are still evaluating Wallaby and need an extended trial license, please <a href=mailto:hello@wallabyjs.com title=mailto:hello@wallabyjs.com>email us</a>."),EIe=G("<h2>Ready to try Wallaby"),NIe=G('<p>If you would like to try Wallaby, you may <b class=upgrade>start your free trial now</b>. If you have already purchased a license, <b class=upgrade>please activate it</b>. If you do not have a license, you may <b class=upgrade>purchase a license</b> using our website. If you are using Wallaby with an open-source project, you may <a href="https://wallabyjs.com/oss/?referrer=wsp">request an OSS license</a>.'),RIe=G('<div class="flex flex-col pt-2 pb-3 [&amp;_p]:mt-3 [&amp;_h2]:text-[length:--header-font-size] [&amp;_h2]:header-tracking [&amp;_h2]:font-bold [&amp;_h2]:uppercase [&amp;_a]:text-[--link-foreground] [&amp;_a]:underline [&amp;_.buttons]:mt-4 [&amp;_.buttons]:text-center [&amp;_button]:w-[8.2rem] [&amp;_button]:truncate [&amp;_button]:ml-2 [&amp;_button]:mb-2 [&amp;_.product]:text-[--editor-warning-foreground] [&amp;_.user]:text-[--editor-warning-foreground] [&amp;_.date]:text-[--time-foreground] [&amp;_.upgrade]:text-[--time-foreground] [&amp;_.expiration]:text-[--error-foreground]">'),WIe=G('<div class="absolute inset-0 overflow-y-auto">'),Rz=G('<span class="codicon codicon-loading codicon-modifier-spin !text-[length:--icon-font-size]">'),AIe=G("<span class=pl-2>Processing your trial request..."),FIe=G('<span class=text-[--error-foreground]><span class="align-middle pb-0.5 codicon codicon-circle-slash !text-[length:--icon-font-size] pr-1"></span>. Please <a href=mailto:hello@wallabyjs.com title=mailto:hello@wallabyjs.com>send us an email</a> instead.'),VIe=G("<p>"),PIe=G("<span class=pl-2>Activating your license..."),OIe=G('<span class=text-[--error-foreground]><span class="align-middle pb-0.5 codicon codicon-circle-slash !text-[length:--icon-font-size] pr-1"></span>. Please <a href=mailto:hello@wallabyjs.com title=mailto:hello@wallabyjs.com>send us an email</a> if you need some help.');const Wz=/^[a-zA-Z0-9_+&*-]+(?:\.[a-zA-Z0-9_+&*-]+)*@(?:[a-zA-Z0-9-]+\.)+[a-zA-Z]{2,63}$/;function ZIe(n){const e=Dt(),[t,i]=he(n.state.requestTrial),[s,r]=he(n.state.activateLicense?{}:void 0),[o,a]=he(""),[l,c]=he(!1),[d,u]=he(!1),[h,f]=he(""),g=()=>{i(!1),a(""),c(!1),e.resetAccountRequests()},m=()=>{p(),u(!1),r(),e.resetAccountRequests()},p=()=>{n.state.email&&n.state.onlineLicense?f(n.state.email):n.state.key&&f(n.state.key)};return Fi(()=>{p()}),$e(()=>n.state.trialRequestResult,b=>{b?.success&&(g(),r({message:lIe(),keyOnly:!0}))}),$e(()=>n.state.activationRequestResult,b=>{b?.success&&m()}),(()=>{var b=WIe();return A(b,x(m0,{contentClass:`px-4
                text-[length:--panel-larger-font-size] tracking-wide
                bg-[--background]`,get children(){var w=RIe();return A(w,x(Fn,{get children(){return[x(ot,{get when(){return t()},get children(){return[Ez(),(()=>{var v=Nz();return A(v,(()=>{var _=J(()=>!!n.state.requestingTrial);return()=>_()?[Rz(),AIe()]:(()=>{var y=J(()=>!!n.state.trialRequestResult?.error);return()=>y()?(()=>{var C=FIe(),S=C.firstChild,k=S.nextSibling;return A(C,()=>n.state.trialRequestResult.error,k),C})():"Please enter your email to activate your free trial."})()})()),v})(),(()=>{var v=cIe(),_=v.firstChild;return _.$$input=y=>{n.state.requestingTrial||(c(!1),a(y.target.value))},A(v,x(on,{class:"!mb-0",onClick:()=>{if(!n.state.requestingTrial){if(!Wz.test(o())){c(!0);return}e.requestTrial(o())}},children:"Submit"}),null),A(v,x(on,{onClick:()=>g(),class:"!mb-0",get children(){return n.state.trialRequestResult?"Close":"Cancel"}}),null),Me(y=>{var C=!!n.state.requestingTrial,S=!!n.state.requestingTrial,k=n.state.requestingTrial;return C!==y.e&&v.classList.toggle("pointer-events-none",y.e=C),S!==y.t&&v.classList.toggle("opacity-50",y.t=S),k!==y.a&&(_.disabled=y.a=k),y},{e:void 0,t:void 0,a:void 0}),Me(()=>_.value=o()),v})(),x(se,{get when(){return l()},get children(){return dIe()}})]}}),x(ot,{get when(){return s()},get children(){return[uIe(),x(se,{get when(){return!s().message},get fallback(){return(()=>{var v=VIe();return A(v,()=>s().message),v})()},get children(){return[hIe(),(()=>{var v=Nz();return A(v,(()=>{var _=J(()=>!!n.state.activating);return()=>_()?[Rz(),PIe()]:(()=>{var y=J(()=>!!n.state.activationRequestResult?.error);return()=>y()?(()=>{var C=OIe(),S=C.firstChild,k=S.nextSibling;return A(C,()=>n.state.activationRequestResult.error,k),C})():"If you activate using an email address, you will be sent an email to confirm your activation."})()})()),v})()]}}),(()=>{var v=gIe(),_=v.firstChild,y=_.nextSibling;return _.$$input=C=>{n.state.activating||(u(!1),f(C.currentTarget.value))},A(v,x(se,{get when(){return d()},get children(){var C=fIe();return A(C,()=>s().keyOnly?"Please provide your license key.":"Please provide your email address OR your license key."),C}}),y),A(y,x(on,{onClick:()=>{if(n.state.activating)return;const C=h();if(!Wz.test(C)&&C.length<50){u(!0);return}e.activateLicense(h())},children:"Submit"}),null),A(y,x(on,{onClick:()=>m(),children:"Cancel"}),null),Me(C=>{var S=!!n.state.activating,k=!!n.state.activating,I=n.state.activating,T=s().keyOnly?"License Key":"Email Address OR License Key";return S!==C.e&&v.classList.toggle("pointer-events-none",C.e=S),k!==C.t&&v.classList.toggle("opacity-50",C.t=k),I!==C.a&&(_.disabled=C.a=I),T!==C.o&&xt(_,"placeholder",C.o=T),C},{e:void 0,t:void 0,a:void 0,o:void 0}),v})()]}}),x(ot,{get when(){return n.state.state==="activating"},get children(){return[Ez(),(()=>{var v=mIe(),_=v.firstChild,y=_.nextSibling;return A(y,()=>n.state.registeredTo),v})(),pIe(),(()=>{var v=vu();return A(v,x(on,{onClick:()=>r({}),children:"Change License"})),v})()]}}),x(ot,{get when(){return n.state.state==="activated"},get children(){return[bIe(),(()=>{var v=vIe(),_=v.firstChild,y=_.nextSibling,C=y.nextSibling,S=C.nextSibling,k=S.nextSibling,I=k.nextSibling;return A(y,()=>n.state.productType),A(S,()=>n.state.registeredTo),A(I,()=>n.state.expiryDate),v})(),x(se,{get when(){return!n.state.isBundle},get children(){return _Ie()}}),(()=>{var v=vu();return A(v,x(se,{get when(){return!n.state.isBundle},get children(){return x(on,{get href(){return n.state.upgradeUrl},children:"Upgrade License"})}}),null),A(v,x(on,{onClick:()=>r({}),children:"Change License"}),null),v})()]}}),x(ot,{get when(){return n.state.state==="openSource"},get children(){return[wIe(),(()=>{var v=yIe(),_=v.firstChild,y=_.nextSibling,C=y.nextSibling,S=C.nextSibling;return A(y,()=>n.state.productType),A(S,()=>n.state.registeredTo),v})(),SIe(),(()=>{var v=vu();return A(v,x(on,{get href(){return n.state.purchaseUrl},children:"Purchase Wallaby"}),null),A(v,x(on,{onClick:()=>r({}),children:"Activate License"}),null),v})()]}}),x(ot,{get when(){return n.state.state==="expiring"},get children(){return[CIe(),(()=>{var v=LIe(),_=v.firstChild,y=_.nextSibling,C=y.nextSibling,S=C.nextSibling,k=S.nextSibling,I=k.nextSibling,T=I.firstChild,D=I.nextSibling,M=D.nextSibling;return A(y,()=>n.state.productType),A(S,()=>n.state.registeredTo),A(T,()=>n.state.daysUntilExpiry),A(M,()=>n.state.expiryDate),v})(),(()=>{var v=vu();return A(v,x(on,{get href(){return n.state.renewUrl},children:"Renew License"}),null),A(v,x(on,{onClick:()=>r({}),children:"Activate License"}),null),v})()]}}),x(ot,{get when(){return n.state.state==="expired"},get children(){return[kIe(),(()=>{var v=xIe(),_=v.firstChild,y=_.nextSibling,C=y.nextSibling,S=C.nextSibling,k=S.nextSibling,I=k.nextSibling;return A(y,()=>n.state.productType),A(S,()=>n.state.registeredTo),A(I,()=>n.state.expiryDate),v})(),(()=>{var v=vu();return A(v,x(on,{get href(){return n.state.renewUrl},children:"Renew License"}),null),A(v,x(on,{onClick:()=>r({}),children:"Activate License"}),null),A(v,x(on,{onClick:()=>i(!0),children:"Start Trial"}),null),v})()]}}),x(ot,{get when(){return n.state.state==="trialLicense"},get children(){return[TIe(),(()=>{var v=DIe(),_=v.firstChild,y=_.nextSibling,C=y.firstChild,S=y.nextSibling,k=S.nextSibling;return A(C,()=>n.state.daysUntilExpiry),A(k,()=>n.state.expiryDate),v})(),(()=>{var v=vu();return A(v,x(on,{get href(){return n.state.purchaseUrl},children:"Purchase Wallaby"}),null),A(v,x(on,{onClick:()=>r({}),children:"Activate License"}),null),v})()]}}),x(ot,{get when(){return n.state.state==="trialDemoOver"},get children(){return[IIe(),MIe(),(()=>{var v=vu();return A(v,x(on,{get href(){return n.state.purchaseUrl},children:"Purchase Wallaby"}),null),A(v,x(on,{onClick:()=>r({}),children:"Activate License"}),null),v})()]}}),x(ot,{get when(){return n.state.state==="demoLicense"},get children(){return[EIe(),NIe(),(()=>{var v=vu();return A(v,x(on,{onClick:()=>i(!0),children:"Start Trial"}),null),A(v,x(on,{get href(){return n.state.purchaseUrl},children:"Purchase Wallaby"}),null),A(v,x(on,{onClick:()=>r({}),children:"Activate License"}),null),v})()]}})]}})),w}})),b})()}dn(["input"]);var GIe=G("<div class=item><div class=header>Color Theme</div><div class=desc>Specifies the color theme used in UI and code viewer.</div><div class=control><select>"),BIe=G("<div class=item><div class=header>Panel Font Family</div><div class=desc>Controls the font family for UI elements outside of code viewer, for example panels, headers and lists.</div><div class=control><input type=text>"),XIe=G("<div class=item><div class=header>Editor Font Family</div><div class=desc>Controls the font family for UI elements with monospaced fonts, for example code viewer, log entries and errors.</div><div class=control><input type=text>"),zIe=G("<div class=item><div class=header>Default Open Location</div><div class=desc>Select where files open by default for navigation, and side-by-side diffs without using a modifier key.</div><div class=control><select><option value=browser>In Browser</option><option value=editor>In Editor</option><option value=both>Both Browser and Editor"),HIe=G("<div class=item><div class=header>Modified Open Location (with <!>)</div><div class=desc>Select where files open when using the <!> modifier key for navigation, and side-by-side diffs.</div><div class=control><select><option value=browser>In Browser</option><option value=editor>In Editor</option><option value=both>Both Browser and Editor"),UIe=G('<div class="absolute inset-0 overflow-y-auto">'),YIe=G("<option>");function KIe(){const n=Dt(),[e,t]=n.appSettings();return(()=>{var i=UIe();return A(i,x(m0,{contentClass:`px-4
                text-[length:--panel-larger-font-size] tracking-wide
                bg-[--background]

                [&_.item]:flex
                [&_.item]:flex-col
                [&_.item]:mt-2
                [&_.item]:mb-2

                [&_.header]:my-1
                [&_.header]:font-bold
                [&_.header]:text-[length:--panel-larger-font-size]

                [&_.desc]:opacity-80
                [&_.desc]:my-1

                [&_.control]:my-1
                [&_.control_input]:w-full
                [&_.control_input]:py-0.5
                [&_.control_input]:px-1
                [&_.control_input]:flex-grow
                [&_.control_input]:bg-[--input-background]
                [&_.control_input]:text-[--input-foreground]
                [&_.control_input]:placeholder-[--editor-code-lens-foreground]
                [&_.control_input]:border
                [&_.control_input]:border-[--input-border]
                [&_.control_input]:rounded-[--input-border-radius]

                [&_.control_select]:appearance-none
                [&_.control_select]:truncate
                [&_.control_select]:w-[10rem]
                [&_.control_select]:py-0.5
                [&_.control_select]:px-1
                [&_.control_select]:flex-grow
                [&_.control_select]:bg-[--dropdown-background]
                [&_.control_select]:text-[--dropdown-foreground]
                [&_.control_select]:border
                [&_.control_select]:border-[--dropdown-border]
                [&_.control_select]:rounded-[--dropdown-border-radius]

                `,get children(){return[x(se,{get when(){return!n.isEditorConnected()||n.isEditorConnectedWithNoPreferences()},get children(){return[(()=>{var s=GIe(),r=s.firstChild,o=r.nextSibling,a=o.nextSibling,l=a.firstChild;return l.addEventListener("change",c=>{t("standalone","cli","theme",c.currentTarget.value),TS({theme:c.currentTarget.value})}),A(l,()=>e4.filter(c=>c.available).map(c=>(()=>{var d=YIe();return A(d,()=>c.name),Me(()=>d.selected=c.name===e.standalone.cli.theme||e.standalone.cli.theme===void 0&&c.name===QF.name),d})())),s})(),(()=>{var s=BIe(),r=s.firstChild,o=r.nextSibling,a=o.nextSibling,l=a.firstChild;return l.addEventListener("change",c=>{t("standalone","cli","panelFontFamily",c.currentTarget.value||""),TS({panelFontFamily:c.currentTarget.value,theme:e.standalone.cli.theme})}),Me(()=>xt(l,"placeholder",getComputedStyle(document.body)?.getPropertyValue("--def-font-family"))),Me(()=>l.value=e.standalone.cli.panelFontFamily||""),s})(),(()=>{var s=XIe(),r=s.firstChild,o=r.nextSibling,a=o.nextSibling,l=a.firstChild;return l.addEventListener("change",c=>{t("standalone","cli","editorFontFamily",c.currentTarget.value||""),TS({editorFontFamily:c.currentTarget.value,theme:e.standalone.cli.theme})}),Me(()=>xt(l,"placeholder",getComputedStyle(document.body)?.getPropertyValue("--def-editor-font-family"))),Me(()=>l.value=e.standalone.cli.editorFontFamily||""),s})()]}}),x(se,{get when(){return n.isEditorConnected()},get children(){return[(()=>{var s=zIe(),r=s.firstChild,o=r.nextSibling,a=o.nextSibling,l=a.firstChild,c=l.firstChild,d=c.nextSibling,u=d.nextSibling;return l.addEventListener("change",h=>{t("linkedMode","fileNavigation",h.currentTarget.value)}),Me(h=>{var f=e.linkedMode.fileNavigation==="browser",g=e.linkedMode.fileNavigation==="editor",m=e.linkedMode.fileNavigation==="both";return f!==h.e&&(c.selected=h.e=f),g!==h.t&&(d.selected=h.t=g),m!==h.a&&(u.selected=h.a=m),h},{e:void 0,t:void 0,a:void 0}),s})(),(()=>{var s=HIe(),r=s.firstChild,o=r.firstChild,a=o.nextSibling;a.nextSibling;var l=r.nextSibling,c=l.firstChild,d=c.nextSibling;d.nextSibling;var u=l.nextSibling,h=u.firstChild,f=h.firstChild,g=f.nextSibling,m=g.nextSibling;return A(r,Hr,a),A(l,Hr,d),h.addEventListener("change",p=>{t("linkedMode","fileNavigationWithModifier",p.currentTarget.value)}),Me(p=>{var b=e.linkedMode.fileNavigationWithModifier==="browser",w=e.linkedMode.fileNavigationWithModifier==="editor",v=e.linkedMode.fileNavigationWithModifier==="both";return b!==p.e&&(f.selected=p.e=b),w!==p.t&&(g.selected=p.t=w),v!==p.a&&(m.selected=p.a=v),p},{e:void 0,t:void 0,a:void 0}),s})()]}})]}})),i})()}var jIe=G("<span>"),Az=G('<div class="ml-auto flex">'),JIe=G('<div class="flex h-full w-full flex-col"><div class="flex w-full flex-row text-[length:--panel-larger-font-size]"><div class="items-center_ border-r_ flex min-w-24 cursor-default flex-row truncate border-[--panel-view-border] px-4 py-1.5 text-[--foreground] brightness-125"></div><div class="bg-[--tab-inactive-background]_ border-b_ flex flex-grow cursor-default items-center border-[--panel-view-border] px-2 opacity-85 [&amp;_button]:!text-[length:--icon-font-size]"></div></div><div class="relative h-full w-full">'),Tte=G('<div class="h-full w-full flex-grow monaco-colors-container">');const Fz=new Map,$Ie=n=>{const[e,t]=Dt().appSettings(),i=()=>!!e.errors.diff?.useInlineViewWhenSpaceIsLimited;return(()=>{var s=JIe(),r=s.firstChild,o=r.firstChild,a=o.nextSibling,l=r.nextSibling;return o.$$mousedown=c=>{c.button===1&&n.closeFile?.()},A(o,x(Fn,{get children(){return[x(ot,{get when(){return n.tab?.source},get children(){var c=jIe();return We(Te,c,()=>Te&&{content:n.tab?.source?.path}),A(c,()=>Dh(n.tab?.source?.path||"",1/0)),c}}),x(ot,{get when(){return n.tab?.account},get children(){return"Account"}}),x(ot,{get when(){return n.tab?.settings},get children(){return"Settings"}}),x(ot,{get when(){return n.tab?.diff},get children(){return"Expected vs Actual"}})]}}),null),A(o,x(se,{get when(){return n.closeFile},get children(){return x(Ee,{class:"codicon-close ml-1",tooltip:"Close",tabIndex:0,onClick:()=>n.closeFile()})}}),null),A(a,x(se,{get when(){return n.tab?.source},get children(){var c=Az();return A(c,x(se,{get when(){return n.showCoverageWidget&&n.tab?.source?.coverage},get children(){return x(lV,{get coverage(){return n.tab.source.coverage},file:!0})}}),null),A(c,x(se,{get when(){return n.tab?.source?.uncoveredRegions.length},get children(){return x(Ee,{get tooltip(){return`${n.showUncoveredRegions?"Remove highlighting for":"Highlight"} uncovered regions`},class:"codicon-color-mode ml-2",onClick:()=>n.toggleUncoveredRegions?.(),get classList(){return{activeIcon:n.showUncoveredRegions}}})}}),null),c}}),null),A(a,x(se,{get when(){return n.tab?.diff},get children(){var c=Az();return A(c,x(Ee,{class:"codicon-diff",namespace:"details.errors.diff.header.action",get classList(){return{activeIcon:!i()}},tooltip:`Toggle forcing side-by-side diff view<br/><br/>${CQ}`,onClick:()=>{t("errors",Gt(d=>{d.diff||(d.diff={}),d.diff.useInlineViewWhenSpaceIsLimited=!d.diff.useInlineViewWhenSpaceIsLimited}))},tabIndex:0})),c}}),null),A(l,x(Fn,{get children(){return[x(ot,{get when(){return n.tab?.diff},get children(){return x(qIe,pg(n,{get useInlineViewWhenSpaceIsLimited(){return i()}}))}}),x(ot,{get when(){return n.tab?.source},get children(){return x(QIe,n)}}),x(ot,{get when(){return n.tab?.account},get children(){return x(ZIe,{get state(){return n.tab.account}})}}),x(ot,{get when(){return n.tab?.settings},get children(){return x(KIe,{})}})]}})),Me(()=>s.classList.toggle("hidden",!n.tab?.source&&!n.tab?.diff&&!n.tab?.account&&!n.tab?.settings)),s})()},QIe=n=>{let e;const t=new Set,[i,s]=he(),[r,o]=he(),[a,l]=he(),[c,d]=he(),[u,h]=he(!0),[f,g]=he(!1);Bn(async()=>{try{const{monaco:p,inject:b}=await Oa(()=>Promise.resolve().then(()=>Pw),void 0,import.meta.url),w=m(p);await b(),l(w.createDecorationsCollection()),d(w.createDecorationsCollection()),t.add(w.onDidChangeCursorSelection(v=>{f()||(c()?.clear(),n.selectionChanged?.({start:{line:v.selection.startLineNumber,column:v.selection.startColumn-1},end:{line:v.selection.endLineNumber,column:v.selection.endColumn-1}}))})),s(p),o(w)}catch(p){console.error("Could not initialize Monaco",p)}}),Ot(()=>{const p=r();p&&(t.forEach(b=>b.dispose()),p.getModel()?.dispose(),p.dispose())}),$e([()=>n.tab?.requestedLocation,r],()=>{const p=n.tab?.source?.path,b=n.tab?.requestedLocation;if(!b||b.file!==p){if(h(!0),p){const v=r();v&&Fz.set(p,v.saveViewState())}return}const w=r();w&&(Vz(w,b,c),h(!1))},{defer:!0}),$e([()=>n.tab?.source,()=>n.showUncoveredRegions,r],()=>{const p=r(),b=n.tab?.source?.content,w=n.tab?.source?.path,v=n.tab?.requestedLocation&&{...n.tab.requestedLocation};if(!v||v.file!==w||!p||typeof b>"u")return;if(p.getValue()!==b){g(!0);const y=u()?Fz.get(w)||null:p.saveViewState();p.setValue(b),p.restoreViewState(y),p.updateOptions({lineNumbersMinChars:p.getModel().getLineCount().toString().length+1});const C=p.getSelection();C&&n.initialPositionSet?.({line:C.startLineNumber,column:C.startColumn-1}),g(!1)}const _=[];if(n.showUncoveredRegions){const y=n.tab?.source?.uncoveredRegions||[];for(const C of y)_.push({range:{startLineNumber:C[0],startColumn:C[1]+1,endLineNumber:C[2],endColumn:C[3]+1},options:{className:"uncovered-region",inlineClassName:"uncovered-region"}})}for(const y of n.tab?.source?.lines||[]){const C=y.num,S={startLineNumber:C,startColumn:1,endLineNumber:C,endColumn:1e3};_.push(Pz(S,{glyphMarginClassName:tMe(y)}));const k=y.meta;if(y.err||y.log){const I=k?.system||k?.log&&k?.log.system;_.push(Pz(S,{after:{content:y.err||y.log,inlineClassName:`line-${y.err?"error":I?"system-log":"log"}`}}))}if(k?.watchExpression){const I=k.watchExpression.range,T=p.getModel(),D={startLineNumber:I[0],startColumn:Math.max(I[1]+1,T?.getLineFirstNonWhitespaceColumn(I[0])||1),endLineNumber:I[2],endColumn:Math.min(T?.getLineLastNonWhitespaceColumn(I[0])||1/0,I[3]+1)};(D.startLineNumber!==D.endLineNumber||D.startColumn!==D.endColumn)&&_.push({range:D,options:{className:"watch-expression"}})}}if(n.tab?.source?.debugger){const y=n.tab.source.debugger.range;_.push({range:{startLineNumber:y[0],startColumn:y[1]+1,endLineNumber:y[2],endColumn:y[3]+1},options:{className:n.tab.source.debugger.unreachable?"unreachable-step":"debugged-line"}})}a().clear(),a().set(_),(u()||n.tab?.source?.forcedLocation)&&v&&(Vz(p,v,c),h(!1))},{defer:!0});const m=p=>{const b=p.editor.createModel(n.tab?.source?.content??"",eMe(n.tab?.requestedLocation?.file)),w=parseFloat(getComputedStyle(document.body)?.getPropertyValue("--panel-font-size").split("px")[0])-1;return p.editor.create(e,{lineNumbersMinChars:b.getLineCount().toString().length+1,model:b,automaticLayout:!0,minimap:{enabled:!1},contextmenu:!1,quickSuggestions:!1,parameterHints:{enabled:!1},readOnly:!0,fontSize:w,fontFamily:"var(--editor-font-family)",padding:{top:9},scrollbar:{horizontal:"visible",vertical:"visible"},renderLineHighlight:"line",matchBrackets:"always",glyphMargin:!0})};return(()=>{var p=Tte(),b=e;return typeof b=="function"?We(b,p):e=p,p})()},qIe=n=>{let e;const[t,i]=he(),[s,r]=he();Bn(async()=>{try{const{monaco:a,inject:l}=await Oa(()=>Promise.resolve().then(()=>Pw),void 0,import.meta.url),c=o(a);await l(),i(a),r(c)}catch(a){console.error("Could not initialize Monaco",a)}}),Ot(()=>{const a=s();a&&(a.getModel()?.modified.dispose(),a.getModel()?.original.dispose(),a.dispose())}),$e([()=>n.tab?.diff,()=>n.tab?.diff?.actual,()=>n.tab?.diff?.expected,s,t],()=>{const a=t(),l=s(),c=n.tab?.diff?.actual,d=n.tab?.diff?.expected;!a||!l||l.setModel({original:a.editor.createModel(d||""),modified:a.editor.createModel(c||"")})},{defer:!0}),$e([()=>n.useInlineViewWhenSpaceIsLimited],()=>{const a=t(),l=s();!a||!l||l?.updateOptions({useInlineViewWhenSpaceIsLimited:n.useInlineViewWhenSpaceIsLimited})});const o=a=>{const l=parseFloat(getComputedStyle(document.body)?.getPropertyValue("--panel-font-size").split("px")[0])-1;return a.editor.createDiffEditor(e,{renderMarginRevertIcon:!1,renderGutterMenu:!1,originalEditable:!1,renderIndicators:!0,useInlineViewWhenSpaceIsLimited:n.useInlineViewWhenSpaceIsLimited,automaticLayout:!0,minimap:{enabled:!1},contextmenu:!1,quickSuggestions:!1,parameterHints:{enabled:!1},readOnly:!0,fontSize:l,padding:{top:9},scrollbar:{horizontalScrollbarSize:13,verticalScrollbarSize:13,horizontal:"visible",vertical:"visible"},renderLineHighlight:"line",matchBrackets:"always",cursorBlinking:"blink"})};return(()=>{var a=Tte(),l=e;return typeof l=="function"?We(l,a):e=a,a})()};function Vz(n,e,t){if(!e.line){n.revealLine(1);return}if(n.setPosition({lineNumber:e.line,column:(e.column||0)+1}),n.revealLineInCenterIfOutsideViewport(e.line),e.options?.callStackFrame){const i=n.getModel();t?.()?.clear(),t?.()?.set([{range:e.options.callStackFrame.range?{startLineNumber:e.options.callStackFrame.range[0],startColumn:e.options.callStackFrame.range[1]+1,endLineNumber:e.options.callStackFrame.range[2],endColumn:e.options.callStackFrame.range[3]+1}:{startLineNumber:e.line,startColumn:Math.max(e.options.callStackFrame.column||1,i?.getLineFirstNonWhitespaceColumn(e.line)||1),endLineNumber:e.line,endColumn:1e3},options:{className:"call-stack-frame"}}])}}function eMe(n){return n?n.endsWith(".vue")?"vue":n.endsWith(".svelte")?"svelte":n.endsWith(".wallaby")?"wallaby":"typescript":"typescript"}function Pz(n,e){return{range:n,options:{...e,isWholeLine:!0}}}function tMe(n){switch(n.state){case 1:return"uncovered-line";case 2:return"covered-line";case 3:return"partially-covered-line";case 4:return"error-source-line";case 5:return"error-path-line";default:return}}dn(["mousedown"]);var iMe=G('<div class="h-full w-full mx-auto my-auto text-[var(--subtle-foreground)] flex items-center justify-center uppercase text-[length:--header-font-size] tracking-wide px-3 text-center">No file opened'),nMe=G('<div class="h-full w-full">');function sMe(n){const e=Dt(),[t,i]=e.appSettings(),s=()=>t.editor.uncoveredRegions,r=yg(o=>{!n.app.debuggerStarted||!n.app.openedTab?.source||(o.start.line===o.end.line&&o.start.column!==o.end.column||o.start.line===o.end.line-1&&o.end.column===0)&&e.addWatchExpression(n.app.openedTab.source.path,n.app.openedTab.source.content,[o.start.line,o.start.column,o.end.line,o.end.column])},200);return Ot(()=>{e.closeAllFiles()}),go(()=>n.app.openedTab,o=>{o||e.closeAllFiles()}),(()=>{var o=nMe();return A(o,x(Th,{get when(){return!n.app.openedTab},get children(){return iMe()}}),null),A(o,x($Ie,{get tab(){return n.app.openedTab},get showUncoveredRegions(){return s()},get showCoverageWidget(){return!n.app.debuggerStarted&&!n.app.runStats?.filtered},toggleUncoveredRegions:()=>i("editor","uncoveredRegions",!s()),selectionChanged:a=>{n.app.openedTab?.diff||(e.updateOpenedSourceFilePosition({line:a.start.line,column:a.start.column}),r(a))},initialPositionSet:a=>{e.updateOpenedSourceFilePosition({line:a.line,column:a.column})},closeFile:()=>e.closeAllFiles()}),null),o})()}const Oz=3;class Dte{constructor(e={notifications:[]},t){this.state=e,this.setState=t,this._coreToApp=Y1(),this._appService=Dt(),this._disposable=new Fo,this._disposable.add(this._coreToApp.onNotifications(this.onNotificationsAvailable.bind(this))),this._notificationId=e.notifications.length,this.setState("notifications",i=>i.reverse().slice(0,Oz).map(s=>this._displayNotification(s))),Dt().clearNotifications()}_disposable;_coreToApp;_notificationId=0;_appService;_displayNotification(e){const t=this._notificationId++,i={...e,displayId:t};return i.actions=this._getActions(i),i.text=this._processText(i.text),i}hideNotification(e){this.setState("notifications",t=>t.filter(i=>i.displayId!==e))}onNotificationsAvailable(e){this.state.notifications?.[0]?.id===ZT&&!e.find(t=>t.id!==ZT)||this.setState("notifications",t=>[...e.reverse().map(i=>this._displayNotification(i)),...t].slice(0,Oz))}_processText(e){return e?e.replace(/<br\/><br\/>/g," ").replace(/<br\/>/g," ").replace(/<[^>]*>/g,""):""}_getActions(e){const t=[];if(!e.text)return t;const i=s=>()=>window.open(s,"_blank");return~e.text.indexOf("extended-trial-license-link")&&t.push({title:"Start Trial",command:()=>this._appService.openAccountDetails({requestTrial:!0})}),~e.text.indexOf("activate-link")&&t.push({title:"Activate License",command:()=>this._appService.openAccountDetails({activateLicense:!0})}),~e.text.indexOf("purchase")&&t.push({title:"Purchase",command:i("https://wallabyjs.com/purchase/#select-wallaby")}),~e.text.indexOf("auto-config-info-link")&&t.push({title:"View Docs",command:i("https://wallabyjs.com/docs/intro/config.html")}),e.id===ZT&&t.push({title:"Open Account",command:()=>this._appService.openAccountDetails()}),e.id===zle&&(t.push({title:"Restart Wallaby",command:()=>{this._appService.restart()}}),t.push({title:"Skip for Now",command:()=>{this.hideNotification(e.displayId)}})),e.button&&t.push({title:e.button.label,command:i(e.button.link)}),t}dispose(){this._disposable.dispose()}static Provider}const[rMe,oMe]=Go(n=>n.initial);Dte.Provider=rMe;var aMe=G('<div class="flex-grow cursor-default truncate text-center indent-12 text-[length:--header-font-size] font-bold uppercase">'),lMe=G('<div class="absolute bottom-8 right-2 flex flex-col [&amp;_.notification]:z-[101] [&amp;_.notification]:my-1 [&amp;_.notification]:flex [&amp;_.notification]:w-[25rem] [&amp;_.notification]:flex-col [&amp;_.notification]:rounded-[0.1875rem] [&amp;_.notification]:border [&amp;_.notification]:border-[var(--editor-hover-widget-border)] [&amp;_.notification]:bg-[--editor-hover-widget-background] [&amp;_.notification]:px-1.5 [&amp;_.notification]:py-1.5 [&amp;_.notification]:text-[length:--panel-font-size] [&amp;_.notification]:text-[var(--editor-hover-widget-foreground)] [&amp;_.notification]:shadow-[--widget-shadow]">'),cMe=G('<div class="relative flex h-full w-full flex-col"><div class="flex items-center border-b border-[--panel-view-border]"><div class="ml-auto text-nowrap pr-1 [&amp;_button]:mx-[0.0625rem]"></div></div><div class="flex items-center border-t border-[--panel-view-border] py-0.5 text-right text-[length:--panel-font-size] [&amp;_.item]:px-1"><div class="flex w-full items-center"><div class="item ml-auto !pr-0.5 opacity-70">'),dMe=G('<div class="flex-grow cursor-default truncate text-center text-[length:--panel-font-size] font-bold text-[--editor-warning-foreground]"><span class="inline-flex indent-12 uppercase">Wallaby is paused (please check your account settings)'),uMe=G('<div class="item group items-center dim flex flex-grow whitespace-nowrap !pr-4 pb-[0.03125rem]">Ln <!>, Col '),hMe=G('<div class="ml-auto flex px-1 pb-1 pt-2">'),fMe=G('<div class=notification><div class=flex><div class="codicon pr-1.5 !leading-[1rem]"></div><div class="flex-grow pr-0.5 leading-[1rem]"></div><div>'),gMe=G("<div class=pl-2>");function mMe(n){const{width:e,height:t}=Uk(),i=()=>e()*2>t()?"row":"column",s=Dt(),r=oMe(),o=s.getPanelState(Ue.StandaloneMain),a=s.getPanelState(Ue.StandaloneMainCode),l=s.getPanelState(Ue.StandaloneMainSideView),c=s.getPanelState(Ue.StandaloneOverview),d=J(()=>a().collapsed?'Show "Code" panel':'Hide "Code" panel'),u=J(()=>l().collapsed?"Show side panel":"Hide side panel"),h=J(()=>c().collapsed?'Show bottom "Overview" panel':'Hide bottom "Overview" panel');$e([a,l],()=>{const g=!!o().collapsed,m=a().collapsed&&l().collapsed,p=!a().collapsed||!l().collapsed;(m&&!g||p&&g)&&s.setPanelState(Ue.StandaloneMain,b=>({...b,collapsed:!g,size:b.size||70}))}),$e(s.getFailingStatus(),g=>{g?(document.getElementById("favicon")?.setAttribute("href","/favicon-alt.ico"),document.getElementById("shortcut")?.setAttribute("href","/favicon-alt.ico")):(document.getElementById("favicon")?.setAttribute("href","/favicon.ico"),document.getElementById("shortcut")?.setAttribute("href","/favicon.ico"))});const[,f]=Mhe();return $e(()=>n.app.project?.name,g=>{f(`${g}`)}),(()=>{var g=cMe(),m=g.firstChild,p=m.firstChild,b=m.nextSibling,w=b.firstChild,v=w.firstChild;return A(m,x(se,{get when(){return!s.getPausedState()()?.pausedBySystem},get fallback(){return dMe()},get children(){var _=aMe();return A(_,x(cTe,{tooltip:!0}),null),A(_,()=>n.app.project?.name,null),_}}),p),A(p,x(se,{get when(){return!s.getPausedState()()?.pausedBySystem},get children(){return x(Ee,{class:"codicon-debug-pause",tabIndex:0,onClick:()=>s.pause(),get tooltip(){return`Pause Wallaby<br/><br/>${s.isEditorConnected()?"Pauses real-time test execution and hides all related editor artifacts. ":""}When resuming, only the tests which were affected by your changes while Wallaby was paused will be executed.`}})}}),null),A(p,x(Ee,{get classList(){return{"codicon-layout-sidebar-left":!a().collapsed,"codicon-layout-sidebar-left-off":a().collapsed}},tabIndex:0,onClick:()=>{s.setPanelState(Ue.StandaloneMainCode,_=>({..._,collapsed:!_.collapsed,size:_.size||50}))},get tooltip(){return d()}}),null),A(p,x(Ee,{get classList(){return{"codicon-layout-sidebar-right":!l().collapsed,"codicon-layout-sidebar-right-off":l().collapsed}},tabIndex:0,onClick:()=>{s.setPanelState(Ue.StandaloneMainSideView,_=>({..._,collapsed:!_.collapsed,size:_.size||50}))},get tooltip(){return u()}}),null),A(p,x(Ee,{class:"codicon-layout-panel",get classList(){return{"codicon-layout-panel":!c().collapsed,"codicon-layout-panel-off":c().collapsed}},tabIndex:0,onClick:()=>s.setPanelState(Ue.StandaloneOverview,_=>({..._,collapsed:!_.collapsed})),get tooltip(){return h()}}),null),A(p,x(se,{get when(){return!s.isEditorConnected()},get children(){return x(Ee,{tooltip:"Manage license",class:"codicon-account",get classList(){return{"text-[--error-foreground] !font-bold":s.getPausedState()()?.pausedBySystem,"text-[--editor-warning-foreground]":n.app.account?.state==="expiring"||n.app.account?.state==="trialLicense"}},tabIndex:0,onClick:()=>s.openAccountDetails()})}}),null),A(p,x(Ee,{tooltip:"Manage settings",class:"codicon-settings-gear",tabIndex:0,onClick:()=>s.openSettings()}),null),A(g,x(jr,{class:"flex flex-grow",direction:"column",get children(){return[x(ji,{index:0,defaultState:{size:70},get id(){return Ue.StandaloneMain},get children(){return x(jr,{class:"h-full w-full",get direction(){return i()},get children(){return[x(ji,{index:0,defaultState:{size:50},get id(){return Ue.StandaloneMainCode},get children(){return x(sMe,{get state(){return n.state},get app(){return n.app}})}}),x(ji,{index:1,defaultState:{size:50},get id(){return Ue.StandaloneMainSideView},get children(){return x(vl,{constructor:wn,get initial(){return{project:n.app.project,fileCoverageTableSort:{field:"coverageValue",direction:"asc"},selection:{implicit:{}},debuggerState:n.app.debuggerState,tests:{searchControlVisible:!0},testFileProgressByFile:{}}},view:_=>x(Jm,{get parent(){return _.state},state:y=>y,get setState(){return _.setState},view:y=>x(wte,{get state(){return y.state},get keyboard(){return n.keyboard}})})})}})]}})}}),x(ji,{index:1,defaultState:{size:30},get id(){return Ue.StandaloneOverview},get children(){return x(vl,{constructor:mV,get initial(){return{selection:{test:"allLogsAndErrors",implicit:{}},debuggerState:n.app.debuggerState,startupEvents:[],tests:{searchControlVisible:!1},testFileProgressByFile:{}}},view:_=>x(Jm,{get parent(){return _.state},state:y=>y,get setState(){return _.setState},view:y=>x(xte,{get state(){return y.state},get keyboard(){return n.keyboard}})})})}})]}}),b),A(w,x(gV,{get additionalContent(){return x(se,{get when(){return n.app.openedTab?.requestedLocation},get children(){var _=uMe(),y=_.firstChild,C=y.nextSibling;return C.nextSibling,A(_,()=>n.app.openedTab.requestedLocation.line||1,C),A(_,()=>n.app.openedTab.requestedLocation.column||1,null),_}})}}),v),A(v,x(Ee,{tooltipOpts:{trigger:"click",delay:0},get tooltip(){return`
            <b>Core version ${n.app.version?.version}</b>
            <ul class="px-3 list-disc [&_a]:text-[--link-foreground] [&_a]:underline">
              <li>
              Docs: <a href="https://wallabyjs.com/docs/" target="_blank">wallabyjs.com/docs</a>
              </li>
              <li>
              Support: <a href="https://wallabyjs.com/support/" target="_blank">wallabyjs.com/support</a>
              </li>
              <li>
              Discord: <a href="https://wallabyjs.com/chat/" target="_blank">wallabyjs.com/chat</a>
              </li>
            </ul>
            `},class:"codicon-info clickableIcon"})),A(g,x(se,{get when(){return n.state.notifications.length},get children(){var _=lMe();return A(_,x(ln,{get each(){return n.state.notifications},children:y=>(()=>{var C=fMe(),S=C.firstChild,k=S.firstChild,I=k.nextSibling,T=I.nextSibling;return A(I,()=>y.text),A(T,x(Ee,{onClick:()=>r.hideNotification(y.displayId),tooltip:"Close notification",class:"codicon-close"})),A(C,x(se,{get when(){return y.actions?.length},get children(){var D=hMe();return A(D,x(ln,{get each(){return y.actions},children:M=>(()=>{var E=gMe();return A(E,x(on,{get tooltip(){return M.title},class:"w-[7.4rem] truncate",onClick:()=>{M.command()},get children(){return M.title}})),E})()})),D}}),null),Me(D=>nn(k,{"codicon-info text-[--editor-info-foreground]":y.type==="info","codicon-error text-[--error-foreground]":y.type==="error","codicon-warning text-[--editor-warning-foreground]":y.type==="warning"},D)),C})()})),_}}),null),g})()}class pMe{constructor(e){this._appService=e}_namespace="quokka.output.main";matches(e){return e.startsWith(this._namespace)&&!e.startsWith("quokka.output.main.content.errors")}handle(e,t,i){if(e=this._narrow(e),!t.target)return;const s=t.target;function r(l){t.preventDefault(),t.stopPropagation()}const o=this._locateRootElement(s),a=l=>{const c=this._queryErrorsElement(l);if(c)c.focus();else{const d=this._querySettingsElement(l);d?d.focus():l.focus()}};if(o){if(e==="."||e==="content"){if(t.key==="Escape"&&!rt(t))return r(this._appService.focus("editor"))}else if(e==="header.action"){if((t.key==="Escape"||t.key==="ArrowDown")&&!rt(t))return r(a(o))}else if(e.endsWith("stack.header.action")||e.endsWith("guide.header.action")||e.endsWith("settings.header.action")){if((t.key==="Escape"||t.key==="ArrowUp")&&!rt(t))return r(a(o))}else if(e==="content.settings"||e==="content.settings.content"){if(t.key==="Escape"&&!rt(t)){const l=this._querySettingsElement(o);return r(l?.querySelector("button.expander")?.click())}}else if(e==="content.settings.content.action"){if((t.key==="Enter"||t.key===" ")&&!rt(t))return r(s.parentElement?.click());if(t.key==="Escape"&&!rt(t)){const l=this._querySettingsElement(o);return r(l?.querySelector("button.expander")?.click())}}}}_locateRootElement(e){return e.closest(`[data-namespace="${this._namespace}"]`)}_queryErrorsElement(e){return e.querySelector(`[data-namespace="${this._namespace}.content.errors.content.viewer"]`)}_querySettingsElement(e){return e.querySelector(`[data-namespace="${this._namespace}.content.settings"]`)}_narrow(e){return e=e.replace(`${this._namespace}.`,""),e=e.replace(this._namespace,"."),e}}class Ite{constructor(e={selection:{implicit:{}}},t){this._state=e,this._setState=t,this._coreToApp=Y1(),this._appToCore=U1(),this._disposable.add(this._coreToApp.onAllLogsAndErrors(this.onAllLogsAndErrors.bind(this))),this._disposable.add(this._coreToApp.onRunError(this.onRunErrorChanged.bind(this))),this._disposable.add(this._coreToApp.onQuokkaConfig(this.onQuokkaConfigChanged.bind(this))),this._disposable.add(this._coreToApp.onDebuggerState(this.onDebuggerStateChanged.bind(this))),this._disposable.add(this._coreToApp.onCallStack(this.onCallStackAvailable.bind(this))),this._disposable.add(this._coreToApp.onSelectedEntities(this.onSelectedEntities.bind(this))),this._disposable.add(this._coreToApp.onConsoleOutput(this.onConsoleOutput.bind(this))),this._appService=Dt(),this._appToCore.trackContextLogsAndErrors()}_coreToApp;_appToCore;_disposable=new Fo;_appService;onAllLogsAndErrors(e){this._appService.closeFind(),this._setState(Gt(t=>{t.preCompleteOutput=!1,t.runError=e.runError;const i=!!e.runError,s=e.runError?[{id:$n,message:e.runError.message,stack:[],header:e.runError.header}]:[],r=e.globalLogs.slice();e.globalErrors&&s.push(...e.globalErrors);const o=Object.keys(t.filesWithExpressionsToEvaluate?.files||{}),a=o.length>0?new Set(o):void 0;r.forEach(d=>{d.fileId&&a?.delete(d.fileId)}),a?.size!==0&&this._resetExpressionsToEvaluate(a);let l;if(t.logs?.items&&s.some(d=>d.stack.length>0)){l=[];const d=t.logs.items.global?.logs;if(d){const u={...d};e.globalLogs.forEach(h=>{delete u[h.id]}),l.push(...Object.values(u).filter(h=>h.loc).map(h=>({...h,maybeObsolete:!0})))}}l&&r.push(...l);const c={};if(s.forEach((d,u)=>{d.maybeObsolete?R_(d):Sg(d,{includeMappedOnly:!0}),c[d.id]=d}),t.displayLimits?.logs?.apply?(t.displayLimits.logs.applied=r.splice(bn.logs).length>0,t.displayLimits.allLogsLimitApplied=t.displayLimits.logs.applied):t.displayLimits&&(t.displayLimits.allLogsLimitApplied=!1,r.length<bn.logs&&this._startApplyingLogsDisplayLimits()),r.length>0){if(r.length===1){const u=r[0].id;t.selection.implicit.log=u,t.selection.implicit.logs=new Set([u])}const d=fs.updateLogs(this._state,r,t.selection.log,t.logs?.showStackTraceFor);t.selection.log=d.selected,this._setState("logs",At({items:d.items,maybeObsolete:i,stackTraceToShow:d.stackTraceToShow}))}else t.logs=void 0;s.length>0?this._setState("errors",At({singleTestSelected:!1,all:s,maybeObsolete:i,allById:c})):t.errors=void 0,delete t.selection.implicit.error,delete t.selection.implicit.log}))}onRunErrorChanged(e){this._appService.closeFind(),this._setState(Gt(t=>{const i=!!t.runError;if(!(!i&&!e)){if(t.runError=e,e){t.errors?t.errors.maybeObsolete=!0:t.errors={singleTestSelected:!1,all:[],allById:{},maybeObsolete:!0};const s={id:$n,message:e.message,stack:[],header:e.header};t.errors.all[0]?.id===$n?t.errors.all[0]=s:t.errors.all.unshift(s),t.errors.allById[$n]=s}else t.errors?.all[0]?.id===$n&&t.errors.all.shift(),delete t.errors?.allById?.[$n];this._setState("errors",At(t.errors)),t.logs&&(i?e||this._setState("logs",s=>({...s,maybeObsolete:void 0})):this._setState("logs",s=>({...s,maybeObsolete:!0})))}}))}onQuokkaConfigChanged(e){this._setState("config",e)}onDebuggerStateChanged(e){this._setState("debuggerState",e.started?At(e):void 0),e?.current?.frame?.frame!==void 0&&this._state.debuggerCallStack?.frame!==void 0&&this._state.debuggerCallStack.stack.find(t=>t.frame===e.current.frame.frame)||this._setState("debuggerCallStack",void 0)}clearDebuggerCallStack(){this._setState("debuggerCallStack",void 0)}onCallStackAvailable(e){Jk(e.stack),this._setState("debuggerCallStack",e)}onSelectedEntities(e){e.logs&&e.logs.length>0?(fs.updateLogsSelection(this._state,this._setState,e.logs,{diagram:e.diagram})&&(this._state.displayLimits?.logs?.applied||this._state.displayLimits?.allLogsLimitApplied)&&(this._state.debuggerState?.started?this.loadRestOfLogs():this._setState("displayLimits","logs",At({apply:!1}))),this._focus("quokka.output")):fs.updateLogsSelection(this._state,this._setState,[],{diagram:e.diagram})}onConsoleOutput(e){this._setState(Gt(t=>{this._setState("preCompleteOutput",!0);const i=Object.values(t.logs?.items.global?.logs||[]).concat(e).slice(-bn.preCompletedLogs);this._setState;const s=fs.updateLogs(t,i,t.selection.log,t.logs?.showStackTraceFor);this._setState("selection","log",s.selected),this._setState("logs",At({items:s.items,maybeObsolete:!1,stackTraceToShow:s.stackTraceToShow}))}))}loadRestOfLogs(){this._setState("displayLimits",At({logs:{apply:!1}})),this._appToCore.trackContextLogsAndErrors()}stop(){this._appToCore.stopQuokka()}profile(){this._appToCore.profileQuokka()}debug(e){this._appToCore.debugQuokka(e)}viewRecentFiles(){this._appToCore.viewRecentQuokkaFiles()}share(){this._appToCore.shareQuokka()}installMissingPackage(e){this._appToCore.installMissingPackage(e)}insertDependencyImport(e){this._appToCore.insertDependencyImport(e)}toggleAutoLog(){this._appToCore.toggleAutoLog()}toggleShowSingleInlineValue(){this._appToCore.toggleShowSingleInlineValue()}toggleShowValueOnSelection(){this._appToCore.toggleShowValueOnSelection()}updateQuokkaGlobalSettings(e){this._appToCore.updateQuokkaGlobalSettings(e)}changeRunMode(e){this._appToCore.changeRunMode(e)}setDefaultRuntimeSelectionSetting(e){this._appToCore.setDefaultRuntimeSelectionSetting(e)}setProjectRuntimeSelectionSetting(e){this._appToCore.setProjectRuntimeSelectionSetting(e)}dispose(){}_resetExpressionsToEvaluate(e){this._setState(Gt(t=>{fs.resetExpressionsToEvaluate(t,e)}))}_startApplyingLogsDisplayLimits(){this._setState("displayLimits","logs",At({apply:!0}))}_focus(e){this._setState("selection","namespace",void 0),this._setState("selection","namespace",e),this._appToCore.focus("quokka.output")}static Provider}const[bMe,vMe]=Go(n=>n.initial);Ite.Provider=bMe;var _Me=G("<span>Insert: <strong>import <!> from '<!>'"),wMe=G("<span>Insert: <strong>const <!> = require('<!>')"),yMe=G('<div class="code mb-[1em] flex flex-col">'),SMe=G('<div class="h-[25%] max-h-[5rem] min-h-[3.125rem]">'),CMe=G('<div class="absolute inset-0 flex flex-col">'),LMe=G('<div class="absolute inset-0 flex flex-col"><div class="pad h-full overflow-y-auto outline-none"data-namespace=quokka.output.main.content.errors.content.viewer data-vscode-context="{&quot;webviewSection&quot;: &quot;viewer&quot;, &quot;preventDefaultContextMenuItems&quot;: false}">'),kMe=G('<div class=pb-1><div class="select-none pb-1 pt-2">Run Mode</div><select class="w-[12rem] flex-grow appearance-none truncate rounded-[--dropdown-border-radius] border-0 border-[--dropdown-border] bg-[--dropdown-background] px-1 py-0.5 text-[--dropdown-foreground]"><option value=auto>Run Automatically</option><option value=onsave>Run on Save</option><option value=ondemand>Run on Demand'),xMe=G('<div class="flex h-full flex-col outline-none"tabindex=-1 data-namespace=quokka.output.main.content.settings><div class="pad flex flex-col overflow-y-auto outline-none [&amp;_.control]:my-0.5 [&amp;_.control]:flex [&amp;_.control]:w-fit [&amp;_.control]:cursor-pointer [&amp;_.control]:select-none [&amp;_.control]:items-center [&amp;_.control_.checkbox:focus]:outline [&amp;_.control_.checkbox:focus]:outline-1 [&amp;_.control_.checkbox:focus]:outline-offset-0 [&amp;_.control_.checkbox:focus]:outline-[--focus-border-vivid] [&amp;_.control_.checkbox]:mr-2 [&amp;_.control_.checkbox]:h-[1.125rem] [&amp;_.control_.checkbox]:w-[1.125rem] [&amp;_.control_.checkbox]:rounded-[0.1875rem] [&amp;_.control_.checkbox]:border [&amp;_.control_.checkbox]:border-[--checkbox-border] [&amp;_.control_.checkbox]:bg-[--checkbox-background] [&amp;_.control_.checkbox]:text-[--checkbox-foreground]"tabindex=-1 data-namespace=quokka.output.main.content.settings.content><div class="select-none pb-2"><div>These settings control the default behavior of new Quokka sessions.</div><div>Changing these settings will not change the behavior of the current session.</div></div><div class=control><div class="checkbox codicon"tabindex=0 data-namespace=quokka.output.main.content.settings.content.action></div>Auto Log All Values</div><div class=control><div class="checkbox codicon"tabindex=0 data-namespace=quokka.output.main.content.settings.content.action></div>Show Value On Selection</div><div class=control><div class="checkbox codicon"tabindex=0 data-namespace=quokka.output.main.content.settings.content.action></div>Show Last Displayed Value Only'),TMe=G('<div class="absolute inset-0 z-20 mx-auto my-auto flex h-full w-full flex-col items-center justify-center"><p class="backlight relative text-[length:1.3rem] font-bold uppercase tracking-wide">Welcome to Quokka</p><p class="mt-2 px-2 text-center text-[length:0.7rem] font-bold uppercase">Your ultimate coding playground, now supercharged</p><p class="mt-3.5 [&amp;_button]:mx-2 [&amp;_button]:w-28 [&amp;_button]:text-[length:--panel-font-size]">'),w5=G('<div class="pointer-events-none absolute inset-0 z-10 bg-[--panel-view-background] opacity-90">'),DMe=G('<div class="absolute inset-0 z-20 mx-auto my-auto flex h-full w-full max-w-[600px] flex-col items-center justify-center"><p class="relative text-[length:1.3rem] font-bold uppercase tracking-wide">Select Runtime for Project</p><p class="mt-2 px-4 text-center">Node is currently selected as your runtime, but Quokka detected that your project uses Bun. Which runtime would you like to use for all Quokka files for this project?</p><div class="mt-3.5 flex items-center "><div class=relative><div class="absolute left-[-0.15rem] top-[-0.65rem]">'),IMe=G('<div class="absolute inset-0 z-20 mx-auto my-auto flex h-full w-full max-w-[600px] flex-col items-center justify-center"><div class="mt-6 flex flex-col px-4"><div class="my-1 text-[length:--panel-larger-font-size] font-bold">Default Runtime Selection</div><div class="my-1 opacity-80">Determines which JavaScript runtime (Node or Bun) to use for all projects. When <a class="text-[--link-foreground] underline"href=https://quokkajs.com/docs/config/runtime/#bun-configuration>configured</a>, this setting bypasses prompts asking for a runtime choice.</div><div class="my-1 w-full flex-grow rounded-[--input-border-radius] border border-[--input-border] bg-[--input-background] px-1 py-0.5 text-[--input-foreground] placeholder-[--editor-code-lens-foreground]"><select class="w-full flex-grow appearance-none truncate rounded-[--dropdown-border-radius] border-0 border-[--dropdown-border] bg-[--dropdown-background] px-1 py-0.5 text-[--dropdown-foreground]"><option value=prompt>Prompt on first start when multiple runtimes are detected</option><option value=autoUse>Automatically use Bun for Bun projects</option><option value=neverUse>Always use Node.js for all projects</option><option value=alwaysUse>Always use Bun for all projects</option></select></div><div class="ml-auto mt-3.5">'),MMe=G('<div class="relative h-full w-full"data-vscode-context="{&quot;webviewSection&quot;: &quot;quokka&quot;, &quot;preventDefaultContextMenuItems&quot;: true}"><div class="flex h-full w-full flex-col">'),EMe=G('<div class="ml-auto truncate px-2 py-2 text-[length:--small-header-font-size] opacity-50 hover:underline"><a class="block truncate"href=https://quokkajs.com/pro><span class="font-bold text-[--editor-warning-foreground]">PRO features</span> enabled until '),NMe=G("<span>"),RMe=G('<div class="mx-auto my-auto flex h-full w-full items-center justify-center px-3 text-center text-[length:--header-font-size] uppercase tracking-wide text-[var(--subtle-foreground)]">no errors'),WMe=G("<li>"),AMe=G('<div class="flex h-full flex-col"><div class="flex max-h-7 flex-row items-center justify-center py-1 shadow-[var(--widget-shadow)]"><div class="flex-grow truncate px-2 py-0.5 pr-1 text-[length:--small-header-font-size] font-bold uppercase">Call Stack</div><div class="ml-auto flex pr-1 [&amp;_li]:flex [&amp;_li_button]:mx-[0.0625rem] [&amp;_li_button]:!text-[length:--icon-font-size]"><ul class="flex flex-row items-center justify-center"><li></li></ul></div></div><div class="panel-font-size flex flex-grow cursor-text flex-col overflow-y-auto outline-none">'),FMe=G('<div class="flex h-full flex-col"><div class="pad flex cursor-default flex-col overflow-y-auto"><div class=legend><div class="color timeline relative"><div class="absolute mx-auto h-full w-[0.0625rem] bg-[--error-foreground]"></div></div><div class=text>step with error</div></div><div class=legend><div class="color timeline relative"><div class="absolute mx-auto h-full w-[0.0625rem] bg-[--link-foreground] brightness-125"></div></div><div class=text>step with log</div></div><div class=legend><div class="color timeline relative"><div class="absolute mx-auto h-full w-[0.0625rem] bg-[--foreground] brightness-125"></div></div><div class=text>active step</div></div><div class=legend><div class="color timeline relative"><div class="absolute mx-auto h-full w-[0.0625rem] bg-[--stack-frame-highlight]"></div></div><div class=text>call stack step</div></div><div class=legend><div class=color>7</div><div class=text>step at </div></div><div class="legend relative"><div class="absolute bottom-0.5 left-0 h-[0.125rem] w-[0.6875rem] bg-[--foreground] brightness-125"></div><div class="color mb-0.5 !h-2"></div><div class=text>active step</div></div><div class="legend relative"><div class="absolute bottom-0.5 left-0 h-[0.125rem] w-[0.6875rem] bg-[--error-foreground]"></div><div class="color mb-0.5 !h-2"></div><div class=text>step with error</div></div><div class="legend relative"><div class="absolute bottom-0.5 left-0 h-[0.125rem] w-[0.6875rem] bg-[--link-foreground] brightness-125"></div><div class="color mb-0.5 !h-2"></div><div class=text>step with log</div></div><div class="legend relative"><div class="absolute bottom-0.5 left-0 h-[0.125rem] w-[0.6875rem] bg-[--stack-frame-highlight]"></div><div class="color mb-0.5 !h-2"></div><div class=text>call stack step'),VMe=G("<span>@ "),PMe=G('<div class="code px-2 tracking-tight"><span class="whitespace-pre text-[var(--token-scope-function-foreground)]">'),OMe=G("<div class=legend><div class=color></div><div class=text>"),ZMe=G("<div>When enabled, previously displayed values are hidden and only the last displayed value is shown<br><br>When disabled, all previously displayed values are shown, in addition to the last displayed value"),GMe=G('<div class="pad pad flex min-h-[1.8rem] items-center justify-center truncate leading-[1.8rem]"><div class="header-tracking flex-grow cursor-pointer select-none truncate text-[length:--small-header-font-size] font-bold uppercase">Global Settings'),BMe=G('<div class="pad pad flex min-h-[1.8rem] items-center justify-center truncate leading-[1.8rem]"><div class="header-tracking flex-grow cursor-pointer select-none truncate text-[length:--small-header-font-size] font-bold uppercase">Timeline Guide');const XMe="<br/><br/>The current step echo is a visual representation of <b>other hits on the line/branch of the current frame</b>. It is useful when you want to see where else the current line of code has been executed during the test and navigate to those steps.<br/><br/>Note that number of hits is limited by the 100 in each direction.",uy=`${Lte} The tile's color represents the function of the step.`;function zMe(n){let e;const t=Dt(),i=Bg(),s=vMe(),{width:r,height:o}=Uk(),a=()=>t.isStandalone()&&r()*2>o()||r()>o()?"row":"column",[l,c]=he(),[d,u]=he(),[h,f]=t.appSettings(),g=t.getPanelState(Ue.QuokkaSettings),m=t.getPanelState(Ue.QuokkaDebugger),p=()=>h.errors.fullSourceLinks,b=()=>h.errors.unmappedFiles,w=()=>h.logs.fullSourceLinks,v=()=>h.logs.context,_=()=>h.valuePeek,y=()=>n.state.config?.globalSettings?.autoLog,C=()=>n.state.config?.globalSettings?.showValueOnSelection,S=()=>n.state.config?.globalSettings?.showSingleInlineValue,k=()=>n.state.config?.globalSettings?.runMode,I=()=>h.debugger.codePreview,T=()=>h.debugger.echo,D=J(()=>h.debugger.reverseStack),M=()=>!g().collapsed&&!!g().size&&n.state.config?.pro?.liveValueDisplay,[E,W]=he(!!n.state.config?.bunPrompt),[P,N]=he("prompt"),[H,U]=he(!1),B=()=>!!n.state.debuggerState?.started,Y=()=>B()&&n.state.config?.pro?.timeline&&n.state.debuggerState?.current?.trace.length!==1,[ne,ee]=he(void 0,{equals:!1}),$=()=>mDe(),ge=J(()=>{const O=Array.from($().entries());return O[1]||O[0]}),Ie=J(()=>ge()?.[1]||{background:"",foreground:"",name:""}),xe=t.getFindState(),[z,K]=he(),[Se,De]=he(),ke=he(),[je]=ke,et=he(),[mt]=et;$e(n.keyboard.focusedNamespace,O=>{if(O&&O.startsWith("quokka.output")){O==="quokka.output"&&(O="quokka.output.logs"),O==="quokka.output.main"&&(O="quokka.output.main.content.errors.content.viewer");let q=e.querySelector(`[data-namespace="${O}"]`);q?q.getAttribute("data-unfocused-scrolling")!=="true"?q.focus():setTimeout(()=>{let Q=n.keyboard.lastFocusedNamespace();Q==="quokka.output.main"&&(Q="quokka.output.main.content.errors.content.viewer"),O===Q&&q.isConnected&&(q.matches(":focus")||(O==="quokka.output.main.content.errors.content.viewer"&&(O="quokka.output.main"),e.querySelector(`[data-namespace="${O}"]`)?.focus()))},70):(O==="quokka.output.main.content.errors.content.viewer"&&(O="quokka.output.main"),e.querySelector(`[data-namespace="${O}"]`)?.focus())}});const ze=new aw("quokka.output.logs",t,i),ht=new $k("quokka.output.main.content.errors",t),nt=new pMe(t);$e(n.keyboard.key,O=>{if(O){const q=O.event,Q=O.namespace;Q==="quokka.output"?(q.key==="l"&&n.keyboard.onFocus("quokka.output.logs",!0),q.key==="m"&&n.keyboard.onFocus("quokka.output.main",!0),q.preventDefault(),q.stopPropagation()):ht.matches(Q)?ht.handle(Q,q,n.state):ze.matches(Q)?ze.handle(Q,q,n.state):nt.matches(Q)&&nt.handle(Q,q,n.state)}}),$e(()=>n.state.selection.namespace,O=>{O&&n.keyboard?.onFocus(O,!1)});const zt=O=>{const q=J(()=>O().maybeObsolete||n.state.errors?.maybeObsolete&&O().id!==$n),Q=J(()=>O().selection),ce=J(()=>{const be=[];return O().missingPackage&&(be.push({class:"codicon-package",name:`Install ${O().missingPackage} package only for current Quokka session`,action:()=>s.installMissingPackage({name:O().missingPackage,target:"session"})}),n.state.config?.project&&be.push({class:"codicon-package",name:`Install ${O().missingPackage} package into project`,action:()=>s.installMissingPackage({name:O().missingPackage,target:"project"})})),O().undefinedName&&(be.push({class:"codicon-code",name:(()=>{var Ae=_Me(),Pe=Ae.firstChild,tt=Pe.nextSibling,qe=tt.firstChild,wt=qe.nextSibling,me=wt.nextSibling,fe=me.nextSibling;return fe.nextSibling,A(tt,()=>O().undefinedName,wt),A(tt,()=>O().undefinedName,fe),Ae})(),action:()=>s.insertDependencyImport({name:O().undefinedName,type:"import"})}),be.push({class:"codicon-code",name:(()=>{var Ae=wMe(),Pe=Ae.firstChild,tt=Pe.nextSibling,qe=tt.firstChild,wt=qe.nextSibling,me=wt.nextSibling,fe=me.nextSibling;return fe.nextSibling,A(tt,()=>O().undefinedName,wt),A(tt,()=>O().undefinedName,fe),Ae})(),action:()=>s.insertDependencyImport({name:O().undefinedName,type:"require"})})),O().missingBrowserGlobal&&be.push({class:"codicon-browser",name:"Install and use quokka browser plugin",action:()=>s.installMissingPackage({name:"jsdom",target:"global",plugin:"jsdom-quokka-plugin"})}),be});return(()=>{var be=yMe();return A(be,x(fV,{get error(){return O()},get maybeObsolete(){return q()},get chosen(){return Q()},get showErrorsFullSourceLinks(){return p()},get showUnmappedFileSourceLinks(){return b()},get debuggerStarted(){return B()},namespace:"quokka.output.main.content",omitTestName:!0,wordWrap:!0,get actions(){return ce()}})),Me(Ae=>{var Pe=!!q(),tt=O().id;return Pe!==Ae.e&&be.classList.toggle("opacity-50",Ae.e=Pe),tt!==Ae.t&&xt(be,"data-id",Ae.t=tt),Ae},{e:void 0,t:void 0}),be})()},Fe=(O,q)=>{n.keyboard.onFocus(O,q)},[re,ie]=he(),de=()=>{const O=[];return O.push({text:"Automatic",action:n.state.config?.runMode==="auto"?()=>{}:()=>s.changeRunMode("auto"),checked:n.state.config?.runMode==="auto"}),O.push({text:"On save",action:n.state.config?.runMode==="onsave"?()=>{}:()=>s.changeRunMode("onsave"),checked:n.state.config?.runMode==="onsave"}),O.push({text:"On demand",action:n.state.config?.runMode==="ondemand"?()=>{}:()=>s.changeRunMode("ondemand"),checked:n.state.config?.runMode==="ondemand"}),O},Z=()=>{const O=[];return O.push({text:"Session: Auto Log All Values",action:()=>s.toggleAutoLog(),checked:n.state.config?.autoLog}),O.push({text:"Session: Show Value On Selection",action:n.state.config?.autoLog?void 0:()=>s.toggleShowValueOnSelection(),checked:n.state.config?.showValueOnSelection}),O.push({text:"Session: Show Last Displayed Value Only",action:n.state.config?.autoLog?void 0:()=>s.toggleShowSingleInlineValue(),checked:n.state.config?.showSingleInlineValue}),t.isIntegratedIntelliJ()||(O.push(wg),O.push({text:"View Recent Files",action:()=>s.viewRecentFiles()}),O.push({text:"Share",action:()=>s.share()})),O};return(()=>{var O=MMe(),q=O.firstChild,Q=e;return typeof Q=="function"?We(Q,O):e=O,A(q,x(se,{get when(){return Y()},get children(){var ce=SMe();return A(ce,x(Cte,{get state(){return n.state},onFocus:Fe})),ce}}),null),A(q,x(jr,{class:"flex h-full w-full flex-grow",get direction(){return a()},get children(){return[x(ji,{index:0,defaultState:{size:70},get id(){return Ue.QuokkaLogs},get children(){return x($r,{header:"Logs",headerClass:"pl-2",scrollable:l,namespace:"quokka.output.logs",contentClass:"panel-font-size flex flex-col",tooltip:'Go to Logs panel <span class="keyboard-shortcut">G</span>&nbsp;<span class="keyboard-shortcut">L</span>',get beforeIcons(){return[x(se,{get when(){return n.state.config?.pro?.limitedTime},get children(){var ce=EMe(),be=ce.firstChild,Ae=be.firstChild;return Ae.nextSibling,A(be,()=>{const Pe=new Date(n.state.config?.pro?.limitedTime||0),tt=Pe.toLocaleString(void 0,{month:"long"}),qe=Pe.toLocaleString(void 0,{day:"numeric"}),wt=Pe.toLocaleString(void 0,{year:"numeric"});return`${tt} ${qe}, ${wt}`},null),ce}})]},get icons(){return re()??[x(se,{get when(){return!B()&&n.state.config?.pro?.liveValueDisplay},get children(){return x(Ee,{class:"codicon-inspect",get classList(){return{activeIcon:_()}},onClick:()=>f("valuePeek",!_()),tabIndex:0,namespace:"quokka.output.logs.header.action",get tooltip(){return`${_()?"Disable":"Enable"} value peek<br/><br/>${SQ}`}})}}),x(Ee,{get classList(){return{"codicon-map":!w(),"codicon-map-filled":w()}},onClick:()=>f("logs","fullSourceLinks",!w()),tabIndex:0,namespace:"quokka.output.logs.header.action",get tooltip(){return`${w()?"Hide":"Show"} file name in source links`}}),x(Ee,{class:"codicon-location",get classList(){return{activeIcon:v()}},onClick:()=>f("logs","context",!v()),tabIndex:0,namespace:"quokka.output.logs.header.action",get tooltip(){return`${v()?"Hide value context":"Show value context when it is available"}`}}),x(Ee,{class:"codicon-fold-up",onClick:()=>ee(),tabIndex:0,namespace:"quokka.output.logs.header.action",tooltip:"Fold all expanded log entries"})]},get overlays(){return[x(Jd,{onUpdateSearchTerm:async ce=>{const be=await mt()?.search(ce);De(be?{searchTerm:ce,current:be?.current,total:be?.total}:void 0)},onNextResult:async()=>{const ce=await mt()?.jumpToNext();De(ce?{current:ce?.current,total:ce?.total}:void 0)},onPreviousResult:async()=>{const ce=await mt()?.jumpToPrevious();De(ce?{current:ce?.current,total:ce?.total}:void 0)},onClose:async ce=>{await mt()?.exit(ce),t.closeFind()},searchStatus:Se,isVisible:()=>xe()?.namespace==="quokka.output.logs",mode:()=>"enter"})]},get children(){var ce=CMe();return We(Wc,ce,()=>Wc&&{controller:et,prefix:"qol"}),A(ce,x(ow,{get state(){return n.state},service:i,namespace:"quokka.output",scrollableElementRef:c,onFocus:(be,Ae)=>{n.keyboard?.onFocus(be,Ae)},foldAllOpenedLogs:ne,get append(){return x(se,{get when(){return!n.state.preCompleteOutput},get children(){return x(p0,{get state(){return n.state.displayLimits?.logs},handler:()=>s.loadRestOfLogs()})}})},globalLogsHeader:"Logs",get disallowValueLoad(){return n.state.preCompleteOutput},get maxDepth(){return n.state.config?.pro?.unlimitedValueExplorer?void 0:2},get noValueLoadBeyondMaxDepth(){return n.state.config?.pro?.unlimitedValueExplorer?void 0:!0},icons:ie})),ce}})}}),x(ji,{index:1,defaultState:{size:30},get id(){return Ue.QuokkaStatus},get children(){return x($r,{get header(){return(()=>{var ce=NMe();return We(Te,ce,()=>Te&&{content:`
                        ${n.state.config&&!n.state.config.scratch?`${n.state.config.fileName}<br>`:""}
                        Go to Main panel <span class="keyboard-shortcut">G</span>&nbsp;<span class="keyboard-shortcut">M</span>`}),A(ce,(()=>{var be=J(()=>!!n.state.config);return()=>be()?(()=>{var Ae=J(()=>!!n.state.config.scratch);return()=>Ae()?"Quokka Scratch":Dh(n.state.config.fileName+(n.state.config.snaps?" {}":""),100)})():"Quokka"})()),ce})()},headerClass:"pl-2",scrollable:d,namespace:"quokka.output.main",contentClass:"panel-font-size",get icons(){return[x(se,{get when(){return J(()=>!B()&&!n.state.config?.snaps)()&&!t.isIntegratedIntelliJ()},get children(){return x(Ee,{menuItems:de,class:"codicon-vm-running",tabIndex:0,namespace:"details.logs.header.action",tooltip:"Run mode options"})}}),x(se,{get when(){return!B()},get children(){return x(Ee,{class:"codicon-stop-circle",tabIndex:0,namespace:"quokka.output.main.header.action",tooltip:"Stop",onClick:()=>{s.stop(),t.focus("editor")}})}}),x(se,{get when(){return!B()},get children(){return x(Ee,{class:"codicon-debug",tabIndex:0,namespace:"quokka.output.main.header.action",tooltip:"Start Time Machine",onClick:()=>s.debug()})}}),x(se,{get when(){return J(()=>!!(n.state.config?.pro?.codeStory&&!B()))()&&!t.isIntegratedIntelliJ()},get children(){return x(Ee,{class:"codicon-book",tabIndex:0,namespace:"quokka.output.main.header.action",tooltip:"View Code Story",onClick:()=>s.debug({codeStory:!0})})}}),x(se,{get when(){return J(()=>!!n.state.config?.pro?.profiling)()&&!B()},get children(){return x(Ee,{class:"codicon-chip",tabIndex:0,namespace:"quokka.output.main.header.action",tooltip:"Profile",onClick:()=>s.profile()})}}),x(se,{get when(){return B()&&n.state.config?.pro?.timeline},get children(){return x(Ee,{class:"codicon-radio-tower",get tooltip(){return(T()?"Hide current step echo":"Show current step echo")+XMe},onClick:()=>f("debugger","echo",!T()),get classList(){return{activeIcon:T()}},tabIndex:0,namespace:"quokka.output.main.header.action"})}}),x(se,{get when(){return B()&&n.state.config?.pro?.timeline},get children(){return x(Ee,{class:"codicon-inspect",tooltip:"Toggle code preview display in debugger on line/column hover<br/><br/>When the timeline's zoom level allows, line and column numbers are displayed inside colored tiles that represent hits on the line/branch during code execution.",onClick:()=>f("debugger","codePreview",!I()),tabIndex:0,namespace:"quokka.output.main.header.action",get classList(){return{activeIcon:I()}}})}}),x(se,{get when(){return!B()},get children(){return x(Ee,{menuItems:Z,class:"codicon-ellipsis",tabIndex:0,namespace:"details.logs.header.action",tooltip:"Session settings and additional actions"})}})]},get overlays(){return[x(Jd,{onUpdateSearchTerm:async ce=>{const be=await je()?.search(ce);K(be?{searchTerm:ce,current:be?.current,total:be?.total}:void 0)},onNextResult:async()=>{const ce=await je()?.jumpToNext();K(ce?{current:ce?.current,total:ce?.total}:void 0)},onPreviousResult:async()=>{const ce=await je()?.jumpToPrevious();K(ce?{current:ce?.current,total:ce?.total}:void 0)},onClose:async ce=>{await je()?.exit(ce),t.closeFind()},searchStatus:z,isVisible:()=>xe()?.namespace==="quokka.output.main.content.errors",mode:()=>"enter"})]},get children(){return x(jr,{class:"[&_div.color]:code h-full w-full [&_div.color]:mr-1 [&_div.color]:mt-[0.0625rem] [&_div.color]:flex [&_div.color]:h-3 [&_div.color]:w-[0.6875rem] [&_div.color]:flex-shrink-0 [&_div.color]:items-center [&_div.color]:justify-center [&_div.color]:text-[length:--panel-smallest-font-size] [&_div.color]:font-bold [&_div.legend]:flex [&_div.legend]:min-w-0 [&_div.legend]:flex-row [&_div.legend]:items-center [&_div.legend]:leading-[1.8em] [&_div.pad]:pl-2.5 [&_div.pad]:pr-1 [&_div.text]:truncate [&_div.text]:text-[length:--panel-font-size] [&_div.timeline]:border-b [&_div.timeline]:border-t [&_div.timeline]:border-[var(--editor-hover-widget-border)]",direction:"column",get children(){return[x(se,{get when(){return B()||!M()},get children(){return x(ji,{class:"relative",index:0,defaultState:{size:50},get id(){return Ue.QuokkaErrors},get children(){return x(se,{get when(){return n.state.errors?.all.length},get fallback(){return RMe()},get children(){var ce=LMe(),be=ce.firstChild;return We(Nh,ce,()=>Nh&&{controller:ke,prefix:"qoe"}),be.addEventListener("paste",Ae=>Ae.preventDefault()),be.addEventListener("cut",Ae=>Ae.preventDefault()),be.$$input=()=>window.document.execCommand("undo"),We(u,be),xt(be,"contenteditable",!0),xt(be,"spellcheck",!1),be.style.setProperty("caret-color","var(--editor-cursor-foreground)"),A(be,x(yd,{get each(){return n.state.errors.all},by:Ae=>Ae.id,children:zt})),ce}})}})}}),x(se,{get when(){return!B()},get fallback(){return x(Fn,{get children(){return[x(ot,{get when(){return n.state.debuggerCallStack},get children(){var ce=AMe(),be=ce.firstChild,Ae=be.firstChild,Pe=Ae.nextSibling,tt=Pe.firstChild,qe=tt.firstChild,wt=be.nextSibling;return A(tt,x(se,{get when(){return n.state.debuggerCallStack.stack.length>1},get children(){var me=WMe();return A(me,x(Ee,{get classList(){return{activeIcon:D()}},tooltip:"Toggle reversed call stack order",class:"codicon-arrow-swap rotate-90 !text-[length:--icon-font-size]",tabIndex:0,onClick:()=>f("debugger","reverseStack",!D()),namespace:"quokka.output.main.content.debugger.stack.header.action"})),me}}),qe),A(qe,x(Ee,{tooltip:"Close",tabIndex:0,class:"codicon-close !text-[length:--icon-font-size]",onClick:()=>{s.clearDebuggerCallStack(),Fe("quokka.output.main",!0)},namespace:"quokka.output.main.content.debugger.stack.header.action"})),A(wt,x(Jp,{get each(){return J(()=>!!D())()?n.state.debuggerCallStack.stack.slice().reverse():n.state.debuggerCallStack.stack},children:me=>(()=>{var fe=PMe(),Ze=fe.firstChild;return A(Ze,()=>me().context),A(fe,x(se,{get when(){return me().file},get children(){return[VMe(),x(fh,{get value(){return me()},get options(){return{focus:!0,callStackFrame:me().frame!==n.state.debuggerState?.current?.frame?.frame?me():void 0}},compactFileNameOnly:!0,codeFragmentTooltipOptions:()=>me().file&&me().line?{file:me().file,line:me().line,navigatable:!0}:void 0})]}}),null),fe})()})),ce}}),x(ot,{get when(){return n.state.config?.pro?.timeline},get children(){return[x(ji,{index:1,defaultState:{size:50},get id(){return Ue.QuokkaDebugger},get children(){var ce=FMe(),be=ce.firstChild,Ae=be.firstChild,Pe=Ae.firstChild,tt=Pe.nextSibling,qe=Ae.nextSibling,wt=qe.firstChild,me=wt.nextSibling,fe=qe.nextSibling,Ze=fe.firstChild,Ye=Ze.nextSibling;Ye.firstChild;var Xe=fe.nextSibling,oe=Xe.firstChild,le=oe.nextSibling,Ve=Xe.nextSibling,ae=Ve.firstChild,_e=ae.nextSibling;_e.firstChild;var Oe=Ve.nextSibling,He=Oe.firstChild,lt=He.nextSibling,ft=lt.nextSibling;ft.firstChild;var kt=Oe.nextSibling,ii=kt.firstChild,Ht=ii.nextSibling,pi=Ht.nextSibling,ui=kt.nextSibling,Ei=ui.firstChild,As=Ei.nextSibling,nr=As.nextSibling,ni=ui.nextSibling,Qi=ni.firstChild,io=Qi.nextSibling,mu=io.nextSibling;return A(ce,x(Gz,{onFocus:Fe}),be),A(be,x(ln,{get each(){return Array.from($().entries())},children:([Fs,$c])=>x(se,{when:Fs!==sg,get children(){var Nt=OMe(),ve=Nt.firstChild,st=ve.nextSibling;return We(Te,ve,()=>Te&&{content:uy}),We(Te,st,()=>Te&&{content:uy}),A(st,()=>$c.name),Me(()=>$c.background!=null?ve.style.setProperty("background",$c.background):ve.style.removeProperty("background")),Nt}})}),Ae),We(Te,Pe,()=>Te&&{content:Qm}),We(Te,tt,()=>Te&&{content:Qm}),We(Te,wt,()=>Te&&{content:qm}),We(Te,me,()=>Te&&{content:qm}),We(Te,Ze,()=>Te&&{content:ep}),We(Te,Ye,()=>Te&&{content:ep}),A(Ye,x(se,{get when(){return T()},children:" and its echo"}),null),We(Te,oe,()=>Te&&{content:tp}),We(Te,le,()=>Te&&{content:tp}),We(Te,ae,()=>Te&&{content:uy}),We(Te,_e,()=>Te&&{content:uy}),A(_e,(()=>{var Fs=J(()=>!!Ie());return()=>Fs()?Ie().name+" line 7":"line 7"})(),null),We(Te,lt,()=>Te&&{content:ep}),We(Te,ft,()=>Te&&{content:ep}),A(ft,x(se,{get when(){return T()},children:" and its echo"}),null),We(Te,Ht,()=>Te&&{content:Qm}),We(Te,pi,()=>Te&&{content:Qm}),We(Te,As,()=>Te&&{content:qm}),We(Te,nr,()=>Te&&{content:qm}),We(Te,io,()=>Te&&{content:tp}),We(Te,mu,()=>Te&&{content:tp}),Me(Fs=>{var $c=Ie().background,Nt=Ie().foreground,ve=Ie().background,st=Ie().background,yt=Ie().background,qi=Ie().background;return $c!==Fs.e&&((Fs.e=$c)!=null?ae.style.setProperty("background",$c):ae.style.removeProperty("background")),Nt!==Fs.t&&((Fs.t=Nt)!=null?ae.style.setProperty("color",Nt):ae.style.removeProperty("color")),ve!==Fs.a&&((Fs.a=ve)!=null?lt.style.setProperty("background",ve):lt.style.removeProperty("background")),st!==Fs.o&&((Fs.o=st)!=null?Ht.style.setProperty("background",st):Ht.style.removeProperty("background")),yt!==Fs.i&&((Fs.i=yt)!=null?As.style.setProperty("background",yt):As.style.removeProperty("background")),qi!==Fs.n&&((Fs.n=qi)!=null?io.style.setProperty("background",qi):io.style.removeProperty("background")),Fs},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),ce}}),x(se,{get when(){return m().collapsed||!m().size},get children(){return x(Gz,{collapsed:!0,onFocus:Fe})}})]}})]}})},get children(){return x(se,{get when(){return n.state.config?.pro?.liveValueDisplay},get children(){return[x(ji,{index:1,defaultState:{size:50},get id(){return Ue.QuokkaSettings},get children(){var ce=xMe(),be=ce.firstChild,Ae=be.firstChild,Pe=Ae.nextSibling,tt=Pe.firstChild,qe=Pe.nextSibling,wt=qe.firstChild,me=qe.nextSibling,fe=me.firstChild;return A(ce,x(Zz,{onFocus:Fe}),be),We(Te,Pe,()=>Te&&{content:"When enabled, all values from all lines are automatically logged and shown"}),Pe.$$click=()=>s.updateQuokkaGlobalSettings({autoLog:!y()}),We(Te,qe,()=>Te&&{content:"When enabled, selecting an expression in the editor will show its value"}),qe.$$click=()=>s.updateQuokkaGlobalSettings({showValueOnSelection:!C()}),We(Te,me,()=>Te&&{content:ZMe()}),me.$$click=()=>s.updateQuokkaGlobalSettings({showSingleInlineValue:!S()}),A(be,x(se,{get when(){return!t.isIntegratedIntelliJ()},get children(){var Ze=kMe(),Ye=Ze.firstChild,Xe=Ye.nextSibling,oe=Xe.firstChild,le=oe.nextSibling,Ve=le.nextSibling;return Xe.addEventListener("change",ae=>{const _e=ae.currentTarget.value;s.updateQuokkaGlobalSettings({runMode:_e})}),Me(ae=>{var _e=k()==="auto",Oe=k()==="onsave",He=k()==="ondemand";return _e!==ae.e&&(oe.selected=ae.e=_e),Oe!==ae.t&&(le.selected=ae.t=Oe),He!==ae.a&&(Ve.selected=ae.a=He),ae},{e:void 0,t:void 0,a:void 0}),Ze}}),null),Me(Ze=>{var Ye=!!y(),Xe=!!y(),oe=!!C(),le=!!y(),Ve=!!S();return Ye!==Ze.e&&tt.classList.toggle("codicon-check",Ze.e=Ye),Xe!==Ze.t&&qe.classList.toggle("opacity-50",Ze.t=Xe),oe!==Ze.a&&wt.classList.toggle("codicon-check",Ze.a=oe),le!==Ze.o&&me.classList.toggle("opacity-50",Ze.o=le),Ve!==Ze.i&&fe.classList.toggle("codicon-check",Ze.i=Ve),Ze},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),ce}}),x(se,{get when(){return!M()},get children(){return x(Zz,{collapsed:!0,onFocus:Fe})}})]}})}})]}})}})}})]}}),null),A(O,x(se,{get when(){return h.welcomeMessage},get children(){return[(()=>{var ce=TMe(),be=ce.firstChild,Ae=be.nextSibling,Pe=Ae.nextSibling;return A(Pe,x(on,{href:"https://wallabyjs.com/blog/quokka-2.html",children:"Learn More"}),null),A(Pe,x(on,{onClick:()=>f("welcomeMessage",!1),children:"Get Started"}),null),Me(tt=>nn(Pe,{"[&_button]:border-0":t.isIntegratedVSCode()},tt)),ce})(),w5()]}}),null),A(O,x(se,{get when(){return J(()=>!!(!h.welcomeMessage&&E()))()&&!H()},get children(){return[(()=>{var ce=DMe(),be=ce.firstChild,Ae=be.nextSibling,Pe=Ae.nextSibling,tt=Pe.firstChild,qe=tt.firstChild;return A(Pe,x(on,{class:"mx-2 inline-block min-w-[60px] text-[length:--panel-font-size]",onClick:()=>{W(!1),s.setProjectRuntimeSelectionSetting("neverUse")},children:"Node"}),tt),A(Pe,x(on,{class:"mx-2 inline-block min-w-[60px] text-[length:--panel-font-size]",onClick:()=>{W(!1),s.setProjectRuntimeSelectionSetting("alwaysUse")},children:"Bun"}),tt),A(qe,x(Ee,{tooltip:"Default Runtime Selection Settings",class:"codicon-settings-gear mx-2",tabIndex:0,onClick:()=>U(!0)})),Me(wt=>nn(Pe,{"[&_button]:border-0":t.isIntegratedVSCode()},wt)),ce})(),w5()]}}),null),A(O,x(se,{get when(){return H()},get children(){return[(()=>{var ce=IMe(),be=ce.firstChild,Ae=be.firstChild,Pe=Ae.nextSibling,tt=Pe.nextSibling,qe=tt.firstChild,wt=qe.firstChild,me=wt.nextSibling,fe=me.nextSibling,Ze=fe.nextSibling,Ye=tt.nextSibling;return qe.addEventListener("change",Xe=>{N(Xe.currentTarget.value)}),A(Ye,x(on,{class:"inline-block min-w-[60px] text-[length:--panel-font-size]",onClick:()=>{U(!1),W(P()==="prompt"),s.setDefaultRuntimeSelectionSetting(P())},children:"Close"})),Me(Xe=>{var oe=P()==="prompt",le=P()==="autoUse",Ve=P()==="neverUse",ae=P()==="alwaysUse",_e={"[&_button]:border-0":t.isIntegratedVSCode()};return oe!==Xe.e&&(wt.selected=Xe.e=oe),le!==Xe.t&&(me.selected=Xe.t=le),Ve!==Xe.a&&(fe.selected=Xe.a=Ve),ae!==Xe.o&&(Ze.selected=Xe.o=ae),Xe.i=nn(Ye,_e,Xe.i),Xe},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),ce})(),w5()]}}),null),Me(ce=>{var be={"border-t border-[--panel-view-border]":a()==="row"&&t.isIntegratedVSCode()},Ae=!!(E()||H()),Pe=!!(!E()&&h.welcomeMessage);return ce.e=nn(O,be,ce.e),Ae!==ce.t&&q.classList.toggle("opacity-5",ce.t=Ae),Pe!==ce.a&&q.classList.toggle("opacity-10",ce.a=Pe),ce},{e:void 0,t:void 0,a:void 0}),O})()}function Zz(n){const e=Dt(),t=()=>{e.setPanelState(Ue.QuokkaSettings,i=>n.collapsed?{...i,collapsed:!1,size:i.size||30}:{...i,collapsed:!0}),n.onFocus?.(n.collapsed?"quokka.output.main.content.settings.content":"quokka.output.main",!0)};return(()=>{var i=GMe(),s=i.firstChild;return s.$$click=t,A(i,x(Ee,{get classList(){return{"codicon-chevron-down":!n.collapsed,"codicon-chevron-up":n.collapsed}},class:"expander",get tooltip(){return`${n.collapsed?"Expand":"Collapse"} "Settings" panel`},tabIndex:0,namespace:"quokka.output.main.content.settings.header.action",onClick:t}),null),i})()}function Gz(n){const e=Dt(),t=()=>{e.setPanelState(Ue.QuokkaDebugger,i=>n.collapsed?{...i,collapsed:!1,size:i.size||50}:{...i,collapsed:!0}),n.onFocus?.("quokka.output.main",!0)};return(()=>{var i=BMe(),s=i.firstChild;return s.$$click=t,A(i,x(Ee,{get classList(){return{"codicon-chevron-down":!n.collapsed,"codicon-chevron-up":n.collapsed}},get tooltip(){return`${n.collapsed?"Expand":"Collapse"} "Timeline Guide" panel`},tabIndex:0,namespace:"quokka.output.main.content.guide.header.action",onClick:t}),null),i})()}dn(["input","click"]);var _u=G("<div class=row><span class=desc>Jump to test tree</span><span class=keys><span class=kbd>J</span><span> </span><span class=kbd>T"),HMe=G('<div class="absolute inset-0 z-40 mx-auto my-auto h-full w-full overflow-y-auto p-2 text-[length:--panel-font-size]"><div data-namespace=shortcuts tabindex=-1 class="mb-1 grid w-full auto-rows-[7px] grid-cols-[repeat(auto-fill,minmax(30rem,1fr))] gap-1 outline-none [&amp;>section]:p-1 [&amp;_.item.active]:border-[--editor-lightbulb-foreground] [&amp;_.item]:border [&amp;_.item]:border-[--panel-view-border] [&amp;_.item_.header]:border-b [&amp;_.item_.header]:border-[--panel-view-border] [&amp;_.item_.header]:!bg-[--list-hover-background] [&amp;_.item_.row:not(:last-child)]:border-b [&amp;_.item_.row:not(:last-child)]:border-[--panel-view-border] [&amp;_.item_.row:nth-child(odd)]:bg-[--text-mode-area-background] [&amp;_.item_.row]:flex [&amp;_.item_.row]:flex-row [&amp;_.item_.row]:justify-between [&amp;_.item_.row]:px-2 [&amp;_.item_.row]:py-1 [&amp;_.item_row.desc]:text-[length:--header-font-size]">'),UMe=G('<div class="pointer-events-none absolute inset-0 z-30 bg-[--panel-view-native-background]">'),YMe=G("<section>"),Mte=G("<span class=kbd>"),b0=G("<span> "),KMe=G("<div class=row><span class=desc>Focus actions</span><span class=keys><span class=kbd>Tab"),jMe=G("<div class=row><span class=desc>Select action</span><span class=keys><span class=kbd>Right</span><span> | </span><span class=kbd>Left"),JMe=G("<div class=row><span class=desc>Focus/Unfocus test</span><span class=keys><span class=kbd>F"),$Me=G("<div class=row><span class=desc>Debug test</span><span class=keys><span class=kbd>D"),QMe=G("<div class=row><span class=desc>Profile test</span><span class=keys><span class=kbd>P"),qMe=G("<div class=row><span class=desc>Update test snapshot</span><span class=keys><span class=kbd>U"),eEe=G("<div class=row><span class=desc>Open side-by-side diff</span><span class=keys><span class=kbd>V"),tEe=G("<div class=row><span class=desc></span><span class=keys><span class=kbd>S"),iEe=G('<div class=item><div class="header row"><span class=desc> to <!> </span><span class=keys><span class=kbd></span><span> </span><span class=kbd></span></span></div><div class=row><span class=desc>Navigate</span><span class=keys><span class=kbd>Left</span><span> | </span><span class=kbd>Right</span><span>, </span><span class=kbd>Up</span><span> | </span><span class=kbd>Down</span><span>, </span><span class=kbd>PgUp</span><span> | </span><span class=kbd>PgDown</span><span>, </span><span class=kbd>Home</span><span> | </span><span class=kbd>End</span></span></div><div class=row><span class=desc>Find</span><span class=keys><span class=kbd></span>+<span class=kbd>F</span><span> or </span><span class=kbd>/</span></span></div><div class=row><span class=desc>Open error in editor</span><span class=keys><span class=kbd>Enter</span><span> or </span><span class=kbd>E</span></span></div><div class=row><span class=desc>Preview error in editor</span><span class=keys><span class=kbd>Space</span></span></div><div class=row><span class=desc>Peek error source code</span><span class=keys><span class=kbd>.</span></span></div><div class=row><span class=desc>Return to editor</span><span class=keys><span class=kbd>Escape'),nEe=G("<div class=row><span class=desc>Open log in side view</span><span class=keys><span class=kbd>S"),sEe=G('<div class=item><div class="header row"><span class=desc> to <!>Logs </span><span class=keys><span class=kbd></span><span> </span><span class=kbd>L</span></span></div><div class=row><span class=desc>Navigate</span><span class=keys><span class=kbd>Up</span><span> | </span><span class=kbd>Down</span><span>, </span><span class=kbd>PgUp</span><span> | </span><span class=kbd>PgDown</span><span>, </span><span class=kbd>Home</span><span> | </span><span class=kbd>End</span></span></div><div class=row><span class=desc>Scroll</span><span class=keys><span class=kbd></span>+<span class=kbd>Up</span><span> | </span><span class=kbd></span>+<span class=kbd>Down</span></span></div><div class=row><span class=desc>Find</span><span class=keys><span class=kbd></span>+<span class=kbd>F</span><span> or </span><span class=kbd>/</span></span></div><div class=row><span class=desc>Expand/Collapse</span><span class=keys><span class=kbd>Enter</span><span> or </span><span class=kbd>Right</span><span> | </span><span class=kbd>Left</span></span></div><div class=row><span class=desc>Select action (when expanded)</span><span class=keys><span class=kbd>Right</span><span> | </span><span class=kbd>Left</span></span></div><div class=row><span class=desc>Enter text mode (when expanded)</span><span class=keys><span class=kbd>Enter</span></span></div><div class=row><span class=desc>Exit text mode (when is in text mode)</span><span class=keys><span class=kbd>Esc</span></span></div><div class=row><span class=desc>Open log in editor</span><span class=keys><span class=kbd>E</span></span></div><div class=row><span class=desc>Preview log in editor</span><span class=keys><span class=kbd>Space</span></span></div><div class=row><span class=desc>Peek log source code</span><span class=keys><span class=kbd>.</span></span></div><div class=row><span class=desc>Copy value</span><span class=keys><span class=kbd>C</span></span></div><div class=row><span class=desc>Copy element value</span><span class=keys><span class=kbd>Shift</span><span>+</span><span class=kbd>C</span></span></div><div class=row><span class=desc>Copy element path</span><span class=keys><span class=kbd>Shift</span><span>+</span><span class=kbd>D</span></span></div><div class=row><span class=desc>Show as diagram</span><span class=keys><span class=kbd>D</span></span></div><div class=row><span class=desc>Return to editor</span><span class=keys><span class=kbd>Escape</span></span></div><div class=row><span class=desc>Show context menu</span><span class=keys><span class=kbd>Shift</span><span>+</span><span class=kbd>F10</span><span> | </span><span class=kbd></span><span>+</span><span class=kbd>.'),rEe=G("<span class=kbd>O"),oEe=G("<div class=row><span class=desc>Filter <span class=text-[var(--subtle-foreground)]>(test tree only)</span></span><span class=keys><span class=kbd></span>+<span class=kbd>F</span><span> or </span><span class=kbd>/"),aEe=G("<div class=row><span class=desc>Update test file snapshots <span class=text-[var(--subtle-foreground)]>(when test file is selected)</span></span><span class=keys><span class=kbd>U"),Ete=G("<div class=row><span class=desc>Open side-by-side diff <span class=text-[var(--subtle-foreground)]>(when test is selected)</span></span><span class=keys><span class=kbd>V"),lEe=G('<div class=item><div class="header row"><span class=desc>Go to<!>Tests panel</span><span class=keys><span class=kbd>G</span><span> </span><span class=kbd>T</span></span></div><div class=row><span class=desc>Navigate</span><span class=keys><span class=kbd>Up</span><span> | </span><span class=kbd>Down</span><span>, </span><span class=kbd>PgUp</span><span> | </span><span class=kbd>PgDown</span><span>, </span><span class=kbd>Home</span><span> | </span><span class=kbd>End</span></span></div><div class=row><span class=desc>Scroll</span><span class=keys><span class=kbd></span>+<span class=kbd>Up</span><span> | </span><span class=kbd></span>+<span class=kbd>Down</span></span></div><div class=row><span class=desc>Select action</span><span class=keys><span class=kbd>Right</span><span> | </span><span class=kbd>Left</span></span></div><div class=row><span class=desc>Open test in editor</span><span class=keys><span class=kbd>Enter</span><span> or </span><span class=kbd>E</span></span></div><div class=row><span class=desc>Preview test in editor</span><span class=keys><span class=kbd>Space</span></span></div><div class=row><span class=desc>Peek test source code</span><span class=keys><span class=kbd>.</span></span></div><div class=row><span class=desc>Focus/Unfocus test</span><span class=keys><span class=kbd>F</span></span></div><div class=row><span class=desc>Profile test</span><span class=keys><span class=kbd>P</span></span></div><div class=row><span class=desc>Debug test</span><span class=keys><span class=kbd>D</span></span></div><div class=row><span class=desc>Update test snapshot <span class=text-[var(--subtle-foreground)]>(when test is selected)</span></span><span class=keys><span class=kbd>U</span></span></div><div class=row><span class=desc>Open test in side view</span><span class=keys><span class=kbd>S</span></span></div><div class=row><span class=desc>Return to editor</span><span class=keys><span class=kbd>Escape'),cEe=G('<div class=item><div class="header row"><span class=desc>Global</span></div><div class=row><span class=desc>Go to Side view</span><span class=keys><span class=kbd>G</span><span> </span><span class=kbd>S'),pV=G("<span class=kbd>S"),dEe=G('<div class=item><div class="header row"><span class=desc>Go to<!>Tests tab</span><span class=keys><span class=kbd>G</span><span> </span><span class=kbd>T</span></span></div><div class=row><span class=desc>Navigate</span><span class=keys><span class=kbd>Up</span><span> | </span><span class=kbd>Down</span><span>, </span><span class=kbd>PgUp</span><span> | </span><span class=kbd>PgDown</span><span>, </span><span class=kbd>Home</span><span> | </span><span class=kbd>End</span></span></div><div class=row><span class=desc>Scroll</span><span class=keys><span class=kbd></span>+<span class=kbd>Up</span><span> | </span><span class=kbd></span>+<span class=kbd>Down</span></span></div><div class=row><span class=desc>Filter</span><span class=keys><span class=kbd></span>+<span class=kbd>F</span><span> or </span><span class=kbd>/</span></span></div><div class=row><span class=desc>Focus actions</span><span class=keys><span class=kbd>Tab</span></span></div><div class=row><span class=desc>Select action</span><span class=keys><span class=kbd>Right</span><span> | </span><span class=kbd>Left</span></span></div><div class=row><span class=desc>Open test in editor</span><span class=keys><span class=kbd>Enter</span><span> or </span><span class=kbd>E</span></span></div><div class=row><span class=desc>Preview test in editor</span><span class=keys><span class=kbd>Space</span></span></div><div class=row><span class=desc>Peek test source code</span><span class=keys><span class=kbd>.</span></span></div><div class=row><span class=desc>Focus/Unfocus test</span><span class=keys><span class=kbd>F</span></span></div><div class=row><span class=desc>Debug test</span><span class=keys><span class=kbd>D</span></span></div><div class=row><span class=desc>Profile test</span><span class=keys><span class=kbd>P</span></span></div><div class=row><span class=desc>Update test snapshot <span class=text-[var(--subtle-foreground)]>(when test is selected)</span></span><span class=keys><span class=kbd>U</span></span></div><div class=row><span class=desc>Update test file snapshots <span class=text-[var(--subtle-foreground)]>(when test file is selected)</span></span><span class=keys><span class=kbd>U</span></span></div><div class=row><span class=desc>Return to editor</span><span class=keys><span class=kbd>Escape'),uEe=G('<div class=item><div class="header row"><span class=desc>Jump to <!>Covered Source Files panel</span><span class=keys><span class=kbd>J</span><span> </span><span class=kbd>C</span></span></div><div class=row><span class=desc>Navigate</span><span class=keys><span class=kbd>Up</span><span> | </span><span class=kbd>Down</span></span></div><div class=row><span class=desc>Open file in editor</span><span class=keys><span class=kbd>Enter</span><span> or </span><span class=kbd>E</span></span></div><div class=row><span class=desc>Preview file in editor</span><span class=keys><span class=kbd>Space</span></span></div><div class=row><span class=desc>Jump to test tree</span><span class=keys><span class=kbd>Escape</span><span> or </span><span class=kbd>J</span><span> </span><span class=kbd>T'),hEe=G('<div class=item><div class="header row"><span class=desc>Go to<!>Coverage tab</span><span class=keys><span class=kbd>G</span><span> </span><span class=kbd>C</span></span></div><div class=row><span class=desc>Return to editor</span><span class=keys><span class=kbd>Escape'),fEe=G('<div class=item><div class="header row"><span class=desc>Go to<!>Status tab</span><span class=keys><span class=kbd>G</span><span> </span><span class=kbd>T</span></span></div><div class=row><span class=desc>Return to editor</span><span class=keys><span class=kbd>Escape'),gEe=G('<div class=item><div class="header row"><span class=desc>Global</span></div><div class=row><span class=desc>Go to Overview</span><span class=keys><span class=kbd>G</span><span> </span><span class=kbd>O');function mEe(n){const e=Dt();let t,i;const[s,r]=he();return Bn(()=>{if(n.state){const o=(n.state==="lastFocusedNamespace"?n.keyboard.lastFocusedNamespace():n.state)||"details.logs";let a=[];o.startsWith("overview.tests")?(i="overview.tests",a=[x(Kl,{active:!0}),x(Dn,{kind:"overview",leader:"G"}),x(In,{kind:"overview",leader:"G"})],e.isStandalone()?(a.push(x(In,{kind:"side-view",leader:"G"})),a.push(x(Dn,{kind:"side-view",leader:"G"})),a.push(x(el,{})),a.push(x(tl,{})),a.push(x(il,{}))):a.push(x(y5,{}))):o.startsWith("overview.errors")?(i="overview.errors",a=[x(Dn,{active:!0,kind:"overview",leader:"G"}),x(Kl,{}),x(In,{kind:"overview",leader:"G"})],e.isStandalone()?(a.push(x(In,{kind:"side-view",leader:"G"})),a.push(x(Dn,{kind:"side-view",leader:"G"})),a.push(x(el,{})),a.push(x(tl,{})),a.push(x(il,{}))):a.push(x(y5,{}))):o.startsWith("overview.logs")?(i="overview.logs",a=[x(In,{active:!0,kind:"overview",leader:"G"}),x(Kl,{}),x(Dn,{kind:"overview",leader:"G"})],e.isStandalone()?(a.push(x(In,{kind:"side-view",leader:"G"})),a.push(x(el,{})),a.push(x(Dn,{kind:"side-view",leader:"G"})),a.push(x(tl,{})),a.push(x(il,{}))):a.push(x(y5,{}))):o.startsWith("details.logs")?(i="details.logs",a=[x(In,{active:!0,kind:"side-view",leader:"G"}),x(Dn,{kind:"side-view",leader:"G"}),x(el,{}),x(tl,{}),x(il,{})],e.isStandalone()?(a.push(x(Kl,{})),a.push(x(Dn,{kind:"overview",leader:"G"})),a.push(x(In,{kind:"overview",leader:"G"}))):a.push(x(wu,{}))):o.startsWith("details.errors")?(i="details.errors",a=[x(Dn,{active:!0,kind:"side-view",leader:"G"}),x(In,{kind:"side-view",leader:"G"}),x(el,{}),x(tl,{}),x(il,{})],e.isStandalone()?(a.push(x(Kl,{})),a.push(x(Dn,{kind:"overview",leader:"G"})),a.push(x(In,{kind:"overview",leader:"G"}))):a.push(x(wu,{}))):o.startsWith("details.tests.errors")?(i="details.tests.errors",a=[x(Dn,{active:!0,kind:"overview",leader:"J",get rows(){return[_u()]}}),x(In,{kind:"overview",leader:"J",get rows(){return[_u()]}}),x(hy,{}),x(el,{}),x(In,{kind:"side-view",leader:"G"}),x(Dn,{kind:"side-view",leader:"G"}),x(tl,{}),x(il,{})],e.isStandalone()?(a.push(x(Kl,{})),a.push(x(Dn,{kind:"overview",leader:"G"})),a.push(x(In,{kind:"overview",leader:"G"}))):a.push(x(wu,{}))):o.startsWith("details.tests.logs")?(i="details.tests.logs",a=[x(In,{active:!0,kind:"overview",leader:"J",get rows(){return[_u()]}}),x(Dn,{kind:"overview",leader:"J",get rows(){return[_u()]}}),x(hy,{}),x(el,{}),x(In,{kind:"side-view",leader:"G"}),x(Dn,{kind:"side-view",leader:"G"}),x(tl,{}),x(il,{})],e.isStandalone()?(a.push(x(Kl,{})),a.push(x(Dn,{kind:"overview",leader:"G"})),a.push(x(In,{kind:"overview",leader:"G"}))):a.push(x(wu,{}))):o.startsWith("details.tests.coverage")?(i="details.tests.coverage",a=[x(hy,{active:!0}),x(Dn,{kind:"overview",leader:"J",get rows(){return[_u()]}}),x(In,{kind:"overview",leader:"J",get rows(){return[_u()]}}),x(el,{}),x(In,{kind:"side-view",leader:"G"}),x(Dn,{kind:"side-view",leader:"G"}),x(tl,{}),x(il,{}),x(wu,{})]):o.startsWith("details.tests")?(i="details.tests.tree",a=[x(el,{active:!0}),x(Dn,{kind:"overview",leader:"J",get rows(){return[_u()]}}),x(In,{kind:"overview",leader:"J",get rows(){return[_u()]}}),x(hy,{}),x(In,{kind:"side-view",leader:"G"}),x(Dn,{kind:"side-view",leader:"G"}),x(tl,{}),x(il,{})],e.isStandalone()?(a.push(x(Kl,{})),a.push(x(Dn,{kind:"overview",leader:"G"})),a.push(x(In,{kind:"overview",leader:"G"}))):a.push(x(wu,{}))):o.startsWith("details.coverage")?(i="details.coverage",a=[x(tl,{active:!0}),x(Dn,{kind:"side-view",leader:"G"}),x(In,{kind:"side-view",leader:"G"}),x(el,{}),x(il,{})],e.isStandalone()?(a.push(x(Kl,{})),a.push(x(Dn,{kind:"overview",leader:"G"})),a.push(x(In,{kind:"overview",leader:"G"}))):a.push(x(wu,{}))):o.startsWith("details.status")?(i="details.status",a=[x(il,{active:!0}),x(Dn,{kind:"side-view",leader:"G"}),x(In,{kind:"side-view",leader:"G"}),x(el,{}),x(tl,{})],e.isStandalone()?(a.push(x(Kl,{})),a.push(x(Dn,{kind:"overview",leader:"G"})),a.push(x(In,{kind:"overview",leader:"G"}))):a.push(x(wu,{}))):o.startsWith("quokka.output.main")?(i="quokka.output.main",a=[x(Dn,{active:!0,kind:"overview",leader:"G"}),x(In,{kind:"overview",leader:"G"})]):o.startsWith("quokka.output.logs")&&(i="quokka.output.logs",a=[x(In,{active:!0,kind:"overview",leader:"G"}),x(Dn,{kind:"overview",leader:"G"})]),i?(r(a),n.keyboard.onFocus("shortcuts",!0),queueMicrotask(()=>pEe(t))):e.closeShortcuts()}}),Ot(()=>{i&&(n.keyboard.onFocus(i,!0),r([]),i=void 0)}),$e(n.keyboard.focusedNamespace,o=>{o&&o=="shortcuts"&&t.focus()}),$e(n.keyboard.key,o=>{if(o){const a=o.event;if(o.namespace==="shortcuts"){if((a.key==="Escape"||a.key==="q")&&e.closeShortcuts(),a.key===" "&&!rt(a)||a.key==="ArrowDown"){const c=t.parentElement;c&&c.scrollBy(0,c.clientHeight)}if(a.key===" "&&a.shiftKey||a.key==="ArrowUp"){const c=t.parentElement;c&&c.scrollBy(0,-c.clientHeight)}a.preventDefault(),a.stopPropagation()}}},{defer:!0}),[(()=>{var o=HMe(),a=o.firstChild;o.$$mousedown=c=>{e.closeShortcuts(),c.preventDefault(),c.stopPropagation()};var l=t;return typeof l=="function"?We(l,a):t=a,A(a,x(ln,{get each(){return s()},children:c=>(()=>{var d=YMe();return A(d,c),d})()})),o})(),UMe()]}function Dn(n){const e=Dt();return(()=>{var t=iEe(),i=t.firstChild,s=i.firstChild,r=s.firstChild,o=r.nextSibling;o.nextSibling;var a=s.nextSibling,l=a.firstChild,c=l.nextSibling,d=c.nextSibling,u=i.nextSibling,h=u.nextSibling,f=h.firstChild,g=f.nextSibling,m=g.firstChild,p=h.nextSibling,b=p.nextSibling,w=b.nextSibling,v=w.nextSibling;return A(s,()=>n.leader==="G"?"Go":"Jump",r),A(s,()=>e.isStandalone()?n.leader==="G"?n.kind==="overview"?"Overview's ":"Side view's ":"Tests' ":" ",o),A(s,()=>e.isIntegratedQuokkaOutput()?"Main":"Errors",o),A(s,()=>n.kind==="overview"?"panel":"tab",null),A(l,()=>n.leader),A(a,x(se,{get when(){return e.isStandalone()&&n.leader==="G"},get children(){return[(()=>{var _=Mte();return A(_,()=>n.kind==="overview"?"O":"S"),_})(),b0()]}}),d),A(d,()=>e.isIntegratedQuokkaOutput()?"M":"E"),A(m,Hr),A(t,x(se,{get when(){return!e.isIntegratedQuokkaOutput()},get children(){return[KMe(),jMe()]}}),p),A(t,x(se,{get when(){return!e.isIntegratedQuokkaOutput()},get children(){return[JMe(),$Me(),QMe(),qMe(),eEe(),(()=>{var _=tEe(),y=_.firstChild;return A(y,()=>n.kind==="overview"?"Open error in side view":"Select/Deselect error"),_})()]}}),v),A(t,x(ln,{get each(){return n.rows||[]},children:_=>_}),v),Me(()=>t.classList.toggle("active",!!n.active)),t})()}function In(n){const e=Dt();return(()=>{var t=sEe(),i=t.firstChild,s=i.firstChild,r=s.firstChild,o=r.nextSibling;o.nextSibling;var a=s.nextSibling,l=a.firstChild,c=l.nextSibling,d=c.nextSibling,u=i.nextSibling,h=u.nextSibling,f=h.firstChild,g=f.nextSibling,m=g.firstChild,p=m.nextSibling,b=p.nextSibling,w=b.nextSibling,v=w.nextSibling,_=h.nextSibling,y=_.firstChild,C=y.nextSibling,S=C.firstChild,k=_.nextSibling,I=k.nextSibling,T=I.nextSibling,D=T.nextSibling,M=D.nextSibling,E=M.nextSibling,W=E.nextSibling,P=W.nextSibling,N=P.nextSibling,H=N.nextSibling,U=H.nextSibling,B=U.nextSibling,Y=B.nextSibling,ne=Y.firstChild,ee=ne.nextSibling,$=ee.firstChild,ge=$.nextSibling,Ie=ge.nextSibling,xe=Ie.nextSibling,z=xe.nextSibling;return A(s,()=>n.leader==="G"?"Go":"Jump",r),A(s,()=>e.isStandalone()?n.leader==="G"?n.kind==="overview"?"Overview's ":"Side view's ":"Tests' ":" ",o),A(s,()=>n.kind==="overview"?"panel":"tab",null),A(l,()=>n.leader),A(a,x(se,{get when(){return e.isStandalone()&&n.leader==="G"},get children(){return[(()=>{var K=Mte();return A(K,()=>n.kind==="overview"?"O":"S"),K})(),b0()]}}),d),A(m,Hr),A(v,Hr),A(S,Hr),A(t,x(se,{get when(){return!e.isIntegratedQuokkaOutput()},get children(){return nEe()}}),B),A(t,x(ln,{get each(){return n.rows||[]},children:K=>K}),B),A(z,Hr),Me(()=>t.classList.toggle("active",!!n.active)),t})()}function Kl(n){const e=Dt();return(()=>{var t=lEe(),i=t.firstChild,s=i.firstChild,r=s.firstChild,o=r.nextSibling;o.nextSibling;var a=s.nextSibling,l=a.firstChild,c=l.nextSibling,d=c.nextSibling,u=i.nextSibling,h=u.nextSibling,f=h.firstChild,g=f.nextSibling,m=g.firstChild,p=m.nextSibling,b=p.nextSibling,w=b.nextSibling,v=w.nextSibling,_=h.nextSibling,y=_.nextSibling,C=y.nextSibling,S=C.nextSibling,k=S.nextSibling,I=k.nextSibling,T=I.nextSibling,D=T.nextSibling,M=D.nextSibling;return A(s,()=>e.isStandalone()?" Overview's ":" ",o),A(a,x(se,{get when(){return e.isStandalone()},get children(){return[rEe(),b0()]}}),d),A(m,Hr),A(v,Hr),A(t,x(se,{get when(){return e.isIntegratedOverview()},get children(){var E=oEe(),W=E.firstChild,P=W.nextSibling,N=P.firstChild;return A(N,Hr),E}}),_),A(t,x(se,{get when(){return e.isIntegratedOverview()},get children(){return[aEe(),Ete()]}}),M),Me(()=>t.classList.toggle("active",!!n.active)),t})()}function y5(n){return(()=>{var e=cEe();return Me(()=>e.classList.toggle("active",!!n.active)),e})()}function el(n){const e=Dt();return(()=>{var t=dEe(),i=t.firstChild,s=i.firstChild,r=s.firstChild,o=r.nextSibling;o.nextSibling;var a=s.nextSibling,l=a.firstChild,c=l.nextSibling,d=c.nextSibling,u=i.nextSibling,h=u.nextSibling,f=h.firstChild,g=f.nextSibling,m=g.firstChild,p=m.nextSibling,b=p.nextSibling,w=b.nextSibling,v=w.nextSibling,_=h.nextSibling,y=_.firstChild,C=y.nextSibling,S=C.firstChild,k=_.nextSibling,I=k.nextSibling,T=I.nextSibling,D=T.nextSibling,M=D.nextSibling,E=M.nextSibling,W=E.nextSibling,P=W.nextSibling,N=P.nextSibling,H=N.nextSibling,U=H.nextSibling;return A(s,()=>e.isStandalone()?" Side view's ":" ",o),A(a,x(se,{get when(){return e.isStandalone()},get children(){return[pV(),b0()]}}),d),A(m,Hr),A(v,Hr),A(S,Hr),A(t,x(se,{get when(){return e.isIntegratedSideView()},get children(){return Ete()}}),U),Me(()=>t.classList.toggle("active",!!n.active)),t})()}function hy(n){const e=Dt();return(()=>{var t=uEe(),i=t.firstChild,s=i.firstChild,r=s.firstChild,o=r.nextSibling;return o.nextSibling,A(s,()=>e.isStandalone()?"Tests' ":"",o),Me(()=>t.classList.toggle("active",!!n.active)),t})()}function tl(n){const e=Dt();return(()=>{var t=hEe(),i=t.firstChild,s=i.firstChild,r=s.firstChild,o=r.nextSibling;o.nextSibling;var a=s.nextSibling,l=a.firstChild,c=l.nextSibling,d=c.nextSibling;return A(s,()=>e.isStandalone()?" Side view's ":" ",o),A(a,x(se,{get when(){return e.isStandalone()},get children(){return[pV(),b0()]}}),d),Me(()=>t.classList.toggle("active",!!n.active)),t})()}function il(n){const e=Dt();return(()=>{var t=fEe(),i=t.firstChild,s=i.firstChild,r=s.firstChild,o=r.nextSibling;o.nextSibling;var a=s.nextSibling,l=a.firstChild,c=l.nextSibling,d=c.nextSibling;return A(s,()=>e.isStandalone()?" Side view's ":" ",o),A(a,x(se,{get when(){return e.isStandalone()},get children(){return[pV(),b0()]}}),d),Me(()=>t.classList.toggle("active",!!n.active)),t})()}function wu(n){return(()=>{var e=gEe();return Me(()=>e.classList.toggle("active",!!n.active)),e})()}function pEe(n){for(const e of n.children){const t=parseInt(window.getComputedStyle(n).getPropertyValue("grid-auto-rows")),i=parseInt(window.getComputedStyle(n).getPropertyValue("grid-row-gap")),s=Math.ceil((e.firstElementChild.getBoundingClientRect().height+i)/(t+i));e.style.gridRowEnd="span "+s}}dn(["mousedown"]);const Bz={OutputLogItems:"output.logItems",OutputLogItemDetails:"output.logItemDetails"};function bEe(){return{panels:{"output.logItems":{size:40},"output.logItemDetails":{size:60}},list:{autoScroll:!1},details:{}}}const vEe="1.0.0";var Y9=(n=>(n.fileChange="fileChange",n.forceClear="forceClear",n.log="log",n.error="error",n))(Y9||{});const _Ee=["","active","pastDue","paused","deleted"];new Set(_Ee);function wEe(){const n=new Map;return[new Proxy({},{get:function(e,t){return function(i){let s=n.get(t);return s?s.push(i):(s=[i],n.set(t,s)),new Fo(()=>{let r=s.indexOf(i);for(;r>=0;)s.splice(r,1),r=s.indexOf(i)})}}}),new Proxy({},{get:function(e,t){return async(...i)=>{n.get(`on${t.charAt(0).toUpperCase()}${t.slice(1)}`)?.forEach(s=>{try{s(...i)}catch(r){console.error(r)}})}}})]}async function yEe(n,e,t,i,s){const r=new Fo;let o,a;const l=await new Promise(c=>{try{const d=new MQ({version:vEe,isSecure:n,host:e||"localhost",port:t,secret:i,clientType:"app",onSocketError(u){console.log("Socket error",u)},onClose(){s?.onClose?.(),c(void 0)},onSocketClosedDueToError(){s?.onCloseDueToError?.(),c(void 0)}},u=>{const[h,f]=wEe();return a=h,c({dispose:()=>d?.dispose(),instance:u}),f})}catch(d){console.error(d)}});if(!l)throw new Error("Connection error");return r.add(l),o=l.instance.api,{disposable:r,appToHost:o,hostToApp:a}}async function SEe(n,e,t,i,s){return await yEe(i,n,e,t,s)}let S5;class Nte{constructor(e,t){this._state=e,this._setState=t;const[i,s]=O1(bEe());this._settingsState=i,this._setSettingsState=s;const r=this;this._doSetSettingsState=function(){try{return r._setSettingsState.apply(this,arguments)}finally{const o=IQ(r._settingsState,...arguments);r._appToHost.updateAppSettings(o)}},this._updateSettingsDebounced=yg(o=>this._appToHost?.updateAppSettings(o),1e3),this._disposable=new Fo,this._setState(Gt(o=>{o.connecting=!0,o.logEntries=[],o.logEntryMap={}})),this.connect().then(()=>this._onConnected())}_disposable;_settingsState;_setSettingsState;_doSetSettingsState;_updateSettingsDebounced;_reconnectTimeout;_appToHost;_hostToApp;appSettings(){return[this._settingsState,this._doSetSettingsState]}getPanelState(e,t){return J(()=>this._getPanelState(e,t))}_getPanelState(e,t){return this._settingsState.panels?.[e]||t||{}}setPanelState(e,t){const{size:i,collapsed:s}=this._getPanelState(e),r={panels:{...this._settingsState.panels,[e]:t(this._settingsState.panels?.[e]||{})}};this._setSettingsState({...this._settingsState,...r});const{size:o,collapsed:a}=this._getPanelState(e);(s!==a||i!==o)&&this._updateSettingsDebounced(r)}async highlight(e,t){const i=e.endsWith(".vue")?"vue":e.endsWith(".svelte")?"svelte":"typescript",s=i==="vue"||i==="svelte"?75:3,r=await this._appToHost.extractFileFragment(Wge(e),{line:t,frame:s});if(r&&r.lines.length>0)return S5||(S5=(await Oa(()=>Promise.resolve().then(()=>tx),void 0,import.meta.url)).highlight),await S5(i,r,i==="vue"||i==="svelte"?3:void 0)}getFindState(){throw new Error("Method not implemented.")}focus(e){throw new Error("Method not implemented.")}closeFind(){throw new Error("Method not implemented.")}showFind(e){throw new Error("Method not implemented.")}restart(){throw new Error("Method not implemented.")}featureUsed(e){this._appToHost.featureUsed(e)}closeShortcuts(){throw new Error("Method not implemented.")}showShortcuts(e,t){throw new Error("Method not implemented.")}isStandalone(){return!1}isIntegratedOverview(){return!1}isIntegratedSideView(){return!1}isEditorConnected(){return!0}isEditorConnectedWithNoPreferences(){return!1}isIntegratedNinja(){return!0}isIntegratedVSCode(){return!0}isIntegratedIntelliJ(){return!1}isIntegratedQuokkaOutput(){return!1}navigate(e,t,i){this._appToHost.navigate(e,i)}editorTooltipAddendum(e){return J(()=>"")}async getLocationByTraceFrame(e){}isAiAvailable(){return J(()=>!!this._state.aiAvailable)}clearListSelection(){this._setState("selection",void 0)}selectLogEntry(e,t){this._setState(Gt(i=>{if(i.selection||(i.selection={entries:{},latest:e}),t.ctrlKey||t.metaKey){i.selection.entries[e]?(delete i.selection.entries[e],Object.keys(i.selection.entries).length===0&&(i.selection=void 0)):(i.selection.entries[e]=!0,i.selection.latest=e);return}else if(t.shiftKey){const s=this._state.logEntries.map(u=>u.log?.id||u.error?.id).filter(u=>!!u),r=Object.keys(i.selection?.entries||{}).map(u=>parseInt(u,10));if(r.length===0){i.selection.entries[e]=!0,i.selection.latest=e;return}const o=r[r.length-1],a=s.indexOf(o),l=s.indexOf(e);if(a===-1||l===-1){i.selection.entries[e]=!0,i.selection.latest=e;return}const[c,d]=a<l?[a,l]:[l,a];for(let u=c;u<=d;u++)i.selection.entries[s[u]]=!0;i.selection.latest=e;return}i.selection={entries:{},latest:e},i.selection.entries[e]=!0}))}loadLogEntryDetails(e){e&&(e=e.map(t=>this._state.logEntryMap[t]).sort((t,i)=>this._getTs(t)-this._getTs(i)||(t.log&&i.log?t.log.id-i.log.id:0)).map(t=>t.log?t.log.id:t.error?t.error.id:0)),this._appToHost.logEntryDetails(e).then(t=>{this._setState(Gt(i=>{i.details={entries:[]};for(const s of t){const r=Nge(s.tokens);i.details.entries.push({tokens:r,entry:i.logEntryMap[s.id]})}}))})}_getTs(e){return e.log?e.log.ts:e.error?e.error.ts:0}changeDateDisplayMode(){this._appToHost.changeDateDisplayMode()}dispose(){this._setState("stopped",!0),clearTimeout(this._reconnectTimeout),this._disposable.dispose()}async connect(){let e=!1,t,i;const s=()=>{this._state.stopped||(this._setState("disconnected",!0),e=!0,i&&i(),this._state.restarting||(this._disposable.dispose(),this._disposable=new Fo,this._setState("connecting",!0),clearTimeout(this._reconnectTimeout),this._reconnectTimeout=setTimeout(()=>{this.connect().then(()=>{this._state.disconnected||this._onConnected()})},1e3)))},{disposable:r,appToHost:o,hostToApp:a}=await SEe(this._state.network?.host,this._state.network?.port,this._state.network?.secret,this._state.network?.isSecure,{onClose:()=>s(),onCloseDueToError:()=>s()});if(e)return;const l=new Promise((d,u)=>{t=d,i=u});let c;o.handshake({kind:this._state.kind}).then(d=>{c=d,t()}).catch(()=>i());try{await Promise.race([l,new Promise((d,u)=>setTimeout(()=>u(new Error("Handshake timeout")),12e4))])}catch{console.error("Handshake failed");return}e||!c||(c.editor.type==="vscode"&&(this._setFontSize(c.editor.settings?.["wallaby.fontSize"]),await x_(c.editor,this._state.kind==="standalone"),document.body.getAttribute("data-vscode-theme-id")&&document.body.getAttribute("data-vscode-theme-id")!==c.editor.theme?.name&&o.themeChanged(document.body.getAttribute("data-vscode-theme-id")),new MutationObserver(u=>{u.forEach(h=>{h.type==="attributes"&&h.attributeName==="data-vscode-theme-id"&&o.themeChanged(document.body.getAttribute("data-vscode-theme-id"))})}).observe(document.body,{attributes:!0,attributeFilter:["data-vscode-theme-id"]})),this._setState(Gt(d=>{d.editor=c.editor.type,d.aiAvailable=c.editor.aiAvailable,d.cwd=c.cwd,c.config&&this.onConfigChange(c.config)})),this._setSettingsState(d=>({...d,...c.settings})),this._disposable.add(a.onPreferences(async d=>{this._state.editor==="vscode"&&(await x_(d),this._setFontSize(d.settings?.["wallaby.fontSize"]))})),this._disposable.add(r),this._appToHost=o,this._hostToApp=a,this._setState(Gt(d=>{delete d.disconnected,d.connecting=!1})))}onLogsAvailable(e){this._setState(Gt(t=>{for(const i of e.entries){const s={log:i};t.logEntries.push(s),t.logEntryMap[i.id]=s}}))}onErrorsAvailable(e){this._setState(Gt(t=>{for(const i of e.entries){const s={error:i};t.logEntries.push(s),t.logEntryMap[i.id]=s}}))}onReloadLogEntries(){this._reloadLogEntries()}onConfigChange(e){this._setState("config",At(e)),this._state.dateTimeFormat||this._setState("dateTimeFormat",{dateTimeDisplayMode:e.dateTimeDisplayMode,dateTimeFormat:e.dateTimeFormat,simpleDateTimeDisplayMode:!e.enableProFeatures})}onDateTimeFormatChange(e){this._setState("dateTimeFormat",At(e))}async _reloadLogEntries(){const e=await this._appToHost.logViewerEntries(),t=[],i={};for(const s of e)if(s.type===Y9.log){const r={log:s.log};t.push(r),i[s.log.id]=r}else if(s.type===Y9.error){const r={error:s.error};t.push(r),i[s.error.id]=r}this._setState("logEntries",At(t)),this._setState("logEntryMap",At(i))}async _onConnected(){await this._reloadLogEntries(),this._disposable.add(this._hostToApp.onLogs(this.onLogsAvailable.bind(this))),this._disposable.add(this._hostToApp.onErrors(this.onErrorsAvailable.bind(this))),this._disposable.add(this._hostToApp.onReloadLogEntries(this.onReloadLogEntries.bind(this))),this._disposable.add(this._hostToApp.onConfig(this.onConfigChange.bind(this))),this._disposable.add(this._hostToApp.onDateTimeFormat(this.onDateTimeFormatChange.bind(this)))}_setFontSize(e){const t=e?parseFloat(e):void 0;t&&!isNaN(t)&&t>0&&this._setState("fontSize",t)}static Provider}const[CEe,f2]=Go(n=>n.initial);Nte.Provider=CEe;function Rte(n){if(n===void 0)return;const e=kQ(n.source);if(e!==void 0)return{file:e,line:n.line}}let LEe=typeof document<"u"&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function Wte(n,e){let t;return e.length===0?t=n:t=n.replace(/\{(\d+)\}/g,(i,s)=>{const r=s[0],o=e[r];let a=i;return typeof o=="string"?a=o:(typeof o=="number"||typeof o=="boolean"||o===void 0||o===null)&&(a=String(o)),a}),LEe&&(t=""+t.replace(/[aouei]/g,"$&$&")+""),t}function L(n,e,...t){return Wte(e,t)}function cw(n,e,...t){const i=Wte(e,t);return{value:i,original:i}}function kEe(n,e){const t=n;typeof t.vscodeWindowId!="number"&&Object.defineProperty(t,"vscodeWindowId",{get:()=>e})}const Di=window;class K9{constructor(){this.mapWindowIdToZoomFactor=new Map}getZoomFactor(e){var t;return(t=this.mapWindowIdToZoomFactor.get(this.getWindowId(e)))!==null&&t!==void 0?t:1}getWindowId(e){return e.vscodeWindowId}}K9.INSTANCE=new K9;function Ate(n,e,t){typeof e=="string"&&(e=n.matchMedia(e)),e.addEventListener("change",t)}function xEe(n){return K9.INSTANCE.getZoomFactor(n)}const v0=navigator.userAgent,ua=v0.indexOf("Firefox")>=0,rg=v0.indexOf("AppleWebKit")>=0,dw=v0.indexOf("Chrome")>=0,$d=!dw&&v0.indexOf("Safari")>=0,Fte=!dw&&!$d&&rg;v0.indexOf("Electron/")>=0;const Xz=v0.indexOf("Android")>=0;let RS=!1;if(typeof Di.matchMedia=="function"){const n=Di.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),e=Di.matchMedia("(display-mode: fullscreen)");RS=n.matches,Ate(Di,n,({matches:t})=>{RS&&e.matches||(RS=t)})}function TEe(){return RS}function Dr(n){return typeof n=="string"}function Ha(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)&&!(n instanceof RegExp)&&!(n instanceof Date)}function DEe(n){const e=Object.getPrototypeOf(Uint8Array);return typeof n=="object"&&n instanceof e}function Rh(n){return typeof n=="number"&&!isNaN(n)}function zz(n){return!!n&&typeof n[Symbol.iterator]=="function"}function Vte(n){return n===!0||n===!1}function lo(n){return typeof n>"u"}function _b(n){return!xo(n)}function xo(n){return lo(n)||n===null}function Jr(n,e){if(!n)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}function HC(n){if(xo(n))throw new Error("Assertion Failed: argument is undefined or null");return n}function UC(n){return typeof n=="function"}function IEe(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)MEe(n[i],e[i])}function MEe(n,e){if(Dr(e)){if(typeof n!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(UC(e)){try{if(n instanceof e)return}catch{}if(!xo(n)&&n.constructor===e||e.length===1&&e.call(void 0,n)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}var C5,L5;const ip="en";let YC=!1,KC=!1,WS=!1,Pte=!1,bV=!1,vV=!1,Ote=!1,fy,k5=ip,Hz=ip,EEe,al;const Pd=globalThis;let _r;typeof Pd.vscode<"u"&&typeof Pd.vscode.process<"u"?_r=Pd.vscode.process:typeof process<"u"&&typeof((C5=process==null?void 0:process.versions)===null||C5===void 0?void 0:C5.node)=="string"&&(_r=process);const NEe=typeof((L5=_r?.versions)===null||L5===void 0?void 0:L5.electron)=="string",REe=NEe&&_r?.type==="renderer";if(typeof _r=="object"){YC=_r.platform==="win32",KC=_r.platform==="darwin",WS=_r.platform==="linux",WS&&_r.env.SNAP&&_r.env.SNAP_REVISION,_r.env.CI||_r.env.BUILD_ARTIFACTSTAGINGDIRECTORY,fy=ip,k5=ip;const n=_r.env.VSCODE_NLS_CONFIG;if(n)try{const e=JSON.parse(n),t=e.availableLanguages["*"];fy=e.locale,Hz=e.osLocale,k5=t||ip,EEe=e._translationsConfigFile}catch{}Pte=!0}else typeof navigator=="object"&&!REe?(al=navigator.userAgent,YC=al.indexOf("Windows")>=0,KC=al.indexOf("Macintosh")>=0,vV=(al.indexOf("Macintosh")>=0||al.indexOf("iPad")>=0||al.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,WS=al.indexOf("Linux")>=0,Ote=al?.indexOf("Mobi")>=0,bV=!0,L({key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_"),fy=ip,k5=fy,Hz=navigator.language):console.error("Unable to resolve platform.");const Mr=YC,jt=KC,Er=WS,kl=Pte,rf=bV,WEe=bV&&typeof Pd.importScripts=="function",AEe=WEe?Pd.origin:void 0,Lg=vV,Zte=Ote,Ac=al,FEe=typeof Pd.postMessage=="function"&&!Pd.importScripts,Gte=(()=>{if(FEe){const n=[];Pd.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let i=0,s=n.length;i<s;i++){const r=n[i];if(r.id===t.data.vscodeScheduleAsyncWork){n.splice(i,1),r.callback();return}}});let e=0;return t=>{const i=++e;n.push({id:i,callback:t}),Pd.postMessage({vscodeScheduleAsyncWork:i},"*")}}return n=>setTimeout(n)})(),Ma=KC||vV?2:YC?1:3;let Uz=!0,Yz=!1;function Bte(){if(!Yz){Yz=!0;const n=new Uint8Array(2);n[0]=1,n[1]=2,Uz=new Uint16Array(n.buffer)[0]===513}return Uz}const Xte=!!(Ac&&Ac.indexOf("Chrome")>=0),VEe=!!(Ac&&Ac.indexOf("Firefox")>=0),PEe=!!(!Xte&&Ac&&Ac.indexOf("Safari")>=0),OEe=!!(Ac&&Ac.indexOf("Edg/")>=0),ZEe=!!(Ac&&Ac.indexOf("Android")>=0),zte={clipboard:{writeText:kl||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:kl||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:kl||TEe()?0:navigator.keyboard||$d?1:2,touch:"ontouchstart"in Di||navigator.maxTouchPoints>0,pointerEvents:Di.PointerEvent&&("ontouchstart"in Di||navigator.maxTouchPoints>0)};class _V{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const AS=new _V,j9=new _V,J9=new _V,Hte=new Array(230),GEe=Object.create(null),BEe=Object.create(null),wV=[];for(let n=0;n<=193;n++)wV[n]=-1;(function(){const n="",e=[[1,0,"None",0,"unknown",0,"VK_UNKNOWN",n,n],[1,1,"Hyper",0,n,0,n,n,n],[1,2,"Super",0,n,0,n,n,n],[1,3,"Fn",0,n,0,n,n,n],[1,4,"FnLock",0,n,0,n,n,n],[1,5,"Suspend",0,n,0,n,n,n],[1,6,"Resume",0,n,0,n,n,n],[1,7,"Turbo",0,n,0,n,n,n],[1,8,"Sleep",0,n,0,"VK_SLEEP",n,n],[1,9,"WakeUp",0,n,0,n,n,n],[0,10,"KeyA",31,"A",65,"VK_A",n,n],[0,11,"KeyB",32,"B",66,"VK_B",n,n],[0,12,"KeyC",33,"C",67,"VK_C",n,n],[0,13,"KeyD",34,"D",68,"VK_D",n,n],[0,14,"KeyE",35,"E",69,"VK_E",n,n],[0,15,"KeyF",36,"F",70,"VK_F",n,n],[0,16,"KeyG",37,"G",71,"VK_G",n,n],[0,17,"KeyH",38,"H",72,"VK_H",n,n],[0,18,"KeyI",39,"I",73,"VK_I",n,n],[0,19,"KeyJ",40,"J",74,"VK_J",n,n],[0,20,"KeyK",41,"K",75,"VK_K",n,n],[0,21,"KeyL",42,"L",76,"VK_L",n,n],[0,22,"KeyM",43,"M",77,"VK_M",n,n],[0,23,"KeyN",44,"N",78,"VK_N",n,n],[0,24,"KeyO",45,"O",79,"VK_O",n,n],[0,25,"KeyP",46,"P",80,"VK_P",n,n],[0,26,"KeyQ",47,"Q",81,"VK_Q",n,n],[0,27,"KeyR",48,"R",82,"VK_R",n,n],[0,28,"KeyS",49,"S",83,"VK_S",n,n],[0,29,"KeyT",50,"T",84,"VK_T",n,n],[0,30,"KeyU",51,"U",85,"VK_U",n,n],[0,31,"KeyV",52,"V",86,"VK_V",n,n],[0,32,"KeyW",53,"W",87,"VK_W",n,n],[0,33,"KeyX",54,"X",88,"VK_X",n,n],[0,34,"KeyY",55,"Y",89,"VK_Y",n,n],[0,35,"KeyZ",56,"Z",90,"VK_Z",n,n],[0,36,"Digit1",22,"1",49,"VK_1",n,n],[0,37,"Digit2",23,"2",50,"VK_2",n,n],[0,38,"Digit3",24,"3",51,"VK_3",n,n],[0,39,"Digit4",25,"4",52,"VK_4",n,n],[0,40,"Digit5",26,"5",53,"VK_5",n,n],[0,41,"Digit6",27,"6",54,"VK_6",n,n],[0,42,"Digit7",28,"7",55,"VK_7",n,n],[0,43,"Digit8",29,"8",56,"VK_8",n,n],[0,44,"Digit9",30,"9",57,"VK_9",n,n],[0,45,"Digit0",21,"0",48,"VK_0",n,n],[1,46,"Enter",3,"Enter",13,"VK_RETURN",n,n],[1,47,"Escape",9,"Escape",27,"VK_ESCAPE",n,n],[1,48,"Backspace",1,"Backspace",8,"VK_BACK",n,n],[1,49,"Tab",2,"Tab",9,"VK_TAB",n,n],[1,50,"Space",10,"Space",32,"VK_SPACE",n,n],[0,51,"Minus",88,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[0,52,"Equal",86,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[0,53,"BracketLeft",92,"[",219,"VK_OEM_4","[","OEM_4"],[0,54,"BracketRight",94,"]",221,"VK_OEM_6","]","OEM_6"],[0,55,"Backslash",93,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,56,"IntlHash",0,n,0,n,n,n],[0,57,"Semicolon",85,";",186,"VK_OEM_1",";","OEM_1"],[0,58,"Quote",95,"'",222,"VK_OEM_7","'","OEM_7"],[0,59,"Backquote",91,"`",192,"VK_OEM_3","`","OEM_3"],[0,60,"Comma",87,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[0,61,"Period",89,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[0,62,"Slash",90,"/",191,"VK_OEM_2","/","OEM_2"],[1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",n,n],[1,64,"F1",59,"F1",112,"VK_F1",n,n],[1,65,"F2",60,"F2",113,"VK_F2",n,n],[1,66,"F3",61,"F3",114,"VK_F3",n,n],[1,67,"F4",62,"F4",115,"VK_F4",n,n],[1,68,"F5",63,"F5",116,"VK_F5",n,n],[1,69,"F6",64,"F6",117,"VK_F6",n,n],[1,70,"F7",65,"F7",118,"VK_F7",n,n],[1,71,"F8",66,"F8",119,"VK_F8",n,n],[1,72,"F9",67,"F9",120,"VK_F9",n,n],[1,73,"F10",68,"F10",121,"VK_F10",n,n],[1,74,"F11",69,"F11",122,"VK_F11",n,n],[1,75,"F12",70,"F12",123,"VK_F12",n,n],[1,76,"PrintScreen",0,n,0,n,n,n],[1,77,"ScrollLock",84,"ScrollLock",145,"VK_SCROLL",n,n],[1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",n,n],[1,79,"Insert",19,"Insert",45,"VK_INSERT",n,n],[1,80,"Home",14,"Home",36,"VK_HOME",n,n],[1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",n,n],[1,82,"Delete",20,"Delete",46,"VK_DELETE",n,n],[1,83,"End",13,"End",35,"VK_END",n,n],[1,84,"PageDown",12,"PageDown",34,"VK_NEXT",n,n],[1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",n],[1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",n],[1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",n],[1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",n],[1,89,"NumLock",83,"NumLock",144,"VK_NUMLOCK",n,n],[1,90,"NumpadDivide",113,"NumPad_Divide",111,"VK_DIVIDE",n,n],[1,91,"NumpadMultiply",108,"NumPad_Multiply",106,"VK_MULTIPLY",n,n],[1,92,"NumpadSubtract",111,"NumPad_Subtract",109,"VK_SUBTRACT",n,n],[1,93,"NumpadAdd",109,"NumPad_Add",107,"VK_ADD",n,n],[1,94,"NumpadEnter",3,n,0,n,n,n],[1,95,"Numpad1",99,"NumPad1",97,"VK_NUMPAD1",n,n],[1,96,"Numpad2",100,"NumPad2",98,"VK_NUMPAD2",n,n],[1,97,"Numpad3",101,"NumPad3",99,"VK_NUMPAD3",n,n],[1,98,"Numpad4",102,"NumPad4",100,"VK_NUMPAD4",n,n],[1,99,"Numpad5",103,"NumPad5",101,"VK_NUMPAD5",n,n],[1,100,"Numpad6",104,"NumPad6",102,"VK_NUMPAD6",n,n],[1,101,"Numpad7",105,"NumPad7",103,"VK_NUMPAD7",n,n],[1,102,"Numpad8",106,"NumPad8",104,"VK_NUMPAD8",n,n],[1,103,"Numpad9",107,"NumPad9",105,"VK_NUMPAD9",n,n],[1,104,"Numpad0",98,"NumPad0",96,"VK_NUMPAD0",n,n],[1,105,"NumpadDecimal",112,"NumPad_Decimal",110,"VK_DECIMAL",n,n],[0,106,"IntlBackslash",97,"OEM_102",226,"VK_OEM_102",n,n],[1,107,"ContextMenu",58,"ContextMenu",93,n,n,n],[1,108,"Power",0,n,0,n,n,n],[1,109,"NumpadEqual",0,n,0,n,n,n],[1,110,"F13",71,"F13",124,"VK_F13",n,n],[1,111,"F14",72,"F14",125,"VK_F14",n,n],[1,112,"F15",73,"F15",126,"VK_F15",n,n],[1,113,"F16",74,"F16",127,"VK_F16",n,n],[1,114,"F17",75,"F17",128,"VK_F17",n,n],[1,115,"F18",76,"F18",129,"VK_F18",n,n],[1,116,"F19",77,"F19",130,"VK_F19",n,n],[1,117,"F20",78,"F20",131,"VK_F20",n,n],[1,118,"F21",79,"F21",132,"VK_F21",n,n],[1,119,"F22",80,"F22",133,"VK_F22",n,n],[1,120,"F23",81,"F23",134,"VK_F23",n,n],[1,121,"F24",82,"F24",135,"VK_F24",n,n],[1,122,"Open",0,n,0,n,n,n],[1,123,"Help",0,n,0,n,n,n],[1,124,"Select",0,n,0,n,n,n],[1,125,"Again",0,n,0,n,n,n],[1,126,"Undo",0,n,0,n,n,n],[1,127,"Cut",0,n,0,n,n,n],[1,128,"Copy",0,n,0,n,n,n],[1,129,"Paste",0,n,0,n,n,n],[1,130,"Find",0,n,0,n,n,n],[1,131,"AudioVolumeMute",117,"AudioVolumeMute",173,"VK_VOLUME_MUTE",n,n],[1,132,"AudioVolumeUp",118,"AudioVolumeUp",175,"VK_VOLUME_UP",n,n],[1,133,"AudioVolumeDown",119,"AudioVolumeDown",174,"VK_VOLUME_DOWN",n,n],[1,134,"NumpadComma",110,"NumPad_Separator",108,"VK_SEPARATOR",n,n],[0,135,"IntlRo",115,"ABNT_C1",193,"VK_ABNT_C1",n,n],[1,136,"KanaMode",0,n,0,n,n,n],[0,137,"IntlYen",0,n,0,n,n,n],[1,138,"Convert",0,n,0,n,n,n],[1,139,"NonConvert",0,n,0,n,n,n],[1,140,"Lang1",0,n,0,n,n,n],[1,141,"Lang2",0,n,0,n,n,n],[1,142,"Lang3",0,n,0,n,n,n],[1,143,"Lang4",0,n,0,n,n,n],[1,144,"Lang5",0,n,0,n,n,n],[1,145,"Abort",0,n,0,n,n,n],[1,146,"Props",0,n,0,n,n,n],[1,147,"NumpadParenLeft",0,n,0,n,n,n],[1,148,"NumpadParenRight",0,n,0,n,n,n],[1,149,"NumpadBackspace",0,n,0,n,n,n],[1,150,"NumpadMemoryStore",0,n,0,n,n,n],[1,151,"NumpadMemoryRecall",0,n,0,n,n,n],[1,152,"NumpadMemoryClear",0,n,0,n,n,n],[1,153,"NumpadMemoryAdd",0,n,0,n,n,n],[1,154,"NumpadMemorySubtract",0,n,0,n,n,n],[1,155,"NumpadClear",131,"Clear",12,"VK_CLEAR",n,n],[1,156,"NumpadClearEntry",0,n,0,n,n,n],[1,0,n,5,"Ctrl",17,"VK_CONTROL",n,n],[1,0,n,4,"Shift",16,"VK_SHIFT",n,n],[1,0,n,6,"Alt",18,"VK_MENU",n,n],[1,0,n,57,"Meta",91,"VK_COMMAND",n,n],[1,157,"ControlLeft",5,n,0,"VK_LCONTROL",n,n],[1,158,"ShiftLeft",4,n,0,"VK_LSHIFT",n,n],[1,159,"AltLeft",6,n,0,"VK_LMENU",n,n],[1,160,"MetaLeft",57,n,0,"VK_LWIN",n,n],[1,161,"ControlRight",5,n,0,"VK_RCONTROL",n,n],[1,162,"ShiftRight",4,n,0,"VK_RSHIFT",n,n],[1,163,"AltRight",6,n,0,"VK_RMENU",n,n],[1,164,"MetaRight",57,n,0,"VK_RWIN",n,n],[1,165,"BrightnessUp",0,n,0,n,n,n],[1,166,"BrightnessDown",0,n,0,n,n,n],[1,167,"MediaPlay",0,n,0,n,n,n],[1,168,"MediaRecord",0,n,0,n,n,n],[1,169,"MediaFastForward",0,n,0,n,n,n],[1,170,"MediaRewind",0,n,0,n,n,n],[1,171,"MediaTrackNext",124,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",n,n],[1,172,"MediaTrackPrevious",125,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",n,n],[1,173,"MediaStop",126,"MediaStop",178,"VK_MEDIA_STOP",n,n],[1,174,"Eject",0,n,0,n,n,n],[1,175,"MediaPlayPause",127,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",n,n],[1,176,"MediaSelect",128,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",n,n],[1,177,"LaunchMail",129,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",n,n],[1,178,"LaunchApp2",130,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",n,n],[1,179,"LaunchApp1",0,n,0,"VK_MEDIA_LAUNCH_APP1",n,n],[1,180,"SelectTask",0,n,0,n,n,n],[1,181,"LaunchScreenSaver",0,n,0,n,n,n],[1,182,"BrowserSearch",120,"BrowserSearch",170,"VK_BROWSER_SEARCH",n,n],[1,183,"BrowserHome",121,"BrowserHome",172,"VK_BROWSER_HOME",n,n],[1,184,"BrowserBack",122,"BrowserBack",166,"VK_BROWSER_BACK",n,n],[1,185,"BrowserForward",123,"BrowserForward",167,"VK_BROWSER_FORWARD",n,n],[1,186,"BrowserStop",0,n,0,"VK_BROWSER_STOP",n,n],[1,187,"BrowserRefresh",0,n,0,"VK_BROWSER_REFRESH",n,n],[1,188,"BrowserFavorites",0,n,0,"VK_BROWSER_FAVORITES",n,n],[1,189,"ZoomToggle",0,n,0,n,n,n],[1,190,"MailReply",0,n,0,n,n,n],[1,191,"MailForward",0,n,0,n,n,n],[1,192,"MailSend",0,n,0,n,n,n],[1,0,n,114,"KeyInComposition",229,n,n,n],[1,0,n,116,"ABNT_C2",194,"VK_ABNT_C2",n,n],[1,0,n,96,"OEM_8",223,"VK_OEM_8",n,n],[1,0,n,0,n,0,"VK_KANA",n,n],[1,0,n,0,n,0,"VK_HANGUL",n,n],[1,0,n,0,n,0,"VK_JUNJA",n,n],[1,0,n,0,n,0,"VK_FINAL",n,n],[1,0,n,0,n,0,"VK_HANJA",n,n],[1,0,n,0,n,0,"VK_KANJI",n,n],[1,0,n,0,n,0,"VK_CONVERT",n,n],[1,0,n,0,n,0,"VK_NONCONVERT",n,n],[1,0,n,0,n,0,"VK_ACCEPT",n,n],[1,0,n,0,n,0,"VK_MODECHANGE",n,n],[1,0,n,0,n,0,"VK_SELECT",n,n],[1,0,n,0,n,0,"VK_PRINT",n,n],[1,0,n,0,n,0,"VK_EXECUTE",n,n],[1,0,n,0,n,0,"VK_SNAPSHOT",n,n],[1,0,n,0,n,0,"VK_HELP",n,n],[1,0,n,0,n,0,"VK_APPS",n,n],[1,0,n,0,n,0,"VK_PROCESSKEY",n,n],[1,0,n,0,n,0,"VK_PACKET",n,n],[1,0,n,0,n,0,"VK_DBE_SBCSCHAR",n,n],[1,0,n,0,n,0,"VK_DBE_DBCSCHAR",n,n],[1,0,n,0,n,0,"VK_ATTN",n,n],[1,0,n,0,n,0,"VK_CRSEL",n,n],[1,0,n,0,n,0,"VK_EXSEL",n,n],[1,0,n,0,n,0,"VK_EREOF",n,n],[1,0,n,0,n,0,"VK_PLAY",n,n],[1,0,n,0,n,0,"VK_ZOOM",n,n],[1,0,n,0,n,0,"VK_NONAME",n,n],[1,0,n,0,n,0,"VK_PA1",n,n],[1,0,n,0,n,0,"VK_OEM_CLEAR",n,n]],t=[],i=[];for(const s of e){const[r,o,a,l,c,d,u,h,f]=s;if(i[o]||(i[o]=!0,GEe[a]=o,BEe[a.toLowerCase()]=o,r&&(wV[o]=l)),!t[l]){if(t[l]=!0,!c)throw new Error(`String representation missing for key code ${l} around scan code ${a}`);AS.define(l,c),j9.define(l,h||c),J9.define(l,f||h||c)}d&&(Hte[d]=l)}})();var fd;(function(n){function e(a){return AS.keyCodeToStr(a)}n.toString=e;function t(a){return AS.strToKeyCode(a)}n.fromString=t;function i(a){return j9.keyCodeToStr(a)}n.toUserSettingsUS=i;function s(a){return J9.keyCodeToStr(a)}n.toUserSettingsGeneral=s;function r(a){return j9.strToKeyCode(a)||J9.strToKeyCode(a)}n.fromUserSettings=r;function o(a){if(a>=98&&a<=113)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return AS.keyCodeToStr(a)}n.toElectronAccelerator=o})(fd||(fd={}));function Bo(n,e){const t=(e&65535)<<16>>>0;return(n|t)>>>0}class XEe{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?yb.isErrorNoTelemetry(e)?new yb(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}emit(e){this.listeners.forEach(t=>{t(e)})}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}const Ute=new XEe;function gi(n){_0(n)||Ute.onUnexpectedError(n)}function of(n){_0(n)||Ute.onUnexpectedExternalError(n)}function Kz(n){if(n instanceof Error){const{name:e,message:t}=n,i=n.stacktrace||n.stack;return{$isError:!0,name:e,message:t,stack:i,noTelemetry:yb.isErrorNoTelemetry(n)}}return n}const jC="Canceled";function _0(n){return n instanceof kg?!0:n instanceof Error&&n.name===jC&&n.message===jC}class kg extends Error{constructor(){super(jC),this.name=this.message}}function zEe(){const n=new Error(jC);return n.name=n.message,n}function wb(n){return n?new Error(`Illegal argument: ${n}`):new Error("Illegal argument")}function yV(n){return n?new Error(`Illegal state: ${n}`):new Error("Illegal state")}class HEe extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}}class yb extends Error{constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof yb)return e;const t=new yb;return t.message=e.message,t.stack=e.stack,t}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}}class Ai extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,Ai.prototype)}}function $9(n,e){if(typeof n=="number"){if(n===0)return null;const t=(n&65535)>>>0,i=(n&4294901760)>>>16;return i!==0?new x5([gy(t,e),gy(i,e)]):new x5([gy(t,e)])}else{const t=[];for(let i=0;i<n.length;i++)t.push(gy(n[i],e));return new x5(t)}}function gy(n,e){const t=!!(n&2048),i=!!(n&256),s=e===2?i:t,r=!!(n&1024),o=!!(n&512),a=e===2?t:i,l=n&255;return new xg(s,r,o,a,l)}class xg{constructor(e,t,i,s,r){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=s,this.keyCode=r}equals(e){return e instanceof xg&&this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}class x5{constructor(e){if(e.length===0)throw wb("chords");this.chords=e}}class UEe{constructor(e,t,i,s,r,o){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=s,this.keyLabel=r,this.keyAriaLabel=o}}class YEe{}function KEe(n){if(n.charCode){const t=String.fromCharCode(n.charCode).toUpperCase();return fd.fromString(t)}const e=n.keyCode;if(e===3)return 7;if(ua)switch(e){case 59:return 85;case 60:if(Er)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(jt)return 57;break}else if(rg){if(jt&&e===93)return 57;if(!jt&&e===92)return 57}return Hte[e]||0}const jEe=jt?256:2048,JEe=512,$Ee=1024,QEe=jt?2048:256;class Ji{constructor(e){var t;this._standardKeyboardEventBrand=!0;const i=e;this.browserEvent=i,this.target=i.target,this.ctrlKey=i.ctrlKey,this.shiftKey=i.shiftKey,this.altKey=i.altKey,this.metaKey=i.metaKey,this.altGraphKey=(t=i.getModifierState)===null||t===void 0?void 0:t.call(i,"AltGraph"),this.keyCode=KEe(i),this.code=i.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=jEe),this.altKey&&(t|=JEe),this.shiftKey&&(t|=$Ee),this.metaKey&&(t|=QEe),t|=e,t}_computeKeyCodeChord(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new xg(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}const jz=new WeakMap;function qEe(n){if(!n.parent||n.parent===n)return null;try{const e=n.location,t=n.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&e.origin!==t.origin)return null}catch{return null}return n.parent}class eNe{static getSameOriginWindowChain(e){let t=jz.get(e);if(!t){t=[],jz.set(e,t);let i=e,s;do s=qEe(i),s?t.push({window:new WeakRef(i),iframeElement:i.frameElement||null}):t.push({window:new WeakRef(i),iframeElement:null}),i=s;while(i)}return t.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){var i,s;if(!t||e===t)return{top:0,left:0};let r=0,o=0;const a=this.getSameOriginWindowChain(e);for(const l of a){const c=l.window.deref();if(r+=(i=c?.scrollY)!==null&&i!==void 0?i:0,o+=(s=c?.scrollX)!==null&&s!==void 0?s:0,c===t||!l.iframeElement)break;const d=l.iframeElement.getBoundingClientRect();r+=d.top,o+=d.left}return{top:r,left:o}}}class Sl{constructor(e,t){this.timestamp=Date.now(),this.browserEvent=t,this.leftButton=t.button===0,this.middleButton=t.button===1,this.rightButton=t.button===2,this.buttons=t.buttons,this.target=t.target,this.detail=t.detail||1,t.type==="dblclick"&&(this.detail=2),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,typeof t.pageX=="number"?(this.posx=t.pageX,this.posy=t.pageY):(this.posx=t.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=t.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);const i=eNe.getPositionOfChildWindowRelativeToAncestorWindow(e,t.view);this.posx-=i.left,this.posy-=i.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class Tg{constructor(e,t=0,i=0){var s;this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=i,this.deltaX=t;let r=!1;if(dw){const o=navigator.userAgent.match(/Chrome\/(\d+)/);r=(o?parseInt(o[1]):123)<=122}if(e){const o=e,a=e,l=((s=e.view)===null||s===void 0?void 0:s.devicePixelRatio)||1;if(typeof o.wheelDeltaY<"u")r?this.deltaY=o.wheelDeltaY/(120*l):this.deltaY=o.wheelDeltaY/120;else if(typeof a.VERTICAL_AXIS<"u"&&a.axis===a.VERTICAL_AXIS)this.deltaY=-a.detail/3;else if(e.type==="wheel"){const c=e;c.deltaMode===c.DOM_DELTA_LINE?ua&&!jt?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof o.wheelDeltaX<"u")$d&&Mr?this.deltaX=-(o.wheelDeltaX/120):r?this.deltaX=o.wheelDeltaX/(120*l):this.deltaX=o.wheelDeltaX/120;else if(typeof a.HORIZONTAL_AXIS<"u"&&a.axis===a.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){const c=e;c.deltaMode===c.DOM_DELTA_LINE?ua&&!jt?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(r?this.deltaY=e.wheelDelta/(120*l):this.deltaY=e.wheelDelta/120)}}preventDefault(){var e;(e=this.browserEvent)===null||e===void 0||e.preventDefault()}stopPropagation(){var e;(e=this.browserEvent)===null||e===void 0||e.stopPropagation()}}function Sb(n,e){const t=this;let i=!1,s;return function(){if(i)return s;if(i=!0,e)try{s=n.apply(t,arguments)}finally{e()}else s=n.apply(t,arguments);return s}}var ci;(function(n){function e(v){return v&&typeof v=="object"&&typeof v[Symbol.iterator]=="function"}n.is=e;const t=Object.freeze([]);function i(){return t}n.empty=i;function*s(v){yield v}n.single=s;function r(v){return e(v)?v:s(v)}n.wrap=r;function o(v){return v||t}n.from=o;function*a(v){for(let _=v.length-1;_>=0;_--)yield v[_]}n.reverse=a;function l(v){return!v||v[Symbol.iterator]().next().done===!0}n.isEmpty=l;function c(v){return v[Symbol.iterator]().next().value}n.first=c;function d(v,_){for(const y of v)if(_(y))return!0;return!1}n.some=d;function u(v,_){for(const y of v)if(_(y))return y}n.find=u;function*h(v,_){for(const y of v)_(y)&&(yield y)}n.filter=h;function*f(v,_){let y=0;for(const C of v)yield _(C,y++)}n.map=f;function*g(...v){for(const _ of v)yield*_}n.concat=g;function m(v,_,y){let C=y;for(const S of v)C=_(C,S);return C}n.reduce=m;function*p(v,_,y=v.length){for(_<0&&(_+=v.length),y<0?y+=v.length:y>v.length&&(y=v.length);_<y;_++)yield v[_]}n.slice=p;function b(v,_=Number.POSITIVE_INFINITY){const y=[];if(_===0)return[y,v];const C=v[Symbol.iterator]();for(let S=0;S<_;S++){const k=C.next();if(k.done)return[y,n.empty()];y.push(k.value)}return[y,{[Symbol.iterator](){return C}}]}n.consume=b;async function w(v){const _=[];for await(const y of v)_.push(y);return Promise.resolve(_)}n.asyncToArray=w})(ci||(ci={}));function SV(n){return typeof n=="object"&&n!==null&&typeof n.dispose=="function"&&n.dispose.length===0}function Ns(n){if(ci.is(n)){const e=[];for(const t of n)if(t)try{t.dispose()}catch(i){e.push(i)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(n)?[]:n}else if(n)return n.dispose(),n}function xc(...n){return Et(()=>Ns(n))}function Et(n){return{dispose:Sb(()=>{n()})}}class ct{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{Ns(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?ct.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}deleteAndLeak(e){e&&this._toDispose.has(e)&&this._toDispose.delete(e)}}ct.DISABLE_DISPOSED_WARNING=!1;class Le{constructor(){this._store=new ct,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}Le.None=Object.freeze({dispose(){}});class ha{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||((t=this._value)===null||t===void 0||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,(e=this._value)===null||e===void 0||e.dispose(),this._value=void 0}}class tNe{constructor(e){this.object=e}dispose(){}}class CV{constructor(){this._store=new Map,this._isDisposed=!1}dispose(){this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{Ns(this._store.values())}finally{this._store.clear()}}get(e){return this._store.get(e)}set(e,t,i=!1){var s;this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),i||(s=this._store.get(e))===null||s===void 0||s.dispose(),this._store.set(e,t)}deleteAndDispose(e){var t;(t=this._store.get(e))===null||t===void 0||t.dispose(),this._store.delete(e)}[Symbol.iterator](){return this._store[Symbol.iterator]()}}let Xn=class Q9{constructor(e){this.element=e,this.next=Q9.Undefined,this.prev=Q9.Undefined}};Xn.Undefined=new Xn(void 0);class co{constructor(){this._first=Xn.Undefined,this._last=Xn.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===Xn.Undefined}clear(){let e=this._first;for(;e!==Xn.Undefined;){const t=e.next;e.prev=Xn.Undefined,e.next=Xn.Undefined,e=t}this._first=Xn.Undefined,this._last=Xn.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const i=new Xn(e);if(this._first===Xn.Undefined)this._first=i,this._last=i;else if(t){const r=this._last;this._last=i,i.prev=r,r.next=i}else{const r=this._first;this._first=i,i.next=r,r.prev=i}this._size+=1;let s=!1;return()=>{s||(s=!0,this._remove(i))}}shift(){if(this._first!==Xn.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Xn.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Xn.Undefined&&e.next!==Xn.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===Xn.Undefined&&e.next===Xn.Undefined?(this._first=Xn.Undefined,this._last=Xn.Undefined):e.next===Xn.Undefined?(this._last=this._last.prev,this._last.next=Xn.Undefined):e.prev===Xn.Undefined&&(this._first=this._first.next,this._first.prev=Xn.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Xn.Undefined;)yield e.element,e=e.next}}const iNe=globalThis.performance&&typeof globalThis.performance.now=="function";class Hc{static create(e){return new Hc(e)}constructor(e){this._now=iNe&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}}var Be;(function(n){n.None=()=>Le.None;function e(D,M){return u(D,()=>{},0,void 0,!0,void 0,M)}n.defer=e;function t(D){return(M,E=null,W)=>{let P=!1,N;return N=D(H=>{if(!P)return N?N.dispose():P=!0,M.call(E,H)},null,W),P&&N.dispose(),N}}n.once=t;function i(D,M,E){return c((W,P=null,N)=>D(H=>W.call(P,M(H)),null,N),E)}n.map=i;function s(D,M,E){return c((W,P=null,N)=>D(H=>{M(H),W.call(P,H)},null,N),E)}n.forEach=s;function r(D,M,E){return c((W,P=null,N)=>D(H=>M(H)&&W.call(P,H),null,N),E)}n.filter=r;function o(D){return D}n.signal=o;function a(...D){return(M,E=null,W)=>{const P=xc(...D.map(N=>N(H=>M.call(E,H))));return d(P,W)}}n.any=a;function l(D,M,E,W){let P=E;return i(D,N=>(P=M(P,N),P),W)}n.reduce=l;function c(D,M){let E;const W={onWillAddFirstListener(){E=D(P.fire,P)},onDidRemoveLastListener(){E?.dispose()}},P=new ue(W);return M?.add(P),P.event}function d(D,M){return M instanceof Array?M.push(D):M&&M.add(D),D}function u(D,M,E=100,W=!1,P=!1,N,H){let U,B,Y,ne=0,ee;const $={leakWarningThreshold:N,onWillAddFirstListener(){U=D(Ie=>{ne++,B=M(B,Ie),W&&!Y&&(ge.fire(B),B=void 0),ee=()=>{const xe=B;B=void 0,Y=void 0,(!W||ne>1)&&ge.fire(xe),ne=0},typeof E=="number"?(clearTimeout(Y),Y=setTimeout(ee,E)):Y===void 0&&(Y=0,queueMicrotask(ee))})},onWillRemoveListener(){P&&ne>0&&ee?.()},onDidRemoveLastListener(){ee=void 0,U.dispose()}},ge=new ue($);return H?.add(ge),ge.event}n.debounce=u;function h(D,M=0,E){return n.debounce(D,(W,P)=>W?(W.push(P),W):[P],M,void 0,!0,void 0,E)}n.accumulate=h;function f(D,M=(W,P)=>W===P,E){let W=!0,P;return r(D,N=>{const H=W||!M(N,P);return W=!1,P=N,H},E)}n.latch=f;function g(D,M,E){return[n.filter(D,M,E),n.filter(D,W=>!M(W),E)]}n.split=g;function m(D,M=!1,E=[],W){let P=E.slice(),N=D(B=>{P?P.push(B):U.fire(B)});W&&W.add(N);const H=()=>{P?.forEach(B=>U.fire(B)),P=null},U=new ue({onWillAddFirstListener(){N||(N=D(B=>U.fire(B)),W&&W.add(N))},onDidAddFirstListener(){P&&(M?setTimeout(H):H())},onDidRemoveLastListener(){N&&N.dispose(),N=null}});return W&&W.add(U),U.event}n.buffer=m;function p(D,M){return(W,P,N)=>{const H=M(new w);return D(function(U){const B=H.evaluate(U);B!==b&&W.call(P,B)},void 0,N)}}n.chain=p;const b=Symbol("HaltChainable");class w{constructor(){this.steps=[]}map(M){return this.steps.push(M),this}forEach(M){return this.steps.push(E=>(M(E),E)),this}filter(M){return this.steps.push(E=>M(E)?E:b),this}reduce(M,E){let W=E;return this.steps.push(P=>(W=M(W,P),W)),this}latch(M=(E,W)=>E===W){let E=!0,W;return this.steps.push(P=>{const N=E||!M(P,W);return E=!1,W=P,N?P:b}),this}evaluate(M){for(const E of this.steps)if(M=E(M),M===b)break;return M}}function v(D,M,E=W=>W){const W=(...U)=>H.fire(E(...U)),P=()=>D.on(M,W),N=()=>D.removeListener(M,W),H=new ue({onWillAddFirstListener:P,onDidRemoveLastListener:N});return H.event}n.fromNodeEventEmitter=v;function _(D,M,E=W=>W){const W=(...U)=>H.fire(E(...U)),P=()=>D.addEventListener(M,W),N=()=>D.removeEventListener(M,W),H=new ue({onWillAddFirstListener:P,onDidRemoveLastListener:N});return H.event}n.fromDOMEventEmitter=_;function y(D){return new Promise(M=>t(D)(M))}n.toPromise=y;function C(D){const M=new ue;return D.then(E=>{M.fire(E)},()=>{M.fire(void 0)}).finally(()=>{M.dispose()}),M.event}n.fromPromise=C;function S(D,M,E){return M(E),D(W=>M(W))}n.runAndSubscribe=S;class k{constructor(M,E){this._observable=M,this._counter=0,this._hasChanged=!1;const W={onWillAddFirstListener:()=>{M.addObserver(this)},onDidRemoveLastListener:()=>{M.removeObserver(this)}};this.emitter=new ue(W),E&&E.add(this.emitter)}beginUpdate(M){this._counter++}handlePossibleChange(M){}handleChange(M,E){this._hasChanged=!0}endUpdate(M){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function I(D,M){return new k(D,M).emitter.event}n.fromObservable=I;function T(D){return(M,E,W)=>{let P=0,N=!1;const H={beginUpdate(){P++},endUpdate(){P--,P===0&&(D.reportChanges(),N&&(N=!1,M.call(E)))},handlePossibleChange(){},handleChange(){N=!0}};D.addObserver(H),D.reportChanges();const U={dispose(){D.removeObserver(H)}};return W instanceof ct?W.add(U):Array.isArray(W)&&W.push(U),U}}n.fromObservableLight=T})(Be||(Be={}));class Cb{constructor(e){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${e}_${Cb._idPool++}`,Cb.all.add(this)}start(e){this._stopWatch=new Hc,this.listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}}Cb.all=new Set;Cb._idPool=0;let nNe=-1;class sNe{constructor(e,t,i=Math.random().toString(18).slice(2,5)){this._errorHandler=e,this.threshold=t,this.name=i,this._warnCountdown=0}dispose(){var e;(e=this._stacks)===null||e===void 0||e.clear()}check(e,t){const i=this.threshold;if(i<=0||t<i)return;this._stacks||(this._stacks=new Map);const s=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,s+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=i*.5;const[r,o]=this.getMostFrequentStack(),a=`[${this.name}] potential listener LEAK detected, having ${t} listeners already. MOST frequent listener (${o}):`;console.warn(a),console.warn(r);const l=new rNe(a,r);this._errorHandler(l)}return()=>{const r=this._stacks.get(e.value)||0;this._stacks.set(e.value,r-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,t=0;for(const[i,s]of this._stacks)(!e||t<s)&&(e=[i,s],t=s);return e}}class LV{static create(){var e;const t=new Error;return new LV((e=t.stack)!==null&&e!==void 0?e:"")}constructor(e){this.value=e}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}}class rNe extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}}class oNe extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}}class T5{constructor(e){this.value=e}}const aNe=2;let ue=class{constructor(e){var t,i,s,r,o,a;this._size=0,this._options=e,this._leakageMon=!((t=this._options)===null||t===void 0)&&t.leakWarningThreshold?new sNe((i=e?.onListenerError)!==null&&i!==void 0?i:gi,(r=(s=this._options)===null||s===void 0?void 0:s.leakWarningThreshold)!==null&&r!==void 0?r:nNe):void 0,this._perfMon=!((o=this._options)===null||o===void 0)&&o._profName?new Cb(this._options._profName):void 0,this._deliveryQueue=(a=this._options)===null||a===void 0?void 0:a.deliveryQueue}dispose(){var e,t,i,s;this._disposed||(this._disposed=!0,((e=this._deliveryQueue)===null||e===void 0?void 0:e.current)===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),(i=(t=this._options)===null||t===void 0?void 0:t.onDidRemoveLastListener)===null||i===void 0||i.call(t),(s=this._leakageMon)===null||s===void 0||s.dispose())}get event(){var e;return(e=this._event)!==null&&e!==void 0||(this._event=(t,i,s)=>{var r,o,a,l,c,d,u;if(this._leakageMon&&this._size>this._leakageMon.threshold**2){const m=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(m);const p=(r=this._leakageMon.getMostFrequentStack())!==null&&r!==void 0?r:["UNKNOWN stack",-1],b=new oNe(`${m}. HINT: Stack shows most frequent listener (${p[1]}-times)`,p[0]);return(((o=this._options)===null||o===void 0?void 0:o.onListenerError)||gi)(b),Le.None}if(this._disposed)return Le.None;i&&(t=t.bind(i));const h=new T5(t);let f;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(h.stack=LV.create(),f=this._leakageMon.check(h.stack,this._size+1)),this._listeners?this._listeners instanceof T5?((u=this._deliveryQueue)!==null&&u!==void 0||(this._deliveryQueue=new Yte),this._listeners=[this._listeners,h]):this._listeners.push(h):((l=(a=this._options)===null||a===void 0?void 0:a.onWillAddFirstListener)===null||l===void 0||l.call(a,this),this._listeners=h,(d=(c=this._options)===null||c===void 0?void 0:c.onDidAddFirstListener)===null||d===void 0||d.call(c,this)),this._size++;const g=Et(()=>{f?.(),this._removeListener(h)});return s instanceof ct?s.add(g):Array.isArray(s)&&s.push(g),g}),this._event}_removeListener(e){var t,i,s,r;if((i=(t=this._options)===null||t===void 0?void 0:t.onWillRemoveListener)===null||i===void 0||i.call(t,this),!this._listeners)return;if(this._size===1){this._listeners=void 0,(r=(s=this._options)===null||s===void 0?void 0:s.onDidRemoveLastListener)===null||r===void 0||r.call(s,this),this._size=0;return}const o=this._listeners,a=o.indexOf(e);if(a===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,o[a]=void 0;const l=this._deliveryQueue.current===this;if(this._size*aNe<=o.length){let c=0;for(let d=0;d<o.length;d++)o[d]?o[c++]=o[d]:l&&(this._deliveryQueue.end--,c<this._deliveryQueue.i&&this._deliveryQueue.i--);o.length=c}}_deliver(e,t){var i;if(!e)return;const s=((i=this._options)===null||i===void 0?void 0:i.onListenerError)||gi;if(!s){e.value(t);return}try{e.value(t)}catch(r){s(r)}}_deliverQueue(e){const t=e.current._listeners;for(;e.i<e.end;)this._deliver(t[e.i++],e.value);e.reset()}fire(e){var t,i,s,r;if(!((t=this._deliveryQueue)===null||t===void 0)&&t.current&&(this._deliverQueue(this._deliveryQueue),(i=this._perfMon)===null||i===void 0||i.stop()),(s=this._perfMon)===null||s===void 0||s.start(this._size),this._listeners)if(this._listeners instanceof T5)this._deliver(this._listeners,e);else{const o=this._deliveryQueue;o.enqueue(this,e,this._listeners.length),this._deliverQueue(o)}(r=this._perfMon)===null||r===void 0||r.stop()}hasListeners(){return this._size>0}};const lNe=()=>new Yte;class Yte{constructor(){this.i=-1,this.end=0}enqueue(e,t,i){this.i=0,this.end=i,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}}class W_ extends ue{constructor(e){super(e),this._isPaused=0,this._eventQueue=new co,this._mergeFn=e?.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){if(this._eventQueue.size>0){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._size&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}}class Kte extends W_{constructor(e){var t;super(e),this._delay=(t=e.delay)!==null&&t!==void 0?t:100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}}class cNe extends ue{constructor(e){super(e),this._queuedEvents=[],this._mergeFn=e?.merge}fire(e){this.hasListeners()&&(this._queuedEvents.push(e),this._queuedEvents.length===1&&queueMicrotask(()=>{this._mergeFn?super.fire(this._mergeFn(this._queuedEvents)):this._queuedEvents.forEach(t=>super.fire(t)),this._queuedEvents=[]}))}}class dNe{constructor(){this.hasListeners=!1,this.events=[],this.emitter=new ue({onWillAddFirstListener:()=>this.onFirstListenerAdd(),onDidRemoveLastListener:()=>this.onLastListenerRemove()})}get event(){return this.emitter.event}add(e){const t={event:e,listener:null};return this.events.push(t),this.hasListeners&&this.hook(t),Et(Sb(()=>{this.hasListeners&&this.unhook(t);const s=this.events.indexOf(t);this.events.splice(s,1)}))}onFirstListenerAdd(){this.hasListeners=!0,this.events.forEach(e=>this.hook(e))}onLastListenerRemove(){this.hasListeners=!1,this.events.forEach(e=>this.unhook(e))}hook(e){e.listener=e.event(t=>this.emitter.fire(t))}unhook(e){var t;(t=e.listener)===null||t===void 0||t.dispose(),e.listener=null}dispose(){var e;this.emitter.dispose();for(const t of this.events)(e=t.listener)===null||e===void 0||e.dispose();this.events=[]}}class g2{constructor(){this.data=[]}wrapEvent(e,t,i){return(s,r,o)=>e(a=>{var l;const c=this.data[this.data.length-1];if(!t){c?c.buffers.push(()=>s.call(r,a)):s.call(r,a);return}const d=c;if(!d){s.call(r,t(i,a));return}(l=d.items)!==null&&l!==void 0||(d.items=[]),d.items.push(a),d.buffers.length===0&&c.buffers.push(()=>{var u;(u=d.reducedResult)!==null&&u!==void 0||(d.reducedResult=i?d.items.reduce(t,i):d.items.reduce(t)),s.call(r,d.reducedResult)})},void 0,o)}bufferEvents(e){const t={buffers:new Array};this.data.push(t);const i=e();return this.data.pop(),t.buffers.forEach(s=>s()),i}}class Jz{constructor(){this.listening=!1,this.inputEvent=Be.None,this.inputEventListener=Le.None,this.emitter=new ue({onDidAddFirstListener:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onDidRemoveLastListener:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}const jte=Object.freeze(function(n,e){const t=setTimeout(n.bind(e),0);return{dispose(){clearTimeout(t)}}});var Xs;(function(n){function e(t){return t===n.None||t===n.Cancelled||t instanceof FS?!0:!t||typeof t!="object"?!1:typeof t.isCancellationRequested=="boolean"&&typeof t.onCancellationRequested=="function"}n.isCancellationToken=e,n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Be.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:jte})})(Xs||(Xs={}));class FS{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?jte:(this._emitter||(this._emitter=new ue),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}let nm=class{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new FS),this._token}cancel(){this._token?this._token instanceof FS&&this._token.cancel():this._token=Xs.Cancelled}dispose(e=!1){var t;e&&this.cancel(),(t=this._parentListener)===null||t===void 0||t.dispose(),this._token?this._token instanceof FS&&this._token.dispose():this._token=Xs.None}};const Jte=Symbol("MicrotaskDelay");function q9(n){return!!n&&typeof n.then=="function"}function Od(n){const e=new nm,t=n(e.token),i=new Promise((s,r)=>{const o=e.token.onCancellationRequested(()=>{o.dispose(),r(new kg)});Promise.resolve(t).then(a=>{o.dispose(),e.dispose(),s(a)},a=>{o.dispose(),e.dispose(),r(a)})});return new class{cancel(){e.cancel(),e.dispose()}then(s,r){return i.then(s,r)}catch(s){return this.then(void 0,s)}finally(s){return i.finally(s)}}}function uNe(n,e,t){return new Promise((i,s)=>{const r=e.onCancellationRequested(()=>{r.dispose(),i(t)});n.then(i,s).finally(()=>r.dispose())})}class hNe{constructor(){this.isDisposed=!1,this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.isDisposed)return Promise.reject(new Error("Throttler is disposed"));if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const t=()=>{if(this.queuedPromise=null,this.isDisposed)return;const i=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,i};this.queuedPromise=new Promise(i=>{this.activePromise.then(t,t).then(i)})}return new Promise((t,i)=>{this.queuedPromise.then(t,i)})}return this.activePromise=e(),new Promise((t,i)=>{this.activePromise.then(s=>{this.activePromise=null,t(s)},s=>{this.activePromise=null,i(s)})})}dispose(){this.isDisposed=!0}}const fNe=(n,e)=>{let t=!0;const i=setTimeout(()=>{t=!1,e()},n);return{isTriggered:()=>t,dispose:()=>{clearTimeout(i),t=!1}}},gNe=n=>{let e=!0;return queueMicrotask(()=>{e&&(e=!1,n())}),{isTriggered:()=>e,dispose:()=>{e=!1}}};class af{constructor(e){this.defaultDelay=e,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((s,r)=>{this.doResolve=s,this.doReject=r}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const s=this.task;return this.task=null,s()}}));const i=()=>{var s;this.deferred=null,(s=this.doResolve)===null||s===void 0||s.call(this,null)};return this.deferred=t===Jte?gNe(i):fNe(t,i),this.completionPromise}isTriggered(){var e;return!!(!((e=this.deferred)===null||e===void 0)&&e.isTriggered())}cancel(){var e;this.cancelTimeout(),this.completionPromise&&((e=this.doReject)===null||e===void 0||e.call(this,new kg),this.completionPromise=null)}cancelTimeout(){var e;(e=this.deferred)===null||e===void 0||e.dispose(),this.deferred=null}dispose(){this.cancel()}}class $te{constructor(e){this.delayer=new af(e),this.throttler=new hNe}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose(),this.throttler.dispose()}}function Lb(n,e){return e?new Promise((t,i)=>{const s=setTimeout(()=>{r.dispose(),t()},n),r=e.onCancellationRequested(()=>{clearTimeout(s),r.dispose(),i(new kg)})}):Od(t=>Lb(n,t))}function JC(n,e=0,t){const i=setTimeout(()=>{n(),t&&s.dispose()},e),s=Et(()=>{clearTimeout(i),t?.deleteAndLeak(s)});return t?.add(s),s}function Qte(n,e=i=>!!i,t=null){let i=0;const s=n.length,r=()=>{if(i>=s)return Promise.resolve(t);const o=n[i++];return Promise.resolve(o()).then(l=>e(l)?Promise.resolve(l):r())};return r()}class lf{constructor(e,t){this._isDisposed=!1,this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){if(this._isDisposed)throw new Ai("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){if(this._isDisposed)throw new Ai("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}}class kV{constructor(){this.disposable=void 0,this.isDisposed=!1}cancel(){var e;(e=this.disposable)===null||e===void 0||e.dispose(),this.disposable=void 0}cancelAndSet(e,t,i=globalThis){if(this.isDisposed)throw new Ai("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();const s=i.setInterval(()=>{e()},t);this.disposable=Et(()=>{i.clearInterval(s),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}}class as{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){var e;(e=this.runner)===null||e===void 0||e.call(this)}}let qte,jv;(function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?jv=(n,e)=>{Gte(()=>{if(t)return;const i=Date.now()+15;e(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,i-Date.now())}}))});let t=!1;return{dispose(){t||(t=!0)}}}:jv=(n,e,t)=>{const i=n.requestIdleCallback(e,typeof t=="number"?{timeout:t}:void 0);let s=!1;return{dispose(){s||(s=!0,n.cancelIdleCallback(i))}}},qte=n=>jv(globalThis,n)})();class mNe{constructor(e,t){this._didRun=!1,this._executor=()=>{try{this._value=t()}catch(i){this._error=i}finally{this._didRun=!0}},this._handle=jv(e,()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}class pNe extends mNe{constructor(e){super(globalThis,e)}}class eie{get isRejected(){var e;return((e=this.outcome)===null||e===void 0?void 0:e.outcome)===1}get isSettled(){return!!this.outcome}constructor(){this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}complete(e){return new Promise(t=>{this.completeCallback(e),this.outcome={outcome:0,value:e},t()})}error(e){return new Promise(t=>{this.errorCallback(e),this.outcome={outcome:1,value:e},t()})}cancel(){return this.error(new kg)}}var e3;(function(n){async function e(i){let s;const r=await Promise.all(i.map(o=>o.then(a=>a,a=>{s||(s=a)})));if(typeof s<"u")throw s;return r}n.settled=e;function t(i){return new Promise(async(s,r)=>{try{await i(s,r)}catch(o){r(o)}})}n.withAsyncBody=t})(e3||(e3={}));class yo{static fromArray(e){return new yo(t=>{t.emitMany(e)})}static fromPromise(e){return new yo(async t=>{t.emitMany(await e)})}static fromPromises(e){return new yo(async t=>{await Promise.all(e.map(async i=>t.emitOne(await i)))})}static merge(e){return new yo(async t=>{await Promise.all(e.map(async i=>{for await(const s of i)t.emitOne(s)}))})}constructor(e,t){this._state=0,this._results=[],this._error=null,this._onReturn=t,this._onStateChanged=new ue,queueMicrotask(async()=>{const i={emitOne:s=>this.emitOne(s),emitMany:s=>this.emitMany(s),reject:s=>this.reject(s)};try{await Promise.resolve(e(i)),this.resolve()}catch(s){this.reject(s)}finally{i.emitOne=void 0,i.emitMany=void 0,i.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await Be.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>{var t;return(t=this._onReturn)===null||t===void 0||t.call(this),{done:!0,value:void 0}}}}static map(e,t){return new yo(async i=>{for await(const s of e)i.emitOne(t(s))})}map(e){return yo.map(this,e)}static filter(e,t){return new yo(async i=>{for await(const s of e)t(s)&&i.emitOne(s)})}filter(e){return yo.filter(this,e)}static coalesce(e){return yo.filter(e,t=>!!t)}coalesce(){return yo.coalesce(this)}static async toPromise(e){const t=[];for await(const i of e)t.push(i);return t}toPromise(){return yo.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}}yo.EMPTY=yo.fromArray([]);/*! @license DOMPurify 3.0.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.5/LICENSE */const{entries:tie,setPrototypeOf:$z,isFrozen:bNe,getPrototypeOf:vNe,getOwnPropertyDescriptor:_Ne}=Object;let{freeze:mo,seal:Nl,create:wNe}=Object,{apply:t3,construct:i3}=typeof Reflect<"u"&&Reflect;t3||(t3=function(e,t,i){return e.apply(t,i)});mo||(mo=function(e){return e});Nl||(Nl=function(e){return e});i3||(i3=function(e,t){return new e(...t)});const yNe=Ua(Array.prototype.forEach),Qz=Ua(Array.prototype.pop),H0=Ua(Array.prototype.push),VS=Ua(String.prototype.toLowerCase),D5=Ua(String.prototype.toString),SNe=Ua(String.prototype.match),nl=Ua(String.prototype.replace),CNe=Ua(String.prototype.indexOf),LNe=Ua(String.prototype.trim),zo=Ua(RegExp.prototype.test),U0=kNe(TypeError);function Ua(n){return function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];return t3(n,e,i)}}function kNe(n){return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return i3(n,t)}}function Ci(n,e,t){var i;t=(i=t)!==null&&i!==void 0?i:VS,$z&&$z(n,null);let s=e.length;for(;s--;){let r=e[s];if(typeof r=="string"){const o=t(r);o!==r&&(bNe(e)||(e[s]=o),r=o)}n[r]=!0}return n}function Mm(n){const e=wNe(null);for(const[t,i]of tie(n))e[t]=i;return e}function my(n,e){for(;n!==null;){const i=_Ne(n,e);if(i){if(i.get)return Ua(i.get);if(typeof i.value=="function")return Ua(i.value)}n=vNe(n)}function t(i){return console.warn("fallback value for",i),null}return t}const qz=mo(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),I5=mo(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),M5=mo(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),xNe=mo(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),E5=mo(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),TNe=mo(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),eH=mo(["#text"]),tH=mo(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),N5=mo(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),iH=mo(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),py=mo(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),DNe=Nl(/\{\{[\w\W]*|[\w\W]*\}\}/gm),INe=Nl(/<%[\w\W]*|[\w\W]*%>/gm),MNe=Nl(/\${[\w\W]*}/gm),ENe=Nl(/^data-[\-\w.\u00B7-\uFFFF]/),NNe=Nl(/^aria-[\-\w]+$/),iie=Nl(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),RNe=Nl(/^(?:\w+script|data):/i),WNe=Nl(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),nie=Nl(/^html$/i);var nH=Object.freeze({__proto__:null,MUSTACHE_EXPR:DNe,ERB_EXPR:INe,TMPLIT_EXPR:MNe,DATA_ATTR:ENe,ARIA_ATTR:NNe,IS_ALLOWED_URI:iie,IS_SCRIPT_OR_DATA:RNe,ATTR_WHITESPACE:WNe,DOCTYPE_NAME:nie});const ANe=()=>typeof window>"u"?null:window,FNe=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let i=null;const s="data-tt-policy-suffix";t&&t.hasAttribute(s)&&(i=t.getAttribute(s));const r="dompurify"+(i?"#"+i:"");try{return e.createPolicy(r,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}};function sie(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ANe();const e=Nt=>sie(Nt);if(e.version="3.0.5",e.removed=[],!n||!n.document||n.document.nodeType!==9)return e.isSupported=!1,e;const t=n.document,i=t.currentScript;let{document:s}=n;const{DocumentFragment:r,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:c,NamedNodeMap:d=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:u,DOMParser:h,trustedTypes:f}=n,g=l.prototype,m=my(g,"cloneNode"),p=my(g,"nextSibling"),b=my(g,"childNodes"),w=my(g,"parentNode");if(typeof o=="function"){const Nt=s.createElement("template");Nt.content&&Nt.content.ownerDocument&&(s=Nt.content.ownerDocument)}let v,_="";const{implementation:y,createNodeIterator:C,createDocumentFragment:S,getElementsByTagName:k}=s,{importNode:I}=t;let T={};e.isSupported=typeof tie=="function"&&typeof w=="function"&&y&&y.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:D,ERB_EXPR:M,TMPLIT_EXPR:E,DATA_ATTR:W,ARIA_ATTR:P,IS_SCRIPT_OR_DATA:N,ATTR_WHITESPACE:H}=nH;let{IS_ALLOWED_URI:U}=nH,B=null;const Y=Ci({},[...qz,...I5,...M5,...E5,...eH]);let ne=null;const ee=Ci({},[...tH,...N5,...iH,...py]);let $=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ge=null,Ie=null,xe=!0,z=!0,K=!1,Se=!0,De=!1,ke=!1,je=!1,et=!1,mt=!1,ze=!1,ht=!1,nt=!0,zt=!1;const Fe="user-content-";let re=!0,ie=!1,de={},Z=null;const O=Ci({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let q=null;const Q=Ci({},["audio","video","img","source","image","track"]);let ce=null;const be=Ci({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ae="http://www.w3.org/1998/Math/MathML",Pe="http://www.w3.org/2000/svg",tt="http://www.w3.org/1999/xhtml";let qe=tt,wt=!1,me=null;const fe=Ci({},[Ae,Pe,tt],D5);let Ze;const Ye=["application/xhtml+xml","text/html"],Xe="text/html";let oe,le=null;const Ve=s.createElement("form"),ae=function(ve){return ve instanceof RegExp||ve instanceof Function},_e=function(ve){if(!(le&&le===ve)){if((!ve||typeof ve!="object")&&(ve={}),ve=Mm(ve),Ze=Ye.indexOf(ve.PARSER_MEDIA_TYPE)===-1?Ze=Xe:Ze=ve.PARSER_MEDIA_TYPE,oe=Ze==="application/xhtml+xml"?D5:VS,B="ALLOWED_TAGS"in ve?Ci({},ve.ALLOWED_TAGS,oe):Y,ne="ALLOWED_ATTR"in ve?Ci({},ve.ALLOWED_ATTR,oe):ee,me="ALLOWED_NAMESPACES"in ve?Ci({},ve.ALLOWED_NAMESPACES,D5):fe,ce="ADD_URI_SAFE_ATTR"in ve?Ci(Mm(be),ve.ADD_URI_SAFE_ATTR,oe):be,q="ADD_DATA_URI_TAGS"in ve?Ci(Mm(Q),ve.ADD_DATA_URI_TAGS,oe):Q,Z="FORBID_CONTENTS"in ve?Ci({},ve.FORBID_CONTENTS,oe):O,ge="FORBID_TAGS"in ve?Ci({},ve.FORBID_TAGS,oe):{},Ie="FORBID_ATTR"in ve?Ci({},ve.FORBID_ATTR,oe):{},de="USE_PROFILES"in ve?ve.USE_PROFILES:!1,xe=ve.ALLOW_ARIA_ATTR!==!1,z=ve.ALLOW_DATA_ATTR!==!1,K=ve.ALLOW_UNKNOWN_PROTOCOLS||!1,Se=ve.ALLOW_SELF_CLOSE_IN_ATTR!==!1,De=ve.SAFE_FOR_TEMPLATES||!1,ke=ve.WHOLE_DOCUMENT||!1,mt=ve.RETURN_DOM||!1,ze=ve.RETURN_DOM_FRAGMENT||!1,ht=ve.RETURN_TRUSTED_TYPE||!1,et=ve.FORCE_BODY||!1,nt=ve.SANITIZE_DOM!==!1,zt=ve.SANITIZE_NAMED_PROPS||!1,re=ve.KEEP_CONTENT!==!1,ie=ve.IN_PLACE||!1,U=ve.ALLOWED_URI_REGEXP||iie,qe=ve.NAMESPACE||tt,$=ve.CUSTOM_ELEMENT_HANDLING||{},ve.CUSTOM_ELEMENT_HANDLING&&ae(ve.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&($.tagNameCheck=ve.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ve.CUSTOM_ELEMENT_HANDLING&&ae(ve.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&($.attributeNameCheck=ve.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ve.CUSTOM_ELEMENT_HANDLING&&typeof ve.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&($.allowCustomizedBuiltInElements=ve.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),De&&(z=!1),ze&&(mt=!0),de&&(B=Ci({},[...eH]),ne=[],de.html===!0&&(Ci(B,qz),Ci(ne,tH)),de.svg===!0&&(Ci(B,I5),Ci(ne,N5),Ci(ne,py)),de.svgFilters===!0&&(Ci(B,M5),Ci(ne,N5),Ci(ne,py)),de.mathMl===!0&&(Ci(B,E5),Ci(ne,iH),Ci(ne,py))),ve.ADD_TAGS&&(B===Y&&(B=Mm(B)),Ci(B,ve.ADD_TAGS,oe)),ve.ADD_ATTR&&(ne===ee&&(ne=Mm(ne)),Ci(ne,ve.ADD_ATTR,oe)),ve.ADD_URI_SAFE_ATTR&&Ci(ce,ve.ADD_URI_SAFE_ATTR,oe),ve.FORBID_CONTENTS&&(Z===O&&(Z=Mm(Z)),Ci(Z,ve.FORBID_CONTENTS,oe)),re&&(B["#text"]=!0),ke&&Ci(B,["html","head","body"]),B.table&&(Ci(B,["tbody"]),delete ge.tbody),ve.TRUSTED_TYPES_POLICY){if(typeof ve.TRUSTED_TYPES_POLICY.createHTML!="function")throw U0('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ve.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw U0('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');v=ve.TRUSTED_TYPES_POLICY,_=v.createHTML("")}else v===void 0&&(v=FNe(f,i)),v!==null&&typeof _=="string"&&(_=v.createHTML(""));mo&&mo(ve),le=ve}},Oe=Ci({},["mi","mo","mn","ms","mtext"]),He=Ci({},["foreignobject","desc","title","annotation-xml"]),lt=Ci({},["title","style","font","a","script"]),ft=Ci({},I5);Ci(ft,M5),Ci(ft,xNe);const kt=Ci({},E5);Ci(kt,TNe);const ii=function(ve){let st=w(ve);(!st||!st.tagName)&&(st={namespaceURI:qe,tagName:"template"});const yt=VS(ve.tagName),qi=VS(st.tagName);return me[ve.namespaceURI]?ve.namespaceURI===Pe?st.namespaceURI===tt?yt==="svg":st.namespaceURI===Ae?yt==="svg"&&(qi==="annotation-xml"||Oe[qi]):!!ft[yt]:ve.namespaceURI===Ae?st.namespaceURI===tt?yt==="math":st.namespaceURI===Pe?yt==="math"&&He[qi]:!!kt[yt]:ve.namespaceURI===tt?st.namespaceURI===Pe&&!He[qi]||st.namespaceURI===Ae&&!Oe[qi]?!1:!kt[yt]&&(lt[yt]||!ft[yt]):!!(Ze==="application/xhtml+xml"&&me[ve.namespaceURI]):!1},Ht=function(ve){H0(e.removed,{element:ve});try{ve.parentNode.removeChild(ve)}catch{ve.remove()}},pi=function(ve,st){try{H0(e.removed,{attribute:st.getAttributeNode(ve),from:st})}catch{H0(e.removed,{attribute:null,from:st})}if(st.removeAttribute(ve),ve==="is"&&!ne[ve])if(mt||ze)try{Ht(st)}catch{}else try{st.setAttribute(ve,"")}catch{}},ui=function(ve){let st,yt;if(et)ve="<remove></remove>"+ve;else{const va=SNe(ve,/^[\r\n\t ]+/);yt=va&&va[0]}Ze==="application/xhtml+xml"&&qe===tt&&(ve='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ve+"</body></html>");const qi=v?v.createHTML(ve):ve;if(qe===tt)try{st=new h().parseFromString(qi,Ze)}catch{}if(!st||!st.documentElement){st=y.createDocument(qe,"template",null);try{st.documentElement.innerHTML=wt?_:qi}catch{}}const sr=st.body||st.documentElement;return ve&&yt&&sr.insertBefore(s.createTextNode(yt),sr.childNodes[0]||null),qe===tt?k.call(st,ke?"html":"body")[0]:ke?st.documentElement:sr},Ei=function(ve){return C.call(ve.ownerDocument||ve,ve,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},As=function(ve){return ve instanceof u&&(typeof ve.nodeName!="string"||typeof ve.textContent!="string"||typeof ve.removeChild!="function"||!(ve.attributes instanceof d)||typeof ve.removeAttribute!="function"||typeof ve.setAttribute!="function"||typeof ve.namespaceURI!="string"||typeof ve.insertBefore!="function"||typeof ve.hasChildNodes!="function")},nr=function(ve){return typeof a=="object"?ve instanceof a:ve&&typeof ve=="object"&&typeof ve.nodeType=="number"&&typeof ve.nodeName=="string"},ni=function(ve,st,yt){T[ve]&&yNe(T[ve],qi=>{qi.call(e,st,yt,le)})},Qi=function(ve){let st;if(ni("beforeSanitizeElements",ve,null),As(ve))return Ht(ve),!0;const yt=oe(ve.nodeName);if(ni("uponSanitizeElement",ve,{tagName:yt,allowedTags:B}),ve.hasChildNodes()&&!nr(ve.firstElementChild)&&(!nr(ve.content)||!nr(ve.content.firstElementChild))&&zo(/<[/\w]/g,ve.innerHTML)&&zo(/<[/\w]/g,ve.textContent))return Ht(ve),!0;if(!B[yt]||ge[yt]){if(!ge[yt]&&mu(yt)&&($.tagNameCheck instanceof RegExp&&zo($.tagNameCheck,yt)||$.tagNameCheck instanceof Function&&$.tagNameCheck(yt)))return!1;if(re&&!Z[yt]){const qi=w(ve)||ve.parentNode,sr=b(ve)||ve.childNodes;if(sr&&qi){const va=sr.length;for(let ts=va-1;ts>=0;--ts)qi.insertBefore(m(sr[ts],!0),p(ve))}}return Ht(ve),!0}return ve instanceof l&&!ii(ve)||(yt==="noscript"||yt==="noembed"||yt==="noframes")&&zo(/<\/no(script|embed|frames)/i,ve.innerHTML)?(Ht(ve),!0):(De&&ve.nodeType===3&&(st=ve.textContent,st=nl(st,D," "),st=nl(st,M," "),st=nl(st,E," "),ve.textContent!==st&&(H0(e.removed,{element:ve.cloneNode()}),ve.textContent=st)),ni("afterSanitizeElements",ve,null),!1)},io=function(ve,st,yt){if(nt&&(st==="id"||st==="name")&&(yt in s||yt in Ve))return!1;if(!(z&&!Ie[st]&&zo(W,st))){if(!(xe&&zo(P,st))){if(!ne[st]||Ie[st]){if(!(mu(ve)&&($.tagNameCheck instanceof RegExp&&zo($.tagNameCheck,ve)||$.tagNameCheck instanceof Function&&$.tagNameCheck(ve))&&($.attributeNameCheck instanceof RegExp&&zo($.attributeNameCheck,st)||$.attributeNameCheck instanceof Function&&$.attributeNameCheck(st))||st==="is"&&$.allowCustomizedBuiltInElements&&($.tagNameCheck instanceof RegExp&&zo($.tagNameCheck,yt)||$.tagNameCheck instanceof Function&&$.tagNameCheck(yt))))return!1}else if(!ce[st]){if(!zo(U,nl(yt,H,""))){if(!((st==="src"||st==="xlink:href"||st==="href")&&ve!=="script"&&CNe(yt,"data:")===0&&q[ve])){if(!(K&&!zo(N,nl(yt,H,"")))){if(yt)return!1}}}}}}return!0},mu=function(ve){return ve.indexOf("-")>0},Fs=function(ve){let st,yt,qi,sr;ni("beforeSanitizeAttributes",ve,null);const{attributes:va}=ve;if(!va)return;const ts={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ne};for(sr=va.length;sr--;){st=va[sr];const{name:Yl,namespaceURI:AT}=st;if(yt=Yl==="value"?st.value:LNe(st.value),qi=oe(Yl),ts.attrName=qi,ts.attrValue=yt,ts.keepAttr=!0,ts.forceKeepAttr=void 0,ni("uponSanitizeAttribute",ve,ts),yt=ts.attrValue,ts.forceKeepAttr||(pi(Yl,ve),!ts.keepAttr))continue;if(!Se&&zo(/\/>/i,yt)){pi(Yl,ve);continue}De&&(yt=nl(yt,D," "),yt=nl(yt,M," "),yt=nl(yt,E," "));const JO=oe(ve.nodeName);if(io(JO,qi,yt)){if(zt&&(qi==="id"||qi==="name")&&(pi(Yl,ve),yt=Fe+yt),v&&typeof f=="object"&&typeof f.getAttributeType=="function"&&!AT)switch(f.getAttributeType(JO,qi)){case"TrustedHTML":{yt=v.createHTML(yt);break}case"TrustedScriptURL":{yt=v.createScriptURL(yt);break}}try{AT?ve.setAttributeNS(AT,Yl,yt):ve.setAttribute(Yl,yt),Qz(e.removed)}catch{}}}ni("afterSanitizeAttributes",ve,null)},$c=function Nt(ve){let st;const yt=Ei(ve);for(ni("beforeSanitizeShadowDOM",ve,null);st=yt.nextNode();)ni("uponSanitizeShadowNode",st,null),!Qi(st)&&(st.content instanceof r&&Nt(st.content),Fs(st));ni("afterSanitizeShadowDOM",ve,null)};return e.sanitize=function(Nt){let ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},st,yt,qi,sr;if(wt=!Nt,wt&&(Nt="<!-->"),typeof Nt!="string"&&!nr(Nt))if(typeof Nt.toString=="function"){if(Nt=Nt.toString(),typeof Nt!="string")throw U0("dirty is not a string, aborting")}else throw U0("toString is not a function");if(!e.isSupported)return Nt;if(je||_e(ve),e.removed=[],typeof Nt=="string"&&(ie=!1),ie){if(Nt.nodeName){const Yl=oe(Nt.nodeName);if(!B[Yl]||ge[Yl])throw U0("root node is forbidden and cannot be sanitized in-place")}}else if(Nt instanceof a)st=ui("<!---->"),yt=st.ownerDocument.importNode(Nt,!0),yt.nodeType===1&&yt.nodeName==="BODY"||yt.nodeName==="HTML"?st=yt:st.appendChild(yt);else{if(!mt&&!De&&!ke&&Nt.indexOf("<")===-1)return v&&ht?v.createHTML(Nt):Nt;if(st=ui(Nt),!st)return mt?null:ht?_:""}st&&et&&Ht(st.firstChild);const va=Ei(ie?Nt:st);for(;qi=va.nextNode();)Qi(qi)||(qi.content instanceof r&&$c(qi.content),Fs(qi));if(ie)return Nt;if(mt){if(ze)for(sr=S.call(st.ownerDocument);st.firstChild;)sr.appendChild(st.firstChild);else sr=st;return(ne.shadowroot||ne.shadowrootmode)&&(sr=I.call(t,sr,!0)),sr}let ts=ke?st.outerHTML:st.innerHTML;return ke&&B["!doctype"]&&st.ownerDocument&&st.ownerDocument.doctype&&st.ownerDocument.doctype.name&&zo(nie,st.ownerDocument.doctype.name)&&(ts="<!DOCTYPE "+st.ownerDocument.doctype.name+`>
`+ts),De&&(ts=nl(ts,D," "),ts=nl(ts,M," "),ts=nl(ts,E," ")),v&&ht?v.createHTML(ts):ts},e.setConfig=function(Nt){_e(Nt),je=!0},e.clearConfig=function(){le=null,je=!1},e.isValidAttribute=function(Nt,ve,st){le||_e({});const yt=oe(Nt),qi=oe(ve);return io(yt,qi,st)},e.addHook=function(Nt,ve){typeof ve=="function"&&(T[Nt]=T[Nt]||[],H0(T[Nt],ve))},e.removeHook=function(Nt){if(T[Nt])return Qz(T[Nt])},e.removeHooks=function(Nt){T[Nt]&&(T[Nt]=[])},e.removeAllHooks=function(){T={}},e}var Uc=sie();Uc.version;Uc.isSupported;const rie=Uc.sanitize;Uc.setConfig;Uc.clearConfig;Uc.isValidAttribute;const oie=Uc.addHook,aie=Uc.removeHook;Uc.removeHooks;Uc.removeAllHooks;function lie(n){return n}class VNe{constructor(e,t){this.lastCache=void 0,this.lastArgKey=void 0,typeof e=="function"?(this._fn=e,this._computeKey=lie):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){const t=this._computeKey(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this._fn(e)),this.lastCache}}class sH{get cachedValues(){return this._map}constructor(e,t){this._map=new Map,this._map2=new Map,typeof e=="function"?(this._fn=e,this._computeKey=lie):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){const t=this._computeKey(e);if(this._map2.has(t))return this._map2.get(t);const i=this._fn(e);return this._map.set(e,i),this._map2.set(t,i),i}}class cu{constructor(e){this.executor=e,this._didRun=!1}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}var kb;function PNe(n){return!n||typeof n!="string"?!0:n.trim().length===0}const ONe=/{(\d+)}/g;function $C(n,...e){return e.length===0?n:n.replace(ONe,function(t,i){const s=parseInt(i,10);return isNaN(s)||s<0||s>=e.length?t:e[s]})}function ZNe(n){return n.replace(/[<>"'&]/g,e=>{switch(e){case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&apos;";case"&":return"&amp;"}return e})}function Jv(n){return n.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function Ya(n){return n.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function m2(n,e){if(!n||!e)return n;const t=e.length;if(t===0||n.length===0)return n;let i=0;for(;n.indexOf(e,i)===i;)i=i+t;return n.substring(i)}function GNe(n,e){if(!n||!e)return n;const t=e.length,i=n.length;if(t===0||i===0)return n;let s=i,r=-1;for(;r=n.lastIndexOf(e,s-1),!(r===-1||r+t!==s);){if(r===0)return"";s=r}return n.substring(0,s)}function BNe(n){return n.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function cie(n,e,t={}){if(!n)throw new Error("Cannot create regex from empty string");e||(n=Ya(n)),t.wholeWord&&(/\B/.test(n.charAt(0))||(n="\\b"+n),/\B/.test(n.charAt(n.length-1))||(n=n+"\\b"));let i="";return t.global&&(i+="g"),t.matchCase||(i+="i"),t.multiline&&(i+="m"),t.unicode&&(i+="u"),new RegExp(n,i)}function XNe(n){return n.source==="^"||n.source==="^$"||n.source==="$"||n.source==="^\\s*$"?!1:!!(n.exec("")&&n.lastIndex===0)}function w0(n){return n.split(/\r\n|\r|\n/)}function fo(n){for(let e=0,t=n.length;e<t;e++){const i=n.charCodeAt(e);if(i!==32&&i!==9)return e}return-1}function Zr(n,e=0,t=n.length){for(let i=e;i<t;i++){const s=n.charCodeAt(i);if(s!==32&&s!==9)return n.substring(e,i)}return n.substring(e,t)}function sm(n,e=n.length-1){for(let t=e;t>=0;t--){const i=n.charCodeAt(t);if(i!==32&&i!==9)return t}return-1}function n3(n,e){return n<e?-1:n>e?1:0}function xV(n,e,t=0,i=n.length,s=0,r=e.length){for(;t<i&&s<r;t++,s++){const l=n.charCodeAt(t),c=e.charCodeAt(s);if(l<c)return-1;if(l>c)return 1}const o=i-t,a=r-s;return o<a?-1:o>a?1:0}function rH(n,e){return uw(n,e,0,n.length,0,e.length)}function uw(n,e,t=0,i=n.length,s=0,r=e.length){for(;t<i&&s<r;t++,s++){let l=n.charCodeAt(t),c=e.charCodeAt(s);if(l===c)continue;if(l>=128||c>=128)return xV(n.toLowerCase(),e.toLowerCase(),t,i,s,r);np(l)&&(l-=32),np(c)&&(c-=32);const d=l-c;if(d!==0)return d}const o=i-t,a=r-s;return o<a?-1:o>a?1:0}function by(n){return n>=48&&n<=57}function np(n){return n>=97&&n<=122}function Ru(n){return n>=65&&n<=90}function sp(n,e){return n.length===e.length&&uw(n,e)===0}function TV(n,e){const t=e.length;return e.length>n.length?!1:uw(n,e,0,t)===0}function s3(n,e){const t=Math.min(n.length,e.length);let i;for(i=0;i<t;i++)if(n.charCodeAt(i)!==e.charCodeAt(i))return i;return t}function r3(n,e){const t=Math.min(n.length,e.length);let i;const s=n.length-1,r=e.length-1;for(i=0;i<t;i++)if(n.charCodeAt(s-i)!==e.charCodeAt(r-i))return i;return t}function gs(n){return 55296<=n&&n<=56319}function xb(n){return 56320<=n&&n<=57343}function DV(n,e){return(n-55296<<10)+(e-56320)+65536}function QC(n,e,t){const i=n.charCodeAt(t);if(gs(i)&&t+1<e){const s=n.charCodeAt(t+1);if(xb(s))return DV(i,s)}return i}function zNe(n,e){const t=n.charCodeAt(e-1);if(xb(t)&&e>1){const i=n.charCodeAt(e-2);if(gs(i))return DV(i,t)}return t}class IV{get offset(){return this._offset}constructor(e,t=0){this._str=e,this._len=e.length,this._offset=t}setOffset(e){this._offset=e}prevCodePoint(){const e=zNe(this._str,this._offset);return this._offset-=e>=65536?2:1,e}nextCodePoint(){const e=QC(this._str,this._len,this._offset);return this._offset+=e>=65536?2:1,e}eol(){return this._offset>=this._len}}class qC{get offset(){return this._iterator.offset}constructor(e,t=0){this._iterator=new IV(e,t)}nextGraphemeLength(){const e=Yu.getInstance(),t=this._iterator,i=t.offset;let s=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const r=t.offset,o=e.getGraphemeBreakType(t.nextCodePoint());if(oH(s,o)){t.setOffset(r);break}s=o}return t.offset-i}prevGraphemeLength(){const e=Yu.getInstance(),t=this._iterator,i=t.offset;let s=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const r=t.offset,o=e.getGraphemeBreakType(t.prevCodePoint());if(oH(o,s)){t.setOffset(r);break}s=o}return i-t.offset}eol(){return this._iterator.eol()}}function MV(n,e){return new qC(n,e).nextGraphemeLength()}function die(n,e){return new qC(n,e).prevGraphemeLength()}function HNe(n,e){e>0&&xb(n.charCodeAt(e))&&e--;const t=e+MV(n,e);return[t-die(n,t),t]}let R5;function UNe(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function A_(n){return R5||(R5=UNe()),R5.test(n)}const YNe=/^[\t\n\r\x20-\x7E]*$/;function EV(n){return YNe.test(n)}const uie=/[\u2028\u2029]/;function hie(n){return uie.test(n)}function Wh(n){return n>=11904&&n<=55215||n>=63744&&n<=64255||n>=65281&&n<=65374}function NV(n){return n>=127462&&n<=127487||n===8986||n===8987||n===9200||n===9203||n>=9728&&n<=10175||n===11088||n===11093||n>=127744&&n<=128591||n>=128640&&n<=128764||n>=128992&&n<=129008||n>=129280&&n<=129535||n>=129648&&n<=129782}const KNe="\uFEFF";function RV(n){return!!(n&&n.length>0&&n.charCodeAt(0)===65279)}function jNe(n,e=!1){return n?(e&&(n=n.replace(/\\./g,"")),n.toLowerCase()!==n):!1}function fie(n){return n=n%(2*26),n<26?String.fromCharCode(97+n):String.fromCharCode(65+n-26)}function oH(n,e){return n===0?e!==5&&e!==7:n===2&&e===3?!1:n===4||n===2||n===3||e===4||e===2||e===3?!0:!(n===8&&(e===8||e===9||e===11||e===12)||(n===11||n===9)&&(e===9||e===10)||(n===12||n===10)&&e===10||e===5||e===13||e===7||n===1||n===13&&e===14||n===6&&e===6)}class Yu{static getInstance(){return Yu._INSTANCE||(Yu._INSTANCE=new Yu),Yu._INSTANCE}constructor(){this._data=JNe()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;const t=this._data,i=t.length/3;let s=1;for(;s<=i;)if(e<t[3*s])s=2*s;else if(e>t[3*s+1])s=2*s+1;else return t[3*s+2];return 0}}Yu._INSTANCE=null;function JNe(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}function $Ne(n,e){if(n===0)return 0;const t=QNe(n,e);if(t!==void 0)return t;const i=new IV(e,n);return i.prevCodePoint(),i.offset}function QNe(n,e){const t=new IV(e,n);let i=t.prevCodePoint();for(;qNe(i)||i===65039||i===8419;){if(t.offset===0)return;i=t.prevCodePoint()}if(!NV(i))return;let s=t.offset;return s>0&&t.prevCodePoint()===8205&&(s=t.offset),s}function qNe(n){return 127995<=n&&n<=127999}const e5e="";class Dg{static getInstance(e){return kb.cache.get(Array.from(e))}static getLocales(){return kb._locales.value}constructor(e){this.confusableDictionary=e}isAmbiguous(e){return this.confusableDictionary.has(e)}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}}kb=Dg;Dg.ambiguousCharacterData=new cu(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'));Dg.cache=new VNe({getCacheKey:JSON.stringify},n=>{function e(c){const d=new Map;for(let u=0;u<c.length;u+=2)d.set(c[u],c[u+1]);return d}function t(c,d){const u=new Map(c);for(const[h,f]of d)u.set(h,f);return u}function i(c,d){if(!c)return d;const u=new Map;for(const[h,f]of c)d.has(h)&&u.set(h,f);return u}const s=kb.ambiguousCharacterData.value;let r=n.filter(c=>!c.startsWith("_")&&c in s);r.length===0&&(r=["_default"]);let o;for(const c of r){const d=e(s[c]);o=i(o,d)}const a=e(s._common),l=t(a,o);return new kb(l)});Dg._locales=new cu(()=>Object.keys(kb.ambiguousCharacterData.value).filter(n=>!n.startsWith("_")));class mh{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){return this._data||(this._data=new Set(mh.getRawData())),this._data}static isInvisibleCharacter(e){return mh.getData().has(e)}static get codePoints(){return mh.getData()}}mh._data=void 0;var aH={};let xp;const W5=globalThis.vscode;if(typeof W5<"u"&&typeof W5.process<"u"){const n=W5.process;xp={get platform(){return n.platform},get arch(){return n.arch},get env(){return n.env},cwd(){return n.cwd()}}}else typeof process<"u"?xp={get platform(){return process.platform},get arch(){return process.arch},get env(){return aH},cwd(){return aH.VSCODE_CWD||process.cwd()}}:xp={get platform(){return Mr?"win32":jt?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};const eL=xp.cwd,o3=xp.env,t5e=xp.platform,i5e=65,n5e=97,s5e=90,r5e=122,ph=46,lr=47,wo=92,yu=58,o5e=63;class gie extends Error{constructor(e,t,i){let s;typeof t=="string"&&t.indexOf("not ")===0?(s="must not be",t=t.replace(/^not /,"")):s="must be";const r=e.indexOf(".")!==-1?"property":"argument";let o=`The "${e}" ${r} ${s} of type ${t}`;o+=`. Received type ${typeof i}`,super(o),this.code="ERR_INVALID_ARG_TYPE"}}function a5e(n,e){if(n===null||typeof n!="object")throw new gie(e,"Object",n)}function hs(n,e){if(typeof n!="string")throw new gie(e,"string",n)}const cf=t5e==="win32";function _i(n){return n===lr||n===wo}function a3(n){return n===lr}function Su(n){return n>=i5e&&n<=s5e||n>=n5e&&n<=r5e}function tL(n,e,t,i){let s="",r=0,o=-1,a=0,l=0;for(let c=0;c<=n.length;++c){if(c<n.length)l=n.charCodeAt(c);else{if(i(l))break;l=lr}if(i(l)){if(!(o===c-1||a===1))if(a===2){if(s.length<2||r!==2||s.charCodeAt(s.length-1)!==ph||s.charCodeAt(s.length-2)!==ph){if(s.length>2){const d=s.lastIndexOf(t);d===-1?(s="",r=0):(s=s.slice(0,d),r=s.length-1-s.lastIndexOf(t)),o=c,a=0;continue}else if(s.length!==0){s="",r=0,o=c,a=0;continue}}e&&(s+=s.length>0?`${t}..`:"..",r=2)}else s.length>0?s+=`${t}${n.slice(o+1,c)}`:s=n.slice(o+1,c),r=c-o-1;o=c,a=0}else l===ph&&a!==-1?++a:a=-1}return s}function mie(n,e){a5e(e,"pathObject");const t=e.dir||e.root,i=e.base||`${e.name||""}${e.ext||""}`;return t?t===e.root?`${t}${i}`:`${t}${n}${i}`:i}const uo={resolve(...n){let e="",t="",i=!1;for(let s=n.length-1;s>=-1;s--){let r;if(s>=0){if(r=n[s],hs(r,"path"),r.length===0)continue}else e.length===0?r=eL():(r=o3[`=${e}`]||eL(),(r===void 0||r.slice(0,2).toLowerCase()!==e.toLowerCase()&&r.charCodeAt(2)===wo)&&(r=`${e}\\`));const o=r.length;let a=0,l="",c=!1;const d=r.charCodeAt(0);if(o===1)_i(d)&&(a=1,c=!0);else if(_i(d))if(c=!0,_i(r.charCodeAt(1))){let u=2,h=u;for(;u<o&&!_i(r.charCodeAt(u));)u++;if(u<o&&u!==h){const f=r.slice(h,u);for(h=u;u<o&&_i(r.charCodeAt(u));)u++;if(u<o&&u!==h){for(h=u;u<o&&!_i(r.charCodeAt(u));)u++;(u===o||u!==h)&&(l=`\\\\${f}\\${r.slice(h,u)}`,a=u)}}}else a=1;else Su(d)&&r.charCodeAt(1)===yu&&(l=r.slice(0,2),a=2,o>2&&_i(r.charCodeAt(2))&&(c=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(i){if(e.length>0)break}else if(t=`${r.slice(a)}\\${t}`,i=c,c&&e.length>0)break}return t=tL(t,!i,"\\",_i),i?`${e}\\${t}`:`${e}${t}`||"."},normalize(n){hs(n,"path");const e=n.length;if(e===0)return".";let t=0,i,s=!1;const r=n.charCodeAt(0);if(e===1)return a3(r)?"\\":n;if(_i(r))if(s=!0,_i(n.charCodeAt(1))){let a=2,l=a;for(;a<e&&!_i(n.charCodeAt(a));)a++;if(a<e&&a!==l){const c=n.slice(l,a);for(l=a;a<e&&_i(n.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!_i(n.charCodeAt(a));)a++;if(a===e)return`\\\\${c}\\${n.slice(l)}\\`;a!==l&&(i=`\\\\${c}\\${n.slice(l,a)}`,t=a)}}}else t=1;else Su(r)&&n.charCodeAt(1)===yu&&(i=n.slice(0,2),t=2,e>2&&_i(n.charCodeAt(2))&&(s=!0,t=3));let o=t<e?tL(n.slice(t),!s,"\\",_i):"";return o.length===0&&!s&&(o="."),o.length>0&&_i(n.charCodeAt(e-1))&&(o+="\\"),i===void 0?s?`\\${o}`:o:s?`${i}\\${o}`:`${i}${o}`},isAbsolute(n){hs(n,"path");const e=n.length;if(e===0)return!1;const t=n.charCodeAt(0);return _i(t)||e>2&&Su(t)&&n.charCodeAt(1)===yu&&_i(n.charCodeAt(2))},join(...n){if(n.length===0)return".";let e,t;for(let r=0;r<n.length;++r){const o=n[r];hs(o,"path"),o.length>0&&(e===void 0?e=t=o:e+=`\\${o}`)}if(e===void 0)return".";let i=!0,s=0;if(typeof t=="string"&&_i(t.charCodeAt(0))){++s;const r=t.length;r>1&&_i(t.charCodeAt(1))&&(++s,r>2&&(_i(t.charCodeAt(2))?++s:i=!1))}if(i){for(;s<e.length&&_i(e.charCodeAt(s));)s++;s>=2&&(e=`\\${e.slice(s)}`)}return uo.normalize(e)},relative(n,e){if(hs(n,"from"),hs(e,"to"),n===e)return"";const t=uo.resolve(n),i=uo.resolve(e);if(t===i||(n=t.toLowerCase(),e=i.toLowerCase(),n===e))return"";let s=0;for(;s<n.length&&n.charCodeAt(s)===wo;)s++;let r=n.length;for(;r-1>s&&n.charCodeAt(r-1)===wo;)r--;const o=r-s;let a=0;for(;a<e.length&&e.charCodeAt(a)===wo;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===wo;)l--;const c=l-a,d=o<c?o:c;let u=-1,h=0;for(;h<d;h++){const g=n.charCodeAt(s+h);if(g!==e.charCodeAt(a+h))break;g===wo&&(u=h)}if(h!==d){if(u===-1)return i}else{if(c>d){if(e.charCodeAt(a+h)===wo)return i.slice(a+h+1);if(h===2)return i.slice(a+h)}o>d&&(n.charCodeAt(s+h)===wo?u=h:h===2&&(u=3)),u===-1&&(u=0)}let f="";for(h=s+u+1;h<=r;++h)(h===r||n.charCodeAt(h)===wo)&&(f+=f.length===0?"..":"\\..");return a+=u,f.length>0?`${f}${i.slice(a,l)}`:(i.charCodeAt(a)===wo&&++a,i.slice(a,l))},toNamespacedPath(n){if(typeof n!="string"||n.length===0)return n;const e=uo.resolve(n);if(e.length<=2)return n;if(e.charCodeAt(0)===wo){if(e.charCodeAt(1)===wo){const t=e.charCodeAt(2);if(t!==o5e&&t!==ph)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(Su(e.charCodeAt(0))&&e.charCodeAt(1)===yu&&e.charCodeAt(2)===wo)return`\\\\?\\${e}`;return n},dirname(n){hs(n,"path");const e=n.length;if(e===0)return".";let t=-1,i=0;const s=n.charCodeAt(0);if(e===1)return _i(s)?n:".";if(_i(s)){if(t=i=1,_i(n.charCodeAt(1))){let a=2,l=a;for(;a<e&&!_i(n.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&_i(n.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!_i(n.charCodeAt(a));)a++;if(a===e)return n;a!==l&&(t=i=a+1)}}}}else Su(s)&&n.charCodeAt(1)===yu&&(t=e>2&&_i(n.charCodeAt(2))?3:2,i=t);let r=-1,o=!0;for(let a=e-1;a>=i;--a)if(_i(n.charCodeAt(a))){if(!o){r=a;break}}else o=!1;if(r===-1){if(t===-1)return".";r=t}return n.slice(0,r)},basename(n,e){e!==void 0&&hs(e,"ext"),hs(n,"path");let t=0,i=-1,s=!0,r;if(n.length>=2&&Su(n.charCodeAt(0))&&n.charCodeAt(1)===yu&&(t=2),e!==void 0&&e.length>0&&e.length<=n.length){if(e===n)return"";let o=e.length-1,a=-1;for(r=n.length-1;r>=t;--r){const l=n.charCodeAt(r);if(_i(l)){if(!s){t=r+1;break}}else a===-1&&(s=!1,a=r+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(i=r):(o=-1,i=a))}return t===i?i=a:i===-1&&(i=n.length),n.slice(t,i)}for(r=n.length-1;r>=t;--r)if(_i(n.charCodeAt(r))){if(!s){t=r+1;break}}else i===-1&&(s=!1,i=r+1);return i===-1?"":n.slice(t,i)},extname(n){hs(n,"path");let e=0,t=-1,i=0,s=-1,r=!0,o=0;n.length>=2&&n.charCodeAt(1)===yu&&Su(n.charCodeAt(0))&&(e=i=2);for(let a=n.length-1;a>=e;--a){const l=n.charCodeAt(a);if(_i(l)){if(!r){i=a+1;break}continue}s===-1&&(r=!1,s=a+1),l===ph?t===-1?t=a:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||s===-1||o===0||o===1&&t===s-1&&t===i+1?"":n.slice(t,s)},format:mie.bind(null,"\\"),parse(n){hs(n,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return e;const t=n.length;let i=0,s=n.charCodeAt(0);if(t===1)return _i(s)?(e.root=e.dir=n,e):(e.base=e.name=n,e);if(_i(s)){if(i=1,_i(n.charCodeAt(1))){let u=2,h=u;for(;u<t&&!_i(n.charCodeAt(u));)u++;if(u<t&&u!==h){for(h=u;u<t&&_i(n.charCodeAt(u));)u++;if(u<t&&u!==h){for(h=u;u<t&&!_i(n.charCodeAt(u));)u++;u===t?i=u:u!==h&&(i=u+1)}}}}else if(Su(s)&&n.charCodeAt(1)===yu){if(t<=2)return e.root=e.dir=n,e;if(i=2,_i(n.charCodeAt(2))){if(t===3)return e.root=e.dir=n,e;i=3}}i>0&&(e.root=n.slice(0,i));let r=-1,o=i,a=-1,l=!0,c=n.length-1,d=0;for(;c>=i;--c){if(s=n.charCodeAt(c),_i(s)){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),s===ph?r===-1?r=c:d!==1&&(d=1):r!==-1&&(d=-1)}return a!==-1&&(r===-1||d===0||d===1&&r===a-1&&r===o+1?e.base=e.name=n.slice(o,a):(e.name=n.slice(o,r),e.base=n.slice(o,a),e.ext=n.slice(r,a))),o>0&&o!==i?e.dir=n.slice(0,o-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},l5e=(()=>{if(cf){const n=/\\/g;return()=>{const e=eL().replace(n,"/");return e.slice(e.indexOf("/"))}}return()=>eL()})(),Gn={resolve(...n){let e="",t=!1;for(let i=n.length-1;i>=-1&&!t;i--){const s=i>=0?n[i]:l5e();hs(s,"path"),s.length!==0&&(e=`${s}/${e}`,t=s.charCodeAt(0)===lr)}return e=tL(e,!t,"/",a3),t?`/${e}`:e.length>0?e:"."},normalize(n){if(hs(n,"path"),n.length===0)return".";const e=n.charCodeAt(0)===lr,t=n.charCodeAt(n.length-1)===lr;return n=tL(n,!e,"/",a3),n.length===0?e?"/":t?"./":".":(t&&(n+="/"),e?`/${n}`:n)},isAbsolute(n){return hs(n,"path"),n.length>0&&n.charCodeAt(0)===lr},join(...n){if(n.length===0)return".";let e;for(let t=0;t<n.length;++t){const i=n[t];hs(i,"path"),i.length>0&&(e===void 0?e=i:e+=`/${i}`)}return e===void 0?".":Gn.normalize(e)},relative(n,e){if(hs(n,"from"),hs(e,"to"),n===e||(n=Gn.resolve(n),e=Gn.resolve(e),n===e))return"";const t=1,i=n.length,s=i-t,r=1,o=e.length-r,a=s<o?s:o;let l=-1,c=0;for(;c<a;c++){const u=n.charCodeAt(t+c);if(u!==e.charCodeAt(r+c))break;u===lr&&(l=c)}if(c===a)if(o>a){if(e.charCodeAt(r+c)===lr)return e.slice(r+c+1);if(c===0)return e.slice(r+c)}else s>a&&(n.charCodeAt(t+c)===lr?l=c:c===0&&(l=0));let d="";for(c=t+l+1;c<=i;++c)(c===i||n.charCodeAt(c)===lr)&&(d+=d.length===0?"..":"/..");return`${d}${e.slice(r+l)}`},toNamespacedPath(n){return n},dirname(n){if(hs(n,"path"),n.length===0)return".";const e=n.charCodeAt(0)===lr;let t=-1,i=!0;for(let s=n.length-1;s>=1;--s)if(n.charCodeAt(s)===lr){if(!i){t=s;break}}else i=!1;return t===-1?e?"/":".":e&&t===1?"//":n.slice(0,t)},basename(n,e){e!==void 0&&hs(e,"ext"),hs(n,"path");let t=0,i=-1,s=!0,r;if(e!==void 0&&e.length>0&&e.length<=n.length){if(e===n)return"";let o=e.length-1,a=-1;for(r=n.length-1;r>=0;--r){const l=n.charCodeAt(r);if(l===lr){if(!s){t=r+1;break}}else a===-1&&(s=!1,a=r+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(i=r):(o=-1,i=a))}return t===i?i=a:i===-1&&(i=n.length),n.slice(t,i)}for(r=n.length-1;r>=0;--r)if(n.charCodeAt(r)===lr){if(!s){t=r+1;break}}else i===-1&&(s=!1,i=r+1);return i===-1?"":n.slice(t,i)},extname(n){hs(n,"path");let e=-1,t=0,i=-1,s=!0,r=0;for(let o=n.length-1;o>=0;--o){const a=n.charCodeAt(o);if(a===lr){if(!s){t=o+1;break}continue}i===-1&&(s=!1,i=o+1),a===ph?e===-1?e=o:r!==1&&(r=1):e!==-1&&(r=-1)}return e===-1||i===-1||r===0||r===1&&e===i-1&&e===t+1?"":n.slice(e,i)},format:mie.bind(null,"/"),parse(n){hs(n,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return e;const t=n.charCodeAt(0)===lr;let i;t?(e.root="/",i=1):i=0;let s=-1,r=0,o=-1,a=!0,l=n.length-1,c=0;for(;l>=i;--l){const d=n.charCodeAt(l);if(d===lr){if(!a){r=l+1;break}continue}o===-1&&(a=!1,o=l+1),d===ph?s===-1?s=l:c!==1&&(c=1):s!==-1&&(c=-1)}if(o!==-1){const d=r===0&&t?1:r;s===-1||c===0||c===1&&s===o-1&&s===r+1?e.base=e.name=n.slice(d,o):(e.name=n.slice(d,s),e.base=n.slice(d,o),e.ext=n.slice(s,o))}return r>0?e.dir=n.slice(0,r-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};Gn.win32=uo.win32=uo;Gn.posix=uo.posix=Gn;const pie=cf?uo.normalize:Gn.normalize,c5e=cf?uo.resolve:Gn.resolve,d5e=cf?uo.relative:Gn.relative,u5e=cf?uo.dirname:Gn.dirname,bie=cf?uo.basename:Gn.basename,h5e=cf?uo.extname:Gn.extname,bh=cf?uo.sep:Gn.sep,f5e=/^\w[\w\d+.-]*$/,g5e=/^\//,m5e=/^\/\//;function p5e(n,e){if(!n.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${n.authority}", path: "${n.path}", query: "${n.query}", fragment: "${n.fragment}"}`);if(n.scheme&&!f5e.test(n.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(n.path){if(n.authority){if(!g5e.test(n.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(m5e.test(n.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function b5e(n,e){return!n&&!e?"file":n}function v5e(n,e){switch(n){case"https":case"http":case"file":e?e[0]!==pl&&(e=pl+e):e=pl;break}return e}const Mn="",pl="/",_5e=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class Ft{static isUri(e){return e instanceof Ft?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}constructor(e,t,i,s,r,o=!1){typeof e=="object"?(this.scheme=e.scheme||Mn,this.authority=e.authority||Mn,this.path=e.path||Mn,this.query=e.query||Mn,this.fragment=e.fragment||Mn):(this.scheme=b5e(e,o),this.authority=t||Mn,this.path=v5e(this.scheme,i||Mn),this.query=s||Mn,this.fragment=r||Mn,p5e(this,o))}get fsPath(){return iL(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:i,path:s,query:r,fragment:o}=e;return t===void 0?t=this.scheme:t===null&&(t=Mn),i===void 0?i=this.authority:i===null&&(i=Mn),s===void 0?s=this.path:s===null&&(s=Mn),r===void 0?r=this.query:r===null&&(r=Mn),o===void 0?o=this.fragment:o===null&&(o=Mn),t===this.scheme&&i===this.authority&&s===this.path&&r===this.query&&o===this.fragment?this:new Em(t,i,s,r,o)}static parse(e,t=!1){const i=_5e.exec(e);return i?new Em(i[2]||Mn,vy(i[4]||Mn),vy(i[5]||Mn),vy(i[7]||Mn),vy(i[9]||Mn),t):new Em(Mn,Mn,Mn,Mn,Mn)}static file(e){let t=Mn;if(Mr&&(e=e.replace(/\\/g,pl)),e[0]===pl&&e[1]===pl){const i=e.indexOf(pl,2);i===-1?(t=e.substring(2),e=pl):(t=e.substring(2,i),e=e.substring(i)||pl)}return new Em("file",t,e,Mn,Mn)}static from(e,t){return new Em(e.scheme,e.authority,e.path,e.query,e.fragment,t)}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let i;return Mr&&e.scheme==="file"?i=Ft.file(uo.join(iL(e,!0),...t)).path:i=Gn.join(e.path,...t),e.with({path:i})}toString(e=!1){return l3(this,e)}toJSON(){return this}static revive(e){var t,i;if(e){if(e instanceof Ft)return e;{const s=new Em(e);return s._formatted=(t=e.external)!==null&&t!==void 0?t:null,s._fsPath=e._sep===vie&&(i=e.fsPath)!==null&&i!==void 0?i:null,s}}else return e}}const vie=Mr?1:void 0;let Em=class extends Ft{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=iL(this,!1)),this._fsPath}toString(e=!1){return e?l3(this,!0):(this._formatted||(this._formatted=l3(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=vie),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}};const _ie={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function lH(n,e,t){let i,s=-1;for(let r=0;r<n.length;r++){const o=n.charCodeAt(r);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||o===45||o===46||o===95||o===126||e&&o===47||t&&o===91||t&&o===93||t&&o===58)s!==-1&&(i+=encodeURIComponent(n.substring(s,r)),s=-1),i!==void 0&&(i+=n.charAt(r));else{i===void 0&&(i=n.substr(0,r));const a=_ie[o];a!==void 0?(s!==-1&&(i+=encodeURIComponent(n.substring(s,r)),s=-1),i+=a):s===-1&&(s=r)}}return s!==-1&&(i+=encodeURIComponent(n.substring(s))),i!==void 0?i:n}function w5e(n){let e;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i===35||i===63?(e===void 0&&(e=n.substr(0,t)),e+=_ie[i]):e!==void 0&&(e+=n[t])}return e!==void 0?e:n}function iL(n,e){let t;return n.authority&&n.path.length>1&&n.scheme==="file"?t=`//${n.authority}${n.path}`:n.path.charCodeAt(0)===47&&(n.path.charCodeAt(1)>=65&&n.path.charCodeAt(1)<=90||n.path.charCodeAt(1)>=97&&n.path.charCodeAt(1)<=122)&&n.path.charCodeAt(2)===58?e?t=n.path.substr(1):t=n.path[1].toLowerCase()+n.path.substr(2):t=n.path,Mr&&(t=t.replace(/\//g,"\\")),t}function l3(n,e){const t=e?w5e:lH;let i="",{scheme:s,authority:r,path:o,query:a,fragment:l}=n;if(s&&(i+=s,i+=":"),(r||s==="file")&&(i+=pl,i+=pl),r){let c=r.indexOf("@");if(c!==-1){const d=r.substr(0,c);r=r.substr(c+1),c=d.lastIndexOf(":"),c===-1?i+=t(d,!1,!1):(i+=t(d.substr(0,c),!1,!1),i+=":",i+=t(d.substr(c+1),!1,!0)),i+="@"}r=r.toLowerCase(),c=r.lastIndexOf(":"),c===-1?i+=t(r,!1,!0):(i+=t(r.substr(0,c),!1,!0),i+=r.substr(c))}if(o){if(o.length>=3&&o.charCodeAt(0)===47&&o.charCodeAt(2)===58){const c=o.charCodeAt(1);c>=65&&c<=90&&(o=`/${String.fromCharCode(c+32)}:${o.substr(3)}`)}else if(o.length>=2&&o.charCodeAt(1)===58){const c=o.charCodeAt(0);c>=65&&c<=90&&(o=`${String.fromCharCode(c+32)}:${o.substr(2)}`)}i+=t(o,!0,!1)}return a&&(i+="?",i+=t(a,!1,!1)),l&&(i+="#",i+=e?l:lH(l,!1,!1)),i}function wie(n){try{return decodeURIComponent(n)}catch{return n.length>3?n.substr(0,3)+wie(n.substr(3)):n}}const cH=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function vy(n){return n.match(cH)?n.replace(cH,e=>wie(e)):n}var Mt;(function(n){n.inMemory="inmemory",n.vscode="vscode",n.internal="private",n.walkThrough="walkThrough",n.walkThroughSnippet="walkThroughSnippet",n.http="http",n.https="https",n.file="file",n.mailto="mailto",n.untitled="untitled",n.data="data",n.command="command",n.vscodeRemote="vscode-remote",n.vscodeRemoteResource="vscode-remote-resource",n.vscodeManagedRemoteResource="vscode-managed-remote-resource",n.vscodeUserData="vscode-userdata",n.vscodeCustomEditor="vscode-custom-editor",n.vscodeNotebookCell="vscode-notebook-cell",n.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",n.vscodeNotebookCellOutput="vscode-notebook-cell-output",n.vscodeInteractiveInput="vscode-interactive-input",n.vscodeSettings="vscode-settings",n.vscodeWorkspaceTrust="vscode-workspace-trust",n.vscodeTerminal="vscode-terminal",n.vscodeChatCodeBlock="vscode-chat-code-block",n.vscodeCopilotBackingChatCodeBlock="vscode-copilot-chat-code-block",n.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",n.vscodeChatSesssion="vscode-chat-editor",n.webviewPanel="webview-panel",n.vscodeWebview="vscode-webview",n.extension="extension",n.vscodeFileResource="vscode-file",n.tmp="tmp",n.vsls="vsls",n.vscodeSourceControl="vscode-scm",n.commentsInput="comment",n.codeSetting="code-setting"})(Mt||(Mt={}));function WV(n,e){return Ft.isUri(n)?sp(n.scheme,e):TV(n,e+":")}function dH(n,...e){return e.some(t=>WV(n,t))}const y5e="tkn";class S5e{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._serverRootPath="/"}setPreferredWebSchema(e){this._preferredWebSchema=e}get _remoteResourcesPath(){return Gn.join(this._serverRootPath,Mt.vscodeRemoteResource)}rewrite(e){if(this._delegate)try{return this._delegate(e)}catch(a){return gi(a),e}const t=e.authority;let i=this._hosts[t];i&&i.indexOf(":")!==-1&&i.indexOf("[")===-1&&(i=`[${i}]`);const s=this._ports[t],r=this._connectionTokens[t];let o=`path=${encodeURIComponent(e.path)}`;return typeof r=="string"&&(o+=`&${y5e}=${encodeURIComponent(r)}`),Ft.from({scheme:rf?this._preferredWebSchema:Mt.vscodeRemoteResource,authority:`${i}:${s}`,path:this._remoteResourcesPath,query:o})}}const yie=new S5e,C5e="vscode-app";class F_{uriToBrowserUri(e){return e.scheme===Mt.vscodeRemote?yie.rewrite(e):e.scheme===Mt.file&&(kl||AEe===`${Mt.vscodeFileResource}://${F_.FALLBACK_AUTHORITY}`)?e.with({scheme:Mt.vscodeFileResource,authority:e.authority||F_.FALLBACK_AUTHORITY,query:null,fragment:null}):e}}F_.FALLBACK_AUTHORITY=C5e;const Sie=new F_;var uH;(function(n){const e=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);n.CoopAndCoep=Object.freeze(e.get("3"));const t="vscode-coi";function i(r){let o;typeof r=="string"?o=new URL(r).searchParams:r instanceof URL?o=r.searchParams:Ft.isUri(r)&&(o=new URL(r.toString(!0)).searchParams);const a=o?.get(t);if(a)return e.get(a)}n.getHeadersFromQuery=i;function s(r,o,a){if(!globalThis.crossOriginIsolated)return;const l=o&&a?"3":a?"2":"1";r instanceof URLSearchParams?r.set(t,l):r[t]=l}n.addSearchParam=s})(uH||(uH={}));function AV(n){return p2(n,0)}function p2(n,e){switch(typeof n){case"object":return n===null?kd(349,e):Array.isArray(n)?k5e(n,e):x5e(n,e);case"string":return FV(n,e);case"boolean":return L5e(n,e);case"number":return kd(n,e);case"undefined":return kd(937,e);default:return kd(617,e)}}function kd(n,e){return(e<<5)-e+n|0}function L5e(n,e){return kd(n?433:863,e)}function FV(n,e){e=kd(149417,e);for(let t=0,i=n.length;t<i;t++)e=kd(n.charCodeAt(t),e);return e}function k5e(n,e){return e=kd(104579,e),n.reduce((t,i)=>p2(i,t),e)}function x5e(n,e){return e=kd(181387,e),Object.keys(n).sort().reduce((t,i)=>(t=FV(i,t),p2(n[i],t)),e)}function A5(n,e,t=32){const i=t-e,s=~((1<<i)-1);return(n<<e|(s&n)>>>i)>>>0}function hH(n,e=0,t=n.byteLength,i=0){for(let s=0;s<t;s++)n[e+s]=i}function T5e(n,e,t="0"){for(;n.length<e;)n=t+n;return n}function Y0(n,e=32){return n instanceof ArrayBuffer?Array.from(new Uint8Array(n)).map(t=>t.toString(16).padStart(2,"0")).join(""):T5e((n>>>0).toString(16),e/4)}class b2{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const t=e.length;if(t===0)return;const i=this._buff;let s=this._buffLen,r=this._leftoverHighSurrogate,o,a;for(r!==0?(o=r,a=-1,r=0):(o=e.charCodeAt(0),a=0);;){let l=o;if(gs(o))if(a+1<t){const c=e.charCodeAt(a+1);xb(c)?(a++,l=DV(o,c)):l=65533}else{r=o;break}else xb(o)&&(l=65533);if(s=this._push(i,s,l),a++,a<t)o=e.charCodeAt(a);else break}this._buffLen=s,this._leftoverHighSurrogate=r}_push(e,t,i){return i<128?e[t++]=i:i<2048?(e[t++]=192|(i&1984)>>>6,e[t++]=128|(i&63)>>>0):i<65536?(e[t++]=224|(i&61440)>>>12,e[t++]=128|(i&4032)>>>6,e[t++]=128|(i&63)>>>0):(e[t++]=240|(i&1835008)>>>18,e[t++]=128|(i&258048)>>>12,e[t++]=128|(i&4032)>>>6,e[t++]=128|(i&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64],e[1]=e[65],e[2]=e[66]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),Y0(this._h0)+Y0(this._h1)+Y0(this._h2)+Y0(this._h3)+Y0(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,hH(this._buff,this._buffLen),this._buffLen>56&&(this._step(),hH(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=b2._bigBlock32,t=this._buffDV;for(let u=0;u<64;u+=4)e.setUint32(u,t.getUint32(u,!1),!1);for(let u=64;u<320;u+=4)e.setUint32(u,A5(e.getUint32(u-12,!1)^e.getUint32(u-32,!1)^e.getUint32(u-56,!1)^e.getUint32(u-64,!1),1),!1);let i=this._h0,s=this._h1,r=this._h2,o=this._h3,a=this._h4,l,c,d;for(let u=0;u<80;u++)u<20?(l=s&r|~s&o,c=1518500249):u<40?(l=s^r^o,c=1859775393):u<60?(l=s&r|s&o|r&o,c=2400959708):(l=s^r^o,c=3395469782),d=A5(i,5)+l+a+c+e.getUint32(u*4,!1)&4294967295,a=o,o=r,r=A5(s,30),s=i,i=d;this._h0=this._h0+i&4294967295,this._h1=this._h1+s&4294967295,this._h2=this._h2+r&4294967295,this._h3=this._h3+o&4294967295,this._h4=this._h4+a&4294967295}}b2._bigBlock32=new DataView(new ArrayBuffer(320));const{registerWindow:U$e,getWindow:pt,getDocument:Y$e,getWindows:Cie,getWindowsCount:D5e,getWindowId:nL,getWindowById:fH,hasWindow:K$e,onDidRegisterWindow:v2,onWillUnregisterWindow:I5e,onDidUnregisterWindow:M5e}=function(){const n=new Map;kEe(Di,1);const e={window:Di,disposables:new ct};n.set(Di.vscodeWindowId,e);const t=new ue,i=new ue,s=new ue;function r(o,a){const l=typeof o=="number"?n.get(o):void 0;return l??(a?e:void 0)}return{onDidRegisterWindow:t.event,onWillUnregisterWindow:s.event,onDidUnregisterWindow:i.event,registerWindow(o){if(n.has(o.vscodeWindowId))return Le.None;const a=new ct,l={window:o,disposables:a.add(new ct)};return n.set(o.vscodeWindowId,l),a.add(Et(()=>{n.delete(o.vscodeWindowId),i.fire(o)})),a.add(we(o,Ge.BEFORE_UNLOAD,()=>{s.fire(o)})),t.fire(l),a},getWindows(){return n.values()},getWindowsCount(){return n.size},getWindowId(o){return o.vscodeWindowId},hasWindow(o){return n.has(o)},getWindowById:r,getWindow(o){var a;const l=o;if(!((a=l?.ownerDocument)===null||a===void 0)&&a.defaultView)return l.ownerDocument.defaultView.window;const c=o;return c?.view?c.view.window:Di},getDocument(o){return pt(o).document}}}();function Rl(n){for(;n.firstChild;)n.firstChild.remove()}class E5e{constructor(e,t,i,s){this._node=e,this._type=t,this._handler=i,this._options=s||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function we(n,e,t,i){return new E5e(n,e,t,i)}function N5e(n,e){return function(t){return e(new Sl(n,t))}}function R5e(n){return function(e){return n(new Ji(e))}}const ws=function(e,t,i,s){let r=i;return t==="click"||t==="mousedown"||t==="contextmenu"?r=N5e(pt(e),i):(t==="keydown"||t==="keypress"||t==="keyup")&&(r=R5e(i)),we(e,t,r,s)};function _y(n,e,t){return jv(n,e,t)}let Lie,po;class VV extends kV{constructor(e){super(),this.defaultTarget=e&&pt(e)}cancelAndSet(e,t,i){return super.cancelAndSet(e,t,i??this.defaultTarget)}}class F5{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){gi(e)}}static sort(e,t){return t.priority-e.priority}}(function(){const n=new Map,e=new Map,t=new Map,i=new Map,s=r=>{var o;t.set(r,!1);const a=(o=n.get(r))!==null&&o!==void 0?o:[];for(e.set(r,a),n.set(r,[]),i.set(r,!0);a.length>0;)a.sort(F5.sort),a.shift().execute();i.set(r,!1)};po=(r,o,a=0)=>{const l=nL(r),c=new F5(o,a);let d=n.get(l);return d||(d=[],n.set(l,d)),d.push(c),t.get(l)||(t.set(l,!0),r.requestAnimationFrame(()=>s(l))),c},Lie=(r,o,a)=>{const l=nL(r);if(i.get(l)){const c=new F5(o,a);let d=e.get(l);return d||(d=[],e.set(l,d)),d.push(c),c}else return po(r,o,a)}})();function _2(n){return pt(n).getComputedStyle(n,null)}function sL(n,e){const t=pt(n),i=t.document;if(n!==i.body)return new Ko(n.clientWidth,n.clientHeight);if(Lg&&t?.visualViewport)return new Ko(t.visualViewport.width,t.visualViewport.height);if(t?.innerWidth&&t.innerHeight)return new Ko(t.innerWidth,t.innerHeight);if(i.body&&i.body.clientWidth&&i.body.clientHeight)return new Ko(i.body.clientWidth,i.body.clientHeight);if(i.documentElement&&i.documentElement.clientWidth&&i.documentElement.clientHeight)return new Ko(i.documentElement.clientWidth,i.documentElement.clientHeight);if(e)return sL(e);throw new Error("Unable to figure out browser width and height")}class Ln{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,i){const s=_2(e),r=s?s.getPropertyValue(t):"0";return Ln.convertToPixels(e,r)}static getBorderLeftWidth(e){return Ln.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return Ln.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return Ln.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return Ln.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return Ln.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return Ln.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return Ln.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return Ln.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return Ln.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return Ln.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return Ln.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return Ln.getDimension(e,"margin-bottom","marginBottom")}}class Ko{constructor(e,t){this.width=e,this.height=t}with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new Ko(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof Ko?e:new Ko(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}}Ko.None=new Ko(0,0);function kie(n){let e=n.offsetParent,t=n.offsetTop,i=n.offsetLeft;for(;(n=n.parentNode)!==null&&n!==n.ownerDocument.body&&n!==n.ownerDocument.documentElement;){t-=n.scrollTop;const s=Tie(n)?null:_2(n);s&&(i-=s.direction!=="rtl"?n.scrollLeft:-n.scrollLeft),n===e&&(i+=Ln.getBorderLeftWidth(n),t+=Ln.getBorderTopWidth(n),t+=n.offsetTop,i+=n.offsetLeft,e=n.offsetParent)}return{left:i,top:t}}function ho(n){const e=n.getBoundingClientRect(),t=pt(n);return{left:e.left+t.scrollX,top:e.top+t.scrollY,width:e.width,height:e.height}}function xie(n){let e=n,t=1;do{const i=_2(e).zoom;i!=null&&i!=="1"&&(t*=i),e=e.parentElement}while(e!==null&&e!==e.ownerDocument.documentElement);return t}function Ca(n){const e=Ln.getMarginLeft(n)+Ln.getMarginRight(n);return n.offsetWidth+e}function V5(n){const e=Ln.getBorderLeftWidth(n)+Ln.getBorderRightWidth(n),t=Ln.getPaddingLeft(n)+Ln.getPaddingRight(n);return n.offsetWidth-e-t}function W5e(n){const e=Ln.getBorderTopWidth(n)+Ln.getBorderBottomWidth(n),t=Ln.getPaddingTop(n)+Ln.getPaddingBottom(n);return n.offsetHeight-e-t}function c3(n){const e=Ln.getMarginTop(n)+Ln.getMarginBottom(n);return n.offsetHeight+e}function ss(n,e){return!!e?.contains(n)}function A5e(n,e,t){for(;n&&n.nodeType===n.ELEMENT_NODE;){if(n.classList.contains(e))return n;if(t){if(typeof t=="string"){if(n.classList.contains(t))return null}else if(n===t)return null}n=n.parentNode}return null}function P5(n,e,t){return!!A5e(n,e,t)}function Tie(n){return n&&!!n.host&&!!n.mode}function d3(n){return!!Tb(n)}function Tb(n){for(var e;n.parentNode;){if(n===((e=n.ownerDocument)===null||e===void 0?void 0:e.body))return null;n=n.parentNode}return Tie(n)?n:null}function Js(){let n=y0().activeElement;for(;n?.shadowRoot;)n=n.shadowRoot.activeElement;return n}function w2(n){return Js()===n}function Die(n){return ss(Js(),n)}function y0(){var n;return D5e()<=1?Di.document:(n=Array.from(Cie()).map(({window:t})=>t.document).find(t=>t.hasFocus()))!==null&&n!==void 0?n:Di.document}function PS(){var n,e;return(e=(n=y0().defaultView)===null||n===void 0?void 0:n.window)!==null&&e!==void 0?e:Di}const Iie=new Map;function Ka(n=Di.document.head,e,t){const i=document.createElement("style");if(i.type="text/css",i.media="screen",e?.(i),n.appendChild(i),t&&t.add(Et(()=>n.removeChild(i))),n===Di.document.head){const s=new Set;Iie.set(i,s);for(const{window:r,disposables:o}of Cie()){if(r===Di)continue;const a=o.add(F5e(i,s,r));t?.add(a)}}return i}function F5e(n,e,t){var i,s;const r=new ct,o=n.cloneNode(!0);t.document.head.appendChild(o),r.add(Et(()=>t.document.head.removeChild(o)));for(const a of O5e(n))(i=o.sheet)===null||i===void 0||i.insertRule(a.cssText,(s=o.sheet)===null||s===void 0?void 0:s.cssRules.length);return r.add(V5e.observe(n,r,{childList:!0})(()=>{o.textContent=n.textContent})),e.add(o),r.add(Et(()=>e.delete(o))),r}const V5e=new class{constructor(){this.mutationObservers=new Map}observe(n,e,t){let i=this.mutationObservers.get(n);i||(i=new Map,this.mutationObservers.set(n,i));const s=AV(t);let r=i.get(s);if(r)r.users+=1;else{const o=new ue,a=new MutationObserver(c=>o.fire(c));a.observe(n,t);const l=r={users:1,observer:a,onDidMutate:o.event};e.add(Et(()=>{l.users-=1,l.users===0&&(o.dispose(),a.disconnect(),i?.delete(s),i?.size===0&&this.mutationObservers.delete(n))})),i.set(s,r)}return r.onDidMutate}};let O5=null;function P5e(){return O5||(O5=Ka()),O5}function O5e(n){var e,t;return!((e=n?.sheet)===null||e===void 0)&&e.rules?n.sheet.rules:!((t=n?.sheet)===null||t===void 0)&&t.cssRules?n.sheet.cssRules:[]}function u3(n,e,t=P5e()){var i,s;if(!(!t||!e)){(i=t.sheet)===null||i===void 0||i.insertRule(`${n} {${e}}`,0);for(const r of(s=Iie.get(t))!==null&&s!==void 0?s:[])u3(n,e,r)}}function Es(n){return n instanceof HTMLElement||n instanceof pt(n).HTMLElement}function gH(n){return n instanceof HTMLAnchorElement||n instanceof pt(n).HTMLAnchorElement}function PV(n){return n instanceof MouseEvent||n instanceof pt(n).MouseEvent}function Vu(n){return n instanceof KeyboardEvent||n instanceof pt(n).KeyboardEvent}const Ge={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",PASTE:"paste",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:rg?"webkitAnimationStart":"animationstart",ANIMATION_END:rg?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:rg?"webkitAnimationIteration":"animationiteration"};function Z5e(n){const e=n;return!!(e&&typeof e.preventDefault=="function"&&typeof e.stopPropagation=="function")}const $t={stop:(n,e)=>(n.preventDefault(),e&&n.stopPropagation(),n)};function G5e(n){const e=[];for(let t=0;n&&n.nodeType===n.ELEMENT_NODE;t++)e[t]=n.scrollTop,n=n.parentNode;return e}function B5e(n,e){for(let t=0;n&&n.nodeType===n.ELEMENT_NODE;t++)n.scrollTop!==e[t]&&(n.scrollTop=e[t]),n=n.parentNode}class rL extends Le{static hasFocusWithin(e){if(Es(e)){const t=Tb(e),i=t?t.activeElement:e.ownerDocument.activeElement;return ss(i,e)}else{const t=e;return ss(t.document.activeElement,t.document)}}constructor(e){super(),this._onDidFocus=this._register(new ue),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new ue),this.onDidBlur=this._onDidBlur.event;let t=rL.hasFocusWithin(e),i=!1;const s=()=>{i=!1,t||(t=!0,this._onDidFocus.fire())},r=()=>{t&&(i=!0,(Es(e)?pt(e):e).setTimeout(()=>{i&&(i=!1,t=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{rL.hasFocusWithin(e)!==t&&(t?r():s())},this._register(we(e,Ge.FOCUS,s,!0)),this._register(we(e,Ge.BLUR,r,!0)),Es(e)&&(this._register(we(e,Ge.FOCUS_IN,()=>this._refreshStateHandler())),this._register(we(e,Ge.FOCUS_OUT,()=>this._refreshStateHandler())))}}function Ig(n){return new rL(n)}function X5e(n,e){return n.after(e),e}function dt(n,...e){if(n.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}function OV(n,e){return n.insertBefore(e,n.firstChild),e}function Ir(n,...e){n.innerText="",dt(n,...e)}const z5e=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var V_;(function(n){n.HTML="http://www.w3.org/1999/xhtml",n.SVG="http://www.w3.org/2000/svg"})(V_||(V_={}));function Mie(n,e,t,...i){const s=z5e.exec(e);if(!s)throw new Error("Bad use of emmet");const r=s[1]||"div";let o;return n!==V_.HTML?o=document.createElementNS(n,r):o=document.createElement(r),s[3]&&(o.id=s[3]),s[4]&&(o.className=s[4].replace(/\./g," ").trim()),t&&Object.entries(t).forEach(([a,l])=>{typeof l>"u"||(/^on\w+$/.test(a)?o[a]=l:a==="selected"?l&&o.setAttribute(a,"true"):o.setAttribute(a,l))}),o.append(...i),o}function St(n,e,...t){return Mie(V_.HTML,n,e,...t)}St.SVG=function(n,e,...t){return Mie(V_.SVG,n,e,...t)};function Eie(...n){for(const e of n)e.style.display="",e.removeAttribute("aria-hidden")}function mH(...n){for(const e of n)e.style.display="none",e.setAttribute("aria-hidden","true")}function pH(n,e){const t=n.devicePixelRatio*e;return Math.max(1,Math.floor(t))/n.devicePixelRatio}function Nie(n){Di.open(n,"_blank","noopener")}function H5e(n,e){const t=()=>{e(),i=po(n,t)};let i=po(n,t);return Et(()=>i.dispose())}yie.setPreferredWebSchema(/^https:/.test(Di.location.href)?"https":"http");function Qd(n){return n?`url('${Sie.uriToBrowserUri(n).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function Z5(n){return`'${n.replace(/'/g,"%27")}'`}function Zd(n,e){if(n!==void 0){const t=n.match(/^\s*var\((.+)\)$/);if(t){const i=t[1].split(",",2);return i.length===2&&(e=Zd(i[1].trim(),e)),`var(${i[0]}, ${e})`}return n}return e}function U5e(n,e=!1){const t=document.createElement("a");return oie("afterSanitizeAttributes",i=>{for(const s of["href","src"])if(i.hasAttribute(s)){const r=i.getAttribute(s);if(s==="href"&&r.startsWith("#"))continue;if(t.href=r,!n.includes(t.protocol.replace(/:$/,""))){if(e&&s==="src"&&t.href.startsWith("data:"))continue;i.removeAttribute(s)}}}),Et(()=>{aie("afterSanitizeAttributes")})}const Y5e=Object.freeze(["a","abbr","b","bdo","blockquote","br","caption","cite","code","col","colgroup","dd","del","details","dfn","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","label","li","mark","ol","p","pre","q","rp","rt","ruby","samp","small","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","time","tr","tt","u","ul","var","video","wbr"]);class Ku extends ue{constructor(){super(),this._subscriptions=new ct,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(Be.runAndSubscribe(v2,({window:e,disposables:t})=>this.registerListeners(e,t),{window:Di,disposables:this._subscriptions}))}registerListeners(e,t){t.add(we(e,"keydown",i=>{if(i.defaultPrevented)return;const s=new Ji(i);if(!(s.keyCode===6&&i.repeat)){if(i.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(i.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(i.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(i.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(s.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=i.altKey,this._keyStatus.ctrlKey=i.ctrlKey,this._keyStatus.metaKey=i.metaKey,this._keyStatus.shiftKey=i.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=i,this.fire(this._keyStatus))}},!0)),t.add(we(e,"keyup",i=>{i.defaultPrevented||(!i.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!i.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!i.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!i.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=i.altKey,this._keyStatus.ctrlKey=i.ctrlKey,this._keyStatus.metaKey=i.metaKey,this._keyStatus.shiftKey=i.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=i,this.fire(this._keyStatus)))},!0)),t.add(we(e.document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(we(e.document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(we(e.document.body,"mousemove",i=>{i.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),t.add(we(e,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return Ku.instance||(Ku.instance=new Ku),Ku.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}class K5e extends Le{constructor(e,t){super(),this.element=e,this.callbacks=t,this.counter=0,this.dragStartTime=0,this.registerListeners()}registerListeners(){this.callbacks.onDragStart&&this._register(we(this.element,Ge.DRAG_START,e=>{var t,i;(i=(t=this.callbacks).onDragStart)===null||i===void 0||i.call(t,e)})),this.callbacks.onDrag&&this._register(we(this.element,Ge.DRAG,e=>{var t,i;(i=(t=this.callbacks).onDrag)===null||i===void 0||i.call(t,e)})),this._register(we(this.element,Ge.DRAG_ENTER,e=>{var t,i;this.counter++,this.dragStartTime=e.timeStamp,(i=(t=this.callbacks).onDragEnter)===null||i===void 0||i.call(t,e)})),this._register(we(this.element,Ge.DRAG_OVER,e=>{var t,i;e.preventDefault(),(i=(t=this.callbacks).onDragOver)===null||i===void 0||i.call(t,e,e.timeStamp-this.dragStartTime)})),this._register(we(this.element,Ge.DRAG_LEAVE,e=>{var t,i;this.counter--,this.counter===0&&(this.dragStartTime=0,(i=(t=this.callbacks).onDragLeave)===null||i===void 0||i.call(t,e))})),this._register(we(this.element,Ge.DRAG_END,e=>{var t,i;this.counter=0,this.dragStartTime=0,(i=(t=this.callbacks).onDragEnd)===null||i===void 0||i.call(t,e)})),this._register(we(this.element,Ge.DROP,e=>{var t,i;this.counter=0,this.dragStartTime=0,(i=(t=this.callbacks).onDrop)===null||i===void 0||i.call(t,e)}))}}const j5e=/(?<tag>[\w\-]+)?(?:#(?<id>[\w\-]+))?(?<class>(?:\.(?:[\w\-]+))*)(?:@(?<name>(?:[\w\_])+))?/;function wi(n,...e){let t,i;Array.isArray(e[0])?(t={},i=e[0]):(t=e[0]||{},i=e[1]);const s=j5e.exec(n);if(!s||!s.groups)throw new Error("Bad use of h");const r=s.groups.tag||"div",o=document.createElement(r);s.groups.id&&(o.id=s.groups.id);const a=[];if(s.groups.class)for(const c of s.groups.class.split("."))c!==""&&a.push(c);if(t.className!==void 0)for(const c of t.className.split("."))c!==""&&a.push(c);a.length>0&&(o.className=a.join(" "));const l={};if(s.groups.name&&(l[s.groups.name]=o),i)for(const c of i)Es(c)?o.appendChild(c):typeof c=="string"?o.append(c):"root"in c&&(Object.assign(l,c),o.appendChild(c.root));for(const[c,d]of Object.entries(t))if(c!=="className")if(c==="style")for(const[u,h]of Object.entries(d))o.style.setProperty(bH(u),typeof h=="number"?h+"px":""+h);else c==="tabIndex"?o.tabIndex=d:o.setAttribute(bH(c),d.toString());return l.root=o,l}function bH(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}const vH=2e4;let Wf,OS,h3,ZS,f3;function J5e(n){Wf=document.createElement("div"),Wf.className="monaco-aria-container";const e=()=>{const i=document.createElement("div");return i.className="monaco-alert",i.setAttribute("role","alert"),i.setAttribute("aria-atomic","true"),Wf.appendChild(i),i};OS=e(),h3=e();const t=()=>{const i=document.createElement("div");return i.className="monaco-status",i.setAttribute("aria-live","polite"),i.setAttribute("aria-atomic","true"),Wf.appendChild(i),i};ZS=t(),f3=t(),n.appendChild(Wf)}function Mg(n){Wf&&(OS.textContent!==n?(Rl(h3),aL(OS,n)):(Rl(OS),aL(h3,n)))}function oL(n){Wf&&(ZS.textContent!==n?(Rl(f3),aL(ZS,n)):(Rl(ZS),aL(f3,n)))}function aL(n,e){Rl(n),e.length>vH&&(e=e.substr(0,vH)),n.textContent=e,n.style.visibility="hidden",n.style.visibility="visible"}var Cl;(function(n){n.serviceIds=new Map,n.DI_TARGET="$di$target",n.DI_DEPENDENCIES="$di$dependencies";function e(t){return t[n.DI_DEPENDENCIES]||[]}n.getServiceDependencies=e})(Cl||(Cl={}));const Si=ri("instantiationService");function $5e(n,e,t){e[Cl.DI_TARGET]===e?e[Cl.DI_DEPENDENCIES].push({id:n,index:t}):(e[Cl.DI_DEPENDENCIES]=[{id:n,index:t}],e[Cl.DI_TARGET]=e)}function ri(n){if(Cl.serviceIds.has(n))return Cl.serviceIds.get(n);const e=function(t,i,s){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");$5e(e,t,s)};return e.toString=()=>n,Cl.serviceIds.set(n,e),e}const Vn=ri("codeEditorService");let pe=class kf{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new kf(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return kf.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return kf.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return kf.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){const i=e.lineNumber|0,s=t.lineNumber|0;if(i===s){const r=e.column|0,o=t.column|0;return r-o}return i-s}clone(){return new kf(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new kf(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}};const Ws=ri("modelService"),hw=ri("textModelService");class Gd extends Le{constructor(e,t="",i="",s=!0,r){super(),this._onDidChange=this._register(new ue),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=t,this._cssClass=i,this._enabled=s,this._actionCallback=r}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}async run(e,t){this._actionCallback&&await this._actionCallback(e)}}class Eg extends Le{constructor(){super(...arguments),this._onWillRun=this._register(new ue),this.onWillRun=this._onWillRun.event,this._onDidRun=this._register(new ue),this.onDidRun=this._onDidRun.event}async run(e,t){if(!e.enabled)return;this._onWillRun.fire({action:e});let i;try{await this.runAction(e,t)}catch(s){i=s}this._onDidRun.fire({action:e,error:i})}async runAction(e,t){await e.run(t)}}class Zs{constructor(){this.id=Zs.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...e){let t=[];for(const i of e)i.length&&(t.length?t=[...t,new Zs,...i]:t=i);return t}async run(){}}Zs.ID="vs.actions.separator";class y2{get actions(){return this._actions}constructor(e,t,i,s){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=e,this.label=t,this.class=s,this._actions=i}async run(){}}class S2 extends Gd{constructor(){super(S2.ID,L("submenu.empty","(empty)"),void 0,!1)}}S2.ID="vs.actions.empty";function og(n){var e,t;return{id:n.id,label:n.label,tooltip:(e=n.tooltip)!==null&&e!==void 0?e:n.label,class:n.class,enabled:(t=n.enabled)!==null&&t!==void 0?t:!0,checked:n.checked,run:async(...i)=>n.run(...i)}}const g3=Object.create(null);function R(n,e){if(Dr(e)){const t=g3[e];if(t===void 0)throw new Error(`${n} references an unknown codicon: ${e}`);e=t}return g3[n]=e,{id:n}}function Rie(){return g3}const Q5e={add:R("add",6e4),plus:R("plus",6e4),gistNew:R("gist-new",6e4),repoCreate:R("repo-create",6e4),lightbulb:R("lightbulb",60001),lightBulb:R("light-bulb",60001),repo:R("repo",60002),repoDelete:R("repo-delete",60002),gistFork:R("gist-fork",60003),repoForked:R("repo-forked",60003),gitPullRequest:R("git-pull-request",60004),gitPullRequestAbandoned:R("git-pull-request-abandoned",60004),recordKeys:R("record-keys",60005),keyboard:R("keyboard",60005),tag:R("tag",60006),gitPullRequestLabel:R("git-pull-request-label",60006),tagAdd:R("tag-add",60006),tagRemove:R("tag-remove",60006),person:R("person",60007),personFollow:R("person-follow",60007),personOutline:R("person-outline",60007),personFilled:R("person-filled",60007),gitBranch:R("git-branch",60008),gitBranchCreate:R("git-branch-create",60008),gitBranchDelete:R("git-branch-delete",60008),sourceControl:R("source-control",60008),mirror:R("mirror",60009),mirrorPublic:R("mirror-public",60009),star:R("star",60010),starAdd:R("star-add",60010),starDelete:R("star-delete",60010),starEmpty:R("star-empty",60010),comment:R("comment",60011),commentAdd:R("comment-add",60011),alert:R("alert",60012),warning:R("warning",60012),search:R("search",60013),searchSave:R("search-save",60013),logOut:R("log-out",60014),signOut:R("sign-out",60014),logIn:R("log-in",60015),signIn:R("sign-in",60015),eye:R("eye",60016),eyeUnwatch:R("eye-unwatch",60016),eyeWatch:R("eye-watch",60016),circleFilled:R("circle-filled",60017),primitiveDot:R("primitive-dot",60017),closeDirty:R("close-dirty",60017),debugBreakpoint:R("debug-breakpoint",60017),debugBreakpointDisabled:R("debug-breakpoint-disabled",60017),debugHint:R("debug-hint",60017),terminalDecorationSuccess:R("terminal-decoration-success",60017),primitiveSquare:R("primitive-square",60018),edit:R("edit",60019),pencil:R("pencil",60019),info:R("info",60020),issueOpened:R("issue-opened",60020),gistPrivate:R("gist-private",60021),gitForkPrivate:R("git-fork-private",60021),lock:R("lock",60021),mirrorPrivate:R("mirror-private",60021),close:R("close",60022),removeClose:R("remove-close",60022),x:R("x",60022),repoSync:R("repo-sync",60023),sync:R("sync",60023),clone:R("clone",60024),desktopDownload:R("desktop-download",60024),beaker:R("beaker",60025),microscope:R("microscope",60025),vm:R("vm",60026),deviceDesktop:R("device-desktop",60026),file:R("file",60027),fileText:R("file-text",60027),more:R("more",60028),ellipsis:R("ellipsis",60028),kebabHorizontal:R("kebab-horizontal",60028),mailReply:R("mail-reply",60029),reply:R("reply",60029),organization:R("organization",60030),organizationFilled:R("organization-filled",60030),organizationOutline:R("organization-outline",60030),newFile:R("new-file",60031),fileAdd:R("file-add",60031),newFolder:R("new-folder",60032),fileDirectoryCreate:R("file-directory-create",60032),trash:R("trash",60033),trashcan:R("trashcan",60033),history:R("history",60034),clock:R("clock",60034),folder:R("folder",60035),fileDirectory:R("file-directory",60035),symbolFolder:R("symbol-folder",60035),logoGithub:R("logo-github",60036),markGithub:R("mark-github",60036),github:R("github",60036),terminal:R("terminal",60037),console:R("console",60037),repl:R("repl",60037),zap:R("zap",60038),symbolEvent:R("symbol-event",60038),error:R("error",60039),stop:R("stop",60039),variable:R("variable",60040),symbolVariable:R("symbol-variable",60040),array:R("array",60042),symbolArray:R("symbol-array",60042),symbolModule:R("symbol-module",60043),symbolPackage:R("symbol-package",60043),symbolNamespace:R("symbol-namespace",60043),symbolObject:R("symbol-object",60043),symbolMethod:R("symbol-method",60044),symbolFunction:R("symbol-function",60044),symbolConstructor:R("symbol-constructor",60044),symbolBoolean:R("symbol-boolean",60047),symbolNull:R("symbol-null",60047),symbolNumeric:R("symbol-numeric",60048),symbolNumber:R("symbol-number",60048),symbolStructure:R("symbol-structure",60049),symbolStruct:R("symbol-struct",60049),symbolParameter:R("symbol-parameter",60050),symbolTypeParameter:R("symbol-type-parameter",60050),symbolKey:R("symbol-key",60051),symbolText:R("symbol-text",60051),symbolReference:R("symbol-reference",60052),goToFile:R("go-to-file",60052),symbolEnum:R("symbol-enum",60053),symbolValue:R("symbol-value",60053),symbolRuler:R("symbol-ruler",60054),symbolUnit:R("symbol-unit",60054),activateBreakpoints:R("activate-breakpoints",60055),archive:R("archive",60056),arrowBoth:R("arrow-both",60057),arrowDown:R("arrow-down",60058),arrowLeft:R("arrow-left",60059),arrowRight:R("arrow-right",60060),arrowSmallDown:R("arrow-small-down",60061),arrowSmallLeft:R("arrow-small-left",60062),arrowSmallRight:R("arrow-small-right",60063),arrowSmallUp:R("arrow-small-up",60064),arrowUp:R("arrow-up",60065),bell:R("bell",60066),bold:R("bold",60067),book:R("book",60068),bookmark:R("bookmark",60069),debugBreakpointConditionalUnverified:R("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:R("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:R("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:R("debug-breakpoint-data-unverified",60072),debugBreakpointData:R("debug-breakpoint-data",60073),debugBreakpointDataDisabled:R("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:R("debug-breakpoint-log-unverified",60074),debugBreakpointLog:R("debug-breakpoint-log",60075),debugBreakpointLogDisabled:R("debug-breakpoint-log-disabled",60075),briefcase:R("briefcase",60076),broadcast:R("broadcast",60077),browser:R("browser",60078),bug:R("bug",60079),calendar:R("calendar",60080),caseSensitive:R("case-sensitive",60081),check:R("check",60082),checklist:R("checklist",60083),chevronDown:R("chevron-down",60084),chevronLeft:R("chevron-left",60085),chevronRight:R("chevron-right",60086),chevronUp:R("chevron-up",60087),chromeClose:R("chrome-close",60088),chromeMaximize:R("chrome-maximize",60089),chromeMinimize:R("chrome-minimize",60090),chromeRestore:R("chrome-restore",60091),circleOutline:R("circle-outline",60092),circle:R("circle",60092),debugBreakpointUnverified:R("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:R("terminal-decoration-incomplete",60092),circleSlash:R("circle-slash",60093),circuitBoard:R("circuit-board",60094),clearAll:R("clear-all",60095),clippy:R("clippy",60096),closeAll:R("close-all",60097),cloudDownload:R("cloud-download",60098),cloudUpload:R("cloud-upload",60099),code:R("code",60100),collapseAll:R("collapse-all",60101),colorMode:R("color-mode",60102),commentDiscussion:R("comment-discussion",60103),creditCard:R("credit-card",60105),dash:R("dash",60108),dashboard:R("dashboard",60109),database:R("database",60110),debugContinue:R("debug-continue",60111),debugDisconnect:R("debug-disconnect",60112),debugPause:R("debug-pause",60113),debugRestart:R("debug-restart",60114),debugStart:R("debug-start",60115),debugStepInto:R("debug-step-into",60116),debugStepOut:R("debug-step-out",60117),debugStepOver:R("debug-step-over",60118),debugStop:R("debug-stop",60119),debug:R("debug",60120),deviceCameraVideo:R("device-camera-video",60121),deviceCamera:R("device-camera",60122),deviceMobile:R("device-mobile",60123),diffAdded:R("diff-added",60124),diffIgnored:R("diff-ignored",60125),diffModified:R("diff-modified",60126),diffRemoved:R("diff-removed",60127),diffRenamed:R("diff-renamed",60128),diff:R("diff",60129),diffSidebyside:R("diff-sidebyside",60129),discard:R("discard",60130),editorLayout:R("editor-layout",60131),emptyWindow:R("empty-window",60132),exclude:R("exclude",60133),extensions:R("extensions",60134),eyeClosed:R("eye-closed",60135),fileBinary:R("file-binary",60136),fileCode:R("file-code",60137),fileMedia:R("file-media",60138),filePdf:R("file-pdf",60139),fileSubmodule:R("file-submodule",60140),fileSymlinkDirectory:R("file-symlink-directory",60141),fileSymlinkFile:R("file-symlink-file",60142),fileZip:R("file-zip",60143),files:R("files",60144),filter:R("filter",60145),flame:R("flame",60146),foldDown:R("fold-down",60147),foldUp:R("fold-up",60148),fold:R("fold",60149),folderActive:R("folder-active",60150),folderOpened:R("folder-opened",60151),gear:R("gear",60152),gift:R("gift",60153),gistSecret:R("gist-secret",60154),gist:R("gist",60155),gitCommit:R("git-commit",60156),gitCompare:R("git-compare",60157),compareChanges:R("compare-changes",60157),gitMerge:R("git-merge",60158),githubAction:R("github-action",60159),githubAlt:R("github-alt",60160),globe:R("globe",60161),grabber:R("grabber",60162),graph:R("graph",60163),gripper:R("gripper",60164),heart:R("heart",60165),home:R("home",60166),horizontalRule:R("horizontal-rule",60167),hubot:R("hubot",60168),inbox:R("inbox",60169),issueReopened:R("issue-reopened",60171),issues:R("issues",60172),italic:R("italic",60173),jersey:R("jersey",60174),json:R("json",60175),kebabVertical:R("kebab-vertical",60176),key:R("key",60177),law:R("law",60178),lightbulbAutofix:R("lightbulb-autofix",60179),linkExternal:R("link-external",60180),link:R("link",60181),listOrdered:R("list-ordered",60182),listUnordered:R("list-unordered",60183),liveShare:R("live-share",60184),loading:R("loading",60185),location:R("location",60186),mailRead:R("mail-read",60187),mail:R("mail",60188),markdown:R("markdown",60189),megaphone:R("megaphone",60190),mention:R("mention",60191),milestone:R("milestone",60192),gitPullRequestMilestone:R("git-pull-request-milestone",60192),mortarBoard:R("mortar-board",60193),move:R("move",60194),multipleWindows:R("multiple-windows",60195),mute:R("mute",60196),noNewline:R("no-newline",60197),note:R("note",60198),octoface:R("octoface",60199),openPreview:R("open-preview",60200),package:R("package",60201),paintcan:R("paintcan",60202),pin:R("pin",60203),play:R("play",60204),run:R("run",60204),plug:R("plug",60205),preserveCase:R("preserve-case",60206),preview:R("preview",60207),project:R("project",60208),pulse:R("pulse",60209),question:R("question",60210),quote:R("quote",60211),radioTower:R("radio-tower",60212),reactions:R("reactions",60213),references:R("references",60214),refresh:R("refresh",60215),regex:R("regex",60216),remoteExplorer:R("remote-explorer",60217),remote:R("remote",60218),remove:R("remove",60219),replaceAll:R("replace-all",60220),replace:R("replace",60221),repoClone:R("repo-clone",60222),repoForcePush:R("repo-force-push",60223),repoPull:R("repo-pull",60224),repoPush:R("repo-push",60225),report:R("report",60226),requestChanges:R("request-changes",60227),rocket:R("rocket",60228),rootFolderOpened:R("root-folder-opened",60229),rootFolder:R("root-folder",60230),rss:R("rss",60231),ruby:R("ruby",60232),saveAll:R("save-all",60233),saveAs:R("save-as",60234),save:R("save",60235),screenFull:R("screen-full",60236),screenNormal:R("screen-normal",60237),searchStop:R("search-stop",60238),server:R("server",60240),settingsGear:R("settings-gear",60241),settings:R("settings",60242),shield:R("shield",60243),smiley:R("smiley",60244),sortPrecedence:R("sort-precedence",60245),splitHorizontal:R("split-horizontal",60246),splitVertical:R("split-vertical",60247),squirrel:R("squirrel",60248),starFull:R("star-full",60249),starHalf:R("star-half",60250),symbolClass:R("symbol-class",60251),symbolColor:R("symbol-color",60252),symbolConstant:R("symbol-constant",60253),symbolEnumMember:R("symbol-enum-member",60254),symbolField:R("symbol-field",60255),symbolFile:R("symbol-file",60256),symbolInterface:R("symbol-interface",60257),symbolKeyword:R("symbol-keyword",60258),symbolMisc:R("symbol-misc",60259),symbolOperator:R("symbol-operator",60260),symbolProperty:R("symbol-property",60261),wrench:R("wrench",60261),wrenchSubaction:R("wrench-subaction",60261),symbolSnippet:R("symbol-snippet",60262),tasklist:R("tasklist",60263),telescope:R("telescope",60264),textSize:R("text-size",60265),threeBars:R("three-bars",60266),thumbsdown:R("thumbsdown",60267),thumbsup:R("thumbsup",60268),tools:R("tools",60269),triangleDown:R("triangle-down",60270),triangleLeft:R("triangle-left",60271),triangleRight:R("triangle-right",60272),triangleUp:R("triangle-up",60273),twitter:R("twitter",60274),unfold:R("unfold",60275),unlock:R("unlock",60276),unmute:R("unmute",60277),unverified:R("unverified",60278),verified:R("verified",60279),versions:R("versions",60280),vmActive:R("vm-active",60281),vmOutline:R("vm-outline",60282),vmRunning:R("vm-running",60283),watch:R("watch",60284),whitespace:R("whitespace",60285),wholeWord:R("whole-word",60286),window:R("window",60287),wordWrap:R("word-wrap",60288),zoomIn:R("zoom-in",60289),zoomOut:R("zoom-out",60290),listFilter:R("list-filter",60291),listFlat:R("list-flat",60292),listSelection:R("list-selection",60293),selection:R("selection",60293),listTree:R("list-tree",60294),debugBreakpointFunctionUnverified:R("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:R("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:R("debug-breakpoint-function-disabled",60296),debugStackframeActive:R("debug-stackframe-active",60297),circleSmallFilled:R("circle-small-filled",60298),debugStackframeDot:R("debug-stackframe-dot",60298),terminalDecorationMark:R("terminal-decoration-mark",60298),debugStackframe:R("debug-stackframe",60299),debugStackframeFocused:R("debug-stackframe-focused",60299),debugBreakpointUnsupported:R("debug-breakpoint-unsupported",60300),symbolString:R("symbol-string",60301),debugReverseContinue:R("debug-reverse-continue",60302),debugStepBack:R("debug-step-back",60303),debugRestartFrame:R("debug-restart-frame",60304),debugAlt:R("debug-alt",60305),callIncoming:R("call-incoming",60306),callOutgoing:R("call-outgoing",60307),menu:R("menu",60308),expandAll:R("expand-all",60309),feedback:R("feedback",60310),gitPullRequestReviewer:R("git-pull-request-reviewer",60310),groupByRefType:R("group-by-ref-type",60311),ungroupByRefType:R("ungroup-by-ref-type",60312),account:R("account",60313),gitPullRequestAssignee:R("git-pull-request-assignee",60313),bellDot:R("bell-dot",60314),debugConsole:R("debug-console",60315),library:R("library",60316),output:R("output",60317),runAll:R("run-all",60318),syncIgnored:R("sync-ignored",60319),pinned:R("pinned",60320),githubInverted:R("github-inverted",60321),serverProcess:R("server-process",60322),serverEnvironment:R("server-environment",60323),pass:R("pass",60324),issueClosed:R("issue-closed",60324),stopCircle:R("stop-circle",60325),playCircle:R("play-circle",60326),record:R("record",60327),debugAltSmall:R("debug-alt-small",60328),vmConnect:R("vm-connect",60329),cloud:R("cloud",60330),merge:R("merge",60331),export:R("export",60332),graphLeft:R("graph-left",60333),magnet:R("magnet",60334),notebook:R("notebook",60335),redo:R("redo",60336),checkAll:R("check-all",60337),pinnedDirty:R("pinned-dirty",60338),passFilled:R("pass-filled",60339),circleLargeFilled:R("circle-large-filled",60340),circleLarge:R("circle-large",60341),circleLargeOutline:R("circle-large-outline",60341),combine:R("combine",60342),gather:R("gather",60342),table:R("table",60343),variableGroup:R("variable-group",60344),typeHierarchy:R("type-hierarchy",60345),typeHierarchySub:R("type-hierarchy-sub",60346),typeHierarchySuper:R("type-hierarchy-super",60347),gitPullRequestCreate:R("git-pull-request-create",60348),runAbove:R("run-above",60349),runBelow:R("run-below",60350),notebookTemplate:R("notebook-template",60351),debugRerun:R("debug-rerun",60352),workspaceTrusted:R("workspace-trusted",60353),workspaceUntrusted:R("workspace-untrusted",60354),workspaceUnknown:R("workspace-unknown",60355),terminalCmd:R("terminal-cmd",60356),terminalDebian:R("terminal-debian",60357),terminalLinux:R("terminal-linux",60358),terminalPowershell:R("terminal-powershell",60359),terminalTmux:R("terminal-tmux",60360),terminalUbuntu:R("terminal-ubuntu",60361),terminalBash:R("terminal-bash",60362),arrowSwap:R("arrow-swap",60363),copy:R("copy",60364),personAdd:R("person-add",60365),filterFilled:R("filter-filled",60366),wand:R("wand",60367),debugLineByLine:R("debug-line-by-line",60368),inspect:R("inspect",60369),layers:R("layers",60370),layersDot:R("layers-dot",60371),layersActive:R("layers-active",60372),compass:R("compass",60373),compassDot:R("compass-dot",60374),compassActive:R("compass-active",60375),azure:R("azure",60376),issueDraft:R("issue-draft",60377),gitPullRequestClosed:R("git-pull-request-closed",60378),gitPullRequestDraft:R("git-pull-request-draft",60379),debugAll:R("debug-all",60380),debugCoverage:R("debug-coverage",60381),runErrors:R("run-errors",60382),folderLibrary:R("folder-library",60383),debugContinueSmall:R("debug-continue-small",60384),beakerStop:R("beaker-stop",60385),graphLine:R("graph-line",60386),graphScatter:R("graph-scatter",60387),pieChart:R("pie-chart",60388),bracket:R("bracket",60175),bracketDot:R("bracket-dot",60389),bracketError:R("bracket-error",60390),lockSmall:R("lock-small",60391),azureDevops:R("azure-devops",60392),verifiedFilled:R("verified-filled",60393),newline:R("newline",60394),layout:R("layout",60395),layoutActivitybarLeft:R("layout-activitybar-left",60396),layoutActivitybarRight:R("layout-activitybar-right",60397),layoutPanelLeft:R("layout-panel-left",60398),layoutPanelCenter:R("layout-panel-center",60399),layoutPanelJustify:R("layout-panel-justify",60400),layoutPanelRight:R("layout-panel-right",60401),layoutPanel:R("layout-panel",60402),layoutSidebarLeft:R("layout-sidebar-left",60403),layoutSidebarRight:R("layout-sidebar-right",60404),layoutStatusbar:R("layout-statusbar",60405),layoutMenubar:R("layout-menubar",60406),layoutCentered:R("layout-centered",60407),target:R("target",60408),indent:R("indent",60409),recordSmall:R("record-small",60410),errorSmall:R("error-small",60411),terminalDecorationError:R("terminal-decoration-error",60411),arrowCircleDown:R("arrow-circle-down",60412),arrowCircleLeft:R("arrow-circle-left",60413),arrowCircleRight:R("arrow-circle-right",60414),arrowCircleUp:R("arrow-circle-up",60415),layoutSidebarRightOff:R("layout-sidebar-right-off",60416),layoutPanelOff:R("layout-panel-off",60417),layoutSidebarLeftOff:R("layout-sidebar-left-off",60418),blank:R("blank",60419),heartFilled:R("heart-filled",60420),map:R("map",60421),mapHorizontal:R("map-horizontal",60421),foldHorizontal:R("fold-horizontal",60421),mapFilled:R("map-filled",60422),mapHorizontalFilled:R("map-horizontal-filled",60422),foldHorizontalFilled:R("fold-horizontal-filled",60422),circleSmall:R("circle-small",60423),bellSlash:R("bell-slash",60424),bellSlashDot:R("bell-slash-dot",60425),commentUnresolved:R("comment-unresolved",60426),gitPullRequestGoToChanges:R("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:R("git-pull-request-new-changes",60428),searchFuzzy:R("search-fuzzy",60429),commentDraft:R("comment-draft",60430),send:R("send",60431),sparkle:R("sparkle",60432),insert:R("insert",60433),mic:R("mic",60434),thumbsdownFilled:R("thumbsdown-filled",60435),thumbsupFilled:R("thumbsup-filled",60436),coffee:R("coffee",60437),snake:R("snake",60438),game:R("game",60439),vr:R("vr",60440),chip:R("chip",60441),piano:R("piano",60442),music:R("music",60443),micFilled:R("mic-filled",60444),repoFetch:R("repo-fetch",60445),copilot:R("copilot",60446),lightbulbSparkle:R("lightbulb-sparkle",60447),robot:R("robot",60448),sparkleFilled:R("sparkle-filled",60449),diffSingle:R("diff-single",60450),diffMultiple:R("diff-multiple",60451),surroundWith:R("surround-with",60452),share:R("share",60453),gitStash:R("git-stash",60454),gitStashApply:R("git-stash-apply",60455),gitStashPop:R("git-stash-pop",60456),vscode:R("vscode",60457),vscodeInsiders:R("vscode-insiders",60458),codeOss:R("code-oss",60459),runCoverage:R("run-coverage",60460),runAllCoverage:R("run-all-coverage",60461),coverage:R("coverage",60462),githubProject:R("github-project",60463),mapVertical:R("map-vertical",60464),foldVertical:R("fold-vertical",60464),mapVerticalFilled:R("map-vertical-filled",60465),foldVerticalFilled:R("fold-vertical-filled",60465),goToSearch:R("go-to-search",60466),percentage:R("percentage",60467),sortPercentage:R("sort-percentage",60467),attach:R("attach",60468)},q5e={dialogError:R("dialog-error","error"),dialogWarning:R("dialog-warning","warning"),dialogInfo:R("dialog-info","info"),dialogClose:R("dialog-close","close"),treeItemExpanded:R("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:R("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:R("tree-filter-on-type-off","list-selection"),treeFilterClear:R("tree-filter-clear","close"),treeItemLoading:R("tree-item-loading","loading"),menuSelection:R("menu-selection","check"),menuSubmenu:R("menu-submenu","chevron-right"),menuBarMore:R("menubar-more","more"),scrollbarButtonLeft:R("scrollbar-button-left","triangle-left"),scrollbarButtonRight:R("scrollbar-button-right","triangle-right"),scrollbarButtonUp:R("scrollbar-button-up","triangle-up"),scrollbarButtonDown:R("scrollbar-button-down","triangle-down"),toolBarMore:R("toolbar-more","more"),quickInputBack:R("quick-input-back","arrow-left"),dropDownButton:R("drop-down-button",60084),symbolCustomColor:R("symbol-customcolor",60252),exportIcon:R("export",60332),workspaceUnspecified:R("workspace-unspecified",60355),newLine:R("newline",60394),thumbsDownFilled:R("thumbsdown-filled",60435),thumbsUpFilled:R("thumbsup-filled",60436),gitFetch:R("git-fetch",60445),lightbulbSparkleAutofix:R("lightbulb-sparkle-autofix",60447),debugBreakpointPending:R("debug-breakpoint-pending",60377)},Qe={...Q5e,...q5e};var m3;(function(n){function e(t){return t&&typeof t=="object"&&typeof t.id=="string"}n.isThemeColor=e})(m3||(m3={}));var Vt;(function(n){n.iconNameSegment="[A-Za-z0-9]+",n.iconNameExpression="[A-Za-z0-9-]+",n.iconModifierExpression="~[A-Za-z]+",n.iconNameCharacter="[A-Za-z0-9~-]";const e=new RegExp(`^(${n.iconNameExpression})(${n.iconModifierExpression})?$`);function t(h){const f=e.exec(h.id);if(!f)return t(Qe.error);const[,g,m]=f,p=["codicon","codicon-"+g];return m&&p.push("codicon-modifier-"+m.substring(1)),p}n.asClassNameArray=t;function i(h){return t(h).join(" ")}n.asClassName=i;function s(h){return"."+t(h).join(".")}n.asCSSSelector=s;function r(h){return h&&typeof h=="object"&&typeof h.id=="string"&&(typeof h.color>"u"||m3.isThemeColor(h.color))}n.isThemeIcon=r;const o=new RegExp(`^\\$\\((${n.iconNameExpression}(?:${n.iconModifierExpression})?)\\)$`);function a(h){const f=o.exec(h);if(!f)return;const[,g]=f;return{id:g}}n.fromString=a;function l(h){return{id:h}}n.fromId=l;function c(h,f){let g=h.id;const m=g.lastIndexOf("~");return m!==-1&&(g=g.substring(0,m)),f&&(g=`${g}~${f}`),{id:g}}n.modify=c;function d(h){const f=h.id.lastIndexOf("~");if(f!==-1)return h.id.substring(f+1)}n.getModifier=d;function u(h,f){var g,m;return h.id===f.id&&((g=h.color)===null||g===void 0?void 0:g.id)===((m=f.color)===null||m===void 0?void 0:m.id)}n.isEqual=u})(Vt||(Vt={}));const eo=ri("commandService"),cs=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new ue,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(n,e){if(!n)throw new Error("invalid command");if(typeof n=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:n,handler:e})}if(n.metadata&&Array.isArray(n.metadata.args)){const o=[];for(const l of n.metadata.args)o.push(l.constraint);const a=n.handler;n.handler=function(l,...c){return IEe(c,o),a(l,...c)}}const{id:t}=n;let i=this._commands.get(t);i||(i=new co,this._commands.set(t,i));const s=i.unshift(n),r=Et(()=>{s();const o=this._commands.get(t);o?.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),r}registerCommandAlias(n,e){return cs.registerCommand(n,(t,...i)=>t.get(eo).executeCommand(e,...i))}getCommand(n){const e=this._commands.get(n);if(!(!e||e.isEmpty()))return ci.first(e)}getCommands(){const n=new Map;for(const e of this._commands.keys()){const t=this.getCommand(e);t&&n.set(e,t)}return n}};cs.registerCommand("noop",()=>{});function G5(...n){switch(n.length){case 1:return L("contextkey.scanner.hint.didYouMean1","Did you mean {0}?",n[0]);case 2:return L("contextkey.scanner.hint.didYouMean2","Did you mean {0} or {1}?",n[0],n[1]);case 3:return L("contextkey.scanner.hint.didYouMean3","Did you mean {0}, {1} or {2}?",n[0],n[1],n[2]);default:return}}const eRe=L("contextkey.scanner.hint.didYouForgetToOpenOrCloseQuote","Did you forget to open or close the quote?"),tRe=L("contextkey.scanner.hint.didYouForgetToEscapeSlash","Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'.");let Af=class p3{constructor(){this._input="",this._start=0,this._current=0,this._tokens=[],this._errors=[],this.stringRe=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(e){switch(e.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return e.isTripleEq?"===":"==";case 4:return e.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return e.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return e.lexeme;case 18:return e.lexeme;case 19:return e.lexeme;case 20:return"EOF";default:throw yV(`unhandled token type: ${JSON.stringify(e)}; have you forgotten to add a case?`)}}reset(e){return this._input=e,this._start=0,this._current=0,this._tokens=[],this._errors=[],this}scan(){for(;!this._isAtEnd();)switch(this._start=this._current,this._advance()){case 40:this._addToken(0);break;case 41:this._addToken(1);break;case 33:if(this._match(61)){const t=this._match(61);this._tokens.push({type:4,offset:this._start,isTripleEq:t})}else this._addToken(2);break;case 39:this._quotedString();break;case 47:this._regex();break;case 61:if(this._match(61)){const t=this._match(61);this._tokens.push({type:3,offset:this._start,isTripleEq:t})}else this._match(126)?this._addToken(9):this._error(G5("==","=~"));break;case 60:this._addToken(this._match(61)?6:5);break;case 62:this._addToken(this._match(61)?8:7);break;case 38:this._match(38)?this._addToken(15):this._error(G5("&&"));break;case 124:this._match(124)?this._addToken(16):this._error(G5("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this._string()}return this._start=this._current,this._addToken(20),Array.from(this._tokens)}_match(e){return this._isAtEnd()||this._input.charCodeAt(this._current)!==e?!1:(this._current++,!0)}_advance(){return this._input.charCodeAt(this._current++)}_peek(){return this._isAtEnd()?0:this._input.charCodeAt(this._current)}_addToken(e){this._tokens.push({type:e,offset:this._start})}_error(e){const t=this._start,i=this._input.substring(this._start,this._current),s={type:19,offset:this._start,lexeme:i};this._errors.push({offset:t,lexeme:i,additionalInfo:e}),this._tokens.push(s)}_string(){this.stringRe.lastIndex=this._start;const e=this.stringRe.exec(this._input);if(e){this._current=this._start+e[0].length;const t=this._input.substring(this._start,this._current),i=p3._keywords.get(t);i?this._addToken(i):this._tokens.push({type:17,lexeme:t,offset:this._start})}}_quotedString(){for(;this._peek()!==39&&!this._isAtEnd();)this._advance();if(this._isAtEnd()){this._error(eRe);return}this._advance(),this._tokens.push({type:18,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1})}_regex(){let e=this._current,t=!1,i=!1;for(;;){if(e>=this._input.length){this._current=e,this._error(tRe);return}const r=this._input.charCodeAt(e);if(t)t=!1;else if(r===47&&!i){e++;break}else r===91?i=!0:r===92?t=!0:r===93&&(i=!1);e++}for(;e<this._input.length&&p3._regexFlags.has(this._input.charCodeAt(e));)e++;this._current=e;const s=this._input.substring(this._start,this._current);this._tokens.push({type:10,lexeme:s,offset:this._start})}_isAtEnd(){return this._current>=this._input.length}};Af._regexFlags=new Set(["i","g","s","m","y","u"].map(n=>n.charCodeAt(0)));Af._keywords=new Map([["not",14],["in",13],["false",12],["true",11]]);const Qs=new Map;Qs.set("false",!1);Qs.set("true",!0);Qs.set("isMac",jt);Qs.set("isLinux",Er);Qs.set("isWindows",Mr);Qs.set("isWeb",rf);Qs.set("isMacNative",jt&&!rf);Qs.set("isEdge",OEe);Qs.set("isFirefox",VEe);Qs.set("isChrome",Xte);Qs.set("isSafari",PEe);const iRe=Object.prototype.hasOwnProperty,nRe={regexParsingWithErrorRecovery:!0},sRe=L("contextkey.parser.error.emptyString","Empty context key expression"),rRe=L("contextkey.parser.error.emptyString.hint","Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively."),oRe=L("contextkey.parser.error.noInAfterNot","'in' after 'not'."),_H=L("contextkey.parser.error.closingParenthesis","closing parenthesis ')'"),aRe=L("contextkey.parser.error.unexpectedToken","Unexpected token"),lRe=L("contextkey.parser.error.unexpectedToken.hint","Did you forget to put && or || before the token?"),cRe=L("contextkey.parser.error.unexpectedEOF","Unexpected end of expression"),dRe=L("contextkey.parser.error.unexpectedEOF.hint","Did you forget to put a context key?");let Wie=class xv{constructor(e=nRe){this._config=e,this._scanner=new Af,this._tokens=[],this._current=0,this._parsingErrors=[],this._flagsGYRe=/g|y/g}parse(e){if(e===""){this._parsingErrors.push({message:sRe,offset:0,lexeme:"",additionalInfo:rRe});return}this._tokens=this._scanner.reset(e).scan(),this._current=0,this._parsingErrors=[];try{const t=this._expr();if(!this._isAtEnd()){const i=this._peek(),s=i.type===17?lRe:void 0;throw this._parsingErrors.push({message:aRe,offset:i.offset,lexeme:Af.getLexeme(i),additionalInfo:s}),xv._parseError}return t}catch(t){if(t!==xv._parseError)throw t;return}}_expr(){return this._or()}_or(){const e=[this._and()];for(;this._matchOne(16);){const t=this._and();e.push(t)}return e.length===1?e[0]:Wt.or(...e)}_and(){const e=[this._term()];for(;this._matchOne(15);){const t=this._term();e.push(t)}return e.length===1?e[0]:Wt.and(...e)}_term(){if(this._matchOne(2)){const e=this._peek();switch(e.type){case 11:return this._advance(),Nr.INSTANCE;case 12:return this._advance(),Qr.INSTANCE;case 0:{this._advance();const t=this._expr();return this._consume(1,_H),t?.negate()}case 17:return this._advance(),om.create(e.lexeme);default:throw this._errExpectedButGot("KEY | true | false | '(' expression ')'",e)}}return this._primary()}_primary(){const e=this._peek();switch(e.type){case 11:return this._advance(),Wt.true();case 12:return this._advance(),Wt.false();case 0:{this._advance();const t=this._expr();return this._consume(1,_H),t}case 17:{const t=e.lexeme;if(this._advance(),this._matchOne(9)){const s=this._peek();if(!this._config.regexParsingWithErrorRecovery){if(this._advance(),s.type!==10)throw this._errExpectedButGot("REGEX",s);const r=s.lexeme,o=r.lastIndexOf("/"),a=o===r.length-1?void 0:this._removeFlagsGY(r.substring(o+1));let l;try{l=new RegExp(r.substring(1,o),a)}catch{throw this._errExpectedButGot("REGEX",s)}return P_.create(t,l)}switch(s.type){case 10:case 19:{const r=[s.lexeme];this._advance();let o=this._peek(),a=0;for(let h=0;h<s.lexeme.length;h++)s.lexeme.charCodeAt(h)===40?a++:s.lexeme.charCodeAt(h)===41&&a--;for(;!this._isAtEnd()&&o.type!==15&&o.type!==16;){switch(o.type){case 0:a++;break;case 1:a--;break;case 10:case 18:for(let h=0;h<o.lexeme.length;h++)o.lexeme.charCodeAt(h)===40?a++:s.lexeme.charCodeAt(h)===41&&a--}if(a<0)break;r.push(Af.getLexeme(o)),this._advance(),o=this._peek()}const l=r.join(""),c=l.lastIndexOf("/"),d=c===l.length-1?void 0:this._removeFlagsGY(l.substring(c+1));let u;try{u=new RegExp(l.substring(1,c),d)}catch{throw this._errExpectedButGot("REGEX",s)}return Wt.regex(t,u)}case 18:{const r=s.lexeme;this._advance();let o=null;if(!PNe(r)){const a=r.indexOf("/"),l=r.lastIndexOf("/");if(a!==l&&a>=0){const c=r.slice(a+1,l),d=r[l+1]==="i"?"i":"";try{o=new RegExp(c,d)}catch{throw this._errExpectedButGot("REGEX",s)}}}if(o===null)throw this._errExpectedButGot("REGEX",s);return P_.create(t,o)}default:throw this._errExpectedButGot("REGEX",this._peek())}}if(this._matchOne(14)){this._consume(13,oRe);const s=this._value();return Wt.notIn(t,s)}switch(this._peek().type){case 3:{this._advance();const s=this._value();if(this._previous().type===18)return Wt.equals(t,s);switch(s){case"true":return Wt.has(t);case"false":return Wt.not(t);default:return Wt.equals(t,s)}}case 4:{this._advance();const s=this._value();if(this._previous().type===18)return Wt.notEquals(t,s);switch(s){case"true":return Wt.not(t);case"false":return Wt.has(t);default:return Wt.notEquals(t,s)}}case 5:return this._advance(),I2.create(t,this._value());case 6:return this._advance(),M2.create(t,this._value());case 7:return this._advance(),T2.create(t,this._value());case 8:return this._advance(),D2.create(t,this._value());case 13:return this._advance(),Wt.in(t,this._value());default:return Wt.has(t)}}case 20:throw this._parsingErrors.push({message:cRe,offset:e.offset,lexeme:"",additionalInfo:dRe}),xv._parseError;default:throw this._errExpectedButGot(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this._peek())}}_value(){const e=this._peek();switch(e.type){case 17:case 18:return this._advance(),e.lexeme;case 11:return this._advance(),"true";case 12:return this._advance(),"false";case 13:return this._advance(),"in";default:return""}}_removeFlagsGY(e){return e.replaceAll(this._flagsGYRe,"")}_previous(){return this._tokens[this._current-1]}_matchOne(e){return this._check(e)?(this._advance(),!0):!1}_advance(){return this._isAtEnd()||this._current++,this._previous()}_consume(e,t){if(this._check(e))return this._advance();throw this._errExpectedButGot(t,this._peek())}_errExpectedButGot(e,t,i){const s=L("contextkey.parser.error.expectedButGot",`Expected: {0}
Received: '{1}'.`,e,Af.getLexeme(t)),r=t.offset,o=Af.getLexeme(t);return this._parsingErrors.push({message:s,offset:r,lexeme:o,additionalInfo:i}),xv._parseError}_check(e){return this._peek().type===e}_peek(){return this._tokens[this._current]}_isAtEnd(){return this._peek().type===20}};Wie._parseError=new Error;class Wt{static false(){return Nr.INSTANCE}static true(){return Qr.INSTANCE}static has(e){return rm.create(e)}static equals(e,t){return fw.create(e,t)}static notEquals(e,t){return k2.create(e,t)}static regex(e,t){return P_.create(e,t)}static in(e,t){return C2.create(e,t)}static notIn(e,t){return L2.create(e,t)}static not(e){return om.create(e)}static and(...e){return Uf.create(e,null,!0)}static or(...e){return gd.create(e,null,!0)}static deserialize(e){return e==null?void 0:this._parser.parse(e)}}Wt._parser=new Wie({regexParsingWithErrorRecovery:!1});function uRe(n,e){const t=n?n.substituteConstants():void 0,i=e?e.substituteConstants():void 0;return!t&&!i?!0:!t||!i?!1:t.equals(i)}function $v(n,e){return n.cmp(e)}class Nr{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}negate(){return Qr.INSTANCE}}Nr.INSTANCE=new Nr;class Qr{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}negate(){return Nr.INSTANCE}}Qr.INSTANCE=new Qr;class rm{static create(e,t=null){const i=Qs.get(e);return typeof i=="boolean"?i?Qr.INSTANCE:Nr.INSTANCE:new rm(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=2}cmp(e){return e.type!==this.type?this.type-e.type:Fie(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Qs.get(this.key);return typeof e=="boolean"?e?Qr.INSTANCE:Nr.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=om.create(this.key,this)),this.negated}}class fw{static create(e,t,i=null){if(typeof t=="boolean")return t?rm.create(e,i):om.create(e,i);const s=Qs.get(e);return typeof s=="boolean"?t===(s?"true":"false")?Qr.INSTANCE:Nr.INSTANCE:new fw(e,t,i)}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=4}cmp(e){return e.type!==this.type?this.type-e.type:am(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Qs.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Qr.INSTANCE:Nr.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=k2.create(this.key,this.value,this)),this.negated}}class C2{static create(e,t){return new C2(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}cmp(e){return e.type!==this.type?this.type-e.type:am(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.valueKey),i=e.getValue(this.key);return Array.isArray(t)?t.includes(i):typeof i=="string"&&typeof t=="object"&&t!==null?iRe.call(t,i):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=L2.create(this.key,this.valueKey)),this.negated}}class L2{static create(e,t){return new L2(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=11,this._negated=C2.create(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:this._negated.cmp(e._negated)}equals(e){return e.type===this.type?this._negated.equals(e._negated):!1}substituteConstants(){return this}evaluate(e){return!this._negated.evaluate(e)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}negate(){return this._negated}}class k2{static create(e,t,i=null){if(typeof t=="boolean")return t?om.create(e,i):rm.create(e,i);const s=Qs.get(e);return typeof s=="boolean"?t===(s?"true":"false")?Nr.INSTANCE:Qr.INSTANCE:new k2(e,t,i)}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=5}cmp(e){return e.type!==this.type?this.type-e.type:am(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Qs.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Nr.INSTANCE:Qr.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=fw.create(this.key,this.value,this)),this.negated}}class om{static create(e,t=null){const i=Qs.get(e);return typeof i=="boolean"?i?Nr.INSTANCE:Qr.INSTANCE:new om(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=3}cmp(e){return e.type!==this.type?this.type-e.type:Fie(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Qs.get(this.key);return typeof e=="boolean"?e?Nr.INSTANCE:Qr.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=rm.create(this.key,this)),this.negated}}function x2(n,e){if(typeof n=="string"){const t=parseFloat(n);isNaN(t)||(n=t)}return typeof n=="string"||typeof n=="number"?e(n):Nr.INSTANCE}class T2{static create(e,t,i=null){return x2(t,s=>new T2(e,s,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=12}cmp(e){return e.type!==this.type?this.type-e.type:am(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=M2.create(this.key,this.value,this)),this.negated}}class D2{static create(e,t,i=null){return x2(t,s=>new D2(e,s,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=13}cmp(e){return e.type!==this.type?this.type-e.type:am(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=I2.create(this.key,this.value,this)),this.negated}}class I2{static create(e,t,i=null){return x2(t,s=>new I2(e,s,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=14}cmp(e){return e.type!==this.type?this.type-e.type:am(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=D2.create(this.key,this.value,this)),this.negated}}class M2{static create(e,t,i=null){return x2(t,s=>new M2(e,s,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=15}cmp(e){return e.type!==this.type?this.type-e.type:am(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=T2.create(this.key,this.value,this)),this.negated}}class P_{static create(e,t){return new P_(e,t)}constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return t<i?-1:t>i?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return this.key===e.key&&t===i}return!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.flags}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ZV.create(this)),this.negated}}class ZV{static create(e){return new ZV(e)}constructor(e){this._actual=e,this.type=8}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){return`!(${this._actual.serialize()})`}keys(){return this._actual.keys()}negate(){return this._actual}}function Aie(n){let e=null;for(let t=0,i=n.length;t<i;t++){const s=n[t].substituteConstants();if(n[t]!==s&&e===null){e=[];for(let r=0;r<t;r++)e[r]=n[r]}e!==null&&(e[t]=s)}return e===null?n:e}class Uf{static create(e,t,i){return Uf._normalizeArr(e,t,i)}constructor(e,t){this.expr=e,this.negated=t,this.type=6}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){const s=$v(this.expr[t],e.expr[t]);if(s!==0)return s}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=Aie(this.expr);return e===this.expr?this:Uf.create(e,this.negated,!1)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t,i){const s=[];let r=!1;for(const o of e)if(o){if(o.type===1){r=!0;continue}if(o.type===0)return Nr.INSTANCE;if(o.type===6){s.push(...o.expr);continue}s.push(o)}if(s.length===0&&r)return Qr.INSTANCE;if(s.length!==0){if(s.length===1)return s[0];s.sort($v);for(let o=1;o<s.length;o++)s[o-1].equals(s[o])&&(s.splice(o,1),o--);if(s.length===1)return s[0];for(;s.length>1;){const o=s[s.length-1];if(o.type!==9)break;s.pop();const a=s.pop(),l=s.length===0,c=gd.create(o.expr.map(d=>Uf.create([d,a],null,i)),null,l);c&&(s.push(c),s.sort($v))}if(s.length===1)return s[0];if(i){for(let o=0;o<s.length;o++)for(let a=o+1;a<s.length;a++)if(s[o].negate().equals(s[a]))return Nr.INSTANCE;if(s.length===1)return s[0]}return new Uf(s,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());this.negated=gd.create(e,this,!0)}return this.negated}}class gd{static create(e,t,i){return gd._normalizeArr(e,t,i)}constructor(e,t){this.expr=e,this.negated=t,this.type=9}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){const s=$v(this.expr[t],e.expr[t]);if(s!==0)return s}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=Aie(this.expr);return e===this.expr?this:gd.create(e,this.negated,!1)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,i){let s=[],r=!1;if(e){for(let o=0,a=e.length;o<a;o++){const l=e[o];if(l){if(l.type===0){r=!0;continue}if(l.type===1)return Qr.INSTANCE;if(l.type===9){s=s.concat(l.expr);continue}s.push(l)}}if(s.length===0&&r)return Nr.INSTANCE;s.sort($v)}if(s.length!==0){if(s.length===1)return s[0];for(let o=1;o<s.length;o++)s[o-1].equals(s[o])&&(s.splice(o,1),o--);if(s.length===1)return s[0];if(i){for(let o=0;o<s.length;o++)for(let a=o+1;a<s.length;a++)if(s[o].negate().equals(s[a]))return Qr.INSTANCE;if(s.length===1)return s[0]}return new gd(s,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());for(;e.length>1;){const t=e.shift(),i=e.shift(),s=[];for(const r of yH(t))for(const o of yH(i))s.push(Uf.create([r,o],null,!1));e.unshift(gd.create(s,null,!1))}this.negated=gd.create(e,this,!0)}return this.negated}}class it extends rm{static all(){return it._info.values()}constructor(e,t,i){super(e,null),this._defaultValue=t,typeof i=="object"?it._info.push({...i,key:e}):i!==!0&&it._info.push({key:e,description:i,type:t!=null?typeof t:void 0})}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return fw.create(this.key,e)}}it._info=[];const oi=ri("contextKeyService");function Fie(n,e){return n<e?-1:n>e?1:0}function am(n,e,t,i){return n<t?-1:n>t?1:e<i?-1:e>i?1:0}function b3(n,e){if(n.type===0||e.type===1)return!0;if(n.type===9)return e.type===9?wH(n.expr,e.expr):!1;if(e.type===9){for(const t of e.expr)if(b3(n,t))return!0;return!1}if(n.type===6){if(e.type===6)return wH(e.expr,n.expr);for(const t of n.expr)if(b3(t,e))return!0;return!1}return n.equals(e)}function wH(n,e){let t=0,i=0;for(;t<n.length&&i<e.length;){const s=n[t].cmp(e[i]);if(s<0)return!1;s===0&&t++,i++}return t===n.length}function yH(n){return n.type===9?n.expr:[n]}function B5(n,e){if(!n)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}function GV(n,e="Unreachable"){throw new Error(e)}function SH(n){n||gi(new Ai("Soft Assertion Failed"))}function Ng(n){if(!n()){debugger;n(),gi(new Ai("Assertion Failed"))}}function BV(n,e){let t=0;for(;t<n.length-1;){const i=n[t],s=n[t+1];if(!e(i,s))return!1;t++}return!0}class hRe{constructor(){this.data=new Map}add(e,t){B5(Dr(e)),B5(Ha(t)),B5(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}as(e){return this.data.get(e)||null}}const Ss=new hRe;class XV{constructor(){this._coreKeybindings=new co,this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(Ma===1){if(e&&e.win)return e.win}else if(Ma===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=XV.bindToCurrentPlatform(e),i=new ct;if(t&&t.primary){const s=$9(t.primary,Ma);s&&i.add(this._registerDefaultKeybinding(s,e.id,e.args,e.weight,0,e.when))}if(t&&Array.isArray(t.secondary))for(let s=0,r=t.secondary.length;s<r;s++){const o=t.secondary[s],a=$9(o,Ma);a&&i.add(this._registerDefaultKeybinding(a,e.id,e.args,e.weight,-s-1,e.when))}return i}registerCommandAndKeybindingRule(e){return xc(this.registerKeybindingRule(e),cs.registerCommand(e))}_registerDefaultKeybinding(e,t,i,s,r,o){const a=this._coreKeybindings.push({keybinding:e,command:t,commandArgs:i,when:o,weight1:s,weight2:r,extensionId:null,isBuiltinExtension:!1});return this._cachedMergedKeybindings=null,Et(()=>{a(),this._cachedMergedKeybindings=null})}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=Array.from(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(gRe)),this._cachedMergedKeybindings.slice(0)}}const lm=new XV,fRe={EditorModes:"platform.keybindingsRegistry"};Ss.add(fRe.EditorModes,lm);function gRe(n,e){if(n.weight1!==e.weight1)return n.weight1-e.weight1;if(n.command&&e.command){if(n.command<e.command)return-1;if(n.command>e.command)return 1}return n.weight2-e.weight2}var mRe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},CH=function(n,e){return function(t,i){e(t,i,n)}},GS;function Tv(n){return n.command!==void 0}function pRe(n){return n.submenu!==void 0}class X{constructor(e){if(X._instances.has(e))throw new TypeError(`MenuId with identifier '${e}' already exists. Use MenuId.for(ident) or a unique identifier`);X._instances.set(e,this),this.id=e}}X._instances=new Map;X.CommandPalette=new X("CommandPalette");X.DebugBreakpointsContext=new X("DebugBreakpointsContext");X.DebugCallStackContext=new X("DebugCallStackContext");X.DebugConsoleContext=new X("DebugConsoleContext");X.DebugVariablesContext=new X("DebugVariablesContext");X.NotebookVariablesContext=new X("NotebookVariablesContext");X.DebugHoverContext=new X("DebugHoverContext");X.DebugWatchContext=new X("DebugWatchContext");X.DebugToolBar=new X("DebugToolBar");X.DebugToolBarStop=new X("DebugToolBarStop");X.EditorContext=new X("EditorContext");X.SimpleEditorContext=new X("SimpleEditorContext");X.EditorContent=new X("EditorContent");X.EditorLineNumberContext=new X("EditorLineNumberContext");X.EditorContextCopy=new X("EditorContextCopy");X.EditorContextPeek=new X("EditorContextPeek");X.EditorContextShare=new X("EditorContextShare");X.EditorTitle=new X("EditorTitle");X.EditorTitleRun=new X("EditorTitleRun");X.EditorTitleContext=new X("EditorTitleContext");X.EditorTitleContextShare=new X("EditorTitleContextShare");X.EmptyEditorGroup=new X("EmptyEditorGroup");X.EmptyEditorGroupContext=new X("EmptyEditorGroupContext");X.EditorTabsBarContext=new X("EditorTabsBarContext");X.EditorTabsBarShowTabsSubmenu=new X("EditorTabsBarShowTabsSubmenu");X.EditorTabsBarShowTabsZenModeSubmenu=new X("EditorTabsBarShowTabsZenModeSubmenu");X.EditorActionsPositionSubmenu=new X("EditorActionsPositionSubmenu");X.ExplorerContext=new X("ExplorerContext");X.ExplorerContextShare=new X("ExplorerContextShare");X.ExtensionContext=new X("ExtensionContext");X.GlobalActivity=new X("GlobalActivity");X.CommandCenter=new X("CommandCenter");X.CommandCenterCenter=new X("CommandCenterCenter");X.LayoutControlMenuSubmenu=new X("LayoutControlMenuSubmenu");X.LayoutControlMenu=new X("LayoutControlMenu");X.MenubarMainMenu=new X("MenubarMainMenu");X.MenubarAppearanceMenu=new X("MenubarAppearanceMenu");X.MenubarDebugMenu=new X("MenubarDebugMenu");X.MenubarEditMenu=new X("MenubarEditMenu");X.MenubarCopy=new X("MenubarCopy");X.MenubarFileMenu=new X("MenubarFileMenu");X.MenubarGoMenu=new X("MenubarGoMenu");X.MenubarHelpMenu=new X("MenubarHelpMenu");X.MenubarLayoutMenu=new X("MenubarLayoutMenu");X.MenubarNewBreakpointMenu=new X("MenubarNewBreakpointMenu");X.PanelAlignmentMenu=new X("PanelAlignmentMenu");X.PanelPositionMenu=new X("PanelPositionMenu");X.ActivityBarPositionMenu=new X("ActivityBarPositionMenu");X.MenubarPreferencesMenu=new X("MenubarPreferencesMenu");X.MenubarRecentMenu=new X("MenubarRecentMenu");X.MenubarSelectionMenu=new X("MenubarSelectionMenu");X.MenubarShare=new X("MenubarShare");X.MenubarSwitchEditorMenu=new X("MenubarSwitchEditorMenu");X.MenubarSwitchGroupMenu=new X("MenubarSwitchGroupMenu");X.MenubarTerminalMenu=new X("MenubarTerminalMenu");X.MenubarViewMenu=new X("MenubarViewMenu");X.MenubarHomeMenu=new X("MenubarHomeMenu");X.OpenEditorsContext=new X("OpenEditorsContext");X.OpenEditorsContextShare=new X("OpenEditorsContextShare");X.ProblemsPanelContext=new X("ProblemsPanelContext");X.SCMInputBox=new X("SCMInputBox");X.SCMChangesSeparator=new X("SCMChangesSeparator");X.SCMIncomingChanges=new X("SCMIncomingChanges");X.SCMIncomingChangesContext=new X("SCMIncomingChangesContext");X.SCMIncomingChangesSetting=new X("SCMIncomingChangesSetting");X.SCMOutgoingChanges=new X("SCMOutgoingChanges");X.SCMOutgoingChangesContext=new X("SCMOutgoingChangesContext");X.SCMOutgoingChangesSetting=new X("SCMOutgoingChangesSetting");X.SCMIncomingChangesAllChangesContext=new X("SCMIncomingChangesAllChangesContext");X.SCMIncomingChangesHistoryItemContext=new X("SCMIncomingChangesHistoryItemContext");X.SCMOutgoingChangesAllChangesContext=new X("SCMOutgoingChangesAllChangesContext");X.SCMOutgoingChangesHistoryItemContext=new X("SCMOutgoingChangesHistoryItemContext");X.SCMChangeContext=new X("SCMChangeContext");X.SCMResourceContext=new X("SCMResourceContext");X.SCMResourceContextShare=new X("SCMResourceContextShare");X.SCMResourceFolderContext=new X("SCMResourceFolderContext");X.SCMResourceGroupContext=new X("SCMResourceGroupContext");X.SCMSourceControl=new X("SCMSourceControl");X.SCMSourceControlInline=new X("SCMSourceControlInline");X.SCMSourceControlTitle=new X("SCMSourceControlTitle");X.SCMTitle=new X("SCMTitle");X.SearchContext=new X("SearchContext");X.SearchActionMenu=new X("SearchActionContext");X.StatusBarWindowIndicatorMenu=new X("StatusBarWindowIndicatorMenu");X.StatusBarRemoteIndicatorMenu=new X("StatusBarRemoteIndicatorMenu");X.StickyScrollContext=new X("StickyScrollContext");X.TestItem=new X("TestItem");X.TestItemGutter=new X("TestItemGutter");X.TestMessageContext=new X("TestMessageContext");X.TestMessageContent=new X("TestMessageContent");X.TestPeekElement=new X("TestPeekElement");X.TestPeekTitle=new X("TestPeekTitle");X.TouchBarContext=new X("TouchBarContext");X.TitleBarContext=new X("TitleBarContext");X.TitleBarTitleContext=new X("TitleBarTitleContext");X.TunnelContext=new X("TunnelContext");X.TunnelPrivacy=new X("TunnelPrivacy");X.TunnelProtocol=new X("TunnelProtocol");X.TunnelPortInline=new X("TunnelInline");X.TunnelTitle=new X("TunnelTitle");X.TunnelLocalAddressInline=new X("TunnelLocalAddressInline");X.TunnelOriginInline=new X("TunnelOriginInline");X.ViewItemContext=new X("ViewItemContext");X.ViewContainerTitle=new X("ViewContainerTitle");X.ViewContainerTitleContext=new X("ViewContainerTitleContext");X.ViewTitle=new X("ViewTitle");X.ViewTitleContext=new X("ViewTitleContext");X.CommentEditorActions=new X("CommentEditorActions");X.CommentThreadTitle=new X("CommentThreadTitle");X.CommentThreadActions=new X("CommentThreadActions");X.CommentThreadAdditionalActions=new X("CommentThreadAdditionalActions");X.CommentThreadTitleContext=new X("CommentThreadTitleContext");X.CommentThreadCommentContext=new X("CommentThreadCommentContext");X.CommentTitle=new X("CommentTitle");X.CommentActions=new X("CommentActions");X.CommentsViewThreadActions=new X("CommentsViewThreadActions");X.InteractiveToolbar=new X("InteractiveToolbar");X.InteractiveCellTitle=new X("InteractiveCellTitle");X.InteractiveCellDelete=new X("InteractiveCellDelete");X.InteractiveCellExecute=new X("InteractiveCellExecute");X.InteractiveInputExecute=new X("InteractiveInputExecute");X.IssueReporter=new X("IssueReporter");X.NotebookToolbar=new X("NotebookToolbar");X.NotebookStickyScrollContext=new X("NotebookStickyScrollContext");X.NotebookCellTitle=new X("NotebookCellTitle");X.NotebookCellDelete=new X("NotebookCellDelete");X.NotebookCellInsert=new X("NotebookCellInsert");X.NotebookCellBetween=new X("NotebookCellBetween");X.NotebookCellListTop=new X("NotebookCellTop");X.NotebookCellExecute=new X("NotebookCellExecute");X.NotebookCellExecuteGoTo=new X("NotebookCellExecuteGoTo");X.NotebookCellExecutePrimary=new X("NotebookCellExecutePrimary");X.NotebookDiffCellInputTitle=new X("NotebookDiffCellInputTitle");X.NotebookDiffCellMetadataTitle=new X("NotebookDiffCellMetadataTitle");X.NotebookDiffCellOutputsTitle=new X("NotebookDiffCellOutputsTitle");X.NotebookOutputToolbar=new X("NotebookOutputToolbar");X.NotebookOutlineFilter=new X("NotebookOutlineFilter");X.NotebookOutlineActionMenu=new X("NotebookOutlineActionMenu");X.NotebookEditorLayoutConfigure=new X("NotebookEditorLayoutConfigure");X.NotebookKernelSource=new X("NotebookKernelSource");X.BulkEditTitle=new X("BulkEditTitle");X.BulkEditContext=new X("BulkEditContext");X.TimelineItemContext=new X("TimelineItemContext");X.TimelineTitle=new X("TimelineTitle");X.TimelineTitleContext=new X("TimelineTitleContext");X.TimelineFilterSubMenu=new X("TimelineFilterSubMenu");X.AccountsContext=new X("AccountsContext");X.SidebarTitle=new X("SidebarTitle");X.PanelTitle=new X("PanelTitle");X.AuxiliaryBarTitle=new X("AuxiliaryBarTitle");X.AuxiliaryBarHeader=new X("AuxiliaryBarHeader");X.TerminalInstanceContext=new X("TerminalInstanceContext");X.TerminalEditorInstanceContext=new X("TerminalEditorInstanceContext");X.TerminalNewDropdownContext=new X("TerminalNewDropdownContext");X.TerminalTabContext=new X("TerminalTabContext");X.TerminalTabEmptyAreaContext=new X("TerminalTabEmptyAreaContext");X.TerminalStickyScrollContext=new X("TerminalStickyScrollContext");X.WebviewContext=new X("WebviewContext");X.InlineCompletionsActions=new X("InlineCompletionsActions");X.InlineEditActions=new X("InlineEditActions");X.NewFile=new X("NewFile");X.MergeInput1Toolbar=new X("MergeToolbar1Toolbar");X.MergeInput2Toolbar=new X("MergeToolbar2Toolbar");X.MergeBaseToolbar=new X("MergeBaseToolbar");X.MergeInputResultToolbar=new X("MergeToolbarResultToolbar");X.InlineSuggestionToolbar=new X("InlineSuggestionToolbar");X.InlineEditToolbar=new X("InlineEditToolbar");X.ChatContext=new X("ChatContext");X.ChatCodeBlock=new X("ChatCodeblock");X.ChatCompareBlock=new X("ChatCompareBlock");X.ChatMessageTitle=new X("ChatMessageTitle");X.ChatExecute=new X("ChatExecute");X.ChatExecuteSecondary=new X("ChatExecuteSecondary");X.ChatInputSide=new X("ChatInputSide");X.AccessibleView=new X("AccessibleView");X.MultiDiffEditorFileToolbar=new X("MultiDiffEditorFileToolbar");X.DiffEditorHunkToolbar=new X("DiffEditorHunkToolbar");X.DiffEditorSelectionToolbar=new X("DiffEditorSelectionToolbar");const cm=ri("menuService");class md{static for(e){let t=this._all.get(e);return t||(t=new md(e),this._all.set(e,t)),t}static merge(e){const t=new Set;for(const i of e)i instanceof md&&t.add(i.id);return t}constructor(e){this.id=e,this.has=t=>t===e}}md._all=new Map;const Wl=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new cNe({merge:md.merge}),this.onDidChangeMenu=this._onDidChangeMenu.event}addCommand(n){return this._commands.set(n.id,n),this._onDidChangeMenu.fire(md.for(X.CommandPalette)),Et(()=>{this._commands.delete(n.id)&&this._onDidChangeMenu.fire(md.for(X.CommandPalette))})}getCommand(n){return this._commands.get(n)}getCommands(){const n=new Map;return this._commands.forEach((e,t)=>n.set(t,e)),n}appendMenuItem(n,e){let t=this._menuItems.get(n);t||(t=new co,this._menuItems.set(n,t));const i=t.push(e);return this._onDidChangeMenu.fire(md.for(n)),Et(()=>{i(),this._onDidChangeMenu.fire(md.for(n))})}appendMenuItems(n){const e=new ct;for(const{id:t,item:i}of n)e.add(this.appendMenuItem(t,i));return e}getMenuItems(n){let e;return this._menuItems.has(n)?e=[...this._menuItems.get(n)]:e=[],n===X.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(n){const e=new Set;for(const t of n)Tv(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,i)=>{e.has(i)||n.push({command:t})})}};class Qv extends y2{constructor(e,t,i){super(`submenuitem.${e.submenu.id}`,typeof e.title=="string"?e.title:e.title.value,i,"submenu"),this.item=e,this.hideActions=t}}let Bd=GS=class{static label(e,t){return t?.renderShortTitle&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value}constructor(e,t,i,s,r,o,a){var l,c;this.hideActions=s,this.menuKeybinding=r,this._commandService=a,this.id=e.id,this.label=GS.label(e,i),this.tooltip=(c=typeof e.tooltip=="string"?e.tooltip:(l=e.tooltip)===null||l===void 0?void 0:l.value)!==null&&c!==void 0?c:"",this.enabled=!e.precondition||o.contextMatchesRules(e.precondition),this.checked=void 0;let d;if(e.toggled){const u=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=o.contextMatchesRules(u.condition),this.checked&&u.tooltip&&(this.tooltip=typeof u.tooltip=="string"?u.tooltip:u.tooltip.value),this.checked&&Vt.isThemeIcon(u.icon)&&(d=u.icon),this.checked&&u.title&&(this.label=typeof u.title=="string"?u.title:u.title.value)}d||(d=Vt.isThemeIcon(e.icon)?e.icon:void 0),this.item=e,this.alt=t?new GS(t,void 0,i,s,void 0,o,a):void 0,this._options=i,this.class=d&&Vt.asClassName(d)}run(...e){var t,i;let s=[];return!((t=this._options)===null||t===void 0)&&t.arg&&(s=[...s,this._options.arg]),!((i=this._options)===null||i===void 0)&&i.shouldForwardArgs&&(s=[...s,...e]),this._commandService.executeCommand(this.id,...s)}};Bd=GS=mRe([CH(5,oi),CH(6,eo)],Bd);const df=ri("telemetryService"),Yc=ri("logService");var Os;(function(n){n[n.Off=0]="Off",n[n.Trace=1]="Trace",n[n.Debug=2]="Debug",n[n.Info=3]="Info",n[n.Warning=4]="Warning",n[n.Error=5]="Error"})(Os||(Os={}));const Vie=Os.Info;class Pie extends Le{constructor(){super(...arguments),this.level=Vie,this._onDidChangeLogLevel=this._register(new ue),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}checkLogLevel(e){return this.level!==Os.Off&&this.level<=e}}class bRe extends Pie{constructor(e=Vie,t=!0){super(),this.useColors=t,this.setLevel(e)}trace(e,...t){this.checkLogLevel(Os.Trace)&&(this.useColors?console.log("%cTRACE","color: #888",e,...t):console.log(e,...t))}debug(e,...t){this.checkLogLevel(Os.Debug)&&(this.useColors?console.log("%cDEBUG","background: #eee; color: #888",e,...t):console.log(e,...t))}info(e,...t){this.checkLogLevel(Os.Info)&&(this.useColors?console.log("%c INFO","color: #33f",e,...t):console.log(e,...t))}warn(e,...t){this.checkLogLevel(Os.Warning)&&(this.useColors?console.log("%c WARN","color: #993",e,...t):console.log(e,...t))}error(e,...t){this.checkLogLevel(Os.Error)&&(this.useColors?console.log("%c  ERR","color: #f33",e,...t):console.error(e,...t))}}class vRe extends Pie{constructor(e){super(),this.loggers=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.loggers)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(const i of this.loggers)i.trace(e,...t)}debug(e,...t){for(const i of this.loggers)i.debug(e,...t)}info(e,...t){for(const i of this.loggers)i.info(e,...t)}warn(e,...t){for(const i of this.loggers)i.warn(e,...t)}error(e,...t){for(const i of this.loggers)i.error(e,...t)}dispose(){for(const e of this.loggers)e.dispose();super.dispose()}}function _Re(n){switch(n){case Os.Trace:return"trace";case Os.Debug:return"debug";case Os.Info:return"info";case Os.Warning:return"warn";case Os.Error:return"error";case Os.Off:return"off"}}new it("logLevel",_Re(Os.Info));let E2=class{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this.metadata=e.metadata}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const t of e){let i=t.kbExpr;this.precondition&&(i?i=Wt.and(i,this.precondition):i=this.precondition);const s={id:this.id,weight:t.weight,args:t.args,when:i,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};lm.registerKeybindingRule(s)}}cs.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),metadata:this.metadata})}_registerMenuItem(e){Wl.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}};class S0 extends E2{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,i,s){return this._implementations.push({priority:e,name:t,implementation:i,when:s}),this._implementations.sort((r,o)=>o.priority-r.priority),{dispose:()=>{for(let r=0;r<this._implementations.length;r++)if(this._implementations[r].implementation===i){this._implementations.splice(r,1);return}}}}runCommand(e,t){const i=e.get(Yc),s=e.get(oi);i.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const r of this._implementations){if(r.when){const a=s.getContext(Js());if(!r.when.evaluate(a))continue}const o=r.implementation(e,t);if(o)return i.trace(`Command '${this.id}' was handled by '${r.name}'.`),typeof o=="boolean"?void 0:o}i.trace(`The Command '${this.id}' was not handled by any implementation.`)}}class Oie extends E2{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}}class Fc extends E2{static bindToContribution(e){return class extends Fc{constructor(i){super(i),this._callback=i.handler}runEditorCommand(i,s,r){const o=e(s);o&&this._callback(o,r)}}}static runEditorCommand(e,t,i,s){const r=e.get(Vn),o=r.getFocusedCodeEditor()||r.getActiveCodeEditor();if(o)return o.invokeWithinContext(a=>{if(a.get(oi).contextMatchesRules(i??void 0))return s(a,o,t)})}runCommand(e,t){return Fc.runEditorCommand(e,t,this.precondition,(i,s,r)=>this.runEditorCommand(i,s,r))}}class to extends Fc{static convertOptions(e){let t;Array.isArray(e.menuOpts)?t=e.menuOpts:e.menuOpts?t=[e.menuOpts]:t=[];function i(s){return s.menuId||(s.menuId=X.EditorContext),s.title||(s.title=e.label),s.when=Wt.and(e.precondition,s.when),s}return Array.isArray(e.contextMenuOpts)?t.push(...e.contextMenuOpts.map(i)):e.contextMenuOpts&&t.push(i(e.contextMenuOpts)),e.menuOpts=t,e}constructor(e){super(to.convertOptions(e)),this.label=e.label,this.alias=e.alias}runEditorCommand(e,t,i){return this.reportTelemetry(e,t),this.run(e,t,i||{})}reportTelemetry(e,t){e.get(df).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}}class Zie extends to{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t){return this._implementations.push([e,t]),this._implementations.sort((i,s)=>s[0]-i[0]),{dispose:()=>{for(let i=0;i<this._implementations.length;i++)if(this._implementations[i][1]===t){this._implementations.splice(i,1);return}}}}run(e,t,i){for(const s of this._implementations){const r=s[1](e,t,i);if(r)return typeof r=="boolean"?void 0:r}}}function wRe(n,e){cs.registerCommand(n,function(t,...i){const s=t.get(Si),[r,o]=i;Jr(Ft.isUri(r)),Jr(pe.isIPosition(o));const a=t.get(Ws).getModel(r);if(a){const l=pe.lift(o);return s.invokeFunction(e,a,l,...i.slice(2))}return t.get(hw).createModelReference(r).then(l=>new Promise((c,d)=>{try{const u=s.invokeFunction(e,l.object.textEditorModel,pe.lift(o),i.slice(2));c(u)}catch(u){d(u)}}).finally(()=>{l.dispose()}))})}function Ct(n){return jo.INSTANCE.registerEditorCommand(n),n}function rn(n){const e=new n;return jo.INSTANCE.registerEditorAction(e),e}function Gie(n){return jo.INSTANCE.registerEditorAction(n),n}function yRe(n){jo.INSTANCE.registerEditorAction(n)}function du(n,e,t){jo.INSTANCE.registerEditorContribution(n,e,t)}var Tp;(function(n){function e(o){return jo.INSTANCE.getEditorCommand(o)}n.getEditorCommand=e;function t(){return jo.INSTANCE.getEditorActions()}n.getEditorActions=t;function i(){return jo.INSTANCE.getEditorContributions()}n.getEditorContributions=i;function s(o){return jo.INSTANCE.getEditorContributions().filter(a=>o.indexOf(a.id)>=0)}n.getSomeEditorContributions=s;function r(){return jo.INSTANCE.getDiffEditorContributions()}n.getDiffEditorContributions=r})(Tp||(Tp={}));const SRe={EditorCommonContributions:"editor.contributions"};class jo{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t,i){this.editorContributions.push({id:e,ctor:t,instantiation:i})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}}jo.INSTANCE=new jo;Ss.add(SRe.EditorCommonContributions,jo.INSTANCE);function gw(n){return n.register(),n}const Bie=gw(new S0({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:X.MenubarEditMenu,group:"1_do",title:L({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:X.CommandPalette,group:"",title:L("undo","Undo"),order:1}]}));gw(new Oie(Bie,{id:"default:undo",precondition:void 0}));const Xie=gw(new S0({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:X.MenubarEditMenu,group:"1_do",title:L({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:X.CommandPalette,group:"",title:L("redo","Redo"),order:1}]}));gw(new Oie(Xie,{id:"default:redo",precondition:void 0}));const CRe=gw(new S0({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:X.MenubarSelectionMenu,group:"1_basic",title:L({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:X.CommandPalette,group:"",title:L("selectAll","Select All"),order:1}]}));let te=class ks{constructor(e,t,i,s){e>i||e===i&&t>s?(this.startLineNumber=i,this.startColumn=s,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=i,this.endColumn=s)}isEmpty(){return ks.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return ks.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<=e.startColumn||t.lineNumber===e.endLineNumber&&t.column>=e.endColumn)}containsRange(e){return ks.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return ks.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return ks.plusRange(this,e)}static plusRange(e,t){let i,s,r,o;return t.startLineNumber<e.startLineNumber?(i=t.startLineNumber,s=t.startColumn):t.startLineNumber===e.startLineNumber?(i=t.startLineNumber,s=Math.min(t.startColumn,e.startColumn)):(i=e.startLineNumber,s=e.startColumn),t.endLineNumber>e.endLineNumber?(r=t.endLineNumber,o=t.endColumn):t.endLineNumber===e.endLineNumber?(r=t.endLineNumber,o=Math.max(t.endColumn,e.endColumn)):(r=e.endLineNumber,o=e.endColumn),new ks(i,s,r,o)}intersectRanges(e){return ks.intersectRanges(this,e)}static intersectRanges(e,t){let i=e.startLineNumber,s=e.startColumn,r=e.endLineNumber,o=e.endColumn;const a=t.startLineNumber,l=t.startColumn,c=t.endLineNumber,d=t.endColumn;return i<a?(i=a,s=l):i===a&&(s=Math.max(s,l)),r>c?(r=c,o=d):r===c&&(o=Math.min(o,d)),i>r||i===r&&s>o?null:new ks(i,s,r,o)}equalsRange(e){return ks.equalsRange(this,e)}static equalsRange(e,t){return!e&&!t?!0:!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return ks.getEndPosition(this)}static getEndPosition(e){return new pe(e.endLineNumber,e.endColumn)}getStartPosition(){return ks.getStartPosition(this)}static getStartPosition(e){return new pe(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new ks(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new ks(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return ks.collapseToStart(this)}static collapseToStart(e){return new ks(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return ks.collapseToEnd(this)}static collapseToEnd(e){return new ks(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new ks(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}static fromPositions(e,t=e){return new ks(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new ks(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){const r=e.startLineNumber|0,o=t.startLineNumber|0;if(r===o){const a=e.startColumn|0,l=t.startColumn|0;if(a===l){const c=e.endLineNumber|0,d=t.endLineNumber|0;if(c===d){const u=e.endColumn|0,h=t.endColumn|0;return u-h}return c-d}return a-l}return r-o}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}},Ii=class wa extends te{constructor(e,t,i,s){super(e,t,i,s),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=i,this.positionColumn=s}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return wa.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return this.getDirection()===0?new wa(this.startLineNumber,this.startColumn,e,t):new wa(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new pe(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new pe(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return this.getDirection()===0?new wa(e,t,this.endLineNumber,this.endColumn):new wa(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new wa(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return t===0?new wa(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new wa(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new wa(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let i=0,s=e.length;i<s;i++)if(!this.selectionsEqual(e[i],t[i]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,i,s,r){return r===0?new wa(e,t,i,s):new wa(i,s,e,t)}};function Yf(n,e){const t=n.getCount(),i=n.findTokenIndexAtOffset(e),s=n.getLanguageId(i);let r=i;for(;r+1<t&&n.getLanguageId(r+1)===s;)r++;let o=i;for(;o>0&&n.getLanguageId(o-1)===s;)o--;return new LRe(n,s,o,r+1,n.getStartOffset(o),n.getEndOffset(r))}class LRe{constructor(e,t,i,s,r,o){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=i,this._lastTokenIndex=s,this.firstCharOffset=r,this._lastCharOffset=o,this.languageIdCodec=e.languageIdCodec}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getLineLength(){return this._lastCharOffset-this.firstCharOffset}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}toIViewLineTokens(){return this._actual.sliceAndInflate(this.firstCharOffset,this._lastCharOffset,0)}}function ql(n){return(n&3)!==0}class ns{static _nextVisibleColumn(e,t,i){return e===9?ns.nextRenderTabStop(t,i):Wh(e)||NV(e)?t+2:t+1}static visibleColumnFromColumn(e,t,i){const s=Math.min(t-1,e.length),r=e.substring(0,s),o=new qC(r);let a=0;for(;!o.eol();){const l=QC(r,s,o.offset);o.nextGraphemeLength(),a=this._nextVisibleColumn(l,a,i)}return a}static columnFromVisibleColumn(e,t,i){if(t<=0)return 1;const s=e.length,r=new qC(e);let o=0,a=1;for(;!r.eol();){const l=QC(e,s,r.offset);r.nextGraphemeLength();const c=this._nextVisibleColumn(l,o,i),d=r.offset+1;if(c>=t){const u=t-o;return c-t<u?d:a}o=c,a=d}return s+1}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}}function kRe(n,e,t){let i=0;for(let r=0;r<n.length;r++)n.charAt(r)==="	"?i=ns.nextIndentTabStop(i,e):i++;let s="";if(!t){const r=Math.floor(i/e);i=i%e;for(let o=0;o<r;o++)s+="	"}for(let r=0;r<i;r++)s+=" ";return s}function zie(n,e,t){let i=fo(n);return i===-1&&(i=n.length),kRe(n.substring(0,i),e,t)+n.substring(i)}const xRe=()=>!0,TRe=()=>!1,DRe=n=>n===" "||n==="	";class Nm{static shouldRecreate(e){return e.hasChanged(145)||e.hasChanged(131)||e.hasChanged(37)||e.hasChanged(77)||e.hasChanged(79)||e.hasChanged(80)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(9)||e.hasChanged(10)||e.hasChanged(14)||e.hasChanged(128)||e.hasChanged(50)||e.hasChanged(91)||e.hasChanged(130)}constructor(e,t,i,s){var r;this.languageConfigurationService=s,this._cursorMoveConfigurationBrand=void 0,this._languageId=e;const o=i.options,a=o.get(145),l=o.get(50);this.readOnly=o.get(91),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=o.get(116),this.lineHeight=l.lineHeight,this.typicalHalfwidthCharacterWidth=l.typicalHalfwidthCharacterWidth,this.pageSize=Math.max(1,Math.floor(a.height/this.lineHeight)-2),this.useTabStops=o.get(128),this.wordSeparators=o.get(131),this.emptySelectionClipboard=o.get(37),this.copyWithSyntaxHighlighting=o.get(25),this.multiCursorMergeOverlapping=o.get(77),this.multiCursorPaste=o.get(79),this.multiCursorLimit=o.get(80),this.autoClosingBrackets=o.get(6),this.autoClosingComments=o.get(7),this.autoClosingQuotes=o.get(11),this.autoClosingDelete=o.get(9),this.autoClosingOvertype=o.get(10),this.autoSurround=o.get(14),this.autoIndent=o.get(12),this.wordSegmenterLocales=o.get(130),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(e,this.autoClosingQuotes,!0),comment:this._getShouldAutoClose(e,this.autoClosingComments,!1),bracket:this._getShouldAutoClose(e,this.autoClosingBrackets,!1)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(e).getAutoClosingPairs();const c=this.languageConfigurationService.getLanguageConfiguration(e).getSurroundingPairs();if(c)for(const u of c)this.surroundingPairs[u.open]=u.close;const d=this.languageConfigurationService.getLanguageConfiguration(e).comments;this.blockCommentStartToken=(r=d?.blockCommentStartToken)!==null&&r!==void 0?r:null}get electricChars(){var e;if(!this._electricChars){this._electricChars={};const t=(e=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter)===null||e===void 0?void 0:e.getElectricCharacters();if(t)for(const i of t)this._electricChars[i]=!0}return this._electricChars}onElectricCharacter(e,t,i){const s=Yf(t,i-1),r=this.languageConfigurationService.getLanguageConfiguration(s.languageId).electricCharacter;return r?r.onElectricCharacter(e,s,i-s.firstCharOffset):null}normalizeIndentation(e){return zie(e,this.indentSize,this.insertSpaces)}_getShouldAutoClose(e,t,i){switch(t){case"beforeWhitespace":return DRe;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(e,i);case"always":return xRe;case"never":return TRe}}_getLanguageDefinedShouldAutoClose(e,t){const i=this.languageConfigurationService.getLanguageConfiguration(e).getAutoCloseBeforeSet(t);return s=>i.indexOf(s)!==-1}visibleColumnFromColumn(e,t){return ns.visibleColumnFromColumn(e.getLineContent(t.lineNumber),t.column,this.tabSize)}columnFromVisibleColumn(e,t,i){const s=ns.columnFromVisibleColumn(e.getLineContent(t),i,this.tabSize),r=e.getLineMinColumn(t);if(s<r)return r;const o=e.getLineMaxColumn(t);return s>o?o:s}}class Jt{static fromModelState(e){return new IRe(e)}static fromViewState(e){return new MRe(e)}static fromModelSelection(e){const t=Ii.liftSelection(e),i=new Ds(te.fromPositions(t.getSelectionStart()),0,0,t.getPosition(),0);return Jt.fromModelState(i)}static fromModelSelections(e){const t=[];for(let i=0,s=e.length;i<s;i++)t[i]=this.fromModelSelection(e[i]);return t}constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}}class IRe{constructor(e){this.modelState=e,this.viewState=null}}class MRe{constructor(e){this.modelState=null,this.viewState=e}}class Ds{constructor(e,t,i,s,r){this.selectionStart=e,this.selectionStartKind=t,this.selectionStartLeftoverVisibleColumns=i,this.position=s,this.leftoverVisibleColumns=r,this._singleCursorStateBrand=void 0,this.selection=Ds._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.selectionStartKind===e.selectionStartKind&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,i,s){return e?new Ds(this.selectionStart,this.selectionStartKind,this.selectionStartLeftoverVisibleColumns,new pe(t,i),s):new Ds(new te(t,i,t,i),0,s,new pe(t,i),s)}static _computeSelection(e,t){return e.isEmpty()||!t.isBeforeOrEqual(e.getStartPosition())?Ii.fromPositions(e.getStartPosition(),t):Ii.fromPositions(e.getEndPosition(),t)}}class Fr{constructor(e,t,i){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=i.shouldPushStackElementBefore,this.shouldPushStackElementAfter=i.shouldPushStackElementAfter}}function ku(n){return n==="'"||n==='"'||n==="`"}class Ff{static columnSelect(e,t,i,s,r,o){const a=Math.abs(r-i)+1,l=i>r,c=s>o,d=s<o,u=[];for(let h=0;h<a;h++){const f=i+(l?-h:h),g=e.columnFromVisibleColumn(t,f,s),m=e.columnFromVisibleColumn(t,f,o),p=e.visibleColumnFromColumn(t,new pe(f,g)),b=e.visibleColumnFromColumn(t,new pe(f,m));d&&(p>o||b<s)||c&&(b>s||p<o)||u.push(new Ds(new te(f,g,f,g),0,0,new pe(f,m),0))}if(u.length===0)for(let h=0;h<a;h++){const f=i+(l?-h:h),g=t.getLineMaxColumn(f);u.push(new Ds(new te(f,g,f,g),0,0,new pe(f,g),0))}return{viewStates:u,reversed:l,fromLineNumber:i,fromVisualColumn:s,toLineNumber:r,toVisualColumn:o}}static columnSelectLeft(e,t,i){let s=i.toViewVisualColumn;return s>0&&s--,Ff.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,i.toViewLineNumber,s)}static columnSelectRight(e,t,i){let s=0;const r=Math.min(i.fromViewLineNumber,i.toViewLineNumber),o=Math.max(i.fromViewLineNumber,i.toViewLineNumber);for(let l=r;l<=o;l++){const c=t.getLineMaxColumn(l),d=e.visibleColumnFromColumn(t,new pe(l,c));s=Math.max(s,d)}let a=i.toViewVisualColumn;return a<s&&a++,this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,i.toViewLineNumber,a)}static columnSelectUp(e,t,i,s){const r=s?e.pageSize:1,o=Math.max(1,i.toViewLineNumber-r);return this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,o,i.toViewVisualColumn)}static columnSelectDown(e,t,i,s){const r=s?e.pageSize:1,o=Math.min(t.getLineCount(),i.toViewLineNumber+r);return this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,o,i.toViewVisualColumn)}}class Or{constructor(e,t,i=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=i}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return Ii.fromPositions(s.getEndPosition())}}class wy{constructor(e,t,i=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=i}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return Ii.fromPositions(s.getStartPosition())}}class BS{constructor(e,t,i,s,r=!1){this._range=e,this._text=t,this._columnDeltaOffset=s,this._lineNumberDeltaOffset=i,this.insertsAutoWhitespace=r}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return Ii.fromPositions(s.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}}class Hie{constructor(e,t,i,s=!1){this._range=e,this._text=t,this._initialSelection=i,this._forceMoveMarkers=s,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}class O_{static whitespaceVisibleColumn(e,t,i){const s=e.length;let r=0,o=-1,a=-1;for(let l=0;l<s;l++){if(l===t)return[o,a,r];switch(r%i===0&&(o=l,a=r),e.charCodeAt(l)){case 32:r+=1;break;case 9:r=ns.nextRenderTabStop(r,i);break;default:return[-1,-1,-1]}}return t===s?[o,a,r]:[-1,-1,-1]}static atomicPosition(e,t,i,s){const r=e.length,[o,a,l]=O_.whitespaceVisibleColumn(e,t,i);if(l===-1)return-1;let c;switch(s){case 0:c=!0;break;case 1:c=!1;break;case 2:if(l%i===0)return t;c=l%i<=i/2;break}if(c){if(o===-1)return-1;let h=a;for(let f=o;f<r;++f){if(h===a+i)return o;switch(e.charCodeAt(f)){case 32:h+=1;break;case 9:h=ns.nextRenderTabStop(h,i);break;default:return-1}}return h===a+i?o:-1}const d=ns.nextRenderTabStop(l,i);let u=l;for(let h=t;h<r;h++){if(u===d)return h;switch(e.charCodeAt(h)){case 32:u+=1;break;case 9:u=ns.nextRenderTabStop(u,i);break;default:return-1}}return u===d?r:-1}}class X5{constructor(e,t,i){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=i}}class Li{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-die(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){const i=t.lineNumber-1;return new pe(i,e.getLineMaxColumn(i))}else return t}static leftPositionAtomicSoftTabs(e,t,i){if(t.column<=e.getLineIndentColumn(t.lineNumber)){const s=e.getLineMinColumn(t.lineNumber),r=e.getLineContent(t.lineNumber),o=O_.atomicPosition(r,t.column-1,i,0);if(o!==-1&&o+1>=s)return new pe(t.lineNumber,o+1)}return this.leftPosition(e,t)}static left(e,t,i){const s=e.stickyTabStops?Li.leftPositionAtomicSoftTabs(t,i,e.tabSize):Li.leftPosition(t,i);return new X5(s.lineNumber,s.column,0)}static moveLeft(e,t,i,s,r){let o,a;if(i.hasSelection()&&!s)o=i.selection.startLineNumber,a=i.selection.startColumn;else{const l=i.position.delta(void 0,-(r-1)),c=t.normalizePosition(Li.clipPositionColumn(l,t),0),d=Li.left(e,t,c);o=d.lineNumber,a=d.column}return i.move(s,o,a,0)}static clipPositionColumn(e,t){return new pe(e.lineNumber,Li.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,i){return e<t?t:e>i?i:e}static rightPosition(e,t,i){return i<e.getLineMaxColumn(t)?i=i+MV(e.getLineContent(t),i-1):t<e.getLineCount()&&(t=t+1,i=e.getLineMinColumn(t)),new pe(t,i)}static rightPositionAtomicSoftTabs(e,t,i,s,r){if(i<e.getLineIndentColumn(t)){const o=e.getLineContent(t),a=O_.atomicPosition(o,i-1,s,1);if(a!==-1)return new pe(t,a+1)}return this.rightPosition(e,t,i)}static right(e,t,i){const s=e.stickyTabStops?Li.rightPositionAtomicSoftTabs(t,i.lineNumber,i.column,e.tabSize,e.indentSize):Li.rightPosition(t,i.lineNumber,i.column);return new X5(s.lineNumber,s.column,0)}static moveRight(e,t,i,s,r){let o,a;if(i.hasSelection()&&!s)o=i.selection.endLineNumber,a=i.selection.endColumn;else{const l=i.position.delta(void 0,r-1),c=t.normalizePosition(Li.clipPositionColumn(l,t),1),d=Li.right(e,t,c);o=d.lineNumber,a=d.column}return i.move(s,o,a,0)}static vertical(e,t,i,s,r,o,a,l){const c=ns.visibleColumnFromColumn(t.getLineContent(i),s,e.tabSize)+r,d=t.getLineCount(),u=i===1&&s===1,h=i===d&&s===t.getLineMaxColumn(i),f=o<i?u:h;if(i=o,i<1?(i=1,a?s=t.getLineMinColumn(i):s=Math.min(t.getLineMaxColumn(i),s)):i>d?(i=d,a?s=t.getLineMaxColumn(i):s=Math.min(t.getLineMaxColumn(i),s)):s=e.columnFromVisibleColumn(t,i,c),f?r=0:r=c-ns.visibleColumnFromColumn(t.getLineContent(i),s,e.tabSize),l!==void 0){const g=new pe(i,s),m=t.normalizePosition(g,l);r=r+(s-m.column),i=m.lineNumber,s=m.column}return new X5(i,s,r)}static down(e,t,i,s,r,o,a){return this.vertical(e,t,i,s,r,i+o,a,4)}static moveDown(e,t,i,s,r){let o,a;i.hasSelection()&&!s?(o=i.selection.endLineNumber,a=i.selection.endColumn):(o=i.position.lineNumber,a=i.position.column);let l=0,c;do if(c=Li.down(e,t,o+l,a,i.leftoverVisibleColumns,r,!0),t.normalizePosition(new pe(c.lineNumber,c.column),2).lineNumber>o)break;while(l++<10&&o+l<t.getLineCount());return i.move(s,c.lineNumber,c.column,c.leftoverVisibleColumns)}static translateDown(e,t,i){const s=i.selection,r=Li.down(e,t,s.selectionStartLineNumber,s.selectionStartColumn,i.selectionStartLeftoverVisibleColumns,1,!1),o=Li.down(e,t,s.positionLineNumber,s.positionColumn,i.leftoverVisibleColumns,1,!1);return new Ds(new te(r.lineNumber,r.column,r.lineNumber,r.column),0,r.leftoverVisibleColumns,new pe(o.lineNumber,o.column),o.leftoverVisibleColumns)}static up(e,t,i,s,r,o,a){return this.vertical(e,t,i,s,r,i-o,a,3)}static moveUp(e,t,i,s,r){let o,a;i.hasSelection()&&!s?(o=i.selection.startLineNumber,a=i.selection.startColumn):(o=i.position.lineNumber,a=i.position.column);const l=Li.up(e,t,o,a,i.leftoverVisibleColumns,r,!0);return i.move(s,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateUp(e,t,i){const s=i.selection,r=Li.up(e,t,s.selectionStartLineNumber,s.selectionStartColumn,i.selectionStartLeftoverVisibleColumns,1,!1),o=Li.up(e,t,s.positionLineNumber,s.positionColumn,i.leftoverVisibleColumns,1,!1);return new Ds(new te(r.lineNumber,r.column,r.lineNumber,r.column),0,r.leftoverVisibleColumns,new pe(o.lineNumber,o.column),o.leftoverVisibleColumns)}static _isBlankLine(e,t){return e.getLineFirstNonWhitespaceColumn(t)===0}static moveToPrevBlankLine(e,t,i,s){let r=i.position.lineNumber;for(;r>1&&this._isBlankLine(t,r);)r--;for(;r>1&&!this._isBlankLine(t,r);)r--;return i.move(s,r,t.getLineMinColumn(r),0)}static moveToNextBlankLine(e,t,i,s){const r=t.getLineCount();let o=i.position.lineNumber;for(;o<r&&this._isBlankLine(t,o);)o++;for(;o<r&&!this._isBlankLine(t,o);)o++;return i.move(s,o,t.getLineMinColumn(o),0)}static moveToBeginningOfLine(e,t,i,s){const r=i.position.lineNumber,o=t.getLineMinColumn(r),a=t.getLineFirstNonWhitespaceColumn(r)||o;let l;return i.position.column===a?l=o:l=a,i.move(s,r,l,0)}static moveToEndOfLine(e,t,i,s,r){const o=i.position.lineNumber,a=t.getLineMaxColumn(o);return i.move(s,o,a,r?1073741824-a:0)}static moveToBeginningOfBuffer(e,t,i,s){return i.move(s,1,1,0)}static moveToEndOfBuffer(e,t,i,s){const r=t.getLineCount(),o=t.getLineMaxColumn(r);return i.move(s,r,o,0)}}class Rg{static deleteRight(e,t,i,s){const r=[];let o=e!==3;for(let a=0,l=s.length;a<l;a++){const c=s[a];let d=c;if(d.isEmpty()){const u=c.getPosition(),h=Li.right(t,i,u);d=new te(h.lineNumber,h.column,u.lineNumber,u.column)}if(d.isEmpty()){r[a]=null;continue}d.startLineNumber!==d.endLineNumber&&(o=!0),r[a]=new Or(d,"")}return[o,r]}static isAutoClosingPairDelete(e,t,i,s,r,o,a){if(t==="never"&&i==="never"||e==="never")return!1;for(let l=0,c=o.length;l<c;l++){const d=o[l],u=d.getPosition();if(!d.isEmpty())return!1;const h=r.getLineContent(u.lineNumber);if(u.column<2||u.column>=h.length+1)return!1;const f=h.charAt(u.column-2),g=s.get(f);if(!g)return!1;if(ku(f)){if(i==="never")return!1}else if(t==="never")return!1;const m=h.charAt(u.column-1);let p=!1;for(const b of g)b.open===f&&b.close===m&&(p=!0);if(!p)return!1;if(e==="auto"){let b=!1;for(let w=0,v=a.length;w<v;w++){const _=a[w];if(u.lineNumber===_.startLineNumber&&u.column===_.startColumn){b=!0;break}}if(!b)return!1}}return!0}static _runAutoClosingPairDelete(e,t,i){const s=[];for(let r=0,o=i.length;r<o;r++){const a=i[r].getPosition(),l=new te(a.lineNumber,a.column-1,a.lineNumber,a.column+1);s[r]=new Or(l,"")}return[!0,s]}static deleteLeft(e,t,i,s,r){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,i,s,r))return this._runAutoClosingPairDelete(t,i,s);const o=[];let a=e!==2;for(let l=0,c=s.length;l<c;l++){const d=Rg.getDeleteRange(s[l],i,t);if(d.isEmpty()){o[l]=null;continue}d.startLineNumber!==d.endLineNumber&&(a=!0),o[l]=new Or(d,"")}return[a,o]}static getDeleteRange(e,t,i){if(!e.isEmpty())return e;const s=e.getPosition();if(i.useTabStops&&s.column>1){const r=t.getLineContent(s.lineNumber),o=fo(r),a=o===-1?r.length+1:o+1;if(s.column<=a){const l=i.visibleColumnFromColumn(t,s),c=ns.prevIndentTabStop(l,i.indentSize),d=i.columnFromVisibleColumn(t,s.lineNumber,c);return new te(s.lineNumber,d,s.lineNumber,s.column)}}return te.fromPositions(Rg.getPositionAfterDeleteLeft(s,t),s)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){const i=$Ne(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,i+1)}else if(e.lineNumber>1){const i=e.lineNumber-1;return new pe(i,t.getLineMaxColumn(i))}else return e}static cut(e,t,i){const s=[];let r=null;i.sort((o,a)=>pe.compare(o.getStartPosition(),a.getEndPosition()));for(let o=0,a=i.length;o<a;o++){const l=i[o];if(l.isEmpty())if(e.emptySelectionClipboard){const c=l.getPosition();let d,u,h,f;c.lineNumber<t.getLineCount()?(d=c.lineNumber,u=1,h=c.lineNumber+1,f=1):c.lineNumber>1&&r?.endLineNumber!==c.lineNumber?(d=c.lineNumber-1,u=t.getLineMaxColumn(c.lineNumber-1),h=c.lineNumber,f=t.getLineMaxColumn(c.lineNumber)):(d=c.lineNumber,u=1,h=c.lineNumber,f=t.getLineMaxColumn(c.lineNumber));const g=new te(d,u,h,f);r=g,g.isEmpty()?s[o]=null:s[o]=new Or(g,"")}else s[o]=null;else s[o]=new Or(l,"")}return new Fr(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}var LH,kH;class ERe{constructor(e,t){this.uri=e,this.value=t}}function NRe(n){return Array.isArray(n)}class An{constructor(e,t){if(this[LH]="ResourceMap",e instanceof An)this.map=new Map(e.map),this.toKey=t??An.defaultToKey;else if(NRe(e)){this.map=new Map,this.toKey=t??An.defaultToKey;for(const[i,s]of e)this.set(i,s)}else this.map=new Map,this.toKey=e??An.defaultToKey}set(e,t){return this.map.set(this.toKey(e),new ERe(e,t)),this}get(e){var t;return(t=this.map.get(this.toKey(e)))===null||t===void 0?void 0:t.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(const[i,s]of this.map)e(s.value,s.uri,this)}*values(){for(const e of this.map.values())yield e.value}*keys(){for(const e of this.map.values())yield e.uri}*entries(){for(const e of this.map.values())yield[e.uri,e.value]}*[(LH=Symbol.toStringTag,Symbol.iterator)](){for(const[,e]of this.map)yield[e.uri,e.value]}}An.defaultToKey=n=>n.toString();class RRe{constructor(){this[kH]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}has(e){return this._map.has(e)}get(e,t=0){const i=this._map.get(e);if(i)return t!==0&&this.touch(i,t),i.value}set(e,t,i=0){let s=this._map.get(e);if(s)s.value=t,i!==0&&this.touch(s,i);else{switch(s={key:e,value:t,next:void 0,previous:void 0},i){case 0:this.addItemLast(s);break;case 1:this.addItemFirst(s);break;case 2:this.addItemLast(s);break;default:this.addItemLast(s);break}this._map.set(e,s),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const i=this._state;let s=this._head;for(;s;){if(t?e.bind(t)(s.value,s.key,this):e(s.value,s.key,this),this._state!==i)throw new Error("LinkedMap got modified during iteration.");s=s.next}}keys(){const e=this,t=this._state;let i=this._head;const s={[Symbol.iterator](){return s},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const r={value:i.key,done:!1};return i=i.next,r}else return{value:void 0,done:!0}}};return s}values(){const e=this,t=this._state;let i=this._head;const s={[Symbol.iterator](){return s},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const r={value:i.value,done:!1};return i=i.next,r}else return{value:void 0,done:!0}}};return s}entries(){const e=this,t=this._state;let i=this._head;const s={[Symbol.iterator](){return s},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const r={value:[i.key,i.value],done:!1};return i=i.next,r}else return{value:void 0,done:!0}}};return s}[(kH=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,i=this.size;for(;t&&i>e;)this._map.delete(t.key),t=t.next,i--;this._head=t,this._size=i,t&&(t.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._tail,i=this.size;for(;t&&i>e;)this._map.delete(t.key),t=t.previous,i--;this._tail=t,this._size=i,t&&(t.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,i=e.previous;if(!t||!i)throw new Error("Invalid list");t.previous=i,i.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;const i=e.next,s=e.previous;e===this._tail?(s.next=void 0,this._tail=s):(i.previous=s,s.next=i),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;const i=e.next,s=e.previous;e===this._head?(i.previous=void 0,this._head=i):(i.previous=s,s.next=i),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((t,i)=>{e.push([i,t])}),e}fromJSON(e){this.clear();for(const[t,i]of e)this.set(t,i)}}class WRe extends RRe{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}}class mw extends WRe{constructor(e,t=1){super(e,t)}trim(e){this.trimOld(e)}set(e,t){return super.set(e,t),this.checkTrim(),this}}class ARe{constructor(e){if(this._m1=new Map,this._m2=new Map,e)for(const[t,i]of e)this.set(t,i)}clear(){this._m1.clear(),this._m2.clear()}set(e,t){this._m1.set(e,t),this._m2.set(t,e)}get(e){return this._m1.get(e)}getKey(e){return this._m2.get(e)}delete(e){const t=this._m1.get(e);return t===void 0?!1:(this._m1.delete(e),this._m2.delete(t),!0)}keys(){return this._m1.keys()}values(){return this._m1.values()}}class Uie{constructor(){this.map=new Map}add(e,t){let i=this.map.get(e);i||(i=new Set,this.map.set(e,i)),i.add(t)}delete(e,t){const i=this.map.get(e);i&&(i.delete(t),i.size===0&&this.map.delete(e))}forEach(e,t){const i=this.map.get(e);i&&i.forEach(t)}get(e){const t=this.map.get(e);return t||new Set}}function lL(n){return n<0?0:n>255?255:n|0}function Rm(n){return n<0?0:n>4294967295?4294967295:n|0}class pw{constructor(e){const t=lL(e);this._defaultValue=t,this._asciiMap=pw._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){const t=new Uint8Array(256);return t.fill(e),t}set(e,t){const i=lL(t);e>=0&&e<256?this._asciiMap[e]=i:this._map.set(e,i)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}clear(){this._asciiMap.fill(this._defaultValue),this._map.clear()}}class FRe extends pw{constructor(e,t){super(0),this._segmenter=null,this._cachedLine=null,this._cachedSegments=[],this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this._segmenter=new Intl.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this._segmenter=null;for(let i=0,s=e.length;i<s;i++)this.set(e.charCodeAt(i),2);this.set(32,1),this.set(9,1)}findPrevIntlWordBeforeOrAtOffset(e,t){let i=null;for(const s of this._getIntlSegmenterWordsOnLine(e)){if(s.index>t)break;i=s}return i}findNextIntlWordAtOrAfterOffset(e,t){for(const i of this._getIntlSegmenterWordsOnLine(e))if(!(i.index<t))return i;return null}_getIntlSegmenterWordsOnLine(e){return this._segmenter?this._cachedLine===e?this._cachedSegments:(this._cachedLine=e,this._cachedSegments=this._filterWordSegments(this._segmenter.segment(e)),this._cachedSegments):[]}_filterWordSegments(e){const t=[];for(const i of e)this._isWordLike(i)&&t.push(i);return t}_isWordLike(e){return!!e.isWordLike}}const xH=new mw(10);function Db(n,e){const t=`${n}/${e.join(",")}`;let i=xH.get(t);return i||(i=new FRe(n,e),xH.set(t,i)),i}class En{static _createWord(e,t,i,s,r){return{start:s,end:r,wordType:t,nextCharClass:i}}static _createIntlWord(e,t){return{start:e.index,end:e.index+e.segment.length,wordType:1,nextCharClass:t}}static _findPreviousWordOnLine(e,t,i){const s=t.getLineContent(i.lineNumber);return this._doFindPreviousWordOnLine(s,e,i)}static _doFindPreviousWordOnLine(e,t,i){let s=0;const r=t.findPrevIntlWordBeforeOrAtOffset(e,i.column-2);for(let o=i.column-2;o>=0;o--){const a=e.charCodeAt(o),l=t.get(a);if(r&&o===r.index)return this._createIntlWord(r,l);if(l===0){if(s===2)return this._createWord(e,s,l,o+1,this._findEndOfWord(e,t,s,o+1));s=1}else if(l===2){if(s===1)return this._createWord(e,s,l,o+1,this._findEndOfWord(e,t,s,o+1));s=2}else if(l===1&&s!==0)return this._createWord(e,s,l,o+1,this._findEndOfWord(e,t,s,o+1))}return s!==0?this._createWord(e,s,1,0,this._findEndOfWord(e,t,s,0)):null}static _findEndOfWord(e,t,i,s){const r=t.findNextIntlWordAtOrAfterOffset(e,s),o=e.length;for(let a=s;a<o;a++){const l=e.charCodeAt(a),c=t.get(l);if(r&&a===r.index+r.segment.length||c===1||i===1&&c===2||i===2&&c===0)return a}return o}static _findNextWordOnLine(e,t,i){const s=t.getLineContent(i.lineNumber);return this._doFindNextWordOnLine(s,e,i)}static _doFindNextWordOnLine(e,t,i){let s=0;const r=e.length,o=t.findNextIntlWordAtOrAfterOffset(e,i.column-1);for(let a=i.column-1;a<r;a++){const l=e.charCodeAt(a),c=t.get(l);if(o&&a===o.index)return this._createIntlWord(o,c);if(c===0){if(s===2)return this._createWord(e,s,c,this._findStartOfWord(e,t,s,a-1),a);s=1}else if(c===2){if(s===1)return this._createWord(e,s,c,this._findStartOfWord(e,t,s,a-1),a);s=2}else if(c===1&&s!==0)return this._createWord(e,s,c,this._findStartOfWord(e,t,s,a-1),a)}return s!==0?this._createWord(e,s,1,this._findStartOfWord(e,t,s,r-1),r):null}static _findStartOfWord(e,t,i,s){const r=t.findPrevIntlWordBeforeOrAtOffset(e,s);for(let o=s;o>=0;o--){const a=e.charCodeAt(o),l=t.get(a);if(r&&o===r.index)return o;if(l===1||i===1&&l===2||i===2&&l===0)return o+1}return 0}static moveWordLeft(e,t,i,s){let r=i.lineNumber,o=i.column;o===1&&r>1&&(r=r-1,o=t.getLineMaxColumn(r));let a=En._findPreviousWordOnLine(e,t,new pe(r,o));if(s===0)return new pe(r,a?a.start+1:1);if(s===1)return a&&a.wordType===2&&a.end-a.start===1&&a.nextCharClass===0&&(a=En._findPreviousWordOnLine(e,t,new pe(r,a.start+1))),new pe(r,a?a.start+1:1);if(s===3){for(;a&&a.wordType===2;)a=En._findPreviousWordOnLine(e,t,new pe(r,a.start+1));return new pe(r,a?a.start+1:1)}return a&&o<=a.end+1&&(a=En._findPreviousWordOnLine(e,t,new pe(r,a.start+1))),new pe(r,a?a.end+1:1)}static _moveWordPartLeft(e,t){const i=t.lineNumber,s=e.getLineMaxColumn(i);if(t.column===1)return i>1?new pe(i-1,e.getLineMaxColumn(i-1)):t;const r=e.getLineContent(i);for(let o=t.column-1;o>1;o--){const a=r.charCodeAt(o-2),l=r.charCodeAt(o-1);if(a===95&&l!==95)return new pe(i,o);if(a===45&&l!==45)return new pe(i,o);if((np(a)||by(a))&&Ru(l))return new pe(i,o);if(Ru(a)&&Ru(l)&&o+1<s){const c=r.charCodeAt(o);if(np(c)||by(c))return new pe(i,o)}}return new pe(i,1)}static moveWordRight(e,t,i,s){let r=i.lineNumber,o=i.column,a=!1;o===t.getLineMaxColumn(r)&&r<t.getLineCount()&&(a=!0,r=r+1,o=1);let l=En._findNextWordOnLine(e,t,new pe(r,o));if(s===2)l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=En._findNextWordOnLine(e,t,new pe(r,l.end+1))),l?o=l.end+1:o=t.getLineMaxColumn(r);else if(s===3){for(a&&(o=0);l&&(l.wordType===2||l.start+1<=o);)l=En._findNextWordOnLine(e,t,new pe(r,l.end+1));l?o=l.start+1:o=t.getLineMaxColumn(r)}else l&&!a&&o>=l.start+1&&(l=En._findNextWordOnLine(e,t,new pe(r,l.end+1))),l?o=l.start+1:o=t.getLineMaxColumn(r);return new pe(r,o)}static _moveWordPartRight(e,t){const i=t.lineNumber,s=e.getLineMaxColumn(i);if(t.column===s)return i<e.getLineCount()?new pe(i+1,1):t;const r=e.getLineContent(i);for(let o=t.column+1;o<s;o++){const a=r.charCodeAt(o-2),l=r.charCodeAt(o-1);if(a!==95&&l===95)return new pe(i,o);if(a!==45&&l===45)return new pe(i,o);if((np(a)||by(a))&&Ru(l))return new pe(i,o);if(Ru(a)&&Ru(l)&&o+1<s){const c=r.charCodeAt(o);if(np(c)||by(c))return new pe(i,o)}}return new pe(i,s)}static _deleteWordLeftWhitespace(e,t){const i=e.getLineContent(t.lineNumber),s=t.column-2,r=sm(i,s);return r+1<s?new te(t.lineNumber,r+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){const i=e.wordSeparators,s=e.model,r=e.selection,o=e.whitespaceHeuristics;if(!r.isEmpty())return r;if(Rg.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const u=e.selection.getPosition();return new te(u.lineNumber,u.column-1,u.lineNumber,u.column+1)}const a=new pe(r.positionLineNumber,r.positionColumn);let l=a.lineNumber,c=a.column;if(l===1&&c===1)return null;if(o){const u=this._deleteWordLeftWhitespace(s,a);if(u)return u}let d=En._findPreviousWordOnLine(i,s,a);return t===0?d?c=d.start+1:c>1?c=1:(l--,c=s.getLineMaxColumn(l)):(d&&c<=d.end+1&&(d=En._findPreviousWordOnLine(i,s,new pe(l,d.start+1))),d?c=d.end+1:c>1?c=1:(l--,c=s.getLineMaxColumn(l))),new te(l,c,a.lineNumber,a.column)}static deleteInsideWord(e,t,i){if(!i.isEmpty())return i;const s=new pe(i.positionLineNumber,i.positionColumn),r=this._deleteInsideWordWhitespace(t,s);return r||this._deleteInsideWordDetermineDeleteRange(e,t,s)}static _charAtIsWhitespace(e,t){const i=e.charCodeAt(t);return i===32||i===9}static _deleteInsideWordWhitespace(e,t){const i=e.getLineContent(t.lineNumber),s=i.length;if(s===0)return null;let r=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(i,r))return null;let o=Math.min(t.column-1,s-1);if(!this._charAtIsWhitespace(i,o))return null;for(;r>0&&this._charAtIsWhitespace(i,r-1);)r--;for(;o+1<s&&this._charAtIsWhitespace(i,o+1);)o++;return new te(t.lineNumber,r+1,t.lineNumber,o+2)}static _deleteInsideWordDetermineDeleteRange(e,t,i){const s=t.getLineContent(i.lineNumber),r=s.length;if(r===0)return i.lineNumber>1?new te(i.lineNumber-1,t.getLineMaxColumn(i.lineNumber-1),i.lineNumber,1):i.lineNumber<t.getLineCount()?new te(i.lineNumber,1,i.lineNumber+1,1):new te(i.lineNumber,1,i.lineNumber,1);const o=u=>u.start+1<=i.column&&i.column<=u.end+1,a=(u,h)=>(u=Math.min(u,i.column),h=Math.max(h,i.column),new te(i.lineNumber,u,i.lineNumber,h)),l=u=>{let h=u.start+1,f=u.end+1,g=!1;for(;f-1<r&&this._charAtIsWhitespace(s,f-1);)g=!0,f++;if(!g)for(;h>1&&this._charAtIsWhitespace(s,h-2);)h--;return a(h,f)},c=En._findPreviousWordOnLine(e,t,i);if(c&&o(c))return l(c);const d=En._findNextWordOnLine(e,t,i);return d&&o(d)?l(d):c&&d?a(c.end+1,d.start+1):c?a(c.start+1,c.end+1):d?a(d.start+1,d.end+1):a(1,r+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;const i=t.getPosition(),s=En._moveWordPartLeft(e,i);return new te(i.lineNumber,i.column,s.lineNumber,s.column)}static _findFirstNonWhitespaceChar(e,t){const i=e.length;for(let s=t;s<i;s++){const r=e.charAt(s);if(r!==" "&&r!=="	")return s}return i}static _deleteWordRightWhitespace(e,t){const i=e.getLineContent(t.lineNumber),s=t.column-1,r=this._findFirstNonWhitespaceChar(i,s);return s+1<r?new te(t.lineNumber,t.column,t.lineNumber,r+1):null}static deleteWordRight(e,t){const i=e.wordSeparators,s=e.model,r=e.selection,o=e.whitespaceHeuristics;if(!r.isEmpty())return r;const a=new pe(r.positionLineNumber,r.positionColumn);let l=a.lineNumber,c=a.column;const d=s.getLineCount(),u=s.getLineMaxColumn(l);if(l===d&&c===u)return null;if(o){const f=this._deleteWordRightWhitespace(s,a);if(f)return f}let h=En._findNextWordOnLine(i,s,a);return t===2?h?c=h.end+1:c<u||l===d?c=u:(l++,h=En._findNextWordOnLine(i,s,new pe(l,1)),h?c=h.start+1:c=s.getLineMaxColumn(l)):(h&&c>=h.start+1&&(h=En._findNextWordOnLine(i,s,new pe(l,h.end+1))),h?c=h.start+1:c<u||l===d?c=u:(l++,h=En._findNextWordOnLine(i,s,new pe(l,1)),h?c=h.start+1:c=s.getLineMaxColumn(l))),new te(l,c,a.lineNumber,a.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;const i=t.getPosition(),s=En._moveWordPartRight(e,i);return new te(i.lineNumber,i.column,s.lineNumber,s.column)}static _createWordAtPosition(e,t,i){const s=new te(t,i.start+1,t,i.end+1);return{word:e.getValueInRange(s),startColumn:s.startColumn,endColumn:s.endColumn}}static getWordAtPosition(e,t,i,s){const r=Db(t,i),o=En._findPreviousWordOnLine(r,e,s);if(o&&o.wordType===1&&o.start<=s.column-1&&s.column-1<=o.end)return En._createWordAtPosition(e,s.lineNumber,o);const a=En._findNextWordOnLine(r,e,s);return a&&a.wordType===1&&a.start<=s.column-1&&s.column-1<=a.end?En._createWordAtPosition(e,s.lineNumber,a):null}static word(e,t,i,s,r){const o=Db(e.wordSeparators,e.wordSegmenterLocales),a=En._findPreviousWordOnLine(o,t,r),l=En._findNextWordOnLine(o,t,r);if(!s){let f,g;return a&&a.wordType===1&&a.start<=r.column-1&&r.column-1<=a.end?(f=a.start+1,g=a.end+1):l&&l.wordType===1&&l.start<=r.column-1&&r.column-1<=l.end?(f=l.start+1,g=l.end+1):(a?f=a.end+1:f=1,l?g=l.start+1:g=t.getLineMaxColumn(r.lineNumber)),new Ds(new te(r.lineNumber,f,r.lineNumber,g),1,0,new pe(r.lineNumber,g),0)}let c,d;a&&a.wordType===1&&a.start<r.column-1&&r.column-1<a.end?(c=a.start+1,d=a.end+1):l&&l.wordType===1&&l.start<r.column-1&&r.column-1<l.end?(c=l.start+1,d=l.end+1):(c=r.column,d=r.column);const u=r.lineNumber;let h;if(i.selectionStart.containsPosition(r))h=i.selectionStart.endColumn;else if(r.isBeforeOrEqual(i.selectionStart.getStartPosition())){h=c;const f=new pe(u,h);i.selectionStart.containsPosition(f)&&(h=i.selectionStart.endColumn)}else{h=d;const f=new pe(u,h);i.selectionStart.containsPosition(f)&&(h=i.selectionStart.startColumn)}return i.move(!0,u,h,0)}}class rr{static addCursorDown(e,t,i){const s=[];let r=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];s[r++]=new Jt(l.modelState,l.viewState),i?s[r++]=Jt.fromModelState(Li.translateDown(e.cursorConfig,e.model,l.modelState)):s[r++]=Jt.fromViewState(Li.translateDown(e.cursorConfig,e,l.viewState))}return s}static addCursorUp(e,t,i){const s=[];let r=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];s[r++]=new Jt(l.modelState,l.viewState),i?s[r++]=Jt.fromModelState(Li.translateUp(e.cursorConfig,e.model,l.modelState)):s[r++]=Jt.fromViewState(Li.translateUp(e.cursorConfig,e,l.viewState))}return s}static moveToBeginningOfLine(e,t,i){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r];s[r]=this._moveToLineStart(e,a,i)}return s}static _moveToLineStart(e,t,i){const s=t.viewState.position.column,r=t.modelState.position.column,o=s===r,a=t.viewState.position.lineNumber,l=e.getLineFirstNonWhitespaceColumn(a);return!o&&!(s===l)?this._moveToLineStartByView(e,t,i):this._moveToLineStartByModel(e,t,i)}static _moveToLineStartByView(e,t,i){return Jt.fromViewState(Li.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,i))}static _moveToLineStartByModel(e,t,i){return Jt.fromModelState(Li.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,i))}static moveToEndOfLine(e,t,i,s){const r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=this._moveToLineEnd(e,l,i,s)}return r}static _moveToLineEnd(e,t,i,s){const r=t.viewState.position,o=e.getLineMaxColumn(r.lineNumber),a=r.column===o,l=t.modelState.position,c=e.model.getLineMaxColumn(l.lineNumber),d=o-r.column===c-l.column;return a||d?this._moveToLineEndByModel(e,t,i,s):this._moveToLineEndByView(e,t,i,s)}static _moveToLineEndByView(e,t,i,s){return Jt.fromViewState(Li.moveToEndOfLine(e.cursorConfig,e,t.viewState,i,s))}static _moveToLineEndByModel(e,t,i,s){return Jt.fromModelState(Li.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,i,s))}static expandLineSelection(e,t){const i=[];for(let s=0,r=t.length;s<r;s++){const o=t[s],a=o.modelState.selection.startLineNumber,l=e.model.getLineCount();let c=o.modelState.selection.endLineNumber,d;c===l?d=e.model.getLineMaxColumn(l):(c++,d=1),i[s]=Jt.fromModelState(new Ds(new te(a,1,a,1),0,0,new pe(c,d),0))}return i}static moveToBeginningOfBuffer(e,t,i){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r];s[r]=Jt.fromModelState(Li.moveToBeginningOfBuffer(e.cursorConfig,e.model,a.modelState,i))}return s}static moveToEndOfBuffer(e,t,i){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r];s[r]=Jt.fromModelState(Li.moveToEndOfBuffer(e.cursorConfig,e.model,a.modelState,i))}return s}static selectAll(e,t){const i=e.model.getLineCount(),s=e.model.getLineMaxColumn(i);return Jt.fromModelState(new Ds(new te(1,1,1,1),0,0,new pe(i,s),0))}static line(e,t,i,s,r){const o=e.model.validatePosition(s),a=r?e.coordinatesConverter.validateViewPosition(new pe(r.lineNumber,r.column),o):e.coordinatesConverter.convertModelPositionToViewPosition(o);if(!i){const c=e.model.getLineCount();let d=o.lineNumber+1,u=1;return d>c&&(d=c,u=e.model.getLineMaxColumn(d)),Jt.fromModelState(new Ds(new te(o.lineNumber,1,d,u),2,0,new pe(d,u),0))}const l=t.modelState.selectionStart.getStartPosition().lineNumber;if(o.lineNumber<l)return Jt.fromViewState(t.viewState.move(!0,a.lineNumber,1,0));if(o.lineNumber>l){const c=e.getLineCount();let d=a.lineNumber+1,u=1;return d>c&&(d=c,u=e.getLineMaxColumn(d)),Jt.fromViewState(t.viewState.move(!0,d,u,0))}else{const c=t.modelState.selectionStart.getEndPosition();return Jt.fromModelState(t.modelState.move(!0,c.lineNumber,c.column,0))}}static word(e,t,i,s){const r=e.model.validatePosition(s);return Jt.fromModelState(En.word(e.cursorConfig,e.model,t.modelState,i,r))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new Jt(t.modelState,t.viewState);const i=t.viewState.position.lineNumber,s=t.viewState.position.column;return Jt.fromViewState(new Ds(new te(i,s,i,s),0,0,new pe(i,s),0))}static moveTo(e,t,i,s,r){if(i){if(t.modelState.selectionStartKind===1)return this.word(e,t,i,s);if(t.modelState.selectionStartKind===2)return this.line(e,t,i,s,r)}const o=e.model.validatePosition(s),a=r?e.coordinatesConverter.validateViewPosition(new pe(r.lineNumber,r.column),o):e.coordinatesConverter.convertModelPositionToViewPosition(o);return Jt.fromViewState(t.viewState.move(i,a.lineNumber,a.column,0))}static simpleMove(e,t,i,s,r,o){switch(i){case 0:return o===4?this._moveHalfLineLeft(e,t,s):this._moveLeft(e,t,s,r);case 1:return o===4?this._moveHalfLineRight(e,t,s):this._moveRight(e,t,s,r);case 2:return o===2?this._moveUpByViewLines(e,t,s,r):this._moveUpByModelLines(e,t,s,r);case 3:return o===2?this._moveDownByViewLines(e,t,s,r):this._moveDownByModelLines(e,t,s,r);case 4:return o===2?t.map(a=>Jt.fromViewState(Li.moveToPrevBlankLine(e.cursorConfig,e,a.viewState,s))):t.map(a=>Jt.fromModelState(Li.moveToPrevBlankLine(e.cursorConfig,e.model,a.modelState,s)));case 5:return o===2?t.map(a=>Jt.fromViewState(Li.moveToNextBlankLine(e.cursorConfig,e,a.viewState,s))):t.map(a=>Jt.fromModelState(Li.moveToNextBlankLine(e.cursorConfig,e.model,a.modelState,s)));case 6:return this._moveToViewMinColumn(e,t,s);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,s);case 8:return this._moveToViewCenterColumn(e,t,s);case 9:return this._moveToViewMaxColumn(e,t,s);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,s);default:return null}}static viewportMove(e,t,i,s,r){const o=e.getCompletelyVisibleViewRange(),a=e.coordinatesConverter.convertViewRangeToModelRange(o);switch(i){case 11:{const l=this._firstLineNumberInRange(e.model,a,r),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],s,l,c)]}case 13:{const l=this._lastLineNumberInRange(e.model,a,r),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],s,l,c)]}case 12:{const l=Math.round((a.startLineNumber+a.endLineNumber)/2),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],s,l,c)]}case 14:{const l=[];for(let c=0,d=t.length;c<d;c++){const u=t[c];l[c]=this.findPositionInViewportIfOutside(e,u,o,s)}return l}default:return null}}static findPositionInViewportIfOutside(e,t,i,s){const r=t.viewState.position.lineNumber;if(i.startLineNumber<=r&&r<=i.endLineNumber-1)return new Jt(t.modelState,t.viewState);{let o;r>i.endLineNumber-1?o=i.endLineNumber-1:r<i.startLineNumber?o=i.startLineNumber:o=r;const a=Li.vertical(e.cursorConfig,e,r,t.viewState.position.column,t.viewState.leftoverVisibleColumns,o,!1);return Jt.fromViewState(t.viewState.move(s,a.lineNumber,a.column,a.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,i){let s=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(s)&&s++,Math.min(t.endLineNumber,s+i-1)}static _lastLineNumberInRange(e,t,i){let s=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(s)&&s++,Math.max(s,t.endLineNumber-i+1)}static _moveLeft(e,t,i,s){return t.map(r=>Jt.fromViewState(Li.moveLeft(e.cursorConfig,e,r.viewState,i,s)))}static _moveHalfLineLeft(e,t,i){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=Math.round(e.getLineLength(l)/2);s[r]=Jt.fromViewState(Li.moveLeft(e.cursorConfig,e,a.viewState,i,c))}return s}static _moveRight(e,t,i,s){return t.map(r=>Jt.fromViewState(Li.moveRight(e.cursorConfig,e,r.viewState,i,s)))}static _moveHalfLineRight(e,t,i){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=Math.round(e.getLineLength(l)/2);s[r]=Jt.fromViewState(Li.moveRight(e.cursorConfig,e,a.viewState,i,c))}return s}static _moveDownByViewLines(e,t,i,s){const r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=Jt.fromViewState(Li.moveDown(e.cursorConfig,e,l.viewState,i,s))}return r}static _moveDownByModelLines(e,t,i,s){const r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=Jt.fromModelState(Li.moveDown(e.cursorConfig,e.model,l.modelState,i,s))}return r}static _moveUpByViewLines(e,t,i,s){const r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=Jt.fromViewState(Li.moveUp(e.cursorConfig,e,l.viewState,i,s))}return r}static _moveUpByModelLines(e,t,i,s){const r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=Jt.fromModelState(Li.moveUp(e.cursorConfig,e.model,l.modelState,i,s))}return r}static _moveToViewPosition(e,t,i,s,r){return Jt.fromViewState(t.viewState.move(i,s,r,0))}static _moveToModelPosition(e,t,i,s,r){return Jt.fromModelState(t.modelState.move(i,s,r,0))}static _moveToViewMinColumn(e,t,i){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=e.getLineMinColumn(l);s[r]=this._moveToViewPosition(e,a,i,l,c)}return s}static _moveToViewFirstNonWhitespaceColumn(e,t,i){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=e.getLineFirstNonWhitespaceColumn(l);s[r]=this._moveToViewPosition(e,a,i,l,c)}return s}static _moveToViewCenterColumn(e,t,i){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=Math.round((e.getLineMaxColumn(l)+e.getLineMinColumn(l))/2);s[r]=this._moveToViewPosition(e,a,i,l,c)}return s}static _moveToViewMaxColumn(e,t,i){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=e.getLineMaxColumn(l);s[r]=this._moveToViewPosition(e,a,i,l,c)}return s}static _moveToViewLastNonWhitespaceColumn(e,t,i){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=e.getLineLastNonWhitespaceColumn(l);s[r]=this._moveToViewPosition(e,a,i,l,c)}return s}}var cL;(function(n){const e=function(i){if(!Ha(i))return!1;const s=i;return!(!Dr(s.to)||!lo(s.select)&&!Vte(s.select)||!lo(s.by)&&!Dr(s.by)||!lo(s.value)&&!Rh(s.value))};n.metadata={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},n.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},n.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function t(i){if(!i.to)return null;let s;switch(i.to){case n.RawDirection.Left:s=0;break;case n.RawDirection.Right:s=1;break;case n.RawDirection.Up:s=2;break;case n.RawDirection.Down:s=3;break;case n.RawDirection.PrevBlankLine:s=4;break;case n.RawDirection.NextBlankLine:s=5;break;case n.RawDirection.WrappedLineStart:s=6;break;case n.RawDirection.WrappedLineFirstNonWhitespaceCharacter:s=7;break;case n.RawDirection.WrappedLineColumnCenter:s=8;break;case n.RawDirection.WrappedLineEnd:s=9;break;case n.RawDirection.WrappedLineLastNonWhitespaceCharacter:s=10;break;case n.RawDirection.ViewPortTop:s=11;break;case n.RawDirection.ViewPortBottom:s=13;break;case n.RawDirection.ViewPortCenter:s=12;break;case n.RawDirection.ViewPortIfOutside:s=14;break;default:return null}let r=0;switch(i.by){case n.RawUnit.Line:r=1;break;case n.RawUnit.WrappedLine:r=2;break;case n.RawUnit.Character:r=3;break;case n.RawUnit.HalfLine:r=4;break}return{direction:s,unit:r,select:!!i.select,value:i.value||1}}n.parse=t})(cL||(cL={}));var yr;(function(n){n[n.None=0]="None",n[n.Indent=1]="Indent",n[n.IndentOutdent=2]="IndentOutdent",n[n.Outdent=3]="Outdent"})(yr||(yr={}));class z5{constructor(e){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=e.open,this.close=e.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(e.notIn))for(let t=0,i=e.notIn.length;t<i;t++)switch(e.notIn[t]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1;break}}isOK(e){switch(e){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}shouldAutoClose(e,t){if(e.getTokenCount()===0)return!0;const i=e.findTokenIndexAtOffset(t-2),s=e.getStandardTokenType(i);return this.isOK(s)}_findNeutralCharacterInRange(e,t){for(let i=e;i<=t;i++){const s=String.fromCharCode(i);if(!this.open.includes(s)&&!this.close.includes(s))return s}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}}class VRe{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const t of e)K0(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),K0(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),K0(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),K0(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&K0(this.autoClosingPairsCloseSingleChar,t.close,t)}}function K0(n,e,t){n.has(e)?n.get(e).push(t):n.set(e,[t])}const Yie="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function PRe(n=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(const t of Yie)n.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}const zV=PRe();function HV(n){let e=zV;if(n&&n instanceof RegExp)if(n.global)e=n;else{let t="g";n.ignoreCase&&(t+="i"),n.multiline&&(t+="m"),n.unicode&&(t+="u"),e=new RegExp(n.source,t)}return e.lastIndex=0,e}const Kie=new co;Kie.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function Z_(n,e,t,i,s){if(e=HV(e),s||(s=ci.first(Kie)),t.length>s.maxLen){let c=n-s.maxLen/2;return c<0?c=0:i+=c,t=t.substring(c,n+s.maxLen/2),Z_(n,e,t,i,s)}const r=Date.now(),o=n-1-i;let a=-1,l=null;for(let c=1;!(Date.now()-r>=s.timeBudget);c++){const d=o-s.windowSize*c;e.lastIndex=Math.max(0,d);const u=ORe(e,t,o,a);if(!u&&l||(l=u,d<=0))break;a=d}if(l){const c={word:l[0],startColumn:i+1+l.index,endColumn:i+1+l.index+l[0].length};return e.lastIndex=0,c}return null}function ORe(n,e,t,i){let s;for(;s=n.exec(e);){const r=s.index||0;if(r<=t&&n.lastIndex>=t)return s;if(i>0&&r>i)return null}return null}class Ib{constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(t=>new z5(t)):e.brackets?this._autoClosingPairs=e.brackets.map(t=>new z5({open:t[0],close:t[1]})):this._autoClosingPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){const t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new z5({open:t.open,close:t.close||""}))}this._autoCloseBeforeForQuotes=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:Ib.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES,this._autoCloseBeforeForBrackets=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:Ib.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(e){return e?this._autoCloseBeforeForQuotes:this._autoCloseBeforeForBrackets}getSurroundingPairs(){return this._surroundingPairs}}Ib.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES=`;:.,=}])> 
	`;Ib.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS=`'"\`;:.,=}])> 
	`;function Ho(n,e=0){return n[n.length-(1+e)]}function ZRe(n){if(n.length===0)throw new Error("Invalid tail call");return[n.slice(0,n.length-1),n[n.length-1]]}function Gs(n,e,t=(i,s)=>i===s){if(n===e)return!0;if(!n||!e||n.length!==e.length)return!1;for(let i=0,s=n.length;i<s;i++)if(!t(n[i],e[i]))return!1;return!0}function GRe(n,e){const t=n.length-1;e<t&&(n[e]=n[t]),n.pop()}function BRe(n,e,t){return XRe(n.length,i=>t(n[i],e))}function XRe(n,e){let t=0,i=n-1;for(;t<=i;){const s=(t+i)/2|0,r=e(s);if(r<0)t=s+1;else if(r>0)i=s-1;else return s}return-(t+1)}function*UV(n,e){let t,i;for(const s of n)i!==void 0&&e(i,s)?t.push(s):(t&&(yield t),t=[s]),i=s;t&&(yield t)}function jie(n,e){for(let t=0;t<=n.length;t++)e(t===0?void 0:n[t-1],t===n.length?void 0:n[t])}function zRe(n,e){for(let t=0;t<n.length;t++)e(t===0?void 0:n[t-1],n[t],t+1===n.length?void 0:n[t+1])}function Wg(n){return n.filter(e=>!!e)}function TH(n){let e=0;for(let t=0;t<n.length;t++)n[t]&&(n[e]=n[t],e+=1);n.length=e}function HRe(n){return!Array.isArray(n)||n.length===0}function bw(n){return Array.isArray(n)&&n.length>0}function Ah(n,e=t=>t){const t=new Set;return n.filter(i=>{const s=e(i);return t.has(s)?!1:(t.add(s),!0)})}function YV(n,e){return n.length>0?n[0]:e}function Pr(n,e){let t=typeof e=="number"?n:0;typeof e=="number"?t=n:(t=0,e=n);const i=[];if(t<=e)for(let s=t;s<e;s++)i.push(s);else for(let s=t;s>e;s--)i.push(s);return i}function N2(n,e,t){const i=n.slice(0,e),s=n.slice(e);return i.concat(t,s)}function H5(n,e){const t=n.indexOf(e);t>-1&&(n.splice(t,1),n.unshift(e))}function yy(n,e){const t=n.indexOf(e);t>-1&&(n.splice(t,1),n.push(e))}function v3(n,e){for(const t of e)n.push(t)}function URe(n,e,t){const i=Jie(n,e),s=n.length,r=t.length;n.length=s+r;for(let o=s-1;o>=i;o--)n[o+r]=n[o];for(let o=0;o<r;o++)n[o+i]=t[o]}function DH(n,e,t,i){const s=Jie(n,e);let r=n.splice(s,t);return r===void 0&&(r=[]),URe(n,s,i),r}function Jie(n,e){return e<0?Math.max(e+n.length,0):Math.min(e,n.length)}var G_;(function(n){function e(r){return r<0}n.isLessThan=e;function t(r){return r<=0}n.isLessThanOrEqual=t;function i(r){return r>0}n.isGreaterThan=i;function s(r){return r===0}n.isNeitherLessOrGreaterThan=s,n.greaterThan=1,n.lessThan=-1,n.neitherLessOrGreaterThan=0})(G_||(G_={}));function Fa(n,e){return(t,i)=>e(n(t),n(i))}function YRe(...n){return(e,t)=>{for(const i of n){const s=i(e,t);if(!G_.isNeitherLessOrGreaterThan(s))return s}return G_.neitherLessOrGreaterThan}}const vh=(n,e)=>n-e,KRe=(n,e)=>vh(n?1:0,e?1:0);function jRe(n){return(e,t)=>-n(e,t)}class qd{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;const i=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,i}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;const i=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,i}peek(){if(this.length!==0)return this.items[this.firstIdx]}dequeue(){const e=this.items[this.firstIdx];return this.firstIdx++,e}takeCount(e){const t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}}class Tc{constructor(e){this.iterate=e}toArray(){const e=[];return this.iterate(t=>(e.push(t),!0)),e}filter(e){return new Tc(t=>this.iterate(i=>e(i)?t(i):!0))}map(e){return new Tc(t=>this.iterate(i=>t(e(i))))}findLast(e){let t;return this.iterate(i=>(e(i)&&(t=i),!0)),t}findLastMaxBy(e){let t,i=!0;return this.iterate(s=>((i||G_.isGreaterThan(e(s,t)))&&(i=!1,t=s),!0)),t}}Tc.empty=new Tc(n=>{});const IH=typeof Buffer<"u";let U5;class R2{static wrap(e){return IH&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new R2(e)}constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}toString(){return IH?this.buffer.toString():(U5||(U5=new TextDecoder),U5.decode(this.buffer))}}function JRe(n,e){return n[e+0]<<0>>>0|n[e+1]<<8>>>0}function $Re(n,e,t){n[t+0]=e&255,e=e>>>8,n[t+1]=e&255}function ul(n,e){return n[e]*2**24+n[e+1]*2**16+n[e+2]*2**8+n[e+3]}function hl(n,e,t){n[t+3]=e,e=e>>>8,n[t+2]=e,e=e>>>8,n[t+1]=e,e=e>>>8,n[t]=e}function MH(n,e){return n[e]}function EH(n,e,t){n[t]=e}let Y5;function $ie(){return Y5||(Y5=new TextDecoder("UTF-16LE")),Y5}let K5;function QRe(){return K5||(K5=new TextDecoder("UTF-16BE")),K5}let j5;function Qie(){return j5||(j5=Bte()?$ie():QRe()),j5}function qRe(n,e,t){const i=new Uint16Array(n.buffer,e,t);return t>0&&(i[0]===65279||i[0]===65534)?e9e(n,e,t):$ie().decode(i)}function e9e(n,e,t){const i=[];let s=0;for(let r=0;r<t;r++){const o=JRe(n,e);e+=2,i[s++]=String.fromCharCode(o)}return i.join("")}class W2{constructor(e){this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return Qie().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}appendCharCode(e){const t=this._capacity-this._bufferLength;t<=1&&(t===0||gs(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIICharCode(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendString(e){const t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let i=0;i<t;i++)this._buffer[this._bufferLength++]=e.charCodeAt(i)}}class dL{constructor(e,t,i,s,r,o){this._richEditBracketBrand=void 0,this.languageId=e,this.index=t,this.open=i,this.close=s,this.forwardRegex=r,this.reversedRegex=o,this._openSet=dL._toSet(this.open),this._closeSet=dL._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const t=new Set;for(const i of e)t.add(i);return t}}function t9e(n){const e=n.length;n=n.map(o=>[o[0].toLowerCase(),o[1].toLowerCase()]);const t=[];for(let o=0;o<e;o++)t[o]=o;const i=(o,a)=>{const[l,c]=o,[d,u]=a;return l===d||l===u||c===d||c===u},s=(o,a)=>{const l=Math.min(o,a),c=Math.max(o,a);for(let d=0;d<e;d++)t[d]===c&&(t[d]=l)};for(let o=0;o<e;o++){const a=n[o];for(let l=o+1;l<e;l++){const c=n[l];i(a,c)&&s(t[o],t[l])}}const r=[];for(let o=0;o<e;o++){const a=[],l=[];for(let c=0;c<e;c++)if(t[c]===o){const[d,u]=n[c];a.push(d),l.push(u)}a.length>0&&r.push({open:a,close:l})}return r}class i9e{constructor(e,t){this._richEditBracketsBrand=void 0;const i=t9e(t);this.brackets=i.map((s,r)=>new dL(e,r,s.open,s.close,n9e(s.open,s.close,i,r),s9e(s.open,s.close,i,r))),this.forwardRegex=r9e(this.brackets),this.reversedRegex=o9e(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const s of this.brackets){for(const r of s.open)this.textIsBracket[r]=s,this.textIsOpenBracket[r]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,r.length);for(const r of s.close)this.textIsBracket[r]=s,this.textIsOpenBracket[r]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,r.length)}}}function qie(n,e,t,i){for(let s=0,r=e.length;s<r;s++){if(s===t)continue;const o=e[s];for(const a of o.open)a.indexOf(n)>=0&&i.push(a);for(const a of o.close)a.indexOf(n)>=0&&i.push(a)}}function ene(n,e){return n.length-e.length}function A2(n){if(n.length<=1)return n;const e=[],t=new Set;for(const i of n)t.has(i)||(e.push(i),t.add(i));return e}function n9e(n,e,t,i){let s=[];s=s.concat(n),s=s.concat(e);for(let r=0,o=s.length;r<o;r++)qie(s[r],t,i,s);return s=A2(s),s.sort(ene),s.reverse(),vw(s)}function s9e(n,e,t,i){let s=[];s=s.concat(n),s=s.concat(e);for(let r=0,o=s.length;r<o;r++)qie(s[r],t,i,s);return s=A2(s),s.sort(ene),s.reverse(),vw(s.map(KV))}function r9e(n){let e=[];for(const t of n){for(const i of t.open)e.push(i);for(const i of t.close)e.push(i)}return e=A2(e),vw(e)}function o9e(n){let e=[];for(const t of n){for(const i of t.open)e.push(i);for(const i of t.close)e.push(i)}return e=A2(e),vw(e.map(KV))}function a9e(n){const e=/^[\w ]+$/.test(n);return n=Ya(n),e?`\\b${n}\\b`:n}function vw(n,e){const t=`(${n.map(a9e).join(")|(")})`;return cie(t,!0,e)}const KV=function(){function n(i){const s=new Uint16Array(i.length);let r=0;for(let o=i.length-1;o>=0;o--)s[r++]=i.charCodeAt(o);return Qie().decode(s)}let e=null,t=null;return function(s){return e!==s&&(e=s,t=n(e)),t}}();class ya{static _findPrevBracketInText(e,t,i,s){const r=i.match(e);if(!r)return null;const o=i.length-(r.index||0),a=r[0].length,l=s+o;return new te(t,l-a+1,t,l+1)}static findPrevBracketInRange(e,t,i,s,r){const a=KV(i).substring(i.length-r,i.length-s);return this._findPrevBracketInText(e,t,a,s)}static findNextBracketInText(e,t,i,s){const r=i.match(e);if(!r)return null;const o=r.index||0,a=r[0].length;if(a===0)return null;const l=s+o;return new te(t,l+1,t,l+1+a)}static findNextBracketInRange(e,t,i,s,r){const o=i.substring(s,r);return this.findNextBracketInText(e,t,o,s)}}class l9e{constructor(e){this._richEditBrackets=e}getElectricCharacters(){const e=[];if(this._richEditBrackets)for(const t of this._richEditBrackets.brackets)for(const i of t.close){const s=i.charAt(i.length-1);e.push(s)}return Ah(e)}onElectricCharacter(e,t,i){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;const s=t.findTokenIndexAtOffset(i-1);if(ql(t.getStandardTokenType(s)))return null;const r=this._richEditBrackets.reversedRegex,o=t.getLineContent().substring(0,i-1)+e,a=ya.findPrevBracketInRange(r,1,o,0,o.length);if(!a)return null;const l=o.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[l])return null;const d=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(d)?{matchOpenBracket:l}:null}}function Sy(n){return n.global&&(n.lastIndex=0),!0}class c9e{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&Sy(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&Sy(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&Sy(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&Sy(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}}class rp{constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(t=>{const i=rp._createOpenBracketRegExp(t[0]),s=rp._createCloseBracketRegExp(t[1]);i&&s&&this._brackets.push({open:t[0],openRegExp:i,close:t[1],closeRegExp:s})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,i,s){if(e>=3)for(let r=0,o=this._regExpRules.length;r<o;r++){const a=this._regExpRules[r];if([{reg:a.beforeText,text:i},{reg:a.afterText,text:s},{reg:a.previousLineText,text:t}].every(c=>c.reg?(c.reg.lastIndex=0,c.reg.test(c.text)):!0))return a.action}if(e>=2&&i.length>0&&s.length>0)for(let r=0,o=this._brackets.length;r<o;r++){const a=this._brackets[r];if(a.openRegExp.test(i)&&a.closeRegExp.test(s))return{indentAction:yr.IndentOutdent}}if(e>=2&&i.length>0){for(let r=0,o=this._brackets.length;r<o;r++)if(this._brackets[r].openRegExp.test(i))return{indentAction:yr.Indent}}return null}static _createOpenBracketRegExp(e){let t=Ya(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",rp._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=Ya(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,rp._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return gi(t),null}}}const gn=ri("configurationService");function _3(n,e){const t=Object.create(null);for(const i in n)tne(t,i,n[i],e);return t}function tne(n,e,t,i){const s=e.split("."),r=s.pop();let o=n;for(let a=0;a<s.length;a++){const l=s[a];let c=o[l];switch(typeof c){case"undefined":c=o[l]=Object.create(null);break;case"object":if(c===null){i(`Ignoring ${e} as ${s.slice(0,a+1).join(".")} is null`);return}break;default:i(`Ignoring ${e} as ${s.slice(0,a+1).join(".")} is ${JSON.stringify(c)}`);return}o=c}if(typeof o=="object"&&o!==null)try{o[r]=t}catch{i(`Ignoring ${e} as ${s.join(".")} is ${JSON.stringify(o)}`)}else i(`Ignoring ${e} as ${s.join(".")} is ${JSON.stringify(o)}`)}function d9e(n,e){const t=e.split(".");ine(n,t)}function ine(n,e){const t=e.shift();if(e.length===0){delete n[t];return}if(Object.keys(n).indexOf(t)!==-1){const i=n[t];typeof i=="object"&&!Array.isArray(i)&&(ine(i,e),Object.keys(i).length===0&&delete n[t])}}function NH(n,e,t){function i(o,a){let l=o;for(const c of a){if(typeof l!="object"||l===null)return;l=l[c]}return l}const s=e.split("."),r=i(n,s);return typeof r>"u"?t:r}function u9e(n){return n.replace(/[\[\]]/g,"")}const Cs=ri("languageService");class lc{constructor(e,t=[],i=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=i}}const nne=[];function fi(n,e,t){e instanceof lc||(e=new lc(e,[],!!t)),nne.push([n,e])}function RH(){return nne}const _n=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"}),F2={JSONContribution:"base.contributions.json"};function h9e(n){return n.length>0&&n.charAt(n.length-1)==="#"?n.substring(0,n.length-1):n}class f9e{constructor(){this._onDidChangeSchema=new ue,this.schemasById={}}registerSchema(e,t){this.schemasById[h9e(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}}const g9e=new f9e;Ss.add(F2.JSONContribution,g9e);const dm={Configuration:"base.contributions.configuration"},j0="vscode://schemas/settings/resourceLanguage",WH=Ss.as(F2.JSONContribution);class m9e{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new ue,this._onDidUpdateConfiguration=new ue,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:L("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},WH.registerSchema(j0,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const i=new Set;this.doRegisterConfigurations(e,t,i),WH.registerSchema(j0,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:i})}registerDefaultConfigurations(e){const t=new Set;this.doRegisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doRegisterDefaultConfigurations(e,t){var i;const s=[];for(const{overrides:r,source:o}of e)for(const a in r)if(t.add(a),Fh.test(a)){const l=this.configurationDefaultsOverrides.get(a),c=(i=l?.valuesSources)!==null&&i!==void 0?i:new Map;if(o)for(const f of Object.keys(r[a]))c.set(f,o);const d={...l?.value||{},...r[a]};this.configurationDefaultsOverrides.set(a,{source:o,value:d,valuesSources:c});const u=u9e(a),h={type:"object",default:d,description:L("defaultLanguageConfiguration.description","Configure settings to be overridden for the {0} language.",u),$ref:j0,defaultDefaultValue:d,source:Dr(o)?void 0:o,defaultValueSource:o};s.push(...uL(a)),this.configurationProperties[a]=h,this.defaultLanguageConfigurationOverridesNode.properties[a]=h}else{this.configurationDefaultsOverrides.set(a,{value:r[a],source:o});const l=this.configurationProperties[a];l&&(this.updatePropertyDefaultValue(a,l),this.updateSchema(a,l))}this.doRegisterOverrideIdentifiers(s)}registerOverrideIdentifiers(e){this.doRegisterOverrideIdentifiers(e),this._onDidSchemaChange.fire()}doRegisterOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t,i){e.forEach(s=>{this.validateAndRegisterProperties(s,t,s.extensionInfo,s.restrictedProperties,void 0,i),this.configurationContributors.push(s),this.registerJSONConfiguration(s)})}validateAndRegisterProperties(e,t=!0,i,s,r=3,o){var a;r=xo(e.scope)?r:e.scope;const l=e.properties;if(l)for(const d in l){const u=l[d];if(t&&v9e(d,u)){delete l[d];continue}if(u.source=i,u.defaultDefaultValue=l[d].default,this.updatePropertyDefaultValue(d,u),Fh.test(d)?u.scope=void 0:(u.scope=xo(u.scope)?r:u.scope,u.restricted=xo(u.restricted)?!!s?.includes(d):u.restricted),l[d].hasOwnProperty("included")&&!l[d].included){this.excludedConfigurationProperties[d]=l[d],delete l[d];continue}else this.configurationProperties[d]=l[d],!((a=l[d].policy)===null||a===void 0)&&a.name&&this.policyConfigurations.set(l[d].policy.name,d);!l[d].deprecationMessage&&l[d].markdownDeprecationMessage&&(l[d].deprecationMessage=l[d].markdownDeprecationMessage),o.add(d)}const c=e.allOf;if(c)for(const d of c)this.validateAndRegisterProperties(d,t,i,s,r,o)}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}registerJSONConfiguration(e){const t=i=>{const s=i.properties;if(s)for(const o in s)this.updateSchema(o,s[o]);const r=i.allOf;r?.forEach(t)};t(e)}updateSchema(e,t){switch(t.scope){case 1:break;case 2:break;case 6:break;case 3:break;case 4:break;case 5:this.resourceLanguageSettingsSchema.properties[e]=t;break}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,i={type:"object",description:L("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:L("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:j0};this.updatePropertyDefaultValue(t,i)}}registerOverridePropertyPatternKey(){L("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),L("overrideSettings.errorMessage","This setting does not support per-language configuration."),this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){const i=this.configurationDefaultsOverrides.get(e);let s=i?.value,r=i?.source;lo(s)&&(s=t.defaultDefaultValue,r=void 0),lo(s)&&(s=b9e(t.type)),t.default=s,t.defaultValueSource=r}}const sne="\\[([^\\]]+)\\]",AH=new RegExp(sne,"g"),p9e=`^(${sne})+$`,Fh=new RegExp(p9e);function uL(n){const e=[];if(Fh.test(n)){let t=AH.exec(n);for(;t?.length;){const i=t[1].trim();i&&e.push(i),t=AH.exec(n)}}return Ah(e)}function b9e(n){switch(Array.isArray(n)?n[0]:n){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}const XS=new m9e;Ss.add(dm.Configuration,XS);function v9e(n,e){var t,i,s,r;return n.trim()?Fh.test(n)?L("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",n):XS.getConfigurationProperties()[n]!==void 0?L("config.property.duplicate","Cannot register '{0}'. This property is already registered.",n):!((t=e.policy)===null||t===void 0)&&t.name&&XS.getPolicyConfigurations().get((i=e.policy)===null||i===void 0?void 0:i.name)!==void 0?L("config.policy.duplicate","Cannot register '{0}'. The associated policy {1} is already registered with {2}.",n,(s=e.policy)===null||s===void 0?void 0:s.name,XS.getPolicyConfigurations().get((r=e.policy)===null||r===void 0?void 0:r.name)):null:L("config.property.empty","Cannot register an empty property")}const _9e={ModesRegistry:"editor.modesRegistry"};class w9e{constructor(){this._onDidChangeLanguages=new ue,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,i=this._languages.length;t<i;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return this._languages}}const Mb=new w9e;Ss.add(_9e.ModesRegistry,Mb);const Va="plaintext",y9e=".txt";Mb.registerLanguage({id:Va,extensions:[y9e],aliases:[L("plainText.alias","Plain Text"),"text"],mimetypes:[_n.text]});Ss.as(dm.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}]);class S9e{constructor(e,t){this.languageId=e;const i=t.brackets?FH(t.brackets):[],s=new sH(a=>{const l=new Set;return{info:new C9e(this,a,l),closing:l}}),r=new sH(a=>{const l=new Set,c=new Set;return{info:new L9e(this,a,l,c),opening:l,openingColorized:c}});for(const[a,l]of i){const c=s.get(a),d=r.get(l);c.closing.add(d.info),d.opening.add(c.info)}const o=t.colorizedBracketPairs?FH(t.colorizedBracketPairs):i.filter(a=>!(a[0]==="<"&&a[1]===">"));for(const[a,l]of o){const c=s.get(a),d=r.get(l);c.closing.add(d.info),d.openingColorized.add(c.info),d.opening.add(c.info)}this._openingBrackets=new Map([...s.cachedValues].map(([a,l])=>[a,l.info])),this._closingBrackets=new Map([...r.cachedValues].map(([a,l])=>[a,l.info]))}get openingBrackets(){return[...this._openingBrackets.values()]}get closingBrackets(){return[...this._closingBrackets.values()]}getOpeningBracketInfo(e){return this._openingBrackets.get(e)}getClosingBracketInfo(e){return this._closingBrackets.get(e)}getBracketInfo(e){return this.getOpeningBracketInfo(e)||this.getClosingBracketInfo(e)}getBracketRegExp(e){const t=Array.from([...this._openingBrackets.keys(),...this._closingBrackets.keys()]);return vw(t,e)}}function FH(n){return n.filter(([e,t])=>e!==""&&t!=="")}class rne{constructor(e,t){this.config=e,this.bracketText=t}get languageId(){return this.config.languageId}}class C9e extends rne{constructor(e,t,i){super(e,t),this.openedBrackets=i,this.isOpeningBracket=!0}}class L9e extends rne{constructor(e,t,i,s){super(e,t),this.openingBrackets=i,this.openingColorizedBrackets=s,this.isOpeningBracket=!1}closes(e){return e.config!==this.config?!1:this.openingBrackets.has(e)}closesColorized(e){return e.config!==this.config?!1:this.openingColorizedBrackets.has(e)}getOpeningBrackets(){return[...this.openingBrackets]}}var k9e=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},VH=function(n,e){return function(t,i){e(t,i,n)}};class J5{constructor(e){this.languageId=e}affects(e){return this.languageId?this.languageId===e:!0}}const ma=ri("languageConfigurationService");let w3=class extends Le{constructor(e,t){super(),this.configurationService=e,this.languageService=t,this._registry=this._register(new I9e),this.onDidChangeEmitter=this._register(new ue),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;const i=new Set(Object.values(y3));this._register(this.configurationService.onDidChangeConfiguration(s=>{const r=s.change.keys.some(a=>i.has(a)),o=s.change.overrides.filter(([a,l])=>l.some(c=>i.has(c))).map(([a])=>a);if(r)this.configurations.clear(),this.onDidChangeEmitter.fire(new J5(void 0));else for(const a of o)this.languageService.isRegisteredLanguageId(a)&&(this.configurations.delete(a),this.onDidChangeEmitter.fire(new J5(a)))})),this._register(this._registry.onDidChange(s=>{this.configurations.delete(s.languageId),this.onDidChangeEmitter.fire(new J5(s.languageId))}))}register(e,t,i){return this._registry.register(e,t,i)}getLanguageConfiguration(e){let t=this.configurations.get(e);return t||(t=x9e(e,this._registry,this.configurationService,this.languageService),this.configurations.set(e,t)),t}};w3=k9e([VH(0,gn),VH(1,Cs)],w3);function x9e(n,e,t,i){let s=e.getLanguageConfiguration(n);if(!s){if(!i.isRegisteredLanguageId(n))return new Dp(n,{});s=new Dp(n,{})}const r=T9e(s.languageId,t),o=ane([s.underlyingConfig,r]);return new Dp(s.languageId,o)}const y3={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function T9e(n,e){const t=e.getValue(y3.brackets,{overrideIdentifier:n}),i=e.getValue(y3.colorizedBracketPairs,{overrideIdentifier:n});return{brackets:PH(t),colorizedBracketPairs:PH(i)}}function PH(n){if(Array.isArray(n))return n.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}function one(n,e,t){const i=n.getLineContent(e);let s=Zr(i);return s.length>t-1&&(s=s.substring(0,t-1)),s}class D9e{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){const i=new OH(e,t,++this._order);return this._entries.push(i),this._resolved=null,Et(()=>{for(let s=0;s<this._entries.length;s++)if(this._entries[s]===i){this._entries.splice(s,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){const e=this._resolve();e&&(this._resolved=new Dp(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(OH.cmp),ane(this._entries.map(e=>e.configuration)))}}function ane(n){let e={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const t of n)e={comments:t.comments||e.comments,brackets:t.brackets||e.brackets,wordPattern:t.wordPattern||e.wordPattern,indentationRules:t.indentationRules||e.indentationRules,onEnterRules:t.onEnterRules||e.onEnterRules,autoClosingPairs:t.autoClosingPairs||e.autoClosingPairs,surroundingPairs:t.surroundingPairs||e.surroundingPairs,autoCloseBefore:t.autoCloseBefore||e.autoCloseBefore,folding:t.folding||e.folding,colorizedBracketPairs:t.colorizedBracketPairs||e.colorizedBracketPairs,__electricCharacterSupport:t.__electricCharacterSupport||e.__electricCharacterSupport};return e}class OH{constructor(e,t,i){this.configuration=e,this.priority=t,this.order=i}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}}class ZH{constructor(e){this.languageId=e}}class I9e extends Le{constructor(){super(),this._entries=new Map,this._onDidChange=this._register(new ue),this.onDidChange=this._onDidChange.event,this._register(this.register(Va,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0))}register(e,t,i=0){let s=this._entries.get(e);s||(s=new D9e(e),this._entries.set(e,s));const r=s.register(t,i);return this._onDidChange.fire(new ZH(e)),Et(()=>{r.dispose(),this._onDidChange.fire(new ZH(e))})}getLanguageConfiguration(e){const t=this._entries.get(e);return t?.getResolvedConfiguration()||null}}class Dp{constructor(e,t){this.languageId=e,this.underlyingConfig=t,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new rp(this.underlyingConfig):null,this.comments=Dp._handleComments(this.underlyingConfig),this.characterPair=new Ib(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||zV,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new c9e(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{},this.bracketsNew=new S9e(e,this.underlyingConfig)}getWordDefinition(){return HV(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new i9e(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new l9e(this.brackets)),this._electricCharacter}onEnter(e,t,i,s){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,i,s):null}getAutoClosingPairs(){return new VRe(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(e){return this.characterPair.getAutoCloseBeforeSet(e)}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(e){const t=e.comments;if(!t)return null;const i={};if(t.lineComment&&(i.lineCommentToken=t.lineComment),t.blockComment){const[s,r]=t.blockComment;i.blockCommentStartToken=s,i.blockCommentEndToken=r}return i}}fi(ma,w3,1);class oo{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static getClassNameFromMetadata(e){let i="mtk"+this.getForeground(e);const s=this.getFontStyle(e);return s&1&&(i+=" mtki"),s&2&&(i+=" mtkb"),s&4&&(i+=" mtku"),s&8&&(i+=" mtks"),i}static getInlineStyleFromMetadata(e,t){const i=this.getForeground(e),s=this.getFontStyle(e);let r=`color: ${t[i]};`;s&1&&(r+="font-style: italic;"),s&2&&(r+="font-weight: bold;");let o="";return s&4&&(o+=" underline"),s&8&&(o+=" line-through"),o&&(r+=`text-decoration:${o};`),r}static getPresentationFromMetadata(e){const t=this.getForeground(e),i=this.getFontStyle(e);return{foreground:t,italic:!!(i&1),bold:!!(i&2),underline:!!(i&4),strikethrough:!!(i&8)}}}class Hn{static createEmpty(e,t){const i=Hn.defaultTokenMetadata,s=new Uint32Array(2);return s[0]=e.length,s[1]=i,new Hn(s,e,t)}static createFromTextAndMetadata(e,t){let i=0,s="";const r=new Array;for(const{text:o,metadata:a}of e)r.push(i+o.length,a),i+=o.length,s+=o;return new Hn(new Uint32Array(r),s,t)}constructor(e,t,i){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this.languageIdCodec=i}equals(e){return e instanceof Hn?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,i){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;const s=t<<1,r=s+(i<<1);for(let o=s;o<r;o++)if(this._tokens[o]!==e._tokens[o])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){const t=this._tokens[(e<<1)+1],i=oo.getLanguageId(t);return this.languageIdCodec.decodeLanguageId(i)}getStandardTokenType(e){const t=this._tokens[(e<<1)+1];return oo.getTokenType(t)}getForeground(e){const t=this._tokens[(e<<1)+1];return oo.getForeground(t)}getClassName(e){const t=this._tokens[(e<<1)+1];return oo.getClassNameFromMetadata(t)}getInlineStyle(e,t){const i=this._tokens[(e<<1)+1];return oo.getInlineStyleFromMetadata(i,t)}getPresentation(e){const t=this._tokens[(e<<1)+1];return oo.getPresentationFromMetadata(t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return Hn.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,i){return new jV(this,e,t,i)}static convertToEndOffset(e,t){const s=(e.length>>>1)-1;for(let r=0;r<s;r++)e[r<<1]=e[r+1<<1];e[s<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let i=0,s=(e.length>>>1)-1;for(;i<s;){const r=i+Math.floor((s-i)/2),o=e[r<<1];if(o===t)return r+1;o<t?i=r+1:o>t&&(s=r)}return i}withInserted(e){if(e.length===0)return this;let t=0,i=0,s="";const r=new Array;let o=0;for(;;){const a=t<this._tokensCount?this._tokens[t<<1]:-1,l=i<e.length?e[i]:null;if(a!==-1&&(l===null||a<=l.offset)){s+=this._text.substring(o,a);const c=this._tokens[(t<<1)+1];r.push(s.length,c),t++,o=a}else if(l){if(l.offset>o){s+=this._text.substring(o,l.offset);const c=this._tokens[(t<<1)+1];r.push(s.length,c),o=l.offset}s+=l.text,r.push(s.length,l.tokenMetadata),i++}else break}return new Hn(new Uint32Array(r),s,this.languageIdCodec)}getTokenText(e){const t=this.getStartOffset(e),i=this.getEndOffset(e);return this._text.substring(t,i)}forEach(e){const t=this.getCount();for(let i=0;i<t;i++)e(i)}}Hn.defaultTokenMetadata=(32768|2<<24)>>>0;class jV{constructor(e,t,i,s){this._source=e,this._startOffset=t,this._endOffset=i,this._deltaOffset=s,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this.languageIdCodec=e.languageIdCodec,this._tokensCount=0;for(let r=this._firstTokenIndex,o=e.getCount();r<o&&!(e.getStartOffset(r)>=i);r++)this._tokensCount++}getMetadata(e){return this._source.getMetadata(this._firstTokenIndex+e)}getLanguageId(e){return this._source.getLanguageId(this._firstTokenIndex+e)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof jV?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getStandardTokenType(e){return this._source.getStandardTokenType(this._firstTokenIndex+e)}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}getPresentation(e){return this._source.getPresentation(this._firstTokenIndex+e)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}getTokenText(e){const t=this._firstTokenIndex+e,i=this._source.getStartOffset(t),s=this._source.getEndOffset(t);let r=this._source.getTokenText(t);return i<this._startOffset&&(r=r.substring(this._startOffset-i)),s>this._endOffset&&(r=r.substring(0,r.length-(s-this._endOffset))),r}forEach(e){for(let t=0;t<this.getCount();t++)e(t)}}class M9e{constructor(e,t,i){this._indentRulesSupport=t,this._indentationLineProcessor=new lne(e,i)}shouldIncrease(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIncrease(i)}shouldDecrease(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldDecrease(i)}shouldIgnore(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIgnore(i)}shouldIndentNextLine(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIndentNextLine(i)}}class JV{constructor(e,t){this.model=e,this.indentationLineProcessor=new lne(e,t)}getProcessedTokenContextAroundRange(e){const t=this._getProcessedTokensBeforeRange(e),i=this._getProcessedTokensAfterRange(e),s=this._getProcessedPreviousLineTokens(e);return{beforeRangeProcessedTokens:t,afterRangeProcessedTokens:i,previousLineProcessedTokens:s}}_getProcessedTokensBeforeRange(e){this.model.tokenization.forceTokenization(e.startLineNumber);const t=this.model.tokenization.getLineTokens(e.startLineNumber),i=Yf(t,e.startColumn-1);let s;if($V(this.model,e.getStartPosition())){const o=e.startColumn-1-i.firstCharOffset,a=i.firstCharOffset,l=a+o;s=t.sliceAndInflate(a,l,0)}else{const o=e.startColumn-1;s=t.sliceAndInflate(0,o,0)}return this.indentationLineProcessor.getProcessedTokens(s)}_getProcessedTokensAfterRange(e){const t=e.isEmpty()?e.getStartPosition():e.getEndPosition();this.model.tokenization.forceTokenization(t.lineNumber);const i=this.model.tokenization.getLineTokens(t.lineNumber),s=Yf(i,t.column-1),r=t.column-1-s.firstCharOffset,o=s.firstCharOffset+r,a=s.firstCharOffset+s.getLineLength(),l=i.sliceAndInflate(o,a,0);return this.indentationLineProcessor.getProcessedTokens(l)}_getProcessedPreviousLineTokens(e){const t=f=>{this.model.tokenization.forceTokenization(f);const g=this.model.tokenization.getLineTokens(f),m=this.model.getLineMaxColumn(f)-1;return Yf(g,m)};this.model.tokenization.forceTokenization(e.startLineNumber);const i=this.model.tokenization.getLineTokens(e.startLineNumber),s=Yf(i,e.startColumn-1),r=Hn.createEmpty("",s.languageIdCodec),o=e.startLineNumber-1;if(o===0||!(s.firstCharOffset===0))return r;const c=t(o);if(!(s.languageId===c.languageId))return r;const u=c.toIViewLineTokens();return this.indentationLineProcessor.getProcessedTokens(u)}}class lne{constructor(e,t){this.model=e,this.languageConfigurationService=t}getProcessedLine(e,t){var i,s;const r=(l,c)=>{const d=Zr(l);return c+l.substring(d.length)};(s=(i=this.model.tokenization).forceTokenization)===null||s===void 0||s.call(i,e);const o=this.model.tokenization.getLineTokens(e);let a=this.getProcessedTokens(o).getLineContent();return t!==void 0&&(a=r(a,t)),a}getProcessedTokens(e){const t=l=>l===2||l===3||l===1,i=e.getLanguageId(0),r=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew.getBracketRegExp({global:!0}),o=[];return e.forEach(l=>{const c=e.getStandardTokenType(l);let d=e.getTokenText(l);t(c)&&(d=d.replace(r,""));const u=e.getMetadata(l);o.push({text:d,metadata:u})}),Hn.createFromTextAndMetadata(o,e.languageIdCodec)}}function $V(n,e){n.tokenization.forceTokenization(e.lineNumber);const t=n.tokenization.getLineTokens(e.lineNumber),i=Yf(t,e.column-1),s=i.firstCharOffset===0,r=t.getLanguageId(0)===i.languageId;return!s&&!r}function S3(n,e,t,i){e.tokenization.forceTokenization(t.startLineNumber);const s=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),r=i.getLanguageConfiguration(s);if(!r)return null;const a=new JV(e,i).getProcessedTokenContextAroundRange(t),l=a.previousLineProcessedTokens.getLineContent(),c=a.beforeRangeProcessedTokens.getLineContent(),d=a.afterRangeProcessedTokens.getLineContent(),u=r.onEnter(n,l,c,d);if(!u)return null;const h=u.indentAction;let f=u.appendText;const g=u.removeText||0;f?h===yr.Indent&&(f="	"+f):h===yr.Indent||h===yr.IndentOutdent?f="	":f="";let m=one(e,t.startLineNumber,t.startColumn);return g&&(m=m.substring(0,m.length-g)),{indentAction:h,appendText:f,removeText:g,indentation:m}}var E9e=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},N9e=function(n,e){return function(t,i){e(t,i,n)}},zS;const $5=Object.create(null);function mf(n,e){if(e<=0)return"";$5[n]||($5[n]=["",n]);const t=$5[n];for(let i=t.length;i<=e;i++)t[i]=t[i-1]+n;return t[e]}let Vf=zS=class{static unshiftIndent(e,t,i,s,r){const o=ns.visibleColumnFromColumn(e,t,i);if(r){const a=mf(" ",s),c=ns.prevIndentTabStop(o,s)/s;return mf(a,c)}else{const a="	",c=ns.prevRenderTabStop(o,i)/i;return mf(a,c)}}static shiftIndent(e,t,i,s,r){const o=ns.visibleColumnFromColumn(e,t,i);if(r){const a=mf(" ",s),c=ns.nextIndentTabStop(o,s)/s;return mf(a,c)}else{const a="	",c=ns.nextRenderTabStop(o,i)/i;return mf(a,c)}}constructor(e,t,i){this._languageConfigurationService=i,this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}_addEditOperation(e,t,i){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,i):e.addEditOperation(t,i)}getEditOperations(e,t){const i=this._selection.startLineNumber;let s=this._selection.endLineNumber;this._selection.endColumn===1&&i!==s&&(s=s-1);const{tabSize:r,indentSize:o,insertSpaces:a}=this._opts,l=i===s;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(i))&&(this._useLastEditRangeForCursorEndPosition=!0);let c=0,d=0;for(let u=i;u<=s;u++,c=d){d=0;const h=e.getLineContent(u);let f=fo(h);if(this._opts.isUnshift&&(h.length===0||f===0)||!l&&!this._opts.isUnshift&&h.length===0)continue;if(f===-1&&(f=h.length),u>1&&ns.visibleColumnFromColumn(h,f+1,r)%o!==0&&e.tokenization.isCheapToTokenize(u-1)){const p=S3(this._opts.autoIndent,e,new te(u-1,e.getLineMaxColumn(u-1),u-1,e.getLineMaxColumn(u-1)),this._languageConfigurationService);if(p){if(d=c,p.appendText)for(let b=0,w=p.appendText.length;b<w&&d<o&&p.appendText.charCodeAt(b)===32;b++)d++;p.removeText&&(d=Math.max(0,d-p.removeText));for(let b=0;b<d&&!(f===0||h.charCodeAt(f-1)!==32);b++)f--}}if(this._opts.isUnshift&&f===0)continue;let g;this._opts.isUnshift?g=zS.unshiftIndent(h,f+1,r,o,a):g=zS.shiftIndent(h,f+1,r,o,a),this._addEditOperation(t,new te(u,1,u,f+1),g),u===i&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=f+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&e.getLineLength(i)===0&&(this._useLastEditRangeForCursorEndPosition=!0);const c=a?mf(" ",o):"	";for(let d=i;d<=s;d++){const u=e.getLineContent(d);let h=fo(u);if(!(this._opts.isUnshift&&(u.length===0||h===0))&&!(!l&&!this._opts.isUnshift&&u.length===0)&&(h===-1&&(h=u.length),!(this._opts.isUnshift&&h===0)))if(this._opts.isUnshift){h=Math.min(h,o);for(let f=0;f<h;f++)if(u.charCodeAt(f)===9){h=f+1;break}this._addEditOperation(t,new te(d,1,d,h+1),"")}else this._addEditOperation(t,new te(d,1,d,1),c),d===i&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){const s=t.getInverseEditOperations()[0];return new Ii(s.range.endLineNumber,s.range.endColumn,s.range.endLineNumber,s.range.endColumn)}const i=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){const s=this._selection.startColumn;return i.startColumn<=s?i:i.getDirection()===0?new Ii(i.startLineNumber,s,i.endLineNumber,i.endColumn):new Ii(i.endLineNumber,i.endColumn,i.startLineNumber,s)}return i}};Vf=zS=E9e([N9e(2,ma)],Vf);class R9e{constructor(e,t,i){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=i}getEditOperations(e,t){t.addTrackedEditOperation(new te(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new te(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){const i=t.getInverseEditOperations(),s=i[0].range,r=i[1].range;return new Ii(s.endLineNumber,s.endColumn,r.endLineNumber,r.endColumn-this._charAfterSelection.length)}}class W9e{constructor(e,t,i){this._position=e,this._text=t,this._charAfter=i}getEditOperations(e,t){t.addTrackedEditOperation(new te(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column),this._text+this._charAfter)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return new Ii(s.endLineNumber,s.startColumn,s.endLineNumber,s.endColumn-this._charAfter.length)}}function A9e(n,e,t){const i=n.tokenization.getLanguageIdAtPosition(e,0);if(e>1){let s,r=-1;for(s=e-1;s>=1;s--){if(n.tokenization.getLanguageIdAtPosition(s,0)!==i)return r;const o=n.getLineContent(s);if(t.shouldIgnore(s)||/^\s+$/.test(o)||o===""){r=s;continue}return s}}return-1}function QV(n,e,t,i=!0,s){if(n<4)return null;const r=s.getLanguageConfiguration(e.tokenization.getLanguageId()).indentRulesSupport;if(!r)return null;const o=new M9e(e,r,s);if(t<=1)return{indentation:"",action:null};for(let l=t-1;l>0&&e.getLineContent(l)==="";l--)if(l===1)return{indentation:"",action:null};const a=A9e(e,t,o);if(a<0)return null;if(a<1)return{indentation:"",action:null};if(o.shouldIncrease(a)||o.shouldIndentNextLine(a)){const l=e.getLineContent(a);return{indentation:Zr(l),action:yr.Indent,line:a}}else if(o.shouldDecrease(a)){const l=e.getLineContent(a);return{indentation:Zr(l),action:null,line:a}}else{if(a===1)return{indentation:Zr(e.getLineContent(a)),action:null,line:a};const l=a-1,c=r.getIndentMetadata(e.getLineContent(l));if(!(c&3)&&c&4){let d=0;for(let u=l-1;u>0;u--)if(!o.shouldIndentNextLine(u)){d=u;break}return{indentation:Zr(e.getLineContent(d+1)),action:null,line:d+1}}if(i)return{indentation:Zr(e.getLineContent(a)),action:null,line:a};for(let d=a;d>0;d--){if(o.shouldIncrease(d))return{indentation:Zr(e.getLineContent(d)),action:yr.Indent,line:d};if(o.shouldIndentNextLine(d)){let u=0;for(let h=d-1;h>0;h--)if(!o.shouldIndentNextLine(d)){u=h;break}return{indentation:Zr(e.getLineContent(u+1)),action:null,line:u+1}}else if(o.shouldDecrease(d))return{indentation:Zr(e.getLineContent(d)),action:null,line:d}}return{indentation:Zr(e.getLineContent(1)),action:null,line:1}}}function F9e(n,e,t,i,s){if(n<4)return null;const r=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),o=s.getLanguageConfiguration(r).indentRulesSupport;if(!o)return null;e.tokenization.forceTokenization(t.startLineNumber);const l=new JV(e,s).getProcessedTokenContextAroundRange(t),c=l.afterRangeProcessedTokens,d=l.beforeRangeProcessedTokens,u=Zr(d.getLineContent()),h=P9e(e,t.startLineNumber,d),f=$V(e,t.getStartPosition()),g=e.getLineContent(t.startLineNumber),m=Zr(g),p=QV(n,h,t.startLineNumber+1,void 0,s);if(!p){const w=f?m:u;return{beforeEnter:w,afterEnter:w}}let b=f?m:p.indentation;return p.action===yr.Indent&&(b=i.shiftIndent(b)),o.shouldDecrease(c.getLineContent())&&(b=i.unshiftIndent(b)),{beforeEnter:f?m:u,afterEnter:b}}function V9e(n,e,t,i,s,r){if(n<4||$V(e,t.getStartPosition()))return null;const a=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),l=r.getLanguageConfiguration(a).indentRulesSupport;if(!l)return null;const d=new JV(e,r).getProcessedTokenContextAroundRange(t),u=d.beforeRangeProcessedTokens.getLineContent(),h=d.afterRangeProcessedTokens.getLineContent(),f=u+h,g=u+i+h;if(!l.shouldDecrease(f)&&l.shouldDecrease(g)){const m=QV(n,e,t.startLineNumber,!1,r);if(!m)return null;let p=m.indentation;return m.action!==yr.Indent&&(p=s.unshiftIndent(p)),p}return null}function P9e(n,e,t){return{tokenization:{getLineTokens:s=>s===e?t:n.tokenization.getLineTokens(s),getLanguageId:()=>n.getLanguageId(),getLanguageIdAtPosition:(s,r)=>n.getLanguageIdAtPosition(s,r)},getLineContent:s=>s===e?t.getLineContent():n.getLineContent(s)}}class yn{static indent(e,t,i){if(t===null||i===null)return[];const s=[];for(let r=0,o=i.length;r<o;r++)s[r]=new Vf(i[r],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return s}static outdent(e,t,i){const s=[];for(let r=0,o=i.length;r<o;r++)s[r]=new Vf(i[r],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return s}static shiftIndent(e,t,i){return i=i||1,Vf.shiftIndent(t,t.length+i,e.tabSize,e.indentSize,e.insertSpaces)}static unshiftIndent(e,t,i){return i=i||1,Vf.unshiftIndent(t,t.length+i,e.tabSize,e.indentSize,e.insertSpaces)}static _distributedPaste(e,t,i,s){const r=[];for(let o=0,a=i.length;o<a;o++)r[o]=new Or(i[o],s[o]);return new Fr(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,i,s,r){const o=[];for(let a=0,l=i.length;a<l;a++){const c=i[a],d=c.getPosition();if(r&&!c.isEmpty()&&(r=!1),r&&s.indexOf(`
`)!==s.length-1&&(r=!1),r){const u=new te(d.lineNumber,1,d.lineNumber,1);o[a]=new Hie(u,s,c,!0)}else o[a]=new Or(c,s)}return new Fr(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _distributePasteToCursors(e,t,i,s,r){if(s||t.length===1)return null;if(r&&r.length===t.length)return r;if(e.multiCursorPaste==="spread"){i.charCodeAt(i.length-1)===10&&(i=i.substr(0,i.length-1)),i.charCodeAt(i.length-1)===13&&(i=i.substr(0,i.length-1));const o=w0(i);if(o.length===t.length)return o}return null}static paste(e,t,i,s,r,o){const a=this._distributePasteToCursors(e,i,s,r,o);return a?(i=i.sort(te.compareRangesUsingStarts),this._distributedPaste(e,t,i,a)):this._simplePaste(e,t,i,s,r)}static _goodIndentForLine(e,t,i){let s=null,r="";const o=QV(e.autoIndent,t,i,!1,e.languageConfigurationService);if(o)s=o.action,r=o.indentation;else if(i>1){let a;for(a=i-1;a>=1;a--){const d=t.getLineContent(a);if(sm(d)>=0)break}if(a<1)return null;const l=t.getLineMaxColumn(a),c=S3(e.autoIndent,t,new te(a,l,a,l),e.languageConfigurationService);c&&(r=c.indentation+c.appendText)}return s&&(s===yr.Indent&&(r=yn.shiftIndent(e,r)),s===yr.Outdent&&(r=yn.unshiftIndent(e,r)),r=e.normalizeIndentation(r)),r||null}static _replaceJumpToNextIndent(e,t,i,s){let r="";const o=i.getStartPosition();if(e.insertSpaces){const a=e.visibleColumnFromColumn(t,o),l=e.indentSize,c=l-a%l;for(let d=0;d<c;d++)r+=" "}else r="	";return new Or(i,r,s)}static tab(e,t,i){const s=[];for(let r=0,o=i.length;r<o;r++){const a=i[r];if(a.isEmpty()){const l=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(l)&&t.tokenization.isCheapToTokenize(a.startLineNumber)){let c=this._goodIndentForLine(e,t,a.startLineNumber);c=c||"	";const d=e.normalizeIndentation(c);if(!l.startsWith(d)){s[r]=new Or(new te(a.startLineNumber,1,a.startLineNumber,l.length+1),d,!0);continue}}s[r]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){const l=t.getLineMaxColumn(a.startLineNumber);if(a.startColumn!==1||a.endColumn!==l){s[r]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}s[r]=new Vf(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService)}}return s}static compositionType(e,t,i,s,r,o,a,l){const c=s.map(d=>this._compositionType(i,d,r,o,a,l));return new Fr(4,c,{shouldPushStackElementBefore:Cy(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,i,s,r,o){if(!t.isEmpty())return null;const a=t.getPosition(),l=Math.max(1,a.column-s),c=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+r),d=new te(a.lineNumber,l,a.lineNumber,c);return e.getValueInRange(d)===i&&o===0?null:new BS(d,i,0,o)}static _typeCommand(e,t,i){return i?new wy(e,t,!0):new Or(e,t,!0)}static _enter(e,t,i,s){if(e.autoIndent===0)return yn._typeCommand(s,`
`,i);if(!t.tokenization.isCheapToTokenize(s.getStartPosition().lineNumber)||e.autoIndent===1){const l=t.getLineContent(s.startLineNumber),c=Zr(l).substring(0,s.startColumn-1);return yn._typeCommand(s,`
`+e.normalizeIndentation(c),i)}const r=S3(e.autoIndent,t,s,e.languageConfigurationService);if(r){if(r.indentAction===yr.None)return yn._typeCommand(s,`
`+e.normalizeIndentation(r.indentation+r.appendText),i);if(r.indentAction===yr.Indent)return yn._typeCommand(s,`
`+e.normalizeIndentation(r.indentation+r.appendText),i);if(r.indentAction===yr.IndentOutdent){const l=e.normalizeIndentation(r.indentation),c=e.normalizeIndentation(r.indentation+r.appendText),d=`
`+c+`
`+l;return i?new wy(s,d,!0):new BS(s,d,-1,c.length-l.length,!0)}else if(r.indentAction===yr.Outdent){const l=yn.unshiftIndent(e,r.indentation);return yn._typeCommand(s,`
`+e.normalizeIndentation(l+r.appendText),i)}}const o=t.getLineContent(s.startLineNumber),a=Zr(o).substring(0,s.startColumn-1);if(e.autoIndent>=4){const l=F9e(e.autoIndent,t,s,{unshiftIndent:c=>yn.unshiftIndent(e,c),shiftIndent:c=>yn.shiftIndent(e,c),normalizeIndentation:c=>e.normalizeIndentation(c)},e.languageConfigurationService);if(l){let c=e.visibleColumnFromColumn(t,s.getEndPosition());const d=s.endColumn,u=t.getLineContent(s.endLineNumber),h=fo(u);if(h>=0?s=s.setEndPosition(s.endLineNumber,Math.max(s.endColumn,h+1)):s=s.setEndPosition(s.endLineNumber,t.getLineMaxColumn(s.endLineNumber)),i)return new wy(s,`
`+e.normalizeIndentation(l.afterEnter),!0);{let f=0;return d<=h+1&&(e.insertSpaces||(c=Math.ceil(c/e.indentSize)),f=Math.min(c+1-e.normalizeIndentation(l.afterEnter).length-1,0)),new BS(s,`
`+e.normalizeIndentation(l.afterEnter),0,f,!0)}}}return yn._typeCommand(s,`
`+e.normalizeIndentation(a),i)}static _isAutoIndentType(e,t,i){if(e.autoIndent<4)return!1;for(let s=0,r=i.length;s<r;s++)if(!t.tokenization.isCheapToTokenize(i[s].getEndPosition().lineNumber))return!1;return!0}static _runAutoIndentType(e,t,i,s){const r=one(t,i.startLineNumber,i.startColumn),o=V9e(e.autoIndent,t,i,s,{shiftIndent:a=>yn.shiftIndent(e,a),unshiftIndent:a=>yn.unshiftIndent(e,a)},e.languageConfigurationService);if(o===null)return null;if(o!==e.normalizeIndentation(r)){const a=t.getLineFirstNonWhitespaceColumn(i.startLineNumber);return a===0?yn._typeCommand(new te(i.startLineNumber,1,i.endLineNumber,i.endColumn),e.normalizeIndentation(o)+s,!1):yn._typeCommand(new te(i.startLineNumber,1,i.endLineNumber,i.endColumn),e.normalizeIndentation(o)+t.getLineContent(i.startLineNumber).substring(a-1,i.startColumn-1)+s,!1)}return null}static _isAutoClosingOvertype(e,t,i,s,r){if(e.autoClosingOvertype==="never"||!e.autoClosingPairs.autoClosingPairsCloseSingleChar.has(r))return!1;for(let o=0,a=i.length;o<a;o++){const l=i[o];if(!l.isEmpty())return!1;const c=l.getPosition(),d=t.getLineContent(c.lineNumber);if(d.charAt(c.column-1)!==r)return!1;const h=ku(r);if((c.column>2?d.charCodeAt(c.column-2):0)===92&&h)return!1;if(e.autoClosingOvertype==="auto"){let g=!1;for(let m=0,p=s.length;m<p;m++){const b=s[m];if(c.lineNumber===b.startLineNumber&&c.column===b.startColumn){g=!0;break}}if(!g)return!1}}return!0}static _runAutoClosingOvertype(e,t,i,s,r){const o=[];for(let a=0,l=s.length;a<l;a++){const d=s[a].getPosition(),u=new te(d.lineNumber,d.column,d.lineNumber,d.column+1);o[a]=new Or(u,r)}return new Fr(4,o,{shouldPushStackElementBefore:Cy(e,4),shouldPushStackElementAfter:!1})}static _isBeforeClosingBrace(e,t){const i=t.charAt(0),s=e.autoClosingPairs.autoClosingPairsOpenByStart.get(i)||[],r=e.autoClosingPairs.autoClosingPairsCloseByStart.get(i)||[],o=s.some(l=>t.startsWith(l.open)),a=r.some(l=>t.startsWith(l.close));return!o&&a}static _findAutoClosingPairOpen(e,t,i,s){const r=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(s);if(!r)return null;let o=null;for(const a of r)if(o===null||a.open.length>o.open.length){let l=!0;for(const c of i)if(t.getValueInRange(new te(c.lineNumber,c.column-a.open.length+1,c.lineNumber,c.column))+s!==a.open){l=!1;break}l&&(o=a)}return o}static _findContainedAutoClosingPair(e,t){if(t.open.length<=1)return null;const i=t.close.charAt(t.close.length-1),s=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(i)||[];let r=null;for(const o of s)o.open!==t.open&&t.open.includes(o.open)&&t.close.endsWith(o.close)&&(!r||o.open.length>r.open.length)&&(r=o);return r}static _getAutoClosingPairClose(e,t,i,s,r){for(const g of i)if(!g.isEmpty())return null;const o=i.map(g=>{const m=g.getPosition();return r?{lineNumber:m.lineNumber,beforeColumn:m.column-s.length,afterColumn:m.column}:{lineNumber:m.lineNumber,beforeColumn:m.column,afterColumn:m.column}}),a=this._findAutoClosingPairOpen(e,t,o.map(g=>new pe(g.lineNumber,g.beforeColumn)),s);if(!a)return null;let l,c;if(ku(s)?(l=e.autoClosingQuotes,c=e.shouldAutoCloseBefore.quote):(e.blockCommentStartToken?a.open.includes(e.blockCommentStartToken):!1)?(l=e.autoClosingComments,c=e.shouldAutoCloseBefore.comment):(l=e.autoClosingBrackets,c=e.shouldAutoCloseBefore.bracket),l==="never")return null;const u=this._findContainedAutoClosingPair(e,a),h=u?u.close:"";let f=!0;for(const g of o){const{lineNumber:m,beforeColumn:p,afterColumn:b}=g,w=t.getLineContent(m),v=w.substring(0,p-1),_=w.substring(b-1);if(_.startsWith(h)||(f=!1),_.length>0){const k=_.charAt(0);if(!yn._isBeforeClosingBrace(e,_)&&!c(k))return null}if(a.open.length===1&&(s==="'"||s==='"')&&l!=="always"){const k=Db(e.wordSeparators,[]);if(v.length>0){const I=v.charCodeAt(v.length-1);if(k.get(I)===0)return null}}if(!t.tokenization.isCheapToTokenize(m))return null;t.tokenization.forceTokenization(m);const y=t.tokenization.getLineTokens(m),C=Yf(y,p-1);if(!a.shouldAutoClose(C,p-C.firstCharOffset))return null;const S=a.findNeutralCharacter();if(S){const k=t.tokenization.getTokenTypeIfInsertingCharacter(m,p,S);if(!a.isOK(k))return null}}return f?a.close.substring(0,a.close.length-h.length):a.close}static _runAutoClosingOpenCharType(e,t,i,s,r,o,a){const l=[];for(let c=0,d=s.length;c<d;c++){const u=s[c];l[c]=new cne(u,r,!o,a)}return new Fr(4,l,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static _shouldSurroundChar(e,t){return ku(t)?e.autoSurround==="quotes"||e.autoSurround==="languageDefined":e.autoSurround==="brackets"||e.autoSurround==="languageDefined"}static _isSurroundSelectionType(e,t,i,s){if(!yn._shouldSurroundChar(e,s)||!e.surroundingPairs.hasOwnProperty(s))return!1;const r=ku(s);for(const o of i){if(o.isEmpty())return!1;let a=!0;for(let l=o.startLineNumber;l<=o.endLineNumber;l++){const c=t.getLineContent(l),d=l===o.startLineNumber?o.startColumn-1:0,u=l===o.endLineNumber?o.endColumn-1:c.length,h=c.substring(d,u);if(/[^ \t]/.test(h)){a=!1;break}}if(a)return!1;if(r&&o.startLineNumber===o.endLineNumber&&o.startColumn+1===o.endColumn){const l=t.getValueInRange(o);if(ku(l))return!1}}return!0}static _runSurroundSelectionType(e,t,i,s,r){const o=[];for(let a=0,l=s.length;a<l;a++){const c=s[a],d=t.surroundingPairs[r];o[a]=new R9e(c,r,d)}return new Fr(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isTypeInterceptorElectricChar(e,t,i){return!!(i.length===1&&t.tokenization.isCheapToTokenize(i[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,i,s,r){if(!t.electricChars.hasOwnProperty(r)||!s.isEmpty())return null;const o=s.getPosition();i.tokenization.forceTokenization(o.lineNumber);const a=i.tokenization.getLineTokens(o.lineNumber);let l;try{l=t.onElectricCharacter(r,a,o.column)}catch(c){return gi(c),null}if(!l)return null;if(l.matchOpenBracket){const c=(a.getLineContent()+r).lastIndexOf(l.matchOpenBracket)+1,d=i.bracketPairs.findMatchingBracketUp(l.matchOpenBracket,{lineNumber:o.lineNumber,column:c},500);if(d){if(d.startLineNumber===o.lineNumber)return null;const u=i.getLineContent(d.startLineNumber),h=Zr(u),f=t.normalizeIndentation(h),g=i.getLineContent(o.lineNumber),m=i.getLineFirstNonWhitespaceColumn(o.lineNumber)||o.column,p=g.substring(m-1,o.column-1),b=f+p+r,w=new te(o.lineNumber,1,o.lineNumber,o.column),v=new Or(w,b);return new Fr(Q5(b,e),[v],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}static compositionEndWithInterceptors(e,t,i,s,r,o){if(!s)return null;let a=null;for(const u of s)if(a===null)a=u.insertedText;else if(a!==u.insertedText)return null;if(!a||a.length!==1)return null;const l=a;let c=!1;for(const u of s)if(u.deletedText.length!==0){c=!0;break}if(c){if(!yn._shouldSurroundChar(t,l)||!t.surroundingPairs.hasOwnProperty(l))return null;const u=ku(l);for(const g of s)if(g.deletedSelectionStart!==0||g.deletedSelectionEnd!==g.deletedText.length||/^[ \t]+$/.test(g.deletedText)||u&&ku(g.deletedText))return null;const h=[];for(const g of r){if(!g.isEmpty())return null;h.push(g.getPosition())}if(h.length!==s.length)return null;const f=[];for(let g=0,m=h.length;g<m;g++)f.push(new W9e(h[g],s[g].deletedText,t.surroundingPairs[l]));return new Fr(4,f,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoClosingOvertype(t,i,r,o,l)){const u=r.map(h=>new Or(new te(h.positionLineNumber,h.positionColumn,h.positionLineNumber,h.positionColumn+1),"",!1));return new Fr(4,u,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const d=this._getAutoClosingPairClose(t,i,r,l,!0);return d!==null?this._runAutoClosingOpenCharType(e,t,i,r,l,!0,d):null}static typeWithInterceptors(e,t,i,s,r,o,a){if(!e&&a===`
`){const d=[];for(let u=0,h=r.length;u<h;u++)d[u]=yn._enter(i,s,!1,r[u]);return new Fr(4,d,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoIndentType(i,s,r)){const d=[];let u=!1;for(let h=0,f=r.length;h<f;h++)if(d[h]=this._runAutoIndentType(i,s,r[h],a),!d[h]){u=!0;break}if(!u)return new Fr(4,d,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoClosingOvertype(i,s,r,o,a))return this._runAutoClosingOvertype(t,i,s,r,a);if(!e){const d=this._getAutoClosingPairClose(i,s,r,a,!1);if(d)return this._runAutoClosingOpenCharType(t,i,s,r,a,!1,d)}if(!e&&this._isSurroundSelectionType(i,s,r,a))return this._runSurroundSelectionType(t,i,s,r,a);if(!e&&this._isTypeInterceptorElectricChar(i,s,r)){const d=this._typeInterceptorElectricChar(t,i,s,r[0],a);if(d)return d}const l=[];for(let d=0,u=r.length;d<u;d++)l[d]=new Or(r[d],a);const c=Q5(a,t);return new Fr(c,l,{shouldPushStackElementBefore:Cy(t,c),shouldPushStackElementAfter:!1})}static typeWithoutInterceptors(e,t,i,s,r){const o=[];for(let l=0,c=s.length;l<c;l++)o[l]=new Or(s[l],r);const a=Q5(r,e);return new Fr(a,o,{shouldPushStackElementBefore:Cy(e,a),shouldPushStackElementAfter:!1})}static lineInsertBefore(e,t,i){if(t===null||i===null)return[];const s=[];for(let r=0,o=i.length;r<o;r++){let a=i[r].positionLineNumber;if(a===1)s[r]=new wy(new te(1,1,1,1),`
`);else{a--;const l=t.getLineMaxColumn(a);s[r]=this._enter(e,t,!1,new te(a,l,a,l))}}return s}static lineInsertAfter(e,t,i){if(t===null||i===null)return[];const s=[];for(let r=0,o=i.length;r<o;r++){const a=i[r].positionLineNumber,l=t.getLineMaxColumn(a);s[r]=this._enter(e,t,!1,new te(a,l,a,l))}return s}static lineBreakInsert(e,t,i){const s=[];for(let r=0,o=i.length;r<o;r++)s[r]=this._enter(e,t,!0,i[r]);return s}}class cne extends BS{constructor(e,t,i,s){super(e,(i?t:"")+s,0,-s.length),this._openCharacter=t,this._closeCharacter=s,this.closeCharacterRange=null,this.enclosingRange=null}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return this.closeCharacterRange=new te(s.startLineNumber,s.endColumn-this._closeCharacter.length,s.endLineNumber,s.endColumn),this.enclosingRange=new te(s.startLineNumber,s.endColumn-this._openCharacter.length-this._closeCharacter.length,s.endLineNumber,s.endColumn),super.computeCursorState(e,t)}}class O9e{constructor(e,t,i,s,r,o){this.deletedText=e,this.deletedSelectionStart=t,this.deletedSelectionEnd=i,this.insertedText=s,this.insertedSelectionStart=r,this.insertedSelectionEnd=o}}function Q5(n,e){return n===" "?e===5||e===6?6:5:4}function Cy(n,e){return BH(n)&&!BH(e)?!0:n===5?!1:GH(n)!==GH(e)}function GH(n){return n===6||n===5?"space":n}function BH(n){return n===4||n===5||n===6}var Re;(function(n){n.editorSimpleInput=new it("editorSimpleInput",!1,!0),n.editorTextFocus=new it("editorTextFocus",!1,L("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),n.focus=new it("editorFocus",!1,L("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),n.textInputFocus=new it("textInputFocus",!1,L("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),n.readOnly=new it("editorReadonly",!1,L("editorReadonly","Whether the editor is read-only")),n.inDiffEditor=new it("inDiffEditor",!1,L("inDiffEditor","Whether the context is a diff editor")),n.isEmbeddedDiffEditor=new it("isEmbeddedDiffEditor",!1,L("isEmbeddedDiffEditor","Whether the context is an embedded diff editor")),n.inMultiDiffEditor=new it("inMultiDiffEditor",!1,L("inMultiDiffEditor","Whether the context is a multi diff editor")),n.multiDiffEditorAllCollapsed=new it("multiDiffEditorAllCollapsed",void 0,L("multiDiffEditorAllCollapsed","Whether all files in multi diff editor are collapsed")),n.hasChanges=new it("diffEditorHasChanges",!1,L("diffEditorHasChanges","Whether the diff editor has changes")),n.comparingMovedCode=new it("comparingMovedCode",!1,L("comparingMovedCode","Whether a moved code block is selected for comparison")),n.accessibleDiffViewerVisible=new it("accessibleDiffViewerVisible",!1,L("accessibleDiffViewerVisible","Whether the accessible diff viewer is visible")),n.diffEditorRenderSideBySideInlineBreakpointReached=new it("diffEditorRenderSideBySideInlineBreakpointReached",!1,L("diffEditorRenderSideBySideInlineBreakpointReached","Whether the diff editor render side by side inline breakpoint is reached")),n.diffEditorInlineMode=new it("diffEditorInlineMode",!1,L("diffEditorInlineMode","Whether inline mode is active")),n.diffEditorOriginalWritable=new it("diffEditorOriginalWritable",!1,L("diffEditorOriginalWritable","Whether modified is writable in the diff editor")),n.diffEditorModifiedWritable=new it("diffEditorModifiedWritable",!1,L("diffEditorModifiedWritable","Whether modified is writable in the diff editor")),n.diffEditorOriginalUri=new it("diffEditorOriginalUri","",L("diffEditorOriginalUri","The uri of the original document")),n.diffEditorModifiedUri=new it("diffEditorModifiedUri","",L("diffEditorModifiedUri","The uri of the modified document")),n.columnSelection=new it("editorColumnSelection",!1,L("editorColumnSelection","Whether `editor.columnSelection` is enabled")),n.writable=n.readOnly.toNegated(),n.hasNonEmptySelection=new it("editorHasSelection",!1,L("editorHasSelection","Whether the editor has text selected")),n.hasOnlyEmptySelection=n.hasNonEmptySelection.toNegated(),n.hasMultipleSelections=new it("editorHasMultipleSelections",!1,L("editorHasMultipleSelections","Whether the editor has multiple selections")),n.hasSingleSelection=n.hasMultipleSelections.toNegated(),n.tabMovesFocus=new it("editorTabMovesFocus",!1,L("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),n.tabDoesNotMoveFocus=n.tabMovesFocus.toNegated(),n.isInEmbeddedEditor=new it("isInEmbeddedEditor",!1,!0),n.canUndo=new it("canUndo",!1,!0),n.canRedo=new it("canRedo",!1,!0),n.hoverVisible=new it("editorHoverVisible",!1,L("editorHoverVisible","Whether the editor hover is visible")),n.hoverFocused=new it("editorHoverFocused",!1,L("editorHoverFocused","Whether the editor hover is focused")),n.stickyScrollFocused=new it("stickyScrollFocused",!1,L("stickyScrollFocused","Whether the sticky scroll is focused")),n.stickyScrollVisible=new it("stickyScrollVisible",!1,L("stickyScrollVisible","Whether the sticky scroll is visible")),n.standaloneColorPickerVisible=new it("standaloneColorPickerVisible",!1,L("standaloneColorPickerVisible","Whether the standalone color picker is visible")),n.standaloneColorPickerFocused=new it("standaloneColorPickerFocused",!1,L("standaloneColorPickerFocused","Whether the standalone color picker is focused")),n.inCompositeEditor=new it("inCompositeEditor",void 0,L("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),n.notInCompositeEditor=n.inCompositeEditor.toNegated(),n.languageId=new it("editorLangId","",L("editorLangId","The language identifier of the editor")),n.hasCompletionItemProvider=new it("editorHasCompletionItemProvider",!1,L("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),n.hasCodeActionsProvider=new it("editorHasCodeActionsProvider",!1,L("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),n.hasCodeLensProvider=new it("editorHasCodeLensProvider",!1,L("editorHasCodeLensProvider","Whether the editor has a code lens provider")),n.hasDefinitionProvider=new it("editorHasDefinitionProvider",!1,L("editorHasDefinitionProvider","Whether the editor has a definition provider")),n.hasDeclarationProvider=new it("editorHasDeclarationProvider",!1,L("editorHasDeclarationProvider","Whether the editor has a declaration provider")),n.hasImplementationProvider=new it("editorHasImplementationProvider",!1,L("editorHasImplementationProvider","Whether the editor has an implementation provider")),n.hasTypeDefinitionProvider=new it("editorHasTypeDefinitionProvider",!1,L("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),n.hasHoverProvider=new it("editorHasHoverProvider",!1,L("editorHasHoverProvider","Whether the editor has a hover provider")),n.hasDocumentHighlightProvider=new it("editorHasDocumentHighlightProvider",!1,L("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),n.hasDocumentSymbolProvider=new it("editorHasDocumentSymbolProvider",!1,L("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),n.hasReferenceProvider=new it("editorHasReferenceProvider",!1,L("editorHasReferenceProvider","Whether the editor has a reference provider")),n.hasRenameProvider=new it("editorHasRenameProvider",!1,L("editorHasRenameProvider","Whether the editor has a rename provider")),n.hasSignatureHelpProvider=new it("editorHasSignatureHelpProvider",!1,L("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),n.hasInlayHintsProvider=new it("editorHasInlayHintsProvider",!1,L("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),n.hasDocumentFormattingProvider=new it("editorHasDocumentFormattingProvider",!1,L("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),n.hasDocumentSelectionFormattingProvider=new it("editorHasDocumentSelectionFormattingProvider",!1,L("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),n.hasMultipleDocumentFormattingProvider=new it("editorHasMultipleDocumentFormattingProvider",!1,L("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),n.hasMultipleDocumentSelectionFormattingProvider=new it("editorHasMultipleDocumentSelectionFormattingProvider",!1,L("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})(Re||(Re={}));const ai=0;class mn extends Fc{runEditorCommand(e,t,i){const s=t._getViewModel();s&&this.runCoreEditorCommand(s,i||{})}}var Vs;(function(n){const e=function(i){if(!Ha(i))return!1;const s=i;return!(!Dr(s.to)||!lo(s.by)&&!Dr(s.by)||!lo(s.value)&&!Rh(s.value)||!lo(s.revealCursor)&&!Vte(s.revealCursor))};n.metadata={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},n.RawDirection={Up:"up",Right:"right",Down:"down",Left:"left"},n.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor",Column:"column"};function t(i){let s;switch(i.to){case n.RawDirection.Up:s=1;break;case n.RawDirection.Right:s=2;break;case n.RawDirection.Down:s=3;break;case n.RawDirection.Left:s=4;break;default:return null}let r;switch(i.by){case n.RawUnit.Line:r=1;break;case n.RawUnit.WrappedLine:r=2;break;case n.RawUnit.Page:r=3;break;case n.RawUnit.HalfPage:r=4;break;case n.RawUnit.Editor:r=5;break;case n.RawUnit.Column:r=6;break;default:r=2}const o=Math.floor(i.value||1),a=!!i.revealCursor;return{direction:s,unit:r,value:o,revealCursor:a,select:!!i.select}}n.parse=t})(Vs||(Vs={}));var op;(function(n){const e=function(t){if(!Ha(t))return!1;const i=t;return!(!Rh(i.lineNumber)&&!Dr(i.lineNumber)||!lo(i.at)&&!Dr(i.at))};n.metadata={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:e,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},n.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(op||(op={}));class C3{constructor(e){e.addImplementation(1e4,"code-editor",(t,i)=>{const s=t.get(Vn).getFocusedCodeEditor();return s&&s.hasTextFocus()?this._runEditorCommand(t,s,i):!1}),e.addImplementation(1e3,"generic-dom-input-textarea",(t,i)=>{const s=Js();return s&&["input","textarea"].indexOf(s.tagName.toLowerCase())>=0?(this.runDOMCommand(s),!0):!1}),e.addImplementation(0,"generic-dom",(t,i)=>{const s=t.get(Vn).getActiveCodeEditor();return s?(s.focus(),this._runEditorCommand(t,s,i)):!1})}_runEditorCommand(e,t,i){const s=this.runEditorCommand(e,t,i);return s||!0}}var ds;(function(n){class e extends mn{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,v){if(!v.position)return;w.model.pushStackElement(),w.setCursorStates(v.source,3,[rr.moveTo(w,w.getPrimaryCursorState(),this._inSelectionMode,v.position,v.viewPosition)])&&v.revealType!==2&&w.revealAllCursors(v.source,!0,!0)}}n.MoveTo=Ct(new e({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),n.MoveToSelect=Ct(new e({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class t extends mn{runCoreEditorCommand(w,v){w.model.pushStackElement();const _=this._getColumnSelectResult(w,w.getPrimaryCursorState(),w.getCursorColumnSelectData(),v);_!==null&&(w.setCursorStates(v.source,3,_.viewStates.map(y=>Jt.fromViewState(y))),w.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:_.fromLineNumber,fromViewVisualColumn:_.fromVisualColumn,toViewLineNumber:_.toLineNumber,toViewVisualColumn:_.toVisualColumn}),_.reversed?w.revealTopMostCursor(v.source):w.revealBottomMostCursor(v.source))}}n.ColumnSelect=Ct(new class extends t{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(b,w,v,_){if(typeof _.position>"u"||typeof _.viewPosition>"u"||typeof _.mouseColumn>"u")return null;const y=b.model.validatePosition(_.position),C=b.coordinatesConverter.validateViewPosition(new pe(_.viewPosition.lineNumber,_.viewPosition.column),y),S=_.doColumnSelect?v.fromViewLineNumber:C.lineNumber,k=_.doColumnSelect?v.fromViewVisualColumn:_.mouseColumn-1;return Ff.columnSelect(b.cursorConfig,b,S,k,C.lineNumber,_.mouseColumn-1)}}),n.CursorColumnSelectLeft=Ct(new class extends t{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:ai,kbExpr:Re.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(b,w,v,_){return Ff.columnSelectLeft(b.cursorConfig,b,v)}}),n.CursorColumnSelectRight=Ct(new class extends t{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:ai,kbExpr:Re.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(b,w,v,_){return Ff.columnSelectRight(b.cursorConfig,b,v)}});class i extends t{constructor(w){super(w),this._isPaged=w.isPaged}_getColumnSelectResult(w,v,_,y){return Ff.columnSelectUp(w.cursorConfig,w,_,this._isPaged)}}n.CursorColumnSelectUp=Ct(new i({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:ai,kbExpr:Re.textInputFocus,primary:3600,linux:{primary:0}}})),n.CursorColumnSelectPageUp=Ct(new i({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:ai,kbExpr:Re.textInputFocus,primary:3595,linux:{primary:0}}}));class s extends t{constructor(w){super(w),this._isPaged=w.isPaged}_getColumnSelectResult(w,v,_,y){return Ff.columnSelectDown(w.cursorConfig,w,_,this._isPaged)}}n.CursorColumnSelectDown=Ct(new s({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:ai,kbExpr:Re.textInputFocus,primary:3602,linux:{primary:0}}})),n.CursorColumnSelectPageDown=Ct(new s({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:ai,kbExpr:Re.textInputFocus,primary:3596,linux:{primary:0}}}));class r extends mn{constructor(){super({id:"cursorMove",precondition:void 0,metadata:cL.metadata})}runCoreEditorCommand(w,v){const _=cL.parse(v);_&&this._runCursorMove(w,v.source,_)}_runCursorMove(w,v,_){w.model.pushStackElement(),w.setCursorStates(v,3,r._move(w,w.getCursorStates(),_)),w.revealAllCursors(v,!0)}static _move(w,v,_){const y=_.select,C=_.value;switch(_.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return rr.simpleMove(w,v,_.direction,y,C,_.unit);case 11:case 13:case 12:case 14:return rr.viewportMove(w,v,_.direction,y,C);default:return null}}}n.CursorMoveImpl=r,n.CursorMove=Ct(new r);class o extends mn{constructor(w){super(w),this._staticArgs=w.args}runCoreEditorCommand(w,v){let _=this._staticArgs;this._staticArgs.value===-1&&(_={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:v.pageSize||w.cursorConfig.pageSize}),w.model.pushStackElement(),w.setCursorStates(v.source,3,rr.simpleMove(w,w.getCursorStates(),_.direction,_.select,_.value,_.unit)),w.revealAllCursors(v.source,!0)}}n.CursorLeft=Ct(new o({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:ai,kbExpr:Re.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),n.CursorLeftSelect=Ct(new o({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:ai,kbExpr:Re.textInputFocus,primary:1039}})),n.CursorRight=Ct(new o({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:ai,kbExpr:Re.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),n.CursorRightSelect=Ct(new o({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:ai,kbExpr:Re.textInputFocus,primary:1041}})),n.CursorUp=Ct(new o({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:ai,kbExpr:Re.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),n.CursorUpSelect=Ct(new o({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:ai,kbExpr:Re.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),n.CursorPageUp=Ct(new o({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:ai,kbExpr:Re.textInputFocus,primary:11}})),n.CursorPageUpSelect=Ct(new o({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:ai,kbExpr:Re.textInputFocus,primary:1035}})),n.CursorDown=Ct(new o({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:ai,kbExpr:Re.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),n.CursorDownSelect=Ct(new o({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:ai,kbExpr:Re.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),n.CursorPageDown=Ct(new o({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:ai,kbExpr:Re.textInputFocus,primary:12}})),n.CursorPageDownSelect=Ct(new o({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:ai,kbExpr:Re.textInputFocus,primary:1036}})),n.CreateCursor=Ct(new class extends mn{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(b,w){if(!w.position)return;let v;w.wholeLine?v=rr.line(b,b.getPrimaryCursorState(),!1,w.position,w.viewPosition):v=rr.moveTo(b,b.getPrimaryCursorState(),!1,w.position,w.viewPosition);const _=b.getCursorStates();if(_.length>1){const y=v.modelState?v.modelState.position:null,C=v.viewState?v.viewState.position:null;for(let S=0,k=_.length;S<k;S++){const I=_[S];if(!(y&&!I.modelState.selection.containsPosition(y))&&!(C&&!I.viewState.selection.containsPosition(C))){_.splice(S,1),b.model.pushStackElement(),b.setCursorStates(w.source,3,_);return}}}_.push(v),b.model.pushStackElement(),b.setCursorStates(w.source,3,_)}}),n.LastCursorMoveToSelect=Ct(new class extends mn{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(b,w){if(!w.position)return;const v=b.getLastAddedCursorIndex(),_=b.getCursorStates(),y=_.slice(0);y[v]=rr.moveTo(b,_[v],!0,w.position,w.viewPosition),b.model.pushStackElement(),b.setCursorStates(w.source,3,y)}});class a extends mn{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,v){w.model.pushStackElement(),w.setCursorStates(v.source,3,rr.moveToBeginningOfLine(w,w.getCursorStates(),this._inSelectionMode)),w.revealAllCursors(v.source,!0)}}n.CursorHome=Ct(new a({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:ai,kbExpr:Re.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),n.CursorHomeSelect=Ct(new a({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:ai,kbExpr:Re.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class l extends mn{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,v){w.model.pushStackElement(),w.setCursorStates(v.source,3,this._exec(w.getCursorStates())),w.revealAllCursors(v.source,!0)}_exec(w){const v=[];for(let _=0,y=w.length;_<y;_++){const C=w[_],S=C.modelState.position.lineNumber;v[_]=Jt.fromModelState(C.modelState.move(this._inSelectionMode,S,1,0))}return v}}n.CursorLineStart=Ct(new l({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:ai,kbExpr:Re.textInputFocus,primary:0,mac:{primary:287}}})),n.CursorLineStartSelect=Ct(new l({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:ai,kbExpr:Re.textInputFocus,primary:0,mac:{primary:1311}}}));class c extends mn{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,v){w.model.pushStackElement(),w.setCursorStates(v.source,3,rr.moveToEndOfLine(w,w.getCursorStates(),this._inSelectionMode,v.sticky||!1)),w.revealAllCursors(v.source,!0)}}n.CursorEnd=Ct(new c({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:ai,kbExpr:Re.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},metadata:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:L("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),n.CursorEndSelect=Ct(new c({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:ai,kbExpr:Re.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},metadata:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:L("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class d extends mn{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,v){w.model.pushStackElement(),w.setCursorStates(v.source,3,this._exec(w,w.getCursorStates())),w.revealAllCursors(v.source,!0)}_exec(w,v){const _=[];for(let y=0,C=v.length;y<C;y++){const S=v[y],k=S.modelState.position.lineNumber,I=w.model.getLineMaxColumn(k);_[y]=Jt.fromModelState(S.modelState.move(this._inSelectionMode,k,I,0))}return _}}n.CursorLineEnd=Ct(new d({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:ai,kbExpr:Re.textInputFocus,primary:0,mac:{primary:291}}})),n.CursorLineEndSelect=Ct(new d({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:ai,kbExpr:Re.textInputFocus,primary:0,mac:{primary:1315}}}));class u extends mn{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,v){w.model.pushStackElement(),w.setCursorStates(v.source,3,rr.moveToBeginningOfBuffer(w,w.getCursorStates(),this._inSelectionMode)),w.revealAllCursors(v.source,!0)}}n.CursorTop=Ct(new u({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:ai,kbExpr:Re.textInputFocus,primary:2062,mac:{primary:2064}}})),n.CursorTopSelect=Ct(new u({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:ai,kbExpr:Re.textInputFocus,primary:3086,mac:{primary:3088}}}));class h extends mn{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,v){w.model.pushStackElement(),w.setCursorStates(v.source,3,rr.moveToEndOfBuffer(w,w.getCursorStates(),this._inSelectionMode)),w.revealAllCursors(v.source,!0)}}n.CursorBottom=Ct(new h({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:ai,kbExpr:Re.textInputFocus,primary:2061,mac:{primary:2066}}})),n.CursorBottomSelect=Ct(new h({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:ai,kbExpr:Re.textInputFocus,primary:3085,mac:{primary:3090}}}));class f extends mn{constructor(){super({id:"editorScroll",precondition:void 0,metadata:Vs.metadata})}determineScrollMethod(w){const v=[6],_=[1,2,3,4,5,6],y=[4,2],C=[1,3];return v.includes(w.unit)&&y.includes(w.direction)?this._runHorizontalEditorScroll.bind(this):_.includes(w.unit)&&C.includes(w.direction)?this._runVerticalEditorScroll.bind(this):null}runCoreEditorCommand(w,v){const _=Vs.parse(v);if(!_)return;const y=this.determineScrollMethod(_);y&&y(w,v.source,_)}_runVerticalEditorScroll(w,v,_){const y=this._computeDesiredScrollTop(w,_);if(_.revealCursor){const C=w.getCompletelyVisibleViewRangeAtScrollTop(y);w.setCursorStates(v,3,[rr.findPositionInViewportIfOutside(w,w.getPrimaryCursorState(),C,_.select)])}w.viewLayout.setScrollPosition({scrollTop:y},0)}_computeDesiredScrollTop(w,v){if(v.unit===1){const C=w.viewLayout.getFutureViewport(),S=w.getCompletelyVisibleViewRangeAtScrollTop(C.top),k=w.coordinatesConverter.convertViewRangeToModelRange(S);let I;v.direction===1?I=Math.max(1,k.startLineNumber-v.value):I=Math.min(w.model.getLineCount(),k.startLineNumber+v.value);const T=w.coordinatesConverter.convertModelPositionToViewPosition(new pe(I,1));return w.viewLayout.getVerticalOffsetForLineNumber(T.lineNumber)}if(v.unit===5){let C=0;return v.direction===3&&(C=w.model.getLineCount()-w.cursorConfig.pageSize),w.viewLayout.getVerticalOffsetForLineNumber(C)}let _;v.unit===3?_=w.cursorConfig.pageSize*v.value:v.unit===4?_=Math.round(w.cursorConfig.pageSize/2)*v.value:_=v.value;const y=(v.direction===1?-1:1)*_;return w.viewLayout.getCurrentScrollTop()+y*w.cursorConfig.lineHeight}_runHorizontalEditorScroll(w,v,_){const y=this._computeDesiredScrollLeft(w,_);w.viewLayout.setScrollPosition({scrollLeft:y},0)}_computeDesiredScrollLeft(w,v){const _=(v.direction===4?-1:1)*v.value;return w.viewLayout.getCurrentScrollLeft()+_*w.cursorConfig.typicalHalfwidthCharacterWidth}}n.EditorScrollImpl=f,n.EditorScroll=Ct(new f),n.ScrollLineUp=Ct(new class extends mn{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:ai,kbExpr:Re.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(b,w){n.EditorScroll.runCoreEditorCommand(b,{to:Vs.RawDirection.Up,by:Vs.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:w.source})}}),n.ScrollPageUp=Ct(new class extends mn{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:ai,kbExpr:Re.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(b,w){n.EditorScroll.runCoreEditorCommand(b,{to:Vs.RawDirection.Up,by:Vs.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:w.source})}}),n.ScrollEditorTop=Ct(new class extends mn{constructor(){super({id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:ai,kbExpr:Re.textInputFocus}})}runCoreEditorCommand(b,w){n.EditorScroll.runCoreEditorCommand(b,{to:Vs.RawDirection.Up,by:Vs.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:w.source})}}),n.ScrollLineDown=Ct(new class extends mn{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:ai,kbExpr:Re.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(b,w){n.EditorScroll.runCoreEditorCommand(b,{to:Vs.RawDirection.Down,by:Vs.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:w.source})}}),n.ScrollPageDown=Ct(new class extends mn{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:ai,kbExpr:Re.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(b,w){n.EditorScroll.runCoreEditorCommand(b,{to:Vs.RawDirection.Down,by:Vs.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:w.source})}}),n.ScrollEditorBottom=Ct(new class extends mn{constructor(){super({id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:ai,kbExpr:Re.textInputFocus}})}runCoreEditorCommand(b,w){n.EditorScroll.runCoreEditorCommand(b,{to:Vs.RawDirection.Down,by:Vs.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:w.source})}}),n.ScrollLeft=Ct(new class extends mn{constructor(){super({id:"scrollLeft",precondition:void 0,kbOpts:{weight:ai,kbExpr:Re.textInputFocus}})}runCoreEditorCommand(b,w){n.EditorScroll.runCoreEditorCommand(b,{to:Vs.RawDirection.Left,by:Vs.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:w.source})}}),n.ScrollRight=Ct(new class extends mn{constructor(){super({id:"scrollRight",precondition:void 0,kbOpts:{weight:ai,kbExpr:Re.textInputFocus}})}runCoreEditorCommand(b,w){n.EditorScroll.runCoreEditorCommand(b,{to:Vs.RawDirection.Right,by:Vs.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:w.source})}});class g extends mn{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,v){v.position&&(w.model.pushStackElement(),w.setCursorStates(v.source,3,[rr.word(w,w.getPrimaryCursorState(),this._inSelectionMode,v.position)]),v.revealType!==2&&w.revealAllCursors(v.source,!0,!0))}}n.WordSelect=Ct(new g({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),n.WordSelectDrag=Ct(new g({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),n.LastCursorWordSelect=Ct(new class extends mn{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(b,w){if(!w.position)return;const v=b.getLastAddedCursorIndex(),_=b.getCursorStates(),y=_.slice(0),C=_[v];y[v]=rr.word(b,C,C.modelState.hasSelection(),w.position),b.model.pushStackElement(),b.setCursorStates(w.source,3,y)}});class m extends mn{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,v){v.position&&(w.model.pushStackElement(),w.setCursorStates(v.source,3,[rr.line(w,w.getPrimaryCursorState(),this._inSelectionMode,v.position,v.viewPosition)]),v.revealType!==2&&w.revealAllCursors(v.source,!1,!0))}}n.LineSelect=Ct(new m({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),n.LineSelectDrag=Ct(new m({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class p extends mn{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,v){if(!v.position)return;const _=w.getLastAddedCursorIndex(),y=w.getCursorStates(),C=y.slice(0);C[_]=rr.line(w,y[_],this._inSelectionMode,v.position,v.viewPosition),w.model.pushStackElement(),w.setCursorStates(v.source,3,C)}}n.LastCursorLineSelect=Ct(new p({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),n.LastCursorLineSelectDrag=Ct(new p({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),n.CancelSelection=Ct(new class extends mn{constructor(){super({id:"cancelSelection",precondition:Re.hasNonEmptySelection,kbOpts:{weight:ai,kbExpr:Re.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(b,w){b.model.pushStackElement(),b.setCursorStates(w.source,3,[rr.cancelSelection(b,b.getPrimaryCursorState())]),b.revealAllCursors(w.source,!0)}}),n.RemoveSecondaryCursors=Ct(new class extends mn{constructor(){super({id:"removeSecondaryCursors",precondition:Re.hasMultipleSelections,kbOpts:{weight:ai+1,kbExpr:Re.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(b,w){b.model.pushStackElement(),b.setCursorStates(w.source,3,[b.getPrimaryCursorState()]),b.revealAllCursors(w.source,!0),oL(L("removedCursor","Removed secondary cursors"))}}),n.RevealLine=Ct(new class extends mn{constructor(){super({id:"revealLine",precondition:void 0,metadata:op.metadata})}runCoreEditorCommand(b,w){const v=w,_=v.lineNumber||0;let y=typeof _=="number"?_+1:parseInt(_)+1;y<1&&(y=1);const C=b.model.getLineCount();y>C&&(y=C);const S=new te(y,1,y,b.model.getLineMaxColumn(y));let k=0;if(v.at)switch(v.at){case op.RawAtArgument.Top:k=3;break;case op.RawAtArgument.Center:k=1;break;case op.RawAtArgument.Bottom:k=4;break}const I=b.coordinatesConverter.convertModelRangeToViewRange(S);b.revealRange(w.source,!1,I,k,0)}}),n.SelectAll=new class extends C3{constructor(){super(CRe)}runDOMCommand(b){ua&&(b.focus(),b.select()),b.ownerDocument.execCommand("selectAll")}runEditorCommand(b,w,v){const _=w._getViewModel();_&&this.runCoreEditorCommand(_,v)}runCoreEditorCommand(b,w){b.model.pushStackElement(),b.setCursorStates("keyboard",3,[rr.selectAll(b,b.getPrimaryCursorState())])}},n.SetSelection=Ct(new class extends mn{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(b,w){w.selection&&(b.model.pushStackElement(),b.setCursorStates(w.source,3,[Jt.fromModelSelection(w.selection)]))}})})(ds||(ds={}));const Z9e=Wt.and(Re.textInputFocus,Re.columnSelection);function C0(n,e){lm.registerKeybindingRule({id:n,primary:e,when:Z9e,weight:ai+1})}C0(ds.CursorColumnSelectLeft.id,1039);C0(ds.CursorColumnSelectRight.id,1041);C0(ds.CursorColumnSelectUp.id,1040);C0(ds.CursorColumnSelectPageUp.id,1035);C0(ds.CursorColumnSelectDown.id,1042);C0(ds.CursorColumnSelectPageDown.id,1036);function XH(n){return n.register(),n}var zH;(function(n){class e extends Fc{runEditorCommand(i,s,r){const o=s._getViewModel();o&&this.runCoreEditingCommand(s,o,r||{})}}n.CoreEditingCommand=e,n.LineBreakInsert=Ct(new class extends e{constructor(){super({id:"lineBreakInsert",precondition:Re.writable,kbOpts:{weight:ai,kbExpr:Re.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(t,i,s){t.pushUndoStop(),t.executeCommands(this.id,yn.lineBreakInsert(i.cursorConfig,i.model,i.getCursorStates().map(r=>r.modelState.selection)))}}),n.Outdent=Ct(new class extends e{constructor(){super({id:"outdent",precondition:Re.writable,kbOpts:{weight:ai,kbExpr:Wt.and(Re.editorTextFocus,Re.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(t,i,s){t.pushUndoStop(),t.executeCommands(this.id,yn.outdent(i.cursorConfig,i.model,i.getCursorStates().map(r=>r.modelState.selection))),t.pushUndoStop()}}),n.Tab=Ct(new class extends e{constructor(){super({id:"tab",precondition:Re.writable,kbOpts:{weight:ai,kbExpr:Wt.and(Re.editorTextFocus,Re.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(t,i,s){t.pushUndoStop(),t.executeCommands(this.id,yn.tab(i.cursorConfig,i.model,i.getCursorStates().map(r=>r.modelState.selection))),t.pushUndoStop()}}),n.DeleteLeft=Ct(new class extends e{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:ai,kbExpr:Re.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(t,i,s){const[r,o]=Rg.deleteLeft(i.getPrevEditOperationType(),i.cursorConfig,i.model,i.getCursorStates().map(a=>a.modelState.selection),i.getCursorAutoClosedCharacters());r&&t.pushUndoStop(),t.executeCommands(this.id,o),i.setPrevEditOperationType(2)}}),n.DeleteRight=Ct(new class extends e{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:ai,kbExpr:Re.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(t,i,s){const[r,o]=Rg.deleteRight(i.getPrevEditOperationType(),i.cursorConfig,i.model,i.getCursorStates().map(a=>a.modelState.selection));r&&t.pushUndoStop(),t.executeCommands(this.id,o),i.setPrevEditOperationType(3)}}),n.Undo=new class extends C3{constructor(){super(Bie)}runDOMCommand(t){t.ownerDocument.execCommand("undo")}runEditorCommand(t,i,s){if(!(!i.hasModel()||i.getOption(91)===!0))return i.getModel().undo()}},n.Redo=new class extends C3{constructor(){super(Xie)}runDOMCommand(t){t.ownerDocument.execCommand("redo")}runEditorCommand(t,i,s){if(!(!i.hasModel()||i.getOption(91)===!0))return i.getModel().redo()}}})(zH||(zH={}));class HH extends E2{constructor(e,t,i){super({id:e,precondition:void 0,metadata:i}),this._handlerId=t}runCommand(e,t){const i=e.get(Vn).getFocusedCodeEditor();i&&i.trigger("keyboard",this._handlerId,t)}}function um(n,e){XH(new HH("default:"+n,n)),XH(new HH(n,n,e))}um("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]});um("replacePreviousChar");um("compositionType");um("compositionStart");um("compositionEnd");um("paste");um("cut");const dne=ri("markerDecorationsService");var G9e=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},B9e=function(n,e){return function(t,i){e(t,i,n)}};let B_=class{constructor(e,t){}dispose(){}};B_.ID="editor.contrib.markerDecorations";B_=G9e([B9e(1,dne)],B_);du(B_.ID,B_,0);class une{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingLeft="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){const t=sl(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){const t=sl(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){const t=sl(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){const t=sl(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){const t=sl(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){const t=sl(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){const t=sl(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setPaddingLeft(e){const t=sl(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){const t=sl(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){const t=sl(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){const t=sl(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}function sl(n){return typeof n=="number"?`${n}px`:n}function di(n){return new une(n)}function $s(n,e){n instanceof une?(n.setFontFamily(e.getMassagedFontFamily()),n.setFontWeight(e.fontWeight),n.setFontSize(e.fontSize),n.setFontFeatureSettings(e.fontFeatureSettings),n.setFontVariationSettings(e.fontVariationSettings),n.setLineHeight(e.lineHeight),n.setLetterSpacing(e.letterSpacing)):(n.style.fontFamily=e.getMassagedFontFamily(),n.style.fontWeight=e.fontWeight,n.style.fontSize=e.fontSize+"px",n.style.fontFeatureSettings=e.fontFeatureSettings,n.style.fontVariationSettings=e.fontVariationSettings,n.style.lineHeight=e.lineHeight+"px",n.style.letterSpacing=e.letterSpacing+"px")}function Wu(n){if(!n||typeof n!="object"||n instanceof RegExp)return n;const e=Array.isArray(n)?[]:{};return Object.entries(n).forEach(([t,i])=>{e[t]=i&&typeof i=="object"?Wu(i):i}),e}function X9e(n){if(!n||typeof n!="object")return n;const e=[n];for(;e.length>0;){const t=e.shift();Object.freeze(t);for(const i in t)if(hne.call(t,i)){const s=t[i];typeof s=="object"&&!Object.isFrozen(s)&&!DEe(s)&&e.push(s)}}return n}const hne=Object.prototype.hasOwnProperty;function fne(n,e){return L3(n,e,new Set)}function L3(n,e,t){if(xo(n))return n;const i=e(n);if(typeof i<"u")return i;if(Array.isArray(n)){const s=[];for(const r of n)s.push(L3(r,e,t));return s}if(Ha(n)){if(t.has(n))throw new Error("Cannot clone recursive data-structure");t.add(n);const s={};for(const r in n)hne.call(n,r)&&(s[r]=L3(n[r],e,t));return t.delete(n),s}return n}function Ro(n,e){if(n===e)return!0;if(n==null||e===null||e===void 0||typeof n!=typeof e||typeof n!="object"||Array.isArray(n)!==Array.isArray(e))return!1;let t,i;if(Array.isArray(n)){if(n.length!==e.length)return!1;for(t=0;t<n.length;t++)if(!Ro(n[t],e[t]))return!1}else{const s=[];for(i in n)s.push(i);s.sort();const r=[];for(i in e)r.push(i);if(r.sort(),!Ro(s,r))return!1;for(t=0;t<s.length;t++)if(!Ro(n[s[t]],e[s[t]]))return!1}return!0}function z9e(n){let e=[];for(;Object.prototype!==n;)e=e.concat(Object.getOwnPropertyNames(n)),n=Object.getPrototypeOf(n);return e}function qV(n){const e=[];for(const t of z9e(n))typeof n[t]=="function"&&e.push(t);return e}function H9e(n,e){const t=s=>function(){const r=Array.prototype.slice.call(arguments,0);return e(s,r)},i={};for(const s of n)i[s]=t(s);return i}class gne extends Le{constructor(e,t){super(),this._onDidChange=this._register(new ue),this.onDidChange=this._onDidChange.event,this._referenceDomElement=e,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){if(!this._resizeObserver&&this._referenceDomElement){let e=null;const t=()=>{e?this.observe({width:e.width,height:e.height}):this.observe()};let i=!1,s=!1;const r=()=>{if(i&&!s)try{i=!1,s=!0,t()}finally{po(pt(this._referenceDomElement),()=>{s=!1,r()})}};this._resizeObserver=new ResizeObserver(o=>{o&&o[0]&&o[0].contentRect?e={width:o[0].contentRect.width,height:o[0].contentRect.height}:e=null,i=!0,r()}),this._resizeObserver.observe(this._referenceDomElement)}}stopObserving(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let i=0,s=0;t?(i=t.width,s=t.height):this._referenceDomElement&&(i=this._referenceDomElement.clientWidth,s=this._referenceDomElement.clientHeight),i=Math.max(5,i),s=Math.max(5,s),(this._width!==i||this._height!==s)&&(this._width=i,this._height=s,e&&this._onDidChange.fire())}}class U9e extends Le{constructor(e){super(),this._onDidChange=this._register(new ue),this.onDidChange=this._onDidChange.event,this._listener=()=>this._handleChange(e,!0),this._mediaQueryList=null,this._handleChange(e,!1)}_handleChange(e,t){var i;(i=this._mediaQueryList)===null||i===void 0||i.removeEventListener("change",this._listener),this._mediaQueryList=e.matchMedia(`(resolution: ${e.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener("change",this._listener),t&&this._onDidChange.fire()}}class Y9e extends Le{get value(){return this._value}constructor(e){super(),this._onDidChange=this._register(new ue),this.onDidChange=this._onDidChange.event,this._value=this._getPixelRatio(e);const t=this._register(new U9e(e));this._register(t.onDidChange(()=>{this._value=this._getPixelRatio(e),this._onDidChange.fire(this._value)}))}_getPixelRatio(e){const t=document.createElement("canvas").getContext("2d"),i=e.devicePixelRatio||1,s=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return i/s}}class K9e{constructor(){this.mapWindowIdToPixelRatioMonitor=new Map}_getOrCreatePixelRatioMonitor(e){const t=nL(e);let i=this.mapWindowIdToPixelRatioMonitor.get(t);return i||(i=new Y9e(e),this.mapWindowIdToPixelRatioMonitor.set(t,i),Be.once(M5e)(({vscodeWindowId:s})=>{s===t&&(i?.dispose(),this.mapWindowIdToPixelRatioMonitor.delete(t))})),i}getInstance(e){return this._getOrCreatePixelRatioMonitor(e)}}const hL=new K9e;class j9e{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}}class eP{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(e){this._createDomElements(),e.document.body.appendChild(this._container),this._readFromDomElements(),e.document.body.removeChild(this._container),this._container=null,this._testElements=null}_createDomElements(){const e=document.createElement("div");e.style.position="absolute",e.style.top="-50000px",e.style.width="50000px";const t=document.createElement("div");$s(t,this._bareFontInfo),e.appendChild(t);const i=document.createElement("div");$s(i,this._bareFontInfo),i.style.fontWeight="bold",e.appendChild(i);const s=document.createElement("div");$s(s,this._bareFontInfo),s.style.fontStyle="italic",e.appendChild(s);const r=[];for(const o of this._requests){let a;o.type===0&&(a=t),o.type===2&&(a=i),o.type===1&&(a=s),a.appendChild(document.createElement("br"));const l=document.createElement("span");eP._render(l,o),a.appendChild(l),r.push(l)}this._container=e,this._testElements=r}static _render(e,t){if(t.chr===" "){let i="";for(let s=0;s<8;s++)i+=i;e.innerText=i}else{let i=t.chr;for(let s=0;s<8;s++)i+=i;e.textContent=i}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){const i=this._requests[e],s=this._testElements[e];i.fulfill(s.offsetWidth/256)}}}function J9e(n,e,t){new eP(e,t).read(n)}const Ks={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}},ec=8;class mne{constructor(e){this._values=e}hasChanged(e){return this._values[e]}}class pne{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class $i{constructor(e,t,i,s){this.id=e,this.name=t,this.defaultValue=i,this.schema=s}applyUpdate(e,t){return V2(e,t)}compute(e,t,i){return i}}class qv{constructor(e,t){this.newValue=e,this.didChange=t}}function V2(n,e){if(typeof n!="object"||typeof e!="object"||!n||!e)return new qv(e,n!==e);if(Array.isArray(n)||Array.isArray(e)){const i=Array.isArray(n)&&Array.isArray(e)&&Gs(n,e);return new qv(e,!i)}let t=!1;for(const i in e)if(e.hasOwnProperty(i)){const s=V2(n[i],e[i]);s.didChange&&(n[i]=s.newValue,t=!0)}return new qv(n,t)}class _w{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return V2(e,t)}validate(e){return this.defaultValue}}class L0{constructor(e,t,i,s){this.id=e,this.name=t,this.defaultValue=i,this.schema=s}applyUpdate(e,t){return V2(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,i){return i}}function at(n,e){return typeof n>"u"?e:n==="false"?!1:!!n}class qt extends L0{constructor(e,t,i,s=void 0){typeof s<"u"&&(s.type="boolean",s.default=i),super(e,t,i,s)}validate(e){return at(e,this.defaultValue)}}function xf(n,e,t,i){if(typeof n>"u")return e;let s=parseInt(n,10);return isNaN(s)?e:(s=Math.max(t,s),s=Math.min(i,s),s|0)}class Ni extends L0{static clampedInt(e,t,i,s){return xf(e,t,i,s)}constructor(e,t,i,s,r,o=void 0){typeof o<"u"&&(o.type="integer",o.default=i,o.minimum=s,o.maximum=r),super(e,t,i,o),this.minimum=s,this.maximum=r}validate(e){return Ni.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}function $9e(n,e,t,i){if(typeof n>"u")return e;const s=Do.float(n,e);return Do.clamp(s,t,i)}class Do extends L0{static clamp(e,t,i){return e<t?t:e>i?i:e}static float(e,t){if(typeof e=="number")return e;if(typeof e>"u")return t;const i=parseFloat(e);return isNaN(i)?t:i}constructor(e,t,i,s,r){typeof r<"u"&&(r.type="number",r.default=i),super(e,t,i,r),this.validationFn=s}validate(e){return this.validationFn(Do.float(e,this.defaultValue))}}class wr extends L0{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,i,s=void 0){typeof s<"u"&&(s.type="string",s.default=i),super(e,t,i,s)}validate(e){return wr.string(e,this.defaultValue)}}function vn(n,e,t,i){return typeof n!="string"?e:i&&n in i?i[n]:t.indexOf(n)===-1?e:n}class hn extends L0{constructor(e,t,i,s,r=void 0){typeof r<"u"&&(r.type="string",r.enum=s,r.default=i),super(e,t,i,r),this._allowedValues=s}validate(e){return vn(e,this.defaultValue,this._allowedValues)}}class Ly extends $i{constructor(e,t,i,s,r,o,a=void 0){typeof a<"u"&&(a.type="string",a.enum=r,a.default=s),super(e,t,i,a),this._allowedValues=r,this._convert=o}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}}function Q9e(n){switch(n){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}class q9e extends $i{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[L("accessibilitySupport.auto","Use platform APIs to detect when a Screen Reader is attached."),L("accessibilitySupport.on","Optimize for usage with a Screen Reader."),L("accessibilitySupport.off","Assume a screen reader is not attached.")],default:"auto",tags:["accessibility"],description:L("accessibilitySupport","Controls if the UI should run in a mode where it is optimized for screen readers.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,i){return i===0?e.accessibilitySupport:i}}class e3e extends $i{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(23,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:L("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:L("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:at(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:at(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}function t3e(n){switch(n){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var Is;(function(n){n[n.Line=1]="Line",n[n.Block=2]="Block",n[n.Underline=3]="Underline",n[n.LineThin=4]="LineThin",n[n.BlockOutline=5]="BlockOutline",n[n.UnderlineThin=6]="UnderlineThin"})(Is||(Is={}));function i3e(n){switch(n){case"line":return Is.Line;case"block":return Is.Block;case"underline":return Is.Underline;case"line-thin":return Is.LineThin;case"block-outline":return Is.BlockOutline;case"underline-thin":return Is.UnderlineThin}}class n3e extends _w{constructor(){super(142)}compute(e,t,i){const s=["monaco-editor"];return t.get(39)&&s.push(t.get(39)),e.extraEditorClassName&&s.push(e.extraEditorClassName),t.get(74)==="default"?s.push("mouse-default"):t.get(74)==="copy"&&s.push("mouse-copy"),t.get(111)&&s.push("showUnused"),t.get(140)&&s.push("showDeprecated"),s.join(" ")}}class s3e extends qt{constructor(){super(37,"emptySelectionClipboard",!0,{description:L("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,i){return i&&e.emptySelectionClipboard}}class r3e extends $i{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(41,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:L("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[L("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),L("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),L("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:L("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[L("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),L("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),L("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:L("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:L("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:jt},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:L("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:L("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:at(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":vn(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":vn(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:at(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:at(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:at(t.loop,this.defaultValue.loop)}}}class Jo extends $i{constructor(){super(51,"fontLigatures",Jo.OFF,{anyOf:[{type:"boolean",description:L("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:L("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:L("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"||e.length===0?Jo.OFF:e==="true"?Jo.ON:e:e?Jo.ON:Jo.OFF}}Jo.OFF='"liga" off, "calt" off';Jo.ON='"liga" on, "calt" on';class _l extends $i{constructor(){super(54,"fontVariations",_l.OFF,{anyOf:[{type:"boolean",description:L("fontVariations","Enables/Disables the translation from font-weight to font-variation-settings. Change this to a string for fine-grained control of the 'font-variation-settings' CSS property.")},{type:"string",description:L("fontVariationSettings","Explicit 'font-variation-settings' CSS property. A boolean can be passed instead if one only needs to translate font-weight to font-variation-settings.")}],description:L("fontVariationsGeneral","Configures font variations. Can be either a boolean to enable/disable the translation from font-weight to font-variation-settings or a string for the value of the CSS 'font-variation-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?_l.OFF:e==="true"?_l.TRANSLATE:e:e?_l.TRANSLATE:_l.OFF}compute(e,t,i){return e.fontInfo.fontVariationSettings}}_l.OFF="normal";_l.TRANSLATE="translate";class o3e extends _w{constructor(){super(50)}compute(e,t,i){return e.fontInfo}}class a3e extends L0{constructor(){super(52,"fontSize",Wo.fontSize,{type:"number",minimum:6,maximum:100,default:Wo.fontSize,description:L("fontSize","Controls the font size in pixels.")})}validate(e){const t=Do.float(e,this.defaultValue);return t===0?Wo.fontSize:Do.clamp(t,6,100)}compute(e,t,i){return e.fontInfo.fontSize}}class hc extends $i{constructor(){super(53,"fontWeight",Wo.fontWeight,{anyOf:[{type:"number",minimum:hc.MINIMUM_VALUE,maximum:hc.MAXIMUM_VALUE,errorMessage:L("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:hc.SUGGESTION_VALUES}],default:Wo.fontWeight,description:L("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(Ni.clampedInt(e,Wo.fontWeight,hc.MINIMUM_VALUE,hc.MAXIMUM_VALUE))}}hc.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"];hc.MINIMUM_VALUE=1;hc.MAXIMUM_VALUE=1e3;class l3e extends $i{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[L("editor.gotoLocation.multiple.peek","Show Peek view of the results (default)"),L("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a Peek view"),L("editor.gotoLocation.multiple.goto","Go to the primary result and enable Peek-less navigation to others")]},i=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(58,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:L("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":{description:L("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:L("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleDeclarations":{description:L("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleImplementations":{description:L("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleReferences":{description:L("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist."),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:i,description:L("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:i,description:L("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:i,description:L("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:i,description:L("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:i,description:L("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){var t,i,s,r,o;if(!e||typeof e!="object")return this.defaultValue;const a=e;return{multiple:vn(a.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:(t=a.multipleDefinitions)!==null&&t!==void 0?t:vn(a.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:(i=a.multipleTypeDefinitions)!==null&&i!==void 0?i:vn(a.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:(s=a.multipleDeclarations)!==null&&s!==void 0?s:vn(a.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:(r=a.multipleImplementations)!==null&&r!==void 0?r:vn(a.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:(o=a.multipleReferences)!==null&&o!==void 0?o:vn(a.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:wr.string(a.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:wr.string(a.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:wr.string(a.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:wr.string(a.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:wr.string(a.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand)}}}class c3e extends $i{constructor(){const e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(60,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:L("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:L("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:L("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,description:L("hover.hidingDelay","Controls the delay in milliseconds after which the hover is hidden. Requires `editor.hover.sticky` to be enabled.")},"editor.hover.above":{type:"boolean",default:e.above,description:L("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:at(t.enabled,this.defaultValue.enabled),delay:Ni.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:at(t.sticky,this.defaultValue.sticky),hidingDelay:Ni.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:at(t.above,this.defaultValue.above)}}}class Ip extends _w{constructor(){super(145)}compute(e,t,i){return Ip.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio,glyphMarginDecorationLaneCount:e.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(e){const t=e.height/e.lineHeight,i=Math.floor(e.paddingTop/e.lineHeight);let s=Math.floor(e.paddingBottom/e.lineHeight);e.scrollBeyondLastLine&&(s=Math.max(s,t-1));const r=(i+e.viewLineCount+s)/(e.pixelRatio*e.height),o=Math.floor(e.viewLineCount/r);return{typicalViewportLineCount:t,extraLinesBeforeFirstLine:i,extraLinesBeyondLastLine:s,desiredRatio:r,minimapLineCount:o}}static _computeMinimapLayout(e,t){const i=e.outerWidth,s=e.outerHeight,r=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(r*s),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:s};const o=t.stableMinimapLayoutInput,a=o&&e.outerHeight===o.outerHeight&&e.lineHeight===o.lineHeight&&e.typicalHalfwidthCharacterWidth===o.typicalHalfwidthCharacterWidth&&e.pixelRatio===o.pixelRatio&&e.scrollBeyondLastLine===o.scrollBeyondLastLine&&e.paddingTop===o.paddingTop&&e.paddingBottom===o.paddingBottom&&e.minimap.enabled===o.minimap.enabled&&e.minimap.side===o.minimap.side&&e.minimap.size===o.minimap.size&&e.minimap.showSlider===o.minimap.showSlider&&e.minimap.renderCharacters===o.minimap.renderCharacters&&e.minimap.maxColumn===o.minimap.maxColumn&&e.minimap.scale===o.minimap.scale&&e.verticalScrollbarWidth===o.verticalScrollbarWidth&&e.isViewportWrapping===o.isViewportWrapping,l=e.lineHeight,c=e.typicalHalfwidthCharacterWidth,d=e.scrollBeyondLastLine,u=e.minimap.renderCharacters;let h=r>=2?Math.round(e.minimap.scale*2):e.minimap.scale;const f=e.minimap.maxColumn,g=e.minimap.size,m=e.minimap.side,p=e.verticalScrollbarWidth,b=e.viewLineCount,w=e.remainingWidth,v=e.isViewportWrapping,_=u?2:3;let y=Math.floor(r*s);const C=y/r;let S=!1,k=!1,I=_*h,T=h/r,D=1;if(g==="fill"||g==="fit"){const{typicalViewportLineCount:U,extraLinesBeforeFirstLine:B,extraLinesBeyondLastLine:Y,desiredRatio:ne,minimapLineCount:ee}=Ip.computeContainedMinimapLineCount({viewLineCount:b,scrollBeyondLastLine:d,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:s,lineHeight:l,pixelRatio:r});if(b/ee>1)S=!0,k=!0,h=1,I=1,T=h/r;else{let ge=!1,Ie=h+1;if(g==="fit"){const xe=Math.ceil((B+b+Y)*I);v&&a&&w<=t.stableFitRemainingWidth?(ge=!0,Ie=t.stableFitMaxMinimapScale):ge=xe>y}if(g==="fill"||ge){S=!0;const xe=h;I=Math.min(l*r,Math.max(1,Math.floor(1/ne))),v&&a&&w<=t.stableFitRemainingWidth&&(Ie=t.stableFitMaxMinimapScale),h=Math.min(Ie,Math.max(1,Math.floor(I/_))),h>xe&&(D=Math.min(2,h/xe)),T=h/r/D,y=Math.ceil(Math.max(U,B+b+Y)*I),v?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=w,t.stableFitMaxMinimapScale=h):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}const M=Math.floor(f*T),E=Math.min(M,Math.max(0,Math.floor((w-p-2)*T/(c+T)))+ec);let W=Math.floor(r*E);const P=W/r;W=Math.floor(W*D);const N=u?1:2,H=m==="left"?0:i-E-p;return{renderMinimap:N,minimapLeft:H,minimapWidth:E,minimapHeightIsEditorHeight:S,minimapIsSampling:k,minimapScale:h,minimapLineHeight:I,minimapCanvasInnerWidth:W,minimapCanvasInnerHeight:y,minimapCanvasOuterWidth:P,minimapCanvasOuterHeight:C}}static computeLayout(e,t){const i=t.outerWidth|0,s=t.outerHeight|0,r=t.lineHeight|0,o=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,l=t.maxDigitWidth,c=t.pixelRatio,d=t.viewLineCount,u=e.get(137),h=u==="inherit"?e.get(136):u,f=h==="inherit"?e.get(132):h,g=e.get(135),m=t.isDominatedByLongLines,p=e.get(57),b=e.get(68).renderType!==0,w=e.get(69),v=e.get(105),_=e.get(84),y=e.get(73),C=e.get(103),S=C.verticalScrollbarSize,k=C.verticalHasArrows,I=C.arrowSize,T=C.horizontalScrollbarSize,D=e.get(43),M=e.get(110)!=="never";let E=e.get(66);D&&M&&(E+=16);let W=0;if(b){const K=Math.max(o,w);W=Math.round(K*l)}let P=0;p&&(P=r*t.glyphMarginDecorationLaneCount);let N=0,H=N+P,U=H+W,B=U+E;const Y=i-P-W-E;let ne=!1,ee=!1,$=-1;h==="inherit"&&m?(ne=!0,ee=!0):f==="on"||f==="bounded"?ee=!0:f==="wordWrapColumn"&&($=g);const ge=Ip._computeMinimapLayout({outerWidth:i,outerHeight:s,lineHeight:r,typicalHalfwidthCharacterWidth:a,pixelRatio:c,scrollBeyondLastLine:v,paddingTop:_.top,paddingBottom:_.bottom,minimap:y,verticalScrollbarWidth:S,viewLineCount:d,remainingWidth:Y,isViewportWrapping:ee},t.memory||new pne);ge.renderMinimap!==0&&ge.minimapLeft===0&&(N+=ge.minimapWidth,H+=ge.minimapWidth,U+=ge.minimapWidth,B+=ge.minimapWidth);const Ie=Y-ge.minimapWidth,xe=Math.max(1,Math.floor((Ie-S-2)/a)),z=k?I:0;return ee&&($=Math.max(1,xe),f==="bounded"&&($=Math.min($,g))),{width:i,height:s,glyphMarginLeft:N,glyphMarginWidth:P,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount,lineNumbersLeft:H,lineNumbersWidth:W,decorationsLeft:U,decorationsWidth:E,contentLeft:B,contentWidth:Ie,minimap:ge,viewportColumn:xe,isWordWrapMinified:ne,isViewportWrapping:ee,wrappingColumn:$,verticalScrollbarWidth:S,horizontalScrollbarHeight:T,overviewRuler:{top:z,width:S,height:s-2*z,right:0}}}}class d3e extends $i{constructor(){super(139,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[L("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),L("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],type:"string",enum:["simple","advanced"],default:"simple",description:L("wrappingStrategy","Controls the algorithm that computes wrapping points. Note that when in accessibility mode, advanced will be used for the best experience.")}})}validate(e){return vn(e,"simple",["simple","advanced"])}compute(e,t,i){return t.get(2)===2?"advanced":i}}var od;(function(n){n.Off="off",n.OnCode="onCode",n.On="on"})(od||(od={}));class u3e extends $i{constructor(){const e={enabled:od.On};super(65,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",tags:["experimental"],enum:[od.Off,od.OnCode,od.On],default:e.enabled,enumDescriptions:[L("editor.lightbulb.enabled.off","Disable the code action menu."),L("editor.lightbulb.enabled.onCode","Show the code action menu when the cursor is on lines with code."),L("editor.lightbulb.enabled.on","Show the code action menu when the cursor is on lines with code or on empty lines.")],description:L("enabled","Enables the Code Action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:vn(e.enabled,this.defaultValue.enabled,[od.Off,od.OnCode,od.On])}}}class h3e extends $i{constructor(){const e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(115,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:L("editor.stickyScroll.enabled","Shows the nested current scopes during the scroll at the top of the editor."),tags:["experimental"]},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:L("editor.stickyScroll.maxLineCount","Defines the maximum number of sticky lines to show.")},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:L("editor.stickyScroll.defaultModel","Defines the model to use for determining which lines to stick. If the outline model does not exist, it will fall back on the folding provider model which falls back on the indentation model. This order is respected in all three cases.")},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:L("editor.stickyScroll.scrollWithEditor","Enable scrolling of Sticky Scroll with the editor's horizontal scrollbar.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:at(t.enabled,this.defaultValue.enabled),maxLineCount:Ni.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:vn(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:at(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}}class f3e extends $i{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1};super(141,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:L("inlayHints.enable","Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[L("editor.inlayHints.on","Inlay hints are enabled"),L("editor.inlayHints.onUnlessPressed","Inlay hints are showing by default and hide when holding {0}",jt?"Ctrl+Option":"Ctrl+Alt"),L("editor.inlayHints.offUnlessPressed","Inlay hints are hidden by default and show when holding {0}",jt?"Ctrl+Option":"Ctrl+Alt"),L("editor.inlayHints.off","Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:L("inlayHints.fontSize","Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:L("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:L("inlayHints.padding","Enables the padding around the inlay hints in the editor.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:vn(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:Ni.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:wr.string(t.fontFamily,this.defaultValue.fontFamily),padding:at(t.padding,this.defaultValue.padding)}}}class g3e extends $i{constructor(){super(66,"lineDecorationsWidth",10)}validate(e){return typeof e=="string"&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):Ni.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,i){return i<0?Ni.clampedInt(-i*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):i}}class m3e extends Do{constructor(){super(67,"lineHeight",Wo.lineHeight,e=>Do.clamp(e,0,150),{markdownDescription:L("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,i){return e.fontInfo.lineHeight}}class p3e extends $i{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};super(73,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:L("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:L("minimap.autohide","Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[L("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),L("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),L("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:L("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:L("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:L("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:L("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:L("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:L("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:L("minimap.showRegionSectionHeaders","Controls whether named regions are shown as section headers in the minimap.")},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:L("minimap.showMarkSectionHeaders","Controls whether MARK: comments are shown as section headers in the minimap.")},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:L("minimap.sectionHeaderFontSize","Controls the font size of section headers in the minimap.")},"editor.minimap.sectionHeaderLetterSpacing":{type:"number",default:e.sectionHeaderLetterSpacing,description:L("minimap.sectionHeaderLetterSpacing","Controls the amount of space (in pixels) between characters of section header. This helps the readability of the header in small font sizes.")}})}validate(e){var t,i;if(!e||typeof e!="object")return this.defaultValue;const s=e;return{enabled:at(s.enabled,this.defaultValue.enabled),autohide:at(s.autohide,this.defaultValue.autohide),size:vn(s.size,this.defaultValue.size,["proportional","fill","fit"]),side:vn(s.side,this.defaultValue.side,["right","left"]),showSlider:vn(s.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:at(s.renderCharacters,this.defaultValue.renderCharacters),scale:Ni.clampedInt(s.scale,1,1,3),maxColumn:Ni.clampedInt(s.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:at(s.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:at(s.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),sectionHeaderFontSize:Do.clamp((t=s.sectionHeaderFontSize)!==null&&t!==void 0?t:this.defaultValue.sectionHeaderFontSize,4,32),sectionHeaderLetterSpacing:Do.clamp((i=s.sectionHeaderLetterSpacing)!==null&&i!==void 0?i:this.defaultValue.sectionHeaderLetterSpacing,0,5)}}}function b3e(n){return n==="ctrlCmd"?jt?"metaKey":"ctrlKey":"altKey"}class v3e extends $i{constructor(){super(84,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:L("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:L("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:Ni.clampedInt(t.top,0,0,1e3),bottom:Ni.clampedInt(t.bottom,0,0,1e3)}}}class _3e extends $i{constructor(){const e={enabled:!0,cycle:!0};super(86,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:L("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:L("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:at(t.enabled,this.defaultValue.enabled),cycle:at(t.cycle,this.defaultValue.cycle)}}}class w3e extends _w{constructor(){super(143)}compute(e,t,i){return e.pixelRatio}}class y3e extends $i{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[L("on","Quick suggestions show inside the suggest widget"),L("inline","Quick suggestions show as ghost text"),L("off","Quick suggestions are disabled")]}];super(89,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:L("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{anyOf:t,default:e.comments,description:L("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{anyOf:t,default:e.other,description:L("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}},default:e,markdownDescription:L("quickSuggestions","Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the '{0}'-setting which controls if suggestions are triggered by special characters.","#editor.suggestOnTriggerCharacters#")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){const c=e?"on":"off";return{comments:c,strings:c,other:c}}if(!e||typeof e!="object")return this.defaultValue;const{other:t,comments:i,strings:s}=e,r=["on","inline","off"];let o,a,l;return typeof t=="boolean"?o=t?"on":"off":o=vn(t,this.defaultValue.other,r),typeof i=="boolean"?a=i?"on":"off":a=vn(i,this.defaultValue.comments,r),typeof s=="boolean"?l=s?"on":"off":l=vn(s,this.defaultValue.strings,r),{other:o,comments:a,strings:l}}}class S3e extends $i{constructor(){super(68,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[L("lineNumbers.off","Line numbers are not rendered."),L("lineNumbers.on","Line numbers are rendered as absolute number."),L("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),L("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:L("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,i=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,i=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:i}}}function fL(n){const e=n.get(98);return e==="editable"?n.get(91):e!=="on"}class C3e extends $i{constructor(){const e=[],t={type:"number",description:L("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(102,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:L("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:L("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="number")t.push({column:Ni.clampedInt(i,0,0,1e4),color:null});else if(i&&typeof i=="object"){const s=i;t.push({column:Ni.clampedInt(s.column,0,0,1e4),color:s.color})}return t.sort((i,s)=>i.column-s.column),t}return this.defaultValue}}class L3e extends $i{constructor(){super(92,"readOnlyMessage",void 0)}validate(e){return!e||typeof e!="object"?this.defaultValue:e}}function UH(n,e){if(typeof n!="string")return e;switch(n){case"hidden":return 2;case"visible":return 3;default:return 1}}let k3e=class extends $i{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(103,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[L("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),L("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),L("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:L("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[L("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),L("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),L("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:L("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:L("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:L("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:L("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:L("scrollbar.ignoreHorizontalScrollbarInContentHeight","When set, the horizontal scrollbar will not increase the size of the editor's content.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,i=Ni.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),s=Ni.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:Ni.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:UH(t.vertical,this.defaultValue.vertical),horizontal:UH(t.horizontal,this.defaultValue.horizontal),useShadows:at(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:at(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:at(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:at(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:at(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:i,horizontalSliderSize:Ni.clampedInt(t.horizontalSliderSize,i,0,1e3),verticalScrollbarSize:s,verticalSliderSize:Ni.clampedInt(t.verticalSliderSize,s,0,1e3),scrollByPage:at(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:at(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}};const rl="inUntrustedWorkspace",pf={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"};class x3e extends $i{constructor(){const e={nonBasicASCII:rl,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:rl,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(125,"unicodeHighlight",e,{[pf.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,rl],default:e.nonBasicASCII,description:L("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[pf.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:L("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[pf.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:L("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[pf.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,rl],default:e.includeComments,description:L("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to Unicode highlighting.")},[pf.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,rl],default:e.includeStrings,description:L("unicodeHighlight.includeStrings","Controls whether characters in strings should also be subject to Unicode highlighting.")},[pf.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:L("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[pf.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:L("unicodeHighlight.allowedLocales","Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(e,t){let i=!1;t.allowedCharacters&&e&&(Ro(e.allowedCharacters,t.allowedCharacters)||(e={...e,allowedCharacters:t.allowedCharacters},i=!0)),t.allowedLocales&&e&&(Ro(e.allowedLocales,t.allowedLocales)||(e={...e,allowedLocales:t.allowedLocales},i=!0));const s=super.applyUpdate(e,t);return i?new qv(s.newValue,!0):s}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:Mp(t.nonBasicASCII,rl,[!0,!1,rl]),invisibleCharacters:at(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:at(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:Mp(t.includeComments,rl,[!0,!1,rl]),includeStrings:Mp(t.includeStrings,rl,[!0,!1,rl]),allowedCharacters:this.validateBooleanMap(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(e.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(e,t){if(typeof e!="object"||!e)return t;const i={};for(const[s,r]of Object.entries(e))r===!0&&(i[s]=!0);return i}}class T3e extends $i{constructor(){const e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default"};super(62,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:L("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[L("inlineSuggest.showToolbar.always","Show the inline suggestion toolbar whenever an inline suggestion is shown."),L("inlineSuggest.showToolbar.onHover","Show the inline suggestion toolbar when hovering over an inline suggestion."),L("inlineSuggest.showToolbar.never","Never show the inline suggestion toolbar.")],description:L("inlineSuggest.showToolbar","Controls when to show the inline suggestion toolbar.")},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:L("inlineSuggest.suppressSuggestions","Controls how inline suggestions interact with the suggest widget. If enabled, the suggest widget is not shown automatically when inline suggestions are available.")},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:L("inlineSuggest.fontFamily","Controls the font family of the inline suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:at(t.enabled,this.defaultValue.enabled),mode:vn(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:vn(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:at(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:at(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:wr.string(t.fontFamily,this.defaultValue.fontFamily)}}}class D3e extends $i{constructor(){const e={enabled:!1,showToolbar:"onHover",fontFamily:"default",keepOnBlur:!1,backgroundColoring:!1};super(63,"experimentalInlineEdit",e,{"editor.experimentalInlineEdit.enabled":{type:"boolean",default:e.enabled,description:L("inlineEdit.enabled","Controls whether to show inline edits in the editor.")},"editor.experimentalInlineEdit.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[L("inlineEdit.showToolbar.always","Show the inline edit toolbar whenever an inline suggestion is shown."),L("inlineEdit.showToolbar.onHover","Show the inline edit toolbar when hovering over an inline suggestion."),L("inlineEdit.showToolbar.never","Never show the inline edit toolbar.")],description:L("inlineEdit.showToolbar","Controls when to show the inline edit toolbar.")},"editor.experimentalInlineEdit.fontFamily":{type:"string",default:e.fontFamily,description:L("inlineEdit.fontFamily","Controls the font family of the inline edit.")},"editor.experimentalInlineEdit.backgroundColoring":{type:"boolean",default:e.backgroundColoring,description:L("inlineEdit.backgroundColoring","Controls whether to color the background of inline edits.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:at(t.enabled,this.defaultValue.enabled),showToolbar:vn(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),fontFamily:wr.string(t.fontFamily,this.defaultValue.fontFamily),keepOnBlur:at(t.keepOnBlur,this.defaultValue.keepOnBlur),backgroundColoring:at(t.backgroundColoring,this.defaultValue.backgroundColoring)}}}class I3e extends $i{constructor(){const e={enabled:Ks.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:Ks.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(15,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:L("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:L("bracketPairColorization.independentColorPoolPerBracketType","Controls whether each bracket type has its own independent color pool.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:at(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:at(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}}class M3e extends $i{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(16,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[L("editor.guides.bracketPairs.true","Enables bracket pair guides."),L("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),L("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:L("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[L("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),L("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),L("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:L("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:L("editor.guides.highlightActiveBracketPair","Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:L("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[L("editor.guides.highlightActiveIndentation.true","Highlights the active indent guide."),L("editor.guides.highlightActiveIndentation.always","Highlights the active indent guide even if bracket guides are highlighted."),L("editor.guides.highlightActiveIndentation.false","Do not highlight the active indent guide.")],default:e.highlightActiveIndentation,description:L("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:Mp(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:Mp(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:at(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:at(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:Mp(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}}function Mp(n,e,t){const i=t.indexOf(n);return i===-1?e:t[i]}class E3e extends $i{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(118,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[L("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),L("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:L("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:L("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:L("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:L("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[L("suggest.insertMode.always","Always select a suggestion when automatically triggering IntelliSense."),L("suggest.insertMode.never","Never select a suggestion when automatically triggering IntelliSense."),L("suggest.insertMode.whenTriggerCharacter","Select a suggestion only when triggering IntelliSense from a trigger character."),L("suggest.insertMode.whenQuickSuggestion","Select a suggestion only when triggering IntelliSense as you type.")],default:e.selectionMode,markdownDescription:L("suggest.selectionMode","Controls whether a suggestion is selected when the widget shows. Note that this only applies to automatically triggered suggestions (`#editor.quickSuggestions#` and `#editor.suggestOnTriggerCharacters#`) and that a suggestion is always selected when explicitly invoked, e.g via `Ctrl+Space`.")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:L("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:L("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:L("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:L("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:L("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget.")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:L("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:L("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.matchOnWordStartOnly","When enabled IntelliSense filtering requires that the first character matches on a word start. For example, `c` on `Console` or `WebContext` but _not_ on `description`. When disabled IntelliSense will show more results but still sorts them by match quality.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:L("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:vn(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:at(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:at(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:at(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:at(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:vn(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:at(t.showIcons,this.defaultValue.showIcons),showStatusBar:at(t.showStatusBar,this.defaultValue.showStatusBar),preview:at(t.preview,this.defaultValue.preview),previewMode:vn(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:at(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:at(t.showMethods,this.defaultValue.showMethods),showFunctions:at(t.showFunctions,this.defaultValue.showFunctions),showConstructors:at(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:at(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:at(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:at(t.showFields,this.defaultValue.showFields),showVariables:at(t.showVariables,this.defaultValue.showVariables),showClasses:at(t.showClasses,this.defaultValue.showClasses),showStructs:at(t.showStructs,this.defaultValue.showStructs),showInterfaces:at(t.showInterfaces,this.defaultValue.showInterfaces),showModules:at(t.showModules,this.defaultValue.showModules),showProperties:at(t.showProperties,this.defaultValue.showProperties),showEvents:at(t.showEvents,this.defaultValue.showEvents),showOperators:at(t.showOperators,this.defaultValue.showOperators),showUnits:at(t.showUnits,this.defaultValue.showUnits),showValues:at(t.showValues,this.defaultValue.showValues),showConstants:at(t.showConstants,this.defaultValue.showConstants),showEnums:at(t.showEnums,this.defaultValue.showEnums),showEnumMembers:at(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:at(t.showKeywords,this.defaultValue.showKeywords),showWords:at(t.showWords,this.defaultValue.showWords),showColors:at(t.showColors,this.defaultValue.showColors),showFiles:at(t.showFiles,this.defaultValue.showFiles),showReferences:at(t.showReferences,this.defaultValue.showReferences),showFolders:at(t.showFolders,this.defaultValue.showFolders),showTypeParameters:at(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:at(t.showSnippets,this.defaultValue.showSnippets),showUsers:at(t.showUsers,this.defaultValue.showUsers),showIssues:at(t.showIssues,this.defaultValue.showIssues)}}}class N3e extends $i{constructor(){super(113,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:L("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:L("selectSubwords","Whether subwords (like 'foo' in 'fooBar' or 'foo_bar') should be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:at(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:at(e.selectSubwords,this.defaultValue.selectSubwords)}}}class R3e extends $i{constructor(){const e=[];super(130,"wordSegmenterLocales",e,{anyOf:[{description:L("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"string"},{description:L("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"array",items:{type:"string"}}]})}validate(e){if(typeof e=="string"&&(e=[e]),Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="string")try{Intl.Segmenter.supportedLocalesOf(i).length>0&&t.push(i)}catch{}return t}return this.defaultValue}}class W3e extends $i{constructor(){super(138,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[L("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),L("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),L("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),L("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:L("wrappingIndent","Controls the indentation of wrapped lines."),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,i){return t.get(2)===2?0:i}}class A3e extends _w{constructor(){super(146)}compute(e,t,i){const s=t.get(145);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:s.isWordWrapMinified,isViewportWrapping:s.isViewportWrapping,wrappingColumn:s.wrappingColumn}}}class F3e extends $i{constructor(){const e={enabled:!0,showDropSelector:"afterDrop"};super(36,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:L("dropIntoEditor.enabled","Controls whether you can drag and drop a file into a text editor by holding down the `Shift` key (instead of opening the file in an editor).")},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:L("dropIntoEditor.showDropSelector","Controls if a widget is shown when dropping files into the editor. This widget lets you control how the file is dropped."),enum:["afterDrop","never"],enumDescriptions:[L("dropIntoEditor.showDropSelector.afterDrop","Show the drop selector widget after a file is dropped into the editor."),L("dropIntoEditor.showDropSelector.never","Never show the drop selector widget. Instead the default drop provider is always used.")],default:"afterDrop"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:at(t.enabled,this.defaultValue.enabled),showDropSelector:vn(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}}class V3e extends $i{constructor(){const e={enabled:!0,showPasteSelector:"afterPaste"};super(85,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:L("pasteAs.enabled","Controls whether you can paste content in different ways.")},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:L("pasteAs.showPasteSelector","Controls if a widget is shown when pasting content in to the editor. This widget lets you control how the file is pasted."),enum:["afterPaste","never"],enumDescriptions:[L("pasteAs.showPasteSelector.afterPaste","Show the paste selector widget after content is pasted into the editor."),L("pasteAs.showPasteSelector.never","Never show the paste selector widget. Instead the default pasting behavior is always used.")],default:"afterPaste"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:at(t.enabled,this.defaultValue.enabled),showPasteSelector:vn(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}}const P3e="Consolas, 'Courier New', monospace",O3e="Menlo, Monaco, 'Courier New', monospace",Z3e="'Droid Sans Mono', 'monospace', monospace",Wo={fontFamily:jt?O3e:Er?Z3e:P3e,fontWeight:"normal",fontSize:jt?12:14,lineHeight:0,letterSpacing:0},ap=[];function Ne(n){return ap[n.id]=n,n}const hm={acceptSuggestionOnCommitCharacter:Ne(new qt(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:L("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:Ne(new hn(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",L("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:L("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:Ne(new q9e),accessibilityPageSize:Ne(new Ni(3,"accessibilityPageSize",10,1,1073741824,{description:L("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default."),tags:["accessibility"]})),ariaLabel:Ne(new wr(4,"ariaLabel",L("editorViewAccessibleLabel","Editor content"))),ariaRequired:Ne(new qt(5,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:Ne(new qt(8,"screenReaderAnnounceInlineSuggestion",!0,{description:L("screenReaderAnnounceInlineSuggestion","Control whether inline suggestions are announced by a screen reader."),tags:["accessibility"]})),autoClosingBrackets:Ne(new hn(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",L("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),L("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:L("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingComments:Ne(new hn(7,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",L("editor.autoClosingComments.languageDefined","Use language configurations to determine when to autoclose comments."),L("editor.autoClosingComments.beforeWhitespace","Autoclose comments only when the cursor is to the left of whitespace."),""],description:L("autoClosingComments","Controls whether the editor should automatically close comments after the user adds an opening comment.")})),autoClosingDelete:Ne(new hn(9,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",L("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:L("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:Ne(new hn(10,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",L("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:L("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:Ne(new hn(11,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",L("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),L("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:L("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:Ne(new Ly(12,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],Q9e,{enumDescriptions:[L("editor.autoIndent.none","The editor will not insert indentation automatically."),L("editor.autoIndent.keep","The editor will keep the current line's indentation."),L("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),L("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),L("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:L("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:Ne(new qt(13,"automaticLayout",!1)),autoSurround:Ne(new hn(14,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[L("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),L("editor.autoSurround.quotes","Surround with quotes but not brackets."),L("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:L("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:Ne(new I3e),bracketPairGuides:Ne(new M3e),stickyTabStops:Ne(new qt(116,"stickyTabStops",!1,{description:L("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:Ne(new qt(17,"codeLens",!0,{description:L("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:Ne(new wr(18,"codeLensFontFamily","",{description:L("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:Ne(new Ni(19,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:L("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to 0, 90% of `#editor.fontSize#` is used.")})),colorDecorators:Ne(new qt(20,"colorDecorators",!0,{description:L("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),colorDecoratorActivatedOn:Ne(new hn(148,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[L("editor.colorDecoratorActivatedOn.clickAndHover","Make the color picker appear both on click and hover of the color decorator"),L("editor.colorDecoratorActivatedOn.hover","Make the color picker appear on hover of the color decorator"),L("editor.colorDecoratorActivatedOn.click","Make the color picker appear on click of the color decorator")],description:L("colorDecoratorActivatedOn","Controls the condition to make a color picker appear from a color decorator")})),colorDecoratorsLimit:Ne(new Ni(21,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:L("colorDecoratorsLimit","Controls the max number of color decorators that can be rendered in an editor at once.")})),columnSelection:Ne(new qt(22,"columnSelection",!1,{description:L("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:Ne(new e3e),contextmenu:Ne(new qt(24,"contextmenu",!0)),copyWithSyntaxHighlighting:Ne(new qt(25,"copyWithSyntaxHighlighting",!0,{description:L("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:Ne(new Ly(26,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],t3e,{description:L("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:Ne(new hn(27,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[L("cursorSmoothCaretAnimation.off","Smooth caret animation is disabled."),L("cursorSmoothCaretAnimation.explicit","Smooth caret animation is enabled only when the user moves the cursor with an explicit gesture."),L("cursorSmoothCaretAnimation.on","Smooth caret animation is always enabled.")],description:L("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:Ne(new Ly(28,"cursorStyle",Is.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],i3e,{description:L("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:Ne(new Ni(29,"cursorSurroundingLines",0,0,1073741824,{description:L("cursorSurroundingLines","Controls the minimal number of visible leading lines (minimum 0) and trailing lines (minimum 1) surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:Ne(new hn(30,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[L("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),L("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],markdownDescription:L("cursorSurroundingLinesStyle","Controls when `#editor.cursorSurroundingLines#` should be enforced.")})),cursorWidth:Ne(new Ni(31,"cursorWidth",0,0,1073741824,{markdownDescription:L("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:Ne(new qt(32,"disableLayerHinting",!1)),disableMonospaceOptimizations:Ne(new qt(33,"disableMonospaceOptimizations",!1)),domReadOnly:Ne(new qt(34,"domReadOnly",!1)),dragAndDrop:Ne(new qt(35,"dragAndDrop",!0,{description:L("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:Ne(new s3e),dropIntoEditor:Ne(new F3e),stickyScroll:Ne(new h3e),experimentalWhitespaceRendering:Ne(new hn(38,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[L("experimentalWhitespaceRendering.svg","Use a new rendering method with svgs."),L("experimentalWhitespaceRendering.font","Use a new rendering method with font characters."),L("experimentalWhitespaceRendering.off","Use the stable rendering method.")],description:L("experimentalWhitespaceRendering","Controls whether whitespace is rendered with a new, experimental method.")})),extraEditorClassName:Ne(new wr(39,"extraEditorClassName","")),fastScrollSensitivity:Ne(new Do(40,"fastScrollSensitivity",5,n=>n<=0?5:n,{markdownDescription:L("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:Ne(new r3e),fixedOverflowWidgets:Ne(new qt(42,"fixedOverflowWidgets",!1)),folding:Ne(new qt(43,"folding",!0,{description:L("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:Ne(new hn(44,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[L("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),L("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:L("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:Ne(new qt(45,"foldingHighlight",!0,{description:L("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:Ne(new qt(46,"foldingImportsByDefault",!1,{description:L("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:Ne(new Ni(47,"foldingMaximumRegions",5e3,10,65e3,{description:L("foldingMaximumRegions","The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:Ne(new qt(48,"unfoldOnClickAfterEndOfLine",!1,{description:L("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:Ne(new wr(49,"fontFamily",Wo.fontFamily,{description:L("fontFamily","Controls the font family.")})),fontInfo:Ne(new o3e),fontLigatures2:Ne(new Jo),fontSize:Ne(new a3e),fontWeight:Ne(new hc),fontVariations:Ne(new _l),formatOnPaste:Ne(new qt(55,"formatOnPaste",!1,{description:L("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:Ne(new qt(56,"formatOnType",!1,{description:L("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:Ne(new qt(57,"glyphMargin",!0,{description:L("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:Ne(new l3e),hideCursorInOverviewRuler:Ne(new qt(59,"hideCursorInOverviewRuler",!1,{description:L("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:Ne(new c3e),inDiffEditor:Ne(new qt(61,"inDiffEditor",!1)),letterSpacing:Ne(new Do(64,"letterSpacing",Wo.letterSpacing,n=>Do.clamp(n,-5,20),{description:L("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:Ne(new u3e),lineDecorationsWidth:Ne(new g3e),lineHeight:Ne(new m3e),lineNumbers:Ne(new S3e),lineNumbersMinChars:Ne(new Ni(69,"lineNumbersMinChars",5,1,300)),linkedEditing:Ne(new qt(70,"linkedEditing",!1,{description:L("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols such as HTML tags, are updated while editing.")})),links:Ne(new qt(71,"links",!0,{description:L("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:Ne(new hn(72,"matchBrackets","always",["always","near","never"],{description:L("matchBrackets","Highlight matching brackets.")})),minimap:Ne(new p3e),mouseStyle:Ne(new hn(74,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:Ne(new Do(75,"mouseWheelScrollSensitivity",1,n=>n===0?1:n,{markdownDescription:L("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:Ne(new qt(76,"mouseWheelZoom",!1,{markdownDescription:jt?L("mouseWheelZoom.mac","Zoom the font of the editor when using mouse wheel and holding `Cmd`."):L("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:Ne(new qt(77,"multiCursorMergeOverlapping",!0,{description:L("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:Ne(new Ly(78,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],b3e,{markdownEnumDescriptions:[L("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),L("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:L({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:Ne(new hn(79,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[L("multiCursorPaste.spread","Each cursor pastes a single line of the text."),L("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:L("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),multiCursorLimit:Ne(new Ni(80,"multiCursorLimit",1e4,1,1e5,{markdownDescription:L("multiCursorLimit","Controls the max number of cursors that can be in an active editor at once.")})),occurrencesHighlight:Ne(new hn(81,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[L("occurrencesHighlight.off","Does not highlight occurrences."),L("occurrencesHighlight.singleFile","Highlights occurrences only in the current file."),L("occurrencesHighlight.multiFile","Experimental: Highlights occurrences across all valid open files.")],markdownDescription:L("occurrencesHighlight","Controls whether occurrences should be highlighted across open files.")})),overviewRulerBorder:Ne(new qt(82,"overviewRulerBorder",!0,{description:L("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:Ne(new Ni(83,"overviewRulerLanes",3,0,3)),padding:Ne(new v3e),pasteAs:Ne(new V3e),parameterHints:Ne(new _3e),peekWidgetDefaultFocus:Ne(new hn(87,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[L("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),L("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:L("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),definitionLinkOpensInPeek:Ne(new qt(88,"definitionLinkOpensInPeek",!1,{description:L("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:Ne(new y3e),quickSuggestionsDelay:Ne(new Ni(90,"quickSuggestionsDelay",10,0,1073741824,{description:L("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:Ne(new qt(91,"readOnly",!1)),readOnlyMessage:Ne(new L3e),renameOnType:Ne(new qt(93,"renameOnType",!1,{description:L("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:L("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:Ne(new qt(94,"renderControlCharacters",!0,{description:L("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:Ne(new hn(95,"renderFinalNewline",Er?"dimmed":"on",["off","on","dimmed"],{description:L("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:Ne(new hn(96,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",L("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:L("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:Ne(new qt(97,"renderLineHighlightOnlyWhenFocus",!1,{description:L("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:Ne(new hn(98,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:Ne(new hn(99,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",L("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),L("renderWhitespace.selection","Render whitespace characters only on selected text."),L("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:L("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:Ne(new Ni(100,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:Ne(new qt(101,"roundedSelection",!0,{description:L("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:Ne(new C3e),scrollbar:Ne(new k3e),scrollBeyondLastColumn:Ne(new Ni(104,"scrollBeyondLastColumn",4,0,1073741824,{description:L("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:Ne(new qt(105,"scrollBeyondLastLine",!0,{description:L("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:Ne(new qt(106,"scrollPredominantAxis",!0,{description:L("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:Ne(new qt(107,"selectionClipboard",!0,{description:L("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:Er})),selectionHighlight:Ne(new qt(108,"selectionHighlight",!0,{description:L("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:Ne(new qt(109,"selectOnLineNumbers",!0)),showFoldingControls:Ne(new hn(110,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[L("showFoldingControls.always","Always show the folding controls."),L("showFoldingControls.never","Never show the folding controls and reduce the gutter size."),L("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:L("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:Ne(new qt(111,"showUnused",!0,{description:L("showUnused","Controls fading out of unused code.")})),showDeprecated:Ne(new qt(140,"showDeprecated",!0,{description:L("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:Ne(new f3e),snippetSuggestions:Ne(new hn(112,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[L("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),L("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),L("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),L("snippetSuggestions.none","Do not show snippet suggestions.")],description:L("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:Ne(new N3e),smoothScrolling:Ne(new qt(114,"smoothScrolling",!1,{description:L("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:Ne(new Ni(117,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:Ne(new E3e),inlineSuggest:Ne(new T3e),inlineEdit:Ne(new D3e),inlineCompletionsAccessibilityVerbose:Ne(new qt(149,"inlineCompletionsAccessibilityVerbose",!1,{description:L("inlineCompletionsAccessibilityVerbose","Controls whether the accessibility hint should be provided to screen reader users when an inline completion is shown.")})),suggestFontSize:Ne(new Ni(119,"suggestFontSize",0,0,1e3,{markdownDescription:L("suggestFontSize","Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),suggestLineHeight:Ne(new Ni(120,"suggestLineHeight",0,0,1e3,{markdownDescription:L("suggestLineHeight","Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:Ne(new qt(121,"suggestOnTriggerCharacters",!0,{description:L("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:Ne(new hn(122,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[L("suggestSelection.first","Always select the first suggestion."),L("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),L("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:L("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:Ne(new hn(123,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[L("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),L("tabCompletion.off","Disable tab completions."),L("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:L("tabCompletion","Enables tab completions.")})),tabIndex:Ne(new Ni(124,"tabIndex",0,-1,1073741824)),unicodeHighlight:Ne(new x3e),unusualLineTerminators:Ne(new hn(126,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[L("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),L("unusualLineTerminators.off","Unusual line terminators are ignored."),L("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:L("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:Ne(new qt(127,"useShadowDOM",!0)),useTabStops:Ne(new qt(128,"useTabStops",!0,{description:L("useTabStops","Spaces and tabs are inserted and deleted in alignment with tab stops.")})),wordBreak:Ne(new hn(129,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[L("wordBreak.normal","Use the default line break rule."),L("wordBreak.keepAll","Word breaks should not be used for Chinese/Japanese/Korean (CJK) text. Non-CJK text behavior is the same as for normal.")],description:L("wordBreak","Controls the word break rules used for Chinese/Japanese/Korean (CJK) text.")})),wordSegmenterLocales:Ne(new R3e),wordSeparators:Ne(new wr(131,"wordSeparators",Yie,{description:L("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:Ne(new hn(132,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[L("wordWrap.off","Lines will never wrap."),L("wordWrap.on","Lines will wrap at the viewport width."),L({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),L({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:L({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:Ne(new wr(133,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;")),wordWrapBreakBeforeCharacters:Ne(new wr(134,"wordWrapBreakBeforeCharacters","([{+")),wordWrapColumn:Ne(new Ni(135,"wordWrapColumn",80,1,1073741824,{markdownDescription:L({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:Ne(new hn(136,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:Ne(new hn(137,"wordWrapOverride2","inherit",["off","on","inherit"])),editorClassName:Ne(new n3e),defaultColorDecorators:Ne(new qt(147,"defaultColorDecorators",!1,{markdownDescription:L("defaultColorDecorators","Controls whether inline color decorations should be shown using the default document color provider")})),pixelRatio:Ne(new w3e),tabFocusMode:Ne(new qt(144,"tabFocusMode",!1,{markdownDescription:L("tabFocusMode","Controls whether the editor receives tabs or defers them to the workbench for navigation.")})),layoutInfo:Ne(new Ip),wrappingInfo:Ne(new A3e),wrappingIndent:Ne(new W3e),wrappingStrategy:Ne(new d3e)},Pu=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new ue,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(n){n=Math.min(Math.max(-5,n),20),this._zoomLevel!==n&&(this._zoomLevel=n,this._onDidChangeZoomLevel.fire(this._zoomLevel))}},G3e=jt?1.5:1.35,q5=8;class ag{static createFromValidatedSettings(e,t,i){const s=e.get(49),r=e.get(53),o=e.get(52),a=e.get(51),l=e.get(54),c=e.get(67),d=e.get(64);return ag._create(s,r,o,a,l,c,d,t,i)}static _create(e,t,i,s,r,o,a,l,c){o===0?o=G3e*i:o<q5&&(o=o*i),o=Math.round(o),o<q5&&(o=q5);const d=1+(c?0:Pu.getZoomLevel()*.1);return i*=d,o*=d,r===_l.TRANSLATE&&(t==="normal"||t==="bold"?r=_l.OFF:(r=`'wght' ${parseInt(t,10)}`,t="normal")),new ag({pixelRatio:l,fontFamily:e,fontWeight:t,fontSize:i,fontFeatureSettings:s,fontVariationSettings:r,lineHeight:o,letterSpacing:a})}constructor(e){this._bareFontInfoBrand=void 0,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.fontVariationSettings=e.fontVariationSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.fontVariationSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(){const e=Wo.fontFamily,t=ag._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}}const B3e=2;class k3 extends ag{constructor(e,t){super(e),this._editorStylingBrand=void 0,this.version=B3e,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.fontVariationSettings===e.fontVariationSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}}class X3e extends Le{constructor(){super(...arguments),this._cache=new Map,this._evictUntrustedReadingsTimeout=-1,this._onDidChange=this._register(new ue),this.onDidChange=this._onDidChange.event}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearAllFontInfos(){this._cache.clear(),this._onDidChange.fire()}_ensureCache(e){const t=nL(e);let i=this._cache.get(t);return i||(i=new z3e,this._cache.set(t,i)),i}_writeToCache(e,t,i){this._ensureCache(e).put(t,i),!i.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=e.setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings(e)},5e3))}_evictUntrustedReadings(e){const t=this._ensureCache(e),i=t.getValues();let s=!1;for(const r of i)r.isTrusted||(s=!0,t.remove(r));s&&this._onDidChange.fire()}readFontInfo(e,t){const i=this._ensureCache(e);if(!i.has(t)){let s=this._actualReadFontInfo(e,t);(s.typicalHalfwidthCharacterWidth<=2||s.typicalFullwidthCharacterWidth<=2||s.spaceWidth<=2||s.maxDigitWidth<=2)&&(s=new k3({pixelRatio:hL.getInstance(e).value,fontFamily:s.fontFamily,fontWeight:s.fontWeight,fontSize:s.fontSize,fontFeatureSettings:s.fontFeatureSettings,fontVariationSettings:s.fontVariationSettings,lineHeight:s.lineHeight,letterSpacing:s.letterSpacing,isMonospace:s.isMonospace,typicalHalfwidthCharacterWidth:Math.max(s.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(s.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:s.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(s.spaceWidth,5),middotWidth:Math.max(s.middotWidth,5),wsmiddotWidth:Math.max(s.wsmiddotWidth,5),maxDigitWidth:Math.max(s.maxDigitWidth,5)},!1)),this._writeToCache(e,t,s)}return i.get(t)}_createRequest(e,t,i,s){const r=new j9e(e,t);return i.push(r),s?.push(r),r}_actualReadFontInfo(e,t){const i=[],s=[],r=this._createRequest("n",0,i,s),o=this._createRequest("",0,i,null),a=this._createRequest(" ",0,i,s),l=this._createRequest("0",0,i,s),c=this._createRequest("1",0,i,s),d=this._createRequest("2",0,i,s),u=this._createRequest("3",0,i,s),h=this._createRequest("4",0,i,s),f=this._createRequest("5",0,i,s),g=this._createRequest("6",0,i,s),m=this._createRequest("7",0,i,s),p=this._createRequest("8",0,i,s),b=this._createRequest("9",0,i,s),w=this._createRequest("",0,i,s),v=this._createRequest("",0,i,null),_=this._createRequest("",0,i,s),y=this._createRequest("",0,i,null),C="|/-_ilm%";for(let D=0,M=C.length;D<M;D++)this._createRequest(C.charAt(D),0,i,s),this._createRequest(C.charAt(D),1,i,s),this._createRequest(C.charAt(D),2,i,s);J9e(e,t,i);const S=Math.max(l.width,c.width,d.width,u.width,h.width,f.width,g.width,m.width,p.width,b.width);let k=t.fontFeatureSettings===Jo.OFF;const I=s[0].width;for(let D=1,M=s.length;k&&D<M;D++){const E=I-s[D].width;if(E<-.001||E>.001){k=!1;break}}let T=!0;return k&&v.width!==I&&(T=!1),v.width>w.width&&(T=!1),new k3({pixelRatio:hL.getInstance(e).value,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,fontVariationSettings:t.fontVariationSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:k,typicalHalfwidthCharacterWidth:r.width,typicalFullwidthCharacterWidth:o.width,canUseHalfwidthRightwardsArrow:T,spaceWidth:a.width,middotWidth:_.width,wsmiddotWidth:y.width,maxDigitWidth:S},!0)}}class z3e{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){const t=e.getId();return!!this._values[t]}get(e){const t=e.getId();return this._values[t]}put(e,t){const i=e.getId();this._keys[i]=e,this._values[i]=t}remove(e){const t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}}const x3=new X3e;class _h{constructor(e,t){this.key=e,this.migrate=t}apply(e){const t=_h._read(e,this.key),i=r=>_h._read(e,r),s=(r,o)=>_h._write(e,r,o);this.migrate(t,i,s)}static _read(e,t){if(typeof e>"u")return;const i=t.indexOf(".");if(i>=0){const s=t.substring(0,i);return this._read(e[s],t.substring(i+1))}return e[t]}static _write(e,t,i){const s=t.indexOf(".");if(s>=0){const r=t.substring(0,s);e[r]=e[r]||{},this._write(e[r],t.substring(s+1),i);return}e[t]=i}}_h.items=[];function Bl(n,e){_h.items.push(new _h(n,e))}function bo(n,e){Bl(n,(t,i,s)=>{if(typeof t<"u"){for(const[r,o]of e)if(t===r){s(n,o);return}}})}function H3e(n){_h.items.forEach(e=>e.apply(n))}bo("wordWrap",[[!0,"on"],[!1,"off"]]);bo("lineNumbers",[[!0,"on"],[!1,"off"]]);bo("cursorBlinking",[["visible","solid"]]);bo("renderWhitespace",[[!0,"boundary"],[!1,"none"]]);bo("renderLineHighlight",[[!0,"line"],[!1,"none"]]);bo("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]);bo("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]);bo("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);bo("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);bo("autoIndent",[[!1,"advanced"],[!0,"full"]]);bo("matchBrackets",[[!0,"always"],[!1,"never"]]);bo("renderFinalNewline",[[!0,"on"],[!1,"off"]]);bo("cursorSmoothCaretAnimation",[[!0,"on"],[!1,"off"]]);bo("occurrencesHighlight",[[!0,"singleFile"],[!1,"off"]]);bo("wordBasedSuggestions",[[!0,"matchingDocuments"],[!1,"off"]]);Bl("autoClosingBrackets",(n,e,t)=>{n===!1&&(t("autoClosingBrackets","never"),typeof e("autoClosingQuotes")>"u"&&t("autoClosingQuotes","never"),typeof e("autoSurround")>"u"&&t("autoSurround","never"))});Bl("renderIndentGuides",(n,e,t)=>{typeof n<"u"&&(t("renderIndentGuides",void 0),typeof e("guides.indentation")>"u"&&t("guides.indentation",!!n))});Bl("highlightActiveIndentGuide",(n,e,t)=>{typeof n<"u"&&(t("highlightActiveIndentGuide",void 0),typeof e("guides.highlightActiveIndentation")>"u"&&t("guides.highlightActiveIndentation",!!n))});const U3e={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};Bl("suggest.filteredTypes",(n,e,t)=>{if(n&&typeof n=="object"){for(const i of Object.entries(U3e))n[i[0]]===!1&&typeof e(`suggest.${i[1]}`)>"u"&&t(`suggest.${i[1]}`,!1);t("suggest.filteredTypes",void 0)}});Bl("quickSuggestions",(n,e,t)=>{if(typeof n=="boolean"){const i=n?"on":"off";t("quickSuggestions",{comments:i,strings:i,other:i})}});Bl("experimental.stickyScroll.enabled",(n,e,t)=>{typeof n=="boolean"&&(t("experimental.stickyScroll.enabled",void 0),typeof e("stickyScroll.enabled")>"u"&&t("stickyScroll.enabled",n))});Bl("experimental.stickyScroll.maxLineCount",(n,e,t)=>{typeof n=="number"&&(t("experimental.stickyScroll.maxLineCount",void 0),typeof e("stickyScroll.maxLineCount")>"u"&&t("stickyScroll.maxLineCount",n))});Bl("codeActionsOnSave",(n,e,t)=>{if(n&&typeof n=="object"){let i=!1;const s={};for(const r of Object.entries(n))typeof r[1]=="boolean"?(i=!0,s[r[0]]=r[1]?"explicit":"never"):s[r[0]]=r[1];i&&t("codeActionsOnSave",s)}});Bl("codeActionWidget.includeNearbyQuickfixes",(n,e,t)=>{typeof n=="boolean"&&(t("codeActionWidget.includeNearbyQuickfixes",void 0),typeof e("codeActionWidget.includeNearbyQuickFixes")>"u"&&t("codeActionWidget.includeNearbyQuickFixes",n))});Bl("lightbulb.enabled",(n,e,t)=>{typeof n=="boolean"&&t("lightbulb.enabled",n?void 0:"off")});class Y3e{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new ue,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(e){this._tabFocus=e,this._onDidChangeTabFocus.fire(this._tabFocus)}}const gL=new Y3e,Xl=ri("accessibilityService"),K3e=new it("accessibilityModeEnabled",!1);var j3e=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},J3e=function(n,e){return function(t,i){e(t,i,n)}};let T3=class extends Le{constructor(e,t,i,s,r){super(),this._accessibilityService=r,this._onDidChange=this._register(new ue),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new ue),this.onDidChangeFast=this._onDidChangeFast.event,this._isDominatedByLongLines=!1,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._reservedHeight=0,this._glyphMarginDecorationLaneCount=1,this._computeOptionsMemory=new pne,this.isSimpleWidget=e,this.contextMenuId=t,this._containerObserver=this._register(new gne(s,i.dimension)),this._targetWindowId=pt(s).vscodeWindowId,this._rawOptions=YH(i),this._validatedOptions=Ou.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(13)&&this._containerObserver.startObserving(),this._register(Pu.onDidChangeZoomLevel(()=>this._recomputeOptions())),this._register(gL.onDidChangeTabFocus(()=>this._recomputeOptions())),this._register(this._containerObserver.onDidChange(()=>this._recomputeOptions())),this._register(x3.onDidChange(()=>this._recomputeOptions())),this._register(hL.getInstance(pt(s)).onDidChange(()=>this._recomputeOptions())),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions()))}_recomputeOptions(){const e=this._computeOptions(),t=Ou.checkEquals(this.options,e);t!==null&&(this.options=e,this._onDidChangeFast.fire(t),this._onDidChange.fire(t))}_computeOptions(){const e=this._readEnvConfiguration(),t=ag.createFromValidatedSettings(this._validatedOptions,e.pixelRatio,this.isSimpleWidget),i=this._readFontInfo(t),s={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight-this._reservedHeight,fontInfo:i,extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:gL.getTabFocusMode(),accessibilitySupport:e.accessibilitySupport,glyphMarginDecorationLaneCount:this._glyphMarginDecorationLaneCount};return Ou.computeOptions(this._validatedOptions,s)}_readEnvConfiguration(){return{extraEditorClassName:Q3e(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:rg||ua,pixelRatio:hL.getInstance(fH(this._targetWindowId,!0).window).value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo(e){return x3.readFontInfo(fH(this._targetWindowId,!0).window,e)}getRawOptions(){return this._rawOptions}updateOptions(e){const t=YH(e);Ou.applyUpdate(this._rawOptions,t)&&(this._validatedOptions=Ou.validateOptions(this._rawOptions),this._recomputeOptions())}observeContainer(e){this._containerObserver.observe(e)}setIsDominatedByLongLines(e){this._isDominatedByLongLines!==e&&(this._isDominatedByLongLines=e,this._recomputeOptions())}setModelLineCount(e){const t=$3e(e);this._lineNumbersDigitCount!==t&&(this._lineNumbersDigitCount=t,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}setReservedHeight(e){this._reservedHeight!==e&&(this._reservedHeight=e,this._recomputeOptions())}setGlyphMarginDecorationLaneCount(e){this._glyphMarginDecorationLaneCount!==e&&(this._glyphMarginDecorationLaneCount=e,this._recomputeOptions())}};T3=j3e([J3e(4,Xl)],T3);function $3e(n){let e=0;for(;n;)n=Math.floor(n/10),e++;return e||1}function Q3e(){let n="";return!$d&&!Fte&&(n+="no-user-select "),$d&&(n+="no-minimap-shadow ",n+="enable-user-select "),jt&&(n+="mac "),n}class q3e{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class eWe{constructor(){this._values=[]}_read(e){if(e>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[e]}get(e){return this._read(e)}_write(e,t){this._values[e]=t}}class Ou{static validateOptions(e){const t=new q3e;for(const i of ap){const s=i.name==="_never_"?void 0:e[i.name];t._write(i.id,i.validate(s))}return t}static computeOptions(e,t){const i=new eWe;for(const s of ap)i._write(s.id,s.compute(t,i,e._read(s.id)));return i}static _deepEquals(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return e===t;if(Array.isArray(e)||Array.isArray(t))return Array.isArray(e)&&Array.isArray(t)?Gs(e,t):!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(!Ou._deepEquals(e[i],t[i]))return!1;return!0}static checkEquals(e,t){const i=[];let s=!1;for(const r of ap){const o=!Ou._deepEquals(e._read(r.id),t._read(r.id));i[r.id]=o,o&&(s=!0)}return s?new mne(i):null}static applyUpdate(e,t){let i=!1;for(const s of ap)if(t.hasOwnProperty(s.name)){const r=s.applyUpdate(e[s.name],t[s.name]);e[s.name]=r.newValue,i=i||r.didChange}return i}}function YH(n){const e=Wu(n);return H3e(e),e}var ju;(function(n){const e={total:0,min:Number.MAX_VALUE,max:0},t={...e},i={...e},s={...e};let r=0;const o={keydown:0,input:0,render:0};function a(){b(),performance.mark("inputlatency/start"),performance.mark("keydown/start"),o.keydown=1,queueMicrotask(l)}n.onKeyDown=a;function l(){o.keydown===1&&(performance.mark("keydown/end"),o.keydown=2)}function c(){performance.mark("input/start"),o.input=1,p()}n.onBeforeInput=c;function d(){o.input===0&&c(),queueMicrotask(u)}n.onInput=d;function u(){o.input===1&&(performance.mark("input/end"),o.input=2)}function h(){b()}n.onKeyUp=h;function f(){b()}n.onSelectionChange=f;function g(){o.keydown===2&&o.input===2&&o.render===0&&(performance.mark("render/start"),o.render=1,queueMicrotask(m),p())}n.onRenderStart=g;function m(){o.render===1&&(performance.mark("render/end"),o.render=2)}function p(){setTimeout(b)}function b(){o.keydown===2&&o.input===2&&o.render===2&&(performance.mark("inputlatency/end"),performance.measure("keydown","keydown/start","keydown/end"),performance.measure("input","input/start","input/end"),performance.measure("render","render/start","render/end"),performance.measure("inputlatency","inputlatency/start","inputlatency/end"),w("keydown",e),w("input",t),w("render",i),w("inputlatency",s),r++,v())}function w(S,k){const I=performance.getEntriesByName(S)[0].duration;k.total+=I,k.min=Math.min(k.min,I),k.max=Math.max(k.max,I)}function v(){performance.clearMarks("keydown/start"),performance.clearMarks("keydown/end"),performance.clearMarks("input/start"),performance.clearMarks("input/end"),performance.clearMarks("render/start"),performance.clearMarks("render/end"),performance.clearMarks("inputlatency/start"),performance.clearMarks("inputlatency/end"),performance.clearMeasures("keydown"),performance.clearMeasures("input"),performance.clearMeasures("render"),performance.clearMeasures("inputlatency"),o.keydown=0,o.input=0,o.render=0}function _(){if(r===0)return;const S={keydown:y(e),input:y(t),render:y(i),total:y(s),sampleCount:r};return C(e),C(t),C(i),C(s),r=0,S}n.getAndClearMeasurements=_;function y(S){return{average:S.total/r,max:S.max,min:S.min}}function C(S){S.total=0,S.min=Number.MAX_VALUE,S.max=0}})(ju||(ju={}));class P2{constructor(){this._hooks=new ct,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;const i=this._onStopCallback;this._onStopCallback=null,e&&i&&i(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,i,s,r){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=s,this._onStopCallback=r;let o=e;try{e.setPointerCapture(t),this._hooks.add(Et(()=>{try{e.releasePointerCapture(t)}catch{}}))}catch{o=pt(e)}this._hooks.add(we(o,Ge.POINTER_MOVE,a=>{if(a.buttons!==i){this.stopMonitoring(!0);return}a.preventDefault(),this._pointerMoveCallback(a)})),this._hooks.add(we(o,Ge.POINTER_UP,a=>this.stopMonitoring(!0)))}}function wh(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}class li{constructor(e,t,i,s=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,i))|0,this.a=wh(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}class Ta{constructor(e,t,i,s){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=wh(Math.max(Math.min(1,t),0),3),this.l=wh(Math.max(Math.min(1,i),0),3),this.a=wh(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,s=e.b/255,r=e.a,o=Math.max(t,i,s),a=Math.min(t,i,s);let l=0,c=0;const d=(a+o)/2,u=o-a;if(u>0){switch(c=Math.min(d<=.5?u/(2*d):u/(2-2*d),1),o){case t:l=(i-s)/u+(i<s?6:0);break;case i:l=(s-t)/u+2;break;case s:l=(t-i)/u+4;break}l*=60,l=Math.round(l)}return new Ta(l,c,d,r)}static _hue2rgb(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*6*i:i<1/2?t:i<2/3?e+(t-e)*(2/3-i)*6:e}static toRGBA(e){const t=e.h/360,{s:i,l:s,a:r}=e;let o,a,l;if(i===0)o=a=l=s;else{const c=s<.5?s*(1+i):s+i-s*i,d=2*s-c;o=Ta._hue2rgb(d,c,t+1/3),a=Ta._hue2rgb(d,c,t),l=Ta._hue2rgb(d,c,t-1/3)}return new li(Math.round(o*255),Math.round(a*255),Math.round(l*255),r)}}class lp{constructor(e,t,i,s){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=wh(Math.max(Math.min(1,t),0),3),this.v=wh(Math.max(Math.min(1,i),0),3),this.a=wh(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,s=e.b/255,r=Math.max(t,i,s),o=Math.min(t,i,s),a=r-o,l=r===0?0:a/r;let c;return a===0?c=0:r===t?c=((i-s)/a%6+6)%6:r===i?c=(s-t)/a+2:c=(t-i)/a+4,new lp(Math.round(c*60),l,r,e.a)}static toRGBA(e){const{h:t,s:i,v:s,a:r}=e,o=s*i,a=o*(1-Math.abs(t/60%2-1)),l=s-o;let[c,d,u]=[0,0,0];return t<60?(c=o,d=a):t<120?(c=a,d=o):t<180?(d=o,u=a):t<240?(d=a,u=o):t<300?(c=a,u=o):t<=360&&(c=o,u=a),c=Math.round((c+l)*255),d=Math.round((d+l)*255),u=Math.round((u+l)*255),new li(c,d,u,r)}}class Ce{static fromHex(e){return Ce.Format.CSS.parseHex(e)||Ce.red}static equals(e,t){return!e&&!t?!0:!e||!t?!1:e.equals(t)}get hsla(){return this._hsla?this._hsla:Ta.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:lp.fromRGBA(this.rgba)}constructor(e){if(e)if(e instanceof li)this.rgba=e;else if(e instanceof Ta)this._hsla=e,this.rgba=Ta.toRGBA(e);else if(e instanceof lp)this._hsva=e,this.rgba=lp.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}equals(e){return!!e&&li.equals(this.rgba,e.rgba)&&Ta.equals(this.hsla,e.hsla)&&lp.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=Ce._relativeLuminanceForComponent(this.rgba.r),t=Ce._relativeLuminanceForComponent(this.rgba.g),i=Ce._relativeLuminanceForComponent(this.rgba.b),s=.2126*e+.7152*t+.0722*i;return wh(s,4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t>i}isDarkerThan(e){const t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t<i}lighten(e){return new Ce(new Ta(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new Ce(new Ta(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:i,b:s,a:r}=this.rgba;return new Ce(new li(t,i,s,r*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new Ce(new li(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}makeOpaque(e){if(this.isOpaque()||e.rgba.a!==1)return this;const{r:t,g:i,b:s,a:r}=this.rgba;return new Ce(new li(e.rgba.r-r*(e.rgba.r-t),e.rgba.g-r*(e.rgba.g-i),e.rgba.b-r*(e.rgba.b-s),1))}toString(){return this._toString||(this._toString=Ce.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,i){if(e.isLighterThan(t))return e;i=i||.5;const s=e.getRelativeLuminance(),r=t.getRelativeLuminance();return i=i*(r-s)/r,e.lighten(i)}static getDarkerColor(e,t,i){if(e.isDarkerThan(t))return e;i=i||.5;const s=e.getRelativeLuminance(),r=t.getRelativeLuminance();return i=i*(s-r)/s,e.darken(i)}}Ce.white=new Ce(new li(255,255,255,1));Ce.black=new Ce(new li(0,0,0,1));Ce.red=new Ce(new li(255,0,0,1));Ce.blue=new Ce(new li(0,0,255,1));Ce.green=new Ce(new li(0,255,0,1));Ce.cyan=new Ce(new li(0,255,255,1));Ce.lightgrey=new Ce(new li(211,211,211,1));Ce.transparent=new Ce(new li(0,0,0,0));(function(n){(function(e){(function(t){function i(f){return f.rgba.a===1?`rgb(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b})`:n.Format.CSS.formatRGBA(f)}t.formatRGB=i;function s(f){return`rgba(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b}, ${+f.rgba.a.toFixed(2)})`}t.formatRGBA=s;function r(f){return f.hsla.a===1?`hsl(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%)`:n.Format.CSS.formatHSLA(f)}t.formatHSL=r;function o(f){return`hsla(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%, ${f.hsla.a.toFixed(2)})`}t.formatHSLA=o;function a(f){const g=f.toString(16);return g.length!==2?"0"+g:g}function l(f){return`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}`}t.formatHex=l;function c(f,g=!1){return g&&f.rgba.a===1?n.Format.CSS.formatHex(f):`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}${a(Math.round(f.rgba.a*255))}`}t.formatHexA=c;function d(f){return f.isOpaque()?n.Format.CSS.formatHex(f):n.Format.CSS.formatRGBA(f)}t.format=d;function u(f){const g=f.length;if(g===0||f.charCodeAt(0)!==35)return null;if(g===7){const m=16*h(f.charCodeAt(1))+h(f.charCodeAt(2)),p=16*h(f.charCodeAt(3))+h(f.charCodeAt(4)),b=16*h(f.charCodeAt(5))+h(f.charCodeAt(6));return new n(new li(m,p,b,1))}if(g===9){const m=16*h(f.charCodeAt(1))+h(f.charCodeAt(2)),p=16*h(f.charCodeAt(3))+h(f.charCodeAt(4)),b=16*h(f.charCodeAt(5))+h(f.charCodeAt(6)),w=16*h(f.charCodeAt(7))+h(f.charCodeAt(8));return new n(new li(m,p,b,w/255))}if(g===4){const m=h(f.charCodeAt(1)),p=h(f.charCodeAt(2)),b=h(f.charCodeAt(3));return new n(new li(16*m+m,16*p+p,16*b+b))}if(g===5){const m=h(f.charCodeAt(1)),p=h(f.charCodeAt(2)),b=h(f.charCodeAt(3)),w=h(f.charCodeAt(4));return new n(new li(16*m+m,16*p+p,16*b+b,(16*w+w)/255))}return null}t.parseHex=u;function h(f){switch(f){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(e.CSS||(e.CSS={}))})(n.Format||(n.Format={}))})(Ce||(Ce={}));function tP(n){return`--vscode-${n.replace(/\./g,"-")}`}function Ke(n){return`var(${tP(n)})`}function tWe(n,e){return`var(${tP(n)}, ${e})`}const bne={ColorContribution:"base.contributions.colors"};class iWe{constructor(){this._onDidChangeSchema=new ue,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,i,s=!1,r){const o={id:e,description:i,defaults:t,needsTransparency:s,deprecationMessage:r};this.colorsById[e]=o;const a={type:"string",description:i,format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return r&&(a.deprecationMessage=r),s&&(a.pattern="^#(?:(?<rgba>[0-9a-fA-f]{3}[0-9a-eA-E])|(?:[0-9a-fA-F]{6}(?:(?![fF]{2})(?:[0-9a-fA-F]{2}))))?$",a.patternErrorMessage="This color must be transparent or it will obscure content"),this.colorSchema.properties[e]=a,this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(i),this._onDidChangeSchema.fire(),e}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,t){const i=this.colorsById[e];if(i&&i.defaults){const s=i.defaults[t.type];return ll(s,t)}}getColorSchema(){return this.colorSchema}toString(){const e=(t,i)=>{const s=t.indexOf(".")===-1?0:1,r=i.indexOf(".")===-1?0:1;return s!==r?s-r:t.localeCompare(i)};return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}}const O2=new iWe;Ss.add(bne.ColorContribution,O2);function j(n,e,t,i,s){return O2.registerColor(n,e,t,i,s)}function nWe(n,e){var t,i,s,r;switch(n.op){case 0:return(t=ll(n.value,e))===null||t===void 0?void 0:t.darken(n.factor);case 1:return(i=ll(n.value,e))===null||i===void 0?void 0:i.lighten(n.factor);case 2:return(s=ll(n.value,e))===null||s===void 0?void 0:s.transparent(n.factor);case 3:{const o=ll(n.background,e);return o?(r=ll(n.value,e))===null||r===void 0?void 0:r.makeOpaque(o):ll(n.value,e)}case 4:for(const o of n.values){const a=ll(o,e);if(a)return a}return;case 6:return ll(e.defines(n.if)?n.then:n.else,e);case 5:{const o=ll(n.value,e);if(!o)return;const a=ll(n.background,e);return a?o.isDarkerThan(a)?Ce.getLighterColor(o,a,n.factor).transparent(n.transparency):Ce.getDarkerColor(o,a,n.factor).transparent(n.transparency):o.transparent(n.factor*n.transparency)}default:throw GV()}}function fm(n,e){return{op:0,value:n,factor:e}}function xl(n,e){return{op:1,value:n,factor:e}}function bt(n,e){return{op:2,value:n,factor:e}}function KH(...n){return{op:4,values:n}}function sWe(n,e,t){return{op:6,if:n,then:e,else:t}}function jH(n,e,t,i){return{op:5,value:n,background:e,factor:t,transparency:i}}function ll(n,e){if(n!==null){if(typeof n=="string")return n[0]==="#"?Ce.fromHex(n):e.getColor(n);if(n instanceof Ce)return n;if(typeof n=="object")return nWe(n,e)}}const vne="vscode://schemas/workbench-colors",_ne=Ss.as(F2.JSONContribution);_ne.registerSchema(vne,O2.getColorSchema());const JH=new as(()=>_ne.notifySchemaChanged(vne),200);O2.onDidChangeSchema(()=>{JH.isScheduled()||JH.schedule()});const Kt=j("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},L("foreground","Overall foreground color. This color is only used if not overridden by a component."));j("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},L("disabledForeground","Overall foreground for disabled elements. This color is only used if not overridden by a component."));j("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},L("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component."));j("descriptionForeground",{light:"#717171",dark:bt(Kt,.7),hcDark:bt(Kt,.7),hcLight:bt(Kt,.7)},L("descriptionForeground","Foreground color for description text providing additional information, for example for a label."));const wc=j("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},L("iconForeground","The default color for icons in the workbench.")),ta=j("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#006BBD"},L("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),si=j("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},L("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),cn=j("contrastActiveBorder",{light:null,dark:null,hcDark:ta,hcLight:ta},L("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast."));j("selection.background",{light:null,dark:null,hcDark:null,hcLight:null},L("selectionBackground","The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor."));const rWe=j("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},L("textLinkForeground","Foreground color for links in text."));j("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},L("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover."));j("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:Ce.black,hcLight:"#292929"},L("textSeparatorForeground","Color for text separators."));j("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#000000",hcLight:"#FFFFFF"},L("textPreformatForeground","Foreground color for preformatted text segments."));j("textPreformat.background",{light:"#0000001A",dark:"#FFFFFF1A",hcDark:"#FFFFFF",hcLight:"#09345f"},L("textPreformatBackground","Background color for preformatted text segments."));j("textBlockQuote.background",{light:"#f2f2f2",dark:"#222222",hcDark:null,hcLight:"#F2F2F2"},L("textBlockQuoteBackground","Background color for block quotes in text."));j("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:Ce.white,hcLight:"#292929"},L("textBlockQuoteBorder","Border color for block quotes in text."));j("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:Ce.black,hcLight:"#F2F2F2"},L("textCodeBlockBackground","Background color for code blocks in text."));j("sash.hoverBorder",{dark:ta,light:ta,hcDark:ta,hcLight:ta},L("sashActiveBorder","Border color of active sashes."));const HS=j("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:Ce.black,hcLight:"#0F4A85"},L("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),oWe=j("badge.foreground",{dark:Ce.white,light:"#333",hcDark:Ce.white,hcLight:Ce.white},L("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),Dv=j("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},L("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),Iv=j("scrollbarSlider.background",{dark:Ce.fromHex("#797979").transparent(.4),light:Ce.fromHex("#646464").transparent(.4),hcDark:bt(si,.6),hcLight:bt(si,.4)},L("scrollbarSliderBackground","Scrollbar slider background color.")),Mv=j("scrollbarSlider.hoverBackground",{dark:Ce.fromHex("#646464").transparent(.7),light:Ce.fromHex("#646464").transparent(.7),hcDark:bt(si,.8),hcLight:bt(si,.8)},L("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),Ev=j("scrollbarSlider.activeBackground",{dark:Ce.fromHex("#BFBFBF").transparent(.4),light:Ce.fromHex("#000000").transparent(.6),hcDark:si,hcLight:si},L("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),aWe=j("progressBar.background",{dark:Ce.fromHex("#0E70C0"),light:Ce.fromHex("#0E70C0"),hcDark:si,hcLight:si},L("progressBarBackground","Background color of the progress bar that can show for long running operations.")),js=j("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:Ce.black,hcLight:Ce.white},L("editorBackground","Editor background color.")),ww=j("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:Ce.white,hcLight:Kt},L("editorForeground","Editor default foreground color."));j("editorStickyScroll.background",{light:js,dark:js,hcDark:js,hcLight:js},L("editorStickyScrollBackground","Background color of sticky scroll in the editor"));j("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:Ce.fromHex("#0F4A85").transparent(.1)},L("editorStickyScrollHoverBackground","Background color of sticky scroll on hover in the editor"));j("editorStickyScroll.border",{dark:null,light:null,hcDark:si,hcLight:si},L("editorStickyScrollBorder","Border color of sticky scroll in the editor"));j("editorStickyScroll.shadow",{dark:Dv,light:Dv,hcDark:Dv,hcLight:Dv},L("editorStickyScrollShadow"," Shadow color of sticky scroll in the editor"));const rs=j("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:Ce.white},L("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),xd=j("editorWidget.foreground",{dark:Kt,light:Kt,hcDark:Kt,hcLight:Kt},L("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),Nv=j("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:si,hcLight:si},L("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget."));j("editorWidget.resizeBorder",{light:null,dark:null,hcDark:null,hcLight:null},L("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget."));j("editorError.background",{dark:null,light:null,hcDark:null,hcLight:null},L("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const Td=j("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},L("editorError.foreground","Foreground color of error squigglies in the editor."));j("editorError.border",{dark:null,light:null,hcDark:Ce.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},L("errorBorder","If set, color of double underlines for errors in the editor."));const ky=j("editorWarning.background",{dark:null,light:null,hcDark:null,hcLight:null},L("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),Lr=j("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD370",hcLight:"#895503"},L("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),mL=j("editorWarning.border",{dark:null,light:null,hcDark:Ce.fromHex("#FFCC00").transparent(.8),hcLight:Ce.fromHex("#FFCC00").transparent(.8)},L("warningBorder","If set, color of double underlines for warnings in the editor."));j("editorInfo.background",{dark:null,light:null,hcDark:null,hcLight:null},L("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const ia=j("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},L("editorInfo.foreground","Foreground color of info squigglies in the editor.")),pL=j("editorInfo.border",{dark:null,light:null,hcDark:Ce.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},L("infoBorder","If set, color of double underlines for infos in the editor.")),lWe=j("editorHint.foreground",{dark:Ce.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},L("editorHint.foreground","Foreground color of hint squigglies in the editor."));j("editorHint.border",{dark:null,light:null,hcDark:Ce.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},L("hintBorder","If set, color of double underlines for hints in the editor."));j("editorLink.activeForeground",{dark:"#4E94CE",light:Ce.blue,hcDark:Ce.cyan,hcLight:"#292929"},L("activeLinkForeground","Color of active links."));const Ju=j("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},L("editorSelectionBackground","Color of the editor selection.")),cWe=j("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:Ce.white},L("editorSelectionForeground","Color of the selected text for high contrast.")),wne=j("editor.inactiveSelectionBackground",{light:bt(Ju,.5),dark:bt(Ju,.5),hcDark:bt(Ju,.7),hcLight:bt(Ju,.5)},L("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),iP=j("editor.selectionHighlightBackground",{light:jH(Ju,js,.3,.6),dark:jH(Ju,js,.3,.6),hcDark:null,hcLight:null},L("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0);j("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:cn,hcLight:cn},L("editorSelectionHighlightBorder","Border color for regions with the same content as the selection."));j("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},L("editorFindMatch","Color of the current search match."));const dWe=j("editor.findMatchForeground",{light:null,dark:null,hcDark:null,hcLight:null},L("editorFindMatchForeground","Text color of the current search match.")),$u=j("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},L("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0),uWe=j("editor.findMatchHighlightForeground",{light:null,dark:null,hcDark:null,hcLight:null},L("findMatchHighlightForeground","Foreground color of the other search matches."),!0);j("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},L("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);j("editor.findMatchBorder",{light:null,dark:null,hcDark:cn,hcLight:cn},L("editorFindMatchBorder","Border color of the current search match."));const Kf=j("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:cn,hcLight:cn},L("findMatchHighlightBorder","Border color of the other search matches.")),hWe=j("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:bt(cn,.4),hcLight:bt(cn,.4)},L("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);j("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},L("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0);const $H=j("editorHoverWidget.background",{light:rs,dark:rs,hcDark:rs,hcLight:rs},L("hoverBackground","Background color of the editor hover."));j("editorHoverWidget.foreground",{light:xd,dark:xd,hcDark:xd,hcLight:xd},L("hoverForeground","Foreground color of the editor hover."));const fWe=j("editorHoverWidget.border",{light:Nv,dark:Nv,hcDark:Nv,hcLight:Nv},L("hoverBorder","Border color of the editor hover."));j("editorHoverWidget.statusBarBackground",{dark:xl($H,.2),light:fm($H,.05),hcDark:rs,hcLight:rs},L("statusBarBackground","Background color of the editor hover status bar."));const Qu=j("editorInlayHint.foreground",{dark:"#969696",light:"#969696",hcDark:Ce.white,hcLight:Ce.black},L("editorInlayHintForeground","Foreground color of inline hints")),qu=j("editorInlayHint.background",{dark:bt(HS,.1),light:bt(HS,.1),hcDark:bt(Ce.white,.1),hcLight:bt(HS,.1)},L("editorInlayHintBackground","Background color of inline hints"));j("editorInlayHint.typeForeground",{dark:Qu,light:Qu,hcDark:Qu,hcLight:Qu},L("editorInlayHintForegroundTypes","Foreground color of inline hints for types"));j("editorInlayHint.typeBackground",{dark:qu,light:qu,hcDark:qu,hcLight:qu},L("editorInlayHintBackgroundTypes","Background color of inline hints for types"));j("editorInlayHint.parameterForeground",{dark:Qu,light:Qu,hcDark:Qu,hcLight:Qu},L("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters"));j("editorInlayHint.parameterBackground",{dark:qu,light:qu,hcDark:qu,hcLight:qu},L("editorInlayHintBackgroundParameter","Background color of inline hints for parameters"));const xy=j("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},L("editorLightBulbForeground","The color used for the lightbulb actions icon."));j("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},L("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon."));j("editorLightBulbAi.foreground",{dark:xy,light:xy,hcDark:xy,hcLight:xy},L("editorLightBulbAiForeground","The color used for the lightbulb AI icon."));j("editor.snippetTabstopHighlightBackground",{dark:new Ce(new li(124,124,124,.3)),light:new Ce(new li(10,50,100,.2)),hcDark:new Ce(new li(124,124,124,.3)),hcLight:new Ce(new li(10,50,100,.2))},L("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop."));j("editor.snippetTabstopHighlightBorder",{dark:null,light:null,hcDark:null,hcLight:null},L("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop."));j("editor.snippetFinalTabstopHighlightBackground",{dark:null,light:null,hcDark:null,hcLight:null},L("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet."));j("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new Ce(new li(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},L("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet."));const D3=new Ce(new li(155,185,85,.2)),I3=new Ce(new li(255,0,0,.2)),gWe=j("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c40",hcDark:null,hcLight:null},L("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),mWe=j("diffEditor.removedTextBackground",{dark:"#ff000033",light:"#ff000033",hcDark:null,hcLight:null},L("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);j("diffEditor.insertedLineBackground",{dark:D3,light:D3,hcDark:null,hcLight:null},L("diffEditorInsertedLines","Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0);j("diffEditor.removedLineBackground",{dark:I3,light:I3,hcDark:null,hcLight:null},L("diffEditorRemovedLines","Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);j("diffEditorGutter.insertedLineBackground",{dark:null,light:null,hcDark:null,hcLight:null},L("diffEditorInsertedLineGutter","Background color for the margin where lines got inserted."));j("diffEditorGutter.removedLineBackground",{dark:null,light:null,hcDark:null,hcLight:null},L("diffEditorRemovedLineGutter","Background color for the margin where lines got removed."));const pWe=j("diffEditorOverview.insertedForeground",{dark:null,light:null,hcDark:null,hcLight:null},L("diffEditorOverviewInserted","Diff overview ruler foreground for inserted content.")),bWe=j("diffEditorOverview.removedForeground",{dark:null,light:null,hcDark:null,hcLight:null},L("diffEditorOverviewRemoved","Diff overview ruler foreground for removed content."));j("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},L("diffEditorInsertedOutline","Outline color for the text that got inserted."));j("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},L("diffEditorRemovedOutline","Outline color for text that got removed."));j("diffEditor.border",{dark:null,light:null,hcDark:si,hcLight:si},L("diffEditorBorder","Border color between the two text editors."));j("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},L("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views."));j("diffEditor.unchangedRegionBackground",{dark:"sideBar.background",light:"sideBar.background",hcDark:"sideBar.background",hcLight:"sideBar.background"},L("diffEditor.unchangedRegionBackground","The background color of unchanged blocks in the diff editor."));j("diffEditor.unchangedRegionForeground",{dark:"foreground",light:"foreground",hcDark:"foreground",hcLight:"foreground"},L("diffEditor.unchangedRegionForeground","The foreground color of unchanged blocks in the diff editor."));j("diffEditor.unchangedCodeBackground",{dark:"#74747429",light:"#b8b8b829",hcDark:null,hcLight:null},L("diffEditor.unchangedCodeBackground","The background color of unchanged code in the diff editor."));const eh=j("widget.shadow",{dark:bt(Ce.black,.36),light:bt(Ce.black,.16),hcDark:null,hcLight:null},L("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),vWe=j("widget.border",{dark:null,light:null,hcDark:si,hcLight:si},L("widgetBorder","Border color of widgets such as find/replace inside the editor.")),QH=j("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},L("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse"));j("toolbar.hoverOutline",{dark:null,light:null,hcDark:cn,hcLight:cn},L("toolbarHoverOutline","Toolbar outline when hovering over actions using the mouse"));j("toolbar.activeBackground",{dark:xl(QH,.1),light:fm(QH,.1),hcDark:null,hcLight:null},L("toolbarActiveBackground","Toolbar background when holding the mouse over actions"));const _We=j("breadcrumb.foreground",{light:bt(Kt,.8),dark:bt(Kt,.8),hcDark:bt(Kt,.8),hcLight:bt(Kt,.8)},L("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),wWe=j("breadcrumb.background",{light:js,dark:js,hcDark:js,hcLight:js},L("breadcrumbsBackground","Background color of breadcrumb items.")),qH=j("breadcrumb.focusForeground",{light:fm(Kt,.2),dark:xl(Kt,.1),hcDark:xl(Kt,.1),hcLight:xl(Kt,.1)},L("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),yWe=j("breadcrumb.activeSelectionForeground",{light:fm(Kt,.2),dark:xl(Kt,.1),hcDark:xl(Kt,.1),hcLight:xl(Kt,.1)},L("breadcrumbsSelectedForeground","Color of selected breadcrumb items."));j("breadcrumbPicker.background",{light:rs,dark:rs,hcDark:rs,hcLight:rs},L("breadcrumbsSelectedBackground","Background color of breadcrumb item picker."));const yne=.5,eU=Ce.fromHex("#40C8AE").transparent(yne),tU=Ce.fromHex("#40A6FF").transparent(yne),iU=Ce.fromHex("#606060").transparent(.4),Ea=.4,Eb=1,cp=j("merge.currentHeaderBackground",{dark:eU,light:eU,hcDark:null,hcLight:null},L("mergeCurrentHeaderBackground","Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);j("merge.currentContentBackground",{dark:bt(cp,Ea),light:bt(cp,Ea),hcDark:bt(cp,Ea),hcLight:bt(cp,Ea)},L("mergeCurrentContentBackground","Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const dp=j("merge.incomingHeaderBackground",{dark:tU,light:tU,hcDark:null,hcLight:null},L("mergeIncomingHeaderBackground","Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);j("merge.incomingContentBackground",{dark:bt(dp,Ea),light:bt(dp,Ea),hcDark:bt(dp,Ea),hcLight:bt(dp,Ea)},L("mergeIncomingContentBackground","Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const up=j("merge.commonHeaderBackground",{dark:iU,light:iU,hcDark:null,hcLight:null},L("mergeCommonHeaderBackground","Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);j("merge.commonContentBackground",{dark:bt(up,Ea),light:bt(up,Ea),hcDark:bt(up,Ea),hcLight:bt(up,Ea)},L("mergeCommonContentBackground","Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const Nb=j("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},L("mergeBorder","Border color on headers and the splitter in inline merge-conflicts."));j("editorOverviewRuler.currentContentForeground",{dark:bt(cp,Eb),light:bt(cp,Eb),hcDark:Nb,hcLight:Nb},L("overviewRulerCurrentContentForeground","Current overview ruler foreground for inline merge-conflicts."));j("editorOverviewRuler.incomingContentForeground",{dark:bt(dp,Eb),light:bt(dp,Eb),hcDark:Nb,hcLight:Nb},L("overviewRulerIncomingContentForeground","Incoming overview ruler foreground for inline merge-conflicts."));j("editorOverviewRuler.commonContentForeground",{dark:bt(up,Eb),light:bt(up,Eb),hcDark:Nb,hcLight:Nb},L("overviewRulerCommonContentForeground","Common ancestor overview ruler foreground for inline merge-conflicts."));const nP=j("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:""},L("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),Rv=j("editorOverviewRuler.selectionHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hcDark:"#A0A0A0CC",hcLight:"#A0A0A0CC"},L("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),SWe=j("problemsErrorIcon.foreground",{dark:Td,light:Td,hcDark:Td,hcLight:Td},L("problemsErrorIconForeground","The color used for the problems error icon.")),CWe=j("problemsWarningIcon.foreground",{dark:Lr,light:Lr,hcDark:Lr,hcLight:Lr},L("problemsWarningIconForeground","The color used for the problems warning icon.")),LWe=j("problemsInfoIcon.foreground",{dark:ia,light:ia,hcDark:ia,hcLight:ia},L("problemsInfoIconForeground","The color used for the problems info icon.")),hp=j("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},L("minimapFindMatchHighlight","Minimap marker color for find matches."),!0),Z2=j("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},L("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0),nU=j("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},L("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),kWe=j("minimap.infoHighlight",{dark:ia,light:ia,hcDark:pL,hcLight:pL},L("minimapInfo","Minimap marker color for infos.")),xWe=j("minimap.warningHighlight",{dark:Lr,light:Lr,hcDark:mL,hcLight:mL},L("overviewRuleWarning","Minimap marker color for warnings.")),TWe=j("minimap.errorHighlight",{dark:new Ce(new li(255,18,18,.7)),light:new Ce(new li(255,18,18,.7)),hcDark:new Ce(new li(255,50,50,1)),hcLight:"#B5200D"},L("minimapError","Minimap marker color for errors.")),DWe=j("minimap.background",{dark:null,light:null,hcDark:null,hcLight:null},L("minimapBackground","Minimap background color.")),IWe=j("minimap.foregroundOpacity",{dark:Ce.fromHex("#000f"),light:Ce.fromHex("#000f"),hcDark:Ce.fromHex("#000f"),hcLight:Ce.fromHex("#000f")},L("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.'));j("minimapSlider.background",{light:bt(Iv,.5),dark:bt(Iv,.5),hcDark:bt(Iv,.5),hcLight:bt(Iv,.5)},L("minimapSliderBackground","Minimap slider background color."));j("minimapSlider.hoverBackground",{light:bt(Mv,.5),dark:bt(Mv,.5),hcDark:bt(Mv,.5),hcLight:bt(Mv,.5)},L("minimapSliderHoverBackground","Minimap slider background color when hovering."));j("minimapSlider.activeBackground",{light:bt(Ev,.5),dark:bt(Ev,.5),hcDark:bt(Ev,.5),hcLight:bt(Ev,.5)},L("minimapSliderActiveBackground","Minimap slider background color when clicked on."));j("charts.foreground",{dark:Kt,light:Kt,hcDark:Kt,hcLight:Kt},L("chartsForeground","The foreground color used in charts."));j("charts.lines",{dark:bt(Kt,.5),light:bt(Kt,.5),hcDark:bt(Kt,.5),hcLight:bt(Kt,.5)},L("chartsLines","The color used for horizontal lines in charts."));j("charts.red",{dark:Td,light:Td,hcDark:Td,hcLight:Td},L("chartsRed","The red color used in chart visualizations."));j("charts.blue",{dark:ia,light:ia,hcDark:ia,hcLight:ia},L("chartsBlue","The blue color used in chart visualizations."));j("charts.yellow",{dark:Lr,light:Lr,hcDark:Lr,hcLight:Lr},L("chartsYellow","The yellow color used in chart visualizations."));j("charts.orange",{dark:hp,light:hp,hcDark:hp,hcLight:hp},L("chartsOrange","The orange color used in chart visualizations."));j("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},L("chartsGreen","The green color used in chart visualizations."));j("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},L("chartsPurple","The purple color used in chart visualizations."));const MWe=j("input.background",{dark:"#3C3C3C",light:Ce.white,hcDark:Ce.black,hcLight:Ce.white},L("inputBoxBackground","Input box background.")),EWe=j("input.foreground",{dark:Kt,light:Kt,hcDark:Kt,hcLight:Kt},L("inputBoxForeground","Input box foreground.")),NWe=j("input.border",{dark:null,light:null,hcDark:si,hcLight:si},L("inputBoxBorder","Input box border.")),sP=j("inputOption.activeBorder",{dark:"#007ACC",light:"#007ACC",hcDark:si,hcLight:si},L("inputBoxActiveOptionBorder","Border color of activated options in input fields."));j("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},L("inputOption.hoverBackground","Background color of activated options in input fields."));const rP=j("inputOption.activeBackground",{dark:bt(ta,.4),light:bt(ta,.2),hcDark:Ce.transparent,hcLight:Ce.transparent},L("inputOption.activeBackground","Background hover color of options in input fields.")),oP=j("inputOption.activeForeground",{dark:Ce.white,light:Ce.black,hcDark:Kt,hcLight:Kt},L("inputOption.activeForeground","Foreground color of activated options in input fields."));j("input.placeholderForeground",{light:bt(Kt,.5),dark:bt(Kt,.5),hcDark:bt(Kt,.7),hcLight:bt(Kt,.7)},L("inputPlaceholderForeground","Input box foreground color for placeholder text."));const RWe=j("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:Ce.black,hcLight:Ce.white},L("inputValidationInfoBackground","Input validation background color for information severity.")),WWe=j("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:Kt},L("inputValidationInfoForeground","Input validation foreground color for information severity.")),AWe=j("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:si,hcLight:si},L("inputValidationInfoBorder","Input validation border color for information severity.")),FWe=j("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:Ce.black,hcLight:Ce.white},L("inputValidationWarningBackground","Input validation background color for warning severity.")),VWe=j("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:Kt},L("inputValidationWarningForeground","Input validation foreground color for warning severity.")),PWe=j("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:si,hcLight:si},L("inputValidationWarningBorder","Input validation border color for warning severity.")),OWe=j("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:Ce.black,hcLight:Ce.white},L("inputValidationErrorBackground","Input validation background color for error severity.")),ZWe=j("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:Kt},L("inputValidationErrorForeground","Input validation foreground color for error severity.")),GWe=j("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:si,hcLight:si},L("inputValidationErrorBorder","Input validation border color for error severity.")),yc=j("dropdown.background",{dark:"#3C3C3C",light:Ce.white,hcDark:Ce.black,hcLight:Ce.white},L("dropdownBackground","Dropdown background.")),BWe=j("dropdown.listBackground",{dark:null,light:null,hcDark:Ce.black,hcLight:Ce.white},L("dropdownListBackground","Dropdown list background.")),Dd=j("dropdown.foreground",{dark:"#F0F0F0",light:Kt,hcDark:Ce.white,hcLight:Kt},L("dropdownForeground","Dropdown foreground.")),fp=j("dropdown.border",{dark:yc,light:"#CECECE",hcDark:si,hcLight:si},L("dropdownBorder","Dropdown border.")),Wv=j("button.foreground",{dark:Ce.white,light:Ce.white,hcDark:Ce.white,hcLight:Ce.white},L("buttonForeground","Button foreground color.")),XWe=j("button.separator",{dark:bt(Wv,.4),light:bt(Wv,.4),hcDark:bt(Wv,.4),hcLight:bt(Wv,.4)},L("buttonSeparator","Button separator color.")),Av=j("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},L("buttonBackground","Button background color.")),zWe=j("button.hoverBackground",{dark:xl(Av,.2),light:fm(Av,.2),hcDark:Av,hcLight:Av},L("buttonHoverBackground","Button background color when hovering.")),HWe=j("button.border",{dark:si,light:si,hcDark:si,hcLight:si},L("buttonBorder","Button border color.")),UWe=j("button.secondaryForeground",{dark:Ce.white,light:Ce.white,hcDark:Ce.white,hcLight:Kt},L("buttonSecondaryForeground","Secondary button foreground color.")),M3=j("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:Ce.white},L("buttonSecondaryBackground","Secondary button background color.")),YWe=j("button.secondaryHoverBackground",{dark:xl(M3,.2),light:fm(M3,.2),hcDark:null,hcLight:null},L("buttonSecondaryHoverBackground","Secondary button background color when hovering.")),KWe=j("checkbox.background",{dark:yc,light:yc,hcDark:yc,hcLight:yc},L("checkbox.background","Background color of checkbox widget."));j("checkbox.selectBackground",{dark:rs,light:rs,hcDark:rs,hcLight:rs},L("checkbox.select.background","Background color of checkbox widget when the element it's in is selected."));const jWe=j("checkbox.foreground",{dark:Dd,light:Dd,hcDark:Dd,hcLight:Dd},L("checkbox.foreground","Foreground color of checkbox widget.")),JWe=j("checkbox.border",{dark:fp,light:fp,hcDark:fp,hcLight:fp},L("checkbox.border","Border color of checkbox widget."));j("checkbox.selectBorder",{dark:wc,light:wc,hcDark:wc,hcLight:wc},L("checkbox.select.border","Border color of checkbox widget when the element it's in is selected."));const $We=j("keybindingLabel.background",{dark:new Ce(new li(128,128,128,.17)),light:new Ce(new li(221,221,221,.4)),hcDark:Ce.transparent,hcLight:Ce.transparent},L("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),QWe=j("keybindingLabel.foreground",{dark:Ce.fromHex("#CCCCCC"),light:Ce.fromHex("#555555"),hcDark:Ce.white,hcLight:Kt},L("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),qWe=j("keybindingLabel.border",{dark:new Ce(new li(51,51,51,.6)),light:new Ce(new li(204,204,204,.4)),hcDark:new Ce(new li(111,195,223)),hcLight:si},L("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),eAe=j("keybindingLabel.bottomBorder",{dark:new Ce(new li(68,68,68,.6)),light:new Ce(new li(187,187,187,.4)),hcDark:new Ce(new li(111,195,223)),hcLight:Kt},L("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),tAe=j("list.focusBackground",{dark:null,light:null,hcDark:null,hcLight:null},L("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),iAe=j("list.focusForeground",{dark:null,light:null,hcDark:null,hcLight:null},L("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),nAe=j("list.focusOutline",{dark:ta,light:ta,hcDark:cn,hcLight:cn},L("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),sAe=j("list.focusAndSelectionOutline",{dark:null,light:null,hcDark:null,hcLight:null},L("listFocusAndSelectionOutline","List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),Id=j("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:Ce.fromHex("#0F4A85").transparent(.1)},L("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Sc=j("list.activeSelectionForeground",{dark:Ce.white,light:Ce.white,hcDark:null,hcLight:null},L("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Fv=j("list.activeSelectionIconForeground",{dark:null,light:null,hcDark:null,hcLight:null},L("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),rAe=j("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:Ce.fromHex("#0F4A85").transparent(.1)},L("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),oAe=j("list.inactiveSelectionForeground",{dark:null,light:null,hcDark:null,hcLight:null},L("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),aAe=j("list.inactiveSelectionIconForeground",{dark:null,light:null,hcDark:null,hcLight:null},L("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),lAe=j("list.inactiveFocusBackground",{dark:null,light:null,hcDark:null,hcLight:null},L("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),cAe=j("list.inactiveFocusOutline",{dark:null,light:null,hcDark:null,hcLight:null},L("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Sne=j("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:Ce.white.transparent(.1),hcLight:Ce.fromHex("#0F4A85").transparent(.1)},L("listHoverBackground","List/Tree background when hovering over items using the mouse.")),Cne=j("list.hoverForeground",{dark:null,light:null,hcDark:null,hcLight:null},L("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),dAe=j("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},L("listDropBackground","List/Tree drag and drop background when moving items over other items when using the mouse.")),uAe=j("list.dropBetweenBackground",{dark:wc,light:wc,hcDark:null,hcLight:null},L("listDropBetweenBackground","List/Tree drag and drop border color when moving items between items when using the mouse.")),Ty=j("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:ta,hcLight:ta},L("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree."));j("list.focusHighlightForeground",{dark:Ty,light:sWe(Id,Ty,"#BBE7FF"),hcDark:Ty,hcLight:Ty},L("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree."));j("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},L("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer."));j("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},L("listErrorForeground","Foreground color of list items containing errors."));j("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},L("listWarningForeground","Foreground color of list items containing warnings."));const hAe=j("listFilterWidget.background",{light:fm(rs,0),dark:xl(rs,0),hcDark:rs,hcLight:rs},L("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),fAe=j("listFilterWidget.outline",{dark:Ce.transparent,light:Ce.transparent,hcDark:"#f38518",hcLight:"#007ACC"},L("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),gAe=j("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:si,hcLight:si},L("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),mAe=j("listFilterWidget.shadow",{dark:eh,light:eh,hcDark:eh,hcLight:eh},L("listFilterWidgetShadow","Shadow color of the type filter widget in lists and trees."));j("list.filterMatchBackground",{dark:$u,light:$u,hcDark:null,hcLight:null},L("listFilterMatchHighlight","Background color of the filtered match."));j("list.filterMatchBorder",{dark:Kf,light:Kf,hcDark:si,hcLight:cn},L("listFilterMatchHighlightBorder","Border color of the filtered match."));j("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},L("listDeemphasizedForeground","List/Tree foreground color for items that are deemphasized."));const Vv=j("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},L("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),pAe=j("tree.inactiveIndentGuidesStroke",{dark:bt(Vv,.4),light:bt(Vv,.4),hcDark:bt(Vv,.4),hcLight:bt(Vv,.4)},L("treeInactiveIndentGuidesStroke","Tree stroke color for the indentation guides that are not active.")),bAe=j("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},L("tableColumnsBorder","Table border color between columns.")),vAe=j("tree.tableOddRowsBackground",{dark:bt(Kt,.04),light:bt(Kt,.04),hcDark:null,hcLight:null},L("tableOddRowsBackgroundColor","Background color for odd table rows.")),_Ae=j("menu.border",{dark:null,light:null,hcDark:si,hcLight:si},L("menuBorder","Border color of menus.")),wAe=j("menu.foreground",{dark:Dd,light:Dd,hcDark:Dd,hcLight:Dd},L("menuForeground","Foreground color of menu items.")),yAe=j("menu.background",{dark:yc,light:yc,hcDark:yc,hcLight:yc},L("menuBackground","Background color of menu items.")),SAe=j("menu.selectionForeground",{dark:Sc,light:Sc,hcDark:Sc,hcLight:Sc},L("menuSelectionForeground","Foreground color of the selected menu item in menus.")),CAe=j("menu.selectionBackground",{dark:Id,light:Id,hcDark:Id,hcLight:Id},L("menuSelectionBackground","Background color of the selected menu item in menus.")),LAe=j("menu.selectionBorder",{dark:null,light:null,hcDark:cn,hcLight:cn},L("menuSelectionBorder","Border color of the selected menu item in menus.")),kAe=j("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:si,hcLight:si},L("menuSeparatorBackground","Color of a separator menu item in menus.")),sU=j("quickInput.background",{dark:rs,light:rs,hcDark:rs,hcLight:rs},L("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),xAe=j("quickInput.foreground",{dark:xd,light:xd,hcDark:xd,hcLight:xd},L("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),TAe=j("quickInputTitle.background",{dark:new Ce(new li(255,255,255,.105)),light:new Ce(new li(0,0,0,.06)),hcDark:"#000000",hcLight:Ce.white},L("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),Lne=j("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:Ce.white,hcLight:"#0F4A85"},L("pickerGroupForeground","Quick picker color for grouping labels.")),DAe=j("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:Ce.white,hcLight:"#0F4A85"},L("pickerGroupBorder","Quick picker color for grouping borders.")),rU=j("quickInput.list.focusBackground",{dark:null,light:null,hcDark:null,hcLight:null},"",void 0,L("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),E3=j("quickInputList.focusForeground",{dark:Sc,light:Sc,hcDark:Sc,hcLight:Sc},L("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),kne=j("quickInputList.focusIconForeground",{dark:Fv,light:Fv,hcDark:Fv,hcLight:Fv},L("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),N3=j("quickInputList.focusBackground",{dark:KH(rU,Id),light:KH(rU,Id),hcDark:null,hcLight:null},L("quickInput.listFocusBackground","Quick picker background color for the focused item."));j("search.resultsInfoForeground",{light:Kt,dark:bt(Kt,.65),hcDark:Kt,hcLight:Kt},L("search.resultsInfoForeground","Color of the text in the search viewlet's completion message."));j("searchEditor.findMatchBackground",{light:bt($u,.66),dark:bt($u,.66),hcDark:$u,hcLight:$u},L("searchEditor.queryMatch","Color of the Search Editor query matches."));j("searchEditor.findMatchBorder",{light:bt(Kf,.66),dark:bt(Kf,.66),hcDark:Kf,hcLight:Kf},L("searchEditor.editorFindMatchBorder","Border color of the Search Editor query matches."));class G2{constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}toClientCoordinates(e){return new xne(this.x-e.scrollX,this.y-e.scrollY)}}class xne{constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}toPageCoordinates(e){return new G2(this.clientX+e.scrollX,this.clientY+e.scrollY)}}class IAe{constructor(e,t,i,s){this.x=e,this.y=t,this.width=i,this.height=s,this._editorPagePositionBrand=void 0}}class MAe{constructor(e,t){this.x=e,this.y=t,this._positionRelativeToEditorBrand=void 0}}function aP(n){const e=ho(n);return new IAe(e.left,e.top,e.width,e.height)}function lP(n,e,t){const i=e.width/n.offsetWidth,s=e.height/n.offsetHeight,r=(t.x-e.x)/i,o=(t.y-e.y)/s;return new MAe(r,o)}class Vh extends Sl{constructor(e,t,i){super(pt(i),e),this._editorMouseEventBrand=void 0,this.isFromPointerCapture=t,this.pos=new G2(this.posx,this.posy),this.editorPos=aP(i),this.relativePos=lP(i,this.editorPos,this.pos)}}class EAe{constructor(e){this._editorViewDomNode=e}_create(e){return new Vh(e,!1,this._editorViewDomNode)}onContextMenu(e,t){return we(e,"contextmenu",i=>{t(this._create(i))})}onMouseUp(e,t){return we(e,"mouseup",i=>{t(this._create(i))})}onMouseDown(e,t){return we(e,Ge.MOUSE_DOWN,i=>{t(this._create(i))})}onPointerDown(e,t){return we(e,Ge.POINTER_DOWN,i=>{t(this._create(i),i.pointerId)})}onMouseLeave(e,t){return we(e,Ge.MOUSE_LEAVE,i=>{t(this._create(i))})}onMouseMove(e,t){return we(e,"mousemove",i=>t(this._create(i)))}}class NAe{constructor(e){this._editorViewDomNode=e}_create(e){return new Vh(e,!1,this._editorViewDomNode)}onPointerUp(e,t){return we(e,"pointerup",i=>{t(this._create(i))})}onPointerDown(e,t){return we(e,Ge.POINTER_DOWN,i=>{t(this._create(i),i.pointerId)})}onPointerLeave(e,t){return we(e,Ge.POINTER_LEAVE,i=>{t(this._create(i))})}onPointerMove(e,t){return we(e,"pointermove",i=>t(this._create(i)))}}class RAe extends Le{constructor(e){super(),this._editorViewDomNode=e,this._globalPointerMoveMonitor=this._register(new P2),this._keydownListener=null}startMonitoring(e,t,i,s,r){this._keydownListener=ws(e.ownerDocument,"keydown",o=>{o.toKeyCodeChord().isModifierKey()||this._globalPointerMoveMonitor.stopMonitoring(!0,o.browserEvent)},!0),this._globalPointerMoveMonitor.startMonitoring(e,t,i,o=>{s(new Vh(o,!0,this._editorViewDomNode))},o=>{this._keydownListener.dispose(),r(o)})}stopMonitoring(){this._globalPointerMoveMonitor.stopMonitoring(!0)}}class yw extends Le{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let i=0,s=e.length;i<s;i++){const r=e[i];switch(r.type){case 0:this.onCompositionStart(r)&&(t=!0);break;case 1:this.onCompositionEnd(r)&&(t=!0);break;case 2:this.onConfigurationChanged(r)&&(t=!0);break;case 3:this.onCursorStateChanged(r)&&(t=!0);break;case 4:this.onDecorationsChanged(r)&&(t=!0);break;case 5:this.onFlushed(r)&&(t=!0);break;case 6:this.onFocusChanged(r)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(r)&&(t=!0);break;case 8:this.onLineMappingChanged(r)&&(t=!0);break;case 9:this.onLinesChanged(r)&&(t=!0);break;case 10:this.onLinesDeleted(r)&&(t=!0);break;case 11:this.onLinesInserted(r)&&(t=!0);break;case 12:this.onRevealRangeRequest(r)&&(t=!0);break;case 13:this.onScrollChanged(r)&&(t=!0);break;case 15:this.onTokensChanged(r)&&(t=!0);break;case 14:this.onThemeChanged(r)&&(t=!0);break;case 16:this.onTokensColorsChanged(r)&&(t=!0);break;case 17:this.onZonesChanged(r)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(r)}}t&&(this._shouldRender=!0)}}class vo extends yw{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class Al{static write(e,t){e.setAttribute("data-mprt",String(t))}static read(e){const t=e.getAttribute("data-mprt");return t===null?0:parseInt(t,10)}static collect(e,t){const i=[];let s=0;for(;e&&e!==e.ownerDocument.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(i[s++]=this.read(e)),e=e.parentElement;const r=new Uint8Array(s);for(let o=0;o<s;o++)r[o]=i[s-o-1];return r}}class WAe{constructor(e,t){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const i=this._viewLayout.getCurrentViewport();this.scrollTop=i.top,this.scrollLeft=i.left,this.viewportWidth=i.width,this.viewportHeight=i.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e,t){return this._viewLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t){return this._viewLayout.getVerticalOffsetAfterLineNumber(e,t)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}class AAe extends WAe{constructor(e,t,i){super(e,t),this._renderingContextBrand=void 0,this._viewLines=i}linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}}class FAe{constructor(e,t,i,s){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=i,this.continuesOnNextLine=s}}class B2{static from(e){const t=new Array(e.length);for(let i=0,s=e.length;i<s;i++){const r=e[i];t[i]=new B2(r.left,r.width)}return t}constructor(e,t){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(t)}toString(){return`[${this.left},${this.width}]`}}class lg{constructor(e,t){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=t}toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}}class VAe{constructor(e,t){this.outsideRenderedLine=e,this.originalLeft=t,this.left=Math.round(this.originalLeft)}}class oU{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}}class US{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,i,s,r){const o=this._createRange();try{return o.setStart(e,t),o.setEnd(i,s),o.getClientRects()}catch{return null}finally{this._detachRange(o,r)}}static _mergeAdjacentRanges(e){if(e.length===1)return e;e.sort(lg.compare);const t=[];let i=0,s=e[0];for(let r=1,o=e.length;r<o;r++){const a=e[r];s.left+s.width+.9>=a.left?s.width=Math.max(s.width,a.left+a.width-s.left):(t[i++]=s,s=a)}return t[i++]=s,t}static _createHorizontalRangesFromClientRects(e,t,i){if(!e||e.length===0)return null;const s=[];for(let r=0,o=e.length;r<o;r++){const a=e[r];s[r]=new lg(Math.max(0,(a.left-t)/i),a.width/i)}return this._mergeAdjacentRanges(s)}static readHorizontalRanges(e,t,i,s,r,o){const l=e.children.length-1;if(0>l)return null;if(t=Math.min(l,Math.max(0,t)),s=Math.min(l,Math.max(0,s)),t===s&&i===r&&i===0&&!e.children[t].firstChild){const h=e.children[t].getClientRects();return o.markDidDomLayout(),this._createHorizontalRangesFromClientRects(h,o.clientRectDeltaLeft,o.clientRectScale)}t!==s&&s>0&&r===0&&(s--,r=1073741824);let c=e.children[t].firstChild,d=e.children[s].firstChild;if((!c||!d)&&(!c&&i===0&&t>0&&(c=e.children[t-1].firstChild,i=1073741824),!d&&r===0&&s>0&&(d=e.children[s-1].firstChild,r=1073741824)),!c||!d)return null;i=Math.min(c.textContent.length,Math.max(0,i)),r=Math.min(d.textContent.length,Math.max(0,r));const u=this._readClientRects(c,i,d,r,o.endNode);return o.markDidDomLayout(),this._createHorizontalRangesFromClientRects(u,o.clientRectDeltaLeft,o.clientRectScale)}}class Na{constructor(e,t,i,s){this.startColumn=e,this.endColumn=t,this.className=i,this.type=s,this._lineDecorationBrand=void 0}static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){const i=e.length,s=t.length;if(i!==s)return!1;for(let r=0;r<i;r++)if(!Na._equals(e[r],t[r]))return!1;return!0}static extractWrapped(e,t,i){if(e.length===0)return e;const s=t+1,r=i+1,o=i-t,a=[];let l=0;for(const c of e)c.endColumn<=s||c.startColumn>=r||(a[l++]=new Na(Math.max(1,c.startColumn-s+1),Math.min(o+1,c.endColumn-s+1),c.className,c.type));return a}static filter(e,t,i,s){if(e.length===0)return[];const r=[];let o=0;for(let a=0,l=e.length;a<l;a++){const c=e[a],d=c.range;if(d.endLineNumber<t||d.startLineNumber>t||d.isEmpty()&&(c.type===0||c.type===3))continue;const u=d.startLineNumber===t?d.startColumn:i,h=d.endLineNumber===t?d.endColumn:s;r[o++]=new Na(u,h,c.inlineClassName,c.type)}return r}static _typeCompare(e,t){const i=[2,0,1,3];return i[e]-i[t]}static compare(e,t){if(e.startColumn!==t.startColumn)return e.startColumn-t.startColumn;if(e.endColumn!==t.endColumn)return e.endColumn-t.endColumn;const i=Na._typeCompare(e.type,t.type);return i!==0?i:e.className!==t.className?e.className<t.className?-1:1:0}}class aU{constructor(e,t,i,s){this.startOffset=e,this.endOffset=t,this.className=i,this.metadata=s}}class bL{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let i=0,s=e.length;i<s;i++)t|=e[i];return t}consumeLowerThan(e,t,i){for(;this.count>0&&this.stopOffsets[0]<e;){let s=0;for(;s+1<this.count&&this.stopOffsets[s]===this.stopOffsets[s+1];)s++;i.push(new aU(t,this.stopOffsets[s],this.classNames.join(" "),bL._metadata(this.metadata))),t=this.stopOffsets[s]+1,this.stopOffsets.splice(0,s+1),this.classNames.splice(0,s+1),this.metadata.splice(0,s+1),this.count-=s+1}return this.count>0&&t<e&&(i.push(new aU(t,e-1,this.classNames.join(" "),bL._metadata(this.metadata))),t=e),t}insert(e,t,i){if(this.count===0||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(i);else for(let s=0;s<this.count;s++)if(this.stopOffsets[s]>=e){this.stopOffsets.splice(s,0,e),this.classNames.splice(s,0,t),this.metadata.splice(s,0,i);break}this.count++}}class PAe{static normalize(e,t){if(t.length===0)return[];const i=[],s=new bL;let r=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];let c=l.startColumn,d=l.endColumn;const u=l.className,h=l.type===1?2:l.type===2?4:0;if(c>1){const m=e.charCodeAt(c-2);gs(m)&&c--}if(d>1){const m=e.charCodeAt(d-2);gs(m)&&d--}const f=c-1,g=d-2;r=s.consumeLowerThan(f,r,i),s.count===0&&(r=f),s.insert(g,u,h)}return s.consumeLowerThan(1073741824,r,i),i}}class ms{constructor(e,t,i,s){this.endIndex=e,this.type=t,this.metadata=i,this.containsRTL=s,this._linePartBrand=void 0}isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}}let Tne=class{constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}};class k0{constructor(e,t,i,s,r,o,a,l,c,d,u,h,f,g,m,p,b,w,v){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=i,this.continuesWithWrappedLine=s,this.isBasicASCII=r,this.containsRTL=o,this.fauxIndentLength=a,this.lineTokens=l,this.lineDecorations=c.sort(Na.compare),this.tabSize=d,this.startVisibleColumn=u,this.spaceWidth=h,this.stopRenderingLineAfter=m,this.renderWhitespace=p==="all"?4:p==="boundary"?1:p==="selection"?2:p==="trailing"?3:0,this.renderControlCharacters=b,this.fontLigatures=w,this.selectionsOnLine=v&&v.sort((C,S)=>C.startOffset<S.startOffset?-1:1);const _=Math.abs(g-h),y=Math.abs(f-h);_<y?(this.renderSpaceWidth=g,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=f,this.renderSpaceCharCode=183)}sameSelection(e){if(this.selectionsOnLine===null)return e===null;if(e===null||e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&Na.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}}class Dne{constructor(e,t){this.partIndex=e,this.charIndex=t}}class cc{static getPartIndex(e){return(e&4294901760)>>>16}static getCharIndex(e){return(e&65535)>>>0}constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._horizontalOffset=new Uint32Array(this.length)}setColumnInfo(e,t,i,s){const r=(t<<16|i<<0)>>>0;this._data[e-1]=r,this._horizontalOffset[e-1]=s}getHorizontalOffset(e){return this._horizontalOffset.length===0?0:this._horizontalOffset[e-1]}charOffsetToPartData(e){return this.length===0?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){const t=this.charOffsetToPartData(e-1),i=cc.getPartIndex(t),s=cc.getCharIndex(t);return new Dne(i,s)}getColumn(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}partDataToCharOffset(e,t,i){if(this.length===0)return 0;const s=(e<<16|i<<0)>>>0;let r=0,o=this.length-1;for(;r+1<o;){const m=r+o>>>1,p=this._data[m];if(p===s)return m;p>s?o=m:r=m}if(r===o)return r;const a=this._data[r],l=this._data[o];if(a===s)return r;if(l===s)return o;const c=cc.getPartIndex(a),d=cc.getCharIndex(a),u=cc.getPartIndex(l);let h;c!==u?h=t:h=cc.getCharIndex(l);const f=i-d,g=h-i;return f<=g?r:o}}class R3{constructor(e,t,i){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=i}}function cP(n,e){if(n.lineContent.length===0){if(n.lineDecorations.length>0){e.appendString("<span>");let t=0,i=0,s=0;for(const o of n.lineDecorations)(o.type===1||o.type===2)&&(e.appendString('<span class="'),e.appendString(o.className),e.appendString('"></span>'),o.type===1&&(s|=1,t++),o.type===2&&(s|=2,i++));e.appendString("</span>");const r=new cc(1,t+i);return r.setColumnInfo(1,t,0,0),new R3(r,!1,s)}return e.appendString("<span><span></span></span>"),new R3(new cc(0,0),!1,0)}return YAe(GAe(n),e)}class OAe{constructor(e,t,i,s){this.characterMapping=e,this.html=t,this.containsRTL=i,this.containsForeignElements=s}}function X2(n){const e=new W2(1e4),t=cP(n,e);return new OAe(t.characterMapping,e.build(),t.containsRTL,t.containsForeignElements)}class ZAe{constructor(e,t,i,s,r,o,a,l,c,d,u,h,f,g,m,p){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=i,this.len=s,this.isOverflowing=r,this.overflowingCharCount=o,this.parts=a,this.containsForeignElements=l,this.fauxIndentLength=c,this.tabSize=d,this.startVisibleColumn=u,this.containsRTL=h,this.spaceWidth=f,this.renderSpaceCharCode=g,this.renderWhitespace=m,this.renderControlCharacters=p}}function GAe(n){const e=n.lineContent;let t,i,s;n.stopRenderingLineAfter!==-1&&n.stopRenderingLineAfter<e.length?(t=!0,i=e.length-n.stopRenderingLineAfter,s=n.stopRenderingLineAfter):(t=!1,i=0,s=e.length);let r=BAe(e,n.containsRTL,n.lineTokens,n.fauxIndentLength,s);n.renderControlCharacters&&!n.isBasicASCII&&(r=zAe(e,r)),(n.renderWhitespace===4||n.renderWhitespace===1||n.renderWhitespace===2&&n.selectionsOnLine||n.renderWhitespace===3&&!n.continuesWithWrappedLine)&&(r=HAe(n,e,s,r));let o=0;if(n.lineDecorations.length>0){for(let a=0,l=n.lineDecorations.length;a<l;a++){const c=n.lineDecorations[a];c.type===3||c.type===1?o|=1:c.type===2&&(o|=2)}r=UAe(e,s,r,n.lineDecorations)}return n.containsRTL||(r=XAe(e,r,!n.isBasicASCII||n.fontLigatures)),new ZAe(n.useMonospaceOptimizations,n.canUseHalfwidthRightwardsArrow,e,s,t,i,r,o,n.fauxIndentLength,n.tabSize,n.startVisibleColumn,n.containsRTL,n.spaceWidth,n.renderSpaceCharCode,n.renderWhitespace,n.renderControlCharacters)}function BAe(n,e,t,i,s){const r=[];let o=0;i>0&&(r[o++]=new ms(i,"",0,!1));let a=i;for(let l=0,c=t.getCount();l<c;l++){const d=t.getEndOffset(l);if(d<=i)continue;const u=t.getClassName(l);if(d>=s){const f=e?A_(n.substring(a,s)):!1;r[o++]=new ms(s,u,0,f);break}const h=e?A_(n.substring(a,d)):!1;r[o++]=new ms(d,u,0,h),a=d}return r}function XAe(n,e,t){let i=0;const s=[];let r=0;if(t)for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.endIndex;if(i+50<c){const d=l.type,u=l.metadata,h=l.containsRTL;let f=-1,g=i;for(let m=i;m<c;m++)n.charCodeAt(m)===32&&(f=m),f!==-1&&m-g>=50&&(s[r++]=new ms(f+1,d,u,h),g=f+1,f=-1);g!==c&&(s[r++]=new ms(c,d,u,h))}else s[r++]=l;i=c}else for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.endIndex,d=c-i;if(d>50){const u=l.type,h=l.metadata,f=l.containsRTL,g=Math.ceil(d/50);for(let m=1;m<g;m++){const p=i+m*50;s[r++]=new ms(p,u,h,f)}s[r++]=new ms(c,u,h,f)}else s[r++]=l;i=c}return s}function Ine(n){return n<32?n!==9:n===127||n>=8234&&n<=8238||n>=8294&&n<=8297||n>=8206&&n<=8207||n===1564}function zAe(n,e){const t=[];let i=new ms(0,"",0,!1),s=0;for(const r of e){const o=r.endIndex;for(;s<o;s++){const a=n.charCodeAt(s);Ine(a)&&(s>i.endIndex&&(i=new ms(s,r.type,r.metadata,r.containsRTL),t.push(i)),i=new ms(s+1,"mtkcontrol",r.metadata,!1),t.push(i))}s>i.endIndex&&(i=new ms(o,r.type,r.metadata,r.containsRTL),t.push(i))}return t}function HAe(n,e,t,i){const s=n.continuesWithWrappedLine,r=n.fauxIndentLength,o=n.tabSize,a=n.startVisibleColumn,l=n.useMonospaceOptimizations,c=n.selectionsOnLine,d=n.renderWhitespace===1,u=n.renderWhitespace===3,h=n.renderSpaceWidth!==n.spaceWidth,f=[];let g=0,m=0,p=i[m].type,b=i[m].containsRTL,w=i[m].endIndex;const v=i.length;let _=!1,y=fo(e),C;y===-1?(_=!0,y=t,C=t):C=sm(e);let S=!1,k=0,I=c&&c[k],T=a%o;for(let M=r;M<t;M++){const E=e.charCodeAt(M);I&&M>=I.endOffset&&(k++,I=c&&c[k]);let W;if(M<y||M>C)W=!0;else if(E===9)W=!0;else if(E===32)if(d)if(S)W=!0;else{const P=M+1<t?e.charCodeAt(M+1):0;W=P===32||P===9}else W=!0;else W=!1;if(W&&c&&(W=!!I&&I.startOffset<=M&&I.endOffset>M),W&&u&&(W=_||M>C),W&&b&&M>=y&&M<=C&&(W=!1),S){if(!W||!l&&T>=o){if(h){const P=g>0?f[g-1].endIndex:r;for(let N=P+1;N<=M;N++)f[g++]=new ms(N,"mtkw",1,!1)}else f[g++]=new ms(M,"mtkw",1,!1);T=T%o}}else(M===w||W&&M>r)&&(f[g++]=new ms(M,p,0,b),T=T%o);for(E===9?T=o:Wh(E)?T+=2:T++,S=W;M===w&&(m++,m<v);)p=i[m].type,b=i[m].containsRTL,w=i[m].endIndex}let D=!1;if(S)if(s&&d){const M=t>0?e.charCodeAt(t-1):0,E=t>1?e.charCodeAt(t-2):0;M===32&&E!==32&&E!==9||(D=!0)}else D=!0;if(D)if(h){const M=g>0?f[g-1].endIndex:r;for(let E=M+1;E<=t;E++)f[g++]=new ms(E,"mtkw",1,!1)}else f[g++]=new ms(t,"mtkw",1,!1);else f[g++]=new ms(t,p,0,b);return f}function UAe(n,e,t,i){i.sort(Na.compare);const s=PAe.normalize(n,i),r=s.length;let o=0;const a=[];let l=0,c=0;for(let u=0,h=t.length;u<h;u++){const f=t[u],g=f.endIndex,m=f.type,p=f.metadata,b=f.containsRTL;for(;o<r&&s[o].startOffset<g;){const w=s[o];if(w.startOffset>c&&(c=w.startOffset,a[l++]=new ms(c,m,p,b)),w.endOffset+1<=g)c=w.endOffset+1,a[l++]=new ms(c,m+" "+w.className,p|w.metadata,b),o++;else{c=g,a[l++]=new ms(c,m+" "+w.className,p|w.metadata,b);break}}g>c&&(c=g,a[l++]=new ms(c,m,p,b))}const d=t[t.length-1].endIndex;if(o<r&&s[o].startOffset===d)for(;o<r&&s[o].startOffset===d;){const u=s[o];a[l++]=new ms(c,u.className,u.metadata,!1),o++}return a}function YAe(n,e){const t=n.fontIsMonospace,i=n.canUseHalfwidthRightwardsArrow,s=n.containsForeignElements,r=n.lineContent,o=n.len,a=n.isOverflowing,l=n.overflowingCharCount,c=n.parts,d=n.fauxIndentLength,u=n.tabSize,h=n.startVisibleColumn,f=n.containsRTL,g=n.spaceWidth,m=n.renderSpaceCharCode,p=n.renderWhitespace,b=n.renderControlCharacters,w=new cc(o+1,c.length);let v=!1,_=0,y=h,C=0,S=0,k=0;f?e.appendString('<span dir="ltr">'):e.appendString("<span>");for(let I=0,T=c.length;I<T;I++){const D=c[I],M=D.endIndex,E=D.type,W=D.containsRTL,P=p!==0&&D.isWhitespace(),N=P&&!t&&(E==="mtkw"||!s),H=_===M&&D.isPseudoAfter();if(C=0,e.appendString("<span "),W&&e.appendString('style="unicode-bidi:isolate" '),e.appendString('class="'),e.appendString(N?"mtkz":E),e.appendASCIICharCode(34),P){let U=0;{let B=_,Y=y;for(;B<M;B++){const ee=(r.charCodeAt(B)===9?u-Y%u:1)|0;U+=ee,B>=d&&(Y+=ee)}}for(N&&(e.appendString(' style="width:'),e.appendString(String(g*U)),e.appendString('px"')),e.appendASCIICharCode(62);_<M;_++){w.setColumnInfo(_+1,I-k,C,S),k=0;const B=r.charCodeAt(_);let Y,ne;if(B===9){Y=u-y%u|0,ne=Y,!i||ne>1?e.appendCharCode(8594):e.appendCharCode(65515);for(let ee=2;ee<=ne;ee++)e.appendCharCode(160)}else Y=2,ne=1,e.appendCharCode(m),e.appendCharCode(8204);C+=Y,S+=ne,_>=d&&(y+=ne)}}else for(e.appendASCIICharCode(62);_<M;_++){w.setColumnInfo(_+1,I-k,C,S),k=0;const U=r.charCodeAt(_);let B=1,Y=1;switch(U){case 9:B=u-y%u,Y=B;for(let ne=1;ne<=B;ne++)e.appendCharCode(160);break;case 32:e.appendCharCode(160);break;case 60:e.appendString("&lt;");break;case 62:e.appendString("&gt;");break;case 38:e.appendString("&amp;");break;case 0:b?e.appendCharCode(9216):e.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:e.appendCharCode(65533);break;default:Wh(U)&&Y++,b&&U<32?e.appendCharCode(9216+U):b&&U===127?e.appendCharCode(9249):b&&Ine(U)?(e.appendString("[U+"),e.appendString(KAe(U)),e.appendString("]"),B=8,Y=B):e.appendCharCode(U)}C+=B,S+=Y,_>=d&&(y+=Y)}H?k++:k=0,_>=o&&!v&&D.isPseudoAfter()&&(v=!0,w.setColumnInfo(_+1,I,C,S)),e.appendString("</span>")}return v||w.setColumnInfo(o+1,c.length-1,C,S),a&&(e.appendString('<span class="mtkoverflow">'),e.appendString(L("showMore","Show more ({0})",jAe(l))),e.appendString("</span>")),e.appendString("</span>"),new R3(w,f,s)}function KAe(n){return n.toString(16).toUpperCase().padStart(4,"0")}function jAe(n){return n<1024?L("overflow.chars","{0} chars",n):n<1024*1024?`${(n/1024).toFixed(1)} KB`:`${(n/1024/1024).toFixed(1)} MB`}var na;(function(n){n.DARK="dark",n.LIGHT="light",n.HIGH_CONTRAST_DARK="hcDark",n.HIGH_CONTRAST_LIGHT="hcLight"})(na||(na={}));function yh(n){return n===na.HIGH_CONTRAST_DARK||n===na.HIGH_CONTRAST_LIGHT}function z2(n){return n===na.DARK||n===na.HIGH_CONTRAST_DARK}const JAe=function(){return kl?!0:!(Er||ua||$d)}();let Ep=!0;class lU{constructor(e,t){this.themeType=t;const i=e.options,s=i.get(50);i.get(38)==="off"?this.renderWhitespace=i.get(99):this.renderWhitespace="none",this.renderControlCharacters=i.get(94),this.spaceWidth=s.spaceWidth,this.middotWidth=s.middotWidth,this.wsmiddotWidth=s.wsmiddotWidth,this.useMonospaceOptimizations=s.isMonospace&&!i.get(33),this.canUseHalfwidthRightwardsArrow=s.canUseHalfwidthRightwardsArrow,this.lineHeight=i.get(67),this.stopRenderingLineAfter=i.get(117),this.fontLigatures=i.get(51)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}}class fc{constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(this._renderedViewLine)this._renderedViewLine.domNode=di(e);else throw new Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return yh(this._options.themeType)||this._options.renderWhitespace==="selection"?(this._isMaybeInvalid=!0,!0):!1}renderLine(e,t,i,s,r){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;const o=s.getViewLineRenderingData(e),a=this._options,l=Na.filter(o.inlineDecorations,e,o.minColumn,o.maxColumn);let c=null;if(yh(a.themeType)||this._options.renderWhitespace==="selection"){const f=s.selections;for(const g of f){if(g.endLineNumber<e||g.startLineNumber>e)continue;const m=g.startLineNumber===e?g.startColumn:o.minColumn,p=g.endLineNumber===e?g.endColumn:o.maxColumn;m<p&&(yh(a.themeType)&&l.push(new Na(m,p,"inline-selected-text",0)),this._options.renderWhitespace==="selection"&&(c||(c=[]),c.push(new Tne(m-1,p-1))))}}const d=new k0(a.useMonospaceOptimizations,a.canUseHalfwidthRightwardsArrow,o.content,o.continuesWithWrappedLine,o.isBasicASCII,o.containsRTL,o.minColumn-1,o.tokens,l,o.tabSize,o.startVisibleColumn,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,a.stopRenderingLineAfter,a.renderWhitespace,a.renderControlCharacters,a.fontLigatures!==Jo.OFF,c);if(this._renderedViewLine&&this._renderedViewLine.input.equals(d))return!1;r.appendString('<div style="top:'),r.appendString(String(t)),r.appendString("px;height:"),r.appendString(String(i)),r.appendString('px;" class="'),r.appendString(fc.CLASS_NAME),r.appendString('">');const u=cP(d,r);r.appendString("</div>");let h=null;return Ep&&JAe&&o.isBasicASCII&&a.useMonospaceOptimizations&&u.containsForeignElements===0&&(h=new Dy(this._renderedViewLine?this._renderedViewLine.domNode:null,d,u.characterMapping)),h||(h=Ene(this._renderedViewLine?this._renderedViewLine.domNode:null,d,u.characterMapping,u.containsRTL,u.containsForeignElements)),this._renderedViewLine=h,!0}layoutLine(e,t,i){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(i))}getWidth(e){return this._renderedViewLine?this._renderedViewLine.getWidth(e):0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof Dy:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof Dy?this._renderedViewLine.monospaceAssumptionsAreValid():Ep}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof Dy&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,i,s){if(!this._renderedViewLine)return null;t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),i=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,i));const r=this._renderedViewLine.input.stopRenderingLineAfter;if(r!==-1&&t>r+1&&i>r+1)return new oU(!0,[new lg(this.getWidth(s),0)]);r!==-1&&t>r+1&&(t=r+1),r!==-1&&i>r+1&&(i=r+1);const o=this._renderedViewLine.getVisibleRangesForRange(e,t,i,s);return o&&o.length>0?new oU(!1,o):null}getColumnOfNodeOffset(e,t){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t):1}}fc.CLASS_NAME="view-line";class Dy{constructor(e,t,i){this._cachedWidth=-1,this.domNode=e,this.input=t;const s=Math.floor(t.lineContent.length/300);if(s>0){this._keyColumnPixelOffsetCache=new Float32Array(s);for(let r=0;r<s;r++)this._keyColumnPixelOffsetCache[r]=-1}else this._keyColumnPixelOffsetCache=null;this._characterMapping=i,this._charWidth=t.spaceWidth}getWidth(e){if(!this.domNode||this.input.lineContent.length<300){const t=this._characterMapping.getHorizontalOffset(this._characterMapping.length);return Math.round(this._charWidth*t)}return this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e?.markDidDomLayout()),this._cachedWidth}getWidthIsFast(){return this.input.lineContent.length<300||this._cachedWidth!==-1}monospaceAssumptionsAreValid(){if(!this.domNode)return Ep;if(this.input.lineContent.length<300){const e=this.getWidth(null),t=this.domNode.domNode.firstChild.offsetWidth;Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),Ep=!1)}return Ep}toSlowRenderedLine(){return Ene(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,t,i,s){const r=this._getColumnPixelOffset(e,t,s),o=this._getColumnPixelOffset(e,i,s);return[new lg(r,o-r)]}_getColumnPixelOffset(e,t,i){if(t<=300){const c=this._characterMapping.getHorizontalOffset(t);return this._charWidth*c}const s=Math.floor((t-1)/300)-1,r=(s+1)*300+1;let o=-1;if(this._keyColumnPixelOffsetCache&&(o=this._keyColumnPixelOffsetCache[s],o===-1&&(o=this._actualReadPixelOffset(e,r,i),this._keyColumnPixelOffsetCache[s]=o)),o===-1){const c=this._characterMapping.getHorizontalOffset(t);return this._charWidth*c}const a=this._characterMapping.getHorizontalOffset(r),l=this._characterMapping.getHorizontalOffset(t);return o+this._charWidth*(l-a)}_getReadingTarget(e){return e.domNode.firstChild}_actualReadPixelOffset(e,t,i){if(!this.domNode)return-1;const s=this._characterMapping.getDomPosition(t),r=US.readHorizontalRanges(this._getReadingTarget(this.domNode),s.partIndex,s.charIndex,s.partIndex,s.charIndex,i);return!r||r.length===0?-1:r[0].left}getColumnOfNodeOffset(e,t){return Nne(this._characterMapping,e,t)}}class Mne{constructor(e,t,i,s,r){if(this.domNode=e,this.input=t,this._characterMapping=i,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=r,this._cachedWidth=-1,this._pixelOffsetCache=null,!s||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let o=0,a=this._characterMapping.length;o<=a;o++)this._pixelOffsetCache[o]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(e){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e?.markDidDomLayout()),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(e,t,i,s){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){const r=this._readPixelOffset(this.domNode,e,t,s);if(r===-1)return null;const o=this._readPixelOffset(this.domNode,e,i,s);return o===-1?null:[new lg(r,o-r)]}return this._readVisibleRangesForRange(this.domNode,e,t,i,s)}_readVisibleRangesForRange(e,t,i,s,r){if(i===s){const o=this._readPixelOffset(e,t,i,r);return o===-1?null:[new lg(o,0)]}else return this._readRawVisibleRangesForRange(e,i,s,r)}_readPixelOffset(e,t,i,s){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth(s);const r=this._getReadingTarget(e);return r.firstChild?(s.markDidDomLayout(),r.firstChild.offsetWidth):0}if(this._pixelOffsetCache!==null){const r=this._pixelOffsetCache[i];if(r!==-1)return r;const o=this._actualReadPixelOffset(e,t,i,s);return this._pixelOffsetCache[i]=o,o}return this._actualReadPixelOffset(e,t,i,s)}_actualReadPixelOffset(e,t,i,s){if(this._characterMapping.length===0){const l=US.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,s);return!l||l.length===0?-1:l[0].left}if(i===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth(s);const r=this._characterMapping.getDomPosition(i),o=US.readHorizontalRanges(this._getReadingTarget(e),r.partIndex,r.charIndex,r.partIndex,r.charIndex,s);if(!o||o.length===0)return-1;const a=o[0].left;if(this.input.isBasicASCII){const l=this._characterMapping.getHorizontalOffset(i),c=Math.round(this.input.spaceWidth*l);if(Math.abs(c-a)<=1)return c}return a}_readRawVisibleRangesForRange(e,t,i,s){if(t===1&&i===this._characterMapping.length)return[new lg(0,this.getWidth(s))];const r=this._characterMapping.getDomPosition(t),o=this._characterMapping.getDomPosition(i);return US.readHorizontalRanges(this._getReadingTarget(e),r.partIndex,r.charIndex,o.partIndex,o.charIndex,s)}getColumnOfNodeOffset(e,t){return Nne(this._characterMapping,e,t)}}class $Ae extends Mne{_readVisibleRangesForRange(e,t,i,s,r){const o=super._readVisibleRangesForRange(e,t,i,s,r);if(!o||o.length===0||i===s||i===1&&s===this._characterMapping.length)return o;if(!this.input.containsRTL){const a=this._readPixelOffset(e,t,s,r);if(a!==-1){const l=o[o.length-1];l.left<a&&(l.width=a-l.left)}}return o}}const Ene=function(){return rg?QAe:qAe}();function QAe(n,e,t,i,s){return new $Ae(n,e,t,i,s)}function qAe(n,e,t,i,s){return new Mne(n,e,t,i,s)}function Nne(n,e,t){const i=e.textContent.length;let s=-1;for(;e;)e=e.previousSibling,s++;return n.getColumn(new Dne(s,t),i)}class xu{constructor(e=null){this.hitTarget=e,this.type=0}}class Rne{get hitTarget(){return this.spanNode}constructor(e,t,i){this.position=e,this.spanNode=t,this.injectedText=i,this.type=1}}var Pf;(function(n){function e(t,i,s){const r=t.getPositionFromDOMInfo(i,s);return r?new Rne(r,i,null):new xu(i)}n.createFromDOMInfo=e})(Pf||(Pf={}));class eFe{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}}class hr{static _deduceRage(e,t=null){return!t&&e?new te(e.lineNumber,e.column,e.lineNumber,e.column):t??null}static createUnknown(e,t,i){return{type:0,element:e,mouseColumn:t,position:i,range:this._deduceRage(i)}}static createTextarea(e,t){return{type:1,element:e,mouseColumn:t,position:null,range:null}}static createMargin(e,t,i,s,r,o){return{type:e,element:t,mouseColumn:i,position:s,range:r,detail:o}}static createViewZone(e,t,i,s,r){return{type:e,element:t,mouseColumn:i,position:s,range:this._deduceRage(s),detail:r}}static createContentText(e,t,i,s,r){return{type:6,element:e,mouseColumn:t,position:i,range:this._deduceRage(i,s),detail:r}}static createContentEmpty(e,t,i,s){return{type:7,element:e,mouseColumn:t,position:i,range:this._deduceRage(i),detail:s}}static createContentWidget(e,t,i){return{type:9,element:e,mouseColumn:t,position:null,range:null,detail:i}}static createScrollbar(e,t,i){return{type:11,element:e,mouseColumn:t,position:i,range:this._deduceRage(i)}}static createOverlayWidget(e,t,i){return{type:12,element:e,mouseColumn:t,position:null,range:null,detail:i}}static createOutsideEditor(e,t,i,s){return{type:13,element:null,mouseColumn:e,position:t,range:this._deduceRage(t),outsidePosition:i,outsideDistance:s}}static _typeToString(e){return e===1?"TEXTAREA":e===2?"GUTTER_GLYPH_MARGIN":e===3?"GUTTER_LINE_NUMBERS":e===4?"GUTTER_LINE_DECORATIONS":e===5?"GUTTER_VIEW_ZONE":e===6?"CONTENT_TEXT":e===7?"CONTENT_EMPTY":e===8?"CONTENT_VIEW_ZONE":e===9?"CONTENT_WIDGET":e===10?"OVERVIEW_RULER":e===11?"SCROLLBAR":e===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+JSON.stringify(e.detail)}}class br{static isTextArea(e){return e.length===2&&e[0]===3&&e[1]===7}static isChildOfViewLines(e){return e.length>=4&&e[0]===3&&e[3]===8}static isStrictChildOfViewLines(e){return e.length>4&&e[0]===3&&e[3]===8}static isChildOfScrollableElement(e){return e.length>=2&&e[0]===3&&e[1]===6}static isChildOfMinimap(e){return e.length>=2&&e[0]===3&&e[1]===9}static isChildOfContentWidgets(e){return e.length>=4&&e[0]===3&&e[3]===1}static isChildOfOverflowGuard(e){return e.length>=1&&e[0]===3}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&e[0]===2}static isChildOfOverlayWidgets(e){return e.length>=2&&e[0]===3&&e[1]===4}static isChildOfOverflowingOverlayWidgets(e){return e.length>=1&&e[0]===5}}class Rb{constructor(e,t,i){this.viewModel=e.viewModel;const s=e.configuration.options;this.layoutInfo=s.get(145),this.viewDomNode=t.viewDomNode,this.lineHeight=s.get(67),this.stickyTabStops=s.get(116),this.typicalHalfwidthCharacterWidth=s.get(50).typicalHalfwidthCharacterWidth,this.lastRenderData=i,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return Rb.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){const i=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(i){const s=i.verticalOffset+i.height/2,r=e.viewModel.getLineCount();let o=null,a,l=null;return i.afterLineNumber!==r&&(l=new pe(i.afterLineNumber+1,1)),i.afterLineNumber>0&&(o=new pe(i.afterLineNumber,e.viewModel.getLineMaxColumn(i.afterLineNumber))),l===null?a=o:o===null?a=l:t<s?a=o:a=l,{viewZoneId:i.id,afterLineNumber:i.afterLineNumber,positionBefore:o,positionAfter:l,position:a}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){const s=this._context.viewModel.getLineCount(),r=this._context.viewModel.getLineMaxColumn(s);return{range:new te(s,r,s,r),isAfterLines:!0}}const t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),i=this._context.viewModel.getLineMaxColumn(t);return{range:new te(t,1,t,i),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return Rb._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,i){for(;e&&e!==e.ownerDocument.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===i)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class tFe{constructor(e,t,i,s){this.editorPos=t,this.pos=i,this.relativePos=s,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+this.relativePos.x-e.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<e.layoutInfo.contentLeft&&this.relativePos.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,cr._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}}class iFe extends tFe{get target(){return this._useHitTestTarget?this.hitTestResult.value.hitTarget:this._eventTarget}get targetPath(){return this._targetPathCacheElement!==this.target&&(this._targetPathCacheElement=this.target,this._targetPathCacheValue=Al.collect(this.target,this._ctx.viewDomNode)),this._targetPathCacheValue}constructor(e,t,i,s,r){super(e,t,i,s),this.hitTestResult=new cu(()=>cr.doHitTest(this._ctx,this)),this._targetPathCacheElement=null,this._targetPathCacheValue=new Uint8Array(0),this._ctx=e,this._eventTarget=r;const o=!!this._eventTarget;this._useHitTestTarget=!o}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), relativePos(${this.relativePos.x},${this.relativePos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}get wouldBenefitFromHitTestTargetSwitch(){return!this._useHitTestTarget&&this.hitTestResult.value.hitTarget!==null&&this.target!==this.hitTestResult.value.hitTarget}switchToHitTestTarget(){this._useHitTestTarget=!0}_getMouseColumn(e=null){return e&&e.column<this._ctx.viewModel.getLineMaxColumn(e.lineNumber)?ns.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(e.lineNumber),e.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn}fulfillUnknown(e=null){return hr.createUnknown(this.target,this._getMouseColumn(e),e)}fulfillTextarea(){return hr.createTextarea(this.target,this._getMouseColumn())}fulfillMargin(e,t,i,s){return hr.createMargin(e,this.target,this._getMouseColumn(t),t,i,s)}fulfillViewZone(e,t,i){return hr.createViewZone(e,this.target,this._getMouseColumn(t),t,i)}fulfillContentText(e,t,i){return hr.createContentText(this.target,this._getMouseColumn(e),e,t,i)}fulfillContentEmpty(e,t){return hr.createContentEmpty(this.target,this._getMouseColumn(e),e,t)}fulfillContentWidget(e){return hr.createContentWidget(this.target,this._getMouseColumn(),e)}fulfillScrollbar(e){return hr.createScrollbar(this.target,this._getMouseColumn(e),e)}fulfillOverlayWidget(e){return hr.createOverlayWidget(this.target,this._getMouseColumn(),e)}}const cU={isAfterLines:!0};function eR(n){return{isAfterLines:!1,horizontalDistanceToText:n}}class cr{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){const t=e.target,i=Al.collect(t,this._viewHelper.viewDomNode);return!!(br.isChildOfContentWidgets(i)||br.isChildOfOverflowingContentWidgets(i)||br.isChildOfOverlayWidgets(i)||br.isChildOfOverflowingOverlayWidgets(i))}createMouseTarget(e,t,i,s,r){const o=new Rb(this._context,this._viewHelper,e),a=new iFe(o,t,i,s,r);try{const l=cr._createMouseTarget(o,a);if(l.type===6&&o.stickyTabStops&&l.position!==null){const c=cr._snapToSoftTabBoundary(l.position,o.viewModel),d=te.fromPositions(c,c).plusRange(l.range);return a.fulfillContentText(c,d,l.detail)}return l}catch{return a.fulfillUnknown()}}static _createMouseTarget(e,t){if(t.target===null)return t.fulfillUnknown();const i=t;let s=null;return!br.isChildOfOverflowGuard(t.targetPath)&&!br.isChildOfOverflowingContentWidgets(t.targetPath)&&!br.isChildOfOverflowingOverlayWidgets(t.targetPath)&&(s=s||t.fulfillUnknown()),s=s||cr._hitTestContentWidget(e,i),s=s||cr._hitTestOverlayWidget(e,i),s=s||cr._hitTestMinimap(e,i),s=s||cr._hitTestScrollbarSlider(e,i),s=s||cr._hitTestViewZone(e,i),s=s||cr._hitTestMargin(e,i),s=s||cr._hitTestViewCursor(e,i),s=s||cr._hitTestTextArea(e,i),s=s||cr._hitTestViewLines(e,i),s=s||cr._hitTestScrollbar(e,i),s||t.fulfillUnknown()}static _hitTestContentWidget(e,t){if(br.isChildOfContentWidgets(t.targetPath)||br.isChildOfOverflowingContentWidgets(t.targetPath)){const i=e.findAttribute(t.target,"widgetId");return i?t.fulfillContentWidget(i):t.fulfillUnknown()}return null}static _hitTestOverlayWidget(e,t){if(br.isChildOfOverlayWidgets(t.targetPath)||br.isChildOfOverflowingOverlayWidgets(t.targetPath)){const i=e.findAttribute(t.target,"widgetId");return i?t.fulfillOverlayWidget(i):t.fulfillUnknown()}return null}static _hitTestViewCursor(e,t){if(t.target){const i=e.lastRenderData.lastViewCursorsRenderData;for(const s of i)if(t.target===s.domNode)return t.fulfillContentText(s.position,null,{mightBeForeignElement:!1,injectedText:null})}if(t.isInContentArea){const i=e.lastRenderData.lastViewCursorsRenderData,s=t.mouseContentHorizontalOffset,r=t.mouseVerticalOffset;for(const o of i){if(s<o.contentLeft||s>o.contentLeft+o.width)continue;const a=e.getVerticalOffsetForLineNumber(o.position.lineNumber);if(a<=r&&r<=a+o.height)return t.fulfillContentText(o.position,null,{mightBeForeignElement:!1,injectedText:null})}}return null}static _hitTestViewZone(e,t){const i=e.getZoneAtCoord(t.mouseVerticalOffset);if(i){const s=t.isInContentArea?8:5;return t.fulfillViewZone(s,i.position,i)}return null}static _hitTestTextArea(e,t){return br.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfillContentText(e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):t.fulfillTextarea():null}static _hitTestMargin(e,t){if(t.isInMarginArea){const i=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),s=i.range.getStartPosition();let r=Math.abs(t.relativePos.x);const o={isAfterLines:i.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:r};if(r-=e.layoutInfo.glyphMarginLeft,r<=e.layoutInfo.glyphMarginWidth){const a=e.viewModel.coordinatesConverter.convertViewPositionToModelPosition(i.range.getStartPosition()),l=e.viewModel.glyphLanes.getLanesAtLine(a.lineNumber);return o.glyphMarginLane=l[Math.floor(r/e.lineHeight)],t.fulfillMargin(2,s,i.range,o)}return r-=e.layoutInfo.glyphMarginWidth,r<=e.layoutInfo.lineNumbersWidth?t.fulfillMargin(3,s,i.range,o):(r-=e.layoutInfo.lineNumbersWidth,t.fulfillMargin(4,s,i.range,o))}return null}static _hitTestViewLines(e,t){if(!br.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfillContentEmpty(new pe(1,1),cU);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){const s=e.viewModel.getLineCount(),r=e.viewModel.getLineMaxColumn(s);return t.fulfillContentEmpty(new pe(s,r),cU)}if(br.isStrictChildOfViewLines(t.targetPath)){const s=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(e.viewModel.getLineLength(s)===0){const o=e.getLineWidth(s),a=eR(t.mouseContentHorizontalOffset-o);return t.fulfillContentEmpty(new pe(s,1),a)}const r=e.getLineWidth(s);if(t.mouseContentHorizontalOffset>=r){const o=eR(t.mouseContentHorizontalOffset-r),a=new pe(s,e.viewModel.getLineMaxColumn(s));return t.fulfillContentEmpty(a,o)}}const i=t.hitTestResult.value;return i.type===1?cr.createMouseTargetFromHitTestPosition(e,t,i.spanNode,i.position,i.injectedText):t.wouldBenefitFromHitTestTargetSwitch?(t.switchToHitTestTarget(),this._createMouseTarget(e,t)):t.fulfillUnknown()}static _hitTestMinimap(e,t){if(br.isChildOfMinimap(t.targetPath)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new pe(i,s))}return null}static _hitTestScrollbarSlider(e,t){if(br.isChildOfScrollableElement(t.targetPath)&&t.target&&t.target.nodeType===1){const i=t.target.className;if(i&&/\b(slider|scrollbar)\b/.test(i)){const s=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),r=e.viewModel.getLineMaxColumn(s);return t.fulfillScrollbar(new pe(s,r))}}return null}static _hitTestScrollbar(e,t){if(br.isChildOfScrollableElement(t.targetPath)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new pe(i,s))}return null}getMouseColumn(e){const t=this._context.configuration.options,i=t.get(145),s=this._context.viewLayout.getCurrentScrollLeft()+e.x-i.contentLeft;return cr._getMouseColumn(s,t.get(50).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){return e<0?1:Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,i,s,r){const o=s.lineNumber,a=s.column,l=e.getLineWidth(o);if(t.mouseContentHorizontalOffset>l){const b=eR(t.mouseContentHorizontalOffset-l);return t.fulfillContentEmpty(s,b)}const c=e.visibleRangeForPosition(o,a);if(!c)return t.fulfillUnknown(s);const d=c.left;if(Math.abs(t.mouseContentHorizontalOffset-d)<1)return t.fulfillContentText(s,null,{mightBeForeignElement:!!r,injectedText:r});const u=[];if(u.push({offset:c.left,column:a}),a>1){const b=e.visibleRangeForPosition(o,a-1);b&&u.push({offset:b.left,column:a-1})}const h=e.viewModel.getLineMaxColumn(o);if(a<h){const b=e.visibleRangeForPosition(o,a+1);b&&u.push({offset:b.left,column:a+1})}u.sort((b,w)=>b.offset-w.offset);const f=t.pos.toClientCoordinates(pt(e.viewDomNode)),g=i.getBoundingClientRect(),m=g.left<=f.clientX&&f.clientX<=g.right;let p=null;for(let b=1;b<u.length;b++){const w=u[b-1],v=u[b];if(w.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=v.offset){p=new te(o,w.column,o,v.column);const _=Math.abs(w.offset-t.mouseContentHorizontalOffset),y=Math.abs(v.offset-t.mouseContentHorizontalOffset);s=_<y?new pe(o,w.column):new pe(o,v.column);break}}return t.fulfillContentText(s,p,{mightBeForeignElement:!m||!!r,injectedText:r})}static _doHitTestWithCaretRangeFromPoint(e,t){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.getVerticalOffsetForLineNumber(i),r=s+e.lineHeight;if(!(i===e.viewModel.getLineCount()&&t.mouseVerticalOffset>r)){const a=Math.floor((s+r)/2);let l=t.pos.y+(a-t.mouseVerticalOffset);l<=t.editorPos.y&&(l=t.editorPos.y+1),l>=t.editorPos.y+t.editorPos.height&&(l=t.editorPos.y+t.editorPos.height-1);const c=new G2(t.pos.x,l),d=this._actualDoHitTestWithCaretRangeFromPoint(e,c.toClientCoordinates(pt(e.viewDomNode)));if(d.type===1)return d}return this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates(pt(e.viewDomNode)))}static _actualDoHitTestWithCaretRangeFromPoint(e,t){const i=Tb(e.viewDomNode);let s;if(i?typeof i.caretRangeFromPoint>"u"?s=nFe(i,t.clientX,t.clientY):s=i.caretRangeFromPoint(t.clientX,t.clientY):s=e.viewDomNode.ownerDocument.caretRangeFromPoint(t.clientX,t.clientY),!s||!s.startContainer)return new xu;const r=s.startContainer;if(r.nodeType===r.TEXT_NODE){const o=r.parentNode,a=o?o.parentNode:null,l=a?a.parentNode:null;return(l&&l.nodeType===l.ELEMENT_NODE?l.className:null)===fc.CLASS_NAME?Pf.createFromDOMInfo(e,o,s.startOffset):new xu(r.parentNode)}else if(r.nodeType===r.ELEMENT_NODE){const o=r.parentNode,a=o?o.parentNode:null;return(a&&a.nodeType===a.ELEMENT_NODE?a.className:null)===fc.CLASS_NAME?Pf.createFromDOMInfo(e,r,r.textContent.length):new xu(r)}return new xu}static _doHitTestWithCaretPositionFromPoint(e,t){const i=e.viewDomNode.ownerDocument.caretPositionFromPoint(t.clientX,t.clientY);if(i.offsetNode.nodeType===i.offsetNode.TEXT_NODE){const s=i.offsetNode.parentNode,r=s?s.parentNode:null,o=r?r.parentNode:null;return(o&&o.nodeType===o.ELEMENT_NODE?o.className:null)===fc.CLASS_NAME?Pf.createFromDOMInfo(e,i.offsetNode.parentNode,i.offset):new xu(i.offsetNode.parentNode)}if(i.offsetNode.nodeType===i.offsetNode.ELEMENT_NODE){const s=i.offsetNode.parentNode,r=s&&s.nodeType===s.ELEMENT_NODE?s.className:null,o=s?s.parentNode:null,a=o&&o.nodeType===o.ELEMENT_NODE?o.className:null;if(r===fc.CLASS_NAME){const l=i.offsetNode.childNodes[Math.min(i.offset,i.offsetNode.childNodes.length-1)];if(l)return Pf.createFromDOMInfo(e,l,0)}else if(a===fc.CLASS_NAME)return Pf.createFromDOMInfo(e,i.offsetNode,0)}return new xu(i.offsetNode)}static _snapToSoftTabBoundary(e,t){const i=t.getLineContent(e.lineNumber),{tabSize:s}=t.model.getOptions(),r=O_.atomicPosition(i,e.column-1,s,2);return r!==-1?new pe(e.lineNumber,r+1):e}static doHitTest(e,t){let i=new xu;if(typeof e.viewDomNode.ownerDocument.caretRangeFromPoint=="function"?i=this._doHitTestWithCaretRangeFromPoint(e,t):e.viewDomNode.ownerDocument.caretPositionFromPoint&&(i=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates(pt(e.viewDomNode)))),i.type===1){const s=e.viewModel.getInjectedTextAt(i.position),r=e.viewModel.normalizePosition(i.position,2);(s||!r.equals(i.position))&&(i=new Rne(r,i.spanNode,s))}return i}}function nFe(n,e,t){const i=document.createRange();let s=n.elementFromPoint(e,t);if(s!==null){for(;s&&s.firstChild&&s.firstChild.nodeType!==s.firstChild.TEXT_NODE&&s.lastChild&&s.lastChild.firstChild;)s=s.lastChild;const r=s.getBoundingClientRect(),o=pt(s),a=o.getComputedStyle(s,null).getPropertyValue("font-style"),l=o.getComputedStyle(s,null).getPropertyValue("font-variant"),c=o.getComputedStyle(s,null).getPropertyValue("font-weight"),d=o.getComputedStyle(s,null).getPropertyValue("font-size"),u=o.getComputedStyle(s,null).getPropertyValue("line-height"),h=o.getComputedStyle(s,null).getPropertyValue("font-family"),f=`${a} ${l} ${c} ${d}/${u} ${h}`,g=s.innerText;let m=r.left,p=0,b;if(e>r.left+r.width)p=g.length;else{const w=jf.getInstance();for(let v=0;v<g.length+1;v++){if(b=w.getCharWidth(g.charAt(v),f)/2,m+=b,e<m){p=v;break}m+=b}}i.setStart(s.firstChild,p),i.setEnd(s.firstChild,p)}return i}class jf{static getInstance(){return jf._INSTANCE||(jf._INSTANCE=new jf),jf._INSTANCE}constructor(){this._cache={},this._canvas=document.createElement("canvas")}getCharWidth(e,t){const i=e+t;if(this._cache[i])return this._cache[i];const s=this._canvas.getContext("2d");s.font=t;const o=s.measureText(e).width;return this._cache[i]=o,o}}jf._INSTANCE=null;function Tn(n,e,t){let i=null,s=null;if(typeof t.value=="function"?(i="value",s=t.value,s.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(i="get",s=t.get),!s)throw new Error("not supported");const r=`$memoize$${e}`;t[i]=function(...o){return this.hasOwnProperty(r)||Object.defineProperty(this,r,{configurable:!1,enumerable:!1,writable:!1,value:s.apply(this,o)}),this[r]}}var sFe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Gi;(function(n){n.Tap="-monaco-gesturetap",n.Change="-monaco-gesturechange",n.Start="-monaco-gesturestart",n.End="-monaco-gesturesend",n.Contextmenu="-monaco-gesturecontextmenu"})(Gi||(Gi={}));class Ki extends Le{constructor(){super(),this.dispatched=!1,this.targets=new co,this.ignoreTargets=new co,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(Be.runAndSubscribe(v2,({window:e,disposables:t})=>{t.add(we(e.document,"touchstart",i=>this.onTouchStart(i),{passive:!1})),t.add(we(e.document,"touchend",i=>this.onTouchEnd(e,i))),t.add(we(e.document,"touchmove",i=>this.onTouchMove(i),{passive:!1}))},{window:Di,disposables:this._store}))}static addTarget(e){if(!Ki.isTouchDevice())return Le.None;Ki.INSTANCE||(Ki.INSTANCE=new Ki);const t=Ki.INSTANCE.targets.push(e);return Et(t)}static ignoreTarget(e){if(!Ki.isTouchDevice())return Le.None;Ki.INSTANCE||(Ki.INSTANCE=new Ki);const t=Ki.INSTANCE.ignoreTargets.push(e);return Et(t)}static isTouchDevice(){return"ontouchstart"in Di||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){const t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let i=0,s=e.targetTouches.length;i<s;i++){const r=e.targetTouches.item(i);this.activeTouches[r.identifier]={id:r.identifier,initialTarget:r.target,initialTimeStamp:t,initialPageX:r.pageX,initialPageY:r.pageY,rollingTimestamps:[t],rollingPageX:[r.pageX],rollingPageY:[r.pageY]};const o=this.newGestureEvent(Gi.Start,r.target);o.pageX=r.pageX,o.pageY=r.pageY,this.dispatchEvent(o)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e,t){const i=Date.now(),s=Object.keys(this.activeTouches).length;for(let r=0,o=t.changedTouches.length;r<o;r++){const a=t.changedTouches.item(r);if(!this.activeTouches.hasOwnProperty(String(a.identifier))){console.warn("move of an UNKNOWN touch",a);continue}const l=this.activeTouches[a.identifier],c=Date.now()-l.initialTimeStamp;if(c<Ki.HOLD_DELAY&&Math.abs(l.initialPageX-Ho(l.rollingPageX))<30&&Math.abs(l.initialPageY-Ho(l.rollingPageY))<30){const d=this.newGestureEvent(Gi.Tap,l.initialTarget);d.pageX=Ho(l.rollingPageX),d.pageY=Ho(l.rollingPageY),this.dispatchEvent(d)}else if(c>=Ki.HOLD_DELAY&&Math.abs(l.initialPageX-Ho(l.rollingPageX))<30&&Math.abs(l.initialPageY-Ho(l.rollingPageY))<30){const d=this.newGestureEvent(Gi.Contextmenu,l.initialTarget);d.pageX=Ho(l.rollingPageX),d.pageY=Ho(l.rollingPageY),this.dispatchEvent(d)}else if(s===1){const d=Ho(l.rollingPageX),u=Ho(l.rollingPageY),h=Ho(l.rollingTimestamps)-l.rollingTimestamps[0],f=d-l.rollingPageX[0],g=u-l.rollingPageY[0],m=[...this.targets].filter(p=>l.initialTarget instanceof Node&&p.contains(l.initialTarget));this.inertia(e,m,i,Math.abs(f)/h,f>0?1:-1,d,Math.abs(g)/h,g>0?1:-1,u)}this.dispatchEvent(this.newGestureEvent(Gi.End,l.initialTarget)),delete this.activeTouches[a.identifier]}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){const i=document.createEvent("CustomEvent");return i.initEvent(e,!1,!0),i.initialTarget=t,i.tapCount=0,i}dispatchEvent(e){if(e.type===Gi.Tap){const t=new Date().getTime();let i=0;t-this._lastSetTapCountTime>Ki.CLEAR_TAP_COUNT_TIME?i=1:i=2,this._lastSetTapCountTime=t,e.tapCount=i}else(e.type===Gi.Change||e.type===Gi.Contextmenu)&&(this._lastSetTapCountTime=0);if(e.initialTarget instanceof Node){for(const i of this.ignoreTargets)if(i.contains(e.initialTarget))return;const t=[];for(const i of this.targets)if(i.contains(e.initialTarget)){let s=0,r=e.initialTarget;for(;r&&r!==i;)s++,r=r.parentElement;t.push([s,i])}t.sort((i,s)=>i[0]-s[0]);for(const[i,s]of t)s.dispatchEvent(e),this.dispatched=!0}}inertia(e,t,i,s,r,o,a,l,c){this.handle=po(e,()=>{const d=Date.now(),u=d-i;let h=0,f=0,g=!0;s+=Ki.SCROLL_FRICTION*u,a+=Ki.SCROLL_FRICTION*u,s>0&&(g=!1,h=r*s*u),a>0&&(g=!1,f=l*a*u);const m=this.newGestureEvent(Gi.Change);m.translationX=h,m.translationY=f,t.forEach(p=>p.dispatchEvent(m)),g||this.inertia(e,t,d,s,r,o+h,a,l,c+f)})}onTouchMove(e){const t=Date.now();for(let i=0,s=e.changedTouches.length;i<s;i++){const r=e.changedTouches.item(i);if(!this.activeTouches.hasOwnProperty(String(r.identifier))){console.warn("end of an UNKNOWN touch",r);continue}const o=this.activeTouches[r.identifier],a=this.newGestureEvent(Gi.Change,o.initialTarget);a.translationX=r.pageX-Ho(o.rollingPageX),a.translationY=r.pageY-Ho(o.rollingPageY),a.pageX=r.pageX,a.pageY=r.pageY,this.dispatchEvent(a),o.rollingPageX.length>3&&(o.rollingPageX.shift(),o.rollingPageY.shift(),o.rollingTimestamps.shift()),o.rollingPageX.push(r.pageX),o.rollingPageY.push(r.pageY),o.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}}Ki.SCROLL_FRICTION=-.005;Ki.HOLD_DELAY=700;Ki.CLEAR_TAP_COUNT_TIME=400;sFe([Tn],Ki,"isTouchDevice",null);let pa=class extends Le{onclick(e,t){this._register(we(e,Ge.CLICK,i=>t(new Sl(pt(e),i))))}onmousedown(e,t){this._register(we(e,Ge.MOUSE_DOWN,i=>t(new Sl(pt(e),i))))}onmouseover(e,t){this._register(we(e,Ge.MOUSE_OVER,i=>t(new Sl(pt(e),i))))}onmouseleave(e,t){this._register(we(e,Ge.MOUSE_LEAVE,i=>t(new Sl(pt(e),i))))}onkeydown(e,t){this._register(we(e,Ge.KEY_DOWN,i=>t(new Ji(i))))}onkeyup(e,t){this._register(we(e,Ge.KEY_UP,i=>t(new Ji(i))))}oninput(e,t){this._register(we(e,Ge.INPUT,t))}onblur(e,t){this._register(we(e,Ge.BLUR,t))}onfocus(e,t){this._register(we(e,Ge.FOCUS,t))}ignoreGesture(e){return Ki.ignoreTarget(e)}};const Wb=11;class rFe extends pa{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...Vt.asClassNameArray(e.icon)),this.domNode.style.position="absolute",this.domNode.style.width=Wb+"px",this.domNode.style.height=Wb+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new P2),this._register(ws(this.bgDomNode,Ge.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._register(ws(this.domNode,Ge.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._pointerdownRepeatTimer=this._register(new VV),this._pointerdownScheduleRepeatTimer=this._register(new lf)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,pt(e))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(t,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,i=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}}class oFe extends Le{constructor(e,t,i){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=i,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new lf)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){const e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{var e;(e=this._domNode)===null||e===void 0||e.setClassName(this._visibleClassName)},0))}_hide(e){var t;this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,(t=this._domNode)===null||t===void 0||t.setClassName(this._invisibleClassName+(e?" fade":"")))}}const aFe=140;class Wne extends pa{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new oFe(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new P2),this._shouldRender=!0,this.domNode=di(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(we(this.domNode.domNode,Ge.POINTER_DOWN,t=>this._domNodePointerDown(t)))}_createArrow(e){const t=this._register(new rFe(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,i,s){this.slider=di(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof i=="number"&&this.slider.setWidth(i),typeof s=="number"&&this.slider.setHeight(s),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(we(this.slider.domNode,Ge.POINTER_DOWN,r=>{r.button===0&&(r.preventDefault(),this._sliderPointerDown(r))})),this.onclick(this.slider.domNode,r=>{r.leftButton&&r.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){const t=this.domNode.domNode.getClientRects()[0].top,i=t+this._scrollbarState.getSliderPosition(),s=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),r=this._sliderPointerPosition(e);i<=r&&r<=s?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,i;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")t=e.offsetX,i=e.offsetY;else{const r=ho(this.domNode.domNode);t=e.pageX-r.left,i=e.pageY-r.top}const s=this._pointerDownRelativePosition(t,i);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(s):this._scrollbarState.getDesiredScrollPositionFromOffset(s)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._sliderPointerPosition(e),i=this._sliderOrthogonalPointerPosition(e),s=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,r=>{const o=this._sliderOrthogonalPointerPosition(r),a=Math.abs(o-i);if(Mr&&a>aFe){this._setDesiredScrollPositionNow(s.getScrollPosition());return}const c=this._sliderPointerPosition(r)-t;this._setDesiredScrollPositionNow(s.getDesiredScrollPositionFromDelta(c))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){const t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}const lFe=20;class Ab{constructor(e,t,i,s,r,o){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(i),this._arrowSize=Math.round(e),this._visibleSize=s,this._scrollSize=r,this._scrollPosition=o,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new Ab(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){const t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){const t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){const t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,i,s,r){const o=Math.max(0,i-e),a=Math.max(0,o-2*t),l=s>0&&s>i;if(!l)return{computedAvailableSize:Math.round(o),computedIsNeeded:l,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};const c=Math.round(Math.max(lFe,Math.floor(i*a/s))),d=(a-c)/(s-i),u=r*d;return{computedAvailableSize:Math.round(o),computedIsNeeded:l,computedSliderSize:Math.round(c),computedSliderRatio:d,computedSliderPosition:Math.round(u)}}_refreshComputedValues(){const e=Ab._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize;let i=this._scrollPosition;return t<this._computedSliderPosition?i-=this._visibleSize:i+=this._visibleSize,i}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;const t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}}class cFe extends Wne{constructor(e,t,i){const s=e.getScrollDimensions(),r=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new Ab(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,s.width,s.scrollWidth,r.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){const o=(t.arrowSize-Wb)/2,a=(t.horizontalScrollbarSize-Wb)/2;this._createArrow({className:"scra",icon:Qe.scrollbarButtonLeft,top:a,left:o,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Tg(null,1,0))}),this._createArrow({className:"scra",icon:Qe.scrollbarButtonRight,top:a,left:void 0,bottom:void 0,right:o,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Tg(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}}class dFe extends Wne{constructor(e,t,i){const s=e.getScrollDimensions(),r=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new Ab(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,s.height,s.scrollHeight,r.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){const o=(t.arrowSize-Wb)/2,a=(t.verticalScrollbarSize-Wb)/2;this._createArrow({className:"scra",icon:Qe.scrollbarButtonUp,top:o,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Tg(null,0,1))}),this._createArrow({className:"scra",icon:Qe.scrollbarButtonDown,top:void 0,left:a,bottom:o,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Tg(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}}class vL{constructor(e,t,i,s,r,o,a){this._forceIntegerValues=e,this._scrollStateBrand=void 0,this._forceIntegerValues&&(t=t|0,i=i|0,s=s|0,r=r|0,o=o|0,a=a|0),this.rawScrollLeft=s,this.rawScrollTop=a,t<0&&(t=0),s+t>i&&(s=i-t),s<0&&(s=0),r<0&&(r=0),a+r>o&&(a=o-r),a<0&&(a=0),this.width=t,this.scrollWidth=i,this.scrollLeft=s,this.height=r,this.scrollHeight=o,this.scrollTop=a}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new vL(this._forceIntegerValues,typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new vL(this._forceIntegerValues,this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){const i=this.width!==e.width,s=this.scrollWidth!==e.scrollWidth,r=this.scrollLeft!==e.scrollLeft,o=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,l=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:i,scrollWidthChanged:s,scrollLeftChanged:r,heightChanged:o,scrollHeightChanged:a,scrollTopChanged:l}}}class x0 extends Le{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new ue),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new vL(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){var i;const s=this._state.withScrollDimensions(e,t);this._setState(s,!!this._smoothScrolling),(i=this._smoothScrolling)===null||i===void 0||i.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};const i=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===i.scrollLeft&&this._smoothScrolling.to.scrollTop===i.scrollTop)return;let s;t?s=new X_(this._smoothScrolling.from,i,this._smoothScrolling.startTime,this._smoothScrolling.duration):s=this._smoothScrolling.combine(this._state,i,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=s}else{const i=this._state.withScrollPosition(e);this._smoothScrolling=X_.start(this._state,i,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){const i=this._state;i.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(i,t)))}}class dU{constructor(e,t,i){this.scrollLeft=e,this.scrollTop=t,this.isDone=i}}function tR(n,e){const t=e-n;return function(i){return n+t*fFe(i)}}function uFe(n,e,t){return function(i){return i<t?n(i/t):e((i-t)/(1-t))}}class X_{constructor(e,t,i,s){this.from=e,this.to=t,this.duration=s,this.startTime=i,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,i){if(Math.abs(e-t)>2.5*i){let r,o;return e<t?(r=e+.75*i,o=t-.75*i):(r=e-.75*i,o=t+.75*i),uFe(tR(e,r),tR(o,t),.33)}return tR(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const t=(e-this.startTime)/this.duration;if(t<1){const i=this.scrollLeft(t),s=this.scrollTop(t);return new dU(i,s,!1)}return new dU(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,i){return X_.start(e,t,i)}static start(e,t,i){i=i+10;const s=Date.now()-10;return new X_(e,t,s,i)}}function hFe(n){return Math.pow(n,3)}function fFe(n){return 1-hFe(1-n)}const gFe=500,uU=50;class mFe{constructor(e,t,i){this.timestamp=e,this.deltaX=t,this.deltaY=i,this.score=0}}class _L{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,i=1,s=this._rear;do{const r=s===this._front?e:Math.pow(2,-i);if(e-=r,t+=this._memory[s].score*r,s===this._front)break;s=(this._capacity+s-1)%this._capacity,i++}while(!0);return t<=.5}acceptStandardWheelEvent(e){if(dw){const t=pt(e.browserEvent),i=xEe(t);this.accept(Date.now(),e.deltaX*i,e.deltaY*i)}else this.accept(Date.now(),e.deltaX,e.deltaY)}accept(e,t,i){let s=null;const r=new mFe(e,t,i);this._front===-1&&this._rear===-1?(this._memory[0]=r,this._front=0,this._rear=0):(s=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=r),r.score=this._computeScore(r,s)}_computeScore(e,t){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let i=.5;if((!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(i+=.25),t){const s=Math.abs(e.deltaX),r=Math.abs(e.deltaY),o=Math.abs(t.deltaX),a=Math.abs(t.deltaY),l=Math.max(Math.min(s,o),1),c=Math.max(Math.min(r,a),1),d=Math.max(s,o),u=Math.max(r,a);d%l===0&&u%c===0&&(i-=.5)}return Math.min(Math.max(i,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}}_L.INSTANCE=new _L;class dP extends pa{get options(){return this._options}constructor(e,t,i){super(),this._onScroll=this._register(new ue),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new ue),e.style.overflow="hidden",this._options=bFe(t),this._scrollable=i,this._register(this._scrollable.onScroll(r=>{this._onWillScroll.fire(r),this._onDidScroll(r),this._onScroll.fire(r)}));const s={onMouseWheel:r=>this._onMouseWheel(r),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new dFe(this._scrollable,this._options,s)),this._horizontalScrollbar=this._register(new cFe(this._scrollable,this._options,s)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=di(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=di(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=di(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,r=>this._onMouseOver(r)),this.onmouseleave(this._listenOnDomNode,r=>this._onMouseLeave(r)),this._hideTimeout=this._register(new lf),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=Ns(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,jt&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new Tg(e))}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=Ns(this._mouseWheelToDispose),e)){const i=s=>{this._onMouseWheel(new Tg(s))};this._mouseWheelToDispose.push(we(this._listenOnDomNode,Ge.MOUSE_WHEEL,i,{passive:!1}))}}_onMouseWheel(e){var t;if(!((t=e.browserEvent)===null||t===void 0)&&t.defaultPrevented)return;const i=_L.INSTANCE;i.acceptStandardWheelEvent(e);let s=!1;if(e.deltaY||e.deltaX){let o=e.deltaY*this._options.mouseWheelScrollSensitivity,a=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&a+o===0?a=o=0:Math.abs(o)>=Math.abs(a)?a=0:o=0),this._options.flipAxes&&([o,a]=[a,o]);const l=!jt&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||l)&&!a&&(a=o,o=0),e.browserEvent&&e.browserEvent.altKey&&(a=a*this._options.fastScrollSensitivity,o=o*this._options.fastScrollSensitivity);const c=this._scrollable.getFutureScrollPosition();let d={};if(o){const u=uU*o,h=c.scrollTop-(u<0?Math.floor(u):Math.ceil(u));this._verticalScrollbar.writeScrollPosition(d,h)}if(a){const u=uU*a,h=c.scrollLeft-(u<0?Math.floor(u):Math.ceil(u));this._horizontalScrollbar.writeScrollPosition(d,h)}d=this._scrollable.validateScrollPosition(d),(c.scrollLeft!==d.scrollLeft||c.scrollTop!==d.scrollTop)&&(this._options.mouseWheelSmoothScroll&&i.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(d):this._scrollable.setScrollPositionNow(d),s=!0)}let r=s;!r&&this._options.alwaysConsumeMouseWheel&&(r=!0),!r&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(r=!0),r&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,i=e.scrollLeft>0,s=i?" left":"",r=t?" top":"",o=i||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${s}`),this._topShadowDomNode.setClassName(`shadow${r}`),this._topLeftShadowDomNode.setClassName(`shadow${o}${r}${s}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),gFe)}}class pFe extends dP{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const i=new x0({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:s=>po(pt(e),s)});super(e,t,i),this._register(i)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}}class H2 extends dP{constructor(e,t,i){super(e,t,i)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class uP extends dP{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const i=new x0({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:s=>po(pt(e),s)});super(e,t,i),this._register(i),this._element=e,this._register(this.onScroll(s=>{s.scrollTopChanged&&(this._element.scrollTop=s.scrollTop),s.scrollLeftChanged&&(this._element.scrollLeft=s.scrollLeft)})),this.scanDomNode()}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}function bFe(n){const e={lazyRender:typeof n.lazyRender<"u"?n.lazyRender:!1,className:typeof n.className<"u"?n.className:"",useShadows:typeof n.useShadows<"u"?n.useShadows:!0,handleMouseWheel:typeof n.handleMouseWheel<"u"?n.handleMouseWheel:!0,flipAxes:typeof n.flipAxes<"u"?n.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof n.consumeMouseWheelIfScrollbarIsNeeded<"u"?n.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof n.alwaysConsumeMouseWheel<"u"?n.alwaysConsumeMouseWheel:!1,scrollYToX:typeof n.scrollYToX<"u"?n.scrollYToX:!1,mouseWheelScrollSensitivity:typeof n.mouseWheelScrollSensitivity<"u"?n.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof n.fastScrollSensitivity<"u"?n.fastScrollSensitivity:5,scrollPredominantAxis:typeof n.scrollPredominantAxis<"u"?n.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof n.mouseWheelSmoothScroll<"u"?n.mouseWheelSmoothScroll:!0,arrowSize:typeof n.arrowSize<"u"?n.arrowSize:11,listenOnDomNode:typeof n.listenOnDomNode<"u"?n.listenOnDomNode:null,horizontal:typeof n.horizontal<"u"?n.horizontal:1,horizontalScrollbarSize:typeof n.horizontalScrollbarSize<"u"?n.horizontalScrollbarSize:10,horizontalSliderSize:typeof n.horizontalSliderSize<"u"?n.horizontalSliderSize:0,horizontalHasArrows:typeof n.horizontalHasArrows<"u"?n.horizontalHasArrows:!1,vertical:typeof n.vertical<"u"?n.vertical:1,verticalScrollbarSize:typeof n.verticalScrollbarSize<"u"?n.verticalScrollbarSize:10,verticalHasArrows:typeof n.verticalHasArrows<"u"?n.verticalHasArrows:!1,verticalSliderSize:typeof n.verticalSliderSize<"u"?n.verticalSliderSize:0,scrollByPage:typeof n.scrollByPage<"u"?n.scrollByPage:!1};return e.horizontalSliderSize=typeof n.horizontalSliderSize<"u"?n.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof n.verticalSliderSize<"u"?n.verticalSliderSize:e.verticalScrollbarSize,jt&&(e.className+=" mac"),e}class hP extends yw{constructor(e,t,i){super(),this._mouseLeaveMonitor=null,this._context=e,this.viewController=t,this.viewHelper=i,this.mouseTargetFactory=new cr(this._context,i),this._mouseDownOperation=this._register(new vFe(this._context,this.viewController,this.viewHelper,this.mouseTargetFactory,(o,a)=>this._createMouseTarget(o,a),o=>this._getMouseColumn(o))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(145).height;const s=new EAe(this.viewHelper.viewDomNode);this._register(s.onContextMenu(this.viewHelper.viewDomNode,o=>this._onContextMenu(o,!0))),this._register(s.onMouseMove(this.viewHelper.viewDomNode,o=>{this._onMouseMove(o),this._mouseLeaveMonitor||(this._mouseLeaveMonitor=we(this.viewHelper.viewDomNode.ownerDocument,"mousemove",a=>{this.viewHelper.viewDomNode.contains(a.target)||this._onMouseLeave(new Vh(a,!1,this.viewHelper.viewDomNode))}))})),this._register(s.onMouseUp(this.viewHelper.viewDomNode,o=>this._onMouseUp(o))),this._register(s.onMouseLeave(this.viewHelper.viewDomNode,o=>this._onMouseLeave(o)));let r=0;this._register(s.onPointerDown(this.viewHelper.viewDomNode,(o,a)=>{r=a})),this._register(we(this.viewHelper.viewDomNode,Ge.POINTER_UP,o=>{this._mouseDownOperation.onPointerUp()})),this._register(s.onMouseDown(this.viewHelper.viewDomNode,o=>this._onMouseDown(o,r))),this._setupMouseWheelZoomListener(),this._context.addEventHandler(this)}_setupMouseWheelZoomListener(){const e=_L.INSTANCE;let t=0,i=Pu.getZoomLevel(),s=!1,r=0;const o=l=>{if(this.viewController.emitMouseWheel(l),!this._context.configuration.options.get(76))return;const c=new Tg(l);if(e.acceptStandardWheelEvent(c),e.isPhysicalMouseWheel()){if(a(l)){const d=Pu.getZoomLevel(),u=c.deltaY>0?1:-1;Pu.setZoomLevel(d+u),c.preventDefault(),c.stopPropagation()}}else Date.now()-t>50&&(i=Pu.getZoomLevel(),s=a(l),r=0),t=Date.now(),r+=c.deltaY,s&&(Pu.setZoomLevel(i+r/5),c.preventDefault(),c.stopPropagation())};this._register(we(this.viewHelper.viewDomNode,Ge.MOUSE_WHEEL,o,{capture:!0,passive:!1}));function a(l){return jt?(l.metaKey||l.ctrlKey)&&!l.shiftKey&&!l.altKey:l.ctrlKey&&!l.metaKey&&!l.shiftKey&&!l.altKey}}dispose(){this._context.removeEventHandler(this),this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(145)){const t=this._context.configuration.options.get(145).height;this._height!==t&&(this._height=t,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}getTargetAtClientPoint(e,t){const s=new xne(e,t).toPageCoordinates(pt(this.viewHelper.viewDomNode)),r=aP(this.viewHelper.viewDomNode);if(s.y<r.y||s.y>r.y+r.height||s.x<r.x||s.x>r.x+r.width)return null;const o=lP(this.viewHelper.viewDomNode,r,s);return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),r,s,o,null)}_createMouseTarget(e,t){let i=e.target;if(!this.viewHelper.viewDomNode.contains(i)){const s=Tb(this.viewHelper.viewDomNode);s&&(i=s.elementsFromPoint(e.posx,e.posy).find(r=>this.viewHelper.viewDomNode.contains(r)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,e.relativePos,t?i:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.relativePos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){this.mouseTargetFactory.mouseTargetIsWidget(e)||e.preventDefault(),!(this._mouseDownOperation.isActive()||e.timestamp<this.lastMouseLeaveTime)&&this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e,t){const i=this._createMouseTarget(e,!0),s=i.type===6||i.type===7,r=i.type===2||i.type===3||i.type===4,o=i.type===3,a=this._context.configuration.options.get(109),l=i.type===8||i.type===5,c=i.type===9;let d=e.leftButton||e.middleButton;jt&&e.leftButton&&e.ctrlKey&&(d=!1);const u=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(d&&(s||o&&a))u(),this._mouseDownOperation.start(i.type,e,t);else if(r)e.preventDefault();else if(l){const h=i.detail;d&&this.viewHelper.shouldSuppressMouseDownOnViewZone(h.viewZoneId)&&(u(),this._mouseDownOperation.start(i.type,e,t),e.preventDefault())}else c&&this.viewHelper.shouldSuppressMouseDownOnWidget(i.detail)&&(u(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:i})}}class vFe extends Le{constructor(e,t,i,s,r,o){super(),this._context=e,this._viewController=t,this._viewHelper=i,this._mouseTargetFactory=s,this._createMouseTarget=r,this._getMouseColumn=o,this._mouseMoveMonitor=this._register(new RAe(this._viewHelper.viewDomNode)),this._topBottomDragScrolling=this._register(new _Fe(this._context,this._viewHelper,this._mouseTargetFactory,(a,l,c)=>this._dispatchMouse(a,l,c))),this._mouseState=new U2,this._currentSelection=new Ii(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);const t=this._findMousePosition(e,!1);t&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):t.type===13&&(t.outsidePosition==="above"||t.outsidePosition==="below")?this._topBottomDragScrolling.start(t,e):(this._topBottomDragScrolling.stop(),this._dispatchMouse(t,!0,1)))}start(e,t,i){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(e===3),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);const s=this._findMousePosition(t,!0);if(!s||!s.position)return;this._mouseState.trySetCount(t.detail,s.position),t.detail=this._mouseState.count;const r=this._context.configuration.options;if(!r.get(91)&&r.get(35)&&!r.get(22)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&s.type===6&&s.position&&this._currentSelection.containsPosition(s.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,i,t.buttons,o=>this._onMouseDownThenMove(o),o=>{const a=this._findMousePosition(this._lastMouseEvent,!1);Vu(o)?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:a?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(s,t.shiftKey,1),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,i,t.buttons,o=>this._onMouseDownThenMove(o),()=>this._stop()))}_stop(){this._isActive=!1,this._topBottomDragScrolling.stop()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onPointerUp(){this._mouseMoveMonitor.stopMonitoring()}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){const t=e.editorPos,i=this._context.viewModel,s=this._context.viewLayout,r=this._getMouseColumn(e);if(e.posy<t.y){const a=t.y-e.posy,l=Math.max(s.getCurrentScrollTop()-a,0),c=Rb.getZoneAtCoord(this._context,l);if(c){const u=this._helpPositionJumpOverViewZone(c);if(u)return hr.createOutsideEditor(r,u,"above",a)}const d=s.getLineNumberAtVerticalOffset(l);return hr.createOutsideEditor(r,new pe(d,1),"above",a)}if(e.posy>t.y+t.height){const a=e.posy-t.y-t.height,l=s.getCurrentScrollTop()+e.relativePos.y,c=Rb.getZoneAtCoord(this._context,l);if(c){const u=this._helpPositionJumpOverViewZone(c);if(u)return hr.createOutsideEditor(r,u,"below",a)}const d=s.getLineNumberAtVerticalOffset(l);return hr.createOutsideEditor(r,new pe(d,i.getLineMaxColumn(d)),"below",a)}const o=s.getLineNumberAtVerticalOffset(s.getCurrentScrollTop()+e.relativePos.y);if(e.posx<t.x){const a=t.x-e.posx;return hr.createOutsideEditor(r,new pe(o,1),"left",a)}if(e.posx>t.x+t.width){const a=e.posx-t.x-t.width;return hr.createOutsideEditor(r,new pe(o,i.getLineMaxColumn(o)),"right",a)}return null}_findMousePosition(e,t){const i=this._getPositionOutsideEditor(e);if(i)return i;const s=this._createMouseTarget(e,t);if(!s.position)return null;if(s.type===8||s.type===5){const o=this._helpPositionJumpOverViewZone(s.detail);if(o)return hr.createViewZone(s.type,s.element,s.mouseColumn,o,s.detail)}return s}_helpPositionJumpOverViewZone(e){const t=new pe(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),i=e.positionBefore,s=e.positionAfter;return i&&s?i.isBefore(t)?i:s:null}_dispatchMouse(e,t,i){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,revealType:i,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:e.type===6&&e.detail.injectedText!==null})}}class _Fe extends Le{constructor(e,t,i,s){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=i,this._dispatchMouse=s,this._operation=null}dispose(){super.dispose(),this.stop()}start(e,t){this._operation?this._operation.setPosition(e,t):this._operation=new wFe(this._context,this._viewHelper,this._mouseTargetFactory,this._dispatchMouse,e,t)}stop(){this._operation&&(this._operation.dispose(),this._operation=null)}}class wFe extends Le{constructor(e,t,i,s,r,o){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=i,this._dispatchMouse=s,this._position=r,this._mouseEvent=o,this._lastTime=Date.now(),this._animationFrameDisposable=po(pt(o.browserEvent),()=>this._execute())}dispose(){this._animationFrameDisposable.dispose(),super.dispose()}setPosition(e,t){this._position=e,this._mouseEvent=t}_tick(){const e=Date.now(),t=e-this._lastTime;return this._lastTime=e,t}_getScrollSpeed(){const e=this._context.configuration.options.get(67),t=this._context.configuration.options.get(145).height/e,i=this._position.outsideDistance/e;return i<=1.5?Math.max(30,t*(1+i)):i<=3?Math.max(60,t*(2+i)):Math.max(200,t*(7+i))}_execute(){const e=this._context.configuration.options.get(67),t=this._getScrollSpeed(),i=this._tick(),s=t*(i/1e3)*e,r=this._position.outsidePosition==="above"?-s:s;this._context.viewModel.viewLayout.deltaScrollNow(0,r),this._viewHelper.renderNow();const o=this._context.viewLayout.getLinesViewportData(),a=this._position.outsidePosition==="above"?o.startLineNumber:o.endLineNumber;let l;{const c=aP(this._viewHelper.viewDomNode),d=this._context.configuration.options.get(145).horizontalScrollbarHeight,u=new G2(this._mouseEvent.pos.x,c.y+c.height-d-.1),h=lP(this._viewHelper.viewDomNode,c,u);l=this._mouseTargetFactory.createMouseTarget(this._viewHelper.getLastRenderData(),c,u,h,null)}(!l.position||l.position.lineNumber!==a)&&(this._position.outsidePosition==="above"?l=hr.createOutsideEditor(this._position.mouseColumn,new pe(a,1),"above",this._position.outsideDistance):l=hr.createOutsideEditor(this._position.mouseColumn,new pe(a,this._context.viewModel.getLineMaxColumn(a)),"below",this._position.outsideDistance)),this._dispatchMouse(l,!0,2),this._animationFrameDisposable=po(pt(l.element),()=>this._execute())}}class U2{get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){const i=new Date().getTime();i-this._lastSetMouseDownCountTime>U2.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=i,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}}U2.CLEAR_MOUSE_DOWN_COUNT_TIME=400;class Yt{get event(){return this.emitter.event}constructor(e,t,i){const s=r=>this.emitter.fire(r);this.emitter=new ue({onWillAddFirstListener:()=>e.addEventListener(t,s,i),onDidRemoveLastListener:()=>e.removeEventListener(t,s,i)})}dispose(){this.emitter.dispose()}}class Ts{constructor(e,t,i,s,r){this.value=e,this.selectionStart=t,this.selectionEnd=i,this.selection=s,this.newlineCountBeforeSelection=r}toString(){return`[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`}static readFromTextArea(e,t){const i=e.getValue(),s=e.getSelectionStart(),r=e.getSelectionEnd();let o;if(t){const a=i.substring(0,s),l=t.value.substring(0,t.selectionStart);a===l&&(o=t.newlineCountBeforeSelection)}return new Ts(i,s,r,null,o)}collapseSelection(){return this.selectionStart===this.value.length?this:new Ts(this.value,this.value.length,this.value.length,null,void 0)}writeToTextArea(e,t,i){t.setValue(e,this.value),i&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){var t,i,s,r,o,a,l,c;if(e<=this.selectionStart){const h=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition((i=(t=this.selection)===null||t===void 0?void 0:t.getStartPosition())!==null&&i!==void 0?i:null,h,-1)}if(e>=this.selectionEnd){const h=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition((r=(s=this.selection)===null||s===void 0?void 0:s.getEndPosition())!==null&&r!==void 0?r:null,h,1)}const d=this.value.substring(this.selectionStart,e);if(d.indexOf("")===-1)return this._finishDeduceEditorPosition((a=(o=this.selection)===null||o===void 0?void 0:o.getStartPosition())!==null&&a!==void 0?a:null,d,1);const u=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition((c=(l=this.selection)===null||l===void 0?void 0:l.getEndPosition())!==null&&c!==void 0?c:null,u,-1)}_finishDeduceEditorPosition(e,t,i){let s=0,r=-1;for(;(r=t.indexOf(`
`,r+1))!==-1;)s++;return[e,i*t.length,s]}static deduceInput(e,t,i){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const s=Math.min(s3(e.value,t.value),e.selectionStart,t.selectionStart),r=Math.min(r3(e.value,t.value),e.value.length-e.selectionEnd,t.value.length-t.selectionEnd);e.value.substring(s,e.value.length-r);const o=t.value.substring(s,t.value.length-r),a=e.selectionStart-s,l=e.selectionEnd-s,c=t.selectionStart-s,d=t.selectionEnd-s;if(c===d){const h=e.selectionStart-s;return{text:o,replacePrevCharCnt:h,replaceNextCharCnt:0,positionDelta:0}}const u=l-a;return{text:o,replacePrevCharCnt:u,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const i=Math.min(s3(e.value,t.value),e.selectionEnd),s=Math.min(r3(e.value,t.value),e.value.length-e.selectionEnd),r=e.value.substring(i,e.value.length-s),o=t.value.substring(i,t.value.length-s);e.selectionStart-i;const a=e.selectionEnd-i;t.selectionStart-i;const l=t.selectionEnd-i;return{text:o,replacePrevCharCnt:a,replaceNextCharCnt:r.length-a,positionDelta:l-o.length}}}Ts.EMPTY=new Ts("",0,0,null,void 0);class gp{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){const i=e*t,s=i+1,r=i+t;return new te(s,1,r+1,1)}static fromEditorSelection(e,t,i,s){const o=gp._getPageOfLine(t.startLineNumber,i),a=gp._getRangeForPage(o,i),l=gp._getPageOfLine(t.endLineNumber,i),c=gp._getRangeForPage(l,i);let d=a.intersectRanges(new te(1,1,t.startLineNumber,t.startColumn));if(s&&e.getValueLengthInRange(d,1)>500){const b=e.modifyPosition(d.getEndPosition(),-500);d=te.fromPositions(b,d.getEndPosition())}const u=e.getValueInRange(d,1),h=e.getLineCount(),f=e.getLineMaxColumn(h);let g=c.intersectRanges(new te(t.endLineNumber,t.endColumn,h,f));if(s&&e.getValueLengthInRange(g,1)>500){const b=e.modifyPosition(g.getStartPosition(),500);g=te.fromPositions(g.getStartPosition(),b)}const m=e.getValueInRange(g,1);let p;if(o===l||o+1===l)p=e.getValueInRange(t,1);else{const b=a.intersectRanges(t),w=c.intersectRanges(t);p=e.getValueInRange(b,1)+""+e.getValueInRange(w,1)}return s&&p.length>2*500&&(p=p.substring(0,500)+""+p.substring(p.length-500,p.length)),new Ts(u+p+m,u.length,u.length+p.length,t,d.endLineNumber-d.startLineNumber)}}var yFe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},hU=function(n,e){return function(t,i){e(t,i,n)}},wL;(function(n){n.Tap="-monaco-textarea-synthetic-tap"})(wL||(wL={}));const W3={forceCopyWithSyntaxHighlighting:!1};class z_{constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}}z_.INSTANCE=new z_;class SFe{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(e){e=e||"";const t={text:e,replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,t}}let A3=class extends Le{get textAreaState(){return this._textAreaState}constructor(e,t,i,s,r,o){super(),this._host=e,this._textArea=t,this._OS=i,this._browser=s,this._accessibilityService=r,this._logService=o,this._onFocus=this._register(new ue),this.onFocus=this._onFocus.event,this._onBlur=this._register(new ue),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new ue),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new ue),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new ue),this.onCut=this._onCut.event,this._onPaste=this._register(new ue),this.onPaste=this._onPaste.event,this._onType=this._register(new ue),this.onType=this._onType.event,this._onCompositionStart=this._register(new ue),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new ue),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new ue),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new ue),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncFocusGainWriteScreenReaderContent=this._register(new ha),this._asyncTriggerCut=this._register(new as(()=>this._onCut.fire(),0)),this._textAreaState=Ts.EMPTY,this._selectionChangeListener=null,this._accessibilityService.isScreenReaderOptimized()&&this.writeNativeTextAreaContent("ctor"),this._register(Be.runAndSubscribe(this._accessibilityService.onDidChangeScreenReaderOptimized,()=>{this._accessibilityService.isScreenReaderOptimized()&&!this._asyncFocusGainWriteScreenReaderContent.value?this._asyncFocusGainWriteScreenReaderContent.value=this._register(new as(()=>this.writeNativeTextAreaContent("asyncFocusGain"),0)):this._asyncFocusGainWriteScreenReaderContent.clear()})),this._hasFocus=!1,this._currentComposition=null;let a=null;this._register(this._textArea.onKeyDown(l=>{const c=new Ji(l);(c.keyCode===114||this._currentComposition&&c.keyCode===1)&&c.stopPropagation(),c.equals(9)&&c.preventDefault(),a=c,this._onKeyDown.fire(c)})),this._register(this._textArea.onKeyUp(l=>{const c=new Ji(l);this._onKeyUp.fire(c)})),this._register(this._textArea.onCompositionStart(l=>{const c=new SFe;if(this._currentComposition){this._currentComposition=c;return}if(this._currentComposition=c,this._OS===2&&a&&a.equals(114)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===l.data&&(a.code==="ArrowRight"||a.code==="ArrowLeft")){c.handleCompositionUpdate("x"),this._onCompositionStart.fire({data:l.data});return}if(this._browser.isAndroid){this._onCompositionStart.fire({data:l.data});return}this._onCompositionStart.fire({data:l.data})})),this._register(this._textArea.onCompositionUpdate(l=>{const c=this._currentComposition;if(!c)return;if(this._browser.isAndroid){const u=Ts.readFromTextArea(this._textArea,this._textAreaState),h=Ts.deduceAndroidCompositionInput(this._textAreaState,u);this._textAreaState=u,this._onType.fire(h),this._onCompositionUpdate.fire(l);return}const d=c.handleCompositionUpdate(l.data);this._textAreaState=Ts.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(d),this._onCompositionUpdate.fire(l)})),this._register(this._textArea.onCompositionEnd(l=>{const c=this._currentComposition;if(!c)return;if(this._currentComposition=null,this._browser.isAndroid){const u=Ts.readFromTextArea(this._textArea,this._textAreaState),h=Ts.deduceAndroidCompositionInput(this._textAreaState,u);this._textAreaState=u,this._onType.fire(h),this._onCompositionEnd.fire();return}const d=c.handleCompositionUpdate(l.data);this._textAreaState=Ts.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(d),this._onCompositionEnd.fire()})),this._register(this._textArea.onInput(l=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const c=Ts.readFromTextArea(this._textArea,this._textAreaState),d=Ts.deduceInput(this._textAreaState,c,this._OS===2);d.replacePrevCharCnt===0&&d.text.length===1&&(gs(d.text.charCodeAt(0))||d.text.charCodeAt(0)===127)||(this._textAreaState=c,(d.text!==""||d.replacePrevCharCnt!==0||d.replaceNextCharCnt!==0||d.positionDelta!==0)&&this._onType.fire(d))})),this._register(this._textArea.onCut(l=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(l),this._asyncTriggerCut.schedule()})),this._register(this._textArea.onCopy(l=>{this._ensureClipboardGetsEditorSelection(l)})),this._register(this._textArea.onPaste(l=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),l.preventDefault(),!l.clipboardData)return;let[c,d]=F3.getTextData(l.clipboardData);c&&(d=d||z_.INSTANCE.get(c),this._onPaste.fire({text:c,metadata:d}))})),this._register(this._textArea.onFocus(()=>{const l=this._hasFocus;this._setHasFocus(!0),this._accessibilityService.isScreenReaderOptimized()&&this._browser.isSafari&&!l&&this._hasFocus&&(this._asyncFocusGainWriteScreenReaderContent.value||(this._asyncFocusGainWriteScreenReaderContent.value=new as(()=>this.writeNativeTextAreaContent("asyncFocusGain"),0)),this._asyncFocusGainWriteScreenReaderContent.value.schedule())})),this._register(this._textArea.onBlur(()=>{this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(this._textArea.onSyntheticTap(()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let e=0;return we(this._textArea.ownerDocument,"selectionchange",t=>{if(ju.onSelectionChange(),!this._hasFocus||this._currentComposition||!this._browser.isChrome)return;const i=Date.now(),s=i-e;if(e=i,s<5)return;const r=i-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),r<100||!this._textAreaState.selection)return;const o=this._textArea.getValue();if(this._textAreaState.value!==o)return;const a=this._textArea.getSelectionStart(),l=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===a&&this._textAreaState.selectionEnd===l)return;const c=this._textAreaState.deduceEditorPosition(a),d=this._host.deduceModelPosition(c[0],c[1],c[2]),u=this._textAreaState.deduceEditorPosition(l),h=this._host.deduceModelPosition(u[0],u[1],u[2]),f=new Ii(d.lineNumber,d.column,h.lineNumber,h.column);this._onSelectionChangeRequest.fire(f)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeNativeTextAreaContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeNativeTextAreaContent(e){!this._accessibilityService.isScreenReaderOptimized()&&e==="render"||this._currentComposition||(this._logService.trace(`writeTextAreaState(reason: ${e})`),this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent()))}_ensureClipboardGetsEditorSelection(e){const t=this._host.getDataToCopy(),i={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};z_.INSTANCE.set(this._browser.isFirefox?t.text.replace(/\r\n/g,`
`):t.text,i),e.preventDefault(),e.clipboardData&&F3.setTextData(e.clipboardData,t.text,t.html,i)}};A3=yFe([hU(4,Xl),hU(5,Yc)],A3);const F3={getTextData(n){const e=n.getData(_n.text);let t=null;const i=n.getData("vscode-editor-data");if(typeof i=="string")try{t=JSON.parse(i),t.version!==1&&(t=null)}catch{}return e.length===0&&t===null&&n.files.length>0?[Array.prototype.slice.call(n.files,0).map(r=>r.name).join(`
`),null]:[e,t]},setTextData(n,e,t,i){n.setData(_n.text,e),typeof t=="string"&&n.setData("text/html",t),n.setData("vscode-editor-data",JSON.stringify(i))}};class CFe extends Le{get ownerDocument(){return this._actual.ownerDocument}constructor(e){super(),this._actual=e,this.onKeyDown=this._register(new Yt(this._actual,"keydown")).event,this.onKeyUp=this._register(new Yt(this._actual,"keyup")).event,this.onCompositionStart=this._register(new Yt(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(new Yt(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(new Yt(this._actual,"compositionend")).event,this.onBeforeInput=this._register(new Yt(this._actual,"beforeinput")).event,this.onInput=this._register(new Yt(this._actual,"input")).event,this.onCut=this._register(new Yt(this._actual,"cut")).event,this.onCopy=this._register(new Yt(this._actual,"copy")).event,this.onPaste=this._register(new Yt(this._actual,"paste")).event,this.onFocus=this._register(new Yt(this._actual,"focus")).event,this.onBlur=this._register(new Yt(this._actual,"blur")).event,this._onSyntheticTap=this._register(new ue),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(this.onKeyDown(()=>ju.onKeyDown())),this._register(this.onBeforeInput(()=>ju.onBeforeInput())),this._register(this.onInput(()=>ju.onInput())),this._register(this.onKeyUp(()=>ju.onKeyUp())),this._register(we(this._actual,wL.Tap,()=>this._onSyntheticTap.fire()))}hasFocus(){const e=Tb(this._actual);return e?e.activeElement===this._actual:this._actual.isConnected?Js()===this._actual:!1}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(e,t){const i=this._actual;i.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),i.value=t)}getSelectionStart(){return this._actual.selectionDirection==="backward"?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return this._actual.selectionDirection==="backward"?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(e,t,i){const s=this._actual;let r=null;const o=Tb(s);o?r=o.activeElement:r=Js();const a=pt(r),l=r===s,c=s.selectionStart,d=s.selectionEnd;if(l&&c===t&&d===i){ua&&a.parent!==a&&s.focus();return}if(l){this.setIgnoreSelectionChangeTime("setSelectionRange"),s.setSelectionRange(t,i),ua&&a.parent!==a&&s.focus();return}try{const u=G5e(s);this.setIgnoreSelectionChangeTime("setSelectionRange"),s.focus(),s.setSelectionRange(t,i),B5e(s,u)}catch{}}}class LFe extends hP{constructor(e,t,i){super(e,t,i),this._register(Ki.addTarget(this.viewHelper.linesContentDomNode)),this._register(we(this.viewHelper.linesContentDomNode,Gi.Tap,r=>this.onTap(r))),this._register(we(this.viewHelper.linesContentDomNode,Gi.Change,r=>this.onChange(r))),this._register(we(this.viewHelper.linesContentDomNode,Gi.Contextmenu,r=>this._onContextMenu(new Vh(r,!1,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(we(this.viewHelper.linesContentDomNode,"pointerdown",r=>{const o=r.pointerType;if(o==="mouse"){this._lastPointerType="mouse";return}else o==="touch"?this._lastPointerType="touch":this._lastPointerType="pen"}));const s=new NAe(this.viewHelper.viewDomNode);this._register(s.onPointerMove(this.viewHelper.viewDomNode,r=>this._onMouseMove(r))),this._register(s.onPointerUp(this.viewHelper.viewDomNode,r=>this._onMouseUp(r))),this._register(s.onPointerLeave(this.viewHelper.viewDomNode,r=>this._onMouseLeave(r))),this._register(s.onPointerDown(this.viewHelper.viewDomNode,(r,o)=>this._onMouseDown(r,o)))}onTap(e){!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget)||(e.preventDefault(),this.viewHelper.focusTextArea(),this._dispatchGesture(e,!1))}onChange(e){this._lastPointerType==="touch"&&this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY),this._lastPointerType==="pen"&&this._dispatchGesture(e,!0)}_dispatchGesture(e,t){const i=this._createMouseTarget(new Vh(e,!1,this.viewHelper.viewDomNode),!1);i.position&&this.viewController.dispatchMouse({position:i.position,mouseColumn:i.position.column,startedOnLineNumbers:!1,revealType:1,mouseDownCount:e.tapCount,inSelectionMode:t,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:i.type===6&&i.detail.injectedText!==null})}_onMouseDown(e,t){e.browserEvent.pointerType!=="touch"&&super._onMouseDown(e,t)}}class kFe extends hP{constructor(e,t,i){super(e,t,i),this._register(Ki.addTarget(this.viewHelper.linesContentDomNode)),this._register(we(this.viewHelper.linesContentDomNode,Gi.Tap,s=>this.onTap(s))),this._register(we(this.viewHelper.linesContentDomNode,Gi.Change,s=>this.onChange(s))),this._register(we(this.viewHelper.linesContentDomNode,Gi.Contextmenu,s=>this._onContextMenu(new Vh(s,!1,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new Vh(e,!1,this.viewHelper.viewDomNode),!1);if(t.position){const i=document.createEvent("CustomEvent");i.initEvent(wL.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(i),this.viewController.moveTo(t.position,1)}}onChange(e){this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}}class xFe extends Le{constructor(e,t,i){super(),(Lg||ZEe&&Zte)&&zte.pointerEvents?this.handler=this._register(new LFe(e,t,i)):Di.TouchEvent?this.handler=this._register(new kFe(e,t,i)):this.handler=this._register(new hP(e,t,i))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}}class gm extends yw{}const Xo=ri("themeService");function ps(n){return{id:n}}function V3(n){switch(n){case na.DARK:return"vs-dark";case na.HIGH_CONTRAST_DARK:return"hc-black";case na.HIGH_CONTRAST_LIGHT:return"hc-light";default:return"vs"}}const Ane={ThemingContribution:"base.contributions.theming"};class TFe{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new ue}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),Et(()=>{const t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}getThemingParticipants(){return this.themingParticipants}}const Fne=new TFe;Ss.add(Ane.ThemingContribution,Fne);function zl(n){return Fne.onColorThemeChange(n)}class DFe extends Le{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(t=>this.onThemeChange(t)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}}const Vne=j("editor.lineHighlightBackground",{dark:null,light:null,hcDark:null,hcLight:null},L("lineHighlight","Background color for the highlight of line at the cursor position.")),fU=j("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:si},L("lineHighlightBorderBox","Background color for the border around the line at the cursor position."));j("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},L("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0);j("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:cn,hcLight:cn},L("rangeHighlightBorder","Background color of the border around highlighted ranges."));j("editor.symbolHighlightBackground",{dark:$u,light:$u,hcDark:null,hcLight:null},L("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0);j("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:cn,hcLight:cn},L("symbolHighlightBorder","Background color of the border around highlighted symbols."));const Cc=j("editorCursor.foreground",{dark:"#AEAFAD",light:Ce.black,hcDark:Ce.white,hcLight:"#0F4A85"},L("caret","Color of the editor cursor.")),Md=j("editorCursor.background",null,L("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),Pne=j("editorMultiCursor.primary.foreground",{dark:Cc,light:Cc,hcDark:Cc,hcLight:Cc},L("editorMultiCursorPrimaryForeground","Color of the primary editor cursor when multiple cursors are present.")),IFe=j("editorMultiCursor.primary.background",{dark:Md,light:Md,hcDark:Md,hcLight:Md},L("editorMultiCursorPrimaryBackground","The background color of the primary editor cursor when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),One=j("editorMultiCursor.secondary.foreground",{dark:Cc,light:Cc,hcDark:Cc,hcLight:Cc},L("editorMultiCursorSecondaryForeground","Color of secondary editor cursors when multiple cursors are present.")),MFe=j("editorMultiCursor.secondary.background",{dark:Md,light:Md,hcDark:Md,hcLight:Md},L("editorMultiCursorSecondaryBackground","The background color of secondary editor cursors when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),Ed=j("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},L("editorWhitespaces","Color of whitespace characters in the editor.")),EFe=j("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:Ce.white,hcLight:"#292929"},L("editorLineNumbers","Color of editor line numbers.")),Iy=j("editorIndentGuide.background",{dark:Ed,light:Ed,hcDark:Ed,hcLight:Ed},L("editorIndentGuides","Color of the editor indentation guides."),!1,L("deprecatedEditorIndentGuides","'editorIndentGuide.background' is deprecated. Use 'editorIndentGuide.background1' instead.")),My=j("editorIndentGuide.activeBackground",{dark:Ed,light:Ed,hcDark:Ed,hcLight:Ed},L("editorActiveIndentGuide","Color of the active editor indentation guides."),!1,L("deprecatedEditorActiveIndentGuide","'editorIndentGuide.activeBackground' is deprecated. Use 'editorIndentGuide.activeBackground1' instead.")),Sw=j("editorIndentGuide.background1",{dark:Iy,light:Iy,hcDark:Iy,hcLight:Iy},L("editorIndentGuides1","Color of the editor indentation guides (1).")),NFe=j("editorIndentGuide.background2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},L("editorIndentGuides2","Color of the editor indentation guides (2).")),RFe=j("editorIndentGuide.background3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},L("editorIndentGuides3","Color of the editor indentation guides (3).")),WFe=j("editorIndentGuide.background4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},L("editorIndentGuides4","Color of the editor indentation guides (4).")),AFe=j("editorIndentGuide.background5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},L("editorIndentGuides5","Color of the editor indentation guides (5).")),FFe=j("editorIndentGuide.background6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},L("editorIndentGuides6","Color of the editor indentation guides (6).")),Cw=j("editorIndentGuide.activeBackground1",{dark:My,light:My,hcDark:My,hcLight:My},L("editorActiveIndentGuide1","Color of the active editor indentation guides (1).")),VFe=j("editorIndentGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},L("editorActiveIndentGuide2","Color of the active editor indentation guides (2).")),PFe=j("editorIndentGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},L("editorActiveIndentGuide3","Color of the active editor indentation guides (3).")),OFe=j("editorIndentGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},L("editorActiveIndentGuide4","Color of the active editor indentation guides (4).")),ZFe=j("editorIndentGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},L("editorActiveIndentGuide5","Color of the active editor indentation guides (5).")),GFe=j("editorIndentGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},L("editorActiveIndentGuide6","Color of the active editor indentation guides (6).")),Ey=j("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:cn,hcLight:cn},L("editorActiveLineNumber","Color of editor active line number"),!1,L("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead."));j("editorLineNumber.activeForeground",{dark:Ey,light:Ey,hcDark:Ey,hcLight:Ey},L("editorActiveLineNumber","Color of editor active line number"));const BFe=j("editorLineNumber.dimmedForeground",{dark:null,light:null,hcDark:null,hcLight:null},L("editorDimmedLineNumber","Color of the final editor line when editor.renderFinalNewline is set to dimmed."));j("editorRuler.foreground",{dark:"#5A5A5A",light:Ce.lightgrey,hcDark:Ce.white,hcLight:"#292929"},L("editorRuler","Color of the editor rulers."));j("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},L("editorCodeLensForeground","Foreground color of editor CodeLens"));j("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},L("editorBracketMatchBackground","Background color behind matching brackets"));j("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:si,hcLight:si},L("editorBracketMatchBorder","Color for matching brackets boxes"));const XFe=j("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},L("editorOverviewRulerBorder","Color of the overview ruler border.")),zFe=j("editorOverviewRuler.background",null,L("editorOverviewRulerBackground","Background color of the editor overview ruler."));j("editorGutter.background",{dark:js,light:js,hcDark:js,hcLight:js},L("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers."));j("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:Ce.fromHex("#fff").transparent(.8),hcLight:si},L("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor."));const HFe=j("editorUnnecessaryCode.opacity",{dark:Ce.fromHex("#000a"),light:Ce.fromHex("#0007"),hcDark:null,hcLight:null},L("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`));j("editorGhostText.border",{dark:null,light:null,hcDark:Ce.fromHex("#fff").transparent(.8),hcLight:Ce.fromHex("#292929").transparent(.8)},L("editorGhostTextBorder","Border color of ghost text in the editor."));j("editorGhostText.foreground",{dark:Ce.fromHex("#ffffff56"),light:Ce.fromHex("#0007"),hcDark:null,hcLight:null},L("editorGhostTextForeground","Foreground color of the ghost text in the editor."));j("editorGhostText.background",{dark:null,light:null,hcDark:null,hcLight:null},L("editorGhostTextBackground","Background color of the ghost text in the editor."));const Ny=new Ce(new li(0,122,204,.6)),UFe=j("editorOverviewRuler.rangeHighlightForeground",{dark:Ny,light:Ny,hcDark:Ny,hcLight:Ny},L("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),YFe=j("editorOverviewRuler.errorForeground",{dark:new Ce(new li(255,18,18,.7)),light:new Ce(new li(255,18,18,.7)),hcDark:new Ce(new li(255,50,50,1)),hcLight:"#B5200D"},L("overviewRuleError","Overview ruler marker color for errors.")),KFe=j("editorOverviewRuler.warningForeground",{dark:Lr,light:Lr,hcDark:mL,hcLight:mL},L("overviewRuleWarning","Overview ruler marker color for warnings.")),jFe=j("editorOverviewRuler.infoForeground",{dark:ia,light:ia,hcDark:pL,hcLight:pL},L("overviewRuleInfo","Overview ruler marker color for infos.")),Zne=j("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},L("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),Gne=j("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},L("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),Bne=j("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},L("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),Xne=j("editorBracketHighlight.foreground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},L("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),zne=j("editorBracketHighlight.foreground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},L("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),Hne=j("editorBracketHighlight.foreground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},L("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),JFe=j("editorBracketHighlight.unexpectedBracket.foreground",{dark:new Ce(new li(255,18,18,.8)),light:new Ce(new li(255,18,18,.8)),hcDark:new Ce(new li(255,50,50,1)),hcLight:""},L("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),$Fe=j("editorBracketPairGuide.background1",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},L("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),QFe=j("editorBracketPairGuide.background2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},L("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),qFe=j("editorBracketPairGuide.background3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},L("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),e4e=j("editorBracketPairGuide.background4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},L("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),t4e=j("editorBracketPairGuide.background5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},L("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),i4e=j("editorBracketPairGuide.background6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},L("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),n4e=j("editorBracketPairGuide.activeBackground1",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},L("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),s4e=j("editorBracketPairGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},L("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),r4e=j("editorBracketPairGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},L("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),o4e=j("editorBracketPairGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},L("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),a4e=j("editorBracketPairGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},L("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),l4e=j("editorBracketPairGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},L("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));j("editorUnicodeHighlight.border",{dark:Lr,light:Lr,hcDark:Lr,hcLight:Lr},L("editorUnicodeHighlight.border","Border color used to highlight unicode characters."));j("editorUnicodeHighlight.background",{dark:ky,light:ky,hcDark:ky,hcLight:ky},L("editorUnicodeHighlight.background","Background color used to highlight unicode characters."));zl((n,e)=>{const t=n.getColor(js),i=n.getColor(Vne),s=i&&!i.isTransparent()?i:t;s&&e.addRule(`.monaco-editor .inputarea.ime-input { background-color: ${s}; }`)});class Lw extends gm{constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new pe(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const e=this._context.configuration.options;this._lineHeight=e.get(67);const t=e.get(68);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(95);const i=e.get(145);this._lineNumbersLeft=i.lineNumbersLeft,this._lineNumbersWidth=i.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){const t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(t);let i=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,i=!0),(this._renderLineNumbers===2||this._renderLineNumbers===3)&&(i=!0),i}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onDecorationsChanged(e){return e.affectsLineNumber}_getLineRenderLineNumber(e){const t=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new pe(e,1));if(t.column!==1)return"";const i=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(i);if(this._renderLineNumbers===2){const s=Math.abs(this._lastCursorModelPosition.lineNumber-i);return s===0?'<span class="relative-current-line-number">'+i+"</span>":String(s)}if(this._renderLineNumbers===3){if(this._lastCursorModelPosition.lineNumber===i||i%10===0)return String(i);const s=this._context.viewModel.getLineCount();return i===s?String(i):""}return String(i)}prepareRender(e){if(this._renderLineNumbers===0){this._renderResult=null;return}const t=Er?this._lineHeight%2===0?" lh-even":" lh-odd":"",i=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber,r=this._context.viewModel.getDecorationsInViewport(e.visibleRange).filter(c=>!!c.options.lineNumberClassName);r.sort((c,d)=>te.compareRangesUsingEnds(c.range,d.range));let o=0;const a=this._context.viewModel.getLineCount(),l=[];for(let c=i;c<=s;c++){const d=c-i;let u=this._getLineRenderLineNumber(c),h="";for(;o<r.length&&r[o].range.endLineNumber<c;)o++;for(let f=o;f<r.length;f++){const{range:g,options:m}=r[f];g.startLineNumber<=c&&(h+=" "+m.lineNumberClassName)}if(!u&&!h){l[d]="";continue}c===a&&this._context.viewModel.getLineLength(c)===0&&(this._renderFinalNewline==="off"&&(u=""),this._renderFinalNewline==="dimmed"&&(h+=" dimmed-line-number")),c===this._activeLineNumber&&(h+=" active-line-number"),l[d]=`<div class="${Lw.CLASS_NAME}${t}${h}" style="left:${this._lineNumbersLeft}px;width:${this._lineNumbersWidth}px;">${u}</div>`}this._renderResult=l}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}Lw.CLASS_NAME="line-numbers";zl((n,e)=>{const t=n.getColor(EFe),i=n.getColor(BFe);i?e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${i}; }`):t&&e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${t.transparent(.4)}; }`)});class Ag extends vo{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(145);this._canUseLayerHinting=!t.get(32),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._domNode=di(document.createElement("div")),this._domNode.setClassName(Ag.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=di(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(Ag.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(145);return this._canUseLayerHinting=!t.get(32),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);const i=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(i),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(i)}}Ag.CLASS_NAME="glyph-margin";Ag.OUTER_CLASS_NAME="margin";const Np="monaco-mouse-cursor-text";let c4e=class{constructor(){this._tokenizationSupports=new Map,this._factories=new Map,this._onDidChange=new ue,this.onDidChange=this._onDidChange.event,this._colorMap=null}handleChange(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._tokenizationSupports.set(e,t),this.handleChange([e]),Et(()=>{this._tokenizationSupports.get(e)===t&&(this._tokenizationSupports.delete(e),this.handleChange([e]))})}get(e){return this._tokenizationSupports.get(e)||null}registerFactory(e,t){var i;(i=this._factories.get(e))===null||i===void 0||i.dispose();const s=new d4e(this,e,t);return this._factories.set(e,s),Et(()=>{const r=this._factories.get(e);!r||r!==s||(this._factories.delete(e),r.dispose())})}async getOrCreate(e){const t=this.get(e);if(t)return t;const i=this._factories.get(e);return!i||i.isResolved?null:(await i.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;const i=this._factories.get(e);return!!(!i||i.isResolved)}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}};class d4e extends Le{get isResolved(){return this._isResolved}constructor(e,t,i){super(),this._registry=e,this._languageId=t,this._factory=i,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}dispose(){this._isDisposed=!0,super.dispose()}async resolve(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise}async _create(){const e=await this._factory.tokenizationSupport;this._isResolved=!0,e&&!this._isDisposed&&this._register(this._registry.register(this._languageId,e))}}let H_=class{constructor(e,t,i){this.offset=e,this.type=t,this.language=i,this._tokenBrand=void 0}toString(){return"("+this.offset+", "+this.type+")"}};class fP{constructor(e,t){this.tokens=e,this.endState=t,this._tokenizationResultBrand=void 0}}class Y2{constructor(e,t){this.tokens=e,this.endState=t,this._encodedTokenizationResultBrand=void 0}}var gU;(function(n){n[n.Increase=0]="Increase",n[n.Decrease=1]="Decrease"})(gU||(gU={}));var mU;(function(n){const e=new Map;e.set(0,Qe.symbolMethod),e.set(1,Qe.symbolFunction),e.set(2,Qe.symbolConstructor),e.set(3,Qe.symbolField),e.set(4,Qe.symbolVariable),e.set(5,Qe.symbolClass),e.set(6,Qe.symbolStruct),e.set(7,Qe.symbolInterface),e.set(8,Qe.symbolModule),e.set(9,Qe.symbolProperty),e.set(10,Qe.symbolEvent),e.set(11,Qe.symbolOperator),e.set(12,Qe.symbolUnit),e.set(13,Qe.symbolValue),e.set(15,Qe.symbolEnum),e.set(14,Qe.symbolConstant),e.set(15,Qe.symbolEnum),e.set(16,Qe.symbolEnumMember),e.set(17,Qe.symbolKeyword),e.set(27,Qe.symbolSnippet),e.set(18,Qe.symbolText),e.set(19,Qe.symbolColor),e.set(20,Qe.symbolFile),e.set(21,Qe.symbolReference),e.set(22,Qe.symbolCustomColor),e.set(23,Qe.symbolFolder),e.set(24,Qe.symbolTypeParameter),e.set(25,Qe.account),e.set(26,Qe.issues);function t(r){let o=e.get(r);return o||(console.info("No codicon found for CompletionItemKind "+r),o=Qe.symbolProperty),o}n.toIcon=t;const i=new Map;i.set("method",0),i.set("function",1),i.set("constructor",2),i.set("field",3),i.set("variable",4),i.set("class",5),i.set("struct",6),i.set("interface",7),i.set("module",8),i.set("property",9),i.set("event",10),i.set("operator",11),i.set("unit",12),i.set("value",13),i.set("constant",14),i.set("enum",15),i.set("enum-member",16),i.set("enumMember",16),i.set("keyword",17),i.set("snippet",27),i.set("text",18),i.set("color",19),i.set("file",20),i.set("reference",21),i.set("customcolor",22),i.set("folder",23),i.set("type-parameter",24),i.set("typeParameter",24),i.set("account",25),i.set("issue",26);function s(r,o){let a=i.get(r);return typeof a>"u"&&!o&&(a=9),a}n.fromString=s})(mU||(mU={}));var pU;(function(n){n[n.Automatic=0]="Automatic",n[n.Explicit=1]="Explicit"})(pU||(pU={}));class u4e{constructor(e,t,i,s){this.range=e,this.text=t,this.completionKind=i,this.isSnippetText=s}equals(e){return te.lift(this.range).equalsRange(e.range)&&this.text===e.text&&this.completionKind===e.completionKind&&this.isSnippetText===e.isSnippetText}}var U_;(function(n){n[n.Automatic=0]="Automatic",n[n.PasteAs=1]="PasteAs"})(U_||(U_={}));var bU;(function(n){n[n.Invoke=1]="Invoke",n[n.TriggerCharacter=2]="TriggerCharacter",n[n.ContentChange=3]="ContentChange"})(bU||(bU={}));var Y_;(function(n){n[n.Text=0]="Text",n[n.Read=1]="Read",n[n.Write=2]="Write"})(Y_||(Y_={}));L("Array","array"),L("Boolean","boolean"),L("Class","class"),L("Constant","constant"),L("Constructor","constructor"),L("Enum","enumeration"),L("EnumMember","enumeration member"),L("Event","event"),L("Field","field"),L("File","file"),L("Function","function"),L("Interface","interface"),L("Key","key"),L("Method","method"),L("Module","module"),L("Namespace","namespace"),L("Null","null"),L("Number","number"),L("Object","object"),L("Operator","operator"),L("Package","package"),L("Property","property"),L("String","string"),L("Struct","struct"),L("TypeParameter","type parameter"),L("Variable","variable");var P3;(function(n){const e=new Map;e.set(0,Qe.symbolFile),e.set(1,Qe.symbolModule),e.set(2,Qe.symbolNamespace),e.set(3,Qe.symbolPackage),e.set(4,Qe.symbolClass),e.set(5,Qe.symbolMethod),e.set(6,Qe.symbolProperty),e.set(7,Qe.symbolField),e.set(8,Qe.symbolConstructor),e.set(9,Qe.symbolEnum),e.set(10,Qe.symbolInterface),e.set(11,Qe.symbolFunction),e.set(12,Qe.symbolVariable),e.set(13,Qe.symbolConstant),e.set(14,Qe.symbolString),e.set(15,Qe.symbolNumber),e.set(16,Qe.symbolBoolean),e.set(17,Qe.symbolArray),e.set(18,Qe.symbolObject),e.set(19,Qe.symbolKey),e.set(20,Qe.symbolNull),e.set(21,Qe.symbolEnumMember),e.set(22,Qe.symbolStruct),e.set(23,Qe.symbolEvent),e.set(24,Qe.symbolOperator),e.set(25,Qe.symbolTypeParameter);function t(i){let s=e.get(i);return s||(console.info("No codicon found for SymbolKind "+i),s=Qe.symbolProperty),s}n.toIcon=t})(P3||(P3={}));class kr{static fromValue(e){switch(e){case"comment":return kr.Comment;case"imports":return kr.Imports;case"region":return kr.Region}return new kr(e)}constructor(e){this.value=e}}kr.Comment=new kr("comment");kr.Imports=new kr("imports");kr.Region=new kr("region");var vU;(function(n){n[n.AIGenerated=1]="AIGenerated"})(vU||(vU={}));var _U;(function(n){n[n.Invoke=0]="Invoke",n[n.Automatic=1]="Automatic"})(_U||(_U={}));var wU;(function(n){function e(t){return!t||typeof t!="object"?!1:typeof t.id=="string"&&typeof t.title=="string"}n.is=e})(wU||(wU={}));var yU;(function(n){n[n.Type=1]="Type",n[n.Parameter=2]="Parameter"})(yU||(yU={}));class h4e{constructor(e){this.createSupport=e,this._tokenizationSupport=null}dispose(){this._tokenizationSupport&&this._tokenizationSupport.then(e=>{e&&e.dispose()})}get tokenizationSupport(){return this._tokenizationSupport||(this._tokenizationSupport=this.createSupport()),this._tokenizationSupport}}const Zn=new c4e;var SU;(function(n){n[n.Invoke=0]="Invoke",n[n.Automatic=1]="Automatic"})(SU||(SU={}));class f4e{constructor(){this._onDidChange=new ue,this.onDidChange=this._onDidChange.event,this._enabled=!0}get enabled(){return this._enabled}enable(){this._enabled=!0,this._onDidChange.fire()}disable(){this._enabled=!1,this._onDidChange.fire()}}const e_=new f4e,Ls=ri("keybindingService");var g4e=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},CU=function(n,e){return function(t,i){e(t,i,n)}};class m4e{constructor(e,t,i,s,r){this._context=e,this.modelLineNumber=t,this.distanceToModelLineStart=i,this.widthOfHiddenLineTextBefore=s,this.distanceToModelLineEnd=r,this._visibleTextAreaBrand=void 0,this.startPosition=null,this.endPosition=null,this.visibleTextareaStart=null,this.visibleTextareaEnd=null,this._previousPresentation=null}prepareRender(e){const t=new pe(this.modelLineNumber,this.distanceToModelLineStart+1),i=new pe(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=e.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=e.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)}definePresentation(e){return this._previousPresentation||(e?this._previousPresentation=e:this._previousPresentation={foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation}}const iR=ua;let O3=class extends vo{constructor(e,t,i,s,r){super(e),this._keybindingService=s,this._instantiationService=r,this._primaryCursorPosition=new pe(1,1),this._primaryCursorVisibleRange=null,this._viewController=t,this._visibleRangeProvider=i,this._scrollLeft=0,this._scrollTop=0;const o=this._context.configuration.options,a=o.get(145);this._setAccessibilityOptions(o),this._contentLeft=a.contentLeft,this._contentWidth=a.contentWidth,this._contentHeight=a.height,this._fontInfo=o.get(50),this._lineHeight=o.get(67),this._emptySelectionClipboard=o.get(37),this._copyWithSyntaxHighlighting=o.get(25),this._visibleTextArea=null,this._selections=[new Ii(1,1,1,1)],this._modelSelections=[new Ii(1,1,1,1)],this._lastRenderPosition=null,this.textArea=di(document.createElement("textarea")),Al.write(this.textArea,7),this.textArea.setClassName(`inputarea ${Np}`),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:l}=this._context.viewModel.model.getOptions();this.textArea.domNode.style.tabSize=`${l*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(o)),this.textArea.setAttribute("aria-required",o.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(o.get(124))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",L("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-autocomplete",o.get(91)?"none":"both"),this._ensureReadOnlyAttribute(),this.textAreaCover=di(document.createElement("div")),this.textAreaCover.setPosition("absolute");const c={getLineCount:()=>this._context.viewModel.getLineCount(),getLineMaxColumn:h=>this._context.viewModel.getLineMaxColumn(h),getValueInRange:(h,f)=>this._context.viewModel.getValueInRange(h,f),getValueLengthInRange:(h,f)=>this._context.viewModel.getValueLengthInRange(h,f),modifyPosition:(h,f)=>this._context.viewModel.modifyPosition(h,f)},d={getDataToCopy:()=>{const h=this._context.viewModel.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,Mr),f=this._context.viewModel.model.getEOL(),g=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),m=Array.isArray(h)?h:null,p=Array.isArray(h)?h.join(f):h;let b,w=null;if(W3.forceCopyWithSyntaxHighlighting||this._copyWithSyntaxHighlighting&&p.length<65536){const v=this._context.viewModel.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);v&&(b=v.html,w=v.mode)}return{isFromEmptySelection:g,multicursorText:m,text:p,html:b,mode:w}},getScreenReaderContent:()=>{if(this._accessibilitySupport===1){const h=this._selections[0];if(jt&&h.isEmpty()){const g=h.getStartPosition();let m=this._getWordBeforePosition(g);if(m.length===0&&(m=this._getCharacterBeforePosition(g)),m.length>0)return new Ts(m,m.length,m.length,te.fromPositions(g),0)}if(jt&&!h.isEmpty()&&c.getValueLengthInRange(h,0)<500){const g=c.getValueInRange(h,0);return new Ts(g,0,g.length,h,0)}if($d&&!h.isEmpty()){const g="vscode-placeholder";return new Ts(g,0,g.length,null,void 0)}return Ts.EMPTY}if(Xz){const h=this._selections[0];if(h.isEmpty()){const f=h.getStartPosition(),[g,m]=this._getAndroidWordAtPosition(f);if(g.length>0)return new Ts(g,m,m,te.fromPositions(f),0)}return Ts.EMPTY}return gp.fromEditorSelection(c,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(h,f,g)=>this._context.viewModel.deduceModelPositionRelativeToViewPosition(h,f,g)},u=this._register(new CFe(this.textArea.domNode));this._textAreaInput=this._register(this._instantiationService.createInstance(A3,d,u,Ma,{isAndroid:Xz,isChrome:dw,isFirefox:ua,isSafari:$d})),this._register(this._textAreaInput.onKeyDown(h=>{this._viewController.emitKeyDown(h)})),this._register(this._textAreaInput.onKeyUp(h=>{this._viewController.emitKeyUp(h)})),this._register(this._textAreaInput.onPaste(h=>{let f=!1,g=null,m=null;h.metadata&&(f=this._emptySelectionClipboard&&!!h.metadata.isFromEmptySelection,g=typeof h.metadata.multicursorText<"u"?h.metadata.multicursorText:null,m=h.metadata.mode),this._viewController.paste(h.text,f,g,m)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(h=>{h.replacePrevCharCnt||h.replaceNextCharCnt||h.positionDelta?this._viewController.compositionType(h.text,h.replacePrevCharCnt,h.replaceNextCharCnt,h.positionDelta):this._viewController.type(h.text)})),this._register(this._textAreaInput.onSelectionChangeRequest(h=>{this._viewController.setSelection(h)})),this._register(this._textAreaInput.onCompositionStart(h=>{const f=this.textArea.domNode,g=this._modelSelections[0],{distanceToModelLineStart:m,widthOfHiddenTextBefore:p}=(()=>{const w=f.value.substring(0,Math.min(f.selectionStart,f.selectionEnd)),v=w.lastIndexOf(`
`),_=w.substring(v+1),y=_.lastIndexOf("	"),C=_.length-y-1,S=g.getStartPosition(),k=Math.min(S.column-1,C),I=S.column-1-k,T=_.substring(0,_.length-k),{tabSize:D}=this._context.viewModel.model.getOptions(),M=p4e(this.textArea.domNode.ownerDocument,T,this._fontInfo,D);return{distanceToModelLineStart:I,widthOfHiddenTextBefore:M}})(),{distanceToModelLineEnd:b}=(()=>{const w=f.value.substring(Math.max(f.selectionStart,f.selectionEnd)),v=w.indexOf(`
`),_=v===-1?w:w.substring(0,v),y=_.indexOf("	"),C=y===-1?_.length:_.length-y-1,S=g.getEndPosition(),k=Math.min(this._context.viewModel.model.getLineMaxColumn(S.lineNumber)-S.column,C);return{distanceToModelLineEnd:this._context.viewModel.model.getLineMaxColumn(S.lineNumber)-S.column-k}})();this._context.viewModel.revealRange("keyboard",!0,te.fromPositions(this._selections[0].getStartPosition()),0,1),this._visibleTextArea=new m4e(this._context,g.startLineNumber,m,p,b),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render(),this.textArea.setClassName(`inputarea ${Np} ime-input`),this._viewController.compositionStart(),this._context.viewModel.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(h=>{this._visibleTextArea&&(this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._render(),this.textArea.setClassName(`inputarea ${Np}`),this._viewController.compositionEnd(),this._context.viewModel.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.viewModel.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.viewModel.setHasFocus(!1)})),this._register(e_.onDidChange(()=>{this._ensureReadOnlyAttribute()}))}writeScreenReaderContent(e){this._textAreaInput.writeNativeTextAreaContent(e)}dispose(){super.dispose()}_getAndroidWordAtPosition(e){const t='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',i=this._context.viewModel.getLineContent(e.lineNumber),s=Db(t,[]);let r=!0,o=e.column,a=!0,l=e.column,c=0;for(;c<50&&(r||a);){if(r&&o<=1&&(r=!1),r){const d=i.charCodeAt(o-2);s.get(d)!==0?r=!1:o--}if(a&&l>i.length&&(a=!1),a){const d=i.charCodeAt(l-1);s.get(d)!==0?a=!1:l++}c++}return[i.substring(o-1,l-1),e.column-o]}_getWordBeforePosition(e){const t=this._context.viewModel.getLineContent(e.lineNumber),i=Db(this._context.configuration.options.get(131),[]);let s=e.column,r=0;for(;s>1;){const o=t.charCodeAt(s-2);if(i.get(o)!==0||r>50)return t.substring(s-1,e.column-1);r++,s--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){const i=this._context.viewModel.getLineContent(e.lineNumber).charAt(e.column-2);if(!gs(i.charCodeAt(0)))return i}return""}_getAriaLabel(e){var t,i,s;if(e.get(2)===1){const o=(t=this._keybindingService.lookupKeybinding("editor.action.toggleScreenReaderAccessibilityMode"))===null||t===void 0?void 0:t.getAriaLabel(),a=(i=this._keybindingService.lookupKeybinding("workbench.action.showCommands"))===null||i===void 0?void 0:i.getAriaLabel(),l=(s=this._keybindingService.lookupKeybinding("workbench.action.openGlobalKeybindings"))===null||s===void 0?void 0:s.getAriaLabel(),c=L("accessibilityModeOff","The editor is not accessible at this time.");return o?L("accessibilityOffAriaLabel","{0} To enable screen reader optimized mode, use {1}",c,o):a?L("accessibilityOffAriaLabelNoKb","{0} To enable screen reader optimized mode, open the quick pick with {1} and run the command Toggle Screen Reader Accessibility Mode, which is currently not triggerable via keyboard.",c,a):l?L("accessibilityOffAriaLabelNoKbs","{0} Please assign a keybinding for the command Toggle Screen Reader Accessibility Mode by accessing the keybindings editor with {1} and run it.",c,l):c}return e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);const t=e.get(3);this._accessibilitySupport===2&&t===hm.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t;const s=e.get(145).wrappingColumn;if(s!==-1&&this._accessibilitySupport!==1){const r=e.get(50);this._textAreaWrapping=!0,this._textAreaWidth=Math.round(s*r.typicalHalfwidthCharacterWidth)}else this._textAreaWrapping=!1,this._textAreaWidth=iR?0:1}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(145);this._setAccessibilityOptions(t),this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._contentHeight=i.height,this._fontInfo=t.get(50),this._lineHeight=t.get(67),this._emptySelectionClipboard=t.get(37),this._copyWithSyntaxHighlighting=t.get(25),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:s}=this._context.viewModel.model.getOptions();return this.textArea.domNode.style.tabSize=`${s*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("aria-required",t.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(t.get(124))),(e.hasChanged(34)||e.hasChanged(91))&&this._ensureReadOnlyAttribute(),e.hasChanged(2)&&this._textAreaInput.writeNativeTextAreaContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeNativeTextAreaContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}_ensureReadOnlyAttribute(){const e=this._context.configuration.options;!e_.enabled||e.get(34)&&e.get(91)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")}prepareRender(e){var t;this._primaryCursorPosition=new pe(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition),(t=this._visibleTextArea)===null||t===void 0||t.prepareRender(e)}render(e){this._textAreaInput.writeNativeTextAreaContent("render"),this._render()}_render(){var e;if(this._visibleTextArea){const s=this._visibleTextArea.visibleTextareaStart,r=this._visibleTextArea.visibleTextareaEnd,o=this._visibleTextArea.startPosition,a=this._visibleTextArea.endPosition;if(o&&a&&s&&r&&r.left>=this._scrollLeft&&s.left<=this._scrollLeft+this._contentWidth){const l=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,c=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));let d=this._visibleTextArea.widthOfHiddenLineTextBefore,u=this._contentLeft+s.left-this._scrollLeft,h=r.left-s.left+1;if(u<this._contentLeft){const w=this._contentLeft-u;u+=w,d+=w,h-=w}h>this._contentWidth&&(h=this._contentWidth);const f=this._context.viewModel.getViewLineData(o.lineNumber),g=f.tokens.findTokenIndexAtOffset(o.column-1),m=f.tokens.findTokenIndexAtOffset(a.column-1),p=g===m,b=this._visibleTextArea.definePresentation(p?f.tokens.getPresentation(g):null);this.textArea.domNode.scrollTop=c*this._lineHeight,this.textArea.domNode.scrollLeft=d,this._doRender({lastRenderPosition:null,top:l,left:u,width:h,height:this._lineHeight,useCover:!1,color:(Zn.getColorMap()||[])[b.foreground],italic:b.italic,bold:b.bold,underline:b.underline,strikethrough:b.strikethrough})}return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}const t=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(t<this._contentLeft||t>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}const i=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(i<0||i>this._contentHeight){this._renderAtTopLeft();return}if(jt||this._accessibilitySupport===2){this._doRender({lastRenderPosition:this._primaryCursorPosition,top:i,left:this._textAreaWrapping?this._contentLeft:t,width:this._textAreaWidth,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;const s=(e=this._textAreaInput.textAreaState.newlineCountBeforeSelection)!==null&&e!==void 0?e:this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=s*this._lineHeight;return}this._doRender({lastRenderPosition:this._primaryCursorPosition,top:i,left:this._textAreaWrapping?this._contentLeft:t,width:this._textAreaWidth,height:iR?0:1,useCover:!1})}_newlinecount(e){let t=0,i=-1;do{if(i=e.indexOf(`
`,i+1),i===-1)break;t++}while(!0);return t}_renderAtTopLeft(){this._doRender({lastRenderPosition:null,top:0,left:0,width:this._textAreaWidth,height:iR?0:1,useCover:!0})}_doRender(e){this._lastRenderPosition=e.lastRenderPosition;const t=this.textArea,i=this.textAreaCover;$s(t,this._fontInfo),t.setTop(e.top),t.setLeft(e.left),t.setWidth(e.width),t.setHeight(e.height),t.setColor(e.color?Ce.Format.CSS.formatHex(e.color):""),t.setFontStyle(e.italic?"italic":""),e.bold&&t.setFontWeight("bold"),t.setTextDecoration(`${e.underline?" underline":""}${e.strikethrough?" line-through":""}`),i.setTop(e.useCover?e.top:0),i.setLeft(e.useCover?e.left:0),i.setWidth(e.useCover?e.width:0),i.setHeight(e.useCover?e.height:0);const s=this._context.configuration.options;s.get(57)?i.setClassName("monaco-editor-background textAreaCover "+Ag.OUTER_CLASS_NAME):s.get(68).renderType!==0?i.setClassName("monaco-editor-background textAreaCover "+Lw.CLASS_NAME):i.setClassName("monaco-editor-background textAreaCover")}};O3=g4e([CU(3,Ls),CU(4,Si)],O3);function p4e(n,e,t,i){if(e.length===0)return 0;const s=n.createElement("div");s.style.position="absolute",s.style.top="-50000px",s.style.width="50000px";const r=n.createElement("span");$s(r,t),r.style.whiteSpace="pre",r.style.tabSize=`${i*t.spaceWidth}px`,r.append(e),s.appendChild(r),n.body.appendChild(s);const o=r.offsetWidth;return n.body.removeChild(s),o}class b4e{constructor(e,t,i,s){this.configuration=e,this.viewModel=t,this.userInputEvents=i,this.commandDelegate=s}paste(e,t,i,s){this.commandDelegate.paste(e,t,i,s)}type(e){this.commandDelegate.type(e)}compositionType(e,t,i,s){this.commandDelegate.compositionType(e,t,i,s)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){ds.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new pe(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(78)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(78)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const t=this.configuration.options,i=Er&&t.get(107),s=t.get(22);e.middleButton&&!i?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position,e.revealType):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount>=4?this._selectAll():e.mouseDownCount===3?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position,e.revealType):this._lastCursorLineSelect(e.position,e.revealType):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount===2?e.onInjectedText||(this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position,e.revealType):e.inSelectionMode?this._wordSelectDrag(e.position,e.revealType):this._wordSelect(e.position,e.revealType)):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position,e.revealType):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey?this._columnSelect(e.position,e.mouseColumn,!0):s?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position,e.revealType):this.moveTo(e.position,e.revealType)}_usualArgs(e,t){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,revealType:t}}moveTo(e,t){ds.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_moveToSelect(e,t){ds.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_columnSelect(e,t,i){e=this._validateViewColumn(e),ds.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:i})}_createCursor(e,t){e=this._validateViewColumn(e),ds.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e,t){ds.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelect(e,t){ds.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelectDrag(e,t){ds.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorWordSelect(e,t){ds.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelect(e,t){ds.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelectDrag(e,t){ds.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelect(e,t){ds.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelectDrag(e,t){ds.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_selectAll(){ds.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}function mm(n,e){var t;const i=globalThis.MonacoEnvironment;if(i?.createTrustedTypesPolicy)try{return i.createTrustedTypesPolicy(n,e)}catch(s){gi(s);return}try{return(t=Di.trustedTypes)===null||t===void 0?void 0:t.createPolicy(n,e)}catch(s){gi(s);return}}class Une{constructor(e){this._createLine=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new Ai("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(this.getCount()===0)return null;const i=this.getStartLineNumber(),s=this.getEndLineNumber();if(t<i){const l=t-e+1;return this._rendLineNumberStart-=l,null}if(e>s)return null;let r=0,o=0;for(let l=i;l<=s;l++){const c=l-this._rendLineNumberStart;e<=l&&l<=t&&(o===0?(r=c,o=1):o++)}if(e<i){let l=0;t<i?l=t-e+1:l=i-e,this._rendLineNumberStart-=l}return this._lines.splice(r,o)}onLinesChanged(e,t){const i=e+t-1;if(this.getCount()===0)return!1;const s=this.getStartLineNumber(),r=this.getEndLineNumber();let o=!1;for(let a=e;a<=i;a++)a>=s&&a<=r&&(this._lines[a-this._rendLineNumberStart].onContentChanged(),o=!0);return o}onLinesInserted(e,t){if(this.getCount()===0)return null;const i=t-e+1,s=this.getStartLineNumber(),r=this.getEndLineNumber();if(e<=s)return this._rendLineNumberStart+=i,null;if(e>r)return null;if(i+e>r)return this._lines.splice(e-this._rendLineNumberStart,r-e+1);const o=[];for(let u=0;u<i;u++)o[u]=this._createLine();const a=e-this._rendLineNumberStart,l=this._lines.slice(0,a),c=this._lines.slice(a,this._lines.length-i),d=this._lines.slice(this._lines.length-i,this._lines.length);return this._lines=l.concat(o).concat(c),d}onTokensChanged(e){if(this.getCount()===0)return!1;const t=this.getStartLineNumber(),i=this.getEndLineNumber();let s=!1;for(let r=0,o=e.length;r<o;r++){const a=e[r];if(a.toLineNumber<t||a.fromLineNumber>i)continue;const l=Math.max(t,a.fromLineNumber),c=Math.min(i,a.toLineNumber);for(let d=l;d<=c;d++){const u=d-this._rendLineNumberStart;this._lines[u].onTokensChanged(),s=!0}}return s}}class Yne{constructor(e){this._host=e,this.domNode=this._createDomNode(),this._linesCollection=new Une(()=>this._host.createVisibleLine())}_createDomNode(){const e=di(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(145)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){const t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let i=0,s=t.length;i<s;i++){const r=t[i].getDomNode();r&&this.domNode.domNode.removeChild(r)}return!0}onLinesInserted(e){const t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let i=0,s=t.length;i<s;i++){const r=t[i].getDomNode();r&&this.domNode.domNode.removeChild(r)}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const t=this._linesCollection._get(),i=new pd(this.domNode.domNode,this._host,e),s={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},r=i.render(s,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(r.rendLineNumberStart,r.lines)}}class pd{constructor(e,t,i){this.domNode=e,this.host=t,this.viewportData=i}render(e,t,i,s){const r={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(r.rendLineNumberStart+r.linesLength-1<t||i<r.rendLineNumberStart){r.rendLineNumberStart=t,r.linesLength=i-t+1,r.lines=[];for(let o=t;o<=i;o++)r.lines[o-t]=this.host.createVisibleLine();return this._finishRendering(r,!0,s),r}if(this._renderUntouchedLines(r,Math.max(t-r.rendLineNumberStart,0),Math.min(i-r.rendLineNumberStart,r.linesLength-1),s,t),r.rendLineNumberStart>t){const o=t,a=Math.min(i,r.rendLineNumberStart-1);o<=a&&(this._insertLinesBefore(r,o,a,s,t),r.linesLength+=a-o+1)}else if(r.rendLineNumberStart<t){const o=Math.min(r.linesLength,t-r.rendLineNumberStart);o>0&&(this._removeLinesBefore(r,o),r.linesLength-=o)}if(r.rendLineNumberStart=t,r.rendLineNumberStart+r.linesLength-1<i){const o=r.rendLineNumberStart+r.linesLength,a=i;o<=a&&(this._insertLinesAfter(r,o,a,s,t),r.linesLength+=a-o+1)}else if(r.rendLineNumberStart+r.linesLength-1>i){const o=Math.max(0,i-r.rendLineNumberStart+1),l=r.linesLength-1-o+1;l>0&&(this._removeLinesAfter(r,l),r.linesLength-=l)}return this._finishRendering(r,!1,s),r}_renderUntouchedLines(e,t,i,s,r){const o=e.rendLineNumberStart,a=e.lines;for(let l=t;l<=i;l++){const c=o+l;a[l].layoutLine(c,s[c-r],this.viewportData.lineHeight)}}_insertLinesBefore(e,t,i,s,r){const o=[];let a=0;for(let l=t;l<=i;l++)o[a++]=this.host.createVisibleLine();e.lines=o.concat(e.lines)}_removeLinesBefore(e,t){for(let i=0;i<t;i++){const s=e.lines[i].getDomNode();s&&this.domNode.removeChild(s)}e.lines.splice(0,t)}_insertLinesAfter(e,t,i,s,r){const o=[];let a=0;for(let l=t;l<=i;l++)o[a++]=this.host.createVisibleLine();e.lines=e.lines.concat(o)}_removeLinesAfter(e,t){const i=e.linesLength-t;for(let s=0;s<t;s++){const r=e.lines[i+s].getDomNode();r&&this.domNode.removeChild(r)}e.lines.splice(i,t)}_finishRenderingNewLines(e,t,i,s){pd._ttPolicy&&(i=pd._ttPolicy.createHTML(i));const r=this.domNode.lastChild;t||!r?this.domNode.innerHTML=i:r.insertAdjacentHTML("afterend",i);let o=this.domNode.lastChild;for(let a=e.linesLength-1;a>=0;a--){const l=e.lines[a];s[a]&&(l.setDomNode(o),o=o.previousSibling)}}_finishRenderingInvalidLines(e,t,i){const s=document.createElement("div");pd._ttPolicy&&(t=pd._ttPolicy.createHTML(t)),s.innerHTML=t;for(let r=0;r<e.linesLength;r++){const o=e.lines[r];if(i[r]){const a=s.firstChild,l=o.getDomNode();l.parentNode.replaceChild(a,l),o.setDomNode(a)}}}_finishRendering(e,t,i){const s=pd._sb,r=e.linesLength,o=e.lines,a=e.rendLineNumberStart,l=[];{s.reset();let c=!1;for(let d=0;d<r;d++){const u=o[d];l[d]=!1,!(u.getDomNode()||!u.renderLine(d+a,i[d],this.viewportData.lineHeight,this.viewportData,s))&&(l[d]=!0,c=!0)}c&&this._finishRenderingNewLines(e,t,s.build(),l)}{s.reset();let c=!1;const d=[];for(let u=0;u<r;u++){const h=o[u];d[u]=!1,!(l[u]||!h.renderLine(u+a,i[u],this.viewportData.lineHeight,this.viewportData,s))&&(d[u]=!0,c=!0)}c&&this._finishRenderingInvalidLines(e,s.build(),d)}}}pd._ttPolicy=mm("editorViewLayer",{createHTML:n=>n});pd._sb=new W2(1e5);class Kne extends vo{constructor(e){super(e),this._visibleLines=new Yne(this),this.domNode=this._visibleLines.domNode;const i=this._context.configuration.options.get(50);$s(this.domNode,i),this._dynamicOverlays=[],this._isFocused=!1,this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++)if(this._dynamicOverlays[e].shouldRender())return!0;return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++)this._dynamicOverlays[e].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}createVisibleLine(){return new v4e(this._dynamicOverlays)}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const i=this._context.configuration.options.get(50);return $s(this.domNode,i),!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const t=this._dynamicOverlays.filter(i=>i.shouldRender());for(let i=0,s=t.length;i<s;i++){const r=t[i];r.prepareRender(e),r.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}class v4e{constructor(e){this._dynamicOverlays=e,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=di(e)}onContentChanged(){}onTokensChanged(){}renderLine(e,t,i,s,r){let o="";for(let a=0,l=this._dynamicOverlays.length;a<l;a++){const c=this._dynamicOverlays[a];o+=c.render(s.startLineNumber,e)}return this._renderedContent===o?!1:(this._renderedContent=o,r.appendString('<div style="top:'),r.appendString(String(t)),r.appendString("px;height:"),r.appendString(String(i)),r.appendString('px;">'),r.appendString(o),r.appendString("</div>"),!0)}layoutLine(e,t,i){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(i))}}class _4e extends Kne{constructor(e){super(e);const i=this._context.configuration.options.get(145);this._contentWidth=i.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const i=this._context.configuration.options.get(145);return this._contentWidth=i.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}class w4e extends Kne{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(145);this._contentLeft=i.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),$s(this.domNode,t.get(50))}onConfigurationChanged(e){const t=this._context.configuration.options;$s(this.domNode,t.get(50));const i=t.get(145);return this._contentLeft=i.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}}class K2{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){var t;(t=this.onKeyDown)===null||t===void 0||t.call(this,e)}emitKeyUp(e){var t;(t=this.onKeyUp)===null||t===void 0||t.call(this,e)}emitContextMenu(e){var t;(t=this.onContextMenu)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseMove(e){var t;(t=this.onMouseMove)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){var t;(t=this.onMouseLeave)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDown(e){var t;(t=this.onMouseDown)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseUp(e){var t;(t=this.onMouseUp)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){var t;(t=this.onMouseDrag)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){var t;(t=this.onMouseDrop)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){var e;(e=this.onMouseDropCanceled)===null||e===void 0||e.call(this)}emitMouseWheel(e){var t;(t=this.onMouseWheel)===null||t===void 0||t.call(this,e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return K2.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){const i={...e};return i.position&&(i.position=t.convertViewPositionToModelPosition(i.position)),i.range&&(i.range=t.convertViewRangeToModelRange(i.range)),(i.type===5||i.type===8)&&(i.detail=this.convertViewToModelViewZoneData(i.detail,t)),i}static convertViewToModelViewZoneData(e,t){return{viewZoneId:e.viewZoneId,positionBefore:e.positionBefore?t.convertViewPositionToModelPosition(e.positionBefore):e.positionBefore,positionAfter:e.positionAfter?t.convertViewPositionToModelPosition(e.positionAfter):e.positionAfter,position:t.convertViewPositionToModelPosition(e.position),afterLineNumber:t.convertViewPositionToModelPosition(new pe(e.afterLineNumber,1)).lineNumber}}}class y4e extends vo{constructor(e){super(e),this.blocks=[],this.contentWidth=-1,this.contentLeft=0,this.domNode=di(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("blockDecorations-container"),this.update()}update(){let e=!1;const i=this._context.configuration.options.get(145),s=i.contentWidth-i.verticalScrollbarWidth;this.contentWidth!==s&&(this.contentWidth=s,e=!0);const r=i.contentLeft;return this.contentLeft!==r&&(this.contentLeft=r,e=!0),e}dispose(){super.dispose()}onConfigurationChanged(e){return this.update()}onScrollChanged(e){return e.scrollTopChanged||e.scrollLeftChanged}onDecorationsChanged(e){return!0}onZonesChanged(e){return!0}prepareRender(e){}render(e){var t;let i=0;const s=e.getDecorationsInViewport();for(const r of s){if(!r.options.blockClassName)continue;let o=this.blocks[i];o||(o=this.blocks[i]=di(document.createElement("div")),this.domNode.appendChild(o));let a,l;r.options.blockIsAfterEnd?(a=e.getVerticalOffsetAfterLineNumber(r.range.endLineNumber,!1),l=e.getVerticalOffsetAfterLineNumber(r.range.endLineNumber,!0)):(a=e.getVerticalOffsetForLineNumber(r.range.startLineNumber,!0),l=r.range.isEmpty()&&!r.options.blockDoesNotCollapse?e.getVerticalOffsetForLineNumber(r.range.startLineNumber,!1):e.getVerticalOffsetAfterLineNumber(r.range.endLineNumber,!0));const[c,d,u,h]=(t=r.options.blockPadding)!==null&&t!==void 0?t:[0,0,0,0];o.setClassName("blockDecorations-block "+r.options.blockClassName),o.setLeft(this.contentLeft-h),o.setWidth(this.contentWidth+h+d),o.setTop(a-e.scrollTop-c),o.setHeight(l-a+c+u),i++}for(let r=i;r<this.blocks.length;r++)this.blocks[r].domNode.remove();this.blocks.length=i}}class S4e extends vo{constructor(e,t){super(e),this._viewDomNode=t,this._widgets={},this.domNode=di(document.createElement("div")),Al.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=di(document.createElement("div")),Al.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesDeleted(e){return this._updateAnchorsViewPositions(),!0}onLinesInserted(e){return this._updateAnchorsViewPositions(),!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}_updateAnchorsViewPositions(){const e=Object.keys(this._widgets);for(const t of e)this._widgets[t].updateAnchorViewPosition()}addWidget(e){const t=new C4e(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,i,s,r){this._widgets[e.getId()].setPosition(t,i,s,r),this.setShouldRender()}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const i=this._widgets[t];delete this._widgets[t];const s=i.domNode.domNode;s.parentNode.removeChild(s),s.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return this._widgets.hasOwnProperty(e)?this._widgets[e].suppressMouseDown:!1}onBeforeRender(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].onBeforeRender(e)}prepareRender(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].prepareRender(e)}render(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].render(e)}}class C4e{constructor(e,t,i){this._primaryAnchor=new J0(null,null),this._secondaryAnchor=new J0(null,null),this._context=e,this._viewDomNode=t,this._actual=i,this.domNode=di(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const s=this._context.configuration.options,r=s.get(145);this._fixedOverflowWidgets=s.get(42),this._contentWidth=r.contentWidth,this._contentLeft=r.contentLeft,this._lineHeight=s.get(67),this._affinity=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){const t=this._context.configuration.options;if(this._lineHeight=t.get(67),e.hasChanged(145)){const i=t.get(145);this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._maxWidth=this._getMaxWidth()}}updateAnchorViewPosition(){this._setPosition(this._affinity,this._primaryAnchor.modelPosition,this._secondaryAnchor.modelPosition)}_setPosition(e,t,i){this._affinity=e,this._primaryAnchor=s(t,this._context.viewModel,this._affinity),this._secondaryAnchor=s(i,this._context.viewModel,this._affinity);function s(r,o,a){if(!r)return new J0(null,null);const l=o.model.validatePosition(r);if(o.coordinatesConverter.modelPositionIsVisible(l)){const c=o.coordinatesConverter.convertModelPositionToViewPosition(l,a??void 0);return new J0(r,c)}return new J0(r,null)}}_getMaxWidth(){const e=this.domNode.domNode.ownerDocument,t=e.defaultView;return this.allowEditorOverflow?t?.innerWidth||e.documentElement.offsetWidth||e.body.offsetWidth:this._contentWidth}setPosition(e,t,i,s){this._setPosition(s,e,t),this._preference=i,this._primaryAnchor.viewPosition&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}_layoutBoxInViewport(e,t,i,s){const r=e.top,o=r,a=e.top+e.height,l=s.viewportHeight-a,c=r-i,d=o>=i,u=a,h=l>=i;let f=e.left;return f+t>s.scrollLeft+s.viewportWidth&&(f=s.scrollLeft+s.viewportWidth-t),f<s.scrollLeft&&(f=s.scrollLeft),{fitsAbove:d,aboveTop:c,fitsBelow:h,belowTop:u,left:f}}_layoutHorizontalSegmentInPage(e,t,i,s){var r;const l=Math.max(15,t.left-s),c=Math.min(t.left+t.width+s,e.width-15),u=this._viewDomNode.domNode.ownerDocument.defaultView;let h=t.left+i-((r=u?.scrollX)!==null&&r!==void 0?r:0);if(h+s>c){const f=h-(c-s);h-=f,i-=f}if(h<l){const f=h-l;h-=f,i-=f}return[i,h]}_layoutBoxInPage(e,t,i,s){var r,o;const a=e.top-i,l=e.top+e.height,c=ho(this._viewDomNode.domNode),d=this._viewDomNode.domNode.ownerDocument,u=d.defaultView,h=c.top+a-((r=u?.scrollY)!==null&&r!==void 0?r:0),f=c.top+l-((o=u?.scrollY)!==null&&o!==void 0?o:0),g=sL(d.body),[m,p]=this._layoutHorizontalSegmentInPage(g,c,e.left-s.scrollLeft+this._contentLeft,t),b=22,w=22,v=h>=b,_=f+i<=g.height-w;return this._fixedOverflowWidgets?{fitsAbove:v,aboveTop:Math.max(h,b),fitsBelow:_,belowTop:f,left:p}:{fitsAbove:v,aboveTop:a,fitsBelow:_,belowTop:l,left:m}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new $0(e.top,e.left+this._contentLeft)}_getAnchorsCoordinates(e){var t,i;const s=a(this._primaryAnchor.viewPosition,this._affinity,this._lineHeight),r=((t=this._secondaryAnchor.viewPosition)===null||t===void 0?void 0:t.lineNumber)===((i=this._primaryAnchor.viewPosition)===null||i===void 0?void 0:i.lineNumber)?this._secondaryAnchor.viewPosition:null,o=a(r,this._affinity,this._lineHeight);return{primary:s,secondary:o};function a(l,c,d){if(!l)return null;const u=e.visibleRangeForPosition(l);if(!u)return null;const h=l.column===1&&c===3?0:u.left,f=e.getVerticalOffsetForLineNumber(l.lineNumber)-e.scrollTop;return new LU(f,h,d)}}_reduceAnchorCoordinates(e,t,i){if(!t)return e;const s=this._context.configuration.options.get(50);let r=t.left;return r<e.left?r=Math.max(r,e.left-i+s.typicalFullwidthCharacterWidth):r=Math.min(r,e.left+i-s.typicalFullwidthCharacterWidth),new LU(e.top,r,e.height)}_prepareRenderWidget(e){if(!this._preference||this._preference.length===0)return null;const{primary:t,secondary:i}=this._getAnchorsCoordinates(e);if(!t)return{kind:"offViewport",preserveFocus:this.domNode.domNode.contains(this.domNode.domNode.ownerDocument.activeElement)};if(this._cachedDomNodeOffsetWidth===-1||this._cachedDomNodeOffsetHeight===-1){let o=null;if(typeof this._actual.beforeRender=="function"&&(o=nR(this._actual.beforeRender,this._actual)),o)this._cachedDomNodeOffsetWidth=o.width,this._cachedDomNodeOffsetHeight=o.height;else{const l=this.domNode.domNode.getBoundingClientRect();this._cachedDomNodeOffsetWidth=Math.round(l.width),this._cachedDomNodeOffsetHeight=Math.round(l.height)}}const s=this._reduceAnchorCoordinates(t,i,this._cachedDomNodeOffsetWidth);let r;this.allowEditorOverflow?r=this._layoutBoxInPage(s,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e):r=this._layoutBoxInViewport(s,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e);for(let o=1;o<=2;o++)for(const a of this._preference)if(a===1){if(!r)return null;if(o===2||r.fitsAbove)return{kind:"inViewport",coordinate:new $0(r.aboveTop,r.left),position:1}}else if(a===2){if(!r)return null;if(o===2||r.fitsBelow)return{kind:"inViewport",coordinate:new $0(r.belowTop,r.left),position:2}}else return this.allowEditorOverflow?{kind:"inViewport",coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(new $0(s.top,s.left)),position:0}:{kind:"inViewport",coordinate:new $0(s.top,s.left),position:0};return null}onBeforeRender(e){!this._primaryAnchor.viewPosition||!this._preference||this._primaryAnchor.viewPosition.lineNumber<e.startLineNumber||this._primaryAnchor.viewPosition.lineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){var t;if(!this._renderData||this._renderData.kind==="offViewport"){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,((t=this._renderData)===null||t===void 0?void 0:t.kind)==="offViewport"&&this._renderData.preserveFocus?this.domNode.setTop(-1e3):this.domNode.setVisibility("hidden")),typeof this._actual.afterRender=="function"&&nR(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&nR(this._actual.afterRender,this._actual,this._renderData.position)}}class J0{constructor(e,t){this.modelPosition=e,this.viewPosition=t}}class $0{constructor(e,t){this.top=e,this.left=t,this._coordinateBrand=void 0}}class LU{constructor(e,t,i){this.top=e,this.left=t,this.height=i,this._anchorCoordinateBrand=void 0}}function nR(n,e,...t){try{return n.call(e,...t)}catch{return null}}class jne extends gm{constructor(e){super(),this._context=e;const t=this._context.configuration.options,i=t.get(145);this._renderLineHighlight=t.get(96),this._renderLineHighlightOnlyWhenFocus=t.get(97),this._wordWrap=i.isViewportWrapping,this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new Ii(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1;const t=new Set;for(const r of this._selections)t.add(r.positionLineNumber);const i=Array.from(t);i.sort((r,o)=>r-o),Gs(this._cursorLineNumbers,i)||(this._cursorLineNumbers=i,e=!0);const s=this._selections.every(r=>r.isEmpty());return this._selectionIsEmpty!==s&&(this._selectionIsEmpty=s,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(145);return this._renderLineHighlight=t.get(96),this._renderLineHighlightOnlyWhenFocus=t.get(97),this._wordWrap=i.isViewportWrapping,this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return this._renderLineHighlightOnlyWhenFocus?(this._focused=e.isFocused,!0):!1}prepareRender(e){if(!this._shouldRenderThis()){this._renderData=null;return}const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,s=[];for(let o=t;o<=i;o++){const a=o-t;s[a]=""}if(this._wordWrap){const o=this._renderOne(e,!1);for(const a of this._cursorLineNumbers){const l=this._context.viewModel.coordinatesConverter,c=l.convertViewPositionToModelPosition(new pe(a,1)).lineNumber,d=l.convertModelPositionToViewPosition(new pe(c,1)).lineNumber,u=l.convertModelPositionToViewPosition(new pe(c,this._context.viewModel.model.getLineMaxColumn(c))).lineNumber,h=Math.max(d,t),f=Math.min(u,i);for(let g=h;g<=f;g++){const m=g-t;s[m]=o}}}const r=this._renderOne(e,!0);for(const o of this._cursorLineNumbers){if(o<t||o>i)continue;const a=o-t;s[a]=r}this._renderData=s}render(e,t){if(!this._renderData)return"";const i=t-e;return i>=this._renderData.length?"":this._renderData[i]}_shouldRenderInMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderInContent(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}class L4e extends jne{_renderOne(e,t){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-both":"")+(t?" current-line-exact":"")}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px;"></div>`}_shouldRenderThis(){return this._shouldRenderInContent()}_shouldRenderOther(){return this._shouldRenderInMargin()}}class k4e extends jne{_renderOne(e,t){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")+(this._shouldRenderInMargin()&&t?" current-line-exact-margin":"")}" style="width:${this._contentLeft}px"></div>`}_shouldRenderThis(){return!0}_shouldRenderOther(){return this._shouldRenderInContent()}}zl((n,e)=>{const t=n.getColor(Vne);if(t&&(e.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${t}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${t}; border: none; }`)),!t||t.isTransparent()||n.defines(fU)){const i=n.getColor(fU);i&&(e.addRule(`.monaco-editor .view-overlays .current-line-exact { border: 2px solid ${i}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-exact-margin { border: 2px solid ${i}; }`),yh(n.type)&&(e.addRule(".monaco-editor .view-overlays .current-line-exact { border-width: 1px; }"),e.addRule(".monaco-editor .margin-view-overlays .current-line-exact-margin { border-width: 1px; }")))}});class x4e extends gm{constructor(e){super(),this._context=e;const t=this._context.configuration.options;this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){const t=e.getDecorationsInViewport();let i=[],s=0;for(let l=0,c=t.length;l<c;l++){const d=t[l];d.options.className&&(i[s++]=d)}i=i.sort((l,c)=>{if(l.options.zIndex<c.options.zIndex)return-1;if(l.options.zIndex>c.options.zIndex)return 1;const d=l.options.className,u=c.options.className;return d<u?-1:d>u?1:te.compareRangesUsingStarts(l.range,c.range)});const r=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber,a=[];for(let l=r;l<=o;l++){const c=l-r;a[c]=""}this._renderWholeLineDecorations(e,i,a),this._renderNormalDecorations(e,i,a),this._renderResult=a}_renderWholeLineDecorations(e,t,i){const s=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber;for(let o=0,a=t.length;o<a;o++){const l=t[o];if(!l.options.isWholeLine)continue;const c='<div class="cdr '+l.options.className+'" style="left:0;width:100%;"></div>',d=Math.max(l.range.startLineNumber,s),u=Math.min(l.range.endLineNumber,r);for(let h=d;h<=u;h++){const f=h-s;i[f]+=c}}}_renderNormalDecorations(e,t,i){var s;const r=e.visibleRange.startLineNumber;let o=null,a=!1,l=null,c=!1;for(let d=0,u=t.length;d<u;d++){const h=t[d];if(h.options.isWholeLine)continue;const f=h.options.className,g=!!h.options.showIfCollapsed;let m=h.range;if(g&&m.endColumn===1&&m.endLineNumber!==m.startLineNumber&&(m=new te(m.startLineNumber,m.startColumn,m.endLineNumber-1,this._context.viewModel.getLineMaxColumn(m.endLineNumber-1))),o===f&&a===g&&te.areIntersectingOrTouching(l,m)){l=te.plusRange(l,m);continue}o!==null&&this._renderNormalDecoration(e,l,o,c,a,r,i),o=f,a=g,l=m,c=(s=h.options.shouldFillLineOnLineBreak)!==null&&s!==void 0?s:!1}o!==null&&this._renderNormalDecoration(e,l,o,c,a,r,i)}_renderNormalDecoration(e,t,i,s,r,o,a){const l=e.linesVisibleRangesForRange(t,i==="findMatch");if(l)for(let c=0,d=l.length;c<d;c++){const u=l[c];if(u.outsideRenderedLine)continue;const h=u.lineNumber-o;if(r&&u.ranges.length===1){const f=u.ranges[0];if(f.width<this._typicalHalfwidthCharacterWidth){const g=Math.round(f.left+f.width/2),m=Math.max(0,Math.round(g-this._typicalHalfwidthCharacterWidth/2));u.ranges[0]=new B2(m,this._typicalHalfwidthCharacterWidth)}}for(let f=0,g=u.ranges.length;f<g;f++){const m=s&&u.continuesOnNextLine&&g===1,p=u.ranges[f],b='<div class="cdr '+i+'" style="left:'+String(p.left)+"px;width:"+(m?"100%;":String(p.width)+"px;")+'"></div>';a[h]+=b}}}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}class T4e extends vo{constructor(e,t,i,s){super(e);const r=this._context.configuration.options,o=r.get(103),a=r.get(75),l=r.get(40),c=r.get(106),d={listenOnDomNode:i.domNode,className:"editor-scrollable "+V3(e.theme.type),useShadows:!1,lazyRender:!0,vertical:o.vertical,horizontal:o.horizontal,verticalHasArrows:o.verticalHasArrows,horizontalHasArrows:o.horizontalHasArrows,verticalScrollbarSize:o.verticalScrollbarSize,verticalSliderSize:o.verticalSliderSize,horizontalScrollbarSize:o.horizontalScrollbarSize,horizontalSliderSize:o.horizontalSliderSize,handleMouseWheel:o.handleMouseWheel,alwaysConsumeMouseWheel:o.alwaysConsumeMouseWheel,arrowSize:o.arrowSize,mouseWheelScrollSensitivity:a,fastScrollSensitivity:l,scrollPredominantAxis:c,scrollByPage:o.scrollByPage};this.scrollbar=this._register(new H2(t.domNode,d,this._context.viewLayout.getScrollable())),Al.write(this.scrollbar.getDomNode(),6),this.scrollbarDomNode=di(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const u=(h,f,g)=>{const m={};if(f){const p=h.scrollTop;p&&(m.scrollTop=this._context.viewLayout.getCurrentScrollTop()+p,h.scrollTop=0)}if(g){const p=h.scrollLeft;p&&(m.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+p,h.scrollLeft=0)}this._context.viewModel.viewLayout.setScrollPosition(m,1)};this._register(we(i.domNode,"scroll",h=>u(i.domNode,!0,!0))),this._register(we(t.domNode,"scroll",h=>u(t.domNode,!0,!1))),this._register(we(s.domNode,"scroll",h=>u(s.domNode,!0,!1))),this._register(we(this.scrollbarDomNode.domNode,"scroll",h=>u(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){const e=this._context.configuration.options,t=e.get(145);this.scrollbarDomNode.setLeft(t.contentLeft),e.get(73).side==="right"?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarPointerDown(e){this.scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this.scrollbar.delegateScrollFromMouseWheelEvent(e)}onConfigurationChanged(e){if(e.hasChanged(103)||e.hasChanged(75)||e.hasChanged(40)){const t=this._context.configuration.options,i=t.get(103),s=t.get(75),r=t.get(40),o=t.get(106),a={vertical:i.vertical,horizontal:i.horizontal,verticalScrollbarSize:i.verticalScrollbarSize,horizontalScrollbarSize:i.horizontalScrollbarSize,scrollByPage:i.scrollByPage,handleMouseWheel:i.handleMouseWheel,mouseWheelScrollSensitivity:s,fastScrollSensitivity:r,scrollPredominantAxis:o};this.scrollbar.updateOptions(a)}return e.hasChanged(145)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+V3(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}}var fa;(function(n){n[n.Left=1]="Left",n[n.Center=2]="Center",n[n.Right=4]="Right",n[n.Full=7]="Full"})(fa||(fa={}));var Ph;(function(n){n[n.Left=1]="Left",n[n.Center=2]="Center",n[n.Right=3]="Right"})(Ph||(Ph={}));var Fb;(function(n){n[n.Both=0]="Both",n[n.Right=1]="Right",n[n.Left=2]="Left",n[n.None=3]="None"})(Fb||(Fb={}));class YS{get originalIndentSize(){return this._indentSizeIsTabSize?"tabSize":this.indentSize}constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,e.tabSize|0),e.indentSize==="tabSize"?(this.indentSize=this.tabSize,this._indentSizeIsTabSize=!0):(this.indentSize=Math.max(1,e.indentSize|0),this._indentSizeIsTabSize=!1),this.insertSpaces=!!e.insertSpaces,this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=!!e.trimAutoWhitespace,this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this._indentSizeIsTabSize===e._indentSizeIsTabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&Ro(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}class K_{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}}function D4e(n){return n&&typeof n.read=="function"}class sR{constructor(e,t,i,s,r,o){this.identifier=e,this.range=t,this.text=i,this.forceMoveMarkers=s,this.isAutoWhitespaceEdit=r,this._isTracked=o}}class I4e{constructor(e,t,i){this.regex=e,this.wordSeparators=t,this.simpleSearch=i}}class M4e{constructor(e,t,i){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=i}}function Jne(n){return!n.isTooLargeForSyncing()&&!n.isForSimpleWidget}class Z3{constructor(e,t,i,s,r){this.startLineNumber=e,this.endLineNumber=t,this.className=i,this.tooltip=s,this._decorationToRenderBrand=void 0,this.zIndex=r??0}}class E4e{constructor(e,t,i){this.className=e,this.zIndex=t,this.tooltip=i}}class N4e{constructor(){this.decorations=[]}add(e){this.decorations.push(e)}getDecorations(){return this.decorations}}class $ne extends gm{_render(e,t,i){const s=[];for(let a=e;a<=t;a++){const l=a-e;s[l]=new N4e}if(i.length===0)return s;i.sort((a,l)=>a.className===l.className?a.startLineNumber===l.startLineNumber?a.endLineNumber-l.endLineNumber:a.startLineNumber-l.startLineNumber:a.className<l.className?-1:1);let r=null,o=0;for(let a=0,l=i.length;a<l;a++){const c=i[a],d=c.className,u=c.zIndex;let h=Math.max(c.startLineNumber,e)-e;const f=Math.min(c.endLineNumber,t)-e;r===d?(h=Math.max(o+1,h),o=Math.max(o,f)):(r=d,o=f);for(let g=h;g<=o;g++)s[g].add(new E4e(d,u,c.tooltip))}return s}}class R4e extends vo{constructor(e){super(e),this._widgets={},this._context=e;const t=this._context.configuration.options,i=t.get(145);this.domNode=di(document.createElement("div")),this.domNode.setClassName("glyph-margin-widgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this._lineHeight=t.get(67),this._glyphMargin=t.get(57),this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._glyphMarginDecorationLaneCount=i.glyphMarginDecorationLaneCount,this._managedDomNodes=[],this._decorationGlyphsToRender=[]}dispose(){this._managedDomNodes=[],this._decorationGlyphsToRender=[],this._widgets={},super.dispose()}getWidgets(){return Object.values(this._widgets)}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(145);return this._lineHeight=t.get(67),this._glyphMargin=t.get(57),this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._glyphMarginDecorationLaneCount=i.glyphMarginDecorationLaneCount,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}addWidget(e){const t=di(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:e.getPosition(),domNode:t,renderInfo:null},t.setPosition("absolute"),t.setDisplay("none"),t.setAttribute("widgetId",e.getId()),this.domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){const i=this._widgets[e.getId()];return i.preference.lane===t.lane&&i.preference.zIndex===t.zIndex&&te.equalsRange(i.preference.range,t.range)?!1:(i.preference=t,this.setShouldRender(),!0)}removeWidget(e){var t;const i=e.getId();if(this._widgets[i]){const r=this._widgets[i].domNode.domNode;delete this._widgets[i],(t=r.parentNode)===null||t===void 0||t.removeChild(r),this.setShouldRender()}}_collectDecorationBasedGlyphRenderRequest(e,t){var i,s,r;const o=e.visibleRange.startLineNumber,a=e.visibleRange.endLineNumber,l=e.getDecorationsInViewport();for(const c of l){const d=c.options.glyphMarginClassName;if(!d)continue;const u=Math.max(c.range.startLineNumber,o),h=Math.min(c.range.endLineNumber,a),f=(s=(i=c.options.glyphMargin)===null||i===void 0?void 0:i.position)!==null&&s!==void 0?s:Ph.Center,g=(r=c.options.zIndex)!==null&&r!==void 0?r:0;for(let m=u;m<=h;m++){const p=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new pe(m,0)),b=this._context.viewModel.glyphLanes.getLanesAtLine(p.lineNumber).indexOf(f);t.push(new W4e(m,b,g,d))}}}_collectWidgetBasedGlyphRenderRequest(e,t){const i=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber;for(const r of Object.values(this._widgets)){const o=r.preference.range,{startLineNumber:a,endLineNumber:l}=this._context.viewModel.coordinatesConverter.convertModelRangeToViewRange(te.lift(o));if(!a||!l||l<i||a>s)continue;const c=Math.max(a,i),d=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new pe(c,0)),u=this._context.viewModel.glyphLanes.getLanesAtLine(d.lineNumber).indexOf(r.preference.lane);t.push(new A4e(c,u,r.preference.zIndex,r))}}_collectSortedGlyphRenderRequests(e){const t=[];return this._collectDecorationBasedGlyphRenderRequest(e,t),this._collectWidgetBasedGlyphRenderRequest(e,t),t.sort((i,s)=>i.lineNumber===s.lineNumber?i.laneIndex===s.laneIndex?i.zIndex===s.zIndex?s.type===i.type?i.type===0&&s.type===0?i.className<s.className?-1:1:0:s.type-i.type:s.zIndex-i.zIndex:i.laneIndex-s.laneIndex:i.lineNumber-s.lineNumber),t}prepareRender(e){if(!this._glyphMargin){this._decorationGlyphsToRender=[];return}for(const s of Object.values(this._widgets))s.renderInfo=null;const t=new qd(this._collectSortedGlyphRenderRequests(e)),i=[];for(;t.length>0;){const s=t.peek();if(!s)break;const r=t.takeWhile(a=>a.lineNumber===s.lineNumber&&a.laneIndex===s.laneIndex);if(!r||r.length===0)break;const o=r[0];if(o.type===0){const a=[];for(const l of r){if(l.zIndex!==o.zIndex||l.type!==o.type)break;(a.length===0||a[a.length-1]!==l.className)&&a.push(l.className)}i.push(o.accept(a.join(" ")))}else o.widget.renderInfo={lineNumber:o.lineNumber,laneIndex:o.laneIndex}}this._decorationGlyphsToRender=i}render(e){if(!this._glyphMargin){for(const i of Object.values(this._widgets))i.domNode.setDisplay("none");for(;this._managedDomNodes.length>0;){const i=this._managedDomNodes.pop();i?.domNode.remove()}return}const t=Math.round(this._glyphMarginWidth/this._glyphMarginDecorationLaneCount);for(const i of Object.values(this._widgets))if(!i.renderInfo)i.domNode.setDisplay("none");else{const s=e.viewportData.relativeVerticalOffset[i.renderInfo.lineNumber-e.viewportData.startLineNumber],r=this._glyphMarginLeft+i.renderInfo.laneIndex*this._lineHeight;i.domNode.setDisplay("block"),i.domNode.setTop(s),i.domNode.setLeft(r),i.domNode.setWidth(t),i.domNode.setHeight(this._lineHeight)}for(let i=0;i<this._decorationGlyphsToRender.length;i++){const s=this._decorationGlyphsToRender[i],r=e.viewportData.relativeVerticalOffset[s.lineNumber-e.viewportData.startLineNumber],o=this._glyphMarginLeft+s.laneIndex*this._lineHeight;let a;i<this._managedDomNodes.length?a=this._managedDomNodes[i]:(a=di(document.createElement("div")),this._managedDomNodes.push(a),this.domNode.appendChild(a)),a.setClassName("cgmr codicon "+s.combinedClassName),a.setPosition("absolute"),a.setTop(r),a.setLeft(o),a.setWidth(t),a.setHeight(this._lineHeight)}for(;this._managedDomNodes.length>this._decorationGlyphsToRender.length;){const i=this._managedDomNodes.pop();i?.domNode.remove()}}}class W4e{constructor(e,t,i,s){this.lineNumber=e,this.laneIndex=t,this.zIndex=i,this.className=s,this.type=0}accept(e){return new F4e(this.lineNumber,this.laneIndex,e)}}class A4e{constructor(e,t,i,s){this.lineNumber=e,this.laneIndex=t,this.zIndex=i,this.widget=s,this.type=1}}class F4e{constructor(e,t,i){this.lineNumber=e,this.laneIndex=t,this.combinedClassName=i}}function yL(n,e){const t=V4e(n,e);if(t!==-1)return n[t]}function V4e(n,e,t=n.length-1){for(let i=t;i>=0;i--){const s=n[i];if(e(s))return i}return-1}function Vb(n,e){const t=j_(n,e);return t===-1?void 0:n[t]}function j_(n,e,t=0,i=n.length){let s=t,r=i;for(;s<r;){const o=Math.floor((s+r)/2);e(n[o])?s=o+1:r=o}return s-1}function P4e(n,e){const t=J_(n,e);return t===n.length?void 0:n[t]}function J_(n,e,t=0,i=n.length){let s=t,r=i;for(;s<r;){const o=Math.floor((s+r)/2);e(n[o])?r=o:s=o+1}return s}class kw{constructor(e){this._array=e,this._findLastMonotonousLastIdx=0}findLastMonotonous(e){if(kw.assertInvariants){if(this._prevFindLastPredicate){for(const i of this._array)if(this._prevFindLastPredicate(i)&&!e(i))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}const t=j_(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=t+1,t===-1?void 0:this._array[t]}}kw.assertInvariants=!1;function Qne(n,e){if(n.length===0)return;let t=n[0];for(let i=1;i<n.length;i++){const s=n[i];e(s,t)>0&&(t=s)}return t}function O4e(n,e){if(n.length===0)return;let t=n[0];for(let i=1;i<n.length;i++){const s=n[i];e(s,t)>=0&&(t=s)}return t}function Z4e(n,e){return Qne(n,(t,i)=>-e(t,i))}function G4e(n,e){if(n.length===0)return-1;let t=0;for(let i=1;i<n.length;i++){const s=n[i];e(s,n[t])>0&&(t=i)}return t}class qne extends Le{constructor(){super(...arguments),this._isDisposed=!1}dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}}function gP(n,e){let t=0,i=0;const s=n.length;for(;i<s;){const r=n.charCodeAt(i);if(r===32)t++;else if(r===9)t=t-t%e+e;else break;i++}return i===s?-1:t}var cg;(function(n){n[n.Disabled=0]="Disabled",n[n.EnabledForActive=1]="EnabledForActive",n[n.Enabled=2]="Enabled"})(cg||(cg={}));class Jf{constructor(e,t,i,s,r,o){if(this.visibleColumn=e,this.column=t,this.className=i,this.horizontalLine=s,this.forWrappedLinesAfterColumn=r,this.forWrappedLinesBeforeOrAtColumn=o,e!==-1==(t!==-1))throw new Error}}class t_{constructor(e,t){this.top=e,this.endColumn=t}}class B4e extends qne{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t}getLanguageConfiguration(e){return this.languageConfigurationService.getLanguageConfiguration(e)}_computeIndentLevel(e){return gP(this.textModel.getLineContent(e+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(e,t,i){this.assertNotDisposed();const s=this.textModel.getLineCount();if(e<1||e>s)throw new Ai("Illegal value for lineNumber");const r=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,o=!!(r&&r.offSide);let a=-2,l=-1,c=-2,d=-1;const u=S=>{if(a!==-1&&(a===-2||a>S-1)){a=-1,l=-1;for(let k=S-2;k>=0;k--){const I=this._computeIndentLevel(k);if(I>=0){a=k,l=I;break}}}if(c===-2){c=-1,d=-1;for(let k=S;k<s;k++){const I=this._computeIndentLevel(k);if(I>=0){c=k,d=I;break}}}};let h=-2,f=-1,g=-2,m=-1;const p=S=>{if(h===-2){h=-1,f=-1;for(let k=S-2;k>=0;k--){const I=this._computeIndentLevel(k);if(I>=0){h=k,f=I;break}}}if(g!==-1&&(g===-2||g<S-1)){g=-1,m=-1;for(let k=S;k<s;k++){const I=this._computeIndentLevel(k);if(I>=0){g=k,m=I;break}}}};let b=0,w=!0,v=0,_=!0,y=0,C=0;for(let S=0;w||_;S++){const k=e-S,I=e+S;S>1&&(k<1||k<t)&&(w=!1),S>1&&(I>s||I>i)&&(_=!1),S>5e4&&(w=!1,_=!1);let T=-1;if(w&&k>=1){const M=this._computeIndentLevel(k-1);M>=0?(c=k-1,d=M,T=Math.ceil(M/this.textModel.getOptions().indentSize)):(u(k),T=this._getIndentLevelForWhitespaceLine(o,l,d))}let D=-1;if(_&&I<=s){const M=this._computeIndentLevel(I-1);M>=0?(h=I-1,f=M,D=Math.ceil(M/this.textModel.getOptions().indentSize)):(p(I),D=this._getIndentLevelForWhitespaceLine(o,f,m))}if(S===0){C=T;continue}if(S===1){if(I<=s&&D>=0&&C+1===D){w=!1,b=I,v=I,y=D;continue}if(k>=1&&T>=0&&T-1===C){_=!1,b=k,v=k,y=T;continue}if(b=e,v=e,y=C,y===0)return{startLineNumber:b,endLineNumber:v,indent:y}}w&&(T>=y?b=k:w=!1),_&&(D>=y?v=I:_=!1)}return{startLineNumber:b,endLineNumber:v,indent:y}}getLinesBracketGuides(e,t,i,s){var r;const o=[];for(let h=e;h<=t;h++)o.push([]);const a=!0,l=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new te(e,1,t,this.textModel.getLineMaxColumn(t))).toArray();let c;if(i&&l.length>0){const h=(e<=i.lineNumber&&i.lineNumber<=t?l:this.textModel.bracketPairs.getBracketPairsInRange(te.fromPositions(i)).toArray()).filter(f=>te.strictContainsPosition(f.range,i));c=(r=yL(h,f=>a))===null||r===void 0?void 0:r.range}const d=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,u=new ese;for(const h of l){if(!h.closingBracketRange)continue;const f=c&&h.range.equalsRange(c);if(!f&&!s.includeInactive)continue;const g=u.getInlineClassName(h.nestingLevel,h.nestingLevelOfEqualBracketType,d)+(s.highlightActive&&f?" "+u.activeClassName:""),m=h.openingBracketRange.getStartPosition(),p=h.closingBracketRange.getStartPosition(),b=s.horizontalGuides===cg.Enabled||s.horizontalGuides===cg.EnabledForActive&&f;if(h.range.startLineNumber===h.range.endLineNumber){b&&o[h.range.startLineNumber-e].push(new Jf(-1,h.openingBracketRange.getEndPosition().column,g,new t_(!1,p.column),-1,-1));continue}const w=this.getVisibleColumnFromPosition(p),v=this.getVisibleColumnFromPosition(h.openingBracketRange.getStartPosition()),_=Math.min(v,w,h.minVisibleColumnIndentation+1);let y=!1;fo(this.textModel.getLineContent(h.closingBracketRange.startLineNumber))<h.closingBracketRange.startColumn-1&&(y=!0);const k=Math.max(m.lineNumber,e),I=Math.min(p.lineNumber,t),T=y?1:0;for(let D=k;D<I+T;D++)o[D-e].push(new Jf(_,-1,g,null,D===m.lineNumber?m.column:-1,D===p.lineNumber?p.column:-1));b&&(m.lineNumber>=e&&v>_&&o[m.lineNumber-e].push(new Jf(_,-1,g,new t_(!1,m.column),-1,-1)),p.lineNumber<=t&&w>_&&o[p.lineNumber-e].push(new Jf(_,-1,g,new t_(!y,p.column),-1,-1)))}for(const h of o)h.sort((f,g)=>f.visibleColumn-g.visibleColumn);return o}getVisibleColumnFromPosition(e){return ns.visibleColumnFromColumn(this.textModel.getLineContent(e.lineNumber),e.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(e,t){this.assertNotDisposed();const i=this.textModel.getLineCount();if(e<1||e>i)throw new Error("Illegal value for startLineNumber");if(t<1||t>i)throw new Error("Illegal value for endLineNumber");const s=this.textModel.getOptions(),r=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,o=!!(r&&r.offSide),a=new Array(t-e+1);let l=-2,c=-1,d=-2,u=-1;for(let h=e;h<=t;h++){const f=h-e,g=this._computeIndentLevel(h-1);if(g>=0){l=h-1,c=g,a[f]=Math.ceil(g/s.indentSize);continue}if(l===-2){l=-1,c=-1;for(let m=h-2;m>=0;m--){const p=this._computeIndentLevel(m);if(p>=0){l=m,c=p;break}}}if(d!==-1&&(d===-2||d<h-1)){d=-1,u=-1;for(let m=h;m<i;m++){const p=this._computeIndentLevel(m);if(p>=0){d=m,u=p;break}}}a[f]=this._getIndentLevelForWhitespaceLine(o,c,u)}return a}_getIndentLevelForWhitespaceLine(e,t,i){const s=this.textModel.getOptions();return t===-1||i===-1?0:t<i?1+Math.floor(t/s.indentSize):t===i||e?Math.ceil(i/s.indentSize):1+Math.floor(i/s.indentSize)}}class ese{constructor(){this.activeClassName="indent-active"}getInlineClassName(e,t,i){return this.getInlineClassNameOfLevel(i?t:e)}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}}class X4e extends gm{constructor(e){super(),this._context=e,this._primaryPosition=null;const t=this._context.configuration.options,i=t.get(146),s=t.get(50);this._spaceWidth=s.spaceWidth,this._maxIndentLeft=i.wrappingColumn===-1?-1:i.wrappingColumn*s.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(16),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146),s=t.get(50);return this._spaceWidth=s.spaceWidth,this._maxIndentLeft=i.wrappingColumn===-1?-1:i.wrappingColumn*s.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(16),!0}onCursorStateChanged(e){var t;const s=e.selections[0].getPosition();return!((t=this._primaryPosition)===null||t===void 0)&&t.equals(s)?!1:(this._primaryPosition=s,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){var t,i,s,r;if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}const o=e.visibleRange.startLineNumber,a=e.visibleRange.endLineNumber,l=e.scrollWidth,c=this._primaryPosition,d=this.getGuidesByLine(o,Math.min(a+1,this._context.viewModel.getLineCount()),c),u=[];for(let h=o;h<=a;h++){const f=h-o,g=d[f];let m="";const p=(i=(t=e.visibleRangeForPosition(new pe(h,1)))===null||t===void 0?void 0:t.left)!==null&&i!==void 0?i:0;for(const b of g){const w=b.column===-1?p+(b.visibleColumn-1)*this._spaceWidth:e.visibleRangeForPosition(new pe(h,b.column)).left;if(w>l||this._maxIndentLeft>0&&w>this._maxIndentLeft)break;const v=b.horizontalLine?b.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",_=b.horizontalLine?((r=(s=e.visibleRangeForPosition(new pe(h,b.horizontalLine.endColumn)))===null||s===void 0?void 0:s.left)!==null&&r!==void 0?r:w+this._spaceWidth)-w:this._spaceWidth;m+=`<div class="core-guide ${b.className} ${v}" style="left:${w}px;width:${_}px"></div>`}u[f]=m}this._renderResult=u}getGuidesByLine(e,t,i){const s=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.viewModel.getBracketGuidesInRangeByLine(e,t,i,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?cg.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?cg.EnabledForActive:cg.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,r=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(e,t):null;let o=0,a=0,l=0;if(this._bracketPairGuideOptions.highlightActiveIndentation!==!1&&i){const u=this._context.viewModel.getActiveIndentGuide(i.lineNumber,e,t);o=u.startLineNumber,a=u.endLineNumber,l=u.indent}const{indentSize:c}=this._context.viewModel.model.getOptions(),d=[];for(let u=e;u<=t;u++){const h=new Array;d.push(h);const f=s?s[u-e]:[],g=new qd(f),m=r?r[u-e]:0;for(let p=1;p<=m;p++){const b=(p-1)*c+1,w=(this._bracketPairGuideOptions.highlightActiveIndentation==="always"||f.length===0)&&o<=u&&u<=a&&p===l;h.push(...g.takeWhile(_=>_.visibleColumn<b)||[]);const v=g.peek();(!v||v.visibleColumn!==b||v.horizontalLine)&&h.push(new Jf(b,-1,`core-guide-indent lvl-${(p-1)%30}`+(w?" indent-active":""),null,-1,-1))}h.push(...g.takeWhile(p=>!0)||[])}return d}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}function Wm(n){if(!(n&&n.isTransparent()))return n}zl((n,e)=>{const t=[{bracketColor:Zne,guideColor:$Fe,guideColorActive:n4e},{bracketColor:Gne,guideColor:QFe,guideColorActive:s4e},{bracketColor:Bne,guideColor:qFe,guideColorActive:r4e},{bracketColor:Xne,guideColor:e4e,guideColorActive:o4e},{bracketColor:zne,guideColor:t4e,guideColorActive:a4e},{bracketColor:Hne,guideColor:i4e,guideColorActive:l4e}],i=new ese,s=[{indentColor:Sw,indentColorActive:Cw},{indentColor:NFe,indentColorActive:VFe},{indentColor:RFe,indentColorActive:PFe},{indentColor:WFe,indentColorActive:OFe},{indentColor:AFe,indentColorActive:ZFe},{indentColor:FFe,indentColorActive:GFe}],r=t.map(a=>{var l,c;const d=n.getColor(a.bracketColor),u=n.getColor(a.guideColor),h=n.getColor(a.guideColorActive),f=Wm((l=Wm(u))!==null&&l!==void 0?l:d?.transparent(.3)),g=Wm((c=Wm(h))!==null&&c!==void 0?c:d);if(!(!f||!g))return{guideColor:f,guideColorActive:g}}).filter(_b),o=s.map(a=>{const l=n.getColor(a.indentColor),c=n.getColor(a.indentColorActive),d=Wm(l),u=Wm(c);if(!(!d||!u))return{indentColor:d,indentColorActive:u}}).filter(_b);if(r.length>0){for(let a=0;a<30;a++){const l=r[a%r.length];e.addRule(`.monaco-editor .${i.getInlineClassNameOfLevel(a).replace(/ /g,".")} { --guide-color: ${l.guideColor}; --guide-color-active: ${l.guideColorActive}; }`)}e.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),e.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),e.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),e.addRule(`.monaco-editor .vertical.${i.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),e.addRule(`.monaco-editor .horizontal-top.${i.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),e.addRule(`.monaco-editor .horizontal-bottom.${i.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}if(o.length>0){for(let a=0;a<30;a++){const l=o[a%o.length];e.addRule(`.monaco-editor .lines-content .core-guide-indent.lvl-${a} { --indent-color: ${l.indentColor}; --indent-color-active: ${l.indentColorActive}; }`)}e.addRule(".monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 var(--indent-color) inset; }"),e.addRule(".monaco-editor .lines-content .core-guide-indent.indent-active { box-shadow: 1px 0 0 0 var(--indent-color-active) inset; }")}});class rR{get didDomLayout(){return this._didDomLayout}readClientRect(){if(!this._clientRectRead){this._clientRectRead=!0;const e=this._domNode.getBoundingClientRect();this.markDidDomLayout(),this._clientRectDeltaLeft=e.left,this._clientRectScale=e.width/this._domNode.offsetWidth}}get clientRectDeltaLeft(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft}get clientRectScale(){return this._clientRectRead||this.readClientRect(),this._clientRectScale}constructor(e,t){this._domNode=e,this.endNode=t,this._didDomLayout=!1,this._clientRectDeltaLeft=0,this._clientRectScale=1,this._clientRectRead=!1}markDidDomLayout(){this._didDomLayout=!0}}class z4e{constructor(){this._currentVisibleRange=new te(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}}class H4e{constructor(e,t,i,s,r,o,a){this.minimalReveal=e,this.lineNumber=t,this.startColumn=i,this.endColumn=s,this.startScrollTop=r,this.stopScrollTop=o,this.scrollType=a,this.type="range",this.minLineNumber=t,this.maxLineNumber=t}}class U4e{constructor(e,t,i,s,r){this.minimalReveal=e,this.selections=t,this.startScrollTop=i,this.stopScrollTop=s,this.scrollType=r,this.type="selections";let o=t[0].startLineNumber,a=t[0].endLineNumber;for(let l=1,c=t.length;l<c;l++){const d=t[l];o=Math.min(o,d.startLineNumber),a=Math.max(a,d.endLineNumber)}this.minLineNumber=o,this.maxLineNumber=a}}class j2 extends vo{constructor(e,t){super(e),this._linesContent=t,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new Yne(this),this.domNode=this._visibleLines.domNode;const i=this._context.configuration,s=this._context.configuration.options,r=s.get(50),o=s.get(146);this._lineHeight=s.get(67),this._typicalHalfwidthCharacterWidth=r.typicalHalfwidthCharacterWidth,this._isViewportWrapping=o.isViewportWrapping,this._revealHorizontalRightPadding=s.get(100),this._cursorSurroundingLines=s.get(29),this._cursorSurroundingLinesStyle=s.get(30),this._canUseLayerHinting=!s.get(32),this._viewLineOptions=new lU(i,this._context.theme.type),Al.write(this.domNode,8),this.domNode.setClassName(`view-lines ${Np}`),$s(this.domNode,r),this._maxLineWidth=0,this._asyncUpdateLineWidths=new as(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new as(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new z4e,this._horizontalRevealRequest=null,this._stickyScrollEnabled=s.get(115).enabled,this._maxNumberStickyLines=s.get(115).maxLineCount}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}createVisibleLine(){return new fc(this._viewLineOptions)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(146)&&(this._maxLineWidth=0);const t=this._context.configuration.options,i=t.get(50),s=t.get(146);return this._lineHeight=t.get(67),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._isViewportWrapping=s.isViewportWrapping,this._revealHorizontalRightPadding=t.get(100),this._cursorSurroundingLines=t.get(29),this._cursorSurroundingLinesStyle=t.get(30),this._canUseLayerHinting=!t.get(32),this._stickyScrollEnabled=t.get(115).enabled,this._maxNumberStickyLines=t.get(115).maxLineCount,$s(this.domNode,i),this._onOptionsMaybeChanged(),e.hasChanged(145)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const e=this._context.configuration,t=new lU(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;const i=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let r=i;r<=s;r++)this._visibleLines.getVisibleLine(r).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();let s=!1;for(let r=t;r<=i;r++)s=this._visibleLines.getVisibleLine(r).onSelectionChanged()||s;return s}onDecorationsChanged(e){{const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let s=t;s<=i;s++)this._visibleLines.getVisibleLine(s).onDecorationsChanged()}return!0}onFlushed(e){const t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){const t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.minimalReveal,e.range,e.selections,e.verticalType);if(t===-1)return!1;let i=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?i={scrollTop:i.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new H4e(e.minimalReveal,e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new U4e(e.minimalReveal,e.selections,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;const r=Math.abs(this._context.viewLayout.getCurrentScrollTop()-i.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(i,r),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){const t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),i=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>i)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){const i=this._getViewLineDomNode(e);if(i===null)return null;const s=this._getLineNumberFor(i);if(s===-1||s<1||s>this._context.viewModel.getLineCount())return null;if(this._context.viewModel.getLineMaxColumn(s)===1)return new pe(s,1);const r=this._visibleLines.getStartLineNumber(),o=this._visibleLines.getEndLineNumber();if(s<r||s>o)return null;let a=this._visibleLines.getVisibleLine(s).getColumnOfNodeOffset(e,t);const l=this._context.viewModel.getLineMinColumn(s);return a<l&&(a=l),new pe(s,a)}_getViewLineDomNode(e){for(;e&&e.nodeType===1;){if(e.className===fc.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let s=t;s<=i;s++){const r=this._visibleLines.getVisibleLine(s);if(e===r.getDomNode())return s}return-1}getLineWidth(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();if(e<t||e>i)return-1;const s=new rR(this.domNode.domNode,this._textRangeRestingSpot),r=this._visibleLines.getVisibleLine(e).getWidth(s);return this._updateLineWidthsSlowIfDomDidLayout(s),r}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;const i=e.endLineNumber,s=te.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!s)return null;const r=[];let o=0;const a=new rR(this.domNode.domNode,this._textRangeRestingSpot);let l=0;t&&(l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new pe(s.startLineNumber,1)).lineNumber);const c=this._visibleLines.getStartLineNumber(),d=this._visibleLines.getEndLineNumber();for(let u=s.startLineNumber;u<=s.endLineNumber;u++){if(u<c||u>d)continue;const h=u===s.startLineNumber?s.startColumn:1,f=u!==s.endLineNumber,g=f?this._context.viewModel.getLineMaxColumn(u):s.endColumn,m=this._visibleLines.getVisibleLine(u).getVisibleRangesForRange(u,h,g,a);if(m){if(t&&u<i){const p=l;l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new pe(u+1,1)).lineNumber,p!==l&&(m.ranges[m.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}r[o++]=new FAe(m.outsideRenderedLine,u,B2.from(m.ranges),f)}}return this._updateLineWidthsSlowIfDomDidLayout(a),o===0?null:r}_visibleRangesForLineRange(e,t,i){if(this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber())return null;const s=new rR(this.domNode.domNode,this._textRangeRestingSpot),r=this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,i,s);return this._updateLineWidthsSlowIfDomDidLayout(s),r}visibleRangeForPosition(e){const t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new VAe(t.outsideRenderedLine,t.ranges[0].left):null}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidthsSlowIfDomDidLayout(e){e.didDomLayout&&(this._asyncUpdateLineWidths.isScheduled()||(this._asyncUpdateLineWidths.cancel(),this._updateLineWidthsSlow()))}_updateLineWidths(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();let s=1,r=!0;for(let o=t;o<=i;o++){const a=this._visibleLines.getVisibleLine(o);if(e&&!a.getWidthIsFast()){r=!1;continue}s=Math.max(s,a.getWidth(null))}return r&&t===1&&i===this._context.viewModel.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(s),r}_checkMonospaceFontAssumptions(){let e=-1,t=-1;const i=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let r=i;r<=s;r++){const o=this._visibleLines.getVisibleLine(r);if(o.needsMonospaceFontCheck()){const a=o.getWidth(null);a>t&&(t=a,e=r)}}if(e!==-1&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let r=i;r<=s;r++)this._visibleLines.getVisibleLine(r).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const i=this._horizontalRevealRequest;if(e.startLineNumber<=i.minLineNumber&&i.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const s=this._computeScrollLeftToReveal(i);s&&(this._isViewportWrapping||this._ensureMaxLineWidth(s.maxHorizontalOffset),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:s.scrollLeft},i.scrollType))}}if(this._updateLineWidthsFast()?this._asyncUpdateLineWidths.cancel():this._asyncUpdateLineWidths.schedule(),Er&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const i=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let r=i;r<=s;r++)if(this._visibleLines.getVisibleLine(r).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){const t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,i,s,r,o){const a=e.top,l=e.height,c=a+l;let d,u,h;if(r&&r.length>0){let b=r[0].startLineNumber,w=r[0].endLineNumber;for(let v=1,_=r.length;v<_;v++){const y=r[v];b=Math.min(b,y.startLineNumber),w=Math.max(w,y.endLineNumber)}d=!1,u=this._context.viewLayout.getVerticalOffsetForLineNumber(b),h=this._context.viewLayout.getVerticalOffsetForLineNumber(w)+this._lineHeight}else if(s)d=!0,u=this._context.viewLayout.getVerticalOffsetForLineNumber(s.startLineNumber),h=this._context.viewLayout.getVerticalOffsetForLineNumber(s.endLineNumber)+this._lineHeight;else return-1;const f=(t==="mouse"||i)&&this._cursorSurroundingLinesStyle==="default";let g=0,m=0;if(f)i||(g=this._lineHeight);else{const b=Math.min(l/this._lineHeight/2,this._cursorSurroundingLines);this._stickyScrollEnabled?g=Math.max(b,this._maxNumberStickyLines)*this._lineHeight:g=b*this._lineHeight,m=Math.max(0,b-1)*this._lineHeight}i||(o===0||o===4)&&(m+=this._lineHeight),u-=g,h+=m;let p;if(h-u>l){if(!d)return-1;p=u}else if(o===5||o===6)if(o===6&&a<=u&&h<=c)p=a;else{const b=Math.max(5*this._lineHeight,l*.2),w=u-b,v=h-l;p=Math.max(v,w)}else if(o===1||o===2)if(o===2&&a<=u&&h<=c)p=a;else{const b=(u+h)/2;p=Math.max(0,b-l/2)}else p=this._computeMinimumScrolling(a,c,u,h,o===3,o===4);return p}_computeScrollLeftToReveal(e){const t=this._context.viewLayout.getCurrentViewport(),i=this._context.configuration.options.get(145),s=t.left,r=s+t.width-i.verticalScrollbarWidth;let o=1073741824,a=0;if(e.type==="range"){const c=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!c)return null;for(const d of c.ranges)o=Math.min(o,Math.round(d.left)),a=Math.max(a,Math.round(d.left+d.width))}else for(const c of e.selections){if(c.startLineNumber!==c.endLineNumber)return null;const d=this._visibleRangesForLineRange(c.startLineNumber,c.startColumn,c.endColumn);if(!d)return null;for(const u of d.ranges)o=Math.min(o,Math.round(u.left)),a=Math.max(a,Math.round(u.left+u.width))}return e.minimalReveal||(o=Math.max(0,o-j2.HORIZONTAL_EXTRA_PX),a+=this._revealHorizontalRightPadding),e.type==="selections"&&a-o>t.width?null:{scrollLeft:this._computeMinimumScrolling(s,r,o,a),maxHorizontalOffset:a}}_computeMinimumScrolling(e,t,i,s,r,o){e=e|0,t=t|0,i=i|0,s=s|0,r=!!r,o=!!o;const a=t-e;if(s-i<a){if(r)return i;if(o)return Math.max(0,s-a);if(i<e)return i;if(s>t)return Math.max(0,s-a)}else return i;return e}}j2.HORIZONTAL_EXTRA_PX=30;class Y4e extends $ne{constructor(e){super(),this._context=e;const i=this._context.configuration.options.get(145);this._decorationsLeft=i.decorationsLeft,this._decorationsWidth=i.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const i=this._context.configuration.options.get(145);return this._decorationsLeft=i.decorationsLeft,this._decorationsWidth=i.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){var t,i;const s=e.getDecorationsInViewport(),r=[];let o=0;for(let a=0,l=s.length;a<l;a++){const c=s[a],d=c.options.linesDecorationsClassName,u=c.options.zIndex;d&&(r[o++]=new Z3(c.range.startLineNumber,c.range.endLineNumber,d,(t=c.options.linesDecorationsTooltip)!==null&&t!==void 0?t:null,u));const h=c.options.firstLineDecorationClassName;h&&(r[o++]=new Z3(c.range.startLineNumber,c.range.startLineNumber,h,(i=c.options.linesDecorationsTooltip)!==null&&i!==void 0?i:null,u))}return r}prepareRender(e){const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,s=this._render(t,i,this._getDecorations(e)),r=this._decorationsLeft.toString(),o=this._decorationsWidth.toString(),a='" style="left:'+r+"px;width:"+o+'px;"></div>',l=[];for(let c=t;c<=i;c++){const d=c-t,u=s[d].getDecorations();let h="";for(const f of u){let g='<div class="cldr '+f.className;f.tooltip!==null&&(g+='" title="'+f.tooltip),g+=a,h+=g}l[d]=h}this._renderResult=l}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class K4e extends $ne{constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),i=[];let s=0;for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.options.marginClassName,c=a.options.zIndex;l&&(i[s++]=new Z3(a.range.startLineNumber,a.range.endLineNumber,l,null,c))}return i}prepareRender(e){const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,s=this._render(t,i,this._getDecorations(e)),r=[];for(let o=t;o<=i;o++){const a=o-t,l=s[a].getDecorations();let c="";for(const d of l)c+='<div class="cmdr '+d.className+'" style=""></div>';r[a]=c}this._renderResult=r}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class Io{constructor(e,t,i,s){this._rgba8Brand=void 0,this.r=Io._clamp(e),this.g=Io._clamp(t),this.b=Io._clamp(i),this.a=Io._clamp(s)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:e|0}}Io.Empty=new Io(0,0,0,0);class xw extends Le{static getInstance(){return this._INSTANCE||(this._INSTANCE=new xw),this._INSTANCE}constructor(){super(),this._onDidChange=new ue,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(Zn.onDidChange(e=>{e.changedColorMap&&this._updateColorMap()}))}_updateColorMap(){const e=Zn.getColorMap();if(!e){this._colors=[Io.Empty],this._backgroundIsLight=!0;return}this._colors=[Io.Empty];for(let i=1;i<e.length;i++){const s=e[i].rgba;this._colors[i]=new Io(s.r,s.g,s.b,Math.round(s.a*255))}const t=e[2].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}}xw._INSTANCE=null;class kU{constructor(e,t,i,s){this._viewportBrand=void 0,this.top=e|0,this.left=t|0,this.width=i|0,this.height=s|0}}class j4e{constructor(e,t){this.tabSize=e,this.data=t}}class mP{constructor(e,t,i,s,r,o,a){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=t,this.minColumn=i,this.maxColumn=s,this.startVisibleColumn=r,this.tokens=o,this.inlineDecorations=a}}class Po{constructor(e,t,i,s,r,o,a,l,c,d){this.minColumn=e,this.maxColumn=t,this.content=i,this.continuesWithWrappedLine=s,this.isBasicASCII=Po.isBasicASCII(i,o),this.containsRTL=Po.containsRTL(i,this.isBasicASCII,r),this.tokens=a,this.inlineDecorations=l,this.tabSize=c,this.startVisibleColumn=d}static isBasicASCII(e,t){return t?EV(e):!0}static containsRTL(e,t,i){return!t&&i?A_(e):!1}}class i_{constructor(e,t,i){this.range=e,this.inlineClassName=t,this.type=i}}class J4e{constructor(e,t,i,s){this.startOffset=e,this.endOffset=t,this.inlineClassName=i,this.inlineClassNameAffectsLetterSpacing=s}toInlineDecoration(e){return new i_(new te(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}class tse{constructor(e,t){this._viewModelDecorationBrand=void 0,this.range=e,this.options=t}}class $_{constructor(e,t,i){this.color=e,this.zIndex=t,this.data=i}static compareByRenderingProps(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}static equals(e,t){return e.color===t.color&&e.zIndex===t.zIndex&&Gs(e.data,t.data)}static equalsArr(e,t){return Gs(e,t,$_.equals)}}const $4e=(()=>{const n=[];for(let e=32;e<=126;e++)n.push(e);return n.push(65533),n})(),Q4e=(n,e)=>(n-=32,n<0||n>96?e<=2?(n+96)%96:95:n);class Q_{constructor(e,t){this.scale=t,this._minimapCharRendererBrand=void 0,this.charDataNormal=Q_.soften(e,12/15),this.charDataLight=Q_.soften(e,50/60)}static soften(e,t){const i=new Uint8ClampedArray(e.length);for(let s=0,r=e.length;s<r;s++)i[s]=lL(e[s]*t);return i}renderChar(e,t,i,s,r,o,a,l,c,d,u){const h=1*this.scale,f=2*this.scale,g=u?1:f;if(t+h>e.width||i+g>e.height){console.warn("bad render request outside image data");return}const m=d?this.charDataLight:this.charDataNormal,p=Q4e(s,c),b=e.width*4,w=a.r,v=a.g,_=a.b,y=r.r-w,C=r.g-v,S=r.b-_,k=Math.max(o,l),I=e.data;let T=p*h*f,D=i*b+t*4;for(let M=0;M<g;M++){let E=D;for(let W=0;W<h;W++){const P=m[T++]/255*(o/255);I[E++]=w+y*P,I[E++]=v+C*P,I[E++]=_+S*P,I[E++]=k}D+=b}}blockRenderChar(e,t,i,s,r,o,a,l){const c=1*this.scale,d=2*this.scale,u=l?1:d;if(t+c>e.width||i+u>e.height){console.warn("bad render request outside image data");return}const h=e.width*4,f=.5*(r/255),g=o.r,m=o.g,p=o.b,b=s.r-g,w=s.g-m,v=s.b-p,_=g+b*f,y=m+w*f,C=p+v*f,S=Math.max(r,a),k=e.data;let I=i*h+t*4;for(let T=0;T<u;T++){let D=I;for(let M=0;M<c;M++)k[D++]=_,k[D++]=y,k[D++]=C,k[D++]=S;I+=h}}}const xU={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},TU=n=>{const e=new Uint8ClampedArray(n.length/2);for(let t=0;t<n.length;t+=2)e[t>>1]=xU[n[t]]<<4|xU[n[t+1]]&15;return e},DU={1:Sb(()=>TU("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:Sb(()=>TU("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};class n_{static create(e,t){if(this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily)return this.lastCreated;let i;return DU[e]?i=new Q_(DU[e](),e):i=n_.createFromSampleData(n_.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=i,i}static createSampleData(e){const t=document.createElement("canvas"),i=t.getContext("2d");t.style.height="16px",t.height=16,t.width=96*10,t.style.width=96*10+"px",i.fillStyle="#ffffff",i.font=`bold 16px ${e}`,i.textBaseline="middle";let s=0;for(const r of $4e)i.fillText(String.fromCharCode(r),s,16/2),s+=10;return i.getImageData(0,0,96*10,16)}static createFromSampleData(e,t){if(e.length!==61440)throw new Error("Unexpected source in MinimapCharRenderer");const s=n_._downsample(e,t);return new Q_(s,t)}static _downsampleChar(e,t,i,s,r){const o=1*r,a=2*r;let l=s,c=0;for(let d=0;d<a;d++){const u=d/a*16,h=(d+1)/a*16;for(let f=0;f<o;f++){const g=f/o*10,m=(f+1)/o*10;let p=0,b=0;for(let v=u;v<h;v++){const _=t+Math.floor(v)*3840,y=1-(v-Math.floor(v));for(let C=g;C<m;C++){const S=1-(C-Math.floor(C)),k=_+Math.floor(C)*4,I=S*y;b+=I,p+=e[k]*e[k+3]/255*I}}const w=p/b;c=Math.max(c,w),i[l++]=lL(w)}}return c}static _downsample(e,t){const i=2*t*1*t,s=i*96,r=new Uint8ClampedArray(s);let o=0,a=0,l=0;for(let c=0;c<96;c++)l=Math.max(l,this._downsampleChar(e,a,r,o,t)),o+=i,a+=10*4;if(l>0){const c=255/l;for(let d=0;d<s;d++)r[d]*=c}return r}}const q4e=Mr?'"Segoe WPC", "Segoe UI", sans-serif':jt?"-apple-system, BlinkMacSystemFont, sans-serif":'system-ui, "Ubuntu", "Droid Sans", sans-serif',eVe=140,tVe=2;class Rp{constructor(e,t,i){const s=e.options,r=s.get(143),o=s.get(145),a=o.minimap,l=s.get(50),c=s.get(73);this.renderMinimap=a.renderMinimap,this.size=c.size,this.minimapHeightIsEditorHeight=a.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=s.get(105),this.paddingTop=s.get(84).top,this.paddingBottom=s.get(84).bottom,this.showSlider=c.showSlider,this.autohide=c.autohide,this.pixelRatio=r,this.typicalHalfwidthCharacterWidth=l.typicalHalfwidthCharacterWidth,this.lineHeight=s.get(67),this.minimapLeft=a.minimapLeft,this.minimapWidth=a.minimapWidth,this.minimapHeight=o.height,this.canvasInnerWidth=a.minimapCanvasInnerWidth,this.canvasInnerHeight=a.minimapCanvasInnerHeight,this.canvasOuterWidth=a.minimapCanvasOuterWidth,this.canvasOuterHeight=a.minimapCanvasOuterHeight,this.isSampling=a.minimapIsSampling,this.editorHeight=o.height,this.fontScale=a.minimapScale,this.minimapLineHeight=a.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.sectionHeaderFontFamily=q4e,this.sectionHeaderFontSize=c.sectionHeaderFontSize*r,this.sectionHeaderLetterSpacing=c.sectionHeaderLetterSpacing,this.sectionHeaderFontColor=Rp._getSectionHeaderColor(t,i.getColor(1)),this.charRenderer=Sb(()=>n_.create(this.fontScale,l.fontFamily)),this.defaultBackgroundColor=i.getColor(2),this.backgroundColor=Rp._getMinimapBackground(t,this.defaultBackgroundColor),this.foregroundAlpha=Rp._getMinimapForegroundOpacity(t)}static _getMinimapBackground(e,t){const i=e.getColor(DWe);return i?new Io(i.rgba.r,i.rgba.g,i.rgba.b,Math.round(255*i.rgba.a)):t}static _getMinimapForegroundOpacity(e){const t=e.getColor(IWe);return t?Io._clamp(Math.round(255*t.rgba.a)):255}static _getSectionHeaderColor(e,t){const i=e.getColor(ww);return i?new Io(i.rgba.r,i.rgba.g,i.rgba.b,Math.round(255*i.rgba.a)):t}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.paddingTop===e.paddingTop&&this.paddingBottom===e.paddingBottom&&this.showSlider===e.showSlider&&this.autohide===e.autohide&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.sectionHeaderFontSize===e.sectionHeaderFontSize&&this.sectionHeaderLetterSpacing===e.sectionHeaderLetterSpacing&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}}class s_{constructor(e,t,i,s,r,o,a,l,c){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=i,this._computedSliderRatio=s,this.sliderTop=r,this.sliderHeight=o,this.topPaddingLineCount=a,this.startLineNumber=l,this.endLineNumber=c}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}intersectWithViewport(e){const t=Math.max(this.startLineNumber,e.startLineNumber),i=Math.min(this.endLineNumber,e.endLineNumber);return t>i?null:[t,i]}getYForLineNumber(e,t){return+(e-this.startLineNumber+this.topPaddingLineCount)*t}static create(e,t,i,s,r,o,a,l,c,d,u){const h=e.pixelRatio,f=e.minimapLineHeight,g=Math.floor(e.canvasInnerHeight/f),m=e.lineHeight;if(e.minimapHeightIsEditorHeight){let C=l*e.lineHeight+e.paddingTop+e.paddingBottom;e.scrollBeyondLastLine&&(C+=Math.max(0,r-e.lineHeight-e.paddingBottom));const S=Math.max(1,Math.floor(r*r/C)),k=Math.max(0,e.minimapHeight-S),I=k/(d-r),T=c*I,D=k>0,M=Math.floor(e.canvasInnerHeight/e.minimapLineHeight),E=Math.floor(e.paddingTop/e.lineHeight);return new s_(c,d,D,I,T,S,E,1,Math.min(a,M))}let p;if(o&&i!==a){const C=i-t+1;p=Math.floor(C*f/h)}else{const C=r/m;p=Math.floor(C*f/h)}const b=Math.floor(e.paddingTop/m);let w=Math.floor(e.paddingBottom/m);if(e.scrollBeyondLastLine){const C=r/m;w=Math.max(w,C-1)}let v;if(w>0){const C=r/m;v=(b+a+w-C-1)*f/h}else v=Math.max(0,(b+a)*f/h-p);v=Math.min(e.minimapHeight-p,v);const _=v/(d-r),y=c*_;if(g>=b+a+w){const C=v>0;return new s_(c,d,C,_,y,p,b,1,a)}else{let C;t>1?C=t+b:C=Math.max(1,c/m);let S,k=Math.max(1,Math.floor(C-y*h/f));k<b?(S=b-k+1,k=1):(S=0,k=Math.max(1,k-b)),u&&u.scrollHeight===d&&(u.scrollTop>c&&(k=Math.min(k,u.startLineNumber),S=Math.max(S,u.topPaddingLineCount)),u.scrollTop<c&&(k=Math.max(k,u.startLineNumber),S=Math.min(S,u.topPaddingLineCount)));const I=Math.min(a,k-S+g-1),T=(c-s)/m;let D;return c>=e.paddingTop?D=(t-k+S+T)*f/h:D=c/e.paddingTop*(S+T)*f/h,new s_(c,d,!0,_,D,p,S,k,I)}}}class SL{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}}SL.INVALID=new SL(-1);class IU{constructor(e,t,i){this.renderedLayout=e,this._imageData=t,this._renderedLines=new Une(()=>SL.INVALID),this._renderedLines._set(e.startLineNumber,i)}linesEquals(e){if(!this.scrollEquals(e))return!1;const i=this._renderedLines._get().lines;for(let s=0,r=i.length;s<r;s++)if(i[s].dy===-1)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){const e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}}class pP{constructor(e,t,i,s){this._backgroundFillData=pP._createBackgroundFillData(t,i,s),this._buffers=[e.createImageData(t,i),e.createImageData(t,i)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,i){const s=i.r,r=i.g,o=i.b,a=i.a,l=new Uint8ClampedArray(e*t*4);let c=0;for(let d=0;d<t;d++)for(let u=0;u<e;u++)l[c]=s,l[c+1]=r,l[c+2]=o,l[c+3]=a,c+=4;return l}}class q_{static compute(e,t,i){if(e.renderMinimap===0||!e.isSampling)return[null,[]];const{minimapLineCount:s}=Ip.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:e.scrollBeyondLastLine,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:e.editorHeight,lineHeight:e.lineHeight,pixelRatio:e.pixelRatio}),r=t/s,o=r/2;if(!i||i.minimapLines.length===0){const p=[];if(p[0]=1,s>1){for(let b=0,w=s-1;b<w;b++)p[b]=Math.round(b*r+o);p[s-1]=t}return[new q_(r,p),[]]}const a=i.minimapLines,l=a.length,c=[];let d=0,u=0,h=1;const f=10;let g=[],m=null;for(let p=0;p<s;p++){const b=Math.max(h,Math.round(p*r)),w=Math.max(b,Math.round((p+1)*r));for(;d<l&&a[d]<b;){if(g.length<f){const _=d+1+u;m&&m.type==="deleted"&&m._oldIndex===d-1?m.deleteToLineNumber++:(m={type:"deleted",_oldIndex:d,deleteFromLineNumber:_,deleteToLineNumber:_},g.push(m)),u--}d++}let v;if(d<l&&a[d]<=w)v=a[d],d++;else if(p===0?v=1:p+1===s?v=t:v=Math.round(p*r+o),g.length<f){const _=d+1+u;m&&m.type==="inserted"&&m._i===p-1?m.insertToLineNumber++:(m={type:"inserted",_i:p,insertFromLineNumber:_,insertToLineNumber:_},g.push(m)),u++}c[p]=v,h=v}if(g.length<f)for(;d<l;){const p=d+1+u;m&&m.type==="deleted"&&m._oldIndex===d-1?m.deleteToLineNumber++:(m={type:"deleted",_oldIndex:d,deleteFromLineNumber:p,deleteToLineNumber:p},g.push(m)),u--,d++}else g=[{type:"flush"}];return[new q_(r,c),g]}constructor(e,t){this.samplingRatio=e,this.minimapLines=t}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let i=this.modelLineToMinimapLine(e)-1;for(;i>0&&this.minimapLines[i-1]>=e;)i--;let s=this.modelLineToMinimapLine(t)-1;for(;s+1<this.minimapLines.length&&this.minimapLines[s+1]<=t;)s++;if(i===s){const r=this.minimapLines[i];if(r<e||r>t)return null}return[i+1,s+1]}decorationLineRangeToMinimapLineRange(e,t){let i=this.modelLineToMinimapLine(e),s=this.modelLineToMinimapLine(t);return e!==t&&s===i&&(s===this.minimapLines.length?i>1&&i--:s++),[i,s]}onLinesDeleted(e){const t=e.toLineNumber-e.fromLineNumber+1;let i=this.minimapLines.length,s=0;for(let r=this.minimapLines.length-1;r>=0&&!(this.minimapLines[r]<e.fromLineNumber);r--)this.minimapLines[r]<=e.toLineNumber?(this.minimapLines[r]=Math.max(1,e.fromLineNumber-1),i=Math.min(i,r),s=Math.max(s,r)):this.minimapLines[r]-=t;return[i,s]}onLinesInserted(e){const t=e.toLineNumber-e.fromLineNumber+1;for(let i=this.minimapLines.length-1;i>=0&&!(this.minimapLines[i]<e.fromLineNumber);i--)this.minimapLines[i]+=t}}class iVe extends vo{constructor(e){super(e),this._sectionHeaderCache=new mw(10,1.5),this.tokensColorTracker=xw.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new Rp(this._context.configuration,this._context.theme,this.tokensColorTracker);const[t]=q_.compute(this.options,this._context.viewModel.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new mp(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const e=new Rp(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(e)?!1:(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return e.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){const t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.fromLineNumber+e.count-1);return t?this._actual.onLinesChanged(t[0],t[1]-t[0]+1):!1}else return this._actual.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){if(this._samplingState){const[t,i]=this._samplingState.onLinesDeleted(e);return t<=i&&this._actual.onLinesChanged(t+1,i-t+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){const t=[];for(const i of e.ranges){const s=this._samplingState.modelLineRangeToMinimapLineRange(i.fromLineNumber,i.toLineNumber);s&&t.push({fromLineNumber:s[0],toLineNumber:s[1]})}return t.length?this._actual.onTokensChanged(t):!1}else return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),i=this._samplingState.modelLineToMinimapLine(i));const s={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:i,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(s)}_recreateLineSampling(){this._minimapSelections=null;const e=!!this._samplingState,[t,i]=q_.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(const s of i)switch(s.type){case"deleted":this._actual.onLinesDeleted(s.deleteFromLineNumber,s.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(s.insertFromLineNumber,s.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.viewModel.getLineCount()}getRealLineCount(){return this._context.viewModel.getLineCount()}getLineContent(e){return this._samplingState?this._context.viewModel.getLineContent(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,t,i){if(this._samplingState){const s=[];for(let r=0,o=t-e+1;r<o;r++)i[r]?s[r]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[e+r-1]):s[r]=null;return s}return this._context.viewModel.getMinimapLinesRenderingData(e,t,i).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(const e of this._selections){const[t,i]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new Ii(t,e.startColumn,i,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){const i=this._getMinimapDecorationsInViewport(e,t).filter(s=>{var r;return!(!((r=s.options.minimap)===null||r===void 0)&&r.sectionHeaderStyle)});if(this._samplingState){const s=[];for(const r of i){if(!r.options.minimap)continue;const o=r.range,a=this._samplingState.modelLineToMinimapLine(o.startLineNumber),l=this._samplingState.modelLineToMinimapLine(o.endLineNumber);s.push(new tse(new te(a,o.startColumn,l,o.endColumn),r.options))}return s}return i}getSectionHeaderDecorationsInViewport(e,t){const i=this.options.minimapLineHeight,r=this.options.sectionHeaderFontSize/i;return e=Math.floor(Math.max(1,e-r)),this._getMinimapDecorationsInViewport(e,t).filter(o=>{var a;return!!(!((a=o.options.minimap)===null||a===void 0)&&a.sectionHeaderStyle)})}_getMinimapDecorationsInViewport(e,t){let i;if(this._samplingState){const s=this._samplingState.minimapLines[e-1],r=this._samplingState.minimapLines[t-1];i=new te(s,1,r,this._context.viewModel.getLineMaxColumn(r))}else i=new te(e,1,t,this._context.viewModel.getLineMaxColumn(t));return this._context.viewModel.getMinimapDecorationsInRange(i)}getSectionHeaderText(e,t){var i;const s=(i=e.options.minimap)===null||i===void 0?void 0:i.sectionHeaderText;if(!s)return null;const r=this._sectionHeaderCache.get(s);if(r)return r;const o=t(s);return this._sectionHeaderCache.set(s,o),o}getOptions(){return this._context.viewModel.model.getOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.viewModel.revealRange("mouse",!1,new te(e,1,e,1),1,0)}setScrollTop(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e},1)}}class mp extends Le{constructor(e,t){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(nU),this._domNode=di(document.createElement("div")),Al.write(this._domNode,9),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=di(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=di(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=di(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=di(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=di(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._pointerDownListener=ws(this._domNode.domNode,Ge.POINTER_DOWN,i=>{if(i.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(i.button===0&&this._lastRenderData){const c=ho(this._slider.domNode),d=c.top+c.height/2;this._startSliderDragging(i,d,this._lastRenderData.renderedLayout)}return}const r=this._model.options.minimapLineHeight,o=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*i.offsetY;let l=Math.floor(o/r)+this._lastRenderData.renderedLayout.startLineNumber-this._lastRenderData.renderedLayout.topPaddingLineCount;l=Math.min(l,this._model.getLineCount()),this._model.revealLineNumber(l)}),this._sliderPointerMoveMonitor=new P2,this._sliderPointerDownListener=ws(this._slider.domNode,Ge.POINTER_DOWN,i=>{i.preventDefault(),i.stopPropagation(),i.button===0&&this._lastRenderData&&this._startSliderDragging(i,i.pageY,this._lastRenderData.renderedLayout)}),this._gestureDisposable=Ki.addTarget(this._domNode.domNode),this._sliderTouchStartListener=we(this._domNode.domNode,Gi.Start,i=>{i.preventDefault(),i.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(i))},{passive:!1}),this._sliderTouchMoveListener=we(this._domNode.domNode,Gi.Change,i=>{i.preventDefault(),i.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(i)},{passive:!1}),this._sliderTouchEndListener=ws(this._domNode.domNode,Gi.End,i=>{i.preventDefault(),i.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(e,t,i){if(!e.target||!(e.target instanceof Element))return;const s=e.pageX;this._slider.toggleClassName("active",!0);const r=(o,a)=>{const l=ho(this._domNode.domNode),c=Math.min(Math.abs(a-s),Math.abs(a-l.left),Math.abs(a-l.left-l.width));if(Mr&&c>eVe){this._model.setScrollTop(i.scrollTop);return}const d=o-t;this._model.setScrollTop(i.getDesiredScrollTopFromDelta(d))};e.pageY!==t&&r(e.pageY,s),this._sliderPointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,o=>r(o.pageY,o.pageX),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){const t=this._domNode.domNode.getBoundingClientRect().top,i=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(i)}dispose(){this._pointerDownListener.dispose(),this._sliderPointerMoveMonitor.dispose(),this._sliderPointerDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){const e=["minimap"];return this._model.options.showSlider==="always"?e.push("slider-always"):e.push("slider-mouseover"),this._model.options.autohide&&e.push("autohide"),e.join(" ")}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new pP(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return this._lastRenderData?this._lastRenderData.onLinesChanged(e,t):!1}onLinesDeleted(e,t){var i;return(i=this._lastRenderData)===null||i===void 0||i.onLinesDeleted(e,t),!0}onLinesInserted(e,t){var i;return(i=this._lastRenderData)===null||i===void 0||i.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(nU),this._renderDecorations=!0,!0}onTokensChanged(e){return this._lastRenderData?this._lastRenderData.onTokensChanged(e):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(this._model.options.renderMinimap===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const i=s_.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(i.sliderNeeded?"block":"none"),this._slider.setTop(i.sliderTop),this._slider.setHeight(i.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(i.sliderHeight),this.renderDecorations(i),this._lastRenderData=this.renderLines(i)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;const t=this._model.getSelections();t.sort(te.compareRangesUsingStarts);const i=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);i.sort((h,f)=>(h.options.zIndex||0)-(f.options.zIndex||0));const{canvasInnerWidth:s,canvasInnerHeight:r}=this._model.options,o=this._model.options.minimapLineHeight,a=this._model.options.minimapCharWidth,l=this._model.getOptions().tabSize,c=this._decorationsCanvas.domNode.getContext("2d");c.clearRect(0,0,s,r);const d=new MU(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(c,t,d,e,o),this._renderDecorationsLineHighlights(c,i,d,e,o);const u=new MU(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(c,t,u,e,o,l,a,s),this._renderDecorationsHighlights(c,i,u,e,o,l,a,s),this._renderSectionHeaders(e)}}_renderSelectionLineHighlights(e,t,i,s,r){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let o=0,a=0;for(const l of t){const c=s.intersectWithViewport(l);if(!c)continue;const[d,u]=c;for(let g=d;g<=u;g++)i.set(g,!0);const h=s.getYForLineNumber(d,r),f=s.getYForLineNumber(u,r);a>=h||(a>o&&e.fillRect(ec,o,e.canvas.width,a-o),o=h),a=f}a>o&&e.fillRect(ec,o,e.canvas.width,a-o)}_renderDecorationsLineHighlights(e,t,i,s,r){const o=new Map;for(let a=t.length-1;a>=0;a--){const l=t[a],c=l.options.minimap;if(!c||c.position!==1)continue;const d=s.intersectWithViewport(l.range);if(!d)continue;const[u,h]=d,f=c.getColor(this._theme.value);if(!f||f.isTransparent())continue;let g=o.get(f.toString());g||(g=f.transparent(.5).toString(),o.set(f.toString(),g)),e.fillStyle=g;for(let m=u;m<=h;m++){if(i.has(m))continue;i.set(m,!0);const p=s.getYForLineNumber(u,r);e.fillRect(ec,p,e.canvas.width,r)}}}_renderSelectionsHighlights(e,t,i,s,r,o,a,l){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(const c of t){const d=s.intersectWithViewport(c);if(!d)continue;const[u,h]=d;for(let f=u;f<=h;f++)this.renderDecorationOnLine(e,i,c,this._selectionColor,s,f,r,r,o,a,l)}}_renderDecorationsHighlights(e,t,i,s,r,o,a,l){for(const c of t){const d=c.options.minimap;if(!d)continue;const u=s.intersectWithViewport(c.range);if(!u)continue;const[h,f]=u,g=d.getColor(this._theme.value);if(!(!g||g.isTransparent()))for(let m=h;m<=f;m++)switch(d.position){case 1:this.renderDecorationOnLine(e,i,c.range,g,s,m,r,r,o,a,l);continue;case 2:{const p=s.getYForLineNumber(m,r);this.renderDecoration(e,g,2,p,tVe,r);continue}}}}renderDecorationOnLine(e,t,i,s,r,o,a,l,c,d,u){const h=r.getYForLineNumber(o,l);if(h+a<0||h>this._model.options.canvasInnerHeight)return;const{startLineNumber:f,endLineNumber:g}=i,m=f===o?i.startColumn:1,p=g===o?i.endColumn:this._model.getLineMaxColumn(o),b=this.getXOffsetForPosition(t,o,m,c,d,u),w=this.getXOffsetForPosition(t,o,p,c,d,u);this.renderDecoration(e,s,b,h,w-b,a)}getXOffsetForPosition(e,t,i,s,r,o){if(i===1)return ec;if((i-1)*r>=o)return o;let l=e.get(t);if(!l){const c=this._model.getLineContent(t);l=[ec];let d=ec;for(let u=1;u<c.length+1;u++){const h=c.charCodeAt(u-1),f=h===9?s*r:Wh(h)?2*r:r,g=d+f;if(g>=o){l[u]=o;break}l[u]=g,d=g}e.set(t,l)}return i-1<l.length?l[i-1]:o}renderDecoration(e,t,i,s,r,o){e.fillStyle=t&&t.toString()||"",e.fillRect(i,s,r,o)}_renderSectionHeaders(e){var t;const i=this._model.options.minimapLineHeight,s=this._model.options.sectionHeaderFontSize,r=this._model.options.sectionHeaderLetterSpacing,o=s*1.5,{canvasInnerWidth:a}=this._model.options,l=this._model.options.backgroundColor,c=`rgb(${l.r} ${l.g} ${l.b} / .7)`,d=this._model.options.sectionHeaderFontColor,u=`rgb(${d.r} ${d.g} ${d.b})`,h=u,f=this._decorationsCanvas.domNode.getContext("2d");f.letterSpacing=r+"px",f.font="500 "+s+"px "+this._model.options.sectionHeaderFontFamily,f.strokeStyle=h,f.lineWidth=.2;const g=this._model.getSectionHeaderDecorationsInViewport(e.startLineNumber,e.endLineNumber);g.sort((p,b)=>p.range.startLineNumber-b.range.startLineNumber);const m=mp._fitSectionHeader.bind(null,f,a-ec);for(const p of g){const b=e.getYForLineNumber(p.range.startLineNumber,i)+s,w=b-s,v=w+2,_=this._model.getSectionHeaderText(p,m);mp._renderSectionLabel(f,_,((t=p.options.minimap)===null||t===void 0?void 0:t.sectionHeaderStyle)===2,c,u,a,w,o,b,v)}}static _fitSectionHeader(e,t,i){if(!i)return i;const s="",r=e.measureText(i).width,o=e.measureText(s).width;if(r<=t||r<=o)return i;const a=i.length,l=r/i.length,c=Math.floor((t-o)/l)-1;let d=Math.ceil(c/2);for(;d>0&&/\s/.test(i[d-1]);)--d;return i.substring(0,d)+s+i.substring(a-(c-d))}static _renderSectionLabel(e,t,i,s,r,o,a,l,c,d){t&&(e.fillStyle=s,e.fillRect(0,a,o,l),e.fillStyle=r,e.fillText(t,ec,c)),i&&(e.beginPath(),e.moveTo(0,d),e.lineTo(o,d),e.closePath(),e.stroke())}renderLines(e){const t=e.startLineNumber,i=e.endLineNumber,s=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){const P=this._lastRenderData._get();return new IU(e,P.imageData,P.lines)}const r=this._getBuffer();if(!r)return null;const[o,a,l]=mp._renderUntouchedLines(r,e.topPaddingLineCount,t,i,s,this._lastRenderData),c=this._model.getMinimapLinesRenderingData(t,i,l),d=this._model.getOptions().tabSize,u=this._model.options.defaultBackgroundColor,h=this._model.options.backgroundColor,f=this._model.options.foregroundAlpha,g=this._model.tokensColorTracker,m=g.backgroundIsLight(),p=this._model.options.renderMinimap,b=this._model.options.charRenderer(),w=this._model.options.fontScale,v=this._model.options.minimapCharWidth,y=(p===1?2:3)*w,C=s>y?Math.floor((s-y)/2):0,S=h.a/255,k=new Io(Math.round((h.r-u.r)*S+u.r),Math.round((h.g-u.g)*S+u.g),Math.round((h.b-u.b)*S+u.b),255);let I=e.topPaddingLineCount*s;const T=[];for(let P=0,N=i-t+1;P<N;P++)l[P]&&mp._renderLine(r,k,h.a,m,p,v,g,f,b,I,C,d,c[P],w,s),T[P]=new SL(I),I+=s;const D=o===-1?0:o,E=(a===-1?r.height:a)-D;return this._canvas.domNode.getContext("2d").putImageData(r,0,0,0,D,r.width,E),new IU(e,r,T)}static _renderUntouchedLines(e,t,i,s,r,o){const a=[];if(!o){for(let I=0,T=s-i+1;I<T;I++)a[I]=!0;return[-1,-1,a]}const l=o._get(),c=l.imageData.data,d=l.rendLineNumberStart,u=l.lines,h=u.length,f=e.width,g=e.data,m=(s-i+1)*r*f*4;let p=-1,b=-1,w=-1,v=-1,_=-1,y=-1,C=t*r;for(let I=i;I<=s;I++){const T=I-i,D=I-d,M=D>=0&&D<h?u[D].dy:-1;if(M===-1){a[T]=!0,C+=r;continue}const E=M*f*4,W=(M+r)*f*4,P=C*f*4,N=(C+r)*f*4;v===E&&y===P?(v=W,y=N):(w!==-1&&(g.set(c.subarray(w,v),_),p===-1&&w===0&&w===_&&(p=v),b===-1&&v===m&&w===_&&(b=w)),w=E,v=W,_=P,y=N),a[T]=!1,C+=r}w!==-1&&(g.set(c.subarray(w,v),_),p===-1&&w===0&&w===_&&(p=v),b===-1&&v===m&&w===_&&(b=w));const S=p===-1?-1:p/(f*4),k=b===-1?-1:b/(f*4);return[S,k,a]}static _renderLine(e,t,i,s,r,o,a,l,c,d,u,h,f,g,m){const p=f.content,b=f.tokens,w=e.width-o,v=m===1;let _=ec,y=0,C=0;for(let S=0,k=b.getCount();S<k;S++){const I=b.getEndOffset(S),T=b.getForeground(S),D=a.getColor(T);for(;y<I;y++){if(_>w)return;const M=p.charCodeAt(y);if(M===9){const E=h-(y+C)%h;C+=E-1,_+=E*o}else if(M===32)_+=o;else{const E=Wh(M)?2:1;for(let W=0;W<E;W++)if(r===2?c.blockRenderChar(e,_,d+u,D,l,t,i,v):c.renderChar(e,_,d+u,M,D,l,t,i,g,s,v),_+=o,_>w)return}}}}}class MU{constructor(e,t,i){this._startLineNumber=e,this._endLineNumber=t,this._defaultValue=i,this._values=[];for(let s=0,r=this._endLineNumber-this._startLineNumber+1;s<r;s++)this._values[s]=i}has(e){return this.get(e)!==this._defaultValue}set(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}}class nVe extends vo{constructor(e,t){super(e),this._viewDomNode=t;const s=this._context.configuration.options.get(145);this._widgets={},this._verticalScrollbarWidth=s.verticalScrollbarWidth,this._minimapWidth=s.minimap.minimapWidth,this._horizontalScrollbarHeight=s.horizontalScrollbarHeight,this._editorHeight=s.height,this._editorWidth=s.width,this._viewDomNodeRect={top:0,left:0,width:0,height:0},this._domNode=di(document.createElement("div")),Al.write(this._domNode,4),this._domNode.setClassName("overlayWidgets"),this.overflowingOverlayWidgetsDomNode=di(document.createElement("div")),Al.write(this.overflowingOverlayWidgetsDomNode,5),this.overflowingOverlayWidgetsDomNode.setClassName("overflowingOverlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){const i=this._context.configuration.options.get(145);return this._verticalScrollbarWidth=i.verticalScrollbarWidth,this._minimapWidth=i.minimap.minimapWidth,this._horizontalScrollbarHeight=i.horizontalScrollbarHeight,this._editorHeight=i.height,this._editorWidth=i.width,!0}addWidget(e){const t=di(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),e.allowEditorOverflow?this.overflowingOverlayWidgetsDomNode.appendChild(t):this._domNode.appendChild(t),this.setShouldRender(),this._updateMaxMinWidth()}setWidgetPosition(e,t){const i=this._widgets[e.getId()],s=t?t.preference:null,r=t?.stackOridinal;return i.preference===s&&i.stack===r?(this._updateMaxMinWidth(),!1):(i.preference=s,i.stack=r,this.setShouldRender(),this._updateMaxMinWidth(),!0)}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const s=this._widgets[t].domNode.domNode;delete this._widgets[t],s.remove(),this.setShouldRender(),this._updateMaxMinWidth()}}_updateMaxMinWidth(){var e,t;let i=0;const s=Object.keys(this._widgets);for(let r=0,o=s.length;r<o;r++){const a=s[r],c=(t=(e=this._widgets[a].widget).getMinContentWidthInPx)===null||t===void 0?void 0:t.call(e);typeof c<"u"&&(i=Math.max(i,c))}this._context.viewLayout.setOverlayWidgetsMinWidth(i)}_renderWidget(e,t){const i=e.domNode;if(e.preference===null){i.setTop("");return}const s=2*this._verticalScrollbarWidth+this._minimapWidth;if(e.preference===0||e.preference===1){if(e.preference===1){const r=i.domNode.clientHeight;i.setTop(this._editorHeight-r-2*this._horizontalScrollbarHeight)}else i.setTop(0);e.stack!==void 0?(i.setTop(t[e.preference]),t[e.preference]+=i.domNode.clientWidth):i.setRight(s)}else if(e.preference===2)i.domNode.style.right="50%",e.stack!==void 0?(i.setTop(t[2]),t[2]+=i.domNode.clientHeight):i.setTop(0);else{const{top:r,left:o}=e.preference;if(this._context.configuration.options.get(42)&&e.widget.allowEditorOverflow){const l=this._viewDomNodeRect;i.setTop(r+l.top),i.setLeft(o+l.left),i.setPosition("fixed")}else i.setTop(r),i.setLeft(o),i.setPosition("absolute")}}prepareRender(e){this._viewDomNodeRect=ho(this._viewDomNode.domNode)}render(e){this._domNode.setWidth(this._editorWidth);const t=Object.keys(this._widgets),i=Array.from({length:3},()=>0);t.sort((s,r)=>(this._widgets[s].stack||0)-(this._widgets[r].stack||0));for(let s=0,r=t.length;s<r;s++){const o=t[s];this._renderWidget(this._widgets[o],i)}}}class sVe{constructor(e,t){const i=e.options;this.lineHeight=i.get(67),this.pixelRatio=i.get(143),this.overviewRulerLanes=i.get(83),this.renderBorder=i.get(82);const s=t.getColor(XFe);this.borderColor=s?s.toString():null,this.hideCursor=i.get(59);const r=t.getColor(Cc);this.cursorColorSingle=r?r.transparent(.7).toString():null;const o=t.getColor(Pne);this.cursorColorPrimary=o?o.transparent(.7).toString():null;const a=t.getColor(One);this.cursorColorSecondary=a?a.transparent(.7).toString():null,this.themeType=t.type;const l=i.get(73),c=l.enabled,d=l.side,u=t.getColor(zFe),h=Zn.getDefaultBackground();u?this.backgroundColor=u:c&&d==="right"?this.backgroundColor=h:this.backgroundColor=null;const g=i.get(145).overviewRuler;this.top=g.top,this.right=g.right,this.domWidth=g.width,this.domHeight=g.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[m,p]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=m,this.w=p}_initLanes(e,t,i){const s=t-e;if(i>=3){const r=Math.floor(s/3),o=Math.floor(s/3),a=s-r-o,l=e,c=l+r,d=l+r+a;return[[0,l,c,l,d,l,c,l],[0,r,a,r+a,o,r+a+o,a+o,r+a+o]]}else if(i===2){const r=Math.floor(s/2),o=s-r,a=e,l=a+r;return[[0,a,a,a,l,a,a,a],[0,r,r,r,o,r+o,r+o,r+o]]}else{const r=e,o=s;return[[0,r,r,r,r,r,r,r],[0,o,o,o,o,o,o,o]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColorSingle===e.cursorColorSingle&&this.cursorColorPrimary===e.cursorColorPrimary&&this.cursorColorSecondary===e.cursorColorSecondary&&this.themeType===e.themeType&&Ce.equals(this.backgroundColor,e.backgroundColor)&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}class rVe extends vo{constructor(e){super(e),this._actualShouldRender=0,this._renderedDecorations=[],this._renderedCursorPositions=[],this._domNode=di(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=Zn.onDidChange(t=>{t.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[{position:new pe(1,1),color:this._settings.cursorColorSingle}]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){const t=new sVe(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(t)?!1:(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}_markRenderingIsNeeded(){return this._actualShouldRender=2,!0}_markRenderingIsMaybeNeeded(){return this._actualShouldRender=1,!0}onConfigurationChanged(e){return this._updateSettings(!1)?this._markRenderingIsNeeded():!1}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,i=e.selections.length;t<i;t++){let s=this._settings.cursorColorSingle;i>1&&(s=t===0?this._settings.cursorColorPrimary:this._settings.cursorColorSecondary),this._cursorPositions.push({position:e.selections[t].getPosition(),color:s})}return this._cursorPositions.sort((t,i)=>pe.compare(t.position,i.position)),this._markRenderingIsMaybeNeeded()}onDecorationsChanged(e){return e.affectsOverviewRuler?this._markRenderingIsMaybeNeeded():!1}onFlushed(e){return this._markRenderingIsNeeded()}onScrollChanged(e){return e.scrollHeightChanged?this._markRenderingIsNeeded():!1}onZonesChanged(e){return this._markRenderingIsNeeded()}onThemeChanged(e){return this._updateSettings(!1)?this._markRenderingIsNeeded():!1}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render(),this._actualShouldRender=0}_render(){const e=this._settings.backgroundColor;if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(e?Ce.Format.CSS.formatHexA(e):""),this._domNode.setDisplay("none");return}const t=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme);if(t.sort($_.compareByRenderingProps),this._actualShouldRender===1&&!$_.equalsArr(this._renderedDecorations,t)&&(this._actualShouldRender=2),this._actualShouldRender===1&&!Gs(this._renderedCursorPositions,this._cursorPositions,(g,m)=>g.position.lineNumber===m.position.lineNumber&&g.color===m.color)&&(this._actualShouldRender=2),this._actualShouldRender===1)return;this._renderedDecorations=t,this._renderedCursorPositions=this._cursorPositions,this._domNode.setDisplay("block");const i=this._settings.canvasWidth,s=this._settings.canvasHeight,r=this._settings.lineHeight,o=this._context.viewLayout,a=this._context.viewLayout.getScrollHeight(),l=s/a,c=6*this._settings.pixelRatio|0,d=c/2|0,u=this._domNode.domNode.getContext("2d");e?e.isOpaque()?(u.fillStyle=Ce.Format.CSS.formatHexA(e),u.fillRect(0,0,i,s)):(u.clearRect(0,0,i,s),u.fillStyle=Ce.Format.CSS.formatHexA(e),u.fillRect(0,0,i,s)):u.clearRect(0,0,i,s);const h=this._settings.x,f=this._settings.w;for(const g of t){const m=g.color,p=g.data;u.fillStyle=m;let b=0,w=0,v=0;for(let _=0,y=p.length/3;_<y;_++){const C=p[3*_],S=p[3*_+1],k=p[3*_+2];let I=o.getVerticalOffsetForLineNumber(S)*l|0,T=(o.getVerticalOffsetForLineNumber(k)+r)*l|0;if(T-I<c){let M=(I+T)/2|0;M<d?M=d:M+d>s&&(M=s-d),I=M-d,T=M+d}I>v+1||C!==b?(_!==0&&u.fillRect(h[b],w,f[b],v-w),b=C,w=I,v=T):T>v&&(v=T)}u.fillRect(h[b],w,f[b],v-w)}if(!this._settings.hideCursor){const g=2*this._settings.pixelRatio|0,m=g/2|0,p=this._settings.x[7],b=this._settings.w[7];let w=-100,v=-100,_=null;for(let y=0,C=this._cursorPositions.length;y<C;y++){const S=this._cursorPositions[y].color;if(!S)continue;const k=this._cursorPositions[y].position;let I=o.getVerticalOffsetForLineNumber(k.lineNumber)*l|0;I<m?I=m:I+m>s&&(I=s-m);const T=I-m,D=T+g;T>v+1||S!==_?(y!==0&&_&&u.fillRect(p,w,b,v-w),w=T,v=D):D>v&&(v=D),_=S,u.fillStyle=S}_&&u.fillRect(p,w,b,v-w)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(u.beginPath(),u.lineWidth=1,u.strokeStyle=this._settings.borderColor,u.moveTo(0,0),u.lineTo(0,s),u.stroke(),u.moveTo(0,0),u.lineTo(i,0),u.stroke())}}class EU{constructor(e,t,i){this._colorZoneBrand=void 0,this.from=e|0,this.to=t|0,this.colorId=i|0}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}}class ise{constructor(e,t,i,s){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=t,this.heightInLines=i,this.color=s,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.heightInLines===t.heightInLines?e.endLineNumber-t.endLineNumber:e.heightInLines-t.heightInLines:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}}class oVe{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(ise.compare)}setLineHeight(e){return this._lineHeight===e?!1:(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth===e?!1:(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight===e?!1:(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight===e?!1:(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),i=Math.floor(this.getCanvasHeight()),s=Math.floor(this._outerHeight),r=i/s,o=Math.floor(4*this._pixelRatio/2),a=[];for(let l=0,c=this._zones.length;l<c;l++){const d=this._zones[l];if(!e){const _=d.getColorZones();if(_){a.push(_);continue}}const u=this._getVerticalOffsetForLine(d.startLineNumber),h=d.heightInLines===0?this._getVerticalOffsetForLine(d.endLineNumber)+t:u+d.heightInLines*t,f=Math.floor(r*u),g=Math.floor(r*h);let m=Math.floor((f+g)/2),p=g-m;p<o&&(p=o),m-p<0&&(m=p),m+p>i&&(m=i-p);const b=d.color;let w=this._color2Id[b];w||(w=++this._lastAssignedId,this._color2Id[b]=w,this._id2Color[w]=b);const v=new EU(m-p,m+p,w);d.setColorZone(v),a.push(v)}return this._colorZonesInvalid=!1,a.sort(EU.compare),a}}class aVe extends yw{constructor(e,t){super(),this._context=e;const i=this._context.configuration.options;this._domNode=di(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new oVe(s=>this._context.viewLayout.getVerticalOffsetForLineNumber(s)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(i.get(67)),this._zoneManager.setPixelRatio(i.get(143)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return e.hasChanged(67)&&(this._zoneManager.setLineHeight(t.get(67)),this._render()),e.hasChanged(143)&&(this._zoneManager.setPixelRatio(t.get(143)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;const e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),i=this._zoneManager.resolveColorZones(),s=this._zoneManager.getId2Color(),r=this._domNode.domNode.getContext("2d");return r.clearRect(0,0,e,t),i.length>0&&this._renderOneLane(r,i,s,e),!0}_renderOneLane(e,t,i,s){let r=0,o=0,a=0;for(const l of t){const c=l.colorId,d=l.from,u=l.to;c!==r?(e.fillRect(0,o,s,a-o),r=c,e.fillStyle=i[r],o=d,a=u):a>=d?a=Math.max(a,u):(e.fillRect(0,o,s,a-o),o=d,a=u)}e.fillRect(0,o,s,a-o)}}class lVe extends vo{constructor(e){super(e),this.domNode=di(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const t=this._context.configuration.options;this._rulers=t.get(102),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._rulers=t.get(102),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){const e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){const{tabSize:s}=this._context.viewModel.model.getOptions(),r=s;let o=t-e;for(;o>0;){const a=di(document.createElement("div"));a.setClassName("view-ruler"),a.setWidth(r),this.domNode.appendChild(a),this._renderedRulers.push(a),o--}return}let i=e-t;for(;i>0;){const s=this._renderedRulers.pop();this.domNode.removeChild(s),i--}}render(e){this._ensureRulersCount();for(let t=0,i=this._rulers.length;t<i;t++){const s=this._renderedRulers[t],r=this._rulers[t];s.setBoxShadow(r.color?`1px 0 0 0 ${r.color} inset`:""),s.setHeight(Math.min(e.scrollHeight,1e6)),s.setLeft(r.column*this._typicalHalfwidthCharacterWidth)}}}class cVe extends vo{constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const i=this._context.configuration.options.get(103);this._useShadows=i.useShadows,this._domNode=di(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e?(this._shouldShow=e,!0):!1}getDomNode(){return this._domNode}_updateWidth(){const t=this._context.configuration.options.get(145);t.minimap.renderMinimap===0||t.minimap.minimapWidth>0&&t.minimap.minimapLeft===0?this._width=t.width:this._width=t.width-t.verticalScrollbarWidth}onConfigurationChanged(e){const i=this._context.configuration.options.get(103);return this._useShadows=i.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}class dVe{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}}class uVe{constructor(e,t){this.lineNumber=e,this.ranges=t}}function hVe(n){return new dVe(n)}function fVe(n){return new uVe(n.lineNumber,n.ranges.map(hVe))}class Sn extends gm{constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;const t=this._context.configuration.options;this._roundedSelection=t.get(101),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._roundedSelection=t.get(101),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,i=e.length;t<i;t++)if(e[t].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(e,t,i){const s=this._typicalHalfwidthCharacterWidth/4;let r=null,o=null;if(i&&i.length>0&&t.length>0){const a=t[0].lineNumber;if(a===e.startLineNumber)for(let c=0;!r&&c<i.length;c++)i[c].lineNumber===a&&(r=i[c].ranges[0]);const l=t[t.length-1].lineNumber;if(l===e.endLineNumber)for(let c=i.length-1;!o&&c>=0;c--)i[c].lineNumber===l&&(o=i[c].ranges[0]);r&&!r.startStyle&&(r=null),o&&!o.startStyle&&(o=null)}for(let a=0,l=t.length;a<l;a++){const c=t[a].ranges[0],d=c.left,u=c.left+c.width,h={top:0,bottom:0},f={top:0,bottom:0};if(a>0){const g=t[a-1].ranges[0].left,m=t[a-1].ranges[0].left+t[a-1].ranges[0].width;Ry(d-g)<s?h.top=2:d>g&&(h.top=1),Ry(u-m)<s?f.top=2:g<u&&u<m&&(f.top=1)}else r&&(h.top=r.startStyle.top,f.top=r.endStyle.top);if(a+1<l){const g=t[a+1].ranges[0].left,m=t[a+1].ranges[0].left+t[a+1].ranges[0].width;Ry(d-g)<s?h.bottom=2:g<d&&d<m&&(h.bottom=1),Ry(u-m)<s?f.bottom=2:u<m&&(f.bottom=1)}else o&&(h.bottom=o.startStyle.bottom,f.bottom=o.endStyle.bottom);c.startStyle=h,c.endStyle=f}}_getVisibleRangesWithStyle(e,t,i){const r=(t.linesVisibleRangesForRange(e,!0)||[]).map(fVe);return!this._visibleRangesHaveGaps(r)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,r,i),r}_createSelectionPiece(e,t,i,s,r){return'<div class="cslr '+i+'" style="top:'+e.toString()+"px;bottom:"+t.toString()+"px;left:"+s.toString()+"px;width:"+r.toString()+'px;"></div>'}_actualRenderOneSelection(e,t,i,s){if(s.length===0)return;const r=!!s[0].ranges[0].startStyle,o=s[0].lineNumber,a=s[s.length-1].lineNumber;for(let l=0,c=s.length;l<c;l++){const d=s[l],u=d.lineNumber,h=u-t,f=i&&u===o?1:0,g=i&&u!==o&&u===a?1:0;let m="",p="";for(let b=0,w=d.ranges.length;b<w;b++){const v=d.ranges[b];if(r){const y=v.startStyle,C=v.endStyle;if(y.top===1||y.bottom===1){m+=this._createSelectionPiece(f,g,Sn.SELECTION_CLASS_NAME,v.left-Sn.ROUNDED_PIECE_WIDTH,Sn.ROUNDED_PIECE_WIDTH);let S=Sn.EDITOR_BACKGROUND_CLASS_NAME;y.top===1&&(S+=" "+Sn.SELECTION_TOP_RIGHT),y.bottom===1&&(S+=" "+Sn.SELECTION_BOTTOM_RIGHT),m+=this._createSelectionPiece(f,g,S,v.left-Sn.ROUNDED_PIECE_WIDTH,Sn.ROUNDED_PIECE_WIDTH)}if(C.top===1||C.bottom===1){m+=this._createSelectionPiece(f,g,Sn.SELECTION_CLASS_NAME,v.left+v.width,Sn.ROUNDED_PIECE_WIDTH);let S=Sn.EDITOR_BACKGROUND_CLASS_NAME;C.top===1&&(S+=" "+Sn.SELECTION_TOP_LEFT),C.bottom===1&&(S+=" "+Sn.SELECTION_BOTTOM_LEFT),m+=this._createSelectionPiece(f,g,S,v.left+v.width,Sn.ROUNDED_PIECE_WIDTH)}}let _=Sn.SELECTION_CLASS_NAME;if(r){const y=v.startStyle,C=v.endStyle;y.top===0&&(_+=" "+Sn.SELECTION_TOP_LEFT),y.bottom===0&&(_+=" "+Sn.SELECTION_BOTTOM_LEFT),C.top===0&&(_+=" "+Sn.SELECTION_TOP_RIGHT),C.bottom===0&&(_+=" "+Sn.SELECTION_BOTTOM_RIGHT)}p+=this._createSelectionPiece(f,g,_,v.left,v.width)}e[h][0]+=m,e[h][1]+=p}}prepareRender(e){const t=[],i=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber;for(let o=i;o<=s;o++){const a=o-i;t[a]=["",""]}const r=[];for(let o=0,a=this._selections.length;o<a;o++){const l=this._selections[o];if(l.isEmpty()){r[o]=null;continue}const c=this._getVisibleRangesWithStyle(l,e,this._previousFrameVisibleRangesWithStyle[o]);r[o]=c,this._actualRenderOneSelection(t,i,this._selections.length>1,c)}this._previousFrameVisibleRangesWithStyle=r,this._renderResult=t.map(([o,a])=>o+a)}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}Sn.SELECTION_CLASS_NAME="selected-text";Sn.SELECTION_TOP_LEFT="top-left-radius";Sn.SELECTION_BOTTOM_LEFT="bottom-left-radius";Sn.SELECTION_TOP_RIGHT="top-right-radius";Sn.SELECTION_BOTTOM_RIGHT="bottom-right-radius";Sn.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background";Sn.ROUNDED_PIECE_WIDTH=10;zl((n,e)=>{const t=n.getColor(cWe);t&&!t.isTransparent()&&e.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${t}; }`)});function Ry(n){return n<0?-n:n}class NU{constructor(e,t,i,s,r,o,a){this.top=e,this.left=t,this.paddingLeft=i,this.width=s,this.height=r,this.textContent=o,this.textContentClassName=a}}var Nd;(function(n){n[n.Single=0]="Single",n[n.MultiPrimary=1]="MultiPrimary",n[n.MultiSecondary=2]="MultiSecondary"})(Nd||(Nd={}));class RU{constructor(e,t){this._context=e;const i=this._context.configuration.options,s=i.get(50);this._cursorStyle=i.get(28),this._lineHeight=i.get(67),this._typicalHalfwidthCharacterWidth=s.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(i.get(31),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=di(document.createElement("div")),this._domNode.setClassName(`cursor ${Np}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),$s(this._domNode,s),this._domNode.setDisplay("none"),this._position=new pe(1,1),this._pluralityClass="",this.setPlurality(t),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}setPlurality(e){switch(e){default:case Nd.Single:this._pluralityClass="";break;case Nd.MultiPrimary:this._pluralityClass="cursor-primary";break;case Nd.MultiSecondary:this._pluralityClass="cursor-secondary";break}}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(50);return this._cursorStyle=t.get(28),this._lineHeight=t.get(67),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(31),this._typicalHalfwidthCharacterWidth),$s(this._domNode,i),!0}onCursorPositionChanged(e,t){return t?this._domNode.domNode.style.transitionProperty="none":this._domNode.domNode.style.transitionProperty="",this._position=e,!0}_getGraphemeAwarePosition(){const{lineNumber:e,column:t}=this._position,i=this._context.viewModel.getLineContent(e),[s,r]=HNe(i,t-1);return[new pe(e,s+1),i.substring(s,r)]}_prepareRender(e){let t="",i="";const[s,r]=this._getGraphemeAwarePosition();if(this._cursorStyle===Is.Line||this._cursorStyle===Is.LineThin){const h=e.visibleRangeForPosition(s);if(!h||h.outsideRenderedLine)return null;const f=pt(this._domNode.domNode);let g;this._cursorStyle===Is.Line?(g=pH(f,this._lineCursorWidth>0?this._lineCursorWidth:2),g>2&&(t=r,i=this._getTokenClassName(s))):g=pH(f,1);let m=h.left,p=0;g>=2&&m>=1&&(p=1,m-=p);const b=e.getVerticalOffsetForLineNumber(s.lineNumber)-e.bigNumbersDelta;return new NU(b,m,p,g,this._lineHeight,t,i)}const o=e.linesVisibleRangesForRange(new te(s.lineNumber,s.column,s.lineNumber,s.column+r.length),!1);if(!o||o.length===0)return null;const a=o[0];if(a.outsideRenderedLine||a.ranges.length===0)return null;const l=a.ranges[0],c=r==="	"?this._typicalHalfwidthCharacterWidth:l.width<1?this._typicalHalfwidthCharacterWidth:l.width;this._cursorStyle===Is.Block&&(t=r,i=this._getTokenClassName(s));let d=e.getVerticalOffsetForLineNumber(s.lineNumber)-e.bigNumbersDelta,u=this._lineHeight;return(this._cursorStyle===Is.Underline||this._cursorStyle===Is.UnderlineThin)&&(d+=this._lineHeight-2,u=2),new NU(d,l.left,0,c,u,t,i)}_getTokenClassName(e){const t=this._context.viewModel.getViewLineData(e.lineNumber),i=t.tokens.findTokenIndexAtOffset(e.column-1);return t.tokens.getClassName(i)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${this._pluralityClass} ${Np} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setPaddingLeft(this._renderData.paddingLeft),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}class e1 extends vo{constructor(e){super(e);const t=this._context.configuration.options;this._readOnly=t.get(91),this._cursorBlinking=t.get(26),this._cursorStyle=t.get(28),this._cursorSmoothCaretAnimation=t.get(27),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new RU(this._context,Nd.Single),this._secondaryCursors=[],this._renderData=[],this._domNode=di(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new lf,this._cursorFlatBlinkInterval=new VV,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){const t=this._context.configuration.options;this._readOnly=t.get(91),this._cursorBlinking=t.get(26),this._cursorStyle=t.get(28),this._cursorSmoothCaretAnimation=t.get(27),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let i=0,s=this._secondaryCursors.length;i<s;i++)this._secondaryCursors[i].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t,i){const s=this._secondaryCursors.length!==t.length||this._cursorSmoothCaretAnimation==="explicit"&&i!==3;if(this._primaryCursor.setPlurality(t.length?Nd.MultiPrimary:Nd.Single),this._primaryCursor.onCursorPositionChanged(e,s),this._updateBlinking(),this._secondaryCursors.length<t.length){const r=t.length-this._secondaryCursors.length;for(let o=0;o<r;o++){const a=new RU(this._context,Nd.MultiSecondary);this._domNode.domNode.insertBefore(a.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(a)}}else if(this._secondaryCursors.length>t.length){const r=this._secondaryCursors.length-t.length;for(let o=0;o<r;o++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let r=0;r<t.length;r++)this._secondaryCursors[r].onCursorPositionChanged(t[r],s)}onCursorStateChanged(e){const t=[];for(let s=0,r=e.selections.length;s<r;s++)t[s]=e.selections[s].getPosition();this._onCursorPositionChanged(t[0],t.slice(1),e.reason);const i=e.selections[0].isEmpty();return this._selectionIsEmpty!==i&&(this._selectionIsEmpty=i,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){const t=i=>{for(let s=0,r=e.ranges.length;s<r;s++)if(e.ranges[s].fromLineNumber<=i.lineNumber&&i.lineNumber<=e.ranges[s].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;for(const i of this._secondaryCursors)if(t(i.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const e=this._getCursorBlinking(),t=e===0,i=e===5;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!t&&!i&&(e===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},e1.BLINK_INTERVAL,pt(this._domNode.domNode)):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},e1.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case Is.Line:e+=" cursor-line-style";break;case Is.Block:e+=" cursor-block-style";break;case Is.Underline:e+=" cursor-underline-style";break;case Is.LineThin:e+=" cursor-line-thin-style";break;case Is.BlockOutline:e+=" cursor-block-outline-style";break;case Is.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;case 5:e+=" cursor-solid";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return(this._cursorSmoothCaretAnimation==="on"||this._cursorSmoothCaretAnimation==="explicit")&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,i=this._secondaryCursors.length;t<i;t++)this._secondaryCursors[t].prepareRender(e)}render(e){const t=[];let i=0;const s=this._primaryCursor.render(e);s&&(t[i++]=s);for(let r=0,o=this._secondaryCursors.length;r<o;r++){const a=this._secondaryCursors[r].render(e);a&&(t[i++]=a)}this._renderData=t}getLastRenderData(){return this._renderData}}e1.BLINK_INTERVAL=500;zl((n,e)=>{const t=[{class:".cursor",foreground:Cc,background:Md},{class:".cursor-primary",foreground:Pne,background:IFe},{class:".cursor-secondary",foreground:One,background:MFe}];for(const i of t){const s=n.getColor(i.foreground);if(s){let r=n.getColor(i.background);r||(r=s.opposite()),e.addRule(`.monaco-editor .cursors-layer ${i.class} { background-color: ${s}; border-color: ${s}; color: ${r}; }`),yh(n.type)&&e.addRule(`.monaco-editor .cursors-layer.has-selection ${i.class} { border-left: 1px solid ${r}; border-right: 1px solid ${r}; }`)}}});const oR=()=>{throw new Error("Invalid change accessor")};class gVe extends vo{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(145);this._lineHeight=t.get(67),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,this.domNode=di(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=di(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const e=this._context.viewLayout.getWhitespaces(),t=new Map;for(const s of e)t.set(s.id,s);let i=!1;return this._context.viewModel.changeWhitespace(s=>{const r=Object.keys(this._zones);for(let o=0,a=r.length;o<a;o++){const l=r[o],c=this._zones[l],d=this._computeWhitespaceProps(c.delegate);c.isInHiddenArea=d.isInHiddenArea;const u=t.get(l);u&&(u.afterLineNumber!==d.afterViewLineNumber||u.height!==d.heightInPx)&&(s.changeOneWhitespace(l,d.afterViewLineNumber,d.heightInPx),this._safeCallOnComputedHeight(c.delegate,d.heightInPx),i=!0)}}),i}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(145);return this._lineHeight=t.get(67),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,e.hasChanged(67)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){var t,i;return(i=(t=e.ordinal)!==null&&t!==void 0?t:e.afterColumn)!==null&&i!==void 0?i:1e4}_computeWhitespaceProps(e){if(e.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t;if(typeof e.afterColumn<"u")t=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{const o=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new pe(o,this._context.viewModel.model.getLineMaxColumn(o))}let i;t.column===this._context.viewModel.model.getLineMaxColumn(t.lineNumber)?i=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber+1,column:1}):i=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber,column:t.column+1});const s=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t,e.afterColumnAffinity,!0),r=e.showInHiddenAreas||this._context.viewModel.coordinatesConverter.modelPositionIsVisible(i);return{isInHiddenArea:!r,afterViewLineNumber:s.lineNumber,heightInPx:r?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.viewModel.changeWhitespace(i=>{const s={addZone:r=>(t=!0,this._addZone(i,r)),removeZone:r=>{r&&(t=this._removeZone(i,r)||t)},layoutZone:r=>{r&&(t=this._layoutZone(i,r)||t)}};mVe(e,s),s.addZone=oR,s.removeZone=oR,s.layoutZone=oR}),t}_addZone(e,t){const i=this._computeWhitespaceProps(t),r={whitespaceId:e.insertWhitespace(i.afterViewLineNumber,this._getZoneOrdinal(t),i.heightInPx,i.minWidthInPx),delegate:t,isInHiddenArea:i.isInHiddenArea,isVisible:!1,domNode:di(t.domNode),marginDomNode:t.marginDomNode?di(t.marginDomNode):null};return this._safeCallOnComputedHeight(r.delegate,i.heightInPx),r.domNode.setPosition("absolute"),r.domNode.domNode.style.width="100%",r.domNode.setDisplay("none"),r.domNode.setAttribute("monaco-view-zone",r.whitespaceId),this.domNode.appendChild(r.domNode),r.marginDomNode&&(r.marginDomNode.setPosition("absolute"),r.marginDomNode.domNode.style.width="100%",r.marginDomNode.setDisplay("none"),r.marginDomNode.setAttribute("monaco-view-zone",r.whitespaceId),this.marginDomNode.appendChild(r.marginDomNode)),this._zones[r.whitespaceId]=r,this.setShouldRender(),r.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){const i=this._zones[t];return delete this._zones[t],e.removeWhitespace(i.whitespaceId),i.domNode.removeAttribute("monaco-visible-view-zone"),i.domNode.removeAttribute("monaco-view-zone"),i.domNode.domNode.parentNode.removeChild(i.domNode.domNode),i.marginDomNode&&(i.marginDomNode.removeAttribute("monaco-visible-view-zone"),i.marginDomNode.removeAttribute("monaco-view-zone"),i.marginDomNode.domNode.parentNode.removeChild(i.marginDomNode.domNode)),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){const i=this._zones[t],s=this._computeWhitespaceProps(i.delegate);return i.isInHiddenArea=s.isInHiddenArea,e.changeOneWhitespace(i.whitespaceId,s.afterViewLineNumber,s.heightInPx),this._safeCallOnComputedHeight(i.delegate,s.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){return this._zones.hasOwnProperty(e)?!!this._zones[e].delegate.suppressMouseDown:!1}_heightInPixels(e){return typeof e.heightInPx=="number"?e.heightInPx:typeof e.heightInLines=="number"?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return typeof e.minWidthInPx=="number"?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if(typeof e.onComputedHeight=="function")try{e.onComputedHeight(t)}catch(i){gi(i)}}_safeCallOnDomNodeTop(e,t){if(typeof e.onDomNodeTop=="function")try{e.onDomNodeTop(t)}catch(i){gi(i)}}prepareRender(e){}render(e){const t=e.viewportData.whitespaceViewportData,i={};let s=!1;for(const o of t)this._zones[o.id].isInHiddenArea||(i[o.id]=o,s=!0);const r=Object.keys(this._zones);for(let o=0,a=r.length;o<a;o++){const l=r[o],c=this._zones[l];let d=0,u=0,h="none";i.hasOwnProperty(l)?(d=i[l].verticalOffset-e.bigNumbersDelta,u=i[l].height,h="block",c.isVisible||(c.domNode.setAttribute("monaco-visible-view-zone","true"),c.isVisible=!0),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(i[l].verticalOffset))):(c.isVisible&&(c.domNode.removeAttribute("monaco-visible-view-zone"),c.isVisible=!1),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),c.domNode.setTop(d),c.domNode.setHeight(u),c.domNode.setDisplay(h),c.marginDomNode&&(c.marginDomNode.setTop(d),c.marginDomNode.setHeight(u),c.marginDomNode.setDisplay(h))}s&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}function mVe(n,e){try{return n(e)}catch(t){gi(t)}}class pVe extends gm{constructor(e){super(),this._context=e,this._options=new WU(this._context.configuration),this._selection=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=new WU(this._context.configuration);return this._options.equals(t)?e.hasChanged(145):(this._options=t,!0)}onCursorStateChanged(e){return this._selection=e.selections,this._options.renderWhitespace==="selection"}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}prepareRender(e){if(this._options.renderWhitespace==="none"){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber-t+1,r=new Array(s);for(let a=0;a<s;a++)r[a]=!0;const o=this._context.viewModel.getMinimapLinesRenderingData(e.viewportData.startLineNumber,e.viewportData.endLineNumber,r);this._renderResult=[];for(let a=e.viewportData.startLineNumber;a<=e.viewportData.endLineNumber;a++){const l=a-e.viewportData.startLineNumber,c=o.data[l];let d=null;if(this._options.renderWhitespace==="selection"){const u=this._selection;for(const h of u){if(h.endLineNumber<a||h.startLineNumber>a)continue;const f=h.startLineNumber===a?h.startColumn:c.minColumn,g=h.endLineNumber===a?h.endColumn:c.maxColumn;f<g&&(d||(d=[]),d.push(new Tne(f-1,g-1)))}}this._renderResult[l]=this._applyRenderWhitespace(e,a,d,c)}}_applyRenderWhitespace(e,t,i,s){if(this._options.renderWhitespace==="selection"&&!i||this._options.renderWhitespace==="trailing"&&s.continuesWithWrappedLine)return"";const r=this._context.theme.getColor(Ed),o=this._options.renderWithSVG,a=s.content,l=this._options.stopRenderingLineAfter===-1?a.length:Math.min(this._options.stopRenderingLineAfter,a.length),c=s.continuesWithWrappedLine,d=s.minColumn-1,u=this._options.renderWhitespace==="boundary",h=this._options.renderWhitespace==="trailing",f=this._options.lineHeight,g=this._options.middotWidth,m=this._options.wsmiddotWidth,p=this._options.spaceWidth,b=Math.abs(m-p),w=Math.abs(g-p),v=b<w?11825:183,_=this._options.canUseHalfwidthRightwardsArrow;let y="",C=!1,S=fo(a),k;S===-1?(C=!0,S=l,k=l):k=sm(a);let I=0,T=i&&i[I],D=0;for(let M=d;M<l;M++){const E=a.charCodeAt(M);if(T&&M>=T.endOffset&&(I++,T=i&&i[I]),E!==9&&E!==32||h&&!C&&M<=k)continue;if(u&&M>=S&&M<=k&&E===32){const P=M-1>=0?a.charCodeAt(M-1):0,N=M+1<l?a.charCodeAt(M+1):0;if(P!==32&&N!==32)continue}if(u&&c&&M===l-1){const P=M-1>=0?a.charCodeAt(M-1):0;if(E===32&&P!==32&&P!==9)continue}if(i&&(!T||T.startOffset>M||T.endOffset<=M))continue;const W=e.visibleRangeForPosition(new pe(t,M+1));W&&(o?(D=Math.max(D,W.left),E===9?y+=this._renderArrow(f,p,W.left):y+=`<circle cx="${(W.left+p/2).toFixed(2)}" cy="${(f/2).toFixed(2)}" r="${(p/7).toFixed(2)}" />`):E===9?y+=`<div class="mwh" style="left:${W.left}px;height:${f}px;">${_?"":""}</div>`:y+=`<div class="mwh" style="left:${W.left}px;height:${f}px;">${String.fromCharCode(v)}</div>`)}return o?(D=Math.round(D+p),`<svg style="bottom:0;position:absolute;width:${D}px;height:${f}px" viewBox="0 0 ${D} ${f}" xmlns="http://www.w3.org/2000/svg" fill="${r}">`+y+"</svg>"):y}_renderArrow(e,t,i){const s=t/7,r=t,o=e/2,a=i,l={x:0,y:s/2},c={x:100/125*r,y:l.y},d={x:c.x-.2*c.x,y:c.y+.2*c.x},u={x:d.x+.1*c.x,y:d.y+.1*c.x},h={x:u.x+.35*c.x,y:u.y-.35*c.x},f={x:h.x,y:-h.y},g={x:u.x,y:-u.y},m={x:d.x,y:-d.y},p={x:c.x,y:-c.y},b={x:l.x,y:-l.y};return`<path d="M ${[l,c,d,u,h,f,g,m,p,b].map(_=>`${(a+_.x).toFixed(2)} ${(o+_.y).toFixed(2)}`).join(" L ")}" />`}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}class WU{constructor(e){const t=e.options,i=t.get(50),s=t.get(38);s==="off"?(this.renderWhitespace="none",this.renderWithSVG=!1):s==="svg"?(this.renderWhitespace=t.get(99),this.renderWithSVG=!0):(this.renderWhitespace=t.get(99),this.renderWithSVG=!1),this.spaceWidth=i.spaceWidth,this.middotWidth=i.middotWidth,this.wsmiddotWidth=i.wsmiddotWidth,this.canUseHalfwidthRightwardsArrow=i.canUseHalfwidthRightwardsArrow,this.lineHeight=t.get(67),this.stopRenderingLineAfter=t.get(117)}equals(e){return this.renderWhitespace===e.renderWhitespace&&this.renderWithSVG===e.renderWithSVG&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter}}class bVe{constructor(e,t,i,s){this.selections=e,this.startLineNumber=t.startLineNumber|0,this.endLineNumber=t.endLineNumber|0,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=t.bigNumbersDelta|0,this.lineHeight=t.lineHeight|0,this.whitespaceViewportData=i,this._model=s,this.visibleRange=new te(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewportViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}class vVe{get type(){return this._theme.type}get value(){return this._theme}constructor(e){this._theme=e}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}}class _Ve{constructor(e,t,i){this.configuration=e,this.theme=new vVe(t),this.viewModel=i,this.viewLayout=i.viewLayout}addEventHandler(e){this.viewModel.addViewEventHandler(e)}removeEventHandler(e){this.viewModel.removeViewEventHandler(e)}}var wVe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},yVe=function(n,e){return function(t,i){e(t,i,n)}};let G3=class extends yw{constructor(e,t,i,s,r,o,a){super(),this._instantiationService=a,this._shouldRecomputeGlyphMarginLanes=!1,this._selections=[new Ii(1,1,1,1)],this._renderAnimationFrame=null;const l=new b4e(t,s,r,e);this._context=new _Ve(t,i,s),this._context.addEventHandler(this),this._viewParts=[],this._textAreaHandler=this._instantiationService.createInstance(O3,this._context,l,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=di(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=di(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=di(document.createElement("div")),Al.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new T4e(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new j2(this._context,this._linesContent),this._viewZones=new gVe(this._context),this._viewParts.push(this._viewZones);const c=new rVe(this._context);this._viewParts.push(c);const d=new cVe(this._context);this._viewParts.push(d);const u=new _4e(this._context);this._viewParts.push(u),u.addDynamicOverlay(new L4e(this._context)),u.addDynamicOverlay(new Sn(this._context)),u.addDynamicOverlay(new X4e(this._context)),u.addDynamicOverlay(new x4e(this._context)),u.addDynamicOverlay(new pVe(this._context));const h=new w4e(this._context);this._viewParts.push(h),h.addDynamicOverlay(new k4e(this._context)),h.addDynamicOverlay(new K4e(this._context)),h.addDynamicOverlay(new Y4e(this._context)),h.addDynamicOverlay(new Lw(this._context)),this._glyphMarginWidgets=new R4e(this._context),this._viewParts.push(this._glyphMarginWidgets);const f=new Ag(this._context);f.getDomNode().appendChild(this._viewZones.marginDomNode),f.getDomNode().appendChild(h.getDomNode()),f.getDomNode().appendChild(this._glyphMarginWidgets.domNode),this._viewParts.push(f),this._contentWidgets=new S4e(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new e1(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new nVe(this._context,this.domNode),this._viewParts.push(this._overlayWidgets);const g=new lVe(this._context);this._viewParts.push(g);const m=new y4e(this._context);this._viewParts.push(m);const p=new iVe(this._context);if(this._viewParts.push(p),c){const b=this._scrollbar.getOverviewRulerLayoutInfo();b.parent.insertBefore(c.getDomNode(),b.insertBefore)}this._linesContent.appendChild(u.getDomNode()),this._linesContent.appendChild(g.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(f.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(d.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(p.getDomNode()),this._overflowGuardContainer.appendChild(m.domNode),this.domNode.appendChild(this._overflowGuardContainer),o?(o.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode),o.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode.domNode)):(this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this.domNode.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode)),this._applyLayout(),this._pointerHandler=this._register(new xFe(this._context,l,this._createPointerHandlerHelper()))}_computeGlyphMarginLanes(){const e=this._context.viewModel.model,t=this._context.viewModel.glyphLanes;let i=[],s=0;i=i.concat(e.getAllMarginDecorations().map(r=>{var o,a,l;const c=(a=(o=r.options.glyphMargin)===null||o===void 0?void 0:o.position)!==null&&a!==void 0?a:Ph.Center;return s=Math.max(s,r.range.endLineNumber),{range:r.range,lane:c,persist:(l=r.options.glyphMargin)===null||l===void 0?void 0:l.persistLane}})),i=i.concat(this._glyphMarginWidgets.getWidgets().map(r=>{const o=e.validateRange(r.preference.range);return s=Math.max(s,o.endLineNumber),{range:o,lane:r.preference.lane}})),i.sort((r,o)=>te.compareRangesUsingStarts(r.range,o.range)),t.reset(s);for(const r of i)t.push(r.lane,r.range,r.persist);return t}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,viewLinesDomNode:this._viewLines.getDomNode().domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{const e=this._viewCursors.getLastRenderData()||[],t=this._textAreaHandler.getLastRenderData();return new eFe(e,t)},renderNow:()=>{this.render(!0,!1)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new pe(e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPosition:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(e))}}_applyLayout(){const t=this._context.configuration.options.get(145);this.domNode.setWidth(t.width),this.domNode.setHeight(t.height),this._overflowGuardContainer.setWidth(t.width),this._overflowGuardContainer.setHeight(t.height),this._linesContent.setWidth(16777216),this._linesContent.setHeight(16777216)}_getEditorClassName(){const e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(142)+" "+V3(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onDecorationsChanged(e){return e.affectsGlyphMargin&&(this._shouldRecomputeGlyphMarginLanes=!0),!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this._context.theme.update(e.theme),this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){if(this._store.isDisposed)throw new Ai;if(this._renderAnimationFrame===null){const e=this._createCoordinatedRendering();this._renderAnimationFrame=B3.INSTANCE.scheduleCoordinatedRendering({window:pt(this.domNode.domNode),prepareRenderText:()=>{if(this._store.isDisposed)throw new Ai;try{return e.prepareRenderText()}finally{this._renderAnimationFrame=null}},renderText:()=>{if(this._store.isDisposed)throw new Ai;return e.renderText()},prepareRender:(t,i)=>{if(this._store.isDisposed)throw new Ai;return e.prepareRender(t,i)},render:(t,i)=>{if(this._store.isDisposed)throw new Ai;return e.render(t,i)}})}}_flushAccumulatedAndRenderNow(){const e=this._createCoordinatedRendering();th(()=>e.prepareRenderText());const t=th(()=>e.renderText());if(t){const[i,s]=t;th(()=>e.prepareRender(i,s)),th(()=>e.render(i,s))}}_getViewPartsToRender(){const e=[];let t=0;for(const i of this._viewParts)i.shouldRender()&&(e[t++]=i);return e}_createCoordinatedRendering(){return{prepareRenderText:()=>{if(this._shouldRecomputeGlyphMarginLanes){this._shouldRecomputeGlyphMarginLanes=!1;const e=this._computeGlyphMarginLanes();this._context.configuration.setGlyphMarginDecorationLaneCount(e.requiredLanes)}ju.onRenderStart()},renderText:()=>{if(!this.domNode.domNode.isConnected)return null;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&e.length===0)return null;const t=this._context.viewLayout.getLinesViewportData();this._context.viewModel.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);const i=new bVe(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.viewModel);return this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(i),this._viewLines.shouldRender()&&(this._viewLines.renderText(i),this._viewLines.onDidRender(),e=this._getViewPartsToRender()),[e,new AAe(this._context.viewLayout,i,this._viewLines)]},prepareRender:(e,t)=>{for(const i of e)i.prepareRender(t)},render:(e,t)=>{for(const i of e)i.render(t),i.onDidRender()}}}delegateVerticalScrollbarPointerDown(e){this._scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this._scrollbar.delegateScrollFromMouseWheelEvent(e)}restoreState(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft},1),this._context.viewModel.visibleLinesStabilized()}getOffsetForColumn(e,t){const i=this._context.viewModel.model.validatePosition({lineNumber:e,column:t}),s=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i);this._flushAccumulatedAndRenderNow();const r=this._viewLines.visibleRangeForPosition(new pe(s.lineNumber,s.column));return r?r.left:-1}getTargetAtClientPoint(e,t){const i=this._pointerHandler.getTargetAtClientPoint(e,t);return i?K2.convertViewToModelMouseTarget(i,this._context.viewModel.coordinatesConverter):null}createOverviewRuler(e){return new aVe(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(const i of this._viewParts)i.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}writeScreenReaderContent(e){this._textAreaHandler.writeScreenReaderContent(e)}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){var t,i,s,r,o,a,l,c;this._contentWidgets.setWidgetPosition(e.widget,(i=(t=e.position)===null||t===void 0?void 0:t.position)!==null&&i!==void 0?i:null,(r=(s=e.position)===null||s===void 0?void 0:s.secondaryPosition)!==null&&r!==void 0?r:null,(a=(o=e.position)===null||o===void 0?void 0:o.preference)!==null&&a!==void 0?a:null,(c=(l=e.position)===null||l===void 0?void 0:l.positionAffinity)!==null&&c!==void 0?c:null),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){this._overlayWidgets.setWidgetPosition(e.widget,e.position)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}addGlyphMarginWidget(e){this._glyphMarginWidgets.addWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}layoutGlyphMarginWidget(e){const t=e.position;this._glyphMarginWidgets.setWidgetPosition(e.widget,t)&&(this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender())}removeGlyphMarginWidget(e){this._glyphMarginWidgets.removeWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}};G3=wVe([yVe(6,Si)],G3);function th(n){try{return n()}catch(e){return gi(e),null}}class B3{constructor(){this._coordinatedRenderings=[],this._animationFrameRunners=new Map}scheduleCoordinatedRendering(e){return this._coordinatedRenderings.push(e),this._scheduleRender(e.window),{dispose:()=>{const t=this._coordinatedRenderings.indexOf(e);if(t!==-1&&(this._coordinatedRenderings.splice(t,1),this._coordinatedRenderings.length===0)){for(const[i,s]of this._animationFrameRunners)s.dispose();this._animationFrameRunners.clear()}}}}_scheduleRender(e){if(!this._animationFrameRunners.has(e)){const t=()=>{this._animationFrameRunners.delete(e),this._onRenderScheduled()};this._animationFrameRunners.set(e,Lie(e,t,100))}}_onRenderScheduled(){const e=this._coordinatedRenderings.slice(0);this._coordinatedRenderings=[];for(const i of e)th(()=>i.prepareRenderText());const t=[];for(let i=0,s=e.length;i<s;i++){const r=e[i];t[i]=th(()=>r.renderText())}for(let i=0,s=e.length;i<s;i++){const r=e[i],o=t[i];if(!o)continue;const[a,l]=o;th(()=>r.prepareRender(a,l))}for(let i=0,s=e.length;i<s;i++){const r=e[i],o=t[i];if(!o)continue;const[a,l]=o;th(()=>r.render(a,l))}}}B3.INSTANCE=new B3;class r_{constructor(e,t,i,s,r){this.injectionOffsets=e,this.injectionOptions=t,this.breakOffsets=i,this.breakOffsetsVisibleColumn=s,this.wrappedTextIndentLength=r}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(e){return e>0?this.wrappedTextIndentLength:0}getLineLength(e){const t=e>0?this.breakOffsets[e-1]:0;let s=this.breakOffsets[e]-t;return e>0&&(s+=this.wrappedTextIndentLength),s}getMaxOutputOffset(e){return this.getLineLength(e)}translateToInputOffset(e,t){e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength));let s=e===0?t:this.breakOffsets[e-1]+t;if(this.injectionOffsets!==null)for(let r=0;r<this.injectionOffsets.length&&s>this.injectionOffsets[r];r++)s<this.injectionOffsets[r]+this.injectionOptions[r].content.length?s=this.injectionOffsets[r]:s-=this.injectionOptions[r].content.length;return s}translateToOutputPosition(e,t=2){let i=e;if(this.injectionOffsets!==null)for(let s=0;s<this.injectionOffsets.length&&!(e<this.injectionOffsets[s]||t!==1&&e===this.injectionOffsets[s]);s++)i+=this.injectionOptions[s].content.length;return this.offsetInInputWithInjectionsToOutputPosition(i,t)}offsetInInputWithInjectionsToOutputPosition(e,t=2){let i=0,s=this.breakOffsets.length-1,r=0,o=0;for(;i<=s;){r=i+(s-i)/2|0;const l=this.breakOffsets[r];if(o=r>0?this.breakOffsets[r-1]:0,t===0)if(e<=o)s=r-1;else if(e>l)i=r+1;else break;else if(e<o)s=r-1;else if(e>=l)i=r+1;else break}let a=e-o;return r>0&&(a+=this.wrappedTextIndentLength),new Wy(r,a)}normalizeOutputPosition(e,t,i){if(this.injectionOffsets!==null){const s=this.outputPositionToOffsetInInputWithInjections(e,t),r=this.normalizeOffsetInInputWithInjectionsAroundInjections(s,i);if(r!==s)return this.offsetInInputWithInjectionsToOutputPosition(r,i)}if(i===0){if(e>0&&t===this.getMinOutputOffset(e))return new Wy(e-1,this.getMaxOutputOffset(e-1))}else if(i===1){const s=this.getOutputLineCount()-1;if(e<s&&t===this.getMaxOutputOffset(e))return new Wy(e+1,this.getMinOutputOffset(e+1))}return new Wy(e,t)}outputPositionToOffsetInInputWithInjections(e,t){return e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength)),(e>0?this.breakOffsets[e-1]:0)+t}normalizeOffsetInInputWithInjectionsAroundInjections(e,t){const i=this.getInjectedTextAtOffset(e);if(!i)return e;if(t===2){if(e===i.offsetInInputWithInjections+i.length&&AU(this.injectionOptions[i.injectedTextIndex].cursorStops))return i.offsetInInputWithInjections+i.length;{let s=i.offsetInInputWithInjections;if(FU(this.injectionOptions[i.injectedTextIndex].cursorStops))return s;let r=i.injectedTextIndex-1;for(;r>=0&&this.injectionOffsets[r]===this.injectionOffsets[i.injectedTextIndex]&&!(AU(this.injectionOptions[r].cursorStops)||(s-=this.injectionOptions[r].content.length,FU(this.injectionOptions[r].cursorStops)));)r--;return s}}else if(t===1||t===4){let s=i.offsetInInputWithInjections+i.length,r=i.injectedTextIndex;for(;r+1<this.injectionOffsets.length&&this.injectionOffsets[r+1]===this.injectionOffsets[r];)s+=this.injectionOptions[r+1].content.length,r++;return s}else if(t===0||t===3){let s=i.offsetInInputWithInjections,r=i.injectedTextIndex;for(;r-1>=0&&this.injectionOffsets[r-1]===this.injectionOffsets[r];)s-=this.injectionOptions[r-1].content.length,r--;return s}GV()}getInjectedText(e,t){const i=this.outputPositionToOffsetInInputWithInjections(e,t),s=this.getInjectedTextAtOffset(i);return s?{options:this.injectionOptions[s.injectedTextIndex]}:null}getInjectedTextAtOffset(e){const t=this.injectionOffsets,i=this.injectionOptions;if(t!==null){let s=0;for(let r=0;r<t.length;r++){const o=i[r].content.length,a=t[r]+s,l=t[r]+s+o;if(a>e)break;if(e<=l)return{injectedTextIndex:r,offsetInInputWithInjections:a,length:o};s+=o}}}}function AU(n){return n==null?!0:n===Fb.Right||n===Fb.Both}function FU(n){return n==null?!0:n===Fb.Left||n===Fb.Both}class Wy{constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e){return new pe(e+this.outputLineIndex,this.outputOffset+1)}}class SVe{constructor(){this.changeType=1}}class Fl{static applyInjectedText(e,t){if(!t||t.length===0)return e;let i="",s=0;for(const r of t)i+=e.substring(s,r.column-1),s=r.column-1,i+=r.options.content;return i+=e.substring(s),i}static fromDecorations(e){const t=[];for(const i of e)i.options.before&&i.options.before.content.length>0&&t.push(new Fl(i.ownerId,i.range.startLineNumber,i.range.startColumn,i.options.before,0)),i.options.after&&i.options.after.content.length>0&&t.push(new Fl(i.ownerId,i.range.endLineNumber,i.range.endColumn,i.options.after,1));return t.sort((i,s)=>i.lineNumber===s.lineNumber?i.column===s.column?i.order-s.order:i.column-s.column:i.lineNumber-s.lineNumber),t}constructor(e,t,i,s,r){this.ownerId=e,this.lineNumber=t,this.column=i,this.options=s,this.order=r}}class VU{constructor(e,t,i){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=i}}class CVe{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}}class LVe{constructor(e,t,i,s){this.changeType=4,this.injectedTexts=s,this.fromLineNumber=e,this.toLineNumber=t,this.detail=i}}class kVe{constructor(){this.changeType=5}}class Wp{constructor(e,t,i,s){this.changes=e,this.versionId=t,this.isUndoing=i,this.isRedoing=s,this.resultingSelection=null}containsEvent(e){for(let t=0,i=this.changes.length;t<i;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){const i=[].concat(e.changes).concat(t.changes),s=t.versionId,r=e.isUndoing||t.isUndoing,o=e.isRedoing||t.isRedoing;return new Wp(i,s,r,o)}}class nse{constructor(e){this.changes=e}}class dg{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=Wp.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),i=dg._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new dg(t,i)}static _mergeChangeEvents(e,t){const i=[].concat(e.changes).concat(t.changes),s=t.eol,r=t.versionId,o=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,l=e.isFlush||t.isFlush,c=e.isEolChange&&t.isEolChange;return{changes:i,eol:s,isEolChange:c,versionId:r,isUndoing:o,isRedoing:a,isFlush:l}}}const aR=mm("domLineBreaksComputer",{createHTML:n=>n});class bP{static create(e){return new bP(new WeakRef(e))}constructor(e){this.targetWindow=e}createLineBreaksComputer(e,t,i,s,r){const o=[],a=[];return{addRequest:(l,c,d)=>{o.push(l),a.push(c)},finalize:()=>xVe(HC(this.targetWindow.deref()),o,e,t,i,s,r,a)}}}function xVe(n,e,t,i,s,r,o,a){var l;function c(T){const D=a[T];if(D){const M=Fl.applyInjectedText(e[T],D),E=D.map(P=>P.options),W=D.map(P=>P.column-1);return new r_(W,E,[M.length],[],0)}else return null}if(s===-1){const T=[];for(let D=0,M=e.length;D<M;D++)T[D]=c(D);return T}const d=Math.round(s*t.typicalHalfwidthCharacterWidth),h=Math.round(i*(r===3?2:r===2?1:0)),f=Math.ceil(t.spaceWidth*h),g=document.createElement("div");$s(g,t);const m=new W2(1e4),p=[],b=[],w=[],v=[],_=[];for(let T=0;T<e.length;T++){const D=Fl.applyInjectedText(e[T],a[T]);let M=0,E=0,W=d;if(r!==0)if(M=fo(D),M===-1)M=0;else{for(let U=0;U<M;U++){const B=D.charCodeAt(U)===9?i-E%i:1;E+=B}const H=Math.ceil(t.spaceWidth*E);H+t.typicalFullwidthCharacterWidth>d?(M=0,E=0):W=d-H}const P=D.substr(M),N=TVe(P,E,i,W,m,f);p[T]=M,b[T]=E,w[T]=P,v[T]=N[0],_[T]=N[1]}const y=m.build(),C=(l=aR?.createHTML(y))!==null&&l!==void 0?l:y;g.innerHTML=C,g.style.position="absolute",g.style.top="10000",o==="keepAll"?(g.style.wordBreak="keep-all",g.style.overflowWrap="anywhere"):(g.style.wordBreak="inherit",g.style.overflowWrap="break-word"),n.document.body.appendChild(g);const S=document.createRange(),k=Array.prototype.slice.call(g.children,0),I=[];for(let T=0;T<e.length;T++){const D=k[T],M=DVe(S,D,w[T],v[T]);if(M===null){I[T]=c(T);continue}const E=p[T],W=b[T]+h,P=_[T],N=[];for(let Y=0,ne=M.length;Y<ne;Y++)N[Y]=P[M[Y]];if(E!==0)for(let Y=0,ne=M.length;Y<ne;Y++)M[Y]+=E;let H,U;const B=a[T];B?(H=B.map(Y=>Y.options),U=B.map(Y=>Y.column-1)):(H=null,U=null),I[T]=new r_(U,H,M,N,W)}return n.document.body.removeChild(g),I}function TVe(n,e,t,i,s,r){if(r!==0){const h=String(r);s.appendString('<div style="text-indent: -'),s.appendString(h),s.appendString("px; padding-left: "),s.appendString(h),s.appendString("px; box-sizing: border-box; width:")}else s.appendString('<div style="width:');s.appendString(String(i)),s.appendString('px;">');const o=n.length;let a=e,l=0;const c=[],d=[];let u=0<o?n.charCodeAt(0):0;s.appendString("<span>");for(let h=0;h<o;h++){h!==0&&h%16384===0&&s.appendString("</span><span>"),c[h]=l,d[h]=a;const f=u;u=h+1<o?n.charCodeAt(h+1):0;let g=1,m=1;switch(f){case 9:g=t-a%t,m=g;for(let p=1;p<=g;p++)p<g?s.appendCharCode(160):s.appendASCIICharCode(32);break;case 32:u===32?s.appendCharCode(160):s.appendASCIICharCode(32);break;case 60:s.appendString("&lt;");break;case 62:s.appendString("&gt;");break;case 38:s.appendString("&amp;");break;case 0:s.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:s.appendCharCode(65533);break;default:Wh(f)&&m++,f<32?s.appendCharCode(9216+f):s.appendCharCode(f)}l+=g,a+=m}return s.appendString("</span>"),c[n.length]=l,d[n.length]=a,s.appendString("</div>"),[c,d]}function DVe(n,e,t,i){if(t.length<=1)return null;const s=Array.prototype.slice.call(e.children,0),r=[];try{X3(n,s,i,0,null,t.length-1,null,r)}catch(o){return console.log(o),null}return r.length===0?null:(r.push(t.length),r)}function X3(n,e,t,i,s,r,o,a){if(i===r||(s=s||lR(n,e,t[i],t[i+1]),o=o||lR(n,e,t[r],t[r+1]),Math.abs(s[0].top-o[0].top)<=.1))return;if(i+1===r){a.push(r);return}const l=i+(r-i)/2|0,c=lR(n,e,t[l],t[l+1]);X3(n,e,t,i,s,l,c,a),X3(n,e,t,l,c,r,o,a)}function lR(n,e,t,i){return n.setStart(e[t/16384|0].firstChild,t%16384),n.setEnd(e[i/16384|0].firstChild,i%16384),n.getClientRects()}class IVe extends Le{constructor(){super(),this._editor=null,this._instantiationService=null,this._instances=this._register(new CV),this._pending=new Map,this._finishedInstantiation=[],this._finishedInstantiation[0]=!1,this._finishedInstantiation[1]=!1,this._finishedInstantiation[2]=!1,this._finishedInstantiation[3]=!1}initialize(e,t,i){this._editor=e,this._instantiationService=i;for(const s of t){if(this._pending.has(s.id)){gi(new Error(`Cannot have two contributions with the same id ${s.id}`));continue}this._pending.set(s.id,s)}this._instantiateSome(0),this._register(_y(pt(this._editor.getDomNode()),()=>{this._instantiateSome(1)})),this._register(_y(pt(this._editor.getDomNode()),()=>{this._instantiateSome(2)})),this._register(_y(pt(this._editor.getDomNode()),()=>{this._instantiateSome(3)},5e3))}saveViewState(){const e={};for(const[t,i]of this._instances)typeof i.saveViewState=="function"&&(e[t]=i.saveViewState());return e}restoreViewState(e){for(const[t,i]of this._instances)typeof i.restoreViewState=="function"&&i.restoreViewState(e[t])}get(e){return this._instantiateById(e),this._instances.get(e)||null}onBeforeInteractionEvent(){this._instantiateSome(2)}onAfterModelAttached(){var e;return _y(pt((e=this._editor)===null||e===void 0?void 0:e.getDomNode()),()=>{this._instantiateSome(1)},50)}_instantiateSome(e){if(this._finishedInstantiation[e])return;this._finishedInstantiation[e]=!0;const t=this._findPendingContributionsByInstantiation(e);for(const i of t)this._instantiateById(i.id)}_findPendingContributionsByInstantiation(e){const t=[];for(const[,i]of this._pending)i.instantiation===e&&t.push(i);return t}_instantiateById(e){const t=this._pending.get(e);if(t){if(this._pending.delete(e),!this._instantiationService||!this._editor)throw new Error("Cannot instantiate contributions before being initialized!");try{const i=this._instantiationService.createInstance(t.ctor,this._editor);this._instances.set(t.id,i),typeof i.restoreViewState=="function"&&t.instantiation!==0&&console.warn(`Editor contribution '${t.id}' should be eager instantiated because it uses saveViewState / restoreViewState.`)}catch(i){gi(i)}}}}class sse{constructor(e,t,i,s,r,o,a){this.id=e,this.label=t,this.alias=i,this.metadata=s,this._precondition=r,this._run=o,this._contextKeyService=a}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(e){return this.isSupported()?this._run(e):Promise.resolve(void 0)}}const J2={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"};function Oh(n){let e=0,t=0,i=0,s=0;for(let r=0,o=n.length;r<o;r++){const a=n.charCodeAt(r);a===13?(e===0&&(t=r),e++,r+1<o&&n.charCodeAt(r+1)===10?(s|=2,r++):s|=3,i=r+1):a===10&&(s|=1,e===0&&(t=r),e++,i=r+1)}return e===0&&(t=n.length),[e,t,n.length-i,s]}class Rt{static addRange(e,t){let i=0;for(;i<t.length&&t[i].endExclusive<e.start;)i++;let s=i;for(;s<t.length&&t[s].start<=e.endExclusive;)s++;if(i===s)t.splice(i,0,e);else{const r=Math.min(e.start,t[i].start),o=Math.max(e.endExclusive,t[s-1].endExclusive);t.splice(i,s-i,new Rt(r,o))}}static tryCreate(e,t){if(!(e>t))return new Rt(e,t)}static ofLength(e){return new Rt(0,e)}static ofStartAndLength(e,t){return new Rt(e,e+t)}constructor(e,t){if(this.start=e,this.endExclusive=t,e>t)throw new Ai(`Invalid range: ${this.toString()}`)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new Rt(this.start+e,this.endExclusive+e)}deltaStart(e){return new Rt(this.start+e,this.endExclusive)}deltaEnd(e){return new Rt(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new Rt(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){const t=Math.max(this.start,e.start),i=Math.min(this.endExclusive,e.endExclusive);if(t<=i)return new Rt(t,i)}intersects(e){const t=Math.max(this.start,e.start),i=Math.min(this.endExclusive,e.endExclusive);return t<i}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new Ai(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new Ai(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}forEach(e){for(let t=this.start;t<this.endExclusive;t++)e(t)}}class vP{constructor(){this._sortedRanges=[]}addRange(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<e.start;)t++;let i=t;for(;i<this._sortedRanges.length&&this._sortedRanges[i].start<=e.endExclusive;)i++;if(t===i)this._sortedRanges.splice(t,0,e);else{const s=Math.min(e.start,this._sortedRanges[t].start),r=Math.max(e.endExclusive,this._sortedRanges[i-1].endExclusive);this._sortedRanges.splice(t,i-t,new Rt(s,r))}}toString(){return this._sortedRanges.map(e=>e.toString()).join(", ")}intersectsStrict(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<=e.start;)t++;return t<this._sortedRanges.length&&this._sortedRanges[t].start<e.endExclusive}intersectWithRange(e){const t=new vP;for(const i of this._sortedRanges){const s=i.intersect(e);s&&t.addRange(s)}return t}intersectWithRangeLength(e){return this.intersectWithRange(e).length}get length(){return this._sortedRanges.reduce((e,t)=>e+t.length,0)}}class Lt{static fromRangeInclusive(e){return new Lt(e.startLineNumber,e.endLineNumber+1)}static joinMany(e){if(e.length===0)return[];let t=new $o(e[0].slice());for(let i=1;i<e.length;i++)t=t.getUnion(new $o(e[i].slice()));return t.ranges}static join(e){if(e.length===0)throw new Ai("lineRanges cannot be empty");let t=e[0].startLineNumber,i=e[0].endLineNumberExclusive;for(let s=1;s<e.length;s++)t=Math.min(t,e[s].startLineNumber),i=Math.max(i,e[s].endLineNumberExclusive);return new Lt(t,i)}static ofLength(e,t){return new Lt(e,e+t)}static deserialize(e){return new Lt(e[0],e[1])}constructor(e,t){if(e>t)throw new Ai(`startLineNumber ${e} cannot be after endLineNumberExclusive ${t}`);this.startLineNumber=e,this.endLineNumberExclusive=t}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new Lt(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new Lt(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new Lt(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){const t=Math.max(this.startLineNumber,e.startLineNumber),i=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(t<=i)return new Lt(t,i)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new te(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new te(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){const t=[];for(let i=this.startLineNumber;i<this.endLineNumberExclusive;i++)t.push(e(i));return t}forEach(e){for(let t=this.startLineNumber;t<this.endLineNumberExclusive;t++)e(t)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new Rt(this.startLineNumber-1,this.endLineNumberExclusive-1)}}class $o{constructor(e=[]){this._normalizedRanges=e}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;const t=J_(this._normalizedRanges,s=>s.endLineNumberExclusive>=e.startLineNumber),i=j_(this._normalizedRanges,s=>s.startLineNumber<=e.endLineNumberExclusive)+1;if(t===i)this._normalizedRanges.splice(t,0,e);else if(t===i-1){const s=this._normalizedRanges[t];this._normalizedRanges[t]=s.join(e)}else{const s=this._normalizedRanges[t].join(this._normalizedRanges[i-1]).join(e);this._normalizedRanges.splice(t,i-t,s)}}contains(e){const t=Vb(this._normalizedRanges,i=>i.startLineNumber<=e);return!!t&&t.endLineNumberExclusive>e}intersects(e){const t=Vb(this._normalizedRanges,i=>i.startLineNumber<e.endLineNumberExclusive);return!!t&&t.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;const t=[];let i=0,s=0,r=null;for(;i<this._normalizedRanges.length||s<e._normalizedRanges.length;){let o=null;if(i<this._normalizedRanges.length&&s<e._normalizedRanges.length){const a=this._normalizedRanges[i],l=e._normalizedRanges[s];a.startLineNumber<l.startLineNumber?(o=a,i++):(o=l,s++)}else i<this._normalizedRanges.length?(o=this._normalizedRanges[i],i++):(o=e._normalizedRanges[s],s++);r===null?r=o:r.endLineNumberExclusive>=o.startLineNumber?r=new Lt(r.startLineNumber,Math.max(r.endLineNumberExclusive,o.endLineNumberExclusive)):(t.push(r),r=o)}return r!==null&&t.push(r),new $o(t)}subtractFrom(e){const t=J_(this._normalizedRanges,o=>o.endLineNumberExclusive>=e.startLineNumber),i=j_(this._normalizedRanges,o=>o.startLineNumber<=e.endLineNumberExclusive)+1;if(t===i)return new $o([e]);const s=[];let r=e.startLineNumber;for(let o=t;o<i;o++){const a=this._normalizedRanges[o];a.startLineNumber>r&&s.push(new Lt(r,a.startLineNumber)),r=a.endLineNumberExclusive}return r<e.endLineNumberExclusive&&s.push(new Lt(r,e.endLineNumberExclusive)),new $o(s)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){const t=[];let i=0,s=0;for(;i<this._normalizedRanges.length&&s<e._normalizedRanges.length;){const r=this._normalizedRanges[i],o=e._normalizedRanges[s],a=r.intersect(o);a&&!a.isEmpty&&t.push(a),r.endLineNumberExclusive<o.endLineNumberExclusive?i++:s++}return new $o(t)}getWithDelta(e){return new $o(this._normalizedRanges.map(t=>t.delta(e)))}}class PU{constructor(e,t,i,s){this.range=e,this.nestingLevel=t,this.nestingLevelOfEqualBracketType=i,this.isInvalid=s}}class MVe{constructor(e,t,i,s,r,o){this.range=e,this.openingBracketRange=t,this.closingBracketRange=i,this.nestingLevel=s,this.nestingLevelOfEqualBracketType=r,this.bracketPairNode=o}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}}class EVe extends MVe{constructor(e,t,i,s,r,o,a){super(e,t,i,s,r,o),this.minVisibleColumnIndentation=a}}class sa{static betweenPositions(e,t){return e.lineNumber===t.lineNumber?new sa(0,t.column-e.column):new sa(t.lineNumber-e.lineNumber,t.column-1)}static ofRange(e){return sa.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let t=0,i=0;for(const s of e)s===`
`?(t++,i=0):i++;return new sa(t,i)}constructor(e,t){this.lineCount=e,this.columnCount=t}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}createRange(e){return this.lineCount===0?new te(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new te(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}addToPosition(e){return this.lineCount===0?new pe(e.lineNumber,e.column+this.columnCount):new pe(e.lineNumber+this.lineCount,this.columnCount+1)}toString(){return`${this.lineCount},${this.columnCount}`}}sa.zero=new sa(0,0);function NVe(n,e,t,i){return n!==t?Rn(t-n,i):Rn(0,i-e)}const Ur=0;function CL(n){return n===0}const Mo=2**26;function Rn(n,e){return n*Mo+e}function aa(n){const e=n,t=Math.floor(e/Mo),i=e-t*Mo;return new sa(t,i)}function RVe(n){return Math.floor(n/Mo)}function Un(n,e){let t=n+e;return e>=Mo&&(t=t-n%Mo),t}function WVe(n,e){return n.reduce((t,i)=>Un(t,e(i)),Ur)}function rse(n,e){return n===e}function t1(n,e){const t=n,i=e;if(i-t<=0)return Ur;const r=Math.floor(t/Mo),o=Math.floor(i/Mo),a=i-o*Mo;if(r===o){const l=t-r*Mo;return Rn(0,a-l)}else return Rn(o-r,a)}function Ap(n,e){return n<e}function Fp(n,e){return n<=e}function Pv(n,e){return n>=e}function pp(n){return Rn(n.lineNumber-1,n.column-1)}function ug(n,e){const t=n,i=Math.floor(t/Mo),s=t-i*Mo,r=e,o=Math.floor(r/Mo),a=r-o*Mo;return new te(i+1,s+1,o+1,a+1)}function AVe(n){const e=w0(n);return Rn(e.length-1,e[e.length-1].length)}class Rd{static fromModelContentChanges(e){return e.map(i=>{const s=te.lift(i.range);return new Rd(pp(s.getStartPosition()),pp(s.getEndPosition()),AVe(i.text))}).reverse()}constructor(e,t,i){this.startOffset=e,this.endOffset=t,this.newLength=i}toString(){return`[${aa(this.startOffset)}...${aa(this.endOffset)}) -> ${aa(this.newLength)}`}}class FVe{constructor(e){this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map(t=>_P.from(t))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);const t=this.edits[this.nextEditIdx],i=t?this.translateOldToCur(t.offsetObj):null;return i===null?null:t1(e,i)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?Rn(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):Rn(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){const t=aa(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?Rn(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):Rn(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){const t=this.edits[this.nextEditIdx],i=this.translateOldToCur(t.endOffsetAfterObj);if(Fp(i,e)){this.nextEditIdx++;const s=aa(i),r=aa(this.translateOldToCur(t.endOffsetBeforeObj)),o=s.lineCount-r.lineCount;this.deltaOldToNewLineCount+=o;const a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,l=s.columnCount-r.columnCount;this.deltaOldToNewColumnCount=a+l,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}}class _P{static from(e){return new _P(e.startOffset,e.endOffset,e.newLength)}constructor(e,t,i){this.endOffsetBeforeObj=aa(t),this.endOffsetAfterObj=aa(Un(e,i)),this.offsetObj=aa(e)}}const KS=[];class zn{static create(e,t){if(e<=128&&t.length===0){let i=zn.cache[e];return i||(i=new zn(e,t),zn.cache[e]=i),i}return new zn(e,t)}static getEmpty(){return this.empty}constructor(e,t){this.items=e,this.additionalItems=t}add(e,t){const i=t.getKey(e);let s=i>>5;if(s===0){const o=1<<i|this.items;return o===this.items?this:zn.create(o,this.additionalItems)}s--;const r=this.additionalItems.slice(0);for(;r.length<s;)r.push(0);return r[s]|=1<<(i&31),zn.create(this.items,r)}merge(e){const t=this.items|e.items;if(this.additionalItems===KS&&e.additionalItems===KS)return t===this.items?this:t===e.items?e:zn.create(t,KS);const i=[];for(let s=0;s<Math.max(this.additionalItems.length,e.additionalItems.length);s++){const r=this.additionalItems[s]||0,o=e.additionalItems[s]||0;i.push(r|o)}return zn.create(t,i)}intersects(e){if(this.items&e.items)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if(this.additionalItems[t]&e.additionalItems[t])return!0;return!1}}zn.cache=new Array(129);zn.empty=zn.create(0,KS);const OU={getKey(n){return n}};class VVe{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}}class wP{get length(){return this._length}constructor(e){this._length=e}}class i1 extends wP{static create(e,t,i){let s=e.length;return t&&(s=Un(s,t.length)),i&&(s=Un(s,i.length)),new i1(s,e,t,i,t?t.missingOpeningBracketIds:zn.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const e=[];return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}constructor(e,t,i,s,r){super(e),this.openingBracket=t,this.child=i,this.closingBracket=s,this.missingOpeningBracketIds=r}canBeReused(e){return!(this.closingBracket===null||e.intersects(this.missingOpeningBracketIds))}deepClone(){return new i1(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation(Un(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}}class Vc extends wP{static create23(e,t,i,s=!1){let r=e.length,o=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw new Error("Invalid list heights");if(r=Un(r,t.length),o=o.merge(t.missingOpeningBracketIds),i){if(e.listHeight!==i.listHeight)throw new Error("Invalid list heights");r=Un(r,i.length),o=o.merge(i.missingOpeningBracketIds)}return s?new PVe(r,e.listHeight+1,e,t,i,o):new n1(r,e.listHeight+1,e,t,i,o)}static getEmpty(){return new OVe(Ur,0,[],zn.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}constructor(e,t,i){super(e),this.listHeight=t,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const e=this.childrenLength;if(e===0)return;const t=this.getChild(e-1),i=t.kind===4?t.toMutable():t;return t!==i&&this.setChild(e-1,i),i}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;const t=this.getChild(0),i=t.kind===4?t.toMutable():t;return t!==i&&this.setChild(0,i),i}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds)||this.childrenLength===0)return!1;let t=this;for(;t.kind===4;){const i=t.childrenLength;if(i===0)throw new Ai;t=t.getChild(i-1)}return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();const e=this.childrenLength;let t=this.getChild(0).length,i=this.getChild(0).missingOpeningBracketIds;for(let s=1;s<e;s++){const r=this.getChild(s);t=Un(t,r.length),i=i.merge(r.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}computeMinIndentation(e,t){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let i=Number.MAX_SAFE_INTEGER,s=e;for(let r=0;r<this.childrenLength;r++){const o=this.getChild(r);o&&(i=Math.min(i,o.computeMinIndentation(s,t)),s=Un(s,o.length))}return this.cachedMinIndentation=i,i}}class n1 extends Vc{get childrenLength(){return this._item3!==null?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,t){switch(e){case 0:this._item1=t;return;case 1:this._item2=t;return;case 2:this._item3=t;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}constructor(e,t,i,s,r,o){super(e,t,o),this._item1=i,this._item2=s,this._item3=r}deepClone(){return new n1(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}}class PVe extends n1{toMutable(){return new n1(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}class LL extends Vc{get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}constructor(e,t,i,s){super(e,t,s),this._children=i}deepClone(){const e=new Array(this._children.length);for(let t=0;t<this._children.length;t++)e[t]=this._children[t].deepClone();return new LL(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}}class OVe extends LL{toMutable(){return new LL(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}const ZVe=[];class yP extends wP{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return ZVe}deepClone(){return this}}class Of extends yP{get kind(){return 0}get missingOpeningBracketIds(){return zn.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){const i=aa(e),s=(i.columnCount===0?i.lineCount:i.lineCount+1)+1,r=RVe(Un(e,this.length))+1;let o=Number.MAX_SAFE_INTEGER;for(let a=s;a<=r;a++){const l=t.getLineFirstNonWhitespaceColumn(a),c=t.getLineContent(a);if(l===0)continue;const d=ns.visibleColumnFromColumn(c,l,t.getOptions().tabSize);o=Math.min(o,d)}return o}}class kL extends yP{static create(e,t,i){return new kL(e,t,i)}get kind(){return 1}get missingOpeningBracketIds(){return zn.getEmpty()}constructor(e,t,i){super(e),this.bracketInfo=t,this.bracketIds=i}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(e){return!1}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}class GVe extends yP{get kind(){return 3}constructor(e,t){super(t),this.missingOpeningBracketIds=e}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}let Zu=class{constructor(e,t,i,s,r){this.length=e,this.kind=t,this.bracketId=i,this.bracketIds=s,this.astNode=r}};class BVe{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new XVe(this.textModel,this.bracketTokens),this._offset=Ur,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return Rn(this.textBufferLineCount-1,this.textBufferLastLineLength)}skip(e){this.didPeek=!1,this._offset=Un(this._offset,e);const t=aa(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=Un(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}class XVe{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.line!==null&&(this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset))):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const r=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=r.length,r}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const e=this.lineIdx,t=this.lineCharOffset;let i=0;for(;;){const r=this.lineTokens,o=r.getCount();let a=null;if(this.lineTokenOffset<o){const l=r.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<o&&l===r.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const c=oo.getTokenType(l)===0,d=oo.containsBalancedBrackets(l),u=r.getEndOffset(this.lineTokenOffset);if(d&&c&&this.lineCharOffset<u){const h=r.getLanguageId(this.lineTokenOffset),f=this.line.substring(this.lineCharOffset,u),g=this.bracketTokens.getSingleLanguageBracketTokens(h),m=g.regExpGlobal;if(m){m.lastIndex=0;const p=m.exec(f);p&&(a=g.getToken(p[0]),a&&(this.lineCharOffset+=p.index))}}if(i+=u-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=a.length,a;else this.lineTokenOffset++,this.lineCharOffset=u}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,i+=33,i>1e3))break;if(i>1500)break}const s=NVe(e,t,this.lineIdx,this.lineCharOffset);return new Zu(s,0,-1,zn.getEmpty(),new Of(s))}}class zVe{constructor(e,t){this.text=e,this._offset=Ur,this.idx=0;const i=t.getRegExpStr(),s=i?new RegExp(i+`|
`,"gi"):null,r=[];let o,a=0,l=0,c=0,d=0;const u=[];for(let g=0;g<60;g++)u.push(new Zu(Rn(0,g),0,-1,zn.getEmpty(),new Of(Rn(0,g))));const h=[];for(let g=0;g<60;g++)h.push(new Zu(Rn(1,g),0,-1,zn.getEmpty(),new Of(Rn(1,g))));if(s)for(s.lastIndex=0;(o=s.exec(e))!==null;){const g=o.index,m=o[0];if(m===`
`)a++,l=g+1;else{if(c!==g){let p;if(d===a){const b=g-c;if(b<u.length)p=u[b];else{const w=Rn(0,b);p=new Zu(w,0,-1,zn.getEmpty(),new Of(w))}}else{const b=a-d,w=g-l;if(b===1&&w<h.length)p=h[w];else{const v=Rn(b,w);p=new Zu(v,0,-1,zn.getEmpty(),new Of(v))}}r.push(p)}r.push(t.getToken(m)),c=g+m.length,d=a}}const f=e.length;if(c!==f){const g=d===a?Rn(0,f-c):Rn(a-d,f-l);r.push(new Zu(g,0,-1,zn.getEmpty(),new Of(g)))}this.length=Rn(a,f-l),this.tokens=r}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new HEe}}class SP{static createFromLanguage(e,t){function i(r){return t.getKey(`${r.languageId}:::${r.bracketText}`)}const s=new Map;for(const r of e.bracketsNew.openingBrackets){const o=Rn(0,r.bracketText.length),a=i(r),l=zn.getEmpty().add(a,OU);s.set(r.bracketText,new Zu(o,1,a,l,kL.create(o,r,l)))}for(const r of e.bracketsNew.closingBrackets){const o=Rn(0,r.bracketText.length);let a=zn.getEmpty();const l=r.getOpeningBrackets();for(const c of l)a=a.add(i(c),OU);s.set(r.bracketText,new Zu(o,2,i(l[0]),a,kL.create(o,r,a)))}return new SP(s)}constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}getRegExpStr(){if(this.isEmpty)return null;{const e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(t=>HVe(t)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e.toLowerCase())}findClosingTokenText(e){for(const[t,i]of this.map)if(i.kind===2&&i.bracketIds.intersects(e))return t}get isEmpty(){return this.map.size===0}}function HVe(n){let e=Ya(n);return/^[\w ]+/.test(n)&&(e=`\\b${e}`),/[\w ]+$/.test(n)&&(e=`${e}\\b`),e}class UVe{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){return this.languageIdToBracketTokens.has(e)}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=SP.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}}function YVe(n){if(n.length===0)return null;if(n.length===1)return n[0];let e=0;function t(){if(e>=n.length)return null;const o=e,a=n[o].listHeight;for(e++;e<n.length&&n[e].listHeight===a;)e++;return e-o>=2?ose(o===0&&e===n.length?n:n.slice(o,e),!1):n[o]}let i=t(),s=t();if(!s)return i;for(let o=t();o;o=t())ZU(i,s)<=ZU(s,o)?(i=cR(i,s),s=o):s=cR(s,o);return cR(i,s)}function ose(n,e=!1){if(n.length===0)return null;if(n.length===1)return n[0];let t=n.length;for(;t>3;){const i=t>>1;for(let s=0;s<i;s++){const r=s<<1;n[s]=Vc.create23(n[r],n[r+1],r+3===t?n[r+2]:null,e)}t=i}return Vc.create23(n[0],n[1],t>=3?n[2]:null,e)}function ZU(n,e){return Math.abs(n.listHeight-e.listHeight)}function cR(n,e){return n.listHeight===e.listHeight?Vc.create23(n,e,null,!1):n.listHeight>e.listHeight?KVe(n,e):jVe(e,n)}function KVe(n,e){n=n.toMutable();let t=n;const i=[];let s;for(;;){if(e.listHeight===t.listHeight){s=e;break}if(t.kind!==4)throw new Error("unexpected");i.push(t),t=t.makeLastElementMutable()}for(let r=i.length-1;r>=0;r--){const o=i[r];s?o.childrenLength>=3?s=Vc.create23(o.unappendChild(),s,null,!1):(o.appendChildOfSameHeight(s),s=void 0):o.handleChildrenChanged()}return s?Vc.create23(n,s,null,!1):n}function jVe(n,e){n=n.toMutable();let t=n;const i=[];for(;e.listHeight!==t.listHeight;){if(t.kind!==4)throw new Error("unexpected");i.push(t),t=t.makeFirstElementMutable()}let s=e;for(let r=i.length-1;r>=0;r--){const o=i[r];s?o.childrenLength>=3?s=Vc.create23(s,o.unprependChild(),null,!1):(o.prependChildOfSameHeight(s),s=void 0):o.handleChildrenChanged()}return s?Vc.create23(s,n,null,!1):n}class JVe{constructor(e){this.lastOffset=Ur,this.nextNodes=[e],this.offsets=[Ur],this.idxs=[]}readLongestNodeAt(e,t){if(Ap(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){const i=Q0(this.nextNodes);if(!i)return;const s=Q0(this.offsets);if(Ap(e,s))return;if(Ap(s,e))if(Un(s,i.length)<=e)this.nextNodeAfterCurrent();else{const r=dR(i);r!==-1?(this.nextNodes.push(i.getChild(r)),this.offsets.push(s),this.idxs.push(r)):this.nextNodeAfterCurrent()}else{if(t(i))return this.nextNodeAfterCurrent(),i;{const r=dR(i);if(r===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(i.getChild(r)),this.offsets.push(s),this.idxs.push(r)}}}}nextNodeAfterCurrent(){for(;;){const e=Q0(this.offsets),t=Q0(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;const i=Q0(this.nextNodes),s=dR(i,this.idxs[this.idxs.length-1]);if(s!==-1){this.nextNodes.push(i.getChild(s)),this.offsets.push(Un(e,t.length)),this.idxs[this.idxs.length-1]=s;break}else this.idxs.pop()}}}function dR(n,e=-1){for(;;){if(e++,e>=n.childrenLength)return-1;if(n.getChild(e))return e}}function Q0(n){return n.length>0?n[n.length-1]:void 0}function GU(n,e,t,i){return new $Ve(n,e,t,i).parseDocument()}class $Ve{constructor(e,t,i,s){if(this.tokenizer=e,this.createImmutableLists=s,this._itemsConstructed=0,this._itemsFromCache=0,i&&s)throw new Error("Not supported");this.oldNodeReader=i?new JVe(i):void 0,this.positionMapper=new FVe(t)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(zn.getEmpty(),0);return e||(e=Vc.getEmpty()),e}parseList(e,t){const i=[];for(;;){let r=this.tryReadChildFromCache(e);if(!r){const o=this.tokenizer.peek();if(!o||o.kind===2&&o.bracketIds.intersects(e))break;r=this.parseChild(e,t+1)}r.kind===4&&r.childrenLength===0||i.push(r)}return this.oldNodeReader?YVe(i):ose(i,this.createImmutableLists)}tryReadChildFromCache(e){if(this.oldNodeReader){const t=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(t===null||!CL(t)){const i=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),s=>t!==null&&!Ap(s.length,t)?!1:s.canBeReused(e));if(i)return this._itemsFromCache++,this.tokenizer.skip(i.length),i}}}parseChild(e,t){this._itemsConstructed++;const i=this.tokenizer.read();switch(i.kind){case 2:return new GVe(i.bracketIds,i.length);case 0:return i.astNode;case 1:{if(t>300)return new Of(i.length);const s=e.merge(i.bracketIds),r=this.parseList(s,t+1),o=this.tokenizer.peek();return o&&o.kind===2&&(o.bracketId===i.bracketId||o.bracketIds.intersects(i.bracketIds))?(this.tokenizer.read(),i1.create(i.astNode,r,o.astNode)):i1.create(i.astNode,r,null)}default:throw new Error("unexpected")}}}function xL(n,e){if(n.length===0)return e;if(e.length===0)return n;const t=new qd(BU(n)),i=BU(e);i.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let s=t.dequeue();function r(c){if(c===void 0){const u=t.takeWhile(h=>!0)||[];return s&&u.unshift(s),u}const d=[];for(;s&&!CL(c);){const[u,h]=s.splitAt(c);d.push(u),c=t1(u.lengthAfter,c),s=h??t.dequeue()}return CL(c)||d.push(new ih(!1,c,c)),d}const o=[];function a(c,d,u){if(o.length>0&&rse(o[o.length-1].endOffset,c)){const h=o[o.length-1];o[o.length-1]=new Rd(h.startOffset,d,Un(h.newLength,u))}else o.push({startOffset:c,endOffset:d,newLength:u})}let l=Ur;for(const c of i){const d=r(c.lengthBefore);if(c.modified){const u=WVe(d,f=>f.lengthBefore),h=Un(l,u);a(l,h,c.lengthAfter),l=h}else for(const u of d){const h=l;l=Un(l,u.lengthBefore),u.modified&&a(h,l,u.lengthAfter)}}return o}class ih{constructor(e,t,i){this.modified=e,this.lengthBefore=t,this.lengthAfter=i}splitAt(e){const t=t1(e,this.lengthAfter);return rse(t,Ur)?[this,void 0]:this.modified?[new ih(this.modified,this.lengthBefore,e),new ih(this.modified,Ur,t)]:[new ih(this.modified,e,e),new ih(this.modified,t,t)]}toString(){return`${this.modified?"M":"U"}:${aa(this.lengthBefore)} -> ${aa(this.lengthAfter)}`}}function BU(n){const e=[];let t=Ur;for(const i of n){const s=t1(t,i.startOffset);CL(s)||e.push(new ih(!1,s,s));const r=t1(i.startOffset,i.endOffset);e.push(new ih(!0,r,i.newLength)),t=i.endOffset}return e}class QVe extends Le{didLanguageChange(e){return this.brackets.didLanguageChange(e)}constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new ue,this.denseKeyProvider=new VVe,this.brackets=new UVe(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this.queuedTextEditsForInitialAstWithoutTokens=[],this.queuedTextEdits=[],e.tokenization.hasTokens)e.tokenization.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens);else{const i=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),s=new zVe(this.textModel.getValue(),i);this.initialAstWithoutTokens=GU(s,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}}handleDidChangeBackgroundTokenizationState(){if(this.textModel.tokenization.backgroundTokenizationState===2){const e=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,e||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:e}){const t=e.map(i=>new Rd(Rn(i.fromLineNumber-1,0),Rn(i.toLineNumber,0),Rn(i.toLineNumber-i.fromLineNumber+1,0)));this.handleEdits(t,!0),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(e){const t=Rd.fromModelContentChanges(e.changes);this.handleEdits(t,!1)}handleEdits(e,t){const i=xL(this.queuedTextEdits,e);this.queuedTextEdits=i,this.initialAstWithoutTokens&&!t&&(this.queuedTextEditsForInitialAstWithoutTokens=xL(this.queuedTextEditsForInitialAstWithoutTokens,e))}flushQueue(){this.queuedTextEdits.length>0&&(this.astWithTokens=this.parseDocumentFromTextBuffer(this.queuedTextEdits,this.astWithTokens,!1),this.queuedTextEdits=[]),this.queuedTextEditsForInitialAstWithoutTokens.length>0&&(this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(this.queuedTextEditsForInitialAstWithoutTokens,this.initialAstWithoutTokens,!1)),this.queuedTextEditsForInitialAstWithoutTokens=[])}parseDocumentFromTextBuffer(e,t,i){const s=t,r=new BVe(this.textModel,this.brackets);return GU(r,e,s,i)}getBracketsInRange(e,t){this.flushQueue();const i=Rn(e.startLineNumber-1,e.startColumn-1),s=Rn(e.endLineNumber-1,e.endColumn-1);return new Tc(r=>{const o=this.initialAstWithoutTokens||this.astWithTokens;z3(o,Ur,o.length,i,s,r,0,0,new Map,t)})}getBracketPairsInRange(e,t){this.flushQueue();const i=pp(e.getStartPosition()),s=pp(e.getEndPosition());return new Tc(r=>{const o=this.initialAstWithoutTokens||this.astWithTokens,a=new qVe(r,t,this.textModel);H3(o,Ur,o.length,i,s,a,0,new Map)})}getFirstBracketAfter(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return lse(t,Ur,t.length,pp(e))}getFirstBracketBefore(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return ase(t,Ur,t.length,pp(e))}}function ase(n,e,t,i){if(n.kind===4||n.kind===2){const s=[];for(const r of n.children)t=Un(e,r.length),s.push({nodeOffsetStart:e,nodeOffsetEnd:t}),e=t;for(let r=s.length-1;r>=0;r--){const{nodeOffsetStart:o,nodeOffsetEnd:a}=s[r];if(Ap(o,i)){const l=ase(n.children[r],o,a,i);if(l)return l}}return null}else{if(n.kind===3)return null;if(n.kind===1){const s=ug(e,t);return{bracketInfo:n.bracketInfo,range:s}}}return null}function lse(n,e,t,i){if(n.kind===4||n.kind===2){for(const s of n.children){if(t=Un(e,s.length),Ap(i,t)){const r=lse(s,e,t,i);if(r)return r}e=t}return null}else{if(n.kind===3)return null;if(n.kind===1){const s=ug(e,t);return{bracketInfo:n.bracketInfo,range:s}}}return null}function z3(n,e,t,i,s,r,o,a,l,c,d=!1){if(o>200)return!0;e:for(;;)switch(n.kind){case 4:{const u=n.childrenLength;for(let h=0;h<u;h++){const f=n.getChild(h);if(f){if(t=Un(e,f.length),Fp(e,s)&&Pv(t,i)){if(Pv(t,s)){n=f;continue e}if(!z3(f,e,t,i,s,r,o,0,l,c))return!1}e=t}}return!0}case 2:{const u=!c||!n.closingBracket||n.closingBracket.bracketInfo.closesColorized(n.openingBracket.bracketInfo);let h=0;if(l){let g=l.get(n.openingBracket.text);g===void 0&&(g=0),h=g,u&&(g++,l.set(n.openingBracket.text,g))}const f=n.childrenLength;for(let g=0;g<f;g++){const m=n.getChild(g);if(m){if(t=Un(e,m.length),Fp(e,s)&&Pv(t,i)){if(Pv(t,s)&&m.kind!==1){n=m,u?(o++,a=h+1):a=h;continue e}if((u||m.kind!==1||!n.closingBracket)&&!z3(m,e,t,i,s,r,u?o+1:o,u?h+1:h,l,c,!n.closingBracket))return!1}e=t}}return l?.set(n.openingBracket.text,h),!0}case 3:{const u=ug(e,t);return r(new PU(u,o-1,0,!0))}case 1:{const u=ug(e,t);return r(new PU(u,o-1,a-1,d))}case 0:return!0}}class qVe{constructor(e,t,i){this.push=e,this.includeMinIndentation=t,this.textModel=i}}function H3(n,e,t,i,s,r,o,a){var l;if(o>200)return!0;let c=!0;if(n.kind===2){let d=0;if(a){let f=a.get(n.openingBracket.text);f===void 0&&(f=0),d=f,f++,a.set(n.openingBracket.text,f)}const u=Un(e,n.openingBracket.length);let h=-1;if(r.includeMinIndentation&&(h=n.computeMinIndentation(e,r.textModel)),c=r.push(new EVe(ug(e,t),ug(e,u),n.closingBracket?ug(Un(u,((l=n.child)===null||l===void 0?void 0:l.length)||Ur),t):void 0,o,d,n,h)),e=u,c&&n.child){const f=n.child;if(t=Un(e,f.length),Fp(e,s)&&Pv(t,i)&&(c=H3(f,e,t,i,s,r,o+1,a),!c))return!1}a?.set(n.openingBracket.text,d)}else{let d=e;for(const u of n.children){const h=d;if(d=Un(d,u.length),Fp(h,s)&&Fp(i,d)&&(c=H3(u,h,d,i,s,r,o,a),!c))return!1}}return c}class ePe extends Le{get canBuildAST(){return this.textModel.getValueLength()<=5e6}constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t,this.bracketPairsTree=this._register(new ha),this.onDidChangeEmitter=new ue,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1,this._register(this.languageConfigurationService.onDidChange(i=>{var s;(!i.languageId||!((s=this.bracketPairsTree.value)===null||s===void 0)&&s.object.didLanguageChange(i.languageId))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}))}handleDidChangeOptions(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(e){var t;(t=this.bracketPairsTree.value)===null||t===void 0||t.object.handleContentChanged(e)}handleDidChangeBackgroundTokenizationState(){var e;(e=this.bracketPairsTree.value)===null||e===void 0||e.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(e){var t;(t=this.bracketPairsTree.value)===null||t===void 0||t.object.handleDidChangeTokens(e)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){const e=new ct;this.bracketPairsTree.value=tPe(e.add(new QVe(this.textModel,t=>this.languageConfigurationService.getLanguageConfiguration(t))),e),e.add(this.bracketPairsTree.value.object.onDidChange(t=>this.onDidChangeEmitter.fire(t))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}getBracketPairsInRange(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!1))||Tc.empty}getBracketPairsInRangeWithMinIndentation(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!0))||Tc.empty}getBracketsInRange(e,t=!1){var i;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((i=this.bracketPairsTree.value)===null||i===void 0?void 0:i.object.getBracketsInRange(e,t))||Tc.empty}findMatchingBracketUp(e,t,i){const s=this.textModel.validatePosition(t),r=this.textModel.getLanguageIdAtPosition(s.lineNumber,s.column);if(this.canBuildAST){const o=this.languageConfigurationService.getLanguageConfiguration(r).bracketsNew.getClosingBracketInfo(e);if(!o)return null;const a=this.getBracketPairsInRange(te.fromPositions(t,t)).findLast(l=>o.closes(l.openingBracketInfo));return a?a.openingBracketRange:null}else{const o=e.toLowerCase(),a=this.languageConfigurationService.getLanguageConfiguration(r).brackets;if(!a)return null;const l=a.textIsBracket[o];return l?Ay(this._findMatchingBracketUp(l,s,uR(i))):null}}matchBracket(e,t){if(this.canBuildAST){const i=this.getBracketPairsInRange(te.fromPositions(e,e)).filter(s=>s.closingBracketRange!==void 0&&(s.openingBracketRange.containsPosition(e)||s.closingBracketRange.containsPosition(e))).findLastMaxBy(Fa(s=>s.openingBracketRange.containsPosition(e)?s.openingBracketRange:s.closingBracketRange,te.compareRangesUsingStarts));return i?[i.openingBracketRange,i.closingBracketRange]:null}else{const i=uR(t);return this._matchBracket(this.textModel.validatePosition(e),i)}}_establishBracketSearchOffsets(e,t,i,s){const r=t.getCount(),o=t.getLanguageId(s);let a=Math.max(0,e.column-1-i.maxBracketLength);for(let c=s-1;c>=0;c--){const d=t.getEndOffset(c);if(d<=a)break;if(ql(t.getStandardTokenType(c))||t.getLanguageId(c)!==o){a=d;break}}let l=Math.min(t.getLineContent().length,e.column-1+i.maxBracketLength);for(let c=s+1;c<r;c++){const d=t.getStartOffset(c);if(d>=l)break;if(ql(t.getStandardTokenType(c))||t.getLanguageId(c)!==o){l=d;break}}return{searchStartOffset:a,searchEndOffset:l}}_matchBracket(e,t){const i=e.lineNumber,s=this.textModel.tokenization.getLineTokens(i),r=this.textModel.getLineContent(i),o=s.findTokenIndexAtOffset(e.column-1);if(o<0)return null;const a=this.languageConfigurationService.getLanguageConfiguration(s.getLanguageId(o)).brackets;if(a&&!ql(s.getStandardTokenType(o))){let{searchStartOffset:l,searchEndOffset:c}=this._establishBracketSearchOffsets(e,s,a,o),d=null;for(;;){const u=ya.findNextBracketInRange(a.forwardRegex,i,r,l,c);if(!u)break;if(u.startColumn<=e.column&&e.column<=u.endColumn){const h=r.substring(u.startColumn-1,u.endColumn-1).toLowerCase(),f=this._matchFoundBracket(u,a.textIsBracket[h],a.textIsOpenBracket[h],t);if(f){if(f instanceof dd)return null;d=f}}l=u.endColumn-1}if(d)return d}if(o>0&&s.getStartOffset(o)===e.column-1){const l=o-1,c=this.languageConfigurationService.getLanguageConfiguration(s.getLanguageId(l)).brackets;if(c&&!ql(s.getStandardTokenType(l))){const{searchStartOffset:d,searchEndOffset:u}=this._establishBracketSearchOffsets(e,s,c,l),h=ya.findPrevBracketInRange(c.reversedRegex,i,r,d,u);if(h&&h.startColumn<=e.column&&e.column<=h.endColumn){const f=r.substring(h.startColumn-1,h.endColumn-1).toLowerCase(),g=this._matchFoundBracket(h,c.textIsBracket[f],c.textIsOpenBracket[f],t);if(g)return g instanceof dd?null:g}}}return null}_matchFoundBracket(e,t,i,s){if(!t)return null;const r=i?this._findMatchingBracketDown(t,e.getEndPosition(),s):this._findMatchingBracketUp(t,e.getStartPosition(),s);return r?r instanceof dd?r:[e,r]:null}_findMatchingBracketUp(e,t,i){const s=e.languageId,r=e.reversedRegex;let o=-1,a=0;const l=(c,d,u,h)=>{for(;;){if(i&&++a%100===0&&!i())return dd.INSTANCE;const f=ya.findPrevBracketInRange(r,c,d,u,h);if(!f)break;const g=d.substring(f.startColumn-1,f.endColumn-1).toLowerCase();if(e.isOpen(g)?o++:e.isClose(g)&&o--,o===0)return f;h=f.startColumn-1}return null};for(let c=t.lineNumber;c>=1;c--){const d=this.textModel.tokenization.getLineTokens(c),u=d.getCount(),h=this.textModel.getLineContent(c);let f=u-1,g=h.length,m=h.length;c===t.lineNumber&&(f=d.findTokenIndexAtOffset(t.column-1),g=t.column-1,m=t.column-1);let p=!0;for(;f>=0;f--){const b=d.getLanguageId(f)===s&&!ql(d.getStandardTokenType(f));if(b)p?g=d.getStartOffset(f):(g=d.getStartOffset(f),m=d.getEndOffset(f));else if(p&&g!==m){const w=l(c,h,g,m);if(w)return w}p=b}if(p&&g!==m){const b=l(c,h,g,m);if(b)return b}}return null}_findMatchingBracketDown(e,t,i){const s=e.languageId,r=e.forwardRegex;let o=1,a=0;const l=(d,u,h,f)=>{for(;;){if(i&&++a%100===0&&!i())return dd.INSTANCE;const g=ya.findNextBracketInRange(r,d,u,h,f);if(!g)break;const m=u.substring(g.startColumn-1,g.endColumn-1).toLowerCase();if(e.isOpen(m)?o++:e.isClose(m)&&o--,o===0)return g;h=g.endColumn-1}return null},c=this.textModel.getLineCount();for(let d=t.lineNumber;d<=c;d++){const u=this.textModel.tokenization.getLineTokens(d),h=u.getCount(),f=this.textModel.getLineContent(d);let g=0,m=0,p=0;d===t.lineNumber&&(g=u.findTokenIndexAtOffset(t.column-1),m=t.column-1,p=t.column-1);let b=!0;for(;g<h;g++){const w=u.getLanguageId(g)===s&&!ql(u.getStandardTokenType(g));if(w)b||(m=u.getStartOffset(g)),p=u.getEndOffset(g);else if(b&&m!==p){const v=l(d,f,m,p);if(v)return v}b=w}if(b&&m!==p){const w=l(d,f,m,p);if(w)return w}}return null}findPrevBracket(e){var t;const i=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getFirstBracketBefore(i))||null;let s=null,r=null,o=null;for(let a=i.lineNumber;a>=1;a--){const l=this.textModel.tokenization.getLineTokens(a),c=l.getCount(),d=this.textModel.getLineContent(a);let u=c-1,h=d.length,f=d.length;if(a===i.lineNumber){u=l.findTokenIndexAtOffset(i.column-1),h=i.column-1,f=i.column-1;const m=l.getLanguageId(u);s!==m&&(s=m,r=this.languageConfigurationService.getLanguageConfiguration(s).brackets,o=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew)}let g=!0;for(;u>=0;u--){const m=l.getLanguageId(u);if(s!==m){if(r&&o&&g&&h!==f){const b=ya.findPrevBracketInRange(r.reversedRegex,a,d,h,f);if(b)return this._toFoundBracket(o,b);g=!1}s=m,r=this.languageConfigurationService.getLanguageConfiguration(s).brackets,o=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew}const p=!!r&&!ql(l.getStandardTokenType(u));if(p)g?h=l.getStartOffset(u):(h=l.getStartOffset(u),f=l.getEndOffset(u));else if(o&&r&&g&&h!==f){const b=ya.findPrevBracketInRange(r.reversedRegex,a,d,h,f);if(b)return this._toFoundBracket(o,b)}g=p}if(o&&r&&g&&h!==f){const m=ya.findPrevBracketInRange(r.reversedRegex,a,d,h,f);if(m)return this._toFoundBracket(o,m)}}return null}findNextBracket(e){var t;const i=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getFirstBracketAfter(i))||null;const s=this.textModel.getLineCount();let r=null,o=null,a=null;for(let l=i.lineNumber;l<=s;l++){const c=this.textModel.tokenization.getLineTokens(l),d=c.getCount(),u=this.textModel.getLineContent(l);let h=0,f=0,g=0;if(l===i.lineNumber){h=c.findTokenIndexAtOffset(i.column-1),f=i.column-1,g=i.column-1;const p=c.getLanguageId(h);r!==p&&(r=p,o=this.languageConfigurationService.getLanguageConfiguration(r).brackets,a=this.languageConfigurationService.getLanguageConfiguration(r).bracketsNew)}let m=!0;for(;h<d;h++){const p=c.getLanguageId(h);if(r!==p){if(a&&o&&m&&f!==g){const w=ya.findNextBracketInRange(o.forwardRegex,l,u,f,g);if(w)return this._toFoundBracket(a,w);m=!1}r=p,o=this.languageConfigurationService.getLanguageConfiguration(r).brackets,a=this.languageConfigurationService.getLanguageConfiguration(r).bracketsNew}const b=!!o&&!ql(c.getStandardTokenType(h));if(b)m||(f=c.getStartOffset(h)),g=c.getEndOffset(h);else if(a&&o&&m&&f!==g){const w=ya.findNextBracketInRange(o.forwardRegex,l,u,f,g);if(w)return this._toFoundBracket(a,w)}m=b}if(a&&o&&m&&f!==g){const p=ya.findNextBracketInRange(o.forwardRegex,l,u,f,g);if(p)return this._toFoundBracket(a,p)}}return null}findEnclosingBrackets(e,t){const i=this.textModel.validatePosition(e);if(this.canBuildAST){const f=te.fromPositions(i),g=this.getBracketPairsInRange(te.fromPositions(i,i)).findLast(m=>m.closingBracketRange!==void 0&&m.range.strictContainsRange(f));return g?[g.openingBracketRange,g.closingBracketRange]:null}const s=uR(t),r=this.textModel.getLineCount(),o=new Map;let a=[];const l=(f,g)=>{if(!o.has(f)){const m=[];for(let p=0,b=g?g.brackets.length:0;p<b;p++)m[p]=0;o.set(f,m)}a=o.get(f)};let c=0;const d=(f,g,m,p,b)=>{for(;;){if(s&&++c%100===0&&!s())return dd.INSTANCE;const w=ya.findNextBracketInRange(f.forwardRegex,g,m,p,b);if(!w)break;const v=m.substring(w.startColumn-1,w.endColumn-1).toLowerCase(),_=f.textIsBracket[v];if(_&&(_.isOpen(v)?a[_.index]++:_.isClose(v)&&a[_.index]--,a[_.index]===-1))return this._matchFoundBracket(w,_,!1,s);p=w.endColumn-1}return null};let u=null,h=null;for(let f=i.lineNumber;f<=r;f++){const g=this.textModel.tokenization.getLineTokens(f),m=g.getCount(),p=this.textModel.getLineContent(f);let b=0,w=0,v=0;if(f===i.lineNumber){b=g.findTokenIndexAtOffset(i.column-1),w=i.column-1,v=i.column-1;const y=g.getLanguageId(b);u!==y&&(u=y,h=this.languageConfigurationService.getLanguageConfiguration(u).brackets,l(u,h))}let _=!0;for(;b<m;b++){const y=g.getLanguageId(b);if(u!==y){if(h&&_&&w!==v){const S=d(h,f,p,w,v);if(S)return Ay(S);_=!1}u=y,h=this.languageConfigurationService.getLanguageConfiguration(u).brackets,l(u,h)}const C=!!h&&!ql(g.getStandardTokenType(b));if(C)_||(w=g.getStartOffset(b)),v=g.getEndOffset(b);else if(h&&_&&w!==v){const S=d(h,f,p,w,v);if(S)return Ay(S)}_=C}if(h&&_&&w!==v){const y=d(h,f,p,w,v);if(y)return Ay(y)}}return null}_toFoundBracket(e,t){if(!t)return null;let i=this.textModel.getValueInRange(t);i=i.toLowerCase();const s=e.getBracketInfo(i);return s?{range:t,bracketInfo:s}:null}}function tPe(n,e){return{object:n,dispose:()=>e?.dispose()}}function uR(n){if(typeof n>"u")return()=>!0;{const e=Date.now();return()=>Date.now()-e<=n}}class dd{constructor(){this._searchCanceledBrand=void 0}}dd.INSTANCE=new dd;function Ay(n){return n instanceof dd?null:n}class iPe extends Le{constructor(e){super(),this.textModel=e,this.colorProvider=new cse,this.onDidChangeEmitter=new ue,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.bracketPairs.onDidChange(t=>{this.onDidChangeEmitter.fire()}))}handleDidChangeOptions(e){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(e,t,i,s){return s?[]:t===void 0?[]:this.colorizationOptions.enabled?this.textModel.bracketPairs.getBracketsInRange(e,!0).map(o=>({id:`bracket${o.range.toString()}-${o.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(o,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:o.range})).toArray():[]}getAllDecorations(e,t){return e===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new te(1,1,this.textModel.getLineCount(),1),e,t):[]}}class cse{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e,t){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(t?e.nestingLevelOfEqualBracketType:e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}}zl((n,e)=>{const t=[Zne,Gne,Bne,Xne,zne,Hne],i=new cse;e.addRule(`.monaco-editor .${i.unexpectedClosingBracketClassName} { color: ${n.getColor(JFe)}; }`);const s=t.map(r=>n.getColor(r)).filter(r=>!!r).filter(r=>!r.isTransparent());for(let r=0;r<30;r++){const o=s[r%s.length];e.addRule(`.monaco-editor .${i.getInlineClassNameOfLevel(r)} { color: ${o}; }`)}});function Fy(n){return n.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class Ps{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(e,t,i,s){this.oldPosition=e,this.oldText=t,this.newPosition=i,this.newText=s}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${Fy(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${Fy(this.oldText)}")`:`(replace@${this.oldPosition} "${Fy(this.oldText)}" with "${Fy(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,i){const s=t.length;hl(e,s,i),i+=4;for(let r=0;r<s;r++)$Re(e,t.charCodeAt(r),i),i+=2;return i}static _readString(e,t){const i=ul(e,t);return t+=4,qRe(e,t,i)}writeSize(){return 8+Ps._writeStringSize(this.oldText)+Ps._writeStringSize(this.newText)}write(e,t){return hl(e,this.oldPosition,t),t+=4,hl(e,this.newPosition,t),t+=4,t=Ps._writeString(e,this.oldText,t),t=Ps._writeString(e,this.newText,t),t}static read(e,t,i){const s=ul(e,t);t+=4;const r=ul(e,t);t+=4;const o=Ps._readString(e,t);t+=Ps._writeStringSize(o);const a=Ps._readString(e,t);return t+=Ps._writeStringSize(a),i.push(new Ps(s,o,r,a)),t}}function nPe(n,e){return n===null||n.length===0?e:new ic(n,e).compress()}class ic{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,i=this._getPrev(e),s=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(i===null){this._acceptCurr(s),s=this._getCurr(++t);continue}if(s===null){this._acceptPrev(i),i=this._getPrev(++e);continue}if(s.oldEnd<=i.newPosition){this._acceptCurr(s),s=this._getCurr(++t);continue}if(i.newEnd<=s.oldPosition){this._acceptPrev(i),i=this._getPrev(++e);continue}if(s.oldPosition<i.newPosition){const[c,d]=ic._splitCurr(s,i.newPosition-s.oldPosition);this._acceptCurr(c),s=d;continue}if(i.newPosition<s.oldPosition){const[c,d]=ic._splitPrev(i,s.oldPosition-i.newPosition);this._acceptPrev(c),i=d;continue}let a,l;if(s.oldEnd===i.newEnd)a=i,l=s,i=this._getPrev(++e),s=this._getCurr(++t);else if(s.oldEnd<i.newEnd){const[c,d]=ic._splitPrev(i,s.oldLength);a=c,l=s,i=d,s=this._getCurr(++t)}else{const[c,d]=ic._splitCurr(s,i.newLength);a=i,l=c,i=this._getPrev(++e),s=d}this._result[this._resultLen++]=new Ps(a.oldPosition,a.oldText,l.newPosition,l.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=l.newLength-l.oldLength}const r=ic._merge(this._result);return ic._removeNoOps(r)}_acceptCurr(e){this._result[this._resultLen++]=ic._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=ic._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new Ps(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new Ps(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const i=e.newText.substr(0,t),s=e.newText.substr(t);return[new Ps(e.oldPosition,e.oldText,e.newPosition,i),new Ps(e.oldEnd,"",e.newPosition+t,s)]}static _splitCurr(e,t){const i=e.oldText.substr(0,t),s=e.oldText.substr(t);return[new Ps(e.oldPosition,i,e.newPosition,e.newText),new Ps(e.oldPosition+t,s,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;const t=[];let i=0,s=e[0];for(let r=1;r<e.length;r++){const o=e[r];s.oldEnd===o.oldPosition?s=new Ps(s.oldPosition,s.oldText+o.oldText,s.newPosition,s.newText+o.newText):(t[i++]=s,s=o)}return t[i++]=s,t}static _removeNoOps(e){if(e.length===0)return e;const t=[];let i=0;for(let s=0;s<e.length;s++){const r=e[s];r.oldText!==r.newText&&(t[i++]=r)}return t}}function Cu(n){return n===47||n===92}function dse(n){return n.replace(/[\\/]/g,Gn.sep)}function sPe(n){return n.indexOf("/")===-1&&(n=dse(n)),/^[a-zA-Z]:(\/|$)/.test(n)&&(n="/"+n),n}function XU(n,e=Gn.sep){if(!n)return"";const t=n.length,i=n.charCodeAt(0);if(Cu(i)){if(Cu(n.charCodeAt(1))&&!Cu(n.charCodeAt(2))){let r=3;const o=r;for(;r<t&&!Cu(n.charCodeAt(r));r++);if(o!==r&&!Cu(n.charCodeAt(r+1))){for(r+=1;r<t;r++)if(Cu(n.charCodeAt(r)))return n.slice(0,r+1).replace(/[\\/]/g,e)}}return e}else if(rPe(i)&&n.charCodeAt(1)===58)return Cu(n.charCodeAt(2))?n.slice(0,2)+e:n.slice(0,2);let s=n.indexOf("://");if(s!==-1){for(s+=3;s<t;s++)if(Cu(n.charCodeAt(s)))return n.slice(0,s+1)}return""}function U3(n,e,t,i=bh){if(n===e)return!0;if(!n||!e||e.length>n.length)return!1;if(t){if(!TV(n,e))return!1;if(e.length===n.length)return!0;let r=e.length;return e.charAt(e.length-1)===i&&r--,n.charAt(r)===i}return e.charAt(e.length-1)!==i&&(e+=i),n.indexOf(e)===0}function rPe(n){return n>=65&&n<=90||n>=97&&n<=122}function tc(n){return iL(n,!0)}class oPe{constructor(e){this._ignorePathCasing=e}compare(e,t,i=!1){return e===t?0:n3(this.getComparisonKey(e,i),this.getComparisonKey(t,i))}isEqual(e,t,i=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,i)===this.getComparisonKey(t,i)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}isEqualOrParent(e,t,i=!1){if(e.scheme===t.scheme){if(e.scheme===Mt.file)return U3(tc(e),tc(t),this._ignorePathCasing(e))&&e.query===t.query&&(i||e.fragment===t.fragment);if(HU(e.authority,t.authority))return U3(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(i||e.fragment===t.fragment)}return!1}joinPath(e,...t){return Ft.joinPath(e,...t)}basenameOrAuthority(e){return CP(e)||e.authority}basename(e){return Gn.basename(e.path)}extname(e){return Gn.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===Mt.file?t=Ft.file(u5e(tc(e))).path:(t=Gn.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===Mt.file?t=Ft.file(pie(tc(e))).path:t=Gn.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!HU(e.authority,t.authority))return;if(e.scheme===Mt.file){const r=d5e(tc(e),tc(t));return Mr?dse(r):r}let i=e.path||"/";const s=t.path||"/";if(this._ignorePathCasing(e)){let r=0;for(const o=Math.min(i.length,s.length);r<o&&!(i.charCodeAt(r)!==s.charCodeAt(r)&&i.charAt(r).toLowerCase()!==s.charAt(r).toLowerCase());r++);i=s.substr(0,r)+i.substr(r)}return Gn.relative(i,s)}resolvePath(e,t){if(e.scheme===Mt.file){const i=Ft.file(c5e(tc(e),t));return e.with({authority:i.authority,path:i.path})}return t=sPe(t),e.with({path:Gn.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&sp(e,t)}hasTrailingPathSeparator(e,t=bh){if(e.scheme===Mt.file){const i=tc(e);return i.length>XU(i).length&&i[i.length-1]===t}else{const i=e.path;return i.length>1&&i.charCodeAt(i.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=bh){return UU(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=bh){let i=!1;if(e.scheme===Mt.file){const s=tc(e);i=s!==void 0&&s.length===XU(s).length&&s[s.length-1]===t}else{t="/";const s=e.path;i=s.length===1&&s.charCodeAt(s.length-1)===47}return!i&&!UU(e,t)?e.with({path:e.path+"/"}):e}}const sn=new oPe(()=>!1),aPe=sn.isEqual.bind(sn);sn.isEqualOrParent.bind(sn);sn.getComparisonKey.bind(sn);sn.basenameOrAuthority.bind(sn);const CP=sn.basename.bind(sn);sn.extname.bind(sn);const lPe=sn.dirname.bind(sn),cPe=sn.joinPath.bind(sn),dPe=sn.normalizePath.bind(sn),uPe=sn.relativePath.bind(sn),zU=sn.resolvePath.bind(sn);sn.isAbsolutePath.bind(sn);const HU=sn.isEqualAuthority.bind(sn),UU=sn.hasTrailingPathSeparator.bind(sn);sn.removeTrailingPathSeparator.bind(sn);sn.addTrailingPathSeparator.bind(sn);var TL;(function(n){n.META_DATA_LABEL="label",n.META_DATA_DESCRIPTION="description",n.META_DATA_SIZE="size",n.META_DATA_MIME="mime";function e(t){const i=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(o=>{const[a,l]=o.split(":");a&&l&&i.set(a,l)});const r=t.path.substring(0,t.path.indexOf(";"));return r&&i.set(n.META_DATA_MIME,r),i}n.parseMetaData=e})(TL||(TL={}));function Am(n){return n.toString()}class us{static create(e,t){const i=e.getAlternativeVersionId(),s=Y3(e);return new us(i,i,s,s,t,t,[])}constructor(e,t,i,s,r,o,a){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=i,this.afterEOL=s,this.beforeCursorState=r,this.afterCursorState=o,this.changes=a}append(e,t,i,s,r){t.length>0&&(this.changes=nPe(this.changes,t)),this.afterEOL=i,this.afterVersionId=s,this.afterCursorState=r}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,t,i){if(hl(e,t?t.length:0,i),i+=4,t)for(const s of t)hl(e,s.selectionStartLineNumber,i),i+=4,hl(e,s.selectionStartColumn,i),i+=4,hl(e,s.positionLineNumber,i),i+=4,hl(e,s.positionColumn,i),i+=4;return i}static _readSelections(e,t,i){const s=ul(e,t);t+=4;for(let r=0;r<s;r++){const o=ul(e,t);t+=4;const a=ul(e,t);t+=4;const l=ul(e,t);t+=4;const c=ul(e,t);t+=4,i.push(new Ii(o,a,l,c))}return t}serialize(){let e=10+us._writeSelectionsSize(this.beforeCursorState)+us._writeSelectionsSize(this.afterCursorState)+4;for(const s of this.changes)e+=s.writeSize();const t=new Uint8Array(e);let i=0;hl(t,this.beforeVersionId,i),i+=4,hl(t,this.afterVersionId,i),i+=4,EH(t,this.beforeEOL,i),i+=1,EH(t,this.afterEOL,i),i+=1,i=us._writeSelections(t,this.beforeCursorState,i),i=us._writeSelections(t,this.afterCursorState,i),hl(t,this.changes.length,i),i+=4;for(const s of this.changes)i=s.write(t,i);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let i=0;const s=ul(t,i);i+=4;const r=ul(t,i);i+=4;const o=MH(t,i);i+=1;const a=MH(t,i);i+=1;const l=[];i=us._readSelections(t,i,l);const c=[];i=us._readSelections(t,i,c);const d=ul(t,i);i+=4;const u=[];for(let h=0;h<d;h++)i=Ps.read(t,i,u);return new us(s,r,o,a,l,c,u)}}class use{get type(){return 0}get resource(){return Ft.isUri(this.model)?this.model:this.model.uri}constructor(e,t,i,s){this.label=e,this.code=t,this.model=i,this._data=us.create(i,s)}toString(){return(this._data instanceof us?this._data:us.deserialize(this._data)).changes.map(t=>t.toString()).join(", ")}matchesResource(e){return(Ft.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof us}append(e,t,i,s,r){this._data instanceof us&&this._data.append(e,t,i,s,r)}close(){this._data instanceof us&&(this._data=this._data.serialize())}open(){this._data instanceof us||(this._data=us.deserialize(this._data))}undo(){if(Ft.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof us&&(this._data=this._data.serialize());const e=us.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(Ft.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof us&&(this._data=this._data.serialize());const e=us.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof us&&(this._data=this._data.serialize()),this._data.byteLength+168}}class hPe{get resources(){return this._editStackElementsArr.map(e=>e.resource)}constructor(e,t,i){this.label=e,this.code=t,this.type=1,this._isOpen=!0,this._editStackElementsArr=i.slice(0),this._editStackElementsMap=new Map;for(const s of this._editStackElementsArr){const r=Am(s.resource);this._editStackElementsMap.set(r,s)}this._delegate=null}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){const t=Am(e);return this._editStackElementsMap.has(t)}setModel(e){const t=Am(Ft.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=Am(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,i,s,r){const o=Am(e.uri);this._editStackElementsMap.get(o).append(e,t,i,s,r)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=Am(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){const e=[];for(const t of this._editStackElementsArr)e.push(`${CP(t.resource)}: ${t}`);return`{${e.join(", ")}}`}}function Y3(n){return n.getEOL()===`
`?0:1}function ud(n){return n?n instanceof use||n instanceof hPe:!1}class LP{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);ud(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);ud(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e,t){const i=this._undoRedoService.getLastElement(this._model.uri);if(ud(i)&&i.canAppend(this._model))return i;const s=new use(L("edit","Typing"),"undoredo.textBufferEdit",this._model,e);return this._undoRedoService.pushElement(s,t),s}pushEOL(e){const t=this._getOrCreateEditStackElement(null,void 0);this._model.setEOL(e),t.append(this._model,[],Y3(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,i,s){const r=this._getOrCreateEditStackElement(e,s),o=this._model.applyEdits(t,!0),a=LP._computeCursorState(i,o),l=o.map((c,d)=>({index:d,textChange:c.textChange}));return l.sort((c,d)=>c.textChange.oldPosition===d.textChange.oldPosition?c.index-d.index:c.textChange.oldPosition-d.textChange.oldPosition),r.append(this._model,l.map(c=>c.textChange),Y3(this._model),this._model.getAlternativeVersionId(),a),a}static _computeCursorState(e,t){try{return e?e(t):null}catch(i){return gi(i),null}}}class fPe{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function gPe(n,e,t,i,s){s.spacesDiff=0,s.looksLikeAlignment=!1;let r;for(r=0;r<e&&r<i;r++){const h=n.charCodeAt(r),f=t.charCodeAt(r);if(h!==f)break}let o=0,a=0;for(let h=r;h<e;h++)n.charCodeAt(h)===32?o++:a++;let l=0,c=0;for(let h=r;h<i;h++)t.charCodeAt(h)===32?l++:c++;if(o>0&&a>0||l>0&&c>0)return;const d=Math.abs(a-c),u=Math.abs(o-l);if(d===0){s.spacesDiff=u,u>0&&0<=l-1&&l-1<n.length&&l<t.length&&t.charCodeAt(l)!==32&&n.charCodeAt(l-1)===32&&n.charCodeAt(n.length-1)===44&&(s.looksLikeAlignment=!0);return}if(u%d===0){s.spacesDiff=u/d;return}}function YU(n,e,t){const i=Math.min(n.getLineCount(),1e4);let s=0,r=0,o="",a=0;const l=[2,4,6,8,3,5,7],c=8,d=[0,0,0,0,0,0,0,0,0],u=new fPe;for(let g=1;g<=i;g++){const m=n.getLineLength(g),p=n.getLineContent(g),b=m<=65536;let w=!1,v=0,_=0,y=0;for(let S=0,k=m;S<k;S++){const I=b?p.charCodeAt(S):n.getLineCharCode(g,S);if(I===9)y++;else if(I===32)_++;else{w=!0,v=S;break}}if(!w||(y>0?s++:_>1&&r++,gPe(o,a,p,v,u),u.looksLikeAlignment&&!(t&&e===u.spacesDiff)))continue;const C=u.spacesDiff;C<=c&&d[C]++,o=p,a=v}let h=t;s!==r&&(h=s<r);let f=e;if(h){let g=h?0:.1*i;l.forEach(m=>{const p=d[m];p>g&&(g=p,f=m)}),f===4&&d[4]>0&&d[2]>0&&d[2]>=d[4]/2&&(f=2)}return{insertSpaces:h,tabSize:f}}function Vr(n){return(n.metadata&1)>>>0}function Ui(n,e){n.metadata=n.metadata&254|e<<0}function Bs(n){return(n.metadata&2)>>>1===1}function Bi(n,e){n.metadata=n.metadata&253|(e?1:0)<<1}function hse(n){return(n.metadata&4)>>>2===1}function KU(n,e){n.metadata=n.metadata&251|(e?1:0)<<2}function fse(n){return(n.metadata&64)>>>6===1}function jU(n,e){n.metadata=n.metadata&191|(e?1:0)<<6}function mPe(n){return(n.metadata&24)>>>3}function JU(n,e){n.metadata=n.metadata&231|e<<3}function pPe(n){return(n.metadata&32)>>>5===1}function $U(n,e){n.metadata=n.metadata&223|(e?1:0)<<5}class gse{constructor(e,t,i){this.metadata=0,this.parent=this,this.left=this,this.right=this,Ui(this,1),this.start=t,this.end=i,this.delta=0,this.maxEnd=i,this.id=e,this.ownerId=0,this.options=null,KU(this,!1),jU(this,!1),JU(this,1),$U(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=i,this.range=null,Bi(this,!1)}reset(e,t,i,s){this.start=t,this.end=i,this.maxEnd=i,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=i,this.range=s}setOptions(e){this.options=e;const t=this.options.className;KU(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),jU(this,this.options.glyphMarginClassName!==null),JU(this,this.options.stickiness),$U(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,i){this.cachedVersionId!==i&&(this.range=null),this.cachedVersionId=i,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}}const Bt=new gse(null,0,0);Bt.parent=Bt;Bt.left=Bt;Bt.right=Bt;Ui(Bt,0);class hR{constructor(){this.root=Bt,this.requestNormalizeDelta=!1}intervalSearch(e,t,i,s,r,o){return this.root===Bt?[]:LPe(this,e,t,i,s,r,o)}search(e,t,i,s){return this.root===Bt?[]:CPe(this,e,t,i,s)}collectNodesFromOwner(e){return yPe(this,e)}collectNodesPostOrder(){return SPe(this)}insert(e){QU(this,e),this._normalizeDeltaIfNecessary()}delete(e){qU(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){const i=e;let s=0;for(;e!==this.root;)e===e.parent.right&&(s+=e.parent.delta),e=e.parent;const r=i.start+s,o=i.end+s;i.setCachedOffsets(r,o,t)}acceptReplace(e,t,i,s){const r=_Pe(this,e,e+t);for(let o=0,a=r.length;o<a;o++){const l=r[o];qU(this,l)}this._normalizeDeltaIfNecessary(),wPe(this,e,e+t,i),this._normalizeDeltaIfNecessary();for(let o=0,a=r.length;o<a;o++){const l=r[o];l.start=l.cachedAbsoluteStart,l.end=l.cachedAbsoluteEnd,vPe(l,e,e+t,i,s),l.maxEnd=l.end,QU(this,l)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,bPe(this))}}function bPe(n){let e=n.root,t=0;for(;e!==Bt;){if(e.left!==Bt&&!Bs(e.left)){e=e.left;continue}if(e.right!==Bt&&!Bs(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,Zh(e),Bi(e,!0),Bi(e.left,!1),Bi(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}Bi(n.root,!1)}function Fm(n,e,t,i){return n<t?!0:n>t||i===1?!1:i===2?!0:e}function vPe(n,e,t,i,s){const r=mPe(n),o=r===0||r===2,a=r===1||r===2,l=t-e,c=i,d=Math.min(l,c),u=n.start;let h=!1;const f=n.end;let g=!1;e<=u&&f<=t&&pPe(n)&&(n.start=e,h=!0,n.end=e,g=!0);{const p=s?1:l>0?2:0;!h&&Fm(u,o,e,p)&&(h=!0),!g&&Fm(f,a,e,p)&&(g=!0)}if(d>0&&!s){const p=l>c?2:0;!h&&Fm(u,o,e+d,p)&&(h=!0),!g&&Fm(f,a,e+d,p)&&(g=!0)}{const p=s?1:0;!h&&Fm(u,o,t,p)&&(n.start=e+c,h=!0),!g&&Fm(f,a,t,p)&&(n.end=e+c,g=!0)}const m=c-l;h||(n.start=Math.max(0,u+m)),g||(n.end=Math.max(0,f+m)),n.start>n.end&&(n.end=n.start)}function _Pe(n,e,t){let i=n.root,s=0,r=0,o=0,a=0;const l=[];let c=0;for(;i!==Bt;){if(Bs(i)){Bi(i.left,!1),Bi(i.right,!1),i===i.parent.right&&(s-=i.parent.delta),i=i.parent;continue}if(!Bs(i.left)){if(r=s+i.maxEnd,r<e){Bi(i,!0);continue}if(i.left!==Bt){i=i.left;continue}}if(o=s+i.start,o>t){Bi(i,!0);continue}if(a=s+i.end,a>=e&&(i.setCachedOffsets(o,a,0),l[c++]=i),Bi(i,!0),i.right!==Bt&&!Bs(i.right)){s+=i.delta,i=i.right;continue}}return Bi(n.root,!1),l}function wPe(n,e,t,i){let s=n.root,r=0,o=0,a=0;const l=i-(t-e);for(;s!==Bt;){if(Bs(s)){Bi(s.left,!1),Bi(s.right,!1),s===s.parent.right&&(r-=s.parent.delta),Zh(s),s=s.parent;continue}if(!Bs(s.left)){if(o=r+s.maxEnd,o<e){Bi(s,!0);continue}if(s.left!==Bt){s=s.left;continue}}if(a=r+s.start,a>t){s.start+=l,s.end+=l,s.delta+=l,(s.delta<-1073741824||s.delta>1073741824)&&(n.requestNormalizeDelta=!0),Bi(s,!0);continue}if(Bi(s,!0),s.right!==Bt&&!Bs(s.right)){r+=s.delta,s=s.right;continue}}Bi(n.root,!1)}function yPe(n,e){let t=n.root;const i=[];let s=0;for(;t!==Bt;){if(Bs(t)){Bi(t.left,!1),Bi(t.right,!1),t=t.parent;continue}if(t.left!==Bt&&!Bs(t.left)){t=t.left;continue}if(t.ownerId===e&&(i[s++]=t),Bi(t,!0),t.right!==Bt&&!Bs(t.right)){t=t.right;continue}}return Bi(n.root,!1),i}function SPe(n){let e=n.root;const t=[];let i=0;for(;e!==Bt;){if(Bs(e)){Bi(e.left,!1),Bi(e.right,!1),e=e.parent;continue}if(e.left!==Bt&&!Bs(e.left)){e=e.left;continue}if(e.right!==Bt&&!Bs(e.right)){e=e.right;continue}t[i++]=e,Bi(e,!0)}return Bi(n.root,!1),t}function CPe(n,e,t,i,s){let r=n.root,o=0,a=0,l=0;const c=[];let d=0;for(;r!==Bt;){if(Bs(r)){Bi(r.left,!1),Bi(r.right,!1),r===r.parent.right&&(o-=r.parent.delta),r=r.parent;continue}if(r.left!==Bt&&!Bs(r.left)){r=r.left;continue}a=o+r.start,l=o+r.end,r.setCachedOffsets(a,l,i);let u=!0;if(e&&r.ownerId&&r.ownerId!==e&&(u=!1),t&&hse(r)&&(u=!1),s&&!fse(r)&&(u=!1),u&&(c[d++]=r),Bi(r,!0),r.right!==Bt&&!Bs(r.right)){o+=r.delta,r=r.right;continue}}return Bi(n.root,!1),c}function LPe(n,e,t,i,s,r,o){let a=n.root,l=0,c=0,d=0,u=0;const h=[];let f=0;for(;a!==Bt;){if(Bs(a)){Bi(a.left,!1),Bi(a.right,!1),a===a.parent.right&&(l-=a.parent.delta),a=a.parent;continue}if(!Bs(a.left)){if(c=l+a.maxEnd,c<e){Bi(a,!0);continue}if(a.left!==Bt){a=a.left;continue}}if(d=l+a.start,d>t){Bi(a,!0);continue}if(u=l+a.end,u>=e){a.setCachedOffsets(d,u,r);let g=!0;i&&a.ownerId&&a.ownerId!==i&&(g=!1),s&&hse(a)&&(g=!1),o&&!fse(a)&&(g=!1),g&&(h[f++]=a)}if(Bi(a,!0),a.right!==Bt&&!Bs(a.right)){l+=a.delta,a=a.right;continue}}return Bi(n.root,!1),h}function QU(n,e){if(n.root===Bt)return e.parent=Bt,e.left=Bt,e.right=Bt,Ui(e,0),n.root=e,n.root;kPe(n,e),Tu(e.parent);let t=e;for(;t!==n.root&&Vr(t.parent)===1;)if(t.parent===t.parent.parent.left){const i=t.parent.parent.right;Vr(i)===1?(Ui(t.parent,0),Ui(i,0),Ui(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,o_(n,t)),Ui(t.parent,0),Ui(t.parent.parent,1),a_(n,t.parent.parent))}else{const i=t.parent.parent.left;Vr(i)===1?(Ui(t.parent,0),Ui(i,0),Ui(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,a_(n,t)),Ui(t.parent,0),Ui(t.parent.parent,1),o_(n,t.parent.parent))}return Ui(n.root,0),e}function kPe(n,e){let t=0,i=n.root;const s=e.start,r=e.end;for(;;)if(TPe(s,r,i.start+t,i.end+t)<0)if(i.left===Bt){e.start-=t,e.end-=t,e.maxEnd-=t,i.left=e;break}else i=i.left;else if(i.right===Bt){e.start-=t+i.delta,e.end-=t+i.delta,e.maxEnd-=t+i.delta,i.right=e;break}else t+=i.delta,i=i.right;e.parent=i,e.left=Bt,e.right=Bt,Ui(e,1)}function qU(n,e){let t,i;if(e.left===Bt?(t=e.right,i=e,t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(n.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===Bt?(t=e.left,i=e):(i=xPe(e.right),t=i.right,t.start+=i.delta,t.end+=i.delta,t.delta+=i.delta,(t.delta<-1073741824||t.delta>1073741824)&&(n.requestNormalizeDelta=!0),i.start+=e.delta,i.end+=e.delta,i.delta=e.delta,(i.delta<-1073741824||i.delta>1073741824)&&(n.requestNormalizeDelta=!0)),i===n.root){n.root=t,Ui(t,0),e.detach(),fR(),Zh(t),n.root.parent=Bt;return}const s=Vr(i)===1;if(i===i.parent.left?i.parent.left=t:i.parent.right=t,i===e?t.parent=i.parent:(i.parent===e?t.parent=i:t.parent=i.parent,i.left=e.left,i.right=e.right,i.parent=e.parent,Ui(i,Vr(e)),e===n.root?n.root=i:e===e.parent.left?e.parent.left=i:e.parent.right=i,i.left!==Bt&&(i.left.parent=i),i.right!==Bt&&(i.right.parent=i)),e.detach(),s){Tu(t.parent),i!==e&&(Tu(i),Tu(i.parent)),fR();return}Tu(t),Tu(t.parent),i!==e&&(Tu(i),Tu(i.parent));let r;for(;t!==n.root&&Vr(t)===0;)t===t.parent.left?(r=t.parent.right,Vr(r)===1&&(Ui(r,0),Ui(t.parent,1),o_(n,t.parent),r=t.parent.right),Vr(r.left)===0&&Vr(r.right)===0?(Ui(r,1),t=t.parent):(Vr(r.right)===0&&(Ui(r.left,0),Ui(r,1),a_(n,r),r=t.parent.right),Ui(r,Vr(t.parent)),Ui(t.parent,0),Ui(r.right,0),o_(n,t.parent),t=n.root)):(r=t.parent.left,Vr(r)===1&&(Ui(r,0),Ui(t.parent,1),a_(n,t.parent),r=t.parent.left),Vr(r.left)===0&&Vr(r.right)===0?(Ui(r,1),t=t.parent):(Vr(r.left)===0&&(Ui(r.right,0),Ui(r,1),o_(n,r),r=t.parent.left),Ui(r,Vr(t.parent)),Ui(t.parent,0),Ui(r.left,0),a_(n,t.parent),t=n.root));Ui(t,0),fR()}function xPe(n){for(;n.left!==Bt;)n=n.left;return n}function fR(){Bt.parent=Bt,Bt.delta=0,Bt.start=0,Bt.end=0}function o_(n,e){const t=e.right;t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(n.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==Bt&&(t.left.parent=e),t.parent=e.parent,e.parent===Bt?n.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,Zh(e),Zh(t)}function a_(n,e){const t=e.left;e.delta-=t.delta,(e.delta<-1073741824||e.delta>1073741824)&&(n.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==Bt&&(t.right.parent=e),t.parent=e.parent,e.parent===Bt?n.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,Zh(e),Zh(t)}function mse(n){let e=n.end;if(n.left!==Bt){const t=n.left.maxEnd;t>e&&(e=t)}if(n.right!==Bt){const t=n.right.maxEnd+n.delta;t>e&&(e=t)}return e}function Zh(n){n.maxEnd=mse(n)}function Tu(n){for(;n!==Bt;){const e=mse(n);if(n.maxEnd===e)return;n.maxEnd=e,n=n.parent}}function TPe(n,e,t,i){return n===t?e-i:n-t}class K3{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==It)return kP(this.right);let e=this;for(;e.parent!==It&&e.parent.left!==e;)e=e.parent;return e.parent===It?It:e.parent}prev(){if(this.left!==It)return pse(this.left);let e=this;for(;e.parent!==It&&e.parent.right!==e;)e=e.parent;return e.parent===It?It:e.parent}detach(){this.parent=null,this.left=null,this.right=null}}const It=new K3(null,0);It.parent=It;It.left=It;It.right=It;It.color=0;function kP(n){for(;n.left!==It;)n=n.left;return n}function pse(n){for(;n.right!==It;)n=n.right;return n}function xP(n){return n===It?0:n.size_left+n.piece.length+xP(n.right)}function TP(n){return n===It?0:n.lf_left+n.piece.lineFeedCnt+TP(n.right)}function gR(){It.parent=It}function l_(n,e){const t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==It&&(t.left.parent=e),t.parent=e.parent,e.parent===It?n.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}function c_(n,e){const t=e.left;e.left=t.right,t.right!==It&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===It?n.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}function Vy(n,e){let t,i;if(e.left===It?(i=e,t=i.right):e.right===It?(i=e,t=i.left):(i=kP(e.right),t=i.right),i===n.root){n.root=t,t.color=0,e.detach(),gR(),n.root.parent=It;return}const s=i.color===1;if(i===i.parent.left?i.parent.left=t:i.parent.right=t,i===e?(t.parent=i.parent,Ov(n,t)):(i.parent===e?t.parent=i:t.parent=i.parent,Ov(n,t),i.left=e.left,i.right=e.right,i.parent=e.parent,i.color=e.color,e===n.root?n.root=i:e===e.parent.left?e.parent.left=i:e.parent.right=i,i.left!==It&&(i.left.parent=i),i.right!==It&&(i.right.parent=i),i.size_left=e.size_left,i.lf_left=e.lf_left,Ov(n,i)),e.detach(),t.parent.left===t){const o=xP(t),a=TP(t);if(o!==t.parent.size_left||a!==t.parent.lf_left){const l=o-t.parent.size_left,c=a-t.parent.lf_left;t.parent.size_left=o,t.parent.lf_left=a,rd(n,t.parent,l,c)}}if(Ov(n,t.parent),s){gR();return}let r;for(;t!==n.root&&t.color===0;)t===t.parent.left?(r=t.parent.right,r.color===1&&(r.color=0,t.parent.color=1,l_(n,t.parent),r=t.parent.right),r.left.color===0&&r.right.color===0?(r.color=1,t=t.parent):(r.right.color===0&&(r.left.color=0,r.color=1,c_(n,r),r=t.parent.right),r.color=t.parent.color,t.parent.color=0,r.right.color=0,l_(n,t.parent),t=n.root)):(r=t.parent.left,r.color===1&&(r.color=0,t.parent.color=1,c_(n,t.parent),r=t.parent.left),r.left.color===0&&r.right.color===0?(r.color=1,t=t.parent):(r.left.color===0&&(r.right.color=0,r.color=1,l_(n,r),r=t.parent.left),r.color=t.parent.color,t.parent.color=0,r.left.color=0,c_(n,t.parent),t=n.root));t.color=0,gR()}function eY(n,e){for(Ov(n,e);e!==n.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){const t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,l_(n,e)),e.parent.color=0,e.parent.parent.color=1,c_(n,e.parent.parent))}else{const t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,c_(n,e)),e.parent.color=0,e.parent.parent.color=1,l_(n,e.parent.parent))}n.root.color=0}function rd(n,e,t,i){for(;e!==n.root&&e!==It;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=i),e=e.parent}function Ov(n,e){let t=0,i=0;if(e!==n.root){for(;e!==n.root&&e===e.parent.right;)e=e.parent;if(e!==n.root)for(e=e.parent,t=xP(e.left)-e.size_left,i=TP(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=i;e!==n.root&&(t!==0||i!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=i),e=e.parent}}const DPe=999;class Tf{constructor(e,t,i,s){this.searchString=e,this.isRegex=t,this.matchCase=i,this.wordSeparators=s}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=IPe(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=cie(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let i=!this.isRegex&&!e;return i&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(i=this.matchCase),new I4e(t,this.wordSeparators?Db(this.wordSeparators,[]):null,i?this.searchString:null)}}function IPe(n){if(!n||n.length===0)return!1;for(let e=0,t=n.length;e<t;e++){const i=n.charCodeAt(e);if(i===10)return!0;if(i===92){if(e++,e>=t)break;const s=n.charCodeAt(e);if(s===110||s===114||s===87)return!0}}return!1}function Zf(n,e,t){if(!t)return new K_(n,null);const i=[];for(let s=0,r=e.length;s<r;s++)i[s]=e[s];return new K_(n,i)}class tY{constructor(e){const t=[];let i=0;for(let s=0,r=e.length;s<r;s++)e.charCodeAt(s)===10&&(t[i++]=s);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){const t=this._lineFeedsOffsets;let i=0,s=t.length-1;if(s===-1||e<=t[0])return 0;for(;i<s;){const r=i+((s-i)/2>>0);t[r]>=e?s=r-1:t[r+1]>=e?(i=r,s=r):i=r+1}return i+1}}class Py{static findMatches(e,t,i,s,r){const o=t.parseSearchRequest();return o?o.regex.multiline?this._doFindMatchesMultiline(e,i,new bp(o.wordSeparators,o.regex),s,r):this._doFindMatchesLineByLine(e,i,o,s,r):[]}static _getMultilineMatchRange(e,t,i,s,r,o){let a,l=0;s?(l=s.findLineFeedCountBeforeOffset(r),a=t+r+l):a=t+r;let c;if(s){const f=s.findLineFeedCountBeforeOffset(r+o.length)-l;c=a+o.length+f}else c=a+o.length;const d=e.getPositionAt(a),u=e.getPositionAt(c);return new te(d.lineNumber,d.column,u.lineNumber,u.column)}static _doFindMatchesMultiline(e,t,i,s,r){const o=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),l=e.getEOL()===`\r
`?new tY(a):null,c=[];let d=0,u;for(i.reset(0);u=i.next(a);)if(c[d++]=Zf(this._getMultilineMatchRange(e,o,a,l,u.index,u[0]),u,s),d>=r)return c;return c}static _doFindMatchesLineByLine(e,t,i,s,r){const o=[];let a=0;if(t.startLineNumber===t.endLineNumber){const c=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(i,c,t.startLineNumber,t.startColumn-1,a,o,s,r),o}const l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(i,l,t.startLineNumber,t.startColumn-1,a,o,s,r);for(let c=t.startLineNumber+1;c<t.endLineNumber&&a<r;c++)a=this._findMatchesInLine(i,e.getLineContent(c),c,0,a,o,s,r);if(a<r){const c=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(i,c,t.endLineNumber,0,a,o,s,r)}return o}static _findMatchesInLine(e,t,i,s,r,o,a,l){const c=e.wordSeparators;if(!a&&e.simpleSearch){const h=e.simpleSearch,f=h.length,g=t.length;let m=-f;for(;(m=t.indexOf(h,m+f))!==-1;)if((!c||DP(c,t,g,m,f))&&(o[r++]=new K_(new te(i,m+1+s,i,m+1+f+s),null),r>=l))return r;return r}const d=new bp(e.wordSeparators,e.regex);let u;d.reset(0);do if(u=d.next(t),u&&(o[r++]=Zf(new te(i,u.index+1+s,i,u.index+1+u[0].length+s),u,a),r>=l))return r;while(u);return r}static findNextMatch(e,t,i,s){const r=t.parseSearchRequest();if(!r)return null;const o=new bp(r.wordSeparators,r.regex);return r.regex.multiline?this._doFindNextMatchMultiline(e,i,o,s):this._doFindNextMatchLineByLine(e,i,o,s)}static _doFindNextMatchMultiline(e,t,i,s){const r=new pe(t.lineNumber,1),o=e.getOffsetAt(r),a=e.getLineCount(),l=e.getValueInRange(new te(r.lineNumber,r.column,a,e.getLineMaxColumn(a)),1),c=e.getEOL()===`\r
`?new tY(l):null;i.reset(t.column-1);const d=i.next(l);return d?Zf(this._getMultilineMatchRange(e,o,l,c,d.index,d[0]),d,s):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new pe(1,1),i,s):null}static _doFindNextMatchLineByLine(e,t,i,s){const r=e.getLineCount(),o=t.lineNumber,a=e.getLineContent(o),l=this._findFirstMatchInLine(i,a,o,t.column,s);if(l)return l;for(let c=1;c<=r;c++){const d=(o+c-1)%r,u=e.getLineContent(d+1),h=this._findFirstMatchInLine(i,u,d+1,1,s);if(h)return h}return null}static _findFirstMatchInLine(e,t,i,s,r){e.reset(s-1);const o=e.next(t);return o?Zf(new te(i,o.index+1,i,o.index+1+o[0].length),o,r):null}static findPreviousMatch(e,t,i,s){const r=t.parseSearchRequest();if(!r)return null;const o=new bp(r.wordSeparators,r.regex);return r.regex.multiline?this._doFindPreviousMatchMultiline(e,i,o,s):this._doFindPreviousMatchLineByLine(e,i,o,s)}static _doFindPreviousMatchMultiline(e,t,i,s){const r=this._doFindMatchesMultiline(e,new te(1,1,t.lineNumber,t.column),i,s,10*DPe);if(r.length>0)return r[r.length-1];const o=e.getLineCount();return t.lineNumber!==o||t.column!==e.getLineMaxColumn(o)?this._doFindPreviousMatchMultiline(e,new pe(o,e.getLineMaxColumn(o)),i,s):null}static _doFindPreviousMatchLineByLine(e,t,i,s){const r=e.getLineCount(),o=t.lineNumber,a=e.getLineContent(o).substring(0,t.column-1),l=this._findLastMatchInLine(i,a,o,s);if(l)return l;for(let c=1;c<=r;c++){const d=(r+o-c-1)%r,u=e.getLineContent(d+1),h=this._findLastMatchInLine(i,u,d+1,s);if(h)return h}return null}static _findLastMatchInLine(e,t,i,s){let r=null,o;for(e.reset(0);o=e.next(t);)r=Zf(new te(i,o.index+1,i,o.index+1+o[0].length),o,s);return r}}function MPe(n,e,t,i,s){if(i===0)return!0;const r=e.charCodeAt(i-1);if(n.get(r)!==0||r===13||r===10)return!0;if(s>0){const o=e.charCodeAt(i);if(n.get(o)!==0)return!0}return!1}function EPe(n,e,t,i,s){if(i+s===t)return!0;const r=e.charCodeAt(i+s);if(n.get(r)!==0||r===13||r===10)return!0;if(s>0){const o=e.charCodeAt(i+s-1);if(n.get(o)!==0)return!0}return!1}function DP(n,e,t,i,s){return MPe(n,e,t,i,s)&&EPe(n,e,t,i,s)}class bp{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let i;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(i=this._searchRegex.exec(e),!i))return null;const s=i.index,r=i[0].length;if(s===this._prevMatchStartIndex&&r===this._prevMatchLength){if(r===0){QC(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=s,this._prevMatchLength=r,!this._wordSeparators||DP(this._wordSeparators,e,t,s,r))return i}while(i);return null}}const ed=65535;function bse(n){let e;return n[n.length-1]<65536?e=new Uint16Array(n.length):e=new Uint32Array(n.length),e.set(n,0),e}class NPe{constructor(e,t,i,s,r){this.lineStarts=e,this.cr=t,this.lf=i,this.crlf=s,this.isBasicASCII=r}}function ad(n,e=!0){const t=[0];let i=1;for(let s=0,r=n.length;s<r;s++){const o=n.charCodeAt(s);o===13?s+1<r&&n.charCodeAt(s+1)===10?(t[i++]=s+2,s++):t[i++]=s+1:o===10&&(t[i++]=s+1)}return e?bse(t):t}function RPe(n,e){n.length=0,n[0]=0;let t=1,i=0,s=0,r=0,o=!0;for(let l=0,c=e.length;l<c;l++){const d=e.charCodeAt(l);d===13?l+1<c&&e.charCodeAt(l+1)===10?(r++,n[t++]=l+2,l++):(i++,n[t++]=l+1):d===10?(s++,n[t++]=l+1):o&&d!==9&&(d<32||d>126)&&(o=!1)}const a=new NPe(bse(n),i,s,r,o);return n.length=0,a}class no{constructor(e,t,i,s,r){this.bufferIndex=e,this.start=t,this.end=i,this.lineFeedCnt=s,this.length=r}}class Gf{constructor(e,t){this.buffer=e,this.lineStarts=t}}class WPe{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==It&&e.iterate(e.root,i=>(i!==It&&this._pieces.push(i.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class APe{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){const i=this._cache[t];if(i.nodeStartOffset<=e&&i.nodeStartOffset+i.node.piece.length>=e)return i}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){const i=this._cache[t];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<e&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=e)return i}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1;const i=this._cache;for(let s=0;s<i.length;s++){const r=i[s];if(r.node.parent===null||r.nodeStartOffset>=e){i[s]=null,t=!0;continue}}if(t){const s=[];for(const r of i)r!==null&&s.push(r);this._cache=s}}}class FPe{constructor(e,t,i){this.create(e,t,i)}create(e,t,i){this._buffers=[new Gf("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=It,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=i;let s=null;for(let r=0,o=e.length;r<o;r++)if(e[r].buffer.length>0){e[r].lineStarts||(e[r].lineStarts=ad(e[r].buffer));const a=new no(r+1,{line:0,column:0},{line:e[r].lineStarts.length-1,column:e[r].buffer.length-e[r].lineStarts[e[r].lineStarts.length-1]},e[r].lineStarts.length-1,e[r].buffer.length);this._buffers.push(e[r]),s=this.rbInsertRight(s,a)}this._searchCache=new APe(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){const t=ed,i=t-Math.floor(t/3),s=i*2;let r="",o=0;const a=[];if(this.iterate(this.root,l=>{const c=this.getNodeContent(l),d=c.length;if(o<=i||o+d<s)return r+=c,o+=d,!0;const u=r.replace(/\r\n|\r|\n/g,e);return a.push(new Gf(u,ad(u))),r=c,o=d,!0}),o>0){const l=r.replace(/\r\n|\r|\n/g,e);a.push(new Gf(l,ad(l)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new WPe(this,e)}getOffsetAt(e,t){let i=0,s=this.root;for(;s!==It;)if(s.left!==It&&s.lf_left+1>=e)s=s.left;else if(s.lf_left+s.piece.lineFeedCnt+1>=e){i+=s.size_left;const r=this.getAccumulatedValue(s,e-s.lf_left-2);return i+=r+t-1}else e-=s.lf_left+s.piece.lineFeedCnt,i+=s.size_left+s.piece.length,s=s.right;return i}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,i=0;const s=e;for(;t!==It;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){const r=this.getIndexOf(t,e-t.size_left);if(i+=t.lf_left+r.index,r.index===0){const o=this.getOffsetAt(i+1,1),a=s-o;return new pe(i+1,a+1)}return new pe(i+1,r.remainder+1)}else if(e-=t.size_left+t.piece.length,i+=t.lf_left+t.piece.lineFeedCnt,t.right===It){const r=this.getOffsetAt(i+1,1),o=s-e-r;return new pe(i+1,o+1)}else t=t.right;return new pe(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const i=this.nodeAt2(e.startLineNumber,e.startColumn),s=this.nodeAt2(e.endLineNumber,e.endColumn),r=this.getValueInRange2(i,s);return t?t!==this._EOL||!this._EOLNormalized?r.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?r:r.replace(/\r\n|\r|\n/g,t):r}getValueInRange2(e,t){if(e.node===t.node){const a=e.node,l=this._buffers[a.piece.bufferIndex].buffer,c=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return l.substring(c+e.remainder,c+t.remainder)}let i=e.node;const s=this._buffers[i.piece.bufferIndex].buffer,r=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);let o=s.substring(r+e.remainder,r+i.piece.length);for(i=i.next();i!==It;){const a=this._buffers[i.piece.bufferIndex].buffer,l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(i===t.node){o+=a.substring(l,l+t.remainder);break}else o+=a.substr(l,i.piece.length);i=i.next()}return o}getLinesContent(){const e=[];let t=0,i="",s=!1;return this.iterate(this.root,r=>{if(r===It)return!0;const o=r.piece;let a=o.length;if(a===0)return!0;const l=this._buffers[o.bufferIndex].buffer,c=this._buffers[o.bufferIndex].lineStarts,d=o.start.line,u=o.end.line;let h=c[d]+o.start.column;if(s&&(l.charCodeAt(h)===10&&(h++,a--),e[t++]=i,i="",s=!1,a===0))return!0;if(d===u)return!this._EOLNormalized&&l.charCodeAt(h+a-1)===13?(s=!0,i+=l.substr(h,a-1)):i+=l.substr(h,a),!0;i+=this._EOLNormalized?l.substring(h,Math.max(h,c[d+1]-this._EOLLength)):l.substring(h,c[d+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;for(let f=d+1;f<u;f++)i=this._EOLNormalized?l.substring(c[f],c[f+1]-this._EOLLength):l.substring(c[f],c[f+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;return!this._EOLNormalized&&l.charCodeAt(c[u]+o.end.column-1)===13?(s=!0,o.end.column===0?t--:i=l.substr(c[u],o.end.column-1)):i=l.substr(c[u],o.end.column),!0}),s&&(e[t++]=i,i=""),e[t++]=i,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const i=this._buffers[t.piece.bufferIndex],s=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return i.buffer.charCodeAt(s)}else{const t=this._buffers[e.node.piece.bufferIndex],s=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(s)}}getLineCharCode(e,t){const i=this.nodeAt2(e,t+1);return this._getCharCode(i)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,i,s,r,o,a,l,c,d,u){const h=this._buffers[e.piece.bufferIndex],f=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),g=this.offsetInBuffer(e.piece.bufferIndex,r),m=this.offsetInBuffer(e.piece.bufferIndex,o);let p;const b={line:0,column:0};let w,v;t._wordSeparators?(w=h.buffer.substring(g,m),v=_=>_+g,t.reset(0)):(w=h.buffer,v=_=>_,t.reset(g));do if(p=t.next(w),p){if(v(p.index)>=m)return d;this.positionInBuffer(e,v(p.index)-f,b);const _=this.getLineFeedCnt(e.piece.bufferIndex,r,b),y=b.line===r.line?b.column-r.column+s:b.column+1,C=y+p[0].length;if(u[d++]=Zf(new te(i+_,y,i+_,C),p,l),v(p.index)+p[0].length>=m||d>=c)return d}while(p);return d}findMatchesLineByLine(e,t,i,s){const r=[];let o=0;const a=new bp(t.wordSeparators,t.regex);let l=this.nodeAt2(e.startLineNumber,e.startColumn);if(l===null)return[];const c=this.nodeAt2(e.endLineNumber,e.endColumn);if(c===null)return[];let d=this.positionInBuffer(l.node,l.remainder);const u=this.positionInBuffer(c.node,c.remainder);if(l.node===c.node)return this.findMatchesInNode(l.node,a,e.startLineNumber,e.startColumn,d,u,t,i,s,o,r),r;let h=e.startLineNumber,f=l.node;for(;f!==c.node;){const m=this.getLineFeedCnt(f.piece.bufferIndex,d,f.piece.end);if(m>=1){const b=this._buffers[f.piece.bufferIndex].lineStarts,w=this.offsetInBuffer(f.piece.bufferIndex,f.piece.start),v=b[d.line+m],_=h===e.startLineNumber?e.startColumn:1;if(o=this.findMatchesInNode(f,a,h,_,d,this.positionInBuffer(f,v-w),t,i,s,o,r),o>=s)return r;h+=m}const p=h===e.startLineNumber?e.startColumn-1:0;if(h===e.endLineNumber){const b=this.getLineContent(h).substring(p,e.endColumn-1);return o=this._findMatchesInLine(t,a,b,e.endLineNumber,p,o,r,i,s),r}if(o=this._findMatchesInLine(t,a,this.getLineContent(h).substr(p),h,p,o,r,i,s),o>=s)return r;h++,l=this.nodeAt2(h,1),f=l.node,d=this.positionInBuffer(l.node,l.remainder)}if(h===e.endLineNumber){const m=h===e.startLineNumber?e.startColumn-1:0,p=this.getLineContent(h).substring(m,e.endColumn-1);return o=this._findMatchesInLine(t,a,p,e.endLineNumber,m,o,r,i,s),r}const g=h===e.startLineNumber?e.startColumn:1;return o=this.findMatchesInNode(c.node,a,h,g,d,u,t,i,s,o,r),r}_findMatchesInLine(e,t,i,s,r,o,a,l,c){const d=e.wordSeparators;if(!l&&e.simpleSearch){const h=e.simpleSearch,f=h.length,g=i.length;let m=-f;for(;(m=i.indexOf(h,m+f))!==-1;)if((!d||DP(d,i,g,m,f))&&(a[o++]=new K_(new te(s,m+1+r,s,m+1+f+r),null),o>=c))return o;return o}let u;t.reset(0);do if(u=t.next(i),u&&(a[o++]=Zf(new te(s,u.index+1+r,s,u.index+1+u[0].length+r),u,l),o>=c))return o;while(u);return o}insert(e,t,i=!1){if(this._EOLNormalized=this._EOLNormalized&&i,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==It){const{node:s,remainder:r,nodeStartOffset:o}=this.nodeAt(e),a=s.piece,l=a.bufferIndex,c=this.positionInBuffer(s,r);if(s.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&o+a.length===e&&t.length<ed){this.appendToNode(s,t),this.computeBufferMetadata();return}if(o===e)this.insertContentToNodeLeft(t,s),this._searchCache.validate(e);else if(o+s.piece.length>e){const d=[];let u=new no(a.bufferIndex,c,a.end,this.getLineFeedCnt(a.bufferIndex,c,a.end),this.offsetInBuffer(l,a.end)-this.offsetInBuffer(l,c));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(s,r)===10){const m={line:u.start.line+1,column:0};u=new no(u.bufferIndex,m,u.end,this.getLineFeedCnt(u.bufferIndex,m,u.end),u.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(s,r-1)===13){const m=this.positionInBuffer(s,r-1);this.deleteNodeTail(s,m),t="\r"+t,s.piece.length===0&&d.push(s)}else this.deleteNodeTail(s,c);else this.deleteNodeTail(s,c);const h=this.createNewPieces(t);u.length>0&&this.rbInsertRight(s,u);let f=s;for(let g=0;g<h.length;g++)f=this.rbInsertRight(f,h[g]);this.deleteNodes(d)}else this.insertContentToNodeRight(t,s)}else{const s=this.createNewPieces(t);let r=this.rbInsertLeft(null,s[0]);for(let o=1;o<s.length;o++)r=this.rbInsertRight(r,s[o])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===It)return;const i=this.nodeAt(e),s=this.nodeAt(e+t),r=i.node,o=s.node;if(r===o){const h=this.positionInBuffer(r,i.remainder),f=this.positionInBuffer(r,s.remainder);if(i.nodeStartOffset===e){if(t===r.piece.length){const g=r.next();Vy(this,r),this.validateCRLFWithPrevNode(g),this.computeBufferMetadata();return}this.deleteNodeHead(r,f),this._searchCache.validate(e),this.validateCRLFWithPrevNode(r),this.computeBufferMetadata();return}if(i.nodeStartOffset+r.piece.length===e+t){this.deleteNodeTail(r,h),this.validateCRLFWithNextNode(r),this.computeBufferMetadata();return}this.shrinkNode(r,h,f),this.computeBufferMetadata();return}const a=[],l=this.positionInBuffer(r,i.remainder);this.deleteNodeTail(r,l),this._searchCache.validate(e),r.piece.length===0&&a.push(r);const c=this.positionInBuffer(o,s.remainder);this.deleteNodeHead(o,c),o.piece.length===0&&a.push(o);const d=r.next();for(let h=d;h!==It&&h!==o;h=h.next())a.push(h);const u=r.piece.length===0?r.prev():r;this.deleteNodes(a),this.validateCRLFWithNextNode(u),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){const i=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){const o=t.piece,a={line:o.start.line+1,column:0},l=new no(o.bufferIndex,a,o.end,this.getLineFeedCnt(o.bufferIndex,a,o.end),o.length-1);t.piece=l,e+=`
`,rd(this,t,-1,-1),t.piece.length===0&&i.push(t)}const s=this.createNewPieces(e);let r=this.rbInsertLeft(t,s[s.length-1]);for(let o=s.length-2;o>=0;o--)r=this.rbInsertLeft(r,s[o]);this.validateCRLFWithPrevNode(r),this.deleteNodes(i)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);const i=this.createNewPieces(e),s=this.rbInsertRight(t,i[0]);let r=s;for(let o=1;o<i.length;o++)r=this.rbInsertRight(r,i[o]);this.validateCRLFWithPrevNode(s)}positionInBuffer(e,t,i){const s=e.piece,r=e.piece.bufferIndex,o=this._buffers[r].lineStarts,l=o[s.start.line]+s.start.column+t;let c=s.start.line,d=s.end.line,u=0,h=0,f=0;for(;c<=d&&(u=c+(d-c)/2|0,f=o[u],u!==d);)if(h=o[u+1],l<f)d=u-1;else if(l>=h)c=u+1;else break;return i?(i.line=u,i.column=l-f,null):{line:u,column:l-f}}getLineFeedCnt(e,t,i){if(i.column===0)return i.line-t.line;const s=this._buffers[e].lineStarts;if(i.line===s.length-1)return i.line-t.line;const r=s[i.line+1],o=s[i.line]+i.column;if(r>o+1)return i.line-t.line;const a=o-1;return this._buffers[e].buffer.charCodeAt(a)===13?i.line-t.line+1:i.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)Vy(this,e[t])}createNewPieces(e){if(e.length>ed){const d=[];for(;e.length>ed;){const h=e.charCodeAt(ed-1);let f;h===13||h>=55296&&h<=56319?(f=e.substring(0,ed-1),e=e.substring(ed-1)):(f=e.substring(0,ed),e=e.substring(ed));const g=ad(f);d.push(new no(this._buffers.length,{line:0,column:0},{line:g.length-1,column:f.length-g[g.length-1]},g.length-1,f.length)),this._buffers.push(new Gf(f,g))}const u=ad(e);return d.push(new no(this._buffers.length,{line:0,column:0},{line:u.length-1,column:e.length-u[u.length-1]},u.length-1,e.length)),this._buffers.push(new Gf(e,u)),d}let t=this._buffers[0].buffer.length;const i=ad(e,!1);let s=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},s=this._lastChangeBufferPos;for(let d=0;d<i.length;d++)i[d]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let d=0;d<i.length;d++)i[d]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+=e}const r=this._buffers[0].buffer.length,o=this._buffers[0].lineStarts.length-1,a=r-this._buffers[0].lineStarts[o],l={line:o,column:a},c=new no(0,s,l,this.getLineFeedCnt(0,s,l),r-t);return this._lastChangeBufferPos=l,[c]}getLineRawContent(e,t=0){let i=this.root,s="";const r=this._searchCache.get2(e);if(r){i=r.node;const o=this.getAccumulatedValue(i,e-r.nodeStartLineNumber-1),a=this._buffers[i.piece.bufferIndex].buffer,l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(r.nodeStartLineNumber+i.piece.lineFeedCnt===e)s=a.substring(l+o,l+i.piece.length);else{const c=this.getAccumulatedValue(i,e-r.nodeStartLineNumber);return a.substring(l+o,l+c-t)}}else{let o=0;const a=e;for(;i!==It;)if(i.left!==It&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const l=this.getAccumulatedValue(i,e-i.lf_left-2),c=this.getAccumulatedValue(i,e-i.lf_left-1),d=this._buffers[i.piece.bufferIndex].buffer,u=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return o+=i.size_left,this._searchCache.set({node:i,nodeStartOffset:o,nodeStartLineNumber:a-(e-1-i.lf_left)}),d.substring(u+l,u+c-t)}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const l=this.getAccumulatedValue(i,e-i.lf_left-2),c=this._buffers[i.piece.bufferIndex].buffer,d=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);s=c.substring(d+l,d+i.piece.length);break}else e-=i.lf_left+i.piece.lineFeedCnt,o+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==It;){const o=this._buffers[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){const a=this.getAccumulatedValue(i,0),l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return s+=o.substring(l,l+a-t),s}else{const a=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);s+=o.substr(a,i.piece.length)}i=i.next()}return s}computeBufferMetadata(){let e=this.root,t=1,i=0;for(;e!==It;)t+=e.lf_left+e.piece.lineFeedCnt,i+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=i,this._searchCache.validate(this._length)}getIndexOf(e,t){const i=e.piece,s=this.positionInBuffer(e,t),r=s.line-i.start.line;if(this.offsetInBuffer(i.bufferIndex,i.end)-this.offsetInBuffer(i.bufferIndex,i.start)===t){const o=this.getLineFeedCnt(e.piece.bufferIndex,i.start,s);if(o!==r)return{index:o,remainder:0}}return{index:r,remainder:s.column}}getAccumulatedValue(e,t){if(t<0)return 0;const i=e.piece,s=this._buffers[i.bufferIndex].lineStarts,r=i.start.line+t+1;return r>i.end.line?s[i.end.line]+i.end.column-s[i.start.line]-i.start.column:s[r]-s[i.start.line]-i.start.column}deleteNodeTail(e,t){const i=e.piece,s=i.lineFeedCnt,r=this.offsetInBuffer(i.bufferIndex,i.end),o=t,a=this.offsetInBuffer(i.bufferIndex,o),l=this.getLineFeedCnt(i.bufferIndex,i.start,o),c=l-s,d=a-r,u=i.length+d;e.piece=new no(i.bufferIndex,i.start,o,l,u),rd(this,e,d,c)}deleteNodeHead(e,t){const i=e.piece,s=i.lineFeedCnt,r=this.offsetInBuffer(i.bufferIndex,i.start),o=t,a=this.getLineFeedCnt(i.bufferIndex,o,i.end),l=this.offsetInBuffer(i.bufferIndex,o),c=a-s,d=r-l,u=i.length+d;e.piece=new no(i.bufferIndex,o,i.end,a,u),rd(this,e,d,c)}shrinkNode(e,t,i){const s=e.piece,r=s.start,o=s.end,a=s.length,l=s.lineFeedCnt,c=t,d=this.getLineFeedCnt(s.bufferIndex,s.start,c),u=this.offsetInBuffer(s.bufferIndex,t)-this.offsetInBuffer(s.bufferIndex,r);e.piece=new no(s.bufferIndex,s.start,c,d,u),rd(this,e,u-a,d-l);const h=new no(s.bufferIndex,i,o,this.getLineFeedCnt(s.bufferIndex,i,o),this.offsetInBuffer(s.bufferIndex,o)-this.offsetInBuffer(s.bufferIndex,i)),f=this.rbInsertRight(e,h);this.validateCRLFWithPrevNode(f)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);const i=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),s=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const r=ad(t,!1);for(let f=0;f<r.length;f++)r[f]+=s;if(i){const f=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:s-f}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(r.slice(1));const o=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[o],l={line:o,column:a},c=e.piece.length+t.length,d=e.piece.lineFeedCnt,u=this.getLineFeedCnt(0,e.piece.start,l),h=u-d;e.piece=new no(e.piece.bufferIndex,e.piece.start,l,u,c),this._lastChangeBufferPos=l,rd(this,e,t.length,h)}nodeAt(e){let t=this.root;const i=this._searchCache.get(e);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:e-i.nodeStartOffset};let s=0;for(;t!==It;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){s+=t.size_left;const r={node:t,remainder:e-t.size_left,nodeStartOffset:s};return this._searchCache.set(r),r}else e-=t.size_left+t.piece.length,s+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let i=this.root,s=0;for(;i!==It;)if(i.left!==It&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const r=this.getAccumulatedValue(i,e-i.lf_left-2),o=this.getAccumulatedValue(i,e-i.lf_left-1);return s+=i.size_left,{node:i,remainder:Math.min(r+t-1,o),nodeStartOffset:s}}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const r=this.getAccumulatedValue(i,e-i.lf_left-2);if(r+t-1<=i.piece.length)return{node:i,remainder:r+t-1,nodeStartOffset:s};t-=i.piece.length-r;break}else e-=i.lf_left+i.piece.lineFeedCnt,s+=i.size_left+i.piece.length,i=i.right;for(i=i.next();i!==It;){if(i.piece.lineFeedCnt>0){const r=this.getAccumulatedValue(i,0),o=this.offsetOfNode(i);return{node:i,remainder:Math.min(t-1,r),nodeStartOffset:o}}else if(i.piece.length>=t-1){const r=this.offsetOfNode(i);return{node:i,remainder:t-1,nodeStartOffset:r}}else t-=i.piece.length;i=i.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;const i=this._buffers[e.piece.bufferIndex],s=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return i.buffer.charCodeAt(s)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===It||e.piece.lineFeedCnt===0)return!1;const t=e.piece,i=this._buffers[t.bufferIndex].lineStarts,s=t.start.line,r=i[s]+t.start.column;return s===i.length-1||i[s+1]>r+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(r)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===It||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){const t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){const i=[],s=this._buffers[e.piece.bufferIndex].lineStarts;let r;e.piece.end.column===0?r={line:e.piece.end.line-1,column:s[e.piece.end.line]-s[e.piece.end.line-1]-1}:r={line:e.piece.end.line,column:e.piece.end.column-1};const o=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new no(e.piece.bufferIndex,e.piece.start,r,a,o),rd(this,e,-1,-1),e.piece.length===0&&i.push(e);const l={line:t.piece.start.line+1,column:0},c=t.piece.length-1,d=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new no(t.piece.bufferIndex,l,t.piece.end,d,c),rd(this,t,-1,-1),t.piece.length===0&&i.push(t);const u=this.createNewPieces(`\r
`);this.rbInsertRight(e,u[0]);for(let h=0;h<i.length;h++)Vy(this,i[h])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const i=t.next();if(this.startWithLF(i)){if(e+=`
`,i.piece.length===1)Vy(this,i);else{const s=i.piece,r={line:s.start.line+1,column:0},o=s.length-1,a=this.getLineFeedCnt(s.bufferIndex,r,s.end);i.piece=new no(s.bufferIndex,r,s.end,a,o),rd(this,i,-1,-1)}return!0}}return!1}iterate(e,t){if(e===It)return t(It);const i=this.iterate(e.left,t);return i&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===It)return"";const t=this._buffers[e.piece.bufferIndex],i=e.piece,s=this.offsetInBuffer(i.bufferIndex,i.start),r=this.offsetInBuffer(i.bufferIndex,i.end);return t.buffer.substring(s,r)}getPieceContent(e){const t=this._buffers[e.bufferIndex],i=this.offsetInBuffer(e.bufferIndex,e.start),s=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(i,s)}rbInsertRight(e,t){const i=new K3(t,1);if(i.left=It,i.right=It,i.parent=It,i.size_left=0,i.lf_left=0,this.root===It)this.root=i,i.color=0;else if(e.right===It)e.right=i,i.parent=e;else{const r=kP(e.right);r.left=i,i.parent=r}return eY(this,i),i}rbInsertLeft(e,t){const i=new K3(t,1);if(i.left=It,i.right=It,i.parent=It,i.size_left=0,i.lf_left=0,this.root===It)this.root=i,i.color=0;else if(e.left===It)e.left=i,i.parent=e;else{const s=pse(e.left);s.right=i,i.parent=s}return eY(this,i),i}}class Vp extends Le{constructor(e,t,i,s,r,o,a){super(),this._onDidChangeContent=this._register(new ue),this._BOM=t,this._mightContainNonBasicASCII=!o,this._mightContainRTL=s,this._mightContainUnusualLineTerminators=r,this._pieceTree=new FPe(e,i,a)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){const i=e+t,s=this.getPositionAt(e),r=this.getPositionAt(i);return new te(s.lineNumber,s.column,r.lineNumber,r.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";const i=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,i)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;const i=this.getOffsetAt(e.startLineNumber,e.startColumn),s=this.getOffsetAt(e.endLineNumber,e.endColumn);let r=0;const o=this._getEndOfLine(t),a=this.getEOL();if(o.length!==a.length){const l=o.length-a.length,c=e.endLineNumber-e.startLineNumber;r=l*c}return s-i+r}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let i=0;const s=e.startLineNumber,r=e.endLineNumber;for(let o=s;o<=r;o++){const a=this.getLineContent(o),l=o===s?e.startColumn-1:0,c=o===r?e.endColumn-1:a.length;for(let d=l;d<c;d++)gs(a.charCodeAt(d))?(i=i+1,d=d+1):i=i+1}return i+=this._getEndOfLine(t).length*(r-s),i}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){const t=fo(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=sm(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,i){let s=this._mightContainRTL,r=this._mightContainUnusualLineTerminators,o=this._mightContainNonBasicASCII,a=!0,l=[];for(let m=0;m<e.length;m++){const p=e[m];a&&p._isTracked&&(a=!1);const b=p.range;if(p.text){let C=!0;o||(C=!EV(p.text),o=C),!s&&C&&(s=A_(p.text)),!r&&C&&(r=hie(p.text))}let w="",v=0,_=0,y=0;if(p.text){let C;[v,_,y,C]=Oh(p.text);const S=this.getEOL();C===0||C===(S===`\r
`?2:1)?w=p.text:w=p.text.replace(/\r\n|\r|\n/g,S)}l[m]={sortIndex:m,identifier:p.identifier||null,range:b,rangeOffset:this.getOffsetAt(b.startLineNumber,b.startColumn),rangeLength:this.getValueLengthInRange(b),text:w,eolCount:v,firstLineLength:_,lastLineLength:y,forceMoveMarkers:!!p.forceMoveMarkers,isAutoWhitespaceEdit:p.isAutoWhitespaceEdit||!1}}l.sort(Vp._sortOpsAscending);let c=!1;for(let m=0,p=l.length-1;m<p;m++){const b=l[m].range.getEndPosition(),w=l[m+1].range.getStartPosition();if(w.isBeforeOrEqual(b)){if(w.isBefore(b))throw new Error("Overlapping ranges are not allowed!");c=!0}}a&&(l=this._reduceOperations(l));const d=i||t?Vp._getInverseEditRanges(l):[],u=[];if(t)for(let m=0;m<l.length;m++){const p=l[m],b=d[m];if(p.isAutoWhitespaceEdit&&p.range.isEmpty())for(let w=b.startLineNumber;w<=b.endLineNumber;w++){let v="";w===b.startLineNumber&&(v=this.getLineContent(p.range.startLineNumber),fo(v)!==-1)||u.push({lineNumber:w,oldContent:v})}}let h=null;if(i){let m=0;h=[];for(let p=0;p<l.length;p++){const b=l[p],w=d[p],v=this.getValueInRange(b.range),_=b.rangeOffset+m;m+=b.text.length-v.length,h[p]={sortIndex:b.sortIndex,identifier:b.identifier,range:w,text:v,textChange:new Ps(b.rangeOffset,v,_,b.text)}}c||h.sort((p,b)=>p.sortIndex-b.sortIndex)}this._mightContainRTL=s,this._mightContainUnusualLineTerminators=r,this._mightContainNonBasicASCII=o;const f=this._doApplyEdits(l);let g=null;if(t&&u.length>0){u.sort((m,p)=>p.lineNumber-m.lineNumber),g=[];for(let m=0,p=u.length;m<p;m++){const b=u[m].lineNumber;if(m>0&&u[m-1].lineNumber===b)continue;const w=u[m].oldContent,v=this.getLineContent(b);v.length===0||v===w||fo(v)!==-1||g.push(b)}}return this._onDidChangeContent.fire(),new M4e(h,f,g)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const i=e[0].range,s=e[e.length-1].range,r=new te(i.startLineNumber,i.startColumn,s.endLineNumber,s.endColumn);let o=i.startLineNumber,a=i.startColumn;const l=[];for(let f=0,g=e.length;f<g;f++){const m=e[f],p=m.range;t=t||m.forceMoveMarkers,l.push(this.getValueInRange(new te(o,a,p.startLineNumber,p.startColumn))),m.text.length>0&&l.push(m.text),o=p.endLineNumber,a=p.endColumn}const c=l.join(""),[d,u,h]=Oh(c);return{sortIndex:0,identifier:e[0].identifier,range:r,rangeOffset:this.getOffsetAt(r.startLineNumber,r.startColumn),rangeLength:this.getValueLengthInRange(r,0),text:c,eolCount:d,firstLineLength:u,lastLineLength:h,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(Vp._sortOpsDescending);const t=[];for(let i=0;i<e.length;i++){const s=e[i],r=s.range.startLineNumber,o=s.range.startColumn,a=s.range.endLineNumber,l=s.range.endColumn;if(r===a&&o===l&&s.text.length===0)continue;s.text?(this._pieceTree.delete(s.rangeOffset,s.rangeLength),this._pieceTree.insert(s.rangeOffset,s.text,!0)):this._pieceTree.delete(s.rangeOffset,s.rangeLength);const c=new te(r,o,a,l);t.push({range:c,rangeLength:s.rangeLength,text:s.text,rangeOffset:s.rangeOffset,forceMoveMarkers:s.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,i,s){return this._pieceTree.findMatchesLineByLine(e,t,i,s)}static _getInverseEditRanges(e){const t=[];let i=0,s=0,r=null;for(let o=0,a=e.length;o<a;o++){const l=e[o];let c,d;r?r.range.endLineNumber===l.range.startLineNumber?(c=i,d=s+(l.range.startColumn-r.range.endColumn)):(c=i+(l.range.startLineNumber-r.range.endLineNumber),d=l.range.startColumn):(c=l.range.startLineNumber,d=l.range.startColumn);let u;if(l.text.length>0){const h=l.eolCount+1;h===1?u=new te(c,d,c,d+l.firstLineLength):u=new te(c,d,c+h-1,l.lastLineLength+1)}else u=new te(c,d,c,d);i=u.endLineNumber,s=u.endColumn,t.push(u),r=l}return t}static _sortOpsAscending(e,t){const i=te.compareRangesUsingEnds(e.range,t.range);return i===0?e.sortIndex-t.sortIndex:i}static _sortOpsDescending(e,t){const i=te.compareRangesUsingEnds(e.range,t.range);return i===0?t.sortIndex-e.sortIndex:-i}}class VPe{constructor(e,t,i,s,r,o,a,l,c){this._chunks=e,this._bom=t,this._cr=i,this._lf=s,this._crlf=r,this._containsRTL=o,this._containsUnusualLineTerminators=a,this._isBasicASCII=l,this._normalizeEOL=c}_getEOL(e){const t=this._cr+this._lf+this._crlf,i=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:i>t/2?`\r
`:`
`}create(e){const t=this._getEOL(e),i=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let r=0,o=i.length;r<o;r++){const a=i[r].buffer.replace(/\r\n|\r|\n/g,t),l=ad(a);i[r]=new Gf(a,l)}const s=new Vp(i,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:s,disposable:s}}}class vse{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&RV(e)&&(this.BOM=KNe,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=RPe(this._tmpLineStarts,e);this.chunks.push(new Gf(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,t.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||(this.containsRTL=A_(e)),this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=hie(e)))}finish(e=!0){return this._finish(),new VPe(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);const t=ad(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}}}const s1=new class{clone(){return this}equals(n){return this===n}};function _se(n,e){return new fP([new H_(0,"",n)],e)}function IP(n,e){const t=new Uint32Array(2);return t[0]=0,t[1]=(n<<0|0|0|32768|2<<24)>>>0,new Y2(t,e===null?s1:e)}class PPe{constructor(e){this._default=e,this._store=[]}get(e){return e<this._store.length?this._store[e]:this._default}set(e,t){for(;e>=this._store.length;)this._store[this._store.length]=this._default;this._store[e]=t}replace(e,t,i){if(e>=this._store.length)return;if(t===0){this.insert(e,i);return}else if(i===0){this.delete(e,t);return}const s=this._store.slice(0,e),r=this._store.slice(e+t),o=OPe(i,this._default);this._store=s.concat(o,r)}delete(e,t){t===0||e>=this._store.length||this._store.splice(e,t)}insert(e,t){if(t===0||e>=this._store.length)return;const i=[];for(let s=0;s<t;s++)i[s]=this._default;this._store=N2(this._store,e,i)}}function OPe(n,e){const t=[];for(let i=0;i<n;i++)t[i]=e;return t}class ZPe{get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}constructor(e,t){this._startLineNumber=e,this._tokens=t}getLineTokens(e){return this._tokens[e-this._startLineNumber]}appendLineTokens(e){this._tokens.push(e)}}class j3{constructor(){this._tokens=[]}add(e,t){if(this._tokens.length>0){const i=this._tokens[this._tokens.length-1];if(i.endLineNumber+1===e){i.appendLineTokens(t);return}}this._tokens.push(new ZPe(e,[t]))}finalize(){return this._tokens}}class GPe{constructor(e,t){this.tokenizationSupport=t,this.initialState=this.tokenizationSupport.getInitialState(),this.store=new J3(e)}getStartState(e){return this.store.getStartState(e,this.initialState)}getFirstInvalidLine(){return this.store.getFirstInvalidLine(this.initialState)}}class BPe extends GPe{constructor(e,t,i,s){super(e,t),this._textModel=i,this._languageIdCodec=s}updateTokensUntilLine(e,t){const i=this._textModel.getLanguageId();for(;;){const s=this.getFirstInvalidLine();if(!s||s.lineNumber>t)break;const r=this._textModel.getLineContent(s.lineNumber),o=q0(this._languageIdCodec,i,this.tokenizationSupport,r,!0,s.startState);e.add(s.lineNumber,o.tokens),this.store.setEndState(s.lineNumber,o.endState)}}getTokenTypeIfInsertingCharacter(e,t){const i=this.getStartState(e.lineNumber);if(!i)return 0;const s=this._textModel.getLanguageId(),r=this._textModel.getLineContent(e.lineNumber),o=r.substring(0,e.column-1)+t+r.substring(e.column-1),a=q0(this._languageIdCodec,s,this.tokenizationSupport,o,!0,i),l=new Hn(a.tokens,o,this._languageIdCodec);if(l.getCount()===0)return 0;const c=l.findTokenIndexAtOffset(e.column-1);return l.getStandardTokenType(c)}tokenizeLineWithEdit(e,t,i){const s=e.lineNumber,r=e.column,o=this.getStartState(s);if(!o)return null;const a=this._textModel.getLineContent(s),l=a.substring(0,r-1)+i+a.substring(r-1+t),c=this._textModel.getLanguageIdAtPosition(s,0),d=q0(this._languageIdCodec,c,this.tokenizationSupport,l,!0,o);return new Hn(d.tokens,l,this._languageIdCodec)}hasAccurateTokensForLine(e){const t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t}isCheapToTokenize(e){const t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t||e===t&&this._textModel.getLineLength(e)<2048}tokenizeHeuristically(e,t,i){if(i<=this.store.getFirstInvalidEndStateLineNumberOrMax())return{heuristicTokens:!1};if(t<=this.store.getFirstInvalidEndStateLineNumberOrMax())return this.updateTokensUntilLine(e,i),{heuristicTokens:!1};let s=this.guessStartState(t);const r=this._textModel.getLanguageId();for(let o=t;o<=i;o++){const a=this._textModel.getLineContent(o),l=q0(this._languageIdCodec,r,this.tokenizationSupport,a,!0,s);e.add(o,l.tokens),s=l.endState}return{heuristicTokens:!0}}guessStartState(e){let t=this._textModel.getLineFirstNonWhitespaceColumn(e);const i=[];let s=null;for(let a=e-1;t>1&&a>=1;a--){const l=this._textModel.getLineFirstNonWhitespaceColumn(a);if(l!==0&&l<t&&(i.push(this._textModel.getLineContent(a)),t=l,s=this.getStartState(a),s))break}s||(s=this.tokenizationSupport.getInitialState()),i.reverse();const r=this._textModel.getLanguageId();let o=s;for(const a of i)o=q0(this._languageIdCodec,r,this.tokenizationSupport,a,!1,o).endState;return o}}class J3{constructor(e){this.lineCount=e,this._tokenizationStateStore=new XPe,this._invalidEndStatesLineNumbers=new zPe,this._invalidEndStatesLineNumbers.addRange(new Rt(1,e+1))}getEndState(e){return this._tokenizationStateStore.getEndState(e)}setEndState(e,t){if(!t)throw new Ai("Cannot set null/undefined state");this._invalidEndStatesLineNumbers.delete(e);const i=this._tokenizationStateStore.setEndState(e,t);return i&&e<this.lineCount&&this._invalidEndStatesLineNumbers.addRange(new Rt(e+1,e+2)),i}acceptChange(e,t){this.lineCount+=t-e.length,this._tokenizationStateStore.acceptChange(e,t),this._invalidEndStatesLineNumbers.addRangeAndResize(new Rt(e.startLineNumber,e.endLineNumberExclusive),t)}acceptChanges(e){for(const t of e){const[i]=Oh(t.text);this.acceptChange(new Lt(t.range.startLineNumber,t.range.endLineNumber+1),i+1)}}invalidateEndStateRange(e){this._invalidEndStatesLineNumbers.addRange(new Rt(e.startLineNumber,e.endLineNumberExclusive))}getFirstInvalidEndStateLineNumber(){return this._invalidEndStatesLineNumbers.min}getFirstInvalidEndStateLineNumberOrMax(){return this.getFirstInvalidEndStateLineNumber()||Number.MAX_SAFE_INTEGER}allStatesValid(){return this._invalidEndStatesLineNumbers.min===null}getStartState(e,t){return e===1?t:this.getEndState(e-1)}getFirstInvalidLine(e){const t=this.getFirstInvalidEndStateLineNumber();if(t===null)return null;const i=this.getStartState(t,e);if(!i)throw new Ai("Start state must be defined");return{lineNumber:t,startState:i}}}class XPe{constructor(){this._lineEndStates=new PPe(null)}getEndState(e){return this._lineEndStates.get(e)}setEndState(e,t){const i=this._lineEndStates.get(e);return i&&i.equals(t)?!1:(this._lineEndStates.set(e,t),!0)}acceptChange(e,t){let i=e.length;t>0&&i>0&&(i--,t--),this._lineEndStates.replace(e.startLineNumber,i,t)}}class zPe{constructor(){this._ranges=[]}get min(){return this._ranges.length===0?null:this._ranges[0].start}delete(e){const t=this._ranges.findIndex(i=>i.contains(e));if(t!==-1){const i=this._ranges[t];i.start===e?i.endExclusive===e+1?this._ranges.splice(t,1):this._ranges[t]=new Rt(e+1,i.endExclusive):i.endExclusive===e+1?this._ranges[t]=new Rt(i.start,e):this._ranges.splice(t,1,new Rt(i.start,e),new Rt(e+1,i.endExclusive))}}addRange(e){Rt.addRange(e,this._ranges)}addRangeAndResize(e,t){let i=0;for(;!(i>=this._ranges.length||e.start<=this._ranges[i].endExclusive);)i++;let s=i;for(;!(s>=this._ranges.length||e.endExclusive<this._ranges[s].start);)s++;const r=t-e.length;for(let o=s;o<this._ranges.length;o++)this._ranges[o]=this._ranges[o].delta(r);if(i===s){const o=new Rt(e.start,e.start+t);o.isEmpty||this._ranges.splice(i,0,o)}else{const o=Math.min(e.start,this._ranges[i].start),a=Math.max(e.endExclusive,this._ranges[s-1].endExclusive),l=new Rt(o,a+r);l.isEmpty?this._ranges.splice(i,s-i):this._ranges.splice(i,s-i,l)}}toString(){return this._ranges.map(e=>e.toString()).join(" + ")}}function q0(n,e,t,i,s,r){let o=null;if(t)try{o=t.tokenizeEncoded(i,s,r.clone())}catch(a){gi(a)}return o||(o=IP(n.encodeLanguageId(e),r)),Hn.convertToEndOffset(o.tokens,i.length),o}class HPe{constructor(e,t){this._tokenizerWithStateStore=e,this._backgroundTokenStore=t,this._isDisposed=!1,this._isScheduled=!1}dispose(){this._isDisposed=!0}handleChanges(){this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._isScheduled||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._isScheduled=!0,qte(e=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(e)}))}_backgroundTokenizeWithDeadline(e){const t=Date.now()+e.timeRemaining(),i=()=>{this._isDisposed||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._backgroundTokenizeForAtLeast1ms(),Date.now()<t?Gte(i):this._beginBackgroundTokenization())};i()}_backgroundTokenizeForAtLeast1ms(){const e=this._tokenizerWithStateStore._textModel.getLineCount(),t=new j3,i=Hc.create(!1);do if(i.elapsed()>1||this._tokenizeOneInvalidLine(t)>=e)break;while(this._hasLinesToTokenize());this._backgroundTokenStore.setTokens(t.finalize()),this.checkFinished()}_hasLinesToTokenize(){return this._tokenizerWithStateStore?!this._tokenizerWithStateStore.store.allStatesValid():!1}_tokenizeOneInvalidLine(e){var t;const i=(t=this._tokenizerWithStateStore)===null||t===void 0?void 0:t.getFirstInvalidLine();return i?(this._tokenizerWithStateStore.updateTokensUntilLine(e,i.lineNumber),i.lineNumber):this._tokenizerWithStateStore._textModel.getLineCount()+1}checkFinished(){this._isDisposed||this._tokenizerWithStateStore.store.allStatesValid()&&this._backgroundTokenStore.backgroundTokenizationFinished()}requestTokens(e,t){this._tokenizerWithStateStore.store.invalidateEndStateRange(new Lt(e,t))}}const ld=new Uint32Array(0).buffer;class sc{static deleteBeginning(e,t){return e===null||e===ld?e:sc.delete(e,0,t)}static deleteEnding(e,t){if(e===null||e===ld)return e;const i=bd(e),s=i[i.length-2];return sc.delete(e,t,s)}static delete(e,t,i){if(e===null||e===ld||t===i)return e;const s=bd(e),r=s.length>>>1;if(t===0&&s[s.length-2]===i)return ld;const o=Hn.findIndexInTokensArray(s,t),a=o>0?s[o-1<<1]:0,l=s[o<<1];if(i<l){const f=i-t;for(let g=o;g<r;g++)s[g<<1]-=f;return e}let c,d;a!==t?(s[o<<1]=t,c=o+1<<1,d=t):(c=o<<1,d=a);const u=i-t;for(let f=o+1;f<r;f++){const g=s[f<<1]-u;g>d&&(s[c++]=g,s[c++]=s[(f<<1)+1],d=g)}if(c===s.length)return e;const h=new Uint32Array(c);return h.set(s.subarray(0,c),0),h.buffer}static append(e,t){if(t===ld)return e;if(e===ld)return t;if(e===null)return e;if(t===null)return null;const i=bd(e),s=bd(t),r=s.length>>>1,o=new Uint32Array(i.length+s.length);o.set(i,0);let a=i.length;const l=i[i.length-2];for(let c=0;c<r;c++)o[a++]=s[c<<1]+l,o[a++]=s[(c<<1)+1];return o.buffer}static insert(e,t,i){if(e===null||e===ld)return e;const s=bd(e),r=s.length>>>1;let o=Hn.findIndexInTokensArray(s,t);o>0&&s[o-1<<1]===t&&o--;for(let a=o;a<r;a++)s[a<<1]+=i;return e}}function bd(n){return n instanceof Uint32Array?n:new Uint32Array(n)}class r1{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}get hasTokens(){return this._lineTokens.length>0}getTokens(e,t,i){let s=null;if(t<this._len&&(s=this._lineTokens[t]),s!==null&&s!==ld)return new Hn(bd(s),i,this._languageIdCodec);const r=new Uint32Array(2);return r[0]=i.length,r[1]=iY(this._languageIdCodec.encodeLanguageId(e)),new Hn(r,i,this._languageIdCodec)}static _massageTokens(e,t,i){const s=i?bd(i):null;if(t===0){let r=!1;if(s&&s.length>1&&(r=oo.getLanguageId(s[1])!==e),!r)return ld}if(!s||s.length===0){const r=new Uint32Array(2);return r[0]=t,r[1]=iY(e),r.buffer}return s[s.length-2]=t,s.byteOffset===0&&s.byteLength===s.buffer.byteLength?s.buffer:s}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;const i=[];for(let s=0;s<t;s++)i[s]=null;this._lineTokens=N2(this._lineTokens,e,i),this._len+=t}setTokens(e,t,i,s,r){const o=r1._massageTokens(this._languageIdCodec.encodeLanguageId(e),i,s);this._ensureLine(t);const a=this._lineTokens[t];return this._lineTokens[t]=o,r?!r1._equals(a,o):!1}static _equals(e,t){if(!e||!t)return!e&&!t;const i=bd(e),s=bd(t);if(i.length!==s.length)return!1;for(let r=0,o=i.length;r<o;r++)if(i[r]!==s[r])return!1;return!0}acceptEdit(e,t,i){this._acceptDeleteRange(e),this._acceptInsertText(new pe(e.startLineNumber,e.startColumn),t,i)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=sc.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=sc.deleteEnding(this._lineTokens[t],e.startColumn-1);const i=e.endLineNumber-1;let s=null;i<this._len&&(s=sc.deleteBeginning(this._lineTokens[i],e.endColumn-1)),this._lineTokens[t]=sc.append(this._lineTokens[t],s),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,i){if(t===0&&i===0)return;const s=e.lineNumber-1;if(!(s>=this._len)){if(t===0){this._lineTokens[s]=sc.insert(this._lineTokens[s],e.column-1,i);return}this._lineTokens[s]=sc.deleteEnding(this._lineTokens[s],e.column-1),this._lineTokens[s]=sc.insert(this._lineTokens[s],e.column-1,i),this._insertLines(e.lineNumber,t)}}setMultilineTokens(e,t){if(e.length===0)return{changes:[]};const i=[];for(let s=0,r=e.length;s<r;s++){const o=e[s];let a=0,l=0,c=!1;for(let d=o.startLineNumber;d<=o.endLineNumber;d++)c?(this.setTokens(t.getLanguageId(),d-1,t.getLineLength(d),o.getLineTokens(d),!1),l=d):this.setTokens(t.getLanguageId(),d-1,t.getLineLength(d),o.getLineTokens(d),!0)&&(c=!0,a=d,l=d);c&&i.push({fromLineNumber:a,toLineNumber:l})}return{changes:i}}}function iY(n){return(n<<0|0|0|32768|2<<24|1024)>>>0}class MP{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let i=e;if(t.length>0){const r=t[0].getRange(),o=t[t.length-1].getRange();if(!r||!o)return e;i=e.plusRange(r).plusRange(o)}let s=null;for(let r=0,o=this._pieces.length;r<o;r++){const a=this._pieces[r];if(a.endLineNumber<i.startLineNumber)continue;if(a.startLineNumber>i.endLineNumber){s=s||{index:r};break}if(a.removeTokens(i),a.isEmpty()){this._pieces.splice(r,1),r--,o--;continue}if(a.endLineNumber<i.startLineNumber)continue;if(a.startLineNumber>i.endLineNumber){s=s||{index:r};continue}const[l,c]=a.split(i);if(l.isEmpty()){s=s||{index:r};continue}c.isEmpty()||(this._pieces.splice(r,1,l,c),r++,o++,s=s||{index:r})}return s=s||{index:this._pieces.length},t.length>0&&(this._pieces=N2(this._pieces,s.index,t)),i}isComplete(){return this._isComplete}addSparseTokens(e,t){if(t.getLineContent().length===0)return t;const i=this._pieces;if(i.length===0)return t;const s=MP._findFirstPieceWithLine(i,e),r=i[s].getLineTokens(e);if(!r)return t;const o=t.getCount(),a=r.getCount();let l=0;const c=[];let d=0,u=0;const h=(f,g)=>{f!==u&&(u=f,c[d++]=f,c[d++]=g)};for(let f=0;f<a;f++){const g=r.getStartCharacter(f),m=r.getEndCharacter(f),p=r.getMetadata(f),b=((p&1?2048:0)|(p&2?4096:0)|(p&4?8192:0)|(p&8?16384:0)|(p&16?16744448:0)|(p&32?4278190080:0))>>>0,w=~b>>>0;for(;l<o&&t.getEndOffset(l)<=g;)h(t.getEndOffset(l),t.getMetadata(l)),l++;for(l<o&&t.getStartOffset(l)<g&&h(g,t.getMetadata(l));l<o&&t.getEndOffset(l)<m;)h(t.getEndOffset(l),t.getMetadata(l)&w|p&b),l++;if(l<o)h(m,t.getMetadata(l)&w|p&b),t.getEndOffset(l)===m&&l++;else{const v=Math.min(Math.max(0,l-1),o-1);h(m,t.getMetadata(v)&w|p&b)}}for(;l<o;)h(t.getEndOffset(l),t.getMetadata(l)),l++;return new Hn(new Uint32Array(c),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let i=0,s=e.length-1;for(;i<s;){let r=i+Math.floor((s-i)/2);if(e[r].endLineNumber<t)i=r+1;else if(e[r].startLineNumber>t)s=r-1;else{for(;r>i&&e[r-1].startLineNumber<=t&&t<=e[r-1].endLineNumber;)r--;return r}}return i}acceptEdit(e,t,i,s,r){for(const o of this._pieces)o.acceptEdit(e,t,i,s,r)}}class DL extends qne{constructor(e,t,i,s,r,o){super(),this._languageService=e,this._languageConfigurationService=t,this._textModel=i,this._bracketPairsTextModelPart=s,this._languageId=r,this._attachedViews=o,this._semanticTokens=new MP(this._languageService.languageIdCodec),this._onDidChangeLanguage=this._register(new ue),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new ue),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new ue),this.onDidChangeTokens=this._onDidChangeTokens.event,this.grammarTokens=this._register(new UPe(this._languageService.languageIdCodec,this._textModel,()=>this._languageId,this._attachedViews)),this._register(this._languageConfigurationService.onDidChange(a=>{a.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})})),this._register(this.grammarTokens.onDidChangeTokens(a=>{this._emitModelTokensChangedEvent(a)})),this._register(this.grammarTokens.onDidChangeBackgroundTokenizationState(a=>{this._bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState()}))}handleDidChangeContent(e){if(e.isFlush)this._semanticTokens.flush();else if(!e.isEolChange)for(const t of e.changes){const[i,s,r]=Oh(t.text);this._semanticTokens.acceptEdit(t.range,i,s,r,t.text.length>0?t.text.charCodeAt(0):0)}this.grammarTokens.handleDidChangeContent(e)}handleDidChangeAttached(){this.grammarTokens.handleDidChangeAttached()}getLineTokens(e){this.validateLineNumber(e);const t=this.grammarTokens.getLineTokens(e);return this._semanticTokens.addSparseTokens(e,t)}_emitModelTokensChangedEvent(e){this._textModel._isDisposing()||(this._bracketPairsTextModelPart.handleDidChangeTokens(e),this._onDidChangeTokens.fire(e))}validateLineNumber(e){if(e<1||e>this._textModel.getLineCount())throw new Ai("Illegal value for lineNumber")}get hasTokens(){return this.grammarTokens.hasTokens}resetTokenization(){this.grammarTokens.resetTokenization()}get backgroundTokenizationState(){return this.grammarTokens.backgroundTokenizationState}forceTokenization(e){this.validateLineNumber(e),this.grammarTokens.forceTokenization(e)}hasAccurateTokensForLine(e){return this.validateLineNumber(e),this.grammarTokens.hasAccurateTokensForLine(e)}isCheapToTokenize(e){return this.validateLineNumber(e),this.grammarTokens.isCheapToTokenize(e)}tokenizeIfCheap(e){this.validateLineNumber(e),this.grammarTokens.tokenizeIfCheap(e)}getTokenTypeIfInsertingCharacter(e,t,i){return this.grammarTokens.getTokenTypeIfInsertingCharacter(e,t,i)}tokenizeLineWithEdit(e,t,i){return this.grammarTokens.tokenizeLineWithEdit(e,t,i)}setSemanticTokens(e,t){this._semanticTokens.set(e,t),this._emitModelTokensChangedEvent({semanticTokensApplied:e!==null,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;const i=this._textModel.validateRange(this._semanticTokens.setPartial(e,t));this._emitModelTokensChangedEvent({semanticTokensApplied:!0,ranges:[{fromLineNumber:i.startLineNumber,toLineNumber:i.endLineNumber}]})}getWordAtPosition(e){this.assertNotDisposed();const t=this._textModel.validatePosition(e),i=this._textModel.getLineContent(t.lineNumber),s=this.getLineTokens(t.lineNumber),r=s.findTokenIndexAtOffset(t.column-1),[o,a]=DL._findLanguageBoundaries(s,r),l=Z_(t.column,this.getLanguageConfiguration(s.getLanguageId(r)).getWordDefinition(),i.substring(o,a),o);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn)return l;if(r>0&&o===t.column-1){const[c,d]=DL._findLanguageBoundaries(s,r-1),u=Z_(t.column,this.getLanguageConfiguration(s.getLanguageId(r-1)).getWordDefinition(),i.substring(c,d),c);if(u&&u.startColumn<=e.column&&e.column<=u.endColumn)return u}return null}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}static _findLanguageBoundaries(e,t){const i=e.getLanguageId(t);let s=0;for(let o=t;o>=0&&e.getLanguageId(o)===i;o--)s=e.getStartOffset(o);let r=e.getLineContent().length;for(let o=t,a=e.getCount();o<a&&e.getLanguageId(o)===i;o++)r=e.getEndOffset(o);return[s,r]}getWordUntilPosition(e){const t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(e,t){const i=this._textModel.validatePosition(new pe(e,t)),s=this.getLineTokens(i.lineNumber);return s.getLanguageId(s.findTokenIndexAtOffset(i.column-1))}setLanguageId(e,t="api"){if(this._languageId===e)return;const i={oldLanguage:this._languageId,newLanguage:e,source:t};this._languageId=e,this._bracketPairsTextModelPart.handleDidChangeLanguage(i),this.grammarTokens.resetTokenization(),this._onDidChangeLanguage.fire(i),this._onDidChangeLanguageConfiguration.fire({})}}class UPe extends Le{get backgroundTokenizationState(){return this._backgroundTokenizationState}constructor(e,t,i,s){super(),this._languageIdCodec=e,this._textModel=t,this.getLanguageId=i,this._tokenizer=null,this._defaultBackgroundTokenizer=null,this._backgroundTokenizer=this._register(new ha),this._tokens=new r1(this._languageIdCodec),this._debugBackgroundTokenizer=this._register(new ha),this._backgroundTokenizationState=1,this._onDidChangeBackgroundTokenizationState=this._register(new ue),this.onDidChangeBackgroundTokenizationState=this._onDidChangeBackgroundTokenizationState.event,this._onDidChangeTokens=this._register(new ue),this.onDidChangeTokens=this._onDidChangeTokens.event,this._attachedViewStates=this._register(new CV),this._register(Zn.onDidChange(r=>{const o=this.getLanguageId();r.changedLanguages.indexOf(o)!==-1&&this.resetTokenization()})),this.resetTokenization(),this._register(s.onDidChangeVisibleRanges(({view:r,state:o})=>{if(o){let a=this._attachedViewStates.get(r);a||(a=new YPe(()=>this.refreshRanges(a.lineRanges)),this._attachedViewStates.set(r,a)),a.handleStateChange(o)}else this._attachedViewStates.deleteAndDispose(r)}))}resetTokenization(e=!0){var t;this._tokens.flush(),(t=this._debugBackgroundTokens)===null||t===void 0||t.flush(),this._debugBackgroundStates&&(this._debugBackgroundStates=new J3(this._textModel.getLineCount())),e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]});const i=()=>{if(this._textModel.isTooLargeForTokenization())return[null,null];const o=Zn.get(this.getLanguageId());if(!o)return[null,null];let a;try{a=o.getInitialState()}catch(l){return gi(l),[null,null]}return[o,a]},[s,r]=i();if(s&&r?this._tokenizer=new BPe(this._textModel.getLineCount(),s,this._textModel,this._languageIdCodec):this._tokenizer=null,this._backgroundTokenizer.clear(),this._defaultBackgroundTokenizer=null,this._tokenizer){const o={setTokens:a=>{this.setTokens(a)},backgroundTokenizationFinished:()=>{if(this._backgroundTokenizationState===2)return;const a=2;this._backgroundTokenizationState=a,this._onDidChangeBackgroundTokenizationState.fire()},setEndState:(a,l)=>{var c;if(!this._tokenizer)return;const d=this._tokenizer.store.getFirstInvalidEndStateLineNumber();d!==null&&a>=d&&((c=this._tokenizer)===null||c===void 0||c.store.setEndState(a,l))}};s&&s.createBackgroundTokenizer&&!s.backgroundTokenizerShouldOnlyVerifyTokens&&(this._backgroundTokenizer.value=s.createBackgroundTokenizer(this._textModel,o)),!this._backgroundTokenizer.value&&!this._textModel.isTooLargeForTokenization()&&(this._backgroundTokenizer.value=this._defaultBackgroundTokenizer=new HPe(this._tokenizer,o),this._defaultBackgroundTokenizer.handleChanges()),s?.backgroundTokenizerShouldOnlyVerifyTokens&&s.createBackgroundTokenizer?(this._debugBackgroundTokens=new r1(this._languageIdCodec),this._debugBackgroundStates=new J3(this._textModel.getLineCount()),this._debugBackgroundTokenizer.clear(),this._debugBackgroundTokenizer.value=s.createBackgroundTokenizer(this._textModel,{setTokens:a=>{var l;(l=this._debugBackgroundTokens)===null||l===void 0||l.setMultilineTokens(a,this._textModel)},backgroundTokenizationFinished(){},setEndState:(a,l)=>{var c;(c=this._debugBackgroundStates)===null||c===void 0||c.setEndState(a,l)}})):(this._debugBackgroundTokens=void 0,this._debugBackgroundStates=void 0,this._debugBackgroundTokenizer.value=void 0)}this.refreshAllVisibleLineTokens()}handleDidChangeAttached(){var e;(e=this._defaultBackgroundTokenizer)===null||e===void 0||e.handleChanges()}handleDidChangeContent(e){var t,i,s;if(e.isFlush)this.resetTokenization(!1);else if(!e.isEolChange){for(const r of e.changes){const[o,a]=Oh(r.text);this._tokens.acceptEdit(r.range,o,a),(t=this._debugBackgroundTokens)===null||t===void 0||t.acceptEdit(r.range,o,a)}(i=this._debugBackgroundStates)===null||i===void 0||i.acceptChanges(e.changes),this._tokenizer&&this._tokenizer.store.acceptChanges(e.changes),(s=this._defaultBackgroundTokenizer)===null||s===void 0||s.handleChanges()}}setTokens(e){const{changes:t}=this._tokens.setMultilineTokens(e,this._textModel);return t.length>0&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:t}),{changes:t}}refreshAllVisibleLineTokens(){const e=Lt.joinMany([...this._attachedViewStates].map(([t,i])=>i.lineRanges));this.refreshRanges(e)}refreshRanges(e){for(const t of e)this.refreshRange(t.startLineNumber,t.endLineNumberExclusive-1)}refreshRange(e,t){var i,s;if(!this._tokenizer)return;e=Math.max(1,Math.min(this._textModel.getLineCount(),e)),t=Math.min(this._textModel.getLineCount(),t);const r=new j3,{heuristicTokens:o}=this._tokenizer.tokenizeHeuristically(r,e,t),a=this.setTokens(r.finalize());if(o)for(const l of a.changes)(i=this._backgroundTokenizer.value)===null||i===void 0||i.requestTokens(l.fromLineNumber,l.toLineNumber+1);(s=this._defaultBackgroundTokenizer)===null||s===void 0||s.checkFinished()}forceTokenization(e){var t,i;const s=new j3;(t=this._tokenizer)===null||t===void 0||t.updateTokensUntilLine(s,e),this.setTokens(s.finalize()),(i=this._defaultBackgroundTokenizer)===null||i===void 0||i.checkFinished()}hasAccurateTokensForLine(e){return this._tokenizer?this._tokenizer.hasAccurateTokensForLine(e):!0}isCheapToTokenize(e){return this._tokenizer?this._tokenizer.isCheapToTokenize(e):!0}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}getLineTokens(e){var t;const i=this._textModel.getLineContent(e),s=this._tokens.getTokens(this._textModel.getLanguageId(),e-1,i);if(this._debugBackgroundTokens&&this._debugBackgroundStates&&this._tokenizer&&this._debugBackgroundStates.getFirstInvalidEndStateLineNumberOrMax()>e&&this._tokenizer.store.getFirstInvalidEndStateLineNumberOrMax()>e){const r=this._debugBackgroundTokens.getTokens(this._textModel.getLanguageId(),e-1,i);!s.equals(r)&&(!((t=this._debugBackgroundTokenizer.value)===null||t===void 0)&&t.reportMismatchingTokens)&&this._debugBackgroundTokenizer.value.reportMismatchingTokens(e)}return s}getTokenTypeIfInsertingCharacter(e,t,i){if(!this._tokenizer)return 0;const s=this._textModel.validatePosition(new pe(e,t));return this.forceTokenization(s.lineNumber),this._tokenizer.getTokenTypeIfInsertingCharacter(s,i)}tokenizeLineWithEdit(e,t,i){if(!this._tokenizer)return null;const s=this._textModel.validatePosition(e);return this.forceTokenization(s.lineNumber),this._tokenizer.tokenizeLineWithEdit(s,t,i)}get hasTokens(){return this._tokens.hasTokens}}class YPe extends Le{get lineRanges(){return this._lineRanges}constructor(e){super(),this._refreshTokens=e,this.runner=this._register(new as(()=>this.update(),50)),this._computedLineRanges=[],this._lineRanges=[]}update(){Gs(this._computedLineRanges,this._lineRanges,(e,t)=>e.equals(t))||(this._computedLineRanges=this._lineRanges,this._refreshTokens())}handleStateChange(e){this._lineRanges=e.visibleLineRanges,e.stabilized?(this.runner.cancel(),this.update()):this.runner.schedule()}}const EP=ri("undoRedoService");class wse{constructor(e,t){this.resource=e,this.elements=t}}class Pb{constructor(){this.id=Pb._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}Pb._ID=0;Pb.None=new Pb;class gc{constructor(){this.id=gc._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}gc._ID=0;gc.None=new gc;var KPe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},mR=function(n,e){return function(t,i){e(t,i,n)}},Df;function jPe(n){const e=new vse;return e.acceptChunk(n),e.finish()}function JPe(n){const e=new vse;let t;for(;typeof(t=n.read())=="string";)e.acceptChunk(t);return e.finish()}function nY(n,e){let t;return typeof n=="string"?t=jPe(n):D4e(n)?t=JPe(n):t=n,t.create(e)}let Oy=0;const $Pe=999,QPe=1e4;class qPe{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;const e=[];let t=0,i=0;do{const s=this._source.read();if(s===null)return this._eos=!0,t===0?null:e.join("");if(s.length>0&&(e[t++]=s,i+=s.length),i>=64*1024)return e.join("")}while(!0)}}const ev=()=>{throw new Error("Invalid change accessor")};let Gh=Df=class extends Le{static resolveOptions(e,t){if(t.detectIndentation){const i=YU(e,t.tabSize,t.insertSpaces);return new YS({tabSize:i.tabSize,indentSize:"tabSize",insertSpaces:i.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new YS(t)}get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}onDidChangeContentOrInjectedText(e){return xc(this._eventEmitter.fastEvent(t=>e(t)),this._onDidChangeInjectedText.event(t=>e(t)))}_isDisposing(){return this.__isDisposing}get tokenization(){return this._tokenizationTextModelPart}get bracketPairs(){return this._bracketPairs}get guides(){return this._guidesTextModelPart}constructor(e,t,i,s=null,r,o,a){super(),this._undoRedoService=r,this._languageService=o,this._languageConfigurationService=a,this._onWillDispose=this._register(new ue),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new rOe(f=>this.handleBeforeFireDecorationsChangedEvent(f))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeOptions=this._register(new ue),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new ue),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeInjectedText=this._register(new ue),this._eventEmitter=this._register(new oOe),this._languageSelectionListener=this._register(new ha),this._deltaDecorationCallCnt=0,this._attachedViews=new aOe,Oy++,this.id="$model"+Oy,this.isForSimpleWidget=i.isForSimpleWidget,typeof s>"u"||s===null?this._associatedResource=Ft.parse("inmemory://model/"+Oy):this._associatedResource=s,this._attachedEditorCount=0;const{textBuffer:l,disposable:c}=nY(e,i.defaultEOL);this._buffer=l,this._bufferDisposable=c,this._options=Df.resolveOptions(this._buffer,i);const d=typeof t=="string"?t:t.languageId;typeof t!="string"&&(this._languageSelectionListener.value=t.onDidChange(()=>this._setLanguage(t.languageId))),this._bracketPairs=this._register(new ePe(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new B4e(this,this._languageConfigurationService)),this._decorationProvider=this._register(new iPe(this)),this._tokenizationTextModelPart=new DL(this._languageService,this._languageConfigurationService,this,this._bracketPairs,d,this._attachedViews);const u=this._buffer.getLineCount(),h=this._buffer.getValueLengthInRange(new te(1,1,u,this._buffer.getLineLength(u)+1),0);i.largeFileOptimizations?(this._isTooLargeForTokenization=h>Df.LARGE_FILE_SIZE_THRESHOLD||u>Df.LARGE_FILE_LINE_COUNT_THRESHOLD,this._isTooLargeForHeapOperation=h>Df.LARGE_FILE_HEAP_OPERATION_THRESHOLD):(this._isTooLargeForTokenization=!1,this._isTooLargeForHeapOperation=!1),this._isTooLargeForSyncing=h>Df._MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=fie(Oy),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new sY,this._commandManager=new LP(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()})),this._languageService.requestRichLanguageFeatures(d)}dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;const e=new Vp([],"",`
`,!1,!1,!0,!0);e.dispose(),this._buffer=e,this._bufferDisposable=Le.None}_assertNotDisposed(){if(this._isDisposed)throw new Error("Model is disposed!")}_emitContentChangedEvent(e,t){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(t),this._bracketPairs.handleDidChangeContent(t),this._eventEmitter.fire(new dg(e,t)))}setValue(e){if(this._assertNotDisposed(),e==null)throw wb();const{textBuffer:t,disposable:i}=nY(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,i)}_createContentChanged2(e,t,i,s,r,o,a,l){return{changes:[{range:e,rangeOffset:t,rangeLength:i,text:s}],eol:this._buffer.getEOL(),isEolChange:l,versionId:this.getVersionId(),isUndoing:r,isRedoing:o,isFlush:a}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();const i=this.getFullModelRange(),s=this.getValueLengthInRange(i),r=this.getLineCount(),o=this.getLineMaxColumn(r);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._decorations=Object.create(null),this._decorationsTree=new sY,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new Wp([new SVe],this._versionId,!1,!1),this._createContentChanged2(new te(1,1,r,o),0,s,this.getValue(),!1,!1,!0,!1))}setEOL(e){this._assertNotDisposed();const t=e===1?`\r
`:`
`;if(this._buffer.getEOL()===t)return;const i=this.getFullModelRange(),s=this.getValueLengthInRange(i),r=this.getLineCount(),o=this.getLineMaxColumn(r);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new Wp([new kVe],this._versionId,!1,!1),this._createContentChanged2(new te(1,1,r,o),0,s,this.getValue(),!1,!1,!1,!0))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let i=0,s=t.length;i<s;i++){const r=t[i],o=r.range,a=r.cachedAbsoluteStart-r.start,l=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),c=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);r.cachedAbsoluteStart=l,r.cachedAbsoluteEnd=c,r.cachedVersionId=e,r.start=l-a,r.end=c-a,Zh(r)}}onBeforeAttached(){return this._attachedEditorCount++,this._attachedEditorCount===1&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.attachView()}onBeforeDetached(e){this._attachedEditorCount--,this._attachedEditorCount===0&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.detachView(e)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isTooLargeForHeapOperation(){return this._isTooLargeForHeapOperation}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0;const i=this._buffer.getLineCount();for(let s=1;s<=i;s++){const r=this._buffer.getLineLength(s);r>=QPe?t+=r:e+=r}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();const t=typeof e.tabSize<"u"?e.tabSize:this._options.tabSize,i=typeof e.indentSize<"u"?e.indentSize:this._options.originalIndentSize,s=typeof e.insertSpaces<"u"?e.insertSpaces:this._options.insertSpaces,r=typeof e.trimAutoWhitespace<"u"?e.trimAutoWhitespace:this._options.trimAutoWhitespace,o=typeof e.bracketColorizationOptions<"u"?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,a=new YS({tabSize:t,indentSize:i,insertSpaces:s,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:r,bracketPairColorizationOptions:o});if(this._options.equals(a))return;const l=this._options.createChangeEvent(a);this._options=a,this._bracketPairs.handleDidChangeOptions(l),this._decorationProvider.handleDidChangeOptions(l),this._onDidChangeOptions.fire(l)}detectIndentation(e,t){this._assertNotDisposed();const i=YU(this._buffer,t,e);this.updateOptions({insertSpaces:i.insertSpaces,tabSize:i.tabSize,indentSize:i.tabSize})}normalizeIndentation(e){return this._assertNotDisposed(),zie(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){const t=this.findMatches(uie.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(i=>({range:i.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();const t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();const t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new Ai("Operation would exceed heap memory limits");const i=this.getFullModelRange(),s=this.getValueInRange(i,e);return t?this._buffer.getBOM()+s:s}createSnapshot(e=!1){return new qPe(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();const i=this.getFullModelRange(),s=this.getValueLengthInRange(i,e);return t?this._buffer.getBOM().length+s:s}getValueInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Ai("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Ai("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new Ai("Operation would exceed heap memory limits");return this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Ai("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Ai("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Ai("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const t=this._buffer.getLineCount(),i=e.startLineNumber,s=e.startColumn;let r=Math.floor(typeof i=="number"&&!isNaN(i)?i:1),o=Math.floor(typeof s=="number"&&!isNaN(s)?s:1);if(r<1)r=1,o=1;else if(r>t)r=t,o=this.getLineMaxColumn(r);else if(o<=1)o=1;else{const u=this.getLineMaxColumn(r);o>=u&&(o=u)}const a=e.endLineNumber,l=e.endColumn;let c=Math.floor(typeof a=="number"&&!isNaN(a)?a:1),d=Math.floor(typeof l=="number"&&!isNaN(l)?l:1);if(c<1)c=1,d=1;else if(c>t)c=t,d=this.getLineMaxColumn(c);else if(d<=1)d=1;else{const u=this.getLineMaxColumn(c);d>=u&&(d=u)}return i===r&&s===o&&a===c&&l===d&&e instanceof te&&!(e instanceof Ii)?e:new te(r,o,c,d)}_isValidPosition(e,t,i){if(typeof e!="number"||typeof t!="number"||isNaN(e)||isNaN(t)||e<1||t<1||(e|0)!==e||(t|0)!==t)return!1;const s=this._buffer.getLineCount();if(e>s)return!1;if(t===1)return!0;const r=this.getLineMaxColumn(e);if(t>r)return!1;if(i===1){const o=this._buffer.getLineCharCode(e,t-2);if(gs(o))return!1}return!0}_validatePosition(e,t,i){const s=Math.floor(typeof e=="number"&&!isNaN(e)?e:1),r=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),o=this._buffer.getLineCount();if(s<1)return new pe(1,1);if(s>o)return new pe(o,this.getLineMaxColumn(o));if(r<=1)return new pe(s,1);const a=this.getLineMaxColumn(s);if(r>=a)return new pe(s,a);if(i===1){const l=this._buffer.getLineCharCode(s,r-2);if(gs(l))return new pe(s,r-1)}return new pe(s,r)}validatePosition(e){return this._assertNotDisposed(),e instanceof pe&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}_isValidRange(e,t){const i=e.startLineNumber,s=e.startColumn,r=e.endLineNumber,o=e.endColumn;if(!this._isValidPosition(i,s,0)||!this._isValidPosition(r,o,0))return!1;if(t===1){const a=s>1?this._buffer.getLineCharCode(i,s-2):0,l=o>1&&o<=this._buffer.getLineLength(r)?this._buffer.getLineCharCode(r,o-2):0,c=gs(a),d=gs(l);return!c&&!d}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof te&&!(e instanceof Ii)&&this._isValidRange(e,1))return e;const i=this._validatePosition(e.startLineNumber,e.startColumn,0),s=this._validatePosition(e.endLineNumber,e.endColumn,0),r=i.lineNumber,o=i.column,a=s.lineNumber,l=s.column;{const c=o>1?this._buffer.getLineCharCode(r,o-2):0,d=l>1&&l<=this._buffer.getLineLength(a)?this._buffer.getLineCharCode(a,l-2):0,u=gs(c),h=gs(d);return!u&&!h?new te(r,o,a,l):r===a&&o===l?new te(r,o-1,a,l-1):u&&h?new te(r,o-1,a,l+1):u?new te(r,o-1,a,l):new te(r,o,a,l+1)}}modifyPosition(e,t){this._assertNotDisposed();const i=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,i)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new te(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,i,s){return this._buffer.findMatchesLineByLine(e,t,i,s)}findMatches(e,t,i,s,r,o,a=$Pe){this._assertNotDisposed();let l=null;t!==null&&(Array.isArray(t)||(t=[t]),t.every(u=>te.isIRange(u))&&(l=t.map(u=>this.validateRange(u)))),l===null&&(l=[this.getFullModelRange()]),l=l.sort((u,h)=>u.startLineNumber-h.startLineNumber||u.startColumn-h.startColumn);const c=[];c.push(l.reduce((u,h)=>te.areIntersecting(u,h)?u.plusRange(h):(c.push(u),h)));let d;if(!i&&e.indexOf(`
`)<0){const h=new Tf(e,i,s,r).parseSearchRequest();if(!h)return[];d=f=>this.findMatchesLineByLine(f,h,o,a)}else d=u=>Py.findMatches(this,new Tf(e,i,s,r),u,o,a);return c.map(d).reduce((u,h)=>u.concat(h),[])}findNextMatch(e,t,i,s,r,o){this._assertNotDisposed();const a=this.validatePosition(t);if(!i&&e.indexOf(`
`)<0){const c=new Tf(e,i,s,r).parseSearchRequest();if(!c)return null;const d=this.getLineCount();let u=new te(a.lineNumber,a.column,d,this.getLineMaxColumn(d)),h=this.findMatchesLineByLine(u,c,o,1);return Py.findNextMatch(this,new Tf(e,i,s,r),a,o),h.length>0||(u=new te(1,1,a.lineNumber,this.getLineMaxColumn(a.lineNumber)),h=this.findMatchesLineByLine(u,c,o,1),h.length>0)?h[0]:null}return Py.findNextMatch(this,new Tf(e,i,s,r),a,o)}findPreviousMatch(e,t,i,s,r,o){this._assertNotDisposed();const a=this.validatePosition(t);return Py.findPreviousMatch(this,new Tf(e,i,s,r),a,o)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if((this.getEOL()===`
`?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof sR?e:new sR(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const t=[];for(let i=0,s=e.length;i<s;i++)t[i]=this._validateEditOperation(e[i]);return t}pushEditOperations(e,t,i,s){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),i,s)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,i,s){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){const r=t.map(a=>({range:this.validateRange(a.range),text:a.text}));let o=!0;if(e)for(let a=0,l=e.length;a<l;a++){const c=e[a];let d=!1;for(let u=0,h=r.length;u<h;u++){const f=r[u].range,g=f.startLineNumber>c.endLineNumber,m=c.startLineNumber>f.endLineNumber;if(!g&&!m){d=!0;break}}if(!d){o=!1;break}}if(o)for(let a=0,l=this._trimAutoWhitespaceLines.length;a<l;a++){const c=this._trimAutoWhitespaceLines[a],d=this.getLineMaxColumn(c);let u=!0;for(let h=0,f=r.length;h<f;h++){const g=r[h].range,m=r[h].text;if(!(c<g.startLineNumber||c>g.endLineNumber)&&!(c===g.startLineNumber&&g.startColumn===d&&g.isEmpty()&&m&&m.length>0&&m.charAt(0)===`
`)&&!(c===g.startLineNumber&&g.startColumn===1&&g.isEmpty()&&m&&m.length>0&&m.charAt(m.length-1)===`
`)){u=!1;break}}if(u){const h=new te(c,1,c,d);t.push(new sR(null,h,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,i,s)}_applyUndo(e,t,i,s){const r=e.map(o=>{const a=this.getPositionAt(o.newPosition),l=this.getPositionAt(o.newEnd);return{range:new te(a.lineNumber,a.column,l.lineNumber,l.column),text:o.oldText}});this._applyUndoRedoEdits(r,t,!0,!1,i,s)}_applyRedo(e,t,i,s){const r=e.map(o=>{const a=this.getPositionAt(o.oldPosition),l=this.getPositionAt(o.oldEnd);return{range:new te(a.lineNumber,a.column,l.lineNumber,l.column),text:o.newText}});this._applyUndoRedoEdits(r,t,!1,!0,i,s)}_applyUndoRedoEdits(e,t,i,s,r,o){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=i,this._isRedoing=s,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(r)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(o),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const i=this._validateEditOperations(e);return this._doApplyEdits(i,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){const i=this._buffer.getLineCount(),s=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),r=this._buffer.getLineCount(),o=s.changes;if(this._trimAutoWhitespaceLines=s.trimAutoWhitespaceLineNumbers,o.length!==0){for(let c=0,d=o.length;c<d;c++){const u=o[c];this._decorationsTree.acceptReplace(u.rangeOffset,u.rangeLength,u.text.length,u.forceMoveMarkers)}const a=[];this._increaseVersionId();let l=i;for(let c=0,d=o.length;c<d;c++){const u=o[c],[h]=Oh(u.text);this._onDidChangeDecorations.fire();const f=u.range.startLineNumber,g=u.range.endLineNumber,m=g-f,p=h,b=Math.min(m,p),w=p-m,v=r-l-w+f,_=v,y=v+p,C=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new pe(_,1)),this.getOffsetAt(new pe(y,this.getLineMaxColumn(y))),0),S=Fl.fromDecorations(C),k=new qd(S);for(let I=b;I>=0;I--){const T=f+I,D=v+I;k.takeFromEndWhile(E=>E.lineNumber>D);const M=k.takeFromEndWhile(E=>E.lineNumber===D);a.push(new VU(T,this.getLineContent(D),M))}if(b<m){const I=f+b;a.push(new CVe(I+1,g))}if(b<p){const I=new qd(S),T=f+b,D=p-b,M=r-l-D+T+1,E=[],W=[];for(let P=0;P<D;P++){const N=M+P;W[P]=this.getLineContent(N),I.takeWhile(H=>H.lineNumber<N),E[P]=I.takeWhile(H=>H.lineNumber===N)}a.push(new LVe(T+1,f+p,W,E))}l+=w}this._emitContentChangedEvent(new Wp(a,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:o,eol:this._buffer.getEOL(),isEolChange:!1,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return s.reverseEdits===null?void 0:s.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(e===null||e.size===0)return;const i=Array.from(e).map(s=>new VU(s,this.getLineContent(s),this._getInjectedTextInLine(s)));this._onDidChangeInjectedText.fire(new nse(i))}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){const i={addDecoration:(r,o)=>this._deltaDecorationsImpl(e,[],[{range:r,options:o}])[0],changeDecoration:(r,o)=>{this._changeDecorationImpl(r,o)},changeDecorationOptions:(r,o)=>{this._changeDecorationOptionsImpl(r,oY(o))},removeDecoration:r=>{this._deltaDecorationsImpl(e,[r],[])},deltaDecorations:(r,o)=>r.length===0&&o.length===0?[]:this._deltaDecorationsImpl(e,r,o)};let s=null;try{s=t(i)}catch(r){gi(r)}return i.addDecoration=ev,i.changeDecoration=ev,i.changeDecorationOptions=ev,i.removeDecoration=ev,i.deltaDecorations=ev,s}deltaDecorations(e,t,i=0){if(this._assertNotDisposed(),e||(e=[]),e.length===0&&t.length===0)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),gi(new Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(i,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,i){const s=e?this._decorations[e]:null;if(!s)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:rY[i]}],!0)[0]:null;if(!t)return this._decorationsTree.delete(s),delete this._decorations[s.id],null;const r=this._validateRangeRelaxedNoAllocations(t),o=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),a=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);return this._decorationsTree.delete(s),s.reset(this.getVersionId(),o,a,r),s.setOptions(rY[i]),this._decorationsTree.insert(s),s.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const t=this._decorationsTree.collectNodesFromOwner(e);for(let i=0,s=t.length;i<s;i++){const r=t[i];this._decorationsTree.delete(r),delete this._decorations[r.id]}}getDecorationOptions(e){const t=this._decorations[e];return t?t.options:null}getDecorationRange(e){const t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e,t=0,i=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,i)}getLinesDecorations(e,t,i=0,s=!1,r=!1){const o=this.getLineCount(),a=Math.min(o,Math.max(1,e)),l=Math.min(o,Math.max(1,t)),c=this.getLineMaxColumn(l),d=new te(a,1,l,c),u=this._getDecorationsInRange(d,i,s,r);return v3(u,this._decorationProvider.getDecorationsInRange(d,i,s)),u}getDecorationsInRange(e,t=0,i=!1,s=!1,r=!1){const o=this.validateRange(e),a=this._getDecorationsInRange(o,t,i,r);return v3(a,this._decorationProvider.getDecorationsInRange(o,t,i,s)),a}getOverviewRulerDecorations(e=0,t=!1){return this._decorationsTree.getAll(this,e,t,!0,!1)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}_getInjectedTextInLine(e){const t=this._buffer.getOffsetAt(e,1),i=t+this._buffer.getLineLength(e),s=this._decorationsTree.getInjectedTextInInterval(this,t,i,0);return Fl.fromDecorations(s).filter(r=>r.lineNumber===e)}getAllDecorations(e=0,t=!1){let i=this._decorationsTree.getAll(this,e,t,!1,!1);return i=i.concat(this._decorationProvider.getAllDecorations(e,t)),i}getAllMarginDecorations(e=0){return this._decorationsTree.getAll(this,e,!1,!1,!0)}_getDecorationsInRange(e,t,i,s){const r=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),o=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,r,o,t,i,s)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){const i=this._decorations[e];if(!i)return;if(i.options.after){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.endLineNumber)}if(i.options.before){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.startLineNumber)}const s=this._validateRangeRelaxedNoAllocations(t),r=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),o=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);this._decorationsTree.delete(i),i.reset(this.getVersionId(),r,o,s),this._decorationsTree.insert(i),this._onDidChangeDecorations.checkAffectedAndFire(i.options),i.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(s.endLineNumber),i.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(s.startLineNumber)}_changeDecorationOptionsImpl(e,t){const i=this._decorations[e];if(!i)return;const s=!!(i.options.overviewRuler&&i.options.overviewRuler.color),r=!!(t.overviewRuler&&t.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(i.options),this._onDidChangeDecorations.checkAffectedAndFire(t),i.options.after||t.after){const l=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.endLineNumber)}if(i.options.before||t.before){const l=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.startLineNumber)}const o=s!==r,a=tOe(t)!==jS(i);o||a?(this._decorationsTree.delete(i),i.setOptions(t),this._decorationsTree.insert(i)):i.setOptions(t)}_deltaDecorationsImpl(e,t,i,s=!1){const r=this.getVersionId(),o=t.length;let a=0;const l=i.length;let c=0;this._onDidChangeDecorations.beginDeferredEmit();try{const d=new Array(l);for(;a<o||c<l;){let u=null;if(a<o){do u=this._decorations[t[a++]];while(!u&&a<o);if(u){if(u.options.after){const h=this._decorationsTree.getNodeRange(this,u);this._onDidChangeDecorations.recordLineAffectedByInjectedText(h.endLineNumber)}if(u.options.before){const h=this._decorationsTree.getNodeRange(this,u);this._onDidChangeDecorations.recordLineAffectedByInjectedText(h.startLineNumber)}this._decorationsTree.delete(u),s||this._onDidChangeDecorations.checkAffectedAndFire(u.options)}}if(c<l){if(!u){const b=++this._lastDecorationId,w=`${this._instanceId};${b}`;u=new gse(w,0,0),this._decorations[w]=u}const h=i[c],f=this._validateRangeRelaxedNoAllocations(h.range),g=oY(h.options),m=this._buffer.getOffsetAt(f.startLineNumber,f.startColumn),p=this._buffer.getOffsetAt(f.endLineNumber,f.endColumn);u.ownerId=e,u.reset(r,m,p,f),u.setOptions(g),u.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(f.endLineNumber),u.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(f.startLineNumber),s||this._onDidChangeDecorations.checkAffectedAndFire(g),this._decorationsTree.insert(u),d[c]=u.id,c++}else u&&delete this._decorations[u.id]}return d}finally{this._onDidChangeDecorations.endDeferredEmit()}}getLanguageId(){return this.tokenization.getLanguageId()}setLanguage(e,t){typeof e=="string"?(this._languageSelectionListener.clear(),this._setLanguage(e,t)):(this._languageSelectionListener.value=e.onDidChange(()=>this._setLanguage(e.languageId,t)),this._setLanguage(e.languageId,t))}_setLanguage(e,t){this.tokenization.setLanguageId(e,t),this._languageService.requestRichLanguageFeatures(e)}getLanguageIdAtPosition(e,t){return this.tokenization.getLanguageIdAtPosition(e,t)}getWordAtPosition(e){return this._tokenizationTextModelPart.getWordAtPosition(e)}getWordUntilPosition(e){return this._tokenizationTextModelPart.getWordUntilPosition(e)}normalizePosition(e,t){return e}getLineIndentColumn(e){return eOe(this.getLineContent(e))+1}};Gh._MODEL_SYNC_LIMIT=50*1024*1024;Gh.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024;Gh.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3;Gh.LARGE_FILE_HEAP_OPERATION_THRESHOLD=256*1024*1024;Gh.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:Ks.tabSize,indentSize:Ks.indentSize,insertSpaces:Ks.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:Ks.trimAutoWhitespace,largeFileOptimizations:Ks.largeFileOptimizations,bracketPairColorizationOptions:Ks.bracketPairColorizationOptions};Gh=Df=KPe([mR(4,EP),mR(5,Cs),mR(6,ma)],Gh);function eOe(n){let e=0;for(const t of n)if(t===" "||t==="	")e++;else break;return e}function pR(n){return!!(n.options.overviewRuler&&n.options.overviewRuler.color)}function tOe(n){return!!n.after||!!n.before}function jS(n){return!!n.options.after||!!n.options.before}class sY{constructor(){this._decorationsTree0=new hR,this._decorationsTree1=new hR,this._injectedTextDecorationsTree=new hR}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1,!1)}_ensureNodesHaveRanges(e,t){for(const i of t)i.range===null&&(i.range=e.getRangeAt(i.cachedAbsoluteStart,i.cachedAbsoluteEnd));return t}getAllInInterval(e,t,i,s,r,o){const a=e.getVersionId(),l=this._intervalSearch(t,i,s,r,a,o);return this._ensureNodesHaveRanges(e,l)}_intervalSearch(e,t,i,s,r,o){const a=this._decorationsTree0.intervalSearch(e,t,i,s,r,o),l=this._decorationsTree1.intervalSearch(e,t,i,s,r,o),c=this._injectedTextDecorationsTree.intervalSearch(e,t,i,s,r,o);return a.concat(l).concat(c)}getInjectedTextInInterval(e,t,i,s){const r=e.getVersionId(),o=this._injectedTextDecorationsTree.intervalSearch(t,i,s,!1,r,!1);return this._ensureNodesHaveRanges(e,o).filter(a=>a.options.showIfCollapsed||!a.range.isEmpty())}getAllInjectedText(e,t){const i=e.getVersionId(),s=this._injectedTextDecorationsTree.search(t,!1,i,!1);return this._ensureNodesHaveRanges(e,s).filter(r=>r.options.showIfCollapsed||!r.range.isEmpty())}getAll(e,t,i,s,r){const o=e.getVersionId(),a=this._search(t,i,s,o,r);return this._ensureNodesHaveRanges(e,a)}_search(e,t,i,s,r){if(i)return this._decorationsTree1.search(e,t,s,r);{const o=this._decorationsTree0.search(e,t,s,r),a=this._decorationsTree1.search(e,t,s,r),l=this._injectedTextDecorationsTree.search(e,t,s,r);return o.concat(a).concat(l)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),i=this._decorationsTree1.collectNodesFromOwner(e),s=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(i).concat(s)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),i=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(i)}insert(e){jS(e)?this._injectedTextDecorationsTree.insert(e):pR(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){jS(e)?this._injectedTextDecorationsTree.delete(e):pR(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){const i=e.getVersionId();return t.cachedVersionId!==i&&this._resolveNode(t,i),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){jS(e)?this._injectedTextDecorationsTree.resolveNode(e,t):pR(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,i,s){this._decorationsTree0.acceptReplace(e,t,i,s),this._decorationsTree1.acceptReplace(e,t,i,s),this._injectedTextDecorationsTree.acceptReplace(e,t,i,s)}}function jl(n){return n.replace(/[^a-z0-9\-_]/gi," ")}class yse{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}class iOe extends yse{constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:fa.Center}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;const i=e?t.getColor(e.id):null;return i?i.toString():""}}class nOe{constructor(e){var t;this.position=(t=e?.position)!==null&&t!==void 0?t:Ph.Center,this.persistLane=e?.persistLane}}class sOe extends yse{constructor(e){var t,i;super(e),this.position=e.position,this.sectionHeaderStyle=(t=e.sectionHeaderStyle)!==null&&t!==void 0?t:null,this.sectionHeaderText=(i=e.sectionHeaderText)!==null&&i!==void 0?i:null}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?Ce.fromHex(e):t.getColor(e.id)}}class o1{static from(e){return e instanceof o1?e:new o1(e)}constructor(e){this.content=e.content||"",this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=e.attachedData||null,this.cursorStops=e.cursorStops||null}}class Qt{static register(e){return new Qt(e)}static createDynamic(e){return new Qt(e)}constructor(e){var t,i,s,r,o,a;this.description=e.description,this.blockClassName=e.blockClassName?jl(e.blockClassName):null,this.blockDoesNotCollapse=(t=e.blockDoesNotCollapse)!==null&&t!==void 0?t:null,this.blockIsAfterEnd=(i=e.blockIsAfterEnd)!==null&&i!==void 0?i:null,this.blockPadding=(s=e.blockPadding)!==null&&s!==void 0?s:null,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?jl(e.className):null,this.shouldFillLineOnLineBreak=(r=e.shouldFillLineOnLineBreak)!==null&&r!==void 0?r:null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.lineNumberHoverMessage=e.lineNumberHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new iOe(e.overviewRuler):null,this.minimap=e.minimap?new sOe(e.minimap):null,this.glyphMargin=e.glyphMarginClassName?new nOe(e.glyphMargin):null,this.glyphMarginClassName=e.glyphMarginClassName?jl(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?jl(e.linesDecorationsClassName):null,this.lineNumberClassName=e.lineNumberClassName?jl(e.lineNumberClassName):null,this.linesDecorationsTooltip=e.linesDecorationsTooltip?ZNe(e.linesDecorationsTooltip):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?jl(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?jl(e.marginClassName):null,this.inlineClassName=e.inlineClassName?jl(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?jl(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?jl(e.afterContentClassName):null,this.after=e.after?o1.from(e.after):null,this.before=e.before?o1.from(e.before):null,this.hideInCommentTokens=(o=e.hideInCommentTokens)!==null&&o!==void 0?o:!1,this.hideInStringTokens=(a=e.hideInStringTokens)!==null&&a!==void 0?a:!1}}Qt.EMPTY=Qt.register({description:"empty"});const rY=[Qt.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),Qt.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),Qt.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),Qt.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function oY(n){return n instanceof Qt?n:Qt.createDynamic(n)}class rOe extends Le{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new ue),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._affectsLineNumber=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var e;this._deferredCnt--,this._deferredCnt===0&&(this._shouldFireDeferred&&this.doFire(),(e=this._affectedInjectedTextLines)===null||e===void 0||e.clear(),this._affectedInjectedTextLines=null)}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){var t,i;this._affectsMinimap||(this._affectsMinimap=!!(!((t=e.minimap)===null||t===void 0)&&t.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!!(!((i=e.overviewRuler)===null||i===void 0)&&i.color)),this._affectsGlyphMargin||(this._affectsGlyphMargin=!!e.glyphMarginClassName),this._affectsLineNumber||(this._affectsLineNumber=!!e.lineNumberClassName),this.tryFire()}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._affectsGlyphMargin=!0,this.tryFire()}tryFire(){this._deferredCnt===0?this.doFire():this._shouldFireDeferred=!0}doFire(){this.handleBeforeFire(this._affectedInjectedTextLines);const e={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler,affectsGlyphMargin:this._affectsGlyphMargin,affectsLineNumber:this._affectsLineNumber};this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._actual.fire(e)}}class oOe extends Le{constructor(){super(),this._fastEmitter=this._register(new ue),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new ue),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}}class aOe{constructor(){this._onDidChangeVisibleRanges=new ue,this.onDidChangeVisibleRanges=this._onDidChangeVisibleRanges.event,this._views=new Set}attachView(){const e=new lOe(t=>{this._onDidChangeVisibleRanges.fire({view:e,state:t})});return this._views.add(e),e}detachView(e){this._views.delete(e),this._onDidChangeVisibleRanges.fire({view:e,state:void 0})}}class lOe{constructor(e){this.handleStateChange=e}setVisibleLines(e,t){const i=e.map(s=>new Lt(s.startLineNumber,s.endLineNumber+1));this.handleStateChange({visibleLineRanges:i,stabilized:t})}}const ei=ri("ILanguageFeaturesService");class NP{static create(e){return new NP(e.get(134),e.get(133))}constructor(e,t){this.classifier=new cOe(e,t)}createLineBreaksComputer(e,t,i,s,r){const o=[],a=[],l=[];return{addRequest:(c,d,u)=>{o.push(c),a.push(d),l.push(u)},finalize:()=>{const c=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth,d=[];for(let u=0,h=o.length;u<h;u++){const f=a[u],g=l[u];g&&!g.injectionOptions&&!f?d[u]=dOe(this.classifier,g,o[u],t,i,c,s,r):d[u]=uOe(this.classifier,o[u],f,t,i,c,s,r)}return $3.length=0,Q3.length=0,d}}}}class cOe extends pw{constructor(e,t){super(0);for(let i=0;i<e.length;i++)this.set(e.charCodeAt(i),1);for(let i=0;i<t.length;i++)this.set(t.charCodeAt(i),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}let $3=[],Q3=[];function dOe(n,e,t,i,s,r,o,a){if(s===-1)return null;const l=t.length;if(l<=1)return null;const c=a==="keepAll",d=e.breakOffsets,u=e.breakOffsetsVisibleColumn,h=Sse(t,i,s,r,o),f=s-h,g=$3,m=Q3;let p=0,b=0,w=0,v=s;const _=d.length;let y=0;if(y>=0){let C=Math.abs(u[y]-v);for(;y+1<_;){const S=Math.abs(u[y+1]-v);if(S>=C)break;C=S,y++}}for(;y<_;){let C=y<0?0:d[y],S=y<0?0:u[y];b>C&&(C=b,S=w);let k=0,I=0,T=0,D=0;if(S<=v){let E=S,W=C===0?0:t.charCodeAt(C-1),P=C===0?0:n.get(W),N=!0;for(let H=C;H<l;H++){const U=H,B=t.charCodeAt(H);let Y,ne;if(gs(B)?(H++,Y=0,ne=2):(Y=n.get(B),ne=d_(B,E,i,r)),U>b&&q3(W,P,B,Y,c)&&(k=U,I=E),E+=ne,E>v){U>b?(T=U,D=E-ne):(T=H+1,D=E),E-I>f&&(k=0),N=!1;break}W=B,P=Y}if(N){p>0&&(g[p]=d[d.length-1],m[p]=u[d.length-1],p++);break}}if(k===0){let E=S,W=t.charCodeAt(C),P=n.get(W),N=!1;for(let H=C-1;H>=b;H--){const U=H+1,B=t.charCodeAt(H);if(B===9){N=!0;break}let Y,ne;if(xb(B)?(H--,Y=0,ne=2):(Y=n.get(B),ne=Wh(B)?r:1),E<=v){if(T===0&&(T=U,D=E),E<=v-f)break;if(q3(B,Y,W,P,c)){k=U,I=E;break}}E-=ne,W=B,P=Y}if(k!==0){const H=f-(D-I);if(H<=i){const U=t.charCodeAt(T);let B;gs(U)?B=2:B=d_(U,D,i,r),H-B<0&&(k=0)}}if(N){y--;continue}}if(k===0&&(k=T,I=D),k<=b){const E=t.charCodeAt(b);gs(E)?(k=b+2,I=w+2):(k=b+1,I=w+d_(E,w,i,r))}for(b=k,g[p]=k,w=I,m[p]=I,p++,v=I+f;y<0||y<_&&u[y]<I;)y++;let M=Math.abs(u[y]-v);for(;y+1<_;){const E=Math.abs(u[y+1]-v);if(E>=M)break;M=E,y++}}return p===0?null:(g.length=p,m.length=p,$3=e.breakOffsets,Q3=e.breakOffsetsVisibleColumn,e.breakOffsets=g,e.breakOffsetsVisibleColumn=m,e.wrappedTextIndentLength=h,e)}function uOe(n,e,t,i,s,r,o,a){const l=Fl.applyInjectedText(e,t);let c,d;if(t&&t.length>0?(c=t.map(I=>I.options),d=t.map(I=>I.column-1)):(c=null,d=null),s===-1)return c?new r_(d,c,[l.length],[],0):null;const u=l.length;if(u<=1)return c?new r_(d,c,[l.length],[],0):null;const h=a==="keepAll",f=Sse(l,i,s,r,o),g=s-f,m=[],p=[];let b=0,w=0,v=0,_=s,y=l.charCodeAt(0),C=n.get(y),S=d_(y,0,i,r),k=1;gs(y)&&(S+=1,y=l.charCodeAt(1),C=n.get(y),k++);for(let I=k;I<u;I++){const T=I,D=l.charCodeAt(I);let M,E;gs(D)?(I++,M=0,E=2):(M=n.get(D),E=d_(D,S,i,r)),q3(y,C,D,M,h)&&(w=T,v=S),S+=E,S>_&&((w===0||S-v>g)&&(w=T,v=S-E),m[b]=w,p[b]=v,b++,_=v+g,w=0),y=D,C=M}return b===0&&(!t||t.length===0)?null:(m[b]=u,p[b]=S,new r_(d,c,m,p,f))}function d_(n,e,t,i){return n===9?t-e%t:Wh(n)||n<32?i:1}function aY(n,e){return e-n%e}function q3(n,e,t,i,s){return t!==32&&(e===2&&i!==2||e!==1&&i===1||!s&&e===3&&i!==2||!s&&i===3&&e!==1)}function Sse(n,e,t,i,s){let r=0;if(s!==0){const o=fo(n);if(o!==-1){for(let l=0;l<o;l++){const c=n.charCodeAt(l)===9?aY(r,e):1;r+=c}const a=s===3?2:s===2?1:0;for(let l=0;l<a;l++){const c=aY(r,e);r+=c}r+i>t&&(r=0)}}return r}class IL{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new Ds(new te(1,1,1,1),0,0,new pe(1,1),0),new Ds(new te(1,1,1,1),0,0,new pe(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new Jt(this.modelState,this.viewState)}readSelectionFromMarkers(e){const t=e.model._getTrackedRange(this._selTrackedRange);return this.modelState.selection.isEmpty()&&!t.isEmpty()?Ii.fromRange(t.collapseToEnd(),this.modelState.selection.getDirection()):Ii.fromRange(t,this.modelState.selection.getDirection())}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,i){this._setState(e,t,i)}static _validatePositionWithCache(e,t,i,s){return t.equals(i)?s:e.normalizePosition(t,2)}static _validateViewState(e,t){const i=t.position,s=t.selectionStart.getStartPosition(),r=t.selectionStart.getEndPosition(),o=e.normalizePosition(i,2),a=this._validatePositionWithCache(e,s,i,o),l=this._validatePositionWithCache(e,r,s,a);return i.equals(o)&&s.equals(a)&&r.equals(l)?t:new Ds(te.fromPositions(a,l),t.selectionStartKind,t.selectionStartLeftoverVisibleColumns+s.column-a.column,o,t.leftoverVisibleColumns+i.column-o.column)}_setState(e,t,i){if(i&&(i=IL._validateViewState(e.viewModel,i)),t){const s=e.model.validateRange(t.selectionStart),r=t.selectionStart.equalsRange(s)?t.selectionStartLeftoverVisibleColumns:0,o=e.model.validatePosition(t.position),a=t.position.equals(o)?t.leftoverVisibleColumns:0;t=new Ds(s,t.selectionStartKind,r,o,a)}else{if(!i)return;const s=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(i.selectionStart)),r=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(i.position));t=new Ds(s,i.selectionStartKind,i.selectionStartLeftoverVisibleColumns,r,i.leftoverVisibleColumns)}if(i){const s=e.coordinatesConverter.validateViewRange(i.selectionStart,t.selectionStart),r=e.coordinatesConverter.validateViewPosition(i.position,t.position);i=new Ds(s,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,r,t.leftoverVisibleColumns)}else{const s=e.coordinatesConverter.convertModelPositionToViewPosition(new pe(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),r=e.coordinatesConverter.convertModelPositionToViewPosition(new pe(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),o=new te(s.lineNumber,s.column,r.lineNumber,r.column),a=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);i=new Ds(o,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,a,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=i,this._updateTrackedRange(e)}}class lY{constructor(e){this.context=e,this.cursors=[new IL(e)],this.lastAddedCursorIndex=0}dispose(){for(const e of this.cursors)e.dispose(this.context)}startTrackingSelections(){for(const e of this.cursors)e.startTrackingSelection(this.context)}stopTrackingSelections(){for(const e of this.cursors)e.stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){for(const e of this.cursors)e.ensureValidState(this.context)}readSelectionFromMarkers(){return this.cursors.map(e=>e.readSelectionFromMarkers(this.context))}getAll(){return this.cursors.map(e=>e.asCursorState())}getViewPositions(){return this.cursors.map(e=>e.viewState.position)}getTopMostViewPosition(){return Z4e(this.cursors,Fa(e=>e.viewState.position,pe.compare)).viewState.position}getBottomMostViewPosition(){return O4e(this.cursors,Fa(e=>e.viewState.position,pe.compare)).viewState.position}getSelections(){return this.cursors.map(e=>e.modelState.selection)}getViewSelections(){return this.cursors.map(e=>e.viewState.selection)}setSelections(e){this.setStates(Jt.fromModelSelections(e))}getPrimaryCursor(){return this.cursors[0].asCursorState()}setStates(e){e!==null&&(this.cursors[0].setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){const t=this.cursors.length-1,i=e.length;if(t<i){const s=i-t;for(let r=0;r<s;r++)this._addSecondaryCursor()}else if(t>i){const s=t-i;for(let r=0;r<s;r++)this._removeSecondaryCursor(this.cursors.length-2)}for(let s=0;s<i;s++)this.cursors[s+1].setState(this.context,e[s].modelState,e[s].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.cursors.push(new IL(this.context)),this.lastAddedCursorIndex=this.cursors.length-1}getLastAddedCursorIndex(){return this.cursors.length===1||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.cursors[e+1].dispose(this.context),this.cursors.splice(e+1,1)}normalize(){if(this.cursors.length===1)return;const e=this.cursors.slice(0),t=[];for(let i=0,s=e.length;i<s;i++)t.push({index:i,selection:e[i].modelState.selection});t.sort(Fa(i=>i.selection,te.compareRangesUsingStarts));for(let i=0;i<t.length-1;i++){const s=t[i],r=t[i+1],o=s.selection,a=r.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let l;if(a.isEmpty()||o.isEmpty()?l=a.getStartPosition().isBeforeOrEqual(o.getEndPosition()):l=a.getStartPosition().isBefore(o.getEndPosition()),l){const c=s.index<r.index?i:i+1,d=s.index<r.index?i+1:i,u=t[d].index,h=t[c].index,f=t[d].selection,g=t[c].selection;if(!f.equalsSelection(g)){const m=f.plusRange(g),p=f.selectionStartLineNumber===f.startLineNumber&&f.selectionStartColumn===f.startColumn,b=g.selectionStartLineNumber===g.startLineNumber&&g.selectionStartColumn===g.startColumn;let w;u===this.lastAddedCursorIndex?(w=p,this.lastAddedCursorIndex=h):w=b;let v;w?v=new Ii(m.startLineNumber,m.startColumn,m.endLineNumber,m.endColumn):v=new Ii(m.endLineNumber,m.endColumn,m.startLineNumber,m.startColumn),t[c].selection=v;const _=Jt.fromModelSelection(v);e[h].setState(this.context,_.modelState,_.viewState)}for(const m of t)m.index>u&&m.index--;e.splice(u,1),t.splice(d,1),this._removeSecondaryCursor(u-1),i--}}}}class cY{constructor(e,t,i,s){this._cursorContextBrand=void 0,this.model=e,this.viewModel=t,this.coordinatesConverter=i,this.cursorConfig=s}}class hOe{constructor(){this.type=0}}class fOe{constructor(){this.type=1}}class gOe{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}}class mOe{constructor(e,t,i){this.selections=e,this.modelSelections=t,this.reason=i,this.type=3}}class bf{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler,this.affectsGlyphMargin=e.affectsGlyphMargin,this.affectsLineNumber=e.affectsLineNumber):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0,this.affectsGlyphMargin=!0,this.affectsLineNumber=!0)}}class Zy{constructor(){this.type=5}}class pOe{constructor(e){this.type=6,this.isFocused=e}}class bOe{constructor(){this.type=7}}class Gy{constructor(){this.type=8}}class Cse{constructor(e,t){this.fromLineNumber=e,this.count=t,this.type=9}}class eW{constructor(e,t){this.type=10,this.fromLineNumber=e,this.toLineNumber=t}}class tW{constructor(e,t){this.type=11,this.fromLineNumber=e,this.toLineNumber=t}}class u_{constructor(e,t,i,s,r,o,a){this.source=e,this.minimalReveal=t,this.range=i,this.selections=s,this.verticalType=r,this.revealHorizontal=o,this.scrollType=a,this.type=12}}class vOe{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}}class _Oe{constructor(e){this.theme=e,this.type=14}}class wOe{constructor(e){this.type=15,this.ranges=e}}class yOe{constructor(){this.type=16}}let SOe=class{constructor(){this.type=17}};class COe extends Le{constructor(){super(),this._onEvent=this._register(new ue),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let t=0,i=this._outgoingEvents.length;t<i;t++){const s=this._outgoingEvents[t].kind===e.kind?this._outgoingEvents[t].attemptToMerge(e):null;if(s){this._outgoingEvents[t]=s;return}}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,i=this._eventHandlers.length;t<i;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new LOe),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){const e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(const i of e)this._addOutgoingEvent(i);t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const e=this._viewEventQueue;this._viewEventQueue=null;const t=this._eventHandlers.slice(0);for(const i of t)i.handleEvents(e)}}}class LOe{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}}class RP{constructor(e,t,i,s){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=i,this.contentHeight=s,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}attemptToMerge(e){return e.kind!==this.kind?null:new RP(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}}class WP{constructor(e,t){this.kind=1,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}attemptToMerge(e){return e.kind!==this.kind?null:new WP(this.oldHasFocus,e.hasFocus)}}class AP{constructor(e,t,i,s,r,o,a,l){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=i,this._oldScrollTop=s,this.scrollWidth=r,this.scrollLeft=o,this.scrollHeight=a,this.scrollTop=l,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}attemptToMerge(e){return e.kind!==this.kind?null:new AP(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}}class kOe{constructor(){this.kind=3}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class xOe{constructor(){this.kind=4}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class ML{constructor(e,t,i,s,r,o,a){this.kind=6,this.oldSelections=e,this.selections=t,this.oldModelVersionId=i,this.modelVersionId=s,this.source=r,this.reason=o,this.reachedMaxCursorCount=a}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const i=e.length,s=t.length;if(i!==s)return!1;for(let r=0;r<i;r++)if(!e[r].equalsSelection(t[r]))return!1;return!0}isNoOp(){return ML._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}attemptToMerge(e){return e.kind!==this.kind?null:new ML(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}}class TOe{constructor(){this.kind=5}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class DOe{constructor(e){this.event=e,this.kind=7}isNoOp(){return!1}attemptToMerge(e){return null}}class IOe{constructor(e){this.event=e,this.kind=8}isNoOp(){return!1}attemptToMerge(e){return null}}class MOe{constructor(e){this.event=e,this.kind=9}isNoOp(){return!1}attemptToMerge(e){return null}}class EOe{constructor(e){this.event=e,this.kind=10}isNoOp(){return!1}attemptToMerge(e){return null}}class NOe{constructor(e){this.event=e,this.kind=11}isNoOp(){return!1}attemptToMerge(e){return null}}class ROe{constructor(e){this.event=e,this.kind=12}isNoOp(){return!1}attemptToMerge(e){return null}}class WOe extends Le{constructor(e,t,i,s){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=i,this.context=new cY(this._model,this._viewModel,this._coordinatesConverter,s),this._cursors=new lY(this.context),this._hasFocus=!1,this._isHandling=!1,this._compositionState=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=Ns(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new cY(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){const e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){const i=this._autoClosedActions[t];i.isValid(e)||(i.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,i,s){let r=!1;const o=this.context.cursorConfig.multiCursorLimit;s!==null&&s.length>o&&(s=s.slice(0,o),r=!0);const a=h_.from(this._model,this);return this._cursors.setStates(s),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,i,a,r)}setCursorColumnSelectData(e){this._columnSelectData=e}revealAll(e,t,i,s,r,o){const a=this._cursors.getViewPositions();let l=null,c=null;a.length>1?c=this._cursors.getViewSelections():l=te.fromPositions(a[0],a[0]),e.emitViewEvent(new u_(t,i,l,c,s,r,o))}revealPrimary(e,t,i,s,r,o){const l=[this._cursors.getPrimaryCursor().viewState.selection];e.emitViewEvent(new u_(t,i,null,l,s,r,o))}saveState(){const e=[],t=this._cursors.getSelections();for(let i=0,s=t.length;i<s;i++){const r=t[i];e.push({inSelectionMode:!r.isEmpty(),selectionStart:{lineNumber:r.selectionStartLineNumber,column:r.selectionStartColumn},position:{lineNumber:r.positionLineNumber,column:r.positionColumn}})}return e}restoreState(e,t){const i=[];for(let s=0,r=t.length;s<r;s++){const o=t[s];let a=1,l=1;o.position&&o.position.lineNumber&&(a=o.position.lineNumber),o.position&&o.position.column&&(l=o.position.column);let c=a,d=l;o.selectionStart&&o.selectionStart.lineNumber&&(c=o.selectionStart.lineNumber),o.selectionStart&&o.selectionStart.column&&(d=o.selectionStart.column),i.push({selectionStartLineNumber:c,selectionStartColumn:d,positionLineNumber:a,positionColumn:l})}this.setStates(e,"restoreState",0,Jt.fromModelSelections(i)),this.revealAll(e,"restoreState",!1,0,!0,1)}onModelContentChanged(e,t){if(t instanceof nse){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{const i=t.rawContentChangedEvent;if(this._knownModelVersionId=i.versionId,this._isHandling)return;const s=i.containsEvent(1);if(this._prevEditOperationType=0,s)this._cursors.dispose(),this._cursors=new lY(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&i.resultingSelection&&i.resultingSelection.length>0){const r=Jt.fromModelSelections(i.resultingSelection);this.setStates(e,"modelChange",i.isUndoing?5:i.isRedoing?6:2,r)&&this.revealAll(e,"modelChange",!1,0,!0,0)}else{const r=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,Jt.fromModelSelections(r))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),i=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,t),toViewLineNumber:i.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,i)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,i,s){this.setStates(e,t,s,Jt.fromModelSelections(i))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){const i=[],s=[];for(let a=0,l=e.length;a<l;a++)i.push({range:e[a],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),s.push({range:t[a],options:{description:"auto-closed-enclosing",stickiness:1}});const r=this._model.deltaDecorations([],i),o=this._model.deltaDecorations([],s);this._autoClosedActions.push(new dY(this._model,r,o))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();const t=AOe.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);const i=[],s=[];for(let r=0;r<e.commands.length;r++){const o=e.commands[r];o instanceof cne&&o.enclosingRange&&o.closeCharacterRange&&(i.push(o.closeCharacterRange),s.push(o.enclosingRange))}i.length>0&&this._pushAutoClosedAction(i,s),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){(!e||e.length===0)&&(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,i,s,r){const o=h_.from(this._model,this);if(o.equals(s))return!1;const a=this._cursors.getSelections(),l=this._cursors.getViewSelections();if(e.emitViewEvent(new mOe(l,a,i)),!s||s.cursorState.length!==o.cursorState.length||o.cursorState.some((c,d)=>!c.modelState.equals(s.cursorState[d].modelState))){const c=s?s.cursorState.map(u=>u.modelState.selection):null,d=s?s.modelVersionId:0;e.emitOutgoingEvent(new ML(c,a,d,o.modelVersionId,t||"keyboard",i,r))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;const t=[];for(let i=0,s=e.length;i<s;i++){const r=e[i];if(!r.text||r.text.indexOf(`
`)>=0)return null;const o=r.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!o)return null;const a=o[1],l=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(a);if(!l||l.length!==1)return null;const c=l[0].open,d=r.text.length-o[2].length-1,u=r.text.lastIndexOf(c,d-1);if(u===-1)return null;t.push([u,d])}return t}executeEdits(e,t,i,s){let r=null;t==="snippet"&&(r=this._findAutoClosingPairs(i)),r&&(i[0]._isTracked=!0);const o=[],a=[],l=this._model.pushEditOperations(this.getSelections(),i,c=>{if(r)for(let u=0,h=r.length;u<h;u++){const[f,g]=r[u],m=c[u],p=m.range.startLineNumber,b=m.range.startColumn-1+f,w=m.range.startColumn-1+g;o.push(new te(p,w+1,p,w+2)),a.push(new te(p,b+1,p,w+2))}const d=s(c);return d&&(this._isHandling=!0),d});l&&(this._isHandling=!1,this.setSelections(e,t,l,0)),o.length>0&&this._pushAutoClosedAction(o,a)}_executeEdit(e,t,i,s=0){if(this.context.cursorConfig.readOnly)return;const r=h_.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(o){gi(o)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,i,s,r,!1)&&this.revealAll(t,i,!1,0,!0,0)}getAutoClosedCharacters(){return dY.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._compositionState=new f_(this._model,this.getSelections())}endComposition(e,t){const i=this._compositionState?this._compositionState.deduceOutcome(this._model,this.getSelections()):null;this._compositionState=null,this._executeEdit(()=>{t==="keyboard"&&this._executeEditOperation(yn.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,i,this.getSelections(),this.getAutoClosedCharacters()))},e,t)}type(e,t,i){this._executeEdit(()=>{if(i==="keyboard"){const s=t.length;let r=0;for(;r<s;){const o=MV(t,r),a=t.substr(r,o);this._executeEditOperation(yn.typeWithInterceptors(!!this._compositionState,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),a)),r+=o}}else this._executeEditOperation(yn.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))},e,i)}compositionType(e,t,i,s,r,o){if(t.length===0&&i===0&&s===0){if(r!==0){const a=this.getSelections().map(l=>{const c=l.getPosition();return new Ii(c.lineNumber,c.column+r,c.lineNumber,c.column+r)});this.setSelections(e,o,a,0)}return}this._executeEdit(()=>{this._executeEditOperation(yn.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,i,s,r))},e,o)}paste(e,t,i,s,r){this._executeEdit(()=>{this._executeEditOperation(yn.paste(this.context.cursorConfig,this._model,this.getSelections(),t,i,s||[]))},e,r,4)}cut(e,t){this._executeEdit(()=>{this._executeEditOperation(Rg.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,t)}executeCommand(e,t,i){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new Fr(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,i)}executeCommands(e,t,i){this._executeEdit(()=>{this._executeEditOperation(new Fr(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,i)}}class h_{static from(e,t){return new h_(e.getVersionId(),t.getCursorStates())}constructor(e,t){this.modelVersionId=e,this.cursorState=t}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,i=this.cursorState.length;t<i;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}}class dY{static getAllAutoClosedCharacters(e){let t=[];for(const i of e)t=t.concat(i.getAutoClosedCharactersRanges());return t}constructor(e,t,i){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=i}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){const e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){const i=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);i&&e.push(i)}return e}isValid(e){const t=[];for(let i=0;i<this._autoClosedEnclosingDecorations.length;i++){const s=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[i]);if(s&&(t.push(s),s.startLineNumber!==s.endLineNumber))return!1}t.sort(te.compareRangesUsingStarts),e.sort(te.compareRangesUsingStarts);for(let i=0;i<e.length;i++)if(i>=t.length||!t[i].strictContainsRange(e[i]))return!1;return!0}}class AOe{static executeCommands(e,t,i){const s={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},r=this._innerExecuteCommands(s,i);for(let o=0,a=s.trackedRanges.length;o<a;o++)s.model._setTrackedRange(s.trackedRanges[o],null,0);return r}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;const i=this._getEditOperations(e,t);if(i.operations.length===0)return null;const s=i.operations,r=this._getLoserCursorMap(s);if(r.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;const o=[];for(let c=0,d=s.length;c<d;c++)r.hasOwnProperty(s[c].identifier.major.toString())||o.push(s[c]);i.hadTrackedEditOperation&&o.length>0&&(o[0]._isTracked=!0);let a=e.model.pushEditOperations(e.selectionsBefore,o,c=>{const d=[];for(let f=0;f<e.selectionsBefore.length;f++)d[f]=[];for(const f of c)f.identifier&&d[f.identifier.major].push(f);const u=(f,g)=>f.identifier.minor-g.identifier.minor,h=[];for(let f=0;f<e.selectionsBefore.length;f++)d[f].length>0?(d[f].sort(u),h[f]=t[f].computeCursorState(e.model,{getInverseEditOperations:()=>d[f],getTrackedSelection:g=>{const m=parseInt(g,10),p=e.model._getTrackedRange(e.trackedRanges[m]);return e.trackedRangesDirection[m]===0?new Ii(p.startLineNumber,p.startColumn,p.endLineNumber,p.endColumn):new Ii(p.endLineNumber,p.endColumn,p.startLineNumber,p.startColumn)}})):h[f]=e.selectionsBefore[f];return h});a||(a=e.selectionsBefore);const l=[];for(const c in r)r.hasOwnProperty(c)&&l.push(parseInt(c,10));l.sort((c,d)=>d-c);for(const c of l)a.splice(c,1);return a}static _arrayIsEmpty(e){for(let t=0,i=e.length;t<i;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let i=[],s=!1;for(let r=0,o=t.length;r<o;r++){const a=t[r];if(a){const l=this._getEditOperationsFromCommand(e,r,a);i=i.concat(l.operations),s=s||l.hadTrackedEditOperation}}return{operations:i,hadTrackedEditOperation:s}}static _getEditOperationsFromCommand(e,t,i){const s=[];let r=0;const o=(u,h,f=!1)=>{te.isEmpty(u)&&h===""||s.push({identifier:{major:t,minor:r++},range:u,text:h,forceMoveMarkers:f,isAutoWhitespaceEdit:i.insertsAutoWhitespace})};let a=!1;const d={addEditOperation:o,addTrackedEditOperation:(u,h,f)=>{a=!0,o(u,h,f)},trackSelection:(u,h)=>{const f=Ii.liftSelection(u);let g;if(f.isEmpty())if(typeof h=="boolean")h?g=2:g=3;else{const b=e.model.getLineMaxColumn(f.startLineNumber);f.startColumn===b?g=2:g=3}else g=1;const m=e.trackedRanges.length,p=e.model._setTrackedRange(null,f,g);return e.trackedRanges[m]=p,e.trackedRangesDirection[m]=f.getDirection(),m.toString()}};try{i.getEditOperations(e.model,d)}catch(u){return gi(u),{operations:[],hadTrackedEditOperation:!1}}return{operations:s,hadTrackedEditOperation:a}}static _getLoserCursorMap(e){e=e.slice(0),e.sort((i,s)=>-te.compareRangesUsingEnds(i.range,s.range));const t={};for(let i=1;i<e.length;i++){const s=e[i-1],r=e[i];if(te.getStartPosition(s.range).isBefore(te.getEndPosition(r.range))){let o;s.identifier.major>r.identifier.major?o=s.identifier.major:o=r.identifier.major,t[o.toString()]=!0;for(let a=0;a<e.length;a++)e[a].identifier.major===o&&(e.splice(a,1),a<i&&i--,a--);i>0&&i--}}return t}}class FOe{constructor(e,t,i){this.text=e,this.startSelection=t,this.endSelection=i}}class f_{static _capture(e,t){const i=[];for(const s of t){if(s.startLineNumber!==s.endLineNumber)return null;i.push(new FOe(e.getLineContent(s.startLineNumber),s.startColumn-1,s.endColumn-1))}return i}constructor(e,t){this._original=f_._capture(e,t)}deduceOutcome(e,t){if(!this._original)return null;const i=f_._capture(e,t);if(!i||this._original.length!==i.length)return null;const s=[];for(let r=0,o=this._original.length;r<o;r++)s.push(f_._deduceOutcome(this._original[r],i[r]));return s}static _deduceOutcome(e,t){const i=Math.min(e.startSelection,t.startSelection,s3(e.text,t.text)),s=Math.min(e.text.length-e.endSelection,t.text.length-t.endSelection,r3(e.text,t.text)),r=e.text.substring(i,e.text.length-s),o=t.text.substring(i,t.text.length-s);return new O9e(r,e.startSelection-i,e.endSelection-i,o,t.startSelection-i,t.endSelection-i)}}const uY={getInitialState:()=>s1,tokenizeEncoded:(n,e,t)=>IP(0,t)};async function VOe(n,e,t){if(!t)return hY(e,n.languageIdCodec,uY);const i=await Zn.getOrCreate(t);return hY(e,n.languageIdCodec,i||uY)}function POe(n,e,t,i,s,r,o){let a="<div>",l=i,c=0,d=!0;for(let u=0,h=e.getCount();u<h;u++){const f=e.getEndOffset(u);if(f<=i)continue;let g="";for(;l<f&&l<s;l++){const m=n.charCodeAt(l);switch(m){case 9:{let p=r-(l+c)%r;for(c+=p-1;p>0;)o&&d?(g+="&#160;",d=!1):(g+=" ",d=!0),p--;break}case 60:g+="&lt;",d=!1;break;case 62:g+="&gt;",d=!1;break;case 38:g+="&amp;",d=!1;break;case 0:g+="&#00;",d=!1;break;case 65279:case 8232:case 8233:case 133:g+="",d=!1;break;case 13:g+="&#8203",d=!1;break;case 32:o&&d?(g+="&#160;",d=!1):(g+=" ",d=!0);break;default:g+=String.fromCharCode(m),d=!1}}if(a+=`<span style="${e.getInlineStyle(u,t)}">${g}</span>`,f>s||l>=s)break}return a+="</div>",a}function hY(n,e,t){let i='<div class="monaco-tokenized-source">';const s=w0(n);let r=t.getInitialState();for(let o=0,a=s.length;o<a;o++){const l=s[o];o>0&&(i+="<br/>");const c=t.tokenizeEncoded(l,!0,r);Hn.convertToEndOffset(c.tokens,l.length);const u=new Hn(c.tokens,l,e).inflate();let h=0;for(let f=0,g=u.getCount();f<g;f++){const m=u.getClassName(f),p=u.getEndOffset(f);i+=`<span class="${m}">${Jv(l.substring(h,p))}</span>`,h=p}r=c.endState}return i+="</div>",i}class OOe{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;const t=this._inserts,i=this._changes,s=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,i,s)}}class ZOe{constructor(e,t,i,s,r){this.id=e,this.afterLineNumber=t,this.ordinal=i,this.height=s,this.minWidth=r,this.prefixSum=0}}let Lse=class iW{constructor(e,t,i,s){this._instanceId=fie(++iW.INSTANCE_COUNT),this._pendingChanges=new OOe,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=t,this._paddingTop=i,this._paddingBottom=s}static findInsertionIndex(e,t,i){let s=0,r=e.length;for(;s<r;){const o=s+r>>>1;t===e[o].afterLineNumber?i<e[o].ordinal?r=o:s=o+1:t<e[o].afterLineNumber?r=o:s=o+1}return s}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{e({insertWhitespace:(s,r,o,a)=>{t=!0,s=s|0,r=r|0,o=o|0,a=a|0;const l=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new ZOe(l,s,r,o,a)),l},changeOneWhitespace:(s,r,o)=>{t=!0,r=r|0,o=o|0,this._pendingChanges.change({id:s,newAfterLineNumber:r,newHeight:o})},removeWhitespace:s=>{t=!0,this._pendingChanges.remove({id:s})}})}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,i){if((e.length>0||i.length>0)&&(this._minWidth=-1),e.length+t.length+i.length<=1){for(const l of e)this._insertWhitespace(l);for(const l of t)this._changeOneWhitespace(l.id,l.newAfterLineNumber,l.newHeight);for(const l of i){const c=this._findWhitespaceIndex(l.id);c!==-1&&this._removeWhitespace(c)}return}const s=new Set;for(const l of i)s.add(l.id);const r=new Map;for(const l of t)r.set(l.id,l);const o=l=>{const c=[];for(const d of l)if(!s.has(d.id)){if(r.has(d.id)){const u=r.get(d.id);d.afterLineNumber=u.newAfterLineNumber,d.height=u.newHeight}c.push(d)}return c},a=o(this._arr).concat(o(e));a.sort((l,c)=>l.afterLineNumber===c.afterLineNumber?l.ordinal-c.ordinal:l.afterLineNumber-c.afterLineNumber),this._arr=a,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){const t=iW.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){const t=this._arr;for(let i=0,s=t.length;i<s;i++)if(t[i].id===e)return i;return-1}_changeOneWhitespace(e,t,i){const s=this._findWhitespaceIndex(e);if(s!==-1&&(this._arr[s].height!==i&&(this._arr[s].height=i,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,s-1)),this._arr[s].afterLineNumber!==t)){const r=this._arr[s];this._removeWhitespace(s),r.afterLineNumber=t,this._insertWhitespace(r)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount-=t-e+1;for(let i=0,s=this._arr.length;i<s;i++){const r=this._arr[i].afterLineNumber;e<=r&&r<=t?this._arr[i].afterLineNumber=e-1:r>t&&(this._arr[i].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount+=t-e+1;for(let i=0,s=this._arr.length;i<s;i++){const r=this._arr[i].afterLineNumber;e<=r&&(this._arr[i].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e=e|0;let t=Math.max(0,this._prefixSumValidIndex+1);t===0&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let i=t;i<=e;i++)this._arr[i].prefixSum=this._arr[i-1].prefixSum+this._arr[i].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();const e=this._lineHeight*this._lineCount,t=this.getWhitespacesTotalHeight();return e+t+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e=e|0;const t=this._findLastWhitespaceBeforeLineNumber(e);return t===-1?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e=e|0;const t=this._arr;let i=0,s=t.length-1;for(;i<=s;){const o=(s-i|0)/2|0,a=i+o|0;if(t[a].afterLineNumber<e){if(a+1>=t.length||t[a+1].afterLineNumber>=e)return a;i=a+1|0}else s=a-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e=e|0;const i=this._findLastWhitespaceBeforeLineNumber(e)+1;return i<this._arr.length?i:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e=e|0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;let i;e>1?i=this._lineHeight*(e-1):i=0;const s=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e-(t?1:0));return i+s+this._paddingTop}getVerticalOffsetAfterLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;const i=this._lineHeight*e,s=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e+(t?1:0));return i+s+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let e=0;for(let t=0,i=this._arr.length;t<i;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>t}isInTopPadding(e){return this._paddingTop===0?!1:(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(this._paddingBottom===0)return!1;this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>=t-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),e=e|0,e<0)return 1;const t=this._lineCount|0,i=this._lineHeight;let s=1,r=t;for(;s<r;){const o=(s+r)/2|0,a=this.getVerticalOffsetForLineNumber(o)|0;if(e>=a+i)s=o+1;else{if(e>=a)return o;r=o}}return s>t?t:s}getLinesViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const i=this._lineHeight,s=this.getLineNumberAtOrAfterVerticalOffset(e)|0,r=this.getVerticalOffsetForLineNumber(s)|0;let o=this._lineCount|0,a=this.getFirstWhitespaceIndexAfterLineNumber(s)|0;const l=this.getWhitespacesCount()|0;let c,d;a===-1?(a=l,d=o+1,c=0):(d=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);let u=r,h=u;const f=5e5;let g=0;r>=f&&(g=Math.floor(r/f)*f,g=Math.floor(g/i)*i,h-=g);const m=[],p=e+(t-e)/2;let b=-1;for(let y=s;y<=o;y++){if(b===-1){const C=u,S=u+i;(C<=p&&p<S||C>p)&&(b=y)}for(u+=i,m[y-s]=h,h+=i;d===y;)h+=c,u+=c,a++,a>=l?d=o+1:(d=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);if(u>=t){o=y;break}}b===-1&&(b=o);const w=this.getVerticalOffsetForLineNumber(o)|0;let v=s,_=o;return v<_&&r<e&&v++,v<_&&w+i>t&&_--,{bigNumbersDelta:g,startLineNumber:s,endLineNumber:o,relativeVerticalOffset:m,centeredLineNumber:b,completelyVisibleStartLineNumber:v,completelyVisibleEndLineNumber:_,lineHeight:this._lineHeight}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e=e|0;const t=this.getAfterLineNumberForWhitespaceIndex(e);let i;t>=1?i=this._lineHeight*t:i=0;let s;return e>0?s=this.getWhitespacesAccumulatedHeight(e-1):s=0,i+s+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e=e|0;let t=0,i=this.getWhitespacesCount()-1;if(i<0)return-1;const s=this.getVerticalOffsetForWhitespaceIndex(i),r=this.getHeightForWhitespaceIndex(i);if(e>=s+r)return-1;for(;t<i;){const o=Math.floor((t+i)/2),a=this.getVerticalOffsetForWhitespaceIndex(o),l=this.getHeightForWhitespaceIndex(o);if(e>=a+l)t=o+1;else{if(e>=a)return o;i=o}}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e=e|0;const t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0||t>=this.getWhitespacesCount())return null;const i=this.getVerticalOffsetForWhitespaceIndex(t);if(i>e)return null;const s=this.getHeightForWhitespaceIndex(t),r=this.getIdForWhitespaceIndex(t),o=this.getAfterLineNumberForWhitespaceIndex(t);return{id:r,afterLineNumber:o,verticalOffset:i,height:s}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const i=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),s=this.getWhitespacesCount()-1;if(i<0)return[];const r=[];for(let o=i;o<=s;o++){const a=this.getVerticalOffsetForWhitespaceIndex(o),l=this.getHeightForWhitespaceIndex(o);if(a>=t)break;r.push({id:this.getIdForWhitespaceIndex(o),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(o),verticalOffset:a,height:l})}return r}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].height}};Lse.INSTANCE_COUNT=0;const GOe=125;class Zv{constructor(e,t,i,s){e=e|0,t=t|0,i=i|0,s=s|0,e<0&&(e=0),t<0&&(t=0),i<0&&(i=0),s<0&&(s=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=i,this.contentHeight=s,this.scrollHeight=Math.max(i,s)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}class BOe extends Le{constructor(e,t){super(),this._onDidContentSizeChange=this._register(new ue),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new Zv(0,0,0,0),this._scrollable=this._register(new x0({forceIntegerValues:!0,smoothScrollDuration:e,scheduleAtNextAnimationFrame:t})),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;const t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);const i=t.contentWidth!==e.contentWidth,s=t.contentHeight!==e.contentHeight;(i||s)&&this._onDidContentSizeChange.fire(new RP(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}}class XOe extends Le{constructor(e,t,i){super(),this._configuration=e;const s=this._configuration.options,r=s.get(145),o=s.get(84);this._linesLayout=new Lse(t,s.get(67),o.top,o.bottom),this._maxLineWidth=0,this._overlayWidgetsMinWidth=0,this._scrollable=this._register(new BOe(0,i)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new Zv(r.contentWidth,0,r.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(114)?GOe:0)}onConfigurationChanged(e){const t=this._configuration.options;if(e.hasChanged(67)&&this._linesLayout.setLineHeight(t.get(67)),e.hasChanged(84)){const i=t.get(84);this._linesLayout.setPadding(i.top,i.bottom)}if(e.hasChanged(145)){const i=t.get(145),s=i.contentWidth,r=i.height,o=this._scrollable.getScrollDimensions(),a=o.contentWidth;this._scrollable.setScrollDimensions(new Zv(s,o.contentWidth,r,this._getContentHeight(s,r,a)))}else this._updateHeight();e.hasChanged(114)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){const s=this._configuration.options.get(103);return s.horizontal===2||e>=t?0:s.horizontalScrollbarSize}_getContentHeight(e,t,i){const s=this._configuration.options;let r=this._linesLayout.getLinesTotalHeight();return s.get(105)?r+=Math.max(0,t-s.get(67)-s.get(84).bottom):s.get(103).ignoreHorizontalScrollbarInContentHeight||(r+=this._getHorizontalScrollbarHeight(e,i)),r}_updateHeight(){const e=this._scrollable.getScrollDimensions(),t=e.width,i=e.height,s=e.contentWidth;this._scrollable.setScrollDimensions(new Zv(t,e.contentWidth,i,this._getContentHeight(t,i,s)))}getCurrentViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new kU(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new kU(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(){const e=this._configuration.options,t=this._maxLineWidth,i=e.get(146),s=e.get(50),r=e.get(145);if(i.isViewportWrapping){const o=e.get(73);return t>r.contentWidth+s.typicalHalfwidthCharacterWidth&&o.enabled&&o.side==="right"?t+r.verticalScrollbarWidth:t}else{const o=e.get(104)*s.typicalHalfwidthCharacterWidth,a=this._linesLayout.getWhitespaceMinWidth();return Math.max(t+o+r.verticalScrollbarWidth,a,this._overlayWidgetsMinWidth)}}setMaxLineWidth(e){this._maxLineWidth=e,this._updateContentWidth()}setOverlayWidgetsMinWidth(e){this._overlayWidgetsMinWidth=e,this._updateContentWidth()}_updateContentWidth(){const e=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new Zv(e.width,this._computeContentWidth(),e.height,e.contentHeight)),this._updateHeight()}saveState(){const e=this._scrollable.getFutureScrollPosition(),t=e.scrollTop,i=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t),s=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(i);return{scrollTop:t,scrollTopWithoutViewZones:t-s,scrollLeft:e.scrollLeft}}changeWhitespace(e){const t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetAfterLineNumber(e,t)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){const t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){t===1?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}deltaScrollNow(e,t){const i=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:i.scrollLeft+e,scrollTop:i.scrollTop+t})}}class zOe{constructor(e,t,i,s,r){this.editorId=e,this.model=t,this.configuration=i,this._linesCollection=s,this._coordinatesConverter=r,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){const t=e.id;let i=this._decorationsCache[t];if(!i){const s=e.range,r=e.options;let o;if(r.isWholeLine){const a=this._coordinatesConverter.convertModelPositionToViewPosition(new pe(s.startLineNumber,1),0,!1,!0),l=this._coordinatesConverter.convertModelPositionToViewPosition(new pe(s.endLineNumber,this.model.getLineMaxColumn(s.endLineNumber)),1);o=new te(a.lineNumber,a.column,l.lineNumber,l.column)}else o=this._coordinatesConverter.convertModelRangeToViewRange(s,1);i=new tse(o,r),this._decorationsCache[t]=i}return i}getMinimapDecorationsInRange(e){return this._getDecorationsInRange(e,!0,!1).decorations}getDecorationsViewportData(e){let t=this._cachedModelDecorationsResolver!==null;return t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsInRange(e,!1,!1),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}getInlineDecorationsOnLine(e,t=!1,i=!1){const s=new te(e,this._linesCollection.getViewLineMinColumn(e),e,this._linesCollection.getViewLineMaxColumn(e));return this._getDecorationsInRange(s,t,i).inlineDecorations[0]}_getDecorationsInRange(e,t,i){const s=this._linesCollection.getDecorationsInRange(e,this.editorId,fL(this.configuration.options),t,i),r=e.startLineNumber,o=e.endLineNumber,a=[];let l=0;const c=[];for(let d=r;d<=o;d++)c[d-r]=[];for(let d=0,u=s.length;d<u;d++){const h=s[d],f=h.options;if(!HOe(this.model,h))continue;const g=this._getOrCreateViewModelDecoration(h),m=g.range;if(a[l++]=g,f.inlineClassName){const p=new i_(m,f.inlineClassName,f.inlineClassNameAffectsLetterSpacing?3:0),b=Math.max(r,m.startLineNumber),w=Math.min(o,m.endLineNumber);for(let v=b;v<=w;v++)c[v-r].push(p)}if(f.beforeContentClassName&&r<=m.startLineNumber&&m.startLineNumber<=o){const p=new i_(new te(m.startLineNumber,m.startColumn,m.startLineNumber,m.startColumn),f.beforeContentClassName,1);c[m.startLineNumber-r].push(p)}if(f.afterContentClassName&&r<=m.endLineNumber&&m.endLineNumber<=o){const p=new i_(new te(m.endLineNumber,m.endColumn,m.endLineNumber,m.endColumn),f.afterContentClassName,2);c[m.endLineNumber-r].push(p)}}return{decorations:a,inlineDecorations:c}}}function HOe(n,e){return!(e.options.hideInCommentTokens&&UOe(n,e)||e.options.hideInStringTokens&&YOe(n,e))}function UOe(n,e){return kse(n,e.range,t=>t===1)}function YOe(n,e){return kse(n,e.range,t=>t===2)}function kse(n,e,t){for(let i=e.startLineNumber;i<=e.endLineNumber;i++){const s=n.tokenization.getLineTokens(i),r=i===e.startLineNumber,o=i===e.endLineNumber;let a=r?s.findTokenIndexAtOffset(e.startColumn-1):0;for(;a<s.getCount()&&!(o&&s.getStartOffset(a)>e.endColumn-1);){if(!t(s.getStandardTokenType(a)))return!1;a++}}return!0}function bR(n,e){return n===null?e?EL.INSTANCE:NL.INSTANCE:new KOe(n,e)}class KOe{constructor(e,t){this._projectionData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getProjectionData(){return this._projectionData}getViewLineCount(){return this._isVisible?this._projectionData.getOutputLineCount():0}getViewLineContent(e,t,i){this._assertVisible();const s=i>0?this._projectionData.breakOffsets[i-1]:0,r=this._projectionData.breakOffsets[i];let o;if(this._projectionData.injectionOffsets!==null){const a=this._projectionData.injectionOffsets.map((c,d)=>new Fl(0,0,c+1,this._projectionData.injectionOptions[d],0));o=Fl.applyInjectedText(e.getLineContent(t),a).substring(s,r)}else o=e.getValueInRange({startLineNumber:t,startColumn:s+1,endLineNumber:t,endColumn:r+1});return i>0&&(o=fY(this._projectionData.wrappedTextIndentLength)+o),o}getViewLineLength(e,t,i){return this._assertVisible(),this._projectionData.getLineLength(i)}getViewLineMinColumn(e,t,i){return this._assertVisible(),this._projectionData.getMinOutputOffset(i)+1}getViewLineMaxColumn(e,t,i){return this._assertVisible(),this._projectionData.getMaxOutputOffset(i)+1}getViewLineData(e,t,i){const s=new Array;return this.getViewLinesData(e,t,i,1,0,[!0],s),s[0]}getViewLinesData(e,t,i,s,r,o,a){this._assertVisible();const l=this._projectionData,c=l.injectionOffsets,d=l.injectionOptions;let u=null;if(c){u=[];let f=0,g=0;for(let m=0;m<l.getOutputLineCount();m++){const p=new Array;u[m]=p;const b=m>0?l.breakOffsets[m-1]:0,w=l.breakOffsets[m];for(;g<c.length;){const v=d[g].content.length,_=c[g]+f,y=_+v;if(_>w)break;if(b<y){const C=d[g];if(C.inlineClassName){const S=m>0?l.wrappedTextIndentLength:0,k=S+Math.max(_-b,0),I=S+Math.min(y-b,w-b);k!==I&&p.push(new J4e(k,I,C.inlineClassName,C.inlineClassNameAffectsLetterSpacing))}}if(y<=w)f+=v,g++;else break}}}let h;c?h=e.tokenization.getLineTokens(t).withInserted(c.map((f,g)=>({offset:f,text:d[g].content,tokenMetadata:Hn.defaultTokenMetadata}))):h=e.tokenization.getLineTokens(t);for(let f=i;f<i+s;f++){const g=r+f-i;if(!o[g]){a[g]=null;continue}a[g]=this._getViewLineData(h,u?u[f]:null,f)}}_getViewLineData(e,t,i){this._assertVisible();const s=this._projectionData,r=i>0?s.wrappedTextIndentLength:0,o=i>0?s.breakOffsets[i-1]:0,a=s.breakOffsets[i],l=e.sliceAndInflate(o,a,r);let c=l.getLineContent();i>0&&(c=fY(s.wrappedTextIndentLength)+c);const d=this._projectionData.getMinOutputOffset(i)+1,u=c.length+1,h=i+1<this.getViewLineCount(),f=i===0?0:s.breakOffsetsVisibleColumn[i-1];return new mP(c,h,d,u,f,l,t)}getModelColumnOfViewPosition(e,t){return this._assertVisible(),this._projectionData.translateToInputOffset(e,t-1)+1}getViewPositionOfModelPosition(e,t,i=2){return this._assertVisible(),this._projectionData.translateToOutputPosition(t-1,i).toPosition(e)}getViewLineNumberOfModelPosition(e,t){this._assertVisible();const i=this._projectionData.translateToOutputPosition(t-1);return e+i.outputLineIndex}normalizePosition(e,t,i){const s=t.lineNumber-e;return this._projectionData.normalizeOutputPosition(e,t.column-1,i).toPosition(s)}getInjectedTextAt(e,t){return this._projectionData.getInjectedText(e,t-1)}_assertVisible(){if(!this._isVisible)throw new Error("Not supported")}}class EL{constructor(){}isVisible(){return!0}setVisible(e){return e?this:NL.INSTANCE}getProjectionData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,i){return e.getLineContent(t)}getViewLineLength(e,t,i){return e.getLineLength(t)}getViewLineMinColumn(e,t,i){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,i){return e.getLineMaxColumn(t)}getViewLineData(e,t,i){const s=e.tokenization.getLineTokens(t),r=s.getLineContent();return new mP(r,!1,1,r.length+1,0,s.inflate(),null)}getViewLinesData(e,t,i,s,r,o,a){if(!o[r]){a[r]=null;return}a[r]=this.getViewLineData(e,t,0)}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new pe(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,i){return t}getInjectedTextAt(e,t){return null}}EL.INSTANCE=new EL;class NL{constructor(){}isVisible(){return!1}setVisible(e){return e?EL.INSTANCE:this}getProjectionData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,i){throw new Error("Not supported")}getViewLineLength(e,t,i){throw new Error("Not supported")}getViewLineMinColumn(e,t,i){throw new Error("Not supported")}getViewLineMaxColumn(e,t,i){throw new Error("Not supported")}getViewLineData(e,t,i){throw new Error("Not supported")}getViewLinesData(e,t,i,s,r,o,a){throw new Error("Not supported")}getModelColumnOfViewPosition(e,t){throw new Error("Not supported")}getViewPositionOfModelPosition(e,t){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw new Error("Not supported")}normalizePosition(e,t,i){throw new Error("Not supported")}getInjectedTextAt(e,t){throw new Error("Not supported")}}NL.INSTANCE=new NL;const vR=[""];function fY(n){if(n>=vR.length)for(let e=1;e<=n;e++)vR[e]=jOe(e);return vR[n]}function jOe(n){return new Array(n+1).join(" ")}class JOe{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,t){e=Rm(e);const i=this.values,s=this.prefixSum,r=t.length;return r===0?!1:(this.values=new Uint32Array(i.length+r),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e),e+r),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(s.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,t){return e=Rm(e),t=Rm(t),this.values[e]===t?!1:(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=Rm(e),t=Rm(t);const i=this.values,s=this.prefixSum;if(e>=i.length)return!1;const r=i.length-e;return t>=r&&(t=r),t===0?!1:(this.values=new Uint32Array(i.length-t),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(s.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=Rm(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;t===0&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let i=t;i<=e;i++)this.prefixSum[i]=this.prefixSum[i-1]+this.values[i];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,i=this.values.length-1,s=0,r=0,o=0;for(;t<=i;)if(s=t+(i-t)/2|0,r=this.prefixSum[s],o=r-this.values[s],e<o)i=s-1;else if(e>=r)t=s+1;else break;return new xse(s,e-o)}}class $Oe{constructor(e){this._values=e,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(e){return this._ensureValid(),e===0?0:this._prefixSum[e-1]}getIndexOf(e){this._ensureValid();const t=this._indexBySum[e],i=t>0?this._prefixSum[t-1]:0;return new xse(t,e-i)}removeValues(e,t){this._values.splice(e,t),this._invalidate(e)}insertValues(e,t){this._values=N2(this._values,e,t),this._invalidate(e)}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._values.length;e<t;e++){const i=this._values[e],s=e>0?this._prefixSum[e-1]:0;this._prefixSum[e]=s+i;for(let r=0;r<i;r++)this._indexBySum[s+r]=e}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(e,t){this._values[e]!==t&&(this._values[e]=t,this._invalidate(e))}}class xse{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}}class QOe{constructor(e,t,i,s,r,o,a,l,c,d){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=i,this._monospaceLineBreaksComputerFactory=s,this.fontInfo=r,this.tabSize=o,this.wrappingStrategy=a,this.wrappingColumn=l,this.wrappingIndent=c,this.wordBreak=d,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new eZe(this)}_constructLines(e,t){this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));const i=this.model.getLinesContent(),s=this.model.getInjectedTextDecorations(this._editorId),r=i.length,o=this.createLineBreaksComputer(),a=new qd(Fl.fromDecorations(s));for(let m=0;m<r;m++){const p=a.takeWhile(b=>b.lineNumber===m+1);o.addRequest(i[m],p,t?t[m]:null)}const l=o.finalize(),c=[],d=this.hiddenAreasDecorationIds.map(m=>this.model.getDecorationRange(m)).sort(te.compareRangesUsingStarts);let u=1,h=0,f=-1,g=f+1<d.length?h+1:r+2;for(let m=0;m<r;m++){const p=m+1;p===g&&(f++,u=d[f].startLineNumber,h=d[f].endLineNumber,g=f+1<d.length?h+1:r+2);const b=p>=u&&p<=h,w=bR(l[m],!b);c[m]=w.getViewLineCount(),this.modelLineProjections[m]=w}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new $Oe(c)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map(e=>this.model.getDecorationRange(e))}setHiddenAreas(e){const t=e.map(h=>this.model.validateRange(h)),i=qOe(t),s=this.hiddenAreasDecorationIds.map(h=>this.model.getDecorationRange(h)).sort(te.compareRangesUsingStarts);if(i.length===s.length){let h=!1;for(let f=0;f<i.length;f++)if(!i[f].equalsRange(s[f])){h=!0;break}if(!h)return!1}const r=i.map(h=>({range:h,options:Qt.EMPTY}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,r);const o=i;let a=1,l=0,c=-1,d=c+1<o.length?l+1:this.modelLineProjections.length+2,u=!1;for(let h=0;h<this.modelLineProjections.length;h++){const f=h+1;f===d&&(c++,a=o[c].startLineNumber,l=o[c].endLineNumber,d=c+1<o.length?l+1:this.modelLineProjections.length+2);let g=!1;if(f>=a&&f<=l?this.modelLineProjections[h].isVisible()&&(this.modelLineProjections[h]=this.modelLineProjections[h].setVisible(!1),g=!0):(u=!0,this.modelLineProjections[h].isVisible()||(this.modelLineProjections[h]=this.modelLineProjections[h].setVisible(!0),g=!0)),g){const m=this.modelLineProjections[h].getViewLineCount();this.projectedModelLineLineCounts.setValue(h,m)}}return u||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return e<1||e>this.modelLineProjections.length?!1:this.modelLineProjections[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}setTabSize(e){return this.tabSize===e?!1:(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,i,s,r){const o=this.fontInfo.equals(e),a=this.wrappingStrategy===t,l=this.wrappingColumn===i,c=this.wrappingIndent===s,d=this.wordBreak===r;if(o&&a&&l&&c&&d)return!1;const u=o&&a&&!l&&c&&d;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=i,this.wrappingIndent=s,this.wordBreak=r;let h=null;if(u){h=[];for(let f=0,g=this.modelLineProjections.length;f<g;f++)h[f]=this.modelLineProjections[f].getProjectionData()}return this._constructLines(!1,h),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent,this.wordBreak)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,i){if(!e||e<=this._validModelVersionId)return null;const s=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,r=this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections.splice(t-1,i-t+1),this.projectedModelLineLineCounts.removeValues(t-1,i-t+1),new eW(s,r)}onModelLinesInserted(e,t,i,s){if(!e||e<=this._validModelVersionId)return null;const r=t>2&&!this.modelLineProjections[t-2].isVisible(),o=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1;let a=0;const l=[],c=[];for(let d=0,u=s.length;d<u;d++){const h=bR(s[d],!r);l.push(h);const f=h.getViewLineCount();a+=f,c[d]=f}return this.modelLineProjections=this.modelLineProjections.slice(0,t-1).concat(l).concat(this.modelLineProjections.slice(t-1)),this.projectedModelLineLineCounts.insertValues(t-1,c),new tW(o,o+a-1)}onModelLineChanged(e,t,i){if(e!==null&&e<=this._validModelVersionId)return[!1,null,null,null];const s=t-1,r=this.modelLineProjections[s].getViewLineCount(),o=this.modelLineProjections[s].isVisible(),a=bR(i,o);this.modelLineProjections[s]=a;const l=this.modelLineProjections[s].getViewLineCount();let c=!1,d=0,u=-1,h=0,f=-1,g=0,m=-1;r>l?(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,u=d+l-1,g=u+1,m=g+(r-l)-1,c=!0):r<l?(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,u=d+r-1,h=u+1,f=h+(l-r)-1,c=!0):(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,u=d+l-1),this.projectedModelLineLineCounts.setValue(s,l);const p=d<=u?new Cse(d,u-d+1):null,b=h<=f?new tW(h,f):null,w=g<=m?new eW(g,m):null;return[c,p,b,w]}acceptVersionId(e){this._validModelVersionId=e,this.modelLineProjections.length===1&&!this.modelLineProjections[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(e){if(e<1)return 1;const t=this.getViewLineCount();return e>t?t:e|0}getActiveIndentGuide(e,t,i){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),i=this._toValidViewLineNumber(i);const s=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),r=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),o=this.convertViewPositionToModelPosition(i,this.getViewLineMinColumn(i)),a=this.model.guides.getActiveIndentGuide(s.lineNumber,r.lineNumber,o.lineNumber),l=this.convertModelPositionToViewPosition(a.startLineNumber,1),c=this.convertModelPositionToViewPosition(a.endLineNumber,this.model.getLineMaxColumn(a.endLineNumber));return{startLineNumber:l.lineNumber,endLineNumber:c.lineNumber,indent:a.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);const t=this.projectedModelLineLineCounts.getIndexOf(e-1),i=t.index,s=t.remainder;return new gY(i+1,s)}getMinColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getMaxColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],i=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),s=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,i);return new pe(e.modelLineNumber,s)}getModelEndPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],i=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),s=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,i);return new pe(e.modelLineNumber,s)}getViewLineInfosGroupedByModelRanges(e,t){const i=this.getViewLineInfo(e),s=this.getViewLineInfo(t),r=new Array;let o=this.getModelStartPositionOfViewLine(i),a=new Array;for(let l=i.modelLineNumber;l<=s.modelLineNumber;l++){const c=this.modelLineProjections[l-1];if(c.isVisible()){const d=l===i.modelLineNumber?i.modelLineWrappedLineIdx:0,u=l===s.modelLineNumber?s.modelLineWrappedLineIdx+1:c.getViewLineCount();for(let h=d;h<u;h++)a.push(new gY(l,h))}if(!c.isVisible()&&o){const d=new pe(l-1,this.model.getLineMaxColumn(l-1)+1),u=te.fromPositions(o,d);r.push(new mY(u,a)),a=[],o=null}else c.isVisible()&&!o&&(o=new pe(l,1))}if(o){const l=te.fromPositions(o,this.getModelEndPositionOfViewLine(s));r.push(new mY(l,a))}return r}getViewLinesBracketGuides(e,t,i,s){const r=i?this.convertViewPositionToModelPosition(i.lineNumber,i.column):null,o=[];for(const a of this.getViewLineInfosGroupedByModelRanges(e,t)){const l=a.modelRange.startLineNumber,c=this.model.guides.getLinesBracketGuides(l,a.modelRange.endLineNumber,r,s);for(const d of a.viewLines){const h=c[d.modelLineNumber-l].map(f=>{if(f.forWrappedLinesAfterColumn!==-1&&this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.forWrappedLinesAfterColumn).lineNumber>=d.modelLineWrappedLineIdx||f.forWrappedLinesBeforeOrAtColumn!==-1&&this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.forWrappedLinesBeforeOrAtColumn).lineNumber<d.modelLineWrappedLineIdx)return;if(!f.horizontalLine)return f;let g=-1;if(f.column!==-1){const b=this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.column);if(b.lineNumber===d.modelLineWrappedLineIdx)g=b.column;else if(b.lineNumber<d.modelLineWrappedLineIdx)g=this.getMinColumnOfViewLine(d);else if(b.lineNumber>d.modelLineWrappedLineIdx)return}const m=this.convertModelPositionToViewPosition(d.modelLineNumber,f.horizontalLine.endColumn),p=this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.horizontalLine.endColumn);return p.lineNumber===d.modelLineWrappedLineIdx?new Jf(f.visibleColumn,g,f.className,new t_(f.horizontalLine.top,m.column),-1,-1):p.lineNumber<d.modelLineWrappedLineIdx||f.visibleColumn!==-1?void 0:new Jf(f.visibleColumn,g,f.className,new t_(f.horizontalLine.top,this.getMaxColumnOfViewLine(d)),-1,-1)});o.push(h.filter(f=>!!f))}}return o}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const i=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),s=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t));let r=[];const o=[],a=[],l=i.lineNumber-1,c=s.lineNumber-1;let d=null;for(let g=l;g<=c;g++){const m=this.modelLineProjections[g];if(m.isVisible()){const p=m.getViewLineNumberOfModelPosition(0,g===l?i.column:1),b=m.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(g+1)),w=b-p+1;let v=0;w>1&&m.getViewLineMinColumn(this.model,g+1,b)===1&&(v=p===0?1:2),o.push(w),a.push(v),d===null&&(d=new pe(g+1,0))}else d!==null&&(r=r.concat(this.model.guides.getLinesIndentGuides(d.lineNumber,g)),d=null)}d!==null&&(r=r.concat(this.model.guides.getLinesIndentGuides(d.lineNumber,s.lineNumber)),d=null);const u=t-e+1,h=new Array(u);let f=0;for(let g=0,m=r.length;g<m;g++){let p=r[g];const b=Math.min(u-f,o[g]),w=a[g];let v;w===2?v=0:w===1?v=1:v=b;for(let _=0;_<b;_++)_===v&&(p=0),h[f++]=p}return h}getViewLineContent(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineContent(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineLength(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineLength(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMinColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMaxColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineData(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineData(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLinesData(e,t,i){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const s=this.projectedModelLineLineCounts.getIndexOf(e-1);let r=e;const o=s.index,a=s.remainder,l=[];for(let c=o,d=this.model.getLineCount();c<d;c++){const u=this.modelLineProjections[c];if(!u.isVisible())continue;const h=c===o?a:0;let f=u.getViewLineCount()-h,g=!1;if(r+f>t&&(g=!0,f=t-r+1),u.getViewLinesData(this.model,c+1,h,f,r-e,i,l),r+=f,g)break}return l}validateViewPosition(e,t,i){e=this._toValidViewLineNumber(e);const s=this.projectedModelLineLineCounts.getIndexOf(e-1),r=s.index,o=s.remainder,a=this.modelLineProjections[r],l=a.getViewLineMinColumn(this.model,r+1,o),c=a.getViewLineMaxColumn(this.model,r+1,o);t<l&&(t=l),t>c&&(t=c);const d=a.getModelColumnOfViewPosition(o,t);return this.model.validatePosition(new pe(r+1,d)).equals(i)?new pe(e,t):this.convertModelPositionToViewPosition(i.lineNumber,i.column)}validateViewRange(e,t){const i=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),s=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new te(i.lineNumber,i.column,s.lineNumber,s.column)}convertViewPositionToModelPosition(e,t){const i=this.getViewLineInfo(e),s=this.modelLineProjections[i.modelLineNumber-1].getModelColumnOfViewPosition(i.modelLineWrappedLineIdx,t);return this.model.validatePosition(new pe(i.modelLineNumber,s))}convertViewRangeToModelRange(e){const t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),i=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new te(t.lineNumber,t.column,i.lineNumber,i.column)}convertModelPositionToViewPosition(e,t,i=2,s=!1,r=!1){const o=this.model.validatePosition(new pe(e,t)),a=o.lineNumber,l=o.column;let c=a-1,d=!1;if(r)for(;c<this.modelLineProjections.length&&!this.modelLineProjections[c].isVisible();)c++,d=!0;else for(;c>0&&!this.modelLineProjections[c].isVisible();)c--,d=!0;if(c===0&&!this.modelLineProjections[c].isVisible())return new pe(s?0:1,1);const u=1+this.projectedModelLineLineCounts.getPrefixSum(c);let h;return d?r?h=this.modelLineProjections[c].getViewPositionOfModelPosition(u,1,i):h=this.modelLineProjections[c].getViewPositionOfModelPosition(u,this.model.getLineMaxColumn(c+1),i):h=this.modelLineProjections[a-1].getViewPositionOfModelPosition(u,l,i),h}convertModelRangeToViewRange(e,t=0){if(e.isEmpty()){const i=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return te.fromPositions(i)}else{const i=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),s=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new te(i.lineNumber,i.column,s.lineNumber,s.column)}}getViewLineNumberOfModelPosition(e,t){let i=e-1;if(this.modelLineProjections[i].isVisible()){const r=1+this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections[i].getViewLineNumberOfModelPosition(r,t)}for(;i>0&&!this.modelLineProjections[i].isVisible();)i--;if(i===0&&!this.modelLineProjections[i].isVisible())return 1;const s=1+this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections[i].getViewLineNumberOfModelPosition(s,this.model.getLineMaxColumn(i+1))}getDecorationsInRange(e,t,i,s,r){const o=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),a=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(a.lineNumber-o.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new te(o.lineNumber,1,a.lineNumber,a.column),t,i,s,r);let l=[];const c=o.lineNumber-1,d=a.lineNumber-1;let u=null;for(let m=c;m<=d;m++)if(this.modelLineProjections[m].isVisible())u===null&&(u=new pe(m+1,m===c?o.column:1));else if(u!==null){const b=this.model.getLineMaxColumn(m);l=l.concat(this.model.getDecorationsInRange(new te(u.lineNumber,u.column,m,b),t,i,s)),u=null}u!==null&&(l=l.concat(this.model.getDecorationsInRange(new te(u.lineNumber,u.column,a.lineNumber,a.column),t,i,s)),u=null),l.sort((m,p)=>{const b=te.compareRangesUsingStarts(m.range,p.range);return b===0?m.id<p.id?-1:m.id>p.id?1:0:b});const h=[];let f=0,g=null;for(const m of l){const p=m.id;g!==p&&(g=p,h[f++]=m)}return h}getInjectedTextAt(e){const t=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[t.modelLineNumber-1].getInjectedTextAt(t.modelLineWrappedLineIdx,e.column)}normalizePosition(e,t){const i=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[i.modelLineNumber-1].normalizePosition(i.modelLineWrappedLineIdx,e,t)}getLineIndentColumn(e){const t=this.getViewLineInfo(e);return t.modelLineWrappedLineIdx===0?this.model.getLineIndentColumn(t.modelLineNumber):0}}function qOe(n){if(n.length===0)return[];const e=n.slice();e.sort(te.compareRangesUsingStarts);const t=[];let i=e[0].startLineNumber,s=e[0].endLineNumber;for(let r=1,o=e.length;r<o;r++){const a=e[r];a.startLineNumber>s+1?(t.push(new te(i,1,s,1)),i=a.startLineNumber,s=a.endLineNumber):a.endLineNumber>s&&(s=a.endLineNumber)}return t.push(new te(i,1,s,1)),t}class gY{constructor(e,t){this.modelLineNumber=e,this.modelLineWrappedLineIdx=t}}class mY{constructor(e,t){this.modelRange=e,this.viewLines=t}}class eZe{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e,t,i,s){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t,i,s)}convertModelRangeToViewRange(e,t){return this._lines.convertModelRangeToViewRange(e,t)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}}class tZe{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new iZe(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,i,s){return!1}createLineBreaksComputer(){const e=[];return{addRequest:(t,i,s)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,i){return new eW(t,i)}onModelLinesInserted(e,t,i,s){return new tW(t,i)}onModelLineChanged(e,t,i){return[!1,new Cse(t,1),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,i){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,t,i){return new Array(t-e+1).fill([])}getViewLinesIndentGuides(e,t){const i=t-e+1,s=new Array(i);for(let r=0;r<i;r++)s[r]=0;return s}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){const t=this.model.tokenization.getLineTokens(e),i=t.getLineContent();return new mP(i,!1,1,i.length+1,0,t.inflate(),null)}getViewLinesData(e,t,i){const s=this.model.getLineCount();e=Math.min(Math.max(1,e),s),t=Math.min(Math.max(1,t),s);const r=[];for(let o=e;o<=t;o++){const a=o-e;r[a]=i[a]?this.getViewLineData(o):null}return r}getDecorationsInRange(e,t,i,s,r){return this.model.getDecorationsInRange(e,t,i,s,r)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}}class iZe{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){const t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,t){return e}}const vf=Ph.Right;class nZe{constructor(e){this.persist=0,this._requiredLanes=1,this.lanes=new Uint8Array(Math.ceil((e+1)*vf/8))}reset(e){const t=Math.ceil((e+1)*vf/8);this.lanes.length<t?this.lanes=new Uint8Array(t):this.lanes.fill(0),this._requiredLanes=1}get requiredLanes(){return this._requiredLanes}push(e,t,i){i&&(this.persist|=1<<e-1);for(let s=t.startLineNumber;s<=t.endLineNumber;s++){const r=vf*s+(e-1);this.lanes[r>>>3]|=1<<r%8,this._requiredLanes=Math.max(this._requiredLanes,this.countAtLine(s))}}getLanesAtLine(e){const t=[];let i=vf*e;for(let s=0;s<vf;s++)(this.persist&1<<s||this.lanes[i>>>3]&1<<i%8)&&t.push(s+1),i++;return t.length?t:[Ph.Center]}countAtLine(e){let t=vf*e,i=0;for(let s=0;s<vf;s++)(this.persist&1<<s||this.lanes[t>>>3]&1<<t%8)&&i++,t++;return i}}let sZe=class extends Le{constructor(e,t,i,s,r,o,a,l,c){if(super(),this.languageConfigurationService=a,this._themeService=l,this._attachedView=c,this.hiddenAreasModel=new oZe,this.previousHiddenAreas=[],this._editorId=e,this._configuration=t,this.model=i,this._eventDispatcher=new COe,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new Nm(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._updateConfigurationViewLineCount=this._register(new as(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStart=FP.create(this.model),this.glyphLanes=new nZe(0),this.model.isTooLargeForTokenization())this._lines=new tZe(this.model);else{const d=this._configuration.options,u=d.get(50),h=d.get(139),f=d.get(146),g=d.get(138),m=d.get(129);this._lines=new QOe(this._editorId,this.model,s,r,u,this.model.getOptions().tabSize,h,f.wrappingColumn,g,m)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new WOe(i,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new XOe(this._configuration,this.getLineCount(),o)),this._register(this.viewLayout.onDidScroll(d=>{d.scrollTopChanged&&this._handleVisibleLinesChanged(),d.scrollTopChanged&&this._viewportStart.invalidate(),this._eventDispatcher.emitSingleViewEvent(new vOe(d)),this._eventDispatcher.emitOutgoingEvent(new AP(d.oldScrollWidth,d.oldScrollLeft,d.oldScrollHeight,d.oldScrollTop,d.scrollWidth,d.scrollLeft,d.scrollHeight,d.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(d=>{this._eventDispatcher.emitOutgoingEvent(d)})),this._decorations=new zOe(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(d=>{try{const u=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(u,d)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(xw.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new yOe)})),this._register(this._themeService.onDidColorThemeChange(d=>{this._invalidateDecorationsColorCache(),this._eventDispatcher.emitSingleViewEvent(new _Oe(d))})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this._viewportStart.dispose(),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}getModelVisibleRanges(){const e=this.viewLayout.getLinesViewportData(),t=new te(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber));return this._toModelVisibleRanges(t)}visibleLinesStabilized(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!0)}_handleVisibleLinesChanged(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!1)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new pOe(e)),this._eventDispatcher.emitOutgoingEvent(new WP(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new hOe)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new fOe)}_captureStableViewport(){if(this._viewportStart.isValid&&this.viewLayout.getCurrentScrollTop()>0){const e=new pe(this._viewportStart.viewLineNumber,this.getLineMinColumn(this._viewportStart.viewLineNumber)),t=this.coordinatesConverter.convertViewPositionToModelPosition(e);return new bY(t,this._viewportStart.startLineDelta)}return new bY(null,0)}_onConfigurationChanged(e,t){const i=this._captureStableViewport(),s=this._configuration.options,r=s.get(50),o=s.get(139),a=s.get(146),l=s.get(138),c=s.get(129);this._lines.setWrappingSettings(r,o,a.wrappingColumn,l,c)&&(e.emitViewEvent(new Zy),e.emitViewEvent(new Gy),e.emitViewEvent(new bf(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(91)&&(this._decorations.reset(),e.emitViewEvent(new bf(null))),t.hasChanged(98)&&(this._decorations.reset(),e.emitViewEvent(new bf(null))),e.emitViewEvent(new gOe(t)),this.viewLayout.onConfigurationChanged(t),i.recoverViewportStart(this.coordinatesConverter,this.viewLayout),Nm.shouldRecreate(t)&&(this.cursorConfig=new Nm(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(e=>{try{const i=this._eventDispatcher.beginEmitViewEvents();let s=!1,r=!1;const o=e instanceof dg?e.rawContentChangedEvent.changes:e.changes,a=e instanceof dg?e.rawContentChangedEvent.versionId:null,l=this._lines.createLineBreaksComputer();for(const u of o)switch(u.changeType){case 4:{for(let h=0;h<u.detail.length;h++){const f=u.detail[h];let g=u.injectedTexts[h];g&&(g=g.filter(m=>!m.ownerId||m.ownerId===this._editorId)),l.addRequest(f,g,null)}break}case 2:{let h=null;u.injectedText&&(h=u.injectedText.filter(f=>!f.ownerId||f.ownerId===this._editorId)),l.addRequest(u.detail,h,null);break}}const c=l.finalize(),d=new qd(c);for(const u of o)switch(u.changeType){case 1:{this._lines.onModelFlushed(),i.emitViewEvent(new Zy),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),s=!0;break}case 3:{const h=this._lines.onModelLinesDeleted(a,u.fromLineNumber,u.toLineNumber);h!==null&&(i.emitViewEvent(h),this.viewLayout.onLinesDeleted(h.fromLineNumber,h.toLineNumber)),s=!0;break}case 4:{const h=d.takeCount(u.detail.length),f=this._lines.onModelLinesInserted(a,u.fromLineNumber,u.toLineNumber,h);f!==null&&(i.emitViewEvent(f),this.viewLayout.onLinesInserted(f.fromLineNumber,f.toLineNumber)),s=!0;break}case 2:{const h=d.dequeue(),[f,g,m,p]=this._lines.onModelLineChanged(a,u.lineNumber,h);r=f,g&&i.emitViewEvent(g),m&&(i.emitViewEvent(m),this.viewLayout.onLinesInserted(m.fromLineNumber,m.toLineNumber)),p&&(i.emitViewEvent(p),this.viewLayout.onLinesDeleted(p.fromLineNumber,p.toLineNumber));break}case 5:break}a!==null&&this._lines.acceptVersionId(a),this.viewLayout.onHeightMaybeChanged(),!s&&r&&(i.emitViewEvent(new Gy),i.emitViewEvent(new bf(null)),this._cursor.onLineMappingChanged(i),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}const t=this._viewportStart.isValid;if(this._viewportStart.invalidate(),this._configuration.setModelLineCount(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&t){const i=this.model._getTrackedRange(this._viewportStart.modelTrackedRange);if(i){const s=this.coordinatesConverter.convertModelPositionToViewPosition(i.getStartPosition()),r=this.viewLayout.getVerticalOffsetForLineNumber(s.lineNumber);this.viewLayout.setScrollPosition({scrollTop:r+this._viewportStart.startLineDelta},1)}}try{const i=this._eventDispatcher.beginEmitViewEvents();e instanceof dg&&i.emitOutgoingEvent(new EOe(e.contentChangedEvent)),this._cursor.onModelContentChanged(i,e)}finally{this._eventDispatcher.endEmitViewEvents()}this._handleVisibleLinesChanged()})),this._register(this.model.onDidChangeTokens(e=>{const t=[];for(let i=0,s=e.ranges.length;i<s;i++){const r=e.ranges[i],o=this.coordinatesConverter.convertModelPositionToViewPosition(new pe(r.fromLineNumber,1)).lineNumber,a=this.coordinatesConverter.convertModelPositionToViewPosition(new pe(r.toLineNumber,this.model.getLineMaxColumn(r.toLineNumber))).lineNumber;t[i]={fromLineNumber:o,toLineNumber:a}}this._eventDispatcher.emitSingleViewEvent(new wOe(t)),this._eventDispatcher.emitOutgoingEvent(new ROe(e))})),this._register(this.model.onDidChangeLanguageConfiguration(e=>{this._eventDispatcher.emitSingleViewEvent(new bOe),this.cursorConfig=new Nm(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new MOe(e))})),this._register(this.model.onDidChangeLanguage(e=>{this.cursorConfig=new Nm(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new IOe(e))})),this._register(this.model.onDidChangeOptions(e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const t=this._eventDispatcher.beginEmitViewEvents();t.emitViewEvent(new Zy),t.emitViewEvent(new Gy),t.emitViewEvent(new bf(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new Nm(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new NOe(e))})),this._register(this.model.onDidChangeDecorations(e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new bf(e)),this._eventDispatcher.emitOutgoingEvent(new DOe(e))}))}setHiddenAreas(e,t){var i;this.hiddenAreasModel.setHiddenAreas(t,e);const s=this.hiddenAreasModel.getMergedRanges();if(s===this.previousHiddenAreas)return;this.previousHiddenAreas=s;const r=this._captureStableViewport();let o=!1;try{const a=this._eventDispatcher.beginEmitViewEvents();o=this._lines.setHiddenAreas(s),o&&(a.emitViewEvent(new Zy),a.emitViewEvent(new Gy),a.emitViewEvent(new bf(null)),this._cursor.onLineMappingChanged(a),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged());const l=(i=r.viewportStartModelPosition)===null||i===void 0?void 0:i.lineNumber;l&&s.some(d=>d.startLineNumber<=l&&l<=d.endLineNumber)||r.recoverViewportStart(this.coordinatesConverter,this.viewLayout)}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),o&&this._eventDispatcher.emitOutgoingEvent(new xOe)}getVisibleRangesPlusViewportAboveBelow(){const e=this._configuration.options.get(145),t=this._configuration.options.get(67),i=Math.max(20,Math.round(e.height/t)),s=this.viewLayout.getLinesViewportData(),r=Math.max(1,s.completelyVisibleStartLineNumber-i),o=Math.min(this.getLineCount(),s.completelyVisibleEndLineNumber+i);return this._toModelVisibleRanges(new te(r,this.getLineMinColumn(r),o,this.getLineMaxColumn(o)))}getVisibleRanges(){const e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}getHiddenAreas(){return this._lines.getHiddenAreas()}_toModelVisibleRanges(e){const t=this.coordinatesConverter.convertViewRangeToModelRange(e),i=this._lines.getHiddenAreas();if(i.length===0)return[t];const s=[];let r=0,o=t.startLineNumber,a=t.startColumn;const l=t.endLineNumber,c=t.endColumn;for(let d=0,u=i.length;d<u;d++){const h=i[d].startLineNumber,f=i[d].endLineNumber;f<o||h>l||(o<h&&(s[r++]=new te(o,a,h-1,this.model.getLineMaxColumn(h-1))),o=f+1,a=1)}return(o<l||o===l&&a<c)&&(s[r++]=new te(o,a,l,c)),s}getCompletelyVisibleViewRange(){const e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,i=e.completelyVisibleEndLineNumber;return new te(t,this.getLineMinColumn(t),i,this.getLineMaxColumn(i))}getCompletelyVisibleViewRangeAtScrollTop(e){const t=this.viewLayout.getLinesViewportDataAtScrollTop(e),i=t.completelyVisibleStartLineNumber,s=t.completelyVisibleEndLineNumber;return new te(i,this.getLineMinColumn(i),s,this.getLineMaxColumn(s))}saveState(){const e=this.viewLayout.saveState(),t=e.scrollTop,i=this.viewLayout.getLineNumberAtVerticalOffset(t),s=this.coordinatesConverter.convertViewPositionToModelPosition(new pe(i,this.getLineMinColumn(i))),r=this.viewLayout.getVerticalOffsetForLineNumber(i)-t;return{scrollLeft:e.scrollLeft,firstPosition:s,firstPositionDeltaTop:r}}reduceRestoreState(e){if(typeof e.firstPosition>"u")return this._reduceRestoreStateCompatibility(e);const t=this.model.validatePosition(e.firstPosition),i=this.coordinatesConverter.convertModelPositionToViewPosition(t),s=this.viewLayout.getVerticalOffsetForLineNumber(i.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:s}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,i){this._viewportStart.update(this,e)}getActiveIndentGuide(e,t,i){return this._lines.getActiveIndentGuide(e,t,i)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getBracketGuidesInRangeByLine(e,t,i,s){return this._lines.getViewLinesBracketGuides(e,t,i,s)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){const t=fo(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=sm(this.getLineContent(e));return t===-1?0:t+2}getMinimapDecorationsInRange(e){return this._decorations.getMinimapDecorationsInRange(e)}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewportViewLineRenderingData(e,t){const s=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return this._getViewLineRenderingData(t,s)}getViewLineRenderingData(e){const t=this._decorations.getInlineDecorationsOnLine(e);return this._getViewLineRenderingData(e,t)}_getViewLineRenderingData(e,t){const i=this.model.mightContainRTL(),s=this.model.mightContainNonBasicASCII(),r=this.getTabSize(),o=this._lines.getViewLineData(e);return o.inlineDecorations&&(t=[...t,...o.inlineDecorations.map(a=>a.toInlineDecoration(e))]),new Po(o.minColumn,o.maxColumn,o.content,o.continuesWithWrappedLine,i,s,o.tokens,t,r,o.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,i){const s=this._lines.getViewLinesData(e,t,i);return new j4e(this.getTabSize(),s)}getAllOverviewRulerDecorations(e){const t=this.model.getOverviewRulerDecorations(this._editorId,fL(this._configuration.options)),i=new rZe;for(const s of t){const r=s.options,o=r.overviewRuler;if(!o)continue;const a=o.position;if(a===0)continue;const l=o.getColor(e.value),c=this.coordinatesConverter.getViewLineNumberOfModelPosition(s.range.startLineNumber,s.range.startColumn),d=this.coordinatesConverter.getViewLineNumberOfModelPosition(s.range.endLineNumber,s.range.endColumn);i.accept(l,r.zIndex,c,d,a)}return i.asArray}_invalidateDecorationsColorCache(){const e=this.model.getOverviewRulerDecorations();for(const t of e){const i=t.options.overviewRuler;i?.invalidateCachedColor();const s=t.options.minimap;s?.invalidateCachedColor()}}getValueInRange(e,t){const i=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(i,t)}getValueLengthInRange(e,t){const i=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueLengthInRange(i,t)}modifyPosition(e,t){const i=this.coordinatesConverter.convertViewPositionToModelPosition(e),s=this.model.modifyPosition(i,t);return this.coordinatesConverter.convertModelPositionToViewPosition(s)}deduceModelPositionRelativeToViewPosition(e,t,i){const s=this.coordinatesConverter.convertViewPositionToModelPosition(e);this.model.getEOL().length===2&&(t<0?t-=i:t+=i);const o=this.model.getOffsetAt(s)+t;return this.model.getPositionAt(o)}getPlainTextToCopy(e,t,i){const s=i?`\r
`:this.model.getEOL();e=e.slice(0),e.sort(te.compareRangesUsingStarts);let r=!1,o=!1;for(const l of e)l.isEmpty()?r=!0:o=!0;if(!o){if(!t)return"";const l=e.map(d=>d.startLineNumber);let c="";for(let d=0;d<l.length;d++)d>0&&l[d-1]===l[d]||(c+=this.model.getLineContent(l[d])+s);return c}if(r&&t){const l=[];let c=0;for(const d of e){const u=d.startLineNumber;d.isEmpty()?u!==c&&l.push(this.model.getLineContent(u)):l.push(this.model.getValueInRange(d,i?2:0)),c=u}return l.length===1?l[0]:l}const a=[];for(const l of e)l.isEmpty()||a.push(this.model.getValueInRange(l,i?2:0));return a.length===1?a[0]:a}getRichTextToCopy(e,t){const i=this.model.getLanguageId();if(i===Va||e.length!==1)return null;let s=e[0];if(s.isEmpty()){if(!t)return null;const d=s.startLineNumber;s=new te(d,this.model.getLineMinColumn(d),d,this.model.getLineMaxColumn(d))}const r=this._configuration.options.get(50),o=this._getColorMap(),l=/[:;\\\/<>]/.test(r.fontFamily)||r.fontFamily===Wo.fontFamily;let c;return l?c=Wo.fontFamily:(c=r.fontFamily,c=c.replace(/"/g,"'"),/[,']/.test(c)||/[+ ]/.test(c)&&(c=`'${c}'`),c=`${c}, ${Wo.fontFamily}`),{mode:i,html:`<div style="color: ${o[1]};background-color: ${o[2]};font-family: ${c};font-weight: ${r.fontWeight};font-size: ${r.fontSize}px;line-height: ${r.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(s,o)+"</div>"}}_getHTMLToCopy(e,t){const i=e.startLineNumber,s=e.startColumn,r=e.endLineNumber,o=e.endColumn,a=this.getTabSize();let l="";for(let c=i;c<=r;c++){const d=this.model.tokenization.getLineTokens(c),u=d.getLineContent(),h=c===i?s-1:0,f=c===r?o-1:u.length;u===""?l+="<br>":l+=POe(u,d.inflate(),t,h,f,a,Mr)}return l}_getColorMap(){const e=Zn.getColorMap(),t=["#000000"];if(e)for(let i=1,s=e.length;i<s;i++)t[i]=Ce.Format.CSS.formatHex(e[i]);return t}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,i){return this._withViewEventsCollector(s=>this._cursor.setStates(s,e,t,i))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t,i=0){this._withViewEventsCollector(s=>this._cursor.setSelections(s,e,t,i))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector(t=>this._cursor.restoreState(t,e))}_executeCursorEdit(e){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new TOe);return}this._withViewEventsCollector(e)}executeEdits(e,t,i){this._executeCursorEdit(s=>this._cursor.executeEdits(s,e,t,i))}startComposition(){this._executeCursorEdit(e=>this._cursor.startComposition(e))}endComposition(e){this._executeCursorEdit(t=>this._cursor.endComposition(t,e))}type(e,t){this._executeCursorEdit(i=>this._cursor.type(i,e,t))}compositionType(e,t,i,s,r){this._executeCursorEdit(o=>this._cursor.compositionType(o,e,t,i,s,r))}paste(e,t,i,s){this._executeCursorEdit(r=>this._cursor.paste(r,e,t,i,s))}cut(e){this._executeCursorEdit(t=>this._cursor.cut(t,e))}executeCommand(e,t){this._executeCursorEdit(i=>this._cursor.executeCommand(i,e,t))}executeCommands(e,t){this._executeCursorEdit(i=>this._cursor.executeCommands(i,e,t))}revealAllCursors(e,t,i=!1){this._withViewEventsCollector(s=>this._cursor.revealAll(s,e,i,0,t,0))}revealPrimaryCursor(e,t,i=!1){this._withViewEventsCollector(s=>this._cursor.revealPrimary(s,e,i,0,t,0))}revealTopMostCursor(e){const t=this._cursor.getTopMostViewPosition(),i=new te(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(s=>s.emitViewEvent(new u_(e,!1,i,null,0,!0,0)))}revealBottomMostCursor(e){const t=this._cursor.getBottomMostViewPosition(),i=new te(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(s=>s.emitViewEvent(new u_(e,!1,i,null,0,!0,0)))}revealRange(e,t,i,s,r){this._withViewEventsCollector(o=>o.emitViewEvent(new u_(e,!1,i,null,s,t,r)))}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new SOe),this._eventDispatcher.emitOutgoingEvent(new kOe))}_withViewEventsCollector(e){try{const t=this._eventDispatcher.beginEmitViewEvents();return e(t)}finally{this._eventDispatcher.endEmitViewEvents()}}batchEvents(e){this._withViewEventsCollector(()=>{e()})}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}};class FP{static create(e){const t=e._setTrackedRange(null,new te(1,1,1,1),1);return new FP(e,1,!1,t,0)}get viewLineNumber(){return this._viewLineNumber}get isValid(){return this._isValid}get modelTrackedRange(){return this._modelTrackedRange}get startLineDelta(){return this._startLineDelta}constructor(e,t,i,s,r){this._model=e,this._viewLineNumber=t,this._isValid=i,this._modelTrackedRange=s,this._startLineDelta=r}dispose(){this._model._setTrackedRange(this._modelTrackedRange,null,1)}update(e,t){const i=e.coordinatesConverter.convertViewPositionToModelPosition(new pe(t,e.getLineMinColumn(t))),s=e.model._setTrackedRange(this._modelTrackedRange,new te(i.lineNumber,i.column,i.lineNumber,i.column),1),r=e.viewLayout.getVerticalOffsetForLineNumber(t),o=e.viewLayout.getCurrentScrollTop();this._viewLineNumber=t,this._isValid=!0,this._modelTrackedRange=s,this._startLineDelta=o-r}invalidate(){this._isValid=!1}}class rZe{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,t,i,s,r){const o=this._asMap[e];if(o){const a=o.data,l=a[a.length-3],c=a[a.length-1];if(l===r&&c+1>=i){s>c&&(a[a.length-1]=s);return}a.push(r,i,s)}else{const a=new $_(e,t,[r,i,s]);this._asMap[e]=a,this.asArray.push(a)}}}class oZe{constructor(){this.hiddenAreas=new Map,this.shouldRecompute=!1,this.ranges=[]}setHiddenAreas(e,t){const i=this.hiddenAreas.get(e);i&&pY(i,t)||(this.hiddenAreas.set(e,t),this.shouldRecompute=!0)}getMergedRanges(){if(!this.shouldRecompute)return this.ranges;this.shouldRecompute=!1;const e=Array.from(this.hiddenAreas.values()).reduce((t,i)=>aZe(t,i),[]);return pY(this.ranges,e)?this.ranges:(this.ranges=e,this.ranges)}}function aZe(n,e){const t=[];let i=0,s=0;for(;i<n.length&&s<e.length;){const r=n[i],o=e[s];if(r.endLineNumber<o.startLineNumber-1)t.push(n[i++]);else if(o.endLineNumber<r.startLineNumber-1)t.push(e[s++]);else{const a=Math.min(r.startLineNumber,o.startLineNumber),l=Math.max(r.endLineNumber,o.endLineNumber);t.push(new te(a,1,l,1)),i++,s++}}for(;i<n.length;)t.push(n[i++]);for(;s<e.length;)t.push(e[s++]);return t}function pY(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].equalsRange(e[t]))return!1;return!0}class bY{constructor(e,t){this.viewportStartModelPosition=e,this.startLineDelta=t}recoverViewportStart(e,t){if(!this.viewportStartModelPosition)return;const i=e.convertModelPositionToViewPosition(this.viewportStartModelPosition),s=t.getVerticalOffsetForLineNumber(i.lineNumber);t.setScrollPosition({scrollTop:s+this.startLineDelta},1)}}class Tw{constructor(...e){this._entries=new Map;for(const[t,i]of e)this.set(t,i)}set(e,t){const i=this._entries.get(e);return this._entries.set(e,t),i}get(e){return this._entries.get(e)}}var a1;(function(n){n[n.Ignore=0]="Ignore",n[n.Info=1]="Info",n[n.Warning=2]="Warning",n[n.Error=3]="Error"})(a1||(a1={}));(function(n){const e="error",t="warning",i="warn",s="info",r="ignore";function o(l){return l?sp(e,l)?n.Error:sp(t,l)||sp(i,l)?n.Warning:sp(s,l)?n.Info:n.Ignore:n.Ignore}n.fromValue=o;function a(l){switch(l){case n.Error:return e;case n.Warning:return t;case n.Info:return s;default:return r}}n.toString=a})(a1||(a1={}));const Jn=a1;var Tse=Jn;const Rr=ri("notificationService");class lZe{}var cZe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},td=function(n,e){return function(t,i){e(t,i,n)}},If;let l1=If=class extends Le{get isSimpleWidget(){return this._configuration.isSimpleWidget}get contextMenuId(){return this._configuration.contextMenuId}constructor(e,t,i,s,r,o,a,l,c,d,u,h){var f,g;super(),this.languageConfigurationService=u,this._deliveryQueue=lNe(),this._contributions=this._register(new IVe),this._onDidDispose=this._register(new ue),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new ue({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new ue({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new ue({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new ue({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new ue({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeModelTokens=this._register(new ue({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelTokens=this._onDidChangeModelTokens.event,this._onDidChangeConfiguration=this._register(new ue({deliveryQueue:this._deliveryQueue})),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onWillChangeModel=this._register(new ue({deliveryQueue:this._deliveryQueue})),this.onWillChangeModel=this._onWillChangeModel.event,this._onDidChangeModel=this._register(new ue({deliveryQueue:this._deliveryQueue})),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new ue({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new ue({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new or(this._contributions,this._deliveryQueue)),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new ue({deliveryQueue:this._deliveryQueue})),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new vY({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new vY({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new or(this._contributions,this._deliveryQueue)),this.onWillType=this._onWillType.event,this._onDidType=this._register(new or(this._contributions,this._deliveryQueue)),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new or(this._contributions,this._deliveryQueue)),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new or(this._contributions,this._deliveryQueue)),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new or(this._contributions,this._deliveryQueue)),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new or(this._contributions,this._deliveryQueue)),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new or(this._contributions,this._deliveryQueue)),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new or(this._contributions,this._deliveryQueue)),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new or(this._contributions,this._deliveryQueue)),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new or(this._contributions,this._deliveryQueue)),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onDropIntoEditor=this._register(new or(this._contributions,this._deliveryQueue)),this.onDropIntoEditor=this._onDropIntoEditor.event,this._onContextMenu=this._register(new or(this._contributions,this._deliveryQueue)),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new or(this._contributions,this._deliveryQueue)),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new or(this._contributions,this._deliveryQueue)),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new or(this._contributions,this._deliveryQueue)),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new or(this._contributions,this._deliveryQueue)),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new or(this._contributions,this._deliveryQueue)),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new ue({deliveryQueue:this._deliveryQueue})),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new ue({deliveryQueue:this._deliveryQueue})),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new ue({deliveryQueue:this._deliveryQueue})),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new ue({deliveryQueue:this._deliveryQueue})),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._updateCounter=0,this._onBeginUpdate=this._register(new ue),this.onBeginUpdate=this._onBeginUpdate.event,this._onEndUpdate=this._register(new ue),this.onEndUpdate=this._onEndUpdate.event,this._actions=new Map,this._bannerDomNode=null,this._dropIntoEditorDecorations=this.createDecorationsCollection(),r.willCreateCodeEditor();const m={...t};this._domElement=e,this._overflowWidgetsDomNode=m.overflowWidgetsDomNode,delete m.overflowWidgetsDomNode,this._id=++dZe,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this._telemetryData=i.telemetryData,this._configuration=this._register(this._createConfiguration(i.isSimpleWidget||!1,(f=i.contextMenuId)!==null&&f!==void 0?f:i.isSimpleWidget?X.SimpleEditorContext:X.EditorContext,m,d)),this._register(this._configuration.onDidChange(w=>{this._onDidChangeConfiguration.fire(w);const v=this._configuration.options;if(w.hasChanged(145)){const _=v.get(145);this._onDidLayoutChange.fire(_)}})),this._contextKeyService=this._register(a.createScoped(this._domElement)),this._notificationService=c,this._codeEditorService=r,this._commandService=o,this._themeService=l,this._register(new hZe(this,this._contextKeyService)),this._register(new fZe(this,this._contextKeyService,h)),this._instantiationService=this._register(s.createChild(new Tw([oi,this._contextKeyService]))),this._modelData=null,this._focusTracker=new gZe(e,this._overflowWidgetsDomNode),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={},this._glyphMarginWidgets={};let p;Array.isArray(i.contributions)?p=i.contributions:p=Tp.getEditorContributions(),this._contributions.initialize(this,p,this._instantiationService);for(const w of Tp.getEditorActions()){if(this._actions.has(w.id)){gi(new Error(`Cannot have two actions with the same id ${w.id}`));continue}const v=new sse(w.id,w.label,w.alias,w.metadata,(g=w.precondition)!==null&&g!==void 0?g:void 0,_=>this._instantiationService.invokeFunction(y=>Promise.resolve(w.runEditorCommand(y,this,_))),this._contextKeyService);this._actions.set(v.id,v)}const b=()=>!this._configuration.options.get(91)&&this._configuration.options.get(36).enabled;this._register(new K5e(this._domElement,{onDragOver:w=>{if(!b())return;const v=this.getTargetAtClientPoint(w.clientX,w.clientY);v?.position&&this.showDropIndicatorAt(v.position)},onDrop:async w=>{if(!b()||(this.removeDropIndicator(),!w.dataTransfer))return;const v=this.getTargetAtClientPoint(w.clientX,w.clientY);v?.position&&this._onDropIntoEditor.fire({position:v.position,event:w})},onDragLeave:()=>{this.removeDropIndicator()},onDragEnd:()=>{this.removeDropIndicator()}})),this._codeEditorService.addCodeEditor(this)}writeScreenReaderContent(e){var t;(t=this._modelData)===null||t===void 0||t.view.writeScreenReaderContent(e)}_createConfiguration(e,t,i,s){return new T3(e,t,i,this._domElement,s)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return J2.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose(),this._actions.clear(),this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e||{})}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?En.getWordAtPosition(this._modelData.model,this._configuration.options.get(131),this._configuration.options.get(130),e):null}getValue(e=null){if(!this._modelData)return"";const t=!!(e&&e.preserveBOM);let i=0;return e&&e.lineEnding&&e.lineEnding===`
`?i=1:e&&e.lineEnding&&e.lineEnding===`\r
`&&(i=2),this._modelData.model.getValue(i,t)}setValue(e){try{if(this._beginUpdate(),!this._modelData)return;this._modelData.model.setValue(e)}finally{this._endUpdate()}}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){var t;try{this._beginUpdate();const i=e;if(this._modelData===null&&i===null||this._modelData&&this._modelData.model===i)return;const s={oldModelUrl:((t=this._modelData)===null||t===void 0?void 0:t.model.uri)||null,newModelUrl:i?.uri||null};this._onWillChangeModel.fire(s);const r=this.hasTextFocus(),o=this._detachModel();this._attachModel(i),r&&this.hasModel()&&this.focus(),this._removeDecorationTypes(),this._onDidChangeModel.fire(s),this._postDetachModelCleanup(o),this._contributionsDisposable=this._contributions.onAfterModelAttached()}finally{this._endUpdate()}}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(const e in this._decorationTypeSubtypes){const t=this._decorationTypeSubtypes[e];for(const i in t)this._removeDecorationType(e+"-"+i)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetAfterPosition(e,t,i,s){const r=e.model.validatePosition({lineNumber:t,column:i}),o=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(r);return e.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(o.lineNumber,s)}getTopForLineNumber(e,t=!1){return this._modelData?If._getVerticalOffsetForPosition(this._modelData,e,1,t):-1}getTopForPosition(e,t){return this._modelData?If._getVerticalOffsetForPosition(this._modelData,e,t,!1):-1}static _getVerticalOffsetForPosition(e,t,i,s=!1){const r=e.model.validatePosition({lineNumber:t,column:i}),o=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(r);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(o.lineNumber,s)}getBottomForLineNumber(e,t=!1){return this._modelData?If._getVerticalOffsetAfterPosition(this._modelData,e,1,t):-1}setHiddenAreas(e,t){var i;(i=this._modelData)===null||i===void 0||i.viewModel.setHiddenAreas(e.map(s=>te.lift(s)),t)}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const t=this._modelData.model.validatePosition(e),i=this._modelData.model.getOptions().tabSize;return ns.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,i)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e,t="api"){if(this._modelData){if(!pe.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,i,s){if(!this._modelData)return;if(!te.isIRange(e))throw new Error("Invalid arguments");const r=this._modelData.model.validateRange(e),o=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(r);this._modelData.viewModel.revealRange("api",i,o,t,s)}revealLine(e,t=0){this._revealLine(e,0,t)}revealLineInCenter(e,t=0){this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._revealLine(e,2,t)}revealLineNearTop(e,t=0){this._revealLine(e,5,t)}_revealLine(e,t,i){if(typeof e!="number")throw new Error("Invalid arguments");this._sendRevealRange(new te(e,1,e,1),t,!1,i)}revealPosition(e,t=0){this._revealPosition(e,0,!0,t)}revealPositionInCenter(e,t=0){this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._revealPosition(e,2,!0,t)}revealPositionNearTop(e,t=0){this._revealPosition(e,5,!0,t)}_revealPosition(e,t,i,s){if(!pe.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new te(e.lineNumber,e.column,e.lineNumber,e.column),t,i,s)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e,t="api"){const i=Ii.isISelection(e),s=te.isIRange(e);if(!i&&!s)throw new Error("Invalid arguments");if(i)this._setSelectionImpl(e,t);else if(s){const r={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(r,t)}}_setSelectionImpl(e,t){if(!this._modelData)return;const i=new Ii(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections(t,[i])}revealLines(e,t,i=0){this._revealLines(e,t,0,i)}revealLinesInCenter(e,t,i=0){this._revealLines(e,t,1,i)}revealLinesInCenterIfOutsideViewport(e,t,i=0){this._revealLines(e,t,2,i)}revealLinesNearTop(e,t,i=0){this._revealLines(e,t,5,i)}_revealLines(e,t,i,s){if(typeof e!="number"||typeof t!="number")throw new Error("Invalid arguments");this._sendRevealRange(new te(e,1,t,1),i,!1,s)}revealRange(e,t=0,i=!1,s=!0){this._revealRange(e,i?1:0,s,t)}revealRangeInCenter(e,t=0){this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._revealRange(e,2,!0,t)}revealRangeNearTop(e,t=0){this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._revealRange(e,6,!0,t)}revealRangeAtTop(e,t=0){this._revealRange(e,3,!0,t)}_revealRange(e,t,i,s){if(!te.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(te.lift(e),t,i,s)}setSelections(e,t="api",i=0){if(this._modelData){if(!e||e.length===0)throw new Error("Invalid arguments");for(let s=0,r=e.length;s<r;s++)if(!Ii.isISelection(e[s]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,i)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e,t=1){this._modelData&&this._modelData.viewModel.viewLayout.setScrollPosition(e,t)}hasPendingScrollAnimation(){return this._modelData?this._modelData.viewModel.viewLayout.hasPendingScrollAnimation():!1}saveViewState(){if(!this._modelData)return null;const e=this._contributions.saveViewState(),t=this._modelData.viewModel.saveCursorState(),i=this._modelData.viewModel.saveState();return{cursorState:t,viewState:i,contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const t=e;if(t&&t.cursorState&&t.viewState){const i=t.cursorState;Array.isArray(i)?i.length>0&&this._modelData.viewModel.restoreCursorState(i):this._modelData.viewModel.restoreCursorState([i]),this._contributions.restoreViewState(t.contributionsState||{});const s=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(s)}}handleInitialized(){var e;(e=this._getViewModel())===null||e===void 0||e.visibleLinesStabilized()}getContribution(e){return this._contributions.get(e)}getActions(){return Array.from(this._actions.values())}getSupportedActions(){let e=this.getActions();return e=e.filter(t=>t.isSupported()),e}getAction(e){return this._actions.get(e)||null}trigger(e,t,i){i=i||{};try{switch(this._beginUpdate(),t){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(e);return;case"type":{const r=i;this._type(e,r.text||"");return}case"replacePreviousChar":{const r=i;this._compositionType(e,r.text||"",r.replaceCharCnt||0,0,0);return}case"compositionType":{const r=i;this._compositionType(e,r.text||"",r.replacePrevCharCnt||0,r.replaceNextCharCnt||0,r.positionDelta||0);return}case"paste":{const r=i;this._paste(e,r.text||"",r.pasteOnNewLine||!1,r.multicursorText||null,r.mode||null,r.clipboardEvent);return}case"cut":this._cut(e);return}const s=this.getAction(t);if(s){Promise.resolve(s.run(i)).then(void 0,gi);return}if(!this._modelData||this._triggerEditorCommand(e,t,i))return;this._triggerCommand(t,i)}finally{this._endUpdate()}}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){!this._modelData||t.length===0||(e==="keyboard"&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),e==="keyboard"&&this._onDidType.fire(t))}_compositionType(e,t,i,s,r){this._modelData&&this._modelData.viewModel.compositionType(t,i,s,r,e)}_paste(e,t,i,s,r,o){if(!this._modelData)return;const a=this._modelData.viewModel,l=a.getSelection().getStartPosition();a.paste(t,i,s,e);const c=a.getSelection().getStartPosition();e==="keyboard"&&this._onDidPaste.fire({clipboardEvent:o,range:new te(l.lineNumber,l.column,c.lineNumber,c.column),languageId:r})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,i){const s=Tp.getEditorCommand(t);return s?(i=i||{},i.source=e,this._instantiationService.invokeFunction(r=>{Promise.resolve(s.runEditorCommand(r,this,i)).then(void 0,gi)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(91)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(91)?!1:(this._modelData.model.popStackElement(),!0)}executeEdits(e,t,i){if(!this._modelData||this._configuration.options.get(91))return!1;let s;return i?Array.isArray(i)?s=()=>i:s=i:s=()=>null,this._modelData.viewModel.executeEdits(e,t,s),!0}executeCommand(e,t){this._modelData&&this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){this._modelData&&this._modelData.viewModel.executeCommands(t,e)}createDecorationsCollection(e){return new mZe(this,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,fL(this._configuration.options)):null}getDecorationsInRange(e){return this._modelData?this._modelData.model.getDecorationsInRange(e,this._id,fL(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?e.length===0&&t.length===0?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){!this._modelData||e.length===0||this._modelData.model.changeDecorations(t=>{t.deltaDecorations(e,[])})}removeDecorationsByType(e){const t=this._decorationTypeKeysToIds[e];t&&this.changeDecorations(i=>i.deltaDecorations(t,[])),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(145)}createOverviewRuler(e){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(e)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarPointerDown(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateScrollFromMouseWheelEvent(e)}layout(e,t=!1){this._configuration.observeContainer(e),t||this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id:"+e.getId()),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const i=this._contentWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(i)}}removeContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const i=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(i)}}addOverlayWidget(e){const t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const i=this._overlayWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(i)}}removeOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const i=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(i)}}addGlyphMarginWidget(e){const t={widget:e,position:e.getPosition()};this._glyphMarginWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a glyph margin widget with the same id."),this._glyphMarginWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addGlyphMarginWidget(t)}layoutGlyphMarginWidget(e){const t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){const i=this._glyphMarginWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutGlyphMarginWidget(i)}}removeGlyphMarginWidget(e){const t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){const i=this._glyphMarginWidgets[t];delete this._glyphMarginWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeGlyphMarginWidget(i)}}changeViewZones(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(e,t)}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;const t=this._modelData.model.validatePosition(e),i=this._configuration.options,s=i.get(145),r=If._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),o=this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+s.glyphMarginWidth+s.lineNumbersWidth+s.decorationsWidth-this.getScrollLeft();return{top:r,left:o,height:i.get(67)}}getOffsetForColumn(e,t){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(e,t)}render(e=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.viewModel.batchEvents(()=>{this._modelData.view.render(!0,e)})}setAriaOptions(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(e)}applyFontInfo(e){$s(e,this._configuration.options.get(50))}setBanner(e,t){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),this._bannerDomNode=e,this._configuration.setReservedHeight(e?t:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(e){if(!e){this._modelData=null;return}const t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setModelLineCount(e.getLineCount());const i=e.onBeforeAttached(),s=new sZe(this._id,this._configuration,e,bP.create(pt(this._domElement)),NP.create(this._configuration.options),a=>po(pt(this._domElement),a),this.languageConfigurationService,this._themeService,i);t.push(e.onWillDispose(()=>this.setModel(null))),t.push(s.onEvent(a=>{switch(a.kind){case 0:this._onDidContentSizeChange.fire(a);break;case 1:this._editorTextFocus.setValue(a.hasFocus);break;case 2:this._onDidScrollChange.fire(a);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{if(a.reachedMaxCursorCount){const u=this.getOption(80),h=L("cursors.maximum","The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.",u);this._notificationService.prompt(Tse.Warning,h,[{label:"Find and Replace",run:()=>{this._commandService.executeCommand("editor.action.startFindReplaceAction")}},{label:L("goToSetting","Increase Multi Cursor Limit"),run:()=>{this._commandService.executeCommand("workbench.action.openSettings2",{query:"editor.multiCursorLimit"})}}])}const l=[];for(let u=0,h=a.selections.length;u<h;u++)l[u]=a.selections[u].getPosition();const c={position:l[0],secondaryPositions:l.slice(1),reason:a.reason,source:a.source};this._onDidChangeCursorPosition.fire(c);const d={selection:a.selections[0],secondarySelections:a.selections.slice(1),modelVersionId:a.modelVersionId,oldSelections:a.oldSelections,oldModelVersionId:a.oldModelVersionId,source:a.source,reason:a.reason};this._onDidChangeCursorSelection.fire(d);break}case 7:this._onDidChangeModelDecorations.fire(a.event);break;case 8:this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(a.event);break;case 9:this._onDidChangeModelLanguageConfiguration.fire(a.event);break;case 10:this._onDidChangeModelContent.fire(a.event);break;case 11:this._onDidChangeModelOptions.fire(a.event);break;case 12:this._onDidChangeModelTokens.fire(a.event);break}}));const[r,o]=this._createView(s);if(o){this._domElement.appendChild(r.domNode.domNode);let a=Object.keys(this._contentWidgets);for(let l=0,c=a.length;l<c;l++){const d=a[l];r.addContentWidget(this._contentWidgets[d])}a=Object.keys(this._overlayWidgets);for(let l=0,c=a.length;l<c;l++){const d=a[l];r.addOverlayWidget(this._overlayWidgets[d])}a=Object.keys(this._glyphMarginWidgets);for(let l=0,c=a.length;l<c;l++){const d=a[l];r.addGlyphMarginWidget(this._glyphMarginWidgets[d])}r.render(!1,!0),r.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new uZe(e,s,r,o,t,i)}_createView(e){let t;this.isSimpleWidget?t={paste:(r,o,a,l)=>{this._paste("keyboard",r,o,a,l)},type:r=>{this._type("keyboard",r)},compositionType:(r,o,a,l)=>{this._compositionType("keyboard",r,o,a,l)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:t={paste:(r,o,a,l)=>{const c={text:r,pasteOnNewLine:o,multicursorText:a,mode:l};this._commandService.executeCommand("paste",c)},type:r=>{const o={text:r};this._commandService.executeCommand("type",o)},compositionType:(r,o,a,l)=>{if(a||l){const c={text:r,replacePrevCharCnt:o,replaceNextCharCnt:a,positionDelta:l};this._commandService.executeCommand("compositionType",c)}else{const c={text:r,replaceCharCnt:o};this._commandService.executeCommand("replacePreviousChar",c)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const i=new K2(e.coordinatesConverter);return i.onKeyDown=r=>this._onKeyDown.fire(r),i.onKeyUp=r=>this._onKeyUp.fire(r),i.onContextMenu=r=>this._onContextMenu.fire(r),i.onMouseMove=r=>this._onMouseMove.fire(r),i.onMouseLeave=r=>this._onMouseLeave.fire(r),i.onMouseDown=r=>this._onMouseDown.fire(r),i.onMouseUp=r=>this._onMouseUp.fire(r),i.onMouseDrag=r=>this._onMouseDrag.fire(r),i.onMouseDrop=r=>this._onMouseDrop.fire(r),i.onMouseDropCanceled=r=>this._onMouseDropCanceled.fire(r),i.onMouseWheel=r=>this._onMouseWheel.fire(r),[new G3(t,this._configuration,this._themeService.getColorTheme(),e,i,this._overflowWidgetsDomNode,this._instantiationService),!0]}_postDetachModelCleanup(e){e?.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){var e;if((e=this._contributionsDisposable)===null||e===void 0||e.dispose(),this._contributionsDisposable=void 0,!this._modelData)return null;const t=this._modelData.model,i=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),i&&this._domElement.contains(i)&&this._domElement.removeChild(i),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),t}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return this._modelData!==null}showDropIndicatorAt(e){const t=[{range:new te(e.lineNumber,e.column,e.lineNumber,e.column),options:If.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(t),this.revealPosition(e,1)}removeDropIndicator(){this._dropIntoEditorDecorations.clear()}setContextValue(e,t){this._contextKeyService.createKey(e,t)}_beginUpdate(){this._updateCounter++,this._updateCounter===1&&this._onBeginUpdate.fire()}_endUpdate(){this._updateCounter--,this._updateCounter===0&&this._onEndUpdate.fire()}};l1.dropIntoEditorDecorationOptions=Qt.register({description:"workbench-dnd-target",className:"dnd-target"});l1=If=cZe([td(3,Si),td(4,Vn),td(5,eo),td(6,oi),td(7,Xo),td(8,Rr),td(9,Xl),td(10,ma),td(11,ei)],l1);let dZe=0,uZe=class{constructor(e,t,i,s,r,o){this.model=e,this.viewModel=t,this.view=i,this.hasRealView=s,this.listenersToRemove=r,this.attachedView=o}dispose(){Ns(this.listenersToRemove),this.model.onBeforeDetached(this.attachedView),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}};class vY extends Le{constructor(e){super(),this._emitterOptions=e,this._onDidChangeToTrue=this._register(new ue(this._emitterOptions)),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new ue(this._emitterOptions)),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const t=e?2:1;this._value!==t&&(this._value=t,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}}class or extends ue{constructor(e,t){super({deliveryQueue:t}),this._contributions=e}fire(e){this._contributions.onBeforeInteractionEvent(),super.fire(e)}}class hZe extends Le{constructor(e,t){super(),this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=Re.editorSimpleInput.bindTo(t),this._editorFocus=Re.focus.bindTo(t),this._textInputFocus=Re.textInputFocus.bindTo(t),this._editorTextFocus=Re.editorTextFocus.bindTo(t),this._tabMovesFocus=Re.tabMovesFocus.bindTo(t),this._editorReadonly=Re.readOnly.bindTo(t),this._inDiffEditor=Re.inDiffEditor.bindTo(t),this._editorColumnSelection=Re.columnSelection.bindTo(t),this._hasMultipleSelections=Re.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=Re.hasNonEmptySelection.bindTo(t),this._canUndo=Re.canUndo.bindTo(t),this._canRedo=Re.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._register(gL.onDidChangeTabFocus(i=>this._tabMovesFocus.set(i))),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._tabMovesFocus.set(gL.getTabFocusMode()),this._editorReadonly.set(e.get(91)),this._inDiffEditor.set(e.get(61)),this._editorColumnSelection.set(e.get(22))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(t=>!t.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(!!(e&&e.canUndo())),this._canRedo.set(!!(e&&e.canRedo()))}}class fZe extends Le{constructor(e,t,i){super(),this._editor=e,this._contextKeyService=t,this._languageFeaturesService=i,this._langId=Re.languageId.bindTo(t),this._hasCompletionItemProvider=Re.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=Re.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=Re.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=Re.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=Re.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=Re.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=Re.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=Re.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=Re.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=Re.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=Re.hasReferenceProvider.bindTo(t),this._hasRenameProvider=Re.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=Re.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=Re.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=Re.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=Re.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=Re.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=Re.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInEmbeddedEditor=Re.isInEmbeddedEditor.bindTo(t);const s=()=>this._update();this._register(e.onDidChangeModel(s)),this._register(e.onDidChangeModelLanguage(s)),this._register(i.completionProvider.onDidChange(s)),this._register(i.codeActionProvider.onDidChange(s)),this._register(i.codeLensProvider.onDidChange(s)),this._register(i.definitionProvider.onDidChange(s)),this._register(i.declarationProvider.onDidChange(s)),this._register(i.implementationProvider.onDidChange(s)),this._register(i.typeDefinitionProvider.onDidChange(s)),this._register(i.hoverProvider.onDidChange(s)),this._register(i.documentHighlightProvider.onDidChange(s)),this._register(i.documentSymbolProvider.onDidChange(s)),this._register(i.referenceProvider.onDidChange(s)),this._register(i.renameProvider.onDidChange(s)),this._register(i.documentFormattingEditProvider.onDidChange(s)),this._register(i.documentRangeFormattingEditProvider.onDidChange(s)),this._register(i.signatureHelpProvider.onDidChange(s)),this._register(i.inlayHintsProvider.onDidChange(s)),s()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInEmbeddedEditor.reset()})}_update(){const e=this._editor.getModel();if(!e){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(e)),this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(e)),this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(e)),this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(e)),this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(e)),this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(e)),this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(e)),this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(e)),this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(e)),this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(e)),this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(e)),this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(e)),this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(e)),this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(e)),this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(e)||this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(e).length+this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._isInEmbeddedEditor.set(e.uri.scheme===Mt.walkThroughSnippet||e.uri.scheme===Mt.vscodeChatCodeBlock)})}}class gZe extends Le{constructor(e,t){super(),this._onChange=this._register(new ue),this.onChange=this._onChange.event,this._hadFocus=void 0,this._hasDomElementFocus=!1,this._domFocusTracker=this._register(Ig(e)),this._overflowWidgetsDomNodeHasFocus=!1,this._register(this._domFocusTracker.onDidFocus(()=>{this._hasDomElementFocus=!0,this._update()})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasDomElementFocus=!1,this._update()})),t&&(this._overflowWidgetsDomNode=this._register(Ig(t)),this._register(this._overflowWidgetsDomNode.onDidFocus(()=>{this._overflowWidgetsDomNodeHasFocus=!0,this._update()})),this._register(this._overflowWidgetsDomNode.onDidBlur(()=>{this._overflowWidgetsDomNodeHasFocus=!1,this._update()})))}_update(){const e=this._hasDomElementFocus||this._overflowWidgetsDomNodeHasFocus;this._hadFocus!==e&&(this._hadFocus=e,this._onChange.fire(void 0))}hasFocus(){var e;return(e=this._hadFocus)!==null&&e!==void 0?e:!1}}class mZe{get length(){return this._decorationIds.length}constructor(e,t){this._editor=e,this._decorationIds=[],this._isChangingDecorations=!1,Array.isArray(t)&&t.length>0&&this.set(t)}onDidChange(e,t,i){return this._editor.onDidChangeModelDecorations(s=>{this._isChangingDecorations||e.call(t,s)},i)}getRange(e){return!this._editor.hasModel()||e>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[e])}getRanges(){if(!this._editor.hasModel())return[];const e=this._editor.getModel(),t=[];for(const i of this._decorationIds){const s=e.getDecorationRange(i);s&&t.push(s)}return t}has(e){return this._decorationIds.includes(e.id)}clear(){this._decorationIds.length!==0&&this.set([])}set(e){try{this._isChangingDecorations=!0,this._editor.changeDecorations(t=>{this._decorationIds=t.deltaDecorations(this._decorationIds,e)})}finally{this._isChangingDecorations=!1}return this._decorationIds}append(e){let t=[];try{this._isChangingDecorations=!0,this._editor.changeDecorations(i=>{t=i.deltaDecorations([],e),this._decorationIds=this._decorationIds.concat(t)})}finally{this._isChangingDecorations=!1}return t}}const pZe=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),bZe=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function _R(n){return pZe+encodeURIComponent(n.toString())+bZe}const vZe=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),_Ze=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function wZe(n){return vZe+encodeURIComponent(n.toString())+_Ze}zl((n,e)=>{const t=n.getColor(Td);t&&e.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${_R(t)}") repeat-x bottom left; }`);const i=n.getColor(Lr);i&&e.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${_R(i)}") repeat-x bottom left; }`);const s=n.getColor(ia);s&&e.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${_R(s)}") repeat-x bottom left; }`);const r=n.getColor(lWe);r&&e.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${wZe(r)}") no-repeat bottom left; }`);const o=n.getColor(HFe);o&&e.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${o.rgba.a}; }`)});const yZe=j("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hcDark:"#A0A0A0",hcLight:"#A0A0A0"},L("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets."));class SZe extends to{constructor(){super({id:"editor.action.jumpToBracket",label:L("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:Re.editorTextFocus,primary:3165,weight:100}})}run(e,t){var i;(i=Pa.get(t))===null||i===void 0||i.jumpToBracket()}}class CZe extends to{constructor(){super({id:"editor.action.selectToBracket",label:L("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,metadata:{description:cw("smartSelect.selectToBracketDescription","Select the text inside and including the brackets or curly braces"),args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(e,t,i){var s;let r=!0;i&&i.selectBrackets===!1&&(r=!1),(s=Pa.get(t))===null||s===void 0||s.selectToBracket(r)}}class LZe extends to{constructor(){super({id:"editor.action.removeBrackets",label:L("smartSelect.removeBrackets","Remove Brackets"),alias:"Remove Brackets",precondition:void 0,kbOpts:{kbExpr:Re.editorTextFocus,primary:2561,weight:100}})}run(e,t){var i;(i=Pa.get(t))===null||i===void 0||i.removeBrackets(this.id)}}class kZe{constructor(e,t,i){this.position=e,this.brackets=t,this.options=i}}class Pa extends Le{static get(e){return e.getContribution(Pa.ID)}constructor(e){super(),this._editor=e,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=this._editor.createDecorationsCollection(),this._updateBracketsSoon=this._register(new as(()=>this._updateBrackets(),50)),this._matchBrackets=this._editor.getOption(72),this._updateBracketsSoon.schedule(),this._register(e.onDidChangeCursorPosition(t=>{this._matchBrackets!=="never"&&this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelContent(t=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModel(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelLanguageConfiguration(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(72)&&(this._matchBrackets=this._editor.getOption(72),this._decorations.clear(),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())})),this._register(e.onDidBlurEditorWidget(()=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidFocusEditorWidget(()=>{this._updateBracketsSoon.schedule()}))}jumpToBracket(){if(!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getSelections().map(i=>{const s=i.getStartPosition(),r=e.bracketPairs.matchBracket(s);let o=null;if(r)r[0].containsPosition(s)&&!r[1].containsPosition(s)?o=r[1].getStartPosition():r[1].containsPosition(s)&&(o=r[0].getStartPosition());else{const a=e.bracketPairs.findEnclosingBrackets(s);if(a)o=a[1].getStartPosition();else{const l=e.bracketPairs.findNextBracket(s);l&&l.range&&(o=l.range.getStartPosition())}}return o?new Ii(o.lineNumber,o.column,o.lineNumber,o.column):new Ii(s.lineNumber,s.column,s.lineNumber,s.column)});this._editor.setSelections(t),this._editor.revealRange(t[0])}selectToBracket(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),i=[];this._editor.getSelections().forEach(s=>{const r=s.getStartPosition();let o=t.bracketPairs.matchBracket(r);if(!o&&(o=t.bracketPairs.findEnclosingBrackets(r),!o)){const c=t.bracketPairs.findNextBracket(r);c&&c.range&&(o=t.bracketPairs.matchBracket(c.range.getStartPosition()))}let a=null,l=null;if(o){o.sort(te.compareRangesUsingStarts);const[c,d]=o;if(a=e?c.getStartPosition():c.getEndPosition(),l=e?d.getEndPosition():d.getStartPosition(),d.containsPosition(r)){const u=a;a=l,l=u}}a&&l&&i.push(new Ii(a.lineNumber,a.column,l.lineNumber,l.column))}),i.length>0&&(this._editor.setSelections(i),this._editor.revealRange(i[0]))}removeBrackets(e){if(!this._editor.hasModel())return;const t=this._editor.getModel();this._editor.getSelections().forEach(i=>{const s=i.getPosition();let r=t.bracketPairs.matchBracket(s);r||(r=t.bracketPairs.findEnclosingBrackets(s)),r&&(this._editor.pushUndoStop(),this._editor.executeEdits(e,[{range:r[0],text:""},{range:r[1],text:""}]),this._editor.pushUndoStop())})}_updateBrackets(){if(this._matchBrackets==="never")return;this._recomputeBrackets();const e=[];let t=0;for(const i of this._lastBracketsData){const s=i.brackets;s&&(e[t++]={range:s[0],options:i.options},e[t++]={range:s[1],options:i.options})}this._decorations.set(e)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus()){this._lastBracketsData=[],this._lastVersionId=0;return}const e=this._editor.getSelections();if(e.length>100){this._lastBracketsData=[],this._lastVersionId=0;return}const t=this._editor.getModel(),i=t.getVersionId();let s=[];this._lastVersionId===i&&(s=this._lastBracketsData);const r=[];let o=0;for(let u=0,h=e.length;u<h;u++){const f=e[u];f.isEmpty()&&(r[o++]=f.getStartPosition())}r.length>1&&r.sort(pe.compare);const a=[];let l=0,c=0;const d=s.length;for(let u=0,h=r.length;u<h;u++){const f=r[u];for(;c<d&&s[c].position.isBefore(f);)c++;if(c<d&&s[c].position.equals(f))a[l++]=s[c];else{let g=t.bracketPairs.matchBracket(f,20),m=Pa._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;!g&&this._matchBrackets==="always"&&(g=t.bracketPairs.findEnclosingBrackets(f,20),m=Pa._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),a[l++]=new kZe(f,g,m)}}this._lastBracketsData=a,this._lastVersionId=i}}Pa.ID="editor.contrib.bracketMatchingController";Pa._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=Qt.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:ps(yZe),position:fa.Center}});Pa._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=Qt.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"});du(Pa.ID,Pa,1);rn(CZe);rn(SZe);rn(LZe);Wl.appendMenuItem(X.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:L({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2});const Dse=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let n;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?n=crypto.getRandomValues.bind(crypto):n=function(i){for(let s=0;s<i.length;s++)i[s]=Math.floor(Math.random()*256);return i};const e=new Uint8Array(16),t=[];for(let i=0;i<256;i++)t.push(i.toString(16).padStart(2,"0"));return function(){n(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let s=0,r="";return r+=t[e[s++]],r+=t[e[s++]],r+=t[e[s++]],r+=t[e[s++]],r+="-",r+=t[e[s++]],r+=t[e[s++]],r+="-",r+=t[e[s++]],r+=t[e[s++]],r+="-",r+=t[e[s++]],r+=t[e[s++]],r+="-",r+=t[e[s++]],r+=t[e[s++]],r+=t[e[s++]],r+=t[e[s++]],r+=t[e[s++]],r+=t[e[s++]],r}}();function VP(n){return{asString:async()=>n,asFile:()=>{},value:typeof n=="string"?n:void 0}}function xZe(n,e,t){const i={id:Dse(),name:n,uri:e,data:t};return{asString:async()=>"",asFile:()=>i,value:void 0}}class TZe{constructor(){this._entries=new Map}get size(){let e=0;for(const t of this._entries)e++;return e}has(e){return this._entries.has(this.toKey(e))}matches(e){const t=[...this._entries.keys()];return ci.some(this,([i,s])=>s.asFile())&&t.push("files"),Ise(RL(e),t)}get(e){var t;return(t=this._entries.get(this.toKey(e)))===null||t===void 0?void 0:t[0]}append(e,t){const i=this._entries.get(e);i?i.push(t):this._entries.set(this.toKey(e),[t])}replace(e,t){this._entries.set(this.toKey(e),[t])}delete(e){this._entries.delete(this.toKey(e))}*[Symbol.iterator](){for(const[e,t]of this._entries)for(const i of t)yield[e,i]}toKey(e){return RL(e)}}function RL(n){return n.toLowerCase()}function DZe(n,e){return Ise(RL(n),e.map(RL))}function Ise(n,e){if(n==="*/*")return e.length>0;if(e.includes(n))return!0;const t=n.match(/^([a-z]+)\/([a-z]+|\*)$/i);if(!t)return!1;const[i,s,r]=t;return r==="*"?e.some(o=>o.startsWith(s+"/")):!1}const $2=Object.freeze({create:n=>Ah(n.map(e=>e.toString())).join(`\r
`),split:n=>n.split(`\r
`),parse:n=>$2.split(n).filter(e=>!e.startsWith("#"))});class xr{constructor(e){this.value=e}equals(e){return this.value===e.value}contains(e){return this.equals(e)||this.value===""||e.value.startsWith(this.value+xr.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(...e){return new xr((this.value?[this.value,...e]:e).join(xr.sep))}}xr.sep=".";xr.None=new xr("@@none@@");xr.Empty=new xr("");const c1={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:_n.text,INTERNAL_URI_LIST:"application/vnd.code.uri-list"},_Y={EDITORS:"CodeEditors",FILES:"CodeFiles"};class IZe{}const MZe={DragAndDropContribution:"workbench.contributions.dragAndDrop"};Ss.add(MZe.DragAndDropContribution,new IZe);function Mse(n){const e=new TZe;for(const t of n.items){const i=t.type;if(t.kind==="string"){const s=new Promise(r=>t.getAsString(r));e.append(i,VP(s))}else if(t.kind==="file"){const s=t.getAsFile();s&&e.append(i,EZe(s))}}return e}function EZe(n){const e=n.path?Ft.parse(n.path):void 0;return xZe(n.name,e,async()=>new Uint8Array(await n.arrayBuffer()))}const NZe=Object.freeze([_Y.EDITORS,_Y.FILES,c1.RESOURCES,c1.INTERNAL_URI_LIST]);function RZe(n,e=!1){const t=Mse(n),i=t.get(c1.INTERNAL_URI_LIST);if(i)t.replace(_n.uriList,i);else if(e||!t.has(_n.uriList)){const s=[];for(const r of n.items){const o=r.getAsFile();if(o){const a=o.path;try{a?s.push(Ft.file(a).toString()):s.push(Ft.parse(o.name,!0).toString())}catch{}}}s.length&&t.replace(_n.uriList,VP($2.create(s)))}for(const s of NZe)t.delete(s);return t}const PP=ri("IWorkspaceEditService");class OP{constructor(e){this.metadata=e}static convert(e){return e.edits.map(t=>{if(Sh.is(t))return Sh.lift(t);if(Pp.is(t))return Pp.lift(t);throw new Error("Unsupported edit")})}}class Sh extends OP{static is(e){return e instanceof Sh?!0:Ha(e)&&Ft.isUri(e.resource)&&Ha(e.textEdit)}static lift(e){return e instanceof Sh?e:new Sh(e.resource,e.textEdit,e.versionId,e.metadata)}constructor(e,t,i=void 0,s){super(s),this.resource=e,this.textEdit=t,this.versionId=i}}class Pp extends OP{static is(e){return e instanceof Pp?!0:Ha(e)&&(!!e.newResource||!!e.oldResource)}static lift(e){return e instanceof Pp?e:new Pp(e.oldResource,e.newResource,e.options,e.metadata)}constructor(e,t,i={},s){super(s),this.oldResource=e,this.newResource=t,this.options=i}}class WZe{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const t=e.charCodeAt(0),i=this._value.charCodeAt(this._pos);return t-i}value(){return this._value[this._pos]}}class AZe{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?xV(e,this._value,0,e.length,this._from,this._to):uw(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class FZe{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let t=e.length-1;t>=0;t--,this._valueLen--){const i=this._value.charCodeAt(t);if(!(i===47||this._splitOnBackslash&&i===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){const t=this._value.charCodeAt(this._to);if(t===47||this._splitOnBackslash&&t===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?xV(e,this._value,0,e.length,this._from,this._to):uw(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class VZe{constructor(e,t){this._ignorePathCasing=e,this._ignoreQueryAndFragment=t,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new FZe(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(e)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return rH(e,this._value.scheme);if(this._states[this._stateIdx]===2)return rH(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return n3(e,this._value.query);if(this._states[this._stateIdx]===5)return n3(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class By{constructor(){this.height=1}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var e,t;return(t=(e=this.left)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}get heightRight(){var e,t;return(t=(e=this.right)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}}class g_{static forUris(e=()=>!1,t=()=>!1){return new g_(new VZe(e,t))}static forStrings(){return new g_(new WZe)}static forConfigKeys(){return new g_(new AZe)}constructor(e){this._iter=e}clear(){this._root=void 0}set(e,t){const i=this._iter.reset(e);let s;this._root||(this._root=new By,this._root.segment=i.value());const r=[];for(s=this._root;;){const a=i.cmp(s.segment);if(a>0)s.left||(s.left=new By,s.left.segment=i.value()),r.push([-1,s]),s=s.left;else if(a<0)s.right||(s.right=new By,s.right.segment=i.value()),r.push([1,s]),s=s.right;else if(i.hasNext())i.next(),s.mid||(s.mid=new By,s.mid.segment=i.value()),r.push([0,s]),s=s.mid;else break}const o=s.value;s.value=t,s.key=e;for(let a=r.length-1;a>=0;a--){const l=r[a][1];l.updateHeight();const c=l.balanceFactor();if(c<-1||c>1){const d=r[a][0],u=r[a+1][0];if(d===1&&u===1)r[a][1]=l.rotateLeft();else if(d===-1&&u===-1)r[a][1]=l.rotateRight();else if(d===1&&u===-1)l.right=r[a+1][1]=r[a+1][1].rotateRight(),r[a][1]=l.rotateLeft();else if(d===-1&&u===1)l.left=r[a+1][1]=r[a+1][1].rotateLeft(),r[a][1]=l.rotateRight();else throw new Error;if(a>0)switch(r[a-1][0]){case-1:r[a-1][1].left=r[a][1];break;case 1:r[a-1][1].right=r[a][1];break;case 0:r[a-1][1].mid=r[a][1];break}else this._root=r[0][1]}}return o}get(e){var t;return(t=this._getNode(e))===null||t===void 0?void 0:t.value}_getNode(e){const t=this._iter.reset(e);let i=this._root;for(;i;){const s=t.cmp(i.segment);if(s>0)i=i.left;else if(s<0)i=i.right;else if(t.hasNext())t.next(),i=i.mid;else break}return i}has(e){const t=this._getNode(e);return!(t?.value===void 0&&t?.mid===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){var i;const s=this._iter.reset(e),r=[];let o=this._root;for(;o;){const a=s.cmp(o.segment);if(a>0)r.push([-1,o]),o=o.left;else if(a<0)r.push([1,o]),o=o.right;else if(s.hasNext())s.next(),r.push([0,o]),o=o.mid;else break}if(o){if(t?(o.left=void 0,o.mid=void 0,o.right=void 0,o.height=1):(o.key=void 0,o.value=void 0),!o.mid&&!o.value)if(o.left&&o.right){const a=this._min(o.right);if(a.key){const{key:l,value:c,segment:d}=a;this._delete(a.key,!1),o.key=l,o.value=c,o.segment=d}}else{const a=(i=o.left)!==null&&i!==void 0?i:o.right;if(r.length>0){const[l,c]=r[r.length-1];switch(l){case-1:c.left=a;break;case 0:c.mid=a;break;case 1:c.right=a;break}}else this._root=a}for(let a=r.length-1;a>=0;a--){const l=r[a][1];l.updateHeight();const c=l.balanceFactor();if(c>1?(l.right.balanceFactor()>=0||(l.right=l.right.rotateRight()),r[a][1]=l.rotateLeft()):c<-1&&(l.left.balanceFactor()<=0||(l.left=l.left.rotateLeft()),r[a][1]=l.rotateRight()),a>0)switch(r[a-1][0]){case-1:r[a-1][1].left=r[a][1];break;case 1:r[a-1][1].right=r[a][1];break;case 0:r[a-1][1].mid=r[a][1];break}else this._root=r[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const t=this._iter.reset(e);let i=this._root,s;for(;i;){const r=t.cmp(i.segment);if(r>0)i=i.left;else if(r<0)i=i.right;else if(t.hasNext())t.next(),s=i.value||s,i=i.mid;else break}return i&&i.value||s}findSuperstr(e){return this._findSuperstrOrElement(e,!1)}_findSuperstrOrElement(e,t){const i=this._iter.reset(e);let s=this._root;for(;s;){const r=i.cmp(s.segment);if(r>0)s=s.left;else if(r<0)s=s.right;else if(i.hasNext())i.next(),s=s.mid;else return s.mid?this._entries(s.mid):t?s.value:void 0}}forEach(e){for(const[t,i]of this)e(i,t)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(e){const t=[];return this._dfsEntries(e,t),t[Symbol.iterator]()}_dfsEntries(e,t){e&&(e.left&&this._dfsEntries(e.left,t),e.value&&t.push([e.key,e.value]),e.mid&&this._dfsEntries(e.mid,t),e.right&&this._dfsEntries(e.right,t))}}const Q2=ri("contextService");class PZe{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}const OZe="code-workspace";L("codeWorkspace","Code Workspace");const ZZe="4064f6ec-cb38-4ad0-af64-ee6467e63c82";var ZP=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},d1=function(n,e){return function(t,i){e(t,i,n)}};class GP{async provideDocumentPasteEdits(e,t,i,s,r){const o=await this.getEdit(i,r);if(o)return{dispose(){},edits:[{insertText:o.insertText,title:o.title,kind:o.kind,handledMimeType:o.handledMimeType,yieldTo:o.yieldTo}]}}async provideDocumentDropEdits(e,t,i,s){const r=await this.getEdit(i,s);return r?[{insertText:r.insertText,title:r.title,kind:r.kind,handledMimeType:r.handledMimeType,yieldTo:r.yieldTo}]:void 0}}class Bh extends GP{constructor(){super(...arguments),this.kind=Bh.kind,this.dropMimeTypes=[_n.text],this.pasteMimeTypes=[_n.text]}async getEdit(e,t){const i=e.get(_n.text);if(!i||e.has(_n.uriList))return;const s=await i.asString();return{handledMimeType:_n.text,title:L("text.label","Insert Plain Text"),insertText:s,kind:this.kind}}}Bh.id="text";Bh.kind=new xr("text.plain");class Ese extends GP{constructor(){super(...arguments),this.kind=new xr("uri.absolute"),this.dropMimeTypes=[_n.uriList],this.pasteMimeTypes=[_n.uriList]}async getEdit(e,t){const i=await Nse(e);if(!i.length||t.isCancellationRequested)return;let s=0;const r=i.map(({uri:a,originalText:l})=>a.scheme===Mt.file?a.fsPath:(s++,l)).join(" ");let o;return s>0?o=i.length>1?L("defaultDropProvider.uriList.uris","Insert Uris"):L("defaultDropProvider.uriList.uri","Insert Uri"):o=i.length>1?L("defaultDropProvider.uriList.paths","Insert Paths"):L("defaultDropProvider.uriList.path","Insert Path"),{handledMimeType:_n.uriList,insertText:r,title:o,kind:this.kind}}}let WL=class extends GP{constructor(e){super(),this._workspaceContextService=e,this.kind=new xr("uri.relative"),this.dropMimeTypes=[_n.uriList],this.pasteMimeTypes=[_n.uriList]}async getEdit(e,t){const i=await Nse(e);if(!i.length||t.isCancellationRequested)return;const s=Wg(i.map(({uri:r})=>{const o=this._workspaceContextService.getWorkspaceFolder(r);return o?uPe(o.uri,r):void 0}));if(s.length)return{handledMimeType:_n.uriList,insertText:s.join(" "),title:i.length>1?L("defaultDropProvider.uriList.relativePaths","Insert Relative Paths"):L("defaultDropProvider.uriList.relativePath","Insert Relative Path"),kind:this.kind}}};WL=ZP([d1(0,Q2)],WL);class GZe{constructor(){this.kind=new xr("html"),this.pasteMimeTypes=["text/html"],this._yieldTo=[{mimeType:_n.text}]}async provideDocumentPasteEdits(e,t,i,s,r){var o;if(s.triggerKind!==U_.PasteAs&&!(!((o=s.only)===null||o===void 0)&&o.contains(this.kind)))return;const a=i.get("text/html"),l=await a?.asString();if(!(!l||r.isCancellationRequested))return{dispose(){},edits:[{insertText:l,yieldTo:this._yieldTo,title:L("pasteHtmlLabel","Insert HTML"),kind:this.kind}]}}}async function Nse(n){const e=n.get(_n.uriList);if(!e)return[];const t=await e.asString(),i=[];for(const s of $2.parse(t))try{i.push({uri:Ft.parse(s),originalText:s})}catch{}return i}let wY=class extends Le{constructor(e,t){super(),this._register(e.documentDropEditProvider.register("*",new Bh)),this._register(e.documentDropEditProvider.register("*",new Ese)),this._register(e.documentDropEditProvider.register("*",new WL(t)))}};wY=ZP([d1(0,ei),d1(1,Q2)],wY);let yY=class extends Le{constructor(e,t){super(),this._register(e.documentPasteEditProvider.register("*",new Bh)),this._register(e.documentPasteEditProvider.register("*",new Ese)),this._register(e.documentPasteEditProvider.register("*",new WL(t))),this._register(e.documentPasteEditProvider.register("*",new GZe))}};yY=ZP([d1(0,ei),d1(1,Q2)],yY);class La{constructor(){this.value="",this.pos=0}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};const e=this.pos;let t=0,i=this.value.charCodeAt(e),s;if(s=La._table[i],typeof s=="number")return this.pos+=1,{type:s,pos:e,len:1};if(La.isDigitCharacter(i)){s=8;do t+=1,i=this.value.charCodeAt(e+t);while(La.isDigitCharacter(i));return this.pos+=t,{type:s,pos:e,len:t}}if(La.isVariableCharacter(i)){s=9;do i=this.value.charCodeAt(e+ ++t);while(La.isVariableCharacter(i)||La.isDigitCharacter(i));return this.pos+=t,{type:s,pos:e,len:t}}s=10;do t+=1,i=this.value.charCodeAt(e+t);while(!isNaN(i)&&typeof La._table[i]>"u"&&!La.isDigitCharacter(i)&&!La.isVariableCharacter(i));return this.pos+=t,{type:s,pos:e,len:t}}}La._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13};class T0{constructor(){this._children=[]}appendChild(e){return e instanceof Da&&this._children[this._children.length-1]instanceof Da?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,t){const{parent:i}=e,s=i.children.indexOf(e),r=i.children.slice(0);r.splice(s,1,...t),i._children=r,function o(a,l){for(const c of a)c.parent=l,o(c.children,c)}(t,i)}get children(){return this._children}get rightMostDescendant(){return this._children.length>0?this._children[this._children.length-1].rightMostDescendant:this}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof eT)return e;e=e.parent}}toString(){return this.children.reduce((e,t)=>e+t.toString(),"")}len(){return 0}}class Da extends T0{constructor(e){super(),this.value=e}toString(){return this.value}len(){return this.value.length}clone(){return new Da(this.value)}}class Rse extends T0{}class dc extends Rse{static compareByIndex(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0}constructor(e){super(),this.index=e}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof q2?this._children[0]:void 0}clone(){const e=new dc(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}class q2 extends T0{constructor(){super(...arguments),this.options=[]}appendChild(e){return e instanceof Da&&(e.parent=this,this.options.push(e)),this}toString(){return this.options[0].value}len(){return this.options[0].len()}clone(){const e=new q2;return this.options.forEach(e.appendChild,e),e}}class BP extends T0{constructor(){super(...arguments),this.regexp=new RegExp("")}resolve(e){const t=this;let i=!1,s=e.replace(this.regexp,function(){return i=!0,t._replace(Array.prototype.slice.call(arguments,0,-2))});return!i&&this._children.some(r=>r instanceof fl&&!!r.elseValue)&&(s=this._replace([])),s}_replace(e){let t="";for(const i of this._children)if(i instanceof fl){let s=e[i.index]||"";s=i.resolve(s),t+=s}else t+=i.toString();return t}toString(){return""}clone(){const e=new BP;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(t=>t.clone()),e}}class fl extends T0{constructor(e,t,i,s){super(),this.index=e,this.shorthandName=t,this.ifValue=i,this.elseValue=s}resolve(e){return this.shorthandName==="upcase"?e?e.toLocaleUpperCase():"":this.shorthandName==="downcase"?e?e.toLocaleLowerCase():"":this.shorthandName==="capitalize"?e?e[0].toLocaleUpperCase()+e.substr(1):"":this.shorthandName==="pascalcase"?e?this._toPascalCase(e):"":this.shorthandName==="camelcase"?e?this._toCamelCase(e):"":e&&typeof this.ifValue=="string"?this.ifValue:!e&&typeof this.elseValue=="string"?this.elseValue:e||""}_toPascalCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map(i=>i.charAt(0).toUpperCase()+i.substr(1)).join(""):e}_toCamelCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map((i,s)=>s===0?i.charAt(0).toLowerCase()+i.substr(1):i.charAt(0).toUpperCase()+i.substr(1)).join(""):e}clone(){return new fl(this.index,this.shorthandName,this.ifValue,this.elseValue)}}class u1 extends Rse{constructor(e){super(),this.name=e}resolve(e){let t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),t!==void 0?(this._children=[new Da(t)],!0):!1}clone(){const e=new u1(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}function SY(n,e){const t=[...n];for(;t.length>0;){const i=t.shift();if(!e(i))break;t.unshift(...i.children)}}class eT extends T0{get placeholderInfo(){if(!this._placeholders){const e=[];let t;this.walk(function(i){return i instanceof dc&&(e.push(i),t=!t||t.index<i.index?i:t),!0}),this._placeholders={all:e,last:t}}return this._placeholders}get placeholders(){const{all:e}=this.placeholderInfo;return e}offset(e){let t=0,i=!1;return this.walk(s=>s===e?(i=!0,!1):(t+=s.len(),!0)),i?t:-1}fullLen(e){let t=0;return SY([e],i=>(t+=i.len(),!0)),t}enclosingPlaceholders(e){const t=[];let{parent:i}=e;for(;i;)i instanceof dc&&t.push(i),i=i.parent;return t}resolveVariables(e){return this.walk(t=>(t instanceof u1&&t.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,t){return this._placeholders=void 0,super.replace(e,t)}clone(){const e=new eT;return this._children=this.children.map(t=>t.clone()),e}walk(e){SY(this.children,e)}}class BZe{constructor(){this._scanner=new La,this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}parse(e,t,i){const s=new eT;return this.parseFragment(e,s),this.ensureFinalTabstop(s,i??!1,t??!1),s}parseFragment(e,t){const i=t.children.length;for(this._scanner.text(e),this._token=this._scanner.next();this._parse(t););const s=new Map,r=[];t.walk(l=>(l instanceof dc&&(l.isFinalTabstop?s.set(0,void 0):!s.has(l.index)&&l.children.length>0?s.set(l.index,l.children):r.push(l)),!0));const o=(l,c)=>{const d=s.get(l.index);if(!d)return;const u=new dc(l.index);u.transform=l.transform;for(const h of d){const f=h.clone();u.appendChild(f),f instanceof dc&&s.has(f.index)&&!c.has(f.index)&&(c.add(f.index),o(f,c),c.delete(f.index))}t.replace(l,[u])},a=new Set;for(const l of r)o(l,a);return t.children.slice(i)}ensureFinalTabstop(e,t,i){(t||i&&e.placeholders.length>0)&&(e.placeholders.find(r=>r.index===0)||e.appendChild(new dc(0)))}_accept(e,t){if(e===void 0||this._token.type===e){const i=t?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),i}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){const t=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){const s=this._scanner.next();if(s.type!==0&&s.type!==4&&s.type!==5)return!1}this._token=this._scanner.next()}const i=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),i}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let t;return(t=this._accept(5,!0))?(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new Da(t)),!0):!1}_parseTabstopOrVariableName(e){let t;const i=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new dc(Number(t)):new u1(t)),!0):this._backTo(i)}_parseComplexPlaceholder(e){let t;const i=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(i);const r=new dc(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new Da("${"+t+":")),r.children.forEach(e.appendChild,e),!0}else if(r.index>0&&this._accept(7)){const o=new q2;for(;;){if(this._parseChoiceElement(o)){if(this._accept(2))continue;if(this._accept(7)&&(r.appendChild(o),this._accept(4)))return e.appendChild(r),!0}return this._backTo(i),!1}}else return this._accept(6)?this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(i),!1):this._accept(4)?(e.appendChild(r),!0):this._backTo(i)}_parseChoiceElement(e){const t=this._token,i=[];for(;!(this._token.type===2||this._token.type===7);){let s;if((s=this._accept(5,!0))?s=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||s:s=this._accept(void 0,!0),!s)return this._backTo(t),!1;i.push(s)}return i.length===0?(this._backTo(t),!1):(e.appendChild(new Da(i.join(""))),!0)}_parseComplexVariable(e){let t;const i=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(i);const r=new u1(t);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new Da("${"+t+":")),r.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(i),!1):this._accept(4)?(e.appendChild(r),!0):this._backTo(i)}_parseTransform(e){const t=new BP;let i="",s="";for(;!this._accept(6);){let r;if(r=this._accept(5,!0)){r=this._accept(6,!0)||r,i+=r;continue}if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let r;if(r=this._accept(5,!0)){r=this._accept(5,!0)||this._accept(6,!0)||r,t.appendChild(new Da(r));continue}if(!(this._parseFormatString(t)||this._parseAnything(t)))return!1}for(;!this._accept(4);){if(this._token.type!==14){s+=this._accept(void 0,!0);continue}return!1}try{t.regexp=new RegExp(i,s)}catch{return!1}return e.transform=t,!0}_parseFormatString(e){const t=this._token;if(!this._accept(0))return!1;let i=!1;this._accept(3)&&(i=!0);const s=this._accept(8,!0);if(s)if(i){if(this._accept(4))return e.appendChild(new fl(Number(s))),!0;if(!this._accept(1))return this._backTo(t),!1}else return e.appendChild(new fl(Number(s))),!0;else return this._backTo(t),!1;if(this._accept(6)){const r=this._accept(9,!0);return!r||!this._accept(4)?(this._backTo(t),!1):(e.appendChild(new fl(Number(s),r)),!0)}else if(this._accept(11)){const r=this._until(4);if(r)return e.appendChild(new fl(Number(s),void 0,r,void 0)),!0}else if(this._accept(12)){const r=this._until(4);if(r)return e.appendChild(new fl(Number(s),void 0,void 0,r)),!0}else if(this._accept(13)){const r=this._until(1);if(r){const o=this._until(4);if(o)return e.appendChild(new fl(Number(s),void 0,r,o)),!0}}else{const r=this._until(4);if(r)return e.appendChild(new fl(Number(s),void 0,void 0,r)),!0}return this._backTo(t),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new Da(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}}function Wse(n,e,t){var i,s,r,o;return(typeof t.insertText=="string"?t.insertText==="":t.insertText.snippet==="")?{edits:(s=(i=t.additionalEdit)===null||i===void 0?void 0:i.edits)!==null&&s!==void 0?s:[]}:{edits:[...e.map(a=>new Sh(n,{range:a,text:typeof t.insertText=="string"?BZe.escape(t.insertText)+"$0":t.insertText.snippet,insertAsSnippet:!0})),...(o=(r=t.additionalEdit)===null||r===void 0?void 0:r.edits)!==null&&o!==void 0?o:[]]}}function XZe(n){var e;function t(a,l){return"mimeType"in a?a.mimeType===l.handledMimeType:!!l.kind&&a.kind.contains(l.kind)}const i=new Map;for(const a of n)for(const l of(e=a.yieldTo)!==null&&e!==void 0?e:[])for(const c of n)if(c!==a&&t(l,c)){let d=i.get(a);d||(d=[],i.set(a,d)),d.push(c)}if(!i.size)return Array.from(n);const s=new Set,r=[];function o(a){if(!a.length)return[];const l=a[0];if(r.includes(l))return console.warn("Yield to cycle detected",l),a;if(s.has(l))return o(a.slice(1));let c=[];const d=i.get(l);return d&&(r.push(l),c=o(d),r.pop()),s.add(l),[...c,l,...o(a.slice(1))]}return o(Array.from(n))}const XP=ri("IEditorCancelService"),Ase=new it("cancellableOperation",!1,L("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));fi(XP,class{constructor(){this._tokens=new WeakMap}add(n,e){let t=this._tokens.get(n);t||(t=n.invokeWithinContext(s=>{const r=Ase.bindTo(s.get(oi)),o=new co;return{key:r,tokens:o}}),this._tokens.set(n,t));let i;return t.key.set(!0),i=t.tokens.push(e),()=>{i&&(i(),t.key.set(!t.tokens.isEmpty()),i=void 0)}}cancel(n){const e=this._tokens.get(n);if(!e)return;const t=e.tokens.pop();t&&(t.cancel(),e.key.set(!e.tokens.isEmpty()))}},1);class zZe extends nm{constructor(e,t){super(t),this.editor=e,this._unregister=e.invokeWithinContext(i=>i.get(XP).add(e,this))}dispose(){this._unregister(),super.dispose()}}Ct(new class extends Fc{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:Ase})}runEditorCommand(n,e){n.get(XP).cancel(e)}});class CY extends zZe{constructor(e,t,i,s){super(e,s),this._listener=new ct,t&4&&this._listener.add(e.onDidChangeCursorPosition(r=>{(!i||!te.containsPosition(i,r.position))&&this.cancel()})),t&2&&this._listener.add(e.onDidChangeCursorSelection(r=>{(!i||!te.containsRange(i,r.selection))&&this.cancel()})),t&8&&this._listener.add(e.onDidScrollChange(r=>this.cancel())),t&1&&(this._listener.add(e.onDidChangeModel(r=>this.cancel())),this._listener.add(e.onDidChangeModelContent(r=>this.cancel())))}dispose(){this._listener.dispose(),super.dispose()}}var HZe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},UZe=function(n,e){return function(t,i){e(t,i,n)}};const YZe=Qt.register({description:"inline-progress-widget",stickiness:1,showIfCollapsed:!0,after:{content:e5e,inlineClassName:"inline-editor-progress-decoration",inlineClassNameAffectsLetterSpacing:!0}});class tT extends Le{constructor(e,t,i,s,r){super(),this.typeId=e,this.editor=t,this.range=i,this.delegate=r,this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this.create(s),this.editor.addContentWidget(this),this.editor.layoutContentWidget(this)}create(e){this.domNode=St(".inline-progress-widget"),this.domNode.role="button",this.domNode.title=e;const t=St("span.icon");this.domNode.append(t),t.classList.add(...Vt.asClassNameArray(Qe.loading),"codicon-modifier-spin");const i=()=>{const s=this.editor.getOption(67);this.domNode.style.height=`${s}px`,this.domNode.style.width=`${Math.ceil(.8*s)}px`};i(),this._register(this.editor.onDidChangeConfiguration(s=>{(s.hasChanged(52)||s.hasChanged(67))&&i()})),this._register(we(this.domNode,Ge.CLICK,s=>{this.delegate.cancel()}))}getId(){return tT.baseId+"."+this.typeId}getDomNode(){return this.domNode}getPosition(){return{position:{lineNumber:this.range.startLineNumber,column:this.range.startColumn},preference:[0]}}dispose(){super.dispose(),this.editor.removeContentWidget(this)}}tT.baseId="editor.widget.inlineProgressWidget";let nW=class extends Le{constructor(e,t,i){super(),this.id=e,this._editor=t,this._instantiationService=i,this._showDelay=500,this._showPromise=this._register(new ha),this._currentWidget=new ha,this._operationIdPool=0,this._currentDecorations=t.createDecorationsCollection()}async showWhile(e,t,i){const s=this._operationIdPool++;this._currentOperation=s,this.clear(),this._showPromise.value=JC(()=>{const r=te.fromPositions(e);this._currentDecorations.set([{range:r,options:YZe}]).length>0&&(this._currentWidget.value=this._instantiationService.createInstance(tT,this.id,this._editor,r,t,i))},this._showDelay);try{return await i}finally{this._currentOperation===s&&(this.clear(),this._currentOperation=void 0)}}clear(){this._showPromise.clear(),this._currentDecorations.clear(),this._currentWidget.clear()}};nW=HZe([UZe(2,Si)],nW);function KZe(n,e={}){const t=zP(e);return t.textContent=n,t}function jZe(n,e={}){const t=zP(e);return Fse(t,$Ze(n,!!e.renderCodeSegments),e.actionHandler,e.renderCodeSegments),t}function zP(n){const e=n.inline?"span":"div",t=document.createElement(e);return n.className&&(t.className=n.className),t}class JZe{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){const e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}}function Fse(n,e,t,i){let s;if(e.type===2)s=document.createTextNode(e.content||"");else if(e.type===3)s=document.createElement("b");else if(e.type===4)s=document.createElement("i");else if(e.type===7&&i)s=document.createElement("code");else if(e.type===5&&t){const r=document.createElement("a");t.disposables.add(ws(r,"click",o=>{t.callback(String(e.index),o)})),s=r}else e.type===8?s=document.createElement("br"):e.type===1&&(s=n);s&&n!==s&&n.appendChild(s),s&&Array.isArray(e.children)&&e.children.forEach(r=>{Fse(s,r,t,i)})}function $Ze(n,e){const t={type:1,children:[]};let i=0,s=t;const r=[],o=new JZe(n);for(;!o.eos();){let a=o.next();const l=a==="\\"&&sW(o.peek(),e)!==0;if(l&&(a=o.next()),!l&&QZe(a,e)&&a===o.peek()){o.advance(),s.type===2&&(s=r.pop());const c=sW(a,e);if(s.type===c||s.type===5&&c===6)s=r.pop();else{const d={type:c,children:[]};c===5&&(d.index=i,i++),s.children.push(d),r.push(s),s=d}}else if(a===`
`)s.type===2&&(s=r.pop()),s.children.push({type:8});else if(s.type!==2){const c={type:2,content:a};s.children.push(c),r.push(s),s=c}else s.content+=a}return s.type===2&&(s=r.pop()),t}function QZe(n,e){return sW(n,e)!==0}function sW(n,e){switch(n){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return e?7:0;default:return 0}}const qZe=new RegExp(`(\\\\)?\\$\\((${Vt.iconNameExpression}(?:${Vt.iconModifierExpression})?)\\)`,"g");function hg(n){const e=new Array;let t,i=0,s=0;for(;(t=qZe.exec(n))!==null;){s=t.index||0,i<s&&e.push(n.substring(i,s)),i=(t.index||0)+t[0].length;const[,r,o]=t;e.push(r?`$(${o})`:AL({id:o}))}return i<n.length&&e.push(n.substring(i)),e}function AL(n){const e=St("span");return e.classList.add(...Vt.asClassNameArray(n)),e}function Vse(...n){return function(e,t){for(let i=0,s=n.length;i<s;i++){const r=n[i](e,t);if(r)return r}return null}}Pse.bind(void 0,!1);const FL=Pse.bind(void 0,!0);function Pse(n,e,t){if(!t||t.length<e.length)return null;let i;return n?i=TV(t,e):i=t.indexOf(e)===0,i?e.length>0?[{start:0,end:e.length}]:[]:null}function eGe(n,e){const t=e.toLowerCase().indexOf(n.toLowerCase());return t===-1?null:[{start:t,end:t+n.length}]}function tGe(n,e){return rW(n.toLowerCase(),e.toLowerCase(),0,0)}function rW(n,e,t,i){if(t===n.length)return[];if(i===e.length)return null;if(n[t]===e[i]){let s=null;return(s=rW(n,e,t+1,i+1))?Zse({start:i,end:i+1},s):null}return rW(n,e,t,i+1)}function HP(n){return 97<=n&&n<=122}function iT(n){return 65<=n&&n<=90}function UP(n){return 48<=n&&n<=57}function iGe(n){return n===32||n===9||n===10||n===13}const nGe=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(n=>nGe.add(n.charCodeAt(0)));function Ose(n){return HP(n)||iT(n)||UP(n)}function Zse(n,e){return e.length===0?e=[n]:n.end===e[0].start?e[0].start=n.start:e.unshift(n),e}function Gse(n,e){for(let t=e;t<n.length;t++){const i=n.charCodeAt(t);if(iT(i)||UP(i)||t>0&&!Ose(n.charCodeAt(t-1)))return t}return n.length}function oW(n,e,t,i){if(t===n.length)return[];if(i===e.length)return null;if(n[t]!==e[i].toLowerCase())return null;{let s=null,r=i+1;for(s=oW(n,e,t+1,i+1);!s&&(r=Gse(e,r))<e.length;)s=oW(n,e,t+1,r),r++;return s===null?null:Zse({start:i,end:i+1},s)}}function sGe(n){let e=0,t=0,i=0,s=0,r=0;for(let d=0;d<n.length;d++)r=n.charCodeAt(d),iT(r)&&e++,HP(r)&&t++,Ose(r)&&i++,UP(r)&&s++;const o=e/n.length,a=t/n.length,l=i/n.length,c=s/n.length;return{upperPercent:o,lowerPercent:a,alphaPercent:l,numericPercent:c}}function rGe(n){const{upperPercent:e,lowerPercent:t}=n;return t===0&&e>.6}function oGe(n){const{upperPercent:e,lowerPercent:t,alphaPercent:i,numericPercent:s}=n;return t>.2&&e<.8&&i>.6&&s<.2}function aGe(n){let e=0,t=0,i=0,s=0;for(let r=0;r<n.length;r++)i=n.charCodeAt(r),iT(i)&&e++,HP(i)&&t++,iGe(i)&&s++;return(e===0||t===0)&&s===0?n.length<=30:e<=5}function Bse(n,e){if(!e||(e=e.trim(),e.length===0)||!aGe(n))return null;e.length>60&&(e=e.substring(0,60));const t=sGe(e);if(!oGe(t)){if(!rGe(t))return null;e=e.toLowerCase()}let i=null,s=0;for(n=n.toLowerCase();s<e.length&&(i=oW(n,e,0,s))===null;)s=Gse(e,s+1);return i}const lGe=Vse(FL,Bse,eGe),cGe=Vse(FL,Bse,tGe),LY=new mw(1e4);function kY(n,e,t=!1){if(typeof n!="string"||typeof e!="string")return null;let i=LY.get(n);i||(i=new RegExp(BNe(n),"i"),LY.set(n,i));const s=i.exec(e);return s?[{start:s.index,end:s.index+s[0].length}]:t?cGe(n,e):lGe(n,e)}function dGe(n,e){const t=Use(n,n.toLowerCase(),0,e,e.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return t?uGe(t):null}function uGe(n){if(typeof n>"u")return[];const e=[],t=n[1];for(let i=n.length-1;i>1;i--){const s=n[i]+t,r=e[e.length-1];r&&r.end===s?r.end=s+1:e.push({start:s,end:s+1})}return e}const nh=128;function YP(){const n=[],e=[];for(let t=0;t<=nh;t++)e[t]=0;for(let t=0;t<=nh;t++)n.push(e.slice(0));return n}function Xse(n){const e=[];for(let t=0;t<=n;t++)e[t]=0;return e}const zse=Xse(2*nh),aW=Xse(2*nh),id=YP(),_f=YP(),Xy=YP();function zy(n,e){if(e<0||e>=n.length)return!1;const t=n.codePointAt(e);switch(t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 62:case 40:case 41:case 91:case 93:case 123:case 125:return!0;case void 0:return!1;default:return!!NV(t)}}function xY(n,e){if(e<0||e>=n.length)return!1;switch(n.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}function JS(n,e,t){return e[n]!==t[n]}function hGe(n,e,t,i,s,r,o=!1){for(;e<t&&s<r;)n[e]===i[s]&&(o&&(zse[e]=s),e+=1),s+=1;return e===t}var Op;(function(n){n.Default=[-100,0];function e(t){return!t||t.length===2&&t[0]===-100&&t[1]===0}n.isDefault=e})(Op||(Op={}));class Hse{constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}}Hse.default={boostFullMatch:!0,firstMatchCanBeWeak:!1};function Use(n,e,t,i,s,r,o=Hse.default){const a=n.length>nh?nh:n.length,l=i.length>nh?nh:i.length;if(t>=a||r>=l||a-t>l-r||!hGe(e,t,a,s,r,l,!0))return;fGe(a,l,t,r,e,s);let c=1,d=1,u=t,h=r;const f=[!1];for(c=1,u=t;u<a;c++,u++){const w=zse[u],v=aW[u],_=u+1<a?aW[u+1]:l;for(d=w-r+1,h=w;h<_;d++,h++){let y=Number.MIN_SAFE_INTEGER,C=!1;h<=v&&(y=gGe(n,e,u,t,i,s,h,l,r,id[c-1][d-1]===0,f));let S=0;y!==Number.MAX_SAFE_INTEGER&&(C=!0,S=y+_f[c-1][d-1]);const k=h>w,I=k?_f[c][d-1]+(id[c][d-1]>0?-5:0):0,T=h>w+1&&id[c][d-1]>0,D=T?_f[c][d-2]+(id[c][d-2]>0?-5:0):0;if(T&&(!k||D>=I)&&(!C||D>=S))_f[c][d]=D,Xy[c][d]=3,id[c][d]=0;else if(k&&(!C||I>=S))_f[c][d]=I,Xy[c][d]=2,id[c][d]=0;else if(C)_f[c][d]=S,Xy[c][d]=1,id[c][d]=id[c-1][d-1]+1;else throw new Error("not possible")}}if(!f[0]&&!o.firstMatchCanBeWeak)return;c--,d--;const g=[_f[c][d],r];let m=0,p=0;for(;c>=1;){let w=d;do{const v=Xy[c][w];if(v===3)w=w-2;else if(v===2)w=w-1;else break}while(w>=1);m>1&&e[t+c-1]===s[r+d-1]&&!JS(w+r-1,i,s)&&m+1>id[c][w]&&(w=d),w===d?m++:m=1,p||(p=w),c--,d=w-1,g.push(d)}l-r===a&&o.boostFullMatch&&(g[0]+=2);const b=p-a;return g[0]-=b,g}function fGe(n,e,t,i,s,r){let o=n-1,a=e-1;for(;o>=t&&a>=i;)s[o]===r[a]&&(aW[o]=a,o--),a--}function gGe(n,e,t,i,s,r,o,a,l,c,d){if(e[t]!==r[o])return Number.MIN_SAFE_INTEGER;let u=1,h=!1;return o===t-i?u=n[t]===s[o]?7:5:JS(o,s,r)&&(o===0||!JS(o-1,s,r))?(u=n[t]===s[o]?7:5,h=!0):zy(r,o)&&(o===0||!zy(r,o-1))?u=5:(zy(r,o-1)||xY(r,o-1))&&(u=5,h=!0),u>1&&t===i&&(d[0]=!0),h||(h=JS(o,s,r)||zy(r,o-1)||xY(r,o-1)),t===i?o>l&&(u-=h?3:5):c?u+=h?2:0:u+=h?0:1,o+1===a&&(u-=h?3:5),u}const mGe="$(",KP=new RegExp(`\\$\\(${Vt.iconNameExpression}(?:${Vt.iconModifierExpression})?\\)`,"g"),pGe=new RegExp(`(\\\\)?${KP.source}`,"g");function bGe(n){return n.replace(pGe,(e,t)=>t?e:`\\${e}`)}const vGe=new RegExp(`\\\\${KP.source}`,"g");function _Ge(n){return n.replace(vGe,e=>`\\${e}`)}const wGe=new RegExp(`(\\s)?(\\\\)?${KP.source}(\\s)?`,"g");function Yse(n){return n.indexOf(mGe)===-1?n:n.replace(wGe,(e,t,i,s)=>i?e:t||s||"")}function yGe(n){return n?n.replace(/\$\((.*?)\)/g,(e,t)=>` ${t} `).trim():""}const wR=new RegExp(`\\$\\(${Vt.iconNameCharacter}+\\)`,"g");function Gv(n){wR.lastIndex=0;let e="";const t=[];let i=0;for(;;){const s=wR.lastIndex,r=wR.exec(n),o=n.substring(s,r?.index);if(o.length>0){e+=o;for(let a=0;a<o.length;a++)t.push(i)}if(!r)break;i+=r[0].length}return{text:e,iconOffsets:t}}function yR(n,e,t=!1){const{text:i,iconOffsets:s}=e;if(!s||s.length===0)return kY(n,i,t);const r=m2(i," "),o=i.length-r.length,a=kY(n,r,t);if(a)for(const l of a){const c=s[l.start+o]+o;l.start+=c,l.end+=c}return a}class VL{constructor(e="",t=!1){var i,s,r;if(this.value=e,typeof this.value!="string")throw wb("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=(i=t.isTrusted)!==null&&i!==void 0?i:void 0,this.supportThemeIcons=(s=t.supportThemeIcons)!==null&&s!==void 0?s:!1,this.supportHtml=(r=t.supportHtml)!==null&&r!==void 0?r:!1)}appendText(e,t=0){return this.value+=CGe(this.supportThemeIcons?bGe(e):e).replace(/([ \t]+)/g,(i,s)=>"&nbsp;".repeat(s.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+=`
${LGe(t,e)}
`,this}appendLink(e,t,i){return this.value+="[",this.value+=this._escape(t,"]"),this.value+="](",this.value+=this._escape(String(e),")"),i&&(this.value+=` "${this._escape(this._escape(i,'"'),")")}"`),this.value+=")",this}_escape(e,t){const i=new RegExp(Ya(t),"g");return e.replace(i,(s,r)=>e.charAt(r-1)!=="\\"?`\\${s}`:s)}}function Xd(n){return n instanceof VL?!0:n&&typeof n=="object"?typeof n.value=="string"&&(typeof n.isTrusted=="boolean"||typeof n.isTrusted=="object"||n.isTrusted===void 0)&&(typeof n.supportThemeIcons=="boolean"||n.supportThemeIcons===void 0):!1}function SGe(n,e){return n===e?!0:!n||!e?!1:n.value===e.value&&n.isTrusted===e.isTrusted&&n.supportThemeIcons===e.supportThemeIcons&&n.supportHtml===e.supportHtml&&(n.baseUri===e.baseUri||!!n.baseUri&&!!e.baseUri&&aPe(Ft.from(n.baseUri),Ft.from(e.baseUri)))}function CGe(n){return n.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function LGe(n,e){var t,i;const s=(i=(t=n.match(/^`+/gm))===null||t===void 0?void 0:t.reduce((o,a)=>o.length>a.length?o:a).length)!==null&&i!==void 0?i:0,r=s>=3?s+1:3;return[`${"`".repeat(r)}${e}`,n,`${"`".repeat(r)}`].join(`
`)}function Hy(n){return n.replace(/"/g,"&quot;")}function SR(n){return n&&n.replace(/\\([\\`*_{}[\]()#+\-.!~])/g,"$1")}function kGe(n){const e=[],t=n.split("|").map(s=>s.trim());n=t[0];const i=t[1];if(i){const s=/height=(\d+)/.exec(i),r=/width=(\d+)/.exec(i),o=s?s[1]:"",a=r?r[1]:"",l=isFinite(parseInt(a)),c=isFinite(parseInt(o));l&&e.push(`width="${a}"`),c&&e.push(`height="${o}"`)}return{href:n,dimensions:e}}class Kse{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}const TY=new Kse("id#");let Wr={};(function(){function n(e,t){t(Wr)}n.amd=!0,function(e,t){typeof n=="function"&&n.amd?n(["exports"],t):typeof exports=="object"&&typeof module<"u"?t(exports):(e=typeof globalThis<"u"?globalThis:e||self,t(e.marked={}))}(this,function(e){function t(re,ie){for(var de=0;de<ie.length;de++){var Z=ie[de];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(re,Z.key,Z)}}function i(re,ie,de){return ie&&t(re.prototype,ie),de&&t(re,de),Object.defineProperty(re,"prototype",{writable:!1}),re}function s(re,ie){if(re){if(typeof re=="string")return r(re,ie);var de=Object.prototype.toString.call(re).slice(8,-1);if(de==="Object"&&re.constructor&&(de=re.constructor.name),de==="Map"||de==="Set")return Array.from(re);if(de==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(de))return r(re,ie)}}function r(re,ie){(ie==null||ie>re.length)&&(ie=re.length);for(var de=0,Z=new Array(ie);de<ie;de++)Z[de]=re[de];return Z}function o(re,ie){var de=typeof Symbol<"u"&&re[Symbol.iterator]||re["@@iterator"];if(de)return(de=de.call(re)).next.bind(de);if(Array.isArray(re)||(de=s(re))||ie&&re&&typeof re.length=="number"){de&&(re=de);var Z=0;return function(){return Z>=re.length?{done:!0}:{done:!1,value:re[Z++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}e.defaults=a();function l(re){e.defaults=re}var c=/[&<>"']/,d=/[&<>"']/g,u=/[<>"']|&(?!#?\w+;)/,h=/[<>"']|&(?!#?\w+;)/g,f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},g=function(ie){return f[ie]};function m(re,ie){if(ie){if(c.test(re))return re.replace(d,g)}else if(u.test(re))return re.replace(h,g);return re}var p=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function b(re){return re.replace(p,function(ie,de){return de=de.toLowerCase(),de==="colon"?":":de.charAt(0)==="#"?de.charAt(1)==="x"?String.fromCharCode(parseInt(de.substring(2),16)):String.fromCharCode(+de.substring(1)):""})}var w=/(^|[^\[])\^/g;function v(re,ie){re=typeof re=="string"?re:re.source,ie=ie||"";var de={replace:function(O,q){return q=q.source||q,q=q.replace(w,"$1"),re=re.replace(O,q),de},getRegex:function(){return new RegExp(re,ie)}};return de}var _=/[^\w:]/g,y=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function C(re,ie,de){if(re){var Z;try{Z=decodeURIComponent(b(de)).replace(_,"").toLowerCase()}catch{return null}if(Z.indexOf("javascript:")===0||Z.indexOf("vbscript:")===0||Z.indexOf("data:")===0)return null}ie&&!y.test(de)&&(de=D(ie,de));try{de=encodeURI(de).replace(/%25/g,"%")}catch{return null}return de}var S={},k=/^[^:]+:\/*[^/]*$/,I=/^([^:]+:)[\s\S]*$/,T=/^([^:]+:\/*[^/]*)[\s\S]*$/;function D(re,ie){S[" "+re]||(k.test(re)?S[" "+re]=re+"/":S[" "+re]=P(re,"/",!0)),re=S[" "+re];var de=re.indexOf(":")===-1;return ie.substring(0,2)==="//"?de?ie:re.replace(I,"$1")+ie:ie.charAt(0)==="/"?de?ie:re.replace(T,"$1")+ie:re+ie}var M={exec:function(){}};function E(re){for(var ie=1,de,Z;ie<arguments.length;ie++){de=arguments[ie];for(Z in de)Object.prototype.hasOwnProperty.call(de,Z)&&(re[Z]=de[Z])}return re}function W(re,ie){var de=re.replace(/\|/g,function(q,Q,ce){for(var be=!1,Ae=Q;--Ae>=0&&ce[Ae]==="\\";)be=!be;return be?"|":" |"}),Z=de.split(/ \|/),O=0;if(Z[0].trim()||Z.shift(),Z.length>0&&!Z[Z.length-1].trim()&&Z.pop(),Z.length>ie)Z.splice(ie);else for(;Z.length<ie;)Z.push("");for(;O<Z.length;O++)Z[O]=Z[O].trim().replace(/\\\|/g,"|");return Z}function P(re,ie,de){var Z=re.length;if(Z===0)return"";for(var O=0;O<Z;){var q=re.charAt(Z-O-1);if(q===ie&&!de)O++;else if(q!==ie&&de)O++;else break}return re.slice(0,Z-O)}function N(re,ie){if(re.indexOf(ie[1])===-1)return-1;for(var de=re.length,Z=0,O=0;O<de;O++)if(re[O]==="\\")O++;else if(re[O]===ie[0])Z++;else if(re[O]===ie[1]&&(Z--,Z<0))return O;return-1}function H(re){re&&re.sanitize&&!re.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function U(re,ie){if(ie<1)return"";for(var de="";ie>1;)ie&1&&(de+=re),ie>>=1,re+=re;return de+re}function B(re,ie,de,Z){var O=ie.href,q=ie.title?m(ie.title):null,Q=re[1].replace(/\\([\[\]])/g,"$1");if(re[0].charAt(0)!=="!"){Z.state.inLink=!0;var ce={type:"link",raw:de,href:O,title:q,text:Q,tokens:Z.inlineTokens(Q)};return Z.state.inLink=!1,ce}return{type:"image",raw:de,href:O,title:q,text:m(Q)}}function Y(re,ie){var de=re.match(/^(\s+)(?:```)/);if(de===null)return ie;var Z=de[1];return ie.split(`
`).map(function(O){var q=O.match(/^\s+/);if(q===null)return O;var Q=q[0];return Q.length>=Z.length?O.slice(Z.length):O}).join(`
`)}var ne=function(){function re(de){this.options=de||e.defaults}var ie=re.prototype;return ie.space=function(Z){var O=this.rules.block.newline.exec(Z);if(O&&O[0].length>0)return{type:"space",raw:O[0]}},ie.code=function(Z){var O=this.rules.block.code.exec(Z);if(O){var q=O[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:O[0],codeBlockStyle:"indented",text:this.options.pedantic?q:P(q,`
`)}}},ie.fences=function(Z){var O=this.rules.block.fences.exec(Z);if(O){var q=O[0],Q=Y(q,O[3]||"");return{type:"code",raw:q,lang:O[2]?O[2].trim():O[2],text:Q}}},ie.heading=function(Z){var O=this.rules.block.heading.exec(Z);if(O){var q=O[2].trim();if(/#$/.test(q)){var Q=P(q,"#");(this.options.pedantic||!Q||/ $/.test(Q))&&(q=Q.trim())}return{type:"heading",raw:O[0],depth:O[1].length,text:q,tokens:this.lexer.inline(q)}}},ie.hr=function(Z){var O=this.rules.block.hr.exec(Z);if(O)return{type:"hr",raw:O[0]}},ie.blockquote=function(Z){var O=this.rules.block.blockquote.exec(Z);if(O){var q=O[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:O[0],tokens:this.lexer.blockTokens(q,[]),text:q}}},ie.list=function(Z){var O=this.rules.block.list.exec(Z);if(O){var q,Q,ce,be,Ae,Pe,tt,qe,wt,me,fe,Ze,Ye=O[1].trim(),Xe=Ye.length>1,oe={type:"list",raw:"",ordered:Xe,start:Xe?+Ye.slice(0,-1):"",loose:!1,items:[]};Ye=Xe?"\\d{1,9}\\"+Ye.slice(-1):"\\"+Ye,this.options.pedantic&&(Ye=Xe?Ye:"[*+-]");for(var le=new RegExp("^( {0,3}"+Ye+")((?:[	 ][^\\n]*)?(?:\\n|$))");Z&&(Ze=!1,!(!(O=le.exec(Z))||this.rules.block.hr.test(Z)));){if(q=O[0],Z=Z.substring(q.length),qe=O[2].split(`
`,1)[0],wt=Z.split(`
`,1)[0],this.options.pedantic?(be=2,fe=qe.trimLeft()):(be=O[2].search(/[^ ]/),be=be>4?1:be,fe=qe.slice(be),be+=O[1].length),Pe=!1,!qe&&/^ *$/.test(wt)&&(q+=wt+`
`,Z=Z.substring(wt.length+1),Ze=!0),!Ze)for(var Ve=new RegExp("^ {0,"+Math.min(3,be-1)+"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))"),ae=new RegExp("^ {0,"+Math.min(3,be-1)+"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)"),_e=new RegExp("^ {0,"+Math.min(3,be-1)+"}(?:```|~~~)"),Oe=new RegExp("^ {0,"+Math.min(3,be-1)+"}#");Z&&(me=Z.split(`
`,1)[0],qe=me,this.options.pedantic&&(qe=qe.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(_e.test(qe)||Oe.test(qe)||Ve.test(qe)||ae.test(Z)));){if(qe.search(/[^ ]/)>=be||!qe.trim())fe+=`
`+qe.slice(be);else if(!Pe)fe+=`
`+qe;else break;!Pe&&!qe.trim()&&(Pe=!0),q+=me+`
`,Z=Z.substring(me.length+1)}oe.loose||(tt?oe.loose=!0:/\n *\n *$/.test(q)&&(tt=!0)),this.options.gfm&&(Q=/^\[[ xX]\] /.exec(fe),Q&&(ce=Q[0]!=="[ ] ",fe=fe.replace(/^\[[ xX]\] +/,""))),oe.items.push({type:"list_item",raw:q,task:!!Q,checked:ce,loose:!1,text:fe}),oe.raw+=q}oe.items[oe.items.length-1].raw=q.trimRight(),oe.items[oe.items.length-1].text=fe.trimRight(),oe.raw=oe.raw.trimRight();var He=oe.items.length;for(Ae=0;Ae<He;Ae++){this.lexer.state.top=!1,oe.items[Ae].tokens=this.lexer.blockTokens(oe.items[Ae].text,[]);var lt=oe.items[Ae].tokens.filter(function(kt){return kt.type==="space"}),ft=lt.every(function(kt){for(var ii=kt.raw.split(""),Ht=0,pi=o(ii),ui;!(ui=pi()).done;){var Ei=ui.value;if(Ei===`
`&&(Ht+=1),Ht>1)return!0}return!1});!oe.loose&&lt.length&&ft&&(oe.loose=!0,oe.items[Ae].loose=!0)}return oe}},ie.html=function(Z){var O=this.rules.block.html.exec(Z);if(O){var q={type:"html",raw:O[0],pre:!this.options.sanitizer&&(O[1]==="pre"||O[1]==="script"||O[1]==="style"),text:O[0]};if(this.options.sanitize){var Q=this.options.sanitizer?this.options.sanitizer(O[0]):m(O[0]);q.type="paragraph",q.text=Q,q.tokens=this.lexer.inline(Q)}return q}},ie.def=function(Z){var O=this.rules.block.def.exec(Z);if(O){O[3]&&(O[3]=O[3].substring(1,O[3].length-1));var q=O[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:q,raw:O[0],href:O[2],title:O[3]}}},ie.table=function(Z){var O=this.rules.block.table.exec(Z);if(O){var q={type:"table",header:W(O[1]).map(function(tt){return{text:tt}}),align:O[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:O[3]&&O[3].trim()?O[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(q.header.length===q.align.length){q.raw=O[0];var Q=q.align.length,ce,be,Ae,Pe;for(ce=0;ce<Q;ce++)/^ *-+: *$/.test(q.align[ce])?q.align[ce]="right":/^ *:-+: *$/.test(q.align[ce])?q.align[ce]="center":/^ *:-+ *$/.test(q.align[ce])?q.align[ce]="left":q.align[ce]=null;for(Q=q.rows.length,ce=0;ce<Q;ce++)q.rows[ce]=W(q.rows[ce],q.header.length).map(function(tt){return{text:tt}});for(Q=q.header.length,be=0;be<Q;be++)q.header[be].tokens=this.lexer.inline(q.header[be].text);for(Q=q.rows.length,be=0;be<Q;be++)for(Pe=q.rows[be],Ae=0;Ae<Pe.length;Ae++)Pe[Ae].tokens=this.lexer.inline(Pe[Ae].text);return q}}},ie.lheading=function(Z){var O=this.rules.block.lheading.exec(Z);if(O)return{type:"heading",raw:O[0],depth:O[2].charAt(0)==="="?1:2,text:O[1],tokens:this.lexer.inline(O[1])}},ie.paragraph=function(Z){var O=this.rules.block.paragraph.exec(Z);if(O){var q=O[1].charAt(O[1].length-1)===`
`?O[1].slice(0,-1):O[1];return{type:"paragraph",raw:O[0],text:q,tokens:this.lexer.inline(q)}}},ie.text=function(Z){var O=this.rules.block.text.exec(Z);if(O)return{type:"text",raw:O[0],text:O[0],tokens:this.lexer.inline(O[0])}},ie.escape=function(Z){var O=this.rules.inline.escape.exec(Z);if(O)return{type:"escape",raw:O[0],text:m(O[1])}},ie.tag=function(Z){var O=this.rules.inline.tag.exec(Z);if(O)return!this.lexer.state.inLink&&/^<a /i.test(O[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(O[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(O[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(O[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:O[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(O[0]):m(O[0]):O[0]}},ie.link=function(Z){var O=this.rules.inline.link.exec(Z);if(O){var q=O[2].trim();if(!this.options.pedantic&&/^</.test(q)){if(!/>$/.test(q))return;var Q=P(q.slice(0,-1),"\\");if((q.length-Q.length)%2===0)return}else{var ce=N(O[2],"()");if(ce>-1){var be=O[0].indexOf("!")===0?5:4,Ae=be+O[1].length+ce;O[2]=O[2].substring(0,ce),O[0]=O[0].substring(0,Ae).trim(),O[3]=""}}var Pe=O[2],tt="";if(this.options.pedantic){var qe=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(Pe);qe&&(Pe=qe[1],tt=qe[3])}else tt=O[3]?O[3].slice(1,-1):"";return Pe=Pe.trim(),/^</.test(Pe)&&(this.options.pedantic&&!/>$/.test(q)?Pe=Pe.slice(1):Pe=Pe.slice(1,-1)),B(O,{href:Pe&&Pe.replace(this.rules.inline._escapes,"$1"),title:tt&&tt.replace(this.rules.inline._escapes,"$1")},O[0],this.lexer)}},ie.reflink=function(Z,O){var q;if((q=this.rules.inline.reflink.exec(Z))||(q=this.rules.inline.nolink.exec(Z))){var Q=(q[2]||q[1]).replace(/\s+/g," ");if(Q=O[Q.toLowerCase()],!Q||!Q.href){var ce=q[0].charAt(0);return{type:"text",raw:ce,text:ce}}return B(q,Q,q[0],this.lexer)}},ie.emStrong=function(Z,O,q){q===void 0&&(q="");var Q=this.rules.inline.emStrong.lDelim.exec(Z);if(Q&&!(Q[3]&&q.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var ce=Q[1]||Q[2]||"";if(!ce||ce&&(q===""||this.rules.inline.punctuation.exec(q))){var be=Q[0].length-1,Ae,Pe,tt=be,qe=0,wt=Q[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(wt.lastIndex=0,O=O.slice(-1*Z.length+be);(Q=wt.exec(O))!=null;)if(Ae=Q[1]||Q[2]||Q[3]||Q[4]||Q[5]||Q[6],!!Ae){if(Pe=Ae.length,Q[3]||Q[4]){tt+=Pe;continue}else if((Q[5]||Q[6])&&be%3&&!((be+Pe)%3)){qe+=Pe;continue}if(tt-=Pe,!(tt>0)){if(Pe=Math.min(Pe,Pe+tt+qe),Math.min(be,Pe)%2){var me=Z.slice(1,be+Q.index+Pe);return{type:"em",raw:Z.slice(0,be+Q.index+Pe+1),text:me,tokens:this.lexer.inlineTokens(me)}}var fe=Z.slice(2,be+Q.index+Pe-1);return{type:"strong",raw:Z.slice(0,be+Q.index+Pe+1),text:fe,tokens:this.lexer.inlineTokens(fe)}}}}}},ie.codespan=function(Z){var O=this.rules.inline.code.exec(Z);if(O){var q=O[2].replace(/\n/g," "),Q=/[^ ]/.test(q),ce=/^ /.test(q)&&/ $/.test(q);return Q&&ce&&(q=q.substring(1,q.length-1)),q=m(q,!0),{type:"codespan",raw:O[0],text:q}}},ie.br=function(Z){var O=this.rules.inline.br.exec(Z);if(O)return{type:"br",raw:O[0]}},ie.del=function(Z){var O=this.rules.inline.del.exec(Z);if(O)return{type:"del",raw:O[0],text:O[2],tokens:this.lexer.inlineTokens(O[2])}},ie.autolink=function(Z,O){var q=this.rules.inline.autolink.exec(Z);if(q){var Q,ce;return q[2]==="@"?(Q=m(this.options.mangle?O(q[1]):q[1]),ce="mailto:"+Q):(Q=m(q[1]),ce=Q),{type:"link",raw:q[0],text:Q,href:ce,tokens:[{type:"text",raw:Q,text:Q}]}}},ie.url=function(Z,O){var q;if(q=this.rules.inline.url.exec(Z)){var Q,ce;if(q[2]==="@")Q=m(this.options.mangle?O(q[0]):q[0]),ce="mailto:"+Q;else{var be;do be=q[0],q[0]=this.rules.inline._backpedal.exec(q[0])[0];while(be!==q[0]);Q=m(q[0]),q[1]==="www."?ce="http://"+Q:ce=Q}return{type:"link",raw:q[0],text:Q,href:ce,tokens:[{type:"text",raw:Q,text:Q}]}}},ie.inlineText=function(Z,O){var q=this.rules.inline.text.exec(Z);if(q){var Q;return this.lexer.state.inRawBlock?Q=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(q[0]):m(q[0]):q[0]:Q=m(this.options.smartypants?O(q[0]):q[0]),{type:"text",raw:q[0],text:Q}}},re}(),ee={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:M,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};ee._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/,ee._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,ee.def=v(ee.def).replace("label",ee._label).replace("title",ee._title).getRegex(),ee.bullet=/(?:[*+-]|\d{1,9}[.)])/,ee.listItemStart=v(/^( *)(bull) */).replace("bull",ee.bullet).getRegex(),ee.list=v(ee.list).replace(/bull/g,ee.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+ee.def.source+")").getRegex(),ee._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ee._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,ee.html=v(ee.html,"i").replace("comment",ee._comment).replace("tag",ee._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ee.paragraph=v(ee._paragraph).replace("hr",ee.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ee._tag).getRegex(),ee.blockquote=v(ee.blockquote).replace("paragraph",ee.paragraph).getRegex(),ee.normal=E({},ee),ee.gfm=E({},ee.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),ee.gfm.table=v(ee.gfm.table).replace("hr",ee.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ee._tag).getRegex(),ee.gfm.paragraph=v(ee._paragraph).replace("hr",ee.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",ee.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ee._tag).getRegex(),ee.pedantic=E({},ee.normal,{html:v(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ee._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:M,paragraph:v(ee.normal._paragraph).replace("hr",ee.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",ee.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var $={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:M,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:M,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};$._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",$.punctuation=v($.punctuation).replace(/punctuation/g,$._punctuation).getRegex(),$.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,$.escapedEmSt=/\\\*|\\_/g,$._comment=v(ee._comment).replace("(?:-->|$)","-->").getRegex(),$.emStrong.lDelim=v($.emStrong.lDelim).replace(/punct/g,$._punctuation).getRegex(),$.emStrong.rDelimAst=v($.emStrong.rDelimAst,"g").replace(/punct/g,$._punctuation).getRegex(),$.emStrong.rDelimUnd=v($.emStrong.rDelimUnd,"g").replace(/punct/g,$._punctuation).getRegex(),$._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,$._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,$._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,$.autolink=v($.autolink).replace("scheme",$._scheme).replace("email",$._email).getRegex(),$._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,$.tag=v($.tag).replace("comment",$._comment).replace("attribute",$._attribute).getRegex(),$._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,$._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,$._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,$.link=v($.link).replace("label",$._label).replace("href",$._href).replace("title",$._title).getRegex(),$.reflink=v($.reflink).replace("label",$._label).replace("ref",ee._label).getRegex(),$.nolink=v($.nolink).replace("ref",ee._label).getRegex(),$.reflinkSearch=v($.reflinkSearch,"g").replace("reflink",$.reflink).replace("nolink",$.nolink).getRegex(),$.normal=E({},$),$.pedantic=E({},$.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:v(/^!?\[(label)\]\((.*?)\)/).replace("label",$._label).getRegex(),reflink:v(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",$._label).getRegex()}),$.gfm=E({},$.normal,{escape:v($.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),$.gfm.url=v($.gfm.url,"i").replace("email",$.gfm._extended_email).getRegex(),$.breaks=E({},$.gfm,{br:v($.br).replace("{2,}","*").getRegex(),text:v($.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function ge(re){return re.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function Ie(re){var ie="",de,Z,O=re.length;for(de=0;de<O;de++)Z=re.charCodeAt(de),Math.random()>.5&&(Z="x"+Z.toString(16)),ie+="&#"+Z+";";return ie}var xe=function(){function re(de){this.tokens=[],this.tokens.links=Object.create(null),this.options=de||e.defaults,this.options.tokenizer=this.options.tokenizer||new ne,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var Z={block:ee.normal,inline:$.normal};this.options.pedantic?(Z.block=ee.pedantic,Z.inline=$.pedantic):this.options.gfm&&(Z.block=ee.gfm,this.options.breaks?Z.inline=$.breaks:Z.inline=$.gfm),this.tokenizer.rules=Z}re.lex=function(Z,O){var q=new re(O);return q.lex(Z)},re.lexInline=function(Z,O){var q=new re(O);return q.inlineTokens(Z)};var ie=re.prototype;return ie.lex=function(Z){Z=Z.replace(/\r\n|\r/g,`
`),this.blockTokens(Z,this.tokens);for(var O;O=this.inlineQueue.shift();)this.inlineTokens(O.src,O.tokens);return this.tokens},ie.blockTokens=function(Z,O){var q=this;O===void 0&&(O=[]),this.options.pedantic?Z=Z.replace(/\t/g,"    ").replace(/^ +$/gm,""):Z=Z.replace(/^( *)(\t+)/gm,function(tt,qe,wt){return qe+"    ".repeat(wt.length)});for(var Q,ce,be,Ae;Z;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(tt){return(Q=tt.call({lexer:q},Z,O))?(Z=Z.substring(Q.raw.length),O.push(Q),!0):!1}))){if(Q=this.tokenizer.space(Z)){Z=Z.substring(Q.raw.length),Q.raw.length===1&&O.length>0?O[O.length-1].raw+=`
`:O.push(Q);continue}if(Q=this.tokenizer.code(Z)){Z=Z.substring(Q.raw.length),ce=O[O.length-1],ce&&(ce.type==="paragraph"||ce.type==="text")?(ce.raw+=`
`+Q.raw,ce.text+=`
`+Q.text,this.inlineQueue[this.inlineQueue.length-1].src=ce.text):O.push(Q);continue}if(Q=this.tokenizer.fences(Z)){Z=Z.substring(Q.raw.length),O.push(Q);continue}if(Q=this.tokenizer.heading(Z)){Z=Z.substring(Q.raw.length),O.push(Q);continue}if(Q=this.tokenizer.hr(Z)){Z=Z.substring(Q.raw.length),O.push(Q);continue}if(Q=this.tokenizer.blockquote(Z)){Z=Z.substring(Q.raw.length),O.push(Q);continue}if(Q=this.tokenizer.list(Z)){Z=Z.substring(Q.raw.length),O.push(Q);continue}if(Q=this.tokenizer.html(Z)){Z=Z.substring(Q.raw.length),O.push(Q);continue}if(Q=this.tokenizer.def(Z)){Z=Z.substring(Q.raw.length),ce=O[O.length-1],ce&&(ce.type==="paragraph"||ce.type==="text")?(ce.raw+=`
`+Q.raw,ce.text+=`
`+Q.raw,this.inlineQueue[this.inlineQueue.length-1].src=ce.text):this.tokens.links[Q.tag]||(this.tokens.links[Q.tag]={href:Q.href,title:Q.title});continue}if(Q=this.tokenizer.table(Z)){Z=Z.substring(Q.raw.length),O.push(Q);continue}if(Q=this.tokenizer.lheading(Z)){Z=Z.substring(Q.raw.length),O.push(Q);continue}if(be=Z,this.options.extensions&&this.options.extensions.startBlock&&function(){var tt=1/0,qe=Z.slice(1),wt=void 0;q.options.extensions.startBlock.forEach(function(me){wt=me.call({lexer:this},qe),typeof wt=="number"&&wt>=0&&(tt=Math.min(tt,wt))}),tt<1/0&&tt>=0&&(be=Z.substring(0,tt+1))}(),this.state.top&&(Q=this.tokenizer.paragraph(be))){ce=O[O.length-1],Ae&&ce.type==="paragraph"?(ce.raw+=`
`+Q.raw,ce.text+=`
`+Q.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=ce.text):O.push(Q),Ae=be.length!==Z.length,Z=Z.substring(Q.raw.length);continue}if(Q=this.tokenizer.text(Z)){Z=Z.substring(Q.raw.length),ce=O[O.length-1],ce&&ce.type==="text"?(ce.raw+=`
`+Q.raw,ce.text+=`
`+Q.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=ce.text):O.push(Q);continue}if(Z){var Pe="Infinite loop on byte: "+Z.charCodeAt(0);if(this.options.silent){console.error(Pe);break}else throw new Error(Pe)}}return this.state.top=!0,O},ie.inline=function(Z,O){return O===void 0&&(O=[]),this.inlineQueue.push({src:Z,tokens:O}),O},ie.inlineTokens=function(Z,O){var q=this;O===void 0&&(O=[]);var Q,ce,be,Ae=Z,Pe,tt,qe;if(this.tokens.links){var wt=Object.keys(this.tokens.links);if(wt.length>0)for(;(Pe=this.tokenizer.rules.inline.reflinkSearch.exec(Ae))!=null;)wt.includes(Pe[0].slice(Pe[0].lastIndexOf("[")+1,-1))&&(Ae=Ae.slice(0,Pe.index)+"["+U("a",Pe[0].length-2)+"]"+Ae.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(Pe=this.tokenizer.rules.inline.blockSkip.exec(Ae))!=null;)Ae=Ae.slice(0,Pe.index)+"["+U("a",Pe[0].length-2)+"]"+Ae.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(Pe=this.tokenizer.rules.inline.escapedEmSt.exec(Ae))!=null;)Ae=Ae.slice(0,Pe.index)+"++"+Ae.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;Z;)if(tt||(qe=""),tt=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(fe){return(Q=fe.call({lexer:q},Z,O))?(Z=Z.substring(Q.raw.length),O.push(Q),!0):!1}))){if(Q=this.tokenizer.escape(Z)){Z=Z.substring(Q.raw.length),O.push(Q);continue}if(Q=this.tokenizer.tag(Z)){Z=Z.substring(Q.raw.length),ce=O[O.length-1],ce&&Q.type==="text"&&ce.type==="text"?(ce.raw+=Q.raw,ce.text+=Q.text):O.push(Q);continue}if(Q=this.tokenizer.link(Z)){Z=Z.substring(Q.raw.length),O.push(Q);continue}if(Q=this.tokenizer.reflink(Z,this.tokens.links)){Z=Z.substring(Q.raw.length),ce=O[O.length-1],ce&&Q.type==="text"&&ce.type==="text"?(ce.raw+=Q.raw,ce.text+=Q.text):O.push(Q);continue}if(Q=this.tokenizer.emStrong(Z,Ae,qe)){Z=Z.substring(Q.raw.length),O.push(Q);continue}if(Q=this.tokenizer.codespan(Z)){Z=Z.substring(Q.raw.length),O.push(Q);continue}if(Q=this.tokenizer.br(Z)){Z=Z.substring(Q.raw.length),O.push(Q);continue}if(Q=this.tokenizer.del(Z)){Z=Z.substring(Q.raw.length),O.push(Q);continue}if(Q=this.tokenizer.autolink(Z,Ie)){Z=Z.substring(Q.raw.length),O.push(Q);continue}if(!this.state.inLink&&(Q=this.tokenizer.url(Z,Ie))){Z=Z.substring(Q.raw.length),O.push(Q);continue}if(be=Z,this.options.extensions&&this.options.extensions.startInline&&function(){var fe=1/0,Ze=Z.slice(1),Ye=void 0;q.options.extensions.startInline.forEach(function(Xe){Ye=Xe.call({lexer:this},Ze),typeof Ye=="number"&&Ye>=0&&(fe=Math.min(fe,Ye))}),fe<1/0&&fe>=0&&(be=Z.substring(0,fe+1))}(),Q=this.tokenizer.inlineText(be,ge)){Z=Z.substring(Q.raw.length),Q.raw.slice(-1)!=="_"&&(qe=Q.raw.slice(-1)),tt=!0,ce=O[O.length-1],ce&&ce.type==="text"?(ce.raw+=Q.raw,ce.text+=Q.text):O.push(Q);continue}if(Z){var me="Infinite loop on byte: "+Z.charCodeAt(0);if(this.options.silent){console.error(me);break}else throw new Error(me)}}return O},i(re,null,[{key:"rules",get:function(){return{block:ee,inline:$}}}]),re}(),z=function(){function re(de){this.options=de||e.defaults}var ie=re.prototype;return ie.code=function(Z,O,q){var Q=(O||"").match(/\S*/)[0];if(this.options.highlight){var ce=this.options.highlight(Z,Q);ce!=null&&ce!==Z&&(q=!0,Z=ce)}return Z=Z.replace(/\n$/,"")+`
`,Q?'<pre><code class="'+this.options.langPrefix+m(Q,!0)+'">'+(q?Z:m(Z,!0))+`</code></pre>
`:"<pre><code>"+(q?Z:m(Z,!0))+`</code></pre>
`},ie.blockquote=function(Z){return`<blockquote>
`+Z+`</blockquote>
`},ie.html=function(Z){return Z},ie.heading=function(Z,O,q,Q){if(this.options.headerIds){var ce=this.options.headerPrefix+Q.slug(q);return"<h"+O+' id="'+ce+'">'+Z+"</h"+O+`>
`}return"<h"+O+">"+Z+"</h"+O+`>
`},ie.hr=function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},ie.list=function(Z,O,q){var Q=O?"ol":"ul",ce=O&&q!==1?' start="'+q+'"':"";return"<"+Q+ce+`>
`+Z+"</"+Q+`>
`},ie.listitem=function(Z){return"<li>"+Z+`</li>
`},ie.checkbox=function(Z){return"<input "+(Z?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},ie.paragraph=function(Z){return"<p>"+Z+`</p>
`},ie.table=function(Z,O){return O&&(O="<tbody>"+O+"</tbody>"),`<table>
<thead>
`+Z+`</thead>
`+O+`</table>
`},ie.tablerow=function(Z){return`<tr>
`+Z+`</tr>
`},ie.tablecell=function(Z,O){var q=O.header?"th":"td",Q=O.align?"<"+q+' align="'+O.align+'">':"<"+q+">";return Q+Z+("</"+q+`>
`)},ie.strong=function(Z){return"<strong>"+Z+"</strong>"},ie.em=function(Z){return"<em>"+Z+"</em>"},ie.codespan=function(Z){return"<code>"+Z+"</code>"},ie.br=function(){return this.options.xhtml?"<br/>":"<br>"},ie.del=function(Z){return"<del>"+Z+"</del>"},ie.link=function(Z,O,q){if(Z=C(this.options.sanitize,this.options.baseUrl,Z),Z===null)return q;var Q='<a href="'+m(Z)+'"';return O&&(Q+=' title="'+O+'"'),Q+=">"+q+"</a>",Q},ie.image=function(Z,O,q){if(Z=C(this.options.sanitize,this.options.baseUrl,Z),Z===null)return q;var Q='<img src="'+Z+'" alt="'+q+'"';return O&&(Q+=' title="'+O+'"'),Q+=this.options.xhtml?"/>":">",Q},ie.text=function(Z){return Z},re}(),K=function(){function re(){}var ie=re.prototype;return ie.strong=function(Z){return Z},ie.em=function(Z){return Z},ie.codespan=function(Z){return Z},ie.del=function(Z){return Z},ie.html=function(Z){return Z},ie.text=function(Z){return Z},ie.link=function(Z,O,q){return""+q},ie.image=function(Z,O,q){return""+q},ie.br=function(){return""},re}(),Se=function(){function re(){this.seen={}}var ie=re.prototype;return ie.serialize=function(Z){return Z.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},ie.getNextSafeSlug=function(Z,O){var q=Z,Q=0;if(this.seen.hasOwnProperty(q)){Q=this.seen[Z];do Q++,q=Z+"-"+Q;while(this.seen.hasOwnProperty(q))}return O||(this.seen[Z]=Q,this.seen[q]=0),q},ie.slug=function(Z,O){O===void 0&&(O={});var q=this.serialize(Z);return this.getNextSafeSlug(q,O.dryrun)},re}(),De=function(){function re(de){this.options=de||e.defaults,this.options.renderer=this.options.renderer||new z,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new K,this.slugger=new Se}re.parse=function(Z,O){var q=new re(O);return q.parse(Z)},re.parseInline=function(Z,O){var q=new re(O);return q.parseInline(Z)};var ie=re.prototype;return ie.parse=function(Z,O){O===void 0&&(O=!0);var q="",Q,ce,be,Ae,Pe,tt,qe,wt,me,fe,Ze,Ye,Xe,oe,le,Ve,ae,_e,Oe,He=Z.length;for(Q=0;Q<He;Q++){if(fe=Z[Q],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[fe.type]&&(Oe=this.options.extensions.renderers[fe.type].call({parser:this},fe),Oe!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(fe.type))){q+=Oe||"";continue}switch(fe.type){case"space":continue;case"hr":{q+=this.renderer.hr();continue}case"heading":{q+=this.renderer.heading(this.parseInline(fe.tokens),fe.depth,b(this.parseInline(fe.tokens,this.textRenderer)),this.slugger);continue}case"code":{q+=this.renderer.code(fe.text,fe.lang,fe.escaped);continue}case"table":{for(wt="",qe="",Ae=fe.header.length,ce=0;ce<Ae;ce++)qe+=this.renderer.tablecell(this.parseInline(fe.header[ce].tokens),{header:!0,align:fe.align[ce]});for(wt+=this.renderer.tablerow(qe),me="",Ae=fe.rows.length,ce=0;ce<Ae;ce++){for(tt=fe.rows[ce],qe="",Pe=tt.length,be=0;be<Pe;be++)qe+=this.renderer.tablecell(this.parseInline(tt[be].tokens),{header:!1,align:fe.align[be]});me+=this.renderer.tablerow(qe)}q+=this.renderer.table(wt,me);continue}case"blockquote":{me=this.parse(fe.tokens),q+=this.renderer.blockquote(me);continue}case"list":{for(Ze=fe.ordered,Ye=fe.start,Xe=fe.loose,Ae=fe.items.length,me="",ce=0;ce<Ae;ce++)le=fe.items[ce],Ve=le.checked,ae=le.task,oe="",le.task&&(_e=this.renderer.checkbox(Ve),Xe?le.tokens.length>0&&le.tokens[0].type==="paragraph"?(le.tokens[0].text=_e+" "+le.tokens[0].text,le.tokens[0].tokens&&le.tokens[0].tokens.length>0&&le.tokens[0].tokens[0].type==="text"&&(le.tokens[0].tokens[0].text=_e+" "+le.tokens[0].tokens[0].text)):le.tokens.unshift({type:"text",text:_e}):oe+=_e),oe+=this.parse(le.tokens,Xe),me+=this.renderer.listitem(oe,ae,Ve);q+=this.renderer.list(me,Ze,Ye);continue}case"html":{q+=this.renderer.html(fe.text);continue}case"paragraph":{q+=this.renderer.paragraph(this.parseInline(fe.tokens));continue}case"text":{for(me=fe.tokens?this.parseInline(fe.tokens):fe.text;Q+1<He&&Z[Q+1].type==="text";)fe=Z[++Q],me+=`
`+(fe.tokens?this.parseInline(fe.tokens):fe.text);q+=O?this.renderer.paragraph(me):me;continue}default:{var lt='Token with "'+fe.type+'" type was not found.';if(this.options.silent){console.error(lt);return}else throw new Error(lt)}}}return q},ie.parseInline=function(Z,O){O=O||this.renderer;var q="",Q,ce,be,Ae=Z.length;for(Q=0;Q<Ae;Q++){if(ce=Z[Q],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[ce.type]&&(be=this.options.extensions.renderers[ce.type].call({parser:this},ce),be!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(ce.type))){q+=be||"";continue}switch(ce.type){case"escape":{q+=O.text(ce.text);break}case"html":{q+=O.html(ce.text);break}case"link":{q+=O.link(ce.href,ce.title,this.parseInline(ce.tokens,O));break}case"image":{q+=O.image(ce.href,ce.title,ce.text);break}case"strong":{q+=O.strong(this.parseInline(ce.tokens,O));break}case"em":{q+=O.em(this.parseInline(ce.tokens,O));break}case"codespan":{q+=O.codespan(ce.text);break}case"br":{q+=O.br();break}case"del":{q+=O.del(this.parseInline(ce.tokens,O));break}case"text":{q+=O.text(ce.text);break}default:{var Pe='Token with "'+ce.type+'" type was not found.';if(this.options.silent){console.error(Pe);return}else throw new Error(Pe)}}}return q},re}();function ke(re,ie,de){if(typeof re>"u"||re===null)throw new Error("marked(): input parameter is undefined or null");if(typeof re!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(re)+", string expected");if(typeof ie=="function"&&(de=ie,ie=null),ie=E({},ke.defaults,ie||{}),H(ie),de){var Z=ie.highlight,O;try{O=xe.lex(re,ie)}catch(Ae){return de(Ae)}var q=function(Pe){var tt;if(!Pe)try{ie.walkTokens&&ke.walkTokens(O,ie.walkTokens),tt=De.parse(O,ie)}catch(qe){Pe=qe}return ie.highlight=Z,Pe?de(Pe):de(null,tt)};if(!Z||Z.length<3||(delete ie.highlight,!O.length))return q();var Q=0;ke.walkTokens(O,function(Ae){Ae.type==="code"&&(Q++,setTimeout(function(){Z(Ae.text,Ae.lang,function(Pe,tt){if(Pe)return q(Pe);tt!=null&&tt!==Ae.text&&(Ae.text=tt,Ae.escaped=!0),Q--,Q===0&&q()})},0))}),Q===0&&q();return}function ce(Ae){if(Ae.message+=`
Please report this to https://github.com/markedjs/marked.`,ie.silent)return"<p>An error occurred:</p><pre>"+m(Ae.message+"",!0)+"</pre>";throw Ae}try{var be=xe.lex(re,ie);if(ie.walkTokens){if(ie.async)return Promise.all(ke.walkTokens(be,ie.walkTokens)).then(function(){return De.parse(be,ie)}).catch(ce);ke.walkTokens(be,ie.walkTokens)}return De.parse(be,ie)}catch(Ae){ce(Ae)}}ke.options=ke.setOptions=function(re){return E(ke.defaults,re),l(ke.defaults),ke},ke.getDefaults=a,ke.defaults=e.defaults,ke.use=function(){for(var re=arguments.length,ie=new Array(re),de=0;de<re;de++)ie[de]=arguments[de];var Z=E.apply(void 0,[{}].concat(ie)),O=ke.defaults.extensions||{renderers:{},childTokens:{}},q;ie.forEach(function(Q){if(Q.extensions&&(q=!0,Q.extensions.forEach(function(be){if(!be.name)throw new Error("extension name required");if(be.renderer){var Ae=O.renderers?O.renderers[be.name]:null;Ae?O.renderers[be.name]=function(){for(var Pe=arguments.length,tt=new Array(Pe),qe=0;qe<Pe;qe++)tt[qe]=arguments[qe];var wt=be.renderer.apply(this,tt);return wt===!1&&(wt=Ae.apply(this,tt)),wt}:O.renderers[be.name]=be.renderer}if(be.tokenizer){if(!be.level||be.level!=="block"&&be.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");O[be.level]?O[be.level].unshift(be.tokenizer):O[be.level]=[be.tokenizer],be.start&&(be.level==="block"?O.startBlock?O.startBlock.push(be.start):O.startBlock=[be.start]:be.level==="inline"&&(O.startInline?O.startInline.push(be.start):O.startInline=[be.start]))}be.childTokens&&(O.childTokens[be.name]=be.childTokens)})),Q.renderer&&function(){var be=ke.defaults.renderer||new z,Ae=function(qe){var wt=be[qe];be[qe]=function(){for(var me=arguments.length,fe=new Array(me),Ze=0;Ze<me;Ze++)fe[Ze]=arguments[Ze];var Ye=Q.renderer[qe].apply(be,fe);return Ye===!1&&(Ye=wt.apply(be,fe)),Ye}};for(var Pe in Q.renderer)Ae(Pe);Z.renderer=be}(),Q.tokenizer&&function(){var be=ke.defaults.tokenizer||new ne,Ae=function(qe){var wt=be[qe];be[qe]=function(){for(var me=arguments.length,fe=new Array(me),Ze=0;Ze<me;Ze++)fe[Ze]=arguments[Ze];var Ye=Q.tokenizer[qe].apply(be,fe);return Ye===!1&&(Ye=wt.apply(be,fe)),Ye}};for(var Pe in Q.tokenizer)Ae(Pe);Z.tokenizer=be}(),Q.walkTokens){var ce=ke.defaults.walkTokens;Z.walkTokens=function(be){var Ae=[];return Ae.push(Q.walkTokens.call(this,be)),ce&&(Ae=Ae.concat(ce.call(this,be))),Ae}}q&&(Z.extensions=O),ke.setOptions(Z)})},ke.walkTokens=function(re,ie){for(var de=[],Z=function(){var ce=q.value;switch(de=de.concat(ie.call(ke,ce)),ce.type){case"table":{for(var be=o(ce.header),Ae;!(Ae=be()).done;){var Pe=Ae.value;de=de.concat(ke.walkTokens(Pe.tokens,ie))}for(var tt=o(ce.rows),qe;!(qe=tt()).done;)for(var wt=qe.value,me=o(wt),fe;!(fe=me()).done;){var Ze=fe.value;de=de.concat(ke.walkTokens(Ze.tokens,ie))}break}case"list":{de=de.concat(ke.walkTokens(ce.items,ie));break}default:ke.defaults.extensions&&ke.defaults.extensions.childTokens&&ke.defaults.extensions.childTokens[ce.type]?ke.defaults.extensions.childTokens[ce.type].forEach(function(Ye){de=de.concat(ke.walkTokens(ce[Ye],ie))}):ce.tokens&&(de=de.concat(ke.walkTokens(ce.tokens,ie)))}},O=o(re),q;!(q=O()).done;)Z();return de},ke.parseInline=function(re,ie){if(typeof re>"u"||re===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof re!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(re)+", string expected");ie=E({},ke.defaults,ie||{}),H(ie);try{var de=xe.lexInline(re,ie);return ie.walkTokens&&ke.walkTokens(de,ie.walkTokens),De.parseInline(de,ie)}catch(Z){if(Z.message+=`
Please report this to https://github.com/markedjs/marked.`,ie.silent)return"<p>An error occurred:</p><pre>"+m(Z.message+"",!0)+"</pre>";throw Z}},ke.Parser=De,ke.parser=De.parse,ke.Renderer=z,ke.TextRenderer=K,ke.Lexer=xe,ke.lexer=xe.lex,ke.Tokenizer=ne,ke.Slugger=Se,ke.parse=ke;var je=ke.options,et=ke.setOptions,mt=ke.use,ze=ke.walkTokens,ht=ke.parseInline,nt=ke,zt=De.parse,Fe=xe.lex;e.Lexer=xe,e.Parser=De,e.Renderer=z,e.Slugger=Se,e.TextRenderer=K,e.Tokenizer=ne,e.getDefaults=a,e.lexer=Fe,e.marked=ke,e.options=je,e.parse=nt,e.parseInline=ht,e.parser=zt,e.setOptions=et,e.use=mt,e.walkTokens=ze,Object.defineProperty(e,"__esModule",{value:!0})})})();Wr.Lexer||exports.Lexer;Wr.Parser||exports.Parser;Wr.Renderer||exports.Renderer;Wr.Slugger||exports.Slugger;Wr.TextRenderer||exports.TextRenderer;Wr.Tokenizer||exports.Tokenizer;Wr.getDefaults||exports.getDefaults;Wr.lexer||exports.lexer;var wl=Wr.marked||exports.marked;Wr.options||exports.options;Wr.parse||exports.parse;Wr.parseInline||exports.parseInline;Wr.parser||exports.parser;Wr.setOptions||exports.setOptions;Wr.use||exports.use;Wr.walkTokens||exports.walkTokens;function xGe(n){return JSON.stringify(n,TGe)}function lW(n){let e=JSON.parse(n);return e=cW(e),e}function TGe(n,e){return e instanceof RegExp?{$mid:2,source:e.source,flags:e.flags}:e}function cW(n,e=0){if(!n||e>200)return n;if(typeof n=="object"){switch(n.$mid){case 1:return Ft.revive(n);case 2:return new RegExp(n.source,n.flags);case 17:return new Date(n.source)}if(n instanceof R2||n instanceof Uint8Array)return n;if(Array.isArray(n))for(let t=0;t<n.length;++t)n[t]=cW(n[t],e+1);else for(const t in n)Object.hasOwnProperty.call(n,t)&&(n[t]=cW(n[t],e+1))}return n}const CR=Object.freeze({image:(n,e,t)=>{let i=[],s=[];return n&&({href:n,dimensions:i}=kGe(n),s.push(`src="${Hy(n)}"`)),t&&s.push(`alt="${Hy(t)}"`),e&&s.push(`title="${Hy(e)}"`),i.length&&(s=s.concat(i)),"<img "+s.join(" ")+">"},paragraph:n=>`<p>${n}</p>`,link:(n,e,t)=>typeof n!="string"?"":(n===t&&(t=SR(t)),e=typeof e=="string"?Hy(SR(e)):"",n=SR(n),n=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="${n}" title="${e||n}" draggable="false">${t}</a>`)});function nT(n,e={},t={}){var i,s;const r=new ct;let o=!1;const a=zP(e),l=function(b){let w;try{w=lW(decodeURIComponent(b))}catch{}return w?(w=fne(w,v=>{if(n.uris&&n.uris[v])return Ft.revive(n.uris[v])}),encodeURIComponent(JSON.stringify(w))):b},c=function(b,w){const v=n.uris&&n.uris[b];let _=Ft.revive(v);return w?b.startsWith(Mt.data+":")?b:(_||(_=Ft.parse(b)),Sie.uriToBrowserUri(_).toString(!0)):!_||Ft.parse(b).toString()===_.toString()?b:(_.query&&(_=_.with({query:l(_.query)})),_.toString())},d=new wl.Renderer;d.image=CR.image,d.link=CR.link,d.paragraph=CR.paragraph;const u=[],h=[];if(e.codeBlockRendererSync?d.code=(b,w)=>{const v=TY.nextId(),_=e.codeBlockRendererSync(DY(w),b);return h.push([v,_]),`<div class="code" data-code="${v}">${Jv(b)}</div>`}:e.codeBlockRenderer&&(d.code=(b,w)=>{const v=TY.nextId(),_=e.codeBlockRenderer(DY(w),b);return u.push(_.then(y=>[v,y])),`<div class="code" data-code="${v}">${Jv(b)}</div>`}),e.actionHandler){const b=function(_){let y=_.target;if(!(y.tagName!=="A"&&(y=y.parentElement,!y||y.tagName!=="A")))try{let C=y.dataset.href;C&&(n.baseUri&&(C=LR(Ft.from(n.baseUri),C)),e.actionHandler.callback(C,_))}catch(C){gi(C)}finally{_.preventDefault()}},w=e.actionHandler.disposables.add(new Yt(a,"click")),v=e.actionHandler.disposables.add(new Yt(a,"auxclick"));e.actionHandler.disposables.add(Be.any(w.event,v.event)(_=>{const y=new Sl(pt(a),_);!y.leftButton&&!y.middleButton||b(y)})),e.actionHandler.disposables.add(we(a,"keydown",_=>{const y=new Ji(_);!y.equals(10)&&!y.equals(3)||b(y)}))}n.supportHtml||(t.sanitizer=b=>{var w;return!((w=e.sanitizerOptions)===null||w===void 0)&&w.replaceWithPlaintext?Jv(b):(n.isTrusted?b.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?b:""},t.sanitize=!0,t.silent=!0),t.renderer=d;let f=(i=n.value)!==null&&i!==void 0?i:"";f.length>1e5&&(f=`${f.substr(0,1e5)}`),n.supportThemeIcons&&(f=_Ge(f));let g;if(e.fillInIncompleteTokens){const b={...wl.defaults,...t},w=wl.lexer(f,b),v=ZGe(w);g=wl.parser(v,b)}else g=wl.parse(f,t);n.supportThemeIcons&&(g=hg(g).map(w=>typeof w=="string"?w:w.outerHTML).join(""));const p=new DOMParser().parseFromString(dW({isTrusted:n.isTrusted,...e.sanitizerOptions},g),"text/html");if(p.body.querySelectorAll("img, audio, video, source").forEach(b=>{const w=b.getAttribute("src");if(w){let v=w;try{n.baseUri&&(v=LR(Ft.from(n.baseUri),v))}catch{}if(b.setAttribute("src",c(v,!0)),e.remoteImageIsAllowed){const _=Ft.parse(v);_.scheme!==Mt.file&&_.scheme!==Mt.data&&!e.remoteImageIsAllowed(_)&&b.replaceWith(St("",void 0,b.outerHTML))}}}),p.body.querySelectorAll("a").forEach(b=>{const w=b.getAttribute("href");if(b.setAttribute("href",""),!w||/^data:|javascript:/i.test(w)||/^command:/i.test(w)&&!n.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(w))b.replaceWith(...b.childNodes);else{let v=c(w,!1);n.baseUri&&(v=LR(Ft.from(n.baseUri),w)),b.dataset.href=v}}),a.innerHTML=dW({isTrusted:n.isTrusted,...e.sanitizerOptions},p.body.innerHTML),u.length>0)Promise.all(u).then(b=>{var w,v;if(o)return;const _=new Map(b),y=a.querySelectorAll("div[data-code]");for(const C of y){const S=_.get((w=C.dataset.code)!==null&&w!==void 0?w:"");S&&Ir(C,S)}(v=e.asyncRenderCallback)===null||v===void 0||v.call(e)});else if(h.length>0){const b=new Map(h),w=a.querySelectorAll("div[data-code]");for(const v of w){const _=b.get((s=v.dataset.code)!==null&&s!==void 0?s:"");_&&Ir(v,_)}}if(e.asyncRenderCallback)for(const b of a.getElementsByTagName("img")){const w=r.add(we(b,"load",()=>{w.dispose(),e.asyncRenderCallback()}))}return{element:a,dispose:()=>{o=!0,r.dispose()}}}function DY(n){if(!n)return"";const e=n.split(/[\s+|:|,|\{|\?]/,1);return e.length?e[0]:n}function LR(n,e){return/^\w[\w\d+.-]*:/.test(e)?e:n.path.endsWith("/")?zU(n,e).toString():zU(lPe(n),e).toString()}const DGe=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];function dW(n,e){const{config:t,allowedSchemes:i}=MGe(n),s=new ct;s.add(IY("uponSanitizeAttribute",(r,o)=>{var a;if(o.attrName==="style"||o.attrName==="class"){if(r.tagName==="SPAN"){if(o.attrName==="style"){o.keepAttr=/^(color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(background-color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?$/.test(o.attrValue);return}else if(o.attrName==="class"){o.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(o.attrValue);return}}o.keepAttr=!1;return}else if(r.tagName==="INPUT"&&((a=r.attributes.getNamedItem("type"))===null||a===void 0?void 0:a.value)==="checkbox"){if(o.attrName==="type"&&o.attrValue==="checkbox"||o.attrName==="disabled"||o.attrName==="checked"){o.keepAttr=!0;return}o.keepAttr=!1}})),s.add(IY("uponSanitizeElement",(r,o)=>{var a,l;if(o.tagName==="input"&&(((a=r.attributes.getNamedItem("type"))===null||a===void 0?void 0:a.value)==="checkbox"?r.setAttribute("disabled",""):n.replaceWithPlaintext||(l=r.parentElement)===null||l===void 0||l.removeChild(r)),n.replaceWithPlaintext&&!o.allowedTags[o.tagName]&&o.tagName!=="body"&&r.parentElement){let c,d;if(o.tagName==="#comment")c=`<!--${r.textContent}-->`;else{const g=DGe.includes(o.tagName),m=r.attributes.length?" "+Array.from(r.attributes).map(p=>`${p.name}="${p.value}"`).join(" "):"";c=`<${o.tagName}${m}>`,g||(d=`</${o.tagName}>`)}const u=document.createDocumentFragment(),h=r.parentElement.ownerDocument.createTextNode(c);u.appendChild(h);const f=d?r.parentElement.ownerDocument.createTextNode(d):void 0;for(;r.firstChild;)u.appendChild(r.firstChild);f&&u.appendChild(f),r.parentElement.replaceChild(u,r)}})),s.add(U5e(i));try{return rie(e,{...t,RETURN_TRUSTED_TYPE:!0})}finally{s.dispose()}}const IGe=["align","autoplay","alt","checked","class","controls","data-code","data-href","disabled","draggable","height","href","loop","muted","playsinline","poster","src","style","target","title","type","width","start"];function MGe(n){var e;const t=[Mt.http,Mt.https,Mt.mailto,Mt.data,Mt.file,Mt.vscodeFileResource,Mt.vscodeRemote,Mt.vscodeRemoteResource];return n.isTrusted&&t.push(Mt.command),{config:{ALLOWED_TAGS:(e=n.allowedTags)!==null&&e!==void 0?e:[...Y5e],ALLOWED_ATTR:IGe,ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:t}}function EGe(n){return typeof n=="string"?n:NGe(n)}function NGe(n,e){var t;let i=(t=n.value)!==null&&t!==void 0?t:"";i.length>1e5&&(i=`${i.substr(0,1e5)}`);const s=wl.parse(i,{renderer:e?AGe.value:WGe.value}).replace(/&(#\d+|[a-zA-Z]+);/g,r=>{var o;return(o=RGe.get(r))!==null&&o!==void 0?o:r});return dW({isTrusted:!1},s).toString()}const RGe=new Map([["&quot;",'"'],["&nbsp;"," "],["&amp;","&"],["&#39;","'"],["&lt;","<"],["&gt;",">"]]);function jse(){const n=new wl.Renderer;return n.code=e=>e,n.blockquote=e=>e,n.html=e=>"",n.heading=(e,t,i)=>e+`
`,n.hr=()=>"",n.list=(e,t)=>e,n.listitem=e=>e+`
`,n.paragraph=e=>e+`
`,n.table=(e,t)=>e+t+`
`,n.tablerow=e=>e,n.tablecell=(e,t)=>e+" ",n.strong=e=>e,n.em=e=>e,n.codespan=e=>e,n.br=()=>`
`,n.del=e=>e,n.image=(e,t,i)=>"",n.text=e=>e,n.link=(e,t,i)=>i,n}const WGe=new cu(n=>jse()),AGe=new cu(()=>{const n=jse();return n.code=e=>"\n```"+e+"```\n",n});function h1(n){let e="";return n.forEach(t=>{e+=t.raw}),e}function Jse(n){var e,t;if(n.tokens)for(let i=n.tokens.length-1;i>=0;i--){const s=n.tokens[i];if(s.type==="text"){const r=s.raw.split(`
`),o=r[r.length-1];if(o.includes("`"))return XGe(n);if(o.includes("**"))return jGe(n);if(o.match(/\*\w/))return zGe(n);if(o.match(/(^|\s)__\w/))return JGe(n);if(o.match(/(^|\s)_\w/))return HGe(n);if(FGe(o)||VGe(o)&&n.tokens.slice(0,i).some(a=>a.type==="text"&&a.raw.match(/\[[^\]]*$/))){const a=n.tokens.slice(i+1);return((e=a[0])===null||e===void 0?void 0:e.type)==="link"&&((t=a[1])===null||t===void 0?void 0:t.type)==="text"&&a[1].raw.match(/^ *"[^"]*$/)||o.match(/^[^"]* +"[^"]*$/)?YGe(n):UGe(n)}else if(o.match(/(^|\s)\[\w*/))return KGe(n)}}}function FGe(n){return!!n.match(/(^|\s)\[.*\]\(\w*/)}function VGe(n){return!!n.match(/^[^\[]*\]\([^\)]*$/)}function PGe(n){var e;const t=n.items[n.items.length-1],i=t.tokens?t.tokens[t.tokens.length-1]:void 0;let s;if(i?.type==="text"&&!("inRawBlock"in t)&&(s=Jse(i)),!s||s.type!=="paragraph")return;const r=h1(n.items.slice(0,-1)),o=(e=t.raw.match(/^(\s*(-|\d+\.) +)/))===null||e===void 0?void 0:e[0];if(!o)return;const a=o+h1(t.tokens.slice(0,-1))+s.raw,l=wl.lexer(r+a)[0];if(l.type==="list")return l}const OGe=3;function ZGe(n){for(let e=0;e<OGe;e++){const t=GGe(n);if(t)n=t;else break}return n}function GGe(n){let e,t;for(e=0;e<n.length;e++){const i=n[e];let s;if(i.type==="paragraph"&&(s=i.raw.match(/(\n|^)(````*)/))){const r=s[2];t=BGe(n.slice(e),r);break}if(i.type==="paragraph"&&i.raw.match(/(\n|^)\|/)){t=$Ge(n.slice(e));break}if(e===n.length-1&&i.type==="list"){const r=PGe(i);if(r){t=[r];break}}if(e===n.length-1&&i.type==="paragraph"){const r=Jse(i);if(r){t=[r];break}}}if(t){const i=[...n.slice(0,e),...t];return i.links=n.links,i}return null}function BGe(n,e){const t=h1(n);return wl.lexer(t+`
${e}`)}function XGe(n){return uf(n,"`")}function zGe(n){return uf(n,"*")}function HGe(n){return uf(n,"_")}function UGe(n){return uf(n,")")}function YGe(n){return uf(n,'")')}function KGe(n){return uf(n,"](https://microsoft.com)")}function jGe(n){return uf(n,"**")}function JGe(n){return uf(n,"__")}function uf(n,e){const t=h1(Array.isArray(n)?n:[n]);return wl.lexer(t+e)[0]}function $Ge(n){const e=h1(n),t=e.split(`
`);let i,s=!1;for(let r=0;r<t.length;r++){const o=t[r].trim();if(typeof i>"u"&&o.match(/^\s*\|/)){const a=o.match(/(\|[^\|]+)(?=\||$)/g);a&&(i=a.length)}else if(typeof i=="number")if(o.match(/^\s*\|/)){if(r!==t.length-1)return;s=!0}else return}if(typeof i=="number"&&i>0){const r=s?t.slice(0,-1).join(`
`):e,o=!!r.match(/\|\s*$/),a=r+(o?"":"|")+`
|${" --- |".repeat(i)}`;return wl.lexer(a)}}function IY(n,e){return oie(n,e),Et(()=>aie(n))}const pm=ri("openerService");function QGe(n){let e;const t=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(n.fragment);return t&&(e={startLineNumber:parseInt(t[1]),startColumn:t[2]?parseInt(t[2]):1,endLineNumber:t[4]?parseInt(t[4]):void 0,endColumn:t[4]?t[5]?parseInt(t[5]):1:void 0},n=n.with({fragment:""})),{selection:e,uri:n}}var qGe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},MY=function(n,e){return function(t,i){e(t,i,n)}},uW;let PL=uW=class{constructor(e,t,i){this._options=e,this._languageService=t,this._openerService=i,this._onDidRenderAsync=new ue,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,i){if(!e)return{element:document.createElement("span"),dispose:()=>{}};const s=new ct,r=s.add(nT(e,{...this._getRenderOptions(e,s),...t},i));return r.element.classList.add("rendered-markdown"),{element:r.element,dispose:()=>s.dispose()}}_getRenderOptions(e,t){return{codeBlockRenderer:async(i,s)=>{var r,o,a;let l;i?l=this._languageService.getLanguageIdByLanguageName(i):this._options.editor&&(l=(r=this._options.editor.getModel())===null||r===void 0?void 0:r.getLanguageId()),l||(l=Va);const c=await VOe(this._languageService,s,l),d=document.createElement("span");if(d.innerHTML=(a=(o=uW._ttpTokenizer)===null||o===void 0?void 0:o.createHTML(c))!==null&&a!==void 0?a:c,this._options.editor){const u=this._options.editor.getOption(50);$s(d,u)}else this._options.codeBlockFontFamily&&(d.style.fontFamily=this._options.codeBlockFontFamily);return this._options.codeBlockFontSize!==void 0&&(d.style.fontSize=this._options.codeBlockFontSize),d},asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:i=>jP(this._openerService,i,e.isTrusted),disposables:t}}}};PL._ttpTokenizer=mm("tokenizeToString",{createHTML(n){return n}});PL=uW=qGe([MY(1,Cs),MY(2,pm)],PL);async function jP(n,e,t){try{return await n.open(e,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:e7e(t)})}catch(i){return gi(i),!1}}function e7e(n){return n===!0?!0:n&&Array.isArray(n.enabledCommands)?n.enabledCommands:!1}var t7e=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},EY=function(n,e){return function(t,i){e(t,i,n)}},$S;let Pc=$S=class{static get(e){return e.getContribution($S.ID)}constructor(e,t,i){this._openerService=i,this._messageWidget=new ha,this._messageListeners=new ct,this._mouseOverMessage=!1,this._editor=e,this._visible=$S.MESSAGE_VISIBLE.bindTo(t)}dispose(){var e;(e=this._message)===null||e===void 0||e.dispose(),this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(e,t){Mg(Xd(e)?e.value:e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._message=Xd(e)?nT(e,{actionHandler:{callback:s=>{this.closeMessage(),jP(this._openerService,s,Xd(e)?e.isTrusted:void 0)},disposables:this._messageListeners}}):void 0,this._messageWidget.value=new NY(this._editor,t,typeof e=="string"?e:this._message.element),this._messageListeners.add(Be.debounce(this._editor.onDidBlurEditorText,(s,r)=>r,0)(()=>{this._mouseOverMessage||this._messageWidget.value&&ss(Js(),this._messageWidget.value.getDomNode())||this.closeMessage()})),this._messageListeners.add(this._editor.onDidChangeCursorPosition(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidDispose(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeModel(()=>this.closeMessage())),this._messageListeners.add(we(this._messageWidget.value.getDomNode(),Ge.MOUSE_ENTER,()=>this._mouseOverMessage=!0,!0)),this._messageListeners.add(we(this._messageWidget.value.getDomNode(),Ge.MOUSE_LEAVE,()=>this._mouseOverMessage=!1,!0));let i;this._messageListeners.add(this._editor.onMouseMove(s=>{s.target.position&&(i?i.containsPosition(s.target.position)||this.closeMessage():i=new te(t.lineNumber-3,1,s.target.position.lineNumber+3,1))}))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(NY.fadeOut(this._messageWidget.value))}};Pc.ID="editor.contrib.messageController";Pc.MESSAGE_VISIBLE=new it("messageVisible",!1,L("messageVisible","Whether the editor is currently showing an inline message"));Pc=$S=t7e([EY(1,oi),EY(2,pm)],Pc);const i7e=Fc.bindToContribution(Pc.get);Ct(new i7e({id:"leaveEditorMessage",precondition:Pc.MESSAGE_VISIBLE,handler:n=>n.closeMessage(),kbOpts:{weight:130,primary:9}}));class NY{static fadeOut(e){const t=()=>{e.dispose(),clearTimeout(i),e.getDomNode().removeEventListener("animationend",t)},i=setTimeout(t,110);return e.getDomNode().addEventListener("animationend",t),e.getDomNode().classList.add("fadeOut"),{dispose:t}}constructor(e,{lineNumber:t,column:i},s){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=e,this._editor.revealLinesInCenterIfOutsideViewport(t,t,0),this._position={lineNumber:t,column:i},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage"),this._domNode.style.marginLeft="-6px";const r=document.createElement("div");r.classList.add("anchor","top"),this._domNode.appendChild(r);const o=document.createElement("div");typeof s=="string"?(o.classList.add("message"),o.textContent=s):(s.classList.add("message"),o.appendChild(s)),this._domNode.appendChild(o);const a=document.createElement("div");a.classList.add("anchor","below"),this._domNode.appendChild(a),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2],positionAffinity:1}}afterRender(e){this._domNode.classList.toggle("below",e===2)}}du(Pc.ID,Pc,4);const bm=ri("clipboardService"),$se=ri("progressService"),JP=ri("editorProgressService"),n7e={ctrlCmd:!1,alt:!1};var Ob;(function(n){n[n.Blur=1]="Blur",n[n.Gesture=2]="Gesture",n[n.Other=3]="Other"})(Ob||(Ob={}));var rc;(function(n){n[n.NONE=0]="NONE",n[n.FIRST=1]="FIRST",n[n.SECOND=2]="SECOND",n[n.LAST=3]="LAST"})(rc||(rc={}));var Oi;(function(n){n[n.First=1]="First",n[n.Second=2]="Second",n[n.Last=3]="Last",n[n.Next=4]="Next",n[n.Previous=5]="Previous",n[n.NextPage=6]="NextPage",n[n.PreviousPage=7]="PreviousPage",n[n.NextSeparator=8]="NextSeparator",n[n.PreviousSeparator=9]="PreviousSeparator"})(Oi||(Oi={}));const D0=ri("quickInputService"),s7e=()=>({get delay(){return-1},dispose:()=>{},showHover:()=>{}});let sT=s7e;const r7e=new cu(()=>sT("mouse",!1)),o7e=new cu(()=>sT("element",!1));function a7e(n){sT=n}function _o(n){return n==="element"?o7e.value:r7e.value}function Zb(){return sT("element",!0)}let Qse={showHover:()=>{},hideHover:()=>{},showAndFocusLastHover:()=>{},setupUpdatableHover:()=>null,triggerUpdatableHover:()=>{}};function l7e(n){Qse=n}function Kc(){return Qse}Ce.white.toString(),Ce.white.toString();class OL extends Le{get onDidClick(){return this._onDidClick.event}constructor(e,t){super(),this._label="",this._onDidClick=this._register(new ue),this._onDidEscape=this._register(new ue),this.options=t,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),this._element.classList.toggle("secondary",!!t.secondary);const i=t.secondary?t.buttonSecondaryBackground:t.buttonBackground,s=t.secondary?t.buttonSecondaryForeground:t.buttonForeground;this._element.style.color=s||"",this._element.style.backgroundColor=i||"",t.supportShortLabel&&(this._labelShortElement=document.createElement("div"),this._labelShortElement.classList.add("monaco-button-label-short"),this._element.appendChild(this._labelShortElement),this._labelElement=document.createElement("div"),this._labelElement.classList.add("monaco-button-label"),this._element.appendChild(this._labelElement),this._element.classList.add("monaco-text-button-with-short-label")),typeof t.title=="string"&&this.setTitle(t.title),typeof t.ariaLabel=="string"&&this._element.setAttribute("aria-label",t.ariaLabel),e.appendChild(this._element),this._register(Ki.addTarget(this._element)),[Ge.CLICK,Gi.Tap].forEach(r=>{this._register(we(this._element,r,o=>{if(!this.enabled){$t.stop(o);return}this._onDidClick.fire(o)}))}),this._register(we(this._element,Ge.KEY_DOWN,r=>{const o=new Ji(r);let a=!1;this.enabled&&(o.equals(3)||o.equals(10))?(this._onDidClick.fire(r),a=!0):o.equals(9)&&(this._onDidEscape.fire(r),this._element.blur(),a=!0),a&&$t.stop(o,!0)})),this._register(we(this._element,Ge.MOUSE_OVER,r=>{this._element.classList.contains("disabled")||this.updateBackground(!0)})),this._register(we(this._element,Ge.MOUSE_OUT,r=>{this.updateBackground(!1)})),this.focusTracker=this._register(Ig(this._element)),this._register(this.focusTracker.onDidFocus(()=>{this.enabled&&this.updateBackground(!0)})),this._register(this.focusTracker.onDidBlur(()=>{this.enabled&&this.updateBackground(!1)}))}dispose(){super.dispose(),this._element.remove()}getContentElements(e){const t=[];for(let i of hg(e))if(typeof i=="string"){if(i=i.trim(),i==="")continue;const s=document.createElement("span");s.textContent=i,t.push(s)}else t.push(i);return t}updateBackground(e){let t;this.options.secondary?t=e?this.options.buttonSecondaryHoverBackground:this.options.buttonSecondaryBackground:t=e?this.options.buttonHoverBackground:this.options.buttonBackground,t&&(this._element.style.backgroundColor=t)}get element(){return this._element}set label(e){var t;if(this._label===e||Xd(this._label)&&Xd(e)&&SGe(this._label,e))return;this._element.classList.add("monaco-text-button");const i=this.options.supportShortLabel?this._labelElement:this._element;if(Xd(e)){const r=nT(e,{inline:!0});r.dispose();const o=(t=r.element.querySelector("p"))===null||t===void 0?void 0:t.innerHTML;if(o){const a=rie(o,{ADD_TAGS:["b","i","u","code","span"],ALLOWED_ATTR:["class"],RETURN_TRUSTED_TYPE:!0});i.innerHTML=a}else Ir(i)}else this.options.supportIcons?Ir(i,...this.getContentElements(e)):i.textContent=e;let s="";typeof this.options.title=="string"?s=this.options.title:this.options.title&&(s=EGe(e)),this.setTitle(s),typeof this.options.ariaLabel=="string"?this._element.setAttribute("aria-label",this.options.ariaLabel):this.options.ariaLabel&&this._element.setAttribute("aria-label",s),this._label=e}get label(){return this._label}set icon(e){this._element.classList.add(...Vt.asClassNameArray(e))}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}setTitle(e){var t;!this._hover&&e!==""?this._hover=this._register(Kc().setupUpdatableHover((t=this.options.hoverDelegate)!==null&&t!==void 0?t:_o("mouse"),this._element,e)):this._hover&&this._hover.update(e)}}function kR(n,e){return e&&(n.stack||n.stacktrace)?L("stackTrace.format","{0}: {1}",WY(n),RY(n.stack)||RY(n.stacktrace)):WY(n)}function RY(n){return Array.isArray(n)?n.join(`
`):n}function WY(n){return n.code==="ERR_UNC_HOST_NOT_ALLOWED"?`${n.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof n.code=="string"&&typeof n.errno=="number"&&typeof n.syscall=="string"?L("nodeExceptionMessage","A system error occurred ({0})",n.message):n.message||L("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function hW(n=null,e=!1){if(!n)return L("error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(n)){const t=Wg(n),i=hW(t[0],e);return t.length>1?L("error.moreErrors","{0} ({1} errors in total)",i,t.length):i}if(Dr(n))return n;if(n.detail){const t=n.detail;if(t.error)return kR(t.error,e);if(t.exception)return kR(t.exception,e)}return n.stack?kR(n,e):n.message?n.message:L("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}const I0=ri("contextViewService"),jc=ri("contextMenuService");var qse=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Zp=function(n,e){return function(t,i){e(t,i,n)}},fW;let ZL=fW=class extends Le{constructor(e,t,i,s,r,o,a,l,c,d){super(),this.typeId=e,this.editor=t,this.showCommand=s,this.range=r,this.edits=o,this.onSelectNewEdit=a,this._contextMenuService=l,this._keybindingService=d,this.allowEditorOverflow=!0,this.suppressMouseDown=!0,this.create(),this.visibleContext=i.bindTo(c),this.visibleContext.set(!0),this._register(Et(()=>this.visibleContext.reset())),this.editor.addContentWidget(this),this.editor.layoutContentWidget(this),this._register(Et(()=>this.editor.removeContentWidget(this))),this._register(this.editor.onDidChangeCursorPosition(u=>{r.containsPosition(u.position)||this.dispose()})),this._register(Be.runAndSubscribe(d.onDidUpdateKeybindings,()=>{this._updateButtonTitle()}))}_updateButtonTitle(){var e;const t=(e=this._keybindingService.lookupKeybinding(this.showCommand.id))===null||e===void 0?void 0:e.getLabel();this.button.element.title=this.showCommand.label+(t?` (${t})`:"")}create(){this.domNode=St(".post-edit-widget"),this.button=this._register(new OL(this.domNode,{supportIcons:!0})),this.button.label="$(insert)",this._register(we(this.domNode,Ge.CLICK,()=>this.showSelector()))}getId(){return fW.baseId+"."+this.typeId}getDomNode(){return this.domNode}getPosition(){return{position:this.range.getEndPosition(),preference:[2]}}showSelector(){this._contextMenuService.showContextMenu({getAnchor:()=>{const e=ho(this.button.element);return{x:e.left+e.width,y:e.top+e.height}},getActions:()=>this.edits.allEdits.map((e,t)=>og({id:"",label:e.title,checked:t===this.edits.activeEditIndex,run:()=>{if(t!==this.edits.activeEditIndex)return this.onSelectNewEdit(t)}}))})}};ZL.baseId="editor.widget.postEditWidget";ZL=fW=qse([Zp(7,jc),Zp(8,oi),Zp(9,Ls)],ZL);let gW=class extends Le{constructor(e,t,i,s,r,o,a){super(),this._id=e,this._editor=t,this._visibleContext=i,this._showCommand=s,this._instantiationService=r,this._bulkEditService=o,this._notificationService=a,this._currentWidget=this._register(new ha),this._register(Be.any(t.onDidChangeModel,t.onDidChangeModelContent)(()=>this.clear()))}async applyEditAndShowIfNeeded(e,t,i,s,r){const o=this._editor.getModel();if(!o||!e.length)return;const a=t.allEdits.at(t.activeEditIndex);if(!a)return;const l=async p=>{const b=this._editor.getModel();b&&(await b.undo(),this.applyEditAndShowIfNeeded(e,{activeEditIndex:p,allEdits:t.allEdits},i,s,r))},c=(p,b)=>{_0(p)||(this._notificationService.error(b),i&&this.show(e[0],t,l))};let d;try{d=await s(a,r)}catch(p){return c(p,L("resolveError",`Error resolving edit '{0}':
{1}`,a.title,hW(p)))}if(r.isCancellationRequested)return;const u=Wse(o.uri,e,d),h=e[0],f=o.deltaDecorations([],[{range:h,options:{description:"paste-line-suffix",stickiness:0}}]);this._editor.focus();let g,m;try{g=await this._bulkEditService.apply(u,{editor:this._editor,token:r}),m=o.getDecorationRange(f[0])}catch(p){return c(p,L("applyError",`Error applying edit '{0}':
{1}`,a.title,hW(p)))}finally{o.deltaDecorations(f,[])}r.isCancellationRequested||i&&g.isApplied&&t.allEdits.length>1&&this.show(m??h,t,l)}show(e,t,i){this.clear(),this._editor.hasModel()&&(this._currentWidget.value=this._instantiationService.createInstance(ZL,this._id,this._editor,this._visibleContext,this._showCommand,e,t,i))}clear(){this._currentWidget.clear()}tryShowSelector(){var e;(e=this._currentWidget.value)===null||e===void 0||e.showSelector()}};gW=qse([Zp(4,Si),Zp(5,PP),Zp(6,Rr)],gW);var c7e=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Vm=function(n,e){return function(t,i){e(t,i,n)}},Mf;const d7e="editor.changePasteType",u7e=new it("pasteWidgetVisible",!1,L("pasteWidgetVisible","Whether the paste widget is showing")),xR="application/vnd.code.copyMetadata";let GL=Mf=class extends Le{static get(e){return e.getContribution(Mf.ID)}constructor(e,t,i,s,r,o,a){super(),this._bulkEditService=i,this._clipboardService=s,this._languageFeaturesService=r,this._quickInputService=o,this._progressService=a,this._editor=e;const l=e.getContainerDomNode();this._register(we(l,"copy",c=>this.handleCopy(c))),this._register(we(l,"cut",c=>this.handleCopy(c))),this._register(we(l,"paste",c=>this.handlePaste(c),!0)),this._pasteProgressManager=this._register(new nW("pasteIntoEditor",e,t)),this._postPasteWidgetManager=this._register(t.createInstance(gW,"pasteIntoEditor",e,u7e,{id:d7e,label:L("postPasteWidgetTitle","Show paste options...")}))}changePasteType(){this._postPasteWidgetManager.tryShowSelector()}pasteAs(e){this._editor.focus();try{this._pasteAsActionContext={preferred:e},y0().execCommand("paste")}finally{this._pasteAsActionContext=void 0}}clearWidgets(){this._postPasteWidgetManager.clear()}isPasteAsEnabled(){return this._editor.getOption(85).enabled&&!this._editor.getOption(91)}async finishedPaste(){await this._currentPasteOperation}handleCopy(e){var t,i;if(!this._editor.hasTextFocus()||(rf&&this._clipboardService.writeResources([]),!e.clipboardData||!this.isPasteAsEnabled()))return;const s=this._editor.getModel(),r=this._editor.getSelections();if(!s||!r?.length)return;const o=this._editor.getOption(37);let a=r;const l=r.length===1&&r[0].isEmpty();if(l){if(!o)return;a=[new te(a[0].startLineNumber,1,a[0].startLineNumber,1+s.getLineLength(a[0].startLineNumber))]}const c=(t=this._editor._getViewModel())===null||t===void 0?void 0:t.getPlainTextToCopy(r,o,Mr),u={multicursorText:Array.isArray(c)?c:null,pasteOnNewLine:l,mode:null},h=this._languageFeaturesService.documentPasteEditProvider.ordered(s).filter(b=>!!b.prepareDocumentPaste);if(!h.length){this.setCopyMetadata(e.clipboardData,{defaultPastePayload:u});return}const f=Mse(e.clipboardData),g=h.flatMap(b=>{var w;return(w=b.copyMimeTypes)!==null&&w!==void 0?w:[]}),m=Dse();this.setCopyMetadata(e.clipboardData,{id:m,providerCopyMimeTypes:g,defaultPastePayload:u});const p=Od(async b=>{const w=Wg(await Promise.all(h.map(async v=>{try{return await v.prepareDocumentPaste(s,a,f,b)}catch(_){console.error(_);return}})));w.reverse();for(const v of w)for(const[_,y]of v)f.replace(_,y);return f});(i=Mf._currentCopyOperation)===null||i===void 0||i.dataTransferPromise.cancel(),Mf._currentCopyOperation={handle:m,dataTransferPromise:p}}async handlePaste(e){var t,i,s,r;if(!e.clipboardData||!this._editor.hasTextFocus())return;(t=Pc.get(this._editor))===null||t===void 0||t.closeMessage(),(i=this._currentPasteOperation)===null||i===void 0||i.cancel(),this._currentPasteOperation=void 0;const o=this._editor.getModel(),a=this._editor.getSelections();if(!a?.length||!o||!this.isPasteAsEnabled()&&!this._pasteAsActionContext)return;const l=this.fetchCopyMetadata(e),c=RZe(e.clipboardData);c.delete(xR);const d=[...e.clipboardData.types,...(s=l?.providerCopyMimeTypes)!==null&&s!==void 0?s:[],_n.uriList],u=this._languageFeaturesService.documentPasteEditProvider.ordered(o).filter(h=>{var f,g;const m=(f=this._pasteAsActionContext)===null||f===void 0?void 0:f.preferred;return m&&h.providedPasteEditKinds&&!this.providerMatchesPreference(h,m)?!1:(g=h.pasteMimeTypes)===null||g===void 0?void 0:g.some(p=>DZe(p,d))});if(!u.length){!((r=this._pasteAsActionContext)===null||r===void 0)&&r.preferred&&this.showPasteAsNoEditMessage(a,this._pasteAsActionContext.preferred);return}e.preventDefault(),e.stopImmediatePropagation(),this._pasteAsActionContext?this.showPasteAsPick(this._pasteAsActionContext.preferred,u,a,c,l):this.doPasteInline(u,a,c,l,e)}showPasteAsNoEditMessage(e,t){var i;(i=Pc.get(this._editor))===null||i===void 0||i.showMessage(L("pasteAsError","No paste edits for '{0}' found",t instanceof xr?t.value:t.providerId),e[0].getStartPosition())}doPasteInline(e,t,i,s,r){const o=Od(async a=>{const l=this._editor;if(!l.hasModel())return;const c=l.getModel(),d=new CY(l,3,void 0,a);try{if(await this.mergeInDataFromCopy(i,s,d.token),d.token.isCancellationRequested)return;const u=e.filter(g=>this.isSupportedPasteProvider(g,i));if(!u.length||u.length===1&&u[0]instanceof Bh)return this.applyDefaultPasteHandler(i,s,d.token,r);const h={triggerKind:U_.Automatic},f=await this.getPasteEdits(u,i,c,t,h,d.token);if(d.token.isCancellationRequested)return;if(f.length===1&&f[0].provider instanceof Bh)return this.applyDefaultPasteHandler(i,s,d.token,r);if(f.length){const g=l.getOption(85).showPasteSelector==="afterPaste";return this._postPasteWidgetManager.applyEditAndShowIfNeeded(t,{activeEditIndex:0,allEdits:f},g,async(m,p)=>{var b,w;const v=await((w=(b=m.provider).resolveDocumentPasteEdit)===null||w===void 0?void 0:w.call(b,m,p));return v&&(m.additionalEdit=v.additionalEdit),m},d.token)}await this.applyDefaultPasteHandler(i,s,d.token,r)}finally{d.dispose(),this._currentPasteOperation===o&&(this._currentPasteOperation=void 0)}});this._pasteProgressManager.showWhile(t[0].getEndPosition(),L("pasteIntoEditorProgress","Running paste handlers. Click to cancel"),o),this._currentPasteOperation=o}showPasteAsPick(e,t,i,s,r){const o=Od(async a=>{const l=this._editor;if(!l.hasModel())return;const c=l.getModel(),d=new CY(l,3,void 0,a);try{if(await this.mergeInDataFromCopy(s,r,d.token),d.token.isCancellationRequested)return;let u=t.filter(p=>this.isSupportedPasteProvider(p,s,e));e&&(u=u.filter(p=>this.providerMatchesPreference(p,e)));const h={triggerKind:U_.PasteAs,only:e&&e instanceof xr?e:void 0};let f=await this.getPasteEdits(u,s,c,i,h,d.token);if(d.token.isCancellationRequested)return;if(e&&(f=f.filter(p=>e instanceof xr?e.contains(p.kind):e.providerId===p.provider.id)),!f.length){h.only&&this.showPasteAsNoEditMessage(i,h.only);return}let g;if(e)g=f.at(0);else{const p=await this._quickInputService.pick(f.map(b=>{var w;return{label:b.title,description:(w=b.kind)===null||w===void 0?void 0:w.value,edit:b}}),{placeHolder:L("pasteAsPickerPlaceholder","Select Paste Action")});g=p?.edit}if(!g)return;const m=Wse(c.uri,i,g);await this._bulkEditService.apply(m,{editor:this._editor})}finally{d.dispose(),this._currentPasteOperation===o&&(this._currentPasteOperation=void 0)}});this._progressService.withProgress({location:10,title:L("pasteAsProgress","Running paste handlers")},()=>o)}setCopyMetadata(e,t){e.setData(xR,JSON.stringify(t))}fetchCopyMetadata(e){var t;if(!e.clipboardData)return;const i=e.clipboardData.getData(xR);if(i)try{return JSON.parse(i)}catch{return}const[s,r]=F3.getTextData(e.clipboardData);if(r)return{defaultPastePayload:{mode:r.mode,multicursorText:(t=r.multicursorText)!==null&&t!==void 0?t:null,pasteOnNewLine:!!r.isFromEmptySelection}}}async mergeInDataFromCopy(e,t,i){var s;if(t?.id&&((s=Mf._currentCopyOperation)===null||s===void 0?void 0:s.handle)===t.id){const r=await Mf._currentCopyOperation.dataTransferPromise;if(i.isCancellationRequested)return;for(const[o,a]of r)e.replace(o,a)}if(!e.has(_n.uriList)){const r=await this._clipboardService.readResources();if(i.isCancellationRequested)return;r.length&&e.append(_n.uriList,VP($2.create(r)))}}async getPasteEdits(e,t,i,s,r,o){const a=await uNe(Promise.all(e.map(async c=>{var d,u;try{const h=await((d=c.provideDocumentPasteEdits)===null||d===void 0?void 0:d.call(c,i,s,t,r,o));return(u=h?.edits)===null||u===void 0?void 0:u.map(f=>({...f,provider:c}))}catch(h){console.error(h)}})),o),l=Wg(a??[]).flat().filter(c=>!r.only||r.only.contains(c.kind));return XZe(l)}async applyDefaultPasteHandler(e,t,i,s){var r,o,a,l;const c=(r=e.get(_n.text))!==null&&r!==void 0?r:e.get("text"),d=(o=await c?.asString())!==null&&o!==void 0?o:"";if(i.isCancellationRequested)return;const u={clipboardEvent:s,text:d,pasteOnNewLine:(a=t?.defaultPastePayload.pasteOnNewLine)!==null&&a!==void 0?a:!1,multicursorText:(l=t?.defaultPastePayload.multicursorText)!==null&&l!==void 0?l:null,mode:null};this._editor.trigger("keyboard","paste",u)}isSupportedPasteProvider(e,t,i){var s;return!((s=e.pasteMimeTypes)===null||s===void 0)&&s.some(r=>t.matches(r))?!i||this.providerMatchesPreference(e,i):!1}providerMatchesPreference(e,t){return t instanceof xr?e.providedPasteEditKinds?e.providedPasteEditKinds.some(i=>t.contains(i)):!0:e.id===t.providerId}};GL.ID="editor.contrib.copyPasteActionController";GL=Mf=c7e([Vm(1,Si),Vm(2,PP),Vm(3,bm),Vm(4,ei),Vm(5,D0),Vm(6,$se)],GL);const Fg="9_cutcopypaste",h7e=kl||document.queryCommandSupported("cut"),ere=kl||document.queryCommandSupported("copy"),f7e=typeof navigator.clipboard>"u"||ua?document.queryCommandSupported("paste"):!0;function $P(n){return n.register(),n}const g7e=h7e?$P(new S0({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:kl?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:X.MenubarEditMenu,group:"2_ccp",title:L({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1},{menuId:X.EditorContext,group:Fg,title:L("actions.clipboard.cutLabel","Cut"),when:Re.writable,order:1},{menuId:X.CommandPalette,group:"",title:L("actions.clipboard.cutLabel","Cut"),order:1},{menuId:X.SimpleEditorContext,group:Fg,title:L("actions.clipboard.cutLabel","Cut"),when:Re.writable,order:1}]})):void 0,m7e=ere?$P(new S0({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:kl?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:X.MenubarEditMenu,group:"2_ccp",title:L({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2},{menuId:X.EditorContext,group:Fg,title:L("actions.clipboard.copyLabel","Copy"),order:2},{menuId:X.CommandPalette,group:"",title:L("actions.clipboard.copyLabel","Copy"),order:1},{menuId:X.SimpleEditorContext,group:Fg,title:L("actions.clipboard.copyLabel","Copy"),order:2}]})):void 0;Wl.appendMenuItem(X.MenubarEditMenu,{submenu:X.MenubarCopy,title:cw("copy as","Copy As"),group:"2_ccp",order:3});Wl.appendMenuItem(X.EditorContext,{submenu:X.EditorContextCopy,title:cw("copy as","Copy As"),group:Fg,order:3});Wl.appendMenuItem(X.EditorContext,{submenu:X.EditorContextShare,title:cw("share","Share"),group:"11_share",order:-1,when:Wt.and(Wt.notEquals("resourceScheme","output"),Re.editorTextFocus)});Wl.appendMenuItem(X.ExplorerContext,{submenu:X.ExplorerContextShare,title:cw("share","Share"),group:"11_share",order:-1});const TR=f7e?$P(new S0({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:kl?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:X.MenubarEditMenu,group:"2_ccp",title:L({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:4},{menuId:X.EditorContext,group:Fg,title:L("actions.clipboard.pasteLabel","Paste"),when:Re.writable,order:4},{menuId:X.CommandPalette,group:"",title:L("actions.clipboard.pasteLabel","Paste"),order:1},{menuId:X.SimpleEditorContext,group:Fg,title:L("actions.clipboard.pasteLabel","Paste"),when:Re.writable,order:4}]})):void 0;class p7e extends to{constructor(){super({id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:L("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:Re.textInputFocus,primary:0,weight:100}})}run(e,t){!t.hasModel()||!t.getOption(37)&&t.getSelection().isEmpty()||(W3.forceCopyWithSyntaxHighlighting=!0,t.focus(),t.getContainerDomNode().ownerDocument.execCommand("copy"),W3.forceCopyWithSyntaxHighlighting=!1)}}function tre(n,e){n&&(n.addImplementation(1e4,"code-editor",(t,i)=>{const s=t.get(Vn).getFocusedCodeEditor();if(s&&s.hasTextFocus()){const r=s.getOption(37),o=s.getSelection();return o&&o.isEmpty()&&!r||s.getContainerDomNode().ownerDocument.execCommand(e),!0}return!1}),n.addImplementation(0,"generic-dom",(t,i)=>(y0().execCommand(e),!0)))}tre(g7e,"cut");tre(m7e,"copy");TR&&(TR.addImplementation(1e4,"code-editor",(n,e)=>{var t,i;const s=n.get(Vn),r=n.get(bm),o=s.getFocusedCodeEditor();return o&&o.hasTextFocus()?o.getContainerDomNode().ownerDocument.execCommand("paste")?(i=(t=GL.get(o))===null||t===void 0?void 0:t.finishedPaste())!==null&&i!==void 0?i:Promise.resolve():rf?(async()=>{const l=await r.readText();if(l!==""){const c=z_.INSTANCE.get(l);let d=!1,u=null,h=null;c&&(d=o.getOption(37)&&!!c.isFromEmptySelection,u=typeof c.multicursorText<"u"?c.multicursorText:null,h=c.mode),o.trigger("keyboard","paste",{text:l,pasteOnNewLine:d,multicursorText:u,mode:h})}})():!0:!1}),TR.addImplementation(0,"generic-dom",(n,e)=>(y0().execCommand("paste"),!0)));ere&&rn(p7e);class dr{constructor(e){this._editor=e,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.removeDecorations(this._allDecorations()),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){const e=this._findScopeDecorationIds.map(t=>this._editor.getModel().getDecorationRange(t)).filter(t=>!!t);if(e.length)return e}return null}getStartPosition(){return this._startPosition}setStartPosition(e){this._startPosition=e,this.setCurrentFindMatch(null)}_getDecorationIndex(e){const t=this._decorations.indexOf(e);return t>=0?t+1:1}getDecorationRangeAt(e){const t=e<this._decorations.length?this._decorations[e]:null;return t?this._editor.getModel().getDecorationRange(t):null}getCurrentMatchesPosition(e){const t=this._editor.getModel().getDecorationsInRange(e);for(const i of t){const s=i.options;if(s===dr._FIND_MATCH_DECORATION||s===dr._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(i.id)}return 0}setCurrentFindMatch(e){let t=null,i=0;if(e)for(let s=0,r=this._decorations.length;s<r;s++){const o=this._editor.getModel().getDecorationRange(this._decorations[s]);if(e.equalsRange(o)){t=this._decorations[s],i=s+1;break}}return(this._highlightedDecorationId!==null||t!==null)&&this._editor.changeDecorations(s=>{if(this._highlightedDecorationId!==null&&(s.changeDecorationOptions(this._highlightedDecorationId,dr._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),t!==null&&(this._highlightedDecorationId=t,s.changeDecorationOptions(this._highlightedDecorationId,dr._CURRENT_FIND_MATCH_DECORATION)),this._rangeHighlightDecorationId!==null&&(s.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),t!==null){let r=this._editor.getModel().getDecorationRange(t);if(r.startLineNumber!==r.endLineNumber&&r.endColumn===1){const o=r.endLineNumber-1,a=this._editor.getModel().getLineMaxColumn(o);r=new te(r.startLineNumber,r.startColumn,o,a)}this._rangeHighlightDecorationId=s.addDecoration(r,dr._RANGE_HIGHLIGHT_DECORATION)}}),i}set(e,t){this._editor.changeDecorations(i=>{let s=dr._FIND_MATCH_DECORATION;const r=[];if(e.length>1e3){s=dr._FIND_MATCH_NO_OVERVIEW_DECORATION;const a=this._editor.getModel().getLineCount(),c=this._editor.getLayoutInfo().height/a,d=Math.max(2,Math.ceil(3/c));let u=e[0].range.startLineNumber,h=e[0].range.endLineNumber;for(let f=1,g=e.length;f<g;f++){const m=e[f].range;h+d>=m.startLineNumber?m.endLineNumber>h&&(h=m.endLineNumber):(r.push({range:new te(u,1,h,1),options:dr._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),u=m.startLineNumber,h=m.endLineNumber)}r.push({range:new te(u,1,h,1),options:dr._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}const o=new Array(e.length);for(let a=0,l=e.length;a<l;a++)o[a]={range:e[a].range,options:s};this._decorations=i.deltaDecorations(this._decorations,o),this._overviewRulerApproximateDecorations=i.deltaDecorations(this._overviewRulerApproximateDecorations,r),this._rangeHighlightDecorationId&&(i.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach(a=>i.removeDecoration(a)),this._findScopeDecorationIds=[]),t?.length&&(this._findScopeDecorationIds=t.map(a=>i.addDecoration(a,dr._FIND_SCOPE_DECORATION)))})}matchBeforePosition(e){if(this._decorations.length===0)return null;for(let t=this._decorations.length-1;t>=0;t--){const i=this._decorations[t],s=this._editor.getModel().getDecorationRange(i);if(!(!s||s.endLineNumber>e.lineNumber)){if(s.endLineNumber<e.lineNumber)return s;if(!(s.endColumn>e.column))return s}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(e){if(this._decorations.length===0)return null;for(let t=0,i=this._decorations.length;t<i;t++){const s=this._decorations[t],r=this._editor.getModel().getDecorationRange(s);if(!(!r||r.startLineNumber<e.lineNumber)){if(r.startLineNumber>e.lineNumber)return r;if(!(r.startColumn<e.column))return r}}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let e=[];return e=e.concat(this._decorations),e=e.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&e.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&e.push(this._rangeHighlightDecorationId),e}}dr._CURRENT_FIND_MATCH_DECORATION=Qt.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",inlineClassName:"currentFindMatchInline",showIfCollapsed:!0,overviewRuler:{color:ps(nP),position:fa.Center},minimap:{color:ps(hp),position:1}});dr._FIND_MATCH_DECORATION=Qt.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",inlineClassName:"findMatchInline",showIfCollapsed:!0,overviewRuler:{color:ps(nP),position:fa.Center},minimap:{color:ps(hp),position:1}});dr._FIND_MATCH_NO_OVERVIEW_DECORATION=Qt.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0});dr._FIND_MATCH_ONLY_OVERVIEW_DECORATION=Qt.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:ps(nP),position:fa.Center}});dr._RANGE_HIGHLIGHT_DECORATION=Qt.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0});dr._FIND_SCOPE_DECORATION=Qt.register({description:"find-scope",className:"findScope",isWholeLine:!0});class b7e{constructor(e,t,i){this._editorSelection=e,this._ranges=t,this._replaceStrings=i,this._trackedEditorSelectionId=null}getEditOperations(e,t){if(this._ranges.length>0){const i=[];for(let o=0;o<this._ranges.length;o++)i.push({range:this._ranges[o],text:this._replaceStrings[o]});i.sort((o,a)=>te.compareRangesUsingStarts(o.range,a.range));const s=[];let r=i[0];for(let o=1;o<i.length;o++)r.range.endLineNumber===i[o].range.startLineNumber&&r.range.endColumn===i[o].range.startColumn?(r.range=r.range.plusRange(i[o].range),r.text=r.text+i[o].text):(s.push(r),r=i[o]);s.push(r);for(const o of s)t.addEditOperation(o.range,o.text)}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}}function ire(n,e){if(n&&n[0]!==""){const t=AY(n,e,"-"),i=AY(n,e,"_");return t&&!i?FY(n,e,"-"):!t&&i?FY(n,e,"_"):n[0].toUpperCase()===n[0]?e.toUpperCase():n[0].toLowerCase()===n[0]?e.toLowerCase():jNe(n[0][0])&&e.length>0?e[0].toUpperCase()+e.substr(1):n[0][0].toUpperCase()!==n[0][0]&&e.length>0?e[0].toLowerCase()+e.substr(1):e}else return e}function AY(n,e,t){return n[0].indexOf(t)!==-1&&e.indexOf(t)!==-1&&n[0].split(t).length===e.split(t).length}function FY(n,e,t){const i=e.split(t),s=n[0].split(t);let r="";return i.forEach((o,a)=>{r+=ire([s[a]],o)+t}),r.slice(0,-1)}class VY{constructor(e){this.staticValue=e,this.kind=0}}class v7e{constructor(e){this.pieces=e,this.kind=1}}class Gb{static fromStaticValue(e){return new Gb([fg.staticValue(e)])}get hasReplacementPatterns(){return this._state.kind===1}constructor(e){!e||e.length===0?this._state=new VY(""):e.length===1&&e[0].staticValue!==null?this._state=new VY(e[0].staticValue):this._state=new v7e(e)}buildReplaceString(e,t){if(this._state.kind===0)return t?ire(e,this._state.staticValue):this._state.staticValue;let i="";for(let s=0,r=this._state.pieces.length;s<r;s++){const o=this._state.pieces[s];if(o.staticValue!==null){i+=o.staticValue;continue}let a=Gb._substitute(o.matchIndex,e);if(o.caseOps!==null&&o.caseOps.length>0){const l=[],c=o.caseOps.length;let d=0;for(let u=0,h=a.length;u<h;u++){if(d>=c){l.push(a.slice(u));break}switch(o.caseOps[d]){case"U":l.push(a[u].toUpperCase());break;case"u":l.push(a[u].toUpperCase()),d++;break;case"L":l.push(a[u].toLowerCase());break;case"l":l.push(a[u].toLowerCase()),d++;break;default:l.push(a[u])}}a=l.join("")}i+=a}return i}static _substitute(e,t){if(t===null)return"";if(e===0)return t[0];let i="";for(;e>0;){if(e<t.length)return(t[e]||"")+i;i=String(e%10)+i,e=Math.floor(e/10)}return"$"+i}}class fg{static staticValue(e){return new fg(e,-1,null)}static caseOps(e,t){return new fg(null,e,t)}constructor(e,t,i){this.staticValue=e,this.matchIndex=t,!i||i.length===0?this.caseOps=null:this.caseOps=i.slice(0)}}class _7e{constructor(e){this._source=e,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}emitUnchanged(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}emitStatic(e,t){this._emitStatic(e),this._lastCharIndex=t}_emitStatic(e){e.length!==0&&(this._currentStaticPiece+=e)}emitMatchIndex(e,t,i){this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=fg.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=fg.caseOps(e,i),this._lastCharIndex=t}finalize(){return this.emitUnchanged(this._source.length),this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=fg.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new Gb(this._result)}}function w7e(n){if(!n||n.length===0)return new Gb(null);const e=[],t=new _7e(n);for(let i=0,s=n.length;i<s;i++){const r=n.charCodeAt(i);if(r===92){if(i++,i>=s)break;const o=n.charCodeAt(i);switch(o){case 92:t.emitUnchanged(i-1),t.emitStatic("\\",i+1);break;case 110:t.emitUnchanged(i-1),t.emitStatic(`
`,i+1);break;case 116:t.emitUnchanged(i-1),t.emitStatic("	",i+1);break;case 117:case 85:case 108:case 76:t.emitUnchanged(i-1),t.emitStatic("",i+1),e.push(String.fromCharCode(o));break}continue}if(r===36){if(i++,i>=s)break;const o=n.charCodeAt(i);if(o===36){t.emitUnchanged(i-1),t.emitStatic("$",i+1);continue}if(o===48||o===38){t.emitUnchanged(i-1),t.emitMatchIndex(0,i+1,e),e.length=0;continue}if(49<=o&&o<=57){let a=o-48;if(i+1<s){const l=n.charCodeAt(i+1);if(48<=l&&l<=57){i++,a=a*10+(l-48),t.emitUnchanged(i-2),t.emitMatchIndex(a,i+1,e),e.length=0;continue}}t.emitUnchanged(i-1),t.emitMatchIndex(a,i+1,e),e.length=0;continue}}}return t.finalize()}const uu=new it("findWidgetVisible",!1);uu.toNegated();const rT=new it("findInputFocussed",!1),QP=new it("replaceInputFocussed",!1),Uy={primary:545,mac:{primary:2593}},Yy={primary:565,mac:{primary:2613}},Ky={primary:560,mac:{primary:2608}},jy={primary:554,mac:{primary:2602}},Jy={primary:558,mac:{primary:2606}},Zi={StartFindAction:"actions.find",StartFindWithSelection:"actions.findWithSelection",StartFindWithArgs:"editor.actions.findWithArgs",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",GoToMatchFindAction:"editor.action.goToMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ToggleSearchScopeCommand:"toggleFindInSelection",TogglePreserveCaseCommand:"togglePreserveCase",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll",SelectAllMatchesAction:"editor.action.selectAllMatches"},sh=19999,y7e=240;class m_{constructor(e,t){this._toDispose=new ct,this._editor=e,this._state=t,this._isDisposed=!1,this._startSearchingTimer=new lf,this._decorations=new dr(e),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new as(()=>this.research(!1),100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition(i=>{(i.reason===3||i.reason===5||i.reason===6)&&this._decorations.setStartPosition(this._editor.getPosition())})),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent(i=>{this._ignoreModelContentChanged||(i.isFlush&&this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())})),this._toDispose.add(this._state.onFindReplaceStateChange(i=>this._onStateChanged(i))),this.research(!1,this._state.searchScope)}dispose(){this._isDisposed=!0,Ns(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(e){this._isDisposed||this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet(()=>{e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)},y7e)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor))}static _getSearchRange(e,t){return t||e.getFullModelRange()}research(e,t){let i=null;typeof t<"u"?t!==null&&(Array.isArray(t)?i=t:i=[t]):i=this._decorations.getFindScopes(),i!==null&&(i=i.map(a=>{if(a.startLineNumber!==a.endLineNumber){let l=a.endLineNumber;return a.endColumn===1&&(l=l-1),new te(a.startLineNumber,1,l,this._editor.getModel().getLineMaxColumn(l))}return a}));const s=this._findMatches(i,!1,sh);this._decorations.set(s,i);const r=this._editor.getSelection();let o=this._decorations.getCurrentMatchesPosition(r);if(o===0&&s.length>0){const a=J_(s.map(l=>l.range),l=>te.compareRangesUsingStarts(l,r)>=0);o=a>0?a-1+1:o}this._state.changeMatchInfo(o,this._decorations.getCount(),void 0),e&&this._editor.getOption(41).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){const e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}_setCurrentFindMatch(e){const t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}_prevSearchPosition(e){const t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0);let{lineNumber:i,column:s}=e;const r=this._editor.getModel();return t||s===1?(i===1?i=r.getLineCount():i--,s=r.getLineMaxColumn(i)):s--,new pe(i,s)}_moveToPrevMatch(e,t=!1){if(!this._state.canNavigateBack()){const d=this._decorations.matchAfterPosition(e);d&&this._setCurrentFindMatch(d);return}if(this._decorations.getCount()<sh){let d=this._decorations.matchBeforePosition(e);d&&d.isEmpty()&&d.getStartPosition().equals(e)&&(e=this._prevSearchPosition(e),d=this._decorations.matchBeforePosition(e)),d&&this._setCurrentFindMatch(d);return}if(this._cannotFind())return;const i=this._decorations.getFindScope(),s=m_._getSearchRange(this._editor.getModel(),i);s.getEndPosition().isBefore(e)&&(e=s.getEndPosition()),e.isBefore(s.getStartPosition())&&(e=s.getEndPosition());const{lineNumber:r,column:o}=e,a=this._editor.getModel();let l=new pe(r,o),c=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(131):null,!1);if(c&&c.range.isEmpty()&&c.range.getStartPosition().equals(l)&&(l=this._prevSearchPosition(l),c=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(131):null,!1)),!!c){if(!t&&!s.containsRange(c.range))return this._moveToPrevMatch(c.range.getStartPosition(),!0);this._setCurrentFindMatch(c.range)}}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(e){const t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0);let{lineNumber:i,column:s}=e;const r=this._editor.getModel();return t||s===r.getLineMaxColumn(i)?(i===r.getLineCount()?i=1:i++,s=1):s++,new pe(i,s)}_moveToNextMatch(e){if(!this._state.canNavigateForward()){const i=this._decorations.matchBeforePosition(e);i&&this._setCurrentFindMatch(i);return}if(this._decorations.getCount()<sh){let i=this._decorations.matchAfterPosition(e);i&&i.isEmpty()&&i.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),i=this._decorations.matchAfterPosition(e)),i&&this._setCurrentFindMatch(i);return}const t=this._getNextMatch(e,!1,!0);t&&this._setCurrentFindMatch(t.range)}_getNextMatch(e,t,i,s=!1){if(this._cannotFind())return null;const r=this._decorations.getFindScope(),o=m_._getSearchRange(this._editor.getModel(),r);o.getEndPosition().isBefore(e)&&(e=o.getStartPosition()),e.isBefore(o.getStartPosition())&&(e=o.getStartPosition());const{lineNumber:a,column:l}=e,c=this._editor.getModel();let d=new pe(a,l),u=c.findNextMatch(this._state.searchString,d,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(131):null,t);return i&&u&&u.range.isEmpty()&&u.range.getStartPosition().equals(d)&&(d=this._nextSearchPosition(d),u=c.findNextMatch(this._state.searchString,d,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(131):null,t)),u?!s&&!o.containsRange(u.range)?this._getNextMatch(u.range.getEndPosition(),t,i,!0):u:null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_moveToMatch(e){const t=this._decorations.getDecorationRangeAt(e);t&&this._setCurrentFindMatch(t)}moveToMatch(e){this._moveToMatch(e)}_getReplacePattern(){return this._state.isRegex?w7e(this._state.replaceString):Gb.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;const e=this._getReplacePattern(),t=this._editor.getSelection(),i=this._getNextMatch(t.getStartPosition(),!0,!1);if(i)if(t.equalsRange(i.range)){const s=e.buildReplaceString(i.matches,this._state.preserveCase),r=new Or(t,s);this._executeEditorCommand("replace",r),this._decorations.setStartPosition(new pe(t.startLineNumber,t.startColumn+s.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(i.range)}_findMatches(e,t,i){const s=(e||[null]).map(r=>m_._getSearchRange(this._editor.getModel(),r));return this._editor.getModel().findMatches(this._state.searchString,s,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(131):null,t,i)}replaceAll(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();e===null&&this._state.matchesCount>=sh?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}_largeReplaceAll(){const t=new Tf(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(131):null).parseSearchRequest();if(!t)return;let i=t.regex;if(!i.multiline){let u="mu";i.ignoreCase&&(u+="i"),i.global&&(u+="g"),i=new RegExp(i.source,u)}const s=this._editor.getModel(),r=s.getValue(1),o=s.getFullModelRange(),a=this._getReplacePattern();let l;const c=this._state.preserveCase;a.hasReplacementPatterns||c?l=r.replace(i,function(){return a.buildReplaceString(arguments,c)}):l=r.replace(i,a.buildReplaceString(null,c));const d=new Hie(o,l,this._editor.getSelection());this._executeEditorCommand("replaceAll",d)}_regularReplaceAll(e){const t=this._getReplacePattern(),i=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),s=[];for(let o=0,a=i.length;o<a;o++)s[o]=t.buildReplaceString(i[o].matches,this._state.preserveCase);const r=new b7e(this._editor.getSelection(),i.map(o=>o.range),s);this._executeEditorCommand("replaceAll",r)}selectAllMatches(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();let i=this._findMatches(e,!1,1073741824).map(r=>new Ii(r.range.startLineNumber,r.range.startColumn,r.range.endLineNumber,r.range.endColumn));const s=this._editor.getSelection();for(let r=0,o=i.length;r<o;r++)if(i[r].equalsRange(s)){i=[s].concat(i.slice(0,r)).concat(i.slice(r+1));break}this._editor.setSelections(i)}_executeEditorCommand(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}class M0 extends pa{constructor(e){var t;super(),this._onChange=this._register(new ue),this.onChange=this._onChange.event,this._onKeyDown=this._register(new ue),this.onKeyDown=this._onKeyDown.event,this._opts=e,this._checked=this._opts.isChecked;const i=["monaco-custom-toggle"];this._opts.icon&&(this._icon=this._opts.icon,i.push(...Vt.asClassNameArray(this._icon))),this._opts.actionClassName&&i.push(...this._opts.actionClassName.split(" ")),this._checked&&i.push("checked"),this.domNode=document.createElement("div"),this._hover=this._register(Kc().setupUpdatableHover((t=e.hoverDelegate)!==null&&t!==void 0?t:_o("mouse"),this.domNode,this._opts.title)),this.domNode.classList.add(...i),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,s=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),s.preventDefault())}),this._register(this.ignoreGesture(this.domNode)),this.onkeydown(this.domNode,s=>{if(s.keyCode===10||s.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),s.preventDefault(),s.stopPropagation();return}this._onKeyDown.fire(s)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 22}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder||"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground||"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground||"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}const S7e=L("caseDescription","Match Case"),C7e=L("wordsDescription","Match Whole Word"),L7e=L("regexDescription","Use Regular Expression");class nre extends M0{constructor(e){var t;super({icon:Qe.caseSensitive,title:S7e+e.appendTitle,isChecked:e.isChecked,hoverDelegate:(t=e.hoverDelegate)!==null&&t!==void 0?t:_o("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class sre extends M0{constructor(e){var t;super({icon:Qe.wholeWord,title:C7e+e.appendTitle,isChecked:e.isChecked,hoverDelegate:(t=e.hoverDelegate)!==null&&t!==void 0?t:_o("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class rre extends M0{constructor(e){var t;super({icon:Qe.regex,title:L7e+e.appendTitle,isChecked:e.isChecked,hoverDelegate:(t=e.hoverDelegate)!==null&&t!==void 0?t:_o("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class oT extends pa{constructor(e,t,i){super(),this._hideSoon=this._register(new as(()=>this._hide(),2e3)),this._isVisible=!1,this._editor=e,this._state=t,this._keybindingService=i,this._domNode=document.createElement("div"),this._domNode.className="findOptionsWidget",this._domNode.style.display="none",this._domNode.style.top="10px",this._domNode.style.zIndex="12",this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true");const s={inputActiveOptionBorder:Ke(sP),inputActiveOptionForeground:Ke(oP),inputActiveOptionBackground:Ke(rP)},r=this._register(Zb());this.caseSensitive=this._register(new nre({appendTitle:this._keybindingLabelFor(Zi.ToggleCaseSensitiveCommand),isChecked:this._state.matchCase,hoverDelegate:r,...s})),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange(()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)})),this.wholeWords=this._register(new sre({appendTitle:this._keybindingLabelFor(Zi.ToggleWholeWordCommand),isChecked:this._state.wholeWord,hoverDelegate:r,...s})),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange(()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)})),this.regex=this._register(new rre({appendTitle:this._keybindingLabelFor(Zi.ToggleRegexCommand),isChecked:this._state.isRegex,hoverDelegate:r,...s})),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange(()=>{this._state.change({isRegex:this.regex.checked},!1)})),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange(o=>{let a=!1;o.isRegex&&(this.regex.checked=this._state.isRegex,a=!0),o.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,a=!0),o.matchCase&&(this.caseSensitive.checked=this._state.matchCase,a=!0),!this._state.isRevealed&&a&&this._revealTemporarily()})),this._register(we(this._domNode,Ge.MOUSE_LEAVE,o=>this._onMouseLeave())),this._register(we(this._domNode,"mouseover",o=>this._onMouseOver()))}_keybindingLabelFor(e){const t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return oT.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseLeave(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}_hide(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}}oT.ID="editor.contrib.findOptionsWidget";function $y(n,e){return n===1?!0:n===2?!1:e}class k7e extends Le{get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return $y(this._isRegexOverride,this._isRegex)}get wholeWord(){return $y(this._wholeWordOverride,this._wholeWord)}get matchCase(){return $y(this._matchCaseOverride,this._matchCase)}get preserveCase(){return $y(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}constructor(){super(),this._onFindReplaceStateChange=this._register(new ue),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0,this._isSearching=!1,this._filters=null}changeMatchInfo(e,t,i){const s={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1};let r=!1;t===0&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,s.matchesPosition=!0,r=!0),this._matchesCount!==t&&(this._matchesCount=t,s.matchesCount=!0,r=!0),typeof i<"u"&&(te.equalsRange(this._currentMatch,i)||(this._currentMatch=i,s.currentMatch=!0,r=!0)),r&&this._onFindReplaceStateChange.fire(s)}change(e,t,i=!0){var s;const r={moveCursor:t,updateHistory:i,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1};let o=!1;const a=this.isRegex,l=this.wholeWord,c=this.matchCase,d=this.preserveCase;typeof e.searchString<"u"&&this._searchString!==e.searchString&&(this._searchString=e.searchString,r.searchString=!0,o=!0),typeof e.replaceString<"u"&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,r.replaceString=!0,o=!0),typeof e.isRevealed<"u"&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,r.isRevealed=!0,o=!0),typeof e.isReplaceRevealed<"u"&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,r.isReplaceRevealed=!0,o=!0),typeof e.isRegex<"u"&&(this._isRegex=e.isRegex),typeof e.wholeWord<"u"&&(this._wholeWord=e.wholeWord),typeof e.matchCase<"u"&&(this._matchCase=e.matchCase),typeof e.preserveCase<"u"&&(this._preserveCase=e.preserveCase),typeof e.searchScope<"u"&&(!((s=e.searchScope)===null||s===void 0)&&s.every(u=>{var h;return(h=this._searchScope)===null||h===void 0?void 0:h.some(f=>!te.equalsRange(f,u))})||(this._searchScope=e.searchScope,r.searchScope=!0,o=!0)),typeof e.loop<"u"&&this._loop!==e.loop&&(this._loop=e.loop,r.loop=!0,o=!0),typeof e.isSearching<"u"&&this._isSearching!==e.isSearching&&(this._isSearching=e.isSearching,r.isSearching=!0,o=!0),typeof e.filters<"u"&&(this._filters?this._filters.update(e.filters):this._filters=e.filters,r.filters=!0,o=!0),this._isRegexOverride=typeof e.isRegexOverride<"u"?e.isRegexOverride:0,this._wholeWordOverride=typeof e.wholeWordOverride<"u"?e.wholeWordOverride:0,this._matchCaseOverride=typeof e.matchCaseOverride<"u"?e.matchCaseOverride:0,this._preserveCaseOverride=typeof e.preserveCaseOverride<"u"?e.preserveCaseOverride:0,a!==this.isRegex&&(o=!0,r.isRegex=!0),l!==this.wholeWord&&(o=!0,r.wholeWord=!0),c!==this.matchCase&&(o=!0,r.matchCase=!0),d!==this.preserveCase&&(o=!0,r.preserveCase=!0),o&&this._onFindReplaceStateChange.fire(r)}canNavigateBack(){return this.canNavigateInLoop()||this.matchesPosition!==1}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=sh}}var E0=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const x7e=!1;var PY;(function(n){n.North="north",n.South="south",n.East="east",n.West="west"})(PY||(PY={}));let T7e=4;const D7e=new ue;let I7e=300;const M7e=new ue;class qP{constructor(e){this.el=e,this.disposables=new ct}get onPointerMove(){return this.disposables.add(new Yt(pt(this.el),"mousemove")).event}get onPointerUp(){return this.disposables.add(new Yt(pt(this.el),"mouseup")).event}dispose(){this.disposables.dispose()}}E0([Tn],qP.prototype,"onPointerMove",null);E0([Tn],qP.prototype,"onPointerUp",null);class eO{get onPointerMove(){return this.disposables.add(new Yt(this.el,Gi.Change)).event}get onPointerUp(){return this.disposables.add(new Yt(this.el,Gi.End)).event}constructor(e){this.el=e,this.disposables=new ct}dispose(){this.disposables.dispose()}}E0([Tn],eO.prototype,"onPointerMove",null);E0([Tn],eO.prototype,"onPointerUp",null);class BL{get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}constructor(e){this.factory=e}dispose(){}}E0([Tn],BL.prototype,"onPointerMove",null);E0([Tn],BL.prototype,"onPointerUp",null);const OY="pointer-events-disabled";class So extends Le{get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===0),this.el.classList.toggle("minimum",e===1),this.el.classList.toggle("maximum",e===2),this._state=e,this.onDidEnablementChange.fire(e))}set orthogonalStartSash(e){if(this._orthogonalStartSash!==e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){const t=i=>{this.orthogonalStartDragHandleDisposables.clear(),i!==0&&(this._orthogonalStartDragHandle=dt(this.el,St(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(Et(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new Yt(this._orthogonalStartDragHandle,"mouseenter")).event(()=>So.onMouseEnter(e),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new Yt(this._orthogonalStartDragHandle,"mouseleave")).event(()=>So.onMouseLeave(e),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalStartSash=e}}set orthogonalEndSash(e){if(this._orthogonalEndSash!==e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){const t=i=>{this.orthogonalEndDragHandleDisposables.clear(),i!==0&&(this._orthogonalEndDragHandle=dt(this.el,St(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(Et(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new Yt(this._orthogonalEndDragHandle,"mouseenter")).event(()=>So.onMouseEnter(e),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new Yt(this._orthogonalEndDragHandle,"mouseleave")).event(()=>So.onMouseLeave(e),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalEndSash=e}}constructor(e,t,i){super(),this.hoverDelay=I7e,this.hoverDelayer=this._register(new af(this.hoverDelay)),this._state=3,this.onDidEnablementChange=this._register(new ue),this._onDidStart=this._register(new ue),this._onDidChange=this._register(new ue),this._onDidReset=this._register(new ue),this._onDidEnd=this._register(new ue),this.orthogonalStartSashDisposables=this._register(new ct),this.orthogonalStartDragHandleDisposables=this._register(new ct),this.orthogonalEndSashDisposables=this._register(new ct),this.orthogonalEndDragHandleDisposables=this._register(new ct),this.onDidStart=this._onDidStart.event,this.onDidChange=this._onDidChange.event,this.onDidReset=this._onDidReset.event,this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.el=dt(e,St(".monaco-sash")),i.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${i.orthogonalEdge}`),jt&&this.el.classList.add("mac");const s=this._register(new Yt(this.el,"mousedown")).event;this._register(s(u=>this.onPointerStart(u,new qP(e)),this));const r=this._register(new Yt(this.el,"dblclick")).event;this._register(r(this.onPointerDoublePress,this));const o=this._register(new Yt(this.el,"mouseenter")).event;this._register(o(()=>So.onMouseEnter(this)));const a=this._register(new Yt(this.el,"mouseleave")).event;this._register(a(()=>So.onMouseLeave(this))),this._register(Ki.addTarget(this.el));const l=this._register(new Yt(this.el,Gi.Start)).event;this._register(l(u=>this.onPointerStart(u,new eO(this.el)),this));const c=this._register(new Yt(this.el,Gi.Tap)).event;let d;this._register(c(u=>{if(d){clearTimeout(d),d=void 0,this.onPointerDoublePress(u);return}clearTimeout(d),d=setTimeout(()=>d=void 0,250)},this)),typeof i.size=="number"?(this.size=i.size,i.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=T7e,this._register(D7e.event(u=>{this.size=u,this.layout()}))),this._register(M7e.event(u=>this.hoverDelay=u)),this.layoutProvider=t,this.orthogonalStartSash=i.orthogonalStartSash,this.orthogonalEndSash=i.orthogonalEndSash,this.orientation=i.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",x7e),this.layout()}onPointerStart(e,t){$t.stop(e);let i=!1;if(!e.__orthogonalSashEvent){const g=this.getOrthogonalSash(e);g&&(i=!0,e.__orthogonalSashEvent=!0,g.onPointerStart(e,new BL(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new BL(t))),!this.state)return;const s=this.el.ownerDocument.getElementsByTagName("iframe");for(const g of s)g.classList.add(OY);const r=e.pageX,o=e.pageY,a=e.altKey,l={startX:r,currentX:r,startY:o,currentY:o,altKey:a};this.el.classList.add("active"),this._onDidStart.fire(l);const c=Ka(this.el),d=()=>{let g="";i?g="all-scroll":this.orientation===1?this.state===1?g="s-resize":this.state===2?g="n-resize":g=jt?"row-resize":"ns-resize":this.state===1?g="e-resize":this.state===2?g="w-resize":g=jt?"col-resize":"ew-resize",c.textContent=`* { cursor: ${g} !important; }`},u=new ct;d(),i||this.onDidEnablementChange.event(d,null,u);const h=g=>{$t.stop(g,!1);const m={startX:r,currentX:g.pageX,startY:o,currentY:g.pageY,altKey:a};this._onDidChange.fire(m)},f=g=>{$t.stop(g,!1),this.el.removeChild(c),this.el.classList.remove("active"),this._onDidEnd.fire(),u.dispose();for(const m of s)m.classList.remove(OY)};t.onPointerMove(h,null,u),t.onPointerUp(f,null,u),u.add(t)}onPointerDoublePress(e){const t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!t&&e.linkedSash&&So.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&So.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){So.onMouseLeave(this)}layout(){if(this.orientation===0){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(e){var t;const i=(t=e.initialTarget)!==null&&t!==void 0?t:e.target;if(!(!i||!Es(i))&&i.classList.contains("orthogonal-drag-handle"))return i.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}}class E7e{constructor(e){this.spliceables=e}splice(e,t,i){this.spliceables.forEach(s=>s.splice(e,t,i))}}function Br(n,e,t){return Math.min(Math.max(n,e),t)}class ore{constructor(){this._n=1,this._val=0}update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}}class N7e{constructor(e){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=new Array(e),this._values.fill(0,0,e)}update(e){const t=this._values[this._index];return this._values[this._index]=e,this._index=(this._index+1)%this._values.length,this._sum-=t,this._sum+=e,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}}class wf extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}}var Ys;(function(n){function e(r,o){if(r.start>=o.end||o.start>=r.end)return{start:0,end:0};const a=Math.max(r.start,o.start),l=Math.min(r.end,o.end);return l-a<=0?{start:0,end:0}:{start:a,end:l}}n.intersect=e;function t(r){return r.end-r.start<=0}n.isEmpty=t;function i(r,o){return!t(e(r,o))}n.intersects=i;function s(r,o){const a=[],l={start:r.start,end:Math.min(o.start,r.end)},c={start:Math.max(o.end,r.start),end:r.end};return t(l)||a.push(l),t(c)||a.push(c),a}n.relativeComplement=s})(Ys||(Ys={}));function ZY(n,e){const t=[];for(const i of e){if(n.start>=i.range.end)continue;if(n.end<i.range.start)break;const s=Ys.intersect(n,i.range);Ys.isEmpty(s)||t.push({range:s,size:i.size})}return t}function mW({start:n,end:e},t){return{start:n+t,end:e+t}}function R7e(n){const e=[];let t=null;for(const i of n){const s=i.range.start,r=i.range.end,o=i.size;if(t&&o===t.size){t.range.end=r;continue}t={range:{start:s,end:r},size:o},e.push(t)}return e}function W7e(...n){return R7e(n.reduce((e,t)=>e.concat(t),[]))}class A7e{get paddingTop(){return this._paddingTop}set paddingTop(e){this._size=this._size+e-this._paddingTop,this._paddingTop=e}constructor(e){this.groups=[],this._size=0,this._paddingTop=0,this._paddingTop=e??0,this._size=this._paddingTop}splice(e,t,i=[]){const s=i.length-t,r=ZY({start:0,end:e},this.groups),o=ZY({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(l=>({range:mW(l.range,s),size:l.size})),a=i.map((l,c)=>({range:{start:e+c,end:e+c+1},size:l.size}));this.groups=W7e(r,a,o),this._size=this._paddingTop+this.groups.reduce((l,c)=>l+c.size*(c.range.end-c.range.start),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;if(e<this._paddingTop)return 0;let t=0,i=this._paddingTop;for(const s of this.groups){const r=s.range.end-s.range.start,o=i+r*s.size;if(e<o)return t+Math.floor((e-i)/s.size);t+=r,i=o}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,i=0;for(const s of this.groups){const r=s.range.end-s.range.start,o=i+r;if(e<o)return this._paddingTop+t+(e-i)*s.size;t+=r*s.size,i=o}return-1}}function F7e(n){var e;try{(e=n.parentElement)===null||e===void 0||e.removeChild(n)}catch{}}class V7e{constructor(e){this.renderers=e,this.cache=new Map,this.transactionNodesPendingRemoval=new Set,this.inTransaction=!1}alloc(e){let t=this.getTemplateCache(e).pop(),i=!1;if(t)i=this.transactionNodesPendingRemoval.has(t.domNode),i&&this.transactionNodesPendingRemoval.delete(t.domNode);else{const s=St(".monaco-list-row"),o=this.getRenderer(e).renderTemplate(s);t={domNode:s,templateId:e,templateData:o}}return{row:t,isReusingConnectedDomNode:i}}release(e){e&&this.releaseRow(e)}transact(e){if(this.inTransaction)throw new Error("Already in transaction");this.inTransaction=!0;try{e()}finally{for(const t of this.transactionNodesPendingRemoval)this.doRemoveNode(t);this.transactionNodesPendingRemoval.clear(),this.inTransaction=!1}}releaseRow(e){const{domNode:t,templateId:i}=e;t&&(this.inTransaction?this.transactionNodesPendingRemoval.add(t):this.doRemoveNode(t)),this.getTemplateCache(i).push(e)}doRemoveNode(e){e.classList.remove("scrolling"),F7e(e)}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(const i of e)this.getRenderer(t).disposeTemplate(i.templateData),i.templateData=null}),this.cache.clear(),this.transactionNodesPendingRemoval.clear()}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}}var hu=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const yf={CurrentDragAndDropData:void 0},Jl={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(n){return[n]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class Dw{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class P7e{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class O7e{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){const i=e.files.item(t);i&&(i.size||i.type)&&this.files.push(i)}}}getData(){return{types:this.types,files:this.files}}}function Z7e(n,e){return Array.isArray(n)&&Array.isArray(e)?Gs(n,e):n===e}class G7e{constructor(e){e?.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,i,s)=>s,e?.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,i)=>i+1,e?.getRole?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",e?.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}}class ba{get contentHeight(){return this.rangeMap.size}get onDidScroll(){return this.scrollableElement.onScroll}get scrollableElementDomNode(){return this.scrollableElement.getDomNode()}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:V5(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}constructor(e,t,i,s=Jl){var r,o,a,l,c,d,u,h,f,g,m,p,b;if(this.virtualDelegate=t,this.domId=`list_id_${++ba.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new af(50),this.splicing=!1,this.dragOverAnimationStopDisposable=Le.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=Le.None,this.onDragLeaveTimeout=Le.None,this.disposables=new ct,this._onDidChangeContentHeight=new ue,this._onDidChangeContentWidth=new ue,this.onDidChangeContentHeight=Be.latch(this._onDidChangeContentHeight.event,void 0,this.disposables),this._horizontalScrolling=!1,s.horizontalScrolling&&s.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=this.createRangeMap((r=s.paddingTop)!==null&&r!==void 0?r:0);for(const v of i)this.renderers.set(v.templateId,v);this.cache=this.disposables.add(new V7e(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof s.mouseSupport=="boolean"?s.mouseSupport:!0),this._horizontalScrolling=(o=s.horizontalScrolling)!==null&&o!==void 0?o:Jl.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.paddingBottom=typeof s.paddingBottom>"u"?0:s.paddingBottom,this.accessibilityProvider=new G7e(s.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",((a=s.transformOptimization)!==null&&a!==void 0?a:Jl.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)",this.rowsContainer.style.overflow="hidden",this.rowsContainer.style.contain="strict"),this.disposables.add(Ki.addTarget(this.rowsContainer)),this.scrollable=this.disposables.add(new x0({forceIntegerValues:!0,smoothScrollDuration:(l=s.smoothScrolling)!==null&&l!==void 0&&l?125:0,scheduleAtNextAnimationFrame:v=>po(pt(this.domNode),v)})),this.scrollableElement=this.disposables.add(new H2(this.rowsContainer,{alwaysConsumeMouseWheel:(c=s.alwaysConsumeMouseWheel)!==null&&c!==void 0?c:Jl.alwaysConsumeMouseWheel,horizontal:1,vertical:(d=s.verticalScrollMode)!==null&&d!==void 0?d:Jl.verticalScrollMode,useShadows:(u=s.useShadows)!==null&&u!==void 0?u:Jl.useShadows,mouseWheelScrollSensitivity:s.mouseWheelScrollSensitivity,fastScrollSensitivity:s.fastScrollSensitivity,scrollByPage:s.scrollByPage},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(we(this.rowsContainer,Gi.Change,v=>this.onTouchChange(v))),this.disposables.add(we(this.scrollableElement.getDomNode(),"scroll",v=>v.target.scrollTop=0)),this.disposables.add(we(this.domNode,"dragover",v=>this.onDragOver(this.toDragEvent(v)))),this.disposables.add(we(this.domNode,"drop",v=>this.onDrop(this.toDragEvent(v)))),this.disposables.add(we(this.domNode,"dragleave",v=>this.onDragLeave(this.toDragEvent(v)))),this.disposables.add(we(this.domNode,"dragend",v=>this.onDragEnd(v))),this.setRowLineHeight=(h=s.setRowLineHeight)!==null&&h!==void 0?h:Jl.setRowLineHeight,this.setRowHeight=(f=s.setRowHeight)!==null&&f!==void 0?f:Jl.setRowHeight,this.supportDynamicHeights=(g=s.supportDynamicHeights)!==null&&g!==void 0?g:Jl.supportDynamicHeights,this.dnd=(m=s.dnd)!==null&&m!==void 0?m:this.disposables.add(Jl.dnd),this.layout((p=s.initialSize)===null||p===void 0?void 0:p.height,(b=s.initialSize)===null||b===void 0?void 0:b.width)}updateOptions(e){e.paddingBottom!==void 0&&(this.paddingBottom=e.paddingBottom,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling);let t;if(e.scrollByPage!==void 0&&(t={...t??{},scrollByPage:e.scrollByPage}),e.mouseWheelScrollSensitivity!==void 0&&(t={...t??{},mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),e.fastScrollSensitivity!==void 0&&(t={...t??{},fastScrollSensitivity:e.fastScrollSensitivity}),t&&this.scrollableElement.updateOptions(t),e.paddingTop!==void 0&&e.paddingTop!==this.rangeMap.paddingTop){const i=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),s=e.paddingTop-this.rangeMap.paddingTop;this.rangeMap.paddingTop=e.paddingTop,this.render(i,Math.max(0,this.lastRenderTop+s),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}}createRangeMap(e){return new A7e(e)}splice(e,t,i=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,i)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,i=[]){const s=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),r={start:e,end:e+t},o=Ys.intersect(s,r),a=new Map;for(let y=o.end-1;y>=o.start;y--){const C=this.items[y];if(C.dragStartDisposable.dispose(),C.checkedDisposable.dispose(),C.row){let S=a.get(C.templateId);S||(S=[],a.set(C.templateId,S));const k=this.renderers.get(C.templateId);k&&k.disposeElement&&k.disposeElement(C.element,y,C.row.templateData,C.size),S.unshift(C.row)}C.row=null,C.stale=!0}const l={start:e+t,end:this.items.length},c=Ys.intersect(l,s),d=Ys.relativeComplement(l,s),u=i.map(y=>({id:String(this.itemId++),element:y,templateId:this.virtualDelegate.getTemplateId(y),size:this.virtualDelegate.getHeight(y),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(y),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:Le.None,checkedDisposable:Le.None,stale:!1}));let h;e===0&&t>=this.items.length?(this.rangeMap=this.createRangeMap(this.rangeMap.paddingTop),this.rangeMap.splice(0,0,u),h=this.items,this.items=u):(this.rangeMap.splice(e,t,u),h=this.items.splice(e,t,...u));const f=i.length-t,g=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),m=mW(c,f),p=Ys.intersect(g,m);for(let y=p.start;y<p.end;y++)this.updateItemInDOM(this.items[y],y);const b=Ys.relativeComplement(m,g);for(const y of b)for(let C=y.start;C<y.end;C++)this.removeItemFromDOM(C);const w=d.map(y=>mW(y,f)),_=[{start:e,end:e+i.length},...w].map(y=>Ys.intersect(g,y)).reverse();for(const y of _)for(let C=y.end-1;C>=y.start;C--){const S=this.items[C],k=a.get(S.templateId),I=k?.pop();this.insertItemInDOM(C,I)}for(const y of a.values())for(const C of y)this.cache.release(C);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),h.map(y=>y.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=po(pt(this.domNode),()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const t of this.items)typeof t.width<"u"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10}),this._onDidChangeContentWidth.fire(this.scrollWidth)}rerender(){if(this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}get firstVisibleIndex(){return this.getRenderRange(this.lastRenderTop,this.lastRenderHeight).start}element(e){return this.items[e].element}indexOf(e){return this.items.findIndex(t=>t.element===e)}domElement(e){const t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){const i={height:typeof e=="number"?e:W5e(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,i.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(i),typeof t<"u"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:V5(this.domNode)})}render(e,t,i,s,r,o=!1){const a=this.getRenderRange(t,i),l=Ys.relativeComplement(a,e).reverse(),c=Ys.relativeComplement(e,a);if(o){const d=Ys.intersect(e,a);for(let u=d.start;u<d.end;u++)this.updateItemInDOM(this.items[u],u)}this.cache.transact(()=>{for(const d of c)for(let u=d.start;u<d.end;u++)this.removeItemFromDOM(u);for(const d of l)for(let u=d.end-1;u>=d.start;u--)this.insertItemInDOM(u)}),s!==void 0&&(this.rowsContainer.style.left=`-${s}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&r!==void 0&&(this.rowsContainer.style.width=`${Math.max(r,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=i}insertItemInDOM(e,t){var i,s,r;const o=this.items[e];if(!o.row)if(t)o.row=t,o.stale=!0;else{const u=this.cache.alloc(o.templateId);o.row=u.row,o.stale||(o.stale=u.isReusingConnectedDomNode)}const a=this.accessibilityProvider.getRole(o.element)||"listitem";o.row.domNode.setAttribute("role",a);const l=this.accessibilityProvider.isChecked(o.element);if(typeof l=="boolean")o.row.domNode.setAttribute("aria-checked",String(!!l));else if(l){const u=h=>o.row.domNode.setAttribute("aria-checked",String(!!h));u(l.value),o.checkedDisposable=l.onDidChange(()=>u(l.value))}if(o.stale||!o.row.domNode.parentElement){const u=(r=(s=(i=this.items.at(e+1))===null||i===void 0?void 0:i.row)===null||s===void 0?void 0:s.domNode)!==null&&r!==void 0?r:null;(o.row.domNode.parentElement!==this.rowsContainer||o.row.domNode.nextElementSibling!==u)&&this.rowsContainer.insertBefore(o.row.domNode,u),o.stale=!1}this.updateItemInDOM(o,e);const c=this.renderers.get(o.templateId);if(!c)throw new Error(`No renderer found for template id ${o.templateId}`);c?.renderElement(o.element,e,o.row.templateData,o.size);const d=this.dnd.getDragURI(o.element);o.dragStartDisposable.dispose(),o.row.domNode.draggable=!!d,d&&(o.dragStartDisposable=we(o.row.domNode,"dragstart",u=>this.onDragStart(o.element,d,u))),this.horizontalScrolling&&(this.measureItemWidth(o),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width="fit-content",e.width=V5(e.row.domNode);const t=pt(e.row.domNode).getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){const i=this.renderers.get(t.templateId);i&&i.disposeElement&&i.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.paddingBottom}get onMouseClick(){return Be.map(this.disposables.add(new Yt(this.domNode,"click")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDblClick(){return Be.map(this.disposables.add(new Yt(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMiddleClick(){return Be.filter(Be.map(this.disposables.add(new Yt(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e),this.disposables),e=>e.browserEvent.button===1,this.disposables)}get onMouseDown(){return Be.map(this.disposables.add(new Yt(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOver(){return Be.map(this.disposables.add(new Yt(this.domNode,"mouseover")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOut(){return Be.map(this.disposables.add(new Yt(this.domNode,"mouseout")).event,e=>this.toMouseEvent(e),this.disposables)}get onContextMenu(){return Be.any(Be.map(this.disposables.add(new Yt(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e),this.disposables),Be.map(this.disposables.add(new Yt(this.domNode,Gi.Contextmenu)).event,e=>this.toGestureEvent(e),this.disposables))}get onTouchStart(){return Be.map(this.disposables.add(new Yt(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e),this.disposables)}get onTap(){return Be.map(this.disposables.add(new Yt(this.rowsContainer,Gi.Tap)).event,e=>this.toGestureEvent(e),this.disposables)}toMouseEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t>"u"?void 0:this.items[t],s=i&&i.element;return{browserEvent:e,index:t,element:s}}toTouchEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t>"u"?void 0:this.items[t],s=i&&i.element;return{browserEvent:e,index:t,element:s}}toGestureEvent(e){const t=this.getItemIndexFromEventTarget(e.initialTarget||null),i=typeof t>"u"?void 0:this.items[t],s=i&&i.element;return{browserEvent:e,index:t,element:s}}toDragEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t>"u"?void 0:this.items[t],s=i&&i.element,r=this.getTargetSector(e,t);return{browserEvent:e,index:t,element:s,sector:r}}onScroll(e){try{const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,i){var s,r;if(!i.dataTransfer)return;const o=this.dnd.getDragElements(e);if(i.dataTransfer.effectAllowed="copyMove",i.dataTransfer.setData(c1.TEXT,t),i.dataTransfer.setDragImage){let a;this.dnd.getDragLabel&&(a=this.dnd.getDragLabel(o,i)),typeof a>"u"&&(a=String(o.length));const l=St(".monaco-drag-image");l.textContent=a;const d=(u=>{for(;u&&!u.classList.contains("monaco-workbench");)u=u.parentElement;return u||this.domNode.ownerDocument})(this.domNode);d.appendChild(l),i.dataTransfer.setDragImage(l,-10,-10),setTimeout(()=>d.removeChild(l),0)}this.domNode.classList.add("dragging"),this.currentDragData=new Dw(o),yf.CurrentDragAndDropData=new P7e(o),(r=(s=this.dnd).onDragStart)===null||r===void 0||r.call(s,this.currentDragData,i)}onDragOver(e){var t,i;if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),yf.CurrentDragAndDropData&&yf.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(yf.CurrentDragAndDropData)this.currentDragData=yf.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new O7e}const s=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.sector,e.browserEvent);if(this.canDrop=typeof s=="boolean"?s:s.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof s!="boolean"&&((t=s.effect)===null||t===void 0?void 0:t.type)===0?"copy":"move";let r;typeof s!="boolean"&&s.feedback?r=s.feedback:typeof e.index>"u"?r=[-1]:r=[e.index],r=Ah(r).filter(a=>a>=-1&&a<this.length).sort((a,l)=>a-l),r=r[0]===-1?[-1]:r;let o=typeof s!="boolean"&&s.effect&&s.effect.position?s.effect.position:"drop-target";if(Z7e(this.currentDragFeedback,r)&&this.currentDragFeedbackPosition===o)return!0;if(this.currentDragFeedback=r,this.currentDragFeedbackPosition=o,this.currentDragFeedbackDisposable.dispose(),r[0]===-1)this.domNode.classList.add(o),this.rowsContainer.classList.add(o),this.currentDragFeedbackDisposable=Et(()=>{this.domNode.classList.remove(o),this.rowsContainer.classList.remove(o)});else{if(r.length>1&&o!=="drop-target")throw new Error("Can't use multiple feedbacks with position different than 'over'");o==="drop-target-after"&&r[0]<this.length-1&&(r[0]+=1,o="drop-target-before");for(const a of r){const l=this.items[a];l.dropTarget=!0,(i=l.row)===null||i===void 0||i.domNode.classList.add(o)}this.currentDragFeedbackDisposable=Et(()=>{var a;for(const l of r){const c=this.items[l];c.dropTarget=!1,(a=c.row)===null||a===void 0||a.domNode.classList.remove(o)}})}return!0}onDragLeave(e){var t,i;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=JC(()=>this.clearDragOverFeedback(),100,this.disposables),this.currentDragData&&((i=(t=this.dnd).onDragLeave)===null||i===void 0||i.call(t,this.currentDragData,e.element,e.index,e.browserEvent))}onDrop(e){if(!this.canDrop)return;const t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,yf.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.sector,e.browserEvent))}onDragEnd(e){var t,i;this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,yf.CurrentDragAndDropData=void 0,(i=(t=this.dnd).onDragEnd)===null||i===void 0||i.call(t,e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackPosition=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=Le.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const t=kie(this.domNode).top;this.dragOverAnimationDisposable=H5e(pt(this.domNode),this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=JC(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3,this.disposables),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;const t=this.dragOverMouseY-e,i=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>i&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-i))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getTargetSector(e,t){if(t===void 0)return;const i=e.offsetY/this.items[t].size,s=Math.floor(i/.25);return Br(s,0,3)}getItemIndexFromEventTarget(e){const t=this.scrollableElement.getDomNode();let i=e;for(;Es(i)&&i!==this.rowsContainer&&t.contains(i);){const s=i.getAttribute("data-index");if(s){const r=Number(s);if(!isNaN(r))return r}i=i.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,i){const s=this.getRenderRange(e,t);let r,o;e===this.elementTop(s.start)?(r=s.start,o=0):s.end-s.start>1&&(r=s.start+1,o=this.elementTop(r)-e);let a=0;for(;;){const l=this.getRenderRange(e,t);let c=!1;for(let d=l.start;d<l.end;d++){const u=this.probeDynamicHeight(d);u!==0&&this.rangeMap.splice(d,1,[this.items[d]]),a+=u,c=c||u!==0}if(!c){a!==0&&this.eventuallyUpdateScrollDimensions();const d=Ys.relativeComplement(s,l);for(const h of d)for(let f=h.start;f<h.end;f++)this.items[f].row&&this.removeItemFromDOM(f);const u=Ys.relativeComplement(l,s).reverse();for(const h of u)for(let f=h.end-1;f>=h.start;f--)this.insertItemInDOM(f);for(let h=l.start;h<l.end;h++)this.items[h].row&&this.updateItemInDOM(this.items[h],h);if(typeof r=="number"){const h=this.scrollable.getFutureScrollPosition().scrollTop-e,f=this.elementTop(r)-o+h;this.setScrollTop(f,i)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){var t,i,s;const r=this.items[e];if(this.virtualDelegate.getDynamicHeight){const c=this.virtualDelegate.getDynamicHeight(r.element);if(c!==null){const d=r.size;return r.size=c,r.lastDynamicHeightWidth=this.renderWidth,c-d}}if(!r.hasDynamicHeight||r.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(r.element))return 0;const o=r.size;if(r.row)return r.row.domNode.style.height="",r.size=r.row.domNode.offsetHeight,r.size===0&&!ss(r.row.domNode,pt(r.row.domNode).document.body)&&console.warn("Measuring item node that is not in DOM! Add ListView to the DOM before measuring row height!"),r.lastDynamicHeightWidth=this.renderWidth,r.size-o;const{row:a}=this.cache.alloc(r.templateId);a.domNode.style.height="",this.rowsContainer.appendChild(a.domNode);const l=this.renderers.get(r.templateId);if(!l)throw new Ai("Missing renderer for templateId: "+r.templateId);return l.renderElement(r.element,e,a.templateData,void 0),r.size=a.domNode.offsetHeight,(t=l.disposeElement)===null||t===void 0||t.call(l,r.element,e,a.templateData,void 0),(s=(i=this.virtualDelegate).setDynamicHeight)===null||s===void 0||s.call(i,r.element,r.size),r.lastDynamicHeightWidth=this.renderWidth,this.rowsContainer.removeChild(a.domNode),this.cache.release(a),r.size-o}getElementDomId(e){return`${this.domId}_${e}`}dispose(){var e,t;for(const i of this.items)if(i.dragStartDisposable.dispose(),i.checkedDisposable.dispose(),i.row){const s=this.renderers.get(i.row.templateId);s&&((e=s.disposeElement)===null||e===void 0||e.call(s,i.element,-1,i.row.templateData,void 0),s.disposeTemplate(i.row.templateData))}this.items=[],this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),(t=this.dragOverAnimationDisposable)===null||t===void 0||t.dispose(),this.disposables.dispose()}}ba.InstanceCount=0;hu([Tn],ba.prototype,"onMouseClick",null);hu([Tn],ba.prototype,"onMouseDblClick",null);hu([Tn],ba.prototype,"onMouseMiddleClick",null);hu([Tn],ba.prototype,"onMouseDown",null);hu([Tn],ba.prototype,"onMouseOver",null);hu([Tn],ba.prototype,"onMouseOut",null);hu([Tn],ba.prototype,"onContextMenu",null);hu([Tn],ba.prototype,"onTouchStart",null);hu([Tn],ba.prototype,"onTap",null);const Xh=(n,e)=>n===e;class Oo{constructor(e,t,i){this.owner=e,this.debugNameSource=t,this.referenceFn=i}getDebugName(e){return B7e(e,this)}}const GY=new Map,pW=new WeakMap;function B7e(n,e){var t;const i=pW.get(n);if(i)return i;const s=X7e(n,e);if(s){let r=(t=GY.get(s))!==null&&t!==void 0?t:0;r++,GY.set(s,r);const o=r===1?s:`${s}#${r}`;return pW.set(n,o),o}}function X7e(n,e){const t=pW.get(n);if(t)return t;const i=e.owner?H7e(e.owner)+".":"";let s;const r=e.debugNameSource;if(r!==void 0)if(typeof r=="function"){if(s=r(),s!==void 0)return i+s}else return i+r;const o=e.referenceFn;if(o!==void 0&&(s=aT(o),s!==void 0))return i+s;if(e.owner!==void 0){const a=z7e(e.owner,n);if(a!==void 0)return i+a}}function z7e(n,e){for(const t in n)if(n[t]===e)return t}const BY=new Map,XY=new WeakMap;function H7e(n){var e;const t=XY.get(n);if(t)return t;const i=U7e(n);let s=(e=BY.get(i))!==null&&e!==void 0?e:0;s++,BY.set(i,s);const r=s===1?i:`${i}#${s}`;return XY.set(n,r),r}function U7e(n){const e=n.constructor;return e?e.name:"Object"}function aT(n){const e=n.toString(),i=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e),s=i?i[1]:void 0;return s?.trim()}let Y7e;function Dc(){return Y7e}let are;function K7e(n){are=n}let lre;function j7e(n){lre=n}class cre{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t){const i=t===void 0?void 0:e,s=t===void 0?e:t;return lre({owner:i,debugName:()=>{const r=aT(s);if(r!==void 0)return r;const a=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(s.toString());if(a)return`${this.debugName}.${a[2]}`;if(!i)return`${this.debugName} (mapped)`},debugReferenceFn:s},r=>s(this.read(r),r))}recomputeInitiallyAndOnChange(e,t){return e.add(are(this,t)),this}}class Iw extends cre{constructor(){super(...arguments),this.observers=new Set}addObserver(e){const t=this.observers.size;this.observers.add(e),t===0&&this.onFirstObserverAdded()}removeObserver(e){this.observers.delete(e)&&this.observers.size===0&&this.onLastObserverRemoved()}onFirstObserverAdded(){}onLastObserverRemoved(){}}function _s(n,e){const t=new iO(n,e);try{n(t)}finally{t.finish()}}let Qy;function QS(n){if(Qy)n(Qy);else{const e=new iO(n,void 0);Qy=e;try{n(e)}finally{e.finish(),Qy=void 0}}}function tO(n,e,t){n?e(n):_s(e,t)}class iO{constructor(e,t){var i;this._fn=e,this._getDebugName=t,this.updatingObservers=[],(i=Dc())===null||i===void 0||i.handleBeginTransaction(this)}getDebugName(){return this._getDebugName?this._getDebugName():aT(this._fn)}updateObserver(e,t){this.updatingObservers.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){var e;const t=this.updatingObservers;for(let i=0;i<t.length;i++){const{observer:s,observable:r}=t[i];s.endUpdate(r)}this.updatingObservers=null,(e=Dc())===null||e===void 0||e.handleEndTransaction()}}function vi(n,e){let t;return typeof n=="string"?t=new Oo(void 0,n,void 0):t=new Oo(n,void 0,void 0),new dre(t,e,Xh)}class dre extends Iw{get debugName(){var e;return(e=this._debugNameData.getDebugName(this))!==null&&e!==void 0?e:"ObservableValue"}constructor(e,t,i){super(),this._debugNameData=e,this._equalityComparator=i,this._value=t}get(){return this._value}set(e,t,i){var s;if(i===void 0&&this._equalityComparator(this._value,e))return;let r;t||(t=r=new iO(()=>{},()=>`Setting ${this.debugName}`));try{const o=this._value;this._setValue(e),(s=Dc())===null||s===void 0||s.handleObservableChanged(this,{oldValue:o,newValue:e,change:i,didChange:!0,hadValue:!0});for(const a of this.observers)t.updateObserver(a,this),a.handleChange(this,i)}finally{r&&r.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}}function J7e(n,e){let t;return typeof n=="string"?t=new Oo(void 0,n,void 0):t=new Oo(n,void 0,void 0),new $7e(t,e,Xh)}class $7e extends dre{_setValue(e){this._value!==e&&(this._value&&this._value.dispose(),this._value=e)}dispose(){var e;(e=this._value)===null||e===void 0||e.dispose()}}function Xt(n,e){return e!==void 0?new Bb(new Oo(n,void 0,e),e,void 0,void 0,void 0,Xh):new Bb(new Oo(void 0,void 0,n),n,void 0,void 0,void 0,Xh)}function ure(n,e,t){return new Q7e(new Oo(n,void 0,e),e,void 0,void 0,void 0,Xh,t)}function hre(n,e){var t;return new Bb(new Oo(n.owner,n.debugName,n.debugReferenceFn),e,void 0,void 0,n.onLastObserverRemoved,(t=n.equalsFn)!==null&&t!==void 0?t:Xh)}j7e(hre);function N0(n,e){let t,i;e===void 0?(t=n,i=void 0):(i=n,t=e);const s=new ct;return new Bb(new Oo(i,void 0,t),r=>(s.clear(),t(r,s)),void 0,void 0,()=>s.dispose(),Xh)}function nc(n,e){let t,i;e===void 0?(t=n,i=void 0):(i=n,t=e);const s=new ct;return new Bb(new Oo(i,void 0,t),r=>{s.clear();const o=t(r);return o&&s.add(o),o},void 0,void 0,()=>s.dispose(),Xh)}class Bb extends Iw{get debugName(){var e;return(e=this._debugNameData.getDebugName(this))!==null&&e!==void 0?e:"(anonymous)"}constructor(e,t,i,s,r=void 0,o){var a,l;super(),this._debugNameData=e,this._computeFn=t,this.createChangeSummary=i,this._handleChange=s,this._handleLastObserverRemoved=r,this._equalityComparator=o,this.state=0,this.value=void 0,this.updateCount=0,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=void 0,this.changeSummary=(a=this.createChangeSummary)===null||a===void 0?void 0:a.call(this),(l=Dc())===null||l===void 0||l.handleDerivedCreated(this)}onLastObserverRemoved(){var e;this.state=0,this.value=void 0;for(const t of this.dependencies)t.removeObserver(this);this.dependencies.clear(),(e=this._handleLastObserverRemoved)===null||e===void 0||e.call(this)}get(){var e;if(this.observers.size===0){const t=this._computeFn(this,(e=this.createChangeSummary)===null||e===void 0?void 0:e.call(this));return this.onLastObserverRemoved(),t}else{do{if(this.state===1){for(const t of this.dependencies)if(t.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){var e,t;if(this.state===3)return;const i=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=i;const s=this.state!==0,r=this.value;this.state=3;const o=this.changeSummary;this.changeSummary=(e=this.createChangeSummary)===null||e===void 0?void 0:e.call(this);try{this.value=this._computeFn(this,o)}finally{for(const l of this.dependenciesToBeRemoved)l.removeObserver(this);this.dependenciesToBeRemoved.clear()}const a=s&&!this._equalityComparator(r,this.value);if((t=Dc())===null||t===void 0||t.handleDerivedRecomputed(this,{oldValue:r,newValue:this.value,change:void 0,didChange:a,hadValue:s}),a)for(const l of this.observers)l.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(e){this.updateCount++;const t=this.updateCount===1;if(this.state===3&&(this.state=1,!t))for(const i of this.observers)i.handlePossibleChange(this);if(t)for(const i of this.observers)i.beginUpdate(this)}endUpdate(e){if(this.updateCount--,this.updateCount===0){const t=[...this.observers];for(const i of t)i.endUpdate(this)}Ng(()=>this.updateCount>=0)}handlePossibleChange(e){if(this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){this.state=1;for(const t of this.observers)t.handlePossibleChange(this)}}handleChange(e,t){if(this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){const i=this._handleChange?this._handleChange({changedObservable:e,change:t,didChange:r=>r===e},this.changeSummary):!0,s=this.state===3;if(i&&(this.state===1||s)&&(this.state=2,s))for(const r of this.observers)r.handlePossibleChange(this)}}readObservable(e){e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}addObserver(e){const t=!this.observers.has(e)&&this.updateCount>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this.observers.has(e)&&this.updateCount>0;super.removeObserver(e),t&&e.endUpdate(this)}}class Q7e extends Bb{constructor(e,t,i,s,r=void 0,o,a){super(e,t,i,s,r,o),this.set=a}}function ki(n){return new cT(new Oo(void 0,void 0,n),n,void 0,void 0)}function nO(n,e){var t;return new cT(new Oo(n.owner,n.debugName,(t=n.debugReferenceFn)!==null&&t!==void 0?t:e),e,void 0,void 0)}function lT(n,e){var t;return new cT(new Oo(n.owner,n.debugName,(t=n.debugReferenceFn)!==null&&t!==void 0?t:e),e,n.createEmptyChangeSummary,n.handleChange)}function Oc(n){const e=new ct,t=nO({owner:void 0,debugName:void 0,debugReferenceFn:n},i=>{e.clear(),n(i,e)});return Et(()=>{t.dispose(),e.dispose()})}class cT{get debugName(){var e;return(e=this._debugNameData.getDebugName(this))!==null&&e!==void 0?e:"(anonymous)"}constructor(e,t,i,s){var r,o;this._debugNameData=e,this._runFn=t,this.createChangeSummary=i,this._handleChange=s,this.state=2,this.updateCount=0,this.disposed=!1,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=(r=this.createChangeSummary)===null||r===void 0?void 0:r.call(this),(o=Dc())===null||o===void 0||o.handleAutorunCreated(this),this._runIfNeeded()}dispose(){this.disposed=!0;for(const e of this.dependencies)e.removeObserver(this);this.dependencies.clear()}_runIfNeeded(){var e,t,i;if(this.state===3)return;const s=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=s,this.state=3;const r=this.disposed;try{if(!r){(e=Dc())===null||e===void 0||e.handleAutorunTriggered(this);const o=this.changeSummary;this.changeSummary=(t=this.createChangeSummary)===null||t===void 0?void 0:t.call(this),this._runFn(this,o)}}finally{r||(i=Dc())===null||i===void 0||i.handleAutorunFinished(this);for(const o of this.dependenciesToBeRemoved)o.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){this.state===3&&(this.state=1),this.updateCount++}endUpdate(){if(this.updateCount===1)do{if(this.state===1){this.state=3;for(const e of this.dependencies)if(e.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3);this.updateCount--,Ng(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(this.state=1)}handleChange(e,t){this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(!this._handleChange||this._handleChange({changedObservable:e,change:t,didChange:s=>s===e},this.changeSummary))&&(this.state=2)}readObservable(e){if(this.disposed)return e.get();e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}}(function(n){n.Observer=cT})(ki||(ki={}));function XL(n){return new q7e(n)}class q7e extends cre{constructor(e){super(),this.value=e}get debugName(){return this.toString()}get(){return this.value}addObserver(e){}removeObserver(e){}toString(){return`Const: ${this.value}`}}function os(n,e){return new $f(n,e)}class $f extends Iw{constructor(e,t){super(),this.event=e,this._getValue=t,this.hasValue=!1,this.handleEvent=i=>{var s;const r=this._getValue(i),o=this.value,a=!this.hasValue||o!==r;let l=!1;a&&(this.value=r,this.hasValue&&(l=!0,tO($f.globalTransaction,c=>{var d;(d=Dc())===null||d===void 0||d.handleFromEventObservableTriggered(this,{oldValue:o,newValue:r,change:void 0,didChange:a,hadValue:this.hasValue});for(const u of this.observers)c.updateObserver(u,this),u.handleChange(this,void 0)},()=>{const c=this.getDebugName();return"Event fired"+(c?`: ${c}`:"")})),this.hasValue=!0),l||(s=Dc())===null||s===void 0||s.handleFromEventObservableTriggered(this,{oldValue:o,newValue:r,change:void 0,didChange:a,hadValue:this.hasValue})}}getDebugName(){return aT(this._getValue)}get debugName(){const e=this.getDebugName();return"From Event"+(e?`: ${e}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}}(function(n){n.Observer=$f;function e(t,i){let s=!1;$f.globalTransaction===void 0&&($f.globalTransaction=t,s=!0);try{i()}finally{s&&($f.globalTransaction=void 0)}}n.batchEventsGlobally=e})(os||(os={}));function Qo(n,e){return new e8e(n,e)}class e8e extends Iw{constructor(e,t){super(),this.debugName=e,this.event=t,this.handleEvent=()=>{_s(i=>{for(const s of this.observers)i.updateObserver(s,this),s.handleChange(this,void 0)},()=>this.debugName)}}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0}get(){}}function fre(n){return typeof n=="string"?new zY(n):new zY(void 0,n)}class zY extends Iw{get debugName(){var e;return(e=new Oo(this._owner,this._debugName,void 0).getDebugName(this))!==null&&e!==void 0?e:"Observable Signal"}constructor(e,t){super(),this._debugName=e,this._owner=t}trigger(e,t){if(!e){_s(i=>{this.trigger(i,t)},()=>`Trigger signal ${this.debugName}`);return}for(const i of this.observers)e.updateObserver(i,this),i.handleChange(this,t)}get(){}}function dT(n,e){const t=new t8e(!0,e);return n.addObserver(t),e?e(n.get()):n.reportChanges(),Et(()=>{n.removeObserver(t)})}K7e(dT);class t8e{constructor(e,t){this._forceRecompute=e,this._handleValue=t,this._counter=0}beginUpdate(e){this._counter++}endUpdate(e){this._counter--,this._counter===0&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,t){}}function i8e(n,e,t,i){return e||(e=s=>s!=null),new Promise((s,r)=>{let o=!0,a=!1;const l=n.map(d=>({isFinished:e(d),error:t?t(d):!1,state:d})),c=ki(d=>{const{isFinished:u,error:h,state:f}=l.read(d);(u||h)&&(o?a=!0:c.dispose(),h?r(h===!0?f:h):s(f))});if(i){const d=i.onCancellationRequested(()=>{c.dispose(),d.dispose(),r(new kg)});if(i.isCancellationRequested){c.dispose(),d.dispose(),r(new kg);return}}o=!1,a&&c.dispose()})}var hf=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};class n8e{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.name}`}renderTemplate(e){return e}renderElement(e,t,i){const s=this.renderedElements.findIndex(r=>r.templateData===i);if(s>=0){const r=this.renderedElements[s];this.trait.unrender(i),r.index=t}else{const r={index:t,templateData:i};this.renderedElements.push(r)}this.trait.renderIndex(t,i)}splice(e,t,i){const s=[];for(const r of this.renderedElements)r.index<e?s.push(r):r.index>=e+t&&s.push({index:r.index+i-t,templateData:r.templateData});this.renderedElements=s}renderIndexes(e){for(const{index:t,templateData:i}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,i)}disposeTemplate(e){const t=this.renderedElements.findIndex(i=>i.templateData===e);t<0||this.renderedElements.splice(t,1)}}let zL=class{get name(){return this._trait}get renderer(){return new n8e(this)}constructor(e){this._trait=e,this.indexes=[],this.sortedIndexes=[],this._onChange=new ue,this.onChange=this._onChange.event}splice(e,t,i){const s=i.length-t,r=e+t,o=[];let a=0;for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]<e;)o.push(this.sortedIndexes[a++]);for(let l=0;l<i.length;l++)i[l]&&o.push(l+e);for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]>=r;)o.push(this.sortedIndexes[a++]+s);this.renderer.splice(e,t,i.length),this._set(o,o)}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(UY),t)}_set(e,t,i){const s=this.indexes,r=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;const o=bW(r,e);return this.renderer.renderIndexes(o),this._onChange.fire({indexes:e,browserEvent:i}),s}get(){return this.indexes}contains(e){return BRe(this.sortedIndexes,e,UY)>=0}dispose(){Ns(this._onChange)}};hf([Tn],zL.prototype,"renderer",null);class s8e extends zL{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}}class DR{constructor(e,t,i){this.trait=e,this.view=t,this.identityProvider=i}splice(e,t,i){if(!this.identityProvider)return this.trait.splice(e,t,new Array(i.length).fill(!1));const s=this.trait.get().map(a=>this.identityProvider.getId(this.view.element(a)).toString());if(s.length===0)return this.trait.splice(e,t,new Array(i.length).fill(!1));const r=new Set(s),o=i.map(a=>r.has(this.identityProvider.getId(a).toString()));this.trait.splice(e,t,o)}}function Ch(n){return n.tagName==="INPUT"||n.tagName==="TEXTAREA"}function Mw(n,e){return n.classList.contains(e)?!0:n.classList.contains("monaco-list")||!n.parentElement?!1:Mw(n.parentElement,e)}function Bv(n){return Mw(n,"monaco-editor")}function r8e(n){return Mw(n,"monaco-custom-toggle")}function o8e(n){return Mw(n,"action-item")}function p_(n){return Mw(n,"monaco-tree-sticky-row")}function f1(n){return n.classList.contains("monaco-tree-sticky-container")}function gre(n){return n.tagName==="A"&&n.classList.contains("monaco-button")||n.tagName==="DIV"&&n.classList.contains("monaco-button-dropdown")?!0:n.classList.contains("monaco-list")||!n.parentElement?!1:gre(n.parentElement)}class mre{get onKeyDown(){return Be.chain(this.disposables.add(new Yt(this.view.domNode,"keydown")).event,e=>e.filter(t=>!Ch(t.target)).map(t=>new Ji(t)))}constructor(e,t,i){this.list=e,this.view=t,this.disposables=new ct,this.multipleSelectionDisposables=new ct,this.multipleSelectionSupport=i.multipleSelectionSupport,this.disposables.add(this.onKeyDown(s=>{switch(s.keyCode){case 3:return this.onEnter(s);case 16:return this.onUpArrow(s);case 18:return this.onDownArrow(s);case 11:return this.onPageUpArrow(s);case 12:return this.onPageDownArrow(s);case 9:return this.onEscape(s);case 31:this.multipleSelectionSupport&&(jt?s.metaKey:s.ctrlKey)&&this.onCtrlA(s)}}))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionSupport=e.multipleSelectionSupport)}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(Pr(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}hf([Tn],mre.prototype,"onKeyDown",null);var mc;(function(n){n[n.Automatic=0]="Automatic",n[n.Trigger=1]="Trigger"})(mc||(mc={}));var vp;(function(n){n[n.Idle=0]="Idle",n[n.Typing=1]="Typing"})(vp||(vp={}));const a8e=new class{mightProducePrintableCharacter(n){return n.ctrlKey||n.metaKey||n.altKey?!1:n.keyCode>=31&&n.keyCode<=56||n.keyCode>=21&&n.keyCode<=30||n.keyCode>=98&&n.keyCode<=107||n.keyCode>=85&&n.keyCode<=95}};class l8e{constructor(e,t,i,s,r){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=i,this.keyboardNavigationEventFilter=s,this.delegate=r,this.enabled=!1,this.state=vp.Idle,this.mode=mc.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new ct,this.disposables=new ct,this.updateOptions(e.options)}updateOptions(e){var t,i;!((t=e.typeNavigationEnabled)!==null&&t!==void 0)||t?this.enable():this.disable(),this.mode=(i=e.typeNavigationMode)!==null&&i!==void 0?i:mc.Automatic}enable(){if(this.enabled)return;let e=!1;const t=Be.chain(this.enabledDisposables.add(new Yt(this.view.domNode,"keydown")).event,r=>r.filter(o=>!Ch(o.target)).filter(()=>this.mode===mc.Automatic||this.triggered).map(o=>new Ji(o)).filter(o=>e||this.keyboardNavigationEventFilter(o)).filter(o=>this.delegate.mightProducePrintableCharacter(o)).forEach(o=>$t.stop(o,!0)).map(o=>o.browserEvent.key)),i=Be.debounce(t,()=>null,800,void 0,void 0,void 0,this.enabledDisposables);Be.reduce(Be.any(t,i),(r,o)=>o===null?null:(r||"")+o,void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),i(this.onClear,this,this.enabledDisposables),t(()=>e=!0,void 0,this.enabledDisposables),i(()=>e=!1,void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var e;const t=this.list.getFocus();if(t.length>0&&t[0]===this.previouslyFocused){const i=(e=this.list.options.accessibilityProvider)===null||e===void 0?void 0:e.getAriaLabel(this.list.element(t[0]));typeof i=="string"?Mg(i):i&&Mg(i.get())}this.previouslyFocused=-1}onInput(e){if(!e){this.state=vp.Idle,this.triggered=!1;return}const t=this.list.getFocus(),i=t.length>0?t[0]:0,s=this.state===vp.Idle?1:0;this.state=vp.Typing;for(let r=0;r<this.list.length;r++){const o=(i+r+s)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(o)),l=a&&a.toString();if(this.list.options.typeNavigationEnabled){if(typeof l<"u"){if(FL(e,l)){this.previouslyFocused=i,this.list.setFocus([o]),this.list.reveal(o);return}const c=dGe(e,l);if(c&&c[0].end-c[0].start>1&&c.length===1){this.previouslyFocused=i,this.list.setFocus([o]),this.list.reveal(o);return}}}else if(typeof l>"u"||FL(e,l)){this.previouslyFocused=i,this.list.setFocus([o]),this.list.reveal(o);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class c8e{constructor(e,t){this.list=e,this.view=t,this.disposables=new ct;const i=Be.chain(this.disposables.add(new Yt(t.domNode,"keydown")).event,r=>r.filter(o=>!Ch(o.target)).map(o=>new Ji(o)));Be.chain(i,r=>r.filter(o=>o.keyCode===2&&!o.ctrlKey&&!o.metaKey&&!o.shiftKey&&!o.altKey))(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(t.length===0)return;const i=this.view.domElement(t[0]);if(!i)return;const s=i.querySelector("[tabIndex]");if(!s||!Es(s)||s.tabIndex===-1)return;const r=pt(s).getComputedStyle(s);r.visibility==="hidden"||r.display==="none"||(e.preventDefault(),e.stopPropagation(),s.focus())}dispose(){this.disposables.dispose()}}function pre(n){return jt?n.browserEvent.metaKey:n.browserEvent.ctrlKey}function bre(n){return n.browserEvent.shiftKey}function d8e(n){return PV(n)&&n.button===2}const HY={isSelectionSingleChangeEvent:pre,isSelectionRangeChangeEvent:bre};class vre{constructor(e){this.list=e,this.disposables=new ct,this._onPointer=new ue,this.onPointer=this._onPointer.event,e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||HY),this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(Ki.addTarget(e.getHTMLElement()))),Be.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||HY))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){Bv(e.browserEvent.target)||Js()!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(Ch(e.browserEvent.target)||Bv(e.browserEvent.target))return;const t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||Ch(e.browserEvent.target)||Bv(e.browserEvent.target)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=e.index;if(typeof t>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),d8e(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(Ch(e.browserEvent.target)||Bv(e.browserEvent.target)||this.isSelectionChangeEvent(e)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){const t=e.index;let i=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){if(typeof i>"u"){const d=this.list.getFocus()[0];i=d??t,this.list.setAnchor(i)}const s=Math.min(i,t),r=Math.max(i,t),o=Pr(s,r+1),a=this.list.getSelection(),l=f8e(bW(a,[i]),i);if(l.length===0)return;const c=bW(o,g8e(a,l));this.list.setSelection(c,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const s=this.list.getSelection(),r=s.filter(o=>o!==t);this.list.setFocus([t]),this.list.setAnchor(t),s.length===r.length?this.list.setSelection([...r,t],e.browserEvent):this.list.setSelection(r,e.browserEvent)}}dispose(){this.disposables.dispose()}}class _re{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){var t,i;const s=this.selectorSuffix&&`.${this.selectorSuffix}`,r=[];e.listBackground&&r.push(`.monaco-list${s} .monaco-list-rows { background: ${e.listBackground}; }`),e.listFocusBackground&&(r.push(`.monaco-list${s}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),r.push(`.monaco-list${s}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&r.push(`.monaco-list${s}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(r.push(`.monaco-list${s}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),r.push(`.monaco-list${s}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&r.push(`.monaco-list${s}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&r.push(`.monaco-list${s}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&r.push(`
				.monaco-drag-image,
				.monaco-list${s}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&r.push(`
				.monaco-drag-image,
				.monaco-list${s}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(r.push(`.monaco-list${s} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),r.push(`.monaco-list${s} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&r.push(`.monaco-list${s} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(r.push(`.monaco-list${s} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),r.push(`.monaco-list${s} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(r.push(`.monaco-list${s} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),r.push(`.monaco-list${s} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&r.push(`.monaco-list${s} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&r.push(`.monaco-list${s}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&r.push(`.monaco-list${s}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`);const o=Zd(e.listFocusAndSelectionOutline,Zd(e.listSelectionOutline,(t=e.listFocusOutline)!==null&&t!==void 0?t:""));o&&r.push(`.monaco-list${s}:focus .monaco-list-row.focused.selected { outline: 1px solid ${o}; outline-offset: -1px;}`),e.listFocusOutline&&r.push(`
				.monaco-drag-image,
				.monaco-list${s}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${s}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`);const a=Zd(e.listSelectionOutline,(i=e.listInactiveFocusOutline)!==null&&i!==void 0?i:"");a&&r.push(`.monaco-list${s} .monaco-list-row.focused.selected { outline: 1px dotted ${a}; outline-offset: -1px; }`),e.listSelectionOutline&&r.push(`.monaco-list${s} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listInactiveFocusOutline&&r.push(`.monaco-list${s} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&r.push(`.monaco-list${s} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropOverBackground&&r.push(`
				.monaco-list${s}.drop-target,
				.monaco-list${s} .monaco-list-rows.drop-target,
				.monaco-list${s} .monaco-list-row.drop-target { background-color: ${e.listDropOverBackground} !important; color: inherit !important; }
			`),e.listDropBetweenBackground&&(r.push(`
			.monaco-list${s} .monaco-list-rows.drop-target-before .monaco-list-row:first-child::before,
			.monaco-list${s} .monaco-list-row.drop-target-before::before {
				content: ""; position: absolute; top: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`),r.push(`
			.monaco-list${s} .monaco-list-rows.drop-target-after .monaco-list-row:last-child::after,
			.monaco-list${s} .monaco-list-row.drop-target-after::after {
				content: ""; position: absolute; bottom: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`)),e.tableColumnsBorder&&r.push(`
				.monaco-table > .monaco-split-view2,
				.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
				}

				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: transparent;
				}
			`),e.tableOddRowsBackgroundColor&&r.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${e.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=r.join(`
`)}}const u8e={listFocusBackground:"#7FB0D0",listActiveSelectionBackground:"#0E639C",listActiveSelectionForeground:"#FFFFFF",listActiveSelectionIconForeground:"#FFFFFF",listFocusAndSelectionOutline:"#90C2F9",listFocusAndSelectionBackground:"#094771",listFocusAndSelectionForeground:"#FFFFFF",listInactiveSelectionBackground:"#3F3F46",listInactiveSelectionIconForeground:"#FFFFFF",listHoverBackground:"#2A2D2E",listDropOverBackground:"#383B3D",listDropBetweenBackground:"#EEEEEE",treeIndentGuidesStroke:"#a9a9a9",treeInactiveIndentGuidesStroke:Ce.fromHex("#a9a9a9").transparent(.4).toString(),tableColumnsBorder:Ce.fromHex("#cccccc").transparent(.2).toString(),tableOddRowsBackgroundColor:Ce.fromHex("#cccccc").transparent(.04).toString(),listBackground:void 0,listFocusForeground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusForeground:void 0,listInactiveFocusBackground:void 0,listHoverForeground:void 0,listFocusOutline:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listHoverOutline:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},h8e={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}}};function f8e(n,e){const t=n.indexOf(e);if(t===-1)return[];const i=[];let s=t-1;for(;s>=0&&n[s]===e-(t-s);)i.push(n[s--]);for(i.reverse(),s=t;s<n.length&&n[s]===e+(s-t);)i.push(n[s++]);return i}function bW(n,e){const t=[];let i=0,s=0;for(;i<n.length||s<e.length;)if(i>=n.length)t.push(e[s++]);else if(s>=e.length)t.push(n[i++]);else if(n[i]===e[s]){t.push(n[i]),i++,s++;continue}else n[i]<e[s]?t.push(n[i++]):t.push(e[s++]);return t}function g8e(n,e){const t=[];let i=0,s=0;for(;i<n.length||s<e.length;)if(i>=n.length)t.push(e[s++]);else if(s>=e.length)t.push(n[i++]);else if(n[i]===e[s]){i++,s++;continue}else n[i]<e[s]?t.push(n[i++]):s++;return t}const UY=(n,e)=>n-e;class m8e{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,i,s){let r=0;for(const o of this.renderers)o.renderElement(e,t,i[r++],s)}disposeElement(e,t,i,s){var r;let o=0;for(const a of this.renderers)(r=a.disposeElement)===null||r===void 0||r.call(a,e,t,i[o],s),o+=1}disposeTemplate(e){let t=0;for(const i of this.renderers)i.disposeTemplate(e[t++])}}class p8e{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return{container:e,disposables:new ct}}renderElement(e,t,i){const s=this.accessibilityProvider.getAriaLabel(e),r=s&&typeof s!="string"?s:XL(s);i.disposables.add(ki(a=>{this.setAriaLabel(a.readObservable(r),i.container)}));const o=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof o=="number"?i.container.setAttribute("aria-level",`${o}`):i.container.removeAttribute("aria-level")}setAriaLabel(e,t){e?t.setAttribute("aria-label",e):t.removeAttribute("aria-label")}disposeElement(e,t,i,s){i.disposables.clear()}disposeTemplate(e){e.disposables.dispose()}}class b8e{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){const t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){var i,s;(s=(i=this.dnd).onDragStart)===null||s===void 0||s.call(i,e,t)}onDragOver(e,t,i,s,r){return this.dnd.onDragOver(e,t,i,s,r)}onDragLeave(e,t,i,s){var r,o;(o=(r=this.dnd).onDragLeave)===null||o===void 0||o.call(r,e,t,i,s)}onDragEnd(e){var t,i;(i=(t=this.dnd).onDragEnd)===null||i===void 0||i.call(t,e)}drop(e,t,i,s,r){this.dnd.drop(e,t,i,s,r)}dispose(){this.dnd.dispose()}}let Hl=class{get onDidChangeFocus(){return Be.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e),this.disposables)}get onDidChangeSelection(){return Be.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e),this.disposables)}get domId(){return this.view.domId}get onDidScroll(){return this.view.onDidScroll}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onMouseOut(){return this.view.onMouseOut}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const t=Be.chain(this.disposables.add(new Yt(this.view.domNode,"keydown")).event,r=>r.map(o=>new Ji(o)).filter(o=>e=o.keyCode===58||o.shiftKey&&o.keyCode===68).map(o=>$t.stop(o,!0)).filter(()=>!1)),i=Be.chain(this.disposables.add(new Yt(this.view.domNode,"keyup")).event,r=>r.forEach(()=>e=!1).map(o=>new Ji(o)).filter(o=>o.keyCode===58||o.shiftKey&&o.keyCode===68).map(o=>$t.stop(o,!0)).map(({browserEvent:o})=>{const a=this.getFocus(),l=a.length?a[0]:void 0,c=typeof l<"u"?this.view.element(l):void 0,d=typeof l<"u"?this.view.domElement(l):this.view.domNode;return{index:l,element:c,anchor:d,browserEvent:o}})),s=Be.chain(this.view.onContextMenu,r=>r.filter(o=>!e).map(({element:o,index:a,browserEvent:l})=>({element:o,index:a,anchor:new Sl(pt(this.view.domNode),l),browserEvent:l})));return Be.any(t,i,s)}get onKeyDown(){return this.disposables.add(new Yt(this.view.domNode,"keydown")).event}get onDidFocus(){return Be.signal(this.disposables.add(new Yt(this.view.domNode,"focus",!0)).event)}get onDidBlur(){return Be.signal(this.disposables.add(new Yt(this.view.domNode,"blur",!0)).event)}constructor(e,t,i,s,r=h8e){var o,a,l,c;this.user=e,this._options=r,this.focus=new zL("focused"),this.anchor=new zL("anchor"),this.eventBufferer=new g2,this._ariaLabel="",this.disposables=new ct,this._onDidDispose=new ue,this.onDidDispose=this._onDidDispose.event;const d=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?(o=this._options.accessibilityProvider)===null||o===void 0?void 0:o.getWidgetRole():"list";this.selection=new s8e(d!=="listbox");const u=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=r.accessibilityProvider,this.accessibilityProvider&&(u.push(new p8e(this.accessibilityProvider)),(l=(a=this.accessibilityProvider).onDidChangeActiveDescendant)===null||l===void 0||l.call(a,this.onDidChangeActiveDescendant,this,this.disposables)),s=s.map(f=>new m8e(f.templateId,[...u,f]));const h={...r,dnd:r.dnd&&new b8e(this,r.dnd)};if(this.view=this.createListView(t,i,s,h),this.view.domNode.setAttribute("role",d),r.styleController)this.styleController=r.styleController(this.view.domId);else{const f=Ka(this.view.domNode);this.styleController=new _re(f,this.view.domId)}if(this.spliceable=new E7e([new DR(this.focus,this.view,r.identityProvider),new DR(this.selection,this.view,r.identityProvider),new DR(this.anchor,this.view,r.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new c8e(this,this.view)),(typeof r.keyboardSupport!="boolean"||r.keyboardSupport)&&(this.keyboardController=new mre(this,this.view,r),this.disposables.add(this.keyboardController)),r.keyboardNavigationLabelProvider){const f=r.keyboardNavigationDelegate||a8e;this.typeNavigationController=new l8e(this,this.view,r.keyboardNavigationLabelProvider,(c=r.keyboardNavigationEventFilter)!==null&&c!==void 0?c:()=>!0,f),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(r),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}createListView(e,t,i,s){return new ba(e,t,i,s)}createMouseController(e){return new vre(this)}updateOptions(e={}){var t,i;this._options={...this._options,...e},(t=this.typeNavigationController)===null||t===void 0||t.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),(i=this.keyboardController)===null||i===void 0||i.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,i=[]){if(e<0||e>this.view.length)throw new wf(this.user,`Invalid start index: ${e}`);if(t<0)throw new wf(this.user,`Invalid delete count: ${t}`);t===0&&i.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,i))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}indexOf(e){return this.view.indexOf(e)}indexAt(e){return this.view.indexAt(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleIndex(){return this.view.firstVisibleIndex}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}setSelection(e,t){for(const i of e)if(i<0||i>=this.length)throw new wf(this.user,`Invalid index ${i}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e>"u"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new wf(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return YV(this.anchor.get(),void 0)}getAnchorElement(){const e=this.getAnchor();return typeof e>"u"?void 0:this.element(e)}setFocus(e,t){for(const i of e)if(i<0||i>=this.length)throw new wf(this.user,`Invalid index ${i}`);this.focus.set(e,t)}focusNext(e=1,t=!1,i,s){if(this.length===0)return;const r=this.focus.get(),o=this.findNextIndex(r.length>0?r[0]+e:0,t,s);o>-1&&this.setFocus([o],i)}focusPrevious(e=1,t=!1,i,s){if(this.length===0)return;const r=this.focus.get(),o=this.findPreviousIndex(r.length>0?r[0]-e:0,t,s);o>-1&&this.setFocus([o],i)}async focusNextPage(e,t){let i=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);i=i===0?0:i-1;const s=this.getFocus()[0];if(s!==i&&(s===void 0||i>s)){const r=this.findPreviousIndex(i,!1,t);r>-1&&s!==r?this.setFocus([r],e):this.setFocus([i],e)}else{const r=this.view.getScrollTop();let o=r+this.view.renderHeight;i>s&&(o-=this.view.elementHeight(i)),this.view.setScrollTop(o),this.view.getScrollTop()!==r&&(this.setFocus([]),await Lb(0),await this.focusNextPage(e,t))}}async focusPreviousPage(e,t,i=()=>0){let s;const r=i(),o=this.view.getScrollTop()+r;o===0?s=this.view.indexAt(o):s=this.view.indexAfter(o-1);const a=this.getFocus()[0];if(a!==s&&(a===void 0||a>=s)){const l=this.findNextIndex(s,!1,t);l>-1&&a!==l?this.setFocus([l],e):this.setFocus([s],e)}else{const l=o;this.view.setScrollTop(o-this.view.renderHeight-r),this.view.getScrollTop()+i()!==l&&(this.setFocus([]),await Lb(0),await this.focusPreviousPage(e,t,i))}}focusLast(e,t){if(this.length===0)return;const i=this.findPreviousIndex(this.length-1,!1,t);i>-1&&this.setFocus([i],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,i){if(this.length===0)return;const s=this.findNextIndex(e,!1,i);s>-1&&this.setFocus([s],t)}findNextIndex(e,t=!1,i){for(let s=0;s<this.length;s++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!i||i(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,i){for(let s=0;s<this.length;s++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!i||i(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t,i=0){if(e<0||e>=this.length)throw new wf(this.user,`Invalid index ${e}`);const s=this.view.getScrollTop(),r=this.view.elementTop(e),o=this.view.elementHeight(e);if(Rh(t)){const a=o-this.view.renderHeight+i;this.view.setScrollTop(a*Br(t,0,1)+r-i)}else{const a=r+o,l=s+this.view.renderHeight;r<s+i&&a>=l||(r<s+i||a>=l&&o>=this.view.renderHeight?this.view.setScrollTop(r-i):a>=l&&this.view.setScrollTop(a-this.view.renderHeight))}}getRelativeTop(e,t=0){if(e<0||e>=this.length)throw new wf(this.user,`Invalid index ${e}`);const i=this.view.getScrollTop(),s=this.view.elementTop(e),r=this.view.elementHeight(e);if(s<i+t||s+r>i+this.view.renderHeight)return null;const o=r-this.view.renderHeight+t;return Math.abs((i+t-s)/o)}getHTMLElement(){return this.view.domNode}getScrollableElement(){return this.view.scrollableElementDomNode}getElementID(e){return this.view.getElementDomId(e)}getElementTop(e){return this.view.elementTop(e)}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(i=>this.view.element(i)),browserEvent:t}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var e;const t=this.focus.get();if(t.length>0){let i;!((e=this.accessibilityProvider)===null||e===void 0)&&e.getActiveDescendantId&&(i=this.accessibilityProvider.getActiveDescendantId(this.view.element(t[0]))),this.view.domNode.setAttribute("aria-activedescendant",i||this.view.getElementDomId(t[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}};hf([Tn],Hl.prototype,"onDidChangeFocus",null);hf([Tn],Hl.prototype,"onDidChangeSelection",null);hf([Tn],Hl.prototype,"onContextMenu",null);hf([Tn],Hl.prototype,"onKeyDown",null);hf([Tn],Hl.prototype,"onDidFocus",null);hf([Tn],Hl.prototype,"onDidBlur",null);const Qf=St,wre="selectOption.entry.template";class v8e{get templateId(){return wre}renderTemplate(e){const t=Object.create(null);return t.root=e,t.text=dt(e,Qf(".option-text")),t.detail=dt(e,Qf(".option-detail")),t.decoratorRight=dt(e,Qf(".option-decorator-right")),t}renderElement(e,t,i){const s=i,r=e.text,o=e.detail,a=e.decoratorRight,l=e.isDisabled;s.text.textContent=r,s.detail.textContent=o||"",s.decoratorRight.innerText=a||"",l?s.root.classList.add("option-disabled"):s.root.classList.remove("option-disabled")}disposeTemplate(e){}}class pc extends Le{constructor(e,t,i,s,r){super(),this.options=[],this._currentSelection=0,this._hasDetails=!1,this._skipLayout=!1,this._sticky=!1,this._isVisible=!1,this.styles=s,this.selectBoxOptions=r||Object.create(null),typeof this.selectBoxOptions.minBottomMargin!="number"?this.selectBoxOptions.minBottomMargin=pc.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN:this.selectBoxOptions.minBottomMargin<0&&(this.selectBoxOptions.minBottomMargin=0),this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box monaco-select-box-dropdown-padding",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=new ue,this._register(this._onDidSelect),this.registerListeners(),this.constructSelectDropDown(i),this.selected=t||0,e&&this.setOptions(e,t),this.initStyleSheet()}setTitle(e){!this._hover&&e?this._hover=this._register(Kc().setupUpdatableHover(_o("mouse"),this.selectElement,e)):this._hover&&this._hover.update(e)}getHeight(){return 22}getTemplateId(){return wre}constructSelectDropDown(e){this.contextViewProvider=e,this.selectDropDownContainer=St(".monaco-select-box-dropdown-container"),this.selectDropDownContainer.classList.add("monaco-select-box-dropdown-padding"),this.selectionDetailsPane=dt(this.selectDropDownContainer,Qf(".select-box-details-pane"));const t=dt(this.selectDropDownContainer,Qf(".select-box-dropdown-container-width-control")),i=dt(t,Qf(".width-control-div"));this.widthControlElement=document.createElement("span"),this.widthControlElement.className="option-text-width-control",dt(i,this.widthControlElement),this._dropDownPosition=0,this.styleElement=Ka(this.selectDropDownContainer),this.selectDropDownContainer.setAttribute("draggable","true"),this._register(we(this.selectDropDownContainer,Ge.DRAG_START,s=>{$t.stop(s,!0)}))}registerListeners(){this._register(ws(this.selectElement,"change",t=>{this.selected=t.target.selectedIndex,this._onDidSelect.fire({index:t.target.selectedIndex,selected:t.target.value}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)})),this._register(we(this.selectElement,Ge.CLICK,t=>{$t.stop(t),this._isVisible?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(we(this.selectElement,Ge.MOUSE_DOWN,t=>{$t.stop(t)}));let e;this._register(we(this.selectElement,"touchstart",t=>{e=this._isVisible})),this._register(we(this.selectElement,"touchend",t=>{$t.stop(t),e?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(we(this.selectElement,Ge.KEY_DOWN,t=>{const i=new Ji(t);let s=!1;jt?(i.keyCode===18||i.keyCode===16||i.keyCode===10||i.keyCode===3)&&(s=!0):(i.keyCode===18&&i.altKey||i.keyCode===16&&i.altKey||i.keyCode===10||i.keyCode===3)&&(s=!0),s&&(this.showSelectDropDown(),$t.stop(t,!0))}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){Gs(this.options,e)||(this.options=e,this.selectElement.options.length=0,this._hasDetails=!1,this._cachedMaxDetailsHeight=void 0,this.options.forEach((i,s)=>{this.selectElement.add(this.createOption(i.text,s,i.isDisabled)),typeof i.description=="string"&&(this._hasDetails=!0)})),t!==void 0&&(this.select(t),this._currentSelection=this.selected)}setOptionsList(){var e;(e=this.selectList)===null||e===void 0||e.splice(0,this.selectList.length,this.options)}select(e){e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){this.container=e,e.classList.add("select-container"),e.appendChild(this.selectElement),this.styleSelectElement()}initStyleSheet(){const e=[];this.styles.listFocusBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ${this.styles.listFocusBackground} !important; }`),this.styles.listFocusForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ${this.styles.listFocusForeground} !important; }`),this.styles.decoratorRightForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ${this.styles.decoratorRightForeground}; }`),this.styles.selectBackground&&this.styles.selectBorder&&this.styles.selectBorder!==this.styles.selectBackground?(e.push(`.monaco-select-box-dropdown-container { border: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectBorder} } `)):this.styles.selectListBorder&&(e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectListBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectListBorder} } `)),this.styles.listHoverForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ${this.styles.listHoverForeground} !important; }`),this.styles.listHoverBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ${this.styles.listHoverBackground} !important; }`),this.styles.listFocusOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ${this.styles.listFocusOutline} !important; outline-offset: -1.6px !important; }`),this.styles.listHoverOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ${this.styles.listHoverOutline} !important; outline-offset: -1.6px !important; }`),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }"),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }"),this.styleElement.textContent=e.join(`
`)}styleSelectElement(){var e,t,i;const s=(e=this.styles.selectBackground)!==null&&e!==void 0?e:"",r=(t=this.styles.selectForeground)!==null&&t!==void 0?t:"",o=(i=this.styles.selectBorder)!==null&&i!==void 0?i:"";this.selectElement.style.backgroundColor=s,this.selectElement.style.color=r,this.selectElement.style.borderColor=o}styleList(){var e,t;const i=(e=this.styles.selectBackground)!==null&&e!==void 0?e:"",s=Zd(this.styles.selectListBackground,i);this.selectDropDownListContainer.style.backgroundColor=s,this.selectionDetailsPane.style.backgroundColor=s;const r=(t=this.styles.focusBorder)!==null&&t!==void 0?t:"";this.selectDropDownContainer.style.outlineColor=r,this.selectDropDownContainer.style.outlineOffset="-1px",this.selectList.style(this.styles)}createOption(e,t,i){const s=document.createElement("option");return s.value=e,s.text=e,s.disabled=!!i,s}showSelectDropDown(){this.selectionDetailsPane.innerText="",!(!this.contextViewProvider||this._isVisible)&&(this.createSelectList(this.selectDropDownContainer),this.setOptionsList(),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e,!0),layout:()=>{this.layoutSelectDropDown()},onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._isVisible=!0,this.hideSelectDropDown(!1),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e),layout:()=>this.layoutSelectDropDown(),onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._currentSelection=this.selected,this._isVisible=!0,this.selectElement.setAttribute("aria-expanded","true"))}hideSelectDropDown(e){!this.contextViewProvider||!this._isVisible||(this._isVisible=!1,this.selectElement.setAttribute("aria-expanded","false"),e&&this.selectElement.focus(),this.contextViewProvider.hideContextView())}renderSelectDropDown(e,t){return e.appendChild(this.selectDropDownContainer),this.layoutSelectDropDown(t),{dispose:()=>{try{e.removeChild(this.selectDropDownContainer)}catch{}}}}measureMaxDetailsHeight(){let e=0;return this.options.forEach((t,i)=>{this.updateDetail(i),this.selectionDetailsPane.offsetHeight>e&&(e=this.selectionDetailsPane.offsetHeight)}),e}layoutSelectDropDown(e){if(this._skipLayout)return!1;if(this.selectList){this.selectDropDownContainer.classList.add("visible");const t=pt(this.selectElement),i=ho(this.selectElement),s=pt(this.selectElement).getComputedStyle(this.selectElement),r=parseFloat(s.getPropertyValue("--dropdown-padding-top"))+parseFloat(s.getPropertyValue("--dropdown-padding-bottom")),o=t.innerHeight-i.top-i.height-(this.selectBoxOptions.minBottomMargin||0),a=i.top-pc.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN,l=this.selectElement.offsetWidth,c=this.setWidthControlElement(this.widthControlElement),d=Math.max(c,Math.round(l)).toString()+"px";this.selectDropDownContainer.style.width=d,this.selectList.getHTMLElement().style.height="",this.selectList.layout();let u=this.selectList.contentHeight;this._hasDetails&&this._cachedMaxDetailsHeight===void 0&&(this._cachedMaxDetailsHeight=this.measureMaxDetailsHeight());const h=this._hasDetails?this._cachedMaxDetailsHeight:0,f=u+r+h,g=Math.floor((o-r-h)/this.getHeight()),m=Math.floor((a-r-h)/this.getHeight());if(e)return i.top+i.height>t.innerHeight-22||i.top<pc.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||g<1&&m<1?!1:(g<pc.DEFAULT_MINIMUM_VISIBLE_OPTIONS&&m>g&&this.options.length>g?(this._dropDownPosition=1,this.selectDropDownContainer.removeChild(this.selectDropDownListContainer),this.selectDropDownContainer.removeChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectionDetailsPane.classList.remove("border-top"),this.selectionDetailsPane.classList.add("border-bottom")):(this._dropDownPosition=0,this.selectDropDownContainer.removeChild(this.selectDropDownListContainer),this.selectDropDownContainer.removeChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectionDetailsPane.classList.remove("border-bottom"),this.selectionDetailsPane.classList.add("border-top")),!0);if(i.top+i.height>t.innerHeight-22||i.top<pc.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||this._dropDownPosition===0&&g<1||this._dropDownPosition===1&&m<1)return this.hideSelectDropDown(!0),!1;if(this._dropDownPosition===0){if(this._isVisible&&g+m<1)return this.hideSelectDropDown(!0),!1;f>o&&(u=g*this.getHeight())}else f>a&&(u=m*this.getHeight());return this.selectList.layout(u),this.selectList.domFocus(),this.selectList.length>0&&(this.selectList.setFocus([this.selected||0]),this.selectList.reveal(this.selectList.getFocus()[0]||0)),this._hasDetails?(this.selectList.getHTMLElement().style.height=u+r+"px",this.selectDropDownContainer.style.height=""):this.selectDropDownContainer.style.height=u+r+"px",this.updateDetail(this.selected),this.selectDropDownContainer.style.width=d,this.selectDropDownListContainer.setAttribute("tabindex","0"),this.selectElement.classList.add("synthetic-focus"),this.selectDropDownContainer.classList.add("synthetic-focus"),!0}else return!1}setWidthControlElement(e){let t=0;if(e){let i=0,s=0;this.options.forEach((r,o)=>{const a=r.detail?r.detail.length:0,l=r.decoratorRight?r.decoratorRight.length:0,c=r.text.length+a+l;c>s&&(i=o,s=c)}),e.textContent=this.options[i].text+(this.options[i].decoratorRight?this.options[i].decoratorRight+" ":""),t=Ca(e)}return t}createSelectList(e){if(this.selectList)return;this.selectDropDownListContainer=dt(e,Qf(".select-box-dropdown-list-container")),this.listRenderer=new v8e,this.selectList=new Hl("SelectBoxCustom",this.selectDropDownListContainer,this,[this.listRenderer],{useShadows:!1,verticalScrollMode:3,keyboardSupport:!1,mouseSupport:!1,accessibilityProvider:{getAriaLabel:s=>{let r=s.text;return s.detail&&(r+=`. ${s.detail}`),s.decoratorRight&&(r+=`. ${s.decoratorRight}`),s.description&&(r+=`. ${s.description}`),r},getWidgetAriaLabel:()=>L({key:"selectBox",comment:["Behave like native select dropdown element."]},"Select Box"),getRole:()=>jt?"":"option",getWidgetRole:()=>"listbox"}}),this.selectBoxOptions.ariaLabel&&(this.selectList.ariaLabel=this.selectBoxOptions.ariaLabel);const t=this._register(new Yt(this.selectDropDownListContainer,"keydown")),i=Be.chain(t.event,s=>s.filter(()=>this.selectList.length>0).map(r=>new Ji(r)));this._register(Be.chain(i,s=>s.filter(r=>r.keyCode===3))(this.onEnter,this)),this._register(Be.chain(i,s=>s.filter(r=>r.keyCode===2))(this.onEnter,this)),this._register(Be.chain(i,s=>s.filter(r=>r.keyCode===9))(this.onEscape,this)),this._register(Be.chain(i,s=>s.filter(r=>r.keyCode===16))(this.onUpArrow,this)),this._register(Be.chain(i,s=>s.filter(r=>r.keyCode===18))(this.onDownArrow,this)),this._register(Be.chain(i,s=>s.filter(r=>r.keyCode===12))(this.onPageDown,this)),this._register(Be.chain(i,s=>s.filter(r=>r.keyCode===11))(this.onPageUp,this)),this._register(Be.chain(i,s=>s.filter(r=>r.keyCode===14))(this.onHome,this)),this._register(Be.chain(i,s=>s.filter(r=>r.keyCode===13))(this.onEnd,this)),this._register(Be.chain(i,s=>s.filter(r=>r.keyCode>=21&&r.keyCode<=56||r.keyCode>=85&&r.keyCode<=113))(this.onCharacter,this)),this._register(we(this.selectList.getHTMLElement(),Ge.POINTER_UP,s=>this.onPointerUp(s))),this._register(this.selectList.onMouseOver(s=>typeof s.index<"u"&&this.selectList.setFocus([s.index]))),this._register(this.selectList.onDidChangeFocus(s=>this.onListFocus(s))),this._register(we(this.selectDropDownContainer,Ge.FOCUS_OUT,s=>{!this._isVisible||ss(s.relatedTarget,this.selectDropDownContainer)||this.onListBlur()})),this.selectList.getHTMLElement().setAttribute("aria-label",this.selectBoxOptions.ariaLabel||""),this.selectList.getHTMLElement().setAttribute("aria-expanded","true"),this.styleList()}onPointerUp(e){if(!this.selectList.length)return;$t.stop(e);const t=e.target;if(!t||t.classList.contains("slider"))return;const i=t.closest(".monaco-list-row");if(!i)return;const s=Number(i.getAttribute("data-index")),r=i.classList.contains("option-disabled");s>=0&&s<this.options.length&&!r&&(this.selected=s,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0))}onListBlur(){this._sticky||(this.selected!==this._currentSelection&&this.select(this._currentSelection),this.hideSelectDropDown(!1))}renderDescriptionMarkdown(e,t){const i=r=>{for(let o=0;o<r.childNodes.length;o++){const a=r.childNodes.item(o);(a.tagName&&a.tagName.toLowerCase())==="img"?r.removeChild(a):i(a)}},s=nT({value:e,supportThemeIcons:!0},{actionHandler:t});return s.element.classList.add("select-box-description-markdown"),i(s.element),s.element}onListFocus(e){!this._isVisible||!this._hasDetails||this.updateDetail(e.indexes[0])}updateDetail(e){var t,i;this.selectionDetailsPane.innerText="";const s=this.options[e],r=(t=s?.description)!==null&&t!==void 0?t:"",o=(i=s?.descriptionIsMarkdown)!==null&&i!==void 0?i:!1;if(r){if(o){const a=s.descriptionMarkdownActionHandler;this.selectionDetailsPane.appendChild(this.renderDescriptionMarkdown(r,a))}else this.selectionDetailsPane.innerText=r;this.selectionDetailsPane.style.display="block"}else this.selectionDetailsPane.style.display="none";this._skipLayout=!0,this.contextViewProvider.layout(),this._skipLayout=!1}onEscape(e){$t.stop(e),this.select(this._currentSelection),this.hideSelectDropDown(!0)}onEnter(e){$t.stop(e),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0)}onDownArrow(e){if(this.selected<this.options.length-1){$t.stop(e,!0);const t=this.options[this.selected+1].isDisabled;if(t&&this.options.length>this.selected+2)this.selected+=2;else{if(t)return;this.selected++}this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}}onUpArrow(e){this.selected>0&&($t.stop(e,!0),this.options[this.selected-1].isDisabled&&this.selected>1?this.selected-=2:this.selected--,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]))}onPageUp(e){$t.stop(e),this.selectList.focusPreviousPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected<this.options.length-1&&(this.selected++,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onPageDown(e){$t.stop(e),this.selectList.focusNextPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected>0&&(this.selected--,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onHome(e){$t.stop(e),!(this.options.length<2)&&(this.selected=0,this.options[this.selected].isDisabled&&this.selected>1&&this.selected++,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onEnd(e){$t.stop(e),!(this.options.length<2)&&(this.selected=this.options.length-1,this.options[this.selected].isDisabled&&this.selected>1&&this.selected--,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onCharacter(e){const t=fd.toString(e.keyCode);let i=-1;for(let s=0;s<this.options.length-1;s++)if(i=(s+this.selected+1)%this.options.length,this.options[i].text.charAt(0).toUpperCase()===t&&!this.options[i].isDisabled){this.select(i),this.selectList.setFocus([i]),this.selectList.reveal(this.selectList.getFocus()[0]),$t.stop(e);break}}dispose(){this.hideSelectDropDown(!1),super.dispose()}}pc.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN=32;pc.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN=2;pc.DEFAULT_MINIMUM_VISIBLE_OPTIONS=3;class _8e extends Le{constructor(e,t,i,s){super(),this.selected=0,this.selectBoxOptions=s||Object.create(null),this.options=[],this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=this._register(new ue),this.styles=i,this.registerListeners(),this.setOptions(e,t)}registerListeners(){this._register(Ki.addTarget(this.selectElement)),[Gi.Tap].forEach(e=>{this._register(we(this.selectElement,e,t=>{this.selectElement.focus()}))}),this._register(ws(this.selectElement,"click",e=>{$t.stop(e,!0)})),this._register(ws(this.selectElement,"change",e=>{this.selectElement.title=e.target.value,this._onDidSelect.fire({index:e.target.selectedIndex,selected:e.target.value})})),this._register(ws(this.selectElement,"keydown",e=>{let t=!1;jt?(e.keyCode===18||e.keyCode===16||e.keyCode===10)&&(t=!0):(e.keyCode===18&&e.altKey||e.keyCode===10||e.keyCode===3)&&(t=!0),t&&e.stopPropagation()}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){(!this.options||!Gs(this.options,e))&&(this.options=e,this.selectElement.options.length=0,this.options.forEach((i,s)=>{this.selectElement.add(this.createOption(i.text,s,i.isDisabled))})),t!==void 0&&this.select(t)}select(e){this.options.length===0?this.selected=0:e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.selected<this.options.length&&typeof this.options[this.selected].text=="string"?this.selectElement.title=this.options[this.selected].text:this.selectElement.title=""}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){e.classList.add("select-container"),e.appendChild(this.selectElement),this.setOptions(this.options,this.selected),this.applyStyles()}applyStyles(){var e,t,i;this.selectElement&&(this.selectElement.style.backgroundColor=(e=this.styles.selectBackground)!==null&&e!==void 0?e:"",this.selectElement.style.color=(t=this.styles.selectForeground)!==null&&t!==void 0?t:"",this.selectElement.style.borderColor=(i=this.styles.selectBorder)!==null&&i!==void 0?i:"")}createOption(e,t,i){const s=document.createElement("option");return s.value=e,s.text=e,s.disabled=!!i,s}}class w8e extends pa{constructor(e,t,i,s,r){super(),jt&&!r?.useCustomDrawn?this.selectBoxDelegate=new _8e(e,t,s,r):this.selectBoxDelegate=new pc(e,t,i,s,r),this._register(this.selectBoxDelegate)}get onDidSelect(){return this.selectBoxDelegate.onDidSelect}setOptions(e,t){this.selectBoxDelegate.setOptions(e,t)}select(e){this.selectBoxDelegate.select(e)}focus(){this.selectBoxDelegate.focus()}blur(){this.selectBoxDelegate.blur()}setFocusable(e){this.selectBoxDelegate.setFocusable(e)}render(e){this.selectBoxDelegate.render(e)}}class bl extends Le{get action(){return this._action}constructor(e,t,i={}){super(),this.options=i,this._context=e||this,this._action=t,t instanceof Gd&&this._register(t.onDidChange(s=>{this.element&&this.handleActionChangeEvent(s)}))}handleActionChangeEvent(e){e.enabled!==void 0&&this.updateEnabled(),e.checked!==void 0&&this.updateChecked(),e.class!==void 0&&this.updateClass(),e.label!==void 0&&(this.updateLabel(),this.updateTooltip()),e.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new Eg)),this._actionRunner}set actionRunner(e){this._actionRunner=e}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){const t=this.element=e;this._register(Ki.addTarget(e));const i=this.options&&this.options.draggable;i&&(e.draggable=!0,ua&&this._register(we(e,Ge.DRAG_START,s=>{var r;return(r=s.dataTransfer)===null||r===void 0?void 0:r.setData(c1.TEXT,this._action.label)}))),this._register(we(t,Gi.Tap,s=>this.onClick(s,!0))),this._register(we(t,Ge.MOUSE_DOWN,s=>{i||$t.stop(s,!0),this._action.enabled&&s.button===0&&t.classList.add("active")})),jt&&this._register(we(t,Ge.CONTEXT_MENU,s=>{s.button===0&&s.ctrlKey===!0&&this.onClick(s)})),this._register(we(t,Ge.CLICK,s=>{$t.stop(s,!0),this.options&&this.options.isMenu||this.onClick(s)})),this._register(we(t,Ge.DBLCLICK,s=>{$t.stop(s,!0)})),[Ge.MOUSE_UP,Ge.MOUSE_OUT].forEach(s=>{this._register(we(t,s,r=>{$t.stop(r),t.classList.remove("active")}))})}onClick(e,t=!1){var i;$t.stop(e,!0);const s=xo(this._context)?!((i=this.options)===null||i===void 0)&&i.useEventAsContext?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,s)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}getClass(){return this.action.class}getTooltip(){return this.action.tooltip}updateTooltip(){var e,t,i;if(!this.element)return;const s=(e=this.getTooltip())!==null&&e!==void 0?e:"";if(this.updateAriaLabel(),!((t=this.options.hoverDelegate)===null||t===void 0)&&t.showNativeHover)this.element.title=s;else if(!this.customHover&&s!==""){const r=(i=this.options.hoverDelegate)!==null&&i!==void 0?i:_o("element");this.customHover=this._store.add(Kc().setupUpdatableHover(r,this.element,s))}else this.customHover&&this.customHover.update(s)}updateAriaLabel(){var e;if(this.element){const t=(e=this.getTooltip())!==null&&e!==void 0?e:"";this.element.setAttribute("aria-label",t)}}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),this._context=void 0,super.dispose()}}class sO extends bl{constructor(e,t,i){super(e,t,i),this.options=i,this.options.icon=i.icon!==void 0?i.icon:!1,this.options.label=i.label!==void 0?i.label:!0,this.cssClass=""}render(e){super.render(e),Jr(this.element);const t=document.createElement("a");if(t.classList.add("action-label"),t.setAttribute("role",this.getDefaultAriaRole()),this.label=t,this.element.appendChild(t),this.options.label&&this.options.keybinding){const i=document.createElement("span");i.classList.add("keybinding"),i.textContent=this.options.keybinding,this.element.appendChild(i)}this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}getDefaultAriaRole(){return this._action.id===Zs.ID?"presentation":this.options.isMenu?"menuitem":"button"}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.action.label)}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:!this.options.label&&this.action.label&&this.options.icon&&(e=this.action.label,this.options.keybinding&&(e=L({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e??void 0}updateClass(){var e;this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getClass(),this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):(e=this.label)===null||e===void 0||e.classList.remove("codicon")}updateEnabled(){var e,t;this.action.enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),(e=this.element)===null||e===void 0||e.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),(t=this.element)===null||t===void 0||t.classList.add("disabled"))}updateAriaLabel(){var e;if(this.label){const t=(e=this.getTooltip())!==null&&e!==void 0?e:"";this.label.setAttribute("aria-label",t)}}updateChecked(){this.label&&(this.action.checked!==void 0?(this.label.classList.toggle("checked",this.action.checked),this.label.setAttribute("aria-checked",this.action.checked?"true":"false"),this.label.setAttribute("role","checkbox")):(this.label.classList.remove("checked"),this.label.removeAttribute("aria-checked"),this.label.setAttribute("role",this.getDefaultAriaRole())))}}class y8e extends bl{constructor(e,t,i,s,r,o,a){super(e,t),this.selectBox=new w8e(i,s,r,o,a),this.selectBox.setFocusable(!1),this._register(this.selectBox),this.registerListeners()}select(e){this.selectBox.select(e)}registerListeners(){this._register(this.selectBox.onDidSelect(e=>this.runAction(e.selected,e.index)))}runAction(e,t){this.actionRunner.run(this._action,this.getActionContext(e,t))}getActionContext(e,t){return e}setFocusable(e){this.selectBox.setFocusable(e)}focus(){var e;(e=this.selectBox)===null||e===void 0||e.focus()}blur(){var e;(e=this.selectBox)===null||e===void 0||e.blur()}render(e){this.selectBox.render(e)}}class zh extends Le{constructor(e,t={}){var i,s,r,o,a,l,c;super(),this._actionRunnerDisposables=this._register(new ct),this.viewItemDisposables=this._register(new CV),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new ue),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new ue({onWillAddFirstListener:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new ue),this.onDidRun=this._onDidRun.event,this._onWillRun=this._register(new ue),this.onWillRun=this._onWillRun.event,this.options=t,this._context=(i=t.context)!==null&&i!==void 0?i:null,this._orientation=(s=this.options.orientation)!==null&&s!==void 0?s:0,this._triggerKeys={keyDown:(o=(r=this.options.triggerKeys)===null||r===void 0?void 0:r.keyDown)!==null&&o!==void 0?o:!1,keys:(l=(a=this.options.triggerKeys)===null||a===void 0?void 0:a.keys)!==null&&l!==void 0?l:[3,10]},this._hoverDelegate=(c=t.hoverDelegate)!==null&&c!==void 0?c:this._register(Zb()),this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new Eg,this._actionRunnerDisposables.add(this._actionRunner)),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(h=>this._onDidRun.fire(h))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(h=>this._onWillRun.fire(h))),this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar";let d,u;switch(this._orientation){case 0:d=[15],u=[17];break;case 1:d=[16],u=[18],this.domNode.className+=" vertical";break}this._register(we(this.domNode,Ge.KEY_DOWN,h=>{const f=new Ji(h);let g=!0;const m=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;d&&(f.equals(d[0])||f.equals(d[1]))?g=this.focusPrevious():u&&(f.equals(u[0])||f.equals(u[1]))?g=this.focusNext():f.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():f.equals(14)?g=this.focusFirst():f.equals(13)?g=this.focusLast():f.equals(2)&&m instanceof bl&&m.trapsArrowNavigation?g=this.focusNext():this.isTriggerKeyEvent(f)?this._triggerKeys.keyDown?this.doTrigger(f):this.triggerKeyDown=!0:g=!1,g&&(f.preventDefault(),f.stopPropagation())})),this._register(we(this.domNode,Ge.KEY_UP,h=>{const f=new Ji(h);this.isTriggerKeyEvent(f)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(f)),f.preventDefault(),f.stopPropagation()):(f.equals(2)||f.equals(1026)||f.equals(16)||f.equals(18)||f.equals(15)||f.equals(17))&&this.updateFocusedItem()})),this.focusTracker=this._register(Ig(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(Js()===this.domNode||!ss(Js(),this.domNode))&&(this._onDidBlur.fire(),this.previouslyFocusedItem=this.focusedItem,this.focusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.options.highlightToggledItems&&this.actionsList.classList.add("highlight-toggled"),this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}refreshRole(){this.length()>=1?this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"):this.actionsList.setAttribute("role","presentation")}setFocusable(e){if(this.focusable=e,this.focusable){const t=this.viewItems.find(i=>i instanceof bl&&i.isEnabled());t instanceof bl&&t.setFocusable(!0)}else this.viewItems.forEach(t=>{t instanceof bl&&t.setFocusable(!1)})}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(i=>{t=t||e.equals(i)}),t}updateFocusedItem(){var e,t;for(let i=0;i<this.actionsList.children.length;i++){const s=this.actionsList.children[i];if(ss(Js(),s)){this.focusedItem=i,(t=(e=this.viewItems[this.focusedItem])===null||e===void 0?void 0:e.showHover)===null||t===void 0||t.call(e);break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){this._actionRunner=e,this._actionRunnerDisposables.clear(),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(t=>this._onDidRun.fire(t))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(t=>this._onWillRun.fire(t))),this.viewItems.forEach(t=>t.actionRunner=e)}getContainer(){return this.domNode}getAction(e){var t;if(typeof e=="number")return(t=this.viewItems[e])===null||t===void 0?void 0:t.action;if(Es(e)){for(;e.parentElement!==this.actionsList;){if(!e.parentElement)return;e=e.parentElement}for(let i=0;i<this.actionsList.childNodes.length;i++)if(this.actionsList.childNodes[i]===e)return this.viewItems[i].action}}push(e,t={}){const i=Array.isArray(e)?e:[e];let s=Rh(t.index)?t.index:null;i.forEach(r=>{const o=document.createElement("li");o.className="action-item",o.setAttribute("role","presentation");let a;const l={hoverDelegate:this._hoverDelegate,...t};this.options.actionViewItemProvider&&(a=this.options.actionViewItemProvider(r,l)),a||(a=new sO(this.context,r,l)),this.options.allowContextMenu||this.viewItemDisposables.set(a,we(o,Ge.CONTEXT_MENU,c=>{$t.stop(c,!0)})),a.actionRunner=this._actionRunner,a.setActionContext(this.context),a.render(o),this.focusable&&a instanceof bl&&this.viewItems.length===0&&a.setFocusable(!0),s===null||s<0||s>=this.actionsList.children.length?(this.actionsList.appendChild(o),this.viewItems.push(a)):(this.actionsList.insertBefore(o,this.actionsList.children[s]),this.viewItems.splice(s,0,a),s++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem),this.refreshRole()}clear(){this.isEmpty()||(this.viewItems=Ns(this.viewItems),this.viewItemDisposables.clearAndDisposeAll(),Rl(this.actionsList),this.refreshRole())}length(){return this.viewItems.length}isEmpty(){return this.viewItems.length===0}focus(e){let t=!1,i;if(e===void 0?t=!0:typeof e=="number"?i=e:typeof e=="boolean"&&(t=e),t&&typeof this.focusedItem>"u"){const s=this.viewItems.findIndex(r=>r.isEnabled());this.focusedItem=s===-1?void 0:s,this.updateFocus(void 0,void 0,!0)}else i!==void 0&&(this.focusedItem=i),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e){if(typeof this.focusedItem>"u")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let i;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=t,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,i=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!i.isEnabled()||i.action.id===Zs.ID));return this.updateFocus(),!0}focusPrevious(e){if(typeof this.focusedItem>"u")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let i;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=t,!1;this.focusedItem=this.viewItems.length-1}i=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!i.isEnabled()||i.action.id===Zs.ID));return this.updateFocus(!0),!0}updateFocus(e,t,i=!1){var s,r;typeof this.focusedItem>"u"&&this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&((s=this.viewItems[this.previouslyFocusedItem])===null||s===void 0||s.blur());const o=this.focusedItem!==void 0?this.viewItems[this.focusedItem]:void 0;if(o){let a=!0;UC(o.focus)||(a=!1),this.options.focusOnlyEnabledItems&&UC(o.isEnabled)&&!o.isEnabled()&&(a=!1),o.action.id===Zs.ID&&(a=!1),a?(i||this.previouslyFocusedItem!==this.focusedItem)&&(o.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0),a&&((r=o.showHover)===null||r===void 0||r.call(o))}}doTrigger(e){if(typeof this.focusedItem>"u")return;const t=this.viewItems[this.focusedItem];if(t instanceof bl){const i=t._context===null||t._context===void 0?e:t._context;this.run(t._action,i)}}async run(e,t){await this._actionRunner.run(e,t)}dispose(){this._context=void 0,this.viewItems=Ns(this.viewItems),this.getContainer().remove(),super.dispose()}}class S8e{constructor(e,t=0,i=e.length,s=t-1){this.items=e,this.start=t,this.end=i,this.index=s}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}class C8e{constructor(e=[],t=10){this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._navigator.next()}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}isLast(){return this._currentPosition()>=this._elements.length-1}isNowhere(){return this._navigator.current()===null}has(e){return this._history.has(e)}_onChange(){this._reduceToLimit();const e=this._elements;this._navigator=new S8e(e,0,e.length,e.length)}_reduceToLimit(){const e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){const e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(const t of e)this._history.add(t)}get _elements(){const e=[];return this._history.forEach(t=>e.push(t)),e}}const tv=St;let L8e=class extends pa{constructor(e,t,i){var s;super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new ue),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new ue),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=t,this.options=i,this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=(s=this.options.tooltip)!==null&&s!==void 0?s:this.placeholder||"",this.ariaLabel=this.options.ariaLabel||"",this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=dt(e,tv(".monaco-inputbox.idle"));const r=this.options.flexibleHeight?"textarea":"input",o=dt(this.element,tv(".ibwrapper"));if(this.input=dt(o,tv(r+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=dt(o,tv("div.mirror")),this.mirror.innerText="",this.scrollableElement=new pFe(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),dt(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(c=>this.input.scrollTop=c.scrollTop));const a=this._register(new Yt(e.ownerDocument,"selectionchange")),l=Be.filter(a.event,()=>{const c=e.ownerDocument.getSelection();return c?.anchorNode===o});this._register(l(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this._register(this.ignoreGesture(this.input)),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new zh(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.hover?this.hover.update(e):this.hover=this._register(Kc().setupUpdatableHover(_o("mouse"),this.input,e))}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:c3(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return w2(this.input)}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}getSelection(){var e;const t=this.input.selectionStart;if(t===null)return null;const i=(e=this.input.selectionEnd)!==null&&e!==void 0?e:t;return{start:t,end:i}}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}set paddingRight(e){this.input.style.width=`calc(100% - ${e}px)`,this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;const e=this.cachedContentHeight,t=this.cachedHeight,i=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:i})}showMessage(e,t){if(this.state==="open"&&Ro(this.message,e))return;this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));const i=this.stylesForType(this.message.type);this.element.style.border=`1px solid ${Zd(i.border,"transparent")}`,this.message.content&&(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e?.type}stylesForType(e){const t=this.options.inputBoxStyles;switch(e){case 1:return{border:t.inputValidationInfoBorder,background:t.inputValidationInfoBackground,foreground:t.inputValidationInfoForeground};case 2:return{border:t.inputValidationWarningBorder,background:t.inputValidationWarningBackground,foreground:t.inputValidationWarningForeground};default:return{border:t.inputValidationErrorBorder,background:t.inputValidationErrorBackground,foreground:t.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e;const t=()=>e.style.width=Ca(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:s=>{var r,o;if(!this.message)return null;e=dt(s,tv(".monaco-inputbox-container")),t();const a={inline:!0,className:"monaco-inputbox-message"},l=this.message.formatContent?jZe(this.message.content,a):KZe(this.message.content,a);l.classList.add(this.classForType(this.message.type));const c=this.stylesForType(this.message.type);return l.style.backgroundColor=(r=c.background)!==null&&r!==void 0?r:"",l.style.color=(o=c.foreground)!==null&&o!==void 0?o:"",l.style.border=c.border?`1px solid ${c.border}`:"",dt(e,l),null},onHide:()=>{this.state="closed"},layout:t});let i;this.message.type===3?i=L("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?i=L("alertWarningMessage","Warning: {0}",this.message.content):i=L("alertInfoMessage","Info: {0}",this.message.content),Mg(i),this.state="open"}_hideMessage(){this.contextViewProvider&&(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const e=this.value,i=e.charCodeAt(e.length-1)===10?" ":"";(e+i).replace(/\u000c/g,"")?this.mirror.textContent=e+i:this.mirror.innerText="",this.layout()}applyStyles(){var e,t,i;const s=this.options.inputBoxStyles,r=(e=s.inputBackground)!==null&&e!==void 0?e:"",o=(t=s.inputForeground)!==null&&t!==void 0?t:"",a=(i=s.inputBorder)!==null&&i!==void 0?i:"";this.element.style.backgroundColor=r,this.element.style.color=o,this.input.style.backgroundColor="inherit",this.input.style.color=o,this.element.style.border=`1px solid ${Zd(a,"transparent")}`}layout(){if(!this.mirror)return;const e=this.cachedContentHeight;this.cachedContentHeight=c3(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){const t=this.inputElement,i=t.selectionStart,s=t.selectionEnd,r=t.value;i!==null&&s!==null&&(this.value=r.substr(0,i)+e+r.substr(s),t.setSelectionRange(i+1,i+1),this.layout())}dispose(){var e;this._hideMessage(),this.message=null,(e=this.actionbar)===null||e===void 0||e.dispose(),super.dispose()}};class yre extends L8e{constructor(e,t,i){const s=L({key:"history.inputbox.hint.suffix.noparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field ends in a closing parenthesis ")", for example "Filter (e.g. text, !exclude)". The character inserted into the final string is  to represent the up and down arrow keys.']}," or {0} for history",""),r=L({key:"history.inputbox.hint.suffix.inparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field does NOT end in a closing parenthesis (eg. "Find"). The character inserted into the final string is  to represent the up and down arrow keys.']}," ({0} for history)","");super(e,t,i),this._onDidFocus=this._register(new ue),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new ue),this.onDidBlur=this._onDidBlur.event,this.history=new C8e(i.history,100);const o=()=>{if(i.showHistoryHint&&i.showHistoryHint()&&!this.placeholder.endsWith(s)&&!this.placeholder.endsWith(r)&&this.history.getHistory().length){const a=this.placeholder.endsWith(")")?s:r,l=this.placeholder+a;i.showPlaceholderOnFocus&&!w2(this.input)?this.placeholder=l:this.setPlaceHolder(l)}};this.observer=new MutationObserver((a,l)=>{a.forEach(c=>{c.target.textContent||o()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>o()),this.onblur(this.input,()=>{const a=l=>{if(this.placeholder.endsWith(l)){const c=this.placeholder.slice(0,this.placeholder.length-l.length);return i.showPlaceholderOnFocus?this.placeholder=c:this.setPlaceHolder(c),!0}else return!1};a(r)||a(s)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(e){this.value&&(e||this.value!==this.getCurrentValue())&&this.history.add(this.value)}isAtLastInHistory(){return this.history.isLast()}isNowhereInHistory(){return this.history.isNowhere()}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),this.value=e??"",oL(this.value?this.value:L("clearedInput","Cleared Input"))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,oL(this.value))}setPlaceHolder(e){super.setPlaceHolder(e),this.setTooltip(e)}onBlur(){super.onBlur(),this._onDidBlur.fire()}onFocus(){super.onFocus(),this._onDidFocus.fire()}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()}}const k8e=L("defaultLabel","input");class Sre extends pa{constructor(e,t,i){super(),this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this.additionalTogglesDisposables=this._register(new ha),this.additionalToggles=[],this._onDidOptionChange=this._register(new ue),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new ue),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new ue),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new ue),this._onKeyUp=this._register(new ue),this._onCaseSensitiveKeyDown=this._register(new ue),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new ue),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.placeholder=i.placeholder||"",this.validation=i.validation,this.label=i.label||k8e,this.showCommonFindToggles=!!i.showCommonFindToggles;const s=i.appendCaseSensitiveLabel||"",r=i.appendWholeWordsLabel||"",o=i.appendRegexLabel||"",a=i.history||[],l=!!i.flexibleHeight,c=!!i.flexibleWidth,d=i.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new yre(this.domNode,t,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},history:a,showHistoryHint:i.showHistoryHint,flexibleHeight:l,flexibleWidth:c,flexibleMaxHeight:d,inputBoxStyles:i.inputBoxStyles}));const u=this._register(Zb());if(this.showCommonFindToggles){this.regex=this._register(new rre({appendTitle:o,isChecked:!1,hoverDelegate:u,...i.toggleStyles})),this._register(this.regex.onChange(f=>{this._onDidOptionChange.fire(f),!f&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(f=>{this._onRegexKeyDown.fire(f)})),this.wholeWords=this._register(new sre({appendTitle:r,isChecked:!1,hoverDelegate:u,...i.toggleStyles})),this._register(this.wholeWords.onChange(f=>{this._onDidOptionChange.fire(f),!f&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new nre({appendTitle:s,isChecked:!1,hoverDelegate:u,...i.toggleStyles})),this._register(this.caseSensitive.onChange(f=>{this._onDidOptionChange.fire(f),!f&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(f=>{this._onCaseSensitiveKeyDown.fire(f)}));const h=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,f=>{if(f.equals(15)||f.equals(17)||f.equals(9)){const g=h.indexOf(this.domNode.ownerDocument.activeElement);if(g>=0){let m=-1;f.equals(17)?m=(g+1)%h.length:f.equals(15)&&(g===0?m=h.length-1:m=g-1),f.equals(9)?(h[g].blur(),this.inputBox.focus()):m>=0&&h[m].focus(),$t.stop(f,!0)}}})}this.controls=document.createElement("div"),this.controls.className="controls",this.controls.style.display=this.showCommonFindToggles?"":"none",this.caseSensitive&&this.controls.append(this.caseSensitive.domNode),this.wholeWords&&this.controls.appendChild(this.wholeWords.domNode),this.regex&&this.controls.appendChild(this.regex.domNode),this.setAdditionalToggles(i?.additionalToggles),this.controls&&this.domNode.appendChild(this.controls),e?.appendChild(this.domNode),this._register(we(this.inputBox.inputElement,"compositionstart",h=>{this.imeSessionInProgress=!0})),this._register(we(this.inputBox.inputElement,"compositionend",h=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,h=>this._onKeyDown.fire(h)),this.onkeyup(this.inputBox.inputElement,h=>this._onKeyUp.fire(h)),this.oninput(this.inputBox.inputElement,h=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,h=>this._onMouseDown.fire(h))}get onDidChange(){return this.inputBox.onDidChange}layout(e){this.inputBox.layout(),this.updateInputBoxPadding(e.collapsedFindWidget)}enable(){var e,t,i;this.domNode.classList.remove("disabled"),this.inputBox.enable(),(e=this.regex)===null||e===void 0||e.enable(),(t=this.wholeWords)===null||t===void 0||t.enable(),(i=this.caseSensitive)===null||i===void 0||i.enable();for(const s of this.additionalToggles)s.enable()}disable(){var e,t,i;this.domNode.classList.add("disabled"),this.inputBox.disable(),(e=this.regex)===null||e===void 0||e.disable(),(t=this.wholeWords)===null||t===void 0||t.disable(),(i=this.caseSensitive)===null||i===void 0||i.disable();for(const s of this.additionalToggles)s.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}setAdditionalToggles(e){for(const t of this.additionalToggles)t.domNode.remove();this.additionalToggles=[],this.additionalTogglesDisposables.value=new ct;for(const t of e??[])this.additionalTogglesDisposables.value.add(t),this.controls.appendChild(t.domNode),this.additionalTogglesDisposables.value.add(t.onChange(i=>{this._onDidOptionChange.fire(i),!i&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus()})),this.additionalToggles.push(t);this.additionalToggles.length>0&&(this.controls.style.display=""),this.updateInputBoxPadding()}updateInputBoxPadding(e=!1){var t,i,s,r,o,a;e?this.inputBox.paddingRight=0:this.inputBox.paddingRight=((i=(t=this.caseSensitive)===null||t===void 0?void 0:t.width())!==null&&i!==void 0?i:0)+((r=(s=this.wholeWords)===null||s===void 0?void 0:s.width())!==null&&r!==void 0?r:0)+((a=(o=this.regex)===null||o===void 0?void 0:o.width())!==null&&a!==void 0?a:0)+this.additionalToggles.reduce((l,c)=>l+c.width(),0)}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){var e,t;return(t=(e=this.caseSensitive)===null||e===void 0?void 0:e.checked)!==null&&t!==void 0?t:!1}setCaseSensitive(e){this.caseSensitive&&(this.caseSensitive.checked=e)}getWholeWords(){var e,t;return(t=(e=this.wholeWords)===null||e===void 0?void 0:e.checked)!==null&&t!==void 0?t:!1}setWholeWords(e){this.wholeWords&&(this.wholeWords.checked=e)}getRegex(){var e,t;return(t=(e=this.regex)===null||e===void 0?void 0:e.checked)!==null&&t!==void 0?t:!1}setRegex(e){this.regex&&(this.regex.checked=e,this.validate())}focusOnCaseSensitive(){var e;(e=this.caseSensitive)===null||e===void 0||e.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}showMessage(e){this.inputBox.showMessage(e)}clearMessage(){this.inputBox.hideMessage()}}const x8e=L("defaultLabel","input"),T8e=L("label.preserveCaseToggle","Preserve Case");class D8e extends M0{constructor(e){var t;super({icon:Qe.preserveCase,title:T8e+e.appendTitle,isChecked:e.isChecked,hoverDelegate:(t=e.hoverDelegate)!==null&&t!==void 0?t:_o("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class I8e extends pa{constructor(e,t,i,s){super(),this._showOptionButtons=i,this.fixFocusOnOptionClickEnabled=!0,this.cachedOptionsWidth=0,this._onDidOptionChange=this._register(new ue),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new ue),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new ue),this._onInput=this._register(new ue),this._onKeyUp=this._register(new ue),this._onPreserveCaseKeyDown=this._register(new ue),this.onPreserveCaseKeyDown=this._onPreserveCaseKeyDown.event,this.contextViewProvider=t,this.placeholder=s.placeholder||"",this.validation=s.validation,this.label=s.label||x8e;const r=s.appendPreserveCaseLabel||"",o=s.history||[],a=!!s.flexibleHeight,l=!!s.flexibleWidth,c=s.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new yre(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},history:o,showHistoryHint:s.showHistoryHint,flexibleHeight:a,flexibleWidth:l,flexibleMaxHeight:c,inputBoxStyles:s.inputBoxStyles})),this.preserveCase=this._register(new D8e({appendTitle:r,isChecked:!1,...s.toggleStyles})),this._register(this.preserveCase.onChange(h=>{this._onDidOptionChange.fire(h),!h&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.preserveCase.onKeyDown(h=>{this._onPreserveCaseKeyDown.fire(h)})),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;const d=[this.preserveCase.domNode];this.onkeydown(this.domNode,h=>{if(h.equals(15)||h.equals(17)||h.equals(9)){const f=d.indexOf(this.domNode.ownerDocument.activeElement);if(f>=0){let g=-1;h.equals(17)?g=(f+1)%d.length:h.equals(15)&&(f===0?g=d.length-1:g=f-1),h.equals(9)?(d[f].blur(),this.inputBox.focus()):g>=0&&d[g].focus(),$t.stop(h,!0)}}});const u=document.createElement("div");u.className="controls",u.style.display=this._showOptionButtons?"block":"none",u.appendChild(this.preserveCase.domNode),this.domNode.appendChild(u),e?.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,h=>this._onKeyDown.fire(h)),this.onkeyup(this.inputBox.inputElement,h=>this._onKeyUp.fire(h)),this.oninput(this.inputBox.inputElement,h=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,h=>this._onMouseDown.fire(h))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}setEnabled(e){e?this.enable():this.disable()}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(e){this.preserveCase.checked=e}focusOnPreserve(){this.preserveCase.focus()}validate(){var e;(e=this.inputBox)===null||e===void 0||e.validate()}set width(e){this.inputBox.paddingRight=this.cachedOptionsWidth,this.domNode.style.width=e+"px"}dispose(){super.dispose()}}var Cre=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Lre=function(n,e){return function(t,i){e(t,i,n)}};const kre=new it("suggestWidgetVisible",!1,L("suggestWidgetVisible","Whether suggestion are visible")),rO="historyNavigationWidgetFocus",xre="historyNavigationForwardsEnabled",Tre="historyNavigationBackwardsEnabled";let zd;const qy=[];function Dre(n,e){if(qy.includes(e))throw new Error("Cannot register the same widget multiple times");qy.push(e);const t=new ct,i=new it(rO,!1).bindTo(n),s=new it(xre,!0).bindTo(n),r=new it(Tre,!0).bindTo(n),o=()=>{i.set(!0),zd=e},a=()=>{i.set(!1),zd===e&&(zd=void 0)};return w2(e.element)&&o(),t.add(e.onDidFocus(()=>o())),t.add(e.onDidBlur(()=>a())),t.add(Et(()=>{qy.splice(qy.indexOf(e),1),a()})),{historyNavigationForwardsEnablement:s,historyNavigationBackwardsEnablement:r,dispose(){t.dispose()}}}let vW=class extends Sre{constructor(e,t,i,s){super(e,t,i);const r=this._register(s.createScoped(this.inputBox.element));this._register(Dre(r,this.inputBox))}};vW=Cre([Lre(3,oi)],vW);let _W=class extends I8e{constructor(e,t,i,s,r=!1){super(e,t,r,i);const o=this._register(s.createScoped(this.inputBox.element));this._register(Dre(o,this.inputBox))}};_W=Cre([Lre(3,oi)],_W);lm.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:Wt.and(Wt.has(rO),Wt.equals(Tre,!0),Wt.not("isComposing"),kre.isEqualTo(!1)),primary:16,secondary:[528],handler:n=>{zd?.showPreviousValue()}});lm.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:Wt.and(Wt.has(rO),Wt.equals(xre,!0),Wt.not("isComposing"),kre.isEqualTo(!1)),primary:18,secondary:[530],handler:n=>{zd?.showNextValue()}});function YY(n){var e,t;return((e=n.lookupKeybinding("history.showPrevious"))===null||e===void 0?void 0:e.getElectronAccelerator())==="Up"&&((t=n.lookupKeybinding("history.showNext"))===null||t===void 0?void 0:t.getElectronAccelerator())==="Down"}const M8e={IconContribution:"base.contributions.icons"};var KY;(function(n){function e(t,i){let s=t.defaults;for(;Vt.isThemeIcon(s);){const r=vm.getIcon(s.id);if(!r)return;s=r.defaults}return s}n.getDefinition=e})(KY||(KY={}));var jY;(function(n){function e(i){return{weight:i.weight,style:i.style,src:i.src.map(s=>({format:s.format,location:s.location.toString()}))}}n.toJSONObject=e;function t(i){const s=r=>Dr(r)?r:void 0;if(i&&Array.isArray(i.src)&&i.src.every(r=>Dr(r.format)&&Dr(r.location)))return{weight:s(i.weight),style:s(i.style),src:i.src.map(r=>({format:r.format,location:Ft.parse(r.location)}))}}n.fromJSONObject=t})(jY||(jY={}));class E8e{constructor(){this._onDidChange=new ue,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:L("iconDefinition.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:L("iconDefinition.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${Vt.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,i,s){const r=this.iconsById[e];if(r){if(i&&!r.description){r.description=i,this.iconSchema.properties[e].markdownDescription=`${i} $(${e})`;const l=this.iconReferenceSchema.enum.indexOf(e);l!==-1&&(this.iconReferenceSchema.enumDescriptions[l]=i),this._onDidChange.fire()}return r}const o={id:e,description:i,defaults:t,deprecationMessage:s};this.iconsById[e]=o;const a={$ref:"#/definitions/icons"};return s&&(a.deprecationMessage=s),i&&(a.markdownDescription=`${i}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(i||""),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}toString(){const e=(r,o)=>r.id.localeCompare(o.id),t=r=>{for(;Vt.isThemeIcon(r.defaults);)r=this.iconsById[r.defaults.id];return`codicon codicon-${r?r.id:""}`},i=[];i.push("| preview     | identifier                        | default codicon ID                | description"),i.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const s=Object.keys(this.iconsById).map(r=>this.iconsById[r]);for(const r of s.filter(o=>!!o.description).sort(e))i.push(`|<i class="${t(r)}"></i>|${r.id}|${Vt.isThemeIcon(r.defaults)?r.defaults.id:r.id}|${r.description||""}|`);i.push("| preview     | identifier                        "),i.push("| ----------- | --------------------------------- |");for(const r of s.filter(o=>!Vt.isThemeIcon(o.defaults)).sort(e))i.push(`|<i class="${t(r)}"></i>|${r.id}|`);return i.join(`
`)}}const vm=new E8e;Ss.add(M8e.IconContribution,vm);function tr(n,e,t,i){return vm.registerIcon(n,e,t,i)}function Ire(){return vm}function N8e(){const n=Rie();for(const e in n){const t="\\"+n[e].toString(16);vm.registerIcon(e,{fontCharacter:t})}}N8e();const Mre="vscode://schemas/icons",Ere=Ss.as(F2.JSONContribution);Ere.registerSchema(Mre,vm.getIconSchema());const JY=new as(()=>Ere.notifySchemaChanged(Mre),200);vm.onDidChange(()=>{JY.isScheduled()||JY.schedule()});const R8e=tr("widget-close",Qe.close,L("widgetClose","Icon for the close action in widgets."));tr("goto-previous-location",Qe.arrowUp,L("previousChangeIcon","Icon for goto previous editor location."));tr("goto-next-location",Qe.arrowDown,L("nextChangeIcon","Icon for goto next editor location."));Vt.modify(Qe.sync,"spin");Vt.modify(Qe.loading,"spin");function W8e(n,e){const t={...e};for(const i in n){const s=n[i];t[i]=s!==void 0?Ke(s):void 0}return t}const A8e={keybindingLabelBackground:Ke($We),keybindingLabelForeground:Ke(QWe),keybindingLabelBorder:Ke(qWe),keybindingLabelBottomBorder:Ke(eAe),keybindingLabelShadow:Ke(eh)},F8e={buttonForeground:Ke(Wv),buttonSeparator:Ke(XWe),buttonBackground:Ke(Av),buttonHoverBackground:Ke(zWe),buttonSecondaryForeground:Ke(UWe),buttonSecondaryBackground:Ke(M3),buttonSecondaryHoverBackground:Ke(YWe),buttonBorder:Ke(HWe)},V8e={progressBarBackground:Ke(aWe)},HL={inputActiveOptionBorder:Ke(sP),inputActiveOptionForeground:Ke(oP),inputActiveOptionBackground:Ke(rP)};Ke(KWe),Ke(JWe),Ke(jWe);Ke(rs),Ke(xd),Ke(eh),Ke(si),Ke(SWe),Ke(CWe),Ke(LWe),Ke(rWe);const UL={inputBackground:Ke(MWe),inputForeground:Ke(EWe),inputBorder:Ke(NWe),inputValidationInfoBorder:Ke(AWe),inputValidationInfoBackground:Ke(RWe),inputValidationInfoForeground:Ke(WWe),inputValidationWarningBorder:Ke(PWe),inputValidationWarningBackground:Ke(FWe),inputValidationWarningForeground:Ke(VWe),inputValidationErrorBorder:Ke(GWe),inputValidationErrorBackground:Ke(OWe),inputValidationErrorForeground:Ke(ZWe)},P8e={listFilterWidgetBackground:Ke(hAe),listFilterWidgetOutline:Ke(fAe),listFilterWidgetNoMatchesOutline:Ke(gAe),listFilterWidgetShadow:Ke(mAe),inputBoxStyles:UL,toggleStyles:HL},O8e={badgeBackground:Ke(HS),badgeForeground:Ke(oWe),badgeBorder:Ke(si)};Ke(wWe),Ke(_We),Ke(qH),Ke(qH),Ke(yWe);const R0={listBackground:void 0,listInactiveFocusForeground:void 0,listFocusBackground:Ke(tAe),listFocusForeground:Ke(iAe),listFocusOutline:Ke(nAe),listActiveSelectionBackground:Ke(Id),listActiveSelectionForeground:Ke(Sc),listActiveSelectionIconForeground:Ke(Fv),listFocusAndSelectionOutline:Ke(sAe),listFocusAndSelectionBackground:Ke(Id),listFocusAndSelectionForeground:Ke(Sc),listInactiveSelectionBackground:Ke(rAe),listInactiveSelectionIconForeground:Ke(aAe),listInactiveSelectionForeground:Ke(oAe),listInactiveFocusBackground:Ke(lAe),listInactiveFocusOutline:Ke(cAe),listHoverBackground:Ke(Sne),listHoverForeground:Ke(Cne),listDropOverBackground:Ke(dAe),listDropBetweenBackground:Ke(uAe),listSelectionOutline:Ke(cn),listHoverOutline:Ke(cn),treeIndentGuidesStroke:Ke(Vv),treeInactiveIndentGuidesStroke:Ke(pAe),treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0,tableColumnsBorder:Ke(bAe),tableOddRowsBackgroundColor:Ke(vAe)};function Ew(n){return W8e(n,R0)}const Z8e={selectBackground:Ke(yc),selectListBackground:Ke(BWe),selectForeground:Ke(Dd),decoratorRightForeground:Ke(Lne),selectBorder:Ke(fp),focusBorder:Ke(ta),listFocusBackground:Ke(N3),listInactiveSelectionIconForeground:Ke(kne),listFocusForeground:Ke(E3),listFocusOutline:tWe(cn,Ce.transparent.toString()),listHoverBackground:Ke(Sne),listHoverForeground:Ke(Cne),listHoverOutline:Ke(cn),selectListBorder:Ke(Nv),listBackground:void 0,listActiveSelectionBackground:void 0,listActiveSelectionForeground:void 0,listActiveSelectionIconForeground:void 0,listFocusAndSelectionBackground:void 0,listDropOverBackground:void 0,listDropBetweenBackground:void 0,listInactiveSelectionBackground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusBackground:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listFocusAndSelectionForeground:void 0,listFocusAndSelectionOutline:void 0,listInactiveFocusForeground:void 0,tableColumnsBorder:void 0,tableOddRowsBackgroundColor:void 0,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},G8e={shadowColor:Ke(eh),borderColor:Ke(_Ae),foregroundColor:Ke(wAe),backgroundColor:Ke(yAe),selectionForegroundColor:Ke(SAe),selectionBackgroundColor:Ke(CAe),selectionBorderColor:Ke(LAe),separatorColor:Ke(kAe),scrollbarShadow:Ke(Dv),scrollbarSliderBackground:Ke(Iv),scrollbarSliderHoverBackground:Ke(Mv),scrollbarSliderActiveBackground:Ke(Ev)},$Y=tr("find-collapsed",Qe.chevronRight,L("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),QY=tr("find-expanded",Qe.chevronDown,L("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),B8e=tr("find-selection",Qe.selection,L("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),X8e=tr("find-replace",Qe.replace,L("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),z8e=tr("find-replace-all",Qe.replaceAll,L("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),H8e=tr("find-previous-match",Qe.arrowUp,L("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),U8e=tr("find-next-match",Qe.arrowDown,L("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),Y8e=L("label.findDialog","Find / Replace"),K8e=L("label.find","Find"),j8e=L("placeholder.find","Find"),J8e=L("label.previousMatchButton","Previous Match"),$8e=L("label.nextMatchButton","Next Match"),Q8e=L("label.toggleSelectionFind","Find in Selection"),q8e=L("label.closeButton","Close"),eBe=L("label.replace","Replace"),tBe=L("placeholder.replace","Replace"),iBe=L("label.replaceButton","Replace"),nBe=L("label.replaceAllButton","Replace All"),sBe=L("label.toggleReplaceButton","Toggle Replace"),rBe=L("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",sh),oBe=L("label.matchesLocation","{0} of {1}"),qY=L("label.noResults","No results"),$l=419,aBe=275,lBe=aBe-54;let iv=69;const cBe=33,eK="ctrlEnterReplaceAll.windows.donotask",tK=jt?256:2048;class IR{constructor(e){this.afterLineNumber=e,this.heightInPx=cBe,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}}function iK(n,e,t){const i=!!e.match(/\n/);if(t&&i&&t.selectionStart>0){n.stopPropagation();return}}function nK(n,e,t){const i=!!e.match(/\n/);if(t&&i&&t.selectionEnd<t.value.length){n.stopPropagation();return}}class uT extends pa{constructor(e,t,i,s,r,o,a,l,c,d){super(),this._hoverService=d,this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=e,this._controller=t,this._state=i,this._contextViewProvider=s,this._keybindingService=r,this._contextKeyService=o,this._storageService=l,this._notificationService=c,this._ctrlEnterReplaceAllWarningPrompted=!!l.getBoolean(eK,0),this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new af(500),this._register(Et(()=>this._updateHistoryDelayer.cancel())),this._register(this._state.onFindReplaceStateChange(u=>this._onStateChanged(u))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration(u=>{if(u.hasChanged(91)&&(this._codeEditor.getOption(91)&&this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),u.hasChanged(145)&&this._tryUpdateWidgetWidth(),u.hasChanged(2)&&this.updateAccessibilitySupport(),u.hasChanged(41)){const h=this._codeEditor.getOption(41).loop;this._state.change({loop:h},!1);const f=this._codeEditor.getOption(41).addExtraSpaceOnTop;f&&!this._viewZone&&(this._viewZone=new IR(0),this._showViewZone()),!f&&this._viewZone&&this._removeViewZone()}})),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection(()=>{this._isVisible&&this._updateToggleSelectionFindButton()})),this._register(this._codeEditor.onDidFocusEditorWidget(async()=>{if(this._isVisible){const u=await this._controller.getGlobalBufferTerm();u&&u!==this._state.searchString&&(this._state.change({searchString:u},!1),this._findInput.select())}})),this._findInputFocused=rT.bindTo(o),this._findFocusTracker=this._register(Ig(this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus(()=>{this._findInputFocused.set(!0),this._updateSearchScope()})),this._register(this._findFocusTracker.onDidBlur(()=>{this._findInputFocused.set(!1)})),this._replaceInputFocused=QP.bindTo(o),this._replaceFocusTracker=this._register(Ig(this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus(()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()})),this._register(this._replaceFocusTracker.onDidBlur(()=>{this._replaceInputFocused.set(!1)})),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(41).addExtraSpaceOnTop&&(this._viewZone=new IR(0)),this._register(this._codeEditor.onDidChangeModel(()=>{this._isVisible&&(this._viewZoneId=void 0)})),this._register(this._codeEditor.onDidScrollChange(u=>{if(u.scrollTopChanged){this._layoutViewZone();return}setTimeout(()=>{this._layoutViewZone()},0)}))}getId(){return uT.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0}:null}_onStateChanged(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?!this._codeEditor.getOption(91)&&!this._isReplaceVisible&&(this._isReplaceVisible=!0,this._replaceInput.width=Ca(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){const t=this._state.searchString.length>0&&this._state.matchesCount===0;this._domNode.classList.toggle("no-results",t),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,gi)}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){this._matchesCount.style.minWidth=iv+"px",this._state.matchesCount>=sh?this._matchesCount.title=rBe:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild);let e;if(this._state.matchesCount>0){let t=String(this._state.matchesCount);this._state.matchesCount>=sh&&(t+="+");let i=String(this._state.matchesPosition);i==="0"&&(i="?"),e=$C(oBe,i,t)}else e=qY;this._matchesCount.appendChild(document.createTextNode(e)),Mg(this._getAriaLabel(e,this._state.currentMatch,this._state.searchString)),iv=Math.max(iv,this._matchesCount.clientWidth)}_getAriaLabel(e,t,i){if(e===qY)return i===""?L("ariaSearchNoResultEmpty","{0} found",e):L("ariaSearchNoResult","{0} found for '{1}'",e,i);if(t){const s=L("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",e,i,t.startLineNumber+":"+t.startColumn),r=this._codeEditor.getModel();return r&&t.startLineNumber<=r.getLineCount()&&t.startLineNumber>=1?`${r.getLineContent(t.startLineNumber)}, ${s}`:s}return L("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,i)}_updateToggleSelectionFindButton(){const e=this._codeEditor.getSelection(),t=e?e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn:!1,i=this._toggleSelectionFind.checked;this._isVisible&&(i||t)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);const e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);const i=!this._codeEditor.getOption(91);this._toggleReplaceBtn.setEnabled(this._isVisible&&i)}_reveal(){if(this._revealTimeouts.forEach(e=>{clearTimeout(e)}),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;const e=this._codeEditor.getSelection();switch(this._codeEditor.getOption(41).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":{const i=!!e&&e.startLineNumber!==e.endLineNumber;this._toggleSelectionFind.checked=i;break}}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout(()=>{this._domNode.classList.add("visible"),this._domNode.setAttribute("aria-hidden","false")},0)),this._revealTimeouts.push(setTimeout(()=>{this._findInput.validate()},200)),this._codeEditor.layoutOverlayWidget(this);let t=!0;if(this._codeEditor.getOption(41).seedSearchStringFromSelection&&e){const i=this._codeEditor.getDomNode();if(i){const s=ho(i),r=this._codeEditor.getScrolledVisiblePosition(e.getStartPosition()),o=s.left+(r?r.left:0),a=r?r.top:0;if(this._viewZone&&a<this._viewZone.heightInPx){e.endLineNumber>e.startLineNumber&&(t=!1);const l=kie(this._domNode).left;o>l&&(t=!1);const c=this._codeEditor.getScrolledVisiblePosition(e.getEndPosition());s.left+(c?c.left:0)>l&&(t=!1)}}}this._showViewZone(t)}}_hide(e){this._revealTimeouts.forEach(t=>{clearTimeout(t)}),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(e){if(!this._codeEditor.getOption(41).addExtraSpaceOnTop){this._removeViewZone();return}if(!this._isVisible)return;const i=this._viewZone;this._viewZoneId!==void 0||!i||this._codeEditor.changeViewZones(s=>{i.heightInPx=this._getHeight(),this._viewZoneId=s.addZone(i),this._codeEditor.setScrollTop(e||this._codeEditor.getScrollTop()+i.heightInPx)})}_showViewZone(e=!0){if(!this._isVisible||!this._codeEditor.getOption(41).addExtraSpaceOnTop)return;this._viewZone===void 0&&(this._viewZone=new IR(0));const i=this._viewZone;this._codeEditor.changeViewZones(s=>{if(this._viewZoneId!==void 0){const r=this._getHeight();if(r===i.heightInPx)return;const o=r-i.heightInPx;i.heightInPx=r,s.layoutZone(this._viewZoneId),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+o);return}else{let r=this._getHeight();if(r-=this._codeEditor.getOption(84).top,r<=0)return;i.heightInPx=r,this._viewZoneId=s.addZone(i),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+r)}})}_removeViewZone(){this._codeEditor.changeViewZones(e=>{this._viewZoneId!==void 0&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),this._viewZone=void 0))})}_tryUpdateWidgetWidth(){if(!this._isVisible||!this._domNode.isConnected)return;const e=this._codeEditor.getLayoutInfo();if(e.contentWidth<=0){this._domNode.classList.add("hiddenEditor");return}else this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");const i=e.width,s=e.minimap.minimapWidth;let r=!1,o=!1,a=!1;if(this._resized&&Ca(this._domNode)>$l){this._domNode.style.maxWidth=`${i-28-s-15}px`,this._replaceInput.width=Ca(this._findInput.domNode);return}if($l+28+s>=i&&(o=!0),$l+28+s-iv>=i&&(a=!0),$l+28+s-iv>=i+50&&(r=!0),this._domNode.classList.toggle("collapsed-find-widget",r),this._domNode.classList.toggle("narrow-find-widget",a),this._domNode.classList.toggle("reduced-find-widget",o),!a&&!r&&(this._domNode.style.maxWidth=`${i-28-s-15}px`),this._findInput.layout({collapsedFindWidget:r,narrowFindWidget:a,reducedFindWidget:o}),this._resized){const l=this._findInput.inputBox.element.clientWidth;l>0&&(this._replaceInput.width=l)}else this._isReplaceVisible&&(this._replaceInput.width=Ca(this._findInput.domNode))}_getHeight(){let e=0;return e+=4,e+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(e+=4,e+=this._replaceInput.inputBox.height+2),e+=4,e}_tryUpdateHeight(){const e=this._getHeight();return this._cachedHeight!==null&&this._cachedHeight===e?!1:(this._cachedHeight=e,this._domNode.style.height=`${e}px`,!0)}focusFindInput(){this._findInput.select(),this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){const e=this._codeEditor.getSelections();e.map(t=>{t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1)));const i=this._state.currentMatch;return t.startLineNumber!==t.endLineNumber&&!te.equalsRange(t,i)?t:null}).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}_onFindInputMouseDown(e){e.middleButton&&e.stopPropagation()}_onFindInputKeyDown(e){if(e.equals(tK|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{this._findInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return iK(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"));if(e.equals(18))return nK(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"))}_onReplaceInputKeyDown(e){if(e.equals(tK|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{Mr&&kl&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(L("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(eK,!0,0,0)),this._replaceInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(1026)){this._findInput.focus(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return iK(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"));if(e.equals(18))return nK(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"))}getVerticalSashLeft(e){return 0}_keybindingLabelFor(e){const t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}_buildDomNode(){this._findInput=this._register(new vW(null,this._contextViewProvider,{width:lBe,label:K8e,placeholder:j8e,appendCaseSensitiveLabel:this._keybindingLabelFor(Zi.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(Zi.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(Zi.ToggleRegexCommand),validation:d=>{if(d.length===0||!this._findInput.getRegex())return null;try{return new RegExp(d,"gu"),null}catch(u){return{content:u.message}}},flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showCommonFindToggles:!0,showHistoryHint:()=>YY(this._keybindingService),inputBoxStyles:UL,toggleStyles:HL},this._contextKeyService)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown(d=>this._onFindInputKeyDown(d))),this._register(this._findInput.inputBox.onDidChange(()=>{this._ignoreChangeEvent||this._state.change({searchString:this._findInput.getValue()},!0)})),this._register(this._findInput.onDidOptionChange(()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)})),this._register(this._findInput.onCaseSensitiveKeyDown(d=>{d.equals(1026)&&this._isReplaceVisible&&(this._replaceInput.focus(),d.preventDefault())})),this._register(this._findInput.onRegexKeyDown(d=>{d.equals(2)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),d.preventDefault())})),this._register(this._findInput.inputBox.onDidHeightChange(d=>{this._tryUpdateHeight()&&this._showViewZone()})),Er&&this._register(this._findInput.onMouseDown(d=>this._onFindInputMouseDown(d))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount();const i=this._register(Zb());this._prevBtn=this._register(new Pm({label:J8e+this._keybindingLabelFor(Zi.PreviousMatchFindAction),icon:H8e,hoverDelegate:i,onTrigger:()=>{HC(this._codeEditor.getAction(Zi.PreviousMatchFindAction)).run().then(void 0,gi)}},this._hoverService)),this._nextBtn=this._register(new Pm({label:$8e+this._keybindingLabelFor(Zi.NextMatchFindAction),icon:U8e,hoverDelegate:i,onTrigger:()=>{HC(this._codeEditor.getAction(Zi.NextMatchFindAction)).run().then(void 0,gi)}},this._hoverService));const s=document.createElement("div");s.className="find-part",s.appendChild(this._findInput.domNode);const r=document.createElement("div");r.className="find-actions",s.appendChild(r),r.appendChild(this._matchesCount),r.appendChild(this._prevBtn.domNode),r.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new M0({icon:B8e,title:Q8e+this._keybindingLabelFor(Zi.ToggleSearchScopeCommand),isChecked:!1,hoverDelegate:i,inputActiveOptionBackground:Ke(rP),inputActiveOptionBorder:Ke(sP),inputActiveOptionForeground:Ke(oP)})),this._register(this._toggleSelectionFind.onChange(()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){let d=this._codeEditor.getSelections();d=d.map(u=>(u.endColumn===1&&u.endLineNumber>u.startLineNumber&&(u=u.setEndPosition(u.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(u.endLineNumber-1))),u.isEmpty()?null:u)).filter(u=>!!u),d.length&&this._state.change({searchScope:d},!0)}}else this._state.change({searchScope:null},!0)})),r.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new Pm({label:q8e+this._keybindingLabelFor(Zi.CloseFindWidgetCommand),icon:R8e,hoverDelegate:i,onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:d=>{d.equals(2)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),d.preventDefault())}},this._hoverService)),this._replaceInput=this._register(new _W(null,void 0,{label:eBe,placeholder:tBe,appendPreserveCaseLabel:this._keybindingLabelFor(Zi.TogglePreserveCaseCommand),history:[],flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>YY(this._keybindingService),inputBoxStyles:UL,toggleStyles:HL},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown(d=>this._onReplaceInputKeyDown(d))),this._register(this._replaceInput.inputBox.onDidChange(()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)})),this._register(this._replaceInput.inputBox.onDidHeightChange(d=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()})),this._register(this._replaceInput.onDidOptionChange(()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)})),this._register(this._replaceInput.onPreserveCaseKeyDown(d=>{d.equals(2)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),d.preventDefault())}));const o=this._register(Zb());this._replaceBtn=this._register(new Pm({label:iBe+this._keybindingLabelFor(Zi.ReplaceOneAction),icon:X8e,hoverDelegate:o,onTrigger:()=>{this._controller.replace()},onKeyDown:d=>{d.equals(1026)&&(this._closeBtn.focus(),d.preventDefault())}},this._hoverService)),this._replaceAllBtn=this._register(new Pm({label:nBe+this._keybindingLabelFor(Zi.ReplaceAllAction),icon:z8e,hoverDelegate:o,onTrigger:()=>{this._controller.replaceAll()}},this._hoverService));const a=document.createElement("div");a.className="replace-part",a.appendChild(this._replaceInput.domNode);const l=document.createElement("div");l.className="replace-actions",a.appendChild(l),l.appendChild(this._replaceBtn.domNode),l.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new Pm({label:sBe,className:"codicon toggle left",onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=Ca(this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}},this._hoverService)),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.ariaLabel=Y8e,this._domNode.role="dialog",this._domNode.style.width=`${$l}px`,this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(s),this._domNode.appendChild(this._closeBtn.domNode),this._domNode.appendChild(a),this._resizeSash=this._register(new So(this._domNode,this,{orientation:0,size:2})),this._resized=!1;let c=$l;this._register(this._resizeSash.onDidStart(()=>{c=Ca(this._domNode)})),this._register(this._resizeSash.onDidChange(d=>{this._resized=!0;const u=c+d.startX-d.currentX;if(u<$l)return;const h=parseFloat(_2(this._domNode).maxWidth)||0;u>h||(this._domNode.style.width=`${u}px`,this._isReplaceVisible&&(this._replaceInput.width=Ca(this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())})),this._register(this._resizeSash.onDidReset(()=>{const d=Ca(this._domNode);if(d<$l)return;let u=$l;if(!this._resized||d===$l){const h=this._codeEditor.getLayoutInfo();u=h.width-28-h.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width=`${u}px`,this._isReplaceVisible&&(this._replaceInput.width=Ca(this._findInput.domNode)),this._findInput.inputBox.layout()}))}updateAccessibilitySupport(){const e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(e!==2)}}uT.ID="editor.contrib.findWidget";class Pm extends pa{constructor(e,t){var i;super(),this._opts=e;let s="button";this._opts.className&&(s=s+" "+this._opts.className),this._opts.icon&&(s=s+" "+Vt.asClassName(this._opts.icon)),this._domNode=document.createElement("div"),this._domNode.tabIndex=0,this._domNode.className=s,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this._register(t.setupUpdatableHover((i=e.hoverDelegate)!==null&&i!==void 0?i:_o("element"),this._domNode,this._opts.label)),this.onclick(this._domNode,r=>{this._opts.onTrigger(),r.preventDefault()}),this.onkeydown(this._domNode,r=>{var o,a;if(r.equals(10)||r.equals(3)){this._opts.onTrigger(),r.preventDefault();return}(a=(o=this._opts).onKeyDown)===null||a===void 0||a.call(o,r)})}get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}setExpanded(e){this._domNode.setAttribute("aria-expanded",String(!!e)),e?(this._domNode.classList.remove(...Vt.asClassNameArray($Y)),this._domNode.classList.add(...Vt.asClassNameArray(QY))):(this._domNode.classList.remove(...Vt.asClassNameArray(QY)),this._domNode.classList.add(...Vt.asClassNameArray($Y)))}}zl((n,e)=>{const t=n.getColor(Kf);t&&e.addRule(`.monaco-editor .findMatch { border: 1px ${yh(n.type)?"dotted":"solid"} ${t}; box-sizing: border-box; }`);const i=n.getColor(hWe);i&&e.addRule(`.monaco-editor .findScope { border: 1px ${yh(n.type)?"dashed":"solid"} ${i}; }`);const s=n.getColor(si);s&&e.addRule(`.monaco-editor .find-widget { border: 1px solid ${s}; }`);const r=n.getColor(dWe);r&&e.addRule(`.monaco-editor .findMatchInline { color: ${r}; }`);const o=n.getColor(uWe);o&&e.addRule(`.monaco-editor .currentFindMatchInline { color: ${o}; }`)});var Gp;(function(n){n[n.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",n[n.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(Gp||(Gp={}));var _p;(function(n){n[n.None=0]="None",n[n.Initialized=1]="Initialized",n[n.Closed=2]="Closed"})(_p||(_p={}));class Bp extends Le{constructor(e,t=Object.create(null)){super(),this.database=e,this.options=t,this._onDidChangeStorage=this._register(new W_),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=_p.None,this.cache=new Map,this.flushDelayer=this._register(new $te(Bp.DEFAULT_FLUSH_DELAY)),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){var t,i;this._onDidChangeStorage.pause();try{(t=e.changed)===null||t===void 0||t.forEach((s,r)=>this.acceptExternal(r,s)),(i=e.deleted)===null||i===void 0||i.forEach(s=>this.acceptExternal(s,void 0))}finally{this._onDidChangeStorage.resume()}}acceptExternal(e,t){if(this.state===_p.Closed)return;let i=!1;xo(t)?i=this.cache.delete(e):this.cache.get(e)!==t&&(this.cache.set(e,t),i=!0),i&&this._onDidChangeStorage.fire({key:e,external:!0})}get(e,t){const i=this.cache.get(e);return xo(i)?t:i}getBoolean(e,t){const i=this.get(e);return xo(i)?t:i==="true"}getNumber(e,t){const i=this.get(e);return xo(i)?t:parseInt(i,10)}async set(e,t,i=!1){if(this.state===_p.Closed)return;if(xo(t))return this.delete(e,i);const s=Ha(t)||Array.isArray(t)?xGe(t):String(t);if(this.cache.get(e)!==s)return this.cache.set(e,s),this.pendingInserts.set(e,s),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire({key:e,external:i}),this.doFlush()}async delete(e,t=!1){if(!(this.state===_p.Closed||!this.cache.delete(e)))return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire({key:e,external:t}),this.doFlush()}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}async flushPending(){if(!this.hasPending)return;const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{var t;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)(t=this.whenFlushedCallbacks.pop())===null||t===void 0||t()})}async doFlush(e){return this.options.hint===Gp.STORAGE_IN_MEMORY?this.flushPending():this.flushDelayer.trigger(()=>this.flushPending(),e)}}Bp.DEFAULT_FLUSH_DELAY=100;class MR{constructor(){this.onDidChangeItemsExternal=Be.None,this.items=new Map}async updateItems(e){var t,i;(t=e.insert)===null||t===void 0||t.forEach((s,r)=>this.items.set(r,s)),(i=e.delete)===null||i===void 0||i.forEach(s=>this.items.delete(s))}}const qS="__$__targetStorageMarker",W0=ri("storageService");var sK;(function(n){n[n.NONE=0]="NONE",n[n.SHUTDOWN=1]="SHUTDOWN"})(sK||(sK={}));function dBe(n){const e=n.get(qS);if(e)try{return JSON.parse(e)}catch{}return Object.create(null)}class hT extends Le{constructor(e={flushInterval:hT.DEFAULT_FLUSH_INTERVAL}){super(),this.options=e,this._onDidChangeValue=this._register(new W_),this._onDidChangeTarget=this._register(new W_),this._onWillSaveState=this._register(new ue),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._profileKeyTargets=void 0,this._applicationKeyTargets=void 0}onDidChangeValue(e,t,i){return Be.filter(this._onDidChangeValue.event,s=>s.scope===e&&(t===void 0||s.key===t),i)}emitDidChangeValue(e,t){const{key:i,external:s}=t;if(i===qS){switch(e){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0;break}this._onDidChangeTarget.fire({scope:e})}else this._onDidChangeValue.fire({scope:e,key:i,target:this.getKeyTargets(e)[i],external:s})}get(e,t,i){var s;return(s=this.getStorage(t))===null||s===void 0?void 0:s.get(e,i)}getBoolean(e,t,i){var s;return(s=this.getStorage(t))===null||s===void 0?void 0:s.getBoolean(e,i)}getNumber(e,t,i){var s;return(s=this.getStorage(t))===null||s===void 0?void 0:s.getNumber(e,i)}store(e,t,i,s,r=!1){if(xo(t)){this.remove(e,i,r);return}this.withPausedEmitters(()=>{var o;this.updateKeyTarget(e,i,s),(o=this.getStorage(i))===null||o===void 0||o.set(e,t,r)})}remove(e,t,i=!1){this.withPausedEmitters(()=>{var s;this.updateKeyTarget(e,t,void 0),(s=this.getStorage(t))===null||s===void 0||s.delete(e,i)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,t,i,s=!1){var r,o;const a=this.getKeyTargets(t);typeof i=="number"?a[e]!==i&&(a[e]=i,(r=this.getStorage(t))===null||r===void 0||r.set(qS,JSON.stringify(a),s)):typeof a[e]=="number"&&(delete a[e],(o=this.getStorage(t))===null||o===void 0||o.set(qS,JSON.stringify(a),s))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(e){switch(e){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(e){const t=this.getStorage(e);return t?dBe(t):Object.create(null)}}hT.DEFAULT_FLUSH_INTERVAL=60*1e3;class uBe extends hT{constructor(){super(),this.applicationStorage=this._register(new Bp(new MR,{hint:Gp.STORAGE_IN_MEMORY})),this.profileStorage=this._register(new Bp(new MR,{hint:Gp.STORAGE_IN_MEMORY})),this.workspaceStorage=this._register(new Bp(new MR,{hint:Gp.STORAGE_IN_MEMORY})),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(1,e))),this._register(this.profileStorage.onDidChangeStorage(e=>this.emitDidChangeValue(0,e))),this._register(this.applicationStorage.onDidChangeStorage(e=>this.emitDidChangeValue(-1,e)))}getStorage(e){switch(e){case-1:return this.applicationStorage;case 0:return this.profileStorage;default:return this.workspaceStorage}}}var hBe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},rK=function(n,e){return function(t,i){e(t,i,n)}};const _m=ri("hoverService");let g1=class extends Le{get delay(){return this.isInstantlyHovering()?0:this._delay}constructor(e,t,i={},s,r){super(),this.placement=e,this.instantHover=t,this.overrideOptions=i,this.configurationService=s,this.hoverService=r,this.lastHoverHideTime=0,this.timeLimit=200,this.hoverDisposables=this._register(new ct),this._delay=this.configurationService.getValue("workbench.hover.delay"),this._register(this.configurationService.onDidChangeConfiguration(o=>{o.affectsConfiguration("workbench.hover.delay")&&(this._delay=this.configurationService.getValue("workbench.hover.delay"))}))}showHover(e,t){const i=typeof this.overrideOptions=="function"?this.overrideOptions(e,t):this.overrideOptions;this.hoverDisposables.clear();const s=Es(e.target)?[e.target]:e.target.targetElements;for(const o of s)this.hoverDisposables.add(ws(o,"keydown",a=>{a.equals(9)&&this.hoverService.hideHover()}));const r=Es(e.content)?void 0:e.content.toString();return this.hoverService.showHover({...e,...i,persistence:{hideOnKeyDown:!0,...i.persistence},id:r,appearance:{...e.appearance,compact:!0,skipFadeInAnimation:this.isInstantlyHovering(),...i.appearance}},t)}isInstantlyHovering(){return this.instantHover&&Date.now()-this.lastHoverHideTime<this.timeLimit}onDidHideHover(){this.hoverDisposables.clear(),this.instantHover&&(this.lastHoverHideTime=Date.now())}};g1=hBe([rK(3,gn),rK(4,_m)],g1);var Nre=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Uo=function(n,e){return function(t,i){e(t,i,n)}},wW;const fBe=524288;function yW(n,e="single",t=!1){if(!n.hasModel())return null;const i=n.getSelection();if(e==="single"&&i.startLineNumber===i.endLineNumber||e==="multiple"){if(i.isEmpty()){const s=n.getConfiguredWordAtPosition(i.getStartPosition());if(s&&t===!1)return s.word}else if(n.getModel().getValueLengthInRange(i)<fBe)return n.getModel().getValueInRange(i)}return null}let ga=wW=class extends Le{get editor(){return this._editor}static get(e){return e.getContribution(wW.ID)}constructor(e,t,i,s,r,o){super(),this._editor=e,this._findWidgetVisible=uu.bindTo(t),this._contextKeyService=t,this._storageService=i,this._clipboardService=s,this._notificationService=r,this._hoverService=o,this._updateHistoryDelayer=new af(500),this._state=this._register(new k7e),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange(a=>this._onStateChanged(a))),this._model=null,this._register(this._editor.onDidChangeModel(()=>{const a=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,!1)},!1),a&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(41).loop})}))}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,1),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,1),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,1),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,1)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!rT.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){let e=this._editor.getSelections();e=e.map(t=>(t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._editor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t)).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}setSearchString(e){this._state.isRegex&&(e=Ya(e)),this._state.change({searchString:e},!1)}highlightFindOptions(e=!1){}async _start(e,t){if(this.disposeModel(),!this._editor.hasModel())return;const i={...t,isRevealed:!0};if(e.seedSearchStringFromSelection==="single"){const s=yW(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection);s&&(this._state.isRegex?i.searchString=Ya(s):i.searchString=s)}else if(e.seedSearchStringFromSelection==="multiple"&&!e.updateSearchScope){const s=yW(this._editor,e.seedSearchStringFromSelection);s&&(i.searchString=s)}if(!i.searchString&&e.seedSearchStringFromGlobalClipboard){const s=await this.getGlobalBufferTerm();if(!this._editor.hasModel())return;s&&(i.searchString=s)}if(e.forceRevealReplace||i.isReplaceRevealed?i.isReplaceRevealed=!0:this._findWidgetVisible.get()||(i.isReplaceRevealed=!1),e.updateSearchScope){const s=this._editor.getSelections();s.some(r=>!r.isEmpty())&&(i.searchScope=s)}i.loop=e.loop,this._state.change(i,!1),this._model||(this._model=new m_(this._editor,this._state))}start(e,t){return this._start(e,t)}moveToNextMatch(){return this._model?(this._model.moveToNextMatch(),!0):!1}moveToPrevMatch(){return this._model?(this._model.moveToPrevMatch(),!0):!1}goToMatch(e){return this._model?(this._model.moveToMatch(e),!0):!1}replace(){return this._model?(this._model.replace(),!0):!1}replaceAll(){var e;return this._model?!((e=this._editor.getModel())===null||e===void 0)&&e.isTooLargeForHeapOperation()?(this._notificationService.warn(L("too.large.for.replaceall","The file is too large to perform a replace all operation.")),!1):(this._model.replaceAll(),!0):!1}selectAllMatches(){return this._model?(this._model.selectAllMatches(),this._editor.focus(),!0):!1}async getGlobalBufferTerm(){return this._editor.getOption(41).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""}setGlobalBufferTerm(e){this._editor.getOption(41).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}};ga.ID="editor.contrib.findController";ga=wW=Nre([Uo(1,oi),Uo(2,W0),Uo(3,bm),Uo(4,Rr),Uo(5,_m)],ga);let SW=class extends ga{constructor(e,t,i,s,r,o,a,l,c){super(e,i,a,l,o,c),this._contextViewService=t,this._keybindingService=s,this._themeService=r,this._widget=null,this._findOptionsWidget=null}async _start(e,t){this._widget||this._createFindWidget();const i=this._editor.getSelection();let s=!1;switch(this._editor.getOption(41).autoFindInSelection){case"always":s=!0;break;case"never":s=!1;break;case"multiline":{s=!!i&&i.startLineNumber!==i.endLineNumber;break}}e.updateSearchScope=e.updateSearchScope||s,await super._start(e,t),this._widget&&(e.shouldFocus===2?this._widget.focusReplaceInput():e.shouldFocus===1&&this._widget.focusFindInput())}highlightFindOptions(e=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new uT(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService,this._hoverService)),this._findOptionsWidget=this._register(new oT(this._editor,this._state,this._keybindingService))}};SW=Nre([Uo(1,I0),Uo(2,oi),Uo(3,Ls),Uo(4,Xo),Uo(5,Rr),Uo(6,W0),Uo(7,bm),Uo(8,_m)],SW);const gBe=Gie(new Zie({id:Zi.StartFindAction,label:L("startFindAction","Find"),alias:"Find",precondition:Wt.or(Re.focus,Wt.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:X.MenubarEditMenu,group:"3_find",title:L({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}}));gBe.addImplementation(0,(n,e,t)=>{const i=ga.get(e);return i?i.start({forceRevealReplace:!1,seedSearchStringFromSelection:e.getOption(41).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(41).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(41).loop}):!1});const mBe={description:"Open a new In-Editor Find Widget.",args:[{name:"Open a new In-Editor Find Widget args",schema:{properties:{searchString:{type:"string"},replaceString:{type:"string"},isRegex:{type:"boolean"},matchWholeWord:{type:"boolean"},isCaseSensitive:{type:"boolean"},preserveCase:{type:"boolean"},findInSelection:{type:"boolean"}}}}]};class pBe extends to{constructor(){super({id:Zi.StartFindWithArgs,label:L("startFindWithArgsAction","Find With Arguments"),alias:"Find With Arguments",precondition:void 0,kbOpts:{kbExpr:null,primary:0,weight:100},metadata:mBe})}async run(e,t,i){const s=ga.get(t);if(s){const r=i?{searchString:i.searchString,replaceString:i.replaceString,isReplaceRevealed:i.replaceString!==void 0,isRegex:i.isRegex,wholeWord:i.matchWholeWord,matchCase:i.isCaseSensitive,preserveCase:i.preserveCase}:{};await s.start({forceRevealReplace:!1,seedSearchStringFromSelection:s.getState().searchString.length===0&&t.getOption(41).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:1,shouldAnimate:!0,updateSearchScope:i?.findInSelection||!1,loop:t.getOption(41).loop},r),s.setGlobalBufferTerm(s.getState().searchString)}}}class bBe extends to{constructor(){super({id:Zi.StartFindWithSelection,label:L("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}async run(e,t){const i=ga.get(t);i&&(await i.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop}),i.setGlobalBufferTerm(i.getState().searchString))}}class Rre extends to{async run(e,t){const i=ga.get(t);i&&!this._run(i)&&(await i.start({forceRevealReplace:!1,seedSearchStringFromSelection:i.getState().searchString.length===0&&t.getOption(41).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop}),this._run(i))}}class vBe extends Rre{constructor(){super({id:Zi.NextMatchFindAction,label:L("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:Re.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:Wt.and(Re.focus,rT),primary:3,weight:100}]})}_run(e){return e.moveToNextMatch()?(e.editor.pushUndoStop(),!0):!1}}class _Be extends Rre{constructor(){super({id:Zi.PreviousMatchFindAction,label:L("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:Re.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:Wt.and(Re.focus,rT),primary:1027,weight:100}]})}_run(e){return e.moveToPrevMatch()}}class wBe extends to{constructor(){super({id:Zi.GoToMatchFindAction,label:L("findMatchAction.goToMatch","Go to Match..."),alias:"Go to Match...",precondition:uu}),this._highlightDecorations=[]}run(e,t,i){const s=ga.get(t);if(!s)return;const r=s.getState().matchesCount;if(r<1){e.get(Rr).notify({severity:Tse.Warning,message:L("findMatchAction.noResults","No matches. Try searching for something else.")});return}const a=e.get(D0).createInputBox();a.placeholder=L("findMatchAction.inputPlaceHolder","Type a number to go to a specific match (between 1 and {0})",r);const l=d=>{const u=parseInt(d);if(isNaN(u))return;const h=s.getState().matchesCount;if(u>0&&u<=h)return u-1;if(u<0&&u>=-h)return h+u},c=d=>{const u=l(d);if(typeof u=="number"){a.validationMessage=void 0,s.goToMatch(u);const h=s.getState().currentMatch;h&&this.addDecorations(t,h)}else a.validationMessage=L("findMatchAction.inputValidationMessage","Please type a number between 1 and {0}",s.getState().matchesCount),this.clearDecorations(t)};a.onDidChangeValue(d=>{c(d)}),a.onDidAccept(()=>{const d=l(a.value);typeof d=="number"?(s.goToMatch(d),a.hide()):a.validationMessage=L("findMatchAction.inputValidationMessage","Please type a number between 1 and {0}",s.getState().matchesCount)}),a.onDidHide(()=>{this.clearDecorations(t),a.dispose()}),a.show()}clearDecorations(e){e.changeDecorations(t=>{this._highlightDecorations=t.deltaDecorations(this._highlightDecorations,[])})}addDecorations(e,t){e.changeDecorations(i=>{this._highlightDecorations=i.deltaDecorations(this._highlightDecorations,[{range:t,options:{description:"find-match-quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"find-match-quick-access-range-highlight-overview",overviewRuler:{color:ps(UFe),position:fa.Full}}}])})}}class Wre extends to{async run(e,t){const i=ga.get(t);if(!i)return;const s=yW(t,"single",!1);s&&i.setSearchString(s),this._run(i)||(await i.start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop}),this._run(i))}}class yBe extends Wre{constructor(){super({id:Zi.NextSelectionMatchFindAction,label:L("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:Re.focus,primary:2109,weight:100}})}_run(e){return e.moveToNextMatch()}}class SBe extends Wre{constructor(){super({id:Zi.PreviousSelectionMatchFindAction,label:L("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:Re.focus,primary:3133,weight:100}})}_run(e){return e.moveToPrevMatch()}}const CBe=Gie(new Zie({id:Zi.StartFindReplaceAction,label:L("startReplace","Replace"),alias:"Replace",precondition:Wt.or(Re.focus,Wt.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:X.MenubarEditMenu,group:"3_find",title:L({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}}));CBe.addImplementation(0,(n,e,t)=>{if(!e.hasModel()||e.getOption(91))return!1;const i=ga.get(e);if(!i)return!1;const s=e.getSelection(),r=i.isFindInputFocused(),o=!s.isEmpty()&&s.startLineNumber===s.endLineNumber&&e.getOption(41).seedSearchStringFromSelection!=="never"&&!r,a=r||o?2:1;return i.start({forceRevealReplace:!0,seedSearchStringFromSelection:o?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(41).seedSearchStringFromSelection!=="never",shouldFocus:a,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(41).loop})});du(ga.ID,SW,0);rn(pBe);rn(bBe);rn(vBe);rn(_Be);rn(wBe);rn(yBe);rn(SBe);const Ul=Fc.bindToContribution(ga.get);Ct(new Ul({id:Zi.CloseFindWidgetCommand,precondition:uu,handler:n=>n.closeFindWidget(),kbOpts:{weight:105,kbExpr:Wt.and(Re.focus,Wt.not("isComposing")),primary:9,secondary:[1033]}}));Ct(new Ul({id:Zi.ToggleCaseSensitiveCommand,precondition:void 0,handler:n=>n.toggleCaseSensitive(),kbOpts:{weight:105,kbExpr:Re.focus,primary:Uy.primary,mac:Uy.mac,win:Uy.win,linux:Uy.linux}}));Ct(new Ul({id:Zi.ToggleWholeWordCommand,precondition:void 0,handler:n=>n.toggleWholeWords(),kbOpts:{weight:105,kbExpr:Re.focus,primary:Yy.primary,mac:Yy.mac,win:Yy.win,linux:Yy.linux}}));Ct(new Ul({id:Zi.ToggleRegexCommand,precondition:void 0,handler:n=>n.toggleRegex(),kbOpts:{weight:105,kbExpr:Re.focus,primary:Ky.primary,mac:Ky.mac,win:Ky.win,linux:Ky.linux}}));Ct(new Ul({id:Zi.ToggleSearchScopeCommand,precondition:void 0,handler:n=>n.toggleSearchScope(),kbOpts:{weight:105,kbExpr:Re.focus,primary:jy.primary,mac:jy.mac,win:jy.win,linux:jy.linux}}));Ct(new Ul({id:Zi.TogglePreserveCaseCommand,precondition:void 0,handler:n=>n.togglePreserveCase(),kbOpts:{weight:105,kbExpr:Re.focus,primary:Jy.primary,mac:Jy.mac,win:Jy.win,linux:Jy.linux}}));Ct(new Ul({id:Zi.ReplaceOneAction,precondition:uu,handler:n=>n.replace(),kbOpts:{weight:105,kbExpr:Re.focus,primary:3094}}));Ct(new Ul({id:Zi.ReplaceOneAction,precondition:uu,handler:n=>n.replace(),kbOpts:{weight:105,kbExpr:Wt.and(Re.focus,QP),primary:3}}));Ct(new Ul({id:Zi.ReplaceAllAction,precondition:uu,handler:n=>n.replaceAll(),kbOpts:{weight:105,kbExpr:Re.focus,primary:2563}}));Ct(new Ul({id:Zi.ReplaceAllAction,precondition:uu,handler:n=>n.replaceAll(),kbOpts:{weight:105,kbExpr:Wt.and(Re.focus,QP),primary:void 0,mac:{primary:2051}}}));Ct(new Ul({id:Zi.SelectAllMatchesAction,precondition:uu,handler:n=>n.selectAllMatches(),kbOpts:{weight:105,kbExpr:Re.focus,primary:515}}));class m1{static capture(e){if(e.getScrollTop()===0||e.hasPendingScrollAnimation())return new m1(e.getScrollTop(),e.getContentHeight(),null,0,null);let t=null,i=0;const s=e.getVisibleRanges();if(s.length>0){t=s[0].getStartPosition();const r=e.getTopForPosition(t.lineNumber,t.column);i=e.getScrollTop()-r}return new m1(e.getScrollTop(),e.getContentHeight(),t,i,e.getPosition())}constructor(e,t,i,s,r){this._initialScrollTop=e,this._initialContentHeight=t,this._visiblePosition=i,this._visiblePositionScrollDelta=s,this._cursorPosition=r}restore(e){if(!(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())&&this._visiblePosition){const t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){if(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())return;const t=e.getPosition();if(!this._cursorPosition||!t)return;const i=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+i,1)}}const LBe={0:" ",1:"u",2:"r"},oK=65535,gl=16777215,aK=4278190080;class ER{constructor(e){const t=Math.ceil(e/32);this._states=new Uint32Array(t)}get(e){const t=e/32|0,i=e%32;return(this._states[t]&1<<i)!==0}set(e,t){const i=e/32|0,s=e%32,r=this._states[i];t?this._states[i]=r|1<<s:this._states[i]=r&~(1<<s)}}class ko{constructor(e,t,i){if(e.length!==t.length||e.length>oK)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=e,this._endIndexes=t,this._collapseStates=new ER(e.length),this._userDefinedStates=new ER(e.length),this._recoveredStates=new ER(e.length),this._types=i,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;const e=[],t=(i,s)=>{const r=e[e.length-1];return this.getStartLineNumber(r)<=i&&this.getEndLineNumber(r)>=s};for(let i=0,s=this._startIndexes.length;i<s;i++){const r=this._startIndexes[i],o=this._endIndexes[i];if(r>gl||o>gl)throw new Error("startLineNumber or endLineNumber must not exceed "+gl);for(;e.length>0&&!t(r,o);)e.pop();const a=e.length>0?e[e.length-1]:-1;e.push(i),this._startIndexes[i]=r+((a&255)<<24),this._endIndexes[i]=o+((a&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&gl}getEndLineNumber(e){return this._endIndexes[e]&gl}getType(e){return this._types?this._types[e]:void 0}hasTypes(){return!!this._types}isCollapsed(e){return this._collapseStates.get(e)}setCollapsed(e,t){this._collapseStates.set(e,t)}isUserDefined(e){return this._userDefinedStates.get(e)}setUserDefined(e,t){return this._userDefinedStates.set(e,t)}isRecovered(e){return this._recoveredStates.get(e)}setRecovered(e,t){return this._recoveredStates.set(e,t)}getSource(e){return this.isUserDefined(e)?1:this.isRecovered(e)?2:0}setSource(e,t){t===1?(this.setUserDefined(e,!0),this.setRecovered(e,!1)):t===2?(this.setUserDefined(e,!1),this.setRecovered(e,!0)):(this.setUserDefined(e,!1),this.setRecovered(e,!1))}setCollapsedAllOfType(e,t){let i=!1;if(this._types)for(let s=0;s<this._types.length;s++)this._types[s]===e&&(this.setCollapsed(s,t),i=!0);return i}toRegion(e){return new kBe(this,e)}getParentIndex(e){this.ensureParentIndices();const t=((this._startIndexes[e]&aK)>>>24)+((this._endIndexes[e]&aK)>>>16);return t===oK?-1:t}contains(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t}findIndex(e){let t=0,i=this._startIndexes.length;if(i===0)return-1;for(;t<i;){const s=Math.floor((t+i)/2);e<this.getStartLineNumber(s)?i=s:t=s+1}return t-1}findRange(e){let t=this.findIndex(e);if(t>=0){if(this.getEndLineNumber(t)>=e)return t;for(t=this.getParentIndex(t);t!==-1;){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1}toString(){const e=[];for(let t=0;t<this.length;t++)e[t]=`[${LBe[this.getSource(t)]}${this.isCollapsed(t)?"+":"-"}] ${this.getStartLineNumber(t)}/${this.getEndLineNumber(t)}`;return e.join(", ")}toFoldRange(e){return{startLineNumber:this._startIndexes[e]&gl,endLineNumber:this._endIndexes[e]&gl,type:this._types?this._types[e]:void 0,isCollapsed:this.isCollapsed(e),source:this.getSource(e)}}static fromFoldRanges(e){const t=e.length,i=new Uint32Array(t),s=new Uint32Array(t);let r=[],o=!1;for(let l=0;l<t;l++){const c=e[l];i[l]=c.startLineNumber,s[l]=c.endLineNumber,r.push(c.type),c.type&&(o=!0)}o||(r=void 0);const a=new ko(i,s,r);for(let l=0;l<t;l++)e[l].isCollapsed&&a.setCollapsed(l,!0),a.setSource(l,e[l].source);return a}static sanitizeAndMerge(e,t,i){i=i??Number.MAX_VALUE;const s=(m,p)=>Array.isArray(m)?b=>b<p?m[b]:void 0:b=>b<p?m.toFoldRange(b):void 0,r=s(e,e.length),o=s(t,t.length);let a=0,l=0,c=r(0),d=o(0);const u=[];let h,f=0;const g=[];for(;c||d;){let m;if(d&&(!c||c.startLineNumber>=d.startLineNumber))c&&c.startLineNumber===d.startLineNumber?(d.source===1?m=d:(m=c,m.isCollapsed=d.isCollapsed&&c.endLineNumber===d.endLineNumber,m.source=0),c=r(++a)):(m=d,d.isCollapsed&&d.source===0&&(m.source=2)),d=o(++l);else{let p=l,b=d;for(;;){if(!b||b.startLineNumber>c.endLineNumber){m=c;break}if(b.source===1&&b.endLineNumber>c.endLineNumber)break;b=o(++p)}c=r(++a)}if(m){for(;h&&h.endLineNumber<m.startLineNumber;)h=u.pop();m.endLineNumber>m.startLineNumber&&m.startLineNumber>f&&m.endLineNumber<=i&&(!h||h.endLineNumber>=m.endLineNumber)&&(g.push(m),f=m.startLineNumber,h&&u.push(h),h=m)}}return g}}class kBe{constructor(e,t){this.ranges=e,this.index=t}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}containsLine(e){return this.startLineNumber<=e&&e<=this.endLineNumber}}class xBe{get regions(){return this._regions}get textModel(){return this._textModel}constructor(e,t){this._updateEventEmitter=new ue,this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=t,this._regions=new ko(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[]}toggleCollapseState(e){if(!e.length)return;e=e.sort((i,s)=>i.regionIndex-s.regionIndex);const t={};this._decorationProvider.changeDecorations(i=>{let s=0,r=-1,o=-1;const a=l=>{for(;s<l;){const c=this._regions.getEndLineNumber(s),d=this._regions.isCollapsed(s);if(c<=r){const u=this.regions.getSource(s)!==0;i.changeDecorationOptions(this._editorDecorationIds[s],this._decorationProvider.getDecorationOption(d,c<=o,u))}d&&c>o&&(o=c),s++}};for(const l of e){const c=l.regionIndex,d=this._editorDecorationIds[c];if(d&&!t[d]){t[d]=!0,a(c);const u=!this._regions.isCollapsed(c);this._regions.setCollapsed(c,u),r=Math.max(r,this._regions.getEndLineNumber(c))}}a(this._regions.length)}),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}removeManualRanges(e){const t=new Array,i=s=>{for(const r of e)if(!(r.startLineNumber>s.endLineNumber||s.startLineNumber>r.endLineNumber))return!0;return!1};for(let s=0;s<this._regions.length;s++){const r=this._regions.toFoldRange(s);(r.source===0||!i(r))&&t.push(r)}this.updatePost(ko.fromFoldRanges(t))}update(e,t=[]){const i=this._currentFoldedOrManualRanges(t),s=ko.sanitizeAndMerge(e,i,this._textModel.getLineCount());this.updatePost(ko.fromFoldRanges(s))}updatePost(e){const t=[];let i=-1;for(let s=0,r=e.length;s<r;s++){const o=e.getStartLineNumber(s),a=e.getEndLineNumber(s),l=e.isCollapsed(s),c=e.getSource(s)!==0,d={startLineNumber:o,startColumn:this._textModel.getLineMaxColumn(o),endLineNumber:a,endColumn:this._textModel.getLineMaxColumn(a)+1};t.push({range:d,options:this._decorationProvider.getDecorationOption(l,a<=i,c)}),l&&a>i&&(i=a)}this._decorationProvider.changeDecorations(s=>this._editorDecorationIds=s.deltaDecorations(this._editorDecorationIds,t)),this._regions=e,this._updateEventEmitter.fire({model:this})}_currentFoldedOrManualRanges(e=[]){const t=(s,r)=>{for(const o of e)if(s<o&&o<=r)return!0;return!1},i=[];for(let s=0,r=this._regions.length;s<r;s++){let o=this.regions.isCollapsed(s);const a=this.regions.getSource(s);if(o||a!==0){const l=this._regions.toFoldRange(s),c=this._textModel.getDecorationRange(this._editorDecorationIds[s]);c&&(o&&t(c.startLineNumber,c.endLineNumber)&&(o=!1),i.push({startLineNumber:c.startLineNumber,endLineNumber:c.endLineNumber,type:l.type,isCollapsed:o,source:a}))}}return i}getMemento(){const e=this._currentFoldedOrManualRanges(),t=[],i=this._textModel.getLineCount();for(let s=0,r=e.length;s<r;s++){const o=e[s];if(o.startLineNumber>=o.endLineNumber||o.startLineNumber<1||o.endLineNumber>i)continue;const a=this._getLinesChecksum(o.startLineNumber+1,o.endLineNumber);t.push({startLineNumber:o.startLineNumber,endLineNumber:o.endLineNumber,isCollapsed:o.isCollapsed,source:o.source,checksum:a})}return t.length>0?t:void 0}applyMemento(e){var t,i;if(!Array.isArray(e))return;const s=[],r=this._textModel.getLineCount();for(const a of e){if(a.startLineNumber>=a.endLineNumber||a.startLineNumber<1||a.endLineNumber>r)continue;const l=this._getLinesChecksum(a.startLineNumber+1,a.endLineNumber);(!a.checksum||l===a.checksum)&&s.push({startLineNumber:a.startLineNumber,endLineNumber:a.endLineNumber,type:void 0,isCollapsed:(t=a.isCollapsed)!==null&&t!==void 0?t:!0,source:(i=a.source)!==null&&i!==void 0?i:0})}const o=ko.sanitizeAndMerge(this._regions,s,r);this.updatePost(ko.fromFoldRanges(o))}_getLinesChecksum(e,t){return AV(this._textModel.getLineContent(e)+this._textModel.getLineContent(t))%1e6}dispose(){this._decorationProvider.removeDecorations(this._editorDecorationIds)}getAllRegionsAtLine(e,t){const i=[];if(this._regions){let s=this._regions.findRange(e),r=1;for(;s>=0;){const o=this._regions.toRegion(s);(!t||t(o,r))&&i.push(o),r++,s=o.parentIndex}}return i}getRegionAtLine(e){if(this._regions){const t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null}getRegionsInside(e,t){const i=[],s=e?e.regionIndex+1:0,r=e?e.endLineNumber:Number.MAX_VALUE;if(t&&t.length===2){const o=[];for(let a=s,l=this._regions.length;a<l;a++){const c=this._regions.toRegion(a);if(this._regions.getStartLineNumber(a)<r){for(;o.length>0&&!c.containedBy(o[o.length-1]);)o.pop();o.push(c),t(c,o.length)&&i.push(c)}else break}}else for(let o=s,a=this._regions.length;o<a;o++){const l=this._regions.toRegion(o);if(this._regions.getStartLineNumber(o)<r)(!t||t(l))&&i.push(l);else break}return i}}function TBe(n,e,t){const i=[];for(const s of t){const r=n.getRegionAtLine(s);if(r){const o=!r.isCollapsed;if(i.push(r),e>1){const a=n.getRegionsInside(r,(l,c)=>l.isCollapsed!==o&&c<e);i.push(...a)}}}n.toggleCollapseState(i)}function A0(n,e,t=Number.MAX_VALUE,i){const s=[];if(i&&i.length>0)for(const r of i){const o=n.getRegionAtLine(r);if(o&&(o.isCollapsed!==e&&s.push(o),t>1)){const a=n.getRegionsInside(o,(l,c)=>l.isCollapsed!==e&&c<t);s.push(...a)}}else{const r=n.getRegionsInside(null,(o,a)=>o.isCollapsed!==e&&a<t);s.push(...r)}n.toggleCollapseState(s)}function Are(n,e,t,i){const s=[];for(const r of i){const o=n.getAllRegionsAtLine(r,(a,l)=>a.isCollapsed!==e&&l<=t);s.push(...o)}n.toggleCollapseState(s)}function DBe(n,e,t){const i=[];for(const s of t){const r=n.getAllRegionsAtLine(s,o=>o.isCollapsed!==e);r.length>0&&i.push(r[0])}n.toggleCollapseState(i)}function IBe(n,e,t,i){const s=(o,a)=>a===e&&o.isCollapsed!==t&&!i.some(l=>o.containsLine(l)),r=n.getRegionsInside(null,s);n.toggleCollapseState(r)}function Fre(n,e,t){const i=[];for(const o of t){const a=n.getAllRegionsAtLine(o,void 0);a.length>0&&i.push(a[0])}const s=o=>i.every(a=>!a.containedBy(o)&&!o.containedBy(a))&&o.isCollapsed!==e,r=n.getRegionsInside(null,s);n.toggleCollapseState(r)}function oO(n,e,t){const i=n.textModel,s=n.regions,r=[];for(let o=s.length-1;o>=0;o--)if(t!==s.isCollapsed(o)){const a=s.getStartLineNumber(o);e.test(i.getLineContent(a))&&r.push(s.toRegion(o))}n.toggleCollapseState(r)}function aO(n,e,t){const i=n.regions,s=[];for(let r=i.length-1;r>=0;r--)t!==i.isCollapsed(r)&&e===i.getType(r)&&s.push(i.toRegion(r));n.toggleCollapseState(s)}function MBe(n,e){let t=null;const i=e.getRegionAtLine(n);if(i!==null&&(t=i.startLineNumber,n===t)){const s=i.parentIndex;s!==-1?t=e.regions.getStartLineNumber(s):t=null}return t}function EBe(n,e){let t=e.getRegionAtLine(n);if(t!==null&&t.startLineNumber===n){if(n!==t.startLineNumber)return t.startLineNumber;{const i=t.parentIndex;let s=0;for(i!==-1&&(s=e.regions.getStartLineNumber(t.parentIndex));t!==null;)if(t.regionIndex>0){if(t=e.regions.toRegion(t.regionIndex-1),t.startLineNumber<=s)return null;if(t.parentIndex===i)return t.startLineNumber}else return null}}else if(e.regions.length>0)for(t=e.regions.toRegion(e.regions.length-1);t!==null;){if(t.startLineNumber<n)return t.startLineNumber;t.regionIndex>0?t=e.regions.toRegion(t.regionIndex-1):t=null}return null}function NBe(n,e){let t=e.getRegionAtLine(n);if(t!==null&&t.startLineNumber===n){const i=t.parentIndex;let s=0;if(i!==-1)s=e.regions.getEndLineNumber(t.parentIndex);else{if(e.regions.length===0)return null;s=e.regions.getEndLineNumber(e.regions.length-1)}for(;t!==null;)if(t.regionIndex<e.regions.length){if(t=e.regions.toRegion(t.regionIndex+1),t.startLineNumber>=s)return null;if(t.parentIndex===i)return t.startLineNumber}else return null}else if(e.regions.length>0)for(t=e.regions.toRegion(0);t!==null;){if(t.startLineNumber>n)return t.startLineNumber;t.regionIndex<e.regions.length?t=e.regions.toRegion(t.regionIndex+1):t=null}return null}class RBe{get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}constructor(e){this._updateEventEmitter=new ue,this._hasLineChanges=!1,this._foldingModel=e,this._foldingModelListener=e.onDidChange(t=>this.updateHiddenRanges()),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}notifyChangeModelContent(e){this._hiddenRanges.length&&!this._hasLineChanges&&(this._hasLineChanges=e.changes.some(t=>t.range.endLineNumber!==t.range.startLineNumber||Oh(t.text)[0]!==0))}updateHiddenRanges(){let e=!1;const t=[];let i=0,s=0,r=Number.MAX_VALUE,o=-1;const a=this._foldingModel.regions;for(;i<a.length;i++){if(!a.isCollapsed(i))continue;const l=a.getStartLineNumber(i)+1,c=a.getEndLineNumber(i);r<=l&&c<=o||(!e&&s<this._hiddenRanges.length&&this._hiddenRanges[s].startLineNumber===l&&this._hiddenRanges[s].endLineNumber===c?(t.push(this._hiddenRanges[s]),s++):(e=!0,t.push(new te(l,1,c,1))),r=l,o=c)}(this._hasLineChanges||e||s<this._hiddenRanges.length)&&this.applyHiddenRanges(t)}applyHiddenRanges(e){this._hiddenRanges=e,this._hasLineChanges=!1,this._updateEventEmitter.fire(e)}hasRanges(){return this._hiddenRanges.length>0}isHidden(e){return lK(this._hiddenRanges,e)!==null}adjustSelections(e){let t=!1;const i=this._foldingModel.textModel;let s=null;const r=o=>((!s||!WBe(o,s))&&(s=lK(this._hiddenRanges,o)),s?s.startLineNumber-1:null);for(let o=0,a=e.length;o<a;o++){let l=e[o];const c=r(l.startLineNumber);c&&(l=l.setStartPosition(c,i.getLineMaxColumn(c)),t=!0);const d=r(l.endLineNumber);d&&(l=l.setEndPosition(d,i.getLineMaxColumn(d)),t=!0),e[o]=l}return t}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}}function WBe(n,e){return n>=e.startLineNumber&&n<=e.endLineNumber}function lK(n,e){const t=J_(n,i=>e<i.startLineNumber)-1;return t>=0&&n[t].endLineNumber>=e?n[t]:null}const ABe=5e3,FBe="indent";class Vre{constructor(e,t,i){this.editorModel=e,this.languageConfigurationService=t,this.foldingRangesLimit=i,this.id=FBe}dispose(){}compute(e){const t=this.languageConfigurationService.getLanguageConfiguration(this.editorModel.getLanguageId()).foldingRules,i=t&&!!t.offSide,s=t&&t.markers;return Promise.resolve(OBe(this.editorModel,i,s,this.foldingRangesLimit))}}let VBe=class{constructor(e){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=e}insertFirst(e,t,i){if(e>gl||t>gl)return;const s=this._length;this._startIndexes[s]=e,this._endIndexes[s]=t,this._length++,i<1e3&&(this._indentOccurrences[i]=(this._indentOccurrences[i]||0)+1)}toIndentRanges(e){const t=this._foldingRangesLimit.limit;if(this._length<=t){this._foldingRangesLimit.update(this._length,!1);const i=new Uint32Array(this._length),s=new Uint32Array(this._length);for(let r=this._length-1,o=0;r>=0;r--,o++)i[o]=this._startIndexes[r],s[o]=this._endIndexes[r];return new ko(i,s)}else{this._foldingRangesLimit.update(this._length,t);let i=0,s=this._indentOccurrences.length;for(let l=0;l<this._indentOccurrences.length;l++){const c=this._indentOccurrences[l];if(c){if(c+i>t){s=l;break}i+=c}}const r=e.getOptions().tabSize,o=new Uint32Array(t),a=new Uint32Array(t);for(let l=this._length-1,c=0;l>=0;l--){const d=this._startIndexes[l],u=e.getLineContent(d),h=gP(u,r);(h<s||h===s&&i++<t)&&(o[c]=d,a[c]=this._endIndexes[l],c++)}return new ko(o,a)}}};const PBe={limit:ABe,update:()=>{}};function OBe(n,e,t,i=PBe){const s=n.getOptions().tabSize,r=new VBe(i);let o;t&&(o=new RegExp(`(${t.start.source})|(?:${t.end.source})`));const a=[],l=n.getLineCount()+1;a.push({indent:-1,endAbove:l,line:l});for(let c=n.getLineCount();c>0;c--){const d=n.getLineContent(c),u=gP(d,s);let h=a[a.length-1];if(u===-1){e&&(h.endAbove=c);continue}let f;if(o&&(f=d.match(o)))if(f[1]){let g=a.length-1;for(;g>0&&a[g].indent!==-2;)g--;if(g>0){a.length=g+1,h=a[g],r.insertFirst(c,h.line,u),h.line=c,h.indent=u,h.endAbove=c;continue}}else{a.push({indent:-2,endAbove:c,line:c});continue}if(h.indent>u){do a.pop(),h=a[a.length-1];while(h.indent>u);const g=h.endAbove-1;g-c>=1&&r.insertFirst(c,g,u)}h.indent===u?h.endAbove=c:a.push({indent:u,endAbove:c,line:c})}return r.toIndentRanges(n)}const ZBe=j("editor.foldBackground",{light:bt(Ju,.3),dark:bt(Ju,.3),hcDark:null,hcLight:null},L("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0);j("editorGutter.foldingControlForeground",{dark:wc,light:wc,hcDark:wc,hcLight:wc},L("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));const lO=tr("folding-expanded",Qe.chevronDown,L("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),cO=tr("folding-collapsed",Qe.chevronRight,L("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin.")),Pre=tr("folding-manual-collapsed",cO,L("foldingManualCollapedIcon","Icon for manually collapsed ranges in the editor glyph margin.")),Ore=tr("folding-manual-expanded",lO,L("foldingManualExpandedIcon","Icon for manually expanded ranges in the editor glyph margin.")),dO={color:ps(ZBe),position:1},F0=L("linesCollapsed","Click to expand the range."),fT=L("linesExpanded","Click to collapse the range.");class On{constructor(e){this.editor=e,this.showFoldingControls="mouseover",this.showFoldingHighlights=!0}getDecorationOption(e,t,i){return t?On.HIDDEN_RANGE_DECORATION:this.showFoldingControls==="never"?e?this.showFoldingHighlights?On.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION:On.NO_CONTROLS_COLLAPSED_RANGE_DECORATION:On.NO_CONTROLS_EXPANDED_RANGE_DECORATION:e?i?this.showFoldingHighlights?On.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:On.MANUALLY_COLLAPSED_VISUAL_DECORATION:this.showFoldingHighlights?On.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:On.COLLAPSED_VISUAL_DECORATION:this.showFoldingControls==="mouseover"?i?On.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION:On.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:i?On.MANUALLY_EXPANDED_VISUAL_DECORATION:On.EXPANDED_VISUAL_DECORATION}changeDecorations(e){return this.editor.changeDecorations(e)}removeDecorations(e){this.editor.removeDecorations(e)}}On.COLLAPSED_VISUAL_DECORATION=Qt.register({description:"folding-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:F0,firstLineDecorationClassName:Vt.asClassName(cO)});On.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=Qt.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:dO,isWholeLine:!0,linesDecorationsTooltip:F0,firstLineDecorationClassName:Vt.asClassName(cO)});On.MANUALLY_COLLAPSED_VISUAL_DECORATION=Qt.register({description:"folding-manually-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:F0,firstLineDecorationClassName:Vt.asClassName(Pre)});On.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=Qt.register({description:"folding-manually-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:dO,isWholeLine:!0,linesDecorationsTooltip:F0,firstLineDecorationClassName:Vt.asClassName(Pre)});On.NO_CONTROLS_COLLAPSED_RANGE_DECORATION=Qt.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:F0});On.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION=Qt.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:dO,isWholeLine:!0,linesDecorationsTooltip:F0});On.EXPANDED_VISUAL_DECORATION=Qt.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+Vt.asClassName(lO),linesDecorationsTooltip:fT});On.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=Qt.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:Vt.asClassName(lO),linesDecorationsTooltip:fT});On.MANUALLY_EXPANDED_VISUAL_DECORATION=Qt.register({description:"folding-manually-expanded-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+Vt.asClassName(Ore),linesDecorationsTooltip:fT});On.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION=Qt.register({description:"folding-manually-expanded-auto-hide-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:Vt.asClassName(Ore),linesDecorationsTooltip:fT});On.NO_CONTROLS_EXPANDED_RANGE_DECORATION=Qt.register({description:"folding-no-controls-range-decoration",stickiness:0,isWholeLine:!0});On.HIDDEN_RANGE_DECORATION=Qt.register({description:"folding-hidden-range-decoration",stickiness:1});const GBe={},BBe="syntax";class Zre{constructor(e,t,i,s,r){this.editorModel=e,this.providers=t,this.handleFoldingRangesChange=i,this.foldingRangesLimit=s,this.fallbackRangeProvider=r,this.id=BBe,this.disposables=new ct,r&&this.disposables.add(r);for(const o of t)typeof o.onDidChange=="function"&&this.disposables.add(o.onDidChange(i))}compute(e){return XBe(this.providers,this.editorModel,e).then(t=>{var i,s;return t?HBe(t,this.foldingRangesLimit):(s=(i=this.fallbackRangeProvider)===null||i===void 0?void 0:i.compute(e))!==null&&s!==void 0?s:null})}dispose(){this.disposables.dispose()}}function XBe(n,e,t){let i=null;const s=n.map((r,o)=>Promise.resolve(r.provideFoldingRanges(e,GBe,t)).then(a=>{if(!t.isCancellationRequested&&Array.isArray(a)){Array.isArray(i)||(i=[]);const l=e.getLineCount();for(const c of a)c.start>0&&c.end>c.start&&c.end<=l&&i.push({start:c.start,end:c.end,rank:o,kind:c.kind})}},of));return Promise.all(s).then(r=>i)}class zBe{constructor(e){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}add(e,t,i,s){if(e>gl||t>gl)return;const r=this._length;this._startIndexes[r]=e,this._endIndexes[r]=t,this._nestingLevels[r]=s,this._types[r]=i,this._length++,s<30&&(this._nestingLevelCounts[s]=(this._nestingLevelCounts[s]||0)+1)}toIndentRanges(){const e=this._foldingRangesLimit.limit;if(this._length<=e){this._foldingRangesLimit.update(this._length,!1);const t=new Uint32Array(this._length),i=new Uint32Array(this._length);for(let s=0;s<this._length;s++)t[s]=this._startIndexes[s],i[s]=this._endIndexes[s];return new ko(t,i,this._types)}else{this._foldingRangesLimit.update(this._length,e);let t=0,i=this._nestingLevelCounts.length;for(let a=0;a<this._nestingLevelCounts.length;a++){const l=this._nestingLevelCounts[a];if(l){if(l+t>e){i=a;break}t+=l}}const s=new Uint32Array(e),r=new Uint32Array(e),o=[];for(let a=0,l=0;a<this._length;a++){const c=this._nestingLevels[a];(c<i||c===i&&t++<e)&&(s[l]=this._startIndexes[a],r[l]=this._endIndexes[a],o[l]=this._types[a],l++)}return new ko(s,r,o)}}}function HBe(n,e){const t=n.sort((o,a)=>{let l=o.start-a.start;return l===0&&(l=o.rank-a.rank),l}),i=new zBe(e);let s;const r=[];for(const o of t)if(!s)s=o,i.add(o.start,o.end,o.kind&&o.kind.value,r.length);else if(o.start>s.start)if(o.end<=s.end)r.push(s),s=o,i.add(o.start,o.end,o.kind&&o.kind.value,r.length);else{if(o.start>s.end){do s=r.pop();while(s&&o.start>s.end);s&&r.push(s),s=o}i.add(o.start,o.end,o.kind&&o.kind.value,r.length)}return i.toIndentRanges()}const Gre=ri("environmentService");var UBe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},cK=function(n,e){return function(t,i){e(t,i,n)}};const gT=ri("ILanguageFeatureDebounceService");var YL;(function(n){const e=new WeakMap;let t=0;function i(s){let r=e.get(s);return r===void 0&&(r=++t,e.set(s,r)),r}n.of=i})(YL||(YL={}));class YBe{constructor(e){this._default=e}get(e){return this._default}update(e,t){return this._default}default(){return this._default}}class KBe{constructor(e,t,i,s,r,o){this._logService=e,this._name=t,this._registry=i,this._default=s,this._min=r,this._max=o,this._cache=new mw(50,.7)}_key(e){return e.id+this._registry.all(e).reduce((t,i)=>p2(YL.of(i),t),0)}get(e){const t=this._key(e),i=this._cache.get(t);return i?Br(i.value,this._min,this._max):this.default()}update(e,t){const i=this._key(e);let s=this._cache.get(i);s||(s=new N7e(6),this._cache.set(i,s));const r=Br(s.update(t),this._min,this._max);return WV(e.uri,"output")||this._logService.trace(`[DEBOUNCE: ${this._name}] for ${e.uri.toString()} is ${r}ms`),r}_overall(){const e=new ore;for(const[,t]of this._cache)e.update(t.value);return e.value}default(){const e=this._overall()|0||this._default;return Br(e,this._min,this._max)}}let CW=class{constructor(e,t){this._logService=e,this._data=new Map,this._isDev=t.isExtensionDevelopment||!t.isBuilt}for(e,t,i){var s,r,o;const a=(s=i?.min)!==null&&s!==void 0?s:50,l=(r=i?.max)!==null&&r!==void 0?r:a**2,c=(o=i?.key)!==null&&o!==void 0?o:void 0,d=`${YL.of(e)},${a}${c?","+c:""}`;let u=this._data.get(d);return u||(this._isDev?(this._logService.debug(`[DEBOUNCE: ${t}] is disabled in developed mode`),u=new YBe(a*1.5)):u=new KBe(this._logService,t,e,this._overallAverage()|0||a*1.5,a,l),this._data.set(d,u)),u}_overallAverage(){const e=new ore;for(const t of this._data.values())e.update(t.default());return e.value}};CW=UBe([cK(0,Yc),cK(1,Gre)],CW);fi(gT,CW,1);var jBe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},nv=function(n,e){return function(t,i){e(t,i,n)}},Hm;const ir=new it("foldingEnabled",!1);let Vg=Hm=class extends Le{static get(e){return e.getContribution(Hm.ID)}static getFoldingRangeProviders(e,t){var i,s;const r=e.foldingRangeProvider.ordered(t);return(s=(i=Hm._foldingRangeSelector)===null||i===void 0?void 0:i.call(Hm,r,t))!==null&&s!==void 0?s:r}constructor(e,t,i,s,r,o){super(),this.contextKeyService=t,this.languageConfigurationService=i,this.languageFeaturesService=o,this.localToDispose=this._register(new ct),this.editor=e,this._foldingLimitReporter=new JBe(e);const a=this.editor.getOptions();this._isEnabled=a.get(43),this._useFoldingProviders=a.get(44)!=="indentation",this._unfoldOnClickAfterEndOfLine=a.get(48),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=a.get(46),this.updateDebounceInfo=r.for(o.foldingRangeProvider,"Folding",{min:200}),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new On(e),this.foldingDecorationProvider.showFoldingControls=a.get(110),this.foldingDecorationProvider.showFoldingHighlights=a.get(45),this.foldingEnabled=ir.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._register(this.editor.onDidChangeModel(()=>this.onModelChanged())),this._register(this.editor.onDidChangeConfiguration(l=>{if(l.hasChanged(43)&&(this._isEnabled=this.editor.getOptions().get(43),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),l.hasChanged(47)&&this.onModelChanged(),l.hasChanged(110)||l.hasChanged(45)){const c=this.editor.getOptions();this.foldingDecorationProvider.showFoldingControls=c.get(110),this.foldingDecorationProvider.showFoldingHighlights=c.get(45),this.triggerFoldingModelChanged()}l.hasChanged(44)&&(this._useFoldingProviders=this.editor.getOptions().get(44)!=="indentation",this.onFoldingStrategyChanged()),l.hasChanged(48)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(48)),l.hasChanged(46)&&(this._foldingImportsByDefault=this.editor.getOptions().get(46))})),this.onModelChanged()}saveViewState(){const e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){const t=this.foldingModel.getMemento(),i=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:i,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(e){const t=this.editor.getModel();if(!(!t||!this._isEnabled||t.isTooLargeForTokenization()||!this.hiddenRangeModel)&&e&&(this._currentModelHasFoldedImports=!!e.foldedImports,e.collapsedRegions&&e.collapsedRegions.length>0&&this.foldingModel)){this._restoringViewState=!0;try{this.foldingModel.applyMemento(e.collapsedRegions)}finally{this._restoringViewState=!1}}}onModelChanged(){this.localToDispose.clear();const e=this.editor.getModel();!this._isEnabled||!e||e.isTooLargeForTokenization()||(this._currentModelHasFoldedImports=!1,this.foldingModel=new xBe(e,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new RBe(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange(t=>this.onHiddenRangesChanges(t))),this.updateScheduler=new af(this.updateDebounceInfo.get(e)),this.cursorChangedScheduler=new as(()=>this.revealCursor(),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(this.languageFeaturesService.foldingRangeProvider.onDidChange(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelContent(t=>this.onDidChangeModelContent(t))),this.localToDispose.add(this.editor.onDidChangeCursorPosition(()=>this.onCursorPositionChanged())),this.localToDispose.add(this.editor.onMouseDown(t=>this.onEditorMouseDown(t))),this.localToDispose.add(this.editor.onMouseUp(t=>this.onEditorMouseUp(t))),this.localToDispose.add({dispose:()=>{var t,i;this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),(t=this.updateScheduler)===null||t===void 0||t.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,(i=this.rangeProvider)===null||i===void 0||i.dispose(),this.rangeProvider=null}}),this.triggerFoldingModelChanged())}onFoldingStrategyChanged(){var e;(e=this.rangeProvider)===null||e===void 0||e.dispose(),this.rangeProvider=null,this.triggerFoldingModelChanged()}getRangeProvider(e){if(this.rangeProvider)return this.rangeProvider;const t=new Vre(e,this.languageConfigurationService,this._foldingLimitReporter);if(this.rangeProvider=t,this._useFoldingProviders&&this.foldingModel){const i=Hm.getFoldingRangeProviders(this.languageFeaturesService,e);i.length>0&&(this.rangeProvider=new Zre(e,i,()=>this.triggerFoldingModelChanged(),this._foldingLimitReporter,t))}return this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onDidChangeModelContent(e){var t;(t=this.hiddenRangeModel)===null||t===void 0||t.notifyChangeModelContent(e),this.triggerFoldingModelChanged()}triggerFoldingModelChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger(()=>{const e=this.foldingModel;if(!e)return null;const t=new Hc,i=this.getRangeProvider(e.textModel),s=this.foldingRegionPromise=Od(r=>i.compute(r));return s.then(r=>{if(r&&s===this.foldingRegionPromise){let o;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){const d=r.setCollapsedAllOfType(kr.Imports.value,!0);d&&(o=m1.capture(this.editor),this._currentModelHasFoldedImports=d)}const a=this.editor.getSelections(),l=a?a.map(d=>d.startLineNumber):[];e.update(r,l),o?.restore(this.editor);const c=this.updateDebounceInfo.update(e.textModel,t.elapsed());this.updateScheduler&&(this.updateScheduler.defaultDelay=c)}return e})}).then(void 0,e=>(gi(e),null)))}onHiddenRangesChanges(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){const t=this.editor.getSelections();t&&this.hiddenRangeModel.adjustSelections(t)&&this.editor.setSelections(t)}this.editor.setHiddenAreas(e,this)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){const e=this.getFoldingModel();e&&e.then(t=>{if(t){const i=this.editor.getSelections();if(i&&i.length>0){const s=[];for(const r of i){const o=r.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(o)&&s.push(...t.getAllRegionsAtLine(o,a=>a.isCollapsed&&o>a.startLineNumber))}s.length&&(t.toggleCollapseState(s),this.reveal(i[0].getPosition()))}}}).then(void 0,gi)}onEditorMouseDown(e){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!e.target||!e.target.range||!e.event.leftButton&&!e.event.middleButton)return;const t=e.target.range;let i=!1;switch(e.target.type){case 4:{const s=e.target.detail,r=e.target.element.offsetLeft;if(s.offsetX-r<4)return;i=!0;break}case 7:{if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()&&!e.target.detail.isAfterLines)break;return}case 6:{if(this.hiddenRangeModel.hasRanges()){const s=this.editor.getModel();if(s&&t.startColumn===s.getLineMaxColumn(t.startLineNumber))break}return}default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:i}}onEditorMouseUp(e){const t=this.foldingModel;if(!t||!this.mouseDownInfo||!e.target)return;const i=this.mouseDownInfo.lineNumber,s=this.mouseDownInfo.iconClicked,r=e.target.range;if(!r||r.startLineNumber!==i)return;if(s){if(e.target.type!==4)return}else{const a=this.editor.getModel();if(!a||r.startColumn!==a.getLineMaxColumn(i))return}const o=t.getRegionAtLine(i);if(o&&o.startLineNumber===i){const a=o.isCollapsed;if(s||a){const l=e.event.altKey;let c=[];if(l){const d=h=>!h.containedBy(o)&&!o.containedBy(h),u=t.getRegionsInside(null,d);for(const h of u)h.isCollapsed&&c.push(h);c.length===0&&(c=u)}else{const d=e.event.middleButton||e.event.shiftKey;if(d)for(const u of t.getRegionsInside(o))u.isCollapsed===a&&c.push(u);(a||!d||c.length===0)&&c.push(o)}t.toggleCollapseState(c),this.reveal({lineNumber:i,column:1})}}}reveal(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}};Vg.ID="editor.contrib.folding";Vg=Hm=jBe([nv(1,oi),nv(2,ma),nv(3,Rr),nv(4,gT),nv(5,ei)],Vg);class JBe{constructor(e){this.editor=e,this._onDidChange=new ue,this._computed=0,this._limited=!1}get limit(){return this.editor.getOptions().get(47)}update(e,t){(e!==this._computed||t!==this._limited)&&(this._computed=e,this._limited=t,this._onDidChange.fire())}}class pr extends to{runEditorCommand(e,t,i){const s=e.get(ma),r=Vg.get(t);if(!r)return;const o=r.getFoldingModel();if(o)return this.reportTelemetry(e,t),o.then(a=>{if(a){this.invoke(r,a,t,i,s);const l=t.getSelection();l&&r.reveal(l.getStartPosition())}})}getSelectedLines(e){const t=e.getSelections();return t?t.map(i=>i.startLineNumber):[]}getLineNumbers(e,t){return e&&e.selectionLines?e.selectionLines.map(i=>i+1):this.getSelectedLines(t)}run(e,t){}}function Bre(n){if(!lo(n)){if(!Ha(n))return!1;const e=n;if(!lo(e.levels)&&!Rh(e.levels)||!lo(e.direction)&&!Dr(e.direction)||!lo(e.selectionLines)&&(!Array.isArray(e.selectionLines)||!e.selectionLines.every(Rh)))return!1}return!0}class $Be extends pr{constructor(){super({id:"editor.unfold",label:L("unfoldAction.label","Unfold"),alias:"Unfold",precondition:ir,kbOpts:{kbExpr:Re.editorTextFocus,primary:3166,mac:{primary:2654},weight:100},metadata:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:`Property-value pairs that can be passed through this argument:
						* 'levels': Number of levels to unfold. If not set, defaults to 1.
						* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.
						* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.
						`,constraint:Bre,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,i,s){const r=s&&s.levels||1,o=this.getLineNumbers(s,i);s&&s.direction==="up"?Are(t,!1,r,o):A0(t,!1,r,o)}}class QBe extends pr{constructor(){super({id:"editor.unfoldRecursively",label:L("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:ir,kbOpts:{kbExpr:Re.editorTextFocus,primary:Bo(2089,2142),weight:100}})}invoke(e,t,i,s){A0(t,!1,Number.MAX_VALUE,this.getSelectedLines(i))}}class qBe extends pr{constructor(){super({id:"editor.fold",label:L("foldAction.label","Fold"),alias:"Fold",precondition:ir,kbOpts:{kbExpr:Re.editorTextFocus,primary:3164,mac:{primary:2652},weight:100},metadata:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:`Property-value pairs that can be passed through this argument:
							* 'levels': Number of levels to fold.
							* 'direction': If 'up', folds given number of levels up otherwise folds down.
							* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.
							If no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.
						`,constraint:Bre,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,i,s){const r=this.getLineNumbers(s,i),o=s&&s.levels,a=s&&s.direction;typeof o!="number"&&typeof a!="string"?DBe(t,!0,r):a==="up"?Are(t,!0,o||1,r):A0(t,!0,o||1,r)}}class e6e extends pr{constructor(){super({id:"editor.toggleFold",label:L("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:ir,kbOpts:{kbExpr:Re.editorTextFocus,primary:Bo(2089,2090),weight:100}})}invoke(e,t,i){const s=this.getSelectedLines(i);TBe(t,1,s)}}class t6e extends pr{constructor(){super({id:"editor.foldRecursively",label:L("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:ir,kbOpts:{kbExpr:Re.editorTextFocus,primary:Bo(2089,2140),weight:100}})}invoke(e,t,i){const s=this.getSelectedLines(i);A0(t,!0,Number.MAX_VALUE,s)}}class i6e extends pr{constructor(){super({id:"editor.foldAllBlockComments",label:L("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:ir,kbOpts:{kbExpr:Re.editorTextFocus,primary:Bo(2089,2138),weight:100}})}invoke(e,t,i,s,r){if(t.regions.hasTypes())aO(t,kr.Comment.value,!0);else{const o=i.getModel();if(!o)return;const a=r.getLanguageConfiguration(o.getLanguageId()).comments;if(a&&a.blockCommentStartToken){const l=new RegExp("^\\s*"+Ya(a.blockCommentStartToken));oO(t,l,!0)}}}}class n6e extends pr{constructor(){super({id:"editor.foldAllMarkerRegions",label:L("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:ir,kbOpts:{kbExpr:Re.editorTextFocus,primary:Bo(2089,2077),weight:100}})}invoke(e,t,i,s,r){if(t.regions.hasTypes())aO(t,kr.Region.value,!0);else{const o=i.getModel();if(!o)return;const a=r.getLanguageConfiguration(o.getLanguageId()).foldingRules;if(a&&a.markers&&a.markers.start){const l=new RegExp(a.markers.start);oO(t,l,!0)}}}}class s6e extends pr{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:L("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:ir,kbOpts:{kbExpr:Re.editorTextFocus,primary:Bo(2089,2078),weight:100}})}invoke(e,t,i,s,r){if(t.regions.hasTypes())aO(t,kr.Region.value,!1);else{const o=i.getModel();if(!o)return;const a=r.getLanguageConfiguration(o.getLanguageId()).foldingRules;if(a&&a.markers&&a.markers.start){const l=new RegExp(a.markers.start);oO(t,l,!1)}}}}class r6e extends pr{constructor(){super({id:"editor.foldAllExcept",label:L("foldAllExcept.label","Fold All Except Selected"),alias:"Fold All Except Selected",precondition:ir,kbOpts:{kbExpr:Re.editorTextFocus,primary:Bo(2089,2136),weight:100}})}invoke(e,t,i){const s=this.getSelectedLines(i);Fre(t,!0,s)}}class o6e extends pr{constructor(){super({id:"editor.unfoldAllExcept",label:L("unfoldAllExcept.label","Unfold All Except Selected"),alias:"Unfold All Except Selected",precondition:ir,kbOpts:{kbExpr:Re.editorTextFocus,primary:Bo(2089,2134),weight:100}})}invoke(e,t,i){const s=this.getSelectedLines(i);Fre(t,!1,s)}}class a6e extends pr{constructor(){super({id:"editor.foldAll",label:L("foldAllAction.label","Fold All"),alias:"Fold All",precondition:ir,kbOpts:{kbExpr:Re.editorTextFocus,primary:Bo(2089,2069),weight:100}})}invoke(e,t,i){A0(t,!0)}}class l6e extends pr{constructor(){super({id:"editor.unfoldAll",label:L("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:ir,kbOpts:{kbExpr:Re.editorTextFocus,primary:Bo(2089,2088),weight:100}})}invoke(e,t,i){A0(t,!1)}}class Pg extends pr{getFoldingLevel(){return parseInt(this.id.substr(Pg.ID_PREFIX.length))}invoke(e,t,i){IBe(t,this.getFoldingLevel(),!0,this.getSelectedLines(i))}}Pg.ID_PREFIX="editor.foldLevel";Pg.ID=n=>Pg.ID_PREFIX+n;class c6e extends pr{constructor(){super({id:"editor.gotoParentFold",label:L("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:ir,kbOpts:{kbExpr:Re.editorTextFocus,weight:100}})}invoke(e,t,i){const s=this.getSelectedLines(i);if(s.length>0){const r=MBe(s[0],t);r!==null&&i.setSelection({startLineNumber:r,startColumn:1,endLineNumber:r,endColumn:1})}}}class d6e extends pr{constructor(){super({id:"editor.gotoPreviousFold",label:L("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:ir,kbOpts:{kbExpr:Re.editorTextFocus,weight:100}})}invoke(e,t,i){const s=this.getSelectedLines(i);if(s.length>0){const r=EBe(s[0],t);r!==null&&i.setSelection({startLineNumber:r,startColumn:1,endLineNumber:r,endColumn:1})}}}class u6e extends pr{constructor(){super({id:"editor.gotoNextFold",label:L("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:ir,kbOpts:{kbExpr:Re.editorTextFocus,weight:100}})}invoke(e,t,i){const s=this.getSelectedLines(i);if(s.length>0){const r=NBe(s[0],t);r!==null&&i.setSelection({startLineNumber:r,startColumn:1,endLineNumber:r,endColumn:1})}}}class h6e extends pr{constructor(){super({id:"editor.createFoldingRangeFromSelection",label:L("createManualFoldRange.label","Create Folding Range from Selection"),alias:"Create Folding Range from Selection",precondition:ir,kbOpts:{kbExpr:Re.editorTextFocus,primary:Bo(2089,2135),weight:100}})}invoke(e,t,i){var s;const r=[],o=i.getSelections();if(o){for(const a of o){let l=a.endLineNumber;a.endColumn===1&&--l,l>a.startLineNumber&&(r.push({startLineNumber:a.startLineNumber,endLineNumber:l,type:void 0,isCollapsed:!0,source:1}),i.setSelection({startLineNumber:a.startLineNumber,startColumn:1,endLineNumber:a.startLineNumber,endColumn:1}))}if(r.length>0){r.sort((l,c)=>l.startLineNumber-c.startLineNumber);const a=ko.sanitizeAndMerge(t.regions,r,(s=i.getModel())===null||s===void 0?void 0:s.getLineCount());t.updatePost(ko.fromFoldRanges(a))}}}}class f6e extends pr{constructor(){super({id:"editor.removeManualFoldingRanges",label:L("removeManualFoldingRanges.label","Remove Manual Folding Ranges"),alias:"Remove Manual Folding Ranges",precondition:ir,kbOpts:{kbExpr:Re.editorTextFocus,primary:Bo(2089,2137),weight:100}})}invoke(e,t,i){const s=i.getSelections();if(s){const r=[];for(const o of s){const{startLineNumber:a,endLineNumber:l}=o;r.push(l>=a?{startLineNumber:a,endLineNumber:l}:{endLineNumber:l,startLineNumber:a})}t.removeManualRanges(r),e.triggerFoldingModelChanged()}}}du(Vg.ID,Vg,0);rn($Be);rn(QBe);rn(qBe);rn(t6e);rn(a6e);rn(l6e);rn(i6e);rn(n6e);rn(s6e);rn(r6e);rn(o6e);rn(e6e);rn(c6e);rn(d6e);rn(u6e);rn(h6e);rn(f6e);for(let n=1;n<=7;n++)yRe(new Pg({id:Pg.ID(n),label:L("foldLevelAction.label","Fold Level {0}",n),alias:`Fold Level ${n}`,precondition:ir,kbOpts:{kbExpr:Re.editorTextFocus,primary:Bo(2089,2048|21+n),weight:100}}));cs.registerCommand("_executeFoldingRangeProvider",async function(n,...e){const[t]=e;if(!(t instanceof Ft))throw wb();const i=n.get(ei),s=n.get(Ws).getModel(t);if(!s)throw wb();const r=n.get(gn);if(!r.getValue("editor.folding",{resource:t}))return[];const o=n.get(ma),a=r.getValue("editor.foldingStrategy",{resource:t}),l={get limit(){return r.getValue("editor.foldingMaximumRegions",{resource:t})},update:(f,g)=>{}},c=new Vre(s,o,l);let d=c;if(a!=="indentation"){const f=Vg.getFoldingRangeProviders(i,s);f.length&&(d=new Zre(s,f,()=>{},l,c))}const u=await d.compute(Xs.None),h=[];try{if(u)for(let f=0;f<u.length;f++){const g=u.getType(f);h.push({start:u.getStartLineNumber(f),end:u.getEndLineNumber(f),kind:g?kr.fromValue(g):void 0})}return h}finally{d.dispose()}});function g6e(n){return n&&typeof n.getEditorType=="function"?n.getEditorType()===J2.IDiffEditor:!1}const eS=j("editor.wordHighlightBackground",{dark:"#575757B8",light:"#57575740",hcDark:null,hcLight:null},L("wordHighlight","Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations."),!0);j("editor.wordHighlightStrongBackground",{dark:"#004972B8",light:"#0e639c40",hcDark:null,hcLight:null},L("wordHighlightStrong","Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations."),!0);j("editor.wordHighlightTextBackground",{light:eS,dark:eS,hcDark:eS,hcLight:eS},L("wordHighlightText","Background color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations."),!0);const tS=j("editor.wordHighlightBorder",{light:null,dark:null,hcDark:cn,hcLight:cn},L("wordHighlightBorder","Border color of a symbol during read-access, like reading a variable."));j("editor.wordHighlightStrongBorder",{light:null,dark:null,hcDark:cn,hcLight:cn},L("wordHighlightStrongBorder","Border color of a symbol during write-access, like writing to a variable."));j("editor.wordHighlightTextBorder",{light:tS,dark:tS,hcDark:tS,hcLight:tS},L("wordHighlightTextBorder","Border color of a textual occurrence for a symbol."));const m6e=j("editorOverviewRuler.wordHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hcDark:"#A0A0A0CC",hcLight:"#A0A0A0CC"},L("overviewRulerWordHighlightForeground","Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),p6e=j("editorOverviewRuler.wordHighlightStrongForeground",{dark:"#C0A0C0CC",light:"#C0A0C0CC",hcDark:"#C0A0C0CC",hcLight:"#C0A0C0CC"},L("overviewRulerWordHighlightStrongForeground","Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),b6e=j("editorOverviewRuler.wordHighlightTextForeground",{dark:Rv,light:Rv,hcDark:Rv,hcLight:Rv},L("overviewRulerWordHighlightTextForeground","Overview ruler marker color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations."),!0),v6e=Qt.register({description:"word-highlight-strong",stickiness:1,className:"wordHighlightStrong",overviewRuler:{color:ps(p6e),position:fa.Center},minimap:{color:ps(Z2),position:1}}),_6e=Qt.register({description:"word-highlight-text",stickiness:1,className:"wordHighlightText",overviewRuler:{color:ps(b6e),position:fa.Center},minimap:{color:ps(Z2),position:1}});Qt.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",overviewRuler:{color:ps(Rv),position:fa.Center},minimap:{color:ps(Z2),position:1}});Qt.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"});const w6e=Qt.register({description:"word-highlight",stickiness:1,className:"wordHighlight",overviewRuler:{color:ps(m6e),position:fa.Center},minimap:{color:ps(Z2),position:1}});function y6e(n){return n===Y_.Write?v6e:n===Y_.Text?_6e:w6e}zl((n,e)=>{const t=n.getColor(iP);t&&e.addRule(`.monaco-editor .selectionHighlight { background-color: ${t.transparent(.5)}; }`)});const iS="**",dK="/",eC="[/\\\\]",tC="[^/\\\\]",S6e=/\//g;function uK(n,e){switch(n){case 0:return"";case 1:return`${tC}*?`;default:return`(?:${eC}|${tC}+${eC}${e?`|${eC}${tC}+`:""})*?`}}function hK(n,e){if(!n)return[];const t=[];let i=!1,s=!1,r="";for(const o of n){switch(o){case e:if(!i&&!s){t.push(r),r="";continue}break;case"{":i=!0;break;case"}":i=!1;break;case"[":s=!0;break;case"]":s=!1;break}r+=o}return r&&t.push(r),t}function Xre(n){if(!n)return"";let e="";const t=hK(n,dK);if(t.every(i=>i===iS))e=".*";else{let i=!1;t.forEach((s,r)=>{if(s===iS){if(i)return;e+=uK(2,r===t.length-1)}else{let o=!1,a="",l=!1,c="";for(const d of s){if(d!=="}"&&o){a+=d;continue}if(l&&(d!=="]"||!c)){let u;d==="-"?u=d:(d==="^"||d==="!")&&!c?u="^":d===dK?u="":u=Ya(d),c+=u;continue}switch(d){case"{":o=!0;continue;case"[":l=!0;continue;case"}":{const h=`(?:${hK(a,",").map(f=>Xre(f)).join("|")})`;e+=h,o=!1,a="";break}case"]":{e+="["+c+"]",l=!1,c="";break}case"?":e+=tC;continue;case"*":e+=uK(1);continue;default:e+=Ya(d)}}r<t.length-1&&(t[r+1]!==iS||r+2<t.length)&&(e+=eC)}i=s===iS})}return e}const C6e=/^\*\*\/\*\.[\w\.-]+$/,L6e=/^\*\*\/([\w\.-]+)\/?$/,k6e=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,x6e=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,T6e=/^\*\*((\/[\w\.-]+)+)\/?$/,D6e=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,fK=new mw(1e4),gK=function(){return!1},Ic=function(){return null};function uO(n,e){if(!n)return Ic;let t;typeof n!="string"?t=n.pattern:t=n,t=t.trim();const i=`${t}_${!!e.trimForExclusions}`;let s=fK.get(i);if(s)return mK(s,n);let r;return C6e.test(t)?s=I6e(t.substr(4),t):(r=L6e.exec(NR(t,e)))?s=M6e(r[1],t):(e.trimForExclusions?x6e:k6e).test(t)?s=E6e(t,e):(r=T6e.exec(NR(t,e)))?s=pK(r[1].substr(1),t,!0):(r=D6e.exec(NR(t,e)))?s=pK(r[1],t,!1):s=N6e(t),fK.set(i,s),mK(s,n)}function mK(n,e){if(typeof e=="string")return n;const t=function(i,s){return U3(i,e.base,!Er)?n(m2(i.substr(e.base.length),bh),s):null};return t.allBasenames=n.allBasenames,t.allPaths=n.allPaths,t.basenames=n.basenames,t.patterns=n.patterns,t}function NR(n,e){return e.trimForExclusions&&n.endsWith("/**")?n.substr(0,n.length-2):n}function I6e(n,e){return function(t,i){return typeof t=="string"&&t.endsWith(n)?e:null}}function M6e(n,e){const t=`/${n}`,i=`\\${n}`,s=function(o,a){return typeof o!="string"?null:a?a===n?e:null:o===n||o.endsWith(t)||o.endsWith(i)?e:null},r=[n];return s.basenames=r,s.patterns=[e],s.allBasenames=r,s}function E6e(n,e){const t=Hre(n.slice(1,-1).split(",").map(a=>uO(a,e)).filter(a=>a!==Ic),n),i=t.length;if(!i)return Ic;if(i===1)return t[0];const s=function(a,l){for(let c=0,d=t.length;c<d;c++)if(t[c](a,l))return n;return null},r=t.find(a=>!!a.allBasenames);r&&(s.allBasenames=r.allBasenames);const o=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function pK(n,e,t){const i=bh===Gn.sep,s=i?n:n.replace(S6e,bh),r=bh+s,o=Gn.sep+n;let a;return t?a=function(l,c){return typeof l=="string"&&(l===s||l.endsWith(r)||!i&&(l===n||l.endsWith(o)))?e:null}:a=function(l,c){return typeof l=="string"&&(l===s||!i&&l===n)?e:null},a.allPaths=[(t?"*/":"./")+n],a}function N6e(n){try{const e=new RegExp(`^${Xre(n)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?n:null}}catch{return Ic}}function R6e(n,e,t){return!n||typeof e!="string"?!1:zre(n)(e,void 0,t)}function zre(n,e={}){if(!n)return gK;if(typeof n=="string"||W6e(n)){const t=uO(n,e);if(t===Ic)return gK;const i=function(s,r){return!!t(s,r)};return t.allBasenames&&(i.allBasenames=t.allBasenames),t.allPaths&&(i.allPaths=t.allPaths),i}return A6e(n,e)}function W6e(n){const e=n;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}function A6e(n,e){const t=Hre(Object.getOwnPropertyNames(n).map(a=>F6e(a,n[a],e)).filter(a=>a!==Ic)),i=t.length;if(!i)return Ic;if(!t.some(a=>!!a.requiresSiblings)){if(i===1)return t[0];const a=function(d,u){let h;for(let f=0,g=t.length;f<g;f++){const m=t[f](d,u);if(typeof m=="string")return m;q9(m)&&(h||(h=[]),h.push(m))}return h?(async()=>{for(const f of h){const g=await f;if(typeof g=="string")return g}return null})():null},l=t.find(d=>!!d.allBasenames);l&&(a.allBasenames=l.allBasenames);const c=t.reduce((d,u)=>u.allPaths?d.concat(u.allPaths):d,[]);return c.length&&(a.allPaths=c),a}const s=function(a,l,c){let d,u;for(let h=0,f=t.length;h<f;h++){const g=t[h];g.requiresSiblings&&c&&(l||(l=bie(a)),d||(d=l.substr(0,l.length-h5e(a).length)));const m=g(a,l,d,c);if(typeof m=="string")return m;q9(m)&&(u||(u=[]),u.push(m))}return u?(async()=>{for(const h of u){const f=await h;if(typeof f=="string")return f}return null})():null},r=t.find(a=>!!a.allBasenames);r&&(s.allBasenames=r.allBasenames);const o=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function F6e(n,e,t){if(e===!1)return Ic;const i=uO(n,t);if(i===Ic)return Ic;if(typeof e=="boolean")return i;if(e){const s=e.when;if(typeof s=="string"){const r=(o,a,l,c)=>{if(!c||!i(o,a))return null;const d=s.replace("$(basename)",()=>l),u=c(d);return q9(u)?u.then(h=>h?n:null):u?n:null};return r.requiresSiblings=!0,r}}return i}function Hre(n,e){const t=n.filter(a=>!!a.basenames);if(t.length<2)return n;const i=t.reduce((a,l)=>{const c=l.basenames;return c?a.concat(c):a},[]);let s;if(e){s=[];for(let a=0,l=i.length;a<l;a++)s.push(e)}else s=t.reduce((a,l)=>{const c=l.patterns;return c?a.concat(c):a},[]);const r=function(a,l){if(typeof a!="string")return null;if(!l){let d;for(d=a.length;d>0;d--){const u=a.charCodeAt(d-1);if(u===47||u===92)break}l=a.substr(d)}const c=i.indexOf(l);return c!==-1?s[c]:null};r.basenames=i,r.patterns=s,r.allBasenames=i;const o=n.filter(a=>!a.basenames);return o.push(r),o}function hO(n,e,t,i,s,r){if(Array.isArray(n)){let o=0;for(const a of n){const l=hO(a,e,t,i,s,r);if(l===10)return l;l>o&&(o=l)}return o}else{if(typeof n=="string")return i?n==="*"?5:n===t?10:0:0;if(n){const{language:o,pattern:a,scheme:l,hasAccessToAllModels:c,notebookType:d}=n;if(!i&&!c)return 0;d&&s&&(e=s);let u=0;if(l)if(l===e.scheme)u=10;else if(l==="*")u=5;else return 0;if(o)if(o===t)u=10;else if(o==="*")u=Math.max(u,5);else return 0;if(d)if(d===r)u=10;else if(d==="*"&&r!==void 0)u=Math.max(u,5);else return 0;if(a){let h;if(typeof a=="string"?h=a:h={...a,base:pie(a.base)},h===e.fsPath||R6e(h,e.fsPath))u=10;else return 0}return u}else return 0}}var Ure=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},iC=function(n,e){return function(t,i){e(t,i,n)}},Kn,LW;const mT=new it("hasWordHighlights",!1);function Yre(n,e,t,i){const s=n.ordered(e);return Qte(s.map(r=>()=>Promise.resolve(r.provideDocumentHighlights(e,t,i)).then(void 0,of)),bw).then(r=>{if(r){const o=new An;return o.set(e.uri,r),o}return new An})}function V6e(n,e,t,i,s,r){const o=n.ordered(e);return Qte(o.map(a=>()=>{const l=r.filter(c=>Jne(c)).filter(c=>hO(a.selector,c.uri,c.getLanguageId(),!0,void 0,void 0)>0);return Promise.resolve(a.provideMultiDocumentHighlights(e,t,l,s)).then(void 0,of)}),a=>a instanceof An&&a.size>0)}class fO{constructor(e,t,i){this._model=e,this._selection=t,this._wordSeparators=i,this._wordRange=this._getCurrentWordRange(e,t),this._result=null}get result(){return this._result||(this._result=Od(e=>this._compute(this._model,this._selection,this._wordSeparators,e))),this._result}_getCurrentWordRange(e,t){const i=e.getWordAtPosition(t.getPosition());return i?new te(t.startLineNumber,i.startColumn,t.startLineNumber,i.endColumn):null}isValid(e,t,i){const s=t.startLineNumber,r=t.startColumn,o=t.endColumn,a=this._getCurrentWordRange(e,t);let l=!!(this._wordRange&&this._wordRange.equalsRange(a));for(let c=0,d=i.length;!l&&c<d;c++){const u=i.getRange(c);u&&u.startLineNumber===s&&u.startColumn<=r&&u.endColumn>=o&&(l=!0)}return l}cancel(){this.result.cancel()}}class P6e extends fO{constructor(e,t,i,s){super(e,t,i),this._providers=s}_compute(e,t,i,s){return Yre(this._providers,e,t.getPosition(),s).then(r=>r||new An)}}class O6e extends fO{constructor(e,t,i,s,r){super(e,t,i),this._providers=s,this._otherModels=r}_compute(e,t,i,s){return V6e(this._providers,e,t.getPosition(),i,s,this._otherModels).then(r=>r||new An)}}class Kre extends fO{constructor(e,t,i,s,r){super(e,t,s),this._otherModels=r,this._selectionIsEmpty=t.isEmpty(),this._word=i}_compute(e,t,i,s){return Lb(250,s).then(()=>{const r=new An;let o;if(this._word?o=this._word:o=e.getWordAtPosition(t.getPosition()),!o)return new An;const a=[e,...this._otherModels];for(const l of a){if(l.isDisposed())continue;const d=l.findMatches(o.word,!0,!1,!0,i,!1).map(u=>({range:u.range,kind:Y_.Text}));d&&r.set(l.uri,d)}return r})}isValid(e,t,i){const s=t.isEmpty();return this._selectionIsEmpty!==s?!1:super.isValid(e,t,i)}}function Z6e(n,e,t,i,s){return n.has(e)?new P6e(e,t,s,n):new Kre(e,t,i,s,[])}function G6e(n,e,t,i,s,r){return n.has(e)?new O6e(e,t,s,n,r):new Kre(e,t,i,s,r)}wRe("_executeDocumentHighlights",async(n,e,t)=>{const i=n.get(ei),s=await Yre(i.documentHighlightProvider,e,t,Xs.None);return s?.get(e.uri)});let p1=Kn=class{constructor(e,t,i,s,r){this.toUnhook=new ct,this.workerRequestTokenId=0,this.workerRequestCompleted=!1,this.workerRequestValue=new An,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,this.editor=e,this.providers=t,this.multiDocumentProviders=i,this.codeEditorService=r,this._hasWordHighlights=mT.bindTo(s),this._ignorePositionChangeEvent=!1,this.occurrencesHighlight=this.editor.getOption(81),this.model=this.editor.getModel(),this.toUnhook.add(e.onDidChangeCursorPosition(o=>{this._ignorePositionChangeEvent||this.occurrencesHighlight!=="off"&&this._onPositionChanged(o)})),this.toUnhook.add(e.onDidFocusEditorText(o=>{this.occurrencesHighlight!=="off"&&(this.workerRequest||this._run())})),this.toUnhook.add(e.onDidChangeModelContent(o=>{this._stopAll()})),this.toUnhook.add(e.onDidChangeModel(o=>{!o.newModelUrl&&o.oldModelUrl?this._stopSingular():Kn.query&&this._run()})),this.toUnhook.add(e.onDidChangeConfiguration(o=>{const a=this.editor.getOption(81);this.occurrencesHighlight!==a&&(this.occurrencesHighlight=a,this._stopAll())})),this.decorations=this.editor.createDecorationsCollection(),this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,Kn.query&&this._run()}hasDecorations(){return this.decorations.length>0}restore(){this.occurrencesHighlight!=="off"&&this._run()}_getSortedHighlights(){return this.decorations.getRanges().sort(te.compareRangesUsingStarts)}moveNext(){const e=this._getSortedHighlights(),i=(e.findIndex(r=>r.containsPosition(this.editor.getPosition()))+1)%e.length,s=e[i];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(s.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(s);const r=this._getWord();if(r){const o=this.editor.getModel().getLineContent(s.startLineNumber);Mg(`${o}, ${i+1} of ${e.length} for '${r.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}moveBack(){const e=this._getSortedHighlights(),i=(e.findIndex(r=>r.containsPosition(this.editor.getPosition()))-1+e.length)%e.length,s=e[i];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(s.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(s);const r=this._getWord();if(r){const o=this.editor.getModel().getLineContent(s.startLineNumber);Mg(`${o}, ${i+1} of ${e.length} for '${r.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}_removeSingleDecorations(){if(!this.editor.hasModel())return;const e=Kn.storedDecorations.get(this.editor.getModel().uri);e&&(this.editor.removeDecorations(e),Kn.storedDecorations.delete(this.editor.getModel().uri),this.decorations.length>0&&(this.decorations.clear(),this._hasWordHighlights.set(!1)))}_removeAllDecorations(){const e=this.codeEditorService.listCodeEditors(),t=[];for(const i of e){if(!i.hasModel())continue;const s=Kn.storedDecorations.get(i.getModel().uri);if(!s)continue;i.removeDecorations(s),t.push(i.getModel().uri);const r=eu.get(i);r?.wordHighlighter&&r.wordHighlighter.decorations.length>0&&(r.wordHighlighter.decorations.clear(),r.wordHighlighter.workerRequest=null,r.wordHighlighter._hasWordHighlights.set(!1))}for(const i of t)Kn.storedDecorations.delete(i)}_stopSingular(){var e,t,i,s;this._removeSingleDecorations(),this.editor.hasTextFocus()&&(((e=this.editor.getModel())===null||e===void 0?void 0:e.uri.scheme)!==Mt.vscodeNotebookCell&&((i=(t=Kn.query)===null||t===void 0?void 0:t.modelInfo)===null||i===void 0?void 0:i.model.uri.scheme)!==Mt.vscodeNotebookCell?(Kn.query=null,this._run()):!((s=Kn.query)===null||s===void 0)&&s.modelInfo&&(Kn.query.modelInfo=null)),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_stopAll(){this._removeAllDecorations(),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_onPositionChanged(e){var t;if(this.occurrencesHighlight==="off"){this._stopAll();return}if(e.reason!==3&&((t=this.editor.getModel())===null||t===void 0?void 0:t.uri.scheme)!==Mt.vscodeNotebookCell){this._stopAll();return}this._run()}_getWord(){const e=this.editor.getSelection(),t=e.startLineNumber,i=e.startColumn;return this.model.isDisposed()?null:this.model.getWordAtPosition({lineNumber:t,column:i})}getOtherModelsToHighlight(e){if(!e)return[];if(e.uri.scheme===Mt.vscodeNotebookCell){const r=[],o=this.codeEditorService.listCodeEditors();for(const a of o){const l=a.getModel();l&&l!==e&&l.uri.scheme===Mt.vscodeNotebookCell&&r.push(l)}return r}const i=[],s=this.codeEditorService.listCodeEditors();for(const r of s){if(!g6e(r))continue;const o=r.getModel();o&&e===o.modified&&i.push(o.modified)}if(i.length)return i;if(this.occurrencesHighlight==="singleFile")return[];for(const r of s){const o=r.getModel();o&&o!==e&&i.push(o)}return i}_run(){var e;let t;if(this.editor.hasTextFocus()){const s=this.editor.getSelection();if(!s||s.startLineNumber!==s.endLineNumber){Kn.query=null,this._stopAll();return}const r=s.startColumn,o=s.endColumn,a=this._getWord();if(!a||a.startColumn>r||a.endColumn<o){Kn.query=null,this._stopAll();return}t=this.workerRequest&&this.workerRequest.isValid(this.model,s,this.decorations),Kn.query={modelInfo:{model:this.model,selection:s},word:a}}else if(!Kn.query)return;if(this.lastCursorPositionChangeTime=new Date().getTime(),t)this.workerRequestCompleted&&this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1,this._beginRenderDecorations());else{this._stopAll();const s=++this.workerRequestTokenId;this.workerRequestCompleted=!1;const r=this.getOtherModelsToHighlight(this.editor.getModel());if(!Kn.query.modelInfo||Kn.query.modelInfo.model.isDisposed())return;this.workerRequest=this.computeWithModel(Kn.query.modelInfo.model,Kn.query.modelInfo.selection,Kn.query.word,r),(e=this.workerRequest)===null||e===void 0||e.result.then(o=>{s===this.workerRequestTokenId&&(this.workerRequestCompleted=!0,this.workerRequestValue=o||[],this._beginRenderDecorations())},gi)}}computeWithModel(e,t,i,s){return s.length?G6e(this.multiDocumentProviders,e,t,i,this.editor.getOption(131),s):Z6e(this.providers,e,t,i,this.editor.getOption(131))}_beginRenderDecorations(){const e=new Date().getTime(),t=this.lastCursorPositionChangeTime+250;e>=t?(this.renderDecorationsTimer=-1,this.renderDecorations()):this.renderDecorationsTimer=setTimeout(()=>{this.renderDecorations()},t-e)}renderDecorations(){var e,t,i;this.renderDecorationsTimer=-1;const s=this.codeEditorService.listCodeEditors();for(const r of s){const o=eu.get(r);if(!o)continue;const a=[],l=(e=r.getModel())===null||e===void 0?void 0:e.uri;if(l&&this.workerRequestValue.has(l)){const c=Kn.storedDecorations.get(l),d=this.workerRequestValue.get(l);if(d)for(const h of d)h.range&&a.push({range:h.range,options:y6e(h.kind)});let u=[];r.changeDecorations(h=>{u=h.deltaDecorations(c??[],a)}),Kn.storedDecorations=Kn.storedDecorations.set(l,u),a.length>0&&((t=o.wordHighlighter)===null||t===void 0||t.decorations.set(a),(i=o.wordHighlighter)===null||i===void 0||i._hasWordHighlights.set(!0))}}}dispose(){this._stopSingular(),this.toUnhook.dispose()}};p1.storedDecorations=new An;p1.query=null;p1=Kn=Ure([iC(4,Vn)],p1);let eu=LW=class extends Le{static get(e){return e.getContribution(LW.ID)}constructor(e,t,i,s){super(),this._wordHighlighter=null;const r=()=>{e.hasModel()&&!e.getModel().isTooLargeForTokenization()&&(this._wordHighlighter=new p1(e,i.documentHighlightProvider,i.multiDocumentHighlightProvider,t,s))};this._register(e.onDidChangeModel(o=>{this._wordHighlighter&&(this._wordHighlighter.dispose(),this._wordHighlighter=null),r()})),r()}get wordHighlighter(){return this._wordHighlighter}saveViewState(){return!!(this._wordHighlighter&&this._wordHighlighter.hasDecorations())}moveNext(){var e;(e=this._wordHighlighter)===null||e===void 0||e.moveNext()}moveBack(){var e;(e=this._wordHighlighter)===null||e===void 0||e.moveBack()}restoreViewState(e){this._wordHighlighter&&e&&this._wordHighlighter.restore()}dispose(){this._wordHighlighter&&(this._wordHighlighter.dispose(),this._wordHighlighter=null),super.dispose()}};eu.ID="editor.contrib.wordHighlighter";eu=LW=Ure([iC(1,oi),iC(2,ei),iC(3,Vn)],eu);class jre extends to{constructor(e,t){super(t),this._isNext=e}run(e,t){const i=eu.get(t);i&&(this._isNext?i.moveNext():i.moveBack())}}class B6e extends jre{constructor(){super(!0,{id:"editor.action.wordHighlight.next",label:L("wordHighlight.next.label","Go to Next Symbol Highlight"),alias:"Go to Next Symbol Highlight",precondition:mT,kbOpts:{kbExpr:Re.editorTextFocus,primary:65,weight:100}})}}class X6e extends jre{constructor(){super(!1,{id:"editor.action.wordHighlight.prev",label:L("wordHighlight.previous.label","Go to Previous Symbol Highlight"),alias:"Go to Previous Symbol Highlight",precondition:mT,kbOpts:{kbExpr:Re.editorTextFocus,primary:1089,weight:100}})}}class z6e extends to{constructor(){super({id:"editor.action.wordHighlight.trigger",label:L("wordHighlight.trigger.label","Trigger Symbol Highlight"),alias:"Trigger Symbol Highlight",precondition:mT.toNegated(),kbOpts:{kbExpr:Re.editorTextFocus,primary:0,weight:100}})}run(e,t,i){const s=eu.get(t);s&&s.restoreViewState(!0)}}du(eu.ID,eu,0);rn(B6e);rn(X6e);rn(z6e);function H6e(n){for(let e=0,t=n.length;e<t;e+=4){const i=n[e+0],s=n[e+1],r=n[e+2],o=n[e+3];n[e+0]=o,n[e+1]=r,n[e+2]=s,n[e+3]=i}}function U6e(n){const e=new Uint8Array(n.buffer,n.byteOffset,n.length*4);return Bte()||H6e(e),R2.wrap(e)}function Jre(n){const e=new Uint32Array(Y6e(n));let t=0;if(e[t++]=n.id,n.type==="full")e[t++]=1,e[t++]=n.data.length,e.set(n.data,t),t+=n.data.length;else{e[t++]=2,e[t++]=n.deltas.length;for(const i of n.deltas)e[t++]=i.start,e[t++]=i.deleteCount,i.data?(e[t++]=i.data.length,e.set(i.data,t),t+=i.data.length):e[t++]=0}return U6e(e)}function Y6e(n){let e=0;if(e+=2,n.type==="full")e+=1+n.data.length;else{e+=1,e+=3*n.deltas.length;for(const t of n.deltas)t.data&&(e+=t.data.length)}return e}function gO(n){return n&&!!n.data}function K6e(n){return n&&Array.isArray(n.edits)}class j6e{constructor(e,t,i){this.provider=e,this.tokens=t,this.error=i}}function J6e(n,e){return n.has(e)}function $6e(n,e){const t=n.orderedGroups(e);return t.length>0?t[0]:[]}async function Q6e(n,e,t,i,s){const r=$6e(n,e),o=await Promise.all(r.map(async a=>{let l,c=null;try{l=await a.provideDocumentSemanticTokens(e,a===t?i:null,s)}catch(d){c=d,l=null}return(!l||!gO(l)&&!K6e(l))&&(l=null),new j6e(a,l,c)}));for(const a of o){if(a.error)throw a.error;if(a.tokens)return a}return o.length>0?o[0]:null}function q6e(n,e){const t=n.orderedGroups(e);return t.length>0?t[0]:null}class eXe{constructor(e,t){this.provider=e,this.tokens=t}}function tXe(n,e){return n.has(e)}function $re(n,e){const t=n.orderedGroups(e);return t.length>0?t[0]:[]}async function mO(n,e,t,i){const s=$re(n,e),r=await Promise.all(s.map(async o=>{let a;try{a=await o.provideDocumentRangeSemanticTokens(e,t,i)}catch(l){of(l),a=null}return(!a||!gO(a))&&(a=null),new eXe(o,a)}));for(const o of r)if(o.tokens)return o;return r.length>0?r[0]:null}cs.registerCommand("_provideDocumentSemanticTokensLegend",async(n,...e)=>{const[t]=e;Jr(t instanceof Ft);const i=n.get(Ws).getModel(t);if(!i)return;const{documentSemanticTokensProvider:s}=n.get(ei),r=q6e(s,i);return r?r[0].getLegend():n.get(eo).executeCommand("_provideDocumentRangeSemanticTokensLegend",t)});cs.registerCommand("_provideDocumentSemanticTokens",async(n,...e)=>{const[t]=e;Jr(t instanceof Ft);const i=n.get(Ws).getModel(t);if(!i)return;const{documentSemanticTokensProvider:s}=n.get(ei);if(!J6e(s,i))return n.get(eo).executeCommand("_provideDocumentRangeSemanticTokens",t,i.getFullModelRange());const r=await Q6e(s,i,null,null,Xs.None);if(!r)return;const{provider:o,tokens:a}=r;if(!a||!gO(a))return;const l=Jre({id:0,type:"full",data:a.data});return a.resultId&&o.releaseDocumentSemanticTokens(a.resultId),l});cs.registerCommand("_provideDocumentRangeSemanticTokensLegend",async(n,...e)=>{const[t,i]=e;Jr(t instanceof Ft);const s=n.get(Ws).getModel(t);if(!s)return;const{documentRangeSemanticTokensProvider:r}=n.get(ei),o=$re(r,s);if(o.length===0)return;if(o.length===1)return o[0].getLegend();if(!i||!te.isIRange(i))return console.warn("provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in"),o[0].getLegend();const a=await mO(r,s,te.lift(i),Xs.None);if(a)return a.provider.getLegend()});cs.registerCommand("_provideDocumentRangeSemanticTokens",async(n,...e)=>{const[t,i]=e;Jr(t instanceof Ft),Jr(te.isIRange(i));const s=n.get(Ws).getModel(t);if(!s)return;const{documentRangeSemanticTokensProvider:r}=n.get(ei),o=await mO(r,s,te.lift(i),Xs.None);if(!(!o||!o.tokens))return Jre({id:0,type:"full",data:o.tokens.data})});const Qre="editor.semanticHighlighting";function iXe(n,e,t){var i;const s=(i=t.getValue(Qre,{overrideIdentifier:n.getLanguageId(),resource:n.uri}))===null||i===void 0?void 0:i.enabled;return typeof s=="boolean"?s:e.getColorTheme().semanticHighlighting}class b_{static create(e,t){return new b_(e,new KL(t))}get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._endLineNumber}constructor(e,t){this._startLineNumber=e,this._tokens=t,this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}toString(){return this._tokens.toString(this._startLineNumber)}_updateEndLineNumber(){this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}isEmpty(){return this._tokens.isEmpty()}getLineTokens(e){return this._startLineNumber<=e&&e<=this._endLineNumber?this._tokens.getLineTokens(e-this._startLineNumber):null}getRange(){const e=this._tokens.getRange();return e&&new te(this._startLineNumber+e.startLineNumber,e.startColumn,this._startLineNumber+e.endLineNumber,e.endColumn)}removeTokens(e){const t=e.startLineNumber-this._startLineNumber,i=e.endLineNumber-this._startLineNumber;this._startLineNumber+=this._tokens.removeTokens(t,e.startColumn-1,i,e.endColumn-1),this._updateEndLineNumber()}split(e){const t=e.startLineNumber-this._startLineNumber,i=e.endLineNumber-this._startLineNumber,[s,r,o]=this._tokens.split(t,e.startColumn-1,i,e.endColumn-1);return[new b_(this._startLineNumber,s),new b_(this._startLineNumber+o,r)]}applyEdit(e,t){const[i,s,r]=Oh(t);this.acceptEdit(e,i,s,r,t.length>0?t.charCodeAt(0):0)}acceptEdit(e,t,i,s,r){this._acceptDeleteRange(e),this._acceptInsertText(new pe(e.startLineNumber,e.startColumn),t,i,s,r),this._updateEndLineNumber()}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;const t=e.startLineNumber-this._startLineNumber,i=e.endLineNumber-this._startLineNumber;if(i<0){const r=i-t;this._startLineNumber-=r;return}const s=this._tokens.getMaxDeltaLine();if(!(t>=s+1)){if(t<0&&i>=s+1){this._startLineNumber=0,this._tokens.clear();return}if(t<0){const r=-t;this._startLineNumber-=r,this._tokens.acceptDeleteRange(e.startColumn-1,0,0,i,e.endColumn-1)}else this._tokens.acceptDeleteRange(0,t,e.startColumn-1,i,e.endColumn-1)}}_acceptInsertText(e,t,i,s,r){if(t===0&&i===0)return;const o=e.lineNumber-this._startLineNumber;if(o<0){this._startLineNumber+=t;return}const a=this._tokens.getMaxDeltaLine();o>=a+1||this._tokens.acceptInsertText(o,e.column-1,t,i,s,r)}}class KL{constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){const t=[];for(let i=0;i<this._tokenCount;i++)t.push(`(${this._getDeltaLine(i)+e},${this._getStartCharacter(i)}-${this._getEndCharacter(i)})`);return`[${t.join(",")}]`}getMaxDeltaLine(){const e=this._getTokenCount();return e===0?-1:this._getDeltaLine(e-1)}getRange(){const e=this._getTokenCount();if(e===0)return null;const t=this._getStartCharacter(0),i=this._getDeltaLine(e-1),s=this._getEndCharacter(e-1);return new te(0,t+1,i,s+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return this._getTokenCount()===0}getLineTokens(e){let t=0,i=this._getTokenCount()-1;for(;t<i;){const s=t+Math.floor((i-t)/2),r=this._getDeltaLine(s);if(r<e)t=s+1;else if(r>e)i=s-1;else{let o=s;for(;o>t&&this._getDeltaLine(o-1)===e;)o--;let a=s;for(;a<i&&this._getDeltaLine(a+1)===e;)a++;return new bK(this._tokens.subarray(4*o,4*a+4))}}return this._getDeltaLine(t)===e?new bK(this._tokens.subarray(4*t,4*t+4)):null}clear(){this._tokenCount=0}removeTokens(e,t,i,s){const r=this._tokens,o=this._tokenCount;let a=0,l=!1,c=0;for(let d=0;d<o;d++){const u=4*d,h=r[u],f=r[u+1],g=r[u+2],m=r[u+3];if((h>e||h===e&&g>=t)&&(h<i||h===i&&f<=s))l=!0;else{if(a===0&&(c=h),l){const p=4*a;r[p]=h-c,r[p+1]=f,r[p+2]=g,r[p+3]=m}a++}}return this._tokenCount=a,c}split(e,t,i,s){const r=this._tokens,o=this._tokenCount,a=[],l=[];let c=a,d=0,u=0;for(let h=0;h<o;h++){const f=4*h,g=r[f],m=r[f+1],p=r[f+2],b=r[f+3];if(g>e||g===e&&p>=t){if(g<i||g===i&&m<=s)continue;c!==l&&(c=l,d=0,u=g)}c[d++]=g-u,c[d++]=m,c[d++]=p,c[d++]=b}return[new KL(new Uint32Array(a)),new KL(new Uint32Array(l)),u]}acceptDeleteRange(e,t,i,s,r){const o=this._tokens,a=this._tokenCount,l=s-t;let c=0,d=!1;for(let u=0;u<a;u++){const h=4*u;let f=o[h],g=o[h+1],m=o[h+2];const p=o[h+3];if(f<t||f===t&&m<=i){c++;continue}else if(f===t&&g<i)f===s&&m>r?m-=r-i:m=i;else if(f===t&&g===i)if(f===s&&m>r)m-=r-i;else{d=!0;continue}else if(f<s||f===s&&g<r)if(f===s&&m>r)f=t,g=i,m=g+(m-r);else{d=!0;continue}else if(f>s){if(l===0&&!d){c=a;break}f-=l}else if(f===s&&g>=r)e&&f===0&&(g+=e,m+=e),f-=l,g-=r-i,m-=r-i;else throw new Error("Not possible!");const b=4*c;o[b]=f,o[b+1]=g,o[b+2]=m,o[b+3]=p,c++}this._tokenCount=c}acceptInsertText(e,t,i,s,r,o){const a=i===0&&s===1&&(o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122),l=this._tokens,c=this._tokenCount;for(let d=0;d<c;d++){const u=4*d;let h=l[u],f=l[u+1],g=l[u+2];if(!(h<e||h===e&&g<t)){if(h===e&&g===t)if(a)g+=1;else continue;else if(h===e&&f<t&&t<g)i===0?g+=s:g=t;else{if(h===e&&f===t&&a)continue;if(h===e)if(h+=i,i===0)f+=s,g+=s;else{const m=g-f;f=r+(f-t),g=f+m}else h+=i}l[u]=h,l[u+1]=f,l[u+2]=g}}}}class bK{constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}}var nXe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},RR=function(n,e){return function(t,i){e(t,i,n)}};let kW=class{constructor(e,t,i,s){this._legend=e,this._themeService=t,this._languageService=i,this._logService=s,this._hasWarnedOverlappingTokens=!1,this._hasWarnedInvalidLengthTokens=!1,this._hasWarnedInvalidEditStart=!1,this._hashTable=new hd}getMetadata(e,t,i){const s=this._languageService.languageIdCodec.encodeLanguageId(i),r=this._hashTable.get(e,t,s);let o;if(r)o=r.metadata,this._logService.getLevel()===Os.Trace&&this._logService.trace(`SemanticTokensProviderStyling [CACHED] ${e} / ${t}: foreground ${oo.getForeground(o)}, fontStyle ${oo.getFontStyle(o).toString(2)}`);else{let a=this._legend.tokenTypes[e];const l=[];if(a){let c=t;for(let u=0;c>0&&u<this._legend.tokenModifiers.length;u++)c&1&&l.push(this._legend.tokenModifiers[u]),c=c>>1;c>0&&this._logService.getLevel()===Os.Trace&&(this._logService.trace(`SemanticTokensProviderStyling: unknown token modifier index: ${t.toString(2)} for legend: ${JSON.stringify(this._legend.tokenModifiers)}`),l.push("not-in-legend"));const d=this._themeService.getColorTheme().getTokenStyleMetadata(a,l,i);if(typeof d>"u")o=2147483647;else{if(o=0,typeof d.italic<"u"){const u=(d.italic?1:0)<<11;o|=u|1}if(typeof d.bold<"u"){const u=(d.bold?2:0)<<11;o|=u|2}if(typeof d.underline<"u"){const u=(d.underline?4:0)<<11;o|=u|4}if(typeof d.strikethrough<"u"){const u=(d.strikethrough?8:0)<<11;o|=u|8}if(d.foreground){const u=d.foreground<<15;o|=u|16}o===0&&(o=2147483647)}}else this._logService.getLevel()===Os.Trace&&this._logService.trace(`SemanticTokensProviderStyling: unknown token type index: ${e} for legend: ${JSON.stringify(this._legend.tokenTypes)}`),o=2147483647,a="not-in-legend";this._hashTable.add(e,t,s,o),this._logService.getLevel()===Os.Trace&&this._logService.trace(`SemanticTokensProviderStyling ${e} (${a}) / ${t} (${l.join(" ")}): foreground ${oo.getForeground(o)}, fontStyle ${oo.getFontStyle(o).toString(2)}`)}return o}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,this._logService.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}warnInvalidLengthSemanticTokens(e,t){this._hasWarnedInvalidLengthTokens||(this._hasWarnedInvalidLengthTokens=!0,this._logService.warn(`Semantic token with invalid length detected at lineNumber ${e}, column ${t}`))}warnInvalidEditStart(e,t,i,s,r){this._hasWarnedInvalidEditStart||(this._hasWarnedInvalidEditStart=!0,this._logService.warn(`Invalid semantic tokens edit detected (previousResultId: ${e}, resultId: ${t}) at edit #${i}: The provided start offset ${s} is outside the previous data (length ${r}).`))}};kW=nXe([RR(1,Xo),RR(2,Cs),RR(3,Yc)],kW);function sXe(n,e,t){const i=n.data,s=n.data.length/5|0,r=Math.max(Math.ceil(s/1024),400),o=[];let a=0,l=1,c=0;for(;a<s;){const d=a;let u=Math.min(d+r,s);if(u<s){let w=u;for(;w-1>d&&i[5*w]===0;)w--;if(w-1===d){let v=u;for(;v+1<s&&i[5*v]===0;)v++;u=v}else u=w}let h=new Uint32Array((u-d)*4),f=0,g=0,m=0,p=0;for(;a<u;){const w=5*a,v=i[w],_=i[w+1],y=l+v|0,C=v===0?c+_|0:_,S=i[w+2],k=C+S|0,I=i[w+3],T=i[w+4];if(k<=C)e.warnInvalidLengthSemanticTokens(y,C+1);else if(m===y&&p>C)e.warnOverlappingSemanticTokens(y,C+1);else{const D=e.getMetadata(I,T,t);D!==2147483647&&(g===0&&(g=y),h[f]=y-g,h[f+1]=C,h[f+2]=k,h[f+3]=D,f+=4,m=y,p=k)}l=y,c=C,a++}f!==h.length&&(h=h.subarray(0,f));const b=b_.create(g,h);o.push(b)}return o}class rXe{constructor(e,t,i,s){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=i,this.metadata=s,this.next=null}}class hd{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=hd._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<hd._SIZES.length?2/3*this._currentLength:0),this._elements=[],hd._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let i=0;i<t;i++)e[i]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,i){return this._hash2(this._hash2(e,t),i)%this._currentLength}get(e,t,i){const s=this._hashFunc(e,t,i);let r=this._elements[s];for(;r;){if(r.tokenTypeIndex===e&&r.tokenModifierSet===t&&r.languageId===i)return r;r=r.next}return null}add(e,t,i,s){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){const r=this._elements;this._currentLengthIndex++,this._currentLength=hd._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<hd._SIZES.length?2/3*this._currentLength:0),this._elements=[],hd._nullOutEntries(this._elements,this._currentLength);for(const o of r){let a=o;for(;a;){const l=a.next;a.next=null,this._add(a),a=l}}}this._add(new rXe(e,t,i,s))}_add(e){const t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}}hd._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];const qre=ri("semanticTokensStylingService");var oXe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},sv=function(n,e){return function(t,i){e(t,i,n)}};let b1=class extends Le{constructor(e,t,i,s,r,o){super(),this._semanticTokensStylingService=t,this._themeService=i,this._configurationService=s,this._editor=e,this._provider=o.documentRangeSemanticTokensProvider,this._debounceInformation=r.for(this._provider,"DocumentRangeSemanticTokens",{min:0,max:0}),this._tokenizeViewport=this._register(new as(()=>this._tokenizeViewportNow(),100)),this._outstandingRequests=[];const a=()=>{this._editor.hasModel()&&this._tokenizeViewport.schedule(this._debounceInformation.get(this._editor.getModel()))};this._register(this._editor.onDidScrollChange(()=>{a()})),this._register(this._editor.onDidChangeModel(()=>{this._cancelAll(),a()})),this._register(this._editor.onDidChangeModelContent(l=>{this._cancelAll(),a()})),this._register(this._provider.onDidChange(()=>{this._cancelAll(),a()})),this._register(this._configurationService.onDidChangeConfiguration(l=>{l.affectsConfiguration(Qre)&&(this._cancelAll(),a())})),this._register(this._themeService.onDidColorThemeChange(()=>{this._cancelAll(),a()})),a()}_cancelAll(){for(const e of this._outstandingRequests)e.cancel();this._outstandingRequests=[]}_removeOutstandingRequest(e){for(let t=0,i=this._outstandingRequests.length;t<i;t++)if(this._outstandingRequests[t]===e){this._outstandingRequests.splice(t,1);return}}_tokenizeViewportNow(){if(!this._editor.hasModel())return;const e=this._editor.getModel();if(e.tokenization.hasCompleteSemanticTokens())return;if(!iXe(e,this._themeService,this._configurationService)){e.tokenization.hasSomeSemanticTokens()&&e.tokenization.setSemanticTokens(null,!1);return}if(!tXe(this._provider,e)){e.tokenization.hasSomeSemanticTokens()&&e.tokenization.setSemanticTokens(null,!1);return}const t=this._editor.getVisibleRangesPlusViewportAboveBelow();this._outstandingRequests=this._outstandingRequests.concat(t.map(i=>this._requestRange(e,i)))}_requestRange(e,t){const i=e.getVersionId(),s=Od(o=>Promise.resolve(mO(this._provider,e,t,o))),r=new Hc(!1);return s.then(o=>{if(this._debounceInformation.update(e,r.elapsed()),!o||!o.tokens||e.isDisposed()||e.getVersionId()!==i)return;const{provider:a,tokens:l}=o,c=this._semanticTokensStylingService.getStyling(a);e.tokenization.setPartialSemanticTokens(t,sXe(l,c,e.getLanguageId()))}).then(()=>this._removeOutstandingRequest(s),()=>this._removeOutstandingRequest(s)),s}};b1.ID="editor.contrib.viewportSemanticTokens";b1=oXe([sv(1,qre),sv(2,Xo),sv(3,gn),sv(4,gT),sv(5,ei)],b1);du(b1.ID,b1,1);function xW(n,e){return!!n[e]}class WR{constructor(e,t){this.target=e.target,this.isLeftClick=e.event.leftButton,this.isMiddleClick=e.event.middleButton,this.isRightClick=e.event.rightButton,this.hasTriggerModifier=xW(e.event,t.triggerModifier),this.hasSideBySideModifier=xW(e.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=e.event.detail<=1}}class vK{constructor(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=xW(e,t.triggerModifier)}}class nS{constructor(e,t,i,s){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=i,this.triggerSideBySideModifier=s}equals(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}}function _K(n){return n==="altKey"?jt?new nS(57,"metaKey",6,"altKey"):new nS(5,"ctrlKey",6,"altKey"):jt?new nS(6,"altKey",57,"metaKey"):new nS(6,"altKey",5,"ctrlKey")}class aXe extends Le{constructor(e,t){var i;super(),this._onMouseMoveOrRelevantKeyDown=this._register(new ue),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new ue),this.onExecute=this._onExecute.event,this._onCancel=this._register(new ue),this.onCancel=this._onCancel.event,this._editor=e,this._extractLineNumberFromMouseEvent=(i=t?.extractLineNumberFromMouseEvent)!==null&&i!==void 0?i:s=>s.target.position?s.target.position.lineNumber:0,this._opts=_K(this._editor.getOption(78)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration(s=>{if(s.hasChanged(78)){const r=_K(this._editor.getOption(78));if(this._opts.equals(r))return;this._opts=r,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}})),this._register(this._editor.onMouseMove(s=>this._onEditorMouseMove(new WR(s,this._opts)))),this._register(this._editor.onMouseDown(s=>this._onEditorMouseDown(new WR(s,this._opts)))),this._register(this._editor.onMouseUp(s=>this._onEditorMouseUp(new WR(s,this._opts)))),this._register(this._editor.onKeyDown(s=>this._onEditorKeyDown(new vK(s,this._opts)))),this._register(this._editor.onKeyUp(s=>this._onEditorKeyUp(new vK(s,this._opts)))),this._register(this._editor.onMouseDrag(()=>this._resetHandler())),this._register(this._editor.onDidChangeCursorSelection(s=>this._onDidChangeCursorSelection(s))),this._register(this._editor.onDidChangeModel(s=>this._resetHandler())),this._register(this._editor.onDidChangeModelContent(()=>this._resetHandler())),this._register(this._editor.onDidScrollChange(s=>{(s.scrollTopChanged||s.scrollLeftChanged)&&this._resetHandler()}))}_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}_onEditorMouseDown(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=this._extractLineNumberFromMouseEvent(e)}_onEditorMouseUp(e){const t=this._extractLineNumberFromMouseEvent(e);this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}class lXe{constructor(e,t){this._link=e,this._provider=t}toJSON(){return{range:this.range,url:this.url,tooltip:this.tooltip}}get range(){return this._link.range}get url(){return this._link.url}get tooltip(){return this._link.tooltip}async resolve(e){return this._link.url?this._link.url:typeof this._provider.resolveLink=="function"?Promise.resolve(this._provider.resolveLink(this._link,e)).then(t=>(this._link=t||this._link,this._link.url?this.resolve(e):Promise.reject(new Error("missing")))):Promise.reject(new Error("missing"))}}class jL{constructor(e){this._disposables=new ct;let t=[];for(const[i,s]of e){const r=i.links.map(o=>new lXe(o,s));t=jL._union(t,r),SV(i)&&this._disposables.add(i)}this.links=t}dispose(){this._disposables.dispose(),this.links.length=0}static _union(e,t){const i=[];let s,r,o,a;for(s=0,o=0,r=e.length,a=t.length;s<r&&o<a;){const l=e[s],c=t[o];if(te.areIntersectingOrTouching(l.range,c.range)){s++;continue}te.compareRangesUsingStarts(l.range,c.range)<0?(i.push(l),s++):(i.push(c),o++)}for(;s<r;s++)i.push(e[s]);for(;o<a;o++)i.push(t[o]);return i}}function eoe(n,e,t){const i=[],s=n.ordered(e).reverse().map((r,o)=>Promise.resolve(r.provideLinks(e,t)).then(a=>{a&&(i[o]=[a,r])},of));return Promise.all(s).then(()=>{const r=new jL(Wg(i));return t.isCancellationRequested?(r.dispose(),new jL([])):r})}cs.registerCommand("_executeLinkProvider",async(n,...e)=>{let[t,i]=e;Jr(t instanceof Ft),typeof i!="number"&&(i=0);const{linkProvider:s}=n.get(ei),r=n.get(Ws).getModel(t);if(!r)return[];const o=await eoe(s,r,Xs.None);if(!o)return[];for(let l=0;l<Math.min(i,o.links.length);l++)await o.links[l].resolve(Xs.None);const a=o.links.slice(0);return o.dispose(),a});var cXe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},sS=function(n,e){return function(t,i){e(t,i,n)}},TW;let Xb=TW=class extends Le{static get(e){return e.getContribution(TW.ID)}constructor(e,t,i,s,r){super(),this.editor=e,this.openerService=t,this.notificationService=i,this.languageFeaturesService=s,this.providers=this.languageFeaturesService.linkProvider,this.debounceInformation=r.for(this.providers,"Links",{min:0,max:0}),this.computeLinks=this._register(new as(()=>this.computeLinksNow(),1e3)),this.computePromise=null,this.activeLinksList=null,this.currentOccurrences={},this.activeLinkDecorationId=null;const o=this._register(new aXe(e));this._register(o.onMouseMoveOrRelevantKeyDown(([a,l])=>{this._onEditorMouseMove(a,l)})),this._register(o.onExecute(a=>{this.onEditorMouseUp(a)})),this._register(o.onCancel(a=>{this.cleanUpActiveLinkDecoration()})),this._register(e.onDidChangeConfiguration(a=>{a.hasChanged(71)&&(this.updateDecorations([]),this.stop(),this.computeLinks.schedule(0))})),this._register(e.onDidChangeModelContent(a=>{this.editor.hasModel()&&this.computeLinks.schedule(this.debounceInformation.get(this.editor.getModel()))})),this._register(e.onDidChangeModel(a=>{this.currentOccurrences={},this.activeLinkDecorationId=null,this.stop(),this.computeLinks.schedule(0)})),this._register(e.onDidChangeModelLanguage(a=>{this.stop(),this.computeLinks.schedule(0)})),this._register(this.providers.onDidChange(a=>{this.stop(),this.computeLinks.schedule(0)})),this.computeLinks.schedule(0)}async computeLinksNow(){if(!this.editor.hasModel()||!this.editor.getOption(71))return;const e=this.editor.getModel();if(!e.isTooLargeForSyncing()&&this.providers.has(e)){this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=Od(t=>eoe(this.providers,e,t));try{const t=new Hc(!1);if(this.activeLinksList=await this.computePromise,this.debounceInformation.update(e,t.elapsed()),e.isDisposed())return;this.updateDecorations(this.activeLinksList.links)}catch(t){gi(t)}finally{this.computePromise=null}}}updateDecorations(e){const t=this.editor.getOption(78)==="altKey",i=[],s=Object.keys(this.currentOccurrences);for(const o of s){const a=this.currentOccurrences[o];i.push(a.decorationId)}const r=[];if(e)for(const o of e)r.push(Xp.decoration(o,t));this.editor.changeDecorations(o=>{const a=o.deltaDecorations(i,r);this.currentOccurrences={},this.activeLinkDecorationId=null;for(let l=0,c=a.length;l<c;l++){const d=new Xp(e[l],a[l]);this.currentOccurrences[d.decorationId]=d}})}_onEditorMouseMove(e,t){const i=this.editor.getOption(78)==="altKey";if(this.isEnabled(e,t)){this.cleanUpActiveLinkDecoration();const s=this.getLinkOccurrence(e.target.position);s&&this.editor.changeDecorations(r=>{s.activate(r,i),this.activeLinkDecorationId=s.decorationId})}else this.cleanUpActiveLinkDecoration()}cleanUpActiveLinkDecoration(){const e=this.editor.getOption(78)==="altKey";if(this.activeLinkDecorationId){const t=this.currentOccurrences[this.activeLinkDecorationId];t&&this.editor.changeDecorations(i=>{t.deactivate(i,e)}),this.activeLinkDecorationId=null}}onEditorMouseUp(e){if(!this.isEnabled(e))return;const t=this.getLinkOccurrence(e.target.position);t&&this.openLinkOccurrence(t,e.hasSideBySideModifier,!0)}openLinkOccurrence(e,t,i=!1){if(!this.openerService)return;const{link:s}=e;s.resolve(Xs.None).then(r=>{if(typeof r=="string"&&this.editor.hasModel()){const o=this.editor.getModel().uri;if(o.scheme===Mt.file&&r.startsWith(`${Mt.file}:`)){const a=Ft.parse(r);if(a.scheme===Mt.file){const l=tc(a);let c=null;l.startsWith("/./")||l.startsWith("\\.\\")?c=`.${l.substr(1)}`:(l.startsWith("//./")||l.startsWith("\\\\.\\"))&&(c=`.${l.substr(2)}`),c&&(r=cPe(o,c))}}}return this.openerService.open(r,{openToSide:t,fromUserGesture:i,allowContributedOpeners:!0,allowCommands:!0,fromWorkspace:!0})},r=>{const o=r instanceof Error?r.message:r;o==="invalid"?this.notificationService.warn(L("invalid.url","Failed to open this link because it is not well-formed: {0}",s.url.toString())):o==="missing"?this.notificationService.warn(L("missing.url","Failed to open this link because its target is missing.")):gi(r)})}getLinkOccurrence(e){if(!this.editor.hasModel()||!e)return null;const t=this.editor.getModel().getDecorationsInRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},0,!0);for(const i of t){const s=this.currentOccurrences[i.id];if(s)return s}return null}isEnabled(e,t){return!!(e.target.type===6&&(e.hasTriggerModifier||t&&t.keyCodeIsTriggerKey))}stop(){var e;this.computeLinks.cancel(),this.activeLinksList&&((e=this.activeLinksList)===null||e===void 0||e.dispose(),this.activeLinksList=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){super.dispose(),this.stop()}};Xb.ID="editor.linkDetector";Xb=TW=cXe([sS(1,pm),sS(2,Rr),sS(3,ei),sS(4,gT)],Xb);const wK={general:Qt.register({description:"detected-link",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),active:Qt.register({description:"detected-link-active",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"})};class Xp{static decoration(e,t){return{range:e.range,options:Xp._getOptions(e,t,!1)}}static _getOptions(e,t,i){const s={...i?wK.active:wK.general};return s.hoverMessage=dXe(e,t),s}constructor(e,t){this.link=e,this.decorationId=t}activate(e,t){e.changeDecorationOptions(this.decorationId,Xp._getOptions(this.link,t,!0))}deactivate(e,t){e.changeDecorationOptions(this.decorationId,Xp._getOptions(this.link,t,!1))}}function dXe(n,e){const t=n.url&&/^command:/i.test(n.url.toString()),i=n.tooltip?n.tooltip:t?L("links.navigate.executeCmd","Execute command"):L("links.navigate.follow","Follow link"),s=e?jt?L("links.navigate.kb.meta.mac","cmd + click"):L("links.navigate.kb.meta","ctrl + click"):jt?L("links.navigate.kb.alt.mac","option + click"):L("links.navigate.kb.alt","alt + click");if(n.url){let r="";if(/^command:/i.test(n.url.toString())){const a=n.url.toString().match(/^command:([^?#]+)/);if(a){const l=a[1];r=L("tooltip.explanation","Execute command {0}",l)}}return new VL("",!0).appendLink(n.url.toString(!0).replace(/ /g,"%20"),i,r).appendMarkdown(` (${s})`)}else return new VL().appendText(`${i} (${s})`)}class uXe extends to{constructor(){super({id:"editor.action.openLink",label:L("label","Open Link"),alias:"Open Link",precondition:void 0})}run(e,t){const i=Xb.get(t);if(!i||!t.hasModel())return;const s=t.getSelections();for(const r of s){const o=i.getLinkOccurrence(r.getEndPosition());o&&i.openLinkOccurrence(o,!1)}}}du(Xb.ID,Xb,1);rn(uXe);var DW;(function(n){n[n.Unknown=0]="Unknown",n[n.Disabled=1]="Disabled",n[n.Enabled=2]="Enabled"})(DW||(DW={}));var IW;(function(n){n[n.Invoke=1]="Invoke",n[n.Auto=2]="Auto"})(IW||(IW={}));var MW;(function(n){n[n.None=0]="None",n[n.KeepWhitespace=1]="KeepWhitespace",n[n.InsertAsSnippet=4]="InsertAsSnippet"})(MW||(MW={}));var EW;(function(n){n[n.Method=0]="Method",n[n.Function=1]="Function",n[n.Constructor=2]="Constructor",n[n.Field=3]="Field",n[n.Variable=4]="Variable",n[n.Class=5]="Class",n[n.Struct=6]="Struct",n[n.Interface=7]="Interface",n[n.Module=8]="Module",n[n.Property=9]="Property",n[n.Event=10]="Event",n[n.Operator=11]="Operator",n[n.Unit=12]="Unit",n[n.Value=13]="Value",n[n.Constant=14]="Constant",n[n.Enum=15]="Enum",n[n.EnumMember=16]="EnumMember",n[n.Keyword=17]="Keyword",n[n.Text=18]="Text",n[n.Color=19]="Color",n[n.File=20]="File",n[n.Reference=21]="Reference",n[n.Customcolor=22]="Customcolor",n[n.Folder=23]="Folder",n[n.TypeParameter=24]="TypeParameter",n[n.User=25]="User",n[n.Issue=26]="Issue",n[n.Snippet=27]="Snippet"})(EW||(EW={}));var NW;(function(n){n[n.Deprecated=1]="Deprecated"})(NW||(NW={}));var RW;(function(n){n[n.Invoke=0]="Invoke",n[n.TriggerCharacter=1]="TriggerCharacter",n[n.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(RW||(RW={}));var WW;(function(n){n[n.EXACT=0]="EXACT",n[n.ABOVE=1]="ABOVE",n[n.BELOW=2]="BELOW"})(WW||(WW={}));var AW;(function(n){n[n.NotSet=0]="NotSet",n[n.ContentFlush=1]="ContentFlush",n[n.RecoverFromMarkers=2]="RecoverFromMarkers",n[n.Explicit=3]="Explicit",n[n.Paste=4]="Paste",n[n.Undo=5]="Undo",n[n.Redo=6]="Redo"})(AW||(AW={}));var FW;(function(n){n[n.LF=1]="LF",n[n.CRLF=2]="CRLF"})(FW||(FW={}));var VW;(function(n){n[n.Text=0]="Text",n[n.Read=1]="Read",n[n.Write=2]="Write"})(VW||(VW={}));var PW;(function(n){n[n.None=0]="None",n[n.Keep=1]="Keep",n[n.Brackets=2]="Brackets",n[n.Advanced=3]="Advanced",n[n.Full=4]="Full"})(PW||(PW={}));var OW;(function(n){n[n.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",n[n.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",n[n.accessibilitySupport=2]="accessibilitySupport",n[n.accessibilityPageSize=3]="accessibilityPageSize",n[n.ariaLabel=4]="ariaLabel",n[n.ariaRequired=5]="ariaRequired",n[n.autoClosingBrackets=6]="autoClosingBrackets",n[n.autoClosingComments=7]="autoClosingComments",n[n.screenReaderAnnounceInlineSuggestion=8]="screenReaderAnnounceInlineSuggestion",n[n.autoClosingDelete=9]="autoClosingDelete",n[n.autoClosingOvertype=10]="autoClosingOvertype",n[n.autoClosingQuotes=11]="autoClosingQuotes",n[n.autoIndent=12]="autoIndent",n[n.automaticLayout=13]="automaticLayout",n[n.autoSurround=14]="autoSurround",n[n.bracketPairColorization=15]="bracketPairColorization",n[n.guides=16]="guides",n[n.codeLens=17]="codeLens",n[n.codeLensFontFamily=18]="codeLensFontFamily",n[n.codeLensFontSize=19]="codeLensFontSize",n[n.colorDecorators=20]="colorDecorators",n[n.colorDecoratorsLimit=21]="colorDecoratorsLimit",n[n.columnSelection=22]="columnSelection",n[n.comments=23]="comments",n[n.contextmenu=24]="contextmenu",n[n.copyWithSyntaxHighlighting=25]="copyWithSyntaxHighlighting",n[n.cursorBlinking=26]="cursorBlinking",n[n.cursorSmoothCaretAnimation=27]="cursorSmoothCaretAnimation",n[n.cursorStyle=28]="cursorStyle",n[n.cursorSurroundingLines=29]="cursorSurroundingLines",n[n.cursorSurroundingLinesStyle=30]="cursorSurroundingLinesStyle",n[n.cursorWidth=31]="cursorWidth",n[n.disableLayerHinting=32]="disableLayerHinting",n[n.disableMonospaceOptimizations=33]="disableMonospaceOptimizations",n[n.domReadOnly=34]="domReadOnly",n[n.dragAndDrop=35]="dragAndDrop",n[n.dropIntoEditor=36]="dropIntoEditor",n[n.emptySelectionClipboard=37]="emptySelectionClipboard",n[n.experimentalWhitespaceRendering=38]="experimentalWhitespaceRendering",n[n.extraEditorClassName=39]="extraEditorClassName",n[n.fastScrollSensitivity=40]="fastScrollSensitivity",n[n.find=41]="find",n[n.fixedOverflowWidgets=42]="fixedOverflowWidgets",n[n.folding=43]="folding",n[n.foldingStrategy=44]="foldingStrategy",n[n.foldingHighlight=45]="foldingHighlight",n[n.foldingImportsByDefault=46]="foldingImportsByDefault",n[n.foldingMaximumRegions=47]="foldingMaximumRegions",n[n.unfoldOnClickAfterEndOfLine=48]="unfoldOnClickAfterEndOfLine",n[n.fontFamily=49]="fontFamily",n[n.fontInfo=50]="fontInfo",n[n.fontLigatures=51]="fontLigatures",n[n.fontSize=52]="fontSize",n[n.fontWeight=53]="fontWeight",n[n.fontVariations=54]="fontVariations",n[n.formatOnPaste=55]="formatOnPaste",n[n.formatOnType=56]="formatOnType",n[n.glyphMargin=57]="glyphMargin",n[n.gotoLocation=58]="gotoLocation",n[n.hideCursorInOverviewRuler=59]="hideCursorInOverviewRuler",n[n.hover=60]="hover",n[n.inDiffEditor=61]="inDiffEditor",n[n.inlineSuggest=62]="inlineSuggest",n[n.inlineEdit=63]="inlineEdit",n[n.letterSpacing=64]="letterSpacing",n[n.lightbulb=65]="lightbulb",n[n.lineDecorationsWidth=66]="lineDecorationsWidth",n[n.lineHeight=67]="lineHeight",n[n.lineNumbers=68]="lineNumbers",n[n.lineNumbersMinChars=69]="lineNumbersMinChars",n[n.linkedEditing=70]="linkedEditing",n[n.links=71]="links",n[n.matchBrackets=72]="matchBrackets",n[n.minimap=73]="minimap",n[n.mouseStyle=74]="mouseStyle",n[n.mouseWheelScrollSensitivity=75]="mouseWheelScrollSensitivity",n[n.mouseWheelZoom=76]="mouseWheelZoom",n[n.multiCursorMergeOverlapping=77]="multiCursorMergeOverlapping",n[n.multiCursorModifier=78]="multiCursorModifier",n[n.multiCursorPaste=79]="multiCursorPaste",n[n.multiCursorLimit=80]="multiCursorLimit",n[n.occurrencesHighlight=81]="occurrencesHighlight",n[n.overviewRulerBorder=82]="overviewRulerBorder",n[n.overviewRulerLanes=83]="overviewRulerLanes",n[n.padding=84]="padding",n[n.pasteAs=85]="pasteAs",n[n.parameterHints=86]="parameterHints",n[n.peekWidgetDefaultFocus=87]="peekWidgetDefaultFocus",n[n.definitionLinkOpensInPeek=88]="definitionLinkOpensInPeek",n[n.quickSuggestions=89]="quickSuggestions",n[n.quickSuggestionsDelay=90]="quickSuggestionsDelay",n[n.readOnly=91]="readOnly",n[n.readOnlyMessage=92]="readOnlyMessage",n[n.renameOnType=93]="renameOnType",n[n.renderControlCharacters=94]="renderControlCharacters",n[n.renderFinalNewline=95]="renderFinalNewline",n[n.renderLineHighlight=96]="renderLineHighlight",n[n.renderLineHighlightOnlyWhenFocus=97]="renderLineHighlightOnlyWhenFocus",n[n.renderValidationDecorations=98]="renderValidationDecorations",n[n.renderWhitespace=99]="renderWhitespace",n[n.revealHorizontalRightPadding=100]="revealHorizontalRightPadding",n[n.roundedSelection=101]="roundedSelection",n[n.rulers=102]="rulers",n[n.scrollbar=103]="scrollbar",n[n.scrollBeyondLastColumn=104]="scrollBeyondLastColumn",n[n.scrollBeyondLastLine=105]="scrollBeyondLastLine",n[n.scrollPredominantAxis=106]="scrollPredominantAxis",n[n.selectionClipboard=107]="selectionClipboard",n[n.selectionHighlight=108]="selectionHighlight",n[n.selectOnLineNumbers=109]="selectOnLineNumbers",n[n.showFoldingControls=110]="showFoldingControls",n[n.showUnused=111]="showUnused",n[n.snippetSuggestions=112]="snippetSuggestions",n[n.smartSelect=113]="smartSelect",n[n.smoothScrolling=114]="smoothScrolling",n[n.stickyScroll=115]="stickyScroll",n[n.stickyTabStops=116]="stickyTabStops",n[n.stopRenderingLineAfter=117]="stopRenderingLineAfter",n[n.suggest=118]="suggest",n[n.suggestFontSize=119]="suggestFontSize",n[n.suggestLineHeight=120]="suggestLineHeight",n[n.suggestOnTriggerCharacters=121]="suggestOnTriggerCharacters",n[n.suggestSelection=122]="suggestSelection",n[n.tabCompletion=123]="tabCompletion",n[n.tabIndex=124]="tabIndex",n[n.unicodeHighlighting=125]="unicodeHighlighting",n[n.unusualLineTerminators=126]="unusualLineTerminators",n[n.useShadowDOM=127]="useShadowDOM",n[n.useTabStops=128]="useTabStops",n[n.wordBreak=129]="wordBreak",n[n.wordSegmenterLocales=130]="wordSegmenterLocales",n[n.wordSeparators=131]="wordSeparators",n[n.wordWrap=132]="wordWrap",n[n.wordWrapBreakAfterCharacters=133]="wordWrapBreakAfterCharacters",n[n.wordWrapBreakBeforeCharacters=134]="wordWrapBreakBeforeCharacters",n[n.wordWrapColumn=135]="wordWrapColumn",n[n.wordWrapOverride1=136]="wordWrapOverride1",n[n.wordWrapOverride2=137]="wordWrapOverride2",n[n.wrappingIndent=138]="wrappingIndent",n[n.wrappingStrategy=139]="wrappingStrategy",n[n.showDeprecated=140]="showDeprecated",n[n.inlayHints=141]="inlayHints",n[n.editorClassName=142]="editorClassName",n[n.pixelRatio=143]="pixelRatio",n[n.tabFocusMode=144]="tabFocusMode",n[n.layoutInfo=145]="layoutInfo",n[n.wrappingInfo=146]="wrappingInfo",n[n.defaultColorDecorators=147]="defaultColorDecorators",n[n.colorDecoratorsActivatedOn=148]="colorDecoratorsActivatedOn",n[n.inlineCompletionsAccessibilityVerbose=149]="inlineCompletionsAccessibilityVerbose"})(OW||(OW={}));var ZW;(function(n){n[n.TextDefined=0]="TextDefined",n[n.LF=1]="LF",n[n.CRLF=2]="CRLF"})(ZW||(ZW={}));var GW;(function(n){n[n.LF=0]="LF",n[n.CRLF=1]="CRLF"})(GW||(GW={}));var BW;(function(n){n[n.Left=1]="Left",n[n.Center=2]="Center",n[n.Right=3]="Right"})(BW||(BW={}));var XW;(function(n){n[n.Increase=0]="Increase",n[n.Decrease=1]="Decrease"})(XW||(XW={}));var zW;(function(n){n[n.None=0]="None",n[n.Indent=1]="Indent",n[n.IndentOutdent=2]="IndentOutdent",n[n.Outdent=3]="Outdent"})(zW||(zW={}));var HW;(function(n){n[n.Both=0]="Both",n[n.Right=1]="Right",n[n.Left=2]="Left",n[n.None=3]="None"})(HW||(HW={}));var UW;(function(n){n[n.Type=1]="Type",n[n.Parameter=2]="Parameter"})(UW||(UW={}));var YW;(function(n){n[n.Automatic=0]="Automatic",n[n.Explicit=1]="Explicit"})(YW||(YW={}));var KW;(function(n){n[n.Invoke=0]="Invoke",n[n.Automatic=1]="Automatic"})(KW||(KW={}));var jW;(function(n){n[n.DependsOnKbLayout=-1]="DependsOnKbLayout",n[n.Unknown=0]="Unknown",n[n.Backspace=1]="Backspace",n[n.Tab=2]="Tab",n[n.Enter=3]="Enter",n[n.Shift=4]="Shift",n[n.Ctrl=5]="Ctrl",n[n.Alt=6]="Alt",n[n.PauseBreak=7]="PauseBreak",n[n.CapsLock=8]="CapsLock",n[n.Escape=9]="Escape",n[n.Space=10]="Space",n[n.PageUp=11]="PageUp",n[n.PageDown=12]="PageDown",n[n.End=13]="End",n[n.Home=14]="Home",n[n.LeftArrow=15]="LeftArrow",n[n.UpArrow=16]="UpArrow",n[n.RightArrow=17]="RightArrow",n[n.DownArrow=18]="DownArrow",n[n.Insert=19]="Insert",n[n.Delete=20]="Delete",n[n.Digit0=21]="Digit0",n[n.Digit1=22]="Digit1",n[n.Digit2=23]="Digit2",n[n.Digit3=24]="Digit3",n[n.Digit4=25]="Digit4",n[n.Digit5=26]="Digit5",n[n.Digit6=27]="Digit6",n[n.Digit7=28]="Digit7",n[n.Digit8=29]="Digit8",n[n.Digit9=30]="Digit9",n[n.KeyA=31]="KeyA",n[n.KeyB=32]="KeyB",n[n.KeyC=33]="KeyC",n[n.KeyD=34]="KeyD",n[n.KeyE=35]="KeyE",n[n.KeyF=36]="KeyF",n[n.KeyG=37]="KeyG",n[n.KeyH=38]="KeyH",n[n.KeyI=39]="KeyI",n[n.KeyJ=40]="KeyJ",n[n.KeyK=41]="KeyK",n[n.KeyL=42]="KeyL",n[n.KeyM=43]="KeyM",n[n.KeyN=44]="KeyN",n[n.KeyO=45]="KeyO",n[n.KeyP=46]="KeyP",n[n.KeyQ=47]="KeyQ",n[n.KeyR=48]="KeyR",n[n.KeyS=49]="KeyS",n[n.KeyT=50]="KeyT",n[n.KeyU=51]="KeyU",n[n.KeyV=52]="KeyV",n[n.KeyW=53]="KeyW",n[n.KeyX=54]="KeyX",n[n.KeyY=55]="KeyY",n[n.KeyZ=56]="KeyZ",n[n.Meta=57]="Meta",n[n.ContextMenu=58]="ContextMenu",n[n.F1=59]="F1",n[n.F2=60]="F2",n[n.F3=61]="F3",n[n.F4=62]="F4",n[n.F5=63]="F5",n[n.F6=64]="F6",n[n.F7=65]="F7",n[n.F8=66]="F8",n[n.F9=67]="F9",n[n.F10=68]="F10",n[n.F11=69]="F11",n[n.F12=70]="F12",n[n.F13=71]="F13",n[n.F14=72]="F14",n[n.F15=73]="F15",n[n.F16=74]="F16",n[n.F17=75]="F17",n[n.F18=76]="F18",n[n.F19=77]="F19",n[n.F20=78]="F20",n[n.F21=79]="F21",n[n.F22=80]="F22",n[n.F23=81]="F23",n[n.F24=82]="F24",n[n.NumLock=83]="NumLock",n[n.ScrollLock=84]="ScrollLock",n[n.Semicolon=85]="Semicolon",n[n.Equal=86]="Equal",n[n.Comma=87]="Comma",n[n.Minus=88]="Minus",n[n.Period=89]="Period",n[n.Slash=90]="Slash",n[n.Backquote=91]="Backquote",n[n.BracketLeft=92]="BracketLeft",n[n.Backslash=93]="Backslash",n[n.BracketRight=94]="BracketRight",n[n.Quote=95]="Quote",n[n.OEM_8=96]="OEM_8",n[n.IntlBackslash=97]="IntlBackslash",n[n.Numpad0=98]="Numpad0",n[n.Numpad1=99]="Numpad1",n[n.Numpad2=100]="Numpad2",n[n.Numpad3=101]="Numpad3",n[n.Numpad4=102]="Numpad4",n[n.Numpad5=103]="Numpad5",n[n.Numpad6=104]="Numpad6",n[n.Numpad7=105]="Numpad7",n[n.Numpad8=106]="Numpad8",n[n.Numpad9=107]="Numpad9",n[n.NumpadMultiply=108]="NumpadMultiply",n[n.NumpadAdd=109]="NumpadAdd",n[n.NUMPAD_SEPARATOR=110]="NUMPAD_SEPARATOR",n[n.NumpadSubtract=111]="NumpadSubtract",n[n.NumpadDecimal=112]="NumpadDecimal",n[n.NumpadDivide=113]="NumpadDivide",n[n.KEY_IN_COMPOSITION=114]="KEY_IN_COMPOSITION",n[n.ABNT_C1=115]="ABNT_C1",n[n.ABNT_C2=116]="ABNT_C2",n[n.AudioVolumeMute=117]="AudioVolumeMute",n[n.AudioVolumeUp=118]="AudioVolumeUp",n[n.AudioVolumeDown=119]="AudioVolumeDown",n[n.BrowserSearch=120]="BrowserSearch",n[n.BrowserHome=121]="BrowserHome",n[n.BrowserBack=122]="BrowserBack",n[n.BrowserForward=123]="BrowserForward",n[n.MediaTrackNext=124]="MediaTrackNext",n[n.MediaTrackPrevious=125]="MediaTrackPrevious",n[n.MediaStop=126]="MediaStop",n[n.MediaPlayPause=127]="MediaPlayPause",n[n.LaunchMediaPlayer=128]="LaunchMediaPlayer",n[n.LaunchMail=129]="LaunchMail",n[n.LaunchApp2=130]="LaunchApp2",n[n.Clear=131]="Clear",n[n.MAX_VALUE=132]="MAX_VALUE"})(jW||(jW={}));var JW;(function(n){n[n.Hint=1]="Hint",n[n.Info=2]="Info",n[n.Warning=4]="Warning",n[n.Error=8]="Error"})(JW||(JW={}));var $W;(function(n){n[n.Unnecessary=1]="Unnecessary",n[n.Deprecated=2]="Deprecated"})($W||($W={}));var QW;(function(n){n[n.Inline=1]="Inline",n[n.Gutter=2]="Gutter"})(QW||(QW={}));var qW;(function(n){n[n.Normal=1]="Normal",n[n.Underlined=2]="Underlined"})(qW||(qW={}));var eA;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.TEXTAREA=1]="TEXTAREA",n[n.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",n[n.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",n[n.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",n[n.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",n[n.CONTENT_TEXT=6]="CONTENT_TEXT",n[n.CONTENT_EMPTY=7]="CONTENT_EMPTY",n[n.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",n[n.CONTENT_WIDGET=9]="CONTENT_WIDGET",n[n.OVERVIEW_RULER=10]="OVERVIEW_RULER",n[n.SCROLLBAR=11]="SCROLLBAR",n[n.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",n[n.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})(eA||(eA={}));var tA;(function(n){n[n.AIGenerated=1]="AIGenerated"})(tA||(tA={}));var iA;(function(n){n[n.Invoke=0]="Invoke",n[n.Automatic=1]="Automatic"})(iA||(iA={}));var nA;(function(n){n[n.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",n[n.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",n[n.TOP_CENTER=2]="TOP_CENTER"})(nA||(nA={}));var sA;(function(n){n[n.Left=1]="Left",n[n.Center=2]="Center",n[n.Right=4]="Right",n[n.Full=7]="Full"})(sA||(sA={}));var rA;(function(n){n[n.Word=0]="Word",n[n.Line=1]="Line",n[n.Suggest=2]="Suggest"})(rA||(rA={}));var oA;(function(n){n[n.Left=0]="Left",n[n.Right=1]="Right",n[n.None=2]="None",n[n.LeftOfInjectedText=3]="LeftOfInjectedText",n[n.RightOfInjectedText=4]="RightOfInjectedText"})(oA||(oA={}));var aA;(function(n){n[n.Off=0]="Off",n[n.On=1]="On",n[n.Relative=2]="Relative",n[n.Interval=3]="Interval",n[n.Custom=4]="Custom"})(aA||(aA={}));var lA;(function(n){n[n.None=0]="None",n[n.Text=1]="Text",n[n.Blocks=2]="Blocks"})(lA||(lA={}));var cA;(function(n){n[n.Smooth=0]="Smooth",n[n.Immediate=1]="Immediate"})(cA||(cA={}));var dA;(function(n){n[n.Auto=1]="Auto",n[n.Hidden=2]="Hidden",n[n.Visible=3]="Visible"})(dA||(dA={}));var uA;(function(n){n[n.LTR=0]="LTR",n[n.RTL=1]="RTL"})(uA||(uA={}));var hA;(function(n){n.Off="off",n.OnCode="onCode",n.On="on"})(hA||(hA={}));var fA;(function(n){n[n.Invoke=1]="Invoke",n[n.TriggerCharacter=2]="TriggerCharacter",n[n.ContentChange=3]="ContentChange"})(fA||(fA={}));var gA;(function(n){n[n.File=0]="File",n[n.Module=1]="Module",n[n.Namespace=2]="Namespace",n[n.Package=3]="Package",n[n.Class=4]="Class",n[n.Method=5]="Method",n[n.Property=6]="Property",n[n.Field=7]="Field",n[n.Constructor=8]="Constructor",n[n.Enum=9]="Enum",n[n.Interface=10]="Interface",n[n.Function=11]="Function",n[n.Variable=12]="Variable",n[n.Constant=13]="Constant",n[n.String=14]="String",n[n.Number=15]="Number",n[n.Boolean=16]="Boolean",n[n.Array=17]="Array",n[n.Object=18]="Object",n[n.Key=19]="Key",n[n.Null=20]="Null",n[n.EnumMember=21]="EnumMember",n[n.Struct=22]="Struct",n[n.Event=23]="Event",n[n.Operator=24]="Operator",n[n.TypeParameter=25]="TypeParameter"})(gA||(gA={}));var mA;(function(n){n[n.Deprecated=1]="Deprecated"})(mA||(mA={}));var pA;(function(n){n[n.Hidden=0]="Hidden",n[n.Blink=1]="Blink",n[n.Smooth=2]="Smooth",n[n.Phase=3]="Phase",n[n.Expand=4]="Expand",n[n.Solid=5]="Solid"})(pA||(pA={}));var bA;(function(n){n[n.Line=1]="Line",n[n.Block=2]="Block",n[n.Underline=3]="Underline",n[n.LineThin=4]="LineThin",n[n.BlockOutline=5]="BlockOutline",n[n.UnderlineThin=6]="UnderlineThin"})(bA||(bA={}));var vA;(function(n){n[n.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",n[n.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",n[n.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",n[n.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(vA||(vA={}));var _A;(function(n){n[n.None=0]="None",n[n.Same=1]="Same",n[n.Indent=2]="Indent",n[n.DeepIndent=3]="DeepIndent"})(_A||(_A={}));let Nw=class{static chord(e,t){return Bo(e,t)}};Nw.CtrlCmd=2048;Nw.Shift=1024;Nw.Alt=512;Nw.WinCtrl=256;function toe(){return{editor:void 0,languages:void 0,CancellationTokenSource:nm,Emitter:ue,KeyCode:jW,KeyMod:Nw,Position:pe,Range:te,Selection:Ii,SelectionDirection:uA,MarkerSeverity:JW,MarkerTag:$W,Uri:Ft,Token:H_}}const hXe="$initialize";let yK=!1;function wA(n){rf&&(yK||(yK=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(n.message))}class fXe{constructor(e,t,i,s){this.vsWorker=e,this.req=t,this.method=i,this.args=s,this.type=0}}class SK{constructor(e,t,i,s){this.vsWorker=e,this.seq=t,this.res=i,this.err=s,this.type=1}}class gXe{constructor(e,t,i,s){this.vsWorker=e,this.req=t,this.eventName=i,this.arg=s,this.type=2}}class mXe{constructor(e,t,i){this.vsWorker=e,this.req=t,this.event=i,this.type=3}}class pXe{constructor(e,t){this.vsWorker=e,this.req=t,this.type=4}}class bXe{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,t){const i=String(++this._lastSentReq);return new Promise((s,r)=>{this._pendingReplies[i]={resolve:s,reject:r},this._send(new fXe(this._workerId,i,e,t))})}listen(e,t){let i=null;const s=new ue({onWillAddFirstListener:()=>{i=String(++this._lastSentReq),this._pendingEmitters.set(i,s),this._send(new gXe(this._workerId,i,e,t))},onDidRemoveLastListener:()=>{this._pendingEmitters.delete(i),this._send(new pXe(this._workerId,i)),i=null}});return s.event}handleMessage(e){!e||!e.vsWorker||this._workerId!==-1&&e.vsWorker!==this._workerId||this._handleMessage(e)}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq]){console.warn("Got reply to unknown seq");return}const t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let i=e.err;e.err.$isError&&(i=new Error,i.name=e.err.name,i.message=e.err.message,i.stack=e.err.stack),t.reject(i);return}t.resolve(e.res)}_handleRequestMessage(e){const t=e.req;this._handler.handleMessage(e.method,e.args).then(s=>{this._send(new SK(this._workerId,t,s,void 0))},s=>{s.detail instanceof Error&&(s.detail=Kz(s.detail)),this._send(new SK(this._workerId,t,void 0,Kz(s)))})}_handleSubscribeEventMessage(e){const t=e.req,i=this._handler.handleEvent(e.eventName,e.arg)(s=>{this._send(new mXe(this._workerId,t,s))});this._pendingEvents.set(t,i)}_handleEventMessage(e){if(!this._pendingEmitters.has(e.req)){console.warn("Got event for unknown req");return}this._pendingEmitters.get(e.req).fire(e.event)}_handleUnsubscribeEventMessage(e){if(!this._pendingEvents.has(e.req)){console.warn("Got unsubscribe for unknown req");return}this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)}_send(e){const t=[];if(e.type===0)for(let i=0;i<e.args.length;i++)e.args[i]instanceof ArrayBuffer&&t.push(e.args[i]);else e.type===1&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}}class vXe extends Le{constructor(e,t,i){super();let s=null;this._worker=this._register(e.create("vs/base/common/worker/simpleWorker",d=>{this._protocol.handleMessage(d)},d=>{s?.(d)})),this._protocol=new bXe({sendMessage:(d,u)=>{this._worker.postMessage(d,u)},handleMessage:(d,u)=>{if(typeof i[d]!="function")return Promise.reject(new Error("Missing method "+d+" on main thread host."));try{return Promise.resolve(i[d].apply(i,u))}catch(h){return Promise.reject(h)}},handleEvent:(d,u)=>{if(noe(d)){const h=i[d].call(i,u);if(typeof h!="function")throw new Error(`Missing dynamic event ${d} on main thread host.`);return h}if(ioe(d)){const h=i[d];if(typeof h!="function")throw new Error(`Missing event ${d} on main thread host.`);return h}throw new Error(`Malformed event name ${d}`)}}),this._protocol.setWorkerId(this._worker.getId());let r=null;const o=globalThis.require;typeof o<"u"&&typeof o.getConfig=="function"?r=o.getConfig():typeof globalThis.requirejs<"u"&&(r=globalThis.requirejs.s.contexts._.config);const a=qV(i);this._onModuleLoaded=this._protocol.sendMessage(hXe,[this._worker.getId(),JSON.parse(JSON.stringify(r)),t,a]);const l=(d,u)=>this._request(d,u),c=(d,u)=>this._protocol.listen(d,u);this._lazyProxy=new Promise((d,u)=>{s=u,this._onModuleLoaded.then(h=>{d(_Xe(h,l,c))},h=>{u(h),this._onError("Worker failed to load "+t,h)})})}getProxyObject(){return this._lazyProxy}_request(e,t){return new Promise((i,s)=>{this._onModuleLoaded.then(()=>{this._protocol.sendMessage(e,t).then(i,s)},s)})}_onError(e,t){console.error(e),console.info(t)}}function ioe(n){return n[0]==="o"&&n[1]==="n"&&Ru(n.charCodeAt(2))}function noe(n){return/^onDynamic/.test(n)&&Ru(n.charCodeAt(9))}function _Xe(n,e,t){const i=o=>function(){const a=Array.prototype.slice.call(arguments,0);return e(o,a)},s=o=>function(a){return t(o,a)},r={};for(const o of n){if(noe(o)){r[o]=s(o);continue}if(ioe(o)){r[o]=t(o,void 0);continue}r[o]=i(o)}return r}const CK=mm("defaultWorkerFactory",{createScriptURL:n=>n});function wXe(n){const e=globalThis.MonacoEnvironment;if(e){if(typeof e.getWorker=="function")return e.getWorker("workerMain.js",n);if(typeof e.getWorkerUrl=="function"){const t=e.getWorkerUrl("workerMain.js",n);return new Worker(CK?CK.createScriptURL(t):t,{name:n})}}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function yXe(n){return typeof n.then=="function"}class SXe extends Le{constructor(e,t,i,s,r){super(),this.id=t,this.label=i;const o=wXe(i);yXe(o)?this.worker=o:this.worker=Promise.resolve(o),this.postMessage(e,[]),this.worker.then(a=>{a.onmessage=function(l){s(l.data)},a.onmessageerror=r,typeof a.addEventListener=="function"&&a.addEventListener("error",r)}),this._register(Et(()=>{var a;(a=this.worker)===null||a===void 0||a.then(l=>{l.onmessage=null,l.onmessageerror=null,l.removeEventListener("error",r),l.terminate()}),this.worker=null}))}getId(){return this.id}postMessage(e,t){var i;(i=this.worker)===null||i===void 0||i.then(s=>{try{s.postMessage(e,t)}catch(r){gi(r),gi(new Error(`FAILED to post message to '${this.label}'-worker`,{cause:r}))}})}}class pT{constructor(e){this._label=e,this._webWorkerFailedBeforeError=!1}create(e,t,i){const s=++pT.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new SXe(e,s,this._label||"anonymous"+s,t,r=>{wA(r),this._webWorkerFailedBeforeError=r,i(r)})}}pT.LAST_WORKER_ID=0;class Du{constructor(e,t,i,s){this.originalStart=e,this.originalLength=t,this.modifiedStart=i,this.modifiedLength=s}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}class LK{constructor(e){this.source=e}getElements(){const e=this.source,t=new Int32Array(e.length);for(let i=0,s=e.length;i<s;i++)t[i]=e.charCodeAt(i);return t}}function CXe(n,e,t){return new vd(new LK(n),new LK(e)).ComputeDiff(t).changes}class Om{static Assert(e,t){if(!e)throw new Error(t)}}class Zm{static Copy(e,t,i,s,r){for(let o=0;o<r;o++)i[s+o]=e[t+o]}static Copy2(e,t,i,s,r){for(let o=0;o<r;o++)i[s+o]=e[t+o]}}class kK{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new Du(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class vd{constructor(e,t,i=null){this.ContinueProcessingPredicate=i,this._originalSequence=e,this._modifiedSequence=t;const[s,r,o]=vd._getElements(e),[a,l,c]=vd._getElements(t);this._hasStrings=o&&c,this._originalStringElements=s,this._originalElementsOrHash=r,this._modifiedStringElements=a,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const t=e.getElements();if(vd._isStringArray(t)){const i=new Int32Array(t.length);for(let s=0,r=t.length;s<r;s++)i[s]=FV(t[s],0);return[t,i,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;const i=vd._getStrictElement(this._originalSequence,e),s=vd._getStrictElement(this._modifiedSequence,t);return i===s}static _getStrictElement(e,t){return typeof e.getStrictElement=="function"?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,i,s,r){const o=[!1];let a=this.ComputeDiffRecursive(e,t,i,s,o);return r&&(a=this.PrettifyChanges(a)),{quitEarly:o[0],changes:a}}ComputeDiffRecursive(e,t,i,s,r){for(r[0]=!1;e<=t&&i<=s&&this.ElementsAreEqual(e,i);)e++,i++;for(;t>=e&&s>=i&&this.ElementsAreEqual(t,s);)t--,s--;if(e>t||i>s){let u;return i<=s?(Om.Assert(e===t+1,"originalStart should only be one more than originalEnd"),u=[new Du(e,0,i,s-i+1)]):e<=t?(Om.Assert(i===s+1,"modifiedStart should only be one more than modifiedEnd"),u=[new Du(e,t-e+1,i,0)]):(Om.Assert(e===t+1,"originalStart should only be one more than originalEnd"),Om.Assert(i===s+1,"modifiedStart should only be one more than modifiedEnd"),u=[]),u}const o=[0],a=[0],l=this.ComputeRecursionPoint(e,t,i,s,o,a,r),c=o[0],d=a[0];if(l!==null)return l;if(!r[0]){const u=this.ComputeDiffRecursive(e,c,i,d,r);let h=[];return r[0]?h=[new Du(c+1,t-(c+1)+1,d+1,s-(d+1)+1)]:h=this.ComputeDiffRecursive(c+1,t,d+1,s,r),this.ConcatenateChanges(u,h)}return[new Du(e,t-e+1,i,s-i+1)]}WALKTRACE(e,t,i,s,r,o,a,l,c,d,u,h,f,g,m,p,b,w){let v=null,_=null,y=new kK,C=t,S=i,k=f[0]-p[0]-s,I=-1073741824,T=this.m_forwardHistory.length-1;do{const D=k+e;D===C||D<S&&c[D-1]<c[D+1]?(u=c[D+1],g=u-k-s,u<I&&y.MarkNextChange(),I=u,y.AddModifiedElement(u+1,g),k=D+1-e):(u=c[D-1]+1,g=u-k-s,u<I&&y.MarkNextChange(),I=u-1,y.AddOriginalElement(u,g+1),k=D-1-e),T>=0&&(c=this.m_forwardHistory[T],e=c[0],C=1,S=c.length-1)}while(--T>=-1);if(v=y.getReverseChanges(),w[0]){let D=f[0]+1,M=p[0]+1;if(v!==null&&v.length>0){const E=v[v.length-1];D=Math.max(D,E.getOriginalEnd()),M=Math.max(M,E.getModifiedEnd())}_=[new Du(D,h-D+1,M,m-M+1)]}else{y=new kK,C=o,S=a,k=f[0]-p[0]-l,I=1073741824,T=b?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const D=k+r;D===C||D<S&&d[D-1]>=d[D+1]?(u=d[D+1]-1,g=u-k-l,u>I&&y.MarkNextChange(),I=u+1,y.AddOriginalElement(u+1,g+1),k=D+1-r):(u=d[D-1],g=u-k-l,u>I&&y.MarkNextChange(),I=u,y.AddModifiedElement(u+1,g+1),k=D-1-r),T>=0&&(d=this.m_reverseHistory[T],r=d[0],C=1,S=d.length-1)}while(--T>=-1);_=y.getChanges()}return this.ConcatenateChanges(v,_)}ComputeRecursionPoint(e,t,i,s,r,o,a){let l=0,c=0,d=0,u=0,h=0,f=0;e--,i--,r[0]=0,o[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const g=t-e+(s-i),m=g+1,p=new Int32Array(m),b=new Int32Array(m),w=s-i,v=t-e,_=e-i,y=t-s,S=(v-w)%2===0;p[w]=e,b[v]=t,a[0]=!1;for(let k=1;k<=g/2+1;k++){let I=0,T=0;d=this.ClipDiagonalBound(w-k,k,w,m),u=this.ClipDiagonalBound(w+k,k,w,m);for(let M=d;M<=u;M+=2){M===d||M<u&&p[M-1]<p[M+1]?l=p[M+1]:l=p[M-1]+1,c=l-(M-w)-_;const E=l;for(;l<t&&c<s&&this.ElementsAreEqual(l+1,c+1);)l++,c++;if(p[M]=l,l+c>I+T&&(I=l,T=c),!S&&Math.abs(M-v)<=k-1&&l>=b[M])return r[0]=l,o[0]=c,E<=b[M]&&1447>0&&k<=1448?this.WALKTRACE(w,d,u,_,v,h,f,y,p,b,l,t,r,c,s,o,S,a):null}const D=(I-e+(T-i)-k)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(I,D))return a[0]=!0,r[0]=I,o[0]=T,D>0&&1447>0&&k<=1448?this.WALKTRACE(w,d,u,_,v,h,f,y,p,b,l,t,r,c,s,o,S,a):(e++,i++,[new Du(e,t-e+1,i,s-i+1)]);h=this.ClipDiagonalBound(v-k,k,v,m),f=this.ClipDiagonalBound(v+k,k,v,m);for(let M=h;M<=f;M+=2){M===h||M<f&&b[M-1]>=b[M+1]?l=b[M+1]-1:l=b[M-1],c=l-(M-v)-y;const E=l;for(;l>e&&c>i&&this.ElementsAreEqual(l,c);)l--,c--;if(b[M]=l,S&&Math.abs(M-w)<=k&&l<=p[M])return r[0]=l,o[0]=c,E>=p[M]&&1447>0&&k<=1448?this.WALKTRACE(w,d,u,_,v,h,f,y,p,b,l,t,r,c,s,o,S,a):null}if(k<=1447){let M=new Int32Array(u-d+2);M[0]=w-d+1,Zm.Copy2(p,d,M,1,u-d+1),this.m_forwardHistory.push(M),M=new Int32Array(f-h+2),M[0]=v-h+1,Zm.Copy2(b,h,M,1,f-h+1),this.m_reverseHistory.push(M)}}return this.WALKTRACE(w,d,u,_,v,h,f,y,p,b,l,t,r,c,s,o,S,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){const i=e[t],s=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,r=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,o=i.originalLength>0,a=i.modifiedLength>0;for(;i.originalStart+i.originalLength<s&&i.modifiedStart+i.modifiedLength<r&&(!o||this.OriginalElementsAreEqual(i.originalStart,i.originalStart+i.originalLength))&&(!a||this.ModifiedElementsAreEqual(i.modifiedStart,i.modifiedStart+i.modifiedLength));){const c=this.ElementsAreStrictEqual(i.originalStart,i.modifiedStart);if(this.ElementsAreStrictEqual(i.originalStart+i.originalLength,i.modifiedStart+i.modifiedLength)&&!c)break;i.originalStart++,i.modifiedStart++}const l=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],l)){e[t]=l[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){const i=e[t];let s=0,r=0;if(t>0){const u=e[t-1];s=u.originalStart+u.originalLength,r=u.modifiedStart+u.modifiedLength}const o=i.originalLength>0,a=i.modifiedLength>0;let l=0,c=this._boundaryScore(i.originalStart,i.originalLength,i.modifiedStart,i.modifiedLength);for(let u=1;;u++){const h=i.originalStart-u,f=i.modifiedStart-u;if(h<s||f<r||o&&!this.OriginalElementsAreEqual(h,h+i.originalLength)||a&&!this.ModifiedElementsAreEqual(f,f+i.modifiedLength))break;const m=(h===s&&f===r?5:0)+this._boundaryScore(h,i.originalLength,f,i.modifiedLength);m>c&&(c=m,l=u)}i.originalStart-=l,i.modifiedStart-=l;const d=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],d)){e[t-1]=d[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,i=e.length;t<i;t++){const s=e[t-1],r=e[t],o=r.originalStart-s.originalStart-s.originalLength,a=s.originalStart,l=r.originalStart+r.originalLength,c=l-a,d=s.modifiedStart,u=r.modifiedStart+r.modifiedLength,h=u-d;if(o<5&&c<20&&h<20){const f=this._findBetterContiguousSequence(a,c,d,h,o);if(f){const[g,m]=f;(g!==s.originalStart+s.originalLength||m!==s.modifiedStart+s.modifiedLength)&&(s.originalLength=g-s.originalStart,s.modifiedLength=m-s.modifiedStart,r.originalStart=g+o,r.modifiedStart=m+o,r.originalLength=l-r.originalStart,r.modifiedLength=u-r.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,i,s,r){if(t<r||s<r)return null;const o=e+t-r+1,a=i+s-r+1;let l=0,c=0,d=0;for(let u=e;u<o;u++)for(let h=i;h<a;h++){const f=this._contiguousSequenceScore(u,h,r);f>0&&f>l&&(l=f,c=u,d=h)}return l>0?[c,d]:null}_contiguousSequenceScore(e,t,i){let s=0;for(let r=0;r<i;r++){if(!this.ElementsAreEqual(e+r,t+r))return 0;s+=this._originalStringElements[e+r].length}return s}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){const i=e+t;if(this._OriginalIsBoundary(i-1)||this._OriginalIsBoundary(i))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){const i=e+t;if(this._ModifiedIsBoundary(i-1)||this._ModifiedIsBoundary(i))return!0}return!1}_boundaryScore(e,t,i,s){const r=this._OriginalRegionIsBoundary(e,t)?1:0,o=this._ModifiedRegionIsBoundary(i,s)?1:0;return r+o}ConcatenateChanges(e,t){const i=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],i)){const s=new Array(e.length+t.length-1);return Zm.Copy(e,0,s,0,e.length-1),s[e.length-1]=i[0],Zm.Copy(t,1,s,e.length,t.length-1),s}else{const s=new Array(e.length+t.length);return Zm.Copy(e,0,s,0,e.length),Zm.Copy(t,0,s,e.length,t.length),s}}ChangesOverlap(e,t,i){if(Om.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),Om.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){const s=e.originalStart;let r=e.originalLength;const o=e.modifiedStart;let a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(r=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),i[0]=new Du(s,r,o,a),!0}else return i[0]=null,!1}ClipDiagonalBound(e,t,i,s){if(e>=0&&e<s)return e;const r=i,o=s-i-1,a=t%2===0;if(e<0){const l=r%2===0;return a===l?0:1}else{const l=o%2===0;return a===l?s-1:s-2}}}class LXe{constructor(e,t,i,s){this._uri=e,this._lines=t,this._eol=i,this._versionId=s,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const i of t)this._acceptDeleteRange(i.range),this._acceptInsertText(new pe(i.range.startLineNumber,i.range.startColumn),i.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,i=new Uint32Array(t);for(let s=0;s<t;s++)i[s]=this._lines[s].length+e;this._lineStarts=new JOe(i)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){if(t.length===0)return;const i=w0(t);if(i.length===1){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]+this._lines[e.lineNumber-1].substring(e.column-1));return}i[i.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]);const s=new Uint32Array(i.length-1);for(let r=1;r<i.length;r++)this._lines.splice(e.lineNumber+r-1,0,i[r]),s[r-1]=i[r].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,s)}}class kXe{constructor(e,t,i){const s=new Uint8Array(e*t);for(let r=0,o=e*t;r<o;r++)s[r]=i;this._data=s,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,i){this._data[e*this.cols+t]=i}}class xXe{constructor(e){let t=0,i=0;for(let r=0,o=e.length;r<o;r++){const[a,l,c]=e[r];l>t&&(t=l),a>i&&(i=a),c>i&&(i=c)}t++,i++;const s=new kXe(i,t,0);for(let r=0,o=e.length;r<o;r++){const[a,l,c]=e[r];s.set(a,l,c)}this._states=s,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}}let AR=null;function TXe(){return AR===null&&(AR=new xXe([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),AR}let rv=null;function DXe(){if(rv===null){rv=new pw(0);const n=` 	<>'"`;for(let t=0;t<n.length;t++)rv.set(n.charCodeAt(t),1);const e=".,;:";for(let t=0;t<e.length;t++)rv.set(e.charCodeAt(t),2)}return rv}class JL{static _createLink(e,t,i,s,r){let o=r-1;do{const a=t.charCodeAt(o);if(e.get(a)!==2)break;o--}while(o>s);if(s>0){const a=t.charCodeAt(s-1),l=t.charCodeAt(o);(a===40&&l===41||a===91&&l===93||a===123&&l===125)&&o--}return{range:{startLineNumber:i,startColumn:s+1,endLineNumber:i,endColumn:o+2},url:t.substring(s,o+1)}}static computeLinks(e,t=TXe()){const i=DXe(),s=[];for(let r=1,o=e.getLineCount();r<=o;r++){const a=e.getLineContent(r),l=a.length;let c=0,d=0,u=0,h=1,f=!1,g=!1,m=!1,p=!1;for(;c<l;){let b=!1;const w=a.charCodeAt(c);if(h===13){let v;switch(w){case 40:f=!0,v=0;break;case 41:v=f?0:1;break;case 91:m=!0,g=!0,v=0;break;case 93:m=!1,v=g?0:1;break;case 123:p=!0,v=0;break;case 125:v=p?0:1;break;case 39:case 34:case 96:u===w?v=1:u===39||u===34||u===96?v=0:v=1;break;case 42:v=u===42?1:0;break;case 124:v=u===124?1:0;break;case 32:v=m?0:1;break;default:v=i.get(w)}v===1&&(s.push(JL._createLink(i,a,r,d,c)),b=!0)}else if(h===12){let v;w===91?(g=!0,v=0):v=i.get(w),v===1?b=!0:h=13}else h=t.nextState(h,w),h===0&&(b=!0);b&&(h=1,f=!1,g=!1,p=!1,d=c+1,u=w),c++}h===13&&s.push(JL._createLink(i,a,r,d,l))}return s}}function IXe(n){return!n||typeof n.getLineCount!="function"||typeof n.getLineContent!="function"?[]:JL.computeLinks(n)}class yA{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(e,t,i,s,r){if(e&&t){const o=this.doNavigateValueSet(t,r);if(o)return{range:e,value:o}}if(i&&s){const o=this.doNavigateValueSet(s,r);if(o)return{range:i,value:o}}return null}doNavigateValueSet(e,t){const i=this.numberReplace(e,t);return i!==null?i:this.textReplace(e,t)}numberReplace(e,t){const i=Math.pow(10,e.length-(e.lastIndexOf(".")+1));let s=Number(e);const r=parseFloat(e);return!isNaN(s)&&!isNaN(r)&&s===r?s===0&&!t?null:(s=Math.floor(s*i),s+=t?i:-i,String(s/i)):null}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,i){let s=null;for(let r=0,o=e.length;s===null&&r<o;r++)s=this.valueSetReplace(e[r],t,i);return s}valueSetReplace(e,t,i){let s=e.indexOf(t);return s>=0?(s+=i?1:-1,s<0?s=e.length-1:s%=e.length,e[s]):null}}yA.INSTANCE=new yA;class MXe{static computeUnicodeHighlights(e,t,i){const s=i?i.startLineNumber:1,r=i?i.endLineNumber:e.getLineCount(),o=new xK(t),a=o.getCandidateCodePoints();let l;a==="allNonBasicAscii"?l=new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):l=new RegExp(`${EXe(Array.from(a))}`,"g");const c=new bp(null,l),d=[];let u=!1,h,f=0,g=0,m=0;e:for(let p=s,b=r;p<=b;p++){const w=e.getLineContent(p),v=w.length;c.reset(0);do if(h=c.next(w),h){let _=h.index,y=h.index+h[0].length;if(_>0){const I=w.charCodeAt(_-1);gs(I)&&_--}if(y+1<v){const I=w.charCodeAt(y-1);gs(I)&&y++}const C=w.substring(_,y);let S=Z_(_+1,zV,w,0);S&&S.endColumn<=_+1&&(S=null);const k=o.shouldHighlightNonBasicASCII(C,S?S.word:null);if(k!==0){if(k===3?f++:k===2?g++:k===1?m++:GV(),d.length>=1e3){u=!0;break e}d.push(new te(p,_+1,p,y+1))}}while(h)}return{ranges:d,hasMore:u,ambiguousCharacterCount:f,invisibleCharacterCount:g,nonBasicAsciiCharacterCount:m}}static computeUnicodeHighlightReason(e,t){const i=new xK(t);switch(i.shouldHighlightNonBasicASCII(e,null)){case 0:return null;case 2:return{kind:1};case 3:{const r=e.codePointAt(0),o=i.ambiguousCharacters.getPrimaryConfusable(r),a=Dg.getLocales().filter(l=>!Dg.getInstance(new Set([...t.allowedLocales,l])).isAmbiguous(r));return{kind:0,confusableWith:String.fromCodePoint(o),notAmbiguousInLocales:a}}case 1:return{kind:2}}}}function EXe(n,e){return`[${Ya(n.map(i=>String.fromCodePoint(i)).join(""))}]`}class xK{constructor(e){this.options=e,this.allowedCodePoints=new Set(e.allowedCodePoints),this.ambiguousCharacters=Dg.getInstance(new Set(e.allowedLocales))}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";const e=new Set;if(this.options.invisibleCharacters)for(const t of mh.codePoints)TK(String.fromCodePoint(t))||e.add(t);if(this.options.ambiguousCharacters)for(const t of this.ambiguousCharacters.getConfusableCodePoints())e.add(t);for(const t of this.allowedCodePoints)e.delete(t);return e}shouldHighlightNonBasicASCII(e,t){const i=e.codePointAt(0);if(this.allowedCodePoints.has(i))return 0;if(this.options.nonBasicASCII)return 1;let s=!1,r=!1;if(t)for(const o of t){const a=o.codePointAt(0),l=EV(o);s=s||l,!l&&!this.ambiguousCharacters.isAmbiguous(a)&&!mh.isInvisibleCharacter(a)&&(r=!0)}return!s&&r?0:this.options.invisibleCharacters&&!TK(e)&&mh.isInvisibleCharacter(i)?2:this.options.ambiguousCharacters&&this.ambiguousCharacters.isAmbiguous(i)?3:0}}function TK(n){return n===" "||n===`
`||n==="	"}class nC{constructor(e,t,i){this.changes=e,this.moves=t,this.hitTimeout=i}}class soe{constructor(e,t){this.lineRangeMapping=e,this.changes=t}}class NXe{constructor(e){this.text=e,this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)e.charAt(t)===`
`&&this.lineStartOffsetByLineIdx.push(t+1)}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new Rt(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}get textLength(){const e=this.lineStartOffsetByLineIdx.length-1;return new sa(e,this.text.length-this.lineStartOffsetByLineIdx[e])}}class RXe{constructor(e){this.edits=e,Ng(()=>BV(e,(t,i)=>t.range.getEndPosition().isBeforeOrEqual(i.range.getStartPosition())))}apply(e){let t="",i=new pe(1,1);for(const r of this.edits){const o=r.range,a=o.getStartPosition(),l=o.getEndPosition(),c=DK(i,a);c.isEmpty()||(t+=e.getValueOfRange(c)),t+=r.text,i=l}const s=DK(i,e.endPositionExclusive);return s.isEmpty()||(t+=e.getValueOfRange(s)),t}applyToString(e){const t=new AXe(e);return this.apply(t)}getNewRanges(){const e=[];let t=0,i=0,s=0;for(const r of this.edits){const o=sa.ofText(r.text),a=pe.lift({lineNumber:r.range.startLineNumber+i,column:r.range.startColumn+(r.range.startLineNumber===t?s:0)}),l=o.createRange(a);e.push(l),i=l.endLineNumber-r.range.endLineNumber,s=l.endColumn-r.range.endColumn,t=r.range.endLineNumber}return e}}class WXe{constructor(e,t){this.range=e,this.text=t}}function DK(n,e){if(n.lineNumber===e.lineNumber&&n.column===Number.MAX_SAFE_INTEGER)return te.fromPositions(e,e);if(!n.isBeforeOrEqual(e))throw new Ai("start must be before end");return new te(n.lineNumber,n.column,e.lineNumber,e.column)}class roe{get endPositionExclusive(){return this.length.addToPosition(new pe(1,1))}}class AXe extends roe{constructor(e){super(),this.value=e,this._t=new NXe(this.value)}getValueOfRange(e){return this._t.getOffsetRange(e).substring(this.value)}get length(){return this._t.textLength}}class Cr{static inverse(e,t,i){const s=[];let r=1,o=1;for(const l of e){const c=new Cr(new Lt(r,l.original.startLineNumber),new Lt(o,l.modified.startLineNumber));c.modified.isEmpty||s.push(c),r=l.original.endLineNumberExclusive,o=l.modified.endLineNumberExclusive}const a=new Cr(new Lt(r,t+1),new Lt(o,i+1));return a.modified.isEmpty||s.push(a),s}static clip(e,t,i){const s=[];for(const r of e){const o=r.original.intersect(t),a=r.modified.intersect(i);o&&!o.isEmpty&&a&&!a.isEmpty&&s.push(new Cr(o,a))}return s}constructor(e,t){this.original=e,this.modified=t}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new Cr(this.modified,this.original)}join(e){return new Cr(this.original.join(e.original),this.modified.join(e.modified))}toRangeMapping(){const e=this.original.toInclusiveRange(),t=this.modified.toInclusiveRange();if(e&&t)return new Tl(e,t);if(this.original.startLineNumber===1||this.modified.startLineNumber===1){if(!(this.modified.startLineNumber===1&&this.original.startLineNumber===1))throw new Ai("not a valid diff");return new Tl(new te(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new te(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1))}else return new Tl(new te(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),new te(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER))}}class Ao extends Cr{static fromRangeMappings(e){const t=Lt.join(e.map(s=>Lt.fromRangeInclusive(s.originalRange))),i=Lt.join(e.map(s=>Lt.fromRangeInclusive(s.modifiedRange)));return new Ao(t,i,e)}constructor(e,t,i){super(e,t),this.innerChanges=i}flip(){var e;return new Ao(this.modified,this.original,(e=this.innerChanges)===null||e===void 0?void 0:e.map(t=>t.flip()))}withInnerChangesFromLineRanges(){return new Ao(this.original,this.modified,[this.toRangeMapping()])}}class Tl{constructor(e,t){this.originalRange=e,this.modifiedRange=t}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new Tl(this.modifiedRange,this.originalRange)}toTextEdit(e){const t=e.getValueOfRange(this.modifiedRange);return new WXe(this.originalRange,t)}}const FXe=3;class VXe{computeDiff(e,t,i){var s;const o=new ZXe(e,t,{maxComputationTime:i.maxComputationTimeMs,shouldIgnoreTrimWhitespace:i.ignoreTrimWhitespace,shouldComputeCharChanges:!0,shouldMakePrettyDiff:!0,shouldPostProcessCharChanges:!0}).computeDiff(),a=[];let l=null;for(const c of o.changes){let d;c.originalEndLineNumber===0?d=new Lt(c.originalStartLineNumber+1,c.originalStartLineNumber+1):d=new Lt(c.originalStartLineNumber,c.originalEndLineNumber+1);let u;c.modifiedEndLineNumber===0?u=new Lt(c.modifiedStartLineNumber+1,c.modifiedStartLineNumber+1):u=new Lt(c.modifiedStartLineNumber,c.modifiedEndLineNumber+1);let h=new Ao(d,u,(s=c.charChanges)===null||s===void 0?void 0:s.map(f=>new Tl(new te(f.originalStartLineNumber,f.originalStartColumn,f.originalEndLineNumber,f.originalEndColumn),new te(f.modifiedStartLineNumber,f.modifiedStartColumn,f.modifiedEndLineNumber,f.modifiedEndColumn))));l&&(l.modified.endLineNumberExclusive===h.modified.startLineNumber||l.original.endLineNumberExclusive===h.original.startLineNumber)&&(h=new Ao(l.original.join(h.original),l.modified.join(h.modified),l.innerChanges&&h.innerChanges?l.innerChanges.concat(h.innerChanges):void 0),a.pop()),a.push(h),l=h}return Ng(()=>BV(a,(c,d)=>d.original.startLineNumber-c.original.endLineNumberExclusive===d.modified.startLineNumber-c.modified.endLineNumberExclusive&&c.original.endLineNumberExclusive<d.original.startLineNumber&&c.modified.endLineNumberExclusive<d.modified.startLineNumber)),new nC(a,[],o.quitEarly)}}function ooe(n,e,t,i){return new vd(n,e,t).ComputeDiff(i)}let IK=class{constructor(e){const t=[],i=[];for(let s=0,r=e.length;s<r;s++)t[s]=SA(e[s],1),i[s]=CA(e[s],1);this.lines=e,this._startColumns=t,this._endColumns=i}getElements(){const e=[];for(let t=0,i=this.lines.length;t<i;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,i){const s=[],r=[],o=[];let a=0;for(let l=t;l<=i;l++){const c=this.lines[l],d=e?this._startColumns[l]:1,u=e?this._endColumns[l]:c.length+1;for(let h=d;h<u;h++)s[a]=c.charCodeAt(h-1),r[a]=l+1,o[a]=h,a++;!e&&l<i&&(s[a]=10,r[a]=l+1,o[a]=c.length+1,a++)}return new PXe(s,r,o)}};class PXe{constructor(e,t,i){this._charCodes=e,this._lineNumbers=t,this._columns=i}toString(){return"["+this._charCodes.map((e,t)=>(e===10?"\\n":String.fromCharCode(e))+`-(${this._lineNumbers[t]},${this._columns[t]})`).join(", ")+"]"}_assertIndex(e,t){if(e<0||e>=t.length)throw new Error("Illegal index")}getElements(){return this._charCodes}getStartLineNumber(e){return e>0&&e===this._lineNumbers.length?this.getEndLineNumber(e-1):(this._assertIndex(e,this._lineNumbers),this._lineNumbers[e])}getEndLineNumber(e){return e===-1?this.getStartLineNumber(e+1):(this._assertIndex(e,this._lineNumbers),this._charCodes[e]===10?this._lineNumbers[e]+1:this._lineNumbers[e])}getStartColumn(e){return e>0&&e===this._columns.length?this.getEndColumn(e-1):(this._assertIndex(e,this._columns),this._columns[e])}getEndColumn(e){return e===-1?this.getStartColumn(e+1):(this._assertIndex(e,this._columns),this._charCodes[e]===10?1:this._columns[e]+1)}}class zp{constructor(e,t,i,s,r,o,a,l){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=i,this.originalEndColumn=s,this.modifiedStartLineNumber=r,this.modifiedStartColumn=o,this.modifiedEndLineNumber=a,this.modifiedEndColumn=l}static createFromDiffChange(e,t,i){const s=t.getStartLineNumber(e.originalStart),r=t.getStartColumn(e.originalStart),o=t.getEndLineNumber(e.originalStart+e.originalLength-1),a=t.getEndColumn(e.originalStart+e.originalLength-1),l=i.getStartLineNumber(e.modifiedStart),c=i.getStartColumn(e.modifiedStart),d=i.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),u=i.getEndColumn(e.modifiedStart+e.modifiedLength-1);return new zp(s,r,o,a,l,c,d,u)}}function OXe(n){if(n.length<=1)return n;const e=[n[0]];let t=e[0];for(let i=1,s=n.length;i<s;i++){const r=n[i],o=r.originalStart-(t.originalStart+t.originalLength),a=r.modifiedStart-(t.modifiedStart+t.modifiedLength);Math.min(o,a)<FXe?(t.originalLength=r.originalStart+r.originalLength-t.originalStart,t.modifiedLength=r.modifiedStart+r.modifiedLength-t.modifiedStart):(e.push(r),t=r)}return e}class v_{constructor(e,t,i,s,r){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=i,this.modifiedEndLineNumber=s,this.charChanges=r}static createFromDiffResult(e,t,i,s,r,o,a){let l,c,d,u,h;if(t.originalLength===0?(l=i.getStartLineNumber(t.originalStart)-1,c=0):(l=i.getStartLineNumber(t.originalStart),c=i.getEndLineNumber(t.originalStart+t.originalLength-1)),t.modifiedLength===0?(d=s.getStartLineNumber(t.modifiedStart)-1,u=0):(d=s.getStartLineNumber(t.modifiedStart),u=s.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),o&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&r()){const f=i.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),g=s.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);if(f.getElements().length>0&&g.getElements().length>0){let m=ooe(f,g,r,!0).changes;a&&(m=OXe(m)),h=[];for(let p=0,b=m.length;p<b;p++)h.push(zp.createFromDiffChange(m[p],f,g))}}return new v_(l,c,d,u,h)}}class ZXe{constructor(e,t,i){this.shouldComputeCharChanges=i.shouldComputeCharChanges,this.shouldPostProcessCharChanges=i.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=i.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=i.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new IK(e),this.modified=new IK(t),this.continueLineDiff=MK(i.maxComputationTime),this.continueCharDiff=MK(i.maxComputationTime===0?0:Math.min(i.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:void 0}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:void 0}]};const e=ooe(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,i=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const a=[];for(let l=0,c=t.length;l<c;l++)a.push(v_.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[l],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:i,changes:a}}const s=[];let r=0,o=0;for(let a=-1,l=t.length;a<l;a++){const c=a+1<l?t[a+1]:null,d=c?c.originalStart:this.originalLines.length,u=c?c.modifiedStart:this.modifiedLines.length;for(;r<d&&o<u;){const h=this.originalLines[r],f=this.modifiedLines[o];if(h!==f){{let g=SA(h,1),m=SA(f,1);for(;g>1&&m>1;){const p=h.charCodeAt(g-2),b=f.charCodeAt(m-2);if(p!==b)break;g--,m--}(g>1||m>1)&&this._pushTrimWhitespaceCharChange(s,r+1,1,g,o+1,1,m)}{let g=CA(h,1),m=CA(f,1);const p=h.length+1,b=f.length+1;for(;g<p&&m<b;){const w=h.charCodeAt(g-1),v=h.charCodeAt(m-1);if(w!==v)break;g++,m++}(g<p||m<b)&&this._pushTrimWhitespaceCharChange(s,r+1,g,p,o+1,m,b)}}r++,o++}c&&(s.push(v_.createFromDiffResult(this.shouldIgnoreTrimWhitespace,c,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),r+=c.originalLength,o+=c.modifiedLength)}return{quitEarly:i,changes:s}}_pushTrimWhitespaceCharChange(e,t,i,s,r,o,a){if(this._mergeTrimWhitespaceCharChange(e,t,i,s,r,o,a))return;let l;this.shouldComputeCharChanges&&(l=[new zp(t,i,t,s,r,o,r,a)]),e.push(new v_(t,t,r,r,l))}_mergeTrimWhitespaceCharChange(e,t,i,s,r,o,a){const l=e.length;if(l===0)return!1;const c=e[l-1];return c.originalEndLineNumber===0||c.modifiedEndLineNumber===0?!1:c.originalEndLineNumber===t&&c.modifiedEndLineNumber===r?(this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new zp(t,i,t,s,r,o,r,a)),!0):c.originalEndLineNumber+1===t&&c.modifiedEndLineNumber+1===r?(c.originalEndLineNumber=t,c.modifiedEndLineNumber=r,this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new zp(t,i,t,s,r,o,r,a)),!0):!1}}function SA(n,e){const t=fo(n);return t===-1?e:t+1}function CA(n,e){const t=sm(n);return t===-1?e:t+2}function MK(n){if(n===0)return()=>!0;const e=Date.now();return()=>Date.now()-e<n}class Hd{static trivial(e,t){return new Hd([new is(Rt.ofLength(e.length),Rt.ofLength(t.length))],!1)}static trivialTimedOut(e,t){return new Hd([new is(Rt.ofLength(e.length),Rt.ofLength(t.length))],!0)}constructor(e,t){this.diffs=e,this.hitTimeout=t}}class is{static invert(e,t){const i=[];return jie(e,(s,r)=>{i.push(is.fromOffsetPairs(s?s.getEndExclusives():ra.zero,r?r.getStarts():new ra(t,(s?s.seq2Range.endExclusive-s.seq1Range.endExclusive:0)+t)))}),i}static fromOffsetPairs(e,t){return new is(new Rt(e.offset1,t.offset1),new Rt(e.offset2,t.offset2))}constructor(e,t){this.seq1Range=e,this.seq2Range=t}swap(){return new is(this.seq2Range,this.seq1Range)}toString(){return`${this.seq1Range} <-> ${this.seq2Range}`}join(e){return new is(this.seq1Range.join(e.seq1Range),this.seq2Range.join(e.seq2Range))}delta(e){return e===0?this:new is(this.seq1Range.delta(e),this.seq2Range.delta(e))}deltaStart(e){return e===0?this:new is(this.seq1Range.deltaStart(e),this.seq2Range.deltaStart(e))}deltaEnd(e){return e===0?this:new is(this.seq1Range.deltaEnd(e),this.seq2Range.deltaEnd(e))}intersect(e){const t=this.seq1Range.intersect(e.seq1Range),i=this.seq2Range.intersect(e.seq2Range);if(!(!t||!i))return new is(t,i)}getStarts(){return new ra(this.seq1Range.start,this.seq2Range.start)}getEndExclusives(){return new ra(this.seq1Range.endExclusive,this.seq2Range.endExclusive)}}class ra{constructor(e,t){this.offset1=e,this.offset2=t}toString(){return`${this.offset1} <-> ${this.offset2}`}delta(e){return e===0?this:new ra(this.offset1+e,this.offset2+e)}equals(e){return this.offset1===e.offset1&&this.offset2===e.offset2}}ra.zero=new ra(0,0);ra.max=new ra(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER);class v1{isValid(){return!0}}v1.instance=new v1;class GXe{constructor(e){if(this.timeout=e,this.startTime=Date.now(),this.valid=!0,e<=0)throw new Ai("timeout must be positive")}isValid(){if(!(Date.now()-this.startTime<this.timeout)&&this.valid){this.valid=!1;debugger}return this.valid}}class FR{constructor(e,t){this.width=e,this.height=t,this.array=[],this.array=new Array(e*t)}get(e,t){return this.array[e+t*this.width]}set(e,t,i){this.array[e+t*this.width]=i}}function LA(n){return n===32||n===9}class zb{static getKey(e){let t=this.chrKeys.get(e);return t===void 0&&(t=this.chrKeys.size,this.chrKeys.set(e,t)),t}constructor(e,t,i){this.range=e,this.lines=t,this.source=i,this.histogram=[];let s=0;for(let r=e.startLineNumber-1;r<e.endLineNumberExclusive-1;r++){const o=t[r];for(let l=0;l<o.length;l++){s++;const c=o[l],d=zb.getKey(c);this.histogram[d]=(this.histogram[d]||0)+1}s++;const a=zb.getKey(`
`);this.histogram[a]=(this.histogram[a]||0)+1}this.totalCount=s}computeSimilarity(e){var t,i;let s=0;const r=Math.max(this.histogram.length,e.histogram.length);for(let o=0;o<r;o++)s+=Math.abs(((t=this.histogram[o])!==null&&t!==void 0?t:0)-((i=e.histogram[o])!==null&&i!==void 0?i:0));return 1-s/(this.totalCount+e.totalCount)}}zb.chrKeys=new Map;class BXe{compute(e,t,i=v1.instance,s){if(e.length===0||t.length===0)return Hd.trivial(e,t);const r=new FR(e.length,t.length),o=new FR(e.length,t.length),a=new FR(e.length,t.length);for(let g=0;g<e.length;g++)for(let m=0;m<t.length;m++){if(!i.isValid())return Hd.trivialTimedOut(e,t);const p=g===0?0:r.get(g-1,m),b=m===0?0:r.get(g,m-1);let w;e.getElement(g)===t.getElement(m)?(g===0||m===0?w=0:w=r.get(g-1,m-1),g>0&&m>0&&o.get(g-1,m-1)===3&&(w+=a.get(g-1,m-1)),w+=s?s(g,m):1):w=-1;const v=Math.max(p,b,w);if(v===w){const _=g>0&&m>0?a.get(g-1,m-1):0;a.set(g,m,_+1),o.set(g,m,3)}else v===p?(a.set(g,m,0),o.set(g,m,1)):v===b&&(a.set(g,m,0),o.set(g,m,2));r.set(g,m,v)}const l=[];let c=e.length,d=t.length;function u(g,m){(g+1!==c||m+1!==d)&&l.push(new is(new Rt(g+1,c),new Rt(m+1,d))),c=g,d=m}let h=e.length-1,f=t.length-1;for(;h>=0&&f>=0;)o.get(h,f)===3?(u(h,f),h--,f--):o.get(h,f)===1?h--:f--;return u(-1,-1),l.reverse(),new Hd(l,!1)}}class aoe{compute(e,t,i=v1.instance){if(e.length===0||t.length===0)return Hd.trivial(e,t);const s=e,r=t;function o(m,p){for(;m<s.length&&p<r.length&&s.getElement(m)===r.getElement(p);)m++,p++;return m}let a=0;const l=new XXe;l.set(0,o(0,0));const c=new zXe;c.set(0,l.get(0)===0?null:new EK(null,0,0,l.get(0)));let d=0;e:for(;;){if(a++,!i.isValid())return Hd.trivialTimedOut(s,r);const m=-Math.min(a,r.length+a%2),p=Math.min(a,s.length+a%2);for(d=m;d<=p;d+=2){const b=d===p?-1:l.get(d+1),w=d===m?-1:l.get(d-1)+1,v=Math.min(Math.max(b,w),s.length),_=v-d;if(v>s.length||_>r.length)continue;const y=o(v,_);l.set(d,y);const C=v===b?c.get(d+1):c.get(d-1);if(c.set(d,y!==v?new EK(C,v,_,y-v):C),l.get(d)===s.length&&l.get(d)-d===r.length)break e}}let u=c.get(d);const h=[];let f=s.length,g=r.length;for(;;){const m=u?u.x+u.length:0,p=u?u.y+u.length:0;if((m!==f||p!==g)&&h.push(new is(new Rt(m,f),new Rt(p,g))),!u)break;f=u.x,g=u.y,u=u.prev}return h.reverse(),new Hd(h,!1)}}class EK{constructor(e,t,i,s){this.prev=e,this.x=t,this.y=i,this.length=s}}class XXe{constructor(){this.positiveArr=new Int32Array(10),this.negativeArr=new Int32Array(10)}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){if(e<0){if(e=-e-1,e>=this.negativeArr.length){const i=this.negativeArr;this.negativeArr=new Int32Array(i.length*2),this.negativeArr.set(i)}this.negativeArr[e]=t}else{if(e>=this.positiveArr.length){const i=this.positiveArr;this.positiveArr=new Int32Array(i.length*2),this.positiveArr.set(i)}this.positiveArr[e]=t}}}class zXe{constructor(){this.positiveArr=[],this.negativeArr=[]}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){e<0?(e=-e-1,this.negativeArr[e]=t):this.positiveArr[e]=t}}class $L{constructor(e,t,i){this.lines=e,this.considerWhitespaceChanges=i,this.elements=[],this.firstCharOffsetByLine=[],this.additionalOffsetByLine=[];let s=!1;t.start>0&&t.endExclusive>=e.length&&(t=new Rt(t.start-1,t.endExclusive),s=!0),this.lineRange=t,this.firstCharOffsetByLine[0]=0;for(let r=this.lineRange.start;r<this.lineRange.endExclusive;r++){let o=e[r],a=0;if(s)a=o.length,o="",s=!1;else if(!i){const l=o.trimStart();a=o.length-l.length,o=l.trimEnd()}this.additionalOffsetByLine.push(a);for(let l=0;l<o.length;l++)this.elements.push(o.charCodeAt(l));r<e.length-1&&(this.elements.push(10),this.firstCharOffsetByLine[r-this.lineRange.start+1]=this.elements.length)}this.additionalOffsetByLine.push(0)}toString(){return`Slice: "${this.text}"`}get text(){return this.getText(new Rt(0,this.length))}getText(e){return this.elements.slice(e.start,e.endExclusive).map(t=>String.fromCharCode(t)).join("")}getElement(e){return this.elements[e]}get length(){return this.elements.length}getBoundaryScore(e){const t=RK(e>0?this.elements[e-1]:-1),i=RK(e<this.elements.length?this.elements[e]:-1);if(t===7&&i===8)return 0;if(t===8)return 150;let s=0;return t!==i&&(s+=10,t===0&&i===1&&(s+=1)),s+=NK(t),s+=NK(i),s}translateOffset(e){if(this.lineRange.isEmpty)return new pe(this.lineRange.start+1,1);const t=j_(this.firstCharOffsetByLine,i=>i<=e);return new pe(this.lineRange.start+t+1,e-this.firstCharOffsetByLine[t]+this.additionalOffsetByLine[t]+1)}translateRange(e){return te.fromPositions(this.translateOffset(e.start),this.translateOffset(e.endExclusive))}findWordContaining(e){if(e<0||e>=this.elements.length||!VR(this.elements[e]))return;let t=e;for(;t>0&&VR(this.elements[t-1]);)t--;let i=e;for(;i<this.elements.length&&VR(this.elements[i]);)i++;return new Rt(t,i)}countLinesIn(e){return this.translateOffset(e.endExclusive).lineNumber-this.translateOffset(e.start).lineNumber}isStronglyEqual(e,t){return this.elements[e]===this.elements[t]}extendToFullLines(e){var t,i;const s=(t=Vb(this.firstCharOffsetByLine,o=>o<=e.start))!==null&&t!==void 0?t:0,r=(i=P4e(this.firstCharOffsetByLine,o=>e.endExclusive<=o))!==null&&i!==void 0?i:this.elements.length;return new Rt(s,r)}}function VR(n){return n>=97&&n<=122||n>=65&&n<=90||n>=48&&n<=57}const HXe={0:0,1:0,2:0,3:10,4:2,5:30,6:3,7:10,8:10};function NK(n){return HXe[n]}function RK(n){return n===10?8:n===13?7:LA(n)?6:n>=97&&n<=122?0:n>=65&&n<=90?1:n>=48&&n<=57?2:n===-1?3:n===44||n===59?5:4}function UXe(n,e,t,i,s,r){let{moves:o,excludedChanges:a}=KXe(n,e,t,r);if(!r.isValid())return[];const l=n.filter(d=>!a.has(d)),c=jXe(l,i,s,e,t,r);return v3(o,c),o=JXe(o),o=o.filter(d=>{const u=d.original.toOffsetRange().slice(e).map(f=>f.trim());return u.join(`
`).length>=15&&YXe(u,f=>f.length>=2)>=2}),o=$Xe(n,o),o}function YXe(n,e){let t=0;for(const i of n)e(i)&&t++;return t}function KXe(n,e,t,i){const s=[],r=n.filter(l=>l.modified.isEmpty&&l.original.length>=3).map(l=>new zb(l.original,e,l)),o=new Set(n.filter(l=>l.original.isEmpty&&l.modified.length>=3).map(l=>new zb(l.modified,t,l))),a=new Set;for(const l of r){let c=-1,d;for(const u of o){const h=l.computeSimilarity(u);h>c&&(c=h,d=u)}if(c>.9&&d&&(o.delete(d),s.push(new Cr(l.range,d.range)),a.add(l.source),a.add(d.source)),!i.isValid())return{moves:s,excludedChanges:a}}return{moves:s,excludedChanges:a}}function jXe(n,e,t,i,s,r){const o=[],a=new Uie;for(const h of n)for(let f=h.original.startLineNumber;f<h.original.endLineNumberExclusive-2;f++){const g=`${e[f-1]}:${e[f+1-1]}:${e[f+2-1]}`;a.add(g,{range:new Lt(f,f+3)})}const l=[];n.sort(Fa(h=>h.modified.startLineNumber,vh));for(const h of n){let f=[];for(let g=h.modified.startLineNumber;g<h.modified.endLineNumberExclusive-2;g++){const m=`${t[g-1]}:${t[g+1-1]}:${t[g+2-1]}`,p=new Lt(g,g+3),b=[];a.forEach(m,({range:w})=>{for(const _ of f)if(_.originalLineRange.endLineNumberExclusive+1===w.endLineNumberExclusive&&_.modifiedLineRange.endLineNumberExclusive+1===p.endLineNumberExclusive){_.originalLineRange=new Lt(_.originalLineRange.startLineNumber,w.endLineNumberExclusive),_.modifiedLineRange=new Lt(_.modifiedLineRange.startLineNumber,p.endLineNumberExclusive),b.push(_);return}const v={modifiedLineRange:p,originalLineRange:w};l.push(v),b.push(v)}),f=b}if(!r.isValid())return[]}l.sort(jRe(Fa(h=>h.modifiedLineRange.length,vh)));const c=new $o,d=new $o;for(const h of l){const f=h.modifiedLineRange.startLineNumber-h.originalLineRange.startLineNumber,g=c.subtractFrom(h.modifiedLineRange),m=d.subtractFrom(h.originalLineRange).getWithDelta(f),p=g.getIntersection(m);for(const b of p.ranges){if(b.length<3)continue;const w=b,v=b.delta(-f);o.push(new Cr(v,w)),c.addRange(w),d.addRange(v)}}o.sort(Fa(h=>h.original.startLineNumber,vh));const u=new kw(n);for(let h=0;h<o.length;h++){const f=o[h],g=u.findLastMonotonous(C=>C.original.startLineNumber<=f.original.startLineNumber),m=Vb(n,C=>C.modified.startLineNumber<=f.modified.startLineNumber),p=Math.max(f.original.startLineNumber-g.original.startLineNumber,f.modified.startLineNumber-m.modified.startLineNumber),b=u.findLastMonotonous(C=>C.original.startLineNumber<f.original.endLineNumberExclusive),w=Vb(n,C=>C.modified.startLineNumber<f.modified.endLineNumberExclusive),v=Math.max(b.original.endLineNumberExclusive-f.original.endLineNumberExclusive,w.modified.endLineNumberExclusive-f.modified.endLineNumberExclusive);let _;for(_=0;_<p;_++){const C=f.original.startLineNumber-_-1,S=f.modified.startLineNumber-_-1;if(C>i.length||S>s.length||c.contains(S)||d.contains(C)||!WK(i[C-1],s[S-1],r))break}_>0&&(d.addRange(new Lt(f.original.startLineNumber-_,f.original.startLineNumber)),c.addRange(new Lt(f.modified.startLineNumber-_,f.modified.startLineNumber)));let y;for(y=0;y<v;y++){const C=f.original.endLineNumberExclusive+y,S=f.modified.endLineNumberExclusive+y;if(C>i.length||S>s.length||c.contains(S)||d.contains(C)||!WK(i[C-1],s[S-1],r))break}y>0&&(d.addRange(new Lt(f.original.endLineNumberExclusive,f.original.endLineNumberExclusive+y)),c.addRange(new Lt(f.modified.endLineNumberExclusive,f.modified.endLineNumberExclusive+y))),(_>0||y>0)&&(o[h]=new Cr(new Lt(f.original.startLineNumber-_,f.original.endLineNumberExclusive+y),new Lt(f.modified.startLineNumber-_,f.modified.endLineNumberExclusive+y)))}return o}function WK(n,e,t){if(n.trim()===e.trim())return!0;if(n.length>300&&e.length>300)return!1;const s=new aoe().compute(new $L([n],new Rt(0,1),!1),new $L([e],new Rt(0,1),!1),t);let r=0;const o=is.invert(s.diffs,n.length);for(const d of o)d.seq1Range.forEach(u=>{LA(n.charCodeAt(u))||r++});function a(d){let u=0;for(let h=0;h<n.length;h++)LA(d.charCodeAt(h))||u++;return u}const l=a(n.length>e.length?n:e);return r/l>.6&&l>10}function JXe(n){if(n.length===0)return n;n.sort(Fa(t=>t.original.startLineNumber,vh));const e=[n[0]];for(let t=1;t<n.length;t++){const i=e[e.length-1],s=n[t],r=s.original.startLineNumber-i.original.endLineNumberExclusive,o=s.modified.startLineNumber-i.modified.endLineNumberExclusive;if(r>=0&&o>=0&&r+o<=2){e[e.length-1]=i.join(s);continue}e.push(s)}return e}function $Xe(n,e){const t=new kw(n);return e=e.filter(i=>{const s=t.findLastMonotonous(a=>a.original.startLineNumber<i.original.endLineNumberExclusive)||new Cr(new Lt(1,1),new Lt(1,1)),r=Vb(n,a=>a.modified.startLineNumber<i.modified.endLineNumberExclusive);return s!==r}),e}function kA(n,e,t){let i=t;return i=AK(n,e,i),i=AK(n,e,i),i=QXe(n,e,i),i}function AK(n,e,t){if(t.length===0)return t;const i=[];i.push(t[0]);for(let r=1;r<t.length;r++){const o=i[i.length-1];let a=t[r];if(a.seq1Range.isEmpty||a.seq2Range.isEmpty){const l=a.seq1Range.start-o.seq1Range.endExclusive;let c;for(c=1;c<=l&&!(n.getElement(a.seq1Range.start-c)!==n.getElement(a.seq1Range.endExclusive-c)||e.getElement(a.seq2Range.start-c)!==e.getElement(a.seq2Range.endExclusive-c));c++);if(c--,c===l){i[i.length-1]=new is(new Rt(o.seq1Range.start,a.seq1Range.endExclusive-l),new Rt(o.seq2Range.start,a.seq2Range.endExclusive-l));continue}a=a.delta(-c)}i.push(a)}const s=[];for(let r=0;r<i.length-1;r++){const o=i[r+1];let a=i[r];if(a.seq1Range.isEmpty||a.seq2Range.isEmpty){const l=o.seq1Range.start-a.seq1Range.endExclusive;let c;for(c=0;c<l&&!(!n.isStronglyEqual(a.seq1Range.start+c,a.seq1Range.endExclusive+c)||!e.isStronglyEqual(a.seq2Range.start+c,a.seq2Range.endExclusive+c));c++);if(c===l){i[r+1]=new is(new Rt(a.seq1Range.start+l,o.seq1Range.endExclusive),new Rt(a.seq2Range.start+l,o.seq2Range.endExclusive));continue}c>0&&(a=a.delta(c))}s.push(a)}return i.length>0&&s.push(i[i.length-1]),s}function QXe(n,e,t){if(!n.getBoundaryScore||!e.getBoundaryScore)return t;for(let i=0;i<t.length;i++){const s=i>0?t[i-1]:void 0,r=t[i],o=i+1<t.length?t[i+1]:void 0,a=new Rt(s?s.seq1Range.endExclusive+1:0,o?o.seq1Range.start-1:n.length),l=new Rt(s?s.seq2Range.endExclusive+1:0,o?o.seq2Range.start-1:e.length);r.seq1Range.isEmpty?t[i]=FK(r,n,e,a,l):r.seq2Range.isEmpty&&(t[i]=FK(r.swap(),e,n,l,a).swap())}return t}function FK(n,e,t,i,s){let o=1;for(;n.seq1Range.start-o>=i.start&&n.seq2Range.start-o>=s.start&&t.isStronglyEqual(n.seq2Range.start-o,n.seq2Range.endExclusive-o)&&o<100;)o++;o--;let a=0;for(;n.seq1Range.start+a<i.endExclusive&&n.seq2Range.endExclusive+a<s.endExclusive&&t.isStronglyEqual(n.seq2Range.start+a,n.seq2Range.endExclusive+a)&&a<100;)a++;if(o===0&&a===0)return n;let l=0,c=-1;for(let d=-o;d<=a;d++){const u=n.seq2Range.start+d,h=n.seq2Range.endExclusive+d,f=n.seq1Range.start+d,g=e.getBoundaryScore(f)+t.getBoundaryScore(u)+t.getBoundaryScore(h);g>c&&(c=g,l=d)}return n.delta(l)}function qXe(n,e,t){const i=[];for(const s of t){const r=i[i.length-1];if(!r){i.push(s);continue}s.seq1Range.start-r.seq1Range.endExclusive<=2||s.seq2Range.start-r.seq2Range.endExclusive<=2?i[i.length-1]=new is(r.seq1Range.join(s.seq1Range),r.seq2Range.join(s.seq2Range)):i.push(s)}return i}function eze(n,e,t){const i=is.invert(t,n.length),s=[];let r=new ra(0,0);function o(l,c){if(l.offset1<r.offset1||l.offset2<r.offset2)return;const d=n.findWordContaining(l.offset1),u=e.findWordContaining(l.offset2);if(!d||!u)return;let h=new is(d,u);const f=h.intersect(c);let g=f.seq1Range.length,m=f.seq2Range.length;for(;i.length>0;){const p=i[0];if(!(p.seq1Range.intersects(h.seq1Range)||p.seq2Range.intersects(h.seq2Range)))break;const w=n.findWordContaining(p.seq1Range.start),v=e.findWordContaining(p.seq2Range.start),_=new is(w,v),y=_.intersect(p);if(g+=y.seq1Range.length,m+=y.seq2Range.length,h=h.join(_),h.seq1Range.endExclusive>=p.seq1Range.endExclusive)i.shift();else break}g+m<(h.seq1Range.length+h.seq2Range.length)*2/3&&s.push(h),r=h.getEndExclusives()}for(;i.length>0;){const l=i.shift();l.seq1Range.isEmpty||(o(l.getStarts(),l),o(l.getEndExclusives().delta(-1),l))}return tze(t,s)}function tze(n,e){const t=[];for(;n.length>0||e.length>0;){const i=n[0],s=e[0];let r;i&&(!s||i.seq1Range.start<s.seq1Range.start)?r=n.shift():r=e.shift(),t.length>0&&t[t.length-1].seq1Range.endExclusive>=r.seq1Range.start?t[t.length-1]=t[t.length-1].join(r):t.push(r)}return t}function ize(n,e,t){let i=t;if(i.length===0)return i;let s=0,r;do{r=!1;const o=[i[0]];for(let a=1;a<i.length;a++){let d=function(h,f){const g=new Rt(c.seq1Range.endExclusive,l.seq1Range.start);return n.getText(g).replace(/\s/g,"").length<=4&&(h.seq1Range.length+h.seq2Range.length>5||f.seq1Range.length+f.seq2Range.length>5)};const l=i[a],c=o[o.length-1];d(c,l)?(r=!0,o[o.length-1]=o[o.length-1].join(l)):o.push(l)}i=o}while(s++<10&&r);return i}function nze(n,e,t){let i=t;if(i.length===0)return i;let s=0,r;do{r=!1;const a=[i[0]];for(let l=1;l<i.length;l++){let u=function(f,g){const m=new Rt(d.seq1Range.endExclusive,c.seq1Range.start);if(n.countLinesIn(m)>5||m.length>500)return!1;const b=n.getText(m).trim();if(b.length>20||b.split(/\r\n|\r|\n/).length>1)return!1;const w=n.countLinesIn(f.seq1Range),v=f.seq1Range.length,_=e.countLinesIn(f.seq2Range),y=f.seq2Range.length,C=n.countLinesIn(g.seq1Range),S=g.seq1Range.length,k=e.countLinesIn(g.seq2Range),I=g.seq2Range.length,T=2*40+50;function D(M){return Math.min(M,T)}return Math.pow(Math.pow(D(w*40+v),1.5)+Math.pow(D(_*40+y),1.5),1.5)+Math.pow(Math.pow(D(C*40+S),1.5)+Math.pow(D(k*40+I),1.5),1.5)>(T**1.5)**1.5*1.3};const c=i[l],d=a[a.length-1];u(d,c)?(r=!0,a[a.length-1]=a[a.length-1].join(c)):a.push(c)}i=a}while(s++<10&&r);const o=[];return zRe(i,(a,l,c)=>{let d=l;function u(b){return b.length>0&&b.trim().length<=3&&l.seq1Range.length+l.seq2Range.length>100}const h=n.extendToFullLines(l.seq1Range),f=n.getText(new Rt(h.start,l.seq1Range.start));u(f)&&(d=d.deltaStart(-f.length));const g=n.getText(new Rt(l.seq1Range.endExclusive,h.endExclusive));u(g)&&(d=d.deltaEnd(g.length));const m=is.fromOffsetPairs(a?a.getEndExclusives():ra.zero,c?c.getStarts():ra.max),p=d.intersect(m);o.length>0&&p.getStarts().equals(o[o.length-1].getEndExclusives())?o[o.length-1]=o[o.length-1].join(p):o.push(p)}),o}class VK{constructor(e,t){this.trimmedHash=e,this.lines=t}getElement(e){return this.trimmedHash[e]}get length(){return this.trimmedHash.length}getBoundaryScore(e){const t=e===0?0:PK(this.lines[e-1]),i=e===this.lines.length?0:PK(this.lines[e]);return 1e3-(t+i)}getText(e){return this.lines.slice(e.start,e.endExclusive).join(`
`)}isStronglyEqual(e,t){return this.lines[e]===this.lines[t]}}function PK(n){let e=0;for(;e<n.length&&(n.charCodeAt(e)===32||n.charCodeAt(e)===9);)e++;return e}class loe{constructor(){this.dynamicProgrammingDiffing=new BXe,this.myersDiffingAlgorithm=new aoe}computeDiff(e,t,i){if(e.length<=1&&Gs(e,t,(y,C)=>y===C))return new nC([],[],!1);if(e.length===1&&e[0].length===0||t.length===1&&t[0].length===0)return new nC([new Ao(new Lt(1,e.length+1),new Lt(1,t.length+1),[new Tl(new te(1,1,e.length,e[e.length-1].length+1),new te(1,1,t.length,t[t.length-1].length+1))])],[],!1);const s=i.maxComputationTimeMs===0?v1.instance:new GXe(i.maxComputationTimeMs),r=!i.ignoreTrimWhitespace,o=new Map;function a(y){let C=o.get(y);return C===void 0&&(C=o.size,o.set(y,C)),C}const l=e.map(y=>a(y.trim())),c=t.map(y=>a(y.trim())),d=new VK(l,e),u=new VK(c,t),h=d.length+u.length<1700?this.dynamicProgrammingDiffing.compute(d,u,s,(y,C)=>e[y]===t[C]?t[C].length===0?.1:1+Math.log(1+t[C].length):.99):this.myersDiffingAlgorithm.compute(d,u,s);let f=h.diffs,g=h.hitTimeout;f=kA(d,u,f),f=ize(d,u,f);const m=[],p=y=>{if(r)for(let C=0;C<y;C++){const S=b+C,k=w+C;if(e[S]!==t[k]){const I=this.refineDiff(e,t,new is(new Rt(S,S+1),new Rt(k,k+1)),s,r);for(const T of I.mappings)m.push(T);I.hitTimeout&&(g=!0)}}};let b=0,w=0;for(const y of f){Ng(()=>y.seq1Range.start-b===y.seq2Range.start-w);const C=y.seq1Range.start-b;p(C),b=y.seq1Range.endExclusive,w=y.seq2Range.endExclusive;const S=this.refineDiff(e,t,y,s,r);S.hitTimeout&&(g=!0);for(const k of S.mappings)m.push(k)}p(e.length-b);const v=OK(m,e,t);let _=[];return i.computeMoves&&(_=this.computeMoves(v,e,t,l,c,s,r)),Ng(()=>{function y(S,k){if(S.lineNumber<1||S.lineNumber>k.length)return!1;const I=k[S.lineNumber-1];return!(S.column<1||S.column>I.length+1)}function C(S,k){return!(S.startLineNumber<1||S.startLineNumber>k.length+1||S.endLineNumberExclusive<1||S.endLineNumberExclusive>k.length+1)}for(const S of v){if(!S.innerChanges)return!1;for(const k of S.innerChanges)if(!(y(k.modifiedRange.getStartPosition(),t)&&y(k.modifiedRange.getEndPosition(),t)&&y(k.originalRange.getStartPosition(),e)&&y(k.originalRange.getEndPosition(),e)))return!1;if(!C(S.modified,t)||!C(S.original,e))return!1}return!0}),new nC(v,_,g)}computeMoves(e,t,i,s,r,o,a){return UXe(e,t,i,s,r,o).map(d=>{const u=this.refineDiff(t,i,new is(d.original.toOffsetRange(),d.modified.toOffsetRange()),o,a),h=OK(u.mappings,t,i,!0);return new soe(d,h)})}refineDiff(e,t,i,s,r){const o=new $L(e,i.seq1Range,r),a=new $L(t,i.seq2Range,r),l=o.length+a.length<500?this.dynamicProgrammingDiffing.compute(o,a,s):this.myersDiffingAlgorithm.compute(o,a,s);let c=l.diffs;return c=kA(o,a,c),c=eze(o,a,c),c=qXe(o,a,c),c=nze(o,a,c),{mappings:c.map(u=>new Tl(o.translateRange(u.seq1Range),a.translateRange(u.seq2Range))),hitTimeout:l.hitTimeout}}}function OK(n,e,t,i=!1){const s=[];for(const r of UV(n.map(o=>sze(o,e,t)),(o,a)=>o.original.overlapOrTouch(a.original)||o.modified.overlapOrTouch(a.modified))){const o=r[0],a=r[r.length-1];s.push(new Ao(o.original.join(a.original),o.modified.join(a.modified),r.map(l=>l.innerChanges[0])))}return Ng(()=>!i&&s.length>0&&(s[0].modified.startLineNumber!==s[0].original.startLineNumber||t.length-s[s.length-1].modified.endLineNumberExclusive!==e.length-s[s.length-1].original.endLineNumberExclusive)?!1:BV(s,(r,o)=>o.original.startLineNumber-r.original.endLineNumberExclusive===o.modified.startLineNumber-r.modified.endLineNumberExclusive&&r.original.endLineNumberExclusive<o.original.startLineNumber&&r.modified.endLineNumberExclusive<o.modified.startLineNumber)),s}function sze(n,e,t){let i=0,s=0;n.modifiedRange.endColumn===1&&n.originalRange.endColumn===1&&n.originalRange.startLineNumber+i<=n.originalRange.endLineNumber&&n.modifiedRange.startLineNumber+i<=n.modifiedRange.endLineNumber&&(s=-1),n.modifiedRange.startColumn-1>=t[n.modifiedRange.startLineNumber-1].length&&n.originalRange.startColumn-1>=e[n.originalRange.startLineNumber-1].length&&n.originalRange.startLineNumber<=n.originalRange.endLineNumber+s&&n.modifiedRange.startLineNumber<=n.modifiedRange.endLineNumber+s&&(i=1);const r=new Lt(n.originalRange.startLineNumber+i,n.originalRange.endLineNumber+1+s),o=new Lt(n.modifiedRange.startLineNumber+i,n.modifiedRange.endLineNumber+1+s);return new Ao(r,o,[n])}const ZK={getLegacy:()=>new VXe,getDefault:()=>new loe};function coe(n){const e=[];for(const t of n){const i=Number(t);(i||i===0&&t.replace(/\s/g,"")!=="")&&e.push(i)}return e}function pO(n,e,t,i){return{red:n/255,blue:t/255,green:e/255,alpha:i}}function ov(n,e){const t=e.index,i=e[0].length;if(!t)return;const s=n.positionAt(t);return{startLineNumber:s.lineNumber,startColumn:s.column,endLineNumber:s.lineNumber,endColumn:s.column+i}}function rze(n,e){if(!n)return;const t=Ce.Format.CSS.parseHex(e);if(t)return{range:n,color:pO(t.rgba.r,t.rgba.g,t.rgba.b,t.rgba.a)}}function GK(n,e,t){if(!n||e.length!==1)return;const s=e[0].values(),r=coe(s);return{range:n,color:pO(r[0],r[1],r[2],t?r[3]:1)}}function BK(n,e,t){if(!n||e.length!==1)return;const s=e[0].values(),r=coe(s),o=new Ce(new Ta(r[0],r[1]/100,r[2]/100,t?r[3]:1));return{range:n,color:pO(o.rgba.r,o.rgba.g,o.rgba.b,o.rgba.a)}}function av(n,e){return typeof n=="string"?[...n.matchAll(e)]:n.findMatches(e)}function oze(n){const e=[],i=av(n,/\b(rgb|rgba|hsl|hsla)(\([0-9\s,.\%]*\))|(#)([A-Fa-f0-9]{3})\b|(#)([A-Fa-f0-9]{4})\b|(#)([A-Fa-f0-9]{6})\b|(#)([A-Fa-f0-9]{8})\b/gm);if(i.length>0)for(const s of i){const r=s.filter(c=>c!==void 0),o=r[1],a=r[2];if(!a)continue;let l;if(o==="rgb"){const c=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*\)$/gm;l=GK(ov(n,s),av(a,c),!1)}else if(o==="rgba"){const c=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;l=GK(ov(n,s),av(a,c),!0)}else if(o==="hsl"){const c=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*\)$/gm;l=BK(ov(n,s),av(a,c),!1)}else if(o==="hsla"){const c=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;l=BK(ov(n,s),av(a,c),!0)}else o==="#"&&(l=rze(ov(n,s),o+a));l&&e.push(l)}return e}function aze(n){return!n||typeof n.getValue!="function"||typeof n.positionAt!="function"?[]:oze(n)}const XK=new RegExp("\\bMARK:\\s*(.*)$","d"),lze=/^-+|-+$/g;function cze(n,e){var t;let i=[];if(e.findRegionSectionHeaders&&(!((t=e.foldingRules)===null||t===void 0)&&t.markers)){const s=dze(n,e);i=i.concat(s)}if(e.findMarkSectionHeaders){const s=uze(n);i=i.concat(s)}return i}function dze(n,e){const t=[],i=n.getLineCount();for(let s=1;s<=i;s++){const r=n.getLineContent(s),o=r.match(e.foldingRules.markers.start);if(o){const a={startLineNumber:s,startColumn:o[0].length+1,endLineNumber:s,endColumn:r.length+1};if(a.endColumn>a.startColumn){const l={range:a,...doe(r.substring(o[0].length)),shouldBeInComments:!1};(l.text||l.hasSeparatorLine)&&t.push(l)}}}return t}function uze(n){const e=[],t=n.getLineCount();for(let i=1;i<=t;i++){const s=n.getLineContent(i);hze(s,i,e)}return e}function hze(n,e,t){XK.lastIndex=0;const i=XK.exec(n);if(i){const s=i.indices[1][0]+1,r=i.indices[1][1]+1,o={startLineNumber:e,startColumn:s,endLineNumber:e,endColumn:r};if(o.endColumn>o.startColumn){const a={range:o,...doe(i[1]),shouldBeInComments:!0};(a.text||a.hasSeparatorLine)&&t.push(a)}}}function doe(n){n=n.trim();const e=n.startsWith("-");return n=n.replace(lze,""),{text:n,hasSeparatorLine:e}}class fze extends LXe{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}findMatches(e){const t=[];for(let i=0;i<this._lines.length;i++){const s=this._lines[i],r=this.offsetAt(new pe(i+1,1)),o=s.matchAll(e);for(const a of o)(a.index||a.index===0)&&(a.index=a.index+r),t.push(a)}return t}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){const i=Z_(e.column,HV(t),this._lines[e.lineNumber-1],0);return i?new te(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn):null}words(e){const t=this._lines,i=this._wordenize.bind(this);let s=0,r="",o=0,a=[];return{*[Symbol.iterator](){for(;;)if(o<a.length){const l=r.substring(a[o].start,a[o].end);o+=1,yield l}else if(s<t.length)r=t[s],a=i(r,e),o=0,s+=1;else break}}}getLineWords(e,t){const i=this._lines[e-1],s=this._wordenize(i,t),r=[];for(const o of s)r.push({word:i.substring(o.start,o.end),startColumn:o.start+1,endColumn:o.end+1});return r}_wordenize(e,t){const i=[];let s;for(t.lastIndex=0;(s=t.exec(e))&&s[0].length!==0;)i.push({start:s.index,end:s.index+s[0].length});return i}getValueInRange(e){if(e=this._validateRange(e),e.startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);const t=this._eol,i=e.startLineNumber-1,s=e.endLineNumber-1,r=[];r.push(this._lines[i].substring(e.startColumn-1));for(let o=i+1;o<s;o++)r.push(this._lines[o]);return r.push(this._lines[s].substring(0,e.endColumn-1)),r.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();const t=this._lineStarts.getIndexOf(e),i=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,i)}}_validateRange(e){const t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),i=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||i.lineNumber!==e.endLineNumber||i.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:i.lineNumber,endColumn:i.column}:e}_validatePosition(e){if(!pe.isIPosition(e))throw new Error("bad position");let{lineNumber:t,column:i}=e,s=!1;if(t<1)t=1,i=1,s=!0;else if(t>this._lines.length)t=this._lines.length,i=this._lines[t-1].length+1,s=!0;else{const r=this._lines[t-1].length+1;i<1?(i=1,s=!0):i>r&&(i=r,s=!0)}return s?{lineNumber:t,column:i}:e}}class Lh{constructor(e,t){this._host=e,this._models=Object.create(null),this._foreignModuleFactory=t,this._foreignModule=null}dispose(){this._models=Object.create(null)}_getModel(e){return this._models[e]}_getModels(){const e=[];return Object.keys(this._models).forEach(t=>e.push(this._models[t])),e}acceptNewModel(e){this._models[e.url]=new fze(Ft.parse(e.url),e.lines,e.EOL,e.versionId)}acceptModelChanged(e,t){if(!this._models[e])return;this._models[e].onEvents(t)}acceptRemovedModel(e){this._models[e]&&delete this._models[e]}async computeUnicodeHighlights(e,t,i){const s=this._getModel(e);return s?MXe.computeUnicodeHighlights(s,t,i):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}}async findSectionHeaders(e,t){const i=this._getModel(e);return i?cze(i,t):[]}async computeDiff(e,t,i,s){const r=this._getModel(e),o=this._getModel(t);return!r||!o?null:Lh.computeDiff(r,o,i,s)}static computeDiff(e,t,i,s){const r=s==="advanced"?ZK.getDefault():ZK.getLegacy(),o=e.getLinesContent(),a=t.getLinesContent(),l=r.computeDiff(o,a,i),c=l.changes.length>0?!1:this._modelsAreIdentical(e,t);function d(u){return u.map(h=>{var f;return[h.original.startLineNumber,h.original.endLineNumberExclusive,h.modified.startLineNumber,h.modified.endLineNumberExclusive,(f=h.innerChanges)===null||f===void 0?void 0:f.map(g=>[g.originalRange.startLineNumber,g.originalRange.startColumn,g.originalRange.endLineNumber,g.originalRange.endColumn,g.modifiedRange.startLineNumber,g.modifiedRange.startColumn,g.modifiedRange.endLineNumber,g.modifiedRange.endColumn])]})}return{identical:c,quitEarly:l.hitTimeout,changes:d(l.changes),moves:l.moves.map(u=>[u.lineRangeMapping.original.startLineNumber,u.lineRangeMapping.original.endLineNumberExclusive,u.lineRangeMapping.modified.startLineNumber,u.lineRangeMapping.modified.endLineNumberExclusive,d(u.changes)])}}static _modelsAreIdentical(e,t){const i=e.getLineCount(),s=t.getLineCount();if(i!==s)return!1;for(let r=1;r<=i;r++){const o=e.getLineContent(r),a=t.getLineContent(r);if(o!==a)return!1}return!0}async computeMoreMinimalEdits(e,t,i){const s=this._getModel(e);if(!s)return t;const r=[];let o;t=t.slice(0).sort((l,c)=>{if(l.range&&c.range)return te.compareRangesUsingStarts(l.range,c.range);const d=l.range?0:1,u=c.range?0:1;return d-u});let a=0;for(let l=1;l<t.length;l++)te.getEndPosition(t[a].range).equals(te.getStartPosition(t[l].range))?(t[a].range=te.fromPositions(te.getStartPosition(t[a].range),te.getEndPosition(t[l].range)),t[a].text+=t[l].text):(a++,t[a]=t[l]);t.length=a+1;for(let{range:l,text:c,eol:d}of t){if(typeof d=="number"&&(o=d),te.isEmpty(l)&&!c)continue;const u=s.getValueInRange(l);if(c=c.replace(/\r\n|\n|\r/g,s.eol),u===c)continue;if(Math.max(c.length,u.length)>Lh._diffLimit){r.push({range:l,text:c});continue}const h=CXe(u,c,i),f=s.offsetAt(te.lift(l).getStartPosition());for(const g of h){const m=s.positionAt(f+g.originalStart),p=s.positionAt(f+g.originalStart+g.originalLength),b={text:c.substr(g.modifiedStart,g.modifiedLength),range:{startLineNumber:m.lineNumber,startColumn:m.column,endLineNumber:p.lineNumber,endColumn:p.column}};s.getValueInRange(b.range)!==b.text&&r.push(b)}}return typeof o=="number"&&r.push({eol:o,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),r}async computeLinks(e){const t=this._getModel(e);return t?IXe(t):null}async computeDefaultDocumentColors(e){const t=this._getModel(e);return t?aze(t):null}async textualSuggest(e,t,i,s){const r=new Hc,o=new RegExp(i,s),a=new Set;e:for(const l of e){const c=this._getModel(l);if(c){for(const d of c.words(o))if(!(d===t||!isNaN(Number(d)))&&(a.add(d),a.size>Lh._suggestionsLimit))break e}}return{words:Array.from(a),duration:r.elapsed()}}async computeWordRanges(e,t,i,s){const r=this._getModel(e);if(!r)return Object.create(null);const o=new RegExp(i,s),a=Object.create(null);for(let l=t.startLineNumber;l<t.endLineNumber;l++){const c=r.getLineWords(l,o);for(const d of c){if(!isNaN(Number(d.word)))continue;let u=a[d.word];u||(u=[],a[d.word]=u),u.push({startLineNumber:l,startColumn:d.startColumn,endLineNumber:l,endColumn:d.endColumn})}}return a}async navigateValueSet(e,t,i,s,r){const o=this._getModel(e);if(!o)return null;const a=new RegExp(s,r);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});const l=o.getValueInRange(t),c=o.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},a);if(!c)return null;const d=o.getValueInRange(c);return yA.INSTANCE.navigateValueSet(t,l,c,d,i)}loadForeignModule(e,t,i){const o={host:H9e(i,(a,l)=>this._host.fhr(a,l)),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(o,t),Promise.resolve(qV(this._foreignModule))):Promise.reject(new Error("Unexpected usage"))}fmr(e,t){if(!this._foreignModule||typeof this._foreignModule[e]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(i){return Promise.reject(i)}}}Lh._diffLimit=1e5;Lh._suggestionsLimit=1e4;typeof importScripts=="function"&&(globalThis.monaco=toe());const uoe=ri("textResourceConfigurationService"),hoe=ri("textResourcePropertiesService");var gze=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},lv=function(n,e){return function(t,i){e(t,i,n)}};const zK=60*1e3,HK=5*60*1e3;function Bf(n,e){const t=n.getModel(e);return!(!t||t.isTooLargeForSyncing())}let xA=class extends Le{constructor(e,t,i,s,r){super(),this._modelService=e,this._workerManager=this._register(new pze(this._modelService,s)),this._logService=i,this._register(r.linkProvider.register({language:"*",hasAccessToAllModels:!0},{provideLinks:(o,a)=>Bf(this._modelService,o.uri)?this._workerManager.withWorker().then(l=>l.computeLinks(o.uri)).then(l=>l&&{links:l}):Promise.resolve({links:[]})})),this._register(r.completionProvider.register("*",new mze(this._workerManager,t,this._modelService,s)))}dispose(){super.dispose()}canComputeUnicodeHighlights(e){return Bf(this._modelService,e)}computedUnicodeHighlights(e,t,i){return this._workerManager.withWorker().then(s=>s.computedUnicodeHighlights(e,t,i))}async computeDiff(e,t,i,s){const r=await this._workerManager.withWorker().then(l=>l.computeDiff(e,t,i,s));if(!r)return null;return{identical:r.identical,quitEarly:r.quitEarly,changes:a(r.changes),moves:r.moves.map(l=>new soe(new Cr(new Lt(l[0],l[1]),new Lt(l[2],l[3])),a(l[4])))};function a(l){return l.map(c=>{var d;return new Ao(new Lt(c[0],c[1]),new Lt(c[2],c[3]),(d=c[4])===null||d===void 0?void 0:d.map(u=>new Tl(new te(u[0],u[1],u[2],u[3]),new te(u[4],u[5],u[6],u[7]))))})}}computeMoreMinimalEdits(e,t,i=!1){if(bw(t)){if(!Bf(this._modelService,e))return Promise.resolve(t);const s=Hc.create(),r=this._workerManager.withWorker().then(o=>o.computeMoreMinimalEdits(e,t,i));return r.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),s.elapsed())),Promise.race([r,Lb(1e3).then(()=>t)])}else return Promise.resolve(void 0)}canNavigateValueSet(e){return Bf(this._modelService,e)}navigateValueSet(e,t,i){return this._workerManager.withWorker().then(s=>s.navigateValueSet(e,t,i))}canComputeWordRanges(e){return Bf(this._modelService,e)}computeWordRanges(e,t){return this._workerManager.withWorker().then(i=>i.computeWordRanges(e,t))}findSectionHeaders(e,t){return this._workerManager.withWorker().then(i=>i.findSectionHeaders(e,t))}};xA=gze([lv(0,Ws),lv(1,uoe),lv(2,Yc),lv(3,ma),lv(4,ei)],xA);class mze{constructor(e,t,i,s){this.languageConfigurationService=s,this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=i}async provideCompletionItems(e,t){const i=this._configurationService.getValue(e.uri,t,"editor");if(i.wordBasedSuggestions==="off")return;const s=[];if(i.wordBasedSuggestions==="currentDocument")Bf(this._modelService,e.uri)&&s.push(e.uri);else for(const u of this._modelService.getModels())Bf(this._modelService,u.uri)&&(u===e?s.unshift(u.uri):(i.wordBasedSuggestions==="allDocuments"||u.getLanguageId()===e.getLanguageId())&&s.push(u.uri));if(s.length===0)return;const r=this.languageConfigurationService.getLanguageConfiguration(e.getLanguageId()).getWordDefinition(),o=e.getWordAtPosition(t),a=o?new te(t.lineNumber,o.startColumn,t.lineNumber,o.endColumn):te.fromPositions(t),l=a.setEndPosition(t.lineNumber,t.column),d=await(await this._workerManager.withWorker()).textualSuggest(s,o?.word,r);if(d)return{duration:d.duration,suggestions:d.words.map(u=>({kind:18,label:u,insertText:u,range:{insert:l,replace:a}}))}}}class pze extends Le{constructor(e,t){super(),this.languageConfigurationService=t,this._modelService=e,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new VV).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(HK/2),Di),this._register(this._modelService.onModelRemoved(s=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;new Date().getTime()-this._lastWorkerUsedTime>HK&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new foe(this._modelService,!1,"editorWorkerService",this.languageConfigurationService)),Promise.resolve(this._editorWorkerClient)}}class bze extends Le{constructor(e,t,i){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!i){const s=new kV;s.cancelAndSet(()=>this._checkStopModelSync(),Math.round(zK/2)),this._register(s)}}dispose(){for(const e in this._syncedModels)Ns(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e,t){for(const i of e){const s=i.toString();this._syncedModels[s]||this._beginModelSync(i,t),this._syncedModels[s]&&(this._syncedModelsLastUsedTime[s]=new Date().getTime())}}_checkStopModelSync(){const e=new Date().getTime(),t=[];for(const i in this._syncedModelsLastUsedTime)e-this._syncedModelsLastUsedTime[i]>zK&&t.push(i);for(const i of t)this._stopModelSync(i)}_beginModelSync(e,t){const i=this._modelService.getModel(e);if(!i||!t&&i.isTooLargeForSyncing())return;const s=e.toString();this._proxy.acceptNewModel({url:i.uri.toString(),lines:i.getLinesContent(),EOL:i.getEOL(),versionId:i.getVersionId()});const r=new ct;r.add(i.onDidChangeContent(o=>{this._proxy.acceptModelChanged(s.toString(),o)})),r.add(i.onWillDispose(()=>{this._stopModelSync(s)})),r.add(Et(()=>{this._proxy.acceptRemovedModel(s)})),this._syncedModels[s]=r}_stopModelSync(e){const t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],Ns(t)}}class UK{constructor(e){this._instance=e,this._proxyObj=Promise.resolve(this._instance)}dispose(){this._instance.dispose()}getProxyObject(){return this._proxyObj}}class PR{constructor(e){this._workerClient=e}fhr(e,t){return this._workerClient.fhr(e,t)}}class foe extends Le{constructor(e,t,i,s){super(),this.languageConfigurationService=s,this._disposed=!1,this._modelService=e,this._keepIdleModels=t,this._workerFactory=new pT(i),this._worker=null,this._modelManager=null}fhr(e,t){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(new vXe(this._workerFactory,"vs/editor/common/services/editorSimpleWorker",new PR(this)))}catch(e){wA(e),this._worker=new UK(new Lh(new PR(this),null))}return this._worker}_getProxy(){return this._getOrCreateWorker().getProxyObject().then(void 0,e=>(wA(e),this._worker=new UK(new Lh(new PR(this),null)),this._getOrCreateWorker().getProxyObject()))}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new bze(e,this._modelService,this._keepIdleModels))),this._modelManager}async _withSyncedResources(e,t=!1){return this._disposed?Promise.reject(zEe()):this._getProxy().then(i=>(this._getOrCreateModelManager(i).ensureSyncedResources(e,t),i))}computedUnicodeHighlights(e,t,i){return this._withSyncedResources([e]).then(s=>s.computeUnicodeHighlights(e.toString(),t,i))}computeDiff(e,t,i,s){return this._withSyncedResources([e,t],!0).then(r=>r.computeDiff(e.toString(),t.toString(),i,s))}computeMoreMinimalEdits(e,t,i){return this._withSyncedResources([e]).then(s=>s.computeMoreMinimalEdits(e.toString(),t,i))}computeLinks(e){return this._withSyncedResources([e]).then(t=>t.computeLinks(e.toString()))}computeDefaultDocumentColors(e){return this._withSyncedResources([e]).then(t=>t.computeDefaultDocumentColors(e.toString()))}async textualSuggest(e,t,i){const s=await this._withSyncedResources(e),r=i.source,o=i.flags;return s.textualSuggest(e.map(a=>a.toString()),t,r,o)}computeWordRanges(e,t){return this._withSyncedResources([e]).then(i=>{const s=this._modelService.getModel(e);if(!s)return Promise.resolve(null);const r=this.languageConfigurationService.getLanguageConfiguration(s.getLanguageId()).getWordDefinition(),o=r.source,a=r.flags;return i.computeWordRanges(e.toString(),t,o,a)})}navigateValueSet(e,t,i){return this._withSyncedResources([e]).then(s=>{const r=this._modelService.getModel(e);if(!r)return null;const o=this.languageConfigurationService.getLanguageConfiguration(r.getLanguageId()).getWordDefinition(),a=o.source,l=o.flags;return s.navigateValueSet(e.toString(),t,i,a,l)})}findSectionHeaders(e,t){return this._withSyncedResources([e]).then(i=>i.findSectionHeaders(e.toString(),t))}dispose(){super.dispose(),this._disposed=!0}}function vze(n,e,t){return new _ze(n,e,t)}class _ze extends foe{constructor(e,t,i){super(e,i.keepIdleModels||!1,i.label,t),this._foreignModuleId=i.moduleId,this._foreignModuleCreateData=i.createData||null,this._foreignModuleHost=i.host||null,this._foreignProxy=null}fhr(e,t){if(!this._foreignModuleHost||typeof this._foreignModuleHost[e]!="function")return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(i){return Promise.reject(i)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then(e=>{const t=this._foreignModuleHost?qV(this._foreignModuleHost):[];return e.loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,t).then(i=>{this._foreignModuleCreateData=null;const s=(a,l)=>e.fmr(a,l),r=(a,l)=>function(){const c=Array.prototype.slice.call(arguments,0);return l(a,c)},o={};for(const a of i)o[a]=r(a,s);return o})})),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(e){return this._withSyncedResources(e).then(t=>this.getProxy())}}function wze(n){return Array.isArray(n)}function yze(n){return!wze(n)}function goe(n){return typeof n=="string"}function YK(n){return!goe(n)}function Xf(n){return!n}function Ud(n,e){return n.ignoreCase&&e?e.toLowerCase():e}function KK(n){return n.replace(/[&<>'"_]/g,"-")}function Sze(n,e){console.log(`${n.languageId}: ${e}`)}function Yi(n,e){return new Error(`${n.languageId}: ${e}`)}function Gu(n,e,t,i,s){const r=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g;let o=null;return e.replace(r,function(a,l,c,d,u,h,f,g,m){return Xf(c)?Xf(d)?!Xf(u)&&u<i.length?Ud(n,i[u]):!Xf(f)&&n&&typeof n[f]=="string"?n[f]:(o===null&&(o=s.split("."),o.unshift(s)),!Xf(h)&&h<o.length?Ud(n,o[h]):""):Ud(n,t):"$"})}function Cze(n,e,t){const i=/\$[sS](\d\d?)/g;let s=null;return e.replace(i,function(r,o){return s===null&&(s=t.split("."),s.unshift(t)),!Xf(o)&&o<s.length?Ud(n,s[o]):""})}function rS(n,e){let t=e;for(;t&&t.length>0;){const i=n.tokenizer[t];if(i)return i;const s=t.lastIndexOf(".");s<0?t=null:t=t.substr(0,s)}return null}function Lze(n,e){let t=e;for(;t&&t.length>0;){if(n.stateNames[t])return!0;const s=t.lastIndexOf(".");s<0?t=null:t=t.substr(0,s)}return!1}var kze=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},xze=function(n,e){return function(t,i){e(t,i,n)}},TA;const moe=5;class _1{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(e!==null&&e.depth>=this._maxCacheDepth)return new Hp(e,t);let i=Hp.getStackElementId(e);i.length>0&&(i+="|"),i+=t;let s=this._entries[i];return s||(s=new Hp(e,t),this._entries[i]=s,s)}}_1._INSTANCE=new _1(moe);class Hp{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t="";for(;e!==null;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;e!==null&&t!==null;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return e===null&&t===null}equals(e){return Hp._equals(this,e)}push(e){return _1.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return _1.create(this.parent,e)}}class wp{constructor(e,t){this.languageId=e,this.state=t}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new wp(this.languageId,this.state)}}class Bu{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(t!==null)return new __(e,t);if(e!==null&&e.depth>=this._maxCacheDepth)return new __(e,t);const i=Hp.getStackElementId(e);let s=this._entries[i];return s||(s=new __(e,null),this._entries[i]=s,s)}}Bu._INSTANCE=new Bu(moe);class __{constructor(e,t){this.stack=e,this.embeddedLanguageData=t}clone(){return(this.embeddedLanguageData?this.embeddedLanguageData.clone():null)===this.embeddedLanguageData?this:Bu.create(this.stack,this.embeddedLanguageData)}equals(e){return!(e instanceof __)||!this.stack.equals(e.stack)?!1:this.embeddedLanguageData===null&&e.embeddedLanguageData===null?!0:this.embeddedLanguageData===null||e.embeddedLanguageData===null?!1:this.embeddedLanguageData.equals(e.embeddedLanguageData)}}class Tze{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterLanguage(e){this._languageId=e}emit(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=t,this._lastTokenLanguage=this._languageId,this._tokens.push(new H_(e,t,this._languageId)))}nestedLanguageTokenize(e,t,i,s){const r=i.languageId,o=i.state,a=Zn.get(r);if(!a)return this.enterLanguage(r),this.emit(s,""),o;const l=a.tokenize(e,t,o);if(s!==0)for(const c of l.tokens)this._tokens.push(new H_(c.offset+s,c.type,c.language));else this._tokens=this._tokens.concat(l.tokens);return this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,l.endState}finalize(e){return new fP(this._tokens,e)}}class QL{constructor(e,t){this._languageService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterLanguage(e){this._currentLanguageId=this._languageService.languageIdCodec.encodeLanguageId(e)}emit(e,t){const i=this._theme.match(this._currentLanguageId,t)|1024;this._lastTokenMetadata!==i&&(this._lastTokenMetadata=i,this._tokens.push(e),this._tokens.push(i))}static _merge(e,t,i){const s=e!==null?e.length:0,r=t.length,o=i!==null?i.length:0;if(s===0&&r===0&&o===0)return new Uint32Array(0);if(s===0&&r===0)return i;if(r===0&&o===0)return e;const a=new Uint32Array(s+r+o);e!==null&&a.set(e);for(let l=0;l<r;l++)a[s+l]=t[l];return i!==null&&a.set(i,s+r),a}nestedLanguageTokenize(e,t,i,s){const r=i.languageId,o=i.state,a=Zn.get(r);if(!a)return this.enterLanguage(r),this.emit(s,""),o;const l=a.tokenizeEncoded(e,t,o);if(s!==0)for(let c=0,d=l.tokens.length;c<d;c+=2)l.tokens[c]+=s;return this._prependTokens=QL._merge(this._prependTokens,this._tokens,l.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,l.endState}finalize(e){return new Y2(QL._merge(this._prependTokens,this._tokens,null),e)}}let w1=TA=class extends Le{constructor(e,t,i,s,r){super(),this._configurationService=r,this._languageService=e,this._standaloneThemeService=t,this._languageId=i,this._lexer=s,this._embeddedLanguages=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let o=!1;this._register(Zn.onDidChange(a=>{if(o)return;let l=!1;for(let c=0,d=a.changedLanguages.length;c<d;c++){const u=a.changedLanguages[c];if(this._embeddedLanguages[u]){l=!0;break}}l&&(o=!0,Zn.handleChange([this._languageId]),o=!1)})),this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}),this._register(this._configurationService.onDidChangeConfiguration(a=>{a.affectsConfiguration("editor.maxTokenizationLineLength")&&(this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}))}))}getLoadStatus(){const e=[];for(const t in this._embeddedLanguages){const i=Zn.get(t);if(i){if(i instanceof TA){const s=i.getLoadStatus();s.loaded===!1&&e.push(s.promise)}continue}Zn.isResolved(t)||e.push(Zn.getOrCreate(t))}return e.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then(t=>{})}}getInitialState(){const e=_1.create(null,this._lexer.start);return Bu.create(e,null)}tokenize(e,t,i){if(e.length>=this._maxTokenizationLineLength)return _se(this._languageId,i);const s=new Tze,r=this._tokenize(e,t,i,s);return s.finalize(r)}tokenizeEncoded(e,t,i){if(e.length>=this._maxTokenizationLineLength)return IP(this._languageService.languageIdCodec.encodeLanguageId(this._languageId),i);const s=new QL(this._languageService,this._standaloneThemeService.getColorTheme().tokenTheme),r=this._tokenize(e,t,i,s);return s.finalize(r)}_tokenize(e,t,i,s){return i.embeddedLanguageData?this._nestedTokenize(e,t,i,0,s):this._myTokenize(e,t,i,0,s)}_findLeavingNestedLanguageOffset(e,t){let i=this._lexer.tokenizer[t.stack.state];if(!i&&(i=rS(this._lexer,t.stack.state),!i))throw Yi(this._lexer,"tokenizer state is not defined: "+t.stack.state);let s=-1,r=!1;for(const o of i){if(!YK(o.action)||o.action.nextEmbedded!=="@pop")continue;r=!0;let a=o.resolveRegex(t.stack.state);const l=a.source;if(l.substr(0,4)==="^(?:"&&l.substr(l.length-1,1)===")"){const d=(a.ignoreCase?"i":"")+(a.unicode?"u":"");a=new RegExp(l.substr(4,l.length-5),d)}const c=e.search(a);c===-1||c!==0&&o.matchOnlyAtLineStart||(s===-1||c<s)&&(s=c)}if(!r)throw Yi(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return s}_nestedTokenize(e,t,i,s,r){const o=this._findLeavingNestedLanguageOffset(e,i);if(o===-1){const c=r.nestedLanguageTokenize(e,t,i.embeddedLanguageData,s);return Bu.create(i.stack,new wp(i.embeddedLanguageData.languageId,c))}const a=e.substring(0,o);a.length>0&&r.nestedLanguageTokenize(a,!1,i.embeddedLanguageData,s);const l=e.substring(o);return this._myTokenize(l,t,i,s+o,r)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,t,i,s,r){r.enterLanguage(this._languageId);const o=e.length,a=t&&this._lexer.includeLF?e+`
`:e,l=a.length;let c=i.embeddedLanguageData,d=i.stack,u=0,h=null,f=!0;for(;f||u<l;){const g=u,m=d.depth,p=h?h.groups.length:0,b=d.state;let w=null,v=null,_=null,y=null,C=null;if(h){w=h.matches;const I=h.groups.shift();v=I.matched,_=I.action,y=h.rule,h.groups.length===0&&(h=null)}else{if(!f&&u>=l)break;f=!1;let I=this._lexer.tokenizer[b];if(!I&&(I=rS(this._lexer,b),!I))throw Yi(this._lexer,"tokenizer state is not defined: "+b);const T=a.substr(u);for(const D of I)if((u===0||!D.matchOnlyAtLineStart)&&(w=T.match(D.resolveRegex(b)),w)){v=w[0],_=D.action;break}}if(w||(w=[""],v=""),_||(u<l&&(w=[a.charAt(u)],v=w[0]),_=this._lexer.defaultToken),v===null)break;for(u+=v.length;yze(_)&&YK(_)&&_.test;)_=_.test(v,w,b,u===l);let S=null;if(typeof _=="string"||Array.isArray(_))S=_;else if(_.group)S=_.group;else if(_.token!==null&&_.token!==void 0){if(_.tokenSubst?S=Gu(this._lexer,_.token,v,w,b):S=_.token,_.nextEmbedded)if(_.nextEmbedded==="@pop"){if(!c)throw Yi(this._lexer,"cannot pop embedded language if not inside one");c=null}else{if(c)throw Yi(this._lexer,"cannot enter embedded language from within an embedded language");C=Gu(this._lexer,_.nextEmbedded,v,w,b)}if(_.goBack&&(u=Math.max(0,u-_.goBack)),_.switchTo&&typeof _.switchTo=="string"){let I=Gu(this._lexer,_.switchTo,v,w,b);if(I[0]==="@"&&(I=I.substr(1)),rS(this._lexer,I))d=d.switchTo(I);else throw Yi(this._lexer,"trying to switch to a state '"+I+"' that is undefined in rule: "+this._safeRuleName(y))}else{if(_.transform&&typeof _.transform=="function")throw Yi(this._lexer,"action.transform not supported");if(_.next)if(_.next==="@push"){if(d.depth>=this._lexer.maxStack)throw Yi(this._lexer,"maximum tokenizer stack size reached: ["+d.state+","+d.parent.state+",...]");d=d.push(b)}else if(_.next==="@pop"){if(d.depth<=1)throw Yi(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(y));d=d.pop()}else if(_.next==="@popall")d=d.popall();else{let I=Gu(this._lexer,_.next,v,w,b);if(I[0]==="@"&&(I=I.substr(1)),rS(this._lexer,I))d=d.push(I);else throw Yi(this._lexer,"trying to set a next state '"+I+"' that is undefined in rule: "+this._safeRuleName(y))}}_.log&&typeof _.log=="string"&&Sze(this._lexer,this._lexer.languageId+": "+Gu(this._lexer,_.log,v,w,b))}if(S===null)throw Yi(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(y));const k=I=>{const T=this._languageService.getLanguageIdByLanguageName(I)||this._languageService.getLanguageIdByMimeType(I)||I,D=this._getNestedEmbeddedLanguageData(T);if(u<l){const M=e.substr(u);return this._nestedTokenize(M,t,Bu.create(d,D),s+u,r)}else return Bu.create(d,D)};if(Array.isArray(S)){if(h&&h.groups.length>0)throw Yi(this._lexer,"groups cannot be nested: "+this._safeRuleName(y));if(w.length!==S.length+1)throw Yi(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(y));let I=0;for(let T=1;T<w.length;T++)I+=w[T].length;if(I!==v.length)throw Yi(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(y));h={rule:y,matches:w,groups:[]};for(let T=0;T<S.length;T++)h.groups[T]={action:S[T],matched:w[T+1]};u-=v.length;continue}else{if(S==="@rematch"&&(u-=v.length,v="",w=null,S="",C!==null))return k(C);if(v.length===0){if(l===0||m!==d.depth||b!==d.state||(h?h.groups.length:0)!==p)continue;throw Yi(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(y))}let I=null;if(goe(S)&&S.indexOf("@brackets")===0){const T=S.substr(9),D=Dze(this._lexer,v);if(!D)throw Yi(this._lexer,"@brackets token returned but no bracket defined as: "+v);I=KK(D.token+T)}else{const T=S===""?"":S+this._lexer.tokenPostfix;I=KK(T)}g<o&&r.emit(g+s,I)}if(C!==null)return k(C)}return Bu.create(d,c)}_getNestedEmbeddedLanguageData(e){if(!this._languageService.isRegisteredLanguageId(e))return new wp(e,s1);e!==this._languageId&&(this._languageService.requestBasicLanguageFeatures(e),Zn.getOrCreate(e),this._embeddedLanguages[e]=!0);const t=Zn.get(e);return t?new wp(e,t.getInitialState()):new wp(e,s1)}};w1=TA=kze([xze(4,gn)],w1);function Dze(n,e){if(!e)return null;e=Ud(n,e);const t=n.brackets;for(const i of t){if(i.open===e)return{token:i.token,bracketType:1};if(i.close===e)return{token:i.token,bracketType:-1}}return null}const OR=mm("standaloneColorizer",{createHTML:n=>n});class bO{static colorizeElement(e,t,i,s){s=s||{};const r=s.theme||"vs",o=s.mimeType||i.getAttribute("lang")||i.getAttribute("data-lang");if(!o)return console.error("Mode not detected"),Promise.resolve();const a=t.getLanguageIdByMimeType(o)||o;e.setTheme(r);const l=i.firstChild?i.firstChild.nodeValue:"";i.className+=" "+r;const c=d=>{var u;const h=(u=OR?.createHTML(d))!==null&&u!==void 0?u:d;i.innerHTML=h};return this.colorize(t,l||"",a,s).then(c,d=>console.error(d))}static async colorize(e,t,i,s){const r=e.languageIdCodec;let o=4;s&&typeof s.tabSize=="number"&&(o=s.tabSize),RV(t)&&(t=t.substr(1));const a=w0(t);if(!e.isRegisteredLanguageId(i))return jK(a,o,r);const l=await Zn.getOrCreate(i);return l?Ize(a,o,l,r):jK(a,o,r)}static colorizeLine(e,t,i,s,r=4){const o=Po.isBasicASCII(e,t),a=Po.containsRTL(e,o,i);return X2(new k0(!1,!0,e,!1,o,a,0,s,[],r,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(e,t,i=4){const s=e.getLineContent(t);e.tokenization.forceTokenization(t);const o=e.tokenization.getLineTokens(t).inflate();return this.colorizeLine(s,e.mightContainNonBasicASCII(),e.mightContainRTL(),o,i)}}function Ize(n,e,t,i){return new Promise((s,r)=>{const o=()=>{const a=Mze(n,e,t,i);if(t instanceof w1){const l=t.getLoadStatus();if(l.loaded===!1){l.promise.then(o,r);return}}s(a)};o()})}function jK(n,e,t){let i=[];const r=new Uint32Array(2);r[0]=0,r[1]=33587200;for(let o=0,a=n.length;o<a;o++){const l=n[o];r[0]=l.length;const c=new Hn(r,l,t),d=Po.isBasicASCII(l,!0),u=Po.containsRTL(l,d,!0),h=X2(new k0(!1,!0,l,!1,d,u,0,c,[],e,0,0,0,0,-1,"none",!1,!1,null));i=i.concat(h.html),i.push("<br/>")}return i.join("")}function Mze(n,e,t,i){let s=[],r=t.getInitialState();for(let o=0,a=n.length;o<a;o++){const l=n[o],c=t.tokenizeEncoded(l,!0,r);Hn.convertToEndOffset(c.tokens,l.length);const d=new Hn(c.tokens,l,i),u=Po.isBasicASCII(l,!0),h=Po.containsRTL(l,u,!0),f=X2(new k0(!1,!0,l,!1,u,h,0,d.inflate(),[],e,0,0,0,0,-1,"none",!1,!1,null));s=s.concat(f.html),s.push("<br/>"),r=c.endState}return s.join("")}var Eze=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Nze=function(n,e){return function(t,i){e(t,i,n)}};let DA=class extends Le{constructor(e){super(),this._themeService=e,this._onWillCreateCodeEditor=this._register(new ue),this._onCodeEditorAdd=this._register(new ue),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new ue),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onWillCreateDiffEditor=this._register(new ue),this._onDiffEditorAdd=this._register(new ue),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new ue),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._decorationOptionProviders=new Map,this._codeEditorOpenHandlers=new co,this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}willCreateCodeEditor(){this._onWillCreateCodeEditor.fire()}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}willCreateDiffEditor(){this._onWillCreateDiffEditor.fire()}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null;const t=this.listCodeEditors();for(const i of t){if(i.hasTextFocus())return i;i.hasWidgetFocus()&&(e=i)}return e}removeDecorationType(e){const t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach(i=>i.removeDecorationsByType(e))))}setModelProperty(e,t,i){const s=e.toString();let r;this._modelProperties.has(s)?r=this._modelProperties.get(s):(r=new Map,this._modelProperties.set(s,r)),r.set(t,i)}getModelProperty(e,t){const i=e.toString();if(this._modelProperties.has(i))return this._modelProperties.get(i).get(t)}async openCodeEditor(e,t,i){for(const s of this._codeEditorOpenHandlers){const r=await s(e,t,i);if(r!==null)return r}return null}registerCodeEditorOpenHandler(e){const t=this._codeEditorOpenHandlers.unshift(e);return Et(t)}};DA=Eze([Nze(0,Xo)],DA);var Rze=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},JK=function(n,e){return function(t,i){e(t,i,n)}};let qL=class extends DA{constructor(e,t){super(t),this._register(this.onCodeEditorAdd(()=>this._checkContextKey())),this._register(this.onCodeEditorRemove(()=>this._checkContextKey())),this._editorIsOpen=e.createKey("editorIsOpen",!1),this._activeCodeEditor=null,this._register(this.registerCodeEditorOpenHandler(async(i,s,r)=>s?this.doOpenEditor(s,i):null))}_checkContextKey(){let e=!1;for(const t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){const r=t.resource.scheme;if(r===Mt.http||r===Mt.https)return Nie(t.resource.toString()),e}return null}const s=t.options?t.options.selection:null;if(s)if(typeof s.endLineNumber=="number"&&typeof s.endColumn=="number")e.setSelection(s),e.revealRangeInCenter(s,1);else{const r={lineNumber:s.startLineNumber,column:s.startColumn};e.setPosition(r),e.revealPositionInCenter(r,1)}return e}findModel(e,t){const i=e.getModel();return i&&i.uri.toString()!==t.toString()?null:i}};qL=Rze([JK(0,oi),JK(1,Xo)],qL);fi(Vn,qL,0);const ff=ri("layoutService");var poe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},boe=function(n,e){return function(t,i){e(t,i,n)}};let ek=class{get mainContainer(){var e,t;return(t=(e=YV(this._codeEditorService.listCodeEditors()))===null||e===void 0?void 0:e.getContainerDomNode())!==null&&t!==void 0?t:Di.document.body}get activeContainer(){var e,t;const i=(e=this._codeEditorService.getFocusedCodeEditor())!==null&&e!==void 0?e:this._codeEditorService.getActiveCodeEditor();return(t=i?.getContainerDomNode())!==null&&t!==void 0?t:this.mainContainer}get mainContainerDimension(){return sL(this.mainContainer)}get activeContainerDimension(){return sL(this.activeContainer)}get containers(){return Wg(this._codeEditorService.listCodeEditors().map(e=>e.getContainerDomNode()))}getContainer(){return this.activeContainer}whenContainerStylesLoaded(){}focus(){var e;(e=this._codeEditorService.getFocusedCodeEditor())===null||e===void 0||e.focus()}constructor(e){this._codeEditorService=e,this.onDidLayoutMainContainer=Be.None,this.onDidLayoutActiveContainer=Be.None,this.onDidLayoutContainer=Be.None,this.onDidChangeActiveContainer=Be.None,this.onDidAddContainer=Be.None,this.mainContainerOffset={top:0,quickPickTop:0},this.activeContainerOffset={top:0,quickPickTop:0}}};ek=poe([boe(0,Vn)],ek);let IA=class extends ek{get mainContainer(){return this._container}constructor(e,t){super(t),this._container=e}};IA=poe([boe(1,Vn)],IA);fi(ff,ek,1);const voe=ri("dialogService");var Wze=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},$K=function(n,e){return function(t,i){e(t,i,n)}};function oS(n){return n.scheme===Mt.file?n.fsPath:n.path}let _oe=0;class aS{constructor(e,t,i,s,r,o,a){this.id=++_oe,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=i,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=s,this.groupOrder=r,this.sourceId=o,this.sourceOrder=a,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class QK{constructor(e,t){this.resourceLabel=e,this.reason=t}}class qK{constructor(){this.elements=new Map}createMessage(){const e=[],t=[];for(const[,s]of this.elements)(s.reason===0?e:t).push(s.resourceLabel);const i=[];return e.length>0&&i.push(L({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&i.push(L({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",t.join(", "))),i.join(`
`)}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}}class Aze{constructor(e,t,i,s,r,o,a){this.id=++_oe,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=i,this.groupId=s,this.groupOrder=r,this.sourceId=o,this.sourceOrder=a,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(e,t,i){this.removedResources||(this.removedResources=new qK),this.removedResources.has(t)||this.removedResources.set(t,new QK(e,i))}setValid(e,t,i){i?this.invalidatedResources&&(this.invalidatedResources.delete(t),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new qK),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new QK(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class woe{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const e of this._past)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);for(const e of this._future)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){const e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,t){e.type===1?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(const i of this._past)t(i.actual)&&this._setElementValidFlag(i,e);for(const i of this._future)t(i.actual)&&this._setElementValidFlag(i,e)}pushElement(e){for(const t of this._future)t.type===1&&t.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){const t=[];for(let i=0,s=this._past.length;i<s;i++)t.push(this._past[i].id);for(let i=this._future.length-1;i>=0;i--)t.push(this._future[i].id);return new wse(e,t)}restoreSnapshot(e){const t=e.elements.length;let i=!0,s=0,r=-1;for(let a=0,l=this._past.length;a<l;a++,s++){const c=this._past[a];i&&(s>=t||c.id!==e.elements[s])&&(i=!1,r=0),!i&&c.type===1&&c.removeResource(this.resourceLabel,this.strResource,0)}let o=-1;for(let a=this._future.length-1;a>=0;a--,s++){const l=this._future[a];i&&(s>=t||l.id!==e.elements[s])&&(i=!1,o=a),!i&&l.type===1&&l.removeResource(this.resourceLabel,this.strResource,0)}r!==-1&&(this._past=this._past.slice(0,r)),o!==-1&&(this._future=this._future.slice(o+1)),this.versionId++}getElements(){const e=[],t=[];for(const i of this._past)e.push(i.actual);for(const i of this._future)t.push(i.actual);return{past:e,future:t}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let i=this._past.length-1;i>=0;i--)if(this._past[i]===e){t.has(this.strResource)?this._past[i]=t.get(this.strResource):this._past.splice(i,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let i=this._future.length-1;i>=0;i--)if(this._future[i]===e){t.has(this.strResource)?this._future[i]=t.get(this.strResource):this._future.splice(i,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}}class ZR{constructor(e){this.editStacks=e,this._versionIds=[];for(let t=0,i=this.editStacks.length;t<i;t++)this._versionIds[t]=this.editStacks[t].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}}const yoe=new woe("","");yoe.locked=!0;let MA=class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(e){for(const t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log(`AFTER ${e}: `);const t=[];for(const i of this._editStacks)t.push(i[1].toString());console.log(t.join(`
`))}pushElement(e,t=Pb.None,i=gc.None){if(e.type===0){const s=oS(e.resource),r=this.getUriComparisonKey(e.resource);this._pushElement(new aS(e,s,r,t.id,t.nextOrder(),i.id,i.nextOrder()))}else{const s=new Set,r=[],o=[];for(const a of e.resources){const l=oS(a),c=this.getUriComparisonKey(a);s.has(c)||(s.add(c),r.push(l),o.push(c))}r.length===1?this._pushElement(new aS(e,r[0],o[0],t.id,t.nextOrder(),i.id,i.nextOrder())):this._pushElement(new Aze(e,r,o,t.id,t.nextOrder(),i.id,i.nextOrder()))}}_pushElement(e){for(let t=0,i=e.strResources.length;t<i;t++){const s=e.resourceLabels[t],r=e.strResources[t];let o;this._editStacks.has(r)?o=this._editStacks.get(r):(o=new woe(s,r),this._editStacks.set(r,o)),o.pushElement(e)}}getLastElement(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){const i=this._editStacks.get(t);if(i.hasFutureElements())return null;const s=i.getClosestPastElement();return s?s.actual:null}return null}_splitPastWorkspaceElement(e,t){const i=e.actual.split(),s=new Map;for(const r of i){const o=oS(r.resource),a=this.getUriComparisonKey(r.resource),l=new aS(r,o,a,0,0,0,0);s.set(l.strResource,l)}for(const r of e.strResources){if(t&&t.has(r))continue;this._editStacks.get(r).splitPastWorkspaceElement(e,s)}}_splitFutureWorkspaceElement(e,t){const i=e.actual.split(),s=new Map;for(const r of i){const o=oS(r.resource),a=this.getUriComparisonKey(r.resource),l=new aS(r,o,a,0,0,0,0);s.set(l.strResource,l)}for(const r of e.strResources){if(t&&t.has(r))continue;this._editStacks.get(r).splitFutureWorkspaceElement(e,s)}}removeElements(e){const t=typeof e=="string"?e:this.getUriComparisonKey(e);this._editStacks.has(t)&&(this._editStacks.get(t).dispose(),this._editStacks.delete(t))}setElementsValidFlag(e,t,i){const s=this.getUriComparisonKey(e);this._editStacks.has(s)&&this._editStacks.get(s).setElementsValidFlag(t,i)}createSnapshot(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).createSnapshot(e):new wse(e,[])}restoreSnapshot(e){const t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){const i=this._editStacks.get(t);i.restoreSnapshot(e),!i.hasPastElements()&&!i.hasFutureElements()&&(i.dispose(),this._editStacks.delete(t))}}getElements(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,i=null;for(const[s,r]of this._editStacks){const o=r.getClosestPastElement();o&&o.sourceId===e&&(!t||o.sourceOrder>t.sourceOrder)&&(t=o,i=s)}return[t,i]}canUndo(e){if(e instanceof gc){const[,i]=this._findClosestUndoElementWithSource(e.id);return!!i}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasPastElements():!1}_onError(e,t){gi(e);for(const i of t.strResources)this.removeElements(i);this._notificationService.error(e)}_acquireLocks(e){for(const t of e.editStacks)if(t.locked)throw new Error("Cannot acquire edit stack lock");for(const t of e.editStacks)t.locked=!0;return()=>{for(const t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,i,s,r){const o=this._acquireLocks(i);let a;try{a=t()}catch(l){return o(),s.dispose(),this._onError(l,e)}return a?a.then(()=>(o(),s.dispose(),r()),l=>(o(),s.dispose(),this._onError(l,e))):(o(),s.dispose(),r())}async _invokeWorkspacePrepare(e){if(typeof e.actual.prepareUndoRedo>"u")return Le.None;const t=e.actual.prepareUndoRedo();return typeof t>"u"?Le.None:t}_invokeResourcePrepare(e,t){if(e.actual.type!==1||typeof e.actual.prepareUndoRedo>"u")return t(Le.None);const i=e.actual.prepareUndoRedo();return i?SV(i)?t(i):i.then(s=>t(s)):t(Le.None)}_getAffectedEditStacks(e){const t=[];for(const i of e.strResources)t.push(this._editStacks.get(i)||yoe);return new ZR(t)}_tryToSplitAndUndo(e,t,i,s){if(t.canSplit())return this._splitPastWorkspaceElement(t,i),this._notificationService.warn(s),new lS(this._undo(e,0,!0));for(const r of t.strResources)this.removeElements(r);return this._notificationService.warn(s),new lS}_checkWorkspaceUndo(e,t,i,s){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,L({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(s&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,L({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const r=[];for(const a of i.editStacks)a.getClosestPastElement()!==t&&r.push(a.resourceLabel);if(r.length>0)return this._tryToSplitAndUndo(e,t,null,L({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",t.label,r.join(", ")));const o=[];for(const a of i.editStacks)a.locked&&o.push(a.resourceLabel);return o.length>0?this._tryToSplitAndUndo(e,t,null,L({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,o.join(", "))):i.isValid()?null:this._tryToSplitAndUndo(e,t,null,L({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceUndo(e,t,i){const s=this._getAffectedEditStacks(t),r=this._checkWorkspaceUndo(e,t,s,!1);return r?r.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,s,i)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(const[,t]of this._editStacks){const i=t.getClosestPastElement();if(i){if(i===e){const s=t.getSecondClosestPastElement();if(s&&s.groupId===e.groupId)return!0}if(i.groupId===e.groupId)return!0}}return!1}async _confirmAndExecuteWorkspaceUndo(e,t,i,s){if(t.canSplit()&&!this._isPartOfUndoGroup(t)){let a;(function(d){d[d.All=0]="All",d[d.This=1]="This",d[d.Cancel=2]="Cancel"})(a||(a={}));const{result:l}=await this._dialogService.prompt({type:Jn.Info,message:L("confirmWorkspace","Would you like to undo '{0}' across all files?",t.label),buttons:[{label:L({key:"ok",comment:["{0} denotes a number that is > 1, && denotes a mnemonic"]},"&&Undo in {0} Files",i.editStacks.length),run:()=>a.All},{label:L({key:"nok",comment:["&& denotes a mnemonic"]},"Undo this &&File"),run:()=>a.This}],cancelButton:{run:()=>a.Cancel}});if(l===a.Cancel)return;if(l===a.This)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);const c=this._checkWorkspaceUndo(e,t,i,!1);if(c)return c.returnValue;s=!0}let r;try{r=await this._invokeWorkspacePrepare(t)}catch(a){return this._onError(a,t)}const o=this._checkWorkspaceUndo(e,t,i,!0);if(o)return r.dispose(),o.returnValue;for(const a of i.editStacks)a.moveBackward(t);return this._safeInvokeWithLocks(t,()=>t.actual.undo(),i,r,()=>this._continueUndoInGroup(t.groupId,s))}_resourceUndo(e,t,i){if(!t.isValid){e.flushAllElements();return}if(e.locked){const s=L({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(s);return}return this._invokeResourcePrepare(t,s=>(e.moveBackward(t),this._safeInvokeWithLocks(t,()=>t.actual.undo(),new ZR([e]),s,()=>this._continueUndoInGroup(t.groupId,i))))}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,i=null;for(const[s,r]of this._editStacks){const o=r.getClosestPastElement();o&&o.groupId===e&&(!t||o.groupOrder>t.groupOrder)&&(t=o,i=s)}return[t,i]}_continueUndoInGroup(e,t){if(!e)return;const[,i]=this._findClosestUndoElementInGroup(e);if(i)return this._undo(i,0,t)}undo(e){if(e instanceof gc){const[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return typeof e=="string"?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,t=0,i){if(!this._editStacks.has(e))return;const s=this._editStacks.get(e),r=s.getClosestPastElement();if(!r)return;if(r.groupId){const[a,l]=this._findClosestUndoElementInGroup(r.groupId);if(r!==a&&l)return this._undo(l,t,i)}if((r.sourceId!==t||r.confirmBeforeUndo)&&!i)return this._confirmAndContinueUndo(e,t,r);try{return r.type===1?this._workspaceUndo(e,r,i):this._resourceUndo(s,r,i)}finally{}}async _confirmAndContinueUndo(e,t,i){if((await this._dialogService.confirm({message:L("confirmDifferentSource","Would you like to undo '{0}'?",i.label),primaryButton:L({key:"confirmDifferentSource.yes",comment:["&& denotes a mnemonic"]},"&&Yes"),cancelButton:L("confirmDifferentSource.no","No")})).confirmed)return this._undo(e,t,!0)}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,i=null;for(const[s,r]of this._editStacks){const o=r.getClosestFutureElement();o&&o.sourceId===e&&(!t||o.sourceOrder<t.sourceOrder)&&(t=o,i=s)}return[t,i]}canRedo(e){if(e instanceof gc){const[,i]=this._findClosestRedoElementWithSource(e.id);return!!i}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasFutureElements():!1}_tryToSplitAndRedo(e,t,i,s){if(t.canSplit())return this._splitFutureWorkspaceElement(t,i),this._notificationService.warn(s),new lS(this._redo(e));for(const r of t.strResources)this.removeElements(r);return this._notificationService.warn(s),new lS}_checkWorkspaceRedo(e,t,i,s){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,L({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(s&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,L({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const r=[];for(const a of i.editStacks)a.getClosestFutureElement()!==t&&r.push(a.resourceLabel);if(r.length>0)return this._tryToSplitAndRedo(e,t,null,L({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",t.label,r.join(", ")));const o=[];for(const a of i.editStacks)a.locked&&o.push(a.resourceLabel);return o.length>0?this._tryToSplitAndRedo(e,t,null,L({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,o.join(", "))):i.isValid()?null:this._tryToSplitAndRedo(e,t,null,L({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceRedo(e,t){const i=this._getAffectedEditStacks(t),s=this._checkWorkspaceRedo(e,t,i,!1);return s?s.returnValue:this._executeWorkspaceRedo(e,t,i)}async _executeWorkspaceRedo(e,t,i){let s;try{s=await this._invokeWorkspacePrepare(t)}catch(o){return this._onError(o,t)}const r=this._checkWorkspaceRedo(e,t,i,!0);if(r)return s.dispose(),r.returnValue;for(const o of i.editStacks)o.moveForward(t);return this._safeInvokeWithLocks(t,()=>t.actual.redo(),i,s,()=>this._continueRedoInGroup(t.groupId))}_resourceRedo(e,t){if(!t.isValid){e.flushAllElements();return}if(e.locked){const i=L({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(i);return}return this._invokeResourcePrepare(t,i=>(e.moveForward(t),this._safeInvokeWithLocks(t,()=>t.actual.redo(),new ZR([e]),i,()=>this._continueRedoInGroup(t.groupId))))}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,i=null;for(const[s,r]of this._editStacks){const o=r.getClosestFutureElement();o&&o.groupId===e&&(!t||o.groupOrder<t.groupOrder)&&(t=o,i=s)}return[t,i]}_continueRedoInGroup(e){if(!e)return;const[,t]=this._findClosestRedoElementInGroup(e);if(t)return this._redo(t)}redo(e){if(e instanceof gc){const[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return typeof e=="string"?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;const t=this._editStacks.get(e),i=t.getClosestFutureElement();if(i){if(i.groupId){const[s,r]=this._findClosestRedoElementInGroup(i.groupId);if(i!==s&&r)return this._redo(r)}try{return i.type===1?this._workspaceRedo(e,i):this._resourceRedo(t,i)}finally{}}}};MA=Wze([$K(0,voe),$K(1,Rr)],MA);class lS{constructor(e){this.returnValue=e}}fi(EP,MA,1);var Fze=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},GR=function(n,e){return function(t,i){e(t,i,n)}};let EA=class extends Le{constructor(e,t,i){super(),this._themeService=e,this._logService=t,this._languageService=i,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}getStyling(e){return this._caches.has(e)||this._caches.set(e,new kW(e.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(e)}};EA=Fze([GR(0,Xo),GR(1,Yc),GR(2,Cs)],EA);fi(qre,EA,1);function Soe(n){return typeof n=="string"?!1:Array.isArray(n)?n.every(Soe):!!n.exclusive}class ej{constructor(e,t,i,s){this.uri=e,this.languageId=t,this.notebookUri=i,this.notebookType=s}equals(e){var t,i;return this.notebookType===e.notebookType&&this.languageId===e.languageId&&this.uri.toString()===e.uri.toString()&&((t=this.notebookUri)===null||t===void 0?void 0:t.toString())===((i=e.notebookUri)===null||i===void 0?void 0:i.toString())}}class en{constructor(e){this._notebookInfoResolver=e,this._clock=0,this._entries=[],this._onDidChange=new ue,this.onDidChange=this._onDidChange.event}register(e,t){let i={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(i),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),Et(()=>{if(i){const s=this._entries.indexOf(i);s>=0&&(this._entries.splice(s,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),i=void 0)}})}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e);const t=[];for(const i of this._entries)i._score>0&&t.push(i.provider);return t}ordered(e){const t=[];return this._orderedForEach(e,i=>t.push(i.provider)),t}orderedGroups(e){const t=[];let i,s;return this._orderedForEach(e,r=>{i&&s===r._score?i.push(r.provider):(s=r._score,i=[r.provider],t.push(i))}),t}_orderedForEach(e,t){this._updateScores(e);for(const i of this._entries)i._score>0&&t(i)}_updateScores(e){var t,i;const s=(t=this._notebookInfoResolver)===null||t===void 0?void 0:t.call(this,e.uri),r=s?new ej(e.uri,e.getLanguageId(),s.uri,s.type):new ej(e.uri,e.getLanguageId(),void 0,void 0);if(!(!((i=this._lastCandidate)===null||i===void 0)&&i.equals(r))){this._lastCandidate=r;for(const o of this._entries)if(o._score=hO(o.selector,r.uri,r.languageId,Jne(e),r.notebookUri,r.notebookType),Soe(o.selector)&&o._score>0){for(const a of this._entries)a._score=0;o._score=1e3;break}this._entries.sort(en._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:Xv(e.selector)&&!Xv(t.selector)?1:!Xv(e.selector)&&Xv(t.selector)?-1:e._time<t._time?1:e._time>t._time?-1:0}}function Xv(n){return typeof n=="string"?!1:Array.isArray(n)?n.some(Xv):!!n.isBuiltin}class Vze{constructor(){this.referenceProvider=new en(this._score.bind(this)),this.renameProvider=new en(this._score.bind(this)),this.newSymbolNamesProvider=new en(this._score.bind(this)),this.codeActionProvider=new en(this._score.bind(this)),this.definitionProvider=new en(this._score.bind(this)),this.typeDefinitionProvider=new en(this._score.bind(this)),this.declarationProvider=new en(this._score.bind(this)),this.implementationProvider=new en(this._score.bind(this)),this.documentSymbolProvider=new en(this._score.bind(this)),this.inlayHintsProvider=new en(this._score.bind(this)),this.colorProvider=new en(this._score.bind(this)),this.codeLensProvider=new en(this._score.bind(this)),this.documentFormattingEditProvider=new en(this._score.bind(this)),this.documentRangeFormattingEditProvider=new en(this._score.bind(this)),this.onTypeFormattingEditProvider=new en(this._score.bind(this)),this.signatureHelpProvider=new en(this._score.bind(this)),this.hoverProvider=new en(this._score.bind(this)),this.documentHighlightProvider=new en(this._score.bind(this)),this.multiDocumentHighlightProvider=new en(this._score.bind(this)),this.selectionRangeProvider=new en(this._score.bind(this)),this.foldingRangeProvider=new en(this._score.bind(this)),this.linkProvider=new en(this._score.bind(this)),this.inlineCompletionsProvider=new en(this._score.bind(this)),this.inlineEditProvider=new en(this._score.bind(this)),this.completionProvider=new en(this._score.bind(this)),this.linkedEditingRangeProvider=new en(this._score.bind(this)),this.documentRangeSemanticTokensProvider=new en(this._score.bind(this)),this.documentSemanticTokensProvider=new en(this._score.bind(this)),this.documentDropEditProvider=new en(this._score.bind(this)),this.documentPasteEditProvider=new en(this._score.bind(this))}_score(e){var t;return(t=this._notebookTypeResolver)===null||t===void 0?void 0:t.call(this,e)}}fi(ei,Vze,1);const cS=St;let Pze=class extends Le{constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this.scrollbar=this._register(new uP(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this.scrollbar.getDomNode())}onContentsChanged(){this.scrollbar.scanDomNode()}};class vO extends Le{static render(e,t,i){return new vO(e,t,i)}constructor(e,t,i){super(),this.actionContainer=dt(e,cS("div.action-container")),this.actionContainer.setAttribute("tabindex","0"),this.action=dt(this.actionContainer,cS("a.action")),this.action.setAttribute("role","button"),t.iconClass&&dt(this.action,cS(`span.icon.${t.iconClass}`));const s=dt(this.action,cS("span"));s.textContent=i?`${t.label} (${i})`:t.label,this._store.add(new Zze(this.actionContainer,t.run)),this._store.add(new Gze(this.actionContainer,t.run,[3,10])),this.setEnabled(!0)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}function Oze(n,e){return n&&e?L("acessibleViewHint","Inspect this in the accessible view with {0}.",e):n?L("acessibleViewHintNoKbOpen","Inspect this in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding."):""}class Zze extends Le{constructor(e,t){super(),this._register(we(e,Ge.CLICK,i=>{i.stopPropagation(),i.preventDefault(),t(e)}))}}class Gze extends Le{constructor(e,t,i){super(),this._register(we(e,Ge.KEY_DOWN,s=>{const r=new Ji(s);i.some(o=>r.equals(o))&&(s.stopPropagation(),s.preventDefault(),t(e))}))}}var Bze=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},cv=function(n,e){return function(t,i){e(t,i,n)}};const Ql=St;let NA=class extends pa{get _targetWindow(){return pt(this._target.targetElements[0])}get _targetDocumentElement(){return pt(this._target.targetElements[0]).document.documentElement}get isDisposed(){return this._isDisposed}get isMouseIn(){return this._lockMouseTracker.isMouseIn}get domNode(){return this._hover.containerDomNode}get onDispose(){return this._onDispose.event}get onRequestLayout(){return this._onRequestLayout.event}get anchor(){return this._hoverPosition===2?0:1}get x(){return this._x}get y(){return this._y}get isLocked(){return this._isLocked}set isLocked(e){this._isLocked!==e&&(this._isLocked=e,this._hoverContainer.classList.toggle("locked",this._isLocked))}constructor(e,t,i,s,r,o){var a,l,c,d,u,h,f,g;super(),this._keybindingService=t,this._configurationService=i,this._openerService=s,this._instantiationService=r,this._accessibilityService=o,this._messageListeners=new ct,this._isDisposed=!1,this._forcePosition=!1,this._x=0,this._y=0,this._isLocked=!1,this._enableFocusTraps=!1,this._addedFocusTrap=!1,this._onDispose=this._register(new ue),this._onRequestLayout=this._register(new ue),this._linkHandler=e.linkHandler||(_=>jP(this._openerService,_,Xd(e.content)?e.content.isTrusted:void 0)),this._target="targetElements"in e.target?e.target:new Xze(e.target),this._hoverPointer=!((a=e.appearance)===null||a===void 0)&&a.showPointer?Ql("div.workbench-hover-pointer"):void 0,this._hover=this._register(new Pze),this._hover.containerDomNode.classList.add("workbench-hover","fadeIn"),!((l=e.appearance)===null||l===void 0)&&l.compact&&this._hover.containerDomNode.classList.add("workbench-hover","compact"),!((c=e.appearance)===null||c===void 0)&&c.skipFadeInAnimation&&this._hover.containerDomNode.classList.add("skip-fade-in"),e.additionalClasses&&this._hover.containerDomNode.classList.add(...e.additionalClasses),!((d=e.position)===null||d===void 0)&&d.forcePosition&&(this._forcePosition=!0),e.trapFocus&&(this._enableFocusTraps=!0),this._hoverPosition=(h=(u=e.position)===null||u===void 0?void 0:u.hoverPosition)!==null&&h!==void 0?h:3,this.onmousedown(this._hover.containerDomNode,_=>_.stopPropagation()),this.onkeydown(this._hover.containerDomNode,_=>{_.equals(9)&&this.dispose()}),this._register(we(this._targetWindow,"blur",()=>this.dispose()));const m=Ql("div.hover-row.markdown-hover"),p=Ql("div.hover-contents");if(typeof e.content=="string")p.textContent=e.content,p.style.whiteSpace="pre-wrap";else if(Es(e.content))p.appendChild(e.content),p.classList.add("html-hover-contents");else{const _=e.content,y=this._instantiationService.createInstance(PL,{codeBlockFontFamily:this._configurationService.getValue("editor").fontFamily||Wo.fontFamily}),{element:C}=y.render(_,{actionHandler:{callback:S=>this._linkHandler(S),disposables:this._messageListeners},asyncRenderCallback:()=>{p.classList.add("code-hover-contents"),this.layout(),this._onRequestLayout.fire()}});p.appendChild(C)}if(m.appendChild(p),this._hover.contentsDomNode.appendChild(m),e.actions&&e.actions.length>0){const _=Ql("div.hover-row.status-bar"),y=Ql("div.actions");e.actions.forEach(C=>{const S=this._keybindingService.lookupKeybinding(C.commandId),k=S?S.getLabel():null;vO.render(y,{label:C.label,commandId:C.commandId,run:I=>{C.run(I),this.dispose()},iconClass:C.iconClass},k)}),_.appendChild(y),this._hover.containerDomNode.appendChild(_)}this._hoverContainer=Ql("div.workbench-hover-container"),this._hoverPointer&&this._hoverContainer.appendChild(this._hoverPointer),this._hoverContainer.appendChild(this._hover.containerDomNode);let b;if(e.actions&&e.actions.length>0?b=!1:((f=e.persistence)===null||f===void 0?void 0:f.hideOnHover)===void 0?b=typeof e.content=="string"||Xd(e.content)&&!e.content.value.includes("](")&&!e.content.value.includes("</a>"):b=e.persistence.hideOnHover,b&&(!((g=e.appearance)===null||g===void 0)&&g.showHoverHint)){const _=Ql("div.hover-row.status-bar"),y=Ql("div.info");y.textContent=L("hoverhint","Hold {0} key to mouse over",jt?"Option":"Alt"),_.appendChild(y),this._hover.containerDomNode.appendChild(_)}const w=[...this._target.targetElements];b||w.push(this._hoverContainer);const v=this._register(new tj(w));if(this._register(v.onMouseOut(()=>{this._isLocked||this.dispose()})),b){const _=[...this._target.targetElements,this._hoverContainer];this._lockMouseTracker=this._register(new tj(_)),this._register(this._lockMouseTracker.onMouseOut(()=>{this._isLocked||this.dispose()}))}else this._lockMouseTracker=v}addFocusTrap(){if(!this._enableFocusTraps||this._addedFocusTrap)return;this._addedFocusTrap=!0;const e=this._hover.containerDomNode,t=this.findLastFocusableChild(this._hover.containerDomNode);if(t){const i=OV(this._hoverContainer,Ql("div")),s=dt(this._hoverContainer,Ql("div"));i.tabIndex=0,s.tabIndex=0,this._register(we(s,"focus",r=>{e.focus(),r.preventDefault()})),this._register(we(i,"focus",r=>{t.focus(),r.preventDefault()}))}}findLastFocusableChild(e){if(e.hasChildNodes())for(let t=0;t<e.childNodes.length;t++){const i=e.childNodes.item(e.childNodes.length-t-1);if(i.nodeType===i.ELEMENT_NODE){const r=i;if(typeof r.tabIndex=="number"&&r.tabIndex>=0)return r}const s=this.findLastFocusableChild(i);if(s)return s}}render(e){var t;e.appendChild(this._hoverContainer);const s=this._hoverContainer.contains(this._hoverContainer.ownerDocument.activeElement)&&Oze(this._configurationService.getValue("accessibility.verbosity.hover")===!0&&this._accessibilityService.isScreenReaderOptimized(),(t=this._keybindingService.lookupKeybinding("editor.action.accessibleView"))===null||t===void 0?void 0:t.getAriaLabel());s&&oL(s),this.layout(),this.addFocusTrap()}layout(){this._hover.containerDomNode.classList.remove("right-aligned"),this._hover.contentsDomNode.style.maxHeight="";const e=d=>{const u=xie(d),h=d.getBoundingClientRect();return{top:h.top*u,bottom:h.bottom*u,right:h.right*u,left:h.left*u}},t=this._target.targetElements.map(d=>e(d)),{top:i,right:s,bottom:r,left:o}=t[0],a=s-o,l=r-i,c={top:i,right:s,bottom:r,left:o,width:a,height:l,center:{x:o+a/2,y:i+l/2}};if(this.adjustHorizontalHoverPosition(c),this.adjustVerticalHoverPosition(c),this.adjustHoverMaxHeight(c),this._hoverContainer.style.padding="",this._hoverContainer.style.margin="",this._hoverPointer){switch(this._hoverPosition){case 1:c.left+=3,c.right+=3,this._hoverContainer.style.paddingLeft="3px",this._hoverContainer.style.marginLeft="-3px";break;case 0:c.left-=3,c.right-=3,this._hoverContainer.style.paddingRight="3px",this._hoverContainer.style.marginRight="-3px";break;case 2:c.top+=3,c.bottom+=3,this._hoverContainer.style.paddingTop="3px",this._hoverContainer.style.marginTop="-3px";break;case 3:c.top-=3,c.bottom-=3,this._hoverContainer.style.paddingBottom="3px",this._hoverContainer.style.marginBottom="-3px";break}c.center.x=c.left+a/2,c.center.y=c.top+l/2}this.computeXCordinate(c),this.computeYCordinate(c),this._hoverPointer&&(this._hoverPointer.classList.remove("top"),this._hoverPointer.classList.remove("left"),this._hoverPointer.classList.remove("right"),this._hoverPointer.classList.remove("bottom"),this.setHoverPointerPosition(c)),this._hover.onContentsChanged()}computeXCordinate(e){const t=this._hover.containerDomNode.clientWidth+2;this._target.x!==void 0?this._x=this._target.x:this._hoverPosition===1?this._x=e.right:this._hoverPosition===0?this._x=e.left-t:(this._hoverPointer?this._x=e.center.x-this._hover.containerDomNode.clientWidth/2:this._x=e.left,this._x+t>=this._targetDocumentElement.clientWidth&&(this._hover.containerDomNode.classList.add("right-aligned"),this._x=Math.max(this._targetDocumentElement.clientWidth-t-2,this._targetDocumentElement.clientLeft))),this._x<this._targetDocumentElement.clientLeft&&(this._x=e.left+2)}computeYCordinate(e){this._target.y!==void 0?this._y=this._target.y:this._hoverPosition===3?this._y=e.top:this._hoverPosition===2?this._y=e.bottom-2:this._hoverPointer?this._y=e.center.y+this._hover.containerDomNode.clientHeight/2:this._y=e.bottom,this._y>this._targetWindow.innerHeight&&(this._y=e.bottom)}adjustHorizontalHoverPosition(e){if(this._target.x!==void 0)return;const t=this._hoverPointer?3:0;if(this._forcePosition){const i=t+2;this._hoverPosition===1?this._hover.containerDomNode.style.maxWidth=`${this._targetDocumentElement.clientWidth-e.right-i}px`:this._hoverPosition===0&&(this._hover.containerDomNode.style.maxWidth=`${e.left-i}px`);return}this._hoverPosition===1?this._targetDocumentElement.clientWidth-e.right<this._hover.containerDomNode.clientWidth+t&&(e.left>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=0:this._hoverPosition=2):this._hoverPosition===0&&(e.left<this._hover.containerDomNode.clientWidth+t&&(this._targetDocumentElement.clientWidth-e.right>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=1:this._hoverPosition=2),e.left-this._hover.containerDomNode.clientWidth-t<=this._targetDocumentElement.clientLeft&&(this._hoverPosition=1))}adjustVerticalHoverPosition(e){if(this._target.y!==void 0||this._forcePosition)return;const t=this._hoverPointer?3:0;this._hoverPosition===3?e.top-this._hover.containerDomNode.clientHeight-t<0&&(this._hoverPosition=2):this._hoverPosition===2&&e.bottom+this._hover.containerDomNode.clientHeight+t>this._targetWindow.innerHeight&&(this._hoverPosition=3)}adjustHoverMaxHeight(e){let t=this._targetWindow.innerHeight/2;if(this._forcePosition){const i=(this._hoverPointer?3:0)+2;this._hoverPosition===3?t=Math.min(t,e.top-i):this._hoverPosition===2&&(t=Math.min(t,this._targetWindow.innerHeight-e.bottom-i))}if(this._hover.containerDomNode.style.maxHeight=`${t}px`,this._hover.contentsDomNode.clientHeight<this._hover.contentsDomNode.scrollHeight){const i=`${this._hover.scrollbar.options.verticalScrollbarSize}px`;this._hover.contentsDomNode.style.paddingRight!==i&&(this._hover.contentsDomNode.style.paddingRight=i)}}setHoverPointerPosition(e){if(this._hoverPointer)switch(this._hoverPosition){case 0:case 1:{this._hoverPointer.classList.add(this._hoverPosition===0?"right":"left");const t=this._hover.containerDomNode.clientHeight;t>e.height?this._hoverPointer.style.top=`${e.center.y-(this._y-t)-3}px`:this._hoverPointer.style.top=`${Math.round(t/2)-3}px`;break}case 3:case 2:{this._hoverPointer.classList.add(this._hoverPosition===3?"bottom":"top");const t=this._hover.containerDomNode.clientWidth;let i=Math.round(t/2)-3;const s=this._x+i;(s<e.left||s>e.right)&&(i=e.center.x-this._x-3),this._hoverPointer.style.left=`${i}px`;break}}}focus(){this._hover.containerDomNode.focus()}dispose(){this._isDisposed||(this._onDispose.fire(),this._hoverContainer.remove(),this._messageListeners.dispose(),this._target.dispose(),super.dispose()),this._isDisposed=!0}};NA=Bze([cv(1,Ls),cv(2,gn),cv(3,pm),cv(4,Si),cv(5,Xl)],NA);class tj extends pa{get onMouseOut(){return this._onMouseOut.event}get isMouseIn(){return this._isMouseIn}constructor(e){super(),this._elements=e,this._isMouseIn=!0,this._onMouseOut=this._register(new ue),this._elements.forEach(t=>this.onmouseover(t,()=>this._onTargetMouseOver(t))),this._elements.forEach(t=>this.onmouseleave(t,()=>this._onTargetMouseLeave(t)))}_onTargetMouseOver(e){this._isMouseIn=!0,this._clearEvaluateMouseStateTimeout(e)}_onTargetMouseLeave(e){this._isMouseIn=!1,this._evaluateMouseState(e)}_evaluateMouseState(e){this._clearEvaluateMouseStateTimeout(e),this._mouseTimeout=pt(e).setTimeout(()=>this._fireIfMouseOutside(),0)}_clearEvaluateMouseStateTimeout(e){this._mouseTimeout&&(pt(e).clearTimeout(this._mouseTimeout),this._mouseTimeout=void 0)}_fireIfMouseOutside(){this._isMouseIn||this._onMouseOut.fire()}}class Xze{constructor(e){this._element=e,this.targetElements=[this._element]}dispose(){}}function zze(n){const e=n;return!!e&&typeof e.x=="number"&&typeof e.y=="number"}var rh;(function(n){n[n.AVOID=0]="AVOID",n[n.ALIGN=1]="ALIGN"})(rh||(rh={}));function yp(n,e,t){const i=t.mode===rh.ALIGN?t.offset:t.offset+t.size,s=t.mode===rh.ALIGN?t.offset+t.size:t.offset;return t.position===0?e<=n-i?i:e<=s?s-e:Math.max(n-e,0):e<=s?s-e:e<=n-i?i:0}class Hb extends Le{constructor(e,t){super(),this.container=null,this.useFixedPosition=!1,this.useShadowDOM=!1,this.delegate=null,this.toDisposeOnClean=Le.None,this.toDisposeOnSetContainer=Le.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=St(".context-view"),mH(this.view),this.setContainer(e,t),this._register(Et(()=>this.setContainer(null,1)))}setContainer(e,t){var i;this.useFixedPosition=t!==1;const s=this.useShadowDOM;if(this.useShadowDOM=t===3,!(e===this.container&&s===this.useShadowDOM)&&(this.container&&(this.toDisposeOnSetContainer.dispose(),this.shadowRoot?(this.shadowRoot.removeChild(this.view),this.shadowRoot=null,(i=this.shadowRootHostElement)===null||i===void 0||i.remove(),this.shadowRootHostElement=null):this.container.removeChild(this.view),this.container=null),e)){if(this.container=e,this.useShadowDOM){this.shadowRootHostElement=St(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const o=document.createElement("style");o.textContent=Hze,this.shadowRoot.appendChild(o),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(St("slot"))}else this.container.appendChild(this.view);const r=new ct;Hb.BUBBLE_UP_EVENTS.forEach(o=>{r.add(ws(this.container,o,a=>{this.onDOMEvent(a,!1)}))}),Hb.BUBBLE_DOWN_EVENTS.forEach(o=>{r.add(ws(this.container,o,a=>{this.onDOMEvent(a,!0)},!0))}),this.toDisposeOnSetContainer=r}}show(e){var t,i,s;this.isVisible()&&this.hide(),Rl(this.view),this.view.className="context-view monaco-component",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex=`${2575+((t=e.layer)!==null&&t!==void 0?t:0)}`,this.view.style.position=this.useFixedPosition?"fixed":"absolute",Eie(this.view),this.toDisposeOnClean=e.render(this.view)||Le.None,this.delegate=e,this.doLayout(),(s=(i=this.delegate).focus)===null||s===void 0||s.call(i)}getViewElement(){return this.view}layout(){var e,t;if(this.isVisible()){if(this.delegate.canRelayout===!1&&!(Lg&&zte.pointerEvents)){this.hide();return}(t=(e=this.delegate)===null||e===void 0?void 0:e.layout)===null||t===void 0||t.call(e),this.doLayout()}}doLayout(){if(!this.isVisible())return;const e=this.delegate.getAnchor();let t;if(Es(e)){const h=ho(e),f=xie(e);t={top:h.top*f,left:h.left*f,width:h.width*f,height:h.height*f}}else zze(e)?t={top:e.y,left:e.x,width:e.width||1,height:e.height||2}:t={top:e.posy,left:e.posx,width:2,height:2};const i=Ca(this.view),s=c3(this.view),r=this.delegate.anchorPosition||0,o=this.delegate.anchorAlignment||0,a=this.delegate.anchorAxisAlignment||0;let l,c;const d=PS();if(a===0){const h={offset:t.top-d.pageYOffset,size:t.height,position:r===0?0:1},f={offset:t.left,size:t.width,position:o===0?0:1,mode:rh.ALIGN};l=yp(d.innerHeight,s,h)+d.pageYOffset,Ys.intersects({start:l,end:l+s},{start:h.offset,end:h.offset+h.size})&&(f.mode=rh.AVOID),c=yp(d.innerWidth,i,f)}else{const h={offset:t.left,size:t.width,position:o===0?0:1},f={offset:t.top,size:t.height,position:r===0?0:1,mode:rh.ALIGN};c=yp(d.innerWidth,i,h),Ys.intersects({start:c,end:c+i},{start:h.offset,end:h.offset+h.size})&&(f.mode=rh.AVOID),l=yp(d.innerHeight,s,f)+d.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(r===0?"bottom":"top"),this.view.classList.add(o===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const u=ho(this.container);this.view.style.top=`${l-(this.useFixedPosition?ho(this.view).top:u.top)}px`,this.view.style.left=`${c-(this.useFixedPosition?ho(this.view).left:u.left)}px`,this.view.style.width="initial"}hide(e){const t=this.delegate;this.delegate=null,t?.onHide&&t.onHide(e),this.toDisposeOnClean.dispose(),mH(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,pt(e).document.activeElement):t&&!ss(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}}Hb.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"];Hb.BUBBLE_DOWN_EVENTS=["click"];const Hze=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`;var Uze=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Yze=function(n,e){return function(t,i){e(t,i,n)}};let tk=class extends Le{constructor(e){super(),this.layoutService=e,this.contextView=this._register(new Hb(this.layoutService.mainContainer,1)),this.layout(),this._register(e.onDidLayoutContainer(()=>this.layout()))}showContextView(e,t,i){let s;t?t===this.layoutService.getContainer(pt(t))?s=1:i?s=3:s=2:s=1,this.contextView.setContainer(t??this.layoutService.activeContainer,s),this.contextView.show(e);const r={close:()=>{this.openContextView===r&&this.hideContextView()}};return this.openContextView=r,r}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e),this.openContextView=void 0}};tk=Uze([Yze(0,ff)],tk);class Kze extends tk{getContextViewElement(){return this.contextView.getViewElement()}}class jze{constructor(e,t,i){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=i}async update(e,t,i){var s;if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let r;if(e===void 0||Dr(e)||Es(e))r=e;else if(!UC(e.markdown))r=(s=e.markdown)!==null&&s!==void 0?s:e.markdownNotSupportedFallback;else{this._hoverWidget||this.show(L("iconLabel.loading","Loading..."),t,i),this._cancellationTokenSource=new nm;const o=this._cancellationTokenSource.token;if(r=await e.markdown(o),r===void 0&&(r=e.markdownNotSupportedFallback),this.isDisposed||o.isCancellationRequested)return}this.show(r,t,i)}show(e,t,i){const s=this._hoverWidget;if(this.hasContent(e)){const r={content:e,target:this.target,appearance:{showPointer:this.hoverDelegate.placement==="element",skipFadeInAnimation:!this.fadeInAnimation||!!s},position:{hoverPosition:2},...i};this._hoverWidget=this.hoverDelegate.showHover(r,t)}s?.dispose()}hasContent(e){return e?Xd(e)?!!e.value:!0:!1}get isDisposed(){var e;return(e=this._hoverWidget)===null||e===void 0?void 0:e.isDisposed}dispose(){var e,t;(e=this._hoverWidget)===null||e===void 0||e.dispose(),(t=this._cancellationTokenSource)===null||t===void 0||t.dispose(!0),this._cancellationTokenSource=void 0}}var Jze=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},dv=function(n,e){return function(t,i){e(t,i,n)}};let RA=class extends Le{constructor(e,t,i,s,r){super(),this._instantiationService=e,this._keybindingService=i,this._layoutService=s,this._accessibilityService=r,this._existingHovers=new Map,t.onDidShowContextMenu(()=>this.hideHover()),this._contextViewHandler=this._register(new tk(this._layoutService))}showHover(e,t,i){var s,r,o,a;if(ij(this._currentHoverOptions)===ij(e)||this._currentHover&&(!((r=(s=this._currentHoverOptions)===null||s===void 0?void 0:s.persistence)===null||r===void 0)&&r.sticky))return;this._currentHoverOptions=e,this._lastHoverOptions=e;const l=e.trapFocus||this._accessibilityService.isScreenReaderOptimized(),c=Js();i||(l&&c?c.classList.contains("monaco-hover")||(this._lastFocusedElementBeforeOpen=c):this._lastFocusedElementBeforeOpen=void 0);const d=new ct,u=this._instantiationService.createInstance(NA,e);if(!((o=e.persistence)===null||o===void 0)&&o.sticky&&(u.isLocked=!0),u.onDispose(()=>{var h,f;((h=this._currentHover)===null||h===void 0?void 0:h.domNode)&&Die(this._currentHover.domNode)&&((f=this._lastFocusedElementBeforeOpen)===null||f===void 0||f.focus()),this._currentHoverOptions===e&&(this._currentHoverOptions=void 0),d.dispose()},void 0,d),!e.container){const h=Es(e.target)?e.target:e.target.targetElements[0];e.container=this._layoutService.getContainer(pt(h))}if(this._contextViewHandler.showContextView(new $ze(u,t),e.container),u.onRequestLayout(()=>this._contextViewHandler.layout(),void 0,d),!((a=e.persistence)===null||a===void 0)&&a.sticky)d.add(we(pt(e.container).document,Ge.MOUSE_DOWN,h=>{ss(h.target,u.domNode)||this.doHideHover()}));else{if("targetElements"in e.target)for(const f of e.target.targetElements)d.add(we(f,Ge.CLICK,()=>this.hideHover()));else d.add(we(e.target,Ge.CLICK,()=>this.hideHover()));const h=Js();if(h){const f=pt(h).document;d.add(we(h,Ge.KEY_DOWN,g=>{var m;return this._keyDown(g,u,!!(!((m=e.persistence)===null||m===void 0)&&m.hideOnKeyDown))})),d.add(we(f,Ge.KEY_DOWN,g=>{var m;return this._keyDown(g,u,!!(!((m=e.persistence)===null||m===void 0)&&m.hideOnKeyDown))})),d.add(we(h,Ge.KEY_UP,g=>this._keyUp(g,u))),d.add(we(f,Ge.KEY_UP,g=>this._keyUp(g,u)))}}if("IntersectionObserver"in Di){const h=new IntersectionObserver(g=>this._intersectionChange(g,u),{threshold:0}),f="targetElements"in e.target?e.target.targetElements[0]:e.target;h.observe(f),d.add(Et(()=>h.disconnect()))}return this._currentHover=u,u}hideHover(){var e;!((e=this._currentHover)===null||e===void 0)&&e.isLocked||!this._currentHoverOptions||this.doHideHover()}doHideHover(){this._currentHover=void 0,this._currentHoverOptions=void 0,this._contextViewHandler.hideContextView()}_intersectionChange(e,t){e[e.length-1].isIntersecting||t.dispose()}showAndFocusLastHover(){this._lastHoverOptions&&this.showHover(this._lastHoverOptions,!0,!0)}_keyDown(e,t,i){var s,r;if(e.key==="Alt"){t.isLocked=!0;return}const o=new Ji(e);this._keybindingService.resolveKeyboardEvent(o).getSingleModifierDispatchChords().some(l=>!!l)||this._keybindingService.softDispatch(o,o.target).kind!==0||i&&(!(!((s=this._currentHoverOptions)===null||s===void 0)&&s.trapFocus)||e.key!=="Tab")&&(this.hideHover(),(r=this._lastFocusedElementBeforeOpen)===null||r===void 0||r.focus())}_keyUp(e,t){var i;e.key==="Alt"&&(t.isLocked=!1,t.isMouseIn||(this.hideHover(),(i=this._lastFocusedElementBeforeOpen)===null||i===void 0||i.focus()))}setupUpdatableHover(e,t,i,s){t.setAttribute("custom-hover","true"),t.title!==""&&(console.warn("HTML element already has a title attribute, which will conflict with the custom hover. Please remove the title attribute."),console.trace("Stack trace:",t.title),t.title="");let r,o;const a=(v,_)=>{var y;const C=o!==void 0;v&&(o?.dispose(),o=void 0),_&&(r?.dispose(),r=void 0),C&&((y=e.onDidHideHover)===null||y===void 0||y.call(e),o=void 0)},l=(v,_,y,C)=>new lf(async()=>{(!o||o.isDisposed)&&(o=new jze(e,y||t,v>0),await o.update(typeof i=="function"?i():i,_,{...s,trapFocus:C}))},v);let c=!1;const d=we(t,Ge.MOUSE_DOWN,()=>{c=!0,a(!0,!0)},!0),u=we(t,Ge.MOUSE_UP,()=>{c=!1},!0),h=we(t,Ge.MOUSE_LEAVE,v=>{c=!1,a(!1,v.fromElement===t)},!0),f=v=>{if(r)return;const _=new ct,y={targetElements:[t],dispose:()=>{}};if(e.placement===void 0||e.placement==="mouse"){const C=S=>{y.x=S.x+10,Es(S.target)&&nj(S.target,t)!==t&&a(!0,!0)};_.add(we(t,Ge.MOUSE_MOVE,C,!0))}r=_,!(Es(v.target)&&nj(v.target,t)!==t)&&_.add(l(e.delay,!1,y))},g=we(t,Ge.MOUSE_OVER,f,!0),m=()=>{if(c||r)return;const v={targetElements:[t],dispose:()=>{}},_=new ct,y=()=>a(!0,!0);_.add(we(t,Ge.BLUR,y,!0)),_.add(l(e.delay,!1,v)),r=_};let p;const b=t.tagName.toLowerCase();b!=="input"&&b!=="textarea"&&(p=we(t,Ge.FOCUS,m,!0));const w={show:v=>{a(!1,!0),l(0,v,void 0,v)},hide:()=>{a(!0,!0)},update:async(v,_)=>{i=v,await o?.update(i,void 0,_)},dispose:()=>{this._existingHovers.delete(t),g.dispose(),h.dispose(),d.dispose(),u.dispose(),p?.dispose(),a(!0,!0)}};return this._existingHovers.set(t,w),w}triggerUpdatableHover(e){const t=this._existingHovers.get(e);t&&t.show(!0)}dispose(){this._existingHovers.forEach(e=>e.dispose()),super.dispose()}};RA=Jze([dv(0,Si),dv(1,jc),dv(2,Ls),dv(3,ff),dv(4,Xl)],RA);function ij(n){var e;if(n!==void 0)return(e=n?.id)!==null&&e!==void 0?e:n}class $ze{get anchorPosition(){return this._hover.anchor}constructor(e,t=!1){this._hover=e,this._focus=t,this.layer=1}render(e){return this._hover.render(e),this._focus&&this._hover.focus(),this._hover}getAnchor(){return{x:this._hover.x,y:this._hover.y}}layout(){this._hover.layout()}}function nj(n,e){for(e=e??pt(n).document.body;!n.hasAttribute("custom-hover")&&n!==e;)n=n.parentElement;return n}fi(_m,RA,1);zl((n,e)=>{const t=n.getColor(fWe);t&&(e.addRule(`.monaco-workbench .workbench-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-workbench .workbench-hover hr { border-top: 1px solid ${t.transparent(.5)}; }`))});const Hs={enableSplitViewResizing:!0,splitViewDefaultRatio:.5,renderSideBySide:!0,renderMarginRevertIcon:!0,renderGutterMenu:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit",diffAlgorithm:"advanced",accessibilityVerbose:!1,experimental:{showMoves:!1,showEmptyDecorations:!0},hideUnchangedRegions:{enabled:!1,contextLineCount:3,minimumLineCount:3,revealLineCount:20},isInEmbeddedEditor:!1,onlyShowAccessibleDiffViewer:!1,renderSideBySideInlineBreakpoint:900,useInlineViewWhenSpaceIsLimited:!0},Qze=Object.freeze({id:"editor",order:5,type:"object",title:L("editorConfigurationTitle","Editor"),scope:5}),ik={...Qze,properties:{"editor.tabSize":{type:"number",default:Ks.tabSize,minimum:1,markdownDescription:L("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.indentSize":{anyOf:[{type:"string",enum:["tabSize"]},{type:"number",minimum:1}],default:"tabSize",markdownDescription:L("indentSize",'The number of spaces used for indentation or `"tabSize"` to use the value from `#editor.tabSize#`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.')},"editor.insertSpaces":{type:"boolean",default:Ks.insertSpaces,markdownDescription:L("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.detectIndentation":{type:"boolean",default:Ks.detectIndentation,markdownDescription:L("detectIndentation","Controls whether {0} and {1} will be automatically detected when a file is opened based on the file contents.","`#editor.tabSize#`","`#editor.insertSpaces#`")},"editor.trimAutoWhitespace":{type:"boolean",default:Ks.trimAutoWhitespace,description:L("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:Ks.largeFileOptimizations,description:L("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{enum:["off","currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[L("wordBasedSuggestions.off","Turn off Word Based Suggestions."),L("wordBasedSuggestions.currentDocument","Only suggest words from the active document."),L("wordBasedSuggestions.matchingDocuments","Suggest words from all open documents of the same language."),L("wordBasedSuggestions.allDocuments","Suggest words from all open documents.")],description:L("wordBasedSuggestions","Controls whether completions should be computed based on words in the document and from which documents they are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[L("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),L("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),L("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:L("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:L("stablePeek","Keep peek editors open even when double-clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:L("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.experimental.asyncTokenization":{type:"boolean",default:!1,description:L("editor.experimental.asyncTokenization","Controls whether the tokenization should happen asynchronously on a web worker."),tags:["experimental"]},"editor.experimental.asyncTokenizationLogging":{type:"boolean",default:!1,description:L("editor.experimental.asyncTokenizationLogging","Controls whether async tokenization should be logged. For debugging only.")},"editor.experimental.asyncTokenizationVerification":{type:"boolean",default:!1,description:L("editor.experimental.asyncTokenizationVerification","Controls whether async tokenization should be verified against legacy background tokenization. Might slow down tokenization. For debugging only."),tags:["experimental"]},"editor.language.brackets":{type:["array","null"],default:null,description:L("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:L("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:L("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:["array","null"],default:null,description:L("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:L("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:L("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:Hs.maxComputationTime,description:L("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:Hs.maxFileSize,description:L("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:Hs.renderSideBySide,description:L("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.renderSideBySideInlineBreakpoint":{type:"number",default:Hs.renderSideBySideInlineBreakpoint,description:L("renderSideBySideInlineBreakpoint","If the diff editor width is smaller than this value, the inline view is used.")},"diffEditor.useInlineViewWhenSpaceIsLimited":{type:"boolean",default:Hs.useInlineViewWhenSpaceIsLimited,description:L("useInlineViewWhenSpaceIsLimited","If enabled and the editor width is too small, the inline view is used.")},"diffEditor.renderMarginRevertIcon":{type:"boolean",default:Hs.renderMarginRevertIcon,description:L("renderMarginRevertIcon","When enabled, the diff editor shows arrows in its glyph margin to revert changes.")},"diffEditor.renderGutterMenu":{type:"boolean",default:Hs.renderGutterMenu,description:L("renderGutterMenu","When enabled, the diff editor shows a special gutter for revert and stage actions.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:Hs.ignoreTrimWhitespace,description:L("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:Hs.renderIndicators,description:L("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:Hs.diffCodeLens,description:L("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:Hs.diffWordWrap,markdownEnumDescriptions:[L("wordWrap.off","Lines will never wrap."),L("wordWrap.on","Lines will wrap at the viewport width."),L("wordWrap.inherit","Lines will wrap according to the {0} setting.","`#editor.wordWrap#`")]},"diffEditor.diffAlgorithm":{type:"string",enum:["legacy","advanced"],default:Hs.diffAlgorithm,markdownEnumDescriptions:[L("diffAlgorithm.legacy","Uses the legacy diffing algorithm."),L("diffAlgorithm.advanced","Uses the advanced diffing algorithm.")],tags:["experimental"]},"diffEditor.hideUnchangedRegions.enabled":{type:"boolean",default:Hs.hideUnchangedRegions.enabled,markdownDescription:L("hideUnchangedRegions.enabled","Controls whether the diff editor shows unchanged regions.")},"diffEditor.hideUnchangedRegions.revealLineCount":{type:"integer",default:Hs.hideUnchangedRegions.revealLineCount,markdownDescription:L("hideUnchangedRegions.revealLineCount","Controls how many lines are used for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.minimumLineCount":{type:"integer",default:Hs.hideUnchangedRegions.minimumLineCount,markdownDescription:L("hideUnchangedRegions.minimumLineCount","Controls how many lines are used as a minimum for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.contextLineCount":{type:"integer",default:Hs.hideUnchangedRegions.contextLineCount,markdownDescription:L("hideUnchangedRegions.contextLineCount","Controls how many lines are used as context when comparing unchanged regions."),minimum:1},"diffEditor.experimental.showMoves":{type:"boolean",default:Hs.experimental.showMoves,markdownDescription:L("showMoves","Controls whether the diff editor should show detected code moves.")},"diffEditor.experimental.showEmptyDecorations":{type:"boolean",default:Hs.experimental.showEmptyDecorations,description:L("showEmptyDecorations","Controls whether the diff editor shows empty decorations to see where characters got inserted or deleted.")}}};function qze(n){return typeof n.type<"u"||typeof n.anyOf<"u"}for(const n of ap){const e=n.schema;if(typeof e<"u")if(qze(e))ik.properties[`editor.${n.name}`]=e;else for(const t in e)Object.hasOwnProperty.call(e,t)&&(ik.properties[t]=e[t])}let dS=null;function Coe(){return dS===null&&(dS=Object.create(null),Object.keys(ik.properties).forEach(n=>{dS[n]=!0})),dS}function eHe(n){return Coe()[`editor.${n}`]||!1}function tHe(n){return Coe()[`diffEditor.${n}`]||!1}const iHe=Ss.as(dm.Configuration);iHe.registerConfiguration(ik);class nHe{static insert(e,t){return{range:new te(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}}function uS(n){return Object.isFrozen(n)?n:X9e(n)}class Ms{static createEmptyModel(e){return new Ms({},[],[],void 0,e)}constructor(e,t,i,s,r){this._contents=e,this._keys=t,this._overrides=i,this.raw=s,this.logService=r,this.overrideConfigurations=new Map}get rawConfiguration(){var e;if(!this._rawConfiguration)if(!((e=this.raw)===null||e===void 0)&&e.length){const t=this.raw.map(i=>{if(i instanceof Ms)return i;const s=new sHe("",this.logService);return s.parseRaw(i),s.configurationModel});this._rawConfiguration=t.reduce((i,s)=>s===i?s:i.merge(s),t[0])}else this._rawConfiguration=this;return this._rawConfiguration}get contents(){return this._contents}get overrides(){return this._overrides}get keys(){return this._keys}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(e){return e?NH(this.contents,e):this.contents}inspect(e,t){const i=this;return{get value(){return uS(i.rawConfiguration.getValue(e))},get override(){return t?uS(i.rawConfiguration.getOverrideValue(e,t)):void 0},get merged(){return uS(t?i.rawConfiguration.override(t).getValue(e):i.rawConfiguration.getValue(e))},get overrides(){const s=[];for(const{contents:r,identifiers:o,keys:a}of i.rawConfiguration.overrides){const l=new Ms(r,a,[],void 0,i.logService).getValue(e);l!==void 0&&s.push({identifiers:o,value:l})}return s.length?uS(s):void 0}}}getOverrideValue(e,t){const i=this.getContentsForOverrideIdentifer(t);return i?e?NH(i,e):i:void 0}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...e){var t,i;const s=Wu(this.contents),r=Wu(this.overrides),o=[...this.keys],a=!((t=this.raw)===null||t===void 0)&&t.length?[...this.raw]:[this];for(const l of e)if(a.push(...!((i=l.raw)===null||i===void 0)&&i.length?l.raw:[l]),!l.isEmpty()){this.mergeContents(s,l.contents);for(const c of l.overrides){const[d]=r.filter(u=>Gs(u.identifiers,c.identifiers));d?(this.mergeContents(d.contents,c.contents),d.keys.push(...c.keys),d.keys=Ah(d.keys)):r.push(Wu(c))}for(const c of l.keys)o.indexOf(c)===-1&&o.push(c)}return new Ms(s,o,r,a.every(l=>l instanceof Ms)?void 0:a,this.logService)}createOverrideConfigurationModel(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;const i={};for(const s of Ah([...Object.keys(this.contents),...Object.keys(t)])){let r=this.contents[s];const o=t[s];o&&(typeof r=="object"&&typeof o=="object"?(r=Wu(r),this.mergeContents(r,o)):r=o),i[s]=r}return new Ms(i,this.keys,this.overrides,void 0,this.logService)}mergeContents(e,t){for(const i of Object.keys(t)){if(i in e&&Ha(e[i])&&Ha(t[i])){this.mergeContents(e[i],t[i]);continue}e[i]=Wu(t[i])}}getContentsForOverrideIdentifer(e){let t=null,i=null;const s=r=>{r&&(i?this.mergeContents(i,r):i=Wu(r))};for(const r of this.overrides)r.identifiers.length===1&&r.identifiers[0]===e?t=r.contents:r.identifiers.includes(e)&&s(r.contents);return s(t),i}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}addValue(e,t){this.updateValue(e,t,!0)}setValue(e,t){this.updateValue(e,t,!1)}removeValue(e){const t=this.keys.indexOf(e);t!==-1&&(this.keys.splice(t,1),d9e(this.contents,e),Fh.test(e)&&this.overrides.splice(this.overrides.findIndex(i=>Gs(i.identifiers,uL(e))),1))}updateValue(e,t,i){tne(this.contents,e,t,s=>this.logService.error(s)),i=i||this.keys.indexOf(e)===-1,i&&this.keys.push(e),Fh.test(e)&&this.overrides.push({identifiers:uL(e),keys:Object.keys(this.contents[e]),contents:_3(this.contents[e],s=>this.logService.error(s))})}}class sHe{constructor(e,t){this._name=e,this.logService=t,this._raw=null,this._configurationModel=null,this._restrictedConfigurations=[]}get configurationModel(){return this._configurationModel||Ms.createEmptyModel(this.logService)}parseRaw(e,t){this._raw=e;const{contents:i,keys:s,overrides:r,restricted:o,hasExcludedProperties:a}=this.doParseRaw(e,t);this._configurationModel=new Ms(i,s,r,a?[e]:void 0,this.logService),this._restrictedConfigurations=o||[]}doParseRaw(e,t){const i=Ss.as(dm.Configuration).getConfigurationProperties(),s=this.filter(e,i,!0,t);e=s.raw;const r=_3(e,l=>this.logService.error(`Conflict in settings file ${this._name}: ${l}`)),o=Object.keys(e),a=this.toOverrides(e,l=>this.logService.error(`Conflict in settings file ${this._name}: ${l}`));return{contents:r,keys:o,overrides:a,restricted:s.restricted,hasExcludedProperties:s.hasExcludedProperties}}filter(e,t,i,s){var r,o,a;let l=!1;if(!s?.scopes&&!s?.skipRestricted&&!(!((r=s?.exclude)===null||r===void 0)&&r.length))return{raw:e,restricted:[],hasExcludedProperties:l};const c={},d=[];for(const u in e)if(Fh.test(u)&&i){const h=this.filter(e[u],t,!1,s);c[u]=h.raw,l=l||h.hasExcludedProperties,d.push(...h.restricted)}else{const h=t[u],f=h?typeof h.scope<"u"?h.scope:3:void 0;h?.restricted&&d.push(u),!(!((o=s.exclude)===null||o===void 0)&&o.includes(u))&&(!((a=s.include)===null||a===void 0)&&a.includes(u)||(f===void 0||s.scopes===void 0||s.scopes.includes(f))&&!(s.skipRestricted&&h?.restricted))?c[u]=e[u]:l=!0}return{raw:c,restricted:d,hasExcludedProperties:l}}toOverrides(e,t){const i=[];for(const s of Object.keys(e))if(Fh.test(s)){const r={};for(const o in e[s])r[o]=e[s][o];i.push({identifiers:uL(s),keys:Object.keys(r),contents:_3(r,t)})}return i}}class rHe{constructor(e,t,i,s,r,o,a,l,c,d,u,h,f){this.key=e,this.overrides=t,this._value=i,this.overrideIdentifiers=s,this.defaultConfiguration=r,this.policyConfiguration=o,this.applicationConfiguration=a,this.userConfiguration=l,this.localUserConfiguration=c,this.remoteUserConfiguration=d,this.workspaceConfiguration=u,this.folderConfigurationModel=h,this.memoryConfigurationModel=f}toInspectValue(e){return e?.value!==void 0||e?.override!==void 0||e?.overrides!==void 0?e:void 0}get userInspectValue(){return this._userInspectValue||(this._userInspectValue=this.userConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._userInspectValue}get user(){return this.toInspectValue(this.userInspectValue)}}class bT{constructor(e,t,i,s,r,o,a,l,c,d){this._defaultConfiguration=e,this._policyConfiguration=t,this._applicationConfiguration=i,this._localUserConfiguration=s,this._remoteUserConfiguration=r,this._workspaceConfiguration=o,this._folderConfigurations=a,this._memoryConfiguration=l,this._memoryConfigurationByResource=c,this.logService=d,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new An,this._userConfiguration=null}getValue(e,t,i){return this.getConsolidatedConfigurationModel(e,t,i).getValue(e)}updateValue(e,t,i={}){let s;i.resource?(s=this._memoryConfigurationByResource.get(i.resource),s||(s=Ms.createEmptyModel(this.logService),this._memoryConfigurationByResource.set(i.resource,s))):s=this._memoryConfiguration,t===void 0?s.removeValue(e):s.setValue(e,t),i.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(e,t,i){const s=this.getConsolidatedConfigurationModel(e,t,i),r=this.getFolderConfigurationModelForResource(t.resource,i),o=t.resource?this._memoryConfigurationByResource.get(t.resource)||this._memoryConfiguration:this._memoryConfiguration,a=new Set;for(const l of s.overrides)for(const c of l.identifiers)s.getOverrideValue(e,c)!==void 0&&a.add(c);return new rHe(e,t,s.getValue(e),a.size?[...a]:void 0,this._defaultConfiguration,this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,i?this._workspaceConfiguration:void 0,r||void 0,o)}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration)),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}getConsolidatedConfigurationModel(e,t,i){let s=this.getConsolidatedConfigurationModelForResource(t,i);return t.overrideIdentifier&&(s=s.override(t.overrideIdentifier)),!this._policyConfiguration.isEmpty()&&this._policyConfiguration.getValue(e)!==void 0&&(s=s.merge(this._policyConfiguration)),s}getConsolidatedConfigurationModelForResource({resource:e},t){let i=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const s=t.getFolder(e);s&&(i=this.getFolderConsolidatedConfiguration(s.uri)||i);const r=this._memoryConfigurationByResource.get(e);r&&(i=i.merge(r))}return i}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration)),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const i=this.getWorkspaceConsolidatedConfiguration(),s=this._folderConfigurations.get(e);s?(t=i.merge(s),this._foldersConsolidatedConfigurations.set(e,t)):t=i}return t}getFolderConfigurationModelForResource(e,t){if(t&&e){const i=t.getFolder(e);if(i)return this._folderConfigurations.get(i.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{const{contents:i,overrides:s,keys:r}=this._folderConfigurations.get(t);return e.push([t,{contents:i,overrides:s,keys:r}]),e},[])}}static parse(e,t){const i=this.parseConfigurationModel(e.defaults,t),s=this.parseConfigurationModel(e.policy,t),r=this.parseConfigurationModel(e.application,t),o=this.parseConfigurationModel(e.user,t),a=this.parseConfigurationModel(e.workspace,t),l=e.folders.reduce((c,d)=>(c.set(Ft.revive(d[0]),this.parseConfigurationModel(d[1],t)),c),new An);return new bT(i,s,r,o,Ms.createEmptyModel(t),a,l,Ms.createEmptyModel(t),new An,t)}static parseConfigurationModel(e,t){return new Ms(e.contents,e.keys,e.overrides,void 0,t)}}class oHe{constructor(e,t,i,s,r){this.change=e,this.previous=t,this.currentConfiguraiton=i,this.currentWorkspace=s,this.logService=r,this._marker=`
`,this._markerCode1=this._marker.charCodeAt(0),this._markerCode2=46,this.affectedKeys=new Set,this._previousConfiguration=void 0;for(const o of e.keys)this.affectedKeys.add(o);for(const[,o]of e.overrides)for(const a of o)this.affectedKeys.add(a);this._affectsConfigStr=this._marker;for(const o of this.affectedKeys)this._affectsConfigStr+=o+this._marker}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=bT.parse(this.previous.data,this.logService)),this._previousConfiguration}affectsConfiguration(e,t){var i;const s=this._marker+e,r=this._affectsConfigStr.indexOf(s);if(r<0)return!1;const o=r+s.length;if(o>=this._affectsConfigStr.length)return!1;const a=this._affectsConfigStr.charCodeAt(o);if(a!==this._markerCode1&&a!==this._markerCode2)return!1;if(t){const l=this.previousConfiguration?this.previousConfiguration.getValue(e,t,(i=this.previous)===null||i===void 0?void 0:i.workspace):void 0,c=this.currentConfiguraiton.getValue(e,t,this.currentWorkspace);return!Ro(l,c)}return!0}}const nk={kind:0},aHe={kind:1};function lHe(n,e,t){return{kind:2,commandId:n,commandArgs:e,isBubble:t}}class w_{constructor(e,t,i){var s;this._log=i,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(const r of e){const o=r.command;o&&o.charAt(0)!=="-"&&this._defaultBoundCommands.set(o,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=w_.handleRemovals([].concat(e).concat(t));for(let r=0,o=this._keybindings.length;r<o;r++){const a=this._keybindings[r];if(a.chords.length===0)continue;const l=(s=a.when)===null||s===void 0?void 0:s.substituteConstants();l&&l.type===0||this._addKeyPress(a.chords[0],a)}}static _isTargetedForRemoval(e,t,i){if(t){for(let s=0;s<t.length;s++)if(t[s]!==e.chords[s])return!1}return!(i&&i.type!==1&&(!e.when||!uRe(i,e.when)))}static handleRemovals(e){const t=new Map;for(let s=0,r=e.length;s<r;s++){const o=e[s];if(o.command&&o.command.charAt(0)==="-"){const a=o.command.substring(1);t.has(a)?t.get(a).push(o):t.set(a,[o])}}if(t.size===0)return e;const i=[];for(let s=0,r=e.length;s<r;s++){const o=e[s];if(!o.command||o.command.length===0){i.push(o);continue}if(o.command.charAt(0)==="-")continue;const a=t.get(o.command);if(!a||!o.isDefault){i.push(o);continue}let l=!1;for(const c of a){const d=c.when;if(this._isTargetedForRemoval(o,c.chords,d)){l=!0;break}}if(!l){i.push(o);continue}}return i}_addKeyPress(e,t){const i=this._map.get(e);if(typeof i>"u"){this._map.set(e,[t]),this._addToLookupMap(t);return}for(let s=i.length-1;s>=0;s--){const r=i[s];if(r.command===t.command)continue;let o=!0;for(let a=1;a<r.chords.length&&a<t.chords.length;a++)if(r.chords[a]!==t.chords[a]){o=!1;break}o&&w_.whenIsEntirelyIncluded(r.when,t.when)&&this._removeFromLookupMap(r)}i.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);typeof t>"u"?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;const t=this._lookupMap.get(e.command);if(!(typeof t>"u")){for(let i=0,s=t.length;i<s;i++)if(t[i]===e){t.splice(i,1);return}}}static whenIsEntirelyIncluded(e,t){return!t||t.type===1?!0:!e||e.type===1?!1:b3(e,t)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,t){const i=this._lookupMap.get(e);if(typeof i>"u"||i.length===0)return null;if(i.length===1)return i[0];for(let s=i.length-1;s>=0;s--){const r=i[s];if(t.contextMatchesRules(r.when))return r}return i[i.length-1]}resolve(e,t,i){const s=[...t,i];this._log(`| Resolving ${s}`);const r=this._map.get(s[0]);if(r===void 0)return this._log("\\ No keybinding entries."),nk;let o=null;if(s.length<2)o=r;else{o=[];for(let l=0,c=r.length;l<c;l++){const d=r[l];if(s.length>d.chords.length)continue;let u=!0;for(let h=1;h<s.length;h++)if(d.chords[h]!==s[h]){u=!1;break}u&&o.push(d)}}const a=this._findCommand(e,o);return a?s.length<a.chords.length?(this._log(`\\ From ${o.length} keybinding entries, awaiting ${a.chords.length-s.length} more chord(s), when: ${sj(a.when)}, source: ${rj(a)}.`),aHe):(this._log(`\\ From ${o.length} keybinding entries, matched ${a.command}, when: ${sj(a.when)}, source: ${rj(a)}.`),lHe(a.command,a.commandArgs,a.bubble)):(this._log(`\\ From ${o.length} keybinding entries, no when clauses matched the context.`),nk)}_findCommand(e,t){for(let i=t.length-1;i>=0;i--){const s=t[i];if(w_._contextMatchesRules(e,s.when))return s}return null}static _contextMatchesRules(e,t){return t?t.evaluate(e):!0}}function sj(n){return n?`${n.serialize()}`:"no when condition"}function rj(n){return n.extensionId?n.isBuiltinExtension?`built-in extension ${n.extensionId}`:`user extension ${n.extensionId}`:n.isDefault?"built-in":"user"}const cHe=/^(cursor|delete|undo|redo|tab|editor\.action\.clipboard)/;class dHe extends Le{get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:Be.None}get inChordMode(){return this._currentChords.length>0}constructor(e,t,i,s,r){super(),this._contextKeyService=e,this._commandService=t,this._telemetryService=i,this._notificationService=s,this._logService=r,this._onDidUpdateKeybindings=this._register(new ue),this._currentChords=[],this._currentChordChecker=new kV,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=Sp.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new lf,this._currentlyDispatchingCommandId=null,this._logging=!1}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,t){const i=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService);if(i)return i.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){this._log("/ Soft dispatching keyboard event");const i=this.resolveKeyboardEvent(e);if(i.hasMultipleChords())return console.warn("keyboard event should not be mapped to multiple chords"),nk;const[s]=i.getDispatchChords();if(s===null)return this._log("\\ Keyboard event cannot be dispatched"),nk;const r=this._contextKeyService.getContext(t),o=this._currentChords.map(({keypress:a})=>a);return this._getResolver().resolve(r,o,s)}_scheduleLeaveChordMode(){const e=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-e>5e3&&this._leaveChordMode()},500)}_expectAnotherChord(e,t){switch(this._currentChords.push({keypress:e,label:t}),this._currentChords.length){case 0:throw yV("impossible");case 1:this._currentChordStatusMessage=this._notificationService.status(L("first.chord","({0}) was pressed. Waiting for second key of chord...",t));break;default:{const i=this._currentChords.map(({label:s})=>s).join(", ");this._currentChordStatusMessage=this._notificationService.status(L("next.chord","({0}) was pressed. Waiting for next key of chord...",i))}}this._scheduleLeaveChordMode(),e_.enabled&&e_.disable()}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChords=[],e_.enable()}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){const i=this.resolveKeyboardEvent(e),[s]=i.getSingleModifierDispatchChords();if(s)return this._ignoreSingleModifiers.has(s)?(this._log(`+ Ignoring single modifier ${s} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=Sp.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=Sp.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${s}.`),this._currentSingleModifier=s,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):s===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${s} ${s}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(i,t,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${s}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[r]=i.getChords();return this._ignoreSingleModifiers=new Sp(r),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,t,i=!1){var s;let r=!1;if(e.hasMultipleChords())return console.warn("Unexpected keyboard event mapped to multiple chords"),!1;let o=null,a=null;if(i){const[u]=e.getSingleModifierDispatchChords();o=u,a=u?[u]:[]}else[o]=e.getDispatchChords(),a=this._currentChords.map(({keypress:u})=>u);if(o===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),r;const l=this._contextKeyService.getContext(t),c=e.getLabel(),d=this._getResolver().resolve(l,a,o);switch(d.kind){case 0:{if(this._logService.trace("KeybindingService#dispatch",c,"[ No matching keybinding ]"),this.inChordMode){const u=this._currentChords.map(({label:h})=>h).join(", ");this._log(`+ Leaving multi-chord mode: Nothing bound to "${u}, ${c}".`),this._notificationService.status(L("missing.chord","The key combination ({0}, {1}) is not a command.",u,c),{hideAfter:10*1e3}),this._leaveChordMode(),r=!0}return r}case 1:return this._logService.trace("KeybindingService#dispatch",c,"[ Several keybindings match - more chords needed ]"),r=!0,this._expectAnotherChord(o,c),this._log(this._currentChords.length===1?"+ Entering multi-chord mode...":"+ Continuing multi-chord mode..."),r;case 2:{if(this._logService.trace("KeybindingService#dispatch",c,`[ Will dispatch command ${d.commandId} ]`),d.commandId===null||d.commandId===""){if(this.inChordMode){const u=this._currentChords.map(({label:h})=>h).join(", ");this._log(`+ Leaving chord mode: Nothing bound to "${u}, ${c}".`),this._notificationService.status(L("missing.chord","The key combination ({0}, {1}) is not a command.",u,c),{hideAfter:10*1e3}),this._leaveChordMode(),r=!0}}else{this.inChordMode&&this._leaveChordMode(),d.isBubble||(r=!0),this._log(`+ Invoking command ${d.commandId}.`),this._currentlyDispatchingCommandId=d.commandId;try{typeof d.commandArgs>"u"?this._commandService.executeCommand(d.commandId).then(void 0,u=>this._notificationService.warn(u)):this._commandService.executeCommand(d.commandId,d.commandArgs).then(void 0,u=>this._notificationService.warn(u))}finally{this._currentlyDispatchingCommandId=null}cHe.test(d.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:d.commandId,from:"keybinding",detail:(s=e.getUserSettingsLabel())!==null&&s!==void 0?s:void 0})}return r}}}mightProducePrintableCharacter(e){return e.ctrlKey||e.metaKey?!1:e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30}}class Sp{constructor(e){this._ctrlKey=e?e.ctrlKey:!1,this._shiftKey=e?e.shiftKey:!1,this._altKey=e?e.altKey:!1,this._metaKey=e?e.metaKey:!1}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}}Sp.EMPTY=new Sp(null);class oj{constructor(e,t,i,s,r,o,a){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.chords=e?WA(e.getDispatchChords()):[],e&&this.chords.length===0&&(this.chords=WA(e.getSingleModifierDispatchChords())),this.bubble=t?t.charCodeAt(0)===94:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=i,this.when=s,this.isDefault=r,this.extensionId=o,this.isBuiltinExtension=a}}function WA(n){const e=[];for(let t=0,i=n.length;t<i;t++){const s=n[t];if(!s)return[];e.push(s)}return e}class vT{constructor(e,t,i=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=i}toLabel(e,t,i){if(t.length===0)return null;const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=i(a);if(l===null)return null;s[r]=gHe(a,l,this.modifierLabels[e])}return s.join(" ")}}const _O=new vT({ctrlKey:"",shiftKey:"",altKey:"",metaKey:"",separator:""},{ctrlKey:L({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:L({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:L({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:L({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:L({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:L({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:L({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:L({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),uHe=new vT({ctrlKey:L({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:L({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:L({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:L({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:L({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:L({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:L({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:L({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:L({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:L({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:L({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:L({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),hHe=new vT({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),fHe=new vT({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function gHe(n,e,t){if(e===null)return"";const i=[];return n.ctrlKey&&i.push(t.ctrlKey),n.shiftKey&&i.push(t.shiftKey),n.altKey&&i.push(t.altKey),n.metaKey&&i.push(t.metaKey),e!==""&&i.push(e),i.join(t.separator)}class mHe extends YEe{constructor(e,t){if(super(),t.length===0)throw wb("chords");this._os=e,this._chords=t}getLabel(){return _O.toLabel(this._os,this._chords,e=>this._getLabel(e))}getAriaLabel(){return uHe.toLabel(this._os,this._chords,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._chords.length>1||this._chords[0].isDuplicateModifierCase()?null:hHe.toLabel(this._os,this._chords,e=>this._getElectronAccelerator(e))}getUserSettingsLabel(){return fHe.toLabel(this._os,this._chords,e=>this._getUserSettingsLabel(e))}hasMultipleChords(){return this._chords.length>1}getChords(){return this._chords.map(e=>this._getChord(e))}_getChord(e){return new UEe(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchChords(){return this._chords.map(e=>this._getChordDispatch(e))}getSingleModifierDispatchChords(){return this._chords.map(e=>this._getSingleModifierChordDispatch(e))}}class y1 extends mHe{constructor(e,t){super(t,e)}_keyCodeToUILabel(e){if(this._os===2)switch(e){case 15:return"";case 16:return"";case 17:return"";case 18:return""}return fd.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":fd.toString(e.keyCode)}_getElectronAccelerator(e){return fd.toElectronAccelerator(e.keyCode)}_getUserSettingsLabel(e){if(e.isDuplicateModifierCase())return"";const t=fd.toUserSettingsUS(e.keyCode);return t&&t.toLowerCase()}_getChordDispatch(e){return y1.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=fd.toString(e.keyCode),t}_getSingleModifierChordDispatch(e){return e.keyCode===5&&!e.shiftKey&&!e.altKey&&!e.metaKey?"ctrl":e.keyCode===4&&!e.ctrlKey&&!e.altKey&&!e.metaKey?"shift":e.keyCode===6&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey?"alt":e.keyCode===57&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?"meta":null}static _scanCodeToKeyCode(e){const t=wV[e];if(t!==-1)return t;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 88;case 52:return 86;case 53:return 92;case 54:return 94;case 55:return 93;case 56:return 0;case 57:return 85;case 58:return 95;case 59:return 91;case 60:return 87;case 61:return 89;case 62:return 90;case 106:return 97}return 0}static _toKeyCodeChord(e){if(!e)return null;if(e instanceof xg)return e;const t=this._scanCodeToKeyCode(e.scanCode);return t===0?null:new xg(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveKeybinding(e,t){const i=WA(e.chords.map(s=>this._toKeyCodeChord(s)));return i.length>0?[new y1(i,t)]:[]}}const pHe=ri("labelService");var aj;(function(n){n.inspectTokensAction=L("inspectTokens","Developer: Inspect Tokens")})(aj||(aj={}));var lj;(function(n){n.gotoLineActionLabel=L("gotoLineActionLabel","Go to Line/Column...")})(lj||(lj={}));var cj;(function(n){n.helpQuickAccessActionLabel=L("helpQuickAccess","Show all Quick Access Providers")})(cj||(cj={}));var dj;(function(n){n.quickCommandActionLabel=L("quickCommandActionLabel","Command Palette"),n.quickCommandHelp=L("quickCommandActionHelp","Show And Run Commands")})(dj||(dj={}));var uj;(function(n){n.quickOutlineActionLabel=L("quickOutlineActionLabel","Go to Symbol..."),n.quickOutlineByCategoryActionLabel=L("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")})(uj||(uj={}));var sk;(function(n){n.editorViewAccessibleLabel=L("editorViewAccessibleLabel","Editor content"),n.accessibilityHelpMessage=L("accessibilityHelpMessage","Press Alt+F1 for Accessibility Options.")})(sk||(sk={}));var hj;(function(n){n.toggleHighContrast=L("toggleHighContrast","Toggle High Contrast Theme")})(hj||(hj={}));var AA;(function(n){n.bulkEditServiceSummary=L("bulkEditServiceSummary","Made {0} edits in {1} files")})(AA||(AA={}));const bHe=ri("workspaceTrustManagementService");let Ub=[],wO=[],Loe=[];function hS(n,e=!1){vHe(n,!1,e)}function vHe(n,e,t){const i=_He(n,e);Ub.push(i),i.userConfigured?Loe.push(i):wO.push(i),t&&!i.userConfigured&&Ub.forEach(s=>{s.mime===i.mime||s.userConfigured||(i.extension&&s.extension===i.extension&&console.warn(`Overwriting extension <<${i.extension}>> to now point to mime <<${i.mime}>>`),i.filename&&s.filename===i.filename&&console.warn(`Overwriting filename <<${i.filename}>> to now point to mime <<${i.mime}>>`),i.filepattern&&s.filepattern===i.filepattern&&console.warn(`Overwriting filepattern <<${i.filepattern}>> to now point to mime <<${i.mime}>>`),i.firstline&&s.firstline===i.firstline&&console.warn(`Overwriting firstline <<${i.firstline}>> to now point to mime <<${i.mime}>>`))})}function _He(n,e){return{id:n.id,mime:n.mime,filename:n.filename,extension:n.extension,filepattern:n.filepattern,firstline:n.firstline,userConfigured:e,filenameLowercase:n.filename?n.filename.toLowerCase():void 0,extensionLowercase:n.extension?n.extension.toLowerCase():void 0,filepatternLowercase:n.filepattern?zre(n.filepattern.toLowerCase()):void 0,filepatternOnPath:n.filepattern?n.filepattern.indexOf(Gn.sep)>=0:!1}}function wHe(){Ub=Ub.filter(n=>n.userConfigured),wO=[]}function yHe(n,e){return SHe(n,e).map(t=>t.id)}function SHe(n,e){let t;if(n)switch(n.scheme){case Mt.file:t=n.fsPath;break;case Mt.data:{t=TL.parseMetaData(n).get(TL.META_DATA_LABEL);break}case Mt.vscodeNotebookCell:t=void 0;break;default:t=n.path}if(!t)return[{id:"unknown",mime:_n.unknown}];t=t.toLowerCase();const i=bie(t),s=fj(t,i,Loe);if(s)return[s,{id:Va,mime:_n.text}];const r=fj(t,i,wO);if(r)return[r,{id:Va,mime:_n.text}];if(e){const o=CHe(e);if(o)return[o,{id:Va,mime:_n.text}]}return[{id:"unknown",mime:_n.unknown}]}function fj(n,e,t){var i;let s,r,o;for(let a=t.length-1;a>=0;a--){const l=t[a];if(e===l.filenameLowercase){s=l;break}if(l.filepattern&&(!r||l.filepattern.length>r.filepattern.length)){const c=l.filepatternOnPath?n:e;!((i=l.filepatternLowercase)===null||i===void 0)&&i.call(l,c)&&(r=l)}l.extension&&(!o||l.extension.length>o.extension.length)&&e.endsWith(l.extensionLowercase)&&(o=l)}if(s)return s;if(r)return r;if(o)return o}function CHe(n){if(RV(n)&&(n=n.substr(1)),n.length>0)for(let e=Ub.length-1;e>=0;e--){const t=Ub[e];if(!t.firstline)continue;const i=n.match(t.firstline);if(i&&i.length>0)return t}}const fS=Object.prototype.hasOwnProperty,gj="vs.editor.nullLanguage";class LHe{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(gj,0),this._register(Va,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;const t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||gj}}class S1 extends Le{constructor(e=!0,t=!1){super(),this._onDidChange=this._register(new ue),this.onDidChange=this._onDidChange.event,S1.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new LHe,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(Mb.onDidChangeLanguages(i=>{this._initializeFromRegistry()})))}dispose(){S1.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},wHe();const e=[].concat(Mb.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(e)}_registerLanguages(e){for(const t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(t=>{const i=this._languages[t];i.name&&(this._nameMap[i.name]=i.identifier),i.aliases.forEach(s=>{this._lowercaseNameMap[s.toLowerCase()]=i.identifier}),i.mimetypes.forEach(s=>{this._mimeTypesMap[s]=i.identifier})}),Ss.as(dm.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(e){const t=e.id;let i;fS.call(this._languages,t)?i=this._languages[t]:(this.languageIdCodec.register(t),i={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[t]=i),this._mergeLanguage(i,e)}_mergeLanguage(e,t){const i=t.id;let s=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),s=t.mimetypes[0]),s||(s=`text/x-${i}`,e.mimetypes.push(s)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(const a of t.extensions)hS({id:i,mime:s,extension:a},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(const a of t.filenames)hS({id:i,mime:s,filename:a},this._warnOnOverwrite),e.filenames.push(a);if(Array.isArray(t.filenamePatterns))for(const a of t.filenamePatterns)hS({id:i,mime:s,filepattern:a},this._warnOnOverwrite);if(typeof t.firstLine=="string"&&t.firstLine.length>0){let a=t.firstLine;a.charAt(0)!=="^"&&(a="^"+a);try{const l=new RegExp(a);XNe(l)||hS({id:i,mime:s,firstline:l},this._warnOnOverwrite)}catch(l){console.warn(`[${t.id}]: Invalid regular expression \`${a}\`: `,l)}}e.aliases.push(i);let r=null;if(typeof t.aliases<"u"&&Array.isArray(t.aliases)&&(t.aliases.length===0?r=[null]:r=t.aliases),r!==null)for(const a of r)!a||a.length===0||e.aliases.push(a);const o=r!==null&&r.length>0;if(!(o&&r[0]===null)){const a=(o?r[0]:null)||i;(o||!e.name)&&(e.name=a)}t.configuration&&e.configurationFiles.push(t.configuration),t.icon&&e.icons.push(t.icon)}isRegisteredLanguageId(e){return e?fS.call(this._languages,e):!1}getRegisteredLanguageIds(){return Object.keys(this._languages)}getLanguageIdByLanguageName(e){const t=e.toLowerCase();return fS.call(this._lowercaseNameMap,t)?this._lowercaseNameMap[t]:null}getLanguageIdByMimeType(e){return e&&fS.call(this._mimeTypesMap,e)?this._mimeTypesMap[e]:null}guessLanguageIdByFilepathOrFirstLine(e,t){return!e&&!t?[]:yHe(e,t)}}S1.instanceCount=0;class C1 extends Le{constructor(e=!1){super(),this._onDidRequestBasicLanguageFeatures=this._register(new ue),this.onDidRequestBasicLanguageFeatures=this._onDidRequestBasicLanguageFeatures.event,this._onDidRequestRichLanguageFeatures=this._register(new ue),this.onDidRequestRichLanguageFeatures=this._onDidRequestRichLanguageFeatures.event,this._onDidChange=this._register(new ue({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,this._requestedBasicLanguages=new Set,this._requestedRichLanguages=new Set,C1.instanceCount++,this._registry=this._register(new S1(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onDidChange.fire()))}dispose(){C1.instanceCount--,super.dispose()}isRegisteredLanguageId(e){return this._registry.isRegisteredLanguageId(e)}getLanguageIdByLanguageName(e){return this._registry.getLanguageIdByLanguageName(e)}getLanguageIdByMimeType(e){return this._registry.getLanguageIdByMimeType(e)}guessLanguageIdByFilepathOrFirstLine(e,t){const i=this._registry.guessLanguageIdByFilepathOrFirstLine(e,t);return YV(i,null)}createById(e){return new mj(this.onDidChange,()=>this._createAndGetLanguageIdentifier(e))}createByFilepathOrFirstLine(e,t){return new mj(this.onDidChange,()=>{const i=this.guessLanguageIdByFilepathOrFirstLine(e,t);return this._createAndGetLanguageIdentifier(i)})}_createAndGetLanguageIdentifier(e){return(!e||!this.isRegisteredLanguageId(e))&&(e=Va),e}requestBasicLanguageFeatures(e){this._requestedBasicLanguages.has(e)||(this._requestedBasicLanguages.add(e),this._onDidRequestBasicLanguageFeatures.fire(e))}requestRichLanguageFeatures(e){this._requestedRichLanguages.has(e)||(this._requestedRichLanguages.add(e),this.requestBasicLanguageFeatures(e),Zn.getOrCreate(e),this._onDidRequestRichLanguageFeatures.fire(e))}}C1.instanceCount=0;class mj{constructor(e,t){this._onDidChangeLanguages=e,this._selector=t,this._listener=null,this._emitter=null,this.languageId=this._selector()}_dispose(){this._listener&&(this._listener.dispose(),this._listener=null),this._emitter&&(this._emitter.dispose(),this._emitter=null)}get onDidChange(){return this._listener||(this._listener=this._onDidChangeLanguages(()=>this._evaluate())),this._emitter||(this._emitter=new ue({onDidRemoveLastListener:()=>{this._dispose()}})),this._emitter.event}_evaluate(){var e;const t=this._selector();t!==this.languageId&&(this.languageId=t,(e=this._emitter)===null||e===void 0||e.fire(this.languageId))}}class kHe extends Eg{constructor(e,t){super(),this._onDidChangeVisibility=this._register(new ue),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=dt(e,St(".monaco-dropdown")),this._label=dt(this._element,St(".dropdown-label"));let i=t.labelRenderer;i||(i=r=>(r.textContent=t.label||"",null));for(const r of[Ge.CLICK,Ge.MOUSE_DOWN,Gi.Tap])this._register(we(this.element,r,o=>$t.stop(o,!0)));for(const r of[Ge.MOUSE_DOWN,Gi.Tap])this._register(we(this._label,r,o=>{PV(o)&&(o.detail>1||o.button!==0)||(this.visible?this.hide():this.show())}));this._register(we(this._label,Ge.KEY_UP,r=>{const o=new Ji(r);(o.equals(3)||o.equals(10))&&($t.stop(r,!0),this.visible?this.hide():this.show())}));const s=i(this._label);s&&this._register(s),this._register(Ki.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}class xHe extends kHe{constructor(e,t){super(e,t),this._options=t,this._actions=[],this.actions=t.actions||[]}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this._options.actionProvider?this._options.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._options.contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:(e,t)=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e,t):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this._options.menuClassName||"",onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this._options.menuAsChild?this.element:void 0,skipTelemetry:this._options.skipTelemetry})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}class rk extends bl{constructor(e,t,i,s=Object.create(null)){super(null,e,s),this.actionItem=null,this._onDidChangeVisibility=this._register(new ue),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.menuActionsOrProvider=t,this.contextMenuProvider=i,this.options=s,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;const t=r=>{var o;this.element=dt(r,St("a.action-label"));let a=[];return typeof this.options.classNames=="string"?a=this.options.classNames.split(/\s+/g).filter(l=>!!l):this.options.classNames&&(a=this.options.classNames),a.find(l=>l==="icon")||a.push("codicon"),this.element.classList.add(...a),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this._action.label&&this._register(Kc().setupUpdatableHover((o=this.options.hoverDelegate)!==null&&o!==void 0?o:_o("mouse"),this.element,this._action.label)),this.element.ariaLabel=this._action.label||"",null},i=Array.isArray(this.menuActionsOrProvider),s={contextMenuProvider:this.contextMenuProvider,labelRenderer:t,menuAsChild:this.options.menuAsChild,actions:i?this.menuActionsOrProvider:void 0,actionProvider:i?void 0:this.menuActionsOrProvider,skipTelemetry:this.options.skipTelemetry};if(this.dropdownMenu=this._register(new xHe(e,s)),this._register(this.dropdownMenu.onDidChangeVisibility(r=>{var o;(o=this.element)===null||o===void 0||o.setAttribute("aria-expanded",`${r}`),this._onDidChangeVisibility.fire(r)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const r=this;this.dropdownMenu.menuOptions={...this.dropdownMenu.menuOptions,get anchorAlignment(){return r.options.anchorAlignmentProvider()}}}this.updateTooltip(),this.updateEnabled()}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:this.action.label&&(e=this.action.label),e??void 0}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}show(){var e;(e=this.dropdownMenu)===null||e===void 0||e.show()}updateEnabled(){var e,t;const i=!this.action.enabled;(e=this.actionItem)===null||e===void 0||e.classList.toggle("disabled",i),(t=this.element)===null||t===void 0||t.classList.toggle("disabled",i)}}function THe(n){return n?n.condition!==void 0:!1}var _T=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},zr=function(n,e){return function(t,i){e(t,i,n)}};function DHe(n,e,t,i){const s=n.getActions(e),r=Ku.getInstance(),o=r.keyStatus.altKey||(Mr||Er)&&r.keyStatus.shiftKey;koe(s,t,o,i?a=>a===i:a=>a==="navigation")}function IHe(n,e,t,i,s,r){const o=n.getActions(e);koe(o,t,!1,typeof i=="string"?l=>l===i:i,s,r)}function koe(n,e,t,i=o=>o==="navigation",s=()=>!1,r=!1){let o,a;Array.isArray(e)?(o=e,a=e):(o=e.primary,a=e.secondary);const l=new Set;for(const[c,d]of n){let u;i(c)?(u=o,u.length>0&&r&&u.push(new Zs)):(u=a,u.length>0&&u.push(new Zs));for(let h of d){t&&(h=h instanceof Bd&&h.alt?h.alt:h);const f=u.push(h);h instanceof y2&&l.add({group:c,action:h,index:f-1})}}for(const{group:c,action:d,index:u}of l){const h=i(c)?o:a,f=d.actions;s(d,c,h.length)&&h.splice(u,1,...f)}}let L1=class extends sO{constructor(e,t,i,s,r,o,a,l){super(void 0,e,{icon:!!(e.class||e.item.icon),label:!e.class&&!e.item.icon,draggable:t?.draggable,keybinding:t?.keybinding,hoverDelegate:t?.hoverDelegate}),this._keybindingService=i,this._notificationService=s,this._contextKeyService=r,this._themeService=o,this._contextMenuService=a,this._accessibilityService=l,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new ha),this._altKey=Ku.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}async onClick(e){e.preventDefault(),e.stopPropagation();try{await this.actionRunner.run(this._commandAction,this._context)}catch(t){this._notificationService.error(t)}}render(e){if(super.render(e),e.classList.add("menu-entry"),this.options.icon&&this._updateItemClass(this._menuItemAction.item),this._menuItemAction.alt){let t=!1;const i=()=>{var s;const r=!!(!((s=this._menuItemAction.alt)===null||s===void 0)&&s.enabled)&&(!this._accessibilityService.isMotionReduced()||t)&&(this._altKey.keyStatus.altKey||this._altKey.keyStatus.shiftKey&&t);r!==this._wantsAltCommand&&(this._wantsAltCommand=r,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._register(this._altKey.event(i)),this._register(we(e,"mouseleave",s=>{t=!1,i()})),this._register(we(e,"mouseenter",s=>{t=!0,i()})),i()}}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}getTooltip(){var e;const t=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),i=t&&t.getLabel(),s=this._commandAction.tooltip||this._commandAction.label;let r=i?L("titleAndKb","{0} ({1})",s,i):s;if(!this._wantsAltCommand&&(!((e=this._menuItemAction.alt)===null||e===void 0)&&e.enabled)){const o=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,a=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),l=a&&a.getLabel(),c=l?L("titleAndKb","{0} ({1})",o,l):o;r=L("titleAndKbAndAlt",`{0}
[{1}] {2}`,r,_O.modifierLabels[Ma].altKey,c)}return r}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._updateItemClass(this._menuItemAction.item))}_updateItemClass(e){this._itemClassDispose.value=void 0;const{element:t,label:i}=this;if(!t||!i)return;const s=this._commandAction.checked&&THe(e.toggled)&&e.toggled.icon?e.toggled.icon:e.icon;if(s)if(Vt.isThemeIcon(s)){const r=Vt.asClassNameArray(s);i.classList.add(...r),this._itemClassDispose.value=Et(()=>{i.classList.remove(...r)})}else i.style.backgroundImage=z2(this._themeService.getColorTheme().type)?Qd(s.dark):Qd(s.light),i.classList.add("icon"),this._itemClassDispose.value=xc(Et(()=>{i.style.backgroundImage="",i.classList.remove("icon")}),this._themeService.onDidColorThemeChange(()=>{this.updateClass()}))}};L1=_T([zr(2,Ls),zr(3,Rr),zr(4,oi),zr(5,Xo),zr(6,jc),zr(7,Xl)],L1);let FA=class extends rk{constructor(e,t,i,s,r){var o,a,l;const c={...t,menuAsChild:(o=t?.menuAsChild)!==null&&o!==void 0?o:!1,classNames:(a=t?.classNames)!==null&&a!==void 0?a:Vt.isThemeIcon(e.item.icon)?Vt.asClassName(e.item.icon):void 0,keybindingProvider:(l=t?.keybindingProvider)!==null&&l!==void 0?l:d=>i.lookupKeybinding(d.id)};super(e,{getActions:()=>e.actions},s,c),this._keybindingService=i,this._contextMenuService=s,this._themeService=r}render(e){super.render(e),Jr(this.element),e.classList.add("menu-entry");const t=this._action,{icon:i}=t.item;if(i&&!Vt.isThemeIcon(i)){this.element.classList.add("icon");const s=()=>{this.element&&(this.element.style.backgroundImage=z2(this._themeService.getColorTheme().type)?Qd(i.dark):Qd(i.light))};s(),this._register(this._themeService.onDidColorThemeChange(()=>{s()}))}}};FA=_T([zr(2,Ls),zr(3,jc),zr(4,Xo)],FA);let VA=class extends bl{constructor(e,t,i,s,r,o,a,l){var c,d,u;super(null,e),this._keybindingService=i,this._notificationService=s,this._contextMenuService=r,this._menuService=o,this._instaService=a,this._storageService=l,this._container=null,this._options=t,this._storageKey=`${e.item.submenu.id}_lastActionId`;let h;const f=t?.persistLastActionId?l.get(this._storageKey,1):void 0;f&&(h=e.actions.find(m=>f===m.id)),h||(h=e.actions[0]),this._defaultAction=this._instaService.createInstance(L1,h,{keybinding:this._getDefaultActionKeybindingLabel(h)});const g={keybindingProvider:m=>this._keybindingService.lookupKeybinding(m.id),...t,menuAsChild:(c=t?.menuAsChild)!==null&&c!==void 0?c:!0,classNames:(d=t?.classNames)!==null&&d!==void 0?d:["codicon","codicon-chevron-down"],actionRunner:(u=t?.actionRunner)!==null&&u!==void 0?u:new Eg};this._dropdown=new rk(e,e.actions,this._contextMenuService,g),this._register(this._dropdown.actionRunner.onDidRun(m=>{m.action instanceof Bd&&this.update(m.action)}))}update(e){var t;!((t=this._options)===null||t===void 0)&&t.persistLastActionId&&this._storageService.store(this._storageKey,e.id,1,1),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(L1,e,{keybinding:this._getDefaultActionKeybindingLabel(e)}),this._defaultAction.actionRunner=new class extends Eg{async runAction(i,s){await i.run(void 0)}},this._container&&this._defaultAction.render(OV(this._container,St(".action-container")))}_getDefaultActionKeybindingLabel(e){var t;let i;if(!((t=this._options)===null||t===void 0)&&t.renderKeybindingWithDefaultActionLabel){const s=this._keybindingService.lookupKeybinding(e.id);s&&(i=`(${s.getLabel()})`)}return i}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}render(e){this._container=e,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const t=St(".action-container");this._defaultAction.render(dt(this._container,t)),this._register(we(t,Ge.KEY_DOWN,s=>{const r=new Ji(s);r.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),r.stopPropagation())}));const i=St(".dropdown-action-container");this._dropdown.render(dt(this._container,i)),this._register(we(i,Ge.KEY_DOWN,s=>{var r;const o=new Ji(s);o.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),(r=this._defaultAction.element)===null||r===void 0||r.focus(),o.stopPropagation())}))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};VA=_T([zr(2,Ls),zr(3,Rr),zr(4,jc),zr(5,cm),zr(6,Si),zr(7,W0)],VA);let PA=class extends y8e{constructor(e,t){super(null,e,e.actions.map(i=>({text:i.id===Zs.ID?"":i.label,isDisabled:!i.enabled})),0,t,Z8e,{ariaLabel:e.tooltip,optionsAsChildren:!0}),this.select(Math.max(0,e.actions.findIndex(i=>i.checked)))}render(e){super.render(e),e.style.borderColor=Ke(fp)}runAction(e,t){const i=this.action.actions[t];i&&this.actionRunner.run(i)}};PA=_T([zr(1,I0)],PA);function MHe(n,e,t){return e instanceof Bd?n.createInstance(L1,e,t):e instanceof Qv?e.item.isSelection?n.createInstance(PA,e):e.item.rememberDefaultAction?n.createInstance(VA,e,{...t,persistLastActionId:!0}):n.createInstance(FA,e,t):void 0}const OA=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,BR=/(&amp;)?(&amp;)([^\s&])/g;var ok;(function(n){n[n.Right=0]="Right",n[n.Left=1]="Left"})(ok||(ok={}));var ZA;(function(n){n[n.Above=0]="Above",n[n.Below=1]="Below"})(ZA||(ZA={}));class Up extends zh{constructor(e,t,i,s){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");const r=document.createElement("div");r.classList.add("monaco-menu"),r.setAttribute("role","presentation"),super(r,{orientation:1,actionViewItemProvider:c=>this.doGetActionViewItem(c,i,o),context:i.context,actionRunner:i.actionRunner,ariaLabel:i.ariaLabel,ariaRole:"menu",focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...jt||Er?[10]:[]],keyDown:!0}}),this.menuStyles=s,this.menuElement=r,this.actionsList.tabIndex=0,this.initializeOrUpdateStyleSheet(e,s),this._register(Ki.addTarget(r)),this._register(we(r,Ge.KEY_DOWN,c=>{new Ji(c).equals(2)&&c.preventDefault()})),i.enableMnemonics&&this._register(we(r,Ge.KEY_DOWN,c=>{const d=c.key.toLocaleLowerCase();if(this.mnemonics.has(d)){$t.stop(c,!0);const u=this.mnemonics.get(d);if(u.length===1&&(u[0]instanceof pj&&u[0].container&&this.focusItemByElement(u[0].container),u[0].onClick(c)),u.length>1){const h=u.shift();h&&h.container&&(this.focusItemByElement(h.container),u.push(h)),this.mnemonics.set(d,u)}}})),Er&&this._register(we(r,Ge.KEY_DOWN,c=>{const d=new Ji(c);d.equals(14)||d.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),$t.stop(c,!0)):(d.equals(13)||d.equals(12))&&(this.focusedItem=0,this.focusPrevious(),$t.stop(c,!0))})),this._register(we(this.domNode,Ge.MOUSE_OUT,c=>{const d=c.relatedTarget;ss(d,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),c.stopPropagation())})),this._register(we(this.actionsList,Ge.MOUSE_OVER,c=>{let d=c.target;if(!(!d||!ss(d,this.actionsList)||d===this.actionsList)){for(;d.parentElement!==this.actionsList&&d.parentElement!==null;)d=d.parentElement;if(d.classList.contains("action-item")){const u=this.focusedItem;this.setFocusedItem(d),u!==this.focusedItem&&this.updateFocus()}}})),this._register(Ki.addTarget(this.actionsList)),this._register(we(this.actionsList,Gi.Tap,c=>{let d=c.initialTarget;if(!(!d||!ss(d,this.actionsList)||d===this.actionsList)){for(;d.parentElement!==this.actionsList&&d.parentElement!==null;)d=d.parentElement;if(d.classList.contains("action-item")){const u=this.focusedItem;this.setFocusedItem(d),u!==this.focusedItem&&this.updateFocus()}}}));const o={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new uP(r,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const a=this.scrollableElement.getDomNode();a.style.position="",this.styleScrollElement(a,s),this._register(we(r,Gi.Change,c=>{$t.stop(c,!0);const d=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:d-c.translationY})})),this._register(we(a,Ge.MOUSE_UP,c=>{c.preventDefault()}));const l=pt(e);r.style.maxHeight=`${Math.max(10,l.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter((c,d)=>{var u;return!((u=i.submenuIds)===null||u===void 0)&&u.has(c.id)?(console.warn(`Found submenu cycle: ${c.id}`),!1):!(c instanceof Zs&&(d===t.length-1||d===0||t[d-1]instanceof Zs))}),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(c=>!(c instanceof bj)).forEach((c,d,u)=>{c.updatePositionInSet(d+1,u.length)})}initializeOrUpdateStyleSheet(e,t){this.styleSheet||(d3(e)?this.styleSheet=Ka(e):(Up.globalStyleSheet||(Up.globalStyleSheet=Ka()),this.styleSheet=Up.globalStyleSheet)),this.styleSheet.textContent=NHe(t,d3(e))}styleScrollElement(e,t){var i,s;const r=(i=t.foregroundColor)!==null&&i!==void 0?i:"",o=(s=t.backgroundColor)!==null&&s!==void 0?s:"",a=t.borderColor?`1px solid ${t.borderColor}`:"",l="5px",c=t.shadowColor?`0 2px 8px ${t.shadowColor}`:"";e.style.outline=a,e.style.borderRadius=l,e.style.color=r,e.style.backgroundColor=o,e.style.boxShadow=c}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(e){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){const i=this.actionsList.children[t];if(e===i){this.focusedItem=t;break}}}updateFocus(e){super.updateFocus(e,!0,!0),typeof this.focusedItem<"u"&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,i){if(e instanceof Zs)return new bj(t.context,e,{icon:!0},this.menuStyles);if(e instanceof y2){const s=new pj(e,e.actions,i,{...t,submenuIds:new Set([...t.submenuIds||[],e.id])},this.menuStyles);if(t.enableMnemonics){const r=s.getMnemonic();if(r&&s.isEnabled()){let o=[];this.mnemonics.has(r)&&(o=this.mnemonics.get(r)),o.push(s),this.mnemonics.set(r,o)}}return s}else{const s={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){const o=t.getKeyBinding(e);if(o){const a=o.getLabel();a&&(s.keybinding=a)}}const r=new xoe(t.context,e,s,this.menuStyles);if(t.enableMnemonics){const o=r.getMnemonic();if(o&&r.isEnabled()){let a=[];this.mnemonics.has(o)&&(a=this.mnemonics.get(o)),a.push(r),this.mnemonics.set(o,a)}}return r}}}class xoe extends bl{constructor(e,t,i,s){if(i.isMenu=!0,super(t,t,i),this.menuStyle=s,this.options=i,this.options.icon=i.icon!==void 0?i.icon:!1,this.options.label=i.label!==void 0?i.label:!0,this.cssClass="",this.options.label&&i.enableMnemonics){const r=this.action.label;if(r){const o=OA.exec(r);o&&(this.mnemonic=(o[1]?o[1]:o[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new as(()=>{this.element&&(this._register(we(this.element,Ge.MOUSE_UP,r=>{if($t.stop(r,!0),ua){if(new Sl(pt(this.element),r).rightButton)return;this.onClick(r)}else setTimeout(()=>{this.onClick(r)},0)})),this._register(we(this.element,Ge.CONTEXT_MENU,r=>{$t.stop(r,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=dt(this.element,St("a.action-menu-item")),this._action.id===Zs.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=dt(this.item,St("span.menu-item-check"+Vt.asCSSSelector(Qe.menuSelection))),this.check.setAttribute("role","none"),this.label=dt(this.item,St("span.action-label")),this.options.label&&this.options.keybinding&&(dt(this.item,St("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked(),this.applyStyle())}blur(){super.blur(),this.applyStyle()}focus(){var e;super.focus(),(e=this.item)===null||e===void 0||e.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`))}updateLabel(){var e;if(this.label&&this.options.label){Rl(this.label);let t=Yse(this.action.label);if(t){const i=EHe(t);this.options.enableMnemonics||(t=i),this.label.setAttribute("aria-label",i.replace(/&&/g,"&"));const s=OA.exec(t);if(s){t=Jv(t),BR.lastIndex=0;let r=BR.exec(t);for(;r&&r[1];)r=BR.exec(t);const o=a=>a.replace(/&amp;&amp;/g,"&amp;");r?this.label.append(m2(o(t.substr(0,r.index))," "),St("u",{"aria-hidden":"true"},r[3]),GNe(o(t.substr(r.index+r[0].length))," ")):this.label.innerText=o(t).trim(),(e=this.item)===null||e===void 0||e.setAttribute("aria-keyshortcuts",(s[1]?s[1]:s[3]).toLocaleLowerCase())}else this.label.innerText=t.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.action.class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.action.enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const e=this.action.checked;this.item.classList.toggle("checked",!!e),e!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){const e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,i=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,s=e&&this.menuStyle.selectionBorderColor?`1px solid ${this.menuStyle.selectionBorderColor}`:"",r=e&&this.menuStyle.selectionBorderColor?"-1px":"";this.item&&(this.item.style.color=t??"",this.item.style.backgroundColor=i??"",this.item.style.outline=s,this.item.style.outlineOffset=r),this.check&&(this.check.style.color=t??"")}}class pj extends xoe{constructor(e,t,i,s,r){super(e,e,s,r),this.submenuActions=t,this.parentData=i,this.submenuOptions=s,this.mysubmenu=null,this.submenuDisposables=this._register(new ct),this.mouseOver=!1,this.expandDirection=s&&s.expandDirection!==void 0?s.expandDirection:{horizontal:ok.Right,vertical:ZA.Below},this.showScheduler=new as(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new as(()=>{this.element&&!ss(Js(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=dt(this.item,St("span.submenu-indicator"+Vt.asCSSSelector(Qe.menuSubmenu))),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(we(this.element,Ge.KEY_UP,t=>{const i=new Ji(t);(i.equals(17)||i.equals(3))&&($t.stop(t,!0),this.createSubmenu(!0))})),this._register(we(this.element,Ge.KEY_DOWN,t=>{const i=new Ji(t);Js()===this.item&&(i.equals(17)||i.equals(3))&&$t.stop(t,!0)})),this._register(we(this.element,Ge.MOUSE_OVER,t=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register(we(this.element,Ge.MOUSE_LEAVE,t=>{this.mouseOver=!1})),this._register(we(this.element,Ge.FOCUS_OUT,t=>{this.element&&!ss(Js(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))})))}updateEnabled(){}onClick(e){$t.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,i,s){const r={top:0,left:0};return r.left=yp(e.width,t.width,{position:s.horizontal===ok.Right?0:1,offset:i.left,size:i.width}),r.left>=i.left&&r.left<i.left+i.width&&(i.left+10+t.width<=e.width&&(r.left=i.left+10),i.top+=10,i.height=0),r.top=yp(e.height,t.height,{position:0,offset:i.top,size:0}),r.top+t.height===i.top&&r.top+i.height+t.height<=e.height&&(r.top+=i.height),r}createSubmenu(e=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=dt(this.element,St("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const t=pt(this.parentData.parent.domNode).getComputedStyle(this.parentData.parent.domNode),i=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new Up(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new S2],this.submenuOptions,this.menuStyle);const s=this.element.getBoundingClientRect(),r={top:s.top-i,left:s.left,height:s.height+2*i,width:s.width},o=this.submenuContainer.getBoundingClientRect(),a=pt(this.element),{top:l,left:c}=this.calculateSubmenuMenuLayout(new Ko(a.innerWidth,a.innerHeight),Ko.lift(o),r,this.expandDirection);this.submenuContainer.style.left=`${c-o.left}px`,this.submenuContainer.style.top=`${l-o.top}px`,this.submenuDisposables.add(we(this.submenuContainer,Ge.KEY_UP,d=>{new Ji(d).equals(15)&&($t.stop(d,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add(we(this.submenuContainer,Ge.KEY_DOWN,d=>{new Ji(d).equals(15)&&$t.stop(d,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){var t;this.item&&((t=this.item)===null||t===void 0||t.setAttribute("aria-expanded",e))}applyStyle(){super.applyStyle();const t=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=t??"")}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class bj extends sO{constructor(e,t,i,s){super(e,t,i),this.menuStyles=s}render(e){super.render(e),this.label&&(this.label.style.borderBottomColor=this.menuStyles.separatorColor?`${this.menuStyles.separatorColor}`:"")}}function EHe(n){const e=OA,t=e.exec(n);if(!t)return n;const i=!t[1];return n.replace(e,i?"$2$3":"").trim()}function vj(n){const e=Rie()[n.id];return`.codicon-${n.id}:before { content: '\\${e.toString(16)}'; }`}function NHe(n,e){let t=`
.monaco-menu {
	font-size: 13px;
	border-radius: 5px;
	min-width: 160px;
}

${vj(Qe.menuSelection)}
${vj(Qe.menuSubmenu)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	color: var(--vscode-disabledForeground);
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid var(--vscode-menu-separatorBackground);
	padding-top: 1px;
	padding: 30px;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
	margin: 0 4px;
	border-radius: 4px;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {
	opacity: unset;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	width: 100%;
	height: 0px !important;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.hc-black .context-view.monaco-menu-container,
.hc-light .context-view.monaco-menu-container,
:host-context(.hc-black) .context-view.monaco-menu-container,
:host-context(.hc-light) .context-view.monaco-menu-container {
	box-shadow: none;
}

.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,
.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: 4px 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
	max-height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	margin: 5px 0 !important;
	padding: 0;
	border-radius: 0;
}

.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}`;if(e){t+=`
			/* Arrows */
			.monaco-scrollable-element > .scrollbar > .scra {
				cursor: pointer;
				font-size: 11px !important;
			}

			.monaco-scrollable-element > .visible {
				opacity: 1;

				/* Background rule added for IE9 - to allow clicks on dom node */
				background:rgba(0,0,0,0);

				transition: opacity 100ms linear;
			}
			.monaco-scrollable-element > .invisible {
				opacity: 0;
				pointer-events: none;
			}
			.monaco-scrollable-element > .invisible.fade {
				transition: opacity 800ms linear;
			}

			/* Scrollable Content Inset Shadow */
			.monaco-scrollable-element > .shadow {
				position: absolute;
				display: none;
			}
			.monaco-scrollable-element > .shadow.top {
				display: block;
				top: 0;
				left: 3px;
				height: 3px;
				width: 100%;
			}
			.monaco-scrollable-element > .shadow.left {
				display: block;
				top: 3px;
				left: 0;
				height: 100%;
				width: 3px;
			}
			.monaco-scrollable-element > .shadow.top-left-corner {
				display: block;
				top: 0;
				left: 0;
				height: 3px;
				width: 3px;
			}
		`;const i=n.scrollbarShadow;i&&(t+=`
				.monaco-scrollable-element > .shadow.top {
					box-shadow: ${i} 0 6px 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.left {
					box-shadow: ${i} 6px 0 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.top.left {
					box-shadow: ${i} 6px 6px 6px -6px inset;
				}
			`);const s=n.scrollbarSliderBackground;s&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider {
					background: ${s};
				}
			`);const r=n.scrollbarSliderHoverBackground;r&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider:hover {
					background: ${r};
				}
			`);const o=n.scrollbarSliderActiveBackground;o&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider.active {
					background: ${o};
				}
			`)}return t}class RHe{constructor(e,t,i,s){this.contextViewService=e,this.telemetryService=t,this.notificationService=i,this.keybindingService=s,this.focusToReturn=null,this.lastContainer=null,this.block=null,this.blockDisposable=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){const t=e.getActions();if(!t.length)return;this.focusToReturn=Js();let i;const s=Es(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:r=>{var o;this.lastContainer=r;const a=e.getMenuClassName?e.getMenuClassName():"";a&&(r.className+=" "+a),this.options.blockMouse&&(this.block=r.appendChild(St(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",(o=this.blockDisposable)===null||o===void 0||o.dispose(),this.blockDisposable=we(this.block,Ge.MOUSE_DOWN,u=>u.stopPropagation()));const l=new ct,c=e.actionRunner||new Eg;c.onWillRun(u=>this.onActionRun(u,!e.skipTelemetry),this,l),c.onDidRun(this.onDidActionRun,this,l),i=new Up(r,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:c,getKeyBinding:e.getKeyBinding?e.getKeyBinding:u=>this.keybindingService.lookupKeybinding(u.id)},G8e),i.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,l),i.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,l);const d=pt(r);return l.add(we(d,Ge.BLUR,()=>this.contextViewService.hideContextView(!0))),l.add(we(d,Ge.MOUSE_DOWN,u=>{if(u.defaultPrevented)return;const h=new Sl(d,u);let f=h.target;if(!h.rightButton){for(;f;){if(f===r)return;f=f.parentElement}this.contextViewService.hideContextView(!0)}})),xc(l,i)},focus:()=>{i?.focus(!!e.autoSelectFirstItem)},onHide:r=>{var o,a,l;(o=e.onHide)===null||o===void 0||o.call(e,!!r),this.block&&(this.block.remove(),this.block=null),(a=this.blockDisposable)===null||a===void 0||a.dispose(),this.blockDisposable=null,this.lastContainer&&(Js()===this.lastContainer||ss(Js(),this.lastContainer))&&((l=this.focusToReturn)===null||l===void 0||l.focus()),this.lastContainer=null}},s,!!s)}onActionRun(e,t){t&&this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1)}onDidActionRun(e){e.error&&!_0(e.error)&&this.notificationService.error(e.error)}}var WHe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Gm=function(n,e){return function(t,i){e(t,i,n)}};let GA=class extends Le{get contextMenuHandler(){return this._contextMenuHandler||(this._contextMenuHandler=new RHe(this.contextViewService,this.telemetryService,this.notificationService,this.keybindingService)),this._contextMenuHandler}constructor(e,t,i,s,r,o){super(),this.telemetryService=e,this.notificationService=t,this.contextViewService=i,this.keybindingService=s,this.menuService=r,this.contextKeyService=o,this._contextMenuHandler=void 0,this._onDidShowContextMenu=this._store.add(new ue),this.onDidShowContextMenu=this._onDidShowContextMenu.event,this._onDidHideContextMenu=this._store.add(new ue)}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){e=BA.transform(e,this.menuService,this.contextKeyService),this.contextMenuHandler.showContextMenu({...e,onHide:t=>{var i;(i=e.onHide)===null||i===void 0||i.call(e,t),this._onDidHideContextMenu.fire()}}),Ku.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}};GA=WHe([Gm(0,df),Gm(1,Rr),Gm(2,I0),Gm(3,Ls),Gm(4,cm),Gm(5,oi)],GA);var BA;(function(n){function e(i){return i&&i.menuId instanceof X}function t(i,s,r){if(!e(i))return i;const{menuId:o,menuActionOptions:a,contextKeyService:l}=i;return{...i,getActions:()=>{const c=[];if(o){const d=s.createMenu(o,l??r);DHe(d,a,c),d.dispose()}return i.getActions?Zs.join(i.getActions(),c):c}}}n.transform=t})(BA||(BA={}));var ak;(function(n){n[n.API=0]="API",n[n.USER=1]="USER"})(ak||(ak={}));var yO=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},lk=function(n,e){return function(t,i){e(t,i,n)}};let XA=class{constructor(e){this._commandService=e}async open(e,t){if(!WV(e,Mt.command))return!1;if(!t?.allowCommands||(typeof e=="string"&&(e=Ft.parse(e)),Array.isArray(t.allowCommands)&&!t.allowCommands.includes(e.path)))return!0;let i=[];try{i=lW(decodeURIComponent(e.query))}catch{try{i=lW(e.query)}catch{}}return Array.isArray(i)||(i=[i]),await this._commandService.executeCommand(e.path,...i),!0}};XA=yO([lk(0,eo)],XA);let zA=class{constructor(e){this._editorService=e}async open(e,t){typeof e=="string"&&(e=Ft.parse(e));const{selection:i,uri:s}=QGe(e);return e=s,e.scheme===Mt.file&&(e=dPe(e)),await this._editorService.openCodeEditor({resource:e,options:{selection:i,source:t?.fromUserGesture?ak.USER:ak.API,...t?.editorOptions}},this._editorService.getFocusedCodeEditor(),t?.openToSide),!0}};zA=yO([lk(0,Vn)],zA);let HA=class{constructor(e,t){this._openers=new co,this._validators=new co,this._resolvers=new co,this._resolvedUriTargets=new An(i=>i.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new co,this._defaultExternalOpener={openExternal:async i=>(dH(i,Mt.http,Mt.https)?Nie(i):Di.location.href=i,!0)},this._openers.push({open:async(i,s)=>s?.openExternal||dH(i,Mt.mailto,Mt.http,Mt.https,Mt.vsls)?(await this._doOpenExternal(i,s),!0):!1}),this._openers.push(new XA(t)),this._openers.push(new zA(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}async open(e,t){var i;const s=typeof e=="string"?Ft.parse(e):e,r=(i=this._resolvedUriTargets.get(s))!==null&&i!==void 0?i:e;for(const o of this._validators)if(!await o.shouldOpen(r,t))return!1;for(const o of this._openers)if(await o.open(e,t))return!0;return!1}async resolveExternalUri(e,t){for(const i of this._resolvers)try{const s=await i.resolveExternalUri(e,t);if(s)return this._resolvedUriTargets.has(s.resolved)||this._resolvedUriTargets.set(s.resolved,e),s}catch{}throw new Error("Could not resolve external URI: "+e.toString())}async _doOpenExternal(e,t){const i=typeof e=="string"?Ft.parse(e):e;let s;try{s=(await this.resolveExternalUri(i,t)).resolved}catch{s=i}let r;if(typeof e=="string"&&i.toString()===s.toString()?r=e:r=encodeURI(s.toString(!0)),t?.allowContributedOpeners){const o=typeof t?.allowContributedOpeners=="string"?t?.allowContributedOpeners:void 0;for(const a of this._externalOpeners)if(await a.openExternal(r,{sourceUri:i,preferredOpenerId:o},Xs.None))return!0}return this._defaultExternalOpener.openExternal(r,{sourceUri:i},Xs.None)}dispose(){this._validators.clear()}};HA=yO([lk(0,Vn),lk(1,eo)],HA);const Rw=ri("editorWorkerService");var qo;(function(n){n[n.Hint=1]="Hint",n[n.Info=2]="Info",n[n.Warning=4]="Warning",n[n.Error=8]="Error"})(qo||(qo={}));(function(n){function e(o,a){return a-o}n.compare=e;const t=Object.create(null);t[n.Error]=L("sev.error","Error"),t[n.Warning]=L("sev.warning","Warning"),t[n.Info]=L("sev.info","Info");function i(o){return t[o]||""}n.toString=i;function s(o){switch(o){case Jn.Error:return n.Error;case Jn.Warning:return n.Warning;case Jn.Info:return n.Info;case Jn.Ignore:return n.Hint}}n.fromSeverity=s;function r(o){switch(o){case n.Error:return Jn.Error;case n.Warning:return Jn.Warning;case n.Info:return Jn.Info;case n.Hint:return Jn.Ignore}}n.toSeverity=r})(qo||(qo={}));var _j;(function(n){const e="";function t(s){return i(s,!0)}n.makeKey=t;function i(s,r){const o=[e];return s.source?o.push(s.source.replace("","\\")):o.push(e),s.code?typeof s.code=="string"?o.push(s.code.replace("","\\")):o.push(s.code.value.replace("","\\")):o.push(e),s.severity!==void 0&&s.severity!==null?o.push(qo.toString(s.severity)):o.push(e),s.message&&r?o.push(s.message.replace("","\\")):o.push(e),s.startLineNumber!==void 0&&s.startLineNumber!==null?o.push(s.startLineNumber.toString()):o.push(e),s.startColumn!==void 0&&s.startColumn!==null?o.push(s.startColumn.toString()):o.push(e),s.endLineNumber!==void 0&&s.endLineNumber!==null?o.push(s.endLineNumber.toString()):o.push(e),s.endColumn!==void 0&&s.endColumn!==null?o.push(s.endColumn.toString()):o.push(e),o.push(e),o.join("")}n.makeKeyOptionalMessage=i})(_j||(_j={}));const wm=ri("markerService");function AHe(n,e){const t=[],i=[];for(const s of n)e.has(s)||t.push(s);for(const s of e)n.has(s)||i.push(s);return{removed:t,added:i}}function FHe(n,e){const t=new Set;for(const i of e)n.has(i)&&t.add(i);return t}var VHe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},wj=function(n,e){return function(t,i){e(t,i,n)}};let UA=class extends Le{constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new ue),this._markerDecorations=new An,e.getModels().forEach(i=>this._onModelAdded(i)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear()}getMarker(e,t){const i=this._markerDecorations.get(e);return i&&i.getMarker(t)||null}_handleMarkerChange(e){e.forEach(t=>{const i=this._markerDecorations.get(t);i&&this._updateDecorations(i)})}_onModelAdded(e){const t=new PHe(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){var t;const i=this._markerDecorations.get(e.uri);i&&(i.dispose(),this._markerDecorations.delete(e.uri)),(e.uri.scheme===Mt.inMemory||e.uri.scheme===Mt.internal||e.uri.scheme===Mt.vscode)&&((t=this._markerService)===null||t===void 0||t.read({resource:e.uri}).map(s=>s.owner).forEach(s=>this._markerService.remove(s,[e.uri])))}_updateDecorations(e){const t=this._markerService.read({resource:e.model.uri,take:500});e.update(t)&&this._onDidChangeMarker.fire(e.model)}};UA=VHe([wj(0,Ws),wj(1,wm)],UA);class PHe extends Le{constructor(e){super(),this.model=e,this._map=new ARe,this._register(Et(()=>{this.model.deltaDecorations([...this._map.values()],[]),this._map.clear()}))}update(e){const{added:t,removed:i}=AHe(new Set(this._map.keys()),new Set(e));if(t.length===0&&i.length===0)return!1;const s=i.map(a=>this._map.get(a)),r=t.map(a=>({range:this._createDecorationRange(this.model,a),options:this._createDecorationOption(a)})),o=this.model.deltaDecorations(s,r);for(const a of i)this._map.delete(a);for(let a=0;a<o.length;a++)this._map.set(t[a],o[a]);return!0}getMarker(e){return this._map.getKey(e.id)}_createDecorationRange(e,t){let i=te.lift(t);if(t.severity===qo.Hint&&!this._hasMarkerTag(t,1)&&!this._hasMarkerTag(t,2)&&(i=i.setEndPosition(i.startLineNumber,i.startColumn+2)),i=e.validateRange(i),i.isEmpty()){const s=e.getLineLastNonWhitespaceColumn(i.startLineNumber)||e.getLineMaxColumn(i.startLineNumber);if(s===1||i.endColumn>=s)return i;const r=e.getWordAtPosition(i.getStartPosition());r&&(i=new te(i.startLineNumber,r.startColumn,i.endLineNumber,r.endColumn))}else if(t.endColumn===Number.MAX_VALUE&&t.startColumn===1&&i.startLineNumber===i.endLineNumber){const s=e.getLineFirstNonWhitespaceColumn(t.startLineNumber);s<i.endColumn&&(i=new te(i.startLineNumber,s,i.endLineNumber,i.endColumn),t.startColumn=s)}return i}_createDecorationOption(e){let t,i,s,r,o;switch(e.severity){case qo.Hint:this._hasMarkerTag(e,2)?t=void 0:this._hasMarkerTag(e,1)?t="squiggly-unnecessary":t="squiggly-hint",s=0;break;case qo.Info:t="squiggly-info",i=ps(jFe),s=10,o={color:ps(kWe),position:1};break;case qo.Warning:t="squiggly-warning",i=ps(KFe),s=20,o={color:ps(xWe),position:1};break;case qo.Error:default:t="squiggly-error",i=ps(YFe),s=30,o={color:ps(TWe),position:1};break}return e.tags&&(e.tags.indexOf(1)!==-1&&(r="squiggly-inline-unnecessary"),e.tags.indexOf(2)!==-1&&(r="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:i,position:fa.Right},minimap:o,zIndex:s,inlineClassName:r}}_hasMarkerTag(e,t){return e.tags?e.tags.indexOf(t)>=0:!1}}var OHe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},uv=function(n,e){return function(t,i){e(t,i,n)}},Um;function Sf(n){return n.toString()}class ZHe{constructor(e,t,i){this.model=e,this._modelEventListeners=new ct,this.model=e,this._modelEventListeners.add(e.onWillDispose(()=>t(e))),this._modelEventListeners.add(e.onDidChangeLanguage(s=>i(e,s)))}dispose(){this._modelEventListeners.dispose()}}const GHe=Er||jt?1:2;class BHe{constructor(e,t,i,s,r,o,a,l){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=i,this.sharesUndoRedoStack=s,this.heapSize=r,this.sha1=o,this.versionId=a,this.alternativeVersionId=l}}let ck=Um=class extends Le{constructor(e,t,i,s,r){super(),this._configurationService=e,this._resourcePropertiesService=t,this._undoRedoService=i,this._languageService=s,this._languageConfigurationService=r,this._onModelAdded=this._register(new ue),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new ue),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new ue),this.onModelLanguageChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._register(this._configurationService.onDidChangeConfiguration(o=>this._updateModelOptions(o))),this._updateModelOptions(void 0)}static _readModelOptions(e,t){var i;let s=Ks.tabSize;if(e.editor&&typeof e.editor.tabSize<"u"){const f=parseInt(e.editor.tabSize,10);isNaN(f)||(s=f),s<1&&(s=1)}let r="tabSize";if(e.editor&&typeof e.editor.indentSize<"u"&&e.editor.indentSize!=="tabSize"){const f=parseInt(e.editor.indentSize,10);isNaN(f)||(r=Math.max(f,1))}let o=Ks.insertSpaces;e.editor&&typeof e.editor.insertSpaces<"u"&&(o=e.editor.insertSpaces==="false"?!1:!!e.editor.insertSpaces);let a=GHe;const l=e.eol;l===`\r
`?a=2:l===`
`&&(a=1);let c=Ks.trimAutoWhitespace;e.editor&&typeof e.editor.trimAutoWhitespace<"u"&&(c=e.editor.trimAutoWhitespace==="false"?!1:!!e.editor.trimAutoWhitespace);let d=Ks.detectIndentation;e.editor&&typeof e.editor.detectIndentation<"u"&&(d=e.editor.detectIndentation==="false"?!1:!!e.editor.detectIndentation);let u=Ks.largeFileOptimizations;e.editor&&typeof e.editor.largeFileOptimizations<"u"&&(u=e.editor.largeFileOptimizations==="false"?!1:!!e.editor.largeFileOptimizations);let h=Ks.bracketPairColorizationOptions;return!((i=e.editor)===null||i===void 0)&&i.bracketPairColorization&&typeof e.editor.bracketPairColorization=="object"&&(h={enabled:!!e.editor.bracketPairColorization.enabled,independentColorPoolPerBracketType:!!e.editor.bracketPairColorization.independentColorPoolPerBracketType}),{isForSimpleWidget:t,tabSize:s,indentSize:r,insertSpaces:o,detectIndentation:d,defaultEOL:a,trimAutoWhitespace:c,largeFileOptimizations:u,bracketPairColorizationOptions:h}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);const i=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return i&&typeof i=="string"&&i!=="auto"?i:Ma===3||Ma===2?`
`:`\r
`}_shouldRestoreUndoStack(){const e=this._configurationService.getValue("files.restoreUndoStack");return typeof e=="boolean"?e:!0}getCreationOptions(e,t,i){const s=typeof e=="string"?e:e.languageId;let r=this._modelCreationOptionsByLanguageAndResource[s+t];if(!r){const o=this._configurationService.getValue("editor",{overrideIdentifier:s,resource:t}),a=this._getEOL(t,s);r=Um._readModelOptions({editor:o,eol:a},i),this._modelCreationOptionsByLanguageAndResource[s+t]=r}return r}_updateModelOptions(e){const t=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const i=Object.keys(this._models);for(let s=0,r=i.length;s<r;s++){const o=i[s],a=this._models[o],l=a.model.getLanguageId(),c=a.model.uri;if(e&&!e.affectsConfiguration("editor",{overrideIdentifier:l,resource:c})&&!e.affectsConfiguration("files.eol",{overrideIdentifier:l,resource:c}))continue;const d=t[l+c],u=this.getCreationOptions(l,c,a.model.isForSimpleWidget);Um._setModelOptionsForModel(a.model,u,d)}}static _setModelOptionsForModel(e,t,i){i&&i.defaultEOL!==t.defaultEOL&&e.getLineCount()===1&&e.setEOL(t.defaultEOL===1?0:1),!(i&&i.detectIndentation===t.detectIndentation&&i.insertSpaces===t.insertSpaces&&i.tabSize===t.tabSize&&i.indentSize===t.indentSize&&i.trimAutoWhitespace===t.trimAutoWhitespace&&Ro(i.bracketPairColorizationOptions,t.bracketPairColorizationOptions))&&(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(Sf(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){const t=this._disposedModels.get(Sf(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(Sf(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){const t=[];for(this._disposedModels.forEach(i=>{i.sharesUndoRedoStack||t.push(i)}),t.sort((i,s)=>i.time-s.time);t.length>0&&this._disposedModelsHeapSize>e;){const i=t.shift();this._removeDisposedModel(i.uri),i.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(i.initialUndoRedoSnapshot)}}}_createModelData(e,t,i,s){const r=this.getCreationOptions(t,i,s),o=new Gh(e,t,r,i,this._undoRedoService,this._languageService,this._languageConfigurationService);if(i&&this._disposedModels.has(Sf(i))){const c=this._removeDisposedModel(i),d=this._undoRedoService.getElements(i),u=this._getSHA1Computer(),h=u.canComputeSHA1(o)?u.computeSHA1(o)===c.sha1:!1;if(h||c.sharesUndoRedoStack){for(const f of d.past)ud(f)&&f.matchesResource(i)&&f.setModel(o);for(const f of d.future)ud(f)&&f.matchesResource(i)&&f.setModel(o);this._undoRedoService.setElementsValidFlag(i,!0,f=>ud(f)&&f.matchesResource(i)),h&&(o._overwriteVersionId(c.versionId),o._overwriteAlternativeVersionId(c.alternativeVersionId),o._overwriteInitialUndoRedoSnapshot(c.initialUndoRedoSnapshot))}else c.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(c.initialUndoRedoSnapshot)}const a=Sf(o.uri);if(this._models[a])throw new Error("ModelService: Cannot add model because it already exists!");const l=new ZHe(o,c=>this._onWillDispose(c),(c,d)=>this._onDidChangeLanguage(c,d));return this._models[a]=l,l}createModel(e,t,i,s=!1){let r;return t?r=this._createModelData(e,t,i,s):r=this._createModelData(e,Va,i,s),this._onModelAdded.fire(r.model),r.model}getModels(){const e=[],t=Object.keys(this._models);for(let i=0,s=t.length;i<s;i++){const r=t[i];e.push(this._models[r].model)}return e}getModel(e){const t=Sf(e),i=this._models[t];return i?i.model:null}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===Mt.file||e.scheme===Mt.vscodeRemote||e.scheme===Mt.vscodeUserData||e.scheme===Mt.vscodeNotebookCell||e.scheme==="fake-fs"}_onWillDispose(e){const t=Sf(e.uri),i=this._models[t],s=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString();let r=!1,o=0;if(s||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){const c=this._undoRedoService.getElements(e.uri);if(c.past.length>0||c.future.length>0){for(const d of c.past)ud(d)&&d.matchesResource(e.uri)&&(r=!0,o+=d.heapSize(e.uri),d.setModel(e.uri));for(const d of c.future)ud(d)&&d.matchesResource(e.uri)&&(r=!0,o+=d.heapSize(e.uri),d.setModel(e.uri))}}const a=Um.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK,l=this._getSHA1Computer();if(r)if(!s&&(o>a||!l.canComputeSHA1(e))){const c=i.model.getInitialUndoRedoSnapshot();c!==null&&this._undoRedoService.restoreSnapshot(c)}else this._ensureDisposedModelsHeapSize(a-o),this._undoRedoService.setElementsValidFlag(e.uri,!1,c=>ud(c)&&c.matchesResource(e.uri)),this._insertDisposedModel(new BHe(e.uri,i.model.getInitialUndoRedoSnapshot(),Date.now(),s,o,l.computeSHA1(e),e.getVersionId(),e.getAlternativeVersionId()));else if(!s){const c=i.model.getInitialUndoRedoSnapshot();c!==null&&this._undoRedoService.restoreSnapshot(c)}delete this._models[t],i.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){const i=t.oldLanguage,s=e.getLanguageId(),r=this.getCreationOptions(i,e.uri,e.isForSimpleWidget),o=this.getCreationOptions(s,e.uri,e.isForSimpleWidget);Um._setModelOptionsForModel(e,o,r),this._onModelModeChanged.fire({model:e,oldLanguageId:i})}_getSHA1Computer(){return new wT}};ck.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20*1024*1024;ck=Um=OHe([uv(0,gn),uv(1,hoe),uv(2,EP),uv(3,Cs),uv(4,ma)],ck);class wT{canComputeSHA1(e){return e.getValueLength()<=wT.MAX_MODEL_SIZE}computeSHA1(e){const t=new b2,i=e.createSnapshot();let s;for(;s=i.read();)t.update(s);return t.digest()}}wT.MAX_MODEL_SIZE=10*1024*1024;var YA;(function(n){n[n.PRESERVE=0]="PRESERVE",n[n.LAST=1]="LAST"})(YA||(YA={}));const Toe={Quickaccess:"workbench.contributions.quickaccess"};class XHe{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,i)=>i.prefix.length-t.prefix.length),Et(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return Wg([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(i=>e.startsWith(i.prefix))||void 0||this.defaultProvider}}Ss.add(Toe.Quickaccess,new XHe);var zHe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},yj=function(n,e){return function(t,i){e(t,i,n)}};let KA=class extends Le{constructor(e,t){super(),this.quickInputService=e,this.instantiationService=t,this.registry=Ss.as(Toe.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(e="",t){this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,i){var s,r,o,a;const[l,c]=this.getOrInstantiateProvider(e,i?.enabledProviderPrefixes),d=this.visibleQuickAccess,u=d?.descriptor;if(d&&c&&u===c){e!==c.prefix&&!i?.preserveValue&&(d.picker.value=e),this.adjustValueSelection(d.picker,c,i);return}if(c&&!i?.preserveValue){let w;if(d&&u&&u!==c){const v=d.value.substr(u.prefix.length);v&&(w=`${c.prefix}${v}`)}if(!w){const v=l?.defaultFilterValue;v===YA.LAST?w=this.lastAcceptedPickerValues.get(c):typeof v=="string"&&(w=`${c.prefix}${v}`)}typeof w=="string"&&(e=w)}const h=(s=d?.picker)===null||s===void 0?void 0:s.valueSelection,f=(r=d?.picker)===null||r===void 0?void 0:r.value,g=new ct,m=g.add(this.quickInputService.createQuickPick());m.value=e,this.adjustValueSelection(m,c,i),m.placeholder=(o=i?.placeholder)!==null&&o!==void 0?o:c?.placeholder,m.quickNavigate=i?.quickNavigateConfiguration,m.hideInput=!!m.quickNavigate&&!d,(typeof i?.itemActivation=="number"||i?.quickNavigateConfiguration)&&(m.itemActivation=(a=i?.itemActivation)!==null&&a!==void 0?a:rc.SECOND),m.contextKey=c?.contextKey,m.filterValue=w=>w.substring(c?c.prefix.length:0);let p;t&&(p=new eie,g.add(Be.once(m.onWillAccept)(w=>{w.veto(),m.hide()}))),g.add(this.registerPickerListeners(m,l,c,e,i));const b=g.add(new nm);if(l&&g.add(l.provide(m,b.token,i?.providerOptions)),Be.once(m.onDidHide)(()=>{m.selectedItems.length===0&&b.cancel(),g.dispose(),p?.complete(m.selectedItems.slice(0))}),m.show(),h&&f===e&&(m.valueSelection=h),t)return p?.p}adjustValueSelection(e,t,i){var s;let r;i?.preserveValue?r=[e.value.length,e.value.length]:r=[(s=t?.prefix.length)!==null&&s!==void 0?s:0,e.value.length],e.valueSelection=r}registerPickerListeners(e,t,i,s,r){const o=new ct,a=this.visibleQuickAccess={picker:e,descriptor:i,value:s};return o.add(Et(()=>{a===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),o.add(e.onDidChangeValue(l=>{const[c]=this.getOrInstantiateProvider(l,r?.enabledProviderPrefixes);c!==t?this.show(l,{enabledProviderPrefixes:r?.enabledProviderPrefixes,preserveValue:!0,providerOptions:r?.providerOptions}):a.value=l})),i&&o.add(e.onDidAccept(()=>{this.lastAcceptedPickerValues.set(i,e.value)})),o}getOrInstantiateProvider(e,t){const i=this.registry.getQuickAccessProvider(e);if(!i||t&&!t?.includes(i.prefix))return[void 0,void 0];let s=this.mapProviderToDescriptor.get(i);return s||(s=this.instantiationService.createInstance(i.ctor),this.mapProviderToDescriptor.set(i,s)),[s,i]}};KA=zHe([yj(0,D0),yj(1,Si)],KA);var HHe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};class Doe{constructor(e){this.nodes=e}toString(){return this.nodes.map(e=>typeof e=="string"?e:e.label).join("")}}HHe([Tn],Doe.prototype,"toString",null);const UHe=/\[([^\]]+)\]\(((?:https?:\/\/|command:|file:)[^\)\s]+)(?: (["'])(.+?)(\3))?\)/gi;function YHe(n){const e=[];let t=0,i;for(;i=UHe.exec(n);){i.index-t>0&&e.push(n.substring(t,i.index));const[,s,r,,o]=i;o?e.push({label:s,href:r,title:o}):e.push({label:s,href:r}),t=i.index+i[0].length}return t<n.length&&e.push(n.substring(t)),new Doe(e)}const XR={},KHe=new Kse("quick-input-button-icon-");function jHe(n){if(!n)return;let e;const t=n.dark.toString();return XR[t]?e=XR[t]:(e=KHe.nextId(),u3(`.${e}, .hc-light .${e}`,`background-image: ${Qd(n.light||n.dark)}`),u3(`.vs-dark .${e}, .hc-black .${e}`,`background-image: ${Qd(n.dark)}`),XR[t]=e),e}function dk(n,e,t){let i=n.iconClass||jHe(n.iconPath);return n.alwaysVisible&&(i=i?`${i} always-visible`:"always-visible"),{id:e,label:"",tooltip:n.tooltip||"",class:i,enabled:!0,run:t}}function JHe(n,e,t){Ir(e);const i=YHe(n);let s=0;for(const r of i.nodes)if(typeof r=="string")e.append(...hg(r));else{let o=r.title;!o&&r.href.startsWith("command:")?o=L("executeCommand","Click to execute command '{0}'",r.href.substring(8)):o||(o=r.href);const a=St("a",{href:r.href,title:o,tabIndex:s++},r.label);a.style.textDecoration="underline";const l=f=>{Z5e(f)&&$t.stop(f,!0),t.callback(r.href)},c=t.disposables.add(new Yt(a,Ge.CLICK)).event,d=t.disposables.add(new Yt(a,Ge.KEY_DOWN)).event,u=Be.chain(d,f=>f.filter(g=>{const m=new Ji(g);return m.equals(10)||m.equals(3)}));t.disposables.add(Ki.addTarget(a));const h=t.disposables.add(new Yt(a,Gi.Tap)).event;Be.any(c,h,u)(l,null,t.disposables),e.appendChild(a)}}var $He=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Sj=function(n,e){return function(t,i){e(t,i,n)}};const Ioe="inQuickInput",QHe=new it(Ioe,!1,L("inQuickInput","Whether keyboard focus is inside the quick input control")),qHe=Wt.has(Ioe),Moe="quickInputType",eUe=new it(Moe,void 0,L("quickInputType","The type of the currently visible quick input")),Eoe="cursorAtEndOfQuickInputBox",tUe=new it(Eoe,!1,L("cursorAtEndOfQuickInputBox","Whether the cursor in the quick input is at the end of the input box")),iUe=Wt.has(Eoe),jA={iconClass:Vt.asClassName(Qe.quickInputBack),tooltip:L("quickInput.back","Back"),handle:-1};class Ww extends Le{constructor(e){super(),this.ui=e,this._widgetUpdated=!1,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._buttons=[],this.buttonsUpdated=!1,this._toggles=[],this.togglesUpdated=!1,this.noValidationMessage=Ww.noPromptMessage,this._severity=Jn.Ignore,this.onDidTriggerButtonEmitter=this._register(new ue),this.onDidHideEmitter=this._register(new ue),this.onWillHideEmitter=this._register(new ue),this.onDisposeEmitter=this._register(new ue),this.visibleDisposables=this._register(new ct),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){const t=this._ignoreFocusOut!==e&&!Lg;this._ignoreFocusOut=e&&!Lg,t&&this.update()}get buttons(){return this._buttons}set buttons(e){this._buttons=e,this.buttonsUpdated=!0,this.update()}get toggles(){return this._toggles}set toggles(e){this._toggles=e??[],this.togglesUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{this.buttons.indexOf(e)!==-1&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.toggles.length&&(this.togglesUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(e=Ob.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}willHide(e=Ob.Other){this.onWillHideEmitter.fire({reason:e})}update(){var e,t;if(!this.visible)return;const i=this.getTitle();i&&this.ui.title.textContent!==i?this.ui.title.textContent=i:!i&&this.ui.title.innerHTML!=="&nbsp;"&&(this.ui.title.innerText="");const s=this.getDescription();if(this.ui.description1.textContent!==s&&(this.ui.description1.textContent=s),this.ui.description2.textContent!==s&&(this.ui.description2.textContent=s),this._widgetUpdated&&(this._widgetUpdated=!1,this._widget?Ir(this.ui.widget,this._widget):Ir(this.ui.widget)),this.busy&&!this.busyDelay&&(this.busyDelay=new lf,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const o=this.buttons.filter(l=>l===jA).map((l,c)=>dk(l,`id-${c}`,async()=>this.onDidTriggerButtonEmitter.fire(l)));this.ui.leftActionBar.push(o,{icon:!0,label:!1}),this.ui.rightActionBar.clear();const a=this.buttons.filter(l=>l!==jA).map((l,c)=>dk(l,`id-${c}`,async()=>this.onDidTriggerButtonEmitter.fire(l)));this.ui.rightActionBar.push(a,{icon:!0,label:!1})}if(this.togglesUpdated){this.togglesUpdated=!1;const o=(t=(e=this.toggles)===null||e===void 0?void 0:e.filter(a=>a instanceof M0))!==null&&t!==void 0?t:[];this.ui.inputBox.toggles=o}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const r=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==r&&(this._lastValidationMessage=r,Ir(this.ui.message),JHe(r,this.ui.message,{callback:o=>{this.ui.linkOpenerDelegate(o)},disposables:this.visibleDisposables})),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?L("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==Jn.Ignore){const t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:"",this.ui.message.style.backgroundColor=t.background?`${t.background}`:"",this.ui.message.style.border=t.border?`1px solid ${t.border}`:"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}}Ww.noPromptMessage=L("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");class k1 extends Ww{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new ue),this.onWillAcceptEmitter=this._register(new ue),this.onDidAcceptEmitter=this._register(new ue),this.onDidCustomEmitter=this._register(new ue),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._keepScrollPosition=!1,this._itemActivation=rc.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new ue),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new ue),this.onDidTriggerItemButtonEmitter=this._register(new ue),this.onDidTriggerSeparatorButtonEmitter=this._register(new ue),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this._focusEventBufferer=new g2,this.type="quickPick",this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event,this.onDidTriggerSeparatorButton=this.onDidTriggerSeparatorButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this.doSetValue(e)}doSetValue(e,t){this._value!==e&&(this._value=e,t||this.update(),this.visible&&this.ui.list.filter(this.filterValue(this._value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?n7e:this.ui.keyMods}get valueSelection(){const e=this.ui.inputBox.getSelection();if(e)return[e.start,e.end]}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.canSelectMany||this.ui.list.focus(Oi.First)}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{this.doSetValue(e,!0)})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this._focusEventBufferer.wrapEvent(this.ui.list.onDidChangeFocus,(e,t)=>t)(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&Gs(e,this._activeItems,(t,i)=>t===i)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:e,event:t})=>{if(this.canSelectMany){e.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&Gs(e,this._selectedItems,(i,s)=>i===s)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(PV(t)&&t.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{this.canSelectMany&&(this.selectedItemsToConfirm!==this._selectedItems&&Gs(e,this._selectedItems,(t,i)=>t===i)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e)))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.ui.list.onSeparatorButtonTriggered(e=>this.onDidTriggerSeparatorButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return we(this.ui.container,Ge.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;const t=new Ji(e),i=t.keyCode;this._quickNavigate.keybindings.some(o=>{const a=o.getChords();return a.length>1?!1:a[0].shiftKey&&i===4?!(t.ctrlKey||t.altKey||t.metaKey):!!(a[0].altKey&&i===6||a[0].ctrlKey&&i===5||a[0].metaKey&&i===57)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;const e=this.keepScrollPosition?this.scrollTop:0,t=!!this.description,i={title:!!this.title||!!this.step||!!this.buttons.length,description:t,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!this._hideInput,progressBar:!this._hideInput||t,visibleCount:!0,count:this.canSelectMany&&!this._hideCountBadge,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(i),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");let s=this.ariaLabel;!s&&i.inputBox&&(s=this.placeholder||k1.DEFAULT_ARIA_LABEL,this.title&&(s+=` - ${this.title}`)),this.ui.list.ariaLabel!==s&&(this.ui.list.ariaLabel=s??null),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.matchOnLabelMode=this.matchOnLabelMode,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated&&(this.itemsUpdated=!1,this._focusEventBufferer.bufferEvents(()=>{switch(this.ui.list.setElements(this.items),this.ui.list.shouldLoop=!this.canSelectMany,this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this.ui.checkAll.checked=this.ui.list.getAllVisibleChecked(),this.ui.visibleCount.setCount(this.ui.list.getVisibleCount()),this.ui.count.setCount(this.ui.list.getCheckedCount()),this._itemActivation){case rc.NONE:this._itemActivation=rc.FIRST;break;case rc.SECOND:this.ui.list.focus(Oi.Second),this._itemActivation=rc.FIRST;break;case rc.LAST:this.ui.list.focus(Oi.Last),this._itemActivation=rc.FIRST;break;default:this.trySelectFirst();break}})),this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",i.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(Oi.First)),this.keepScrollPosition&&(this.scrollTop=e)}focus(e){this.ui.list.focus(e),this.canSelectMany&&this.ui.list.domFocus()}accept(e){e&&!this._canAcceptInBackground||this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(e??!1))}}k1.DEFAULT_ARIA_LABEL=L("quickInputBox.ariaLabel","Type to narrow down results.");class nUe extends Ww{constructor(){super(...arguments),this._value="",this.valueSelectionUpdated=!0,this._password=!1,this.onDidValueChangeEmitter=this._register(new ue),this.onDidAcceptEmitter=this._register(new ue),this.type="inputBox",this.onDidChangeValue=this.onDidValueChangeEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event}get value(){return this._value}set value(e){this._value=e||"",this.update()}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get password(){return this._password}set password(e){this._password=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{e!==this.value&&(this._value=e,this.onDidValueChangeEmitter.fire(e))})),this.visibleDisposables.add(this.ui.onDidAccept(()=>this.onDidAcceptEmitter.fire())),this.valueSelectionUpdated=!0),super.show()}update(){if(!this.visible)return;this.ui.container.classList.remove("hidden-input");const e={title:!!this.title||!!this.step||!!this.buttons.length,description:!!this.description||!!this.step,inputBox:!0,message:!0,progressBar:!0};this.ui.setVisibilities(e),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||""),this.ui.inputBox.password!==this.password&&(this.ui.inputBox.password=this.password)}}let JA=class extends g1{constructor(e,t){super("element",!1,i=>this.getOverrideOptions(i),e,t)}getOverrideOptions(e){var t;const i=(Es(e.content)?(t=e.content.textContent)!==null&&t!==void 0?t:"":typeof e.content=="string"?e.content:e.content.value).includes(`
`);return{persistence:{hideOnKeyDown:!1},appearance:{showHoverHint:i,skipFadeInAnimation:!0}}}};JA=$He([Sj(0,gn),Sj(1,_m)],JA);class Cj{constructor(e,t,i){this.options=t,this.styles=i,this.count=0,this.element=dt(e,St(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){var e,t;this.element.textContent=$C(this.countFormat,this.count),this.element.title=$C(this.titleFormat,this.count),this.element.style.backgroundColor=(e=this.styles.badgeBackground)!==null&&e!==void 0?e:"",this.element.style.color=(t=this.styles.badgeForeground)!==null&&t!==void 0?t:"",this.styles.badgeBorder&&(this.element.style.border=`1px solid ${this.styles.badgeBorder}`)}}const Lj="done",kj="active",zR="infinite",HR="infinite-long-running",xj="discrete";class yT extends Le{constructor(e,t){super(),this.progressSignal=this._register(new ha),this.workedVal=0,this.showDelayedScheduler=this._register(new as(()=>Eie(this.element),0)),this.longRunningScheduler=this._register(new as(()=>this.infiniteLongRunning(),yT.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(e,t)}create(e,t){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.bit.style.backgroundColor=t?.progressBarBackground||"#0E70C0",this.element.appendChild(this.bit)}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(kj,zR,HR,xj),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel(),this.progressSignal.clear()}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(Lj),this.element.classList.contains(zR)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(xj,Lj,HR),this.element.classList.add(kj,zR),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(HR)}getContainer(){return this.element}}yT.LONG_RUNNING_INFINITE_THRESHOLD=1e4;const sUe=St;class rUe extends Le{constructor(e,t,i){super(),this.parent=e,this.onKeyDown=r=>ws(this.findInput.inputBox.inputElement,Ge.KEY_DOWN,r),this.onDidChange=r=>this.findInput.onDidChange(r),this.container=dt(this.parent,sUe(".quick-input-box")),this.findInput=this._register(new Sre(this.container,void 0,{label:"",inputBoxStyles:t,toggleStyles:i}));const s=this.findInput.inputBox.inputElement;s.role="combobox",s.ariaHasPopup="menu",s.ariaAutoComplete="list",s.ariaExpanded="true"}get value(){return this.findInput.getValue()}set value(e){this.findInput.setValue(e)}select(e=null){this.findInput.inputBox.select(e)}getSelection(){return this.findInput.inputBox.getSelection()}isSelectionAtEnd(){return this.findInput.inputBox.isSelectionAtEnd()}get placeholder(){return this.findInput.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.findInput.inputBox.setPlaceHolder(e)}get password(){return this.findInput.inputBox.inputElement.type==="password"}set password(e){this.findInput.inputBox.inputElement.type=e?"password":"text"}set enabled(e){this.findInput.inputBox.inputElement.toggleAttribute("readonly",!e)}set toggles(e){this.findInput.setAdditionalToggles(e)}setAttribute(e,t){this.findInput.inputBox.inputElement.setAttribute(e,t)}showDecoration(e){e===Jn.Ignore?this.findInput.clearMessage():this.findInput.showMessage({type:e===Jn.Info?1:e===Jn.Warning?2:3,content:""})}stylesForType(e){return this.findInput.inputBox.stylesForType(e===Jn.Info?1:e===Jn.Warning?2:3)}setFocus(){this.findInput.focus()}layout(){this.findInput.inputBox.layout()}}class oUe{get templateId(){return this.renderer.templateId}constructor(e,t){this.renderer=e,this.modelProvider=t}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:Le.None}}renderElement(e,t,i,s){var r;if((r=i.disposable)===null||r===void 0||r.dispose(),!i.data)return;const o=this.modelProvider();if(o.isResolved(e))return this.renderer.renderElement(o.get(e),e,i.data,s);const a=new nm,l=o.resolve(e,a.token);i.disposable={dispose:()=>a.cancel()},this.renderer.renderPlaceholder(e,i.data),l.then(c=>this.renderer.renderElement(c,e,i.data,s))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}class aUe{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}}function lUe(n,e){return{...e,accessibilityProvider:e.accessibilityProvider&&new aUe(n,e.accessibilityProvider)}}class cUe{constructor(e,t,i,s,r={}){const o=()=>this.model,a=s.map(l=>new oUe(l,o));this.list=new Hl(e,t,i,a,lUe(o,r))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get widget(){return this.list}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return Be.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:i})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:i}))}get onPointer(){return Be.map(this.list.onPointer,({element:e,index:t,browserEvent:i})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:i}))}get onDidChangeSelection(){return Be.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:i})=>({elements:e.map(s=>this._model.get(s)),indexes:t,browserEvent:i}))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,Pr(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}style(e){this.list.style(e)}dispose(){this.list.dispose()}}const dUe={separatorBorder:Ce.transparent};class Noe{set size(e){this._size=e}get size(){return this._size}get visible(){return typeof this._cachedVisibleSize>"u"}setVisible(e,t){var i,s;if(e!==this.visible){e?(this.size=Br(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),this.container.classList.toggle("visible",e);try{(s=(i=this.view).setVisible)===null||s===void 0||s.call(i,e)}catch(r){console.error("Splitview: Failed to set visible view"),console.error(r)}}}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get proportionalLayout(){var e;return(e=this.view.proportionalLayout)!==null&&e!==void 0?e:!0}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}constructor(e,t,i,s){this.container=e,this.view=t,this.disposable=s,this._cachedVisibleSize=void 0,typeof i=="number"?(this._size=i,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=i.cachedVisibleSize)}layout(e,t){this.layoutContainer(e);try{this.view.layout(this.size,e,t)}catch(i){console.error("Splitview: Failed to layout view"),console.error(i)}}dispose(){this.disposable.dispose()}}class uUe extends Noe{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}class hUe extends Noe{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}var cd;(function(n){n[n.Idle=0]="Idle",n[n.Busy=1]="Busy"})(cd||(cd={}));var Tj;(function(n){n.Distribute={type:"distribute"};function e(s){return{type:"split",index:s}}n.Split=e;function t(s){return{type:"auto",index:s}}n.Auto=t;function i(s){return{type:"invisible",cachedVisibleSize:s}}n.Invisible=i})(Tj||(Tj={}));class fUe extends Le{get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(const t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(const t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}constructor(e,t={}){var i,s,r,o,a;super(),this.size=0,this._contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=cd.Idle,this._onDidSashChange=this._register(new ue),this._onDidSashReset=this._register(new ue),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=(i=t.orientation)!==null&&i!==void 0?i:0,this.inverseAltBehavior=(s=t.inverseAltBehavior)!==null&&s!==void 0?s:!1,this.proportionalLayout=(r=t.proportionalLayout)!==null&&r!==void 0?r:!0,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=dt(this.el,St(".sash-container")),this.viewContainer=St(".split-view-container"),this.scrollable=this._register(new x0({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:c=>po(pt(this.el),c)})),this.scrollableElement=this._register(new H2(this.viewContainer,{vertical:this.orientation===0?(o=t.scrollbarVisibility)!==null&&o!==void 0?o:1:2,horizontal:this.orientation===1?(a=t.scrollbarVisibility)!==null&&a!==void 0?a:1:2},this.scrollable));const l=this._register(new Yt(this.viewContainer,"scroll")).event;this._register(l(c=>{const d=this.scrollableElement.getScrollPosition(),u=Math.abs(this.viewContainer.scrollLeft-d.scrollLeft)<=1?void 0:this.viewContainer.scrollLeft,h=Math.abs(this.viewContainer.scrollTop-d.scrollTop)<=1?void 0:this.viewContainer.scrollTop;(u!==void 0||h!==void 0)&&this.scrollableElement.setScrollPosition({scrollLeft:u,scrollTop:h})})),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(c=>{c.scrollTopChanged&&(this.viewContainer.scrollTop=c.scrollTop),c.scrollLeftChanged&&(this.viewContainer.scrollLeft=c.scrollLeft)})),dt(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||dUe),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((c,d)=>{const u=lo(c.visible)||c.visible?c.size:{type:"invisible",cachedVisibleSize:c.size},h=c.view;this.doAddView(h,u,d,!0)}),this._contentSize=this.viewItems.reduce((c,d)=>c+d.size,0),this.saveProportions())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,i=this.viewItems.length,s){this.doAddView(e,t,i,s)}layout(e,t){const i=Math.max(this.size,this._contentSize);if(this.size=e,this.layoutContext=t,this.proportions){let s=0;for(let r=0;r<this.viewItems.length;r++){const o=this.viewItems[r],a=this.proportions[r];typeof a=="number"?s+=a:e-=o.size}for(let r=0;r<this.viewItems.length;r++){const o=this.viewItems[r],a=this.proportions[r];typeof a=="number"&&s>0&&(o.size=Br(Math.round(a*e/s),o.minimumSize,o.maximumSize))}}else{const s=Pr(this.viewItems.length),r=s.filter(a=>this.viewItems[a].priority===1),o=s.filter(a=>this.viewItems[a].priority===2);this.resize(this.viewItems.length-1,e-i,void 0,r,o)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this._contentSize>0&&(this.proportions=this.viewItems.map(e=>e.proportionalLayout&&e.visible?e.size/this._contentSize:void 0))}onSashStart({sash:e,start:t,alt:i}){for(const a of this.viewItems)a.enabled=!1;const s=this.sashItems.findIndex(a=>a.sash===e),r=xc(we(this.el.ownerDocument.body,"keydown",a=>o(this.sashDragState.current,a.altKey)),we(this.el.ownerDocument.body,"keyup",()=>o(this.sashDragState.current,!1))),o=(a,l)=>{const c=this.viewItems.map(g=>g.size);let d=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(l=!l),l)if(s===this.sashItems.length-1){const m=this.viewItems[s];d=(m.minimumSize-m.size)/2,u=(m.maximumSize-m.size)/2}else{const m=this.viewItems[s+1];d=(m.size-m.maximumSize)/2,u=(m.size-m.minimumSize)/2}let h,f;if(!l){const g=Pr(s,-1),m=Pr(s+1,this.viewItems.length),p=g.reduce((k,I)=>k+(this.viewItems[I].minimumSize-c[I]),0),b=g.reduce((k,I)=>k+(this.viewItems[I].viewMaximumSize-c[I]),0),w=m.length===0?Number.POSITIVE_INFINITY:m.reduce((k,I)=>k+(c[I]-this.viewItems[I].minimumSize),0),v=m.length===0?Number.NEGATIVE_INFINITY:m.reduce((k,I)=>k+(c[I]-this.viewItems[I].viewMaximumSize),0),_=Math.max(p,v),y=Math.min(w,b),C=this.findFirstSnapIndex(g),S=this.findFirstSnapIndex(m);if(typeof C=="number"){const k=this.viewItems[C],I=Math.floor(k.viewMinimumSize/2);h={index:C,limitDelta:k.visible?_-I:_+I,size:k.size}}if(typeof S=="number"){const k=this.viewItems[S],I=Math.floor(k.viewMinimumSize/2);f={index:S,limitDelta:k.visible?y+I:y-I,size:k.size}}}this.sashDragState={start:a,current:a,index:s,sizes:c,minDelta:d,maxDelta:u,alt:l,snapBefore:h,snapAfter:f,disposable:r}};o(t,i)}onSashChange({current:e}){const{index:t,start:i,sizes:s,alt:r,minDelta:o,maxDelta:a,snapBefore:l,snapAfter:c}=this.sashDragState;this.sashDragState.current=e;const d=e-i,u=this.resize(t,d,s,void 0,void 0,o,a,l,c);if(r){const h=t===this.sashItems.length-1,f=this.viewItems.map(v=>v.size),g=h?t:t+1,m=this.viewItems[g],p=m.size-m.maximumSize,b=m.size-m.minimumSize,w=h?t-1:t+1;this.resize(w,-u,f,void 0,void 0,p,b)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(const t of this.viewItems)t.enabled=!0}onViewChange(e,t){const i=this.viewItems.indexOf(e);i<0||i>=this.viewItems.length||(t=typeof t=="number"?t:e.size,t=Br(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&i>0?(this.resize(i-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([i],void 0)))}resizeView(e,t){if(!(e<0||e>=this.viewItems.length)){if(this.state!==cd.Idle)throw new Error("Cant modify splitview");this.state=cd.Busy;try{const i=Pr(this.viewItems.length).filter(a=>a!==e),s=[...i.filter(a=>this.viewItems[a].priority===1),e],r=i.filter(a=>this.viewItems[a].priority===2),o=this.viewItems[e];t=Math.round(t),t=Br(t,o.minimumSize,Math.min(o.maximumSize,this.size)),o.size=t,this.relayout(s,r)}finally{this.state=cd.Idle}}}distributeViewSizes(){const e=[];let t=0;for(const a of this.viewItems)a.maximumSize-a.minimumSize>0&&(e.push(a),t+=a.size);const i=Math.floor(t/e.length);for(const a of e)a.size=Br(i,a.minimumSize,a.maximumSize);const s=Pr(this.viewItems.length),r=s.filter(a=>this.viewItems[a].priority===1),o=s.filter(a=>this.viewItems[a].priority===2);this.relayout(r,o)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,i=this.viewItems.length,s){if(this.state!==cd.Idle)throw new Error("Cant modify splitview");this.state=cd.Busy;try{const r=St(".split-view-view");i===this.viewItems.length?this.viewContainer.appendChild(r):this.viewContainer.insertBefore(r,this.viewContainer.children.item(i));const o=e.onDidChange(h=>this.onViewChange(d,h)),a=Et(()=>this.viewContainer.removeChild(r)),l=xc(o,a);let c;typeof t=="number"?c=t:(t.type==="auto"&&(this.areViewsDistributed()?t={type:"distribute"}:t={type:"split",index:t.index}),t.type==="split"?c=this.getViewSize(t.index)/2:t.type==="invisible"?c={cachedVisibleSize:t.cachedVisibleSize}:c=e.minimumSize);const d=this.orientation===0?new uUe(r,e,c,l):new hUe(r,e,c,l);if(this.viewItems.splice(i,0,d),this.viewItems.length>1){const h={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},f=this.orientation===0?new So(this.sashContainer,{getHorizontalSashTop:k=>this.getSashPosition(k),getHorizontalSashWidth:this.getSashOrthogonalSize},{...h,orientation:1}):new So(this.sashContainer,{getVerticalSashLeft:k=>this.getSashPosition(k),getVerticalSashHeight:this.getSashOrthogonalSize},{...h,orientation:0}),g=this.orientation===0?k=>({sash:f,start:k.startY,current:k.currentY,alt:k.altKey}):k=>({sash:f,start:k.startX,current:k.currentX,alt:k.altKey}),p=Be.map(f.onDidStart,g)(this.onSashStart,this),w=Be.map(f.onDidChange,g)(this.onSashChange,this),_=Be.map(f.onDidEnd,()=>this.sashItems.findIndex(k=>k.sash===f))(this.onSashEnd,this),y=f.onDidReset(()=>{const k=this.sashItems.findIndex(E=>E.sash===f),I=Pr(k,-1),T=Pr(k+1,this.viewItems.length),D=this.findFirstSnapIndex(I),M=this.findFirstSnapIndex(T);typeof D=="number"&&!this.viewItems[D].visible||typeof M=="number"&&!this.viewItems[M].visible||this._onDidSashReset.fire(k)}),C=xc(p,w,_,y,f),S={sash:f,disposable:C};this.sashItems.splice(i-1,0,S)}r.appendChild(e.element);let u;typeof t!="number"&&t.type==="split"&&(u=[t.index]),s||this.relayout([i],u),!s&&typeof t!="number"&&t.type==="distribute"&&this.distributeViewSizes()}finally{this.state=cd.Idle}}relayout(e,t){const i=this.viewItems.reduce((s,r)=>s+r.size,0);this.resize(this.viewItems.length-1,this.size-i,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,i=this.viewItems.map(d=>d.size),s,r,o=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,l,c){if(e<0||e>=this.viewItems.length)return 0;const d=Pr(e,-1),u=Pr(e+1,this.viewItems.length);if(r)for(const S of r)H5(d,S),H5(u,S);if(s)for(const S of s)yy(d,S),yy(u,S);const h=d.map(S=>this.viewItems[S]),f=d.map(S=>i[S]),g=u.map(S=>this.viewItems[S]),m=u.map(S=>i[S]),p=d.reduce((S,k)=>S+(this.viewItems[k].minimumSize-i[k]),0),b=d.reduce((S,k)=>S+(this.viewItems[k].maximumSize-i[k]),0),w=u.length===0?Number.POSITIVE_INFINITY:u.reduce((S,k)=>S+(i[k]-this.viewItems[k].minimumSize),0),v=u.length===0?Number.NEGATIVE_INFINITY:u.reduce((S,k)=>S+(i[k]-this.viewItems[k].maximumSize),0),_=Math.max(p,v,o),y=Math.min(w,b,a);let C=!1;if(l){const S=this.viewItems[l.index],k=t>=l.limitDelta;C=k!==S.visible,S.setVisible(k,l.size)}if(!C&&c){const S=this.viewItems[c.index],k=t<c.limitDelta;C=k!==S.visible,S.setVisible(k,c.size)}if(C)return this.resize(e,t,i,s,r,o,a);t=Br(t,_,y);for(let S=0,k=t;S<h.length;S++){const I=h[S],T=Br(f[S]+k,I.minimumSize,I.maximumSize),D=T-f[S];k-=D,I.size=T}for(let S=0,k=t;S<g.length;S++){const I=g[S],T=Br(m[S]-k,I.minimumSize,I.maximumSize),D=T-m[S];k+=D,I.size=T}return t}distributeEmptySpace(e){const t=this.viewItems.reduce((a,l)=>a+l.size,0);let i=this.size-t;const s=Pr(this.viewItems.length-1,-1),r=s.filter(a=>this.viewItems[a].priority===1),o=s.filter(a=>this.viewItems[a].priority===2);for(const a of o)H5(s,a);for(const a of r)yy(s,a);typeof e=="number"&&yy(s,e);for(let a=0;i!==0&&a<s.length;a++){const l=this.viewItems[s[a]],c=Br(l.size+i,l.minimumSize,l.maximumSize),d=c-l.size;i-=d,l.size=c}}layoutViews(){this._contentSize=this.viewItems.reduce((t,i)=>t+i.size,0);let e=0;for(const t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(t=>t.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this._contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this._contentSize})}updateSashEnablement(){let e=!1;const t=this.viewItems.map(l=>e=l.size-l.minimumSize>0||e);e=!1;const i=this.viewItems.map(l=>e=l.maximumSize-l.size>0||e),s=[...this.viewItems].reverse();e=!1;const r=s.map(l=>e=l.size-l.minimumSize>0||e).reverse();e=!1;const o=s.map(l=>e=l.maximumSize-l.size>0||e).reverse();let a=0;for(let l=0;l<this.sashItems.length;l++){const{sash:c}=this.sashItems[l],d=this.viewItems[l];a+=d.size;const u=!(t[l]&&o[l+1]),h=!(i[l]&&r[l+1]);if(u&&h){const f=Pr(l,-1),g=Pr(l+1,this.viewItems.length),m=this.findFirstSnapIndex(f),p=this.findFirstSnapIndex(g),b=typeof m=="number"&&!this.viewItems[m].visible,w=typeof p=="number"&&!this.viewItems[p].visible;b&&r[l]&&(a>0||this.startSnappingEnabled)?c.state=1:w&&t[l]&&(a<this._contentSize||this.endSnappingEnabled)?c.state=2:c.state=0}else u&&!h?c.state=1:!u&&h?c.state=2:c.state=3}}getSashPosition(e){let t=0;for(let i=0;i<this.sashItems.length;i++)if(t+=this.viewItems[i].size,this.sashItems[i].sash===e)return t;return 0}findFirstSnapIndex(e){for(const t of e){const i=this.viewItems[t];if(i.visible&&i.snap)return t}for(const t of e){const i=this.viewItems[t];if(i.visible&&i.maximumSize-i.minimumSize>0)return;if(!i.visible&&i.snap)return t}}areViewsDistributed(){let e,t;for(const i of this.viewItems)if(e=e===void 0?i.size:Math.min(e,i.size),t=t===void 0?i.size:Math.max(t,i.size),t-e>2)return!1;return!0}dispose(){var e;(e=this.sashDragState)===null||e===void 0||e.disposable.dispose(),Ns(this.viewItems),this.viewItems=[],this.sashItems.forEach(t=>t.disposable.dispose()),this.sashItems=[],super.dispose()}}class Aw{constructor(e,t,i){this.columns=e,this.getColumnSize=i,this.templateId=Aw.TemplateId,this.renderedTemplates=new Set;const s=new Map(t.map(r=>[r.templateId,r]));this.renderers=[];for(const r of e){const o=s.get(r.templateId);if(!o)throw new Error(`Table cell renderer for template id ${r.templateId} not found.`);this.renderers.push(o)}}renderTemplate(e){const t=dt(e,St(".monaco-table-tr")),i=[],s=[];for(let o=0;o<this.columns.length;o++){const a=this.renderers[o],l=dt(t,St(".monaco-table-td",{"data-col-index":o}));l.style.width=`${this.getColumnSize(o)}px`,i.push(l),s.push(a.renderTemplate(l))}const r={container:e,cellContainers:i,cellTemplateData:s};return this.renderedTemplates.add(r),r}renderElement(e,t,i,s){for(let r=0;r<this.columns.length;r++){const a=this.columns[r].project(e);this.renderers[r].renderElement(a,t,i.cellTemplateData[r],s)}}disposeElement(e,t,i,s){for(let r=0;r<this.columns.length;r++){const o=this.renderers[r];if(o.disposeElement){const l=this.columns[r].project(e);o.disposeElement(l,t,i.cellTemplateData[r],s)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);Rl(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(const{cellContainers:i}of this.renderedTemplates)i[e].style.width=`${t}px`}}Aw.TemplateId="row";function gUe(n){return{getHeight(e){return n.getHeight(e)},getTemplateId(){return Aw.TemplateId}}}class mUe extends Le{get minimumSize(){var e;return(e=this.column.minimumWidth)!==null&&e!==void 0?e:120}get maximumSize(){var e;return(e=this.column.maximumWidth)!==null&&e!==void 0?e:Number.POSITIVE_INFINITY}get onDidChange(){var e;return(e=this.column.onDidChangeWidthConstraints)!==null&&e!==void 0?e:Be.None}constructor(e,t){super(),this.column=e,this.index=t,this._onDidLayout=new ue,this.onDidLayout=this._onDidLayout.event,this.element=St(".monaco-table-th",{"data-col-index":t},e.label),e.tooltip&&this._register(Kc().setupUpdatableHover(_o("mouse"),this.element,e.tooltip))}layout(e){this._onDidLayout.fire([this.index,e])}}class ST{get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onDidScroll(){return this.list.onDidScroll}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}get scrollHeight(){return this.list.scrollHeight}get renderHeight(){return this.list.renderHeight}get onDidDispose(){return this.list.onDidDispose}constructor(e,t,i,s,r,o){this.virtualDelegate=i,this.domId=`table_id_${++ST.InstanceCount}`,this.disposables=new ct,this.cachedWidth=0,this.cachedHeight=0,this.domNode=dt(t,St(`.monaco-table.${this.domId}`));const a=s.map((d,u)=>this.disposables.add(new mUe(d,u))),l={size:a.reduce((d,u)=>d+u.column.weight,0),views:a.map(d=>({size:d.column.weight,view:d}))};this.splitview=this.disposables.add(new fUe(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:l})),this.splitview.el.style.height=`${i.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${i.headerRowHeight}px`;const c=new Aw(s,r,d=>this.splitview.getViewSize(d));this.list=this.disposables.add(new Hl(e,this.domNode,gUe(i),[c],o)),Be.any(...a.map(d=>d.onDidLayout))(([d,u])=>c.layoutColumn(d,u),null,this.disposables),this.splitview.onDidSashReset(d=>{const u=s.reduce((f,g)=>f+g.weight,0),h=s[d].weight/u*this.cachedWidth;this.splitview.resizeView(d,h)},null,this.disposables),this.styleElement=Ka(this.domNode),this.style(u8e)}updateOptions(e){this.list.updateOptions(e)}splice(e,t,i=[]){this.list.splice(e,t,i)}getHTMLElement(){return this.domNode}style(e){const t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=t.join(`
`),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}}ST.InstanceCount=0;var Co;(function(n){n[n.Expanded=0]="Expanded",n[n.Collapsed=1]="Collapsed",n[n.PreserveOrExpanded=2]="PreserveOrExpanded",n[n.PreserveOrCollapsed=3]="PreserveOrCollapsed"})(Co||(Co={}));var qf;(function(n){n[n.Unknown=0]="Unknown",n[n.Twistie=1]="Twistie",n[n.Element=2]="Element",n[n.Filter=3]="Filter"})(qf||(qf={}));class To extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}}class SO{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}}function CO(n){return typeof n=="object"&&"visibility"in n&&"data"in n}function x1(n){switch(n){case!0:return 1;case!1:return 0;default:return n}}function UR(n){return typeof n.collapsible=="boolean"}class pUe{constructor(e,t,i,s={}){var r;this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new g2,this._onDidChangeCollapseState=new ue,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new ue,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new ue,this.onDidSplice=this._onDidSplice.event,this.refilterDelayer=new af(Jte),this.collapseByDefault=typeof s.collapseByDefault>"u"?!1:s.collapseByDefault,this.allowNonCollapsibleParents=(r=s.allowNonCollapsibleParents)!==null&&r!==void 0?r:!1,this.filter=s.filter,this.autoExpandSingleChildren=typeof s.autoExpandSingleChildren>"u"?!1:s.autoExpandSingleChildren,this.root={parent:void 0,element:i,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t,i=ci.empty(),s={}){if(e.length===0)throw new To(this.user,"Invalid tree location");s.diffIdentityProvider?this.spliceSmart(s.diffIdentityProvider,e,t,i,s):this.spliceSimple(e,t,i,s)}spliceSmart(e,t,i,s,r,o){var a;s===void 0&&(s=ci.empty()),o===void 0&&(o=(a=r.diffDepth)!==null&&a!==void 0?a:0);const{parentNode:l}=this.getParentNodeWithListIndex(t);if(!l.lastDiffIds)return this.spliceSimple(t,i,s,r);const c=[...s],d=t[t.length-1],u=new vd({getElements:()=>l.lastDiffIds},{getElements:()=>[...l.children.slice(0,d),...c,...l.children.slice(d+i)].map(p=>e.getId(p.element).toString())}).ComputeDiff(!1);if(u.quitEarly)return l.lastDiffIds=void 0,this.spliceSimple(t,i,c,r);const h=t.slice(0,-1),f=(p,b,w)=>{if(o>0)for(let v=0;v<w;v++)p--,b--,this.spliceSmart(e,[...h,p,0],Number.MAX_SAFE_INTEGER,c[b].children,r,o-1)};let g=Math.min(l.children.length,d+i),m=c.length;for(const p of u.changes.sort((b,w)=>w.originalStart-b.originalStart))f(g,m,g-(p.originalStart+p.originalLength)),g=p.originalStart,m=p.modifiedStart-d,this.spliceSimple([...h,g],p.originalLength,ci.slice(c,m,m+p.modifiedLength),r);f(g,m,g)}spliceSimple(e,t,i=ci.empty(),{onDidCreateNode:s,onDidDeleteNode:r,diffIdentityProvider:o}){const{parentNode:a,listIndex:l,revealed:c,visible:d}=this.getParentNodeWithListIndex(e),u=[],h=ci.map(i,y=>this.createTreeNode(y,a,a.visible?1:0,c,u,s)),f=e[e.length-1];let g=0;for(let y=f;y>=0&&y<a.children.length;y--){const C=a.children[y];if(C.visible){g=C.visibleChildIndex;break}}const m=[];let p=0,b=0;for(const y of h)m.push(y),b+=y.renderNodeCount,y.visible&&(y.visibleChildIndex=g+p++);const w=DH(a.children,f,t,m);o?a.lastDiffIds?DH(a.lastDiffIds,f,t,m.map(y=>o.getId(y.element).toString())):a.lastDiffIds=a.children.map(y=>o.getId(y.element).toString()):a.lastDiffIds=void 0;let v=0;for(const y of w)y.visible&&v++;if(v!==0)for(let y=f+m.length;y<a.children.length;y++){const C=a.children[y];C.visible&&(C.visibleChildIndex-=v)}if(a.visibleChildrenCount+=p-v,c&&d){const y=w.reduce((C,S)=>C+(S.visible?S.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(a,b-y),this.list.splice(l,y,u)}if(w.length>0&&r){const y=C=>{r(C),C.children.forEach(y)};w.forEach(y)}this._onDidSplice.fire({insertedNodes:m,deletedNodes:w});let _=a;for(;_;){if(_.visibility===2){this.refilterDelayer.trigger(()=>this.refilter());break}_=_.parent}}rerender(e){if(e.length===0)throw new To(this.user,"Invalid tree location");const{node:t,listIndex:i,revealed:s}=this.getTreeNodeWithListIndex(e);t.visible&&s&&this.list.splice(i,1,[t])}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:t,visible:i,revealed:s}=this.getTreeNodeWithListIndex(e);return i&&s?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){const i=this.getTreeNode(e);typeof t>"u"&&(t=!i.collapsible);const s={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,s))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,i){const s=this.getTreeNode(e);typeof t>"u"&&(t=!s.collapsed);const r={collapsed:t,recursive:i||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,r))}_setCollapseState(e,t){const{node:i,listIndex:s,revealed:r}=this.getTreeNodeWithListIndex(e),o=this._setListNodeCollapseState(i,s,r,t);if(i!==this.root&&this.autoExpandSingleChildren&&o&&!UR(t)&&i.collapsible&&!i.collapsed&&!t.recursive){let a=-1;for(let l=0;l<i.children.length;l++)if(i.children[l].visible)if(a>-1){a=-1;break}else a=l;a>-1&&this._setCollapseState([...e,a],t)}return o}_setListNodeCollapseState(e,t,i,s){const r=this._setNodeCollapseState(e,s,!1);if(!i||!e.visible||!r)return r;const o=e.renderNodeCount,a=this.updateNodeAfterCollapseChange(e),l=o-(t===-1?0:1);return this.list.splice(t+1,l,a.slice(1)),r}_setNodeCollapseState(e,t,i){let s;if(e===this.root?s=!1:(UR(t)?(s=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(s=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):s=!1,s&&this._onDidChangeCollapseState.fire({node:e,deep:i})),!UR(t)&&t.recursive)for(const r of e.children)s=this._setNodeCollapseState(r,t,!0)||s;return s}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){const e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t),this.refilterDelayer.cancel()}createTreeNode(e,t,i,s,r,o){const a={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible=="boolean"?e.collapsible:typeof e.collapsed<"u",collapsed:typeof e.collapsed>"u"?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},l=this._filterNode(a,i);a.visibility=l,s&&r.push(a);const c=e.children||ci.empty(),d=s&&l!==0&&!a.collapsed;let u=0,h=1;for(const f of c){const g=this.createTreeNode(f,a,l,d,r,o);a.children.push(g),h+=g.renderNodeCount,g.visible&&(g.visibleChildIndex=u++)}return this.allowNonCollapsibleParents||(a.collapsible=a.collapsible||a.children.length>0),a.visibleChildrenCount=u,a.visible=l===2?u>0:l===1,a.visible?a.collapsed||(a.renderNodeCount=h):(a.renderNodeCount=0,s&&r.pop()),o?.(a),a}updateNodeAfterCollapseChange(e){const t=e.renderNodeCount,i=[];return this._updateNodeAfterCollapseChange(e,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterCollapseChange(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(const i of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(i,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const t=e.renderNodeCount,i=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterFilterChange(e,t,i,s=!0){let r;if(e!==this.root){if(r=this._filterNode(e,t),r===0)return e.visible=!1,e.renderNodeCount=0,!1;s&&i.push(e)}const o=i.length;e.renderNodeCount=e===this.root?0:1;let a=!1;if(!e.collapsed||r!==0){let l=0;for(const c of e.children)a=this._updateNodeAfterFilterChange(c,r,i,s&&!e.collapsed)||a,c.visible&&(c.visibleChildIndex=l++);e.visibleChildrenCount=l}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=r===2?a:r===1,e.visibility=r),e.visible?e.collapsed||(e.renderNodeCount+=i.length-o):(e.renderNodeCount=0,s&&i.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){const i=this.filter?this.filter.filter(e.element,t):1;return typeof i=="boolean"?(e.filterData=void 0,i?1:0):CO(i)?(e.filterData=i.data,x1(i.visibility)):(e.filterData=void 0,x1(i))}hasTreeNode(e,t=this.root){if(!e||e.length===0)return!0;const[i,...s]=e;return i<0||i>t.children.length?!1:this.hasTreeNode(s,t.children[i])}getTreeNode(e,t=this.root){if(!e||e.length===0)return t;const[i,...s]=e;if(i<0||i>t.children.length)throw new To(this.user,"Invalid tree location");return this.getTreeNode(s,t.children[i])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:t,listIndex:i,revealed:s,visible:r}=this.getParentNodeWithListIndex(e),o=e[e.length-1];if(o<0||o>t.children.length)throw new To(this.user,"Invalid tree location");const a=t.children[o];return{node:a,listIndex:i,revealed:s,visible:r&&a.visible}}getParentNodeWithListIndex(e,t=this.root,i=0,s=!0,r=!0){const[o,...a]=e;if(o<0||o>t.children.length)throw new To(this.user,"Invalid tree location");for(let l=0;l<o;l++)i+=t.children[l].renderNodeCount;return s=s&&!t.collapsed,r=r&&t.visible,a.length===0?{parentNode:t,listIndex:i,revealed:s,visible:r}:this.getParentNodeWithListIndex(a,t.children[o],i+1,s,r)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){const t=[];let i=e;for(;i.parent;)t.push(i.parent.children.indexOf(i)),i=i.parent;return t.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:ZRe(e)[0]}getFirstElementChild(e){const t=this.getTreeNode(e);if(t.children.length!==0)return t.children[0].element}}class bUe extends Dw{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function YR(n){return n instanceof Dw?new bUe(n):n}class vUe{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=Le.None,this.disposables=new ct}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(i=>i.element),t)}onDragStart(e,t){var i,s;(s=(i=this.dnd).onDragStart)===null||s===void 0||s.call(i,YR(e),t)}onDragOver(e,t,i,s,r,o=!0){const a=this.dnd.onDragOver(YR(e),t&&t.element,i,s,r),l=this.autoExpandNode!==t;if(l&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),typeof t>"u")return a;if(l&&typeof a!="boolean"&&a.autoExpand&&(this.autoExpandDisposable=JC(()=>{const f=this.modelProvider(),g=f.getNodeLocation(t);f.isCollapsed(g)&&f.setCollapsed(g,!1),this.autoExpandNode=void 0},500,this.disposables)),typeof a=="boolean"||!a.accept||typeof a.bubble>"u"||a.feedback){if(!o){const f=typeof a=="boolean"?a:a.accept,g=typeof a=="boolean"?void 0:a.effect;return{accept:f,effect:g,feedback:[i]}}return a}if(a.bubble===1){const f=this.modelProvider(),g=f.getNodeLocation(t),m=f.getParentNodeLocation(g),p=f.getNode(m),b=m&&f.getListIndex(m);return this.onDragOver(e,p,b,s,r,!1)}const c=this.modelProvider(),d=c.getNodeLocation(t),u=c.getListIndex(d),h=c.getListRenderCount(d);return{...a,feedback:Pr(u,u+h)}}drop(e,t,i,s,r){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(YR(e),t&&t.element,i,s,r)}onDragEnd(e){var t,i;(i=(t=this.dnd).onDragEnd)===null||i===void 0||i.call(t,e)}dispose(){this.disposables.dispose(),this.dnd.dispose()}}function _Ue(n,e){return e&&{...e,identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new vUe(n,e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent({...t,element:t.element})},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent({...t,element:t.element})}},accessibilityProvider:e.accessibilityProvider&&{...e.accessibilityProvider,getSetSize(t){const i=n(),s=i.getNodeLocation(t),r=i.getParentNodeLocation(s);return i.getNode(r).visibleChildrenCount},getPosInSet(t){return t.visibleChildIndex+1},isChecked:e.accessibilityProvider&&e.accessibilityProvider.isChecked?t=>e.accessibilityProvider.isChecked(t.element):void 0,getRole:e.accessibilityProvider&&e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider&&e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider&&e.accessibilityProvider.getAriaLevel?t=>e.accessibilityProvider.getAriaLevel(t.element):t=>t.depth,getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))},keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{...e.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}}}}class LO{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){var i,s;(s=(i=this.delegate).setDynamicHeight)===null||s===void 0||s.call(i,e.element,t)}}var Yb;(function(n){n.None="none",n.OnHover="onHover",n.Always="always"})(Yb||(Yb={}));class wUe{get elements(){return this._elements}constructor(e,t=[]){this._elements=t,this.disposables=new ct,this.onDidChange=Be.forEach(e,i=>this._elements=i,this.disposables)}dispose(){this.disposables.dispose()}}class T1{constructor(e,t,i,s,r,o={}){var a;this.renderer=e,this.modelProvider=t,this.activeNodes=s,this.renderedIndentGuides=r,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=T1.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.activeIndentNodes=new Set,this.indentGuidesDisposable=Le.None,this.disposables=new ct,this.templateId=e.templateId,this.updateOptions(o),Be.map(i,l=>l.node)(this.onDidChangeNodeTwistieState,this,this.disposables),(a=e.onDidChangeTwistieState)===null||a===void 0||a.call(e,this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(typeof e.indent<"u"){const t=Br(e.indent,0,40);if(t!==this.indent){this.indent=t;for(const[i,s]of this.renderedNodes)this.renderTreeElement(i,s)}}if(typeof e.renderIndentGuides<"u"){const t=e.renderIndentGuides!==Yb.None;if(t!==this.shouldRenderIndentGuides){this.shouldRenderIndentGuides=t;for(const[i,s]of this.renderedNodes)this._renderIndentGuides(i,s);if(this.indentGuidesDisposable.dispose(),t){const i=new ct;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,i),this.indentGuidesDisposable=i,this._onDidChangeActiveNodes(this.activeNodes.elements)}}}typeof e.hideTwistiesOfChildlessElements<"u"&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const t=dt(e,St(".monaco-tl-row")),i=dt(t,St(".monaco-tl-indent")),s=dt(t,St(".monaco-tl-twistie")),r=dt(t,St(".monaco-tl-contents")),o=this.renderer.renderTemplate(r);return{container:e,indent:i,twistie:s,indentGuidesDisposable:Le.None,templateData:o}}renderElement(e,t,i,s){this.renderedNodes.set(e,i),this.renderedElements.set(e.element,e),this.renderTreeElement(e,i),this.renderer.renderElement(e,t,i.templateData,s)}disposeElement(e,t,i,s){var r,o;i.indentGuidesDisposable.dispose(),(o=(r=this.renderer).disposeElement)===null||o===void 0||o.call(r,e,t,i.templateData,s),typeof s=="number"&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){const t=this.renderedNodes.get(e);t&&(this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderTreeElement(e,t))}renderTreeElement(e,t){const i=T1.DefaultIndent+(e.depth-1)*this.indent;t.twistie.style.paddingLeft=`${i}px`,t.indent.style.width=`${i+this.indent-16}px`,e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded"),t.twistie.classList.remove(...Vt.asClassNameArray(Qe.treeItemExpanded));let s=!1;this.renderer.renderTwistie&&(s=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(s||t.twistie.classList.add(...Vt.asClassNameArray(Qe.treeItemExpanded)),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),this._renderIndentGuides(e,t)}_renderIndentGuides(e,t){if(Rl(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const i=new ct,s=this.modelProvider();for(;;){const r=s.getNodeLocation(e),o=s.getParentNodeLocation(r);if(!o)break;const a=s.getNode(o),l=St(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(a)&&l.classList.add("active"),t.indent.childElementCount===0?t.indent.appendChild(l):t.indent.insertBefore(l,t.indent.firstElementChild),this.renderedIndentGuides.add(a,l),i.add(Et(()=>this.renderedIndentGuides.delete(a,l))),e=a}t.indentGuidesDisposable=i}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const t=new Set,i=this.modelProvider();e.forEach(s=>{const r=i.getNodeLocation(s);try{const o=i.getParentNodeLocation(r);s.collapsible&&s.children.length>0&&!s.collapsed?t.add(s):o&&t.add(i.getNode(o))}catch{}}),this.activeIndentNodes.forEach(s=>{t.has(s)||this.renderedIndentGuides.forEach(s,r=>r.classList.remove("active"))}),t.forEach(s=>{this.activeIndentNodes.has(s)||this.renderedIndentGuides.forEach(s,r=>r.classList.add("active"))}),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),Ns(this.disposables)}}T1.DefaultIndent=8;class yUe{get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}constructor(e,t,i){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=i,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new ct,e.onWillRefilter(this.reset,this,this.disposables)}filter(e,t){let i=1;if(this._filter){const o=this._filter.filter(e,t);if(typeof o=="boolean"?i=o?1:0:CO(o)?i=x1(o.visibility):i=o,i===0)return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:Op.Default,visibility:i};const s=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),r=Array.isArray(s)?s:[s];for(const o of r){const a=o&&o.toString();if(typeof a>"u")return{data:Op.Default,visibility:i};let l;if(this.tree.findMatchType===Og.Contiguous){const c=a.toLowerCase().indexOf(this._lowercasePattern);if(c>-1){l=[Number.MAX_SAFE_INTEGER,0];for(let d=this._lowercasePattern.length;d>0;d--)l.push(c+d-1)}}else l=Use(this._pattern,this._lowercasePattern,0,a,a.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(l)return this._matchCount++,r.length===1?{data:l,visibility:i}:{data:{label:a,score:l},visibility:i}}return this.tree.findMode===Wd.Filter?typeof this.tree.options.defaultFindVisibility=="number"?this.tree.options.defaultFindVisibility:this.tree.options.defaultFindVisibility?this.tree.options.defaultFindVisibility(e):2:{data:Op.Default,visibility:i}}reset(){this._totalCount=0,this._matchCount=0}dispose(){Ns(this.disposables)}}var Wd;(function(n){n[n.Highlight=0]="Highlight",n[n.Filter=1]="Filter"})(Wd||(Wd={}));var Og;(function(n){n[n.Fuzzy=0]="Fuzzy",n[n.Contiguous=1]="Contiguous"})(Og||(Og={}));class SUe{get pattern(){return this._pattern}get mode(){return this._mode}set mode(e){e!==this._mode&&(this._mode=e,this.widget&&(this.widget.mode=this._mode),this.tree.refilter(),this.render(),this._onDidChangeMode.fire(e))}get matchType(){return this._matchType}set matchType(e){e!==this._matchType&&(this._matchType=e,this.widget&&(this.widget.matchType=this._matchType),this.tree.refilter(),this.render(),this._onDidChangeMatchType.fire(e))}constructor(e,t,i,s,r,o={}){var a,l;this.tree=e,this.view=i,this.filter=s,this.contextViewProvider=r,this.options=o,this._pattern="",this.width=0,this._onDidChangeMode=new ue,this.onDidChangeMode=this._onDidChangeMode.event,this._onDidChangeMatchType=new ue,this.onDidChangeMatchType=this._onDidChangeMatchType.event,this._onDidChangePattern=new ue,this._onDidChangeOpenState=new ue,this.onDidChangeOpenState=this._onDidChangeOpenState.event,this.enabledDisposables=new ct,this.disposables=new ct,this._mode=(a=e.options.defaultFindMode)!==null&&a!==void 0?a:Wd.Highlight,this._matchType=(l=e.options.defaultFindMatchType)!==null&&l!==void 0?l:Og.Fuzzy,t.onDidSplice(this.onDidSpliceModel,this,this.disposables)}updateOptions(e={}){e.defaultFindMode!==void 0&&(this.mode=e.defaultFindMode),e.defaultFindMatchType!==void 0&&(this.matchType=e.defaultFindMatchType)}onDidSpliceModel(){!this.widget||this.pattern.length===0||(this.tree.refilter(),this.render())}render(){var e,t,i,s;const r=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&r?!((e=this.tree.options.showNotFoundMessage)!==null&&e!==void 0)||e?(t=this.widget)===null||t===void 0||t.showMessage({type:2,content:L("not found","No elements found.")}):(i=this.widget)===null||i===void 0||i.showMessage({type:2}):(s=this.widget)===null||s===void 0||s.clearMessage()}shouldAllowFocus(e){return!this.widget||!this.pattern||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!Op.isDefault(e.filterData)}layout(e){var t;this.width=e,(t=this.widget)===null||t===void 0||t.layout(e)}dispose(){this._history=void 0,this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}}function CUe(n,e){return n.position===e.position&&Roe(n,e)}function Roe(n,e){return n.node.element===e.node.element&&n.startIndex===e.startIndex&&n.height===e.height&&n.endIndex===e.endIndex}class LUe{constructor(e=[]){this.stickyNodes=e}get count(){return this.stickyNodes.length}equal(e){return Gs(this.stickyNodes,e.stickyNodes,CUe)}lastNodePartiallyVisible(){if(this.count===0)return!1;const e=this.stickyNodes[this.count-1];if(this.count===1)return e.position!==0;const t=this.stickyNodes[this.count-2];return t.position+t.height!==e.position}animationStateChanged(e){if(!Gs(this.stickyNodes,e.stickyNodes,Roe)||this.count===0)return!1;const t=this.stickyNodes[this.count-1],i=e.stickyNodes[e.count-1];return t.position!==i.position}}class kUe{constrainStickyScrollNodes(e,t,i){for(let s=0;s<e.length;s++){const r=e[s];if(r.position+r.height>i||s>=t)return e.slice(0,s)}return e}}class Dj extends Le{constructor(e,t,i,s,r,o={}){var a;super(),this.tree=e,this.model=t,this.view=i,this.treeDelegate=r,this.maxWidgetViewRatio=.4;const l=this.validateStickySettings(o);this.stickyScrollMaxItemCount=l.stickyScrollMaxItemCount,this.stickyScrollDelegate=(a=o.stickyScrollDelegate)!==null&&a!==void 0?a:new kUe,this._widget=this._register(new xUe(i.getScrollableElement(),i,e,s,r,o.accessibilityProvider)),this.onDidChangeHasFocus=this._widget.onDidChangeHasFocus,this.onContextMenu=this._widget.onContextMenu,this._register(i.onDidScroll(()=>this.update())),this._register(i.onDidChangeContentHeight(()=>this.update())),this._register(e.onDidChangeCollapseState(()=>this.update())),this.update()}get height(){return this._widget.height}getNodeAtHeight(e){let t;if(e===0?t=this.view.firstVisibleIndex:t=this.view.indexAt(e+this.view.scrollTop),!(t<0||t>=this.view.length))return this.view.element(t)}update(){const e=this.getNodeAtHeight(0);if(!e||this.tree.scrollTop===0){this._widget.setState(void 0);return}const t=this.findStickyState(e);this._widget.setState(t)}findStickyState(e){const t=[];let i=e,s=0,r=this.getNextStickyNode(i,void 0,s);for(;r&&(t.push(r),s+=r.height,!(t.length<=this.stickyScrollMaxItemCount&&(i=this.getNextVisibleNode(r),!i)));)r=this.getNextStickyNode(i,r.node,s);const o=this.constrainStickyNodes(t);return o.length?new LUe(o):void 0}getNextVisibleNode(e){return this.getNodeAtHeight(e.position+e.height)}getNextStickyNode(e,t,i){const s=this.getAncestorUnderPrevious(e,t);if(s&&!(s===e&&(!this.nodeIsUncollapsedParent(e)||this.nodeTopAlignsWithStickyNodesBottom(e,i))))return this.createStickyScrollNode(s,i)}nodeTopAlignsWithStickyNodesBottom(e,t){const i=this.getNodeIndex(e),s=this.view.getElementTop(i),r=t;return this.view.scrollTop===s-r}createStickyScrollNode(e,t){const i=this.treeDelegate.getHeight(e),{startIndex:s,endIndex:r}=this.getNodeRange(e),o=this.calculateStickyNodePosition(r,t,i);return{node:e,position:o,height:i,startIndex:s,endIndex:r}}getAncestorUnderPrevious(e,t=void 0){let i=e,s=this.getParentNode(i);for(;s;){if(s===t)return i;i=s,s=this.getParentNode(i)}if(t===void 0)return i}calculateStickyNodePosition(e,t,i){let s=this.view.getRelativeTop(e);if(s===null&&this.view.firstVisibleIndex===e&&e+1<this.view.length){const c=this.treeDelegate.getHeight(this.view.element(e)),d=this.view.getRelativeTop(e+1);s=d?d-c/this.view.renderHeight:null}if(s===null)return t;const r=this.view.element(e),o=this.treeDelegate.getHeight(r),l=s*this.view.renderHeight+o;return t+i>l&&t<=l?l-i:t}constrainStickyNodes(e){if(e.length===0)return[];const t=this.view.renderHeight*this.maxWidgetViewRatio,i=e[e.length-1];if(e.length<=this.stickyScrollMaxItemCount&&i.position+i.height<=t)return e;const s=this.stickyScrollDelegate.constrainStickyScrollNodes(e,this.stickyScrollMaxItemCount,t);if(!s.length)return[];const r=s[s.length-1];if(s.length>this.stickyScrollMaxItemCount||r.position+r.height>t)throw new Error("stickyScrollDelegate violates constraints");return s}getParentNode(e){const t=this.model.getNodeLocation(e),i=this.model.getParentNodeLocation(t);return i?this.model.getNode(i):void 0}nodeIsUncollapsedParent(e){const t=this.model.getNodeLocation(e);return this.model.getListRenderCount(t)>1}getNodeIndex(e){const t=this.model.getNodeLocation(e);return this.model.getListIndex(t)}getNodeRange(e){const t=this.model.getNodeLocation(e),i=this.model.getListIndex(t);if(i<0)throw new Error("Node not found in tree");const s=this.model.getListRenderCount(t),r=i+s-1;return{startIndex:i,endIndex:r}}nodePositionTopBelowWidget(e){const t=[];let i=this.getParentNode(e);for(;i;)t.push(i),i=this.getParentNode(i);let s=0;for(let r=0;r<t.length&&r<this.stickyScrollMaxItemCount;r++)s+=this.treeDelegate.getHeight(t[r]);return s}domFocus(){this._widget.domFocus()}focusedLast(){return this._widget.focusedLast()}updateOptions(e={}){if(!e.stickyScrollMaxItemCount)return;const t=this.validateStickySettings(e);this.stickyScrollMaxItemCount!==t.stickyScrollMaxItemCount&&(this.stickyScrollMaxItemCount=t.stickyScrollMaxItemCount,this.update())}validateStickySettings(e){let t=7;return typeof e.stickyScrollMaxItemCount=="number"&&(t=Math.max(e.stickyScrollMaxItemCount,1)),{stickyScrollMaxItemCount:t}}}class xUe{constructor(e,t,i,s,r,o){this.view=t,this.tree=i,this.treeRenderers=s,this.treeDelegate=r,this.accessibilityProvider=o,this._previousElements=[],this._previousStateDisposables=new ct,this._rootDomNode=St(".monaco-tree-sticky-container.empty"),e.appendChild(this._rootDomNode);const a=St(".monaco-tree-sticky-container-shadow");this._rootDomNode.appendChild(a),this.stickyScrollFocus=new TUe(this._rootDomNode,t),this.onDidChangeHasFocus=this.stickyScrollFocus.onDidChangeHasFocus,this.onContextMenu=this.stickyScrollFocus.onContextMenu}get height(){if(!this._previousState)return 0;const e=this._previousState.stickyNodes[this._previousState.count-1];return e.position+e.height}setState(e){const t=!!this._previousState&&this._previousState.count>0,i=!!e&&e.count>0;if(!t&&!i||t&&i&&this._previousState.equal(e))return;if(t!==i&&this.setVisible(i),!i){this._previousState=void 0,this._previousElements=[],this._previousStateDisposables.clear();return}const s=e.stickyNodes[e.count-1];if(this._previousState&&e.animationStateChanged(this._previousState))this._previousElements[this._previousState.count-1].style.top=`${s.position}px`;else{this._previousStateDisposables.clear();const r=Array(e.count);for(let o=e.count-1;o>=0;o--){const a=e.stickyNodes[o],{element:l,disposable:c}=this.createElement(a,o,e.count);r[o]=l,this._rootDomNode.appendChild(l),this._previousStateDisposables.add(c)}this.stickyScrollFocus.updateElements(r,e),this._previousElements=r}this._previousState=e,this._rootDomNode.style.height=`${s.position+s.height}px`}createElement(e,t,i){const s=e.startIndex,r=document.createElement("div");r.style.top=`${e.position}px`,this.tree.options.setRowHeight!==!1&&(r.style.height=`${e.height}px`),this.tree.options.setRowLineHeight!==!1&&(r.style.lineHeight=`${e.height}px`),r.classList.add("monaco-tree-sticky-row"),r.classList.add("monaco-list-row"),r.setAttribute("data-index",`${s}`),r.setAttribute("data-parity",s%2===0?"even":"odd"),r.setAttribute("id",this.view.getElementID(s));const o=this.setAccessibilityAttributes(r,e.node.element,t,i),a=this.treeDelegate.getTemplateId(e.node),l=this.treeRenderers.find(h=>h.templateId===a);if(!l)throw new Error(`No renderer found for template id ${a}`);let c=e.node;c===this.tree.getNode(this.tree.getNodeLocation(e.node))&&(c=new Proxy(e.node,{}));const d=l.renderTemplate(r);l.renderElement(c,e.startIndex,d,e.height);const u=Et(()=>{o.dispose(),l.disposeElement(c,e.startIndex,d,e.height),l.disposeTemplate(d),r.remove()});return{element:r,disposable:u}}setAccessibilityAttributes(e,t,i,s){var r;if(!this.accessibilityProvider)return Le.None;this.accessibilityProvider.getSetSize&&e.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(t,i,s))),this.accessibilityProvider.getPosInSet&&e.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(t,i))),this.accessibilityProvider.getRole&&e.setAttribute("role",(r=this.accessibilityProvider.getRole(t))!==null&&r!==void 0?r:"treeitem");const o=this.accessibilityProvider.getAriaLabel(t),a=o&&typeof o!="string"?o:XL(o),l=ki(d=>{const u=d.readObservable(a);u?e.setAttribute("aria-label",u):e.removeAttribute("aria-label")});typeof o=="string"||o&&e.setAttribute("aria-label",o.get());const c=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(t);return typeof c=="number"&&e.setAttribute("aria-level",`${c}`),e.setAttribute("aria-selected",String(!1)),l}setVisible(e){this._rootDomNode.classList.toggle("empty",!e),e||this.stickyScrollFocus.updateElements([],void 0)}domFocus(){this.stickyScrollFocus.domFocus()}focusedLast(){return this.stickyScrollFocus.focusedLast()}dispose(){this.stickyScrollFocus.dispose(),this._previousStateDisposables.dispose(),this._rootDomNode.remove()}}class TUe extends Le{get domHasFocus(){return this._domHasFocus}set domHasFocus(e){e!==this._domHasFocus&&(this._onDidChangeHasFocus.fire(e),this._domHasFocus=e)}constructor(e,t){super(),this.container=e,this.view=t,this.focusedIndex=-1,this.elements=[],this._onDidChangeHasFocus=new ue,this.onDidChangeHasFocus=this._onDidChangeHasFocus.event,this._onContextMenu=new ue,this.onContextMenu=this._onContextMenu.event,this._domHasFocus=!1,this.container.addEventListener("focus",()=>this.onFocus()),this.container.addEventListener("blur",()=>this.onBlur()),this._register(this.view.onDidFocus(()=>this.toggleStickyScrollFocused(!1))),this._register(this.view.onKeyDown(i=>this.onKeyDown(i))),this._register(this.view.onMouseDown(i=>this.onMouseDown(i))),this._register(this.view.onContextMenu(i=>this.handleContextMenu(i)))}handleContextMenu(e){const t=e.browserEvent.target;if(!f1(t)&&!p_(t)){this.focusedLast()&&this.view.domFocus();return}if(!Vu(e.browserEvent)){if(!this.state)throw new Error("Context menu should not be triggered when state is undefined");const o=this.state.stickyNodes.findIndex(a=>{var l;return a.node.element===((l=e.element)===null||l===void 0?void 0:l.element)});if(o===-1)throw new Error("Context menu should not be triggered when element is not in sticky scroll widget");this.container.focus(),this.setFocus(o);return}if(!this.state||this.focusedIndex<0)throw new Error("Context menu key should not be triggered when focus is not in sticky scroll widget");const s=this.state.stickyNodes[this.focusedIndex].node.element,r=this.elements[this.focusedIndex];this._onContextMenu.fire({element:s,anchor:r,browserEvent:e.browserEvent,isStickyScroll:!0})}onKeyDown(e){if(this.domHasFocus&&this.state){if(e.key==="ArrowUp")this.setFocusedElement(Math.max(0,this.focusedIndex-1)),e.preventDefault(),e.stopPropagation();else if(e.key==="ArrowDown"||e.key==="ArrowRight"){if(this.focusedIndex>=this.state.count-1){const t=this.state.stickyNodes[this.state.count-1].startIndex+1;this.view.domFocus(),this.view.setFocus([t]),this.scrollNodeUnderWidget(t,this.state)}else this.setFocusedElement(this.focusedIndex+1);e.preventDefault(),e.stopPropagation()}}}onMouseDown(e){const t=e.browserEvent.target;!f1(t)&&!p_(t)||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation())}updateElements(e,t){if(t&&t.count===0)throw new Error("Sticky scroll state must be undefined when there are no sticky nodes");if(t&&t.count!==e.length)throw new Error("Sticky scroll focus received illigel state");const i=this.focusedIndex;if(this.removeFocus(),this.elements=e,this.state=t,t){const s=Br(i,0,t.count-1);this.setFocus(s)}else this.domHasFocus&&this.view.domFocus();this.container.tabIndex=t?0:-1}setFocusedElement(e){const t=this.state;if(!t)throw new Error("Cannot set focus when state is undefined");if(this.setFocus(e),!(e<t.count-1)&&t.lastNodePartiallyVisible()){const i=t.stickyNodes[e];this.scrollNodeUnderWidget(i.endIndex+1,t)}}scrollNodeUnderWidget(e,t){const i=t.stickyNodes[t.count-1],s=t.count>1?t.stickyNodes[t.count-2]:void 0,r=this.view.getElementTop(e),o=s?s.position+s.height+i.height:i.height;this.view.scrollTop=r-o}domFocus(){if(!this.state)throw new Error("Cannot focus when state is undefined");this.container.focus()}focusedLast(){return this.state?this.view.getHTMLElement().classList.contains("sticky-scroll-focused"):!1}removeFocus(){this.focusedIndex!==-1&&(this.toggleElementFocus(this.elements[this.focusedIndex],!1),this.focusedIndex=-1)}setFocus(e){if(0>e)throw new Error("addFocus() can not remove focus");if(!this.state&&e>=0)throw new Error("Cannot set focus index when state is undefined");if(this.state&&e>=this.state.count)throw new Error("Cannot set focus index to an index that does not exist");const t=this.focusedIndex;t>=0&&this.toggleElementFocus(this.elements[t],!1),e>=0&&this.toggleElementFocus(this.elements[e],!0),this.focusedIndex=e}toggleElementFocus(e,t){this.toggleElementActiveFocus(e,t&&this.domHasFocus),this.toggleElementPassiveFocus(e,t)}toggleCurrentElementActiveFocus(e){this.focusedIndex!==-1&&this.toggleElementActiveFocus(this.elements[this.focusedIndex],e)}toggleElementActiveFocus(e,t){e.classList.toggle("focused",t)}toggleElementPassiveFocus(e,t){e.classList.toggle("passive-focused",t)}toggleStickyScrollFocused(e){this.view.getHTMLElement().classList.toggle("sticky-scroll-focused",e)}onFocus(){if(!this.state||this.elements.length===0)throw new Error("Cannot focus when state is undefined or elements are empty");this.domHasFocus=!0,this.toggleStickyScrollFocused(!0),this.toggleCurrentElementActiveFocus(!0),this.focusedIndex===-1&&this.setFocus(0)}onBlur(){this.domHasFocus=!1,this.toggleCurrentElementActiveFocus(!1)}dispose(){this.toggleStickyScrollFocused(!1),this._onDidChangeHasFocus.fire(!1),super.dispose()}}function gS(n){let e=qf.Unknown;return P5(n.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?e=qf.Twistie:P5(n.browserEvent.target,"monaco-tl-contents","monaco-tl-row")?e=qf.Element:P5(n.browserEvent.target,"monaco-tree-type-filter","monaco-list")&&(e=qf.Filter),{browserEvent:n.browserEvent,element:n.element?n.element.element:null,target:e}}function DUe(n){const e=f1(n.browserEvent.target);return{element:n.element?n.element.element:null,browserEvent:n.browserEvent,anchor:n.anchor,isStickyScroll:e}}function sC(n,e){e(n),n.children.forEach(t=>sC(t,e))}class KR{get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new ue,this.onDidChange=this._onDidChange.event}set(e,t){!t?.__forceEvent&&Gs(this.nodes,e)||this._set(e,!1,t)}_set(e,t,i){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){const s=this;this._onDidChange.fire({get elements(){return s.get()},browserEvent:i})}}get(){return this.elements||(this.elements=this.nodes.map(e=>e.element)),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){const l=this.createNodeSet(),c=d=>l.delete(d);t.forEach(d=>sC(d,c)),this.set([...l.values()]);return}const i=new Set,s=l=>i.add(this.identityProvider.getId(l.element).toString());t.forEach(l=>sC(l,s));const r=new Map,o=l=>r.set(this.identityProvider.getId(l.element).toString(),l);e.forEach(l=>sC(l,o));const a=[];for(const l of this.nodes){const c=this.identityProvider.getId(l.element).toString();if(!i.has(c))a.push(l);else{const u=r.get(c);u&&u.visible&&a.push(u)}}if(this.nodes.length>0&&a.length===0){const l=this.getFirstViewElementWithTrait();l&&a.push(l)}this._set(a,!0)}createNodeSet(){const e=new Set;for(const t of this.nodes)e.add(t);return e}}class IUe extends vre{constructor(e,t,i){super(e),this.tree=t,this.stickyScrollProvider=i}onViewPointer(e){if(gre(e.browserEvent.target)||Ch(e.browserEvent.target)||Bv(e.browserEvent.target)||e.browserEvent.isHandledByList)return;const t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const i=e.browserEvent.target,s=i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&e.browserEvent.offsetX<16,r=p_(e.browserEvent.target);let o=!1;if(r?o=!0:typeof this.tree.expandOnlyOnTwistieClick=="function"?o=this.tree.expandOnlyOnTwistieClick(t.element):o=!!this.tree.expandOnlyOnTwistieClick,r)this.handleStickyScrollMouseEvent(e,t);else{if(o&&!s&&e.browserEvent.detail!==2)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&e.browserEvent.detail===2)return super.onViewPointer(e)}if(t.collapsible&&(!r||s)){const a=this.tree.getNodeLocation(t),l=e.browserEvent.altKey;if(this.tree.setFocus([a]),this.tree.toggleCollapsed(a,l),s){e.browserEvent.isHandledByList=!0;return}}r||super.onViewPointer(e)}handleStickyScrollMouseEvent(e,t){if(r8e(e.browserEvent.target)||o8e(e.browserEvent.target))return;const i=this.stickyScrollProvider();if(!i)throw new Error("Sticky scroll controller not found");const s=this.list.indexOf(t),r=this.list.getElementTop(s),o=i.nodePositionTopBelowWidget(t);this.tree.scrollTop=r-o,this.list.domFocus(),this.list.setFocus([s]),this.list.setSelection([s])}onDoubleClick(e){e.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||e.browserEvent.isHandledByList||super.onDoubleClick(e)}onMouseDown(e){const t=e.browserEvent.target;if(!f1(t)&&!p_(t)){super.onMouseDown(e);return}}onContextMenu(e){const t=e.browserEvent.target;if(!f1(t)&&!p_(t)){super.onContextMenu(e);return}}}class MUe extends Hl{constructor(e,t,i,s,r,o,a,l){super(e,t,i,s,l),this.focusTrait=r,this.selectionTrait=o,this.anchorTrait=a}createMouseController(e){return new IUe(this,e.tree,e.stickyScrollProvider)}splice(e,t,i=[]){if(super.splice(e,t,i),i.length===0)return;const s=[],r=[];let o;i.forEach((a,l)=>{this.focusTrait.has(a)&&s.push(e+l),this.selectionTrait.has(a)&&r.push(e+l),this.anchorTrait.has(a)&&(o=e+l)}),s.length>0&&super.setFocus(Ah([...super.getFocus(),...s])),r.length>0&&super.setSelection(Ah([...super.getSelection(),...r])),typeof o=="number"&&super.setAnchor(o)}setFocus(e,t,i=!1){super.setFocus(e,t),i||this.focusTrait.set(e.map(s=>this.element(s)),t)}setSelection(e,t,i=!1){super.setSelection(e,t),i||this.selectionTrait.set(e.map(s=>this.element(s)),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(typeof e>"u"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}class Woe{get onDidScroll(){return this.view.onDidScroll}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return Be.filter(Be.map(this.view.onMouseDblClick,gS),e=>e.target!==qf.Filter)}get onMouseOver(){return Be.map(this.view.onMouseOver,gS)}get onMouseOut(){return Be.map(this.view.onMouseOut,gS)}get onContextMenu(){var e,t;return Be.any(Be.filter(Be.map(this.view.onContextMenu,DUe),i=>!i.isStickyScroll),(t=(e=this.stickyScrollController)===null||e===void 0?void 0:e.onContextMenu)!==null&&t!==void 0?t:Be.None)}get onPointer(){return Be.map(this.view.onPointer,gS)}get onKeyDown(){return this.view.onKeyDown}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return Be.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get findMode(){var e,t;return(t=(e=this.findController)===null||e===void 0?void 0:e.mode)!==null&&t!==void 0?t:Wd.Highlight}set findMode(e){this.findController&&(this.findController.mode=e)}get findMatchType(){var e,t;return(t=(e=this.findController)===null||e===void 0?void 0:e.matchType)!==null&&t!==void 0?t:Og.Fuzzy}set findMatchType(e){this.findController&&(this.findController.matchType=e)}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick>"u"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick>"u"?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}constructor(e,t,i,s,r={}){var o;this._user=e,this._options=r,this.eventBufferer=new g2,this.onDidChangeFindOpenState=Be.None,this.onDidChangeStickyScrollFocused=Be.None,this.disposables=new ct,this._onWillRefilter=new ue,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new ue,this.treeDelegate=new LO(i);const a=new Jz,l=new Jz,c=this.disposables.add(new wUe(l.event)),d=new Uie;this.renderers=s.map(m=>new T1(m,()=>this.model,a.event,c,d,r));for(const m of this.renderers)this.disposables.add(m);let u;r.keyboardNavigationLabelProvider&&(u=new yUe(this,r.keyboardNavigationLabelProvider,r.filter),r={...r,filter:u},this.disposables.add(u)),this.focus=new KR(()=>this.view.getFocusedElements()[0],r.identityProvider),this.selection=new KR(()=>this.view.getSelectedElements()[0],r.identityProvider),this.anchor=new KR(()=>this.view.getAnchorElement(),r.identityProvider),this.view=new MUe(e,t,this.treeDelegate,this.renderers,this.focus,this.selection,this.anchor,{..._Ue(()=>this.model,r),tree:this,stickyScrollProvider:()=>this.stickyScrollController}),this.model=this.createModel(e,this.view,r),a.input=this.model.onDidChangeCollapseState;const h=Be.forEach(this.model.onDidSplice,m=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(m),this.selection.onDidModelSplice(m)})},this.disposables);h(()=>null,null,this.disposables);const f=this.disposables.add(new ue),g=this.disposables.add(new af(0));if(this.disposables.add(Be.any(h,this.focus.onDidChange,this.selection.onDidChange)(()=>{g.trigger(()=>{const m=new Set;for(const p of this.focus.getNodes())m.add(p);for(const p of this.selection.getNodes())m.add(p);f.fire([...m.values()])})})),l.input=f.event,r.keyboardSupport!==!1){const m=Be.chain(this.view.onKeyDown,p=>p.filter(b=>!Ch(b.target)).map(b=>new Ji(b)));Be.chain(m,p=>p.filter(b=>b.keyCode===15))(this.onLeftArrow,this,this.disposables),Be.chain(m,p=>p.filter(b=>b.keyCode===17))(this.onRightArrow,this,this.disposables),Be.chain(m,p=>p.filter(b=>b.keyCode===10))(this.onSpace,this,this.disposables)}if((!((o=r.findWidgetEnabled)!==null&&o!==void 0)||o)&&r.keyboardNavigationLabelProvider&&r.contextViewProvider){const m=this.options.findWidgetStyles?{styles:this.options.findWidgetStyles}:void 0;this.findController=new SUe(this,this.model,this.view,u,r.contextViewProvider,m),this.focusNavigationFilter=p=>this.findController.shouldAllowFocus(p),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.disposables.add(this.findController),this.onDidChangeFindMode=this.findController.onDidChangeMode,this.onDidChangeFindMatchType=this.findController.onDidChangeMatchType}else this.onDidChangeFindMode=Be.None,this.onDidChangeFindMatchType=Be.None;r.enableStickyScroll&&(this.stickyScrollController=new Dj(this,this.model,this.view,this.renderers,this.treeDelegate,r),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus),this.styleElement=Ka(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===Yb.Always)}updateOptions(e={}){var t;this._options={...this._options,...e};for(const i of this.renderers)i.updateOptions(e);this.view.updateOptions(this._options),(t=this.findController)===null||t===void 0||t.updateOptions(e),this.updateStickyScroll(e),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===Yb.Always)}get options(){return this._options}updateStickyScroll(e){var t;!this.stickyScrollController&&this._options.enableStickyScroll?(this.stickyScrollController=new Dj(this,this.model,this.view,this.renderers,this.treeDelegate,this._options),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus):this.stickyScrollController&&!this._options.enableStickyScroll&&(this.onDidChangeStickyScrollFocused=Be.None,this.stickyScrollController.dispose(),this.stickyScrollController=void 0),(t=this.stickyScrollController)===null||t===void 0||t.updateOptions(e)}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get ariaLabel(){return this.view.ariaLabel}set ariaLabel(e){this.view.ariaLabel=e}domFocus(){var e;!((e=this.stickyScrollController)===null||e===void 0)&&e.focusedLast()?this.stickyScrollController.domFocus():this.view.domFocus()}layout(e,t){var i;this.view.layout(e,t),Rh(t)&&((i=this.findController)===null||i===void 0||i.layout(t))}style(e){var t,i;const s=`.${this.view.domId}`,r=[];e.treeIndentGuidesStroke&&(r.push(`.monaco-list${s}:hover .monaco-tl-indent > .indent-guide, .monaco-list${s}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeInactiveIndentGuidesStroke}; }`),r.push(`.monaco-list${s} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`));const o=(t=e.treeStickyScrollBackground)!==null&&t!==void 0?t:e.listBackground;o&&(r.push(`.monaco-list${s} .monaco-scrollable-element .monaco-tree-sticky-container { background-color: ${o}; }`),r.push(`.monaco-list${s} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-row { background-color: ${o}; }`)),e.treeStickyScrollBorder&&r.push(`.monaco-list${s} .monaco-scrollable-element .monaco-tree-sticky-container { border-bottom: 1px solid ${e.treeStickyScrollBorder}; }`),e.treeStickyScrollShadow&&r.push(`.monaco-list${s} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-container-shadow { box-shadow: ${e.treeStickyScrollShadow} 0 6px 6px -6px inset; height: 3px; }`),e.listFocusForeground&&(r.push(`.monaco-list${s}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),r.push(`.monaco-list${s}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { color: inherit; }`));const a=Zd(e.listFocusAndSelectionOutline,Zd(e.listSelectionOutline,(i=e.listFocusOutline)!==null&&i!==void 0?i:""));a&&(r.push(`.monaco-list${s}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused.selected { outline: 1px solid ${a}; outline-offset: -1px;}`),r.push(`.monaco-list${s}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused.selected { outline: inherit;}`)),e.listFocusOutline&&(r.push(`.monaco-list${s}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),r.push(`.monaco-list${s}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { outline: inherit; }`),r.push(`.monaco-workbench.context-menu-visible .monaco-list${s}.last-focused.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.passive-focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),r.push(`.monaco-workbench.context-menu-visible .monaco-list${s}.last-focused.sticky-scroll-focused .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`),r.push(`.monaco-workbench.context-menu-visible .monaco-list${s}.last-focused:not(.sticky-scroll-focused) .monaco-tree-sticky-container .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`)),this.styleElement.textContent=r.join(`
`),this.view.style(e)}getParentElement(e){const t=this.model.getParentNodeLocation(e);return this.model.getNode(t).element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}getNodeLocation(e){return this.model.getNodeLocation(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}toggleCollapsed(e,t=!1){return this.model.setCollapsed(e,void 0,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){this.eventBufferer.bufferEvents(()=>{const i=e.map(r=>this.model.getNode(r));this.selection.set(i,t);const s=e.map(r=>this.model.getListIndex(r)).filter(r=>r>-1);this.view.setSelection(s,t,!0)})}getSelection(){return this.selection.get()}setFocus(e,t){this.eventBufferer.bufferEvents(()=>{const i=e.map(r=>this.model.getNode(r));this.focus.set(i,t);const s=e.map(r=>this.model.getListIndex(r)).filter(r=>r>-1);this.view.setFocus(s,t,!0)})}focusNext(e=1,t=!1,i,s=Vu(i)&&i.altKey?void 0:this.focusNavigationFilter){this.view.focusNext(e,t,i,s)}focusPrevious(e=1,t=!1,i,s=Vu(i)&&i.altKey?void 0:this.focusNavigationFilter){this.view.focusPrevious(e,t,i,s)}focusNextPage(e,t=Vu(e)&&e.altKey?void 0:this.focusNavigationFilter){return this.view.focusNextPage(e,t)}focusPreviousPage(e,t=Vu(e)&&e.altKey?void 0:this.focusNavigationFilter){return this.view.focusPreviousPage(e,t,()=>{var i,s;return(s=(i=this.stickyScrollController)===null||i===void 0?void 0:i.height)!==null&&s!==void 0?s:0})}focusFirst(e,t=Vu(e)&&e.altKey?void 0:this.focusNavigationFilter){this.view.focusFirst(e,t)}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);const i=this.model.getListIndex(e);if(i!==-1)if(!this.stickyScrollController)this.view.reveal(i,t);else{const s=this.stickyScrollController.nodePositionTopBelowWidget(this.getNode(e));this.view.reveal(i,t,s)}}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const i=t[0],s=this.model.getNodeLocation(i);if(!this.model.setCollapsed(s,!0)){const o=this.model.getParentNodeLocation(s);if(!o)return;const a=this.model.getListIndex(o);this.view.reveal(a),this.view.setFocus([a])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const i=t[0],s=this.model.getNodeLocation(i);if(!this.model.setCollapsed(s,!1)){if(!i.children.some(l=>l.visible))return;const[o]=this.view.getFocus(),a=o+1;this.view.reveal(a),this.view.setFocus([a])}}onSpace(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const i=t[0],s=this.model.getNodeLocation(i),r=e.browserEvent.altKey;this.model.setCollapsed(s,void 0,r)}dispose(){var e;Ns(this.disposables),(e=this.stickyScrollController)===null||e===void 0||e.dispose(),this.view.dispose()}}class kO{constructor(e,t,i={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new pUe(e,t,null,i),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,i.sorter&&(this.sorter={compare(s,r){return i.sorter.compare(s.element,r.element)}}),this.identityProvider=i.identityProvider}setChildren(e,t=ci.empty(),i={}){const s=this.getElementLocation(e);this._setChildren(s,this.preserveCollapseState(t),i)}_setChildren(e,t=ci.empty(),i){const s=new Set,r=new Set,o=l=>{var c;if(l.element===null)return;const d=l;if(s.add(d.element),this.nodes.set(d.element,d),this.identityProvider){const u=this.identityProvider.getId(d.element).toString();r.add(u),this.nodesByIdentity.set(u,d)}(c=i.onDidCreateNode)===null||c===void 0||c.call(i,d)},a=l=>{var c;if(l.element===null)return;const d=l;if(s.has(d.element)||this.nodes.delete(d.element),this.identityProvider){const u=this.identityProvider.getId(d.element).toString();r.has(u)||this.nodesByIdentity.delete(u)}(c=i.onDidDeleteNode)===null||c===void 0||c.call(i,d)};this.model.splice([...e,0],Number.MAX_VALUE,t,{...i,onDidCreateNode:o,onDidDeleteNode:a})}preserveCollapseState(e=ci.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),ci.map(e,t=>{let i=this.nodes.get(t.element);if(!i&&this.identityProvider){const o=this.identityProvider.getId(t.element).toString();i=this.nodesByIdentity.get(o)}if(!i){let o;return typeof t.collapsed>"u"?o=void 0:t.collapsed===Co.Collapsed||t.collapsed===Co.PreserveOrCollapsed?o=!0:t.collapsed===Co.Expanded||t.collapsed===Co.PreserveOrExpanded?o=!1:o=!!t.collapsed,{...t,children:this.preserveCollapseState(t.children),collapsed:o}}const s=typeof t.collapsible=="boolean"?t.collapsible:i.collapsible;let r;return typeof t.collapsed>"u"||t.collapsed===Co.PreserveOrCollapsed||t.collapsed===Co.PreserveOrExpanded?r=i.collapsed:t.collapsed===Co.Collapsed?r=!0:t.collapsed===Co.Expanded?r=!1:r=!!t.collapsed,{...t,collapsible:s,collapsed:r,children:this.preserveCollapseState(t.children)}})}rerender(e){const t=this.getElementLocation(e);this.model.rerender(t)}getFirstElementChild(e=null){const t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){const t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const i=this.getElementLocation(e);return this.model.setCollapsible(i,t)}isCollapsed(e){const t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){const s=this.getElementLocation(e);return this.model.setCollapsed(s,t,i)}expandTo(e){const t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);const t=this.nodes.get(e);if(!t)throw new To(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new To(this.user,"Invalid getParentNodeLocation call");const t=this.nodes.get(e);if(!t)throw new To(this.user,`Tree element not found: ${e}`);const i=this.model.getNodeLocation(t),s=this.model.getParentNodeLocation(i);return this.model.getNode(s).element}getElementLocation(e){if(e===null)return[];const t=this.nodes.get(e);if(!t)throw new To(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}}function rC(n){const e=[n.element],t=n.incompressible||!1;return{element:{elements:e,incompressible:t},children:ci.map(ci.from(n.children),rC),collapsible:n.collapsible,collapsed:n.collapsed}}function oC(n){const e=[n.element],t=n.incompressible||!1;let i,s;for(;[s,i]=ci.consume(ci.from(n.children),2),!(s.length!==1||s[0].incompressible);)n=s[0],e.push(n.element);return{element:{elements:e,incompressible:t},children:ci.map(ci.concat(s,i),oC),collapsible:n.collapsible,collapsed:n.collapsed}}function $A(n,e=0){let t;return e<n.element.elements.length-1?t=[$A(n,e+1)]:t=ci.map(ci.from(n.children),i=>$A(i,0)),e===0&&n.element.incompressible?{element:n.element.elements[e],children:t,incompressible:!0,collapsible:n.collapsible,collapsed:n.collapsed}:{element:n.element.elements[e],children:t,collapsible:n.collapsible,collapsed:n.collapsed}}function Ij(n){return $A(n,0)}function Aoe(n,e,t){return n.element===e?{...n,children:t}:{...n,children:ci.map(ci.from(n.children),i=>Aoe(i,e,t))}}const EUe=n=>({getId(e){return e.elements.map(t=>n.getId(t).toString()).join("\0")}});class NUe{get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}constructor(e,t,i={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new kO(e,t,i),this.enabled=typeof i.compressionEnabled>"u"?!0:i.compressionEnabled,this.identityProvider=i.identityProvider}setChildren(e,t=ci.empty(),i){const s=i.diffIdentityProvider&&EUe(i.diffIdentityProvider);if(e===null){const g=ci.map(t,this.enabled?oC:rC);this._setChildren(null,g,{diffIdentityProvider:s,diffDepth:1/0});return}const r=this.nodes.get(e);if(!r)throw new To(this.user,"Unknown compressed tree node");const o=this.model.getNode(r),a=this.model.getParentNodeLocation(r),l=this.model.getNode(a),c=Ij(o),d=Aoe(c,e,t),u=(this.enabled?oC:rC)(d),h=i.diffIdentityProvider?(g,m)=>i.diffIdentityProvider.getId(g)===i.diffIdentityProvider.getId(m):void 0;if(Gs(u.element.elements,o.element.elements,h)){this._setChildren(r,u.children||ci.empty(),{diffIdentityProvider:s,diffDepth:1});return}const f=l.children.map(g=>g===o?u:g);this._setChildren(l.element,f,{diffIdentityProvider:s,diffDepth:o.depth-l.depth})}isCompressionEnabled(){return this.enabled}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const i=this.model.getNode().children,s=ci.map(i,Ij),r=ci.map(s,e?oC:rC);this._setChildren(null,r,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,i){const s=new Set,r=a=>{for(const l of a.element.elements)s.add(l),this.nodes.set(l,a.element)},o=a=>{for(const l of a.element.elements)s.has(l)||this.nodes.delete(l)};this.model.setChildren(e,t,{...i,onDidCreateNode:r,onDidDeleteNode:o})}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(typeof e>"u")return this.model.getNode();const t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){const t=this.model.getNodeLocation(e);return t===null?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){const t=this.getCompressedNode(e),i=this.model.getParentNodeLocation(t);return i===null?null:i.elements[i.elements.length-1]}getFirstElementChild(e){const t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}isCollapsible(e){const t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const i=this.getCompressedNode(e);return this.model.setCollapsible(i,t)}isCollapsed(e){const t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){const s=this.getCompressedNode(e);return this.model.setCollapsed(s,t,i)}expandTo(e){const t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){const t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(e===null)return null;const t=this.nodes.get(e);if(!t)throw new To(this.user,`Tree element not found: ${e}`);return t}}const RUe=n=>n[n.length-1];class xO{get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(e=>new xO(this.unwrapper,e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e,t){this.unwrapper=e,this.node=t}}function WUe(n,e){return{splice(t,i,s){e.splice(t,i,s.map(r=>n.map(r)))},updateElementHeight(t,i){e.updateElementHeight(t,i)}}}function AUe(n,e){return{...e,identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(n(t))}},sorter:e.sorter&&{compare(t,i){return e.sorter.compare(t.elements[0],i.elements[0])}},filter:e.filter&&{filter(t,i){return e.filter.filter(n(t),i)}}}}class FUe{get onDidSplice(){return Be.map(this.model.onDidSplice,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(i=>this.nodeMapper.map(i)),deletedNodes:t.map(i=>this.nodeMapper.map(i))}))}get onDidChangeCollapseState(){return Be.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return Be.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}constructor(e,t,i={}){this.rootRef=null,this.elementMapper=i.elementMapper||RUe;const s=r=>this.elementMapper(r.elements);this.nodeMapper=new SO(r=>new xO(s,r)),this.model=new NUe(e,WUe(this.nodeMapper,t),AUe(s,i))}setChildren(e,t=ci.empty(),i={}){this.model.setChildren(e,t,i)}isCompressionEnabled(){return this.model.isCompressionEnabled()}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){const t=this.model.getFirstElementChild(e);return t===null||typeof t>"u"?t:this.elementMapper(t.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,i){return this.model.setCollapsed(e,t,i)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}}var VUe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};class TO extends Woe{get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}constructor(e,t,i,s,r={}){super(e,t,i,s,r),this.user=e}setChildren(e,t=ci.empty(),i){this.model.setChildren(e,t,i)}rerender(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}hasElement(e){return this.model.has(e)}createModel(e,t,i){return new kO(e,t,i)}}class Foe{get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}constructor(e,t,i){this._compressedTreeNodeProvider=e,this.stickyScrollDelegate=t,this.renderer=i,this.templateId=i.templateId,i.onDidChangeTwistieState&&(this.onDidChangeTwistieState=i.onDidChangeTwistieState)}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,i,s){let r=this.stickyScrollDelegate.getCompressedNode(e);r||(r=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element)),r.element.elements.length===1?(i.compressedTreeNode=void 0,this.renderer.renderElement(e,t,i.data,s)):(i.compressedTreeNode=r,this.renderer.renderCompressedElements(r,t,i.data,s))}disposeElement(e,t,i,s){var r,o,a,l;i.compressedTreeNode?(o=(r=this.renderer).disposeCompressedElements)===null||o===void 0||o.call(r,i.compressedTreeNode,t,i.data,s):(l=(a=this.renderer).disposeElement)===null||l===void 0||l.call(a,e,t,i.data,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return this.renderer.renderTwistie?this.renderer.renderTwistie(e,t):!1}}VUe([Tn],Foe.prototype,"compressedTreeNodeProvider",null);class PUe{constructor(e){this.modelProvider=e,this.compressedStickyNodes=new Map}getCompressedNode(e){return this.compressedStickyNodes.get(e)}constrainStickyScrollNodes(e,t,i){if(this.compressedStickyNodes.clear(),e.length===0)return[];for(let s=0;s<e.length;s++){const r=e[s],o=r.position+r.height;if(s+1<e.length&&o+e[s+1].height>i||s>=t-1&&t<e.length){const l=e.slice(0,s),c=e.slice(s),d=this.compressStickyNodes(c);return[...l,d]}}return e}compressStickyNodes(e){if(e.length===0)throw new Error("Can't compress empty sticky nodes");const t=this.modelProvider();if(!t.isCompressionEnabled())return e[0];const i=[];for(let c=0;c<e.length;c++){const d=e[c],u=t.getCompressedTreeNode(d.node.element);if(u.element){if(c!==0&&u.element.incompressible)break;i.push(...u.element.elements)}}if(i.length<2)return e[0];const s=e[e.length-1],r={elements:i,incompressible:!1},o={...s.node,children:[],element:r},a=new Proxy(e[0].node,{}),l={node:a,startIndex:e[0].startIndex,endIndex:s.endIndex,position:e[0].position,height:e[0].height};return this.compressedStickyNodes.set(a,o),l}}function OUe(n,e){return e&&{...e,keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(t){let i;try{i=n().getCompressedTreeNode(t)}catch{return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t)}return i.element.elements.length===1?e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t):e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(i.element.elements)}}}}class Voe extends TO{constructor(e,t,i,s,r={}){const o=()=>this,a=new PUe(()=>this.model),l=s.map(c=>new Foe(o,a,c));super(e,t,i,l,{...OUe(o,r),stickyScrollDelegate:a})}setChildren(e,t=ci.empty(),i){this.model.setChildren(e,t,i)}createModel(e,t,i){return new FUe(e,t,i)}updateOptions(e={}){super.updateOptions(e),typeof e.compressionEnabled<"u"&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}}function jR(n){return{...n,children:[],refreshPromise:void 0,stale:!0,slow:!1,forceExpanded:!1}}function QA(n,e){return e.parent?e.parent===n?!0:QA(n,e.parent):!1}function ZUe(n,e){return n===e||QA(n,e)||QA(e,n)}class DO{get element(){return this.node.element.element}get children(){return this.node.children.map(e=>new DO(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}class GUe{constructor(e,t,i){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=i,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,s){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,s)}renderTwistie(e,t){return e.slow?(t.classList.add(...Vt.asClassNameArray(Qe.treeItemLoading)),!0):(t.classList.remove(...Vt.asClassNameArray(Qe.treeItemLoading)),!1)}disposeElement(e,t,i,s){var r,o;(o=(r=this.renderer).disposeElement)===null||o===void 0||o.call(r,this.nodeMapper.map(e),t,i.templateData,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}function Mj(n){return{browserEvent:n.browserEvent,elements:n.elements.map(e=>e.element)}}function Ej(n){return{browserEvent:n.browserEvent,element:n.element&&n.element.element,target:n.target}}class BUe extends Dw{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function JR(n){return n instanceof Dw?new BUe(n):n}class XUe{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(i=>i.element),t)}onDragStart(e,t){var i,s;(s=(i=this.dnd).onDragStart)===null||s===void 0||s.call(i,JR(e),t)}onDragOver(e,t,i,s,r,o=!0){return this.dnd.onDragOver(JR(e),t&&t.element,i,s,r)}drop(e,t,i,s,r){this.dnd.drop(JR(e),t&&t.element,i,s,r)}onDragEnd(e){var t,i;(i=(t=this.dnd).onDragEnd)===null||i===void 0||i.call(t,e)}dispose(){this.dnd.dispose()}}function Poe(n){return n&&{...n,collapseByDefault:!0,identityProvider:n.identityProvider&&{getId(e){return n.identityProvider.getId(e.element)}},dnd:n.dnd&&new XUe(n.dnd),multipleSelectionController:n.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return n.multipleSelectionController.isSelectionSingleChangeEvent({...e,element:e.element})},isSelectionRangeChangeEvent(e){return n.multipleSelectionController.isSelectionRangeChangeEvent({...e,element:e.element})}},accessibilityProvider:n.accessibilityProvider&&{...n.accessibilityProvider,getPosInSet:void 0,getSetSize:void 0,getRole:n.accessibilityProvider.getRole?e=>n.accessibilityProvider.getRole(e.element):()=>"treeitem",isChecked:n.accessibilityProvider.isChecked?e=>{var t;return!!(!((t=n.accessibilityProvider)===null||t===void 0)&&t.isChecked(e.element))}:void 0,getAriaLabel(e){return n.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return n.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:n.accessibilityProvider.getWidgetRole?()=>n.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:n.accessibilityProvider.getAriaLevel&&(e=>n.accessibilityProvider.getAriaLevel(e.element)),getActiveDescendantId:n.accessibilityProvider.getActiveDescendantId&&(e=>n.accessibilityProvider.getActiveDescendantId(e.element))},filter:n.filter&&{filter(e,t){return n.filter.filter(e.element,t)}},keyboardNavigationLabelProvider:n.keyboardNavigationLabelProvider&&{...n.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(e){return n.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}},sorter:void 0,expandOnlyOnTwistieClick:typeof n.expandOnlyOnTwistieClick>"u"?void 0:typeof n.expandOnlyOnTwistieClick!="function"?n.expandOnlyOnTwistieClick:e=>n.expandOnlyOnTwistieClick(e.element),defaultFindVisibility:e=>e.hasChildren&&e.stale?1:typeof n.defaultFindVisibility=="number"?n.defaultFindVisibility:typeof n.defaultFindVisibility>"u"?2:n.defaultFindVisibility(e.element)}}function qA(n,e){e(n),n.children.forEach(t=>qA(t,e))}class Ooe{get onDidScroll(){return this.tree.onDidScroll}get onDidChangeFocus(){return Be.map(this.tree.onDidChangeFocus,Mj)}get onDidChangeSelection(){return Be.map(this.tree.onDidChangeSelection,Mj)}get onMouseDblClick(){return Be.map(this.tree.onMouseDblClick,Ej)}get onPointer(){return Be.map(this.tree.onPointer,Ej)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidChangeFindOpenState(){return this.tree.onDidChangeFindOpenState}get onDidChangeStickyScrollFocused(){return this.tree.onDidChangeStickyScrollFocused}get onDidDispose(){return this.tree.onDidDispose}constructor(e,t,i,s,r,o={}){this.user=e,this.dataSource=r,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new ue,this._onDidChangeNodeSlowState=new ue,this.nodeMapper=new SO(a=>new DO(a)),this.disposables=new ct,this.identityProvider=o.identityProvider,this.autoExpandSingleChildren=typeof o.autoExpandSingleChildren>"u"?!1:o.autoExpandSingleChildren,this.sorter=o.sorter,this.getDefaultCollapseState=a=>o.collapseByDefault?o.collapseByDefault(a)?Co.PreserveOrCollapsed:Co.PreserveOrExpanded:void 0,this.tree=this.createTree(e,t,i,s,o),this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.onDidChangeFindMatchType=this.tree.onDidChangeFindMatchType,this.root=jR({element:void 0,parent:null,hasChildren:!0,defaultCollapseState:void 0}),this.identityProvider&&(this.root={...this.root,id:null}),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}createTree(e,t,i,s,r){const o=new LO(i),a=s.map(c=>new GUe(c,this.nodeMapper,this._onDidChangeNodeSlowState.event)),l=Poe(r)||{};return new TO(e,t,o,a,l)}updateOptions(e={}){this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}get scrollHeight(){return this.tree.scrollHeight}get renderHeight(){return this.tree.renderHeight}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}async setInput(e,t){this.refreshPromises.forEach(s=>s.cancel()),this.refreshPromises.clear(),this.root.element=e;const i=t&&{viewState:t,focus:[],selection:[]};await this._updateChildren(e,!0,!1,i),i&&(this.tree.setFocus(i.focus),this.tree.setSelection(i.selection)),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop)}async _updateChildren(e=this.root.element,t=!0,i=!1,s,r){if(typeof this.root.element>"u")throw new To(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await Be.toPromise(this._onDidRender.event));const o=this.getDataNode(e);if(await this.refreshAndRenderNode(o,t,s,r),i)try{this.tree.rerender(o)}catch{}}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}const t=this.getDataNode(e);this.tree.rerender(t)}getNode(e=this.root.element){const t=this.getDataNode(e),i=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(i)}collapse(e,t=!1){const i=this.getDataNode(e);return this.tree.collapse(i===this.root?null:i,t)}async expand(e,t=!1){if(typeof this.root.element>"u")throw new To(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await Be.toPromise(this._onDidRender.event));const i=this.getDataNode(e);if(this.tree.hasElement(i)&&!this.tree.isCollapsible(i)||(i.refreshPromise&&(await this.root.refreshPromise,await Be.toPromise(this._onDidRender.event)),i!==this.root&&!i.refreshPromise&&!this.tree.isCollapsed(i)))return!1;const s=this.tree.expand(i===this.root?null:i,t);return i.refreshPromise&&(await this.root.refreshPromise,await Be.toPromise(this._onDidRender.event)),s}setSelection(e,t){const i=e.map(s=>this.getDataNode(s));this.tree.setSelection(i,t)}getSelection(){return this.tree.getSelection().map(t=>t.element)}setFocus(e,t){const i=e.map(s=>this.getDataNode(s));this.tree.setFocus(i,t)}getFocus(){return this.tree.getFocus().map(t=>t.element)}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getParentElement(e){const t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}getFirstElementChild(e=this.root.element){const t=this.getDataNode(e),i=this.tree.getFirstElementChild(t===this.root?null:t);return i&&i.element}getDataNode(e){const t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new To(this.user,`Data tree node not found: ${e}`);return t}async refreshAndRenderNode(e,t,i,s){await this.refreshNode(e,t,i),!this.disposables.isDisposed&&this.render(e,i,s)}async refreshNode(e,t,i){let s;if(this.subTreeRefreshPromises.forEach((r,o)=>{!s&&ZUe(o,e)&&(s=r.then(()=>this.refreshNode(e,t,i)))}),s)return s;if(e!==this.root&&this.tree.getNode(e).collapsed){e.hasChildren=!!this.dataSource.hasChildren(e.element),e.stale=!0,this.setChildren(e,[],t,i);return}return this.doRefreshSubTree(e,t,i)}async doRefreshSubTree(e,t,i){let s;e.refreshPromise=new Promise(r=>s=r),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)});try{const r=await this.doRefreshNode(e,t,i);e.stale=!1,await e3.settled(r.map(o=>this.doRefreshSubTree(o,t,i)))}finally{s()}}async doRefreshNode(e,t,i){e.hasChildren=!!this.dataSource.hasChildren(e.element);let s;if(!e.hasChildren)s=Promise.resolve(ci.empty());else{const r=this.doGetChildren(e);if(zz(r))s=Promise.resolve(r);else{const o=Lb(800);o.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},a=>null),s=r.finally(()=>o.cancel())}}try{const r=await s;return this.setChildren(e,r,t,i)}catch(r){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),_0(r))return[];throw r}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}}doGetChildren(e){let t=this.refreshPromises.get(e);if(t)return t;const i=this.dataSource.getChildren(e.element);return zz(i)?this.processChildren(i):(t=Od(async()=>this.processChildren(await i)),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){e.element!==null&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(gi))}setChildren(e,t,i,s){const r=[...t];if(e.children.length===0&&r.length===0)return[];const o=new Map,a=new Map;for(const d of e.children)o.set(d.element,d),this.identityProvider&&a.set(d.id,{node:d,collapsed:this.tree.hasElement(d)&&this.tree.isCollapsed(d)});const l=[],c=r.map(d=>{const u=!!this.dataSource.hasChildren(d);if(!this.identityProvider){const m=jR({element:d,parent:e,hasChildren:u,defaultCollapseState:this.getDefaultCollapseState(d)});return u&&m.defaultCollapseState===Co.PreserveOrExpanded&&l.push(m),m}const h=this.identityProvider.getId(d).toString(),f=a.get(h);if(f){const m=f.node;return o.delete(m.element),this.nodes.delete(m.element),this.nodes.set(d,m),m.element=d,m.hasChildren=u,i?f.collapsed?(m.children.forEach(p=>qA(p,b=>this.nodes.delete(b.element))),m.children.splice(0,m.children.length),m.stale=!0):l.push(m):u&&!f.collapsed&&l.push(m),m}const g=jR({element:d,parent:e,id:h,hasChildren:u,defaultCollapseState:this.getDefaultCollapseState(d)});return s&&s.viewState.focus&&s.viewState.focus.indexOf(h)>-1&&s.focus.push(g),s&&s.viewState.selection&&s.viewState.selection.indexOf(h)>-1&&s.selection.push(g),(s&&s.viewState.expanded&&s.viewState.expanded.indexOf(h)>-1||u&&g.defaultCollapseState===Co.PreserveOrExpanded)&&l.push(g),g});for(const d of o.values())qA(d,u=>this.nodes.delete(u.element));for(const d of c)this.nodes.set(d.element,d);return e.children.splice(0,e.children.length,...c),e!==this.root&&this.autoExpandSingleChildren&&c.length===1&&l.length===0&&(c[0].forceExpanded=!0,l.push(c[0])),l}render(e,t,i){const s=e.children.map(o=>this.asTreeElement(o,t)),r=i&&{...i,diffIdentityProvider:i.diffIdentityProvider&&{getId(o){return i.diffIdentityProvider.getId(o.element)}}};this.tree.setChildren(e===this.root?null:e,s,r),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let i;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?i=!1:e.forceExpanded?(i=!1,e.forceExpanded=!1):i=e.defaultCollapseState,{element:e,children:e.hasChildren?ci.map(e.children,s=>this.asTreeElement(s,t)):[],collapsible:e.hasChildren,collapsed:i}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose(),this.tree.dispose()}}class IO{get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(e=>new IO(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}class zUe{constructor(e,t,i,s){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=i,this.onDidChangeTwistieState=s,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,s){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,s)}renderCompressedElements(e,t,i,s){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,i.templateData,s)}renderTwistie(e,t){return e.slow?(t.classList.add(...Vt.asClassNameArray(Qe.treeItemLoading)),!0):(t.classList.remove(...Vt.asClassNameArray(Qe.treeItemLoading)),!1)}disposeElement(e,t,i,s){var r,o;(o=(r=this.renderer).disposeElement)===null||o===void 0||o.call(r,this.nodeMapper.map(e),t,i.templateData,s)}disposeCompressedElements(e,t,i,s){var r,o;(o=(r=this.renderer).disposeCompressedElements)===null||o===void 0||o.call(r,this.compressibleNodeMapperProvider().map(e),t,i.templateData,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=Ns(this.disposables)}}function HUe(n){const e=n&&Poe(n);return e&&{...e,keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{...e.keyboardNavigationLabelProvider,getCompressedNodeKeyboardNavigationLabel(t){return n.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(i=>i.element))}}}}class UUe extends Ooe{constructor(e,t,i,s,r,o,a={}){super(e,t,i,r,o,a),this.compressionDelegate=s,this.compressibleNodeMapper=new SO(l=>new IO(l)),this.filter=a.filter}createTree(e,t,i,s,r){const o=new LO(i),a=s.map(c=>new zUe(c,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),l=HUe(r)||{};return new Voe(e,t,o,a,l)}asTreeElement(e,t){return{incompressible:this.compressionDelegate.isIncompressible(e.element),...super.asTreeElement(e,t)}}updateOptions(e={}){this.tree.updateOptions(e)}render(e,t,i){if(!this.identityProvider)return super.render(e,t);const s=f=>this.identityProvider.getId(f).toString(),r=f=>{const g=new Set;for(const m of f){const p=this.tree.getCompressedTreeNode(m===this.root?null:m);if(p.element)for(const b of p.element.elements)g.add(s(b.element))}return g},o=r(this.tree.getSelection()),a=r(this.tree.getFocus());super.render(e,t,i);const l=this.getSelection();let c=!1;const d=this.getFocus();let u=!1;const h=f=>{const g=f.element;if(g)for(let m=0;m<g.elements.length;m++){const p=s(g.elements[m].element),b=g.elements[g.elements.length-1].element;o.has(p)&&l.indexOf(b)===-1&&(l.push(b),c=!0),a.has(p)&&d.indexOf(b)===-1&&(d.push(b),u=!0)}f.children.forEach(h)};h(this.tree.getCompressedTreeNode(e===this.root?null:e)),c&&this.setSelection(l),u&&this.setFocus(d)}processChildren(e){return this.filter&&(e=ci.filter(e,t=>{const i=this.filter.filter(t,1),s=YUe(i);if(s===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return s===1})),super.processChildren(e)}}function YUe(n){return typeof n=="boolean"?n?1:0:CO(n)?x1(n.visibility):x1(n)}class KUe extends Woe{constructor(e,t,i,s,r,o={}){super(e,t,i,s,o),this.user=e,this.dataSource=r,this.identityProvider=o.identityProvider}createModel(e,t,i){return new kO(e,t,i)}}new it("isMac",jt,L("isMac","Whether the operating system is macOS"));new it("isLinux",Er,L("isLinux","Whether the operating system is Linux"));new it("isWindows",Mr,L("isWindows","Whether the operating system is Windows"));new it("isWeb",rf,L("isWeb","Whether the platform is a web browser"));new it("isMacNative",jt&&!rf,L("isMacNative","Whether the operating system is macOS on a non-browser platform"));new it("isIOS",Lg,L("isIOS","Whether the operating system is iOS"));new it("isMobile",Zte,L("isMobile","Whether the platform is a mobile web browser"));new it("isDevelopment",!1,!0);new it("productQualityType","",L("productQualityType","Quality type of VS Code"));const Zoe="inputFocus",jUe=new it(Zoe,!1,L("inputFocus","Whether keyboard focus is inside an input box"));var fu=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Xi=function(n,e){return function(t,i){e(t,i,n)}};const Jc=ri("listService");class JUe{get lastFocusedList(){return this._lastFocusedWidget}constructor(){this.disposables=new ct,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}setLastFocusedList(e){var t,i;e!==this._lastFocusedWidget&&((t=this._lastFocusedWidget)===null||t===void 0||t.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=e,(i=this._lastFocusedWidget)===null||i===void 0||i.getHTMLElement().classList.add("last-focused"))}register(e,t){if(this._hasCreatedStyleController||(this._hasCreatedStyleController=!0,new _re(Ka(),"").style(R0)),this.lists.some(s=>s.widget===e))throw new Error("Cannot register the same widget multiple times");const i={widget:e,extraContextKeys:t};return this.lists.push(i),w2(e.getHTMLElement())&&this.setLastFocusedList(e),xc(e.onDidFocus(()=>this.setLastFocusedList(e)),Et(()=>this.lists.splice(this.lists.indexOf(i),1)),e.onDidDispose(()=>{this.lists=this.lists.filter(s=>s!==i),this._lastFocusedWidget===e&&this.setLastFocusedList(void 0)}))}dispose(){this.disposables.dispose()}}const D1=new it("listScrollAtBoundary","none");Wt.or(D1.isEqualTo("top"),D1.isEqualTo("both"));Wt.or(D1.isEqualTo("bottom"),D1.isEqualTo("both"));const Goe=new it("listFocus",!0),Boe=new it("treestickyScrollFocused",!1),CT=new it("listSupportsMultiselect",!0);Wt.and(Goe,Wt.not(Zoe),Boe.negate());const MO=new it("listHasSelectionOrFocus",!1),EO=new it("listDoubleSelection",!1),NO=new it("listMultiSelection",!1),LT=new it("listSelectionNavigation",!1),$Ue=new it("listSupportsFind",!0),QUe=new it("treeElementCanCollapse",!1),qUe=new it("treeElementHasParent",!1),eYe=new it("treeElementCanExpand",!1),tYe=new it("treeElementHasChild",!1),iYe=new it("treeFindOpen",!1),Xoe="listTypeNavigationMode",zoe="listAutomaticKeyboardNavigation";function kT(n,e){const t=n.createScoped(e.getHTMLElement());return Goe.bindTo(t),t}function xT(n,e){const t=D1.bindTo(n),i=()=>{const s=e.scrollTop===0,r=e.scrollHeight-e.renderHeight-e.scrollTop<1;s&&r?t.set("both"):s?t.set("top"):r?t.set("bottom"):t.set("none")};return i(),e.onDidScroll(i)}const ym="workbench.list.multiSelectModifier",aC="workbench.list.openMode",la="workbench.list.horizontalScrolling",RO="workbench.list.defaultFindMode",WO="workbench.list.typeNavigationMode",uk="workbench.list.keyboardNavigation",Vl="workbench.list.scrollByPage",AO="workbench.list.defaultFindMatchType",I1="workbench.tree.indent",hk="workbench.tree.renderIndentGuides",Pl="workbench.list.smoothScrolling",Zc="workbench.list.mouseWheelScrollSensitivity",Gc="workbench.list.fastScrollSensitivity",fk="workbench.tree.expandMode",gk="workbench.tree.enableStickyScroll",mk="workbench.tree.stickyScrollMaxItemCount";function Bc(n){return n.getValue(ym)==="alt"}class nYe extends Le{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=Bc(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(ym)&&(this.useAltAsMultipleSelectionModifier=Bc(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:pre(e)}isSelectionRangeChangeEvent(e){return bre(e)}}function TT(n,e){var t;const i=n.get(gn),s=n.get(Ls),r=new ct;return[{...e,keyboardNavigationDelegate:{mightProducePrintableCharacter(a){return s.mightProducePrintableCharacter(a)}},smoothScrolling:!!i.getValue(Pl),mouseWheelScrollSensitivity:i.getValue(Zc),fastScrollSensitivity:i.getValue(Gc),multipleSelectionController:(t=e.multipleSelectionController)!==null&&t!==void 0?t:r.add(new nYe(i)),keyboardNavigationEventFilter:oYe(s),scrollByPage:!!i.getValue(Vl)},r]}let Nj=class extends Hl{constructor(e,t,i,s,r,o,a,l,c){const d=typeof r.horizontalScrolling<"u"?r.horizontalScrolling:!!l.getValue(la),[u,h]=c.invokeFunction(TT,r);super(e,t,i,s,{keyboardSupport:!1,...u,horizontalScrolling:d}),this.disposables.add(h),this.contextKeyService=kT(o,this),this.disposables.add(xT(this.contextKeyService,this)),this.listSupportsMultiSelect=CT.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(r.multipleSelectionSupport!==!1),LT.bindTo(this.contextKeyService).set(!!r.selectionNavigation),this.listHasSelectionOrFocus=MO.bindTo(this.contextKeyService),this.listDoubleSelection=EO.bindTo(this.contextKeyService),this.listMultiSelection=NO.bindTo(this.contextKeyService),this.horizontalScrolling=r.horizontalScrolling,this._useAltAsMultipleSelectionModifier=Bc(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(r.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const g=this.getSelection(),m=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(g.length>0||m.length>0),this.listMultiSelection.set(g.length>1),this.listDoubleSelection.set(g.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const g=this.getSelection(),m=this.getFocus();this.listHasSelectionOrFocus.set(g.length>0||m.length>0)})),this.disposables.add(l.onDidChangeConfiguration(g=>{g.affectsConfiguration(ym)&&(this._useAltAsMultipleSelectionModifier=Bc(l));let m={};if(g.affectsConfiguration(la)&&this.horizontalScrolling===void 0){const p=!!l.getValue(la);m={...m,horizontalScrolling:p}}if(g.affectsConfiguration(Vl)){const p=!!l.getValue(Vl);m={...m,scrollByPage:p}}if(g.affectsConfiguration(Pl)){const p=!!l.getValue(Pl);m={...m,smoothScrolling:p}}if(g.affectsConfiguration(Zc)){const p=l.getValue(Zc);m={...m,mouseWheelScrollSensitivity:p}}if(g.affectsConfiguration(Gc)){const p=l.getValue(Gc);m={...m,fastScrollSensitivity:p}}Object.keys(m).length>0&&this.updateOptions(m)})),this.navigator=new Hoe(this,{configurationService:l,...r}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?Ew(e):R0)}};Nj=fu([Xi(5,oi),Xi(6,Jc),Xi(7,gn),Xi(8,Si)],Nj);let Rj=class extends cUe{constructor(e,t,i,s,r,o,a,l,c){const d=typeof r.horizontalScrolling<"u"?r.horizontalScrolling:!!l.getValue(la),[u,h]=c.invokeFunction(TT,r);super(e,t,i,s,{keyboardSupport:!1,...u,horizontalScrolling:d}),this.disposables=new ct,this.disposables.add(h),this.contextKeyService=kT(o,this),this.disposables.add(xT(this.contextKeyService,this.widget)),this.horizontalScrolling=r.horizontalScrolling,this.listSupportsMultiSelect=CT.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(r.multipleSelectionSupport!==!1),LT.bindTo(this.contextKeyService).set(!!r.selectionNavigation),this._useAltAsMultipleSelectionModifier=Bc(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(r.overrideStyles),this.disposables.add(l.onDidChangeConfiguration(g=>{g.affectsConfiguration(ym)&&(this._useAltAsMultipleSelectionModifier=Bc(l));let m={};if(g.affectsConfiguration(la)&&this.horizontalScrolling===void 0){const p=!!l.getValue(la);m={...m,horizontalScrolling:p}}if(g.affectsConfiguration(Vl)){const p=!!l.getValue(Vl);m={...m,scrollByPage:p}}if(g.affectsConfiguration(Pl)){const p=!!l.getValue(Pl);m={...m,smoothScrolling:p}}if(g.affectsConfiguration(Zc)){const p=l.getValue(Zc);m={...m,mouseWheelScrollSensitivity:p}}if(g.affectsConfiguration(Gc)){const p=l.getValue(Gc);m={...m,fastScrollSensitivity:p}}Object.keys(m).length>0&&this.updateOptions(m)})),this.navigator=new Hoe(this,{configurationService:l,...r}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?Ew(e):R0)}dispose(){this.disposables.dispose(),super.dispose()}};Rj=fu([Xi(5,oi),Xi(6,Jc),Xi(7,gn),Xi(8,Si)],Rj);let Wj=class extends ST{constructor(e,t,i,s,r,o,a,l,c,d){const u=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:!!c.getValue(la),[h,f]=d.invokeFunction(TT,o);super(e,t,i,s,r,{keyboardSupport:!1,...h,horizontalScrolling:u}),this.disposables.add(f),this.contextKeyService=kT(a,this),this.disposables.add(xT(this.contextKeyService,this)),this.listSupportsMultiSelect=CT.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),LT.bindTo(this.contextKeyService).set(!!o.selectionNavigation),this.listHasSelectionOrFocus=MO.bindTo(this.contextKeyService),this.listDoubleSelection=EO.bindTo(this.contextKeyService),this.listMultiSelection=NO.bindTo(this.contextKeyService),this.horizontalScrolling=o.horizontalScrolling,this._useAltAsMultipleSelectionModifier=Bc(c),this.disposables.add(this.contextKeyService),this.disposables.add(l.register(this)),this.updateStyles(o.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const m=this.getSelection(),p=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(m.length>0||p.length>0),this.listMultiSelection.set(m.length>1),this.listDoubleSelection.set(m.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const m=this.getSelection(),p=this.getFocus();this.listHasSelectionOrFocus.set(m.length>0||p.length>0)})),this.disposables.add(c.onDidChangeConfiguration(m=>{m.affectsConfiguration(ym)&&(this._useAltAsMultipleSelectionModifier=Bc(c));let p={};if(m.affectsConfiguration(la)&&this.horizontalScrolling===void 0){const b=!!c.getValue(la);p={...p,horizontalScrolling:b}}if(m.affectsConfiguration(Vl)){const b=!!c.getValue(Vl);p={...p,scrollByPage:b}}if(m.affectsConfiguration(Pl)){const b=!!c.getValue(Pl);p={...p,smoothScrolling:b}}if(m.affectsConfiguration(Zc)){const b=c.getValue(Zc);p={...p,mouseWheelScrollSensitivity:b}}if(m.affectsConfiguration(Gc)){const b=c.getValue(Gc);p={...p,fastScrollSensitivity:b}}Object.keys(p).length>0&&this.updateOptions(p)})),this.navigator=new sYe(this,{configurationService:c,...o}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?Ew(e):R0)}dispose(){this.disposables.dispose(),super.dispose()}};Wj=fu([Xi(6,oi),Xi(7,Jc),Xi(8,gn),Xi(9,Si)],Wj);class FO extends Le{constructor(e,t){var i;super(),this.widget=e,this._onDidOpen=this._register(new ue),this.onDidOpen=this._onDidOpen.event,this._register(Be.filter(this.widget.onDidChangeSelection,s=>Vu(s.browserEvent))(s=>this.onSelectionFromKeyboard(s))),this._register(this.widget.onPointer(s=>this.onPointer(s.element,s.browserEvent))),this._register(this.widget.onMouseDblClick(s=>this.onMouseDblClick(s.element,s.browserEvent))),typeof t?.openOnSingleClick!="boolean"&&t?.configurationService?(this.openOnSingleClick=t?.configurationService.getValue(aC)!=="doubleClick",this._register(t?.configurationService.onDidChangeConfiguration(s=>{s.affectsConfiguration(aC)&&(this.openOnSingleClick=t?.configurationService.getValue(aC)!=="doubleClick")}))):this.openOnSingleClick=(i=t?.openOnSingleClick)!==null&&i!==void 0?i:!0}onSelectionFromKeyboard(e){if(e.elements.length!==1)return;const t=e.browserEvent,i=typeof t.preserveFocus=="boolean"?t.preserveFocus:!0,s=typeof t.pinned=="boolean"?t.pinned:!i;this._open(this.getSelectedElement(),i,s,!1,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick||t.detail===2)return;const s=t.button===1,r=!0,o=s,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,r,o,a,t)}onMouseDblClick(e,t){if(!t)return;const i=t.target;if(i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&t.offsetX<16)return;const r=!1,o=!0,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,r,o,a,t)}_open(e,t,i,s,r){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:i,revealIfVisible:!0},sideBySide:s,element:e,browserEvent:r})}}class Hoe extends FO{constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class sYe extends FO{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class rYe extends FO{constructor(e,t){super(e,t)}getSelectedElement(){var e;return(e=this.widget.getSelection()[0])!==null&&e!==void 0?e:void 0}}function oYe(n){let e=!1;return t=>{if(t.toKeyCodeChord().isModifierKey())return!1;if(e)return e=!1,!1;const i=n.softDispatch(t,t.target);return i.kind===1?(e=!0,!1):(e=!1,i.kind===0)}}let eF=class extends TO{constructor(e,t,i,s,r,o,a,l,c){const{options:d,getTypeNavigationMode:u,disposable:h}=o.invokeFunction(Fw,r);super(e,t,i,s,d),this.disposables.add(h),this.internals=new Zg(this,r,u,r.overrideStyles,a,l,c),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};eF=fu([Xi(5,Si),Xi(6,oi),Xi(7,Jc),Xi(8,gn)],eF);let Aj=class extends Voe{constructor(e,t,i,s,r,o,a,l,c){const{options:d,getTypeNavigationMode:u,disposable:h}=o.invokeFunction(Fw,r);super(e,t,i,s,d),this.disposables.add(h),this.internals=new Zg(this,r,u,r.overrideStyles,a,l,c),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};Aj=fu([Xi(5,Si),Xi(6,oi),Xi(7,Jc),Xi(8,gn)],Aj);let Fj=class extends KUe{constructor(e,t,i,s,r,o,a,l,c,d){const{options:u,getTypeNavigationMode:h,disposable:f}=a.invokeFunction(Fw,o);super(e,t,i,s,r,u),this.disposables.add(f),this.internals=new Zg(this,o,h,o.overrideStyles,l,c,d),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles!==void 0&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};Fj=fu([Xi(6,Si),Xi(7,oi),Xi(8,Jc),Xi(9,gn)],Fj);let Vj=class extends Ooe{get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,i,s,r,o,a,l,c,d){const{options:u,getTypeNavigationMode:h,disposable:f}=a.invokeFunction(Fw,o);super(e,t,i,s,r,u),this.disposables.add(f),this.internals=new Zg(this,o,h,o.overrideStyles,l,c,d),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};Vj=fu([Xi(6,Si),Xi(7,oi),Xi(8,Jc),Xi(9,gn)],Vj);let Pj=class extends UUe{constructor(e,t,i,s,r,o,a,l,c,d,u){const{options:h,getTypeNavigationMode:f,disposable:g}=l.invokeFunction(Fw,a);super(e,t,i,s,r,o,h),this.disposables.add(g),this.internals=new Zg(this,a,f,a.overrideStyles,c,d,u),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};Pj=fu([Xi(7,Si),Xi(8,oi),Xi(9,Jc),Xi(10,gn)],Pj);function Uoe(n){const e=n.getValue(RO);if(e==="highlight")return Wd.Highlight;if(e==="filter")return Wd.Filter;const t=n.getValue(uk);if(t==="simple"||t==="highlight")return Wd.Highlight;if(t==="filter")return Wd.Filter}function Yoe(n){const e=n.getValue(AO);if(e==="fuzzy")return Og.Fuzzy;if(e==="contiguous")return Og.Contiguous}function Fw(n,e){var t;const i=n.get(gn),s=n.get(I0),r=n.get(oi),o=n.get(Si),a=()=>{const f=r.getContextKeyValue(Xoe);if(f==="automatic")return mc.Automatic;if(f==="trigger"||r.getContextKeyValue(zoe)===!1)return mc.Trigger;const m=i.getValue(WO);if(m==="automatic")return mc.Automatic;if(m==="trigger")return mc.Trigger},l=e.horizontalScrolling!==void 0?e.horizontalScrolling:!!i.getValue(la),[c,d]=o.invokeFunction(TT,e),u=e.paddingBottom,h=e.renderIndentGuides!==void 0?e.renderIndentGuides:i.getValue(hk);return{getTypeNavigationMode:a,disposable:d,options:{keyboardSupport:!1,...c,indent:typeof i.getValue(I1)=="number"?i.getValue(I1):void 0,renderIndentGuides:h,smoothScrolling:!!i.getValue(Pl),defaultFindMode:Uoe(i),defaultFindMatchType:Yoe(i),horizontalScrolling:l,scrollByPage:!!i.getValue(Vl),paddingBottom:u,hideTwistiesOfChildlessElements:e.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:(t=e.expandOnlyOnTwistieClick)!==null&&t!==void 0?t:i.getValue(fk)==="doubleClick",contextViewProvider:s,findWidgetStyles:P8e,enableStickyScroll:!!i.getValue(gk),stickyScrollMaxItemCount:Number(i.getValue(mk))}}}let Zg=class{get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,i,s,r,o,a){var l;this.tree=e,this.disposables=[],this.contextKeyService=kT(r,e),this.disposables.push(xT(this.contextKeyService,e)),this.listSupportsMultiSelect=CT.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(t.multipleSelectionSupport!==!1),LT.bindTo(this.contextKeyService).set(!!t.selectionNavigation),this.listSupportFindWidget=$Ue.bindTo(this.contextKeyService),this.listSupportFindWidget.set((l=t.findWidgetEnabled)!==null&&l!==void 0?l:!0),this.hasSelectionOrFocus=MO.bindTo(this.contextKeyService),this.hasDoubleSelection=EO.bindTo(this.contextKeyService),this.hasMultiSelection=NO.bindTo(this.contextKeyService),this.treeElementCanCollapse=QUe.bindTo(this.contextKeyService),this.treeElementHasParent=qUe.bindTo(this.contextKeyService),this.treeElementCanExpand=eYe.bindTo(this.contextKeyService),this.treeElementHasChild=tYe.bindTo(this.contextKeyService),this.treeFindOpen=iYe.bindTo(this.contextKeyService),this.treeStickyScrollFocused=Boe.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=Bc(a),this.updateStyleOverrides(s);const d=()=>{const h=e.getFocus()[0];if(!h)return;const f=e.getNode(h);this.treeElementCanCollapse.set(f.collapsible&&!f.collapsed),this.treeElementHasParent.set(!!e.getParentElement(h)),this.treeElementCanExpand.set(f.collapsible&&f.collapsed),this.treeElementHasChild.set(!!e.getFirstElementChild(h))},u=new Set;u.add(Xoe),u.add(zoe),this.disposables.push(this.contextKeyService,o.register(e),e.onDidChangeSelection(()=>{const h=e.getSelection(),f=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(h.length>0||f.length>0),this.hasMultiSelection.set(h.length>1),this.hasDoubleSelection.set(h.length===2)})}),e.onDidChangeFocus(()=>{const h=e.getSelection(),f=e.getFocus();this.hasSelectionOrFocus.set(h.length>0||f.length>0),d()}),e.onDidChangeCollapseState(d),e.onDidChangeModel(d),e.onDidChangeFindOpenState(h=>this.treeFindOpen.set(h)),e.onDidChangeStickyScrollFocused(h=>this.treeStickyScrollFocused.set(h)),a.onDidChangeConfiguration(h=>{let f={};if(h.affectsConfiguration(ym)&&(this._useAltAsMultipleSelectionModifier=Bc(a)),h.affectsConfiguration(I1)){const g=a.getValue(I1);f={...f,indent:g}}if(h.affectsConfiguration(hk)&&t.renderIndentGuides===void 0){const g=a.getValue(hk);f={...f,renderIndentGuides:g}}if(h.affectsConfiguration(Pl)){const g=!!a.getValue(Pl);f={...f,smoothScrolling:g}}if(h.affectsConfiguration(RO)||h.affectsConfiguration(uk)){const g=Uoe(a);f={...f,defaultFindMode:g}}if(h.affectsConfiguration(WO)||h.affectsConfiguration(uk)){const g=i();f={...f,typeNavigationMode:g}}if(h.affectsConfiguration(AO)){const g=Yoe(a);f={...f,defaultFindMatchType:g}}if(h.affectsConfiguration(la)&&t.horizontalScrolling===void 0){const g=!!a.getValue(la);f={...f,horizontalScrolling:g}}if(h.affectsConfiguration(Vl)){const g=!!a.getValue(Vl);f={...f,scrollByPage:g}}if(h.affectsConfiguration(fk)&&t.expandOnlyOnTwistieClick===void 0&&(f={...f,expandOnlyOnTwistieClick:a.getValue(fk)==="doubleClick"}),h.affectsConfiguration(gk)){const g=a.getValue(gk);f={...f,enableStickyScroll:g}}if(h.affectsConfiguration(mk)){const g=Math.max(1,a.getValue(mk));f={...f,stickyScrollMaxItemCount:g}}if(h.affectsConfiguration(Zc)){const g=a.getValue(Zc);f={...f,mouseWheelScrollSensitivity:g}}if(h.affectsConfiguration(Gc)){const g=a.getValue(Gc);f={...f,fastScrollSensitivity:g}}Object.keys(f).length>0&&e.updateOptions(f)}),this.contextKeyService.onDidChangeContext(h=>{h.affectsSome(u)&&e.updateOptions({typeNavigationMode:i()})})),this.navigator=new rYe(e,{configurationService:a,...t}),this.disposables.push(this.navigator)}updateOptions(e){e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){this.tree.style(e?Ew(e):R0)}dispose(){this.disposables=Ns(this.disposables)}};Zg=fu([Xi(4,oi),Xi(5,Jc),Xi(6,gn)],Zg);const aYe=Ss.as(dm.Configuration);aYe.registerConfiguration({id:"workbench",order:7,title:L("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[ym]:{type:"string",enum:["ctrlCmd","alt"],markdownEnumDescriptions:[L("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),L("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:L({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[aC]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:L({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[la]:{type:"boolean",default:!1,description:L("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[Vl]:{type:"boolean",default:!1,description:L("list.scrollByPage","Controls whether clicks in the scrollbar scroll page by page.")},[I1]:{type:"number",default:8,minimum:4,maximum:40,description:L("tree indent setting","Controls tree indentation in pixels.")},[hk]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:L("render tree indent guides","Controls whether the tree should render indent guides.")},[Pl]:{type:"boolean",default:!1,description:L("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[Zc]:{type:"number",default:1,markdownDescription:L("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[Gc]:{type:"number",default:5,markdownDescription:L("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[RO]:{type:"string",enum:["highlight","filter"],enumDescriptions:[L("defaultFindModeSettingKey.highlight","Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements."),L("defaultFindModeSettingKey.filter","Filter elements when searching.")],default:"highlight",description:L("defaultFindModeSettingKey","Controls the default find mode for lists and trees in the workbench.")},[uk]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[L("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),L("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),L("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:L("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter."),deprecated:!0,deprecationMessage:L("keyboardNavigationSettingKeyDeprecated","Please use 'workbench.list.defaultFindMode' and	'workbench.list.typeNavigationMode' instead.")},[AO]:{type:"string",enum:["fuzzy","contiguous"],enumDescriptions:[L("defaultFindMatchTypeSettingKey.fuzzy","Use fuzzy matching when searching."),L("defaultFindMatchTypeSettingKey.contiguous","Use contiguous matching when searching.")],default:"fuzzy",description:L("defaultFindMatchTypeSettingKey","Controls the type of matching used when searching lists and trees in the workbench.")},[fk]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:L("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[gk]:{type:"boolean",default:!0,description:L("sticky scroll","Controls whether sticky scrolling is enabled in trees.")},[mk]:{type:"number",minimum:1,default:7,markdownDescription:L("sticky scroll maximum items","Controls the number of sticky elements displayed in the tree when `#workbench.tree.enableStickyScroll#` is enabled.")},[WO]:{type:"string",enum:["automatic","trigger"],default:"automatic",markdownDescription:L("typeNavigationMode2","Controls how type navigation works in lists and trees in the workbench. When set to `trigger`, type navigation begins once the `list.triggerTypeNavigation` command is run.")}}});class gg extends Le{constructor(e,t){var i;super(),this.options=t,this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=(i=t?.supportIcons)!==null&&i!==void 0?i:!1,this.domNode=dt(e,St("span.monaco-highlighted-label"))}get element(){return this.domNode}set(e,t=[],i="",s){e||(e=""),s&&(e=gg.escapeNewLines(e,t)),!(this.didEverRender&&this.text===e&&this.title===i&&Ro(this.highlights,t))&&(this.text=e,this.title=i,this.highlights=t,this.render())}render(){var e,t,i,s;const r=[];let o=0;for(const a of this.highlights){if(a.end===a.start)continue;if(o<a.start){const d=this.text.substring(o,a.start);this.supportIcons?r.push(...hg(d)):r.push(d),o=a.start}const l=this.text.substring(o,a.end),c=St("span.highlight",void 0,...this.supportIcons?hg(l):[l]);a.extraClasses&&c.classList.add(...a.extraClasses),r.push(c),o=a.end}if(o<this.text.length){const a=this.text.substring(o);this.supportIcons?r.push(...hg(a)):r.push(a)}if(Ir(this.domNode,...r),!((t=(e=this.options)===null||e===void 0?void 0:e.hoverDelegate)===null||t===void 0)&&t.showNativeHover)this.domNode.title=this.title;else if(!this.customHover&&this.title!==""){const a=(s=(i=this.options)===null||i===void 0?void 0:i.hoverDelegate)!==null&&s!==void 0?s:_o("mouse");this.customHover=this._register(Kc().setupUpdatableHover(a,this.domNode,this.title))}else this.customHover&&this.customHover.update(this.title);this.didEverRender=!0}static escapeNewLines(e,t){let i=0,s=0;return e.replace(/\r\n|\r|\n/g,(r,o)=>{s=r===`\r
`?-1:0,o+=i;for(const a of t)a.end<=o||(a.start>=o&&(a.start+=s),a.end>=o&&(a.end+=s));return i+=s,""})}}class hv{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set className(e){this.disposed||e===this._className||(this._className=e,this._element.className=e)}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}}class Oj extends Le{constructor(e,t){var i;super(),this.customHovers=new Map,this.creationOptions=t,this.domNode=this._register(new hv(dt(e,St(".monaco-icon-label")))),this.labelContainer=dt(this.domNode.element,St(".monaco-icon-label-container")),this.nameContainer=dt(this.labelContainer,St("span.monaco-icon-name-container")),t?.supportHighlights||t?.supportIcons?this.nameNode=this._register(new dYe(this.nameContainer,!!t.supportIcons)):this.nameNode=new lYe(this.nameContainer),this.hoverDelegate=(i=t?.hoverDelegate)!==null&&i!==void 0?i:_o("mouse")}get element(){return this.domNode.element}setLabel(e,t,i){var s;const r=["monaco-icon-label"],o=["monaco-icon-label-container"];let a="";i&&(i.extraClasses&&r.push(...i.extraClasses),i.italic&&r.push("italic"),i.strikethrough&&r.push("strikethrough"),i.disabledCommand&&o.push("disabled"),i.title&&(typeof i.title=="string"?a+=i.title:a+=e));const l=this.domNode.element.querySelector(".monaco-icon-label-iconpath");if(i?.iconPath){let c;!l||!Es(l)?(c=St(".monaco-icon-label-iconpath"),this.domNode.element.prepend(c)):c=l,c.style.backgroundImage=Qd(i?.iconPath)}else l&&l.remove();if(this.domNode.className=r.join(" "),this.domNode.element.setAttribute("aria-label",a),this.labelContainer.className=o.join(" "),this.setupHover(i?.descriptionTitle?this.labelContainer:this.element,i?.title),this.nameNode.setLabel(e,i),t||this.descriptionNode){const c=this.getOrCreateDescriptionNode();c instanceof gg?(c.set(t||"",i?i.descriptionMatches:void 0,void 0,i?.labelEscapeNewLines),this.setupHover(c.element,i?.descriptionTitle)):(c.textContent=t&&i?.labelEscapeNewLines?gg.escapeNewLines(t,[]):t||"",this.setupHover(c.element,i?.descriptionTitle||""),c.empty=!t)}if(i?.suffix||this.suffixNode){const c=this.getOrCreateSuffixNode();c.textContent=(s=i?.suffix)!==null&&s!==void 0?s:""}}setupHover(e,t){const i=this.customHovers.get(e);if(i&&(i.dispose(),this.customHovers.delete(e)),!t){e.removeAttribute("title");return}if(this.hoverDelegate.showNativeHover)(function(r,o){Dr(o)?r.title=Yse(o):o?.markdownNotSupportedFallback?r.title=o.markdownNotSupportedFallback:r.removeAttribute("title")})(e,t);else{const s=Kc().setupUpdatableHover(this.hoverDelegate,e,t);s&&this.customHovers.set(e,s)}}dispose(){super.dispose();for(const e of this.customHovers.values())e.dispose();this.customHovers.clear()}getOrCreateSuffixNode(){if(!this.suffixNode){const e=this._register(new hv(X5e(this.nameContainer,St("span.monaco-icon-suffix-container"))));this.suffixNode=this._register(new hv(dt(e.element,St("span.label-suffix"))))}return this.suffixNode}getOrCreateDescriptionNode(){var e;if(!this.descriptionNode){const t=this._register(new hv(dt(this.labelContainer,St("span.monaco-icon-description-container"))));!((e=this.creationOptions)===null||e===void 0)&&e.supportDescriptionHighlights?this.descriptionNode=this._register(new gg(dt(t.element,St("span.label-description")),{supportIcons:!!this.creationOptions.supportIcons})):this.descriptionNode=this._register(new hv(dt(t.element,St("span.label-description"))))}return this.descriptionNode}}class lYe{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&Ro(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=dt(this.container,St("a.label-name",{id:t?.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let i=0;i<e.length;i++){const s=e[i],r=t?.domId&&`${t?.domId}_${i}`;dt(this.container,St("a.label-name",{id:r,"data-icon-label-count":e.length,"data-icon-label-index":i,role:"treeitem"},s)),i<e.length-1&&dt(this.container,St("span.label-separator",void 0,t?.separator||"/"))}}}}function cYe(n,e,t){if(!t)return;let i=0;return n.map(s=>{const r={start:i,end:i+s.length},o=t.map(a=>Ys.intersect(r,a)).filter(a=>!Ys.isEmpty(a)).map(({start:a,end:l})=>({start:a-i,end:l-i}));return i=r.end+e.length,o})}class dYe extends Le{constructor(e,t){super(),this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&Ro(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=this._register(new gg(dt(this.container,St("a.label-name",{id:t?.domId})),{supportIcons:this.supportIcons}))),this.singleLabel.set(e,t?.matches,void 0,t?.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const i=t?.separator||"/",s=cYe(e,i,t?.matches);for(let r=0;r<e.length;r++){const o=e[r],a=s?s[r]:void 0,l=t?.domId&&`${t?.domId}_${r}`,c=St("a.label-name",{id:l,"data-icon-label-count":e.length,"data-icon-label-index":r,role:"treeitem"});this._register(new gg(dt(this.container,c),{supportIcons:this.supportIcons})).set(o,a,void 0,t?.labelEscapeNewLines),r<e.length-1&&dt(c,St("span.label-separator",void 0,i))}}}}const mS=St;class VO extends Le{constructor(e,t,i){super(),this.os=t,this.keyElements=new Set,this.options=i||Object.create(null);const s=this.options.keybindingLabelForeground;this.domNode=dt(e,mS(".monaco-keybinding")),s&&(this.domNode.style.color=s),this.hover=this._register(Kc().setupUpdatableHover(_o("mouse"),this.domNode,"")),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&VO.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){var e;if(this.clear(),this.keybinding){const t=this.keybinding.getChords();t[0]&&this.renderChord(this.domNode,t[0],this.matches?this.matches.firstPart:null);for(let s=1;s<t.length;s++)dt(this.domNode,mS("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderChord(this.domNode,t[s],this.matches?this.matches.chordPart:null);const i=(e=this.options.disableTitle)!==null&&e!==void 0&&e?void 0:this.keybinding.getAriaLabel()||void 0;this.hover.update(i),this.domNode.setAttribute("aria-label",i||"")}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.didEverRender=!0}clear(){Rl(this.domNode),this.keyElements.clear()}renderChord(e,t,i){const s=_O.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,s.ctrlKey,!!i?.ctrlKey,s.separator),t.shiftKey&&this.renderKey(e,s.shiftKey,!!i?.shiftKey,s.separator),t.altKey&&this.renderKey(e,s.altKey,!!i?.altKey,s.separator),t.metaKey&&this.renderKey(e,s.metaKey,!!i?.metaKey,s.separator);const r=t.keyLabel;r&&this.renderKey(e,r,!!i?.keyCode,"")}renderKey(e,t,i,s){dt(e,this.createKeyElement(t,i?".highlight":"")),s&&dt(e,mS("span.monaco-keybinding-key-separator",void 0,s))}renderUnbound(e){dt(e,this.createKeyElement(L("unbound","Unbound")))}createKeyElement(e,t=""){const i=mS("span.monaco-keybinding-key"+t,void 0,e);return this.keyElements.add(i),this.options.keybindingLabelBackground&&(i.style.backgroundColor=this.options.keybindingLabelBackground),this.options.keybindingLabelBorder&&(i.style.borderColor=this.options.keybindingLabelBorder),this.options.keybindingLabelBottomBorder&&(i.style.borderBottomColor=this.options.keybindingLabelBottomBorder),this.options.keybindingLabelShadow&&(i.style.boxShadow=`inset 0 -1px 0 ${this.options.keybindingLabelShadow}`),i}static areSame(e,t){return e===t||!e&&!t?!0:!!e&&!!t&&Ro(e.firstPart,t.firstPart)&&Ro(e.chordPart,t.chordPart)}}const Zj=new cu(()=>{const n=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:n,collatorIsNumeric:n.resolvedOptions().numeric}});function uYe(n,e,t=!1){const i=n||"",s=e||"",r=Zj.value.collator.compare(i,s);return Zj.value.collatorIsNumeric&&r===0&&i!==s?i<s?-1:1:r}function hYe(n,e,t){const i=n.toLowerCase(),s=e.toLowerCase(),r=fYe(n,e,t);if(r)return r;const o=i.endsWith(t),a=s.endsWith(t);if(o!==a)return o?-1:1;const l=uYe(i,s);return l!==0?l:i.localeCompare(s)}function fYe(n,e,t){const i=n.toLowerCase(),s=e.toLowerCase(),r=i.startsWith(t),o=s.startsWith(t);if(r!==o)return r?-1:1;if(r&&o){if(i.length<s.length)return-1;if(i.length>s.length)return 1}return 0}var DT=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},tF=function(n,e){return function(t,i){e(t,i,n)}},iF;const cl=St;class Koe{constructor(e,t,i){this.index=e,this.hasCheckbox=t,this._hidden=!1,this._init=new cu(()=>{var s;const r=(s=i.label)!==null&&s!==void 0?s:"",o=Gv(r).text.trim(),a=i.ariaLabel||[r,this.saneDescription,this.saneDetail].map(l=>yGe(l)).filter(l=>!!l).join(", ");return{saneLabel:r,saneSortLabel:o,saneAriaLabel:a}}),this._saneDescription=i.description,this._saneTooltip=i.tooltip}get saneLabel(){return this._init.value.saneLabel}get saneSortLabel(){return this._init.value.saneSortLabel}get saneAriaLabel(){return this._init.value.saneAriaLabel}get element(){return this._element}set element(e){this._element=e}get hidden(){return this._hidden}set hidden(e){this._hidden=e}get saneDescription(){return this._saneDescription}set saneDescription(e){this._saneDescription=e}get saneDetail(){return this._saneDetail}set saneDetail(e){this._saneDetail=e}get saneTooltip(){return this._saneTooltip}set saneTooltip(e){this._saneTooltip=e}get labelHighlights(){return this._labelHighlights}set labelHighlights(e){this._labelHighlights=e}get descriptionHighlights(){return this._descriptionHighlights}set descriptionHighlights(e){this._descriptionHighlights=e}get detailHighlights(){return this._detailHighlights}set detailHighlights(e){this._detailHighlights=e}}class ar extends Koe{constructor(e,t,i,s,r,o){var a,l,c;super(e,t,r),this.fireButtonTriggered=i,this._onChecked=s,this.item=r,this._separator=o,this._checked=!1,this.onChecked=t?Be.map(Be.filter(this._onChecked.event,d=>d.element===this),d=>d.checked):Be.None,this._saneDetail=r.detail,this._labelHighlights=(a=r.highlights)===null||a===void 0?void 0:a.label,this._descriptionHighlights=(l=r.highlights)===null||l===void 0?void 0:l.description,this._detailHighlights=(c=r.highlights)===null||c===void 0?void 0:c.detail}get separator(){return this._separator}set separator(e){this._separator=e}get checked(){return this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire({element:this,checked:e}))}get checkboxDisabled(){return!!this.item.disabled}}var oc;(function(n){n[n.NONE=0]="NONE",n[n.MOUSE_HOVER=1]="MOUSE_HOVER",n[n.ACTIVE_ITEM=2]="ACTIVE_ITEM"})(oc||(oc={}));class Iu extends Koe{constructor(e,t,i){super(e,!1,i),this.fireSeparatorButtonTriggered=t,this.separator=i,this.children=new Array,this.focusInsideSeparator=oc.NONE}}class gYe{getHeight(e){return e instanceof Iu?30:e.saneDetail?44:22}getTemplateId(e){return e instanceof ar?M1.ID:Vw.ID}}class mYe{getWidgetAriaLabel(){return L("quickInput","Quick Input")}getAriaLabel(e){var t;return!((t=e.separator)===null||t===void 0)&&t.label?`${e.saneAriaLabel}, ${e.separator.label}`:e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(e){return e.hasCheckbox?"checkbox":"option"}isChecked(e){if(!(!e.hasCheckbox||!(e instanceof ar)))return{get value(){return e.checked},onDidChange:t=>e.onChecked(()=>t())}}}class joe{constructor(e){this.hoverDelegate=e}renderTemplate(e){const t=Object.create(null);t.toDisposeElement=new ct,t.toDisposeTemplate=new ct,t.entry=dt(e,cl(".quick-input-list-entry"));const i=dt(t.entry,cl("label.quick-input-list-label"));t.toDisposeTemplate.add(ws(i,Ge.CLICK,c=>{t.checkbox.offsetParent||c.preventDefault()})),t.checkbox=dt(i,cl("input.quick-input-list-checkbox")),t.checkbox.type="checkbox";const s=dt(i,cl(".quick-input-list-rows")),r=dt(s,cl(".quick-input-list-row")),o=dt(s,cl(".quick-input-list-row"));t.label=new Oj(r,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.label),t.icon=OV(t.label.element,cl(".quick-input-list-icon"));const a=dt(r,cl(".quick-input-list-entry-keybinding"));t.keybinding=new VO(a,Ma),t.toDisposeTemplate.add(t.keybinding);const l=dt(o,cl(".quick-input-list-label-meta"));return t.detail=new Oj(l,{supportHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.detail),t.separator=dt(t.entry,cl(".quick-input-list-separator")),t.actionBar=new zh(t.entry,this.hoverDelegate?{hoverDelegate:this.hoverDelegate}:void 0),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.add(t.actionBar),t}disposeTemplate(e){e.toDisposeElement.dispose(),e.toDisposeTemplate.dispose()}disposeElement(e,t,i){i.toDisposeElement.clear(),i.actionBar.clear()}}let M1=iF=class extends joe{constructor(e,t){super(e),this.themeService=t,this._itemsWithSeparatorsFrequency=new Map}get templateId(){return iF.ID}renderTemplate(e){const t=super.renderTemplate(e);return t.toDisposeTemplate.add(ws(t.checkbox,Ge.CHANGE,i=>{t.element.checked=t.checkbox.checked})),t}renderElement(e,t,i){var s,r,o;const a=e.element;i.element=a,a.element=(s=i.entry)!==null&&s!==void 0?s:void 0;const l=a.item;i.checkbox.checked=a.checked,i.toDisposeElement.add(a.onChecked(m=>i.checkbox.checked=m)),i.checkbox.disabled=a.checkboxDisabled;const{labelHighlights:c,descriptionHighlights:d,detailHighlights:u}=a;if(l.iconPath){const m=z2(this.themeService.getColorTheme().type)?l.iconPath.dark:(r=l.iconPath.light)!==null&&r!==void 0?r:l.iconPath.dark,p=Ft.revive(m);i.icon.className="quick-input-list-icon",i.icon.style.backgroundImage=Qd(p)}else i.icon.style.backgroundImage="",i.icon.className=l.iconClass?`quick-input-list-icon ${l.iconClass}`:"";let h;!a.saneTooltip&&a.saneDescription&&(h={markdown:{value:a.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:a.saneDescription});const f={matches:c||[],descriptionTitle:h,descriptionMatches:d||[],labelEscapeNewLines:!0};if(f.extraClasses=l.iconClasses,f.italic=l.italic,f.strikethrough=l.strikethrough,i.entry.classList.remove("quick-input-list-separator-as-item"),i.label.setLabel(a.saneLabel,a.saneDescription,f),i.keybinding.set(l.keybinding),a.saneDetail){let m;a.saneTooltip||(m={markdown:{value:a.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:a.saneDetail}),i.detail.element.style.display="",i.detail.setLabel(a.saneDetail,void 0,{matches:u,title:m,labelEscapeNewLines:!0})}else i.detail.element.style.display="none";!((o=a.separator)===null||o===void 0)&&o.label?(i.separator.textContent=a.separator.label,i.separator.style.display="",this.addItemWithSeparator(a)):i.separator.style.display="none",i.entry.classList.toggle("quick-input-list-separator-border",!!a.separator);const g=l.buttons;g&&g.length?(i.actionBar.push(g.map((m,p)=>dk(m,`id-${p}`,()=>a.fireButtonTriggered({button:m,item:a.item}))),{icon:!0,label:!1}),i.entry.classList.add("has-actions")):i.entry.classList.remove("has-actions")}disposeElement(e,t,i){this.removeItemWithSeparator(e.element),super.disposeElement(e,t,i)}isItemWithSeparatorVisible(e){return this._itemsWithSeparatorsFrequency.has(e)}addItemWithSeparator(e){this._itemsWithSeparatorsFrequency.set(e,(this._itemsWithSeparatorsFrequency.get(e)||0)+1)}removeItemWithSeparator(e){const t=this._itemsWithSeparatorsFrequency.get(e)||0;t>1?this._itemsWithSeparatorsFrequency.set(e,t-1):this._itemsWithSeparatorsFrequency.delete(e)}};M1.ID="quickpickitem";M1=iF=DT([tF(1,Xo)],M1);class Vw extends joe{constructor(){super(...arguments),this._visibleSeparatorsFrequency=new Map}get templateId(){return Vw.ID}get visibleSeparators(){return[...this._visibleSeparatorsFrequency.keys()]}isSeparatorVisible(e){return this._visibleSeparatorsFrequency.has(e)}renderElement(e,t,i){var s;const r=e.element;i.element=r,r.element=(s=i.entry)!==null&&s!==void 0?s:void 0,r.element.classList.toggle("focus-inside",!!r.focusInsideSeparator);const o=r.separator,{labelHighlights:a,descriptionHighlights:l,detailHighlights:c}=r;i.icon.style.backgroundImage="",i.icon.className="";let d;!r.saneTooltip&&r.saneDescription&&(d={markdown:{value:r.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:r.saneDescription});const u={matches:a||[],descriptionTitle:d,descriptionMatches:l||[],labelEscapeNewLines:!0};if(i.entry.classList.add("quick-input-list-separator-as-item"),i.label.setLabel(r.saneLabel,r.saneDescription,u),r.saneDetail){let f;r.saneTooltip||(f={markdown:{value:r.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:r.saneDetail}),i.detail.element.style.display="",i.detail.setLabel(r.saneDetail,void 0,{matches:c,title:f,labelEscapeNewLines:!0})}else i.detail.element.style.display="none";i.separator.style.display="none",i.entry.classList.add("quick-input-list-separator-border");const h=o.buttons;h&&h.length?(i.actionBar.push(h.map((f,g)=>dk(f,`id-${g}`,()=>r.fireSeparatorButtonTriggered({button:f,separator:r.separator}))),{icon:!0,label:!1}),i.entry.classList.add("has-actions")):i.entry.classList.remove("has-actions"),this.addSeparator(r)}disposeElement(e,t,i){var s;this.removeSeparator(e.element),this.isSeparatorVisible(e.element)||(s=e.element.element)===null||s===void 0||s.classList.remove("focus-inside"),super.disposeElement(e,t,i)}addSeparator(e){this._visibleSeparatorsFrequency.set(e,(this._visibleSeparatorsFrequency.get(e)||0)+1)}removeSeparator(e){const t=this._visibleSeparatorsFrequency.get(e)||0;t>1?this._visibleSeparatorsFrequency.set(e,t-1):this._visibleSeparatorsFrequency.delete(e)}}Vw.ID="quickpickseparator";let E1=class extends Le{constructor(e,t,i,s,r,o){super(),this.parent=e,this.hoverDelegate=t,this.linkOpenerDelegate=i,this.accessibilityService=o,this._onKeyDown=new ue,this._onLeave=new ue,this.onLeave=this._onLeave.event,this._onChangedAllVisibleChecked=new ue,this.onChangedAllVisibleChecked=this._onChangedAllVisibleChecked.event,this._onChangedCheckedCount=new ue,this.onChangedCheckedCount=this._onChangedCheckedCount.event,this._onChangedVisibleCount=new ue,this.onChangedVisibleCount=this._onChangedVisibleCount.event,this._onChangedCheckedElements=new ue,this.onChangedCheckedElements=this._onChangedCheckedElements.event,this._onButtonTriggered=new ue,this.onButtonTriggered=this._onButtonTriggered.event,this._onSeparatorButtonTriggered=new ue,this.onSeparatorButtonTriggered=this._onSeparatorButtonTriggered.event,this._elementChecked=new ue,this._inputElements=new Array,this._elementTree=new Array,this._itemElements=new Array,this._elementDisposable=this._register(new ct),this._shouldFireCheckedEvents=!0,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._shouldLoop=!0,this._container=dt(this.parent,cl(".quick-input-list")),this._separatorRenderer=new Vw(t),this._itemRenderer=r.createInstance(M1,t),this._tree=this._register(r.createInstance(eF,"QuickInput",this._container,new gYe,[this._itemRenderer,this._separatorRenderer],{accessibilityProvider:new mYe,setRowLineHeight:!1,multipleSelectionSupport:!1,hideTwistiesOfChildlessElements:!0,renderIndentGuides:Yb.None,findWidgetEnabled:!1,indent:0,horizontalScrolling:!1,allowNonCollapsibleParents:!0,alwaysConsumeMouseWheel:!0})),this._tree.getHTMLElement().id=s,this._registerListeners()}get onDidChangeFocus(){return Be.map(this._tree.onDidChangeFocus,e=>e.elements.filter(t=>t instanceof ar).map(t=>t.item))}get onDidChangeSelection(){return Be.map(this._tree.onDidChangeSelection,e=>({items:e.elements.filter(t=>t instanceof ar).map(t=>t.item),event:e.browserEvent}))}get scrollTop(){return this._tree.scrollTop}set scrollTop(e){this._tree.scrollTop=e}get ariaLabel(){return this._tree.ariaLabel}set ariaLabel(e){this._tree.ariaLabel=e??""}set enabled(e){this._tree.getHTMLElement().style.pointerEvents=e?"":"none"}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e}get shouldLoop(){return this._shouldLoop}set shouldLoop(e){this._shouldLoop=e}_registerListeners(){this._registerOnKeyDown(),this._registerOnContainerClick(),this._registerOnMouseMiddleClick(),this._registerOnElementChecked(),this._registerOnContextMenu(),this._registerHoverListeners(),this._registerSelectionChangeListener(),this._registerSeparatorActionShowingListeners()}_registerOnKeyDown(){this._register(this._tree.onKeyDown(e=>{const t=new Ji(e);switch(t.keyCode){case 10:this.toggleCheckbox();break}this._onKeyDown.fire(t)}))}_registerOnContainerClick(){this._register(we(this._container,Ge.CLICK,e=>{(e.x||e.y)&&this._onLeave.fire()}))}_registerOnMouseMiddleClick(){this._register(we(this._container,Ge.AUXCLICK,e=>{e.button===1&&this._onLeave.fire()}))}_registerOnElementChecked(){this._register(this._elementChecked.event(e=>this._fireCheckedEvents()))}_registerOnContextMenu(){this._register(this._tree.onContextMenu(e=>{e.element&&(e.browserEvent.preventDefault(),this._tree.setSelection([e.element]))}))}_registerHoverListeners(){const e=this._register(new $te(this.hoverDelegate.delay));this._register(this._tree.onMouseOver(async t=>{var i;if(gH(t.browserEvent.target)){e.cancel();return}if(!(!gH(t.browserEvent.relatedTarget)&&ss(t.browserEvent.relatedTarget,(i=t.element)===null||i===void 0?void 0:i.element)))try{await e.trigger(async()=>{t.element instanceof ar&&this.showHover(t.element)})}catch(s){if(!_0(s))throw s}})),this._register(this._tree.onMouseOut(t=>{var i;ss(t.browserEvent.relatedTarget,(i=t.element)===null||i===void 0?void 0:i.element)||e.cancel()}))}_registerSeparatorActionShowingListeners(){this._register(this._tree.onDidChangeFocus(e=>{const t=e.elements[0]?this._tree.getParentElement(e.elements[0]):null;for(const i of this._separatorRenderer.visibleSeparators){const s=i===t;!!(i.focusInsideSeparator&oc.ACTIVE_ITEM)!==s&&(s?i.focusInsideSeparator|=oc.ACTIVE_ITEM:i.focusInsideSeparator&=~oc.ACTIVE_ITEM,this._tree.rerender(i))}})),this._register(this._tree.onMouseOver(e=>{const t=e.element?this._tree.getParentElement(e.element):null;for(const i of this._separatorRenderer.visibleSeparators){if(i!==t)continue;!!(i.focusInsideSeparator&oc.MOUSE_HOVER)||(i.focusInsideSeparator|=oc.MOUSE_HOVER,this._tree.rerender(i))}})),this._register(this._tree.onMouseOut(e=>{const t=e.element?this._tree.getParentElement(e.element):null;for(const i of this._separatorRenderer.visibleSeparators){if(i!==t)continue;!!(i.focusInsideSeparator&oc.MOUSE_HOVER)&&(i.focusInsideSeparator&=~oc.MOUSE_HOVER,this._tree.rerender(i))}}))}_registerSelectionChangeListener(){this._register(this._tree.onDidChangeSelection(e=>{const t=e.elements.filter(i=>i instanceof ar);t.length!==e.elements.length&&(e.elements.length===1&&e.elements[0]instanceof Iu&&(this._tree.setFocus([e.elements[0].children[0]]),this._tree.reveal(e.elements[0],0)),this._tree.setSelection(t))}))}getAllVisibleChecked(){return this._allVisibleChecked(this._itemElements,!1)}getCheckedCount(){return this._itemElements.filter(e=>e.checked).length}getVisibleCount(){return this._itemElements.filter(e=>!e.hidden).length}setAllVisibleChecked(e){try{this._shouldFireCheckedEvents=!1,this._itemElements.forEach(t=>{!t.hidden&&!t.checkboxDisabled&&(t.checked=e)})}finally{this._shouldFireCheckedEvents=!0,this._fireCheckedEvents()}}setElements(e){this._elementDisposable.clear(),this._inputElements=e;const t=this.parent.classList.contains("show-checkboxes");let i;this._itemElements=new Array,this._elementTree=e.reduce((o,a,l)=>{let c;if(a.type==="separator"){if(!a.buttons)return o;i=new Iu(l,d=>this.fireSeparatorButtonTriggered(d),a),c=i}else{const d=l>0?e[l-1]:void 0;let u;d&&d.type==="separator"&&!d.buttons&&(i=void 0,u=d);const h=new ar(l,t,f=>this.fireButtonTriggered(f),this._elementChecked,a,u);if(this._itemElements.push(h),i)return i.children.push(h),o;c=h}return o.push(c),o},new Array);const s=new Array;let r=0;for(const o of this._elementTree)o instanceof Iu?(s.push({element:o,collapsible:!1,collapsed:!1,children:o.children.map(a=>({element:a,collapsible:!1,collapsed:!1}))}),r+=o.children.length+1):(s.push({element:o,collapsible:!1,collapsed:!1}),r++);this._tree.setChildren(null,s),this._onChangedVisibleCount.fire(r),this.accessibilityService.isScreenReaderOptimized()&&setTimeout(()=>{const o=this._tree.getHTMLElement().querySelector(".monaco-list-row.focused"),a=o?.parentNode;if(o&&a){const l=o.nextSibling;a.removeChild(o),a.insertBefore(o,l)}},0)}setFocusedElements(e){const t=e.map(i=>this._itemElements.find(s=>s.item===i)).filter(i=>!!i);if(this._tree.setFocus(t),e.length>0){const i=this._tree.getFocus()[0];i&&this._tree.reveal(i)}}getActiveDescendant(){return this._tree.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){const t=e.map(i=>this._itemElements.find(s=>s.item===i)).filter(i=>!!i);this._tree.setSelection(t)}getCheckedElements(){return this._itemElements.filter(e=>e.checked).map(e=>e.item)}setCheckedElements(e){try{this._shouldFireCheckedEvents=!1;const t=new Set;for(const i of e)t.add(i);for(const i of this._itemElements)i.checked=t.has(i.item)}finally{this._shouldFireCheckedEvents=!0,this._fireCheckedEvents()}}focus(e){var t;if(this._itemElements.length)switch(e===Oi.Second&&this._itemElements.length<2&&(e=Oi.First),e){case Oi.First:this._tree.scrollTop=0,this._tree.focusFirst(void 0,i=>i.element instanceof ar);break;case Oi.Second:this._tree.scrollTop=0,this._tree.setFocus([this._itemElements[1]]);break;case Oi.Last:this._tree.scrollTop=this._tree.scrollHeight,this._tree.setFocus([this._itemElements[this._itemElements.length-1]]);break;case Oi.Next:{const i=this._tree.getFocus();this._tree.focusNext(void 0,this._shouldLoop,void 0,r=>r.element instanceof ar?(this._tree.reveal(r.element),!0):!1);const s=this._tree.getFocus();i.length&&i[0]===s[0]&&i[0]===this._itemElements[this._itemElements.length-1]&&this._onLeave.fire();break}case Oi.Previous:{const i=this._tree.getFocus();this._tree.focusPrevious(void 0,this._shouldLoop,void 0,r=>{if(!(r.element instanceof ar))return!1;const o=this._tree.getParentElement(r.element);return o===null||o.children[0]!==r.element?this._tree.reveal(r.element):this._tree.reveal(o),!0});const s=this._tree.getFocus();i.length&&i[0]===s[0]&&i[0]===this._itemElements[0]&&this._onLeave.fire();break}case Oi.NextPage:this._tree.focusNextPage(void 0,i=>i.element instanceof ar?(this._tree.reveal(i.element),!0):!1);break;case Oi.PreviousPage:this._tree.focusPreviousPage(void 0,i=>{if(!(i.element instanceof ar))return!1;const s=this._tree.getParentElement(i.element);return s===null||s.children[0]!==i.element?this._tree.reveal(i.element):this._tree.reveal(s),!0});break;case Oi.NextSeparator:{let i=!1;const s=this._tree.getFocus()[0];this._tree.focusNext(void 0,!0,void 0,o=>{if(i)return!0;if(o.element instanceof Iu)i=!0,this._separatorRenderer.isSeparatorVisible(o.element)?this._tree.reveal(o.element.children[0]):this._tree.reveal(o.element,0);else if(o.element instanceof ar){if(o.element.separator)return this._itemRenderer.isItemWithSeparatorVisible(o.element)?this._tree.reveal(o.element):this._tree.reveal(o.element,0),!0;if(o.element===this._elementTree[0])return this._tree.reveal(o.element,0),!0}return!1});const r=this._tree.getFocus()[0];s===r&&(this._tree.scrollTop=this._tree.scrollHeight,this._tree.setFocus([this._itemElements[this._itemElements.length-1]]));break}case Oi.PreviousSeparator:{let i,s=!!(!((t=this._tree.getFocus()[0])===null||t===void 0)&&t.separator);this._tree.focusPrevious(void 0,!0,void 0,r=>{if(r.element instanceof Iu)s?i||(this._separatorRenderer.isSeparatorVisible(r.element)?this._tree.reveal(r.element):this._tree.reveal(r.element,0),i=r.element.children[0]):s=!0;else if(r.element instanceof ar&&!i){if(r.element.separator)this._itemRenderer.isItemWithSeparatorVisible(r.element)?this._tree.reveal(r.element):this._tree.reveal(r.element,0),i=r.element;else if(r.element===this._elementTree[0])return this._tree.reveal(r.element,0),!0}return!1}),i&&this._tree.setFocus([i]);break}}}clearFocus(){this._tree.setFocus([])}domFocus(){this._tree.domFocus()}layout(e){this._tree.getHTMLElement().style.maxHeight=e?`${Math.floor(e/44)*44+6}px`:"",this._tree.layout()}filter(e){if(!(this._sortByLabel||this._matchOnLabel||this._matchOnDescription||this._matchOnDetail))return this._tree.layout(),!1;const t=e;if(e=e.trim(),!e||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this._itemElements.forEach(a=>{a.labelHighlights=void 0,a.descriptionHighlights=void 0,a.detailHighlights=void 0,a.hidden=!1;const l=a.index&&this._inputElements[a.index-1];a.item&&(a.separator=l&&l.type==="separator"&&!l.buttons?l:void 0)});else{let a;this._elementTree.forEach(l=>{var c,d,u,h;let f;this.matchOnLabelMode==="fuzzy"?f=this.matchOnLabel&&(c=yR(e,Gv(l.saneLabel)))!==null&&c!==void 0?c:void 0:f=this.matchOnLabel&&(d=pYe(t,Gv(l.saneLabel)))!==null&&d!==void 0?d:void 0;const g=this.matchOnDescription&&(u=yR(e,Gv(l.saneDescription||"")))!==null&&u!==void 0?u:void 0,m=this.matchOnDetail&&(h=yR(e,Gv(l.saneDetail||"")))!==null&&h!==void 0?h:void 0;if(f||g||m?(l.labelHighlights=f,l.descriptionHighlights=g,l.detailHighlights=m,l.hidden=!1):(l.labelHighlights=void 0,l.descriptionHighlights=void 0,l.detailHighlights=void 0,l.hidden=l.item?!l.item.alwaysShow:!0),l.item?l.separator=void 0:l.separator&&(l.hidden=!0),!this.sortByLabel){const p=l.index&&this._inputElements[l.index-1];a=p&&p.type==="separator"?p:a,a&&!l.hidden&&(l.separator=a,a=void 0)}})}const i=this._elementTree.filter(a=>!a.hidden);if(this.sortByLabel&&e){const a=e.toLowerCase();i.sort((l,c)=>bYe(l,c,a))}let s;const r=i.reduce((a,l,c)=>(l instanceof ar?s?s.children.push(l):a.push(l):l instanceof Iu&&(l.children=[],s=l,a.push(l)),a),new Array),o=new Array;for(const a of r)a instanceof Iu?o.push({element:a,collapsible:!1,collapsed:!1,children:a.children.map(l=>({element:l,collapsible:!1,collapsed:!1}))}):o.push({element:a,collapsible:!1,collapsed:!1});return this._tree.setChildren(null,o),this._tree.layout(),this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedVisibleCount.fire(i.length),!0}toggleCheckbox(){try{this._shouldFireCheckedEvents=!1;const e=this._tree.getFocus().filter(i=>i instanceof ar),t=this._allVisibleChecked(e);for(const i of e)i.checkboxDisabled||(i.checked=!t)}finally{this._shouldFireCheckedEvents=!0,this._fireCheckedEvents()}}display(e){this._container.style.display=e?"":"none"}isDisplayed(){return this._container.style.display!=="none"}style(e){this._tree.style(e)}toggleHover(){const e=this._tree.getFocus()[0];if(!e?.saneTooltip||!(e instanceof ar))return;if(this._lastHover&&!this._lastHover.isDisposed){this._lastHover.dispose();return}this.showHover(e);const t=new ct;t.add(this._tree.onDidChangeFocus(i=>{i.elements[0]instanceof ar&&this.showHover(i.elements[0])})),this._lastHover&&t.add(this._lastHover),this._elementDisposable.add(t)}_allVisibleChecked(e,t=!0){for(let i=0,s=e.length;i<s;i++){const r=e[i];if(!r.hidden)if(r.checked)t=!0;else return!1}return t}_fireCheckedEvents(){this._shouldFireCheckedEvents&&(this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedCheckedCount.fire(this.getCheckedCount()),this._onChangedCheckedElements.fire(this.getCheckedElements()))}fireButtonTriggered(e){this._onButtonTriggered.fire(e)}fireSeparatorButtonTriggered(e){this._onSeparatorButtonTriggered.fire(e)}showHover(e){var t,i,s;this._lastHover&&!this._lastHover.isDisposed&&((i=(t=this.hoverDelegate).onDidHideHover)===null||i===void 0||i.call(t),(s=this._lastHover)===null||s===void 0||s.dispose()),!(!e.element||!e.saneTooltip)&&(this._lastHover=this.hoverDelegate.showHover({content:e.saneTooltip,target:e.element,linkHandler:r=>{this.linkOpenerDelegate(r)},appearance:{showPointer:!0},container:this._container,position:{hoverPosition:1}},!1))}};DT([Tn],E1.prototype,"onDidChangeFocus",null);DT([Tn],E1.prototype,"onDidChangeSelection",null);E1=DT([tF(4,Si),tF(5,Xl)],E1);function pYe(n,e){const{text:t,iconOffsets:i}=e;if(!i||i.length===0)return Gj(n,t);const s=m2(t," "),r=t.length-s.length,o=Gj(n,s);if(o)for(const a of o){const l=i[a.start+r]+r;a.start+=l,a.end+=l}return o}function Gj(n,e){const t=e.toLowerCase().indexOf(n.toLowerCase());return t!==-1?[{start:t,end:t+n.length}]:null}function bYe(n,e,t){const i=n.labelHighlights||[],s=e.labelHighlights||[];return i.length&&!s.length?-1:!i.length&&s.length?1:i.length===0&&s.length===0?0:hYe(n.saneSortLabel,e.saneSortLabel,t)}const Joe={weight:200,when:Wt.and(Wt.equals(Moe,"quickPick"),qHe),metadata:{description:L("quickPick","Used while in the context of the quick pick. If you change one keybinding for this command, you should change all of the other keybindings (modifier variants) of this command as well.")}};function ro(n,e={}){var t;lm.registerCommandAndKeybindingRule({...Joe,...n,secondary:vYe(n.primary,(t=n.secondary)!==null&&t!==void 0?t:[],e)})}const pk=jt?256:2048;function vYe(n,e,t={}){return t.withAltMod&&e.push(512+n),t.withCtrlMod&&(e.push(pk+n),t.withAltMod&&e.push(512+pk+n)),t.withCmdMod&&jt&&(e.push(2048+n),t.withCtrlMod&&e.push(2304+n),t.withAltMod&&(e.push(2560+n),t.withCtrlMod&&e.push(2816+n))),e}function Lo(n,e){return t=>{const i=t.get(D0).currentQuickInput;if(i)return e&&i.quickNavigate?i.focus(e):i.focus(n)}}ro({id:"quickInput.pageNext",primary:12,handler:Lo(Oi.NextPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});ro({id:"quickInput.pagePrevious",primary:11,handler:Lo(Oi.PreviousPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});ro({id:"quickInput.first",primary:pk+14,handler:Lo(Oi.First)},{withAltMod:!0,withCmdMod:!0});ro({id:"quickInput.last",primary:pk+13,handler:Lo(Oi.Last)},{withAltMod:!0,withCmdMod:!0});ro({id:"quickInput.next",primary:18,handler:Lo(Oi.Next)},{withCtrlMod:!0});ro({id:"quickInput.previous",primary:16,handler:Lo(Oi.Previous)},{withCtrlMod:!0});const Bj=L("quickInput.nextSeparatorWithQuickAccessFallback","If we're in quick access mode, this will navigate to the next item. If we are not in quick access mode, this will navigate to the next separator."),Xj=L("quickInput.previousSeparatorWithQuickAccessFallback","If we're in quick access mode, this will navigate to the previous item. If we are not in quick access mode, this will navigate to the previous separator.");jt?(ro({id:"quickInput.nextSeparatorWithQuickAccessFallback",primary:2066,handler:Lo(Oi.NextSeparator,Oi.Next),metadata:{description:Bj}}),ro({id:"quickInput.nextSeparator",primary:2578,secondary:[2322],handler:Lo(Oi.NextSeparator)},{withCtrlMod:!0}),ro({id:"quickInput.previousSeparatorWithQuickAccessFallback",primary:2064,handler:Lo(Oi.PreviousSeparator,Oi.Previous),metadata:{description:Xj}}),ro({id:"quickInput.previousSeparator",primary:2576,secondary:[2320],handler:Lo(Oi.PreviousSeparator)},{withCtrlMod:!0})):(ro({id:"quickInput.nextSeparatorWithQuickAccessFallback",primary:530,handler:Lo(Oi.NextSeparator,Oi.Next),metadata:{description:Bj}}),ro({id:"quickInput.nextSeparator",primary:2578,handler:Lo(Oi.NextSeparator)}),ro({id:"quickInput.previousSeparatorWithQuickAccessFallback",primary:528,handler:Lo(Oi.PreviousSeparator,Oi.Previous),metadata:{description:Xj}}),ro({id:"quickInput.previousSeparator",primary:2576,handler:Lo(Oi.PreviousSeparator)}));ro({id:"quickInput.acceptInBackground",when:Wt.and(Joe.when,Wt.or(jUe.negate(),iUe)),primary:17,weight:250,handler:n=>{const e=n.get(D0).currentQuickInput;e?.accept(!0)}},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});var _Ye=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},$R=function(n,e){return function(t,i){e(t,i,n)}},nF;const so=St;let bk=nF=class extends Le{get currentQuickInput(){var e;return(e=this.controller)!==null&&e!==void 0?e:void 0}get container(){return this._container}constructor(e,t,i,s){super(),this.options=e,this.layoutService=t,this.instantiationService=i,this.contextKeyService=s,this.enabled=!0,this.onDidAcceptEmitter=this._register(new ue),this.onDidCustomEmitter=this._register(new ue),this.onDidTriggerButtonEmitter=this._register(new ue),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new ue),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new ue),this.onHide=this.onHideEmitter.event,this.inQuickInputContext=QHe.bindTo(this.contextKeyService),this.quickInputTypeContext=eUe.bindTo(this.contextKeyService),this.endOfQuickInputBoxContext=tUe.bindTo(this.contextKeyService),this.idPrefix=e.idPrefix,this._container=e.container,this.styles=e.styles,this._register(Be.runAndSubscribe(v2,({window:r,disposables:o})=>this.registerKeyModsListeners(r,o),{window:Di,disposables:this._store})),this._register(I5e(r=>{this.ui&&pt(this.ui.container)===r&&(this.reparentUI(this.layoutService.mainContainer),this.layout(this.layoutService.mainContainerDimension,this.layoutService.mainContainerOffset.quickPickTop))}))}registerKeyModsListeners(e,t){const i=s=>{this.keyMods.ctrlCmd=s.ctrlKey||s.metaKey,this.keyMods.alt=s.altKey};for(const s of[Ge.KEY_DOWN,Ge.KEY_UP,Ge.MOUSE_DOWN])t.add(we(e,s,i,!0))}getUI(e){if(this.ui)return e&&pt(this._container)!==pt(this.layoutService.activeContainer)&&(this.reparentUI(this.layoutService.activeContainer),this.layout(this.layoutService.activeContainerDimension,this.layoutService.activeContainerOffset.quickPickTop)),this.ui;const t=dt(this._container,so(".quick-input-widget.show-file-icons"));t.tabIndex=-1,t.style.display="none";const i=Ka(t),s=dt(t,so(".quick-input-titlebar")),r=this._register(new zh(s,{hoverDelegate:this.options.hoverDelegate}));r.domNode.classList.add("quick-input-left-action-bar");const o=dt(s,so(".quick-input-title")),a=this._register(new zh(s,{hoverDelegate:this.options.hoverDelegate}));a.domNode.classList.add("quick-input-right-action-bar");const l=dt(t,so(".quick-input-header")),c=dt(l,so("input.quick-input-check-all"));c.type="checkbox",c.setAttribute("aria-label",L("quickInput.checkAll","Toggle all checkboxes")),this._register(ws(c,Ge.CHANGE,E=>{const W=c.checked;D.setAllVisibleChecked(W)})),this._register(we(c,Ge.CLICK,E=>{(E.x||E.y)&&f.setFocus()}));const d=dt(l,so(".quick-input-description")),u=dt(l,so(".quick-input-and-message")),h=dt(u,so(".quick-input-filter")),f=this._register(new rUe(h,this.styles.inputBox,this.styles.toggle));f.setAttribute("aria-describedby",`${this.idPrefix}message`);const g=dt(h,so(".quick-input-visible-count"));g.setAttribute("aria-live","polite"),g.setAttribute("aria-atomic","true");const m=new Cj(g,{countFormat:L({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")},this.styles.countBadge),p=dt(h,so(".quick-input-count"));p.setAttribute("aria-live","polite");const b=new Cj(p,{countFormat:L({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")},this.styles.countBadge),w=dt(l,so(".quick-input-action")),v=this._register(new OL(w,this.styles.button));v.label=L("ok","OK"),this._register(v.onDidClick(E=>{this.onDidAcceptEmitter.fire()}));const _=dt(l,so(".quick-input-action")),y=this._register(new OL(_,{...this.styles.button,supportIcons:!0}));y.label=L("custom","Custom"),this._register(y.onDidClick(E=>{this.onDidCustomEmitter.fire()}));const C=dt(u,so(`#${this.idPrefix}message.quick-input-message`)),S=this._register(new yT(t,this.styles.progressBar));S.getContainer().classList.add("quick-input-progress");const k=dt(t,so(".quick-input-html-widget"));k.tabIndex=-1;const I=dt(t,so(".quick-input-description")),T=this.idPrefix+"list",D=this._register(this.instantiationService.createInstance(E1,t,this.options.hoverDelegate,this.options.linkOpenerDelegate,T));f.setAttribute("aria-controls",T),this._register(D.onDidChangeFocus(()=>{var E;f.setAttribute("aria-activedescendant",(E=D.getActiveDescendant())!==null&&E!==void 0?E:"")})),this._register(D.onChangedAllVisibleChecked(E=>{c.checked=E})),this._register(D.onChangedVisibleCount(E=>{m.setCount(E)})),this._register(D.onChangedCheckedCount(E=>{b.setCount(E)})),this._register(D.onLeave(()=>{setTimeout(()=>{this.controller&&(f.setFocus(),this.controller instanceof k1&&this.controller.canSelectMany&&D.clearFocus())},0)}));const M=Ig(t);return this._register(M),this._register(we(t,Ge.FOCUS,E=>{const W=this.getUI();if(ss(E.relatedTarget,W.inputContainer)){const P=W.inputBox.isSelectionAtEnd();this.endOfQuickInputBoxContext.get()!==P&&this.endOfQuickInputBoxContext.set(P)}ss(E.relatedTarget,W.container)||(this.inQuickInputContext.set(!0),this.previousFocusElement=Es(E.relatedTarget)?E.relatedTarget:void 0)},!0)),this._register(M.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(Ob.Blur),this.inQuickInputContext.set(!1),this.endOfQuickInputBoxContext.set(!1),this.previousFocusElement=void 0})),this._register(f.onKeyDown(E=>{const W=this.getUI().inputBox.isSelectionAtEnd();this.endOfQuickInputBoxContext.get()!==W&&this.endOfQuickInputBoxContext.set(W)})),this._register(we(t,Ge.FOCUS,E=>{f.setFocus()})),this._register(ws(t,Ge.KEY_DOWN,E=>{if(!ss(E.target,k))switch(E.keyCode){case 3:$t.stop(E,!0),this.enabled&&this.onDidAcceptEmitter.fire();break;case 9:$t.stop(E,!0),this.hide(Ob.Gesture);break;case 2:if(!E.altKey&&!E.ctrlKey&&!E.metaKey){const W=[".quick-input-list .monaco-action-bar .always-visible",".quick-input-list-entry:hover .monaco-action-bar",".monaco-list-row.focused .monaco-action-bar"];if(t.classList.contains("show-checkboxes")?W.push("input"):W.push("input[type=text]"),this.getUI().list.isDisplayed()&&W.push(".monaco-list"),this.getUI().message&&W.push(".quick-input-message a"),this.getUI().widget){if(ss(E.target,this.getUI().widget))break;W.push(".quick-input-html-widget")}const P=t.querySelectorAll(W.join(", "));E.shiftKey&&E.target===P[0]?($t.stop(E,!0),D.clearFocus()):!E.shiftKey&&ss(E.target,P[P.length-1])&&($t.stop(E,!0),P[0].focus())}break;case 10:E.ctrlKey&&($t.stop(E,!0),this.getUI().list.toggleHover());break}})),this.ui={container:t,styleSheet:i,leftActionBar:r,titleBar:s,title:o,description1:I,description2:d,widget:k,rightActionBar:a,checkAll:c,inputContainer:u,filterContainer:h,inputBox:f,visibleCountContainer:g,visibleCount:m,countContainer:p,count:b,okContainer:w,ok:v,message:C,customButtonContainer:_,customButton:y,list:D,progressBar:S,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,show:E=>this.show(E),hide:()=>this.hide(),setVisibilities:E=>this.setVisibilities(E),setEnabled:E=>this.setEnabled(E),setContextKey:E=>this.options.setContextKey(E),linkOpenerDelegate:E=>this.options.linkOpenerDelegate(E)},this.updateStyles(),this.ui}reparentUI(e){this.ui&&(this._container=e,dt(this._container,this.ui.container))}pick(e,t={},i=Xs.None){return new Promise((s,r)=>{let o=d=>{var u;o=s,(u=t.onKeyMods)===null||u===void 0||u.call(t,a.keyMods),s(d)};if(i.isCancellationRequested){o(void 0);return}const a=this.createQuickPick();let l;const c=[a,a.onDidAccept(()=>{if(a.canSelectMany)o(a.selectedItems.slice()),a.hide();else{const d=a.activeItems[0];d&&(o(d),a.hide())}}),a.onDidChangeActive(d=>{const u=d[0];u&&t.onDidFocus&&t.onDidFocus(u)}),a.onDidChangeSelection(d=>{if(!a.canSelectMany){const u=d[0];u&&(o(u),a.hide())}}),a.onDidTriggerItemButton(d=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton({...d,removeItem:()=>{const u=a.items.indexOf(d.item);if(u!==-1){const h=a.items.slice(),f=h.splice(u,1),g=a.activeItems.filter(p=>p!==f[0]),m=a.keepScrollPosition;a.keepScrollPosition=!0,a.items=h,g&&(a.activeItems=g),a.keepScrollPosition=m}}})),a.onDidTriggerSeparatorButton(d=>{var u;return(u=t.onDidTriggerSeparatorButton)===null||u===void 0?void 0:u.call(t,d)}),a.onDidChangeValue(d=>{l&&!d&&(a.activeItems.length!==1||a.activeItems[0]!==l)&&(a.activeItems=[l])}),i.onCancellationRequested(()=>{a.hide()}),a.onDidHide(()=>{Ns(c),o(void 0)})];a.title=t.title,a.canSelectMany=!!t.canPickMany,a.placeholder=t.placeHolder,a.ignoreFocusOut=!!t.ignoreFocusLost,a.matchOnDescription=!!t.matchOnDescription,a.matchOnDetail=!!t.matchOnDetail,a.matchOnLabel=t.matchOnLabel===void 0||t.matchOnLabel,a.quickNavigate=t.quickNavigate,a.hideInput=!!t.hideInput,a.contextKey=t.contextKey,a.busy=!0,Promise.all([e,t.activeItem]).then(([d,u])=>{l=u,a.busy=!1,a.items=d,a.canSelectMany&&(a.selectedItems=d.filter(h=>h.type!=="separator"&&h.picked)),l&&(a.activeItems=[l])}),a.show(),Promise.resolve(e).then(void 0,d=>{r(d),a.hide()})})}createQuickPick(){const e=this.getUI(!0);return new k1(e)}createInputBox(){const e=this.getUI(!0);return new nUe(e)}show(e){const t=this.getUI(!0);this.onShowEmitter.fire();const i=this.controller;this.controller=e,i?.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",Ir(t.widget),t.rightActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(Jn.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),Ir(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,t.inputBox.toggles=void 0;const s=this.options.backKeybindingLabel();jA.tooltip=s?L("quickInput.backWithKeybinding","Back ({0})",s):L("quickInput.back","Back"),t.container.style.display="",this.updateLayout(),t.inputBox.setFocus(),this.quickInputTypeContext.set(e.type)}isVisible(){return!!this.ui&&this.ui.container.style.display!=="none"}setVisibilities(e){const t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=e.description&&!(e.inputBox||e.checkAll)?"":"none",t.checkAll.style.display=e.checkAll?"":"none",t.inputContainer.style.display=e.inputBox?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.display(!!e.list),t.container.classList.toggle("show-checkboxes",!!e.checkBox),t.container.classList.toggle("hidden-input",!e.inputBox&&!e.description),this.updateLayout()}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(const t of this.getUI().leftActionBar.viewItems)t.action.enabled=e;for(const t of this.getUI().rightActionBar.viewItems)t.action.enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().inputBox.enabled=e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){var t,i;const s=this.controller;if(!s)return;s.willHide(e);const r=(t=this.ui)===null||t===void 0?void 0:t.container,o=r&&!Die(r);if(this.controller=null,this.onHideEmitter.fire(),r&&(r.style.display="none"),!o){let a=this.previousFocusElement;for(;a&&!a.offsetParent;)a=(i=a.parentElement)!==null&&i!==void 0?i:void 0;a?.offsetParent?(a.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}s.didHide(e)}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui&&this.isVisible()){this.ui.container.style.top=`${this.titleBarOffset}px`;const e=this.ui.container.style,t=Math.min(this.dimension.width*.62,nF.MAX_WIDTH);e.width=t+"px",e.marginLeft="-"+t/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:i,widgetBorder:s,widgetShadow:r}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e??"",this.ui.container.style.backgroundColor=t??"",this.ui.container.style.color=i??"",this.ui.container.style.border=s?`1px solid ${s}`:"",this.ui.container.style.boxShadow=r?`0 0 8px 2px ${r}`:"",this.ui.list.style(this.styles.list);const o=[];this.styles.pickerGroup.pickerGroupBorder&&o.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.pickerGroup.pickerGroupBorder}; }`),this.styles.pickerGroup.pickerGroupForeground&&o.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.pickerGroup.pickerGroupForeground}; }`),this.styles.pickerGroup.pickerGroupForeground&&o.push(".quick-input-list .quick-input-list-separator-as-item { color: var(--vscode-descriptionForeground); }"),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(o.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&o.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&o.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&o.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&o.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&o.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),o.push("}"));const a=o.join(`
`);a!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=a)}}};bk.MAX_WIDTH=600;bk=nF=_Ye([$R(1,ff),$R(2,Si),$R(3,oi)],bk);var wYe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},fv=function(n,e){return function(t,i){e(t,i,n)}};let sF=class extends DFe{get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get hasController(){return!!this._controller}get currentQuickInput(){return this.controller.currentQuickInput}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(KA))),this._quickAccess}constructor(e,t,i,s,r){super(i),this.instantiationService=e,this.contextKeyService=t,this.layoutService=s,this.configurationService=r,this._onShow=this._register(new ue),this._onHide=this._register(new ue),this.contexts=new Map}createController(e=this.layoutService,t){const i={idPrefix:"quickInput_",container:e.activeContainer,ignoreFocusOut:()=>!1,backKeybindingLabel:()=>{},setContextKey:r=>this.setContextKey(r),linkOpenerDelegate:r=>{this.instantiationService.invokeFunction(o=>{o.get(pm).open(r,{allowCommands:!0,fromUserGesture:!0})})},returnFocus:()=>e.focus(),styles:this.computeStyles(),hoverDelegate:this._register(this.instantiationService.createInstance(JA))},s=this._register(this.instantiationService.createInstance(bk,{...i,...t}));return s.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop),this._register(e.onDidLayoutActiveContainer(r=>{pt(e.activeContainer)===pt(s.container)&&s.layout(r,e.activeContainerOffset.quickPickTop)})),this._register(e.onDidChangeActiveContainer(()=>{s.isVisible()||s.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop)})),this._register(s.onShow(()=>{this.resetContextKeys(),this._onShow.fire()})),this._register(s.onHide(()=>{this.resetContextKeys(),this._onHide.fire()})),s}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new it(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),!(t&&t.get())&&(this.resetContextKeys(),t?.set(!0))}resetContextKeys(){this.contexts.forEach(e=>{e.get()&&e.reset()})}pick(e,t={},i=Xs.None){return this.controller.pick(e,t,i)}createQuickPick(){return this.controller.createQuickPick()}createInputBox(){return this.controller.createInputBox()}updateStyles(){this.hasController&&this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:{quickInputBackground:Ke(sU),quickInputForeground:Ke(xAe),quickInputTitleBackground:Ke(TAe),widgetBorder:Ke(vWe),widgetShadow:Ke(eh)},inputBox:UL,toggle:HL,countBadge:O8e,button:F8e,progressBar:V8e,keybindingLabel:A8e,list:Ew({listBackground:sU,listFocusBackground:N3,listFocusForeground:E3,listInactiveFocusForeground:E3,listInactiveSelectionIconForeground:kne,listInactiveFocusBackground:N3,listFocusOutline:cn,listInactiveFocusOutline:cn}),pickerGroup:{pickerGroupBorder:Ke(DAe),pickerGroupForeground:Ke(Lne)}}}};sF=wYe([fv(0,Si),fv(1,oi),fv(2,Xo),fv(3,ff),fv(4,gn)],sF);var $oe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},zf=function(n,e){return function(t,i){e(t,i,n)}};let rF=class extends sF{constructor(e,t,i,s,r,o){super(t,i,s,new IA(e.getContainerDomNode(),r),o),this.host=void 0;const a=Kb.get(e);if(a){const l=a.widget;this.host={_serviceBrand:void 0,get mainContainer(){return l.getDomNode()},getContainer(){return l.getDomNode()},whenContainerStylesLoaded(){},get containers(){return[l.getDomNode()]},get activeContainer(){return l.getDomNode()},get mainContainerDimension(){return e.getLayoutInfo()},get activeContainerDimension(){return e.getLayoutInfo()},get onDidLayoutMainContainer(){return e.onDidLayoutChange},get onDidLayoutActiveContainer(){return e.onDidLayoutChange},get onDidLayoutContainer(){return Be.map(e.onDidLayoutChange,c=>({container:l.getDomNode(),dimension:c}))},get onDidChangeActiveContainer(){return Be.None},get onDidAddContainer(){return Be.None},get mainContainerOffset(){return{top:0,quickPickTop:0}},get activeContainerOffset(){return{top:0,quickPickTop:0}},focus:()=>e.focus()}}else this.host=void 0}createController(){return super.createController(this.host)}};rF=$oe([zf(1,Si),zf(2,oi),zf(3,Xo),zf(4,Vn),zf(5,gn)],rF);let oF=class{get activeService(){const e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw new Error("Quick input service needs a focused editor to work.");let t=this.mapEditorToService.get(e);if(!t){const i=t=this.instantiationService.createInstance(rF,e);this.mapEditorToService.set(e,t),Sb(e.onDidDispose)(()=>{i.dispose(),this.mapEditorToService.delete(e)})}return t}get currentQuickInput(){return this.activeService.currentQuickInput}get quickAccess(){return this.activeService.quickAccess}constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}pick(e,t={},i=Xs.None){return this.activeService.pick(e,t,i)}createQuickPick(){return this.activeService.createQuickPick()}createInputBox(){return this.activeService.createInputBox()}};oF=$oe([zf(0,Si),zf(1,Vn)],oF);class Kb{static get(e){return e.getContribution(Kb.ID)}constructor(e){this.editor=e,this.widget=new IT(this.editor)}dispose(){this.widget.dispose()}}Kb.ID="editor.controller.quickInput";class IT{constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return IT.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}}IT.ID="editor.contrib.quickInputWidget";du(Kb.ID,Kb,4);class yYe{constructor(e,t,i,s,r){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=i,this.foreground=s,this.background=r}}function SYe(n){if(!n||!Array.isArray(n))return[];const e=[];let t=0;for(let i=0,s=n.length;i<s;i++){const r=n[i];let o=-1;if(typeof r.fontStyle=="string"){o=0;const c=r.fontStyle.split(" ");for(let d=0,u=c.length;d<u;d++)switch(c[d]){case"italic":o=o|1;break;case"bold":o=o|2;break;case"underline":o=o|4;break;case"strikethrough":o=o|8;break}}let a=null;typeof r.foreground=="string"&&(a=r.foreground);let l=null;typeof r.background=="string"&&(l=r.background),e[t++]=new yYe(r.token||"",i,o,a,l)}return e}function CYe(n,e){n.sort((d,u)=>{const h=DYe(d.token,u.token);return h!==0?h:d.index-u.index});let t=0,i="000000",s="ffffff";for(;n.length>=1&&n[0].token==="";){const d=n.shift();d.fontStyle!==-1&&(t=d.fontStyle),d.foreground!==null&&(i=d.foreground),d.background!==null&&(s=d.background)}const r=new kYe;for(const d of e)r.getId(d);const o=r.getId(i),a=r.getId(s),l=new PO(t,o,a),c=new OO(l);for(let d=0,u=n.length;d<u;d++){const h=n[d];c.insert(h.token,h.fontStyle,r.getId(h.foreground),r.getId(h.background))}return new Qoe(r,c)}const LYe=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class kYe{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(e===null)return 0;const t=e.match(LYe);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let i=this._color2id.get(e);return i||(i=++this._lastColorId,this._color2id.set(e,i),this._id2color[i]=Ce.fromHex("#"+e),i)}getColorMap(){return this._id2color.slice(0)}}class Qoe{static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(SYe(e),t)}static createFromParsedTokenTheme(e,t){return CYe(e,t)}constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,t){let i=this._cache.get(t);if(typeof i>"u"){const s=this._match(t),r=TYe(t);i=(s.metadata|r<<8)>>>0,this._cache.set(t,i)}return(i|e<<0)>>>0}}const xYe=/\b(comment|string|regex|regexp)\b/;function TYe(n){const e=n.match(xYe);if(!e)return 0;switch(e[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"regexp":return 3}throw new Error("Unexpected match for standard token type!")}function DYe(n,e){return n<e?-1:n>e?1:0}class PO{constructor(e,t,i){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=i,this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}clone(){return new PO(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,i){e!==-1&&(this._fontStyle=e),t!==0&&(this._foreground=t),i!==0&&(this._background=i),this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}}class OO{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}match(e){if(e==="")return this._mainRule;const t=e.indexOf(".");let i,s;t===-1?(i=e,s=""):(i=e.substring(0,t),s=e.substring(t+1));const r=this._children.get(i);return typeof r<"u"?r.match(s):this._mainRule}insert(e,t,i,s){if(e===""){this._mainRule.acceptOverwrite(t,i,s);return}const r=e.indexOf(".");let o,a;r===-1?(o=e,a=""):(o=e.substring(0,r),a=e.substring(r+1));let l=this._children.get(o);typeof l>"u"&&(l=new OO(this._mainRule.clone()),this._children.set(o,l)),l.insert(a,t,i,s)}}function qoe(n){const e=[];for(let t=1,i=n.length;t<i;t++){const s=n[t];e[t]=`.mtk${t} { color: ${s}; }`}return e.push(".mtki { font-style: italic; }"),e.push(".mtkb { font-weight: bold; }"),e.push(".mtku { text-decoration: underline; text-underline-position: under; }"),e.push(".mtks { text-decoration: line-through; }"),e.push(".mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }"),e.join(`
`)}const IYe={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[js]:"#FFFFFE",[ww]:"#000000",[wne]:"#E5EBF1",[Sw]:"#D3D3D3",[Cw]:"#939393",[iP]:"#ADD6FF4D"}},MYe={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[js]:"#1E1E1E",[ww]:"#D4D4D4",[wne]:"#3A3D41",[Sw]:"#404040",[Cw]:"#707070",[iP]:"#ADD6FF26"}},EYe={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[js]:"#000000",[ww]:"#FFFFFF",[Sw]:"#FFFFFF",[Cw]:"#FFFFFF"}},NYe={base:"hc-light",inherit:!1,rules:[{token:"",foreground:"292929",background:"FFFFFF"},{token:"invalid",foreground:"B5200D"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"264F70"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"B5200D"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"264F78"},{token:"attribute.value",foreground:"0451A5"},{token:"string",foreground:"A31515"},{token:"string.sql",foreground:"B5200D"},{token:"keyword",foreground:"0000FF"},{token:"keyword.flow",foreground:"AF00DB"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[js]:"#FFFFFF",[ww]:"#292929",[Sw]:"#292929",[Cw]:"#292929"}};function RYe(n){const e=new ct,t=e.add(new ue),i=Ire();return e.add(i.onDidChange(()=>t.fire())),n&&e.add(n.onDidProductIconThemeChange(()=>t.fire())),{dispose:()=>e.dispose(),onDidChange:t.event,getCSS(){const s=n?n.getProductIconTheme():new eae,r={},o=[],a=[];for(const l of i.getIcons()){const c=s.getIcon(l);if(!c)continue;const d=c.font,u=`--vscode-icon-${l.id}-font-family`,h=`--vscode-icon-${l.id}-content`;d?(r[d.id]=d.definition,a.push(`${u}: ${Z5(d.id)};`,`${h}: '${c.fontCharacter}';`),o.push(`.codicon-${l.id}:before { content: '${c.fontCharacter}'; font-family: ${Z5(d.id)}; }`)):(a.push(`${h}: '${c.fontCharacter}'; ${u}: 'codicon';`),o.push(`.codicon-${l.id}:before { content: '${c.fontCharacter}'; }`))}for(const l in r){const c=r[l],d=c.weight?`font-weight: ${c.weight};`:"",u=c.style?`font-style: ${c.style};`:"",h=c.src.map(f=>`${Qd(f.location)} format('${f.format}')`).join(", ");o.push(`@font-face { src: ${h}; font-family: ${Z5(l)};${d}${u} font-display: block; }`)}return o.push(`:root { ${a.join(" ")} }`),o.join(`
`)}}}class eae{getIcon(e){const t=Ire();let i=e.defaults;for(;Vt.isThemeIcon(i);){const s=t.getIcon(i.id);if(!s)return;i=s.defaults}return i}}const Xu="vs",y_="vs-dark",Yp="hc-black",Kp="hc-light",tae=Ss.as(bne.ColorContribution),WYe=Ss.as(Ane.ThemingContribution);class iae{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;const i=t.base;e.length>0?(lC(e)?this.id=e:this.id=i+" "+e,this.themeName=e):(this.id=i,this.themeName=i),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const e=new Map;for(const t in this.themeData.colors)e.set(t,Ce.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){const t=aF(this.themeData.base);for(const i in t.colors)e.has(i)||e.set(i,Ce.fromHex(t.colors[i]))}this.colors=e}return this.colors}getColor(e,t){const i=this.getColors().get(e);if(i)return i;if(t!==!1)return this.getDefault(e)}getDefault(e){let t=this.defaultColors[e];return t||(t=tae.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return this.getColors().has(e)}get type(){switch(this.base){case Xu:return na.LIGHT;case Yp:return na.HIGH_CONTRAST_DARK;case Kp:return na.HIGH_CONTRAST_LIGHT;default:return na.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){const r=aF(this.themeData.base);e=r.rules,r.encodedTokensColors&&(t=r.encodedTokensColors)}const i=this.themeData.colors["editor.foreground"],s=this.themeData.colors["editor.background"];if(i||s){const r={token:""};i&&(r.foreground=i),s&&(r.background=s),e.push(r)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=Qoe.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,i){const r=this.tokenTheme._match([e].concat(t).join(".")).metadata,o=oo.getForeground(r),a=oo.getFontStyle(r);return{foreground:o,italic:!!(a&1),bold:!!(a&2),underline:!!(a&4),strikethrough:!!(a&8)}}}function lC(n){return n===Xu||n===y_||n===Yp||n===Kp}function aF(n){switch(n){case Xu:return IYe;case y_:return MYe;case Yp:return EYe;case Kp:return NYe}}function pS(n){const e=aF(n);return new iae(n,e)}class AYe extends Le{constructor(){super(),this._onColorThemeChange=this._register(new ue),this.onDidColorThemeChange=this._onColorThemeChange.event,this._onProductIconThemeChange=this._register(new ue),this.onDidProductIconThemeChange=this._onProductIconThemeChange.event,this._environment=Object.create(null),this._builtInProductIconTheme=new eae,this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(Xu,pS(Xu)),this._knownThemes.set(y_,pS(y_)),this._knownThemes.set(Yp,pS(Yp)),this._knownThemes.set(Kp,pS(Kp));const e=this._register(RYe(this));this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(Xu),this._onOSSchemeChanged(),this._register(e.onDidChange(()=>{this._codiconCSS=e.getCSS(),this._updateCSS()})),Ate(Di,"(forced-colors: active)",()=>{this._onOSSchemeChanged()})}registerEditorContainer(e){return d3(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=Ka(void 0,e=>{e.className="monaco-colors",e.textContent=this._allCSS}),this._styleElements.push(this._globalStyleElement)),Le.None}_registerShadowDomContainer(e){const t=Ka(e,i=>{i.className="monaco-colors",i.textContent=this._allCSS});return this._styleElements.push(t),{dispose:()=>{for(let i=0;i<this._styleElements.length;i++)if(this._styleElements[i]===t){this._styleElements.splice(i,1);return}}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!lC(t.base)&&!lC(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new iae(e,t)),lC(e)&&this._knownThemes.forEach(i=>{i.base===e&&i.notifyBaseUpdated()}),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;this._knownThemes.has(e)?t=this._knownThemes.get(e):t=this._knownThemes.get(Xu),this._updateActualTheme(t)}_updateActualTheme(e){!e||this._theme===e||(this._theme=e,this._updateThemeOrColorMap())}_onOSSchemeChanged(){if(this._autoDetectHighContrast){const e=Di.matchMedia("(forced-colors: active)").matches;if(e!==yh(this._theme.type)){let t;z2(this._theme.type)?t=e?Yp:y_:t=e?Kp:Xu,this._updateActualTheme(this._knownThemes.get(t))}}}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._onOSSchemeChanged()}_updateThemeOrColorMap(){const e=[],t={},i={addRule:o=>{t[o]||(e.push(o),t[o]=!0)}};WYe.getThemingParticipants().forEach(o=>o(this._theme,i,this._environment));const s=[];for(const o of tae.getColors()){const a=this._theme.getColor(o.id,!0);a&&s.push(`${tP(o.id)}: ${a.toString()};`)}i.addRule(`.monaco-editor, .monaco-diff-editor, .monaco-component { ${s.join(`
`)} }`);const r=this._colorMapOverride||this._theme.tokenTheme.getColorMap();i.addRule(qoe(r)),this._themeCSS=e.join(`
`),this._updateCSS(),Zn.setColorMap(r),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(e=>e.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}getProductIconTheme(){return this._builtInProductIconTheme}}const qa=ri("themeService");var FYe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},QR=function(n,e){return function(t,i){e(t,i,n)}};let lF=class extends Le{constructor(e,t,i){super(),this._contextKeyService=e,this._layoutService=t,this._configurationService=i,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new ue,this._onDidChangeReducedMotion=new ue,this._accessibilityModeEnabledContext=K3e.bindTo(this._contextKeyService);const s=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration(o=>{o.affectsConfiguration("editor.accessibilitySupport")&&(s(),this._onDidChangeScreenReaderOptimized.fire()),o.affectsConfiguration("workbench.reduceMotion")&&(this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._onDidChangeReducedMotion.fire())})),s(),this._register(this.onDidChangeScreenReaderOptimized(()=>s()));const r=Di.matchMedia("(prefers-reduced-motion: reduce)");this._systemMotionReduced=r.matches,this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this.initReducedMotionListeners(r)}initReducedMotionListeners(e){this._register(we(e,"change",()=>{this._systemMotionReduced=e.matches,this._configMotionReduced==="auto"&&this._onDidChangeReducedMotion.fire()}));const t=()=>{const i=this.isMotionReduced();this._layoutService.mainContainer.classList.toggle("reduce-motion",i),this._layoutService.mainContainer.classList.toggle("enable-motion",!i)};t(),this._register(this.onDidChangeReducedMotion(()=>t()))}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const e=this._configurationService.getValue("editor.accessibilitySupport");return e==="on"||e==="auto"&&this._accessibilitySupport===2}get onDidChangeReducedMotion(){return this._onDidChangeReducedMotion.event}isMotionReduced(){const e=this._configMotionReduced;return e==="on"||e==="auto"&&this._systemMotionReduced}getAccessibilitySupport(){return this._accessibilitySupport}};lF=FYe([QR(0,oi),QR(1,ff),QR(2,gn)],lF);var MT=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Mc=function(n,e){return function(t,i){e(t,i,n)}},Ym,Mu;let cF=class{constructor(e,t,i){this._commandService=e,this._keybindingService=t,this._hiddenStates=new vk(i)}createMenu(e,t,i){return new uF(e,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...i},this._commandService,this._keybindingService,t)}resetHiddenStates(e){this._hiddenStates.reset(e)}};cF=MT([Mc(0,eo),Mc(1,Ls),Mc(2,W0)],cF);let vk=Ym=class{constructor(e){this._storageService=e,this._disposables=new ct,this._onDidChange=new ue,this.onDidChange=this._onDidChange.event,this._ignoreChangeEvent=!1,this._hiddenByDefaultCache=new Map;try{const t=e.get(Ym._key,0,"{}");this._data=JSON.parse(t)}catch{this._data=Object.create(null)}this._disposables.add(e.onDidChangeValue(0,Ym._key,this._disposables)(()=>{if(!this._ignoreChangeEvent)try{const t=e.get(Ym._key,0,"{}");this._data=JSON.parse(t)}catch(t){console.log("FAILED to read storage after UPDATE",t)}this._onDidChange.fire()}))}dispose(){this._onDidChange.dispose(),this._disposables.dispose()}_isHiddenByDefault(e,t){var i;return(i=this._hiddenByDefaultCache.get(`${e.id}/${t}`))!==null&&i!==void 0?i:!1}setDefaultState(e,t,i){this._hiddenByDefaultCache.set(`${e.id}/${t}`,i)}isHidden(e,t){var i,s;const r=this._isHiddenByDefault(e,t),o=(s=(i=this._data[e.id])===null||i===void 0?void 0:i.includes(t))!==null&&s!==void 0?s:!1;return r?!o:o}updateHidden(e,t,i){this._isHiddenByDefault(e,t)&&(i=!i);const r=this._data[e.id];if(i)r?r.indexOf(t)<0&&r.push(t):this._data[e.id]=[t];else if(r){const o=r.indexOf(t);o>=0&&GRe(r,o),r.length===0&&delete this._data[e.id]}this._persist()}reset(e){if(e===void 0)this._data=Object.create(null),this._persist();else{for(const{id:t}of e)this._data[t]&&delete this._data[t];this._persist()}}_persist(){try{this._ignoreChangeEvent=!0;const e=JSON.stringify(this._data);this._storageService.store(Ym._key,e,0,0)}finally{this._ignoreChangeEvent=!1}}};vk._key="menu.hiddenCommands";vk=Ym=MT([Mc(0,W0)],vk);let dF=Mu=class{constructor(e,t,i,s,r,o){this._id=e,this._hiddenStates=t,this._collectContextKeysForSubmenus=i,this._commandService=s,this._keybindingService=r,this._contextKeyService=o,this._menuGroups=[],this._structureContextKeys=new Set,this._preconditionContextKeys=new Set,this._toggledContextKeys=new Set,this.refresh()}get structureContextKeys(){return this._structureContextKeys}get preconditionContextKeys(){return this._preconditionContextKeys}get toggledContextKeys(){return this._toggledContextKeys}refresh(){this._menuGroups.length=0,this._structureContextKeys.clear(),this._preconditionContextKeys.clear(),this._toggledContextKeys.clear();const e=Wl.getMenuItems(this._id);let t;e.sort(Mu._compareMenuItems);for(const i of e){const s=i.group||"";(!t||t[0]!==s)&&(t=[s,[]],this._menuGroups.push(t)),t[1].push(i),this._collectContextKeys(i)}}_collectContextKeys(e){if(Mu._fillInKbExprKeys(e.when,this._structureContextKeys),Tv(e)){if(e.command.precondition&&Mu._fillInKbExprKeys(e.command.precondition,this._preconditionContextKeys),e.command.toggled){const t=e.command.toggled.condition||e.command.toggled;Mu._fillInKbExprKeys(t,this._toggledContextKeys)}}else this._collectContextKeysForSubmenus&&Wl.getMenuItems(e.submenu).forEach(this._collectContextKeys,this)}createActionGroups(e){const t=[];for(const i of this._menuGroups){const[s,r]=i;let o;for(const a of r)if(this._contextKeyService.contextMatchesRules(a.when)){const l=Tv(a);l&&this._hiddenStates.setDefaultState(this._id,a.command.id,!!a.isHiddenByDefault);const c=VYe(this._id,l?a.command:a,this._hiddenStates);if(l){const d=nae(a.command.id,a.when,this._commandService,this._keybindingService);(o??(o=[])).push(new Bd(a.command,a.alt,e,c,d,this._contextKeyService,this._commandService))}else{const d=new Mu(a.submenu,this._hiddenStates,this._collectContextKeysForSubmenus,this._commandService,this._keybindingService,this._contextKeyService).createActionGroups(e),u=Zs.join(...d.map(h=>h[1]));u.length>0&&(o??(o=[])).push(new Qv(a,c,u))}}o&&o.length>0&&t.push([s,o])}return t}static _fillInKbExprKeys(e,t){if(e)for(const i of e.keys())t.add(i)}static _compareMenuItems(e,t){const i=e.group,s=t.group;if(i!==s){if(i){if(!s)return-1}else return 1;if(i==="navigation")return-1;if(s==="navigation")return 1;const a=i.localeCompare(s);if(a!==0)return a}const r=e.order||0,o=t.order||0;return r<o?-1:r>o?1:Mu._compareTitles(Tv(e)?e.command.title:e.title,Tv(t)?t.command.title:t.title)}static _compareTitles(e,t){const i=typeof e=="string"?e:e.original,s=typeof t=="string"?t:t.original;return i.localeCompare(s)}};dF=Mu=MT([Mc(3,eo),Mc(4,Ls),Mc(5,oi)],dF);let uF=class{constructor(e,t,i,s,r,o){this._disposables=new ct,this._menuInfo=new dF(e,t,i.emitEventsForSubmenuChanges,s,r,o);const a=new as(()=>{this._menuInfo.refresh(),this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!0,isToggleChange:!0})},i.eventDebounceDelay);this._disposables.add(a),this._disposables.add(Wl.onDidChangeMenu(u=>{u.has(e)&&a.schedule()}));const l=this._disposables.add(new ct),c=u=>{let h=!1,f=!1,g=!1;for(const m of u)if(h=h||m.isStructuralChange,f=f||m.isEnablementChange,g=g||m.isToggleChange,h&&f&&g)break;return{menu:this,isStructuralChange:h,isEnablementChange:f,isToggleChange:g}},d=()=>{l.add(o.onDidChangeContext(u=>{const h=u.affectsSome(this._menuInfo.structureContextKeys),f=u.affectsSome(this._menuInfo.preconditionContextKeys),g=u.affectsSome(this._menuInfo.toggledContextKeys);(h||f||g)&&this._onDidChange.fire({menu:this,isStructuralChange:h,isEnablementChange:f,isToggleChange:g})})),l.add(t.onDidChange(u=>{this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!1,isToggleChange:!1})}))};this._onDidChange=new Kte({onWillAddFirstListener:d,onDidRemoveLastListener:l.clear.bind(l),delay:i.eventDebounceDelay,merge:c}),this.onDidChange=this._onDidChange.event}getActions(e){return this._menuInfo.createActionGroups(e)}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}};uF=MT([Mc(3,eo),Mc(4,Ls),Mc(5,oi)],uF);function VYe(n,e,t){const i=pRe(e)?e.submenu.id:e.id,s=typeof e.title=="string"?e.title:e.title.value,r=og({id:`hide/${n.id}/${i}`,label:L("hide.label","Hide '{0}'",s),run(){t.updateHidden(n,i,!0)}}),o=og({id:`toggle/${n.id}/${i}`,label:s,get checked(){return!t.isHidden(n,i)},run(){t.updateHidden(n,i,!!this.checked)}});return{hide:r,toggle:o,get isHidden(){return!o.checked}}}function nae(n,e=void 0,t,i){return og({id:`configureKeybinding/${n}`,label:L("configure keybinding","Configure Keybinding"),run(){const r=!!!i.lookupKeybinding(n)&&e?e.serialize():void 0;t.executeCommand("workbench.action.openGlobalKeybindings",`@command:${n}`+(r?` +when:${r}`:""))}})}var PYe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},zj=function(n,e){return function(t,i){e(t,i,n)}},hF;let _k=hF=class extends Le{constructor(e,t){super(),this.layoutService=e,this.logService=t,this.mapTextToType=new Map,this.findText="",this.resources=[],this.resourcesStateHash=void 0,($d||Fte)&&this.installWebKitWriteTextWorkaround(),this._register(Be.runAndSubscribe(v2,({window:i,disposables:s})=>{s.add(we(i.document,"copy",()=>this.clearResources()))},{window:Di,disposables:this._store}))}installWebKitWriteTextWorkaround(){const e=()=>{const t=new eie;this.webKitPendingClipboardWritePromise&&!this.webKitPendingClipboardWritePromise.isSettled&&this.webKitPendingClipboardWritePromise.cancel(),this.webKitPendingClipboardWritePromise=t,PS().navigator.clipboard.write([new ClipboardItem({"text/plain":t.p})]).catch(async i=>{(!(i instanceof Error)||i.name!=="NotAllowedError"||!t.isRejected)&&this.logService.error(i)})};this._register(Be.runAndSubscribe(this.layoutService.onDidAddContainer,({container:t,disposables:i})=>{i.add(we(t,"click",e)),i.add(we(t,"keydown",e))},{container:this.layoutService.mainContainer,disposables:this._store}))}async writeText(e,t){if(this.writeResources([]),t){this.mapTextToType.set(t,e);return}if(this.webKitPendingClipboardWritePromise)return this.webKitPendingClipboardWritePromise.complete(e);try{return await PS().navigator.clipboard.writeText(e)}catch(i){console.error(i)}this.fallbackWriteText(e)}fallbackWriteText(e){const t=y0(),i=t.activeElement,s=t.body.appendChild(St("textarea",{"aria-hidden":!0}));s.style.height="1px",s.style.width="1px",s.style.position="absolute",s.value=e,s.focus(),s.select(),t.execCommand("copy"),Es(i)&&i.focus(),t.body.removeChild(s)}async readText(e){if(e)return this.mapTextToType.get(e)||"";try{return await PS().navigator.clipboard.readText()}catch(t){console.error(t)}return""}async readFindText(){return this.findText}async writeFindText(e){this.findText=e}async writeResources(e){e.length===0?this.clearResources():(this.resources=e,this.resourcesStateHash=await this.computeResourcesStateHash())}async readResources(){const e=await this.computeResourcesStateHash();return this.resourcesStateHash!==e&&this.clearResources(),this.resources}async computeResourcesStateHash(){if(this.resources.length===0)return;const e=await this.readText();return AV(e.substring(0,hF.MAX_RESOURCE_STATE_SOURCE_LENGTH))}clearResources(){this.resources=[],this.resourcesStateHash=void 0}};_k.MAX_RESOURCE_STATE_SOURCE_LENGTH=1e3;_k=hF=PYe([zj(0,ff),zj(1,Yc)],_k);var OYe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},ZYe=function(n,e){return function(t,i){e(t,i,n)}};const S_="data-keybinding-context";class ZO{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}get value(){return{...this._value}}setValue(e,t){return this._value[e]!==t?(this._value[e]=t,!0):!1}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){const t=this._value[e];return typeof t>"u"&&this._parent?this._parent.getValue(e):t}}class jb extends ZO{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}}jb.INSTANCE=new jb;class N1 extends ZO{constructor(e,t,i){super(e,null),this._configurationService=t,this._values=g_.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(s=>{if(s.source===7){const r=Array.from(this._values,([o])=>o);this._values.clear(),i.fire(new Uj(r))}else{const r=[];for(const o of s.affectedKeys){const a=`config.${o}`,l=this._values.findSuperstr(a);l!==void 0&&(r.push(...ci.map(l,([c])=>c)),this._values.deleteSuperstr(a)),this._values.has(a)&&(r.push(a),this._values.delete(a))}i.fire(new Uj(r))}})}dispose(){this._listener.dispose()}getValue(e){if(e.indexOf(N1._keyPrefix)!==0)return super.getValue(e);if(this._values.has(e))return this._values.get(e);const t=e.substr(N1._keyPrefix.length),i=this._configurationService.getValue(t);let s;switch(typeof i){case"number":case"boolean":case"string":s=i;break;default:Array.isArray(i)?s=JSON.stringify(i):s=i}return this._values.set(e,s),s}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}}N1._keyPrefix="config.";class GYe{constructor(e,t,i){this._service=e,this._key=t,this._defaultValue=i,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){typeof this._defaultValue>"u"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class Hj{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}allKeysContainedIn(e){return this.affectsSome(e)}}class Uj{constructor(e){this.keys=e}affectsSome(e){for(const t of this.keys)if(e.has(t))return!0;return!1}allKeysContainedIn(e){return this.keys.every(t=>e.has(t))}}class BYe{constructor(e){this.events=e}affectsSome(e){for(const t of this.events)if(t.affectsSome(e))return!0;return!1}allKeysContainedIn(e){return this.events.every(t=>t.allKeysContainedIn(e))}}function XYe(n,e){return n.allKeysContainedIn(new Set(Object.keys(e)))}class sae extends Le{constructor(e){super(),this._onDidChangeContext=this._register(new W_({merge:t=>new BYe(t)})),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new GYe(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new zYe(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return e?e.evaluate(t):!0}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const i=this.getContextValuesContainer(this._myContextId);i&&i.setValue(e,t)&&this._onDidChangeContext.fire(new Hj(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new Hj(e))}getContext(e){return this._isDisposed?jb.INSTANCE:this.getContextValuesContainer(HYe(e))}dispose(){super.dispose(),this._isDisposed=!0}}let fF=class extends sae{constructor(e){super(0),this._contexts=new Map,this._lastContextId=0;const t=this._register(new N1(this._myContextId,e,this._onDidChangeContext));this._contexts.set(this._myContextId,t)}getContextValuesContainer(e){return this._isDisposed?jb.INSTANCE:this._contexts.get(e)||jb.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");const t=++this._lastContextId;return this._contexts.set(t,new ZO(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}};fF=OYe([ZYe(0,gn)],fF);class zYe extends sae{constructor(e,t){if(super(e.createChildContext()),this._parentChangeListener=this._register(new ha),this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(S_)){let i="";this._domNode.classList&&(i=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${i?": "+i:""}`)}this._domNode.setAttribute(S_,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(e=>{const i=this._parent.getContextValuesContainer(this._myContextId).value;XYe(e,i)||this._onDidChangeContext.fire(e)})}dispose(){this._isDisposed||(this._parent.disposeContext(this._myContextId),this._domNode.removeAttribute(S_),super.dispose())}getContextValuesContainer(e){return this._isDisposed?jb.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}}function HYe(n){for(;n;){if(n.hasAttribute(S_)){const e=n.getAttribute(S_);return e?parseInt(e,10):NaN}n=n.parentElement}return 0}function UYe(n,e,t){n.get(oi).createKey(String(e),YYe(t))}function YYe(n){return fne(n,e=>{if(typeof e=="object"&&e.$mid===1)return Ft.revive(e).toString();if(e instanceof Ft)return e.toString()})}cs.registerCommand("_setContext",UYe);cs.registerCommand({id:"getContextKeyInfo",handler(){return[...it.all()].sort((n,e)=>n.key.localeCompare(e.key))},metadata:{description:L("getContextKeyInfo","A command that returns information about context keys"),args:[]}});cs.registerCommand("_generateContextKeyInfo",function(){const n=[],e=new Set;for(const t of it.all())e.has(t.key)||(e.add(t.key),n.push(t));n.sort((t,i)=>t.key.localeCompare(i.key)),console.log(JSON.stringify(n,void 0,2))});let KYe=class{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}};class Yj{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(const t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const i=this.lookupOrInsertNode(e),s=this.lookupOrInsertNode(t);i.outgoing.set(s.key,s),s.incoming.set(i.key,i)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(const i of this._nodes.values())i.outgoing.delete(t),i.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let i=this._nodes.get(t);return i||(i=new KYe(t,e),this._nodes.set(t,i)),i}isEmpty(){return this._nodes.size===0}toString(){const e=[];for(const[t,i]of this._nodes)e.push(`${t}
	(-> incoming)[${[...i.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...i.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(const[e,t]of this._nodes){const i=new Set([e]),s=this._findCycle(t,i);if(s)return s}}_findCycle(e,t){for(const[i,s]of e.outgoing){if(t.has(i))return[...t,i].join(" -> ");t.add(i);const r=this._findCycle(s,t);if(r)return r;t.delete(i)}}}const jYe=!1;class Kj extends Error{constructor(e){var t;super("cyclic dependency between services"),this.message=(t=e.findCycleSlow())!==null&&t!==void 0?t:`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}}class wk{constructor(e=new Tw,t=!1,i,s=jYe){var r;this._services=e,this._strict=t,this._parent=i,this._enableTracing=s,this._isDisposed=!1,this._servicesToMaybeDispose=new Set,this._children=new Set,this._activeInstantiations=new Set,this._services.set(Si,this),this._globalGraph=s?(r=i?._globalGraph)!==null&&r!==void 0?r:new Yj(o=>o):void 0}dispose(){if(!this._isDisposed){this._isDisposed=!0,Ns(this._children),this._children.clear();for(const e of this._servicesToMaybeDispose)SV(e)&&e.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(e,t){this._throwIfDisposed();const i=this,s=new class extends wk{dispose(){i._children.delete(s),super.dispose()}}(e,this._strict,this,this._enableTracing);return this._children.add(s),t?.add(s),s}invokeFunction(e,...t){this._throwIfDisposed();const i=Xr.traceInvocation(this._enableTracing,e);let s=!1;try{return e({get:o=>{if(s)throw yV("service accessor is only valid during the invocation of its target method");const a=this._getOrCreateServiceInstance(o,i);if(!a)throw new Error(`[invokeFunction] unknown service '${o}'`);return a}},...t)}finally{s=!0,i.stop()}}createInstance(e,...t){this._throwIfDisposed();let i,s;return e instanceof lc?(i=Xr.traceCreation(this._enableTracing,e.ctor),s=this._createInstance(e.ctor,e.staticArguments.concat(t),i)):(i=Xr.traceCreation(this._enableTracing,e),s=this._createInstance(e,t,i)),i.stop(),s}_createInstance(e,t=[],i){const s=Cl.getServiceDependencies(e).sort((a,l)=>a.index-l.index),r=[];for(const a of s){const l=this._getOrCreateServiceInstance(a.id,i);l||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`,!1),r.push(l)}const o=s.length>0?s[0].index:t.length;if(t.length!==o){console.trace(`[createInstance] First service dependency of ${e.name} at position ${o+1} conflicts with ${t.length} static arguments`);const a=o-t.length;a>0?t=t.concat(new Array(a)):t=t.slice(0,o)}return Reflect.construct(e,t.concat(r))}_setCreatedServiceInstance(e,t){if(this._services.get(e)instanceof lc)this._services.set(e,t);else if(this._parent)this._parent._setCreatedServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){const t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));const i=this._getServiceInstanceOrDescriptor(e);return i instanceof lc?this._safeCreateAndCacheServiceInstance(e,i,t.branch(e,!0)):(t.branch(e,!1),i)}_safeCreateAndCacheServiceInstance(e,t,i){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,i)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,i){var s;const r=new Yj(l=>l.id.toString());let o=0;const a=[{id:e,desc:t,_trace:i}];for(;a.length;){const l=a.pop();if(r.lookupOrInsertNode(l),o++>1e3)throw new Kj(r);for(const c of Cl.getServiceDependencies(l.desc.ctor)){const d=this._getServiceInstanceOrDescriptor(c.id);if(d||this._throwIfStrict(`[createInstance] ${e} depends on ${c.id} which is NOT registered.`,!0),(s=this._globalGraph)===null||s===void 0||s.insertEdge(String(l.id),String(c.id)),d instanceof lc){const u={id:c.id,desc:d,_trace:l._trace.branch(c.id,!0)};r.insertEdge(l,u),a.push(u)}}}for(;;){const l=r.roots();if(l.length===0){if(!r.isEmpty())throw new Kj(r);break}for(const{data:c}of l){if(this._getServiceInstanceOrDescriptor(c.id)instanceof lc){const u=this._createServiceInstanceWithOwner(c.id,c.desc.ctor,c.desc.staticArguments,c.desc.supportsDelayedInstantiation,c._trace);this._setCreatedServiceInstance(c.id,u)}r.removeNode(c)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,i=[],s,r){if(this._services.get(e)instanceof lc)return this._createServiceInstance(e,t,i,s,r,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,i,s,r);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t,i=[],s,r,o){if(s){const a=new wk(void 0,this._strict,this,this._enableTracing);a._globalGraphImplicitDependency=String(e);const l=new Map,c=new pNe(()=>{const d=a._createInstance(t,i,r);for(const[u,h]of l){const f=d[u];if(typeof f=="function")for(const g of h)g.disposable=f.apply(d,g.listener)}return l.clear(),o.add(d),d});return new Proxy(Object.create(null),{get(d,u){if(!c.isInitialized&&typeof u=="string"&&(u.startsWith("onDid")||u.startsWith("onWill"))){let g=l.get(u);return g||(g=new co,l.set(u,g)),(p,b,w)=>{if(c.isInitialized)return c.value[u](p,b,w);{const v={listener:[p,b,w],disposable:void 0},_=g.push(v);return Et(()=>{var C;_(),(C=v.disposable)===null||C===void 0||C.dispose()})}}}if(u in d)return d[u];const h=c.value;let f=h[u];return typeof f!="function"||(f=f.bind(h),d[u]=f),f},set(d,u,h){return c.value[u]=h,!0},getPrototypeOf(d){return t.prototype}})}else{const a=this._createInstance(t,i,r);return o.add(a),a}}_throwIfStrict(e,t){if(t&&console.warn(e),this._strict)throw new Error(e)}}class Xr{static traceInvocation(e,t){return e?new Xr(2,t.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):Xr._None}static traceCreation(e,t){return e?new Xr(1,t.name):Xr._None}constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}branch(e,t){const i=new Xr(3,e.toString());return this._dep.push([e,t,i]),i}stop(){const e=Date.now()-this._start;Xr._totals+=e;let t=!1;function i(r,o){const a=[],l=new Array(r+1).join("	");for(const[c,d,u]of o._dep)if(d&&u){t=!0,a.push(`${l}CREATES -> ${c}`);const h=i(r+1,u);h&&a.push(h)}else a.push(`${l}uses -> ${c}`);return a.join(`
`)}const s=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${i(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${Xr._totals.toFixed(2)}ms)`];(e>2||t)&&Xr.all.add(s.join(`
`))}}Xr.all=new Set;Xr._None=new class extends Xr{constructor(){super(0,null)}stop(){}branch(){return this}};Xr._totals=0;const JYe=new Set([Mt.inMemory,Mt.vscodeSourceControl,Mt.walkThrough,Mt.walkThroughSnippet,Mt.vscodeChatCodeBlock,Mt.vscodeCopilotBackingChatCodeBlock]);class $Ye{constructor(){this._byResource=new An,this._byOwner=new Map}set(e,t,i){let s=this._byResource.get(e);s||(s=new Map,this._byResource.set(e,s)),s.set(t,i);let r=this._byOwner.get(t);r||(r=new An,this._byOwner.set(t,r)),r.set(e,i)}get(e,t){const i=this._byResource.get(e);return i?.get(t)}delete(e,t){let i=!1,s=!1;const r=this._byResource.get(e);r&&(i=r.delete(t));const o=this._byOwner.get(t);if(o&&(s=o.delete(e)),i!==s)throw new Error("illegal state");return i&&s}values(e){var t,i,s,r;return typeof e=="string"?(i=(t=this._byOwner.get(e))===null||t===void 0?void 0:t.values())!==null&&i!==void 0?i:ci.empty():Ft.isUri(e)?(r=(s=this._byResource.get(e))===null||s===void 0?void 0:s.values())!==null&&r!==void 0?r:ci.empty():ci.map(ci.concat(...this._byOwner.values()),o=>o[1])}}class QYe{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new An,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(const t of e){const i=this._data.get(t);i&&this._substract(i);const s=this._resourceStats(t);this._add(s),this._data.set(t,s)}}_resourceStats(e){const t={errors:0,warnings:0,infos:0,unknowns:0};if(JYe.has(e.scheme))return t;for(const{severity:i}of this._service.read({resource:e}))i===qo.Error?t.errors+=1:i===qo.Warning?t.warnings+=1:i===qo.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}}class Au{constructor(){this._onMarkerChanged=new Kte({delay:0,merge:Au._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new $Ye,this._stats=new QYe(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,t){for(const i of t||[])this.changeOne(e,i,[])}changeOne(e,t,i){if(HRe(i))this._data.delete(t,e)&&this._onMarkerChanged.fire([t]);else{const s=[];for(const r of i){const o=Au._toMarker(e,t,r);o&&s.push(o)}this._data.set(t,e,s),this._onMarkerChanged.fire([t])}}static _toMarker(e,t,i){let{code:s,severity:r,message:o,source:a,startLineNumber:l,startColumn:c,endLineNumber:d,endColumn:u,relatedInformation:h,tags:f}=i;if(o)return l=l>0?l:1,c=c>0?c:1,d=d>=l?d:l,u=u>0?u:c,{resource:t,owner:e,code:s,severity:r,message:o,source:a,startLineNumber:l,startColumn:c,endLineNumber:d,endColumn:u,relatedInformation:h,tags:f}}changeAll(e,t){const i=[],s=this._data.values(e);if(s)for(const r of s){const o=ci.first(r);o&&(i.push(o.resource),this._data.delete(o.resource,e))}if(bw(t)){const r=new An;for(const{resource:o,marker:a}of t){const l=Au._toMarker(e,o,a);if(!l)continue;const c=r.get(o);c?c.push(l):(r.set(o,[l]),i.push(o))}for(const[o,a]of r)this._data.set(o,e,a)}i.length>0&&this._onMarkerChanged.fire(i)}read(e=Object.create(null)){let{owner:t,resource:i,severities:s,take:r}=e;if((!r||r<0)&&(r=-1),t&&i){const o=this._data.get(i,t);if(o){const a=[];for(const l of o)if(Au._accept(l,s)){const c=a.push(l);if(r>0&&c===r)break}return a}else return[]}else if(!t&&!i){const o=[];for(const a of this._data.values())for(const l of a)if(Au._accept(l,s)){const c=o.push(l);if(r>0&&c===r)return o}return o}else{const o=this._data.values(i??t),a=[];for(const l of o)for(const c of l)if(Au._accept(c,s)){const d=a.push(c);if(r>0&&d===r)return a}return a}}static _accept(e,t){return t===void 0||(t&e.severity)===e.severity}static _merge(e){const t=new An;for(const i of e)for(const s of i)t.set(s,!0);return Array.from(t.keys())}}class qYe extends Le{get configurationModel(){return this._configurationModel}constructor(e){super(),this.logService=e,this._configurationModel=Ms.createEmptyModel(this.logService)}reload(){return this.resetConfigurationModel(),this.configurationModel}getConfigurationDefaultOverrides(){return{}}resetConfigurationModel(){this._configurationModel=Ms.createEmptyModel(this.logService);const e=Ss.as(dm.Configuration).getConfigurationProperties();this.updateConfigurationModel(Object.keys(e),e)}updateConfigurationModel(e,t){const i=this.getConfigurationDefaultOverrides();for(const s of e){const r=i[s],o=t[s];r!==void 0?this._configurationModel.addValue(s,r):o?this._configurationModel.addValue(s,o.default):this._configurationModel.removeValue(s)}}}const ET=ri("accessibilitySignalService");class vt{static register(e){return new vt(e.fileName)}constructor(e){this.fileName=e}}vt.error=vt.register({fileName:"error.mp3"});vt.warning=vt.register({fileName:"warning.mp3"});vt.success=vt.register({fileName:"success.mp3"});vt.foldedArea=vt.register({fileName:"foldedAreas.mp3"});vt.break=vt.register({fileName:"break.mp3"});vt.quickFixes=vt.register({fileName:"quickFixes.mp3"});vt.taskCompleted=vt.register({fileName:"taskCompleted.mp3"});vt.taskFailed=vt.register({fileName:"taskFailed.mp3"});vt.terminalBell=vt.register({fileName:"terminalBell.mp3"});vt.diffLineInserted=vt.register({fileName:"diffLineInserted.mp3"});vt.diffLineDeleted=vt.register({fileName:"diffLineDeleted.mp3"});vt.diffLineModified=vt.register({fileName:"diffLineModified.mp3"});vt.chatRequestSent=vt.register({fileName:"chatRequestSent.mp3"});vt.chatResponseReceived1=vt.register({fileName:"chatResponseReceived1.mp3"});vt.chatResponseReceived2=vt.register({fileName:"chatResponseReceived2.mp3"});vt.chatResponseReceived3=vt.register({fileName:"chatResponseReceived3.mp3"});vt.chatResponseReceived4=vt.register({fileName:"chatResponseReceived4.mp3"});vt.clear=vt.register({fileName:"clear.mp3"});vt.save=vt.register({fileName:"save.mp3"});vt.format=vt.register({fileName:"format.mp3"});vt.voiceRecordingStarted=vt.register({fileName:"voiceRecordingStarted.mp3"});vt.voiceRecordingStopped=vt.register({fileName:"voiceRecordingStopped.mp3"});vt.progress=vt.register({fileName:"progress.mp3"});class eKe{constructor(e){this.randomOneOf=e}}class Tt{constructor(e,t,i,s,r,o,a){this.sound=e,this.name=t,this.legacySoundSettingsKey=i,this.settingsKey=s,this.legacyAnnouncementSettingsKey=r,this.announcementMessage=o,this.delaySettingsKey=a}static register(e){const t=new eKe("randomOneOf"in e.sound?e.sound.randomOneOf:[e.sound]),i=new Tt(t,e.name,e.legacySoundSettingsKey,e.settingsKey,e.legacyAnnouncementSettingsKey,e.announcementMessage,e.delaySettingsKey);return Tt._signals.add(i),i}}Tt._signals=new Set;Tt.errorAtPosition=Tt.register({name:L("accessibilitySignals.positionHasError.name","Error at Position"),sound:vt.error,announcementMessage:L("accessibility.signals.positionHasError","Error"),settingsKey:"accessibility.signals.positionHasError",delaySettingsKey:"accessibility.signalOptions.delays.errorAtPosition"});Tt.warningAtPosition=Tt.register({name:L("accessibilitySignals.positionHasWarning.name","Warning at Position"),sound:vt.warning,announcementMessage:L("accessibility.signals.positionHasWarning","Warning"),settingsKey:"accessibility.signals.positionHasWarning",delaySettingsKey:"accessibility.signalOptions.delays.warningAtPosition"});Tt.errorOnLine=Tt.register({name:L("accessibilitySignals.lineHasError.name","Error on Line"),sound:vt.error,legacySoundSettingsKey:"audioCues.lineHasError",legacyAnnouncementSettingsKey:"accessibility.alert.error",announcementMessage:L("accessibility.signals.lineHasError","Error on Line"),settingsKey:"accessibility.signals.lineHasError"});Tt.warningOnLine=Tt.register({name:L("accessibilitySignals.lineHasWarning.name","Warning on Line"),sound:vt.warning,legacySoundSettingsKey:"audioCues.lineHasWarning",legacyAnnouncementSettingsKey:"accessibility.alert.warning",announcementMessage:L("accessibility.signals.lineHasWarning","Warning on Line"),settingsKey:"accessibility.signals.lineHasWarning"});Tt.foldedArea=Tt.register({name:L("accessibilitySignals.lineHasFoldedArea.name","Folded Area on Line"),sound:vt.foldedArea,legacySoundSettingsKey:"audioCues.lineHasFoldedArea",legacyAnnouncementSettingsKey:"accessibility.alert.foldedArea",announcementMessage:L("accessibility.signals.lineHasFoldedArea","Folded"),settingsKey:"accessibility.signals.lineHasFoldedArea"});Tt.break=Tt.register({name:L("accessibilitySignals.lineHasBreakpoint.name","Breakpoint on Line"),sound:vt.break,legacySoundSettingsKey:"audioCues.lineHasBreakpoint",legacyAnnouncementSettingsKey:"accessibility.alert.breakpoint",announcementMessage:L("accessibility.signals.lineHasBreakpoint","Breakpoint"),settingsKey:"accessibility.signals.lineHasBreakpoint"});Tt.inlineSuggestion=Tt.register({name:L("accessibilitySignals.lineHasInlineSuggestion.name","Inline Suggestion on Line"),sound:vt.quickFixes,legacySoundSettingsKey:"audioCues.lineHasInlineSuggestion",settingsKey:"accessibility.signals.lineHasInlineSuggestion"});Tt.terminalQuickFix=Tt.register({name:L("accessibilitySignals.terminalQuickFix.name","Terminal Quick Fix"),sound:vt.quickFixes,legacySoundSettingsKey:"audioCues.terminalQuickFix",legacyAnnouncementSettingsKey:"accessibility.alert.terminalQuickFix",announcementMessage:L("accessibility.signals.terminalQuickFix","Quick Fix"),settingsKey:"accessibility.signals.terminalQuickFix"});Tt.onDebugBreak=Tt.register({name:L("accessibilitySignals.onDebugBreak.name","Debugger Stopped on Breakpoint"),sound:vt.break,legacySoundSettingsKey:"audioCues.onDebugBreak",legacyAnnouncementSettingsKey:"accessibility.alert.onDebugBreak",announcementMessage:L("accessibility.signals.onDebugBreak","Breakpoint"),settingsKey:"accessibility.signals.onDebugBreak"});Tt.noInlayHints=Tt.register({name:L("accessibilitySignals.noInlayHints","No Inlay Hints on Line"),sound:vt.error,legacySoundSettingsKey:"audioCues.noInlayHints",legacyAnnouncementSettingsKey:"accessibility.alert.noInlayHints",announcementMessage:L("accessibility.signals.noInlayHints","No Inlay Hints"),settingsKey:"accessibility.signals.noInlayHints"});Tt.taskCompleted=Tt.register({name:L("accessibilitySignals.taskCompleted","Task Completed"),sound:vt.taskCompleted,legacySoundSettingsKey:"audioCues.taskCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.taskCompleted",announcementMessage:L("accessibility.signals.taskCompleted","Task Completed"),settingsKey:"accessibility.signals.taskCompleted"});Tt.taskFailed=Tt.register({name:L("accessibilitySignals.taskFailed","Task Failed"),sound:vt.taskFailed,legacySoundSettingsKey:"audioCues.taskFailed",legacyAnnouncementSettingsKey:"accessibility.alert.taskFailed",announcementMessage:L("accessibility.signals.taskFailed","Task Failed"),settingsKey:"accessibility.signals.taskFailed"});Tt.terminalCommandFailed=Tt.register({name:L("accessibilitySignals.terminalCommandFailed","Terminal Command Failed"),sound:vt.error,legacySoundSettingsKey:"audioCues.terminalCommandFailed",legacyAnnouncementSettingsKey:"accessibility.alert.terminalCommandFailed",announcementMessage:L("accessibility.signals.terminalCommandFailed","Command Failed"),settingsKey:"accessibility.signals.terminalCommandFailed"});Tt.terminalCommandSucceeded=Tt.register({name:L("accessibilitySignals.terminalCommandSucceeded","Terminal Command Succeeded"),sound:vt.success,announcementMessage:L("accessibility.signals.terminalCommandSucceeded","Command Succeeded"),settingsKey:"accessibility.signals.terminalCommandSucceeded"});Tt.terminalBell=Tt.register({name:L("accessibilitySignals.terminalBell","Terminal Bell"),sound:vt.terminalBell,legacySoundSettingsKey:"audioCues.terminalBell",legacyAnnouncementSettingsKey:"accessibility.alert.terminalBell",announcementMessage:L("accessibility.signals.terminalBell","Terminal Bell"),settingsKey:"accessibility.signals.terminalBell"});Tt.notebookCellCompleted=Tt.register({name:L("accessibilitySignals.notebookCellCompleted","Notebook Cell Completed"),sound:vt.taskCompleted,legacySoundSettingsKey:"audioCues.notebookCellCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellCompleted",announcementMessage:L("accessibility.signals.notebookCellCompleted","Notebook Cell Completed"),settingsKey:"accessibility.signals.notebookCellCompleted"});Tt.notebookCellFailed=Tt.register({name:L("accessibilitySignals.notebookCellFailed","Notebook Cell Failed"),sound:vt.taskFailed,legacySoundSettingsKey:"audioCues.notebookCellFailed",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellFailed",announcementMessage:L("accessibility.signals.notebookCellFailed","Notebook Cell Failed"),settingsKey:"accessibility.signals.notebookCellFailed"});Tt.diffLineInserted=Tt.register({name:L("accessibilitySignals.diffLineInserted","Diff Line Inserted"),sound:vt.diffLineInserted,legacySoundSettingsKey:"audioCues.diffLineInserted",settingsKey:"accessibility.signals.diffLineInserted"});Tt.diffLineDeleted=Tt.register({name:L("accessibilitySignals.diffLineDeleted","Diff Line Deleted"),sound:vt.diffLineDeleted,legacySoundSettingsKey:"audioCues.diffLineDeleted",settingsKey:"accessibility.signals.diffLineDeleted"});Tt.diffLineModified=Tt.register({name:L("accessibilitySignals.diffLineModified","Diff Line Modified"),sound:vt.diffLineModified,legacySoundSettingsKey:"audioCues.diffLineModified",settingsKey:"accessibility.signals.diffLineModified"});Tt.chatRequestSent=Tt.register({name:L("accessibilitySignals.chatRequestSent","Chat Request Sent"),sound:vt.chatRequestSent,legacySoundSettingsKey:"audioCues.chatRequestSent",legacyAnnouncementSettingsKey:"accessibility.alert.chatRequestSent",announcementMessage:L("accessibility.signals.chatRequestSent","Chat Request Sent"),settingsKey:"accessibility.signals.chatRequestSent"});Tt.chatResponseReceived=Tt.register({name:L("accessibilitySignals.chatResponseReceived","Chat Response Received"),legacySoundSettingsKey:"audioCues.chatResponseReceived",sound:{randomOneOf:[vt.chatResponseReceived1,vt.chatResponseReceived2,vt.chatResponseReceived3,vt.chatResponseReceived4]},settingsKey:"accessibility.signals.chatResponseReceived"});Tt.progress=Tt.register({name:L("accessibilitySignals.progress","Progress"),sound:vt.progress,legacySoundSettingsKey:"audioCues.chatResponsePending",legacyAnnouncementSettingsKey:"accessibility.alert.progress",announcementMessage:L("accessibility.signals.progress","Progress"),settingsKey:"accessibility.signals.progress"});Tt.clear=Tt.register({name:L("accessibilitySignals.clear","Clear"),sound:vt.clear,legacySoundSettingsKey:"audioCues.clear",legacyAnnouncementSettingsKey:"accessibility.alert.clear",announcementMessage:L("accessibility.signals.clear","Clear"),settingsKey:"accessibility.signals.clear"});Tt.save=Tt.register({name:L("accessibilitySignals.save","Save"),sound:vt.save,legacySoundSettingsKey:"audioCues.save",legacyAnnouncementSettingsKey:"accessibility.alert.save",announcementMessage:L("accessibility.signals.save","Save"),settingsKey:"accessibility.signals.save"});Tt.format=Tt.register({name:L("accessibilitySignals.format","Format"),sound:vt.format,legacySoundSettingsKey:"audioCues.format",legacyAnnouncementSettingsKey:"accessibility.alert.format",announcementMessage:L("accessibility.signals.format","Format"),settingsKey:"accessibility.signals.format"});Tt.voiceRecordingStarted=Tt.register({name:L("accessibilitySignals.voiceRecordingStarted","Voice Recording Started"),sound:vt.voiceRecordingStarted,legacySoundSettingsKey:"audioCues.voiceRecordingStarted",settingsKey:"accessibility.signals.voiceRecordingStarted"});Tt.voiceRecordingStopped=Tt.register({name:L("accessibilitySignals.voiceRecordingStopped","Voice Recording Stopped"),sound:vt.voiceRecordingStopped,legacySoundSettingsKey:"audioCues.voiceRecordingStopped",settingsKey:"accessibility.signals.voiceRecordingStopped"});class tKe extends Le{constructor(e,t=[]){super(),this.logger=new vRe([e,...t]),this._register(e.onDidChangeLogLevel(i=>this.setLevel(i)))}get onDidChangeLogLevel(){return this.logger.onDidChangeLogLevel}setLevel(e){this.logger.setLevel(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}warn(e,...t){this.logger.warn(e,...t)}error(e,...t){this.logger.error(e,...t)}}const iKe=[];function nKe(){return iKe.slice(0)}var gu=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},bs=function(n,e){return function(t,i){e(t,i,n)}};class sKe{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new ue}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}let gF=class{constructor(e){this.modelService=e}createModelReference(e){const t=this.modelService.getModel(e);return t?Promise.resolve(new tNe(new sKe(t))):Promise.reject(new Error("Model not found"))}};gF=gu([bs(0,Ws)],gF);class NT{show(){return NT.NULL_PROGRESS_RUNNER}async showWhile(e,t){await e}}NT.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};class rKe{withProgress(e,t,i){return t({report:()=>{}})}}class oKe{constructor(){this.isExtensionDevelopment=!1,this.isBuilt=!1}}class aKe{async confirm(e){return{confirmed:this.doConfirm(e.message,e.detail),checkboxChecked:!1}}doConfirm(e,t){let i=e;return t&&(i=i+`

`+t),Di.confirm(i)}async prompt(e){var t,i;let s;if(this.doConfirm(e.message,e.detail)){const o=[...(t=e.buttons)!==null&&t!==void 0?t:[]];e.cancelButton&&typeof e.cancelButton!="string"&&typeof e.cancelButton!="boolean"&&o.push(e.cancelButton),s=await((i=o[0])===null||i===void 0?void 0:i.run({checkboxChecked:!1}))}return{result:s}}async error(e,t){await this.prompt({type:Jn.Error,message:e,detail:t})}}class R1{info(e){return this.notify({severity:Jn.Info,message:e})}warn(e){return this.notify({severity:Jn.Warning,message:e})}error(e){return this.notify({severity:Jn.Error,message:e})}notify(e){switch(e.severity){case Jn.Error:console.error(e.message);break;case Jn.Warning:console.warn(e.message);break;default:console.log(e.message);break}return R1.NO_OP}prompt(e,t,i,s){return R1.NO_OP}status(e,t){return Le.None}}R1.NO_OP=new lZe;let mF=class{constructor(e){this._onWillExecuteCommand=new ue,this._onDidExecuteCommand=new ue,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...t){const i=cs.getCommand(e);if(!i)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const s=this._instantiationService.invokeFunction.apply(this._instantiationService,[i.handler,...t]);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(s)}catch(s){return Promise.reject(s)}}};mF=gu([bs(0,Si)],mF);let Jb=class extends dHe{constructor(e,t,i,s,r,o){super(e,t,i,s,r),this._cachedResolver=null,this._dynamicKeybindings=[],this._domNodeListeners=[];const a=f=>{const g=new ct;g.add(we(f,Ge.KEY_DOWN,m=>{const p=new Ji(m);this._dispatch(p,p.target)&&(p.preventDefault(),p.stopPropagation())})),g.add(we(f,Ge.KEY_UP,m=>{const p=new Ji(m);this._singleModifierDispatch(p,p.target)&&p.preventDefault()})),this._domNodeListeners.push(new lKe(f,g))},l=f=>{for(let g=0;g<this._domNodeListeners.length;g++){const m=this._domNodeListeners[g];m.domNode===f&&(this._domNodeListeners.splice(g,1),m.dispose())}},c=f=>{f.getOption(61)||a(f.getContainerDomNode())},d=f=>{f.getOption(61)||l(f.getContainerDomNode())};this._register(o.onCodeEditorAdd(c)),this._register(o.onCodeEditorRemove(d)),o.listCodeEditors().forEach(c);const u=f=>{a(f.getContainerDomNode())},h=f=>{l(f.getContainerDomNode())};this._register(o.onDiffEditorAdd(u)),this._register(o.onDiffEditorRemove(h)),o.listDiffEditors().forEach(u)}addDynamicKeybinding(e,t,i,s){return xc(cs.registerCommand(e,i),this.addDynamicKeybindings([{keybinding:t,command:e,when:s}]))}addDynamicKeybindings(e){const t=e.map(i=>{var s;return{keybinding:$9(i.keybinding,Ma),command:(s=i.command)!==null&&s!==void 0?s:null,commandArgs:i.commandArgs,when:i.when,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}});return this._dynamicKeybindings=this._dynamicKeybindings.concat(t),this.updateResolver(),Et(()=>{for(let i=0;i<this._dynamicKeybindings.length;i++)if(this._dynamicKeybindings[i]===t[0]){this._dynamicKeybindings.splice(i,t.length),this.updateResolver();return}})}updateResolver(){this._cachedResolver=null,this._onDidUpdateKeybindings.fire()}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(lm.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new w_(e,t,i=>this._log(i))}return this._cachedResolver}_documentHasFocus(){return Di.document.hasFocus()}_toNormalizedKeybindingItems(e,t){const i=[];let s=0;for(const r of e){const o=r.when||void 0,a=r.keybinding;if(!a)i[s++]=new oj(void 0,r.command,r.commandArgs,o,t,null,!1);else{const l=y1.resolveKeybinding(a,Ma);for(const c of l)i[s++]=new oj(c,r.command,r.commandArgs,o,t,null,!1)}}return i}resolveKeyboardEvent(e){const t=new xg(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode);return new y1([t],Ma)}};Jb=gu([bs(0,oi),bs(1,eo),bs(2,df),bs(3,Rr),bs(4,Yc),bs(5,Vn)],Jb);class lKe extends Le{constructor(e,t){super(),this.domNode=e,this._register(t)}}function jj(n){return n&&typeof n=="object"&&(!n.overrideIdentifier||typeof n.overrideIdentifier=="string")&&(!n.resource||n.resource instanceof Ft)}let yk=class{constructor(e){this.logService=e,this._onDidChangeConfiguration=new ue,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event;const t=new qYe(e);this._configuration=new bT(t.reload(),Ms.createEmptyModel(e),Ms.createEmptyModel(e),Ms.createEmptyModel(e),Ms.createEmptyModel(e),Ms.createEmptyModel(e),new An,Ms.createEmptyModel(e),new An,e),t.dispose()}getValue(e,t){const i=typeof e=="string"?e:void 0,s=jj(e)?e:jj(t)?t:{};return this._configuration.getValue(i,s,void 0)}updateValues(e){const t={data:this._configuration.toData()},i=[];for(const s of e){const[r,o]=s;this.getValue(r)!==o&&(this._configuration.updateValue(r,o),i.push(r))}if(i.length>0){const s=new oHe({keys:i,overrides:[]},t,this._configuration,void 0,this.logService);s.source=8,this._onDidChangeConfiguration.fire(s)}return Promise.resolve()}updateValue(e,t,i,s){return this.updateValues([[e,t]])}inspect(e,t={}){return this._configuration.inspect(e,t,void 0)}};yk=gu([bs(0,Yc)],yk);let pF=class{constructor(e,t,i){this.configurationService=e,this.modelService=t,this.languageService=i,this._onDidChangeConfiguration=new ue,this.configurationService.onDidChangeConfiguration(s=>{this._onDidChangeConfiguration.fire({affectedKeys:s.affectedKeys,affectsConfiguration:(r,o)=>s.affectsConfiguration(o)})})}getValue(e,t,i){const s=pe.isIPosition(t)?t:null,r=s?typeof i=="string"?i:void 0:typeof t=="string"?t:void 0,o=e?this.getLanguage(e,s):void 0;return typeof r>"u"?this.configurationService.getValue({resource:e,overrideIdentifier:o}):this.configurationService.getValue(r,{resource:e,overrideIdentifier:o})}getLanguage(e,t){const i=this.modelService.getModel(e);return i?t?i.getLanguageIdAtPosition(t.lineNumber,t.column):i.getLanguageId():this.languageService.guessLanguageIdByFilepathOrFirstLine(e)}};pF=gu([bs(0,gn),bs(1,Ws),bs(2,Cs)],pF);let bF=class{constructor(e){this.configurationService=e}getEOL(e,t){const i=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return i&&typeof i=="string"&&i!=="auto"?i:Er||jt?`
`:`\r
`}};bF=gu([bs(0,gn)],bF);class cKe{publicLog2(){}}class W1{constructor(){const e=Ft.from({scheme:W1.SCHEME,authority:"model",path:"/"});this.workspace={id:ZZe,folders:[new PZe({uri:e,name:"",index:0})]}}getWorkspace(){return this.workspace}getWorkspaceFolder(e){return e&&e.scheme===W1.SCHEME?this.workspace.folders[0]:null}}W1.SCHEME="inmemory";function Sk(n,e,t){if(!e||!(n instanceof yk))return;const i=[];Object.keys(e).forEach(s=>{eHe(s)&&i.push([`editor.${s}`,e[s]]),t&&tHe(s)&&i.push([`diffEditor.${s}`,e[s]])}),i.length>0&&n.updateValues(i)}let vF=class{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}async apply(e,t){const i=Array.isArray(e)?e:OP.convert(e),s=new Map;for(const a of i){if(!(a instanceof Sh))throw new Error("bad edit - only text edits are supported");const l=this._modelService.getModel(a.resource);if(!l)throw new Error("bad edit - model not found");if(typeof a.versionId=="number"&&l.getVersionId()!==a.versionId)throw new Error("bad state - model changed in the meantime");let c=s.get(l);c||(c=[],s.set(l,c)),c.push(nHe.replaceMove(te.lift(a.textEdit.range),a.textEdit.text))}let r=0,o=0;for(const[a,l]of s)a.pushStackElement(),a.pushEditOperations([],l,()=>[]),a.pushStackElement(),o+=1,r+=l.length;return{ariaSummary:$C(AA.bulkEditServiceSummary,r,o),isApplied:r>0}}};vF=gu([bs(0,Ws)],vF);class dKe{getUriLabel(e,t){return e.scheme==="file"?e.fsPath:e.path}getUriBasenameLabel(e){return CP(e)}}let _F=class extends Kze{constructor(e,t){super(e),this._codeEditorService=t}showContextView(e,t,i){if(!t){const s=this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor();s&&(t=s.getContainerDomNode())}return super.showContextView(e,t,i)}};_F=gu([bs(0,ff),bs(1,Vn)],_F);class uKe{constructor(){this._neverEmitter=new ue,this.onDidChangeTrust=this._neverEmitter.event}isWorkspaceTrusted(){return!0}}class hKe extends C1{constructor(){super()}}class fKe extends tKe{constructor(){super(new bRe)}}let wF=class extends GA{constructor(e,t,i,s,r,o){super(e,t,i,s,r,o),this.configure({blockMouse:!1})}};wF=gu([bs(0,df),bs(1,Rr),bs(2,I0),bs(3,Ls),bs(4,cm),bs(5,oi)],wF);class gKe{async playSignal(e,t){}}fi(Yc,fKe,0);fi(gn,yk,0);fi(uoe,pF,0);fi(hoe,bF,0);fi(Q2,W1,0);fi(pHe,dKe,0);fi(df,cKe,0);fi(voe,aKe,0);fi(Gre,oKe,0);fi(Rr,R1,0);fi(wm,Au,0);fi(Cs,hKe,0);fi(qa,AYe,0);fi(Ws,ck,0);fi(dne,UA,0);fi(oi,fF,0);fi($se,rKe,0);fi(JP,NT,0);fi(W0,uBe,0);fi(Rw,xA,0);fi(PP,vF,0);fi(bHe,uKe,0);fi(hw,gF,0);fi(Xl,lF,0);fi(Jc,JUe,0);fi(eo,mF,0);fi(Ls,Jb,0);fi(D0,oF,0);fi(I0,_F,0);fi(pm,HA,0);fi(bm,_k,0);fi(jc,wF,0);fi(cm,cF,0);fi(ET,gKe,0);var _t;(function(n){const e=new Tw;for(const[l,c]of RH())e.set(l,c);const t=new wk(e,!0);e.set(Si,t);function i(l){s||o({});const c=e.get(l);if(!c)throw new Error("Missing service "+l);return c instanceof lc?t.invokeFunction(d=>d.get(l)):c}n.get=i;let s=!1;const r=new ue;function o(l){if(s)return t;s=!0;for(const[d,u]of RH())e.get(d)||e.set(d,u);for(const d in l)if(l.hasOwnProperty(d)){const u=ri(d);e.get(u)instanceof lc&&e.set(u,l[d])}const c=nKe();for(const d of c)try{t.createInstance(d)}catch(u){gi(u)}return r.fire(),t}n.initialize=o;function a(l){if(s)return l();const c=new ct,d=c.add(r.event(()=>{d.dispose(),c.add(l())}));return c}n.withServices=a})(_t||(_t={}));function GO(){return o3&&!!o3.VSCODE_DEV}function rae(n){if(GO()){const e=mKe();return e.add(n),{dispose(){e.delete(n)}}}else return{dispose(){}}}function mKe(){bS||(bS=new Set);const n=globalThis;return n.$hotReload_applyNewExports||(n.$hotReload_applyNewExports=e=>{const t={config:{mode:void 0},...e};for(const i of bS){const s=i(t);if(s)return s}}),bS}let bS;GO()&&rae(({oldExports:n,newSrc:e,config:t})=>{if(t.mode==="patch-prototype")return i=>{var s,r;for(const o in i){const a=i[o];if(console.log(`[hot-reload] Patching prototype methods of '${o}'`,{exportedItem:a}),typeof a=="function"&&a.prototype){const l=n[o];if(l){for(const c of Object.getOwnPropertyNames(a.prototype)){const d=Object.getOwnPropertyDescriptor(a.prototype,c),u=Object.getOwnPropertyDescriptor(l.prototype,c);((s=d?.value)===null||s===void 0?void 0:s.toString())!==((r=u?.value)===null||r===void 0?void 0:r.toString())&&console.log(`[hot-reload] Patching prototype method '${o}.${c}'`),Object.defineProperty(l.prototype,c,d)}i[o]=l}}}return!0}});function pKe(n,e,t,i){if(n.length===0)return e;if(e.length===0)return n;const s=[];let r=0,o=0;for(;r<n.length&&o<e.length;){const a=n[r],l=e[o],c=t(a),d=t(l);c<d?(s.push(a),r++):c>d?(s.push(l),o++):(s.push(i(a,l)),r++,o++)}for(;r<n.length;)s.push(n[r]),r++;for(;o<e.length;)s.push(e[o]),o++;return s}function Ck(n,e){const t=new ct,i=n.createDecorationsCollection();return t.add(nO({debugName:()=>`Apply decorations from ${e.debugName}`},s=>{const r=e.read(s);i.set(r)})),t.add({dispose:()=>{i.clear()}}),t}function zv(n,e){return n.appendChild(e),Et(()=>{n.removeChild(e)})}function bKe(n,e){return n.prepend(e),Et(()=>{n.removeChild(e)})}class oae extends Le{get width(){return this._width}get height(){return this._height}get automaticLayout(){return this._automaticLayout}constructor(e,t){super(),this._automaticLayout=!1,this.elementSizeObserver=this._register(new gne(e,t)),this._width=vi(this,this.elementSizeObserver.getWidth()),this._height=vi(this,this.elementSizeObserver.getHeight()),this._register(this.elementSizeObserver.onDidChange(i=>_s(s=>{this._width.set(this.elementSizeObserver.getWidth(),s),this._height.set(this.elementSizeObserver.getHeight(),s)})))}observe(e){this.elementSizeObserver.observe(e)}setAutomaticLayout(e){this._automaticLayout=e,e?this.elementSizeObserver.startObserving():this.elementSizeObserver.stopObserving()}}function Jj(n,e,t){let i=e.get(),s=i,r=i;const o=vi("animatedValue",i);let a=-1;const l=300;let c;t.add(lT({createEmptyChangeSummary:()=>({animate:!1}),handleChange:(u,h)=>(u.didChange(e)&&(h.animate=h.animate||u.change),!0)},(u,h)=>{c!==void 0&&(n.cancelAnimationFrame(c),c=void 0),s=r,i=e.read(u),a=Date.now()-(h.animate?0:l),d()}));function d(){const u=Date.now()-a;r=Math.floor(vKe(u,s,i-s,l)),u<l?c=n.requestAnimationFrame(d):r=i,o.set(r,void 0)}return o}function vKe(n,e,t,i){return n===i?e+t:t*(-Math.pow(2,-10*n/i)+1)+e}class aae extends Le{constructor(e,t,i){super(),this._register(new RT(e,i)),this._register(Hh(i,{height:t.actualHeight,top:t.actualTop}))}}class Lk{get afterLineNumber(){return this._afterLineNumber.get()}constructor(e,t){this._afterLineNumber=e,this.heightInPx=t,this.domNode=document.createElement("div"),this._actualTop=vi(this,void 0),this._actualHeight=vi(this,void 0),this.actualTop=this._actualTop,this.actualHeight=this._actualHeight,this.showInHiddenAreas=!0,this.onChange=this._afterLineNumber,this.onDomNodeTop=i=>{this._actualTop.set(i,void 0)},this.onComputedHeight=i=>{this._actualHeight.set(i,void 0)}}}class RT{constructor(e,t){this._editor=e,this._domElement=t,this._overlayWidgetId=`managedOverlayWidget-${RT._counter++}`,this._overlayWidget={getId:()=>this._overlayWidgetId,getDomNode:()=>this._domElement,getPosition:()=>null},this._editor.addOverlayWidget(this._overlayWidget)}dispose(){this._editor.removeOverlayWidget(this._overlayWidget)}}RT._counter=0;function Hh(n,e){return ki(t=>{for(let[i,s]of Object.entries(e))s&&typeof s=="object"&&"read"in s&&(s=s.read(t)),typeof s=="number"&&(s=`${s}px`),i=i.replace(/[A-Z]/g,r=>"-"+r.toLowerCase()),n.style[i]=s})}function ka(n,e){return _Ke([n],e),n}function _Ke(n,e){GO()&&Qo("reload",i=>rae(({oldExports:s})=>{if([...Object.values(s)].some(r=>n.includes(r)))return r=>(i(void 0),!0)})).read(e)}function kk(n,e,t,i){const s=new ct,r=[];return s.add(Oc((o,a)=>{const l=e.read(o),c=new Map,d=new Map;t&&t(!0),n.changeViewZones(u=>{for(const h of r)u.removeZone(h),i?.delete(h);r.length=0;for(const h of l){const f=u.addZone(h);h.setZoneId&&h.setZoneId(f),r.push(f),i?.add(f),c.set(h,f)}}),t&&t(!1),a.add(lT({createEmptyChangeSummary(){return{zoneIds:[]}},handleChange(u,h){const f=d.get(u.changedObservable);return f!==void 0&&h.zoneIds.push(f),!0}},(u,h)=>{for(const f of l)f.onChange&&(d.set(f.onChange,c.get(f)),f.onChange.read(u));t&&t(!0),n.changeViewZones(f=>{for(const g of h.zoneIds)f.layoutZone(g)}),t&&t(!1)}))})),s.add({dispose(){t&&t(!0),n.changeViewZones(o=>{for(const a of r)o.removeZone(a)}),i?.clear(),t&&t(!1)}}),s}function $j(n,e){const t=yL(e,s=>s.original.startLineNumber<=n.lineNumber);if(!t)return te.fromPositions(n);if(t.original.endLineNumberExclusive<=n.lineNumber){const s=n.lineNumber-t.original.endLineNumberExclusive+t.modified.endLineNumberExclusive;return te.fromPositions(new pe(s,n.column))}if(!t.innerChanges)return te.fromPositions(new pe(t.modified.startLineNumber,1));const i=yL(t.innerChanges,s=>s.originalRange.getStartPosition().isBeforeOrEqual(n));if(!i){const s=n.lineNumber-t.original.startLineNumber+t.modified.startLineNumber;return te.fromPositions(new pe(s,n.column))}if(i.originalRange.containsPosition(n))return i.modifiedRange;{const s=wKe(i.originalRange.getEndPosition(),n);return te.fromPositions(s.addToPosition(i.modifiedRange.getEndPosition()))}}function wKe(n,e){return n.lineNumber===e.lineNumber?new sa(0,e.column-n.column):new sa(e.lineNumber-n.lineNumber,e.column-1)}function yKe(n,e){let t;return n.filter(i=>{const s=e(i,t);return t=i,s})}var BO=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},XO=function(n,e){return function(t,i){e(t,i,n)}};const SKe=tr("diff-review-insert",Qe.add,L("accessibleDiffViewerInsertIcon","Icon for 'Insert' in accessible diff viewer.")),CKe=tr("diff-review-remove",Qe.remove,L("accessibleDiffViewerRemoveIcon","Icon for 'Remove' in accessible diff viewer.")),LKe=tr("diff-review-close",Qe.close,L("accessibleDiffViewerCloseIcon","Icon for 'Close' in accessible diff viewer."));let oh=class extends Le{constructor(e,t,i,s,r,o,a,l,c){super(),this._parentNode=e,this._visible=t,this._setVisible=i,this._canClose=s,this._width=r,this._height=o,this._diffs=a,this._models=l,this._instantiationService=c,this._state=N0(this,(d,u)=>{const h=this._visible.read(d);if(this._parentNode.style.visibility=h?"visible":"hidden",!h)return null;const f=u.add(this._instantiationService.createInstance(yF,this._diffs,this._models,this._setVisible,this._canClose)),g=u.add(this._instantiationService.createInstance(SF,this._parentNode,f,this._width,this._height,this._models));return{model:f,view:g}}).recomputeInitiallyAndOnChange(this._store)}next(){_s(e=>{const t=this._visible.get();this._setVisible(!0,e),t&&this._state.get().model.nextGroup(e)})}prev(){_s(e=>{this._setVisible(!0,e),this._state.get().model.previousGroup(e)})}close(){_s(e=>{this._setVisible(!1,e)})}};oh._ttPolicy=mm("diffReview",{createHTML:n=>n});oh=BO([XO(8,Si)],oh);let yF=class extends Le{constructor(e,t,i,s,r){super(),this._diffs=e,this._models=t,this._setVisible=i,this.canClose=s,this._accessibilitySignalService=r,this._groups=vi(this,[]),this._currentGroupIdx=vi(this,0),this._currentElementIdx=vi(this,0),this.groups=this._groups,this.currentGroup=this._currentGroupIdx.map((o,a)=>this._groups.read(a)[o]),this.currentGroupIndex=this._currentGroupIdx,this.currentElement=this._currentElementIdx.map((o,a)=>{var l;return(l=this.currentGroup.read(a))===null||l===void 0?void 0:l.lines[o]}),this._register(ki(o=>{const a=this._diffs.read(o);if(!a){this._groups.set([],void 0);return}const l=kKe(a,this._models.getOriginalModel().getLineCount(),this._models.getModifiedModel().getLineCount());_s(c=>{const d=this._models.getModifiedPosition();if(d){const u=l.findIndex(h=>d?.lineNumber<h.range.modified.endLineNumberExclusive);u!==-1&&this._currentGroupIdx.set(u,c)}this._groups.set(l,c)})})),this._register(ki(o=>{const a=this.currentElement.read(o);a?.type===Sr.Deleted?this._accessibilitySignalService.playSignal(Tt.diffLineDeleted,{source:"accessibleDiffViewer.currentElementChanged"}):a?.type===Sr.Added&&this._accessibilitySignalService.playSignal(Tt.diffLineInserted,{source:"accessibleDiffViewer.currentElementChanged"})})),this._register(ki(o=>{var a;const l=this.currentElement.read(o);if(l&&l.type!==Sr.Header){const c=(a=l.modifiedLineNumber)!==null&&a!==void 0?a:l.diff.modified.startLineNumber;this._models.modifiedSetSelection(te.fromPositions(new pe(c,1)))}}))}_goToGroupDelta(e,t){const i=this.groups.get();!i||i.length<=1||tO(t,s=>{this._currentGroupIdx.set(Rt.ofLength(i.length).clipCyclic(this._currentGroupIdx.get()+e),s),this._currentElementIdx.set(0,s)})}nextGroup(e){this._goToGroupDelta(1,e)}previousGroup(e){this._goToGroupDelta(-1,e)}_goToLineDelta(e){const t=this.currentGroup.get();!t||t.lines.length<=1||_s(i=>{this._currentElementIdx.set(Rt.ofLength(t.lines.length).clip(this._currentElementIdx.get()+e),i)})}goToNextLine(){this._goToLineDelta(1)}goToPreviousLine(){this._goToLineDelta(-1)}goToLine(e){const t=this.currentGroup.get();if(!t)return;const i=t.lines.indexOf(e);i!==-1&&_s(s=>{this._currentElementIdx.set(i,s)})}revealCurrentElementInEditor(){if(!this.canClose.get())return;this._setVisible(!1,void 0);const e=this.currentElement.get();e&&(e.type===Sr.Deleted?this._models.originalReveal(te.fromPositions(new pe(e.originalLineNumber,1))):this._models.modifiedReveal(e.type!==Sr.Header?te.fromPositions(new pe(e.modifiedLineNumber,1)):void 0))}close(){this.canClose.get()&&(this._setVisible(!1,void 0),this._models.modifiedFocus())}};yF=BO([XO(4,ET)],yF);const gv=3;function kKe(n,e,t){const i=[];for(const s of UV(n,(r,o)=>o.modified.startLineNumber-r.modified.endLineNumberExclusive<2*gv)){const r=[];r.push(new TKe);const o=new Lt(Math.max(1,s[0].original.startLineNumber-gv),Math.min(s[s.length-1].original.endLineNumberExclusive+gv,e+1)),a=new Lt(Math.max(1,s[0].modified.startLineNumber-gv),Math.min(s[s.length-1].modified.endLineNumberExclusive+gv,t+1));jie(s,(d,u)=>{const h=new Lt(d?d.original.endLineNumberExclusive:o.startLineNumber,u?u.original.startLineNumber:o.endLineNumberExclusive),f=new Lt(d?d.modified.endLineNumberExclusive:a.startLineNumber,u?u.modified.startLineNumber:a.endLineNumberExclusive);h.forEach(g=>{r.push(new MKe(g,f.startLineNumber+(g-h.startLineNumber)))}),u&&(u.original.forEach(g=>{r.push(new DKe(u,g))}),u.modified.forEach(g=>{r.push(new IKe(u,g))}))});const l=s[0].modified.join(s[s.length-1].modified),c=s[0].original.join(s[s.length-1].original);i.push(new xKe(new Cr(l,c),r))}return i}var Sr;(function(n){n[n.Header=0]="Header",n[n.Unchanged=1]="Unchanged",n[n.Deleted=2]="Deleted",n[n.Added=3]="Added"})(Sr||(Sr={}));class xKe{constructor(e,t){this.range=e,this.lines=t}}class TKe{constructor(){this.type=Sr.Header}}class DKe{constructor(e,t){this.diff=e,this.originalLineNumber=t,this.type=Sr.Deleted,this.modifiedLineNumber=void 0}}class IKe{constructor(e,t){this.diff=e,this.modifiedLineNumber=t,this.type=Sr.Added,this.originalLineNumber=void 0}}class MKe{constructor(e,t){this.originalLineNumber=e,this.modifiedLineNumber=t,this.type=Sr.Unchanged}}let SF=class extends Le{constructor(e,t,i,s,r,o){super(),this._element=e,this._model=t,this._width=i,this._height=s,this._models=r,this._languageService=o,this.domNode=this._element,this.domNode.className="monaco-component diff-review monaco-editor-background";const a=document.createElement("div");a.className="diff-review-actions",this._actionBar=this._register(new zh(a)),this._register(ki(l=>{this._actionBar.clear(),this._model.canClose.read(l)&&this._actionBar.push(new Gd("diffreview.close",L("label.close","Close"),"close-diff-review "+Vt.asClassName(LKe),!0,async()=>t.close()),{label:!1,icon:!0})})),this._content=document.createElement("div"),this._content.className="diff-review-content",this._content.setAttribute("role","code"),this._scrollbar=this._register(new uP(this._content,{})),Ir(this.domNode,this._scrollbar.getDomNode(),a),this._register(ki(l=>{this._height.read(l),this._width.read(l),this._scrollbar.scanDomNode()})),this._register(Et(()=>{Ir(this.domNode)})),this._register(Hh(this.domNode,{width:this._width,height:this._height})),this._register(Hh(this._content,{width:this._width,height:this._height})),this._register(Oc((l,c)=>{this._model.currentGroup.read(l),this._render(c)})),this._register(ws(this.domNode,"keydown",l=>{(l.equals(18)||l.equals(2066)||l.equals(530))&&(l.preventDefault(),this._model.goToNextLine()),(l.equals(16)||l.equals(2064)||l.equals(528))&&(l.preventDefault(),this._model.goToPreviousLine()),(l.equals(9)||l.equals(2057)||l.equals(521)||l.equals(1033))&&(l.preventDefault(),this._model.close()),(l.equals(10)||l.equals(3))&&(l.preventDefault(),this._model.revealCurrentElementInEditor())}))}_render(e){const t=this._models.getOriginalOptions(),i=this._models.getModifiedOptions(),s=document.createElement("div");s.className="diff-review-table",s.setAttribute("role","list"),s.setAttribute("aria-label",L("ariaLabel","Accessible Diff Viewer. Use arrow up and down to navigate.")),$s(s,i.get(50)),Ir(this._content,s);const r=this._models.getOriginalModel(),o=this._models.getModifiedModel();if(!r||!o)return;const a=r.getOptions(),l=o.getOptions(),c=i.get(67),d=this._model.currentGroup.get();for(const u of d?.lines||[]){if(!d)break;let h;if(u.type===Sr.Header){const g=document.createElement("div");g.className="diff-review-row",g.setAttribute("role","listitem");const m=d.range,p=this._model.currentGroupIndex.get(),b=this._model.groups.get().length,w=C=>C===0?L("no_lines_changed","no lines changed"):C===1?L("one_line_changed","1 line changed"):L("more_lines_changed","{0} lines changed",C),v=w(m.original.length),_=w(m.modified.length);g.setAttribute("aria-label",L({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",p+1,b,m.original.startLineNumber,v,m.modified.startLineNumber,_));const y=document.createElement("div");y.className="diff-review-cell diff-review-summary",y.appendChild(document.createTextNode(`${p+1}/${b}: @@ -${m.original.startLineNumber},${m.original.length} +${m.modified.startLineNumber},${m.modified.length} @@`)),g.appendChild(y),h=g}else h=this._createRow(u,c,this._width.get(),t,r,a,i,o,l);s.appendChild(h);const f=Xt(g=>this._model.currentElement.read(g)===u);e.add(ki(g=>{const m=f.read(g);h.tabIndex=m?0:-1,m&&h.focus()})),e.add(we(h,"focus",()=>{this._model.goToLine(u)}))}this._scrollbar.scanDomNode()}_createRow(e,t,i,s,r,o,a,l,c){const d=s.get(145),u=d.glyphMarginWidth+d.lineNumbersWidth,h=a.get(145),f=10+h.glyphMarginWidth+h.lineNumbersWidth;let g="diff-review-row",m="";const p="diff-review-spacer";let b=null;switch(e.type){case Sr.Added:g="diff-review-row line-insert",m=" char-insert",b=SKe;break;case Sr.Deleted:g="diff-review-row line-delete",m=" char-delete",b=CKe;break}const w=document.createElement("div");w.style.minWidth=i+"px",w.className=g,w.setAttribute("role","listitem"),w.ariaLevel="";const v=document.createElement("div");v.className="diff-review-cell",v.style.height=`${t}px`,w.appendChild(v);const _=document.createElement("span");_.style.width=u+"px",_.style.minWidth=u+"px",_.className="diff-review-line-number"+m,e.originalLineNumber!==void 0?_.appendChild(document.createTextNode(String(e.originalLineNumber))):_.innerText="",v.appendChild(_);const y=document.createElement("span");y.style.width=f+"px",y.style.minWidth=f+"px",y.style.paddingRight="10px",y.className="diff-review-line-number"+m,e.modifiedLineNumber!==void 0?y.appendChild(document.createTextNode(String(e.modifiedLineNumber))):y.innerText="",v.appendChild(y);const C=document.createElement("span");if(C.className=p,b){const I=document.createElement("span");I.className=Vt.asClassName(b),I.innerText="",C.appendChild(I)}else C.innerText="";v.appendChild(C);let S;if(e.modifiedLineNumber!==void 0){let I=this._getLineHtml(l,a,c.tabSize,e.modifiedLineNumber,this._languageService.languageIdCodec);oh._ttPolicy&&(I=oh._ttPolicy.createHTML(I)),v.insertAdjacentHTML("beforeend",I),S=l.getLineContent(e.modifiedLineNumber)}else{let I=this._getLineHtml(r,s,o.tabSize,e.originalLineNumber,this._languageService.languageIdCodec);oh._ttPolicy&&(I=oh._ttPolicy.createHTML(I)),v.insertAdjacentHTML("beforeend",I),S=r.getLineContent(e.originalLineNumber)}S.length===0&&(S=L("blankLine","blank"));let k="";switch(e.type){case Sr.Unchanged:e.originalLineNumber===e.modifiedLineNumber?k=L({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",S,e.originalLineNumber):k=L("equalLine","{0} original line {1} modified line {2}",S,e.originalLineNumber,e.modifiedLineNumber);break;case Sr.Added:k=L("insertLine","+ {0} modified line {1}",S,e.modifiedLineNumber);break;case Sr.Deleted:k=L("deleteLine","- {0} original line {1}",S,e.originalLineNumber);break}return w.setAttribute("aria-label",k),w}_getLineHtml(e,t,i,s,r){const o=e.getLineContent(s),a=t.get(50),l=Hn.createEmpty(o,r),c=Po.isBasicASCII(o,e.mightContainNonBasicASCII()),d=Po.containsRTL(o,c,e.mightContainRTL());return X2(new k0(a.isMonospace&&!t.get(33),a.canUseHalfwidthRightwardsArrow,o,!1,c,d,0,l,[],i,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,t.get(117),t.get(99),t.get(94),t.get(51)!==Jo.OFF,null)).html}};SF=BO([XO(5,Cs)],SF);class EKe{constructor(e){this.editors=e}getOriginalModel(){return this.editors.original.getModel()}getOriginalOptions(){return this.editors.original.getOptions()}originalReveal(e){this.editors.original.revealRange(e),this.editors.original.setSelection(e),this.editors.original.focus()}getModifiedModel(){return this.editors.modified.getModel()}getModifiedOptions(){return this.editors.modified.getOptions()}modifiedReveal(e){e&&(this.editors.modified.revealRange(e),this.editors.modified.setSelection(e)),this.editors.modified.focus()}modifiedSetSelection(e){this.editors.modified.setSelection(e)}modifiedFocus(){this.editors.modified.focus()}getModifiedPosition(){var e;return(e=this.editors.modified.getPosition())!==null&&e!==void 0?e:void 0}}class kh extends Le{constructor(e,t,i,s,r){super(),this._rootElement=e,this._diffModel=t,this._originalEditorLayoutInfo=i,this._modifiedEditorLayoutInfo=s,this._editors=r,this._originalScrollTop=os(this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=os(this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._viewZonesChanged=Qo("onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this.width=vi(this,0),this._modifiedViewZonesChangedSignal=Qo("modified.onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this._originalViewZonesChangedSignal=Qo("original.onDidChangeViewZones",this._editors.original.onDidChangeViewZones),this._state=N0(this,(d,u)=>{var h;this._element.replaceChildren();const f=this._diffModel.read(d),g=(h=f?.diff.read(d))===null||h===void 0?void 0:h.movedTexts;if(!g||g.length===0){this.width.set(0,void 0);return}this._viewZonesChanged.read(d);const m=this._originalEditorLayoutInfo.read(d),p=this._modifiedEditorLayoutInfo.read(d);if(!m||!p){this.width.set(0,void 0);return}this._modifiedViewZonesChangedSignal.read(d),this._originalViewZonesChangedSignal.read(d);const b=g.map(k=>{function I(U,B){const Y=B.getTopForLineNumber(U.startLineNumber,!0),ne=B.getTopForLineNumber(U.endLineNumberExclusive,!0);return(Y+ne)/2}const T=I(k.lineRangeMapping.original,this._editors.original),D=this._originalScrollTop.read(d),M=I(k.lineRangeMapping.modified,this._editors.modified),E=this._modifiedScrollTop.read(d),W=T-D,P=M-E,N=Math.min(T,M),H=Math.max(T,M);return{range:new Rt(N,H),from:W,to:P,fromWithoutScroll:T,toWithoutScroll:M,move:k}});b.sort(YRe(Fa(k=>k.fromWithoutScroll>k.toWithoutScroll,KRe),Fa(k=>k.fromWithoutScroll>k.toWithoutScroll?k.fromWithoutScroll:-k.toWithoutScroll,vh)));const w=zO.compute(b.map(k=>k.range)),v=10,_=m.verticalScrollbarWidth,y=(w.getTrackCount()-1)*10+v*2,C=_+y+(p.contentLeft-kh.movedCodeBlockPadding);let S=0;for(const k of b){const I=w.getTrack(S),T=_+v+I*10,D=15,M=15,E=C,W=p.glyphMarginWidth+p.lineNumbersWidth,P=18,N=document.createElementNS("http://www.w3.org/2000/svg","rect");N.classList.add("arrow-rectangle"),N.setAttribute("x",`${E-W}`),N.setAttribute("y",`${k.to-P/2}`),N.setAttribute("width",`${W}`),N.setAttribute("height",`${P}`),this._element.appendChild(N);const H=document.createElementNS("http://www.w3.org/2000/svg","g"),U=document.createElementNS("http://www.w3.org/2000/svg","path");U.setAttribute("d",`M 0 ${k.from} L ${T} ${k.from} L ${T} ${k.to} L ${E-M} ${k.to}`),U.setAttribute("fill","none"),H.appendChild(U);const B=document.createElementNS("http://www.w3.org/2000/svg","polygon");B.classList.add("arrow"),u.add(ki(Y=>{U.classList.toggle("currentMove",k.move===f.activeMovedText.read(Y)),B.classList.toggle("currentMove",k.move===f.activeMovedText.read(Y))})),B.setAttribute("points",`${E-M},${k.to-D/2} ${E},${k.to} ${E-M},${k.to+D/2}`),H.appendChild(B),this._element.appendChild(H),S++}this.width.set(y,void 0)}),this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("class","moved-blocks-lines"),this._rootElement.appendChild(this._element),this._register(Et(()=>this._element.remove())),this._register(ki(d=>{const u=this._originalEditorLayoutInfo.read(d),h=this._modifiedEditorLayoutInfo.read(d);!u||!h||(this._element.style.left=`${u.width-u.verticalScrollbarWidth}px`,this._element.style.height=`${u.height}px`,this._element.style.width=`${u.verticalScrollbarWidth+u.contentLeft-kh.movedCodeBlockPadding+this.width.read(d)}px`)})),this._register(dT(this._state));const o=Xt(d=>{const u=this._diffModel.read(d),h=u?.diff.read(d);return h?h.movedTexts.map(f=>({move:f,original:new Lk(XL(f.lineRangeMapping.original.startLineNumber-1),18),modified:new Lk(XL(f.lineRangeMapping.modified.startLineNumber-1),18)})):[]});this._register(kk(this._editors.original,o.map(d=>d.map(u=>u.original)))),this._register(kk(this._editors.modified,o.map(d=>d.map(u=>u.modified)))),this._register(Oc((d,u)=>{const h=o.read(d);for(const f of h)u.add(new Qj(this._editors.original,f.original,f.move,"original",this._diffModel.get())),u.add(new Qj(this._editors.modified,f.modified,f.move,"modified",this._diffModel.get()))}));const a=Qo("original.onDidFocusEditorWidget",d=>this._editors.original.onDidFocusEditorWidget(()=>setTimeout(()=>d(void 0),0))),l=Qo("modified.onDidFocusEditorWidget",d=>this._editors.modified.onDidFocusEditorWidget(()=>setTimeout(()=>d(void 0),0)));let c="modified";this._register(lT({createEmptyChangeSummary:()=>{},handleChange:(d,u)=>(d.didChange(a)&&(c="original"),d.didChange(l)&&(c="modified"),!0)},d=>{a.read(d),l.read(d);const u=this._diffModel.read(d);if(!u)return;const h=u.diff.read(d);let f;if(h&&c==="original"){const g=this._editors.originalCursor.read(d);g&&(f=h.movedTexts.find(m=>m.lineRangeMapping.original.contains(g.lineNumber)))}if(h&&c==="modified"){const g=this._editors.modifiedCursor.read(d);g&&(f=h.movedTexts.find(m=>m.lineRangeMapping.modified.contains(g.lineNumber)))}f!==u.movedTextToCompare.get()&&u.movedTextToCompare.set(void 0,void 0),u.setActiveMovedText(f)}))}}kh.movedCodeBlockPadding=4;class zO{static compute(e){const t=[],i=[];for(const s of e){let r=t.findIndex(o=>!o.intersectsStrict(s));r===-1&&(t.length>=6?r=G4e(t,Fa(a=>a.intersectWithRangeLength(s),vh)):(r=t.length,t.push(new vP))),t[r].addRange(s),i.push(r)}return new zO(t.length,i)}constructor(e,t){this._trackCount=e,this.trackPerLineIdx=t}getTrack(e){return this.trackPerLineIdx[e]}getTrackCount(){return this._trackCount}}class Qj extends aae{constructor(e,t,i,s,r){const o=wi("div.diff-hidden-lines-widget");super(e,t,o.root),this._editor=e,this._move=i,this._kind=s,this._diffModel=r,this._nodes=wi("div.diff-moved-code-block",{style:{marginRight:"4px"}},[wi("div.text-content@textContent"),wi("div.action-bar@actionBar")]),o.root.appendChild(this._nodes.root);const a=os(this._editor.onDidLayoutChange,()=>this._editor.getLayoutInfo());this._register(Hh(this._nodes.root,{paddingRight:a.map(h=>h.verticalScrollbarWidth)}));let l;i.changes.length>0?l=this._kind==="original"?L("codeMovedToWithChanges","Code moved with changes to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):L("codeMovedFromWithChanges","Code moved with changes from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1):l=this._kind==="original"?L("codeMovedTo","Code moved to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):L("codeMovedFrom","Code moved from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1);const c=this._register(new zh(this._nodes.actionBar,{highlightToggledItems:!0})),d=new Gd("",l,"",!1);c.push(d,{icon:!1,label:!0});const u=new Gd("","Compare",Vt.asClassName(Qe.compareChanges),!0,()=>{this._editor.focus(),this._diffModel.movedTextToCompare.set(this._diffModel.movedTextToCompare.get()===i?void 0:this._move,void 0)});this._register(ki(h=>{const f=this._diffModel.movedTextToCompare.read(h)===i;u.checked=f})),c.push(u,{icon:!1,label:!0})}}j("diffEditor.move.border",{dark:"#8b8b8b9c",light:"#8b8b8b9c",hcDark:"#8b8b8b9c",hcLight:"#8b8b8b9c"},L("diffEditor.move.border","The border color for text that got moved in the diff editor."));j("diffEditor.moveActive.border",{dark:"#FFA500",light:"#FFA500",hcDark:"#FFA500",hcLight:"#FFA500"},L("diffEditor.moveActive.border","The active border color for text that got moved in the diff editor."));j("diffEditor.unchangedRegionShadow",{dark:"#000000",light:"#737373BF",hcDark:"#000000",hcLight:"#737373BF"},L("diffEditor.unchangedRegionShadow","The color of the shadow around unchanged region widgets."));const NKe=tr("diff-insert",Qe.add,L("diffInsertIcon","Line decoration for inserts in the diff editor.")),lae=tr("diff-remove",Qe.remove,L("diffRemoveIcon","Line decoration for removals in the diff editor.")),qj=Qt.register({className:"line-insert",description:"line-insert",isWholeLine:!0,linesDecorationsClassName:"insert-sign "+Vt.asClassName(NKe),marginClassName:"gutter-insert"}),eJ=Qt.register({className:"line-delete",description:"line-delete",isWholeLine:!0,linesDecorationsClassName:"delete-sign "+Vt.asClassName(lae),marginClassName:"gutter-delete"}),tJ=Qt.register({className:"line-insert",description:"line-insert",isWholeLine:!0,marginClassName:"gutter-insert"}),iJ=Qt.register({className:"line-delete",description:"line-delete",isWholeLine:!0,marginClassName:"gutter-delete"}),nJ=Qt.register({className:"char-insert",description:"char-insert",shouldFillLineOnLineBreak:!0}),RKe=Qt.register({className:"char-insert",description:"char-insert",isWholeLine:!0}),WKe=Qt.register({className:"char-insert diff-range-empty",description:"char-insert diff-range-empty"}),CF=Qt.register({className:"char-delete",description:"char-delete",shouldFillLineOnLineBreak:!0}),AKe=Qt.register({className:"char-delete",description:"char-delete",isWholeLine:!0}),FKe=Qt.register({className:"char-delete diff-range-empty",description:"char-delete diff-range-empty"});class VKe extends Le{constructor(e,t,i,s){super(),this._editors=e,this._diffModel=t,this._options=i,this._decorations=Xt(this,r=>{var o;const a=(o=this._diffModel.read(r))===null||o===void 0?void 0:o.diff.read(r);if(!a)return null;const l=this._diffModel.read(r).movedTextToCompare.read(r),c=this._options.renderIndicators.read(r),d=this._options.showEmptyDecorations.read(r),u=[],h=[];if(!l)for(const g of a.mappings)if(g.lineRangeMapping.original.isEmpty||u.push({range:g.lineRangeMapping.original.toInclusiveRange(),options:c?eJ:iJ}),g.lineRangeMapping.modified.isEmpty||h.push({range:g.lineRangeMapping.modified.toInclusiveRange(),options:c?qj:tJ}),g.lineRangeMapping.modified.isEmpty||g.lineRangeMapping.original.isEmpty)g.lineRangeMapping.original.isEmpty||u.push({range:g.lineRangeMapping.original.toInclusiveRange(),options:AKe}),g.lineRangeMapping.modified.isEmpty||h.push({range:g.lineRangeMapping.modified.toInclusiveRange(),options:RKe});else for(const m of g.lineRangeMapping.innerChanges||[])g.lineRangeMapping.original.contains(m.originalRange.startLineNumber)&&u.push({range:m.originalRange,options:m.originalRange.isEmpty()&&d?FKe:CF}),g.lineRangeMapping.modified.contains(m.modifiedRange.startLineNumber)&&h.push({range:m.modifiedRange,options:m.modifiedRange.isEmpty()&&d?WKe:nJ});if(l)for(const g of l.changes){const m=g.original.toInclusiveRange();m&&u.push({range:m,options:c?eJ:iJ});const p=g.modified.toInclusiveRange();p&&h.push({range:p,options:c?qj:tJ});for(const b of g.innerChanges||[])u.push({range:b.originalRange,options:CF}),h.push({range:b.modifiedRange,options:nJ})}const f=this._diffModel.read(r).activeMovedText.read(r);for(const g of a.movedTexts)u.push({range:g.lineRangeMapping.original.toInclusiveRange(),options:{description:"moved",blockClassName:"movedOriginal"+(g===f?" currentMove":""),blockPadding:[kh.movedCodeBlockPadding,0,kh.movedCodeBlockPadding,kh.movedCodeBlockPadding]}}),h.push({range:g.lineRangeMapping.modified.toInclusiveRange(),options:{description:"moved",blockClassName:"movedModified"+(g===f?" currentMove":""),blockPadding:[4,0,4,4]}});return{originalDecorations:u,modifiedDecorations:h}}),this._register(Ck(this._editors.original,this._decorations.map(r=>r?.originalDecorations||[]))),this._register(Ck(this._editors.modified,this._decorations.map(r=>r?.modifiedDecorations||[])))}}class PKe{resetSash(){this._sashRatio.set(void 0,void 0)}constructor(e,t){this._options=e,this.dimensions=t,this.sashLeft=ure(this,i=>{var s;const r=(s=this._sashRatio.read(i))!==null&&s!==void 0?s:this._options.splitViewDefaultRatio.read(i);return this._computeSashLeft(r,i)},(i,s)=>{const r=this.dimensions.width.get();this._sashRatio.set(i/r,s)}),this._sashRatio=vi(this,void 0)}_computeSashLeft(e,t){const i=this.dimensions.width.read(t),s=Math.floor(this._options.splitViewDefaultRatio.read(t)*i),r=this._options.enableSplitViewResizing.read(t)?Math.floor(e*i):s,o=100;return i<=o*2?s:r<o?o:r>i-o?i-o:r}}class cae extends Le{constructor(e,t,i,s,r,o){super(),this._domNode=e,this._dimensions=t,this._enabled=i,this._boundarySashes=s,this.sashLeft=r,this._resetSash=o,this._sash=this._register(new So(this._domNode,{getVerticalSashTop:a=>0,getVerticalSashLeft:a=>this.sashLeft.get(),getVerticalSashHeight:a=>this._dimensions.height.get()},{orientation:0})),this._startSashPosition=void 0,this._register(this._sash.onDidStart(()=>{this._startSashPosition=this.sashLeft.get()})),this._register(this._sash.onDidChange(a=>{this.sashLeft.set(this._startSashPosition+(a.currentX-a.startX),void 0)})),this._register(this._sash.onDidEnd(()=>this._sash.layout())),this._register(this._sash.onDidReset(()=>this._resetSash())),this._register(ki(a=>{const l=this._boundarySashes.read(a);l&&(this._sash.orthogonalEndSash=l.bottom)})),this._register(ki(a=>{const l=this._enabled.read(a);this._sash.state=l?3:0,this.sashLeft.read(a),this._dimensions.height.read(a),this._sash.layout()}))}}var dae=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},LF=function(n,e){return function(t,i){e(t,i,n)}},Ef;const uae=ri("diffProviderFactoryService");let kF=class{constructor(e){this.instantiationService=e}createDiffProvider(e){return this.instantiationService.createInstance(xk,e)}};kF=dae([LF(0,Si)],kF);fi(uae,kF,1);let xk=Ef=class{constructor(e,t,i){this.editorWorkerService=t,this.telemetryService=i,this.onDidChangeEventEmitter=new ue,this.onDidChange=this.onDidChangeEventEmitter.event,this.diffAlgorithm="advanced",this.diffAlgorithmOnDidChangeSubscription=void 0,this.setOptions(e)}dispose(){var e;(e=this.diffAlgorithmOnDidChangeSubscription)===null||e===void 0||e.dispose()}async computeDiff(e,t,i,s){var r,o;if(typeof this.diffAlgorithm!="string")return this.diffAlgorithm.computeDiff(e,t,i,s);if(e.isDisposed()||t.isDisposed())return{changes:[],identical:!0,quitEarly:!1,moves:[]};if(e.getLineCount()===1&&e.getLineMaxColumn(1)===1)return t.getLineCount()===1&&t.getLineMaxColumn(1)===1?{changes:[],identical:!0,quitEarly:!1,moves:[]}:{changes:[new Ao(new Lt(1,2),new Lt(1,t.getLineCount()+1),[new Tl(e.getFullModelRange(),t.getFullModelRange())])],identical:!1,quitEarly:!1,moves:[]};const a=JSON.stringify([e.uri.toString(),t.uri.toString()]),l=JSON.stringify([e.id,t.id,e.getAlternativeVersionId(),t.getAlternativeVersionId(),JSON.stringify(i)]),c=Ef.diffCache.get(a);if(c&&c.context===l)return c.result;const d=Hc.create(),u=await this.editorWorkerService.computeDiff(e.uri,t.uri,i,this.diffAlgorithm),h=d.elapsed();if(this.telemetryService.publicLog2("diffEditor.computeDiff",{timeMs:h,timedOut:(r=u?.quitEarly)!==null&&r!==void 0?r:!0,detectedMoves:i.computeMoves?(o=u?.moves.length)!==null&&o!==void 0?o:0:-1}),s.isCancellationRequested)return{changes:[],identical:!1,quitEarly:!0,moves:[]};if(!u)throw new Error("no diff result available");return Ef.diffCache.size>10&&Ef.diffCache.delete(Ef.diffCache.keys().next().value),Ef.diffCache.set(a,{result:u,context:l}),u}setOptions(e){var t;let i=!1;e.diffAlgorithm&&this.diffAlgorithm!==e.diffAlgorithm&&((t=this.diffAlgorithmOnDidChangeSubscription)===null||t===void 0||t.dispose(),this.diffAlgorithmOnDidChangeSubscription=void 0,this.diffAlgorithm=e.diffAlgorithm,typeof e.diffAlgorithm!="string"&&(this.diffAlgorithmOnDidChangeSubscription=e.diffAlgorithm.onDidChange(()=>this.onDidChangeEventEmitter.fire())),i=!0),i&&this.onDidChangeEventEmitter.fire()}};xk.diffCache=new Map;xk=Ef=dae([LF(1,Rw),LF(2,df)],xk);var OKe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},ZKe=function(n,e){return function(t,i){e(t,i,n)}};let xF=class extends Le{setActiveMovedText(e){this._activeMovedText.set(e,void 0)}constructor(e,t,i){super(),this.model=e,this._options=t,this._diffProviderFactoryService=i,this._isDiffUpToDate=vi(this,!1),this.isDiffUpToDate=this._isDiffUpToDate,this._diff=vi(this,void 0),this.diff=this._diff,this._unchangedRegions=vi(this,void 0),this.unchangedRegions=Xt(this,a=>{var l,c;return this._options.hideUnchangedRegions.read(a)?(c=(l=this._unchangedRegions.read(a))===null||l===void 0?void 0:l.regions)!==null&&c!==void 0?c:[]:(_s(d=>{var u;for(const h of((u=this._unchangedRegions.get())===null||u===void 0?void 0:u.regions)||[])h.collapseAll(d)}),[])}),this.movedTextToCompare=vi(this,void 0),this._activeMovedText=vi(this,void 0),this._hoveredMovedText=vi(this,void 0),this.activeMovedText=Xt(this,a=>{var l,c;return(c=(l=this.movedTextToCompare.read(a))!==null&&l!==void 0?l:this._hoveredMovedText.read(a))!==null&&c!==void 0?c:this._activeMovedText.read(a)}),this._cancellationTokenSource=new nm,this._diffProvider=Xt(this,a=>{const l=this._diffProviderFactoryService.createDiffProvider({diffAlgorithm:this._options.diffAlgorithm.read(a)}),c=Qo("onDidChange",l.onDidChange);return{diffProvider:l,onChangeSignal:c}}),this._register(Et(()=>this._cancellationTokenSource.cancel()));const s=fre("contentChangedSignal"),r=this._register(new as(()=>s.trigger(void 0),200));this._register(ki(a=>{const l=this._unchangedRegions.read(a);if(!l||l.regions.some(g=>g.isDragged.read(a)))return;const c=l.originalDecorationIds.map(g=>e.original.getDecorationRange(g)).map(g=>g?Lt.fromRangeInclusive(g):void 0),d=l.modifiedDecorationIds.map(g=>e.modified.getDecorationRange(g)).map(g=>g?Lt.fromRangeInclusive(g):void 0),u=l.regions.map((g,m)=>!c[m]||!d[m]?void 0:new ah(c[m].startLineNumber,d[m].startLineNumber,c[m].length,g.visibleLineCountTop.read(a),g.visibleLineCountBottom.read(a))).filter(_b),h=[];let f=!1;for(const g of UV(u,(m,p)=>m.getHiddenModifiedRange(a).endLineNumberExclusive===p.getHiddenModifiedRange(a).startLineNumber))if(g.length>1){f=!0;const m=g.reduce((b,w)=>b+w.lineCount,0),p=new ah(g[0].originalLineNumber,g[0].modifiedLineNumber,m,g[0].visibleLineCountTop.get(),g[g.length-1].visibleLineCountBottom.get());h.push(p)}else h.push(g[0]);if(f){const g=e.original.deltaDecorations(l.originalDecorationIds,h.map(p=>({range:p.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))),m=e.modified.deltaDecorations(l.modifiedDecorationIds,h.map(p=>({range:p.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})));_s(p=>{this._unchangedRegions.set({regions:h,originalDecorationIds:g,modifiedDecorationIds:m},p)})}}));const o=(a,l,c)=>{const d=ah.fromDiffs(a.changes,e.original.getLineCount(),e.modified.getLineCount(),this._options.hideUnchangedRegionsMinimumLineCount.read(c),this._options.hideUnchangedRegionsContextLineCount.read(c));let u;const h=this._unchangedRegions.get();if(h){const p=h.originalDecorationIds.map(_=>e.original.getDecorationRange(_)).map(_=>_?Lt.fromRangeInclusive(_):void 0),b=h.modifiedDecorationIds.map(_=>e.modified.getDecorationRange(_)).map(_=>_?Lt.fromRangeInclusive(_):void 0);let v=yKe(h.regions.map((_,y)=>{if(!p[y]||!b[y])return;const C=p[y].length;return new ah(p[y].startLineNumber,b[y].startLineNumber,C,Math.min(_.visibleLineCountTop.get(),C),Math.min(_.visibleLineCountBottom.get(),C-_.visibleLineCountTop.get()))}).filter(_b),(_,y)=>!y||_.modifiedLineNumber>=y.modifiedLineNumber+y.lineCount&&_.originalLineNumber>=y.originalLineNumber+y.lineCount).map(_=>new Cr(_.getHiddenOriginalRange(c),_.getHiddenModifiedRange(c)));v=Cr.clip(v,Lt.ofLength(1,e.original.getLineCount()),Lt.ofLength(1,e.modified.getLineCount())),u=Cr.inverse(v,e.original.getLineCount(),e.modified.getLineCount())}const f=[];if(u)for(const p of d){const b=u.filter(w=>w.original.intersectsStrict(p.originalUnchangedRange)&&w.modified.intersectsStrict(p.modifiedUnchangedRange));f.push(...p.setVisibleRanges(b,l))}else f.push(...d);const g=e.original.deltaDecorations(h?.originalDecorationIds||[],f.map(p=>({range:p.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))),m=e.modified.deltaDecorations(h?.modifiedDecorationIds||[],f.map(p=>({range:p.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})));this._unchangedRegions.set({regions:f,originalDecorationIds:g,modifiedDecorationIds:m},l)};this._register(e.modified.onDidChangeContent(a=>{if(this._diff.get()){const c=Rd.fromModelContentChanges(a.changes);this._lastDiff,e.original,e.modified}this._isDiffUpToDate.set(!1,void 0),r.schedule()})),this._register(e.original.onDidChangeContent(a=>{if(this._diff.get()){const c=Rd.fromModelContentChanges(a.changes);this._lastDiff,e.original,e.modified}this._isDiffUpToDate.set(!1,void 0),r.schedule()})),this._register(Oc(async(a,l)=>{var c,d;this._options.hideUnchangedRegionsMinimumLineCount.read(a),this._options.hideUnchangedRegionsContextLineCount.read(a),r.cancel(),s.read(a);const u=this._diffProvider.read(a);u.onChangeSignal.read(a),ka(loe,a),ka(kA,a),this._isDiffUpToDate.set(!1,void 0);let h=[];l.add(e.original.onDidChangeContent(m=>{const p=Rd.fromModelContentChanges(m.changes);h=xL(h,p)}));let f=[];l.add(e.modified.onDidChangeContent(m=>{const p=Rd.fromModelContentChanges(m.changes);f=xL(f,p)}));let g=await u.diffProvider.computeDiff(e.original,e.modified,{ignoreTrimWhitespace:this._options.ignoreTrimWhitespace.read(a),maxComputationTimeMs:this._options.maxComputationTimeMs.read(a),computeMoves:this._options.showMoves.read(a)},this._cancellationTokenSource.token);this._cancellationTokenSource.token.isCancellationRequested||e.original.isDisposed()||e.modified.isDisposed()||(g=GKe(g,e.original,e.modified),g=(c=(e.original,e.modified,void 0))!==null&&c!==void 0?c:g,g=(d=(e.original,e.modified,void 0))!==null&&d!==void 0?d:g,_s(m=>{o(g,m),this._lastDiff=g;const p=HO.fromDiffResult(g);this._diff.set(p,m),this._isDiffUpToDate.set(!0,m);const b=this.movedTextToCompare.get();this.movedTextToCompare.set(b?this._lastDiff.moves.find(w=>w.lineRangeMapping.modified.intersect(b.lineRangeMapping.modified)):void 0,m)}))}))}ensureModifiedLineIsVisible(e,t,i){var s,r;if(((s=this.diff.get())===null||s===void 0?void 0:s.mappings.length)===0)return;const o=((r=this._unchangedRegions.get())===null||r===void 0?void 0:r.regions)||[];for(const a of o)if(a.getHiddenModifiedRange(void 0).contains(e)){a.showModifiedLine(e,t,i);return}}ensureOriginalLineIsVisible(e,t,i){var s,r;if(((s=this.diff.get())===null||s===void 0?void 0:s.mappings.length)===0)return;const o=((r=this._unchangedRegions.get())===null||r===void 0?void 0:r.regions)||[];for(const a of o)if(a.getHiddenOriginalRange(void 0).contains(e)){a.showOriginalLine(e,t,i);return}}async waitForDiff(){await i8e(this.isDiffUpToDate,e=>e)}serializeState(){const e=this._unchangedRegions.get();return{collapsedRegions:e?.regions.map(t=>({range:t.getHiddenModifiedRange(void 0).serialize()}))}}restoreSerializedState(e){var t;const i=(t=e.collapsedRegions)===null||t===void 0?void 0:t.map(r=>Lt.deserialize(r.range)),s=this._unchangedRegions.get();!s||!i||_s(r=>{for(const o of s.regions)for(const a of i)if(o.modifiedUnchangedRange.intersect(a)){o.setHiddenModifiedRange(a,r);break}})}};xF=OKe([ZKe(2,uae)],xF);function GKe(n,e,t){return{changes:n.changes.map(i=>new Ao(i.original,i.modified,i.innerChanges?i.innerChanges.map(s=>BKe(s,e,t)):void 0)),moves:n.moves,identical:n.identical,quitEarly:n.quitEarly}}function BKe(n,e,t){let i=n.originalRange,s=n.modifiedRange;return(i.endColumn!==1||s.endColumn!==1)&&i.endColumn===e.getLineMaxColumn(i.endLineNumber)&&s.endColumn===t.getLineMaxColumn(s.endLineNumber)&&i.endLineNumber<e.getLineCount()&&s.endLineNumber<t.getLineCount()&&(i=i.setEndPosition(i.endLineNumber+1,1),s=s.setEndPosition(s.endLineNumber+1,1)),new Tl(i,s)}class HO{static fromDiffResult(e){return new HO(e.changes.map(t=>new hae(t)),e.moves||[],e.identical,e.quitEarly)}constructor(e,t,i,s){this.mappings=e,this.movedTexts=t,this.identical=i,this.quitEarly=s}}class hae{constructor(e){this.lineRangeMapping=e}}class ah{static fromDiffs(e,t,i,s,r){const o=Ao.inverse(e,t,i),a=[];for(const l of o){let c=l.original.startLineNumber,d=l.modified.startLineNumber,u=l.original.length;const h=c===1&&d===1,f=c+u===t+1&&d+u===i+1;(h||f)&&u>=r+s?(h&&!f&&(u-=r),f&&!h&&(c+=r,d+=r,u-=r),a.push(new ah(c,d,u,0,0))):u>=r*2+s&&(c+=r,d+=r,u-=r*2,a.push(new ah(c,d,u,0,0)))}return a}get originalUnchangedRange(){return Lt.ofLength(this.originalLineNumber,this.lineCount)}get modifiedUnchangedRange(){return Lt.ofLength(this.modifiedLineNumber,this.lineCount)}constructor(e,t,i,s,r){this.originalLineNumber=e,this.modifiedLineNumber=t,this.lineCount=i,this._visibleLineCountTop=vi(this,0),this.visibleLineCountTop=this._visibleLineCountTop,this._visibleLineCountBottom=vi(this,0),this.visibleLineCountBottom=this._visibleLineCountBottom,this._shouldHideControls=Xt(this,l=>this.visibleLineCountTop.read(l)+this.visibleLineCountBottom.read(l)===this.lineCount&&!this.isDragged.read(l)),this.isDragged=vi(this,void 0);const o=Math.max(Math.min(s,this.lineCount),0),a=Math.max(Math.min(r,this.lineCount-s),0);SH(s===o),SH(r===a),this._visibleLineCountTop.set(o,void 0),this._visibleLineCountBottom.set(a,void 0)}setVisibleRanges(e,t){const i=[],s=new $o(e.map(l=>l.modified)).subtractFrom(this.modifiedUnchangedRange);let r=this.originalLineNumber,o=this.modifiedLineNumber;const a=this.modifiedLineNumber+this.lineCount;if(s.ranges.length===0)this.showAll(t),i.push(this);else{let l=0;for(const c of s.ranges){const d=l===s.ranges.length-1;l++;const u=(d?a:c.endLineNumberExclusive)-o,h=new ah(r,o,u,0,0);h.setHiddenModifiedRange(c,t),i.push(h),r=h.originalUnchangedRange.endLineNumberExclusive,o=h.modifiedUnchangedRange.endLineNumberExclusive}}return i}shouldHideControls(e){return this._shouldHideControls.read(e)}getHiddenOriginalRange(e){return Lt.ofLength(this.originalLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}getHiddenModifiedRange(e){return Lt.ofLength(this.modifiedLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}setHiddenModifiedRange(e,t){const i=e.startLineNumber-this.modifiedLineNumber,s=this.modifiedLineNumber+this.lineCount-e.endLineNumberExclusive;this.setState(i,s,t)}getMaxVisibleLineCountTop(){return this.lineCount-this._visibleLineCountBottom.get()}getMaxVisibleLineCountBottom(){return this.lineCount-this._visibleLineCountTop.get()}showMoreAbove(e=10,t){const i=this.getMaxVisibleLineCountTop();this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+e,i),t)}showMoreBelow(e=10,t){const i=this.lineCount-this._visibleLineCountTop.get();this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+e,i),t)}showAll(e){this._visibleLineCountBottom.set(this.lineCount-this._visibleLineCountTop.get(),e)}showModifiedLine(e,t,i){const s=e+1-(this.modifiedLineNumber+this._visibleLineCountTop.get()),r=this.modifiedLineNumber-this._visibleLineCountBottom.get()+this.lineCount-e;t===0&&s<r||t===1?this._visibleLineCountTop.set(this._visibleLineCountTop.get()+s,i):this._visibleLineCountBottom.set(this._visibleLineCountBottom.get()+r,i)}showOriginalLine(e,t,i){const s=e-this.originalLineNumber,r=this.originalLineNumber+this.lineCount-e;t===0&&s<r||t===1?this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+r-s,this.getMaxVisibleLineCountTop()),i):this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+s-r,this.getMaxVisibleLineCountBottom()),i)}collapseAll(e){this._visibleLineCountTop.set(0,e),this._visibleLineCountBottom.set(0,e)}setState(e,t,i){e=Math.max(Math.min(e,this.lineCount),0),t=Math.max(Math.min(t,this.lineCount-e),0),this._visibleLineCountTop.set(e,i),this._visibleLineCountBottom.set(t,i)}}class XKe extends Le{get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,this._diffActions.style.visibility=e?"visible":"hidden")}constructor(e,t,i,s,r,o,a,l,c){super(),this._getViewZoneId=e,this._marginDomNode=t,this._modifiedEditor=i,this._diff=s,this._editor=r,this._viewLineCounts=o,this._originalTextModel=a,this._contextMenuService=l,this._clipboardService=c,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=Vt.asClassName(Qe.lightBulb)+" lightbulb-glyph",this._diffActions.style.position="absolute";const d=this._modifiedEditor.getOption(67);this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${d}px`,this._diffActions.style.lineHeight=`${d}px`,this._marginDomNode.appendChild(this._diffActions);let u=0;const h=i.getOption(127)&&!Lg,f=(g,m)=>{var p;this._contextMenuService.showContextMenu({domForShadowRoot:h&&(p=i.getDomNode())!==null&&p!==void 0?p:void 0,getAnchor:()=>({x:g,y:m}),getActions:()=>{const b=[],w=s.modified.isEmpty;return b.push(new Gd("diff.clipboard.copyDeletedContent",w?s.original.length>1?L("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):L("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):s.original.length>1?L("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):L("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,async()=>{const _=this._originalTextModel.getValueInRange(s.original.toExclusiveRange());await this._clipboardService.writeText(_)})),s.original.length>1&&b.push(new Gd("diff.clipboard.copyDeletedLineContent",w?L("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",s.original.startLineNumber+u):L("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",s.original.startLineNumber+u),void 0,!0,async()=>{let _=this._originalTextModel.getLineContent(s.original.startLineNumber+u);_===""&&(_=this._originalTextModel.getEndOfLineSequence()===0?`
`:`\r
`),await this._clipboardService.writeText(_)})),i.getOption(91)||b.push(new Gd("diff.inline.revertChange",L("diff.inline.revertChange.label","Revert this change"),void 0,!0,async()=>{this._editor.revert(this._diff)})),b},autoSelectFirstItem:!0})};this._register(ws(this._diffActions,"mousedown",g=>{if(!g.leftButton)return;const{top:m,height:p}=ho(this._diffActions),b=Math.floor(d/3);g.preventDefault(),f(g.posx,m+p+b)})),this._register(i.onMouseMove(g=>{(g.target.type===8||g.target.type===5)&&g.target.detail.viewZoneId===this._getViewZoneId()?(u=this._updateLightBulbPosition(this._marginDomNode,g.event.browserEvent.y,d),this.visibility=!0):this.visibility=!1})),this._register(i.onMouseDown(g=>{g.event.leftButton&&(g.target.type===8||g.target.type===5)&&g.target.detail.viewZoneId===this._getViewZoneId()&&(g.event.preventDefault(),u=this._updateLightBulbPosition(this._marginDomNode,g.event.browserEvent.y,d),f(g.event.posx,g.event.posy+d))}))}_updateLightBulbPosition(e,t,i){const{top:s}=ho(e),r=t-s,o=Math.floor(r/i),a=o*i;if(this._diffActions.style.top=`${a}px`,this._viewLineCounts){let l=0;for(let c=0;c<this._viewLineCounts.length;c++)if(l+=this._viewLineCounts[c],o<l)return c}return o}}const sJ=mm("diffEditorWidget",{createHTML:n=>n});function zKe(n,e,t,i){$s(i,e.fontInfo);const s=t.length>0,r=new W2(1e4);let o=0,a=0;const l=[];for(let h=0;h<n.lineTokens.length;h++){const f=h+1,g=n.lineTokens[h],m=n.lineBreakData[h],p=Na.filter(t,f,1,Number.MAX_SAFE_INTEGER);if(m){let b=0;for(const w of m.breakOffsets){const v=g.sliceAndInflate(b,w,0);o=Math.max(o,rJ(a,v,Na.extractWrapped(p,b,w),s,n.mightContainNonBasicASCII,n.mightContainRTL,e,r)),a++,b=w}l.push(m.breakOffsets.length)}else l.push(1),o=Math.max(o,rJ(a,g,p,s,n.mightContainNonBasicASCII,n.mightContainRTL,e,r)),a++}o+=e.scrollBeyondLastColumn;const c=r.build(),d=sJ?sJ.createHTML(c):c;i.innerHTML=d;const u=o*e.typicalHalfwidthCharacterWidth;return{heightInLines:a,minWidthInPx:u,viewLineCounts:l}}class HKe{constructor(e,t,i,s){this.lineTokens=e,this.lineBreakData=t,this.mightContainNonBasicASCII=i,this.mightContainRTL=s}}class UO{static fromEditor(e){var t;const i=e.getOptions(),s=i.get(50),r=i.get(145);return new UO(((t=e.getModel())===null||t===void 0?void 0:t.getOptions().tabSize)||0,s,i.get(33),s.typicalHalfwidthCharacterWidth,i.get(104),i.get(67),r.decorationsWidth,i.get(117),i.get(99),i.get(94),i.get(51))}constructor(e,t,i,s,r,o,a,l,c,d,u){this.tabSize=e,this.fontInfo=t,this.disableMonospaceOptimizations=i,this.typicalHalfwidthCharacterWidth=s,this.scrollBeyondLastColumn=r,this.lineHeight=o,this.lineDecorationsWidth=a,this.stopRenderingLineAfter=l,this.renderWhitespace=c,this.renderControlCharacters=d,this.fontLigatures=u}}function rJ(n,e,t,i,s,r,o,a){a.appendString('<div class="view-line'),i||a.appendString(" char-delete"),a.appendString('" style="top:'),a.appendString(String(n*o.lineHeight)),a.appendString('px;width:1000000px;">');const l=e.getLineContent(),c=Po.isBasicASCII(l,s),d=Po.containsRTL(l,c,r),u=cP(new k0(o.fontInfo.isMonospace&&!o.disableMonospaceOptimizations,o.fontInfo.canUseHalfwidthRightwardsArrow,l,!1,c,d,0,e,t,o.tabSize,0,o.fontInfo.spaceWidth,o.fontInfo.middotWidth,o.fontInfo.wsmiddotWidth,o.stopRenderingLineAfter,o.renderWhitespace,o.renderControlCharacters,o.fontLigatures!==Jo.OFF,null),a);return a.appendString("</div>"),u.characterMapping.getHorizontalOffset(u.characterMapping.length)}var UKe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},oJ=function(n,e){return function(t,i){e(t,i,n)}};let TF=class extends Le{constructor(e,t,i,s,r,o,a,l,c,d){super(),this._targetWindow=e,this._editors=t,this._diffModel=i,this._options=s,this._diffEditorWidget=r,this._canIgnoreViewZoneUpdateEvent=o,this._origViewZonesToIgnore=a,this._modViewZonesToIgnore=l,this._clipboardService=c,this._contextMenuService=d,this._originalTopPadding=vi(this,0),this._originalScrollOffset=vi(this,0),this._originalScrollOffsetAnimated=Jj(this._targetWindow,this._originalScrollOffset,this._store),this._modifiedTopPadding=vi(this,0),this._modifiedScrollOffset=vi(this,0),this._modifiedScrollOffsetAnimated=Jj(this._targetWindow,this._modifiedScrollOffset,this._store);const u=vi("invalidateAlignmentsState",0),h=this._register(new as(()=>{u.set(u.get()+1,void 0)},0));this._register(this._editors.original.onDidChangeViewZones(v=>{this._canIgnoreViewZoneUpdateEvent()||h.schedule()})),this._register(this._editors.modified.onDidChangeViewZones(v=>{this._canIgnoreViewZoneUpdateEvent()||h.schedule()})),this._register(this._editors.original.onDidChangeConfiguration(v=>{(v.hasChanged(146)||v.hasChanged(67))&&h.schedule()})),this._register(this._editors.modified.onDidChangeConfiguration(v=>{(v.hasChanged(146)||v.hasChanged(67))&&h.schedule()}));const f=this._diffModel.map(v=>v?os(v.model.original.onDidChangeTokens,()=>v.model.original.tokenization.backgroundTokenizationState===2):void 0).map((v,_)=>v?.read(_)),g=Xt(v=>{const _=this._diffModel.read(v),y=_?.diff.read(v);if(!_||!y)return null;u.read(v);const S=this._options.renderSideBySide.read(v);return aJ(this._editors.original,this._editors.modified,y.mappings,this._origViewZonesToIgnore,this._modViewZonesToIgnore,S)}),m=Xt(v=>{var _;const y=(_=this._diffModel.read(v))===null||_===void 0?void 0:_.movedTextToCompare.read(v);if(!y)return null;u.read(v);const C=y.changes.map(S=>new hae(S));return aJ(this._editors.original,this._editors.modified,C,this._origViewZonesToIgnore,this._modViewZonesToIgnore,!0)});function p(){const v=document.createElement("div");return v.className="diagonal-fill",v}const b=this._register(new ct);this.viewZones=N0(this,(v,_)=>{var y,C,S,k,I,T,D,M;b.clear();const E=g.read(v)||[],W=[],P=[],N=this._modifiedTopPadding.read(v);N>0&&P.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:N,showInHiddenAreas:!0,suppressMouseDown:!0});const H=this._originalTopPadding.read(v);H>0&&W.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:H,showInHiddenAreas:!0,suppressMouseDown:!0});const U=this._options.renderSideBySide.read(v),B=U||(y=this._editors.modified._getViewModel())===null||y===void 0?void 0:y.createLineBreaksComputer();if(B){const z=this._editors.original.getModel();for(const K of E)if(K.diff)for(let Se=K.originalRange.startLineNumber;Se<K.originalRange.endLineNumberExclusive;Se++){if(Se>z.getLineCount())return{orig:W,mod:P};B?.addRequest(z.getLineContent(Se),null,null)}}const Y=(C=B?.finalize())!==null&&C!==void 0?C:[];let ne=0;const ee=this._editors.modified.getOption(67),$=(S=this._diffModel.read(v))===null||S===void 0?void 0:S.movedTextToCompare.read(v),ge=(I=(k=this._editors.original.getModel())===null||k===void 0?void 0:k.mightContainNonBasicASCII())!==null&&I!==void 0?I:!1,Ie=(D=(T=this._editors.original.getModel())===null||T===void 0?void 0:T.mightContainRTL())!==null&&D!==void 0?D:!1,xe=UO.fromEditor(this._editors.modified);for(const z of E)if(z.diff&&!U){if(!z.originalRange.isEmpty){f.read(v);const Se=document.createElement("div");Se.classList.add("view-lines","line-delete","monaco-mouse-cursor-text");const De=this._editors.original.getModel();if(z.originalRange.endLineNumberExclusive-1>De.getLineCount())return{orig:W,mod:P};const ke=new HKe(z.originalRange.mapToLineArray(ht=>De.tokenization.getLineTokens(ht)),z.originalRange.mapToLineArray(ht=>Y[ne++]),ge,Ie),je=[];for(const ht of z.diff.innerChanges||[])je.push(new i_(ht.originalRange.delta(-(z.diff.original.startLineNumber-1)),CF.className,0));const et=zKe(ke,xe,je,Se),mt=document.createElement("div");if(mt.className="inline-deleted-margin-view-zone",$s(mt,xe.fontInfo),this._options.renderIndicators.read(v))for(let ht=0;ht<et.heightInLines;ht++){const nt=document.createElement("div");nt.className=`delete-sign ${Vt.asClassName(lae)}`,nt.setAttribute("style",`position:absolute;top:${ht*ee}px;width:${xe.lineDecorationsWidth}px;height:${ee}px;right:0;`),mt.appendChild(nt)}let ze;b.add(new XKe(()=>HC(ze),mt,this._editors.modified,z.diff,this._diffEditorWidget,et.viewLineCounts,this._editors.original.getModel(),this._contextMenuService,this._clipboardService));for(let ht=0;ht<et.viewLineCounts.length;ht++){const nt=et.viewLineCounts[ht];nt>1&&W.push({afterLineNumber:z.originalRange.startLineNumber+ht,domNode:p(),heightInPx:(nt-1)*ee,showInHiddenAreas:!0,suppressMouseDown:!0})}P.push({afterLineNumber:z.modifiedRange.startLineNumber-1,domNode:Se,heightInPx:et.heightInLines*ee,minWidthInPx:et.minWidthInPx,marginDomNode:mt,setZoneId(ht){ze=ht},showInHiddenAreas:!0,suppressMouseDown:!0})}const K=document.createElement("div");K.className="gutter-delete",W.push({afterLineNumber:z.originalRange.endLineNumberExclusive-1,domNode:p(),heightInPx:z.modifiedHeightInPx,marginDomNode:K,showInHiddenAreas:!0,suppressMouseDown:!0})}else{const K=z.modifiedHeightInPx-z.originalHeightInPx;if(K>0){if($?.lineRangeMapping.original.delta(-1).deltaLength(2).contains(z.originalRange.endLineNumberExclusive-1))continue;W.push({afterLineNumber:z.originalRange.endLineNumberExclusive-1,domNode:p(),heightInPx:K,showInHiddenAreas:!0,suppressMouseDown:!0})}else{let Se=function(){const ke=document.createElement("div");return ke.className="arrow-revert-change "+Vt.asClassName(Qe.arrowRight),_.add(we(ke,"mousedown",je=>je.stopPropagation())),_.add(we(ke,"click",je=>{je.stopPropagation(),r.revert(z.diff)})),St("div",{},ke)};if($?.lineRangeMapping.modified.delta(-1).deltaLength(2).contains(z.modifiedRange.endLineNumberExclusive-1))continue;let De;z.diff&&z.diff.modified.isEmpty&&this._options.shouldRenderOldRevertArrows.read(v)&&(De=Se()),P.push({afterLineNumber:z.modifiedRange.endLineNumberExclusive-1,domNode:p(),heightInPx:-K,marginDomNode:De,showInHiddenAreas:!0,suppressMouseDown:!0})}}for(const z of(M=m.read(v))!==null&&M!==void 0?M:[]){if(!$?.lineRangeMapping.original.intersect(z.originalRange)||!$?.lineRangeMapping.modified.intersect(z.modifiedRange))continue;const K=z.modifiedHeightInPx-z.originalHeightInPx;K>0?W.push({afterLineNumber:z.originalRange.endLineNumberExclusive-1,domNode:p(),heightInPx:K,showInHiddenAreas:!0,suppressMouseDown:!0}):P.push({afterLineNumber:z.modifiedRange.endLineNumberExclusive-1,domNode:p(),heightInPx:-K,showInHiddenAreas:!0,suppressMouseDown:!0})}return{orig:W,mod:P}});let w=!1;this._register(this._editors.original.onDidScrollChange(v=>{v.scrollLeftChanged&&!w&&(w=!0,this._editors.modified.setScrollLeft(v.scrollLeft),w=!1)})),this._register(this._editors.modified.onDidScrollChange(v=>{v.scrollLeftChanged&&!w&&(w=!0,this._editors.original.setScrollLeft(v.scrollLeft),w=!1)})),this._originalScrollTop=os(this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=os(this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._register(ki(v=>{const _=this._originalScrollTop.read(v)-(this._originalScrollOffsetAnimated.get()-this._modifiedScrollOffsetAnimated.read(v))-(this._originalTopPadding.get()-this._modifiedTopPadding.read(v));_!==this._editors.modified.getScrollTop()&&this._editors.modified.setScrollTop(_,1)})),this._register(ki(v=>{const _=this._modifiedScrollTop.read(v)-(this._modifiedScrollOffsetAnimated.get()-this._originalScrollOffsetAnimated.read(v))-(this._modifiedTopPadding.get()-this._originalTopPadding.read(v));_!==this._editors.original.getScrollTop()&&this._editors.original.setScrollTop(_,1)})),this._register(ki(v=>{var _;const y=(_=this._diffModel.read(v))===null||_===void 0?void 0:_.movedTextToCompare.read(v);let C=0;if(y){const S=this._editors.original.getTopForLineNumber(y.lineRangeMapping.original.startLineNumber,!0)-this._originalTopPadding.get();C=this._editors.modified.getTopForLineNumber(y.lineRangeMapping.modified.startLineNumber,!0)-this._modifiedTopPadding.get()-S}C>0?(this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(C,void 0)):C<0?(this._modifiedTopPadding.set(-C,void 0),this._originalTopPadding.set(0,void 0)):setTimeout(()=>{this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(0,void 0)},400),this._editors.modified.hasTextFocus()?this._originalScrollOffset.set(this._modifiedScrollOffset.get()-C,void 0,!0):this._modifiedScrollOffset.set(this._originalScrollOffset.get()+C,void 0,!0)}))}};TF=UKe([oJ(8,bm),oJ(9,jc)],TF);function aJ(n,e,t,i,s,r){const o=new qd(lJ(n,i)),a=new qd(lJ(e,s)),l=n.getOption(67),c=e.getOption(67),d=[];let u=0,h=0;function f(g,m){for(;;){let p=o.peek(),b=a.peek();if(p&&p.lineNumber>=g&&(p=void 0),b&&b.lineNumber>=m&&(b=void 0),!p&&!b)break;const w=p?p.lineNumber-u:Number.MAX_VALUE,v=b?b.lineNumber-h:Number.MAX_VALUE;w<v?(o.dequeue(),b={lineNumber:p.lineNumber-u+h,heightInPx:0}):w>v?(a.dequeue(),p={lineNumber:b.lineNumber-h+u,heightInPx:0}):(o.dequeue(),a.dequeue()),d.push({originalRange:Lt.ofLength(p.lineNumber,1),modifiedRange:Lt.ofLength(b.lineNumber,1),originalHeightInPx:l+p.heightInPx,modifiedHeightInPx:c+b.heightInPx,diff:void 0})}}for(const g of t){let v=function(_,y){var C,S,k,I;if(_<w||y<b)return;if(p)p=!1;else if(_===w||y===b)return;const T=new Lt(w,_),D=new Lt(b,y);if(T.isEmpty&&D.isEmpty)return;const M=(S=(C=o.takeWhile(W=>W.lineNumber<_))===null||C===void 0?void 0:C.reduce((W,P)=>W+P.heightInPx,0))!==null&&S!==void 0?S:0,E=(I=(k=a.takeWhile(W=>W.lineNumber<y))===null||k===void 0?void 0:k.reduce((W,P)=>W+P.heightInPx,0))!==null&&I!==void 0?I:0;d.push({originalRange:T,modifiedRange:D,originalHeightInPx:T.length*l+M,modifiedHeightInPx:D.length*c+E,diff:g.lineRangeMapping}),w=_,b=y};const m=g.lineRangeMapping;f(m.original.startLineNumber,m.modified.startLineNumber);let p=!0,b=m.modified.startLineNumber,w=m.original.startLineNumber;if(r)for(const _ of m.innerChanges||[]){_.originalRange.startColumn>1&&_.modifiedRange.startColumn>1&&v(_.originalRange.startLineNumber,_.modifiedRange.startLineNumber);const y=n.getModel(),C=_.originalRange.endLineNumber<=y.getLineCount()?y.getLineMaxColumn(_.originalRange.endLineNumber):Number.MAX_SAFE_INTEGER;_.originalRange.endColumn<C&&v(_.originalRange.endLineNumber,_.modifiedRange.endLineNumber)}v(m.original.endLineNumberExclusive,m.modified.endLineNumberExclusive),u=m.original.endLineNumberExclusive,h=m.modified.endLineNumberExclusive}return f(Number.MAX_VALUE,Number.MAX_VALUE),d}function lJ(n,e){const t=[],i=[],s=n.getOption(146).wrappingColumn!==-1,r=n._getViewModel().coordinatesConverter,o=n.getOption(67);if(s)for(let l=1;l<=n.getModel().getLineCount();l++){const c=r.getModelLineViewLineCount(l);c>1&&i.push({lineNumber:l,heightInPx:o*(c-1)})}for(const l of n.getWhitespaces()){if(e.has(l.id))continue;const c=l.afterLineNumber===0?0:r.convertViewPositionToModelPosition(new pe(l.afterLineNumber,1)).lineNumber;t.push({lineNumber:c,heightInPx:l.height})}return pKe(t,i,l=>l.lineNumber,(l,c)=>({lineNumber:l.lineNumber,heightInPx:l.heightInPx+c.heightInPx}))}class YKe extends Le{constructor(e,t,i){super(),this._editor=e,this._domNode=t,this.itemProvider=i,this.scrollTop=os(this._editor.onDidScrollChange,o=>this._editor.getScrollTop()),this.isScrollTopZero=this.scrollTop.map(o=>o===0),this.modelAttached=os(this._editor.onDidChangeModel,o=>this._editor.hasModel()),this.editorOnDidChangeViewZones=Qo("onDidChangeViewZones",this._editor.onDidChangeViewZones),this.editorOnDidContentSizeChange=Qo("onDidContentSizeChange",this._editor.onDidContentSizeChange),this.domNodeSizeChanged=fre("domNodeSizeChanged"),this.views=new Map,this._domNode.className="gutter monaco-editor";const s=this._domNode.appendChild(wi("div.scroll-decoration",{role:"presentation",ariaHidden:"true",style:{width:"100%"}}).root),r=new ResizeObserver(()=>{_s(o=>{this.domNodeSizeChanged.trigger(o)})});r.observe(this._domNode),this._register(Et(()=>r.disconnect())),this._register(ki(o=>{s.className=this.isScrollTopZero.read(o)?"":"scroll-decoration"})),this._register(ki(o=>this.render(o)))}dispose(){super.dispose(),Ir(this._domNode)}render(e){if(!this.modelAttached.read(e))return;this.domNodeSizeChanged.read(e),this.editorOnDidChangeViewZones.read(e),this.editorOnDidContentSizeChange.read(e);const t=this.scrollTop.read(e),i=this._editor.getVisibleRanges(),s=new Set(this.views.keys()),r=Rt.ofStartAndLength(0,this._domNode.clientHeight);if(!r.isEmpty)for(const o of i){const a=new Lt(o.startLineNumber,o.endLineNumber+1),l=this.itemProvider.getIntersectingGutterItems(a,e);_s(c=>{for(const d of l){if(!d.range.intersect(a))continue;s.delete(d.id);let u=this.views.get(d.id);if(u)u.item.set(d,c);else{const m=document.createElement("div");this._domNode.appendChild(m);const p=vi("item",d),b=this.itemProvider.createView(p,m);u=new KKe(p,b,m),this.views.set(d.id,u)}const h=d.range.startLineNumber<=this._editor.getModel().getLineCount()?this._editor.getTopForLineNumber(d.range.startLineNumber,!0)-t:this._editor.getBottomForLineNumber(d.range.startLineNumber-1,!1)-t,g=(d.range.isEmpty?h:this._editor.getBottomForLineNumber(d.range.endLineNumberExclusive-1,!0)-t)-h;u.domNode.style.top=`${h}px`,u.domNode.style.height=`${g}px`,u.gutterItemView.layout(Rt.ofStartAndLength(h,g),r)}})}for(const o of s){const a=this.views.get(o);a.gutterItemView.dispose(),this._domNode.removeChild(a.domNode),this.views.delete(o)}}}class KKe{constructor(e,t,i){this.item=e,this.gutterItemView=t,this.domNode=i}}class fae extends Eg{constructor(e){super(),this._getContext=e}runAction(e,t){const i=this._getContext();return super.runAction(e,i)}}class cJ extends roe{constructor(e){super(),this._textModel=e}getValueOfRange(e){return this._textModel.getValueInRange(e)}get length(){const e=this._textModel.getLineCount(),t=this._textModel.getLineLength(e);return new sa(e-1,t)}}class jKe extends Le{constructor(e,t,i={orientation:0}){var s;super(),this.submenuActionViewItems=[],this.hasSecondaryActions=!1,this._onDidChangeDropdownVisibility=this._register(new dNe),this.onDidChangeDropdownVisibility=this._onDidChangeDropdownVisibility.event,this.disposables=this._register(new ct),i.hoverDelegate=(s=i.hoverDelegate)!==null&&s!==void 0?s:this._register(Zb()),this.options=i,this.lookupKeybindings=typeof this.options.getKeyBinding=="function",this.toggleMenuAction=this._register(new $b(()=>{var r;return(r=this.toggleMenuActionViewItem)===null||r===void 0?void 0:r.show()},i.toggleMenuTitle)),this.element=document.createElement("div"),this.element.className="monaco-toolbar",e.appendChild(this.element),this.actionBar=this._register(new zh(this.element,{orientation:i.orientation,ariaLabel:i.ariaLabel,actionRunner:i.actionRunner,allowContextMenu:i.allowContextMenu,highlightToggledItems:i.highlightToggledItems,hoverDelegate:i.hoverDelegate,actionViewItemProvider:(r,o)=>{var a;if(r.id===$b.ID)return this.toggleMenuActionViewItem=new rk(r,r.menuActions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:Vt.asClassNameArray((a=i.moreIcon)!==null&&a!==void 0?a:Qe.toolBarMore),anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,isMenu:!0,hoverDelegate:this.options.hoverDelegate}),this.toggleMenuActionViewItem.setActionContext(this.actionBar.context),this.disposables.add(this._onDidChangeDropdownVisibility.add(this.toggleMenuActionViewItem.onDidChangeVisibility)),this.toggleMenuActionViewItem;if(i.actionViewItemProvider){const l=i.actionViewItemProvider(r,o);if(l)return l}if(r instanceof y2){const l=new rk(r,r.actions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:r.class,anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,hoverDelegate:this.options.hoverDelegate});return l.setActionContext(this.actionBar.context),this.submenuActionViewItems.push(l),this.disposables.add(this._onDidChangeDropdownVisibility.add(l.onDidChangeVisibility)),l}}}))}set actionRunner(e){this.actionBar.actionRunner=e}get actionRunner(){return this.actionBar.actionRunner}getElement(){return this.element}getItemAction(e){return this.actionBar.getAction(e)}setActions(e,t){this.clear();const i=e?e.slice(0):[];this.hasSecondaryActions=!!(t&&t.length>0),this.hasSecondaryActions&&t&&(this.toggleMenuAction.menuActions=t.slice(0),i.push(this.toggleMenuAction)),i.forEach(s=>{this.actionBar.push(s,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(s)})})}getKeybindingLabel(e){var t,i,s;const r=this.lookupKeybindings?(i=(t=this.options).getKeyBinding)===null||i===void 0?void 0:i.call(t,e):void 0;return(s=r?.getLabel())!==null&&s!==void 0?s:void 0}clear(){this.submenuActionViewItems=[],this.disposables.clear(),this.actionBar.clear()}dispose(){this.clear(),this.disposables.dispose(),super.dispose()}}class $b extends Gd{constructor(e,t){t=t||L("moreActions","More Actions..."),super($b.ID,t,void 0,!0),this._menuActions=[],this.toggleDropdownMenu=e}async run(){this.toggleDropdownMenu()}get menuActions(){return this._menuActions}set menuActions(e){this._menuActions=e}}$b.ID="toolbar.toggle.more";var gae=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Ia=function(n,e){return function(t,i){e(t,i,n)}};let DF=class extends jKe{constructor(e,t,i,s,r,o,a,l){super(e,r,{getKeyBinding:d=>{var u;return(u=o.lookupKeybinding(d.id))!==null&&u!==void 0?u:void 0},...t,allowContextMenu:!0,skipTelemetry:typeof t?.telemetrySource=="string"}),this._options=t,this._menuService=i,this._contextKeyService=s,this._contextMenuService=r,this._keybindingService=o,this._commandService=a,this._sessionDisposables=this._store.add(new ct);const c=t?.telemetrySource;c&&this._store.add(this.actionBar.onDidRun(d=>l.publicLog2("workbenchActionExecuted",{id:d.action.id,from:c})))}setActions(e,t=[],i){var s,r,o;this._sessionDisposables.clear();const a=e.slice(),l=t.slice(),c=[];let d=0;const u=[];let h=!1;if(((s=this._options)===null||s===void 0?void 0:s.hiddenItemStrategy)!==-1)for(let f=0;f<a.length;f++){const g=a[f];!(g instanceof Bd)&&!(g instanceof Qv)||g.hideActions&&(c.push(g.hideActions.toggle),g.hideActions.toggle.checked&&d++,g.hideActions.isHidden&&(h=!0,a[f]=void 0,((r=this._options)===null||r===void 0?void 0:r.hiddenItemStrategy)!==0&&(u[f]=g)))}if(((o=this._options)===null||o===void 0?void 0:o.overflowBehavior)!==void 0){const f=FHe(new Set(this._options.overflowBehavior.exempted),ci.map(a,p=>p?.id)),g=this._options.overflowBehavior.maxItems-f.size;let m=0;for(let p=0;p<a.length;p++){const b=a[p];b&&(m++,!f.has(b.id)&&m>=g&&(a[p]=void 0,u[p]=b))}}TH(a),TH(u),super.setActions(a,Zs.join(u,l)),(c.length>0||a.length>0)&&this._sessionDisposables.add(we(this.getElement(),"contextmenu",f=>{var g,m,p,b,w;const v=new Sl(pt(this.getElement()),f),_=this.getItemAction(v.target);if(!_)return;v.preventDefault(),v.stopPropagation();const y=[];if(_ instanceof Bd&&_.menuKeybinding?y.push(_.menuKeybinding):_ instanceof Qv||_ instanceof $b||y.push(nae(_.id,void 0,this._commandService,this._keybindingService)),c.length>0){let S=!1;if(d===1&&((g=this._options)===null||g===void 0?void 0:g.hiddenItemStrategy)===0){S=!0;for(let k=0;k<c.length;k++)if(c[k].checked){c[k]=og({id:_.id,label:_.label,checked:!0,enabled:!1,run(){}});break}}if(!S&&(_ instanceof Bd||_ instanceof Qv)){if(!_.hideActions)return;y.push(_.hideActions.hide)}else y.push(og({id:"label",label:L("hide","Hide"),enabled:!1,run(){}}))}const C=Zs.join(y,c);!((m=this._options)===null||m===void 0)&&m.resetMenu&&!i&&(i=[this._options.resetMenu]),h&&i&&(C.push(new Zs),C.push(og({id:"resetThisMenu",label:L("resetThisMenu","Reset Menu"),run:()=>this._menuService.resetHiddenStates(i)}))),C.length!==0&&this._contextMenuService.showContextMenu({getAnchor:()=>v,getActions:()=>C,menuId:(p=this._options)===null||p===void 0?void 0:p.contextMenu,menuActionOptions:{renderShortTitle:!0,...(b=this._options)===null||b===void 0?void 0:b.menuOptions},skipTelemetry:typeof((w=this._options)===null||w===void 0?void 0:w.telemetrySource)=="string",contextKeyService:this._contextKeyService})}))}};DF=gae([Ia(2,cm),Ia(3,oi),Ia(4,jc),Ia(5,Ls),Ia(6,eo),Ia(7,df)],DF);let Tk=class extends DF{constructor(e,t,i,s,r,o,a,l,c){super(e,{resetMenu:t,...i},s,r,o,a,l,c),this._onDidChangeMenuItems=this._store.add(new ue),this.onDidChangeMenuItems=this._onDidChangeMenuItems.event;const d=this._store.add(s.createMenu(t,r,{emitEventsForSubmenuChanges:!0})),u=()=>{var h,f,g;const m=[],p=[];IHe(d,i?.menuOptions,{primary:m,secondary:p},(h=i?.toolbarOptions)===null||h===void 0?void 0:h.primaryGroup,(f=i?.toolbarOptions)===null||f===void 0?void 0:f.shouldInlineSubmenu,(g=i?.toolbarOptions)===null||g===void 0?void 0:g.useSeparatorsInPrimaryActions),e.classList.toggle("has-no-actions",m.length===0&&p.length===0),super.setActions(m,p)};this._store.add(d.onDidChange(()=>{u(),this._onDidChangeMenuItems.fire(this)})),u()}setActions(){throw new Ai("This toolbar is populated from a menu.")}};Tk=gae([Ia(3,cm),Ia(4,oi),Ia(5,jc),Ia(6,Ls),Ia(7,eo),Ia(8,df)],Tk);var mae=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},cC=function(n,e){return function(t,i){e(t,i,n)}};const qR=[],vS=35;let IF=class extends Le{constructor(e,t,i,s,r,o,a,l,c){super(),this._diffModel=t,this._editors=i,this._options=s,this._sashLayout=r,this._boundarySashes=o,this._instantiationService=a,this._contextKeyService=l,this._menuService=c,this._menu=this._register(this._menuService.createMenu(X.DiffEditorHunkToolbar,this._contextKeyService)),this._actions=os(this._menu.onDidChange,()=>this._menu.getActions()),this._hasActions=this._actions.map(d=>d.length>0),this._showSash=Xt(this,d=>this._options.renderSideBySide.read(d)&&this._hasActions.read(d)),this.width=Xt(this,d=>this._hasActions.read(d)?vS:0),this.elements=wi("div.gutter@gutter",{style:{position:"absolute",height:"100%",width:vS+"px"}},[]),this._currentDiff=Xt(this,d=>{var u;const h=this._diffModel.read(d);if(!h)return;const f=(u=h.diff.read(d))===null||u===void 0?void 0:u.mappings,g=this._editors.modifiedCursor.read(d);if(g)return f?.find(m=>m.lineRangeMapping.modified.contains(g.lineNumber))}),this._selectedDiffs=Xt(this,d=>{const u=this._diffModel.read(d),h=u?.diff.read(d);if(!h)return qR;const f=this._editors.modifiedSelections.read(d);if(f.every(b=>b.isEmpty()))return qR;const g=new $o(f.map(b=>Lt.fromRangeInclusive(b))),p=h.mappings.filter(b=>b.lineRangeMapping.innerChanges&&g.intersects(b.lineRangeMapping.modified)).map(b=>({mapping:b,rangeMappings:b.lineRangeMapping.innerChanges.filter(w=>f.some(v=>te.areIntersecting(w.modifiedRange,v)))}));return p.length===0||p.every(b=>b.rangeMappings.length===0)?qR:p}),this._register(bKe(e,this.elements.root)),this._register(we(this.elements.root,"click",()=>{this._editors.modified.focus()})),this._register(Hh(this.elements.root,{display:this._hasActions.map(d=>d?"block":"none")})),nc(this,d=>this._showSash.read(d)?new cae(e,this._sashLayout.dimensions,this._options.enableSplitViewResizing,this._boundarySashes,ure(this,h=>this._sashLayout.sashLeft.read(h)-vS,(h,f)=>this._sashLayout.sashLeft.set(h+vS,f)),()=>this._sashLayout.resetSash()):void 0).recomputeInitiallyAndOnChange(this._store),this._register(new YKe(this._editors.modified,this.elements.root,{getIntersectingGutterItems:(d,u)=>{const h=this._diffModel.read(u);if(!h)return[];const f=h.diff.read(u);if(!f)return[];const g=this._selectedDiffs.read(u);if(g.length>0){const p=Ao.fromRangeMappings(g.flatMap(b=>b.rangeMappings));return[new dJ(p,!0,X.DiffEditorSelectionToolbar,void 0,h.model.original.uri,h.model.modified.uri)]}const m=this._currentDiff.read(u);return f.mappings.map(p=>new dJ(p.lineRangeMapping.withInnerChangesFromLineRanges(),p.lineRangeMapping===m?.lineRangeMapping,X.DiffEditorHunkToolbar,void 0,h.model.original.uri,h.model.modified.uri))},createView:(d,u)=>this._instantiationService.createInstance(MF,d,u,this)})),this._register(we(this.elements.gutter,Ge.MOUSE_WHEEL,d=>{this._editors.modified.getOption(103).handleMouseWheel&&this._editors.modified.delegateScrollFromMouseWheelEvent(d)},{passive:!1}))}computeStagedValue(e){var t;const i=(t=e.innerChanges)!==null&&t!==void 0?t:[],s=new cJ(this._editors.modifiedModel.get()),r=new cJ(this._editors.original.getModel());return new RXe(i.map(l=>l.toTextEdit(s))).apply(r)}layout(e){this.elements.gutter.style.left=e+"px"}};IF=mae([cC(6,Si),cC(7,oi),cC(8,cm)],IF);class dJ{constructor(e,t,i,s,r,o){this.mapping=e,this.showAlways=t,this.menuId=i,this.rangeOverride=s,this.originalUri=r,this.modifiedUri=o}get id(){return this.mapping.modified.toString()}get range(){var e;return(e=this.rangeOverride)!==null&&e!==void 0?e:this.mapping.modified}}let MF=class extends Le{constructor(e,t,i,s){super(),this._item=e,this._elements=wi("div.gutterItem",{style:{height:"20px",width:"34px"}},[wi("div.background@background",{},[]),wi("div.buttons@buttons",{},[])]),this._showAlways=this._item.map(this,o=>o.showAlways),this._menuId=this._item.map(this,o=>o.menuId),this._isSmall=vi(this,!1),this._lastItemRange=void 0,this._lastViewRange=void 0;const r=this._register(s.createInstance(g1,"element",!0,{position:{hoverPosition:1}}));this._register(zv(t,this._elements.root)),this._register(ki(o=>{const a=this._showAlways.read(o);this._elements.root.classList.toggle("noTransition",!0),this._elements.root.classList.toggle("showAlways",a),setTimeout(()=>{this._elements.root.classList.toggle("noTransition",!1)},0)})),this._register(Oc((o,a)=>{this._elements.buttons.replaceChildren();const l=a.add(s.createInstance(Tk,this._elements.buttons,this._menuId.read(o),{orientation:1,hoverDelegate:r,toolbarOptions:{primaryGroup:c=>c.startsWith("primary")},overflowBehavior:{maxItems:this._isSmall.read(o)?1:3},hiddenItemStrategy:0,actionRunner:new fae(()=>{const c=this._item.get(),d=c.mapping;return{mapping:d,originalWithModifiedChanges:i.computeStagedValue(d),originalUri:c.originalUri,modifiedUri:c.modifiedUri}}),menuOptions:{shouldForwardArgs:!0}}));a.add(l.onDidChangeMenuItems(()=>{this._lastItemRange&&this.layout(this._lastItemRange,this._lastViewRange)}))}))}layout(e,t){this._lastItemRange=e,this._lastViewRange=t;let i=this._elements.buttons.clientHeight;this._isSmall.set(this._item.get().mapping.original.startLineNumber===1&&e.length<30,void 0),i=this._elements.buttons.clientHeight;const s=e.length/2-i/2,r=i;let o=e.start+s;const a=Rt.tryCreate(r,t.endExclusive-r-i),l=Rt.tryCreate(e.start+r,e.endExclusive-i-r);l&&a&&l.start<l.endExclusive&&(o=a.clip(o),o=l.clip(o)),this._elements.buttons.style.top=`${o-e.start}px`}};MF=mae([cC(3,Si)],MF);var JKe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},$Ke=function(n,e){return function(t,i){e(t,i,n)}},EF;let Dk=EF=class extends Le{static setBreadcrumbsSourceFactory(e){this._breadcrumbsSourceFactory.set(e,void 0)}get isUpdatingHiddenAreas(){return this._isUpdatingHiddenAreas}constructor(e,t,i,s){super(),this._editors=e,this._diffModel=t,this._options=i,this._instantiationService=s,this._modifiedOutlineSource=nc(this,l=>{const c=this._editors.modifiedModel.read(l),d=EF._breadcrumbsSourceFactory.read(l);return!c||!d?void 0:d(c,this._instantiationService)}),this._isUpdatingHiddenAreas=!1,this._register(this._editors.original.onDidChangeCursorPosition(l=>{if(l.reason===1)return;const c=this._diffModel.get();_s(d=>{for(const u of this._editors.original.getSelections()||[])c?.ensureOriginalLineIsVisible(u.getStartPosition().lineNumber,0,d),c?.ensureOriginalLineIsVisible(u.getEndPosition().lineNumber,0,d)})})),this._register(this._editors.modified.onDidChangeCursorPosition(l=>{if(l.reason===1)return;const c=this._diffModel.get();_s(d=>{for(const u of this._editors.modified.getSelections()||[])c?.ensureModifiedLineIsVisible(u.getStartPosition().lineNumber,0,d),c?.ensureModifiedLineIsVisible(u.getEndPosition().lineNumber,0,d)})}));const r=this._diffModel.map((l,c)=>{var d,u;const h=(d=l?.unchangedRegions.read(c))!==null&&d!==void 0?d:[];return h.length===1&&h[0].modifiedLineNumber===1&&h[0].lineCount===((u=this._editors.modifiedModel.read(c))===null||u===void 0?void 0:u.getLineCount())?[]:h});this.viewZones=N0(this,(l,c)=>{const d=this._modifiedOutlineSource.read(l);if(!d)return{origViewZones:[],modViewZones:[]};const u=[],h=[],f=this._options.renderSideBySide.read(l),g=r.read(l);for(const m of g)if(!m.shouldHideControls(l)){{const p=Xt(this,w=>m.getHiddenOriginalRange(w).startLineNumber-1),b=new Lk(p,24);u.push(b),c.add(new uJ(this._editors.original,b,m,m.originalUnchangedRange,!f,d,w=>this._diffModel.get().ensureModifiedLineIsVisible(w,2,void 0),this._options))}{const p=Xt(this,w=>m.getHiddenModifiedRange(w).startLineNumber-1),b=new Lk(p,24);h.push(b),c.add(new uJ(this._editors.modified,b,m,m.modifiedUnchangedRange,!1,d,w=>this._diffModel.get().ensureModifiedLineIsVisible(w,2,void 0),this._options))}}return{origViewZones:u,modViewZones:h}});const o={description:"unchanged lines",className:"diff-unchanged-lines",isWholeLine:!0},a={description:"Fold Unchanged",glyphMarginHoverMessage:new VL(void 0,{isTrusted:!0,supportThemeIcons:!0}).appendMarkdown(L("foldUnchanged","Fold Unchanged Region")),glyphMarginClassName:"fold-unchanged "+Vt.asClassName(Qe.fold),zIndex:10001};this._register(Ck(this._editors.original,Xt(this,l=>{const c=r.read(l),d=c.map(u=>({range:u.originalUnchangedRange.toInclusiveRange(),options:o}));for(const u of c)u.shouldHideControls(l)&&d.push({range:te.fromPositions(new pe(u.originalLineNumber,1)),options:a});return d}))),this._register(Ck(this._editors.modified,Xt(this,l=>{const c=r.read(l),d=c.map(u=>({range:u.modifiedUnchangedRange.toInclusiveRange(),options:o}));for(const u of c)u.shouldHideControls(l)&&d.push({range:Lt.ofLength(u.modifiedLineNumber,1).toInclusiveRange(),options:a});return d}))),this._register(ki(l=>{const c=r.read(l);this._isUpdatingHiddenAreas=!0;try{this._editors.original.setHiddenAreas(c.map(d=>d.getHiddenOriginalRange(l).toInclusiveRange()).filter(_b)),this._editors.modified.setHiddenAreas(c.map(d=>d.getHiddenModifiedRange(l).toInclusiveRange()).filter(_b))}finally{this._isUpdatingHiddenAreas=!1}})),this._register(this._editors.modified.onMouseUp(l=>{var c;if(!l.event.rightButton&&l.target.position&&(!((c=l.target.element)===null||c===void 0)&&c.className.includes("fold-unchanged"))){const d=l.target.position.lineNumber,u=this._diffModel.get();if(!u)return;const h=u.unchangedRegions.get().find(f=>f.modifiedUnchangedRange.includes(d));if(!h)return;h.collapseAll(void 0),l.event.stopPropagation(),l.event.preventDefault()}})),this._register(this._editors.original.onMouseUp(l=>{var c;if(!l.event.rightButton&&l.target.position&&(!((c=l.target.element)===null||c===void 0)&&c.className.includes("fold-unchanged"))){const d=l.target.position.lineNumber,u=this._diffModel.get();if(!u)return;const h=u.unchangedRegions.get().find(f=>f.originalUnchangedRange.includes(d));if(!h)return;h.collapseAll(void 0),l.event.stopPropagation(),l.event.preventDefault()}}))}};Dk._breadcrumbsSourceFactory=vi("breadcrumbsSourceFactory",void 0);Dk=EF=JKe([$Ke(3,Si)],Dk);class uJ extends aae{constructor(e,t,i,s,r,o,a,l){const c=wi("div.diff-hidden-lines-widget");super(e,t,c.root),this._editor=e,this._unchangedRegion=i,this._unchangedRegionRange=s,this._hide=r,this._modifiedOutlineSource=o,this._revealModifiedHiddenLine=a,this._options=l,this._nodes=wi("div.diff-hidden-lines",[wi("div.top@top",{title:L("diff.hiddenLines.top","Click or drag to show more above")}),wi("div.center@content",{style:{display:"flex"}},[wi("div@first",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:"0"}},[St("a",{title:L("showUnchangedRegion","Show Unchanged Region"),role:"button",onclick:()=>{this._unchangedRegion.showAll(void 0)}},...hg("$(unfold)"))]),wi("div@others",{style:{display:"flex",justifyContent:"center",alignItems:"center"}})]),wi("div.bottom@bottom",{title:L("diff.bottom","Click or drag to show more below"),role:"button"})]),c.root.appendChild(this._nodes.root);const d=os(this._editor.onDidLayoutChange,()=>this._editor.getLayoutInfo());this._hide?Ir(this._nodes.first):this._register(Hh(this._nodes.first,{width:d.map(h=>h.contentLeft)})),this._register(ki(h=>{const f=this._unchangedRegion.visibleLineCountTop.read(h)+this._unchangedRegion.visibleLineCountBottom.read(h)===this._unchangedRegion.lineCount;this._nodes.bottom.classList.toggle("canMoveTop",!f),this._nodes.bottom.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(h)>0),this._nodes.top.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(h)>0),this._nodes.top.classList.toggle("canMoveBottom",!f);const g=this._unchangedRegion.isDragged.read(h),m=this._editor.getDomNode();m&&(m.classList.toggle("draggingUnchangedRegion",!!g),g==="top"?(m.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(h)>0),m.classList.toggle("canMoveBottom",!f)):g==="bottom"?(m.classList.toggle("canMoveTop",!f),m.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(h)>0)):(m.classList.toggle("canMoveTop",!1),m.classList.toggle("canMoveBottom",!1)))}));const u=this._editor;this._register(we(this._nodes.top,"mousedown",h=>{if(h.button!==0)return;this._nodes.top.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),h.preventDefault();const f=h.clientY;let g=!1;const m=this._unchangedRegion.visibleLineCountTop.get();this._unchangedRegion.isDragged.set("top",void 0);const p=pt(this._nodes.top),b=we(p,"mousemove",v=>{const y=v.clientY-f;g=g||Math.abs(y)>2;const C=Math.round(y/u.getOption(67)),S=Math.max(0,Math.min(m+C,this._unchangedRegion.getMaxVisibleLineCountTop()));this._unchangedRegion.visibleLineCountTop.set(S,void 0)}),w=we(p,"mouseup",v=>{g||this._unchangedRegion.showMoreAbove(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0),this._nodes.top.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),this._unchangedRegion.isDragged.set(void 0,void 0),b.dispose(),w.dispose()})})),this._register(we(this._nodes.bottom,"mousedown",h=>{if(h.button!==0)return;this._nodes.bottom.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),h.preventDefault();const f=h.clientY;let g=!1;const m=this._unchangedRegion.visibleLineCountBottom.get();this._unchangedRegion.isDragged.set("bottom",void 0);const p=pt(this._nodes.bottom),b=we(p,"mousemove",v=>{const y=v.clientY-f;g=g||Math.abs(y)>2;const C=Math.round(y/u.getOption(67)),S=Math.max(0,Math.min(m-C,this._unchangedRegion.getMaxVisibleLineCountBottom())),k=this._unchangedRegionRange.endLineNumberExclusive>u.getModel().getLineCount()?u.getContentHeight():u.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.visibleLineCountBottom.set(S,void 0);const I=this._unchangedRegionRange.endLineNumberExclusive>u.getModel().getLineCount()?u.getContentHeight():u.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);u.setScrollTop(u.getScrollTop()+(I-k))}),w=we(p,"mouseup",v=>{if(this._unchangedRegion.isDragged.set(void 0,void 0),!g){const _=u.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.showMoreBelow(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0);const y=u.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);u.setScrollTop(u.getScrollTop()+(y-_))}this._nodes.bottom.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),b.dispose(),w.dispose()})})),this._register(ki(h=>{const f=[];if(!this._hide){const g=i.getHiddenModifiedRange(h).length,m=L("hiddenLines","{0} hidden lines",g),p=St("span",{title:L("diff.hiddenLines.expandAll","Double click to unfold")},m);p.addEventListener("dblclick",v=>{v.button===0&&(v.preventDefault(),this._unchangedRegion.showAll(void 0))}),f.push(p);const b=this._unchangedRegion.getHiddenModifiedRange(h),w=this._modifiedOutlineSource.getBreadcrumbItems(b,h);if(w.length>0){f.push(St("span",void 0,"|"));for(let v=0;v<w.length;v++){const _=w[v],y=P3.toIcon(_.kind),C=wi("div.breadcrumb-item",{style:{display:"flex",alignItems:"center"}},[AL(y),"",_.name,...v===w.length-1?[]:[AL(Qe.chevronRight)]]).root;f.push(C),C.onclick=()=>{this._revealModifiedHiddenLine(_.startLineNumber)}}}}Ir(this._nodes.others,...f)}))}}var QKe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},qKe=function(n,e){return function(t,i){e(t,i,n)}},Sa;let Gg=Sa=class extends Le{constructor(e,t,i,s,r,o,a){super(),this._editors=e,this._rootElement=t,this._diffModel=i,this._rootWidth=s,this._rootHeight=r,this._modifiedEditorLayoutInfo=o,this._themeService=a,this.width=Sa.ENTIRE_DIFF_OVERVIEW_WIDTH;const l=os(this._themeService.onDidColorThemeChange,()=>this._themeService.getColorTheme()),c=Xt(h=>{const f=l.read(h),g=f.getColor(pWe)||(f.getColor(gWe)||D3).transparent(2),m=f.getColor(bWe)||(f.getColor(mWe)||I3).transparent(2);return{insertColor:g,removeColor:m}}),d=di(document.createElement("div"));d.setClassName("diffViewport"),d.setPosition("absolute");const u=wi("div.diffOverview",{style:{position:"absolute",top:"0px",width:Sa.ENTIRE_DIFF_OVERVIEW_WIDTH+"px"}}).root;this._register(zv(u,d.domNode)),this._register(ws(u,Ge.POINTER_DOWN,h=>{this._editors.modified.delegateVerticalScrollbarPointerDown(h)})),this._register(we(u,Ge.MOUSE_WHEEL,h=>{this._editors.modified.delegateScrollFromMouseWheelEvent(h)},{passive:!1})),this._register(zv(this._rootElement,u)),this._register(Oc((h,f)=>{const g=this._diffModel.read(h),m=this._editors.original.createOverviewRuler("original diffOverviewRuler");m&&(f.add(m),f.add(zv(u,m.getDomNode())));const p=this._editors.modified.createOverviewRuler("modified diffOverviewRuler");if(p&&(f.add(p),f.add(zv(u,p.getDomNode()))),!m||!p)return;const b=Qo("viewZoneChanged",this._editors.original.onDidChangeViewZones),w=Qo("viewZoneChanged",this._editors.modified.onDidChangeViewZones),v=Qo("hiddenRangesChanged",this._editors.original.onDidChangeHiddenAreas),_=Qo("hiddenRangesChanged",this._editors.modified.onDidChangeHiddenAreas);f.add(ki(y=>{var C;b.read(y),w.read(y),v.read(y),_.read(y);const S=c.read(y),k=(C=g?.diff.read(y))===null||C===void 0?void 0:C.mappings;function I(M,E,W){const P=W._getViewModel();return P?M.filter(N=>N.length>0).map(N=>{const H=P.coordinatesConverter.convertModelPositionToViewPosition(new pe(N.startLineNumber,1)),U=P.coordinatesConverter.convertModelPositionToViewPosition(new pe(N.endLineNumberExclusive,1)),B=U.lineNumber-H.lineNumber;return new ise(H.lineNumber,U.lineNumber,B,E.toString())}):[]}const T=I((k||[]).map(M=>M.lineRangeMapping.original),S.removeColor,this._editors.original),D=I((k||[]).map(M=>M.lineRangeMapping.modified),S.insertColor,this._editors.modified);m?.setZones(T),p?.setZones(D)})),f.add(ki(y=>{const C=this._rootHeight.read(y),S=this._rootWidth.read(y),k=this._modifiedEditorLayoutInfo.read(y);if(k){const I=Sa.ENTIRE_DIFF_OVERVIEW_WIDTH-2*Sa.ONE_OVERVIEW_WIDTH;m.setLayout({top:0,height:C,right:I+Sa.ONE_OVERVIEW_WIDTH,width:Sa.ONE_OVERVIEW_WIDTH}),p.setLayout({top:0,height:C,right:0,width:Sa.ONE_OVERVIEW_WIDTH});const T=this._editors.modifiedScrollTop.read(y),D=this._editors.modifiedScrollHeight.read(y),M=this._editors.modified.getOption(103),E=new Ab(M.verticalHasArrows?M.arrowSize:0,M.verticalScrollbarSize,0,k.height,D,T);d.setTop(E.getSliderPosition()),d.setHeight(E.getSliderSize())}else d.setTop(0),d.setHeight(0);u.style.height=C+"px",u.style.left=S-Sa.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",d.setWidth(Sa.ENTIRE_DIFF_OVERVIEW_WIDTH)}))}))}};Gg.ONE_OVERVIEW_WIDTH=15;Gg.ENTIRE_DIFF_OVERVIEW_WIDTH=Sa.ONE_OVERVIEW_WIDTH*2;Gg=Sa=QKe([qKe(6,Xo)],Gg);const e9=[];class eje extends Le{constructor(e,t,i,s){super(),this._editors=e,this._diffModel=t,this._options=i,this._widget=s,this._selectedDiffs=Xt(this,r=>{const o=this._diffModel.read(r),a=o?.diff.read(r);if(!a)return e9;const l=this._editors.modifiedSelections.read(r);if(l.every(h=>h.isEmpty()))return e9;const c=new $o(l.map(h=>Lt.fromRangeInclusive(h))),u=a.mappings.filter(h=>h.lineRangeMapping.innerChanges&&c.intersects(h.lineRangeMapping.modified)).map(h=>({mapping:h,rangeMappings:h.lineRangeMapping.innerChanges.filter(f=>l.some(g=>te.areIntersecting(f.modifiedRange,g)))}));return u.length===0||u.every(h=>h.rangeMappings.length===0)?e9:u}),this._register(Oc((r,o)=>{if(!this._options.shouldRenderOldRevertArrows.read(r))return;const a=this._diffModel.read(r),l=a?.diff.read(r);if(!a||!l||a.movedTextToCompare.read(r))return;const c=[],d=this._selectedDiffs.read(r),u=new Set(d.map(h=>h.mapping));if(d.length>0){const h=this._editors.modifiedSelections.read(r),f=o.add(new A1(h[h.length-1].positionLineNumber,this._widget,d.flatMap(g=>g.rangeMappings),!0));this._editors.modified.addGlyphMarginWidget(f),c.push(f)}for(const h of l.mappings)if(!u.has(h)&&!h.lineRangeMapping.modified.isEmpty&&h.lineRangeMapping.innerChanges){const f=o.add(new A1(h.lineRangeMapping.modified.startLineNumber,this._widget,h.lineRangeMapping,!1));this._editors.modified.addGlyphMarginWidget(f),c.push(f)}o.add(Et(()=>{for(const h of c)this._editors.modified.removeGlyphMarginWidget(h)}))}))}}class A1 extends Le{getId(){return this._id}constructor(e,t,i,s){super(),this._lineNumber=e,this._widget=t,this._diffs=i,this._revertSelection=s,this._id=`revertButton${A1.counter++}`,this._domNode=wi("div.revertButton",{title:this._revertSelection?L("revertSelectedChanges","Revert Selected Changes"):L("revertChange","Revert Change")},[AL(Qe.arrowRight)]).root,this._register(we(this._domNode,Ge.MOUSE_DOWN,r=>{r.button!==2&&(r.stopPropagation(),r.preventDefault())})),this._register(we(this._domNode,Ge.MOUSE_UP,r=>{r.stopPropagation(),r.preventDefault()})),this._register(we(this._domNode,Ge.CLICK,r=>{this._diffs instanceof Cr?this._widget.revert(this._diffs):this._widget.revertRangeMappings(this._diffs),r.stopPropagation(),r.preventDefault()}))}getDomNode(){return this._domNode}getPosition(){return{lane:Ph.Right,range:{startColumn:1,startLineNumber:this._lineNumber,endColumn:1,endLineNumber:this._lineNumber},zIndex:10001}}}A1.counter=0;function nd(n,e,t){const i=n.bindTo(e);return nO({debugName:()=>`Set Context Key "${n.key}"`},s=>{i.set(t(s))})}function tje(n){return eg.get(n)}class eg{static get(e){let t=eg._map.get(e);if(!t){t=new eg(e),eg._map.set(e,t);const i=e.onDidDispose(()=>{eg._map.delete(e),i.dispose()})}return t}constructor(e){this.editor=e,this.model=os(this.editor.onDidChangeModel,()=>this.editor.getModel())}}eg._map=new Map;var ije=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},hJ=function(n,e){return function(t,i){e(t,i,n)}};let NF=class extends Le{get onDidContentSizeChange(){return this._onDidContentSizeChange.event}constructor(e,t,i,s,r,o,a){super(),this.originalEditorElement=e,this.modifiedEditorElement=t,this._options=i,this._argCodeEditorWidgetOptions=s,this._createInnerEditor=r,this._instantiationService=o,this._keybindingService=a,this.original=this._register(this._createLeftHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.originalEditor||{})),this.modified=this._register(this._createRightHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.modifiedEditor||{})),this._onDidContentSizeChange=this._register(new ue),this.modifiedScrollTop=os(this.modified.onDidScrollChange,()=>this.modified.getScrollTop()),this.modifiedScrollHeight=os(this.modified.onDidScrollChange,()=>this.modified.getScrollHeight()),this.modifiedModel=tje(this.modified).model,this.modifiedSelections=os(this.modified.onDidChangeCursorSelection,()=>{var l;return(l=this.modified.getSelections())!==null&&l!==void 0?l:[]}),this.modifiedCursor=hre({owner:this,equalsFn:pe.equals},l=>{var c,d;return(d=(c=this.modifiedSelections.read(l)[0])===null||c===void 0?void 0:c.getPosition())!==null&&d!==void 0?d:new pe(1,1)}),this.originalCursor=os(this.original.onDidChangeCursorPosition,()=>{var l;return(l=this.original.getPosition())!==null&&l!==void 0?l:new pe(1,1)}),this._argCodeEditorWidgetOptions=null,this._register(lT({createEmptyChangeSummary:()=>({}),handleChange:(l,c)=>(l.didChange(i.editorOptions)&&Object.assign(c,l.change.changedOptions),!0)},(l,c)=>{i.editorOptions.read(l),this._options.renderSideBySide.read(l),this.modified.updateOptions(this._adjustOptionsForRightHandSide(l,c)),this.original.updateOptions(this._adjustOptionsForLeftHandSide(l,c))}))}_createLeftHandSideEditor(e,t){const i=this._adjustOptionsForLeftHandSide(void 0,e),s=this._constructInnerEditor(this._instantiationService,this.originalEditorElement,i,t);return s.setContextValue("isInDiffLeftEditor",!0),s}_createRightHandSideEditor(e,t){const i=this._adjustOptionsForRightHandSide(void 0,e),s=this._constructInnerEditor(this._instantiationService,this.modifiedEditorElement,i,t);return s.setContextValue("isInDiffRightEditor",!0),s}_constructInnerEditor(e,t,i,s){const r=this._createInnerEditor(e,t,i,s);return this._register(r.onDidContentSizeChange(o=>{const a=this.original.getContentWidth()+this.modified.getContentWidth()+Gg.ENTIRE_DIFF_OVERVIEW_WIDTH,l=Math.max(this.modified.getContentHeight(),this.original.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:l,contentWidth:a,contentHeightChanged:o.contentHeightChanged,contentWidthChanged:o.contentWidthChanged})})),r}_adjustOptionsForLeftHandSide(e,t){const i=this._adjustOptionsForSubEditor(t);return this._options.renderSideBySide.get()?(i.unicodeHighlight=this._options.editorOptions.get().unicodeHighlight||{},i.wordWrapOverride1=this._options.diffWordWrap.get()):(i.wordWrapOverride1="off",i.wordWrapOverride2="off",i.stickyScroll={enabled:!1},i.unicodeHighlight={nonBasicASCII:!1,ambiguousCharacters:!1,invisibleCharacters:!1}),i.glyphMargin=this._options.renderSideBySide.get(),t.originalAriaLabel&&(i.ariaLabel=t.originalAriaLabel),i.ariaLabel=this._updateAriaLabel(i.ariaLabel),i.readOnly=!this._options.originalEditable.get(),i.dropIntoEditor={enabled:!i.readOnly},i.extraEditorClassName="original-in-monaco-diff-editor",i}_adjustOptionsForRightHandSide(e,t){const i=this._adjustOptionsForSubEditor(t);return t.modifiedAriaLabel&&(i.ariaLabel=t.modifiedAriaLabel),i.ariaLabel=this._updateAriaLabel(i.ariaLabel),i.wordWrapOverride1=this._options.diffWordWrap.get(),i.revealHorizontalRightPadding=hm.revealHorizontalRightPadding.defaultValue+Gg.ENTIRE_DIFF_OVERVIEW_WIDTH,i.scrollbar.verticalHasArrows=!1,i.extraEditorClassName="modified-in-monaco-diff-editor",i}_adjustOptionsForSubEditor(e){const t={...e,dimension:{height:0,width:0}};return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar={...t.scrollbar||{}},t.folding=!1,t.codeLens=this._options.diffCodeLens.get(),t.fixedOverflowWidgets=!0,t.minimap={...t.minimap||{}},t.minimap.enabled=!1,this._options.hideUnchangedRegions.get()?t.stickyScroll={enabled:!1}:t.stickyScroll=this._options.editorOptions.get().stickyScroll,t}_updateAriaLabel(e){var t;e||(e="");const i=L("diff-aria-navigation-tip"," use {0} to open the accessibility help.",(t=this._keybindingService.lookupKeybinding("editor.action.accessibilityHelp"))===null||t===void 0?void 0:t.getAriaLabel());return this._options.accessibilityVerbose.get()?e+i:e?e.replaceAll(i,""):""}};NF=ije([hJ(5,Si),hJ(6,Ls)],NF);class WT extends Le{constructor(){super(...arguments),this._id=++WT.idCounter,this._onDidDispose=this._register(new ue),this.onDidDispose=this._onDidDispose.event}getId(){return this.getEditorType()+":v2:"+this._id}getVisibleColumnFromPosition(e){return this._targetEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._targetEditor.getPosition()}setPosition(e,t="api"){this._targetEditor.setPosition(e,t)}revealLine(e,t=0){this._targetEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._targetEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._targetEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._targetEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._targetEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._targetEditor.revealPositionNearTop(e,t)}getSelection(){return this._targetEditor.getSelection()}getSelections(){return this._targetEditor.getSelections()}setSelection(e,t="api"){this._targetEditor.setSelection(e,t)}setSelections(e,t="api"){this._targetEditor.setSelections(e,t)}revealLines(e,t,i=0){this._targetEditor.revealLines(e,t,i)}revealLinesInCenter(e,t,i=0){this._targetEditor.revealLinesInCenter(e,t,i)}revealLinesInCenterIfOutsideViewport(e,t,i=0){this._targetEditor.revealLinesInCenterIfOutsideViewport(e,t,i)}revealLinesNearTop(e,t,i=0){this._targetEditor.revealLinesNearTop(e,t,i)}revealRange(e,t=0,i=!1,s=!0){this._targetEditor.revealRange(e,t,i,s)}revealRangeInCenter(e,t=0){this._targetEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._targetEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._targetEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._targetEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._targetEditor.getSupportedActions()}focus(){this._targetEditor.focus()}trigger(e,t,i){this._targetEditor.trigger(e,t,i)}createDecorationsCollection(e){return this._targetEditor.createDecorationsCollection(e)}changeDecorations(e){return this._targetEditor.changeDecorations(e)}}WT.idCounter=0;var nje=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},sje=function(n,e){return function(t,i){e(t,i,n)}};let RF=class{get editorOptions(){return this._options}constructor(e,t){this._accessibilityService=t,this._diffEditorWidth=vi(this,0),this._screenReaderMode=os(this._accessibilityService.onDidChangeScreenReaderOptimized,()=>this._accessibilityService.isScreenReaderOptimized()),this.couldShowInlineViewBecauseOfSize=Xt(this,s=>this._options.read(s).renderSideBySide&&this._diffEditorWidth.read(s)<=this._options.read(s).renderSideBySideInlineBreakpoint),this.renderOverviewRuler=Xt(this,s=>this._options.read(s).renderOverviewRuler),this.renderSideBySide=Xt(this,s=>this._options.read(s).renderSideBySide&&!(this._options.read(s).useInlineViewWhenSpaceIsLimited&&this.couldShowInlineViewBecauseOfSize.read(s)&&!this._screenReaderMode.read(s))),this.readOnly=Xt(this,s=>this._options.read(s).readOnly),this.shouldRenderOldRevertArrows=Xt(this,s=>!(!this._options.read(s).renderMarginRevertIcon||!this.renderSideBySide.read(s)||this.readOnly.read(s)||this.shouldRenderGutterMenu.read(s))),this.shouldRenderGutterMenu=Xt(this,s=>this._options.read(s).renderGutterMenu),this.renderIndicators=Xt(this,s=>this._options.read(s).renderIndicators),this.enableSplitViewResizing=Xt(this,s=>this._options.read(s).enableSplitViewResizing),this.splitViewDefaultRatio=Xt(this,s=>this._options.read(s).splitViewDefaultRatio),this.ignoreTrimWhitespace=Xt(this,s=>this._options.read(s).ignoreTrimWhitespace),this.maxComputationTimeMs=Xt(this,s=>this._options.read(s).maxComputationTime),this.showMoves=Xt(this,s=>this._options.read(s).experimental.showMoves&&this.renderSideBySide.read(s)),this.isInEmbeddedEditor=Xt(this,s=>this._options.read(s).isInEmbeddedEditor),this.diffWordWrap=Xt(this,s=>this._options.read(s).diffWordWrap),this.originalEditable=Xt(this,s=>this._options.read(s).originalEditable),this.diffCodeLens=Xt(this,s=>this._options.read(s).diffCodeLens),this.accessibilityVerbose=Xt(this,s=>this._options.read(s).accessibilityVerbose),this.diffAlgorithm=Xt(this,s=>this._options.read(s).diffAlgorithm),this.showEmptyDecorations=Xt(this,s=>this._options.read(s).experimental.showEmptyDecorations),this.onlyShowAccessibleDiffViewer=Xt(this,s=>this._options.read(s).onlyShowAccessibleDiffViewer),this.hideUnchangedRegions=Xt(this,s=>this._options.read(s).hideUnchangedRegions.enabled),this.hideUnchangedRegionsRevealLineCount=Xt(this,s=>this._options.read(s).hideUnchangedRegions.revealLineCount),this.hideUnchangedRegionsContextLineCount=Xt(this,s=>this._options.read(s).hideUnchangedRegions.contextLineCount),this.hideUnchangedRegionsMinimumLineCount=Xt(this,s=>this._options.read(s).hideUnchangedRegions.minimumLineCount);const i={...e,...fJ(e,Hs)};this._options=vi(this,i)}updateOptions(e){const t=fJ(e,this._options.get()),i={...this._options.get(),...e,...t};this._options.set(i,void 0,{changedOptions:e})}setWidth(e){this._diffEditorWidth.set(e,void 0)}};RF=nje([sje(1,Xl)],RF);function fJ(n,e){var t,i,s,r,o,a,l,c;return{enableSplitViewResizing:at(n.enableSplitViewResizing,e.enableSplitViewResizing),splitViewDefaultRatio:$9e(n.splitViewDefaultRatio,.5,.1,.9),renderSideBySide:at(n.renderSideBySide,e.renderSideBySide),renderMarginRevertIcon:at(n.renderMarginRevertIcon,e.renderMarginRevertIcon),maxComputationTime:xf(n.maxComputationTime,e.maxComputationTime,0,1073741824),maxFileSize:xf(n.maxFileSize,e.maxFileSize,0,1073741824),ignoreTrimWhitespace:at(n.ignoreTrimWhitespace,e.ignoreTrimWhitespace),renderIndicators:at(n.renderIndicators,e.renderIndicators),originalEditable:at(n.originalEditable,e.originalEditable),diffCodeLens:at(n.diffCodeLens,e.diffCodeLens),renderOverviewRuler:at(n.renderOverviewRuler,e.renderOverviewRuler),diffWordWrap:vn(n.diffWordWrap,e.diffWordWrap,["off","on","inherit"]),diffAlgorithm:vn(n.diffAlgorithm,e.diffAlgorithm,["legacy","advanced"],{smart:"legacy",experimental:"advanced"}),accessibilityVerbose:at(n.accessibilityVerbose,e.accessibilityVerbose),experimental:{showMoves:at((t=n.experimental)===null||t===void 0?void 0:t.showMoves,e.experimental.showMoves),showEmptyDecorations:at((i=n.experimental)===null||i===void 0?void 0:i.showEmptyDecorations,e.experimental.showEmptyDecorations)},hideUnchangedRegions:{enabled:at((r=(s=n.hideUnchangedRegions)===null||s===void 0?void 0:s.enabled)!==null&&r!==void 0?r:(o=n.experimental)===null||o===void 0?void 0:o.collapseUnchangedRegions,e.hideUnchangedRegions.enabled),contextLineCount:xf((a=n.hideUnchangedRegions)===null||a===void 0?void 0:a.contextLineCount,e.hideUnchangedRegions.contextLineCount,0,1073741824),minimumLineCount:xf((l=n.hideUnchangedRegions)===null||l===void 0?void 0:l.minimumLineCount,e.hideUnchangedRegions.minimumLineCount,0,1073741824),revealLineCount:xf((c=n.hideUnchangedRegions)===null||c===void 0?void 0:c.revealLineCount,e.hideUnchangedRegions.revealLineCount,0,1073741824)},isInEmbeddedEditor:at(n.isInEmbeddedEditor,e.isInEmbeddedEditor),onlyShowAccessibleDiffViewer:at(n.onlyShowAccessibleDiffViewer,e.onlyShowAccessibleDiffViewer),renderSideBySideInlineBreakpoint:xf(n.renderSideBySideInlineBreakpoint,e.renderSideBySideInlineBreakpoint,0,1073741824),useInlineViewWhenSpaceIsLimited:at(n.useInlineViewWhenSpaceIsLimited,e.useInlineViewWhenSpaceIsLimited),renderGutterMenu:at(n.renderGutterMenu,e.renderGutterMenu)}}var rje=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},mv=function(n,e){return function(t,i){e(t,i,n)}};let Ik=class extends WT{get onDidContentSizeChange(){return this._editors.onDidContentSizeChange}constructor(e,t,i,s,r,o,a,l){var c;super(),this._domElement=e,this._parentContextKeyService=s,this._parentInstantiationService=r,this._accessibilitySignalService=a,this._editorProgressService=l,this.elements=wi("div.monaco-diff-editor.side-by-side",{style:{position:"relative",height:"100%"}},[wi("div.editor.original@original",{style:{position:"absolute",height:"100%"}}),wi("div.editor.modified@modified",{style:{position:"absolute",height:"100%"}}),wi("div.accessibleDiffViewer@accessibleDiffViewer",{style:{position:"absolute",height:"100%"}})]),this._diffModel=vi(this,void 0),this._shouldDisposeDiffModel=!1,this.onDidChangeModel=Be.fromObservableLight(this._diffModel),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._domElement)),this._instantiationService=this._register(this._parentInstantiationService.createChild(new Tw([oi,this._contextKeyService]))),this._boundarySashes=vi(this,void 0),this._accessibleDiffViewerShouldBeVisible=vi(this,!1),this._accessibleDiffViewerVisible=Xt(this,y=>this._options.onlyShowAccessibleDiffViewer.read(y)?!0:this._accessibleDiffViewerShouldBeVisible.read(y)),this._movedBlocksLinesPart=vi(this,void 0),this._layoutInfo=Xt(this,y=>{var C,S,k,I,T;const D=this._rootSizeObserver.width.read(y),M=this._rootSizeObserver.height.read(y);this._rootSizeObserver.automaticLayout?this.elements.root.style.height="100%":this.elements.root.style.height=M+"px";const E=this._sash.read(y),W=this._gutter.read(y),P=(C=W?.width.read(y))!==null&&C!==void 0?C:0,N=(k=(S=this._overviewRulerPart.read(y))===null||S===void 0?void 0:S.width)!==null&&k!==void 0?k:0;let H,U,B,Y,ne;if(!!E){const $=E.sashLeft.read(y),ge=(T=(I=this._movedBlocksLinesPart.read(y))===null||I===void 0?void 0:I.width.read(y))!==null&&T!==void 0?T:0;H=0,U=$-P-ge,ne=$-P,B=$,Y=D-B-N}else ne=0,H=P,U=Math.max(5,this._editors.original.getLayoutInfo().decorationsLeft),B=P+U,Y=D-B-N;return this.elements.original.style.left=H+"px",this.elements.original.style.width=U+"px",this._editors.original.layout({width:U,height:M},!0),W?.layout(ne),this.elements.modified.style.left=B+"px",this.elements.modified.style.width=Y+"px",this._editors.modified.layout({width:Y,height:M},!0),{modifiedEditor:this._editors.modified.getLayoutInfo(),originalEditor:this._editors.original.getLayoutInfo()}}),this._diffValue=this._diffModel.map((y,C)=>y?.diff.read(C)),this.onDidUpdateDiff=Be.fromObservableLight(this._diffValue),o.willCreateDiffEditor(),this._contextKeyService.createKey("isInDiffEditor",!0),this._domElement.appendChild(this.elements.root),this._register(Et(()=>this._domElement.removeChild(this.elements.root))),this._rootSizeObserver=this._register(new oae(this.elements.root,t.dimension)),this._rootSizeObserver.setAutomaticLayout((c=t.automaticLayout)!==null&&c!==void 0?c:!1),this._options=this._instantiationService.createInstance(RF,t),this._register(ki(y=>{this._options.setWidth(this._rootSizeObserver.width.read(y))})),this._contextKeyService.createKey(Re.isEmbeddedDiffEditor.key,!1),this._register(nd(Re.isEmbeddedDiffEditor,this._contextKeyService,y=>this._options.isInEmbeddedEditor.read(y))),this._register(nd(Re.comparingMovedCode,this._contextKeyService,y=>{var C;return!!(!((C=this._diffModel.read(y))===null||C===void 0)&&C.movedTextToCompare.read(y))})),this._register(nd(Re.diffEditorRenderSideBySideInlineBreakpointReached,this._contextKeyService,y=>this._options.couldShowInlineViewBecauseOfSize.read(y))),this._register(nd(Re.diffEditorInlineMode,this._contextKeyService,y=>!this._options.renderSideBySide.read(y))),this._register(nd(Re.hasChanges,this._contextKeyService,y=>{var C,S,k;return((k=(S=(C=this._diffModel.read(y))===null||C===void 0?void 0:C.diff.read(y))===null||S===void 0?void 0:S.mappings.length)!==null&&k!==void 0?k:0)>0})),this._editors=this._register(this._instantiationService.createInstance(NF,this.elements.original,this.elements.modified,this._options,i,(y,C,S,k)=>this._createInnerEditor(y,C,S,k))),this._register(nd(Re.diffEditorOriginalWritable,this._contextKeyService,y=>this._options.originalEditable.read(y))),this._register(nd(Re.diffEditorModifiedWritable,this._contextKeyService,y=>!this._options.readOnly.read(y))),this._register(nd(Re.diffEditorOriginalUri,this._contextKeyService,y=>{var C,S;return(S=(C=this._diffModel.read(y))===null||C===void 0?void 0:C.model.original.uri.toString())!==null&&S!==void 0?S:""})),this._register(nd(Re.diffEditorModifiedUri,this._contextKeyService,y=>{var C,S;return(S=(C=this._diffModel.read(y))===null||C===void 0?void 0:C.model.modified.uri.toString())!==null&&S!==void 0?S:""})),this._overviewRulerPart=nc(this,y=>this._options.renderOverviewRuler.read(y)?this._instantiationService.createInstance(ka(Gg,y),this._editors,this.elements.root,this._diffModel,this._rootSizeObserver.width,this._rootSizeObserver.height,this._layoutInfo.map(C=>C.modifiedEditor)):void 0).recomputeInitiallyAndOnChange(this._store);const d={height:this._rootSizeObserver.height,width:this._rootSizeObserver.width.map((y,C)=>{var S,k;return y-((k=(S=this._overviewRulerPart.read(C))===null||S===void 0?void 0:S.width)!==null&&k!==void 0?k:0)})};this._sashLayout=new PKe(this._options,d),this._sash=nc(this,y=>{const C=this._options.renderSideBySide.read(y);return this.elements.root.classList.toggle("side-by-side",C),C?new cae(this.elements.root,d,this._options.enableSplitViewResizing,this._boundarySashes,this._sashLayout.sashLeft,()=>this._sashLayout.resetSash()):void 0}).recomputeInitiallyAndOnChange(this._store);const u=nc(this,y=>this._instantiationService.createInstance(ka(Dk,y),this._editors,this._diffModel,this._options)).recomputeInitiallyAndOnChange(this._store);nc(this,y=>this._instantiationService.createInstance(ka(VKe,y),this._editors,this._diffModel,this._options,this)).recomputeInitiallyAndOnChange(this._store);const h=new Set,f=new Set;let g=!1;const m=nc(this,y=>this._instantiationService.createInstance(ka(TF,y),pt(this._domElement),this._editors,this._diffModel,this._options,this,()=>g||u.get().isUpdatingHiddenAreas,h,f)).recomputeInitiallyAndOnChange(this._store),p=Xt(this,y=>{const C=m.read(y).viewZones.read(y).orig,S=u.read(y).viewZones.read(y).origViewZones;return C.concat(S)}),b=Xt(this,y=>{const C=m.read(y).viewZones.read(y).mod,S=u.read(y).viewZones.read(y).modViewZones;return C.concat(S)});this._register(kk(this._editors.original,p,y=>{g=y},h));let w;this._register(kk(this._editors.modified,b,y=>{g=y,g?w=m1.capture(this._editors.modified):(w?.restore(this._editors.modified),w=void 0)},f)),this._accessibleDiffViewer=nc(this,y=>this._instantiationService.createInstance(ka(oh,y),this.elements.accessibleDiffViewer,this._accessibleDiffViewerVisible,(C,S)=>this._accessibleDiffViewerShouldBeVisible.set(C,S),this._options.onlyShowAccessibleDiffViewer.map(C=>!C),this._rootSizeObserver.width,this._rootSizeObserver.height,this._diffModel.map((C,S)=>{var k;return(k=C?.diff.read(S))===null||k===void 0?void 0:k.mappings.map(I=>I.lineRangeMapping)}),new EKe(this._editors))).recomputeInitiallyAndOnChange(this._store);const v=this._accessibleDiffViewerVisible.map(y=>y?"hidden":"visible");this._register(Hh(this.elements.modified,{visibility:v})),this._register(Hh(this.elements.original,{visibility:v})),this._createDiffEditorContributions(),o.addDiffEditor(this),this._gutter=nc(this,y=>this._options.shouldRenderGutterMenu.read(y)?this._instantiationService.createInstance(ka(IF,y),this.elements.root,this._diffModel,this._editors,this._options,this._sashLayout,this._boundarySashes):void 0),this._register(dT(this._layoutInfo)),nc(this,y=>new(ka(kh,y))(this.elements.root,this._diffModel,this._layoutInfo.map(C=>C.originalEditor),this._layoutInfo.map(C=>C.modifiedEditor),this._editors)).recomputeInitiallyAndOnChange(this._store,y=>{this._movedBlocksLinesPart.set(y,void 0)}),this._register(Be.runAndSubscribe(this._editors.modified.onDidChangeCursorPosition,y=>this._handleCursorPositionChange(y,!0))),this._register(Be.runAndSubscribe(this._editors.original.onDidChangeCursorPosition,y=>this._handleCursorPositionChange(y,!1)));const _=this._diffModel.map(this,(y,C)=>{if(y)return y.diff.read(C)===void 0&&!y.isDiffUpToDate.read(C)});this._register(Oc((y,C)=>{if(_.read(y)===!0){const S=this._editorProgressService.show(!0,1e3);C.add(Et(()=>S.done()))}})),this._register(Et(()=>{var y;this._shouldDisposeDiffModel&&((y=this._diffModel.get())===null||y===void 0||y.dispose())})),this._register(Oc((y,C)=>{C.add(new(ka(eje,y))(this._editors,this._diffModel,this._options,this))}))}_createInnerEditor(e,t,i,s){return e.createInstance(l1,t,i,s)}_createDiffEditorContributions(){const e=Tp.getDiffEditorContributions();for(const t of e)try{this._register(this._instantiationService.createInstance(t.ctor,this))}catch(i){gi(i)}}get _targetEditor(){return this._editors.modified}getEditorType(){return J2.IDiffEditor}layout(e){this._rootSizeObserver.observe(e)}hasTextFocus(){return this._editors.original.hasTextFocus()||this._editors.modified.hasTextFocus()}saveViewState(){var e;const t=this._editors.original.saveViewState(),i=this._editors.modified.saveViewState();return{original:t,modified:i,modelState:(e=this._diffModel.get())===null||e===void 0?void 0:e.serializeState()}}restoreViewState(e){var t;if(e&&e.original&&e.modified){const i=e;this._editors.original.restoreViewState(i.original),this._editors.modified.restoreViewState(i.modified),i.modelState&&((t=this._diffModel.get())===null||t===void 0||t.restoreSerializedState(i.modelState))}}handleInitialized(){this._editors.original.handleInitialized(),this._editors.modified.handleInitialized()}createViewModel(e){return this._instantiationService.createInstance(xF,e,this._options)}getModel(){var e,t;return(t=(e=this._diffModel.get())===null||e===void 0?void 0:e.model)!==null&&t!==void 0?t:null}setModel(e,t){!e&&this._diffModel.get()&&this._accessibleDiffViewer.get().close();const i=e?"model"in e?{model:e,shouldDispose:!1}:{model:this.createViewModel(e),shouldDispose:!0}:void 0;this._diffModel.get()!==i?.model&&tO(t,s=>{var r;os.batchEventsGlobally(s,()=>{this._editors.original.setModel(i?i.model.model.original:null),this._editors.modified.setModel(i?i.model.model.modified:null)});const o=this._diffModel.get(),a=this._shouldDisposeDiffModel;this._shouldDisposeDiffModel=(r=i?.shouldDispose)!==null&&r!==void 0?r:!1,this._diffModel.set(i?.model,s),a&&o?.dispose()})}updateOptions(e){this._options.updateOptions(e)}getContainerDomNode(){return this._domElement}getOriginalEditor(){return this._editors.original}getModifiedEditor(){return this._editors.modified}getLineChanges(){var e;const t=(e=this._diffModel.get())===null||e===void 0?void 0:e.diff.get();return t?oje(t):null}revert(e){const t=this._diffModel.get();!t||!t.isDiffUpToDate.get()||this._editors.modified.executeEdits("diffEditor",[{range:e.modified.toExclusiveRange(),text:t.model.original.getValueInRange(e.original.toExclusiveRange())}])}revertRangeMappings(e){const t=this._diffModel.get();if(!t||!t.isDiffUpToDate.get())return;const i=e.map(s=>({range:s.modifiedRange,text:t.model.original.getValueInRange(s.originalRange)}));this._editors.modified.executeEdits("diffEditor",i)}_goTo(e){this._editors.modified.setPosition(new pe(e.lineRangeMapping.modified.startLineNumber,1)),this._editors.modified.revealRangeInCenter(e.lineRangeMapping.modified.toExclusiveRange())}goToDiff(e){var t,i,s,r;const o=(i=(t=this._diffModel.get())===null||t===void 0?void 0:t.diff.get())===null||i===void 0?void 0:i.mappings;if(!o||o.length===0)return;const a=this._editors.modified.getPosition().lineNumber;let l;e==="next"?l=(s=o.find(c=>c.lineRangeMapping.modified.startLineNumber>a))!==null&&s!==void 0?s:o[0]:l=(r=yL(o,c=>c.lineRangeMapping.modified.startLineNumber<a))!==null&&r!==void 0?r:o[o.length-1],this._goTo(l),l.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(Tt.diffLineDeleted,{source:"diffEditor.goToDiff"}):l.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(Tt.diffLineInserted,{source:"diffEditor.goToDiff"}):l&&this._accessibilitySignalService.playSignal(Tt.diffLineModified,{source:"diffEditor.goToDiff"})}revealFirstDiff(){const e=this._diffModel.get();e&&this.waitForDiff().then(()=>{var t;const i=(t=e.diff.get())===null||t===void 0?void 0:t.mappings;!i||i.length===0||this._goTo(i[0])})}accessibleDiffViewerNext(){this._accessibleDiffViewer.get().next()}accessibleDiffViewerPrev(){this._accessibleDiffViewer.get().prev()}async waitForDiff(){const e=this._diffModel.get();e&&await e.waitForDiff()}mapToOtherSide(){var e,t;const i=this._editors.modified.hasWidgetFocus(),s=i?this._editors.modified:this._editors.original,r=i?this._editors.original:this._editors.modified;let o;const a=s.getSelection();if(a){const l=(t=(e=this._diffModel.get())===null||e===void 0?void 0:e.diff.get())===null||t===void 0?void 0:t.mappings.map(c=>i?c.lineRangeMapping.flip():c.lineRangeMapping);if(l){const c=$j(a.getStartPosition(),l),d=$j(a.getEndPosition(),l);o=te.plusRange(c,d)}}return{destination:r,destinationSelection:o}}switchSide(){const{destination:e,destinationSelection:t}=this.mapToOtherSide();e.focus(),t&&e.setSelection(t)}exitCompareMove(){const e=this._diffModel.get();e&&e.movedTextToCompare.set(void 0,void 0)}collapseAllUnchangedRegions(){var e;const t=(e=this._diffModel.get())===null||e===void 0?void 0:e.unchangedRegions.get();t&&_s(i=>{for(const s of t)s.collapseAll(i)})}showAllUnchangedRegions(){var e;const t=(e=this._diffModel.get())===null||e===void 0?void 0:e.unchangedRegions.get();t&&_s(i=>{for(const s of t)s.showAll(i)})}_handleCursorPositionChange(e,t){var i,s;if(e?.reason===3){const r=(s=(i=this._diffModel.get())===null||i===void 0?void 0:i.diff.get())===null||s===void 0?void 0:s.mappings.find(o=>t?o.lineRangeMapping.modified.contains(e.position.lineNumber):o.lineRangeMapping.original.contains(e.position.lineNumber));r?.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(Tt.diffLineDeleted,{source:"diffEditor.cursorPositionChanged"}):r?.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(Tt.diffLineInserted,{source:"diffEditor.cursorPositionChanged"}):r&&this._accessibilitySignalService.playSignal(Tt.diffLineModified,{source:"diffEditor.cursorPositionChanged"})}}};Ik=rje([mv(3,oi),mv(4,Si),mv(5,Vn),mv(6,ET),mv(7,JP)],Ik);function oje(n){return n.mappings.map(e=>{const t=e.lineRangeMapping;let i,s,r,o,a=t.innerChanges;return t.original.isEmpty?(i=t.original.startLineNumber-1,s=0,a=void 0):(i=t.original.startLineNumber,s=t.original.endLineNumberExclusive-1),t.modified.isEmpty?(r=t.modified.startLineNumber-1,o=0,a=void 0):(r=t.modified.startLineNumber,o=t.modified.endLineNumberExclusive-1),{originalStartLineNumber:i,originalEndLineNumber:s,modifiedStartLineNumber:r,modifiedEndLineNumber:o,charChanges:a?.map(l=>({originalStartLineNumber:l.originalRange.startLineNumber,originalStartColumn:l.originalRange.startColumn,originalEndLineNumber:l.originalRange.endLineNumber,originalEndColumn:l.originalRange.endColumn,modifiedStartLineNumber:l.modifiedRange.startLineNumber,modifiedStartColumn:l.modifiedRange.startColumn,modifiedEndLineNumber:l.modifiedRange.endLineNumber,modifiedEndColumn:l.modifiedRange.endColumn}))}})}var YO=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Pi=function(n,e){return function(t,i){e(t,i,n)}};let aje=0,gJ=!1;function lje(n){if(!n){if(gJ)return;gJ=!0}J5e(n||Di.document.body)}let Mk=class extends l1{constructor(e,t,i,s,r,o,a,l,c,d,u,h,f){const g={...t};g.ariaLabel=g.ariaLabel||sk.editorViewAccessibleLabel,g.ariaLabel=g.ariaLabel+";"+sk.accessibilityHelpMessage,super(e,g,{},i,s,r,o,c,d,u,h,f),l instanceof Jb?this._standaloneKeybindingService=l:this._standaloneKeybindingService=null,lje(g.ariaContainerElement),a7e((m,p)=>i.createInstance(g1,m,p,{})),l7e(a)}addCommand(e,t,i){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;const s="DYNAMIC_"+ ++aje,r=Wt.deserialize(i);return this._standaloneKeybindingService.addDynamicKeybinding(s,e,t,r),s}createContextKey(e,t){return this._contextKeyService.createKey(e,t)}addAction(e){if(typeof e.id!="string"||typeof e.label!="string"||typeof e.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),Le.None;const t=e.id,i=e.label,s=Wt.and(Wt.equals("editorId",this.getId()),Wt.deserialize(e.precondition)),r=e.keybindings,o=Wt.and(s,Wt.deserialize(e.keybindingContext)),a=e.contextMenuGroupId||null,l=e.contextMenuOrder||0,c=(f,...g)=>Promise.resolve(e.run(this,...g)),d=new ct,u=this.getId()+":"+t;if(d.add(cs.registerCommand(u,c)),a){const f={command:{id:u,title:i},when:s,group:a,order:l};d.add(Wl.appendMenuItem(X.EditorContext,f))}if(Array.isArray(r))for(const f of r)d.add(this._standaloneKeybindingService.addDynamicKeybinding(u,f,c,o));const h=new sse(u,i,i,void 0,s,(...f)=>Promise.resolve(e.run(this,...f)),this._contextKeyService);return this._actions.set(t,h),d.add(Et(()=>{this._actions.delete(t)})),d}_triggerCommand(e,t){if(this._codeEditorService instanceof qL)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(e,t)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(e,t)}};Mk=YO([Pi(2,Si),Pi(3,Vn),Pi(4,eo),Pi(5,oi),Pi(6,_m),Pi(7,Ls),Pi(8,Xo),Pi(9,Rr),Pi(10,Xl),Pi(11,ma),Pi(12,ei)],Mk);let WF=class extends Mk{constructor(e,t,i,s,r,o,a,l,c,d,u,h,f,g,m,p){const b={...t};Sk(u,b,!1);const w=c.registerEditorContainer(e);typeof b.theme=="string"&&c.setTheme(b.theme),typeof b.autoDetectHighContrast<"u"&&c.setAutoDetectHighContrast(!!b.autoDetectHighContrast);const v=b.model;delete b.model,super(e,b,i,s,r,o,a,l,c,d,h,m,p),this._configurationService=u,this._standaloneThemeService=c,this._register(w);let _;if(typeof v>"u"){const y=g.getLanguageIdByMimeType(b.language)||b.language||Va;_=pae(f,g,b.value||"",y,void 0),this._ownsModel=!0}else _=v,this._ownsModel=!1;if(this._attachModel(_),_){const y={oldModelUrl:null,newModelUrl:_.uri};this._onDidChangeModel.fire(y)}}dispose(){super.dispose()}updateOptions(e){Sk(this._configurationService,e,!1),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_postDetachModelCleanup(e){super._postDetachModelCleanup(e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}};WF=YO([Pi(2,Si),Pi(3,Vn),Pi(4,eo),Pi(5,oi),Pi(6,_m),Pi(7,Ls),Pi(8,qa),Pi(9,Rr),Pi(10,gn),Pi(11,Xl),Pi(12,Ws),Pi(13,Cs),Pi(14,ma),Pi(15,ei)],WF);let AF=class extends Ik{constructor(e,t,i,s,r,o,a,l,c,d,u,h){const f={...t};Sk(l,f,!0);const g=o.registerEditorContainer(e);typeof f.theme=="string"&&o.setTheme(f.theme),typeof f.autoDetectHighContrast<"u"&&o.setAutoDetectHighContrast(!!f.autoDetectHighContrast),super(e,f,{},s,i,r,h,d),this._configurationService=l,this._standaloneThemeService=o,this._register(g)}dispose(){super.dispose()}updateOptions(e){Sk(this._configurationService,e,!0),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_createInnerEditor(e,t,i){return e.createInstance(Mk,t,i)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,t,i){return this.getModifiedEditor().addCommand(e,t,i)}createContextKey(e,t){return this.getModifiedEditor().createContextKey(e,t)}addAction(e){return this.getModifiedEditor().addAction(e)}};AF=YO([Pi(2,Si),Pi(3,oi),Pi(4,Vn),Pi(5,qa),Pi(6,Rr),Pi(7,gn),Pi(8,jc),Pi(9,JP),Pi(10,bm),Pi(11,ET)],AF);function pae(n,e,t,i,s){if(t=t||"",!i){const r=t.indexOf(`
`);let o=t;return r!==-1&&(o=t.substring(0,r)),mJ(n,t,e.createByFilepathOrFirstLine(s||null,o),s)}return mJ(n,t,e.createById(i),s)}function mJ(n,e,t,i){return n.createModel(e,t,i)}var cje=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},dje=function(n,e){return function(t,i){e(t,i,n)}};class uje{constructor(e,t){this.viewModel=e,this.deltaScrollVertical=t}getId(){return this.viewModel}}let Ek=class extends Le{constructor(e,t,i,s){super(),this._container=e,this._overflowWidgetsDomNode=t,this._workbenchUIElementFactory=i,this._instantiationService=s,this._viewModel=vi(this,void 0),this._collapsed=Xt(this,o=>{var a;return(a=this._viewModel.read(o))===null||a===void 0?void 0:a.collapsed.read(o)}),this._editorContentHeight=vi(this,500),this.contentHeight=Xt(this,o=>(this._collapsed.read(o)?0:this._editorContentHeight.read(o))+this._outerEditorHeight),this._modifiedContentWidth=vi(this,0),this._modifiedWidth=vi(this,0),this._originalContentWidth=vi(this,0),this._originalWidth=vi(this,0),this.maxScroll=Xt(this,o=>{const a=this._modifiedContentWidth.read(o)-this._modifiedWidth.read(o),l=this._originalContentWidth.read(o)-this._originalWidth.read(o);return a>l?{maxScroll:a,width:this._modifiedWidth.read(o)}:{maxScroll:l,width:this._originalWidth.read(o)}}),this._elements=wi("div.multiDiffEntry",[wi("div.header@header",[wi("div.header-content",[wi("div.collapse-button@collapseButton"),wi("div.file-path",[wi("div.title.modified.show-file-icons@primaryPath",[]),wi("div.status.deleted@status",["R"]),wi("div.title.original.show-file-icons@secondaryPath",[])]),wi("div.actions@actions")])]),wi("div.editorParent",[wi("div.editorContainer@editor")])]),this.editor=this._register(this._instantiationService.createInstance(Ik,this._elements.editor,{overflowWidgetsDomNode:this._overflowWidgetsDomNode},{})),this.isModifedFocused=pJ(this.editor.getModifiedEditor()),this.isOriginalFocused=pJ(this.editor.getOriginalEditor()),this.isFocused=Xt(this,o=>this.isModifedFocused.read(o)||this.isOriginalFocused.read(o)),this._resourceLabel=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.primaryPath)):void 0,this._resourceLabel2=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.secondaryPath)):void 0,this._dataStore=new ct,this._headerHeight=40,this._lastScrollTop=-1,this._isSettingScrollTop=!1;const r=new OL(this._elements.collapseButton,{});this._register(ki(o=>{r.element.className="",r.icon=this._collapsed.read(o)?Qe.chevronRight:Qe.chevronDown})),this._register(r.onDidClick(()=>{var o;(o=this._viewModel.get())===null||o===void 0||o.collapsed.set(!this._collapsed.get(),void 0)})),this._register(ki(o=>{this._elements.editor.style.display=this._collapsed.read(o)?"none":"block"})),this._register(this.editor.getModifiedEditor().onDidLayoutChange(o=>{const a=this.editor.getModifiedEditor().getLayoutInfo().contentWidth;this._modifiedWidth.set(a,void 0)})),this._register(this.editor.getOriginalEditor().onDidLayoutChange(o=>{const a=this.editor.getOriginalEditor().getLayoutInfo().contentWidth;this._originalWidth.set(a,void 0)})),this._register(this.editor.onDidContentSizeChange(o=>{QS(a=>{this._editorContentHeight.set(o.contentHeight,a),this._modifiedContentWidth.set(this.editor.getModifiedEditor().getContentWidth(),a),this._originalContentWidth.set(this.editor.getOriginalEditor().getContentWidth(),a)})})),this._register(this.editor.getOriginalEditor().onDidScrollChange(o=>{if(this._isSettingScrollTop||!o.scrollTopChanged||!this._data)return;const a=o.scrollTop-this._lastScrollTop;this._data.deltaScrollVertical(a)})),this._register(ki(o=>{var a;const l=(a=this._viewModel.read(o))===null||a===void 0?void 0:a.isActive.read(o);this._elements.root.classList.toggle("active",l)})),this._container.appendChild(this._elements.root),this._outerEditorHeight=this._headerHeight,this._register(this._instantiationService.createInstance(Tk,this._elements.actions,X.MultiDiffEditorFileToolbar,{actionRunner:this._register(new fae(()=>{var o;return(o=this._viewModel.get())===null||o===void 0?void 0:o.modifiedUri})),menuOptions:{shouldForwardArgs:!0},toolbarOptions:{primaryGroup:o=>o.startsWith("navigation")},actionViewItemProvider:(o,a)=>MHe(s,o,a)}))}setScrollLeft(e){this._modifiedContentWidth.get()-this._modifiedWidth.get()>this._originalContentWidth.get()-this._originalWidth.get()?this.editor.getModifiedEditor().setScrollLeft(e):this.editor.getOriginalEditor().setScrollLeft(e)}setData(e){this._data=e;function t(s){return{...s,scrollBeyondLastLine:!1,hideUnchangedRegions:{enabled:!0},scrollbar:{vertical:"hidden",horizontal:"hidden",handleMouseWheel:!1,useShadows:!1},renderOverviewRuler:!1,fixedOverflowWidgets:!0,overviewRulerBorder:!1}}const i=e.viewModel.entry.value;i.onOptionsDidChange&&this._dataStore.add(i.onOptionsDidChange(()=>{var s;this.editor.updateOptions(t((s=i.options)!==null&&s!==void 0?s:{}))})),QS(s=>{var r,o,a,l;(r=this._resourceLabel)===null||r===void 0||r.setUri((o=e.viewModel.modifiedUri)!==null&&o!==void 0?o:e.viewModel.originalUri,{strikethrough:e.viewModel.modifiedUri===void 0});let c=!1,d=!1,u=!1,h="";e.viewModel.modifiedUri&&e.viewModel.originalUri&&e.viewModel.modifiedUri.path!==e.viewModel.originalUri.path?(h="R",c=!0):e.viewModel.modifiedUri?e.viewModel.originalUri||(h="A",u=!0):(h="D",d=!0),this._elements.status.classList.toggle("renamed",c),this._elements.status.classList.toggle("deleted",d),this._elements.status.classList.toggle("added",u),this._elements.status.innerText=h,(a=this._resourceLabel2)===null||a===void 0||a.setUri(c?e.viewModel.originalUri:void 0,{strikethrough:!0}),this._dataStore.clear(),this._viewModel.set(e.viewModel,s),this.editor.setModel(e.viewModel.diffEditorViewModel,s),this.editor.updateOptions(t((l=i.options)!==null&&l!==void 0?l:{}))})}render(e,t,i,s){this._elements.root.style.visibility="visible",this._elements.root.style.top=`${e.start}px`,this._elements.root.style.height=`${e.length}px`,this._elements.root.style.width=`${t}px`,this._elements.root.style.position="absolute";const r=e.length-this._headerHeight,o=Math.max(0,Math.min(s.start-e.start,r));this._elements.header.style.transform=`translateY(${o}px)`,QS(a=>{this.editor.layout({width:t-2*8-2*1,height:e.length-this._outerEditorHeight})});try{this._isSettingScrollTop=!0,this._lastScrollTop=i,this.editor.getOriginalEditor().setScrollTop(i)}finally{this._isSettingScrollTop=!1}this._elements.header.classList.toggle("shadow",o>0||i>0),this._elements.header.classList.toggle("collapsed",o===r)}hide(){this._elements.root.style.top="-100000px",this._elements.root.style.visibility="hidden"}};Ek=cje([dje(3,Si)],Ek);function pJ(n){return os(e=>{const t=new ct;return t.add(n.onDidFocusEditorWidget(()=>e(!0))),t.add(n.onDidBlurEditorWidget(()=>e(!1))),t},()=>n.hasTextFocus())}class hje{constructor(e){this._create=e,this._unused=new Set,this._used=new Set,this._itemData=new Map}getUnusedObj(e){var t;let i;if(this._unused.size===0)i=this._create(e),this._itemData.set(i,e);else{const s=[...this._unused.values()];i=(t=s.find(r=>this._itemData.get(r).getId()===e.getId()))!==null&&t!==void 0?t:s[0],this._unused.delete(i),this._itemData.set(i,e),i.setData(e)}return this._used.add(i),{object:i,dispose:()=>{this._used.delete(i),this._unused.size>5?i.dispose():this._unused.add(i)}}}dispose(){for(const e of this._used)e.dispose();for(const e of this._unused)e.dispose();this._used.clear(),this._unused.clear()}}var fje=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},bJ=function(n,e){return function(t,i){e(t,i,n)}};let FF=class extends Le{constructor(e,t,i,s,r,o){super(),this._element=e,this._dimension=t,this._viewModel=i,this._workbenchUIElementFactory=s,this._parentContextKeyService=r,this._parentInstantiationService=o,this._scrollableElements=wi("div.scrollContent",[wi("div@content",{style:{overflow:"hidden"}}),wi("div.monaco-editor@overflowWidgetsDomNode",{})]),this._scrollable=this._register(new x0({forceIntegerValues:!1,scheduleAtNextAnimationFrame:l=>po(pt(this._element),l),smoothScrollDuration:100})),this._scrollableElement=this._register(new H2(this._scrollableElements.root,{vertical:1,horizontal:1,useShadows:!1},this._scrollable)),this._elements=wi("div.monaco-component.multiDiffEditor",{},[wi("div",{},[this._scrollableElement.getDomNode()]),wi("div.placeholder@placeholder",{},[wi("div",[L("noChangedFiles","No Changed Files")])])]),this._sizeObserver=this._register(new oae(this._element,void 0)),this._objectPool=this._register(new hje(l=>{const c=this._instantiationService.createInstance(Ek,this._scrollableElements.content,this._scrollableElements.overflowWidgetsDomNode,this._workbenchUIElementFactory);return c.setData(l),c})),this.scrollTop=os(this._scrollableElement.onScroll,()=>this._scrollableElement.getScrollPosition().scrollTop),this.scrollLeft=os(this._scrollableElement.onScroll,()=>this._scrollableElement.getScrollPosition().scrollLeft),this._viewItemsInfo=N0(this,(l,c)=>{const d=this._viewModel.read(l);if(!d)return{items:[],getItem:g=>{throw new Ai}};const u=d.items.read(l),h=new Map;return{items:u.map(g=>{var m;const p=c.add(new gje(g,this._objectPool,this.scrollLeft,w=>{this._scrollableElement.setScrollPosition({scrollTop:this._scrollableElement.getScrollPosition().scrollTop+w})})),b=(m=this._lastDocStates)===null||m===void 0?void 0:m[p.getKey()];return b&&_s(w=>{p.setViewState(b,w)}),h.set(g,p),p}),getItem:g=>h.get(g)}}),this._viewItems=this._viewItemsInfo.map(this,l=>l.items),this._spaceBetweenPx=0,this._totalHeight=this._viewItems.map(this,(l,c)=>l.reduce((d,u)=>d+u.contentHeight.read(c)+this._spaceBetweenPx,0)),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._element)),this._instantiationService=this._register(this._parentInstantiationService.createChild(new Tw([oi,this._contextKeyService]))),this._lastDocStates={},this._contextKeyService.createKey(Re.inMultiDiffEditor.key,!0),this._register(Oc((l,c)=>{const d=this._viewModel.read(l);if(d&&d.contextKeys)for(const[u,h]of Object.entries(d.contextKeys)){const f=this._contextKeyService.createKey(u,void 0);f.set(h),c.add(Et(()=>f.reset()))}}));const a=this._parentContextKeyService.createKey(Re.multiDiffEditorAllCollapsed.key,!1);this._register(ki(l=>{const c=this._viewModel.read(l);if(c){const d=c.items.read(l).every(u=>u.collapsed.read(l));a.set(d)}})),this._register(ki(l=>{const c=this._dimension.read(l);this._sizeObserver.observe(c)})),this._register(ki(l=>{const c=this._viewItems.read(l);this._elements.placeholder.classList.toggle("visible",c.length===0)})),this._scrollableElements.content.style.position="relative",this._register(ki(l=>{const c=this._sizeObserver.height.read(l);this._scrollableElements.root.style.height=`${c}px`;const d=this._totalHeight.read(l);this._scrollableElements.content.style.height=`${d}px`;const u=this._sizeObserver.width.read(l);let h=u;const f=this._viewItems.read(l),g=Qne(f,Fa(m=>m.maxScroll.read(l).maxScroll,vh));if(g){const m=g.maxScroll.read(l);h=u+m.maxScroll}this._scrollableElement.setScrollDimensions({width:u,height:c,scrollHeight:d,scrollWidth:h})})),e.replaceChildren(this._elements.root),this._register(Et(()=>{e.replaceChildren()})),this._register(this._register(ki(l=>{QS(c=>{this.render(l)})})))}render(e){const t=this.scrollTop.read(e);let i=0,s=0,r=0;const o=this._sizeObserver.height.read(e),a=Rt.ofStartAndLength(t,o),l=this._sizeObserver.width.read(e);for(const c of this._viewItems.read(e)){const d=c.contentHeight.read(e),u=Math.min(d,o),h=Rt.ofStartAndLength(s,u),f=Rt.ofStartAndLength(r,d);if(f.isBefore(a))i-=d-u,c.hide();else if(f.isAfter(a))c.hide();else{const g=Math.max(0,Math.min(a.start-f.start,d-u));i-=g;const m=Rt.ofStartAndLength(t+i,o);c.render(h,g,l,m)}s+=u+this._spaceBetweenPx,r+=d+this._spaceBetweenPx}this._scrollableElements.content.style.transform=`translateY(${-(t+i)}px)`}};FF=fje([bJ(4,oi),bJ(5,Si)],FF);class gje extends Le{constructor(e,t,i,s){super(),this.viewModel=e,this._objectPool=t,this._scrollLeft=i,this._deltaScrollVertical=s,this._templateRef=this._register(J7e(this,void 0)),this.contentHeight=Xt(this,r=>{var o,a,l;return(l=(a=(o=this._templateRef.read(r))===null||o===void 0?void 0:o.object.contentHeight)===null||a===void 0?void 0:a.read(r))!==null&&l!==void 0?l:this.viewModel.lastTemplateData.read(r).contentHeight}),this.maxScroll=Xt(this,r=>{var o,a;return(a=(o=this._templateRef.read(r))===null||o===void 0?void 0:o.object.maxScroll.read(r))!==null&&a!==void 0?a:{maxScroll:0,scrollWidth:0}}),this.template=Xt(this,r=>{var o;return(o=this._templateRef.read(r))===null||o===void 0?void 0:o.object}),this._isHidden=vi(this,!1),this._isFocused=Xt(this,r=>{var o,a;return(a=(o=this.template.read(r))===null||o===void 0?void 0:o.isFocused.read(r))!==null&&a!==void 0?a:!1}),this.viewModel.setIsFocused(this._isFocused,void 0),this._register(ki(r=>{var o;const a=this._scrollLeft.read(r);(o=this._templateRef.read(r))===null||o===void 0||o.object.setScrollLeft(a)})),this._register(ki(r=>{const o=this._templateRef.read(r);!o||!this._isHidden.read(r)||o.object.isFocused.read(r)||this._clear()}))}dispose(){this._clear(),super.dispose()}toString(){var e;return`VirtualViewItem(${(e=this.viewModel.entry.value.modified)===null||e===void 0?void 0:e.uri.toString()})`}getKey(){return this.viewModel.getKey()}setViewState(e,t){var i;this.viewModel.collapsed.set(e.collapsed,t),this._updateTemplateData(t);const s=this.viewModel.lastTemplateData.get(),r=(i=e.selections)===null||i===void 0?void 0:i.map(Ii.liftSelection);this.viewModel.lastTemplateData.set({...s,selections:r},t);const o=this._templateRef.get();o&&r&&o.object.editor.setSelections(r)}_updateTemplateData(e){var t;const i=this._templateRef.get();i&&this.viewModel.lastTemplateData.set({contentHeight:i.object.contentHeight.get(),selections:(t=i.object.editor.getSelections())!==null&&t!==void 0?t:void 0},e)}_clear(){const e=this._templateRef.get();e&&_s(t=>{this._updateTemplateData(t),e.object.hide(),this._templateRef.set(void 0,t)})}hide(){this._isHidden.set(!0,void 0)}render(e,t,i,s){this._isHidden.set(!1,void 0);let r=this._templateRef.get();if(!r){r=this._objectPool.getUnusedObj(new uje(this.viewModel,this._deltaScrollVertical)),this._templateRef.set(r,void 0);const o=this.viewModel.lastTemplateData.get().selections;o&&r.object.editor.setSelections(o)}r.object.render(e,i,t,s)}}j("multiDiffEditor.headerBackground",{dark:"#262626",light:"tab.inactiveBackground",hcDark:"tab.inactiveBackground",hcLight:"tab.inactiveBackground"},L("multiDiffEditor.headerBackground","The background color of the diff editor's header"));j("multiDiffEditor.background",{dark:"editorBackground",light:"editorBackground",hcDark:"editorBackground",hcLight:"editorBackground"},L("multiDiffEditor.background","The background color of the multi file diff editor"));j("multiDiffEditor.border",{dark:"sideBarSectionHeader.border",light:"#cccccc",hcDark:"sideBarSectionHeader.border",hcLight:"#cccccc"},L("multiDiffEditor.border","The border color of the multi file diff editor"));var mje=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},pje=function(n,e){return function(t,i){e(t,i,n)}};let VF=class extends Le{constructor(e,t,i){super(),this._element=e,this._workbenchUIElementFactory=t,this._instantiationService=i,this._dimension=vi(this,void 0),this._viewModel=vi(this,void 0),this._widgetImpl=N0(this,(s,r)=>(ka(Ek,s),r.add(this._instantiationService.createInstance(ka(FF,s),this._element,this._dimension,this._viewModel,this._workbenchUIElementFactory)))),this._register(dT(this._widgetImpl))}};VF=mje([pje(2,Si)],VF);function bje(n,e,t){return _t.initialize(t||{}).createInstance(WF,n,e)}function vje(n){return _t.get(Vn).onCodeEditorAdd(t=>{n(t)})}function _je(n){return _t.get(Vn).onDiffEditorAdd(t=>{n(t)})}function wje(){return _t.get(Vn).listCodeEditors()}function yje(){return _t.get(Vn).listDiffEditors()}function Sje(n,e,t){return _t.initialize(t||{}).createInstance(AF,n,e)}function Cje(n,e){const t=_t.initialize(e||{});return new VF(n,{},t)}function Lje(n){if(typeof n.id!="string"||typeof n.run!="function")throw new Error("Invalid command descriptor, `id` and `run` are required properties!");return cs.registerCommand(n.id,n.run)}function kje(n){if(typeof n.id!="string"||typeof n.label!="string"||typeof n.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");const e=Wt.deserialize(n.precondition),t=(s,...r)=>Fc.runEditorCommand(s,r,e,(o,a,l)=>Promise.resolve(n.run(a,...l))),i=new ct;if(i.add(cs.registerCommand(n.id,t)),n.contextMenuGroupId){const s={command:{id:n.id,title:n.label},when:e,group:n.contextMenuGroupId,order:n.contextMenuOrder||0};i.add(Wl.appendMenuItem(X.EditorContext,s))}if(Array.isArray(n.keybindings)){const s=_t.get(Ls);if(!(s instanceof Jb))console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService");else{const r=Wt.and(e,Wt.deserialize(n.keybindingContext));i.add(s.addDynamicKeybindings(n.keybindings.map(o=>({keybinding:o,command:n.id,when:r}))))}}return i}function xje(n){return bae([n])}function bae(n){const e=_t.get(Ls);return e instanceof Jb?e.addDynamicKeybindings(n.map(t=>({keybinding:t.keybinding,command:t.command,commandArgs:t.commandArgs,when:Wt.deserialize(t.when)}))):(console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),Le.None)}function Tje(n,e,t){const i=_t.get(Cs),s=i.getLanguageIdByMimeType(e)||e;return pae(_t.get(Ws),i,n,s,t)}function Dje(n,e){const t=_t.get(Cs),i=t.getLanguageIdByMimeType(e)||e||Va;n.setLanguage(t.createById(i))}function Ije(n,e,t){n&&_t.get(wm).changeOne(e,n.uri,t)}function Mje(n){_t.get(wm).changeAll(n,[])}function Eje(n){return _t.get(wm).read(n)}function Nje(n){return _t.get(wm).onMarkerChanged(n)}function Rje(n){return _t.get(Ws).getModel(n)}function Wje(){return _t.get(Ws).getModels()}function Aje(n){return _t.get(Ws).onModelAdded(n)}function Fje(n){return _t.get(Ws).onModelRemoved(n)}function Vje(n){return _t.get(Ws).onModelLanguageChanged(t=>{n({model:t.model,oldLanguage:t.oldLanguageId})})}function Pje(n){return vze(_t.get(Ws),_t.get(ma),n)}function Oje(n,e){const t=_t.get(Cs),i=_t.get(qa);return bO.colorizeElement(i,t,n,e).then(()=>{i.registerEditorContainer(n)})}function Zje(n,e,t){const i=_t.get(Cs);return _t.get(qa).registerEditorContainer(Di.document.body),bO.colorize(i,n,e,t)}function Gje(n,e,t=4){return _t.get(qa).registerEditorContainer(Di.document.body),bO.colorizeModelLine(n,e,t)}function Bje(n){const e=Zn.get(n);return e||{getInitialState:()=>s1,tokenize:(t,i,s)=>_se(n,s)}}function Xje(n,e){Zn.getOrCreate(e);const t=Bje(e),i=w0(n),s=[];let r=t.getInitialState();for(let o=0,a=i.length;o<a;o++){const l=i[o],c=t.tokenize(l,!0,r);s[o]=c.tokens,r=c.endState}return s}function zje(n,e){_t.get(qa).defineTheme(n,e)}function Hje(n){_t.get(qa).setTheme(n)}function Uje(){x3.clearAllFontInfos()}function Yje(n,e){return cs.registerCommand({id:n,handler:e})}function Kje(n){return _t.get(pm).registerOpener({async open(t){return typeof t=="string"&&(t=Ft.parse(t)),n.open(t)}})}function jje(n){return _t.get(Vn).registerCodeEditorOpenHandler(async(t,i,s)=>{var r;if(!i)return null;const o=(r=t.options)===null||r===void 0?void 0:r.selection;let a;return o&&typeof o.endLineNumber=="number"&&typeof o.endColumn=="number"?a=o:o&&(a={lineNumber:o.startLineNumber,column:o.startColumn}),await n.openCodeEditor(i,t.resource,a)?i:null})}function Jje(){return{create:bje,getEditors:wje,getDiffEditors:yje,onDidCreateEditor:vje,onDidCreateDiffEditor:_je,createDiffEditor:Sje,addCommand:Lje,addEditorAction:kje,addKeybindingRule:xje,addKeybindingRules:bae,createModel:Tje,setModelLanguage:Dje,setModelMarkers:Ije,getModelMarkers:Eje,removeAllMarkers:Mje,onDidChangeMarkers:Nje,getModels:Wje,getModel:Rje,onDidCreateModel:Aje,onWillDisposeModel:Fje,onDidChangeModelLanguage:Vje,createWebWorker:Pje,colorizeElement:Oje,colorize:Zje,colorizeModelLine:Gje,tokenize:Xje,defineTheme:zje,setTheme:Hje,remeasureFonts:Uje,registerCommand:Yje,registerLinkOpener:Kje,registerEditorOpener:jje,AccessibilitySupport:DW,ContentWidgetPositionPreference:WW,CursorChangeReason:AW,DefaultEndOfLine:FW,EditorAutoIndentStrategy:PW,EditorOption:OW,EndOfLinePreference:ZW,EndOfLineSequence:GW,MinimapPosition:QW,MinimapSectionHeaderStyle:qW,MouseTargetType:eA,OverlayWidgetPositionPreference:nA,OverviewRulerLane:sA,GlyphMarginLane:BW,RenderLineNumbersType:aA,RenderMinimap:lA,ScrollbarVisibility:dA,ScrollType:cA,TextEditorCursorBlinkingStyle:pA,TextEditorCursorStyle:bA,TrackedRangeStickiness:vA,WrappingIndent:_A,InjectedTextCursorStops:HW,PositionAffinity:oA,ShowLightbulbIconMode:hA,ConfigurationChangedEvent:mne,BareFontInfo:ag,FontInfo:k3,TextModelResolvedOptions:YS,FindMatch:K_,ApplyUpdateResult:qv,EditorZoom:Pu,createMultiFileDiffEditor:Cje,EditorType:J2,EditorOptions:hm}}function $je(n,e){if(!e||!Array.isArray(e))return!1;for(const t of e)if(!n(t))return!1;return!0}function _S(n,e){return typeof n=="boolean"?n:e}function vJ(n,e){return typeof n=="string"?n:e}function Qje(n){const e={};for(const t of n)e[t]=!0;return e}function _J(n,e=!1){e&&(n=n.map(function(i){return i.toLowerCase()}));const t=Qje(n);return e?function(i){return t[i.toLowerCase()]!==void 0&&t.hasOwnProperty(i.toLowerCase())}:function(i){return t[i]!==void 0&&t.hasOwnProperty(i)}}function PF(n,e,t){e=e.replace(/@@/g,"");let i=0,s;do s=!1,e=e.replace(/@(\w+)/g,function(o,a){s=!0;let l="";if(typeof n[a]=="string")l=n[a];else if(n[a]&&n[a]instanceof RegExp)l=n[a].source;else throw n[a]===void 0?Yi(n,"language definition does not contain attribute '"+a+"', used at: "+e):Yi(n,"attribute reference '"+a+"' must be a string, used at: "+e);return Xf(l)?"":"(?:"+l+")"}),i++;while(s&&i<5);e=e.replace(/\x01/g,"@");const r=(n.ignoreCase?"i":"")+(n.unicode?"u":"");if(t&&e.match(/\$[sS](\d\d?)/g)){let a=null,l=null;return c=>(l&&a===c||(a=c,l=new RegExp(Cze(n,e,c),r)),l)}return new RegExp(e,r)}function qje(n,e,t,i){if(i<0)return n;if(i<e.length)return e[i];if(i>=100){i=i-100;const s=t.split(".");if(s.unshift(t),i<s.length)return s[i]}return null}function eJe(n,e,t,i){let s=-1,r=t,o=t.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);o&&(o[3]&&(s=parseInt(o[3]),o[2]&&(s=s+100)),r=o[4]);let a="~",l=r;!r||r.length===0?(a="!=",l=""):/^\w*$/.test(l)?a="==":(o=r.match(/^(@|!@|~|!~|==|!=)(.*)$/),o&&(a=o[1],l=o[2]));let c;if((a==="~"||a==="!~")&&/^(\w|\|)*$/.test(l)){const d=_J(l.split("|"),n.ignoreCase);c=function(u){return a==="~"?d(u):!d(u)}}else if(a==="@"||a==="!@"){const d=n[l];if(!d)throw Yi(n,"the @ match target '"+l+"' is not defined, in rule: "+e);if(!$je(function(h){return typeof h=="string"},d))throw Yi(n,"the @ match target '"+l+"' must be an array of strings, in rule: "+e);const u=_J(d,n.ignoreCase);c=function(h){return a==="@"?u(h):!u(h)}}else if(a==="~"||a==="!~")if(l.indexOf("$")<0){const d=PF(n,"^"+l+"$",!1);c=function(u){return a==="~"?d.test(u):!d.test(u)}}else c=function(d,u,h,f){return PF(n,"^"+Gu(n,l,u,h,f)+"$",!1).test(d)};else if(l.indexOf("$")<0){const d=Ud(n,l);c=function(u){return a==="=="?u===d:u!==d}}else{const d=Ud(n,l);c=function(u,h,f,g,m){const p=Gu(n,d,h,f,g);return a==="=="?u===p:u!==p}}return s===-1?{name:t,value:i,test:function(d,u,h,f){return c(d,d,u,h,f)}}:{name:t,value:i,test:function(d,u,h,f){const g=qje(d,u,h,s);return c(g||"",d,u,h,f)}}}function OF(n,e,t){if(t){if(typeof t=="string")return t;if(t.token||t.token===""){if(typeof t.token!="string")throw Yi(n,"a 'token' attribute must be of type string, in rule: "+e);{const i={token:t.token};if(t.token.indexOf("$")>=0&&(i.tokenSubst=!0),typeof t.bracket=="string")if(t.bracket==="@open")i.bracket=1;else if(t.bracket==="@close")i.bracket=-1;else throw Yi(n,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+e);if(t.next){if(typeof t.next!="string")throw Yi(n,"the next state must be a string value in rule: "+e);{let s=t.next;if(!/^(@pop|@push|@popall)$/.test(s)&&(s[0]==="@"&&(s=s.substr(1)),s.indexOf("$")<0&&!Lze(n,Gu(n,s,"",[],""))))throw Yi(n,"the next state '"+t.next+"' is not defined in rule: "+e);i.next=s}}return typeof t.goBack=="number"&&(i.goBack=t.goBack),typeof t.switchTo=="string"&&(i.switchTo=t.switchTo),typeof t.log=="string"&&(i.log=t.log),typeof t.nextEmbedded=="string"&&(i.nextEmbedded=t.nextEmbedded,n.usesEmbedded=!0),i}}else if(Array.isArray(t)){const i=[];for(let s=0,r=t.length;s<r;s++)i[s]=OF(n,e,t[s]);return{group:i}}else if(t.cases){const i=[];for(const r in t.cases)if(t.cases.hasOwnProperty(r)){const o=OF(n,e,t.cases[r]);r==="@default"||r==="@"||r===""?i.push({test:void 0,value:o,name:r}):r==="@eos"?i.push({test:function(a,l,c,d){return d},value:o,name:r}):i.push(eJe(n,e,r,o))}const s=n.defaultToken;return{test:function(r,o,a,l){for(const c of i)if(!c.test||c.test(r,o,a,l))return c.value;return s}}}else throw Yi(n,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+e)}else return{token:""}}class tJe{constructor(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,t){let i;if(typeof t=="string")i=t;else if(t instanceof RegExp)i=t.source;else throw Yi(e,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=i.length>0&&i[0]==="^",this.name=this.name+": "+i,this.regex=PF(e,"^(?:"+(this.matchOnlyAtLineStart?i.substr(1):i)+")",!0)}setAction(e,t){this.action=OF(e,this.name,t)}resolveRegex(e){return this.regex instanceof RegExp?this.regex:this.regex(e)}}function vae(n,e){if(!e||typeof e!="object")throw new Error("Monarch: expecting a language definition object");const t={};t.languageId=n,t.includeLF=_S(e.includeLF,!1),t.noThrow=!1,t.maxStack=100,t.start=typeof e.start=="string"?e.start:null,t.ignoreCase=_S(e.ignoreCase,!1),t.unicode=_S(e.unicode,!1),t.tokenPostfix=vJ(e.tokenPostfix,"."+t.languageId),t.defaultToken=vJ(e.defaultToken,"source"),t.usesEmbedded=!1;const i=e;i.languageId=n,i.includeLF=t.includeLF,i.ignoreCase=t.ignoreCase,i.unicode=t.unicode,i.noThrow=t.noThrow,i.usesEmbedded=t.usesEmbedded,i.stateNames=e.tokenizer,i.defaultToken=t.defaultToken;function s(o,a,l){for(const c of l){let d=c.include;if(d){if(typeof d!="string")throw Yi(t,"an 'include' attribute must be a string at: "+o);if(d[0]==="@"&&(d=d.substr(1)),!e.tokenizer[d])throw Yi(t,"include target '"+d+"' is not defined at: "+o);s(o+"."+d,a,e.tokenizer[d])}else{const u=new tJe(o);if(Array.isArray(c)&&c.length>=1&&c.length<=3)if(u.setRegex(i,c[0]),c.length>=3)if(typeof c[1]=="string")u.setAction(i,{token:c[1],next:c[2]});else if(typeof c[1]=="object"){const h=c[1];h.next=c[2],u.setAction(i,h)}else throw Yi(t,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+o);else u.setAction(i,c[1]);else{if(!c.regex)throw Yi(t,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+o);c.name&&typeof c.name=="string"&&(u.name=c.name),c.matchOnlyAtStart&&(u.matchOnlyAtLineStart=_S(c.matchOnlyAtLineStart,!1)),u.setRegex(i,c.regex),u.setAction(i,c.action)}a.push(u)}}}if(!e.tokenizer||typeof e.tokenizer!="object")throw Yi(t,"a language definition must define the 'tokenizer' attribute as an object");t.tokenizer=[];for(const o in e.tokenizer)if(e.tokenizer.hasOwnProperty(o)){t.start||(t.start=o);const a=e.tokenizer[o];t.tokenizer[o]=new Array,s("tokenizer."+o,t.tokenizer[o],a)}if(t.usesEmbedded=i.usesEmbedded,e.brackets){if(!Array.isArray(e.brackets))throw Yi(t,"the 'brackets' attribute must be defined as an array")}else e.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];const r=[];for(const o of e.brackets){let a=o;if(a&&Array.isArray(a)&&a.length===3&&(a={token:a[2],open:a[0],close:a[1]}),a.open===a.close)throw Yi(t,"open and close brackets in a 'brackets' attribute must be different: "+a.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof a.open=="string"&&typeof a.token=="string"&&typeof a.close=="string")r.push({token:a.token+t.tokenPostfix,open:Ud(t,a.open),close:Ud(t,a.close)});else throw Yi(t,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return t.brackets=r,t.noThrow=!0,t}function iJe(n){Mb.registerLanguage(n)}function nJe(){let n=[];return n=n.concat(Mb.getLanguages()),n}function sJe(n){return _t.get(Cs).languageIdCodec.encodeLanguageId(n)}function rJe(n,e){return _t.withServices(()=>{const i=_t.get(Cs).onDidRequestRichLanguageFeatures(s=>{s===n&&(i.dispose(),e())});return i})}function oJe(n,e){return _t.withServices(()=>{const i=_t.get(Cs).onDidRequestBasicLanguageFeatures(s=>{s===n&&(i.dispose(),e())});return i})}function aJe(n,e){if(!_t.get(Cs).isRegisteredLanguageId(n))throw new Error(`Cannot set configuration for unknown language ${n}`);return _t.get(ma).register(n,e,100)}class lJe{constructor(e,t){this._languageId=e,this._actual=t}dispose(){}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,i){if(typeof this._actual.tokenize=="function")return F1.adaptTokenize(this._languageId,this._actual,e,i);throw new Error("Not supported!")}tokenizeEncoded(e,t,i){const s=this._actual.tokenizeEncoded(e,i);return new Y2(s.tokens,s.endState)}}class F1{constructor(e,t,i,s){this._languageId=e,this._actual=t,this._languageService=i,this._standaloneThemeService=s}dispose(){}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,t){const i=[];let s=0;for(let r=0,o=e.length;r<o;r++){const a=e[r];let l=a.startIndex;r===0?l=0:l<s&&(l=s),i[r]=new H_(l,a.scopes,t),s=l}return i}static adaptTokenize(e,t,i,s){const r=t.tokenize(i,s),o=F1._toClassicTokens(r.tokens,e);let a;return r.endState.equals(s)?a=s:a=r.endState,new fP(o,a)}tokenize(e,t,i){return F1.adaptTokenize(this._languageId,this._actual,e,i)}_toBinaryTokens(e,t){const i=e.encodeLanguageId(this._languageId),s=this._standaloneThemeService.getColorTheme().tokenTheme,r=[];let o=0,a=0;for(let c=0,d=t.length;c<d;c++){const u=t[c],h=s.match(i,u.scopes)|1024;if(o>0&&r[o-1]===h)continue;let f=u.startIndex;c===0?f=0:f<a&&(f=a),r[o++]=f,r[o++]=h,a=f}const l=new Uint32Array(o);for(let c=0;c<o;c++)l[c]=r[c];return l}tokenizeEncoded(e,t,i){const s=this._actual.tokenize(e,i),r=this._toBinaryTokens(this._languageService.languageIdCodec,s.tokens);let o;return s.endState.equals(i)?o=i:o=s.endState,new Y2(r,o)}}function cJe(n){return typeof n.getInitialState=="function"}function dJe(n){return"tokenizeEncoded"in n}function _ae(n){return n&&typeof n.then=="function"}function uJe(n){const e=_t.get(qa);if(n){const t=[null];for(let i=1,s=n.length;i<s;i++)t[i]=Ce.fromHex(n[i]);e.setColorMapOverride(t)}else e.setColorMapOverride(null)}function wae(n,e){return dJe(e)?new lJe(n,e):new F1(n,e,_t.get(Cs),_t.get(qa))}function KO(n,e){const t=new h4e(async()=>{const i=await Promise.resolve(e.create());return i?cJe(i)?wae(n,i):new w1(_t.get(Cs),_t.get(qa),n,vae(n,i),_t.get(gn)):null});return Zn.registerFactory(n,t)}function hJe(n,e){if(!_t.get(Cs).isRegisteredLanguageId(n))throw new Error(`Cannot set tokens provider for unknown language ${n}`);return _ae(e)?KO(n,{create:()=>e}):Zn.register(n,wae(n,e))}function fJe(n,e){const t=i=>new w1(_t.get(Cs),_t.get(qa),n,vae(n,i),_t.get(gn));return _ae(e)?KO(n,{create:()=>e}):Zn.register(n,t(e))}function gJe(n,e){return _t.get(ei).referenceProvider.register(n,e)}function mJe(n,e){return _t.get(ei).renameProvider.register(n,e)}function pJe(n,e){return _t.get(ei).newSymbolNamesProvider.register(n,e)}function bJe(n,e){return _t.get(ei).signatureHelpProvider.register(n,e)}function vJe(n,e){return _t.get(ei).hoverProvider.register(n,{provideHover:async(i,s,r,o)=>{const a=i.getWordAtPosition(s);return Promise.resolve(e.provideHover(i,s,r,o)).then(l=>{if(l)return!l.range&&a&&(l.range=new te(s.lineNumber,a.startColumn,s.lineNumber,a.endColumn)),l.range||(l.range=new te(s.lineNumber,s.column,s.lineNumber,s.column)),l})}})}function _Je(n,e){return _t.get(ei).documentSymbolProvider.register(n,e)}function wJe(n,e){return _t.get(ei).documentHighlightProvider.register(n,e)}function yJe(n,e){return _t.get(ei).linkedEditingRangeProvider.register(n,e)}function SJe(n,e){return _t.get(ei).definitionProvider.register(n,e)}function CJe(n,e){return _t.get(ei).implementationProvider.register(n,e)}function LJe(n,e){return _t.get(ei).typeDefinitionProvider.register(n,e)}function kJe(n,e){return _t.get(ei).codeLensProvider.register(n,e)}function xJe(n,e,t){return _t.get(ei).codeActionProvider.register(n,{providedCodeActionKinds:t?.providedCodeActionKinds,documentation:t?.documentation,provideCodeActions:(s,r,o,a)=>{const c=_t.get(wm).read({resource:s.uri}).filter(d=>te.areIntersectingOrTouching(d,r));return e.provideCodeActions(s,r,{markers:c,only:o.only,trigger:o.trigger},a)},resolveCodeAction:e.resolveCodeAction})}function TJe(n,e){return _t.get(ei).documentFormattingEditProvider.register(n,e)}function DJe(n,e){return _t.get(ei).documentRangeFormattingEditProvider.register(n,e)}function IJe(n,e){return _t.get(ei).onTypeFormattingEditProvider.register(n,e)}function MJe(n,e){return _t.get(ei).linkProvider.register(n,e)}function EJe(n,e){return _t.get(ei).completionProvider.register(n,e)}function NJe(n,e){return _t.get(ei).colorProvider.register(n,e)}function RJe(n,e){return _t.get(ei).foldingRangeProvider.register(n,e)}function WJe(n,e){return _t.get(ei).declarationProvider.register(n,e)}function AJe(n,e){return _t.get(ei).selectionRangeProvider.register(n,e)}function FJe(n,e){return _t.get(ei).documentSemanticTokensProvider.register(n,e)}function VJe(n,e){return _t.get(ei).documentRangeSemanticTokensProvider.register(n,e)}function PJe(n,e){return _t.get(ei).inlineCompletionsProvider.register(n,e)}function OJe(n,e){return _t.get(ei).inlineEditProvider.register(n,e)}function ZJe(n,e){return _t.get(ei).inlayHintsProvider.register(n,e)}function GJe(){return{register:iJe,getLanguages:nJe,onLanguage:rJe,onLanguageEncountered:oJe,getEncodedLanguageId:sJe,setLanguageConfiguration:aJe,setColorMap:uJe,registerTokensProviderFactory:KO,setTokensProvider:hJe,setMonarchTokensProvider:fJe,registerReferenceProvider:gJe,registerRenameProvider:mJe,registerNewSymbolNameProvider:pJe,registerCompletionItemProvider:EJe,registerSignatureHelpProvider:bJe,registerHoverProvider:vJe,registerDocumentSymbolProvider:_Je,registerDocumentHighlightProvider:wJe,registerLinkedEditingRangeProvider:yJe,registerDefinitionProvider:SJe,registerImplementationProvider:CJe,registerTypeDefinitionProvider:LJe,registerCodeLensProvider:kJe,registerCodeActionProvider:xJe,registerDocumentFormattingEditProvider:TJe,registerDocumentRangeFormattingEditProvider:DJe,registerOnTypeFormattingEditProvider:IJe,registerLinkProvider:MJe,registerColorProvider:NJe,registerFoldingRangeProvider:RJe,registerDeclarationProvider:WJe,registerSelectionRangeProvider:AJe,registerDocumentSemanticTokensProvider:FJe,registerDocumentRangeSemanticTokensProvider:VJe,registerInlineCompletionsProvider:PJe,registerInlineEditProvider:OJe,registerInlayHintsProvider:ZJe,DocumentHighlightKind:VW,CompletionItemKind:EW,CompletionItemTag:NW,CompletionItemInsertTextRule:MW,SymbolKind:gA,SymbolTag:mA,IndentAction:zW,CompletionTriggerKind:RW,SignatureHelpTriggerKind:fA,InlayHintKind:UW,InlineCompletionTriggerKind:YW,InlineEditTriggerKind:KW,CodeActionTriggerType:IW,NewSymbolNameTag:tA,NewSymbolNameTriggerKind:iA,PartialAcceptTriggerKind:rA,HoverVerbosityAction:XW,FoldingRangeKind:kr,SelectedSuggestionInfo:u4e}}class wJ{constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}}class BJe{constructor(e){if(this._set=new Set,e)for(const t of e)this.add(t)}add(e){this._set.add(wJ.toKey(e))}has(e){return this._set.has(wJ.toKey(e))}}function XJe(n,e,t){const i=[],s=new BJe,r=n.ordered(t);for(const a of r)i.push(a),a.extensionId&&s.add(a.extensionId);const o=e.ordered(t);for(const a of o){if(a.extensionId){if(s.has(a.extensionId))continue;s.add(a.extensionId)}i.push({displayName:a.displayName,extensionId:a.extensionId,provideDocumentFormattingEdits(l,c,d){return a.provideDocumentRangeFormattingEdits(l,l.getFullModelRange(),c,d)}})}return i}class V1{static setFormatterSelector(e){return{dispose:V1._selectors.unshift(e)}}static async select(e,t,i,s){if(e.length===0)return;const r=ci.first(V1._selectors);if(r)return await r(e,t,i,s)}}V1._selectors=new co;async function zJe(n,e,t,i,s,r){const o=e.documentRangeFormattingEditProvider.ordered(t);for(const a of o){const l=await Promise.resolve(a.provideDocumentRangeFormattingEdits(t,i,s,r)).catch(of);if(bw(l))return await n.computeMoreMinimalEdits(t.uri,l)}}async function HJe(n,e,t,i,s){const r=XJe(e.documentFormattingEditProvider,e.documentRangeFormattingEditProvider,t);for(const o of r){const a=await Promise.resolve(o.provideDocumentFormattingEdits(t,i,s)).catch(of);if(bw(a))return await n.computeMoreMinimalEdits(t.uri,a)}}function UJe(n,e,t,i,s,r,o){const a=e.onTypeFormattingEditProvider.ordered(t);return a.length===0||a[0].autoFormatTriggerCharacters.indexOf(s)<0?Promise.resolve(void 0):Promise.resolve(a[0].provideOnTypeFormattingEdits(t,i,s,r,o)).catch(of).then(l=>n.computeMoreMinimalEdits(t.uri,l))}cs.registerCommand("_executeFormatRangeProvider",async function(n,...e){const[t,i,s]=e;Jr(Ft.isUri(t)),Jr(te.isIRange(i));const r=n.get(hw),o=n.get(Rw),a=n.get(ei),l=await r.createModelReference(t);try{return zJe(o,a,l.object.textEditorModel,te.lift(i),s,Xs.None)}finally{l.dispose()}});cs.registerCommand("_executeFormatDocumentProvider",async function(n,...e){const[t,i]=e;Jr(Ft.isUri(t));const s=n.get(hw),r=n.get(Rw),o=n.get(ei),a=await s.createModelReference(t);try{return HJe(r,o,a.object.textEditorModel,i,Xs.None)}finally{a.dispose()}});cs.registerCommand("_executeFormatOnTypeProvider",async function(n,...e){const[t,i,s,r]=e;Jr(Ft.isUri(t)),Jr(pe.isIPosition(i)),Jr(typeof s=="string");const o=n.get(hw),a=n.get(Rw),l=n.get(ei),c=await o.createModelReference(t);try{return UJe(a,l,c.object.textEditorModel,pe.lift(i),s,r,Xs.None)}finally{c.dispose()}});hm.wrappingIndent.defaultValue=0;hm.glyphMargin.defaultValue=!1;hm.autoIndent.defaultValue=3;hm.overviewRulerLanes.defaultValue=2;V1.setFormatterSelector((n,e,t)=>Promise.resolve(n[0]));const Ar=toe();Ar.editor=Jje();Ar.languages=GJe();const YJe=Ar.CancellationTokenSource,KJe=Ar.Emitter,jJe=Ar.KeyCode,JJe=Ar.KeyMod,$Je=Ar.Position,yae=Ar.Range,QJe=Ar.Selection,qJe=Ar.SelectionDirection,e$e=Ar.MarkerSeverity,t$e=Ar.MarkerTag,i$e=Ar.Uri,n$e=Ar.Token,P1=Ar.editor,jO=Ar.languages,t9=globalThis.MonacoEnvironment;(t9?.globalAPI||typeof define=="function"&&define.amd)&&(globalThis.monaco=Ar);typeof globalThis.require<"u"&&typeof globalThis.require.config=="function"&&globalThis.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});const s$e=Object.freeze(Object.defineProperty({__proto__:null,CancellationTokenSource:YJe,Emitter:KJe,KeyCode:jJe,KeyMod:JJe,MarkerSeverity:e$e,MarkerTag:t$e,Position:$Je,Range:yae,Selection:QJe,SelectionDirection:qJe,Token:n$e,Uri:i$e,editor:P1,languages:jO},Symbol.toStringTag,{value:"Module"})),Sae="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2NsYXNzIEtye2NvbnN0cnVjdG9yKCl7dGhpcy5saXN0ZW5lcnM9W10sdGhpcy51bmV4cGVjdGVkRXJyb3JIYW5kbGVyPWZ1bmN0aW9uKHQpe3NldFRpbWVvdXQoKCk9Pnt0aHJvdyB0LnN0YWNrP1JlLmlzRXJyb3JOb1RlbGVtZXRyeSh0KT9uZXcgUmUodC5tZXNzYWdlK2AKCmArdC5zdGFjayk6bmV3IEVycm9yKHQubWVzc2FnZStgCgpgK3Quc3RhY2spOnR9LDApfX1lbWl0KHQpe3RoaXMubGlzdGVuZXJzLmZvckVhY2gobj0+e24odCl9KX1vblVuZXhwZWN0ZWRFcnJvcih0KXt0aGlzLnVuZXhwZWN0ZWRFcnJvckhhbmRsZXIodCksdGhpcy5lbWl0KHQpfW9uVW5leHBlY3RlZEV4dGVybmFsRXJyb3IodCl7dGhpcy51bmV4cGVjdGVkRXJyb3JIYW5kbGVyKHQpfX1jb25zdCBlcz1uZXcgS3I7ZnVuY3Rpb24gWmUoZSl7dHMoZSl8fGVzLm9uVW5leHBlY3RlZEVycm9yKGUpfWZ1bmN0aW9uIFp0KGUpe2lmKGUgaW5zdGFuY2VvZiBFcnJvcil7Y29uc3R7bmFtZTp0LG1lc3NhZ2U6bn09ZSxyPWUuc3RhY2t0cmFjZXx8ZS5zdGFjaztyZXR1cm57JGlzRXJyb3I6ITAsbmFtZTp0LG1lc3NhZ2U6bixzdGFjazpyLG5vVGVsZW1ldHJ5OlJlLmlzRXJyb3JOb1RlbGVtZXRyeShlKX19cmV0dXJuIGV9Y29uc3QgX3Q9IkNhbmNlbGVkIjtmdW5jdGlvbiB0cyhlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIG5zPyEwOmUgaW5zdGFuY2VvZiBFcnJvciYmZS5uYW1lPT09X3QmJmUubWVzc2FnZT09PV90fWNsYXNzIG5zIGV4dGVuZHMgRXJyb3J7Y29uc3RydWN0b3IoKXtzdXBlcihfdCksdGhpcy5uYW1lPXRoaXMubWVzc2FnZX19Y2xhc3MgUmUgZXh0ZW5kcyBFcnJvcntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KSx0aGlzLm5hbWU9IkNvZGVFeHBlY3RlZEVycm9yIn1zdGF0aWMgZnJvbUVycm9yKHQpe2lmKHQgaW5zdGFuY2VvZiBSZSlyZXR1cm4gdDtjb25zdCBuPW5ldyBSZTtyZXR1cm4gbi5tZXNzYWdlPXQubWVzc2FnZSxuLnN0YWNrPXQuc3RhY2ssbn1zdGF0aWMgaXNFcnJvck5vVGVsZW1ldHJ5KHQpe3JldHVybiB0Lm5hbWU9PT0iQ29kZUV4cGVjdGVkRXJyb3IifX1jbGFzcyBsZSBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKHQpe3N1cGVyKHR8fCJBbiB1bmV4cGVjdGVkIGJ1ZyBvY2N1cnJlZC4iKSxPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcyxsZS5wcm90b3R5cGUpfX1mdW5jdGlvbiBycyhlLHQpe2NvbnN0IG49dGhpcztsZXQgcj0hMSxzO3JldHVybiBmdW5jdGlvbigpe2lmKHIpcmV0dXJuIHM7aWYocj0hMCx0KXRyeXtzPWUuYXBwbHkobixhcmd1bWVudHMpfWZpbmFsbHl7dCgpfWVsc2Ugcz1lLmFwcGx5KG4sYXJndW1lbnRzKTtyZXR1cm4gc319dmFyIEtlOyhmdW5jdGlvbihlKXtmdW5jdGlvbiB0KF8pe3JldHVybiBfJiZ0eXBlb2YgXz09Im9iamVjdCImJnR5cGVvZiBfW1N5bWJvbC5pdGVyYXRvcl09PSJmdW5jdGlvbiJ9ZS5pcz10O2NvbnN0IG49T2JqZWN0LmZyZWV6ZShbXSk7ZnVuY3Rpb24gcigpe3JldHVybiBufWUuZW1wdHk9cjtmdW5jdGlvbipzKF8pe3lpZWxkIF99ZS5zaW5nbGU9cztmdW5jdGlvbiBpKF8pe3JldHVybiB0KF8pP186cyhfKX1lLndyYXA9aTtmdW5jdGlvbiBvKF8pe3JldHVybiBffHxufWUuZnJvbT1vO2Z1bmN0aW9uKmwoXyl7Zm9yKGxldCBOPV8ubGVuZ3RoLTE7Tj49MDtOLS0peWllbGQgX1tOXX1lLnJldmVyc2U9bDtmdW5jdGlvbiB1KF8pe3JldHVybiFffHxfW1N5bWJvbC5pdGVyYXRvcl0oKS5uZXh0KCkuZG9uZT09PSEwfWUuaXNFbXB0eT11O2Z1bmN0aW9uIGMoXyl7cmV0dXJuIF9bU3ltYm9sLml0ZXJhdG9yXSgpLm5leHQoKS52YWx1ZX1lLmZpcnN0PWM7ZnVuY3Rpb24gZihfLE4pe2Zvcihjb25zdCBwIG9mIF8paWYoTihwKSlyZXR1cm4hMDtyZXR1cm4hMX1lLnNvbWU9ZjtmdW5jdGlvbiBoKF8sTil7Zm9yKGNvbnN0IHAgb2YgXylpZihOKHApKXJldHVybiBwfWUuZmluZD1oO2Z1bmN0aW9uKmQoXyxOKXtmb3IoY29uc3QgcCBvZiBfKU4ocCkmJih5aWVsZCBwKX1lLmZpbHRlcj1kO2Z1bmN0aW9uKm0oXyxOKXtsZXQgcD0wO2Zvcihjb25zdCBSIG9mIF8peWllbGQgTihSLHArKyl9ZS5tYXA9bTtmdW5jdGlvbipnKC4uLl8pe2Zvcihjb25zdCBOIG9mIF8peWllbGQqTn1lLmNvbmNhdD1nO2Z1bmN0aW9uIHgoXyxOLHApe2xldCBSPXA7Zm9yKGNvbnN0IHkgb2YgXylSPU4oUix5KTtyZXR1cm4gUn1lLnJlZHVjZT14O2Z1bmN0aW9uKnYoXyxOLHA9Xy5sZW5ndGgpe2ZvcihOPDAmJihOKz1fLmxlbmd0aCkscDwwP3ArPV8ubGVuZ3RoOnA+Xy5sZW5ndGgmJihwPV8ubGVuZ3RoKTtOPHA7TisrKXlpZWxkIF9bTl19ZS5zbGljZT12O2Z1bmN0aW9uIEwoXyxOPU51bWJlci5QT1NJVElWRV9JTkZJTklUWSl7Y29uc3QgcD1bXTtpZihOPT09MClyZXR1cm5bcCxfXTtjb25zdCBSPV9bU3ltYm9sLml0ZXJhdG9yXSgpO2ZvcihsZXQgeT0wO3k8Tjt5Kyspe2NvbnN0IEU9Ui5uZXh0KCk7aWYoRS5kb25lKXJldHVybltwLGUuZW1wdHkoKV07cC5wdXNoKEUudmFsdWUpfXJldHVybltwLHtbU3ltYm9sLml0ZXJhdG9yXSgpe3JldHVybiBSfX1dfWUuY29uc3VtZT1MO2FzeW5jIGZ1bmN0aW9uIFMoXyl7Y29uc3QgTj1bXTtmb3IgYXdhaXQoY29uc3QgcCBvZiBfKU4ucHVzaChwKTtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKE4pfWUuYXN5bmNUb0FycmF5PVN9KShLZXx8KEtlPXt9KSk7ZnVuY3Rpb24gRmEoZSl7cmV0dXJuIGV9ZnVuY3Rpb24gUGEoZSx0KXt9ZnVuY3Rpb24gS3QoZSl7aWYoS2UuaXMoZSkpe2NvbnN0IHQ9W107Zm9yKGNvbnN0IG4gb2YgZSlpZihuKXRyeXtuLmRpc3Bvc2UoKX1jYXRjaChyKXt0LnB1c2gocil9aWYodC5sZW5ndGg9PT0xKXRocm93IHRbMF07aWYodC5sZW5ndGg+MSl0aHJvdyBuZXcgQWdncmVnYXRlRXJyb3IodCwiRW5jb3VudGVyZWQgZXJyb3JzIHdoaWxlIGRpc3Bvc2luZyBvZiBzdG9yZSIpO3JldHVybiBBcnJheS5pc0FycmF5KGUpP1tdOmV9ZWxzZSBpZihlKXJldHVybiBlLmRpc3Bvc2UoKSxlfWZ1bmN0aW9uIHNzKC4uLmUpe3JldHVybiBldCgoKT0+S3QoZSkpfWZ1bmN0aW9uIGV0KGUpe3JldHVybntkaXNwb3NlOnJzKCgpPT57ZSgpfSl9fWNsYXNzIHlle2NvbnN0cnVjdG9yKCl7dGhpcy5fdG9EaXNwb3NlPW5ldyBTZXQsdGhpcy5faXNEaXNwb3NlZD0hMX1kaXNwb3NlKCl7dGhpcy5faXNEaXNwb3NlZHx8KHRoaXMuX2lzRGlzcG9zZWQ9ITAsdGhpcy5jbGVhcigpKX1nZXQgaXNEaXNwb3NlZCgpe3JldHVybiB0aGlzLl9pc0Rpc3Bvc2VkfWNsZWFyKCl7aWYodGhpcy5fdG9EaXNwb3NlLnNpemUhPT0wKXRyeXtLdCh0aGlzLl90b0Rpc3Bvc2UpfWZpbmFsbHl7dGhpcy5fdG9EaXNwb3NlLmNsZWFyKCl9fWFkZCh0KXtpZighdClyZXR1cm4gdDtpZih0PT09dGhpcyl0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCByZWdpc3RlciBhIGRpc3Bvc2FibGUgb24gaXRzZWxmISIpO3JldHVybiB0aGlzLl9pc0Rpc3Bvc2VkP3llLkRJU0FCTEVfRElTUE9TRURfV0FSTklOR3x8Y29uc29sZS53YXJuKG5ldyBFcnJvcigiVHJ5aW5nIHRvIGFkZCBhIGRpc3Bvc2FibGUgdG8gYSBEaXNwb3NhYmxlU3RvcmUgdGhhdCBoYXMgYWxyZWFkeSBiZWVuIGRpc3Bvc2VkIG9mLiBUaGUgYWRkZWQgb2JqZWN0IHdpbGwgYmUgbGVha2VkISIpLnN0YWNrKTp0aGlzLl90b0Rpc3Bvc2UuYWRkKHQpLHR9ZGVsZXRlQW5kTGVhayh0KXt0JiZ0aGlzLl90b0Rpc3Bvc2UuaGFzKHQpJiZ0aGlzLl90b0Rpc3Bvc2UuZGVsZXRlKHQpfX15ZS5ESVNBQkxFX0RJU1BPU0VEX1dBUk5JTkc9ITE7Y2xhc3MgV2V7Y29uc3RydWN0b3IoKXt0aGlzLl9zdG9yZT1uZXcgeWUsdGhpcy5fc3RvcmV9ZGlzcG9zZSgpe3RoaXMuX3N0b3JlLmRpc3Bvc2UoKX1fcmVnaXN0ZXIodCl7aWYodD09PXRoaXMpdGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgcmVnaXN0ZXIgYSBkaXNwb3NhYmxlIG9uIGl0c2VsZiEiKTtyZXR1cm4gdGhpcy5fc3RvcmUuYWRkKHQpfX1XZS5Ob25lPU9iamVjdC5mcmVlemUoe2Rpc3Bvc2UoKXt9fSk7Y2xhc3MgVXtjb25zdHJ1Y3Rvcih0KXt0aGlzLmVsZW1lbnQ9dCx0aGlzLm5leHQ9VS5VbmRlZmluZWQsdGhpcy5wcmV2PVUuVW5kZWZpbmVkfX1VLlVuZGVmaW5lZD1uZXcgVSh2b2lkIDApO2NsYXNzIGlze2NvbnN0cnVjdG9yKCl7dGhpcy5fZmlyc3Q9VS5VbmRlZmluZWQsdGhpcy5fbGFzdD1VLlVuZGVmaW5lZCx0aGlzLl9zaXplPTB9Z2V0IHNpemUoKXtyZXR1cm4gdGhpcy5fc2l6ZX1pc0VtcHR5KCl7cmV0dXJuIHRoaXMuX2ZpcnN0PT09VS5VbmRlZmluZWR9Y2xlYXIoKXtsZXQgdD10aGlzLl9maXJzdDtmb3IoO3QhPT1VLlVuZGVmaW5lZDspe2NvbnN0IG49dC5uZXh0O3QucHJldj1VLlVuZGVmaW5lZCx0Lm5leHQ9VS5VbmRlZmluZWQsdD1ufXRoaXMuX2ZpcnN0PVUuVW5kZWZpbmVkLHRoaXMuX2xhc3Q9VS5VbmRlZmluZWQsdGhpcy5fc2l6ZT0wfXVuc2hpZnQodCl7cmV0dXJuIHRoaXMuX2luc2VydCh0LCExKX1wdXNoKHQpe3JldHVybiB0aGlzLl9pbnNlcnQodCwhMCl9X2luc2VydCh0LG4pe2NvbnN0IHI9bmV3IFUodCk7aWYodGhpcy5fZmlyc3Q9PT1VLlVuZGVmaW5lZCl0aGlzLl9maXJzdD1yLHRoaXMuX2xhc3Q9cjtlbHNlIGlmKG4pe2NvbnN0IGk9dGhpcy5fbGFzdDt0aGlzLl9sYXN0PXIsci5wcmV2PWksaS5uZXh0PXJ9ZWxzZXtjb25zdCBpPXRoaXMuX2ZpcnN0O3RoaXMuX2ZpcnN0PXIsci5uZXh0PWksaS5wcmV2PXJ9dGhpcy5fc2l6ZSs9MTtsZXQgcz0hMTtyZXR1cm4oKT0+e3N8fChzPSEwLHRoaXMuX3JlbW92ZShyKSl9fXNoaWZ0KCl7aWYodGhpcy5fZmlyc3QhPT1VLlVuZGVmaW5lZCl7Y29uc3QgdD10aGlzLl9maXJzdC5lbGVtZW50O3JldHVybiB0aGlzLl9yZW1vdmUodGhpcy5fZmlyc3QpLHR9fXBvcCgpe2lmKHRoaXMuX2xhc3QhPT1VLlVuZGVmaW5lZCl7Y29uc3QgdD10aGlzLl9sYXN0LmVsZW1lbnQ7cmV0dXJuIHRoaXMuX3JlbW92ZSh0aGlzLl9sYXN0KSx0fX1fcmVtb3ZlKHQpe2lmKHQucHJldiE9PVUuVW5kZWZpbmVkJiZ0Lm5leHQhPT1VLlVuZGVmaW5lZCl7Y29uc3Qgbj10LnByZXY7bi5uZXh0PXQubmV4dCx0Lm5leHQucHJldj1ufWVsc2UgdC5wcmV2PT09VS5VbmRlZmluZWQmJnQubmV4dD09PVUuVW5kZWZpbmVkPyh0aGlzLl9maXJzdD1VLlVuZGVmaW5lZCx0aGlzLl9sYXN0PVUuVW5kZWZpbmVkKTp0Lm5leHQ9PT1VLlVuZGVmaW5lZD8odGhpcy5fbGFzdD10aGlzLl9sYXN0LnByZXYsdGhpcy5fbGFzdC5uZXh0PVUuVW5kZWZpbmVkKTp0LnByZXY9PT1VLlVuZGVmaW5lZCYmKHRoaXMuX2ZpcnN0PXRoaXMuX2ZpcnN0Lm5leHQsdGhpcy5fZmlyc3QucHJldj1VLlVuZGVmaW5lZCk7dGhpcy5fc2l6ZS09MX0qW1N5bWJvbC5pdGVyYXRvcl0oKXtsZXQgdD10aGlzLl9maXJzdDtmb3IoO3QhPT1VLlVuZGVmaW5lZDspeWllbGQgdC5lbGVtZW50LHQ9dC5uZXh0fX1jb25zdCBhcz1nbG9iYWxUaGlzLnBlcmZvcm1hbmNlJiZ0eXBlb2YgZ2xvYmFsVGhpcy5wZXJmb3JtYW5jZS5ub3c9PSJmdW5jdGlvbiI7Y2xhc3MgdHR7c3RhdGljIGNyZWF0ZSh0KXtyZXR1cm4gbmV3IHR0KHQpfWNvbnN0cnVjdG9yKHQpe3RoaXMuX25vdz1hcyYmdD09PSExP0RhdGUubm93Omdsb2JhbFRoaXMucGVyZm9ybWFuY2Uubm93LmJpbmQoZ2xvYmFsVGhpcy5wZXJmb3JtYW5jZSksdGhpcy5fc3RhcnRUaW1lPXRoaXMuX25vdygpLHRoaXMuX3N0b3BUaW1lPS0xfXN0b3AoKXt0aGlzLl9zdG9wVGltZT10aGlzLl9ub3coKX1yZXNldCgpe3RoaXMuX3N0YXJ0VGltZT10aGlzLl9ub3coKSx0aGlzLl9zdG9wVGltZT0tMX1lbGFwc2VkKCl7cmV0dXJuIHRoaXMuX3N0b3BUaW1lIT09LTE/dGhpcy5fc3RvcFRpbWUtdGhpcy5fc3RhcnRUaW1lOnRoaXMuX25vdygpLXRoaXMuX3N0YXJ0VGltZX19dmFyIHh0OyhmdW5jdGlvbihlKXtlLk5vbmU9KCk9PldlLk5vbmU7ZnVuY3Rpb24gdCh3LGIpe3JldHVybiBoKHcsKCk9Pnt9LDAsdm9pZCAwLCEwLHZvaWQgMCxiKX1lLmRlZmVyPXQ7ZnVuY3Rpb24gbih3KXtyZXR1cm4oYixDPW51bGwsQSk9PntsZXQgaz0hMSxUO3JldHVybiBUPXcoQj0+e2lmKCFrKXJldHVybiBUP1QuZGlzcG9zZSgpOms9ITAsYi5jYWxsKEMsQil9LG51bGwsQSksayYmVC5kaXNwb3NlKCksVH19ZS5vbmNlPW47ZnVuY3Rpb24gcih3LGIsQyl7cmV0dXJuIGMoKEEsaz1udWxsLFQpPT53KEI9PkEuY2FsbChrLGIoQikpLG51bGwsVCksQyl9ZS5tYXA9cjtmdW5jdGlvbiBzKHcsYixDKXtyZXR1cm4gYygoQSxrPW51bGwsVCk9PncoQj0+e2IoQiksQS5jYWxsKGssQil9LG51bGwsVCksQyl9ZS5mb3JFYWNoPXM7ZnVuY3Rpb24gaSh3LGIsQyl7cmV0dXJuIGMoKEEsaz1udWxsLFQpPT53KEI9PmIoQikmJkEuY2FsbChrLEIpLG51bGwsVCksQyl9ZS5maWx0ZXI9aTtmdW5jdGlvbiBvKHcpe3JldHVybiB3fWUuc2lnbmFsPW87ZnVuY3Rpb24gbCguLi53KXtyZXR1cm4oYixDPW51bGwsQSk9Pntjb25zdCBrPXNzKC4uLncubWFwKFQ9PlQoQj0+Yi5jYWxsKEMsQikpKSk7cmV0dXJuIGYoayxBKX19ZS5hbnk9bDtmdW5jdGlvbiB1KHcsYixDLEEpe2xldCBrPUM7cmV0dXJuIHIodyxUPT4oaz1iKGssVCksayksQSl9ZS5yZWR1Y2U9dTtmdW5jdGlvbiBjKHcsYil7bGV0IEM7Y29uc3QgQT17b25XaWxsQWRkRmlyc3RMaXN0ZW5lcigpe0M9dyhrLmZpcmUsayl9LG9uRGlkUmVtb3ZlTGFzdExpc3RlbmVyKCl7Qz8uZGlzcG9zZSgpfX0saz1uZXcgc2UoQSk7cmV0dXJuIGI/LmFkZChrKSxrLmV2ZW50fWZ1bmN0aW9uIGYodyxiKXtyZXR1cm4gYiBpbnN0YW5jZW9mIEFycmF5P2IucHVzaCh3KTpiJiZiLmFkZCh3KSx3fWZ1bmN0aW9uIGgodyxiLEM9MTAwLEE9ITEsaz0hMSxULEIpe2xldCBYLFksSGUsZ3Q9MCxBZTtjb25zdCBFYT17bGVha1dhcm5pbmdUaHJlc2hvbGQ6VCxvbldpbGxBZGRGaXJzdExpc3RlbmVyKCl7WD13KE1hPT57Z3QrKyxZPWIoWSxNYSksQSYmIUhlJiYoYnQuZmlyZShZKSxZPXZvaWQgMCksQWU9KCk9Pntjb25zdCBrYT1ZO1k9dm9pZCAwLEhlPXZvaWQgMCwoIUF8fGd0PjEpJiZidC5maXJlKGthKSxndD0wfSx0eXBlb2YgQz09Im51bWJlciI/KGNsZWFyVGltZW91dChIZSksSGU9c2V0VGltZW91dChBZSxDKSk6SGU9PT12b2lkIDAmJihIZT0wLHF1ZXVlTWljcm90YXNrKEFlKSl9KX0sb25XaWxsUmVtb3ZlTGlzdGVuZXIoKXtrJiZndD4wJiZBZT8uKCl9LG9uRGlkUmVtb3ZlTGFzdExpc3RlbmVyKCl7QWU9dm9pZCAwLFguZGlzcG9zZSgpfX0sYnQ9bmV3IHNlKEVhKTtyZXR1cm4gQj8uYWRkKGJ0KSxidC5ldmVudH1lLmRlYm91bmNlPWg7ZnVuY3Rpb24gZCh3LGI9MCxDKXtyZXR1cm4gZS5kZWJvdW5jZSh3LChBLGspPT5BPyhBLnB1c2goayksQSk6W2tdLGIsdm9pZCAwLCEwLHZvaWQgMCxDKX1lLmFjY3VtdWxhdGU9ZDtmdW5jdGlvbiBtKHcsYj0oQSxrKT0+QT09PWssQyl7bGV0IEE9ITAsaztyZXR1cm4gaSh3LFQ9Pntjb25zdCBCPUF8fCFiKFQsayk7cmV0dXJuIEE9ITEsaz1ULEJ9LEMpfWUubGF0Y2g9bTtmdW5jdGlvbiBnKHcsYixDKXtyZXR1cm5bZS5maWx0ZXIodyxiLEMpLGUuZmlsdGVyKHcsQT0+IWIoQSksQyldfWUuc3BsaXQ9ZztmdW5jdGlvbiB4KHcsYj0hMSxDPVtdLEEpe2xldCBrPUMuc2xpY2UoKSxUPXcoWT0+e2s/ay5wdXNoKFkpOlguZmlyZShZKX0pO0EmJkEuYWRkKFQpO2NvbnN0IEI9KCk9PntrPy5mb3JFYWNoKFk9PlguZmlyZShZKSksaz1udWxsfSxYPW5ldyBzZSh7b25XaWxsQWRkRmlyc3RMaXN0ZW5lcigpe1R8fChUPXcoWT0+WC5maXJlKFkpKSxBJiZBLmFkZChUKSl9LG9uRGlkQWRkRmlyc3RMaXN0ZW5lcigpe2smJihiP3NldFRpbWVvdXQoQik6QigpKX0sb25EaWRSZW1vdmVMYXN0TGlzdGVuZXIoKXtUJiZULmRpc3Bvc2UoKSxUPW51bGx9fSk7cmV0dXJuIEEmJkEuYWRkKFgpLFguZXZlbnR9ZS5idWZmZXI9eDtmdW5jdGlvbiB2KHcsYil7cmV0dXJuKEEsayxUKT0+e2NvbnN0IEI9YihuZXcgUyk7cmV0dXJuIHcoZnVuY3Rpb24oWCl7Y29uc3QgWT1CLmV2YWx1YXRlKFgpO1khPT1MJiZBLmNhbGwoayxZKX0sdm9pZCAwLFQpfX1lLmNoYWluPXY7Y29uc3QgTD1TeW1ib2woIkhhbHRDaGFpbmFibGUiKTtjbGFzcyBTe2NvbnN0cnVjdG9yKCl7dGhpcy5zdGVwcz1bXX1tYXAoYil7cmV0dXJuIHRoaXMuc3RlcHMucHVzaChiKSx0aGlzfWZvckVhY2goYil7cmV0dXJuIHRoaXMuc3RlcHMucHVzaChDPT4oYihDKSxDKSksdGhpc31maWx0ZXIoYil7cmV0dXJuIHRoaXMuc3RlcHMucHVzaChDPT5iKEMpP0M6TCksdGhpc31yZWR1Y2UoYixDKXtsZXQgQT1DO3JldHVybiB0aGlzLnN0ZXBzLnB1c2goaz0+KEE9YihBLGspLEEpKSx0aGlzfWxhdGNoKGI9KEMsQSk9PkM9PT1BKXtsZXQgQz0hMCxBO3JldHVybiB0aGlzLnN0ZXBzLnB1c2goaz0+e2NvbnN0IFQ9Q3x8IWIoayxBKTtyZXR1cm4gQz0hMSxBPWssVD9rOkx9KSx0aGlzfWV2YWx1YXRlKGIpe2Zvcihjb25zdCBDIG9mIHRoaXMuc3RlcHMpaWYoYj1DKGIpLGI9PT1MKWJyZWFrO3JldHVybiBifX1mdW5jdGlvbiBfKHcsYixDPUE9PkEpe2NvbnN0IEE9KC4uLlgpPT5CLmZpcmUoQyguLi5YKSksaz0oKT0+dy5vbihiLEEpLFQ9KCk9PncucmVtb3ZlTGlzdGVuZXIoYixBKSxCPW5ldyBzZSh7b25XaWxsQWRkRmlyc3RMaXN0ZW5lcjprLG9uRGlkUmVtb3ZlTGFzdExpc3RlbmVyOlR9KTtyZXR1cm4gQi5ldmVudH1lLmZyb21Ob2RlRXZlbnRFbWl0dGVyPV87ZnVuY3Rpb24gTih3LGIsQz1BPT5BKXtjb25zdCBBPSguLi5YKT0+Qi5maXJlKEMoLi4uWCkpLGs9KCk9PncuYWRkRXZlbnRMaXN0ZW5lcihiLEEpLFQ9KCk9PncucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLEEpLEI9bmV3IHNlKHtvbldpbGxBZGRGaXJzdExpc3RlbmVyOmssb25EaWRSZW1vdmVMYXN0TGlzdGVuZXI6VH0pO3JldHVybiBCLmV2ZW50fWUuZnJvbURPTUV2ZW50RW1pdHRlcj1OO2Z1bmN0aW9uIHAodyl7cmV0dXJuIG5ldyBQcm9taXNlKGI9Pm4odykoYikpfWUudG9Qcm9taXNlPXA7ZnVuY3Rpb24gUih3KXtjb25zdCBiPW5ldyBzZTtyZXR1cm4gdy50aGVuKEM9PntiLmZpcmUoQyl9LCgpPT57Yi5maXJlKHZvaWQgMCl9KS5maW5hbGx5KCgpPT57Yi5kaXNwb3NlKCl9KSxiLmV2ZW50fWUuZnJvbVByb21pc2U9UjtmdW5jdGlvbiB5KHcsYixDKXtyZXR1cm4gYihDKSx3KEE9PmIoQSkpfWUucnVuQW5kU3Vic2NyaWJlPXk7Y2xhc3MgRXtjb25zdHJ1Y3RvcihiLEMpe3RoaXMuX29ic2VydmFibGU9Yix0aGlzLl9jb3VudGVyPTAsdGhpcy5faGFzQ2hhbmdlZD0hMTtjb25zdCBBPXtvbldpbGxBZGRGaXJzdExpc3RlbmVyOigpPT57Yi5hZGRPYnNlcnZlcih0aGlzKX0sb25EaWRSZW1vdmVMYXN0TGlzdGVuZXI6KCk9PntiLnJlbW92ZU9ic2VydmVyKHRoaXMpfX07dGhpcy5lbWl0dGVyPW5ldyBzZShBKSxDJiZDLmFkZCh0aGlzLmVtaXR0ZXIpfWJlZ2luVXBkYXRlKGIpe3RoaXMuX2NvdW50ZXIrK31oYW5kbGVQb3NzaWJsZUNoYW5nZShiKXt9aGFuZGxlQ2hhbmdlKGIsQyl7dGhpcy5faGFzQ2hhbmdlZD0hMH1lbmRVcGRhdGUoYil7dGhpcy5fY291bnRlci0tLHRoaXMuX2NvdW50ZXI9PT0wJiYodGhpcy5fb2JzZXJ2YWJsZS5yZXBvcnRDaGFuZ2VzKCksdGhpcy5faGFzQ2hhbmdlZCYmKHRoaXMuX2hhc0NoYW5nZWQ9ITEsdGhpcy5lbWl0dGVyLmZpcmUodGhpcy5fb2JzZXJ2YWJsZS5nZXQoKSkpKX19ZnVuY3Rpb24gcSh3LGIpe3JldHVybiBuZXcgRSh3LGIpLmVtaXR0ZXIuZXZlbnR9ZS5mcm9tT2JzZXJ2YWJsZT1xO2Z1bmN0aW9uIEcodyl7cmV0dXJuKGIsQyxBKT0+e2xldCBrPTAsVD0hMTtjb25zdCBCPXtiZWdpblVwZGF0ZSgpe2srK30sZW5kVXBkYXRlKCl7ay0tLGs9PT0wJiYody5yZXBvcnRDaGFuZ2VzKCksVCYmKFQ9ITEsYi5jYWxsKEMpKSl9LGhhbmRsZVBvc3NpYmxlQ2hhbmdlKCl7fSxoYW5kbGVDaGFuZ2UoKXtUPSEwfX07dy5hZGRPYnNlcnZlcihCKSx3LnJlcG9ydENoYW5nZXMoKTtjb25zdCBYPXtkaXNwb3NlKCl7dy5yZW1vdmVPYnNlcnZlcihCKX19O3JldHVybiBBIGluc3RhbmNlb2YgeWU/QS5hZGQoWCk6QXJyYXkuaXNBcnJheShBKSYmQS5wdXNoKFgpLFh9fWUuZnJvbU9ic2VydmFibGVMaWdodD1HfSkoeHR8fCh4dD17fSkpO2NsYXNzIEVle2NvbnN0cnVjdG9yKHQpe3RoaXMubGlzdGVuZXJDb3VudD0wLHRoaXMuaW52b2NhdGlvbkNvdW50PTAsdGhpcy5lbGFwc2VkT3ZlcmFsbD0wLHRoaXMuZHVyYXRpb25zPVtdLHRoaXMubmFtZT1gJHt0fV8ke0VlLl9pZFBvb2wrK31gLEVlLmFsbC5hZGQodGhpcyl9c3RhcnQodCl7dGhpcy5fc3RvcFdhdGNoPW5ldyB0dCx0aGlzLmxpc3RlbmVyQ291bnQ9dH1zdG9wKCl7aWYodGhpcy5fc3RvcFdhdGNoKXtjb25zdCB0PXRoaXMuX3N0b3BXYXRjaC5lbGFwc2VkKCk7dGhpcy5kdXJhdGlvbnMucHVzaCh0KSx0aGlzLmVsYXBzZWRPdmVyYWxsKz10LHRoaXMuaW52b2NhdGlvbkNvdW50Kz0xLHRoaXMuX3N0b3BXYXRjaD12b2lkIDB9fX1FZS5hbGw9bmV3IFNldCxFZS5faWRQb29sPTA7bGV0IG9zPS0xO2NsYXNzIGxze2NvbnN0cnVjdG9yKHQsbixyPU1hdGgucmFuZG9tKCkudG9TdHJpbmcoMTgpLnNsaWNlKDIsNSkpe3RoaXMuX2Vycm9ySGFuZGxlcj10LHRoaXMudGhyZXNob2xkPW4sdGhpcy5uYW1lPXIsdGhpcy5fd2FybkNvdW50ZG93bj0wfWRpc3Bvc2UoKXt2YXIgdDsodD10aGlzLl9zdGFja3MpPT09bnVsbHx8dD09PXZvaWQgMHx8dC5jbGVhcigpfWNoZWNrKHQsbil7Y29uc3Qgcj10aGlzLnRocmVzaG9sZDtpZihyPD0wfHxuPHIpcmV0dXJuO3RoaXMuX3N0YWNrc3x8KHRoaXMuX3N0YWNrcz1uZXcgTWFwKTtjb25zdCBzPXRoaXMuX3N0YWNrcy5nZXQodC52YWx1ZSl8fDA7aWYodGhpcy5fc3RhY2tzLnNldCh0LnZhbHVlLHMrMSksdGhpcy5fd2FybkNvdW50ZG93bi09MSx0aGlzLl93YXJuQ291bnRkb3duPD0wKXt0aGlzLl93YXJuQ291bnRkb3duPXIqLjU7Y29uc3RbaSxvXT10aGlzLmdldE1vc3RGcmVxdWVudFN0YWNrKCksbD1gWyR7dGhpcy5uYW1lfV0gcG90ZW50aWFsIGxpc3RlbmVyIExFQUsgZGV0ZWN0ZWQsIGhhdmluZyAke259IGxpc3RlbmVycyBhbHJlYWR5LiBNT1NUIGZyZXF1ZW50IGxpc3RlbmVyICgke299KTpgO2NvbnNvbGUud2FybihsKSxjb25zb2xlLndhcm4oaSk7Y29uc3QgdT1uZXcgdXMobCxpKTt0aGlzLl9lcnJvckhhbmRsZXIodSl9cmV0dXJuKCk9Pntjb25zdCBpPXRoaXMuX3N0YWNrcy5nZXQodC52YWx1ZSl8fDA7dGhpcy5fc3RhY2tzLnNldCh0LnZhbHVlLGktMSl9fWdldE1vc3RGcmVxdWVudFN0YWNrKCl7aWYoIXRoaXMuX3N0YWNrcylyZXR1cm47bGV0IHQsbj0wO2Zvcihjb25zdFtyLHNdb2YgdGhpcy5fc3RhY2tzKSghdHx8bjxzKSYmKHQ9W3Isc10sbj1zKTtyZXR1cm4gdH19Y2xhc3MgcHR7c3RhdGljIGNyZWF0ZSgpe3ZhciB0O2NvbnN0IG49bmV3IEVycm9yO3JldHVybiBuZXcgcHQoKHQ9bi5zdGFjaykhPT1udWxsJiZ0IT09dm9pZCAwP3Q6IiIpfWNvbnN0cnVjdG9yKHQpe3RoaXMudmFsdWU9dH1wcmludCgpe2NvbnNvbGUud2Fybih0aGlzLnZhbHVlLnNwbGl0KGAKYCkuc2xpY2UoMikuam9pbihgCmApKX19Y2xhc3MgdXMgZXh0ZW5kcyBFcnJvcntjb25zdHJ1Y3Rvcih0LG4pe3N1cGVyKHQpLHRoaXMubmFtZT0iTGlzdGVuZXJMZWFrRXJyb3IiLHRoaXMuc3RhY2s9bn19Y2xhc3MgY3MgZXh0ZW5kcyBFcnJvcntjb25zdHJ1Y3Rvcih0LG4pe3N1cGVyKHQpLHRoaXMubmFtZT0iTGlzdGVuZXJSZWZ1c2FsRXJyb3IiLHRoaXMuc3RhY2s9bn19Y2xhc3MgdnR7Y29uc3RydWN0b3IodCl7dGhpcy52YWx1ZT10fX1jb25zdCBocz0yO2NsYXNzIHNle2NvbnN0cnVjdG9yKHQpe3ZhciBuLHIscyxpLG8sbDt0aGlzLl9zaXplPTAsdGhpcy5fb3B0aW9ucz10LHRoaXMuX2xlYWthZ2VNb249ISgobj10aGlzLl9vcHRpb25zKT09PW51bGx8fG49PT12b2lkIDApJiZuLmxlYWtXYXJuaW5nVGhyZXNob2xkP25ldyBscygocj10Py5vbkxpc3RlbmVyRXJyb3IpIT09bnVsbCYmciE9PXZvaWQgMD9yOlplLChpPShzPXRoaXMuX29wdGlvbnMpPT09bnVsbHx8cz09PXZvaWQgMD92b2lkIDA6cy5sZWFrV2FybmluZ1RocmVzaG9sZCkhPT1udWxsJiZpIT09dm9pZCAwP2k6b3MpOnZvaWQgMCx0aGlzLl9wZXJmTW9uPSEoKG89dGhpcy5fb3B0aW9ucyk9PT1udWxsfHxvPT09dm9pZCAwKSYmby5fcHJvZk5hbWU/bmV3IEVlKHRoaXMuX29wdGlvbnMuX3Byb2ZOYW1lKTp2b2lkIDAsdGhpcy5fZGVsaXZlcnlRdWV1ZT0obD10aGlzLl9vcHRpb25zKT09PW51bGx8fGw9PT12b2lkIDA/dm9pZCAwOmwuZGVsaXZlcnlRdWV1ZX1kaXNwb3NlKCl7dmFyIHQsbixyLHM7dGhpcy5fZGlzcG9zZWR8fCh0aGlzLl9kaXNwb3NlZD0hMCwoKHQ9dGhpcy5fZGVsaXZlcnlRdWV1ZSk9PT1udWxsfHx0PT09dm9pZCAwP3ZvaWQgMDp0LmN1cnJlbnQpPT09dGhpcyYmdGhpcy5fZGVsaXZlcnlRdWV1ZS5yZXNldCgpLHRoaXMuX2xpc3RlbmVycyYmKHRoaXMuX2xpc3RlbmVycz12b2lkIDAsdGhpcy5fc2l6ZT0wKSwocj0obj10aGlzLl9vcHRpb25zKT09PW51bGx8fG49PT12b2lkIDA/dm9pZCAwOm4ub25EaWRSZW1vdmVMYXN0TGlzdGVuZXIpPT09bnVsbHx8cj09PXZvaWQgMHx8ci5jYWxsKG4pLChzPXRoaXMuX2xlYWthZ2VNb24pPT09bnVsbHx8cz09PXZvaWQgMHx8cy5kaXNwb3NlKCkpfWdldCBldmVudCgpe3ZhciB0O3JldHVybih0PXRoaXMuX2V2ZW50KSE9PW51bGwmJnQhPT12b2lkIDB8fCh0aGlzLl9ldmVudD0obixyLHMpPT57dmFyIGksbyxsLHUsYyxmLGg7aWYodGhpcy5fbGVha2FnZU1vbiYmdGhpcy5fc2l6ZT50aGlzLl9sZWFrYWdlTW9uLnRocmVzaG9sZCoqMil7Y29uc3QgeD1gWyR7dGhpcy5fbGVha2FnZU1vbi5uYW1lfV0gUkVGVVNFUyB0byBhY2NlcHQgbmV3IGxpc3RlbmVycyBiZWNhdXNlIGl0IGV4Y2VlZGVkIGl0cyB0aHJlc2hvbGQgYnkgZmFyICgke3RoaXMuX3NpemV9IHZzICR7dGhpcy5fbGVha2FnZU1vbi50aHJlc2hvbGR9KWA7Y29uc29sZS53YXJuKHgpO2NvbnN0IHY9KGk9dGhpcy5fbGVha2FnZU1vbi5nZXRNb3N0RnJlcXVlbnRTdGFjaygpKSE9PW51bGwmJmkhPT12b2lkIDA/aTpbIlVOS05PV04gc3RhY2siLC0xXSxMPW5ldyBjcyhgJHt4fS4gSElOVDogU3RhY2sgc2hvd3MgbW9zdCBmcmVxdWVudCBsaXN0ZW5lciAoJHt2WzFdfS10aW1lcylgLHZbMF0pO3JldHVybigoKG89dGhpcy5fb3B0aW9ucyk9PT1udWxsfHxvPT09dm9pZCAwP3ZvaWQgMDpvLm9uTGlzdGVuZXJFcnJvcil8fFplKShMKSxXZS5Ob25lfWlmKHRoaXMuX2Rpc3Bvc2VkKXJldHVybiBXZS5Ob25lO3ImJihuPW4uYmluZChyKSk7Y29uc3QgZD1uZXcgdnQobik7bGV0IG07dGhpcy5fbGVha2FnZU1vbiYmdGhpcy5fc2l6ZT49TWF0aC5jZWlsKHRoaXMuX2xlYWthZ2VNb24udGhyZXNob2xkKi4yKSYmKGQuc3RhY2s9cHQuY3JlYXRlKCksbT10aGlzLl9sZWFrYWdlTW9uLmNoZWNrKGQuc3RhY2ssdGhpcy5fc2l6ZSsxKSksdGhpcy5fbGlzdGVuZXJzP3RoaXMuX2xpc3RlbmVycyBpbnN0YW5jZW9mIHZ0PygoaD10aGlzLl9kZWxpdmVyeVF1ZXVlKSE9PW51bGwmJmghPT12b2lkIDB8fCh0aGlzLl9kZWxpdmVyeVF1ZXVlPW5ldyBmcyksdGhpcy5fbGlzdGVuZXJzPVt0aGlzLl9saXN0ZW5lcnMsZF0pOnRoaXMuX2xpc3RlbmVycy5wdXNoKGQpOigodT0obD10aGlzLl9vcHRpb25zKT09PW51bGx8fGw9PT12b2lkIDA/dm9pZCAwOmwub25XaWxsQWRkRmlyc3RMaXN0ZW5lcik9PT1udWxsfHx1PT09dm9pZCAwfHx1LmNhbGwobCx0aGlzKSx0aGlzLl9saXN0ZW5lcnM9ZCwoZj0oYz10aGlzLl9vcHRpb25zKT09PW51bGx8fGM9PT12b2lkIDA/dm9pZCAwOmMub25EaWRBZGRGaXJzdExpc3RlbmVyKT09PW51bGx8fGY9PT12b2lkIDB8fGYuY2FsbChjLHRoaXMpKSx0aGlzLl9zaXplKys7Y29uc3QgZz1ldCgoKT0+e20/LigpLHRoaXMuX3JlbW92ZUxpc3RlbmVyKGQpfSk7cmV0dXJuIHMgaW5zdGFuY2VvZiB5ZT9zLmFkZChnKTpBcnJheS5pc0FycmF5KHMpJiZzLnB1c2goZyksZ30pLHRoaXMuX2V2ZW50fV9yZW1vdmVMaXN0ZW5lcih0KXt2YXIgbixyLHMsaTtpZigocj0obj10aGlzLl9vcHRpb25zKT09PW51bGx8fG49PT12b2lkIDA/dm9pZCAwOm4ub25XaWxsUmVtb3ZlTGlzdGVuZXIpPT09bnVsbHx8cj09PXZvaWQgMHx8ci5jYWxsKG4sdGhpcyksIXRoaXMuX2xpc3RlbmVycylyZXR1cm47aWYodGhpcy5fc2l6ZT09PTEpe3RoaXMuX2xpc3RlbmVycz12b2lkIDAsKGk9KHM9dGhpcy5fb3B0aW9ucyk9PT1udWxsfHxzPT09dm9pZCAwP3ZvaWQgMDpzLm9uRGlkUmVtb3ZlTGFzdExpc3RlbmVyKT09PW51bGx8fGk9PT12b2lkIDB8fGkuY2FsbChzLHRoaXMpLHRoaXMuX3NpemU9MDtyZXR1cm59Y29uc3Qgbz10aGlzLl9saXN0ZW5lcnMsbD1vLmluZGV4T2YodCk7aWYobD09PS0xKXRocm93IGNvbnNvbGUubG9nKCJkaXNwb3NlZD8iLHRoaXMuX2Rpc3Bvc2VkKSxjb25zb2xlLmxvZygic2l6ZT8iLHRoaXMuX3NpemUpLGNvbnNvbGUubG9nKCJhcnI/IixKU09OLnN0cmluZ2lmeSh0aGlzLl9saXN0ZW5lcnMpKSxuZXcgRXJyb3IoIkF0dGVtcHRlZCB0byBkaXNwb3NlIHVua25vd24gbGlzdGVuZXIiKTt0aGlzLl9zaXplLS0sb1tsXT12b2lkIDA7Y29uc3QgdT10aGlzLl9kZWxpdmVyeVF1ZXVlLmN1cnJlbnQ9PT10aGlzO2lmKHRoaXMuX3NpemUqaHM8PW8ubGVuZ3RoKXtsZXQgYz0wO2ZvcihsZXQgZj0wO2Y8by5sZW5ndGg7ZisrKW9bZl0/b1tjKytdPW9bZl06dSYmKHRoaXMuX2RlbGl2ZXJ5UXVldWUuZW5kLS0sYzx0aGlzLl9kZWxpdmVyeVF1ZXVlLmkmJnRoaXMuX2RlbGl2ZXJ5UXVldWUuaS0tKTtvLmxlbmd0aD1jfX1fZGVsaXZlcih0LG4pe3ZhciByO2lmKCF0KXJldHVybjtjb25zdCBzPSgocj10aGlzLl9vcHRpb25zKT09PW51bGx8fHI9PT12b2lkIDA/dm9pZCAwOnIub25MaXN0ZW5lckVycm9yKXx8WmU7aWYoIXMpe3QudmFsdWUobik7cmV0dXJufXRyeXt0LnZhbHVlKG4pfWNhdGNoKGkpe3MoaSl9fV9kZWxpdmVyUXVldWUodCl7Y29uc3Qgbj10LmN1cnJlbnQuX2xpc3RlbmVycztmb3IoO3QuaTx0LmVuZDspdGhpcy5fZGVsaXZlcihuW3QuaSsrXSx0LnZhbHVlKTt0LnJlc2V0KCl9ZmlyZSh0KXt2YXIgbixyLHMsaTtpZighKChuPXRoaXMuX2RlbGl2ZXJ5UXVldWUpPT09bnVsbHx8bj09PXZvaWQgMCkmJm4uY3VycmVudCYmKHRoaXMuX2RlbGl2ZXJRdWV1ZSh0aGlzLl9kZWxpdmVyeVF1ZXVlKSwocj10aGlzLl9wZXJmTW9uKT09PW51bGx8fHI9PT12b2lkIDB8fHIuc3RvcCgpKSwocz10aGlzLl9wZXJmTW9uKT09PW51bGx8fHM9PT12b2lkIDB8fHMuc3RhcnQodGhpcy5fc2l6ZSksdGhpcy5fbGlzdGVuZXJzKWlmKHRoaXMuX2xpc3RlbmVycyBpbnN0YW5jZW9mIHZ0KXRoaXMuX2RlbGl2ZXIodGhpcy5fbGlzdGVuZXJzLHQpO2Vsc2V7Y29uc3Qgbz10aGlzLl9kZWxpdmVyeVF1ZXVlO28uZW5xdWV1ZSh0aGlzLHQsdGhpcy5fbGlzdGVuZXJzLmxlbmd0aCksdGhpcy5fZGVsaXZlclF1ZXVlKG8pfShpPXRoaXMuX3BlcmZNb24pPT09bnVsbHx8aT09PXZvaWQgMHx8aS5zdG9wKCl9aGFzTGlzdGVuZXJzKCl7cmV0dXJuIHRoaXMuX3NpemU+MH19Y2xhc3MgZnN7Y29uc3RydWN0b3IoKXt0aGlzLmk9LTEsdGhpcy5lbmQ9MH1lbnF1ZXVlKHQsbixyKXt0aGlzLmk9MCx0aGlzLmVuZD1yLHRoaXMuY3VycmVudD10LHRoaXMudmFsdWU9bn1yZXNldCgpe3RoaXMuaT10aGlzLmVuZCx0aGlzLmN1cnJlbnQ9dm9pZCAwLHRoaXMudmFsdWU9dm9pZCAwfX1mdW5jdGlvbiBkcyhlKXtyZXR1cm4gdHlwZW9mIGU9PSJzdHJpbmcifWZ1bmN0aW9uIG1zKGUpe2xldCB0PVtdO2Zvcig7T2JqZWN0LnByb3RvdHlwZSE9PWU7KXQ9dC5jb25jYXQoT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZSkpLGU9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO3JldHVybiB0fWZ1bmN0aW9uIHd0KGUpe2NvbnN0IHQ9W107Zm9yKGNvbnN0IG4gb2YgbXMoZSkpdHlwZW9mIGVbbl09PSJmdW5jdGlvbiImJnQucHVzaChuKTtyZXR1cm4gdH1mdW5jdGlvbiBncyhlLHQpe2NvbnN0IG49cz0+ZnVuY3Rpb24oKXtjb25zdCBpPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKTtyZXR1cm4gdChzLGkpfSxyPXt9O2Zvcihjb25zdCBzIG9mIGUpcltzXT1uKHMpO3JldHVybiByfWxldCBicz10eXBlb2YgZG9jdW1lbnQ8InUiJiZkb2N1bWVudC5sb2NhdGlvbiYmZG9jdW1lbnQubG9jYXRpb24uaGFzaC5pbmRleE9mKCJwc2V1ZG89dHJ1ZSIpPj0wO2Z1bmN0aW9uIF9zKGUsdCl7bGV0IG47cmV0dXJuIHQubGVuZ3RoPT09MD9uPWU6bj1lLnJlcGxhY2UoL1x7KFxkKylcfS9nLChyLHMpPT57Y29uc3QgaT1zWzBdLG89dFtpXTtsZXQgbD1yO3JldHVybiB0eXBlb2Ygbz09InN0cmluZyI/bD1vOih0eXBlb2Ygbz09Im51bWJlciJ8fHR5cGVvZiBvPT0iYm9vbGVhbiJ8fG89PT12b2lkIDB8fG89PT1udWxsKSYmKGw9U3RyaW5nKG8pKSxsfSksYnMmJihuPSLvvLsiK24ucmVwbGFjZSgvW2FvdWVpXS9nLCIkJiQmIikrIu+8vSIpLG59ZnVuY3Rpb24gSChlLHQsLi4ubil7cmV0dXJuIF9zKHQsbil9ZnVuY3Rpb24gRGEoZSl7fXZhciBMdCxOdDtjb25zdCBNZT0iZW4iO2xldCBTdD0hMSxDdD0hMSxBdD0hMSxudCxSdD1NZSxlbj1NZSx4cyxpZTtjb25zdCBMZT1nbG9iYWxUaGlzO2xldCBRO3R5cGVvZiBMZS52c2NvZGU8InUiJiZ0eXBlb2YgTGUudnNjb2RlLnByb2Nlc3M8InUiP1E9TGUudnNjb2RlLnByb2Nlc3M6dHlwZW9mIHByb2Nlc3M8InUiJiZ0eXBlb2YoKEx0PXByb2Nlc3M9PW51bGw/dm9pZCAwOnByb2Nlc3MudmVyc2lvbnMpPT09bnVsbHx8THQ9PT12b2lkIDA/dm9pZCAwOkx0Lm5vZGUpPT0ic3RyaW5nIiYmKFE9cHJvY2Vzcyk7Y29uc3QgcHM9dHlwZW9mKChOdD1RPy52ZXJzaW9ucyk9PT1udWxsfHxOdD09PXZvaWQgMD92b2lkIDA6TnQuZWxlY3Ryb24pPT0ic3RyaW5nIiYmUT8udHlwZT09PSJyZW5kZXJlciI7aWYodHlwZW9mIFE9PSJvYmplY3QiKXtTdD1RLnBsYXRmb3JtPT09IndpbjMyIixDdD1RLnBsYXRmb3JtPT09ImRhcndpbiIsQXQ9US5wbGF0Zm9ybT09PSJsaW51eCIsQXQmJlEuZW52LlNOQVAmJlEuZW52LlNOQVBfUkVWSVNJT04sUS5lbnYuQ0l8fFEuZW52LkJVSUxEX0FSVElGQUNUU1RBR0lOR0RJUkVDVE9SWSxudD1NZSxSdD1NZTtjb25zdCBlPVEuZW52LlZTQ09ERV9OTFNfQ09ORklHO2lmKGUpdHJ5e2NvbnN0IHQ9SlNPTi5wYXJzZShlKSxuPXQuYXZhaWxhYmxlTGFuZ3VhZ2VzWyIqIl07bnQ9dC5sb2NhbGUsZW49dC5vc0xvY2FsZSxSdD1ufHxNZSx4cz10Ll90cmFuc2xhdGlvbnNDb25maWdGaWxlfWNhdGNoe319ZWxzZSB0eXBlb2YgbmF2aWdhdG9yPT0ib2JqZWN0IiYmIXBzPyhpZT1uYXZpZ2F0b3IudXNlckFnZW50LFN0PWllLmluZGV4T2YoIldpbmRvd3MiKT49MCxDdD1pZS5pbmRleE9mKCJNYWNpbnRvc2giKT49MCwoaWUuaW5kZXhPZigiTWFjaW50b3NoIik+PTB8fGllLmluZGV4T2YoImlQYWQiKT49MHx8aWUuaW5kZXhPZigiaVBob25lIik+PTApJiZuYXZpZ2F0b3IubWF4VG91Y2hQb2ludHMmJm5hdmlnYXRvci5tYXhUb3VjaFBvaW50cz4wLEF0PWllLmluZGV4T2YoIkxpbnV4Iik+PTAsaWU/LmluZGV4T2YoIk1vYmkiKT49MCxIKHtrZXk6ImVuc3VyZUxvYWRlclBsdWdpbklzTG9hZGVkIixjb21tZW50Olsie0xvY2tlZH0iXX0sIl8iKSxudD1NZSxSdD1udCxlbj1uYXZpZ2F0b3IubGFuZ3VhZ2UpOmNvbnNvbGUuZXJyb3IoIlVuYWJsZSB0byByZXNvbHZlIHBsYXRmb3JtLiIpO2NvbnN0IHplPVN0LHZzPUN0LHVlPWllLHdzPXR5cGVvZiBMZS5wb3N0TWVzc2FnZT09ImZ1bmN0aW9uIiYmIUxlLmltcG9ydFNjcmlwdHM7KCgpPT57aWYod3Mpe2NvbnN0IGU9W107TGUuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsbj0+e2lmKG4uZGF0YSYmbi5kYXRhLnZzY29kZVNjaGVkdWxlQXN5bmNXb3JrKWZvcihsZXQgcj0wLHM9ZS5sZW5ndGg7cjxzO3IrKyl7Y29uc3QgaT1lW3JdO2lmKGkuaWQ9PT1uLmRhdGEudnNjb2RlU2NoZWR1bGVBc3luY1dvcmspe2Uuc3BsaWNlKHIsMSksaS5jYWxsYmFjaygpO3JldHVybn19fSk7bGV0IHQ9MDtyZXR1cm4gbj0+e2NvbnN0IHI9Kyt0O2UucHVzaCh7aWQ6cixjYWxsYmFjazpufSksTGUucG9zdE1lc3NhZ2Uoe3ZzY29kZVNjaGVkdWxlQXN5bmNXb3JrOnJ9LCIqIil9fXJldHVybiBlPT5zZXRUaW1lb3V0KGUpfSkoKTtjb25zdCBMcz0hISh1ZSYmdWUuaW5kZXhPZigiQ2hyb21lIik+PTApO3VlJiZ1ZS5pbmRleE9mKCJGaXJlZm94Iik+PTAsIUxzJiZ1ZSYmdWUuaW5kZXhPZigiU2FmYXJpIik+PTAsdWUmJnVlLmluZGV4T2YoIkVkZy8iKT49MCx1ZSYmdWUuaW5kZXhPZigiQW5kcm9pZCIpPj0wO2Z1bmN0aW9uIE5zKGUpe3JldHVybiBlfWNsYXNzIFNze2NvbnN0cnVjdG9yKHQsbil7dGhpcy5sYXN0Q2FjaGU9dm9pZCAwLHRoaXMubGFzdEFyZ0tleT12b2lkIDAsdHlwZW9mIHQ9PSJmdW5jdGlvbiI/KHRoaXMuX2ZuPXQsdGhpcy5fY29tcHV0ZUtleT1Ocyk6KHRoaXMuX2ZuPW4sdGhpcy5fY29tcHV0ZUtleT10LmdldENhY2hlS2V5KX1nZXQodCl7Y29uc3Qgbj10aGlzLl9jb21wdXRlS2V5KHQpO3JldHVybiB0aGlzLmxhc3RBcmdLZXkhPT1uJiYodGhpcy5sYXN0QXJnS2V5PW4sdGhpcy5sYXN0Q2FjaGU9dGhpcy5fZm4odCkpLHRoaXMubGFzdENhY2hlfX1jbGFzcyB0bntjb25zdHJ1Y3Rvcih0KXt0aGlzLmV4ZWN1dG9yPXQsdGhpcy5fZGlkUnVuPSExfWdldCB2YWx1ZSgpe2lmKCF0aGlzLl9kaWRSdW4pdHJ5e3RoaXMuX3ZhbHVlPXRoaXMuZXhlY3V0b3IoKX1jYXRjaCh0KXt0aGlzLl9lcnJvcj10fWZpbmFsbHl7dGhpcy5fZGlkUnVuPSEwfWlmKHRoaXMuX2Vycm9yKXRocm93IHRoaXMuX2Vycm9yO3JldHVybiB0aGlzLl92YWx1ZX1nZXQgcmF3VmFsdWUoKXtyZXR1cm4gdGhpcy5fdmFsdWV9fXZhciBrZTtmdW5jdGlvbiBDcyhlKXtyZXR1cm4gZS5yZXBsYWNlKC9bXFxce1x9XCpcK1w/XHxcXlwkXC5cW1xdXChcKV0vZywiXFwkJiIpfWZ1bmN0aW9uIEFzKGUpe3JldHVybiBlLnNwbGl0KC9cclxufFxyfFxuLyl9ZnVuY3Rpb24gUnMoZSl7Zm9yKGxldCB0PTAsbj1lLmxlbmd0aDt0PG47dCsrKXtjb25zdCByPWUuY2hhckNvZGVBdCh0KTtpZihyIT09MzImJnIhPT05KXJldHVybiB0fXJldHVybi0xfWZ1bmN0aW9uIHlzKGUsdD1lLmxlbmd0aC0xKXtmb3IobGV0IG49dDtuPj0wO24tLSl7Y29uc3Qgcj1lLmNoYXJDb2RlQXQobik7aWYociE9PTMyJiZyIT09OSlyZXR1cm4gbn1yZXR1cm4tMX1mdW5jdGlvbiBubihlKXtyZXR1cm4gZT49NjUmJmU8PTkwfWZ1bmN0aW9uIHl0KGUpe3JldHVybiA1NTI5Njw9ZSYmZTw9NTYzMTl9ZnVuY3Rpb24gRXMoZSl7cmV0dXJuIDU2MzIwPD1lJiZlPD01NzM0M31mdW5jdGlvbiBNcyhlLHQpe3JldHVybihlLTU1Mjk2PDwxMCkrKHQtNTYzMjApKzY1NTM2fWZ1bmN0aW9uIGtzKGUsdCxuKXtjb25zdCByPWUuY2hhckNvZGVBdChuKTtpZih5dChyKSYmbisxPHQpe2NvbnN0IHM9ZS5jaGFyQ29kZUF0KG4rMSk7aWYoRXMocykpcmV0dXJuIE1zKHIscyl9cmV0dXJuIHJ9Y29uc3QgRnM9L15bXHRcblxyXHgyMC1ceDdFXSokLztmdW5jdGlvbiBQcyhlKXtyZXR1cm4gRnMudGVzdChlKX1jbGFzcyBOZXtzdGF0aWMgZ2V0SW5zdGFuY2UodCl7cmV0dXJuIGtlLmNhY2hlLmdldChBcnJheS5mcm9tKHQpKX1zdGF0aWMgZ2V0TG9jYWxlcygpe3JldHVybiBrZS5fbG9jYWxlcy52YWx1ZX1jb25zdHJ1Y3Rvcih0KXt0aGlzLmNvbmZ1c2FibGVEaWN0aW9uYXJ5PXR9aXNBbWJpZ3VvdXModCl7cmV0dXJuIHRoaXMuY29uZnVzYWJsZURpY3Rpb25hcnkuaGFzKHQpfWdldFByaW1hcnlDb25mdXNhYmxlKHQpe3JldHVybiB0aGlzLmNvbmZ1c2FibGVEaWN0aW9uYXJ5LmdldCh0KX1nZXRDb25mdXNhYmxlQ29kZVBvaW50cygpe3JldHVybiBuZXcgU2V0KHRoaXMuY29uZnVzYWJsZURpY3Rpb25hcnkua2V5cygpKX19a2U9TmUsTmUuYW1iaWd1b3VzQ2hhcmFjdGVyRGF0YT1uZXcgdG4oKCk9PkpTT04ucGFyc2UoJ3siX2NvbW1vbiI6WzgyMzIsMzIsODIzMywzMiw1NzYwLDMyLDgxOTIsMzIsODE5MywzMiw4MTk0LDMyLDgxOTUsMzIsODE5NiwzMiw4MTk3LDMyLDgxOTgsMzIsODIwMCwzMiw4MjAxLDMyLDgyMDIsMzIsODI4NywzMiw4MTk5LDMyLDgyMzksMzIsMjA0Miw5NSw2NTEwMSw5NSw2NTEwMiw5NSw2NTEwMyw5NSw4MjA4LDQ1LDgyMDksNDUsODIxMCw0NSw2NTExMiw0NSwxNzQ4LDQ1LDgyNTksNDUsNzI3LDQ1LDg3MjIsNDUsMTAxMzQsNDUsMTE0NTAsNDUsMTU0OSw0NCwxNjQzLDQ0LDgyMTgsNDQsMTg0LDQ0LDQyMjMzLDQ0LDg5NCw1OSwyMzA3LDU4LDI2OTEsNTgsMTQxNyw1OCwxNzk1LDU4LDE3OTYsNTgsNTg2OCw1OCw2NTA3Miw1OCw2MTQ3LDU4LDYxNTMsNTgsODI4Miw1OCwxNDc1LDU4LDc2MCw1OCw0Mjg4OSw1OCw4NzU4LDU4LDcyMCw1OCw0MjIzNyw1OCw0NTEsMzMsMTE2MDEsMzMsNjYwLDYzLDU3Nyw2MywyNDI5LDYzLDUwMzgsNjMsNDI3MzEsNjMsMTE5MTQ5LDQ2LDgyMjgsNDYsMTc5Myw0NiwxNzk0LDQ2LDQyNTEwLDQ2LDY4MTc2LDQ2LDE2MzIsNDYsMTc3Niw0Niw0MjIzMiw0NiwxMzczLDk2LDY1Mjg3LDk2LDgyMTksOTYsODI0Miw5NiwxMzcwLDk2LDE1MjMsOTYsODE3NSw5Niw2NTM0NCw5Niw5MDAsOTYsODE4OSw5Niw4MTI1LDk2LDgxMjcsOTYsODE5MCw5Niw2OTcsOTYsODg0LDk2LDcxMiw5Niw3MTQsOTYsNzE1LDk2LDc1Niw5Niw2OTksOTYsNzAxLDk2LDcwMCw5Niw3MDIsOTYsNDI4OTIsOTYsMTQ5Nyw5NiwyMDM2LDk2LDIwMzcsOTYsNTE5NCw5Niw1ODM2LDk2LDk0MDMzLDk2LDk0MDM0LDk2LDY1MzM5LDkxLDEwMDg4LDQwLDEwMDk4LDQwLDEyMzA4LDQwLDY0ODMwLDQwLDY1MzQxLDkzLDEwMDg5LDQxLDEwMDk5LDQxLDEyMzA5LDQxLDY0ODMxLDQxLDEwMTAwLDEyMywxMTkwNjAsMTIzLDEwMTAxLDEyNSw2NTM0Miw5NCw4MjcwLDQyLDE2NDUsNDIsODcyNyw0Miw2NjMzNSw0Miw1OTQxLDQ3LDgyNTcsNDcsODcyNSw0Nyw4MjYwLDQ3LDk1ODUsNDcsMTAxODcsNDcsMTA3NDQsNDcsMTE5MzU0LDQ3LDEyNzU1LDQ3LDEyMzM5LDQ3LDExNDYyLDQ3LDIwMDMxLDQ3LDEyMDM1LDQ3LDY1MzQwLDkyLDY1MTI4LDkyLDg3MjYsOTIsMTAxODksOTIsMTA3NDEsOTIsMTA3NDUsOTIsMTE5MzExLDkyLDExOTM1NSw5MiwxMjc1Niw5MiwyMDAyMiw5MiwxMjAzNCw5Miw0Mjg3MiwzOCw3MDgsOTQsNzEwLDk0LDU4NjksNDMsMTAxMzMsNDMsNjYyMDMsNDMsODI0OSw2MCwxMDA5NCw2MCw3MDYsNjAsMTE5MzUwLDYwLDUxNzYsNjAsNTgxMCw2MCw1MTIwLDYxLDExODQwLDYxLDEyNDQ4LDYxLDQyMjM5LDYxLDgyNTAsNjIsMTAwOTUsNjIsNzA3LDYyLDExOTM1MSw2Miw1MTcxLDYyLDk0MDE1LDYyLDgyNzUsMTI2LDczMiwxMjYsODEyOCwxMjYsODc2NCwxMjYsNjUzNzIsMTI0LDY1MjkzLDQ1LDEyMDc4NCw1MCwxMjA3OTQsNTAsMTIwODA0LDUwLDEyMDgxNCw1MCwxMjA4MjQsNTAsMTMwMDM0LDUwLDQyODQyLDUwLDQyMyw1MCwxMDAwLDUwLDQyNTY0LDUwLDUzMTEsNTAsNDI3MzUsNTAsMTE5MzAyLDUxLDEyMDc4NSw1MSwxMjA3OTUsNTEsMTIwODA1LDUxLDEyMDgxNSw1MSwxMjA4MjUsNTEsMTMwMDM1LDUxLDQyOTIzLDUxLDU0MCw1MSw0MzksNTEsNDI4NTgsNTEsMTE0NjgsNTEsMTI0OCw1MSw5NDAxMSw1MSw3MTg4Miw1MSwxMjA3ODYsNTIsMTIwNzk2LDUyLDEyMDgwNiw1MiwxMjA4MTYsNTIsMTIwODI2LDUyLDEzMDAzNiw1Miw1MDcwLDUyLDcxODU1LDUyLDEyMDc4Nyw1MywxMjA3OTcsNTMsMTIwODA3LDUzLDEyMDgxNyw1MywxMjA4MjcsNTMsMTMwMDM3LDUzLDQ0NCw1Myw3MTg2Nyw1MywxMjA3ODgsNTQsMTIwNzk4LDU0LDEyMDgwOCw1NCwxMjA4MTgsNTQsMTIwODI4LDU0LDEzMDAzOCw1NCwxMTQ3NCw1NCw1MTAyLDU0LDcxODkzLDU0LDExOTMxNCw1NSwxMjA3ODksNTUsMTIwNzk5LDU1LDEyMDgwOSw1NSwxMjA4MTksNTUsMTIwODI5LDU1LDEzMDAzOSw1NSw2Njc3MCw1NSw3MTg3OCw1NSwyODE5LDU2LDI1MzgsNTYsMjY2Niw1NiwxMjUxMzEsNTYsMTIwNzkwLDU2LDEyMDgwMCw1NiwxMjA4MTAsNTYsMTIwODIwLDU2LDEyMDgzMCw1NiwxMzAwNDAsNTYsNTQ3LDU2LDU0Niw1Niw2NjMzMCw1NiwyNjYzLDU3LDI5MjAsNTcsMjU0MSw1NywzNDM3LDU3LDEyMDc5MSw1NywxMjA4MDEsNTcsMTIwODExLDU3LDEyMDgyMSw1NywxMjA4MzEsNTcsMTMwMDQxLDU3LDQyODYyLDU3LDExNDY2LDU3LDcxODg0LDU3LDcxODUyLDU3LDcxODk0LDU3LDkwODIsOTcsNjUzNDUsOTcsMTE5ODM0LDk3LDExOTg4Niw5NywxMTk5MzgsOTcsMTE5OTkwLDk3LDEyMDA0Miw5NywxMjAwOTQsOTcsMTIwMTQ2LDk3LDEyMDE5OCw5NywxMjAyNTAsOTcsMTIwMzAyLDk3LDEyMDM1NCw5NywxMjA0MDYsOTcsMTIwNDU4LDk3LDU5Myw5Nyw5NDUsOTcsMTIwNTE0LDk3LDEyMDU3Miw5NywxMjA2MzAsOTcsMTIwNjg4LDk3LDEyMDc0Niw5Nyw2NTMxMyw2NSwxMTk4MDgsNjUsMTE5ODYwLDY1LDExOTkxMiw2NSwxMTk5NjQsNjUsMTIwMDE2LDY1LDEyMDA2OCw2NSwxMjAxMjAsNjUsMTIwMTcyLDY1LDEyMDIyNCw2NSwxMjAyNzYsNjUsMTIwMzI4LDY1LDEyMDM4MCw2NSwxMjA0MzIsNjUsOTEzLDY1LDEyMDQ4OCw2NSwxMjA1NDYsNjUsMTIwNjA0LDY1LDEyMDY2Miw2NSwxMjA3MjAsNjUsNTAzNCw2NSw1NTczLDY1LDQyMjIyLDY1LDk0MDE2LDY1LDY2MjA4LDY1LDExOTgzNSw5OCwxMTk4ODcsOTgsMTE5OTM5LDk4LDExOTk5MSw5OCwxMjAwNDMsOTgsMTIwMDk1LDk4LDEyMDE0Nyw5OCwxMjAxOTksOTgsMTIwMjUxLDk4LDEyMDMwMyw5OCwxMjAzNTUsOTgsMTIwNDA3LDk4LDEyMDQ1OSw5OCwzODgsOTgsNTA3MSw5OCw1MjM0LDk4LDU1NTEsOTgsNjUzMTQsNjYsODQ5Miw2NiwxMTk4MDksNjYsMTE5ODYxLDY2LDExOTkxMyw2NiwxMjAwMTcsNjYsMTIwMDY5LDY2LDEyMDEyMSw2NiwxMjAxNzMsNjYsMTIwMjI1LDY2LDEyMDI3Nyw2NiwxMjAzMjksNjYsMTIwMzgxLDY2LDEyMDQzMyw2Niw0MjkzMiw2Niw5MTQsNjYsMTIwNDg5LDY2LDEyMDU0Nyw2NiwxMjA2MDUsNjYsMTIwNjYzLDY2LDEyMDcyMSw2Niw1MTA4LDY2LDU2MjMsNjYsNDIxOTIsNjYsNjYxNzgsNjYsNjYyMDksNjYsNjYzMDUsNjYsNjUzNDcsOTksODU3Myw5OSwxMTk4MzYsOTksMTE5ODg4LDk5LDExOTk0MCw5OSwxMTk5OTIsOTksMTIwMDQ0LDk5LDEyMDA5Niw5OSwxMjAxNDgsOTksMTIwMjAwLDk5LDEyMDI1Miw5OSwxMjAzMDQsOTksMTIwMzU2LDk5LDEyMDQwOCw5OSwxMjA0NjAsOTksNzQyOCw5OSwxMDEwLDk5LDExNDI5LDk5LDQzOTUxLDk5LDY2NjIxLDk5LDEyODg0NCw2Nyw3MTkyMiw2Nyw3MTkxMyw2Nyw2NTMxNSw2Nyw4NTU3LDY3LDg0NTAsNjcsODQ5Myw2NywxMTk4MTAsNjcsMTE5ODYyLDY3LDExOTkxNCw2NywxMTk5NjYsNjcsMTIwMDE4LDY3LDEyMDE3NCw2NywxMjAyMjYsNjcsMTIwMjc4LDY3LDEyMDMzMCw2NywxMjAzODIsNjcsMTIwNDM0LDY3LDEwMTcsNjcsMTE0MjgsNjcsNTA4Nyw2Nyw0MjIwMiw2Nyw2NjIxMCw2Nyw2NjMwNiw2Nyw2NjU4MSw2Nyw2Njg0NCw2Nyw4NTc0LDEwMCw4NTE4LDEwMCwxMTk4MzcsMTAwLDExOTg4OSwxMDAsMTE5OTQxLDEwMCwxMTk5OTMsMTAwLDEyMDA0NSwxMDAsMTIwMDk3LDEwMCwxMjAxNDksMTAwLDEyMDIwMSwxMDAsMTIwMjUzLDEwMCwxMjAzMDUsMTAwLDEyMDM1NywxMDAsMTIwNDA5LDEwMCwxMjA0NjEsMTAwLDEyODEsMTAwLDUwOTUsMTAwLDUyMzEsMTAwLDQyMTk0LDEwMCw4NTU4LDY4LDg1MTcsNjgsMTE5ODExLDY4LDExOTg2Myw2OCwxMTk5MTUsNjgsMTE5OTY3LDY4LDEyMDAxOSw2OCwxMjAwNzEsNjgsMTIwMTIzLDY4LDEyMDE3NSw2OCwxMjAyMjcsNjgsMTIwMjc5LDY4LDEyMDMzMSw2OCwxMjAzODMsNjgsMTIwNDM1LDY4LDUwMjQsNjgsNTU5OCw2OCw1NjEwLDY4LDQyMTk1LDY4LDg0OTQsMTAxLDY1MzQ5LDEwMSw4NDk1LDEwMSw4NTE5LDEwMSwxMTk4MzgsMTAxLDExOTg5MCwxMDEsMTE5OTQyLDEwMSwxMjAwNDYsMTAxLDEyMDA5OCwxMDEsMTIwMTUwLDEwMSwxMjAyMDIsMTAxLDEyMDI1NCwxMDEsMTIwMzA2LDEwMSwxMjAzNTgsMTAxLDEyMDQxMCwxMDEsMTIwNDYyLDEwMSw0MzgyNiwxMDEsMTIxMywxMDEsODk1OSw2OSw2NTMxNyw2OSw4NDk2LDY5LDExOTgxMiw2OSwxMTk4NjQsNjksMTE5OTE2LDY5LDEyMDAyMCw2OSwxMjAwNzIsNjksMTIwMTI0LDY5LDEyMDE3Niw2OSwxMjAyMjgsNjksMTIwMjgwLDY5LDEyMDMzMiw2OSwxMjAzODQsNjksMTIwNDM2LDY5LDkxNyw2OSwxMjA0OTIsNjksMTIwNTUwLDY5LDEyMDYwOCw2OSwxMjA2NjYsNjksMTIwNzI0LDY5LDExNTc3LDY5LDUwMzYsNjksNDIyMjQsNjksNzE4NDYsNjksNzE4NTQsNjksNjYxODIsNjksMTE5ODM5LDEwMiwxMTk4OTEsMTAyLDExOTk0MywxMDIsMTE5OTk1LDEwMiwxMjAwNDcsMTAyLDEyMDA5OSwxMDIsMTIwMTUxLDEwMiwxMjAyMDMsMTAyLDEyMDI1NSwxMDIsMTIwMzA3LDEwMiwxMjAzNTksMTAyLDEyMDQxMSwxMDIsMTIwNDYzLDEwMiw0MzgyOSwxMDIsNDI5MDUsMTAyLDM4MywxMDIsNzgzNywxMDIsMTQxMiwxMDIsMTE5MzE1LDcwLDg0OTcsNzAsMTE5ODEzLDcwLDExOTg2NSw3MCwxMTk5MTcsNzAsMTIwMDIxLDcwLDEyMDA3Myw3MCwxMjAxMjUsNzAsMTIwMTc3LDcwLDEyMDIyOSw3MCwxMjAyODEsNzAsMTIwMzMzLDcwLDEyMDM4NSw3MCwxMjA0MzcsNzAsNDI5MDQsNzAsOTg4LDcwLDEyMDc3OCw3MCw1NTU2LDcwLDQyMjA1LDcwLDcxODc0LDcwLDcxODQyLDcwLDY2MTgzLDcwLDY2MjEzLDcwLDY2ODUzLDcwLDY1MzUxLDEwMyw4NDU4LDEwMywxMTk4NDAsMTAzLDExOTg5MiwxMDMsMTE5OTQ0LDEwMywxMjAwNDgsMTAzLDEyMDEwMCwxMDMsMTIwMTUyLDEwMywxMjAyMDQsMTAzLDEyMDI1NiwxMDMsMTIwMzA4LDEwMywxMjAzNjAsMTAzLDEyMDQxMiwxMDMsMTIwNDY0LDEwMyw2MDksMTAzLDc1NTUsMTAzLDM5NywxMDMsMTQwOSwxMDMsMTE5ODE0LDcxLDExOTg2Niw3MSwxMTk5MTgsNzEsMTE5OTcwLDcxLDEyMDAyMiw3MSwxMjAwNzQsNzEsMTIwMTI2LDcxLDEyMDE3OCw3MSwxMjAyMzAsNzEsMTIwMjgyLDcxLDEyMDMzNCw3MSwxMjAzODYsNzEsMTIwNDM4LDcxLDEyOTIsNzEsNTA1Niw3MSw1MTA3LDcxLDQyMTk4LDcxLDY1MzUyLDEwNCw4NDYyLDEwNCwxMTk4NDEsMTA0LDExOTk0NSwxMDQsMTE5OTk3LDEwNCwxMjAwNDksMTA0LDEyMDEwMSwxMDQsMTIwMTUzLDEwNCwxMjAyMDUsMTA0LDEyMDI1NywxMDQsMTIwMzA5LDEwNCwxMjAzNjEsMTA0LDEyMDQxMywxMDQsMTIwNDY1LDEwNCwxMjExLDEwNCwxMzkyLDEwNCw1MDU4LDEwNCw2NTMyMCw3Miw4NDU5LDcyLDg0NjAsNzIsODQ2MSw3MiwxMTk4MTUsNzIsMTE5ODY3LDcyLDExOTkxOSw3MiwxMjAwMjMsNzIsMTIwMTc5LDcyLDEyMDIzMSw3MiwxMjAyODMsNzIsMTIwMzM1LDcyLDEyMDM4Nyw3MiwxMjA0MzksNzIsOTE5LDcyLDEyMDQ5NCw3MiwxMjA1NTIsNzIsMTIwNjEwLDcyLDEyMDY2OCw3MiwxMjA3MjYsNzIsMTE0MDYsNzIsNTA1MSw3Miw1NTAwLDcyLDQyMjE1LDcyLDY2MjU1LDcyLDczMSwxMDUsOTA3NSwxMDUsNjUzNTMsMTA1LDg1NjAsMTA1LDg1MDUsMTA1LDg1MjAsMTA1LDExOTg0MiwxMDUsMTE5ODk0LDEwNSwxMTk5NDYsMTA1LDExOTk5OCwxMDUsMTIwMDUwLDEwNSwxMjAxMDIsMTA1LDEyMDE1NCwxMDUsMTIwMjA2LDEwNSwxMjAyNTgsMTA1LDEyMDMxMCwxMDUsMTIwMzYyLDEwNSwxMjA0MTQsMTA1LDEyMDQ2NiwxMDUsMTIwNDg0LDEwNSw2MTgsMTA1LDYxNywxMDUsOTUzLDEwNSw4MTI2LDEwNSw4OTAsMTA1LDEyMDUyMiwxMDUsMTIwNTgwLDEwNSwxMjA2MzgsMTA1LDEyMDY5NiwxMDUsMTIwNzU0LDEwNSwxMTEwLDEwNSw0MjU2NywxMDUsMTIzMSwxMDUsNDM4OTMsMTA1LDUwMjksMTA1LDcxODc1LDEwNSw2NTM1NCwxMDYsODUyMSwxMDYsMTE5ODQzLDEwNiwxMTk4OTUsMTA2LDExOTk0NywxMDYsMTE5OTk5LDEwNiwxMjAwNTEsMTA2LDEyMDEwMywxMDYsMTIwMTU1LDEwNiwxMjAyMDcsMTA2LDEyMDI1OSwxMDYsMTIwMzExLDEwNiwxMjAzNjMsMTA2LDEyMDQxNSwxMDYsMTIwNDY3LDEwNiwxMDExLDEwNiwxMTEyLDEwNiw2NTMyMiw3NCwxMTk4MTcsNzQsMTE5ODY5LDc0LDExOTkyMSw3NCwxMTk5NzMsNzQsMTIwMDI1LDc0LDEyMDA3Nyw3NCwxMjAxMjksNzQsMTIwMTgxLDc0LDEyMDIzMyw3NCwxMjAyODUsNzQsMTIwMzM3LDc0LDEyMDM4OSw3NCwxMjA0NDEsNzQsNDI5MzAsNzQsODk1LDc0LDEwMzIsNzQsNTAzNSw3NCw1MjYxLDc0LDQyMjAxLDc0LDExOTg0NCwxMDcsMTE5ODk2LDEwNywxMTk5NDgsMTA3LDEyMDAwMCwxMDcsMTIwMDUyLDEwNywxMjAxMDQsMTA3LDEyMDE1NiwxMDcsMTIwMjA4LDEwNywxMjAyNjAsMTA3LDEyMDMxMiwxMDcsMTIwMzY0LDEwNywxMjA0MTYsMTA3LDEyMDQ2OCwxMDcsODQ5MCw3NSw2NTMyMyw3NSwxMTk4MTgsNzUsMTE5ODcwLDc1LDExOTkyMiw3NSwxMTk5NzQsNzUsMTIwMDI2LDc1LDEyMDA3OCw3NSwxMjAxMzAsNzUsMTIwMTgyLDc1LDEyMDIzNCw3NSwxMjAyODYsNzUsMTIwMzM4LDc1LDEyMDM5MCw3NSwxMjA0NDIsNzUsOTIyLDc1LDEyMDQ5Nyw3NSwxMjA1NTUsNzUsMTIwNjEzLDc1LDEyMDY3MSw3NSwxMjA3MjksNzUsMTE0MTIsNzUsNTA5NCw3NSw1ODQ1LDc1LDQyMTk5LDc1LDY2ODQwLDc1LDE0NzIsMTA4LDg3MzksNzMsOTIxMyw3Myw2NTUxMiw3MywxNjMzLDEwOCwxNzc3LDczLDY2MzM2LDEwOCwxMjUxMjcsMTA4LDEyMDc4Myw3MywxMjA3OTMsNzMsMTIwODAzLDczLDEyMDgxMyw3MywxMjA4MjMsNzMsMTMwMDMzLDczLDY1MzIxLDczLDg1NDQsNzMsODQ2NCw3Myw4NDY1LDczLDExOTgxNiw3MywxMTk4NjgsNzMsMTE5OTIwLDczLDEyMDAyNCw3MywxMjAxMjgsNzMsMTIwMTgwLDczLDEyMDIzMiw3MywxMjAyODQsNzMsMTIwMzM2LDczLDEyMDM4OCw3MywxMjA0NDAsNzMsNjUzNTYsMTA4LDg1NzIsNzMsODQ2NywxMDgsMTE5ODQ1LDEwOCwxMTk4OTcsMTA4LDExOTk0OSwxMDgsMTIwMDAxLDEwOCwxMjAwNTMsMTA4LDEyMDEwNSw3MywxMjAxNTcsNzMsMTIwMjA5LDczLDEyMDI2MSw3MywxMjAzMTMsNzMsMTIwMzY1LDczLDEyMDQxNyw3MywxMjA0NjksNzMsNDQ4LDczLDEyMDQ5Niw3MywxMjA1NTQsNzMsMTIwNjEyLDczLDEyMDY3MCw3MywxMjA3MjgsNzMsMTE0MTAsNzMsMTAzMCw3MywxMjE2LDczLDE0OTMsMTA4LDE1MDMsMTA4LDE1NzUsMTA4LDEyNjQ2NCwxMDgsMTI2NTkyLDEwOCw2NTE2NiwxMDgsNjUxNjUsMTA4LDE5OTQsMTA4LDExNTk5LDczLDU4MjUsNzMsNDIyMjYsNzMsOTM5OTIsNzMsNjYxODYsMTI0LDY2MzEzLDEyNCwxMTkzMzgsNzYsODU1Niw3Niw4NDY2LDc2LDExOTgxOSw3NiwxMTk4NzEsNzYsMTE5OTIzLDc2LDEyMDAyNyw3NiwxMjAwNzksNzYsMTIwMTMxLDc2LDEyMDE4Myw3NiwxMjAyMzUsNzYsMTIwMjg3LDc2LDEyMDMzOSw3NiwxMjAzOTEsNzYsMTIwNDQzLDc2LDExNDcyLDc2LDUwODYsNzYsNTI5MCw3Niw0MjIwOSw3Niw5Mzk3NCw3Niw3MTg0Myw3Niw3MTg1OCw3Niw2NjU4Nyw3Niw2Njg1NCw3Niw2NTMyNSw3Nyw4NTU5LDc3LDg0OTksNzcsMTE5ODIwLDc3LDExOTg3Miw3NywxMTk5MjQsNzcsMTIwMDI4LDc3LDEyMDA4MCw3NywxMjAxMzIsNzcsMTIwMTg0LDc3LDEyMDIzNiw3NywxMjAyODgsNzcsMTIwMzQwLDc3LDEyMDM5Miw3NywxMjA0NDQsNzcsOTI0LDc3LDEyMDQ5OSw3NywxMjA1NTcsNzcsMTIwNjE1LDc3LDEyMDY3Myw3NywxMjA3MzEsNzcsMTAxOCw3NywxMTQxNiw3Nyw1MDQ3LDc3LDU2MTYsNzcsNTg0Niw3Nyw0MjIwNyw3Nyw2NjIyNCw3Nyw2NjMyMSw3NywxMTk4NDcsMTEwLDExOTg5OSwxMTAsMTE5OTUxLDExMCwxMjAwMDMsMTEwLDEyMDA1NSwxMTAsMTIwMTA3LDExMCwxMjAxNTksMTEwLDEyMDIxMSwxMTAsMTIwMjYzLDExMCwxMjAzMTUsMTEwLDEyMDM2NywxMTAsMTIwNDE5LDExMCwxMjA0NzEsMTEwLDE0MDAsMTEwLDE0MDQsMTEwLDY1MzI2LDc4LDg0NjksNzgsMTE5ODIxLDc4LDExOTg3Myw3OCwxMTk5MjUsNzgsMTE5OTc3LDc4LDEyMDAyOSw3OCwxMjAwODEsNzgsMTIwMTg1LDc4LDEyMDIzNyw3OCwxMjAyODksNzgsMTIwMzQxLDc4LDEyMDM5Myw3OCwxMjA0NDUsNzgsOTI1LDc4LDEyMDUwMCw3OCwxMjA1NTgsNzgsMTIwNjE2LDc4LDEyMDY3NCw3OCwxMjA3MzIsNzgsMTE0MTgsNzgsNDIyMDgsNzgsNjY4MzUsNzgsMzA3NCwxMTEsMzIwMiwxMTEsMzMzMCwxMTEsMzQ1OCwxMTEsMjQwNiwxMTEsMjY2MiwxMTEsMjc5MCwxMTEsMzA0NiwxMTEsMzE3NCwxMTEsMzMwMiwxMTEsMzQzMCwxMTEsMzY2NCwxMTEsMzc5MiwxMTEsNDE2MCwxMTEsMTYzNywxMTEsMTc4MSwxMTEsNjUzNTksMTExLDg1MDAsMTExLDExOTg0OCwxMTEsMTE5OTAwLDExMSwxMTk5NTIsMTExLDEyMDA1NiwxMTEsMTIwMTA4LDExMSwxMjAxNjAsMTExLDEyMDIxMiwxMTEsMTIwMjY0LDExMSwxMjAzMTYsMTExLDEyMDM2OCwxMTEsMTIwNDIwLDExMSwxMjA0NzIsMTExLDc0MzksMTExLDc0NDEsMTExLDQzODM3LDExMSw5NTksMTExLDEyMDUyOCwxMTEsMTIwNTg2LDExMSwxMjA2NDQsMTExLDEyMDcwMiwxMTEsMTIwNzYwLDExMSw5NjMsMTExLDEyMDUzMiwxMTEsMTIwNTkwLDExMSwxMjA2NDgsMTExLDEyMDcwNiwxMTEsMTIwNzY0LDExMSwxMTQyMywxMTEsNDM1MSwxMTEsMTQxMywxMTEsMTUwNSwxMTEsMTYwNywxMTEsMTI2NTAwLDExMSwxMjY1NjQsMTExLDEyNjU5NiwxMTEsNjUyNTksMTExLDY1MjYwLDExMSw2NTI1OCwxMTEsNjUyNTcsMTExLDE3MjYsMTExLDY0NDI4LDExMSw2NDQyOSwxMTEsNjQ0MjcsMTExLDY0NDI2LDExMSwxNzI5LDExMSw2NDQyNCwxMTEsNjQ0MjUsMTExLDY0NDIzLDExMSw2NDQyMiwxMTEsMTc0OSwxMTEsMzM2MCwxMTEsNDEyNSwxMTEsNjY3OTQsMTExLDcxODgwLDExMSw3MTg5NSwxMTEsNjY2MDQsMTExLDE5ODQsNzksMjUzNCw3OSwyOTE4LDc5LDEyMjk1LDc5LDcwODY0LDc5LDcxOTA0LDc5LDEyMDc4Miw3OSwxMjA3OTIsNzksMTIwODAyLDc5LDEyMDgxMiw3OSwxMjA4MjIsNzksMTMwMDMyLDc5LDY1MzI3LDc5LDExOTgyMiw3OSwxMTk4NzQsNzksMTE5OTI2LDc5LDExOTk3OCw3OSwxMjAwMzAsNzksMTIwMDgyLDc5LDEyMDEzNCw3OSwxMjAxODYsNzksMTIwMjM4LDc5LDEyMDI5MCw3OSwxMjAzNDIsNzksMTIwMzk0LDc5LDEyMDQ0Niw3OSw5MjcsNzksMTIwNTAyLDc5LDEyMDU2MCw3OSwxMjA2MTgsNzksMTIwNjc2LDc5LDEyMDczNCw3OSwxMTQyMiw3OSwxMzY1LDc5LDExNjA0LDc5LDQ4MTYsNzksMjg0OCw3OSw2Njc1NCw3OSw0MjIyNyw3OSw3MTg2MSw3OSw2NjE5NCw3OSw2NjIxOSw3OSw2NjU2NCw3OSw2NjgzOCw3OSw5MDc2LDExMiw2NTM2MCwxMTIsMTE5ODQ5LDExMiwxMTk5MDEsMTEyLDExOTk1MywxMTIsMTIwMDA1LDExMiwxMjAwNTcsMTEyLDEyMDEwOSwxMTIsMTIwMTYxLDExMiwxMjAyMTMsMTEyLDEyMDI2NSwxMTIsMTIwMzE3LDExMiwxMjAzNjksMTEyLDEyMDQyMSwxMTIsMTIwNDczLDExMiw5NjEsMTEyLDEyMDUzMCwxMTIsMTIwNTQ0LDExMiwxMjA1ODgsMTEyLDEyMDYwMiwxMTIsMTIwNjQ2LDExMiwxMjA2NjAsMTEyLDEyMDcwNCwxMTIsMTIwNzE4LDExMiwxMjA3NjIsMTEyLDEyMDc3NiwxMTIsMTE0MjcsMTEyLDY1MzI4LDgwLDg0NzMsODAsMTE5ODIzLDgwLDExOTg3NSw4MCwxMTk5MjcsODAsMTE5OTc5LDgwLDEyMDAzMSw4MCwxMjAwODMsODAsMTIwMTg3LDgwLDEyMDIzOSw4MCwxMjAyOTEsODAsMTIwMzQzLDgwLDEyMDM5NSw4MCwxMjA0NDcsODAsOTI5LDgwLDEyMDUwNCw4MCwxMjA1NjIsODAsMTIwNjIwLDgwLDEyMDY3OCw4MCwxMjA3MzYsODAsMTE0MjYsODAsNTA5MCw4MCw1MjI5LDgwLDQyMTkzLDgwLDY2MTk3LDgwLDExOTg1MCwxMTMsMTE5OTAyLDExMywxMTk5NTQsMTEzLDEyMDAwNiwxMTMsMTIwMDU4LDExMywxMjAxMTAsMTEzLDEyMDE2MiwxMTMsMTIwMjE0LDExMywxMjAyNjYsMTEzLDEyMDMxOCwxMTMsMTIwMzcwLDExMywxMjA0MjIsMTEzLDEyMDQ3NCwxMTMsMTMwNywxMTMsMTM3OSwxMTMsMTM4MiwxMTMsODQ3NCw4MSwxMTk4MjQsODEsMTE5ODc2LDgxLDExOTkyOCw4MSwxMTk5ODAsODEsMTIwMDMyLDgxLDEyMDA4NCw4MSwxMjAxODgsODEsMTIwMjQwLDgxLDEyMDI5Miw4MSwxMjAzNDQsODEsMTIwMzk2LDgxLDEyMDQ0OCw4MSwxMTYwNSw4MSwxMTk4NTEsMTE0LDExOTkwMywxMTQsMTE5OTU1LDExNCwxMjAwMDcsMTE0LDEyMDA1OSwxMTQsMTIwMTExLDExNCwxMjAxNjMsMTE0LDEyMDIxNSwxMTQsMTIwMjY3LDExNCwxMjAzMTksMTE0LDEyMDM3MSwxMTQsMTIwNDIzLDExNCwxMjA0NzUsMTE0LDQzODQ3LDExNCw0Mzg0OCwxMTQsNzQ2MiwxMTQsMTEzOTcsMTE0LDQzOTA1LDExNCwxMTkzMTgsODIsODQ3NSw4Miw4NDc2LDgyLDg0NzcsODIsMTE5ODI1LDgyLDExOTg3Nyw4MiwxMTk5MjksODIsMTIwMDMzLDgyLDEyMDE4OSw4MiwxMjAyNDEsODIsMTIwMjkzLDgyLDEyMDM0NSw4MiwxMjAzOTcsODIsMTIwNDQ5LDgyLDQyMiw4Miw1MDI1LDgyLDUwNzQsODIsNjY3NDAsODIsNTUxMSw4Miw0MjIxMSw4Miw5NDAwNSw4Miw2NTM2MywxMTUsMTE5ODUyLDExNSwxMTk5MDQsMTE1LDExOTk1NiwxMTUsMTIwMDA4LDExNSwxMjAwNjAsMTE1LDEyMDExMiwxMTUsMTIwMTY0LDExNSwxMjAyMTYsMTE1LDEyMDI2OCwxMTUsMTIwMzIwLDExNSwxMjAzNzIsMTE1LDEyMDQyNCwxMTUsMTIwNDc2LDExNSw0MjgwMSwxMTUsNDQ1LDExNSwxMTA5LDExNSw0Mzk0NiwxMTUsNzE4NzMsMTE1LDY2NjMyLDExNSw2NTMzMSw4MywxMTk4MjYsODMsMTE5ODc4LDgzLDExOTkzMCw4MywxMTk5ODIsODMsMTIwMDM0LDgzLDEyMDA4Niw4MywxMjAxMzgsODMsMTIwMTkwLDgzLDEyMDI0Miw4MywxMjAyOTQsODMsMTIwMzQ2LDgzLDEyMDM5OCw4MywxMjA0NTAsODMsMTAyOSw4MywxMzU5LDgzLDUwNzcsODMsNTA4Miw4Myw0MjIxMCw4Myw5NDAxMCw4Myw2NjE5OCw4Myw2NjU5Miw4MywxMTk4NTMsMTE2LDExOTkwNSwxMTYsMTE5OTU3LDExNiwxMjAwMDksMTE2LDEyMDA2MSwxMTYsMTIwMTEzLDExNiwxMjAxNjUsMTE2LDEyMDIxNywxMTYsMTIwMjY5LDExNiwxMjAzMjEsMTE2LDEyMDM3MywxMTYsMTIwNDI1LDExNiwxMjA0NzcsMTE2LDg4NjgsODQsMTAyMDEsODQsMTI4ODcyLDg0LDY1MzMyLDg0LDExOTgyNyw4NCwxMTk4NzksODQsMTE5OTMxLDg0LDExOTk4Myw4NCwxMjAwMzUsODQsMTIwMDg3LDg0LDEyMDEzOSw4NCwxMjAxOTEsODQsMTIwMjQzLDg0LDEyMDI5NSw4NCwxMjAzNDcsODQsMTIwMzk5LDg0LDEyMDQ1MSw4NCw5MzIsODQsMTIwNTA3LDg0LDEyMDU2NSw4NCwxMjA2MjMsODQsMTIwNjgxLDg0LDEyMDczOSw4NCwxMTQzMCw4NCw1MDI2LDg0LDQyMTk2LDg0LDkzOTYyLDg0LDcxODY4LDg0LDY2MTk5LDg0LDY2MjI1LDg0LDY2MzI1LDg0LDExOTg1NCwxMTcsMTE5OTA2LDExNywxMTk5NTgsMTE3LDEyMDAxMCwxMTcsMTIwMDYyLDExNywxMjAxMTQsMTE3LDEyMDE2NiwxMTcsMTIwMjE4LDExNywxMjAyNzAsMTE3LDEyMDMyMiwxMTcsMTIwMzc0LDExNywxMjA0MjYsMTE3LDEyMDQ3OCwxMTcsNDI5MTEsMTE3LDc0NTIsMTE3LDQzODU0LDExNyw0Mzg1OCwxMTcsNjUxLDExNyw5NjUsMTE3LDEyMDUzNCwxMTcsMTIwNTkyLDExNywxMjA2NTAsMTE3LDEyMDcwOCwxMTcsMTIwNzY2LDExNywxNDA1LDExNyw2NjgwNiwxMTcsNzE4OTYsMTE3LDg3NDYsODUsODg5OSw4NSwxMTk4MjgsODUsMTE5ODgwLDg1LDExOTkzMiw4NSwxMTk5ODQsODUsMTIwMDM2LDg1LDEyMDA4OCw4NSwxMjAxNDAsODUsMTIwMTkyLDg1LDEyMDI0NCw4NSwxMjAyOTYsODUsMTIwMzQ4LDg1LDEyMDQwMCw4NSwxMjA0NTIsODUsMTM1Nyw4NSw0NjA4LDg1LDY2NzY2LDg1LDUxOTYsODUsNDIyMjgsODUsOTQwMTgsODUsNzE4NjQsODUsODc0NCwxMTgsODg5NywxMTgsNjUzNjYsMTE4LDg1NjQsMTE4LDExOTg1NSwxMTgsMTE5OTA3LDExOCwxMTk5NTksMTE4LDEyMDAxMSwxMTgsMTIwMDYzLDExOCwxMjAxMTUsMTE4LDEyMDE2NywxMTgsMTIwMjE5LDExOCwxMjAyNzEsMTE4LDEyMDMyMywxMTgsMTIwMzc1LDExOCwxMjA0MjcsMTE4LDEyMDQ3OSwxMTgsNzQ1NiwxMTgsOTU3LDExOCwxMjA1MjYsMTE4LDEyMDU4NCwxMTgsMTIwNjQyLDExOCwxMjA3MDAsMTE4LDEyMDc1OCwxMTgsMTE0MSwxMTgsMTQ5NiwxMTgsNzE0MzAsMTE4LDQzOTQ1LDExOCw3MTg3MiwxMTgsMTE5MzA5LDg2LDE2MzksODYsMTc4Myw4Niw4NTQ4LDg2LDExOTgyOSw4NiwxMTk4ODEsODYsMTE5OTMzLDg2LDExOTk4NSw4NiwxMjAwMzcsODYsMTIwMDg5LDg2LDEyMDE0MSw4NiwxMjAxOTMsODYsMTIwMjQ1LDg2LDEyMDI5Nyw4NiwxMjAzNDksODYsMTIwNDAxLDg2LDEyMDQ1Myw4NiwxMTQwLDg2LDExNTc2LDg2LDUwODEsODYsNTE2Nyw4Niw0MjcxOSw4Niw0MjIxNCw4Niw5Mzk2MCw4Niw3MTg0MCw4Niw2Njg0NSw4Niw2MjMsMTE5LDExOTg1NiwxMTksMTE5OTA4LDExOSwxMTk5NjAsMTE5LDEyMDAxMiwxMTksMTIwMDY0LDExOSwxMjAxMTYsMTE5LDEyMDE2OCwxMTksMTIwMjIwLDExOSwxMjAyNzIsMTE5LDEyMDMyNCwxMTksMTIwMzc2LDExOSwxMjA0MjgsMTE5LDEyMDQ4MCwxMTksNzQ1NywxMTksMTEyMSwxMTksMTMwOSwxMTksMTM3NywxMTksNzE0MzQsMTE5LDcxNDM4LDExOSw3MTQzOSwxMTksNDM5MDcsMTE5LDcxOTE5LDg3LDcxOTEwLDg3LDExOTgzMCw4NywxMTk4ODIsODcsMTE5OTM0LDg3LDExOTk4Niw4NywxMjAwMzgsODcsMTIwMDkwLDg3LDEyMDE0Miw4NywxMjAxOTQsODcsMTIwMjQ2LDg3LDEyMDI5OCw4NywxMjAzNTAsODcsMTIwNDAyLDg3LDEyMDQ1NCw4NywxMzA4LDg3LDUwNDMsODcsNTA3Niw4Nyw0MjIxOCw4Nyw1NzQyLDEyMCwxMDUzOSwxMjAsMTA1NDAsMTIwLDEwNzk5LDEyMCw2NTM2OCwxMjAsODU2OSwxMjAsMTE5ODU3LDEyMCwxMTk5MDksMTIwLDExOTk2MSwxMjAsMTIwMDEzLDEyMCwxMjAwNjUsMTIwLDEyMDExNywxMjAsMTIwMTY5LDEyMCwxMjAyMjEsMTIwLDEyMDI3MywxMjAsMTIwMzI1LDEyMCwxMjAzNzcsMTIwLDEyMDQyOSwxMjAsMTIwNDgxLDEyMCw1NDQxLDEyMCw1NTAxLDEyMCw1NzQxLDg4LDk1ODcsODgsNjYzMzgsODgsNzE5MTYsODgsNjUzMzYsODgsODU1Myw4OCwxMTk4MzEsODgsMTE5ODgzLDg4LDExOTkzNSw4OCwxMTk5ODcsODgsMTIwMDM5LDg4LDEyMDA5MSw4OCwxMjAxNDMsODgsMTIwMTk1LDg4LDEyMDI0Nyw4OCwxMjAyOTksODgsMTIwMzUxLDg4LDEyMDQwMyw4OCwxMjA0NTUsODgsNDI5MzEsODgsOTM1LDg4LDEyMDUxMCw4OCwxMjA1NjgsODgsMTIwNjI2LDg4LDEyMDY4NCw4OCwxMjA3NDIsODgsMTE0MzYsODgsMTE2MTMsODgsNTgxNSw4OCw0MjIxOSw4OCw2NjE5Miw4OCw2NjIyOCw4OCw2NjMyNyw4OCw2Njg1NSw4OCw2MTEsMTIxLDc1NjQsMTIxLDY1MzY5LDEyMSwxMTk4NTgsMTIxLDExOTkxMCwxMjEsMTE5OTYyLDEyMSwxMjAwMTQsMTIxLDEyMDA2NiwxMjEsMTIwMTE4LDEyMSwxMjAxNzAsMTIxLDEyMDIyMiwxMjEsMTIwMjc0LDEyMSwxMjAzMjYsMTIxLDEyMDM3OCwxMjEsMTIwNDMwLDEyMSwxMjA0ODIsMTIxLDY1NSwxMjEsNzkzNSwxMjEsNDM4NjYsMTIxLDk0NywxMjEsODUwOSwxMjEsMTIwNTE2LDEyMSwxMjA1NzQsMTIxLDEyMDYzMiwxMjEsMTIwNjkwLDEyMSwxMjA3NDgsMTIxLDExOTksMTIxLDQzMjcsMTIxLDcxOTAwLDEyMSw2NTMzNyw4OSwxMTk4MzIsODksMTE5ODg0LDg5LDExOTkzNiw4OSwxMTk5ODgsODksMTIwMDQwLDg5LDEyMDA5Miw4OSwxMjAxNDQsODksMTIwMTk2LDg5LDEyMDI0OCw4OSwxMjAzMDAsODksMTIwMzUyLDg5LDEyMDQwNCw4OSwxMjA0NTYsODksOTMzLDg5LDk3OCw4OSwxMjA1MDgsODksMTIwNTY2LDg5LDEyMDYyNCw4OSwxMjA2ODIsODksMTIwNzQwLDg5LDExNDMyLDg5LDExOTgsODksNTAzMyw4OSw1MDUzLDg5LDQyMjIwLDg5LDk0MDE5LDg5LDcxODQ0LDg5LDY2MjI2LDg5LDExOTg1OSwxMjIsMTE5OTExLDEyMiwxMTk5NjMsMTIyLDEyMDAxNSwxMjIsMTIwMDY3LDEyMiwxMjAxMTksMTIyLDEyMDE3MSwxMjIsMTIwMjIzLDEyMiwxMjAyNzUsMTIyLDEyMDMyNywxMjIsMTIwMzc5LDEyMiwxMjA0MzEsMTIyLDEyMDQ4MywxMjIsNzQ1OCwxMjIsNDM5MjMsMTIyLDcxODc2LDEyMiw2NjI5Myw5MCw3MTkwOSw5MCw2NTMzOCw5MCw4NDg0LDkwLDg0ODgsOTAsMTE5ODMzLDkwLDExOTg4NSw5MCwxMTk5MzcsOTAsMTE5OTg5LDkwLDEyMDA0MSw5MCwxMjAxOTcsOTAsMTIwMjQ5LDkwLDEyMDMwMSw5MCwxMjAzNTMsOTAsMTIwNDA1LDkwLDEyMDQ1Nyw5MCw5MTgsOTAsMTIwNDkzLDkwLDEyMDU1MSw5MCwxMjA2MDksOTAsMTIwNjY3LDkwLDEyMDcyNSw5MCw1MDU5LDkwLDQyMjA0LDkwLDcxODQ5LDkwLDY1MjgyLDM0LDY1Mjg0LDM2LDY1Mjg1LDM3LDY1Mjg2LDM4LDY1MjkwLDQyLDY1MjkxLDQzLDY1Mjk0LDQ2LDY1Mjk1LDQ3LDY1Mjk2LDQ4LDY1Mjk3LDQ5LDY1Mjk4LDUwLDY1Mjk5LDUxLDY1MzAwLDUyLDY1MzAxLDUzLDY1MzAyLDU0LDY1MzAzLDU1LDY1MzA0LDU2LDY1MzA1LDU3LDY1MzA4LDYwLDY1MzA5LDYxLDY1MzEwLDYyLDY1MzEyLDY0LDY1MzE2LDY4LDY1MzE4LDcwLDY1MzE5LDcxLDY1MzI0LDc2LDY1MzI5LDgxLDY1MzMwLDgyLDY1MzMzLDg1LDY1MzM0LDg2LDY1MzM1LDg3LDY1MzQzLDk1LDY1MzQ2LDk4LDY1MzQ4LDEwMCw2NTM1MCwxMDIsNjUzNTUsMTA3LDY1MzU3LDEwOSw2NTM1OCwxMTAsNjUzNjEsMTEzLDY1MzYyLDExNCw2NTM2NCwxMTYsNjUzNjUsMTE3LDY1MzY3LDExOSw2NTM3MCwxMjIsNjUzNzEsMTIzLDY1MzczLDEyNSwxMTk4NDYsMTA5XSwiX2RlZmF1bHQiOlsxNjAsMzIsODIxMSw0NSw2NTM3NCwxMjYsNjUzMDYsNTgsNjUyODEsMzMsODIxNiw5Niw4MjE3LDk2LDgyNDUsOTYsMTgwLDk2LDEyNDk0LDQ3LDEwNDcsNTEsMTA3Myw1NCwxMDcyLDk3LDEwNDAsNjUsMTA2OCw5OCwxMDQyLDY2LDEwODksOTksMTA1Nyw2NywxMDc3LDEwMSwxMDQ1LDY5LDEwNTMsNzIsMzA1LDEwNSwxMDUwLDc1LDkyMSw3MywxMDUyLDc3LDEwODYsMTExLDEwNTQsNzksMTAwOSwxMTIsMTA4OCwxMTIsMTA1Niw4MCwxMDc1LDExNCwxMDU4LDg0LDIxNSwxMjAsMTA5MywxMjAsMTA2MSw4OCwxMDkxLDEyMSwxMDU5LDg5LDY1MjgzLDM1LDY1Mjg4LDQwLDY1Mjg5LDQxLDY1MjkyLDQ0LDY1MzA3LDU5LDY1MzExLDYzXSwiY3MiOls2NTM3NCwxMjYsNjUzMDYsNTgsNjUyODEsMzMsODIxNiw5Niw4MjE3LDk2LDgyNDUsOTYsMTgwLDk2LDEyNDk0LDQ3LDEwNDcsNTEsMTA3Myw1NCwxMDcyLDk3LDEwNDAsNjUsMTA2OCw5OCwxMDQyLDY2LDEwODksOTksMTA1Nyw2NywxMDc3LDEwMSwxMDQ1LDY5LDEwNTMsNzIsMzA1LDEwNSwxMDUwLDc1LDkyMSw3MywxMDUyLDc3LDEwODYsMTExLDEwNTQsNzksMTAwOSwxMTIsMTA4OCwxMTIsMTA1Niw4MCwxMDc1LDExNCwxMDU4LDg0LDEwOTMsMTIwLDEwNjEsODgsMTA5MSwxMjEsMTA1OSw4OSw2NTI4MywzNSw2NTI4OCw0MCw2NTI4OSw0MSw2NTI5Miw0NCw2NTMwNyw1OSw2NTMxMSw2M10sImRlIjpbNjUzNzQsMTI2LDY1MzA2LDU4LDY1MjgxLDMzLDgyMTYsOTYsODIxNyw5Niw4MjQ1LDk2LDE4MCw5NiwxMjQ5NCw0NywxMDQ3LDUxLDEwNzMsNTQsMTA3Miw5NywxMDQwLDY1LDEwNjgsOTgsMTA0Miw2NiwxMDg5LDk5LDEwNTcsNjcsMTA3NywxMDEsMTA0NSw2OSwxMDUzLDcyLDMwNSwxMDUsMTA1MCw3NSw5MjEsNzMsMTA1Miw3NywxMDg2LDExMSwxMDU0LDc5LDEwMDksMTEyLDEwODgsMTEyLDEwNTYsODAsMTA3NSwxMTQsMTA1OCw4NCwxMDkzLDEyMCwxMDYxLDg4LDEwOTEsMTIxLDEwNTksODksNjUyODMsMzUsNjUyODgsNDAsNjUyODksNDEsNjUyOTIsNDQsNjUzMDcsNTksNjUzMTEsNjNdLCJlcyI6WzgyMTEsNDUsNjUzNzQsMTI2LDY1MzA2LDU4LDY1MjgxLDMzLDgyNDUsOTYsMTgwLDk2LDEyNDk0LDQ3LDEwNDcsNTEsMTA3Myw1NCwxMDcyLDk3LDEwNDAsNjUsMTA2OCw5OCwxMDQyLDY2LDEwODksOTksMTA1Nyw2NywxMDc3LDEwMSwxMDQ1LDY5LDEwNTMsNzIsMzA1LDEwNSwxMDUwLDc1LDEwNTIsNzcsMTA4NiwxMTEsMTA1NCw3OSwxMDA5LDExMiwxMDg4LDExMiwxMDU2LDgwLDEwNzUsMTE0LDEwNTgsODQsMjE1LDEyMCwxMDkzLDEyMCwxMDYxLDg4LDEwOTEsMTIxLDEwNTksODksNjUyODMsMzUsNjUyODgsNDAsNjUyODksNDEsNjUyOTIsNDQsNjUzMDcsNTksNjUzMTEsNjNdLCJmciI6WzY1Mzc0LDEyNiw2NTMwNiw1OCw2NTI4MSwzMyw4MjE2LDk2LDgyNDUsOTYsMTI0OTQsNDcsMTA0Nyw1MSwxMDczLDU0LDEwNzIsOTcsMTA0MCw2NSwxMDY4LDk4LDEwNDIsNjYsMTA4OSw5OSwxMDU3LDY3LDEwNzcsMTAxLDEwNDUsNjksMTA1Myw3MiwzMDUsMTA1LDEwNTAsNzUsOTIxLDczLDEwNTIsNzcsMTA4NiwxMTEsMTA1NCw3OSwxMDA5LDExMiwxMDg4LDExMiwxMDU2LDgwLDEwNzUsMTE0LDEwNTgsODQsMjE1LDEyMCwxMDkzLDEyMCwxMDYxLDg4LDEwOTEsMTIxLDEwNTksODksNjUyODMsMzUsNjUyODgsNDAsNjUyODksNDEsNjUyOTIsNDQsNjUzMDcsNTksNjUzMTEsNjNdLCJpdCI6WzE2MCwzMiw4MjExLDQ1LDY1Mzc0LDEyNiw2NTMwNiw1OCw2NTI4MSwzMyw4MjE2LDk2LDgyNDUsOTYsMTgwLDk2LDEyNDk0LDQ3LDEwNDcsNTEsMTA3Myw1NCwxMDcyLDk3LDEwNDAsNjUsMTA2OCw5OCwxMDQyLDY2LDEwODksOTksMTA1Nyw2NywxMDc3LDEwMSwxMDQ1LDY5LDEwNTMsNzIsMzA1LDEwNSwxMDUwLDc1LDkyMSw3MywxMDUyLDc3LDEwODYsMTExLDEwNTQsNzksMTAwOSwxMTIsMTA4OCwxMTIsMTA1Niw4MCwxMDc1LDExNCwxMDU4LDg0LDIxNSwxMjAsMTA5MywxMjAsMTA2MSw4OCwxMDkxLDEyMSwxMDU5LDg5LDY1MjgzLDM1LDY1Mjg4LDQwLDY1Mjg5LDQxLDY1MjkyLDQ0LDY1MzA3LDU5LDY1MzExLDYzXSwiamEiOls4MjExLDQ1LDY1MzA2LDU4LDY1MjgxLDMzLDgyMTYsOTYsODIxNyw5Niw4MjQ1LDk2LDE4MCw5NiwxMDQ3LDUxLDEwNzMsNTQsMTA3Miw5NywxMDQwLDY1LDEwNjgsOTgsMTA0Miw2NiwxMDg5LDk5LDEwNTcsNjcsMTA3NywxMDEsMTA0NSw2OSwxMDUzLDcyLDMwNSwxMDUsMTA1MCw3NSw5MjEsNzMsMTA1Miw3NywxMDg2LDExMSwxMDU0LDc5LDEwMDksMTEyLDEwODgsMTEyLDEwNTYsODAsMTA3NSwxMTQsMTA1OCw4NCwyMTUsMTIwLDEwOTMsMTIwLDEwNjEsODgsMTA5MSwxMjEsMTA1OSw4OSw2NTI4MywzNSw2NTI5Miw0NCw2NTMwNyw1OV0sImtvIjpbODIxMSw0NSw2NTM3NCwxMjYsNjUzMDYsNTgsNjUyODEsMzMsODI0NSw5NiwxODAsOTYsMTI0OTQsNDcsMTA0Nyw1MSwxMDczLDU0LDEwNzIsOTcsMTA0MCw2NSwxMDY4LDk4LDEwNDIsNjYsMTA4OSw5OSwxMDU3LDY3LDEwNzcsMTAxLDEwNDUsNjksMTA1Myw3MiwzMDUsMTA1LDEwNTAsNzUsOTIxLDczLDEwNTIsNzcsMTA4NiwxMTEsMTA1NCw3OSwxMDA5LDExMiwxMDg4LDExMiwxMDU2LDgwLDEwNzUsMTE0LDEwNTgsODQsMjE1LDEyMCwxMDkzLDEyMCwxMDYxLDg4LDEwOTEsMTIxLDEwNTksODksNjUyODMsMzUsNjUyODgsNDAsNjUyODksNDEsNjUyOTIsNDQsNjUzMDcsNTksNjUzMTEsNjNdLCJwbCI6WzY1Mzc0LDEyNiw2NTMwNiw1OCw2NTI4MSwzMyw4MjE2LDk2LDgyMTcsOTYsODI0NSw5NiwxODAsOTYsMTI0OTQsNDcsMTA0Nyw1MSwxMDczLDU0LDEwNzIsOTcsMTA0MCw2NSwxMDY4LDk4LDEwNDIsNjYsMTA4OSw5OSwxMDU3LDY3LDEwNzcsMTAxLDEwNDUsNjksMTA1Myw3MiwzMDUsMTA1LDEwNTAsNzUsOTIxLDczLDEwNTIsNzcsMTA4NiwxMTEsMTA1NCw3OSwxMDA5LDExMiwxMDg4LDExMiwxMDU2LDgwLDEwNzUsMTE0LDEwNTgsODQsMjE1LDEyMCwxMDkzLDEyMCwxMDYxLDg4LDEwOTEsMTIxLDEwNTksODksNjUyODMsMzUsNjUyODgsNDAsNjUyODksNDEsNjUyOTIsNDQsNjUzMDcsNTksNjUzMTEsNjNdLCJwdC1CUiI6WzY1Mzc0LDEyNiw2NTMwNiw1OCw2NTI4MSwzMyw4MjE2LDk2LDgyMTcsOTYsODI0NSw5NiwxODAsOTYsMTI0OTQsNDcsMTA0Nyw1MSwxMDczLDU0LDEwNzIsOTcsMTA0MCw2NSwxMDY4LDk4LDEwNDIsNjYsMTA4OSw5OSwxMDU3LDY3LDEwNzcsMTAxLDEwNDUsNjksMTA1Myw3MiwzMDUsMTA1LDEwNTAsNzUsOTIxLDczLDEwNTIsNzcsMTA4NiwxMTEsMTA1NCw3OSwxMDA5LDExMiwxMDg4LDExMiwxMDU2LDgwLDEwNzUsMTE0LDEwNTgsODQsMjE1LDEyMCwxMDkzLDEyMCwxMDYxLDg4LDEwOTEsMTIxLDEwNTksODksNjUyODMsMzUsNjUyODgsNDAsNjUyODksNDEsNjUyOTIsNDQsNjUzMDcsNTksNjUzMTEsNjNdLCJxcHMtcGxvYyI6WzE2MCwzMiw4MjExLDQ1LDY1Mzc0LDEyNiw2NTMwNiw1OCw2NTI4MSwzMyw4MjE2LDk2LDgyMTcsOTYsODI0NSw5NiwxODAsOTYsMTI0OTQsNDcsMTA0Nyw1MSwxMDczLDU0LDEwNzIsOTcsMTA0MCw2NSwxMDY4LDk4LDEwNDIsNjYsMTA4OSw5OSwxMDU3LDY3LDEwNzcsMTAxLDEwNDUsNjksMTA1Myw3MiwzMDUsMTA1LDEwNTAsNzUsOTIxLDczLDEwNTIsNzcsMTA4NiwxMTEsMTA1NCw3OSwxMDg4LDExMiwxMDU2LDgwLDEwNzUsMTE0LDEwNTgsODQsMjE1LDEyMCwxMDkzLDEyMCwxMDYxLDg4LDEwOTEsMTIxLDEwNTksODksNjUyODMsMzUsNjUyODgsNDAsNjUyODksNDEsNjUyOTIsNDQsNjUzMDcsNTksNjUzMTEsNjNdLCJydSI6WzY1Mzc0LDEyNiw2NTMwNiw1OCw2NTI4MSwzMyw4MjE2LDk2LDgyMTcsOTYsODI0NSw5NiwxODAsOTYsMTI0OTQsNDcsMzA1LDEwNSw5MjEsNzMsMTAwOSwxMTIsMjE1LDEyMCw2NTI4MywzNSw2NTI4OCw0MCw2NTI4OSw0MSw2NTI5Miw0NCw2NTMwNyw1OSw2NTMxMSw2M10sInRyIjpbMTYwLDMyLDgyMTEsNDUsNjUzNzQsMTI2LDY1MzA2LDU4LDY1MjgxLDMzLDgyNDUsOTYsMTgwLDk2LDEyNDk0LDQ3LDEwNDcsNTEsMTA3Myw1NCwxMDcyLDk3LDEwNDAsNjUsMTA2OCw5OCwxMDQyLDY2LDEwODksOTksMTA1Nyw2NywxMDc3LDEwMSwxMDQ1LDY5LDEwNTMsNzIsMTA1MCw3NSw5MjEsNzMsMTA1Miw3NywxMDg2LDExMSwxMDU0LDc5LDEwMDksMTEyLDEwODgsMTEyLDEwNTYsODAsMTA3NSwxMTQsMTA1OCw4NCwyMTUsMTIwLDEwOTMsMTIwLDEwNjEsODgsMTA5MSwxMjEsMTA1OSw4OSw2NTI4MywzNSw2NTI4OCw0MCw2NTI4OSw0MSw2NTI5Miw0NCw2NTMwNyw1OSw2NTMxMSw2M10sInpoLWhhbnMiOls2NTM3NCwxMjYsNjUzMDYsNTgsNjUyODEsMzMsODI0NSw5NiwxODAsOTYsMTI0OTQsNDcsMTA0Nyw1MSwxMDczLDU0LDEwNzIsOTcsMTA0MCw2NSwxMDY4LDk4LDEwNDIsNjYsMTA4OSw5OSwxMDU3LDY3LDEwNzcsMTAxLDEwNDUsNjksMTA1Myw3MiwzMDUsMTA1LDEwNTAsNzUsOTIxLDczLDEwNTIsNzcsMTA4NiwxMTEsMTA1NCw3OSwxMDA5LDExMiwxMDg4LDExMiwxMDU2LDgwLDEwNzUsMTE0LDEwNTgsODQsMjE1LDEyMCwxMDkzLDEyMCwxMDYxLDg4LDEwOTEsMTIxLDEwNTksODksNjUyODgsNDAsNjUyODksNDFdLCJ6aC1oYW50IjpbODIxMSw0NSw2NTM3NCwxMjYsMTgwLDk2LDEyNDk0LDQ3LDEwNDcsNTEsMTA3Myw1NCwxMDcyLDk3LDEwNDAsNjUsMTA2OCw5OCwxMDQyLDY2LDEwODksOTksMTA1Nyw2NywxMDc3LDEwMSwxMDQ1LDY5LDEwNTMsNzIsMzA1LDEwNSwxMDUwLDc1LDkyMSw3MywxMDUyLDc3LDEwODYsMTExLDEwNTQsNzksMTAwOSwxMTIsMTA4OCwxMTIsMTA1Niw4MCwxMDc1LDExNCwxMDU4LDg0LDIxNSwxMjAsMTA5MywxMjAsMTA2MSw4OCwxMDkxLDEyMSwxMDU5LDg5LDY1MjgzLDM1LDY1MzA3LDU5XX0nKSksTmUuY2FjaGU9bmV3IFNzKHtnZXRDYWNoZUtleTpKU09OLnN0cmluZ2lmeX0sZT0+e2Z1bmN0aW9uIHQoYyl7Y29uc3QgZj1uZXcgTWFwO2ZvcihsZXQgaD0wO2g8Yy5sZW5ndGg7aCs9MilmLnNldChjW2hdLGNbaCsxXSk7cmV0dXJuIGZ9ZnVuY3Rpb24gbihjLGYpe2NvbnN0IGg9bmV3IE1hcChjKTtmb3IoY29uc3RbZCxtXW9mIGYpaC5zZXQoZCxtKTtyZXR1cm4gaH1mdW5jdGlvbiByKGMsZil7aWYoIWMpcmV0dXJuIGY7Y29uc3QgaD1uZXcgTWFwO2Zvcihjb25zdFtkLG1db2YgYylmLmhhcyhkKSYmaC5zZXQoZCxtKTtyZXR1cm4gaH1jb25zdCBzPWtlLmFtYmlndW91c0NoYXJhY3RlckRhdGEudmFsdWU7bGV0IGk9ZS5maWx0ZXIoYz0+IWMuc3RhcnRzV2l0aCgiXyIpJiZjIGluIHMpO2kubGVuZ3RoPT09MCYmKGk9WyJfZGVmYXVsdCJdKTtsZXQgbztmb3IoY29uc3QgYyBvZiBpKXtjb25zdCBmPXQoc1tjXSk7bz1yKG8sZil9Y29uc3QgbD10KHMuX2NvbW1vbiksdT1uKGwsbyk7cmV0dXJuIG5ldyBrZSh1KX0pLE5lLl9sb2NhbGVzPW5ldyB0bigoKT0+T2JqZWN0LmtleXMoa2UuYW1iaWd1b3VzQ2hhcmFjdGVyRGF0YS52YWx1ZSkuZmlsdGVyKGU9PiFlLnN0YXJ0c1dpdGgoIl8iKSkpO2NsYXNzIGRle3N0YXRpYyBnZXRSYXdEYXRhKCl7cmV0dXJuIEpTT04ucGFyc2UoIls5LDEwLDExLDEyLDEzLDMyLDEyNywxNjAsMTczLDg0NywxNTY0LDQ0NDcsNDQ0OCw2MDY4LDYwNjksNjE1NSw2MTU2LDYxNTcsNjE1OCw3MzU1LDczNTYsODE5Miw4MTkzLDgxOTQsODE5NSw4MTk2LDgxOTcsODE5OCw4MTk5LDgyMDAsODIwMSw4MjAyLDgyMDMsODIwNCw4MjA1LDgyMDYsODIwNyw4MjM0LDgyMzUsODIzNiw4MjM3LDgyMzgsODIzOSw4Mjg3LDgyODgsODI4OSw4MjkwLDgyOTEsODI5Miw4MjkzLDgyOTQsODI5NSw4Mjk2LDgyOTcsODI5OCw4Mjk5LDgzMDAsODMwMSw4MzAyLDgzMDMsMTAyNDAsMTIyODgsMTI2NDQsNjUwMjQsNjUwMjUsNjUwMjYsNjUwMjcsNjUwMjgsNjUwMjksNjUwMzAsNjUwMzEsNjUwMzIsNjUwMzMsNjUwMzQsNjUwMzUsNjUwMzYsNjUwMzcsNjUwMzgsNjUwMzksNjUyNzksNjU0NDAsNjU1MjAsNjU1MjEsNjU1MjIsNjU1MjMsNjU1MjQsNjU1MjUsNjU1MjYsNjU1MjcsNjU1MjgsNjU1MzIsNzg4NDQsMTE5MTU1LDExOTE1NiwxMTkxNTcsMTE5MTU4LDExOTE1OSwxMTkxNjAsMTE5MTYxLDExOTE2Miw5MTc1MDQsOTE3NTA1LDkxNzUwNiw5MTc1MDcsOTE3NTA4LDkxNzUwOSw5MTc1MTAsOTE3NTExLDkxNzUxMiw5MTc1MTMsOTE3NTE0LDkxNzUxNSw5MTc1MTYsOTE3NTE3LDkxNzUxOCw5MTc1MTksOTE3NTIwLDkxNzUyMSw5MTc1MjIsOTE3NTIzLDkxNzUyNCw5MTc1MjUsOTE3NTI2LDkxNzUyNyw5MTc1MjgsOTE3NTI5LDkxNzUzMCw5MTc1MzEsOTE3NTMyLDkxNzUzMyw5MTc1MzQsOTE3NTM1LDkxNzUzNiw5MTc1MzcsOTE3NTM4LDkxNzUzOSw5MTc1NDAsOTE3NTQxLDkxNzU0Miw5MTc1NDMsOTE3NTQ0LDkxNzU0NSw5MTc1NDYsOTE3NTQ3LDkxNzU0OCw5MTc1NDksOTE3NTUwLDkxNzU1MSw5MTc1NTIsOTE3NTUzLDkxNzU1NCw5MTc1NTUsOTE3NTU2LDkxNzU1Nyw5MTc1NTgsOTE3NTU5LDkxNzU2MCw5MTc1NjEsOTE3NTYyLDkxNzU2Myw5MTc1NjQsOTE3NTY1LDkxNzU2Niw5MTc1NjcsOTE3NTY4LDkxNzU2OSw5MTc1NzAsOTE3NTcxLDkxNzU3Miw5MTc1NzMsOTE3NTc0LDkxNzU3NSw5MTc1NzYsOTE3NTc3LDkxNzU3OCw5MTc1NzksOTE3NTgwLDkxNzU4MSw5MTc1ODIsOTE3NTgzLDkxNzU4NCw5MTc1ODUsOTE3NTg2LDkxNzU4Nyw5MTc1ODgsOTE3NTg5LDkxNzU5MCw5MTc1OTEsOTE3NTkyLDkxNzU5Myw5MTc1OTQsOTE3NTk1LDkxNzU5Niw5MTc1OTcsOTE3NTk4LDkxNzU5OSw5MTc2MDAsOTE3NjAxLDkxNzYwMiw5MTc2MDMsOTE3NjA0LDkxNzYwNSw5MTc2MDYsOTE3NjA3LDkxNzYwOCw5MTc2MDksOTE3NjEwLDkxNzYxMSw5MTc2MTIsOTE3NjEzLDkxNzYxNCw5MTc2MTUsOTE3NjE2LDkxNzYxNyw5MTc2MTgsOTE3NjE5LDkxNzYyMCw5MTc2MjEsOTE3NjIyLDkxNzYyMyw5MTc2MjQsOTE3NjI1LDkxNzYyNiw5MTc2MjcsOTE3NjI4LDkxNzYyOSw5MTc2MzAsOTE3NjMxLDkxNzc2MCw5MTc3NjEsOTE3NzYyLDkxNzc2Myw5MTc3NjQsOTE3NzY1LDkxNzc2Niw5MTc3NjcsOTE3NzY4LDkxNzc2OSw5MTc3NzAsOTE3NzcxLDkxNzc3Miw5MTc3NzMsOTE3Nzc0LDkxNzc3NSw5MTc3NzYsOTE3Nzc3LDkxNzc3OCw5MTc3NzksOTE3NzgwLDkxNzc4MSw5MTc3ODIsOTE3NzgzLDkxNzc4NCw5MTc3ODUsOTE3Nzg2LDkxNzc4Nyw5MTc3ODgsOTE3Nzg5LDkxNzc5MCw5MTc3OTEsOTE3NzkyLDkxNzc5Myw5MTc3OTQsOTE3Nzk1LDkxNzc5Niw5MTc3OTcsOTE3Nzk4LDkxNzc5OSw5MTc4MDAsOTE3ODAxLDkxNzgwMiw5MTc4MDMsOTE3ODA0LDkxNzgwNSw5MTc4MDYsOTE3ODA3LDkxNzgwOCw5MTc4MDksOTE3ODEwLDkxNzgxMSw5MTc4MTIsOTE3ODEzLDkxNzgxNCw5MTc4MTUsOTE3ODE2LDkxNzgxNyw5MTc4MTgsOTE3ODE5LDkxNzgyMCw5MTc4MjEsOTE3ODIyLDkxNzgyMyw5MTc4MjQsOTE3ODI1LDkxNzgyNiw5MTc4MjcsOTE3ODI4LDkxNzgyOSw5MTc4MzAsOTE3ODMxLDkxNzgzMiw5MTc4MzMsOTE3ODM0LDkxNzgzNSw5MTc4MzYsOTE3ODM3LDkxNzgzOCw5MTc4MzksOTE3ODQwLDkxNzg0MSw5MTc4NDIsOTE3ODQzLDkxNzg0NCw5MTc4NDUsOTE3ODQ2LDkxNzg0Nyw5MTc4NDgsOTE3ODQ5LDkxNzg1MCw5MTc4NTEsOTE3ODUyLDkxNzg1Myw5MTc4NTQsOTE3ODU1LDkxNzg1Niw5MTc4NTcsOTE3ODU4LDkxNzg1OSw5MTc4NjAsOTE3ODYxLDkxNzg2Miw5MTc4NjMsOTE3ODY0LDkxNzg2NSw5MTc4NjYsOTE3ODY3LDkxNzg2OCw5MTc4NjksOTE3ODcwLDkxNzg3MSw5MTc4NzIsOTE3ODczLDkxNzg3NCw5MTc4NzUsOTE3ODc2LDkxNzg3Nyw5MTc4NzgsOTE3ODc5LDkxNzg4MCw5MTc4ODEsOTE3ODgyLDkxNzg4Myw5MTc4ODQsOTE3ODg1LDkxNzg4Niw5MTc4ODcsOTE3ODg4LDkxNzg4OSw5MTc4OTAsOTE3ODkxLDkxNzg5Miw5MTc4OTMsOTE3ODk0LDkxNzg5NSw5MTc4OTYsOTE3ODk3LDkxNzg5OCw5MTc4OTksOTE3OTAwLDkxNzkwMSw5MTc5MDIsOTE3OTAzLDkxNzkwNCw5MTc5MDUsOTE3OTA2LDkxNzkwNyw5MTc5MDgsOTE3OTA5LDkxNzkxMCw5MTc5MTEsOTE3OTEyLDkxNzkxMyw5MTc5MTQsOTE3OTE1LDkxNzkxNiw5MTc5MTcsOTE3OTE4LDkxNzkxOSw5MTc5MjAsOTE3OTIxLDkxNzkyMiw5MTc5MjMsOTE3OTI0LDkxNzkyNSw5MTc5MjYsOTE3OTI3LDkxNzkyOCw5MTc5MjksOTE3OTMwLDkxNzkzMSw5MTc5MzIsOTE3OTMzLDkxNzkzNCw5MTc5MzUsOTE3OTM2LDkxNzkzNyw5MTc5MzgsOTE3OTM5LDkxNzk0MCw5MTc5NDEsOTE3OTQyLDkxNzk0Myw5MTc5NDQsOTE3OTQ1LDkxNzk0Niw5MTc5NDcsOTE3OTQ4LDkxNzk0OSw5MTc5NTAsOTE3OTUxLDkxNzk1Miw5MTc5NTMsOTE3OTU0LDkxNzk1NSw5MTc5NTYsOTE3OTU3LDkxNzk1OCw5MTc5NTksOTE3OTYwLDkxNzk2MSw5MTc5NjIsOTE3OTYzLDkxNzk2NCw5MTc5NjUsOTE3OTY2LDkxNzk2Nyw5MTc5NjgsOTE3OTY5LDkxNzk3MCw5MTc5NzEsOTE3OTcyLDkxNzk3Myw5MTc5NzQsOTE3OTc1LDkxNzk3Niw5MTc5NzcsOTE3OTc4LDkxNzk3OSw5MTc5ODAsOTE3OTgxLDkxNzk4Miw5MTc5ODMsOTE3OTg0LDkxNzk4NSw5MTc5ODYsOTE3OTg3LDkxNzk4OCw5MTc5ODksOTE3OTkwLDkxNzk5MSw5MTc5OTIsOTE3OTkzLDkxNzk5NCw5MTc5OTUsOTE3OTk2LDkxNzk5Nyw5MTc5OTgsOTE3OTk5XSIpfXN0YXRpYyBnZXREYXRhKCl7cmV0dXJuIHRoaXMuX2RhdGF8fCh0aGlzLl9kYXRhPW5ldyBTZXQoZGUuZ2V0UmF3RGF0YSgpKSksdGhpcy5fZGF0YX1zdGF0aWMgaXNJbnZpc2libGVDaGFyYWN0ZXIodCl7cmV0dXJuIGRlLmdldERhdGEoKS5oYXModCl9c3RhdGljIGdldCBjb2RlUG9pbnRzKCl7cmV0dXJuIGRlLmdldERhdGEoKX19ZGUuX2RhdGE9dm9pZCAwO2NvbnN0IERzPSIkaW5pdGlhbGl6ZSI7Y2xhc3MgVHN7Y29uc3RydWN0b3IodCxuLHIscyl7dGhpcy52c1dvcmtlcj10LHRoaXMucmVxPW4sdGhpcy5tZXRob2Q9cix0aGlzLmFyZ3M9cyx0aGlzLnR5cGU9MH19Y2xhc3Mgcm57Y29uc3RydWN0b3IodCxuLHIscyl7dGhpcy52c1dvcmtlcj10LHRoaXMuc2VxPW4sdGhpcy5yZXM9cix0aGlzLmVycj1zLHRoaXMudHlwZT0xfX1jbGFzcyBWc3tjb25zdHJ1Y3Rvcih0LG4scixzKXt0aGlzLnZzV29ya2VyPXQsdGhpcy5yZXE9bix0aGlzLmV2ZW50TmFtZT1yLHRoaXMuYXJnPXMsdGhpcy50eXBlPTJ9fWNsYXNzIElze2NvbnN0cnVjdG9yKHQsbixyKXt0aGlzLnZzV29ya2VyPXQsdGhpcy5yZXE9bix0aGlzLmV2ZW50PXIsdGhpcy50eXBlPTN9fWNsYXNzIEJze2NvbnN0cnVjdG9yKHQsbil7dGhpcy52c1dvcmtlcj10LHRoaXMucmVxPW4sdGhpcy50eXBlPTR9fWNsYXNzIHFze2NvbnN0cnVjdG9yKHQpe3RoaXMuX3dvcmtlcklkPS0xLHRoaXMuX2hhbmRsZXI9dCx0aGlzLl9sYXN0U2VudFJlcT0wLHRoaXMuX3BlbmRpbmdSZXBsaWVzPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5fcGVuZGluZ0VtaXR0ZXJzPW5ldyBNYXAsdGhpcy5fcGVuZGluZ0V2ZW50cz1uZXcgTWFwfXNldFdvcmtlcklkKHQpe3RoaXMuX3dvcmtlcklkPXR9c2VuZE1lc3NhZ2UodCxuKXtjb25zdCByPVN0cmluZygrK3RoaXMuX2xhc3RTZW50UmVxKTtyZXR1cm4gbmV3IFByb21pc2UoKHMsaSk9Pnt0aGlzLl9wZW5kaW5nUmVwbGllc1tyXT17cmVzb2x2ZTpzLHJlamVjdDppfSx0aGlzLl9zZW5kKG5ldyBUcyh0aGlzLl93b3JrZXJJZCxyLHQsbikpfSl9bGlzdGVuKHQsbil7bGV0IHI9bnVsbDtjb25zdCBzPW5ldyBzZSh7b25XaWxsQWRkRmlyc3RMaXN0ZW5lcjooKT0+e3I9U3RyaW5nKCsrdGhpcy5fbGFzdFNlbnRSZXEpLHRoaXMuX3BlbmRpbmdFbWl0dGVycy5zZXQocixzKSx0aGlzLl9zZW5kKG5ldyBWcyh0aGlzLl93b3JrZXJJZCxyLHQsbikpfSxvbkRpZFJlbW92ZUxhc3RMaXN0ZW5lcjooKT0+e3RoaXMuX3BlbmRpbmdFbWl0dGVycy5kZWxldGUociksdGhpcy5fc2VuZChuZXcgQnModGhpcy5fd29ya2VySWQscikpLHI9bnVsbH19KTtyZXR1cm4gcy5ldmVudH1oYW5kbGVNZXNzYWdlKHQpeyF0fHwhdC52c1dvcmtlcnx8dGhpcy5fd29ya2VySWQhPT0tMSYmdC52c1dvcmtlciE9PXRoaXMuX3dvcmtlcklkfHx0aGlzLl9oYW5kbGVNZXNzYWdlKHQpfV9oYW5kbGVNZXNzYWdlKHQpe3N3aXRjaCh0LnR5cGUpe2Nhc2UgMTpyZXR1cm4gdGhpcy5faGFuZGxlUmVwbHlNZXNzYWdlKHQpO2Nhc2UgMDpyZXR1cm4gdGhpcy5faGFuZGxlUmVxdWVzdE1lc3NhZ2UodCk7Y2FzZSAyOnJldHVybiB0aGlzLl9oYW5kbGVTdWJzY3JpYmVFdmVudE1lc3NhZ2UodCk7Y2FzZSAzOnJldHVybiB0aGlzLl9oYW5kbGVFdmVudE1lc3NhZ2UodCk7Y2FzZSA0OnJldHVybiB0aGlzLl9oYW5kbGVVbnN1YnNjcmliZUV2ZW50TWVzc2FnZSh0KX19X2hhbmRsZVJlcGx5TWVzc2FnZSh0KXtpZighdGhpcy5fcGVuZGluZ1JlcGxpZXNbdC5zZXFdKXtjb25zb2xlLndhcm4oIkdvdCByZXBseSB0byB1bmtub3duIHNlcSIpO3JldHVybn1jb25zdCBuPXRoaXMuX3BlbmRpbmdSZXBsaWVzW3Quc2VxXTtpZihkZWxldGUgdGhpcy5fcGVuZGluZ1JlcGxpZXNbdC5zZXFdLHQuZXJyKXtsZXQgcj10LmVycjt0LmVyci4kaXNFcnJvciYmKHI9bmV3IEVycm9yLHIubmFtZT10LmVyci5uYW1lLHIubWVzc2FnZT10LmVyci5tZXNzYWdlLHIuc3RhY2s9dC5lcnIuc3RhY2spLG4ucmVqZWN0KHIpO3JldHVybn1uLnJlc29sdmUodC5yZXMpfV9oYW5kbGVSZXF1ZXN0TWVzc2FnZSh0KXtjb25zdCBuPXQucmVxO3RoaXMuX2hhbmRsZXIuaGFuZGxlTWVzc2FnZSh0Lm1ldGhvZCx0LmFyZ3MpLnRoZW4ocz0+e3RoaXMuX3NlbmQobmV3IHJuKHRoaXMuX3dvcmtlcklkLG4scyx2b2lkIDApKX0scz0+e3MuZGV0YWlsIGluc3RhbmNlb2YgRXJyb3ImJihzLmRldGFpbD1adChzLmRldGFpbCkpLHRoaXMuX3NlbmQobmV3IHJuKHRoaXMuX3dvcmtlcklkLG4sdm9pZCAwLFp0KHMpKSl9KX1faGFuZGxlU3Vic2NyaWJlRXZlbnRNZXNzYWdlKHQpe2NvbnN0IG49dC5yZXEscj10aGlzLl9oYW5kbGVyLmhhbmRsZUV2ZW50KHQuZXZlbnROYW1lLHQuYXJnKShzPT57dGhpcy5fc2VuZChuZXcgSXModGhpcy5fd29ya2VySWQsbixzKSl9KTt0aGlzLl9wZW5kaW5nRXZlbnRzLnNldChuLHIpfV9oYW5kbGVFdmVudE1lc3NhZ2UodCl7aWYoIXRoaXMuX3BlbmRpbmdFbWl0dGVycy5oYXModC5yZXEpKXtjb25zb2xlLndhcm4oIkdvdCBldmVudCBmb3IgdW5rbm93biByZXEiKTtyZXR1cm59dGhpcy5fcGVuZGluZ0VtaXR0ZXJzLmdldCh0LnJlcSkuZmlyZSh0LmV2ZW50KX1faGFuZGxlVW5zdWJzY3JpYmVFdmVudE1lc3NhZ2UodCl7aWYoIXRoaXMuX3BlbmRpbmdFdmVudHMuaGFzKHQucmVxKSl7Y29uc29sZS53YXJuKCJHb3QgdW5zdWJzY3JpYmUgZm9yIHVua25vd24gcmVxIik7cmV0dXJufXRoaXMuX3BlbmRpbmdFdmVudHMuZ2V0KHQucmVxKS5kaXNwb3NlKCksdGhpcy5fcGVuZGluZ0V2ZW50cy5kZWxldGUodC5yZXEpfV9zZW5kKHQpe2NvbnN0IG49W107aWYodC50eXBlPT09MClmb3IobGV0IHI9MDtyPHQuYXJncy5sZW5ndGg7cisrKXQuYXJnc1tyXWluc3RhbmNlb2YgQXJyYXlCdWZmZXImJm4ucHVzaCh0LmFyZ3Nbcl0pO2Vsc2UgdC50eXBlPT09MSYmdC5yZXMgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciYmbi5wdXNoKHQucmVzKTt0aGlzLl9oYW5kbGVyLnNlbmRNZXNzYWdlKHQsbil9fWZ1bmN0aW9uIHNuKGUpe3JldHVybiBlWzBdPT09Im8iJiZlWzFdPT09Im4iJiZubihlLmNoYXJDb2RlQXQoMikpfWZ1bmN0aW9uIGFuKGUpe3JldHVybi9eb25EeW5hbWljLy50ZXN0KGUpJiZubihlLmNoYXJDb2RlQXQoOSkpfWZ1bmN0aW9uIFVzKGUsdCxuKXtjb25zdCByPW89PmZ1bmN0aW9uKCl7Y29uc3QgbD1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMCk7cmV0dXJuIHQobyxsKX0scz1vPT5mdW5jdGlvbihsKXtyZXR1cm4gbihvLGwpfSxpPXt9O2Zvcihjb25zdCBvIG9mIGUpe2lmKGFuKG8pKXtpW29dPXMobyk7Y29udGludWV9aWYoc24obykpe2lbb109bihvLHZvaWQgMCk7Y29udGludWV9aVtvXT1yKG8pfXJldHVybiBpfWNsYXNzIEhze2NvbnN0cnVjdG9yKHQsbil7dGhpcy5fcmVxdWVzdEhhbmRsZXJGYWN0b3J5PW4sdGhpcy5fcmVxdWVzdEhhbmRsZXI9bnVsbCx0aGlzLl9wcm90b2NvbD1uZXcgcXMoe3NlbmRNZXNzYWdlOihyLHMpPT57dChyLHMpfSxoYW5kbGVNZXNzYWdlOihyLHMpPT50aGlzLl9oYW5kbGVNZXNzYWdlKHIscyksaGFuZGxlRXZlbnQ6KHIscyk9PnRoaXMuX2hhbmRsZUV2ZW50KHIscyl9KX1vbm1lc3NhZ2UodCl7dGhpcy5fcHJvdG9jb2wuaGFuZGxlTWVzc2FnZSh0KX1faGFuZGxlTWVzc2FnZSh0LG4pe2lmKHQ9PT1EcylyZXR1cm4gdGhpcy5pbml0aWFsaXplKG5bMF0sblsxXSxuWzJdLG5bM10pO2lmKCF0aGlzLl9yZXF1ZXN0SGFuZGxlcnx8dHlwZW9mIHRoaXMuX3JlcXVlc3RIYW5kbGVyW3RdIT0iZnVuY3Rpb24iKXJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIk1pc3NpbmcgcmVxdWVzdEhhbmRsZXIgb3IgbWV0aG9kOiAiK3QpKTt0cnl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9yZXF1ZXN0SGFuZGxlclt0XS5hcHBseSh0aGlzLl9yZXF1ZXN0SGFuZGxlcixuKSl9Y2F0Y2gocil7cmV0dXJuIFByb21pc2UucmVqZWN0KHIpfX1faGFuZGxlRXZlbnQodCxuKXtpZighdGhpcy5fcmVxdWVzdEhhbmRsZXIpdGhyb3cgbmV3IEVycm9yKCJNaXNzaW5nIHJlcXVlc3RIYW5kbGVyIik7aWYoYW4odCkpe2NvbnN0IHI9dGhpcy5fcmVxdWVzdEhhbmRsZXJbdF0uY2FsbCh0aGlzLl9yZXF1ZXN0SGFuZGxlcixuKTtpZih0eXBlb2YgciE9ImZ1bmN0aW9uIil0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgZHluYW1pYyBldmVudCAke3R9IG9uIHJlcXVlc3QgaGFuZGxlci5gKTtyZXR1cm4gcn1pZihzbih0KSl7Y29uc3Qgcj10aGlzLl9yZXF1ZXN0SGFuZGxlclt0XTtpZih0eXBlb2YgciE9ImZ1bmN0aW9uIil0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgZXZlbnQgJHt0fSBvbiByZXF1ZXN0IGhhbmRsZXIuYCk7cmV0dXJuIHJ9dGhyb3cgbmV3IEVycm9yKGBNYWxmb3JtZWQgZXZlbnQgbmFtZSAke3R9YCl9aW5pdGlhbGl6ZSh0LG4scixzKXt0aGlzLl9wcm90b2NvbC5zZXRXb3JrZXJJZCh0KTtjb25zdCBsPVVzKHMsKHUsYyk9PnRoaXMuX3Byb3RvY29sLnNlbmRNZXNzYWdlKHUsYyksKHUsYyk9PnRoaXMuX3Byb3RvY29sLmxpc3Rlbih1LGMpKTtyZXR1cm4gdGhpcy5fcmVxdWVzdEhhbmRsZXJGYWN0b3J5Pyh0aGlzLl9yZXF1ZXN0SGFuZGxlcj10aGlzLl9yZXF1ZXN0SGFuZGxlckZhY3RvcnkobCksUHJvbWlzZS5yZXNvbHZlKHd0KHRoaXMuX3JlcXVlc3RIYW5kbGVyKSkpOihuJiYodHlwZW9mIG4uYmFzZVVybDwidSImJmRlbGV0ZSBuLmJhc2VVcmwsdHlwZW9mIG4ucGF0aHM8InUiJiZ0eXBlb2Ygbi5wYXRocy52czwidSImJmRlbGV0ZSBuLnBhdGhzLnZzLHR5cGVvZiBuLnRydXN0ZWRUeXBlc1BvbGljeTwidSImJmRlbGV0ZSBuLnRydXN0ZWRUeXBlc1BvbGljeSxuLmNhdGNoRXJyb3I9ITAsZ2xvYmFsVGhpcy5yZXF1aXJlLmNvbmZpZyhuKSksbmV3IFByb21pc2UoKHUsYyk9Pntjb25zdCBmPWdsb2JhbFRoaXMucmVxdWlyZTtmKFtyXSxoPT57aWYodGhpcy5fcmVxdWVzdEhhbmRsZXI9aC5jcmVhdGUobCksIXRoaXMuX3JlcXVlc3RIYW5kbGVyKXtjKG5ldyBFcnJvcigiTm8gUmVxdWVzdEhhbmRsZXIhIikpO3JldHVybn11KHd0KHRoaXMuX3JlcXVlc3RIYW5kbGVyKSl9LGMpfSkpfX1jbGFzcyBtZXtjb25zdHJ1Y3Rvcih0LG4scixzKXt0aGlzLm9yaWdpbmFsU3RhcnQ9dCx0aGlzLm9yaWdpbmFsTGVuZ3RoPW4sdGhpcy5tb2RpZmllZFN0YXJ0PXIsdGhpcy5tb2RpZmllZExlbmd0aD1zfWdldE9yaWdpbmFsRW5kKCl7cmV0dXJuIHRoaXMub3JpZ2luYWxTdGFydCt0aGlzLm9yaWdpbmFsTGVuZ3RofWdldE1vZGlmaWVkRW5kKCl7cmV0dXJuIHRoaXMubW9kaWZpZWRTdGFydCt0aGlzLm1vZGlmaWVkTGVuZ3RofX1mdW5jdGlvbiBvbihlLHQpe3JldHVybih0PDw1KS10K2V8MH1mdW5jdGlvbiBXcyhlLHQpe3Q9b24oMTQ5NDE3LHQpO2ZvcihsZXQgbj0wLHI9ZS5sZW5ndGg7bjxyO24rKyl0PW9uKGUuY2hhckNvZGVBdChuKSx0KTtyZXR1cm4gdH1jbGFzcyBsbntjb25zdHJ1Y3Rvcih0KXt0aGlzLnNvdXJjZT10fWdldEVsZW1lbnRzKCl7Y29uc3QgdD10aGlzLnNvdXJjZSxuPW5ldyBJbnQzMkFycmF5KHQubGVuZ3RoKTtmb3IobGV0IHI9MCxzPXQubGVuZ3RoO3I8cztyKyspbltyXT10LmNoYXJDb2RlQXQocik7cmV0dXJuIG59fWZ1bmN0aW9uIHpzKGUsdCxuKXtyZXR1cm4gbmV3IGdlKG5ldyBsbihlKSxuZXcgbG4odCkpLkNvbXB1dGVEaWZmKG4pLmNoYW5nZXN9Y2xhc3MgRmV7c3RhdGljIEFzc2VydCh0LG4pe2lmKCF0KXRocm93IG5ldyBFcnJvcihuKX19Y2xhc3MgUGV7c3RhdGljIENvcHkodCxuLHIscyxpKXtmb3IobGV0IG89MDtvPGk7bysrKXJbcytvXT10W24rb119c3RhdGljIENvcHkyKHQsbixyLHMsaSl7Zm9yKGxldCBvPTA7bzxpO28rKylyW3Mrb109dFtuK29dfX1jbGFzcyB1bntjb25zdHJ1Y3Rvcigpe3RoaXMubV9jaGFuZ2VzPVtdLHRoaXMubV9vcmlnaW5hbFN0YXJ0PTEwNzM3NDE4MjQsdGhpcy5tX21vZGlmaWVkU3RhcnQ9MTA3Mzc0MTgyNCx0aGlzLm1fb3JpZ2luYWxDb3VudD0wLHRoaXMubV9tb2RpZmllZENvdW50PTB9TWFya05leHRDaGFuZ2UoKXsodGhpcy5tX29yaWdpbmFsQ291bnQ+MHx8dGhpcy5tX21vZGlmaWVkQ291bnQ+MCkmJnRoaXMubV9jaGFuZ2VzLnB1c2gobmV3IG1lKHRoaXMubV9vcmlnaW5hbFN0YXJ0LHRoaXMubV9vcmlnaW5hbENvdW50LHRoaXMubV9tb2RpZmllZFN0YXJ0LHRoaXMubV9tb2RpZmllZENvdW50KSksdGhpcy5tX29yaWdpbmFsQ291bnQ9MCx0aGlzLm1fbW9kaWZpZWRDb3VudD0wLHRoaXMubV9vcmlnaW5hbFN0YXJ0PTEwNzM3NDE4MjQsdGhpcy5tX21vZGlmaWVkU3RhcnQ9MTA3Mzc0MTgyNH1BZGRPcmlnaW5hbEVsZW1lbnQodCxuKXt0aGlzLm1fb3JpZ2luYWxTdGFydD1NYXRoLm1pbih0aGlzLm1fb3JpZ2luYWxTdGFydCx0KSx0aGlzLm1fbW9kaWZpZWRTdGFydD1NYXRoLm1pbih0aGlzLm1fbW9kaWZpZWRTdGFydCxuKSx0aGlzLm1fb3JpZ2luYWxDb3VudCsrfUFkZE1vZGlmaWVkRWxlbWVudCh0LG4pe3RoaXMubV9vcmlnaW5hbFN0YXJ0PU1hdGgubWluKHRoaXMubV9vcmlnaW5hbFN0YXJ0LHQpLHRoaXMubV9tb2RpZmllZFN0YXJ0PU1hdGgubWluKHRoaXMubV9tb2RpZmllZFN0YXJ0LG4pLHRoaXMubV9tb2RpZmllZENvdW50Kyt9Z2V0Q2hhbmdlcygpe3JldHVybih0aGlzLm1fb3JpZ2luYWxDb3VudD4wfHx0aGlzLm1fbW9kaWZpZWRDb3VudD4wKSYmdGhpcy5NYXJrTmV4dENoYW5nZSgpLHRoaXMubV9jaGFuZ2VzfWdldFJldmVyc2VDaGFuZ2VzKCl7cmV0dXJuKHRoaXMubV9vcmlnaW5hbENvdW50PjB8fHRoaXMubV9tb2RpZmllZENvdW50PjApJiZ0aGlzLk1hcmtOZXh0Q2hhbmdlKCksdGhpcy5tX2NoYW5nZXMucmV2ZXJzZSgpLHRoaXMubV9jaGFuZ2VzfX1jbGFzcyBnZXtjb25zdHJ1Y3Rvcih0LG4scj1udWxsKXt0aGlzLkNvbnRpbnVlUHJvY2Vzc2luZ1ByZWRpY2F0ZT1yLHRoaXMuX29yaWdpbmFsU2VxdWVuY2U9dCx0aGlzLl9tb2RpZmllZFNlcXVlbmNlPW47Y29uc3RbcyxpLG9dPWdlLl9nZXRFbGVtZW50cyh0KSxbbCx1LGNdPWdlLl9nZXRFbGVtZW50cyhuKTt0aGlzLl9oYXNTdHJpbmdzPW8mJmMsdGhpcy5fb3JpZ2luYWxTdHJpbmdFbGVtZW50cz1zLHRoaXMuX29yaWdpbmFsRWxlbWVudHNPckhhc2g9aSx0aGlzLl9tb2RpZmllZFN0cmluZ0VsZW1lbnRzPWwsdGhpcy5fbW9kaWZpZWRFbGVtZW50c09ySGFzaD11LHRoaXMubV9mb3J3YXJkSGlzdG9yeT1bXSx0aGlzLm1fcmV2ZXJzZUhpc3Rvcnk9W119c3RhdGljIF9pc1N0cmluZ0FycmF5KHQpe3JldHVybiB0Lmxlbmd0aD4wJiZ0eXBlb2YgdFswXT09InN0cmluZyJ9c3RhdGljIF9nZXRFbGVtZW50cyh0KXtjb25zdCBuPXQuZ2V0RWxlbWVudHMoKTtpZihnZS5faXNTdHJpbmdBcnJheShuKSl7Y29uc3Qgcj1uZXcgSW50MzJBcnJheShuLmxlbmd0aCk7Zm9yKGxldCBzPTAsaT1uLmxlbmd0aDtzPGk7cysrKXJbc109V3MobltzXSwwKTtyZXR1cm5bbixyLCEwXX1yZXR1cm4gbiBpbnN0YW5jZW9mIEludDMyQXJyYXk/W1tdLG4sITFdOltbXSxuZXcgSW50MzJBcnJheShuKSwhMV19RWxlbWVudHNBcmVFcXVhbCh0LG4pe3JldHVybiB0aGlzLl9vcmlnaW5hbEVsZW1lbnRzT3JIYXNoW3RdIT09dGhpcy5fbW9kaWZpZWRFbGVtZW50c09ySGFzaFtuXT8hMTp0aGlzLl9oYXNTdHJpbmdzP3RoaXMuX29yaWdpbmFsU3RyaW5nRWxlbWVudHNbdF09PT10aGlzLl9tb2RpZmllZFN0cmluZ0VsZW1lbnRzW25dOiEwfUVsZW1lbnRzQXJlU3RyaWN0RXF1YWwodCxuKXtpZighdGhpcy5FbGVtZW50c0FyZUVxdWFsKHQsbikpcmV0dXJuITE7Y29uc3Qgcj1nZS5fZ2V0U3RyaWN0RWxlbWVudCh0aGlzLl9vcmlnaW5hbFNlcXVlbmNlLHQpLHM9Z2UuX2dldFN0cmljdEVsZW1lbnQodGhpcy5fbW9kaWZpZWRTZXF1ZW5jZSxuKTtyZXR1cm4gcj09PXN9c3RhdGljIF9nZXRTdHJpY3RFbGVtZW50KHQsbil7cmV0dXJuIHR5cGVvZiB0LmdldFN0cmljdEVsZW1lbnQ9PSJmdW5jdGlvbiI/dC5nZXRTdHJpY3RFbGVtZW50KG4pOm51bGx9T3JpZ2luYWxFbGVtZW50c0FyZUVxdWFsKHQsbil7cmV0dXJuIHRoaXMuX29yaWdpbmFsRWxlbWVudHNPckhhc2hbdF0hPT10aGlzLl9vcmlnaW5hbEVsZW1lbnRzT3JIYXNoW25dPyExOnRoaXMuX2hhc1N0cmluZ3M/dGhpcy5fb3JpZ2luYWxTdHJpbmdFbGVtZW50c1t0XT09PXRoaXMuX29yaWdpbmFsU3RyaW5nRWxlbWVudHNbbl06ITB9TW9kaWZpZWRFbGVtZW50c0FyZUVxdWFsKHQsbil7cmV0dXJuIHRoaXMuX21vZGlmaWVkRWxlbWVudHNPckhhc2hbdF0hPT10aGlzLl9tb2RpZmllZEVsZW1lbnRzT3JIYXNoW25dPyExOnRoaXMuX2hhc1N0cmluZ3M/dGhpcy5fbW9kaWZpZWRTdHJpbmdFbGVtZW50c1t0XT09PXRoaXMuX21vZGlmaWVkU3RyaW5nRWxlbWVudHNbbl06ITB9Q29tcHV0ZURpZmYodCl7cmV0dXJuIHRoaXMuX0NvbXB1dGVEaWZmKDAsdGhpcy5fb3JpZ2luYWxFbGVtZW50c09ySGFzaC5sZW5ndGgtMSwwLHRoaXMuX21vZGlmaWVkRWxlbWVudHNPckhhc2gubGVuZ3RoLTEsdCl9X0NvbXB1dGVEaWZmKHQsbixyLHMsaSl7Y29uc3Qgbz1bITFdO2xldCBsPXRoaXMuQ29tcHV0ZURpZmZSZWN1cnNpdmUodCxuLHIscyxvKTtyZXR1cm4gaSYmKGw9dGhpcy5QcmV0dGlmeUNoYW5nZXMobCkpLHtxdWl0RWFybHk6b1swXSxjaGFuZ2VzOmx9fUNvbXB1dGVEaWZmUmVjdXJzaXZlKHQsbixyLHMsaSl7Zm9yKGlbMF09ITE7dDw9biYmcjw9cyYmdGhpcy5FbGVtZW50c0FyZUVxdWFsKHQscik7KXQrKyxyKys7Zm9yKDtuPj10JiZzPj1yJiZ0aGlzLkVsZW1lbnRzQXJlRXF1YWwobixzKTspbi0tLHMtLTtpZih0Pm58fHI+cyl7bGV0IGg7cmV0dXJuIHI8PXM/KEZlLkFzc2VydCh0PT09bisxLCJvcmlnaW5hbFN0YXJ0IHNob3VsZCBvbmx5IGJlIG9uZSBtb3JlIHRoYW4gb3JpZ2luYWxFbmQiKSxoPVtuZXcgbWUodCwwLHIscy1yKzEpXSk6dDw9bj8oRmUuQXNzZXJ0KHI9PT1zKzEsIm1vZGlmaWVkU3RhcnQgc2hvdWxkIG9ubHkgYmUgb25lIG1vcmUgdGhhbiBtb2RpZmllZEVuZCIpLGg9W25ldyBtZSh0LG4tdCsxLHIsMCldKTooRmUuQXNzZXJ0KHQ9PT1uKzEsIm9yaWdpbmFsU3RhcnQgc2hvdWxkIG9ubHkgYmUgb25lIG1vcmUgdGhhbiBvcmlnaW5hbEVuZCIpLEZlLkFzc2VydChyPT09cysxLCJtb2RpZmllZFN0YXJ0IHNob3VsZCBvbmx5IGJlIG9uZSBtb3JlIHRoYW4gbW9kaWZpZWRFbmQiKSxoPVtdKSxofWNvbnN0IG89WzBdLGw9WzBdLHU9dGhpcy5Db21wdXRlUmVjdXJzaW9uUG9pbnQodCxuLHIscyxvLGwsaSksYz1vWzBdLGY9bFswXTtpZih1IT09bnVsbClyZXR1cm4gdTtpZighaVswXSl7Y29uc3QgaD10aGlzLkNvbXB1dGVEaWZmUmVjdXJzaXZlKHQsYyxyLGYsaSk7bGV0IGQ9W107cmV0dXJuIGlbMF0/ZD1bbmV3IG1lKGMrMSxuLShjKzEpKzEsZisxLHMtKGYrMSkrMSldOmQ9dGhpcy5Db21wdXRlRGlmZlJlY3Vyc2l2ZShjKzEsbixmKzEscyxpKSx0aGlzLkNvbmNhdGVuYXRlQ2hhbmdlcyhoLGQpfXJldHVybltuZXcgbWUodCxuLXQrMSxyLHMtcisxKV19V0FMS1RSQUNFKHQsbixyLHMsaSxvLGwsdSxjLGYsaCxkLG0sZyx4LHYsTCxTKXtsZXQgXz1udWxsLE49bnVsbCxwPW5ldyB1bixSPW4seT1yLEU9bVswXS12WzBdLXMscT0tMTA3Mzc0MTgyNCxHPXRoaXMubV9mb3J3YXJkSGlzdG9yeS5sZW5ndGgtMTtkb3tjb25zdCB3PUUrdDt3PT09Unx8dzx5JiZjW3ctMV08Y1t3KzFdPyhoPWNbdysxXSxnPWgtRS1zLGg8cSYmcC5NYXJrTmV4dENoYW5nZSgpLHE9aCxwLkFkZE1vZGlmaWVkRWxlbWVudChoKzEsZyksRT13KzEtdCk6KGg9Y1t3LTFdKzEsZz1oLUUtcyxoPHEmJnAuTWFya05leHRDaGFuZ2UoKSxxPWgtMSxwLkFkZE9yaWdpbmFsRWxlbWVudChoLGcrMSksRT13LTEtdCksRz49MCYmKGM9dGhpcy5tX2ZvcndhcmRIaXN0b3J5W0ddLHQ9Y1swXSxSPTEseT1jLmxlbmd0aC0xKX13aGlsZSgtLUc+PS0xKTtpZihfPXAuZ2V0UmV2ZXJzZUNoYW5nZXMoKSxTWzBdKXtsZXQgdz1tWzBdKzEsYj12WzBdKzE7aWYoXyE9PW51bGwmJl8ubGVuZ3RoPjApe2NvbnN0IEM9X1tfLmxlbmd0aC0xXTt3PU1hdGgubWF4KHcsQy5nZXRPcmlnaW5hbEVuZCgpKSxiPU1hdGgubWF4KGIsQy5nZXRNb2RpZmllZEVuZCgpKX1OPVtuZXcgbWUodyxkLXcrMSxiLHgtYisxKV19ZWxzZXtwPW5ldyB1bixSPW8seT1sLEU9bVswXS12WzBdLXUscT0xMDczNzQxODI0LEc9TD90aGlzLm1fcmV2ZXJzZUhpc3RvcnkubGVuZ3RoLTE6dGhpcy5tX3JldmVyc2VIaXN0b3J5Lmxlbmd0aC0yO2Rve2NvbnN0IHc9RStpO3c9PT1SfHx3PHkmJmZbdy0xXT49Zlt3KzFdPyhoPWZbdysxXS0xLGc9aC1FLXUsaD5xJiZwLk1hcmtOZXh0Q2hhbmdlKCkscT1oKzEscC5BZGRPcmlnaW5hbEVsZW1lbnQoaCsxLGcrMSksRT13KzEtaSk6KGg9Zlt3LTFdLGc9aC1FLXUsaD5xJiZwLk1hcmtOZXh0Q2hhbmdlKCkscT1oLHAuQWRkTW9kaWZpZWRFbGVtZW50KGgrMSxnKzEpLEU9dy0xLWkpLEc+PTAmJihmPXRoaXMubV9yZXZlcnNlSGlzdG9yeVtHXSxpPWZbMF0sUj0xLHk9Zi5sZW5ndGgtMSl9d2hpbGUoLS1HPj0tMSk7Tj1wLmdldENoYW5nZXMoKX1yZXR1cm4gdGhpcy5Db25jYXRlbmF0ZUNoYW5nZXMoXyxOKX1Db21wdXRlUmVjdXJzaW9uUG9pbnQodCxuLHIscyxpLG8sbCl7bGV0IHU9MCxjPTAsZj0wLGg9MCxkPTAsbT0wO3QtLSxyLS0saVswXT0wLG9bMF09MCx0aGlzLm1fZm9yd2FyZEhpc3Rvcnk9W10sdGhpcy5tX3JldmVyc2VIaXN0b3J5PVtdO2NvbnN0IGc9bi10KyhzLXIpLHg9ZysxLHY9bmV3IEludDMyQXJyYXkoeCksTD1uZXcgSW50MzJBcnJheSh4KSxTPXMtcixfPW4tdCxOPXQtcixwPW4tcyx5PShfLVMpJTI9PT0wO3ZbU109dCxMW19dPW4sbFswXT0hMTtmb3IobGV0IEU9MTtFPD1nLzIrMTtFKyspe2xldCBxPTAsRz0wO2Y9dGhpcy5DbGlwRGlhZ29uYWxCb3VuZChTLUUsRSxTLHgpLGg9dGhpcy5DbGlwRGlhZ29uYWxCb3VuZChTK0UsRSxTLHgpO2ZvcihsZXQgYj1mO2I8PWg7Yis9Mil7Yj09PWZ8fGI8aCYmdltiLTFdPHZbYisxXT91PXZbYisxXTp1PXZbYi0xXSsxLGM9dS0oYi1TKS1OO2NvbnN0IEM9dTtmb3IoO3U8biYmYzxzJiZ0aGlzLkVsZW1lbnRzQXJlRXF1YWwodSsxLGMrMSk7KXUrKyxjKys7aWYodltiXT11LHUrYz5xK0cmJihxPXUsRz1jKSwheSYmTWF0aC5hYnMoYi1fKTw9RS0xJiZ1Pj1MW2JdKXJldHVybiBpWzBdPXUsb1swXT1jLEM8PUxbYl0mJjE0NDc+MCYmRTw9MTQ0OD90aGlzLldBTEtUUkFDRShTLGYsaCxOLF8sZCxtLHAsdixMLHUsbixpLGMscyxvLHksbCk6bnVsbH1jb25zdCB3PShxLXQrKEctciktRSkvMjtpZih0aGlzLkNvbnRpbnVlUHJvY2Vzc2luZ1ByZWRpY2F0ZSE9PW51bGwmJiF0aGlzLkNvbnRpbnVlUHJvY2Vzc2luZ1ByZWRpY2F0ZShxLHcpKXJldHVybiBsWzBdPSEwLGlbMF09cSxvWzBdPUcsdz4wJiYxNDQ3PjAmJkU8PTE0NDg/dGhpcy5XQUxLVFJBQ0UoUyxmLGgsTixfLGQsbSxwLHYsTCx1LG4saSxjLHMsbyx5LGwpOih0KysscisrLFtuZXcgbWUodCxuLXQrMSxyLHMtcisxKV0pO2Q9dGhpcy5DbGlwRGlhZ29uYWxCb3VuZChfLUUsRSxfLHgpLG09dGhpcy5DbGlwRGlhZ29uYWxCb3VuZChfK0UsRSxfLHgpO2ZvcihsZXQgYj1kO2I8PW07Yis9Mil7Yj09PWR8fGI8bSYmTFtiLTFdPj1MW2IrMV0/dT1MW2IrMV0tMTp1PUxbYi0xXSxjPXUtKGItXyktcDtjb25zdCBDPXU7Zm9yKDt1PnQmJmM+ciYmdGhpcy5FbGVtZW50c0FyZUVxdWFsKHUsYyk7KXUtLSxjLS07aWYoTFtiXT11LHkmJk1hdGguYWJzKGItUyk8PUUmJnU8PXZbYl0pcmV0dXJuIGlbMF09dSxvWzBdPWMsQz49dltiXSYmMTQ0Nz4wJiZFPD0xNDQ4P3RoaXMuV0FMS1RSQUNFKFMsZixoLE4sXyxkLG0scCx2LEwsdSxuLGksYyxzLG8seSxsKTpudWxsfWlmKEU8PTE0NDcpe2xldCBiPW5ldyBJbnQzMkFycmF5KGgtZisyKTtiWzBdPVMtZisxLFBlLkNvcHkyKHYsZixiLDEsaC1mKzEpLHRoaXMubV9mb3J3YXJkSGlzdG9yeS5wdXNoKGIpLGI9bmV3IEludDMyQXJyYXkobS1kKzIpLGJbMF09Xy1kKzEsUGUuQ29weTIoTCxkLGIsMSxtLWQrMSksdGhpcy5tX3JldmVyc2VIaXN0b3J5LnB1c2goYil9fXJldHVybiB0aGlzLldBTEtUUkFDRShTLGYsaCxOLF8sZCxtLHAsdixMLHUsbixpLGMscyxvLHksbCl9UHJldHRpZnlDaGFuZ2VzKHQpe2ZvcihsZXQgbj0wO248dC5sZW5ndGg7bisrKXtjb25zdCByPXRbbl0scz1uPHQubGVuZ3RoLTE/dFtuKzFdLm9yaWdpbmFsU3RhcnQ6dGhpcy5fb3JpZ2luYWxFbGVtZW50c09ySGFzaC5sZW5ndGgsaT1uPHQubGVuZ3RoLTE/dFtuKzFdLm1vZGlmaWVkU3RhcnQ6dGhpcy5fbW9kaWZpZWRFbGVtZW50c09ySGFzaC5sZW5ndGgsbz1yLm9yaWdpbmFsTGVuZ3RoPjAsbD1yLm1vZGlmaWVkTGVuZ3RoPjA7Zm9yKDtyLm9yaWdpbmFsU3RhcnQrci5vcmlnaW5hbExlbmd0aDxzJiZyLm1vZGlmaWVkU3RhcnQrci5tb2RpZmllZExlbmd0aDxpJiYoIW98fHRoaXMuT3JpZ2luYWxFbGVtZW50c0FyZUVxdWFsKHIub3JpZ2luYWxTdGFydCxyLm9yaWdpbmFsU3RhcnQrci5vcmlnaW5hbExlbmd0aCkpJiYoIWx8fHRoaXMuTW9kaWZpZWRFbGVtZW50c0FyZUVxdWFsKHIubW9kaWZpZWRTdGFydCxyLm1vZGlmaWVkU3RhcnQrci5tb2RpZmllZExlbmd0aCkpOyl7Y29uc3QgYz10aGlzLkVsZW1lbnRzQXJlU3RyaWN0RXF1YWwoci5vcmlnaW5hbFN0YXJ0LHIubW9kaWZpZWRTdGFydCk7aWYodGhpcy5FbGVtZW50c0FyZVN0cmljdEVxdWFsKHIub3JpZ2luYWxTdGFydCtyLm9yaWdpbmFsTGVuZ3RoLHIubW9kaWZpZWRTdGFydCtyLm1vZGlmaWVkTGVuZ3RoKSYmIWMpYnJlYWs7ci5vcmlnaW5hbFN0YXJ0Kyssci5tb2RpZmllZFN0YXJ0Kyt9Y29uc3QgdT1bbnVsbF07aWYobjx0Lmxlbmd0aC0xJiZ0aGlzLkNoYW5nZXNPdmVybGFwKHRbbl0sdFtuKzFdLHUpKXt0W25dPXVbMF0sdC5zcGxpY2UobisxLDEpLG4tLTtjb250aW51ZX19Zm9yKGxldCBuPXQubGVuZ3RoLTE7bj49MDtuLS0pe2NvbnN0IHI9dFtuXTtsZXQgcz0wLGk9MDtpZihuPjApe2NvbnN0IGg9dFtuLTFdO3M9aC5vcmlnaW5hbFN0YXJ0K2gub3JpZ2luYWxMZW5ndGgsaT1oLm1vZGlmaWVkU3RhcnQraC5tb2RpZmllZExlbmd0aH1jb25zdCBvPXIub3JpZ2luYWxMZW5ndGg+MCxsPXIubW9kaWZpZWRMZW5ndGg+MDtsZXQgdT0wLGM9dGhpcy5fYm91bmRhcnlTY29yZShyLm9yaWdpbmFsU3RhcnQsci5vcmlnaW5hbExlbmd0aCxyLm1vZGlmaWVkU3RhcnQsci5tb2RpZmllZExlbmd0aCk7Zm9yKGxldCBoPTE7O2grKyl7Y29uc3QgZD1yLm9yaWdpbmFsU3RhcnQtaCxtPXIubW9kaWZpZWRTdGFydC1oO2lmKGQ8c3x8bTxpfHxvJiYhdGhpcy5PcmlnaW5hbEVsZW1lbnRzQXJlRXF1YWwoZCxkK3Iub3JpZ2luYWxMZW5ndGgpfHxsJiYhdGhpcy5Nb2RpZmllZEVsZW1lbnRzQXJlRXF1YWwobSxtK3IubW9kaWZpZWRMZW5ndGgpKWJyZWFrO2NvbnN0IHg9KGQ9PT1zJiZtPT09aT81OjApK3RoaXMuX2JvdW5kYXJ5U2NvcmUoZCxyLm9yaWdpbmFsTGVuZ3RoLG0sci5tb2RpZmllZExlbmd0aCk7eD5jJiYoYz14LHU9aCl9ci5vcmlnaW5hbFN0YXJ0LT11LHIubW9kaWZpZWRTdGFydC09dTtjb25zdCBmPVtudWxsXTtpZihuPjAmJnRoaXMuQ2hhbmdlc092ZXJsYXAodFtuLTFdLHRbbl0sZikpe3Rbbi0xXT1mWzBdLHQuc3BsaWNlKG4sMSksbisrO2NvbnRpbnVlfX1pZih0aGlzLl9oYXNTdHJpbmdzKWZvcihsZXQgbj0xLHI9dC5sZW5ndGg7bjxyO24rKyl7Y29uc3Qgcz10W24tMV0saT10W25dLG89aS5vcmlnaW5hbFN0YXJ0LXMub3JpZ2luYWxTdGFydC1zLm9yaWdpbmFsTGVuZ3RoLGw9cy5vcmlnaW5hbFN0YXJ0LHU9aS5vcmlnaW5hbFN0YXJ0K2kub3JpZ2luYWxMZW5ndGgsYz11LWwsZj1zLm1vZGlmaWVkU3RhcnQsaD1pLm1vZGlmaWVkU3RhcnQraS5tb2RpZmllZExlbmd0aCxkPWgtZjtpZihvPDUmJmM8MjAmJmQ8MjApe2NvbnN0IG09dGhpcy5fZmluZEJldHRlckNvbnRpZ3VvdXNTZXF1ZW5jZShsLGMsZixkLG8pO2lmKG0pe2NvbnN0W2cseF09bTsoZyE9PXMub3JpZ2luYWxTdGFydCtzLm9yaWdpbmFsTGVuZ3RofHx4IT09cy5tb2RpZmllZFN0YXJ0K3MubW9kaWZpZWRMZW5ndGgpJiYocy5vcmlnaW5hbExlbmd0aD1nLXMub3JpZ2luYWxTdGFydCxzLm1vZGlmaWVkTGVuZ3RoPXgtcy5tb2RpZmllZFN0YXJ0LGkub3JpZ2luYWxTdGFydD1nK28saS5tb2RpZmllZFN0YXJ0PXgrbyxpLm9yaWdpbmFsTGVuZ3RoPXUtaS5vcmlnaW5hbFN0YXJ0LGkubW9kaWZpZWRMZW5ndGg9aC1pLm1vZGlmaWVkU3RhcnQpfX19cmV0dXJuIHR9X2ZpbmRCZXR0ZXJDb250aWd1b3VzU2VxdWVuY2UodCxuLHIscyxpKXtpZihuPGl8fHM8aSlyZXR1cm4gbnVsbDtjb25zdCBvPXQrbi1pKzEsbD1yK3MtaSsxO2xldCB1PTAsYz0wLGY9MDtmb3IobGV0IGg9dDtoPG87aCsrKWZvcihsZXQgZD1yO2Q8bDtkKyspe2NvbnN0IG09dGhpcy5fY29udGlndW91c1NlcXVlbmNlU2NvcmUoaCxkLGkpO20+MCYmbT51JiYodT1tLGM9aCxmPWQpfXJldHVybiB1PjA/W2MsZl06bnVsbH1fY29udGlndW91c1NlcXVlbmNlU2NvcmUodCxuLHIpe2xldCBzPTA7Zm9yKGxldCBpPTA7aTxyO2krKyl7aWYoIXRoaXMuRWxlbWVudHNBcmVFcXVhbCh0K2ksbitpKSlyZXR1cm4gMDtzKz10aGlzLl9vcmlnaW5hbFN0cmluZ0VsZW1lbnRzW3QraV0ubGVuZ3RofXJldHVybiBzfV9PcmlnaW5hbElzQm91bmRhcnkodCl7cmV0dXJuIHQ8PTB8fHQ+PXRoaXMuX29yaWdpbmFsRWxlbWVudHNPckhhc2gubGVuZ3RoLTE/ITA6dGhpcy5faGFzU3RyaW5ncyYmL15ccyokLy50ZXN0KHRoaXMuX29yaWdpbmFsU3RyaW5nRWxlbWVudHNbdF0pfV9PcmlnaW5hbFJlZ2lvbklzQm91bmRhcnkodCxuKXtpZih0aGlzLl9PcmlnaW5hbElzQm91bmRhcnkodCl8fHRoaXMuX09yaWdpbmFsSXNCb3VuZGFyeSh0LTEpKXJldHVybiEwO2lmKG4+MCl7Y29uc3Qgcj10K247aWYodGhpcy5fT3JpZ2luYWxJc0JvdW5kYXJ5KHItMSl8fHRoaXMuX09yaWdpbmFsSXNCb3VuZGFyeShyKSlyZXR1cm4hMH1yZXR1cm4hMX1fTW9kaWZpZWRJc0JvdW5kYXJ5KHQpe3JldHVybiB0PD0wfHx0Pj10aGlzLl9tb2RpZmllZEVsZW1lbnRzT3JIYXNoLmxlbmd0aC0xPyEwOnRoaXMuX2hhc1N0cmluZ3MmJi9eXHMqJC8udGVzdCh0aGlzLl9tb2RpZmllZFN0cmluZ0VsZW1lbnRzW3RdKX1fTW9kaWZpZWRSZWdpb25Jc0JvdW5kYXJ5KHQsbil7aWYodGhpcy5fTW9kaWZpZWRJc0JvdW5kYXJ5KHQpfHx0aGlzLl9Nb2RpZmllZElzQm91bmRhcnkodC0xKSlyZXR1cm4hMDtpZihuPjApe2NvbnN0IHI9dCtuO2lmKHRoaXMuX01vZGlmaWVkSXNCb3VuZGFyeShyLTEpfHx0aGlzLl9Nb2RpZmllZElzQm91bmRhcnkocikpcmV0dXJuITB9cmV0dXJuITF9X2JvdW5kYXJ5U2NvcmUodCxuLHIscyl7Y29uc3QgaT10aGlzLl9PcmlnaW5hbFJlZ2lvbklzQm91bmRhcnkodCxuKT8xOjAsbz10aGlzLl9Nb2RpZmllZFJlZ2lvbklzQm91bmRhcnkocixzKT8xOjA7cmV0dXJuIGkrb31Db25jYXRlbmF0ZUNoYW5nZXModCxuKXtjb25zdCByPVtdO2lmKHQubGVuZ3RoPT09MHx8bi5sZW5ndGg9PT0wKXJldHVybiBuLmxlbmd0aD4wP246dDtpZih0aGlzLkNoYW5nZXNPdmVybGFwKHRbdC5sZW5ndGgtMV0sblswXSxyKSl7Y29uc3Qgcz1uZXcgQXJyYXkodC5sZW5ndGgrbi5sZW5ndGgtMSk7cmV0dXJuIFBlLkNvcHkodCwwLHMsMCx0Lmxlbmd0aC0xKSxzW3QubGVuZ3RoLTFdPXJbMF0sUGUuQ29weShuLDEscyx0Lmxlbmd0aCxuLmxlbmd0aC0xKSxzfWVsc2V7Y29uc3Qgcz1uZXcgQXJyYXkodC5sZW5ndGgrbi5sZW5ndGgpO3JldHVybiBQZS5Db3B5KHQsMCxzLDAsdC5sZW5ndGgpLFBlLkNvcHkobiwwLHMsdC5sZW5ndGgsbi5sZW5ndGgpLHN9fUNoYW5nZXNPdmVybGFwKHQsbixyKXtpZihGZS5Bc3NlcnQodC5vcmlnaW5hbFN0YXJ0PD1uLm9yaWdpbmFsU3RhcnQsIkxlZnQgY2hhbmdlIGlzIG5vdCBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gcmlnaHQgY2hhbmdlIiksRmUuQXNzZXJ0KHQubW9kaWZpZWRTdGFydDw9bi5tb2RpZmllZFN0YXJ0LCJMZWZ0IGNoYW5nZSBpcyBub3QgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIHJpZ2h0IGNoYW5nZSIpLHQub3JpZ2luYWxTdGFydCt0Lm9yaWdpbmFsTGVuZ3RoPj1uLm9yaWdpbmFsU3RhcnR8fHQubW9kaWZpZWRTdGFydCt0Lm1vZGlmaWVkTGVuZ3RoPj1uLm1vZGlmaWVkU3RhcnQpe2NvbnN0IHM9dC5vcmlnaW5hbFN0YXJ0O2xldCBpPXQub3JpZ2luYWxMZW5ndGg7Y29uc3Qgbz10Lm1vZGlmaWVkU3RhcnQ7bGV0IGw9dC5tb2RpZmllZExlbmd0aDtyZXR1cm4gdC5vcmlnaW5hbFN0YXJ0K3Qub3JpZ2luYWxMZW5ndGg+PW4ub3JpZ2luYWxTdGFydCYmKGk9bi5vcmlnaW5hbFN0YXJ0K24ub3JpZ2luYWxMZW5ndGgtdC5vcmlnaW5hbFN0YXJ0KSx0Lm1vZGlmaWVkU3RhcnQrdC5tb2RpZmllZExlbmd0aD49bi5tb2RpZmllZFN0YXJ0JiYobD1uLm1vZGlmaWVkU3RhcnQrbi5tb2RpZmllZExlbmd0aC10Lm1vZGlmaWVkU3RhcnQpLHJbMF09bmV3IG1lKHMsaSxvLGwpLCEwfWVsc2UgcmV0dXJuIHJbMF09bnVsbCwhMX1DbGlwRGlhZ29uYWxCb3VuZCh0LG4scixzKXtpZih0Pj0wJiZ0PHMpcmV0dXJuIHQ7Y29uc3QgaT1yLG89cy1yLTEsbD1uJTI9PT0wO2lmKHQ8MCl7Y29uc3QgdT1pJTI9PT0wO3JldHVybiBsPT09dT8wOjF9ZWxzZXtjb25zdCB1PW8lMj09PTA7cmV0dXJuIGw9PT11P3MtMTpzLTJ9fX12YXIgY249e307bGV0IERlO2NvbnN0IEV0PWdsb2JhbFRoaXMudnNjb2RlO2lmKHR5cGVvZiBFdDwidSImJnR5cGVvZiBFdC5wcm9jZXNzPCJ1Iil7Y29uc3QgZT1FdC5wcm9jZXNzO0RlPXtnZXQgcGxhdGZvcm0oKXtyZXR1cm4gZS5wbGF0Zm9ybX0sZ2V0IGFyY2goKXtyZXR1cm4gZS5hcmNofSxnZXQgZW52KCl7cmV0dXJuIGUuZW52fSxjd2QoKXtyZXR1cm4gZS5jd2QoKX19fWVsc2UgdHlwZW9mIHByb2Nlc3M8InUiP0RlPXtnZXQgcGxhdGZvcm0oKXtyZXR1cm4gcHJvY2Vzcy5wbGF0Zm9ybX0sZ2V0IGFyY2goKXtyZXR1cm4gcHJvY2Vzcy5hcmNofSxnZXQgZW52KCl7cmV0dXJuIGNufSxjd2QoKXtyZXR1cm4gY24uVlNDT0RFX0NXRHx8cHJvY2Vzcy5jd2QoKX19OkRlPXtnZXQgcGxhdGZvcm0oKXtyZXR1cm4gemU/IndpbjMyIjp2cz8iZGFyd2luIjoibGludXgifSxnZXQgYXJjaCgpe30sZ2V0IGVudigpe3JldHVybnt9fSxjd2QoKXtyZXR1cm4iLyJ9fTtjb25zdCBydD1EZS5jd2QsJHM9RGUuZW52LE9zPURlLnBsYXRmb3JtLEdzPTY1LGpzPTk3LFhzPTkwLFFzPTEyMixiZT00NixqPTQ3LEs9OTIsX2U9NTgsSnM9NjM7Y2xhc3MgaG4gZXh0ZW5kcyBFcnJvcntjb25zdHJ1Y3Rvcih0LG4scil7bGV0IHM7dHlwZW9mIG49PSJzdHJpbmciJiZuLmluZGV4T2YoIm5vdCAiKT09PTA/KHM9Im11c3Qgbm90IGJlIixuPW4ucmVwbGFjZSgvXm5vdCAvLCIiKSk6cz0ibXVzdCBiZSI7Y29uc3QgaT10LmluZGV4T2YoIi4iKSE9PS0xPyJwcm9wZXJ0eSI6ImFyZ3VtZW50IjtsZXQgbz1gVGhlICIke3R9IiAke2l9ICR7c30gb2YgdHlwZSAke259YDtvKz1gLiBSZWNlaXZlZCB0eXBlICR7dHlwZW9mIHJ9YCxzdXBlcihvKSx0aGlzLmNvZGU9IkVSUl9JTlZBTElEX0FSR19UWVBFIn19ZnVuY3Rpb24gWXMoZSx0KXtpZihlPT09bnVsbHx8dHlwZW9mIGUhPSJvYmplY3QiKXRocm93IG5ldyBobih0LCJPYmplY3QiLGUpfWZ1bmN0aW9uICQoZSx0KXtpZih0eXBlb2YgZSE9InN0cmluZyIpdGhyb3cgbmV3IGhuKHQsInN0cmluZyIsZSl9Y29uc3QgeGU9T3M9PT0id2luMzIiO2Z1bmN0aW9uIFAoZSl7cmV0dXJuIGU9PT1qfHxlPT09S31mdW5jdGlvbiBNdChlKXtyZXR1cm4gZT09PWp9ZnVuY3Rpb24gcGUoZSl7cmV0dXJuIGU+PUdzJiZlPD1Yc3x8ZT49anMmJmU8PVFzfWZ1bmN0aW9uIHN0KGUsdCxuLHIpe2xldCBzPSIiLGk9MCxvPS0xLGw9MCx1PTA7Zm9yKGxldCBjPTA7Yzw9ZS5sZW5ndGg7KytjKXtpZihjPGUubGVuZ3RoKXU9ZS5jaGFyQ29kZUF0KGMpO2Vsc2V7aWYocih1KSlicmVhazt1PWp9aWYocih1KSl7aWYoIShvPT09Yy0xfHxsPT09MSkpaWYobD09PTIpe2lmKHMubGVuZ3RoPDJ8fGkhPT0yfHxzLmNoYXJDb2RlQXQocy5sZW5ndGgtMSkhPT1iZXx8cy5jaGFyQ29kZUF0KHMubGVuZ3RoLTIpIT09YmUpe2lmKHMubGVuZ3RoPjIpe2NvbnN0IGY9cy5sYXN0SW5kZXhPZihuKTtmPT09LTE/KHM9IiIsaT0wKToocz1zLnNsaWNlKDAsZiksaT1zLmxlbmd0aC0xLXMubGFzdEluZGV4T2YobikpLG89YyxsPTA7Y29udGludWV9ZWxzZSBpZihzLmxlbmd0aCE9PTApe3M9IiIsaT0wLG89YyxsPTA7Y29udGludWV9fXQmJihzKz1zLmxlbmd0aD4wP2Ake259Li5gOiIuLiIsaT0yKX1lbHNlIHMubGVuZ3RoPjA/cys9YCR7bn0ke2Uuc2xpY2UobysxLGMpfWA6cz1lLnNsaWNlKG8rMSxjKSxpPWMtby0xO289YyxsPTB9ZWxzZSB1PT09YmUmJmwhPT0tMT8rK2w6bD0tMX1yZXR1cm4gc31mdW5jdGlvbiBmbihlLHQpe1lzKHQsInBhdGhPYmplY3QiKTtjb25zdCBuPXQuZGlyfHx0LnJvb3Qscj10LmJhc2V8fGAke3QubmFtZXx8IiJ9JHt0LmV4dHx8IiJ9YDtyZXR1cm4gbj9uPT09dC5yb290P2Ake259JHtyfWA6YCR7bn0ke2V9JHtyfWA6cn1jb25zdCBaPXtyZXNvbHZlKC4uLmUpe2xldCB0PSIiLG49IiIscj0hMTtmb3IobGV0IHM9ZS5sZW5ndGgtMTtzPj0tMTtzLS0pe2xldCBpO2lmKHM+PTApe2lmKGk9ZVtzXSwkKGksInBhdGgiKSxpLmxlbmd0aD09PTApY29udGludWV9ZWxzZSB0Lmxlbmd0aD09PTA/aT1ydCgpOihpPSRzW2A9JHt0fWBdfHxydCgpLChpPT09dm9pZCAwfHxpLnNsaWNlKDAsMikudG9Mb3dlckNhc2UoKSE9PXQudG9Mb3dlckNhc2UoKSYmaS5jaGFyQ29kZUF0KDIpPT09SykmJihpPWAke3R9XFxgKSk7Y29uc3Qgbz1pLmxlbmd0aDtsZXQgbD0wLHU9IiIsYz0hMTtjb25zdCBmPWkuY2hhckNvZGVBdCgwKTtpZihvPT09MSlQKGYpJiYobD0xLGM9ITApO2Vsc2UgaWYoUChmKSlpZihjPSEwLFAoaS5jaGFyQ29kZUF0KDEpKSl7bGV0IGg9MixkPWg7Zm9yKDtoPG8mJiFQKGkuY2hhckNvZGVBdChoKSk7KWgrKztpZihoPG8mJmghPT1kKXtjb25zdCBtPWkuc2xpY2UoZCxoKTtmb3IoZD1oO2g8byYmUChpLmNoYXJDb2RlQXQoaCkpOyloKys7aWYoaDxvJiZoIT09ZCl7Zm9yKGQ9aDtoPG8mJiFQKGkuY2hhckNvZGVBdChoKSk7KWgrKzsoaD09PW98fGghPT1kKSYmKHU9YFxcXFwke219XFwke2kuc2xpY2UoZCxoKX1gLGw9aCl9fX1lbHNlIGw9MTtlbHNlIHBlKGYpJiZpLmNoYXJDb2RlQXQoMSk9PT1fZSYmKHU9aS5zbGljZSgwLDIpLGw9MixvPjImJlAoaS5jaGFyQ29kZUF0KDIpKSYmKGM9ITAsbD0zKSk7aWYodS5sZW5ndGg+MClpZih0Lmxlbmd0aD4wKXtpZih1LnRvTG93ZXJDYXNlKCkhPT10LnRvTG93ZXJDYXNlKCkpY29udGludWV9ZWxzZSB0PXU7aWYocil7aWYodC5sZW5ndGg+MClicmVha31lbHNlIGlmKG49YCR7aS5zbGljZShsKX1cXCR7bn1gLHI9YyxjJiZ0Lmxlbmd0aD4wKWJyZWFrfXJldHVybiBuPXN0KG4sIXIsIlxcIixQKSxyP2Ake3R9XFwke259YDpgJHt0fSR7bn1gfHwiLiJ9LG5vcm1hbGl6ZShlKXskKGUsInBhdGgiKTtjb25zdCB0PWUubGVuZ3RoO2lmKHQ9PT0wKXJldHVybiIuIjtsZXQgbj0wLHIscz0hMTtjb25zdCBpPWUuY2hhckNvZGVBdCgwKTtpZih0PT09MSlyZXR1cm4gTXQoaSk/IlxcIjplO2lmKFAoaSkpaWYocz0hMCxQKGUuY2hhckNvZGVBdCgxKSkpe2xldCBsPTIsdT1sO2Zvcig7bDx0JiYhUChlLmNoYXJDb2RlQXQobCkpOylsKys7aWYobDx0JiZsIT09dSl7Y29uc3QgYz1lLnNsaWNlKHUsbCk7Zm9yKHU9bDtsPHQmJlAoZS5jaGFyQ29kZUF0KGwpKTspbCsrO2lmKGw8dCYmbCE9PXUpe2Zvcih1PWw7bDx0JiYhUChlLmNoYXJDb2RlQXQobCkpOylsKys7aWYobD09PXQpcmV0dXJuYFxcXFwke2N9XFwke2Uuc2xpY2UodSl9XFxgO2whPT11JiYocj1gXFxcXCR7Y31cXCR7ZS5zbGljZSh1LGwpfWAsbj1sKX19fWVsc2Ugbj0xO2Vsc2UgcGUoaSkmJmUuY2hhckNvZGVBdCgxKT09PV9lJiYocj1lLnNsaWNlKDAsMiksbj0yLHQ+MiYmUChlLmNoYXJDb2RlQXQoMikpJiYocz0hMCxuPTMpKTtsZXQgbz1uPHQ/c3QoZS5zbGljZShuKSwhcywiXFwiLFApOiIiO3JldHVybiBvLmxlbmd0aD09PTAmJiFzJiYobz0iLiIpLG8ubGVuZ3RoPjAmJlAoZS5jaGFyQ29kZUF0KHQtMSkpJiYobys9IlxcIikscj09PXZvaWQgMD9zP2BcXCR7b31gOm86cz9gJHtyfVxcJHtvfWA6YCR7cn0ke299YH0saXNBYnNvbHV0ZShlKXskKGUsInBhdGgiKTtjb25zdCB0PWUubGVuZ3RoO2lmKHQ9PT0wKXJldHVybiExO2NvbnN0IG49ZS5jaGFyQ29kZUF0KDApO3JldHVybiBQKG4pfHx0PjImJnBlKG4pJiZlLmNoYXJDb2RlQXQoMSk9PT1fZSYmUChlLmNoYXJDb2RlQXQoMikpfSxqb2luKC4uLmUpe2lmKGUubGVuZ3RoPT09MClyZXR1cm4iLiI7bGV0IHQsbjtmb3IobGV0IGk9MDtpPGUubGVuZ3RoOysraSl7Y29uc3Qgbz1lW2ldOyQobywicGF0aCIpLG8ubGVuZ3RoPjAmJih0PT09dm9pZCAwP3Q9bj1vOnQrPWBcXCR7b31gKX1pZih0PT09dm9pZCAwKXJldHVybiIuIjtsZXQgcj0hMCxzPTA7aWYodHlwZW9mIG49PSJzdHJpbmciJiZQKG4uY2hhckNvZGVBdCgwKSkpeysrcztjb25zdCBpPW4ubGVuZ3RoO2k+MSYmUChuLmNoYXJDb2RlQXQoMSkpJiYoKytzLGk+MiYmKFAobi5jaGFyQ29kZUF0KDIpKT8rK3M6cj0hMSkpfWlmKHIpe2Zvcig7czx0Lmxlbmd0aCYmUCh0LmNoYXJDb2RlQXQocykpOylzKys7cz49MiYmKHQ9YFxcJHt0LnNsaWNlKHMpfWApfXJldHVybiBaLm5vcm1hbGl6ZSh0KX0scmVsYXRpdmUoZSx0KXtpZigkKGUsImZyb20iKSwkKHQsInRvIiksZT09PXQpcmV0dXJuIiI7Y29uc3Qgbj1aLnJlc29sdmUoZSkscj1aLnJlc29sdmUodCk7aWYobj09PXJ8fChlPW4udG9Mb3dlckNhc2UoKSx0PXIudG9Mb3dlckNhc2UoKSxlPT09dCkpcmV0dXJuIiI7bGV0IHM9MDtmb3IoO3M8ZS5sZW5ndGgmJmUuY2hhckNvZGVBdChzKT09PUs7KXMrKztsZXQgaT1lLmxlbmd0aDtmb3IoO2ktMT5zJiZlLmNoYXJDb2RlQXQoaS0xKT09PUs7KWktLTtjb25zdCBvPWktcztsZXQgbD0wO2Zvcig7bDx0Lmxlbmd0aCYmdC5jaGFyQ29kZUF0KGwpPT09SzspbCsrO2xldCB1PXQubGVuZ3RoO2Zvcig7dS0xPmwmJnQuY2hhckNvZGVBdCh1LTEpPT09SzspdS0tO2NvbnN0IGM9dS1sLGY9bzxjP286YztsZXQgaD0tMSxkPTA7Zm9yKDtkPGY7ZCsrKXtjb25zdCBnPWUuY2hhckNvZGVBdChzK2QpO2lmKGchPT10LmNoYXJDb2RlQXQobCtkKSlicmVhaztnPT09SyYmKGg9ZCl9aWYoZCE9PWYpe2lmKGg9PT0tMSlyZXR1cm4gcn1lbHNle2lmKGM+Zil7aWYodC5jaGFyQ29kZUF0KGwrZCk9PT1LKXJldHVybiByLnNsaWNlKGwrZCsxKTtpZihkPT09MilyZXR1cm4gci5zbGljZShsK2QpfW8+ZiYmKGUuY2hhckNvZGVBdChzK2QpPT09Sz9oPWQ6ZD09PTImJihoPTMpKSxoPT09LTEmJihoPTApfWxldCBtPSIiO2ZvcihkPXMraCsxO2Q8PWk7KytkKShkPT09aXx8ZS5jaGFyQ29kZUF0KGQpPT09SykmJihtKz1tLmxlbmd0aD09PTA/Ii4uIjoiXFwuLiIpO3JldHVybiBsKz1oLG0ubGVuZ3RoPjA/YCR7bX0ke3Iuc2xpY2UobCx1KX1gOihyLmNoYXJDb2RlQXQobCk9PT1LJiYrK2wsci5zbGljZShsLHUpKX0sdG9OYW1lc3BhY2VkUGF0aChlKXtpZih0eXBlb2YgZSE9InN0cmluZyJ8fGUubGVuZ3RoPT09MClyZXR1cm4gZTtjb25zdCB0PVoucmVzb2x2ZShlKTtpZih0Lmxlbmd0aDw9MilyZXR1cm4gZTtpZih0LmNoYXJDb2RlQXQoMCk9PT1LKXtpZih0LmNoYXJDb2RlQXQoMSk9PT1LKXtjb25zdCBuPXQuY2hhckNvZGVBdCgyKTtpZihuIT09SnMmJm4hPT1iZSlyZXR1cm5gXFxcXD9cXFVOQ1xcJHt0LnNsaWNlKDIpfWB9fWVsc2UgaWYocGUodC5jaGFyQ29kZUF0KDApKSYmdC5jaGFyQ29kZUF0KDEpPT09X2UmJnQuY2hhckNvZGVBdCgyKT09PUspcmV0dXJuYFxcXFw/XFwke3R9YDtyZXR1cm4gZX0sZGlybmFtZShlKXskKGUsInBhdGgiKTtjb25zdCB0PWUubGVuZ3RoO2lmKHQ9PT0wKXJldHVybiIuIjtsZXQgbj0tMSxyPTA7Y29uc3Qgcz1lLmNoYXJDb2RlQXQoMCk7aWYodD09PTEpcmV0dXJuIFAocyk/ZToiLiI7aWYoUChzKSl7aWYobj1yPTEsUChlLmNoYXJDb2RlQXQoMSkpKXtsZXQgbD0yLHU9bDtmb3IoO2w8dCYmIVAoZS5jaGFyQ29kZUF0KGwpKTspbCsrO2lmKGw8dCYmbCE9PXUpe2Zvcih1PWw7bDx0JiZQKGUuY2hhckNvZGVBdChsKSk7KWwrKztpZihsPHQmJmwhPT11KXtmb3IodT1sO2w8dCYmIVAoZS5jaGFyQ29kZUF0KGwpKTspbCsrO2lmKGw9PT10KXJldHVybiBlO2whPT11JiYobj1yPWwrMSl9fX19ZWxzZSBwZShzKSYmZS5jaGFyQ29kZUF0KDEpPT09X2UmJihuPXQ+MiYmUChlLmNoYXJDb2RlQXQoMikpPzM6MixyPW4pO2xldCBpPS0xLG89ITA7Zm9yKGxldCBsPXQtMTtsPj1yOy0tbClpZihQKGUuY2hhckNvZGVBdChsKSkpe2lmKCFvKXtpPWw7YnJlYWt9fWVsc2Ugbz0hMTtpZihpPT09LTEpe2lmKG49PT0tMSlyZXR1cm4iLiI7aT1ufXJldHVybiBlLnNsaWNlKDAsaSl9LGJhc2VuYW1lKGUsdCl7dCE9PXZvaWQgMCYmJCh0LCJleHQiKSwkKGUsInBhdGgiKTtsZXQgbj0wLHI9LTEscz0hMCxpO2lmKGUubGVuZ3RoPj0yJiZwZShlLmNoYXJDb2RlQXQoMCkpJiZlLmNoYXJDb2RlQXQoMSk9PT1fZSYmKG49MiksdCE9PXZvaWQgMCYmdC5sZW5ndGg+MCYmdC5sZW5ndGg8PWUubGVuZ3RoKXtpZih0PT09ZSlyZXR1cm4iIjtsZXQgbz10Lmxlbmd0aC0xLGw9LTE7Zm9yKGk9ZS5sZW5ndGgtMTtpPj1uOy0taSl7Y29uc3QgdT1lLmNoYXJDb2RlQXQoaSk7aWYoUCh1KSl7aWYoIXMpe249aSsxO2JyZWFrfX1lbHNlIGw9PT0tMSYmKHM9ITEsbD1pKzEpLG8+PTAmJih1PT09dC5jaGFyQ29kZUF0KG8pPy0tbz09PS0xJiYocj1pKToobz0tMSxyPWwpKX1yZXR1cm4gbj09PXI/cj1sOnI9PT0tMSYmKHI9ZS5sZW5ndGgpLGUuc2xpY2UobixyKX1mb3IoaT1lLmxlbmd0aC0xO2k+PW47LS1pKWlmKFAoZS5jaGFyQ29kZUF0KGkpKSl7aWYoIXMpe249aSsxO2JyZWFrfX1lbHNlIHI9PT0tMSYmKHM9ITEscj1pKzEpO3JldHVybiByPT09LTE/IiI6ZS5zbGljZShuLHIpfSxleHRuYW1lKGUpeyQoZSwicGF0aCIpO2xldCB0PTAsbj0tMSxyPTAscz0tMSxpPSEwLG89MDtlLmxlbmd0aD49MiYmZS5jaGFyQ29kZUF0KDEpPT09X2UmJnBlKGUuY2hhckNvZGVBdCgwKSkmJih0PXI9Mik7Zm9yKGxldCBsPWUubGVuZ3RoLTE7bD49dDstLWwpe2NvbnN0IHU9ZS5jaGFyQ29kZUF0KGwpO2lmKFAodSkpe2lmKCFpKXtyPWwrMTticmVha31jb250aW51ZX1zPT09LTEmJihpPSExLHM9bCsxKSx1PT09YmU/bj09PS0xP249bDpvIT09MSYmKG89MSk6biE9PS0xJiYobz0tMSl9cmV0dXJuIG49PT0tMXx8cz09PS0xfHxvPT09MHx8bz09PTEmJm49PT1zLTEmJm49PT1yKzE/IiI6ZS5zbGljZShuLHMpfSxmb3JtYXQ6Zm4uYmluZChudWxsLCJcXCIpLHBhcnNlKGUpeyQoZSwicGF0aCIpO2NvbnN0IHQ9e3Jvb3Q6IiIsZGlyOiIiLGJhc2U6IiIsZXh0OiIiLG5hbWU6IiJ9O2lmKGUubGVuZ3RoPT09MClyZXR1cm4gdDtjb25zdCBuPWUubGVuZ3RoO2xldCByPTAscz1lLmNoYXJDb2RlQXQoMCk7aWYobj09PTEpcmV0dXJuIFAocyk/KHQucm9vdD10LmRpcj1lLHQpOih0LmJhc2U9dC5uYW1lPWUsdCk7aWYoUChzKSl7aWYocj0xLFAoZS5jaGFyQ29kZUF0KDEpKSl7bGV0IGg9MixkPWg7Zm9yKDtoPG4mJiFQKGUuY2hhckNvZGVBdChoKSk7KWgrKztpZihoPG4mJmghPT1kKXtmb3IoZD1oO2g8biYmUChlLmNoYXJDb2RlQXQoaCkpOyloKys7aWYoaDxuJiZoIT09ZCl7Zm9yKGQ9aDtoPG4mJiFQKGUuY2hhckNvZGVBdChoKSk7KWgrKztoPT09bj9yPWg6aCE9PWQmJihyPWgrMSl9fX19ZWxzZSBpZihwZShzKSYmZS5jaGFyQ29kZUF0KDEpPT09X2Upe2lmKG48PTIpcmV0dXJuIHQucm9vdD10LmRpcj1lLHQ7aWYocj0yLFAoZS5jaGFyQ29kZUF0KDIpKSl7aWYobj09PTMpcmV0dXJuIHQucm9vdD10LmRpcj1lLHQ7cj0zfX1yPjAmJih0LnJvb3Q9ZS5zbGljZSgwLHIpKTtsZXQgaT0tMSxvPXIsbD0tMSx1PSEwLGM9ZS5sZW5ndGgtMSxmPTA7Zm9yKDtjPj1yOy0tYyl7aWYocz1lLmNoYXJDb2RlQXQoYyksUChzKSl7aWYoIXUpe289YysxO2JyZWFrfWNvbnRpbnVlfWw9PT0tMSYmKHU9ITEsbD1jKzEpLHM9PT1iZT9pPT09LTE/aT1jOmYhPT0xJiYoZj0xKTppIT09LTEmJihmPS0xKX1yZXR1cm4gbCE9PS0xJiYoaT09PS0xfHxmPT09MHx8Zj09PTEmJmk9PT1sLTEmJmk9PT1vKzE/dC5iYXNlPXQubmFtZT1lLnNsaWNlKG8sbCk6KHQubmFtZT1lLnNsaWNlKG8saSksdC5iYXNlPWUuc2xpY2UobyxsKSx0LmV4dD1lLnNsaWNlKGksbCkpKSxvPjAmJm8hPT1yP3QuZGlyPWUuc2xpY2UoMCxvLTEpOnQuZGlyPXQucm9vdCx0fSxzZXA6IlxcIixkZWxpbWl0ZXI6IjsiLHdpbjMyOm51bGwscG9zaXg6bnVsbH0sWnM9KCgpPT57aWYoeGUpe2NvbnN0IGU9L1xcL2c7cmV0dXJuKCk9Pntjb25zdCB0PXJ0KCkucmVwbGFjZShlLCIvIik7cmV0dXJuIHQuc2xpY2UodC5pbmRleE9mKCIvIikpfX1yZXR1cm4oKT0+cnQoKX0pKCksZWU9e3Jlc29sdmUoLi4uZSl7bGV0IHQ9IiIsbj0hMTtmb3IobGV0IHI9ZS5sZW5ndGgtMTtyPj0tMSYmIW47ci0tKXtjb25zdCBzPXI+PTA/ZVtyXTpacygpOyQocywicGF0aCIpLHMubGVuZ3RoIT09MCYmKHQ9YCR7c30vJHt0fWAsbj1zLmNoYXJDb2RlQXQoMCk9PT1qKX1yZXR1cm4gdD1zdCh0LCFuLCIvIixNdCksbj9gLyR7dH1gOnQubGVuZ3RoPjA/dDoiLiJ9LG5vcm1hbGl6ZShlKXtpZigkKGUsInBhdGgiKSxlLmxlbmd0aD09PTApcmV0dXJuIi4iO2NvbnN0IHQ9ZS5jaGFyQ29kZUF0KDApPT09aixuPWUuY2hhckNvZGVBdChlLmxlbmd0aC0xKT09PWo7cmV0dXJuIGU9c3QoZSwhdCwiLyIsTXQpLGUubGVuZ3RoPT09MD90PyIvIjpuPyIuLyI6Ii4iOihuJiYoZSs9Ii8iKSx0P2AvJHtlfWA6ZSl9LGlzQWJzb2x1dGUoZSl7cmV0dXJuICQoZSwicGF0aCIpLGUubGVuZ3RoPjAmJmUuY2hhckNvZGVBdCgwKT09PWp9LGpvaW4oLi4uZSl7aWYoZS5sZW5ndGg9PT0wKXJldHVybiIuIjtsZXQgdDtmb3IobGV0IG49MDtuPGUubGVuZ3RoOysrbil7Y29uc3Qgcj1lW25dOyQociwicGF0aCIpLHIubGVuZ3RoPjAmJih0PT09dm9pZCAwP3Q9cjp0Kz1gLyR7cn1gKX1yZXR1cm4gdD09PXZvaWQgMD8iLiI6ZWUubm9ybWFsaXplKHQpfSxyZWxhdGl2ZShlLHQpe2lmKCQoZSwiZnJvbSIpLCQodCwidG8iKSxlPT09dHx8KGU9ZWUucmVzb2x2ZShlKSx0PWVlLnJlc29sdmUodCksZT09PXQpKXJldHVybiIiO2NvbnN0IG49MSxyPWUubGVuZ3RoLHM9ci1uLGk9MSxvPXQubGVuZ3RoLWksbD1zPG8/czpvO2xldCB1PS0xLGM9MDtmb3IoO2M8bDtjKyspe2NvbnN0IGg9ZS5jaGFyQ29kZUF0KG4rYyk7aWYoaCE9PXQuY2hhckNvZGVBdChpK2MpKWJyZWFrO2g9PT1qJiYodT1jKX1pZihjPT09bClpZihvPmwpe2lmKHQuY2hhckNvZGVBdChpK2MpPT09ailyZXR1cm4gdC5zbGljZShpK2MrMSk7aWYoYz09PTApcmV0dXJuIHQuc2xpY2UoaStjKX1lbHNlIHM+bCYmKGUuY2hhckNvZGVBdChuK2MpPT09aj91PWM6Yz09PTAmJih1PTApKTtsZXQgZj0iIjtmb3IoYz1uK3UrMTtjPD1yOysrYykoYz09PXJ8fGUuY2hhckNvZGVBdChjKT09PWopJiYoZis9Zi5sZW5ndGg9PT0wPyIuLiI6Ii8uLiIpO3JldHVybmAke2Z9JHt0LnNsaWNlKGkrdSl9YH0sdG9OYW1lc3BhY2VkUGF0aChlKXtyZXR1cm4gZX0sZGlybmFtZShlKXtpZigkKGUsInBhdGgiKSxlLmxlbmd0aD09PTApcmV0dXJuIi4iO2NvbnN0IHQ9ZS5jaGFyQ29kZUF0KDApPT09ajtsZXQgbj0tMSxyPSEwO2ZvcihsZXQgcz1lLmxlbmd0aC0xO3M+PTE7LS1zKWlmKGUuY2hhckNvZGVBdChzKT09PWope2lmKCFyKXtuPXM7YnJlYWt9fWVsc2Ugcj0hMTtyZXR1cm4gbj09PS0xP3Q/Ii8iOiIuIjp0JiZuPT09MT8iLy8iOmUuc2xpY2UoMCxuKX0sYmFzZW5hbWUoZSx0KXt0IT09dm9pZCAwJiYkKHQsImV4dCIpLCQoZSwicGF0aCIpO2xldCBuPTAscj0tMSxzPSEwLGk7aWYodCE9PXZvaWQgMCYmdC5sZW5ndGg+MCYmdC5sZW5ndGg8PWUubGVuZ3RoKXtpZih0PT09ZSlyZXR1cm4iIjtsZXQgbz10Lmxlbmd0aC0xLGw9LTE7Zm9yKGk9ZS5sZW5ndGgtMTtpPj0wOy0taSl7Y29uc3QgdT1lLmNoYXJDb2RlQXQoaSk7aWYodT09PWope2lmKCFzKXtuPWkrMTticmVha319ZWxzZSBsPT09LTEmJihzPSExLGw9aSsxKSxvPj0wJiYodT09PXQuY2hhckNvZGVBdChvKT8tLW89PT0tMSYmKHI9aSk6KG89LTEscj1sKSl9cmV0dXJuIG49PT1yP3I9bDpyPT09LTEmJihyPWUubGVuZ3RoKSxlLnNsaWNlKG4scil9Zm9yKGk9ZS5sZW5ndGgtMTtpPj0wOy0taSlpZihlLmNoYXJDb2RlQXQoaSk9PT1qKXtpZighcyl7bj1pKzE7YnJlYWt9fWVsc2Ugcj09PS0xJiYocz0hMSxyPWkrMSk7cmV0dXJuIHI9PT0tMT8iIjplLnNsaWNlKG4scil9LGV4dG5hbWUoZSl7JChlLCJwYXRoIik7bGV0IHQ9LTEsbj0wLHI9LTEscz0hMCxpPTA7Zm9yKGxldCBvPWUubGVuZ3RoLTE7bz49MDstLW8pe2NvbnN0IGw9ZS5jaGFyQ29kZUF0KG8pO2lmKGw9PT1qKXtpZighcyl7bj1vKzE7YnJlYWt9Y29udGludWV9cj09PS0xJiYocz0hMSxyPW8rMSksbD09PWJlP3Q9PT0tMT90PW86aSE9PTEmJihpPTEpOnQhPT0tMSYmKGk9LTEpfXJldHVybiB0PT09LTF8fHI9PT0tMXx8aT09PTB8fGk9PT0xJiZ0PT09ci0xJiZ0PT09bisxPyIiOmUuc2xpY2UodCxyKX0sZm9ybWF0OmZuLmJpbmQobnVsbCwiLyIpLHBhcnNlKGUpeyQoZSwicGF0aCIpO2NvbnN0IHQ9e3Jvb3Q6IiIsZGlyOiIiLGJhc2U6IiIsZXh0OiIiLG5hbWU6IiJ9O2lmKGUubGVuZ3RoPT09MClyZXR1cm4gdDtjb25zdCBuPWUuY2hhckNvZGVBdCgwKT09PWo7bGV0IHI7bj8odC5yb290PSIvIixyPTEpOnI9MDtsZXQgcz0tMSxpPTAsbz0tMSxsPSEwLHU9ZS5sZW5ndGgtMSxjPTA7Zm9yKDt1Pj1yOy0tdSl7Y29uc3QgZj1lLmNoYXJDb2RlQXQodSk7aWYoZj09PWope2lmKCFsKXtpPXUrMTticmVha31jb250aW51ZX1vPT09LTEmJihsPSExLG89dSsxKSxmPT09YmU/cz09PS0xP3M9dTpjIT09MSYmKGM9MSk6cyE9PS0xJiYoYz0tMSl9aWYobyE9PS0xKXtjb25zdCBmPWk9PT0wJiZuPzE6aTtzPT09LTF8fGM9PT0wfHxjPT09MSYmcz09PW8tMSYmcz09PWkrMT90LmJhc2U9dC5uYW1lPWUuc2xpY2UoZixvKToodC5uYW1lPWUuc2xpY2UoZixzKSx0LmJhc2U9ZS5zbGljZShmLG8pLHQuZXh0PWUuc2xpY2UocyxvKSl9cmV0dXJuIGk+MD90LmRpcj1lLnNsaWNlKDAsaS0xKTpuJiYodC5kaXI9Ii8iKSx0fSxzZXA6Ii8iLGRlbGltaXRlcjoiOiIsd2luMzI6bnVsbCxwb3NpeDpudWxsfTtlZS53aW4zMj1aLndpbjMyPVosZWUucG9zaXg9Wi5wb3NpeD1lZSx4ZT9aLm5vcm1hbGl6ZTplZS5ub3JtYWxpemUseGU/Wi5yZXNvbHZlOmVlLnJlc29sdmUseGU/Wi5yZWxhdGl2ZTplZS5yZWxhdGl2ZSx4ZT9aLmRpcm5hbWU6ZWUuZGlybmFtZSx4ZT9aLmJhc2VuYW1lOmVlLmJhc2VuYW1lLHhlP1ouZXh0bmFtZTplZS5leHRuYW1lLHhlP1ouc2VwOmVlLnNlcDtjb25zdCBLcz0vXlx3W1x3XGQrLi1dKiQvLGVpPS9eXC8vLHRpPS9eXC9cLy87ZnVuY3Rpb24gbmkoZSx0KXtpZighZS5zY2hlbWUmJnQpdGhyb3cgbmV3IEVycm9yKGBbVXJpRXJyb3JdOiBTY2hlbWUgaXMgbWlzc2luZzoge3NjaGVtZTogIiIsIGF1dGhvcml0eTogIiR7ZS5hdXRob3JpdHl9IiwgcGF0aDogIiR7ZS5wYXRofSIsIHF1ZXJ5OiAiJHtlLnF1ZXJ5fSIsIGZyYWdtZW50OiAiJHtlLmZyYWdtZW50fSJ9YCk7aWYoZS5zY2hlbWUmJiFLcy50ZXN0KGUuc2NoZW1lKSl0aHJvdyBuZXcgRXJyb3IoIltVcmlFcnJvcl06IFNjaGVtZSBjb250YWlucyBpbGxlZ2FsIGNoYXJhY3RlcnMuIik7aWYoZS5wYXRoKXtpZihlLmF1dGhvcml0eSl7aWYoIWVpLnRlc3QoZS5wYXRoKSl0aHJvdyBuZXcgRXJyb3IoJ1tVcmlFcnJvcl06IElmIGEgVVJJIGNvbnRhaW5zIGFuIGF1dGhvcml0eSBjb21wb25lbnQsIHRoZW4gdGhlIHBhdGggY29tcG9uZW50IG11c3QgZWl0aGVyIGJlIGVtcHR5IG9yIGJlZ2luIHdpdGggYSBzbGFzaCAoIi8iKSBjaGFyYWN0ZXInKX1lbHNlIGlmKHRpLnRlc3QoZS5wYXRoKSl0aHJvdyBuZXcgRXJyb3IoJ1tVcmlFcnJvcl06IElmIGEgVVJJIGRvZXMgbm90IGNvbnRhaW4gYW4gYXV0aG9yaXR5IGNvbXBvbmVudCwgdGhlbiB0aGUgcGF0aCBjYW5ub3QgYmVnaW4gd2l0aCB0d28gc2xhc2ggY2hhcmFjdGVycyAoIi8vIiknKX19ZnVuY3Rpb24gcmkoZSx0KXtyZXR1cm4hZSYmIXQ/ImZpbGUiOmV9ZnVuY3Rpb24gc2koZSx0KXtzd2l0Y2goZSl7Y2FzZSJodHRwcyI6Y2FzZSJodHRwIjpjYXNlImZpbGUiOnQ/dFswXSE9PWFlJiYodD1hZSt0KTp0PWFlO2JyZWFrfXJldHVybiB0fWNvbnN0IFc9IiIsYWU9Ii8iLGlpPS9eKChbXjovPyNdKz8pOik/KFwvXC8oW14vPyNdKikpPyhbXj8jXSopKFw/KFteI10qKSk/KCMoLiopKT8vO2NsYXNzIFNle3N0YXRpYyBpc1VyaSh0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIFNlPyEwOnQ/dHlwZW9mIHQuYXV0aG9yaXR5PT0ic3RyaW5nIiYmdHlwZW9mIHQuZnJhZ21lbnQ9PSJzdHJpbmciJiZ0eXBlb2YgdC5wYXRoPT0ic3RyaW5nIiYmdHlwZW9mIHQucXVlcnk9PSJzdHJpbmciJiZ0eXBlb2YgdC5zY2hlbWU9PSJzdHJpbmciJiZ0eXBlb2YgdC5mc1BhdGg9PSJzdHJpbmciJiZ0eXBlb2YgdC53aXRoPT0iZnVuY3Rpb24iJiZ0eXBlb2YgdC50b1N0cmluZz09ImZ1bmN0aW9uIjohMX1jb25zdHJ1Y3Rvcih0LG4scixzLGksbz0hMSl7dHlwZW9mIHQ9PSJvYmplY3QiPyh0aGlzLnNjaGVtZT10LnNjaGVtZXx8Vyx0aGlzLmF1dGhvcml0eT10LmF1dGhvcml0eXx8Vyx0aGlzLnBhdGg9dC5wYXRofHxXLHRoaXMucXVlcnk9dC5xdWVyeXx8Vyx0aGlzLmZyYWdtZW50PXQuZnJhZ21lbnR8fFcpOih0aGlzLnNjaGVtZT1yaSh0LG8pLHRoaXMuYXV0aG9yaXR5PW58fFcsdGhpcy5wYXRoPXNpKHRoaXMuc2NoZW1lLHJ8fFcpLHRoaXMucXVlcnk9c3x8Vyx0aGlzLmZyYWdtZW50PWl8fFcsbmkodGhpcyxvKSl9Z2V0IGZzUGF0aCgpe3JldHVybiBrdCh0aGlzLCExKX13aXRoKHQpe2lmKCF0KXJldHVybiB0aGlzO2xldHtzY2hlbWU6bixhdXRob3JpdHk6cixwYXRoOnMscXVlcnk6aSxmcmFnbWVudDpvfT10O3JldHVybiBuPT09dm9pZCAwP249dGhpcy5zY2hlbWU6bj09PW51bGwmJihuPVcpLHI9PT12b2lkIDA/cj10aGlzLmF1dGhvcml0eTpyPT09bnVsbCYmKHI9Vykscz09PXZvaWQgMD9zPXRoaXMucGF0aDpzPT09bnVsbCYmKHM9VyksaT09PXZvaWQgMD9pPXRoaXMucXVlcnk6aT09PW51bGwmJihpPVcpLG89PT12b2lkIDA/bz10aGlzLmZyYWdtZW50Om89PT1udWxsJiYobz1XKSxuPT09dGhpcy5zY2hlbWUmJnI9PT10aGlzLmF1dGhvcml0eSYmcz09PXRoaXMucGF0aCYmaT09PXRoaXMucXVlcnkmJm89PT10aGlzLmZyYWdtZW50P3RoaXM6bmV3IFRlKG4scixzLGksbyl9c3RhdGljIHBhcnNlKHQsbj0hMSl7Y29uc3Qgcj1paS5leGVjKHQpO3JldHVybiByP25ldyBUZShyWzJdfHxXLGl0KHJbNF18fFcpLGl0KHJbNV18fFcpLGl0KHJbN118fFcpLGl0KHJbOV18fFcpLG4pOm5ldyBUZShXLFcsVyxXLFcpfXN0YXRpYyBmaWxlKHQpe2xldCBuPVc7aWYoemUmJih0PXQucmVwbGFjZSgvXFwvZyxhZSkpLHRbMF09PT1hZSYmdFsxXT09PWFlKXtjb25zdCByPXQuaW5kZXhPZihhZSwyKTtyPT09LTE/KG49dC5zdWJzdHJpbmcoMiksdD1hZSk6KG49dC5zdWJzdHJpbmcoMixyKSx0PXQuc3Vic3RyaW5nKHIpfHxhZSl9cmV0dXJuIG5ldyBUZSgiZmlsZSIsbix0LFcsVyl9c3RhdGljIGZyb20odCxuKXtyZXR1cm4gbmV3IFRlKHQuc2NoZW1lLHQuYXV0aG9yaXR5LHQucGF0aCx0LnF1ZXJ5LHQuZnJhZ21lbnQsbil9c3RhdGljIGpvaW5QYXRoKHQsLi4ubil7aWYoIXQucGF0aCl0aHJvdyBuZXcgRXJyb3IoIltVcmlFcnJvcl06IGNhbm5vdCBjYWxsIGpvaW5QYXRoIG9uIFVSSSB3aXRob3V0IHBhdGgiKTtsZXQgcjtyZXR1cm4gemUmJnQuc2NoZW1lPT09ImZpbGUiP3I9U2UuZmlsZShaLmpvaW4oa3QodCwhMCksLi4ubikpLnBhdGg6cj1lZS5qb2luKHQucGF0aCwuLi5uKSx0LndpdGgoe3BhdGg6cn0pfXRvU3RyaW5nKHQ9ITEpe3JldHVybiBGdCh0aGlzLHQpfXRvSlNPTigpe3JldHVybiB0aGlzfXN0YXRpYyByZXZpdmUodCl7dmFyIG4scjtpZih0KXtpZih0IGluc3RhbmNlb2YgU2UpcmV0dXJuIHQ7e2NvbnN0IHM9bmV3IFRlKHQpO3JldHVybiBzLl9mb3JtYXR0ZWQ9KG49dC5leHRlcm5hbCkhPT1udWxsJiZuIT09dm9pZCAwP246bnVsbCxzLl9mc1BhdGg9dC5fc2VwPT09ZG4mJihyPXQuZnNQYXRoKSE9PW51bGwmJnIhPT12b2lkIDA/cjpudWxsLHN9fWVsc2UgcmV0dXJuIHR9fWNvbnN0IGRuPXplPzE6dm9pZCAwO2NsYXNzIFRlIGV4dGVuZHMgU2V7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuX2Zvcm1hdHRlZD1udWxsLHRoaXMuX2ZzUGF0aD1udWxsfWdldCBmc1BhdGgoKXtyZXR1cm4gdGhpcy5fZnNQYXRofHwodGhpcy5fZnNQYXRoPWt0KHRoaXMsITEpKSx0aGlzLl9mc1BhdGh9dG9TdHJpbmcodD0hMSl7cmV0dXJuIHQ/RnQodGhpcywhMCk6KHRoaXMuX2Zvcm1hdHRlZHx8KHRoaXMuX2Zvcm1hdHRlZD1GdCh0aGlzLCExKSksdGhpcy5fZm9ybWF0dGVkKX10b0pTT04oKXtjb25zdCB0PXskbWlkOjF9O3JldHVybiB0aGlzLl9mc1BhdGgmJih0LmZzUGF0aD10aGlzLl9mc1BhdGgsdC5fc2VwPWRuKSx0aGlzLl9mb3JtYXR0ZWQmJih0LmV4dGVybmFsPXRoaXMuX2Zvcm1hdHRlZCksdGhpcy5wYXRoJiYodC5wYXRoPXRoaXMucGF0aCksdGhpcy5zY2hlbWUmJih0LnNjaGVtZT10aGlzLnNjaGVtZSksdGhpcy5hdXRob3JpdHkmJih0LmF1dGhvcml0eT10aGlzLmF1dGhvcml0eSksdGhpcy5xdWVyeSYmKHQucXVlcnk9dGhpcy5xdWVyeSksdGhpcy5mcmFnbWVudCYmKHQuZnJhZ21lbnQ9dGhpcy5mcmFnbWVudCksdH19Y29uc3QgbW49ezU4OiIlM0EiLDQ3OiIlMkYiLDYzOiIlM0YiLDM1OiIlMjMiLDkxOiIlNUIiLDkzOiIlNUQiLDY0OiIlNDAiLDMzOiIlMjEiLDM2OiIlMjQiLDM4OiIlMjYiLDM5OiIlMjciLDQwOiIlMjgiLDQxOiIlMjkiLDQyOiIlMkEiLDQzOiIlMkIiLDQ0OiIlMkMiLDU5OiIlM0IiLDYxOiIlM0QiLDMyOiIlMjAifTtmdW5jdGlvbiBnbihlLHQsbil7bGV0IHIscz0tMTtmb3IobGV0IGk9MDtpPGUubGVuZ3RoO2krKyl7Y29uc3Qgbz1lLmNoYXJDb2RlQXQoaSk7aWYobz49OTcmJm88PTEyMnx8bz49NjUmJm88PTkwfHxvPj00OCYmbzw9NTd8fG89PT00NXx8bz09PTQ2fHxvPT09OTV8fG89PT0xMjZ8fHQmJm89PT00N3x8biYmbz09PTkxfHxuJiZvPT09OTN8fG4mJm89PT01OClzIT09LTEmJihyKz1lbmNvZGVVUklDb21wb25lbnQoZS5zdWJzdHJpbmcocyxpKSkscz0tMSksciE9PXZvaWQgMCYmKHIrPWUuY2hhckF0KGkpKTtlbHNle3I9PT12b2lkIDAmJihyPWUuc3Vic3RyKDAsaSkpO2NvbnN0IGw9bW5bb107bCE9PXZvaWQgMD8ocyE9PS0xJiYocis9ZW5jb2RlVVJJQ29tcG9uZW50KGUuc3Vic3RyaW5nKHMsaSkpLHM9LTEpLHIrPWwpOnM9PT0tMSYmKHM9aSl9fXJldHVybiBzIT09LTEmJihyKz1lbmNvZGVVUklDb21wb25lbnQoZS5zdWJzdHJpbmcocykpKSxyIT09dm9pZCAwP3I6ZX1mdW5jdGlvbiBhaShlKXtsZXQgdDtmb3IobGV0IG49MDtuPGUubGVuZ3RoO24rKyl7Y29uc3Qgcj1lLmNoYXJDb2RlQXQobik7cj09PTM1fHxyPT09NjM/KHQ9PT12b2lkIDAmJih0PWUuc3Vic3RyKDAsbikpLHQrPW1uW3JdKTp0IT09dm9pZCAwJiYodCs9ZVtuXSl9cmV0dXJuIHQhPT12b2lkIDA/dDplfWZ1bmN0aW9uIGt0KGUsdCl7bGV0IG47cmV0dXJuIGUuYXV0aG9yaXR5JiZlLnBhdGgubGVuZ3RoPjEmJmUuc2NoZW1lPT09ImZpbGUiP249YC8vJHtlLmF1dGhvcml0eX0ke2UucGF0aH1gOmUucGF0aC5jaGFyQ29kZUF0KDApPT09NDcmJihlLnBhdGguY2hhckNvZGVBdCgxKT49NjUmJmUucGF0aC5jaGFyQ29kZUF0KDEpPD05MHx8ZS5wYXRoLmNoYXJDb2RlQXQoMSk+PTk3JiZlLnBhdGguY2hhckNvZGVBdCgxKTw9MTIyKSYmZS5wYXRoLmNoYXJDb2RlQXQoMik9PT01OD90P249ZS5wYXRoLnN1YnN0cigxKTpuPWUucGF0aFsxXS50b0xvd2VyQ2FzZSgpK2UucGF0aC5zdWJzdHIoMik6bj1lLnBhdGgsemUmJihuPW4ucmVwbGFjZSgvXC8vZywiXFwiKSksbn1mdW5jdGlvbiBGdChlLHQpe2NvbnN0IG49dD9haTpnbjtsZXQgcj0iIix7c2NoZW1lOnMsYXV0aG9yaXR5OmkscGF0aDpvLHF1ZXJ5OmwsZnJhZ21lbnQ6dX09ZTtpZihzJiYocis9cyxyKz0iOiIpLChpfHxzPT09ImZpbGUiKSYmKHIrPWFlLHIrPWFlKSxpKXtsZXQgYz1pLmluZGV4T2YoIkAiKTtpZihjIT09LTEpe2NvbnN0IGY9aS5zdWJzdHIoMCxjKTtpPWkuc3Vic3RyKGMrMSksYz1mLmxhc3RJbmRleE9mKCI6IiksYz09PS0xP3IrPW4oZiwhMSwhMSk6KHIrPW4oZi5zdWJzdHIoMCxjKSwhMSwhMSkscis9IjoiLHIrPW4oZi5zdWJzdHIoYysxKSwhMSwhMCkpLHIrPSJAIn1pPWkudG9Mb3dlckNhc2UoKSxjPWkubGFzdEluZGV4T2YoIjoiKSxjPT09LTE/cis9bihpLCExLCEwKToocis9bihpLnN1YnN0cigwLGMpLCExLCEwKSxyKz1pLnN1YnN0cihjKSl9aWYobyl7aWYoby5sZW5ndGg+PTMmJm8uY2hhckNvZGVBdCgwKT09PTQ3JiZvLmNoYXJDb2RlQXQoMik9PT01OCl7Y29uc3QgYz1vLmNoYXJDb2RlQXQoMSk7Yz49NjUmJmM8PTkwJiYobz1gLyR7U3RyaW5nLmZyb21DaGFyQ29kZShjKzMyKX06JHtvLnN1YnN0cigzKX1gKX1lbHNlIGlmKG8ubGVuZ3RoPj0yJiZvLmNoYXJDb2RlQXQoMSk9PT01OCl7Y29uc3QgYz1vLmNoYXJDb2RlQXQoMCk7Yz49NjUmJmM8PTkwJiYobz1gJHtTdHJpbmcuZnJvbUNoYXJDb2RlKGMrMzIpfToke28uc3Vic3RyKDIpfWApfXIrPW4obywhMCwhMSl9cmV0dXJuIGwmJihyKz0iPyIscis9bihsLCExLCExKSksdSYmKHIrPSIjIixyKz10P3U6Z24odSwhMSwhMSkpLHJ9ZnVuY3Rpb24gYm4oZSl7dHJ5e3JldHVybiBkZWNvZGVVUklDb21wb25lbnQoZSl9Y2F0Y2h7cmV0dXJuIGUubGVuZ3RoPjM/ZS5zdWJzdHIoMCwzKStibihlLnN1YnN0cigzKSk6ZX19Y29uc3QgX249LyglWzAtOUEtWmEtel1bMC05QS1aYS16XSkrL2c7ZnVuY3Rpb24gaXQoZSl7cmV0dXJuIGUubWF0Y2goX24pP2UucmVwbGFjZShfbix0PT5ibih0KSk6ZX1jbGFzcyBKe2NvbnN0cnVjdG9yKHQsbil7dGhpcy5saW5lTnVtYmVyPXQsdGhpcy5jb2x1bW49bn13aXRoKHQ9dGhpcy5saW5lTnVtYmVyLG49dGhpcy5jb2x1bW4pe3JldHVybiB0PT09dGhpcy5saW5lTnVtYmVyJiZuPT09dGhpcy5jb2x1bW4/dGhpczpuZXcgSih0LG4pfWRlbHRhKHQ9MCxuPTApe3JldHVybiB0aGlzLndpdGgodGhpcy5saW5lTnVtYmVyK3QsdGhpcy5jb2x1bW4rbil9ZXF1YWxzKHQpe3JldHVybiBKLmVxdWFscyh0aGlzLHQpfXN0YXRpYyBlcXVhbHModCxuKXtyZXR1cm4hdCYmIW4/ITA6ISF0JiYhIW4mJnQubGluZU51bWJlcj09PW4ubGluZU51bWJlciYmdC5jb2x1bW49PT1uLmNvbHVtbn1pc0JlZm9yZSh0KXtyZXR1cm4gSi5pc0JlZm9yZSh0aGlzLHQpfXN0YXRpYyBpc0JlZm9yZSh0LG4pe3JldHVybiB0LmxpbmVOdW1iZXI8bi5saW5lTnVtYmVyPyEwOm4ubGluZU51bWJlcjx0LmxpbmVOdW1iZXI/ITE6dC5jb2x1bW48bi5jb2x1bW59aXNCZWZvcmVPckVxdWFsKHQpe3JldHVybiBKLmlzQmVmb3JlT3JFcXVhbCh0aGlzLHQpfXN0YXRpYyBpc0JlZm9yZU9yRXF1YWwodCxuKXtyZXR1cm4gdC5saW5lTnVtYmVyPG4ubGluZU51bWJlcj8hMDpuLmxpbmVOdW1iZXI8dC5saW5lTnVtYmVyPyExOnQuY29sdW1uPD1uLmNvbHVtbn1zdGF0aWMgY29tcGFyZSh0LG4pe2NvbnN0IHI9dC5saW5lTnVtYmVyfDAscz1uLmxpbmVOdW1iZXJ8MDtpZihyPT09cyl7Y29uc3QgaT10LmNvbHVtbnwwLG89bi5jb2x1bW58MDtyZXR1cm4gaS1vfXJldHVybiByLXN9Y2xvbmUoKXtyZXR1cm4gbmV3IEoodGhpcy5saW5lTnVtYmVyLHRoaXMuY29sdW1uKX10b1N0cmluZygpe3JldHVybiIoIit0aGlzLmxpbmVOdW1iZXIrIiwiK3RoaXMuY29sdW1uKyIpIn1zdGF0aWMgbGlmdCh0KXtyZXR1cm4gbmV3IEoodC5saW5lTnVtYmVyLHQuY29sdW1uKX1zdGF0aWMgaXNJUG9zaXRpb24odCl7cmV0dXJuIHQmJnR5cGVvZiB0LmxpbmVOdW1iZXI9PSJudW1iZXIiJiZ0eXBlb2YgdC5jb2x1bW49PSJudW1iZXIifXRvSlNPTigpe3JldHVybntsaW5lTnVtYmVyOnRoaXMubGluZU51bWJlcixjb2x1bW46dGhpcy5jb2x1bW59fX1jbGFzcyBGe2NvbnN0cnVjdG9yKHQsbixyLHMpe3Q+cnx8dD09PXImJm4+cz8odGhpcy5zdGFydExpbmVOdW1iZXI9cix0aGlzLnN0YXJ0Q29sdW1uPXMsdGhpcy5lbmRMaW5lTnVtYmVyPXQsdGhpcy5lbmRDb2x1bW49bik6KHRoaXMuc3RhcnRMaW5lTnVtYmVyPXQsdGhpcy5zdGFydENvbHVtbj1uLHRoaXMuZW5kTGluZU51bWJlcj1yLHRoaXMuZW5kQ29sdW1uPXMpfWlzRW1wdHkoKXtyZXR1cm4gRi5pc0VtcHR5KHRoaXMpfXN0YXRpYyBpc0VtcHR5KHQpe3JldHVybiB0LnN0YXJ0TGluZU51bWJlcj09PXQuZW5kTGluZU51bWJlciYmdC5zdGFydENvbHVtbj09PXQuZW5kQ29sdW1ufWNvbnRhaW5zUG9zaXRpb24odCl7cmV0dXJuIEYuY29udGFpbnNQb3NpdGlvbih0aGlzLHQpfXN0YXRpYyBjb250YWluc1Bvc2l0aW9uKHQsbil7cmV0dXJuIShuLmxpbmVOdW1iZXI8dC5zdGFydExpbmVOdW1iZXJ8fG4ubGluZU51bWJlcj50LmVuZExpbmVOdW1iZXJ8fG4ubGluZU51bWJlcj09PXQuc3RhcnRMaW5lTnVtYmVyJiZuLmNvbHVtbjx0LnN0YXJ0Q29sdW1ufHxuLmxpbmVOdW1iZXI9PT10LmVuZExpbmVOdW1iZXImJm4uY29sdW1uPnQuZW5kQ29sdW1uKX1zdGF0aWMgc3RyaWN0Q29udGFpbnNQb3NpdGlvbih0LG4pe3JldHVybiEobi5saW5lTnVtYmVyPHQuc3RhcnRMaW5lTnVtYmVyfHxuLmxpbmVOdW1iZXI+dC5lbmRMaW5lTnVtYmVyfHxuLmxpbmVOdW1iZXI9PT10LnN0YXJ0TGluZU51bWJlciYmbi5jb2x1bW48PXQuc3RhcnRDb2x1bW58fG4ubGluZU51bWJlcj09PXQuZW5kTGluZU51bWJlciYmbi5jb2x1bW4+PXQuZW5kQ29sdW1uKX1jb250YWluc1JhbmdlKHQpe3JldHVybiBGLmNvbnRhaW5zUmFuZ2UodGhpcyx0KX1zdGF0aWMgY29udGFpbnNSYW5nZSh0LG4pe3JldHVybiEobi5zdGFydExpbmVOdW1iZXI8dC5zdGFydExpbmVOdW1iZXJ8fG4uZW5kTGluZU51bWJlcjx0LnN0YXJ0TGluZU51bWJlcnx8bi5zdGFydExpbmVOdW1iZXI+dC5lbmRMaW5lTnVtYmVyfHxuLmVuZExpbmVOdW1iZXI+dC5lbmRMaW5lTnVtYmVyfHxuLnN0YXJ0TGluZU51bWJlcj09PXQuc3RhcnRMaW5lTnVtYmVyJiZuLnN0YXJ0Q29sdW1uPHQuc3RhcnRDb2x1bW58fG4uZW5kTGluZU51bWJlcj09PXQuZW5kTGluZU51bWJlciYmbi5lbmRDb2x1bW4+dC5lbmRDb2x1bW4pfXN0cmljdENvbnRhaW5zUmFuZ2UodCl7cmV0dXJuIEYuc3RyaWN0Q29udGFpbnNSYW5nZSh0aGlzLHQpfXN0YXRpYyBzdHJpY3RDb250YWluc1JhbmdlKHQsbil7cmV0dXJuIShuLnN0YXJ0TGluZU51bWJlcjx0LnN0YXJ0TGluZU51bWJlcnx8bi5lbmRMaW5lTnVtYmVyPHQuc3RhcnRMaW5lTnVtYmVyfHxuLnN0YXJ0TGluZU51bWJlcj50LmVuZExpbmVOdW1iZXJ8fG4uZW5kTGluZU51bWJlcj50LmVuZExpbmVOdW1iZXJ8fG4uc3RhcnRMaW5lTnVtYmVyPT09dC5zdGFydExpbmVOdW1iZXImJm4uc3RhcnRDb2x1bW48PXQuc3RhcnRDb2x1bW58fG4uZW5kTGluZU51bWJlcj09PXQuZW5kTGluZU51bWJlciYmbi5lbmRDb2x1bW4+PXQuZW5kQ29sdW1uKX1wbHVzUmFuZ2UodCl7cmV0dXJuIEYucGx1c1JhbmdlKHRoaXMsdCl9c3RhdGljIHBsdXNSYW5nZSh0LG4pe2xldCByLHMsaSxvO3JldHVybiBuLnN0YXJ0TGluZU51bWJlcjx0LnN0YXJ0TGluZU51bWJlcj8ocj1uLnN0YXJ0TGluZU51bWJlcixzPW4uc3RhcnRDb2x1bW4pOm4uc3RhcnRMaW5lTnVtYmVyPT09dC5zdGFydExpbmVOdW1iZXI/KHI9bi5zdGFydExpbmVOdW1iZXIscz1NYXRoLm1pbihuLnN0YXJ0Q29sdW1uLHQuc3RhcnRDb2x1bW4pKToocj10LnN0YXJ0TGluZU51bWJlcixzPXQuc3RhcnRDb2x1bW4pLG4uZW5kTGluZU51bWJlcj50LmVuZExpbmVOdW1iZXI/KGk9bi5lbmRMaW5lTnVtYmVyLG89bi5lbmRDb2x1bW4pOm4uZW5kTGluZU51bWJlcj09PXQuZW5kTGluZU51bWJlcj8oaT1uLmVuZExpbmVOdW1iZXIsbz1NYXRoLm1heChuLmVuZENvbHVtbix0LmVuZENvbHVtbikpOihpPXQuZW5kTGluZU51bWJlcixvPXQuZW5kQ29sdW1uKSxuZXcgRihyLHMsaSxvKX1pbnRlcnNlY3RSYW5nZXModCl7cmV0dXJuIEYuaW50ZXJzZWN0UmFuZ2VzKHRoaXMsdCl9c3RhdGljIGludGVyc2VjdFJhbmdlcyh0LG4pe2xldCByPXQuc3RhcnRMaW5lTnVtYmVyLHM9dC5zdGFydENvbHVtbixpPXQuZW5kTGluZU51bWJlcixvPXQuZW5kQ29sdW1uO2NvbnN0IGw9bi5zdGFydExpbmVOdW1iZXIsdT1uLnN0YXJ0Q29sdW1uLGM9bi5lbmRMaW5lTnVtYmVyLGY9bi5lbmRDb2x1bW47cmV0dXJuIHI8bD8ocj1sLHM9dSk6cj09PWwmJihzPU1hdGgubWF4KHMsdSkpLGk+Yz8oaT1jLG89Zik6aT09PWMmJihvPU1hdGgubWluKG8sZikpLHI+aXx8cj09PWkmJnM+bz9udWxsOm5ldyBGKHIscyxpLG8pfWVxdWFsc1JhbmdlKHQpe3JldHVybiBGLmVxdWFsc1JhbmdlKHRoaXMsdCl9c3RhdGljIGVxdWFsc1JhbmdlKHQsbil7cmV0dXJuIXQmJiFuPyEwOiEhdCYmISFuJiZ0LnN0YXJ0TGluZU51bWJlcj09PW4uc3RhcnRMaW5lTnVtYmVyJiZ0LnN0YXJ0Q29sdW1uPT09bi5zdGFydENvbHVtbiYmdC5lbmRMaW5lTnVtYmVyPT09bi5lbmRMaW5lTnVtYmVyJiZ0LmVuZENvbHVtbj09PW4uZW5kQ29sdW1ufWdldEVuZFBvc2l0aW9uKCl7cmV0dXJuIEYuZ2V0RW5kUG9zaXRpb24odGhpcyl9c3RhdGljIGdldEVuZFBvc2l0aW9uKHQpe3JldHVybiBuZXcgSih0LmVuZExpbmVOdW1iZXIsdC5lbmRDb2x1bW4pfWdldFN0YXJ0UG9zaXRpb24oKXtyZXR1cm4gRi5nZXRTdGFydFBvc2l0aW9uKHRoaXMpfXN0YXRpYyBnZXRTdGFydFBvc2l0aW9uKHQpe3JldHVybiBuZXcgSih0LnN0YXJ0TGluZU51bWJlcix0LnN0YXJ0Q29sdW1uKX10b1N0cmluZygpe3JldHVybiJbIit0aGlzLnN0YXJ0TGluZU51bWJlcisiLCIrdGhpcy5zdGFydENvbHVtbisiIC0+ICIrdGhpcy5lbmRMaW5lTnVtYmVyKyIsIit0aGlzLmVuZENvbHVtbisiXSJ9c2V0RW5kUG9zaXRpb24odCxuKXtyZXR1cm4gbmV3IEYodGhpcy5zdGFydExpbmVOdW1iZXIsdGhpcy5zdGFydENvbHVtbix0LG4pfXNldFN0YXJ0UG9zaXRpb24odCxuKXtyZXR1cm4gbmV3IEYodCxuLHRoaXMuZW5kTGluZU51bWJlcix0aGlzLmVuZENvbHVtbil9Y29sbGFwc2VUb1N0YXJ0KCl7cmV0dXJuIEYuY29sbGFwc2VUb1N0YXJ0KHRoaXMpfXN0YXRpYyBjb2xsYXBzZVRvU3RhcnQodCl7cmV0dXJuIG5ldyBGKHQuc3RhcnRMaW5lTnVtYmVyLHQuc3RhcnRDb2x1bW4sdC5zdGFydExpbmVOdW1iZXIsdC5zdGFydENvbHVtbil9Y29sbGFwc2VUb0VuZCgpe3JldHVybiBGLmNvbGxhcHNlVG9FbmQodGhpcyl9c3RhdGljIGNvbGxhcHNlVG9FbmQodCl7cmV0dXJuIG5ldyBGKHQuZW5kTGluZU51bWJlcix0LmVuZENvbHVtbix0LmVuZExpbmVOdW1iZXIsdC5lbmRDb2x1bW4pfWRlbHRhKHQpe3JldHVybiBuZXcgRih0aGlzLnN0YXJ0TGluZU51bWJlcit0LHRoaXMuc3RhcnRDb2x1bW4sdGhpcy5lbmRMaW5lTnVtYmVyK3QsdGhpcy5lbmRDb2x1bW4pfXN0YXRpYyBmcm9tUG9zaXRpb25zKHQsbj10KXtyZXR1cm4gbmV3IEYodC5saW5lTnVtYmVyLHQuY29sdW1uLG4ubGluZU51bWJlcixuLmNvbHVtbil9c3RhdGljIGxpZnQodCl7cmV0dXJuIHQ/bmV3IEYodC5zdGFydExpbmVOdW1iZXIsdC5zdGFydENvbHVtbix0LmVuZExpbmVOdW1iZXIsdC5lbmRDb2x1bW4pOm51bGx9c3RhdGljIGlzSVJhbmdlKHQpe3JldHVybiB0JiZ0eXBlb2YgdC5zdGFydExpbmVOdW1iZXI9PSJudW1iZXIiJiZ0eXBlb2YgdC5zdGFydENvbHVtbj09Im51bWJlciImJnR5cGVvZiB0LmVuZExpbmVOdW1iZXI9PSJudW1iZXIiJiZ0eXBlb2YgdC5lbmRDb2x1bW49PSJudW1iZXIifXN0YXRpYyBhcmVJbnRlcnNlY3RpbmdPclRvdWNoaW5nKHQsbil7cmV0dXJuISh0LmVuZExpbmVOdW1iZXI8bi5zdGFydExpbmVOdW1iZXJ8fHQuZW5kTGluZU51bWJlcj09PW4uc3RhcnRMaW5lTnVtYmVyJiZ0LmVuZENvbHVtbjxuLnN0YXJ0Q29sdW1ufHxuLmVuZExpbmVOdW1iZXI8dC5zdGFydExpbmVOdW1iZXJ8fG4uZW5kTGluZU51bWJlcj09PXQuc3RhcnRMaW5lTnVtYmVyJiZuLmVuZENvbHVtbjx0LnN0YXJ0Q29sdW1uKX1zdGF0aWMgYXJlSW50ZXJzZWN0aW5nKHQsbil7cmV0dXJuISh0LmVuZExpbmVOdW1iZXI8bi5zdGFydExpbmVOdW1iZXJ8fHQuZW5kTGluZU51bWJlcj09PW4uc3RhcnRMaW5lTnVtYmVyJiZ0LmVuZENvbHVtbjw9bi5zdGFydENvbHVtbnx8bi5lbmRMaW5lTnVtYmVyPHQuc3RhcnRMaW5lTnVtYmVyfHxuLmVuZExpbmVOdW1iZXI9PT10LnN0YXJ0TGluZU51bWJlciYmbi5lbmRDb2x1bW48PXQuc3RhcnRDb2x1bW4pfXN0YXRpYyBjb21wYXJlUmFuZ2VzVXNpbmdTdGFydHModCxuKXtpZih0JiZuKXtjb25zdCBpPXQuc3RhcnRMaW5lTnVtYmVyfDAsbz1uLnN0YXJ0TGluZU51bWJlcnwwO2lmKGk9PT1vKXtjb25zdCBsPXQuc3RhcnRDb2x1bW58MCx1PW4uc3RhcnRDb2x1bW58MDtpZihsPT09dSl7Y29uc3QgYz10LmVuZExpbmVOdW1iZXJ8MCxmPW4uZW5kTGluZU51bWJlcnwwO2lmKGM9PT1mKXtjb25zdCBoPXQuZW5kQ29sdW1ufDAsZD1uLmVuZENvbHVtbnwwO3JldHVybiBoLWR9cmV0dXJuIGMtZn1yZXR1cm4gbC11fXJldHVybiBpLW99cmV0dXJuKHQ/MTowKS0obj8xOjApfXN0YXRpYyBjb21wYXJlUmFuZ2VzVXNpbmdFbmRzKHQsbil7cmV0dXJuIHQuZW5kTGluZU51bWJlcj09PW4uZW5kTGluZU51bWJlcj90LmVuZENvbHVtbj09PW4uZW5kQ29sdW1uP3Quc3RhcnRMaW5lTnVtYmVyPT09bi5zdGFydExpbmVOdW1iZXI/dC5zdGFydENvbHVtbi1uLnN0YXJ0Q29sdW1uOnQuc3RhcnRMaW5lTnVtYmVyLW4uc3RhcnRMaW5lTnVtYmVyOnQuZW5kQ29sdW1uLW4uZW5kQ29sdW1uOnQuZW5kTGluZU51bWJlci1uLmVuZExpbmVOdW1iZXJ9c3RhdGljIHNwYW5zTXVsdGlwbGVMaW5lcyh0KXtyZXR1cm4gdC5lbmRMaW5lTnVtYmVyPnQuc3RhcnRMaW5lTnVtYmVyfXRvSlNPTigpe3JldHVybiB0aGlzfX1mdW5jdGlvbiBvaShlLHQsbj0ocixzKT0+cj09PXMpe2lmKGU9PT10KXJldHVybiEwO2lmKCFlfHwhdHx8ZS5sZW5ndGghPT10Lmxlbmd0aClyZXR1cm4hMTtmb3IobGV0IHI9MCxzPWUubGVuZ3RoO3I8cztyKyspaWYoIW4oZVtyXSx0W3JdKSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbipsaShlLHQpe2xldCBuLHI7Zm9yKGNvbnN0IHMgb2YgZSlyIT09dm9pZCAwJiZ0KHIscyk/bi5wdXNoKHMpOihuJiYoeWllbGQgbiksbj1bc10pLHI9cztuJiYoeWllbGQgbil9ZnVuY3Rpb24gdWkoZSx0KXtmb3IobGV0IG49MDtuPD1lLmxlbmd0aDtuKyspdChuPT09MD92b2lkIDA6ZVtuLTFdLG49PT1lLmxlbmd0aD92b2lkIDA6ZVtuXSl9ZnVuY3Rpb24gY2koZSx0KXtmb3IobGV0IG49MDtuPGUubGVuZ3RoO24rKyl0KG49PT0wP3ZvaWQgMDplW24tMV0sZVtuXSxuKzE9PT1lLmxlbmd0aD92b2lkIDA6ZVtuKzFdKX1mdW5jdGlvbiBoaShlLHQpe2Zvcihjb25zdCBuIG9mIHQpZS5wdXNoKG4pfXZhciB4bjsoZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChpKXtyZXR1cm4gaTwwfWUuaXNMZXNzVGhhbj10O2Z1bmN0aW9uIG4oaSl7cmV0dXJuIGk8PTB9ZS5pc0xlc3NUaGFuT3JFcXVhbD1uO2Z1bmN0aW9uIHIoaSl7cmV0dXJuIGk+MH1lLmlzR3JlYXRlclRoYW49cjtmdW5jdGlvbiBzKGkpe3JldHVybiBpPT09MH1lLmlzTmVpdGhlckxlc3NPckdyZWF0ZXJUaGFuPXMsZS5ncmVhdGVyVGhhbj0xLGUubGVzc1RoYW49LTEsZS5uZWl0aGVyTGVzc09yR3JlYXRlclRoYW49MH0pKHhufHwoeG49e30pKTtmdW5jdGlvbiBhdChlLHQpe3JldHVybihuLHIpPT50KGUobiksZShyKSl9Y29uc3Qgb3Q9KGUsdCk9PmUtdDtmdW5jdGlvbiBmaShlKXtyZXR1cm4odCxuKT0+LWUodCxuKX1mdW5jdGlvbiBwbihlKXtyZXR1cm4gZTwwPzA6ZT4yNTU/MjU1OmV8MH1mdW5jdGlvbiBWZShlKXtyZXR1cm4gZTwwPzA6ZT40Mjk0OTY3Mjk1PzQyOTQ5NjcyOTU6ZXwwfWNsYXNzIGRpe2NvbnN0cnVjdG9yKHQpe3RoaXMudmFsdWVzPXQsdGhpcy5wcmVmaXhTdW09bmV3IFVpbnQzMkFycmF5KHQubGVuZ3RoKSx0aGlzLnByZWZpeFN1bVZhbGlkSW5kZXg9bmV3IEludDMyQXJyYXkoMSksdGhpcy5wcmVmaXhTdW1WYWxpZEluZGV4WzBdPS0xfWluc2VydFZhbHVlcyh0LG4pe3Q9VmUodCk7Y29uc3Qgcj10aGlzLnZhbHVlcyxzPXRoaXMucHJlZml4U3VtLGk9bi5sZW5ndGg7cmV0dXJuIGk9PT0wPyExOih0aGlzLnZhbHVlcz1uZXcgVWludDMyQXJyYXkoci5sZW5ndGgraSksdGhpcy52YWx1ZXMuc2V0KHIuc3ViYXJyYXkoMCx0KSwwKSx0aGlzLnZhbHVlcy5zZXQoci5zdWJhcnJheSh0KSx0K2kpLHRoaXMudmFsdWVzLnNldChuLHQpLHQtMTx0aGlzLnByZWZpeFN1bVZhbGlkSW5kZXhbMF0mJih0aGlzLnByZWZpeFN1bVZhbGlkSW5kZXhbMF09dC0xKSx0aGlzLnByZWZpeFN1bT1uZXcgVWludDMyQXJyYXkodGhpcy52YWx1ZXMubGVuZ3RoKSx0aGlzLnByZWZpeFN1bVZhbGlkSW5kZXhbMF0+PTAmJnRoaXMucHJlZml4U3VtLnNldChzLnN1YmFycmF5KDAsdGhpcy5wcmVmaXhTdW1WYWxpZEluZGV4WzBdKzEpKSwhMCl9c2V0VmFsdWUodCxuKXtyZXR1cm4gdD1WZSh0KSxuPVZlKG4pLHRoaXMudmFsdWVzW3RdPT09bj8hMToodGhpcy52YWx1ZXNbdF09bix0LTE8dGhpcy5wcmVmaXhTdW1WYWxpZEluZGV4WzBdJiYodGhpcy5wcmVmaXhTdW1WYWxpZEluZGV4WzBdPXQtMSksITApfXJlbW92ZVZhbHVlcyh0LG4pe3Q9VmUodCksbj1WZShuKTtjb25zdCByPXRoaXMudmFsdWVzLHM9dGhpcy5wcmVmaXhTdW07aWYodD49ci5sZW5ndGgpcmV0dXJuITE7Y29uc3QgaT1yLmxlbmd0aC10O3JldHVybiBuPj1pJiYobj1pKSxuPT09MD8hMToodGhpcy52YWx1ZXM9bmV3IFVpbnQzMkFycmF5KHIubGVuZ3RoLW4pLHRoaXMudmFsdWVzLnNldChyLnN1YmFycmF5KDAsdCksMCksdGhpcy52YWx1ZXMuc2V0KHIuc3ViYXJyYXkodCtuKSx0KSx0aGlzLnByZWZpeFN1bT1uZXcgVWludDMyQXJyYXkodGhpcy52YWx1ZXMubGVuZ3RoKSx0LTE8dGhpcy5wcmVmaXhTdW1WYWxpZEluZGV4WzBdJiYodGhpcy5wcmVmaXhTdW1WYWxpZEluZGV4WzBdPXQtMSksdGhpcy5wcmVmaXhTdW1WYWxpZEluZGV4WzBdPj0wJiZ0aGlzLnByZWZpeFN1bS5zZXQocy5zdWJhcnJheSgwLHRoaXMucHJlZml4U3VtVmFsaWRJbmRleFswXSsxKSksITApfWdldFRvdGFsU3VtKCl7cmV0dXJuIHRoaXMudmFsdWVzLmxlbmd0aD09PTA/MDp0aGlzLl9nZXRQcmVmaXhTdW0odGhpcy52YWx1ZXMubGVuZ3RoLTEpfWdldFByZWZpeFN1bSh0KXtyZXR1cm4gdDwwPzA6KHQ9VmUodCksdGhpcy5fZ2V0UHJlZml4U3VtKHQpKX1fZ2V0UHJlZml4U3VtKHQpe2lmKHQ8PXRoaXMucHJlZml4U3VtVmFsaWRJbmRleFswXSlyZXR1cm4gdGhpcy5wcmVmaXhTdW1bdF07bGV0IG49dGhpcy5wcmVmaXhTdW1WYWxpZEluZGV4WzBdKzE7bj09PTAmJih0aGlzLnByZWZpeFN1bVswXT10aGlzLnZhbHVlc1swXSxuKyspLHQ+PXRoaXMudmFsdWVzLmxlbmd0aCYmKHQ9dGhpcy52YWx1ZXMubGVuZ3RoLTEpO2ZvcihsZXQgcj1uO3I8PXQ7cisrKXRoaXMucHJlZml4U3VtW3JdPXRoaXMucHJlZml4U3VtW3ItMV0rdGhpcy52YWx1ZXNbcl07cmV0dXJuIHRoaXMucHJlZml4U3VtVmFsaWRJbmRleFswXT1NYXRoLm1heCh0aGlzLnByZWZpeFN1bVZhbGlkSW5kZXhbMF0sdCksdGhpcy5wcmVmaXhTdW1bdF19Z2V0SW5kZXhPZih0KXt0PU1hdGguZmxvb3IodCksdGhpcy5nZXRUb3RhbFN1bSgpO2xldCBuPTAscj10aGlzLnZhbHVlcy5sZW5ndGgtMSxzPTAsaT0wLG89MDtmb3IoO248PXI7KWlmKHM9bisoci1uKS8yfDAsaT10aGlzLnByZWZpeFN1bVtzXSxvPWktdGhpcy52YWx1ZXNbc10sdDxvKXI9cy0xO2Vsc2UgaWYodD49aSluPXMrMTtlbHNlIGJyZWFrO3JldHVybiBuZXcgbWkocyx0LW8pfX1jbGFzcyBtaXtjb25zdHJ1Y3Rvcih0LG4pe3RoaXMuaW5kZXg9dCx0aGlzLnJlbWFpbmRlcj1uLHRoaXMuX3ByZWZpeFN1bUluZGV4T2ZSZXN1bHRCcmFuZD12b2lkIDAsdGhpcy5pbmRleD10LHRoaXMucmVtYWluZGVyPW59fWNsYXNzIGdpe2NvbnN0cnVjdG9yKHQsbixyLHMpe3RoaXMuX3VyaT10LHRoaXMuX2xpbmVzPW4sdGhpcy5fZW9sPXIsdGhpcy5fdmVyc2lvbklkPXMsdGhpcy5fbGluZVN0YXJ0cz1udWxsLHRoaXMuX2NhY2hlZFRleHRWYWx1ZT1udWxsfWRpc3Bvc2UoKXt0aGlzLl9saW5lcy5sZW5ndGg9MH1nZXQgdmVyc2lvbigpe3JldHVybiB0aGlzLl92ZXJzaW9uSWR9Z2V0VGV4dCgpe3JldHVybiB0aGlzLl9jYWNoZWRUZXh0VmFsdWU9PT1udWxsJiYodGhpcy5fY2FjaGVkVGV4dFZhbHVlPXRoaXMuX2xpbmVzLmpvaW4odGhpcy5fZW9sKSksdGhpcy5fY2FjaGVkVGV4dFZhbHVlfW9uRXZlbnRzKHQpe3QuZW9sJiZ0LmVvbCE9PXRoaXMuX2VvbCYmKHRoaXMuX2VvbD10LmVvbCx0aGlzLl9saW5lU3RhcnRzPW51bGwpO2NvbnN0IG49dC5jaGFuZ2VzO2Zvcihjb25zdCByIG9mIG4pdGhpcy5fYWNjZXB0RGVsZXRlUmFuZ2Uoci5yYW5nZSksdGhpcy5fYWNjZXB0SW5zZXJ0VGV4dChuZXcgSihyLnJhbmdlLnN0YXJ0TGluZU51bWJlcixyLnJhbmdlLnN0YXJ0Q29sdW1uKSxyLnRleHQpO3RoaXMuX3ZlcnNpb25JZD10LnZlcnNpb25JZCx0aGlzLl9jYWNoZWRUZXh0VmFsdWU9bnVsbH1fZW5zdXJlTGluZVN0YXJ0cygpe2lmKCF0aGlzLl9saW5lU3RhcnRzKXtjb25zdCB0PXRoaXMuX2VvbC5sZW5ndGgsbj10aGlzLl9saW5lcy5sZW5ndGgscj1uZXcgVWludDMyQXJyYXkobik7Zm9yKGxldCBzPTA7czxuO3MrKylyW3NdPXRoaXMuX2xpbmVzW3NdLmxlbmd0aCt0O3RoaXMuX2xpbmVTdGFydHM9bmV3IGRpKHIpfX1fc2V0TGluZVRleHQodCxuKXt0aGlzLl9saW5lc1t0XT1uLHRoaXMuX2xpbmVTdGFydHMmJnRoaXMuX2xpbmVTdGFydHMuc2V0VmFsdWUodCx0aGlzLl9saW5lc1t0XS5sZW5ndGgrdGhpcy5fZW9sLmxlbmd0aCl9X2FjY2VwdERlbGV0ZVJhbmdlKHQpe2lmKHQuc3RhcnRMaW5lTnVtYmVyPT09dC5lbmRMaW5lTnVtYmVyKXtpZih0LnN0YXJ0Q29sdW1uPT09dC5lbmRDb2x1bW4pcmV0dXJuO3RoaXMuX3NldExpbmVUZXh0KHQuc3RhcnRMaW5lTnVtYmVyLTEsdGhpcy5fbGluZXNbdC5zdGFydExpbmVOdW1iZXItMV0uc3Vic3RyaW5nKDAsdC5zdGFydENvbHVtbi0xKSt0aGlzLl9saW5lc1t0LnN0YXJ0TGluZU51bWJlci0xXS5zdWJzdHJpbmcodC5lbmRDb2x1bW4tMSkpO3JldHVybn10aGlzLl9zZXRMaW5lVGV4dCh0LnN0YXJ0TGluZU51bWJlci0xLHRoaXMuX2xpbmVzW3Quc3RhcnRMaW5lTnVtYmVyLTFdLnN1YnN0cmluZygwLHQuc3RhcnRDb2x1bW4tMSkrdGhpcy5fbGluZXNbdC5lbmRMaW5lTnVtYmVyLTFdLnN1YnN0cmluZyh0LmVuZENvbHVtbi0xKSksdGhpcy5fbGluZXMuc3BsaWNlKHQuc3RhcnRMaW5lTnVtYmVyLHQuZW5kTGluZU51bWJlci10LnN0YXJ0TGluZU51bWJlciksdGhpcy5fbGluZVN0YXJ0cyYmdGhpcy5fbGluZVN0YXJ0cy5yZW1vdmVWYWx1ZXModC5zdGFydExpbmVOdW1iZXIsdC5lbmRMaW5lTnVtYmVyLXQuc3RhcnRMaW5lTnVtYmVyKX1fYWNjZXB0SW5zZXJ0VGV4dCh0LG4pe2lmKG4ubGVuZ3RoPT09MClyZXR1cm47Y29uc3Qgcj1BcyhuKTtpZihyLmxlbmd0aD09PTEpe3RoaXMuX3NldExpbmVUZXh0KHQubGluZU51bWJlci0xLHRoaXMuX2xpbmVzW3QubGluZU51bWJlci0xXS5zdWJzdHJpbmcoMCx0LmNvbHVtbi0xKStyWzBdK3RoaXMuX2xpbmVzW3QubGluZU51bWJlci0xXS5zdWJzdHJpbmcodC5jb2x1bW4tMSkpO3JldHVybn1yW3IubGVuZ3RoLTFdKz10aGlzLl9saW5lc1t0LmxpbmVOdW1iZXItMV0uc3Vic3RyaW5nKHQuY29sdW1uLTEpLHRoaXMuX3NldExpbmVUZXh0KHQubGluZU51bWJlci0xLHRoaXMuX2xpbmVzW3QubGluZU51bWJlci0xXS5zdWJzdHJpbmcoMCx0LmNvbHVtbi0xKStyWzBdKTtjb25zdCBzPW5ldyBVaW50MzJBcnJheShyLmxlbmd0aC0xKTtmb3IobGV0IGk9MTtpPHIubGVuZ3RoO2krKyl0aGlzLl9saW5lcy5zcGxpY2UodC5saW5lTnVtYmVyK2ktMSwwLHJbaV0pLHNbaS0xXT1yW2ldLmxlbmd0aCt0aGlzLl9lb2wubGVuZ3RoO3RoaXMuX2xpbmVTdGFydHMmJnRoaXMuX2xpbmVTdGFydHMuaW5zZXJ0VmFsdWVzKHQubGluZU51bWJlcixzKX19Y29uc3QgYmk9ImB+IUAjJCVeJiooKS09K1t7XX1cXHw7OidcIiwuPD4vPyI7ZnVuY3Rpb24gX2koZT0iIil7bGV0IHQ9IigtP1xcZCpcXC5cXGRcXHcqKXwoW14iO2Zvcihjb25zdCBuIG9mIGJpKWUuaW5kZXhPZihuKT49MHx8KHQrPSJcXCIrbik7cmV0dXJuIHQrPSJcXHNdKykiLG5ldyBSZWdFeHAodCwiZyIpfWNvbnN0IHZuPV9pKCk7ZnVuY3Rpb24gd24oZSl7bGV0IHQ9dm47aWYoZSYmZSBpbnN0YW5jZW9mIFJlZ0V4cClpZihlLmdsb2JhbCl0PWU7ZWxzZXtsZXQgbj0iZyI7ZS5pZ25vcmVDYXNlJiYobis9ImkiKSxlLm11bHRpbGluZSYmKG4rPSJtIiksZS51bmljb2RlJiYobis9InUiKSx0PW5ldyBSZWdFeHAoZS5zb3VyY2Usbil9cmV0dXJuIHQubGFzdEluZGV4PTAsdH1jb25zdCBMbj1uZXcgaXM7TG4udW5zaGlmdCh7bWF4TGVuOjFlMyx3aW5kb3dTaXplOjE1LHRpbWVCdWRnZXQ6MTUwfSk7ZnVuY3Rpb24gUHQoZSx0LG4scixzKXtpZih0PXduKHQpLHN8fChzPUtlLmZpcnN0KExuKSksbi5sZW5ndGg+cy5tYXhMZW4pe2xldCBjPWUtcy5tYXhMZW4vMjtyZXR1cm4gYzwwP2M9MDpyKz1jLG49bi5zdWJzdHJpbmcoYyxlK3MubWF4TGVuLzIpLFB0KGUsdCxuLHIscyl9Y29uc3QgaT1EYXRlLm5vdygpLG89ZS0xLXI7bGV0IGw9LTEsdT1udWxsO2ZvcihsZXQgYz0xOyEoRGF0ZS5ub3coKS1pPj1zLnRpbWVCdWRnZXQpO2MrKyl7Y29uc3QgZj1vLXMud2luZG93U2l6ZSpjO3QubGFzdEluZGV4PU1hdGgubWF4KDAsZik7Y29uc3QgaD14aSh0LG4sbyxsKTtpZighaCYmdXx8KHU9aCxmPD0wKSlicmVhaztsPWZ9aWYodSl7Y29uc3QgYz17d29yZDp1WzBdLHN0YXJ0Q29sdW1uOnIrMSt1LmluZGV4LGVuZENvbHVtbjpyKzErdS5pbmRleCt1WzBdLmxlbmd0aH07cmV0dXJuIHQubGFzdEluZGV4PTAsY31yZXR1cm4gbnVsbH1mdW5jdGlvbiB4aShlLHQsbixyKXtsZXQgcztmb3IoO3M9ZS5leGVjKHQpOyl7Y29uc3QgaT1zLmluZGV4fHwwO2lmKGk8PW4mJmUubGFzdEluZGV4Pj1uKXJldHVybiBzO2lmKHI+MCYmaT5yKXJldHVybiBudWxsfXJldHVybiBudWxsfWNsYXNzIER0e2NvbnN0cnVjdG9yKHQpe2NvbnN0IG49cG4odCk7dGhpcy5fZGVmYXVsdFZhbHVlPW4sdGhpcy5fYXNjaWlNYXA9RHQuX2NyZWF0ZUFzY2lpTWFwKG4pLHRoaXMuX21hcD1uZXcgTWFwfXN0YXRpYyBfY3JlYXRlQXNjaWlNYXAodCl7Y29uc3Qgbj1uZXcgVWludDhBcnJheSgyNTYpO3JldHVybiBuLmZpbGwodCksbn1zZXQodCxuKXtjb25zdCByPXBuKG4pO3Q+PTAmJnQ8MjU2P3RoaXMuX2FzY2lpTWFwW3RdPXI6dGhpcy5fbWFwLnNldCh0LHIpfWdldCh0KXtyZXR1cm4gdD49MCYmdDwyNTY/dGhpcy5fYXNjaWlNYXBbdF06dGhpcy5fbWFwLmdldCh0KXx8dGhpcy5fZGVmYXVsdFZhbHVlfWNsZWFyKCl7dGhpcy5fYXNjaWlNYXAuZmlsbCh0aGlzLl9kZWZhdWx0VmFsdWUpLHRoaXMuX21hcC5jbGVhcigpfX1jbGFzcyBwaXtjb25zdHJ1Y3Rvcih0LG4scil7Y29uc3Qgcz1uZXcgVWludDhBcnJheSh0Km4pO2ZvcihsZXQgaT0wLG89dCpuO2k8bztpKyspc1tpXT1yO3RoaXMuX2RhdGE9cyx0aGlzLnJvd3M9dCx0aGlzLmNvbHM9bn1nZXQodCxuKXtyZXR1cm4gdGhpcy5fZGF0YVt0KnRoaXMuY29scytuXX1zZXQodCxuLHIpe3RoaXMuX2RhdGFbdCp0aGlzLmNvbHMrbl09cn19Y2xhc3Mgdml7Y29uc3RydWN0b3IodCl7bGV0IG49MCxyPTA7Zm9yKGxldCBpPTAsbz10Lmxlbmd0aDtpPG87aSsrKXtjb25zdFtsLHUsY109dFtpXTt1Pm4mJihuPXUpLGw+ciYmKHI9bCksYz5yJiYocj1jKX1uKysscisrO2NvbnN0IHM9bmV3IHBpKHIsbiwwKTtmb3IobGV0IGk9MCxvPXQubGVuZ3RoO2k8bztpKyspe2NvbnN0W2wsdSxjXT10W2ldO3Muc2V0KGwsdSxjKX10aGlzLl9zdGF0ZXM9cyx0aGlzLl9tYXhDaGFyQ29kZT1ufW5leHRTdGF0ZSh0LG4pe3JldHVybiBuPDB8fG4+PXRoaXMuX21heENoYXJDb2RlPzA6dGhpcy5fc3RhdGVzLmdldCh0LG4pfX1sZXQgVHQ9bnVsbDtmdW5jdGlvbiB3aSgpe3JldHVybiBUdD09PW51bGwmJihUdD1uZXcgdmkoW1sxLDEwNCwyXSxbMSw3MiwyXSxbMSwxMDIsNl0sWzEsNzAsNl0sWzIsMTE2LDNdLFsyLDg0LDNdLFszLDExNiw0XSxbMyw4NCw0XSxbNCwxMTIsNV0sWzQsODAsNV0sWzUsMTE1LDldLFs1LDgzLDldLFs1LDU4LDEwXSxbNiwxMDUsN10sWzYsNzMsN10sWzcsMTA4LDhdLFs3LDc2LDhdLFs4LDEwMSw5XSxbOCw2OSw5XSxbOSw1OCwxMF0sWzEwLDQ3LDExXSxbMTEsNDcsMTJdXSkpLFR0fWxldCAkZT1udWxsO2Z1bmN0aW9uIExpKCl7aWYoJGU9PT1udWxsKXskZT1uZXcgRHQoMCk7Y29uc3QgZT1gIAk8Pici44CB44CC772h772k77yM77yO77ya77yb4oCY44CI44CM44CO44CU77yI77y7772b772i772j772d77y977yJ44CV44CP44CN44CJ4oCZ772A772e4oCmYDtmb3IobGV0IG49MDtuPGUubGVuZ3RoO24rKykkZS5zZXQoZS5jaGFyQ29kZUF0KG4pLDEpO2NvbnN0IHQ9Ii4sOzoiO2ZvcihsZXQgbj0wO248dC5sZW5ndGg7bisrKSRlLnNldCh0LmNoYXJDb2RlQXQobiksMil9cmV0dXJuICRlfWNsYXNzIGx0e3N0YXRpYyBfY3JlYXRlTGluayh0LG4scixzLGkpe2xldCBvPWktMTtkb3tjb25zdCBsPW4uY2hhckNvZGVBdChvKTtpZih0LmdldChsKSE9PTIpYnJlYWs7by0tfXdoaWxlKG8+cyk7aWYocz4wKXtjb25zdCBsPW4uY2hhckNvZGVBdChzLTEpLHU9bi5jaGFyQ29kZUF0KG8pOyhsPT09NDAmJnU9PT00MXx8bD09PTkxJiZ1PT09OTN8fGw9PT0xMjMmJnU9PT0xMjUpJiZvLS19cmV0dXJue3JhbmdlOntzdGFydExpbmVOdW1iZXI6cixzdGFydENvbHVtbjpzKzEsZW5kTGluZU51bWJlcjpyLGVuZENvbHVtbjpvKzJ9LHVybDpuLnN1YnN0cmluZyhzLG8rMSl9fXN0YXRpYyBjb21wdXRlTGlua3ModCxuPXdpKCkpe2NvbnN0IHI9TGkoKSxzPVtdO2ZvcihsZXQgaT0xLG89dC5nZXRMaW5lQ291bnQoKTtpPD1vO2krKyl7Y29uc3QgbD10LmdldExpbmVDb250ZW50KGkpLHU9bC5sZW5ndGg7bGV0IGM9MCxmPTAsaD0wLGQ9MSxtPSExLGc9ITEseD0hMSx2PSExO2Zvcig7Yzx1Oyl7bGV0IEw9ITE7Y29uc3QgUz1sLmNoYXJDb2RlQXQoYyk7aWYoZD09PTEzKXtsZXQgXztzd2l0Y2goUyl7Y2FzZSA0MDptPSEwLF89MDticmVhaztjYXNlIDQxOl89bT8wOjE7YnJlYWs7Y2FzZSA5MTp4PSEwLGc9ITAsXz0wO2JyZWFrO2Nhc2UgOTM6eD0hMSxfPWc/MDoxO2JyZWFrO2Nhc2UgMTIzOnY9ITAsXz0wO2JyZWFrO2Nhc2UgMTI1Ol89dj8wOjE7YnJlYWs7Y2FzZSAzOTpjYXNlIDM0OmNhc2UgOTY6aD09PVM/Xz0xOmg9PT0zOXx8aD09PTM0fHxoPT09OTY/Xz0wOl89MTticmVhaztjYXNlIDQyOl89aD09PTQyPzE6MDticmVhaztjYXNlIDEyNDpfPWg9PT0xMjQ/MTowO2JyZWFrO2Nhc2UgMzI6Xz14PzA6MTticmVhaztkZWZhdWx0Ol89ci5nZXQoUyl9Xz09PTEmJihzLnB1c2gobHQuX2NyZWF0ZUxpbmsocixsLGksZixjKSksTD0hMCl9ZWxzZSBpZihkPT09MTIpe2xldCBfO1M9PT05MT8oZz0hMCxfPTApOl89ci5nZXQoUyksXz09PTE/TD0hMDpkPTEzfWVsc2UgZD1uLm5leHRTdGF0ZShkLFMpLGQ9PT0wJiYoTD0hMCk7TCYmKGQ9MSxtPSExLGc9ITEsdj0hMSxmPWMrMSxoPVMpLGMrK31kPT09MTMmJnMucHVzaChsdC5fY3JlYXRlTGluayhyLGwsaSxmLHUpKX1yZXR1cm4gc319ZnVuY3Rpb24gTmkoZSl7cmV0dXJuIWV8fHR5cGVvZiBlLmdldExpbmVDb3VudCE9ImZ1bmN0aW9uInx8dHlwZW9mIGUuZ2V0TGluZUNvbnRlbnQhPSJmdW5jdGlvbiI/W106bHQuY29tcHV0ZUxpbmtzKGUpfWNsYXNzIFZ0e2NvbnN0cnVjdG9yKCl7dGhpcy5fZGVmYXVsdFZhbHVlU2V0PVtbInRydWUiLCJmYWxzZSJdLFsiVHJ1ZSIsIkZhbHNlIl0sWyJQcml2YXRlIiwiUHVibGljIiwiRnJpZW5kIiwiUmVhZE9ubHkiLCJQYXJ0aWFsIiwiUHJvdGVjdGVkIiwiV3JpdGVPbmx5Il0sWyJwdWJsaWMiLCJwcm90ZWN0ZWQiLCJwcml2YXRlIl1dfW5hdmlnYXRlVmFsdWVTZXQodCxuLHIscyxpKXtpZih0JiZuKXtjb25zdCBvPXRoaXMuZG9OYXZpZ2F0ZVZhbHVlU2V0KG4saSk7aWYobylyZXR1cm57cmFuZ2U6dCx2YWx1ZTpvfX1pZihyJiZzKXtjb25zdCBvPXRoaXMuZG9OYXZpZ2F0ZVZhbHVlU2V0KHMsaSk7aWYobylyZXR1cm57cmFuZ2U6cix2YWx1ZTpvfX1yZXR1cm4gbnVsbH1kb05hdmlnYXRlVmFsdWVTZXQodCxuKXtjb25zdCByPXRoaXMubnVtYmVyUmVwbGFjZSh0LG4pO3JldHVybiByIT09bnVsbD9yOnRoaXMudGV4dFJlcGxhY2UodCxuKX1udW1iZXJSZXBsYWNlKHQsbil7Y29uc3Qgcj1NYXRoLnBvdygxMCx0Lmxlbmd0aC0odC5sYXN0SW5kZXhPZigiLiIpKzEpKTtsZXQgcz1OdW1iZXIodCk7Y29uc3QgaT1wYXJzZUZsb2F0KHQpO3JldHVybiFpc05hTihzKSYmIWlzTmFOKGkpJiZzPT09aT9zPT09MCYmIW4/bnVsbDoocz1NYXRoLmZsb29yKHMqcikscys9bj9yOi1yLFN0cmluZyhzL3IpKTpudWxsfXRleHRSZXBsYWNlKHQsbil7cmV0dXJuIHRoaXMudmFsdWVTZXRzUmVwbGFjZSh0aGlzLl9kZWZhdWx0VmFsdWVTZXQsdCxuKX12YWx1ZVNldHNSZXBsYWNlKHQsbixyKXtsZXQgcz1udWxsO2ZvcihsZXQgaT0wLG89dC5sZW5ndGg7cz09PW51bGwmJmk8bztpKyspcz10aGlzLnZhbHVlU2V0UmVwbGFjZSh0W2ldLG4scik7cmV0dXJuIHN9dmFsdWVTZXRSZXBsYWNlKHQsbixyKXtsZXQgcz10LmluZGV4T2Yobik7cmV0dXJuIHM+PTA/KHMrPXI/MTotMSxzPDA/cz10Lmxlbmd0aC0xOnMlPXQubGVuZ3RoLHRbc10pOm51bGx9fVZ0LklOU1RBTkNFPW5ldyBWdDtjb25zdCBObj1PYmplY3QuZnJlZXplKGZ1bmN0aW9uKGUsdCl7Y29uc3Qgbj1zZXRUaW1lb3V0KGUuYmluZCh0KSwwKTtyZXR1cm57ZGlzcG9zZSgpe2NsZWFyVGltZW91dChuKX19fSk7dmFyIHV0OyhmdW5jdGlvbihlKXtmdW5jdGlvbiB0KG4pe3JldHVybiBuPT09ZS5Ob25lfHxuPT09ZS5DYW5jZWxsZWR8fG4gaW5zdGFuY2VvZiBjdD8hMDohbnx8dHlwZW9mIG4hPSJvYmplY3QiPyExOnR5cGVvZiBuLmlzQ2FuY2VsbGF0aW9uUmVxdWVzdGVkPT0iYm9vbGVhbiImJnR5cGVvZiBuLm9uQ2FuY2VsbGF0aW9uUmVxdWVzdGVkPT0iZnVuY3Rpb24ifWUuaXNDYW5jZWxsYXRpb25Ub2tlbj10LGUuTm9uZT1PYmplY3QuZnJlZXplKHtpc0NhbmNlbGxhdGlvblJlcXVlc3RlZDohMSxvbkNhbmNlbGxhdGlvblJlcXVlc3RlZDp4dC5Ob25lfSksZS5DYW5jZWxsZWQ9T2JqZWN0LmZyZWV6ZSh7aXNDYW5jZWxsYXRpb25SZXF1ZXN0ZWQ6ITAsb25DYW5jZWxsYXRpb25SZXF1ZXN0ZWQ6Tm59KX0pKHV0fHwodXQ9e30pKTtjbGFzcyBjdHtjb25zdHJ1Y3Rvcigpe3RoaXMuX2lzQ2FuY2VsbGVkPSExLHRoaXMuX2VtaXR0ZXI9bnVsbH1jYW5jZWwoKXt0aGlzLl9pc0NhbmNlbGxlZHx8KHRoaXMuX2lzQ2FuY2VsbGVkPSEwLHRoaXMuX2VtaXR0ZXImJih0aGlzLl9lbWl0dGVyLmZpcmUodm9pZCAwKSx0aGlzLmRpc3Bvc2UoKSkpfWdldCBpc0NhbmNlbGxhdGlvblJlcXVlc3RlZCgpe3JldHVybiB0aGlzLl9pc0NhbmNlbGxlZH1nZXQgb25DYW5jZWxsYXRpb25SZXF1ZXN0ZWQoKXtyZXR1cm4gdGhpcy5faXNDYW5jZWxsZWQ/Tm46KHRoaXMuX2VtaXR0ZXJ8fCh0aGlzLl9lbWl0dGVyPW5ldyBzZSksdGhpcy5fZW1pdHRlci5ldmVudCl9ZGlzcG9zZSgpe3RoaXMuX2VtaXR0ZXImJih0aGlzLl9lbWl0dGVyLmRpc3Bvc2UoKSx0aGlzLl9lbWl0dGVyPW51bGwpfX1jbGFzcyBTaXtjb25zdHJ1Y3Rvcih0KXt0aGlzLl90b2tlbj12b2lkIDAsdGhpcy5fcGFyZW50TGlzdGVuZXI9dm9pZCAwLHRoaXMuX3BhcmVudExpc3RlbmVyPXQmJnQub25DYW5jZWxsYXRpb25SZXF1ZXN0ZWQodGhpcy5jYW5jZWwsdGhpcyl9Z2V0IHRva2VuKCl7cmV0dXJuIHRoaXMuX3Rva2VufHwodGhpcy5fdG9rZW49bmV3IGN0KSx0aGlzLl90b2tlbn1jYW5jZWwoKXt0aGlzLl90b2tlbj90aGlzLl90b2tlbiBpbnN0YW5jZW9mIGN0JiZ0aGlzLl90b2tlbi5jYW5jZWwoKTp0aGlzLl90b2tlbj11dC5DYW5jZWxsZWR9ZGlzcG9zZSh0PSExKXt2YXIgbjt0JiZ0aGlzLmNhbmNlbCgpLChuPXRoaXMuX3BhcmVudExpc3RlbmVyKT09PW51bGx8fG49PT12b2lkIDB8fG4uZGlzcG9zZSgpLHRoaXMuX3Rva2VuP3RoaXMuX3Rva2VuIGluc3RhbmNlb2YgY3QmJnRoaXMuX3Rva2VuLmRpc3Bvc2UoKTp0aGlzLl90b2tlbj11dC5Ob25lfX1jbGFzcyBJdHtjb25zdHJ1Y3Rvcigpe3RoaXMuX2tleUNvZGVUb1N0cj1bXSx0aGlzLl9zdHJUb0tleUNvZGU9T2JqZWN0LmNyZWF0ZShudWxsKX1kZWZpbmUodCxuKXt0aGlzLl9rZXlDb2RlVG9TdHJbdF09bix0aGlzLl9zdHJUb0tleUNvZGVbbi50b0xvd2VyQ2FzZSgpXT10fWtleUNvZGVUb1N0cih0KXtyZXR1cm4gdGhpcy5fa2V5Q29kZVRvU3RyW3RdfXN0clRvS2V5Q29kZSh0KXtyZXR1cm4gdGhpcy5fc3RyVG9LZXlDb2RlW3QudG9Mb3dlckNhc2UoKV18fDB9fWNvbnN0IGh0PW5ldyBJdCxCdD1uZXcgSXQscXQ9bmV3IEl0LENpPW5ldyBBcnJheSgyMzApLEFpPU9iamVjdC5jcmVhdGUobnVsbCksUmk9T2JqZWN0LmNyZWF0ZShudWxsKTsoZnVuY3Rpb24oKXtjb25zdCBlPSIiLHQ9W1sxLDAsIk5vbmUiLDAsInVua25vd24iLDAsIlZLX1VOS05PV04iLGUsZV0sWzEsMSwiSHlwZXIiLDAsZSwwLGUsZSxlXSxbMSwyLCJTdXBlciIsMCxlLDAsZSxlLGVdLFsxLDMsIkZuIiwwLGUsMCxlLGUsZV0sWzEsNCwiRm5Mb2NrIiwwLGUsMCxlLGUsZV0sWzEsNSwiU3VzcGVuZCIsMCxlLDAsZSxlLGVdLFsxLDYsIlJlc3VtZSIsMCxlLDAsZSxlLGVdLFsxLDcsIlR1cmJvIiwwLGUsMCxlLGUsZV0sWzEsOCwiU2xlZXAiLDAsZSwwLCJWS19TTEVFUCIsZSxlXSxbMSw5LCJXYWtlVXAiLDAsZSwwLGUsZSxlXSxbMCwxMCwiS2V5QSIsMzEsIkEiLDY1LCJWS19BIixlLGVdLFswLDExLCJLZXlCIiwzMiwiQiIsNjYsIlZLX0IiLGUsZV0sWzAsMTIsIktleUMiLDMzLCJDIiw2NywiVktfQyIsZSxlXSxbMCwxMywiS2V5RCIsMzQsIkQiLDY4LCJWS19EIixlLGVdLFswLDE0LCJLZXlFIiwzNSwiRSIsNjksIlZLX0UiLGUsZV0sWzAsMTUsIktleUYiLDM2LCJGIiw3MCwiVktfRiIsZSxlXSxbMCwxNiwiS2V5RyIsMzcsIkciLDcxLCJWS19HIixlLGVdLFswLDE3LCJLZXlIIiwzOCwiSCIsNzIsIlZLX0giLGUsZV0sWzAsMTgsIktleUkiLDM5LCJJIiw3MywiVktfSSIsZSxlXSxbMCwxOSwiS2V5SiIsNDAsIkoiLDc0LCJWS19KIixlLGVdLFswLDIwLCJLZXlLIiw0MSwiSyIsNzUsIlZLX0siLGUsZV0sWzAsMjEsIktleUwiLDQyLCJMIiw3NiwiVktfTCIsZSxlXSxbMCwyMiwiS2V5TSIsNDMsIk0iLDc3LCJWS19NIixlLGVdLFswLDIzLCJLZXlOIiw0NCwiTiIsNzgsIlZLX04iLGUsZV0sWzAsMjQsIktleU8iLDQ1LCJPIiw3OSwiVktfTyIsZSxlXSxbMCwyNSwiS2V5UCIsNDYsIlAiLDgwLCJWS19QIixlLGVdLFswLDI2LCJLZXlRIiw0NywiUSIsODEsIlZLX1EiLGUsZV0sWzAsMjcsIktleVIiLDQ4LCJSIiw4MiwiVktfUiIsZSxlXSxbMCwyOCwiS2V5UyIsNDksIlMiLDgzLCJWS19TIixlLGVdLFswLDI5LCJLZXlUIiw1MCwiVCIsODQsIlZLX1QiLGUsZV0sWzAsMzAsIktleVUiLDUxLCJVIiw4NSwiVktfVSIsZSxlXSxbMCwzMSwiS2V5ViIsNTIsIlYiLDg2LCJWS19WIixlLGVdLFswLDMyLCJLZXlXIiw1MywiVyIsODcsIlZLX1ciLGUsZV0sWzAsMzMsIktleVgiLDU0LCJYIiw4OCwiVktfWCIsZSxlXSxbMCwzNCwiS2V5WSIsNTUsIlkiLDg5LCJWS19ZIixlLGVdLFswLDM1LCJLZXlaIiw1NiwiWiIsOTAsIlZLX1oiLGUsZV0sWzAsMzYsIkRpZ2l0MSIsMjIsIjEiLDQ5LCJWS18xIixlLGVdLFswLDM3LCJEaWdpdDIiLDIzLCIyIiw1MCwiVktfMiIsZSxlXSxbMCwzOCwiRGlnaXQzIiwyNCwiMyIsNTEsIlZLXzMiLGUsZV0sWzAsMzksIkRpZ2l0NCIsMjUsIjQiLDUyLCJWS180IixlLGVdLFswLDQwLCJEaWdpdDUiLDI2LCI1Iiw1MywiVktfNSIsZSxlXSxbMCw0MSwiRGlnaXQ2IiwyNywiNiIsNTQsIlZLXzYiLGUsZV0sWzAsNDIsIkRpZ2l0NyIsMjgsIjciLDU1LCJWS183IixlLGVdLFswLDQzLCJEaWdpdDgiLDI5LCI4Iiw1NiwiVktfOCIsZSxlXSxbMCw0NCwiRGlnaXQ5IiwzMCwiOSIsNTcsIlZLXzkiLGUsZV0sWzAsNDUsIkRpZ2l0MCIsMjEsIjAiLDQ4LCJWS18wIixlLGVdLFsxLDQ2LCJFbnRlciIsMywiRW50ZXIiLDEzLCJWS19SRVRVUk4iLGUsZV0sWzEsNDcsIkVzY2FwZSIsOSwiRXNjYXBlIiwyNywiVktfRVNDQVBFIixlLGVdLFsxLDQ4LCJCYWNrc3BhY2UiLDEsIkJhY2tzcGFjZSIsOCwiVktfQkFDSyIsZSxlXSxbMSw0OSwiVGFiIiwyLCJUYWIiLDksIlZLX1RBQiIsZSxlXSxbMSw1MCwiU3BhY2UiLDEwLCJTcGFjZSIsMzIsIlZLX1NQQUNFIixlLGVdLFswLDUxLCJNaW51cyIsODgsIi0iLDE4OSwiVktfT0VNX01JTlVTIiwiLSIsIk9FTV9NSU5VUyJdLFswLDUyLCJFcXVhbCIsODYsIj0iLDE4NywiVktfT0VNX1BMVVMiLCI9IiwiT0VNX1BMVVMiXSxbMCw1MywiQnJhY2tldExlZnQiLDkyLCJbIiwyMTksIlZLX09FTV80IiwiWyIsIk9FTV80Il0sWzAsNTQsIkJyYWNrZXRSaWdodCIsOTQsIl0iLDIyMSwiVktfT0VNXzYiLCJdIiwiT0VNXzYiXSxbMCw1NSwiQmFja3NsYXNoIiw5MywiXFwiLDIyMCwiVktfT0VNXzUiLCJcXCIsIk9FTV81Il0sWzAsNTYsIkludGxIYXNoIiwwLGUsMCxlLGUsZV0sWzAsNTcsIlNlbWljb2xvbiIsODUsIjsiLDE4NiwiVktfT0VNXzEiLCI7IiwiT0VNXzEiXSxbMCw1OCwiUXVvdGUiLDk1LCInIiwyMjIsIlZLX09FTV83IiwiJyIsIk9FTV83Il0sWzAsNTksIkJhY2txdW90ZSIsOTEsImAiLDE5MiwiVktfT0VNXzMiLCJgIiwiT0VNXzMiXSxbMCw2MCwiQ29tbWEiLDg3LCIsIiwxODgsIlZLX09FTV9DT01NQSIsIiwiLCJPRU1fQ09NTUEiXSxbMCw2MSwiUGVyaW9kIiw4OSwiLiIsMTkwLCJWS19PRU1fUEVSSU9EIiwiLiIsIk9FTV9QRVJJT0QiXSxbMCw2MiwiU2xhc2giLDkwLCIvIiwxOTEsIlZLX09FTV8yIiwiLyIsIk9FTV8yIl0sWzEsNjMsIkNhcHNMb2NrIiw4LCJDYXBzTG9jayIsMjAsIlZLX0NBUElUQUwiLGUsZV0sWzEsNjQsIkYxIiw1OSwiRjEiLDExMiwiVktfRjEiLGUsZV0sWzEsNjUsIkYyIiw2MCwiRjIiLDExMywiVktfRjIiLGUsZV0sWzEsNjYsIkYzIiw2MSwiRjMiLDExNCwiVktfRjMiLGUsZV0sWzEsNjcsIkY0Iiw2MiwiRjQiLDExNSwiVktfRjQiLGUsZV0sWzEsNjgsIkY1Iiw2MywiRjUiLDExNiwiVktfRjUiLGUsZV0sWzEsNjksIkY2Iiw2NCwiRjYiLDExNywiVktfRjYiLGUsZV0sWzEsNzAsIkY3Iiw2NSwiRjciLDExOCwiVktfRjciLGUsZV0sWzEsNzEsIkY4Iiw2NiwiRjgiLDExOSwiVktfRjgiLGUsZV0sWzEsNzIsIkY5Iiw2NywiRjkiLDEyMCwiVktfRjkiLGUsZV0sWzEsNzMsIkYxMCIsNjgsIkYxMCIsMTIxLCJWS19GMTAiLGUsZV0sWzEsNzQsIkYxMSIsNjksIkYxMSIsMTIyLCJWS19GMTEiLGUsZV0sWzEsNzUsIkYxMiIsNzAsIkYxMiIsMTIzLCJWS19GMTIiLGUsZV0sWzEsNzYsIlByaW50U2NyZWVuIiwwLGUsMCxlLGUsZV0sWzEsNzcsIlNjcm9sbExvY2siLDg0LCJTY3JvbGxMb2NrIiwxNDUsIlZLX1NDUk9MTCIsZSxlXSxbMSw3OCwiUGF1c2UiLDcsIlBhdXNlQnJlYWsiLDE5LCJWS19QQVVTRSIsZSxlXSxbMSw3OSwiSW5zZXJ0IiwxOSwiSW5zZXJ0Iiw0NSwiVktfSU5TRVJUIixlLGVdLFsxLDgwLCJIb21lIiwxNCwiSG9tZSIsMzYsIlZLX0hPTUUiLGUsZV0sWzEsODEsIlBhZ2VVcCIsMTEsIlBhZ2VVcCIsMzMsIlZLX1BSSU9SIixlLGVdLFsxLDgyLCJEZWxldGUiLDIwLCJEZWxldGUiLDQ2LCJWS19ERUxFVEUiLGUsZV0sWzEsODMsIkVuZCIsMTMsIkVuZCIsMzUsIlZLX0VORCIsZSxlXSxbMSw4NCwiUGFnZURvd24iLDEyLCJQYWdlRG93biIsMzQsIlZLX05FWFQiLGUsZV0sWzEsODUsIkFycm93UmlnaHQiLDE3LCJSaWdodEFycm93IiwzOSwiVktfUklHSFQiLCJSaWdodCIsZV0sWzEsODYsIkFycm93TGVmdCIsMTUsIkxlZnRBcnJvdyIsMzcsIlZLX0xFRlQiLCJMZWZ0IixlXSxbMSw4NywiQXJyb3dEb3duIiwxOCwiRG93bkFycm93Iiw0MCwiVktfRE9XTiIsIkRvd24iLGVdLFsxLDg4LCJBcnJvd1VwIiwxNiwiVXBBcnJvdyIsMzgsIlZLX1VQIiwiVXAiLGVdLFsxLDg5LCJOdW1Mb2NrIiw4MywiTnVtTG9jayIsMTQ0LCJWS19OVU1MT0NLIixlLGVdLFsxLDkwLCJOdW1wYWREaXZpZGUiLDExMywiTnVtUGFkX0RpdmlkZSIsMTExLCJWS19ESVZJREUiLGUsZV0sWzEsOTEsIk51bXBhZE11bHRpcGx5IiwxMDgsIk51bVBhZF9NdWx0aXBseSIsMTA2LCJWS19NVUxUSVBMWSIsZSxlXSxbMSw5MiwiTnVtcGFkU3VidHJhY3QiLDExMSwiTnVtUGFkX1N1YnRyYWN0IiwxMDksIlZLX1NVQlRSQUNUIixlLGVdLFsxLDkzLCJOdW1wYWRBZGQiLDEwOSwiTnVtUGFkX0FkZCIsMTA3LCJWS19BREQiLGUsZV0sWzEsOTQsIk51bXBhZEVudGVyIiwzLGUsMCxlLGUsZV0sWzEsOTUsIk51bXBhZDEiLDk5LCJOdW1QYWQxIiw5NywiVktfTlVNUEFEMSIsZSxlXSxbMSw5NiwiTnVtcGFkMiIsMTAwLCJOdW1QYWQyIiw5OCwiVktfTlVNUEFEMiIsZSxlXSxbMSw5NywiTnVtcGFkMyIsMTAxLCJOdW1QYWQzIiw5OSwiVktfTlVNUEFEMyIsZSxlXSxbMSw5OCwiTnVtcGFkNCIsMTAyLCJOdW1QYWQ0IiwxMDAsIlZLX05VTVBBRDQiLGUsZV0sWzEsOTksIk51bXBhZDUiLDEwMywiTnVtUGFkNSIsMTAxLCJWS19OVU1QQUQ1IixlLGVdLFsxLDEwMCwiTnVtcGFkNiIsMTA0LCJOdW1QYWQ2IiwxMDIsIlZLX05VTVBBRDYiLGUsZV0sWzEsMTAxLCJOdW1wYWQ3IiwxMDUsIk51bVBhZDciLDEwMywiVktfTlVNUEFENyIsZSxlXSxbMSwxMDIsIk51bXBhZDgiLDEwNiwiTnVtUGFkOCIsMTA0LCJWS19OVU1QQUQ4IixlLGVdLFsxLDEwMywiTnVtcGFkOSIsMTA3LCJOdW1QYWQ5IiwxMDUsIlZLX05VTVBBRDkiLGUsZV0sWzEsMTA0LCJOdW1wYWQwIiw5OCwiTnVtUGFkMCIsOTYsIlZLX05VTVBBRDAiLGUsZV0sWzEsMTA1LCJOdW1wYWREZWNpbWFsIiwxMTIsIk51bVBhZF9EZWNpbWFsIiwxMTAsIlZLX0RFQ0lNQUwiLGUsZV0sWzAsMTA2LCJJbnRsQmFja3NsYXNoIiw5NywiT0VNXzEwMiIsMjI2LCJWS19PRU1fMTAyIixlLGVdLFsxLDEwNywiQ29udGV4dE1lbnUiLDU4LCJDb250ZXh0TWVudSIsOTMsZSxlLGVdLFsxLDEwOCwiUG93ZXIiLDAsZSwwLGUsZSxlXSxbMSwxMDksIk51bXBhZEVxdWFsIiwwLGUsMCxlLGUsZV0sWzEsMTEwLCJGMTMiLDcxLCJGMTMiLDEyNCwiVktfRjEzIixlLGVdLFsxLDExMSwiRjE0Iiw3MiwiRjE0IiwxMjUsIlZLX0YxNCIsZSxlXSxbMSwxMTIsIkYxNSIsNzMsIkYxNSIsMTI2LCJWS19GMTUiLGUsZV0sWzEsMTEzLCJGMTYiLDc0LCJGMTYiLDEyNywiVktfRjE2IixlLGVdLFsxLDExNCwiRjE3Iiw3NSwiRjE3IiwxMjgsIlZLX0YxNyIsZSxlXSxbMSwxMTUsIkYxOCIsNzYsIkYxOCIsMTI5LCJWS19GMTgiLGUsZV0sWzEsMTE2LCJGMTkiLDc3LCJGMTkiLDEzMCwiVktfRjE5IixlLGVdLFsxLDExNywiRjIwIiw3OCwiRjIwIiwxMzEsIlZLX0YyMCIsZSxlXSxbMSwxMTgsIkYyMSIsNzksIkYyMSIsMTMyLCJWS19GMjEiLGUsZV0sWzEsMTE5LCJGMjIiLDgwLCJGMjIiLDEzMywiVktfRjIyIixlLGVdLFsxLDEyMCwiRjIzIiw4MSwiRjIzIiwxMzQsIlZLX0YyMyIsZSxlXSxbMSwxMjEsIkYyNCIsODIsIkYyNCIsMTM1LCJWS19GMjQiLGUsZV0sWzEsMTIyLCJPcGVuIiwwLGUsMCxlLGUsZV0sWzEsMTIzLCJIZWxwIiwwLGUsMCxlLGUsZV0sWzEsMTI0LCJTZWxlY3QiLDAsZSwwLGUsZSxlXSxbMSwxMjUsIkFnYWluIiwwLGUsMCxlLGUsZV0sWzEsMTI2LCJVbmRvIiwwLGUsMCxlLGUsZV0sWzEsMTI3LCJDdXQiLDAsZSwwLGUsZSxlXSxbMSwxMjgsIkNvcHkiLDAsZSwwLGUsZSxlXSxbMSwxMjksIlBhc3RlIiwwLGUsMCxlLGUsZV0sWzEsMTMwLCJGaW5kIiwwLGUsMCxlLGUsZV0sWzEsMTMxLCJBdWRpb1ZvbHVtZU11dGUiLDExNywiQXVkaW9Wb2x1bWVNdXRlIiwxNzMsIlZLX1ZPTFVNRV9NVVRFIixlLGVdLFsxLDEzMiwiQXVkaW9Wb2x1bWVVcCIsMTE4LCJBdWRpb1ZvbHVtZVVwIiwxNzUsIlZLX1ZPTFVNRV9VUCIsZSxlXSxbMSwxMzMsIkF1ZGlvVm9sdW1lRG93biIsMTE5LCJBdWRpb1ZvbHVtZURvd24iLDE3NCwiVktfVk9MVU1FX0RPV04iLGUsZV0sWzEsMTM0LCJOdW1wYWRDb21tYSIsMTEwLCJOdW1QYWRfU2VwYXJhdG9yIiwxMDgsIlZLX1NFUEFSQVRPUiIsZSxlXSxbMCwxMzUsIkludGxSbyIsMTE1LCJBQk5UX0MxIiwxOTMsIlZLX0FCTlRfQzEiLGUsZV0sWzEsMTM2LCJLYW5hTW9kZSIsMCxlLDAsZSxlLGVdLFswLDEzNywiSW50bFllbiIsMCxlLDAsZSxlLGVdLFsxLDEzOCwiQ29udmVydCIsMCxlLDAsZSxlLGVdLFsxLDEzOSwiTm9uQ29udmVydCIsMCxlLDAsZSxlLGVdLFsxLDE0MCwiTGFuZzEiLDAsZSwwLGUsZSxlXSxbMSwxNDEsIkxhbmcyIiwwLGUsMCxlLGUsZV0sWzEsMTQyLCJMYW5nMyIsMCxlLDAsZSxlLGVdLFsxLDE0MywiTGFuZzQiLDAsZSwwLGUsZSxlXSxbMSwxNDQsIkxhbmc1IiwwLGUsMCxlLGUsZV0sWzEsMTQ1LCJBYm9ydCIsMCxlLDAsZSxlLGVdLFsxLDE0NiwiUHJvcHMiLDAsZSwwLGUsZSxlXSxbMSwxNDcsIk51bXBhZFBhcmVuTGVmdCIsMCxlLDAsZSxlLGVdLFsxLDE0OCwiTnVtcGFkUGFyZW5SaWdodCIsMCxlLDAsZSxlLGVdLFsxLDE0OSwiTnVtcGFkQmFja3NwYWNlIiwwLGUsMCxlLGUsZV0sWzEsMTUwLCJOdW1wYWRNZW1vcnlTdG9yZSIsMCxlLDAsZSxlLGVdLFsxLDE1MSwiTnVtcGFkTWVtb3J5UmVjYWxsIiwwLGUsMCxlLGUsZV0sWzEsMTUyLCJOdW1wYWRNZW1vcnlDbGVhciIsMCxlLDAsZSxlLGVdLFsxLDE1MywiTnVtcGFkTWVtb3J5QWRkIiwwLGUsMCxlLGUsZV0sWzEsMTU0LCJOdW1wYWRNZW1vcnlTdWJ0cmFjdCIsMCxlLDAsZSxlLGVdLFsxLDE1NSwiTnVtcGFkQ2xlYXIiLDEzMSwiQ2xlYXIiLDEyLCJWS19DTEVBUiIsZSxlXSxbMSwxNTYsIk51bXBhZENsZWFyRW50cnkiLDAsZSwwLGUsZSxlXSxbMSwwLGUsNSwiQ3RybCIsMTcsIlZLX0NPTlRST0wiLGUsZV0sWzEsMCxlLDQsIlNoaWZ0IiwxNiwiVktfU0hJRlQiLGUsZV0sWzEsMCxlLDYsIkFsdCIsMTgsIlZLX01FTlUiLGUsZV0sWzEsMCxlLDU3LCJNZXRhIiw5MSwiVktfQ09NTUFORCIsZSxlXSxbMSwxNTcsIkNvbnRyb2xMZWZ0Iiw1LGUsMCwiVktfTENPTlRST0wiLGUsZV0sWzEsMTU4LCJTaGlmdExlZnQiLDQsZSwwLCJWS19MU0hJRlQiLGUsZV0sWzEsMTU5LCJBbHRMZWZ0Iiw2LGUsMCwiVktfTE1FTlUiLGUsZV0sWzEsMTYwLCJNZXRhTGVmdCIsNTcsZSwwLCJWS19MV0lOIixlLGVdLFsxLDE2MSwiQ29udHJvbFJpZ2h0Iiw1LGUsMCwiVktfUkNPTlRST0wiLGUsZV0sWzEsMTYyLCJTaGlmdFJpZ2h0Iiw0LGUsMCwiVktfUlNISUZUIixlLGVdLFsxLDE2MywiQWx0UmlnaHQiLDYsZSwwLCJWS19STUVOVSIsZSxlXSxbMSwxNjQsIk1ldGFSaWdodCIsNTcsZSwwLCJWS19SV0lOIixlLGVdLFsxLDE2NSwiQnJpZ2h0bmVzc1VwIiwwLGUsMCxlLGUsZV0sWzEsMTY2LCJCcmlnaHRuZXNzRG93biIsMCxlLDAsZSxlLGVdLFsxLDE2NywiTWVkaWFQbGF5IiwwLGUsMCxlLGUsZV0sWzEsMTY4LCJNZWRpYVJlY29yZCIsMCxlLDAsZSxlLGVdLFsxLDE2OSwiTWVkaWFGYXN0Rm9yd2FyZCIsMCxlLDAsZSxlLGVdLFsxLDE3MCwiTWVkaWFSZXdpbmQiLDAsZSwwLGUsZSxlXSxbMSwxNzEsIk1lZGlhVHJhY2tOZXh0IiwxMjQsIk1lZGlhVHJhY2tOZXh0IiwxNzYsIlZLX01FRElBX05FWFRfVFJBQ0siLGUsZV0sWzEsMTcyLCJNZWRpYVRyYWNrUHJldmlvdXMiLDEyNSwiTWVkaWFUcmFja1ByZXZpb3VzIiwxNzcsIlZLX01FRElBX1BSRVZfVFJBQ0siLGUsZV0sWzEsMTczLCJNZWRpYVN0b3AiLDEyNiwiTWVkaWFTdG9wIiwxNzgsIlZLX01FRElBX1NUT1AiLGUsZV0sWzEsMTc0LCJFamVjdCIsMCxlLDAsZSxlLGVdLFsxLDE3NSwiTWVkaWFQbGF5UGF1c2UiLDEyNywiTWVkaWFQbGF5UGF1c2UiLDE3OSwiVktfTUVESUFfUExBWV9QQVVTRSIsZSxlXSxbMSwxNzYsIk1lZGlhU2VsZWN0IiwxMjgsIkxhdW5jaE1lZGlhUGxheWVyIiwxODEsIlZLX01FRElBX0xBVU5DSF9NRURJQV9TRUxFQ1QiLGUsZV0sWzEsMTc3LCJMYXVuY2hNYWlsIiwxMjksIkxhdW5jaE1haWwiLDE4MCwiVktfTUVESUFfTEFVTkNIX01BSUwiLGUsZV0sWzEsMTc4LCJMYXVuY2hBcHAyIiwxMzAsIkxhdW5jaEFwcDIiLDE4MywiVktfTUVESUFfTEFVTkNIX0FQUDIiLGUsZV0sWzEsMTc5LCJMYXVuY2hBcHAxIiwwLGUsMCwiVktfTUVESUFfTEFVTkNIX0FQUDEiLGUsZV0sWzEsMTgwLCJTZWxlY3RUYXNrIiwwLGUsMCxlLGUsZV0sWzEsMTgxLCJMYXVuY2hTY3JlZW5TYXZlciIsMCxlLDAsZSxlLGVdLFsxLDE4MiwiQnJvd3NlclNlYXJjaCIsMTIwLCJCcm93c2VyU2VhcmNoIiwxNzAsIlZLX0JST1dTRVJfU0VBUkNIIixlLGVdLFsxLDE4MywiQnJvd3NlckhvbWUiLDEyMSwiQnJvd3NlckhvbWUiLDE3MiwiVktfQlJPV1NFUl9IT01FIixlLGVdLFsxLDE4NCwiQnJvd3NlckJhY2siLDEyMiwiQnJvd3NlckJhY2siLDE2NiwiVktfQlJPV1NFUl9CQUNLIixlLGVdLFsxLDE4NSwiQnJvd3NlckZvcndhcmQiLDEyMywiQnJvd3NlckZvcndhcmQiLDE2NywiVktfQlJPV1NFUl9GT1JXQVJEIixlLGVdLFsxLDE4NiwiQnJvd3NlclN0b3AiLDAsZSwwLCJWS19CUk9XU0VSX1NUT1AiLGUsZV0sWzEsMTg3LCJCcm93c2VyUmVmcmVzaCIsMCxlLDAsIlZLX0JST1dTRVJfUkVGUkVTSCIsZSxlXSxbMSwxODgsIkJyb3dzZXJGYXZvcml0ZXMiLDAsZSwwLCJWS19CUk9XU0VSX0ZBVk9SSVRFUyIsZSxlXSxbMSwxODksIlpvb21Ub2dnbGUiLDAsZSwwLGUsZSxlXSxbMSwxOTAsIk1haWxSZXBseSIsMCxlLDAsZSxlLGVdLFsxLDE5MSwiTWFpbEZvcndhcmQiLDAsZSwwLGUsZSxlXSxbMSwxOTIsIk1haWxTZW5kIiwwLGUsMCxlLGUsZV0sWzEsMCxlLDExNCwiS2V5SW5Db21wb3NpdGlvbiIsMjI5LGUsZSxlXSxbMSwwLGUsMTE2LCJBQk5UX0MyIiwxOTQsIlZLX0FCTlRfQzIiLGUsZV0sWzEsMCxlLDk2LCJPRU1fOCIsMjIzLCJWS19PRU1fOCIsZSxlXSxbMSwwLGUsMCxlLDAsIlZLX0tBTkEiLGUsZV0sWzEsMCxlLDAsZSwwLCJWS19IQU5HVUwiLGUsZV0sWzEsMCxlLDAsZSwwLCJWS19KVU5KQSIsZSxlXSxbMSwwLGUsMCxlLDAsIlZLX0ZJTkFMIixlLGVdLFsxLDAsZSwwLGUsMCwiVktfSEFOSkEiLGUsZV0sWzEsMCxlLDAsZSwwLCJWS19LQU5KSSIsZSxlXSxbMSwwLGUsMCxlLDAsIlZLX0NPTlZFUlQiLGUsZV0sWzEsMCxlLDAsZSwwLCJWS19OT05DT05WRVJUIixlLGVdLFsxLDAsZSwwLGUsMCwiVktfQUNDRVBUIixlLGVdLFsxLDAsZSwwLGUsMCwiVktfTU9ERUNIQU5HRSIsZSxlXSxbMSwwLGUsMCxlLDAsIlZLX1NFTEVDVCIsZSxlXSxbMSwwLGUsMCxlLDAsIlZLX1BSSU5UIixlLGVdLFsxLDAsZSwwLGUsMCwiVktfRVhFQ1VURSIsZSxlXSxbMSwwLGUsMCxlLDAsIlZLX1NOQVBTSE9UIixlLGVdLFsxLDAsZSwwLGUsMCwiVktfSEVMUCIsZSxlXSxbMSwwLGUsMCxlLDAsIlZLX0FQUFMiLGUsZV0sWzEsMCxlLDAsZSwwLCJWS19QUk9DRVNTS0VZIixlLGVdLFsxLDAsZSwwLGUsMCwiVktfUEFDS0VUIixlLGVdLFsxLDAsZSwwLGUsMCwiVktfREJFX1NCQ1NDSEFSIixlLGVdLFsxLDAsZSwwLGUsMCwiVktfREJFX0RCQ1NDSEFSIixlLGVdLFsxLDAsZSwwLGUsMCwiVktfQVRUTiIsZSxlXSxbMSwwLGUsMCxlLDAsIlZLX0NSU0VMIixlLGVdLFsxLDAsZSwwLGUsMCwiVktfRVhTRUwiLGUsZV0sWzEsMCxlLDAsZSwwLCJWS19FUkVPRiIsZSxlXSxbMSwwLGUsMCxlLDAsIlZLX1BMQVkiLGUsZV0sWzEsMCxlLDAsZSwwLCJWS19aT09NIixlLGVdLFsxLDAsZSwwLGUsMCwiVktfTk9OQU1FIixlLGVdLFsxLDAsZSwwLGUsMCwiVktfUEExIixlLGVdLFsxLDAsZSwwLGUsMCwiVktfT0VNX0NMRUFSIixlLGVdXSxuPVtdLHI9W107Zm9yKGNvbnN0IHMgb2YgdCl7Y29uc3RbaSxvLGwsdSxjLGYsaCxkLG1dPXM7aWYocltvXXx8KHJbb109ITAsQWlbbF09byxSaVtsLnRvTG93ZXJDYXNlKCldPW8pLCFuW3VdKXtpZihuW3VdPSEwLCFjKXRocm93IG5ldyBFcnJvcihgU3RyaW5nIHJlcHJlc2VudGF0aW9uIG1pc3NpbmcgZm9yIGtleSBjb2RlICR7dX0gYXJvdW5kIHNjYW4gY29kZSAke2x9YCk7aHQuZGVmaW5lKHUsYyksQnQuZGVmaW5lKHUsZHx8YykscXQuZGVmaW5lKHUsbXx8ZHx8Yyl9ZiYmKENpW2ZdPXUpfX0pKCk7dmFyIFNuOyhmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGwpe3JldHVybiBodC5rZXlDb2RlVG9TdHIobCl9ZS50b1N0cmluZz10O2Z1bmN0aW9uIG4obCl7cmV0dXJuIGh0LnN0clRvS2V5Q29kZShsKX1lLmZyb21TdHJpbmc9bjtmdW5jdGlvbiByKGwpe3JldHVybiBCdC5rZXlDb2RlVG9TdHIobCl9ZS50b1VzZXJTZXR0aW5nc1VTPXI7ZnVuY3Rpb24gcyhsKXtyZXR1cm4gcXQua2V5Q29kZVRvU3RyKGwpfWUudG9Vc2VyU2V0dGluZ3NHZW5lcmFsPXM7ZnVuY3Rpb24gaShsKXtyZXR1cm4gQnQuc3RyVG9LZXlDb2RlKGwpfHxxdC5zdHJUb0tleUNvZGUobCl9ZS5mcm9tVXNlclNldHRpbmdzPWk7ZnVuY3Rpb24gbyhsKXtpZihsPj05OCYmbDw9MTEzKXJldHVybiBudWxsO3N3aXRjaChsKXtjYXNlIDE2OnJldHVybiJVcCI7Y2FzZSAxODpyZXR1cm4iRG93biI7Y2FzZSAxNTpyZXR1cm4iTGVmdCI7Y2FzZSAxNzpyZXR1cm4iUmlnaHQifXJldHVybiBodC5rZXlDb2RlVG9TdHIobCl9ZS50b0VsZWN0cm9uQWNjZWxlcmF0b3I9b30pKFNufHwoU249e30pKTtmdW5jdGlvbiB5aShlLHQpe2NvbnN0IG49KHQmNjU1MzUpPDwxNj4+PjA7cmV0dXJuKGV8bik+Pj4wfWNsYXNzIHRlIGV4dGVuZHMgRntjb25zdHJ1Y3Rvcih0LG4scixzKXtzdXBlcih0LG4scixzKSx0aGlzLnNlbGVjdGlvblN0YXJ0TGluZU51bWJlcj10LHRoaXMuc2VsZWN0aW9uU3RhcnRDb2x1bW49bix0aGlzLnBvc2l0aW9uTGluZU51bWJlcj1yLHRoaXMucG9zaXRpb25Db2x1bW49c310b1N0cmluZygpe3JldHVybiJbIit0aGlzLnNlbGVjdGlvblN0YXJ0TGluZU51bWJlcisiLCIrdGhpcy5zZWxlY3Rpb25TdGFydENvbHVtbisiIC0+ICIrdGhpcy5wb3NpdGlvbkxpbmVOdW1iZXIrIiwiK3RoaXMucG9zaXRpb25Db2x1bW4rIl0ifWVxdWFsc1NlbGVjdGlvbih0KXtyZXR1cm4gdGUuc2VsZWN0aW9uc0VxdWFsKHRoaXMsdCl9c3RhdGljIHNlbGVjdGlvbnNFcXVhbCh0LG4pe3JldHVybiB0LnNlbGVjdGlvblN0YXJ0TGluZU51bWJlcj09PW4uc2VsZWN0aW9uU3RhcnRMaW5lTnVtYmVyJiZ0LnNlbGVjdGlvblN0YXJ0Q29sdW1uPT09bi5zZWxlY3Rpb25TdGFydENvbHVtbiYmdC5wb3NpdGlvbkxpbmVOdW1iZXI9PT1uLnBvc2l0aW9uTGluZU51bWJlciYmdC5wb3NpdGlvbkNvbHVtbj09PW4ucG9zaXRpb25Db2x1bW59Z2V0RGlyZWN0aW9uKCl7cmV0dXJuIHRoaXMuc2VsZWN0aW9uU3RhcnRMaW5lTnVtYmVyPT09dGhpcy5zdGFydExpbmVOdW1iZXImJnRoaXMuc2VsZWN0aW9uU3RhcnRDb2x1bW49PT10aGlzLnN0YXJ0Q29sdW1uPzA6MX1zZXRFbmRQb3NpdGlvbih0LG4pe3JldHVybiB0aGlzLmdldERpcmVjdGlvbigpPT09MD9uZXcgdGUodGhpcy5zdGFydExpbmVOdW1iZXIsdGhpcy5zdGFydENvbHVtbix0LG4pOm5ldyB0ZSh0LG4sdGhpcy5zdGFydExpbmVOdW1iZXIsdGhpcy5zdGFydENvbHVtbil9Z2V0UG9zaXRpb24oKXtyZXR1cm4gbmV3IEoodGhpcy5wb3NpdGlvbkxpbmVOdW1iZXIsdGhpcy5wb3NpdGlvbkNvbHVtbil9Z2V0U2VsZWN0aW9uU3RhcnQoKXtyZXR1cm4gbmV3IEoodGhpcy5zZWxlY3Rpb25TdGFydExpbmVOdW1iZXIsdGhpcy5zZWxlY3Rpb25TdGFydENvbHVtbil9c2V0U3RhcnRQb3NpdGlvbih0LG4pe3JldHVybiB0aGlzLmdldERpcmVjdGlvbigpPT09MD9uZXcgdGUodCxuLHRoaXMuZW5kTGluZU51bWJlcix0aGlzLmVuZENvbHVtbik6bmV3IHRlKHRoaXMuZW5kTGluZU51bWJlcix0aGlzLmVuZENvbHVtbix0LG4pfXN0YXRpYyBmcm9tUG9zaXRpb25zKHQsbj10KXtyZXR1cm4gbmV3IHRlKHQubGluZU51bWJlcix0LmNvbHVtbixuLmxpbmVOdW1iZXIsbi5jb2x1bW4pfXN0YXRpYyBmcm9tUmFuZ2UodCxuKXtyZXR1cm4gbj09PTA/bmV3IHRlKHQuc3RhcnRMaW5lTnVtYmVyLHQuc3RhcnRDb2x1bW4sdC5lbmRMaW5lTnVtYmVyLHQuZW5kQ29sdW1uKTpuZXcgdGUodC5lbmRMaW5lTnVtYmVyLHQuZW5kQ29sdW1uLHQuc3RhcnRMaW5lTnVtYmVyLHQuc3RhcnRDb2x1bW4pfXN0YXRpYyBsaWZ0U2VsZWN0aW9uKHQpe3JldHVybiBuZXcgdGUodC5zZWxlY3Rpb25TdGFydExpbmVOdW1iZXIsdC5zZWxlY3Rpb25TdGFydENvbHVtbix0LnBvc2l0aW9uTGluZU51bWJlcix0LnBvc2l0aW9uQ29sdW1uKX1zdGF0aWMgc2VsZWN0aW9uc0FyckVxdWFsKHQsbil7aWYodCYmIW58fCF0JiZuKXJldHVybiExO2lmKCF0JiYhbilyZXR1cm4hMDtpZih0Lmxlbmd0aCE9PW4ubGVuZ3RoKXJldHVybiExO2ZvcihsZXQgcj0wLHM9dC5sZW5ndGg7cjxzO3IrKylpZighdGhpcy5zZWxlY3Rpb25zRXF1YWwodFtyXSxuW3JdKSlyZXR1cm4hMTtyZXR1cm4hMH1zdGF0aWMgaXNJU2VsZWN0aW9uKHQpe3JldHVybiB0JiZ0eXBlb2YgdC5zZWxlY3Rpb25TdGFydExpbmVOdW1iZXI9PSJudW1iZXIiJiZ0eXBlb2YgdC5zZWxlY3Rpb25TdGFydENvbHVtbj09Im51bWJlciImJnR5cGVvZiB0LnBvc2l0aW9uTGluZU51bWJlcj09Im51bWJlciImJnR5cGVvZiB0LnBvc2l0aW9uQ29sdW1uPT0ibnVtYmVyIn1zdGF0aWMgY3JlYXRlV2l0aERpcmVjdGlvbih0LG4scixzLGkpe3JldHVybiBpPT09MD9uZXcgdGUodCxuLHIscyk6bmV3IHRlKHIscyx0LG4pfX1jb25zdCBDbj1PYmplY3QuY3JlYXRlKG51bGwpO2Z1bmN0aW9uIGEoZSx0KXtpZihkcyh0KSl7Y29uc3Qgbj1Dblt0XTtpZihuPT09dm9pZCAwKXRocm93IG5ldyBFcnJvcihgJHtlfSByZWZlcmVuY2VzIGFuIHVua25vd24gY29kaWNvbjogJHt0fWApO3Q9bn1yZXR1cm4gQ25bZV09dCx7aWQ6ZX19Y29uc3QgRWk9e2FkZDphKCJhZGQiLDZlNCkscGx1czphKCJwbHVzIiw2ZTQpLGdpc3ROZXc6YSgiZ2lzdC1uZXciLDZlNCkscmVwb0NyZWF0ZTphKCJyZXBvLWNyZWF0ZSIsNmU0KSxsaWdodGJ1bGI6YSgibGlnaHRidWxiIiw2MDAwMSksbGlnaHRCdWxiOmEoImxpZ2h0LWJ1bGIiLDYwMDAxKSxyZXBvOmEoInJlcG8iLDYwMDAyKSxyZXBvRGVsZXRlOmEoInJlcG8tZGVsZXRlIiw2MDAwMiksZ2lzdEZvcms6YSgiZ2lzdC1mb3JrIiw2MDAwMykscmVwb0ZvcmtlZDphKCJyZXBvLWZvcmtlZCIsNjAwMDMpLGdpdFB1bGxSZXF1ZXN0OmEoImdpdC1wdWxsLXJlcXVlc3QiLDYwMDA0KSxnaXRQdWxsUmVxdWVzdEFiYW5kb25lZDphKCJnaXQtcHVsbC1yZXF1ZXN0LWFiYW5kb25lZCIsNjAwMDQpLHJlY29yZEtleXM6YSgicmVjb3JkLWtleXMiLDYwMDA1KSxrZXlib2FyZDphKCJrZXlib2FyZCIsNjAwMDUpLHRhZzphKCJ0YWciLDYwMDA2KSxnaXRQdWxsUmVxdWVzdExhYmVsOmEoImdpdC1wdWxsLXJlcXVlc3QtbGFiZWwiLDYwMDA2KSx0YWdBZGQ6YSgidGFnLWFkZCIsNjAwMDYpLHRhZ1JlbW92ZTphKCJ0YWctcmVtb3ZlIiw2MDAwNikscGVyc29uOmEoInBlcnNvbiIsNjAwMDcpLHBlcnNvbkZvbGxvdzphKCJwZXJzb24tZm9sbG93Iiw2MDAwNykscGVyc29uT3V0bGluZTphKCJwZXJzb24tb3V0bGluZSIsNjAwMDcpLHBlcnNvbkZpbGxlZDphKCJwZXJzb24tZmlsbGVkIiw2MDAwNyksZ2l0QnJhbmNoOmEoImdpdC1icmFuY2giLDYwMDA4KSxnaXRCcmFuY2hDcmVhdGU6YSgiZ2l0LWJyYW5jaC1jcmVhdGUiLDYwMDA4KSxnaXRCcmFuY2hEZWxldGU6YSgiZ2l0LWJyYW5jaC1kZWxldGUiLDYwMDA4KSxzb3VyY2VDb250cm9sOmEoInNvdXJjZS1jb250cm9sIiw2MDAwOCksbWlycm9yOmEoIm1pcnJvciIsNjAwMDkpLG1pcnJvclB1YmxpYzphKCJtaXJyb3ItcHVibGljIiw2MDAwOSksc3RhcjphKCJzdGFyIiw2MDAxMCksc3RhckFkZDphKCJzdGFyLWFkZCIsNjAwMTApLHN0YXJEZWxldGU6YSgic3Rhci1kZWxldGUiLDYwMDEwKSxzdGFyRW1wdHk6YSgic3Rhci1lbXB0eSIsNjAwMTApLGNvbW1lbnQ6YSgiY29tbWVudCIsNjAwMTEpLGNvbW1lbnRBZGQ6YSgiY29tbWVudC1hZGQiLDYwMDExKSxhbGVydDphKCJhbGVydCIsNjAwMTIpLHdhcm5pbmc6YSgid2FybmluZyIsNjAwMTIpLHNlYXJjaDphKCJzZWFyY2giLDYwMDEzKSxzZWFyY2hTYXZlOmEoInNlYXJjaC1zYXZlIiw2MDAxMyksbG9nT3V0OmEoImxvZy1vdXQiLDYwMDE0KSxzaWduT3V0OmEoInNpZ24tb3V0Iiw2MDAxNCksbG9nSW46YSgibG9nLWluIiw2MDAxNSksc2lnbkluOmEoInNpZ24taW4iLDYwMDE1KSxleWU6YSgiZXllIiw2MDAxNiksZXllVW53YXRjaDphKCJleWUtdW53YXRjaCIsNjAwMTYpLGV5ZVdhdGNoOmEoImV5ZS13YXRjaCIsNjAwMTYpLGNpcmNsZUZpbGxlZDphKCJjaXJjbGUtZmlsbGVkIiw2MDAxNykscHJpbWl0aXZlRG90OmEoInByaW1pdGl2ZS1kb3QiLDYwMDE3KSxjbG9zZURpcnR5OmEoImNsb3NlLWRpcnR5Iiw2MDAxNyksZGVidWdCcmVha3BvaW50OmEoImRlYnVnLWJyZWFrcG9pbnQiLDYwMDE3KSxkZWJ1Z0JyZWFrcG9pbnREaXNhYmxlZDphKCJkZWJ1Zy1icmVha3BvaW50LWRpc2FibGVkIiw2MDAxNyksZGVidWdIaW50OmEoImRlYnVnLWhpbnQiLDYwMDE3KSx0ZXJtaW5hbERlY29yYXRpb25TdWNjZXNzOmEoInRlcm1pbmFsLWRlY29yYXRpb24tc3VjY2VzcyIsNjAwMTcpLHByaW1pdGl2ZVNxdWFyZTphKCJwcmltaXRpdmUtc3F1YXJlIiw2MDAxOCksZWRpdDphKCJlZGl0Iiw2MDAxOSkscGVuY2lsOmEoInBlbmNpbCIsNjAwMTkpLGluZm86YSgiaW5mbyIsNjAwMjApLGlzc3VlT3BlbmVkOmEoImlzc3VlLW9wZW5lZCIsNjAwMjApLGdpc3RQcml2YXRlOmEoImdpc3QtcHJpdmF0ZSIsNjAwMjEpLGdpdEZvcmtQcml2YXRlOmEoImdpdC1mb3JrLXByaXZhdGUiLDYwMDIxKSxsb2NrOmEoImxvY2siLDYwMDIxKSxtaXJyb3JQcml2YXRlOmEoIm1pcnJvci1wcml2YXRlIiw2MDAyMSksY2xvc2U6YSgiY2xvc2UiLDYwMDIyKSxyZW1vdmVDbG9zZTphKCJyZW1vdmUtY2xvc2UiLDYwMDIyKSx4OmEoIngiLDYwMDIyKSxyZXBvU3luYzphKCJyZXBvLXN5bmMiLDYwMDIzKSxzeW5jOmEoInN5bmMiLDYwMDIzKSxjbG9uZTphKCJjbG9uZSIsNjAwMjQpLGRlc2t0b3BEb3dubG9hZDphKCJkZXNrdG9wLWRvd25sb2FkIiw2MDAyNCksYmVha2VyOmEoImJlYWtlciIsNjAwMjUpLG1pY3Jvc2NvcGU6YSgibWljcm9zY29wZSIsNjAwMjUpLHZtOmEoInZtIiw2MDAyNiksZGV2aWNlRGVza3RvcDphKCJkZXZpY2UtZGVza3RvcCIsNjAwMjYpLGZpbGU6YSgiZmlsZSIsNjAwMjcpLGZpbGVUZXh0OmEoImZpbGUtdGV4dCIsNjAwMjcpLG1vcmU6YSgibW9yZSIsNjAwMjgpLGVsbGlwc2lzOmEoImVsbGlwc2lzIiw2MDAyOCksa2ViYWJIb3Jpem9udGFsOmEoImtlYmFiLWhvcml6b250YWwiLDYwMDI4KSxtYWlsUmVwbHk6YSgibWFpbC1yZXBseSIsNjAwMjkpLHJlcGx5OmEoInJlcGx5Iiw2MDAyOSksb3JnYW5pemF0aW9uOmEoIm9yZ2FuaXphdGlvbiIsNjAwMzApLG9yZ2FuaXphdGlvbkZpbGxlZDphKCJvcmdhbml6YXRpb24tZmlsbGVkIiw2MDAzMCksb3JnYW5pemF0aW9uT3V0bGluZTphKCJvcmdhbml6YXRpb24tb3V0bGluZSIsNjAwMzApLG5ld0ZpbGU6YSgibmV3LWZpbGUiLDYwMDMxKSxmaWxlQWRkOmEoImZpbGUtYWRkIiw2MDAzMSksbmV3Rm9sZGVyOmEoIm5ldy1mb2xkZXIiLDYwMDMyKSxmaWxlRGlyZWN0b3J5Q3JlYXRlOmEoImZpbGUtZGlyZWN0b3J5LWNyZWF0ZSIsNjAwMzIpLHRyYXNoOmEoInRyYXNoIiw2MDAzMyksdHJhc2hjYW46YSgidHJhc2hjYW4iLDYwMDMzKSxoaXN0b3J5OmEoImhpc3RvcnkiLDYwMDM0KSxjbG9jazphKCJjbG9jayIsNjAwMzQpLGZvbGRlcjphKCJmb2xkZXIiLDYwMDM1KSxmaWxlRGlyZWN0b3J5OmEoImZpbGUtZGlyZWN0b3J5Iiw2MDAzNSksc3ltYm9sRm9sZGVyOmEoInN5bWJvbC1mb2xkZXIiLDYwMDM1KSxsb2dvR2l0aHViOmEoImxvZ28tZ2l0aHViIiw2MDAzNiksbWFya0dpdGh1YjphKCJtYXJrLWdpdGh1YiIsNjAwMzYpLGdpdGh1YjphKCJnaXRodWIiLDYwMDM2KSx0ZXJtaW5hbDphKCJ0ZXJtaW5hbCIsNjAwMzcpLGNvbnNvbGU6YSgiY29uc29sZSIsNjAwMzcpLHJlcGw6YSgicmVwbCIsNjAwMzcpLHphcDphKCJ6YXAiLDYwMDM4KSxzeW1ib2xFdmVudDphKCJzeW1ib2wtZXZlbnQiLDYwMDM4KSxlcnJvcjphKCJlcnJvciIsNjAwMzkpLHN0b3A6YSgic3RvcCIsNjAwMzkpLHZhcmlhYmxlOmEoInZhcmlhYmxlIiw2MDA0MCksc3ltYm9sVmFyaWFibGU6YSgic3ltYm9sLXZhcmlhYmxlIiw2MDA0MCksYXJyYXk6YSgiYXJyYXkiLDYwMDQyKSxzeW1ib2xBcnJheTphKCJzeW1ib2wtYXJyYXkiLDYwMDQyKSxzeW1ib2xNb2R1bGU6YSgic3ltYm9sLW1vZHVsZSIsNjAwNDMpLHN5bWJvbFBhY2thZ2U6YSgic3ltYm9sLXBhY2thZ2UiLDYwMDQzKSxzeW1ib2xOYW1lc3BhY2U6YSgic3ltYm9sLW5hbWVzcGFjZSIsNjAwNDMpLHN5bWJvbE9iamVjdDphKCJzeW1ib2wtb2JqZWN0Iiw2MDA0Myksc3ltYm9sTWV0aG9kOmEoInN5bWJvbC1tZXRob2QiLDYwMDQ0KSxzeW1ib2xGdW5jdGlvbjphKCJzeW1ib2wtZnVuY3Rpb24iLDYwMDQ0KSxzeW1ib2xDb25zdHJ1Y3RvcjphKCJzeW1ib2wtY29uc3RydWN0b3IiLDYwMDQ0KSxzeW1ib2xCb29sZWFuOmEoInN5bWJvbC1ib29sZWFuIiw2MDA0Nyksc3ltYm9sTnVsbDphKCJzeW1ib2wtbnVsbCIsNjAwNDcpLHN5bWJvbE51bWVyaWM6YSgic3ltYm9sLW51bWVyaWMiLDYwMDQ4KSxzeW1ib2xOdW1iZXI6YSgic3ltYm9sLW51bWJlciIsNjAwNDgpLHN5bWJvbFN0cnVjdHVyZTphKCJzeW1ib2wtc3RydWN0dXJlIiw2MDA0OSksc3ltYm9sU3RydWN0OmEoInN5bWJvbC1zdHJ1Y3QiLDYwMDQ5KSxzeW1ib2xQYXJhbWV0ZXI6YSgic3ltYm9sLXBhcmFtZXRlciIsNjAwNTApLHN5bWJvbFR5cGVQYXJhbWV0ZXI6YSgic3ltYm9sLXR5cGUtcGFyYW1ldGVyIiw2MDA1MCksc3ltYm9sS2V5OmEoInN5bWJvbC1rZXkiLDYwMDUxKSxzeW1ib2xUZXh0OmEoInN5bWJvbC10ZXh0Iiw2MDA1MSksc3ltYm9sUmVmZXJlbmNlOmEoInN5bWJvbC1yZWZlcmVuY2UiLDYwMDUyKSxnb1RvRmlsZTphKCJnby10by1maWxlIiw2MDA1Miksc3ltYm9sRW51bTphKCJzeW1ib2wtZW51bSIsNjAwNTMpLHN5bWJvbFZhbHVlOmEoInN5bWJvbC12YWx1ZSIsNjAwNTMpLHN5bWJvbFJ1bGVyOmEoInN5bWJvbC1ydWxlciIsNjAwNTQpLHN5bWJvbFVuaXQ6YSgic3ltYm9sLXVuaXQiLDYwMDU0KSxhY3RpdmF0ZUJyZWFrcG9pbnRzOmEoImFjdGl2YXRlLWJyZWFrcG9pbnRzIiw2MDA1NSksYXJjaGl2ZTphKCJhcmNoaXZlIiw2MDA1NiksYXJyb3dCb3RoOmEoImFycm93LWJvdGgiLDYwMDU3KSxhcnJvd0Rvd246YSgiYXJyb3ctZG93biIsNjAwNTgpLGFycm93TGVmdDphKCJhcnJvdy1sZWZ0Iiw2MDA1OSksYXJyb3dSaWdodDphKCJhcnJvdy1yaWdodCIsNjAwNjApLGFycm93U21hbGxEb3duOmEoImFycm93LXNtYWxsLWRvd24iLDYwMDYxKSxhcnJvd1NtYWxsTGVmdDphKCJhcnJvdy1zbWFsbC1sZWZ0Iiw2MDA2MiksYXJyb3dTbWFsbFJpZ2h0OmEoImFycm93LXNtYWxsLXJpZ2h0Iiw2MDA2MyksYXJyb3dTbWFsbFVwOmEoImFycm93LXNtYWxsLXVwIiw2MDA2NCksYXJyb3dVcDphKCJhcnJvdy11cCIsNjAwNjUpLGJlbGw6YSgiYmVsbCIsNjAwNjYpLGJvbGQ6YSgiYm9sZCIsNjAwNjcpLGJvb2s6YSgiYm9vayIsNjAwNjgpLGJvb2ttYXJrOmEoImJvb2ttYXJrIiw2MDA2OSksZGVidWdCcmVha3BvaW50Q29uZGl0aW9uYWxVbnZlcmlmaWVkOmEoImRlYnVnLWJyZWFrcG9pbnQtY29uZGl0aW9uYWwtdW52ZXJpZmllZCIsNjAwNzApLGRlYnVnQnJlYWtwb2ludENvbmRpdGlvbmFsOmEoImRlYnVnLWJyZWFrcG9pbnQtY29uZGl0aW9uYWwiLDYwMDcxKSxkZWJ1Z0JyZWFrcG9pbnRDb25kaXRpb25hbERpc2FibGVkOmEoImRlYnVnLWJyZWFrcG9pbnQtY29uZGl0aW9uYWwtZGlzYWJsZWQiLDYwMDcxKSxkZWJ1Z0JyZWFrcG9pbnREYXRhVW52ZXJpZmllZDphKCJkZWJ1Zy1icmVha3BvaW50LWRhdGEtdW52ZXJpZmllZCIsNjAwNzIpLGRlYnVnQnJlYWtwb2ludERhdGE6YSgiZGVidWctYnJlYWtwb2ludC1kYXRhIiw2MDA3MyksZGVidWdCcmVha3BvaW50RGF0YURpc2FibGVkOmEoImRlYnVnLWJyZWFrcG9pbnQtZGF0YS1kaXNhYmxlZCIsNjAwNzMpLGRlYnVnQnJlYWtwb2ludExvZ1VudmVyaWZpZWQ6YSgiZGVidWctYnJlYWtwb2ludC1sb2ctdW52ZXJpZmllZCIsNjAwNzQpLGRlYnVnQnJlYWtwb2ludExvZzphKCJkZWJ1Zy1icmVha3BvaW50LWxvZyIsNjAwNzUpLGRlYnVnQnJlYWtwb2ludExvZ0Rpc2FibGVkOmEoImRlYnVnLWJyZWFrcG9pbnQtbG9nLWRpc2FibGVkIiw2MDA3NSksYnJpZWZjYXNlOmEoImJyaWVmY2FzZSIsNjAwNzYpLGJyb2FkY2FzdDphKCJicm9hZGNhc3QiLDYwMDc3KSxicm93c2VyOmEoImJyb3dzZXIiLDYwMDc4KSxidWc6YSgiYnVnIiw2MDA3OSksY2FsZW5kYXI6YSgiY2FsZW5kYXIiLDYwMDgwKSxjYXNlU2Vuc2l0aXZlOmEoImNhc2Utc2Vuc2l0aXZlIiw2MDA4MSksY2hlY2s6YSgiY2hlY2siLDYwMDgyKSxjaGVja2xpc3Q6YSgiY2hlY2tsaXN0Iiw2MDA4MyksY2hldnJvbkRvd246YSgiY2hldnJvbi1kb3duIiw2MDA4NCksY2hldnJvbkxlZnQ6YSgiY2hldnJvbi1sZWZ0Iiw2MDA4NSksY2hldnJvblJpZ2h0OmEoImNoZXZyb24tcmlnaHQiLDYwMDg2KSxjaGV2cm9uVXA6YSgiY2hldnJvbi11cCIsNjAwODcpLGNocm9tZUNsb3NlOmEoImNocm9tZS1jbG9zZSIsNjAwODgpLGNocm9tZU1heGltaXplOmEoImNocm9tZS1tYXhpbWl6ZSIsNjAwODkpLGNocm9tZU1pbmltaXplOmEoImNocm9tZS1taW5pbWl6ZSIsNjAwOTApLGNocm9tZVJlc3RvcmU6YSgiY2hyb21lLXJlc3RvcmUiLDYwMDkxKSxjaXJjbGVPdXRsaW5lOmEoImNpcmNsZS1vdXRsaW5lIiw2MDA5MiksY2lyY2xlOmEoImNpcmNsZSIsNjAwOTIpLGRlYnVnQnJlYWtwb2ludFVudmVyaWZpZWQ6YSgiZGVidWctYnJlYWtwb2ludC11bnZlcmlmaWVkIiw2MDA5MiksdGVybWluYWxEZWNvcmF0aW9uSW5jb21wbGV0ZTphKCJ0ZXJtaW5hbC1kZWNvcmF0aW9uLWluY29tcGxldGUiLDYwMDkyKSxjaXJjbGVTbGFzaDphKCJjaXJjbGUtc2xhc2giLDYwMDkzKSxjaXJjdWl0Qm9hcmQ6YSgiY2lyY3VpdC1ib2FyZCIsNjAwOTQpLGNsZWFyQWxsOmEoImNsZWFyLWFsbCIsNjAwOTUpLGNsaXBweTphKCJjbGlwcHkiLDYwMDk2KSxjbG9zZUFsbDphKCJjbG9zZS1hbGwiLDYwMDk3KSxjbG91ZERvd25sb2FkOmEoImNsb3VkLWRvd25sb2FkIiw2MDA5OCksY2xvdWRVcGxvYWQ6YSgiY2xvdWQtdXBsb2FkIiw2MDA5OSksY29kZTphKCJjb2RlIiw2MDEwMCksY29sbGFwc2VBbGw6YSgiY29sbGFwc2UtYWxsIiw2MDEwMSksY29sb3JNb2RlOmEoImNvbG9yLW1vZGUiLDYwMTAyKSxjb21tZW50RGlzY3Vzc2lvbjphKCJjb21tZW50LWRpc2N1c3Npb24iLDYwMTAzKSxjcmVkaXRDYXJkOmEoImNyZWRpdC1jYXJkIiw2MDEwNSksZGFzaDphKCJkYXNoIiw2MDEwOCksZGFzaGJvYXJkOmEoImRhc2hib2FyZCIsNjAxMDkpLGRhdGFiYXNlOmEoImRhdGFiYXNlIiw2MDExMCksZGVidWdDb250aW51ZTphKCJkZWJ1Zy1jb250aW51ZSIsNjAxMTEpLGRlYnVnRGlzY29ubmVjdDphKCJkZWJ1Zy1kaXNjb25uZWN0Iiw2MDExMiksZGVidWdQYXVzZTphKCJkZWJ1Zy1wYXVzZSIsNjAxMTMpLGRlYnVnUmVzdGFydDphKCJkZWJ1Zy1yZXN0YXJ0Iiw2MDExNCksZGVidWdTdGFydDphKCJkZWJ1Zy1zdGFydCIsNjAxMTUpLGRlYnVnU3RlcEludG86YSgiZGVidWctc3RlcC1pbnRvIiw2MDExNiksZGVidWdTdGVwT3V0OmEoImRlYnVnLXN0ZXAtb3V0Iiw2MDExNyksZGVidWdTdGVwT3ZlcjphKCJkZWJ1Zy1zdGVwLW92ZXIiLDYwMTE4KSxkZWJ1Z1N0b3A6YSgiZGVidWctc3RvcCIsNjAxMTkpLGRlYnVnOmEoImRlYnVnIiw2MDEyMCksZGV2aWNlQ2FtZXJhVmlkZW86YSgiZGV2aWNlLWNhbWVyYS12aWRlbyIsNjAxMjEpLGRldmljZUNhbWVyYTphKCJkZXZpY2UtY2FtZXJhIiw2MDEyMiksZGV2aWNlTW9iaWxlOmEoImRldmljZS1tb2JpbGUiLDYwMTIzKSxkaWZmQWRkZWQ6YSgiZGlmZi1hZGRlZCIsNjAxMjQpLGRpZmZJZ25vcmVkOmEoImRpZmYtaWdub3JlZCIsNjAxMjUpLGRpZmZNb2RpZmllZDphKCJkaWZmLW1vZGlmaWVkIiw2MDEyNiksZGlmZlJlbW92ZWQ6YSgiZGlmZi1yZW1vdmVkIiw2MDEyNyksZGlmZlJlbmFtZWQ6YSgiZGlmZi1yZW5hbWVkIiw2MDEyOCksZGlmZjphKCJkaWZmIiw2MDEyOSksZGlmZlNpZGVieXNpZGU6YSgiZGlmZi1zaWRlYnlzaWRlIiw2MDEyOSksZGlzY2FyZDphKCJkaXNjYXJkIiw2MDEzMCksZWRpdG9yTGF5b3V0OmEoImVkaXRvci1sYXlvdXQiLDYwMTMxKSxlbXB0eVdpbmRvdzphKCJlbXB0eS13aW5kb3ciLDYwMTMyKSxleGNsdWRlOmEoImV4Y2x1ZGUiLDYwMTMzKSxleHRlbnNpb25zOmEoImV4dGVuc2lvbnMiLDYwMTM0KSxleWVDbG9zZWQ6YSgiZXllLWNsb3NlZCIsNjAxMzUpLGZpbGVCaW5hcnk6YSgiZmlsZS1iaW5hcnkiLDYwMTM2KSxmaWxlQ29kZTphKCJmaWxlLWNvZGUiLDYwMTM3KSxmaWxlTWVkaWE6YSgiZmlsZS1tZWRpYSIsNjAxMzgpLGZpbGVQZGY6YSgiZmlsZS1wZGYiLDYwMTM5KSxmaWxlU3VibW9kdWxlOmEoImZpbGUtc3VibW9kdWxlIiw2MDE0MCksZmlsZVN5bWxpbmtEaXJlY3Rvcnk6YSgiZmlsZS1zeW1saW5rLWRpcmVjdG9yeSIsNjAxNDEpLGZpbGVTeW1saW5rRmlsZTphKCJmaWxlLXN5bWxpbmstZmlsZSIsNjAxNDIpLGZpbGVaaXA6YSgiZmlsZS16aXAiLDYwMTQzKSxmaWxlczphKCJmaWxlcyIsNjAxNDQpLGZpbHRlcjphKCJmaWx0ZXIiLDYwMTQ1KSxmbGFtZTphKCJmbGFtZSIsNjAxNDYpLGZvbGREb3duOmEoImZvbGQtZG93biIsNjAxNDcpLGZvbGRVcDphKCJmb2xkLXVwIiw2MDE0OCksZm9sZDphKCJmb2xkIiw2MDE0OSksZm9sZGVyQWN0aXZlOmEoImZvbGRlci1hY3RpdmUiLDYwMTUwKSxmb2xkZXJPcGVuZWQ6YSgiZm9sZGVyLW9wZW5lZCIsNjAxNTEpLGdlYXI6YSgiZ2VhciIsNjAxNTIpLGdpZnQ6YSgiZ2lmdCIsNjAxNTMpLGdpc3RTZWNyZXQ6YSgiZ2lzdC1zZWNyZXQiLDYwMTU0KSxnaXN0OmEoImdpc3QiLDYwMTU1KSxnaXRDb21taXQ6YSgiZ2l0LWNvbW1pdCIsNjAxNTYpLGdpdENvbXBhcmU6YSgiZ2l0LWNvbXBhcmUiLDYwMTU3KSxjb21wYXJlQ2hhbmdlczphKCJjb21wYXJlLWNoYW5nZXMiLDYwMTU3KSxnaXRNZXJnZTphKCJnaXQtbWVyZ2UiLDYwMTU4KSxnaXRodWJBY3Rpb246YSgiZ2l0aHViLWFjdGlvbiIsNjAxNTkpLGdpdGh1YkFsdDphKCJnaXRodWItYWx0Iiw2MDE2MCksZ2xvYmU6YSgiZ2xvYmUiLDYwMTYxKSxncmFiYmVyOmEoImdyYWJiZXIiLDYwMTYyKSxncmFwaDphKCJncmFwaCIsNjAxNjMpLGdyaXBwZXI6YSgiZ3JpcHBlciIsNjAxNjQpLGhlYXJ0OmEoImhlYXJ0Iiw2MDE2NSksaG9tZTphKCJob21lIiw2MDE2NiksaG9yaXpvbnRhbFJ1bGU6YSgiaG9yaXpvbnRhbC1ydWxlIiw2MDE2NyksaHVib3Q6YSgiaHVib3QiLDYwMTY4KSxpbmJveDphKCJpbmJveCIsNjAxNjkpLGlzc3VlUmVvcGVuZWQ6YSgiaXNzdWUtcmVvcGVuZWQiLDYwMTcxKSxpc3N1ZXM6YSgiaXNzdWVzIiw2MDE3MiksaXRhbGljOmEoIml0YWxpYyIsNjAxNzMpLGplcnNleTphKCJqZXJzZXkiLDYwMTc0KSxqc29uOmEoImpzb24iLDYwMTc1KSxrZWJhYlZlcnRpY2FsOmEoImtlYmFiLXZlcnRpY2FsIiw2MDE3Niksa2V5OmEoImtleSIsNjAxNzcpLGxhdzphKCJsYXciLDYwMTc4KSxsaWdodGJ1bGJBdXRvZml4OmEoImxpZ2h0YnVsYi1hdXRvZml4Iiw2MDE3OSksbGlua0V4dGVybmFsOmEoImxpbmstZXh0ZXJuYWwiLDYwMTgwKSxsaW5rOmEoImxpbmsiLDYwMTgxKSxsaXN0T3JkZXJlZDphKCJsaXN0LW9yZGVyZWQiLDYwMTgyKSxsaXN0VW5vcmRlcmVkOmEoImxpc3QtdW5vcmRlcmVkIiw2MDE4MyksbGl2ZVNoYXJlOmEoImxpdmUtc2hhcmUiLDYwMTg0KSxsb2FkaW5nOmEoImxvYWRpbmciLDYwMTg1KSxsb2NhdGlvbjphKCJsb2NhdGlvbiIsNjAxODYpLG1haWxSZWFkOmEoIm1haWwtcmVhZCIsNjAxODcpLG1haWw6YSgibWFpbCIsNjAxODgpLG1hcmtkb3duOmEoIm1hcmtkb3duIiw2MDE4OSksbWVnYXBob25lOmEoIm1lZ2FwaG9uZSIsNjAxOTApLG1lbnRpb246YSgibWVudGlvbiIsNjAxOTEpLG1pbGVzdG9uZTphKCJtaWxlc3RvbmUiLDYwMTkyKSxnaXRQdWxsUmVxdWVzdE1pbGVzdG9uZTphKCJnaXQtcHVsbC1yZXF1ZXN0LW1pbGVzdG9uZSIsNjAxOTIpLG1vcnRhckJvYXJkOmEoIm1vcnRhci1ib2FyZCIsNjAxOTMpLG1vdmU6YSgibW92ZSIsNjAxOTQpLG11bHRpcGxlV2luZG93czphKCJtdWx0aXBsZS13aW5kb3dzIiw2MDE5NSksbXV0ZTphKCJtdXRlIiw2MDE5Niksbm9OZXdsaW5lOmEoIm5vLW5ld2xpbmUiLDYwMTk3KSxub3RlOmEoIm5vdGUiLDYwMTk4KSxvY3RvZmFjZTphKCJvY3RvZmFjZSIsNjAxOTkpLG9wZW5QcmV2aWV3OmEoIm9wZW4tcHJldmlldyIsNjAyMDApLHBhY2thZ2U6YSgicGFja2FnZSIsNjAyMDEpLHBhaW50Y2FuOmEoInBhaW50Y2FuIiw2MDIwMikscGluOmEoInBpbiIsNjAyMDMpLHBsYXk6YSgicGxheSIsNjAyMDQpLHJ1bjphKCJydW4iLDYwMjA0KSxwbHVnOmEoInBsdWciLDYwMjA1KSxwcmVzZXJ2ZUNhc2U6YSgicHJlc2VydmUtY2FzZSIsNjAyMDYpLHByZXZpZXc6YSgicHJldmlldyIsNjAyMDcpLHByb2plY3Q6YSgicHJvamVjdCIsNjAyMDgpLHB1bHNlOmEoInB1bHNlIiw2MDIwOSkscXVlc3Rpb246YSgicXVlc3Rpb24iLDYwMjEwKSxxdW90ZTphKCJxdW90ZSIsNjAyMTEpLHJhZGlvVG93ZXI6YSgicmFkaW8tdG93ZXIiLDYwMjEyKSxyZWFjdGlvbnM6YSgicmVhY3Rpb25zIiw2MDIxMykscmVmZXJlbmNlczphKCJyZWZlcmVuY2VzIiw2MDIxNCkscmVmcmVzaDphKCJyZWZyZXNoIiw2MDIxNSkscmVnZXg6YSgicmVnZXgiLDYwMjE2KSxyZW1vdGVFeHBsb3JlcjphKCJyZW1vdGUtZXhwbG9yZXIiLDYwMjE3KSxyZW1vdGU6YSgicmVtb3RlIiw2MDIxOCkscmVtb3ZlOmEoInJlbW92ZSIsNjAyMTkpLHJlcGxhY2VBbGw6YSgicmVwbGFjZS1hbGwiLDYwMjIwKSxyZXBsYWNlOmEoInJlcGxhY2UiLDYwMjIxKSxyZXBvQ2xvbmU6YSgicmVwby1jbG9uZSIsNjAyMjIpLHJlcG9Gb3JjZVB1c2g6YSgicmVwby1mb3JjZS1wdXNoIiw2MDIyMykscmVwb1B1bGw6YSgicmVwby1wdWxsIiw2MDIyNCkscmVwb1B1c2g6YSgicmVwby1wdXNoIiw2MDIyNSkscmVwb3J0OmEoInJlcG9ydCIsNjAyMjYpLHJlcXVlc3RDaGFuZ2VzOmEoInJlcXVlc3QtY2hhbmdlcyIsNjAyMjcpLHJvY2tldDphKCJyb2NrZXQiLDYwMjI4KSxyb290Rm9sZGVyT3BlbmVkOmEoInJvb3QtZm9sZGVyLW9wZW5lZCIsNjAyMjkpLHJvb3RGb2xkZXI6YSgicm9vdC1mb2xkZXIiLDYwMjMwKSxyc3M6YSgicnNzIiw2MDIzMSkscnVieTphKCJydWJ5Iiw2MDIzMiksc2F2ZUFsbDphKCJzYXZlLWFsbCIsNjAyMzMpLHNhdmVBczphKCJzYXZlLWFzIiw2MDIzNCksc2F2ZTphKCJzYXZlIiw2MDIzNSksc2NyZWVuRnVsbDphKCJzY3JlZW4tZnVsbCIsNjAyMzYpLHNjcmVlbk5vcm1hbDphKCJzY3JlZW4tbm9ybWFsIiw2MDIzNyksc2VhcmNoU3RvcDphKCJzZWFyY2gtc3RvcCIsNjAyMzgpLHNlcnZlcjphKCJzZXJ2ZXIiLDYwMjQwKSxzZXR0aW5nc0dlYXI6YSgic2V0dGluZ3MtZ2VhciIsNjAyNDEpLHNldHRpbmdzOmEoInNldHRpbmdzIiw2MDI0Miksc2hpZWxkOmEoInNoaWVsZCIsNjAyNDMpLHNtaWxleTphKCJzbWlsZXkiLDYwMjQ0KSxzb3J0UHJlY2VkZW5jZTphKCJzb3J0LXByZWNlZGVuY2UiLDYwMjQ1KSxzcGxpdEhvcml6b250YWw6YSgic3BsaXQtaG9yaXpvbnRhbCIsNjAyNDYpLHNwbGl0VmVydGljYWw6YSgic3BsaXQtdmVydGljYWwiLDYwMjQ3KSxzcXVpcnJlbDphKCJzcXVpcnJlbCIsNjAyNDgpLHN0YXJGdWxsOmEoInN0YXItZnVsbCIsNjAyNDkpLHN0YXJIYWxmOmEoInN0YXItaGFsZiIsNjAyNTApLHN5bWJvbENsYXNzOmEoInN5bWJvbC1jbGFzcyIsNjAyNTEpLHN5bWJvbENvbG9yOmEoInN5bWJvbC1jb2xvciIsNjAyNTIpLHN5bWJvbENvbnN0YW50OmEoInN5bWJvbC1jb25zdGFudCIsNjAyNTMpLHN5bWJvbEVudW1NZW1iZXI6YSgic3ltYm9sLWVudW0tbWVtYmVyIiw2MDI1NCksc3ltYm9sRmllbGQ6YSgic3ltYm9sLWZpZWxkIiw2MDI1NSksc3ltYm9sRmlsZTphKCJzeW1ib2wtZmlsZSIsNjAyNTYpLHN5bWJvbEludGVyZmFjZTphKCJzeW1ib2wtaW50ZXJmYWNlIiw2MDI1Nyksc3ltYm9sS2V5d29yZDphKCJzeW1ib2wta2V5d29yZCIsNjAyNTgpLHN5bWJvbE1pc2M6YSgic3ltYm9sLW1pc2MiLDYwMjU5KSxzeW1ib2xPcGVyYXRvcjphKCJzeW1ib2wtb3BlcmF0b3IiLDYwMjYwKSxzeW1ib2xQcm9wZXJ0eTphKCJzeW1ib2wtcHJvcGVydHkiLDYwMjYxKSx3cmVuY2g6YSgid3JlbmNoIiw2MDI2MSksd3JlbmNoU3ViYWN0aW9uOmEoIndyZW5jaC1zdWJhY3Rpb24iLDYwMjYxKSxzeW1ib2xTbmlwcGV0OmEoInN5bWJvbC1zbmlwcGV0Iiw2MDI2MiksdGFza2xpc3Q6YSgidGFza2xpc3QiLDYwMjYzKSx0ZWxlc2NvcGU6YSgidGVsZXNjb3BlIiw2MDI2NCksdGV4dFNpemU6YSgidGV4dC1zaXplIiw2MDI2NSksdGhyZWVCYXJzOmEoInRocmVlLWJhcnMiLDYwMjY2KSx0aHVtYnNkb3duOmEoInRodW1ic2Rvd24iLDYwMjY3KSx0aHVtYnN1cDphKCJ0aHVtYnN1cCIsNjAyNjgpLHRvb2xzOmEoInRvb2xzIiw2MDI2OSksdHJpYW5nbGVEb3duOmEoInRyaWFuZ2xlLWRvd24iLDYwMjcwKSx0cmlhbmdsZUxlZnQ6YSgidHJpYW5nbGUtbGVmdCIsNjAyNzEpLHRyaWFuZ2xlUmlnaHQ6YSgidHJpYW5nbGUtcmlnaHQiLDYwMjcyKSx0cmlhbmdsZVVwOmEoInRyaWFuZ2xlLXVwIiw2MDI3MyksdHdpdHRlcjphKCJ0d2l0dGVyIiw2MDI3NCksdW5mb2xkOmEoInVuZm9sZCIsNjAyNzUpLHVubG9jazphKCJ1bmxvY2siLDYwMjc2KSx1bm11dGU6YSgidW5tdXRlIiw2MDI3NyksdW52ZXJpZmllZDphKCJ1bnZlcmlmaWVkIiw2MDI3OCksdmVyaWZpZWQ6YSgidmVyaWZpZWQiLDYwMjc5KSx2ZXJzaW9uczphKCJ2ZXJzaW9ucyIsNjAyODApLHZtQWN0aXZlOmEoInZtLWFjdGl2ZSIsNjAyODEpLHZtT3V0bGluZTphKCJ2bS1vdXRsaW5lIiw2MDI4Miksdm1SdW5uaW5nOmEoInZtLXJ1bm5pbmciLDYwMjgzKSx3YXRjaDphKCJ3YXRjaCIsNjAyODQpLHdoaXRlc3BhY2U6YSgid2hpdGVzcGFjZSIsNjAyODUpLHdob2xlV29yZDphKCJ3aG9sZS13b3JkIiw2MDI4Niksd2luZG93OmEoIndpbmRvdyIsNjAyODcpLHdvcmRXcmFwOmEoIndvcmQtd3JhcCIsNjAyODgpLHpvb21JbjphKCJ6b29tLWluIiw2MDI4OSksem9vbU91dDphKCJ6b29tLW91dCIsNjAyOTApLGxpc3RGaWx0ZXI6YSgibGlzdC1maWx0ZXIiLDYwMjkxKSxsaXN0RmxhdDphKCJsaXN0LWZsYXQiLDYwMjkyKSxsaXN0U2VsZWN0aW9uOmEoImxpc3Qtc2VsZWN0aW9uIiw2MDI5Myksc2VsZWN0aW9uOmEoInNlbGVjdGlvbiIsNjAyOTMpLGxpc3RUcmVlOmEoImxpc3QtdHJlZSIsNjAyOTQpLGRlYnVnQnJlYWtwb2ludEZ1bmN0aW9uVW52ZXJpZmllZDphKCJkZWJ1Zy1icmVha3BvaW50LWZ1bmN0aW9uLXVudmVyaWZpZWQiLDYwMjk1KSxkZWJ1Z0JyZWFrcG9pbnRGdW5jdGlvbjphKCJkZWJ1Zy1icmVha3BvaW50LWZ1bmN0aW9uIiw2MDI5NiksZGVidWdCcmVha3BvaW50RnVuY3Rpb25EaXNhYmxlZDphKCJkZWJ1Zy1icmVha3BvaW50LWZ1bmN0aW9uLWRpc2FibGVkIiw2MDI5NiksZGVidWdTdGFja2ZyYW1lQWN0aXZlOmEoImRlYnVnLXN0YWNrZnJhbWUtYWN0aXZlIiw2MDI5NyksY2lyY2xlU21hbGxGaWxsZWQ6YSgiY2lyY2xlLXNtYWxsLWZpbGxlZCIsNjAyOTgpLGRlYnVnU3RhY2tmcmFtZURvdDphKCJkZWJ1Zy1zdGFja2ZyYW1lLWRvdCIsNjAyOTgpLHRlcm1pbmFsRGVjb3JhdGlvbk1hcms6YSgidGVybWluYWwtZGVjb3JhdGlvbi1tYXJrIiw2MDI5OCksZGVidWdTdGFja2ZyYW1lOmEoImRlYnVnLXN0YWNrZnJhbWUiLDYwMjk5KSxkZWJ1Z1N0YWNrZnJhbWVGb2N1c2VkOmEoImRlYnVnLXN0YWNrZnJhbWUtZm9jdXNlZCIsNjAyOTkpLGRlYnVnQnJlYWtwb2ludFVuc3VwcG9ydGVkOmEoImRlYnVnLWJyZWFrcG9pbnQtdW5zdXBwb3J0ZWQiLDYwMzAwKSxzeW1ib2xTdHJpbmc6YSgic3ltYm9sLXN0cmluZyIsNjAzMDEpLGRlYnVnUmV2ZXJzZUNvbnRpbnVlOmEoImRlYnVnLXJldmVyc2UtY29udGludWUiLDYwMzAyKSxkZWJ1Z1N0ZXBCYWNrOmEoImRlYnVnLXN0ZXAtYmFjayIsNjAzMDMpLGRlYnVnUmVzdGFydEZyYW1lOmEoImRlYnVnLXJlc3RhcnQtZnJhbWUiLDYwMzA0KSxkZWJ1Z0FsdDphKCJkZWJ1Zy1hbHQiLDYwMzA1KSxjYWxsSW5jb21pbmc6YSgiY2FsbC1pbmNvbWluZyIsNjAzMDYpLGNhbGxPdXRnb2luZzphKCJjYWxsLW91dGdvaW5nIiw2MDMwNyksbWVudTphKCJtZW51Iiw2MDMwOCksZXhwYW5kQWxsOmEoImV4cGFuZC1hbGwiLDYwMzA5KSxmZWVkYmFjazphKCJmZWVkYmFjayIsNjAzMTApLGdpdFB1bGxSZXF1ZXN0UmV2aWV3ZXI6YSgiZ2l0LXB1bGwtcmVxdWVzdC1yZXZpZXdlciIsNjAzMTApLGdyb3VwQnlSZWZUeXBlOmEoImdyb3VwLWJ5LXJlZi10eXBlIiw2MDMxMSksdW5ncm91cEJ5UmVmVHlwZTphKCJ1bmdyb3VwLWJ5LXJlZi10eXBlIiw2MDMxMiksYWNjb3VudDphKCJhY2NvdW50Iiw2MDMxMyksZ2l0UHVsbFJlcXVlc3RBc3NpZ25lZTphKCJnaXQtcHVsbC1yZXF1ZXN0LWFzc2lnbmVlIiw2MDMxMyksYmVsbERvdDphKCJiZWxsLWRvdCIsNjAzMTQpLGRlYnVnQ29uc29sZTphKCJkZWJ1Zy1jb25zb2xlIiw2MDMxNSksbGlicmFyeTphKCJsaWJyYXJ5Iiw2MDMxNiksb3V0cHV0OmEoIm91dHB1dCIsNjAzMTcpLHJ1bkFsbDphKCJydW4tYWxsIiw2MDMxOCksc3luY0lnbm9yZWQ6YSgic3luYy1pZ25vcmVkIiw2MDMxOSkscGlubmVkOmEoInBpbm5lZCIsNjAzMjApLGdpdGh1YkludmVydGVkOmEoImdpdGh1Yi1pbnZlcnRlZCIsNjAzMjEpLHNlcnZlclByb2Nlc3M6YSgic2VydmVyLXByb2Nlc3MiLDYwMzIyKSxzZXJ2ZXJFbnZpcm9ubWVudDphKCJzZXJ2ZXItZW52aXJvbm1lbnQiLDYwMzIzKSxwYXNzOmEoInBhc3MiLDYwMzI0KSxpc3N1ZUNsb3NlZDphKCJpc3N1ZS1jbG9zZWQiLDYwMzI0KSxzdG9wQ2lyY2xlOmEoInN0b3AtY2lyY2xlIiw2MDMyNSkscGxheUNpcmNsZTphKCJwbGF5LWNpcmNsZSIsNjAzMjYpLHJlY29yZDphKCJyZWNvcmQiLDYwMzI3KSxkZWJ1Z0FsdFNtYWxsOmEoImRlYnVnLWFsdC1zbWFsbCIsNjAzMjgpLHZtQ29ubmVjdDphKCJ2bS1jb25uZWN0Iiw2MDMyOSksY2xvdWQ6YSgiY2xvdWQiLDYwMzMwKSxtZXJnZTphKCJtZXJnZSIsNjAzMzEpLGV4cG9ydDphKCJleHBvcnQiLDYwMzMyKSxncmFwaExlZnQ6YSgiZ3JhcGgtbGVmdCIsNjAzMzMpLG1hZ25ldDphKCJtYWduZXQiLDYwMzM0KSxub3RlYm9vazphKCJub3RlYm9vayIsNjAzMzUpLHJlZG86YSgicmVkbyIsNjAzMzYpLGNoZWNrQWxsOmEoImNoZWNrLWFsbCIsNjAzMzcpLHBpbm5lZERpcnR5OmEoInBpbm5lZC1kaXJ0eSIsNjAzMzgpLHBhc3NGaWxsZWQ6YSgicGFzcy1maWxsZWQiLDYwMzM5KSxjaXJjbGVMYXJnZUZpbGxlZDphKCJjaXJjbGUtbGFyZ2UtZmlsbGVkIiw2MDM0MCksY2lyY2xlTGFyZ2U6YSgiY2lyY2xlLWxhcmdlIiw2MDM0MSksY2lyY2xlTGFyZ2VPdXRsaW5lOmEoImNpcmNsZS1sYXJnZS1vdXRsaW5lIiw2MDM0MSksY29tYmluZTphKCJjb21iaW5lIiw2MDM0MiksZ2F0aGVyOmEoImdhdGhlciIsNjAzNDIpLHRhYmxlOmEoInRhYmxlIiw2MDM0MyksdmFyaWFibGVHcm91cDphKCJ2YXJpYWJsZS1ncm91cCIsNjAzNDQpLHR5cGVIaWVyYXJjaHk6YSgidHlwZS1oaWVyYXJjaHkiLDYwMzQ1KSx0eXBlSGllcmFyY2h5U3ViOmEoInR5cGUtaGllcmFyY2h5LXN1YiIsNjAzNDYpLHR5cGVIaWVyYXJjaHlTdXBlcjphKCJ0eXBlLWhpZXJhcmNoeS1zdXBlciIsNjAzNDcpLGdpdFB1bGxSZXF1ZXN0Q3JlYXRlOmEoImdpdC1wdWxsLXJlcXVlc3QtY3JlYXRlIiw2MDM0OCkscnVuQWJvdmU6YSgicnVuLWFib3ZlIiw2MDM0OSkscnVuQmVsb3c6YSgicnVuLWJlbG93Iiw2MDM1MCksbm90ZWJvb2tUZW1wbGF0ZTphKCJub3RlYm9vay10ZW1wbGF0ZSIsNjAzNTEpLGRlYnVnUmVydW46YSgiZGVidWctcmVydW4iLDYwMzUyKSx3b3Jrc3BhY2VUcnVzdGVkOmEoIndvcmtzcGFjZS10cnVzdGVkIiw2MDM1Myksd29ya3NwYWNlVW50cnVzdGVkOmEoIndvcmtzcGFjZS11bnRydXN0ZWQiLDYwMzU0KSx3b3Jrc3BhY2VVbmtub3duOmEoIndvcmtzcGFjZS11bmtub3duIiw2MDM1NSksdGVybWluYWxDbWQ6YSgidGVybWluYWwtY21kIiw2MDM1NiksdGVybWluYWxEZWJpYW46YSgidGVybWluYWwtZGViaWFuIiw2MDM1NyksdGVybWluYWxMaW51eDphKCJ0ZXJtaW5hbC1saW51eCIsNjAzNTgpLHRlcm1pbmFsUG93ZXJzaGVsbDphKCJ0ZXJtaW5hbC1wb3dlcnNoZWxsIiw2MDM1OSksdGVybWluYWxUbXV4OmEoInRlcm1pbmFsLXRtdXgiLDYwMzYwKSx0ZXJtaW5hbFVidW50dTphKCJ0ZXJtaW5hbC11YnVudHUiLDYwMzYxKSx0ZXJtaW5hbEJhc2g6YSgidGVybWluYWwtYmFzaCIsNjAzNjIpLGFycm93U3dhcDphKCJhcnJvdy1zd2FwIiw2MDM2MyksY29weTphKCJjb3B5Iiw2MDM2NCkscGVyc29uQWRkOmEoInBlcnNvbi1hZGQiLDYwMzY1KSxmaWx0ZXJGaWxsZWQ6YSgiZmlsdGVyLWZpbGxlZCIsNjAzNjYpLHdhbmQ6YSgid2FuZCIsNjAzNjcpLGRlYnVnTGluZUJ5TGluZTphKCJkZWJ1Zy1saW5lLWJ5LWxpbmUiLDYwMzY4KSxpbnNwZWN0OmEoImluc3BlY3QiLDYwMzY5KSxsYXllcnM6YSgibGF5ZXJzIiw2MDM3MCksbGF5ZXJzRG90OmEoImxheWVycy1kb3QiLDYwMzcxKSxsYXllcnNBY3RpdmU6YSgibGF5ZXJzLWFjdGl2ZSIsNjAzNzIpLGNvbXBhc3M6YSgiY29tcGFzcyIsNjAzNzMpLGNvbXBhc3NEb3Q6YSgiY29tcGFzcy1kb3QiLDYwMzc0KSxjb21wYXNzQWN0aXZlOmEoImNvbXBhc3MtYWN0aXZlIiw2MDM3NSksYXp1cmU6YSgiYXp1cmUiLDYwMzc2KSxpc3N1ZURyYWZ0OmEoImlzc3VlLWRyYWZ0Iiw2MDM3NyksZ2l0UHVsbFJlcXVlc3RDbG9zZWQ6YSgiZ2l0LXB1bGwtcmVxdWVzdC1jbG9zZWQiLDYwMzc4KSxnaXRQdWxsUmVxdWVzdERyYWZ0OmEoImdpdC1wdWxsLXJlcXVlc3QtZHJhZnQiLDYwMzc5KSxkZWJ1Z0FsbDphKCJkZWJ1Zy1hbGwiLDYwMzgwKSxkZWJ1Z0NvdmVyYWdlOmEoImRlYnVnLWNvdmVyYWdlIiw2MDM4MSkscnVuRXJyb3JzOmEoInJ1bi1lcnJvcnMiLDYwMzgyKSxmb2xkZXJMaWJyYXJ5OmEoImZvbGRlci1saWJyYXJ5Iiw2MDM4MyksZGVidWdDb250aW51ZVNtYWxsOmEoImRlYnVnLWNvbnRpbnVlLXNtYWxsIiw2MDM4NCksYmVha2VyU3RvcDphKCJiZWFrZXItc3RvcCIsNjAzODUpLGdyYXBoTGluZTphKCJncmFwaC1saW5lIiw2MDM4NiksZ3JhcGhTY2F0dGVyOmEoImdyYXBoLXNjYXR0ZXIiLDYwMzg3KSxwaWVDaGFydDphKCJwaWUtY2hhcnQiLDYwMzg4KSxicmFja2V0OmEoImJyYWNrZXQiLDYwMTc1KSxicmFja2V0RG90OmEoImJyYWNrZXQtZG90Iiw2MDM4OSksYnJhY2tldEVycm9yOmEoImJyYWNrZXQtZXJyb3IiLDYwMzkwKSxsb2NrU21hbGw6YSgibG9jay1zbWFsbCIsNjAzOTEpLGF6dXJlRGV2b3BzOmEoImF6dXJlLWRldm9wcyIsNjAzOTIpLHZlcmlmaWVkRmlsbGVkOmEoInZlcmlmaWVkLWZpbGxlZCIsNjAzOTMpLG5ld2xpbmU6YSgibmV3bGluZSIsNjAzOTQpLGxheW91dDphKCJsYXlvdXQiLDYwMzk1KSxsYXlvdXRBY3Rpdml0eWJhckxlZnQ6YSgibGF5b3V0LWFjdGl2aXR5YmFyLWxlZnQiLDYwMzk2KSxsYXlvdXRBY3Rpdml0eWJhclJpZ2h0OmEoImxheW91dC1hY3Rpdml0eWJhci1yaWdodCIsNjAzOTcpLGxheW91dFBhbmVsTGVmdDphKCJsYXlvdXQtcGFuZWwtbGVmdCIsNjAzOTgpLGxheW91dFBhbmVsQ2VudGVyOmEoImxheW91dC1wYW5lbC1jZW50ZXIiLDYwMzk5KSxsYXlvdXRQYW5lbEp1c3RpZnk6YSgibGF5b3V0LXBhbmVsLWp1c3RpZnkiLDYwNDAwKSxsYXlvdXRQYW5lbFJpZ2h0OmEoImxheW91dC1wYW5lbC1yaWdodCIsNjA0MDEpLGxheW91dFBhbmVsOmEoImxheW91dC1wYW5lbCIsNjA0MDIpLGxheW91dFNpZGViYXJMZWZ0OmEoImxheW91dC1zaWRlYmFyLWxlZnQiLDYwNDAzKSxsYXlvdXRTaWRlYmFyUmlnaHQ6YSgibGF5b3V0LXNpZGViYXItcmlnaHQiLDYwNDA0KSxsYXlvdXRTdGF0dXNiYXI6YSgibGF5b3V0LXN0YXR1c2JhciIsNjA0MDUpLGxheW91dE1lbnViYXI6YSgibGF5b3V0LW1lbnViYXIiLDYwNDA2KSxsYXlvdXRDZW50ZXJlZDphKCJsYXlvdXQtY2VudGVyZWQiLDYwNDA3KSx0YXJnZXQ6YSgidGFyZ2V0Iiw2MDQwOCksaW5kZW50OmEoImluZGVudCIsNjA0MDkpLHJlY29yZFNtYWxsOmEoInJlY29yZC1zbWFsbCIsNjA0MTApLGVycm9yU21hbGw6YSgiZXJyb3Itc21hbGwiLDYwNDExKSx0ZXJtaW5hbERlY29yYXRpb25FcnJvcjphKCJ0ZXJtaW5hbC1kZWNvcmF0aW9uLWVycm9yIiw2MDQxMSksYXJyb3dDaXJjbGVEb3duOmEoImFycm93LWNpcmNsZS1kb3duIiw2MDQxMiksYXJyb3dDaXJjbGVMZWZ0OmEoImFycm93LWNpcmNsZS1sZWZ0Iiw2MDQxMyksYXJyb3dDaXJjbGVSaWdodDphKCJhcnJvdy1jaXJjbGUtcmlnaHQiLDYwNDE0KSxhcnJvd0NpcmNsZVVwOmEoImFycm93LWNpcmNsZS11cCIsNjA0MTUpLGxheW91dFNpZGViYXJSaWdodE9mZjphKCJsYXlvdXQtc2lkZWJhci1yaWdodC1vZmYiLDYwNDE2KSxsYXlvdXRQYW5lbE9mZjphKCJsYXlvdXQtcGFuZWwtb2ZmIiw2MDQxNyksbGF5b3V0U2lkZWJhckxlZnRPZmY6YSgibGF5b3V0LXNpZGViYXItbGVmdC1vZmYiLDYwNDE4KSxibGFuazphKCJibGFuayIsNjA0MTkpLGhlYXJ0RmlsbGVkOmEoImhlYXJ0LWZpbGxlZCIsNjA0MjApLG1hcDphKCJtYXAiLDYwNDIxKSxtYXBIb3Jpem9udGFsOmEoIm1hcC1ob3Jpem9udGFsIiw2MDQyMSksZm9sZEhvcml6b250YWw6YSgiZm9sZC1ob3Jpem9udGFsIiw2MDQyMSksbWFwRmlsbGVkOmEoIm1hcC1maWxsZWQiLDYwNDIyKSxtYXBIb3Jpem9udGFsRmlsbGVkOmEoIm1hcC1ob3Jpem9udGFsLWZpbGxlZCIsNjA0MjIpLGZvbGRIb3Jpem9udGFsRmlsbGVkOmEoImZvbGQtaG9yaXpvbnRhbC1maWxsZWQiLDYwNDIyKSxjaXJjbGVTbWFsbDphKCJjaXJjbGUtc21hbGwiLDYwNDIzKSxiZWxsU2xhc2g6YSgiYmVsbC1zbGFzaCIsNjA0MjQpLGJlbGxTbGFzaERvdDphKCJiZWxsLXNsYXNoLWRvdCIsNjA0MjUpLGNvbW1lbnRVbnJlc29sdmVkOmEoImNvbW1lbnQtdW5yZXNvbHZlZCIsNjA0MjYpLGdpdFB1bGxSZXF1ZXN0R29Ub0NoYW5nZXM6YSgiZ2l0LXB1bGwtcmVxdWVzdC1nby10by1jaGFuZ2VzIiw2MDQyNyksZ2l0UHVsbFJlcXVlc3ROZXdDaGFuZ2VzOmEoImdpdC1wdWxsLXJlcXVlc3QtbmV3LWNoYW5nZXMiLDYwNDI4KSxzZWFyY2hGdXp6eTphKCJzZWFyY2gtZnV6enkiLDYwNDI5KSxjb21tZW50RHJhZnQ6YSgiY29tbWVudC1kcmFmdCIsNjA0MzApLHNlbmQ6YSgic2VuZCIsNjA0MzEpLHNwYXJrbGU6YSgic3BhcmtsZSIsNjA0MzIpLGluc2VydDphKCJpbnNlcnQiLDYwNDMzKSxtaWM6YSgibWljIiw2MDQzNCksdGh1bWJzZG93bkZpbGxlZDphKCJ0aHVtYnNkb3duLWZpbGxlZCIsNjA0MzUpLHRodW1ic3VwRmlsbGVkOmEoInRodW1ic3VwLWZpbGxlZCIsNjA0MzYpLGNvZmZlZTphKCJjb2ZmZWUiLDYwNDM3KSxzbmFrZTphKCJzbmFrZSIsNjA0MzgpLGdhbWU6YSgiZ2FtZSIsNjA0MzkpLHZyOmEoInZyIiw2MDQ0MCksY2hpcDphKCJjaGlwIiw2MDQ0MSkscGlhbm86YSgicGlhbm8iLDYwNDQyKSxtdXNpYzphKCJtdXNpYyIsNjA0NDMpLG1pY0ZpbGxlZDphKCJtaWMtZmlsbGVkIiw2MDQ0NCkscmVwb0ZldGNoOmEoInJlcG8tZmV0Y2giLDYwNDQ1KSxjb3BpbG90OmEoImNvcGlsb3QiLDYwNDQ2KSxsaWdodGJ1bGJTcGFya2xlOmEoImxpZ2h0YnVsYi1zcGFya2xlIiw2MDQ0Nykscm9ib3Q6YSgicm9ib3QiLDYwNDQ4KSxzcGFya2xlRmlsbGVkOmEoInNwYXJrbGUtZmlsbGVkIiw2MDQ0OSksZGlmZlNpbmdsZTphKCJkaWZmLXNpbmdsZSIsNjA0NTApLGRpZmZNdWx0aXBsZTphKCJkaWZmLW11bHRpcGxlIiw2MDQ1MSksc3Vycm91bmRXaXRoOmEoInN1cnJvdW5kLXdpdGgiLDYwNDUyKSxzaGFyZTphKCJzaGFyZSIsNjA0NTMpLGdpdFN0YXNoOmEoImdpdC1zdGFzaCIsNjA0NTQpLGdpdFN0YXNoQXBwbHk6YSgiZ2l0LXN0YXNoLWFwcGx5Iiw2MDQ1NSksZ2l0U3Rhc2hQb3A6YSgiZ2l0LXN0YXNoLXBvcCIsNjA0NTYpLHZzY29kZTphKCJ2c2NvZGUiLDYwNDU3KSx2c2NvZGVJbnNpZGVyczphKCJ2c2NvZGUtaW5zaWRlcnMiLDYwNDU4KSxjb2RlT3NzOmEoImNvZGUtb3NzIiw2MDQ1OSkscnVuQ292ZXJhZ2U6YSgicnVuLWNvdmVyYWdlIiw2MDQ2MCkscnVuQWxsQ292ZXJhZ2U6YSgicnVuLWFsbC1jb3ZlcmFnZSIsNjA0NjEpLGNvdmVyYWdlOmEoImNvdmVyYWdlIiw2MDQ2MiksZ2l0aHViUHJvamVjdDphKCJnaXRodWItcHJvamVjdCIsNjA0NjMpLG1hcFZlcnRpY2FsOmEoIm1hcC12ZXJ0aWNhbCIsNjA0NjQpLGZvbGRWZXJ0aWNhbDphKCJmb2xkLXZlcnRpY2FsIiw2MDQ2NCksbWFwVmVydGljYWxGaWxsZWQ6YSgibWFwLXZlcnRpY2FsLWZpbGxlZCIsNjA0NjUpLGZvbGRWZXJ0aWNhbEZpbGxlZDphKCJmb2xkLXZlcnRpY2FsLWZpbGxlZCIsNjA0NjUpLGdvVG9TZWFyY2g6YSgiZ28tdG8tc2VhcmNoIiw2MDQ2NikscGVyY2VudGFnZTphKCJwZXJjZW50YWdlIiw2MDQ2Nyksc29ydFBlcmNlbnRhZ2U6YSgic29ydC1wZXJjZW50YWdlIiw2MDQ2NyksYXR0YWNoOmEoImF0dGFjaCIsNjA0NjgpfSxNaT17ZGlhbG9nRXJyb3I6YSgiZGlhbG9nLWVycm9yIiwiZXJyb3IiKSxkaWFsb2dXYXJuaW5nOmEoImRpYWxvZy13YXJuaW5nIiwid2FybmluZyIpLGRpYWxvZ0luZm86YSgiZGlhbG9nLWluZm8iLCJpbmZvIiksZGlhbG9nQ2xvc2U6YSgiZGlhbG9nLWNsb3NlIiwiY2xvc2UiKSx0cmVlSXRlbUV4cGFuZGVkOmEoInRyZWUtaXRlbS1leHBhbmRlZCIsImNoZXZyb24tZG93biIpLHRyZWVGaWx0ZXJPblR5cGVPbjphKCJ0cmVlLWZpbHRlci1vbi10eXBlLW9uIiwibGlzdC1maWx0ZXIiKSx0cmVlRmlsdGVyT25UeXBlT2ZmOmEoInRyZWUtZmlsdGVyLW9uLXR5cGUtb2ZmIiwibGlzdC1zZWxlY3Rpb24iKSx0cmVlRmlsdGVyQ2xlYXI6YSgidHJlZS1maWx0ZXItY2xlYXIiLCJjbG9zZSIpLHRyZWVJdGVtTG9hZGluZzphKCJ0cmVlLWl0ZW0tbG9hZGluZyIsImxvYWRpbmciKSxtZW51U2VsZWN0aW9uOmEoIm1lbnUtc2VsZWN0aW9uIiwiY2hlY2siKSxtZW51U3VibWVudTphKCJtZW51LXN1Ym1lbnUiLCJjaGV2cm9uLXJpZ2h0IiksbWVudUJhck1vcmU6YSgibWVudWJhci1tb3JlIiwibW9yZSIpLHNjcm9sbGJhckJ1dHRvbkxlZnQ6YSgic2Nyb2xsYmFyLWJ1dHRvbi1sZWZ0IiwidHJpYW5nbGUtbGVmdCIpLHNjcm9sbGJhckJ1dHRvblJpZ2h0OmEoInNjcm9sbGJhci1idXR0b24tcmlnaHQiLCJ0cmlhbmdsZS1yaWdodCIpLHNjcm9sbGJhckJ1dHRvblVwOmEoInNjcm9sbGJhci1idXR0b24tdXAiLCJ0cmlhbmdsZS11cCIpLHNjcm9sbGJhckJ1dHRvbkRvd246YSgic2Nyb2xsYmFyLWJ1dHRvbi1kb3duIiwidHJpYW5nbGUtZG93biIpLHRvb2xCYXJNb3JlOmEoInRvb2xiYXItbW9yZSIsIm1vcmUiKSxxdWlja0lucHV0QmFjazphKCJxdWljay1pbnB1dC1iYWNrIiwiYXJyb3ctbGVmdCIpLGRyb3BEb3duQnV0dG9uOmEoImRyb3AtZG93bi1idXR0b24iLDYwMDg0KSxzeW1ib2xDdXN0b21Db2xvcjphKCJzeW1ib2wtY3VzdG9tY29sb3IiLDYwMjUyKSxleHBvcnRJY29uOmEoImV4cG9ydCIsNjAzMzIpLHdvcmtzcGFjZVVuc3BlY2lmaWVkOmEoIndvcmtzcGFjZS11bnNwZWNpZmllZCIsNjAzNTUpLG5ld0xpbmU6YSgibmV3bGluZSIsNjAzOTQpLHRodW1ic0Rvd25GaWxsZWQ6YSgidGh1bWJzZG93bi1maWxsZWQiLDYwNDM1KSx0aHVtYnNVcEZpbGxlZDphKCJ0aHVtYnN1cC1maWxsZWQiLDYwNDM2KSxnaXRGZXRjaDphKCJnaXQtZmV0Y2giLDYwNDQ1KSxsaWdodGJ1bGJTcGFya2xlQXV0b2ZpeDphKCJsaWdodGJ1bGItc3BhcmtsZS1hdXRvZml4Iiw2MDQ0NyksZGVidWdCcmVha3BvaW50UGVuZGluZzphKCJkZWJ1Zy1icmVha3BvaW50LXBlbmRpbmciLDYwMzc3KX0sTT17Li4uRWksLi4uTWl9O2NsYXNzIGtpe2NvbnN0cnVjdG9yKCl7dGhpcy5fdG9rZW5pemF0aW9uU3VwcG9ydHM9bmV3IE1hcCx0aGlzLl9mYWN0b3JpZXM9bmV3IE1hcCx0aGlzLl9vbkRpZENoYW5nZT1uZXcgc2UsdGhpcy5vbkRpZENoYW5nZT10aGlzLl9vbkRpZENoYW5nZS5ldmVudCx0aGlzLl9jb2xvck1hcD1udWxsfWhhbmRsZUNoYW5nZSh0KXt0aGlzLl9vbkRpZENoYW5nZS5maXJlKHtjaGFuZ2VkTGFuZ3VhZ2VzOnQsY2hhbmdlZENvbG9yTWFwOiExfSl9cmVnaXN0ZXIodCxuKXtyZXR1cm4gdGhpcy5fdG9rZW5pemF0aW9uU3VwcG9ydHMuc2V0KHQsbiksdGhpcy5oYW5kbGVDaGFuZ2UoW3RdKSxldCgoKT0+e3RoaXMuX3Rva2VuaXphdGlvblN1cHBvcnRzLmdldCh0KT09PW4mJih0aGlzLl90b2tlbml6YXRpb25TdXBwb3J0cy5kZWxldGUodCksdGhpcy5oYW5kbGVDaGFuZ2UoW3RdKSl9KX1nZXQodCl7cmV0dXJuIHRoaXMuX3Rva2VuaXphdGlvblN1cHBvcnRzLmdldCh0KXx8bnVsbH1yZWdpc3RlckZhY3RvcnkodCxuKXt2YXIgcjsocj10aGlzLl9mYWN0b3JpZXMuZ2V0KHQpKT09PW51bGx8fHI9PT12b2lkIDB8fHIuZGlzcG9zZSgpO2NvbnN0IHM9bmV3IEZpKHRoaXMsdCxuKTtyZXR1cm4gdGhpcy5fZmFjdG9yaWVzLnNldCh0LHMpLGV0KCgpPT57Y29uc3QgaT10aGlzLl9mYWN0b3JpZXMuZ2V0KHQpOyFpfHxpIT09c3x8KHRoaXMuX2ZhY3Rvcmllcy5kZWxldGUodCksaS5kaXNwb3NlKCkpfSl9YXN5bmMgZ2V0T3JDcmVhdGUodCl7Y29uc3Qgbj10aGlzLmdldCh0KTtpZihuKXJldHVybiBuO2NvbnN0IHI9dGhpcy5fZmFjdG9yaWVzLmdldCh0KTtyZXR1cm4hcnx8ci5pc1Jlc29sdmVkP251bGw6KGF3YWl0IHIucmVzb2x2ZSgpLHRoaXMuZ2V0KHQpKX1pc1Jlc29sdmVkKHQpe2lmKHRoaXMuZ2V0KHQpKXJldHVybiEwO2NvbnN0IHI9dGhpcy5fZmFjdG9yaWVzLmdldCh0KTtyZXR1cm4hISghcnx8ci5pc1Jlc29sdmVkKX1zZXRDb2xvck1hcCh0KXt0aGlzLl9jb2xvck1hcD10LHRoaXMuX29uRGlkQ2hhbmdlLmZpcmUoe2NoYW5nZWRMYW5ndWFnZXM6QXJyYXkuZnJvbSh0aGlzLl90b2tlbml6YXRpb25TdXBwb3J0cy5rZXlzKCkpLGNoYW5nZWRDb2xvck1hcDohMH0pfWdldENvbG9yTWFwKCl7cmV0dXJuIHRoaXMuX2NvbG9yTWFwfWdldERlZmF1bHRCYWNrZ3JvdW5kKCl7cmV0dXJuIHRoaXMuX2NvbG9yTWFwJiZ0aGlzLl9jb2xvck1hcC5sZW5ndGg+Mj90aGlzLl9jb2xvck1hcFsyXTpudWxsfX1jbGFzcyBGaSBleHRlbmRzIFdle2dldCBpc1Jlc29sdmVkKCl7cmV0dXJuIHRoaXMuX2lzUmVzb2x2ZWR9Y29uc3RydWN0b3IodCxuLHIpe3N1cGVyKCksdGhpcy5fcmVnaXN0cnk9dCx0aGlzLl9sYW5ndWFnZUlkPW4sdGhpcy5fZmFjdG9yeT1yLHRoaXMuX2lzRGlzcG9zZWQ9ITEsdGhpcy5fcmVzb2x2ZVByb21pc2U9bnVsbCx0aGlzLl9pc1Jlc29sdmVkPSExfWRpc3Bvc2UoKXt0aGlzLl9pc0Rpc3Bvc2VkPSEwLHN1cGVyLmRpc3Bvc2UoKX1hc3luYyByZXNvbHZlKCl7cmV0dXJuIHRoaXMuX3Jlc29sdmVQcm9taXNlfHwodGhpcy5fcmVzb2x2ZVByb21pc2U9dGhpcy5fY3JlYXRlKCkpLHRoaXMuX3Jlc29sdmVQcm9taXNlfWFzeW5jIF9jcmVhdGUoKXtjb25zdCB0PWF3YWl0IHRoaXMuX2ZhY3RvcnkudG9rZW5pemF0aW9uU3VwcG9ydDt0aGlzLl9pc1Jlc29sdmVkPSEwLHQmJiF0aGlzLl9pc0Rpc3Bvc2VkJiZ0aGlzLl9yZWdpc3Rlcih0aGlzLl9yZWdpc3RyeS5yZWdpc3Rlcih0aGlzLl9sYW5ndWFnZUlkLHQpKX19Y2xhc3MgUGl7Y29uc3RydWN0b3IodCxuLHIpe3RoaXMub2Zmc2V0PXQsdGhpcy50eXBlPW4sdGhpcy5sYW5ndWFnZT1yLHRoaXMuX3Rva2VuQnJhbmQ9dm9pZCAwfXRvU3RyaW5nKCl7cmV0dXJuIigiK3RoaXMub2Zmc2V0KyIsICIrdGhpcy50eXBlKyIpIn19dmFyIEFuOyhmdW5jdGlvbihlKXtlW2UuSW5jcmVhc2U9MF09IkluY3JlYXNlIixlW2UuRGVjcmVhc2U9MV09IkRlY3JlYXNlIn0pKEFufHwoQW49e30pKTt2YXIgUm47KGZ1bmN0aW9uKGUpe2NvbnN0IHQ9bmV3IE1hcDt0LnNldCgwLE0uc3ltYm9sTWV0aG9kKSx0LnNldCgxLE0uc3ltYm9sRnVuY3Rpb24pLHQuc2V0KDIsTS5zeW1ib2xDb25zdHJ1Y3RvciksdC5zZXQoMyxNLnN5bWJvbEZpZWxkKSx0LnNldCg0LE0uc3ltYm9sVmFyaWFibGUpLHQuc2V0KDUsTS5zeW1ib2xDbGFzcyksdC5zZXQoNixNLnN5bWJvbFN0cnVjdCksdC5zZXQoNyxNLnN5bWJvbEludGVyZmFjZSksdC5zZXQoOCxNLnN5bWJvbE1vZHVsZSksdC5zZXQoOSxNLnN5bWJvbFByb3BlcnR5KSx0LnNldCgxMCxNLnN5bWJvbEV2ZW50KSx0LnNldCgxMSxNLnN5bWJvbE9wZXJhdG9yKSx0LnNldCgxMixNLnN5bWJvbFVuaXQpLHQuc2V0KDEzLE0uc3ltYm9sVmFsdWUpLHQuc2V0KDE1LE0uc3ltYm9sRW51bSksdC5zZXQoMTQsTS5zeW1ib2xDb25zdGFudCksdC5zZXQoMTUsTS5zeW1ib2xFbnVtKSx0LnNldCgxNixNLnN5bWJvbEVudW1NZW1iZXIpLHQuc2V0KDE3LE0uc3ltYm9sS2V5d29yZCksdC5zZXQoMjcsTS5zeW1ib2xTbmlwcGV0KSx0LnNldCgxOCxNLnN5bWJvbFRleHQpLHQuc2V0KDE5LE0uc3ltYm9sQ29sb3IpLHQuc2V0KDIwLE0uc3ltYm9sRmlsZSksdC5zZXQoMjEsTS5zeW1ib2xSZWZlcmVuY2UpLHQuc2V0KDIyLE0uc3ltYm9sQ3VzdG9tQ29sb3IpLHQuc2V0KDIzLE0uc3ltYm9sRm9sZGVyKSx0LnNldCgyNCxNLnN5bWJvbFR5cGVQYXJhbWV0ZXIpLHQuc2V0KDI1LE0uYWNjb3VudCksdC5zZXQoMjYsTS5pc3N1ZXMpO2Z1bmN0aW9uIG4oaSl7bGV0IG89dC5nZXQoaSk7cmV0dXJuIG98fChjb25zb2xlLmluZm8oIk5vIGNvZGljb24gZm91bmQgZm9yIENvbXBsZXRpb25JdGVtS2luZCAiK2kpLG89TS5zeW1ib2xQcm9wZXJ0eSksb31lLnRvSWNvbj1uO2NvbnN0IHI9bmV3IE1hcDtyLnNldCgibWV0aG9kIiwwKSxyLnNldCgiZnVuY3Rpb24iLDEpLHIuc2V0KCJjb25zdHJ1Y3RvciIsMiksci5zZXQoImZpZWxkIiwzKSxyLnNldCgidmFyaWFibGUiLDQpLHIuc2V0KCJjbGFzcyIsNSksci5zZXQoInN0cnVjdCIsNiksci5zZXQoImludGVyZmFjZSIsNyksci5zZXQoIm1vZHVsZSIsOCksci5zZXQoInByb3BlcnR5Iiw5KSxyLnNldCgiZXZlbnQiLDEwKSxyLnNldCgib3BlcmF0b3IiLDExKSxyLnNldCgidW5pdCIsMTIpLHIuc2V0KCJ2YWx1ZSIsMTMpLHIuc2V0KCJjb25zdGFudCIsMTQpLHIuc2V0KCJlbnVtIiwxNSksci5zZXQoImVudW0tbWVtYmVyIiwxNiksci5zZXQoImVudW1NZW1iZXIiLDE2KSxyLnNldCgia2V5d29yZCIsMTcpLHIuc2V0KCJzbmlwcGV0IiwyNyksci5zZXQoInRleHQiLDE4KSxyLnNldCgiY29sb3IiLDE5KSxyLnNldCgiZmlsZSIsMjApLHIuc2V0KCJyZWZlcmVuY2UiLDIxKSxyLnNldCgiY3VzdG9tY29sb3IiLDIyKSxyLnNldCgiZm9sZGVyIiwyMyksci5zZXQoInR5cGUtcGFyYW1ldGVyIiwyNCksci5zZXQoInR5cGVQYXJhbWV0ZXIiLDI0KSxyLnNldCgiYWNjb3VudCIsMjUpLHIuc2V0KCJpc3N1ZSIsMjYpO2Z1bmN0aW9uIHMoaSxvKXtsZXQgbD1yLmdldChpKTtyZXR1cm4gdHlwZW9mIGw+InUiJiYhbyYmKGw9OSksbH1lLmZyb21TdHJpbmc9c30pKFJufHwoUm49e30pKTt2YXIgeW47KGZ1bmN0aW9uKGUpe2VbZS5BdXRvbWF0aWM9MF09IkF1dG9tYXRpYyIsZVtlLkV4cGxpY2l0PTFdPSJFeHBsaWNpdCJ9KSh5bnx8KHluPXt9KSk7dmFyIEVuOyhmdW5jdGlvbihlKXtlW2UuQXV0b21hdGljPTBdPSJBdXRvbWF0aWMiLGVbZS5QYXN0ZUFzPTFdPSJQYXN0ZUFzIn0pKEVufHwoRW49e30pKTt2YXIgTW47KGZ1bmN0aW9uKGUpe2VbZS5JbnZva2U9MV09Ikludm9rZSIsZVtlLlRyaWdnZXJDaGFyYWN0ZXI9Ml09IlRyaWdnZXJDaGFyYWN0ZXIiLGVbZS5Db250ZW50Q2hhbmdlPTNdPSJDb250ZW50Q2hhbmdlIn0pKE1ufHwoTW49e30pKTt2YXIga247KGZ1bmN0aW9uKGUpe2VbZS5UZXh0PTBdPSJUZXh0IixlW2UuUmVhZD0xXT0iUmVhZCIsZVtlLldyaXRlPTJdPSJXcml0ZSJ9KShrbnx8KGtuPXt9KSksSCgiQXJyYXkiLCJhcnJheSIpLEgoIkJvb2xlYW4iLCJib29sZWFuIiksSCgiQ2xhc3MiLCJjbGFzcyIpLEgoIkNvbnN0YW50IiwiY29uc3RhbnQiKSxIKCJDb25zdHJ1Y3RvciIsImNvbnN0cnVjdG9yIiksSCgiRW51bSIsImVudW1lcmF0aW9uIiksSCgiRW51bU1lbWJlciIsImVudW1lcmF0aW9uIG1lbWJlciIpLEgoIkV2ZW50IiwiZXZlbnQiKSxIKCJGaWVsZCIsImZpZWxkIiksSCgiRmlsZSIsImZpbGUiKSxIKCJGdW5jdGlvbiIsImZ1bmN0aW9uIiksSCgiSW50ZXJmYWNlIiwiaW50ZXJmYWNlIiksSCgiS2V5Iiwia2V5IiksSCgiTWV0aG9kIiwibWV0aG9kIiksSCgiTW9kdWxlIiwibW9kdWxlIiksSCgiTmFtZXNwYWNlIiwibmFtZXNwYWNlIiksSCgiTnVsbCIsIm51bGwiKSxIKCJOdW1iZXIiLCJudW1iZXIiKSxIKCJPYmplY3QiLCJvYmplY3QiKSxIKCJPcGVyYXRvciIsIm9wZXJhdG9yIiksSCgiUGFja2FnZSIsInBhY2thZ2UiKSxIKCJQcm9wZXJ0eSIsInByb3BlcnR5IiksSCgiU3RyaW5nIiwic3RyaW5nIiksSCgiU3RydWN0Iiwic3RydWN0IiksSCgiVHlwZVBhcmFtZXRlciIsInR5cGUgcGFyYW1ldGVyIiksSCgiVmFyaWFibGUiLCJ2YXJpYWJsZSIpO3ZhciBGbjsoZnVuY3Rpb24oZSl7Y29uc3QgdD1uZXcgTWFwO3Quc2V0KDAsTS5zeW1ib2xGaWxlKSx0LnNldCgxLE0uc3ltYm9sTW9kdWxlKSx0LnNldCgyLE0uc3ltYm9sTmFtZXNwYWNlKSx0LnNldCgzLE0uc3ltYm9sUGFja2FnZSksdC5zZXQoNCxNLnN5bWJvbENsYXNzKSx0LnNldCg1LE0uc3ltYm9sTWV0aG9kKSx0LnNldCg2LE0uc3ltYm9sUHJvcGVydHkpLHQuc2V0KDcsTS5zeW1ib2xGaWVsZCksdC5zZXQoOCxNLnN5bWJvbENvbnN0cnVjdG9yKSx0LnNldCg5LE0uc3ltYm9sRW51bSksdC5zZXQoMTAsTS5zeW1ib2xJbnRlcmZhY2UpLHQuc2V0KDExLE0uc3ltYm9sRnVuY3Rpb24pLHQuc2V0KDEyLE0uc3ltYm9sVmFyaWFibGUpLHQuc2V0KDEzLE0uc3ltYm9sQ29uc3RhbnQpLHQuc2V0KDE0LE0uc3ltYm9sU3RyaW5nKSx0LnNldCgxNSxNLnN5bWJvbE51bWJlciksdC5zZXQoMTYsTS5zeW1ib2xCb29sZWFuKSx0LnNldCgxNyxNLnN5bWJvbEFycmF5KSx0LnNldCgxOCxNLnN5bWJvbE9iamVjdCksdC5zZXQoMTksTS5zeW1ib2xLZXkpLHQuc2V0KDIwLE0uc3ltYm9sTnVsbCksdC5zZXQoMjEsTS5zeW1ib2xFbnVtTWVtYmVyKSx0LnNldCgyMixNLnN5bWJvbFN0cnVjdCksdC5zZXQoMjMsTS5zeW1ib2xFdmVudCksdC5zZXQoMjQsTS5zeW1ib2xPcGVyYXRvciksdC5zZXQoMjUsTS5zeW1ib2xUeXBlUGFyYW1ldGVyKTtmdW5jdGlvbiBuKHIpe2xldCBzPXQuZ2V0KHIpO3JldHVybiBzfHwoY29uc29sZS5pbmZvKCJObyBjb2RpY29uIGZvdW5kIGZvciBTeW1ib2xLaW5kICIrcikscz1NLnN5bWJvbFByb3BlcnR5KSxzfWUudG9JY29uPW59KShGbnx8KEZuPXt9KSk7dmFyIFBuOyhmdW5jdGlvbihlKXtlW2UuQUlHZW5lcmF0ZWQ9MV09IkFJR2VuZXJhdGVkIn0pKFBufHwoUG49e30pKTt2YXIgRG47KGZ1bmN0aW9uKGUpe2VbZS5JbnZva2U9MF09Ikludm9rZSIsZVtlLkF1dG9tYXRpYz0xXT0iQXV0b21hdGljIn0pKERufHwoRG49e30pKTt2YXIgVG47KGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQobil7cmV0dXJuIW58fHR5cGVvZiBuIT0ib2JqZWN0Ij8hMTp0eXBlb2Ygbi5pZD09InN0cmluZyImJnR5cGVvZiBuLnRpdGxlPT0ic3RyaW5nIn1lLmlzPXR9KShUbnx8KFRuPXt9KSk7dmFyIFZuOyhmdW5jdGlvbihlKXtlW2UuVHlwZT0xXT0iVHlwZSIsZVtlLlBhcmFtZXRlcj0yXT0iUGFyYW1ldGVyIn0pKFZufHwoVm49e30pKSxuZXcga2k7dmFyIEluOyhmdW5jdGlvbihlKXtlW2UuSW52b2tlPTBdPSJJbnZva2UiLGVbZS5BdXRvbWF0aWM9MV09IkF1dG9tYXRpYyJ9KShJbnx8KEluPXt9KSk7dmFyIEJuOyhmdW5jdGlvbihlKXtlW2UuVW5rbm93bj0wXT0iVW5rbm93biIsZVtlLkRpc2FibGVkPTFdPSJEaXNhYmxlZCIsZVtlLkVuYWJsZWQ9Ml09IkVuYWJsZWQifSkoQm58fChCbj17fSkpO3ZhciBxbjsoZnVuY3Rpb24oZSl7ZVtlLkludm9rZT0xXT0iSW52b2tlIixlW2UuQXV0bz0yXT0iQXV0byJ9KShxbnx8KHFuPXt9KSk7dmFyIFVuOyhmdW5jdGlvbihlKXtlW2UuTm9uZT0wXT0iTm9uZSIsZVtlLktlZXBXaGl0ZXNwYWNlPTFdPSJLZWVwV2hpdGVzcGFjZSIsZVtlLkluc2VydEFzU25pcHBldD00XT0iSW5zZXJ0QXNTbmlwcGV0In0pKFVufHwoVW49e30pKTt2YXIgSG47KGZ1bmN0aW9uKGUpe2VbZS5NZXRob2Q9MF09Ik1ldGhvZCIsZVtlLkZ1bmN0aW9uPTFdPSJGdW5jdGlvbiIsZVtlLkNvbnN0cnVjdG9yPTJdPSJDb25zdHJ1Y3RvciIsZVtlLkZpZWxkPTNdPSJGaWVsZCIsZVtlLlZhcmlhYmxlPTRdPSJWYXJpYWJsZSIsZVtlLkNsYXNzPTVdPSJDbGFzcyIsZVtlLlN0cnVjdD02XT0iU3RydWN0IixlW2UuSW50ZXJmYWNlPTddPSJJbnRlcmZhY2UiLGVbZS5Nb2R1bGU9OF09Ik1vZHVsZSIsZVtlLlByb3BlcnR5PTldPSJQcm9wZXJ0eSIsZVtlLkV2ZW50PTEwXT0iRXZlbnQiLGVbZS5PcGVyYXRvcj0xMV09Ik9wZXJhdG9yIixlW2UuVW5pdD0xMl09IlVuaXQiLGVbZS5WYWx1ZT0xM109IlZhbHVlIixlW2UuQ29uc3RhbnQ9MTRdPSJDb25zdGFudCIsZVtlLkVudW09MTVdPSJFbnVtIixlW2UuRW51bU1lbWJlcj0xNl09IkVudW1NZW1iZXIiLGVbZS5LZXl3b3JkPTE3XT0iS2V5d29yZCIsZVtlLlRleHQ9MThdPSJUZXh0IixlW2UuQ29sb3I9MTldPSJDb2xvciIsZVtlLkZpbGU9MjBdPSJGaWxlIixlW2UuUmVmZXJlbmNlPTIxXT0iUmVmZXJlbmNlIixlW2UuQ3VzdG9tY29sb3I9MjJdPSJDdXN0b21jb2xvciIsZVtlLkZvbGRlcj0yM109IkZvbGRlciIsZVtlLlR5cGVQYXJhbWV0ZXI9MjRdPSJUeXBlUGFyYW1ldGVyIixlW2UuVXNlcj0yNV09IlVzZXIiLGVbZS5Jc3N1ZT0yNl09Iklzc3VlIixlW2UuU25pcHBldD0yN109IlNuaXBwZXQifSkoSG58fChIbj17fSkpO3ZhciBXbjsoZnVuY3Rpb24oZSl7ZVtlLkRlcHJlY2F0ZWQ9MV09IkRlcHJlY2F0ZWQifSkoV258fChXbj17fSkpO3ZhciB6bjsoZnVuY3Rpb24oZSl7ZVtlLkludm9rZT0wXT0iSW52b2tlIixlW2UuVHJpZ2dlckNoYXJhY3Rlcj0xXT0iVHJpZ2dlckNoYXJhY3RlciIsZVtlLlRyaWdnZXJGb3JJbmNvbXBsZXRlQ29tcGxldGlvbnM9Ml09IlRyaWdnZXJGb3JJbmNvbXBsZXRlQ29tcGxldGlvbnMifSkoem58fCh6bj17fSkpO3ZhciAkbjsoZnVuY3Rpb24oZSl7ZVtlLkVYQUNUPTBdPSJFWEFDVCIsZVtlLkFCT1ZFPTFdPSJBQk9WRSIsZVtlLkJFTE9XPTJdPSJCRUxPVyJ9KSgkbnx8KCRuPXt9KSk7dmFyIE9uOyhmdW5jdGlvbihlKXtlW2UuTm90U2V0PTBdPSJOb3RTZXQiLGVbZS5Db250ZW50Rmx1c2g9MV09IkNvbnRlbnRGbHVzaCIsZVtlLlJlY292ZXJGcm9tTWFya2Vycz0yXT0iUmVjb3ZlckZyb21NYXJrZXJzIixlW2UuRXhwbGljaXQ9M109IkV4cGxpY2l0IixlW2UuUGFzdGU9NF09IlBhc3RlIixlW2UuVW5kbz01XT0iVW5kbyIsZVtlLlJlZG89Nl09IlJlZG8ifSkoT258fChPbj17fSkpO3ZhciBHbjsoZnVuY3Rpb24oZSl7ZVtlLkxGPTFdPSJMRiIsZVtlLkNSTEY9Ml09IkNSTEYifSkoR258fChHbj17fSkpO3ZhciBqbjsoZnVuY3Rpb24oZSl7ZVtlLlRleHQ9MF09IlRleHQiLGVbZS5SZWFkPTFdPSJSZWFkIixlW2UuV3JpdGU9Ml09IldyaXRlIn0pKGpufHwoam49e30pKTt2YXIgWG47KGZ1bmN0aW9uKGUpe2VbZS5Ob25lPTBdPSJOb25lIixlW2UuS2VlcD0xXT0iS2VlcCIsZVtlLkJyYWNrZXRzPTJdPSJCcmFja2V0cyIsZVtlLkFkdmFuY2VkPTNdPSJBZHZhbmNlZCIsZVtlLkZ1bGw9NF09IkZ1bGwifSkoWG58fChYbj17fSkpO3ZhciBRbjsoZnVuY3Rpb24oZSl7ZVtlLmFjY2VwdFN1Z2dlc3Rpb25PbkNvbW1pdENoYXJhY3Rlcj0wXT0iYWNjZXB0U3VnZ2VzdGlvbk9uQ29tbWl0Q2hhcmFjdGVyIixlW2UuYWNjZXB0U3VnZ2VzdGlvbk9uRW50ZXI9MV09ImFjY2VwdFN1Z2dlc3Rpb25PbkVudGVyIixlW2UuYWNjZXNzaWJpbGl0eVN1cHBvcnQ9Ml09ImFjY2Vzc2liaWxpdHlTdXBwb3J0IixlW2UuYWNjZXNzaWJpbGl0eVBhZ2VTaXplPTNdPSJhY2Nlc3NpYmlsaXR5UGFnZVNpemUiLGVbZS5hcmlhTGFiZWw9NF09ImFyaWFMYWJlbCIsZVtlLmFyaWFSZXF1aXJlZD01XT0iYXJpYVJlcXVpcmVkIixlW2UuYXV0b0Nsb3NpbmdCcmFja2V0cz02XT0iYXV0b0Nsb3NpbmdCcmFja2V0cyIsZVtlLmF1dG9DbG9zaW5nQ29tbWVudHM9N109ImF1dG9DbG9zaW5nQ29tbWVudHMiLGVbZS5zY3JlZW5SZWFkZXJBbm5vdW5jZUlubGluZVN1Z2dlc3Rpb249OF09InNjcmVlblJlYWRlckFubm91bmNlSW5saW5lU3VnZ2VzdGlvbiIsZVtlLmF1dG9DbG9zaW5nRGVsZXRlPTldPSJhdXRvQ2xvc2luZ0RlbGV0ZSIsZVtlLmF1dG9DbG9zaW5nT3ZlcnR5cGU9MTBdPSJhdXRvQ2xvc2luZ092ZXJ0eXBlIixlW2UuYXV0b0Nsb3NpbmdRdW90ZXM9MTFdPSJhdXRvQ2xvc2luZ1F1b3RlcyIsZVtlLmF1dG9JbmRlbnQ9MTJdPSJhdXRvSW5kZW50IixlW2UuYXV0b21hdGljTGF5b3V0PTEzXT0iYXV0b21hdGljTGF5b3V0IixlW2UuYXV0b1N1cnJvdW5kPTE0XT0iYXV0b1N1cnJvdW5kIixlW2UuYnJhY2tldFBhaXJDb2xvcml6YXRpb249MTVdPSJicmFja2V0UGFpckNvbG9yaXphdGlvbiIsZVtlLmd1aWRlcz0xNl09Imd1aWRlcyIsZVtlLmNvZGVMZW5zPTE3XT0iY29kZUxlbnMiLGVbZS5jb2RlTGVuc0ZvbnRGYW1pbHk9MThdPSJjb2RlTGVuc0ZvbnRGYW1pbHkiLGVbZS5jb2RlTGVuc0ZvbnRTaXplPTE5XT0iY29kZUxlbnNGb250U2l6ZSIsZVtlLmNvbG9yRGVjb3JhdG9ycz0yMF09ImNvbG9yRGVjb3JhdG9ycyIsZVtlLmNvbG9yRGVjb3JhdG9yc0xpbWl0PTIxXT0iY29sb3JEZWNvcmF0b3JzTGltaXQiLGVbZS5jb2x1bW5TZWxlY3Rpb249MjJdPSJjb2x1bW5TZWxlY3Rpb24iLGVbZS5jb21tZW50cz0yM109ImNvbW1lbnRzIixlW2UuY29udGV4dG1lbnU9MjRdPSJjb250ZXh0bWVudSIsZVtlLmNvcHlXaXRoU3ludGF4SGlnaGxpZ2h0aW5nPTI1XT0iY29weVdpdGhTeW50YXhIaWdobGlnaHRpbmciLGVbZS5jdXJzb3JCbGlua2luZz0yNl09ImN1cnNvckJsaW5raW5nIixlW2UuY3Vyc29yU21vb3RoQ2FyZXRBbmltYXRpb249MjddPSJjdXJzb3JTbW9vdGhDYXJldEFuaW1hdGlvbiIsZVtlLmN1cnNvclN0eWxlPTI4XT0iY3Vyc29yU3R5bGUiLGVbZS5jdXJzb3JTdXJyb3VuZGluZ0xpbmVzPTI5XT0iY3Vyc29yU3Vycm91bmRpbmdMaW5lcyIsZVtlLmN1cnNvclN1cnJvdW5kaW5nTGluZXNTdHlsZT0zMF09ImN1cnNvclN1cnJvdW5kaW5nTGluZXNTdHlsZSIsZVtlLmN1cnNvcldpZHRoPTMxXT0iY3Vyc29yV2lkdGgiLGVbZS5kaXNhYmxlTGF5ZXJIaW50aW5nPTMyXT0iZGlzYWJsZUxheWVySGludGluZyIsZVtlLmRpc2FibGVNb25vc3BhY2VPcHRpbWl6YXRpb25zPTMzXT0iZGlzYWJsZU1vbm9zcGFjZU9wdGltaXphdGlvbnMiLGVbZS5kb21SZWFkT25seT0zNF09ImRvbVJlYWRPbmx5IixlW2UuZHJhZ0FuZERyb3A9MzVdPSJkcmFnQW5kRHJvcCIsZVtlLmRyb3BJbnRvRWRpdG9yPTM2XT0iZHJvcEludG9FZGl0b3IiLGVbZS5lbXB0eVNlbGVjdGlvbkNsaXBib2FyZD0zN109ImVtcHR5U2VsZWN0aW9uQ2xpcGJvYXJkIixlW2UuZXhwZXJpbWVudGFsV2hpdGVzcGFjZVJlbmRlcmluZz0zOF09ImV4cGVyaW1lbnRhbFdoaXRlc3BhY2VSZW5kZXJpbmciLGVbZS5leHRyYUVkaXRvckNsYXNzTmFtZT0zOV09ImV4dHJhRWRpdG9yQ2xhc3NOYW1lIixlW2UuZmFzdFNjcm9sbFNlbnNpdGl2aXR5PTQwXT0iZmFzdFNjcm9sbFNlbnNpdGl2aXR5IixlW2UuZmluZD00MV09ImZpbmQiLGVbZS5maXhlZE92ZXJmbG93V2lkZ2V0cz00Ml09ImZpeGVkT3ZlcmZsb3dXaWRnZXRzIixlW2UuZm9sZGluZz00M109ImZvbGRpbmciLGVbZS5mb2xkaW5nU3RyYXRlZ3k9NDRdPSJmb2xkaW5nU3RyYXRlZ3kiLGVbZS5mb2xkaW5nSGlnaGxpZ2h0PTQ1XT0iZm9sZGluZ0hpZ2hsaWdodCIsZVtlLmZvbGRpbmdJbXBvcnRzQnlEZWZhdWx0PTQ2XT0iZm9sZGluZ0ltcG9ydHNCeURlZmF1bHQiLGVbZS5mb2xkaW5nTWF4aW11bVJlZ2lvbnM9NDddPSJmb2xkaW5nTWF4aW11bVJlZ2lvbnMiLGVbZS51bmZvbGRPbkNsaWNrQWZ0ZXJFbmRPZkxpbmU9NDhdPSJ1bmZvbGRPbkNsaWNrQWZ0ZXJFbmRPZkxpbmUiLGVbZS5mb250RmFtaWx5PTQ5XT0iZm9udEZhbWlseSIsZVtlLmZvbnRJbmZvPTUwXT0iZm9udEluZm8iLGVbZS5mb250TGlnYXR1cmVzPTUxXT0iZm9udExpZ2F0dXJlcyIsZVtlLmZvbnRTaXplPTUyXT0iZm9udFNpemUiLGVbZS5mb250V2VpZ2h0PTUzXT0iZm9udFdlaWdodCIsZVtlLmZvbnRWYXJpYXRpb25zPTU0XT0iZm9udFZhcmlhdGlvbnMiLGVbZS5mb3JtYXRPblBhc3RlPTU1XT0iZm9ybWF0T25QYXN0ZSIsZVtlLmZvcm1hdE9uVHlwZT01Nl09ImZvcm1hdE9uVHlwZSIsZVtlLmdseXBoTWFyZ2luPTU3XT0iZ2x5cGhNYXJnaW4iLGVbZS5nb3RvTG9jYXRpb249NThdPSJnb3RvTG9jYXRpb24iLGVbZS5oaWRlQ3Vyc29ySW5PdmVydmlld1J1bGVyPTU5XT0iaGlkZUN1cnNvckluT3ZlcnZpZXdSdWxlciIsZVtlLmhvdmVyPTYwXT0iaG92ZXIiLGVbZS5pbkRpZmZFZGl0b3I9NjFdPSJpbkRpZmZFZGl0b3IiLGVbZS5pbmxpbmVTdWdnZXN0PTYyXT0iaW5saW5lU3VnZ2VzdCIsZVtlLmlubGluZUVkaXQ9NjNdPSJpbmxpbmVFZGl0IixlW2UubGV0dGVyU3BhY2luZz02NF09ImxldHRlclNwYWNpbmciLGVbZS5saWdodGJ1bGI9NjVdPSJsaWdodGJ1bGIiLGVbZS5saW5lRGVjb3JhdGlvbnNXaWR0aD02Nl09ImxpbmVEZWNvcmF0aW9uc1dpZHRoIixlW2UubGluZUhlaWdodD02N109ImxpbmVIZWlnaHQiLGVbZS5saW5lTnVtYmVycz02OF09ImxpbmVOdW1iZXJzIixlW2UubGluZU51bWJlcnNNaW5DaGFycz02OV09ImxpbmVOdW1iZXJzTWluQ2hhcnMiLGVbZS5saW5rZWRFZGl0aW5nPTcwXT0ibGlua2VkRWRpdGluZyIsZVtlLmxpbmtzPTcxXT0ibGlua3MiLGVbZS5tYXRjaEJyYWNrZXRzPTcyXT0ibWF0Y2hCcmFja2V0cyIsZVtlLm1pbmltYXA9NzNdPSJtaW5pbWFwIixlW2UubW91c2VTdHlsZT03NF09Im1vdXNlU3R5bGUiLGVbZS5tb3VzZVdoZWVsU2Nyb2xsU2Vuc2l0aXZpdHk9NzVdPSJtb3VzZVdoZWVsU2Nyb2xsU2Vuc2l0aXZpdHkiLGVbZS5tb3VzZVdoZWVsWm9vbT03Nl09Im1vdXNlV2hlZWxab29tIixlW2UubXVsdGlDdXJzb3JNZXJnZU92ZXJsYXBwaW5nPTc3XT0ibXVsdGlDdXJzb3JNZXJnZU92ZXJsYXBwaW5nIixlW2UubXVsdGlDdXJzb3JNb2RpZmllcj03OF09Im11bHRpQ3Vyc29yTW9kaWZpZXIiLGVbZS5tdWx0aUN1cnNvclBhc3RlPTc5XT0ibXVsdGlDdXJzb3JQYXN0ZSIsZVtlLm11bHRpQ3Vyc29yTGltaXQ9ODBdPSJtdWx0aUN1cnNvckxpbWl0IixlW2Uub2NjdXJyZW5jZXNIaWdobGlnaHQ9ODFdPSJvY2N1cnJlbmNlc0hpZ2hsaWdodCIsZVtlLm92ZXJ2aWV3UnVsZXJCb3JkZXI9ODJdPSJvdmVydmlld1J1bGVyQm9yZGVyIixlW2Uub3ZlcnZpZXdSdWxlckxhbmVzPTgzXT0ib3ZlcnZpZXdSdWxlckxhbmVzIixlW2UucGFkZGluZz04NF09InBhZGRpbmciLGVbZS5wYXN0ZUFzPTg1XT0icGFzdGVBcyIsZVtlLnBhcmFtZXRlckhpbnRzPTg2XT0icGFyYW1ldGVySGludHMiLGVbZS5wZWVrV2lkZ2V0RGVmYXVsdEZvY3VzPTg3XT0icGVla1dpZGdldERlZmF1bHRGb2N1cyIsZVtlLmRlZmluaXRpb25MaW5rT3BlbnNJblBlZWs9ODhdPSJkZWZpbml0aW9uTGlua09wZW5zSW5QZWVrIixlW2UucXVpY2tTdWdnZXN0aW9ucz04OV09InF1aWNrU3VnZ2VzdGlvbnMiLGVbZS5xdWlja1N1Z2dlc3Rpb25zRGVsYXk9OTBdPSJxdWlja1N1Z2dlc3Rpb25zRGVsYXkiLGVbZS5yZWFkT25seT05MV09InJlYWRPbmx5IixlW2UucmVhZE9ubHlNZXNzYWdlPTkyXT0icmVhZE9ubHlNZXNzYWdlIixlW2UucmVuYW1lT25UeXBlPTkzXT0icmVuYW1lT25UeXBlIixlW2UucmVuZGVyQ29udHJvbENoYXJhY3RlcnM9OTRdPSJyZW5kZXJDb250cm9sQ2hhcmFjdGVycyIsZVtlLnJlbmRlckZpbmFsTmV3bGluZT05NV09InJlbmRlckZpbmFsTmV3bGluZSIsZVtlLnJlbmRlckxpbmVIaWdobGlnaHQ9OTZdPSJyZW5kZXJMaW5lSGlnaGxpZ2h0IixlW2UucmVuZGVyTGluZUhpZ2hsaWdodE9ubHlXaGVuRm9jdXM9OTddPSJyZW5kZXJMaW5lSGlnaGxpZ2h0T25seVdoZW5Gb2N1cyIsZVtlLnJlbmRlclZhbGlkYXRpb25EZWNvcmF0aW9ucz05OF09InJlbmRlclZhbGlkYXRpb25EZWNvcmF0aW9ucyIsZVtlLnJlbmRlcldoaXRlc3BhY2U9OTldPSJyZW5kZXJXaGl0ZXNwYWNlIixlW2UucmV2ZWFsSG9yaXpvbnRhbFJpZ2h0UGFkZGluZz0xMDBdPSJyZXZlYWxIb3Jpem9udGFsUmlnaHRQYWRkaW5nIixlW2Uucm91bmRlZFNlbGVjdGlvbj0xMDFdPSJyb3VuZGVkU2VsZWN0aW9uIixlW2UucnVsZXJzPTEwMl09InJ1bGVycyIsZVtlLnNjcm9sbGJhcj0xMDNdPSJzY3JvbGxiYXIiLGVbZS5zY3JvbGxCZXlvbmRMYXN0Q29sdW1uPTEwNF09InNjcm9sbEJleW9uZExhc3RDb2x1bW4iLGVbZS5zY3JvbGxCZXlvbmRMYXN0TGluZT0xMDVdPSJzY3JvbGxCZXlvbmRMYXN0TGluZSIsZVtlLnNjcm9sbFByZWRvbWluYW50QXhpcz0xMDZdPSJzY3JvbGxQcmVkb21pbmFudEF4aXMiLGVbZS5zZWxlY3Rpb25DbGlwYm9hcmQ9MTA3XT0ic2VsZWN0aW9uQ2xpcGJvYXJkIixlW2Uuc2VsZWN0aW9uSGlnaGxpZ2h0PTEwOF09InNlbGVjdGlvbkhpZ2hsaWdodCIsZVtlLnNlbGVjdE9uTGluZU51bWJlcnM9MTA5XT0ic2VsZWN0T25MaW5lTnVtYmVycyIsZVtlLnNob3dGb2xkaW5nQ29udHJvbHM9MTEwXT0ic2hvd0ZvbGRpbmdDb250cm9scyIsZVtlLnNob3dVbnVzZWQ9MTExXT0ic2hvd1VudXNlZCIsZVtlLnNuaXBwZXRTdWdnZXN0aW9ucz0xMTJdPSJzbmlwcGV0U3VnZ2VzdGlvbnMiLGVbZS5zbWFydFNlbGVjdD0xMTNdPSJzbWFydFNlbGVjdCIsZVtlLnNtb290aFNjcm9sbGluZz0xMTRdPSJzbW9vdGhTY3JvbGxpbmciLGVbZS5zdGlja3lTY3JvbGw9MTE1XT0ic3RpY2t5U2Nyb2xsIixlW2Uuc3RpY2t5VGFiU3RvcHM9MTE2XT0ic3RpY2t5VGFiU3RvcHMiLGVbZS5zdG9wUmVuZGVyaW5nTGluZUFmdGVyPTExN109InN0b3BSZW5kZXJpbmdMaW5lQWZ0ZXIiLGVbZS5zdWdnZXN0PTExOF09InN1Z2dlc3QiLGVbZS5zdWdnZXN0Rm9udFNpemU9MTE5XT0ic3VnZ2VzdEZvbnRTaXplIixlW2Uuc3VnZ2VzdExpbmVIZWlnaHQ9MTIwXT0ic3VnZ2VzdExpbmVIZWlnaHQiLGVbZS5zdWdnZXN0T25UcmlnZ2VyQ2hhcmFjdGVycz0xMjFdPSJzdWdnZXN0T25UcmlnZ2VyQ2hhcmFjdGVycyIsZVtlLnN1Z2dlc3RTZWxlY3Rpb249MTIyXT0ic3VnZ2VzdFNlbGVjdGlvbiIsZVtlLnRhYkNvbXBsZXRpb249MTIzXT0idGFiQ29tcGxldGlvbiIsZVtlLnRhYkluZGV4PTEyNF09InRhYkluZGV4IixlW2UudW5pY29kZUhpZ2hsaWdodGluZz0xMjVdPSJ1bmljb2RlSGlnaGxpZ2h0aW5nIixlW2UudW51c3VhbExpbmVUZXJtaW5hdG9ycz0xMjZdPSJ1bnVzdWFsTGluZVRlcm1pbmF0b3JzIixlW2UudXNlU2hhZG93RE9NPTEyN109InVzZVNoYWRvd0RPTSIsZVtlLnVzZVRhYlN0b3BzPTEyOF09InVzZVRhYlN0b3BzIixlW2Uud29yZEJyZWFrPTEyOV09IndvcmRCcmVhayIsZVtlLndvcmRTZWdtZW50ZXJMb2NhbGVzPTEzMF09IndvcmRTZWdtZW50ZXJMb2NhbGVzIixlW2Uud29yZFNlcGFyYXRvcnM9MTMxXT0id29yZFNlcGFyYXRvcnMiLGVbZS53b3JkV3JhcD0xMzJdPSJ3b3JkV3JhcCIsZVtlLndvcmRXcmFwQnJlYWtBZnRlckNoYXJhY3RlcnM9MTMzXT0id29yZFdyYXBCcmVha0FmdGVyQ2hhcmFjdGVycyIsZVtlLndvcmRXcmFwQnJlYWtCZWZvcmVDaGFyYWN0ZXJzPTEzNF09IndvcmRXcmFwQnJlYWtCZWZvcmVDaGFyYWN0ZXJzIixlW2Uud29yZFdyYXBDb2x1bW49MTM1XT0id29yZFdyYXBDb2x1bW4iLGVbZS53b3JkV3JhcE92ZXJyaWRlMT0xMzZdPSJ3b3JkV3JhcE92ZXJyaWRlMSIsZVtlLndvcmRXcmFwT3ZlcnJpZGUyPTEzN109IndvcmRXcmFwT3ZlcnJpZGUyIixlW2Uud3JhcHBpbmdJbmRlbnQ9MTM4XT0id3JhcHBpbmdJbmRlbnQiLGVbZS53cmFwcGluZ1N0cmF0ZWd5PTEzOV09IndyYXBwaW5nU3RyYXRlZ3kiLGVbZS5zaG93RGVwcmVjYXRlZD0xNDBdPSJzaG93RGVwcmVjYXRlZCIsZVtlLmlubGF5SGludHM9MTQxXT0iaW5sYXlIaW50cyIsZVtlLmVkaXRvckNsYXNzTmFtZT0xNDJdPSJlZGl0b3JDbGFzc05hbWUiLGVbZS5waXhlbFJhdGlvPTE0M109InBpeGVsUmF0aW8iLGVbZS50YWJGb2N1c01vZGU9MTQ0XT0idGFiRm9jdXNNb2RlIixlW2UubGF5b3V0SW5mbz0xNDVdPSJsYXlvdXRJbmZvIixlW2Uud3JhcHBpbmdJbmZvPTE0Nl09IndyYXBwaW5nSW5mbyIsZVtlLmRlZmF1bHRDb2xvckRlY29yYXRvcnM9MTQ3XT0iZGVmYXVsdENvbG9yRGVjb3JhdG9ycyIsZVtlLmNvbG9yRGVjb3JhdG9yc0FjdGl2YXRlZE9uPTE0OF09ImNvbG9yRGVjb3JhdG9yc0FjdGl2YXRlZE9uIixlW2UuaW5saW5lQ29tcGxldGlvbnNBY2Nlc3NpYmlsaXR5VmVyYm9zZT0xNDldPSJpbmxpbmVDb21wbGV0aW9uc0FjY2Vzc2liaWxpdHlWZXJib3NlIn0pKFFufHwoUW49e30pKTt2YXIgSm47KGZ1bmN0aW9uKGUpe2VbZS5UZXh0RGVmaW5lZD0wXT0iVGV4dERlZmluZWQiLGVbZS5MRj0xXT0iTEYiLGVbZS5DUkxGPTJdPSJDUkxGIn0pKEpufHwoSm49e30pKTt2YXIgWW47KGZ1bmN0aW9uKGUpe2VbZS5MRj0wXT0iTEYiLGVbZS5DUkxGPTFdPSJDUkxGIn0pKFlufHwoWW49e30pKTt2YXIgWm47KGZ1bmN0aW9uKGUpe2VbZS5MZWZ0PTFdPSJMZWZ0IixlW2UuQ2VudGVyPTJdPSJDZW50ZXIiLGVbZS5SaWdodD0zXT0iUmlnaHQifSkoWm58fChabj17fSkpO3ZhciBLbjsoZnVuY3Rpb24oZSl7ZVtlLkluY3JlYXNlPTBdPSJJbmNyZWFzZSIsZVtlLkRlY3JlYXNlPTFdPSJEZWNyZWFzZSJ9KShLbnx8KEtuPXt9KSk7dmFyIGVyOyhmdW5jdGlvbihlKXtlW2UuTm9uZT0wXT0iTm9uZSIsZVtlLkluZGVudD0xXT0iSW5kZW50IixlW2UuSW5kZW50T3V0ZGVudD0yXT0iSW5kZW50T3V0ZGVudCIsZVtlLk91dGRlbnQ9M109Ik91dGRlbnQifSkoZXJ8fChlcj17fSkpO3ZhciB0cjsoZnVuY3Rpb24oZSl7ZVtlLkJvdGg9MF09IkJvdGgiLGVbZS5SaWdodD0xXT0iUmlnaHQiLGVbZS5MZWZ0PTJdPSJMZWZ0IixlW2UuTm9uZT0zXT0iTm9uZSJ9KSh0cnx8KHRyPXt9KSk7dmFyIG5yOyhmdW5jdGlvbihlKXtlW2UuVHlwZT0xXT0iVHlwZSIsZVtlLlBhcmFtZXRlcj0yXT0iUGFyYW1ldGVyIn0pKG5yfHwobnI9e30pKTt2YXIgcnI7KGZ1bmN0aW9uKGUpe2VbZS5BdXRvbWF0aWM9MF09IkF1dG9tYXRpYyIsZVtlLkV4cGxpY2l0PTFdPSJFeHBsaWNpdCJ9KShycnx8KHJyPXt9KSk7dmFyIHNyOyhmdW5jdGlvbihlKXtlW2UuSW52b2tlPTBdPSJJbnZva2UiLGVbZS5BdXRvbWF0aWM9MV09IkF1dG9tYXRpYyJ9KShzcnx8KHNyPXt9KSk7dmFyIFV0OyhmdW5jdGlvbihlKXtlW2UuRGVwZW5kc09uS2JMYXlvdXQ9LTFdPSJEZXBlbmRzT25LYkxheW91dCIsZVtlLlVua25vd249MF09IlVua25vd24iLGVbZS5CYWNrc3BhY2U9MV09IkJhY2tzcGFjZSIsZVtlLlRhYj0yXT0iVGFiIixlW2UuRW50ZXI9M109IkVudGVyIixlW2UuU2hpZnQ9NF09IlNoaWZ0IixlW2UuQ3RybD01XT0iQ3RybCIsZVtlLkFsdD02XT0iQWx0IixlW2UuUGF1c2VCcmVhaz03XT0iUGF1c2VCcmVhayIsZVtlLkNhcHNMb2NrPThdPSJDYXBzTG9jayIsZVtlLkVzY2FwZT05XT0iRXNjYXBlIixlW2UuU3BhY2U9MTBdPSJTcGFjZSIsZVtlLlBhZ2VVcD0xMV09IlBhZ2VVcCIsZVtlLlBhZ2VEb3duPTEyXT0iUGFnZURvd24iLGVbZS5FbmQ9MTNdPSJFbmQiLGVbZS5Ib21lPTE0XT0iSG9tZSIsZVtlLkxlZnRBcnJvdz0xNV09IkxlZnRBcnJvdyIsZVtlLlVwQXJyb3c9MTZdPSJVcEFycm93IixlW2UuUmlnaHRBcnJvdz0xN109IlJpZ2h0QXJyb3ciLGVbZS5Eb3duQXJyb3c9MThdPSJEb3duQXJyb3ciLGVbZS5JbnNlcnQ9MTldPSJJbnNlcnQiLGVbZS5EZWxldGU9MjBdPSJEZWxldGUiLGVbZS5EaWdpdDA9MjFdPSJEaWdpdDAiLGVbZS5EaWdpdDE9MjJdPSJEaWdpdDEiLGVbZS5EaWdpdDI9MjNdPSJEaWdpdDIiLGVbZS5EaWdpdDM9MjRdPSJEaWdpdDMiLGVbZS5EaWdpdDQ9MjVdPSJEaWdpdDQiLGVbZS5EaWdpdDU9MjZdPSJEaWdpdDUiLGVbZS5EaWdpdDY9MjddPSJEaWdpdDYiLGVbZS5EaWdpdDc9MjhdPSJEaWdpdDciLGVbZS5EaWdpdDg9MjldPSJEaWdpdDgiLGVbZS5EaWdpdDk9MzBdPSJEaWdpdDkiLGVbZS5LZXlBPTMxXT0iS2V5QSIsZVtlLktleUI9MzJdPSJLZXlCIixlW2UuS2V5Qz0zM109IktleUMiLGVbZS5LZXlEPTM0XT0iS2V5RCIsZVtlLktleUU9MzVdPSJLZXlFIixlW2UuS2V5Rj0zNl09IktleUYiLGVbZS5LZXlHPTM3XT0iS2V5RyIsZVtlLktleUg9MzhdPSJLZXlIIixlW2UuS2V5ST0zOV09IktleUkiLGVbZS5LZXlKPTQwXT0iS2V5SiIsZVtlLktleUs9NDFdPSJLZXlLIixlW2UuS2V5TD00Ml09IktleUwiLGVbZS5LZXlNPTQzXT0iS2V5TSIsZVtlLktleU49NDRdPSJLZXlOIixlW2UuS2V5Tz00NV09IktleU8iLGVbZS5LZXlQPTQ2XT0iS2V5UCIsZVtlLktleVE9NDddPSJLZXlRIixlW2UuS2V5Uj00OF09IktleVIiLGVbZS5LZXlTPTQ5XT0iS2V5UyIsZVtlLktleVQ9NTBdPSJLZXlUIixlW2UuS2V5VT01MV09IktleVUiLGVbZS5LZXlWPTUyXT0iS2V5ViIsZVtlLktleVc9NTNdPSJLZXlXIixlW2UuS2V5WD01NF09IktleVgiLGVbZS5LZXlZPTU1XT0iS2V5WSIsZVtlLktleVo9NTZdPSJLZXlaIixlW2UuTWV0YT01N109Ik1ldGEiLGVbZS5Db250ZXh0TWVudT01OF09IkNvbnRleHRNZW51IixlW2UuRjE9NTldPSJGMSIsZVtlLkYyPTYwXT0iRjIiLGVbZS5GMz02MV09IkYzIixlW2UuRjQ9NjJdPSJGNCIsZVtlLkY1PTYzXT0iRjUiLGVbZS5GNj02NF09IkY2IixlW2UuRjc9NjVdPSJGNyIsZVtlLkY4PTY2XT0iRjgiLGVbZS5GOT02N109IkY5IixlW2UuRjEwPTY4XT0iRjEwIixlW2UuRjExPTY5XT0iRjExIixlW2UuRjEyPTcwXT0iRjEyIixlW2UuRjEzPTcxXT0iRjEzIixlW2UuRjE0PTcyXT0iRjE0IixlW2UuRjE1PTczXT0iRjE1IixlW2UuRjE2PTc0XT0iRjE2IixlW2UuRjE3PTc1XT0iRjE3IixlW2UuRjE4PTc2XT0iRjE4IixlW2UuRjE5PTc3XT0iRjE5IixlW2UuRjIwPTc4XT0iRjIwIixlW2UuRjIxPTc5XT0iRjIxIixlW2UuRjIyPTgwXT0iRjIyIixlW2UuRjIzPTgxXT0iRjIzIixlW2UuRjI0PTgyXT0iRjI0IixlW2UuTnVtTG9jaz04M109Ik51bUxvY2siLGVbZS5TY3JvbGxMb2NrPTg0XT0iU2Nyb2xsTG9jayIsZVtlLlNlbWljb2xvbj04NV09IlNlbWljb2xvbiIsZVtlLkVxdWFsPTg2XT0iRXF1YWwiLGVbZS5Db21tYT04N109IkNvbW1hIixlW2UuTWludXM9ODhdPSJNaW51cyIsZVtlLlBlcmlvZD04OV09IlBlcmlvZCIsZVtlLlNsYXNoPTkwXT0iU2xhc2giLGVbZS5CYWNrcXVvdGU9OTFdPSJCYWNrcXVvdGUiLGVbZS5CcmFja2V0TGVmdD05Ml09IkJyYWNrZXRMZWZ0IixlW2UuQmFja3NsYXNoPTkzXT0iQmFja3NsYXNoIixlW2UuQnJhY2tldFJpZ2h0PTk0XT0iQnJhY2tldFJpZ2h0IixlW2UuUXVvdGU9OTVdPSJRdW90ZSIsZVtlLk9FTV84PTk2XT0iT0VNXzgiLGVbZS5JbnRsQmFja3NsYXNoPTk3XT0iSW50bEJhY2tzbGFzaCIsZVtlLk51bXBhZDA9OThdPSJOdW1wYWQwIixlW2UuTnVtcGFkMT05OV09Ik51bXBhZDEiLGVbZS5OdW1wYWQyPTEwMF09Ik51bXBhZDIiLGVbZS5OdW1wYWQzPTEwMV09Ik51bXBhZDMiLGVbZS5OdW1wYWQ0PTEwMl09Ik51bXBhZDQiLGVbZS5OdW1wYWQ1PTEwM109Ik51bXBhZDUiLGVbZS5OdW1wYWQ2PTEwNF09Ik51bXBhZDYiLGVbZS5OdW1wYWQ3PTEwNV09Ik51bXBhZDciLGVbZS5OdW1wYWQ4PTEwNl09Ik51bXBhZDgiLGVbZS5OdW1wYWQ5PTEwN109Ik51bXBhZDkiLGVbZS5OdW1wYWRNdWx0aXBseT0xMDhdPSJOdW1wYWRNdWx0aXBseSIsZVtlLk51bXBhZEFkZD0xMDldPSJOdW1wYWRBZGQiLGVbZS5OVU1QQURfU0VQQVJBVE9SPTExMF09Ik5VTVBBRF9TRVBBUkFUT1IiLGVbZS5OdW1wYWRTdWJ0cmFjdD0xMTFdPSJOdW1wYWRTdWJ0cmFjdCIsZVtlLk51bXBhZERlY2ltYWw9MTEyXT0iTnVtcGFkRGVjaW1hbCIsZVtlLk51bXBhZERpdmlkZT0xMTNdPSJOdW1wYWREaXZpZGUiLGVbZS5LRVlfSU5fQ09NUE9TSVRJT049MTE0XT0iS0VZX0lOX0NPTVBPU0lUSU9OIixlW2UuQUJOVF9DMT0xMTVdPSJBQk5UX0MxIixlW2UuQUJOVF9DMj0xMTZdPSJBQk5UX0MyIixlW2UuQXVkaW9Wb2x1bWVNdXRlPTExN109IkF1ZGlvVm9sdW1lTXV0ZSIsZVtlLkF1ZGlvVm9sdW1lVXA9MTE4XT0iQXVkaW9Wb2x1bWVVcCIsZVtlLkF1ZGlvVm9sdW1lRG93bj0xMTldPSJBdWRpb1ZvbHVtZURvd24iLGVbZS5Ccm93c2VyU2VhcmNoPTEyMF09IkJyb3dzZXJTZWFyY2giLGVbZS5Ccm93c2VySG9tZT0xMjFdPSJCcm93c2VySG9tZSIsZVtlLkJyb3dzZXJCYWNrPTEyMl09IkJyb3dzZXJCYWNrIixlW2UuQnJvd3NlckZvcndhcmQ9MTIzXT0iQnJvd3NlckZvcndhcmQiLGVbZS5NZWRpYVRyYWNrTmV4dD0xMjRdPSJNZWRpYVRyYWNrTmV4dCIsZVtlLk1lZGlhVHJhY2tQcmV2aW91cz0xMjVdPSJNZWRpYVRyYWNrUHJldmlvdXMiLGVbZS5NZWRpYVN0b3A9MTI2XT0iTWVkaWFTdG9wIixlW2UuTWVkaWFQbGF5UGF1c2U9MTI3XT0iTWVkaWFQbGF5UGF1c2UiLGVbZS5MYXVuY2hNZWRpYVBsYXllcj0xMjhdPSJMYXVuY2hNZWRpYVBsYXllciIsZVtlLkxhdW5jaE1haWw9MTI5XT0iTGF1bmNoTWFpbCIsZVtlLkxhdW5jaEFwcDI9MTMwXT0iTGF1bmNoQXBwMiIsZVtlLkNsZWFyPTEzMV09IkNsZWFyIixlW2UuTUFYX1ZBTFVFPTEzMl09Ik1BWF9WQUxVRSJ9KShVdHx8KFV0PXt9KSk7dmFyIEh0OyhmdW5jdGlvbihlKXtlW2UuSGludD0xXT0iSGludCIsZVtlLkluZm89Ml09IkluZm8iLGVbZS5XYXJuaW5nPTRdPSJXYXJuaW5nIixlW2UuRXJyb3I9OF09IkVycm9yIn0pKEh0fHwoSHQ9e30pKTt2YXIgV3Q7KGZ1bmN0aW9uKGUpe2VbZS5Vbm5lY2Vzc2FyeT0xXT0iVW5uZWNlc3NhcnkiLGVbZS5EZXByZWNhdGVkPTJdPSJEZXByZWNhdGVkIn0pKFd0fHwoV3Q9e30pKTt2YXIgaXI7KGZ1bmN0aW9uKGUpe2VbZS5JbmxpbmU9MV09IklubGluZSIsZVtlLkd1dHRlcj0yXT0iR3V0dGVyIn0pKGlyfHwoaXI9e30pKTt2YXIgYXI7KGZ1bmN0aW9uKGUpe2VbZS5Ob3JtYWw9MV09Ik5vcm1hbCIsZVtlLlVuZGVybGluZWQ9Ml09IlVuZGVybGluZWQifSkoYXJ8fChhcj17fSkpO3ZhciBvcjsoZnVuY3Rpb24oZSl7ZVtlLlVOS05PV049MF09IlVOS05PV04iLGVbZS5URVhUQVJFQT0xXT0iVEVYVEFSRUEiLGVbZS5HVVRURVJfR0xZUEhfTUFSR0lOPTJdPSJHVVRURVJfR0xZUEhfTUFSR0lOIixlW2UuR1VUVEVSX0xJTkVfTlVNQkVSUz0zXT0iR1VUVEVSX0xJTkVfTlVNQkVSUyIsZVtlLkdVVFRFUl9MSU5FX0RFQ09SQVRJT05TPTRdPSJHVVRURVJfTElORV9ERUNPUkFUSU9OUyIsZVtlLkdVVFRFUl9WSUVXX1pPTkU9NV09IkdVVFRFUl9WSUVXX1pPTkUiLGVbZS5DT05URU5UX1RFWFQ9Nl09IkNPTlRFTlRfVEVYVCIsZVtlLkNPTlRFTlRfRU1QVFk9N109IkNPTlRFTlRfRU1QVFkiLGVbZS5DT05URU5UX1ZJRVdfWk9ORT04XT0iQ09OVEVOVF9WSUVXX1pPTkUiLGVbZS5DT05URU5UX1dJREdFVD05XT0iQ09OVEVOVF9XSURHRVQiLGVbZS5PVkVSVklFV19SVUxFUj0xMF09Ik9WRVJWSUVXX1JVTEVSIixlW2UuU0NST0xMQkFSPTExXT0iU0NST0xMQkFSIixlW2UuT1ZFUkxBWV9XSURHRVQ9MTJdPSJPVkVSTEFZX1dJREdFVCIsZVtlLk9VVFNJREVfRURJVE9SPTEzXT0iT1VUU0lERV9FRElUT1IifSkob3J8fChvcj17fSkpO3ZhciBscjsoZnVuY3Rpb24oZSl7ZVtlLkFJR2VuZXJhdGVkPTFdPSJBSUdlbmVyYXRlZCJ9KShscnx8KGxyPXt9KSk7dmFyIHVyOyhmdW5jdGlvbihlKXtlW2UuSW52b2tlPTBdPSJJbnZva2UiLGVbZS5BdXRvbWF0aWM9MV09IkF1dG9tYXRpYyJ9KSh1cnx8KHVyPXt9KSk7dmFyIGNyOyhmdW5jdGlvbihlKXtlW2UuVE9QX1JJR0hUX0NPUk5FUj0wXT0iVE9QX1JJR0hUX0NPUk5FUiIsZVtlLkJPVFRPTV9SSUdIVF9DT1JORVI9MV09IkJPVFRPTV9SSUdIVF9DT1JORVIiLGVbZS5UT1BfQ0VOVEVSPTJdPSJUT1BfQ0VOVEVSIn0pKGNyfHwoY3I9e30pKTt2YXIgaHI7KGZ1bmN0aW9uKGUpe2VbZS5MZWZ0PTFdPSJMZWZ0IixlW2UuQ2VudGVyPTJdPSJDZW50ZXIiLGVbZS5SaWdodD00XT0iUmlnaHQiLGVbZS5GdWxsPTddPSJGdWxsIn0pKGhyfHwoaHI9e30pKTt2YXIgZnI7KGZ1bmN0aW9uKGUpe2VbZS5Xb3JkPTBdPSJXb3JkIixlW2UuTGluZT0xXT0iTGluZSIsZVtlLlN1Z2dlc3Q9Ml09IlN1Z2dlc3QifSkoZnJ8fChmcj17fSkpO3ZhciBkcjsoZnVuY3Rpb24oZSl7ZVtlLkxlZnQ9MF09IkxlZnQiLGVbZS5SaWdodD0xXT0iUmlnaHQiLGVbZS5Ob25lPTJdPSJOb25lIixlW2UuTGVmdE9mSW5qZWN0ZWRUZXh0PTNdPSJMZWZ0T2ZJbmplY3RlZFRleHQiLGVbZS5SaWdodE9mSW5qZWN0ZWRUZXh0PTRdPSJSaWdodE9mSW5qZWN0ZWRUZXh0In0pKGRyfHwoZHI9e30pKTt2YXIgbXI7KGZ1bmN0aW9uKGUpe2VbZS5PZmY9MF09Ik9mZiIsZVtlLk9uPTFdPSJPbiIsZVtlLlJlbGF0aXZlPTJdPSJSZWxhdGl2ZSIsZVtlLkludGVydmFsPTNdPSJJbnRlcnZhbCIsZVtlLkN1c3RvbT00XT0iQ3VzdG9tIn0pKG1yfHwobXI9e30pKTt2YXIgZ3I7KGZ1bmN0aW9uKGUpe2VbZS5Ob25lPTBdPSJOb25lIixlW2UuVGV4dD0xXT0iVGV4dCIsZVtlLkJsb2Nrcz0yXT0iQmxvY2tzIn0pKGdyfHwoZ3I9e30pKTt2YXIgYnI7KGZ1bmN0aW9uKGUpe2VbZS5TbW9vdGg9MF09IlNtb290aCIsZVtlLkltbWVkaWF0ZT0xXT0iSW1tZWRpYXRlIn0pKGJyfHwoYnI9e30pKTt2YXIgX3I7KGZ1bmN0aW9uKGUpe2VbZS5BdXRvPTFdPSJBdXRvIixlW2UuSGlkZGVuPTJdPSJIaWRkZW4iLGVbZS5WaXNpYmxlPTNdPSJWaXNpYmxlIn0pKF9yfHwoX3I9e30pKTt2YXIgenQ7KGZ1bmN0aW9uKGUpe2VbZS5MVFI9MF09IkxUUiIsZVtlLlJUTD0xXT0iUlRMIn0pKHp0fHwoenQ9e30pKTt2YXIgeHI7KGZ1bmN0aW9uKGUpe2UuT2ZmPSJvZmYiLGUuT25Db2RlPSJvbkNvZGUiLGUuT249Im9uIn0pKHhyfHwoeHI9e30pKTt2YXIgcHI7KGZ1bmN0aW9uKGUpe2VbZS5JbnZva2U9MV09Ikludm9rZSIsZVtlLlRyaWdnZXJDaGFyYWN0ZXI9Ml09IlRyaWdnZXJDaGFyYWN0ZXIiLGVbZS5Db250ZW50Q2hhbmdlPTNdPSJDb250ZW50Q2hhbmdlIn0pKHByfHwocHI9e30pKTt2YXIgdnI7KGZ1bmN0aW9uKGUpe2VbZS5GaWxlPTBdPSJGaWxlIixlW2UuTW9kdWxlPTFdPSJNb2R1bGUiLGVbZS5OYW1lc3BhY2U9Ml09Ik5hbWVzcGFjZSIsZVtlLlBhY2thZ2U9M109IlBhY2thZ2UiLGVbZS5DbGFzcz00XT0iQ2xhc3MiLGVbZS5NZXRob2Q9NV09Ik1ldGhvZCIsZVtlLlByb3BlcnR5PTZdPSJQcm9wZXJ0eSIsZVtlLkZpZWxkPTddPSJGaWVsZCIsZVtlLkNvbnN0cnVjdG9yPThdPSJDb25zdHJ1Y3RvciIsZVtlLkVudW09OV09IkVudW0iLGVbZS5JbnRlcmZhY2U9MTBdPSJJbnRlcmZhY2UiLGVbZS5GdW5jdGlvbj0xMV09IkZ1bmN0aW9uIixlW2UuVmFyaWFibGU9MTJdPSJWYXJpYWJsZSIsZVtlLkNvbnN0YW50PTEzXT0iQ29uc3RhbnQiLGVbZS5TdHJpbmc9MTRdPSJTdHJpbmciLGVbZS5OdW1iZXI9MTVdPSJOdW1iZXIiLGVbZS5Cb29sZWFuPTE2XT0iQm9vbGVhbiIsZVtlLkFycmF5PTE3XT0iQXJyYXkiLGVbZS5PYmplY3Q9MThdPSJPYmplY3QiLGVbZS5LZXk9MTldPSJLZXkiLGVbZS5OdWxsPTIwXT0iTnVsbCIsZVtlLkVudW1NZW1iZXI9MjFdPSJFbnVtTWVtYmVyIixlW2UuU3RydWN0PTIyXT0iU3RydWN0IixlW2UuRXZlbnQ9MjNdPSJFdmVudCIsZVtlLk9wZXJhdG9yPTI0XT0iT3BlcmF0b3IiLGVbZS5UeXBlUGFyYW1ldGVyPTI1XT0iVHlwZVBhcmFtZXRlciJ9KSh2cnx8KHZyPXt9KSk7dmFyIHdyOyhmdW5jdGlvbihlKXtlW2UuRGVwcmVjYXRlZD0xXT0iRGVwcmVjYXRlZCJ9KSh3cnx8KHdyPXt9KSk7dmFyIExyOyhmdW5jdGlvbihlKXtlW2UuSGlkZGVuPTBdPSJIaWRkZW4iLGVbZS5CbGluaz0xXT0iQmxpbmsiLGVbZS5TbW9vdGg9Ml09IlNtb290aCIsZVtlLlBoYXNlPTNdPSJQaGFzZSIsZVtlLkV4cGFuZD00XT0iRXhwYW5kIixlW2UuU29saWQ9NV09IlNvbGlkIn0pKExyfHwoTHI9e30pKTt2YXIgTnI7KGZ1bmN0aW9uKGUpe2VbZS5MaW5lPTFdPSJMaW5lIixlW2UuQmxvY2s9Ml09IkJsb2NrIixlW2UuVW5kZXJsaW5lPTNdPSJVbmRlcmxpbmUiLGVbZS5MaW5lVGhpbj00XT0iTGluZVRoaW4iLGVbZS5CbG9ja091dGxpbmU9NV09IkJsb2NrT3V0bGluZSIsZVtlLlVuZGVybGluZVRoaW49Nl09IlVuZGVybGluZVRoaW4ifSkoTnJ8fChOcj17fSkpO3ZhciBTcjsoZnVuY3Rpb24oZSl7ZVtlLkFsd2F5c0dyb3dzV2hlblR5cGluZ0F0RWRnZXM9MF09IkFsd2F5c0dyb3dzV2hlblR5cGluZ0F0RWRnZXMiLGVbZS5OZXZlckdyb3dzV2hlblR5cGluZ0F0RWRnZXM9MV09Ik5ldmVyR3Jvd3NXaGVuVHlwaW5nQXRFZGdlcyIsZVtlLkdyb3dzT25seVdoZW5UeXBpbmdCZWZvcmU9Ml09Ikdyb3dzT25seVdoZW5UeXBpbmdCZWZvcmUiLGVbZS5Hcm93c09ubHlXaGVuVHlwaW5nQWZ0ZXI9M109Ikdyb3dzT25seVdoZW5UeXBpbmdBZnRlciJ9KShTcnx8KFNyPXt9KSk7dmFyIENyOyhmdW5jdGlvbihlKXtlW2UuTm9uZT0wXT0iTm9uZSIsZVtlLlNhbWU9MV09IlNhbWUiLGVbZS5JbmRlbnQ9Ml09IkluZGVudCIsZVtlLkRlZXBJbmRlbnQ9M109IkRlZXBJbmRlbnQifSkoQ3J8fChDcj17fSkpO2NsYXNzIE9le3N0YXRpYyBjaG9yZCh0LG4pe3JldHVybiB5aSh0LG4pfX1PZS5DdHJsQ21kPTIwNDgsT2UuU2hpZnQ9MTAyNCxPZS5BbHQ9NTEyLE9lLldpbkN0cmw9MjU2O2Z1bmN0aW9uIERpKCl7cmV0dXJue2VkaXRvcjp2b2lkIDAsbGFuZ3VhZ2VzOnZvaWQgMCxDYW5jZWxsYXRpb25Ub2tlblNvdXJjZTpTaSxFbWl0dGVyOnNlLEtleUNvZGU6VXQsS2V5TW9kOk9lLFBvc2l0aW9uOkosUmFuZ2U6RixTZWxlY3Rpb246dGUsU2VsZWN0aW9uRGlyZWN0aW9uOnp0LE1hcmtlclNldmVyaXR5Okh0LE1hcmtlclRhZzpXdCxVcmk6U2UsVG9rZW46UGl9fXZhciBBcjtjbGFzcyBUaXtjb25zdHJ1Y3Rvcigpe3RoaXNbQXJdPSJMaW5rZWRNYXAiLHRoaXMuX21hcD1uZXcgTWFwLHRoaXMuX2hlYWQ9dm9pZCAwLHRoaXMuX3RhaWw9dm9pZCAwLHRoaXMuX3NpemU9MCx0aGlzLl9zdGF0ZT0wfWNsZWFyKCl7dGhpcy5fbWFwLmNsZWFyKCksdGhpcy5faGVhZD12b2lkIDAsdGhpcy5fdGFpbD12b2lkIDAsdGhpcy5fc2l6ZT0wLHRoaXMuX3N0YXRlKyt9aXNFbXB0eSgpe3JldHVybiF0aGlzLl9oZWFkJiYhdGhpcy5fdGFpbH1nZXQgc2l6ZSgpe3JldHVybiB0aGlzLl9zaXplfWdldCBmaXJzdCgpe3ZhciB0O3JldHVybih0PXRoaXMuX2hlYWQpPT09bnVsbHx8dD09PXZvaWQgMD92b2lkIDA6dC52YWx1ZX1nZXQgbGFzdCgpe3ZhciB0O3JldHVybih0PXRoaXMuX3RhaWwpPT09bnVsbHx8dD09PXZvaWQgMD92b2lkIDA6dC52YWx1ZX1oYXModCl7cmV0dXJuIHRoaXMuX21hcC5oYXModCl9Z2V0KHQsbj0wKXtjb25zdCByPXRoaXMuX21hcC5nZXQodCk7aWYocilyZXR1cm4gbiE9PTAmJnRoaXMudG91Y2gocixuKSxyLnZhbHVlfXNldCh0LG4scj0wKXtsZXQgcz10aGlzLl9tYXAuZ2V0KHQpO2lmKHMpcy52YWx1ZT1uLHIhPT0wJiZ0aGlzLnRvdWNoKHMscik7ZWxzZXtzd2l0Y2gocz17a2V5OnQsdmFsdWU6bixuZXh0OnZvaWQgMCxwcmV2aW91czp2b2lkIDB9LHIpe2Nhc2UgMDp0aGlzLmFkZEl0ZW1MYXN0KHMpO2JyZWFrO2Nhc2UgMTp0aGlzLmFkZEl0ZW1GaXJzdChzKTticmVhaztjYXNlIDI6dGhpcy5hZGRJdGVtTGFzdChzKTticmVhaztkZWZhdWx0OnRoaXMuYWRkSXRlbUxhc3Qocyk7YnJlYWt9dGhpcy5fbWFwLnNldCh0LHMpLHRoaXMuX3NpemUrK31yZXR1cm4gdGhpc31kZWxldGUodCl7cmV0dXJuISF0aGlzLnJlbW92ZSh0KX1yZW1vdmUodCl7Y29uc3Qgbj10aGlzLl9tYXAuZ2V0KHQpO2lmKG4pcmV0dXJuIHRoaXMuX21hcC5kZWxldGUodCksdGhpcy5yZW1vdmVJdGVtKG4pLHRoaXMuX3NpemUtLSxuLnZhbHVlfXNoaWZ0KCl7aWYoIXRoaXMuX2hlYWQmJiF0aGlzLl90YWlsKXJldHVybjtpZighdGhpcy5faGVhZHx8IXRoaXMuX3RhaWwpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIGxpc3QiKTtjb25zdCB0PXRoaXMuX2hlYWQ7cmV0dXJuIHRoaXMuX21hcC5kZWxldGUodC5rZXkpLHRoaXMucmVtb3ZlSXRlbSh0KSx0aGlzLl9zaXplLS0sdC52YWx1ZX1mb3JFYWNoKHQsbil7Y29uc3Qgcj10aGlzLl9zdGF0ZTtsZXQgcz10aGlzLl9oZWFkO2Zvcig7czspe2lmKG4/dC5iaW5kKG4pKHMudmFsdWUscy5rZXksdGhpcyk6dChzLnZhbHVlLHMua2V5LHRoaXMpLHRoaXMuX3N0YXRlIT09cil0aHJvdyBuZXcgRXJyb3IoIkxpbmtlZE1hcCBnb3QgbW9kaWZpZWQgZHVyaW5nIGl0ZXJhdGlvbi4iKTtzPXMubmV4dH19a2V5cygpe2NvbnN0IHQ9dGhpcyxuPXRoaXMuX3N0YXRlO2xldCByPXRoaXMuX2hlYWQ7Y29uc3Qgcz17W1N5bWJvbC5pdGVyYXRvcl0oKXtyZXR1cm4gc30sbmV4dCgpe2lmKHQuX3N0YXRlIT09bil0aHJvdyBuZXcgRXJyb3IoIkxpbmtlZE1hcCBnb3QgbW9kaWZpZWQgZHVyaW5nIGl0ZXJhdGlvbi4iKTtpZihyKXtjb25zdCBpPXt2YWx1ZTpyLmtleSxkb25lOiExfTtyZXR1cm4gcj1yLm5leHQsaX1lbHNlIHJldHVybnt2YWx1ZTp2b2lkIDAsZG9uZTohMH19fTtyZXR1cm4gc312YWx1ZXMoKXtjb25zdCB0PXRoaXMsbj10aGlzLl9zdGF0ZTtsZXQgcj10aGlzLl9oZWFkO2NvbnN0IHM9e1tTeW1ib2wuaXRlcmF0b3JdKCl7cmV0dXJuIHN9LG5leHQoKXtpZih0Ll9zdGF0ZSE9PW4pdGhyb3cgbmV3IEVycm9yKCJMaW5rZWRNYXAgZ290IG1vZGlmaWVkIGR1cmluZyBpdGVyYXRpb24uIik7aWYocil7Y29uc3QgaT17dmFsdWU6ci52YWx1ZSxkb25lOiExfTtyZXR1cm4gcj1yLm5leHQsaX1lbHNlIHJldHVybnt2YWx1ZTp2b2lkIDAsZG9uZTohMH19fTtyZXR1cm4gc31lbnRyaWVzKCl7Y29uc3QgdD10aGlzLG49dGhpcy5fc3RhdGU7bGV0IHI9dGhpcy5faGVhZDtjb25zdCBzPXtbU3ltYm9sLml0ZXJhdG9yXSgpe3JldHVybiBzfSxuZXh0KCl7aWYodC5fc3RhdGUhPT1uKXRocm93IG5ldyBFcnJvcigiTGlua2VkTWFwIGdvdCBtb2RpZmllZCBkdXJpbmcgaXRlcmF0aW9uLiIpO2lmKHIpe2NvbnN0IGk9e3ZhbHVlOltyLmtleSxyLnZhbHVlXSxkb25lOiExfTtyZXR1cm4gcj1yLm5leHQsaX1lbHNlIHJldHVybnt2YWx1ZTp2b2lkIDAsZG9uZTohMH19fTtyZXR1cm4gc31bKEFyPVN5bWJvbC50b1N0cmluZ1RhZyxTeW1ib2wuaXRlcmF0b3IpXSgpe3JldHVybiB0aGlzLmVudHJpZXMoKX10cmltT2xkKHQpe2lmKHQ+PXRoaXMuc2l6ZSlyZXR1cm47aWYodD09PTApe3RoaXMuY2xlYXIoKTtyZXR1cm59bGV0IG49dGhpcy5faGVhZCxyPXRoaXMuc2l6ZTtmb3IoO24mJnI+dDspdGhpcy5fbWFwLmRlbGV0ZShuLmtleSksbj1uLm5leHQsci0tO3RoaXMuX2hlYWQ9bix0aGlzLl9zaXplPXIsbiYmKG4ucHJldmlvdXM9dm9pZCAwKSx0aGlzLl9zdGF0ZSsrfXRyaW1OZXcodCl7aWYodD49dGhpcy5zaXplKXJldHVybjtpZih0PT09MCl7dGhpcy5jbGVhcigpO3JldHVybn1sZXQgbj10aGlzLl90YWlsLHI9dGhpcy5zaXplO2Zvcig7biYmcj50Oyl0aGlzLl9tYXAuZGVsZXRlKG4ua2V5KSxuPW4ucHJldmlvdXMsci0tO3RoaXMuX3RhaWw9bix0aGlzLl9zaXplPXIsbiYmKG4ubmV4dD12b2lkIDApLHRoaXMuX3N0YXRlKyt9YWRkSXRlbUZpcnN0KHQpe2lmKCF0aGlzLl9oZWFkJiYhdGhpcy5fdGFpbCl0aGlzLl90YWlsPXQ7ZWxzZSBpZih0aGlzLl9oZWFkKXQubmV4dD10aGlzLl9oZWFkLHRoaXMuX2hlYWQucHJldmlvdXM9dDtlbHNlIHRocm93IG5ldyBFcnJvcigiSW52YWxpZCBsaXN0Iik7dGhpcy5faGVhZD10LHRoaXMuX3N0YXRlKyt9YWRkSXRlbUxhc3QodCl7aWYoIXRoaXMuX2hlYWQmJiF0aGlzLl90YWlsKXRoaXMuX2hlYWQ9dDtlbHNlIGlmKHRoaXMuX3RhaWwpdC5wcmV2aW91cz10aGlzLl90YWlsLHRoaXMuX3RhaWwubmV4dD10O2Vsc2UgdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIGxpc3QiKTt0aGlzLl90YWlsPXQsdGhpcy5fc3RhdGUrK31yZW1vdmVJdGVtKHQpe2lmKHQ9PT10aGlzLl9oZWFkJiZ0PT09dGhpcy5fdGFpbCl0aGlzLl9oZWFkPXZvaWQgMCx0aGlzLl90YWlsPXZvaWQgMDtlbHNlIGlmKHQ9PT10aGlzLl9oZWFkKXtpZighdC5uZXh0KXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBsaXN0Iik7dC5uZXh0LnByZXZpb3VzPXZvaWQgMCx0aGlzLl9oZWFkPXQubmV4dH1lbHNlIGlmKHQ9PT10aGlzLl90YWlsKXtpZighdC5wcmV2aW91cyl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgbGlzdCIpO3QucHJldmlvdXMubmV4dD12b2lkIDAsdGhpcy5fdGFpbD10LnByZXZpb3VzfWVsc2V7Y29uc3Qgbj10Lm5leHQscj10LnByZXZpb3VzO2lmKCFufHwhcil0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgbGlzdCIpO24ucHJldmlvdXM9cixyLm5leHQ9bn10Lm5leHQ9dm9pZCAwLHQucHJldmlvdXM9dm9pZCAwLHRoaXMuX3N0YXRlKyt9dG91Y2godCxuKXtpZighdGhpcy5faGVhZHx8IXRoaXMuX3RhaWwpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIGxpc3QiKTtpZighKG4hPT0xJiZuIT09Mikpe2lmKG49PT0xKXtpZih0PT09dGhpcy5faGVhZClyZXR1cm47Y29uc3Qgcj10Lm5leHQscz10LnByZXZpb3VzO3Q9PT10aGlzLl90YWlsPyhzLm5leHQ9dm9pZCAwLHRoaXMuX3RhaWw9cyk6KHIucHJldmlvdXM9cyxzLm5leHQ9ciksdC5wcmV2aW91cz12b2lkIDAsdC5uZXh0PXRoaXMuX2hlYWQsdGhpcy5faGVhZC5wcmV2aW91cz10LHRoaXMuX2hlYWQ9dCx0aGlzLl9zdGF0ZSsrfWVsc2UgaWYobj09PTIpe2lmKHQ9PT10aGlzLl90YWlsKXJldHVybjtjb25zdCByPXQubmV4dCxzPXQucHJldmlvdXM7dD09PXRoaXMuX2hlYWQ/KHIucHJldmlvdXM9dm9pZCAwLHRoaXMuX2hlYWQ9cik6KHIucHJldmlvdXM9cyxzLm5leHQ9ciksdC5uZXh0PXZvaWQgMCx0LnByZXZpb3VzPXRoaXMuX3RhaWwsdGhpcy5fdGFpbC5uZXh0PXQsdGhpcy5fdGFpbD10LHRoaXMuX3N0YXRlKyt9fX10b0pTT04oKXtjb25zdCB0PVtdO3JldHVybiB0aGlzLmZvckVhY2goKG4scik9Pnt0LnB1c2goW3Isbl0pfSksdH1mcm9tSlNPTih0KXt0aGlzLmNsZWFyKCk7Zm9yKGNvbnN0W24scl1vZiB0KXRoaXMuc2V0KG4scil9fWNsYXNzIFZpIGV4dGVuZHMgVGl7Y29uc3RydWN0b3IodCxuPTEpe3N1cGVyKCksdGhpcy5fbGltaXQ9dCx0aGlzLl9yYXRpbz1NYXRoLm1pbihNYXRoLm1heCgwLG4pLDEpfWdldCBsaW1pdCgpe3JldHVybiB0aGlzLl9saW1pdH1zZXQgbGltaXQodCl7dGhpcy5fbGltaXQ9dCx0aGlzLmNoZWNrVHJpbSgpfWdldCh0LG49Mil7cmV0dXJuIHN1cGVyLmdldCh0LG4pfXBlZWsodCl7cmV0dXJuIHN1cGVyLmdldCh0LDApfXNldCh0LG4pe3JldHVybiBzdXBlci5zZXQodCxuLDIpLHRoaXN9Y2hlY2tUcmltKCl7dGhpcy5zaXplPnRoaXMuX2xpbWl0JiZ0aGlzLnRyaW0oTWF0aC5yb3VuZCh0aGlzLl9saW1pdCp0aGlzLl9yYXRpbykpfX1jbGFzcyBJaSBleHRlbmRzIFZpe2NvbnN0cnVjdG9yKHQsbj0xKXtzdXBlcih0LG4pfXRyaW0odCl7dGhpcy50cmltT2xkKHQpfXNldCh0LG4pe3JldHVybiBzdXBlci5zZXQodCxuKSx0aGlzLmNoZWNrVHJpbSgpLHRoaXN9fWNsYXNzIEJpe2NvbnN0cnVjdG9yKCl7dGhpcy5tYXA9bmV3IE1hcH1hZGQodCxuKXtsZXQgcj10aGlzLm1hcC5nZXQodCk7cnx8KHI9bmV3IFNldCx0aGlzLm1hcC5zZXQodCxyKSksci5hZGQobil9ZGVsZXRlKHQsbil7Y29uc3Qgcj10aGlzLm1hcC5nZXQodCk7ciYmKHIuZGVsZXRlKG4pLHIuc2l6ZT09PTAmJnRoaXMubWFwLmRlbGV0ZSh0KSl9Zm9yRWFjaCh0LG4pe2NvbnN0IHI9dGhpcy5tYXAuZ2V0KHQpO3ImJnIuZm9yRWFjaChuKX1nZXQodCl7Y29uc3Qgbj10aGlzLm1hcC5nZXQodCk7cmV0dXJuIG58fG5ldyBTZXR9fW5ldyBJaSgxMCk7dmFyIFJyOyhmdW5jdGlvbihlKXtlW2UuTGVmdD0xXT0iTGVmdCIsZVtlLkNlbnRlcj0yXT0iQ2VudGVyIixlW2UuUmlnaHQ9NF09IlJpZ2h0IixlW2UuRnVsbD03XT0iRnVsbCJ9KShScnx8KFJyPXt9KSk7dmFyIHlyOyhmdW5jdGlvbihlKXtlW2UuTGVmdD0xXT0iTGVmdCIsZVtlLkNlbnRlcj0yXT0iQ2VudGVyIixlW2UuUmlnaHQ9M109IlJpZ2h0In0pKHlyfHwoeXI9e30pKTt2YXIgRXI7KGZ1bmN0aW9uKGUpe2VbZS5Cb3RoPTBdPSJCb3RoIixlW2UuUmlnaHQ9MV09IlJpZ2h0IixlW2UuTGVmdD0yXT0iTGVmdCIsZVtlLk5vbmU9M109Ik5vbmUifSkoRXJ8fChFcj17fSkpO2Z1bmN0aW9uIHFpKGUsdCxuLHIscyl7aWYocj09PTApcmV0dXJuITA7Y29uc3QgaT10LmNoYXJDb2RlQXQoci0xKTtpZihlLmdldChpKSE9PTB8fGk9PT0xM3x8aT09PTEwKXJldHVybiEwO2lmKHM+MCl7Y29uc3Qgbz10LmNoYXJDb2RlQXQocik7aWYoZS5nZXQobykhPT0wKXJldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIFVpKGUsdCxuLHIscyl7aWYocitzPT09bilyZXR1cm4hMDtjb25zdCBpPXQuY2hhckNvZGVBdChyK3MpO2lmKGUuZ2V0KGkpIT09MHx8aT09PTEzfHxpPT09MTApcmV0dXJuITA7aWYocz4wKXtjb25zdCBvPXQuY2hhckNvZGVBdChyK3MtMSk7aWYoZS5nZXQobykhPT0wKXJldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIEhpKGUsdCxuLHIscyl7cmV0dXJuIHFpKGUsdCxuLHIscykmJlVpKGUsdCxuLHIscyl9Y2xhc3MgV2l7Y29uc3RydWN0b3IodCxuKXt0aGlzLl93b3JkU2VwYXJhdG9ycz10LHRoaXMuX3NlYXJjaFJlZ2V4PW4sdGhpcy5fcHJldk1hdGNoU3RhcnRJbmRleD0tMSx0aGlzLl9wcmV2TWF0Y2hMZW5ndGg9MH1yZXNldCh0KXt0aGlzLl9zZWFyY2hSZWdleC5sYXN0SW5kZXg9dCx0aGlzLl9wcmV2TWF0Y2hTdGFydEluZGV4PS0xLHRoaXMuX3ByZXZNYXRjaExlbmd0aD0wfW5leHQodCl7Y29uc3Qgbj10Lmxlbmd0aDtsZXQgcjtkb3tpZih0aGlzLl9wcmV2TWF0Y2hTdGFydEluZGV4K3RoaXMuX3ByZXZNYXRjaExlbmd0aD09PW58fChyPXRoaXMuX3NlYXJjaFJlZ2V4LmV4ZWModCksIXIpKXJldHVybiBudWxsO2NvbnN0IHM9ci5pbmRleCxpPXJbMF0ubGVuZ3RoO2lmKHM9PT10aGlzLl9wcmV2TWF0Y2hTdGFydEluZGV4JiZpPT09dGhpcy5fcHJldk1hdGNoTGVuZ3RoKXtpZihpPT09MCl7a3ModCxuLHRoaXMuX3NlYXJjaFJlZ2V4Lmxhc3RJbmRleCk+NjU1MzU/dGhpcy5fc2VhcmNoUmVnZXgubGFzdEluZGV4Kz0yOnRoaXMuX3NlYXJjaFJlZ2V4Lmxhc3RJbmRleCs9MTtjb250aW51ZX1yZXR1cm4gbnVsbH1pZih0aGlzLl9wcmV2TWF0Y2hTdGFydEluZGV4PXMsdGhpcy5fcHJldk1hdGNoTGVuZ3RoPWksIXRoaXMuX3dvcmRTZXBhcmF0b3JzfHxIaSh0aGlzLl93b3JkU2VwYXJhdG9ycyx0LG4scyxpKSlyZXR1cm4gcn13aGlsZShyKTtyZXR1cm4gbnVsbH19ZnVuY3Rpb24gemkoZSx0PSJVbnJlYWNoYWJsZSIpe3Rocm93IG5ldyBFcnJvcih0KX1mdW5jdGlvbiBmdChlKXtpZighZSgpKXtkZWJ1Z2dlcjtlKCksWmUobmV3IGxlKCJBc3NlcnRpb24gRmFpbGVkIikpfX1mdW5jdGlvbiBNcihlLHQpe2xldCBuPTA7Zm9yKDtuPGUubGVuZ3RoLTE7KXtjb25zdCByPWVbbl0scz1lW24rMV07aWYoIXQocixzKSlyZXR1cm4hMTtuKyt9cmV0dXJuITB9Y2xhc3MgJGl7c3RhdGljIGNvbXB1dGVVbmljb2RlSGlnaGxpZ2h0cyh0LG4scil7Y29uc3Qgcz1yP3Iuc3RhcnRMaW5lTnVtYmVyOjEsaT1yP3IuZW5kTGluZU51bWJlcjp0LmdldExpbmVDb3VudCgpLG89bmV3IGtyKG4pLGw9by5nZXRDYW5kaWRhdGVDb2RlUG9pbnRzKCk7bGV0IHU7bD09PSJhbGxOb25CYXNpY0FzY2lpIj91PW5ldyBSZWdFeHAoIlteXFx0XFxuXFxyXFx4MjAtXFx4N0VdIiwiZyIpOnU9bmV3IFJlZ0V4cChgJHtPaShBcnJheS5mcm9tKGwpKX1gLCJnIik7Y29uc3QgYz1uZXcgV2kobnVsbCx1KSxmPVtdO2xldCBoPSExLGQsbT0wLGc9MCx4PTA7ZTpmb3IobGV0IHY9cyxMPWk7djw9TDt2Kyspe2NvbnN0IFM9dC5nZXRMaW5lQ29udGVudCh2KSxfPVMubGVuZ3RoO2MucmVzZXQoMCk7ZG8gaWYoZD1jLm5leHQoUyksZCl7bGV0IE49ZC5pbmRleCxwPWQuaW5kZXgrZFswXS5sZW5ndGg7aWYoTj4wKXtjb25zdCBxPVMuY2hhckNvZGVBdChOLTEpO3l0KHEpJiZOLS19aWYocCsxPF8pe2NvbnN0IHE9Uy5jaGFyQ29kZUF0KHAtMSk7eXQocSkmJnArK31jb25zdCBSPVMuc3Vic3RyaW5nKE4scCk7bGV0IHk9UHQoTisxLHZuLFMsMCk7eSYmeS5lbmRDb2x1bW48PU4rMSYmKHk9bnVsbCk7Y29uc3QgRT1vLnNob3VsZEhpZ2hsaWdodE5vbkJhc2ljQVNDSUkoUix5P3kud29yZDpudWxsKTtpZihFIT09MCl7aWYoRT09PTM/bSsrOkU9PT0yP2crKzpFPT09MT94Kys6emkoKSxmLmxlbmd0aD49MWUzKXtoPSEwO2JyZWFrIGV9Zi5wdXNoKG5ldyBGKHYsTisxLHYscCsxKSl9fXdoaWxlKGQpfXJldHVybntyYW5nZXM6ZixoYXNNb3JlOmgsYW1iaWd1b3VzQ2hhcmFjdGVyQ291bnQ6bSxpbnZpc2libGVDaGFyYWN0ZXJDb3VudDpnLG5vbkJhc2ljQXNjaWlDaGFyYWN0ZXJDb3VudDp4fX1zdGF0aWMgY29tcHV0ZVVuaWNvZGVIaWdobGlnaHRSZWFzb24odCxuKXtjb25zdCByPW5ldyBrcihuKTtzd2l0Y2goci5zaG91bGRIaWdobGlnaHROb25CYXNpY0FTQ0lJKHQsbnVsbCkpe2Nhc2UgMDpyZXR1cm4gbnVsbDtjYXNlIDI6cmV0dXJue2tpbmQ6MX07Y2FzZSAzOntjb25zdCBpPXQuY29kZVBvaW50QXQoMCksbz1yLmFtYmlndW91c0NoYXJhY3RlcnMuZ2V0UHJpbWFyeUNvbmZ1c2FibGUoaSksbD1OZS5nZXRMb2NhbGVzKCkuZmlsdGVyKHU9PiFOZS5nZXRJbnN0YW5jZShuZXcgU2V0KFsuLi5uLmFsbG93ZWRMb2NhbGVzLHVdKSkuaXNBbWJpZ3VvdXMoaSkpO3JldHVybntraW5kOjAsY29uZnVzYWJsZVdpdGg6U3RyaW5nLmZyb21Db2RlUG9pbnQobyksbm90QW1iaWd1b3VzSW5Mb2NhbGVzOmx9fWNhc2UgMTpyZXR1cm57a2luZDoyfX19fWZ1bmN0aW9uIE9pKGUsdCl7cmV0dXJuYFske0NzKGUubWFwKHI9PlN0cmluZy5mcm9tQ29kZVBvaW50KHIpKS5qb2luKCIiKSl9XWB9Y2xhc3Mga3J7Y29uc3RydWN0b3IodCl7dGhpcy5vcHRpb25zPXQsdGhpcy5hbGxvd2VkQ29kZVBvaW50cz1uZXcgU2V0KHQuYWxsb3dlZENvZGVQb2ludHMpLHRoaXMuYW1iaWd1b3VzQ2hhcmFjdGVycz1OZS5nZXRJbnN0YW5jZShuZXcgU2V0KHQuYWxsb3dlZExvY2FsZXMpKX1nZXRDYW5kaWRhdGVDb2RlUG9pbnRzKCl7aWYodGhpcy5vcHRpb25zLm5vbkJhc2ljQVNDSUkpcmV0dXJuImFsbE5vbkJhc2ljQXNjaWkiO2NvbnN0IHQ9bmV3IFNldDtpZih0aGlzLm9wdGlvbnMuaW52aXNpYmxlQ2hhcmFjdGVycylmb3IoY29uc3QgbiBvZiBkZS5jb2RlUG9pbnRzKUZyKFN0cmluZy5mcm9tQ29kZVBvaW50KG4pKXx8dC5hZGQobik7aWYodGhpcy5vcHRpb25zLmFtYmlndW91c0NoYXJhY3RlcnMpZm9yKGNvbnN0IG4gb2YgdGhpcy5hbWJpZ3VvdXNDaGFyYWN0ZXJzLmdldENvbmZ1c2FibGVDb2RlUG9pbnRzKCkpdC5hZGQobik7Zm9yKGNvbnN0IG4gb2YgdGhpcy5hbGxvd2VkQ29kZVBvaW50cyl0LmRlbGV0ZShuKTtyZXR1cm4gdH1zaG91bGRIaWdobGlnaHROb25CYXNpY0FTQ0lJKHQsbil7Y29uc3Qgcj10LmNvZGVQb2ludEF0KDApO2lmKHRoaXMuYWxsb3dlZENvZGVQb2ludHMuaGFzKHIpKXJldHVybiAwO2lmKHRoaXMub3B0aW9ucy5ub25CYXNpY0FTQ0lJKXJldHVybiAxO2xldCBzPSExLGk9ITE7aWYobilmb3IoY29uc3QgbyBvZiBuKXtjb25zdCBsPW8uY29kZVBvaW50QXQoMCksdT1QcyhvKTtzPXN8fHUsIXUmJiF0aGlzLmFtYmlndW91c0NoYXJhY3RlcnMuaXNBbWJpZ3VvdXMobCkmJiFkZS5pc0ludmlzaWJsZUNoYXJhY3RlcihsKSYmKGk9ITApfXJldHVybiFzJiZpPzA6dGhpcy5vcHRpb25zLmludmlzaWJsZUNoYXJhY3RlcnMmJiFGcih0KSYmZGUuaXNJbnZpc2libGVDaGFyYWN0ZXIocik/Mjp0aGlzLm9wdGlvbnMuYW1iaWd1b3VzQ2hhcmFjdGVycyYmdGhpcy5hbWJpZ3VvdXNDaGFyYWN0ZXJzLmlzQW1iaWd1b3VzKHIpPzM6MH19ZnVuY3Rpb24gRnIoZSl7cmV0dXJuIGU9PT0iICJ8fGU9PT1gCmB8fGU9PT0iCSJ9Y2xhc3MgZHR7Y29uc3RydWN0b3IodCxuLHIpe3RoaXMuY2hhbmdlcz10LHRoaXMubW92ZXM9bix0aGlzLmhpdFRpbWVvdXQ9cn19Y2xhc3MgR2l7Y29uc3RydWN0b3IodCxuKXt0aGlzLmxpbmVSYW5nZU1hcHBpbmc9dCx0aGlzLmNoYW5nZXM9bn19Y2xhc3MgVntzdGF0aWMgYWRkUmFuZ2UodCxuKXtsZXQgcj0wO2Zvcig7cjxuLmxlbmd0aCYmbltyXS5lbmRFeGNsdXNpdmU8dC5zdGFydDspcisrO2xldCBzPXI7Zm9yKDtzPG4ubGVuZ3RoJiZuW3NdLnN0YXJ0PD10LmVuZEV4Y2x1c2l2ZTspcysrO2lmKHI9PT1zKW4uc3BsaWNlKHIsMCx0KTtlbHNle2NvbnN0IGk9TWF0aC5taW4odC5zdGFydCxuW3JdLnN0YXJ0KSxvPU1hdGgubWF4KHQuZW5kRXhjbHVzaXZlLG5bcy0xXS5lbmRFeGNsdXNpdmUpO24uc3BsaWNlKHIscy1yLG5ldyBWKGksbykpfX1zdGF0aWMgdHJ5Q3JlYXRlKHQsbil7aWYoISh0Pm4pKXJldHVybiBuZXcgVih0LG4pfXN0YXRpYyBvZkxlbmd0aCh0KXtyZXR1cm4gbmV3IFYoMCx0KX1zdGF0aWMgb2ZTdGFydEFuZExlbmd0aCh0LG4pe3JldHVybiBuZXcgVih0LHQrbil9Y29uc3RydWN0b3IodCxuKXtpZih0aGlzLnN0YXJ0PXQsdGhpcy5lbmRFeGNsdXNpdmU9bix0Pm4pdGhyb3cgbmV3IGxlKGBJbnZhbGlkIHJhbmdlOiAke3RoaXMudG9TdHJpbmcoKX1gKX1nZXQgaXNFbXB0eSgpe3JldHVybiB0aGlzLnN0YXJ0PT09dGhpcy5lbmRFeGNsdXNpdmV9ZGVsdGEodCl7cmV0dXJuIG5ldyBWKHRoaXMuc3RhcnQrdCx0aGlzLmVuZEV4Y2x1c2l2ZSt0KX1kZWx0YVN0YXJ0KHQpe3JldHVybiBuZXcgVih0aGlzLnN0YXJ0K3QsdGhpcy5lbmRFeGNsdXNpdmUpfWRlbHRhRW5kKHQpe3JldHVybiBuZXcgVih0aGlzLnN0YXJ0LHRoaXMuZW5kRXhjbHVzaXZlK3QpfWdldCBsZW5ndGgoKXtyZXR1cm4gdGhpcy5lbmRFeGNsdXNpdmUtdGhpcy5zdGFydH10b1N0cmluZygpe3JldHVybmBbJHt0aGlzLnN0YXJ0fSwgJHt0aGlzLmVuZEV4Y2x1c2l2ZX0pYH1jb250YWlucyh0KXtyZXR1cm4gdGhpcy5zdGFydDw9dCYmdDx0aGlzLmVuZEV4Y2x1c2l2ZX1qb2luKHQpe3JldHVybiBuZXcgVihNYXRoLm1pbih0aGlzLnN0YXJ0LHQuc3RhcnQpLE1hdGgubWF4KHRoaXMuZW5kRXhjbHVzaXZlLHQuZW5kRXhjbHVzaXZlKSl9aW50ZXJzZWN0KHQpe2NvbnN0IG49TWF0aC5tYXgodGhpcy5zdGFydCx0LnN0YXJ0KSxyPU1hdGgubWluKHRoaXMuZW5kRXhjbHVzaXZlLHQuZW5kRXhjbHVzaXZlKTtpZihuPD1yKXJldHVybiBuZXcgVihuLHIpfWludGVyc2VjdHModCl7Y29uc3Qgbj1NYXRoLm1heCh0aGlzLnN0YXJ0LHQuc3RhcnQpLHI9TWF0aC5taW4odGhpcy5lbmRFeGNsdXNpdmUsdC5lbmRFeGNsdXNpdmUpO3JldHVybiBuPHJ9aXNCZWZvcmUodCl7cmV0dXJuIHRoaXMuZW5kRXhjbHVzaXZlPD10LnN0YXJ0fWlzQWZ0ZXIodCl7cmV0dXJuIHRoaXMuc3RhcnQ+PXQuZW5kRXhjbHVzaXZlfXNsaWNlKHQpe3JldHVybiB0LnNsaWNlKHRoaXMuc3RhcnQsdGhpcy5lbmRFeGNsdXNpdmUpfXN1YnN0cmluZyh0KXtyZXR1cm4gdC5zdWJzdHJpbmcodGhpcy5zdGFydCx0aGlzLmVuZEV4Y2x1c2l2ZSl9Y2xpcCh0KXtpZih0aGlzLmlzRW1wdHkpdGhyb3cgbmV3IGxlKGBJbnZhbGlkIGNsaXBwaW5nIHJhbmdlOiAke3RoaXMudG9TdHJpbmcoKX1gKTtyZXR1cm4gTWF0aC5tYXgodGhpcy5zdGFydCxNYXRoLm1pbih0aGlzLmVuZEV4Y2x1c2l2ZS0xLHQpKX1jbGlwQ3ljbGljKHQpe2lmKHRoaXMuaXNFbXB0eSl0aHJvdyBuZXcgbGUoYEludmFsaWQgY2xpcHBpbmcgcmFuZ2U6ICR7dGhpcy50b1N0cmluZygpfWApO3JldHVybiB0PHRoaXMuc3RhcnQ/dGhpcy5lbmRFeGNsdXNpdmUtKHRoaXMuc3RhcnQtdCkldGhpcy5sZW5ndGg6dD49dGhpcy5lbmRFeGNsdXNpdmU/dGhpcy5zdGFydCsodC10aGlzLnN0YXJ0KSV0aGlzLmxlbmd0aDp0fWZvckVhY2godCl7Zm9yKGxldCBuPXRoaXMuc3RhcnQ7bjx0aGlzLmVuZEV4Y2x1c2l2ZTtuKyspdChuKX19ZnVuY3Rpb24gSWUoZSx0KXtjb25zdCBuPUdlKGUsdCk7cmV0dXJuIG49PT0tMT92b2lkIDA6ZVtuXX1mdW5jdGlvbiBHZShlLHQsbj0wLHI9ZS5sZW5ndGgpe2xldCBzPW4saT1yO2Zvcig7czxpOyl7Y29uc3Qgbz1NYXRoLmZsb29yKChzK2kpLzIpO3QoZVtvXSk/cz1vKzE6aT1vfXJldHVybiBzLTF9ZnVuY3Rpb24gamkoZSx0KXtjb25zdCBuPSR0KGUsdCk7cmV0dXJuIG49PT1lLmxlbmd0aD92b2lkIDA6ZVtuXX1mdW5jdGlvbiAkdChlLHQsbj0wLHI9ZS5sZW5ndGgpe2xldCBzPW4saT1yO2Zvcig7czxpOyl7Y29uc3Qgbz1NYXRoLmZsb29yKChzK2kpLzIpO3QoZVtvXSk/aT1vOnM9bysxfXJldHVybiBzfWNsYXNzIGple2NvbnN0cnVjdG9yKHQpe3RoaXMuX2FycmF5PXQsdGhpcy5fZmluZExhc3RNb25vdG9ub3VzTGFzdElkeD0wfWZpbmRMYXN0TW9ub3Rvbm91cyh0KXtpZihqZS5hc3NlcnRJbnZhcmlhbnRzKXtpZih0aGlzLl9wcmV2RmluZExhc3RQcmVkaWNhdGUpe2Zvcihjb25zdCByIG9mIHRoaXMuX2FycmF5KWlmKHRoaXMuX3ByZXZGaW5kTGFzdFByZWRpY2F0ZShyKSYmIXQocikpdGhyb3cgbmV3IEVycm9yKCJNb25vdG9ub3VzQXJyYXk6IGN1cnJlbnQgcHJlZGljYXRlIG11c3QgYmUgd2Vha2VyIHRoYW4gKG9yIGVxdWFsIHRvKSB0aGUgcHJldmlvdXMgcHJlZGljYXRlLiIpfXRoaXMuX3ByZXZGaW5kTGFzdFByZWRpY2F0ZT10fWNvbnN0IG49R2UodGhpcy5fYXJyYXksdCx0aGlzLl9maW5kTGFzdE1vbm90b25vdXNMYXN0SWR4KTtyZXR1cm4gdGhpcy5fZmluZExhc3RNb25vdG9ub3VzTGFzdElkeD1uKzEsbj09PS0xP3ZvaWQgMDp0aGlzLl9hcnJheVtuXX19amUuYXNzZXJ0SW52YXJpYW50cz0hMTtjbGFzcyBEe3N0YXRpYyBmcm9tUmFuZ2VJbmNsdXNpdmUodCl7cmV0dXJuIG5ldyBEKHQuc3RhcnRMaW5lTnVtYmVyLHQuZW5kTGluZU51bWJlcisxKX1zdGF0aWMgam9pbk1hbnkodCl7aWYodC5sZW5ndGg9PT0wKXJldHVybltdO2xldCBuPW5ldyBjZSh0WzBdLnNsaWNlKCkpO2ZvcihsZXQgcj0xO3I8dC5sZW5ndGg7cisrKW49bi5nZXRVbmlvbihuZXcgY2UodFtyXS5zbGljZSgpKSk7cmV0dXJuIG4ucmFuZ2VzfXN0YXRpYyBqb2luKHQpe2lmKHQubGVuZ3RoPT09MCl0aHJvdyBuZXcgbGUoImxpbmVSYW5nZXMgY2Fubm90IGJlIGVtcHR5Iik7bGV0IG49dFswXS5zdGFydExpbmVOdW1iZXIscj10WzBdLmVuZExpbmVOdW1iZXJFeGNsdXNpdmU7Zm9yKGxldCBzPTE7czx0Lmxlbmd0aDtzKyspbj1NYXRoLm1pbihuLHRbc10uc3RhcnRMaW5lTnVtYmVyKSxyPU1hdGgubWF4KHIsdFtzXS5lbmRMaW5lTnVtYmVyRXhjbHVzaXZlKTtyZXR1cm4gbmV3IEQobixyKX1zdGF0aWMgb2ZMZW5ndGgodCxuKXtyZXR1cm4gbmV3IEQodCx0K24pfXN0YXRpYyBkZXNlcmlhbGl6ZSh0KXtyZXR1cm4gbmV3IEQodFswXSx0WzFdKX1jb25zdHJ1Y3Rvcih0LG4pe2lmKHQ+bil0aHJvdyBuZXcgbGUoYHN0YXJ0TGluZU51bWJlciAke3R9IGNhbm5vdCBiZSBhZnRlciBlbmRMaW5lTnVtYmVyRXhjbHVzaXZlICR7bn1gKTt0aGlzLnN0YXJ0TGluZU51bWJlcj10LHRoaXMuZW5kTGluZU51bWJlckV4Y2x1c2l2ZT1ufWNvbnRhaW5zKHQpe3JldHVybiB0aGlzLnN0YXJ0TGluZU51bWJlcjw9dCYmdDx0aGlzLmVuZExpbmVOdW1iZXJFeGNsdXNpdmV9Z2V0IGlzRW1wdHkoKXtyZXR1cm4gdGhpcy5zdGFydExpbmVOdW1iZXI9PT10aGlzLmVuZExpbmVOdW1iZXJFeGNsdXNpdmV9ZGVsdGEodCl7cmV0dXJuIG5ldyBEKHRoaXMuc3RhcnRMaW5lTnVtYmVyK3QsdGhpcy5lbmRMaW5lTnVtYmVyRXhjbHVzaXZlK3QpfWRlbHRhTGVuZ3RoKHQpe3JldHVybiBuZXcgRCh0aGlzLnN0YXJ0TGluZU51bWJlcix0aGlzLmVuZExpbmVOdW1iZXJFeGNsdXNpdmUrdCl9Z2V0IGxlbmd0aCgpe3JldHVybiB0aGlzLmVuZExpbmVOdW1iZXJFeGNsdXNpdmUtdGhpcy5zdGFydExpbmVOdW1iZXJ9am9pbih0KXtyZXR1cm4gbmV3IEQoTWF0aC5taW4odGhpcy5zdGFydExpbmVOdW1iZXIsdC5zdGFydExpbmVOdW1iZXIpLE1hdGgubWF4KHRoaXMuZW5kTGluZU51bWJlckV4Y2x1c2l2ZSx0LmVuZExpbmVOdW1iZXJFeGNsdXNpdmUpKX10b1N0cmluZygpe3JldHVybmBbJHt0aGlzLnN0YXJ0TGluZU51bWJlcn0sJHt0aGlzLmVuZExpbmVOdW1iZXJFeGNsdXNpdmV9KWB9aW50ZXJzZWN0KHQpe2NvbnN0IG49TWF0aC5tYXgodGhpcy5zdGFydExpbmVOdW1iZXIsdC5zdGFydExpbmVOdW1iZXIpLHI9TWF0aC5taW4odGhpcy5lbmRMaW5lTnVtYmVyRXhjbHVzaXZlLHQuZW5kTGluZU51bWJlckV4Y2x1c2l2ZSk7aWYobjw9cilyZXR1cm4gbmV3IEQobixyKX1pbnRlcnNlY3RzU3RyaWN0KHQpe3JldHVybiB0aGlzLnN0YXJ0TGluZU51bWJlcjx0LmVuZExpbmVOdW1iZXJFeGNsdXNpdmUmJnQuc3RhcnRMaW5lTnVtYmVyPHRoaXMuZW5kTGluZU51bWJlckV4Y2x1c2l2ZX1vdmVybGFwT3JUb3VjaCh0KXtyZXR1cm4gdGhpcy5zdGFydExpbmVOdW1iZXI8PXQuZW5kTGluZU51bWJlckV4Y2x1c2l2ZSYmdC5zdGFydExpbmVOdW1iZXI8PXRoaXMuZW5kTGluZU51bWJlckV4Y2x1c2l2ZX1lcXVhbHModCl7cmV0dXJuIHRoaXMuc3RhcnRMaW5lTnVtYmVyPT09dC5zdGFydExpbmVOdW1iZXImJnRoaXMuZW5kTGluZU51bWJlckV4Y2x1c2l2ZT09PXQuZW5kTGluZU51bWJlckV4Y2x1c2l2ZX10b0luY2x1c2l2ZVJhbmdlKCl7cmV0dXJuIHRoaXMuaXNFbXB0eT9udWxsOm5ldyBGKHRoaXMuc3RhcnRMaW5lTnVtYmVyLDEsdGhpcy5lbmRMaW5lTnVtYmVyRXhjbHVzaXZlLTEsTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpfXRvRXhjbHVzaXZlUmFuZ2UoKXtyZXR1cm4gbmV3IEYodGhpcy5zdGFydExpbmVOdW1iZXIsMSx0aGlzLmVuZExpbmVOdW1iZXJFeGNsdXNpdmUsMSl9bWFwVG9MaW5lQXJyYXkodCl7Y29uc3Qgbj1bXTtmb3IobGV0IHI9dGhpcy5zdGFydExpbmVOdW1iZXI7cjx0aGlzLmVuZExpbmVOdW1iZXJFeGNsdXNpdmU7cisrKW4ucHVzaCh0KHIpKTtyZXR1cm4gbn1mb3JFYWNoKHQpe2ZvcihsZXQgbj10aGlzLnN0YXJ0TGluZU51bWJlcjtuPHRoaXMuZW5kTGluZU51bWJlckV4Y2x1c2l2ZTtuKyspdChuKX1zZXJpYWxpemUoKXtyZXR1cm5bdGhpcy5zdGFydExpbmVOdW1iZXIsdGhpcy5lbmRMaW5lTnVtYmVyRXhjbHVzaXZlXX1pbmNsdWRlcyh0KXtyZXR1cm4gdGhpcy5zdGFydExpbmVOdW1iZXI8PXQmJnQ8dGhpcy5lbmRMaW5lTnVtYmVyRXhjbHVzaXZlfXRvT2Zmc2V0UmFuZ2UoKXtyZXR1cm4gbmV3IFYodGhpcy5zdGFydExpbmVOdW1iZXItMSx0aGlzLmVuZExpbmVOdW1iZXJFeGNsdXNpdmUtMSl9fWNsYXNzIGNle2NvbnN0cnVjdG9yKHQ9W10pe3RoaXMuX25vcm1hbGl6ZWRSYW5nZXM9dH1nZXQgcmFuZ2VzKCl7cmV0dXJuIHRoaXMuX25vcm1hbGl6ZWRSYW5nZXN9YWRkUmFuZ2UodCl7aWYodC5sZW5ndGg9PT0wKXJldHVybjtjb25zdCBuPSR0KHRoaXMuX25vcm1hbGl6ZWRSYW5nZXMscz0+cy5lbmRMaW5lTnVtYmVyRXhjbHVzaXZlPj10LnN0YXJ0TGluZU51bWJlcikscj1HZSh0aGlzLl9ub3JtYWxpemVkUmFuZ2VzLHM9PnMuc3RhcnRMaW5lTnVtYmVyPD10LmVuZExpbmVOdW1iZXJFeGNsdXNpdmUpKzE7aWYobj09PXIpdGhpcy5fbm9ybWFsaXplZFJhbmdlcy5zcGxpY2UobiwwLHQpO2Vsc2UgaWYobj09PXItMSl7Y29uc3Qgcz10aGlzLl9ub3JtYWxpemVkUmFuZ2VzW25dO3RoaXMuX25vcm1hbGl6ZWRSYW5nZXNbbl09cy5qb2luKHQpfWVsc2V7Y29uc3Qgcz10aGlzLl9ub3JtYWxpemVkUmFuZ2VzW25dLmpvaW4odGhpcy5fbm9ybWFsaXplZFJhbmdlc1tyLTFdKS5qb2luKHQpO3RoaXMuX25vcm1hbGl6ZWRSYW5nZXMuc3BsaWNlKG4sci1uLHMpfX1jb250YWlucyh0KXtjb25zdCBuPUllKHRoaXMuX25vcm1hbGl6ZWRSYW5nZXMscj0+ci5zdGFydExpbmVOdW1iZXI8PXQpO3JldHVybiEhbiYmbi5lbmRMaW5lTnVtYmVyRXhjbHVzaXZlPnR9aW50ZXJzZWN0cyh0KXtjb25zdCBuPUllKHRoaXMuX25vcm1hbGl6ZWRSYW5nZXMscj0+ci5zdGFydExpbmVOdW1iZXI8dC5lbmRMaW5lTnVtYmVyRXhjbHVzaXZlKTtyZXR1cm4hIW4mJm4uZW5kTGluZU51bWJlckV4Y2x1c2l2ZT50LnN0YXJ0TGluZU51bWJlcn1nZXRVbmlvbih0KXtpZih0aGlzLl9ub3JtYWxpemVkUmFuZ2VzLmxlbmd0aD09PTApcmV0dXJuIHQ7aWYodC5fbm9ybWFsaXplZFJhbmdlcy5sZW5ndGg9PT0wKXJldHVybiB0aGlzO2NvbnN0IG49W107bGV0IHI9MCxzPTAsaT1udWxsO2Zvcig7cjx0aGlzLl9ub3JtYWxpemVkUmFuZ2VzLmxlbmd0aHx8czx0Ll9ub3JtYWxpemVkUmFuZ2VzLmxlbmd0aDspe2xldCBvPW51bGw7aWYocjx0aGlzLl9ub3JtYWxpemVkUmFuZ2VzLmxlbmd0aCYmczx0Ll9ub3JtYWxpemVkUmFuZ2VzLmxlbmd0aCl7Y29uc3QgbD10aGlzLl9ub3JtYWxpemVkUmFuZ2VzW3JdLHU9dC5fbm9ybWFsaXplZFJhbmdlc1tzXTtsLnN0YXJ0TGluZU51bWJlcjx1LnN0YXJ0TGluZU51bWJlcj8obz1sLHIrKyk6KG89dSxzKyspfWVsc2Ugcjx0aGlzLl9ub3JtYWxpemVkUmFuZ2VzLmxlbmd0aD8obz10aGlzLl9ub3JtYWxpemVkUmFuZ2VzW3JdLHIrKyk6KG89dC5fbm9ybWFsaXplZFJhbmdlc1tzXSxzKyspO2k9PT1udWxsP2k9bzppLmVuZExpbmVOdW1iZXJFeGNsdXNpdmU+PW8uc3RhcnRMaW5lTnVtYmVyP2k9bmV3IEQoaS5zdGFydExpbmVOdW1iZXIsTWF0aC5tYXgoaS5lbmRMaW5lTnVtYmVyRXhjbHVzaXZlLG8uZW5kTGluZU51bWJlckV4Y2x1c2l2ZSkpOihuLnB1c2goaSksaT1vKX1yZXR1cm4gaSE9PW51bGwmJm4ucHVzaChpKSxuZXcgY2Uobil9c3VidHJhY3RGcm9tKHQpe2NvbnN0IG49JHQodGhpcy5fbm9ybWFsaXplZFJhbmdlcyxvPT5vLmVuZExpbmVOdW1iZXJFeGNsdXNpdmU+PXQuc3RhcnRMaW5lTnVtYmVyKSxyPUdlKHRoaXMuX25vcm1hbGl6ZWRSYW5nZXMsbz0+by5zdGFydExpbmVOdW1iZXI8PXQuZW5kTGluZU51bWJlckV4Y2x1c2l2ZSkrMTtpZihuPT09cilyZXR1cm4gbmV3IGNlKFt0XSk7Y29uc3Qgcz1bXTtsZXQgaT10LnN0YXJ0TGluZU51bWJlcjtmb3IobGV0IG89bjtvPHI7bysrKXtjb25zdCBsPXRoaXMuX25vcm1hbGl6ZWRSYW5nZXNbb107bC5zdGFydExpbmVOdW1iZXI+aSYmcy5wdXNoKG5ldyBEKGksbC5zdGFydExpbmVOdW1iZXIpKSxpPWwuZW5kTGluZU51bWJlckV4Y2x1c2l2ZX1yZXR1cm4gaTx0LmVuZExpbmVOdW1iZXJFeGNsdXNpdmUmJnMucHVzaChuZXcgRChpLHQuZW5kTGluZU51bWJlckV4Y2x1c2l2ZSkpLG5ldyBjZShzKX10b1N0cmluZygpe3JldHVybiB0aGlzLl9ub3JtYWxpemVkUmFuZ2VzLm1hcCh0PT50LnRvU3RyaW5nKCkpLmpvaW4oIiwgIil9Z2V0SW50ZXJzZWN0aW9uKHQpe2NvbnN0IG49W107bGV0IHI9MCxzPTA7Zm9yKDtyPHRoaXMuX25vcm1hbGl6ZWRSYW5nZXMubGVuZ3RoJiZzPHQuX25vcm1hbGl6ZWRSYW5nZXMubGVuZ3RoOyl7Y29uc3QgaT10aGlzLl9ub3JtYWxpemVkUmFuZ2VzW3JdLG89dC5fbm9ybWFsaXplZFJhbmdlc1tzXSxsPWkuaW50ZXJzZWN0KG8pO2wmJiFsLmlzRW1wdHkmJm4ucHVzaChsKSxpLmVuZExpbmVOdW1iZXJFeGNsdXNpdmU8by5lbmRMaW5lTnVtYmVyRXhjbHVzaXZlP3IrKzpzKyt9cmV0dXJuIG5ldyBjZShuKX1nZXRXaXRoRGVsdGEodCl7cmV0dXJuIG5ldyBjZSh0aGlzLl9ub3JtYWxpemVkUmFuZ2VzLm1hcChuPT5uLmRlbHRhKHQpKSl9fWNsYXNzIFhpe2NvbnN0cnVjdG9yKHQsbil7dGhpcy5yYW5nZT10LHRoaXMudGV4dD1ufX1jbGFzcyBvZXtzdGF0aWMgaW52ZXJzZSh0LG4scil7Y29uc3Qgcz1bXTtsZXQgaT0xLG89MTtmb3IoY29uc3QgdSBvZiB0KXtjb25zdCBjPW5ldyBvZShuZXcgRChpLHUub3JpZ2luYWwuc3RhcnRMaW5lTnVtYmVyKSxuZXcgRChvLHUubW9kaWZpZWQuc3RhcnRMaW5lTnVtYmVyKSk7Yy5tb2RpZmllZC5pc0VtcHR5fHxzLnB1c2goYyksaT11Lm9yaWdpbmFsLmVuZExpbmVOdW1iZXJFeGNsdXNpdmUsbz11Lm1vZGlmaWVkLmVuZExpbmVOdW1iZXJFeGNsdXNpdmV9Y29uc3QgbD1uZXcgb2UobmV3IEQoaSxuKzEpLG5ldyBEKG8scisxKSk7cmV0dXJuIGwubW9kaWZpZWQuaXNFbXB0eXx8cy5wdXNoKGwpLHN9c3RhdGljIGNsaXAodCxuLHIpe2NvbnN0IHM9W107Zm9yKGNvbnN0IGkgb2YgdCl7Y29uc3Qgbz1pLm9yaWdpbmFsLmludGVyc2VjdChuKSxsPWkubW9kaWZpZWQuaW50ZXJzZWN0KHIpO28mJiFvLmlzRW1wdHkmJmwmJiFsLmlzRW1wdHkmJnMucHVzaChuZXcgb2UobyxsKSl9cmV0dXJuIHN9Y29uc3RydWN0b3IodCxuKXt0aGlzLm9yaWdpbmFsPXQsdGhpcy5tb2RpZmllZD1ufXRvU3RyaW5nKCl7cmV0dXJuYHske3RoaXMub3JpZ2luYWwudG9TdHJpbmcoKX0tPiR7dGhpcy5tb2RpZmllZC50b1N0cmluZygpfX1gfWZsaXAoKXtyZXR1cm4gbmV3IG9lKHRoaXMubW9kaWZpZWQsdGhpcy5vcmlnaW5hbCl9am9pbih0KXtyZXR1cm4gbmV3IG9lKHRoaXMub3JpZ2luYWwuam9pbih0Lm9yaWdpbmFsKSx0aGlzLm1vZGlmaWVkLmpvaW4odC5tb2RpZmllZCkpfXRvUmFuZ2VNYXBwaW5nKCl7Y29uc3QgdD10aGlzLm9yaWdpbmFsLnRvSW5jbHVzaXZlUmFuZ2UoKSxuPXRoaXMubW9kaWZpZWQudG9JbmNsdXNpdmVSYW5nZSgpO2lmKHQmJm4pcmV0dXJuIG5ldyB2ZSh0LG4pO2lmKHRoaXMub3JpZ2luYWwuc3RhcnRMaW5lTnVtYmVyPT09MXx8dGhpcy5tb2RpZmllZC5zdGFydExpbmVOdW1iZXI9PT0xKXtpZighKHRoaXMubW9kaWZpZWQuc3RhcnRMaW5lTnVtYmVyPT09MSYmdGhpcy5vcmlnaW5hbC5zdGFydExpbmVOdW1iZXI9PT0xKSl0aHJvdyBuZXcgbGUoIm5vdCBhIHZhbGlkIGRpZmYiKTtyZXR1cm4gbmV3IHZlKG5ldyBGKHRoaXMub3JpZ2luYWwuc3RhcnRMaW5lTnVtYmVyLDEsdGhpcy5vcmlnaW5hbC5lbmRMaW5lTnVtYmVyRXhjbHVzaXZlLDEpLG5ldyBGKHRoaXMubW9kaWZpZWQuc3RhcnRMaW5lTnVtYmVyLDEsdGhpcy5tb2RpZmllZC5lbmRMaW5lTnVtYmVyRXhjbHVzaXZlLDEpKX1lbHNlIHJldHVybiBuZXcgdmUobmV3IEYodGhpcy5vcmlnaW5hbC5zdGFydExpbmVOdW1iZXItMSxOdW1iZXIuTUFYX1NBRkVfSU5URUdFUix0aGlzLm9yaWdpbmFsLmVuZExpbmVOdW1iZXJFeGNsdXNpdmUtMSxOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiksbmV3IEYodGhpcy5tb2RpZmllZC5zdGFydExpbmVOdW1iZXItMSxOdW1iZXIuTUFYX1NBRkVfSU5URUdFUix0aGlzLm1vZGlmaWVkLmVuZExpbmVOdW1iZXJFeGNsdXNpdmUtMSxOdW1iZXIuTUFYX1NBRkVfSU5URUdFUikpfX1jbGFzcyBoZSBleHRlbmRzIG9le3N0YXRpYyBmcm9tUmFuZ2VNYXBwaW5ncyh0KXtjb25zdCBuPUQuam9pbih0Lm1hcChzPT5ELmZyb21SYW5nZUluY2x1c2l2ZShzLm9yaWdpbmFsUmFuZ2UpKSkscj1ELmpvaW4odC5tYXAocz0+RC5mcm9tUmFuZ2VJbmNsdXNpdmUocy5tb2RpZmllZFJhbmdlKSkpO3JldHVybiBuZXcgaGUobixyLHQpfWNvbnN0cnVjdG9yKHQsbixyKXtzdXBlcih0LG4pLHRoaXMuaW5uZXJDaGFuZ2VzPXJ9ZmxpcCgpe3ZhciB0O3JldHVybiBuZXcgaGUodGhpcy5tb2RpZmllZCx0aGlzLm9yaWdpbmFsLCh0PXRoaXMuaW5uZXJDaGFuZ2VzKT09PW51bGx8fHQ9PT12b2lkIDA/dm9pZCAwOnQubWFwKG49Pm4uZmxpcCgpKSl9d2l0aElubmVyQ2hhbmdlc0Zyb21MaW5lUmFuZ2VzKCl7cmV0dXJuIG5ldyBoZSh0aGlzLm9yaWdpbmFsLHRoaXMubW9kaWZpZWQsW3RoaXMudG9SYW5nZU1hcHBpbmcoKV0pfX1jbGFzcyB2ZXtjb25zdHJ1Y3Rvcih0LG4pe3RoaXMub3JpZ2luYWxSYW5nZT10LHRoaXMubW9kaWZpZWRSYW5nZT1ufXRvU3RyaW5nKCl7cmV0dXJuYHske3RoaXMub3JpZ2luYWxSYW5nZS50b1N0cmluZygpfS0+JHt0aGlzLm1vZGlmaWVkUmFuZ2UudG9TdHJpbmcoKX19YH1mbGlwKCl7cmV0dXJuIG5ldyB2ZSh0aGlzLm1vZGlmaWVkUmFuZ2UsdGhpcy5vcmlnaW5hbFJhbmdlKX10b1RleHRFZGl0KHQpe2NvbnN0IG49dC5nZXRWYWx1ZU9mUmFuZ2UodGhpcy5tb2RpZmllZFJhbmdlKTtyZXR1cm4gbmV3IFhpKHRoaXMub3JpZ2luYWxSYW5nZSxuKX19Y29uc3QgUWk9MztjbGFzcyBKaXtjb21wdXRlRGlmZih0LG4scil7dmFyIHM7Y29uc3Qgbz1uZXcgS2kodCxuLHttYXhDb21wdXRhdGlvblRpbWU6ci5tYXhDb21wdXRhdGlvblRpbWVNcyxzaG91bGRJZ25vcmVUcmltV2hpdGVzcGFjZTpyLmlnbm9yZVRyaW1XaGl0ZXNwYWNlLHNob3VsZENvbXB1dGVDaGFyQ2hhbmdlczohMCxzaG91bGRNYWtlUHJldHR5RGlmZjohMCxzaG91bGRQb3N0UHJvY2Vzc0NoYXJDaGFuZ2VzOiEwfSkuY29tcHV0ZURpZmYoKSxsPVtdO2xldCB1PW51bGw7Zm9yKGNvbnN0IGMgb2Ygby5jaGFuZ2VzKXtsZXQgZjtjLm9yaWdpbmFsRW5kTGluZU51bWJlcj09PTA/Zj1uZXcgRChjLm9yaWdpbmFsU3RhcnRMaW5lTnVtYmVyKzEsYy5vcmlnaW5hbFN0YXJ0TGluZU51bWJlcisxKTpmPW5ldyBEKGMub3JpZ2luYWxTdGFydExpbmVOdW1iZXIsYy5vcmlnaW5hbEVuZExpbmVOdW1iZXIrMSk7bGV0IGg7Yy5tb2RpZmllZEVuZExpbmVOdW1iZXI9PT0wP2g9bmV3IEQoYy5tb2RpZmllZFN0YXJ0TGluZU51bWJlcisxLGMubW9kaWZpZWRTdGFydExpbmVOdW1iZXIrMSk6aD1uZXcgRChjLm1vZGlmaWVkU3RhcnRMaW5lTnVtYmVyLGMubW9kaWZpZWRFbmRMaW5lTnVtYmVyKzEpO2xldCBkPW5ldyBoZShmLGgsKHM9Yy5jaGFyQ2hhbmdlcyk9PT1udWxsfHxzPT09dm9pZCAwP3ZvaWQgMDpzLm1hcChtPT5uZXcgdmUobmV3IEYobS5vcmlnaW5hbFN0YXJ0TGluZU51bWJlcixtLm9yaWdpbmFsU3RhcnRDb2x1bW4sbS5vcmlnaW5hbEVuZExpbmVOdW1iZXIsbS5vcmlnaW5hbEVuZENvbHVtbiksbmV3IEYobS5tb2RpZmllZFN0YXJ0TGluZU51bWJlcixtLm1vZGlmaWVkU3RhcnRDb2x1bW4sbS5tb2RpZmllZEVuZExpbmVOdW1iZXIsbS5tb2RpZmllZEVuZENvbHVtbikpKSk7dSYmKHUubW9kaWZpZWQuZW5kTGluZU51bWJlckV4Y2x1c2l2ZT09PWQubW9kaWZpZWQuc3RhcnRMaW5lTnVtYmVyfHx1Lm9yaWdpbmFsLmVuZExpbmVOdW1iZXJFeGNsdXNpdmU9PT1kLm9yaWdpbmFsLnN0YXJ0TGluZU51bWJlcikmJihkPW5ldyBoZSh1Lm9yaWdpbmFsLmpvaW4oZC5vcmlnaW5hbCksdS5tb2RpZmllZC5qb2luKGQubW9kaWZpZWQpLHUuaW5uZXJDaGFuZ2VzJiZkLmlubmVyQ2hhbmdlcz91LmlubmVyQ2hhbmdlcy5jb25jYXQoZC5pbm5lckNoYW5nZXMpOnZvaWQgMCksbC5wb3AoKSksbC5wdXNoKGQpLHU9ZH1yZXR1cm4gZnQoKCk9Pk1yKGwsKGMsZik9PmYub3JpZ2luYWwuc3RhcnRMaW5lTnVtYmVyLWMub3JpZ2luYWwuZW5kTGluZU51bWJlckV4Y2x1c2l2ZT09PWYubW9kaWZpZWQuc3RhcnRMaW5lTnVtYmVyLWMubW9kaWZpZWQuZW5kTGluZU51bWJlckV4Y2x1c2l2ZSYmYy5vcmlnaW5hbC5lbmRMaW5lTnVtYmVyRXhjbHVzaXZlPGYub3JpZ2luYWwuc3RhcnRMaW5lTnVtYmVyJiZjLm1vZGlmaWVkLmVuZExpbmVOdW1iZXJFeGNsdXNpdmU8Zi5tb2RpZmllZC5zdGFydExpbmVOdW1iZXIpKSxuZXcgZHQobCxbXSxvLnF1aXRFYXJseSl9fWZ1bmN0aW9uIFByKGUsdCxuLHIpe3JldHVybiBuZXcgZ2UoZSx0LG4pLkNvbXB1dGVEaWZmKHIpfWxldCBEcj1jbGFzc3tjb25zdHJ1Y3Rvcih0KXtjb25zdCBuPVtdLHI9W107Zm9yKGxldCBzPTAsaT10Lmxlbmd0aDtzPGk7cysrKW5bc109T3QodFtzXSwxKSxyW3NdPUd0KHRbc10sMSk7dGhpcy5saW5lcz10LHRoaXMuX3N0YXJ0Q29sdW1ucz1uLHRoaXMuX2VuZENvbHVtbnM9cn1nZXRFbGVtZW50cygpe2NvbnN0IHQ9W107Zm9yKGxldCBuPTAscj10aGlzLmxpbmVzLmxlbmd0aDtuPHI7bisrKXRbbl09dGhpcy5saW5lc1tuXS5zdWJzdHJpbmcodGhpcy5fc3RhcnRDb2x1bW5zW25dLTEsdGhpcy5fZW5kQ29sdW1uc1tuXS0xKTtyZXR1cm4gdH1nZXRTdHJpY3RFbGVtZW50KHQpe3JldHVybiB0aGlzLmxpbmVzW3RdfWdldFN0YXJ0TGluZU51bWJlcih0KXtyZXR1cm4gdCsxfWdldEVuZExpbmVOdW1iZXIodCl7cmV0dXJuIHQrMX1jcmVhdGVDaGFyU2VxdWVuY2UodCxuLHIpe2NvbnN0IHM9W10saT1bXSxvPVtdO2xldCBsPTA7Zm9yKGxldCB1PW47dTw9cjt1Kyspe2NvbnN0IGM9dGhpcy5saW5lc1t1XSxmPXQ/dGhpcy5fc3RhcnRDb2x1bW5zW3VdOjEsaD10P3RoaXMuX2VuZENvbHVtbnNbdV06Yy5sZW5ndGgrMTtmb3IobGV0IGQ9ZjtkPGg7ZCsrKXNbbF09Yy5jaGFyQ29kZUF0KGQtMSksaVtsXT11KzEsb1tsXT1kLGwrKzshdCYmdTxyJiYoc1tsXT0xMCxpW2xdPXUrMSxvW2xdPWMubGVuZ3RoKzEsbCsrKX1yZXR1cm4gbmV3IFlpKHMsaSxvKX19O2NsYXNzIFlpe2NvbnN0cnVjdG9yKHQsbixyKXt0aGlzLl9jaGFyQ29kZXM9dCx0aGlzLl9saW5lTnVtYmVycz1uLHRoaXMuX2NvbHVtbnM9cn10b1N0cmluZygpe3JldHVybiJbIit0aGlzLl9jaGFyQ29kZXMubWFwKCh0LG4pPT4odD09PTEwPyJcXG4iOlN0cmluZy5mcm9tQ2hhckNvZGUodCkpK2AtKCR7dGhpcy5fbGluZU51bWJlcnNbbl19LCR7dGhpcy5fY29sdW1uc1tuXX0pYCkuam9pbigiLCAiKSsiXSJ9X2Fzc2VydEluZGV4KHQsbil7aWYodDwwfHx0Pj1uLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoIklsbGVnYWwgaW5kZXgiKX1nZXRFbGVtZW50cygpe3JldHVybiB0aGlzLl9jaGFyQ29kZXN9Z2V0U3RhcnRMaW5lTnVtYmVyKHQpe3JldHVybiB0PjAmJnQ9PT10aGlzLl9saW5lTnVtYmVycy5sZW5ndGg/dGhpcy5nZXRFbmRMaW5lTnVtYmVyKHQtMSk6KHRoaXMuX2Fzc2VydEluZGV4KHQsdGhpcy5fbGluZU51bWJlcnMpLHRoaXMuX2xpbmVOdW1iZXJzW3RdKX1nZXRFbmRMaW5lTnVtYmVyKHQpe3JldHVybiB0PT09LTE/dGhpcy5nZXRTdGFydExpbmVOdW1iZXIodCsxKToodGhpcy5fYXNzZXJ0SW5kZXgodCx0aGlzLl9saW5lTnVtYmVycyksdGhpcy5fY2hhckNvZGVzW3RdPT09MTA/dGhpcy5fbGluZU51bWJlcnNbdF0rMTp0aGlzLl9saW5lTnVtYmVyc1t0XSl9Z2V0U3RhcnRDb2x1bW4odCl7cmV0dXJuIHQ+MCYmdD09PXRoaXMuX2NvbHVtbnMubGVuZ3RoP3RoaXMuZ2V0RW5kQ29sdW1uKHQtMSk6KHRoaXMuX2Fzc2VydEluZGV4KHQsdGhpcy5fY29sdW1ucyksdGhpcy5fY29sdW1uc1t0XSl9Z2V0RW5kQ29sdW1uKHQpe3JldHVybiB0PT09LTE/dGhpcy5nZXRTdGFydENvbHVtbih0KzEpOih0aGlzLl9hc3NlcnRJbmRleCh0LHRoaXMuX2NvbHVtbnMpLHRoaXMuX2NoYXJDb2Rlc1t0XT09PTEwPzE6dGhpcy5fY29sdW1uc1t0XSsxKX19Y2xhc3MgQmV7Y29uc3RydWN0b3IodCxuLHIscyxpLG8sbCx1KXt0aGlzLm9yaWdpbmFsU3RhcnRMaW5lTnVtYmVyPXQsdGhpcy5vcmlnaW5hbFN0YXJ0Q29sdW1uPW4sdGhpcy5vcmlnaW5hbEVuZExpbmVOdW1iZXI9cix0aGlzLm9yaWdpbmFsRW5kQ29sdW1uPXMsdGhpcy5tb2RpZmllZFN0YXJ0TGluZU51bWJlcj1pLHRoaXMubW9kaWZpZWRTdGFydENvbHVtbj1vLHRoaXMubW9kaWZpZWRFbmRMaW5lTnVtYmVyPWwsdGhpcy5tb2RpZmllZEVuZENvbHVtbj11fXN0YXRpYyBjcmVhdGVGcm9tRGlmZkNoYW5nZSh0LG4scil7Y29uc3Qgcz1uLmdldFN0YXJ0TGluZU51bWJlcih0Lm9yaWdpbmFsU3RhcnQpLGk9bi5nZXRTdGFydENvbHVtbih0Lm9yaWdpbmFsU3RhcnQpLG89bi5nZXRFbmRMaW5lTnVtYmVyKHQub3JpZ2luYWxTdGFydCt0Lm9yaWdpbmFsTGVuZ3RoLTEpLGw9bi5nZXRFbmRDb2x1bW4odC5vcmlnaW5hbFN0YXJ0K3Qub3JpZ2luYWxMZW5ndGgtMSksdT1yLmdldFN0YXJ0TGluZU51bWJlcih0Lm1vZGlmaWVkU3RhcnQpLGM9ci5nZXRTdGFydENvbHVtbih0Lm1vZGlmaWVkU3RhcnQpLGY9ci5nZXRFbmRMaW5lTnVtYmVyKHQubW9kaWZpZWRTdGFydCt0Lm1vZGlmaWVkTGVuZ3RoLTEpLGg9ci5nZXRFbmRDb2x1bW4odC5tb2RpZmllZFN0YXJ0K3QubW9kaWZpZWRMZW5ndGgtMSk7cmV0dXJuIG5ldyBCZShzLGksbyxsLHUsYyxmLGgpfX1mdW5jdGlvbiBaaShlKXtpZihlLmxlbmd0aDw9MSlyZXR1cm4gZTtjb25zdCB0PVtlWzBdXTtsZXQgbj10WzBdO2ZvcihsZXQgcj0xLHM9ZS5sZW5ndGg7cjxzO3IrKyl7Y29uc3QgaT1lW3JdLG89aS5vcmlnaW5hbFN0YXJ0LShuLm9yaWdpbmFsU3RhcnQrbi5vcmlnaW5hbExlbmd0aCksbD1pLm1vZGlmaWVkU3RhcnQtKG4ubW9kaWZpZWRTdGFydCtuLm1vZGlmaWVkTGVuZ3RoKTtNYXRoLm1pbihvLGwpPFFpPyhuLm9yaWdpbmFsTGVuZ3RoPWkub3JpZ2luYWxTdGFydCtpLm9yaWdpbmFsTGVuZ3RoLW4ub3JpZ2luYWxTdGFydCxuLm1vZGlmaWVkTGVuZ3RoPWkubW9kaWZpZWRTdGFydCtpLm1vZGlmaWVkTGVuZ3RoLW4ubW9kaWZpZWRTdGFydCk6KHQucHVzaChpKSxuPWkpfXJldHVybiB0fWNsYXNzIFhle2NvbnN0cnVjdG9yKHQsbixyLHMsaSl7dGhpcy5vcmlnaW5hbFN0YXJ0TGluZU51bWJlcj10LHRoaXMub3JpZ2luYWxFbmRMaW5lTnVtYmVyPW4sdGhpcy5tb2RpZmllZFN0YXJ0TGluZU51bWJlcj1yLHRoaXMubW9kaWZpZWRFbmRMaW5lTnVtYmVyPXMsdGhpcy5jaGFyQ2hhbmdlcz1pfXN0YXRpYyBjcmVhdGVGcm9tRGlmZlJlc3VsdCh0LG4scixzLGksbyxsKXtsZXQgdSxjLGYsaCxkO2lmKG4ub3JpZ2luYWxMZW5ndGg9PT0wPyh1PXIuZ2V0U3RhcnRMaW5lTnVtYmVyKG4ub3JpZ2luYWxTdGFydCktMSxjPTApOih1PXIuZ2V0U3RhcnRMaW5lTnVtYmVyKG4ub3JpZ2luYWxTdGFydCksYz1yLmdldEVuZExpbmVOdW1iZXIobi5vcmlnaW5hbFN0YXJ0K24ub3JpZ2luYWxMZW5ndGgtMSkpLG4ubW9kaWZpZWRMZW5ndGg9PT0wPyhmPXMuZ2V0U3RhcnRMaW5lTnVtYmVyKG4ubW9kaWZpZWRTdGFydCktMSxoPTApOihmPXMuZ2V0U3RhcnRMaW5lTnVtYmVyKG4ubW9kaWZpZWRTdGFydCksaD1zLmdldEVuZExpbmVOdW1iZXIobi5tb2RpZmllZFN0YXJ0K24ubW9kaWZpZWRMZW5ndGgtMSkpLG8mJm4ub3JpZ2luYWxMZW5ndGg+MCYmbi5vcmlnaW5hbExlbmd0aDwyMCYmbi5tb2RpZmllZExlbmd0aD4wJiZuLm1vZGlmaWVkTGVuZ3RoPDIwJiZpKCkpe2NvbnN0IG09ci5jcmVhdGVDaGFyU2VxdWVuY2UodCxuLm9yaWdpbmFsU3RhcnQsbi5vcmlnaW5hbFN0YXJ0K24ub3JpZ2luYWxMZW5ndGgtMSksZz1zLmNyZWF0ZUNoYXJTZXF1ZW5jZSh0LG4ubW9kaWZpZWRTdGFydCxuLm1vZGlmaWVkU3RhcnQrbi5tb2RpZmllZExlbmd0aC0xKTtpZihtLmdldEVsZW1lbnRzKCkubGVuZ3RoPjAmJmcuZ2V0RWxlbWVudHMoKS5sZW5ndGg+MCl7bGV0IHg9UHIobSxnLGksITApLmNoYW5nZXM7bCYmKHg9WmkoeCkpLGQ9W107Zm9yKGxldCB2PTAsTD14Lmxlbmd0aDt2PEw7disrKWQucHVzaChCZS5jcmVhdGVGcm9tRGlmZkNoYW5nZSh4W3ZdLG0sZykpfX1yZXR1cm4gbmV3IFhlKHUsYyxmLGgsZCl9fWNsYXNzIEtpe2NvbnN0cnVjdG9yKHQsbixyKXt0aGlzLnNob3VsZENvbXB1dGVDaGFyQ2hhbmdlcz1yLnNob3VsZENvbXB1dGVDaGFyQ2hhbmdlcyx0aGlzLnNob3VsZFBvc3RQcm9jZXNzQ2hhckNoYW5nZXM9ci5zaG91bGRQb3N0UHJvY2Vzc0NoYXJDaGFuZ2VzLHRoaXMuc2hvdWxkSWdub3JlVHJpbVdoaXRlc3BhY2U9ci5zaG91bGRJZ25vcmVUcmltV2hpdGVzcGFjZSx0aGlzLnNob3VsZE1ha2VQcmV0dHlEaWZmPXIuc2hvdWxkTWFrZVByZXR0eURpZmYsdGhpcy5vcmlnaW5hbExpbmVzPXQsdGhpcy5tb2RpZmllZExpbmVzPW4sdGhpcy5vcmlnaW5hbD1uZXcgRHIodCksdGhpcy5tb2RpZmllZD1uZXcgRHIobiksdGhpcy5jb250aW51ZUxpbmVEaWZmPVRyKHIubWF4Q29tcHV0YXRpb25UaW1lKSx0aGlzLmNvbnRpbnVlQ2hhckRpZmY9VHIoci5tYXhDb21wdXRhdGlvblRpbWU9PT0wPzA6TWF0aC5taW4oci5tYXhDb21wdXRhdGlvblRpbWUsNWUzKSl9Y29tcHV0ZURpZmYoKXtpZih0aGlzLm9yaWdpbmFsLmxpbmVzLmxlbmd0aD09PTEmJnRoaXMub3JpZ2luYWwubGluZXNbMF0ubGVuZ3RoPT09MClyZXR1cm4gdGhpcy5tb2RpZmllZC5saW5lcy5sZW5ndGg9PT0xJiZ0aGlzLm1vZGlmaWVkLmxpbmVzWzBdLmxlbmd0aD09PTA/e3F1aXRFYXJseTohMSxjaGFuZ2VzOltdfTp7cXVpdEVhcmx5OiExLGNoYW5nZXM6W3tvcmlnaW5hbFN0YXJ0TGluZU51bWJlcjoxLG9yaWdpbmFsRW5kTGluZU51bWJlcjoxLG1vZGlmaWVkU3RhcnRMaW5lTnVtYmVyOjEsbW9kaWZpZWRFbmRMaW5lTnVtYmVyOnRoaXMubW9kaWZpZWQubGluZXMubGVuZ3RoLGNoYXJDaGFuZ2VzOnZvaWQgMH1dfTtpZih0aGlzLm1vZGlmaWVkLmxpbmVzLmxlbmd0aD09PTEmJnRoaXMubW9kaWZpZWQubGluZXNbMF0ubGVuZ3RoPT09MClyZXR1cm57cXVpdEVhcmx5OiExLGNoYW5nZXM6W3tvcmlnaW5hbFN0YXJ0TGluZU51bWJlcjoxLG9yaWdpbmFsRW5kTGluZU51bWJlcjp0aGlzLm9yaWdpbmFsLmxpbmVzLmxlbmd0aCxtb2RpZmllZFN0YXJ0TGluZU51bWJlcjoxLG1vZGlmaWVkRW5kTGluZU51bWJlcjoxLGNoYXJDaGFuZ2VzOnZvaWQgMH1dfTtjb25zdCB0PVByKHRoaXMub3JpZ2luYWwsdGhpcy5tb2RpZmllZCx0aGlzLmNvbnRpbnVlTGluZURpZmYsdGhpcy5zaG91bGRNYWtlUHJldHR5RGlmZiksbj10LmNoYW5nZXMscj10LnF1aXRFYXJseTtpZih0aGlzLnNob3VsZElnbm9yZVRyaW1XaGl0ZXNwYWNlKXtjb25zdCBsPVtdO2ZvcihsZXQgdT0wLGM9bi5sZW5ndGg7dTxjO3UrKylsLnB1c2goWGUuY3JlYXRlRnJvbURpZmZSZXN1bHQodGhpcy5zaG91bGRJZ25vcmVUcmltV2hpdGVzcGFjZSxuW3VdLHRoaXMub3JpZ2luYWwsdGhpcy5tb2RpZmllZCx0aGlzLmNvbnRpbnVlQ2hhckRpZmYsdGhpcy5zaG91bGRDb21wdXRlQ2hhckNoYW5nZXMsdGhpcy5zaG91bGRQb3N0UHJvY2Vzc0NoYXJDaGFuZ2VzKSk7cmV0dXJue3F1aXRFYXJseTpyLGNoYW5nZXM6bH19Y29uc3Qgcz1bXTtsZXQgaT0wLG89MDtmb3IobGV0IGw9LTEsdT1uLmxlbmd0aDtsPHU7bCsrKXtjb25zdCBjPWwrMTx1P25bbCsxXTpudWxsLGY9Yz9jLm9yaWdpbmFsU3RhcnQ6dGhpcy5vcmlnaW5hbExpbmVzLmxlbmd0aCxoPWM/Yy5tb2RpZmllZFN0YXJ0OnRoaXMubW9kaWZpZWRMaW5lcy5sZW5ndGg7Zm9yKDtpPGYmJm88aDspe2NvbnN0IGQ9dGhpcy5vcmlnaW5hbExpbmVzW2ldLG09dGhpcy5tb2RpZmllZExpbmVzW29dO2lmKGQhPT1tKXt7bGV0IGc9T3QoZCwxKSx4PU90KG0sMSk7Zm9yKDtnPjEmJng+MTspe2NvbnN0IHY9ZC5jaGFyQ29kZUF0KGctMiksTD1tLmNoYXJDb2RlQXQoeC0yKTtpZih2IT09TClicmVhaztnLS0seC0tfShnPjF8fHg+MSkmJnRoaXMuX3B1c2hUcmltV2hpdGVzcGFjZUNoYXJDaGFuZ2UocyxpKzEsMSxnLG8rMSwxLHgpfXtsZXQgZz1HdChkLDEpLHg9R3QobSwxKTtjb25zdCB2PWQubGVuZ3RoKzEsTD1tLmxlbmd0aCsxO2Zvcig7Zzx2JiZ4PEw7KXtjb25zdCBTPWQuY2hhckNvZGVBdChnLTEpLF89ZC5jaGFyQ29kZUF0KHgtMSk7aWYoUyE9PV8pYnJlYWs7ZysrLHgrK30oZzx2fHx4PEwpJiZ0aGlzLl9wdXNoVHJpbVdoaXRlc3BhY2VDaGFyQ2hhbmdlKHMsaSsxLGcsdixvKzEseCxMKX19aSsrLG8rK31jJiYocy5wdXNoKFhlLmNyZWF0ZUZyb21EaWZmUmVzdWx0KHRoaXMuc2hvdWxkSWdub3JlVHJpbVdoaXRlc3BhY2UsYyx0aGlzLm9yaWdpbmFsLHRoaXMubW9kaWZpZWQsdGhpcy5jb250aW51ZUNoYXJEaWZmLHRoaXMuc2hvdWxkQ29tcHV0ZUNoYXJDaGFuZ2VzLHRoaXMuc2hvdWxkUG9zdFByb2Nlc3NDaGFyQ2hhbmdlcykpLGkrPWMub3JpZ2luYWxMZW5ndGgsbys9Yy5tb2RpZmllZExlbmd0aCl9cmV0dXJue3F1aXRFYXJseTpyLGNoYW5nZXM6c319X3B1c2hUcmltV2hpdGVzcGFjZUNoYXJDaGFuZ2UodCxuLHIscyxpLG8sbCl7aWYodGhpcy5fbWVyZ2VUcmltV2hpdGVzcGFjZUNoYXJDaGFuZ2UodCxuLHIscyxpLG8sbCkpcmV0dXJuO2xldCB1O3RoaXMuc2hvdWxkQ29tcHV0ZUNoYXJDaGFuZ2VzJiYodT1bbmV3IEJlKG4scixuLHMsaSxvLGksbCldKSx0LnB1c2gobmV3IFhlKG4sbixpLGksdSkpfV9tZXJnZVRyaW1XaGl0ZXNwYWNlQ2hhckNoYW5nZSh0LG4scixzLGksbyxsKXtjb25zdCB1PXQubGVuZ3RoO2lmKHU9PT0wKXJldHVybiExO2NvbnN0IGM9dFt1LTFdO3JldHVybiBjLm9yaWdpbmFsRW5kTGluZU51bWJlcj09PTB8fGMubW9kaWZpZWRFbmRMaW5lTnVtYmVyPT09MD8hMTpjLm9yaWdpbmFsRW5kTGluZU51bWJlcj09PW4mJmMubW9kaWZpZWRFbmRMaW5lTnVtYmVyPT09aT8odGhpcy5zaG91bGRDb21wdXRlQ2hhckNoYW5nZXMmJmMuY2hhckNoYW5nZXMmJmMuY2hhckNoYW5nZXMucHVzaChuZXcgQmUobixyLG4scyxpLG8saSxsKSksITApOmMub3JpZ2luYWxFbmRMaW5lTnVtYmVyKzE9PT1uJiZjLm1vZGlmaWVkRW5kTGluZU51bWJlcisxPT09aT8oYy5vcmlnaW5hbEVuZExpbmVOdW1iZXI9bixjLm1vZGlmaWVkRW5kTGluZU51bWJlcj1pLHRoaXMuc2hvdWxkQ29tcHV0ZUNoYXJDaGFuZ2VzJiZjLmNoYXJDaGFuZ2VzJiZjLmNoYXJDaGFuZ2VzLnB1c2gobmV3IEJlKG4scixuLHMsaSxvLGksbCkpLCEwKTohMX19ZnVuY3Rpb24gT3QoZSx0KXtjb25zdCBuPVJzKGUpO3JldHVybiBuPT09LTE/dDpuKzF9ZnVuY3Rpb24gR3QoZSx0KXtjb25zdCBuPXlzKGUpO3JldHVybiBuPT09LTE/dDpuKzJ9ZnVuY3Rpb24gVHIoZSl7aWYoZT09PTApcmV0dXJuKCk9PiEwO2NvbnN0IHQ9RGF0ZS5ub3coKTtyZXR1cm4oKT0+RGF0ZS5ub3coKS10PGV9Y2xhc3MgZmV7c3RhdGljIHRyaXZpYWwodCxuKXtyZXR1cm4gbmV3IGZlKFtuZXcgeihWLm9mTGVuZ3RoKHQubGVuZ3RoKSxWLm9mTGVuZ3RoKG4ubGVuZ3RoKSldLCExKX1zdGF0aWMgdHJpdmlhbFRpbWVkT3V0KHQsbil7cmV0dXJuIG5ldyBmZShbbmV3IHooVi5vZkxlbmd0aCh0Lmxlbmd0aCksVi5vZkxlbmd0aChuLmxlbmd0aCkpXSwhMCl9Y29uc3RydWN0b3IodCxuKXt0aGlzLmRpZmZzPXQsdGhpcy5oaXRUaW1lb3V0PW59fWNsYXNzIHp7c3RhdGljIGludmVydCh0LG4pe2NvbnN0IHI9W107cmV0dXJuIHVpKHQsKHMsaSk9PntyLnB1c2goei5mcm9tT2Zmc2V0UGFpcnMocz9zLmdldEVuZEV4Y2x1c2l2ZXMoKTpuZS56ZXJvLGk/aS5nZXRTdGFydHMoKTpuZXcgbmUobiwocz9zLnNlcTJSYW5nZS5lbmRFeGNsdXNpdmUtcy5zZXExUmFuZ2UuZW5kRXhjbHVzaXZlOjApK24pKSl9KSxyfXN0YXRpYyBmcm9tT2Zmc2V0UGFpcnModCxuKXtyZXR1cm4gbmV3IHoobmV3IFYodC5vZmZzZXQxLG4ub2Zmc2V0MSksbmV3IFYodC5vZmZzZXQyLG4ub2Zmc2V0MikpfWNvbnN0cnVjdG9yKHQsbil7dGhpcy5zZXExUmFuZ2U9dCx0aGlzLnNlcTJSYW5nZT1ufXN3YXAoKXtyZXR1cm4gbmV3IHoodGhpcy5zZXEyUmFuZ2UsdGhpcy5zZXExUmFuZ2UpfXRvU3RyaW5nKCl7cmV0dXJuYCR7dGhpcy5zZXExUmFuZ2V9IDwtPiAke3RoaXMuc2VxMlJhbmdlfWB9am9pbih0KXtyZXR1cm4gbmV3IHoodGhpcy5zZXExUmFuZ2Uuam9pbih0LnNlcTFSYW5nZSksdGhpcy5zZXEyUmFuZ2Uuam9pbih0LnNlcTJSYW5nZSkpfWRlbHRhKHQpe3JldHVybiB0PT09MD90aGlzOm5ldyB6KHRoaXMuc2VxMVJhbmdlLmRlbHRhKHQpLHRoaXMuc2VxMlJhbmdlLmRlbHRhKHQpKX1kZWx0YVN0YXJ0KHQpe3JldHVybiB0PT09MD90aGlzOm5ldyB6KHRoaXMuc2VxMVJhbmdlLmRlbHRhU3RhcnQodCksdGhpcy5zZXEyUmFuZ2UuZGVsdGFTdGFydCh0KSl9ZGVsdGFFbmQodCl7cmV0dXJuIHQ9PT0wP3RoaXM6bmV3IHoodGhpcy5zZXExUmFuZ2UuZGVsdGFFbmQodCksdGhpcy5zZXEyUmFuZ2UuZGVsdGFFbmQodCkpfWludGVyc2VjdCh0KXtjb25zdCBuPXRoaXMuc2VxMVJhbmdlLmludGVyc2VjdCh0LnNlcTFSYW5nZSkscj10aGlzLnNlcTJSYW5nZS5pbnRlcnNlY3QodC5zZXEyUmFuZ2UpO2lmKCEoIW58fCFyKSlyZXR1cm4gbmV3IHoobixyKX1nZXRTdGFydHMoKXtyZXR1cm4gbmV3IG5lKHRoaXMuc2VxMVJhbmdlLnN0YXJ0LHRoaXMuc2VxMlJhbmdlLnN0YXJ0KX1nZXRFbmRFeGNsdXNpdmVzKCl7cmV0dXJuIG5ldyBuZSh0aGlzLnNlcTFSYW5nZS5lbmRFeGNsdXNpdmUsdGhpcy5zZXEyUmFuZ2UuZW5kRXhjbHVzaXZlKX19Y2xhc3MgbmV7Y29uc3RydWN0b3IodCxuKXt0aGlzLm9mZnNldDE9dCx0aGlzLm9mZnNldDI9bn10b1N0cmluZygpe3JldHVybmAke3RoaXMub2Zmc2V0MX0gPC0+ICR7dGhpcy5vZmZzZXQyfWB9ZGVsdGEodCl7cmV0dXJuIHQ9PT0wP3RoaXM6bmV3IG5lKHRoaXMub2Zmc2V0MSt0LHRoaXMub2Zmc2V0Mit0KX1lcXVhbHModCl7cmV0dXJuIHRoaXMub2Zmc2V0MT09PXQub2Zmc2V0MSYmdGhpcy5vZmZzZXQyPT09dC5vZmZzZXQyfX1uZS56ZXJvPW5ldyBuZSgwLDApLG5lLm1heD1uZXcgbmUoTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIsTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpO2NsYXNzIFFle2lzVmFsaWQoKXtyZXR1cm4hMH19UWUuaW5zdGFuY2U9bmV3IFFlO2NsYXNzIGVhe2NvbnN0cnVjdG9yKHQpe2lmKHRoaXMudGltZW91dD10LHRoaXMuc3RhcnRUaW1lPURhdGUubm93KCksdGhpcy52YWxpZD0hMCx0PD0wKXRocm93IG5ldyBsZSgidGltZW91dCBtdXN0IGJlIHBvc2l0aXZlIil9aXNWYWxpZCgpe2lmKCEoRGF0ZS5ub3coKS10aGlzLnN0YXJ0VGltZTx0aGlzLnRpbWVvdXQpJiZ0aGlzLnZhbGlkKXt0aGlzLnZhbGlkPSExO2RlYnVnZ2VyfXJldHVybiB0aGlzLnZhbGlkfX1jbGFzcyBqdHtjb25zdHJ1Y3Rvcih0LG4pe3RoaXMud2lkdGg9dCx0aGlzLmhlaWdodD1uLHRoaXMuYXJyYXk9W10sdGhpcy5hcnJheT1uZXcgQXJyYXkodCpuKX1nZXQodCxuKXtyZXR1cm4gdGhpcy5hcnJheVt0K24qdGhpcy53aWR0aF19c2V0KHQsbixyKXt0aGlzLmFycmF5W3Qrbip0aGlzLndpZHRoXT1yfX1mdW5jdGlvbiBYdChlKXtyZXR1cm4gZT09PTMyfHxlPT09OX1jbGFzcyBxZXtzdGF0aWMgZ2V0S2V5KHQpe2xldCBuPXRoaXMuY2hyS2V5cy5nZXQodCk7cmV0dXJuIG49PT12b2lkIDAmJihuPXRoaXMuY2hyS2V5cy5zaXplLHRoaXMuY2hyS2V5cy5zZXQodCxuKSksbn1jb25zdHJ1Y3Rvcih0LG4scil7dGhpcy5yYW5nZT10LHRoaXMubGluZXM9bix0aGlzLnNvdXJjZT1yLHRoaXMuaGlzdG9ncmFtPVtdO2xldCBzPTA7Zm9yKGxldCBpPXQuc3RhcnRMaW5lTnVtYmVyLTE7aTx0LmVuZExpbmVOdW1iZXJFeGNsdXNpdmUtMTtpKyspe2NvbnN0IG89bltpXTtmb3IobGV0IHU9MDt1PG8ubGVuZ3RoO3UrKyl7cysrO2NvbnN0IGM9b1t1XSxmPXFlLmdldEtleShjKTt0aGlzLmhpc3RvZ3JhbVtmXT0odGhpcy5oaXN0b2dyYW1bZl18fDApKzF9cysrO2NvbnN0IGw9cWUuZ2V0S2V5KGAKYCk7dGhpcy5oaXN0b2dyYW1bbF09KHRoaXMuaGlzdG9ncmFtW2xdfHwwKSsxfXRoaXMudG90YWxDb3VudD1zfWNvbXB1dGVTaW1pbGFyaXR5KHQpe3ZhciBuLHI7bGV0IHM9MDtjb25zdCBpPU1hdGgubWF4KHRoaXMuaGlzdG9ncmFtLmxlbmd0aCx0Lmhpc3RvZ3JhbS5sZW5ndGgpO2ZvcihsZXQgbz0wO288aTtvKyspcys9TWF0aC5hYnMoKChuPXRoaXMuaGlzdG9ncmFtW29dKSE9PW51bGwmJm4hPT12b2lkIDA/bjowKS0oKHI9dC5oaXN0b2dyYW1bb10pIT09bnVsbCYmciE9PXZvaWQgMD9yOjApKTtyZXR1cm4gMS1zLyh0aGlzLnRvdGFsQ291bnQrdC50b3RhbENvdW50KX19cWUuY2hyS2V5cz1uZXcgTWFwO2NsYXNzIHRhe2NvbXB1dGUodCxuLHI9UWUuaW5zdGFuY2Uscyl7aWYodC5sZW5ndGg9PT0wfHxuLmxlbmd0aD09PTApcmV0dXJuIGZlLnRyaXZpYWwodCxuKTtjb25zdCBpPW5ldyBqdCh0Lmxlbmd0aCxuLmxlbmd0aCksbz1uZXcganQodC5sZW5ndGgsbi5sZW5ndGgpLGw9bmV3IGp0KHQubGVuZ3RoLG4ubGVuZ3RoKTtmb3IobGV0IGc9MDtnPHQubGVuZ3RoO2crKylmb3IobGV0IHg9MDt4PG4ubGVuZ3RoO3grKyl7aWYoIXIuaXNWYWxpZCgpKXJldHVybiBmZS50cml2aWFsVGltZWRPdXQodCxuKTtjb25zdCB2PWc9PT0wPzA6aS5nZXQoZy0xLHgpLEw9eD09PTA/MDppLmdldChnLHgtMSk7bGV0IFM7dC5nZXRFbGVtZW50KGcpPT09bi5nZXRFbGVtZW50KHgpPyhnPT09MHx8eD09PTA/Uz0wOlM9aS5nZXQoZy0xLHgtMSksZz4wJiZ4PjAmJm8uZ2V0KGctMSx4LTEpPT09MyYmKFMrPWwuZ2V0KGctMSx4LTEpKSxTKz1zP3MoZyx4KToxKTpTPS0xO2NvbnN0IF89TWF0aC5tYXgodixMLFMpO2lmKF89PT1TKXtjb25zdCBOPWc+MCYmeD4wP2wuZ2V0KGctMSx4LTEpOjA7bC5zZXQoZyx4LE4rMSksby5zZXQoZyx4LDMpfWVsc2UgXz09PXY/KGwuc2V0KGcseCwwKSxvLnNldChnLHgsMSkpOl89PT1MJiYobC5zZXQoZyx4LDApLG8uc2V0KGcseCwyKSk7aS5zZXQoZyx4LF8pfWNvbnN0IHU9W107bGV0IGM9dC5sZW5ndGgsZj1uLmxlbmd0aDtmdW5jdGlvbiBoKGcseCl7KGcrMSE9PWN8fHgrMSE9PWYpJiZ1LnB1c2gobmV3IHoobmV3IFYoZysxLGMpLG5ldyBWKHgrMSxmKSkpLGM9ZyxmPXh9bGV0IGQ9dC5sZW5ndGgtMSxtPW4ubGVuZ3RoLTE7Zm9yKDtkPj0wJiZtPj0wOylvLmdldChkLG0pPT09Mz8oaChkLG0pLGQtLSxtLS0pOm8uZ2V0KGQsbSk9PT0xP2QtLTptLS07cmV0dXJuIGgoLTEsLTEpLHUucmV2ZXJzZSgpLG5ldyBmZSh1LCExKX19Y2xhc3MgVnJ7Y29tcHV0ZSh0LG4scj1RZS5pbnN0YW5jZSl7aWYodC5sZW5ndGg9PT0wfHxuLmxlbmd0aD09PTApcmV0dXJuIGZlLnRyaXZpYWwodCxuKTtjb25zdCBzPXQsaT1uO2Z1bmN0aW9uIG8oeCx2KXtmb3IoO3g8cy5sZW5ndGgmJnY8aS5sZW5ndGgmJnMuZ2V0RWxlbWVudCh4KT09PWkuZ2V0RWxlbWVudCh2KTspeCsrLHYrKztyZXR1cm4geH1sZXQgbD0wO2NvbnN0IHU9bmV3IG5hO3Uuc2V0KDAsbygwLDApKTtjb25zdCBjPW5ldyByYTtjLnNldCgwLHUuZ2V0KDApPT09MD9udWxsOm5ldyBJcihudWxsLDAsMCx1LmdldCgwKSkpO2xldCBmPTA7ZTpmb3IoOzspe2lmKGwrKywhci5pc1ZhbGlkKCkpcmV0dXJuIGZlLnRyaXZpYWxUaW1lZE91dChzLGkpO2NvbnN0IHg9LU1hdGgubWluKGwsaS5sZW5ndGgrbCUyKSx2PU1hdGgubWluKGwscy5sZW5ndGgrbCUyKTtmb3IoZj14O2Y8PXY7Zis9Mil7Y29uc3QgTD1mPT09dj8tMTp1LmdldChmKzEpLFM9Zj09PXg/LTE6dS5nZXQoZi0xKSsxLF89TWF0aC5taW4oTWF0aC5tYXgoTCxTKSxzLmxlbmd0aCksTj1fLWY7aWYoXz5zLmxlbmd0aHx8Tj5pLmxlbmd0aCljb250aW51ZTtjb25zdCBwPW8oXyxOKTt1LnNldChmLHApO2NvbnN0IFI9Xz09PUw/Yy5nZXQoZisxKTpjLmdldChmLTEpO2lmKGMuc2V0KGYscCE9PV8/bmV3IElyKFIsXyxOLHAtXyk6UiksdS5nZXQoZik9PT1zLmxlbmd0aCYmdS5nZXQoZiktZj09PWkubGVuZ3RoKWJyZWFrIGV9fWxldCBoPWMuZ2V0KGYpO2NvbnN0IGQ9W107bGV0IG09cy5sZW5ndGgsZz1pLmxlbmd0aDtmb3IoOzspe2NvbnN0IHg9aD9oLngraC5sZW5ndGg6MCx2PWg/aC55K2gubGVuZ3RoOjA7aWYoKHghPT1tfHx2IT09ZykmJmQucHVzaChuZXcgeihuZXcgVih4LG0pLG5ldyBWKHYsZykpKSwhaClicmVhazttPWgueCxnPWgueSxoPWgucHJldn1yZXR1cm4gZC5yZXZlcnNlKCksbmV3IGZlKGQsITEpfX1jbGFzcyBJcntjb25zdHJ1Y3Rvcih0LG4scixzKXt0aGlzLnByZXY9dCx0aGlzLng9bix0aGlzLnk9cix0aGlzLmxlbmd0aD1zfX1jbGFzcyBuYXtjb25zdHJ1Y3Rvcigpe3RoaXMucG9zaXRpdmVBcnI9bmV3IEludDMyQXJyYXkoMTApLHRoaXMubmVnYXRpdmVBcnI9bmV3IEludDMyQXJyYXkoMTApfWdldCh0KXtyZXR1cm4gdDwwPyh0PS10LTEsdGhpcy5uZWdhdGl2ZUFyclt0XSk6dGhpcy5wb3NpdGl2ZUFyclt0XX1zZXQodCxuKXtpZih0PDApe2lmKHQ9LXQtMSx0Pj10aGlzLm5lZ2F0aXZlQXJyLmxlbmd0aCl7Y29uc3Qgcj10aGlzLm5lZ2F0aXZlQXJyO3RoaXMubmVnYXRpdmVBcnI9bmV3IEludDMyQXJyYXkoci5sZW5ndGgqMiksdGhpcy5uZWdhdGl2ZUFyci5zZXQocil9dGhpcy5uZWdhdGl2ZUFyclt0XT1ufWVsc2V7aWYodD49dGhpcy5wb3NpdGl2ZUFyci5sZW5ndGgpe2NvbnN0IHI9dGhpcy5wb3NpdGl2ZUFycjt0aGlzLnBvc2l0aXZlQXJyPW5ldyBJbnQzMkFycmF5KHIubGVuZ3RoKjIpLHRoaXMucG9zaXRpdmVBcnIuc2V0KHIpfXRoaXMucG9zaXRpdmVBcnJbdF09bn19fWNsYXNzIHJhe2NvbnN0cnVjdG9yKCl7dGhpcy5wb3NpdGl2ZUFycj1bXSx0aGlzLm5lZ2F0aXZlQXJyPVtdfWdldCh0KXtyZXR1cm4gdDwwPyh0PS10LTEsdGhpcy5uZWdhdGl2ZUFyclt0XSk6dGhpcy5wb3NpdGl2ZUFyclt0XX1zZXQodCxuKXt0PDA/KHQ9LXQtMSx0aGlzLm5lZ2F0aXZlQXJyW3RdPW4pOnRoaXMucG9zaXRpdmVBcnJbdF09bn19Y2xhc3MgbXR7Y29uc3RydWN0b3IodCxuLHIpe3RoaXMubGluZXM9dCx0aGlzLmNvbnNpZGVyV2hpdGVzcGFjZUNoYW5nZXM9cix0aGlzLmVsZW1lbnRzPVtdLHRoaXMuZmlyc3RDaGFyT2Zmc2V0QnlMaW5lPVtdLHRoaXMuYWRkaXRpb25hbE9mZnNldEJ5TGluZT1bXTtsZXQgcz0hMTtuLnN0YXJ0PjAmJm4uZW5kRXhjbHVzaXZlPj10Lmxlbmd0aCYmKG49bmV3IFYobi5zdGFydC0xLG4uZW5kRXhjbHVzaXZlKSxzPSEwKSx0aGlzLmxpbmVSYW5nZT1uLHRoaXMuZmlyc3RDaGFyT2Zmc2V0QnlMaW5lWzBdPTA7Zm9yKGxldCBpPXRoaXMubGluZVJhbmdlLnN0YXJ0O2k8dGhpcy5saW5lUmFuZ2UuZW5kRXhjbHVzaXZlO2krKyl7bGV0IG89dFtpXSxsPTA7aWYocylsPW8ubGVuZ3RoLG89IiIscz0hMTtlbHNlIGlmKCFyKXtjb25zdCB1PW8udHJpbVN0YXJ0KCk7bD1vLmxlbmd0aC11Lmxlbmd0aCxvPXUudHJpbUVuZCgpfXRoaXMuYWRkaXRpb25hbE9mZnNldEJ5TGluZS5wdXNoKGwpO2ZvcihsZXQgdT0wO3U8by5sZW5ndGg7dSsrKXRoaXMuZWxlbWVudHMucHVzaChvLmNoYXJDb2RlQXQodSkpO2k8dC5sZW5ndGgtMSYmKHRoaXMuZWxlbWVudHMucHVzaCgxMCksdGhpcy5maXJzdENoYXJPZmZzZXRCeUxpbmVbaS10aGlzLmxpbmVSYW5nZS5zdGFydCsxXT10aGlzLmVsZW1lbnRzLmxlbmd0aCl9dGhpcy5hZGRpdGlvbmFsT2Zmc2V0QnlMaW5lLnB1c2goMCl9dG9TdHJpbmcoKXtyZXR1cm5gU2xpY2U6ICIke3RoaXMudGV4dH0iYH1nZXQgdGV4dCgpe3JldHVybiB0aGlzLmdldFRleHQobmV3IFYoMCx0aGlzLmxlbmd0aCkpfWdldFRleHQodCl7cmV0dXJuIHRoaXMuZWxlbWVudHMuc2xpY2UodC5zdGFydCx0LmVuZEV4Y2x1c2l2ZSkubWFwKG49PlN0cmluZy5mcm9tQ2hhckNvZGUobikpLmpvaW4oIiIpfWdldEVsZW1lbnQodCl7cmV0dXJuIHRoaXMuZWxlbWVudHNbdF19Z2V0IGxlbmd0aCgpe3JldHVybiB0aGlzLmVsZW1lbnRzLmxlbmd0aH1nZXRCb3VuZGFyeVNjb3JlKHQpe2NvbnN0IG49cXIodD4wP3RoaXMuZWxlbWVudHNbdC0xXTotMSkscj1xcih0PHRoaXMuZWxlbWVudHMubGVuZ3RoP3RoaXMuZWxlbWVudHNbdF06LTEpO2lmKG49PT03JiZyPT09OClyZXR1cm4gMDtpZihuPT09OClyZXR1cm4gMTUwO2xldCBzPTA7cmV0dXJuIG4hPT1yJiYocys9MTAsbj09PTAmJnI9PT0xJiYocys9MSkpLHMrPUJyKG4pLHMrPUJyKHIpLHN9dHJhbnNsYXRlT2Zmc2V0KHQpe2lmKHRoaXMubGluZVJhbmdlLmlzRW1wdHkpcmV0dXJuIG5ldyBKKHRoaXMubGluZVJhbmdlLnN0YXJ0KzEsMSk7Y29uc3Qgbj1HZSh0aGlzLmZpcnN0Q2hhck9mZnNldEJ5TGluZSxyPT5yPD10KTtyZXR1cm4gbmV3IEoodGhpcy5saW5lUmFuZ2Uuc3RhcnQrbisxLHQtdGhpcy5maXJzdENoYXJPZmZzZXRCeUxpbmVbbl0rdGhpcy5hZGRpdGlvbmFsT2Zmc2V0QnlMaW5lW25dKzEpfXRyYW5zbGF0ZVJhbmdlKHQpe3JldHVybiBGLmZyb21Qb3NpdGlvbnModGhpcy50cmFuc2xhdGVPZmZzZXQodC5zdGFydCksdGhpcy50cmFuc2xhdGVPZmZzZXQodC5lbmRFeGNsdXNpdmUpKX1maW5kV29yZENvbnRhaW5pbmcodCl7aWYodDwwfHx0Pj10aGlzLmVsZW1lbnRzLmxlbmd0aHx8IVF0KHRoaXMuZWxlbWVudHNbdF0pKXJldHVybjtsZXQgbj10O2Zvcig7bj4wJiZRdCh0aGlzLmVsZW1lbnRzW24tMV0pOyluLS07bGV0IHI9dDtmb3IoO3I8dGhpcy5lbGVtZW50cy5sZW5ndGgmJlF0KHRoaXMuZWxlbWVudHNbcl0pOylyKys7cmV0dXJuIG5ldyBWKG4scil9Y291bnRMaW5lc0luKHQpe3JldHVybiB0aGlzLnRyYW5zbGF0ZU9mZnNldCh0LmVuZEV4Y2x1c2l2ZSkubGluZU51bWJlci10aGlzLnRyYW5zbGF0ZU9mZnNldCh0LnN0YXJ0KS5saW5lTnVtYmVyfWlzU3Ryb25nbHlFcXVhbCh0LG4pe3JldHVybiB0aGlzLmVsZW1lbnRzW3RdPT09dGhpcy5lbGVtZW50c1tuXX1leHRlbmRUb0Z1bGxMaW5lcyh0KXt2YXIgbixyO2NvbnN0IHM9KG49SWUodGhpcy5maXJzdENoYXJPZmZzZXRCeUxpbmUsbz0+bzw9dC5zdGFydCkpIT09bnVsbCYmbiE9PXZvaWQgMD9uOjAsaT0ocj1qaSh0aGlzLmZpcnN0Q2hhck9mZnNldEJ5TGluZSxvPT50LmVuZEV4Y2x1c2l2ZTw9bykpIT09bnVsbCYmciE9PXZvaWQgMD9yOnRoaXMuZWxlbWVudHMubGVuZ3RoO3JldHVybiBuZXcgVihzLGkpfX1mdW5jdGlvbiBRdChlKXtyZXR1cm4gZT49OTcmJmU8PTEyMnx8ZT49NjUmJmU8PTkwfHxlPj00OCYmZTw9NTd9Y29uc3Qgc2E9ezA6MCwxOjAsMjowLDM6MTAsNDoyLDU6MzAsNjozLDc6MTAsODoxMH07ZnVuY3Rpb24gQnIoZSl7cmV0dXJuIHNhW2VdfWZ1bmN0aW9uIHFyKGUpe3JldHVybiBlPT09MTA/ODplPT09MTM/NzpYdChlKT82OmU+PTk3JiZlPD0xMjI/MDplPj02NSYmZTw9OTA/MTplPj00OCYmZTw9NTc/MjplPT09LTE/MzplPT09NDR8fGU9PT01OT81OjR9ZnVuY3Rpb24gaWEoZSx0LG4scixzLGkpe2xldHttb3ZlczpvLGV4Y2x1ZGVkQ2hhbmdlczpsfT1vYShlLHQsbixpKTtpZighaS5pc1ZhbGlkKCkpcmV0dXJuW107Y29uc3QgdT1lLmZpbHRlcihmPT4hbC5oYXMoZikpLGM9bGEodSxyLHMsdCxuLGkpO3JldHVybiBoaShvLGMpLG89dWEobyksbz1vLmZpbHRlcihmPT57Y29uc3QgaD1mLm9yaWdpbmFsLnRvT2Zmc2V0UmFuZ2UoKS5zbGljZSh0KS5tYXAobT0+bS50cmltKCkpO3JldHVybiBoLmpvaW4oYApgKS5sZW5ndGg+PTE1JiZhYShoLG09Pm0ubGVuZ3RoPj0yKT49Mn0pLG89Y2EoZSxvKSxvfWZ1bmN0aW9uIGFhKGUsdCl7bGV0IG49MDtmb3IoY29uc3QgciBvZiBlKXQocikmJm4rKztyZXR1cm4gbn1mdW5jdGlvbiBvYShlLHQsbixyKXtjb25zdCBzPVtdLGk9ZS5maWx0ZXIodT0+dS5tb2RpZmllZC5pc0VtcHR5JiZ1Lm9yaWdpbmFsLmxlbmd0aD49MykubWFwKHU9Pm5ldyBxZSh1Lm9yaWdpbmFsLHQsdSkpLG89bmV3IFNldChlLmZpbHRlcih1PT51Lm9yaWdpbmFsLmlzRW1wdHkmJnUubW9kaWZpZWQubGVuZ3RoPj0zKS5tYXAodT0+bmV3IHFlKHUubW9kaWZpZWQsbix1KSkpLGw9bmV3IFNldDtmb3IoY29uc3QgdSBvZiBpKXtsZXQgYz0tMSxmO2Zvcihjb25zdCBoIG9mIG8pe2NvbnN0IGQ9dS5jb21wdXRlU2ltaWxhcml0eShoKTtkPmMmJihjPWQsZj1oKX1pZihjPi45JiZmJiYoby5kZWxldGUoZikscy5wdXNoKG5ldyBvZSh1LnJhbmdlLGYucmFuZ2UpKSxsLmFkZCh1LnNvdXJjZSksbC5hZGQoZi5zb3VyY2UpKSwhci5pc1ZhbGlkKCkpcmV0dXJue21vdmVzOnMsZXhjbHVkZWRDaGFuZ2VzOmx9fXJldHVybnttb3ZlczpzLGV4Y2x1ZGVkQ2hhbmdlczpsfX1mdW5jdGlvbiBsYShlLHQsbixyLHMsaSl7Y29uc3Qgbz1bXSxsPW5ldyBCaTtmb3IoY29uc3QgZCBvZiBlKWZvcihsZXQgbT1kLm9yaWdpbmFsLnN0YXJ0TGluZU51bWJlcjttPGQub3JpZ2luYWwuZW5kTGluZU51bWJlckV4Y2x1c2l2ZS0yO20rKyl7Y29uc3QgZz1gJHt0W20tMV19OiR7dFttKzEtMV19OiR7dFttKzItMV19YDtsLmFkZChnLHtyYW5nZTpuZXcgRChtLG0rMyl9KX1jb25zdCB1PVtdO2Uuc29ydChhdChkPT5kLm1vZGlmaWVkLnN0YXJ0TGluZU51bWJlcixvdCkpO2Zvcihjb25zdCBkIG9mIGUpe2xldCBtPVtdO2ZvcihsZXQgZz1kLm1vZGlmaWVkLnN0YXJ0TGluZU51bWJlcjtnPGQubW9kaWZpZWQuZW5kTGluZU51bWJlckV4Y2x1c2l2ZS0yO2crKyl7Y29uc3QgeD1gJHtuW2ctMV19OiR7bltnKzEtMV19OiR7bltnKzItMV19YCx2PW5ldyBEKGcsZyszKSxMPVtdO2wuZm9yRWFjaCh4LCh7cmFuZ2U6U30pPT57Zm9yKGNvbnN0IE4gb2YgbSlpZihOLm9yaWdpbmFsTGluZVJhbmdlLmVuZExpbmVOdW1iZXJFeGNsdXNpdmUrMT09PVMuZW5kTGluZU51bWJlckV4Y2x1c2l2ZSYmTi5tb2RpZmllZExpbmVSYW5nZS5lbmRMaW5lTnVtYmVyRXhjbHVzaXZlKzE9PT12LmVuZExpbmVOdW1iZXJFeGNsdXNpdmUpe04ub3JpZ2luYWxMaW5lUmFuZ2U9bmV3IEQoTi5vcmlnaW5hbExpbmVSYW5nZS5zdGFydExpbmVOdW1iZXIsUy5lbmRMaW5lTnVtYmVyRXhjbHVzaXZlKSxOLm1vZGlmaWVkTGluZVJhbmdlPW5ldyBEKE4ubW9kaWZpZWRMaW5lUmFuZ2Uuc3RhcnRMaW5lTnVtYmVyLHYuZW5kTGluZU51bWJlckV4Y2x1c2l2ZSksTC5wdXNoKE4pO3JldHVybn1jb25zdCBfPXttb2RpZmllZExpbmVSYW5nZTp2LG9yaWdpbmFsTGluZVJhbmdlOlN9O3UucHVzaChfKSxMLnB1c2goXyl9KSxtPUx9aWYoIWkuaXNWYWxpZCgpKXJldHVybltdfXUuc29ydChmaShhdChkPT5kLm1vZGlmaWVkTGluZVJhbmdlLmxlbmd0aCxvdCkpKTtjb25zdCBjPW5ldyBjZSxmPW5ldyBjZTtmb3IoY29uc3QgZCBvZiB1KXtjb25zdCBtPWQubW9kaWZpZWRMaW5lUmFuZ2Uuc3RhcnRMaW5lTnVtYmVyLWQub3JpZ2luYWxMaW5lUmFuZ2Uuc3RhcnRMaW5lTnVtYmVyLGc9Yy5zdWJ0cmFjdEZyb20oZC5tb2RpZmllZExpbmVSYW5nZSkseD1mLnN1YnRyYWN0RnJvbShkLm9yaWdpbmFsTGluZVJhbmdlKS5nZXRXaXRoRGVsdGEobSksdj1nLmdldEludGVyc2VjdGlvbih4KTtmb3IoY29uc3QgTCBvZiB2LnJhbmdlcyl7aWYoTC5sZW5ndGg8Myljb250aW51ZTtjb25zdCBTPUwsXz1MLmRlbHRhKC1tKTtvLnB1c2gobmV3IG9lKF8sUykpLGMuYWRkUmFuZ2UoUyksZi5hZGRSYW5nZShfKX19by5zb3J0KGF0KGQ9PmQub3JpZ2luYWwuc3RhcnRMaW5lTnVtYmVyLG90KSk7Y29uc3QgaD1uZXcgamUoZSk7Zm9yKGxldCBkPTA7ZDxvLmxlbmd0aDtkKyspe2NvbnN0IG09b1tkXSxnPWguZmluZExhc3RNb25vdG9ub3VzKFI9PlIub3JpZ2luYWwuc3RhcnRMaW5lTnVtYmVyPD1tLm9yaWdpbmFsLnN0YXJ0TGluZU51bWJlcikseD1JZShlLFI9PlIubW9kaWZpZWQuc3RhcnRMaW5lTnVtYmVyPD1tLm1vZGlmaWVkLnN0YXJ0TGluZU51bWJlciksdj1NYXRoLm1heChtLm9yaWdpbmFsLnN0YXJ0TGluZU51bWJlci1nLm9yaWdpbmFsLnN0YXJ0TGluZU51bWJlcixtLm1vZGlmaWVkLnN0YXJ0TGluZU51bWJlci14Lm1vZGlmaWVkLnN0YXJ0TGluZU51bWJlciksTD1oLmZpbmRMYXN0TW9ub3Rvbm91cyhSPT5SLm9yaWdpbmFsLnN0YXJ0TGluZU51bWJlcjxtLm9yaWdpbmFsLmVuZExpbmVOdW1iZXJFeGNsdXNpdmUpLFM9SWUoZSxSPT5SLm1vZGlmaWVkLnN0YXJ0TGluZU51bWJlcjxtLm1vZGlmaWVkLmVuZExpbmVOdW1iZXJFeGNsdXNpdmUpLF89TWF0aC5tYXgoTC5vcmlnaW5hbC5lbmRMaW5lTnVtYmVyRXhjbHVzaXZlLW0ub3JpZ2luYWwuZW5kTGluZU51bWJlckV4Y2x1c2l2ZSxTLm1vZGlmaWVkLmVuZExpbmVOdW1iZXJFeGNsdXNpdmUtbS5tb2RpZmllZC5lbmRMaW5lTnVtYmVyRXhjbHVzaXZlKTtsZXQgTjtmb3IoTj0wO048djtOKyspe2NvbnN0IFI9bS5vcmlnaW5hbC5zdGFydExpbmVOdW1iZXItTi0xLHk9bS5tb2RpZmllZC5zdGFydExpbmVOdW1iZXItTi0xO2lmKFI+ci5sZW5ndGh8fHk+cy5sZW5ndGh8fGMuY29udGFpbnMoeSl8fGYuY29udGFpbnMoUil8fCFVcihyW1ItMV0sc1t5LTFdLGkpKWJyZWFrfU4+MCYmKGYuYWRkUmFuZ2UobmV3IEQobS5vcmlnaW5hbC5zdGFydExpbmVOdW1iZXItTixtLm9yaWdpbmFsLnN0YXJ0TGluZU51bWJlcikpLGMuYWRkUmFuZ2UobmV3IEQobS5tb2RpZmllZC5zdGFydExpbmVOdW1iZXItTixtLm1vZGlmaWVkLnN0YXJ0TGluZU51bWJlcikpKTtsZXQgcDtmb3IocD0wO3A8XztwKyspe2NvbnN0IFI9bS5vcmlnaW5hbC5lbmRMaW5lTnVtYmVyRXhjbHVzaXZlK3AseT1tLm1vZGlmaWVkLmVuZExpbmVOdW1iZXJFeGNsdXNpdmUrcDtpZihSPnIubGVuZ3RofHx5PnMubGVuZ3RofHxjLmNvbnRhaW5zKHkpfHxmLmNvbnRhaW5zKFIpfHwhVXIocltSLTFdLHNbeS0xXSxpKSlicmVha31wPjAmJihmLmFkZFJhbmdlKG5ldyBEKG0ub3JpZ2luYWwuZW5kTGluZU51bWJlckV4Y2x1c2l2ZSxtLm9yaWdpbmFsLmVuZExpbmVOdW1iZXJFeGNsdXNpdmUrcCkpLGMuYWRkUmFuZ2UobmV3IEQobS5tb2RpZmllZC5lbmRMaW5lTnVtYmVyRXhjbHVzaXZlLG0ubW9kaWZpZWQuZW5kTGluZU51bWJlckV4Y2x1c2l2ZStwKSkpLChOPjB8fHA+MCkmJihvW2RdPW5ldyBvZShuZXcgRChtLm9yaWdpbmFsLnN0YXJ0TGluZU51bWJlci1OLG0ub3JpZ2luYWwuZW5kTGluZU51bWJlckV4Y2x1c2l2ZStwKSxuZXcgRChtLm1vZGlmaWVkLnN0YXJ0TGluZU51bWJlci1OLG0ubW9kaWZpZWQuZW5kTGluZU51bWJlckV4Y2x1c2l2ZStwKSkpfXJldHVybiBvfWZ1bmN0aW9uIFVyKGUsdCxuKXtpZihlLnRyaW0oKT09PXQudHJpbSgpKXJldHVybiEwO2lmKGUubGVuZ3RoPjMwMCYmdC5sZW5ndGg+MzAwKXJldHVybiExO2NvbnN0IHM9bmV3IFZyKCkuY29tcHV0ZShuZXcgbXQoW2VdLG5ldyBWKDAsMSksITEpLG5ldyBtdChbdF0sbmV3IFYoMCwxKSwhMSksbik7bGV0IGk9MDtjb25zdCBvPXouaW52ZXJ0KHMuZGlmZnMsZS5sZW5ndGgpO2Zvcihjb25zdCBmIG9mIG8pZi5zZXExUmFuZ2UuZm9yRWFjaChoPT57WHQoZS5jaGFyQ29kZUF0KGgpKXx8aSsrfSk7ZnVuY3Rpb24gbChmKXtsZXQgaD0wO2ZvcihsZXQgZD0wO2Q8ZS5sZW5ndGg7ZCsrKVh0KGYuY2hhckNvZGVBdChkKSl8fGgrKztyZXR1cm4gaH1jb25zdCB1PWwoZS5sZW5ndGg+dC5sZW5ndGg/ZTp0KTtyZXR1cm4gaS91Pi42JiZ1PjEwfWZ1bmN0aW9uIHVhKGUpe2lmKGUubGVuZ3RoPT09MClyZXR1cm4gZTtlLnNvcnQoYXQobj0+bi5vcmlnaW5hbC5zdGFydExpbmVOdW1iZXIsb3QpKTtjb25zdCB0PVtlWzBdXTtmb3IobGV0IG49MTtuPGUubGVuZ3RoO24rKyl7Y29uc3Qgcj10W3QubGVuZ3RoLTFdLHM9ZVtuXSxpPXMub3JpZ2luYWwuc3RhcnRMaW5lTnVtYmVyLXIub3JpZ2luYWwuZW5kTGluZU51bWJlckV4Y2x1c2l2ZSxvPXMubW9kaWZpZWQuc3RhcnRMaW5lTnVtYmVyLXIubW9kaWZpZWQuZW5kTGluZU51bWJlckV4Y2x1c2l2ZTtpZihpPj0wJiZvPj0wJiZpK288PTIpe3RbdC5sZW5ndGgtMV09ci5qb2luKHMpO2NvbnRpbnVlfXQucHVzaChzKX1yZXR1cm4gdH1mdW5jdGlvbiBjYShlLHQpe2NvbnN0IG49bmV3IGplKGUpO3JldHVybiB0PXQuZmlsdGVyKHI9Pntjb25zdCBzPW4uZmluZExhc3RNb25vdG9ub3VzKGw9Pmwub3JpZ2luYWwuc3RhcnRMaW5lTnVtYmVyPHIub3JpZ2luYWwuZW5kTGluZU51bWJlckV4Y2x1c2l2ZSl8fG5ldyBvZShuZXcgRCgxLDEpLG5ldyBEKDEsMSkpLGk9SWUoZSxsPT5sLm1vZGlmaWVkLnN0YXJ0TGluZU51bWJlcjxyLm1vZGlmaWVkLmVuZExpbmVOdW1iZXJFeGNsdXNpdmUpO3JldHVybiBzIT09aX0pLHR9ZnVuY3Rpb24gSHIoZSx0LG4pe2xldCByPW47cmV0dXJuIHI9V3IoZSx0LHIpLHI9V3IoZSx0LHIpLHI9aGEoZSx0LHIpLHJ9ZnVuY3Rpb24gV3IoZSx0LG4pe2lmKG4ubGVuZ3RoPT09MClyZXR1cm4gbjtjb25zdCByPVtdO3IucHVzaChuWzBdKTtmb3IobGV0IGk9MTtpPG4ubGVuZ3RoO2krKyl7Y29uc3Qgbz1yW3IubGVuZ3RoLTFdO2xldCBsPW5baV07aWYobC5zZXExUmFuZ2UuaXNFbXB0eXx8bC5zZXEyUmFuZ2UuaXNFbXB0eSl7Y29uc3QgdT1sLnNlcTFSYW5nZS5zdGFydC1vLnNlcTFSYW5nZS5lbmRFeGNsdXNpdmU7bGV0IGM7Zm9yKGM9MTtjPD11JiYhKGUuZ2V0RWxlbWVudChsLnNlcTFSYW5nZS5zdGFydC1jKSE9PWUuZ2V0RWxlbWVudChsLnNlcTFSYW5nZS5lbmRFeGNsdXNpdmUtYyl8fHQuZ2V0RWxlbWVudChsLnNlcTJSYW5nZS5zdGFydC1jKSE9PXQuZ2V0RWxlbWVudChsLnNlcTJSYW5nZS5lbmRFeGNsdXNpdmUtYykpO2MrKyk7aWYoYy0tLGM9PT11KXtyW3IubGVuZ3RoLTFdPW5ldyB6KG5ldyBWKG8uc2VxMVJhbmdlLnN0YXJ0LGwuc2VxMVJhbmdlLmVuZEV4Y2x1c2l2ZS11KSxuZXcgVihvLnNlcTJSYW5nZS5zdGFydCxsLnNlcTJSYW5nZS5lbmRFeGNsdXNpdmUtdSkpO2NvbnRpbnVlfWw9bC5kZWx0YSgtYyl9ci5wdXNoKGwpfWNvbnN0IHM9W107Zm9yKGxldCBpPTA7aTxyLmxlbmd0aC0xO2krKyl7Y29uc3Qgbz1yW2krMV07bGV0IGw9cltpXTtpZihsLnNlcTFSYW5nZS5pc0VtcHR5fHxsLnNlcTJSYW5nZS5pc0VtcHR5KXtjb25zdCB1PW8uc2VxMVJhbmdlLnN0YXJ0LWwuc2VxMVJhbmdlLmVuZEV4Y2x1c2l2ZTtsZXQgYztmb3IoYz0wO2M8dSYmISghZS5pc1N0cm9uZ2x5RXF1YWwobC5zZXExUmFuZ2Uuc3RhcnQrYyxsLnNlcTFSYW5nZS5lbmRFeGNsdXNpdmUrYyl8fCF0LmlzU3Ryb25nbHlFcXVhbChsLnNlcTJSYW5nZS5zdGFydCtjLGwuc2VxMlJhbmdlLmVuZEV4Y2x1c2l2ZStjKSk7YysrKTtpZihjPT09dSl7cltpKzFdPW5ldyB6KG5ldyBWKGwuc2VxMVJhbmdlLnN0YXJ0K3Usby5zZXExUmFuZ2UuZW5kRXhjbHVzaXZlKSxuZXcgVihsLnNlcTJSYW5nZS5zdGFydCt1LG8uc2VxMlJhbmdlLmVuZEV4Y2x1c2l2ZSkpO2NvbnRpbnVlfWM+MCYmKGw9bC5kZWx0YShjKSl9cy5wdXNoKGwpfXJldHVybiByLmxlbmd0aD4wJiZzLnB1c2gocltyLmxlbmd0aC0xXSksc31mdW5jdGlvbiBoYShlLHQsbil7aWYoIWUuZ2V0Qm91bmRhcnlTY29yZXx8IXQuZ2V0Qm91bmRhcnlTY29yZSlyZXR1cm4gbjtmb3IobGV0IHI9MDtyPG4ubGVuZ3RoO3IrKyl7Y29uc3Qgcz1yPjA/bltyLTFdOnZvaWQgMCxpPW5bcl0sbz1yKzE8bi5sZW5ndGg/bltyKzFdOnZvaWQgMCxsPW5ldyBWKHM/cy5zZXExUmFuZ2UuZW5kRXhjbHVzaXZlKzE6MCxvP28uc2VxMVJhbmdlLnN0YXJ0LTE6ZS5sZW5ndGgpLHU9bmV3IFYocz9zLnNlcTJSYW5nZS5lbmRFeGNsdXNpdmUrMTowLG8/by5zZXEyUmFuZ2Uuc3RhcnQtMTp0Lmxlbmd0aCk7aS5zZXExUmFuZ2UuaXNFbXB0eT9uW3JdPXpyKGksZSx0LGwsdSk6aS5zZXEyUmFuZ2UuaXNFbXB0eSYmKG5bcl09enIoaS5zd2FwKCksdCxlLHUsbCkuc3dhcCgpKX1yZXR1cm4gbn1mdW5jdGlvbiB6cihlLHQsbixyLHMpe2xldCBvPTE7Zm9yKDtlLnNlcTFSYW5nZS5zdGFydC1vPj1yLnN0YXJ0JiZlLnNlcTJSYW5nZS5zdGFydC1vPj1zLnN0YXJ0JiZuLmlzU3Ryb25nbHlFcXVhbChlLnNlcTJSYW5nZS5zdGFydC1vLGUuc2VxMlJhbmdlLmVuZEV4Y2x1c2l2ZS1vKSYmbzwxMDA7KW8rKztvLS07bGV0IGw9MDtmb3IoO2Uuc2VxMVJhbmdlLnN0YXJ0K2w8ci5lbmRFeGNsdXNpdmUmJmUuc2VxMlJhbmdlLmVuZEV4Y2x1c2l2ZStsPHMuZW5kRXhjbHVzaXZlJiZuLmlzU3Ryb25nbHlFcXVhbChlLnNlcTJSYW5nZS5zdGFydCtsLGUuc2VxMlJhbmdlLmVuZEV4Y2x1c2l2ZStsKSYmbDwxMDA7KWwrKztpZihvPT09MCYmbD09PTApcmV0dXJuIGU7bGV0IHU9MCxjPS0xO2ZvcihsZXQgZj0tbztmPD1sO2YrKyl7Y29uc3QgaD1lLnNlcTJSYW5nZS5zdGFydCtmLGQ9ZS5zZXEyUmFuZ2UuZW5kRXhjbHVzaXZlK2YsbT1lLnNlcTFSYW5nZS5zdGFydCtmLGc9dC5nZXRCb3VuZGFyeVNjb3JlKG0pK24uZ2V0Qm91bmRhcnlTY29yZShoKStuLmdldEJvdW5kYXJ5U2NvcmUoZCk7Zz5jJiYoYz1nLHU9Zil9cmV0dXJuIGUuZGVsdGEodSl9ZnVuY3Rpb24gZmEoZSx0LG4pe2NvbnN0IHI9W107Zm9yKGNvbnN0IHMgb2Ygbil7Y29uc3QgaT1yW3IubGVuZ3RoLTFdO2lmKCFpKXtyLnB1c2gocyk7Y29udGludWV9cy5zZXExUmFuZ2Uuc3RhcnQtaS5zZXExUmFuZ2UuZW5kRXhjbHVzaXZlPD0yfHxzLnNlcTJSYW5nZS5zdGFydC1pLnNlcTJSYW5nZS5lbmRFeGNsdXNpdmU8PTI/cltyLmxlbmd0aC0xXT1uZXcgeihpLnNlcTFSYW5nZS5qb2luKHMuc2VxMVJhbmdlKSxpLnNlcTJSYW5nZS5qb2luKHMuc2VxMlJhbmdlKSk6ci5wdXNoKHMpfXJldHVybiByfWZ1bmN0aW9uIGRhKGUsdCxuKXtjb25zdCByPXouaW52ZXJ0KG4sZS5sZW5ndGgpLHM9W107bGV0IGk9bmV3IG5lKDAsMCk7ZnVuY3Rpb24gbyh1LGMpe2lmKHUub2Zmc2V0MTxpLm9mZnNldDF8fHUub2Zmc2V0MjxpLm9mZnNldDIpcmV0dXJuO2NvbnN0IGY9ZS5maW5kV29yZENvbnRhaW5pbmcodS5vZmZzZXQxKSxoPXQuZmluZFdvcmRDb250YWluaW5nKHUub2Zmc2V0Mik7aWYoIWZ8fCFoKXJldHVybjtsZXQgZD1uZXcgeihmLGgpO2NvbnN0IG09ZC5pbnRlcnNlY3QoYyk7bGV0IGc9bS5zZXExUmFuZ2UubGVuZ3RoLHg9bS5zZXEyUmFuZ2UubGVuZ3RoO2Zvcig7ci5sZW5ndGg+MDspe2NvbnN0IHY9clswXTtpZighKHYuc2VxMVJhbmdlLmludGVyc2VjdHMoZC5zZXExUmFuZ2UpfHx2LnNlcTJSYW5nZS5pbnRlcnNlY3RzKGQuc2VxMlJhbmdlKSkpYnJlYWs7Y29uc3QgUz1lLmZpbmRXb3JkQ29udGFpbmluZyh2LnNlcTFSYW5nZS5zdGFydCksXz10LmZpbmRXb3JkQ29udGFpbmluZyh2LnNlcTJSYW5nZS5zdGFydCksTj1uZXcgeihTLF8pLHA9Ti5pbnRlcnNlY3Qodik7aWYoZys9cC5zZXExUmFuZ2UubGVuZ3RoLHgrPXAuc2VxMlJhbmdlLmxlbmd0aCxkPWQuam9pbihOKSxkLnNlcTFSYW5nZS5lbmRFeGNsdXNpdmU+PXYuc2VxMVJhbmdlLmVuZEV4Y2x1c2l2ZSlyLnNoaWZ0KCk7ZWxzZSBicmVha31nK3g8KGQuc2VxMVJhbmdlLmxlbmd0aCtkLnNlcTJSYW5nZS5sZW5ndGgpKjIvMyYmcy5wdXNoKGQpLGk9ZC5nZXRFbmRFeGNsdXNpdmVzKCl9Zm9yKDtyLmxlbmd0aD4wOyl7Y29uc3QgdT1yLnNoaWZ0KCk7dS5zZXExUmFuZ2UuaXNFbXB0eXx8KG8odS5nZXRTdGFydHMoKSx1KSxvKHUuZ2V0RW5kRXhjbHVzaXZlcygpLmRlbHRhKC0xKSx1KSl9cmV0dXJuIG1hKG4scyl9ZnVuY3Rpb24gbWEoZSx0KXtjb25zdCBuPVtdO2Zvcig7ZS5sZW5ndGg+MHx8dC5sZW5ndGg+MDspe2NvbnN0IHI9ZVswXSxzPXRbMF07bGV0IGk7ciYmKCFzfHxyLnNlcTFSYW5nZS5zdGFydDxzLnNlcTFSYW5nZS5zdGFydCk/aT1lLnNoaWZ0KCk6aT10LnNoaWZ0KCksbi5sZW5ndGg+MCYmbltuLmxlbmd0aC0xXS5zZXExUmFuZ2UuZW5kRXhjbHVzaXZlPj1pLnNlcTFSYW5nZS5zdGFydD9uW24ubGVuZ3RoLTFdPW5bbi5sZW5ndGgtMV0uam9pbihpKTpuLnB1c2goaSl9cmV0dXJuIG59ZnVuY3Rpb24gZ2EoZSx0LG4pe2xldCByPW47aWYoci5sZW5ndGg9PT0wKXJldHVybiByO2xldCBzPTAsaTtkb3tpPSExO2NvbnN0IG89W3JbMF1dO2ZvcihsZXQgbD0xO2w8ci5sZW5ndGg7bCsrKXtsZXQgZj1mdW5jdGlvbihkLG0pe2NvbnN0IGc9bmV3IFYoYy5zZXExUmFuZ2UuZW5kRXhjbHVzaXZlLHUuc2VxMVJhbmdlLnN0YXJ0KTtyZXR1cm4gZS5nZXRUZXh0KGcpLnJlcGxhY2UoL1xzL2csIiIpLmxlbmd0aDw9NCYmKGQuc2VxMVJhbmdlLmxlbmd0aCtkLnNlcTJSYW5nZS5sZW5ndGg+NXx8bS5zZXExUmFuZ2UubGVuZ3RoK20uc2VxMlJhbmdlLmxlbmd0aD41KX07Y29uc3QgdT1yW2xdLGM9b1tvLmxlbmd0aC0xXTtmKGMsdSk/KGk9ITAsb1tvLmxlbmd0aC0xXT1vW28ubGVuZ3RoLTFdLmpvaW4odSkpOm8ucHVzaCh1KX1yPW99d2hpbGUocysrPDEwJiZpKTtyZXR1cm4gcn1mdW5jdGlvbiBiYShlLHQsbil7bGV0IHI9bjtpZihyLmxlbmd0aD09PTApcmV0dXJuIHI7bGV0IHM9MCxpO2Rve2k9ITE7Y29uc3QgbD1bclswXV07Zm9yKGxldCB1PTE7dTxyLmxlbmd0aDt1Kyspe2xldCBoPWZ1bmN0aW9uKG0sZyl7Y29uc3QgeD1uZXcgVihmLnNlcTFSYW5nZS5lbmRFeGNsdXNpdmUsYy5zZXExUmFuZ2Uuc3RhcnQpO2lmKGUuY291bnRMaW5lc0luKHgpPjV8fHgubGVuZ3RoPjUwMClyZXR1cm4hMTtjb25zdCBMPWUuZ2V0VGV4dCh4KS50cmltKCk7aWYoTC5sZW5ndGg+MjB8fEwuc3BsaXQoL1xyXG58XHJ8XG4vKS5sZW5ndGg+MSlyZXR1cm4hMTtjb25zdCBTPWUuY291bnRMaW5lc0luKG0uc2VxMVJhbmdlKSxfPW0uc2VxMVJhbmdlLmxlbmd0aCxOPXQuY291bnRMaW5lc0luKG0uc2VxMlJhbmdlKSxwPW0uc2VxMlJhbmdlLmxlbmd0aCxSPWUuY291bnRMaW5lc0luKGcuc2VxMVJhbmdlKSx5PWcuc2VxMVJhbmdlLmxlbmd0aCxFPXQuY291bnRMaW5lc0luKGcuc2VxMlJhbmdlKSxxPWcuc2VxMlJhbmdlLmxlbmd0aCxHPTIqNDArNTA7ZnVuY3Rpb24gdyhiKXtyZXR1cm4gTWF0aC5taW4oYixHKX1yZXR1cm4gTWF0aC5wb3coTWF0aC5wb3codyhTKjQwK18pLDEuNSkrTWF0aC5wb3codyhOKjQwK3ApLDEuNSksMS41KStNYXRoLnBvdyhNYXRoLnBvdyh3KFIqNDAreSksMS41KStNYXRoLnBvdyh3KEUqNDArcSksMS41KSwxLjUpPihHKioxLjUpKioxLjUqMS4zfTtjb25zdCBjPXJbdV0sZj1sW2wubGVuZ3RoLTFdO2goZixjKT8oaT0hMCxsW2wubGVuZ3RoLTFdPWxbbC5sZW5ndGgtMV0uam9pbihjKSk6bC5wdXNoKGMpfXI9bH13aGlsZShzKys8MTAmJmkpO2NvbnN0IG89W107cmV0dXJuIGNpKHIsKGwsdSxjKT0+e2xldCBmPXU7ZnVuY3Rpb24gaChMKXtyZXR1cm4gTC5sZW5ndGg+MCYmTC50cmltKCkubGVuZ3RoPD0zJiZ1LnNlcTFSYW5nZS5sZW5ndGgrdS5zZXEyUmFuZ2UubGVuZ3RoPjEwMH1jb25zdCBkPWUuZXh0ZW5kVG9GdWxsTGluZXModS5zZXExUmFuZ2UpLG09ZS5nZXRUZXh0KG5ldyBWKGQuc3RhcnQsdS5zZXExUmFuZ2Uuc3RhcnQpKTtoKG0pJiYoZj1mLmRlbHRhU3RhcnQoLW0ubGVuZ3RoKSk7Y29uc3QgZz1lLmdldFRleHQobmV3IFYodS5zZXExUmFuZ2UuZW5kRXhjbHVzaXZlLGQuZW5kRXhjbHVzaXZlKSk7aChnKSYmKGY9Zi5kZWx0YUVuZChnLmxlbmd0aCkpO2NvbnN0IHg9ei5mcm9tT2Zmc2V0UGFpcnMobD9sLmdldEVuZEV4Y2x1c2l2ZXMoKTpuZS56ZXJvLGM/Yy5nZXRTdGFydHMoKTpuZS5tYXgpLHY9Zi5pbnRlcnNlY3QoeCk7by5sZW5ndGg+MCYmdi5nZXRTdGFydHMoKS5lcXVhbHMob1tvLmxlbmd0aC0xXS5nZXRFbmRFeGNsdXNpdmVzKCkpP29bby5sZW5ndGgtMV09b1tvLmxlbmd0aC0xXS5qb2luKHYpOm8ucHVzaCh2KX0pLG99Y2xhc3MgJHJ7Y29uc3RydWN0b3IodCxuKXt0aGlzLnRyaW1tZWRIYXNoPXQsdGhpcy5saW5lcz1ufWdldEVsZW1lbnQodCl7cmV0dXJuIHRoaXMudHJpbW1lZEhhc2hbdF19Z2V0IGxlbmd0aCgpe3JldHVybiB0aGlzLnRyaW1tZWRIYXNoLmxlbmd0aH1nZXRCb3VuZGFyeVNjb3JlKHQpe2NvbnN0IG49dD09PTA/MDpPcih0aGlzLmxpbmVzW3QtMV0pLHI9dD09PXRoaXMubGluZXMubGVuZ3RoPzA6T3IodGhpcy5saW5lc1t0XSk7cmV0dXJuIDFlMy0obityKX1nZXRUZXh0KHQpe3JldHVybiB0aGlzLmxpbmVzLnNsaWNlKHQuc3RhcnQsdC5lbmRFeGNsdXNpdmUpLmpvaW4oYApgKX1pc1N0cm9uZ2x5RXF1YWwodCxuKXtyZXR1cm4gdGhpcy5saW5lc1t0XT09PXRoaXMubGluZXNbbl19fWZ1bmN0aW9uIE9yKGUpe2xldCB0PTA7Zm9yKDt0PGUubGVuZ3RoJiYoZS5jaGFyQ29kZUF0KHQpPT09MzJ8fGUuY2hhckNvZGVBdCh0KT09PTkpOyl0Kys7cmV0dXJuIHR9Y2xhc3MgX2F7Y29uc3RydWN0b3IoKXt0aGlzLmR5bmFtaWNQcm9ncmFtbWluZ0RpZmZpbmc9bmV3IHRhLHRoaXMubXllcnNEaWZmaW5nQWxnb3JpdGhtPW5ldyBWcn1jb21wdXRlRGlmZih0LG4scil7aWYodC5sZW5ndGg8PTEmJm9pKHQsbiwocCxSKT0+cD09PVIpKXJldHVybiBuZXcgZHQoW10sW10sITEpO2lmKHQubGVuZ3RoPT09MSYmdFswXS5sZW5ndGg9PT0wfHxuLmxlbmd0aD09PTEmJm5bMF0ubGVuZ3RoPT09MClyZXR1cm4gbmV3IGR0KFtuZXcgaGUobmV3IEQoMSx0Lmxlbmd0aCsxKSxuZXcgRCgxLG4ubGVuZ3RoKzEpLFtuZXcgdmUobmV3IEYoMSwxLHQubGVuZ3RoLHRbdC5sZW5ndGgtMV0ubGVuZ3RoKzEpLG5ldyBGKDEsMSxuLmxlbmd0aCxuW24ubGVuZ3RoLTFdLmxlbmd0aCsxKSldKV0sW10sITEpO2NvbnN0IHM9ci5tYXhDb21wdXRhdGlvblRpbWVNcz09PTA/UWUuaW5zdGFuY2U6bmV3IGVhKHIubWF4Q29tcHV0YXRpb25UaW1lTXMpLGk9IXIuaWdub3JlVHJpbVdoaXRlc3BhY2Usbz1uZXcgTWFwO2Z1bmN0aW9uIGwocCl7bGV0IFI9by5nZXQocCk7cmV0dXJuIFI9PT12b2lkIDAmJihSPW8uc2l6ZSxvLnNldChwLFIpKSxSfWNvbnN0IHU9dC5tYXAocD0+bChwLnRyaW0oKSkpLGM9bi5tYXAocD0+bChwLnRyaW0oKSkpLGY9bmV3ICRyKHUsdCksaD1uZXcgJHIoYyxuKSxkPWYubGVuZ3RoK2gubGVuZ3RoPDE3MDA/dGhpcy5keW5hbWljUHJvZ3JhbW1pbmdEaWZmaW5nLmNvbXB1dGUoZixoLHMsKHAsUik9PnRbcF09PT1uW1JdP25bUl0ubGVuZ3RoPT09MD8uMToxK01hdGgubG9nKDErbltSXS5sZW5ndGgpOi45OSk6dGhpcy5teWVyc0RpZmZpbmdBbGdvcml0aG0uY29tcHV0ZShmLGgscyk7bGV0IG09ZC5kaWZmcyxnPWQuaGl0VGltZW91dDttPUhyKGYsaCxtKSxtPWdhKGYsaCxtKTtjb25zdCB4PVtdLHY9cD0+e2lmKGkpZm9yKGxldCBSPTA7UjxwO1IrKyl7Y29uc3QgeT1MK1IsRT1TK1I7aWYodFt5XSE9PW5bRV0pe2NvbnN0IHE9dGhpcy5yZWZpbmVEaWZmKHQsbixuZXcgeihuZXcgVih5LHkrMSksbmV3IFYoRSxFKzEpKSxzLGkpO2Zvcihjb25zdCBHIG9mIHEubWFwcGluZ3MpeC5wdXNoKEcpO3EuaGl0VGltZW91dCYmKGc9ITApfX19O2xldCBMPTAsUz0wO2Zvcihjb25zdCBwIG9mIG0pe2Z0KCgpPT5wLnNlcTFSYW5nZS5zdGFydC1MPT09cC5zZXEyUmFuZ2Uuc3RhcnQtUyk7Y29uc3QgUj1wLnNlcTFSYW5nZS5zdGFydC1MO3YoUiksTD1wLnNlcTFSYW5nZS5lbmRFeGNsdXNpdmUsUz1wLnNlcTJSYW5nZS5lbmRFeGNsdXNpdmU7Y29uc3QgeT10aGlzLnJlZmluZURpZmYodCxuLHAscyxpKTt5LmhpdFRpbWVvdXQmJihnPSEwKTtmb3IoY29uc3QgRSBvZiB5Lm1hcHBpbmdzKXgucHVzaChFKX12KHQubGVuZ3RoLUwpO2NvbnN0IF89R3IoeCx0LG4pO2xldCBOPVtdO3JldHVybiByLmNvbXB1dGVNb3ZlcyYmKE49dGhpcy5jb21wdXRlTW92ZXMoXyx0LG4sdSxjLHMsaSkpLGZ0KCgpPT57ZnVuY3Rpb24gcCh5LEUpe2lmKHkubGluZU51bWJlcjwxfHx5LmxpbmVOdW1iZXI+RS5sZW5ndGgpcmV0dXJuITE7Y29uc3QgcT1FW3kubGluZU51bWJlci0xXTtyZXR1cm4hKHkuY29sdW1uPDF8fHkuY29sdW1uPnEubGVuZ3RoKzEpfWZ1bmN0aW9uIFIoeSxFKXtyZXR1cm4hKHkuc3RhcnRMaW5lTnVtYmVyPDF8fHkuc3RhcnRMaW5lTnVtYmVyPkUubGVuZ3RoKzF8fHkuZW5kTGluZU51bWJlckV4Y2x1c2l2ZTwxfHx5LmVuZExpbmVOdW1iZXJFeGNsdXNpdmU+RS5sZW5ndGgrMSl9Zm9yKGNvbnN0IHkgb2YgXyl7aWYoIXkuaW5uZXJDaGFuZ2VzKXJldHVybiExO2Zvcihjb25zdCBFIG9mIHkuaW5uZXJDaGFuZ2VzKWlmKCEocChFLm1vZGlmaWVkUmFuZ2UuZ2V0U3RhcnRQb3NpdGlvbigpLG4pJiZwKEUubW9kaWZpZWRSYW5nZS5nZXRFbmRQb3NpdGlvbigpLG4pJiZwKEUub3JpZ2luYWxSYW5nZS5nZXRTdGFydFBvc2l0aW9uKCksdCkmJnAoRS5vcmlnaW5hbFJhbmdlLmdldEVuZFBvc2l0aW9uKCksdCkpKXJldHVybiExO2lmKCFSKHkubW9kaWZpZWQsbil8fCFSKHkub3JpZ2luYWwsdCkpcmV0dXJuITF9cmV0dXJuITB9KSxuZXcgZHQoXyxOLGcpfWNvbXB1dGVNb3Zlcyh0LG4scixzLGksbyxsKXtyZXR1cm4gaWEodCxuLHIscyxpLG8pLm1hcChmPT57Y29uc3QgaD10aGlzLnJlZmluZURpZmYobixyLG5ldyB6KGYub3JpZ2luYWwudG9PZmZzZXRSYW5nZSgpLGYubW9kaWZpZWQudG9PZmZzZXRSYW5nZSgpKSxvLGwpLGQ9R3IoaC5tYXBwaW5ncyxuLHIsITApO3JldHVybiBuZXcgR2koZixkKX0pfXJlZmluZURpZmYodCxuLHIscyxpKXtjb25zdCBvPW5ldyBtdCh0LHIuc2VxMVJhbmdlLGkpLGw9bmV3IG10KG4sci5zZXEyUmFuZ2UsaSksdT1vLmxlbmd0aCtsLmxlbmd0aDw1MDA/dGhpcy5keW5hbWljUHJvZ3JhbW1pbmdEaWZmaW5nLmNvbXB1dGUobyxsLHMpOnRoaXMubXllcnNEaWZmaW5nQWxnb3JpdGhtLmNvbXB1dGUobyxsLHMpO2xldCBjPXUuZGlmZnM7cmV0dXJuIGM9SHIobyxsLGMpLGM9ZGEobyxsLGMpLGM9ZmEobyxsLGMpLGM9YmEobyxsLGMpLHttYXBwaW5nczpjLm1hcChoPT5uZXcgdmUoby50cmFuc2xhdGVSYW5nZShoLnNlcTFSYW5nZSksbC50cmFuc2xhdGVSYW5nZShoLnNlcTJSYW5nZSkpKSxoaXRUaW1lb3V0OnUuaGl0VGltZW91dH19fWZ1bmN0aW9uIEdyKGUsdCxuLHI9ITEpe2NvbnN0IHM9W107Zm9yKGNvbnN0IGkgb2YgbGkoZS5tYXAobz0+eGEobyx0LG4pKSwobyxsKT0+by5vcmlnaW5hbC5vdmVybGFwT3JUb3VjaChsLm9yaWdpbmFsKXx8by5tb2RpZmllZC5vdmVybGFwT3JUb3VjaChsLm1vZGlmaWVkKSkpe2NvbnN0IG89aVswXSxsPWlbaS5sZW5ndGgtMV07cy5wdXNoKG5ldyBoZShvLm9yaWdpbmFsLmpvaW4obC5vcmlnaW5hbCksby5tb2RpZmllZC5qb2luKGwubW9kaWZpZWQpLGkubWFwKHU9PnUuaW5uZXJDaGFuZ2VzWzBdKSkpfXJldHVybiBmdCgoKT0+IXImJnMubGVuZ3RoPjAmJihzWzBdLm1vZGlmaWVkLnN0YXJ0TGluZU51bWJlciE9PXNbMF0ub3JpZ2luYWwuc3RhcnRMaW5lTnVtYmVyfHxuLmxlbmd0aC1zW3MubGVuZ3RoLTFdLm1vZGlmaWVkLmVuZExpbmVOdW1iZXJFeGNsdXNpdmUhPT10Lmxlbmd0aC1zW3MubGVuZ3RoLTFdLm9yaWdpbmFsLmVuZExpbmVOdW1iZXJFeGNsdXNpdmUpPyExOk1yKHMsKGksbyk9Pm8ub3JpZ2luYWwuc3RhcnRMaW5lTnVtYmVyLWkub3JpZ2luYWwuZW5kTGluZU51bWJlckV4Y2x1c2l2ZT09PW8ubW9kaWZpZWQuc3RhcnRMaW5lTnVtYmVyLWkubW9kaWZpZWQuZW5kTGluZU51bWJlckV4Y2x1c2l2ZSYmaS5vcmlnaW5hbC5lbmRMaW5lTnVtYmVyRXhjbHVzaXZlPG8ub3JpZ2luYWwuc3RhcnRMaW5lTnVtYmVyJiZpLm1vZGlmaWVkLmVuZExpbmVOdW1iZXJFeGNsdXNpdmU8by5tb2RpZmllZC5zdGFydExpbmVOdW1iZXIpKSxzfWZ1bmN0aW9uIHhhKGUsdCxuKXtsZXQgcj0wLHM9MDtlLm1vZGlmaWVkUmFuZ2UuZW5kQ29sdW1uPT09MSYmZS5vcmlnaW5hbFJhbmdlLmVuZENvbHVtbj09PTEmJmUub3JpZ2luYWxSYW5nZS5zdGFydExpbmVOdW1iZXIrcjw9ZS5vcmlnaW5hbFJhbmdlLmVuZExpbmVOdW1iZXImJmUubW9kaWZpZWRSYW5nZS5zdGFydExpbmVOdW1iZXIrcjw9ZS5tb2RpZmllZFJhbmdlLmVuZExpbmVOdW1iZXImJihzPS0xKSxlLm1vZGlmaWVkUmFuZ2Uuc3RhcnRDb2x1bW4tMT49bltlLm1vZGlmaWVkUmFuZ2Uuc3RhcnRMaW5lTnVtYmVyLTFdLmxlbmd0aCYmZS5vcmlnaW5hbFJhbmdlLnN0YXJ0Q29sdW1uLTE+PXRbZS5vcmlnaW5hbFJhbmdlLnN0YXJ0TGluZU51bWJlci0xXS5sZW5ndGgmJmUub3JpZ2luYWxSYW5nZS5zdGFydExpbmVOdW1iZXI8PWUub3JpZ2luYWxSYW5nZS5lbmRMaW5lTnVtYmVyK3MmJmUubW9kaWZpZWRSYW5nZS5zdGFydExpbmVOdW1iZXI8PWUubW9kaWZpZWRSYW5nZS5lbmRMaW5lTnVtYmVyK3MmJihyPTEpO2NvbnN0IGk9bmV3IEQoZS5vcmlnaW5hbFJhbmdlLnN0YXJ0TGluZU51bWJlcityLGUub3JpZ2luYWxSYW5nZS5lbmRMaW5lTnVtYmVyKzErcyksbz1uZXcgRChlLm1vZGlmaWVkUmFuZ2Uuc3RhcnRMaW5lTnVtYmVyK3IsZS5tb2RpZmllZFJhbmdlLmVuZExpbmVOdW1iZXIrMStzKTtyZXR1cm4gbmV3IGhlKGksbyxbZV0pfWNvbnN0IGpyPXtnZXRMZWdhY3k6KCk9Pm5ldyBKaSxnZXREZWZhdWx0OigpPT5uZXcgX2F9O2Z1bmN0aW9uIHdlKGUsdCl7Y29uc3Qgbj1NYXRoLnBvdygxMCx0KTtyZXR1cm4gTWF0aC5yb3VuZChlKm4pL259Y2xhc3MgT3tjb25zdHJ1Y3Rvcih0LG4scixzPTEpe3RoaXMuX3JnYmFCcmFuZD12b2lkIDAsdGhpcy5yPU1hdGgubWluKDI1NSxNYXRoLm1heCgwLHQpKXwwLHRoaXMuZz1NYXRoLm1pbigyNTUsTWF0aC5tYXgoMCxuKSl8MCx0aGlzLmI9TWF0aC5taW4oMjU1LE1hdGgubWF4KDAscikpfDAsdGhpcy5hPXdlKE1hdGgubWF4KE1hdGgubWluKDEscyksMCksMyl9c3RhdGljIGVxdWFscyh0LG4pe3JldHVybiB0LnI9PT1uLnImJnQuZz09PW4uZyYmdC5iPT09bi5iJiZ0LmE9PT1uLmF9fWNsYXNzIHJle2NvbnN0cnVjdG9yKHQsbixyLHMpe3RoaXMuX2hzbGFCcmFuZD12b2lkIDAsdGhpcy5oPU1hdGgubWF4KE1hdGgubWluKDM2MCx0KSwwKXwwLHRoaXMucz13ZShNYXRoLm1heChNYXRoLm1pbigxLG4pLDApLDMpLHRoaXMubD13ZShNYXRoLm1heChNYXRoLm1pbigxLHIpLDApLDMpLHRoaXMuYT13ZShNYXRoLm1heChNYXRoLm1pbigxLHMpLDApLDMpfXN0YXRpYyBlcXVhbHModCxuKXtyZXR1cm4gdC5oPT09bi5oJiZ0LnM9PT1uLnMmJnQubD09PW4ubCYmdC5hPT09bi5hfXN0YXRpYyBmcm9tUkdCQSh0KXtjb25zdCBuPXQuci8yNTUscj10LmcvMjU1LHM9dC5iLzI1NSxpPXQuYSxvPU1hdGgubWF4KG4scixzKSxsPU1hdGgubWluKG4scixzKTtsZXQgdT0wLGM9MDtjb25zdCBmPShsK28pLzIsaD1vLWw7aWYoaD4wKXtzd2l0Y2goYz1NYXRoLm1pbihmPD0uNT9oLygyKmYpOmgvKDItMipmKSwxKSxvKXtjYXNlIG46dT0oci1zKS9oKyhyPHM/NjowKTticmVhaztjYXNlIHI6dT0ocy1uKS9oKzI7YnJlYWs7Y2FzZSBzOnU9KG4tcikvaCs0O2JyZWFrfXUqPTYwLHU9TWF0aC5yb3VuZCh1KX1yZXR1cm4gbmV3IHJlKHUsYyxmLGkpfXN0YXRpYyBfaHVlMnJnYih0LG4scil7cmV0dXJuIHI8MCYmKHIrPTEpLHI+MSYmKHItPTEpLHI8MS82P3QrKG4tdCkqNipyOnI8MS8yP246cjwyLzM/dCsobi10KSooMi8zLXIpKjY6dH1zdGF0aWMgdG9SR0JBKHQpe2NvbnN0IG49dC5oLzM2MCx7czpyLGw6cyxhOml9PXQ7bGV0IG8sbCx1O2lmKHI9PT0wKW89bD11PXM7ZWxzZXtjb25zdCBjPXM8LjU/cyooMStyKTpzK3ItcypyLGY9MipzLWM7bz1yZS5faHVlMnJnYihmLGMsbisxLzMpLGw9cmUuX2h1ZTJyZ2IoZixjLG4pLHU9cmUuX2h1ZTJyZ2IoZixjLG4tMS8zKX1yZXR1cm4gbmV3IE8oTWF0aC5yb3VuZChvKjI1NSksTWF0aC5yb3VuZChsKjI1NSksTWF0aC5yb3VuZCh1KjI1NSksaSl9fWNsYXNzIFVle2NvbnN0cnVjdG9yKHQsbixyLHMpe3RoaXMuX2hzdmFCcmFuZD12b2lkIDAsdGhpcy5oPU1hdGgubWF4KE1hdGgubWluKDM2MCx0KSwwKXwwLHRoaXMucz13ZShNYXRoLm1heChNYXRoLm1pbigxLG4pLDApLDMpLHRoaXMudj13ZShNYXRoLm1heChNYXRoLm1pbigxLHIpLDApLDMpLHRoaXMuYT13ZShNYXRoLm1heChNYXRoLm1pbigxLHMpLDApLDMpfXN0YXRpYyBlcXVhbHModCxuKXtyZXR1cm4gdC5oPT09bi5oJiZ0LnM9PT1uLnMmJnQudj09PW4udiYmdC5hPT09bi5hfXN0YXRpYyBmcm9tUkdCQSh0KXtjb25zdCBuPXQuci8yNTUscj10LmcvMjU1LHM9dC5iLzI1NSxpPU1hdGgubWF4KG4scixzKSxvPU1hdGgubWluKG4scixzKSxsPWktbyx1PWk9PT0wPzA6bC9pO2xldCBjO3JldHVybiBsPT09MD9jPTA6aT09PW4/Yz0oKHItcykvbCU2KzYpJTY6aT09PXI/Yz0ocy1uKS9sKzI6Yz0obi1yKS9sKzQsbmV3IFVlKE1hdGgucm91bmQoYyo2MCksdSxpLHQuYSl9c3RhdGljIHRvUkdCQSh0KXtjb25zdHtoOm4sczpyLHY6cyxhOml9PXQsbz1zKnIsbD1vKigxLU1hdGguYWJzKG4vNjAlMi0xKSksdT1zLW87bGV0W2MsZixoXT1bMCwwLDBdO3JldHVybiBuPDYwPyhjPW8sZj1sKTpuPDEyMD8oYz1sLGY9byk6bjwxODA/KGY9byxoPWwpOm48MjQwPyhmPWwsaD1vKTpuPDMwMD8oYz1sLGg9byk6bjw9MzYwJiYoYz1vLGg9bCksYz1NYXRoLnJvdW5kKChjK3UpKjI1NSksZj1NYXRoLnJvdW5kKChmK3UpKjI1NSksaD1NYXRoLnJvdW5kKChoK3UpKjI1NSksbmV3IE8oYyxmLGgsaSl9fWNsYXNzIEl7c3RhdGljIGZyb21IZXgodCl7cmV0dXJuIEkuRm9ybWF0LkNTUy5wYXJzZUhleCh0KXx8SS5yZWR9c3RhdGljIGVxdWFscyh0LG4pe3JldHVybiF0JiYhbj8hMDohdHx8IW4/ITE6dC5lcXVhbHMobil9Z2V0IGhzbGEoKXtyZXR1cm4gdGhpcy5faHNsYT90aGlzLl9oc2xhOnJlLmZyb21SR0JBKHRoaXMucmdiYSl9Z2V0IGhzdmEoKXtyZXR1cm4gdGhpcy5faHN2YT90aGlzLl9oc3ZhOlVlLmZyb21SR0JBKHRoaXMucmdiYSl9Y29uc3RydWN0b3IodCl7aWYodClpZih0IGluc3RhbmNlb2YgTyl0aGlzLnJnYmE9dDtlbHNlIGlmKHQgaW5zdGFuY2VvZiByZSl0aGlzLl9oc2xhPXQsdGhpcy5yZ2JhPXJlLnRvUkdCQSh0KTtlbHNlIGlmKHQgaW5zdGFuY2VvZiBVZSl0aGlzLl9oc3ZhPXQsdGhpcy5yZ2JhPVVlLnRvUkdCQSh0KTtlbHNlIHRocm93IG5ldyBFcnJvcigiSW52YWxpZCBjb2xvciBjdG9yIGFyZ3VtZW50Iik7ZWxzZSB0aHJvdyBuZXcgRXJyb3IoIkNvbG9yIG5lZWRzIGEgdmFsdWUiKX1lcXVhbHModCl7cmV0dXJuISF0JiZPLmVxdWFscyh0aGlzLnJnYmEsdC5yZ2JhKSYmcmUuZXF1YWxzKHRoaXMuaHNsYSx0LmhzbGEpJiZVZS5lcXVhbHModGhpcy5oc3ZhLHQuaHN2YSl9Z2V0UmVsYXRpdmVMdW1pbmFuY2UoKXtjb25zdCB0PUkuX3JlbGF0aXZlTHVtaW5hbmNlRm9yQ29tcG9uZW50KHRoaXMucmdiYS5yKSxuPUkuX3JlbGF0aXZlTHVtaW5hbmNlRm9yQ29tcG9uZW50KHRoaXMucmdiYS5nKSxyPUkuX3JlbGF0aXZlTHVtaW5hbmNlRm9yQ29tcG9uZW50KHRoaXMucmdiYS5iKSxzPS4yMTI2KnQrLjcxNTIqbisuMDcyMipyO3JldHVybiB3ZShzLDQpfXN0YXRpYyBfcmVsYXRpdmVMdW1pbmFuY2VGb3JDb21wb25lbnQodCl7Y29uc3Qgbj10LzI1NTtyZXR1cm4gbjw9LjAzOTI4P24vMTIuOTI6TWF0aC5wb3coKG4rLjA1NSkvMS4wNTUsMi40KX1pc0xpZ2h0ZXIoKXtyZXR1cm4odGhpcy5yZ2JhLnIqMjk5K3RoaXMucmdiYS5nKjU4Nyt0aGlzLnJnYmEuYioxMTQpLzFlMz49MTI4fWlzTGlnaHRlclRoYW4odCl7Y29uc3Qgbj10aGlzLmdldFJlbGF0aXZlTHVtaW5hbmNlKCkscj10LmdldFJlbGF0aXZlTHVtaW5hbmNlKCk7cmV0dXJuIG4+cn1pc0RhcmtlclRoYW4odCl7Y29uc3Qgbj10aGlzLmdldFJlbGF0aXZlTHVtaW5hbmNlKCkscj10LmdldFJlbGF0aXZlTHVtaW5hbmNlKCk7cmV0dXJuIG48cn1saWdodGVuKHQpe3JldHVybiBuZXcgSShuZXcgcmUodGhpcy5oc2xhLmgsdGhpcy5oc2xhLnMsdGhpcy5oc2xhLmwrdGhpcy5oc2xhLmwqdCx0aGlzLmhzbGEuYSkpfWRhcmtlbih0KXtyZXR1cm4gbmV3IEkobmV3IHJlKHRoaXMuaHNsYS5oLHRoaXMuaHNsYS5zLHRoaXMuaHNsYS5sLXRoaXMuaHNsYS5sKnQsdGhpcy5oc2xhLmEpKX10cmFuc3BhcmVudCh0KXtjb25zdHtyOm4sZzpyLGI6cyxhOml9PXRoaXMucmdiYTtyZXR1cm4gbmV3IEkobmV3IE8obixyLHMsaSp0KSl9aXNUcmFuc3BhcmVudCgpe3JldHVybiB0aGlzLnJnYmEuYT09PTB9aXNPcGFxdWUoKXtyZXR1cm4gdGhpcy5yZ2JhLmE9PT0xfW9wcG9zaXRlKCl7cmV0dXJuIG5ldyBJKG5ldyBPKDI1NS10aGlzLnJnYmEuciwyNTUtdGhpcy5yZ2JhLmcsMjU1LXRoaXMucmdiYS5iLHRoaXMucmdiYS5hKSl9bWFrZU9wYXF1ZSh0KXtpZih0aGlzLmlzT3BhcXVlKCl8fHQucmdiYS5hIT09MSlyZXR1cm4gdGhpcztjb25zdHtyOm4sZzpyLGI6cyxhOml9PXRoaXMucmdiYTtyZXR1cm4gbmV3IEkobmV3IE8odC5yZ2JhLnItaSoodC5yZ2JhLnItbiksdC5yZ2JhLmctaSoodC5yZ2JhLmctciksdC5yZ2JhLmItaSoodC5yZ2JhLmItcyksMSkpfXRvU3RyaW5nKCl7cmV0dXJuIHRoaXMuX3RvU3RyaW5nfHwodGhpcy5fdG9TdHJpbmc9SS5Gb3JtYXQuQ1NTLmZvcm1hdCh0aGlzKSksdGhpcy5fdG9TdHJpbmd9c3RhdGljIGdldExpZ2h0ZXJDb2xvcih0LG4scil7aWYodC5pc0xpZ2h0ZXJUaGFuKG4pKXJldHVybiB0O3I9cnx8LjU7Y29uc3Qgcz10LmdldFJlbGF0aXZlTHVtaW5hbmNlKCksaT1uLmdldFJlbGF0aXZlTHVtaW5hbmNlKCk7cmV0dXJuIHI9ciooaS1zKS9pLHQubGlnaHRlbihyKX1zdGF0aWMgZ2V0RGFya2VyQ29sb3IodCxuLHIpe2lmKHQuaXNEYXJrZXJUaGFuKG4pKXJldHVybiB0O3I9cnx8LjU7Y29uc3Qgcz10LmdldFJlbGF0aXZlTHVtaW5hbmNlKCksaT1uLmdldFJlbGF0aXZlTHVtaW5hbmNlKCk7cmV0dXJuIHI9cioocy1pKS9zLHQuZGFya2VuKHIpfX1JLndoaXRlPW5ldyBJKG5ldyBPKDI1NSwyNTUsMjU1LDEpKSxJLmJsYWNrPW5ldyBJKG5ldyBPKDAsMCwwLDEpKSxJLnJlZD1uZXcgSShuZXcgTygyNTUsMCwwLDEpKSxJLmJsdWU9bmV3IEkobmV3IE8oMCwwLDI1NSwxKSksSS5ncmVlbj1uZXcgSShuZXcgTygwLDI1NSwwLDEpKSxJLmN5YW49bmV3IEkobmV3IE8oMCwyNTUsMjU1LDEpKSxJLmxpZ2h0Z3JleT1uZXcgSShuZXcgTygyMTEsMjExLDIxMSwxKSksSS50cmFuc3BhcmVudD1uZXcgSShuZXcgTygwLDAsMCwwKSksZnVuY3Rpb24oZSl7KGZ1bmN0aW9uKHQpeyhmdW5jdGlvbihuKXtmdW5jdGlvbiByKG0pe3JldHVybiBtLnJnYmEuYT09PTE/YHJnYigke20ucmdiYS5yfSwgJHttLnJnYmEuZ30sICR7bS5yZ2JhLmJ9KWA6ZS5Gb3JtYXQuQ1NTLmZvcm1hdFJHQkEobSl9bi5mb3JtYXRSR0I9cjtmdW5jdGlvbiBzKG0pe3JldHVybmByZ2JhKCR7bS5yZ2JhLnJ9LCAke20ucmdiYS5nfSwgJHttLnJnYmEuYn0sICR7K20ucmdiYS5hLnRvRml4ZWQoMil9KWB9bi5mb3JtYXRSR0JBPXM7ZnVuY3Rpb24gaShtKXtyZXR1cm4gbS5oc2xhLmE9PT0xP2Boc2woJHttLmhzbGEuaH0sICR7KG0uaHNsYS5zKjEwMCkudG9GaXhlZCgyKX0lLCAkeyhtLmhzbGEubCoxMDApLnRvRml4ZWQoMil9JSlgOmUuRm9ybWF0LkNTUy5mb3JtYXRIU0xBKG0pfW4uZm9ybWF0SFNMPWk7ZnVuY3Rpb24gbyhtKXtyZXR1cm5gaHNsYSgke20uaHNsYS5ofSwgJHsobS5oc2xhLnMqMTAwKS50b0ZpeGVkKDIpfSUsICR7KG0uaHNsYS5sKjEwMCkudG9GaXhlZCgyKX0lLCAke20uaHNsYS5hLnRvRml4ZWQoMil9KWB9bi5mb3JtYXRIU0xBPW87ZnVuY3Rpb24gbChtKXtjb25zdCBnPW0udG9TdHJpbmcoMTYpO3JldHVybiBnLmxlbmd0aCE9PTI/IjAiK2c6Z31mdW5jdGlvbiB1KG0pe3JldHVybmAjJHtsKG0ucmdiYS5yKX0ke2wobS5yZ2JhLmcpfSR7bChtLnJnYmEuYil9YH1uLmZvcm1hdEhleD11O2Z1bmN0aW9uIGMobSxnPSExKXtyZXR1cm4gZyYmbS5yZ2JhLmE9PT0xP2UuRm9ybWF0LkNTUy5mb3JtYXRIZXgobSk6YCMke2wobS5yZ2JhLnIpfSR7bChtLnJnYmEuZyl9JHtsKG0ucmdiYS5iKX0ke2woTWF0aC5yb3VuZChtLnJnYmEuYSoyNTUpKX1gfW4uZm9ybWF0SGV4QT1jO2Z1bmN0aW9uIGYobSl7cmV0dXJuIG0uaXNPcGFxdWUoKT9lLkZvcm1hdC5DU1MuZm9ybWF0SGV4KG0pOmUuRm9ybWF0LkNTUy5mb3JtYXRSR0JBKG0pfW4uZm9ybWF0PWY7ZnVuY3Rpb24gaChtKXtjb25zdCBnPW0ubGVuZ3RoO2lmKGc9PT0wfHxtLmNoYXJDb2RlQXQoMCkhPT0zNSlyZXR1cm4gbnVsbDtpZihnPT09Nyl7Y29uc3QgeD0xNipkKG0uY2hhckNvZGVBdCgxKSkrZChtLmNoYXJDb2RlQXQoMikpLHY9MTYqZChtLmNoYXJDb2RlQXQoMykpK2QobS5jaGFyQ29kZUF0KDQpKSxMPTE2KmQobS5jaGFyQ29kZUF0KDUpKStkKG0uY2hhckNvZGVBdCg2KSk7cmV0dXJuIG5ldyBlKG5ldyBPKHgsdixMLDEpKX1pZihnPT09OSl7Y29uc3QgeD0xNipkKG0uY2hhckNvZGVBdCgxKSkrZChtLmNoYXJDb2RlQXQoMikpLHY9MTYqZChtLmNoYXJDb2RlQXQoMykpK2QobS5jaGFyQ29kZUF0KDQpKSxMPTE2KmQobS5jaGFyQ29kZUF0KDUpKStkKG0uY2hhckNvZGVBdCg2KSksUz0xNipkKG0uY2hhckNvZGVBdCg3KSkrZChtLmNoYXJDb2RlQXQoOCkpO3JldHVybiBuZXcgZShuZXcgTyh4LHYsTCxTLzI1NSkpfWlmKGc9PT00KXtjb25zdCB4PWQobS5jaGFyQ29kZUF0KDEpKSx2PWQobS5jaGFyQ29kZUF0KDIpKSxMPWQobS5jaGFyQ29kZUF0KDMpKTtyZXR1cm4gbmV3IGUobmV3IE8oMTYqeCt4LDE2KnYrdiwxNipMK0wpKX1pZihnPT09NSl7Y29uc3QgeD1kKG0uY2hhckNvZGVBdCgxKSksdj1kKG0uY2hhckNvZGVBdCgyKSksTD1kKG0uY2hhckNvZGVBdCgzKSksUz1kKG0uY2hhckNvZGVBdCg0KSk7cmV0dXJuIG5ldyBlKG5ldyBPKDE2KngreCwxNip2K3YsMTYqTCtMLCgxNipTK1MpLzI1NSkpfXJldHVybiBudWxsfW4ucGFyc2VIZXg9aDtmdW5jdGlvbiBkKG0pe3N3aXRjaChtKXtjYXNlIDQ4OnJldHVybiAwO2Nhc2UgNDk6cmV0dXJuIDE7Y2FzZSA1MDpyZXR1cm4gMjtjYXNlIDUxOnJldHVybiAzO2Nhc2UgNTI6cmV0dXJuIDQ7Y2FzZSA1MzpyZXR1cm4gNTtjYXNlIDU0OnJldHVybiA2O2Nhc2UgNTU6cmV0dXJuIDc7Y2FzZSA1NjpyZXR1cm4gODtjYXNlIDU3OnJldHVybiA5O2Nhc2UgOTc6cmV0dXJuIDEwO2Nhc2UgNjU6cmV0dXJuIDEwO2Nhc2UgOTg6cmV0dXJuIDExO2Nhc2UgNjY6cmV0dXJuIDExO2Nhc2UgOTk6cmV0dXJuIDEyO2Nhc2UgNjc6cmV0dXJuIDEyO2Nhc2UgMTAwOnJldHVybiAxMztjYXNlIDY4OnJldHVybiAxMztjYXNlIDEwMTpyZXR1cm4gMTQ7Y2FzZSA2OTpyZXR1cm4gMTQ7Y2FzZSAxMDI6cmV0dXJuIDE1O2Nhc2UgNzA6cmV0dXJuIDE1fXJldHVybiAwfX0pKHQuQ1NTfHwodC5DU1M9e30pKX0pKGUuRm9ybWF0fHwoZS5Gb3JtYXQ9e30pKX0oSXx8KEk9e30pKTtmdW5jdGlvbiBYcihlKXtjb25zdCB0PVtdO2Zvcihjb25zdCBuIG9mIGUpe2NvbnN0IHI9TnVtYmVyKG4pOyhyfHxyPT09MCYmbi5yZXBsYWNlKC9ccy9nLCIiKSE9PSIiKSYmdC5wdXNoKHIpfXJldHVybiB0fWZ1bmN0aW9uIEp0KGUsdCxuLHIpe3JldHVybntyZWQ6ZS8yNTUsYmx1ZTpuLzI1NSxncmVlbjp0LzI1NSxhbHBoYTpyfX1mdW5jdGlvbiBKZShlLHQpe2NvbnN0IG49dC5pbmRleCxyPXRbMF0ubGVuZ3RoO2lmKCFuKXJldHVybjtjb25zdCBzPWUucG9zaXRpb25BdChuKTtyZXR1cm57c3RhcnRMaW5lTnVtYmVyOnMubGluZU51bWJlcixzdGFydENvbHVtbjpzLmNvbHVtbixlbmRMaW5lTnVtYmVyOnMubGluZU51bWJlcixlbmRDb2x1bW46cy5jb2x1bW4rcn19ZnVuY3Rpb24gcGEoZSx0KXtpZighZSlyZXR1cm47Y29uc3Qgbj1JLkZvcm1hdC5DU1MucGFyc2VIZXgodCk7aWYobilyZXR1cm57cmFuZ2U6ZSxjb2xvcjpKdChuLnJnYmEucixuLnJnYmEuZyxuLnJnYmEuYixuLnJnYmEuYSl9fWZ1bmN0aW9uIFFyKGUsdCxuKXtpZighZXx8dC5sZW5ndGghPT0xKXJldHVybjtjb25zdCBzPXRbMF0udmFsdWVzKCksaT1YcihzKTtyZXR1cm57cmFuZ2U6ZSxjb2xvcjpKdChpWzBdLGlbMV0saVsyXSxuP2lbM106MSl9fWZ1bmN0aW9uIEpyKGUsdCxuKXtpZighZXx8dC5sZW5ndGghPT0xKXJldHVybjtjb25zdCBzPXRbMF0udmFsdWVzKCksaT1YcihzKSxvPW5ldyBJKG5ldyByZShpWzBdLGlbMV0vMTAwLGlbMl0vMTAwLG4/aVszXToxKSk7cmV0dXJue3JhbmdlOmUsY29sb3I6SnQoby5yZ2JhLnIsby5yZ2JhLmcsby5yZ2JhLmIsby5yZ2JhLmEpfX1mdW5jdGlvbiBZZShlLHQpe3JldHVybiB0eXBlb2YgZT09InN0cmluZyI/Wy4uLmUubWF0Y2hBbGwodCldOmUuZmluZE1hdGNoZXModCl9ZnVuY3Rpb24gdmEoZSl7Y29uc3QgdD1bXSxyPVllKGUsL1xiKHJnYnxyZ2JhfGhzbHxoc2xhKShcKFswLTlccywuXCVdKlwpKXwoIykoW0EtRmEtZjAtOV17M30pXGJ8KCMpKFtBLUZhLWYwLTldezR9KVxifCgjKShbQS1GYS1mMC05XXs2fSlcYnwoIykoW0EtRmEtZjAtOV17OH0pXGIvZ20pO2lmKHIubGVuZ3RoPjApZm9yKGNvbnN0IHMgb2Ygcil7Y29uc3QgaT1zLmZpbHRlcihjPT5jIT09dm9pZCAwKSxvPWlbMV0sbD1pWzJdO2lmKCFsKWNvbnRpbnVlO2xldCB1O2lmKG89PT0icmdiIil7Y29uc3QgYz0vXlwoXHMqKDI1WzAtNV18MlswLTRdWzAtOV18MVswLTldezJ9fFsxLTldWzAtOV18WzAtOV0pXHMqLFxzKigyNVswLTVdfDJbMC00XVswLTldfDFbMC05XXsyfXxbMS05XVswLTldfFswLTldKVxzKixccyooMjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV17Mn18WzEtOV1bMC05XXxbMC05XSlccypcKSQvZ207dT1RcihKZShlLHMpLFllKGwsYyksITEpfWVsc2UgaWYobz09PSJyZ2JhIil7Y29uc3QgYz0vXlwoXHMqKDI1WzAtNV18MlswLTRdWzAtOV18MVswLTldezJ9fFsxLTldWzAtOV18WzAtOV0pXHMqLFxzKigyNVswLTVdfDJbMC00XVswLTldfDFbMC05XXsyfXxbMS05XVswLTldfFswLTldKVxzKixccyooMjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV17Mn18WzEtOV1bMC05XXxbMC05XSlccyosXHMqKDBbLl1bMC05XSt8Wy5dWzAtOV0rfFswMV1bLl18WzAxXSlccypcKSQvZ207dT1RcihKZShlLHMpLFllKGwsYyksITApfWVsc2UgaWYobz09PSJoc2wiKXtjb25zdCBjPS9eXChccyooMzZbMF18M1swLTVdWzAtOV18WzEyXVswLTldWzAtOV18WzEtOV0/WzAtOV0pXHMqLFxzKigxMDB8XGR7MSwyfVsuXVxkKnxcZHsxLDJ9KSVccyosXHMqKDEwMHxcZHsxLDJ9Wy5dXGQqfFxkezEsMn0pJVxzKlwpJC9nbTt1PUpyKEplKGUscyksWWUobCxjKSwhMSl9ZWxzZSBpZihvPT09ImhzbGEiKXtjb25zdCBjPS9eXChccyooMzZbMF18M1swLTVdWzAtOV18WzEyXVswLTldWzAtOV18WzEtOV0/WzAtOV0pXHMqLFxzKigxMDB8XGR7MSwyfVsuXVxkKnxcZHsxLDJ9KSVccyosXHMqKDEwMHxcZHsxLDJ9Wy5dXGQqfFxkezEsMn0pJVxzKixccyooMFsuXVswLTldK3xbLl1bMC05XSt8WzAxXVsuXXxbMDFdKVxzKlwpJC9nbTt1PUpyKEplKGUscyksWWUobCxjKSwhMCl9ZWxzZSBvPT09IiMiJiYodT1wYShKZShlLHMpLG8rbCkpO3UmJnQucHVzaCh1KX1yZXR1cm4gdH1mdW5jdGlvbiB3YShlKXtyZXR1cm4hZXx8dHlwZW9mIGUuZ2V0VmFsdWUhPSJmdW5jdGlvbiJ8fHR5cGVvZiBlLnBvc2l0aW9uQXQhPSJmdW5jdGlvbiI/W106dmEoZSl9Y29uc3QgWXI9bmV3IFJlZ0V4cCgiXFxiTUFSSzpcXHMqKC4qKSQiLCJkIiksTGE9L14tK3wtKyQvZztmdW5jdGlvbiBOYShlLHQpe3ZhciBuO2xldCByPVtdO2lmKHQuZmluZFJlZ2lvblNlY3Rpb25IZWFkZXJzJiYoISgobj10LmZvbGRpbmdSdWxlcyk9PT1udWxsfHxuPT09dm9pZCAwKSYmbi5tYXJrZXJzKSl7Y29uc3Qgcz1TYShlLHQpO3I9ci5jb25jYXQocyl9aWYodC5maW5kTWFya1NlY3Rpb25IZWFkZXJzKXtjb25zdCBzPUNhKGUpO3I9ci5jb25jYXQocyl9cmV0dXJuIHJ9ZnVuY3Rpb24gU2EoZSx0KXtjb25zdCBuPVtdLHI9ZS5nZXRMaW5lQ291bnQoKTtmb3IobGV0IHM9MTtzPD1yO3MrKyl7Y29uc3QgaT1lLmdldExpbmVDb250ZW50KHMpLG89aS5tYXRjaCh0LmZvbGRpbmdSdWxlcy5tYXJrZXJzLnN0YXJ0KTtpZihvKXtjb25zdCBsPXtzdGFydExpbmVOdW1iZXI6cyxzdGFydENvbHVtbjpvWzBdLmxlbmd0aCsxLGVuZExpbmVOdW1iZXI6cyxlbmRDb2x1bW46aS5sZW5ndGgrMX07aWYobC5lbmRDb2x1bW4+bC5zdGFydENvbHVtbil7Y29uc3QgdT17cmFuZ2U6bCwuLi5acihpLnN1YnN0cmluZyhvWzBdLmxlbmd0aCkpLHNob3VsZEJlSW5Db21tZW50czohMX07KHUudGV4dHx8dS5oYXNTZXBhcmF0b3JMaW5lKSYmbi5wdXNoKHUpfX19cmV0dXJuIG59ZnVuY3Rpb24gQ2EoZSl7Y29uc3QgdD1bXSxuPWUuZ2V0TGluZUNvdW50KCk7Zm9yKGxldCByPTE7cjw9bjtyKyspe2NvbnN0IHM9ZS5nZXRMaW5lQ29udGVudChyKTtBYShzLHIsdCl9cmV0dXJuIHR9ZnVuY3Rpb24gQWEoZSx0LG4pe1lyLmxhc3RJbmRleD0wO2NvbnN0IHI9WXIuZXhlYyhlKTtpZihyKXtjb25zdCBzPXIuaW5kaWNlc1sxXVswXSsxLGk9ci5pbmRpY2VzWzFdWzFdKzEsbz17c3RhcnRMaW5lTnVtYmVyOnQsc3RhcnRDb2x1bW46cyxlbmRMaW5lTnVtYmVyOnQsZW5kQ29sdW1uOml9O2lmKG8uZW5kQ29sdW1uPm8uc3RhcnRDb2x1bW4pe2NvbnN0IGw9e3JhbmdlOm8sLi4uWnIoclsxXSksc2hvdWxkQmVJbkNvbW1lbnRzOiEwfTsobC50ZXh0fHxsLmhhc1NlcGFyYXRvckxpbmUpJiZuLnB1c2gobCl9fX1mdW5jdGlvbiBacihlKXtlPWUudHJpbSgpO2NvbnN0IHQ9ZS5zdGFydHNXaXRoKCItIik7cmV0dXJuIGU9ZS5yZXBsYWNlKExhLCIiKSx7dGV4dDplLGhhc1NlcGFyYXRvckxpbmU6dH19Y2xhc3MgUmEgZXh0ZW5kcyBnaXtnZXQgdXJpKCl7cmV0dXJuIHRoaXMuX3VyaX1nZXQgZW9sKCl7cmV0dXJuIHRoaXMuX2VvbH1nZXRWYWx1ZSgpe3JldHVybiB0aGlzLmdldFRleHQoKX1maW5kTWF0Y2hlcyh0KXtjb25zdCBuPVtdO2ZvcihsZXQgcj0wO3I8dGhpcy5fbGluZXMubGVuZ3RoO3IrKyl7Y29uc3Qgcz10aGlzLl9saW5lc1tyXSxpPXRoaXMub2Zmc2V0QXQobmV3IEoocisxLDEpKSxvPXMubWF0Y2hBbGwodCk7Zm9yKGNvbnN0IGwgb2YgbykobC5pbmRleHx8bC5pbmRleD09PTApJiYobC5pbmRleD1sLmluZGV4K2kpLG4ucHVzaChsKX1yZXR1cm4gbn1nZXRMaW5lc0NvbnRlbnQoKXtyZXR1cm4gdGhpcy5fbGluZXMuc2xpY2UoMCl9Z2V0TGluZUNvdW50KCl7cmV0dXJuIHRoaXMuX2xpbmVzLmxlbmd0aH1nZXRMaW5lQ29udGVudCh0KXtyZXR1cm4gdGhpcy5fbGluZXNbdC0xXX1nZXRXb3JkQXRQb3NpdGlvbih0LG4pe2NvbnN0IHI9UHQodC5jb2x1bW4sd24obiksdGhpcy5fbGluZXNbdC5saW5lTnVtYmVyLTFdLDApO3JldHVybiByP25ldyBGKHQubGluZU51bWJlcixyLnN0YXJ0Q29sdW1uLHQubGluZU51bWJlcixyLmVuZENvbHVtbik6bnVsbH13b3Jkcyh0KXtjb25zdCBuPXRoaXMuX2xpbmVzLHI9dGhpcy5fd29yZGVuaXplLmJpbmQodGhpcyk7bGV0IHM9MCxpPSIiLG89MCxsPVtdO3JldHVybnsqW1N5bWJvbC5pdGVyYXRvcl0oKXtmb3IoOzspaWYobzxsLmxlbmd0aCl7Y29uc3QgdT1pLnN1YnN0cmluZyhsW29dLnN0YXJ0LGxbb10uZW5kKTtvKz0xLHlpZWxkIHV9ZWxzZSBpZihzPG4ubGVuZ3RoKWk9bltzXSxsPXIoaSx0KSxvPTAscys9MTtlbHNlIGJyZWFrfX19Z2V0TGluZVdvcmRzKHQsbil7Y29uc3Qgcj10aGlzLl9saW5lc1t0LTFdLHM9dGhpcy5fd29yZGVuaXplKHIsbiksaT1bXTtmb3IoY29uc3QgbyBvZiBzKWkucHVzaCh7d29yZDpyLnN1YnN0cmluZyhvLnN0YXJ0LG8uZW5kKSxzdGFydENvbHVtbjpvLnN0YXJ0KzEsZW5kQ29sdW1uOm8uZW5kKzF9KTtyZXR1cm4gaX1fd29yZGVuaXplKHQsbil7Y29uc3Qgcj1bXTtsZXQgcztmb3Iobi5sYXN0SW5kZXg9MDsocz1uLmV4ZWModCkpJiZzWzBdLmxlbmd0aCE9PTA7KXIucHVzaCh7c3RhcnQ6cy5pbmRleCxlbmQ6cy5pbmRleCtzWzBdLmxlbmd0aH0pO3JldHVybiByfWdldFZhbHVlSW5SYW5nZSh0KXtpZih0PXRoaXMuX3ZhbGlkYXRlUmFuZ2UodCksdC5zdGFydExpbmVOdW1iZXI9PT10LmVuZExpbmVOdW1iZXIpcmV0dXJuIHRoaXMuX2xpbmVzW3Quc3RhcnRMaW5lTnVtYmVyLTFdLnN1YnN0cmluZyh0LnN0YXJ0Q29sdW1uLTEsdC5lbmRDb2x1bW4tMSk7Y29uc3Qgbj10aGlzLl9lb2wscj10LnN0YXJ0TGluZU51bWJlci0xLHM9dC5lbmRMaW5lTnVtYmVyLTEsaT1bXTtpLnB1c2godGhpcy5fbGluZXNbcl0uc3Vic3RyaW5nKHQuc3RhcnRDb2x1bW4tMSkpO2ZvcihsZXQgbz1yKzE7bzxzO28rKylpLnB1c2godGhpcy5fbGluZXNbb10pO3JldHVybiBpLnB1c2godGhpcy5fbGluZXNbc10uc3Vic3RyaW5nKDAsdC5lbmRDb2x1bW4tMSkpLGkuam9pbihuKX1vZmZzZXRBdCh0KXtyZXR1cm4gdD10aGlzLl92YWxpZGF0ZVBvc2l0aW9uKHQpLHRoaXMuX2Vuc3VyZUxpbmVTdGFydHMoKSx0aGlzLl9saW5lU3RhcnRzLmdldFByZWZpeFN1bSh0LmxpbmVOdW1iZXItMikrKHQuY29sdW1uLTEpfXBvc2l0aW9uQXQodCl7dD1NYXRoLmZsb29yKHQpLHQ9TWF0aC5tYXgoMCx0KSx0aGlzLl9lbnN1cmVMaW5lU3RhcnRzKCk7Y29uc3Qgbj10aGlzLl9saW5lU3RhcnRzLmdldEluZGV4T2YodCkscj10aGlzLl9saW5lc1tuLmluZGV4XS5sZW5ndGg7cmV0dXJue2xpbmVOdW1iZXI6MStuLmluZGV4LGNvbHVtbjoxK01hdGgubWluKG4ucmVtYWluZGVyLHIpfX1fdmFsaWRhdGVSYW5nZSh0KXtjb25zdCBuPXRoaXMuX3ZhbGlkYXRlUG9zaXRpb24oe2xpbmVOdW1iZXI6dC5zdGFydExpbmVOdW1iZXIsY29sdW1uOnQuc3RhcnRDb2x1bW59KSxyPXRoaXMuX3ZhbGlkYXRlUG9zaXRpb24oe2xpbmVOdW1iZXI6dC5lbmRMaW5lTnVtYmVyLGNvbHVtbjp0LmVuZENvbHVtbn0pO3JldHVybiBuLmxpbmVOdW1iZXIhPT10LnN0YXJ0TGluZU51bWJlcnx8bi5jb2x1bW4hPT10LnN0YXJ0Q29sdW1ufHxyLmxpbmVOdW1iZXIhPT10LmVuZExpbmVOdW1iZXJ8fHIuY29sdW1uIT09dC5lbmRDb2x1bW4/e3N0YXJ0TGluZU51bWJlcjpuLmxpbmVOdW1iZXIsc3RhcnRDb2x1bW46bi5jb2x1bW4sZW5kTGluZU51bWJlcjpyLmxpbmVOdW1iZXIsZW5kQ29sdW1uOnIuY29sdW1ufTp0fV92YWxpZGF0ZVBvc2l0aW9uKHQpe2lmKCFKLmlzSVBvc2l0aW9uKHQpKXRocm93IG5ldyBFcnJvcigiYmFkIHBvc2l0aW9uIik7bGV0e2xpbmVOdW1iZXI6bixjb2x1bW46cn09dCxzPSExO2lmKG48MSluPTEscj0xLHM9ITA7ZWxzZSBpZihuPnRoaXMuX2xpbmVzLmxlbmd0aCluPXRoaXMuX2xpbmVzLmxlbmd0aCxyPXRoaXMuX2xpbmVzW24tMV0ubGVuZ3RoKzEscz0hMDtlbHNle2NvbnN0IGk9dGhpcy5fbGluZXNbbi0xXS5sZW5ndGgrMTtyPDE/KHI9MSxzPSEwKTpyPmkmJihyPWkscz0hMCl9cmV0dXJuIHM/e2xpbmVOdW1iZXI6bixjb2x1bW46cn06dH19Y2xhc3MgQ2V7Y29uc3RydWN0b3IodCxuKXt0aGlzLl9ob3N0PXQsdGhpcy5fbW9kZWxzPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5fZm9yZWlnbk1vZHVsZUZhY3Rvcnk9bix0aGlzLl9mb3JlaWduTW9kdWxlPW51bGx9ZGlzcG9zZSgpe3RoaXMuX21vZGVscz1PYmplY3QuY3JlYXRlKG51bGwpfV9nZXRNb2RlbCh0KXtyZXR1cm4gdGhpcy5fbW9kZWxzW3RdfV9nZXRNb2RlbHMoKXtjb25zdCB0PVtdO3JldHVybiBPYmplY3Qua2V5cyh0aGlzLl9tb2RlbHMpLmZvckVhY2gobj0+dC5wdXNoKHRoaXMuX21vZGVsc1tuXSkpLHR9YWNjZXB0TmV3TW9kZWwodCl7dGhpcy5fbW9kZWxzW3QudXJsXT1uZXcgUmEoU2UucGFyc2UodC51cmwpLHQubGluZXMsdC5FT0wsdC52ZXJzaW9uSWQpfWFjY2VwdE1vZGVsQ2hhbmdlZCh0LG4pe2lmKCF0aGlzLl9tb2RlbHNbdF0pcmV0dXJuO3RoaXMuX21vZGVsc1t0XS5vbkV2ZW50cyhuKX1hY2NlcHRSZW1vdmVkTW9kZWwodCl7dGhpcy5fbW9kZWxzW3RdJiZkZWxldGUgdGhpcy5fbW9kZWxzW3RdfWFzeW5jIGNvbXB1dGVVbmljb2RlSGlnaGxpZ2h0cyh0LG4scil7Y29uc3Qgcz10aGlzLl9nZXRNb2RlbCh0KTtyZXR1cm4gcz8kaS5jb21wdXRlVW5pY29kZUhpZ2hsaWdodHMocyxuLHIpOntyYW5nZXM6W10saGFzTW9yZTohMSxhbWJpZ3VvdXNDaGFyYWN0ZXJDb3VudDowLGludmlzaWJsZUNoYXJhY3RlckNvdW50OjAsbm9uQmFzaWNBc2NpaUNoYXJhY3RlckNvdW50OjB9fWFzeW5jIGZpbmRTZWN0aW9uSGVhZGVycyh0LG4pe2NvbnN0IHI9dGhpcy5fZ2V0TW9kZWwodCk7cmV0dXJuIHI/TmEocixuKTpbXX1hc3luYyBjb21wdXRlRGlmZih0LG4scixzKXtjb25zdCBpPXRoaXMuX2dldE1vZGVsKHQpLG89dGhpcy5fZ2V0TW9kZWwobik7cmV0dXJuIWl8fCFvP251bGw6Q2UuY29tcHV0ZURpZmYoaSxvLHIscyl9c3RhdGljIGNvbXB1dGVEaWZmKHQsbixyLHMpe2NvbnN0IGk9cz09PSJhZHZhbmNlZCI/anIuZ2V0RGVmYXVsdCgpOmpyLmdldExlZ2FjeSgpLG89dC5nZXRMaW5lc0NvbnRlbnQoKSxsPW4uZ2V0TGluZXNDb250ZW50KCksdT1pLmNvbXB1dGVEaWZmKG8sbCxyKSxjPXUuY2hhbmdlcy5sZW5ndGg+MD8hMTp0aGlzLl9tb2RlbHNBcmVJZGVudGljYWwodCxuKTtmdW5jdGlvbiBmKGgpe3JldHVybiBoLm1hcChkPT57dmFyIG07cmV0dXJuW2Qub3JpZ2luYWwuc3RhcnRMaW5lTnVtYmVyLGQub3JpZ2luYWwuZW5kTGluZU51bWJlckV4Y2x1c2l2ZSxkLm1vZGlmaWVkLnN0YXJ0TGluZU51bWJlcixkLm1vZGlmaWVkLmVuZExpbmVOdW1iZXJFeGNsdXNpdmUsKG09ZC5pbm5lckNoYW5nZXMpPT09bnVsbHx8bT09PXZvaWQgMD92b2lkIDA6bS5tYXAoZz0+W2cub3JpZ2luYWxSYW5nZS5zdGFydExpbmVOdW1iZXIsZy5vcmlnaW5hbFJhbmdlLnN0YXJ0Q29sdW1uLGcub3JpZ2luYWxSYW5nZS5lbmRMaW5lTnVtYmVyLGcub3JpZ2luYWxSYW5nZS5lbmRDb2x1bW4sZy5tb2RpZmllZFJhbmdlLnN0YXJ0TGluZU51bWJlcixnLm1vZGlmaWVkUmFuZ2Uuc3RhcnRDb2x1bW4sZy5tb2RpZmllZFJhbmdlLmVuZExpbmVOdW1iZXIsZy5tb2RpZmllZFJhbmdlLmVuZENvbHVtbl0pXX0pfXJldHVybntpZGVudGljYWw6YyxxdWl0RWFybHk6dS5oaXRUaW1lb3V0LGNoYW5nZXM6Zih1LmNoYW5nZXMpLG1vdmVzOnUubW92ZXMubWFwKGg9PltoLmxpbmVSYW5nZU1hcHBpbmcub3JpZ2luYWwuc3RhcnRMaW5lTnVtYmVyLGgubGluZVJhbmdlTWFwcGluZy5vcmlnaW5hbC5lbmRMaW5lTnVtYmVyRXhjbHVzaXZlLGgubGluZVJhbmdlTWFwcGluZy5tb2RpZmllZC5zdGFydExpbmVOdW1iZXIsaC5saW5lUmFuZ2VNYXBwaW5nLm1vZGlmaWVkLmVuZExpbmVOdW1iZXJFeGNsdXNpdmUsZihoLmNoYW5nZXMpXSl9fXN0YXRpYyBfbW9kZWxzQXJlSWRlbnRpY2FsKHQsbil7Y29uc3Qgcj10LmdldExpbmVDb3VudCgpLHM9bi5nZXRMaW5lQ291bnQoKTtpZihyIT09cylyZXR1cm4hMTtmb3IobGV0IGk9MTtpPD1yO2krKyl7Y29uc3Qgbz10LmdldExpbmVDb250ZW50KGkpLGw9bi5nZXRMaW5lQ29udGVudChpKTtpZihvIT09bClyZXR1cm4hMX1yZXR1cm4hMH1hc3luYyBjb21wdXRlTW9yZU1pbmltYWxFZGl0cyh0LG4scil7Y29uc3Qgcz10aGlzLl9nZXRNb2RlbCh0KTtpZighcylyZXR1cm4gbjtjb25zdCBpPVtdO2xldCBvO249bi5zbGljZSgwKS5zb3J0KCh1LGMpPT57aWYodS5yYW5nZSYmYy5yYW5nZSlyZXR1cm4gRi5jb21wYXJlUmFuZ2VzVXNpbmdTdGFydHModS5yYW5nZSxjLnJhbmdlKTtjb25zdCBmPXUucmFuZ2U/MDoxLGg9Yy5yYW5nZT8wOjE7cmV0dXJuIGYtaH0pO2xldCBsPTA7Zm9yKGxldCB1PTE7dTxuLmxlbmd0aDt1KyspRi5nZXRFbmRQb3NpdGlvbihuW2xdLnJhbmdlKS5lcXVhbHMoRi5nZXRTdGFydFBvc2l0aW9uKG5bdV0ucmFuZ2UpKT8obltsXS5yYW5nZT1GLmZyb21Qb3NpdGlvbnMoRi5nZXRTdGFydFBvc2l0aW9uKG5bbF0ucmFuZ2UpLEYuZ2V0RW5kUG9zaXRpb24oblt1XS5yYW5nZSkpLG5bbF0udGV4dCs9blt1XS50ZXh0KToobCsrLG5bbF09blt1XSk7bi5sZW5ndGg9bCsxO2ZvcihsZXR7cmFuZ2U6dSx0ZXh0OmMsZW9sOmZ9b2Ygbil7aWYodHlwZW9mIGY9PSJudW1iZXIiJiYobz1mKSxGLmlzRW1wdHkodSkmJiFjKWNvbnRpbnVlO2NvbnN0IGg9cy5nZXRWYWx1ZUluUmFuZ2UodSk7aWYoYz1jLnJlcGxhY2UoL1xyXG58XG58XHIvZyxzLmVvbCksaD09PWMpY29udGludWU7aWYoTWF0aC5tYXgoYy5sZW5ndGgsaC5sZW5ndGgpPkNlLl9kaWZmTGltaXQpe2kucHVzaCh7cmFuZ2U6dSx0ZXh0OmN9KTtjb250aW51ZX1jb25zdCBkPXpzKGgsYyxyKSxtPXMub2Zmc2V0QXQoRi5saWZ0KHUpLmdldFN0YXJ0UG9zaXRpb24oKSk7Zm9yKGNvbnN0IGcgb2YgZCl7Y29uc3QgeD1zLnBvc2l0aW9uQXQobStnLm9yaWdpbmFsU3RhcnQpLHY9cy5wb3NpdGlvbkF0KG0rZy5vcmlnaW5hbFN0YXJ0K2cub3JpZ2luYWxMZW5ndGgpLEw9e3RleHQ6Yy5zdWJzdHIoZy5tb2RpZmllZFN0YXJ0LGcubW9kaWZpZWRMZW5ndGgpLHJhbmdlOntzdGFydExpbmVOdW1iZXI6eC5saW5lTnVtYmVyLHN0YXJ0Q29sdW1uOnguY29sdW1uLGVuZExpbmVOdW1iZXI6di5saW5lTnVtYmVyLGVuZENvbHVtbjp2LmNvbHVtbn19O3MuZ2V0VmFsdWVJblJhbmdlKEwucmFuZ2UpIT09TC50ZXh0JiZpLnB1c2goTCl9fXJldHVybiB0eXBlb2Ygbz09Im51bWJlciImJmkucHVzaCh7ZW9sOm8sdGV4dDoiIixyYW5nZTp7c3RhcnRMaW5lTnVtYmVyOjAsc3RhcnRDb2x1bW46MCxlbmRMaW5lTnVtYmVyOjAsZW5kQ29sdW1uOjB9fSksaX1hc3luYyBjb21wdXRlTGlua3ModCl7Y29uc3Qgbj10aGlzLl9nZXRNb2RlbCh0KTtyZXR1cm4gbj9OaShuKTpudWxsfWFzeW5jIGNvbXB1dGVEZWZhdWx0RG9jdW1lbnRDb2xvcnModCl7Y29uc3Qgbj10aGlzLl9nZXRNb2RlbCh0KTtyZXR1cm4gbj93YShuKTpudWxsfWFzeW5jIHRleHR1YWxTdWdnZXN0KHQsbixyLHMpe2NvbnN0IGk9bmV3IHR0LG89bmV3IFJlZ0V4cChyLHMpLGw9bmV3IFNldDtlOmZvcihjb25zdCB1IG9mIHQpe2NvbnN0IGM9dGhpcy5fZ2V0TW9kZWwodSk7aWYoYyl7Zm9yKGNvbnN0IGYgb2YgYy53b3JkcyhvKSlpZighKGY9PT1ufHwhaXNOYU4oTnVtYmVyKGYpKSkmJihsLmFkZChmKSxsLnNpemU+Q2UuX3N1Z2dlc3Rpb25zTGltaXQpKWJyZWFrIGV9fXJldHVybnt3b3JkczpBcnJheS5mcm9tKGwpLGR1cmF0aW9uOmkuZWxhcHNlZCgpfX1hc3luYyBjb21wdXRlV29yZFJhbmdlcyh0LG4scixzKXtjb25zdCBpPXRoaXMuX2dldE1vZGVsKHQpO2lmKCFpKXJldHVybiBPYmplY3QuY3JlYXRlKG51bGwpO2NvbnN0IG89bmV3IFJlZ0V4cChyLHMpLGw9T2JqZWN0LmNyZWF0ZShudWxsKTtmb3IobGV0IHU9bi5zdGFydExpbmVOdW1iZXI7dTxuLmVuZExpbmVOdW1iZXI7dSsrKXtjb25zdCBjPWkuZ2V0TGluZVdvcmRzKHUsbyk7Zm9yKGNvbnN0IGYgb2YgYyl7aWYoIWlzTmFOKE51bWJlcihmLndvcmQpKSljb250aW51ZTtsZXQgaD1sW2Yud29yZF07aHx8KGg9W10sbFtmLndvcmRdPWgpLGgucHVzaCh7c3RhcnRMaW5lTnVtYmVyOnUsc3RhcnRDb2x1bW46Zi5zdGFydENvbHVtbixlbmRMaW5lTnVtYmVyOnUsZW5kQ29sdW1uOmYuZW5kQ29sdW1ufSl9fXJldHVybiBsfWFzeW5jIG5hdmlnYXRlVmFsdWVTZXQodCxuLHIscyxpKXtjb25zdCBvPXRoaXMuX2dldE1vZGVsKHQpO2lmKCFvKXJldHVybiBudWxsO2NvbnN0IGw9bmV3IFJlZ0V4cChzLGkpO24uc3RhcnRDb2x1bW49PT1uLmVuZENvbHVtbiYmKG49e3N0YXJ0TGluZU51bWJlcjpuLnN0YXJ0TGluZU51bWJlcixzdGFydENvbHVtbjpuLnN0YXJ0Q29sdW1uLGVuZExpbmVOdW1iZXI6bi5lbmRMaW5lTnVtYmVyLGVuZENvbHVtbjpuLmVuZENvbHVtbisxfSk7Y29uc3QgdT1vLmdldFZhbHVlSW5SYW5nZShuKSxjPW8uZ2V0V29yZEF0UG9zaXRpb24oe2xpbmVOdW1iZXI6bi5zdGFydExpbmVOdW1iZXIsY29sdW1uOm4uc3RhcnRDb2x1bW59LGwpO2lmKCFjKXJldHVybiBudWxsO2NvbnN0IGY9by5nZXRWYWx1ZUluUmFuZ2UoYyk7cmV0dXJuIFZ0LklOU1RBTkNFLm5hdmlnYXRlVmFsdWVTZXQobix1LGMsZixyKX1sb2FkRm9yZWlnbk1vZHVsZSh0LG4scil7Y29uc3Qgbz17aG9zdDpncyhyLChsLHUpPT50aGlzLl9ob3N0LmZocihsLHUpKSxnZXRNaXJyb3JNb2RlbHM6KCk9PnRoaXMuX2dldE1vZGVscygpfTtyZXR1cm4gdGhpcy5fZm9yZWlnbk1vZHVsZUZhY3Rvcnk/KHRoaXMuX2ZvcmVpZ25Nb2R1bGU9dGhpcy5fZm9yZWlnbk1vZHVsZUZhY3RvcnkobyxuKSxQcm9taXNlLnJlc29sdmUod3QodGhpcy5fZm9yZWlnbk1vZHVsZSkpKTpQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIlVuZXhwZWN0ZWQgdXNhZ2UiKSl9Zm1yKHQsbil7aWYoIXRoaXMuX2ZvcmVpZ25Nb2R1bGV8fHR5cGVvZiB0aGlzLl9mb3JlaWduTW9kdWxlW3RdIT0iZnVuY3Rpb24iKXJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIk1pc3NpbmcgcmVxdWVzdEhhbmRsZXIgb3IgbWV0aG9kOiAiK3QpKTt0cnl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9mb3JlaWduTW9kdWxlW3RdLmFwcGx5KHRoaXMuX2ZvcmVpZ25Nb2R1bGUsbikpfWNhdGNoKHIpe3JldHVybiBQcm9taXNlLnJlamVjdChyKX19fUNlLl9kaWZmTGltaXQ9MWU1LENlLl9zdWdnZXN0aW9uc0xpbWl0PTFlNCx0eXBlb2YgaW1wb3J0U2NyaXB0cz09ImZ1bmN0aW9uIiYmKGdsb2JhbFRoaXMubW9uYWNvPURpKCkpO2xldCBZdD0hMTtmdW5jdGlvbiB5YShlKXtpZihZdClyZXR1cm47WXQ9ITA7Y29uc3QgdD1uZXcgSHMobj0+e2dsb2JhbFRoaXMucG9zdE1lc3NhZ2Uobil9LG49Pm5ldyBDZShuLGUpKTtnbG9iYWxUaGlzLm9ubWVzc2FnZT1uPT57dC5vbm1lc3NhZ2Uobi5kYXRhKX19Z2xvYmFsVGhpcy5vbm1lc3NhZ2U9ZT0+e1l0fHx5YShudWxsKX19KSgpOwo=",yJ=typeof window<"u"&&window.Blob&&new Blob([atob(Sae)],{type:"text/javascript;charset=utf-8"});function r$e(n){let e;try{if(e=yJ&&(window.URL||window.webkitURL).createObjectURL(yJ),!e)throw"";const t=new Worker(e,{name:n?.name});return t.addEventListener("error",()=>{(window.URL||window.webkitURL).revokeObjectURL(e)}),t}catch{return new Worker("data:application/javascript;base64,"+Sae,{name:n?.name})}finally{e&&(window.URL||window.webkitURL).revokeObjectURL(e)}}const Cae=["class","new","operator","string","number","boolean","undefined","null","regexp","function","property","type","inserted","deleted","punctuation","comment"],Eu="wallaby-output";self.MonacoEnvironment={getWorker(){return new r$e}};const Lae=[{id:"typescript",extensions:[".ts",".tsx"]},{id:"javascript",extensions:[".js",".jsx"]},{id:"vue",extensions:[".vue"]},{id:"svelte",extensions:[".svelte"]},{id:"console",extensions:[".console"]}];for(const n of Lae)jO.register(n);async function kae(n){const{grammars:e,registry:t}=await ex();for(const a of Lae){const{id:l}=a;_4.has(l)&&jO.setTokensProvider(l,{getInitialState(){return IC.INITIAL},tokenizeEncoded(c,d){const u=e.get(l).tokenizeLine2(c,d),{tokens:h,ruleStack:f}=u;return{tokens:h,endState:f}}})}const i="wallaby",s=getComputedStyle(document.body),r={};Vi("focusBorder","--monaco-focus-border",r,s),Vi("errorForeground","--monaco-error-foreground",r,s),Vi("disabledForeground","--monaco-disabled-foreground",r,s),Vi("input.foreground","--monaco-input-foreground",r,s),Vi("input.background","--monaco-input-background",r,s),Vi("input.border","--monaco-input-border",r,s),Vi("scrollbarSlider.background","--monaco-scrollbar-slider-background",r,s),Vi("scrollbarSlider.hoverBackground","--monaco-scrollbar-slider-hover-background",r,s),Vi("scrollbarSlider.activeBackground","--monaco-scrollbar-slider-active-background",r,s),Vi("widget.border","--monaco-widget-border",r,s),Vi("widget.shadow","--monaco-widget-shadow",r,s),Vi("toolbar.hoverBackground","--monaco-toolbar-hover-background",r,s),Vi("editor.foreground","--monaco-editor-foreground",r,s),Vi("editor.background","--monaco-editor-background",r,s),Vi("editor.selectionBackground","--monaco-editor-selection-background",r,s),Vi("editor.selectionForeground","--monaco-editor-selection-background",r,s),Vi("editorCursor.foreground","--monaco-editor-cursor-foreground",r,s),Vi("editorLineNumber.foreground","--monaco-editor-line-number-foreground",r,s),Vi("editorLineNumber.activeForeground","--monaco-editor-line-number-active-foreground",r,s),Vi("editor.lineHighlightBackground","--monaco-editor-line-highlight-background",r,s),Vi("editor.lineHighlightBorder","--monaco-editor-line-highlight-border",r,s),Vi("editor.wordHighlightBackground","--monaco-editor-word-highlight-background",r,s),Vi("editorIndentGuide.background","--monaco-editor-indent-guide-background",r,s),Vi("editorIndentGuide.activeBackground","--monaco-editor-indent-guide-active-background",r,s),Vi("editorBracketMatch.background","--monaco-editor-bracket-match-background",r,s),Vi("editorBracketMatch.border","--monaco-editor-bracket-match-border",r,s),Vi("editorWidget.background","--monaco-editor-widget-background",r,s),Vi("editorWidget.foreground","--monaco-editor-widget-foreground",r,s),Vi("editorWidget.border","--monaco-editor-widget-border",r,s),Vi("editorWidget.resizeBorder","--monaco-editor-widget-resize-border",r,s),Vi("editor.findMatchHighlightBackground","--monaco-editor-find-match-highlight-background",r,s),Vi("editor.findMatchBackground","--monaco-editor-find-match-background",r,s),Vi("editor.findMatchBorder","--monaco-editor-find-match-border",r,s),Vi("editor.findRangeHighlightBackground","--monaco-editor-find-range-highlighting-background",r,s),Vi("editorGhostText.foreground","--monaco-editor-ghost-text-foreground",r,s);const o=GQ()?.settings.map(a=>({token:a.scope,...a.settings}))||[];return P1.defineTheme(i,{base:n==="dark"?"vs-dark":n==="hc-dark"?"hc-black":n==="hc-light"?"hc-light":"vs",inherit:!1,colors:r,rules:o.concat(Cae.map(a=>Nu(a,Eu,s))).concat([Nu("error",Eu,s,"--error-foreground"),Nu("timepoint",Eu,s,"--token-scope-number-foreground"),Nu("link",Eu,s,"--link-foreground"),Nu("status",Eu,s,"--editor-code-lens-foreground"),Nu("statussuccess",Eu,s,"--testing-icon-passed"),Nu("statuserror",Eu,s,"--testing-icon-failed")])}),P1.setTheme(i),t}function Vi(n,e,t,i){const s=i.getPropertyValue(e);if(s)if(typeof s=="string"){const r=s.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([\d.]+))?\)$/);if(r){const[,o,a,l,c="1"]=r,d=u=>u.toString(16).padStart(2,"0");t[n]=`#${d(+o)}${d(+a)}${d(+l)}${d(Math.round(+c*255))}`}else t[n]=s}else t[n]=s}function Nu(n,e,t,i){let s,r;const o=t.getPropertyValue(i||`--token-scope-${n}-foreground`);if(o&&typeof o=="string"){const l=o.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([\d.]+))?\)$/);if(l){const[,c,d,u,h="1"]=l,f=g=>g.toString(16).padStart(2,"0");s=`#${f(+c)}${f(+d)}${f(+u)}${f(Math.round(+h*255))}`}else s=o}const a=t.getPropertyValue(`--token-scope-${n}-font-style`);return a&&(r=a),{token:`${e}${n}`,foreground:s,fontStyle:r}}async function xae(n){n=n||(await ex()).registry;const e=n.getColorMap();e[1]==="#000000"&&(e[1]="var(--editor-foreground)");const t=qoe(e).split(`
`).map(r=>r?".monaco-colors-container "+r:"").join(`
`),i="monaco-colors-overrides";let s=document.getElementsByClassName(i)[0];if(!s){const r=document.getElementsByClassName("monaco-colors")[0];if(s=document.createElement("style"),s.className=i,r)r.parentElement?.insertBefore(s,r.nextSibling);else{let{head:o}=document;o==null&&(o=document.getElementsByTagName("head")[0]),o?.appendChild(s)}}s.innerHTML!==t&&(s.innerHTML=t)}function Tae(){const n=getComputedStyle(document.body),e=parseInt(n.getPropertyValue("--monaco-editor-scrollbar-horizontal-size")),t=parseInt(n.getPropertyValue("--monaco-editor-scrollbar-vertical-size"));return{fontLigatures:n.getPropertyValue("--monaco-editor-font-ligatures")||void 0,cursorStyle:n.getPropertyValue("--monaco-editor-cursor-style")||void 0,cursorBlinking:n.getPropertyValue("--monaco-editor-cursor-blinking")||void 0,cursorSmoothCaretAnimation:n.getPropertyValue("--monaco-editor-cursor-smooth-caret-animation")||void 0,scrollbar:{horizontalScrollbarSize:e||13,verticalScrollbarSize:t||13}}}await kae(qF.type);P1.onDidCreateEditor(n=>{n.updateOptions({...Tae()})});t4.subscribe(async()=>{await xae(await kae(qF.type)),P1.getEditors().forEach(n=>{n.updateOptions({...Tae()})})});const Pw=Object.freeze(Object.defineProperty({__proto__:null,createRule:Nu,inject:xae,monaco:s$e},Symbol.toStringTag,{value:"Module"}));class o$e{constructor(e,t,i){this._namespace=e,this._appService=t,this._keyboard=i}matches(e){return e.startsWith(this._namespace)}handle(e,t,i){if(e=this._narrow(e),!t.target)return;const s=t.target,r=a=>{t.preventDefault(),t.stopPropagation()};if(H1(t))return r();if(t.key==="Escape"&&!rt(t)&&i.selection)return this._appService.clearListSelection(),r();if(!this._locateOutputElement(e,s)){if(t.key==="Escape"&&!rt(t))return e==="header.action"?s.closest(`[data-namespace="${this._namespace}"]`)?.focus():this._appService.focus("editor"),r()}}_locateOutputElement(e,t){if(e=="."||e==="content")return t.querySelector(".selected");if(e==="header.action"){const i=t.closest(`[data-namespace="${this._namespace}"]`);if(i)return i.querySelector(".selected")}if(e==="content.item")return t;if(e==="content.item.action")return t.parentElement?.parentElement?.parentElement?.parentElement}_narrow(e){return e=e.replace(`${this._namespace}.`,""),e=e.replace(this._namespace,"."),e}}var Dae={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(vc,function(){var t=1e3,i=6e4,s=36e5,r="millisecond",o="second",a="minute",l="hour",c="day",d="week",u="month",h="quarter",f="year",g="date",m="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,b=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,w={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(W){var P=["th","st","nd","rd"],N=W%100;return"["+W+(P[(N-20)%10]||P[N]||P[0])+"]"}},v=function(W,P,N){var H=String(W);return!H||H.length>=P?W:""+Array(P+1-H.length).join(N)+W},_={s:v,z:function(W){var P=-W.utcOffset(),N=Math.abs(P),H=Math.floor(N/60),U=N%60;return(P<=0?"+":"-")+v(H,2,"0")+":"+v(U,2,"0")},m:function W(P,N){if(P.date()<N.date())return-W(N,P);var H=12*(N.year()-P.year())+(N.month()-P.month()),U=P.clone().add(H,u),B=N-U<0,Y=P.clone().add(H+(B?-1:1),u);return+(-(H+(N-U)/(B?U-Y:Y-U))||0)},a:function(W){return W<0?Math.ceil(W)||0:Math.floor(W)},p:function(W){return{M:u,y:f,w:d,d:c,D:g,h:l,m:a,s:o,ms:r,Q:h}[W]||String(W||"").toLowerCase().replace(/s$/,"")},u:function(W){return W===void 0}},y="en",C={};C[y]=w;var S="$isDayjsObject",k=function(W){return W instanceof M||!(!W||!W[S])},I=function W(P,N,H){var U;if(!P)return y;if(typeof P=="string"){var B=P.toLowerCase();C[B]&&(U=B),N&&(C[B]=N,U=B);var Y=P.split("-");if(!U&&Y.length>1)return W(Y[0])}else{var ne=P.name;C[ne]=P,U=ne}return!H&&U&&(y=U),U||!H&&y},T=function(W,P){if(k(W))return W.clone();var N=typeof P=="object"?P:{};return N.date=W,N.args=arguments,new M(N)},D=_;D.l=I,D.i=k,D.w=function(W,P){return T(W,{locale:P.$L,utc:P.$u,x:P.$x,$offset:P.$offset})};var M=function(){function W(N){this.$L=I(N.locale,null,!0),this.parse(N),this.$x=this.$x||N.x||{},this[S]=!0}var P=W.prototype;return P.parse=function(N){this.$d=function(H){var U=H.date,B=H.utc;if(U===null)return new Date(NaN);if(D.u(U))return new Date;if(U instanceof Date)return new Date(U);if(typeof U=="string"&&!/Z$/i.test(U)){var Y=U.match(p);if(Y){var ne=Y[2]-1||0,ee=(Y[7]||"0").substring(0,3);return B?new Date(Date.UTC(Y[1],ne,Y[3]||1,Y[4]||0,Y[5]||0,Y[6]||0,ee)):new Date(Y[1],ne,Y[3]||1,Y[4]||0,Y[5]||0,Y[6]||0,ee)}}return new Date(U)}(N),this.init()},P.init=function(){var N=this.$d;this.$y=N.getFullYear(),this.$M=N.getMonth(),this.$D=N.getDate(),this.$W=N.getDay(),this.$H=N.getHours(),this.$m=N.getMinutes(),this.$s=N.getSeconds(),this.$ms=N.getMilliseconds()},P.$utils=function(){return D},P.isValid=function(){return this.$d.toString()!==m},P.isSame=function(N,H){var U=T(N);return this.startOf(H)<=U&&U<=this.endOf(H)},P.isAfter=function(N,H){return T(N)<this.startOf(H)},P.isBefore=function(N,H){return this.endOf(H)<T(N)},P.$g=function(N,H,U){return D.u(N)?this[H]:this.set(U,N)},P.unix=function(){return Math.floor(this.valueOf()/1e3)},P.valueOf=function(){return this.$d.getTime()},P.startOf=function(N,H){var U=this,B=!!D.u(H)||H,Y=D.p(N),ne=function(Se,De){var ke=D.w(U.$u?Date.UTC(U.$y,De,Se):new Date(U.$y,De,Se),U);return B?ke:ke.endOf(c)},ee=function(Se,De){return D.w(U.toDate()[Se].apply(U.toDate("s"),(B?[0,0,0,0]:[23,59,59,999]).slice(De)),U)},$=this.$W,ge=this.$M,Ie=this.$D,xe="set"+(this.$u?"UTC":"");switch(Y){case f:return B?ne(1,0):ne(31,11);case u:return B?ne(1,ge):ne(0,ge+1);case d:var z=this.$locale().weekStart||0,K=($<z?$+7:$)-z;return ne(B?Ie-K:Ie+(6-K),ge);case c:case g:return ee(xe+"Hours",0);case l:return ee(xe+"Minutes",1);case a:return ee(xe+"Seconds",2);case o:return ee(xe+"Milliseconds",3);default:return this.clone()}},P.endOf=function(N){return this.startOf(N,!1)},P.$set=function(N,H){var U,B=D.p(N),Y="set"+(this.$u?"UTC":""),ne=(U={},U[c]=Y+"Date",U[g]=Y+"Date",U[u]=Y+"Month",U[f]=Y+"FullYear",U[l]=Y+"Hours",U[a]=Y+"Minutes",U[o]=Y+"Seconds",U[r]=Y+"Milliseconds",U)[B],ee=B===c?this.$D+(H-this.$W):H;if(B===u||B===f){var $=this.clone().set(g,1);$.$d[ne](ee),$.init(),this.$d=$.set(g,Math.min(this.$D,$.daysInMonth())).$d}else ne&&this.$d[ne](ee);return this.init(),this},P.set=function(N,H){return this.clone().$set(N,H)},P.get=function(N){return this[D.p(N)]()},P.add=function(N,H){var U,B=this;N=Number(N);var Y=D.p(H),ne=function(ge){var Ie=T(B);return D.w(Ie.date(Ie.date()+Math.round(ge*N)),B)};if(Y===u)return this.set(u,this.$M+N);if(Y===f)return this.set(f,this.$y+N);if(Y===c)return ne(1);if(Y===d)return ne(7);var ee=(U={},U[a]=i,U[l]=s,U[o]=t,U)[Y]||1,$=this.$d.getTime()+N*ee;return D.w($,this)},P.subtract=function(N,H){return this.add(-1*N,H)},P.format=function(N){var H=this,U=this.$locale();if(!this.isValid())return U.invalidDate||m;var B=N||"YYYY-MM-DDTHH:mm:ssZ",Y=D.z(this),ne=this.$H,ee=this.$m,$=this.$M,ge=U.weekdays,Ie=U.months,xe=U.meridiem,z=function(De,ke,je,et){return De&&(De[ke]||De(H,B))||je[ke].slice(0,et)},K=function(De){return D.s(ne%12||12,De,"0")},Se=xe||function(De,ke,je){var et=De<12?"AM":"PM";return je?et.toLowerCase():et};return B.replace(b,function(De,ke){return ke||function(je){switch(je){case"YY":return String(H.$y).slice(-2);case"YYYY":return D.s(H.$y,4,"0");case"M":return $+1;case"MM":return D.s($+1,2,"0");case"MMM":return z(U.monthsShort,$,Ie,3);case"MMMM":return z(Ie,$);case"D":return H.$D;case"DD":return D.s(H.$D,2,"0");case"d":return String(H.$W);case"dd":return z(U.weekdaysMin,H.$W,ge,2);case"ddd":return z(U.weekdaysShort,H.$W,ge,3);case"dddd":return ge[H.$W];case"H":return String(ne);case"HH":return D.s(ne,2,"0");case"h":return K(1);case"hh":return K(2);case"a":return Se(ne,ee,!0);case"A":return Se(ne,ee,!1);case"m":return String(ee);case"mm":return D.s(ee,2,"0");case"s":return String(H.$s);case"ss":return D.s(H.$s,2,"0");case"SSS":return D.s(H.$ms,3,"0");case"Z":return Y}return null}(De)||Y.replace(":","")})},P.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},P.diff=function(N,H,U){var B,Y=this,ne=D.p(H),ee=T(N),$=(ee.utcOffset()-this.utcOffset())*i,ge=this-ee,Ie=function(){return D.m(Y,ee)};switch(ne){case f:B=Ie()/12;break;case u:B=Ie();break;case h:B=Ie()/3;break;case d:B=(ge-$)/6048e5;break;case c:B=(ge-$)/864e5;break;case l:B=ge/s;break;case a:B=ge/i;break;case o:B=ge/t;break;default:B=ge}return U?B:D.a(B)},P.daysInMonth=function(){return this.endOf(u).$D},P.$locale=function(){return C[this.$L]},P.locale=function(N,H){if(!N)return this.$L;var U=this.clone(),B=I(N,H,!0);return B&&(U.$L=B),U},P.clone=function(){return D.w(this.$d,this)},P.toDate=function(){return new Date(this.valueOf())},P.toJSON=function(){return this.isValid()?this.toISOString():null},P.toISOString=function(){return this.$d.toISOString()},P.toString=function(){return this.$d.toUTCString()},W}(),E=M.prototype;return T.prototype=E,[["$ms",r],["$s",o],["$m",a],["$H",l],["$W",c],["$M",u],["$y",f],["$D",g]].forEach(function(W){E[W[1]]=function(P){return this.$g(P,W[0],W[1])}}),T.extend=function(W,P){return W.$i||(W(P,M,T),W.$i=!0),T},T.locale=I,T.isDayjs=k,T.unix=function(W){return T(1e3*W)},T.en=C[y],T.Ls=C,T.p={},T})})(Dae);var a$e=Dae.exports;const l$e=qk(a$e);function SJ(n){return n<1e3?`${n} ms`:n<6e4?`${Math.round(n/1e3)} sec`:n<36e5?`${Math.round(n/6e4)} min`:`${Math.round(n/36e5)} hrs`}var c$e=G('<div class="relative flex h-full w-full flex-col"data-vscode-context="{&quot;webviewSection&quot;: &quot;overview&quot;, &quot;preventDefaultContextMenuItems&quot;: true}">'),d$e=G('<div class="relative h-full w-full"><div class="code absolute inset-0 overflow-y-auto [&amp;_div.header]:flex [&amp;_div.header]:h-full [&amp;_div.header]:flex-row [&amp;_div.header]:items-center [&amp;_div.header]:justify-center [&amp;_div.header]:pr-2 [&amp;_div.header]:pt-[0.0625rem] [&amp;_div.item.error]:bg-[--subtle-failed] [&amp;_div.item.selected-latest]:rounded-[var(--focus-border-radius)] [&amp;_div.item.selected-latest]:border-[var(--focus-border)] [&amp;_div.item.selected]:bg-[var(--list-active-selection-background)] [&amp;_div.item.selected]:text-[var(--list-active-selection-foreground)] hover:[&amp;_div.item.selected]:bg-[var(--list-active-selection-background)] [&amp;_div.item]:relative [&amp;_div.item]:h-[--panel-item-height] [&amp;_div.item]:cursor-default [&amp;_div.item]:select-none [&amp;_div.item]:border [&amp;_div.item]:border-transparent [&amp;_div.item]:outline-none hover:[&amp;_div.item]:bg-[var(--list-hover-background)] [&amp;_div.item_.preview]:flex-grow [&amp;_div.item_.preview]:truncate [&amp;_div.item_.preview]:[word-spacing:-0.25em] [&amp;_div.item_.preview_span.token-punctuation]:tracking-[-.05rem] [&amp;_span.context]:text-[length:--panel-smaller-font-size] [&amp;_span.context]:font-bold [&amp;_span.context]:text-[var(--subtle-foreground)] [&amp;_span.icon]:pb-[0.0625rem] [&amp;_span.icon]:pr-0.5 [&amp;_span.icon]:text-[length:--icon-smallest-font-size]"><div>'),u$e=G('<div class="h-[--panel-item-height] w-full">'),h$e=G('<span class="codicon icon">'),f$e=G("<div class=item><div class=header><div class=preview>"),g$e=G('<span class="codicon codicon-error icon text-[--testing-icon-failed]">'),m$e=G('<div class="item error"><div class=header><div class=preview><span class=token-error>'),p$e=G('<div class="token-comment text-nowrap pr-1">'),b$e=G('<span class="context mr-1">'),v$e=G('<div class="ml-auto whitespace-pre"><span tabindex=-1>'),_$e=G('<div class="h-full w-full flex-grow [&amp;_.monaco-editor-background]:bg-[var(--panel-view-background)] [&amp;_.monaco-editor]:bg-[var(--panel-view-background)] [&amp;_.monaco-editor_.detected-link]:cursor-pointer [&amp;_.monaco-editor_.margin]:bg-[var(--panel-view-background)]">');function w$e(n){const e=f2(),{width:t,height:i}=Uk(),s=()=>t()>i()?"row":"column";let r;const o=n.state.kind;$e(n.keyboard.focusedNamespace,l=>{let c=r.querySelector(`[data-namespace="${l}"]`);c?c.getAttribute("data-unfocused-scrolling")!=="true"?c.focus():setTimeout(()=>{let d=n.keyboard.lastFocusedNamespace();l===d&&c.isConnected&&(c.matches(":focus")||r.querySelector(`[data-namespace="${l}"]`)?.focus())},70):r.querySelector(`[data-namespace="${l}"]`)?.focus()});const a=new o$e(`${o}.output`,e,n.keyboard);return $e(n.keyboard.key,l=>{if(l){const c=l.event,d=l.namespace;d===o?(c.key==="o"&&n.keyboard.onFocus(`${o}.output`,!0),c.key==="d"&&n.keyboard.onFocus(`${o}.details`,!0),c.preventDefault(),c.stopPropagation()):a.matches(d)&&a.handle(d,c,n.state)}}),(()=>{var l=c$e(),c=r;return typeof c=="function"?We(c,l):r=l,A(l,x(jr,{class:"relative h-full min-h-0 w-full flex-1 justify-end",get direction(){return s()},get children(){return[x(ji,{index:0,get id(){return Bz.OutputLogItems},defaultState:{size:40},class:"flex flex-col",get children(){return x(y$e,{get state(){return n.state},namespace:`${o}.output`})}}),x(ji,{index:1,get id(){return Bz.OutputLogItemDetails},defaultState:{size:60},class:"flex flex-col",get children(){return x(C$e,{get state(){return n.state},namespace:`${o}.details`})}})]}})),l})()}function y$e(n){const e=f2(),[t,i]=he(),s=t0(t),[r,o]=e.appSettings(),a=()=>r.list.fullSourceLinks,l=()=>r.list.context,c=()=>r.list.autoScroll,d=()=>r.list.itemIcon,u=lw(),{list:h,containerProps:f,wrapperProps:g,scrollTo:m}=Hk(()=>[...n.state.logEntries,{sentinel:!0}],{overscan:10,itemHeight:u});$e(s.y,()=>{const w=t();if(!w||!n.state.logEntries.length)return;const v=w.scrollTop,_=w.scrollHeight,y=w.clientHeight,C=_-(v+y);!c()&&C<u/2?o("list","autoScroll",!0):c()&&C>u/2&&o("list","autoScroll",!1)}),$e([()=>n.state.logEntries.length,c],()=>{if(c()){const w=t();w&&queueMicrotask(()=>{w.scrollTop=w.scrollHeight})}});const p=()=>{const w=[];return w.push({text:"Display icon for list items",action:()=>o("list","itemIcon",!d()),checked:d()}),w.push({text:"Display file name in source links",action:()=>o("list","fullSourceLinks",!a()),checked:a()}),w.push({text:"Display value context when available",action:()=>o("list","context",!l()),checked:l()}),w.push(wg),w.push({text:"Change date/time display mode",action:()=>e.changeDateDisplayMode()}),w.push(wg),w.push({text:"Clear list selection",action:n.state.selection?()=>e.clearListSelection():void 0,shortcut:"Escape"}),w},b=()=>{const w=n.state.logEntries[0];if(w)return w.log?.ts||w.error?.ts};return x($r,{header:"Output",headerClass:"pl-2",get namespace(){return n.namespace},tooltip:'Go to Output panel <span class="keyboard-shortcut">G</span>&nbsp;<span class="keyboard-shortcut">O</span>',contentClass:"panel-font-size",nonNativeScrollbars:!0,scrollable:t,get icons(){return[x(Ee,{get classList(){return{"activeIcon codicon-lock":c(),"codicon-unlock":!c()}},onClick:()=>o("list","autoScroll",!c()),tabIndex:0,get namespace(){return`${n.namespace}.header.action`},get tooltip(){return"Turn Auto Scrolling "+(c()?"Off":"On")}}),x(Ee,{menuItems:p,class:"codicon-ellipsis",tabIndex:0,get namespace(){return`${n.namespace}.header.action`},tooltip:"More actions"})]},get children(){var w=d$e(),v=w.firstChild,_=v.firstChild;return Yh(v,"scroll",f.onScroll),We(y=>{i(y),f.ref(y)},v),A(_,x(ln,{get each(){return h()},children:(y,C)=>x(Fn,{get children(){return[x(ot,{get when(){return y.data.log},get children(){return(()=>{const S=y.data,k=()=>!1;return(()=>{var I=f$e(),T=I.firstChild,D=T.firstChild;return I.$$click=M=>e.selectLogEntry(S.log.id,M),A(T,x(se,{get when(){return d()},get children(){var M=h$e();return Me(E=>nn(M,{"codicon-broadcast":S.log.logPointSource==="network","codicon-debug-stackframe-active":S.log.logPointSource==="autoTrace"||S.log.logPointSource==="console.trace","codicon-debug-stackframe":S.log.logPointSource==="autoLog","codicon-watch":S.log.logPointSource==="console.time"||S.log.logPointSource==="console.timeEnd"||S.log.logPointSource==="autoTime","text-[--testing-icon-failed] codicon-error":S.log.logPointSource==="console.error","text-[--editor-warning-foreground] codicon-warning":S.log.logPointSource==="console.warn","text-[--subtle-foreground] codicon-info":S.log.logPointSource!=="console.error"&&S.log.logPointSource!=="console.warn"},E)),M}}),D),A(T,x(CJ,{get state(){return n.state},get entry(){return S.log},get i(){return C()},get oldestEntryTs(){return b()}}),D),A(T,x(LJ,{get location(){return{file:S.log.file,line:S.log.line}},get cwd(){return n.state.cwd},get itemId(){return S.log.id},get namespace(){return n.namespace},get showLogsFullSourceLinks(){return a()},get maybeObsolete(){return k()},get showContext(){return l()},get context(){return S.log.args.map(M=>M.context).filter(M=>M!==void 0)}}),null),Me(M=>{var E=`${n.namespace}.content.item`,W=!!n.state.selection?.entries[S.log.id],P=n.state.selection?.latest===S.log.id,N=S.log.args.map(H=>H.preview.map(U=>`<span class="token-${U.type}">${U.value}</span>`).join("")).join("&nbsp;");return E!==M.e&&xt(I,"data-namespace",M.e=E),W!==M.t&&I.classList.toggle("selected",M.t=W),P!==M.a&&I.classList.toggle("selected-latest",M.a=P),N!==M.o&&(D.innerHTML=M.o=N),M},{e:void 0,t:void 0,a:void 0,o:void 0}),I})()})()}}),x(ot,{get when(){return y.data.error},get children(){return(()=>{const S=y.data,k=()=>!1,I=()=>Rte(S.error.stack[0]);return(()=>{var T=m$e(),D=T.firstChild,M=D.firstChild,E=M.firstChild;return T.$$click=W=>e.selectLogEntry(S.error.id,W),A(D,x(se,{get when(){return d()},get children(){return g$e()}}),M),A(D,x(CJ,{get state(){return n.state},get entry(){return S.error},get i(){return C()},get oldestEntryTs(){return b()}}),M),A(E,()=>S.error.message),A(D,x(LJ,{get location(){return I()},get cwd(){return n.state.cwd},get itemId(){return S.error.id},get namespace(){return n.namespace},get showLogsFullSourceLinks(){return a()},get maybeObsolete(){return k()}}),null),Me(W=>{var P=`${n.namespace}.content.item`,N=!!n.state.selection?.entries[S.error.id],H=n.state.selection?.latest===S.error.id;return P!==W.e&&xt(T,"data-namespace",W.e=P),N!==W.t&&T.classList.toggle("selected",W.t=N),H!==W.a&&T.classList.toggle("selected-latest",W.a=H),W},{e:void 0,t:void 0,a:void 0}),T})()})()}}),x(ot,{get when(){return y.data.sentinel},get children(){var S=u$e();return S.style.setProperty("pointer-events","none"),S}})]}})})),Me(y=>{var C={"[&_div.header]:pl-1.5":!d(),"[&_div.header]:pl-1":d()},S=f.style,k=g().style;return y.e=nn(v,C,y.e),y.t=Dl(v,S,y.t),y.a=Dl(_,k,y.a),y},{e:void 0,t:void 0,a:void 0}),w}})}function CJ(n){return x(se,{get when(){return n.state.dateTimeFormat&&n.state.dateTimeFormat?.dateTimeDisplayMode!=="None"},get children(){var e=p$e();return A(e,()=>S$e(n.entry.ts,n.state.logEntries[n.i-1]?.log?.ts||0,n.oldestEntryTs||0,n.state.dateTimeFormat.dateTimeDisplayMode,n.state.dateTimeFormat.dateTimeFormat)),e}})}function S$e(n,e,t,i,s){return i==="Relative To Oldest"?oG((t>0?`${SJ(n-t)}`:"").padEnd(6),6):i==="Relative To Previous"?oG((e>0?`${SJ(n-e)}`:"").padEnd(6),6):l$e(new Date(n)).format(s)}function LJ(n){return x(se,{get when(){return n.location},get children(){var e=v$e(),t=e.firstChild;return A(e,x(se,{get when(){return n.showContext&&n.context&&n.context.length>0},get children(){var i=b$e();return A(i,()=>n.context.join(" ")),i}}),t),t.$$focusout=i=>i.target.setAttribute("tabindex","-2"),A(t,x(fh,{get id(){return`link-${n.itemId.toString()}`},preventClickDefault:!0,get value(){return{file:n.location.file,line:n.location.line}},get lineAndColumnOnly(){return!n.showLogsFullSourceLinks},class:"source-link select-none hover:underline",compactFileNameOnly:!0,get classList(){return{"[&_span]:!no-underline":n.maybeObsolete,"!cursor-default":n.maybeObsolete,"!text-[var(--subtle-foreground)]":n.maybeObsolete}},codeFragmentTooltipOptions:()=>n.maybeObsolete?void 0:{file:n.location.file,line:n.location.line,navigatable:!0,cwd:n.cwd}})),Me(()=>xt(t,"data-namespace",`${n.namespace}.content.list.item.link`)),e}})}function C$e(n){const e=f2(),[t,i]=e.appSettings(),s=()=>t.details.wordWrap,r=()=>(n.state.fontSize||parseFloat(getComputedStyle(document.body)?.getPropertyValue("--panel-font-size").split("px")[0]))-1;let o,a;const l=new L$e({linkHandler:d=>{const u=Rte(d);u&&e.navigate(u,new MouseEvent("click"))}}),c=d=>{const u="plaintext",h=d.editor.createModel("",u);return d.languages.registerDocumentRangeSemanticTokensProvider(u,l),d.languages.registerLinkProvider(u,l),d.editor.create(o,{language:u,"semanticHighlighting.enabled":!0,model:h,automaticLayout:!0,minimap:{enabled:!1},contextmenu:!1,quickSuggestions:!1,parameterHints:{enabled:!1},readOnly:!0,fontSize:r(),fontFamily:"var(--editor-font-family)",renderLineHighlightOnlyWhenFocus:!0,renderLineHighlight:"line",matchBrackets:"never",glyphMargin:!1,lineNumbers:"off",folding:!0,detectIndentation:!1,guides:{indentation:!0,bracketPairs:!1,bracketPairsHorizontal:!1,highlightActiveBracketPair:!1,highlightActiveIndentation:!1},wordWrap:s()?"on":"off"})};return Bn(async()=>{try{const{monaco:d}=await Oa(()=>Promise.resolve().then(()=>Pw),void 0,import.meta.url);a=c(d),a.addAction({id:"openLink",label:"Open Link",keybindings:[d.KeyCode.Enter],run:(h,f)=>{h.getAction("editor.action.openLink").run(f)}}),a.onMouseUp(h=>{if(h.target.type===d.editor.MouseTargetType.CONTENT_TEXT){const f=h.target.position;if(f){const g=l.getLinkAtPosition(f);g&&l.resolveLink(g)}}}),e.loadLogEntryDetails()}catch(d){console.error("Could not initialize Monaco",d)}}),$e(()=>n.state.logEntries.length,()=>{n.state.selection||e.loadLogEntryDetails()}),$e([()=>n.state.selection,()=>n.state.selection?.latest],()=>{e.loadLogEntryDetails(n.state.selection?.entries?Object.keys(n.state.selection.entries).map(d=>parseInt(d,10)):void 0)}),$e([()=>n.state.details,()=>a],()=>{if(!(!a||!n.state.details||!a.getModel())){l.clear();for(const u of n.state.details.entries)l.addTokenizedEntry(u.entry.error?k$e(u,n.state.cwd):u);a.setValue(l.text())}}),$e([s,r],()=>{a&&a.updateOptions({wordWrap:s()?"on":"off",fontSize:r()})}),Ot(()=>{a&&(a.getModel()?.dispose(),a.dispose())}),x($r,{header:"Details",headerClass:"pl-2",get namespace(){return n.namespace},tooltip:'Go to Details panel <span class="keyboard-shortcut">G</span>&nbsp;<span class="keyboard-shortcut">D</span>',contentClass:"panel-font-size",get icons(){return[x(Ee,{class:"codicon-word-wrap",get classList(){return{activeIcon:s()}},onClick:()=>{i("details","wordWrap",!s())},tabIndex:0,get namespace(){return`${n.namespace}.header.action`},get tooltip(){return"Turn Word Wrap "+(s()?"Off":"On")}}),x(Ee,{menuItems:()=>[],class:"codicon-ellipsis",tabIndex:0,get namespace(){return`${n.namespace}.header.action`},tooltip:"More actions"})]},get children(){var d=_$e(),u=o;return typeof u=="function"?We(u,d):o=d,d}})}const kJ=Cae.slice().concat(["error","timepoint","link","status","statussuccess","statuserror"]);class L$e{_lines=[];_links=[];_currentLineTokens=[];_tokenMap=new Map(kJ.map((e,t)=>[e,t]));_legend={tokenTypes:kJ.map(e=>`${Eu}${e}`),tokenModifiers:[]};constructor(e){this.opts=e}addTokenizedEntry(e){for(const t of e.tokens){for(const i of t)this.add(i);this.addLineBreak()}this.addLineBreak()}add(e){e.type==="linebreak"?this.addLineBreak():(this._currentLineTokens.push(e),e.stackEntry&&this._links.push({range:new yae(this._lines.length+1,this._currentLineTokens.reduce((t,i)=>t+i.value.length,0)-e.value.length+1,this._lines.length+1,this._currentLineTokens.reduce((t,i)=>t+i.value.length,0)+1),position:e.stackEntry}))}addLineBreak(){this._currentLineTokens.length?(this._lines.push({tokens:this._currentLineTokens}),this._currentLineTokens=[]):this._lines.push({})}clear(){this._lines=[],this._links=[],this._currentLineTokens=[]}text(){return this._lines.map(e=>e.tokens?.map(t=>t.value).join("")??"").join(`
`)}provideDocumentRangeSemanticTokens(e,t,i){const s=[];let r=0,o=0;for(let a=t.startLineNumber-1;a<t.endLineNumber;a++){const l=this._lines[a];if(l?.tokens){let c=0;for(const d of l.tokens){const u=this._tokenMap.get(d.type);if(u!==void 0){const h=a-r;s.push(h,h===0?c-o:c,d.value.length,u,0),r=a,o=c}c+=d.value.length}}}return{data:new Uint32Array(s)}}getLegend(){return this._legend}provideLinks(e,t){return{links:this._links}}resolveLink(e,t){return this.opts.linkHandler(e.position),{...e,uri:"about:blank"}}getLinkAtPosition(e){return this._links.find(t=>{const i=t.range;return e.lineNumber>=i.startLineNumber&&e.lineNumber<=i.endLineNumber&&e.column>=i.startColumn&&e.column<=i.endColumn})}}function k$e(n,e){const t=[];if(n.entry.error){const i=[];i.push({type:"error",value:n.entry.error.message}),t.push(i);for(const s of n.entry.error.stack){const r=[];r.push({type:"indentation",value:"  "}),r.push({type:"punctuation",value:"at "}),s.context&&(r.push({type:"function",value:s.context}),r.push({type:"indentation",value:" "}));const o=TQ(s.source,e);r.push({type:"link",value:`${o}:${s.line}${s.column>0?`:${s.column}`:""}`,stackEntry:(s.source.startsWith("file")||s.source.startsWith("http"))&&!o.startsWith("node:")?s:void 0}),t.push(r)}}return{tokens:t,entry:n.entry}}dn(["click","focusout"]);var xJ=G('<div class="codicon codicon-loading codicon-modifier-spin icon-opacity">'),x$e=G('<div class="mx-auto my-auto flex h-full w-full items-center justify-center px-3 text-center text-[length:--header-font-size] uppercase tracking-wide text-[var(--subtle-foreground)]"><div>'),TJ=G('<div class="h-full w-full">'),T$e=G("<div class=ml-2>Connecting"),D$e=G('<div class="mx-auto my-auto flex h-full w-full items-center justify-center px-3 text-center text-[length:--header-font-size] uppercase tracking-wide text-[var(--subtle-foreground)]">'),I$e=G("<div class=ml-1>Wallaby is paused");function ZF(n){const[e,t]=he(void 0,{equals:!1}),[i,s]=he(void 0,{equals:!1}),[r,o]=he(void 0,{equals:!1}),a={key:e,focusedNamespace:i,lastFocusedNamespace:r,onFocus:(f,g)=>{o(f),g&&s(f)}};function l(){let f="overview";n.state.kind==="side-view"?f="details":n.state.kind==="quokka.output"?f="quokka.output":n.state.kind==="console-ninja.panel"&&(f="console-ninja.panel"),s(r()||f)}Bn(()=>window.addEventListener("focus",l)),Ot(()=>{window.removeEventListener("focus",l),u.unsubscribe()});function c(f,g){t({event:f,namespace:g})}function d(){l()}const u=t4.subscribe(()=>{try{const f=getComputedStyle(document.body)?.getPropertyValue("--editor-ruler-foreground"),g=getComputedStyle(document.body)?.getPropertyValue("--panel-view-native-background");f&&g&&document.documentElement.style.setProperty("--log-viewer-ruler",Bge(f,g))}catch(f){console.error(f)}}),h=J(()=>n.state.kind==="console-ninja.panel"?f2():Dt());return x(WZ,{get values(){return[[Mge,h()],[Ege,h()]]},get children(){return[x(hme,{onKeyPress:c,onFocus:d}),x(se,{get when(){return n.state.shortcuts},get children(){return x(mEe,{get state(){return n.state.shortcuts},keyboard:a})}}),x(se,{get when(){return n.state.reconnectingAfterRestart||n.state.failedToReconnectAfterRestart},get fallback(){return x(se,{get when(){return!n.state.connecting&&!n.state.pausedState?.pausedByUser},get fallback(){return(()=>{var f=D$e();return A(f,x(Th,{get when(){return!n.state.connecting},get fallback(){return xJ()},get children(){return x(Ee,{tooltip:"Resume Wallaby",tabIndex:0,class:"codicon codicon-play icon-opacity !p-[0.08rem] !pb-[0.1rem] !pr-0 !text-[length:--panel-larger-font-size] !text-[var(--testing-icon-passed)] hover:!text-[--input-option-active-foreground]",onClick:()=>{n.state.pausedState?.pausedByUser&&RQ()?.resume()}})}}),null),A(f,x(Th,{get when(){return n.state.connecting},get fallback(){return I$e()},get children(){return T$e()}}),null),Me(()=>f.classList.toggle("background",n.state.kind==="side-view")),f})()},get children(){return[x(Fn,{get children(){return[x(ot,{get when(){return n.state.kind!=="console-ninja.panel"},get children(){return x(WZ,{values:[[ime,void 0],[nme,void 0]],get children(){return x(Fn,{get children(){return[x(ot,{get when(){return n.state.kind==="side-view"},get children(){var f=TJ();return A(f,x(vl,{constructor:wn,get initial(){return{project:n.state.project,fileCoverageTableSort:{field:"coverageValue",direction:"asc"},selection:{implicit:{}},debuggerState:n.state.debuggerState,tests:{searchControlVisible:!0},testFileProgressByFile:{}}},view:g=>x(Jm,{get parent(){return g.state},state:m=>m,get setState(){return g.setState},view:m=>x(wte,{get state(){return m.state},keyboard:a})})})),Me(()=>f.classList.toggle("pl-[0.0625rem]",n.state.editor==="vscode")),f}}),x(ot,{get when(){return n.state.kind==="overview"},get children(){var f=TJ();return A(f,x(vl,{constructor:mV,get initial(){return{selection:{test:"allLogsAndErrors",implicit:{}},debuggerState:n.state.debuggerState,startupEvents:[],tests:{searchControlVisible:!0},testFileProgressByFile:{}}},view:g=>x(Jm,{get parent(){return g.state},state:m=>m,get setState(){return g.setState},view:m=>x(xte,{get state(){return m.state},keyboard:a})})})),f}}),x(ot,{get when(){return n.state.kind==="standalone"},get children(){return x(vl,{get initial(){return{notifications:(n.state.notifications||[]).map((f,g)=>({...f,displayId:g}))}},constructor:Dte,view:f=>x(mMe,{get state(){return f.state},get app(){return n.state},keyboard:a})})}}),x(ot,{get when(){return n.state.kind==="log"||n.state.kind==="quokka.log"},get children(){return x(vl,{constructor:yte,get initial(){return{file:new URLSearchParams(window.location.search).get("file")||"",id:new URLSearchParams(window.location.search).get("id")||"",range:new URLSearchParams(window.location.search).get("range")||"",selection:{implicit:{}},isQuokka:n.state.kind==="quokka.log"}},view:f=>x(Jm,{get parent(){return f.state},state:g=>g,get setState(){return f.setState},view:g=>x(nTe,{get state(){return g.state},keyboard:a})})})}}),x(ot,{get when(){return n.state.kind==="quokka.output"},get children(){return x(vl,{constructor:Ite,get initial(){return{selection:{implicit:{}},config:n.state.quokkaConfig,debuggerState:n.state.debuggerState}},view:f=>x(Jm,{get parent(){return f.state},state:g=>g,get setState(){return f.setState},view:g=>x(zMe,{get state(){return g.state},keyboard:a})})})}})]}})}})}}),x(ot,{get when(){return n.state.kind==="console-ninja.panel"},get children(){return x(w$e,{get state(){return n.state},keyboard:a})}})]}}),x(Oge,{})]}})},get children(){var f=x$e(),g=f.firstChild;return A(f,x(se,{get when(){return n.state.reconnectingAfterRestart},get children(){return xJ()}}),g),A(g,()=>n.state.reconnectingAfterRestart?"Updating ...":"Start again and reload the page"),Me(m=>{var p=n.state.kind==="side-view",b=!!n.state.reconnectingAfterRestart;return p!==m.e&&f.classList.toggle("background",m.e=p),b!==m.t&&g.classList.toggle("ml-2",m.t=b),m},{e:void 0,t:void 0}),f}})]}})}var M$e=G('<div class="h-full w-full">');function E$e(n){return x(ln,{get each(){return n.state.appStates},children:e=>(()=>{var t=M$e();return A(t,x(vl,{constructor:Qk,initial:e,view:ZF})),Me(()=>t.classList.toggle("hidden",e.network?.port!==n.state.currentAddress.port||e.network?.secret!==n.state.currentAddress.secret)),t})()})}class Iae{constructor(e,t){this._state=e,this._setState=t,this._windowMessageHandler=this._handleWindowMessage.bind(this),window.addEventListener("message",this._windowMessageHandler)}_windowMessageHandler;_handleWindowMessage(e){const{data:t}=e;if(t.type==="activate"){let i=this._state.appStates.find(s=>s.network?.port===t.address.port&&s.network?.secret===t.address.secret);i||(i={kind:"quokka.output",editor:"vscode",connecting:!0,network:t.address,sideViewScreen:{name:Zt.Logs},status:{state:"starting",firstTestResultAvailable:!1,longRunningOperation:!1,troubleshootingHint:[]},testFiles:[]},this._setState("appStates",s=>[...s,i])),this._setState("currentAddress",At(t.address))}else t.type==="remove"&&this._setState("appStates",At(this._state.appStates.filter(i=>i.network?.port!==t.address.port||i.network?.secret!==t.address.secret)))}dispose(){window.removeEventListener("message",this._windowMessageHandler)}static Provider}const[N$e,get]=Go(n=>n.initial);Iae.Provider=N$e;let ml=window["wallaby-bootstrapper"],GF,BF,Nk,Rk,Wk,Mae;const _d=new URLSearchParams(window.location.search);if(ml?.editor==="vscode")GF=ml.scheme==="https",BF=ml.host,Nk=ml.port,Rk=ml.secret,Mae=ml.location,Wk="vscode",ml.checkTimers&&await que();else switch(BF=window.location.hostname,GF=window.location.protocol==="https:",Rk=_d.get("secret"),Nk=_d.has("port")?+_d.get("port"):window.location.port?+window.location.port:void 0,_d.get("editor")){case"intellij":Wk="intellij";break}let jp="standalone";ml?jp=ml.context=="console-ninja.panel"?"console-ninja.panel":ml.context=="overview"?"overview":ml.context=="quokka.output"?"quokka.output":"side-view":jp=_d.has("overview")?"overview":_d.has("side-view")?"side-view":_d.has("log")?"log":_d.has("quokka.log")?"quokka.log":_d.has("quokka.output")?"quokka.output":"standalone";if(jp==="standalone")await Oa(()=>Promise.resolve({}),__vite__mapDeps([2]),import.meta.url);else{const n=document.querySelector(":root");n?.classList.add("integrated"),Mae==="editor"&&n?.classList.add("editor")}tle(()=>{const n=e=>{const t=jp==="quokka.output"&&Wk==="vscode",i=jp==="console-ninja.panel",s={kind:jp,editor:Wk,connecting:!0,network:{isSecure:GF,host:BF,port:Nk,secret:Rk},sideViewScreen:{name:Zt.Logs},status:{state:"starting",firstTestResultAvailable:!1,longRunningOperation:!1,troubleshootingHint:[]},testFiles:[],logEntries:[],logEntryMap:{},cwd:""};return t?x(vl,{constructor:Iae,initial:{currentAddress:{port:Nk,secret:Rk},appStates:[s]},view:E$e}):i?x(vl,{constructor:Nte,initial:s,view:ZF}):x(vl,{constructor:Qk,initial:s,view:ZF})};return x(Fle,{get children(){return x(Dle,{path:"/*",component:n})}})},document.getElementById("root"));
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./styles-VMq7AoAs.css","./styles-mWQJIPwz.css","./styles-NY7NGX-E.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}

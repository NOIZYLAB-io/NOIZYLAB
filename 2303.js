"use strict";var xt=Object.defineProperty;var gt=(y,m,s)=>m in y?xt(y,m,{enumerable:!0,configurable:!0,writable:!0,value:s}):y[m]=s;var o=(y,m,s)=>(gt(y,typeof m!="symbol"?m+"":m,s),s);exports.id=2303,exports.ids=[2303],exports.modules={72303:(y,m,s)=>{s.d(m,{CreateTokenCommand:()=>ue,SSOOIDCClient:()=>he});var w=s(556975),B=s(884215),C=s(653905),A=s(937641),x=s(866231),me=s(546364),ye=s(191708),ve=s(971516),Se=s(924209),Z=s(63850),I=s(399010),n=s(374972),xe=s(263155),T=s(944951);const ge=async(e,r,t)=>({operation:(0,T.u)(r).operation,region:await(0,T.t)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function fe(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:e.region},propertiesExtractor:(r,t)=>({signingProperties:{config:r,context:t}})}}function Ee(e){return{schemeId:"smithy.api#noAuth"}}const Pe=e=>{const r=[];switch(e.operation){case"CreateToken":{r.push(Ee(e));break}default:r.push(fe(e))}return r},we=e=>{const r=(0,xe.h)(e);return Object.assign(r,{authSchemePreference:(0,T.t)(e.authSchemePreference??[])})},Ie=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),Ce={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};var Ae=s(316603),Te=s(628090),be=s(3168),J=s(231775),De=s(772397),S=s(686443),L=s(514615),$e=s(799065),Oe=s(387235),Re=s(534732),je=s(359480),ze=s(803721),Y=s(443380),W=s(626021),ke=s(302683),b=s(626313);const X="required",l="fn",p="argv",g="ref",Q=!0,_="isSet",P="booleanEquals",f="error",E="endpoint",v="tree",D="PartitionResult",$="getAttr",q={[X]:!1,type:"String"},ee={[X]:!0,default:!1,type:"Boolean"},te={[g]:"Endpoint"},ne={[l]:P,[p]:[{[g]:"UseFIPS"},!0]},re={[l]:P,[p]:[{[g]:"UseDualStack"},!0]},h={},oe={[l]:$,[p]:[{[g]:D},"supportsFIPS"]},se={[g]:D},ie={[l]:P,[p]:[!0,{[l]:$,[p]:[se,"supportsDualStack"]}]},ae=[ne],ce=[re],de=[{[g]:"Region"}],Ke={version:"1.0",parameters:{Region:q,UseDualStack:ee,UseFIPS:ee,Endpoint:q},rules:[{conditions:[{[l]:_,[p]:[te]}],rules:[{conditions:ae,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:f},{conditions:ce,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:f},{endpoint:{url:te,properties:h,headers:h},type:E}],type:v},{conditions:[{[l]:_,[p]:de}],rules:[{conditions:[{[l]:"aws.partition",[p]:de,assign:D}],rules:[{conditions:[ne,re],rules:[{conditions:[{[l]:P,[p]:[Q,oe]},ie],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:h,headers:h},type:E}],type:v},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:f}],type:v},{conditions:ae,rules:[{conditions:[{[l]:P,[p]:[oe,Q]}],rules:[{conditions:[{[l]:"stringEquals",[p]:[{[l]:$,[p]:[se,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:h,headers:h},type:E},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:h,headers:h},type:E}],type:v},{error:"FIPS is enabled but this partition does not support FIPS",type:f}],type:v},{conditions:ce,rules:[{conditions:[ie],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:h,headers:h},type:E}],type:v},{error:"DualStack is enabled but this partition does not support DualStack",type:f}],type:v},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:h,headers:h},type:E}],type:v}],type:v},{error:"Invalid Configuration: Missing Region",type:f}]},He=new b.kS({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),Ue=(e,r={})=>He.get(e,()=>(0,b.sO)(Ke,{endpointParams:e,logger:r.logger}));b.mw.aws=ke.UF;const Me=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??Y.E,base64Encoder:e?.base64Encoder??Y.n,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Ue,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??Pe,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:r=>r.getIdentityProvider("aws.auth#sigv4"),signer:new Re.f2},{schemeId:"smithy.api#noAuth",identityProvider:r=>r.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new je.m}],logger:e?.logger??new n.N4,serviceId:e?.serviceId??"SSO OIDC",urlParser:e?.urlParser??ze.D,utf8Decoder:e?.utf8Decoder??W.ar,utf8Encoder:e?.utf8Encoder??W.Pq});var Fe=s(360409);const Ge=e=>{(0,n.I9)(process.version);const r=(0,Fe.I)(e),t=()=>r().then(n.lT),a=Me(e);(0,Te.I)(process.version);const i={profile:e?.profile,logger:a.logger};return{...a,...e,runtime:"node",defaultsMode:r,authSchemePreference:e?.authSchemePreference??(0,S.Z)(be.$,i),bodyLengthChecker:e?.bodyLengthChecker??$e.n,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,J.pf)({serviceId:a.serviceId,clientVersion:Ae.rE}),maxAttempts:e?.maxAttempts??(0,S.Z)(I.qs,e),region:e?.region??(0,S.Z)(x.GG,{...x.zH,...i}),requestHandler:L.$c.create(e?.requestHandler??t),retryMode:e?.retryMode??(0,S.Z)({...I.kN,default:async()=>(await t()).retryMode||Oe.L0},e),sha256:e?.sha256??De.V.bind(null,"sha256"),streamCollector:e?.streamCollector??L.kv,useDualstackEndpoint:e?.useDualstackEndpoint??(0,S.Z)(x.e$,i),useFipsEndpoint:e?.useFipsEndpoint??(0,S.Z)(x.Ko,i),userAgentAppId:e?.userAgentAppId??(0,S.Z)(J.hV,i)}};var le=s(199624),pe=s(282831);const Ve=e=>{const r=e.httpAuthSchemes;let t=e.httpAuthSchemeProvider,a=e.credentials;return{setHttpAuthScheme(i){const c=r.findIndex(N=>N.schemeId===i.schemeId);c===-1?r.push(i):r.splice(c,1,i)},httpAuthSchemes(){return r},setHttpAuthSchemeProvider(i){t=i},httpAuthSchemeProvider(){return t},setCredentials(i){a=i},credentials(){return a}}},Ne=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),Be=(e,r)=>{const t=Object.assign((0,le.Rq)(e),(0,n.xA)(e),(0,pe.eS)(e),Ve(e));return r.forEach(a=>a.configure(t)),Object.assign(e,(0,le.$3)(t),(0,n.uv)(t),(0,pe.jt)(t),Ne(t))};class he extends n.Kj{constructor(...[t]){const a=Ge(t||{});super(a);o(this,"config");this.initConfig=a;const i=Ie(a),c=(0,A.Dc)(i),N=(0,I.$z)(c),ht=(0,x.TD)(N),ut=(0,w.OV)(ht),mt=(0,Z.Co)(ut),yt=we(mt),vt=Be(yt,t?.extensions||[]);this.config=vt,this.middlewareStack.use((0,A.sM)(this.config)),this.middlewareStack.use((0,I.ey)(this.config)),this.middlewareStack.use((0,Se.vK)(this.config)),this.middlewareStack.use((0,w.TC)(this.config)),this.middlewareStack.use((0,B.Y7)(this.config)),this.middlewareStack.use((0,C.n4)(this.config)),this.middlewareStack.use((0,me.w)(this.config,{httpAuthSchemeParametersProvider:ge,identityProviderConfigProvider:async St=>new ye.h({"aws.auth#sigv4":St.credentials})})),this.middlewareStack.use((0,ve.l)(this.config))}destroy(){super.destroy()}}var Ze=s(328064);class d extends n.TJ{constructor(r){super(r),Object.setPrototypeOf(this,d.prototype)}}class O extends d{constructor(t){super({name:"AccessDeniedException",$fault:"client",...t});o(this,"name","AccessDeniedException");o(this,"$fault","client");o(this,"error");o(this,"error_description");Object.setPrototypeOf(this,O.prototype),this.error=t.error,this.error_description=t.error_description}}class R extends d{constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t});o(this,"name","AuthorizationPendingException");o(this,"$fault","client");o(this,"error");o(this,"error_description");Object.setPrototypeOf(this,R.prototype),this.error=t.error,this.error_description=t.error_description}}const Je=e=>({...e,...e.clientSecret&&{clientSecret:n.$H},...e.refreshToken&&{refreshToken:n.$H},...e.codeVerifier&&{codeVerifier:n.$H}}),Le=e=>({...e,...e.accessToken&&{accessToken:n.$H},...e.refreshToken&&{refreshToken:n.$H},...e.idToken&&{idToken:n.$H}});class j extends d{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t});o(this,"name","ExpiredTokenException");o(this,"$fault","client");o(this,"error");o(this,"error_description");Object.setPrototypeOf(this,j.prototype),this.error=t.error,this.error_description=t.error_description}}class z extends d{constructor(t){super({name:"InternalServerException",$fault:"server",...t});o(this,"name","InternalServerException");o(this,"$fault","server");o(this,"error");o(this,"error_description");Object.setPrototypeOf(this,z.prototype),this.error=t.error,this.error_description=t.error_description}}class k extends d{constructor(t){super({name:"InvalidClientException",$fault:"client",...t});o(this,"name","InvalidClientException");o(this,"$fault","client");o(this,"error");o(this,"error_description");Object.setPrototypeOf(this,k.prototype),this.error=t.error,this.error_description=t.error_description}}class K extends d{constructor(t){super({name:"InvalidGrantException",$fault:"client",...t});o(this,"name","InvalidGrantException");o(this,"$fault","client");o(this,"error");o(this,"error_description");Object.setPrototypeOf(this,K.prototype),this.error=t.error,this.error_description=t.error_description}}class H extends d{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t});o(this,"name","InvalidRequestException");o(this,"$fault","client");o(this,"error");o(this,"error_description");Object.setPrototypeOf(this,H.prototype),this.error=t.error,this.error_description=t.error_description}}class U extends d{constructor(t){super({name:"InvalidScopeException",$fault:"client",...t});o(this,"name","InvalidScopeException");o(this,"$fault","client");o(this,"error");o(this,"error_description");Object.setPrototypeOf(this,U.prototype),this.error=t.error,this.error_description=t.error_description}}class M extends d{constructor(t){super({name:"SlowDownException",$fault:"client",...t});o(this,"name","SlowDownException");o(this,"$fault","client");o(this,"error");o(this,"error_description");Object.setPrototypeOf(this,M.prototype),this.error=t.error,this.error_description=t.error_description}}class F extends d{constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t});o(this,"name","UnauthorizedClientException");o(this,"$fault","client");o(this,"error");o(this,"error_description");Object.setPrototypeOf(this,F.prototype),this.error=t.error,this.error_description=t.error_description}}class G extends d{constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t});o(this,"name","UnsupportedGrantTypeException");o(this,"$fault","client");o(this,"error");o(this,"error_description");Object.setPrototypeOf(this,G.prototype),this.error=t.error,this.error_description=t.error_description}}var V=s(948839),Ye=s(24452);const We=async(e,r)=>{const t=(0,Ye.l)(e,r),a={"content-type":"application/json"};t.bp("/token");let i;return i=JSON.stringify((0,n.s)(e,{clientId:[],clientSecret:[],code:[],codeVerifier:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:c=>(0,n.Ss)(c)})),t.m("POST").h(a).b(i),t.build()},Xe=async(e,r)=>{if(e.statusCode!==200&&e.statusCode>=300)return Qe(e,r);const t=(0,n.Tj)({$metadata:u(e)}),a=(0,n.Y0)((0,n.Xk)(await(0,V.Y2)(e.body,r)),"body"),i=(0,n.s)(a,{accessToken:n.lK,expiresIn:n.ET,idToken:n.lK,refreshToken:n.lK,tokenType:n.lK});return Object.assign(t,i),t},Qe=async(e,r)=>{const t={...e,body:await(0,V.CG)(e.body,r)},a=(0,V.cJ)(e,t.body);switch(a){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await qe(t,r);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await et(t,r);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await tt(t,r);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await nt(t,r);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await rt(t,r);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await ot(t,r);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await st(t,r);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await it(t,r);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await at(t,r);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await ct(t,r);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await dt(t,r);default:const i=t.body;return _e({output:e,parsedBody:i,errorCode:a})}},_e=(0,n.jr)(d),qe=async(e,r)=>{const t=(0,n.Tj)({}),a=e.body,i=(0,n.s)(a,{error:n.lK,error_description:n.lK});Object.assign(t,i);const c=new O({$metadata:u(e),...t});return(0,n.Mw)(c,e.body)},et=async(e,r)=>{const t=(0,n.Tj)({}),a=e.body,i=(0,n.s)(a,{error:n.lK,error_description:n.lK});Object.assign(t,i);const c=new R({$metadata:u(e),...t});return(0,n.Mw)(c,e.body)},tt=async(e,r)=>{const t=(0,n.Tj)({}),a=e.body,i=(0,n.s)(a,{error:n.lK,error_description:n.lK});Object.assign(t,i);const c=new j({$metadata:u(e),...t});return(0,n.Mw)(c,e.body)},nt=async(e,r)=>{const t=(0,n.Tj)({}),a=e.body,i=(0,n.s)(a,{error:n.lK,error_description:n.lK});Object.assign(t,i);const c=new z({$metadata:u(e),...t});return(0,n.Mw)(c,e.body)},rt=async(e,r)=>{const t=(0,n.Tj)({}),a=e.body,i=(0,n.s)(a,{error:n.lK,error_description:n.lK});Object.assign(t,i);const c=new k({$metadata:u(e),...t});return(0,n.Mw)(c,e.body)},ot=async(e,r)=>{const t=(0,n.Tj)({}),a=e.body,i=(0,n.s)(a,{error:n.lK,error_description:n.lK});Object.assign(t,i);const c=new K({$metadata:u(e),...t});return(0,n.Mw)(c,e.body)},st=async(e,r)=>{const t=(0,n.Tj)({}),a=e.body,i=(0,n.s)(a,{error:n.lK,error_description:n.lK});Object.assign(t,i);const c=new H({$metadata:u(e),...t});return(0,n.Mw)(c,e.body)},it=async(e,r)=>{const t=(0,n.Tj)({}),a=e.body,i=(0,n.s)(a,{error:n.lK,error_description:n.lK});Object.assign(t,i);const c=new U({$metadata:u(e),...t});return(0,n.Mw)(c,e.body)},at=async(e,r)=>{const t=(0,n.Tj)({}),a=e.body,i=(0,n.s)(a,{error:n.lK,error_description:n.lK});Object.assign(t,i);const c=new M({$metadata:u(e),...t});return(0,n.Mw)(c,e.body)},ct=async(e,r)=>{const t=(0,n.Tj)({}),a=e.body,i=(0,n.s)(a,{error:n.lK,error_description:n.lK});Object.assign(t,i);const c=new F({$metadata:u(e),...t});return(0,n.Mw)(c,e.body)},dt=async(e,r)=>{const t=(0,n.Tj)({}),a=e.body,i=(0,n.s)(a,{error:n.lK,error_description:n.lK});Object.assign(t,i);const c=new G({$metadata:u(e),...t});return(0,n.Mw)(c,e.body)},u=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Et=(e,r)=>collectBody(e,r).then(t=>r.utf8Encoder(t));class ue extends n.uB.classBuilder().ep(Ce).m(function(r,t,a,i){return[(0,Ze.TM)(a,this.serialize,this.deserialize),(0,Z.rD)(a,r.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").f(Je,Le).ser(We).de(Xe).build(){}const lt={CreateTokenCommand:ue};class pt extends he{}(0,n.J1)(lt,pt)},359480:(y,m,s)=>{s.d(m,{m:()=>w});class w{async sign(C,A,x){return C}}},316603:y=>{y.exports={rE:"3.848.0"}}};

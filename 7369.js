"use strict";exports.id=7369,exports.ids=[7369],exports.modules={739750:(T,i,e)=>{e.r(i),e.d(i,{fromProcess:()=>C});var t=e(336937),l=e(347874),n=e(966653),o=e(878620),c=e(535317),a=e(539023),P=e(313421);const u=(s,r,d)=>{if(r.Version!==1)throw Error(`Profile ${s} credential_process did not return Version 1.`);if(r.AccessKeyId===void 0||r.SecretAccessKey===void 0)throw Error(`Profile ${s} credential_process returned invalid credentials.`);if(r.Expiration){const v=new Date;if(new Date(r.Expiration)<v)throw Error(`Profile ${s} credential_process returned expired credentials.`)}let E=r.AccountId;!E&&d?.[s]?.aws_account_id&&(E=d[s].aws_account_id);const O={accessKeyId:r.AccessKeyId,secretAccessKey:r.SecretAccessKey,...r.SessionToken&&{sessionToken:r.SessionToken},...r.Expiration&&{expiration:new Date(r.Expiration)},...r.CredentialScope&&{credentialScope:r.CredentialScope},...E&&{accountId:E}};return(0,P.g)(O,"CREDENTIALS_PROCESS","w"),O},h=async(s,r,d)=>{const E=r[s];if(r[s]){const O=E.credential_process;if(O!==void 0){const v=(0,a.promisify)(o.Z?.getTokenRecord?.().exec??c.exec);try{const{stdout:D}=await v(O);let f;try{f=JSON.parse(D.trim())}catch{throw Error(`Profile ${s} credential_process returned invalid JSON.`)}return u(s,f,r)}catch(D){throw new n.C(D.message,{logger:d})}}else throw new n.C(`Profile ${s} did not contain credential_process.`,{logger:d})}else throw new n.C(`Profile ${s} could not be found in shared credentials file.`,{logger:d})},C=(s={})=>async({callerClientConfig:r}={})=>{s.logger?.debug("@aws-sdk/credential-provider-process - fromProcess");const d=await(0,t.Y)(s);return h((0,l.Bz)({profile:s.profile??r?.profile}),d,s.logger)}},878620:(T,i,e)=>{e.d(i,{Z:()=>n});var t=e(910704),l=e(921710);const n={getFileRecord(){return l.Jj},interceptFile(o,c){l.Jj[o]=Promise.resolve(c)},getTokenRecord(){return t.a},interceptToken(o,c){t.a[o]=c}}},34659:(T,i,e)=>{e.d(i,{C:()=>a});var t=e(776982),l=e.n(t),n=e(16928),o=e.n(n),c=e(572234);const a=P=>{const h=(0,t.createHash)("sha1").update(P).digest("hex");return(0,n.join)((0,c.R)(),".aws","sso","cache",`${h}.json`)}},910704:(T,i,e)=>{e.d(i,{a:()=>o,v:()=>c});var t=e(191943),l=e.n(t),n=e(34659);const o={},c=async a=>{if(o[a])return o[a];const P=(0,n.C)(a),u=await(0,t.readFile)(P,"utf8");return JSON.parse(u)}}};

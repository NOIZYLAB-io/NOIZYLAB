"use strict";exports.id=9750,exports.ids=[9750,7369],exports.modules={739750:(O,i,e)=>{e.r(i),e.d(i,{fromProcess:()=>C});var o=e(336937),l=e(347874),c=e(966653),t=e(878620),r=e(535317),d=e(539023),a=e(313421);const P=(n,s,E)=>{if(s.Version!==1)throw Error(`Profile ${n} credential_process did not return Version 1.`);if(s.AccessKeyId===void 0||s.SecretAccessKey===void 0)throw Error(`Profile ${n} credential_process returned invalid credentials.`);if(s.Expiration){const h=new Date;if(new Date(s.Expiration)<h)throw Error(`Profile ${n} credential_process returned expired credentials.`)}let f=s.AccountId;!f&&E?.[n]?.aws_account_id&&(f=E[n].aws_account_id);const u={accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,...s.SessionToken&&{sessionToken:s.SessionToken},...s.Expiration&&{expiration:new Date(s.Expiration)},...s.CredentialScope&&{credentialScope:s.CredentialScope},...f&&{accountId:f}};return(0,a.g)(u,"CREDENTIALS_PROCESS","w"),u},T=async(n,s,E)=>{const f=s[n];if(s[n]){const u=f.credential_process;if(u!==void 0){const h=(0,d.promisify)(t.Z?.getTokenRecord?.().exec??r.exec);try{const{stdout:D}=await h(u);let v;try{v=JSON.parse(D.trim())}catch{throw Error(`Profile ${n} credential_process returned invalid JSON.`)}return P(n,v,s)}catch(D){throw new c.C(D.message,{logger:E})}}else throw new c.C(`Profile ${n} did not contain credential_process.`,{logger:E})}else throw new c.C(`Profile ${n} could not be found in shared credentials file.`,{logger:E})},C=(n={})=>async({callerClientConfig:s}={})=>{n.logger?.debug("@aws-sdk/credential-provider-process - fromProcess");const E=await(0,o.Y)(n);return T((0,l.Bz)({profile:n.profile??s?.profile}),E,n.logger)}},878620:(O,i,e)=>{e.d(i,{Z:()=>c});var o=e(910704),l=e(921710);const c={getFileRecord(){return l.Jj},interceptFile(t,r){l.Jj[t]=Promise.resolve(r)},getTokenRecord(){return o.a},interceptToken(t,r){o.a[t]=r}}},34659:(O,i,e)=>{e.d(i,{C:()=>d});var o=e(776982),l=e.n(o),c=e(16928),t=e.n(c),r=e(572234);const d=a=>{const T=(0,o.createHash)("sha1").update(a).digest("hex");return(0,c.join)((0,r.R)(),".aws","sso","cache",`${T}.json`)}},910704:(O,i,e)=>{e.d(i,{a:()=>t,v:()=>r});var o=e(191943),l=e.n(o),c=e(34659);const t={},r=async d=>{if(t[d])return t[d];const a=(0,c.C)(d),P=await(0,o.readFile)(a,"utf8");return JSON.parse(P)}},336937:(O,i,e)=>{e.d(i,{Y:()=>c});var o=e(201933);const l=(...t)=>{const r={};for(const d of t)for(const[a,P]of Object.entries(d))r[a]!==void 0?Object.assign(r[a],P):r[a]=P;return r},c=async t=>{const r=await(0,o.p)(t);return l(r.configFile,r.credentialsFile)}}};

"use strict";exports.id=408,exports.ids=[408],exports.modules={1387:(e,t,n)=>{n.d(t,{getDefaultRoleAssumer:()=>gr,getDefaultRoleAssumerWithWebIdentity:()=>wr});var r=n(43),i=n(98),s=n(85);const o={silence:!1};var a=n(136),c=n(135);const u={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};var l=n(65),d=n(66);class f extends d.T{constructor(e){super(e),Object.setPrototypeOf(this,f.prototype)}}class h extends f{name="ExpiredTokenException";$fault="client";constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),Object.setPrototypeOf(this,h.prototype)}}class p extends f{name="MalformedPolicyDocumentException";$fault="client";constructor(e){super({name:"MalformedPolicyDocumentException",$fault:"client",...e}),Object.setPrototypeOf(this,p.prototype)}}class m extends f{name="PackedPolicyTooLargeException";$fault="client";constructor(e){super({name:"PackedPolicyTooLargeException",$fault:"client",...e}),Object.setPrototypeOf(this,m.prototype)}}class g extends f{name="RegionDisabledException";$fault="client";constructor(e){super({name:"RegionDisabledException",$fault:"client",...e}),Object.setPrototypeOf(this,g.prototype)}}class w extends f{name="IDPRejectedClaimException";$fault="client";constructor(e){super({name:"IDPRejectedClaimException",$fault:"client",...e}),Object.setPrototypeOf(this,w.prototype)}}class y extends f{name="InvalidIdentityTokenException";$fault="client";constructor(e){super({name:"InvalidIdentityTokenException",$fault:"client",...e}),Object.setPrototypeOf(this,y.prototype)}}class v extends f{name="IDPCommunicationErrorException";$fault="client";constructor(e){super({name:"IDPCommunicationErrorException",$fault:"client",...e}),Object.setPrototypeOf(this,v.prototype)}}const b="AssumedRoleUser",E="Credentials",x="DurationSeconds",S="Policy",I="PolicyArns",A="PackedPolicySize",P="RoleArn",T="RoleSessionName",$="SourceIdentity",N="awsQueryError",R="client",D="error",C="httpError",k="message",O="smithy.ts.sdk.synthetic.com.amazonaws.sts",F="com.amazonaws.sts";var j=[0,F,"accessKeySecretType",8,0],M=[0,F,"clientTokenType",8,0],_=[3,F,b,0,["AssumedRoleId","Arn"],[0,0]],U=[3,F,"AssumeRoleRequest",0,[P,T,I,S,x,"Tags","TransitiveTagKeys","ExternalId","SerialNumber","TokenCode",$,"ProvidedContexts"],[0,0,()=>te,0,1,()=>re,64,0,0,0,0,()=>ne]],L=[3,F,"AssumeRoleResponse",0,[E,b,A,$],[[()=>V,0],()=>_,1,0]],W=[3,F,"AssumeRoleWithWebIdentityRequest",0,[P,T,"WebIdentityToken","ProviderId",I,S,x],[0,0,[()=>M,0],0,()=>te,0,1]],z=[3,F,"AssumeRoleWithWebIdentityResponse",0,[E,"SubjectFromWebIdentityToken",b,A,"Provider","Audience",$],[[()=>V,0],0,()=>_,1,0,0,0]],V=[3,F,E,0,["AccessKeyId","SecretAccessKey","SessionToken","Expiration"],[0,[()=>j,0],0,4]],q=[-3,F,"ExpiredTokenException",{[D]:R,[C]:400,[N]:["ExpiredTokenException",400]},[k],[0]];l.O.for(F).registerError(q,h);var Y=[-3,F,"IDPCommunicationErrorException",{[D]:R,[C]:400,[N]:["IDPCommunicationError",400]},[k],[0]];l.O.for(F).registerError(Y,v);var B=[-3,F,"IDPRejectedClaimException",{[D]:R,[C]:403,[N]:["IDPRejectedClaim",403]},[k],[0]];l.O.for(F).registerError(B,w);var G=[-3,F,"InvalidIdentityTokenException",{[D]:R,[C]:400,[N]:["InvalidIdentityToken",400]},[k],[0]];l.O.for(F).registerError(G,y);var K=[-3,F,"MalformedPolicyDocumentException",{[D]:R,[C]:400,[N]:["MalformedPolicyDocument",400]},[k],[0]];l.O.for(F).registerError(K,p);var Q=[-3,F,"PackedPolicyTooLargeException",{[D]:R,[C]:400,[N]:["PackedPolicyTooLarge",400]},[k],[0]];l.O.for(F).registerError(Q,m);var X=[3,F,"PolicyDescriptorType",0,["arn"],[0]],H=[3,F,"ProvidedContext",0,["ProviderArn","ContextAssertion"],[0,0]],J=[-3,F,"RegionDisabledException",{[D]:R,[C]:403,[N]:["RegionDisabledException",403]},[k],[0]];l.O.for(F).registerError(J,g);var Z=[3,F,"Tag",0,["Key","Value"],[0,0]],ee=[-3,O,"STSServiceException",0,[],[]];l.O.for(O).registerError(ee,f);var te=[1,F,"policyDescriptorListType",0,()=>X],ne=[1,F,"ProvidedContextsListType",0,()=>H],re=[1,F,"tagListType",0,()=>Z],ie=[9,F,"AssumeRole",0,()=>U,()=>L],se=[9,F,"AssumeRoleWithWebIdentity",0,()=>W,()=>z];class oe extends(c.u.classBuilder().ep(u).m((function(e,t,n,r){return[(0,a.r)(n,e.getEndpointParameterInstructions())]})).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").sc(ie).build()){}class ae extends(c.u.classBuilder().ep(u).m((function(e,t,n,r){return[(0,a.r)(n,e.getEndpointParameterInstructions())]})).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").sc(se).build()){}const ce=e=>{if("string"==typeof e?.Arn){const t=e.Arn.split(":");if(t.length>4&&""!==t[4])return t[4]}},ue=async(e,t,n,r={})=>{const a="function"==typeof e?await e():e,c="function"==typeof t?await t():t,u=await function(e={}){return(0,s.Z)({...i.GG,default:async()=>(o.silence,"us-east-1")},{...i.zH,...e})}(r)();return n?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${a} (credential provider clientConfig)`,`${c} (contextual client)`,`${u} (STS default: AWS_REGION, profile region, or us-east-1)`),a??c??u},le=(e,t)=>{let n,i;return async(s,o)=>{if(i=s,!n){const{logger:r=e?.parentClientConfig?.logger,profile:s=e?.parentClientConfig?.profile,region:o,requestHandler:a=e?.parentClientConfig?.requestHandler,credentialProviderLogger:c,userAgentAppId:u=e?.parentClientConfig?.userAgentAppId}=e,l=await ue(o,e?.parentClientConfig?.region,c,{logger:r,profile:s}),d=!fe(a);n=new t({...e,userAgentAppId:u,profile:s,credentialDefaultProvider:()=>async()=>i,region:l,requestHandler:d?a:void 0,logger:r})}const{Credentials:a,AssumedRoleUser:c}=await n.send(new oe(o));if(!a||!a.AccessKeyId||!a.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${o.RoleArn}`);const u=ce(c),l={accessKeyId:a.AccessKeyId,secretAccessKey:a.SecretAccessKey,sessionToken:a.SessionToken,expiration:a.Expiration,...a.CredentialScope&&{credentialScope:a.CredentialScope},...u&&{accountId:u}};return(0,r.g)(l,"CREDENTIALS_STS_ASSUME_ROLE","i"),l}},de=(e,t)=>{let n;return async i=>{if(!n){const{logger:r=e?.parentClientConfig?.logger,profile:i=e?.parentClientConfig?.profile,region:s,requestHandler:o=e?.parentClientConfig?.requestHandler,credentialProviderLogger:a,userAgentAppId:c=e?.parentClientConfig?.userAgentAppId}=e,u=await ue(s,e?.parentClientConfig?.region,a,{logger:r,profile:i}),l=!fe(o);n=new t({...e,userAgentAppId:c,profile:i,region:u,requestHandler:l?o:void 0,logger:r})}const{Credentials:s,AssumedRoleUser:o}=await n.send(new ae(i));if(!s||!s.AccessKeyId||!s.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${i.RoleArn}`);const a=ce(o),c={accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,sessionToken:s.SessionToken,expiration:s.Expiration,...s.CredentialScope&&{credentialScope:s.CredentialScope},...a&&{accountId:a}};return a&&(0,r.g)(c,"RESOLVED_ACCOUNT_ID","T"),(0,r.g)(c,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),c}},fe=e=>"h2"===e?.metadata?.handlerProtocol;var he=n(36),pe=n(130),me=n(131),ge=n(117),we=n(128),ye=n(123),ve=n(132),be=n(133),Ee=n(134),xe=n(127),Se=n(38),Ie=n(124),Ae=n(106),Pe=n(129),Te=n(121),$e=n(42),Ne=n(39),Re=n(41);const De=async(e,t,n)=>({operation:(0,Ne.u)(t).operation,region:await(0,Re.t)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});const Ce=e=>{const t=[];if("AssumeRoleWithWebIdentity"===e.operation)t.push({schemeId:"smithy.api#noAuth"});else t.push(function(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(e,t)=>({signingProperties:{config:e,context:t}})}}(e));return t},ke=e=>{const t=(n=e,Object.assign(n,{stsClientCtor:pr}));var n;const r=(0,$e.h)(t);return Object.assign(r,{authSchemePreference:(0,Re.t)(e.authSchemePreference??[])})};var Oe=n(1386),Fe=n(100),je=n(101),Me=n(61),_e=n(104),Ue=n(116),Le=n(112),We=n(115),ze=n(1380),Ve=n(51),qe=n(110),Ye=n(111),Be=n(102),Ge=n(107),Ke=n(80),Qe=n(71),Xe=n(74),He=n(73),Je=n(64);const Ze={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,n){return e},captureMetaData:!1},et=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",tt=new RegExp("^"+("["+et+"]["+(et+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040")+"]*")+"$");function nt(e,t){const n=[];let r=t.exec(e);for(;r;){const i=[];i.startIndex=t.lastIndex-r[0].length;const s=r.length;for(let e=0;e<s;e++)i.push(r[e]);n.push(i),r=t.exec(e)}return n}const rt=function(e){const t=tt.exec(e);return!(null==t)};let it;it="function"!=typeof Symbol?"@@xmlMetadata":Symbol("XML Node Metadata");class st{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,t){"__proto__"===e&&(e="#__proto__"),this.child.push({[e]:t})}addChild(e,t){"__proto__"===e.tagname&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child}),void 0!==t&&(this.child[this.child.length-1][it]={startIndex:t})}static getMetaDataSymbol(){return it}}function ot(e,t){const n={};if("O"!==e[t+3]||"C"!==e[t+4]||"T"!==e[t+5]||"Y"!==e[t+6]||"P"!==e[t+7]||"E"!==e[t+8])throw new Error("Invalid Tag instead of DOCTYPE");{t+=9;let r=1,i=!1,s=!1,o="";for(;t<e.length;t++)if("<"!==e[t]||s)if(">"===e[t]){if(s?"-"===e[t-1]&&"-"===e[t-2]&&(s=!1,r--):r--,0===r)break}else"["===e[t]?i=!0:o+=e[t];else{if(i&&ft(e,"!ENTITY",t)){let r,i;t+=7,[r,i,t]=ct(e,t+1),-1===i.indexOf("&")&&(n[r]={regx:RegExp(`&${r};`,"g"),val:i})}else if(i&&ft(e,"!ELEMENT",t)){t+=8;const{index:n}=dt(e,t+1);t=n}else if(i&&ft(e,"!ATTLIST",t))t+=8;else if(i&&ft(e,"!NOTATION",t)){t+=9;const{index:n}=ut(e,t+1);t=n}else{if(!ft(e,"!--",t))throw new Error("Invalid DOCTYPE");s=!0}r++,o=""}if(0!==r)throw new Error("Unclosed DOCTYPE")}return{entities:n,i:t}}const at=(e,t)=>{for(;t<e.length&&/\s/.test(e[t]);)t++;return t};function ct(e,t){t=at(e,t);let n="";for(;t<e.length&&!/\s/.test(e[t])&&'"'!==e[t]&&"'"!==e[t];)n+=e[t],t++;if(ht(n),t=at(e,t),"SYSTEM"===e.substring(t,t+6).toUpperCase())throw new Error("External entities are not supported");if("%"===e[t])throw new Error("Parameter entities are not supported");let r="";return[t,r]=lt(e,t,"entity"),[n,r,--t]}function ut(e,t){t=at(e,t);let n="";for(;t<e.length&&!/\s/.test(e[t]);)n+=e[t],t++;ht(n),t=at(e,t);const r=e.substring(t,t+6).toUpperCase();if("SYSTEM"!==r&&"PUBLIC"!==r)throw new Error(`Expected SYSTEM or PUBLIC, found "${r}"`);t+=r.length,t=at(e,t);let i=null,s=null;if("PUBLIC"===r)[t,i]=lt(e,t,"publicIdentifier"),'"'!==e[t=at(e,t)]&&"'"!==e[t]||([t,s]=lt(e,t,"systemIdentifier"));else if("SYSTEM"===r&&([t,s]=lt(e,t,"systemIdentifier"),!s))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:n,publicIdentifier:i,systemIdentifier:s,index:--t}}function lt(e,t,n){let r="";const i=e[t];if('"'!==i&&"'"!==i)throw new Error(`Expected quoted string, found "${i}"`);for(t++;t<e.length&&e[t]!==i;)r+=e[t],t++;if(e[t]!==i)throw new Error(`Unterminated ${n} value`);return[++t,r]}function dt(e,t){t=at(e,t);let n="";for(;t<e.length&&!/\s/.test(e[t]);)n+=e[t],t++;if(!ht(n))throw new Error(`Invalid element name: "${n}"`);let r="";if("E"===e[t=at(e,t)]&&ft(e,"MPTY",t))t+=4;else if("A"===e[t]&&ft(e,"NY",t))t+=2;else{if("("!==e[t])throw new Error(`Invalid Element Expression, found "${e[t]}"`);for(t++;t<e.length&&")"!==e[t];)r+=e[t],t++;if(")"!==e[t])throw new Error("Unterminated content model")}return{elementName:n,contentModel:r.trim(),index:t}}function ft(e,t,n){for(let r=0;r<t.length;r++)if(t[r]!==e[n+r+1])return!1;return!0}function ht(e){if(rt(e))return e;throw new Error(`Invalid entity name ${e}`)}const pt=/^[-+]?0x[a-fA-F0-9]+$/,mt=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,gt={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function wt(e,t={}){if(t=Object.assign({},gt,t),!e||"string"!=typeof e)return e;let n=e.trim();if(void 0!==t.skipLike&&t.skipLike.test(n))return e;if("0"===e)return 0;if(t.hex&&pt.test(n))return function(e,t){if(parseInt)return parseInt(e,t);if(Number.parseInt)return Number.parseInt(e,t);if(window&&window.parseInt)return window.parseInt(e,t);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}(n,16);if(-1!==n.search(/.+[eE].+/))return function(e,t,n){if(!n.eNotation)return e;const r=t.match(yt);if(r){let i=r[1]||"";const s=-1===r[3].indexOf("e")?"E":"e",o=r[2],a=i?e[o.length+1]===s:e[o.length]===s;return o.length>1&&a?e:1!==o.length||!r[3].startsWith(`.${s}`)&&r[3][0]!==s?n.leadingZeros&&!a?(t=(r[1]||"")+r[3],Number(t)):e:Number(t)}return e}(e,n,t);{const r=mt.exec(n);if(r){const i=r[1]||"",s=r[2];let o=function(e){if(e&&-1!==e.indexOf("."))return"."===(e=e.replace(/0+$/,""))?e="0":"."===e[0]?e="0"+e:"."===e[e.length-1]&&(e=e.substring(0,e.length-1)),e;return e}(r[3]);const a=i?"."===e[s.length+1]:"."===e[s.length];if(!t.leadingZeros&&(s.length>1||1===s.length&&!a))return e;{const r=Number(n),a=String(r);if(0===r)return r;if(-1!==a.search(/[eE]/))return t.eNotation?r:e;if(-1!==n.indexOf("."))return"0"===a||a===o||a===`${i}${o}`?r:e;let c=s?o:n;return s?c===a||i+c===a?r:e:c===a||c===i+a?r:e}}return e}}const yt=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;class vt{constructor(e){var t;this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(e,t)=>String.fromCodePoint(Number.parseInt(t,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(e,t)=>String.fromCodePoint(Number.parseInt(t,16))}},this.addExternalEntities=bt,this.parseXml=At,this.parseTextData=Et,this.resolveNameSpace=xt,this.buildAttributesMap=It,this.isItStopNode=Nt,this.replaceEntitiesValue=Tt,this.readStopNodeData=Ct,this.saveTextToParentTag=$t,this.addChild=Pt,this.ignoreAttributesFn="function"==typeof(t=this.options.ignoreAttributes)?t:Array.isArray(t)?e=>{for(const n of t){if("string"==typeof n&&e===n)return!0;if(n instanceof RegExp&&n.test(e))return!0}}:()=>!1}}function bt(e){const t=Object.keys(e);for(let n=0;n<t.length;n++){const r=t[n];this.lastEntities[r]={regex:new RegExp("&"+r+";","g"),val:e[r]}}}function Et(e,t,n,r,i,s,o){if(void 0!==e&&(this.options.trimValues&&!r&&(e=e.trim()),e.length>0)){o||(e=this.replaceEntitiesValue(e));const r=this.options.tagValueProcessor(t,e,n,i,s);if(null==r)return e;if(typeof r!=typeof e||r!==e)return r;if(this.options.trimValues)return kt(e,this.options.parseTagValue,this.options.numberParseOptions);return e.trim()===e?kt(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function xt(e){if(this.options.removeNSPrefix){const t=e.split(":"),n="/"===e.charAt(0)?"/":"";if("xmlns"===t[0])return"";2===t.length&&(e=n+t[1])}return e}const St=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])([\\s\\S]*?)\\3)?","gm");function It(e,t,n){if(!0!==this.options.ignoreAttributes&&"string"==typeof e){const n=nt(e,St),r=n.length,i={};for(let e=0;e<r;e++){const r=this.resolveNameSpace(n[e][1]);if(this.ignoreAttributesFn(r,t))continue;let s=n[e][4],o=this.options.attributeNamePrefix+r;if(r.length)if(this.options.transformAttributeName&&(o=this.options.transformAttributeName(o)),"__proto__"===o&&(o="#__proto__"),void 0!==s){this.options.trimValues&&(s=s.trim()),s=this.replaceEntitiesValue(s);const e=this.options.attributeValueProcessor(r,s,t);i[o]=null==e?s:typeof e!=typeof s||e!==s?e:kt(s,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(i[o]=!0)}if(!Object.keys(i).length)return;if(this.options.attributesGroupName){const e={};return e[this.options.attributesGroupName]=i,e}return i}}const At=function(e){e=e.replace(/\r\n?/g,"\n");const t=new st("!xml");let n=t,r="",i="";for(let s=0;s<e.length;s++){if("<"===e[s])if("/"===e[s+1]){const t=Rt(e,">",s,"Closing Tag is not closed.");let o=e.substring(s+2,t).trim();if(this.options.removeNSPrefix){const e=o.indexOf(":");-1!==e&&(o=o.substr(e+1))}this.options.transformTagName&&(o=this.options.transformTagName(o)),n&&(r=this.saveTextToParentTag(r,n,i));const a=i.substring(i.lastIndexOf(".")+1);if(o&&-1!==this.options.unpairedTags.indexOf(o))throw new Error(`Unpaired tag can not be used as closing tag: </${o}>`);let c=0;a&&-1!==this.options.unpairedTags.indexOf(a)?(c=i.lastIndexOf(".",i.lastIndexOf(".")-1),this.tagsNodeStack.pop()):c=i.lastIndexOf("."),i=i.substring(0,c),n=this.tagsNodeStack.pop(),r="",s=t}else if("?"===e[s+1]){let t=Dt(e,s,!1,"?>");if(!t)throw new Error("Pi Tag is not closed.");if(r=this.saveTextToParentTag(r,n,i),this.options.ignoreDeclaration&&"?xml"===t.tagName||this.options.ignorePiTags);else{const e=new st(t.tagName);e.add(this.options.textNodeName,""),t.tagName!==t.tagExp&&t.attrExpPresent&&(e[":@"]=this.buildAttributesMap(t.tagExp,i,t.tagName)),this.addChild(n,e,i,s)}s=t.closeIndex+1}else if("!--"===e.substr(s+1,3)){const t=Rt(e,"--\x3e",s+4,"Comment is not closed.");if(this.options.commentPropName){const o=e.substring(s+4,t-2);r=this.saveTextToParentTag(r,n,i),n.add(this.options.commentPropName,[{[this.options.textNodeName]:o}])}s=t}else if("!D"===e.substr(s+1,2)){const t=ot(e,s);this.docTypeEntities=t.entities,s=t.i}else if("!["===e.substr(s+1,2)){const t=Rt(e,"]]>",s,"CDATA is not closed.")-2,o=e.substring(s+9,t);r=this.saveTextToParentTag(r,n,i);let a=this.parseTextData(o,n.tagname,i,!0,!1,!0,!0);null==a&&(a=""),this.options.cdataPropName?n.add(this.options.cdataPropName,[{[this.options.textNodeName]:o}]):n.add(this.options.textNodeName,a),s=t+2}else{let o=Dt(e,s,this.options.removeNSPrefix),a=o.tagName;const c=o.rawTagName;let u=o.tagExp,l=o.attrExpPresent,d=o.closeIndex;this.options.transformTagName&&(a=this.options.transformTagName(a)),n&&r&&"!xml"!==n.tagname&&(r=this.saveTextToParentTag(r,n,i,!1));const f=n;f&&-1!==this.options.unpairedTags.indexOf(f.tagname)&&(n=this.tagsNodeStack.pop(),i=i.substring(0,i.lastIndexOf("."))),a!==t.tagname&&(i+=i?"."+a:a);const h=s;if(this.isItStopNode(this.options.stopNodes,i,a)){let t="";if(u.length>0&&u.lastIndexOf("/")===u.length-1)"/"===a[a.length-1]?(a=a.substr(0,a.length-1),i=i.substr(0,i.length-1),u=a):u=u.substr(0,u.length-1),s=o.closeIndex;else if(-1!==this.options.unpairedTags.indexOf(a))s=o.closeIndex;else{const n=this.readStopNodeData(e,c,d+1);if(!n)throw new Error(`Unexpected end of ${c}`);s=n.i,t=n.tagContent}const r=new st(a);a!==u&&l&&(r[":@"]=this.buildAttributesMap(u,i,a)),t&&(t=this.parseTextData(t,a,i,!0,l,!0,!0)),i=i.substr(0,i.lastIndexOf(".")),r.add(this.options.textNodeName,t),this.addChild(n,r,i,h)}else{if(u.length>0&&u.lastIndexOf("/")===u.length-1){"/"===a[a.length-1]?(a=a.substr(0,a.length-1),i=i.substr(0,i.length-1),u=a):u=u.substr(0,u.length-1),this.options.transformTagName&&(a=this.options.transformTagName(a));const e=new st(a);a!==u&&l&&(e[":@"]=this.buildAttributesMap(u,i,a)),this.addChild(n,e,i,h),i=i.substr(0,i.lastIndexOf("."))}else{const e=new st(a);this.tagsNodeStack.push(n),a!==u&&l&&(e[":@"]=this.buildAttributesMap(u,i,a)),this.addChild(n,e,i,h),n=e}r="",s=d}}else r+=e[s]}return t.child};function Pt(e,t,n,r){this.options.captureMetaData||(r=void 0);const i=this.options.updateTag(t.tagname,n,t[":@"]);!1===i||("string"==typeof i?(t.tagname=i,e.addChild(t,r)):e.addChild(t,r))}const Tt=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){const n=this.docTypeEntities[t];e=e.replace(n.regx,n.val)}for(let t in this.lastEntities){const n=this.lastEntities[t];e=e.replace(n.regex,n.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){const n=this.htmlEntities[t];e=e.replace(n.regex,n.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function $t(e,t,n,r){return e&&(void 0===r&&(r=0===t.child.length),void 0!==(e=this.parseTextData(e,t.tagname,n,!1,!!t[":@"]&&0!==Object.keys(t[":@"]).length,r))&&""!==e&&t.add(this.options.textNodeName,e),e=""),e}function Nt(e,t,n){const r="*."+n;for(const n in e){const i=e[n];if(r===i||t===i)return!0}return!1}function Rt(e,t,n,r){const i=e.indexOf(t,n);if(-1===i)throw new Error(r);return i+t.length-1}function Dt(e,t,n,r=">"){const i=function(e,t,n=">"){let r,i="";for(let s=t;s<e.length;s++){let t=e[s];if(r)t===r&&(r="");else if('"'===t||"'"===t)r=t;else if(t===n[0]){if(!n[1])return{data:i,index:s};if(e[s+1]===n[1])return{data:i,index:s}}else"\t"===t&&(t=" ");i+=t}}(e,t+1,r);if(!i)return;let s=i.data;const o=i.index,a=s.search(/\s/);let c=s,u=!0;-1!==a&&(c=s.substring(0,a),s=s.substring(a+1).trimStart());const l=c;if(n){const e=c.indexOf(":");-1!==e&&(c=c.substr(e+1),u=c!==i.data.substr(e+1))}return{tagName:c,tagExp:s,closeIndex:o,attrExpPresent:u,rawTagName:l}}function Ct(e,t,n){const r=n;let i=1;for(;n<e.length;n++)if("<"===e[n])if("/"===e[n+1]){const s=Rt(e,">",n,`${t} is not closed`);if(e.substring(n+2,s).trim()===t&&(i--,0===i))return{tagContent:e.substring(r,n),i:s};n=s}else if("?"===e[n+1]){n=Rt(e,"?>",n+1,"StopNode is not closed.")}else if("!--"===e.substr(n+1,3)){n=Rt(e,"--\x3e",n+3,"StopNode is not closed.")}else if("!["===e.substr(n+1,2)){n=Rt(e,"]]>",n,"StopNode is not closed.")-2}else{const r=Dt(e,n,">");if(r){(r&&r.tagName)===t&&"/"!==r.tagExp[r.tagExp.length-1]&&i++,n=r.closeIndex}}}function kt(e,t,n){if(t&&"string"==typeof e){const t=e.trim();return"true"===t||"false"!==t&&wt(e,n)}return function(e){return void 0!==e}(e)?e:""}const Ot=st.getMetaDataSymbol();function Ft(e,t){return jt(e,t)}function jt(e,t,n){let r;const i={};for(let s=0;s<e.length;s++){const o=e[s],a=Mt(o);let c="";if(c=void 0===n?a:n+"."+a,a===t.textNodeName)void 0===r?r=o[a]:r+=""+o[a];else{if(void 0===a)continue;if(o[a]){let e=jt(o[a],t,c);const n=Ut(e,t);void 0!==o[Ot]&&(e[Ot]=o[Ot]),o[":@"]?_t(e,o[":@"],c,t):1!==Object.keys(e).length||void 0===e[t.textNodeName]||t.alwaysCreateTextNode?0===Object.keys(e).length&&(t.alwaysCreateTextNode?e[t.textNodeName]="":e=""):e=e[t.textNodeName],void 0!==i[a]&&i.hasOwnProperty(a)?(Array.isArray(i[a])||(i[a]=[i[a]]),i[a].push(e)):t.isArray(a,c,n)?i[a]=[e]:i[a]=e}}}return"string"==typeof r?r.length>0&&(i[t.textNodeName]=r):void 0!==r&&(i[t.textNodeName]=r),i}function Mt(e){const t=Object.keys(e);for(let e=0;e<t.length;e++){const n=t[e];if(":@"!==n)return n}}function _t(e,t,n,r){if(t){const i=Object.keys(t),s=i.length;for(let o=0;o<s;o++){const s=i[o];r.isArray(s,n+"."+s,!0,!0)?e[s]=[t[s]]:e[s]=t[s]}}}function Ut(e,t){const{textNodeName:n}=t,r=Object.keys(e).length;return 0===r||!(1!==r||!e[n]&&"boolean"!=typeof e[n]&&0!==e[n])}const Lt={allowBooleanAttributes:!1,unpairedTags:[]};function Wt(e){return" "===e||"\t"===e||"\n"===e||"\r"===e}function zt(e,t){const n=t;for(;t<e.length;t++)if("?"!=e[t]&&" "!=e[t]);else{const r=e.substr(n,t-n);if(t>5&&"xml"===r)return Xt("InvalidXml","XML declaration allowed only at the start of the document.",Jt(e,t));if("?"==e[t]&&">"==e[t+1]){t++;break}}return t}function Vt(e,t){if(e.length>t+5&&"-"===e[t+1]&&"-"===e[t+2]){for(t+=3;t<e.length;t++)if("-"===e[t]&&"-"===e[t+1]&&">"===e[t+2]){t+=2;break}}else if(e.length>t+8&&"D"===e[t+1]&&"O"===e[t+2]&&"C"===e[t+3]&&"T"===e[t+4]&&"Y"===e[t+5]&&"P"===e[t+6]&&"E"===e[t+7]){let n=1;for(t+=8;t<e.length;t++)if("<"===e[t])n++;else if(">"===e[t]&&(n--,0===n))break}else if(e.length>t+9&&"["===e[t+1]&&"C"===e[t+2]&&"D"===e[t+3]&&"A"===e[t+4]&&"T"===e[t+5]&&"A"===e[t+6]&&"["===e[t+7])for(t+=8;t<e.length;t++)if("]"===e[t]&&"]"===e[t+1]&&">"===e[t+2]){t+=2;break}return t}const qt='"',Yt="'";function Bt(e,t){let n="",r="",i=!1;for(;t<e.length;t++){if(e[t]===qt||e[t]===Yt)""===r?r=e[t]:r!==e[t]||(r="");else if(">"===e[t]&&""===r){i=!0;break}n+=e[t]}return""===r&&{value:n,index:t,tagClosed:i}}const Gt=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function Kt(e,t){const n=nt(e,Gt),r={};for(let e=0;e<n.length;e++){if(0===n[e][1].length)return Xt("InvalidAttr","Attribute '"+n[e][2]+"' has no space in starting.",Zt(n[e]));if(void 0!==n[e][3]&&void 0===n[e][4])return Xt("InvalidAttr","Attribute '"+n[e][2]+"' is without value.",Zt(n[e]));if(void 0===n[e][3]&&!t.allowBooleanAttributes)return Xt("InvalidAttr","boolean attribute '"+n[e][2]+"' is not allowed.",Zt(n[e]));const i=n[e][2];if(!Ht(i))return Xt("InvalidAttr","Attribute '"+i+"' is an invalid name.",Zt(n[e]));if(r.hasOwnProperty(i))return Xt("InvalidAttr","Attribute '"+i+"' is repeated.",Zt(n[e]));r[i]=1}return!0}function Qt(e,t){if(";"===e[++t])return-1;if("#"===e[t])return function(e,t){let n=/\d/;for("x"===e[t]&&(t++,n=/[\da-fA-F]/);t<e.length;t++){if(";"===e[t])return t;if(!e[t].match(n))break}return-1}(e,++t);let n=0;for(;t<e.length;t++,n++)if(!(e[t].match(/\w/)&&n<20)){if(";"===e[t])break;return-1}return t}function Xt(e,t,n){return{err:{code:e,msg:t,line:n.line||n,col:n.col}}}function Ht(e){return rt(e)}function Jt(e,t){const n=e.substring(0,t).split(/\r?\n/);return{line:n.length,col:n[n.length-1].length+1}}function Zt(e){return e.startIndex+e[1].length}const en=new class{constructor(e){this.externalEntities={},this.options=function(e){return Object.assign({},Ze,e)}(e)}parse(e,t){if("string"==typeof e);else{if(!e.toString)throw new Error("XML data is accepted in String or Bytes[] form.");e=e.toString()}if(t){!0===t&&(t={});const n=function(e,t){t=Object.assign({},Lt,t);const n=[];let r=!1,i=!1;"\ufeff"===e[0]&&(e=e.substr(1));for(let s=0;s<e.length;s++)if("<"===e[s]&&"?"===e[s+1]){if(s+=2,s=zt(e,s),s.err)return s}else{if("<"!==e[s]){if(Wt(e[s]))continue;return Xt("InvalidChar","char '"+e[s]+"' is not expected.",Jt(e,s))}{let o=s;if(s++,"!"===e[s]){s=Vt(e,s);continue}{let a=!1;"/"===e[s]&&(a=!0,s++);let c="";for(;s<e.length&&">"!==e[s]&&" "!==e[s]&&"\t"!==e[s]&&"\n"!==e[s]&&"\r"!==e[s];s++)c+=e[s];if(c=c.trim(),"/"===c[c.length-1]&&(c=c.substring(0,c.length-1),s--),!rt(c)){let t;return t=0===c.trim().length?"Invalid space after '<'.":"Tag '"+c+"' is an invalid name.",Xt("InvalidTag",t,Jt(e,s))}const u=Bt(e,s);if(!1===u)return Xt("InvalidAttr","Attributes for '"+c+"' have open quote.",Jt(e,s));let l=u.value;if(s=u.index,"/"===l[l.length-1]){const n=s-l.length;l=l.substring(0,l.length-1);const i=Kt(l,t);if(!0!==i)return Xt(i.err.code,i.err.msg,Jt(e,n+i.err.line));r=!0}else if(a){if(!u.tagClosed)return Xt("InvalidTag","Closing tag '"+c+"' doesn't have proper closing.",Jt(e,s));if(l.trim().length>0)return Xt("InvalidTag","Closing tag '"+c+"' can't have attributes or invalid starting.",Jt(e,o));if(0===n.length)return Xt("InvalidTag","Closing tag '"+c+"' has not been opened.",Jt(e,o));{const t=n.pop();if(c!==t.tagName){let n=Jt(e,t.tagStartPos);return Xt("InvalidTag","Expected closing tag '"+t.tagName+"' (opened in line "+n.line+", col "+n.col+") instead of closing tag '"+c+"'.",Jt(e,o))}0==n.length&&(i=!0)}}else{const a=Kt(l,t);if(!0!==a)return Xt(a.err.code,a.err.msg,Jt(e,s-l.length+a.err.line));if(!0===i)return Xt("InvalidXml","Multiple possible root nodes found.",Jt(e,s));-1!==t.unpairedTags.indexOf(c)||n.push({tagName:c,tagStartPos:o}),r=!0}for(s++;s<e.length;s++)if("<"===e[s]){if("!"===e[s+1]){s++,s=Vt(e,s);continue}if("?"!==e[s+1])break;if(s=zt(e,++s),s.err)return s}else if("&"===e[s]){const t=Qt(e,s);if(-1==t)return Xt("InvalidChar","char '&' is not expected.",Jt(e,s));s=t}else if(!0===i&&!Wt(e[s]))return Xt("InvalidXml","Extra text at the end",Jt(e,s));"<"===e[s]&&s--}}}return r?1==n.length?Xt("InvalidTag","Unclosed tag '"+n[0].tagName+"'.",Jt(e,n[0].tagStartPos)):!(n.length>0)||Xt("InvalidXml","Invalid '"+JSON.stringify(n.map((e=>e.tagName)),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):Xt("InvalidXml","Start tag expected.",1)}(e,t);if(!0!==n)throw Error(`${n.err.msg}:${n.err.line}:${n.err.col}`)}const n=new vt(this.options);n.addExternalEntities(this.externalEntities);const r=n.parseXml(e);return this.options.preserveOrder||void 0===r?r:Ft(r,this.options)}addEntity(e,t){if(-1!==t.indexOf("&"))throw new Error("Entity value can't have '&'");if(-1!==e.indexOf("&")||-1!==e.indexOf(";"))throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if("&"===t)throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=t}static getMetaDataSymbol(){return st.getMetaDataSymbol()}}({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(e,t)=>""===t.trim()&&t.includes("\n")?"":void 0});en.addEntity("#xD","\r"),en.addEntity("#10","\n");var tn=n(1384);const nn=e=>{const t="#text";for(const n in e)e.hasOwnProperty(n)&&void 0!==e[n][t]?e[n]=e[n][t]:"object"==typeof e[n]&&null!==e[n]&&(e[n]=nn(e[n]));return e};var rn=n(72),sn=n(68);class on extends sn.B{settings;stringDeserializer;constructor(e){super(),this.settings=e,this.stringDeserializer=new tn.k(e)}setSerdeContext(e){this.serdeContext=e,this.stringDeserializer.setSerdeContext(e)}read(e,t,n){const r=He.l.of(e),i=r.getMemberSchemas();if(r.isStructSchema()&&r.isMemberSchema()&&!!Object.values(i).find((e=>!!e.getMemberTraits().eventPayload))){const e={},n=Object.keys(i)[0];return i[n].isBlobSchema()?e[n]=t:e[n]=this.read(i[n],t),e}const s=(this.serdeContext?.utf8Encoder??rn.P)(t),o=this.parseXml(s);return this.readSchema(e,n?o[n]:o)}readSchema(e,t){const n=He.l.of(e);if(n.isUnitSchema())return;const r=n.getMergedTraits();if(n.isListSchema()&&!Array.isArray(t))return this.readSchema(n,[t]);if(null==t)return t;if("object"==typeof t){const e=!!r.sparse,i=!!r.xmlFlattened;if(n.isListSchema()){const r=n.getValueSchema(),s=[],o=r.getMergedTraits().xmlName??"member",a=i?t:(t[0]??t)[o],c=Array.isArray(a)?a:[a];for(const t of c)(null!=t||e)&&s.push(this.readSchema(r,t));return s}const s={};if(n.isMapSchema()){const r=n.getKeySchema(),o=n.getValueSchema();let a;a=i?Array.isArray(t)?t:[t]:Array.isArray(t.entry)?t.entry:[t.entry];const c=r.getMergedTraits().xmlName??"key",u=o.getMergedTraits().xmlName??"value";for(const t of a){const n=t[c],r=t[u];(null!=r||e)&&(s[n]=this.readSchema(o,r))}return s}if(n.isStructSchema()){for(const[e,r]of n.structIterator()){const n=r.getMergedTraits(),i=n.httpPayload?n.xmlName??r.getName():r.getMemberTraits().xmlName??e;null!=t[i]&&(s[e]=this.readSchema(r,t[i]))}return s}if(n.isDocumentSchema())return t;throw new Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${n.getName(!0)}`)}return n.isListSchema()?[]:n.isMapSchema()||n.isStructSchema()?{}:this.stringDeserializer.read(n,t)}parseXml(e){if(e.length){let n;try{t=e,n=en.parse(t,!0)}catch(t){throw t&&"object"==typeof t&&Object.defineProperty(t,"$responseBodyText",{value:e}),t}const r="#text",i=Object.keys(n)[0],s=n[i];return s[r]&&(s[i]=s[r],delete s[r]),nn(s)}var t;return{}}}var an=n(77),cn=n(1382),un=n(79),ln=n(69),dn=n(78),fn=n(60);class hn extends sn.B{settings;buffer;constructor(e){super(),this.settings=e}write(e,t,n=""){void 0===this.buffer&&(this.buffer="");const r=He.l.of(e);if(n&&!n.endsWith(".")&&(n+="."),r.isBlobSchema())("string"==typeof t||t instanceof Uint8Array)&&(this.writeKey(n),this.writeValue((this.serdeContext?.base64Encoder??fn.n)(t)));else if(r.isBooleanSchema()||r.isNumericSchema()||r.isStringSchema())null!=t?(this.writeKey(n),this.writeValue(String(t))):r.isIdempotencyToken()&&(this.writeKey(n),this.writeValue((0,un.v4)()));else if(r.isBigIntegerSchema())null!=t&&(this.writeKey(n),this.writeValue(String(t)));else if(r.isBigDecimalSchema())null!=t&&(this.writeKey(n),this.writeValue(t instanceof ln.D?t.string:String(t)));else if(r.isTimestampSchema()){if(t instanceof Date){this.writeKey(n);switch((0,an.V)(r,this.settings)){case 5:this.writeValue(t.toISOString().replace(".000Z","Z"));break;case 6:this.writeValue((0,dn.JV)(t));break;case 7:this.writeValue(String(t.getTime()/1e3))}}}else{if(r.isDocumentSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unsupported document type ${r.getName(!0)}`);if(r.isListSchema()){if(Array.isArray(t))if(0===t.length)this.settings.serializeEmptyLists&&(this.writeKey(n),this.writeValue(""));else{const e=r.getValueSchema(),i=this.settings.flattenLists||r.getMergedTraits().xmlFlattened;let s=1;for(const r of t){if(null==r)continue;const t=this.getKey("member",e.getMergedTraits().xmlName),o=i?`${n}${s}`:`${n}${t}.${s}`;this.write(e,r,o),++s}}}else if(r.isMapSchema()){if(t&&"object"==typeof t){const e=r.getKeySchema(),i=r.getValueSchema(),s=r.getMergedTraits().xmlFlattened;let o=1;for(const[r,a]of Object.entries(t)){if(null==a)continue;const t=this.getKey("key",e.getMergedTraits().xmlName),c=s?`${n}${o}.${t}`:`${n}entry.${o}.${t}`,u=this.getKey("value",i.getMergedTraits().xmlName),l=s?`${n}${o}.${u}`:`${n}entry.${o}.${u}`;this.write(e,r,c),this.write(i,a,l),++o}}}else if(r.isStructSchema()){if(t&&"object"==typeof t)for(const[e,i]of r.structIterator()){if(null==t[e]&&!i.isIdempotencyToken())continue;const r=`${n}${this.getKey(e,i.getMergedTraits().xmlName)}`;this.write(i,t[e],r)}}else if(!r.isUnitSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${r.getName(!0)}`)}}flush(){if(void 0===this.buffer)throw new Error("@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.");const e=this.buffer;return delete this.buffer,e}getKey(e,t){const n=t??e;return this.settings.capitalizeKeys?n[0].toUpperCase()+n.slice(1):n}writeKey(e){e.endsWith(".")&&(e=e.slice(0,e.length-1)),this.buffer+=`&${(0,cn.$)(e)}=`}writeValue(e){this.buffer+=(0,cn.$)(e)}}class pn extends Ke.M{options;serializer;deserializer;mixin=new Je.U;constructor(e){super({defaultNamespace:e.defaultNamespace}),this.options=e;const t={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:e.xmlNamespace,serviceNamespace:e.defaultNamespace,serializeEmptyLists:!0};this.serializer=new hn(t),this.deserializer=new on(t)}getShapeId(){return"aws.protocols#awsQuery"}setSerdeContext(e){this.serializer.setSerdeContext(e),this.deserializer.setSerdeContext(e)}getPayloadCodec(){throw new Error("AWSQuery protocol has no payload codec.")}async serializeRequest(e,t,n){const r=await super.serializeRequest(e,t,n);r.path.endsWith("/")||(r.path+="/"),Object.assign(r.headers,{"content-type":"application/x-www-form-urlencoded"}),"unit"!==(0,Xe.L)(e.input)&&r.body||(r.body="");const i=e.name.split("#")[1]??e.name;return r.body=`Action=${i}&Version=${this.options.version}`+r.body,r.body.endsWith("&")&&(r.body=r.body.slice(-1)),r}async deserializeResponse(e,t,n){const r=this.deserializer,i=He.l.of(e.output),s={};if(n.statusCode>=300){const i=await(0,Qe.P)(n.body,t);i.byteLength>0&&Object.assign(s,await r.read(15,i)),await this.handleError(e,t,n,s,this.deserializeMetadata(n))}for(const e in n.headers){const t=n.headers[e];delete n.headers[e],n.headers[e.toLowerCase()]=t}const o=e.name.split("#")[1]??e.name,a=i.isStructSchema()&&this.useNestedResult()?o+"Result":void 0,c=await(0,Qe.P)(n.body,t);c.byteLength>0&&Object.assign(s,await r.read(i,c,a));return{$metadata:this.deserializeMetadata(n),...s}}useNestedResult(){return!0}async handleError(e,t,n,r,i){const s=this.loadQueryErrorCode(n,r)??"Unknown",o=this.loadQueryError(r),a=this.loadQueryErrorMessage(r);o.message=a,o.Error={Type:o.Type,Code:o.Code,Message:a};const{errorSchema:c,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(s,this.options.defaultNamespace,n,o,i,((e,t)=>{try{return e.getSchema(t)}catch(n){return e.find((e=>He.l.of(e).getMergedTraits().awsQueryError?.[0]===t))}})),d=He.l.of(c),f=new(l.O.for(c[1]).getErrorCtor(c)??Error)(a),h={Error:o.Error};for(const[e,t]of d.structIterator()){const n=t.getMergedTraits().xmlName??e,i=o[n]??r[n];h[e]=this.deserializer.readSchema(t,i)}throw this.mixin.decorateServiceException(Object.assign(f,u,{$fault:d.getMergedTraits().error,message:a},h),r)}loadQueryErrorCode(e,t){const n=(t.Errors?.[0]?.Error??t.Errors?.Error??t.Error)?.Code;return void 0!==n?n:404==e.statusCode?"NotFound":void 0}loadQueryError(e){return e.Errors?.[0]?.Error??e.Errors?.Error??e.Error}loadQueryErrorMessage(e){const t=this.loadQueryError(e);return t?.message??t?.Message??e.message??e.Message??"Unknown"}getDefaultContentType(){return"application/x-www-form-urlencoded"}}var mn=n(63),gn=n(52),wn=n(59),yn=n(47),vn=n(53),bn=n(57),En=n(58),xn=n(56);const Sn="required",In="type",An="fn",Pn="argv",Tn="ref",$n=!1,Nn=!0,Rn="booleanEquals",Dn="stringEquals",Cn="sigv4",kn="us-east-1",On="endpoint",Fn="https://sts.{Region}.{PartitionResult#dnsSuffix}",jn="tree",Mn="error",_n="getAttr",Un={[Sn]:!1,[In]:"string"},Ln={[Sn]:!0,default:!1,[In]:"boolean"},Wn={[Tn]:"Endpoint"},zn={[An]:"isSet",[Pn]:[{[Tn]:"Region"}]},Vn={[Tn]:"Region"},qn={[An]:"aws.partition",[Pn]:[Vn],assign:"PartitionResult"},Yn={[Tn]:"UseFIPS"},Bn={[Tn]:"UseDualStack"},Gn={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:Cn,signingName:"sts",signingRegion:kn}]},headers:{}},Kn={},Qn={conditions:[{[An]:Dn,[Pn]:[Vn,"aws-global"]}],[On]:Gn,[In]:On},Xn={[An]:Rn,[Pn]:[Yn,!0]},Hn={[An]:Rn,[Pn]:[Bn,!0]},Jn={[An]:_n,[Pn]:[{[Tn]:"PartitionResult"},"supportsFIPS"]},Zn={[Tn]:"PartitionResult"},er={[An]:Rn,[Pn]:[!0,{[An]:_n,[Pn]:[Zn,"supportsDualStack"]}]},tr=[{[An]:"isSet",[Pn]:[Wn]}],nr=[Xn],rr=[Hn],ir={version:"1.0",parameters:{Region:Un,UseDualStack:Ln,UseFIPS:Ln,Endpoint:Un,UseGlobalEndpoint:Ln},rules:[{conditions:[{[An]:Rn,[Pn]:[{[Tn]:"UseGlobalEndpoint"},Nn]},{[An]:"not",[Pn]:tr},zn,qn,{[An]:Rn,[Pn]:[Yn,$n]},{[An]:Rn,[Pn]:[Bn,$n]}],rules:[{conditions:[{[An]:Dn,[Pn]:[Vn,"ap-northeast-1"]}],endpoint:Gn,[In]:On},{conditions:[{[An]:Dn,[Pn]:[Vn,"ap-south-1"]}],endpoint:Gn,[In]:On},{conditions:[{[An]:Dn,[Pn]:[Vn,"ap-southeast-1"]}],endpoint:Gn,[In]:On},{conditions:[{[An]:Dn,[Pn]:[Vn,"ap-southeast-2"]}],endpoint:Gn,[In]:On},Qn,{conditions:[{[An]:Dn,[Pn]:[Vn,"ca-central-1"]}],endpoint:Gn,[In]:On},{conditions:[{[An]:Dn,[Pn]:[Vn,"eu-central-1"]}],endpoint:Gn,[In]:On},{conditions:[{[An]:Dn,[Pn]:[Vn,"eu-north-1"]}],endpoint:Gn,[In]:On},{conditions:[{[An]:Dn,[Pn]:[Vn,"eu-west-1"]}],endpoint:Gn,[In]:On},{conditions:[{[An]:Dn,[Pn]:[Vn,"eu-west-2"]}],endpoint:Gn,[In]:On},{conditions:[{[An]:Dn,[Pn]:[Vn,"eu-west-3"]}],endpoint:Gn,[In]:On},{conditions:[{[An]:Dn,[Pn]:[Vn,"sa-east-1"]}],endpoint:Gn,[In]:On},{conditions:[{[An]:Dn,[Pn]:[Vn,kn]}],endpoint:Gn,[In]:On},{conditions:[{[An]:Dn,[Pn]:[Vn,"us-east-2"]}],endpoint:Gn,[In]:On},{conditions:[{[An]:Dn,[Pn]:[Vn,"us-west-1"]}],endpoint:Gn,[In]:On},{conditions:[{[An]:Dn,[Pn]:[Vn,"us-west-2"]}],endpoint:Gn,[In]:On},{endpoint:{url:Fn,properties:{authSchemes:[{name:Cn,signingName:"sts",signingRegion:"{Region}"}]},headers:Kn},[In]:On}],[In]:jn},{conditions:tr,rules:[{conditions:nr,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[In]:Mn},{conditions:rr,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[In]:Mn},{endpoint:{url:Wn,properties:Kn,headers:Kn},[In]:On}],[In]:jn},{conditions:[zn],rules:[{conditions:[qn],rules:[{conditions:[Xn,Hn],rules:[{conditions:[{[An]:Rn,[Pn]:[Nn,Jn]},er],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Kn,headers:Kn},[In]:On}],[In]:jn},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[In]:Mn}],[In]:jn},{conditions:nr,rules:[{conditions:[{[An]:Rn,[Pn]:[Jn,Nn]}],rules:[{conditions:[{[An]:Dn,[Pn]:[{[An]:_n,[Pn]:[Zn,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:Kn,headers:Kn},[In]:On},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Kn,headers:Kn},[In]:On}],[In]:jn},{error:"FIPS is enabled but this partition does not support FIPS",[In]:Mn}],[In]:jn},{conditions:rr,rules:[{conditions:[er],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Kn,headers:Kn},[In]:On}],[In]:jn},{error:"DualStack is enabled but this partition does not support DualStack",[In]:Mn}],[In]:jn},Qn,{endpoint:{url:Fn,properties:Kn,headers:Kn},[In]:On}],[In]:jn}],[In]:jn},{error:"Invalid Configuration: Missing Region",[In]:Mn}]},sr=new bn.k({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),or=(e,t={})=>sr.get(e,(()=>(0,En.s)(ir,{endpointParams:e,logger:t.logger})));xn.m.aws=vn.UF;var ar=n(99),cr=n(84),ur=n(83);const lr=e=>{(0,ur.I)(process.version);const t=(0,cr.I)(e),n=()=>t().then(ar.l),r=(e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??wn.E,base64Encoder:e?.base64Encoder??fn.n,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??or,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??Ce,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new Me.f2},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new ze.m}],logger:e?.logger??new mn.N,protocol:e?.protocol??new pn({defaultNamespace:"com.amazonaws.sts",xmlNamespace:"https://sts.amazonaws.com/doc/2011-06-15/",version:"2011-06-15"}),serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??gn.D,utf8Decoder:e?.utf8Decoder??yn.a,utf8Encoder:e?.utf8Encoder??rn.P}))(e);(0,Fe.I)(process.version);const o={profile:e?.profile,logger:r.logger};return{...r,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,s.Z)(je.$,o),bodyLengthChecker:e?.bodyLengthChecker??Be.n,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,_e.pf)({serviceId:r.serviceId,clientVersion:Oe.rE}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4")||(async t=>await e.credentialDefaultProvider(t?.o||{})()),signer:new Me.f2},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new ze.m}],maxAttempts:e?.maxAttempts??(0,s.Z)(Ae.qs,e),region:e?.region??(0,s.Z)(i.GG,{...i.zH,...o}),requestHandler:qe.$.create(e?.requestHandler??n),retryMode:e?.retryMode??(0,s.Z)({...Ae.kN,default:async()=>(await n()).retryMode||Ge.L0},e),sha256:e?.sha256??Ve.V.bind(null,"sha256"),streamCollector:e?.streamCollector??Ye.k,useDualstackEndpoint:e?.useDualstackEndpoint??(0,s.Z)(Le.e$,o),useFipsEndpoint:e?.useFipsEndpoint??(0,s.Z)(We.Ko,o),userAgentAppId:e?.userAgentAppId??(0,s.Z)(Ue.hV,o)}};var dr=n(118),fr=n(120),hr=n(119);class pr extends Te.K{config;constructor(...[e]){const t=lr(e||{});super(t),this.initConfig=t;const n=(r=t,Object.assign(r,{useDualstackEndpoint:r.useDualstackEndpoint??!1,useFipsEndpoint:r.useFipsEndpoint??!1,useGlobalEndpoint:r.useGlobalEndpoint??!1,defaultSigningName:"sts"}));var r;const i=(0,ge.D)(n),s=(0,Ae.$z)(i),o=(0,ye.T)(s),a=(0,he.OV)(o),c=(0,Ie.C)(a),u=((e,t)=>{const n=Object.assign((0,dr.R)(e),(0,hr.xA)(e),(0,fr.e)(e),(e=>{const t=e.httpAuthSchemes;let n=e.httpAuthSchemeProvider,r=e.credentials;return{setHttpAuthScheme(e){const n=t.findIndex((t=>t.schemeId===e.schemeId));-1===n?t.push(e):t.splice(n,1,e)},httpAuthSchemes:()=>t,setHttpAuthSchemeProvider(e){n=e},httpAuthSchemeProvider:()=>n,setCredentials(e){r=e},credentials:()=>r}})(e));return t.forEach((e=>e.configure(n))),Object.assign(e,(0,dr.$)(n),(0,hr.uv)(n),(0,fr.j)(n),{httpAuthSchemes:(r=n).httpAuthSchemes(),httpAuthSchemeProvider:r.httpAuthSchemeProvider(),credentials:r.credentials()});var r})(ke(c),e?.extensions||[]);this.config=u,this.middlewareStack.use((0,xe.wq)(this.config)),this.middlewareStack.use((0,we.sM)(this.config)),this.middlewareStack.use((0,Pe.ey)(this.config)),this.middlewareStack.use((0,Se.vK)(this.config)),this.middlewareStack.use((0,he.TC)(this.config)),this.middlewareStack.use((0,pe.Y7)(this.config)),this.middlewareStack.use((0,me.n)(this.config)),this.middlewareStack.use((0,ve.w)(this.config,{httpAuthSchemeParametersProvider:De,identityProviderConfigProvider:async e=>new be.h({"aws.auth#sigv4":e.credentials})})),this.middlewareStack.use((0,Ee.l)(this.config))}destroy(){super.destroy()}}const mr=(e,t)=>t?class extends e{constructor(e){super(e);for(const e of t)this.middlewareStack.use(e)}}:e,gr=(e={},t)=>le(e,mr(pr,t)),wr=(e={},t)=>de(e,mr(pr,t))},1382:(e,t,n)=>{function r(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}n.d(t,{$:()=>r})},1384:(e,t,n)=>{n.d(t,{k:()=>x});var r=n(73),i=n(1383);const s="(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?:[ne|u?r]?s?day)?",o="(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)",a="(\\d?\\d):(\\d{2}):(\\d{2})(?:\\.(\\d+))?",c="(\\d?\\d)",u="(\\d{4})",l=new RegExp(/^(\d{4})-(\d\d)-(\d\d)[tT](\d\d):(\d\d):(\d\d)(\.(\d+))?(([-+]\d\d:\d\d)|[zZ])$/),d=new RegExp(`^${s}, ${c} ${o} ${u} ${a} GMT$`),f=new RegExp(`^${s}, ${c}-${o}-(\\d\\d) ${a} GMT$`),h=new RegExp(`^${s} ${o} ( [1-9]|\\d\\d) ${a} ${u}$`),p=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function m(e,t,n){const r=Number(e);if(r<t||r>n)throw new Error(`Value ${r} out of range [${t}, ${n}]`)}var g=n(76),w=n(69),y=n(59),v=n(72),b=n(82),E=n(77);class x extends b.f{settings;constructor(e){super(),this.settings=e}read(e,t){const n=r.l.of(e);if(n.isListSchema())return(0,i.G)(t).map((e=>this.read(n.getValueSchema(),e)));if(n.isBlobSchema())return(this.serdeContext?.base64Decoder??y.E)(t);if(n.isTimestampSchema()){switch((0,E.V)(n,this.settings)){case 5:return(e=>{if(null==e)return;if("string"!=typeof e)throw new TypeError("RFC3339 timestamps must be strings");const t=l.exec(e);if(!t)throw new TypeError(`Invalid RFC3339 timestamp format ${e}`);const[,n,r,i,s,o,a,,c,u]=t;m(r,1,12),m(i,1,31),m(s,0,23),m(o,0,59),m(a,0,60);const d=new Date(Date.UTC(Number(n),Number(r)-1,Number(i),Number(s),Number(o),Number(a),Number(c)?Math.round(1e3*parseFloat(`0.${c}`)):0));if(d.setUTCFullYear(Number(n)),"Z"!=u.toUpperCase()){const[,e,t,n]=/([+-])(\d\d):(\d\d)/.exec(u)||[void 0,"+",0,0],r="-"===e?1:-1;d.setTime(d.getTime()+r*(60*Number(t)*60*1e3+60*Number(n)*1e3))}return d})(t);case 6:return(e=>{if(null==e)return;if("string"!=typeof e)throw new TypeError("RFC7231 timestamps must be strings.");let t,n,r,i,s,o,a,c;if((c=d.exec(e))?[,t,n,r,i,s,o,a]=c:(c=f.exec(e))?([,t,n,r,i,s,o,a]=c,r=(Number(r)+1900).toString()):(c=h.exec(e))&&([,n,t,i,s,o,a,r]=c),r&&o){const e=Date.UTC(Number(r),p.indexOf(n),Number(t),Number(i),Number(s),Number(o),a?Math.round(1e3*parseFloat(`0.${a}`)):0);m(t,1,31),m(i,0,23),m(s,0,59),m(o,0,60);const c=new Date(e);return c.setUTCFullYear(Number(r)),c}throw new TypeError(`Invalid RFC7231 date-time value ${e}.`)})(t);case 7:return(e=>{if(null==e)return;let t=NaN;if("number"==typeof e)t=e;else if("string"==typeof e){if(!/^-?\d*\.?\d+$/.test(e))throw new TypeError("parseEpochTimestamp - numeric string invalid.");t=Number.parseFloat(e)}else"object"==typeof e&&1===e.tag&&(t=e.value);if(isNaN(t)||Math.abs(t)===1/0)throw new TypeError("Epoch timestamps must be valid finite numbers.");return new Date(Math.round(1e3*t))})(t);default:return new Date(t)}}if(n.isStringSchema()){const e=n.getMergedTraits().mediaType;let r=t;if(e){n.getMergedTraits().httpHeader&&(r=this.base64ToUtf8(r));return("application/json"===e||e.endsWith("+json"))&&(r=g.A.from(r)),r}}return n.isNumericSchema()?Number(t):n.isBigIntegerSchema()?BigInt(t):n.isBigDecimalSchema()?new w.D(t,"bigDecimal"):n.isBooleanSchema()?"true"===String(t).toLowerCase():t}base64ToUtf8(e){return(this.serdeContext?.utf8Encoder??v.P)((this.serdeContext?.base64Decoder??y.E)(e))}}},1383:(e,t,n)=>{n.d(t,{G:()=>r});const r=e=>{const t=e.length,n=[];let r,i=!1,s=0;for(let o=0;o<t;++o){const t=e[o];switch(t){case'"':"\\"!==r&&(i=!i);break;case",":i||(n.push(e.slice(s,o)),s=o+1)}r=t}return n.push(e.slice(s)),n.map((e=>{const t=(e=e.trim()).length;return t<2?e:('"'===e[0]&&'"'===e[t-1]&&(e=e.slice(1,t-1)),e.replace(/\\"/g,'"'))}))}},1380:(e,t,n)=>{n.d(t,{m:()=>r});class r{async sign(e,t,n){return e}}},1386:e=>{e.exports={rE:"3.933.0"}}};
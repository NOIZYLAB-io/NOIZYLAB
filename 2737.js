"use strict";var ju=Object.defineProperty;var Vu=(z,C,w)=>C in z?ju(z,C,{enumerable:!0,configurable:!0,writable:!0,value:w}):z[C]=w;var l=(z,C,w)=>(Vu(z,typeof C!="symbol"?C+"":C,w),w);exports.id=2737,exports.ids=[2737],exports.modules={872737:(z,C,w)=>{w.d(C,{CreateOAuth2TokenCommand:()=>zu,SigninClient:()=>Zc});var A=w(631263);function M(e){return e}const b=e=>t=>async r=>{if(!A.K.isInstance(r.request))return t(r);const{request:n}=r,{handlerProtocol:s=""}=e.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let i=n.hostname;n.port!=null&&(i+=`:${n.port}`),n.headers.host=i}return t(r)},_={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},N=e=>({applyToStack:t=>{t.add(b(e),_)}}),T=()=>(e,t)=>async r=>{try{const n=await e(r),{clientName:s,commandName:i,logger:o,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:c,overrideOutputFilterSensitiveLog:u}=a,f=c??t.inputFilterSensitiveLog,d=u??t.outputFilterSensitiveLog,{$metadata:h,...p}=n.output;return o?.info?.({clientName:s,commandName:i,input:f(r.input),output:d(p),metadata:h}),n}catch(n){const{clientName:s,commandName:i,logger:o,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:c}=a,u=c??t.inputFilterSensitiveLog;throw o?.error?.({clientName:s,commandName:i,input:u(r.input),error:n,metadata:n.$metadata}),n}},O={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},G=e=>({applyToStack:t=>{t.add(T(),O)}}),Q={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},K={REQUEST_ID:Symbol.for("_AWS_LAMBDA_REQUEST_ID"),X_RAY_TRACE_ID:Symbol.for("_AWS_LAMBDA_X_RAY_TRACE_ID"),TENANT_ID:Symbol.for("_AWS_LAMBDA_TENANT_ID")},Be=["true","1"].includes(process.env?.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA??"");Be||(globalThis.awslambda=globalThis.awslambda||{});class He{isProtectedKey(t){return Object.values(K).includes(t)}getRequestId(){return this.get(K.REQUEST_ID)??"-"}getXRayTraceId(){return this.get(K.X_RAY_TRACE_ID)}getTenantId(){return this.get(K.TENANT_ID)}}l(He,"PROTECTED_KEYS",K);class bt extends He{constructor(){super(...arguments);l(this,"currentContext")}getContext(){return this.currentContext}hasContext(){return this.currentContext!==void 0}get(r){return this.currentContext?.[r]}set(r,n){if(this.isProtectedKey(r))throw new Error(`Cannot modify protected Lambda context field: ${String(r)}`);this.currentContext=this.currentContext||{},this.currentContext[r]=n}run(r,n){this.currentContext=r;try{return n()}finally{this.currentContext=void 0}}}class R extends He{constructor(){super(...arguments);l(this,"als")}static async create(){const r=new R,n=await Promise.resolve().then(w.t.bind(w,16698,23));return r.als=new n.AsyncLocalStorage,r}getContext(){return this.als.getStore()}hasContext(){return this.als.getStore()!==void 0}get(r){return this.als.getStore()?.[r]}set(r,n){if(this.isProtectedKey(r))throw new Error(`Cannot modify protected Lambda context field: ${String(r)}`);const s=this.als.getStore();if(!s)throw new Error("No context available");s[r]=n}run(r,n){return this.als.run(r,n)}}var P;(function(e){let t=null;async function r(){return t||(t=(async()=>{const s="AWS_LAMBDA_MAX_CONCURRENCY"in process.env?await R.create():new bt;return!Be&&globalThis.awslambda?.InvokeStore?globalThis.awslambda.InvokeStore:(!Be&&globalThis.awslambda&&(globalThis.awslambda.InvokeStore=s),s)})()),t}e.getInstanceAsync=r,e._testing=process.env.AWS_LAMBDA_BENCHMARK_MODE==="1"?{reset:()=>{t=null,globalThis.awslambda?.InvokeStore&&delete globalThis.awslambda.InvokeStore,globalThis.awslambda={}}}:void 0})(P||(P={}));const k="X-Amzn-Trace-Id",j="AWS_LAMBDA_FUNCTION_NAME",Ee="_X_AMZN_TRACE_ID",Te=()=>e=>async t=>{const{request:r}=t;if(!A.K.isInstance(r))return e(t);const n=Object.keys(r.headers??{}).find(f=>f.toLowerCase()===k.toLowerCase())??k;if(r.headers.hasOwnProperty(n))return e(t);const s=process.env[j],i=process.env[Ee],c=(await P.getInstanceAsync())?.getXRayTraceId()??i,u=f=>typeof f=="string"&&f.length>0;return u(s)&&u(c)&&(r.headers[k]=c),e({...t,request:r})},be=e=>({applyToStack:t=>{t.add(Te(),Q)}}),ae=e=>{if(typeof e=="function")return e;const t=Promise.resolve(e);return()=>t},qe=void 0;function Xe(e){return e===void 0?!0:typeof e=="string"&&e.length<=50}function Qe(e){const t=ae(e.userAgentAppId??qe),{customUserAgent:r}=e;return Object.assign(e,{customUserAgent:typeof r=="string"?[[r]]:r,userAgentAppId:async()=>{const n=await t();if(!Xe(n)){const s=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?console:e.logger;typeof n!="string"?s?.warn("userAgentAppId must be a string or undefined."):n.length>50&&s?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return n}})}const Ye={},ms=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),Ze=(e,t=!1)=>{if(!t)return ms.test(e);const r=e.split(".");for(const n of r)if(!Ze(n))return!1;return!0},gs=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),lr=e=>gs.test(e)||e.startsWith("[")&&e.endsWith("]"),fr=(e,t=!1)=>{if(t){for(const r of e.split("."))if(!fr(r))return!1;return!0}return!(!Ze(e)||e.length<3||e.length>63||e!==e.toLowerCase()||lr(e))},hr=":",ys="/",Ss=e=>{const t=e.split(hr);if(t.length<6)return null;const[r,n,s,i,o,...a]=t;if(r!=="arn"||n===""||s===""||a.join(hr)==="")return null;const c=a.map(u=>u.split(ys)).flat();return{partition:n,service:s,region:i,accountId:o,resourceId:c}};let pr=JSON.parse('{"partitions":[{"id":"aws","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","implicitGlobalRegion":"us-east-1","name":"aws","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^(us|eu|ap|sa|ca|me|af|il|mx)\\\\-\\\\w+\\\\-\\\\d+$","regions":{"af-south-1":{"description":"Africa (Cape Town)"},"ap-east-1":{"description":"Asia Pacific (Hong Kong)"},"ap-east-2":{"description":"Asia Pacific (Taipei)"},"ap-northeast-1":{"description":"Asia Pacific (Tokyo)"},"ap-northeast-2":{"description":"Asia Pacific (Seoul)"},"ap-northeast-3":{"description":"Asia Pacific (Osaka)"},"ap-south-1":{"description":"Asia Pacific (Mumbai)"},"ap-south-2":{"description":"Asia Pacific (Hyderabad)"},"ap-southeast-1":{"description":"Asia Pacific (Singapore)"},"ap-southeast-2":{"description":"Asia Pacific (Sydney)"},"ap-southeast-3":{"description":"Asia Pacific (Jakarta)"},"ap-southeast-4":{"description":"Asia Pacific (Melbourne)"},"ap-southeast-5":{"description":"Asia Pacific (Malaysia)"},"ap-southeast-6":{"description":"Asia Pacific (New Zealand)"},"ap-southeast-7":{"description":"Asia Pacific (Thailand)"},"aws-global":{"description":"aws global region"},"ca-central-1":{"description":"Canada (Central)"},"ca-west-1":{"description":"Canada West (Calgary)"},"eu-central-1":{"description":"Europe (Frankfurt)"},"eu-central-2":{"description":"Europe (Zurich)"},"eu-north-1":{"description":"Europe (Stockholm)"},"eu-south-1":{"description":"Europe (Milan)"},"eu-south-2":{"description":"Europe (Spain)"},"eu-west-1":{"description":"Europe (Ireland)"},"eu-west-2":{"description":"Europe (London)"},"eu-west-3":{"description":"Europe (Paris)"},"il-central-1":{"description":"Israel (Tel Aviv)"},"me-central-1":{"description":"Middle East (UAE)"},"me-south-1":{"description":"Middle East (Bahrain)"},"mx-central-1":{"description":"Mexico (Central)"},"sa-east-1":{"description":"South America (Sao Paulo)"},"us-east-1":{"description":"US East (N. Virginia)"},"us-east-2":{"description":"US East (Ohio)"},"us-west-1":{"description":"US West (N. California)"},"us-west-2":{"description":"US West (Oregon)"}}},{"id":"aws-cn","outputs":{"dnsSuffix":"amazonaws.com.cn","dualStackDnsSuffix":"api.amazonwebservices.com.cn","implicitGlobalRegion":"cn-northwest-1","name":"aws-cn","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^cn\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-cn-global":{"description":"aws-cn global region"},"cn-north-1":{"description":"China (Beijing)"},"cn-northwest-1":{"description":"China (Ningxia)"}}},{"id":"aws-eusc","outputs":{"dnsSuffix":"amazonaws.eu","dualStackDnsSuffix":"api.amazonwebservices.eu","implicitGlobalRegion":"eusc-de-east-1","name":"aws-eusc","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^eusc\\\\-(de)\\\\-\\\\w+\\\\-\\\\d+$","regions":{"eusc-de-east-1":{"description":"EU (Germany)"}}},{"id":"aws-iso","outputs":{"dnsSuffix":"c2s.ic.gov","dualStackDnsSuffix":"api.aws.ic.gov","implicitGlobalRegion":"us-iso-east-1","name":"aws-iso","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^us\\\\-iso\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-global":{"description":"aws-iso global region"},"us-iso-east-1":{"description":"US ISO East"},"us-iso-west-1":{"description":"US ISO WEST"}}},{"id":"aws-iso-b","outputs":{"dnsSuffix":"sc2s.sgov.gov","dualStackDnsSuffix":"api.aws.scloud","implicitGlobalRegion":"us-isob-east-1","name":"aws-iso-b","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^us\\\\-isob\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-b-global":{"description":"aws-iso-b global region"},"us-isob-east-1":{"description":"US ISOB East (Ohio)"},"us-isob-west-1":{"description":"US ISOB West"}}},{"id":"aws-iso-e","outputs":{"dnsSuffix":"cloud.adc-e.uk","dualStackDnsSuffix":"api.cloud-aws.adc-e.uk","implicitGlobalRegion":"eu-isoe-west-1","name":"aws-iso-e","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^eu\\\\-isoe\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-e-global":{"description":"aws-iso-e global region"},"eu-isoe-west-1":{"description":"EU ISOE West"}}},{"id":"aws-iso-f","outputs":{"dnsSuffix":"csp.hci.ic.gov","dualStackDnsSuffix":"api.aws.hci.ic.gov","implicitGlobalRegion":"us-isof-south-1","name":"aws-iso-f","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^us\\\\-isof\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-f-global":{"description":"aws-iso-f global region"},"us-isof-east-1":{"description":"US ISOF EAST"},"us-isof-south-1":{"description":"US ISOF SOUTH"}}},{"id":"aws-us-gov","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","implicitGlobalRegion":"us-gov-west-1","name":"aws-us-gov","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^us\\\\-gov\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-us-gov-global":{"description":"aws-us-gov global region"},"us-gov-east-1":{"description":"AWS GovCloud (US-East)"},"us-gov-west-1":{"description":"AWS GovCloud (US-West)"}}}],"version":"1.1"}'),mr="";const ws=e=>{const{partitions:t}=pr;for(const n of t){const{regions:s,outputs:i}=n;for(const[o,a]of Object.entries(s))if(o===e)return{...i,...a}}for(const n of t){const{regionRegex:s,outputs:i}=n;if(new RegExp(s).test(e))return{...i}}const r=t.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},Es=(e,t="")=>{pr=e,mr=t},Gu=()=>{Es(partitionsInfo,"")},Ts=()=>mr,gr={isVirtualHostableS3Bucket:fr,parseArn:Ss,partition:ws};Ye.aws=gr;const Ku=e=>{if(typeof e.endpointProvider!="function")throw new Error("@aws-sdk/util-endpoint - endpointProvider and endpoint missing in config for this client.");const{endpoint:t}=e;return t===void 0&&(e.endpoint=async()=>bs(e.endpointProvider({Region:typeof e.region=="function"?await e.region():e.region,UseDualStack:typeof e.useDualstackEndpoint=="function"?await e.useDualstackEndpoint():e.useDualstackEndpoint,UseFIPS:typeof e.useFipsEndpoint=="function"?await e.useFipsEndpoint():e.useFipsEndpoint,Endpoint:void 0},{logger:e.logger}))),e},bs=e=>parseUrl(e.url);function Y(e,t,r){e.__aws_sdk_context?e.__aws_sdk_context.features||(e.__aws_sdk_context.features={}):e.__aws_sdk_context={features:{}},e.__aws_sdk_context.features[t]=r}const As=/\d{12}\.ddb/;async function Rs(e,t,r){if(r.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&Y(e,"PROTOCOL_RPC_V2_CBOR","M"),typeof t.retryStrategy=="function"){const i=await t.retryStrategy();typeof i.acquireInitialRetryToken=="function"?i.constructor?.name?.includes("Adaptive")?Y(e,"RETRY_MODE_ADAPTIVE","F"):Y(e,"RETRY_MODE_STANDARD","E"):Y(e,"RETRY_MODE_LEGACY","D")}if(typeof t.accountIdEndpointMode=="function"){const i=e.endpointV2;switch(String(i?.url?.hostname).match(As)&&Y(e,"ACCOUNT_ID_ENDPOINT","O"),await t.accountIdEndpointMode?.()){case"disabled":Y(e,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":Y(e,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":Y(e,"ACCOUNT_ID_MODE_REQUIRED","R");break}}const s=e.__smithy_context?.selectedHttpAuthScheme?.identity;if(s?.$source){const i=s;i.accountId&&Y(e,"RESOLVED_ACCOUNT_ID","T");for(const[o,a]of Object.entries(i.$source??{}))Y(e,o,a)}}const yr="user-agent",At="x-amz-user-agent",Sr=" ",Rt="/",Cs=/[^!$%&'*+\-.^_`|~\w]/g,_s=/[^!$%&'*+\-.^_`|~\w#]/g,wr="-",Is=1024;function Ns(e){let t="";for(const r in e){const n=e[r];if(t.length+n.length+1<=Is){t.length?t+=","+n:t+=n;continue}break}return t}const Os=e=>(t,r)=>async n=>{const{request:s}=n;if(!A.K.isInstance(s))return t(n);const{headers:i}=s,o=r?.userAgent?.map(et)||[],a=(await e.defaultUserAgentProvider()).map(et);await Rs(r,e,n);const c=r;a.push(`m/${Ns(Object.assign({},r.__smithy_context?.features,c.__aws_sdk_context?.features))}`);const u=e?.customUserAgent?.map(et)||[],f=await e.userAgentAppId();f&&a.push(et(["app",`${f}`]));const d=Ts(),h=(d?[d]:[]).concat([...a,...o,...u]).join(Sr),p=[...a.filter(m=>m.startsWith("aws-sdk-")),...u].join(Sr);return e.runtime!=="browser"?(p&&(i[At]=i[At]?`${i[yr]} ${p}`:p),i[yr]=h):i[At]=h,t({...n,request:s})},et=e=>{const t=e[0].split(Rt).map(o=>o.replace(Cs,wr)).join(Rt),r=e[1]?.replace(_s,wr),n=t.indexOf(Rt),s=t.substring(0,n);let i=t.substring(n+1);return s==="api"&&(i=i.toLowerCase()),[s,i,r].filter(o=>o&&o.length>0).reduce((o,a,c)=>{switch(c){case 0:return a;case 1:return`${o}/${a}`;default:return`${o}#${a}`}},"")},Ds={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},Ps=e=>({applyToStack:t=>{t.add(Os(e),Ds)}}),Er=new Set,Ms=(e,t=Ze)=>{if(!Er.has(e)&&!t(e))if(e==="*")console.warn('@smithy/config-resolver WARN - Please use the caller region instead of "*". See "sigv4a" in https://github.com/aws/aws-sdk-js-v3/blob/main/supplemental-docs/CLIENTS.md.');else throw new Error(`Region not accepted: region="${e}" is not a valid hostname component.`);else Er.add(e)},Tr=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips")),vs=e=>Tr(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,xs=e=>{const{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return Object.assign(e,{region:async()=>{const n=typeof t=="function"?await t():t,s=vs(n);return Ms(s),s},useFipsEndpoint:async()=>{const n=typeof t=="string"?t:await t();return Tr(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}})},Ct="__smithy_context",Ae=e=>e[Ct]||(e[Ct]={}),ks=(e,t)=>{if(!t||t.length===0)return e;const r=[];for(const n of t)for(const s of e)s.schemeId.split("#")[1]===n&&r.push(s);for(const n of e)r.find(({schemeId:s})=>s===n.schemeId)||r.push(n);return r};function $s(e){const t=new Map;for(const r of e)t.set(r.schemeId,r);return t}const Us=(e,t)=>(r,n)=>async s=>{const i=e.httpAuthSchemeProvider(await t.httpAuthSchemeParametersProvider(e,n,s.input)),o=e.authSchemePreference?await e.authSchemePreference():[],a=ks(i,o),c=$s(e.httpAuthSchemes),u=Ae(n),f=[];for(const d of a){const h=c.get(d.schemeId);if(!h){f.push(`HttpAuthScheme \`${d.schemeId}\` was not enabled for this service.`);continue}const p=h.identityProvider(await t.identityProviderConfigProvider(e));if(!p){f.push(`HttpAuthScheme \`${d.schemeId}\` did not have an IdentityProvider configured.`);continue}const{identityProperties:m={},signingProperties:y={}}=d.propertiesExtractor?.(e,n)||{};d.identityProperties=Object.assign(d.identityProperties||{},m),d.signingProperties=Object.assign(d.signingProperties||{},y),u.selectedHttpAuthScheme={httpAuthOption:d,identity:await p(d.identityProperties),signer:h.signer};break}if(!u.selectedHttpAuthScheme)throw new Error(f.join(`
`));return r(s)},Fs={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},Ls=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(Us(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),Fs)}});class Bs{constructor(t){l(this,"authSchemes",new Map);for(const[r,n]of Object.entries(t))n!==void 0&&this.authSchemes.set(r,n)}getIdentityProvider(t){return this.authSchemes.get(t)}}const Hs=e=>t=>{throw t},zs=(e,t)=>{},js=e=>(t,r)=>async n=>{if(!A.K.isInstance(n.request))return t(n);const i=Ae(r).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:o={}},identity:a,signer:c}=i,u=await t({...n,request:await c.sign(n.request,a,o)}).catch((c.errorHandler||Hs)(o));return(c.successHandler||zs)(u.response,o),u},Vs={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},Ws=e=>({applyToStack:t=>{t.addRelativeTo(js(e),Vs)}});class ze{constructor(t){l(this,"statusCode");l(this,"reason");l(this,"headers");l(this,"body");this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;const r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}}const br=(e,t,r,n,s)=>({name:t,namespace:e,traits:r,input:n,output:s}),Gs=e=>(t,r)=>async n=>{const{response:s}=await t(n),{operationSchema:i}=Ae(r),[,o,a,c,u,f]=i??[];try{const d=await e.protocol.deserializeResponse(br(o,a,c,u,f),{...e,...r},s);return{response:s,output:d}}catch(d){if(Object.defineProperty(d,"$response",{value:s,enumerable:!1,writable:!1,configurable:!1}),!("$metadata"in d)){const h="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{d.message+=`
  `+h}catch{!r.logger||r.logger?.constructor?.name==="NoOpLogger"?console.warn(h):r.logger?.warn?.(h)}typeof d.$responseBodyText<"u"&&d.$response&&(d.$response.body=d.$responseBodyText);try{if(ze.isInstance(s)){const{headers:p={}}=s,m=Object.entries(p);d.$metadata={httpStatusCode:s.statusCode,requestId:_t(/^x-[\w-]+-request-?id$/,m),extendedRequestId:_t(/^x-[\w-]+-id-2$/,m),cfId:_t(/^x-[\w-]+-cf-id$/,m)}}}catch{}}throw d}},_t=(e,t)=>(t.find(([r])=>r.match(e))||[void 0,void 0])[1],Ks=e=>(t,r)=>async n=>{const{operationSchema:s}=Ae(r),[,i,o,a,c,u]=s??[],f=r.endpointV2?.url&&e.urlParser?async()=>e.urlParser(r.endpointV2.url):e.endpoint,d=await e.protocol.serializeRequest(br(i,o,a,c,u),n.input,{...e,...r,endpoint:f});return t({...n,request:d})},Js={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},qs={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Xs(e){return{applyToStack:t=>{t.add(Ks(e),qs),t.add(Gs(e),Js),e.protocol.setSerdeContext(e)}}}const Ar="content-length";function Qs(e){return t=>async r=>{const n=r.request;if(A.K.isInstance(n)){const{body:s,headers:i}=n;if(s&&Object.keys(i).map(o=>o.toLowerCase()).indexOf(Ar)===-1)try{const o=e(s);n.headers={...n.headers,[Ar]:String(o)}}catch{}}return t({...r,request:n})}}const Ys={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},Zs=e=>({applyToStack:t=>{t.add(Qs(e.bodyLengthChecker),Ys)}}),re=e=>{if(typeof e=="function")return e;const t=Promise.resolve(e);return()=>t};var Z=w(535262),Rr=w(646847);const Cr="AWS_ENDPOINT_URL",_r="endpoint_url",ei=e=>({environmentVariableSelector:t=>{const r=e.split(" ").map(i=>i.toUpperCase()),n=t[[Cr,...r].join("_")];if(n)return n;const s=t[Cr];if(s)return s},configFileSelector:(t,r)=>{if(r&&t.services){const s=r[["services",t.services].join(Rr.Q)];if(s){const i=e.split(" ").map(a=>a.toLowerCase()),o=s[[i.join("_"),_r].join(Rr.Q)];if(o)return o}}const n=t[_r];if(n)return n},default:void 0}),Ir=async e=>(0,Z.Z)(ei(e??""))();var It=w(586666);const Nr=e=>typeof e=="object"?"url"in e?(0,It.D)(e.url):e:(0,It.D)(e),ti=e=>{const t=e.tls??!0,{endpoint:r,useDualstackEndpoint:n,useFipsEndpoint:s}=e,i=r!=null?async()=>Nr(await re(r)()):void 0,a=Object.assign(e,{endpoint:i,tls:t,isCustomEndpoint:!!r,useDualstackEndpoint:re(n??!1),useFipsEndpoint:re(s??!1)});let c;return a.serviceConfiguredEndpoint=async()=>(e.serviceId&&!c&&(c=Ir(e.serviceId)),c),a};var Re;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(Re||(Re={}));const tt=3,Or=Re.STANDARD,Ju=null,ri=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],ni=["TimeoutError","RequestTimeout","RequestTimeoutException"],si=[500,502,503,504],ii=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],oi=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],ai=e=>e?.$retryable!==void 0,qu=e=>CLOCK_SKEW_ERROR_CODES.includes(e.name),ci=e=>e.$metadata?.clockSkewCorrected,ui=e=>{const t=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return e&&e instanceof TypeError?t.has(e.message):!1},Dr=e=>e.$metadata?.httpStatusCode===429||ri.includes(e.name)||e.$retryable?.throttling==!0,Nt=(e,t=0)=>ai(e)||ci(e)||ni.includes(e.name)||ii.includes(e?.code||"")||oi.includes(e?.code||"")||si.includes(e.$metadata?.httpStatusCode||0)||ui(e)||e.cause!==void 0&&t<=10&&Nt(e.cause,t+1),di=e=>{if(e.$metadata?.httpStatusCode!==void 0){const t=e.$metadata.httpStatusCode;return 500<=t&&t<=599&&!Nt(e)}return!1},dr=class{constructor(t){l(this,"beta");l(this,"minCapacity");l(this,"minFillRate");l(this,"scaleConstant");l(this,"smooth");l(this,"currentCapacity",0);l(this,"enabled",!1);l(this,"lastMaxRate",0);l(this,"measuredTxRate",0);l(this,"requestCount",0);l(this,"fillRate");l(this,"lastThrottleTime");l(this,"lastTimestamp",0);l(this,"lastTxRateBucket");l(this,"maxCapacity");l(this,"timeWindow",0);this.beta=t?.beta??.7,this.minCapacity=t?.minCapacity??1,this.minFillRate=t?.minFillRate??.5,this.scaleConstant=t?.scaleConstant??.4,this.smooth=t?.smooth??.8;const r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(!!this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){const r=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>dr.setTimeoutFn(n,r))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){const t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}const r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),Dr(t)){const s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());const n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){const n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}};let rt=dr;l(rt,"setTimeoutFn",setTimeout);const Ot=100,Pr=20*1e3,li=500,Mr=500,fi=5,hi=10,pi=1,mi="amz-sdk-invocation-id",gi="amz-sdk-request",yi=()=>{let e=Ot;return{computeNextBackoffDelay:n=>Math.floor(Math.min(Pr,Math.random()*2**n*e)),setDelayBase:n=>{e=n}}},vr=({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(Pr,e),getRetryCost:()=>r});class xr{constructor(t){l(this,"maxAttempts");l(this,"mode",Re.STANDARD);l(this,"capacity",Mr);l(this,"retryBackoffStrategy",yi());l(this,"maxAttemptsProvider");this.maxAttempts=t,this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return vr({retryDelay:Ot,retryCount:0})}async refreshRetryTokenForRetry(t,r){const n=await this.getMaxAttempts();if(this.shouldRetry(t,r,n)){const s=r.errorType;this.retryBackoffStrategy.setDelayBase(s==="THROTTLING"?li:Ot);const i=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),o=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,i):i,a=this.getCapacityCost(s);return this.capacity-=a,vr({retryDelay:o,retryCount:t.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(Mr,this.capacity+(t.getRetryCost()??pi))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${tt}`),tt}}shouldRetry(t,r,n){return t.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(t){return t==="TRANSIENT"?hi:fi}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}}class Si{constructor(t,r){l(this,"maxAttemptsProvider");l(this,"rateLimiter");l(this,"standardRetryStrategy");l(this,"mode",Re.ADAPTIVE);this.maxAttemptsProvider=t;const{rateLimiter:n}=r??{};this.rateLimiter=n??new rt,this.standardRetryStrategy=new xr(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(t,r)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}}const kr="AWS_MAX_ATTEMPTS",$r="max_attempts",wi={environmentVariableSelector:e=>{const t=e[kr];if(!t)return;const r=parseInt(t);if(Number.isNaN(r))throw new Error(`Environment variable ${kr} mast be a number, got "${t}"`);return r},configFileSelector:e=>{const t=e[$r];if(!t)return;const r=parseInt(t);if(Number.isNaN(r))throw new Error(`Shared config file entry ${$r} mast be a number, got "${t}"`);return r},default:tt},Ei=e=>{const{retryStrategy:t,retryMode:r,maxAttempts:n}=e,s=re(n??tt);return Object.assign(e,{maxAttempts:s,retryStrategy:async()=>t||(await re(r)()===Re.ADAPTIVE?new Si(s):new xr(s))})},Ti="AWS_RETRY_MODE",bi="retry_mode",Ai={environmentVariableSelector:e=>e[Ti],configFileSelector:e=>e[bi],default:Or};class Ur{trace(){}debug(){}info(){}warn(){}error(){}}var Dt=w(191576),Ce=w(302203);const Ri=e=>e?.body instanceof Ce.Readable||typeof ReadableStream<"u"&&e?.body instanceof ReadableStream,Ci=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`),_i=e=>(t,r)=>async n=>{let s=await e.retryStrategy();const i=await e.maxAttempts();if(Ii(s)){s=s;let o=await s.acquireInitialRetryToken(r.partition_id),a=new Error,c=0,u=0;const{request:f}=n,d=A.K.isInstance(f);for(d&&(f.headers[mi]=(0,Dt.v4)());;)try{d&&(f.headers[gi]=`attempt=${c+1}; max=${i}`);const{response:h,output:p}=await t(n);return s.recordSuccess(o),p.$metadata.attempts=c+1,p.$metadata.totalRetryDelay=u,{response:h,output:p}}catch(h){const p=Ni(h);if(a=Ci(h),d&&Ri(f))throw(r.logger instanceof Ur?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{o=await s.refreshRetryTokenForRetry(o,p)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=u,a}c=o.getRetryCount();const m=o.getRetryDelay();u+=m,await new Promise(y=>setTimeout(y,m))}}else return s=s,s?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(t,n)},Ii=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",Ni=e=>{const t={error:e,errorType:Oi(e)},r=Mi(e.$response);return r&&(t.retryAfterHint=r),t},Oi=e=>Dr(e)?"THROTTLING":Nt(e)?"TRANSIENT":di(e)?"SERVER_ERROR":"CLIENT_ERROR",Di={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Pi=e=>({applyToStack:t=>{t.add(_i(e),Di)}}),Mi=e=>{if(!ze.isInstance(e))return;const t=Object.keys(e.headers).find(i=>i.toLowerCase()==="retry-after");if(!t)return;const r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)},he=(e,t)=>{const r=[];if(e&&r.push(e),t)for(const n of t)r.push(n);return r},ce=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,nt=()=>{let e=[],t=[],r=!1;const n=new Set,s=d=>d.sort((h,p)=>Fr[p.step]-Fr[h.step]||Lr[p.priority||"normal"]-Lr[h.priority||"normal"]),i=d=>{let h=!1;const p=m=>{const y=he(m.name,m.aliases);if(y.includes(d)){h=!0;for(const g of y)n.delete(g);return!1}return!0};return e=e.filter(p),t=t.filter(p),h},o=d=>{let h=!1;const p=m=>{if(m.middleware===d){h=!0;for(const y of he(m.name,m.aliases))n.delete(y);return!1}return!0};return e=e.filter(p),t=t.filter(p),h},a=d=>(e.forEach(h=>{d.add(h.middleware,{...h})}),t.forEach(h=>{d.addRelativeTo(h.middleware,{...h})}),d.identifyOnResolve?.(f.identifyOnResolve()),d),c=d=>{const h=[];return d.before.forEach(p=>{p.before.length===0&&p.after.length===0?h.push(p):h.push(...c(p))}),h.push(d),d.after.reverse().forEach(p=>{p.before.length===0&&p.after.length===0?h.push(p):h.push(...c(p))}),h},u=(d=!1)=>{const h=[],p=[],m={};return e.forEach(g=>{const S={...g,before:[],after:[]};for(const E of he(S.name,S.aliases))m[E]=S;h.push(S)}),t.forEach(g=>{const S={...g,before:[],after:[]};for(const E of he(S.name,S.aliases))m[E]=S;p.push(S)}),p.forEach(g=>{if(g.toMiddleware){const S=m[g.toMiddleware];if(S===void 0){if(d)return;throw new Error(`${g.toMiddleware} is not found when adding ${ce(g.name,g.aliases)} middleware ${g.relation} ${g.toMiddleware}`)}g.relation==="after"&&S.after.push(g),g.relation==="before"&&S.before.push(g)}}),s(h).map(c).reduce((g,S)=>(g.push(...S),g),[])},f={add:(d,h={})=>{const{name:p,override:m,aliases:y}=h,g={step:"initialize",priority:"normal",middleware:d,...h},S=he(p,y);if(S.length>0){if(S.some(E=>n.has(E))){if(!m)throw new Error(`Duplicate middleware name '${ce(p,y)}'`);for(const E of S){const v=e.findIndex(H=>H.name===E||H.aliases?.some(Le=>Le===E));if(v===-1)continue;const x=e[v];if(x.step!==g.step||g.priority!==x.priority)throw new Error(`"${ce(x.name,x.aliases)}" middleware with ${x.priority} priority in ${x.step} step cannot be overridden by "${ce(p,y)}" middleware with ${g.priority} priority in ${g.step} step.`);e.splice(v,1)}}for(const E of S)n.add(E)}e.push(g)},addRelativeTo:(d,h)=>{const{name:p,override:m,aliases:y}=h,g={middleware:d,...h},S=he(p,y);if(S.length>0){if(S.some(E=>n.has(E))){if(!m)throw new Error(`Duplicate middleware name '${ce(p,y)}'`);for(const E of S){const v=t.findIndex(H=>H.name===E||H.aliases?.some(Le=>Le===E));if(v===-1)continue;const x=t[v];if(x.toMiddleware!==g.toMiddleware||x.relation!==g.relation)throw new Error(`"${ce(x.name,x.aliases)}" middleware ${x.relation} "${x.toMiddleware}" middleware cannot be overridden by "${ce(p,y)}" middleware ${g.relation} "${g.toMiddleware}" middleware.`);t.splice(v,1)}}for(const E of S)n.add(E)}t.push(g)},clone:()=>a(nt()),use:d=>{d.applyToStack(f)},remove:d=>typeof d=="string"?i(d):o(d),removeByTag:d=>{let h=!1;const p=m=>{const{tags:y,name:g,aliases:S}=m;if(y&&y.includes(d)){const E=he(g,S);for(const v of E)n.delete(v);return h=!0,!1}return!0};return e=e.filter(p),t=t.filter(p),h},concat:d=>{const h=a(nt());return h.use(d),h.identifyOnResolve(r||h.identifyOnResolve()||(d.identifyOnResolve?.()??!1)),h},applyToStack:a,identify:()=>u(!0).map(d=>{const h=d.step??d.relation+" "+d.toMiddleware;return ce(d.name,d.aliases)+" - "+h}),identifyOnResolve(d){return typeof d=="boolean"&&(r=d),r},resolve:(d,h)=>{for(const p of u().map(m=>m.middleware).reverse())d=p(d,h);return r&&console.log(f.identify()),d}};return f},Fr={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Lr={high:3,normal:2,low:1};class vi{constructor(t){l(this,"config");l(this,"middlewareStack",nt());l(this,"initConfig");l(this,"handlers");this.config=t}send(t,r,n){const s=typeof r!="function"?r:void 0,i=typeof r=="function"?r:n,o=s===void 0&&this.config.cacheMiddleware===!0;let a;if(o){this.handlers||(this.handlers=new WeakMap);const c=this.handlers;c.has(t.constructor)?a=c.get(t.constructor):(a=t.resolveMiddleware(this.middlewareStack,this.config,s),c.set(t.constructor,a))}else delete this.handlers,a=t.resolveMiddleware(this.middlewareStack,this.config,s);if(i)a(t).then(c=>i(null,c.output),c=>i(c)).catch(()=>{});else return a(t).then(c=>c.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}}var xi=w(404317);const ki=(e=>function(r){return Br(r)&&r.expiration.getTime()-Date.now()<e})(3e5),Br=e=>e.expiration!==void 0,$i=(e,t,r)=>{if(e===void 0)return;const n=typeof e!="function"?async()=>Promise.resolve(e):e;let s,i,o,a=!1;const c=async u=>{i||(i=n(u));try{s=await i,o=!0,a=!1}finally{i=void 0}return s};return t===void 0?async u=>((!o||u?.forceRefresh)&&(s=await c(u)),s):async u=>((!o||u?.forceRefresh)&&(s=await c(u)),a?s:r(s)?(t(s)&&await c(u),s):(a=!0,s))},Hr={},Pt={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),Hr[e]=t,Pt[t]=e}function Ui(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){const n=e.slice(r,r+2).toLowerCase();if(n in Pt)t[r/2]=Pt[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return t}function ue(e){let t="";for(let r=0;r<e.byteLength;r++)t+=Hr[e[r]];return t}var pe=w(425294);const _e=e=>typeof e=="string"?(0,pe.a)(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),Fi="X-Amz-Algorithm",Li="X-Amz-Credential",zr="X-Amz-Date",Bi="X-Amz-SignedHeaders",Hi="X-Amz-Expires",jr="X-Amz-Signature",Vr="X-Amz-Security-Token",Yu="X-Amz-Region-Set",Wr="authorization",Gr=zr.toLowerCase(),zi=[Wr,Gr,"date"],ji=jr.toLowerCase(),Mt="x-amz-content-sha256",Vi=Vr.toLowerCase(),ed="host",Wi={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Gi=/^proxy-/,Ki=/^sec-/,td=null,vt="AWS4-HMAC-SHA256",rd="AWS4-ECDSA-P256-SHA256",Ji="AWS4-HMAC-SHA256-PAYLOAD",qi="UNSIGNED-PAYLOAD",Xi=50,Kr="aws4_request",Qi=60*60*24*7,Ie={},st=[],xt=(e,t,r)=>`${e}/${t}/${r}/${Kr}`,Yi=async(e,t,r,n,s)=>{const i=await Jr(e,t.secretAccessKey,t.accessKeyId),o=`${r}:${n}:${s}:${ue(i)}:${t.sessionToken}`;if(o in Ie)return Ie[o];for(st.push(o);st.length>Xi;)delete Ie[st.shift()];let a=`AWS4${t.secretAccessKey}`;for(const c of[r,n,s,Kr])a=await Jr(e,a,c);return Ie[o]=a},nd=()=>{st.length=0,Object.keys(Ie).forEach(e=>{delete Ie[e]})},Jr=(e,t,r)=>{const n=new e(t);return n.update(_e(r)),n.digest()},qr=({headers:e},t,r)=>{const n={};for(const s of Object.keys(e).sort()){if(e[s]==null)continue;const i=s.toLowerCase();(i in Wi||t?.has(i)||Gi.test(i)||Ki.test(i))&&(!r||r&&!r.has(i))||(n[i]=e[s].trim().replace(/\s+/g," "))}return n};var Zi=w(915104);const kt=async({headers:e,body:t},r)=>{for(const n of Object.keys(e))if(n.toLowerCase()===Mt)return e[n];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||(0,Zi.m)(t)){const n=new r;return n.update(_e(t)),ue(await n.digest())}return qi};class eo{format(t){const r=[];for(const i of Object.keys(t)){const o=(0,pe.a)(i);r.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(t[i]))}const n=new Uint8Array(r.reduce((i,o)=>i+o.byteLength,0));let s=0;for(const i of r)n.set(i,s),s+=i.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":const r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":const n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":const s=new Uint8Array(9);return s[0]=5,s.set(t.value.bytes,1),s;case"binary":const i=new DataView(new ArrayBuffer(3+t.value.byteLength));i.setUint8(0,6),i.setUint16(1,t.value.byteLength,!1);const o=new Uint8Array(i.buffer);return o.set(t.value,3),o;case"string":const a=(0,pe.a)(t.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);const u=new Uint8Array(c.buffer);return u.set(a,3),u;case"timestamp":const f=new Uint8Array(9);return f[0]=8,f.set($t.fromNumber(t.value.valueOf()).bytes,1),f;case"uuid":if(!to.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);const d=new Uint8Array(17);return d[0]=9,d.set(Ui(t.value.replace(/\-/g,"")),1),d}}}var Xr;(function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"})(Xr||(Xr={}));const to=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;class $t{constructor(t){l(this,"bytes");if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);const r=new Uint8Array(8);for(let n=7,s=Math.abs(Math.round(t));n>-1&&s>0;n--,s/=256)r[n]=s;return t<0&&Qr(r),new $t(r)}valueOf(){const t=this.bytes.slice(0),r=t[0]&128;return r&&Qr(t),parseInt(ue(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}}function Qr(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}const ro=(e,t)=>{e=e.toLowerCase();for(const r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1},sd=(e,t)=>{e=e.toLowerCase();for(const r of Object.keys(t))if(e===r.toLowerCase())return t[r]},id=(e,t)=>{e=e.toLowerCase();for(const r of Object.keys(t))e===r.toLowerCase()&&delete t[r]},no=(e,t={})=>{const{headers:r,query:n={}}=A.K.clone(e);for(const s of Object.keys(r)){const i=s.toLowerCase();(i.slice(0,6)==="x-amz-"&&!t.unhoistableHeaders?.has(i)||t.hoistableHeaders?.has(i))&&(n[s]=r[s],delete r[s])}return{...e,headers:r,query:n}},Yr=e=>{e=A.K.clone(e);for(const t of Object.keys(e.headers))zi.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e},me=e=>encodeURIComponent(e).replace(/[!'()*]/g,so),so=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`,io=({query:e={}})=>{const t=[],r={};for(const n of Object.keys(e)){if(n.toLowerCase()===ji)continue;const s=me(n);t.push(s);const i=e[n];typeof i=="string"?r[s]=`${s}=${me(i)}`:Array.isArray(i)&&(r[s]=i.slice(0).reduce((o,a)=>o.concat([`${s}=${me(a)}`]),[]).sort().join("&"))}return t.sort().map(n=>r[n]).filter(n=>n).join("&")},oo=e=>ao(e).toISOString().replace(/\.\d{3}Z$/,"Z"),ao=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e;class co{constructor({applyChecksum:t,credentials:r,region:n,service:s,sha256:i,uriEscapePath:o=!0}){l(this,"service");l(this,"regionProvider");l(this,"credentialProvider");l(this,"sha256");l(this,"uriEscapePath");l(this,"applyChecksum");this.service=s,this.sha256=i,this.uriEscapePath=o,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=re(n),this.credentialProvider=re(r)}createCanonicalRequest(t,r,n){const s=Object.keys(r).sort();return`${t.method}
${this.getCanonicalPath(t)}
${io(t)}
${s.map(i=>`${i}:${r[i]}`).join(`
`)}

${s.join(";")}
${n}`}async createStringToSign(t,r,n,s){const i=new this.sha256;i.update(_e(n));const o=await i.digest();return`${s}
${t}
${r}
${ue(o)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){const r=[];for(const i of t.split("/"))i?.length!==0&&i!=="."&&(i===".."?r.pop():r.push(i));const n=`${t?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&t?.endsWith("/")?"/":""}`;return me(n).replace(/%2F/g,"/")}return t}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(t){const r=oo(t).replace(/[\-:]/g,"");return{longDate:r,shortDate:r.slice(0,8)}}getCanonicalHeaderList(t){return Object.keys(t).sort().join(";")}}class Zr extends co{constructor({applyChecksum:r,credentials:n,region:s,service:i,sha256:o,uriEscapePath:a=!0}){super({applyChecksum:r,credentials:n,region:s,service:i,sha256:o,uriEscapePath:a});l(this,"headerFormatter",new eo)}async presign(r,n={}){const{signingDate:s=new Date,expiresIn:i=3600,unsignableHeaders:o,unhoistableHeaders:a,signableHeaders:c,hoistableHeaders:u,signingRegion:f,signingService:d}=n,h=await this.credentialProvider();this.validateResolvedCredentials(h);const p=f??await this.regionProvider(),{longDate:m,shortDate:y}=this.formatDate(s);if(i>Qi)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const g=xt(y,p,d??this.service),S=no(Yr(r),{unhoistableHeaders:a,hoistableHeaders:u});h.sessionToken&&(S.query[Vr]=h.sessionToken),S.query[Fi]=vt,S.query[Li]=`${h.accessKeyId}/${g}`,S.query[zr]=m,S.query[Hi]=i.toString(10);const E=qr(S,o,c);return S.query[Bi]=this.getCanonicalHeaderList(E),S.query[jr]=await this.getSignature(m,g,this.getSigningKey(h,p,y,d),this.createCanonicalRequest(S,E,await kt(r,this.sha256))),S}async sign(r,n){return typeof r=="string"?this.signString(r,n):r.headers&&r.payload?this.signEvent(r,n):r.message?this.signMessage(r,n):this.signRequest(r,n)}async signEvent({headers:r,payload:n},{signingDate:s=new Date,priorSignature:i,signingRegion:o,signingService:a}){const c=o??await this.regionProvider(),{shortDate:u,longDate:f}=this.formatDate(s),d=xt(u,c,a??this.service),h=await kt({headers:{},body:n},this.sha256),p=new this.sha256;p.update(r);const m=ue(await p.digest()),y=[Ji,f,d,i,m,h].join(`
`);return this.signString(y,{signingDate:s,signingRegion:c,signingService:a})}async signMessage(r,{signingDate:n=new Date,signingRegion:s,signingService:i}){return this.signEvent({headers:this.headerFormatter.format(r.message.headers),payload:r.message.body},{signingDate:n,signingRegion:s,signingService:i,priorSignature:r.priorSignature}).then(a=>({message:r.message,signature:a}))}async signString(r,{signingDate:n=new Date,signingRegion:s,signingService:i}={}){const o=await this.credentialProvider();this.validateResolvedCredentials(o);const a=s??await this.regionProvider(),{shortDate:c}=this.formatDate(n),u=new this.sha256(await this.getSigningKey(o,a,c,i));return u.update(_e(r)),ue(await u.digest())}async signRequest(r,{signingDate:n=new Date,signableHeaders:s,unsignableHeaders:i,signingRegion:o,signingService:a}={}){const c=await this.credentialProvider();this.validateResolvedCredentials(c);const u=o??await this.regionProvider(),f=Yr(r),{longDate:d,shortDate:h}=this.formatDate(n),p=xt(h,u,a??this.service);f.headers[Gr]=d,c.sessionToken&&(f.headers[Vi]=c.sessionToken);const m=await kt(f,this.sha256);!ro(Mt,f.headers)&&this.applyChecksum&&(f.headers[Mt]=m);const y=qr(f,i,s),g=await this.getSignature(d,p,this.getSigningKey(c,u,h,a),this.createCanonicalRequest(f,y,m));return f.headers[Wr]=`${vt} Credential=${c.accessKeyId}/${p}, SignedHeaders=${this.getCanonicalHeaderList(y)}, Signature=${g}`,f}async getSignature(r,n,s,i){const o=await this.createStringToSign(r,n,i,vt),a=new this.sha256(await s);return a.update(_e(o)),ue(await a.digest())}getSigningKey(r,n,s,i){return Yi(this.sha256,r,s,n,i||this.service)}}const uo=e=>{let t=e.credentials,r=!!e.credentials,n;Object.defineProperty(e,"credentials",{set(u){u&&u!==t&&u!==n&&(r=!0),t=u;const f=lo(e,{credentials:t,credentialDefaultProvider:e.credentialDefaultProvider}),d=fo(e,f);r&&!d.attributed?(n=async h=>d(h).then(p=>(0,xi.g)(p,"CREDENTIALS_CODE","e")),n.memoized=d.memoized,n.configBound=d.configBound,n.attributed=!0):n=d},get(){return n},enumerable:!0,configurable:!0}),e.credentials=t;const{signingEscapePath:s=!0,systemClockOffset:i=e.systemClockOffset||0,sha256:o}=e;let a;return e.signer?a=ae(e.signer):e.regionInfoProvider?a=()=>ae(e.region)().then(async u=>[await e.regionInfoProvider(u,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},u]).then(([u,f])=>{const{signingRegion:d,signingService:h}=u;e.signingRegion=e.signingRegion||d||f,e.signingName=e.signingName||h||e.serviceId;const p={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:o,uriEscapePath:s},m=e.signerConstructor||Zr;return new m(p)}):a=async u=>{u=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await ae(e.region)(),properties:{}},u);const f=u.signingRegion,d=u.signingName;e.signingRegion=e.signingRegion||f,e.signingName=e.signingName||d||e.serviceId;const h={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:o,uriEscapePath:s},p=e.signerConstructor||Zr;return new p(h)},Object.assign(e,{systemClockOffset:i,signingEscapePath:s,signer:a})},od=null;function lo(e,{credentials:t,credentialDefaultProvider:r}){let n;return t?t?.memoized?n=t:n=$i(t,ki,Br):r?n=ae(r(Object.assign({},e,{parentClientConfig:e}))):n=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},n.memoized=!0,n}function fo(e,t){if(t.configBound)return t;const r=async n=>t({...n,callerClientConfig:e});return r.memoized=t.memoized,r.configBound=!0,r}const ho=async(e,t,r)=>({operation:Ae(t).operation,region:await re(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function po(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"signin",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function mo(e){return{schemeId:"smithy.api#noAuth"}}const go=e=>{const t=[];switch(e.operation){case"CreateOAuth2Token":{t.push(mo(e));break}default:t.push(po(e))}return t},yo=e=>{const t=uo(e);return Object.assign(t,{authSchemePreference:re(e.authSchemePreference??[])})},So=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"signin"}),wo={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},Eo={rE:"3.936.0"},en={warningEmitted:!1},To=e=>{e&&!en.warningEmitted&&parseInt(e.substring(1,e.indexOf(".")))<18&&(en.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js 16.x on January 6, 2025.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/74kJMmI`))},tn=e=>typeof e=="string"&&e.length>0?e.split(",").map(t=>t.trim()):[],bo=e=>`AWS_BEARER_TOKEN_${e.replace(/[\s-]/g,"_").toUpperCase()}`,rn="AWS_AUTH_SCHEME_PREFERENCE",nn="auth_scheme_preference",Ao={environmentVariableSelector:(e,t)=>{if(t?.signingName&&bo(t.signingName)in e)return["httpBearerAuth"];if(rn in e)return tn(e[rn])},configFileSelector:e=>{if(nn in e)return tn(e[nn])},default:[]};var sn=w(370857),Ut=w(400932);const Ro={isCrtAvailable:!1},Co=()=>Ro.isCrtAvailable?["md/crt-avail"]:null,_o=({serviceId:e,clientVersion:t})=>async r=>{const n=[["aws-sdk-js",t],["ua","2.1"],[`os/${(0,sn.platform)()}`,(0,sn.release)()],["lang/js"],["md/nodejs",`${Ut.versions.node}`]],s=Co();s&&n.push(s),e&&n.push([`api/${e}`,t]),Ut.env.AWS_EXECUTION_ENV&&n.push([`exec-env/${Ut.env.AWS_EXECUTION_ENV}`]);const i=await r?.userAgentAppId?.();return i?[...n,[`app/${i}`]]:[...n]},ad=null,Io="AWS_SDK_UA_APP_ID",No="sdk_ua_app_id",Oo="sdk-ua-app-id",Do={environmentVariableSelector:e=>e[Io],configFileSelector:e=>e[No]??e[Oo],default:qe},Po="AWS_REGION",Mo="region",on={environmentVariableSelector:e=>e[Po],configFileSelector:e=>e[Mo],default:()=>{throw new Error("Region is missing")}},vo={preferredFile:"credentials"},it=(e,t,r)=>{if(t in e){if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${r} "${t}". Expected "true" or "false", got ${e[t]}.`)}};var Ne;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(Ne||(Ne={}));const xo="AWS_USE_DUALSTACK_ENDPOINT",ko="use_dualstack_endpoint",cd=!1,$o={environmentVariableSelector:e=>it(e,xo,Ne.ENV),configFileSelector:e=>it(e,ko,Ne.CONFIG),default:!1},Uo="AWS_USE_FIPS_ENDPOINT",Fo="use_fips_endpoint",ud=!1,Lo={environmentVariableSelector:e=>it(e,Uo,Ne.ENV),configFileSelector:e=>it(e,Fo,Ne.CONFIG),default:!1};var Oe=w(195903),Bo=w(320181),an=w(776982);class Ho{constructor(t,r){l(this,"algorithmIdentifier");l(this,"secret");l(this,"hash");this.algorithmIdentifier=t,this.secret=r,this.reset()}update(t,r){this.hash.update(_e(cn(t,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?(0,an.createHmac)(this.algorithmIdentifier,cn(this.secret)):(0,an.createHash)(this.algorithmIdentifier)}}function cn(e,t){return Bo.Buffer.isBuffer(e)?e:typeof e=="string"?(0,Oe.s)(e,t):ArrayBuffer.isView(e)?(0,Oe.Q)(e.buffer,e.byteOffset,e.byteLength):(0,Oe.Q)(e)}function zo(e){const t=[];for(let r of Object.keys(e).sort()){const n=e[r];if(r=me(r),Array.isArray(n))for(let s=0,i=n.length;s<i;s++)t.push(`${r}=${me(n[s])}`);else{let s=r;(n||typeof n=="string")&&(s+=`=${me(n)}`),t.push(s)}}return t.join("&")}var ot=w(958611),at=w(665692);const jo=["ECONNRESET","EPIPE","ETIMEDOUT"],Vo=e=>{const t={};for(const r of Object.keys(e)){const n=e[r];t[r]=Array.isArray(n)?n.join(","):n}return t},L={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e)},un=1e3,Wo=(e,t,r=0)=>{if(!r)return-1;const n=s=>{const i=L.setTimeout(()=>{e.destroy(),t(Object.assign(new Error(`@smithy/node-http-handler - the request socket did not establish a connection with the server within the configured timeout of ${r} ms.`),{name:"TimeoutError"}))},r-s),o=a=>{a?.connecting?a.on("connect",()=>{L.clearTimeout(i)}):L.clearTimeout(i)};e.socket?o(e.socket):e.on("socket",o)};return r<2e3?(n(0),0):L.setTimeout(n.bind(null,un),un)},Go=(e,t,r=0,n,s)=>r?L.setTimeout(()=>{let i=`@smithy/node-http-handler - [${n?"ERROR":"WARN"}] a request has exceeded the configured ${r} ms requestTimeout.`;if(n){const o=Object.assign(new Error(i),{name:"TimeoutError",code:"ETIMEDOUT"});e.destroy(o),t(o)}else i+=" Init client requestHandler with throwOnRequestTimeout=true to turn this into an error.",s?.warn?.(i)},r):-1,Ko=3e3,Jo=(e,{keepAlive:t,keepAliveMsecs:r},n=Ko)=>{if(t!==!0)return-1;const s=()=>{e.socket?e.socket.setKeepAlive(t,r||0):e.on("socket",i=>{i.setKeepAlive(t,r||0)})};return n===0?(s(),0):L.setTimeout(s,n)},dn=3e3,qo=(e,t,r=0)=>{const n=s=>{const i=r-s,o=()=>{e.destroy(),t(Object.assign(new Error(`@smithy/node-http-handler - the request socket timed out after ${r} ms of inactivity (configured by client requestHandler).`),{name:"TimeoutError"}))};e.socket?(e.socket.setTimeout(i,o),e.on("close",()=>e.socket?.removeListener("timeout",o))):e.setTimeout(i,o)};return 0<r&&r<6e3?(n(0),0):L.setTimeout(n.bind(null,r===0?0:dn),dn)},ln=6e3;async function Xo(e,t,r=ln,n=!1){const s=t.headers??{},i=s.Expect||s.expect;let o=-1,a=!0;!n&&i==="100-continue"&&(a=await Promise.race([new Promise(c=>{o=Number(L.setTimeout(()=>c(!0),Math.max(ln,r)))}),new Promise(c=>{e.on("continue",()=>{L.clearTimeout(o),c(!0)}),e.on("response",()=>{L.clearTimeout(o),c(!1)}),e.on("error",()=>{L.clearTimeout(o),c(!1)})})])),a&&Qo(e,t.body)}function Qo(e,t){if(t instanceof Ce.Readable){t.pipe(e);return}if(t){if(Buffer.isBuffer(t)||typeof t=="string"){e.end(t);return}const r=t;if(typeof r=="object"&&r.buffer&&typeof r.byteOffset=="number"&&typeof r.byteLength=="number"){e.end(Buffer.from(r.buffer,r.byteOffset,r.byteLength));return}e.end(Buffer.from(t));return}e.end()}const dd=0;class ct{constructor(t){l(this,"config");l(this,"configProvider");l(this,"socketWarningTimestamp",0);l(this,"externalAgent",!1);l(this,"metadata",{handlerProtocol:"http/1.1"});this.configProvider=new Promise((r,n)=>{typeof t=="function"?t().then(s=>{r(this.resolveDefaultConfig(s))}).catch(n):r(this.resolveDefaultConfig(t))})}static create(t){return typeof t?.handle=="function"?t:new ct(t)}static checkSocketUsage(t,r,n=console){const{sockets:s,requests:i,maxSockets:o}=t;if(typeof o!="number"||o===1/0)return r;const a=15e3;if(Date.now()-a<r)return r;if(s&&i)for(const c in s){const u=s[c]?.length??0,f=i[c]?.length??0;if(u>=o&&f>=2*o)return n?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${u} and ${f} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return r}resolveDefaultConfig(t){const{requestTimeout:r,connectionTimeout:n,socketTimeout:s,socketAcquisitionWarningTimeout:i,httpAgent:o,httpsAgent:a,throwOnRequestTimeout:c}=t||{},u=!0,f=50;return{connectionTimeout:n,requestTimeout:r,socketTimeout:s,socketAcquisitionWarningTimeout:i,throwOnRequestTimeout:c,httpAgent:(()=>o instanceof ot.Agent||typeof o?.destroy=="function"?(this.externalAgent=!0,o):new ot.Agent({keepAlive:u,maxSockets:f,...o}))(),httpsAgent:(()=>a instanceof at.Agent||typeof a?.destroy=="function"?(this.externalAgent=!0,a):new at.Agent({keepAlive:u,maxSockets:f,...a}))(),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(t,{abortSignal:r,requestTimeout:n}={}){return this.config||(this.config=await this.configProvider),new Promise((s,i)=>{const o=this.config;let a;const c=[],u=async I=>{await a,c.forEach(L.clearTimeout),s(I)},f=async I=>{await a,c.forEach(L.clearTimeout),i(I)};if(r?.aborted){const I=new Error("Request aborted");I.name="AbortError",f(I);return}const d=t.protocol==="https:",h=t.headers??{},p=(h.Expect??h.expect)==="100-continue";let m=d?o.httpsAgent:o.httpAgent;p&&!this.externalAgent&&(m=new(d?at.Agent:ot.Agent)({keepAlive:!1,maxSockets:1/0})),c.push(L.setTimeout(()=>{this.socketWarningTimestamp=ct.checkSocketUsage(m,this.socketWarningTimestamp,o.logger)},o.socketAcquisitionWarningTimeout??(o.requestTimeout??2e3)+(o.connectionTimeout??1e3)));const y=zo(t.query||{});let g;if(t.username!=null||t.password!=null){const I=t.username??"",oe=t.password??"";g=`${I}:${oe}`}let S=t.path;y&&(S+=`?${y}`),t.fragment&&(S+=`#${t.fragment}`);let E=t.hostname??"";E[0]==="["&&E.endsWith("]")?E=t.hostname.slice(1,-1):E=t.hostname;const v={headers:t.headers,host:E,method:t.method,path:S,port:t.port,agent:m,auth:g},H=(d?at.request:ot.request)(v,I=>{const oe=new ze({statusCode:I.statusCode||-1,reason:I.statusMessage,headers:Vo(I.headers),body:I});u({response:oe})});if(H.on("error",I=>{jo.includes(I.code)?f(Object.assign(I,{name:"TimeoutError"})):f(I)}),r){const I=()=>{H.destroy();const oe=new Error("Request aborted");oe.name="AbortError",f(oe)};if(typeof r.addEventListener=="function"){const oe=r;oe.addEventListener("abort",I,{once:!0}),H.once("close",()=>oe.removeEventListener("abort",I))}else r.onabort=I}const Le=n??o.requestTimeout;c.push(Wo(H,f,o.connectionTimeout)),c.push(Go(H,f,Le,o.throwOnRequestTimeout,o.logger??console)),c.push(qo(H,f,o.socketTimeout));const Tt=v.agent;typeof Tt=="object"&&"keepAlive"in Tt&&c.push(Jo(H,{keepAlive:Tt.keepAlive,keepAliveMsecs:Tt.keepAliveMsecs})),a=Xo(H,t,Le,this.externalAgent).catch(I=>(c.forEach(L.clearTimeout),i(I)))})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[t]:r}))}httpHandlerConfigs(){return this.config??{}}}class Yo extends Ce.Writable{constructor(){super(...arguments);l(this,"bufferedBytes",[])}_write(r,n,s){this.bufferedBytes.push(r),s()}}const fn=e=>Zo(e)?ea(e):new Promise((t,r)=>{const n=new Yo;e.pipe(n),e.on("error",s=>{n.end(),r(s)}),n.on("error",r),n.on("finish",function(){const s=new Uint8Array(Buffer.concat(this.bufferedBytes));t(s)})}),Zo=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream;async function ea(e){const t=[],r=e.getReader();let n=!1,s=0;for(;!n;){const{done:a,value:c}=await r.read();c&&(t.push(c),s+=c.length),n=a}const i=new Uint8Array(s);let o=0;for(const a of t)i.set(a,o),o+=a.length;return i}var Ft=w(973024);const ta=e=>{if(!e)return 0;if(typeof e=="string")return Buffer.byteLength(e);if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size;if(typeof e.start=="number"&&typeof e.end=="number")return e.end+1-e.start;if(e instanceof Ft.ReadStream){if(e.path!=null)return(0,Ft.lstatSync)(e.path).size;if(typeof e.fd=="number")return(0,Ft.fstatSync)(e.fd).size}throw new Error(`Body Length computation failed for ${e}`)},hn=e=>new Date(Date.now()+e),pn=e=>ze.isInstance(e)?e.headers?.date??e.headers?.Date:void 0,ra=(e,t)=>Math.abs(hn(t).getTime()-e)>=3e5,mn=(e,t)=>{const r=Date.parse(e);return ra(r,t)?r-Date.now():t},je=(e,t)=>{if(!t)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t},na=async e=>{const t=je("context",e.context),r=je("config",e.config),n=t.endpointV2?.properties?.authSchemes?.[0],i=await je("signer",r.signer)(n),o=e?.signingRegion,a=e?.signingRegionSet,c=e?.signingName;return{config:r,signer:i,signingRegion:o,signingRegionSet:a,signingName:c}};class sa{async sign(t,r,n){if(!A.K.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const s=await na(n),{config:i,signer:o}=s;let{signingRegion:a,signingName:c}=s;const u=n.context;if(u?.authSchemes?.length??0>1){const[d,h]=u.authSchemes;d?.name==="sigv4a"&&h?.name==="sigv4"&&(a=h?.signingRegion??a,c=h?.signingName??c)}return await o.sign(t,{signingDate:hn(i.systemClockOffset),signingRegion:a,signingService:c})}errorHandler(t){return r=>{const n=r.ServerTime??pn(r.$response);if(n){const s=je("config",t.config),i=s.systemClockOffset;s.systemClockOffset=mn(n,s.systemClockOffset),s.systemClockOffset!==i&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(t,r){const n=pn(t);if(n){const s=je("config",r.config);s.systemClockOffset=mn(n,s.systemClockOffset)}}}const ld=null,Lt=e=>typeof e=="function"?e():e;function De(e){if(typeof e=="object")return e;e=e|0;const t={};let r=0;for(const n of["httpLabel","idempotent","idempotencyToken","sensitive","httpPayload","httpResponseCode","httpQueryParams"])(e>>r++&1)===1&&(t[n]=1);return t}const we=class{constructor(t,r){l(this,"ref");l(this,"memberName");l(this,"symbol",we.symbol);l(this,"name");l(this,"schema");l(this,"_isMemberSchema");l(this,"traits");l(this,"memberTraits");l(this,"normalizedTraits");this.ref=t,this.memberName=r;const n=[];let s=t,i=t;for(this._isMemberSchema=!1;Bt(s);)n.push(s[1]),s=s[0],i=Lt(s),this._isMemberSchema=!0;if(n.length>0){this.memberTraits={};for(let o=n.length-1;o>=0;--o){const a=n[o];Object.assign(this.memberTraits,De(a))}}else this.memberTraits=0;if(i instanceof we){const o=this.memberTraits;Object.assign(this,i),this.memberTraits=Object.assign({},o,i.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=r??i.memberName;return}if(this.schema=Lt(i),ia(this.schema)?(this.name=`${this.schema[1]}#${this.schema[2]}`,this.traits=this.schema[3]):(this.name=this.memberName??String(i),this.traits=0),this._isMemberSchema&&!r)throw new Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](t){const r=this.prototype.isPrototypeOf(t);return!r&&typeof t=="object"&&t!==null?t.symbol===this.symbol:r}static of(t){const r=Lt(t);if(r instanceof we)return r;if(Bt(r)){const[n,s]=r;if(n instanceof we)return Object.assign(n.getMergedTraits(),De(s)),n;throw new Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(t,null,2)}.`)}return new we(r)}getSchema(){const t=this.schema;return t[0]===0?t[4]:t}getName(t=!1){const{name:r}=this;return!t&&r&&r.includes("#")?r.split("#")[1]:r||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){const t=this.getSchema();return typeof t=="number"?t>=64&&t<128:t[0]===1}isMapSchema(){const t=this.getSchema();return typeof t=="number"?t>=128&&t<=255:t[0]===2}isStructSchema(){const t=this.getSchema();return t[0]===3||t[0]===-3}isBlobSchema(){const t=this.getSchema();return t===21||t===42}isTimestampSchema(){const t=this.getSchema();return typeof t=="number"&&t>=4&&t<=7}isUnitSchema(){return this.getSchema()==="unit"}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){const{streaming:t}=this.getMergedTraits();return!!t||this.getSchema()===42}isIdempotencyToken(){const t=i=>(i&4)===4||!!i?.idempotencyToken,{normalizedTraits:r,traits:n,memberTraits:s}=this;return t(r)||t(n)||t(s)}getMergedTraits(){return this.normalizedTraits??(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()})}getMemberTraits(){return De(this.memberTraits)}getOwnTraits(){return De(this.traits)}getKeySchema(){const[t,r]=[this.isDocumentSchema(),this.isMapSchema()];if(!t&&!r)throw new Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);const n=this.getSchema(),s=t?15:n[4]??0;return Ve([s,0],"key")}getValueSchema(){const t=this.getSchema(),[r,n,s]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],i=typeof t=="number"?63&t:t&&typeof t=="object"&&(n||s)?t[3+t[0]]:r?15:void 0;if(i!=null)return Ve([i,0],n?"value":"member");throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(t){const r=this.getSchema();if(this.isStructSchema()&&r[4].includes(t)){const n=r[4].indexOf(t),s=r[5][n];return Ve(Bt(s)?s:[s,0],t)}if(this.isDocumentSchema())return Ve([15,0],t);throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${t}.`)}getMemberSchemas(){const t={};try{for(const[r,n]of this.structIterator())t[r]=n}catch{}return t}getEventStreamMember(){if(this.isStructSchema()){for(const[t,r]of this.structIterator())if(r.isStreaming()&&r.isStructSchema())return t}return""}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw new Error("@smithy/core/schema - cannot iterate non-struct schema.");const t=this.getSchema();for(let r=0;r<t[4].length;++r)yield[t[4][r],Ve([t[5][r],0],t[4][r])]}};let D=we;l(D,"symbol",Symbol.for("@smithy/nor"));function Ve(e,t){if(e instanceof D)return Object.assign(e,{memberName:t,_isMemberSchema:!0});const r=D;return new r(e,t)}const Bt=e=>Array.isArray(e)&&e.length===2,ia=e=>Array.isArray(e)&&e.length>=5;function oa(e,t,r){if(r<=0||!Number.isInteger(r))throw new Error("Invalid number of delimiters ("+r+") for splitEvery.");const n=e.split(t);if(r===1)return n;const s=[];let i="";for(let o=0;o<n.length;o++)i===""?i=n[o]:i+=t+n[o],(o+1)%r===0&&(s.push(i),i="");return i!==""&&s.push(i),s}const gn=e=>{const t=e.length,r=[];let n=!1,s,i=0;for(let o=0;o<t;++o){const a=e[o];switch(a){case'"':s!=="\\"&&(n=!n);break;case",":n||(r.push(e.slice(i,o)),i=o+1);break;default:}s=a}return r.push(e.slice(i)),r.map(o=>{o=o.trim();const a=o.length;return a<2?o:(o[0]==='"'&&o[a-1]==='"'&&(o=o.slice(1,a-1)),o.replace(/\\"/g,'"'))})},aa=/^[A-Za-z0-9+/]*={0,2}$/,Pe=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!aa.exec(e))throw new TypeError("Invalid base64 string.");const t=(0,Oe.s)(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)},ca=async e=>typeof Blob=="function"&&e instanceof Blob||e.constructor?.name==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await e.arrayBuffer()):ua(e):da(e);async function ua(e){const t=await la(e),r=Pe(t);return new Uint8Array(r)}async function da(e){const t=[],r=e.getReader();let n=!1,s=0;for(;!n;){const{done:a,value:c}=await r.read();c&&(t.push(c),s+=c.length),n=a}const i=new Uint8Array(s);let o=0;for(const a of t)i.set(a,o),o+=a.length;return i}function la(e){return new Promise((t,r)=>{const n=new FileReader;n.onloadend=()=>{if(n.readyState!==2)return r(new Error("Reader aborted too early"));const s=n.result??"",i=s.indexOf(","),o=i>-1?i+1:s.length;t(s.substring(o))},n.onabort=()=>r(new Error("Read aborted")),n.onerror=()=>r(n.error),n.readAsDataURL(e)})}const Me=e=>{let t;if(typeof e=="string"?t=(0,pe.a)(e):t=e,typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,Oe.Q)(t.buffer,t.byteOffset,t.byteLength).toString("base64")};var ve=w(399163);const yn=e=>typeof ReadableStream=="function"&&(e?.constructor?.name===ReadableStream.name||e instanceof ReadableStream),fd=e=>typeof Blob=="function"&&(e?.constructor?.name===Blob.name||e instanceof Blob),Sn="The stream has already been transformed.",fa=e=>{if(!wn(e)&&!yn(e)){const s=e?.__proto__?.constructor?.name||e;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${s}`)}let t=!1;const r=async()=>{if(t)throw new Error(Sn);return t=!0,await ca(e)},n=s=>{if(typeof s.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return s.stream()};return Object.assign(e,{transformToByteArray:r,transformToString:async s=>{const i=await r();if(s==="base64")return Me(i);if(s==="hex")return ue(i);if(s===void 0||s==="utf8"||s==="utf-8")return(0,ve.P)(i);if(typeof TextDecoder=="function")return new TextDecoder(s).decode(i);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(t)throw new Error(Sn);if(t=!0,wn(e))return n(e);if(yn(e))return e;throw new Error(`Cannot transform payload to web stream, got ${e}`)}})},wn=e=>typeof Blob=="function"&&e instanceof Blob,En="The stream has already been transformed.",ha=e=>{if(!(e instanceof Ce.Readable))try{return fa(e)}catch{const s=e?.__proto__?.constructor?.name||e;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${s}`)}let t=!1;const r=async()=>{if(t)throw new Error(En);return t=!0,await fn(e)};return Object.assign(e,{transformToByteArray:r,transformToString:async n=>{const s=await r();return n===void 0||Buffer.isEncoding(n)?(0,Oe.Q)(s.buffer,s.byteOffset,s.byteLength).toString(n):new TextDecoder(n).decode(s)},transformToWebStream:()=>{if(t)throw new Error(En);if(e.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof Ce.Readable.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please ensure a polyfill is available.");return t=!0,Ce.Readable.toWeb(e)}})};class ge extends Uint8Array{static fromString(t,r="utf-8"){if(typeof t=="string")return r==="base64"?ge.mutate(Pe(t)):ge.mutate((0,pe.a)(t));throw new Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}static mutate(t){return Object.setPrototypeOf(t,ge.prototype),t}transformToString(t="utf-8"){return t==="base64"?Me(this):(0,ve.P)(this)}}const We=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return ge.mutate(e);if(!e)return ge.mutate(new Uint8Array);const r=t.streamCollector(e);return ge.mutate(await r)};function Tn(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}class ut{constructor(){l(this,"serdeContext")}setSerdeContext(t){this.serdeContext=t}}class pa extends ut{constructor(r){super();l(this,"options");this.options=r}getRequestType(){return A.K}getResponseType(){return ze}setSerdeContext(r){this.serdeContext=r,this.serializer.setSerdeContext(r),this.deserializer.setSerdeContext(r),this.getPayloadCodec()&&this.getPayloadCodec().setSerdeContext(r)}updateServiceEndpoint(r,n){if("url"in n){r.protocol=n.url.protocol,r.hostname=n.url.hostname,r.port=n.url.port?Number(n.url.port):void 0,r.path=n.url.pathname,r.fragment=n.url.hash||void 0,r.username=n.url.username||void 0,r.password=n.url.password||void 0,r.query||(r.query={});for(const[s,i]of n.url.searchParams.entries())r.query[s]=i;return r}else return r.protocol=n.protocol,r.hostname=n.hostname,r.port=n.port?Number(n.port):void 0,r.path=n.path,r.query={...n.query},r}setHostPrefix(r,n,s){const i=D.of(n.input),o=De(n.traits??{});if(o.endpoint){let a=o.endpoint?.[0];if(typeof a=="string"){const c=[...i.structIterator()].filter(([,u])=>u.getMergedTraits().hostLabel);for(const[u]of c){const f=s[u];if(typeof f!="string")throw new Error(`@smithy/core/schema - ${u} in input must be a string as hostLabel.`);a=a.replace(`{${u}}`,f)}r.hostname=a+r.hostname}}}deserializeMetadata(r){return{httpStatusCode:r.statusCode,requestId:r.headers["x-amzn-requestid"]??r.headers["x-amzn-request-id"]??r.headers["x-amz-request-id"],extendedRequestId:r.headers["x-amz-id-2"],cfId:r.headers["x-amz-cf-id"]}}async serializeEventStream({eventStream:r,requestSchema:n,initialRequest:s}){return(await this.loadEventStreamCapability()).serializeEventStream({eventStream:r,requestSchema:n,initialRequest:s})}async deserializeEventStream({response:r,responseSchema:n,initialResponseContainer:s}){return(await this.loadEventStreamCapability()).deserializeEventStream({response:r,responseSchema:n,initialResponseContainer:s})}async loadEventStreamCapability(){const{EventStreamSerde:r}=await w.e(349).then(w.bind(w,852730));return new r({marshaller:this.getEventStreamMarshaller(),serializer:this.serializer,deserializer:this.deserializer,serdeContext:this.serdeContext,defaultContentType:this.getDefaultContentType()})}getDefaultContentType(){throw new Error(`@smithy/core/protocols - ${this.constructor.name} getDefaultContentType() implementation missing.`)}async deserializeHttpMessage(r,n,s,i,o){return[]}getEventStreamMarshaller(){const r=this.serdeContext;if(!r.eventStreamMarshaller)throw new Error("@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.");return r.eventStreamMarshaller}}class ma extends pa{async serializeRequest(t,r,n){const s={...r??{}},i=this.serializer,o={},a={},c=await n.endpoint(),u=D.of(t?.input),f=u.getSchema();let d=!1,h;const p=new A.K({protocol:"",hostname:"",port:void 0,path:"",fragment:void 0,query:o,headers:a,body:void 0});if(c){this.updateServiceEndpoint(p,c),this.setHostPrefix(p,t,s);const m=De(t.traits);if(m.http){p.method=m.http[0];const[y,g]=m.http[1].split("?");p.path=="/"?p.path=y:p.path+=y;const S=new URLSearchParams(g??"");Object.assign(o,Object.fromEntries(S))}}for(const[m,y]of u.structIterator()){const g=y.getMergedTraits()??{},S=s[m];if(!(S==null&&!y.isIdempotencyToken()))if(g.httpPayload)y.isStreaming()?y.isStructSchema()?s[m]&&(h=await this.serializeEventStream({eventStream:s[m],requestSchema:u})):h=S:(i.write(y,S),h=i.flush()),delete s[m];else if(g.httpLabel){i.write(y,S);const E=i.flush();p.path.includes(`{${m}+}`)?p.path=p.path.replace(`{${m}+}`,E.split("/").map(Tn).join("/")):p.path.includes(`{${m}}`)&&(p.path=p.path.replace(`{${m}}`,Tn(E))),delete s[m]}else if(g.httpHeader)i.write(y,S),a[g.httpHeader.toLowerCase()]=String(i.flush()),delete s[m];else if(typeof g.httpPrefixHeaders=="string"){for(const[E,v]of Object.entries(S)){const x=g.httpPrefixHeaders+E;i.write([y.getValueSchema(),{httpHeader:x}],v),a[x.toLowerCase()]=i.flush()}delete s[m]}else g.httpQuery||g.httpQueryParams?(this.serializeQuery(y,S,o),delete s[m]):d=!0}return d&&s&&(i.write(f,s),h=i.flush()),p.headers=a,p.query=o,p.body=h,p}serializeQuery(t,r,n){const s=this.serializer,i=t.getMergedTraits();if(i.httpQueryParams){for(const[o,a]of Object.entries(r))if(!(o in n)){const c=t.getValueSchema();Object.assign(c.getMergedTraits(),{...i,httpQuery:o,httpQueryParams:void 0}),this.serializeQuery(c,a,n)}return}if(t.isListSchema()){const o=!!t.getMergedTraits().sparse,a=[];for(const c of r){s.write([t.getValueSchema(),i],c);const u=s.flush();(o||u!==void 0)&&a.push(u)}n[i.httpQuery]=a}else s.write([t,i],r),n[i.httpQuery]=s.flush()}async deserializeResponse(t,r,n){const s=this.deserializer,i=D.of(t.output),o={};if(n.statusCode>=300){const c=await We(n.body,r);throw c.byteLength>0&&Object.assign(o,await s.read(15,c)),await this.handleError(t,r,n,o,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - HTTP Protocol error handler failed to throw.")}for(const c in n.headers){const u=n.headers[c];delete n.headers[c],n.headers[c.toLowerCase()]=u}const a=await this.deserializeHttpMessage(i,r,n,o);if(a.length){const c=await We(n.body,r);if(c.byteLength>0){const u=await s.read(i,c);for(const f of a)o[f]=u[f]}}else a.discardResponseBody&&await We(n.body,r);return o.$metadata=this.deserializeMetadata(n),o}async deserializeHttpMessage(t,r,n,s,i){let o;s instanceof Set?o=i:o=s;let a=!0;const c=this.deserializer,u=D.of(t),f=[];for(const[d,h]of u.structIterator()){const p=h.getMemberTraits();if(p.httpPayload){if(a=!1,h.isStreaming())h.isStructSchema()?o[d]=await this.deserializeEventStream({response:n,responseSchema:u}):o[d]=ha(n.body);else if(n.body){const y=await We(n.body,r);y.byteLength>0&&(o[d]=await c.read(h,y))}}else if(p.httpHeader){const m=String(p.httpHeader).toLowerCase(),y=n.headers[m];if(y!=null)if(h.isListSchema()){const g=h.getValueSchema();g.getMergedTraits().httpHeader=m;let S;g.isTimestampSchema()&&g.getSchema()===4?S=oa(y,",",2):S=gn(y);const E=[];for(const v of S)E.push(await c.read(g,v.trim()));o[d]=E}else o[d]=await c.read(h,y)}else if(p.httpPrefixHeaders!==void 0){o[d]={};for(const[m,y]of Object.entries(n.headers))if(m.startsWith(p.httpPrefixHeaders)){const g=h.getValueSchema();g.getMergedTraits().httpHeader=m,o[d][m.slice(p.httpPrefixHeaders.length)]=await c.read(g,y)}}else p.httpResponseCode?o[d]=n.statusCode:f.push(d)}return f.discardResponseBody=a,f}}const hd=e=>{switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${e}"`)}},pd=e=>{if(e!=null){if(typeof e=="number"){if((e===0||e===1)&&ht.warn(ft(`Expected boolean, got ${typeof e}: ${e}`)),e===0)return!1;if(e===1)return!0}if(typeof e=="string"){const t=e.toLowerCase();if((t==="false"||t==="true")&&ht.warn(ft(`Expected boolean, got ${typeof e}: ${e}`)),t==="false")return!1;if(t==="true")return!0}if(typeof e=="boolean")return e;throw new TypeError(`Expected boolean, got ${typeof e}: ${e}`)}},dt=e=>{if(e!=null){if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&ht.warn(ft(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},ga=Math.ceil(2**127*(2-2**-23)),Ht=e=>{const t=dt(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>ga)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},zt=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}},md=null,bn=e=>jt(e,32),An=e=>jt(e,16),Rn=e=>jt(e,8),jt=(e,t)=>{const r=zt(e);if(r!==void 0&&ya(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},ya=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},gd=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},Sa=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;const t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},yd=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return ht.warn(ft(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}},Sd=e=>{if(e==null)return;const t=Sa(e),r=Object.entries(t).filter(([,n])=>n!=null).map(([n])=>n);if(r.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(r.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${r} were not null.`);return t},wa=e=>dt(typeof e=="string"?xe(e):e),wd=null,Ea=e=>Ht(typeof e=="string"?xe(e):e),Ta=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,xe=e=>{const t=e.match(Ta);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},Ed=e=>typeof e=="string"?Cn(e):dt(e),Td=null,bd=null,Ad=e=>typeof e=="string"?Cn(e):Ht(e),Cn=e=>{switch(e){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${e}`)}},Rd=e=>zt(typeof e=="string"?xe(e):e),Cd=null,_d=e=>bn(typeof e=="string"?xe(e):e),lt=e=>An(typeof e=="string"?xe(e):e),ba=e=>Rn(typeof e=="string"?xe(e):e),ft=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),ht={warn:console.warn},Aa=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Vt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function _n(e){const t=e.getUTCFullYear(),r=e.getUTCMonth(),n=e.getUTCDay(),s=e.getUTCDate(),i=e.getUTCHours(),o=e.getUTCMinutes(),a=e.getUTCSeconds(),c=s<10?`0${s}`:`${s}`,u=i<10?`0${i}`:`${i}`,f=o<10?`0${o}`:`${o}`,d=a<10?`0${a}`:`${a}`;return`${Aa[n]}, ${c} ${Vt[r]} ${t} ${u}:${f}:${d} GMT`}const Ra=null,Id=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const t=Ra.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");const[r,n,s,i,o,a,c,u]=t,f=strictParseShort(ke(n)),d=ee(s,"month",1,12),h=ee(i,"day",1,31);return Ge(f,d,h,{hours:o,minutes:a,seconds:c,fractionalMilliseconds:u})},Ca=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),_a=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const t=Ca.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");const[r,n,s,i,o,a,c,u,f]=t,d=lt(ke(n)),h=ee(s,"month",1,12),p=ee(i,"day",1,31),m=Ge(d,h,p,{hours:o,minutes:a,seconds:c,fractionalMilliseconds:u});return f.toUpperCase()!="Z"&&m.setTime(m.getTime()-La(f)),m},Ia=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),Na=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),Oa=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),Da=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let t=Ia.exec(e);if(t){const[r,n,s,i,o,a,c,u]=t;return Ge(lt(ke(i)),Wt(s),ee(n,"day",1,31),{hours:o,minutes:a,seconds:c,fractionalMilliseconds:u})}if(t=Na.exec(e),t){const[r,n,s,i,o,a,c,u]=t;return xa(Ge(Ma(i),Wt(s),ee(n,"day",1,31),{hours:o,minutes:a,seconds:c,fractionalMilliseconds:u}))}if(t=Oa.exec(e),t){const[r,n,s,i,o,a,c,u]=t;return Ge(lt(ke(u)),Wt(n),ee(s.trimLeft(),"day",1,31),{hours:i,minutes:o,seconds:a,fractionalMilliseconds:c})}throw new TypeError("Invalid RFC-7231 date-time value")},Pa=e=>{if(e==null)return;let t;if(typeof e=="number")t=e;else if(typeof e=="string")t=wa(e);else if(typeof e=="object"&&e.tag===1)t=e.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(t)||t===1/0||t===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(t*1e3))},Ge=(e,t,r,n)=>{const s=t-1;return $a(e,s,r),new Date(Date.UTC(e,s,r,ee(n.hours,"hour",0,23),ee(n.minutes,"minute",0,59),ee(n.seconds,"seconds",0,60),Fa(n.fractionalMilliseconds)))},Ma=e=>{const t=new Date().getUTCFullYear(),r=Math.floor(t/100)*100+lt(ke(e));return r<t?r+100:r},va=50*365*24*60*60*1e3,xa=e=>e.getTime()-new Date().getTime()>va?new Date(Date.UTC(e.getUTCFullYear()-100,e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())):e,Wt=e=>{const t=Vt.indexOf(e);if(t<0)throw new TypeError(`Invalid month: ${e}`);return t+1},ka=[31,28,31,30,31,30,31,31,30,31,30,31],$a=(e,t,r)=>{let n=ka[t];if(t===1&&Ua(e)&&(n=29),r>n)throw new TypeError(`Invalid day for ${Vt[t]} in ${e}: ${r}`)},Ua=e=>e%4===0&&(e%100!==0||e%400===0),ee=(e,t,r,n)=>{const s=ba(ke(e));if(s<r||s>n)throw new TypeError(`${t} must be between ${r} and ${n}, inclusive`);return s},Fa=e=>e==null?0:Ea("0."+e)*1e3,La=e=>{const t=e[0];let r=1;if(t=="+")r=1;else if(t=="-")r=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);const n=Number(e.substring(1,3)),s=Number(e.substring(4,6));return r*(n*60+s)*60*1e3},ke=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)};function Ba(e){return(e.includes(",")||e.includes('"'))&&(e=`"${e.replace(/"/g,'\\"')}"`),e}const te=function(t){return Object.assign(new String(t),{deserializeJSON(){return JSON.parse(String(t))},toString(){return String(t)},toJSON(){return String(t)}})};te.from=e=>e&&typeof e=="object"&&(e instanceof te||"deserializeJSON"in e)?e:typeof e=="string"||Object.getPrototypeOf(e)===String.prototype?te(String(e)):te(JSON.stringify(e)),te.fromObject=te.from;function pt(e,t){if(t.timestampFormat.useTrait&&e.isTimestampSchema()&&(e.getSchema()===5||e.getSchema()===6||e.getSchema()===7))return e.getSchema();const{httpLabel:r,httpPrefixHeaders:n,httpHeader:s,httpQuery:i}=e.getMergedTraits();return(t.httpBindings?typeof n=="string"||Boolean(s)?6:Boolean(i)||Boolean(r)?5:void 0:void 0)??t.timestampFormat.default}class Ha extends ut{constructor(r){super();l(this,"settings");l(this,"stringBuffer","");this.settings=r}write(r,n){const s=D.of(r);switch(typeof n){case"object":if(n===null){this.stringBuffer="null";return}if(s.isTimestampSchema()){if(!(n instanceof Date))throw new Error(`@smithy/core/protocols - received non-Date value ${n} when schema expected Date in ${s.getName(!0)}`);switch(pt(s,this.settings)){case 5:this.stringBuffer=n.toISOString().replace(".000Z","Z");break;case 6:this.stringBuffer=_n(n);break;case 7:this.stringBuffer=String(n.getTime()/1e3);break;default:console.warn("Missing timestamp format, using epoch seconds",n),this.stringBuffer=String(n.getTime()/1e3)}return}if(s.isBlobSchema()&&"byteLength"in n){this.stringBuffer=(this.serdeContext?.base64Encoder??Me)(n);return}if(s.isListSchema()&&Array.isArray(n)){let a="";for(const c of n){this.write([s.getValueSchema(),s.getMergedTraits()],c);const u=this.flush(),f=s.getValueSchema().isTimestampSchema()?u:Ba(u);a!==""&&(a+=", "),a+=f}this.stringBuffer=a;return}this.stringBuffer=JSON.stringify(n,null,2);break;case"string":const i=s.getMergedTraits().mediaType;let o=n;if(i&&((i==="application/json"||i.endsWith("+json"))&&(o=te.from(o)),s.getMergedTraits().httpHeader)){this.stringBuffer=(this.serdeContext?.base64Encoder??Me)(o.toString());return}this.stringBuffer=n;break;default:s.isIdempotencyToken()?this.stringBuffer=(0,Dt.v4)():this.stringBuffer=String(n)}}flush(){const r=this.stringBuffer;return this.stringBuffer="",r}}class za{constructor(t,r,n=new Ha(r)){l(this,"codecSerializer");l(this,"stringSerializer");l(this,"buffer");this.codecSerializer=t,this.stringSerializer=n}setSerdeContext(t){this.codecSerializer.setSerdeContext(t),this.stringSerializer.setSerdeContext(t)}write(t,r){const n=D.of(t),s=n.getMergedTraits();if(s.httpHeader||s.httpLabel||s.httpQuery){this.stringSerializer.write(n,r),this.buffer=this.stringSerializer.flush();return}return this.codecSerializer.write(n,r)}flush(){if(this.buffer!==void 0){const t=this.buffer;return this.buffer=void 0,t}return this.codecSerializer.flush()}}const Gt="(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?:[ne|u?r]?s?day)?",Kt="(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)",Jt="(\\d?\\d):(\\d{2}):(\\d{2})(?:\\.(\\d+))?",In="(\\d?\\d)",Nn="(\\d{4})",ja=new RegExp(/^(\d{4})-(\d\d)-(\d\d)[tT](\d\d):(\d\d):(\d\d)(\.(\d+))?(([-+]\d\d:\d\d)|[zZ])$/),Va=new RegExp(`^${Gt}, ${In} ${Kt} ${Nn} ${Jt} GMT$`),Wa=new RegExp(`^${Gt}, ${In}-${Kt}-(\\d\\d) ${Jt} GMT$`),Ga=new RegExp(`^${Gt} ${Kt} ( [1-9]|\\d\\d) ${Jt} ${Nn}$`),Ka=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Ja=e=>{if(e==null)return;let t=NaN;if(typeof e=="number")t=e;else if(typeof e=="string"){if(!/^-?\d*\.?\d+$/.test(e))throw new TypeError("parseEpochTimestamp - numeric string invalid.");t=Number.parseFloat(e)}else typeof e=="object"&&e.tag===1&&(t=e.value);if(isNaN(t)||Math.abs(t)===1/0)throw new TypeError("Epoch timestamps must be valid finite numbers.");return new Date(Math.round(t*1e3))},qa=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC3339 timestamps must be strings");const t=ja.exec(e);if(!t)throw new TypeError(`Invalid RFC3339 timestamp format ${e}`);const[,r,n,s,i,o,a,,c,u]=t;ne(n,1,12),ne(s,1,31),ne(i,0,23),ne(o,0,59),ne(a,0,60);const f=new Date(Date.UTC(Number(r),Number(n)-1,Number(s),Number(i),Number(o),Number(a),Number(c)?Math.round(parseFloat(`0.${c}`)*1e3):0));if(f.setUTCFullYear(Number(r)),u.toUpperCase()!="Z"){const[,d,h,p]=/([+-])(\d\d):(\d\d)/.exec(u)||[void 0,"+",0,0],m=d==="-"?1:-1;f.setTime(f.getTime()+m*(Number(h)*60*60*1e3+Number(p)*60*1e3))}return f},Xa=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC7231 timestamps must be strings.");let t,r,n,s,i,o,a,c;if((c=Va.exec(e))?[,t,r,n,s,i,o,a]=c:(c=Wa.exec(e))?([,t,r,n,s,i,o,a]=c,n=(Number(n)+1900).toString()):(c=Ga.exec(e))&&([,r,t,s,i,o,a,n]=c),n&&o){const u=Date.UTC(Number(n),Ka.indexOf(r),Number(t),Number(s),Number(i),Number(o),a?Math.round(parseFloat(`0.${a}`)*1e3):0);ne(t,1,31),ne(s,0,23),ne(i,0,59),ne(o,0,60);const f=new Date(u);return f.setUTCFullYear(Number(n)),f}throw new TypeError(`Invalid RFC7231 date-time value ${e}.`)};function ne(e,t,r){const n=Number(e);if(n<t||n>r)throw new Error(`Value ${n} out of range [${t}, ${r}]`)}const On=/^-?\d*(\.\d+)?$/;class J{constructor(t,r){l(this,"string");l(this,"type");if(this.string=t,this.type=r,!On.test(t))throw new Error('@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".')}toString(){return this.string}static[Symbol.hasInstance](t){if(!t||typeof t!="object")return!1;const r=t;return J.prototype.isPrototypeOf(t)||r.type==="bigDecimal"&&On.test(r.string)}}function Nd(e){return new J(String(e),"bigDecimal")}class Qa extends ut{constructor(r){super();l(this,"settings");this.settings=r}read(r,n){const s=D.of(r);if(s.isListSchema())return gn(n).map(i=>this.read(s.getValueSchema(),i));if(s.isBlobSchema())return(this.serdeContext?.base64Decoder??Pe)(n);if(s.isTimestampSchema())switch(pt(s,this.settings)){case 5:return qa(n);case 6:return Xa(n);case 7:return Ja(n);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",n),new Date(n)}if(s.isStringSchema()){const i=s.getMergedTraits().mediaType;let o=n;if(i)return s.getMergedTraits().httpHeader&&(o=this.base64ToUtf8(o)),(i==="application/json"||i.endsWith("+json"))&&(o=te.from(o)),o}return s.isNumericSchema()?Number(n):s.isBigIntegerSchema()?BigInt(n):s.isBigDecimalSchema()?new J(n,"bigDecimal"):s.isBooleanSchema()?String(n).toLowerCase()==="true":n}base64ToUtf8(r){return(this.serdeContext?.utf8Encoder??ve.P)((this.serdeContext?.base64Decoder??Pe)(r))}}class Ya extends ut{constructor(r,n){super();l(this,"codecDeserializer");l(this,"stringDeserializer");this.codecDeserializer=r,this.stringDeserializer=new Qa(n)}setSerdeContext(r){this.stringDeserializer.setSerdeContext(r),this.codecDeserializer.setSerdeContext(r),this.serdeContext=r}read(r,n){const s=D.of(r),i=s.getMergedTraits(),o=this.serdeContext?.utf8Encoder??ve.P;if(i.httpHeader||i.httpResponseCode)return this.stringDeserializer.read(s,o(n));if(i.httpPayload){if(s.isBlobSchema()){const a=this.serdeContext?.utf8Decoder??pe.a;return typeof n=="string"?a(n):n}else if(s.isStringSchema())return"byteLength"in n?o(n):n}return this.codecDeserializer.read(s,n)}}const ie=class{constructor(t,r=new Map,n=new Map){l(this,"namespace");l(this,"schemas");l(this,"exceptions");this.namespace=t,this.schemas=r,this.exceptions=n}static for(t){return ie.registries.has(t)||ie.registries.set(t,new ie(t)),ie.registries.get(t)}register(t,r){const n=this.normalizeShapeId(t);ie.for(n.split("#")[0]).schemas.set(n,r)}getSchema(t){const r=this.normalizeShapeId(t);if(!this.schemas.has(r))throw new Error(`@smithy/core/schema - schema not found for ${r}`);return this.schemas.get(r)}registerError(t,r){const n=t,s=ie.for(n[1]);s.schemas.set(n[1]+"#"+n[2],n),s.exceptions.set(n,r)}getErrorCtor(t){const r=t;return ie.for(r[1]).exceptions.get(r)}getBaseException(){for(const t of this.exceptions.keys())if(Array.isArray(t)){const[,r,n]=t,s=r+"#"+n;if(s.startsWith("smithy.ts.sdk.synthetic.")&&s.endsWith("ServiceException"))return t}}find(t){return[...this.schemas.values()].find(t)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(t){return t.includes("#")?t:this.namespace+"#"+t}};let q=ie;l(q,"registries",new Map);class $e extends Error{constructor(r){super(r.message);l(this,"$fault");l(this,"$response");l(this,"$retryable");l(this,"$metadata");Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=r.name,this.$fault=r.$fault,this.$metadata=r.$metadata}static isInstance(r){if(!r)return!1;const n=r;return $e.prototype.isPrototypeOf(n)||Boolean(n.$fault)&&Boolean(n.$metadata)&&(n.$fault==="client"||n.$fault==="server")}static[Symbol.hasInstance](r){if(!r)return!1;const n=r;return this===$e?$e.isInstance(r):$e.isInstance(r)?n.name&&this.name?this.prototype.isPrototypeOf(r)||n.name===this.name:this.prototype.isPrototypeOf(r):!1}}const Dn=(e,t={})=>{Object.entries(t).filter(([,n])=>n!==void 0).forEach(([n,s])=>{(e[n]==null||e[n]==="")&&(e[n]=s)});const r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e};class Za{constructor(t=!1){l(this,"queryCompat");this.queryCompat=t}resolveRestContentType(t,r){const n=r.getMemberSchemas(),s=Object.values(n).find(i=>!!i.getMergedTraits().httpPayload);if(s){const i=s.getMergedTraits().mediaType;return i||(s.isStringSchema()?"text/plain":s.isBlobSchema()?"application/octet-stream":t)}else if(!r.isUnitSchema()&&Object.values(n).find(o=>{const{httpQuery:a,httpQueryParams:c,httpHeader:u,httpLabel:f,httpPrefixHeaders:d}=o.getMergedTraits();return!a&&!c&&!u&&!f&&d===void 0}))return t}async getErrorSchemaOrThrowBaseException(t,r,n,s,i,o){let a=r,c=t;t.includes("#")&&([a,c]=t.split("#"));const u={$metadata:i,$fault:n.statusCode<500?"client":"server"},f=q.for(a);try{return{errorSchema:o?.(f,c)??f.getSchema(t),errorMetadata:u}}catch{s.message=s.message??s.Message??"UnknownError";const h=q.for("smithy.ts.sdk.synthetic."+a),p=h.getBaseException();if(p){const m=h.getErrorCtor(p)??Error;throw this.decorateServiceException(Object.assign(new m({name:c}),u),s)}throw this.decorateServiceException(Object.assign(new Error(c),u),s)}}decorateServiceException(t,r={}){if(this.queryCompat){const n=t.Message??r.Message,s=Dn(t,r);return n&&(s.Message=n,s.message=n),s}return Dn(t,r)}setQueryCompatError(t,r){const n=r.headers?.["x-amzn-query-error"];if(t!==void 0&&n!=null){const[s,i]=n.split(";"),o=Object.entries(t),a={Code:s,Type:i};Object.assign(t,a);for(const[c,u]of o)a[c]=u;delete a.__type,t.Error=a}}queryCompatOutput(t,r){t.Error&&(r.Error=t.Error),t.Type&&(r.Type=t.Type),t.Code&&(r.Code=t.Code)}}class qt{constructor(){l(this,"serdeContext")}setSerdeContext(t){this.serdeContext=t}}function ec(e,t,r){if(r?.source){const n=r.source;if(typeof t=="number"&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER||n!==String(t)))return n.includes(".")?new J(n,"bigDecimal"):BigInt(n)}return t}const tc=(e,t)=>We(e,t).then(r=>(t?.utf8Encoder??ve.P)(r)),Pn=(e,t)=>tc(e,t).then(r=>{if(r.length)try{return JSON.parse(r)}catch(n){throw n?.name==="SyntaxError"&&Object.defineProperty(n,"$responseBodyText",{value:r}),n}return{}}),Od=async(e,t)=>{const r=await Pn(e,t);return r.message=r.message??r.Message,r},rc=(e,t)=>{const r=(i,o)=>Object.keys(i).find(a=>a.toLowerCase()===o.toLowerCase()),n=i=>{let o=i;return typeof o=="number"&&(o=o.toString()),o.indexOf(",")>=0&&(o=o.split(",")[0]),o.indexOf(":")>=0&&(o=o.split(":")[0]),o.indexOf("#")>=0&&(o=o.split("#")[1]),o},s=r(e.headers,"x-amzn-errortype");if(s!==void 0)return n(e.headers[s]);if(t&&typeof t=="object"){const i=r(t,"code");if(i&&t[i]!==void 0)return n(t[i]);if(t.__type!==void 0)return n(t.__type)}};class nc extends qt{constructor(r){super();l(this,"settings");this.settings=r}async read(r,n){return this._read(r,typeof n=="string"?JSON.parse(n,ec):await Pn(n,this.serdeContext))}readObject(r,n){return this._read(r,n)}_read(r,n){const s=n!==null&&typeof n=="object",i=D.of(r);if(i.isListSchema()&&Array.isArray(n)){const a=i.getValueSchema(),c=[],u=!!i.getMergedTraits().sparse;for(const f of n)(u||f!=null)&&c.push(this._read(a,f));return c}else if(i.isMapSchema()&&s){const a=i.getValueSchema(),c={},u=!!i.getMergedTraits().sparse;for(const[f,d]of Object.entries(n))(u||d!=null)&&(c[f]=this._read(a,d));return c}else if(i.isStructSchema()&&s){const a={};for(const[c,u]of i.structIterator()){const f=this.settings.jsonName?u.getMergedTraits().jsonName??c:c,d=this._read(u,n[f]);d!=null&&(a[c]=d)}return a}if(i.isBlobSchema()&&typeof n=="string")return Pe(n);const o=i.getMergedTraits().mediaType;if(i.isStringSchema()&&typeof n=="string"&&o&&(o==="application/json"||o.endsWith("+json")))return te.from(n);if(i.isTimestampSchema()&&n!=null)switch(pt(i,this.settings)){case 5:return _a(n);case 6:return Da(n);case 7:return Pa(n);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",n),new Date(n)}if(i.isBigIntegerSchema()&&(typeof n=="number"||typeof n=="string"))return BigInt(n);if(i.isBigDecimalSchema()&&n!=null){if(n instanceof J)return n;const a=n;return a.type==="bigDecimal"&&"string"in a?new J(a.string,a.type):new J(String(n),"bigDecimal")}if(i.isNumericSchema()&&typeof n=="string")switch(n){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN}if(i.isDocumentSchema())if(s){const a=Array.isArray(n)?[]:{};for(const[c,u]of Object.entries(n))u instanceof J?a[c]=u:a[c]=this._read(i,u);return a}else return structuredClone(n);return n}}const Mn=String.fromCharCode(925);class sc{constructor(){l(this,"values",new Map);l(this,"counter",0);l(this,"stage",0)}createReplacer(){if(this.stage===1)throw new Error("@aws-sdk/core/protocols - JsonReplacer already created.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");return this.stage=1,(t,r)=>{if(r instanceof J){const n=`${Mn+"nv"+this.counter++}_`+r.string;return this.values.set(`"${n}"`,r.string),n}if(typeof r=="bigint"){const n=r.toString(),s=`${Mn+"b"+this.counter++}_`+n;return this.values.set(`"${s}"`,n),s}return r}}replaceInJson(t){if(this.stage===0)throw new Error("@aws-sdk/core/protocols - JsonReplacer not created yet.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");if(this.stage=2,this.counter===0)return t;for(const[r,n]of this.values)t=t.replace(r,n);return t}}class ic extends qt{constructor(r){super();l(this,"settings");l(this,"buffer");l(this,"rootSchema");this.settings=r}write(r,n){this.rootSchema=D.of(r),this.buffer=this._write(this.rootSchema,n)}writeDiscriminatedDocument(r,n){this.write(r,n),typeof this.buffer=="object"&&(this.buffer.__type=D.of(r).getName(!0))}flush(){const{rootSchema:r}=this;if(this.rootSchema=void 0,r?.isStructSchema()||r?.isDocumentSchema()){const n=new sc;return n.replaceInJson(JSON.stringify(this.buffer,n.createReplacer(),0))}return this.buffer}_write(r,n,s){const i=n!==null&&typeof n=="object",o=D.of(r);if(o.isListSchema()&&Array.isArray(n)){const a=o.getValueSchema(),c=[],u=!!o.getMergedTraits().sparse;for(const f of n)(u||f!=null)&&c.push(this._write(a,f));return c}else if(o.isMapSchema()&&i){const a=o.getValueSchema(),c={},u=!!o.getMergedTraits().sparse;for(const[f,d]of Object.entries(n))(u||d!=null)&&(c[f]=this._write(a,d));return c}else if(o.isStructSchema()&&i){const a={};for(const[c,u]of o.structIterator()){const f=this.settings.jsonName?u.getMergedTraits().jsonName??c:c,d=this._write(u,n[c],o);d!==void 0&&(a[f]=d)}return a}if(!(n===null&&s?.isStructSchema())){if(o.isBlobSchema()&&(n instanceof Uint8Array||typeof n=="string")||o.isDocumentSchema()&&n instanceof Uint8Array)return o===this.rootSchema?n:(this.serdeContext?.base64Encoder??Me)(n);if((o.isTimestampSchema()||o.isDocumentSchema())&&n instanceof Date)switch(pt(o,this.settings)){case 5:return n.toISOString().replace(".000Z","Z");case 6:return _n(n);case 7:return n.getTime()/1e3;default:return console.warn("Missing timestamp format, using epoch seconds",n),n.getTime()/1e3}if(o.isNumericSchema()&&typeof n=="number"&&(Math.abs(n)===1/0||isNaN(n)))return String(n);if(o.isStringSchema()){if(typeof n>"u"&&o.isIdempotencyToken())return(0,Dt.v4)();const a=o.getMergedTraits().mediaType;if(n!=null&&a&&(a==="application/json"||a.endsWith("+json")))return te.from(n)}if(o.isDocumentSchema())if(i){const a=Array.isArray(n)?[]:{};for(const[c,u]of Object.entries(n))u instanceof J?a[c]=u:a[c]=this._write(o,u);return a}else return structuredClone(n);return n}}}class oc extends qt{constructor(r){super();l(this,"settings");this.settings=r}createSerializer(){const r=new ic(this.settings);return r.setSerdeContext(this.serdeContext),r}createDeserializer(){const r=new nc(this.settings);return r.setSerdeContext(this.serdeContext),r}}class ac extends ma{constructor({defaultNamespace:r}){super({defaultNamespace:r});l(this,"serializer");l(this,"deserializer");l(this,"codec");l(this,"mixin",new Za);const n={timestampFormat:{useTrait:!0,default:7},httpBindings:!0,jsonName:!0};this.codec=new oc(n),this.serializer=new za(this.codec.createSerializer(),n),this.deserializer=new Ya(this.codec.createDeserializer(),n)}getShapeId(){return"aws.protocols#restJson1"}getPayloadCodec(){return this.codec}setSerdeContext(r){this.codec.setSerdeContext(r),super.setSerdeContext(r)}async serializeRequest(r,n,s){const i=await super.serializeRequest(r,n,s),o=D.of(r.input);if(!i.headers["content-type"]){const a=this.mixin.resolveRestContentType(this.getDefaultContentType(),o);a&&(i.headers["content-type"]=a)}return i.body==null&&i.headers["content-type"]===this.getDefaultContentType()&&(i.body="{}"),i}async deserializeResponse(r,n,s){const i=await super.deserializeResponse(r,n,s),o=D.of(r.output);for(const[a,c]of o.structIterator())c.getMemberTraits().httpPayload&&!(a in i)&&(i[a]=null);return i}async handleError(r,n,s,i,o){const a=rc(s,i)??"Unknown",{errorSchema:c,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,s,i,o),f=D.of(c),d=i.message??i.Message??"Unknown",h=q.for(c[1]).getErrorCtor(c)??Error,p=new h(d);await this.deserializeHttpMessage(c,n,s,i);const m={};for(const[y,g]of f.structIterator()){const S=g.getMergedTraits().jsonName??y;m[y]=this.codec.createDeserializer().readObject(g,i[S])}throw this.mixin.decorateServiceException(Object.assign(p,u,{$fault:f.getMergedTraits().error,message:d},m),i)}getDefaultContentType(){return"application/json"}}class cc{async sign(t,r,n){return t}}class uc{constructor({size:t,params:r}){l(this,"capacity");l(this,"data",new Map);l(this,"parameters",[]);this.capacity=t??50,r&&(this.parameters=r)}get(t,r){const n=this.hash(t);if(n===!1)return r();if(!this.data.has(n)){if(this.data.size>this.capacity+10){const s=this.data.keys();let i=0;for(;;){const{value:o,done:a}=s.next();if(this.data.delete(o),a||++i>10)break}}this.data.set(n,r())}return this.data.get(n)}size(){return this.data.size}hash(t){let r="";const{parameters:n}=this;if(n.length===0)return!1;for(const s of n){const i=String(t[s]??"");if(i.includes("|;"))return!1;r+=i+"|;"}return r}}const Ke="endpoints";function de(e){return typeof e!="object"||e==null?e:"ref"in e?`$${de(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(de).join(", ")})`:JSON.stringify(e,null,2)}class V extends Error{constructor(t){super(t),this.name="EndpointError"}}const dc=(e,t)=>e===t,lc=e=>{const t=e.split("."),r=[];for(const n of t){const s=n.indexOf("[");if(s!==-1){if(n.indexOf("]")!==n.length-1)throw new V(`Path: '${e}' does not end with ']'`);const i=n.slice(s+1,-1);if(Number.isNaN(parseInt(i)))throw new V(`Invalid array index: '${i}' in path: '${e}'`);s!==0&&r.push(n.slice(0,s)),r.push(i)}else r.push(n)}return r},vn=(e,t)=>lc(t).reduce((r,n)=>{if(typeof r!="object")throw new V(`Index '${n}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},e),fc=e=>e!=null,hc=e=>!e;var Je;(function(e){e.HTTP="http",e.HTTPS="https"})(Je||(Je={}));const Xt={[Je.HTTP]:80,[Je.HTTPS]:443},pc={booleanEquals:dc,getAttr:vn,isSet:fc,isValidHostLabel:Ze,not:hc,parseURL:e=>{const t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){const{hostname:h,port:p,protocol:m="",path:y="",query:g={}}=e,S=new URL(`${m}//${h}${p?`:${p}`:""}${y}`);return S.search=Object.entries(g).map(([E,v])=>`${E}=${v}`).join("&"),S}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;const r=t.href,{host:n,hostname:s,pathname:i,protocol:o,search:a}=t;if(a)return null;const c=o.slice(0,-1);if(!Object.values(Je).includes(c))return null;const u=lr(s),f=r.includes(`${n}:${Xt[c]}`)||typeof e=="string"&&e.includes(`${n}:${Xt[c]}`),d=`${n}${f?`:${Xt[c]}`:""}`;return{scheme:c,authority:d,path:i,normalizedPath:i.endsWith("/")?i:`${i}/`,isIp:u}},stringEquals:(e,t)=>e===t,substring:(e,t,r,n)=>t>=r||e.length<r?null:n?e.substring(e.length-r,e.length-t):e.substring(t,r),uriEncode:e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`)},xn=(e,t)=>{const r=[],n={...t.endpointParams,...t.referenceRecord};let s=0;for(;s<e.length;){const i=e.indexOf("{",s);if(i===-1){r.push(e.slice(s));break}r.push(e.slice(s,i));const o=e.indexOf("}",i);if(o===-1){r.push(e.slice(i));break}e[i+1]==="{"&&e[o+1]==="}"&&(r.push(e.slice(i+1,o)),s=o+2);const a=e.substring(i+1,o);if(a.includes("#")){const[c,u]=a.split("#");r.push(vn(n[c],u))}else r.push(n[a]);s=o+1}return r.join("")},mc=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e],mt=(e,t,r)=>{if(typeof e=="string")return xn(e,r);if(e.fn)return $n.callFunction(e,r);if(e.ref)return mc(e,r);throw new V(`'${t}': ${String(e)} is not a string, function or reference.`)},kn=({fn:e,argv:t},r)=>{const n=t.map(i=>["boolean","number"].includes(typeof i)?i:$n.evaluateExpression(i,"arg",r)),s=e.split(".");return s[0]in Ye&&s[1]!=null?Ye[s[0]][s[1]](...n):pc[e](...n)},$n={evaluateExpression:mt,callFunction:kn},gc=({assign:e,...t},r)=>{if(e&&e in r.referenceRecord)throw new V(`'${e}' is already defined in Reference Record.`);const n=kn(t,r);return r.logger?.debug?.(`${Ke} evaluateCondition: ${de(t)} = ${de(n)}`),{result:n===""?!0:!!n,...e!=null&&{toAssign:{name:e,value:n}}}},Qt=(e=[],t)=>{const r={};for(const n of e){const{result:s,toAssign:i}=gc(n,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!s)return{result:s};i&&(r[i.name]=i.value,t.logger?.debug?.(`${Ke} assign: ${i.name} := ${de(i.value)}`))}return{result:!0,referenceRecord:r}},yc=(e,t)=>Object.entries(e).reduce((r,[n,s])=>({...r,[n]:s.map(i=>{const o=mt(i,"Header value entry",t);if(typeof o!="string")throw new V(`Header '${n}' value '${o}' is not a string`);return o})}),{}),Un=(e,t)=>Object.entries(e).reduce((r,[n,s])=>({...r,[n]:Ln.getEndpointProperty(s,t)}),{}),Fn=(e,t)=>{if(Array.isArray(e))return e.map(r=>Fn(r,t));switch(typeof e){case"string":return xn(e,t);case"object":if(e===null)throw new V(`Unexpected endpoint property: ${e}`);return Ln.getEndpointProperties(e,t);case"boolean":return e;default:throw new V(`Unexpected endpoint property type: ${typeof e}`)}},Ln={getEndpointProperty:Fn,getEndpointProperties:Un},Sc=(e,t)=>{const r=mt(e,"Endpoint URL",t);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new V(`Endpoint URL must be a string, got ${typeof r}`)},wc=(e,t)=>{const{conditions:r,endpoint:n}=e,{result:s,referenceRecord:i}=Qt(r,t);if(!s)return;const o={...t,referenceRecord:{...t.referenceRecord,...i}},{url:a,properties:c,headers:u}=n;return t.logger?.debug?.(`${Ke} Resolving endpoint from template: ${de(n)}`),{...u!=null&&{headers:yc(u,o)},...c!=null&&{properties:Un(c,o)},url:Sc(a,o)}},Ec=(e,t)=>{const{conditions:r,error:n}=e,{result:s,referenceRecord:i}=Qt(r,t);if(!!s)throw new V(mt(n,"Error",{...t,referenceRecord:{...t.referenceRecord,...i}}))},Bn=(e,t)=>{for(const r of e)if(r.type==="endpoint"){const n=wc(r,t);if(n)return n}else if(r.type==="error")Ec(r,t);else if(r.type==="tree"){const n=Hn.evaluateTreeRule(r,t);if(n)return n}else throw new V(`Unknown endpoint rule: ${r}`);throw new V("Rules evaluation failed")},Hn={evaluateRules:Bn,evaluateTreeRule:(e,t)=>{const{conditions:r,rules:n}=e,{result:s,referenceRecord:i}=Qt(r,t);if(!!s)return Hn.evaluateRules(n,{...t,referenceRecord:{...t.referenceRecord,...i}})}},Tc=(e,t)=>{const{endpointParams:r,logger:n}=t,{parameters:s,rules:i}=e;t.logger?.debug?.(`${Ke} Initial EndpointParams: ${de(r)}`);const o=Object.entries(s).filter(([,u])=>u.default!=null).map(([u,f])=>[u,f.default]);if(o.length>0)for(const[u,f]of o)r[u]=r[u]??f;const a=Object.entries(s).filter(([,u])=>u.required).map(([u])=>u);for(const u of a)if(r[u]==null)throw new V(`Missing required parameter: '${u}'`);const c=Bn(i,{endpointParams:r,logger:n,referenceRecord:{}});return t.logger?.debug?.(`${Ke} Resolved endpoint: ${de(c)}`),c},zn="required",$="fn",U="argv",se="ref",jn=!0,Vn="isSet",ye="booleanEquals",Ue="error",le="endpoint",X="tree",gt="PartitionResult",Yt="stringEquals",Wn={[zn]:!0,default:!1,type:"boolean"},Gn={[zn]:!1,type:"string"},Kn={[se]:"Endpoint"},Zt={[$]:ye,[U]:[{[se]:"UseFIPS"},!0]},er={[$]:ye,[U]:[{[se]:"UseDualStack"},!0]},F={},tr={[$]:"getAttr",[U]:[{[se]:gt},"name"]},yt={[$]:ye,[U]:[{[se]:"UseFIPS"},!1]},St={[$]:ye,[U]:[{[se]:"UseDualStack"},!1]},Jn={[$]:"getAttr",[U]:[{[se]:gt},"supportsFIPS"]},qn={[$]:ye,[U]:[!0,{[$]:"getAttr",[U]:[{[se]:gt},"supportsDualStack"]}]},Xn=[{[se]:"Region"}],bc={version:"1.0",parameters:{UseDualStack:Wn,UseFIPS:Wn,Endpoint:Gn,Region:Gn},rules:[{conditions:[{[$]:Vn,[U]:[Kn]}],rules:[{conditions:[Zt],error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Ue},{rules:[{conditions:[er],error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Ue},{endpoint:{url:Kn,properties:F,headers:F},type:le}],type:X}],type:X},{rules:[{conditions:[{[$]:Vn,[U]:Xn}],rules:[{conditions:[{[$]:"aws.partition",[U]:Xn,assign:gt}],rules:[{conditions:[{[$]:Yt,[U]:[tr,"aws"]},yt,St],endpoint:{url:"https://{Region}.signin.aws.amazon.com",properties:F,headers:F},type:le},{conditions:[{[$]:Yt,[U]:[tr,"aws-cn"]},yt,St],endpoint:{url:"https://{Region}.signin.amazonaws.cn",properties:F,headers:F},type:le},{conditions:[{[$]:Yt,[U]:[tr,"aws-us-gov"]},yt,St],endpoint:{url:"https://{Region}.signin.amazonaws-us-gov.com",properties:F,headers:F},type:le},{conditions:[Zt,er],rules:[{conditions:[{[$]:ye,[U]:[jn,Jn]},qn],rules:[{endpoint:{url:"https://signin-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:F,headers:F},type:le}],type:X},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Ue}],type:X},{conditions:[Zt,St],rules:[{conditions:[{[$]:ye,[U]:[Jn,jn]}],rules:[{endpoint:{url:"https://signin-fips.{Region}.{PartitionResult#dnsSuffix}",properties:F,headers:F},type:le}],type:X},{error:"FIPS is enabled but this partition does not support FIPS",type:Ue}],type:X},{conditions:[yt,er],rules:[{conditions:[qn],rules:[{endpoint:{url:"https://signin.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:F,headers:F},type:le}],type:X},{error:"DualStack is enabled but this partition does not support DualStack",type:Ue}],type:X},{endpoint:{url:"https://signin.{Region}.{PartitionResult#dnsSuffix}",properties:F,headers:F},type:le}],type:X}],type:X},{error:"Invalid Configuration: Missing Region",type:Ue}],type:X}]},Ac=new uc({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),Rc=(e,t={})=>Ac.get(e,()=>Tc(bc,{endpointParams:e,logger:t.logger}));Ye.aws=gr;const Cc=e=>({apiVersion:"2023-01-01",base64Decoder:e?.base64Decoder??Pe,base64Encoder:e?.base64Encoder??Me,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Rc,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??go,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new sa},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new cc}],logger:e?.logger??new Ur,protocol:e?.protocol??new ac({defaultNamespace:"com.amazonaws.signin"}),serviceId:e?.serviceId??"Signin",urlParser:e?.urlParser??It.D,utf8Decoder:e?.utf8Decoder??pe.a,utf8Encoder:e?.utf8Encoder??ve.P}),_c=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};var Ic=w(669604);const Nc="AWS_EXECUTION_ENV",Qn="AWS_REGION",Yn="AWS_DEFAULT_REGION",Oc="AWS_EC2_METADATA_DISABLED",Dc=["in-region","cross-region","mobile","standard","legacy"],Pc="/latest/meta-data/placement/region",Mc="AWS_DEFAULTS_MODE",vc="defaults_mode",xc={environmentVariableSelector:e=>e[Mc],configFileSelector:e=>e[vc],default:"legacy"},kc=({region:e=(0,Z.Z)(on),defaultsMode:t=(0,Z.Z)(xc)}={})=>(0,Ic.B)(async()=>{const r=typeof t=="function"?await t():t;switch(r?.toLowerCase()){case"auto":return $c(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${Dc.join(", ")}, got ${r}`)}}),$c=async e=>{if(e){const t=typeof e=="function"?await e():e,r=await Uc();return r?t===r?"in-region":"cross-region":"standard"}return"standard"},Uc=async()=>{if(process.env[Nc]&&(process.env[Qn]||process.env[Yn]))return process.env[Qn]??process.env[Yn];if(!process.env[Oc])try{const{getInstanceMetadataEndpoint:e,httpRequest:t}=await w.e(2210).then(w.bind(w,202210)),r=await e();return(await t({...r,path:Pc})).toString()}catch{}};let Zn=!1;const Fc=e=>{e&&!Zn&&parseInt(e.substring(1,e.indexOf(".")))<16&&(Zn=!0)},Lc=e=>{Fc(process.version);const t=kc(e),r=()=>t().then(_c),n=Cc(e);To(process.version);const s={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,Z.Z)(Ao,s),bodyLengthChecker:e?.bodyLengthChecker??ta,defaultUserAgentProvider:e?.defaultUserAgentProvider??_o({serviceId:n.serviceId,clientVersion:Eo.rE}),maxAttempts:e?.maxAttempts??(0,Z.Z)(wi,e),region:e?.region??(0,Z.Z)(on,{...vo,...s}),requestHandler:ct.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,Z.Z)({...Ai,default:async()=>(await r()).retryMode||Or},e),sha256:e?.sha256??Ho.bind(null,"sha256"),streamCollector:e?.streamCollector??fn,useDualstackEndpoint:e?.useDualstackEndpoint??(0,Z.Z)($o,s),useFipsEndpoint:e?.useFipsEndpoint??(0,Z.Z)(Lo,s),userAgentAppId:e?.userAgentAppId??(0,Z.Z)(Do,s)}},Bc=e=>({setRegion(t){e.region=t},region(){return e.region}}),Hc=e=>({region:e.region()}),zc=e=>({setHttpHandler(t){e.httpHandler=t},httpHandler(){return e.httpHandler},updateHttpClientConfig(t,r){e.httpHandler?.updateHttpClientConfig(t,r)},httpHandlerConfigs(){return e.httpHandler.httpHandlerConfigs()}}),jc=e=>({httpHandler:e.httpHandler()});var Fe;(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(Fe||(Fe={}));const $d=e=>{const t=[];return e.sha256!==void 0&&t.push({algorithmId:()=>Fe.SHA256,checksumConstructor:()=>e.sha256}),e.md5!=null&&t.push({algorithmId:()=>Fe.MD5,checksumConstructor:()=>e.md5}),{addChecksumAlgorithm(r){t.push(r)},checksumAlgorithms(){return t}}},Ud=e=>{const t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t},Vc=e=>{const t=[];for(const r in Fe){const n=Fe[r];e[n]!==void 0&&t.push({algorithmId:()=>n,checksumConstructor:()=>e[n]})}return{addChecksumAlgorithm(r){t.push(r)},checksumAlgorithms(){return t}}},Wc=e=>{const t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t},Gc=e=>({setRetryStrategy(t){e.retryStrategy=t},retryStrategy(){return e.retryStrategy}}),Kc=e=>{const t={};return t.retryStrategy=e.retryStrategy(),t},Jc=e=>Object.assign(Vc(e),Gc(e)),Fd=null,qc=e=>Object.assign(Wc(e),Kc(e)),Xc=e=>{const t=e.httpAuthSchemes;let r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(s){const i=t.findIndex(o=>o.schemeId===s.schemeId);i===-1?t.push(s):t.splice(i,1,s)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},Qc=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),Yc=(e,t)=>{const r=Object.assign(Bc(e),Jc(e),zc(e),Xc(e));return t.forEach(n=>n.configure(r)),Object.assign(e,Hc(r),qc(r),jc(r),Qc(r))};class Zc extends vi{constructor(...[r]){const n=Lc(r||{});super(n);l(this,"config");this.initConfig=n;const s=So(n),i=Qe(s),o=Ei(i),a=xs(o),c=a,u=ti(c),f=yo(u),d=Yc(f,r?.extensions||[]);this.config=d,this.middlewareStack.use(Xs(this.config)),this.middlewareStack.use(Ps(this.config)),this.middlewareStack.use(Pi(this.config)),this.middlewareStack.use(Zs(this.config)),this.middlewareStack.use(N(this.config)),this.middlewareStack.use(G(this.config)),this.middlewareStack.use(be(this.config)),this.middlewareStack.use(Ls(this.config,{httpAuthSchemeParametersProvider:ho,identityProviderConfigProvider:async h=>new Bs({"aws.auth#sigv4":h.credentials})})),this.middlewareStack.use(Ws(this.config))}destroy(){super.destroy()}}const eu={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},es={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Ld(e,t,r){return{applyToStack:n=>{n.add(deserializerMiddleware(e,r),eu),n.add(serializerMiddleware(e,t),es)}}}function tu(e,t,r){e.__smithy_context?e.__smithy_context.features||(e.__smithy_context.features={}):e.__smithy_context={features:{}},e.__smithy_context.features[t]=r}const ru=async e=>{const t=e?.Bucket||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),au(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!ou(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},nu=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,su=/(\d+\.){3}\d+/,iu=/\.\./,Bd=/\./,Hd=/^(.+\.)?s3(-fips)?(\.dualstack)?[.-]([a-z0-9-]+)\./,ou=e=>nu.test(e)&&!su.test(e)&&!iu.test(e),au=e=>{const[t,r,n,,,s]=e.split(":"),i=t==="arn"&&e.split(":").length>=6,o=Boolean(i&&r&&n&&s);if(i&&!o)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return o},cu=(e,t,r)=>{const n=async()=>{const s=r[e]??r[t];return typeof s=="function"?s():s};return e==="credentialScope"||t==="CredentialScope"?async()=>{const s=typeof r.credentials=="function"?await r.credentials():r.credentials;return s?.credentialScope??s?.CredentialScope}:e==="accountId"||t==="AccountId"?async()=>{const s=typeof r.credentials=="function"?await r.credentials():r.credentials;return s?.accountId??s?.AccountId}:e==="endpoint"||t==="endpoint"?async()=>{if(r.isCustomEndpoint===!1)return;const s=await n();if(s&&typeof s=="object"){if("url"in s)return s.url.href;if("hostname"in s){const{protocol:i,hostname:o,port:a,path:c}=s;return`${i}//${o}${a?":"+a:""}${c}`}}return s}:n},uu=async(e,t,r,n)=>{if(!r.isCustomEndpoint){let o;r.serviceConfiguredEndpoint?o=await r.serviceConfiguredEndpoint():o=await Ir(r.serviceId),o&&(r.endpoint=()=>Promise.resolve(Nr(o)),r.isCustomEndpoint=!0)}const s=await du(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(s,n)},du=async(e,t,r)=>{const n={},s=t?.getEndpointParameterInstructions?.()||{};for(const[i,o]of Object.entries(s))switch(o.type){case"staticContextParams":n[i]=o.value;break;case"contextParams":n[i]=e[o.name];break;case"clientContextParams":case"builtInParams":n[i]=await cu(o.name,i,r)();break;case"operationContextParams":n[i]=o.get(e);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(o))}return Object.keys(s).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await ru(n),n},lu=({config:e,instructions:t})=>(r,n)=>async s=>{e.isCustomEndpoint&&tu(n,"ENDPOINT_OVERRIDE","N");const i=await uu(s.input,{getEndpointParameterInstructions(){return t}},{...e},n);n.endpointV2=i,n.authSchemes=i.properties?.authSchemes;const o=n.authSchemes?.[0];if(o){n.signing_region=o.signingRegion,n.signing_service=o.signingName;const c=Ae(n)?.selectedHttpAuthScheme?.httpAuthOption;c&&(c.signingProperties=Object.assign(c.signingProperties||{},{signing_region:o.signingRegion,signingRegion:o.signingRegion,signing_service:o.signingName,signingName:o.signingName,signingRegionSet:o.signingRegionSet},o.properties))}return r({...s})},fu={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:es.name},hu=(e,t)=>({applyToStack:r=>{r.addRelativeTo(lu({config:e,instructions:t}),fu)}}),rr="***SensitiveInformation***";function nr(e,t){if(t==null)return t;const r=D.of(e);if(r.getMergedTraits().sensitive)return rr;if(r.isListSchema()){if(!!r.getValueSchema().getMergedTraits().sensitive)return rr}else if(r.isMapSchema()){if(!!r.getKeySchema().getMergedTraits().sensitive||!!r.getValueSchema().getMergedTraits().sensitive)return rr}else if(r.isStructSchema()&&typeof t=="object"){const n=t,s={};for(const[i,o]of r.structIterator())n[i]!=null&&(s[i]=nr(o,n[i]));return s}return t}class ts{constructor(){l(this,"middlewareStack",nt());l(this,"schema")}static classBuilder(){return new pu}resolveMiddlewareWithContext(t,r,n,{middlewareFn:s,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,smithyContext:u,additionalContext:f,CommandCtor:d}){for(const g of s.bind(this)(d,t,r,n))this.middlewareStack.use(g);const h=t.concat(this.middlewareStack),{logger:p}=r,m={logger:p,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,[Ct]:{commandInstance:this,...u},...f},{requestHandler:y}=r;return h.resolve(g=>y.handle(g.request,n||{}),m)}}class pu{constructor(){l(this,"_init",()=>{});l(this,"_ep",{});l(this,"_middlewareFn",()=>[]);l(this,"_commandName","");l(this,"_clientName","");l(this,"_additionalContext",{});l(this,"_smithyContext",{});l(this,"_inputFilterSensitiveLog");l(this,"_outputFilterSensitiveLog");l(this,"_serializer",null);l(this,"_deserializer",null);l(this,"_operationSchema")}init(t){this._init=t}ep(t){return this._ep=t,this}m(t){return this._middlewareFn=t,this}s(t,r,n={}){return this._smithyContext={service:t,operation:r,...n},this}c(t={}){return this._additionalContext=t,this}n(t,r){return this._clientName=t,this._commandName=r,this}f(t=n=>n,r=n=>n){return this._inputFilterSensitiveLog=t,this._outputFilterSensitiveLog=r,this}ser(t){return this._serializer=t,this}de(t){return this._deserializer=t,this}sc(t){return this._operationSchema=t,this._smithyContext.operationSchema=t,this}build(){const t=this;let r;return r=class extends ts{constructor(...[s]){super();l(this,"input");l(this,"serialize",t._serializer);l(this,"deserialize",t._deserializer);this.input=s??{},t._init(this),this.schema=t._operationSchema}static getEndpointParameterInstructions(){return t._ep}resolveMiddleware(s,i,o){const a=t._operationSchema,c=a?.[4]??a?.input,u=a?.[5]??a?.output;return this.resolveMiddlewareWithContext(s,i,o,{CommandCtor:r,middlewareFn:t._middlewareFn,clientName:t._clientName,commandName:t._commandName,inputFilterSensitiveLog:t._inputFilterSensitiveLog??(a?nr.bind(null,c):f=>f),outputFilterSensitiveLog:t._outputFilterSensitiveLog??(a?nr.bind(null,u):f=>f),smithyContext:t._smithyContext,additionalContext:t._additionalContext})}}}}class Se extends $e{constructor(t){super(t),Object.setPrototypeOf(this,Se.prototype)}}class sr extends Se{constructor(r){super({name:"AccessDeniedException",$fault:"client",...r});l(this,"name","AccessDeniedException");l(this,"$fault","client");l(this,"error");Object.setPrototypeOf(this,sr.prototype),this.error=r.error}}class ir extends Se{constructor(r){super({name:"InternalServerException",$fault:"server",...r});l(this,"name","InternalServerException");l(this,"$fault","server");l(this,"error");Object.setPrototypeOf(this,ir.prototype),this.error=r.error}}class or extends Se{constructor(r){super({name:"TooManyRequestsError",$fault:"client",...r});l(this,"name","TooManyRequestsError");l(this,"$fault","client");l(this,"error");Object.setPrototypeOf(this,or.prototype),this.error=r.error}}class ar extends Se{constructor(r){super({name:"ValidationException",$fault:"client",...r});l(this,"name","ValidationException");l(this,"$fault","client");l(this,"error");Object.setPrototypeOf(this,ar.prototype),this.error=r.error}}const mu="AccessDeniedException",gu="AccessToken",yu="CreateOAuth2Token",Su="CreateOAuth2TokenRequest",wu="CreateOAuth2TokenRequestBody",Eu="CreateOAuth2TokenResponseBody",Tu="CreateOAuth2TokenResponse",bu="InternalServerException",Au="RefreshToken",Ru="TooManyRequestsError",Cu="ValidationException",rs="accessKeyId",ns="accessToken",cr="client",ss="clientId",is="codeVerifier",_u="code",fe="error",os="expiresIn",as="grantType",Iu="http",ur="httpError",cs="idToken",W="jsonName",wt="message",Et="refreshToken",us="redirectUri",Nu="server",ds="secretAccessKey",ls="sessionToken",fs="smithy.ts.sdk.synthetic.com.amazonaws.signin",Ou="tokenInput",Du="tokenOutput",hs="tokenType",B="com.amazonaws.signin";var ps=[0,B,Au,8,0],Pu=[-3,B,mu,{[fe]:cr},[fe,wt],[0,0]];q.for(B).registerError(Pu,sr);var Mu=[3,B,gu,8,[rs,ds,ls],[[0,{[W]:rs}],[0,{[W]:ds}],[0,{[W]:ls}]]],vu=[3,B,Su,0,[Ou],[[()=>xu,16]]],xu=[3,B,wu,0,[ss,as,_u,us,is,Et],[[0,{[W]:ss}],[0,{[W]:as}],0,[0,{[W]:us}],[0,{[W]:is}],[()=>ps,{[W]:Et}]]],ku=[3,B,Tu,0,[Du],[[()=>$u,16]]],$u=[3,B,Eu,0,[ns,hs,os,Et,cs],[[()=>Mu,{[W]:ns}],[0,{[W]:hs}],[1,{[W]:os}],[()=>ps,{[W]:Et}],[0,{[W]:cs}]]],Uu=[-3,B,bu,{[fe]:Nu,[ur]:500},[fe,wt],[0,0]];q.for(B).registerError(Uu,ir);var Fu=[-3,B,Ru,{[fe]:cr,[ur]:429},[fe,wt],[0,0]];q.for(B).registerError(Fu,or);var Lu=[-3,B,Cu,{[fe]:cr,[ur]:400},[fe,wt],[0,0]];q.for(B).registerError(Lu,ar);var zd="unit",Bu=[-3,fs,"SigninServiceException",0,[],[]];q.for(fs).registerError(Bu,Se);var Hu=[9,B,yu,{[Iu]:["POST","/v1/token",200]},()=>vu,()=>ku];class zu extends ts.classBuilder().ep(wo).m(function(t,r,n,s){return[hu(n,t.getEndpointParameterInstructions())]}).s("Signin","CreateOAuth2Token",{}).n("SigninClient","CreateOAuth2TokenCommand").sc(Hu).build(){}},915104:(z,C,w)=>{w.d(C,{m:()=>A});const A=M=>typeof ArrayBuffer=="function"&&M instanceof ArrayBuffer||Object.prototype.toString.call(M)==="[object ArrayBuffer]"},535262:(z,C,w)=>{w.d(C,{Z:()=>bt});var A=w(669604),M=w(201745);const b=(...R)=>async()=>{if(R.length===0)throw new M.m("No providers in chain");let P;for(const k of R)try{return await k()}catch(j){if(P=j,j?.tryNextLink)continue;throw j}throw P};var _=w(66221);function N(R){try{const P=new Set(Array.from(R.match(/([A-Z_]){3,}/g)??[]));return P.delete("CONFIG"),P.delete("CONFIG_PREFIX_SEPARATOR"),P.delete("ENV"),[...P].join(", ")}catch{return R}}const T=(R,P)=>async()=>{try{const k=R(process.env,P);if(k===void 0)throw new Error;return k}catch(k){throw new _.C(k.message||`Not found in ENV: ${N(R.toString())}`,{logger:P?.logger})}};var O=w(450610),G=w(650600);const Q=(R,{preferredFile:P="config",...k}={})=>async()=>{const j=(0,O.Bz)(k),{configFile:Ee,credentialsFile:Te}=await(0,G.p)(k),be=Te[j]||{},ae=Ee[j]||{},qe=P==="config"?{...be,...ae}:{...ae,...be};try{const Qe=R(qe,P==="config"?Ee:Te);if(Qe===void 0)throw new Error;return Qe}catch(Xe){throw new _.C(Xe.message||`Not found in config files w/ profile [${j}]: ${N(R.toString())}`,{logger:k.logger})}},K=R=>()=>Promise.resolve(R),Be=R=>typeof R=="function",He=R=>Be(R)?async()=>await R():K(R),bt=({environmentVariableSelector:R,configFileSelector:P,default:k},j={})=>{const{signingName:Ee,logger:Te}=j,be={signingName:Ee,logger:Te};return(0,A.B)(b(T(R,be),Q(P,j),He(k)))}},669604:(z,C,w)=>{w.d(C,{B:()=>A});const A=(M,b,_)=>{let N,T,O,G=!1;const Q=async()=>{T||(T=M());try{N=await T,O=!0,G=!1}finally{T=void 0}return N};return b===void 0?async K=>((!O||K?.forceRefresh)&&(N=await Q()),N):async K=>((!O||K?.forceRefresh)&&(N=await Q()),G?N:_&&!_(N)?(G=!0,N):(b(N)&&await Q(),N))}},586666:(z,C,w)=>{w.d(C,{D:()=>M});function A(b){const _={};if(b=b.replace(/^\?/,""),b)for(const N of b.split("&")){let[T,O=null]=N.split("=");T=decodeURIComponent(T),O&&(O=decodeURIComponent(O)),T in _?Array.isArray(_[T])?_[T].push(O):_[T]=[_[T],O]:_[T]=O}return _}const M=b=>{if(typeof b=="string")return M(new URL(b));const{hostname:_,pathname:N,port:T,protocol:O,search:G}=b;let Q;return G&&(Q=A(G)),{hostname:_,port:T?parseInt(T):void 0,protocol:O,path:N,query:Q}}},195903:(z,C,w)=>{w.d(C,{Q:()=>_,s:()=>N});var A=w(915104),M=w(320181),b=w.n(M);const _=(T,O=0,G=T.byteLength-O)=>{if(!(0,A.m)(T))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof T} (${T})`);return M.Buffer.from(T,O,G)},N=(T,O)=>{if(typeof T!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof T} (${T})`);return O?M.Buffer.from(T,O):M.Buffer.from(T)}},425294:(z,C,w)=>{w.d(C,{a:()=>M});var A=w(195903);const M=b=>{const _=(0,A.s)(b,"utf8");return new Uint8Array(_.buffer,_.byteOffset,_.byteLength/Uint8Array.BYTES_PER_ELEMENT)}},399163:(z,C,w)=>{w.d(C,{P:()=>M});var A=w(195903);const M=b=>{if(typeof b=="string")return b;if(typeof b!="object"||typeof b.byteOffset!="number"||typeof b.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return(0,A.Q)(b.buffer,b.byteOffset,b.byteLength).toString("utf8")}}};

import{b as gn}from"./chunk-2F3NDXUU.js";import{Ca as rn,Ia as $e,Na as ln,Pb as _e,Qb as un,Ua as sn,Xc as dn,Y as nn,Yc as fn,ac as cn,ba as tn,bd as J,c as ye,d as Ne,db as an,j as He,k as Oe,od as pn,p as en,pa as on,tb as xe}from"./chunk-M3U674VW.js";var Pn=ye(Ne(),1),d=ye(Ne(),1),De=(0,d.createContext)(null);De.displayName="PanelGroupContext";var M={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},We=10,re=d.useLayoutEffect,mn=Pn.useId,Wn=typeof mn=="function"?mn:()=>null,Vn=0;function Ve(e=null){let n=Wn(),t=(0,d.useRef)(e||n||null);return t.current===null&&(t.current=""+Vn++),e??t.current}function In({children:e,className:n="",collapsedSize:t,collapsible:o,defaultSize:i,forwardedRef:r,id:l,maxSize:s,minSize:a,onCollapse:m,onExpand:I,onResize:c,order:u,style:z,tagName:h="div",...w}){let g=(0,d.useContext)(De);if(g===null)throw Error("Panel components must be rendered within a PanelGroup container");let{collapsePanel:v,expandPanel:L,getPanelSize:N,getPanelStyle:$,groupId:X,isPanelCollapsed:R,reevaluatePanelConstraints:C,registerPanel:W,resizePanel:Y,unregisterPanel:U}=g,G=Ve(l),k=(0,d.useRef)({callbacks:{onCollapse:m,onExpand:I,onResize:c},constraints:{collapsedSize:t,collapsible:o,defaultSize:i,maxSize:s,minSize:a},id:G,idIsFromProps:l!==void 0,order:u});(0,d.useRef)({didLogMissingDefaultSizeWarning:!1}),re(()=>{let{callbacks:F,constraints:_}=k.current,T={..._};k.current.id=G,k.current.idIsFromProps=l!==void 0,k.current.order=u,F.onCollapse=m,F.onExpand=I,F.onResize=c,_.collapsedSize=t,_.collapsible=o,_.defaultSize=i,_.maxSize=s,_.minSize=a,(T.collapsedSize!==_.collapsedSize||T.collapsible!==_.collapsible||T.maxSize!==_.maxSize||T.minSize!==_.minSize)&&C(k.current,T)}),re(()=>{let F=k.current;return W(F),()=>{U(F)}},[u,G,W,U]),(0,d.useImperativeHandle)(r,()=>({collapse:()=>{v(k.current)},expand:F=>{L(k.current,F)},getId(){return G},getSize(){return N(k.current)},isCollapsed(){return R(k.current)},isExpanded(){return!R(k.current)},resize:F=>{Y(k.current,F)}}),[v,L,N,R,G,Y]);let te=$(k.current,i);return(0,d.createElement)(h,{...w,children:e,className:n,id:G,style:{...te,...z},[M.groupId]:X,[M.panel]:"",[M.panelCollapsible]:o||void 0,[M.panelId]:G,[M.panelSize]:parseFloat(""+te.flexGrow).toFixed(1)})}var qe=(0,d.forwardRef)((e,n)=>(0,d.createElement)(In,{...e,forwardedRef:n}));In.displayName="Panel";qe.displayName="forwardRef(Panel)";var qn;function Xn(){return qn}var Ke=null,Zn=!0,Ce=-1,Q=null;function jn(e,n){if(n){let t=(n&Rn)!==0,o=(n&Ln)!==0,i=(n&An)!==0,r=(n&Mn)!==0;if(t)return i?"se-resize":r?"ne-resize":"e-resize";if(o)return i?"sw-resize":r?"nw-resize":"w-resize";if(i)return"s-resize";if(r)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function Jn(){Q!==null&&(document.head.removeChild(Q),Ke=null,Q=null,Ce=-1)}function Fe(e,n){var t,o;if(!Zn)return;let i=jn(e,n);if(Ke!==i){if(Ke=i,Q===null){Q=document.createElement("style");let l=Xn();l&&Q.setAttribute("nonce",l),document.head.appendChild(Q)}if(Ce>=0){var r;(r=Q.sheet)===null||r===void 0||r.removeRule(Ce)}Ce=(t=(o=Q.sheet)===null||o===void 0?void 0:o.insertRule(`*{cursor: ${i} !important;}`))!==null&&t!==void 0?t:-1}}function Cn(e){return e.type==="keydown"}function wn(e){return e.type.startsWith("pointer")}function En(e){return e.type.startsWith("mouse")}function Re(e){if(wn(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(En(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function Yn(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function Qn(e,n,t){return t?e.x<n.x+n.width&&e.x+e.width>n.x&&e.y<n.y+n.height&&e.y+e.height>n.y:e.x<=n.x+n.width&&e.x+e.width>=n.x&&e.y<=n.y+n.height&&e.y+e.height>=n.y}function On(e,n){if(e===n)throw new Error("Cannot compare node with itself");let t={a:xn(e),b:xn(n)},o;for(;t.a.at(-1)===t.b.at(-1);)e=t.a.pop(),n=t.b.pop(),o=e;S(o,"Stacking order can only be calculated for elements with a common ancestor");let i={a:yn(hn(t.a)),b:yn(hn(t.b))};if(i.a===i.b){let r=o.childNodes,l={a:t.a.at(-1),b:t.b.at(-1)},s=r.length;for(;s--;){let a=r[s];if(a===l.a)return 1;if(a===l.b)return-1}}return Math.sign(i.a-i.b)}var et=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function nt(e){var n;let t=getComputedStyle((n=Dn(e))!==null&&n!==void 0?n:e).display;return t==="flex"||t==="inline-flex"}function tt(e){let n=getComputedStyle(e);return!!(n.position==="fixed"||n.zIndex!=="auto"&&(n.position!=="static"||nt(e))||+n.opacity<1||"transform"in n&&n.transform!=="none"||"webkitTransform"in n&&n.webkitTransform!=="none"||"mixBlendMode"in n&&n.mixBlendMode!=="normal"||"filter"in n&&n.filter!=="none"||"webkitFilter"in n&&n.webkitFilter!=="none"||"isolation"in n&&n.isolation==="isolate"||et.test(n.willChange)||n.webkitOverflowScrolling==="touch")}function hn(e){let n=e.length;for(;n--;){let t=e[n];if(S(t,"Missing node"),tt(t))return t}return null}function yn(e){return e&&Number(getComputedStyle(e).zIndex)||0}function xn(e){let n=[];for(;e;)n.push(e),e=Dn(e);return n}function Dn(e){let{parentNode:n}=e;return n&&n instanceof ShadowRoot?n.host:n}var Rn=1,Ln=2,An=4,Mn=8,ot=Yn()==="coarse",q=[],ce=!1,ne=new Map,Le=new Map,be=new Set;function rt(e,n,t,o,i){var r;let{ownerDocument:l}=n,s={direction:t,element:n,hitAreaMargins:o,setResizeHandlerState:i},a=(r=ne.get(l))!==null&&r!==void 0?r:0;return ne.set(l,a+1),be.add(s),we(),function(){var I;Le.delete(e),be.delete(s);let c=(I=ne.get(l))!==null&&I!==void 0?I:1;if(ne.set(l,c-1),we(),c===1&&ne.delete(l),q.includes(s)){let u=q.indexOf(s);u>=0&&q.splice(u,1),Ze(),i("up",!0,null)}}}function it(e){let{target:n}=e,{x:t,y:o}=Re(e);ce=!0,Xe({target:n,x:t,y:o}),we(),q.length>0&&(Ee("down",e),e.preventDefault(),kn(n)||e.stopImmediatePropagation())}function Ge(e){let{x:n,y:t}=Re(e);if(ce&&e.buttons===0&&(ce=!1,Ee("up",e)),!ce){let{target:o}=e;Xe({target:o,x:n,y:t})}Ee("move",e),Ze(),q.length>0&&e.preventDefault()}function Te(e){let{target:n}=e,{x:t,y:o}=Re(e);Le.clear(),ce=!1,q.length>0&&(e.preventDefault(),kn(n)||e.stopImmediatePropagation()),Ee("up",e),Xe({target:n,x:t,y:o}),Ze(),we()}function kn(e){let n=e;for(;n;){if(n.hasAttribute(M.resizeHandle))return!0;n=n.parentElement}return!1}function Xe({target:e,x:n,y:t}){q.splice(0);let o=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(o=e),be.forEach(i=>{let{element:r,hitAreaMargins:l}=i,s=r.getBoundingClientRect(),{bottom:a,left:m,right:I,top:c}=s,u=ot?l.coarse:l.fine;if(n>=m-u&&n<=I+u&&t>=c-u&&t<=a+u){if(o!==null&&document.contains(o)&&r!==o&&!r.contains(o)&&!o.contains(r)&&On(o,r)>0){let h=o,w=!1;for(;h&&!h.contains(r);){if(Qn(h.getBoundingClientRect(),s,!0)){w=!0;break}h=h.parentElement}if(w)return}q.push(i)}})}function Be(e,n){Le.set(e,n)}function Ze(){let e=!1,n=!1;q.forEach(o=>{let{direction:i}=o;i==="horizontal"?e=!0:n=!0});let t=0;Le.forEach(o=>{t|=o}),e&&n?Fe("intersection",t):e?Fe("horizontal",t):n?Fe("vertical",t):Jn()}var Ue=new AbortController;function we(){Ue.abort(),Ue=new AbortController;let e={capture:!0,signal:Ue.signal};be.size&&(ce?(q.length>0&&ne.forEach((n,t)=>{let{body:o}=t;n>0&&(o.addEventListener("contextmenu",Te,e),o.addEventListener("pointerleave",Ge,e),o.addEventListener("pointermove",Ge,e))}),ne.forEach((n,t)=>{let{body:o}=t;o.addEventListener("pointerup",Te,e),o.addEventListener("pointercancel",Te,e)})):ne.forEach((n,t)=>{let{body:o}=t;n>0&&(o.addEventListener("pointerdown",it,e),o.addEventListener("pointermove",Ge,e))}))}function Ee(e,n){be.forEach(t=>{let{setResizeHandlerState:o}=t,i=q.includes(t);o(e,i,n)})}function lt(){let[e,n]=(0,d.useState)(0);return(0,d.useCallback)(()=>n(t=>t+1),[])}function S(e,n){if(!e)throw console.error(n),Error(n)}function ie(e,n,t=We){return e.toFixed(t)===n.toFixed(t)?0:e>n?1:-1}function O(e,n,t=We){return ie(e,n,t)===0}function K(e,n,t){return ie(e,n,t)===0}function st(e,n,t){if(e.length!==n.length)return!1;for(let o=0;o<e.length;o++){let i=e[o],r=n[o];if(!K(i,r,t))return!1}return!0}function ue({panelConstraints:e,panelIndex:n,size:t}){let o=e[n];S(o!=null,`Panel constraints not found for index ${n}`);let{collapsedSize:i=0,collapsible:r,maxSize:l=100,minSize:s=0}=o;if(ie(t,s)<0)if(r){let a=(i+s)/2;ie(t,a)<0?t=i:t=s}else t=s;return t=Math.min(l,t),t=parseFloat(t.toFixed(We)),t}function ze({delta:e,initialLayout:n,panelConstraints:t,pivotIndices:o,prevLayout:i,trigger:r}){if(K(e,0))return n;let l=[...n],[s,a]=o;S(s!=null,"Invalid first pivot index"),S(a!=null,"Invalid second pivot index");let m=0;if(r==="keyboard"){{let c=e<0?a:s,u=t[c];S(u,`Panel constraints not found for index ${c}`);let{collapsedSize:z=0,collapsible:h,minSize:w=0}=u;if(h){let g=n[c];if(S(g!=null,`Previous layout not found for panel index ${c}`),K(g,z)){let v=w-g;ie(v,Math.abs(e))>0&&(e=e<0?0-v:v)}}}{let c=e<0?s:a,u=t[c];S(u,`No panel constraints found for index ${c}`);let{collapsedSize:z=0,collapsible:h,minSize:w=0}=u;if(h){let g=n[c];if(S(g!=null,`Previous layout not found for panel index ${c}`),K(g,w)){let v=g-z;ie(v,Math.abs(e))>0&&(e=e<0?0-v:v)}}}}{let c=e<0?1:-1,u=e<0?a:s,z=0;for(;;){let w=n[u];S(w!=null,`Previous layout not found for panel index ${u}`);let v=ue({panelConstraints:t,panelIndex:u,size:100})-w;if(z+=v,u+=c,u<0||u>=t.length)break}let h=Math.min(Math.abs(e),Math.abs(z));e=e<0?0-h:h}{let u=e<0?s:a;for(;u>=0&&u<t.length;){let z=Math.abs(e)-Math.abs(m),h=n[u];S(h!=null,`Previous layout not found for panel index ${u}`);let w=h-z,g=ue({panelConstraints:t,panelIndex:u,size:w});if(!K(h,g)&&(m+=h-g,l[u]=g,m.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?u--:u++}}if(st(i,l))return i;{let c=e<0?a:s,u=n[c];S(u!=null,`Previous layout not found for panel index ${c}`);let z=u+m,h=ue({panelConstraints:t,panelIndex:c,size:z});if(l[c]=h,!K(h,z)){let w=z-h,v=e<0?a:s;for(;v>=0&&v<t.length;){let L=l[v];S(L!=null,`Previous layout not found for panel index ${v}`);let N=L+w,$=ue({panelConstraints:t,panelIndex:v,size:N});if(K(L,$)||(w-=$-L,l[v]=$),K(w,0))break;e>0?v--:v++}}}let I=l.reduce((c,u)=>u+c,0);return K(I,100)?l:i}function at({layout:e,panelsArray:n,pivotIndices:t}){let o=0,i=100,r=0,l=0,s=t[0];S(s!=null,"No pivot index found"),n.forEach((c,u)=>{let{constraints:z}=c,{maxSize:h=100,minSize:w=0}=z;u===s?(o=w,i=h):(r+=w,l+=h)});let a=Math.min(i,100-r),m=Math.max(o,100-l),I=e[s];return{valueMax:a,valueMin:m,valueNow:I}}function Se(e,n=document){return Array.from(n.querySelectorAll(`[${M.resizeHandleId}][data-panel-group-id="${e}"]`))}function Nn(e,n,t=document){let i=Se(e,t).findIndex(r=>r.getAttribute(M.resizeHandleId)===n);return i??null}function Hn(e,n,t){let o=Nn(e,n,t);return o!=null?[o,o+1]:[-1,-1]}function ut(e){return e instanceof HTMLElement?!0:typeof e=="object"&&e!==null&&"tagName"in e&&"getAttribute"in e}function $n(e,n=document){if(ut(n)&&n.dataset.panelGroupId==e)return n;let t=n.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return t||null}function Ae(e,n=document){let t=n.querySelector(`[${M.resizeHandleId}="${e}"]`);return t||null}function ct(e,n,t,o=document){var i,r,l,s;let a=Ae(n,o),m=Se(e,o),I=a?m.indexOf(a):-1,c=(i=(r=t[I])===null||r===void 0?void 0:r.id)!==null&&i!==void 0?i:null,u=(l=(s=t[I+1])===null||s===void 0?void 0:s.id)!==null&&l!==void 0?l:null;return[c,u]}function dt({committedValuesRef:e,eagerValuesRef:n,groupId:t,layout:o,panelDataArray:i,panelGroupElement:r,setLayout:l}){(0,d.useRef)({didWarnAboutMissingResizeHandle:!1}),re(()=>{if(!r)return;let s=Se(t,r);for(let a=0;a<i.length-1;a++){let{valueMax:m,valueMin:I,valueNow:c}=at({layout:o,panelsArray:i,pivotIndices:[a,a+1]}),u=s[a];if(u!=null){let z=i[a];S(z,`No panel data found for index "${a}"`),u.setAttribute("aria-controls",z.id),u.setAttribute("aria-valuemax",""+Math.round(m)),u.setAttribute("aria-valuemin",""+Math.round(I)),u.setAttribute("aria-valuenow",c!=null?""+Math.round(c):"")}}return()=>{s.forEach((a,m)=>{a.removeAttribute("aria-controls"),a.removeAttribute("aria-valuemax"),a.removeAttribute("aria-valuemin"),a.removeAttribute("aria-valuenow")})}},[t,o,i,r]),(0,d.useEffect)(()=>{if(!r)return;let s=n.current;S(s,"Eager values not found");let{panelDataArray:a}=s,m=$n(t,r);S(m!=null,`No group found for id "${t}"`);let I=Se(t,r);S(I,`No resize handles found for group id "${t}"`);let c=I.map(u=>{let z=u.getAttribute(M.resizeHandleId);S(z,"Resize handle element has no handle id attribute");let[h,w]=ct(t,z,a,r);if(h==null||w==null)return()=>{};let g=v=>{if(!v.defaultPrevented)switch(v.key){case"Enter":{v.preventDefault();let L=a.findIndex(N=>N.id===h);if(L>=0){let N=a[L];S(N,`No panel data found for index ${L}`);let $=o[L],{collapsedSize:X=0,collapsible:R,minSize:C=0}=N.constraints;if($!=null&&R){let W=ze({delta:K($,X)?C-X:X-$,initialLayout:o,panelConstraints:a.map(Y=>Y.constraints),pivotIndices:Hn(t,z,r),prevLayout:o,trigger:"keyboard"});o!==W&&l(W)}}break}}};return u.addEventListener("keydown",g),()=>{u.removeEventListener("keydown",g)}});return()=>{c.forEach(u=>u())}},[r,e,n,t,o,i,l])}function zn(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==n[t])return!1;return!0}function _n(e,n){let t=e==="horizontal",{x:o,y:i}=Re(n);return t?o:i}function ft(e,n,t,o,i){let r=t==="horizontal",l=Ae(n,i);S(l,`No resize handle element found for id "${n}"`);let s=l.getAttribute(M.groupId);S(s,"Resize handle element has no group id attribute");let{initialCursorPosition:a}=o,m=_n(t,e),I=$n(s,i);S(I,`No group element found for id "${s}"`);let c=I.getBoundingClientRect(),u=r?c.width:c.height;return(m-a)/u*100}function pt(e,n,t,o,i,r){if(Cn(e)){let l=t==="horizontal",s=0;e.shiftKey?s=100:i!=null?s=i:s=10;let a=0;switch(e.key){case"ArrowDown":a=l?0:s;break;case"ArrowLeft":a=l?-s:0;break;case"ArrowRight":a=l?s:0;break;case"ArrowUp":a=l?0:-s;break;case"End":a=100;break;case"Home":a=-100;break}return a}else return o==null?0:ft(e,n,t,o,r)}function gt({panelDataArray:e}){let n=Array(e.length),t=e.map(r=>r.constraints),o=0,i=100;for(let r=0;r<e.length;r++){let l=t[r];S(l,`Panel constraints not found for index ${r}`);let{defaultSize:s}=l;s!=null&&(o++,n[r]=s,i-=s)}for(let r=0;r<e.length;r++){let l=t[r];S(l,`Panel constraints not found for index ${r}`);let{defaultSize:s}=l;if(s!=null)continue;let a=e.length-o,m=i/a;o++,n[r]=m,i-=m}return n}function se(e,n,t){n.forEach((o,i)=>{let r=e[i];S(r,`Panel data not found for index ${i}`);let{callbacks:l,constraints:s,id:a}=r,{collapsedSize:m=0,collapsible:I}=s,c=t[a];if(c==null||o!==c){t[a]=o;let{onCollapse:u,onExpand:z,onResize:h}=l;h&&h(o,c),I&&(u||z)&&(z&&(c==null||O(c,m))&&!O(o,m)&&z(),u&&(c==null||!O(c,m))&&O(o,m)&&u())}})}function Ie(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!=n[t])return!1;return!0}function mt({defaultSize:e,dragState:n,layout:t,panelData:o,panelIndex:i,precision:r=3}){let l=t[i],s;return l==null?s=e!=null?e.toPrecision(r):"1":o.length===1?s="1":s=l.toPrecision(r),{flexBasis:0,flexGrow:s,flexShrink:1,overflow:"hidden",pointerEvents:n!==null?"none":void 0}}function ht(e,n=10){let t=null;return(...i)=>{t!==null&&clearTimeout(t),t=setTimeout(()=>{e(...i)},n)}}function vn(e){try{if(typeof localStorage<"u")e.getItem=n=>localStorage.getItem(n),e.setItem=(n,t)=>{localStorage.setItem(n,t)};else throw new Error("localStorage not supported in this environment")}catch(n){console.error(n),e.getItem=()=>null,e.setItem=()=>{}}}function Fn(e){return`react-resizable-panels:${e}`}function Gn(e){return e.map(n=>{let{constraints:t,id:o,idIsFromProps:i,order:r}=n;return i?o:r?`${r}:${JSON.stringify(t)}`:JSON.stringify(t)}).sort((n,t)=>n.localeCompare(t)).join(",")}function Tn(e,n){try{let t=Fn(e),o=n.getItem(t);if(o){let i=JSON.parse(o);if(typeof i=="object"&&i!=null)return i}}catch{}return null}function yt(e,n,t){var o,i;let r=(o=Tn(e,t))!==null&&o!==void 0?o:{},l=Gn(n);return(i=r[l])!==null&&i!==void 0?i:null}function xt(e,n,t,o,i){var r;let l=Fn(e),s=Gn(n),a=(r=Tn(e,i))!==null&&r!==void 0?r:{};a[s]={expandToSizes:Object.fromEntries(t.entries()),layout:o};try{i.setItem(l,JSON.stringify(a))}catch(m){console.error(m)}}function bn({layout:e,panelConstraints:n}){let t=[...e],o=t.reduce((r,l)=>r+l,0);if(t.length!==n.length)throw Error(`Invalid ${n.length} panel layout: ${t.map(r=>`${r}%`).join(", ")}`);if(!K(o,100)&&t.length>0)for(let r=0;r<n.length;r++){let l=t[r];S(l!=null,`No layout data found for index ${r}`);let s=100/o*l;t[r]=s}let i=0;for(let r=0;r<n.length;r++){let l=t[r];S(l!=null,`No layout data found for index ${r}`);let s=ue({panelConstraints:n,panelIndex:r,size:l});l!=s&&(i+=l-s,t[r]=s)}if(!K(i,0))for(let r=0;r<n.length;r++){let l=t[r];S(l!=null,`No layout data found for index ${r}`);let s=l+i,a=ue({panelConstraints:n,panelIndex:r,size:s});if(l!==a&&(i-=a-l,t[r]=a,K(i,0)))break}return t}var zt=100,ve={getItem:e=>(vn(ve),ve.getItem(e)),setItem:(e,n)=>{vn(ve),ve.setItem(e,n)}},Sn={};function Bn({autoSaveId:e=null,children:n,className:t="",direction:o,forwardedRef:i,id:r=null,onLayout:l=null,keyboardResizeBy:s=null,storage:a=ve,style:m,tagName:I="div",...c}){let u=Ve(r),z=(0,d.useRef)(null),[h,w]=(0,d.useState)(null),[g,v]=(0,d.useState)([]),L=lt(),N=(0,d.useRef)({}),$=(0,d.useRef)(new Map),X=(0,d.useRef)(0),R=(0,d.useRef)({autoSaveId:e,direction:o,dragState:h,id:u,keyboardResizeBy:s,onLayout:l,storage:a}),C=(0,d.useRef)({layout:g,panelDataArray:[],panelDataArrayChanged:!1});(0,d.useRef)({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),(0,d.useImperativeHandle)(i,()=>({getId:()=>R.current.id,getLayout:()=>{let{layout:f}=C.current;return f},setLayout:f=>{let{onLayout:x}=R.current,{layout:P,panelDataArray:y}=C.current,p=bn({layout:f,panelConstraints:y.map(b=>b.constraints)});zn(P,p)||(v(p),C.current.layout=p,x&&x(p),se(y,p,N.current))}}),[]),re(()=>{R.current.autoSaveId=e,R.current.direction=o,R.current.dragState=h,R.current.id=u,R.current.onLayout=l,R.current.storage=a}),dt({committedValuesRef:R,eagerValuesRef:C,groupId:u,layout:g,panelDataArray:C.current.panelDataArray,setLayout:v,panelGroupElement:z.current}),(0,d.useEffect)(()=>{let{panelDataArray:f}=C.current;if(e){if(g.length===0||g.length!==f.length)return;let x=Sn[e];x==null&&(x=ht(xt,zt),Sn[e]=x);let P=[...f],y=new Map($.current);x(e,P,y,g,a)}},[e,g,a]),(0,d.useEffect)(()=>{});let W=(0,d.useCallback)(f=>{let{onLayout:x}=R.current,{layout:P,panelDataArray:y}=C.current;if(f.constraints.collapsible){let p=y.map(Z=>Z.constraints),{collapsedSize:b=0,panelSize:D,pivotIndices:H}=oe(y,f,P);if(S(D!=null,`Panel size not found for panel "${f.id}"`),!O(D,b)){$.current.set(f.id,D);let j=ae(y,f)===y.length-1?D-b:b-D,A=ze({delta:j,initialLayout:P,panelConstraints:p,pivotIndices:H,prevLayout:P,trigger:"imperative-api"});Ie(P,A)||(v(A),C.current.layout=A,x&&x(A),se(y,A,N.current))}}},[]),Y=(0,d.useCallback)((f,x)=>{let{onLayout:P}=R.current,{layout:y,panelDataArray:p}=C.current;if(f.constraints.collapsible){let b=p.map(V=>V.constraints),{collapsedSize:D=0,panelSize:H=0,minSize:Z=0,pivotIndices:j}=oe(p,f,y),A=x??Z;if(O(H,D)){let V=$.current.get(f.id),me=V!=null&&V>=A?V:A,ke=ae(p,f)===p.length-1?H-me:me-H,B=ze({delta:ke,initialLayout:y,panelConstraints:b,pivotIndices:j,prevLayout:y,trigger:"imperative-api"});Ie(y,B)||(v(B),C.current.layout=B,P&&P(B),se(p,B,N.current))}}},[]),U=(0,d.useCallback)(f=>{let{layout:x,panelDataArray:P}=C.current,{panelSize:y}=oe(P,f,x);return S(y!=null,`Panel size not found for panel "${f.id}"`),y},[]),G=(0,d.useCallback)((f,x)=>{let{panelDataArray:P}=C.current,y=ae(P,f);return mt({defaultSize:x,dragState:h,layout:g,panelData:P,panelIndex:y})},[h,g]),k=(0,d.useCallback)(f=>{let{layout:x,panelDataArray:P}=C.current,{collapsedSize:y=0,collapsible:p,panelSize:b}=oe(P,f,x);return S(b!=null,`Panel size not found for panel "${f.id}"`),p===!0&&O(b,y)},[]),te=(0,d.useCallback)(f=>{let{layout:x,panelDataArray:P}=C.current,{collapsedSize:y=0,collapsible:p,panelSize:b}=oe(P,f,x);return S(b!=null,`Panel size not found for panel "${f.id}"`),!p||ie(b,y)>0},[]),F=(0,d.useCallback)(f=>{let{panelDataArray:x}=C.current;x.push(f),x.sort((P,y)=>{let p=P.order,b=y.order;return p==null&&b==null?0:p==null?-1:b==null?1:p-b}),C.current.panelDataArrayChanged=!0,L()},[L]);re(()=>{if(C.current.panelDataArrayChanged){C.current.panelDataArrayChanged=!1;let{autoSaveId:f,onLayout:x,storage:P}=R.current,{layout:y,panelDataArray:p}=C.current,b=null;if(f){let H=yt(f,p,P);H&&($.current=new Map(Object.entries(H.expandToSizes)),b=H.layout)}b==null&&(b=gt({panelDataArray:p}));let D=bn({layout:b,panelConstraints:p.map(H=>H.constraints)});zn(y,D)||(v(D),C.current.layout=D,x&&x(D),se(p,D,N.current))}}),re(()=>{let f=C.current;return()=>{f.layout=[]}},[]);let _=(0,d.useCallback)(f=>{let x=!1,P=z.current;return P&&window.getComputedStyle(P,null).getPropertyValue("direction")==="rtl"&&(x=!0),function(p){p.preventDefault();let b=z.current;if(!b)return()=>null;let{direction:D,dragState:H,id:Z,keyboardResizeBy:j,onLayout:A}=R.current,{layout:V,panelDataArray:me}=C.current,{initialLayout:Pe}=H??{},ke=Hn(Z,f,b),B=pt(p,f,D,H,j,b),Ye=D==="horizontal";Ye&&x&&(B=-B);let Un=me.map(Kn=>Kn.constraints),he=ze({delta:B,initialLayout:Pe??V,panelConstraints:Un,pivotIndices:ke,prevLayout:V,trigger:Cn(p)?"keyboard":"mouse-or-touch"}),Qe=!Ie(V,he);(wn(p)||En(p))&&X.current!=B&&(X.current=B,!Qe&&B!==0?Ye?Be(f,B<0?Rn:Ln):Be(f,B<0?An:Mn):Be(f,0)),Qe&&(v(he),C.current.layout=he,A&&A(he),se(me,he,N.current))}},[]),T=(0,d.useCallback)((f,x)=>{let{onLayout:P}=R.current,{layout:y,panelDataArray:p}=C.current,b=p.map(V=>V.constraints),{panelSize:D,pivotIndices:H}=oe(p,f,y);S(D!=null,`Panel size not found for panel "${f.id}"`);let j=ae(p,f)===p.length-1?D-x:x-D,A=ze({delta:j,initialLayout:y,panelConstraints:b,pivotIndices:H,prevLayout:y,trigger:"imperative-api"});Ie(y,A)||(v(A),C.current.layout=A,P&&P(A),se(p,A,N.current))},[]),de=(0,d.useCallback)((f,x)=>{let{layout:P,panelDataArray:y}=C.current,{collapsedSize:p=0,collapsible:b}=x,{collapsedSize:D=0,collapsible:H,maxSize:Z=100,minSize:j=0}=f.constraints,{panelSize:A}=oe(y,f,P);A!=null&&(b&&H&&O(A,p)?O(p,D)||T(f,D):A<j?T(f,j):A>Z&&T(f,Z))},[T]),fe=(0,d.useCallback)((f,x)=>{let{direction:P}=R.current,{layout:y}=C.current;if(!z.current)return;let p=Ae(f,z.current);S(p,`Drag handle element not found for id "${f}"`);let b=_n(P,x);w({dragHandleId:f,dragHandleRect:p.getBoundingClientRect(),initialCursorPosition:b,initialLayout:y})},[]),pe=(0,d.useCallback)(()=>{w(null)},[]),Me=(0,d.useCallback)(f=>{let{panelDataArray:x}=C.current,P=ae(x,f);P>=0&&(x.splice(P,1),delete N.current[f.id],C.current.panelDataArrayChanged=!0,L())},[L]),le=(0,d.useMemo)(()=>({collapsePanel:W,direction:o,dragState:h,expandPanel:Y,getPanelSize:U,getPanelStyle:G,groupId:u,isPanelCollapsed:k,isPanelExpanded:te,reevaluatePanelConstraints:de,registerPanel:F,registerResizeHandle:_,resizePanel:T,startDragging:fe,stopDragging:pe,unregisterPanel:Me,panelGroupElement:z.current}),[W,h,o,Y,U,G,u,k,te,de,F,_,T,fe,pe,Me]),ge={display:"flex",flexDirection:o==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return(0,d.createElement)(De.Provider,{value:le},(0,d.createElement)(I,{...c,children:n,className:t,id:r,ref:z,style:{...ge,...m},[M.group]:"",[M.groupDirection]:o,[M.groupId]:u}))}var vt=(0,d.forwardRef)((e,n)=>(0,d.createElement)(Bn,{...e,forwardedRef:n}));Bn.displayName="PanelGroup";vt.displayName="forwardRef(PanelGroup)";function ae(e,n){return e.findIndex(t=>t===n||t.id===n.id)}function oe(e,n,t){let o=ae(e,n),r=o===e.length-1?[o-1,o]:[o,o+1],l=t[o];return{...n.constraints,panelSize:l,pivotIndices:r}}function bt({disabled:e,handleId:n,resizeHandler:t,panelGroupElement:o}){(0,d.useEffect)(()=>{if(e||t==null||o==null)return;let i=Ae(n,o);if(i==null)return;let r=l=>{if(!l.defaultPrevented)switch(l.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{l.preventDefault(),t(l);break}case"F6":{l.preventDefault();let s=i.getAttribute(M.groupId);S(s,`No group element found for id "${s}"`);let a=Se(s,o),m=Nn(s,n,o);S(m!==null,`No resize element found for id "${n}"`);let I=l.shiftKey?m>0?m-1:a.length-1:m+1<a.length?m+1:0;a[I].focus();break}}};return i.addEventListener("keydown",r),()=>{i.removeEventListener("keydown",r)}},[o,e,n,t])}function St({children:e=null,className:n="",disabled:t=!1,hitAreaMargins:o,id:i,onBlur:r,onClick:l,onDragging:s,onFocus:a,onPointerDown:m,onPointerUp:I,style:c={},tabIndex:u=0,tagName:z="div",...h}){var w,g;let v=(0,d.useRef)(null),L=(0,d.useRef)({onClick:l,onDragging:s,onPointerDown:m,onPointerUp:I});(0,d.useEffect)(()=>{L.current.onClick=l,L.current.onDragging=s,L.current.onPointerDown=m,L.current.onPointerUp=I});let N=(0,d.useContext)(De);if(N===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");let{direction:$,groupId:X,registerResizeHandle:R,startDragging:C,stopDragging:W,panelGroupElement:Y}=N,U=Ve(i),[G,k]=(0,d.useState)("inactive"),[te,F]=(0,d.useState)(!1),[_,T]=(0,d.useState)(null),de=(0,d.useRef)({state:G});re(()=>{de.current.state=G}),(0,d.useEffect)(()=>{if(t)T(null);else{let le=R(U);T(()=>le)}},[t,U,R]);let fe=(w=o?.coarse)!==null&&w!==void 0?w:15,pe=(g=o?.fine)!==null&&g!==void 0?g:5;return(0,d.useEffect)(()=>{if(t||_==null)return;let le=v.current;S(le,"Element ref not attached");let ge=!1;return rt(U,le,$,{coarse:fe,fine:pe},(x,P,y)=>{if(!P){k("inactive");return}switch(x){case"down":{k("drag"),ge=!1,S(y,'Expected event to be defined for "down" action'),C(U,y);let{onDragging:p,onPointerDown:b}=L.current;p?.(!0),b?.();break}case"move":{let{state:p}=de.current;ge=!0,p!=="drag"&&k("hover"),S(y,'Expected event to be defined for "move" action'),_(y);break}case"up":{k("hover"),W();let{onClick:p,onDragging:b,onPointerUp:D}=L.current;b?.(!1),D?.(),ge||p?.();break}}})},[fe,$,t,pe,R,U,_,C,W]),bt({disabled:t,handleId:U,resizeHandler:_,panelGroupElement:Y}),(0,d.createElement)(z,{...h,children:e,className:n,id:i,onBlur:()=>{F(!1),r?.()},onFocus:()=>{F(!0),a?.()},ref:v,role:"separator",style:{...{touchAction:"none",userSelect:"none"},...c},tabIndex:u,[M.groupDirection]:$,[M.groupId]:X,[M.resizeHandle]:"",[M.resizeHandleActive]:G==="drag"?"pointer":te?"keyboard":void 0,[M.resizeHandleEnabled]:!t,[M.resizeHandleId]:U,[M.resizeHandleState]:G})}St.displayName="PanelResizeHandle";var ee=ye(Ne()),E=ye(en()),Pt=Oe({resizeHandle:{position:"absolute",top:"0",right:"0",width:"100%",height:"10px",cursor:"ns-resize",zIndex:1,boxShadow:"0px -1px 1px  var(--vscode-editorWidget-border)"},resizePaneContainer:{width:"100%",position:"relative"},header:{display:"flex",justifyContent:"space-between",alignItems:"center"},ribbon:{width:"100%",display:"flex",flexDirection:"row","> *":{marginRight:"10px"},padding:"5px 0px"},designerDefinitionPaneTabs:{flex:1},tabContent:{...He.flex(1),width:"100%",height:"100%",display:"flex",...He.overflow("auto")},designerDefinitionPaneScript:{width:"100%",height:"100%",position:"relative"},issuesContainer:{width:"100%",height:"calc( 100% - 10px )",flexDirection:"column","> *":{marginBottom:"10px"},backgroundColor:"var(--vscode-editor-background)",padding:"5px",overflow:"hidden auto"},issuesRows:{display:"flex",lineHeight:"20px",padding:"5px","> *":{marginRight:"10px"},":hover":{backgroundColor:"var(--vscode-editor-selectionHighlightBackground)"},width:"100%"}}),je=25,It=10,Je=100;var Ht=(0,ee.forwardRef)(({script:e,themeKind:n,openInEditor:t,copyToClipboard:o,issues:i,onIssueClick:r,activeTab:l,setActiveTab:s,onClose:a},m)=>{let I=Pt(),c=(0,ee.useRef)(null),[u,z]=(0,ee.useState)(J.tableDesigner.maximizePanelSize),[h,w]=(0,ee.useState)((0,E.jsx)($e,{}));return(0,ee.useImperativeHandle)(m,()=>({openPanel:(g=je)=>{c.current?.isCollapsed()&&c.current.expand(g)},closePanel:()=>{c.current&&!c.current.isCollapsed()&&c.current.collapse()},togglePanel:(g=je)=>{c.current?.isCollapsed()?c.current.expand(g):c?.current?.collapse()},isCollapsed:()=>c.current?.isCollapsed()??!0}),[]),(0,E.jsxs)(qe,{collapsible:!0,minSize:It,ref:c,onResize:g=>{g===Je?(z(J.tableDesigner.maximizePanelSize),w((0,E.jsx)(rn,{}))):(z(J.tableDesigner.maximizePanelSize),w((0,E.jsx)($e,{})))},children:[(0,E.jsxs)("div",{className:I.header,children:[(0,E.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:(0,E.jsxs)(un,{size:"small",selectedValue:l,onTabSelect:(g,v)=>{s&&s(v.value)},children:[(0,E.jsx)(_e,{value:"script",children:J.schemaDesigner.definition},"script"),i&&i.length>0&&(0,E.jsx)(_e,{value:"issues",children:J.tableDesigner.issuesTabHeader(i.length)},"issues")]})}),(0,E.jsxs)(cn,{style:{gap:"3px"},children:[l==="script"&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(xe,{size:"small",appearance:"subtle",title:J.schemaDesigner.openInEditor,icon:(0,E.jsx)(an,{}),onClick:()=>t(e),children:J.schemaDesigner.openInEditor}),(0,E.jsx)(xe,{size:"small",appearance:"subtle",title:J.schemaDesigner.copy,icon:(0,E.jsx)(ln,{}),onClick:()=>o(e)})]}),(0,E.jsx)(xe,{size:"small",appearance:"subtle",onClick:()=>{c.current?.getSize()===Je?c.current?.resize(je):c.current?.resize(Je)},title:u,icon:h}),(0,E.jsx)(xe,{size:"small",appearance:"subtle",title:J.schemaDesigner.close,icon:(0,E.jsx)(sn,{}),onClick:()=>{c.current&&c.current.collapse(),a?.()}})]})]}),(0,E.jsxs)("div",{className:I.tabContent,children:[(!i||i.length===0||l==="script")&&(0,E.jsx)("div",{className:I.designerDefinitionPaneScript,children:(0,E.jsx)(gn,{height:"100%",width:"100%",language:"sql",theme:pn(n),value:e,options:{readOnly:!0}})}),l==="issues"&&i&&i.length>0&&(0,E.jsx)("div",{className:I.issuesContainer,children:(0,E.jsx)(dn,{navigationMode:"items",children:i.map((g,v)=>(0,E.jsx)(fn,{onAction:()=>r?.(g),children:(0,E.jsxs)("div",{className:I.issuesRows,children:[g.severity==="error"&&(0,E.jsx)(nn,{fontSize:20,color:"var(--vscode-errorForeground)"}),g.severity==="warning"&&(0,E.jsx)(on,{fontSize:20,color:"yellow"}),g.severity==="information"&&(0,E.jsx)(tn,{fontSize:20,color:"blue"}),g.description]})},`issue-${v}`))})})]})]})});export{qe as a,vt as b,St as c,Ht as d};

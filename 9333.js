"use strict";(self.webpackChunkechoapi_for_vscode=self.webpackChunkechoapi_for_vscode||[]).push([[9333],{43139:(e,n,t)=>{t.d(n,{aY:()=>u}),t(879666),t(875283);var i=t(364467),a=t(310467),r=t(354756),o=t.n(r),l=t(521234),s=t(716535),c=t(164394);const u=function(e){var n=(0,c.R7)((function(e){return e.updateSystemConfig})),t=(0,c.R7)((function(n){return n.systemConfig[e]})),r=(0,c.R7)((function(e){return e.systemConfig})),u=(0,l.A)(function(){var e=(0,a.A)(o().mark((function e(n){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{null===(t=window)||void 0===t||t.vscode.postMessage({action:"setSystemConfig",data:n})}catch(e){}case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),{wait:500}),d=u.run;return{columnSwitchConfig:t,onColumnSwitchConfig:function(t){var a=(0,s.Ay)(r,(function(n){n[e]=t}));n(a),d((0,i.A)({},e,t))}}};t(965995),t(196834)},594772:(e,n,t)=>{t.d(n,{Lc:()=>s,dK:()=>u,i0:()=>c});var i,a,r,o=t(457528),l=t(38267),s=l.default.div(i||(i=(0,o.A)(["\n  .beautify-input {\n    /* width: 120px; */\n    width: 100%;\n  }\n\n  .beautify-input-number {\n    width: 100%;\n  }\n\n  .beautify-select {\n    width: 100%;\n  }\n\n  .setting-desc {\n    color: var(--font-light-color);\n  }\n"]))),c=l.default.div(a||(a=(0,o.A)(["\n  flex: 1;\n  height: 0;\n  .monaco-wrapper{\n    width: 97%;\n  }\n"]))),u=l.default.div(r||(r=(0,o.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 7px;\n  .beautify-select-selector{\n    font-size: 12px !important;\n  }\n  .beautify-select .beautify-select-arrow{\n    font-size: 10px;\n  }\n"])))},899333:(e,n,t)=>{t.r(n),t.d(n,{default:()=>I});var i=t(364467),a=t(3453),r=t(296540),o=t(778291),l=t(614869),s=t(521234),c=t(302543),u=t(430269),d=t(899215),v=t(804350),f=t(43139),h=t(164394),m=t(960864),p=t(824629),g=t(476701),y=t(456734),b=t(892911),w=t(768645),j=t(123328),_=t(716535),O=t(445448),A=t(236492),x=t(938181),k=t(837457),C=t(362611),P=t(594772),q=t(474848);function S(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function D(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?S(Object(t),!0).forEach((function(n){(0,i.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):S(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const E=function(e){var n,t,i=(0,o.Bd)().t,s=(0,m.A)((function(e){return e.websocket2ConnectionPool})),u=(0,h.XX)((function(e){return e.apisActiveKey})),d=e||{},v=d.value,f=d.onChange,p=d.apisData,g=d.onChangeApisData,y=(0,l.A)(""),w=(0,a.A)(y,2),j=w[0],O=w[1];(0,r.useEffect)((function(){(0,c.includes)(["base64","hexadecimal"],null==v?void 0:v.mode)?O("binary"):O("")}),[O,v]);var S=function(e){var n=(0,_.Ay)(p,(function(n){n.msg_data=e}));g(n)};return(0,q.jsxs)(P.dK,{children:[(0,q.jsxs)(b.A,{align:"center",gap:12,children:[(0,q.jsxs)(A.A,{value:j||(null==v?void 0:v.mode),onChange:function(e){if("binary"===e)return O(e),void f(D(D({},v),{},{mode:"base64"}));O(""),f(D(D({},v),{},{mode:e}))},size:"small",style:{width:80},children:[(0,q.jsx)(A.A.Option,{value:"text",children:"Text"}),(0,q.jsx)(A.A.Option,{value:"json",children:"JSON"}),(0,q.jsx)(A.A.Option,{value:"binary",children:"Binary"})]}),"binary"===j&&(0,q.jsxs)(A.A,{size:"small",value:null==v?void 0:v.mode,onChange:function(e){return f(D(D({},v),{},{mode:e}))},style:{width:115},children:[(0,q.jsx)(A.A.Option,{value:"base64",children:"Base64"}),(0,q.jsx)(A.A.Option,{value:"hexadecimal",children:"Hexadecimal"})]})]}),(0,q.jsxs)(b.A,{align:"center",gap:12,children:[(0,q.jsx)(x.A,{checked:(0,c.isEqual)(null==p?void 0:p.ack,1),onChange:function(e){var n,t,i;t=null==e||null===(n=e.target)||void 0===n?void 0:n.checked,i=(0,_.Ay)(p,(function(e){e.ack=t?1:-1})),g(i)},children:"Ack"}),(0,q.jsx)(k.A,{style:{width:180,fontSize:12,height:26},value:(null==p?void 0:p.msg_data)||"",placeholder:i("ws.request.event_name"),onSelect:S,maxLength:1024,options:(0,c.filter)((0,c.map)(null==p||null===(n=p.request)||void 0===n||null===(n=n.event)||void 0===n?void 0:n.parameter,(function(e){return{value:null==e?void 0:e.key,label:null==e?void 0:e.key}})),(function(e){return""!==(0,c.trim)(null==e?void 0:e.value)})),onChange:S}),(0,q.jsx)(C.A,{type:"primary",size:"small",disabled:!((0,c.size)((0,c.trim)(null==v?void 0:v.raw))>0&&(0,c.isEqual)(null===(t=s[u])||void 0===t?void 0:t.status,"connect")),onClick:function(){var e;null===(e=window)||void 0===e||e.vscode.postMessage({action:"socketio_send",data:{target_id:u,msg:null==v?void 0:v.raw,type:null==v?void 0:v.mode,event:(null==p?void 0:p.msg_data)||"message",is_ack:(null==p?void 0:p.ack)||-1}})},children:i("ws.request.sent")})]})]})};var z=t(383599),T=t(63985);function B(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function F(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?B(Object(t),!0).forEach((function(n){(0,i.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):B(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const L=function(e){var n,t=(0,o.Bd)().t,i=d.A.Provider,a=e||{},l=a.value,s=a.onChange,u=function(e){s(F(F({},l),{},{message:e}))},v=(0,w.A)((function(e){var n,t,i=(null==l?void 0:l.active_id)||(null===(n=(0,c.head)(l.message))||void 0===n?void 0:n.param_id),a=(0,_.Ay)(l.message,(function(n){var a=(0,c.findIndex)(l.message,(function(n){return(0,c.isEqual)(n.param_id,e)}));if(a>-1&&n.splice(a,1),(0,c.isEqual)(i,e)){var r,o,s=(null===(r=n[a-1])||void 0===r?void 0:r.param_id)||(null===(o=(0,c.head)(n))||void 0===o?void 0:o.param_id);t=s}else t=null==l?void 0:l.active_id}));s(F(F({},l),{},{message:a,active_id:t}))})),f=function(e){var n=(0,c.map)(l.message,(function(n){var t;return(0,c.isEqual)(n.param_id,l.active_id||(null===(t=(0,c.head)(l.message))||void 0===t?void 0:t.param_id))?F(F({},n),{},{request:F({},e)}):n}));u(n)},h=(0,r.useMemo)((function(){return(0,c.find)(l.message,(function(e){return(0,c.isEqual)(e.param_id,l.active_id)}))||(0,c.head)(l.message)}),[l.message,l.active_id]);if(h)return(0,q.jsxs)(b.A,{gap:12,style:{height:"100%"},children:[(0,q.jsx)(T.A,{handleSelect:function(e){s(F(F({},l),{},{active_id:e}))},value:l.message,activeId:l.active_id||(null===(n=(0,c.head)(l.message))||void 0===n?void 0:n.param_id),handleEdit:function(e,n){var i=n.value,a=(0,c.cloneDeep)(null==l?void 0:l.message);(0,c.set)(a,e,F(F({},a[e]),{},{name:(null==i?void 0:i.trim())||t("supplement.msg")})),u(a)},handleAdd:function(){var e=(0,j.aL)(),n=(0,c.concat)(l.message,F(F({},z.ue),{},{param_id:e}));u(n)},handleRemove:v,addText:"Message"}),(0,q.jsx)(i,{value:{isDebugArea:!0},children:(0,q.jsxs)(b.A,{vertical:!0,gap:8,style:{height:"100%",flex:1,width:0},children:[(0,q.jsx)(P.i0,{className:"raw-editor-wrap",children:(0,q.jsx)(O.wz,{regularValueHeight:0,mode:h.request.mode,isParameter:!["json","xml"].includes(h.request.mode),value:h.request,onChange:f})}),(0,q.jsx)(E,{value:h.request,onChangeApisData:s,apisData:l,onChange:f})]})})]})};var X=t(43960),M=t(231058),R=t(273904),K=t(965995);const N=function(e){var n=(0,o.Bd)().t,t=e||{},i=t.value,a=t.readOnly,r=t.onChange,l=(0,K.A)().themeToken,s=(0,w.A)((function(e,n){var t=(0,_.Ay)(i,(function(t){t[e]=n}));r(t)})),u=[{key:"certificate_verification",title:n("ws.settings.certificate_verification"),desc:n("ws.settings.certificate_verification_tip"),children:(0,q.jsx)(X.A,{disabled:a,checked:(0,c.isEqual)(null==i?void 0:i.certificate_verification,1),onChange:function(e){return s("certificate_verification",e?1:-1)}})},{key:"socket_version",title:n("ws.settings.client"),desc:n("ws.settings.handshake_tip"),children:(0,q.jsxs)(A.A,{disabled:a,value:null==i?void 0:i.socket_version,onChange:function(e){return s("socket_version",e)},children:[(0,q.jsx)(A.A.Option,{value:"v2",children:"v2"}),(0,q.jsx)(A.A.Option,{value:"v3",children:"v3"}),(0,q.jsx)(A.A.Option,{value:"v4",children:"v4"})]})},{key:"shake_hands_path",title:n("ws.settings.handshake"),desc:n("ws.settings.handshake_tip"),children:(0,q.jsx)(R.pd,{maxLength:255,readOnly:a,value:(null==i?void 0:i.shake_hands_path)||"",onChange:function(e){var n;return s("shake_hands_path",(null==e||null===(n=e.target)||void 0===n?void 0:n.value)||"")}})},{key:"shake_hands_timeout",title:n("ws.settings.time_out"),desc:n("ws.settings.time_out_tip"),children:(0,q.jsx)(M.A,{readOnly:a,controls:!1,addonAfter:"ms",value:null==i?void 0:i.shake_hands_timeout,onChange:function(e){return s("shake_hands_timeout",e)}})}];return(0,q.jsx)(P.Lc,{$token:l,children:(0,q.jsx)(b.A,{style:{marginLeft:8},vertical:!0,gap:12,children:(0,c.map)(u,(function(e){return(0,q.jsx)(q.Fragment,{children:(0,q.jsxs)(b.A,{gap:12,align:"center",children:[(0,q.jsxs)(b.A,{flex:1,vertical:!0,children:[(0,q.jsx)("div",{className:"setting-title",children:e.title}),(0,q.jsx)("div",{className:"setting-desc",children:e.desc})]}),(0,q.jsx)(b.A,{flex:.1,style:{minWidth:120},align:"start",justify:"start",children:e.children})]},e.key)})}))})})};function Y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function H(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Y(Object(t),!0).forEach((function(n){(0,i.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Y(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const I=function(e){var n,t,b,w,j,_,O,A,x,k,C,P=e||{},S=P.value,D=P.onChange,E=P.readOnly,z=d.A.Provider,T=(S||{}).request,B=(0,h.XX)((function(e){return e.apisActiveKey})),F=(0,h.XX)((function(e){return e.apiDetailsData})),X=(0,h.xF)((function(e){return e.globalParams})),M=(0,m.A)((function(e){return e.websocket2ConnectionPool})),R=(0,l.A)({}),K=(0,a.A)(R,2),Y=K[0],I=K[1],$=((0,y.A)().updatePool,(0,o.Bd)().t),J=(0,f.aY)("request_header_column_switch"),V=J.columnSwitchConfig,W=J.onColumnSwitchConfig,G=(0,f.aY)("request_query_column_switch"),Q=G.columnSwitchConfig,U=G.onColumnSwitchConfig,Z=(0,f.aY)("request_cookie_column_switch"),ee=Z.columnSwitchConfig,ne=Z.onColumnSwitchConfig,te=(0,s.A)((function(e){var n;null===(n=window)||void 0===n||n.vscode.postMessage({action:"socketio_update_event",data:{target_id:B,parameter:e}})}),{wait:500}).run,ie=function(e,n){var t;(0,c.isEqual)(n,"event")&&(0,c.isEqual)(null==M||null===(t=M[B])||void 0===t?void 0:t.status,"connect")&&te(e),D(H(H({},S),{},{url:(0,c.isEqual)(n,"query")?(0,p.$R)(S.url,e):S.url,request:H(H({},S.request),{},(0,i.A)({},n,{parameter:e}))}))};(0,r.useEffect)((function(){var e=(0,g.bf)(F,(null==S?void 0:S.target_id)||""),n=(0,c.reverse)(e),t={header:[],query:[],body:[],restful:[],cookie:[]};(0,c.forEach)(n,(function(e){var n=(e||{}).request;n&&(0,c.forEach)((0,c.keys)(t),(function(i){var a;n[i]&&(t[i]=(0,c.concat)([],t[i],null===(a=n[i])||void 0===a||null===(a=a.parameter)||void 0===a?void 0:a.map((function(n){return H(H({},n),{},{target_id:null==e?void 0:e.target_id})}))))}))})),I(t)}),[null==S?void 0:S.target_id,F]);var ae=[{key:"send",label:$("ws.request.message"),children:(0,q.jsx)(z,{value:{isDebugArea:!0},children:(0,q.jsx)(L,{value:S,onChange:D})})},{key:"event",label:$("ws.request.events"),children:(0,q.jsx)(v.A,{tabType:"socketio",dataSource:null==T||null===(n=T.event)||void 0===n?void 0:n.parameter,onChange:function(e){return ie(e,"event")}}),countParams:{dataSource:null==T||null===(t=T.event)||void 0===t?void 0:t.parameter,customCalcFun:g.gf}},{key:"header",label:$("ws.request.headers"),children:(0,q.jsx)(v.A,{target_type:"socketio",tabType:"header",globalParams:null==X||null===(b=X.header)||void 0===b?void 0:b.parameter,folderParams:null==Y?void 0:Y.header,readOnly:E,dataSource:null==T||null===(w=T.header)||void 0===w?void 0:w.parameter,onChange:function(e){return ie(e,"header")},columnSwitchConfig:V,onColumnSwitchConfig:W}),countParams:{dataSource:null==T||null===(j=T.header)||void 0===j?void 0:j.parameter,customCalcFun:g.gf}},{key:"params",label:$("ws.request.params"),children:(0,q.jsx)(v.A,{tabType:"query",globalParams:null==X||null===(_=X.query)||void 0===_?void 0:_.parameter,folderParams:null==Y?void 0:Y.query,readOnly:E,dataSource:null==T||null===(O=T.query)||void 0===O?void 0:O.parameter,onChange:function(e){return ie(e,"query")},columnSwitchConfig:Q,onColumnSwitchConfig:U}),countParams:{dataSource:null==T||null===(A=T.query)||void 0===A?void 0:A.parameter,customCalcFun:g.gf}},{key:"cookie",label:"Cookie",children:(0,q.jsx)(v.A,{tabType:"cookie",globalParams:null==X||null===(x=X.cookie)||void 0===x?void 0:x.parameter,folderParams:null==Y?void 0:Y.cookie,readOnly:E,dataSource:null==T||null===(k=T.cookie)||void 0===k?void 0:k.parameter,onChange:function(e){return ie(e,"cookie")},columnSwitchConfig:ee,onColumnSwitchConfig:ne}),countParams:{dataSource:null==T||null===(C=T.cookie)||void 0===C?void 0:C.parameter,customCalcFun:g.gf}},{key:"setting",label:$("ws.request.settings"),children:(0,q.jsx)(N,{readOnly:E,onChange:function(e){D(H(H({},S),{},{config:H({},e)}))},value:null==S?void 0:S.config})}];return(0,q.jsx)(u.A,{items:ae})}}}]);
import{Ad as N,ad as y,c as f,d as R,dd as x,ed as P,fd as V,g as C,gd as T,hd as K,id as q,kd as E,ld as L,md as k,nd as B,p as g,s as W,ud as I,zd as A}from"./chunk-M3U674VW.js";var e=f(R());var w=f(g()),U=A.vscodeApiInstance,m=(0,e.createContext)(void 0);function re({children:s}){let d=U,t=k.getInstance(d),[u,r]=(0,e.useState)(1),[c,a]=(0,e.useState)({}),[b,z]=(0,e.useState)(!1),[O,G]=(0,e.useState)(I()),p=(0,e.useRef)(void 0),v=(0,e.useRef)(new Set),[F,l]=(0,e.useState)(!1),D=(0,e.useCallback)(()=>p.current??{},[]),j=(0,e.useCallback)(i=>(v.current.add(i),()=>{v.current.delete(i)}),[]),h=()=>{v.current.forEach(i=>i())};return(0,e.useEffect)(()=>{t.onNotification(x.type,n=>{r(n)}),t.onNotification(P.type(),n=>{p.current=n,h()});async function i(){try{let[n,H,J,M,S]=await Promise.all([t.sendRequest(T.type),t.sendRequest(K.type),t.sendRequest(V.type()),t.sendRequest(L.type),t.sendRequest(q.type)]);r(n),a(N(H)),p.current=J,G(M),S&&(await C({contents:S}),await new Promise(Q=>setTimeout(Q,100)),y.createInstance()),z(!0),await t.sendNotification(E.type,{loadCompleteTimeStamp:Date.now()}),l(!0),h()}catch(n){console.error("Bootstrap failed:",n),l(!0)}}i()},[]),(0,w.jsx)(m.Provider,{value:{vscodeApi:d,extensionRpc:t,getSnapshot:D,subscribe:j,themeKind:u,keyBindings:c,localization:b,EOL:O},children:(0,w.jsx)(W,{style:{height:"100%",width:"100%"},theme:B(u),children:F&&p.current!==void 0&&s})})}function ce(){let s=(0,e.useContext)(m);if(!s)throw new Error("useVscodeWebview2 must be used within a VscodeWebviewProvider2");return s}var o=f(R());function pe(s,d=Object.is){let t=(0,o.useContext)(m);if(!t)throw new Error("useVscodeSelector must be used within a VscodeWebviewProvider");let u=(0,o.useCallback)(()=>t.getSnapshot()||{},[t]),r=(0,o.useSyncExternalStore)(t.subscribe,t.getSnapshot,u),c=r?s(r):void 0,a=(0,o.useRef)(c);return d(a.current,c)||(a.current=c),a.current}export{re as a,ce as b,pe as c};

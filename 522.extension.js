"use strict";exports.id=522,exports.ids=[522],exports.modules={1375:(e,o,n)=>{n.r(o),n.d(o,{fromTokenFile:()=>d,fromWebToken:()=>c});var r=n(43),t=n(86),s=n(1374),i=n(10);const c=e=>async o=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");const{roleArn:r,roleSessionName:t,webIdentityToken:s,providerId:i,policyArns:c,policy:a,durationSeconds:d}=e;let{roleAssumerWithWebIdentity:l}=e;if(!l){const{getDefaultRoleAssumerWithWebIdentity:r}=await n.e(408).then(n.bind(n,1387));l=r({...e.clientConfig,credentialProviderLogger:e.logger,parentClientConfig:{...o?.callerClientConfig,...e.parentClientConfig}},e.clientPlugins)}return l({RoleArn:r,RoleSessionName:t??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:s,ProviderId:i,PolicyArns:c,Policy:a,DurationSeconds:d})},a="AWS_WEB_IDENTITY_TOKEN_FILE",d=(e={})=>async o=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");const n=e?.webIdentityTokenFile??process.env[a],d=e?.roleArn??process.env.AWS_ROLE_ARN,l=e?.roleSessionName??process.env.AWS_ROLE_SESSION_NAME;if(!n||!d)throw new t.C("Web identity configuration not specified",{logger:e.logger});const p=await c({...e,webIdentityToken:s.Z?.getTokenRecord?.()[n]??(0,i.readFileSync)(n,{encoding:"ascii"}),roleArn:d,roleSessionName:l})(o);return n===process.env[a]&&(0,r.g)(p,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h"),p}},1374:(e,o,n)=>{n.d(o,{Z:()=>s});var r=n(1371),t=n(95);const s={getFileRecord:()=>t.Jj,interceptFile(e,o){t.Jj[e]=Promise.resolve(o)},getTokenRecord:()=>r.a,interceptToken(e,o){r.a[e]=o}}},1369:(e,o,n)=>{n.d(o,{C:()=>i});var r=n(9),t=n(5),s=n(93);const i=e=>{const o=(0,r.createHash)("sha1").update(e).digest("hex");return(0,t.join)((0,s.R)(),".aws","sso","cache",`${o}.json`)}},1371:(e,o,n)=>{n.d(o,{a:()=>s,v:()=>i});var r=n(31),t=n(1369);const s={},i=async e=>{if(s[e])return s[e];const o=(0,t.C)(e),n=await(0,r.readFile)(o,"utf8");return JSON.parse(n)}}};
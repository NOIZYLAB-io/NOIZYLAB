import{a as U,b as J}from"./chunk-W5RJDKNB.js";import{Ab as T,Cb as v,Lc as A,Mc as G,Oc as _,Pc as $,Rb as w,Sb as M,W as P,bd as a,c as u,d as S,dc as R,ec as z,f as me,fc as f,gc as I,h as q,hc as B,ic as L,jc as H,k as W,kc as D,lc as V,p as m,sb as k,sd as K,tb as g,yb as O}from"./chunk-M3U674VW.js";var ee=u(me());var Q=u(S());var Y=u(m()),j=(0,Q.createContext)(void 0),X=({children:c})=>{let i=J(),x=i?.state;return(0,Y.jsx)(j.Provider,{value:{...K(i),state:x,themeKind:i?.themeKind,keyBindings:i?.keyBindings,submit:function(E){i?.extensionRpc.action("submit",{filters:E})},clearAllFilters:function(){},cancel:function(){i?.extensionRpc.action("cancel",{})}},children:c})};var d=u(S());var r=u(m()),xe=W({root:{flexDirection:"column",display:"flex",paddingTop:"10px",paddingLeft:"10px","> *":{marginTop:"5px",marginBottom:"5px"}},inputs:{maxWidth:"150px",minWidth:"150px",width:"150px"},tableCell:{display:"flex",flexDirection:"column","> *":{marginTop:"5px",marginBottom:"5px"}},operatorOptions:{maxWidth:"150px",minWidth:"150px",width:"150px"},andOrText:{marginLeft:"10px"}}),Z=()=>{let c=xe(),i=(0,d.useContext)(j),[x,E]=(0,d.useState)(void 0),[n,p]=(0,d.useState)([]),te=a.objectExplorerFiltering.and,re={8:a.objectExplorerFiltering.contains,9:a.objectExplorerFiltering.notContains,10:a.objectExplorerFiltering.startsWith,11:a.objectExplorerFiltering.notStartsWith,12:a.objectExplorerFiltering.endsWith,13:a.objectExplorerFiltering.notEndsWith,0:a.objectExplorerFiltering.equals,1:a.objectExplorerFiltering.notEquals,2:a.objectExplorerFiltering.lessThan,3:a.objectExplorerFiltering.lessThanOrEquals,4:a.objectExplorerFiltering.greaterThan,5:a.objectExplorerFiltering.greaterThanOrEquals,6:a.objectExplorerFiltering.between,7:a.objectExplorerFiltering.notBetween};function b(l){return l===void 0?"":re[l]??""}function ne(l){switch(l.type){case 2:return[0,1];case 0:return[8,9,10,11,12,13,0,1];case 1:return[0,1,2,3,4,5,6,7];case 3:return[0,1,2,3,4,5,6,7];case 4:return[0,1];default:return[]}}function ae(l){switch(l.type){case 4:return l.choices.map(t=>({name:t.value,displayName:t.displayName}));case 2:return[{name:"true",displayName:"True"},{name:"false",displayName:"False"}];default:return}}(0,d.useEffect)(()=>{function l(){let e=document.getElementById("input-0");e&&e.focus()}let t=()=>{p(i?.state?.filterProperties?.map((e,o)=>{let s=i?.state?.existingFilters?.find(pe=>pe.name===e.name),N=ne(e),de=N[0]??0;return{index:o,name:e.name,displayName:e.displayName,value:s?.value??"",type:e.type,choices:ae(e)??[],operatorOptions:N,selectedOperator:s?.operator!==void 0?s.operator:de,description:e.description}})??[])};l(),t(),E(void 0)},[i?.state?.filterProperties]);function oe(l,t){switch(l){case"property":return(0,r.jsx)($,{size:"small",info:(0,r.jsx)(r.Fragment,{children:t.description}),children:t.displayName});case"operator":return(0,r.jsxs)("div",{className:c.tableCell,children:[(0,r.jsx)(T,{id:`operator-${t.index}`,className:c.operatorOptions,size:"small",value:b(t.selectedOperator),selectedOptions:[t.selectedOperator.toString()],onOptionSelect:(e,o)=>{if(o.optionValue===void 0)return;let s=Number(o.optionValue);Number.isNaN(s)||(n[t.index].selectedOperator=s,n[t.index].selectedOperator===6||n[t.index].selectedOperator===7?Array.isArray(n[t.index].value)||(n[t.index].value=[n[t.index].value,""]):Array.isArray(n[t.index].value)&&(n[t.index].value=n[t.index].value[0]),p([...n]))},children:t.operatorOptions.map(e=>(0,r.jsx)(O,{value:e.toString(),children:b(e)},e))}),(t.selectedOperator===6||t.selectedOperator===7)&&(0,r.jsx)(w,{className:c.andOrText,size:200,children:te})]});case"value":switch(t.type){case 3:case 1:case 0:let e="text";switch(t.type){case 3:e="date";break;case 1:e="number";break;case 0:e="text";break}return t.selectedOperator===6||t.selectedOperator===7?(0,r.jsxs)("div",{className:c.tableCell,children:[(0,r.jsx)(v,{id:`input-${t.index}`,size:"small",type:e,className:c.inputs,value:t.value[0],onChange:(o,s)=>{n[t.index].value[0]=s.value,p([...n])}}),(0,r.jsx)(v,{size:"small",type:e,className:c.inputs,value:t.value[1],onChange:(o,s)=>{n[t.index].value[1]=s.value,p([...n])}})]}):(0,r.jsx)(v,{id:`input-${t.index}`,size:"small",type:e,className:c.inputs,value:t.value,onChange:(o,s)=>{n[t.index].value=s.value,p([...n])}});case 4:case 2:return(0,r.jsx)(T,{size:"small",id:`input-${t.index}`,className:c.inputs,value:t.value,onOptionSelect:(o,s)=>{n[t.index].value=s.optionText??"",p([...n])},children:t.choices.map(o=>(0,r.jsx)(O,{value:o.name,children:o.displayName},o.name))});default:return}case"clear":return(0,r.jsx)(k,{content:"Clear",relationship:"label",children:(0,r.jsx)(g,{size:"small",appearance:"subtle",icon:(0,r.jsx)(P,{}),onClick:()=>{n[t.index].selectedOperator===6||n[t.index].selectedOperator===7?n[t.index].value=["",""]:n[t.index].value="",p([...n])}})})}}let y=[f({columnId:"property",renderHeaderCell:()=>(0,r.jsx)(r.Fragment,{children:a.objectExplorerFiltering.property})}),f({columnId:"operator",renderHeaderCell:()=>(0,r.jsx)(r.Fragment,{children:a.objectExplorerFiltering.operator})}),f({columnId:"value",renderHeaderCell:()=>(0,r.jsx)(r.Fragment,{children:a.objectExplorerFiltering.value})}),f({columnId:"clear",renderHeaderCell:()=>(0,r.jsx)(r.Fragment,{children:a.objectExplorerFiltering.clear})})],[F]=(0,d.useState)(y),le={property:{minWidth:150,idealWidth:200,defaultWidth:300},operator:{minWidth:140,idealWidth:140,defaultWidth:140},value:{minWidth:150,idealWidth:150,defaultWidth:150},clear:{minWidth:20,idealWidth:20,defaultWidth:20}},[se]=(0,d.useState)(le),{getRows:ie,columnSizing_unstable:C,tableRef:ce}=z({columns:F,items:n},[R({columnSizingOptions:se})]),ue=ie();if(i)return(0,r.jsxs)("div",{className:c.root,children:[(0,r.jsx)(w,{size:400,children:q("Filter Settings")}),(0,r.jsx)(M,{children:a.objectExplorerFiltering.path(i?.state?.nodePath)}),x&&x!==""&&(0,r.jsx)(A,{intent:"error",children:(0,r.jsxs)(_,{children:[(0,r.jsx)(G,{children:a.common.error}),x]})}),(0,r.jsxs)(H,{as:"table",size:"small",...C.getTableProps(),ref:ce,children:[(0,r.jsx)(D,{children:(0,r.jsx)(B,{children:F.map(l=>(0,r.jsx)(V,{...C.getTableHeaderCellProps(l.columnId),children:l.renderHeaderCell()},l.columnId))})}),(0,r.jsx)(L,{children:ue.map((l,t)=>(0,r.jsx)(B,{children:y.map(e=>(0,r.jsx)(I,{...C.getTableHeaderCellProps(e.columnId),children:oe(e.columnId,n[t])},e.columnId))},`row${t}`))})]}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginTop:"10px",maxWidth:"300px"},children:[(0,r.jsx)(g,{appearance:"secondary",onClick:()=>{for(let l of n)l.selectedOperator===6||l.selectedOperator===7?l.value=["",""]:l.value="";p([...n])},children:a.objectExplorerFiltering.clearAll}),(0,r.jsx)(g,{appearance:"secondary",onClick:()=>{i.cancel()},children:a.common.close}),(0,r.jsx)(g,{appearance:"primary",onClick:()=>{let l=n.map(e=>{let o;switch(e.type){case 2:e.value===""||e.value===void 0?o=void 0:o=e.choices?.find(s=>s.displayName===e.value)?.name??void 0;break;case 1:e.selectedOperator===6||e.selectedOperator===7?o=e.value.map(s=>Number(s)):o=Number(e.value);break;case 0:case 3:o=e.value;break;case 4:e.value===""||e.value===void 0?o=void 0:o=e.choices?.find(s=>s.displayName===e.value)?.name??void 0;break}return{name:e.name,value:o,operator:e.selectedOperator}}).filter(e=>e.operator===6||e.operator===7?e.value[0]!==""||e.value[1]!=="":e.value!==""&&e.value!==void 0),t="";for(let e of l)if(e.operator===6||e.operator===7){let o=e.value[0],s=e.value[1];!o&&s?t=a.objectExplorerFiltering.firstValueEmptyError(b(e.operator),e.name):!s&&o?t=a.objectExplorerFiltering.secondValueEmptyError(b(e.operator),e.name):o>s&&(t=a.objectExplorerFiltering.firstValueLessThanSecondError(b(e.operator),e.name))}if(t){E(t);return}i.submit(l)},children:a.objectExplorerFiltering.ok})]})]})};var h=u(m());ee.default.createRoot(document.getElementById("root")).render((0,h.jsx)(U,{children:(0,h.jsx)(X,{children:(0,h.jsx)(Z,{})})}));

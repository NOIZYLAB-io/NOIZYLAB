"use strict";(self.webpackChunkechoapi_for_vscode=self.webpackChunkechoapi_for_vscode||[]).push([[9142],{43139:(e,n,t)=>{t.d(n,{aY:()=>u}),t(879666),t(875283);var i=t(364467),r=t(310467),a=t(354756),o=t.n(a),s=t(521234),l=t(716535),c=t(164394);const u=function(e){var n=(0,c.R7)((function(e){return e.updateSystemConfig})),t=(0,c.R7)((function(n){return n.systemConfig[e]})),a=(0,c.R7)((function(e){return e.systemConfig})),u=(0,s.A)(function(){var e=(0,r.A)(o().mark((function e(n){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{null===(t=window)||void 0===t||t.vscode.postMessage({action:"setSystemConfig",data:n})}catch(e){}case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),{wait:500}),d=u.run;return{columnSwitchConfig:t,onColumnSwitchConfig:function(t){var r=(0,l.Ay)(a,(function(n){n[e]=t}));n(r),d((0,i.A)({},e,t))}}};t(965995),t(196834)},489142:(e,n,t)=>{t.r(n),t.d(n,{default:()=>$});var i,r,a=t(364467),o=t(3453),s=t(296540),l=t(778291),c=t(614869),u=t(302543),d=t(430269),f=t(899215),v=t(804350),h=t(43139),m=t(164394),p=t(476701),g=t(892911),y=t(768645),b=t(123328),w=t(716535),j=t(445448),O=t(236492),x=t(362611),A=t(960864),_=t(457528),C=t(38267),P=C.default.div(i||(i=(0,_.A)(["\n  .beautify-input {\n    /* width: 120px; */\n    width: 100%;\n  }\n\n  .beautify-input-number {\n    width: 100%;\n  }\n\n  .beautify-select {\n    width: 100%;\n  }\n\n  .setting-desc {\n    color: var(--font-light-color);\n  }\n"]))),k=C.default.div(r||(r=(0,_.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 7px;\n  .beautify-select-selector{\n    font-size: 12px !important;\n  }\n  .beautify-select .beautify-select-arrow{\n    font-size: 10px;\n  }\n"]))),q=t(474848);function S(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function D(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?S(Object(t),!0).forEach((function(n){(0,a.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):S(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const E=function(e){var n,t=(0,l.Bd)().t,i=(0,A.A)((function(e){return e.websocket2ConnectionPool})),r=(0,m.XX)((function(e){return e.apisActiveKey})),a=e||{},d=a.value,f=a.onChange,v=(0,c.A)(""),h=(0,o.A)(v,2),p=h[0],y=h[1];return(0,s.useEffect)((function(){(0,u.includes)(["base64","hexadecimal"],null==d?void 0:d.mode)?y("binary"):y("")}),[y,d]),(0,q.jsxs)(k,{children:[(0,q.jsxs)(g.A,{align:"center",gap:12,children:[(0,q.jsxs)(O.A,{value:p||(null==d?void 0:d.mode),onChange:function(e){if("binary"===e)return y(e),void f(D(D({},d),{},{mode:"base64"}));y(""),f(D(D({},d),{},{mode:e}))},size:"small",style:{width:80},children:[(0,q.jsx)(O.A.Option,{value:"text",children:"Text"}),(0,q.jsx)(O.A.Option,{value:"json",children:"JSON"}),(0,q.jsx)(O.A.Option,{value:"xml",children:"XML"}),(0,q.jsx)(O.A.Option,{value:"html",children:"HTML"}),(0,q.jsx)(O.A.Option,{value:"binary",children:"Binary"})]}),"binary"===p&&(0,q.jsxs)(O.A,{size:"small",value:null==d?void 0:d.mode,onChange:function(e){return f(D(D({},d),{},{mode:e}))},style:{width:115},children:[(0,q.jsx)(O.A.Option,{value:"base64",children:"Base64"}),(0,q.jsx)(O.A.Option,{value:"hexadecimal",children:"Hexadecimal"})]})]}),(0,q.jsx)(g.A,{align:"center",gap:12,children:(0,q.jsx)(x.A,{type:"primary",size:"small",disabled:!((0,u.size)((0,u.trim)(null==d?void 0:d.raw))>0&&(0,u.isEqual)(null===(n=i[r])||void 0===n?void 0:n.status,"connect")),onClick:function(){var e;null===(e=window)||void 0===e||e.vscode.postMessage({action:"ws_send",data:{target_id:r,msg:null==d?void 0:d.raw,type:null==d?void 0:d.mode}})},children:t("ws.request.sent")})})]})};var z=t(383599),B=t(63985),M=t(594772);function F(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function L(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?F(Object(t),!0).forEach((function(n){(0,a.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):F(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const R=function(e){var n,t=(0,l.Bd)().t,i=f.A.Provider,r=e||{},a=r.value,o=r.onChange,c=function(e){o(L(L({},a),{},{message:e}))},d=(0,y.A)((function(e){var n,t,i=(null==a?void 0:a.active_id)||(null===(n=(0,u.head)(a.message))||void 0===n?void 0:n.param_id),r=(0,w.Ay)(a.message,(function(n){var r=(0,u.findIndex)(a.message,(function(n){return(0,u.isEqual)(n.param_id,e)}));if(r>-1&&n.splice(r,1),(0,u.isEqual)(i,e)){var o,s,l=(null===(o=n[r-1])||void 0===o?void 0:o.param_id)||(null===(s=(0,u.head)(n))||void 0===s?void 0:s.param_id);t=l}else t=null==a?void 0:a.active_id}));o(L(L({},a),{},{message:r,active_id:t}))})),v=function(e){var n=(0,u.map)(a.message,(function(n){var t;return(0,u.isEqual)(n.param_id,a.active_id||(null===(t=(0,u.head)(a.message))||void 0===t?void 0:t.param_id))?L(L({},n),{},{request:L({},e)}):n}));c(n)},h=(0,s.useMemo)((function(){return(0,u.find)(a.message,(function(e){return(0,u.isEqual)(e.param_id,a.active_id)}))||(0,u.head)(a.message)}),[a.message,a.active_id]);if(h)return(0,q.jsxs)(g.A,{gap:12,style:{height:"100%"},children:[(0,q.jsx)(B.A,{handleSelect:function(e){o(L(L({},a),{},{active_id:e}))},value:a.message,activeId:a.active_id||(null===(n=(0,u.head)(a.message))||void 0===n?void 0:n.param_id),handleEdit:function(e,n){var i=n.value,r=(0,u.cloneDeep)(null==a?void 0:a.message);(0,u.set)(r,e,L(L({},r[e]),{},{name:(null==i?void 0:i.trim())||t("supplement.msg")})),c(r)},handleAdd:function(){var e=(0,b.aL)(),n=(0,u.concat)(a.message,L(L({},z.ue),{},{param_id:e}));c(n)},handleRemove:d,addText:"Message"}),(0,q.jsx)(i,{value:{isDebugArea:!0},children:(0,q.jsxs)(g.A,{vertical:!0,gap:8,style:{height:"100%",flex:1,width:0},children:[(0,q.jsx)(M.i0,{className:"raw-editor-wrap",children:(0,q.jsx)(j.wz,{regularValueHeight:0,mode:h.request.mode,isParameter:!["json","xml"].includes(h.request.mode),value:h.request,onChange:v})}),(0,q.jsx)(E,{value:h.request,apisData:a,onChange:v})]})})]})};var T=t(43960),X=t(231058),N=t(965995);const Y=function(e){var n=(0,l.Bd)().t,t=e||{},i=t.value,r=t.readOnly,a=t.onChange,o=(0,N.A)().themeToken,s=(0,y.A)((function(e,n){var t=(0,w.Ay)(i,(function(t){t[e]=n}));a(t)})),c=[{key:"certificate_verification",title:n("ws.settings.certificate_verification"),desc:n("ws.settings.certificate_verification_tip"),children:(0,q.jsx)(T.A,{disabled:r,checked:(0,u.isEqual)(null==i?void 0:i.certificate_verification,1),onChange:function(e){return s("certificate_verification",e?1:-1)}})},{key:"shake_hands_timeout",title:n("ws.settings.time_out"),desc:n("ws.settings.time_out_tip"),children:(0,q.jsx)(X.A,{readOnly:r,controls:!1,addonAfter:"ms",value:null==i?void 0:i.shake_hands_timeout,onChange:function(e){return s("shake_hands_timeout",e)}})},{key:"information_size",title:n("ws.settings.content"),desc:n("ws.settings.content_tip"),children:(0,q.jsx)(X.A,{readOnly:r,controls:!1,value:null==i?void 0:i.information_size,onChange:function(e){return s("information_size",e)}})}];return(0,q.jsx)(P,{$token:o,children:(0,q.jsx)(g.A,{style:{marginLeft:8},vertical:!0,gap:12,children:(0,u.map)(c,(function(e){return(0,q.jsx)(q.Fragment,{children:(0,q.jsxs)(g.A,{gap:12,align:"center",children:[(0,q.jsxs)(g.A,{flex:1,vertical:!0,children:[(0,q.jsx)("div",{className:"setting-title",children:e.title}),(0,q.jsx)("div",{className:"setting-desc",children:e.desc})]}),(0,q.jsx)(g.A,{flex:.1,style:{minWidth:120},align:"start",justify:"start",children:e.children})]},e.key)})}))})})};var H=t(824629);function I(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function K(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?I(Object(t),!0).forEach((function(n){(0,a.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):I(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const $=function(e){var n,t,i,r,g,y,b,w=e||{},j=w.value,O=w.onChange,x=w.readOnly,A=f.A.Provider,_=(j||{}).request,C=(0,m.XX)((function(e){return e.apiDetailsData})),P=(0,m.xF)((function(e){return e.globalParams})),k=(0,c.A)({}),S=(0,o.A)(k,2),D=S[0],E=S[1],z=(0,l.Bd)().t,B=(0,h.aY)("request_header_column_switch"),M=B.columnSwitchConfig,F=B.onColumnSwitchConfig,L=(0,h.aY)("request_query_column_switch"),T=L.columnSwitchConfig,X=L.onColumnSwitchConfig,N=(0,h.aY)("request_cookie_column_switch"),I=N.columnSwitchConfig,$=N.onColumnSwitchConfig,J=function(e,n){O(K(K({},j),{},{url:(0,u.isEqual)(n,"query")?(0,H.$R)(j.url,e):j.url,request:K(K({},j.request),{},(0,a.A)({},n,{parameter:e}))}))};(0,s.useEffect)((function(){var e=(0,p.bf)(C,(null==j?void 0:j.target_id)||""),n=(0,u.reverse)(e),t={header:[],query:[],body:[],restful:[],cookie:[]};(0,u.forEach)(n,(function(e){var n=(e||{}).request;n&&(0,u.forEach)((0,u.keys)(t),(function(i){var r;n[i]&&(t[i]=(0,u.concat)([],t[i],null===(r=n[i])||void 0===r||null===(r=r.parameter)||void 0===r?void 0:r.map((function(n){return K(K({},n),{},{target_id:null==e?void 0:e.target_id})}))))}))})),E(t)}),[null==j?void 0:j.target_id,C]);var V=[{key:"send",label:z("ws.request.message"),children:(0,q.jsx)(A,{value:{isDebugArea:!0},children:(0,q.jsx)(R,{value:j,onChange:O})})},{key:"header",label:z("ws.request.headers"),children:(0,q.jsx)(v.A,{target_type:"websocket2",tabType:"header",globalParams:null==P||null===(n=P.header)||void 0===n?void 0:n.parameter,folderParams:null==D?void 0:D.header,readOnly:x,dataSource:null==_||null===(t=_.header)||void 0===t?void 0:t.parameter,onChange:function(e){return J(e,"header")},columnSwitchConfig:M,onColumnSwitchConfig:F}),countParams:{dataSource:null==_||null===(i=_.header)||void 0===i?void 0:i.parameter,customCalcFun:p.gf}},{key:"params",label:z("ws.request.params"),children:(0,q.jsx)(v.A,{readOnly:x,dataSource:null==_||null===(r=_.query)||void 0===r?void 0:r.parameter,onChange:function(e){return J(e,"query")},folderParams:null==D?void 0:D.query,columnSwitchConfig:T,onColumnSwitchConfig:X}),countParams:{dataSource:null==_||null===(g=_.query)||void 0===g?void 0:g.parameter,customCalcFun:p.gf}},{key:"cookie",label:"Cookie",children:(0,q.jsx)(v.A,{readOnly:x,dataSource:null==_||null===(y=_.cookie)||void 0===y?void 0:y.parameter,folderParams:null==D?void 0:D.cookie,onChange:function(e){return J(e,"cookie")},columnSwitchConfig:I,onColumnSwitchConfig:$}),countParams:{dataSource:null==_||null===(b=_.cookie)||void 0===b?void 0:b.parameter,customCalcFun:p.gf}},{key:"setting",label:z("ws.request.settings"),children:(0,q.jsx)(Y,{readOnly:x,onChange:function(e){O(K(K({},j),{},{config:K({},e)}))},value:null==j?void 0:j.config})}];return(0,q.jsx)(d.A,{items:V})}},594772:(e,n,t)=>{t.d(n,{Lc:()=>l,dK:()=>u,i0:()=>c});var i,r,a,o=t(457528),s=t(38267),l=s.default.div(i||(i=(0,o.A)(["\n  .beautify-input {\n    /* width: 120px; */\n    width: 100%;\n  }\n\n  .beautify-input-number {\n    width: 100%;\n  }\n\n  .beautify-select {\n    width: 100%;\n  }\n\n  .setting-desc {\n    color: var(--font-light-color);\n  }\n"]))),c=s.default.div(r||(r=(0,o.A)(["\n  flex: 1;\n  height: 0;\n  .monaco-wrapper{\n    width: 97%;\n  }\n"]))),u=s.default.div(a||(a=(0,o.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 7px;\n  .beautify-select-selector{\n    font-size: 12px !important;\n  }\n  .beautify-select .beautify-select-arrow{\n    font-size: 10px;\n  }\n"])))}}]);
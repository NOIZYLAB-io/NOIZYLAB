'use strict';const a29_0xef135c=a29_0x2120;function a29_0x1687(){const _0x30a051=['Right','file','getData','initializeWorkspace','coverageType','PARASOFT_COVERAGE_INDEX_FILE_NAME','1952346bPWaRu','defineCoverageTypeBarItem','window','getCoverageDataFolder','84906ayPrpB','hide','command','perf_hooks','WRONG_COVERAGE_XML_FORMAT_MESSAGE','PARASOFT_ALT_COVERAGE_INDEX_FILE_NAME','./CoverageXmlToJsonParser','Uri','showCoverage','coverageTypeBarItem','initializeFileSystemWatcher','tooltip','i18n','coverageDataProvider','show','loadCoverageFromXmlInfo','getSupportedCoverageTypes','StatusBarAlignment','getShortNameFromCoverageTypeName','loadFromCoverageDataFiles','projectName','2216795SnRgOD','None','text','stateManager','toString','onDidCreate','common.coverage.loader.chooseType','./CoverageConsts','../localization','encodeTestConfigNameForTelemetry','.type','onDidChange','33219xwHOzg','showQuickPick','workspaceFolder','round','now','../common','.file','showCov','common.coverage.loadFromFile.failure','CoverageConsts','writeFile','slice','uri','importCoverageXmlInfo','joinPath','name','loadCoverage','TelemetryReporterProvider','copyEntriesToCoverageDir','content','../telemetry.provider','1415812KtonDy','performance','65eRjSDO','loadCoverageFromDataFiles','common.coverage.loadFromFile.success','180SbCFSg','showCoverageWithoutResetWorkspace','document','common.coverage.statusBar.currentCoverageName','load\x20coverage','vscode','.loadDurationMs','getWorkspaceFolder','common.coverage.loader.noWorkspace','defineProperty','3316408YlVnBd','visibleTextEditors','24999OaTGPe','createStatusBarItem','createFileSystemWatcher','346qsHfmM','CoverageXmlToJsonParser','outputChannel','getTelemetryReporter','__esModule','showWarningMessage','appendLine','../constants','workspace','join','ps.','common.coverage.loadFromFile.badFormat','parseXmlToJson','2504TOwKkd','showCoverageCommand','zipContent'];a29_0x1687=function(){return _0x30a051;};return a29_0x1687();}(function(_0x270152,_0x144bfa){const _0x2ca10f=a29_0x2120,_0x1e9c50=_0x270152();while(!![]){try{const _0x178b0e=-parseInt(_0x2ca10f(0xf3))/0x1+parseInt(_0x2ca10f(0x107))/0x2*(parseInt(_0x2ca10f(0x104))/0x3)+-parseInt(_0x2ca10f(0x102))/0x4+-parseInt(_0x2ca10f(0xf5))/0x5*(parseInt(_0x2ca10f(0x121))/0x6)+-parseInt(_0x2ca10f(0x136))/0x7+parseInt(_0x2ca10f(0x114))/0x8*(-parseInt(_0x2ca10f(0xde))/0x9)+parseInt(_0x2ca10f(0xf8))/0xa*(parseInt(_0x2ca10f(0x11d))/0xb);if(_0x178b0e===_0x144bfa)break;else _0x1e9c50['push'](_0x1e9c50['shift']());}catch(_0x33c875){_0x1e9c50['push'](_0x1e9c50['shift']());}}}(a29_0x1687,0xb3918));function a29_0x2120(_0x41d025,_0x59c2f2){const _0x168730=a29_0x1687();return a29_0x2120=function(_0x212074,_0x248e54){_0x212074=_0x212074-0xd4;let _0x226b1d=_0x168730[_0x212074];return _0x226b1d;},a29_0x2120(_0x41d025,_0x59c2f2);}Object[a29_0xef135c(0x101)](exports,a29_0xef135c(0x10b),{'value':!![]}),exports['CoverageLoader']=void 0x0;const vscode_1=require(a29_0xef135c(0xfd)),common_1=require(a29_0xef135c(0xe3)),perf_hooks_1=require(a29_0xef135c(0x124)),telemetry_provider_1=require(a29_0xef135c(0xf2)),localization_1=require(a29_0xef135c(0xda)),CoverageXmlToJsonParser_1=require(a29_0xef135c(0x127)),CoverageConsts_1=require(a29_0xef135c(0xd9)),path_1=require('path'),constants_1=require(a29_0xef135c(0x10e));class CoverageLoader{[a29_0xef135c(0x12e)];[a29_0xef135c(0xd5)];[a29_0xef135c(0x109)];[a29_0xef135c(0xe0)];[a29_0xef135c(0xe5)];[a29_0xef135c(0x11b)];[a29_0xef135c(0x12a)]=vscode_1[a29_0xef135c(0x11f)][a29_0xef135c(0x105)](vscode_1[a29_0xef135c(0x132)][a29_0xef135c(0x117)],0x2711);constructor(_0x1f3527,_0x24ddfc,_0xb5c13c,_0x5b0b69){const _0x33e6e9=a29_0xef135c;this[_0x33e6e9(0x12e)]=_0x1f3527,this[_0x33e6e9(0xd5)]=_0x24ddfc,this[_0x33e6e9(0x109)]=_0xb5c13c,this[_0x33e6e9(0x11e)](_0x5b0b69),this[_0x33e6e9(0xe5)]=![],this[_0x33e6e9(0x11b)]=undefined,this['workspaceFolder']=undefined,vscode_1[_0x33e6e9(0x11f)]['onDidChangeActiveTextEditor'](_0x175172=>{const _0x4b3e3d=_0x33e6e9;if(_0x175172){const _0x5d73e2=vscode_1['workspace'][_0x4b3e3d(0xff)](_0x175172[_0x4b3e3d(0xfa)][_0x4b3e3d(0xea)]);_0x5d73e2&&_0x5d73e2!==this[_0x4b3e3d(0xe0)]&&(this[_0x4b3e3d(0xe0)]=_0x5d73e2),this[_0x4b3e3d(0x129)]();}});}[a29_0xef135c(0x11e)](_0x437fd3){const _0x47491e=a29_0xef135c;this[_0x47491e(0x12a)][_0x47491e(0x122)](),this[_0x47491e(0x12a)][_0x47491e(0xd4)]=(0x0,localization_1[_0x47491e(0x12d)])(_0x47491e(0xfb),_0x47491e(0x137)),this['coverageTypeBarItem'][_0x47491e(0x12c)]=(0x0,localization_1['i18n'])('common.coverage.statusBar.tooltip'),this[_0x47491e(0x12a)][_0x47491e(0x123)]=_0x437fd3;}async[a29_0xef135c(0x134)](){const _0x3512e2=a29_0xef135c;await this[_0x3512e2(0xee)](async(_0x2cca17,_0x5905b6,_0x2ef69c)=>{const _0x3af4c7=_0x3512e2;return this[_0x3af4c7(0x12e)]['applyCoverageDecorations'](_0x2cca17,_0x5905b6,_0x2ef69c);},_0x3512e2(0xf6));}async[a29_0xef135c(0x130)](_0x196c27,_0x29979b,_0x5b427b){const _0x28b818=a29_0xef135c;await this[_0x28b818(0xeb)](_0x29979b,(_0x58e079,_0x4e676f)=>{const _0x38ab93=_0x28b818,_0x287e74=new CoverageXmlToJsonParser_1[(_0x38ab93(0x108))]();return _0x287e74[_0x38ab93(0x113)](_0x58e079,_0x4e676f,![]);},_0x196c27,_0x5b427b);}async[a29_0xef135c(0xeb)](_0x3f14b6,_0xc73acf,_0x11bc58,_0x2a5397){const _0xca595d=a29_0xef135c;this[_0xca595d(0xe0)]=undefined,await this[_0xca595d(0x11a)](_0x3f14b6[_0xca595d(0x135)]);if(!this['workspaceFolder']){vscode_1['window'][_0xca595d(0x10c)]((0x0,localization_1['i18n'])(_0xca595d(0x100)));return;}const _0x1bb16c=this['coverageDataProvider'][_0xca595d(0x120)](this[_0xca595d(0xe0)]);let _0x3b792f=0x0;_0x3b792f=perf_hooks_1[_0xca595d(0xf4)][_0xca595d(0xe2)](),_0xc73acf(_0x3f14b6[_0xca595d(0xf1)],_0x1bb16c)['then'](()=>{const _0x3db946=_0xca595d;this['outputChannel'][_0x3db946(0x10d)]((0x0,localization_1[_0x3db946(0x12d)])(_0x3db946(0xf7),_0x3f14b6[_0x3db946(0xed)]));const _0x38766c={};_0x38766c[_0x3db946(0x111)+_0x2a5397+_0x3db946(0xdc)]='coverage',_0x38766c['ps.'+_0x2a5397+_0x3db946(0xe4)]=_0x3f14b6[_0x3db946(0xed)];const _0xc7e0dd={};_0xc7e0dd[_0x3db946(0x111)+_0x2a5397+'.loadDurationMs']=Math[_0x3db946(0xe1)](perf_hooks_1[_0x3db946(0xf4)][_0x3db946(0xe2)]()-_0x3b792f),telemetry_provider_1[_0x3db946(0xef)][_0x3db946(0x10a)]()?.['actionEvent'](_0x2a5397,_0x38766c,_0xc7e0dd),this[_0x3db946(0xf9)](_0x11bc58);},_0x4d64fb=>{const _0x2b722b=_0xca595d;_0x4d64fb===CoverageConsts_1[_0x2b722b(0xe7)][_0x2b722b(0x125)]&&(this[_0x2b722b(0x109)][_0x2b722b(0x10d)]((0x0,localization_1['i18n'])('common.coverage.loadFromFile.failure',_0x3f14b6[_0x2b722b(0xed)],(0x0,localization_1[_0x2b722b(0x12d)])(_0x2b722b(0x112),_0x3f14b6[_0x2b722b(0xed)]))),vscode_1[_0x2b722b(0x11f)][_0x2b722b(0x10c)]((0x0,localization_1[_0x2b722b(0x12d)])('common.coverage.loadFromFile.badFormat',_0x3f14b6[_0x2b722b(0xed)])));}),this[_0xca595d(0x109)]['show']();}async[a29_0xef135c(0xee)](_0x5c6044,_0x3afdc2){const _0x27b1f3=a29_0xef135c;await this['initializeWorkspace']();if(!this['workspaceFolder']){vscode_1[_0x27b1f3(0x11f)][_0x27b1f3(0x10c)]((0x0,localization_1['i18n'])('common.coverage.loader.noWorkspace')),this[_0x27b1f3(0xe5)]=![],this[_0x27b1f3(0x11b)]=undefined;return;}const _0x25c480=await this['getCoverageTypeName'](),_0x301b08=_0x25c480!=undefined?this[_0x27b1f3(0x12e)][_0x27b1f3(0x133)](_0x25c480):undefined;if(_0x25c480&&this['workspaceFolder']){this['coverageTypeBarItem'][_0x27b1f3(0x12f)]();const _0x4a2ee8=perf_hooks_1['performance'][_0x27b1f3(0xe2)]();for(const _0x515c83 of vscode_1['window'][_0x27b1f3(0x103)]){_0x515c83[_0x27b1f3(0xfa)]['uri']['toString']()['startsWith'](this['workspaceFolder'][_0x27b1f3(0xea)][_0x27b1f3(0xd6)]())&&await _0x5c6044(this['workspaceFolder'],_0x25c480,_0x515c83);}_0x25c480===_0x27b1f3(0x137)?(this[_0x27b1f3(0xe5)]=![],this[_0x27b1f3(0x11b)]=_0x27b1f3(0x137),this[_0x27b1f3(0x12a)][_0x27b1f3(0xd4)]=(0x0,localization_1['i18n'])(_0x27b1f3(0xfb),'None')):this[_0x27b1f3(0x12a)][_0x27b1f3(0xd4)]=(0x0,localization_1[_0x27b1f3(0x12d)])(_0x27b1f3(0xfb),_0x301b08??'');const _0x3f53d6={};_0x3f53d6[_0x27b1f3(0x111)+_0x3afdc2+_0x27b1f3(0xe4)]=(0x0,common_1[_0x27b1f3(0xdb)])(_0x27b1f3(0xfc));const _0x59e49f={};_0x59e49f[_0x27b1f3(0x111)+_0x3afdc2+_0x27b1f3(0xfe)]=Math[_0x27b1f3(0xe1)](perf_hooks_1[_0x27b1f3(0xf4)][_0x27b1f3(0xe2)]()-_0x4a2ee8),telemetry_provider_1[_0x27b1f3(0xef)][_0x27b1f3(0x10a)]()?.['actionEvent'](_0x3afdc2,_0x3f53d6,_0x59e49f);}}async['getCoverageTypeName'](){const _0x12dcbb=a29_0xef135c;if(this[_0x12dcbb(0x11b)])return this[_0x12dcbb(0x11b)];const _0x1a2925=this[_0x12dcbb(0x12e)][_0x12dcbb(0x131)]()[_0x12dcbb(0xe9)]();_0x1a2925['unshift'](_0x12dcbb(0x137));const _0x21cada=await vscode_1[_0x12dcbb(0x11f)][_0x12dcbb(0xdf)](_0x1a2925,{'placeHolder':(0x0,localization_1[_0x12dcbb(0x12d)])(_0x12dcbb(0xd8))});return this[_0x12dcbb(0x11b)]=_0x21cada,_0x21cada;}async[a29_0xef135c(0xf9)](_0x46e05f){const _0x2e13a5=a29_0xef135c;this['showCov']=!![],this[_0x2e13a5(0x11b)]=_0x46e05f,this[_0x2e13a5(0x134)]();}async[a29_0xef135c(0x115)](){const _0x4c7f7e=a29_0xef135c;this[_0x4c7f7e(0xe5)]=!![],this['coverageType']=undefined,this[_0x4c7f7e(0xe0)]=undefined,this[_0x4c7f7e(0x134)]();}async[a29_0xef135c(0x129)](){const _0x399556=a29_0xef135c;this['showCov']&&this[_0x399556(0x134)]();}async[a29_0xef135c(0x11a)](_0x5f2fda=''){const _0x3bcaf6=a29_0xef135c;if(!this[_0x3bcaf6(0xe0)]){this['workspaceFolder']=await(0x0,common_1['guessWorkspaceFolderByTagOrAskUser'])(_0x5f2fda);if(this[_0x3bcaf6(0xe0)]){const _0x440959=this['coverageDataProvider'][_0x3bcaf6(0x120)](this[_0x3bcaf6(0xe0)]),_0x4e6445=(0x0,path_1['join'])(_0x440959,constants_1[_0x3bcaf6(0x11c)]),_0x4030cb=(0x0,path_1[_0x3bcaf6(0x110)])(_0x440959,constants_1['PARASOFT_ALT_COVERAGE_INDEX_FILE_NAME']),_0x1d2a33=vscode_1[_0x3bcaf6(0x10f)]['createFileSystemWatcher'](_0x440959);_0x1d2a33[_0x3bcaf6(0xd7)](()=>{const _0x33ed6b=_0x3bcaf6;this['initializeFileSystemWatcher'](_0x4e6445),this[_0x33ed6b(0x12b)](_0x4030cb);}),this[_0x3bcaf6(0x12b)](_0x4e6445),this['initializeFileSystemWatcher'](_0x4030cb);}}}async[a29_0xef135c(0xf0)](_0x165328){const _0x35b4a0=a29_0xef135c;this[_0x35b4a0(0xe0)]=undefined,await this['initializeWorkspace'](_0x165328[0x0][_0x35b4a0(0x135)]);let _0x18f297='';if(this[_0x35b4a0(0xe0)]){try{const _0x2cca04=vscode_1[_0x35b4a0(0x128)][_0x35b4a0(0x118)](this[_0x35b4a0(0x12e)][_0x35b4a0(0x120)](this[_0x35b4a0(0xe0)]));await vscode_1['workspace']['fs']['createDirectory'](_0x2cca04);for await(const _0x2ceeef of _0x165328){vscode_1['workspace']['fs'][_0x35b4a0(0xe8)](vscode_1[_0x35b4a0(0x128)][_0x35b4a0(0xec)](_0x2cca04,_0x2ceeef['zipContent'][_0x35b4a0(0xed)]),_0x2ceeef[_0x35b4a0(0x116)][_0x35b4a0(0x119)]()),(_0x2ceeef['name']==constants_1[_0x35b4a0(0x126)]||_0x2ceeef[_0x35b4a0(0xed)]==constants_1[_0x35b4a0(0x11c)])&&(_0x18f297=_0x2ceeef[_0x35b4a0(0xed)]);}await this[_0x35b4a0(0xf9)](undefined),this[_0x35b4a0(0x109)][_0x35b4a0(0x10d)]((0x0,localization_1[_0x35b4a0(0x12d)])(_0x35b4a0(0xf7),_0x18f297));}catch(_0x5e36a8){this[_0x35b4a0(0x109)][_0x35b4a0(0x10d)]((0x0,localization_1[_0x35b4a0(0x12d)])(_0x35b4a0(0xe6),_0x18f297,_0x5e36a8));}this[_0x35b4a0(0x109)]['show']();}}[a29_0xef135c(0x12b)](_0x1fbc3b){const _0x21c7e7=a29_0xef135c,_0x3c1568=vscode_1['workspace'][_0x21c7e7(0x106)](_0x1fbc3b);_0x3c1568[_0x21c7e7(0xdd)](()=>{const _0x4903a7=_0x21c7e7;this[_0x4903a7(0x129)]();}),_0x3c1568[_0x21c7e7(0xd7)](()=>{const _0x2ba5c7=_0x21c7e7;this[_0x2ba5c7(0x129)]();});}}exports['CoverageLoader']=CoverageLoader;
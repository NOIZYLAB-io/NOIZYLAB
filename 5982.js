"use strict";exports.id=5982,exports.ids=[5982],exports.modules={995982:(g,r,e)=>{e.r(r),e.d(r,{fromTokenFile:()=>I,fromWebToken:()=>s});var n=e(313421),d=e(966653),a=e(878620),t=e(179896);const s=o=>async D=>{o.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");const{roleArn:E,roleSessionName:T,webIdentityToken:S,providerId:O,policyArns:P,policy:v,durationSeconds:R}=o;let{roleAssumerWithWebIdentity:A}=o;if(!A){const{getDefaultRoleAssumerWithWebIdentity:f}=await e.e(9909).then(e.bind(e,529909));A=f({...o.clientConfig,credentialProviderLogger:o.logger,parentClientConfig:{...D?.callerClientConfig,...o.parentClientConfig}},o.clientPlugins)}return A({RoleArn:E,RoleSessionName:T??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:S,ProviderId:O,PolicyArns:P,Policy:v,DurationSeconds:R})},l="AWS_WEB_IDENTITY_TOKEN_FILE",i="AWS_ROLE_ARN",c="AWS_ROLE_SESSION_NAME",I=(o={})=>async D=>{o.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");const E=o?.webIdentityTokenFile??process.env[l],T=o?.roleArn??process.env[i],S=o?.roleSessionName??process.env[c];if(!E||!T)throw new d.C("Web identity configuration not specified",{logger:o.logger});const O=await s({...o,webIdentityToken:a.Z?.getTokenRecord?.()[E]??(0,t.readFileSync)(E,{encoding:"ascii"}),roleArn:T,roleSessionName:S})(D);return E===process.env[l]&&(0,n.g)(O,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h"),O}},878620:(g,r,e)=>{e.d(r,{Z:()=>a});var n=e(910704),d=e(921710);const a={getFileRecord(){return d.Jj},interceptFile(t,s){d.Jj[t]=Promise.resolve(s)},getTokenRecord(){return n.a},interceptToken(t,s){n.a[t]=s}}},34659:(g,r,e)=>{e.d(r,{C:()=>l});var n=e(776982),d=e.n(n),a=e(16928),t=e.n(a),s=e(572234);const l=i=>{const I=(0,n.createHash)("sha1").update(i).digest("hex");return(0,a.join)((0,s.R)(),".aws","sso","cache",`${I}.json`)}},910704:(g,r,e)=>{e.d(r,{a:()=>t,v:()=>s});var n=e(191943),d=e.n(n),a=e(34659);const t={},s=async l=>{if(t[l])return t[l];const i=(0,a.C)(l),c=await(0,n.readFile)(i,"utf8");return JSON.parse(c)}}};

"use strict";(self.webpackChunkcollection_sidebar=self.webpackChunkcollection_sidebar||[]).push([[4190],{54190:(e,t,o)=>{o.d(t,{Z:()=>eo});var n=o(40540),s=o(32220),i=o(50297),r=o(59530),d=o.n(r),a=o(60398);var l=o(52322);const c=Array.from({length:10}),p=({numLoadingTiles:e=c})=>(0,l.jsx)("div",{className:"sidebar-loading-state_sidebar-loading-state__XG889","data-testid":"sidebar-loading-state",children:e.map(((e,t)=>(0,l.jsx)("div",{className:"sidebar-loading-state_sidebar-loading-state--item__Z1vOR",children:(0,l.jsx)("div",{className:"sidebar-loading-state_sidebar-loading-state__info__qDG37"})},t)))});var u=o(74962),m=o(63622),I=o(80605);const f=e=>{const t=e.illustration||null;return(0,l.jsxs)("div",{className:"sidebar-empty-state_sidebar-empty-state__zGbOy",children:[(0,l.jsx)("div",{className:"sidebar-empty-state_sidebar-empty-state__illustration__sxdhr",children:t}),(0,l.jsxs)("div",{className:"sidebar-empty-state_sidebar-empty-state__head-and-body__z9GWI",children:[(0,l.jsx)("div",{className:"sidebar-empty-state_sidebar-empty-state__title__C6Q5t",children:(0,l.jsx)(u.Z,{type:"h4",color:"content-color-secondary",text:e.title})}),(0,l.jsx)("div",{className:"sidebar-empty-state_sidebar-empty-state__description__771s1",children:(0,l.jsx)(m.ZP,{type:"body-medium",color:"content-color-secondary",children:e.message})})]}),e.action&&(0,l.jsx)("div",{className:"sidebar-empty-state_sidebar-empty-state__cta__AhqHg",children:(0,l.jsx)(I.Z,{type:"primary",size:"medium",isLoading:e.action.isLoading,text:e.action.label,isDisabled:!e.hasPermissions,tooltip:e.action.tooltip,onClick:()=>{e.action&&e.action.handler&&e.action.handler()}})})]})};var h=o(35736);const g=d().div.withConfig({displayName:"refetch-item__MetaContainer",componentId:"sc-1flourh-0"})(["height:100%;width:100%;display:flex;align-items:center;justify-content:center;font-size:var(--text-size-m);line-height:var(--line-height-m);padding:var(--spacing-xs) 0;color:var(--content-color-tertiary);"]),v=d().button.withConfig({displayName:"refetch-item__RetryButton",componentId:"sc-1flourh-1"})(["all:unset;color:var(--content-color-brand);cursor:pointer;display:inline-block;margin-left:var(--spacing-xs);"]),y=d().div.withConfig({displayName:"refetch-item__SpinnerWrapper",componentId:"sc-1flourh-2"})(["height:100%;display:flex;align-items:center;justify-content:center;"]);function x({isRefetching:e,onRetry:t}){return e?(0,l.jsx)(g,{children:(0,l.jsx)(y,{children:(0,l.jsx)(h.Z,{size:"small"})})}):(0,l.jsx)(g,{children:(0,l.jsxs)(m.ZP,{type:"para",children:["Unable to load items.",t&&(0,l.jsx)(v,{onClick:t,children:"Retry"})]})})}var b=o(73599),w=o(53186);const k="New Collection";var C=o(31660),E=o.n(C),N=o(494),S=o(98283),_=o(69356),j=o.n(_),q=o(22833),T=o.n(q),R=o(81397),L=o(39245);const F=d()(L.Link).withConfig({displayName:"styled__LinkContainer",componentId:"sc-1oxhokt-0"})(["display:flex;flex:1 1 0%;overflow:hidden;align-items:center;height:100%;width:100%;color:var(--content-color-primary);&:hover{color:var(--content-color-primary);}"]),D=d().span.withConfig({displayName:"styled__IconWithSpacing",componentId:"sc-1oxhokt-1"})(["flex:0;display:flex;justify-content:flex-end;align-items:center;margin-right:var(--spacing-s,8px);height:var(--size-xs,16px);min-width:32px;font-size:9px;"]);var O=o(58560),$=o(56415),P=o(3341);const M=d().div.withConfig({displayName:"left-meta-component__IconContainer",componentId:"sc-1nbtm5g-0"})(["margin-right:var(--spacing-s,4px);display:flex;justify-content:center;align-items:center;&:hover{background-color:var(--highlight-background-color-tertiary);}"]),A=d().div.withConfig({displayName:"left-meta-component__SpacingDiv",componentId:"sc-1nbtm5g-1"})(["width:16px;"]),Z=e=>(0,l.jsxs)(O.Z,{direction:"row",height:"100%",alignItems:"center",children:[e.expandEnabled?(0,l.jsx)(M,{"data-testid":`generic-sidebar-item-toggle-button--${e.itemIdentifier}`,onClick:t=>{t.preventDefault(),t.stopPropagation(),e.onItemToggle&&e.onItemToggle()},children:e.isItemOpen?(0,l.jsx)($.Z,{}):(0,l.jsx)(P.Z,{})}):(0,l.jsx)(A,{}),e.icon&&(0,l.jsx)(O.Z,{basis:28,grow:0,shrink:0,alignItems:"center",justifyContent:"flex-end",children:(0,l.jsx)(D,{children:e.icon})})]});var U=o(17282),z=o(64691),B=o(48263),H=o(59824),W=o(29225);const V=d().div.withConfig({displayName:"action-menu__ActionMenuContainer",componentId:"sc-kv88mk-0"})(["margin-left:var(--spacing-xs);"]),G=e=>{return e.actions.length>0?(0,l.jsx)(V,{children:(0,l.jsxs)(z.Z,{isOpen:e.isActionMenuOpen,closeMenu:()=>{e.onActionMenuClose&&e.onActionMenuClose()},children:[(0,l.jsx)(B.Z,{onClick:()=>{e.onMenuButtonClick&&e.onMenuButtonClick()},children:(0,l.jsx)(I.Z,{"data-testid":"action-menu-button",icon:(0,l.jsx)(W.Z,{}),type:"tertiary"})}),(0,l.jsx)(H.Z,{placement:"bottom-end",children:(t=e.actions,t.map((e=>(0,l.jsx)(U.Z,{isDisabled:!e.isEnabled,type:e.isDestructive?"destructive":"default",onClick:()=>{e.onClick&&e.onClick()},children:e.label},e.type))))})]})}):null;var t},X=e=>e.icons?(0,l.jsx)(O.Z,{alignItems:"center",gap:"spacing-xs",children:e.icons}):null;var J=o(7246);const Q=d().div.withConfig({displayName:"item__SidebarItemWrapper",componentId:"sc-vwge49-0"})(["overflow:hidden;display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;width:100%;"]),K=(0,i.observer)((e=>{const{toggleItem:t,route:o,expandable:s,icon:i,isExpanded:r,name:d,actions:a=[],isEditing:c,clearEditing:p,onRenameSubmit:u,metaIcons:m}=e,[I,f]=(0,n.useState)(!1),[h,g]=(0,n.useState)(!1),[v,y]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{y(h||I)}),[I,h]),(0,l.jsxs)(Q,{onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),onContextMenu:e=>{e.stopPropagation(),g(!0)},children:[(0,l.jsxs)(F,{to:o,customNavEvent:L.OPEN_EXTENSION_URL,"customNavEvent-updateURL":!0,children:[(0,l.jsx)(Z,{expandEnabled:s,icon:i,itemIdentifier:d,isItemOpen:r,onItemToggle:()=>t&&t()}),(0,l.jsx)(R.Z,{content:d,children:(0,l.jsx)(J.InlineEditor,{onSubmit:e=>{u&&u(e)},isEditMode:c,setIsEditMode:e=>{e||p&&p()},value:d})}),(0,l.jsx)(X,{icons:m})]}),v&&(0,l.jsx)(G,{actions:a,isActionMenuOpen:h,onMenuButtonClick:()=>g(!h),onActionMenuClose:()=>{g(!1)}})]})})),Y="rename",ee="delete",te="duplicate",oe="add-request",ne="add-folder";function se(e,t){var o;const s=(0,n.useCallback)((e=>e.data.find((e=>e.id===t))),[t]),{data:i}=(0,w.useCollectionListRawQuery)({workspaceId:e,select:s});if(null!=i&&null!=(o=i.attributes)&&o.permissions){var r;const e=null==i||null==(r=i.attributes)?void 0:r.permissions;return{userCanEdit:e.userCanUpdate,userCanDelete:e.userCanDelete}}return{userCanEdit:!1,userCanDelete:!1}}var ie=o(26246),re=o(19578),de=o(78476);class ae{constructor(){this.filterText="",this.openNodeIds=de.observable.map({}),this.visibleNodeIds=de.observable.map({}),this.isVisibilityFilterActive=void 0,this.selectedNodeId=void 0,this.selectionData=void 0,this.renamingNodeId=void 0,this.treeData=void 0,this.itemCreationLoadingItems={collection:{},folder:{},request:{},response:{}},this.clearRename=()=>{this.renamingNodeId=void 0},this.setRenamingNode=e=>{this.renamingNodeId=e},this.toggleItemExpansion=e=>{this.openNodeIds.has(e)?this.openNodeIds.delete(e):this.openNodeIds.set(e,!0)},this.setItemExpanded=e=>{this.openNodeIds.set(e,!0)},this.setFilterText=e=>{this.filterText=e,this.updateNodesOnFilterChange()},this.updateNodesOnFilterChange=()=>{(0,de.runInAction)((()=>{if(this.filterText||(this.isVisibilityFilterActive=!1,this.visibleNodeIds.clear(),this.openNodeIds.clear()),this.treeData&&this.filterText){const e=function(e,t,o=[]){const n=[];for(const s of e)n.push(...le(s,t,o));return n}(this.treeData,this.filterText.toLowerCase());this.isVisibilityFilterActive=!0,this.visibleNodeIds.clear(),this.openNodeIds.clear();for(const t of e){this.visibleNodeIds.set(t.id,!0);for(const e of t.parentIds)this.visibleNodeIds.set(e,!0),this.openNodeIds.set(e,!0);for(const e of t.childIds)this.visibleNodeIds.set(e,!0)}}}))},this.setSelected=(e,t)=>{if(this.selectedNodeId=e,this.treeData&&this.selectedNodeId){const e=ce(this.treeData,this.selectedNodeId);if(e)for(const t of e)this.openNodeIds.set(t,!0)}e&&t&&this.openNodeIds.set(e,!0)},this.addItemCreationLoadingState=(e,t)=>{this.itemCreationLoadingItems[e][t.parent]||(this.itemCreationLoadingItems[e][t.parent]={after:{},end:new Set}),t.after?(t.after&&!this.itemCreationLoadingItems[e][t.parent].after[t.after]&&(this.itemCreationLoadingItems[e][t.parent].after[t.after]=new Set),t.after&&this.itemCreationLoadingItems[e][t.parent].after[t.after].add(t.id)):this.itemCreationLoadingItems[e][t.parent].end.add(t.id)},(0,de.makeObservable)(this,{filterText:de.observable,isVisibilityFilterActive:de.observable,selectedNodeId:de.observable,renamingNodeId:de.observable,itemCreationLoadingItems:de.observable,toggleItemExpansion:de.action,setSelected:de.action,addItemCreationLoadingState:de.action,removeItemCreationLoadingState:de.action,setItemExpanded:de.action,clearRename:de.action,setRenamingNode:de.action,setFilterText:de.action}),this.updateNodesOnFilterChange=function(e,t){let o;return function(...t){clearTimeout(o),o=setTimeout((()=>{e(...t)}),250)}}(this.updateNodesOnFilterChange)}setTreeData(e){this.treeData=e}removeItemCreationLoadingState(e,t){var o,n;t.after&&(null==(n=this.itemCreationLoadingItems[e][t.parent])||null==(n=n.after)||null==(n=n[t.after])||n.delete(t.id)),null==(o=this.itemCreationLoadingItems[e][t.parent])||o.end.delete(t.id)}}function le(e,t,o=[],n=!1){var s;const i=[];if(null!=(s=e.name)&&s.toLowerCase().includes(t)||n){const t={id:e.id,parentIds:[...o],childIds:e.children.map((e=>e.id))};n=!0,i.push(t)}for(const s of e.children){const r=[...o,e.id];i.push(...le(s,t,r,n))}return i}function ce(e,t,o=[]){for(const n of e){if(n.id===t)return o;if(n.children){const e=[...o,n.id],s=ce(n.children,t,e);if(s)return s}}return null}const pe=(0,n.createContext)(new ae);function ue(e){const t=(0,n.useRef)(new ae),o=!!e.collectionTrees;return(0,n.useEffect)((()=>{e.collectionTrees&&t.current.setTreeData(e.collectionTrees)}),[e.collectionTrees,t]),(0,n.useEffect)((()=>{t.current.setSelected(e.selectedItemId,e.expandSelected)}),[e.selectedItemId,e.expandSelected,o,t.current.setSelected]),(0,l.jsx)(pe.Provider,{value:t.current,children:e.children})}function me(){const e=(0,n.useContext)(pe);if(!e)throw new Error("useSidebarListUIState should only be used inside CollectionListUIStateProvider");return e}function Ie(e){const t=me(),o=(0,n.useCallback)(((o,n,s)=>{t.addItemCreationLoadingState(e,{id:o,parent:n,after:s})}),[e,t]),s=(0,n.useCallback)(((o,n,s)=>{t.removeItemCreationLoadingState(e,{id:o,parent:n,after:s})}),[e,t]);return{itemCreationLoadingItems:t.itemCreationLoadingItems[e],addItem:o,removeItem:s}}function fe(){return me().setItemExpanded}function he(){const e=me();return{clearRename:e.clearRename,renamingNodeId:e.renamingNodeId,setRenamingNode:e.setRenamingNode}}var ge=o(56880),ve=o(12244);function ye(e){const t=me(),o=t.openNodeIds.has(e);return(0,n.useCallback)((()=>t.toggleItemExpansion(e)),[e,o,t])}var xe=o(37691);const be=d().div.withConfig({displayName:"fork-label__ForkLabelWrapper",componentId:"sc-1yreyox-0"})(["display:flex;align-items:center;overflow:hidden;"]),we=d().p.withConfig({displayName:"fork-label__LabelContainer",componentId:"sc-1yreyox-1"})(["display:inline-block;white-space:nowrap;overflow:hidden;max-width:120px;margin-left:var(--spacing-xs);font-size:var(--text-size-s);font-weight:var(--text-weight-regular);text-overflow:ellipsis;color:var(--content-color-tertiary);"]),ke=({label:e})=>(0,l.jsxs)(be,{children:[(0,l.jsx)(xe.Z,{color:"content-color-tertiary",size:"small"}),(0,l.jsx)(we,{children:e})]});var Ce=o(83729);const Ee=()=>(0,l.jsx)("div",{"data-testid":"collection-lock-icon",children:(0,l.jsx)(Ce.Z,{})});var Ne=o(97698),Se=o(33249);const _e="collection",je="folder",qe="request",Te=e=>{const[t,o]=(0,n.useState)(),[s,i]=(0,n.useState)(),[r,d]=(0,n.useState)(),{data:a}=(0,w.useCollectionList)({workspaceId:e.workspaceId}),l=(0,w.useMoveRequest)(),c=(0,w.useMoveFolder)(),{userCanEdit:p}=se(e.workspaceId,e.parentCollectionId),u=(0,n.useRef)(null),m=(0,n.useCallback)((t=>{p&&(u.current=t,e.type===_e?k(u):v(k(u)))}),[]),I=e=>{switch(e){case"bottom":s||(i(!0),o(!1),d(!1));break;case"top":t||(i(!1),d(!1),o(!0));break;case"on":r||(d(!0),o(!1),i(!1));break;default:i(!1),o(!1),d(!1)}},f=(t,o,n)=>{e.handleMoveResult&&e.handleMoveResult({ids:t,type:o,result:"success"},n)},h=(t,o,n,s)=>{e.handleMoveResult&&e.handleMoveResult({ids:t,type:o,result:"error",message:s})};(0,n.useEffect)((()=>{y((0,Se.getEmptyImage)())}),[]);const[{isDragging:g},v,y]=(0,Ne.useDrag)((()=>({type:e.type,item:{id:e.itemId,name:e.itemName,type:e.type,collectionId:e.parentCollectionId,folderId:e.parentFolderId},collect:e=>({isDragging:e.isDragging()})}))),[{canDrop:x,isOver:b},k]=(0,Ne.useDrop)((()=>({accept:e.type===qe?qe:[je,qe],collect:e=>({isOver:e.isOver(),canDrop:e.canDrop()}),hover:(t,o)=>{var n;if(!u.current)return;if(t.id===e.itemId)return;const s=o.getClientOffset(),i=null==(n=u.current)?void 0:n.getBoundingClientRect(),r=i.top+30-7.5,d=i.top+7.5;s&&(s.y>r?I("bottom"):s.y<d?I("top"):s.y<r&&s.y>d&&I("on"))},drop(o){if(o.id===e.itemId)return;(async(o,n)=>{const{targetIndex:s,newParent:i}=((e,t,o,n,s,i)=>{const r={};let d=0;const a=null==o?void 0:o.find((e=>e.id===t.collectionId)),l=t.folderId&&a?(0,w.findParentFolderById)(t.folderId,a.folders):a;if(e.type===qe)if(t.type===qe){var c;r.type=t.folderId?"folder":"collection",r.id=t.folderId||t.collectionId;const e=null!=(c=null==l?void 0:l.order.indexOf(t.id))?c:0;d=n?e:e+1}else r.type=t.type,r.id=t.id,d=l?l.requests.length:0;if(e.type===je)if(t.type===je)if(i)r.type=t.type,r.id=t.id,d=l?l.folders.length:0;else{var p,u;r.type=t.folderId?je:_e,r.id=null!=(p=t.folderId)?p:t.collectionId;const e=null!=(u=null==l?void 0:l.folders_order.indexOf(t.id))?u:0;d=n?e:e+1}else r.type=_e,r.id=t.collectionId,d=l?l.folders_order.length:0;return{newParent:r,targetIndex:d}})(o,n,a,t,0,r);if(o.type===qe&&l.mutate({workspaceId:e.workspaceId,requestIds:[o.id],sourceCollectionId:o.collectionId,sourceFolderId:o.folderId,targetCollectionId:n.collectionId,targetFolderId:i.type===je?i.id:null,targetIndex:s,onSuccess:f,onError:h}),o.type===je){var d;if(null!=(d=n.parentFolderIds)&&d.includes(o.id))return void h([o.id],je,new Error("Invalid operation"),"Cannot move folder into child folder");c.mutate({workspaceId:e.workspaceId,folderIds:[o.id],sourceCollectionId:o.collectionId,sourceFolderId:o.folderId,targetCollectionId:n.collectionId,targetFolderId:i.type===je?i.id:null,targetIndex:s,onSuccess:f,onError:h})}})(o,{type:e.type,id:e.itemId,collectionId:e.parentCollectionId,folderId:e.parentFolderId,parentFolderIds:e.parentFolderIds})}})),[t,s]);return{isDragging:g,setRef:m,canDrop:x,isOver:b,dropHoverTop:t,dropHoverBottom:s,dropHoverOn:r}},Re=d()(O.Z).withConfig({displayName:"toast-content-with-cta__Container",componentId:"sc-1v41prx-0"})(["flex-direction:column;button{margin-top:var(--spacing-s);max-width:80px;margin-bottom:calc(var(--spacing-l) * -1);}"]),Le=({message:e,ctaText:t,ctaHandler:o})=>(0,l.jsxs)(Re,{children:[(0,l.jsx)(m.ZP,{children:e}),o&&(0,l.jsx)(I.Z,{size:"small",onClick:o,type:"secondary",text:t})]}),Fe=()=>{const{addToast:e,removeToast:t}=(0,s.ZP)();return(o,n)=>{if("success"===o.result){const s=e({status:"success",description:(0,l.jsx)(Le,{message:`${i=o.type,i.charAt(0).toUpperCase()+i.slice(1)} moved successfully`,ctaText:"Undo",ctaHandler:n?()=>{n(),t(s)}:void 0})})}else{var s;e({status:"error",description:null!=(s=o.message)?s:`Error moving ${o.type}`})}var i}};var De=o(99665);const Oe=d().div.withConfig({displayName:"git-link-label__BranchLabelWrapper",componentId:"sc-1psswde-0"})(["display:flex;align-items:center;"]),$e=d().p.withConfig({displayName:"git-link-label__LabelContainer",componentId:"sc-1psswde-1"})(["display:inline-block;white-space:nowrap;overflow:hidden;max-width:120px;margin-left:var(--spacing-xs);font-size:var(--text-size-s);font-weight:var(--text-weight-regular);text-overflow:ellipsis;color:var(--content-color-error);"]),Pe=({label:e})=>(0,l.jsx)(R.Z,{content:"This collection is connected to a Git repository. To make changes, use Postman Web/Desktop App.",placement:"bottom-start",children:(0,l.jsxs)(Oe,{children:[(0,l.jsx)(De.Z,{color:"content-color-error",size:"small"}),(0,l.jsx)($e,{children:e})]})}),Me=d().div.withConfig({displayName:"collection-item__StyledCollectionItem",componentId:"sc-r7p3lq-0"})(["width:100%;box-shadow:",";"],(e=>e.isOver?"inset 0px 0px 0px 2px var(--button-primary-hover-background-color);":"")),Ae=(0,i.observer)((e=>{var t;const{item:o,actions:s,permissions:i}=function(e,t){const{userCanEdit:o,userCanDelete:s}=se(e,t),{userCanRunCollection:i}=(0,w.useWorkspacePermissions)(e),{data:r}=(0,ve.useGetGitLinkedEntity)({entityId:t,entityType:"collection"}),{addToast:d}=re.Toast.getToasts(),{setRenamingNode:l,clearRename:c}=he(),{addItem:p,removeItem:u}=Ie("collection"),m=ie.Modals.getModals(),I=(0,re.getTabManager)(),f=(0,L.useNavigate)(),{addItem:h,removeItem:g}=Ie("request"),{addItem:v,removeItem:y}=Ie("folder"),x=fe(),b=(0,w.useDeleteCollection)(),k=(0,w.useDuplicateCollection)(),C=(0,w.useCreateRequest)(),E=(0,w.useCreateNewFolder)(),N=(0,n.useCallback)((e=>e.data.find((e=>e.id===t))),[t]),{data:S}=(0,w.useCollectionListRawQuery)({workspaceId:e,select:N}),_=[{type:oe,label:"Add Request",isEnabled:o&&!(null!=r&&r.data),onClick:()=>{const o=(0,a.v4)();h(o,t),x(t),C.mutate({workspaceId:e,collectionId:t,parentFolderIds:[],request:{id:o,name:"New request",method:"GET",url:"",events:[],auth:null,collection:t,responses:[],responses_order:[]}},{onSuccess:({data:t})=>{f(`/workspace/${e}/request/${t.id}`,{state:JSON.stringify({additionalContext:{rename:!0}})},{customNavEvent:L.OPEN_EXTENSION_URL}),ge.AnalyticsService.addEventV2({category:"http-request",action:"create",label:"sidebar",value:1})},onSettled:()=>{g(o,t)},onError:()=>{d({status:"error",description:"Could not create request."})}})}},{type:ne,label:"Add Folder",isEnabled:o&&!(null!=r&&r.data),onClick:()=>{const o=(0,a.v4)();v(o,t),x(t),E.mutate({workspaceId:e,collectionId:t,parentFolderIds:[],requestBody:{id:o,name:"New folder",collection:t}},{onSuccess:({data:t})=>{f(`/workspace/${e}/folder/${t.id}`,{state:JSON.stringify({additionalContext:{rename:!0}})},{customNavEvent:L.OPEN_EXTENSION_URL}),ge.AnalyticsService.addEventV2({category:"http-folder",action:"create",label:"sidebar",value:1})},onSettled:()=>{y(o,t)},onError:()=>{d({status:"error",description:"Could not create folder."})}})}},{type:"run-collection",label:"Run Collection",isEnabled:i,onClick:()=>{f(`/workspace/${e}/run/create?collection=${t}&type=manual-run`,{},{customNavEvent:L.OPEN_EXTENSION_URL}),ge.AnalyticsService.addEventV2({category:"collectionrun",action:"open_run_create",label:"collection_sidebar",entityType:"collection",entityId:t})}},{type:"view-documentation",label:"View Documentation",isEnabled:!0,onClick:()=>{f(`/workspace/${e}/documentation/${t}`,{},{customNavEvent:L.OPEN_EXTENSION_URL}),ge.AnalyticsService.addEventV2({category:"documentation",action:"view_documentation",label:"collection_sidebar",entityType:"collection",entityId:t})}},{type:Y,label:"Rename",isEnabled:o&&!(null!=r&&r.data),onClick:()=>{c(),l(t)}},{type:te,label:"Duplicate",isEnabled:o&&!(null!=r&&r.data),onClick:()=>{const o=(0,a.v4)();p(o,e,t),k.mutate({workspaceId:e,collectionId:t},{onError:()=>{d({status:"error",description:"Could not duplicated collection."})},onSettled:()=>{u(o,e,t)},onSuccess:({data:t})=>{f(`/workspace/${e}/collection/${(0,w.composeUID)(t.id,t.owner)}`,{state:JSON.stringify({additionalContext:{rename:!0}})},{customNavEvent:L.OPEN_EXTENSION_URL})}})}},{type:ee,label:"Delete",isEnabled:s&&!(null!=r&&r.data),isDestructive:!0,onClick:async()=>{var o;const n=await m.showWarningDialog({uid:"collections-sidebar-delete-collection",subject:null!=S&&null!=(o=S.attributes.fork)&&o.forkLabel?"Delete this forked collection?":`Delete "${null==S?void 0:S.name}"?`,message:"This will delete the monitors, scheduled runs and integrations and deactivate the mock servers associated with this collection.",options:[{title:"Cancel",isDefaultOnDismiss:!0},{title:"Delete",isPrimary:!0}]});n&&"Delete"===n.title&&b.mutate({workspaceId:e,collectionId:t,onSuccess:()=>{I.closeTabByRoute(`/workspace/${e}/collection/${t}`)}},{onError:()=>{d({status:"error",description:"Could not delete collection."})}})}}];return{item:S,actions:_,permissions:{userCanEdit:o,userCanDelete:s}}}(e.workspaceId,e.collectionId),[r,d]=(0,n.useState)(!1),{data:c}=(0,ve.useGetGitLinkedEntity)({entityId:e.collectionId,entityType:"collection"}),p=ye(e.collectionId),{clearRename:u,renamingNodeId:m}=he(),I=(0,w.useUpdateUpdateCollectionInList)(),f=Fe(),{setRef:h,isOver:g}=Te({itemId:e.collectionId,workspaceId:e.workspaceId,parentCollectionId:e.collectionId,type:_e,handleMoveResult:f});if((0,n.useEffect)((()=>{o&&o.id===m?d(!0):d(!1)}),[m,o]),!o)return null;const v=[];return null!=(t=o.attributes.fork)&&t.forkLabel&&v.push((0,l.jsx)(ke,{label:o.attributes.fork.forkLabel})),i.userCanEdit||v.push((0,l.jsx)(Ee,{})),null!=c&&c.data&&c.data.branch&&v.push((0,l.jsx)(Pe,{label:c.data.branch})),(0,l.jsx)(Me,{ref:h,isOver:g,children:(0,l.jsx)(K,{name:o.name,expandable:!0,isExpanded:!!e.isExpanded,route:`/workspace/${e.workspaceId}/collection/${e.collectionId}`,actions:s,toggleItem:p,isEditing:r,clearEditing:u,onRenameSubmit:t=>{u(),t!==o.name&&I.mutate({workspaceId:e.workspaceId,collectionId:e.collectionId,patch:{id:e.collectionId,name:t}})},metaIcons:v})})}));var Ze=o(35547);function Ue(e,t,o){const n=t[0],s=t.slice(1);if(!n)return;const i=o.find((e=>e.id===n));return i?s.length>0?Ue(e,s,i.folders):i.folders.find((t=>t.id===e)):void 0}function ze(e){const{userCanEdit:t,userCanDelete:o}=se(e.workspaceId,e.collectionId),{userCanRunCollection:s}=(0,w.useWorkspacePermissions)(e.workspaceId),{addItem:i,removeItem:r}=Ie("request"),{data:d}=(0,ve.useGetGitLinkedEntity)({entityId:e.collectionId,entityType:"collection"}),{addToast:l}=re.Toast.getToasts(),c=(0,L.useNavigate)(),{addItem:p,removeItem:u}=Ie("folder"),m=(0,w.useCreateRequest)(),I=(0,w.useCreateNewFolder)(),f=fe(),h=(j=e.collectionId,(q=e.parentFolderIds)&&q.length>0?{model:"folder",id:q.at(-1)}:{model:"collection",id:j}),{addItem:g,removeItem:v}=Ie("folder"),{setRenamingNode:y,clearRename:x}=he(),b=ie.Modals.getModals(),k=(0,re.getTabManager)(),C=(0,w.useDeleteFolder)(),E=(0,w.useDuplicateFolder)(),N=(0,n.useCallback)((t=>{const o=t.data.find((t=>t.id===e.collectionId));if(o)return e.parentFolderIds?Ue(e.folderId,e.parentFolderIds,o.folders):o.folders.find((t=>t.id===e.folderId))}),[e.collectionId,e.parentFolderIds,e.folderId]),{data:S}=(0,w.useCollectionListRawQuery)({workspaceId:e.workspaceId,select:N}),_=[{type:oe,label:"Add Request",isEnabled:t&&!(null!=d&&d.data),onClick:()=>{const t=(0,a.v4)();i(t,e.folderId),f(e.folderId),m.mutate({workspaceId:e.workspaceId,collectionId:e.collectionId,parentFolderIds:e.parentFolderIds?[...e.parentFolderIds,e.folderId]:[e.folderId],request:{id:t,name:"New request",method:"GET",url:"",events:[],auth:null,collection:e.collectionId,folder:e.folderId,responses:[],responses_order:[]}},{onSuccess:({data:t})=>{c(`/workspace/${e.workspaceId}/request/${t.id}`,{state:JSON.stringify({additionalContext:{rename:!0}})},{customNavEvent:L.OPEN_EXTENSION_URL}),ge.AnalyticsService.addEventV2({category:"http-request",action:"create",label:"sidebar",value:1})},onSettled:()=>{r(t,e.folderId)},onError:()=>{l({status:"error",description:"Could not create request."})}})}},{type:ne,label:"Add Folder",isEnabled:t&&!(null!=d&&d.data),onClick:()=>{const t=(0,a.v4)();p(t,e.folderId),f(e.folderId),I.mutate({workspaceId:e.workspaceId,collectionId:e.collectionId,parentFolderIds:e.parentFolderIds?[...e.parentFolderIds,e.folderId]:[e.folderId],requestBody:{id:t,name:"New folder",folder:e.folderId,collection:e.collectionId}},{onSuccess:({data:t})=>{c(`/workspace/${e.workspaceId}/folder/${t.id}`,{state:JSON.stringify({additionalContext:{rename:!0}})},{customNavEvent:L.OPEN_EXTENSION_URL}),ge.AnalyticsService.addEventV2({category:"http-folder",action:"create",label:"sidebar",value:1})},onSettled:()=>{u(t,e.folderId)},onError:()=>{l({status:"error",description:"Could not create folder."})}})}},{type:"run-folder",label:"Run Folder",isEnabled:s,onClick:()=>{c(`/workspace/${e.workspaceId}/run/create?folder=${e.folderId}&collection=${e.collectionId}&type=manual-run`,{},{customNavEvent:L.OPEN_EXTENSION_URL}),ge.AnalyticsService.addEventV2({category:"collectionrun",action:"open_run_create",label:"folder_sidebar",entityType:"folder",entityId:e.folderId})}},{type:Y,label:"Rename",isEnabled:t&&!(null!=d&&d.data),onClick:()=>{x(),y(e.folderId)}},{type:te,label:"Duplicate",isEnabled:t&&!(null!=d&&d.data),onClick:()=>{const t=(0,a.v4)();g(t,h.id,e.folderId),E.mutate({workspaceId:e.workspaceId,collectionId:e.collectionId,parentFolderIds:e.parentFolderIds||[],requestBody:{ids:[e.folderId],target:h,location:{position:"after",model:"folder",id:e.folderId},mode:"copy"}},{onError:()=>{l({status:"error",description:"Could not duplicate folder."})},onSuccess:({data:t})=>{c(`/workspace/${e.workspaceId}/folder/${t.ids[0]}`,{},{customNavEvent:L.OPEN_EXTENSION_URL})},onSettled:()=>{v(t,h.id,e.folderId)}})}},{type:ee,label:"Delete",isEnabled:o&&!(null!=d&&d.data),isDestructive:!0,onClick:async()=>{const t=await b.showWarningDialog({uid:"collections-sidebar-delete-folder",subject:`DELETE ${null==S?void 0:S.name}?`,message:`Are you sure you want to delete ${null==S?void 0:S.name}?`,options:[{title:"Cancel",isDefaultOnDismiss:!0},{title:"Delete",isPrimary:!0}]});t&&"Delete"===t.title&&C.mutate({workspaceId:e.workspaceId,collectionId:e.collectionId,parentFolderIds:e.parentFolderIds||[],folderId:e.folderId,onSuccess:()=>{k.closeTabByRoute(`/workspace/${e.workspaceId}/folder/${e.folderId}`)}},{onError:()=>{l({status:"error",description:"Could not delete folder."})}})}}];var j,q;return{item:S,actions:_}}const Be=d().div.withConfig({displayName:"folder-item__StyledFolderItem",componentId:"sc-129qa3x-0"})(["width:100%;box-shadow:",";"],(e=>e.isOver?e.dropHoverTop?"0 -2px 0 var(--button-primary-hover-background-color)":e.dropHoverBottom?"inset 0px -2px var(--button-primary-hover-background-color)":e.dropHoverOn?"inset 0px 0px 0px 2px var(--button-primary-hover-background-color);":"":"")),He=(0,i.observer)((e=>{var t;const{item:o,actions:s}=ze({workspaceId:e.workspaceId,collectionId:e.collectionId,parentFolderIds:e.parentFolderIds,folderId:e.folderId}),[i,r]=(0,n.useState)(!1),d=ye(e.folderId),{clearRename:a,renamingNodeId:c}=he(),p=(0,w.useUpdateFolderInList)(),u=Fe(),{setRef:m,isOver:I,dropHoverBottom:f,dropHoverTop:h,dropHoverOn:g}=Te({itemId:e.folderId,itemName:null==o?void 0:o.name,workspaceId:e.workspaceId,parentCollectionId:e.collectionId,parentFolderId:null==(t=e.parentFolderIds)?void 0:t.at(-1),parentFolderIds:e.parentFolderIds,type:je,handleMoveResult:u});return(0,n.useEffect)((()=>{o&&o.id===c?r(!0):r(!1)}),[c,o]),o?(0,l.jsx)(Be,{ref:m,isOver:I,dropHoverTop:h,dropHoverBottom:f,dropHoverOn:g,children:(0,l.jsx)(K,{name:o.name,expandable:!0,isExpanded:!!e.isExpanded,route:`/workspace/${e.workspaceId}/folder/${e.folderId}`,icon:(0,l.jsx)(Ze.Z,{}),isEditing:i,clearEditing:a,onRenameSubmit:t=>{a(),t!==o.name&&p.mutate({workspaceId:e.workspaceId,collectionId:e.collectionId,folderId:e.folderId,parentFolderIds:e.parentFolderIds||[],patch:{id:e.folderId,name:t}})},actions:s,toggleItem:d})}):null}));function We(e,t,o){const n=t[0],s=t.slice(1);if(!n)return;const i=o.find((e=>e.id===n));return i?s.length>0?We(e,s,i.folders):i.requests.find((t=>t.id===e)):void 0}function Ve(e){const{userCanEdit:t,userCanDelete:o}=se(e.workspaceId,e.collectionId),{data:s}=(0,ve.useGetGitLinkedEntity)({entityId:e.collectionId,entityType:"collection"}),{setRenamingNode:i,clearRename:r}=he(),{addItem:d,removeItem:l}=Ie("request"),{addItem:c,removeItem:p}=Ie("response"),u=ie.Modals.getModals(),m=(0,re.getTabManager)(),{addToast:I}=re.Toast.getToasts(),f=(0,L.useNavigate)(),h=fe(),g=(E=e.collectionId,(N=e.parentFolderIds)&&N.length>0?{model:"folder",id:N.at(-1)}:{model:"collection",id:E}),v=(0,w.useDeleteRequest)(),y=(0,w.useDuplicateRequest)(),x=(0,w.useCreateResponse)(),b=(0,n.useCallback)((t=>{const o=t.data.find((t=>t.id===e.collectionId));if(o)return e.parentFolderIds?We(e.requestId,e.parentFolderIds,o.folders):o.requests.find((t=>t.id===e.requestId))}),[e.collectionId,e.parentFolderIds,e.requestId]),{data:k}=(0,w.useCollectionListRawQuery)({workspaceId:e.workspaceId,select:b}),C=[{type:"add-example",label:"Add Example",isEnabled:t&&!(null!=s&&s.data),onClick:()=>{const t=(0,a.v4)();c(t,e.requestId),h(e.requestId),k&&x.mutate({workspaceId:e.workspaceId,collectionId:e.collectionId,parentFolderIds:e.parentFolderIds,requestId:e.requestId,name:null==k?void 0:k.name},{onSuccess:({data:t})=>{f(`/workspace/${e.workspaceId}/example/${t.id}`,{state:JSON.stringify({additionalContext:{rename:!0}})},{customNavEvent:L.OPEN_EXTENSION_URL}),ge.AnalyticsService.addEventV2({category:"http-example",action:"create",label:"sidebar",value:1})},onSettled:()=>{p(t,e.requestId)},onError:()=>{I({status:"error",description:"Could not create example."})}})}},{type:Y,label:"Rename",isEnabled:t&&!(null!=s&&s.data),onClick:()=>{r(),i(e.requestId)}},{type:te,label:"Duplicate",isEnabled:t&&!(null!=s&&s.data),onClick:()=>{const t=(0,a.v4)();d(t,g.id,e.requestId),y.mutate({workspaceId:e.workspaceId,collectionId:e.collectionId,parentFolderIds:e.parentFolderIds||[],requestBody:{ids:[e.requestId],target:g,location:{position:"after",model:"request",id:e.requestId},mode:"copy"}},{onError:()=>{I({status:"error",description:"Could not duplicate request."})},onSuccess:({data:t})=>{f(`/workspace/${e.workspaceId}/request/${t.ids[0]}`,{},{customNavEvent:L.OPEN_EXTENSION_URL})},onSettled:()=>{l(t,g.id,e.requestId)}})}},{type:ee,label:"Delete",isEnabled:o&&!(null!=s&&s.data),isDestructive:!0,onClick:async()=>{const t=await u.showWarningDialog({uid:"collections-sidebar-delete-request",subject:`DELETE ${null==k?void 0:k.name}?`,message:`Are you sure you want to delete ${null==k?void 0:k.name}?`,options:[{title:"Cancel",isDefaultOnDismiss:!0},{title:"Delete",isPrimary:!0}]});t&&"Delete"===t.title&&v.mutate({workspaceId:e.workspaceId,collectionId:e.collectionId,parentFolderIds:e.parentFolderIds||[],requestId:e.requestId,onSuccess:()=>{m.closeTabByRoute(`/workspace/${e.workspaceId}/request/${e.requestId}`)}},{onError:()=>{I({status:"error",description:"Could not delete request."})}})}}];var E,N;return{item:k,actions:C}}const Ge={PROPFIND:"PROP",DELETE:"DEL",OPTIONS:"OPT",UNLINK:"UNLNK",UNLOCK:"UNLCK"},Xe=e=>e?Ge[e]||e.slice(0,5):null,Je=d().div.withConfig({displayName:"icon__Container",componentId:"sc-dpfx06-0"})(["font-family:var(--text-family-code);font-weight:450;font-size:8px;line-height:15px;color:",";"],(({method:e})=>{switch(e){case"GET":return"var(--base-color-success, #0CBB52)";case"PUT":return"var(--base-color-info, #097BED)";case"POST":return"var(--base-color-warning, #FFB400)";case"DELETE":return"var(--base-color-error, #EB2013)";default:return"var(--content-color-primary, #212121)"}}));function Qe(e){const t=e.method.toUpperCase();return(0,l.jsx)(Je,{method:t,children:(0,l.jsx)("div",{children:Xe(t)})})}const Ke=d().div.withConfig({displayName:"request-item__StyledRequestItem",componentId:"sc-og8vfj-0"})(["width:100%;opacity:",";box-shadow:",";"],(e=>e.isDragging?"0.5":"1"),(e=>e.dropHoverTop&&e.isOver?"0 -2px 0 var(--button-primary-hover-background-color)":e.dropHoverBottom&&e.isOver?"inset 0px -2px var(--button-primary-hover-background-color)":"")),Ye=(0,i.observer)((e=>{var t;const{item:o,actions:s}=Ve({workspaceId:e.workspaceId,collectionId:e.collectionId,parentFolderIds:e.parentFolderIds,requestId:e.requestId}),[i,r]=(0,n.useState)(!1),d=Fe(),{isDragging:a,isOver:c,dropHoverTop:p,dropHoverBottom:u,setRef:m}=Te({itemId:e.requestId,itemName:null==o?void 0:o.name,workspaceId:e.workspaceId,parentCollectionId:e.collectionId,parentFolderId:null==(t=e.parentFolderIds)?void 0:t.at(-1),type:qe,handleMoveResult:d}),I=ye(e.requestId),{clearRename:f,renamingNodeId:h}=he(),g=(0,w.useUpdateRequestInList)();return(0,n.useEffect)((()=>{o&&o.id===h?r(!0):r(!1)}),[h,o]),o?(0,l.jsx)(Ke,{ref:m,isOver:c,isDragging:a,dropHoverTop:p,dropHoverBottom:u,children:(0,l.jsx)(K,{name:o.name,expandable:o.responses_order.length>0,isExpanded:!!e.isExpanded,route:`/workspace/${e.workspaceId}/request/${e.requestId}`,icon:(0,l.jsx)(Qe,{method:o.method}),actions:s,isEditing:i,clearEditing:f,onRenameSubmit:t=>{f(),t!==o.name&&g.mutate({workspaceId:e.workspaceId,collectionId:e.collectionId,requestId:e.requestId,parentFolderIds:e.parentFolderIds||[],patch:{id:e.requestId,name:t}})},toggleItem:I})}):null})),et=d().div.withConfig({displayName:"loading-item__Loading",componentId:"sc-6h2cd9-0"})(["padding-left:var(--spacing-xxl);display:flex;width:100%;animation:fade 1s ease-in-out infinite;"]),tt=d().div.withConfig({displayName:"loading-item__IconLoadingBlock",componentId:"sc-6h2cd9-1"})(["height:var(--size-xs);width:var(--size-xs);background-color:var(--highlight-background-color-secondary);"]),ot=d().div.withConfig({displayName:"loading-item__NameLoadingBlock",componentId:"sc-6h2cd9-2"})(["margin-left:var(--spacing-s);height:var(--size-xs);background-color:var(--highlight-background-color-secondary);width:100px;"]);function nt(){return(0,l.jsxs)(et,{children:[(0,l.jsx)(tt,{}),(0,l.jsx)(ot,{})]})}const st=d().div.withConfig({displayName:"collection-empty-item__EmptyWraper",componentId:"sc-1jnf69k-0"})(["padding-left:var(--spacing-xxl);display:flex;width:100%;flex-direction:column;"]);function it(e){const t=(0,L.useNavigate)(),{addItem:o,removeItem:n}=Ie("request"),{userCanEdit:s}=se(e.workspaceId,e.collectionId),i=fe(),r=(0,w.useCreateRequest)();return(0,l.jsxs)(st,{children:[(0,l.jsx)(m.ZP,{color:"content-color-secondary",type:"body-medium",children:"This collection is empty"}),s&&(0,l.jsxs)(m.ZP,{color:"content-color-secondary",type:"body-medium",children:[(0,l.jsx)(I.Z,{onClick:()=>{(()=>{const s=(0,a.v4)();o(s,e.collectionId),i(e.collectionId),r.mutate({workspaceId:e.workspaceId,collectionId:e.collectionId,parentFolderIds:[],request:{id:s,name:"New request",method:"GET",url:"",events:[],auth:null,collection:e.collectionId,responses:[],responses_order:[]},onSuccess:({data:o})=>{t(`/workspace/${e.workspaceId}/request/${o.id}`,{state:JSON.stringify({additionalContext:{rename:!0}})},{customNavEvent:L.OPEN_EXTENSION_URL}),ge.AnalyticsService.addEventV2({category:"http-request",action:"create",label:"sidebar",value:1})},onSettled:()=>{n(s,e.collectionId)},onError:()=>{re.Toast.getToasts().addToast({status:"error",description:"Could not create request."})}})})()},type:"plain",text:"Add a request"})," to start working"]})]})}const rt=d().div.withConfig({displayName:"folder-empty-item__EmptyWraper",componentId:"sc-guxea6-0"})(["padding-left:var(--spacing-xxl);display:flex;width:100%;flex-direction:column;"]);function dt(e){const t=(0,L.useNavigate)(),{addItem:o,removeItem:n}=Ie("request"),{userCanEdit:s}=se(e.workspaceId,e.collectionId),i=fe(),r=(0,w.useCreateRequest)();return(0,l.jsxs)(rt,{children:[(0,l.jsx)(m.ZP,{color:"content-color-secondary",type:"body-medium",children:"This folder is empty"}),s&&(0,l.jsxs)(m.ZP,{color:"content-color-secondary",type:"body-medium",children:[(0,l.jsx)(I.Z,{onClick:()=>{(()=>{const s=(0,a.v4)();o(s,e.folderId),i(e.folderId),r.mutate({workspaceId:e.workspaceId,collectionId:e.collectionId,parentFolderIds:e.parentFolderIds,request:{id:s,name:"New request",method:"GET",url:"",events:[],auth:null,collection:e.collectionId,folder:e.folderId,responses:[],responses_order:[]},onSettled:()=>{n(s,e.folderId)},onSuccess:({data:o})=>{t(`/workspace/${e.workspaceId}/request/${o.id}`,{state:JSON.stringify({additionalContext:{rename:!0}})},{customNavEvent:L.OPEN_EXTENSION_URL}),ge.AnalyticsService.addEventV2({category:"http-request",action:"create",label:"sidebar",value:1})},onError:()=>{re.Toast.getToasts().addToast({status:"error",description:"Could not create request."})}})})()},type:"plain",text:"Add a request"})," to start working"]})]})}var at=o(10907);const lt=(0,i.observer)((e=>{const{item:t,isLoading:o,actions:s}=function(e){const{userCanEdit:t}=se(e.workspaceId,e.collectionId),{data:o}=(0,ve.useGetGitLinkedEntity)({entityId:e.collectionId,entityType:"collection"}),{data:n,isLoading:s}=(0,w.useResponseMeta)({responseId:e.responseId}),{addItem:i,removeItem:r}=Ie("response"),{addToast:d}=re.Toast.getToasts(),l=(0,w.useDuplicateResponse)(),c=(0,L.useNavigate)(),p=(0,w.useDeleteResponse)(),u=ie.Modals.getModals(),m=(0,re.getTabManager)(),{clearRename:I,setRenamingNode:f}=he(),h=[{type:Y,label:"Rename",isEnabled:t&&!(null!=o&&o.data),onClick:()=>{I(),f(e.responseId)}},{type:te,label:"Duplicate",isEnabled:t&&!(null!=o&&o.data),onClick:()=>{const t=(0,a.v4)();i(t,e.requestId,e.responseId),l.mutate({collectionId:e.collectionId,parentFolderIds:e.parentFolderIds,requestId:e.requestId,workspaceId:e.workspaceId,responseId:e.responseId},{onError:()=>{d({status:"error",description:"Could not duplicate example."})},onSuccess:({data:t})=>{c(`/workspace/${e.workspaceId}/example/${t.ids[0]}`,{state:JSON.stringify({additionalContext:{rename:!0}})},{customNavEvent:L.OPEN_EXTENSION_URL})},onSettled:()=>{r(t,e.requestId,e.responseId)}})}},{type:ee,label:"Delete",isEnabled:t&&!(null!=o&&o.data),isDestructive:!0,onClick:async()=>{var t,o;const s=await u.showWarningDialog({uid:"collections-sidebar-delete-response",subject:`DELETE ${null==n||null==(t=n.data)?void 0:t.name}?`,message:`Are you sure you want to delete ${null==n||null==(o=n.data)?void 0:o.name}?`,options:[{title:"Cancel",isDefaultOnDismiss:!0},{title:"Delete",isPrimary:!0}]});s&&"Delete"===s.title&&p.mutate({workspaceId:e.workspaceId,collectionId:e.collectionId,parentFolderIds:e.parentFolderIds||[],requestId:e.requestId,responseId:e.responseId,onSuccess:()=>{m.closeTabByRoute(`/workspace/${e.workspaceId}/example/${e.responseId}`)}},{onError:()=>{d({status:"error",description:"Could not delete example."})}})}}];return{item:null==n?void 0:n.data,isLoading:s,actions:h}}({responseId:e.responseId,collectionId:e.collectionId,workspaceId:e.workspaceId,parentFolderIds:e.parentFolderIds,requestId:e.requestId}),[i,r]=(0,n.useState)(!1),{clearRename:d,renamingNodeId:c}=he(),p=(0,w.useResponseMetaUpdateMutation)();return(0,n.useEffect)((()=>{t&&t.id===c?r(!0):r(!1)}),[c,t]),o||!t?(0,l.jsx)(nt,{}):(0,l.jsx)(K,{name:t.name,expandable:!1,isExpanded:!1,route:`/workspace/${e.workspaceId}/example/${e.responseId}`,icon:(0,l.jsx)(at.Z,{}),actions:s,clearEditing:d,isEditing:i,onRenameSubmit:o=>{d(),o!==(null==t?void 0:t.name)&&p.mutate({patch:{name:o},responseId:e.responseId})}})})),ct=(0,i.observer)((e=>{const{item:t}=e;switch(t.type){case"collection":return(0,l.jsx)(Ae,Object.assign({isExpanded:t.isExpanded,isSelected:t.isSelected},t.data));case"folder":return(0,l.jsx)(He,Object.assign({isExpanded:t.isExpanded,isSelected:t.isSelected},t.data));case"request":return(0,l.jsx)(Ye,Object.assign({isExpanded:t.isExpanded,isSelected:t.isSelected},t.data));case"response":return(0,l.jsx)(lt,Object.assign({isSelected:t.isSelected},t.data));case"loading":return(0,l.jsx)(nt,{});case"collection-empty":return(0,l.jsx)(it,Object.assign({},t.data));case"folder-empty":return(0,l.jsx)(dt,Object.assign({},t.data));default:return null}})),pt=d().li.withConfig({displayName:"list-item__StyledContainer",componentId:"sc-1esdb42-0"})(["display:flex;height:28px;align-items:center;font-size:var(--text-size-m,12px);flex:1;overflow:hidden;box-sizing:border-box;color:var(--content-color-primary,var(--grey-90));background-color:",";padding:var(--spacing-zero) var(--spacing-s);> *{box-sizing:border-box;}&.action{cursor:pointer;&:hover{background-color:var(--highlight-background-color-secondary);.sidebar-list-item__right-section-actions,.actions-dropdown{.btn{height:var(--size-s);}}}&:has(*:hover),&:has(*:focus){background-color:var(--highlight-background-color-secondary);.sidebar-list-item__right-section-actions,.actions-dropdown{.btn{height:var(--size-s);}}}}"],(({isSelected:e})=>e?"var(--highlight-background-color-secondary)":"inherit")),ut=e=>{const{item:t,style:o}=e;return(0,l.jsxs)(pt,{className:T()({action:!0}),style:o,role:"treeitem","aria-expanded":t.isExpanded,tabIndex:-1,isSelected:t.isSelected,"aria-selected":t.isSelected,children:[Array.from({length:t.depth}).fill(null).map(((e,t)=>(0,l.jsx)("div",{className:"indent"},`indent-${t}`))),(0,l.jsx)(ct,{item:t})]})},mt=["items"],It=["style","data"],ft=["items"],ht=["style","data"];function gt(e,t){const{style:o,data:{items:n}}=e,s=(0,S.Z)(e.data,mt),i=(0,S.Z)(e,It),{style:r,data:{items:d}}=t,a=(0,S.Z)(t.data,ft),l=(0,S.Z)(t,ht);return j()(o,r)&&j()(n,d)&&j()(s,a)&&j()(i,l)}const vt=(0,n.memo)((({data:e,index:t,style:o})=>{const s=(0,n.useRef)({}),{items:i,resetRowHeights:r}=e,d=i[t];return(0,n.useEffect)((()=>{s.current&&r()}),[s,r]),(0,l.jsx)(ut,{item:d,style:o},d.id)}),gt);vt.displayName="memo(ItemRenderer)";const yt=vt,xt=d().ul.withConfig({displayName:"react-window-list__StyledList",componentId:"sc-phtn6a-0"})(["height:100%;width:100%;margin:0;padding:0;box-sizing:border-box;.indent{flex:0 0 var(--spacing-s);box-sizing:border-box;height:inherit;border-right:thin solid transparent;}&:hover,&:focus{.indent{border-right:thin solid var(--border-color-default);}}"]),bt=(0,n.forwardRef)(((e,t)=>(0,l.jsx)(xt,Object.assign({role:"tree",tabIndex:0,ref:t},e,{children:e.children}))));bt.displayName="forwardRef(ReactWindowList)";const wt=bt,kt=d().div.withConfig({displayName:"list-view__Container",componentId:"sc-eu41y6-0"})(["height:100%;padding-top:var(--spacing-s);"]),Ct=(0,i.observer)((e=>{const{items:t}=e,o=(0,n.useRef)(null),s={items:t,resetRowHeights:()=>{o.current&&o.current.resetAfterIndex(0)}};return(0,l.jsx)(kt,{children:(0,l.jsx)(E(),{children:({height:e,width:t})=>(0,l.jsx)(N.VariableSizeList,{height:e,itemData:s,itemCount:s.items.length,ref:o,itemSize:e=>{return(t=s.items[e]).type&&["collection-empty","folder-empty"].includes(t.type)?58:28;var t},width:t,innerElementType:wt,children:yt})})})}));function Et(e,t){const o={};for(const t of e)o[t.id]=t;const n=[];for(const e of t){const t=o[e];t&&n.push(t)}return n}function Nt(e,t,o,n){return[{id:e,type:"response",depth:n,isSelected:t.selectedNodeId===e,data:{collectionId:o.collectionId,workspaceId:o.workspaceId,parentFolderIds:o.parentFolderIds,requestId:o.requestId,responseId:e}}]}function St(e,t,o,n){const s=[];if(t.isVisibilityFilterActive&&!t.visibleNodeIds.has(e.id))return s;if(s.push({id:e.id,type:"request",depth:n,isExpanded:t.openNodeIds.has(e.id),isSelected:t.selectedNodeId===e.id,data:{workspaceId:o.workspaceId,collectionId:o.collectionId,parentFolderIds:o.parentFolderIds,requestId:e.id}}),!t.openNodeIds.has(e.id))return s;for(const r of e.responses_order){s.push(...Nt(r,t,{collectionId:o.collectionId,workspaceId:o.workspaceId,parentFolderIds:o.parentFolderIds,requestId:e.id},n+1));for(const o of(null==(i=t.itemCreationLoadingItems.response[e.id])||null==(i=i.after)?void 0:i[r])||new Set){var i;s.push({type:"loading",id:o,depth:n+1,isExpanded:!1,isSelected:!1,data:null})}}for(const o of(null==(r=t.itemCreationLoadingItems.response[e.id])?void 0:r.end)||new Set){var r;s.push({type:"loading",id:o,depth:n+1,isExpanded:!1,isSelected:!1,data:null})}return s}function _t(e,t,o,n){const s=[];if(t.isVisibilityFilterActive&&!t.visibleNodeIds.has(e.id))return s;if(s.push({id:e.id,type:"folder",depth:n,isExpanded:t.openNodeIds.has(e.id),isSelected:t.selectedNodeId===e.id,data:{workspaceId:o.workspaceId,collectionId:o.collectionId,parentFolderIds:o.parentFolderIds,folderId:e.id}}),!t.openNodeIds.has(e.id))return s;const i=Et(e.folders,e.folders_order);for(const d of i){s.push(..._t(d,t,{collectionId:o.collectionId,workspaceId:o.workspaceId,parentFolderIds:o.parentFolderIds?[...o.parentFolderIds,e.id]:[e.id]},n+1));for(const o of(null==(r=t.itemCreationLoadingItems.folder[e.id])||null==(r=r.after)?void 0:r[d.id])||new Set){var r;s.push({type:"loading",id:o,depth:n+1,isExpanded:!1,isSelected:!1,data:null})}}for(const o of(null==(d=t.itemCreationLoadingItems.folder[e.id])?void 0:d.end)||new Set){var d;s.push({type:"loading",id:o,depth:n+1,isExpanded:!1,isSelected:!1,data:null})}const a=Et(e.requests,e.order);for(const i of a){s.push(...St(i,t,{collectionId:o.collectionId,workspaceId:o.workspaceId,parentFolderIds:o.parentFolderIds?[...o.parentFolderIds,e.id]:[e.id]},n+1));for(const o of(null==(l=t.itemCreationLoadingItems.request[e.id])||null==(l=l.after)?void 0:l[i.id])||new Set){var l;s.push({type:"loading",id:o,depth:n+1,isExpanded:!1,isSelected:!1,data:null})}}for(const o of(null==(c=t.itemCreationLoadingItems.request[e.id])?void 0:c.end)||new Set){var c;s.push({type:"loading",id:o,depth:n+1,isExpanded:!1,isSelected:!1,data:null})}return 1===s.length&&s.push({id:`empty-folder-${e.id}`,type:"folder-empty",depth:n+1,data:{folderId:e.id,collectionId:o.collectionId,workspaceId:o.workspaceId,parentFolderIds:o.parentFolderIds?[...o.parentFolderIds,e.id]:[e.id]},isExpanded:!1}),s}function jt(e,t,o){const n=[];if(t.isVisibilityFilterActive&&!t.visibleNodeIds.has(e.id))return n;if(n.push({id:e.id,type:"collection",depth:0,data:{workspaceId:o,collectionId:e.id},isExpanded:t.openNodeIds.has(e.id),isSelected:t.selectedNodeId===e.id}),!t.openNodeIds.has(e.id))return n;const s=Et(e.folders,e.folders_order);for(const r of s){n.push(..._t(r,t,{collectionId:e.id,workspaceId:o},1));for(const o of(null==(i=t.itemCreationLoadingItems.folder[e.id])||null==(i=i.after)?void 0:i[r.id])||new Set){var i;n.push({type:"loading",id:o,depth:1,isExpanded:!1,isSelected:!1,data:null})}}for(const o of(null==(r=t.itemCreationLoadingItems.folder[e.id])?void 0:r.end)||new Set){var r;n.push({type:"loading",id:o,depth:1,isExpanded:!1,isSelected:!1,data:null})}const d=Et(e.requests,e.order);for(const s of d){n.push(...St(s,t,{collectionId:e.id,workspaceId:o},1));for(const o of(null==(a=t.itemCreationLoadingItems.request[e.id])||null==(a=a.after)?void 0:a[s.id])||new Set){var a;n.push({type:"loading",id:o,depth:1,isExpanded:!1,isSelected:!1,data:null})}}for(const o of(null==(l=t.itemCreationLoadingItems.request[e.id])?void 0:l.end)||new Set){var l;n.push({type:"loading",id:o,depth:1,isExpanded:!1,isSelected:!1,data:null})}return 1===n.length&&n.push({id:`empty-collection-${e.id}`,type:"collection-empty",depth:1,data:{collectionId:e.id,workspaceId:o},isExpanded:!1}),n}var qt=o(80809);const Tt="collection-list-loading-paint-time",Rt="collection-list-loading-paint-mark",{PerformanceMarkPaint:Lt}=qt.perfComponents,Ft=()=>{performance.measure(Tt,{},Rt),(0,qt.sendMeasureEvent)({name:Tt,category:"app-perf",label:"collection-sidebar-loading",entityType:"collection-sidebar"})},Dt=d()("div").withConfig({displayName:"collection-sidebar-view__SidebarContainer",componentId:"sc-8tzmso-0"})(["display:flex;flex-direction:column;height:800px;padding-top:var(--spacing-s);"]),Ot=(0,i.observer)((e=>{var t,o;const[s,i]=(0,n.useState)(!1),{items:r,queryResult:d}=function(e){const t=(0,w.useCollectionListRawQuery)({workspaceId:e.workspaceId}),o=me();if(!t.data)return{queryResult:t};const n=[];t.data.data.sort(((e,t)=>e.name.toLowerCase().localeCompare(t.name.toLowerCase())));for(const i of t.data.data){n.push(...jt(i,o,e.workspaceId));for(const t of(null==(s=o.itemCreationLoadingItems.collection[e.workspaceId])||null==(s=s.after)?void 0:s[i.id])||new Set){var s;n.push({type:"loading",id:t,depth:0,isExpanded:!1,isSelected:!1,data:null})}}for(const t of(null==(i=o.itemCreationLoadingItems.collection[e.workspaceId])?void 0:i.end)||new Set){var i;n.push({type:"loading",id:t,depth:0,isExpanded:!1,isSelected:!1,data:null})}return{items:n,queryResult:t}}({workspaceId:e.workspaceId}),c=Array.isArray(null==(t=d.data)?void 0:t.data)&&0===(null==(o=d.data)?void 0:o.data.length),u=(0,w.useCreateNewCollection)(),m=(0,w.useWorkspacePermissions)(e.workspaceId);return!r&&d.error?(0,l.jsx)(Dt,{children:(0,l.jsx)(x,{isRefetching:d.isRefetching,onRetry:d.refetch})}):r?c?(0,l.jsx)(Dt,{children:(0,l.jsx)(f,{illustration:(0,l.jsx)(b.Z,{}),title:"Create a collection for your requests",message:"A collection lets you group related requests and easily set common authorization, tests, scripts, and variables for all requests in it.",hasPermissions:m.userCanCreate,action:{label:"Create Collection",tooltip:m.userCanCreate?"":"You do not have permissions to create a collection in this workspace",handler:()=>{i(!0),u.mutate({workspaceId:e.workspaceId,requestBody:{id:(0,a.v4)(),name:k}},{onSettled:()=>{i(!1)},onSuccess:()=>{ge.AnalyticsService.addEventV2({category:"http-collection",action:"create",label:"sidebar",value:1})}})},isLoading:s}})}):(0,l.jsx)(Ct,{items:r}):(0,l.jsx)(Dt,{children:(0,l.jsx)(Lt,{markName:Rt,callback:Ft,children:(0,l.jsx)(p,{})})})}));var $t=o(11327),Pt=o(25869),Mt=o(17647);const At=d()(O.Z).withConfig({displayName:"collection-top-bar__CollectionTopBarWrapper",componentId:"sc-8v028h-0"})(["margin-right:var(--spacing-s);margin-left:var(--spacing-s);margin-top:var(--spacing-s);"]),Zt=d()(I.Z).withConfig({displayName:"collection-top-bar__CreateNewButton",componentId:"sc-8v028h-1"})(["margin-right:var(--spacing-xs);width:var(--size-s);padding:0;height:var(--size-s);"]),Ut=(0,i.observer)((e=>{const[t,o]=(0,n.useState)(!1),[s,i]=function(){const e=me();return[e.filterText,e.setFilterText]}(),{error:r,isFetching:d,isLoading:c}=(0,w.useCollectionListRawQuery)({workspaceId:e.workspaceId}),{addItem:p,removeItem:u}=Ie("collection"),m=(0,L.useNavigate)(),I=(0,w.useCreateNewCollection)(),f=(0,w.useWorkspacePermissions)(e.workspaceId);return(0,l.jsxs)(At,{alignItems:"center",justifyContent:"space-between",gap:"spacing-s",children:[(0,l.jsx)(Zt,{icon:(0,l.jsx)(Pt.Z,{}),type:"tertiary",tooltip:!f.userCanCreate&&"You do not have permissions to create a collection in this workspace","data-testid":"collection-top-bar-create-button",isDisabled:r||d||c||t||!f.userCanCreate,onClick:()=>{const t=(0,a.v4)();o(!0),p(t,e.workspaceId),I.mutate({workspaceId:e.workspaceId,requestBody:{id:(0,a.v4)(),name:k}},{onSettled:n=>{o(!1),u(t,e.workspaceId),n&&n.data&&m(`/workspace/${e.workspaceId}/collection/${(0,w.composeUID)(n.data.id,n.data.owner)}`,{state:JSON.stringify({additionalContext:{rename:!0}})},{customNavEvent:L.OPEN_EXTENSION_URL})},onSuccess:()=>{ge.AnalyticsService.addEventV2({category:"http-collection",action:"create",label:"sidebar",value:1})}})}}),(0,l.jsx)($t.Z,{onChange:e=>i(e.target.value),value:s,placeholder:"Filter",prefix:(0,l.jsx)(Mt.Z,{}),onClear:()=>{i("")},"data-testid":"collection-top-bar-search-input"})]})}));var zt=o(10099);function Bt(e){const t=e.responses_order.map((e=>function(e){return{id:e,type:"response",children:[]}}(e)));return{id:e.id,name:e.name,type:"request",children:t}}function Ht(e){const t=e.folders.map((e=>Ht(e))),o=e.requests.map((e=>Bt(e)));return{id:e.id,name:e.name,type:"folder",children:[...t,...o]}}function Wt(e){const t=e.folders.map((e=>Ht(e))),o=e.requests.map((e=>Bt(e)));return{id:e.id,name:e.name,type:"collection",children:[...t,...o]}}var Vt=o(60607);const Gt=(0,i.observer)((()=>{const e=(0,zt.useActiveWorkspaceId)(),{data:t}=function(e){const t=(0,n.useCallback)((e=>e.data.map((e=>Wt(e)))),[]);return(0,w.useCollectionListRawQuery)({workspaceId:e.workspaceId,select:t})}({workspaceId:e}),{selectedItemId:o,selectedItemType:s}=function(){const{collectionId:e,folderId:t,requestId:o,exampleId:n}=(0,Vt.useParams)();return e?{selectedItemType:"collection",selectedItemId:e}:t?{selectedItemType:"folder",selectedItemId:t}:o?{selectedItemType:"request",selectedItemId:o}:n?{selectedItemType:"response",selectedItemId:n}:{}}();return(0,w.useCollectionListSubscription)({workspaceId:e}),(0,l.jsxs)(ue,{collectionTrees:t,selectedItemId:o,expandSelected:["collection","folder"].includes(s||""),children:[(0,l.jsx)(Ut,{workspaceId:e}),(0,l.jsx)(Ot,{workspaceId:e})]})})),Xt=d().div.withConfig({displayName:"custom-drag-layer__DragPreviewContainer",componentId:"sc-1yezjqt-0"})(["position:fixed;pointer-events:none;z-index:100;left:0;top:0;width:'100%';height:'100%';"]),Jt=d().div.withConfig({displayName:"custom-drag-layer__DragPreviewItem",componentId:"sc-1yezjqt-1"})(["background-color:var(--highlight-background-color-primary);color:var(--content-color-primary);border:var(--border-width-default) var(--border-style-solid) var(--border-color-default);border-radius:var(--border-radius-default);padding:var(--spacing-s) var(--spacing-m);box-shadow:var(--shadow-default);font-family:var(--text-family-default);font-size:var(--text-size-m);line-height:18px;font-weight:var(--text-weight-regular);text-align:left;display:inline-block;word-break:break-word;max-width:220px;"]);function Qt(e,t){if(!e||!t)return{display:"none"};const{x:o,y:n}=t,s=`translate(${o}px, ${n}px)`;return{transform:s,WebkitTransform:s}}const Kt=()=>{var e;const{isDragging:t,item:o,initialOffset:n,currentOffset:s}=(0,Ne.useDragLayer)((e=>({item:e.getItem(),initialOffset:e.getInitialSourceClientOffset(),currentOffset:e.getSourceClientOffset(),isDragging:e.isDragging()})));return t?(0,l.jsx)(Xt,{children:(0,l.jsx)(Jt,{style:Qt(n,s),children:null!=(e=o.name)?e:o.id})}):null},Yt=d().div.withConfig({displayName:"collection-sidebar__Wrapper",componentId:"sc-ff16lm-0"})(["height:100%;display:flex;flex-direction:column;"]),eo=()=>w.ENABLE_COLLECTIONS?(0,l.jsx)(s.VW,{children:(0,l.jsx)(re.Toast.Ui.ToastEventEmitter,{children:(0,l.jsx)(Ne.DndProvider,{backend:Se.HTML5Backend,children:(0,l.jsxs)(Yt,{children:[(0,l.jsx)(Kt,{}),(0,l.jsx)(Gt,{}),(0,l.jsx)(ie.Modals.Ui.ModalDialog,{uid:"collections-sidebar-delete-collection"}),(0,l.jsx)(ie.Modals.Ui.ModalDialog,{uid:"collections-sidebar-delete-folder"}),(0,l.jsx)(ie.Modals.Ui.ModalDialog,{uid:"collections-sidebar-delete-request"}),(0,l.jsx)(ie.Modals.Ui.ModalDialog,{uid:"collections-sidebar-delete-response"})]})})})}):null}}]);
//# sourceMappingURL=4190.c602c8df2180286f.js.map
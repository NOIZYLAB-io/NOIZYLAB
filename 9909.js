"use strict";var eo=Object.defineProperty;var to=(L,x,u)=>x in L?eo(L,x,{enumerable:!0,configurable:!0,writable:!0,value:u}):L[x]=u;var T=(L,x,u)=>(to(L,typeof x!="symbol"?x+"":x,u),u);exports.id=9909,exports.ids=[9909],exports.modules={529909:(L,x,u)=>{u.d(x,{getDefaultRoleAssumer:()=>Mt,getDefaultRoleAssumerWithWebIdentity:()=>$t});var q=u(313421),D=u(467583),$=u(848192);function be(e={}){return(0,$.Z)({...D.GG,async default(){return Ne.silence||console.warn("@aws-sdk - WARN - default STS region of us-east-1 used. See @aws-sdk/credential-providers README and set a region explicitly."),"us-east-1"}},{...D.zH,...e})}const Ne={silence:!1};var we=u(623465),Ce=u(685563);const Vt=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),Re={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};var k=u(877617),Ft=u(300833);class V extends Ft.T{constructor(t){super(t),Object.setPrototypeOf(this,V.prototype)}}class ne extends V{constructor(s){super({name:"ExpiredTokenException",$fault:"client",...s});T(this,"name","ExpiredTokenException");T(this,"$fault","client");Object.setPrototypeOf(this,ne.prototype)}}class re extends V{constructor(s){super({name:"MalformedPolicyDocumentException",$fault:"client",...s});T(this,"name","MalformedPolicyDocumentException");T(this,"$fault","client");Object.setPrototypeOf(this,re.prototype)}}class oe extends V{constructor(s){super({name:"PackedPolicyTooLargeException",$fault:"client",...s});T(this,"name","PackedPolicyTooLargeException");T(this,"$fault","client");Object.setPrototypeOf(this,oe.prototype)}}class ie extends V{constructor(s){super({name:"RegionDisabledException",$fault:"client",...s});T(this,"name","RegionDisabledException");T(this,"$fault","client");Object.setPrototypeOf(this,ie.prototype)}}class ae extends V{constructor(s){super({name:"IDPRejectedClaimException",$fault:"client",...s});T(this,"name","IDPRejectedClaimException");T(this,"$fault","client");Object.setPrototypeOf(this,ae.prototype)}}class ce extends V{constructor(s){super({name:"InvalidIdentityTokenException",$fault:"client",...s});T(this,"name","InvalidIdentityTokenException");T(this,"$fault","client");Object.setPrototypeOf(this,ce.prototype)}}class le extends V{constructor(s){super({name:"IDPCommunicationErrorException",$fault:"client",...s});T(this,"name","IDPCommunicationErrorException");T(this,"$fault","client");Object.setPrototypeOf(this,le.prototype)}}const Lt="Arn",kt="AccessKeyId",Wt="AssumeRole",zt="AssumedRoleId",Ut="AssumeRoleRequest",jt="AssumeRoleResponse",de="AssumedRoleUser",Kt="AssumeRoleWithWebIdentity",Bt="AssumeRoleWithWebIdentityRequest",Ht="AssumeRoleWithWebIdentityResponse",Qt="Audience",ue="Credentials",Zt="ContextAssertion",Oe="DurationSeconds",Xt="Expiration",Yt="ExternalId",Gt="ExpiredTokenException",Jt="IDPCommunicationErrorException",qt="IDPRejectedClaimException",Dt="InvalidIdentityTokenException",_t="Key",es="MalformedPolicyDocumentException",xe="Policy",Me="PolicyArns",ts="ProviderArn",ss="ProvidedContexts",ns="ProvidedContextsListType",rs="ProvidedContext",os="PolicyDescriptorType",is="ProviderId",$e="PackedPolicySize",as="PackedPolicyTooLargeException",cs="Provider",Ve="RoleArn",ls="RegionDisabledException",Fe="RoleSessionName",ds="SecretAccessKey",us="SubjectFromWebIdentityToken",fe="SourceIdentity",fs="SerialNumber",hs="SessionToken",gs="Tags",ps="TokenCode",ms="TransitiveTagKeys",ys="Tag",Es="Value",Ss="WebIdentityToken",Ts="arn",vs="accessKeySecretType",j="awsQueryError",K="client",Is="clientTokenType",B="error",H="httpError",Q="message",As="policyDescriptorListType",Le="smithy.ts.sdk.synthetic.com.amazonaws.sts",Ps="tagListType",y="com.amazonaws.sts";var bs=[0,y,vs,8,0],Ns=[0,y,Is,8,0],ke=[3,y,de,0,[zt,Lt],[0,0]],ws=[3,y,Ut,0,[Ve,Fe,Me,xe,Oe,gs,ms,Yt,fs,ps,fe,ss],[0,0,()=>ze,0,1,()=>Bs,64,0,0,0,0,()=>Ks]],Cs=[3,y,jt,0,[ue,de,$e,fe],[[()=>We,0],()=>ke,1,0]],Rs=[3,y,Bt,0,[Ve,Fe,Ss,is,Me,xe,Oe],[0,0,[()=>Ns,0],0,()=>ze,0,1]],Os=[3,y,Ht,0,[ue,us,de,$e,cs,Qt,fe],[[()=>We,0],0,()=>ke,1,0,0,0]],We=[3,y,ue,0,[kt,ds,hs,Xt],[0,[()=>bs,0],0,4]],xs=[-3,y,Gt,{[B]:K,[H]:400,[j]:["ExpiredTokenException",400]},[Q],[0]];k.O.for(y).registerError(xs,ne);var Ms=[-3,y,Jt,{[B]:K,[H]:400,[j]:["IDPCommunicationError",400]},[Q],[0]];k.O.for(y).registerError(Ms,le);var $s=[-3,y,qt,{[B]:K,[H]:403,[j]:["IDPRejectedClaim",403]},[Q],[0]];k.O.for(y).registerError($s,ae);var Vs=[-3,y,Dt,{[B]:K,[H]:400,[j]:["InvalidIdentityToken",400]},[Q],[0]];k.O.for(y).registerError(Vs,ce);var Fs=[-3,y,es,{[B]:K,[H]:400,[j]:["MalformedPolicyDocument",400]},[Q],[0]];k.O.for(y).registerError(Fs,re);var Ls=[-3,y,as,{[B]:K,[H]:400,[j]:["PackedPolicyTooLarge",400]},[Q],[0]];k.O.for(y).registerError(Ls,oe);var ks=[3,y,os,0,[Ts],[0]],Ws=[3,y,rs,0,[ts,Zt],[0,0]],zs=[-3,y,ls,{[B]:K,[H]:403,[j]:["RegionDisabledException",403]},[Q],[0]];k.O.for(y).registerError(zs,ie);var Us=[3,y,ys,0,[_t,Es],[0,0]],js=[-3,Le,"STSServiceException",0,[],[]];k.O.for(Le).registerError(js,V);var ze=[1,y,As,0,()=>ks],Ks=[1,y,ns,0,()=>Ws],so=null,Bs=[1,y,Ps,0,()=>Us],Hs=[9,y,Wt,0,()=>ws,()=>Cs],Qs=[9,y,Kt,0,()=>Rs,()=>Os];class Zs extends Ce.u.classBuilder().ep(Re).m(function(t,s,r,o){return[(0,we.r)(r,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").sc(Hs).build(){}class Xs extends Ce.u.classBuilder().ep(Re).m(function(t,s,r,o){return[(0,we.r)(r,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").sc(Qs).build(){}const Ue=e=>{if(typeof e?.Arn=="string"){const t=e.Arn.split(":");if(t.length>4&&t[4]!=="")return t[4]}},je=async(e,t,s,r={})=>{const o=typeof e=="function"?await e():e,n=typeof t=="function"?await t():t,c=await be(r)();return s?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${o} (credential provider clientConfig)`,`${n} (contextual client)`,`${c} (STS default: AWS_REGION, profile region, or us-east-1)`),o??n??c},Ke=(e,t)=>{let s,r;return async(o,n)=>{if(r=o,!s){const{logger:d=e?.parentClientConfig?.logger,profile:f=e?.parentClientConfig?.profile,region:h,requestHandler:v=e?.parentClientConfig?.requestHandler,credentialProviderLogger:A,userAgentAppId:E=e?.parentClientConfig?.userAgentAppId}=e,w=await je(h,e?.parentClientConfig?.region,A,{logger:d,profile:f}),M=!He(v);s=new t({...e,userAgentAppId:E,profile:f,credentialDefaultProvider:()=>async()=>r,region:w,requestHandler:M?v:void 0,logger:d})}const{Credentials:c,AssumedRoleUser:a}=await s.send(new Zs(n));if(!c||!c.AccessKeyId||!c.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${n.RoleArn}`);const i=Ue(a),l={accessKeyId:c.AccessKeyId,secretAccessKey:c.SecretAccessKey,sessionToken:c.SessionToken,expiration:c.Expiration,...c.CredentialScope&&{credentialScope:c.CredentialScope},...i&&{accountId:i}};return(0,q.g)(l,"CREDENTIALS_STS_ASSUME_ROLE","i"),l}},Be=(e,t)=>{let s;return async r=>{if(!s){const{logger:i=e?.parentClientConfig?.logger,profile:l=e?.parentClientConfig?.profile,region:d,requestHandler:f=e?.parentClientConfig?.requestHandler,credentialProviderLogger:h,userAgentAppId:v=e?.parentClientConfig?.userAgentAppId}=e,A=await je(d,e?.parentClientConfig?.region,h,{logger:i,profile:l}),E=!He(f);s=new t({...e,userAgentAppId:v,profile:l,region:A,requestHandler:E?f:void 0,logger:i})}const{Credentials:o,AssumedRoleUser:n}=await s.send(new Xs(r));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${r.RoleArn}`);const c=Ue(n),a={accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration,...o.CredentialScope&&{credentialScope:o.CredentialScope},...c&&{accountId:c}};return c&&(0,q.g)(a,"RESOLVED_ACCOUNT_ID","T"),(0,q.g)(a,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),a}},no=e=>t=>e({roleAssumer:Ke(t,t.stsClientCtor),roleAssumerWithWebIdentity:Be(t,t.stsClientCtor),...t}),He=e=>e?.metadata?.handlerProtocol==="h2";var Qe=u(96228),Ys=u(120742),Gs=u(1241),Js=u(491708),qs=u(645008),Ds=u(579533),_s=u(99141),en=u(186915),tn=u(322557),sn=u(582571),nn=u(599606),rn=u(260172),he=u(335910),on=u(305289),an=u(501412),cn=u(361840),ln=u(878305),Ze=u(212676);const dn=async(e,t,s)=>({operation:(0,ln.u)(t).operation,region:await(0,Ze.t)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function un(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(t,s)=>({signingProperties:{config:t,context:s}})}}function fn(e){return{schemeId:"smithy.api#noAuth"}}const hn=e=>{const t=[];switch(e.operation){case"AssumeRoleWithWebIdentity":{t.push(fn(e));break}default:t.push(un(e))}return t},gn=e=>Object.assign(e,{stsClientCtor:Ie}),pn=e=>{const t=gn(e),s=(0,cn.h)(t);return Object.assign(s,{authSchemePreference:(0,Ze.t)(e.authSchemePreference??[])})};var mn=u(767084),yn=u(253841),En=u(766659),Xe=u(410151),Sn=u(26570),Tn=u(213290),vn=u(353747),In=u(514859),Ye=u(188701),An=u(166694),Pn=u(986895),bn=u(940609),Nn=u(205584),wn=u(486808),W=u(102217),Cn=u(644815),te=u(278109),Rn=u(315342);class On extends Rn.t{async serializeRequest(t,s,r){const o=this.serializer,n={},c={},a=await r.endpoint(),i=W.l.of(t?.input),l=i.getSchema();let d;const f=new Cn.K({protocol:"",hostname:"",port:void 0,path:"/",fragment:void 0,query:n,headers:c,body:void 0});a&&(this.updateServiceEndpoint(f,a),this.setHostPrefix(f,t,s));const h={...s};if(s){const v=i.getEventStreamMember();if(v){if(h[v]){const A={};for(const[E,w]of i.structIterator())E!==v&&h[E]&&(o.write(w,h[E]),A[E]=o.flush());d=await this.serializeEventStream({eventStream:h[v],requestSchema:i,initialRequest:A})}}else o.write(l,h),d=o.flush()}return f.headers=c,f.query=n,f.body=d,f.method="POST",f}async deserializeResponse(t,s,r){const o=this.deserializer,n=W.l.of(t.output),c={};if(r.statusCode>=300){const i=await(0,te.P)(r.body,s);throw i.byteLength>0&&Object.assign(c,await o.read(15,i)),await this.handleError(t,s,r,c,this.deserializeMetadata(r)),new Error("@smithy/core/protocols - RPC Protocol error handler failed to throw.")}for(const i in r.headers){const l=r.headers[i];delete r.headers[i],r.headers[i.toLowerCase()]=l}const a=n.getEventStreamMember();if(a)c[a]=await this.deserializeEventStream({response:r,responseSchema:n,initialResponseContainer:c});else{const i=await(0,te.P)(r.body,s);i.byteLength>0&&Object.assign(c,await o.read(n,i))}return c.$metadata=this.deserializeMetadata(r),c}}var xn=u(334224),Mn=u(324165);const $n={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,s){return e},captureMetaData:!1},Vn=function(e){return Object.assign({},$n,e)},Ge=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",Fn=Ge+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",Ln="["+Ge+"]["+Fn+"]*",kn=new RegExp("^"+Ln+"$");function Je(e,t){const s=[];let r=t.exec(e);for(;r;){const o=[];o.startIndex=t.lastIndex-r[0].length;const n=r.length;for(let c=0;c<n;c++)o.push(r[c]);s.push(o),r=t.exec(e)}return s}const ge=function(e){const t=kn.exec(e);return!(t===null||typeof t>"u")};function Wn(e){return typeof e<"u"}function ro(e){return Object.keys(e).length===0}function oo(e,t,s){if(t){const r=Object.keys(t),o=r.length;for(let n=0;n<o;n++)s==="strict"?e[r[n]]=[t[r[n]]]:e[r[n]]=t[r[n]]}}function io(e){return exports.isExist(e)?e:""}let se;typeof Symbol!="function"?se="@@xmlMetadata":se=Symbol("XML Node Metadata");class Z{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,s){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:s})}addChild(t,s){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,[":@"]:t[":@"]}):this.child.push({[t.tagname]:t.child}),s!==void 0&&(this.child[this.child.length-1][se]={startIndex:s})}static getMetaDataSymbol(){return se}}function zn(e,t){const s={};if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let r=1,o=!1,n=!1,c="";for(;t<e.length;t++)if(e[t]==="<"&&!n){if(o&&X(e,"!ENTITY",t)){t+=7;let a,i;[a,i,t]=Un(e,t+1),i.indexOf("&")===-1&&(s[a]={regx:RegExp(`&${a};`,"g"),val:i})}else if(o&&X(e,"!ELEMENT",t)){t+=8;const{index:a}=Kn(e,t+1);t=a}else if(o&&X(e,"!ATTLIST",t))t+=8;else if(o&&X(e,"!NOTATION",t)){t+=9;const{index:a}=jn(e,t+1);t=a}else if(X(e,"!--",t))n=!0;else throw new Error("Invalid DOCTYPE");r++,c=""}else if(e[t]===">"){if(n?e[t-1]==="-"&&e[t-2]==="-"&&(n=!1,r--):r--,r===0)break}else e[t]==="["?o=!0:c+=e[t];if(r!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:s,i:t}}const R=(e,t)=>{for(;t<e.length&&/\s/.test(e[t]);)t++;return t};function Un(e,t){t=R(e,t);let s="";for(;t<e.length&&!/\s/.test(e[t])&&e[t]!=='"'&&e[t]!=="'";)s+=e[t],t++;if(G(s),t=R(e,t),e.substring(t,t+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(e[t]==="%")throw new Error("Parameter entities are not supported");let r="";return[t,r]=_(e,t,"entity"),t--,[s,r,t]}function jn(e,t){t=R(e,t);let s="";for(;t<e.length&&!/\s/.test(e[t]);)s+=e[t],t++;G(s),t=R(e,t);const r=e.substring(t,t+6).toUpperCase();if(r!=="SYSTEM"&&r!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${r}"`);t+=r.length,t=R(e,t);let o=null,n=null;if(r==="PUBLIC")[t,o]=_(e,t,"publicIdentifier"),t=R(e,t),(e[t]==='"'||e[t]==="'")&&([t,n]=_(e,t,"systemIdentifier"));else if(r==="SYSTEM"&&([t,n]=_(e,t,"systemIdentifier"),!n))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:s,publicIdentifier:o,systemIdentifier:n,index:--t}}function _(e,t,s){let r="";const o=e[t];if(o!=='"'&&o!=="'")throw new Error(`Expected quoted string, found "${o}"`);for(t++;t<e.length&&e[t]!==o;)r+=e[t],t++;if(e[t]!==o)throw new Error(`Unterminated ${s} value`);return t++,[t,r]}function Kn(e,t){t=R(e,t);let s="";for(;t<e.length&&!/\s/.test(e[t]);)s+=e[t],t++;if(!G(s))throw new Error(`Invalid element name: "${s}"`);t=R(e,t);let r="";if(e[t]==="E"&&X(e,"MPTY",t))t+=4;else if(e[t]==="A"&&X(e,"NY",t))t+=2;else if(e[t]==="("){for(t++;t<e.length&&e[t]!==")";)r+=e[t],t++;if(e[t]!==")")throw new Error("Unterminated content model")}else throw new Error(`Invalid Element Expression, found "${e[t]}"`);return{elementName:s,contentModel:r.trim(),index:t}}function ao(e,t){t=R(e,t);let s="";for(;t<e.length&&!/\s/.test(e[t]);)s+=e[t],t++;G(s),t=R(e,t);let r="";for(;t<e.length&&!/\s/.test(e[t]);)r+=e[t],t++;if(!G(r))throw new Error(`Invalid attribute name: "${r}"`);t=R(e,t);let o="";if(e.substring(t,t+8).toUpperCase()==="NOTATION"){if(o="NOTATION",t+=8,t=R(e,t),e[t]!=="(")throw new Error(`Expected '(', found "${e[t]}"`);t++;let c=[];for(;t<e.length&&e[t]!==")";){let a="";for(;t<e.length&&e[t]!=="|"&&e[t]!==")";)a+=e[t],t++;if(a=a.trim(),!G(a))throw new Error(`Invalid notation name: "${a}"`);c.push(a),e[t]==="|"&&(t++,t=R(e,t))}if(e[t]!==")")throw new Error("Unterminated list of notations");t++,o+=" ("+c.join("|")+")"}else{for(;t<e.length&&!/\s/.test(e[t]);)o+=e[t],t++;if(!["CDATA","ID","IDREF","IDREFS","ENTITY","ENTITIES","NMTOKEN","NMTOKENS"].includes(o.toUpperCase()))throw new Error(`Invalid attribute type: "${o}"`)}t=R(e,t);let n="";return e.substring(t,t+8).toUpperCase()==="#REQUIRED"?(n="#REQUIRED",t+=8):e.substring(t,t+7).toUpperCase()==="#IMPLIED"?(n="#IMPLIED",t+=7):[t,n]=_(e,t,"ATTLIST"),{elementName:s,attributeName:r,attributeType:o,defaultValue:n,index:t}}function X(e,t,s){for(let r=0;r<t.length;r++)if(t[r]!==e[s+r+1])return!1;return!0}function G(e){if(ge(e))return e;throw new Error(`Invalid entity name ${e}`)}const Bn=/^[-+]?0x[a-fA-F0-9]+$/,Hn=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,Qn={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function Zn(e,t={}){if(t=Object.assign({},Qn,t),!e||typeof e!="string")return e;let s=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(s))return e;if(e==="0")return 0;if(t.hex&&Bn.test(s))return Jn(s,16);if(s.search(/.+[eE].+/)!==-1)return Yn(e,s,t);{const r=Hn.exec(s);if(r){const o=r[1]||"",n=r[2];let c=Gn(r[3]);const a=o?e[n.length+1]===".":e[n.length]===".";if(!t.leadingZeros&&(n.length>1||n.length===1&&!a))return e;{const i=Number(s),l=String(i);if(i===0)return i;if(l.search(/[eE]/)!==-1)return t.eNotation?i:e;if(s.indexOf(".")!==-1)return l==="0"||l===c||l===`${o}${c}`?i:e;let d=n?c:s;return n?d===l||o+d===l?i:e:d===l||d===o+l?i:e}}else return e}}const Xn=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function Yn(e,t,s){if(!s.eNotation)return e;const r=t.match(Xn);if(r){let o=r[1]||"";const n=r[3].indexOf("e")===-1?"E":"e",c=r[2],a=o?e[c.length+1]===n:e[c.length]===n;return c.length>1&&a?e:c.length===1&&(r[3].startsWith(`.${n}`)||r[3][0]===n)?Number(t):s.leadingZeros&&!a?(t=(r[1]||"")+r[3],Number(t)):e}else return e}function Gn(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substring(0,e.length-1))),e}function Jn(e,t){if(parseInt)return parseInt(e,t);if(Number.parseInt)return Number.parseInt(e,t);if(window&&window.parseInt)return window.parseInt(e,t);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}function qn(e){return typeof e=="function"?e:Array.isArray(e)?t=>{for(const s of e)if(typeof s=="string"&&t===s||s instanceof RegExp&&s.test(t))return!0}:()=>!1}class Dn{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(s,r)=>String.fromCodePoint(Number.parseInt(r,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(s,r)=>String.fromCodePoint(Number.parseInt(r,16))}},this.addExternalEntities=_n,this.parseXml=rr,this.parseTextData=er,this.resolveNameSpace=tr,this.buildAttributesMap=nr,this.isItStopNode=cr,this.replaceEntitiesValue=ir,this.readStopNodeData=dr,this.saveTextToParentTag=ar,this.addChild=or,this.ignoreAttributesFn=qn(this.options.ignoreAttributes)}}function _n(e){const t=Object.keys(e);for(let s=0;s<t.length;s++){const r=t[s];this.lastEntities[r]={regex:new RegExp("&"+r+";","g"),val:e[r]}}}function er(e,t,s,r,o,n,c){if(e!==void 0&&(this.options.trimValues&&!r&&(e=e.trim()),e.length>0)){c||(e=this.replaceEntitiesValue(e));const a=this.options.tagValueProcessor(t,e,s,o,n);return a==null?e:typeof a!=typeof e||a!==e?a:this.options.trimValues?me(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?me(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function tr(e){if(this.options.removeNSPrefix){const t=e.split(":"),s=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=s+t[1])}return e}const sr=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function nr(e,t,s){if(this.options.ignoreAttributes!==!0&&typeof e=="string"){const r=Je(e,sr),o=r.length,n={};for(let c=0;c<o;c++){const a=this.resolveNameSpace(r[c][1]);if(this.ignoreAttributesFn(a,t))continue;let i=r[c][4],l=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(l=this.options.transformAttributeName(l)),l==="__proto__"&&(l="#__proto__"),i!==void 0){this.options.trimValues&&(i=i.trim()),i=this.replaceEntitiesValue(i);const d=this.options.attributeValueProcessor(a,i,t);d==null?n[l]=i:typeof d!=typeof i||d!==i?n[l]=d:n[l]=me(i,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(n[l]=!0)}if(!Object.keys(n).length)return;if(this.options.attributesGroupName){const c={};return c[this.options.attributesGroupName]=n,c}return n}}const rr=function(e){e=e.replace(/\r\n?/g,`
`);const t=new Z("!xml");let s=t,r="",o="";for(let n=0;n<e.length;n++)if(e[n]==="<")if(e[n+1]==="/"){const a=Y(e,">",n,"Closing Tag is not closed.");let i=e.substring(n+2,a).trim();if(this.options.removeNSPrefix){const f=i.indexOf(":");f!==-1&&(i=i.substr(f+1))}this.options.transformTagName&&(i=this.options.transformTagName(i)),s&&(r=this.saveTextToParentTag(r,s,o));const l=o.substring(o.lastIndexOf(".")+1);if(i&&this.options.unpairedTags.indexOf(i)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${i}>`);let d=0;l&&this.options.unpairedTags.indexOf(l)!==-1?(d=o.lastIndexOf(".",o.lastIndexOf(".")-1),this.tagsNodeStack.pop()):d=o.lastIndexOf("."),o=o.substring(0,d),s=this.tagsNodeStack.pop(),r="",n=a}else if(e[n+1]==="?"){let a=pe(e,n,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(r=this.saveTextToParentTag(r,s,o),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){const i=new Z(a.tagName);i.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(i[":@"]=this.buildAttributesMap(a.tagExp,o,a.tagName)),this.addChild(s,i,o,n)}n=a.closeIndex+1}else if(e.substr(n+1,3)==="!--"){const a=Y(e,"-->",n+4,"Comment is not closed.");if(this.options.commentPropName){const i=e.substring(n+4,a-2);r=this.saveTextToParentTag(r,s,o),s.add(this.options.commentPropName,[{[this.options.textNodeName]:i}])}n=a}else if(e.substr(n+1,2)==="!D"){const a=zn(e,n);this.docTypeEntities=a.entities,n=a.i}else if(e.substr(n+1,2)==="!["){const a=Y(e,"]]>",n,"CDATA is not closed.")-2,i=e.substring(n+9,a);r=this.saveTextToParentTag(r,s,o);let l=this.parseTextData(i,s.tagname,o,!0,!1,!0,!0);l==null&&(l=""),this.options.cdataPropName?s.add(this.options.cdataPropName,[{[this.options.textNodeName]:i}]):s.add(this.options.textNodeName,l),n=a+2}else{let a=pe(e,n,this.options.removeNSPrefix),i=a.tagName;const l=a.rawTagName;let d=a.tagExp,f=a.attrExpPresent,h=a.closeIndex;this.options.transformTagName&&(i=this.options.transformTagName(i)),s&&r&&s.tagname!=="!xml"&&(r=this.saveTextToParentTag(r,s,o,!1));const v=s;v&&this.options.unpairedTags.indexOf(v.tagname)!==-1&&(s=this.tagsNodeStack.pop(),o=o.substring(0,o.lastIndexOf("."))),i!==t.tagname&&(o+=o?"."+i:i);const A=n;if(this.isItStopNode(this.options.stopNodes,o,i)){let E="";if(d.length>0&&d.lastIndexOf("/")===d.length-1)i[i.length-1]==="/"?(i=i.substr(0,i.length-1),o=o.substr(0,o.length-1),d=i):d=d.substr(0,d.length-1),n=a.closeIndex;else if(this.options.unpairedTags.indexOf(i)!==-1)n=a.closeIndex;else{const M=this.readStopNodeData(e,l,h+1);if(!M)throw new Error(`Unexpected end of ${l}`);n=M.i,E=M.tagContent}const w=new Z(i);i!==d&&f&&(w[":@"]=this.buildAttributesMap(d,o,i)),E&&(E=this.parseTextData(E,i,o,!0,f,!0,!0)),o=o.substr(0,o.lastIndexOf(".")),w.add(this.options.textNodeName,E),this.addChild(s,w,o,A)}else{if(d.length>0&&d.lastIndexOf("/")===d.length-1){i[i.length-1]==="/"?(i=i.substr(0,i.length-1),o=o.substr(0,o.length-1),d=i):d=d.substr(0,d.length-1),this.options.transformTagName&&(i=this.options.transformTagName(i));const E=new Z(i);i!==d&&f&&(E[":@"]=this.buildAttributesMap(d,o,i)),this.addChild(s,E,o,A),o=o.substr(0,o.lastIndexOf("."))}else{const E=new Z(i);this.tagsNodeStack.push(s),i!==d&&f&&(E[":@"]=this.buildAttributesMap(d,o,i)),this.addChild(s,E,o,A),s=E}r="",n=h}}else r+=e[n];return t.child};function or(e,t,s,r){this.options.captureMetaData||(r=void 0);const o=this.options.updateTag(t.tagname,s,t[":@"]);o===!1||(typeof o=="string"&&(t.tagname=o),e.addChild(t,r))}const ir=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){const s=this.docTypeEntities[t];e=e.replace(s.regx,s.val)}for(let t in this.lastEntities){const s=this.lastEntities[t];e=e.replace(s.regex,s.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){const s=this.htmlEntities[t];e=e.replace(s.regex,s.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function ar(e,t,s,r){return e&&(r===void 0&&(r=t.child.length===0),e=this.parseTextData(e,t.tagname,s,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,r),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}function cr(e,t,s){const r="*."+s;for(const o in e){const n=e[o];if(r===n||t===n)return!0}return!1}function lr(e,t,s=">"){let r,o="";for(let n=t;n<e.length;n++){let c=e[n];if(r)c===r&&(r="");else if(c==='"'||c==="'")r=c;else if(c===s[0])if(s[1]){if(e[n+1]===s[1])return{data:o,index:n}}else return{data:o,index:n};else c==="	"&&(c=" ");o+=c}}function Y(e,t,s,r){const o=e.indexOf(t,s);if(o===-1)throw new Error(r);return o+t.length-1}function pe(e,t,s,r=">"){const o=lr(e,t+1,r);if(!o)return;let n=o.data;const c=o.index,a=n.search(/\s/);let i=n,l=!0;a!==-1&&(i=n.substring(0,a),n=n.substring(a+1).trimStart());const d=i;if(s){const f=i.indexOf(":");f!==-1&&(i=i.substr(f+1),l=i!==o.data.substr(f+1))}return{tagName:i,tagExp:n,closeIndex:c,attrExpPresent:l,rawTagName:d}}function dr(e,t,s){const r=s;let o=1;for(;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="/"){const n=Y(e,">",s,`${t} is not closed`);if(e.substring(s+2,n).trim()===t&&(o--,o===0))return{tagContent:e.substring(r,s),i:n};s=n}else if(e[s+1]==="?")s=Y(e,"?>",s+1,"StopNode is not closed.");else if(e.substr(s+1,3)==="!--")s=Y(e,"-->",s+3,"StopNode is not closed.");else if(e.substr(s+1,2)==="![")s=Y(e,"]]>",s,"StopNode is not closed.")-2;else{const n=pe(e,s,">");n&&((n&&n.tagName)===t&&n.tagExp[n.tagExp.length-1]!=="/"&&o++,s=n.closeIndex)}}function me(e,t,s){if(t&&typeof e=="string"){const r=e.trim();return r==="true"?!0:r==="false"?!1:Zn(e,s)}else return Wn(e)?e:""}const ye=Z.getMetaDataSymbol();function ur(e,t){return qe(e,t)}function qe(e,t,s){let r;const o={};for(let n=0;n<e.length;n++){const c=e[n],a=fr(c);let i="";if(s===void 0?i=a:i=s+"."+a,a===t.textNodeName)r===void 0?r=c[a]:r+=""+c[a];else{if(a===void 0)continue;if(c[a]){let l=qe(c[a],t,i);const d=gr(l,t);c[ye]!==void 0&&(l[ye]=c[ye]),c[":@"]?hr(l,c[":@"],i,t):Object.keys(l).length===1&&l[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?l=l[t.textNodeName]:Object.keys(l).length===0&&(t.alwaysCreateTextNode?l[t.textNodeName]="":l=""),o[a]!==void 0&&o.hasOwnProperty(a)?(Array.isArray(o[a])||(o[a]=[o[a]]),o[a].push(l)):t.isArray(a,i,d)?o[a]=[l]:o[a]=l}}}return typeof r=="string"?r.length>0&&(o[t.textNodeName]=r):r!==void 0&&(o[t.textNodeName]=r),o}function fr(e){const t=Object.keys(e);for(let s=0;s<t.length;s++){const r=t[s];if(r!==":@")return r}}function hr(e,t,s,r){if(t){const o=Object.keys(t),n=o.length;for(let c=0;c<n;c++){const a=o[c];r.isArray(a,s+"."+a,!0,!0)?e[a]=[t[a]]:e[a]=t[a]}}}function gr(e,t){const{textNodeName:s}=t,r=Object.keys(e).length;return!!(r===0||r===1&&(e[s]||typeof e[s]=="boolean"||e[s]===0))}const pr={allowBooleanAttributes:!1,unpairedTags:[]};function mr(e,t){t=Object.assign({},pr,t);const s=[];let r=!1,o=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let n=0;n<e.length;n++)if(e[n]==="<"&&e[n+1]==="?"){if(n+=2,n=_e(e,n),n.err)return n}else if(e[n]==="<"){let c=n;if(n++,e[n]==="!"){n=et(e,n);continue}else{let a=!1;e[n]==="/"&&(a=!0,n++);let i="";for(;n<e.length&&e[n]!==">"&&e[n]!==" "&&e[n]!=="	"&&e[n]!==`
`&&e[n]!=="\r";n++)i+=e[n];if(i=i.trim(),i[i.length-1]==="/"&&(i=i.substring(0,i.length-1),n--),!Pr(i)){let f;return i.trim().length===0?f="Invalid space after '<'.":f="Tag '"+i+"' is an invalid name.",I("InvalidTag",f,C(e,n))}const l=Sr(e,n);if(l===!1)return I("InvalidAttr","Attributes for '"+i+"' have open quote.",C(e,n));let d=l.value;if(n=l.index,d[d.length-1]==="/"){const f=n-d.length;d=d.substring(0,d.length-1);const h=tt(d,t);if(h===!0)r=!0;else return I(h.err.code,h.err.msg,C(e,f+h.err.line))}else if(a)if(l.tagClosed){if(d.trim().length>0)return I("InvalidTag","Closing tag '"+i+"' can't have attributes or invalid starting.",C(e,c));if(s.length===0)return I("InvalidTag","Closing tag '"+i+"' has not been opened.",C(e,c));{const f=s.pop();if(i!==f.tagName){let h=C(e,f.tagStartPos);return I("InvalidTag","Expected closing tag '"+f.tagName+"' (opened in line "+h.line+", col "+h.col+") instead of closing tag '"+i+"'.",C(e,c))}s.length==0&&(o=!0)}}else return I("InvalidTag","Closing tag '"+i+"' doesn't have proper closing.",C(e,n));else{const f=tt(d,t);if(f!==!0)return I(f.err.code,f.err.msg,C(e,n-d.length+f.err.line));if(o===!0)return I("InvalidXml","Multiple possible root nodes found.",C(e,n));t.unpairedTags.indexOf(i)!==-1||s.push({tagName:i,tagStartPos:c}),r=!0}for(n++;n<e.length;n++)if(e[n]==="<")if(e[n+1]==="!"){n++,n=et(e,n);continue}else if(e[n+1]==="?"){if(n=_e(e,++n),n.err)return n}else break;else if(e[n]==="&"){const f=Ir(e,n);if(f==-1)return I("InvalidChar","char '&' is not expected.",C(e,n));n=f}else if(o===!0&&!De(e[n]))return I("InvalidXml","Extra text at the end",C(e,n));e[n]==="<"&&n--}}else{if(De(e[n]))continue;return I("InvalidChar","char '"+e[n]+"' is not expected.",C(e,n))}if(r){if(s.length==1)return I("InvalidTag","Unclosed tag '"+s[0].tagName+"'.",C(e,s[0].tagStartPos));if(s.length>0)return I("InvalidXml","Invalid '"+JSON.stringify(s.map(n=>n.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return I("InvalidXml","Start tag expected.",1);return!0}function De(e){return e===" "||e==="	"||e===`
`||e==="\r"}function _e(e,t){const s=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){const r=e.substr(s,t-s);if(t>5&&r==="xml")return I("InvalidXml","XML declaration allowed only at the start of the document.",C(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function et(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let s=1;for(t+=8;t<e.length;t++)if(e[t]==="<")s++;else if(e[t]===">"&&(s--,s===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}const yr='"',Er="'";function Sr(e,t){let s="",r="",o=!1;for(;t<e.length;t++){if(e[t]===yr||e[t]===Er)r===""?r=e[t]:r!==e[t]||(r="");else if(e[t]===">"&&r===""){o=!0;break}s+=e[t]}return r!==""?!1:{value:s,index:t,tagClosed:o}}const Tr=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function tt(e,t){const s=Je(e,Tr),r={};for(let o=0;o<s.length;o++){if(s[o][1].length===0)return I("InvalidAttr","Attribute '"+s[o][2]+"' has no space in starting.",ee(s[o]));if(s[o][3]!==void 0&&s[o][4]===void 0)return I("InvalidAttr","Attribute '"+s[o][2]+"' is without value.",ee(s[o]));if(s[o][3]===void 0&&!t.allowBooleanAttributes)return I("InvalidAttr","boolean attribute '"+s[o][2]+"' is not allowed.",ee(s[o]));const n=s[o][2];if(!Ar(n))return I("InvalidAttr","Attribute '"+n+"' is an invalid name.",ee(s[o]));if(!r.hasOwnProperty(n))r[n]=1;else return I("InvalidAttr","Attribute '"+n+"' is repeated.",ee(s[o]))}return!0}function vr(e,t){let s=/\d/;for(e[t]==="x"&&(t++,s=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(s))break}return-1}function Ir(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,vr(e,t);let s=0;for(;t<e.length;t++,s++)if(!(e[t].match(/\w/)&&s<20)){if(e[t]===";")break;return-1}return t}function I(e,t,s){return{err:{code:e,msg:t,line:s.line||s,col:s.col}}}function Ar(e){return ge(e)}function Pr(e){return ge(e)}function C(e,t){const s=e.substring(0,t).split(/\r?\n/);return{line:s.length,col:s[s.length-1].length+1}}function ee(e){return e.startIndex+e[1].length}class br{constructor(t){this.externalEntities={},this.options=Vn(t)}parse(t,s){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(s){s===!0&&(s={});const n=mr(t,s);if(n!==!0)throw Error(`${n.err.msg}:${n.err.line}:${n.err.col}`)}const r=new Dn(this.options);r.addExternalEntities(this.externalEntities);const o=r.parseXml(t);return this.options.preserveOrder||o===void 0?o:ur(o,this.options)}addEntity(t,s){if(s.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(s==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=s}static getMetaDataSymbol(){return Z.getMetaDataSymbol()}}const Ee=new br({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(e,t)=>t.trim()===""&&t.includes(`
`)?"":void 0});Ee.addEntity("#xD","\r"),Ee.addEntity("#10",`
`);function Nr(e){return Ee.parse(e,!0)}var wr=u(17252);const st=e=>{const t="#text";for(const s in e)e.hasOwnProperty(s)&&e[s][t]!==void 0?e[s]=e[s][t]:typeof e[s]=="object"&&e[s]!==null&&(e[s]=st(e[s]));return e};var nt=u(96683),rt=u(308037);class Cr extends rt.B{constructor(s){super();T(this,"settings");T(this,"stringDeserializer");this.settings=s,this.stringDeserializer=new wr.k(s)}setSerdeContext(s){this.serdeContext=s,this.stringDeserializer.setSerdeContext(s)}read(s,r,o){const n=W.l.of(s),c=n.getMemberSchemas();if(n.isStructSchema()&&n.isMemberSchema()&&!!Object.values(c).find(d=>!!d.getMemberTraits().eventPayload)){const d={},f=Object.keys(c)[0];return c[f].isBlobSchema()?d[f]=r:d[f]=this.read(c[f],r),d}const i=(this.serdeContext?.utf8Encoder??nt.P)(r),l=this.parseXml(i);return this.readSchema(s,o?l[o]:l)}readSchema(s,r){const o=W.l.of(s);if(o.isUnitSchema())return;const n=o.getMergedTraits();if(o.isListSchema()&&!Array.isArray(r))return this.readSchema(o,[r]);if(r==null)return r;if(typeof r=="object"){const c=!!n.sparse,a=!!n.xmlFlattened;if(o.isListSchema()){const l=o.getValueSchema(),d=[],f=l.getMergedTraits().xmlName??"member",h=a?r:(r[0]??r)[f],v=Array.isArray(h)?h:[h];for(const A of v)(A!=null||c)&&d.push(this.readSchema(l,A));return d}const i={};if(o.isMapSchema()){const l=o.getKeySchema(),d=o.getValueSchema();let f;a?f=Array.isArray(r)?r:[r]:f=Array.isArray(r.entry)?r.entry:[r.entry];const h=l.getMergedTraits().xmlName??"key",v=d.getMergedTraits().xmlName??"value";for(const A of f){const E=A[h],w=A[v];(w!=null||c)&&(i[E]=this.readSchema(d,w))}return i}if(o.isStructSchema()){for(const[l,d]of o.structIterator()){const f=d.getMergedTraits(),h=f.httpPayload?f.xmlName??d.getName():d.getMemberTraits().xmlName??l;r[h]!=null&&(i[l]=this.readSchema(d,r[h]))}return i}if(o.isDocumentSchema())return r;throw new Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${o.getName(!0)}`)}return o.isListSchema()?[]:o.isMapSchema()||o.isStructSchema()?{}:this.stringDeserializer.read(o,r)}parseXml(s){if(s.length){let r;try{r=Nr(s)}catch(a){throw a&&typeof a=="object"&&Object.defineProperty(a,"$responseBodyText",{value:s}),a}const o="#text",n=Object.keys(r)[0],c=r[n];return c[o]&&(c[n]=c[o],delete c[o]),st(c)}return{}}}var Rr=u(956284),ot=u(616911),Or=u(191576),xr=u(300720),Mr=u(444635),it=u(136747);class $r extends rt.B{constructor(s){super();T(this,"settings");T(this,"buffer");this.settings=s}write(s,r,o=""){this.buffer===void 0&&(this.buffer="");const n=W.l.of(s);if(o&&!o.endsWith(".")&&(o+="."),n.isBlobSchema())(typeof r=="string"||r instanceof Uint8Array)&&(this.writeKey(o),this.writeValue((this.serdeContext?.base64Encoder??it.n)(r)));else if(n.isBooleanSchema()||n.isNumericSchema()||n.isStringSchema())r!=null?(this.writeKey(o),this.writeValue(String(r))):n.isIdempotencyToken()&&(this.writeKey(o),this.writeValue((0,Or.v4)()));else if(n.isBigIntegerSchema())r!=null&&(this.writeKey(o),this.writeValue(String(r)));else if(n.isBigDecimalSchema())r!=null&&(this.writeKey(o),this.writeValue(r instanceof xr.D?r.string:String(r)));else if(n.isTimestampSchema()){if(r instanceof Date)switch(this.writeKey(o),(0,Rr.V)(n,this.settings)){case 5:this.writeValue(r.toISOString().replace(".000Z","Z"));break;case 6:this.writeValue((0,Mr.JV)(r));break;case 7:this.writeValue(String(r.getTime()/1e3));break}}else{if(n.isDocumentSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unsupported document type ${n.getName(!0)}`);if(n.isListSchema()){if(Array.isArray(r))if(r.length===0)this.settings.serializeEmptyLists&&(this.writeKey(o),this.writeValue(""));else{const c=n.getValueSchema(),a=this.settings.flattenLists||n.getMergedTraits().xmlFlattened;let i=1;for(const l of r){if(l==null)continue;const d=this.getKey("member",c.getMergedTraits().xmlName),f=a?`${o}${i}`:`${o}${d}.${i}`;this.write(c,l,f),++i}}}else if(n.isMapSchema()){if(r&&typeof r=="object"){const c=n.getKeySchema(),a=n.getValueSchema(),i=n.getMergedTraits().xmlFlattened;let l=1;for(const[d,f]of Object.entries(r)){if(f==null)continue;const h=this.getKey("key",c.getMergedTraits().xmlName),v=i?`${o}${l}.${h}`:`${o}entry.${l}.${h}`,A=this.getKey("value",a.getMergedTraits().xmlName),E=i?`${o}${l}.${A}`:`${o}entry.${l}.${A}`;this.write(c,d,v),this.write(a,f,E),++l}}}else if(n.isStructSchema()){if(r&&typeof r=="object")for(const[c,a]of n.structIterator()){if(r[c]==null&&!a.isIdempotencyToken())continue;const i=this.getKey(c,a.getMergedTraits().xmlName),l=`${o}${i}`;this.write(a,r[c],l)}}else if(!n.isUnitSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${n.getName(!0)}`)}}flush(){if(this.buffer===void 0)throw new Error("@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.");const s=this.buffer;return delete this.buffer,s}getKey(s,r){const o=r??s;return this.settings.capitalizeKeys?o[0].toUpperCase()+o.slice(1):o}writeKey(s){s.endsWith(".")&&(s=s.slice(0,s.length-1)),this.buffer+=`&${(0,ot.$)(s)}=`}writeValue(s){this.buffer+=(0,ot.$)(s)}}class Vr extends On{constructor(s){super({defaultNamespace:s.defaultNamespace});T(this,"options");T(this,"serializer");T(this,"deserializer");T(this,"mixin",new Mn.U);this.options=s;const r={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:s.xmlNamespace,serviceNamespace:s.defaultNamespace,serializeEmptyLists:!0};this.serializer=new $r(r),this.deserializer=new Cr(r)}getShapeId(){return"aws.protocols#awsQuery"}setSerdeContext(s){this.serializer.setSerdeContext(s),this.deserializer.setSerdeContext(s)}getPayloadCodec(){throw new Error("AWSQuery protocol has no payload codec.")}async serializeRequest(s,r,o){const n=await super.serializeRequest(s,r,o);n.path.endsWith("/")||(n.path+="/"),Object.assign(n.headers,{"content-type":"application/x-www-form-urlencoded"}),((0,xn.L)(s.input)==="unit"||!n.body)&&(n.body="");const c=s.name.split("#")[1]??s.name;return n.body=`Action=${c}&Version=${this.options.version}`+n.body,n.body.endsWith("&")&&(n.body=n.body.slice(-1)),n}async deserializeResponse(s,r,o){const n=this.deserializer,c=W.l.of(s.output),a={};if(o.statusCode>=300){const h=await(0,te.P)(o.body,r);h.byteLength>0&&Object.assign(a,await n.read(15,h)),await this.handleError(s,r,o,a,this.deserializeMetadata(o))}for(const h in o.headers){const v=o.headers[h];delete o.headers[h],o.headers[h.toLowerCase()]=v}const i=s.name.split("#")[1]??s.name,l=c.isStructSchema()&&this.useNestedResult()?i+"Result":void 0,d=await(0,te.P)(o.body,r);return d.byteLength>0&&Object.assign(a,await n.read(c,d,l)),{$metadata:this.deserializeMetadata(o),...a}}useNestedResult(){return!0}async handleError(s,r,o,n,c){const a=this.loadQueryErrorCode(o,n)??"Unknown",i=this.loadQueryError(n),l=this.loadQueryErrorMessage(n);i.message=l,i.Error={Type:i.Type,Code:i.Code,Message:l};const{errorSchema:d,errorMetadata:f}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,o,i,c,(w,M)=>{try{return w.getSchema(M)}catch{return w.find(Pe=>W.l.of(Pe).getMergedTraits().awsQueryError?.[0]===M)}}),h=W.l.of(d),v=k.O.for(d[1]).getErrorCtor(d)??Error,A=new v(l),E={Error:i.Error};for(const[w,M]of h.structIterator()){const Ae=M.getMergedTraits().xmlName??w,Pe=i[Ae]??n[Ae];E[w]=this.deserializer.readSchema(M,Pe)}throw this.mixin.decorateServiceException(Object.assign(A,f,{$fault:h.getMergedTraits().error,message:l},E),n)}loadQueryErrorCode(s,r){const o=(r.Errors?.[0]?.Error??r.Errors?.Error??r.Error)?.Code;if(o!==void 0)return o;if(s.statusCode==404)return"NotFound"}loadQueryError(s){return s.Errors?.[0]?.Error??s.Errors?.Error??s.Error}loadQueryErrorMessage(s){const r=this.loadQueryError(s);return r?.message??r?.Message??s.message??s.Message??"Unknown"}getDefaultContentType(){return"application/x-www-form-urlencoded"}}var Fr=u(231427),Lr=u(580890),kr=u(805998),Wr=u(674430),zr=u(455006),Ur=u(875524),jr=u(46177),Kr=u(387773);const at="required",g="type",p="fn",m="argv",z="ref",ct=!1,Se=!0,U="booleanEquals",P="stringEquals",lt="sigv4",dt="sts",ut="us-east-1",S="endpoint",ft="https://sts.{Region}.{PartitionResult#dnsSuffix}",F="tree",J="error",Te="getAttr",ht={[at]:!1,[g]:"string"},ve={[at]:!0,default:!1,[g]:"boolean"},gt={[z]:"Endpoint"},pt={[p]:"isSet",[m]:[{[z]:"Region"}]},b={[z]:"Region"},mt={[p]:"aws.partition",[m]:[b],assign:"PartitionResult"},yt={[z]:"UseFIPS"},Et={[z]:"UseDualStack"},N={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:lt,signingName:dt,signingRegion:ut}]},headers:{}},O={},St={conditions:[{[p]:P,[m]:[b,"aws-global"]}],[S]:N,[g]:S},Tt={[p]:U,[m]:[yt,!0]},vt={[p]:U,[m]:[Et,!0]},It={[p]:Te,[m]:[{[z]:"PartitionResult"},"supportsFIPS"]},At={[z]:"PartitionResult"},Pt={[p]:U,[m]:[!0,{[p]:Te,[m]:[At,"supportsDualStack"]}]},bt=[{[p]:"isSet",[m]:[gt]}],Nt=[Tt],wt=[vt],Br={version:"1.0",parameters:{Region:ht,UseDualStack:ve,UseFIPS:ve,Endpoint:ht,UseGlobalEndpoint:ve},rules:[{conditions:[{[p]:U,[m]:[{[z]:"UseGlobalEndpoint"},Se]},{[p]:"not",[m]:bt},pt,mt,{[p]:U,[m]:[yt,ct]},{[p]:U,[m]:[Et,ct]}],rules:[{conditions:[{[p]:P,[m]:[b,"ap-northeast-1"]}],endpoint:N,[g]:S},{conditions:[{[p]:P,[m]:[b,"ap-south-1"]}],endpoint:N,[g]:S},{conditions:[{[p]:P,[m]:[b,"ap-southeast-1"]}],endpoint:N,[g]:S},{conditions:[{[p]:P,[m]:[b,"ap-southeast-2"]}],endpoint:N,[g]:S},St,{conditions:[{[p]:P,[m]:[b,"ca-central-1"]}],endpoint:N,[g]:S},{conditions:[{[p]:P,[m]:[b,"eu-central-1"]}],endpoint:N,[g]:S},{conditions:[{[p]:P,[m]:[b,"eu-north-1"]}],endpoint:N,[g]:S},{conditions:[{[p]:P,[m]:[b,"eu-west-1"]}],endpoint:N,[g]:S},{conditions:[{[p]:P,[m]:[b,"eu-west-2"]}],endpoint:N,[g]:S},{conditions:[{[p]:P,[m]:[b,"eu-west-3"]}],endpoint:N,[g]:S},{conditions:[{[p]:P,[m]:[b,"sa-east-1"]}],endpoint:N,[g]:S},{conditions:[{[p]:P,[m]:[b,ut]}],endpoint:N,[g]:S},{conditions:[{[p]:P,[m]:[b,"us-east-2"]}],endpoint:N,[g]:S},{conditions:[{[p]:P,[m]:[b,"us-west-1"]}],endpoint:N,[g]:S},{conditions:[{[p]:P,[m]:[b,"us-west-2"]}],endpoint:N,[g]:S},{endpoint:{url:ft,properties:{authSchemes:[{name:lt,signingName:dt,signingRegion:"{Region}"}]},headers:O},[g]:S}],[g]:F},{conditions:bt,rules:[{conditions:Nt,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[g]:J},{conditions:wt,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[g]:J},{endpoint:{url:gt,properties:O,headers:O},[g]:S}],[g]:F},{conditions:[pt],rules:[{conditions:[mt],rules:[{conditions:[Tt,vt],rules:[{conditions:[{[p]:U,[m]:[Se,It]},Pt],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:O,headers:O},[g]:S}],[g]:F},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[g]:J}],[g]:F},{conditions:Nt,rules:[{conditions:[{[p]:U,[m]:[It,Se]}],rules:[{conditions:[{[p]:P,[m]:[{[p]:Te,[m]:[At,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:O,headers:O},[g]:S},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:O,headers:O},[g]:S}],[g]:F},{error:"FIPS is enabled but this partition does not support FIPS",[g]:J}],[g]:F},{conditions:wt,rules:[{conditions:[Pt],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:O,headers:O},[g]:S}],[g]:F},{error:"DualStack is enabled but this partition does not support DualStack",[g]:J}],[g]:F},St,{endpoint:{url:ft,properties:O,headers:O},[g]:S}],[g]:F}],[g]:F},{error:"Invalid Configuration: Missing Region",[g]:J}]},Hr=new Ur.k({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),Qr=(e,t={})=>Hr.get(e,()=>(0,jr.s)(Br,{endpointParams:e,logger:t.logger}));Kr.m.aws=zr.UF;const Zr=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??kr.E,base64Encoder:e?.base64Encoder??it.n,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Qr,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??hn,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new Xe.f2},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Ye.m}],logger:e?.logger??new Fr.N,protocol:e?.protocol??new Vr({defaultNamespace:"com.amazonaws.sts",xmlNamespace:"https://sts.amazonaws.com/doc/2011-06-15/",version:"2011-06-15"}),serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??Lr.D,utf8Decoder:e?.utf8Decoder??Wr.a,utf8Encoder:e?.utf8Encoder??nt.P});var Xr=u(343533),Yr=u(303709),Gr=u(316056);const Jr=e=>{(0,Gr.I)(process.version);const t=(0,Yr.I)(e),s=()=>t().then(Xr.l),r=Zr(e);(0,yn.I)(process.version);const o={profile:e?.profile,logger:r.logger};return{...r,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,$.Z)(En.$,o),bodyLengthChecker:e?.bodyLengthChecker??Nn.n,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,Sn.pf)({serviceId:r.serviceId,clientVersion:mn.rE}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:n=>n.getIdentityProvider("aws.auth#sigv4")||(async c=>await e.credentialDefaultProvider(c?.__config||{})()),signer:new Xe.f2},{schemeId:"smithy.api#noAuth",identityProvider:n=>n.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Ye.m}],maxAttempts:e?.maxAttempts??(0,$.Z)(he.qs,e),region:e?.region??(0,$.Z)(D.GG,{...D.zH,...o}),requestHandler:Pn.$.create(e?.requestHandler??s),retryMode:e?.retryMode??(0,$.Z)({...he.kN,default:async()=>(await s()).retryMode||wn.L0},e),sha256:e?.sha256??An.V.bind(null,"sha256"),streamCollector:e?.streamCollector??bn.k,useDualstackEndpoint:e?.useDualstackEndpoint??(0,$.Z)(vn.e$,o),useFipsEndpoint:e?.useFipsEndpoint??(0,$.Z)(In.Ko,o),userAgentAppId:e?.userAgentAppId??(0,$.Z)(Tn.hV,o)}};var Ct=u(796354),Rt=u(73192),Ot=u(609791);const qr=e=>{const t=e.httpAuthSchemes;let s=e.httpAuthSchemeProvider,r=e.credentials;return{setHttpAuthScheme(o){const n=t.findIndex(c=>c.schemeId===o.schemeId);n===-1?t.push(o):t.splice(n,1,o)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(o){s=o},httpAuthSchemeProvider(){return s},setCredentials(o){r=o},credentials(){return r}}},Dr=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),_r=(e,t)=>{const s=Object.assign((0,Ct.R)(e),(0,Ot.xA)(e),(0,Rt.e)(e),qr(e));return t.forEach(r=>r.configure(s)),Object.assign(e,(0,Ct.$)(s),(0,Ot.uv)(s),(0,Rt.j)(s),Dr(s))};class Ie extends an.K{constructor(...[s]){const r=Jr(s||{});super(r);T(this,"config");this.initConfig=r;const o=Vt(r),n=(0,Js.D)(o),c=(0,he.$z)(n),a=(0,Ds.T)(c),i=(0,Qe.OV)(a),l=(0,rn.C)(i),d=pn(l),f=_r(d,s?.extensions||[]);this.config=f,this.middlewareStack.use((0,sn.wq)(this.config)),this.middlewareStack.use((0,qs.sM)(this.config)),this.middlewareStack.use((0,on.ey)(this.config)),this.middlewareStack.use((0,nn.vK)(this.config)),this.middlewareStack.use((0,Qe.TC)(this.config)),this.middlewareStack.use((0,Ys.Y7)(this.config)),this.middlewareStack.use((0,Gs.n)(this.config)),this.middlewareStack.use((0,_s.w)(this.config,{httpAuthSchemeParametersProvider:dn,identityProviderConfigProvider:async h=>new en.h({"aws.auth#sigv4":h.credentials})})),this.middlewareStack.use((0,tn.l)(this.config))}destroy(){super.destroy()}}const xt=(e,t)=>t?class extends e{constructor(r){super(r);for(const o of t)this.middlewareStack.use(o)}}:e,Mt=(e={},t)=>Ke(e,xt(Ie,t)),$t=(e={},t)=>Be(e,xt(Ie,t)),lo=e=>t=>e({roleAssumer:Mt(t),roleAssumerWithWebIdentity:$t(t),...t})},188701:(L,x,u)=>{u.d(x,{m:()=>q});class q{async sign($,be,Ne){return $}}},767084:L=>{L.exports={rE:"3.936.0"}}};

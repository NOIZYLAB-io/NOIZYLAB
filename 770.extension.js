"use strict";exports.id=770,exports.ids=[770],exports.modules={1372:(e,t,r)=>{r.d(t,{fromIni:()=>y});var n=r(1370),o=r(88),i=r(86),s=r(43),a=r(97);const c=e=>(0,s.g)(e,"CREDENTIALS_PROFILE_NAMED_PROVIDER","p"),l=(e,{profile:t,logger:r})=>{const n="string"==typeof e.source_profile&&void 0===e.credential_source;return n&&r?.debug?.(`    ${t} isAssumeRoleWithSourceProfile source_profile=${e.source_profile}`),n},f=(e,{profile:t,logger:r})=>{const n="string"==typeof e.credential_source&&void 0===e.source_profile;return n&&r?.debug?.(`    ${t} isCredentialSourceProfile credential_source=${e.credential_source}`),n},d=async(e,t,n,l={},f)=>{n.logger?.debug("@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)");const d=t[e],{source_profile:g,region:u}=d;if(!n.roleAssumer){const{getDefaultRoleAssumer:e}=await r.e(408).then(r.bind(r,1387));n.roleAssumer=e({...n.clientConfig,credentialProviderLogger:n.logger,parentClientConfig:{...n?.parentClientConfig,region:u??n?.parentClientConfig?.region}},n.clientPlugins)}if(g&&g in l)throw new i.C(`Detected a cycle attempting to resolve credentials for profile ${(0,o.Bz)(n)}. Profiles visited: `+Object.keys(l).join(", "),{logger:n.logger});n.logger?.debug("@aws-sdk/credential-provider-ini - finding credential resolver using "+(g?`source_profile=[${g}]`:`profile=[${e}]`));const E=g?f(g,t,n,{...l,[g]:!0},p(t[g]??{})):(await((e,t,n)=>{const o={EcsContainer:async e=>{const{fromHttp:t}=await r.e(963).then(r.bind(r,1376)),{fromContainerMetadata:o}=await r.e(330).then(r.bind(r,1367));return n?.debug("@aws-sdk/credential-provider-ini - credential_source is EcsContainer"),async()=>(0,a.c)(t(e??{}),o(e))().then(c)},Ec2InstanceMetadata:async e=>{n?.debug("@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata");const{fromInstanceMetadata:t}=await r.e(330).then(r.bind(r,1367));return async()=>t(e)().then(c)},Environment:async e=>{n?.debug("@aws-sdk/credential-provider-ini - credential_source is Environment");const{fromEnv:t}=await r.e(960).then(r.bind(r,1388));return async()=>t(e)().then(c)}};if(e in o)return o[e];throw new i.C(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:n})})(d.credential_source,e,n.logger)(n))();if(p(d))return E.then((e=>(0,s.g)(e,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o")));{const t={RoleArn:d.role_arn,RoleSessionName:d.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:d.external_id,DurationSeconds:parseInt(d.duration_seconds||"3600",10)},{mfa_serial:r}=d;if(r){if(!n.mfaCodeProvider)throw new i.C(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:n.logger,tryNextLink:!1});t.SerialNumber=r,t.TokenCode=await n.mfaCodeProvider(r)}const o=await E;return n.roleAssumer(o,t).then((e=>(0,s.g)(e,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o")))}},p=e=>!e.role_arn&&!!e.credential_source,g=e=>Boolean(e)&&"object"==typeof e&&"string"==typeof e.aws_access_key_id&&"string"==typeof e.aws_secret_access_key&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1&&["undefined","string"].indexOf(typeof e.aws_account_id)>-1,u=async(e,t)=>{t?.logger?.debug("@aws-sdk/credential-provider-ini - resolveStaticCredentials");const r={accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token,...e.aws_credential_scope&&{credentialScope:e.aws_credential_scope},...e.aws_account_id&&{accountId:e.aws_account_id}};return(0,s.g)(r,"CREDENTIALS_PROFILE","n")},E=async(e,t,n,o={},a=!1)=>{const c=t[e];if(Object.keys(o).length>0&&g(c))return u(c,n);if(a||((e,{profile:t="default",logger:r}={})=>Boolean(e)&&"object"==typeof e&&"string"==typeof e.role_arn&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(l(e,{profile:t,logger:r})||f(e,{profile:t,logger:r})))(c,{profile:e,logger:n.logger}))return d(e,t,n,o,E);if(g(c))return u(c,n);if(p=c,Boolean(p)&&"object"==typeof p&&"string"==typeof p.web_identity_token_file&&"string"==typeof p.role_arn&&["undefined","string"].indexOf(typeof p.role_session_name)>-1)return(async(e,t)=>r.e(522).then(r.bind(r,1375)).then((({fromTokenFile:r})=>r({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity,logger:t.logger,parentClientConfig:t.parentClientConfig})().then((e=>(0,s.g)(e,"CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN","q"))))))(c,n);var p;if((e=>Boolean(e)&&"object"==typeof e&&"string"==typeof e.credential_process)(c))return(async(e,t)=>r.e(733).then(r.bind(r,1373)).then((({fromProcess:r})=>r({...e,profile:t})().then((e=>(0,s.g)(e,"CREDENTIALS_PROFILE_PROCESS","v"))))))(n,e);if((e=>e&&("string"==typeof e.sso_start_url||"string"==typeof e.sso_account_id||"string"==typeof e.sso_session||"string"==typeof e.sso_region||"string"==typeof e.sso_role_name))(c))return await(async(e,t,n={})=>{const{fromSSO:o}=await r.e(593).then(r.bind(r,1368));return o({profile:e,logger:n.logger,parentClientConfig:n.parentClientConfig,clientConfig:n.clientConfig})().then((e=>t.sso_session?(0,s.g)(e,"CREDENTIALS_PROFILE_SSO","r"):(0,s.g)(e,"CREDENTIALS_PROFILE_SSO_LEGACY","t")))})(e,c,n);throw new i.C(`Could not resolve credentials using profile: [${e}] in configuration/credentials file(s).`,{logger:n.logger})},y=(e={})=>async({callerClientConfig:t}={})=>{const r={...e,parentClientConfig:{...t,...e.parentClientConfig}};r.logger?.debug("@aws-sdk/credential-provider-ini - fromIni");const i=await(0,n.Y)(r);return E((0,o.Bz)({profile:e.profile??t?.profile}),i,r)}},1370:(e,t,r)=>{r.d(t,{Y:()=>o});var n=r(89);const o=async e=>{const t=await(0,n.p)(e);return((...e)=>{const t={};for(const r of e)for(const[e,n]of Object.entries(r))void 0!==t[e]?Object.assign(t[e],n):t[e]=n;return t})(t.configFile,t.credentialsFile)}}};
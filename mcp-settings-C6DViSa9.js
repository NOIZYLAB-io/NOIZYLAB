import{at as a,au as p,av as g,aw as S,ax as s,ay as y,az as j,aA as v,aB as d,aC as h,aD as M,aE as _}from"./index-GACu_xFk.js";const b=["mcp-config","servers"],C={config:{},origins:{},layers:null};function N(){const e=a.c(2),t=p();let r;return e[0]!==t?(r={queryKey:b,queryFn:async()=>{try{return t.readConfig({includeLayers:!1})}catch(c){const n=c;return S.error(`Failed to load MCP servers ${String(n)}`),C}},select:E},e[0]=t,e[1]=r):r=e[1],g(r)}function E(e){return A(e.config)}function A(e){if(e==null||typeof e!="object"||Array.isArray(e))return{};const t=e,r=t.mcp_servers??t.mcpServers;return r==null||typeof r!="object"||Array.isArray(r)?{}:r}const f="mcp-settings";function $(){const e=a.c(3);let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsx(y,{slug:f,messagePrefix:"settings.section"}),e[0]=t):t=e[0];const r=t;let c;e[1]===Symbol.for("react.memo_cache_sentinel")?(c=s.jsx(j,{slug:f}),e[1]=c):c=e[1];const n=c;let o;return e[2]===Symbol.for("react.memo_cache_sentinel")?(o=s.jsx(v,{title:r,subtitle:n,children:s.jsx(P,{})}),e[2]=o):o=e[2],o}function P(){const e=a.c(8),{data:t}=N();let r;e[0]!==t?(r=t===void 0?{}:t,e[0]=t,e[1]=r):r=e[1];const c=r;let n;e[2]!==c?(n=Object.keys(c),e[2]=c,e[3]=n):n=e[3];const o=n,m=o.length>0;let i;e[4]===Symbol.for("react.memo_cache_sentinel")?(i=s.jsx("div",{className:"flex items-center",children:s.jsx("p",{className:"text-token-text-primary text-base font-medium",children:s.jsx(d,{id:"settings.mcp.myServers",defaultMessage:"Custom servers",description:"Heading for the user's MCP servers list"})})}),e[4]=i):i=e[4];let l;return e[5]!==m||e[6]!==o?(l=s.jsx(s.Fragment,{children:s.jsxs("section",{className:"flex flex-col gap-3",children:[i,s.jsx("div",{className:"flex flex-col gap-2",children:m?s.jsxs(s.Fragment,{children:[o.map(F),s.jsx(u,{className:"justify-center",children:s.jsx(x,{})})]}):s.jsxs(u,{children:[s.jsx("p",{className:"text-token-text-secondary text-sm",children:s.jsx(d,{id:"settings.mcp.empty",defaultMessage:"No custom MCP servers connected",description:"Empty state for MCP servers list"})}),s.jsx(x,{})]})})]})}),e[5]=m,e[6]=o,e[7]=l):l=e[7],l}function F(e){return s.jsx(u,{children:s.jsx("p",{className:"text-token-text-primary text-sm font-medium",children:e})},e)}function x(){const e=a.c(1);let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsxs(M,{color:"ghost",size:"toolbar",children:[s.jsx(_,{className:"icon-2xs"}),s.jsx(d,{id:"settings.mcp.addServer",defaultMessage:"Add server",description:"Button to add a new MCP server"})]}),e[0]=t):t=e[0],t}function u(e){const t=a.c(5),{children:r,className:c}=e;let n;t[0]!==c?(n=h("border-token-border bg-token-surface-secondary flex items-center justify-between rounded-lg border px-4 py-3",c),t[0]=c,t[1]=n):n=t[1];let o;return t[2]!==r||t[3]!==n?(o=s.jsx("div",{className:n,children:r}),t[2]=r,t[3]=n,t[4]=o):o=t[4],o}export{$ as McpSettings};

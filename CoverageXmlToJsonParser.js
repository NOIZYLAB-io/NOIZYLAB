'use strict';const a30_0x47a085=a30_0x36cb;(function(_0x1b521a,_0x4b0a07){const _0x2a61b9=a30_0x36cb,_0x28ca16=_0x1b521a();while(!![]){try{const _0xd50858=-parseInt(_0x2a61b9(0x1d7))/0x1+-parseInt(_0x2a61b9(0x21d))/0x2+-parseInt(_0x2a61b9(0x1f3))/0x3*(-parseInt(_0x2a61b9(0x228))/0x4)+parseInt(_0x2a61b9(0x22b))/0x5+parseInt(_0x2a61b9(0x1dd))/0x6*(-parseInt(_0x2a61b9(0x1db))/0x7)+-parseInt(_0x2a61b9(0x20c))/0x8*(-parseInt(_0x2a61b9(0x1e6))/0x9)+parseInt(_0x2a61b9(0x1e7))/0xa*(-parseInt(_0x2a61b9(0x213))/0xb);if(_0xd50858===_0x4b0a07)break;else _0x28ca16['push'](_0x28ca16['shift']());}catch(_0x259ccb){_0x28ca16['push'](_0x28ca16['shift']());}}}(a30_0x3475,0x4d4b6));var __createBinding=this&&this[a30_0x47a085(0x208)]||(Object[a30_0x47a085(0x211)]?function(_0x1059e4,_0x3d4f08,_0x39488c,_0x3e7c76){const _0x505b2f=a30_0x47a085;if(_0x3e7c76===undefined)_0x3e7c76=_0x39488c;var _0x2fbd6f=Object['getOwnPropertyDescriptor'](_0x3d4f08,_0x39488c);(!_0x2fbd6f||(_0x505b2f(0x21c)in _0x2fbd6f?!_0x3d4f08[_0x505b2f(0x1ed)]:_0x2fbd6f[_0x505b2f(0x20f)]||_0x2fbd6f[_0x505b2f(0x1ea)]))&&(_0x2fbd6f={'enumerable':!![],'get':function(){return _0x3d4f08[_0x39488c];}}),Object[_0x505b2f(0x1f5)](_0x1059e4,_0x3e7c76,_0x2fbd6f);}:function(_0x5c3f12,_0xb94195,_0x1283e6,_0x52acb5){if(_0x52acb5===undefined)_0x52acb5=_0x1283e6;_0x5c3f12[_0x52acb5]=_0xb94195[_0x1283e6];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a30_0x47a085(0x211)]?function(_0x1ac498,_0x4a27ef){const _0x5ec780=a30_0x47a085;Object[_0x5ec780(0x1f5)](_0x1ac498,'default',{'enumerable':!![],'value':_0x4a27ef});}:function(_0x4fbef0,_0x4fe2f9){const _0xcde47=a30_0x47a085;_0x4fbef0[_0xcde47(0x1f9)]=_0x4fe2f9;}),__importStar=this&&this[a30_0x47a085(0x1d5)]||(function(){var _0x3d3609=function(_0x23b13d){return _0x3d3609=Object['getOwnPropertyNames']||function(_0x364665){const _0x5a41b1=a30_0x36cb;var _0x48e7a4=[];for(var _0x1b71b0 in _0x364665)if(Object[_0x5a41b1(0x20b)][_0x5a41b1(0x221)][_0x5a41b1(0x21a)](_0x364665,_0x1b71b0))_0x48e7a4[_0x48e7a4[_0x5a41b1(0x1f8)]]=_0x1b71b0;return _0x48e7a4;},_0x3d3609(_0x23b13d);};return function(_0x54d602){const _0x5b32af=a30_0x36cb;if(_0x54d602&&_0x54d602['__esModule'])return _0x54d602;var _0x33f073={};if(_0x54d602!=null){for(var _0x555600=_0x3d3609(_0x54d602),_0x381150=0x0;_0x381150<_0x555600[_0x5b32af(0x1f8)];_0x381150++)if(_0x555600[_0x381150]!==_0x5b32af(0x1f9))__createBinding(_0x33f073,_0x54d602,_0x555600[_0x381150]);}return __setModuleDefault(_0x33f073,_0x54d602),_0x33f073;};}());Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a30_0x47a085(0x1f0)]=void 0x0;function a30_0x36cb(_0x1ae042,_0x25807e){const _0x34752a=a30_0x3475();return a30_0x36cb=function(_0x36cbbe,_0x3ee2e6){_0x36cbbe=_0x36cbbe-0x1d2;let _0x1e323b=_0x34752a[_0x36cbbe];return _0x1e323b;},a30_0x36cb(_0x1ae042,_0x25807e);}const logging=__importStar(require(a30_0x47a085(0x1da))),sax=__importStar(require(a30_0x47a085(0x22a))),fs_1=require('fs'),path_1=require(a30_0x47a085(0x1e8)),CoverageConsts_1=require('./CoverageConsts'),common_1=require(a30_0x47a085(0x21f)),ReadableString_1=require(a30_0x47a085(0x1e3)),constants_1=require(a30_0x47a085(0x1f2)),workspace_1=require(a30_0x47a085(0x1e9));function a30_0x3475(){const _0x32b6fa=['JSON_LINE','sax','341250gOXapl','Skipping\x20Coverage\x20data\x20-\x20non-existing\x20itemRef\x20','convertMapToObject','Skipping\x20unsupported\x20location\x20','CoverageConsts','charCodeAt','project','__importStar','number','410086WcNNqC','set','join','../logging','7JYPlbX','Error\x20while\x20parsing\x20','152442wNBjJJ','saveJsonFile','parseXmlToJson','\x20to\x20JSON\x20file:\x20','toString','existsSync','./ReadableString','createStream','name','954nJUrYe','1030TwFYaM','path','../workspace','configurable','There\x20was\x20an\x20error\x20during\x20saving\x20','elems','__esModule','forEach','itemRef','CoverageXmlToJsonParser','createReadStream','../constants','75oswubK','getFileForLocation','defineProperty','reduce','closetag','length','default','CvgData','attributes','JSON_FUNCTIONS','JSON_COVERED','ReadableString','indexMap','Item','utf8','scPath','pipe','has','Loc','uri','locRef','__createBinding','\x20file:\x20','writeFile','prototype','28816hmZKWF','stringify','find','writable','opentag','create','error','26708mnYZZg','JSON_LINES','push','CtxCvg','DynCvg','PARASOFT_COVERAGE_INDEX_FILE_NAME','Skipping\x20malformed\x20Coverage\x20data\x20-\x20non-existing\x20location\x20info\x20','call','stack','get','138424tjsGss','getWorkspaceFiles','../common','\x20has\x20a\x20bad\x20format\x20(no\x20\x22Coverage\x22\x20tag)','hasOwnProperty','split','generateFilename','isArray','The\x20parsed\x20file:\x20','boolean','JSON_FILE','99412XILlse'];a30_0x3475=function(){return _0x32b6fa;};return a30_0x3475();}class CoverageXmlToJsonParser{[a30_0x47a085(0x1ff)]=new Map();[a30_0x47a085(0x223)](_0x4701d4){const _0x253541=a30_0x47a085,_0x549d2e=_0x3773d2=>_0x3773d2[_0x253541(0x222)]('')[_0x253541(0x1f6)]((_0x417d20,_0xf3953)=>{const _0xb3d412=_0x253541;return _0x417d20=(_0x417d20<<0x5)-_0x417d20+_0xf3953[_0xb3d412(0x1d3)](0x0),_0x417d20&_0x417d20;},0x0);return _0x549d2e(_0x4701d4)[_0x253541(0x1e1)](0x10)+'.json';}[a30_0x47a085(0x22d)](_0x4ab391){const _0x57a2d8=a30_0x47a085,_0x2abaa0={};return _0x4ab391[_0x57a2d8(0x1ee)]((_0x17c648,_0x177ef3)=>{const _0x1061f5=_0x57a2d8;if(typeof _0x17c648==_0x1061f5(0x226)||typeof _0x17c648=='string'||typeof _0x17c648==_0x1061f5(0x1d6))_0x2abaa0[_0x177ef3]=_0x17c648;else Array[_0x1061f5(0x224)](_0x17c648)&&(_0x2abaa0[_0x177ef3]=[],_0x17c648[_0x1061f5(0x1ee)](_0x431411=>_0x2abaa0[_0x177ef3][_0x1061f5(0x215)](this[_0x1061f5(0x22d)](_0x431411))));}),_0x2abaa0;}['saveJsonFile'](_0x214eba,_0x29ce8a){const _0x306fe3=a30_0x47a085,_0x2ea7aa=_0x214eba[_0x306fe3(0x21c)](CoverageConsts_1[_0x306fe3(0x1d2)][_0x306fe3(0x227)]),_0x34d19c=this[_0x306fe3(0x223)](_0x214eba[_0x306fe3(0x21c)](CoverageConsts_1['CoverageConsts']['JSON_FILE'])),_0x415531=JSON[_0x306fe3(0x20d)](this[_0x306fe3(0x22d)](_0x214eba));this[_0x306fe3(0x1ff)][_0x306fe3(0x1d8)](_0x34d19c,_0x2ea7aa),!(0x0,fs_1[_0x306fe3(0x1e2)])(_0x29ce8a)&&(0x0,fs_1['mkdirSync'])(_0x29ce8a,{'recursive':!![]}),(0x0,fs_1[_0x306fe3(0x20a)])((0x0,path_1[_0x306fe3(0x1d9)])(_0x29ce8a,_0x34d19c),_0x415531,_0x306fe3(0x201),function(_0x5416f7){const _0x3aca17=_0x306fe3;_0x5416f7&&logging[_0x3aca17(0x212)]('There\x20was\x20an\x20error\x20during\x20saving\x20coverage\x20data\x20about\x20'+_0x2ea7aa+_0x3aca17(0x1e0)+_0x5416f7+'\x20');});}async[a30_0x47a085(0x1df)](_0x5b6135,_0x1d7a7c,_0x5241dd=!![]){const _0xc161df=a30_0x47a085;let _0xfc2338;const _0x41d9f9=new workspace_1['ImportLocationMatcher'](await(0x0,workspace_1[_0xc161df(0x21e)])());!_0x5241dd?_0xfc2338=new ReadableString_1[(_0xc161df(0x1fe))](_0x5b6135):_0xfc2338=(0x0,fs_1[_0xc161df(0x1f1)])(_0x5b6135);const _0x3df03d=new Map(),_0x24e49a=new Map();let _0x1e4375,_0x14b730,_0x37230e=![];const _0x146c3f=new Map(),_0x109ec6=sax[_0xc161df(0x1e4)](!![]);_0x109ec6['on'](_0xc161df(0x1f7),_0x19763a=>{_0x19763a=='Coverage'&&(_0x37230e=!![]);}),_0x109ec6['on'](_0xc161df(0x210),_0x3c3b7d=>{const _0x3afe50=_0xc161df;try{_0x37230e=![];if(_0x3c3b7d['name']===_0x3afe50(0x205)){if(_0x3c3b7d[_0x3afe50(0x1fb)][_0x3afe50(0x207)]){const _0x56be86=_0x3c3b7d[_0x3afe50(0x1fb)][_0x3afe50(0x207)][_0x3afe50(0x1e1)](),_0x255e7d=_0x41d9f9[_0x3afe50(0x1f4)](_0x3c3b7d[_0x3afe50(0x1fb)][_0x3afe50(0x206)][_0x3afe50(0x1e1)](),_0x3c3b7d['attributes'][_0x3afe50(0x1d4)]?.[_0x3afe50(0x1e1)](),_0x3c3b7d[_0x3afe50(0x1fb)]['resProjPath']?.[_0x3afe50(0x1e1)](),_0x3c3b7d[_0x3afe50(0x1fb)][_0x3afe50(0x202)]?.[_0x3afe50(0x1e1)]());_0x24e49a[_0x3afe50(0x1d8)](_0x56be86,_0x255e7d);}else logging['error'](_0x3afe50(0x22e)+_0x3c3b7d);}else{if(_0x3c3b7d[_0x3afe50(0x1e5)]===_0x3afe50(0x1fa)){_0x3df03d&&_0x146c3f['has'](CoverageConsts_1[_0x3afe50(0x1d2)][_0x3afe50(0x227)])&&(_0x3df03d['forEach'](_0x1d716a=>{const _0x52b7c3=_0x3afe50;_0x146c3f[_0x52b7c3(0x21c)](CoverageConsts_1[_0x52b7c3(0x1d2)][_0x52b7c3(0x1fc)])==''?_0x146c3f[_0x52b7c3(0x1d8)](CoverageConsts_1['CoverageConsts'][_0x52b7c3(0x1fc)],[_0x1d716a]):_0x146c3f[_0x52b7c3(0x21c)](CoverageConsts_1['CoverageConsts'][_0x52b7c3(0x1fc)])[_0x52b7c3(0x215)](_0x1d716a);}),this[_0x3afe50(0x1de)](_0x146c3f,_0x1d7a7c));let _0x4aae08='';if(_0x3c3b7d[_0x3afe50(0x1fb)][_0x3afe50(0x207)])_0x4aae08=_0x3c3b7d[_0x3afe50(0x1fb)]['locRef'][_0x3afe50(0x1e1)]();else{logging[_0x3afe50(0x212)](_0x3afe50(0x219)+_0x3c3b7d);return;}_0x14b730=_0x24e49a[_0x3afe50(0x21c)](_0x4aae08);if(!_0x14b730){logging[_0x3afe50(0x212)]('Skipping\x20Coverage\x20data\x20-\x20non-existing\x20locRef\x20'+_0x3c3b7d);return;}_0x146c3f[_0x3afe50(0x1d8)](CoverageConsts_1['CoverageConsts'][_0x3afe50(0x227)],(0x0,common_1['toUnixPath'])(_0x14b730)),_0x146c3f[_0x3afe50(0x1d8)](CoverageConsts_1[_0x3afe50(0x1d2)][_0x3afe50(0x1fc)],''),_0x3df03d['clear']();}else{if(_0x3c3b7d[_0x3afe50(0x1e5)]===_0x3afe50(0x200)){const _0x34f81d=new Map();_0x34f81d[_0x3afe50(0x1d8)](_0x3afe50(0x1e5),_0x3c3b7d[_0x3afe50(0x1fb)]['name'][_0x3afe50(0x1e1)]()),_0x3df03d['set'](+_0x3c3b7d[_0x3afe50(0x1fb)][_0x3afe50(0x1ef)],_0x34f81d);}else{if(_0x3c3b7d[_0x3afe50(0x1e5)]==='StatCvg'){const _0x42b946=_0x3df03d[_0x3afe50(0x21c)](+_0x3c3b7d[_0x3afe50(0x1fb)]['itemRef']);_0x42b946?_0x3c3b7d[_0x3afe50(0x1fb)][_0x3afe50(0x1ec)][_0x3afe50(0x1e1)]()['split']('\x20')[_0x3afe50(0x1ee)](_0xd6ba19=>{const _0x488ca0=_0x3afe50,_0x16929f=new Map();_0x16929f['set'](CoverageConsts_1[_0x488ca0(0x1d2)]['JSON_COVERED'],![]),_0x16929f[_0x488ca0(0x1d8)](CoverageConsts_1['CoverageConsts']['JSON_LINE'],+_0xd6ba19),!_0x42b946[_0x488ca0(0x21c)](CoverageConsts_1['CoverageConsts'][_0x488ca0(0x214)])?_0x42b946['set'](CoverageConsts_1[_0x488ca0(0x1d2)][_0x488ca0(0x214)],[_0x16929f]):_0x42b946[_0x488ca0(0x21c)](CoverageConsts_1[_0x488ca0(0x1d2)][_0x488ca0(0x214)])?.['push'](_0x16929f);}):logging[_0x3afe50(0x212)](_0x3afe50(0x22c)+_0x3c3b7d);}else{if(_0x3c3b7d[_0x3afe50(0x1e5)]===_0x3afe50(0x217))_0x1e4375=+_0x3c3b7d[_0x3afe50(0x1fb)][_0x3afe50(0x1ef)];else{if(_0x3c3b7d[_0x3afe50(0x1e5)]===_0x3afe50(0x216)){const _0x551d81=_0x3df03d['get'](_0x1e4375);_0x551d81?_0x3c3b7d[_0x3afe50(0x1fb)]['elemRefs']['toString']()[_0x3afe50(0x222)]('\x20')[_0x3afe50(0x1ee)](_0x448f1f=>{const _0x9c63ce=_0x3afe50,_0x561729=_0x551d81[_0x9c63ce(0x21c)](CoverageConsts_1['CoverageConsts']['JSON_LINES'])?.[_0x9c63ce(0x20e)](_0x1e7481=>_0x1e7481[_0x9c63ce(0x21c)](CoverageConsts_1['CoverageConsts'][_0x9c63ce(0x229)])===+_0x448f1f);_0x561729&&_0x561729[_0x9c63ce(0x1d8)](CoverageConsts_1['CoverageConsts'][_0x9c63ce(0x1fd)],!![]);}):logging[_0x3afe50(0x212)](_0x3afe50(0x22c)+_0x3c3b7d);}}}}}}}catch(_0x325da9){logging[_0x3afe50(0x212)](_0x3afe50(0x1dc)+_0x5b6135+':\x20'+(_0x325da9[_0x3afe50(0x21b)]??_0x325da9));}});const _0x2568b0=new Promise((_0x33f4c8,_0x1823bc)=>{const _0x5db3ab=_0xc161df;_0x109ec6['on'](_0x5db3ab(0x212),_0xa71763=>{const _0x4963a0=_0x5db3ab;logging['error'](_0x4963a0(0x1dc)+_0x5b6135+':\x20'+(_0xa71763[_0x4963a0(0x21b)]??_0xa71763)),_0x1823bc(_0x4963a0(0x1dc)+_0x5b6135+':\x20'+(_0xa71763[_0x4963a0(0x21b)]??_0xa71763));}),_0x109ec6['on']('end',()=>{const _0x103af9=_0x5db3ab;!_0x37230e&&(logging[_0x103af9(0x212)](_0x103af9(0x225)+_0x5b6135+_0x103af9(0x220)),_0x1823bc(CoverageConsts_1[_0x103af9(0x1d2)]['WRONG_COVERAGE_XML_FORMAT_MESSAGE']));if(_0x3df03d&&_0x146c3f[_0x103af9(0x204)](CoverageConsts_1[_0x103af9(0x1d2)][_0x103af9(0x227)])){_0x3df03d[_0x103af9(0x1ee)](_0x559a76=>{const _0x365774=_0x103af9;_0x146c3f[_0x365774(0x21c)](CoverageConsts_1['CoverageConsts'][_0x365774(0x1fc)])==''?_0x146c3f[_0x365774(0x1d8)](CoverageConsts_1[_0x365774(0x1d2)]['JSON_FUNCTIONS'],[_0x559a76]):_0x146c3f[_0x365774(0x21c)](CoverageConsts_1[_0x365774(0x1d2)][_0x365774(0x1fc)])['push'](_0x559a76);}),this[_0x103af9(0x1de)](_0x146c3f,_0x1d7a7c);if(this[_0x103af9(0x1ff)]['size']>0x0){const _0x23cc82=(0x0,path_1[_0x103af9(0x1d9)])(_0x1d7a7c,constants_1[_0x103af9(0x218)]),_0x2d19ea=JSON['stringify'](this[_0x103af9(0x22d)](this['indexMap']));(0x0,fs_1['writeFile'])(_0x23cc82,_0x2d19ea,_0x103af9(0x201),_0x1c7ed9=>{const _0x56dfb0=_0x103af9;if(_0x1c7ed9){const _0x37b692=_0x56dfb0(0x1eb)+constants_1[_0x56dfb0(0x218)]+_0x56dfb0(0x209)+_0x1c7ed9+'\x20';logging[_0x56dfb0(0x212)](_0x37b692),_0x1823bc(_0x37b692);}_0x33f4c8();});}}});});return _0xfc2338[_0xc161df(0x203)](_0x109ec6),_0x2568b0;}}exports[a30_0x47a085(0x1f0)]=CoverageXmlToJsonParser;
"use strict";exports.id=2210,exports.ids=[2210],exports.modules={202210:(g,I,n)=>{n.d(I,{getInstanceMetadataEndpoint:()=>D,httpRequest:()=>m});var r=n(201745),v=n(320181),N=n(958611);function m(t){return new Promise((h,c)=>{const e=(0,N.request)({method:"GET",...t,hostname:t.hostname?.replace(/^\[(.+)\]$/,"$1")});e.on("error",a=>{c(Object.assign(new r.m("Unable to connect to instance metadata service"),a)),e.destroy()}),e.on("timeout",()=>{c(new r.m("TimeoutError from instance metadata service")),e.destroy()}),e.on("response",a=>{const{statusCode:d=400}=a;(d<200||300<=d)&&(c(Object.assign(new r.m("Error response received from instance metadata service"),{statusCode:d})),e.destroy());const E=[];a.on("data",A=>{E.push(A)}),a.on("end",()=>{h(v.Buffer.concat(E)),e.destroy()})}),e.end()})}var i=n(535262),O=n(586666),s;(function(t){t.IPv4="http://169.254.169.254",t.IPv6="http://[fd00:ec2::254]"})(s||(s={}));const P="AWS_EC2_METADATA_SERVICE_ENDPOINT",u="ec2_metadata_service_endpoint",f={environmentVariableSelector:t=>t[P],configFileSelector:t=>t[u],default:void 0};var o;(function(t){t.IPv4="IPv4",t.IPv6="IPv6"})(o||(o={}));const l="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",p="ec2_metadata_service_endpoint_mode",T={environmentVariableSelector:t=>t[l],configFileSelector:t=>t[p],default:o.IPv4},D=async()=>(0,O.D)(await _()||await M()),_=async()=>(0,i.Z)(f)(),M=async()=>{const t=await(0,i.Z)(T)();switch(t){case o.IPv4:return s.IPv4;case o.IPv6:return s.IPv6;default:throw new Error(`Unsupported endpoint mode: ${t}. Select from ${Object.values(o)}`)}}}};

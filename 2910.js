"use strict";exports.id=2910,exports.ids=[2910],exports.modules={522910:(Dn,Bt,d)=>{d.d(Bt,{getDefaultRoleAssumer:()=>jt,getDefaultRoleAssumerWithWebIdentity:()=>Vt});var ce=d(667078),ae=d(334546),tt=d(408029),i=d(323007);const Zt=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),st={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};class b extends i.ServiceException{constructor(s){super(s),Object.setPrototypeOf(this,b.prototype)}}class de extends b{constructor(s){super({name:"ExpiredTokenException",$fault:"client",...s}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,de.prototype)}}class le extends b{constructor(s){super({name:"MalformedPolicyDocumentException",$fault:"client",...s}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,le.prototype)}}class me extends b{constructor(s){super({name:"PackedPolicyTooLargeException",$fault:"client",...s}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,me.prototype)}}class ue extends b{constructor(s){super({name:"RegionDisabledException",$fault:"client",...s}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,ue.prototype)}}class fe extends b{constructor(s){super({name:"IDPRejectedClaimException",$fault:"client",...s}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,fe.prototype)}}class he extends b{constructor(s){super({name:"InvalidIdentityTokenException",$fault:"client",...s}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,he.prototype)}}class ye extends b{constructor(s){super({name:"IDPCommunicationErrorException",$fault:"client",...s}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,ye.prototype)}}class ge extends b{constructor(s){super({name:"InvalidAuthorizationMessageException",$fault:"client",...s}),this.name="InvalidAuthorizationMessageException",this.$fault="client",Object.setPrototypeOf(this,ge.prototype)}}const N=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:i.SENSITIVE_STRING}}),Xt=e=>({...e,...e.Credentials&&{Credentials:N(e.Credentials)}}),Wn=e=>({...e,...e.SAMLAssertion&&{SAMLAssertion:SENSITIVE_STRING}}),$n=e=>({...e,...e.Credentials&&{Credentials:N(e.Credentials)}}),Qt=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:i.SENSITIVE_STRING}}),qt=e=>({...e,...e.Credentials&&{Credentials:N(e.Credentials)}}),kn=e=>({...e,...e.Credentials&&{Credentials:N(e.Credentials)}}),Mn=e=>({...e,...e.Credentials&&{Credentials:N(e.Credentials)}}),Fn=e=>({...e,...e.Credentials&&{Credentials:N(e.Credentials)}});var Jt=d(712763),Yt=d(653968);const Se=(e,s)=>(0,Yt.w)(e,s).then(t=>{if(t.length){const n=new Jt.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(R,v)=>v.trim()===""&&v.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let o;try{o=n.parse(t,!0)}catch(R){throw R&&typeof R=="object"&&Object.defineProperty(R,"$responseBodyText",{value:t}),R}const a="#text",r=Object.keys(o)[0],h=o[r];return h[a]&&(h[r]=h[a],delete h[a]),(0,i.getValueFromTextNode)(h)}return{}}),es=async(e,s)=>{const t=await Se(e,s);return t.Error&&(t.Error.message=t.Error.message??t.Error.Message),t},zn=(e,s)=>{if(s?.Error?.Code!==void 0)return s.Error.Code;if(s?.Code!==void 0)return s.Code;if(e.statusCode==404)return"NotFound"};var Ae=d(890130);const ts=async(e,s)=>{const t=W;let n;return n=G({...fs(e,s),[k]:js,[L]:$}),D(s,t,"/",void 0,n)},Ln=async(e,s)=>{const t=W;let n;return n=G({...hs(e,s),[k]:Vs,[L]:$}),D(s,t,"/",void 0,n)},ss=async(e,s)=>{const t=W;let n;return n=G({...ys(e,s),[k]:Bs,[L]:$}),D(s,t,"/",void 0,n)},Gn=async(e,s)=>{const t=W;let n;return n=G({...gs(e,s),[k]:Zs,[L]:$}),D(s,t,"/",void 0,n)},Un=async(e,s)=>{const t=W;let n;return n=G({...Ss(e,s),[k]:Xs,[L]:$}),D(s,t,"/",void 0,n)},On=async(e,s)=>{const t=W;let n;return n=G({...As(e,s),[k]:Qs,[L]:$}),D(s,t,"/",void 0,n)},Kn=async(e,s)=>{const t=W;let n;return n=G({...Es(e,s),[k]:qs,[L]:$}),D(s,t,"/",void 0,n)},Nn=async(e,s)=>{const t=W;let n;return n=G({...ps(e,s),[k]:Js,[L]:$}),D(s,t,"/",void 0,n)},Hn=async(e,s)=>{const t=W;let n;return n=G({...Rs(e,s),[k]:Ys,[L]:$}),D(s,t,"/",void 0,n)},ns=async(e,s)=>{if(e.statusCode>=300)return w(e,s);const t=await Se(e.body,s);let n={};return n=xs(t.AssumeRoleResult,s),{$metadata:S(e),...n}},jn=async(e,s)=>{if(e.statusCode>=300)return w(e,s);const t=await parseBody(e.body,s);let n={};return n=_s(t.AssumeRoleWithSAMLResult,s),{$metadata:S(e),...n}},os=async(e,s)=>{if(e.statusCode>=300)return w(e,s);const t=await Se(e.body,s);let n={};return n=bs(t.AssumeRoleWithWebIdentityResult,s),{$metadata:S(e),...n}},Vn=async(e,s)=>{if(e.statusCode>=300)return w(e,s);const t=await parseBody(e.body,s);let n={};return n=Ts(t.AssumeRootResult,s),{$metadata:S(e),...n}},Bn=async(e,s)=>{if(e.statusCode>=300)return w(e,s);const t=await parseBody(e.body,s);let n={};return n=ws(t.DecodeAuthorizationMessageResult,s),{$metadata:S(e),...n}},Zn=async(e,s)=>{if(e.statusCode>=300)return w(e,s);const t=await parseBody(e.body,s);let n={};return n=$s(t.GetAccessKeyInfoResult,s),{$metadata:S(e),...n}},Xn=async(e,s)=>{if(e.statusCode>=300)return w(e,s);const t=await parseBody(e.body,s);let n={};return n=ks(t.GetCallerIdentityResult,s),{$metadata:S(e),...n}},Qn=async(e,s)=>{if(e.statusCode>=300)return w(e,s);const t=await parseBody(e.body,s);let n={};return n=Ms(t.GetFederationTokenResult,s),{$metadata:S(e),...n}},qn=async(e,s)=>{if(e.statusCode>=300)return w(e,s);const t=await parseBody(e.body,s);let n={};return n=Fs(t.GetSessionTokenResult,s),{$metadata:S(e),...n}},w=async(e,s)=>{const t={...e,body:await es(e.body,s)},n=en(e,t.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await rs(t,s);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await ls(t,s);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await ms(t,s);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await us(t,s);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await cs(t,s);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await ds(t,s);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await is(t,s);case"InvalidAuthorizationMessageException":case"com.amazonaws.sts#InvalidAuthorizationMessageException":throw await as(t,s);default:const o=t.body;return Hs({output:e,parsedBody:o.Error,errorCode:n})}},rs=async(e,s)=>{const t=e.body,n=Ds(t.Error,s),o=new de({$metadata:S(e),...n});return(0,i.decorateServiceException)(o,t)},is=async(e,s)=>{const t=e.body,n=zs(t.Error,s),o=new ye({$metadata:S(e),...n});return(0,i.decorateServiceException)(o,t)},cs=async(e,s)=>{const t=e.body,n=Ls(t.Error,s),o=new fe({$metadata:S(e),...n});return(0,i.decorateServiceException)(o,t)},as=async(e,s)=>{const t=e.body,n=Gs(t.Error,s),o=new ge({$metadata:S(e),...n});return(0,i.decorateServiceException)(o,t)},ds=async(e,s)=>{const t=e.body,n=Us(t.Error,s),o=new he({$metadata:S(e),...n});return(0,i.decorateServiceException)(o,t)},ls=async(e,s)=>{const t=e.body,n=Os(t.Error,s),o=new le({$metadata:S(e),...n});return(0,i.decorateServiceException)(o,t)},ms=async(e,s)=>{const t=e.body,n=Ks(t.Error,s),o=new me({$metadata:S(e),...n});return(0,i.decorateServiceException)(o,t)},us=async(e,s)=>{const t=e.body,n=Ns(t.Error,s),o=new ue({$metadata:S(e),...n});return(0,i.decorateServiceException)(o,t)},fs=(e,s)=>{const t={};if(e[z]!=null&&(t[z]=e[z]),e[Z]!=null&&(t[Z]=e[Z]),e[x]!=null){const n=ne(e[x],s);e[x]?.length===0&&(t.PolicyArns=[]),Object.entries(n).forEach(([o,a])=>{const r=`PolicyArns.${o}`;t[r]=a})}if(e[P]!=null&&(t[P]=e[P]),e[g]!=null&&(t[g]=e[g]),e[Q]!=null){const n=ot(e[Q],s);e[Q]?.length===0&&(t.Tags=[]),Object.entries(n).forEach(([o,a])=>{const r=`Tags.${o}`;t[r]=a})}if(e[He]!=null){const n=Ps(e[He],s);e[He]?.length===0&&(t.TransitiveTagKeys=[]),Object.entries(n).forEach(([o,a])=>{const r=`TransitiveTagKeys.${o}`;t[r]=a})}if(e[ve]!=null&&(t[ve]=e[ve]),e[X]!=null&&(t[X]=e[X]),e[q]!=null&&(t[q]=e[q]),e[C]!=null&&(t[C]=e[C]),e[ke]!=null){const n=Is(e[ke],s);e[ke]?.length===0&&(t.ProvidedContexts=[]),Object.entries(n).forEach(([o,a])=>{const r=`ProvidedContexts.${o}`;t[r]=a})}return t},hs=(e,s)=>{const t={};if(e[z]!=null&&(t[z]=e[z]),e[We]!=null&&(t[We]=e[We]),e[Ge]!=null&&(t[Ge]=e[Ge]),e[x]!=null){const n=ne(e[x],s);e[x]?.length===0&&(t.PolicyArns=[]),Object.entries(n).forEach(([o,a])=>{const r=`PolicyArns.${o}`;t[r]=a})}return e[P]!=null&&(t[P]=e[P]),e[g]!=null&&(t[g]=e[g]),t},ys=(e,s)=>{const t={};if(e[z]!=null&&(t[z]=e[z]),e[Z]!=null&&(t[Z]=e[Z]),e[Be]!=null&&(t[Be]=e[Be]),e[Me]!=null&&(t[Me]=e[Me]),e[x]!=null){const n=ne(e[x],s);e[x]?.length===0&&(t.PolicyArns=[]),Object.entries(n).forEach(([o,a])=>{const r=`PolicyArns.${o}`;t[r]=a})}return e[P]!=null&&(t[P]=e[P]),e[g]!=null&&(t[g]=e[g]),t},gs=(e,s)=>{const t={};if(e[Ne]!=null&&(t[Ne]=e[Ne]),e[rt]!=null){const n=nt(e[rt],s);Object.entries(n).forEach(([o,a])=>{const r=`TaskPolicyArn.${o}`;t[r]=a})}return e[g]!=null&&(t[g]=e[g]),t},Ss=(e,s)=>{const t={};return e[Pe]!=null&&(t[Pe]=e[Pe]),t},As=(e,s)=>{const t={};return e[j]!=null&&(t[j]=e[j]),t},Es=(e,s)=>({}),ps=(e,s)=>{const t={};if(e[we]!=null&&(t[we]=e[we]),e[P]!=null&&(t[P]=e[P]),e[x]!=null){const n=ne(e[x],s);e[x]?.length===0&&(t.PolicyArns=[]),Object.entries(n).forEach(([o,a])=>{const r=`PolicyArns.${o}`;t[r]=a})}if(e[g]!=null&&(t[g]=e[g]),e[Q]!=null){const n=ot(e[Q],s);e[Q]?.length===0&&(t.Tags=[]),Object.entries(n).forEach(([o,a])=>{const r=`Tags.${o}`;t[r]=a})}return t},Rs=(e,s)=>{const t={};return e[g]!=null&&(t[g]=e[g]),e[X]!=null&&(t[X]=e[X]),e[q]!=null&&(t[q]=e[q]),t},ne=(e,s)=>{const t={};let n=1;for(const o of e){if(o===null)continue;const a=nt(o,s);Object.entries(a).forEach(([r,h])=>{t[`member.${n}.${r}`]=h}),n++}return t},nt=(e,s)=>{const t={};return e[Ze]!=null&&(t[Ze]=e[Ze]),t},Cs=(e,s)=>{const t={};return e[$e]!=null&&(t[$e]=e[$e]),e[Re]!=null&&(t[Re]=e[Re]),t},Is=(e,s)=>{const t={};let n=1;for(const o of e){if(o===null)continue;const a=Cs(o,s);Object.entries(a).forEach(([r,h])=>{t[`member.${n}.${r}`]=h}),n++}return t},vs=(e,s)=>{const t={};return e[Te]!=null&&(t[Te]=e[Te]),e[Ve]!=null&&(t[Ve]=e[Ve]),t},Ps=(e,s)=>{const t={};let n=1;for(const o of e)o!==null&&(t[`member.${n}`]=o,n++);return t},ot=(e,s)=>{const t={};let n=1;for(const o of e){if(o===null)continue;const a=vs(o,s);Object.entries(a).forEach(([r,h])=>{t[`member.${n}.${r}`]=h}),n++}return t},Ee=(e,s)=>{const t={};return e[pe]!=null&&(t[pe]=(0,i.expectString)(e[pe])),e[F]!=null&&(t[F]=(0,i.expectString)(e[F])),t},xs=(e,s)=>{const t={};return e[y]!=null&&(t[y]=H(e[y],s)),e[M]!=null&&(t[M]=Ee(e[M],s)),e[_]!=null&&(t[_]=(0,i.strictParseInt32)(e[_])),e[C]!=null&&(t[C]=(0,i.expectString)(e[C])),t},_s=(e,s)=>{const t={};return e[y]!=null&&(t[y]=H(e[y],s)),e[M]!=null&&(t[M]=Ee(e[M],s)),e[_]!=null&&(t[_]=__strictParseInt32(e[_])),e[ze]!=null&&(t[ze]=__expectString(e[ze])),e[Oe]!=null&&(t[Oe]=__expectString(e[Oe])),e[be]!=null&&(t[be]=__expectString(e[be])),e[B]!=null&&(t[B]=__expectString(e[B])),e[De]!=null&&(t[De]=__expectString(e[De])),e[C]!=null&&(t[C]=__expectString(e[C])),t},bs=(e,s)=>{const t={};return e[y]!=null&&(t[y]=H(e[y],s)),e[Ue]!=null&&(t[Ue]=(0,i.expectString)(e[Ue])),e[M]!=null&&(t[M]=Ee(e[M],s)),e[_]!=null&&(t[_]=(0,i.strictParseInt32)(e[_])),e[Fe]!=null&&(t[Fe]=(0,i.expectString)(e[Fe])),e[B]!=null&&(t[B]=(0,i.expectString)(e[B])),e[C]!=null&&(t[C]=(0,i.expectString)(e[C])),t},Ts=(e,s)=>{const t={};return e[y]!=null&&(t[y]=H(e[y],s)),e[C]!=null&&(t[C]=__expectString(e[C])),t},H=(e,s)=>{const t={};return e[j]!=null&&(t[j]=(0,i.expectString)(e[j])),e[Le]!=null&&(t[Le]=(0,i.expectString)(e[Le])),e[Ke]!=null&&(t[Ke]=(0,i.expectString)(e[Ke])),e[Ie]!=null&&(t[Ie]=(0,i.expectNonNull)((0,i.parseRfc3339DateTimeWithOffset)(e[Ie]))),t},ws=(e,s)=>{const t={};return e[Ce]!=null&&(t[Ce]=__expectString(e[Ce])),t},Ds=(e,s)=>{const t={};return e[u]!=null&&(t[u]=(0,i.expectString)(e[u])),t},Ws=(e,s)=>{const t={};return e[_e]!=null&&(t[_e]=__expectString(e[_e])),e[F]!=null&&(t[F]=__expectString(e[F])),t},$s=(e,s)=>{const t={};return e[V]!=null&&(t[V]=__expectString(e[V])),t},ks=(e,s)=>{const t={};return e[je]!=null&&(t[je]=__expectString(e[je])),e[V]!=null&&(t[V]=__expectString(e[V])),e[F]!=null&&(t[F]=__expectString(e[F])),t},Ms=(e,s)=>{const t={};return e[y]!=null&&(t[y]=H(e[y],s)),e[xe]!=null&&(t[xe]=Ws(e[xe],s)),e[_]!=null&&(t[_]=__strictParseInt32(e[_])),t},Fs=(e,s)=>{const t={};return e[y]!=null&&(t[y]=H(e[y],s)),t},zs=(e,s)=>{const t={};return e[u]!=null&&(t[u]=(0,i.expectString)(e[u])),t},Ls=(e,s)=>{const t={};return e[u]!=null&&(t[u]=(0,i.expectString)(e[u])),t},Gs=(e,s)=>{const t={};return e[u]!=null&&(t[u]=(0,i.expectString)(e[u])),t},Us=(e,s)=>{const t={};return e[u]!=null&&(t[u]=(0,i.expectString)(e[u])),t},Os=(e,s)=>{const t={};return e[u]!=null&&(t[u]=(0,i.expectString)(e[u])),t},Ks=(e,s)=>{const t={};return e[u]!=null&&(t[u]=(0,i.expectString)(e[u])),t},Ns=(e,s)=>{const t={};return e[u]!=null&&(t[u]=(0,i.expectString)(e[u])),t},S=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Jn=(e,s)=>collectBody(e,s).then(t=>s.utf8Encoder(t)),Hs=(0,i.withBaseException)(b),D=async(e,s,t,n,o)=>{const{hostname:a,protocol:r="https",port:h,path:R}=await e.endpoint(),v={protocol:r,hostname:a,port:h,method:"POST",path:R.endsWith("/")?R.slice(0,-1)+t:R+t,headers:s};return n!==void 0&&(v.hostname=n),o!==void 0&&(v.body=o),new Ae.Kd(v)},W={"content-type":"application/x-www-form-urlencoded"},$="2011-06-15",k="Action",j="AccessKeyId",js="AssumeRole",pe="AssumedRoleId",M="AssumedRoleUser",Vs="AssumeRoleWithSAML",Bs="AssumeRoleWithWebIdentity",Zs="AssumeRoot",V="Account",F="Arn",B="Audience",y="Credentials",Re="ContextAssertion",Xs="DecodeAuthorizationMessage",Ce="DecodedMessage",g="DurationSeconds",Ie="Expiration",ve="ExternalId",Pe="EncodedMessage",xe="FederatedUser",_e="FederatedUserId",Qs="GetAccessKeyInfo",qs="GetCallerIdentity",Js="GetFederationToken",Ys="GetSessionToken",be="Issuer",Te="Key",we="Name",De="NameQualifier",P="Policy",x="PolicyArns",We="PrincipalArn",$e="ProviderArn",ke="ProvidedContexts",Me="ProviderId",_="PackedPolicySize",Fe="Provider",z="RoleArn",Z="RoleSessionName",ze="Subject",Le="SecretAccessKey",Ge="SAMLAssertion",Ue="SubjectFromWebIdentityToken",C="SourceIdentity",X="SerialNumber",Oe="SubjectType",Ke="SessionToken",Q="Tags",q="TokenCode",Ne="TargetPrincipal",rt="TaskPolicyArn",He="TransitiveTagKeys",je="UserId",L="Version",Ve="Value",Be="WebIdentityToken",Ze="arn",u="message",G=e=>Object.entries(e).map(([s,t])=>(0,i.extendedEncodeURIComponent)(s)+"="+(0,i.extendedEncodeURIComponent)(t)).join("&"),en=(e,s)=>{if(s.Error?.Code!==void 0)return s.Error.Code;if(e.statusCode==404)return"NotFound"};class tn extends i.Command.classBuilder().ep(st).m(function(s,t,n,o){return[(0,tt.TM)(n,this.serialize,this.deserialize),(0,ae.rD)(n,s.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,Xt).ser(ts).de(ns).build(){}class sn extends i.Command.classBuilder().ep(st).m(function(s,t,n,o){return[(0,tt.TM)(n,this.serialize,this.deserialize),(0,ae.rD)(n,s.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(Qt,qt).ser(ss).de(os).build(){}const it="us-east-1",ct=e=>{if(typeof e?.Arn=="string"){const s=e.Arn.split(":");if(s.length>4&&s[4]!=="")return s[4]}},at=async(e,s,t)=>{const n=typeof e=="function"?await e():e,o=typeof s=="function"?await s():s;return t?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${n} (provider)`,`${o} (parent client)`,`${it} (STS default)`),n??o??it},dt=(e,s)=>{let t,n;return async(o,a)=>{if(n=o,!t){const{logger:K=e?.parentClientConfig?.logger,region:se,requestHandler:ie=e?.parentClientConfig?.requestHandler,credentialProviderLogger:et}=e,Tn=await at(se,e?.parentClientConfig?.region,et),wn=!mt(ie);t=new s({credentialDefaultProvider:()=>async()=>n,region:Tn,requestHandler:wn?ie:void 0,logger:K})}const{Credentials:r,AssumedRoleUser:h}=await t.send(new tn(a));if(!r||!r.AccessKeyId||!r.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${a.RoleArn}`);const R=ct(h),v={accessKeyId:r.AccessKeyId,secretAccessKey:r.SecretAccessKey,sessionToken:r.SessionToken,expiration:r.Expiration,...r.CredentialScope&&{credentialScope:r.CredentialScope},...R&&{accountId:R}};return(0,ce.g)(v,"CREDENTIALS_STS_ASSUME_ROLE","i"),v}},lt=(e,s)=>{let t;return async n=>{if(!t){const{logger:R=e?.parentClientConfig?.logger,region:v,requestHandler:K=e?.parentClientConfig?.requestHandler,credentialProviderLogger:se}=e,ie=await at(v,e?.parentClientConfig?.region,se),et=!mt(K);t=new s({region:ie,requestHandler:et?K:void 0,logger:R})}const{Credentials:o,AssumedRoleUser:a}=await t.send(new sn(n));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);const r=ct(a),h={accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration,...o.CredentialScope&&{credentialScope:o.CredentialScope},...r&&{accountId:r}};return r&&(0,ce.g)(h,"RESOLVED_ACCOUNT_ID","T"),(0,ce.g)(h,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),h}},Yn=e=>s=>e({roleAssumer:dt(s,s.stsClientCtor),roleAssumerWithWebIdentity:lt(s,s.stsClientCtor),...s}),mt=e=>e?.metadata?.handlerProtocol==="h2";var ut=d(110049),nn=d(589297),on=d(755491),ft=d(403011),ee=d(57801),te=d(125158),rn=d(251320),oe=d(425263),cn=d(376319),ht=d(442952);const an=async(e,s,t)=>({operation:(0,ht.u)(s).operation,region:await(0,ht.t)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function dn(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(s,t)=>({signingProperties:{config:s,context:t}})}}function yt(e){return{schemeId:"smithy.api#noAuth"}}const ln=e=>{const s=[];switch(e.operation){case"AssumeRoleWithSAML":{s.push(yt(e));break}case"AssumeRoleWithWebIdentity":{s.push(yt(e));break}default:s.push(dn(e))}return s},mn=e=>({...e,stsClientCtor:Ye}),un=e=>{const s=mn(e);return{...(0,cn.h)(s)}},fn={rE:"3.693.0"};var hn=d(817540),gt=d(369742),St=d(956675),At=d(78321),yn=d(951461),J=d(75854),Et=d(132117),gn=d(788226),Sn=d(994134),An=d(142640),pt=d(361821),Rt=d(295239),En=d(623154),Xe=d(405332);const Ct="required",c="type",l="fn",m="argv",U="ref",It=!1,Qe=!0,O="booleanEquals",A="stringEquals",vt="sigv4",Pt="sts",xt="us-east-1",f="endpoint",_t="https://sts.{Region}.{PartitionResult#dnsSuffix}",T="tree",Y="error",qe="getAttr",bt={[Ct]:!1,[c]:"String"},Je={[Ct]:!0,default:!1,[c]:"Boolean"},Tt={[U]:"Endpoint"},wt={[l]:"isSet",[m]:[{[U]:"Region"}]},E={[U]:"Region"},Dt={[l]:"aws.partition",[m]:[E],assign:"PartitionResult"},Wt={[U]:"UseFIPS"},$t={[U]:"UseDualStack"},p={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:vt,signingName:Pt,signingRegion:xt}]},headers:{}},I={},kt={conditions:[{[l]:A,[m]:[E,"aws-global"]}],[f]:p,[c]:f},Mt={[l]:O,[m]:[Wt,!0]},Ft={[l]:O,[m]:[$t,!0]},zt={[l]:qe,[m]:[{[U]:"PartitionResult"},"supportsFIPS"]},Lt={[U]:"PartitionResult"},Gt={[l]:O,[m]:[!0,{[l]:qe,[m]:[Lt,"supportsDualStack"]}]},Ut=[{[l]:"isSet",[m]:[Tt]}],Ot=[Mt],Kt=[Ft],pn={version:"1.0",parameters:{Region:bt,UseDualStack:Je,UseFIPS:Je,Endpoint:bt,UseGlobalEndpoint:Je},rules:[{conditions:[{[l]:O,[m]:[{[U]:"UseGlobalEndpoint"},Qe]},{[l]:"not",[m]:Ut},wt,Dt,{[l]:O,[m]:[Wt,It]},{[l]:O,[m]:[$t,It]}],rules:[{conditions:[{[l]:A,[m]:[E,"ap-northeast-1"]}],endpoint:p,[c]:f},{conditions:[{[l]:A,[m]:[E,"ap-south-1"]}],endpoint:p,[c]:f},{conditions:[{[l]:A,[m]:[E,"ap-southeast-1"]}],endpoint:p,[c]:f},{conditions:[{[l]:A,[m]:[E,"ap-southeast-2"]}],endpoint:p,[c]:f},kt,{conditions:[{[l]:A,[m]:[E,"ca-central-1"]}],endpoint:p,[c]:f},{conditions:[{[l]:A,[m]:[E,"eu-central-1"]}],endpoint:p,[c]:f},{conditions:[{[l]:A,[m]:[E,"eu-north-1"]}],endpoint:p,[c]:f},{conditions:[{[l]:A,[m]:[E,"eu-west-1"]}],endpoint:p,[c]:f},{conditions:[{[l]:A,[m]:[E,"eu-west-2"]}],endpoint:p,[c]:f},{conditions:[{[l]:A,[m]:[E,"eu-west-3"]}],endpoint:p,[c]:f},{conditions:[{[l]:A,[m]:[E,"sa-east-1"]}],endpoint:p,[c]:f},{conditions:[{[l]:A,[m]:[E,xt]}],endpoint:p,[c]:f},{conditions:[{[l]:A,[m]:[E,"us-east-2"]}],endpoint:p,[c]:f},{conditions:[{[l]:A,[m]:[E,"us-west-1"]}],endpoint:p,[c]:f},{conditions:[{[l]:A,[m]:[E,"us-west-2"]}],endpoint:p,[c]:f},{endpoint:{url:_t,properties:{authSchemes:[{name:vt,signingName:Pt,signingRegion:"{Region}"}]},headers:I},[c]:f}],[c]:T},{conditions:Ut,rules:[{conditions:Ot,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[c]:Y},{conditions:Kt,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[c]:Y},{endpoint:{url:Tt,properties:I,headers:I},[c]:f}],[c]:T},{conditions:[wt],rules:[{conditions:[Dt],rules:[{conditions:[Mt,Ft],rules:[{conditions:[{[l]:O,[m]:[Qe,zt]},Gt],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:I,headers:I},[c]:f}],[c]:T},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[c]:Y}],[c]:T},{conditions:Ot,rules:[{conditions:[{[l]:O,[m]:[zt,Qe]}],rules:[{conditions:[{[l]:A,[m]:[{[l]:qe,[m]:[Lt,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:I,headers:I},[c]:f},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:I,headers:I},[c]:f}],[c]:T},{error:"FIPS is enabled but this partition does not support FIPS",[c]:Y}],[c]:T},{conditions:Kt,rules:[{conditions:[Gt],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:I,headers:I},[c]:f}],[c]:T},{error:"DualStack is enabled but this partition does not support DualStack",[c]:Y}],[c]:T},kt,{endpoint:{url:_t,properties:I,headers:I},[c]:f}],[c]:T}],[c]:T},{error:"Invalid Configuration: Missing Region",[c]:Y}]},Rn=new Xe.kS({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),Cn=(e,s={})=>Rn.get(e,()=>(0,Xe.sO)(pn,{endpointParams:e,logger:s.logger}));Xe.mw.aws=En.UF;const In=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??pt.E,base64Encoder:e?.base64Encoder??pt.n,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Cn,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??ln,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:s=>s.getIdentityProvider("aws.auth#sigv4"),signer:new gt.f2},{schemeId:"smithy.api#noAuth",identityProvider:s=>s.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new te.mR}],logger:e?.logger??new i.NoOpLogger,serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??An.D,utf8Decoder:e?.utf8Decoder??Rt.ar,utf8Encoder:e?.utf8Encoder??Rt.Pq});var vn=d(534546);const Pn=e=>{(0,i.emitWarningIfUnsupportedVersion)(process.version);const s=(0,vn.I)(e),t=()=>s().then(i.loadConfigsForDefaultMode),n=In(e);return(0,hn.I)(process.version),{...n,...e,runtime:"node",defaultsMode:s,bodyLengthChecker:e?.bodyLengthChecker??gn.n,credentialDefaultProvider:e?.credentialDefaultProvider??St.v6,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,At.pf)({serviceId:n.serviceId,clientVersion:fn.rE}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:o=>o.getIdentityProvider("aws.auth#sigv4")||(async a=>await(0,St.v6)(a?.__config||{})()),signer:new gt.f2},{schemeId:"smithy.api#noAuth",identityProvider:o=>o.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new te.mR}],maxAttempts:e?.maxAttempts??(0,J.Z)(oe.qs),region:e?.region??(0,J.Z)(ee.GG,ee.zH),requestHandler:Et.$c.create(e?.requestHandler??t),retryMode:e?.retryMode??(0,J.Z)({...oe.kN,default:async()=>(await t()).retryMode||Sn.L0}),sha256:e?.sha256??yn.V.bind(null,"sha256"),streamCollector:e?.streamCollector??Et.kv,useDualstackEndpoint:e?.useDualstackEndpoint??(0,J.Z)(ee.e$),useFipsEndpoint:e?.useFipsEndpoint??(0,J.Z)(ee.Ko),userAgentAppId:e?.userAgentAppId??(0,J.Z)(At.hV)}};var Nt=d(696346);const xn=e=>{const s=e.httpAuthSchemes;let t=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){const a=s.findIndex(r=>r.schemeId===o.schemeId);a===-1?s.push(o):s.splice(a,1,o)},httpAuthSchemes(){return s},setHttpAuthSchemeProvider(o){t=o},httpAuthSchemeProvider(){return t},setCredentials(o){n=o},credentials(){return n}}},_n=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),re=e=>e,bn=(e,s)=>{const t={...re((0,Nt.Rq)(e)),...re((0,i.getDefaultExtensionConfiguration)(e)),...re((0,Ae.eS)(e)),...re(xn(e))};return s.forEach(n=>n.configure(t)),{...e,...(0,Nt.$3)(t),...(0,i.resolveDefaultRuntimeConfig)(t),...(0,Ae.jt)(t),..._n(t)}};class Ye extends i.Client{constructor(...[s]){const t=Pn(s||{}),n=Zt(t),o=(0,ft.Dc)(n),a=(0,oe.$z)(o),r=(0,ee.TD)(a),h=(0,ut.OV)(r),R=(0,ae.Co)(h),v=un(R),K=bn(v,s?.extensions||[]);super(K),this.config=K,this.middlewareStack.use((0,ft.sM)(this.config)),this.middlewareStack.use((0,oe.ey)(this.config)),this.middlewareStack.use((0,rn.vK)(this.config)),this.middlewareStack.use((0,ut.TC)(this.config)),this.middlewareStack.use((0,nn.Y7)(this.config)),this.middlewareStack.use((0,on.n4)(this.config)),this.middlewareStack.use((0,te.wB)(this.config,{httpAuthSchemeParametersProvider:an,identityProviderConfigProvider:async se=>new te.h$({"aws.auth#sigv4":se.credentials})})),this.middlewareStack.use((0,te.lW)(this.config))}destroy(){super.destroy()}}const Ht=(e,s)=>s?class extends e{constructor(n){super(n);for(const o of s)this.middlewareStack.use(o)}}:e,jt=(e={},s)=>dt(e,Ht(Ye,s)),Vt=(e={},s)=>lt(e,Ht(Ye,s)),to=e=>s=>e({roleAssumer:jt(s),roleAssumerWithWebIdentity:Vt(s),...s})}};

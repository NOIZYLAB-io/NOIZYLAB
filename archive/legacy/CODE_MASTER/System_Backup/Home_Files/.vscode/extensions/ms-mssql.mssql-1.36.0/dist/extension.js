var zst=Object.create;var cj=Object.defineProperty;var Fst=Object.getOwnPropertyDescriptor;var jst=Object.getOwnPropertyNames;var Ust=Object.getPrototypeOf,Bst=Object.prototype.hasOwnProperty;var si=(r,e)=>()=>(r&&(e=r(r=0)),e);var O=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Ea=(r,e)=>{for(var t in e)cj(r,t,{get:e[t],enumerable:!0})},uCe=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of jst(e))!Bst.call(r,i)&&i!==t&&cj(r,i,{get:()=>e[i],enumerable:!(n=Fst(e,i))||n.enumerable});return r};var ge=(r,e,t)=>(t=r!=null?zst(Ust(r)):{},uCe(e||!r||!r.__esModule?cj(t,"default",{value:r,enumerable:!0}):t,r)),da=r=>uCe(cj({},"__esModule",{value:!0}),r);var mCe=O((ufr,pCe)=>{var dCe=require("stream").Stream,Gst=require("util");pCe.exports=Jp;function Jp(){this.source=null,this.dataSize=0,this.maxDataSize=1024*1024,this.pauseStream=!0,this._maxDataSizeExceeded=!1,this._released=!1,this._bufferedEvents=[]}Gst.inherits(Jp,dCe);Jp.create=function(r,e){var t=new this;e=e||{};for(var n in e)t[n]=e[n];t.source=r;var i=r.emit;return r.emit=function(){return t._handleEmit(arguments),i.apply(r,arguments)},r.on("error",function(){}),t.pauseStream&&r.pause(),t};Object.defineProperty(Jp.prototype,"readable",{configurable:!0,enumerable:!0,get:function(){return this.source.readable}});Jp.prototype.setEncoding=function(){return this.source.setEncoding.apply(this.source,arguments)};Jp.prototype.resume=function(){this._released||this.release(),this.source.resume()};Jp.prototype.pause=function(){this.source.pause()};Jp.prototype.release=function(){this._released=!0,this._bufferedEvents.forEach(function(r){this.emit.apply(this,r)}.bind(this)),this._bufferedEvents=[]};Jp.prototype.pipe=function(){var r=dCe.prototype.pipe.apply(this,arguments);return this.resume(),r};Jp.prototype._handleEmit=function(r){if(this._released){this.emit.apply(this,r);return}r[0]==="data"&&(this.dataSize+=r[1].length,this._checkIfMaxDataSizeExceeded()),this._bufferedEvents.push(r)};Jp.prototype._checkIfMaxDataSizeExceeded=function(){if(!this._maxDataSizeExceeded&&!(this.dataSize<=this.maxDataSize)){this._maxDataSizeExceeded=!0;var r="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this.emit("error",new Error(r))}}});var yCe=O((dfr,gCe)=>{var $st=require("util"),fCe=require("stream").Stream,hCe=mCe();gCe.exports=Lo;function Lo(){this.writable=!1,this.readable=!0,this.dataSize=0,this.maxDataSize=2*1024*1024,this.pauseStreams=!0,this._released=!1,this._streams=[],this._currentStream=null,this._insideLoop=!1,this._pendingNext=!1}$st.inherits(Lo,fCe);Lo.create=function(r){var e=new this;r=r||{};for(var t in r)e[t]=r[t];return e};Lo.isStreamLike=function(r){return typeof r!="function"&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"&&!Buffer.isBuffer(r)};Lo.prototype.append=function(r){var e=Lo.isStreamLike(r);if(e){if(!(r instanceof hCe)){var t=hCe.create(r,{maxDataSize:1/0,pauseStream:this.pauseStreams});r.on("data",this._checkDataSize.bind(this)),r=t}this._handleErrors(r),this.pauseStreams&&r.pause()}return this._streams.push(r),this};Lo.prototype.pipe=function(r,e){return fCe.prototype.pipe.call(this,r,e),this.resume(),r};Lo.prototype._getNext=function(){if(this._currentStream=null,this._insideLoop){this._pendingNext=!0;return}this._insideLoop=!0;try{do this._pendingNext=!1,this._realGetNext();while(this._pendingNext)}finally{this._insideLoop=!1}};Lo.prototype._realGetNext=function(){var r=this._streams.shift();if(typeof r>"u"){this.end();return}if(typeof r!="function"){this._pipeNext(r);return}var e=r;e(function(t){var n=Lo.isStreamLike(t);n&&(t.on("data",this._checkDataSize.bind(this)),this._handleErrors(t)),this._pipeNext(t)}.bind(this))};Lo.prototype._pipeNext=function(r){this._currentStream=r;var e=Lo.isStreamLike(r);if(e){r.on("end",this._getNext.bind(this)),r.pipe(this,{end:!1});return}var t=r;this.write(t),this._getNext()};Lo.prototype._handleErrors=function(r){var e=this;r.on("error",function(t){e._emitError(t)})};Lo.prototype.write=function(r){this.emit("data",r)};Lo.prototype.pause=function(){this.pauseStreams&&(this.pauseStreams&&this._currentStream&&typeof this._currentStream.pause=="function"&&this._currentStream.pause(),this.emit("pause"))};Lo.prototype.resume=function(){this._released||(this._released=!0,this.writable=!0,this._getNext()),this.pauseStreams&&this._currentStream&&typeof this._currentStream.resume=="function"&&this._currentStream.resume(),this.emit("resume")};Lo.prototype.end=function(){this._reset(),this.emit("end")};Lo.prototype.destroy=function(){this._reset(),this.emit("close")};Lo.prototype._reset=function(){this.writable=!1,this._streams=[],this._currentStream=null};Lo.prototype._checkDataSize=function(){if(this._updateDataSize(),!(this.dataSize<=this.maxDataSize)){var r="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this._emitError(new Error(r))}};Lo.prototype._updateDataSize=function(){this.dataSize=0;var r=this;this._streams.forEach(function(e){e.dataSize&&(r.dataSize+=e.dataSize)}),this._currentStream&&this._currentStream.dataSize&&(this.dataSize+=this._currentStream.dataSize)};Lo.prototype._emitError=function(r){this._reset(),this.emit("error",r)}});var vCe=O((pfr,Vst)=>{Vst.exports={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/3gpphal+json":{source:"iana",compressible:!0},"application/3gpphalforms+json":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/alto-updatestreamcontrol+json":{source:"iana",compressible:!0},"application/alto-updatestreamparams+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-dynamic-event-message":{source:"iana"},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rdt+json":{source:"iana",compressible:!0},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/captive+json":{source:"iana",compressible:!0},"application/cbor":{source:"iana"},"application/cbor-seq":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/clr":{source:"iana"},"application/clue+xml":{source:"iana",compressible:!0},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dots+cbor":{source:"iana"},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"iana",compressible:!0,extensions:["es","ecma"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/elm+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/elm+xml":{source:"iana",compressible:!0},"application/emergencycalldata.cap+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:!0},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/fhir+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/fhir+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/flexfec":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/jscalendar+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/link-format":{source:"iana"},"application/load-control+xml":{source:"iana",compressible:!0},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lpf+zip":{source:"iana",compressible:!1},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mipc":{source:"iana"},"application/missing-blocks+cbor-seq":{source:"iana"},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msc-mixer+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/multipart-core":{source:"iana"},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana",charset:"US-ASCII"},"application/news-groupinfo":{source:"iana",charset:"US-ASCII"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana",extensions:["cjs"]},"application/nss":{source:"iana"},"application/oauth-authz-req+jwt":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:!0},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{source:"iana",compressible:!0},"application/oscore":{source:"iana"},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p21+zip":{source:"iana",compressible:!1},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana"},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pidf-diff+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.cyn":{source:"iana",charset:"7-BIT"},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/pvd+json":{source:"iana",compressible:!0},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:!0},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sarif+json":{source:"iana",compressible:!0},"application/sarif-external-properties+json":{source:"iana",compressible:!0},"application/sbe":{source:"iana"},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/senml-etch+cbor":{source:"iana"},"application/senml-etch+json":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/sipc":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"iana"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/stix+json":{source:"iana",compressible:!0},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/td+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/toml":{compressible:!0,extensions:["toml"]},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana",extensions:["trig"]},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ubjson":{compressible:!1,extensions:["ubj"]},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.5gnas":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gtpc":{source:"iana"},"application/vnd.3gpp.interworking-data":{source:"iana"},"application/vnd.3gpp.lpp":{source:"iana"},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ngap":{source:"iana"},"application/vnd.3gpp.pfcp":{source:"iana"},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.s1ap":{source:"iana"},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.afplinedata-pagedef":{source:"iana"},"application/vnd.afpc.cmoca-cmresource":{source:"iana"},"application/vnd.afpc.foca-charset":{source:"iana"},"application/vnd.afpc.foca-codedfont":{source:"iana"},"application/vnd.afpc.foca-codepage":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.afpc.modca-cmtable":{source:"iana"},"application/vnd.afpc.modca-formdef":{source:"iana"},"application/vnd.afpc.modca-mediummap":{source:"iana"},"application/vnd.afpc.modca-objectcontainer":{source:"iana"},"application/vnd.afpc.modca-overlay":{source:"iana"},"application/vnd.afpc.modca-pagesegment":{source:"iana"},"application/vnd.ah-barcode":{source:"iana"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.ota":{source:"iana"},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.arrow.file":{source:"iana"},"application/vnd.apache.arrow.stream":{source:"iana"},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.aplextor.warrp+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"iana"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.error":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.bpf":{source:"iana"},"application/vnd.bpf3":{source:"iana"},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.ciedi":{source:"iana"},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.cryptii.pipe+json":{source:"iana",compressible:!0},"application/vnd.crypto-shade-file":{source:"iana"},"application/vnd.cryptomator.encrypted":{source:"iana"},"application/vnd.cryptomator.vault":{source:"iana"},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.cyclonedx+json":{source:"iana",compressible:!0},"application/vnd.cyclonedx+xml":{source:"iana",compressible:!0},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.d3m-dataset":{source:"iana"},"application/vnd.d3m-problem":{source:"iana"},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbisl+xml":{source:"iana",compressible:!0},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.ficlab.flb+zip":{source:"iana",compressible:!1},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujifilm.fb.docuworks":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.container":{source:"iana"},"application/vnd.fujifilm.fb.jfi+xml":{source:"iana",compressible:!0},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.gentics.grd+json":{source:"iana",compressible:!0},"application/vnd.geo+json":{source:"iana",compressible:!0},"application/vnd.geocube+xml":{source:"iana",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.slides":{source:"iana"},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"iana"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"iana"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.iso11783-10+zip":{source:"iana",compressible:!1},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las":{source:"iana"},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.laszip":{source:"iana"},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.logipipe.circuit+zip":{source:"iana",compressible:!1},"application/vnd.loom":{source:"iana"},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nebumind.line":{source:"iana"},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oci.image.manifest.v1+json":{source:"iana",compressible:!0},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+cbor":{source:"iana"},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.opentimestamps.ots":{source:"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.resilient.logic":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sar":{source:"iana"},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.seis+json":{source:"iana",compressible:!0},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shade-save-file":{source:"iana"},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.shopkick+json":{source:"iana",compressible:!0},"application/vnd.shp":{source:"iana"},"application/vnd.shx":{source:"iana"},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.snesdev-page-table":{source:"iana"},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.sycle+xml":{source:"iana",compressible:!0},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veritone.aion+json":{source:"iana",compressible:!0},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.ves.encrypted":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.dpp":{source:"iana"},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.youtube.yt":{source:"iana"},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-keepass2":{extensions:["kdbx"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-pki-message":{source:"iana"},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-x509-ca-ra-cert":{source:"iana"},"application/x-x509-next-ca-cert":{source:"iana"},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana"},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/flexfec":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/mhas":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/scip":{source:"iana"},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sofa":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tetra_acelp_bb":{source:"iana"},"audio/tone":{source:"iana"},"audio/tsvcis":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"iana"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{compressible:!1,extensions:["apng"]},"image/avci":{source:"iana"},"image/avcs":{source:"iana"},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-dds":{extensions:["dds"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/news":{source:"iana"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/s-http":{source:"iana"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"iana"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/e57":{source:"iana"},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.pytha.pyox":{source:"iana"},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana"},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/cql":{source:"iana"},"text/cql-expression":{source:"iana"},"text/cql-identifier":{source:"iana"},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"iana"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fhirpath":{source:"iana"},"text/flexfec":{source:"iana"},"text/fwdred":{source:"iana"},"text/gff3":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",compressible:!0},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{compressible:!0,extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mdx":{compressible:!0,extensions:["mdx"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana",charset:"UTF-8"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana",charset:"UTF-8"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shaclc":{source:"iana"},"text/shex":{source:"iana",extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana",charset:"UTF-8"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana",charset:"UTF-8"},"text/vnd.ficlab.flt":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hans":{source:"iana"},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"iana"},"text/vnd.sosi":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana",charset:"UTF-8"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{compressible:!0,extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/av1":{source:"iana"},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/ffv1":{source:"iana"},"video/flexfec":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/scip":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"iana"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vnd.youtube.yt":{source:"iana"},"video/vp8":{source:"iana"},"video/vp9":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}}});var _Ce=O((mfr,bCe)=>{bCe.exports=vCe()});var PCe=O(cu=>{"use strict";var lj=_Ce(),Hst=require("path").extname,SCe=/^\s*([^;\s]*)(?:;|\s|$)/,Wst=/^text\//i;cu.charset=CCe;cu.charsets={lookup:CCe};cu.contentType=Kst;cu.extension=Qst;cu.extensions=Object.create(null);cu.lookup=Yst;cu.types=Object.create(null);Xst(cu.extensions,cu.types);function CCe(r){if(!r||typeof r!="string")return!1;var e=SCe.exec(r),t=e&&lj[e[1].toLowerCase()];return t&&t.charset?t.charset:e&&Wst.test(e[1])?"UTF-8":!1}function Kst(r){if(!r||typeof r!="string")return!1;var e=r.indexOf("/")===-1?cu.lookup(r):r;if(!e)return!1;if(e.indexOf("charset")===-1){var t=cu.charset(e);t&&(e+="; charset="+t.toLowerCase())}return e}function Qst(r){if(!r||typeof r!="string")return!1;var e=SCe.exec(r),t=e&&cu.extensions[e[1].toLowerCase()];return!t||!t.length?!1:t[0]}function Yst(r){if(!r||typeof r!="string")return!1;var e=Hst("x."+r).toLowerCase().substr(1);return e&&cu.types[e]||!1}function Xst(r,e){var t=["nginx","apache",void 0,"iana"];Object.keys(lj).forEach(function(i){var s=lj[i],o=s.extensions;if(!(!o||!o.length)){r[i]=o;for(var a=0;a<o.length;a++){var c=o[a];if(e[c]){var l=t.indexOf(lj[e[c]].source),u=t.indexOf(s.source);if(e[c]!=="application/octet-stream"&&(l>u||l===u&&e[c].substr(0,12)==="application/"))continue}e[c]=i}}})}});var ECe=O((ffr,wCe)=>{wCe.exports=Jst;function Jst(r){var e=typeof setImmediate=="function"?setImmediate:typeof process=="object"&&typeof process.nextTick=="function"?process.nextTick:null;e?e(r):setTimeout(r,0)}});var Q5=O((gfr,ICe)=>{var TCe=ECe();ICe.exports=Zst;function Zst(r){var e=!1;return TCe(function(){e=!0}),function(n,i){e?r(n,i):TCe(function(){r(n,i)})}}});var Y5=O((yfr,RCe)=>{RCe.exports=eot;function eot(r){Object.keys(r.jobs).forEach(tot.bind(r)),r.jobs={}}function tot(r){typeof this.jobs[r]=="function"&&this.jobs[r]()}});var X5=O((vfr,OCe)=>{var xCe=Q5(),rot=Y5();OCe.exports=not;function not(r,e,t,n){var i=t.keyedList?t.keyedList[t.index]:t.index;t.jobs[i]=iot(e,i,r[i],function(s,o){i in t.jobs&&(delete t.jobs[i],s?rot(t):t.results[i]=o,n(s,t.results))})}function iot(r,e,t,n){var i;return r.length==2?i=r(t,xCe(n)):i=r(t,e,xCe(n)),i}});var J5=O((bfr,ACe)=>{ACe.exports=sot;function sot(r,e){var t=!Array.isArray(r),n={index:0,keyedList:t||e?Object.keys(r):null,jobs:{},results:t?{}:[],size:t?Object.keys(r).length:r.length};return e&&n.keyedList.sort(t?e:function(i,s){return e(r[i],r[s])}),n}});var Z5=O((_fr,NCe)=>{var oot=Y5(),aot=Q5();NCe.exports=cot;function cot(r){Object.keys(this.jobs).length&&(this.index=this.size,oot(this),aot(r)(null,this.results))}});var MCe=O((Sfr,DCe)=>{var lot=X5(),uot=J5(),dot=Z5();DCe.exports=pot;function pot(r,e,t){for(var n=uot(r);n.index<(n.keyedList||r).length;)lot(r,e,n,function(i,s){if(i){t(i,s);return}if(Object.keys(n.jobs).length===0){t(null,n.results);return}}),n.index++;return dot.bind(n,t)}});var e8=O((Cfr,uj)=>{var kCe=X5(),mot=J5(),hot=Z5();uj.exports=fot;uj.exports.ascending=LCe;uj.exports.descending=got;function fot(r,e,t,n){var i=mot(r,t);return kCe(r,e,i,function s(o,a){if(o){n(o,a);return}if(i.index++,i.index<(i.keyedList||r).length){kCe(r,e,i,s);return}n(null,i.results)}),hot.bind(i,n)}function LCe(r,e){return r<e?-1:r>e?1:0}function got(r,e){return-1*LCe(r,e)}});var zCe=O((Pfr,qCe)=>{var yot=e8();qCe.exports=vot;function vot(r,e,t){return yot(r,e,null,t)}});var jCe=O((wfr,FCe)=>{FCe.exports={parallel:MCe(),serial:zCe(),serialOrdered:e8()}});var BCe=O((Efr,UCe)=>{"use strict";UCe.exports=Object});var $Ce=O((Tfr,GCe)=>{"use strict";GCe.exports=Error});var HCe=O((Ifr,VCe)=>{"use strict";VCe.exports=EvalError});var KCe=O((Rfr,WCe)=>{"use strict";WCe.exports=RangeError});var YCe=O((xfr,QCe)=>{"use strict";QCe.exports=ReferenceError});var JCe=O((Ofr,XCe)=>{"use strict";XCe.exports=SyntaxError});var dj=O((Afr,ZCe)=>{"use strict";ZCe.exports=TypeError});var tPe=O((Nfr,ePe)=>{"use strict";ePe.exports=URIError});var nPe=O((Dfr,rPe)=>{"use strict";rPe.exports=Math.abs});var sPe=O((Mfr,iPe)=>{"use strict";iPe.exports=Math.floor});var aPe=O((kfr,oPe)=>{"use strict";oPe.exports=Math.max});var lPe=O((Lfr,cPe)=>{"use strict";cPe.exports=Math.min});var dPe=O((qfr,uPe)=>{"use strict";uPe.exports=Math.pow});var mPe=O((zfr,pPe)=>{"use strict";pPe.exports=Math.round});var fPe=O((Ffr,hPe)=>{"use strict";hPe.exports=Number.isNaN||function(e){return e!==e}});var yPe=O((jfr,gPe)=>{"use strict";var bot=fPe();gPe.exports=function(e){return bot(e)||e===0?e:e<0?-1:1}});var bPe=O((Ufr,vPe)=>{"use strict";vPe.exports=Object.getOwnPropertyDescriptor});var SPe=O((Bfr,_Pe)=>{"use strict";var pj=bPe();if(pj)try{pj([],"length")}catch{pj=null}_Pe.exports=pj});var PPe=O((Gfr,CPe)=>{"use strict";var mj=Object.defineProperty||!1;if(mj)try{mj({},"a",{value:1})}catch{mj=!1}CPe.exports=mj});var EPe=O(($fr,wPe)=>{"use strict";wPe.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,t);if(a.value!==i||a.enumerable!==!0)return!1}return!0}});var RPe=O((Vfr,IPe)=>{"use strict";var TPe=typeof Symbol<"u"&&Symbol,_ot=EPe();IPe.exports=function(){return typeof TPe!="function"||typeof Symbol!="function"||typeof TPe("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:_ot()}});var t8=O((Hfr,xPe)=>{"use strict";xPe.exports=typeof Reflect<"u"&&Reflect.getPrototypeOf||null});var APe=O((Wfr,OPe)=>{"use strict";OPe.exports=Object});var r8=O((Kfr,NPe)=>{"use strict";var Sot=APe();NPe.exports=Sot.getPrototypeOf||null});var kPe=O((Qfr,MPe)=>{"use strict";var Cot="Function.prototype.bind called on incompatible ",Pot=Object.prototype.toString,wot=Math.max,Eot="[object Function]",DPe=function(e,t){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var s=0;s<t.length;s+=1)n[s+e.length]=t[s];return n},Tot=function(e,t){for(var n=[],i=t||0,s=0;i<e.length;i+=1,s+=1)n[s]=e[i];return n},Iot=function(r,e){for(var t="",n=0;n<r.length;n+=1)t+=r[n],n+1<r.length&&(t+=e);return t};MPe.exports=function(e){var t=this;if(typeof t!="function"||Pot.apply(t)!==Eot)throw new TypeError(Cot+t);for(var n=Tot(arguments,1),i,s=function(){if(this instanceof i){var u=t.apply(this,DPe(n,arguments));return Object(u)===u?u:this}return t.apply(e,DPe(n,arguments))},o=wot(0,t.length-n.length),a=[],c=0;c<o;c++)a[c]="$"+c;if(i=Function("binder","return function ("+Iot(a,",")+"){ return binder.apply(this,arguments); }")(s),t.prototype){var l=function(){};l.prototype=t.prototype,i.prototype=new l,l.prototype=null}return i}});var lA=O((Yfr,LPe)=>{"use strict";var Rot=kPe();LPe.exports=Function.prototype.bind||Rot});var hj=O((Xfr,qPe)=>{"use strict";qPe.exports=Function.prototype.call});var n8=O((Jfr,zPe)=>{"use strict";zPe.exports=Function.prototype.apply});var jPe=O((Zfr,FPe)=>{"use strict";FPe.exports=typeof Reflect<"u"&&Reflect&&Reflect.apply});var BPe=O((egr,UPe)=>{"use strict";var xot=lA(),Oot=n8(),Aot=hj(),Not=jPe();UPe.exports=Not||xot.call(Aot,Oot)});var $Pe=O((tgr,GPe)=>{"use strict";var Dot=lA(),Mot=dj(),kot=hj(),Lot=BPe();GPe.exports=function(e){if(e.length<1||typeof e[0]!="function")throw new Mot("a function is required");return Lot(Dot,kot,e)}});var HPe=O((rgr,VPe)=>{"use strict";VPe.exports=Object.getOwnPropertyDescriptor});var KPe=O((ngr,WPe)=>{"use strict";var fj=HPe();if(fj)try{fj([],"length")}catch{fj=null}WPe.exports=fj});var ewe=O((igr,ZPe)=>{"use strict";var qot=$Pe(),QPe=KPe(),XPe;try{XPe=[].__proto__===Array.prototype}catch(r){if(!r||typeof r!="object"||!("code"in r)||r.code!=="ERR_PROTO_ACCESS")throw r}var i8=!!XPe&&QPe&&QPe(Object.prototype,"__proto__"),JPe=Object,YPe=JPe.getPrototypeOf;ZPe.exports=i8&&typeof i8.get=="function"?qot([i8.get]):typeof YPe=="function"?function(e){return YPe(e==null?e:JPe(e))}:!1});var swe=O((sgr,iwe)=>{"use strict";var twe=t8(),rwe=r8(),nwe=ewe();iwe.exports=twe?function(e){return twe(e)}:rwe?function(e){if(!e||typeof e!="object"&&typeof e!="function")throw new TypeError("getProto: not an object");return rwe(e)}:nwe?function(e){return nwe(e)}:null});var gj=O((ogr,owe)=>{"use strict";var zot=Function.prototype.call,Fot=Object.prototype.hasOwnProperty,jot=lA();owe.exports=jot.call(zot,Fot)});var mwe=O((agr,pwe)=>{"use strict";var ui,Uot=BCe(),Bot=$Ce(),Got=HCe(),$ot=KCe(),Vot=YCe(),Qw=JCe(),Kw=dj(),Hot=tPe(),Wot=nPe(),Kot=sPe(),Qot=aPe(),Yot=lPe(),Xot=dPe(),Jot=mPe(),Zot=yPe(),uwe=Function,s8=function(r){try{return uwe('"use strict"; return ('+r+").constructor;")()}catch{}},uA=SPe(),eat=PPe(),o8=function(){throw new Kw},tat=uA?function(){try{return arguments.callee,o8}catch{try{return uA(arguments,"callee").get}catch{return o8}}}():o8,Hw=RPe()(),$a=swe(),rat=r8(),nat=t8(),dwe=n8(),dA=hj(),Ww={},iat=typeof Uint8Array>"u"||!$a?ui:$a(Uint8Array),tS={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?ui:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?ui:ArrayBuffer,"%ArrayIteratorPrototype%":Hw&&$a?$a([][Symbol.iterator]()):ui,"%AsyncFromSyncIteratorPrototype%":ui,"%AsyncFunction%":Ww,"%AsyncGenerator%":Ww,"%AsyncGeneratorFunction%":Ww,"%AsyncIteratorPrototype%":Ww,"%Atomics%":typeof Atomics>"u"?ui:Atomics,"%BigInt%":typeof BigInt>"u"?ui:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?ui:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?ui:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?ui:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Bot,"%eval%":eval,"%EvalError%":Got,"%Float16Array%":typeof Float16Array>"u"?ui:Float16Array,"%Float32Array%":typeof Float32Array>"u"?ui:Float32Array,"%Float64Array%":typeof Float64Array>"u"?ui:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?ui:FinalizationRegistry,"%Function%":uwe,"%GeneratorFunction%":Ww,"%Int8Array%":typeof Int8Array>"u"?ui:Int8Array,"%Int16Array%":typeof Int16Array>"u"?ui:Int16Array,"%Int32Array%":typeof Int32Array>"u"?ui:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Hw&&$a?$a($a([][Symbol.iterator]())):ui,"%JSON%":typeof JSON=="object"?JSON:ui,"%Map%":typeof Map>"u"?ui:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Hw||!$a?ui:$a(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Uot,"%Object.getOwnPropertyDescriptor%":uA,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?ui:Promise,"%Proxy%":typeof Proxy>"u"?ui:Proxy,"%RangeError%":$ot,"%ReferenceError%":Vot,"%Reflect%":typeof Reflect>"u"?ui:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?ui:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Hw||!$a?ui:$a(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?ui:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Hw&&$a?$a(""[Symbol.iterator]()):ui,"%Symbol%":Hw?Symbol:ui,"%SyntaxError%":Qw,"%ThrowTypeError%":tat,"%TypedArray%":iat,"%TypeError%":Kw,"%Uint8Array%":typeof Uint8Array>"u"?ui:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?ui:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?ui:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?ui:Uint32Array,"%URIError%":Hot,"%WeakMap%":typeof WeakMap>"u"?ui:WeakMap,"%WeakRef%":typeof WeakRef>"u"?ui:WeakRef,"%WeakSet%":typeof WeakSet>"u"?ui:WeakSet,"%Function.prototype.call%":dA,"%Function.prototype.apply%":dwe,"%Object.defineProperty%":eat,"%Object.getPrototypeOf%":rat,"%Math.abs%":Wot,"%Math.floor%":Kot,"%Math.max%":Qot,"%Math.min%":Yot,"%Math.pow%":Xot,"%Math.round%":Jot,"%Math.sign%":Zot,"%Reflect.getPrototypeOf%":nat};if($a)try{null.error}catch(r){awe=$a($a(r)),tS["%Error.prototype%"]=awe}var awe,sat=function r(e){var t;if(e==="%AsyncFunction%")t=s8("async function () {}");else if(e==="%GeneratorFunction%")t=s8("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=s8("async function* () {}");else if(e==="%AsyncGenerator%"){var n=r("%AsyncGeneratorFunction%");n&&(t=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=r("%AsyncGenerator%");i&&$a&&(t=$a(i.prototype))}return tS[e]=t,t},cwe={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},pA=lA(),yj=gj(),oat=pA.call(dA,Array.prototype.concat),aat=pA.call(dwe,Array.prototype.splice),lwe=pA.call(dA,String.prototype.replace),vj=pA.call(dA,String.prototype.slice),cat=pA.call(dA,RegExp.prototype.exec),lat=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,uat=/\\(\\)?/g,dat=function(e){var t=vj(e,0,1),n=vj(e,-1);if(t==="%"&&n!=="%")throw new Qw("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&t!=="%")throw new Qw("invalid intrinsic syntax, expected opening `%`");var i=[];return lwe(e,lat,function(s,o,a,c){i[i.length]=a?lwe(c,uat,"$1"):o||s}),i},pat=function(e,t){var n=e,i;if(yj(cwe,n)&&(i=cwe[n],n="%"+i[0]+"%"),yj(tS,n)){var s=tS[n];if(s===Ww&&(s=sat(n)),typeof s>"u"&&!t)throw new Kw("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:s}}throw new Qw("intrinsic "+e+" does not exist!")};pwe.exports=function(e,t){if(typeof e!="string"||e.length===0)throw new Kw("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new Kw('"allowMissing" argument must be a boolean');if(cat(/^%?[^%]*%?$/,e)===null)throw new Qw("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=dat(e),i=n.length>0?n[0]:"",s=pat("%"+i+"%",t),o=s.name,a=s.value,c=!1,l=s.alias;l&&(i=l[0],aat(n,oat([0,1],l)));for(var u=1,d=!0;u<n.length;u+=1){var p=n[u],m=vj(p,0,1),f=vj(p,-1);if((m==='"'||m==="'"||m==="`"||f==='"'||f==="'"||f==="`")&&m!==f)throw new Qw("property names with quotes must have matching quotes");if((p==="constructor"||!d)&&(c=!0),i+="."+p,o="%"+i+"%",yj(tS,o))a=tS[o];else if(a!=null){if(!(p in a)){if(!t)throw new Kw("base intrinsic for "+e+" exists, but the property is not available.");return}if(uA&&u+1>=n.length){var y=uA(a,p);d=!!y,d&&"get"in y&&!("originalValue"in y.get)?a=y.get:a=a[p]}else d=yj(a,p),a=a[p];d&&!c&&(tS[o]=a)}}return a}});var fwe=O((cgr,hwe)=>{"use strict";hwe.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==i||o.enumerable!==!0)return!1}return!0}});var ywe=O((lgr,gwe)=>{"use strict";var mat=fwe();gwe.exports=function(){return mat()&&!!Symbol.toStringTag}});var _we=O((ugr,bwe)=>{"use strict";var hat=mwe(),vwe=hat("%Object.defineProperty%",!0),fat=ywe()(),gat=gj(),yat=dj(),bj=fat?Symbol.toStringTag:null;bwe.exports=function(e,t){var n=arguments.length>2&&!!arguments[2]&&arguments[2].force,i=arguments.length>2&&!!arguments[2]&&arguments[2].nonConfigurable;if(typeof n<"u"&&typeof n!="boolean"||typeof i<"u"&&typeof i!="boolean")throw new yat("if provided, the `overrideIfSet` and `nonConfigurable` options must be booleans");bj&&(n||!gat(e,bj))&&(vwe?vwe(e,bj,{configurable:!i,enumerable:!1,value:t,writable:!1}):e[bj]=t)}});var Cwe=O((dgr,Swe)=>{"use strict";Swe.exports=function(r,e){return Object.keys(e).forEach(function(t){r[t]=r[t]||e[t]}),r}});var d8=O((pgr,Pwe)=>{"use strict";var u8=yCe(),vat=require("util"),a8=require("path"),bat=require("http"),_at=require("https"),Sat=require("url").parse,Cat=require("fs"),Pat=require("stream").Stream,wat=require("crypto"),c8=PCe(),Eat=jCe(),Tat=_we(),ev=gj(),l8=Cwe();function Ri(r){if(!(this instanceof Ri))return new Ri(r);this._overheadLength=0,this._valueLength=0,this._valuesToMeasure=[],u8.call(this),r=r||{};for(var e in r)this[e]=r[e]}vat.inherits(Ri,u8);Ri.LINE_BREAK=`\r
`;Ri.DEFAULT_CONTENT_TYPE="application/octet-stream";Ri.prototype.append=function(r,e,t){t=t||{},typeof t=="string"&&(t={filename:t});var n=u8.prototype.append.bind(this);if((typeof e=="number"||e==null)&&(e=String(e)),Array.isArray(e)){this._error(new Error("Arrays are not supported."));return}var i=this._multiPartHeader(r,e,t),s=this._multiPartFooter();n(i),n(e),n(s),this._trackLength(i,e,t)};Ri.prototype._trackLength=function(r,e,t){var n=0;t.knownLength!=null?n+=Number(t.knownLength):Buffer.isBuffer(e)?n=e.length:typeof e=="string"&&(n=Buffer.byteLength(e)),this._valueLength+=n,this._overheadLength+=Buffer.byteLength(r)+Ri.LINE_BREAK.length,!(!e||!e.path&&!(e.readable&&ev(e,"httpVersion"))&&!(e instanceof Pat))&&(t.knownLength||this._valuesToMeasure.push(e))};Ri.prototype._lengthRetriever=function(r,e){ev(r,"fd")?r.end!=null&&r.end!=1/0&&r.start!=null?e(null,r.end+1-(r.start?r.start:0)):Cat.stat(r.path,function(t,n){if(t){e(t);return}var i=n.size-(r.start?r.start:0);e(null,i)}):ev(r,"httpVersion")?e(null,Number(r.headers["content-length"])):ev(r,"httpModule")?(r.on("response",function(t){r.pause(),e(null,Number(t.headers["content-length"]))}),r.resume()):e("Unknown stream")};Ri.prototype._multiPartHeader=function(r,e,t){if(typeof t.header=="string")return t.header;var n=this._getContentDisposition(e,t),i=this._getContentType(e,t),s="",o={"Content-Disposition":["form-data",'name="'+r+'"'].concat(n||[]),"Content-Type":[].concat(i||[])};typeof t.header=="object"&&l8(o,t.header);var a;for(var c in o)if(ev(o,c)){if(a=o[c],a==null)continue;Array.isArray(a)||(a=[a]),a.length&&(s+=c+": "+a.join("; ")+Ri.LINE_BREAK)}return"--"+this.getBoundary()+Ri.LINE_BREAK+s+Ri.LINE_BREAK};Ri.prototype._getContentDisposition=function(r,e){var t;if(typeof e.filepath=="string"?t=a8.normalize(e.filepath).replace(/\\/g,"/"):e.filename||r&&(r.name||r.path)?t=a8.basename(e.filename||r&&(r.name||r.path)):r&&r.readable&&ev(r,"httpVersion")&&(t=a8.basename(r.client._httpMessage.path||"")),t)return'filename="'+t+'"'};Ri.prototype._getContentType=function(r,e){var t=e.contentType;return!t&&r&&r.name&&(t=c8.lookup(r.name)),!t&&r&&r.path&&(t=c8.lookup(r.path)),!t&&r&&r.readable&&ev(r,"httpVersion")&&(t=r.headers["content-type"]),!t&&(e.filepath||e.filename)&&(t=c8.lookup(e.filepath||e.filename)),!t&&r&&typeof r=="object"&&(t=Ri.DEFAULT_CONTENT_TYPE),t};Ri.prototype._multiPartFooter=function(){return function(r){var e=Ri.LINE_BREAK,t=this._streams.length===0;t&&(e+=this._lastBoundary()),r(e)}.bind(this)};Ri.prototype._lastBoundary=function(){return"--"+this.getBoundary()+"--"+Ri.LINE_BREAK};Ri.prototype.getHeaders=function(r){var e,t={"content-type":"multipart/form-data; boundary="+this.getBoundary()};for(e in r)ev(r,e)&&(t[e.toLowerCase()]=r[e]);return t};Ri.prototype.setBoundary=function(r){if(typeof r!="string")throw new TypeError("FormData boundary must be a string");this._boundary=r};Ri.prototype.getBoundary=function(){return this._boundary||this._generateBoundary(),this._boundary};Ri.prototype.getBuffer=function(){for(var r=new Buffer.alloc(0),e=this.getBoundary(),t=0,n=this._streams.length;t<n;t++)typeof this._streams[t]!="function"&&(Buffer.isBuffer(this._streams[t])?r=Buffer.concat([r,this._streams[t]]):r=Buffer.concat([r,Buffer.from(this._streams[t])]),(typeof this._streams[t]!="string"||this._streams[t].substring(2,e.length+2)!==e)&&(r=Buffer.concat([r,Buffer.from(Ri.LINE_BREAK)])));return Buffer.concat([r,Buffer.from(this._lastBoundary())])};Ri.prototype._generateBoundary=function(){this._boundary="--------------------------"+wat.randomBytes(12).toString("hex")};Ri.prototype.getLengthSync=function(){var r=this._overheadLength+this._valueLength;return this._streams.length&&(r+=this._lastBoundary().length),this.hasKnownLength()||this._error(new Error("Cannot calculate proper length in synchronous way.")),r};Ri.prototype.hasKnownLength=function(){var r=!0;return this._valuesToMeasure.length&&(r=!1),r};Ri.prototype.getLength=function(r){var e=this._overheadLength+this._valueLength;if(this._streams.length&&(e+=this._lastBoundary().length),!this._valuesToMeasure.length){process.nextTick(r.bind(this,null,e));return}Eat.parallel(this._valuesToMeasure,this._lengthRetriever,function(t,n){if(t){r(t);return}n.forEach(function(i){e+=i}),r(null,e)})};Ri.prototype.submit=function(r,e){var t,n,i={method:"post"};return typeof r=="string"?(r=Sat(r),n=l8({port:r.port,path:r.pathname,host:r.hostname,protocol:r.protocol},i)):(n=l8(r,i),n.port||(n.port=n.protocol==="https:"?443:80)),n.headers=this.getHeaders(r.headers),n.protocol==="https:"?t=_at.request(n):t=bat.request(n),this.getLength(function(s,o){if(s&&s!=="Unknown stream"){this._error(s);return}if(o&&t.setHeader("Content-Length",o),this.pipe(t),e){var a,c=function(l,u){return t.removeListener("error",c),t.removeListener("response",a),e.call(this,l,u)};a=c.bind(this,null),t.on("error",c),t.on("response",a)}}.bind(this)),t};Ri.prototype._error=function(r){this.error||(this.error=r,this.pause(),this.emit("error",r))};Ri.prototype.toString=function(){return"[object FormData]"};Tat(Ri,"FormData");Pwe.exports=Ri});var lu=O(Xw=>{"use strict";Object.defineProperty(Xw,"__esModule",{value:!0});function Iat(r){return r&&typeof r=="object"&&"default"in r?r.default:r}var Rat=Iat(require("util")),xat=require("os");function Oat(r,...e){process.stderr.write(`${Rat.format(r,...e)}${xat.EOL}`)}var wwe=typeof process<"u"&&process.env&&process.env.DEBUG||void 0,Twe,p8=[],m8=[],Cj=[];wwe&&h8(wwe);var Yw=Object.assign(r=>Iwe(r),{enable:h8,enabled:f8,disable:Aat,log:Oat});function h8(r){Twe=r,p8=[],m8=[];let e=/\*/g,t=r.split(",").map(n=>n.trim().replace(e,".*?"));for(let n of t)n.startsWith("-")?m8.push(new RegExp(`^${n.substr(1)}$`)):p8.push(new RegExp(`^${n}$`));for(let n of Cj)n.enabled=f8(n.namespace)}function f8(r){if(r.endsWith("*"))return!0;for(let e of m8)if(e.test(r))return!1;for(let e of p8)if(e.test(r))return!0;return!1}function Aat(){let r=Twe||"";return h8(""),r}function Iwe(r){let e=Object.assign(t,{enabled:f8(r),destroy:Nat,log:Yw.log,namespace:r,extend:Dat});function t(...n){e.enabled&&(n.length>0&&(n[0]=`${r} ${n[0]}`),e.log(...n))}return Cj.push(e),e}function Nat(){let r=Cj.indexOf(this);return r>=0?(Cj.splice(r,1),!0):!1}function Dat(r){let e=Iwe(`${this.namespace}:${r}`);return e.log=this.log,e}var Rwe=new Set,_j=typeof process<"u"&&process.env&&process.env.AZURE_LOG_LEVEL||void 0,Pj,wj=Yw("azure");wj.log=(...r)=>{Yw.log(...r)};var g8=["verbose","info","warning","error"];_j&&(Nwe(_j)?xwe(_j):console.error(`AZURE_LOG_LEVEL set to unknown log level '${_j}'; logging is not enabled. Acceptable values: ${g8.join(", ")}.`));function xwe(r){if(r&&!Nwe(r))throw new Error(`Unknown log level '${r}'. Acceptable values: ${g8.join(",")}`);Pj=r;let e=[];for(let t of Rwe)Awe(t)&&e.push(t.namespace);Yw.enable(e.join(","))}function Mat(){return Pj}var Ewe={verbose:400,info:300,warning:200,error:100};function kat(r){let e=wj.extend(r);return Owe(wj,e),{error:Sj(e,"error"),warning:Sj(e,"warning"),info:Sj(e,"info"),verbose:Sj(e,"verbose")}}function Owe(r,e){e.log=(...t)=>{r.log(...t)}}function Sj(r,e){let t=Object.assign(r.extend(e),{level:e});if(Owe(r,t),Awe(t)){let n=Yw.disable();Yw.enable(n+","+t.namespace)}return Rwe.add(t),t}function Awe(r){return!!(Pj&&Ewe[r.level]<=Ewe[Pj])}function Nwe(r){return g8.includes(r)}Xw.AzureLogger=wj;Xw.createClientLogger=kat;Xw.getLogLevel=Mat;Xw.setLogLevel=xwe});var Mwe={};Ea(Mwe,{__assign:()=>v8,__asyncDelegator:()=>Kat,__asyncGenerator:()=>Wat,__asyncValues:()=>Qat,__await:()=>mA,__awaiter:()=>Uat,__classPrivateFieldGet:()=>ect,__classPrivateFieldIn:()=>rct,__classPrivateFieldSet:()=>tct,__createBinding:()=>_8,__decorate:()=>zat,__exportStar:()=>Gat,__extends:()=>Lat,__generator:()=>Bat,__importDefault:()=>Zat,__importStar:()=>Jat,__makeTemplateObject:()=>Yat,__metadata:()=>jat,__param:()=>Fat,__read:()=>Dwe,__rest:()=>qat,__spread:()=>$at,__spreadArray:()=>Hat,__spreadArrays:()=>Vat,__values:()=>b8});function Lat(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");y8(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function qat(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function zat(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}function Fat(r,e){return function(t,n){e(t,n,r)}}function jat(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function Uat(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})}function Bat(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){t.label=l[1];break}if(l[0]===6&&t.label<s[1]){t.label=s[1],s=l;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(l);break}s[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(u){l=[6,u],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Gat(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&_8(e,r,t)}function b8(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Dwe(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s}function $at(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(Dwe(arguments[e]));return r}function Vat(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function Hat(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))}function mA(r){return this instanceof mA?(this.v=r,this):new mA(r)}function Wat(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(p){n[p]&&(i[p]=function(m){return new Promise(function(f,y){s.push([p,m,f,y])>1||a(p,m)})})}function a(p,m){try{c(n[p](m))}catch(f){d(s[0][3],f)}}function c(p){p.value instanceof mA?Promise.resolve(p.value.v).then(l,u):d(s[0][2],p)}function l(p){a("next",p)}function u(p){a("throw",p)}function d(p,m){p(m),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Kat(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=r[i]?function(o){return(t=!t)?{value:mA(r[i](o)),done:i==="return"}:s?s(o):o}:s}}function Qat(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof b8=="function"?b8(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=r[s]&&function(o){return new Promise(function(a,c){o=r[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function Yat(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function Jat(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&_8(e,r,t);return Xat(e,r),e}function Zat(r){return r&&r.__esModule?r:{default:r}}function ect(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)}function tct(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t}function rct(r,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof r=="function"?e===r:r.has(e)}var y8,v8,_8,Xat,kwe=si(()=>{y8=function(r,e){return y8=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},y8(r,e)};v8=function(){return v8=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},v8.apply(this,arguments)};_8=Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]};Xat=Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}});var C8=O(hA=>{"use strict";Object.defineProperty(hA,"__esModule",{value:!0});var nct=(kwe(),da(Mwe)),Jw=new WeakMap,Ej=new WeakMap,S8=function(){function r(){this.onabort=null,Jw.set(this,[]),Ej.set(this,!1)}return Object.defineProperty(r.prototype,"aborted",{get:function(){if(!Ej.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");return Ej.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(r,"none",{get:function(){return new r},enumerable:!1,configurable:!0}),r.prototype.addEventListener=function(e,t){if(!Jw.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");var n=Jw.get(this);n.push(t)},r.prototype.removeEventListener=function(e,t){if(!Jw.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");var n=Jw.get(this),i=n.indexOf(t);i>-1&&n.splice(i,1)},r.prototype.dispatchEvent=function(e){throw new Error("This is a stub dispatchEvent implementation that should not be used.  It only exists for type-checking purposes.")},r}();function Lwe(r){if(!r.aborted){r.onabort&&r.onabort.call(r);var e=Jw.get(r);e&&e.slice().forEach(function(t){t.call(r,{type:"abort"})}),Ej.set(r,!0)}}var ict=function(r){nct.__extends(e,r);function e(t){var n=r.call(this,t)||this;return n.name="AbortError",n}return e}(Error),sct=function(){function r(e){var t=this;if(this._signal=new S8,!!e){Array.isArray(e)||(e=arguments);for(var n=0,i=e;n<i.length;n++){var s=i[n];s.aborted?this.abort():s.addEventListener("abort",function(){t.abort()})}}}return Object.defineProperty(r.prototype,"signal",{get:function(){return this._signal},enumerable:!1,configurable:!0}),r.prototype.abort=function(){Lwe(this._signal)},r.timeout=function(e){var t=new S8,n=setTimeout(Lwe,e,t);return typeof n.unref=="function"&&n.unref(),t},r}();hA.AbortController=sct;hA.AbortError=ict;hA.AbortSignal=S8});var zwe=O((fgr,qwe)=>{var Zw=1e3,eE=Zw*60,tE=eE*60,rS=tE*24,oct=rS*7,act=rS*365.25;qwe.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return cct(r);if(t==="number"&&isFinite(r))return e.long?uct(r):lct(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function cct(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*act;case"weeks":case"week":case"w":return t*oct;case"days":case"day":case"d":return t*rS;case"hours":case"hour":case"hrs":case"hr":case"h":return t*tE;case"minutes":case"minute":case"mins":case"min":case"m":return t*eE;case"seconds":case"second":case"secs":case"sec":case"s":return t*Zw;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function lct(r){var e=Math.abs(r);return e>=rS?Math.round(r/rS)+"d":e>=tE?Math.round(r/tE)+"h":e>=eE?Math.round(r/eE)+"m":e>=Zw?Math.round(r/Zw)+"s":r+"ms"}function uct(r){var e=Math.abs(r);return e>=rS?Tj(r,e,rS,"day"):e>=tE?Tj(r,e,tE,"hour"):e>=eE?Tj(r,e,eE,"minute"):e>=Zw?Tj(r,e,Zw,"second"):r+" ms"}function Tj(r,e,t,n){var i=e>=t*1.5;return Math.round(r/t)+" "+n+(i?"s":"")}});var P8=O((ggr,Fwe)=>{function dct(r){t.debug=t,t.default=t,t.coerce=c,t.disable=s,t.enable=i,t.enabled=o,t.humanize=zwe(),t.destroy=l,Object.keys(r).forEach(u=>{t[u]=r[u]}),t.names=[],t.skips=[],t.formatters={};function e(u){let d=0;for(let p=0;p<u.length;p++)d=(d<<5)-d+u.charCodeAt(p),d|=0;return t.colors[Math.abs(d)%t.colors.length]}t.selectColor=e;function t(u){let d,p=null,m,f;function y(...v){if(!y.enabled)return;let _=y,C=Number(new Date),P=C-(d||C);_.diff=P,_.prev=d,_.curr=C,d=C,v[0]=t.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let w=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(I,z)=>{if(I==="%%")return"%";w++;let G=t.formatters[z];if(typeof G=="function"){let L=v[w];I=G.call(_,L),v.splice(w,1),w--}return I}),t.formatArgs.call(_,v),(_.log||t.log).apply(_,v)}return y.namespace=u,y.useColors=t.useColors(),y.color=t.selectColor(u),y.extend=n,y.destroy=t.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(m!==t.namespaces&&(m=t.namespaces,f=t.enabled(u)),f),set:v=>{p=v}}),typeof t.init=="function"&&t.init(y),y}function n(u,d){let p=t(this.namespace+(typeof d>"u"?":":d)+u);return p.log=this.log,p}function i(u){t.save(u),t.namespaces=u,t.names=[],t.skips=[];let d,p=(typeof u=="string"?u:"").split(/[\s,]+/),m=p.length;for(d=0;d<m;d++)p[d]&&(u=p[d].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.substr(1)+"$")):t.names.push(new RegExp("^"+u+"$")))}function s(){let u=[...t.names.map(a),...t.skips.map(a).map(d=>"-"+d)].join(",");return t.enable(""),u}function o(u){if(u[u.length-1]==="*")return!0;let d,p;for(d=0,p=t.skips.length;d<p;d++)if(t.skips[d].test(u))return!1;for(d=0,p=t.names.length;d<p;d++)if(t.names[d].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}Fwe.exports=dct});var jwe=O((Uu,Ij)=>{Uu.formatArgs=mct;Uu.save=hct;Uu.load=fct;Uu.useColors=pct;Uu.storage=gct();Uu.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Uu.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function pct(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function mct(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+Ij.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,n=0;r[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),r.splice(n,0,e)}Uu.log=console.debug||console.log||(()=>{});function hct(r){try{r?Uu.storage.setItem("debug",r):Uu.storage.removeItem("debug")}catch{}}function fct(){let r;try{r=Uu.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}function gct(){try{return localStorage}catch{}}Ij.exports=P8()(Uu);var{formatters:yct}=Ij.exports;yct.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Bwe=O((ygr,Uwe)=>{"use strict";Uwe.exports=(r,e=process.argv)=>{let t=r.startsWith("-")?"":r.length===1?"-":"--",n=e.indexOf(t+r),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var fA=O((vgr,$we)=>{"use strict";var vct=require("os"),Gwe=require("tty"),Gd=Bwe(),{env:Va}=process,tv;Gd("no-color")||Gd("no-colors")||Gd("color=false")||Gd("color=never")?tv=0:(Gd("color")||Gd("colors")||Gd("color=true")||Gd("color=always"))&&(tv=1);"FORCE_COLOR"in Va&&(Va.FORCE_COLOR==="true"?tv=1:Va.FORCE_COLOR==="false"?tv=0:tv=Va.FORCE_COLOR.length===0?1:Math.min(parseInt(Va.FORCE_COLOR,10),3));function w8(r){return r===0?!1:{level:r,hasBasic:!0,has256:r>=2,has16m:r>=3}}function E8(r,e){if(tv===0)return 0;if(Gd("color=16m")||Gd("color=full")||Gd("color=truecolor"))return 3;if(Gd("color=256"))return 2;if(r&&!e&&tv===void 0)return 0;let t=tv||0;if(Va.TERM==="dumb")return t;if(process.platform==="win32"){let n=vct.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in Va)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in Va)||Va.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in Va)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Va.TEAMCITY_VERSION)?1:0;if(Va.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Va){let n=parseInt((Va.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Va.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Va.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Va.TERM)||"COLORTERM"in Va?1:t}function bct(r){let e=E8(r,r&&r.isTTY);return w8(e)}$we.exports={supportsColor:bct,stdout:w8(E8(!0,Gwe.isatty(1))),stderr:w8(E8(!0,Gwe.isatty(2)))}});var Hwe=O((bc,xj)=>{var _ct=require("tty"),Rj=require("util");bc.init=Ict;bc.log=wct;bc.formatArgs=Cct;bc.save=Ect;bc.load=Tct;bc.useColors=Sct;bc.destroy=Rj.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");bc.colors=[6,2,3,4,5,1];try{let r=fA();r&&(r.stderr||r).level>=2&&(bc.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}bc.inspectOpts=Object.keys(process.env).filter(r=>/^debug_/i.test(r)).reduce((r,e)=>{let t=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),r[t]=n,r},{});function Sct(){return"colors"in bc.inspectOpts?!!bc.inspectOpts.colors:_ct.isatty(process.stderr.fd)}function Cct(r){let{namespace:e,useColors:t}=this;if(t){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${e} \x1B[0m`;r[0]=s+r[0].split(`
`).join(`
`+s),r.push(i+"m+"+xj.exports.humanize(this.diff)+"\x1B[0m")}else r[0]=Pct()+e+" "+r[0]}function Pct(){return bc.inspectOpts.hideDate?"":new Date().toISOString()+" "}function wct(...r){return process.stderr.write(Rj.format(...r)+`
`)}function Ect(r){r?process.env.DEBUG=r:delete process.env.DEBUG}function Tct(){return process.env.DEBUG}function Ict(r){r.inspectOpts={};let e=Object.keys(bc.inspectOpts);for(let t=0;t<e.length;t++)r.inspectOpts[e[t]]=bc.inspectOpts[e[t]]}xj.exports=P8()(bc);var{formatters:Vwe}=xj.exports;Vwe.o=function(r){return this.inspectOpts.colors=this.useColors,Rj.inspect(r,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};Vwe.O=function(r){return this.inspectOpts.colors=this.useColors,Rj.inspect(r,this.inspectOpts)}});var Oj=O((bgr,T8)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?T8.exports=jwe():T8.exports=Hwe()});var Kwe=O((_gr,Wwe)=>{var rE=1e3,nE=rE*60,iE=nE*60,nS=iE*24,Rct=nS*7,xct=nS*365.25;Wwe.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return Oct(r);if(t==="number"&&isFinite(r))return e.long?Nct(r):Act(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function Oct(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*xct;case"weeks":case"week":case"w":return t*Rct;case"days":case"day":case"d":return t*nS;case"hours":case"hour":case"hrs":case"hr":case"h":return t*iE;case"minutes":case"minute":case"mins":case"min":case"m":return t*nE;case"seconds":case"second":case"secs":case"sec":case"s":return t*rE;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function Act(r){var e=Math.abs(r);return e>=nS?Math.round(r/nS)+"d":e>=iE?Math.round(r/iE)+"h":e>=nE?Math.round(r/nE)+"m":e>=rE?Math.round(r/rE)+"s":r+"ms"}function Nct(r){var e=Math.abs(r);return e>=nS?Aj(r,e,nS,"day"):e>=iE?Aj(r,e,iE,"hour"):e>=nE?Aj(r,e,nE,"minute"):e>=rE?Aj(r,e,rE,"second"):r+" ms"}function Aj(r,e,t,n){var i=e>=t*1.5;return Math.round(r/t)+" "+n+(i?"s":"")}});var I8=O((Sgr,Qwe)=>{function Dct(r){t.debug=t,t.default=t,t.coerce=c,t.disable=s,t.enable=i,t.enabled=o,t.humanize=Kwe(),t.destroy=l,Object.keys(r).forEach(u=>{t[u]=r[u]}),t.names=[],t.skips=[],t.formatters={};function e(u){let d=0;for(let p=0;p<u.length;p++)d=(d<<5)-d+u.charCodeAt(p),d|=0;return t.colors[Math.abs(d)%t.colors.length]}t.selectColor=e;function t(u){let d,p=null,m,f;function y(...v){if(!y.enabled)return;let _=y,C=Number(new Date),P=C-(d||C);_.diff=P,_.prev=d,_.curr=C,d=C,v[0]=t.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let w=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(I,z)=>{if(I==="%%")return"%";w++;let G=t.formatters[z];if(typeof G=="function"){let L=v[w];I=G.call(_,L),v.splice(w,1),w--}return I}),t.formatArgs.call(_,v),(_.log||t.log).apply(_,v)}return y.namespace=u,y.useColors=t.useColors(),y.color=t.selectColor(u),y.extend=n,y.destroy=t.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(m!==t.namespaces&&(m=t.namespaces,f=t.enabled(u)),f),set:v=>{p=v}}),typeof t.init=="function"&&t.init(y),y}function n(u,d){let p=t(this.namespace+(typeof d>"u"?":":d)+u);return p.log=this.log,p}function i(u){t.save(u),t.namespaces=u,t.names=[],t.skips=[];let d,p=(typeof u=="string"?u:"").split(/[\s,]+/),m=p.length;for(d=0;d<m;d++)p[d]&&(u=p[d].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.substr(1)+"$")):t.names.push(new RegExp("^"+u+"$")))}function s(){let u=[...t.names.map(a),...t.skips.map(a).map(d=>"-"+d)].join(",");return t.enable(""),u}function o(u){if(u[u.length-1]==="*")return!0;let d,p;for(d=0,p=t.skips.length;d<p;d++)if(t.skips[d].test(u))return!1;for(d=0,p=t.names.length;d<p;d++)if(t.names[d].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}Qwe.exports=Dct});var Ywe=O((Bu,Nj)=>{Bu.formatArgs=kct;Bu.save=Lct;Bu.load=qct;Bu.useColors=Mct;Bu.storage=zct();Bu.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Bu.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Mct(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function kct(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+Nj.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,n=0;r[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),r.splice(n,0,e)}Bu.log=console.debug||console.log||(()=>{});function Lct(r){try{r?Bu.storage.setItem("debug",r):Bu.storage.removeItem("debug")}catch{}}function qct(){let r;try{r=Bu.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}function zct(){try{return localStorage}catch{}}Nj.exports=I8()(Bu);var{formatters:Fct}=Nj.exports;Fct.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Jwe=O((_c,Mj)=>{var jct=require("tty"),Dj=require("util");_c.init=Wct;_c.log=$ct;_c.formatArgs=Bct;_c.save=Vct;_c.load=Hct;_c.useColors=Uct;_c.destroy=Dj.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");_c.colors=[6,2,3,4,5,1];try{let r=fA();r&&(r.stderr||r).level>=2&&(_c.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}_c.inspectOpts=Object.keys(process.env).filter(r=>/^debug_/i.test(r)).reduce((r,e)=>{let t=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),r[t]=n,r},{});function Uct(){return"colors"in _c.inspectOpts?!!_c.inspectOpts.colors:jct.isatty(process.stderr.fd)}function Bct(r){let{namespace:e,useColors:t}=this;if(t){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${e} \x1B[0m`;r[0]=s+r[0].split(`
`).join(`
`+s),r.push(i+"m+"+Mj.exports.humanize(this.diff)+"\x1B[0m")}else r[0]=Gct()+e+" "+r[0]}function Gct(){return _c.inspectOpts.hideDate?"":new Date().toISOString()+" "}function $ct(...r){return process.stderr.write(Dj.format(...r)+`
`)}function Vct(r){r?process.env.DEBUG=r:delete process.env.DEBUG}function Hct(){return process.env.DEBUG}function Wct(r){r.inspectOpts={};let e=Object.keys(_c.inspectOpts);for(let t=0;t<e.length;t++)r.inspectOpts[e[t]]=_c.inspectOpts[e[t]]}Mj.exports=I8()(_c);var{formatters:Xwe}=Mj.exports;Xwe.o=function(r){return this.inspectOpts.colors=this.useColors,Dj.inspect(r,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};Xwe.O=function(r){return this.inspectOpts.colors=this.useColors,Dj.inspect(r,this.inspectOpts)}});var Zwe=O((Cgr,R8)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?R8.exports=Ywe():R8.exports=Jwe()});var eEe=O(x8=>{"use strict";Object.defineProperty(x8,"__esModule",{value:!0});function Kct(r){return function(e,t){return new Promise((n,i)=>{r.call(this,e,t,(s,o)=>{s?i(s):n(o)})})}}x8.default=Kct});var N8=O((A8,rEe)=>{"use strict";var tEe=A8&&A8.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},Qct=require("events"),Yct=tEe(Zwe()),Xct=tEe(eEe()),gA=Yct.default("agent-base");function Jct(r){return!!r&&typeof r.addRequest=="function"}function O8(){let{stack:r}=new Error;return typeof r!="string"?!1:r.split(`
`).some(e=>e.indexOf("(https.js:")!==-1||e.indexOf("node:https:")!==-1)}function kj(r,e){return new kj.Agent(r,e)}(function(r){class e extends Qct.EventEmitter{constructor(n,i){super();let s=i;typeof n=="function"?this.callback=n:n&&(s=n),this.timeout=null,s&&typeof s.timeout=="number"&&(this.timeout=s.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:O8()?443:80}set defaultPort(n){this.explicitDefaultPort=n}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:O8()?"https:":"http:"}set protocol(n){this.explicitProtocol=n}callback(n,i,s){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(n,i){let s=Object.assign({},i);typeof s.secureEndpoint!="boolean"&&(s.secureEndpoint=O8()),s.host==null&&(s.host="localhost"),s.port==null&&(s.port=s.secureEndpoint?443:80),s.protocol==null&&(s.protocol=s.secureEndpoint?"https:":"http:"),s.host&&s.path&&delete s.path,delete s.agent,delete s.hostname,delete s._defaultAgent,delete s.defaultPort,delete s.createConnection,n._last=!0,n.shouldKeepAlive=!1;let o=!1,a=null,c=s.timeout||this.timeout,l=m=>{n._hadError||(n.emit("error",m),n._hadError=!0)},u=()=>{a=null,o=!0;let m=new Error(`A "socket" was not created for HTTP request before ${c}ms`);m.code="ETIMEOUT",l(m)},d=m=>{o||(a!==null&&(clearTimeout(a),a=null),l(m))},p=m=>{if(o)return;if(a!=null&&(clearTimeout(a),a=null),Jct(m)){gA("Callback returned another Agent instance %o",m.constructor.name),m.addRequest(n,s);return}if(m){m.once("free",()=>{this.freeSocket(m,s)}),n.onSocket(m);return}let f=new Error(`no Duplex stream was returned to agent-base for \`${n.method} ${n.path}\``);l(f)};if(typeof this.callback!="function"){l(new Error("`callback` is not defined"));return}this.promisifiedCallback||(this.callback.length>=3?(gA("Converting legacy callback function to promise"),this.promisifiedCallback=Xct.default(this.callback)):this.promisifiedCallback=this.callback),typeof c=="number"&&c>0&&(a=setTimeout(u,c)),"port"in s&&typeof s.port!="number"&&(s.port=Number(s.port));try{gA("Resolving socket for %o request: %o",s.protocol,`${n.method} ${n.path}`),Promise.resolve(this.promisifiedCallback(n,s)).then(p,d)}catch(m){Promise.reject(m).catch(d)}}freeSocket(n,i){gA("Freeing socket %o %o",n.constructor.name,i),n.destroy()}destroy(){gA("Destroying agent %o",this.constructor.name)}}r.Agent=e,r.prototype=r.Agent.prototype})(kj||(kj={}));rEe.exports=kj});var nEe=O(vA=>{"use strict";var Zct=vA&&vA.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vA,"__esModule",{value:!0});var elt=Zct(Oj()),yA=elt.default("https-proxy-agent:parse-proxy-response");function tlt(r){return new Promise((e,t)=>{let n=0,i=[];function s(){let d=r.read();d?u(d):r.once("readable",s)}function o(){r.removeListener("end",c),r.removeListener("error",l),r.removeListener("close",a),r.removeListener("readable",s)}function a(d){yA("onclose had error %o",d)}function c(){yA("onend")}function l(d){o(),yA("onerror %o",d),t(d)}function u(d){i.push(d),n+=d.length;let p=Buffer.concat(i,n);if(p.indexOf(`\r
\r
`)===-1){yA("have not received end of HTTP headers yet..."),s();return}let f=p.toString("ascii",0,p.indexOf(`\r
`)),y=+f.split(" ")[1];yA("got proxy server response: %o",f),e({statusCode:y,buffered:p})}r.on("error",l),r.on("close",a),r.on("end",c),s()})}vA.default=tlt});var oEe=O(iS=>{"use strict";var rlt=iS&&iS.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})},sE=iS&&iS.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(iS,"__esModule",{value:!0});var iEe=sE(require("net")),sEe=sE(require("tls")),nlt=sE(require("url")),ilt=sE(require("assert")),slt=sE(Oj()),olt=N8(),alt=sE(nEe()),bA=slt.default("https-proxy-agent:agent"),D8=class extends olt.Agent{constructor(e){let t;if(typeof e=="string"?t=nlt.default.parse(e):t=e,!t)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");bA("creating new HttpsProxyAgent instance: %o",t),super(t);let n=Object.assign({},t);this.secureProxy=t.secureProxy||ult(n.protocol),n.host=n.hostname||n.host,typeof n.port=="string"&&(n.port=parseInt(n.port,10)),!n.port&&n.host&&(n.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in n)&&(n.ALPNProtocols=["http 1.1"]),n.host&&n.path&&(delete n.path,delete n.pathname),this.proxy=n}callback(e,t){return rlt(this,void 0,void 0,function*(){let{proxy:n,secureProxy:i}=this,s;i?(bA("Creating `tls.Socket`: %o",n),s=sEe.default.connect(n)):(bA("Creating `net.Socket`: %o",n),s=iEe.default.connect(n));let o=Object.assign({},n.headers),c=`CONNECT ${`${t.host}:${t.port}`} HTTP/1.1\r
`;n.auth&&(o["Proxy-Authorization"]=`Basic ${Buffer.from(n.auth).toString("base64")}`);let{host:l,port:u,secureEndpoint:d}=t;llt(u,d)||(l+=`:${u}`),o.Host=l,o.Connection="close";for(let v of Object.keys(o))c+=`${v}: ${o[v]}\r
`;let p=alt.default(s);s.write(`${c}\r
`);let{statusCode:m,buffered:f}=yield p;if(m===200){if(e.once("socket",clt),t.secureEndpoint){let v=t.servername||t.host;if(!v)throw new Error('Could not determine "servername"');return bA("Upgrading socket connection to TLS"),sEe.default.connect(Object.assign(Object.assign({},dlt(t,"host","hostname","path","port")),{socket:s,servername:v}))}return s}s.destroy();let y=new iEe.default.Socket;return y.readable=!0,e.once("socket",v=>{bA("replaying proxy buffer for failed request"),ilt.default(v.listenerCount("data")>0),v.push(f),v.push(null)}),y})}};iS.default=D8;function clt(r){r.resume()}function llt(r,e){return!!(!e&&r===80||e&&r===443)}function ult(r){return typeof r=="string"?/^https:?$/i.test(r):!1}function dlt(r,...e){let t={},n;for(n in r)e.includes(n)||(t[n]=r[n]);return t}});var cEe=O((L8,aEe)=>{"use strict";var plt=L8&&L8.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},M8=plt(oEe());function k8(r){return new M8.default(r)}(function(r){r.HttpsProxyAgent=M8.default,r.prototype=M8.default.prototype})(k8||(k8={}));aEe.exports=k8});var uEe=O((Tgr,lEe)=>{"use strict";function mlt(){}function Lj(r,e){let t=Lj.spread(r,e),n=t.then(i=>i[0]);return n.cancel=t.cancel,n}(function(r){function e(t,n){let i=null,s=new Promise((o,a)=>{function c(){t.removeListener(n,l),t.removeListener("error",u),s.cancel=mlt}function l(...d){c(),o(d)}function u(d){c(),a(d)}i=c,t.on(n,l),t.on("error",u)});if(!i)throw new TypeError("Could not get `cancel()` function");return s.cancel=i,s}r.spread=e})(Lj||(Lj={}));lEe.exports=Lj});var dEe=O(sS=>{"use strict";var hlt=sS&&sS.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})},_A=sS&&sS.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(sS,"__esModule",{value:!0});var flt=_A(require("net")),glt=_A(require("tls")),q8=_A(require("url")),ylt=_A(Oj()),vlt=_A(uEe()),blt=N8(),rv=ylt.default("http-proxy-agent");function _lt(r){return typeof r=="string"?/^https:?$/i.test(r):!1}var z8=class extends blt.Agent{constructor(e){let t;if(typeof e=="string"?t=q8.default.parse(e):t=e,!t)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");rv("Creating new HttpProxyAgent instance: %o",t),super(t);let n=Object.assign({},t);this.secureProxy=t.secureProxy||_lt(n.protocol),n.host=n.hostname||n.host,typeof n.port=="string"&&(n.port=parseInt(n.port,10)),!n.port&&n.host&&(n.port=this.secureProxy?443:80),n.host&&n.path&&(delete n.path,delete n.pathname),this.proxy=n}callback(e,t){return hlt(this,void 0,void 0,function*(){let{proxy:n,secureProxy:i}=this,s=q8.default.parse(e.path);s.protocol||(s.protocol="http:"),s.hostname||(s.hostname=t.hostname||t.host||null),s.port==null&&typeof t.port&&(s.port=String(t.port)),s.port==="80"&&delete s.port,e.path=q8.default.format(s),n.auth&&e.setHeader("Proxy-Authorization",`Basic ${Buffer.from(n.auth).toString("base64")}`);let o;if(i?(rv("Creating `tls.Socket`: %o",n),o=glt.default.connect(n)):(rv("Creating `net.Socket`: %o",n),o=flt.default.connect(n)),e._header){let a,c;rv("Regenerating stored HTTP header string for request"),e._header=null,e._implicitHeader(),e.output&&e.output.length>0?(rv("Patching connection write() output buffer with updated header"),a=e.output[0],c=a.indexOf(`\r
\r
`)+4,e.output[0]=e._header+a.substring(c),rv("Output buffer: %o",e.output)):e.outputData&&e.outputData.length>0&&(rv("Patching connection write() output buffer with updated header"),a=e.outputData[0].data,c=a.indexOf(`\r
\r
`)+4,e.outputData[0].data=e._header+a.substring(c),rv("Output buffer: %o",e.outputData[0].data))}return yield vlt.default(o,"connect"),o})}};sS.default=z8});var mEe=O((U8,pEe)=>{"use strict";var Slt=U8&&U8.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},F8=Slt(dEe());function j8(r){return new F8.default(r)}(function(r){r.HttpProxyAgent=F8.default,r.prototype=F8.default.prototype})(j8||(j8={}));pEe.exports=j8});var fEe=O(hEe=>{"use strict";Object.defineProperty(hEe,"__esModule",{value:!0})});var gEe=O(qj=>{"use strict";Object.defineProperty(qj,"__esModule",{value:!0});qj._globalThis=void 0;qj._globalThis=typeof globalThis=="object"?globalThis:global});var yEe=O(oS=>{"use strict";var Clt=oS&&oS.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Plt=oS&&oS.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Clt(e,r,t)};Object.defineProperty(oS,"__esModule",{value:!0});Plt(gEe(),oS)});var vEe=O(aS=>{"use strict";var wlt=aS&&aS.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Elt=aS&&aS.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&wlt(e,r,t)};Object.defineProperty(aS,"__esModule",{value:!0});Elt(yEe(),aS)});var B8=O(zj=>{"use strict";Object.defineProperty(zj,"__esModule",{value:!0});zj.VERSION=void 0;zj.VERSION="1.0.4"});var SEe=O(oE=>{"use strict";Object.defineProperty(oE,"__esModule",{value:!0});oE.isCompatible=oE._makeCompatibilityCheck=void 0;var Tlt=B8(),bEe=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function _Ee(r){var e=new Set([r]),t=new Set,n=r.match(bEe);if(!n)return function(){return!1};var i={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(i.prerelease!=null)return function(c){return c===r};function s(a){return t.add(a),!1}function o(a){return e.add(a),!0}return function(c){if(e.has(c))return!0;if(t.has(c))return!1;var l=c.match(bEe);if(!l)return s(c);var u={major:+l[1],minor:+l[2],patch:+l[3],prerelease:l[4]};return u.prerelease!=null||i.major!==u.major?s(c):i.major===0?i.minor===u.minor&&i.patch<=u.patch?o(c):s(c):i.minor<=u.minor?o(c):s(c)}}oE._makeCompatibilityCheck=_Ee;oE.isCompatible=_Ee(Tlt.VERSION)});var aE=O(nv=>{"use strict";Object.defineProperty(nv,"__esModule",{value:!0});nv.unregisterGlobal=nv.getGlobal=nv.registerGlobal=void 0;var Ilt=vEe(),SA=B8(),Rlt=SEe(),xlt=SA.VERSION.split(".")[0],CA=Symbol.for("opentelemetry.js.api."+xlt),PA=Ilt._globalThis;function Olt(r,e,t,n){var i;n===void 0&&(n=!1);var s=PA[CA]=(i=PA[CA])!==null&&i!==void 0?i:{version:SA.VERSION};if(!n&&s[r]){var o=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+r);return t.error(o.stack||o.message),!1}if(s.version!==SA.VERSION){var o=new Error("@opentelemetry/api: All API registration versions must match");return t.error(o.stack||o.message),!1}return s[r]=e,t.debug("@opentelemetry/api: Registered a global for "+r+" v"+SA.VERSION+"."),!0}nv.registerGlobal=Olt;function Alt(r){var e,t,n=(e=PA[CA])===null||e===void 0?void 0:e.version;if(!(!n||!Rlt.isCompatible(n)))return(t=PA[CA])===null||t===void 0?void 0:t[r]}nv.getGlobal=Alt;function Nlt(r,e){e.debug("@opentelemetry/api: Unregistering a global for "+r+" v"+SA.VERSION+".");var t=PA[CA];t&&delete t[r]}nv.unregisterGlobal=Nlt});var CEe=O(Fj=>{"use strict";Object.defineProperty(Fj,"__esModule",{value:!0});Fj.DiagComponentLogger=void 0;var Dlt=aE(),Mlt=function(){function r(e){this._namespace=e.namespace||"DiagComponentLogger"}return r.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return wA("debug",this._namespace,e)},r.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return wA("error",this._namespace,e)},r.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return wA("info",this._namespace,e)},r.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return wA("warn",this._namespace,e)},r.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return wA("verbose",this._namespace,e)},r}();Fj.DiagComponentLogger=Mlt;function wA(r,e,t){var n=Dlt.getGlobal("diag");if(n)return t.unshift(e),n[r].apply(n,t)}});var jj=O(EA=>{"use strict";Object.defineProperty(EA,"__esModule",{value:!0});EA.DiagLogLevel=void 0;var klt;(function(r){r[r.NONE=0]="NONE",r[r.ERROR=30]="ERROR",r[r.WARN=50]="WARN",r[r.INFO=60]="INFO",r[r.DEBUG=70]="DEBUG",r[r.VERBOSE=80]="VERBOSE",r[r.ALL=9999]="ALL"})(klt=EA.DiagLogLevel||(EA.DiagLogLevel={}))});var PEe=O(Uj=>{"use strict";Object.defineProperty(Uj,"__esModule",{value:!0});Uj.createLogLevelDiagLogger=void 0;var rg=jj();function Llt(r,e){r<rg.DiagLogLevel.NONE?r=rg.DiagLogLevel.NONE:r>rg.DiagLogLevel.ALL&&(r=rg.DiagLogLevel.ALL),e=e||{};function t(n,i){var s=e[n];return typeof s=="function"&&r>=i?s.bind(e):function(){}}return{error:t("error",rg.DiagLogLevel.ERROR),warn:t("warn",rg.DiagLogLevel.WARN),info:t("info",rg.DiagLogLevel.INFO),debug:t("debug",rg.DiagLogLevel.DEBUG),verbose:t("verbose",rg.DiagLogLevel.VERBOSE)}}Uj.createLogLevelDiagLogger=Llt});var cE=O(Gj=>{"use strict";Object.defineProperty(Gj,"__esModule",{value:!0});Gj.DiagAPI=void 0;var qlt=CEe(),zlt=PEe(),Flt=jj(),Bj=aE(),jlt="diag",Ult=function(){function r(){function e(n){return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var o=Bj.getGlobal("diag");if(o)return o[n].apply(o,i)}}var t=this;t.setLogger=function(n,i){var s,o;if(i===void 0&&(i=Flt.DiagLogLevel.INFO),n===t){var a=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error((s=a.stack)!==null&&s!==void 0?s:a.message),!1}var c=Bj.getGlobal("diag"),l=zlt.createLogLevelDiagLogger(i,n);if(c){var u=(o=new Error().stack)!==null&&o!==void 0?o:"<failed to generate stacktrace>";c.warn("Current logger will be overwritten from "+u),l.warn("Current logger will overwrite one already registered from "+u)}return Bj.registerGlobal("diag",l,t,!0)},t.disable=function(){Bj.unregisterGlobal(jlt,t)},t.createComponentLogger=function(n){return new qlt.DiagComponentLogger(n)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return r.instance=function(){return this._instance||(this._instance=new r),this._instance},r}();Gj.DiagAPI=Ult});var wEe=O($j=>{"use strict";Object.defineProperty($j,"__esModule",{value:!0});$j.BaggageImpl=void 0;var Blt=function(){function r(e){this._entries=e?new Map(e):new Map}return r.prototype.getEntry=function(e){var t=this._entries.get(e);if(t)return Object.assign({},t)},r.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){var t=e[0],n=e[1];return[t,n]})},r.prototype.setEntry=function(e,t){var n=new r(this._entries);return n._entries.set(e,t),n},r.prototype.removeEntry=function(e){var t=new r(this._entries);return t._entries.delete(e),t},r.prototype.removeEntries=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=new r(this._entries),i=0,s=e;i<s.length;i++){var o=s[i];n._entries.delete(o)}return n},r.prototype.clear=function(){return new r},r}();$j.BaggageImpl=Blt});var EEe=O(Vj=>{"use strict";Object.defineProperty(Vj,"__esModule",{value:!0});Vj.baggageEntryMetadataSymbol=void 0;Vj.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")});var G8=O(lE=>{"use strict";Object.defineProperty(lE,"__esModule",{value:!0});lE.baggageEntryMetadataFromString=lE.createBaggage=void 0;var Glt=cE(),$lt=wEe(),Vlt=EEe(),Hlt=Glt.DiagAPI.instance();function Wlt(r){return r===void 0&&(r={}),new $lt.BaggageImpl(new Map(Object.entries(r)))}lE.createBaggage=Wlt;function Klt(r){return typeof r!="string"&&(Hlt.error("Cannot create baggage metadata from unknown type: "+typeof r),r=""),{__TYPE__:Vlt.baggageEntryMetadataSymbol,toString:function(){return r}}}lE.baggageEntryMetadataFromString=Klt});var IEe=O(TEe=>{"use strict";Object.defineProperty(TEe,"__esModule",{value:!0})});var xEe=O(REe=>{"use strict";Object.defineProperty(REe,"__esModule",{value:!0})});var OEe=O(Hj=>{"use strict";Object.defineProperty(Hj,"__esModule",{value:!0});Hj.DiagConsoleLogger=void 0;var $8=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],Qlt=function(){function r(){function e(n){return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(console){var o=console[n];if(typeof o!="function"&&(o=console.log),typeof o=="function")return o.apply(console,i)}}}for(var t=0;t<$8.length;t++)this[$8[t].n]=e($8[t].c)}return r}();Hj.DiagConsoleLogger=Qlt});var NEe=O(iv=>{"use strict";var Ylt=iv&&iv.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),AEe=iv&&iv.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Ylt(e,r,t)};Object.defineProperty(iv,"__esModule",{value:!0});AEe(OEe(),iv);AEe(jj(),iv)});var V8=O(uE=>{"use strict";Object.defineProperty(uE,"__esModule",{value:!0});uE.defaultTextMapSetter=uE.defaultTextMapGetter=void 0;uE.defaultTextMapGetter={get:function(r,e){if(r!=null)return r[e]},keys:function(r){return r==null?[]:Object.keys(r)}};uE.defaultTextMapSetter={set:function(r,e,t){r!=null&&(r[e]=t)}}});var MEe=O(DEe=>{"use strict";Object.defineProperty(DEe,"__esModule",{value:!0})});var LEe=O(kEe=>{"use strict";Object.defineProperty(kEe,"__esModule",{value:!0})});var TA=O(dE=>{"use strict";Object.defineProperty(dE,"__esModule",{value:!0});dE.ROOT_CONTEXT=dE.createContextKey=void 0;function Xlt(r){return Symbol.for(r)}dE.createContextKey=Xlt;var Jlt=function(){function r(e){var t=this;t._currentContext=e?new Map(e):new Map,t.getValue=function(n){return t._currentContext.get(n)},t.setValue=function(n,i){var s=new r(t._currentContext);return s._currentContext.set(n,i),s},t.deleteValue=function(n){var i=new r(t._currentContext);return i._currentContext.delete(n),i}}return r}();dE.ROOT_CONTEXT=new Jlt});var qEe=O(pE=>{"use strict";var Zlt=pE&&pE.__spreadArray||function(r,e){for(var t=0,n=e.length,i=r.length;t<n;t++,i++)r[i]=e[t];return r};Object.defineProperty(pE,"__esModule",{value:!0});pE.NoopContextManager=void 0;var eut=TA(),tut=function(){function r(){}return r.prototype.active=function(){return eut.ROOT_CONTEXT},r.prototype.with=function(e,t,n){for(var i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];return t.call.apply(t,Zlt([n],i))},r.prototype.bind=function(e,t){return t},r.prototype.enable=function(){return this},r.prototype.disable=function(){return this},r}();pE.NoopContextManager=tut});var K8=O(mE=>{"use strict";var rut=mE&&mE.__spreadArray||function(r,e){for(var t=0,n=e.length,i=r.length;t<n;t++,i++)r[i]=e[t];return r};Object.defineProperty(mE,"__esModule",{value:!0});mE.ContextAPI=void 0;var nut=qEe(),H8=aE(),zEe=cE(),W8="context",iut=new nut.NoopContextManager,sut=function(){function r(){}return r.getInstance=function(){return this._instance||(this._instance=new r),this._instance},r.prototype.setGlobalContextManager=function(e){return H8.registerGlobal(W8,e,zEe.DiagAPI.instance())},r.prototype.active=function(){return this._getContextManager().active()},r.prototype.with=function(e,t,n){for(var i,s=[],o=3;o<arguments.length;o++)s[o-3]=arguments[o];return(i=this._getContextManager()).with.apply(i,rut([e,t,n],s))},r.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},r.prototype._getContextManager=function(){return H8.getGlobal(W8)||iut},r.prototype.disable=function(){this._getContextManager().disable(),H8.unregisterGlobal(W8,zEe.DiagAPI.instance())},r}();mE.ContextAPI=sut});var Q8=O(IA=>{"use strict";Object.defineProperty(IA,"__esModule",{value:!0});IA.TraceFlags=void 0;var out;(function(r){r[r.NONE=0]="NONE",r[r.SAMPLED=1]="SAMPLED"})(out=IA.TraceFlags||(IA.TraceFlags={}))});var Wj=O(mh=>{"use strict";Object.defineProperty(mh,"__esModule",{value:!0});mh.INVALID_SPAN_CONTEXT=mh.INVALID_TRACEID=mh.INVALID_SPANID=void 0;var aut=Q8();mh.INVALID_SPANID="0000000000000000";mh.INVALID_TRACEID="00000000000000000000000000000000";mh.INVALID_SPAN_CONTEXT={traceId:mh.INVALID_TRACEID,spanId:mh.INVALID_SPANID,traceFlags:aut.TraceFlags.NONE}});var Qj=O(Kj=>{"use strict";Object.defineProperty(Kj,"__esModule",{value:!0});Kj.NonRecordingSpan=void 0;var cut=Wj(),lut=function(){function r(e){e===void 0&&(e=cut.INVALID_SPAN_CONTEXT),this._spanContext=e}return r.prototype.spanContext=function(){return this._spanContext},r.prototype.setAttribute=function(e,t){return this},r.prototype.setAttributes=function(e){return this},r.prototype.addEvent=function(e,t){return this},r.prototype.setStatus=function(e){return this},r.prototype.updateName=function(e){return this},r.prototype.end=function(e){},r.prototype.isRecording=function(){return!1},r.prototype.recordException=function(e,t){},r}();Kj.NonRecordingSpan=lut});var X8=O($d=>{"use strict";Object.defineProperty($d,"__esModule",{value:!0});$d.getSpanContext=$d.setSpanContext=$d.deleteSpan=$d.setSpan=$d.getSpan=void 0;var uut=TA(),dut=Qj(),Y8=uut.createContextKey("OpenTelemetry Context Key SPAN");function FEe(r){return r.getValue(Y8)||void 0}$d.getSpan=FEe;function jEe(r,e){return r.setValue(Y8,e)}$d.setSpan=jEe;function put(r){return r.deleteValue(Y8)}$d.deleteSpan=put;function mut(r,e){return jEe(r,new dut.NonRecordingSpan(e))}$d.setSpanContext=mut;function hut(r){var e;return(e=FEe(r))===null||e===void 0?void 0:e.spanContext()}$d.getSpanContext=hut});var Yj=O(hh=>{"use strict";Object.defineProperty(hh,"__esModule",{value:!0});hh.wrapSpanContext=hh.isSpanContextValid=hh.isValidSpanId=hh.isValidTraceId=void 0;var UEe=Wj(),fut=Qj(),gut=/^([0-9a-f]{32})$/i,yut=/^[0-9a-f]{16}$/i;function BEe(r){return gut.test(r)&&r!==UEe.INVALID_TRACEID}hh.isValidTraceId=BEe;function GEe(r){return yut.test(r)&&r!==UEe.INVALID_SPANID}hh.isValidSpanId=GEe;function vut(r){return BEe(r.traceId)&&GEe(r.spanId)}hh.isSpanContextValid=vut;function but(r){return new fut.NonRecordingSpan(r)}hh.wrapSpanContext=but});var Z8=O(Xj=>{"use strict";Object.defineProperty(Xj,"__esModule",{value:!0});Xj.NoopTracer=void 0;var _ut=K8(),$Ee=X8(),J8=Qj(),Sut=Yj(),VEe=_ut.ContextAPI.getInstance(),Cut=function(){function r(){}return r.prototype.startSpan=function(e,t,n){var i=!!t?.root;if(i)return new J8.NonRecordingSpan;var s=n&&$Ee.getSpanContext(n);return Put(s)&&Sut.isSpanContextValid(s)?new J8.NonRecordingSpan(s):new J8.NonRecordingSpan},r.prototype.startActiveSpan=function(e,t,n,i){var s,o,a;if(!(arguments.length<2)){arguments.length===2?a=t:arguments.length===3?(s=t,a=n):(s=t,o=n,a=i);var c=o??VEe.active(),l=this.startSpan(e,s,c),u=$Ee.setSpan(c,l);return VEe.with(u,a,void 0,l)}},r}();Xj.NoopTracer=Cut;function Put(r){return typeof r=="object"&&typeof r.spanId=="string"&&typeof r.traceId=="string"&&typeof r.traceFlags=="number"}});var e9=O(Jj=>{"use strict";Object.defineProperty(Jj,"__esModule",{value:!0});Jj.ProxyTracer=void 0;var wut=Z8(),Eut=new wut.NoopTracer,Tut=function(){function r(e,t,n){this._provider=e,this.name=t,this.version=n}return r.prototype.startSpan=function(e,t,n){return this._getTracer().startSpan(e,t,n)},r.prototype.startActiveSpan=function(e,t,n,i){var s=this._getTracer();return Reflect.apply(s.startActiveSpan,s,arguments)},r.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version);return e?(this._delegate=e,this._delegate):Eut},r}();Jj.ProxyTracer=Tut});var HEe=O(Zj=>{"use strict";Object.defineProperty(Zj,"__esModule",{value:!0});Zj.NoopTracerProvider=void 0;var Iut=Z8(),Rut=function(){function r(){}return r.prototype.getTracer=function(e,t){return new Iut.NoopTracer},r}();Zj.NoopTracerProvider=Rut});var t9=O(eU=>{"use strict";Object.defineProperty(eU,"__esModule",{value:!0});eU.ProxyTracerProvider=void 0;var xut=e9(),Out=HEe(),Aut=new Out.NoopTracerProvider,Nut=function(){function r(){}return r.prototype.getTracer=function(e,t){var n;return(n=this.getDelegateTracer(e,t))!==null&&n!==void 0?n:new xut.ProxyTracer(this,e,t)},r.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:Aut},r.prototype.setDelegate=function(e){this._delegate=e},r.prototype.getDelegateTracer=function(e,t){var n;return(n=this._delegate)===null||n===void 0?void 0:n.getTracer(e,t)},r}();eU.ProxyTracerProvider=Nut});var KEe=O(WEe=>{"use strict";Object.defineProperty(WEe,"__esModule",{value:!0})});var QEe=O(RA=>{"use strict";Object.defineProperty(RA,"__esModule",{value:!0});RA.SamplingDecision=void 0;var Dut;(function(r){r[r.NOT_RECORD=0]="NOT_RECORD",r[r.RECORD=1]="RECORD",r[r.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(Dut=RA.SamplingDecision||(RA.SamplingDecision={}))});var XEe=O(YEe=>{"use strict";Object.defineProperty(YEe,"__esModule",{value:!0})});var JEe=O(xA=>{"use strict";Object.defineProperty(xA,"__esModule",{value:!0});xA.SpanKind=void 0;var Mut;(function(r){r[r.INTERNAL=0]="INTERNAL",r[r.SERVER=1]="SERVER",r[r.CLIENT=2]="CLIENT",r[r.PRODUCER=3]="PRODUCER",r[r.CONSUMER=4]="CONSUMER"})(Mut=xA.SpanKind||(xA.SpanKind={}))});var eTe=O(ZEe=>{"use strict";Object.defineProperty(ZEe,"__esModule",{value:!0})});var rTe=O(tTe=>{"use strict";Object.defineProperty(tTe,"__esModule",{value:!0})});var nTe=O(OA=>{"use strict";Object.defineProperty(OA,"__esModule",{value:!0});OA.SpanStatusCode=void 0;var kut;(function(r){r[r.UNSET=0]="UNSET",r[r.OK=1]="OK",r[r.ERROR=2]="ERROR"})(kut=OA.SpanStatusCode||(OA.SpanStatusCode={}))});var sTe=O(iTe=>{"use strict";Object.defineProperty(iTe,"__esModule",{value:!0})});var aTe=O(oTe=>{"use strict";Object.defineProperty(oTe,"__esModule",{value:!0})});var lTe=O(cTe=>{"use strict";Object.defineProperty(cTe,"__esModule",{value:!0})});var dTe=O(uTe=>{"use strict";Object.defineProperty(uTe,"__esModule",{value:!0})});var fTe=O(tU=>{"use strict";Object.defineProperty(tU,"__esModule",{value:!0});tU.TraceAPI=void 0;var r9=aE(),pTe=t9(),mTe=Yj(),AA=X8(),hTe=cE(),n9="trace",Lut=function(){function r(){this._proxyTracerProvider=new pTe.ProxyTracerProvider,this.wrapSpanContext=mTe.wrapSpanContext,this.isSpanContextValid=mTe.isSpanContextValid,this.deleteSpan=AA.deleteSpan,this.getSpan=AA.getSpan,this.getSpanContext=AA.getSpanContext,this.setSpan=AA.setSpan,this.setSpanContext=AA.setSpanContext}return r.getInstance=function(){return this._instance||(this._instance=new r),this._instance},r.prototype.setGlobalTracerProvider=function(e){var t=r9.registerGlobal(n9,this._proxyTracerProvider,hTe.DiagAPI.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},r.prototype.getTracerProvider=function(){return r9.getGlobal(n9)||this._proxyTracerProvider},r.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},r.prototype.disable=function(){r9.unregisterGlobal(n9,hTe.DiagAPI.instance()),this._proxyTracerProvider=new pTe.ProxyTracerProvider},r}();tU.TraceAPI=Lut});var gTe=O(rU=>{"use strict";Object.defineProperty(rU,"__esModule",{value:!0});rU.NoopTextMapPropagator=void 0;var qut=function(){function r(){}return r.prototype.inject=function(e,t){},r.prototype.extract=function(e,t){return e},r.prototype.fields=function(){return[]},r}();rU.NoopTextMapPropagator=qut});var yTe=O(sv=>{"use strict";Object.defineProperty(sv,"__esModule",{value:!0});sv.deleteBaggage=sv.setBaggage=sv.getBaggage=void 0;var zut=TA(),i9=zut.createContextKey("OpenTelemetry Baggage Key");function Fut(r){return r.getValue(i9)||void 0}sv.getBaggage=Fut;function jut(r,e){return r.setValue(i9,e)}sv.setBaggage=jut;function Uut(r){return r.deleteValue(i9)}sv.deleteBaggage=Uut});var _Te=O(nU=>{"use strict";Object.defineProperty(nU,"__esModule",{value:!0});nU.PropagationAPI=void 0;var s9=aE(),But=gTe(),vTe=V8(),o9=yTe(),Gut=G8(),bTe=cE(),a9="propagation",$ut=new But.NoopTextMapPropagator,Vut=function(){function r(){this.createBaggage=Gut.createBaggage,this.getBaggage=o9.getBaggage,this.setBaggage=o9.setBaggage,this.deleteBaggage=o9.deleteBaggage}return r.getInstance=function(){return this._instance||(this._instance=new r),this._instance},r.prototype.setGlobalPropagator=function(e){return s9.registerGlobal(a9,e,bTe.DiagAPI.instance())},r.prototype.inject=function(e,t,n){return n===void 0&&(n=vTe.defaultTextMapSetter),this._getGlobalPropagator().inject(e,t,n)},r.prototype.extract=function(e,t,n){return n===void 0&&(n=vTe.defaultTextMapGetter),this._getGlobalPropagator().extract(e,t,n)},r.prototype.fields=function(){return this._getGlobalPropagator().fields()},r.prototype.disable=function(){s9.unregisterGlobal(a9,bTe.DiagAPI.instance())},r.prototype._getGlobalPropagator=function(){return s9.getGlobal(a9)||$ut},r}();nU.PropagationAPI=Vut});var STe=O(sn=>{"use strict";var Hut=sn&&sn.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),qo=sn&&sn.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Hut(e,r,t)};Object.defineProperty(sn,"__esModule",{value:!0});sn.diag=sn.propagation=sn.trace=sn.context=sn.INVALID_SPAN_CONTEXT=sn.INVALID_TRACEID=sn.INVALID_SPANID=sn.isValidSpanId=sn.isValidTraceId=sn.isSpanContextValid=sn.baggageEntryMetadataFromString=void 0;qo(fEe(),sn);var Wut=G8();Object.defineProperty(sn,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return Wut.baggageEntryMetadataFromString}});qo(IEe(),sn);qo(xEe(),sn);qo(NEe(),sn);qo(V8(),sn);qo(MEe(),sn);qo(LEe(),sn);qo(e9(),sn);qo(t9(),sn);qo(KEe(),sn);qo(QEe(),sn);qo(XEe(),sn);qo(JEe(),sn);qo(eTe(),sn);qo(rTe(),sn);qo(nTe(),sn);qo(Q8(),sn);qo(sTe(),sn);qo(aTe(),sn);qo(lTe(),sn);var c9=Yj();Object.defineProperty(sn,"isSpanContextValid",{enumerable:!0,get:function(){return c9.isSpanContextValid}});Object.defineProperty(sn,"isValidTraceId",{enumerable:!0,get:function(){return c9.isValidTraceId}});Object.defineProperty(sn,"isValidSpanId",{enumerable:!0,get:function(){return c9.isValidSpanId}});var l9=Wj();Object.defineProperty(sn,"INVALID_SPANID",{enumerable:!0,get:function(){return l9.INVALID_SPANID}});Object.defineProperty(sn,"INVALID_TRACEID",{enumerable:!0,get:function(){return l9.INVALID_TRACEID}});Object.defineProperty(sn,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return l9.INVALID_SPAN_CONTEXT}});qo(TA(),sn);qo(dTe(),sn);var Kut=K8();sn.context=Kut.ContextAPI.getInstance();var Qut=fTe();sn.trace=Qut.TraceAPI.getInstance();var Yut=_Te();sn.propagation=Yut.PropagationAPI.getInstance();var Xut=cE();sn.diag=Xut.DiagAPI.instance();sn.default={trace:sn.trace,context:sn.context,propagation:sn.propagation,diag:sn.diag}});var TTe=O(Sc=>{"use strict";Object.defineProperty(Sc,"__esModule",{value:!0});var ng=STe();(function(r){r[r.INTERNAL=0]="INTERNAL",r[r.SERVER=1]="SERVER",r[r.CLIENT=2]="CLIENT",r[r.PRODUCER=3]="PRODUCER",r[r.CONSUMER=4]="CONSUMER"})(Sc.SpanKind||(Sc.SpanKind={}));function Jut(r){return ng.trace.getSpan(r)}function CTe(r,e){return ng.trace.setSpan(r,e)}function Zut(r,e){return ng.trace.setSpanContext(r,e)}function edt(r){return ng.trace.getSpanContext(r)}function tdt(r){return ng.trace.isSpanContextValid(r)}function PTe(r,e){return ng.trace.getTracer(r||"azure/core-tracing",e)}var wTe=ng.context;(function(r){r[r.UNSET=0]="UNSET",r[r.OK=1]="OK",r[r.ERROR=2]="ERROR"})(Sc.SpanStatusCode||(Sc.SpanStatusCode={}));function rdt(){var r;if(typeof process>"u")return!1;let e=(r=process.env.AZURE_TRACING_DISABLED)===null||r===void 0?void 0:r.toLowerCase();return e==="false"||e==="0"?!1:!!e}function ndt(r){return function(e,t){let n=PTe(),i=t?.tracingOptions||{},s=Object.assign({kind:Sc.SpanKind.INTERNAL},i.spanOptions),o=r.packagePrefix?`${r.packagePrefix}.${e}`:e,a;rdt()?a=ng.trace.wrapSpanContext(ng.INVALID_SPAN_CONTEXT):a=n.startSpan(o,s,i.tracingContext),r.namespace&&a.setAttribute("az.namespace",r.namespace);let c=i.spanOptions||{};a.isRecording()&&r.namespace&&(c=Object.assign(Object.assign({},i.spanOptions),{attributes:Object.assign(Object.assign({},s.attributes),{"az.namespace":r.namespace})}));let l=Object.assign(Object.assign({},i),{spanOptions:c,tracingContext:CTe(i.tracingContext||wTe.active(),a)}),u=Object.assign(Object.assign({},t),{tracingOptions:l});return{span:a,updatedOptions:u}}}var ETe="00";function idt(r){let e=r.split("-");if(e.length!==4)return;let[t,n,i,s]=e;if(t!==ETe)return;let o=parseInt(s,16);return{spanId:i,traceId:n,traceFlags:o}}function sdt(r){let e=[];if(r.traceId||e.push("traceId"),r.spanId||e.push("spanId"),e.length)return;let n=(r.traceFlags||0).toString(16),i=n.length===1?`0${n}`:n;return`${ETe}-${r.traceId}-${r.spanId}-${i}`}Sc.context=wTe;Sc.createSpanFunction=ndt;Sc.extractSpanContextFromTraceParentHeader=idt;Sc.getSpan=Jut;Sc.getSpanContext=edt;Sc.getTraceParentHeader=sdt;Sc.getTracer=PTe;Sc.isSpanContextValid=tdt;Sc.setSpan=CTe;Sc.setSpanContext=Zut});function NA(){return iU>sU.length-16&&(ITe.default.randomFillSync(sU),iU=0),sU.slice(iU,iU+=16)}var ITe,sU,iU,u9=si(()=>{ITe=ge(require("crypto")),sU=new Uint8Array(256),iU=sU.length});var RTe,xTe=si(()=>{RTe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function odt(r){return typeof r=="string"&&RTe.test(r)}var ov,DA=si(()=>{xTe();ov=odt});function adt(r,e=0){let t=(Cc[r[e+0]]+Cc[r[e+1]]+Cc[r[e+2]]+Cc[r[e+3]]+"-"+Cc[r[e+4]]+Cc[r[e+5]]+"-"+Cc[r[e+6]]+Cc[r[e+7]]+"-"+Cc[r[e+8]]+Cc[r[e+9]]+"-"+Cc[r[e+10]]+Cc[r[e+11]]+Cc[r[e+12]]+Cc[r[e+13]]+Cc[r[e+14]]+Cc[r[e+15]]).toLowerCase();if(!ov(t))throw TypeError("Stringified UUID is invalid");return t}var Cc,av,MA=si(()=>{DA();Cc=[];for(let r=0;r<256;++r)Cc.push((r+256).toString(16).substr(1));av=adt});function cdt(r,e,t){let n=e&&t||0,i=e||new Array(16);r=r||{};let s=r.node||OTe,o=r.clockseq!==void 0?r.clockseq:d9;if(s==null||o==null){let p=r.random||(r.rng||NA)();s==null&&(s=OTe=[p[0]|1,p[1],p[2],p[3],p[4],p[5]]),o==null&&(o=d9=(p[6]<<8|p[7])&16383)}let a=r.msecs!==void 0?r.msecs:Date.now(),c=r.nsecs!==void 0?r.nsecs:m9+1,l=a-p9+(c-m9)/1e4;if(l<0&&r.clockseq===void 0&&(o=o+1&16383),(l<0||a>p9)&&r.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");p9=a,m9=c,d9=o,a+=122192928e5;let u=((a&268435455)*1e4+c)%4294967296;i[n++]=u>>>24&255,i[n++]=u>>>16&255,i[n++]=u>>>8&255,i[n++]=u&255;let d=a/4294967296*1e4&268435455;i[n++]=d>>>8&255,i[n++]=d&255,i[n++]=d>>>24&15|16,i[n++]=d>>>16&255,i[n++]=o>>>8|128,i[n++]=o&255;for(let p=0;p<6;++p)i[n+p]=s[p];return e||av(i)}var OTe,d9,p9,m9,ATe,NTe=si(()=>{u9();MA();p9=0,m9=0;ATe=cdt});function ldt(r){if(!ov(r))throw TypeError("Invalid UUID");let e,t=new Uint8Array(16);return t[0]=(e=parseInt(r.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(r.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(r.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(r.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(r.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}var oU,h9=si(()=>{DA();oU=ldt});function udt(r){r=unescape(encodeURIComponent(r));let e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t));return e}function aU(r,e,t){function n(i,s,o,a){if(typeof i=="string"&&(i=udt(i)),typeof s=="string"&&(s=oU(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+i.length);if(c.set(s),c.set(i,s.length),c=t(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,o){a=a||0;for(let l=0;l<16;++l)o[a+l]=c[l];return o}return av(c)}try{n.name=r}catch{}return n.DNS=ddt,n.URL=pdt,n}var ddt,pdt,f9=si(()=>{MA();h9();ddt="6ba7b810-9dad-11d1-80b4-00c04fd430c8",pdt="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function mdt(r){return Array.isArray(r)?r=Buffer.from(r):typeof r=="string"&&(r=Buffer.from(r,"utf8")),DTe.default.createHash("md5").update(r).digest()}var DTe,MTe,kTe=si(()=>{DTe=ge(require("crypto"));MTe=mdt});var hdt,LTe,qTe=si(()=>{f9();kTe();hdt=aU("v3",48,MTe),LTe=hdt});function fdt(r,e,t){r=r||{};let n=r.random||(r.rng||NA)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(let i=0;i<16;++i)e[t+i]=n[i];return e}return av(n)}var zTe,FTe=si(()=>{u9();MA();zTe=fdt});function gdt(r){return Array.isArray(r)?r=Buffer.from(r):typeof r=="string"&&(r=Buffer.from(r,"utf8")),jTe.default.createHash("sha1").update(r).digest()}var jTe,UTe,BTe=si(()=>{jTe=ge(require("crypto"));UTe=gdt});var ydt,GTe,$Te=si(()=>{f9();BTe();ydt=aU("v5",80,UTe),GTe=ydt});var VTe,HTe=si(()=>{VTe="00000000-0000-0000-0000-000000000000"});function vdt(r){if(!ov(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}var WTe,KTe=si(()=>{DA();WTe=vdt});var QTe={};Ea(QTe,{NIL:()=>VTe,parse:()=>oU,stringify:()=>av,v1:()=>ATe,v3:()=>LTe,v4:()=>zTe,v5:()=>GTe,validate:()=>ov,version:()=>WTe});var YTe=si(()=>{NTe();qTe();FTe();$Te();HTe();KTe();DA();MA();h9()});var zA=O(di=>{"use strict";Object.defineProperty(di,"__esModule",{value:!0});var bdt=d8(),o0e=lu(),LA=C8(),cS=require("url"),_dt=cEe(),Sdt=mEe(),hE=TTe(),Cdt=require("os"),Pdt=require("http"),wdt=require("https"),Edt=require("zlib"),Tdt=require("stream"),Idt=require("util"),Rdt=(YTe(),da(QTe));function xdt(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}function pU(r){if(r&&r.__esModule)return r;var e=Object.create(null);return r&&Object.keys(r).forEach(function(t){if(t!=="default"){var n=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:function(){return r[t]}})}}),e.default=r,Object.freeze(e)}var Odt=xdt(bdt),g9=pU(Cdt),y9=pU(Pdt),v9=pU(wdt),XTe=pU(Edt),JTe=new Set(["Deserialize","Serialize","Retry","Sign"]),P9=class r{constructor(e=[]){this._policies=[],this._policies=e,this._orderedPolicies=void 0}addPolicy(e,t={}){if(t.phase&&t.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(t.phase&&!JTe.has(t.phase))throw new Error(`Invalid phase name: ${t.phase}`);if(t.afterPhase&&!JTe.has(t.afterPhase))throw new Error(`Invalid afterPhase name: ${t.afterPhase}`);this._policies.push({policy:e,options:t}),this._orderedPolicies=void 0}removePolicy(e){let t=[];return this._policies=this._policies.filter(n=>e.name&&n.policy.name===e.name||e.phase&&n.options.phase===e.phase?(t.push(n.policy),!1):!0),this._orderedPolicies=void 0,t}sendRequest(e,t){return this.getOrderedPolicies().reduceRight((s,o)=>a=>o.sendRequest(a,s),s=>e.sendRequest(s))(t)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new r(this._policies)}static create(){return new r}orderPolicies(){let e=[],t=new Map;function n(f){return{name:f,policies:new Set,hasRun:!1}}let i=n("Serialize"),s=n("None"),o=n("Deserialize"),a=n("Retry"),c=n("Sign"),l=[i,s,o,a,c];function u(f){return f==="Retry"?a:f==="Serialize"?i:f==="Deserialize"?o:f==="Sign"?c:s}for(let f of this._policies){let y=f.policy,v=f.options,_=y.name;if(t.has(_))throw new Error("Duplicate policy names not allowed in pipeline");let C={policy:y,dependsOn:new Set,dependants:new Set};v.afterPhase&&(C.afterPhase=u(v.afterPhase)),t.set(_,C),u(v.phase).policies.add(C)}for(let f of this._policies){let{policy:y,options:v}=f,_=y.name,C=t.get(_);if(!C)throw new Error(`Missing node for policy ${_}`);if(v.afterPolicies)for(let P of v.afterPolicies){let w=t.get(P);w&&(C.dependsOn.add(w),w.dependants.add(C))}if(v.beforePolicies)for(let P of v.beforePolicies){let w=t.get(P);w&&(w.dependsOn.add(C),C.dependants.add(w))}}function d(f){f.hasRun=!0;for(let y of f.policies)if(!(y.afterPhase&&(!y.afterPhase.hasRun||y.afterPhase.policies.size))&&y.dependsOn.size===0){e.push(y.policy);for(let v of y.dependants)v.dependsOn.delete(y);t.delete(y.policy.name),f.policies.delete(y)}}function p(){for(let f of l)if(d(f),f.policies.size>0&&f!==s){s.hasRun||d(s);return}}let m=0;for(;t.size>0;){m++;let f=e.length;if(p(),e.length<=f&&m>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return e}};function a0e(){return P9.create()}var c0e="decompressResponsePolicy";function l0e(){return{name:c0e,async sendRequest(r,e){return r.method!=="HEAD"&&r.headers.set("Accept-Encoding","gzip,deflate"),e(r)}}}var u0e="formDataPolicy";function d0e(){return{name:u0e,async sendRequest(r,e){if(r.formData){let t=r.headers.get("Content-Type");t&&t.indexOf("application/x-www-form-urlencoded")!==-1?(r.body=Adt(r.formData),r.formData=void 0):Ndt(r.formData,r)}return e(r)}}}function Adt(r){let e=new URLSearchParams;for(let[t,n]of Object.entries(r))if(Array.isArray(n))for(let i of n)e.append(t,i.toString());else e.append(t,n.toString());return e.toString()}async function Ndt(r,e){let t=new Odt.default;for(let i of Object.keys(r)){let s=r[i];if(Array.isArray(s))for(let o of s)t.append(i,o);else t.append(i,s)}e.body=t,e.formData=void 0;let n=e.headers.get("Content-Type");n&&n.indexOf("multipart/form-data")!==-1&&e.headers.set("Content-Type",`multipart/form-data; boundary=${t.getBoundary()}`);try{let i=await new Promise((s,o)=>{t.getLength((a,c)=>{a?o(a):s(c)})});e.headers.set("Content-Length",i)}catch{}}var cv=o0e.createClientLogger("core-rest-pipeline"),b9,ZTe=typeof process<"u"&&!!process.version&&!!(!((b9=process.versions)===null||b9===void 0)&&b9.node),Ddt="The operation was aborted.";function p0e(r,e,t){return new Promise((n,i)=>{let s,o,a=()=>i(new LA.AbortError(t?.abortErrorMsg?t?.abortErrorMsg:Ddt)),c=()=>{t?.abortSignal&&o&&t.abortSignal.removeEventListener("abort",o)};if(o=()=>(s&&clearTimeout(s),c(),a()),t?.abortSignal&&t.abortSignal.aborted)return a();s=setTimeout(()=>{c(),n(e)},r),t?.abortSignal&&t.abortSignal.addEventListener("abort",o)})}function Mdt(r,e){return r=Math.ceil(r),e=Math.floor(e),Math.floor(Math.random()*(e-r+1))+r}function kdt(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)&&!(r instanceof RegExp)&&!(r instanceof Date)}function Ldt(r,e){let t=r.headers.get(e);if(!t)return;let n=Number(t);if(!Number.isNaN(n))return n}var _9="REDACTED",qdt=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],zdt=["api-version"],uU=class{constructor({additionalAllowedHeaderNames:e=[],additionalAllowedQueryParameters:t=[]}={}){e=qdt.concat(e),t=zdt.concat(t),this.allowedHeaderNames=new Set(e.map(n=>n.toLowerCase())),this.allowedQueryParameters=new Set(t.map(n=>n.toLowerCase()))}sanitize(e){let t=new Set;return JSON.stringify(e,(n,i)=>{if(i instanceof Error)return Object.assign(Object.assign({},i),{name:i.name,message:i.message});if(n==="headers")return this.sanitizeHeaders(i);if(n==="url")return this.sanitizeUrl(i);if(n==="query")return this.sanitizeQuery(i);if(n==="body")return;if(n==="response")return;if(n==="operationSpec")return;if(Array.isArray(i)||kdt(i)){if(t.has(i))return"[Circular]";t.add(i)}return i},2)}sanitizeHeaders(e){let t={};for(let n of Object.keys(e))this.allowedHeaderNames.has(n.toLowerCase())?t[n]=e[n]:t[n]=_9;return t}sanitizeQuery(e){if(typeof e!="object"||e===null)return e;let t={};for(let n of Object.keys(e))this.allowedQueryParameters.has(n.toLowerCase())?t[n]=e[n]:t[n]=_9;return t}sanitizeUrl(e){if(typeof e!="string"||e===null)return e;let t=new cS.URL(e);if(!t.search)return e;for(let[n]of t.searchParams)this.allowedQueryParameters.has(n.toLowerCase())||t.searchParams.set(n,_9);return t.toString()}},m0e="logPolicy";function h0e(r={}){var e;let t=(e=r.logger)!==null&&e!==void 0?e:cv.info,n=new uU({additionalAllowedHeaderNames:r.additionalAllowedHeaderNames,additionalAllowedQueryParameters:r.additionalAllowedQueryParameters});return{name:m0e,async sendRequest(i,s){if(!t.enabled)return s(i);t(`Request: ${n.sanitize(i)}`);let o=await s(i);return t(`Response status code: ${o.status}`),t(`Headers: ${n.sanitize(o.headers)}`),o}}}var Fdt="HTTPS_PROXY",jdt="HTTP_PROXY",Udt="ALL_PROXY",Bdt="NO_PROXY",f0e="proxyPolicy",e0e=[],g0e=!1,Gdt=new Map,S9,C9;function lU(r){if(process.env[r])return process.env[r];if(process.env[r.toLowerCase()])return process.env[r.toLowerCase()]}function $dt(){if(!process)return;let r=lU(Fdt),e=lU(Udt),t=lU(jdt);return r||e||t}function Vdt(r,e,t){if(e.length===0)return!1;let n=new cS.URL(r).hostname;if(t?.has(n))return t.get(n);let i=!1;for(let s of e)s[0]==="."?(n.endsWith(s)||n.length===s.length-1&&n===s.slice(1))&&(i=!0):n===s&&(i=!0);return t?.set(n,i),i}function Hdt(){let r=lU(Bdt);return g0e=!0,r?r.split(",").map(e=>e.trim()).filter(e=>e.length):[]}function y0e(r){if(!r&&(r=$dt(),!r))return;let e=new cS.URL(r);return{host:(e.protocol?e.protocol+"//":"")+e.hostname,port:Number.parseInt(e.port||"80"),username:e.username,password:e.password}}function t0e(r,e){let t;try{t=new cS.URL(r.host)}catch{throw new Error(`Expecting a valid host string in proxy settings, but found "${r.host}".`)}let n={hostname:t.hostname,port:r.port,protocol:t.protocol,headers:e.toJSON()};return r.username&&r.password?n.auth=`${r.username}:${r.password}`:r.username&&(n.auth=`${r.username}`),n}function Wdt(r){let t=new cS.URL(r.url).protocol!=="https:",n=r.proxySettings;if(n)if(t){if(!C9){let i=t0e(n,r.headers);C9=new Sdt.HttpProxyAgent(i)}r.agent=C9}else{if(!S9){let i=t0e(n,r.headers);S9=new _dt.HttpsProxyAgent(i)}r.agent=S9}}function v0e(r=y0e(),e){return g0e||e0e.push(...Hdt()),{name:f0e,async sendRequest(t,n){var i;return!t.proxySettings&&!Vdt(t.url,(i=e?.customNoProxyList)!==null&&i!==void 0?i:e0e,e?.customNoProxyList?void 0:Gdt)&&(t.proxySettings=r),t.proxySettings&&Wdt(t),n(t)}}}var b0e="redirectPolicy",r0e=["GET","HEAD"];function _0e(r={}){let{maxRetries:e=20}=r;return{name:b0e,async sendRequest(t,n){let i=await n(t);return S0e(n,i,e)}}}async function S0e(r,e,t,n=0){let{request:i,status:s,headers:o}=e,a=o.get("location");if(a&&(s===300||s===301&&r0e.includes(i.method)||s===302&&r0e.includes(i.method)||s===303&&i.method==="POST"||s===307)&&n<t){let c=new cS.URL(a,i.url);i.url=c.toString(),s===303&&(i.method="GET",i.headers.delete("Content-Length"),delete i.body),i.headers.delete("Authorization");let l=await r(i);return S0e(r,l,t,n+1)}return e}var C0e="setClientRequestIdPolicy";function P0e(r="x-ms-client-request-id"){return{name:C0e,async sendRequest(e,t){return e.headers.has(r)||e.headers.set(r,e.requestId),t(e)}}}function Kdt(){return"User-Agent"}function Qdt(r){r.set("Node",process.version),r.set("OS",`(${g9.arch()}-${g9.type()}-${g9.release()})`)}var Ydt="1.8.0",fE=3;function Xdt(r){let e=[];for(let[t,n]of r){let i=n?`${t}/${n}`:t;e.push(i)}return e.join(" ")}function Jdt(){return Kdt()}function w0e(r){let e=new Map;e.set("core-rest-pipeline",Ydt),Qdt(e);let t=Xdt(e);return r?`${r} ${t}`:t}var Zdt=hE.createSpanFunction({packagePrefix:"",namespace:""}),E0e="tracingPolicy";function T0e(r={}){let e=w0e(r.userAgentPrefix);return{name:E0e,async sendRequest(t,n){var i;if(!(!((i=t.tracingOptions)===null||i===void 0)&&i.tracingContext))return n(t);let s=ept(t,e);if(!s)return n(t);try{let o=await n(t);return rpt(s,o),o}catch(o){throw tpt(s,o),o}}}}function ept(r,e){var t,n,i;try{let s=Object.assign(Object.assign({},(t=r.tracingOptions)===null||t===void 0?void 0:t.spanOptions),{kind:hE.SpanKind.CLIENT}),{span:o}=Zdt(`HTTP ${r.method}`,{tracingOptions:Object.assign(Object.assign({},r.tracingOptions),{spanOptions:s})});if(!o.isRecording()){o.end();return}let a=(i=(n=r.tracingOptions)===null||n===void 0?void 0:n.tracingContext)===null||i===void 0?void 0:i.getValue(Symbol.for("az.namespace"));typeof a=="string"&&o.setAttribute("az.namespace",a),o.setAttributes({"http.method":r.method,"http.url":r.url,requestId:r.requestId}),e&&o.setAttribute("http.user_agent",e);let c=o.spanContext(),l=hE.getTraceParentHeader(c);if(l&&hE.isSpanContextValid(c)){r.headers.set("traceparent",l);let u=c.traceState&&c.traceState.serialize();u&&r.headers.set("tracestate",u)}return o}catch(s){cv.warning(`Skipping creating a tracing span due to an error: ${s.message}`);return}}function tpt(r,e){try{r.setStatus({code:hE.SpanStatusCode.ERROR,message:e.message}),e.statusCode&&r.setAttribute("http.status_code",e.statusCode),r.end()}catch(t){cv.warning(`Skipping tracing span processing due to an error: ${t.message}`)}}function rpt(r,e){try{r.setAttribute("http.status_code",e.status);let t=e.headers.get("x-ms-request-id");t&&r.setAttribute("serviceRequestId",t),r.setStatus({code:hE.SpanStatusCode.OK}),r.end()}catch(t){cv.warning(`Skipping tracing span processing due to an error: ${t.message}`)}}var n0e=Jdt(),I0e="userAgentPolicy";function R0e(r={}){let e=w0e(r.userAgentPrefix);return{name:I0e,async sendRequest(t,n){return t.headers.has(n0e)||t.headers.set(n0e,e),n(t)}}}var w9="Retry-After",npt=["retry-after-ms","x-ms-retry-after-ms",w9];function x0e(r){if(r&&[429,503].includes(r.status))try{for(let i of npt){let s=Ldt(r,i);if(s===0||s)return s*(i===w9?1e3:1)}let e=r.headers.get(w9);if(!e)return;let n=Date.parse(e)-Date.now();return Number.isFinite(n)?Math.max(0,n):void 0}catch{return}}function ipt(r){return Number.isFinite(x0e(r))}function O0e(){return{name:"throttlingRetryStrategy",retry({response:r}){let e=x0e(r);return Number.isFinite(e)?{retryAfterInMs:e}:{skipStrategy:!0}}}}var spt=1e3,opt=1e3*64;function R9(r={}){var e,t;let n=(e=r.retryDelayInMs)!==null&&e!==void 0?e:spt,i=(t=r.maxRetryDelayInMs)!==null&&t!==void 0?t:opt,s=n;return{name:"exponentialRetryStrategy",retry({retryCount:o,response:a,responseError:c}){let l=cpt(c),u=l&&r.ignoreSystemErrors,d=apt(a),p=d&&r.ignoreHttpStatusCodes;if(a&&(ipt(a)||!d)||p||u)return{skipStrategy:!0};if(c&&!l&&!d)return{errorToThrow:c};let f=s*Math.pow(2,o),y=Math.min(i,f);return s=y/2+Mdt(0,y/2),{retryAfterInMs:s}}}}function apt(r){return!!(r&&r.status!==void 0&&(r.status>=500||r.status===408)&&r.status!==501&&r.status!==505)}function cpt(r){return r?r.code==="ETIMEDOUT"||r.code==="ESOCKETTIMEDOUT"||r.code==="ECONNREFUSED"||r.code==="ECONNRESET"||r.code==="ENOENT":!1}var i0e=o0e.createClientLogger("core-rest-pipeline retryPolicy"),lpt="retryPolicy";function qA(r,e={maxRetries:fE}){let t=e.logger||i0e;return{name:lpt,async sendRequest(n,i){var s,o;let a,c,l=-1;e:for(;;){l+=1,a=void 0,c=void 0;try{t.info(`Retry ${l}: Attempting to send request`,n.requestId),a=await i(n),t.info(`Retry ${l}: Received a response from request`,n.requestId)}catch(u){if(t.error(`Retry ${l}: Received an error from request`,n.requestId),c=u,!u||c.name!=="RestError")throw u;a=c.response}if(!((s=n.abortSignal)===null||s===void 0)&&s.aborted)throw t.error(`Retry ${l}: Request aborted.`),new LA.AbortError;if(l>=((o=e.maxRetries)!==null&&o!==void 0?o:fE)){if(t.info(`Retry ${l}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),c)throw c;if(a)return a;throw new Error("Maximum retries reached with no response or error to throw")}t.info(`Retry ${l}: Processing ${r.length} retry strategies.`);t:for(let u of r){let d=u.logger||i0e;d.info(`Retry ${l}: Processing retry strategy ${u.name}.`);let p=u.retry({retryCount:l,response:a,responseError:c});if(p.skipStrategy){d.info(`Retry ${l}: Skipped.`);continue t}let{errorToThrow:m,retryAfterInMs:f,redirectTo:y}=p;if(m)throw d.error(`Retry ${l}: Retry strategy ${u.name} throws error:`,m),m;if(f||f===0){d.info(`Retry ${l}: Retry strategy ${u.name} retries after ${f}`),await p0e(f,void 0,{abortSignal:n.abortSignal});continue e}if(y){d.info(`Retry ${l}: Retry strategy ${u.name} redirects to ${y}`),n.url=y;continue e}}if(c)throw t.info("None of the retry strategies could work with the received error. Throwing it."),c;if(a)return t.info("None of the retry strategies could work with the received response. Returning it."),a}}}}var upt="defaultRetryPolicy";function A0e(r={}){var e;return{name:upt,sendRequest:qA([O0e(),R9(r)],{maxRetries:(e=r.maxRetries)!==null&&e!==void 0?e:fE}).sendRequest}}function dpt(r){let e=a0e();return ZTe&&(e.addPolicy(v0e(r.proxyOptions)),e.addPolicy(l0e())),e.addPolicy(d0e()),e.addPolicy(R0e(r.userAgentOptions)),e.addPolicy(P0e()),e.addPolicy(A0e(r.retryOptions),{phase:"Retry"}),e.addPolicy(T0e(r.userAgentOptions),{afterPhase:"Retry"}),ZTe&&e.addPolicy(_0e(r.redirectOptions),{afterPhase:"Retry"}),e.addPolicy(h0e(r.loggingOptions),{afterPhase:"Retry"}),e}function cU(r){return r.toLowerCase()}function*ppt(r){for(let e of r.values())yield[e.name,e.value]}var E9=class{constructor(e){if(this._headersMap=new Map,e)for(let t of Object.keys(e))this.set(t,e[t])}set(e,t){this._headersMap.set(cU(e),{name:e,value:String(t)})}get(e){var t;return(t=this._headersMap.get(cU(e)))===null||t===void 0?void 0:t.value}has(e){return this._headersMap.has(cU(e))}delete(e){this._headersMap.delete(cU(e))}toJSON(e={}){let t={};if(e.preserveCase)for(let n of this._headersMap.values())t[n.name]=n.value;else for(let[n,i]of this._headersMap)t[n]=i.value;return t}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return ppt(this._headersMap)}};function x9(r){return new E9(r)}var mpt=Idt.inspect.custom,hpt=new uU,fh=class r extends Error{constructor(e,t={}){super(e),this.name="RestError",this.code=t.code,this.statusCode=t.statusCode,this.request=t.request,this.response=t.response,Object.setPrototypeOf(this,r.prototype)}[mpt](){return`RestError: ${this.message} 
 ${hpt.sanitize(this)}`}};fh.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR";fh.PARSE_ERROR="PARSE_ERROR";function kA(r){return r&&typeof r.pipe=="function"}function s0e(r){return new Promise(e=>{r.on("close",e),r.on("end",e),r.on("error",e)})}function N0e(r){return r&&typeof r.byteLength=="number"}var dU=class extends Tdt.Transform{constructor(e){super(),this.loadedBytes=0,this.progressCallback=e}_transform(e,t,n){this.push(e),this.loadedBytes+=e.length;try{this.progressCallback({loadedBytes:this.loadedBytes}),n()}catch(i){n(i)}}},T9=class{async sendRequest(e){var t,n,i;let s=new LA.AbortController,o;if(e.abortSignal){if(e.abortSignal.aborted)throw new LA.AbortError("The operation was aborted.");o=d=>{d.type==="abort"&&s.abort()},e.abortSignal.addEventListener("abort",o)}e.timeout>0&&setTimeout(()=>{s.abort()},e.timeout);let a=e.headers.get("Accept-Encoding"),c=a?.includes("gzip")||a?.includes("deflate"),l=typeof e.body=="function"?e.body():e.body;if(l&&!e.headers.has("Content-Length")){let d=vpt(l);d!==null&&e.headers.set("Content-Length",d)}let u;try{if(l&&e.onUploadProgress){let v=e.onUploadProgress,_=new dU(v);_.on("error",C=>{cv.error("Error in upload progress",C)}),kA(l)?l.pipe(_):_.end(l),l=_}let d=await this.makeRequest(e,s,l),p=fpt(d),f={status:(t=d.statusCode)!==null&&t!==void 0?t:0,headers:p,request:e};if(e.method==="HEAD")return d.destroy(),f;u=c?gpt(d,p):d;let y=e.onDownloadProgress;if(y){let v=new dU(y);v.on("error",_=>{cv.error("Error in download progress",_)}),u.pipe(v),u=v}return!((n=e.streamResponseStatusCodes)===null||n===void 0)&&n.has(Number.POSITIVE_INFINITY)||!((i=e.streamResponseStatusCodes)===null||i===void 0)&&i.has(f.status)?f.readableStreamBody=u:f.bodyAsText=await ypt(u),f}finally{if(e.abortSignal&&o){let d=Promise.resolve();kA(l)&&(d=s0e(l));let p=Promise.resolve();kA(u)&&(p=s0e(u)),Promise.all([d,p]).then(()=>{var m;o&&((m=e.abortSignal)===null||m===void 0||m.removeEventListener("abort",o))}).catch(m=>{cv.warning("Error when cleaning up abortListener on httpRequest",m)})}}}makeRequest(e,t,n){var i;let s=new cS.URL(e.url),o=s.protocol!=="https:";if(o&&!e.allowInsecureConnection)throw new Error(`Cannot connect to ${e.url} while allowInsecureConnection is false.`);let c={agent:(i=e.agent)!==null&&i!==void 0?i:this.getOrCreateAgent(e,o),hostname:s.hostname,path:`${s.pathname}${s.search}`,port:s.port,method:e.method,headers:e.headers.toJSON({preserveCase:!0})};return new Promise((l,u)=>{let d=o?y9.request(c,l):v9.request(c,l);d.once("error",p=>{var m;u(new fh(p.message,{code:(m=p.code)!==null&&m!==void 0?m:fh.REQUEST_SEND_ERROR,request:e}))}),t.signal.addEventListener("abort",()=>{let p=new LA.AbortError("The operation was aborted.");d.destroy(p),u(p)}),n&&kA(n)?n.pipe(d):n?typeof n=="string"||Buffer.isBuffer(n)?d.end(n):N0e(n)?d.end(ArrayBuffer.isView(n)?Buffer.from(n.buffer):Buffer.from(n)):(cv.error("Unrecognized body type",n),u(new fh("Unrecognized body type"))):d.end()})}getOrCreateAgent(e,t){return e.disableKeepAlive?t?y9.globalAgent:v9.globalAgent:t?(this.httpKeepAliveAgent||(this.httpKeepAliveAgent=new y9.Agent({keepAlive:!0})),this.httpKeepAliveAgent):(this.httpsKeepAliveAgent||(this.httpsKeepAliveAgent=new v9.Agent({keepAlive:!0})),this.httpsKeepAliveAgent)}};function fpt(r){let e=x9();for(let t of Object.keys(r.headers)){let n=r.headers[t];Array.isArray(n)?n.length>0&&e.set(t,n[0]):n&&e.set(t,n)}return e}function gpt(r,e){let t=e.get("Content-Encoding");if(t==="gzip"){let n=XTe.createGunzip();return r.pipe(n),n}else if(t==="deflate"){let n=XTe.createInflate();return r.pipe(n),n}return r}function ypt(r){return new Promise((e,t)=>{let n=[];r.on("data",i=>{Buffer.isBuffer(i)?n.push(i):n.push(Buffer.from(i))}),r.on("end",()=>{e(Buffer.concat(n).toString("utf8"))}),r.on("error",i=>{i&&i?.name==="AbortError"?t(i):t(new fh(`Error reading response as text: ${i.message}`,{code:fh.PARSE_ERROR}))})})}function vpt(r){return r?Buffer.isBuffer(r)?r.length:kA(r)?null:N0e(r)?r.byteLength:typeof r=="string"?Buffer.from(r).length:null:0}function bpt(){return new T9}function _pt(){return bpt()}function Spt(){return Rdt.v4()}var I9=class{constructor(e){var t,n,i,s,o,a,c;this.url=e.url,this.body=e.body,this.headers=(t=e.headers)!==null&&t!==void 0?t:x9(),this.method=(n=e.method)!==null&&n!==void 0?n:"GET",this.timeout=(i=e.timeout)!==null&&i!==void 0?i:0,this.formData=e.formData,this.disableKeepAlive=(s=e.disableKeepAlive)!==null&&s!==void 0?s:!1,this.proxySettings=e.proxySettings,this.streamResponseStatusCodes=e.streamResponseStatusCodes,this.withCredentials=(o=e.withCredentials)!==null&&o!==void 0?o:!1,this.abortSignal=e.abortSignal,this.tracingOptions=e.tracingOptions,this.onUploadProgress=e.onUploadProgress,this.onDownloadProgress=e.onDownloadProgress,this.requestId=e.requestId||Spt(),this.allowInsecureConnection=(a=e.allowInsecureConnection)!==null&&a!==void 0?a:!1,this.enableBrowserStreams=(c=e.enableBrowserStreams)!==null&&c!==void 0?c:!1}};function Cpt(r){return new I9(r)}var Ppt="exponentialRetryPolicy";function wpt(r={}){var e;return qA([R9(Object.assign(Object.assign({},r),{ignoreSystemErrors:!0}))],{maxRetries:(e=r.maxRetries)!==null&&e!==void 0?e:fE})}var D0e="systemErrorRetryPolicy";function Ept(r={}){var e;return{name:D0e,sendRequest:qA([R9(Object.assign(Object.assign({},r),{ignoreHttpStatusCodes:!0}))],{maxRetries:(e=r.maxRetries)!==null&&e!==void 0?e:fE}).sendRequest}}var M0e="throttlingRetryPolicy";function Tpt(r={}){var e;return{name:M0e,sendRequest:qA([O0e()],{maxRetries:(e=r.maxRetries)!==null&&e!==void 0?e:fE}).sendRequest}}var Ipt={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:1e3*60*2};async function Rpt(r,e,t){async function n(){if(Date.now()<t)try{return await r()}catch{return null}else{let s=await r();if(s===null)throw new Error("Failed to refresh access token.");return s}}let i=await n();for(;i===null;)await p0e(e),i=await n();return i}function xpt(r,e){let t=null,n=null,i=Object.assign(Object.assign({},Ipt),e),s={get isRefreshing(){return t!==null},get shouldRefresh(){var a;return!s.isRefreshing&&((a=n?.expiresOnTimestamp)!==null&&a!==void 0?a:0)-i.refreshWindowInMs<Date.now()},get mustRefresh(){return n===null||n.expiresOnTimestamp-i.forcedRefreshWindowInMs<Date.now()}};function o(a,c){var l;return s.isRefreshing||(t=Rpt(()=>r.getToken(a,c),i.retryIntervalInMs,(l=n?.expiresOnTimestamp)!==null&&l!==void 0?l:Date.now()).then(d=>(t=null,n=d,n)).catch(d=>{throw t=null,n=null,d})),t}return async(a,c)=>s.mustRefresh?o(a,c):(s.shouldRefresh&&o(a,c),n)}var k0e="bearerTokenAuthenticationPolicy";async function Opt(r){let{scopes:e,getAccessToken:t,request:n}=r,i={abortSignal:n.abortSignal,tracingOptions:n.tracingOptions},s=await t(e,i);s&&r.request.headers.set("Authorization",`Bearer ${s.token}`)}function Apt(r){let e=r.headers.get("WWW-Authenticate");if(r.status===401&&e)return e}function Npt(r){var e;let{credential:t,scopes:n,challengeCallbacks:i,logger:s}=r,o=Object.assign({authorizeRequest:(e=i?.authorizeRequest)!==null&&e!==void 0?e:Opt,authorizeRequestOnChallenge:i?.authorizeRequestOnChallenge},i),a=t?xpt(t):()=>Promise.resolve(null);return{name:k0e,async sendRequest(c,l){if(!c.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");await o.authorizeRequest({scopes:Array.isArray(n)?n:[n],request:c,getAccessToken:a,logger:s});let u,d;try{u=await l(c)}catch(p){d=p,u=p.response}if(o.authorizeRequestOnChallenge&&u?.status===401&&Apt(u)&&await o.authorizeRequestOnChallenge({scopes:Array.isArray(n)?n:[n],request:c,response:u,getAccessToken:a,logger:s}))return l(c);if(d)throw d;return u}}}var L0e="ndJsonPolicy";function Dpt(){return{name:L0e,async sendRequest(r,e){if(typeof r.body=="string"&&r.body.startsWith("[")){let t=JSON.parse(r.body);Array.isArray(t)&&(r.body=t.map(n=>JSON.stringify(n)+`
`).join(""))}return e(r)}}}di.RestError=fh;di.bearerTokenAuthenticationPolicy=Npt;di.bearerTokenAuthenticationPolicyName=k0e;di.createDefaultHttpClient=_pt;di.createEmptyPipeline=a0e;di.createHttpHeaders=x9;di.createPipelineFromOptions=dpt;di.createPipelineRequest=Cpt;di.decompressResponsePolicy=l0e;di.decompressResponsePolicyName=c0e;di.defaultRetryPolicy=A0e;di.exponentialRetryPolicy=wpt;di.exponentialRetryPolicyName=Ppt;di.formDataPolicy=d0e;di.formDataPolicyName=u0e;di.getDefaultProxySettings=y0e;di.logPolicy=h0e;di.logPolicyName=m0e;di.ndJsonPolicy=Dpt;di.ndJsonPolicyName=L0e;di.proxyPolicy=v0e;di.proxyPolicyName=f0e;di.redirectPolicy=_0e;di.redirectPolicyName=b0e;di.retryPolicy=qA;di.setClientRequestIdPolicy=P0e;di.setClientRequestIdPolicyName=C0e;di.systemErrorRetryPolicy=Ept;di.systemErrorRetryPolicyName=D0e;di.throttlingRetryPolicy=Tpt;di.throttlingRetryPolicyName=M0e;di.tracingPolicy=T0e;di.tracingPolicyName=E0e;di.userAgentPolicy=R0e;di.userAgentPolicyName=I0e});var q0e=O(()=>{"use strict";(typeof Symbol===void 0||!Symbol.asyncIterator)&&(Symbol.asyncIterator=Symbol.for("Symbol.asyncIterator"))});var hU=O(Gu=>{"use strict";Object.defineProperty(Gu,"__esModule",{value:!0});var uv=zA(),Mpt=lu();q0e();function G0e(r){return(r instanceof Buffer?r:Buffer.from(r.buffer)).toString("base64")}function $0e(r){return Buffer.from(r,"base64")}function kpt(r){return Buffer.from(r,"base64").toString()}var Ha="$",FA="_";function Lpt(r,e){return e!=="Composite"&&e!=="Dictionary"&&(typeof r=="string"||typeof r=="number"||typeof r=="boolean"||e?.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i)!==null||r===void 0||r===null)}var qpt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function zpt(r){return qpt.test(r)}var Fpt=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i;function jpt(r){return Fpt.test(r)}function Upt(r){let e=Object.assign(Object.assign({},r.headers),r.body);return r.hasNullableType&&Object.getOwnPropertyNames(e).length===0?r.shouldWrapBody?{body:null}:null:r.shouldWrapBody?Object.assign(Object.assign({},r.headers),{body:r.body}):e}function z0e(r,e){var t,n;let i=r.parsedHeaders;if(r.request.method==="HEAD")return Object.assign(Object.assign({},i),{body:r.parsedBody});let s=e&&e.bodyMapper,o=!!s?.nullable,a=s?.type.name;if(a==="Stream")return Object.assign(Object.assign({},i),{blobBody:r.blobBody,readableStreamBody:r.readableStreamBody});let c=a==="Composite"&&s.type.modelProperties||{},l=Object.keys(c).some(u=>c[u].serializedName==="");if(a==="Sequence"||l){let u=(t=r.parsedBody)!==null&&t!==void 0?t:[];for(let d of Object.keys(c))c[d].serializedName&&(u[d]=(n=r.parsedBody)===null||n===void 0?void 0:n[d]);if(i)for(let d of Object.keys(i))u[d]=i[d];return o&&!r.parsedBody&&!i&&Object.getOwnPropertyNames(c).length===0?null:u}return Upt({body:r.parsedBody,headers:i,hasNullableType:o,shouldWrapBody:Lpt(r.parsedBody,a)})}var A9=class{constructor(e={},t=!1){this.modelMappers=e,this.isXML=t}validateConstraints(e,t,n){let i=(s,o)=>{throw new Error(`"${n}" with value "${t}" should satisfy the constraint "${s}": ${o}.`)};if(e.constraints&&t!==void 0&&t!==null){let{ExclusiveMaximum:s,ExclusiveMinimum:o,InclusiveMaximum:a,InclusiveMinimum:c,MaxItems:l,MaxLength:u,MinItems:d,MinLength:p,MultipleOf:m,Pattern:f,UniqueItems:y}=e.constraints;if(s!==void 0&&t>=s&&i("ExclusiveMaximum",s),o!==void 0&&t<=o&&i("ExclusiveMinimum",o),a!==void 0&&t>a&&i("InclusiveMaximum",a),c!==void 0&&t<c&&i("InclusiveMinimum",c),l!==void 0&&t.length>l&&i("MaxItems",l),u!==void 0&&t.length>u&&i("MaxLength",u),d!==void 0&&t.length<d&&i("MinItems",d),p!==void 0&&t.length<p&&i("MinLength",p),m!==void 0&&t%m!==0&&i("MultipleOf",m),f){let v=typeof f=="string"?new RegExp(f):f;(typeof t!="string"||t.match(v)===null)&&i("Pattern",f)}y&&t.some((v,_,C)=>C.indexOf(v)!==_)&&i("UniqueItems",y)}}serialize(e,t,n,i={xml:{}}){var s,o,a;let c={xml:{rootName:(s=i.xml.rootName)!==null&&s!==void 0?s:"",includeRoot:(o=i.xml.includeRoot)!==null&&o!==void 0?o:!1,xmlCharKey:(a=i.xml.xmlCharKey)!==null&&a!==void 0?a:FA}},l={},u=e.type.name;n||(n=e.serializedName),u.match(/^Sequence$/i)!==null&&(l=[]),e.isConstant&&(t=e.defaultValue);let{required:d,nullable:p}=e;if(d&&p&&t===void 0)throw new Error(`${n} cannot be undefined.`);if(d&&!p&&t==null)throw new Error(`${n} cannot be null or undefined.`);if(!d&&p===!1&&t===null)throw new Error(`${n} cannot be null.`);return t==null?l=t:(this.validateConstraints(e,t,n),u.match(/^any$/i)!==null?l=t:u.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/i)!==null?l=Kpt(u,n,t):u.match(/^Enum$/i)!==null?l=Qpt(n,e.type.allowedValues,t):u.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/i)!==null?l=Jpt(u,t,n):u.match(/^ByteArray$/i)!==null?l=Ypt(n,t):u.match(/^Base64Url$/i)!==null?l=Xpt(n,t):u.match(/^Sequence$/i)!==null?l=Zpt(this,e,t,n,!!this.isXML,c):u.match(/^Dictionary$/i)!==null?l=emt(this,e,t,n,!!this.isXML,c):u.match(/^Composite$/i)!==null&&(l=rmt(this,e,t,n,!!this.isXML,c))),l}deserialize(e,t,n,i={xml:{}}){var s,o,a;let c={xml:{rootName:(s=i.xml.rootName)!==null&&s!==void 0?s:"",includeRoot:(o=i.xml.includeRoot)!==null&&o!==void 0?o:!1,xmlCharKey:(a=i.xml.xmlCharKey)!==null&&a!==void 0?a:FA}};if(t==null)return this.isXML&&e.type.name==="Sequence"&&!e.xmlIsWrapped&&(t=[]),e.defaultValue!==void 0&&(t=e.defaultValue),t;let l,u=e.type.name;if(n||(n=e.serializedName),u.match(/^Composite$/i)!==null)l=imt(this,e,t,n,c);else{if(this.isXML){let d=c.xml.xmlCharKey;t[Ha]!==void 0&&t[d]!==void 0&&(t=t[d])}u.match(/^Number$/i)!==null?(l=parseFloat(t),isNaN(l)&&(l=t)):u.match(/^Boolean$/i)!==null?t==="true"?l=!0:t==="false"?l=!1:l=t:u.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/i)!==null?l=t:u.match(/^(Date|DateTime|DateTimeRfc1123)$/i)!==null?l=new Date(t):u.match(/^UnixTime$/i)!==null?l=Wpt(t):u.match(/^ByteArray$/i)!==null?l=$0e(t):u.match(/^Base64Url$/i)!==null?l=Vpt(t):u.match(/^Sequence$/i)!==null?l=omt(this,e,t,n,c):u.match(/^Dictionary$/i)!==null&&(l=smt(this,e,t,n,c))}return e.isConstant&&(l=e.defaultValue),l}};function Bpt(r={},e=!1){return new A9(r,e)}function Gpt(r,e){let t=r.length;for(;t-1>=0&&r[t-1]===e;)--t;return r.substr(0,t)}function $pt(r){if(!r)return;if(!(r instanceof Uint8Array))throw new Error("Please provide an input of type Uint8Array for converting to Base64Url.");let e=G0e(r);return Gpt(e,"=").replace(/\+/g,"-").replace(/\//g,"_")}function Vpt(r){if(r){if(r&&typeof r.valueOf()!="string")throw new Error("Please provide an input of type string for converting to Uint8Array");return r=r.replace(/-/g,"+").replace(/_/g,"/"),$0e(r)}}function N9(r){let e=[],t="";if(r){let n=r.split(".");for(let i of n)i.charAt(i.length-1)==="\\"?t+=i.substr(0,i.length-1)+".":(t+=i,e.push(t),t="")}return e}function Hpt(r){if(r)return typeof r.valueOf()=="string"&&(r=new Date(r)),Math.floor(r.getTime()/1e3)}function Wpt(r){if(r)return new Date(r*1e3)}function Kpt(r,e,t){if(t!=null){if(r.match(/^Number$/i)!==null){if(typeof t!="number")throw new Error(`${e} with value ${t} must be of type number.`)}else if(r.match(/^String$/i)!==null){if(typeof t.valueOf()!="string")throw new Error(`${e} with value "${t}" must be of type string.`)}else if(r.match(/^Uuid$/i)!==null){if(!(typeof t.valueOf()=="string"&&jpt(t)))throw new Error(`${e} with value "${t}" must be of type string and a valid uuid.`)}else if(r.match(/^Boolean$/i)!==null){if(typeof t!="boolean")throw new Error(`${e} with value ${t} must be of type boolean.`)}else if(r.match(/^Stream$/i)!==null&&typeof t!=="string"&&typeof t.pipe!="function"&&!(t instanceof ArrayBuffer)&&!ArrayBuffer.isView(t)&&!((typeof Blob=="function"||typeof Blob=="object")&&t instanceof Blob))throw new Error(`${e} must be a string, Blob, ArrayBuffer, ArrayBufferView, or NodeJS.ReadableStream.`)}return t}function Qpt(r,e,t){if(!e)throw new Error(`Please provide a set of allowedValues to validate ${r} as an Enum Type.`);if(!e.some(i=>typeof i.valueOf()=="string"?i.toLowerCase()===t.toLowerCase():i===t))throw new Error(`${t} is not a valid value for ${r}. The valid values are: ${JSON.stringify(e)}.`);return t}function Ypt(r,e){if(e!=null){if(!(e instanceof Uint8Array))throw new Error(`${r} must be of type Uint8Array.`);e=G0e(e)}return e}function Xpt(r,e){if(e!=null){if(!(e instanceof Uint8Array))throw new Error(`${r} must be of type Uint8Array.`);e=$pt(e)}return e}function Jpt(r,e,t){if(e!=null){if(r.match(/^Date$/i)!==null){if(!(e instanceof Date||typeof e.valueOf()=="string"&&!isNaN(Date.parse(e))))throw new Error(`${t} must be an instanceof Date or a string in ISO8601 format.`);e=e instanceof Date?e.toISOString().substring(0,10):new Date(e).toISOString().substring(0,10)}else if(r.match(/^DateTime$/i)!==null){if(!(e instanceof Date||typeof e.valueOf()=="string"&&!isNaN(Date.parse(e))))throw new Error(`${t} must be an instanceof Date or a string in ISO8601 format.`);e=e instanceof Date?e.toISOString():new Date(e).toISOString()}else if(r.match(/^DateTimeRfc1123$/i)!==null){if(!(e instanceof Date||typeof e.valueOf()=="string"&&!isNaN(Date.parse(e))))throw new Error(`${t} must be an instanceof Date or a string in RFC-1123 format.`);e=e instanceof Date?e.toUTCString():new Date(e).toUTCString()}else if(r.match(/^UnixTime$/i)!==null){if(!(e instanceof Date||typeof e.valueOf()=="string"&&!isNaN(Date.parse(e))))throw new Error(`${t} must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.`);e=Hpt(e)}else if(r.match(/^TimeSpan$/i)!==null&&!zpt(e))throw new Error(`${t} must be a string in ISO 8601 format. Instead was "${e}".`)}return e}function Zpt(r,e,t,n,i,s){var o;if(!Array.isArray(t))throw new Error(`${n} must be of type Array.`);let a=e.type.element;if(!a||typeof a!="object")throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${n}.`);a.type.name==="Composite"&&a.type.className&&(a=(o=r.modelMappers[a.type.className])!==null&&o!==void 0?o:a);let c=[];for(let l=0;l<t.length;l++){let u=r.serialize(a,t[l],n,s);if(i&&a.xmlNamespace){let d=a.xmlNamespacePrefix?`xmlns:${a.xmlNamespacePrefix}`:"xmlns";a.type.name==="Composite"?(c[l]=Object.assign({},u),c[l][Ha]={[d]:a.xmlNamespace}):(c[l]={},c[l][s.xml.xmlCharKey]=u,c[l][Ha]={[d]:a.xmlNamespace})}else c[l]=u}return c}function emt(r,e,t,n,i,s){if(typeof t!="object")throw new Error(`${n} must be of type object.`);let o=e.type.value;if(!o||typeof o!="object")throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${n}.`);let a={};for(let c of Object.keys(t)){let l=r.serialize(o,t[c],n,s);a[c]=W0e(o,l,i,s)}if(i&&e.xmlNamespace){let c=e.xmlNamespacePrefix?`xmlns:${e.xmlNamespacePrefix}`:"xmlns",l=a;return l[Ha]={[c]:e.xmlNamespace},l}return a}function tmt(r,e,t){let n=e.type.additionalProperties;if(!n&&e.type.className){let i=V0e(r,e,t);return i?.type.additionalProperties}return n}function V0e(r,e,t){let n=e.type.className;if(!n)throw new Error(`Class name for model "${t}" is not provided in the mapper "${JSON.stringify(e,void 0,2)}".`);return r.modelMappers[n]}function H0e(r,e,t){let n=e.type.modelProperties;if(!n){let i=V0e(r,e,t);if(!i)throw new Error(`mapper() cannot be null or undefined for model "${e.type.className}".`);if(n=i?.type.modelProperties,!n)throw new Error(`modelProperties cannot be null or undefined in the mapper "${JSON.stringify(i)}" of type "${e.type.className}" for object "${t}".`)}return n}function rmt(r,e,t,n,i,s){if(mU(r,e)&&(e=K0e(r,e,t,"clientName")),t!=null){let o={},a=H0e(r,e,n);for(let l of Object.keys(a)){let u=a[l];if(u.readOnly)continue;let d,p=o;if(r.isXML)u.xmlIsWrapped?d=u.xmlName:d=u.xmlElementName||u.xmlName;else{let m=N9(u.serializedName);d=m.pop();for(let f of m){let y=p[f];y==null&&(t[l]!==void 0&&t[l]!==null||u.defaultValue!==void 0)&&(p[f]={}),p=p[f]}}if(p!=null){if(i&&e.xmlNamespace){let _=e.xmlNamespacePrefix?`xmlns:${e.xmlNamespacePrefix}`:"xmlns";p[Ha]=Object.assign(Object.assign({},p[Ha]),{[_]:e.xmlNamespace})}let m=u.serializedName!==""?n+"."+u.serializedName:n,f=t[l],y=mU(r,e);y&&y.clientName===l&&f==null&&(f=e.serializedName);let v=r.serialize(u,f,m,s);if(v!==void 0&&d!==void 0&&d!==null){let _=W0e(u,v,i,s);i&&u.xmlIsAttribute?(p[Ha]=p[Ha]||{},p[Ha][d]=v):i&&u.xmlIsWrapped?p[d]={[u.xmlElementName]:_}:p[d]=_}}}let c=tmt(r,e,n);if(c){let l=Object.keys(a);for(let u in t)l.every(p=>p!==u)&&(o[u]=r.serialize(c,t[u],n+'["'+u+'"]',s))}return o}return t}function W0e(r,e,t,n){if(!t||!r.xmlNamespace)return e;let s={[r.xmlNamespacePrefix?`xmlns:${r.xmlNamespacePrefix}`:"xmlns"]:r.xmlNamespace};if(["Composite"].includes(r.type.name)){if(e[Ha])return e;{let a=Object.assign({},e);return a[Ha]=s,a}}let o={};return o[n.xml.xmlCharKey]=e,o[Ha]=s,o}function nmt(r,e){return[Ha,e.xml.xmlCharKey].includes(r)}function imt(r,e,t,n,i){var s;mU(r,e)&&(e=K0e(r,e,t,"serializedName"));let o=H0e(r,e,n),a={},c=[];for(let u of Object.keys(o)){let d=o[u],p=N9(o[u].serializedName);c.push(p[0]);let{serializedName:m,xmlName:f,xmlElementName:y}=d,v=n;m!==""&&m!==void 0&&(v=n+"."+m);let _=d.headerCollectionPrefix;if(_){let C={};for(let P of Object.keys(t))P.startsWith(_)&&(C[P.substring(_.length)]=r.deserialize(d.type.value,t[P],v,i)),c.push(P);a[u]=C}else if(r.isXML)if(d.xmlIsAttribute&&t[Ha])a[u]=r.deserialize(d,t[Ha][f],v,i);else{let C=y||f||m;if(d.xmlIsWrapped){let P=t[f],w=(s=P?.[y])!==null&&s!==void 0?s:[];a[u]=r.deserialize(d,w,v,i)}else{let P=t[C];a[u]=r.deserialize(d,P,v,i)}}else{let C,P=t;for(let I of p){if(!P)break;P=P[I]}C=P;let w=e.type.polymorphicDiscriminator;w&&u===w.clientName&&C==null&&(C=e.serializedName);let R;if(Array.isArray(t[u])&&o[u].serializedName===""){C=t[u];let I=r.deserialize(d,C,v,i);for(let[z,G]of Object.entries(a))Object.prototype.hasOwnProperty.call(I,z)||(I[z]=G);a=I}else(C!==void 0||d.defaultValue!==void 0)&&(R=r.deserialize(d,C,v,i),a[u]=R)}}let l=e.type.additionalProperties;if(l){let u=d=>{for(let p in o)if(N9(o[p].serializedName)[0]===d)return!1;return!0};for(let d in t)u(d)&&(a[d]=r.deserialize(l,t[d],n+'["'+d+'"]',i))}else if(t)for(let u of Object.keys(t))a[u]===void 0&&!c.includes(u)&&!nmt(u,i)&&(a[u]=t[u]);return a}function smt(r,e,t,n,i){let s=e.type.value;if(!s||typeof s!="object")throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${n}`);if(t){let o={};for(let a of Object.keys(t))o[a]=r.deserialize(s,t[a],n,i);return o}return t}function omt(r,e,t,n,i){var s;let o=e.type.element;if(!o||typeof o!="object")throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${n}`);if(t){Array.isArray(t)||(t=[t]),o.type.name==="Composite"&&o.type.className&&(o=(s=r.modelMappers[o.type.className])!==null&&s!==void 0?s:o);let a=[];for(let c=0;c<t.length;c++)a[c]=r.deserialize(o,t[c],`${n}[${c}]`,i);return a}return t}function K0e(r,e,t,n){let i=mU(r,e);if(i){let s=i[n];if(s){n==="serializedName"&&(s=s.replace(/\\/gi,""));let o=t[s];if(o!=null){let a=e.type.uberParent||e.type.className,c=o===a?o:a+"."+o,l=r.modelMappers.discriminators[c];l&&(e=l)}}}return e}function mU(r,e){return e.type.polymorphicDiscriminator||F0e(r,e.type.uberParent)||F0e(r,e.type.className)}function F0e(r,e){return e&&r.modelMappers[e]&&r.modelMappers[e].type.polymorphicDiscriminator}var lS={Base64Url:"Base64Url",Boolean:"Boolean",ByteArray:"ByteArray",Composite:"Composite",Date:"Date",DateTime:"DateTime",DateTimeRfc1123:"DateTimeRfc1123",Dictionary:"Dictionary",Enum:"Enum",Number:"Number",Object:"Object",Sequence:"Sequence",String:"String",Stream:"Stream",TimeSpan:"TimeSpan",UnixTime:"UnixTime"};function gE(r,e,t){let n=e.parameterPath,i=e.mapper,s;if(typeof n=="string"&&(n=[n]),Array.isArray(n)){if(n.length>0)if(i.isConstant)s=i.defaultValue;else{let o=j0e(r,n);!o.propertyFound&&t&&(o=j0e(t,n));let a=!1;o.propertyFound||(a=i.required||n[0]==="options"&&n.length===2),s=a?i.defaultValue:o.propertyValue}}else{i.required&&(s={});for(let o in n){let a=i.type.modelProperties[o],c=n[o],l=gE(r,{parameterPath:c,mapper:a},t);l!==void 0&&(s||(s={}),s[o]=l)}}return s}function j0e(r,e){let t={propertyFound:!1},n=0;for(;n<e.length;++n){let i=e[n];if(r&&i in r)r=r[i];else break}return n===e.length&&(t.propertyValue=r,t.propertyFound=!0),t}var U0e=new WeakMap;function jA(r){let e=U0e.get(r);return e||(e={},U0e.set(r,e)),e}var amt=["application/json","text/json"],cmt=["application/xml","application/atom+xml"],Q0e="deserializationPolicy";function Y0e(r={}){var e,t,n,i,s,o,a;let c=(t=(e=r.expectedContentTypes)===null||e===void 0?void 0:e.json)!==null&&t!==void 0?t:amt,l=(i=(n=r.expectedContentTypes)===null||n===void 0?void 0:n.xml)!==null&&i!==void 0?i:cmt,u=r.parseXML,d=r.serializerOptions,p={xml:{rootName:(s=d?.xml.rootName)!==null&&s!==void 0?s:"",includeRoot:(o=d?.xml.includeRoot)!==null&&o!==void 0?o:!1,xmlCharKey:(a=d?.xml.xmlCharKey)!==null&&a!==void 0?a:FA}};return{name:Q0e,async sendRequest(m,f){let y=await f(m);return dmt(c,l,y,p,u)}}}function lmt(r){let e,t=r.request,n=jA(t),i=n?.operationSpec;return i&&(n?.operationResponseGetter?e=n?.operationResponseGetter(i,r):e=i.responses[r.status]),e}function umt(r){let e=r.request,t=jA(e),n=t?.shouldDeserialize,i;return n===void 0?i=!0:typeof n=="boolean"?i=n:i=n(r),i}async function dmt(r,e,t,n,i){let s=await hmt(r,e,t,n,i);if(!umt(s))return s;let o=jA(s.request),a=o?.operationSpec;if(!a||!a.responses)return s;let c=lmt(s),{error:l,shouldReturnResponse:u}=mmt(s,a,c);if(l)throw l;if(u)return s;if(c){if(c.bodyMapper){let d=s.parsedBody;a.isXML&&c.bodyMapper.type.name===lS.Sequence&&(d=typeof d=="object"?d[c.bodyMapper.xmlElementName]:[]);try{s.parsedBody=a.serializer.deserialize(c.bodyMapper,d,"operationRes.parsedBody")}catch(p){throw new uv.RestError(`Error ${p} occurred in deserializing the responseBody - ${s.bodyAsText}`,{statusCode:s.status,request:s.request,response:s})}}else a.httpMethod==="HEAD"&&(s.parsedBody=t.status>=200&&t.status<300);c.headersMapper&&(s.parsedHeaders=a.serializer.deserialize(c.headersMapper,s.headers.toJSON(),"operationRes.parsedHeaders"))}return s}function pmt(r){let e=Object.keys(r.responses);return e.length===0||e.length===1&&e[0]==="default"}function mmt(r,e,t){var n;let i=200<=r.status&&r.status<300;if(pmt(e)?i:!!t)if(t){if(!t.isError)return{error:null,shouldReturnResponse:!1}}else return{error:null,shouldReturnResponse:!1};let o=t??e.responses.default,a=!((n=r.request.streamResponseStatusCodes)===null||n===void 0)&&n.has(r.status)?`Unexpected status code: ${r.status}`:r.bodyAsText,c=new uv.RestError(a,{statusCode:r.status,request:r.request,response:r});if(!o)throw c;let l=o.bodyMapper,u=o.headersMapper;try{if(r.parsedBody){let d=r.parsedBody,p;if(l){let f=d;if(e.isXML&&l.type.name===lS.Sequence){f=[];let y=l.xmlElementName;typeof d=="object"&&y&&(f=d[y])}p=e.serializer.deserialize(l,f,"error.response.parsedBody")}let m=d.error||p||d;c.code=m.code,m.message&&(c.message=m.message),l&&(c.response.parsedBody=p)}r.headers&&u&&(c.response.parsedHeaders=e.serializer.deserialize(u,r.headers.toJSON(),"operationRes.parsedHeaders"))}catch(d){c.message=`Error "${d.message}" occurred in deserializing the responseBody - "${r.bodyAsText}" for the default response.`}return{error:c,shouldReturnResponse:!1}}async function hmt(r,e,t,n,i){var s;if(!(!((s=t.request.streamResponseStatusCodes)===null||s===void 0)&&s.has(t.status))&&t.bodyAsText){let o=t.bodyAsText,a=t.headers.get("Content-Type")||"",c=a?a.split(";").map(l=>l.toLowerCase()):[];try{if(c.length===0||c.some(l=>r.indexOf(l)!==-1))return t.parsedBody=JSON.parse(o),t;if(c.some(l=>e.indexOf(l)!==-1)){if(!i)throw new Error("Parsing XML not supported.");let l=await i(o,n.xml);return t.parsedBody=l,t}}catch(l){let u=`Error "${l}" occurred while parsing the response body - ${t.bodyAsText}.`,d=l.code||uv.RestError.PARSE_ERROR;throw new uv.RestError(u,{code:d,statusCode:t.status,request:t.request,response:t})}}return t}function fmt(r){let e=new Set;for(let t in r.responses){let n=r.responses[t];n.bodyMapper&&n.bodyMapper.type.name===lS.Stream&&e.add(Number(t))}return e}function lv(r){let{parameterPath:e,mapper:t}=r,n;return typeof e=="string"?n=e:Array.isArray(e)?n=e.join("."):n=t.serializedName,n}var X0e="serializationPolicy";function J0e(r={}){let e=r.stringifyXML;return{name:X0e,async sendRequest(t,n){let i=jA(t),s=i?.operationSpec,o=i?.operationArguments;return s&&o&&(gmt(t,o,s),ymt(t,o,s,e)),n(t)}}}function gmt(r,e,t){var n,i;if(t.headerParameters)for(let o of t.headerParameters){let a=gE(e,o);if(a!=null||o.mapper.required){a=t.serializer.serialize(o.mapper,a,lv(o));let c=o.mapper.headerCollectionPrefix;if(c)for(let l of Object.keys(a))r.headers.set(c+l,a[l]);else r.headers.set(o.mapper.serializedName||lv(o),a)}}let s=(i=(n=e.options)===null||n===void 0?void 0:n.requestOptions)===null||i===void 0?void 0:i.customHeaders;if(s)for(let o of Object.keys(s))r.headers.set(o,s[o])}function ymt(r,e,t,n=function(){throw new Error("XML serialization unsupported!")}){var i,s,o,a,c;let l=(i=e.options)===null||i===void 0?void 0:i.serializerOptions,u={xml:{rootName:(s=l?.xml.rootName)!==null&&s!==void 0?s:"",includeRoot:(o=l?.xml.includeRoot)!==null&&o!==void 0?o:!1,xmlCharKey:(a=l?.xml.xmlCharKey)!==null&&a!==void 0?a:FA}},d=u.xml.xmlCharKey;if(t.requestBody&&t.requestBody.mapper){r.body=gE(e,t.requestBody);let p=t.requestBody.mapper,{required:m,serializedName:f,xmlName:y,xmlElementName:v,xmlNamespace:_,xmlNamespacePrefix:C,nullable:P}=p,w=p.type.name;try{if(r.body!==void 0&&r.body!==null||P&&r.body===null||m){let R=lv(t.requestBody);r.body=t.serializer.serialize(p,r.body,R,u);let I=w===lS.Stream;if(t.isXML){let z=C?`xmlns:${C}`:"xmlns",G=vmt(_,z,w,r.body,u);w===lS.Sequence?r.body=n(bmt(G,v||y||f,z,_),{rootName:y||f,xmlCharKey:d}):I||(r.body=n(G,{rootName:y||f,xmlCharKey:d}))}else{if(w===lS.String&&(!((c=t.contentType)===null||c===void 0)&&c.match("text/plain")||t.mediaType==="text"))return;I||(r.body=JSON.stringify(r.body))}}}catch(R){throw new Error(`Error "${R.message}" occurred in serializing the payload - ${JSON.stringify(f,void 0,"  ")}.`)}}else if(t.formDataParameters&&t.formDataParameters.length>0){r.formData={};for(let p of t.formDataParameters){let m=gE(e,p);if(m!=null){let f=p.mapper.serializedName||lv(p);r.formData[f]=t.serializer.serialize(p.mapper,m,lv(p),u)}}}}function vmt(r,e,t,n,i){if(r&&!["Composite","Sequence","Dictionary"].includes(t)){let s={};return s[i.xml.xmlCharKey]=n,s[Ha]={[e]:r},s}return n}function bmt(r,e,t,n){if(Array.isArray(r)||(r=[r]),!t||!n)return{[e]:r};let i={[e]:r};return i[Ha]={[t]:n},i}function Z0e(r={}){let e=uv.createPipelineFromOptions(r??{});return r.credentialOptions&&e.addPolicy(uv.bearerTokenAuthenticationPolicy({credential:r.credentialOptions.credential,scopes:r.credentialOptions.credentialScopes})),e.addPolicy(J0e(r.serializationOptions),{phase:"Serialize"}),e.addPolicy(Y0e(r.deserializationOptions),{phase:"Deserialize"}),e}var O9;function _mt(){return O9||(O9=uv.createDefaultHttpClient()),O9}var Smt={CSV:",",SSV:" ",Multi:"Multi",TSV:"	",Pipes:"|"};function Cmt(r,e,t,n){let i=Pmt(e,t,n),s=!1,o=B0e(r,i);if(e.path){let l=B0e(e.path,i);e.path==="/{nextLink}"&&l.startsWith("/")&&(l=l.substring(1)),wmt(l)?(o=l,s=!0):o=Emt(o,l)}let{queryParams:a,sequenceParams:c}=Tmt(e,t,n);return o=Rmt(o,a,c,s),o}function B0e(r,e){let t=r;for(let[n,i]of e)t=t.split(n).join(i);return t}function Pmt(r,e,t){var n;let i=new Map;if(!((n=r.urlParameters)===null||n===void 0)&&n.length)for(let s of r.urlParameters){let o=gE(e,s,t),a=lv(s);o=r.serializer.serialize(s.mapper,o,a),s.skipEncoding||(o=encodeURIComponent(o)),i.set(`{${s.mapper.serializedName||a}}`,o)}return i}function wmt(r){return r.includes("://")}function Emt(r,e){if(!e)return r;let t=new URL(r),n=t.pathname;n.endsWith("/")||(n=`${n}/`),e.startsWith("/")&&(e=e.substring(1));let i=e.indexOf("?");if(i!==-1){let s=e.substring(0,i),o=e.substring(i+1);n=n+s,o&&(t.search=t.search?`${t.search}&${o}`:o)}else n=n+e;return t.pathname=n,t.toString()}function Tmt(r,e,t){var n;let i=new Map,s=new Set;if(!((n=r.queryParameters)===null||n===void 0)&&n.length)for(let o of r.queryParameters){o.mapper.type.name==="Sequence"&&o.mapper.serializedName&&s.add(o.mapper.serializedName);let a=gE(e,o,t);if(a!=null||o.mapper.required){a=r.serializer.serialize(o.mapper,a,lv(o));let c=o.collectionFormat?Smt[o.collectionFormat]:"";if(Array.isArray(a)&&(a=a.map(l=>l??"")),o.collectionFormat==="Multi"&&a.length===0)continue;Array.isArray(a)&&(o.collectionFormat==="SSV"||o.collectionFormat==="TSV")&&(a=a.join(c)),o.skipEncoding||(Array.isArray(a)?a=a.map(l=>encodeURIComponent(l)):a=encodeURIComponent(a)),Array.isArray(a)&&(o.collectionFormat==="CSV"||o.collectionFormat==="Pipes")&&(a=a.join(c)),i.set(o.mapper.serializedName||lv(o),a)}}return{queryParams:i,sequenceParams:s}}function Imt(r){let e=new Map;if(!r||r[0]!=="?")return e;r=r.slice(1);let t=r.split("&");for(let n of t){let[i,s]=n.split("=",2),o=e.get(i);o?Array.isArray(o)?o.push(s):e.set(i,[o,s]):e.set(i,s)}return e}function Rmt(r,e,t,n=!1){if(e.size===0)return r;let i=new URL(r),s=Imt(i.search);for(let[a,c]of e){let l=s.get(a);if(Array.isArray(l))if(Array.isArray(c)){l.push(...c);let u=new Set(l);s.set(a,Array.from(u))}else l.push(c);else l?(Array.isArray(c)?c.unshift(l):t.has(a)&&s.set(a,[l,c]),n||s.set(a,c)):s.set(a,c)}let o=[];for(let[a,c]of s)if(typeof c=="string")o.push(`${a}=${c}`);else if(Array.isArray(c))for(let l of c)o.push(`${a}=${l}`);else o.push(`${a}=${c}`);return i.search=o.length?`?${o.join("&")}`:"",i.toString()}var D9=class{constructor(e={}){var t;if(this._requestContentType=e.requestContentType,this._baseUri=e.baseUri,this._allowInsecureConnection=e.allowInsecureConnection,this._httpClient=e.httpClient||_mt(),this.pipeline=e.pipeline||xmt(e),!((t=e.additionalPolicies)===null||t===void 0)&&t.length)for(let{policy:n,position:i}of e.additionalPolicies){let s=i==="perRetry"?"Sign":void 0;this.pipeline.addPolicy(n,{afterPhase:s})}}async sendRequest(e){return this.pipeline.sendRequest(this._httpClient,e)}async sendOperationRequest(e,t){let n=t.baseUrl||this._baseUri;if(!n)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a baseUri string property that contains the base URL to use.");let i=Cmt(n,t,e,this),s=uv.createPipelineRequest({url:i});s.method=t.httpMethod;let o=jA(s);o.operationSpec=t,o.operationArguments=e;let a=t.contentType||this._requestContentType;a&&t.requestBody&&s.headers.set("Content-Type",a);let c=e.options;if(c){let l=c.requestOptions;l&&(l.timeout&&(s.timeout=l.timeout),l.onUploadProgress&&(s.onUploadProgress=l.onUploadProgress),l.onDownloadProgress&&(s.onDownloadProgress=l.onDownloadProgress),l.shouldDeserialize!==void 0&&(o.shouldDeserialize=l.shouldDeserialize),l.allowInsecureConnection&&(s.allowInsecureConnection=!0)),c.abortSignal&&(s.abortSignal=c.abortSignal),c.tracingOptions&&(s.tracingOptions=c.tracingOptions)}this._allowInsecureConnection&&(s.allowInsecureConnection=!0),s.streamResponseStatusCodes===void 0&&(s.streamResponseStatusCodes=fmt(t));try{let l=await this.sendRequest(s),u=z0e(l,t.responses[l.status]);return c?.onResponse&&c.onResponse(l,u),u}catch(l){if(typeof l=="object"&&l?.response){let u=l.response,d=z0e(u,t.responses[l.statusCode]||t.responses.default);l.details=d,c?.onResponse&&c.onResponse(u,d,l)}throw l}}};function xmt(r){let e=Omt(r),t=r.credential&&e?{credentialScopes:e,credential:r.credential}:void 0;return Z0e(Object.assign(Object.assign({},r),{credentialOptions:t}))}function Omt(r){if(r.credentialScopes){let e=r.credentialScopes;return Array.isArray(e)?e.map(t=>new URL(t).toString()):new URL(e).toString()}if(r.baseUri)return`${r.baseUri}/.default`;if(r.credential&&!r.credentialScopes)throw new Error("When using credentials, the ServiceClientOptions must contain either a baseUri or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy")}var Amt=Mpt.createClientLogger("authorizeRequestOnClaimChallenge");function Nmt(r){return`, ${r.trim()}`.split(", Bearer ").filter(t=>t).map(t=>`${t.trim()}, `.split('", ').filter(s=>s).map(s=>(([o,a])=>({[o]:a}))(s.trim().split('="'))).reduce((s,o)=>Object.assign(Object.assign({},s),o),{}))}async function Dmt(r){let{scopes:e,response:t}=r,n=r.logger||Amt,i=t.headers.get("WWW-Authenticate");if(!i)return n.info("The WWW-Authenticate header was missing. Failed to perform the Continuous Access Evaluation authentication flow."),!1;let o=(Nmt(i)||[]).find(c=>c.claims);if(!o)return n.info('The WWW-Authenticate header was missing the necessary "claims" to perform the Continuous Access Evaluation authentication flow.'),!1;let a=await r.getAccessToken(o.scope?[o.scope]:e,{claims:kpt(o.claims)});return a?(r.request.headers.set("Authorization",`Bearer ${a.token}`),!0):!1}Gu.MapperTypeNames=lS;Gu.ServiceClient=D9;Gu.XML_ATTRKEY=Ha;Gu.XML_CHARKEY=FA;Gu.authorizeRequestOnClaimChallenge=Dmt;Gu.createClientPipeline=Z0e;Gu.createSerializer=Bpt;Gu.deserializationPolicy=Y0e;Gu.deserializationPolicyName=Q0e;Gu.serializationPolicy=J0e;Gu.serializationPolicyName=X0e});var tIe={};Ea(tIe,{__assign:()=>k9,__asyncDelegator:()=>Hmt,__asyncGenerator:()=>Vmt,__asyncValues:()=>Wmt,__await:()=>UA,__awaiter:()=>Fmt,__classPrivateFieldGet:()=>Jmt,__classPrivateFieldSet:()=>Zmt,__createBinding:()=>q9,__decorate:()=>Lmt,__exportStar:()=>Umt,__extends:()=>Mmt,__generator:()=>jmt,__importDefault:()=>Xmt,__importStar:()=>Ymt,__makeTemplateObject:()=>Kmt,__metadata:()=>zmt,__param:()=>qmt,__read:()=>eIe,__rest:()=>kmt,__spread:()=>Bmt,__spreadArray:()=>$mt,__spreadArrays:()=>Gmt,__values:()=>L9});function Mmt(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");M9(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function kmt(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function Lmt(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}function qmt(r,e){return function(t,n){e(t,n,r)}}function zmt(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function Fmt(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})}function jmt(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){t.label=l[1];break}if(l[0]===6&&t.label<s[1]){t.label=s[1],s=l;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(l);break}s[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(u){l=[6,u],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Umt(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&q9(e,r,t)}function L9(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function eIe(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s}function Bmt(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(eIe(arguments[e]));return r}function Gmt(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function $mt(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||e)}function UA(r){return this instanceof UA?(this.v=r,this):new UA(r)}function Vmt(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(p){n[p]&&(i[p]=function(m){return new Promise(function(f,y){s.push([p,m,f,y])>1||a(p,m)})})}function a(p,m){try{c(n[p](m))}catch(f){d(s[0][3],f)}}function c(p){p.value instanceof UA?Promise.resolve(p.value.v).then(l,u):d(s[0][2],p)}function l(p){a("next",p)}function u(p){a("throw",p)}function d(p,m){p(m),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Hmt(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=r[i]?function(o){return(t=!t)?{value:UA(r[i](o)),done:i==="return"}:s?s(o):o}:s}}function Wmt(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof L9=="function"?L9(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=r[s]&&function(o){return new Promise(function(a,c){o=r[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function Kmt(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function Ymt(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&q9(e,r,t);return Qmt(e,r),e}function Xmt(r){return r&&r.__esModule?r:{default:r}}function Jmt(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)}function Zmt(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t}var M9,k9,q9,Qmt,rIe=si(()=>{M9=function(r,e){return M9=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},M9(r,e)};k9=function(){return k9=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},k9.apply(this,arguments)};q9=Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]};Qmt=Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}});var _U=O(yE=>{"use strict";Object.defineProperty(yE,"__esModule",{value:!0});var eht=lu(),gU=class r extends Error{constructor(e){super(e),this.name="PollerStoppedError",Object.setPrototypeOf(this,r.prototype)}},yU=class r extends Error{constructor(e){super(e),this.name="PollerCancelledError",Object.setPrototypeOf(this,r.prototype)}},vU=class{constructor(e){this.stopped=!0,this.pollProgressCallbacks=[],this.operation=e,this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n}),this.promise.catch(()=>{})}async startPolling(){for(this.stopped&&(this.stopped=!1);!this.isStopped()&&!this.isDone();)await this.poll(),await this.delay()}async pollOnce(e={}){try{this.isDone()||(this.operation=await this.operation.update({abortSignal:e.abortSignal,fireProgress:this.fireProgress.bind(this)}),this.isDone()&&this.resolve&&this.resolve(this.operation.state.result))}catch(t){throw this.operation.state.error=t,this.reject&&this.reject(t),t}}fireProgress(e){for(let t of this.pollProgressCallbacks)t(e)}async cancelOnce(e={}){this.operation=await this.operation.cancel(e),this.reject&&this.reject(new yU("Poller cancelled"))}poll(e={}){if(!this.pollOncePromise){this.pollOncePromise=this.pollOnce(e);let t=()=>{this.pollOncePromise=void 0};this.pollOncePromise.then(t,t).catch(this.reject)}return this.pollOncePromise}async pollUntilDone(){return this.stopped&&this.startPolling().catch(this.reject),this.promise}onProgress(e){return this.pollProgressCallbacks.push(e),()=>{this.pollProgressCallbacks=this.pollProgressCallbacks.filter(t=>t!==e)}}isDone(){let e=this.operation.state;return!!(e.isCompleted||e.isCancelled||e.error)}stopPolling(){this.stopped||(this.stopped=!0,this.reject&&this.reject(new gU("This poller is already stopped")))}isStopped(){return this.stopped}cancelOperation(e={}){if(this.stopped||(this.stopped=!0),!this.cancelPromise)this.cancelPromise=this.cancelOnce(e);else if(e.abortSignal)throw new Error("A cancel request is currently pending");return this.cancelPromise}getOperationState(){return this.operation.state}getResult(){return this.operation.state.result}toString(){return this.operation.toString()}};function nIe(r,e){var t,n,i;return(i=(n=(t=sIe(r))!==null&&t!==void 0?t:iIe(r))!==null&&n!==void 0?n:U9(r))!==null&&i!==void 0?i:e}function U9(r){return r.headers.location}function iIe(r){return r.headers["operation-location"]}function sIe(r){return r.headers["azure-asyncoperation"]}function tht(r,e,t){switch(r){case"PUT":return t;case"POST":case"PATCH":return U9(e);default:return}}function rht(r,e,t){return sIe(t)!==void 0||iIe(t)!==void 0?{mode:"Location",resourceLocation:tht(e,t,r)}:U9(t)!==void 0?{mode:"Location"}:["PUT","PATCH"].includes(e)?{mode:"Body"}:{}}var bU=class r extends Error{constructor(e,t){super(e),this.name="RestError",this.statusCode=t,Object.setPrototypeOf(this,r.prototype)}};function nht(r){let e=r.statusCode;if(![203,204,202,201,200,500].includes(e))throw new bU(`Received unexpected HTTP status code ${e} in the initial response. This may indicate a server issue.`,e);return!1}function z9(r){let e=r.statusCode;if(![202,201,200,500].includes(e))throw new bU(`Received unexpected HTTP status code ${e} while polling. This may indicate a server issue.`,e);return!1}var oIe=["succeeded"],aIe=["failed","canceled","cancelled"];function iht(r){var e,t;let{properties:n,provisioningState:i}=(e=r.body)!==null&&e!==void 0?e:{},s=(t=n?.provisioningState)!==null&&t!==void 0?t:i;return typeof s=="string"?s.toLowerCase():"succeeded"}function cIe(r){let e=iht(r);if(z9(r)||aIe.includes(e))throw new Error(`The long running operation has failed. The provisioning state: ${e}.`);return oIe.includes(e)}function sht(r){return Object.assign(Object.assign({},r),{done:cIe(r.rawResponse)})}var fU=eht.createClientLogger("core-lro");function oht(r){var e;if(z9(r)||r.statusCode===202)return!1;let{status:t}=(e=r.body)!==null&&e!==void 0?e:{},n=typeof t=="string"?t.toLowerCase():"succeeded";if(z9(r)||aIe.includes(n))throw new Error(`The long running operation has failed. The provisioning state: ${n}.`);return oIe.includes(n)}async function aht(r,e,t){switch(t){case"original-uri":return r.sendPollRequest(r.requestPath);case"azure-async-operation":return;case"location":default:return r.sendPollRequest(e??r.requestPath)}}function cht(r,e,t){return n=>oht(n.rawResponse)?e===void 0?Object.assign(Object.assign({},n),{done:!0}):Object.assign(Object.assign({},n),{done:!1,next:async()=>{let i=await aht(r,e,t);return Object.assign(Object.assign({},i??n),{done:!0})}}):Object.assign(Object.assign({},n),{done:!1})}function lht(r){return Object.assign(Object.assign({},r),{done:!0})}function uht(r,e,t){switch(e.mode){case"Location":return cht(r,e.resourceLocation,t);case"Body":return sht;default:return lht}}function dht(r){return async(e,t,n)=>{let i=await r.sendPollRequest(e),s=i.rawResponse.headers["retry-after"];if(s!==void 0){let o=parseInt(s);t.intervalInMs=isNaN(o)?pht(new Date(s),t.intervalInMs):o*1e3}return n(i)}}function pht(r,e){let t=Math.floor(new Date().getTime()),n=r.getTime();return t<n?n-t:e}function mht(r,e,t){return n=>(nht(n.rawResponse),r.initialRawResponse=n.rawResponse,r.isStarted=!0,r.pollingURL=nIe(r.initialRawResponse,e),r.config=rht(e,t,r.initialRawResponse),(r.config.mode===void 0||r.config.mode==="Body"&&cIe(r.initialRawResponse))&&(r.result=n.flatResponse,r.isCompleted=!0),fU.verbose(`LRO: initial state: ${JSON.stringify(r)}`),!!r.isCompleted)}var F9=class{constructor(e,t,n,i,s,o){this.state=e,this.lro=t,this.lroResourceLocationConfig=n,this.processResult=i,this.updateState=s,this.isDone=o}setPollerConfig(e){this.pollerConfig=e}async update(e){var t,n,i;let s=this.state,o;if(!s.isStarted){let a=mht(s,this.lro.requestPath,this.lro.requestMethod);o=await this.lro.sendInitialRequest(),a(o)}if(!s.isCompleted){if(!this.poll||!this.getLroStatusFromResponse){if(!s.config)throw new Error("Bad state: LRO mode is undefined. Please check if the serialized state is well-formed.");let c=this.isDone;this.getLroStatusFromResponse=c?l=>Object.assign(Object.assign({},l),{done:c(l.flatResponse,this.state)}):uht(this.lro,s.config,this.lroResourceLocationConfig),this.poll=dht(this.lro)}if(!s.pollingURL)throw new Error("Bad state: polling URL is undefined. Please check if the serialized state is well-formed.");let a=await this.poll(s.pollingURL,this.pollerConfig,this.getLroStatusFromResponse);fU.verbose(`LRO: polling response: ${JSON.stringify(a.rawResponse)}`),a.done?(s.result=this.processResult?this.processResult(a.flatResponse,s):a.flatResponse,s.isCompleted=!0):(this.poll=(t=a.next)!==null&&t!==void 0?t:this.poll,s.pollingURL=nIe(a.rawResponse,s.pollingURL)),o=a}return fU.verbose(`LRO: current state: ${JSON.stringify(s)}`),o?(n=this.updateState)===null||n===void 0||n.call(this,s,o?.rawResponse):fU.error("LRO: no response was received"),(i=e?.fireProgress)===null||i===void 0||i.call(e,s),this}async cancel(){return this.state.isCancelled=!0,this}toString(){return JSON.stringify({state:this.state})}};function hht(r){try{return JSON.parse(r).state}catch{throw new Error(`LroEngine: Unable to deserialize state: ${r}`)}}var j9=class extends vU{constructor(e,t){let{intervalInMs:n=2e3,resumeFrom:i}=t||{},s=i?hht(i):{},o=new F9(s,e,t?.lroResourceLocationConfig,t?.processResult,t?.updateState,t?.isDone);super(o),this.config={intervalInMs:n},o.setPollerConfig(this.config)}delay(){return new Promise(e=>setTimeout(()=>e(),this.config.intervalInMs))}};yE.LroEngine=j9;yE.Poller=vU;yE.PollerCancelledError=yU;yE.PollerStoppedError=gU});var nX=O(Zs=>{"use strict";Object.defineProperty(Zs,"__esModule",{value:!0});var fht=hU(),ght=zA(),Z=(rIe(),da(tIe)),us=_U();function lIe(r){if(r&&r.__esModule)return r;var e=Object.create(null);return r&&Object.keys(r).forEach(function(t){if(t!=="default"){var n=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:function(){return r[t]}})}}),e.default=r,Object.freeze(e)}var gh=lIe(fht),B9=lIe(ght);Zs.KnownExpressionEvaluationOptionsScopeType=void 0;(function(r){r.NotSpecified="NotSpecified",r.Outer="Outer",r.Inner="Inner"})(Zs.KnownExpressionEvaluationOptionsScopeType||(Zs.KnownExpressionEvaluationOptionsScopeType={}));Zs.KnownProvisioningState=void 0;(function(r){r.NotSpecified="NotSpecified",r.Accepted="Accepted",r.Running="Running",r.Ready="Ready",r.Creating="Creating",r.Created="Created",r.Deleting="Deleting",r.Deleted="Deleted",r.Canceled="Canceled",r.Failed="Failed",r.Succeeded="Succeeded",r.Updating="Updating"})(Zs.KnownProvisioningState||(Zs.KnownProvisioningState={}));Zs.KnownAliasPathTokenType=void 0;(function(r){r.NotSpecified="NotSpecified",r.Any="Any",r.String="String",r.Object="Object",r.Array="Array",r.Integer="Integer",r.Number="Number",r.Boolean="Boolean"})(Zs.KnownAliasPathTokenType||(Zs.KnownAliasPathTokenType={}));Zs.KnownAliasPathAttributes=void 0;(function(r){r.None="None",r.Modifiable="Modifiable"})(Zs.KnownAliasPathAttributes||(Zs.KnownAliasPathAttributes={}));Zs.KnownProviderAuthorizationConsentState=void 0;(function(r){r.NotSpecified="NotSpecified",r.Required="Required",r.NotRequired="NotRequired",r.Consented="Consented"})(Zs.KnownProviderAuthorizationConsentState||(Zs.KnownProviderAuthorizationConsentState={}));Zs.KnownExtendedLocationType=void 0;(function(r){r.EdgeZone="EdgeZone"})(Zs.KnownExtendedLocationType||(Zs.KnownExtendedLocationType={}));Zs.KnownTagsPatchOperation=void 0;(function(r){r.Replace="Replace",r.Merge="Merge",r.Delete="Delete"})(Zs.KnownTagsPatchOperation||(Zs.KnownTagsPatchOperation={}));var eX={type:{name:"Composite",className:"OperationListResult",modelProperties:{value:{serializedName:"value",type:{name:"Sequence",element:{type:{name:"Composite",className:"Operation"}}}},nextLink:{serializedName:"nextLink",type:{name:"String"}}}}},yht={type:{name:"Composite",className:"Operation",modelProperties:{name:{serializedName:"name",type:{name:"String"}},display:{serializedName:"display",type:{name:"Composite",className:"OperationDisplay"}}}}},vht={type:{name:"Composite",className:"OperationDisplay",modelProperties:{provider:{serializedName:"provider",type:{name:"String"}},resource:{serializedName:"resource",type:{name:"String"}},operation:{serializedName:"operation",type:{name:"String"}},description:{serializedName:"description",type:{name:"String"}}}}},At={type:{name:"Composite",className:"CloudError",modelProperties:{error:{serializedName:"error",type:{name:"Composite",className:"ErrorResponse"}}}}},bht={type:{name:"Composite",className:"ErrorResponse",modelProperties:{code:{serializedName:"code",readOnly:!0,type:{name:"String"}},message:{serializedName:"message",readOnly:!0,type:{name:"String"}},target:{serializedName:"target",readOnly:!0,type:{name:"String"}},details:{serializedName:"details",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ErrorResponse"}}}},additionalInfo:{serializedName:"additionalInfo",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ErrorAdditionalInfo"}}}}}}},_ht={type:{name:"Composite",className:"ErrorAdditionalInfo",modelProperties:{type:{serializedName:"type",readOnly:!0,type:{name:"String"}},info:{serializedName:"info",readOnly:!0,type:{name:"Dictionary",value:{type:{name:"any"}}}}}}},uIe={type:{name:"Composite",className:"Deployment",modelProperties:{location:{serializedName:"location",type:{name:"String"}},properties:{serializedName:"properties",type:{name:"Composite",className:"DeploymentProperties"}},tags:{serializedName:"tags",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},dIe={type:{name:"Composite",className:"DeploymentProperties",modelProperties:{template:{serializedName:"template",type:{name:"Dictionary",value:{type:{name:"any"}}}},templateLink:{serializedName:"templateLink",type:{name:"Composite",className:"TemplateLink"}},parameters:{serializedName:"parameters",type:{name:"Dictionary",value:{type:{name:"any"}}}},parametersLink:{serializedName:"parametersLink",type:{name:"Composite",className:"ParametersLink"}},mode:{serializedName:"mode",required:!0,type:{name:"Enum",allowedValues:["Incremental","Complete"]}},debugSetting:{serializedName:"debugSetting",type:{name:"Composite",className:"DebugSetting"}},onErrorDeployment:{serializedName:"onErrorDeployment",type:{name:"Composite",className:"OnErrorDeployment"}},expressionEvaluationOptions:{serializedName:"expressionEvaluationOptions",type:{name:"Composite",className:"ExpressionEvaluationOptions"}}}}},Sht={type:{name:"Composite",className:"TemplateLink",modelProperties:{uri:{serializedName:"uri",type:{name:"String"}},id:{serializedName:"id",type:{name:"String"}},relativePath:{serializedName:"relativePath",type:{name:"String"}},contentVersion:{serializedName:"contentVersion",type:{name:"String"}},queryString:{serializedName:"queryString",type:{name:"String"}}}}},Cht={type:{name:"Composite",className:"ParametersLink",modelProperties:{uri:{serializedName:"uri",required:!0,type:{name:"String"}},contentVersion:{serializedName:"contentVersion",type:{name:"String"}}}}},Pht={type:{name:"Composite",className:"DebugSetting",modelProperties:{detailLevel:{serializedName:"detailLevel",type:{name:"String"}}}}},wht={type:{name:"Composite",className:"OnErrorDeployment",modelProperties:{type:{serializedName:"type",type:{name:"Enum",allowedValues:["LastSuccessful","SpecificDeployment"]}},deploymentName:{serializedName:"deploymentName",type:{name:"String"}}}}},Eht={type:{name:"Composite",className:"ExpressionEvaluationOptions",modelProperties:{scope:{serializedName:"scope",type:{name:"String"}}}}},Ms={type:{name:"Composite",className:"DeploymentExtended",modelProperties:{id:{serializedName:"id",readOnly:!0,type:{name:"String"}},name:{serializedName:"name",readOnly:!0,type:{name:"String"}},type:{serializedName:"type",readOnly:!0,type:{name:"String"}},location:{serializedName:"location",type:{name:"String"}},properties:{serializedName:"properties",type:{name:"Composite",className:"DeploymentPropertiesExtended"}},tags:{serializedName:"tags",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},Tht={type:{name:"Composite",className:"DeploymentPropertiesExtended",modelProperties:{provisioningState:{serializedName:"provisioningState",readOnly:!0,type:{name:"String"}},correlationId:{serializedName:"correlationId",readOnly:!0,type:{name:"String"}},timestamp:{serializedName:"timestamp",readOnly:!0,type:{name:"DateTime"}},duration:{serializedName:"duration",readOnly:!0,type:{name:"String"}},outputs:{serializedName:"outputs",readOnly:!0,type:{name:"Dictionary",value:{type:{name:"any"}}}},providers:{serializedName:"providers",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"Provider"}}}},dependencies:{serializedName:"dependencies",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"Dependency"}}}},templateLink:{serializedName:"templateLink",type:{name:"Composite",className:"TemplateLink"}},parameters:{serializedName:"parameters",readOnly:!0,type:{name:"Dictionary",value:{type:{name:"any"}}}},parametersLink:{serializedName:"parametersLink",type:{name:"Composite",className:"ParametersLink"}},mode:{serializedName:"mode",readOnly:!0,type:{name:"Enum",allowedValues:["Incremental","Complete"]}},debugSetting:{serializedName:"debugSetting",type:{name:"Composite",className:"DebugSetting"}},onErrorDeployment:{serializedName:"onErrorDeployment",type:{name:"Composite",className:"OnErrorDeploymentExtended"}},templateHash:{serializedName:"templateHash",readOnly:!0,type:{name:"String"}},outputResources:{serializedName:"outputResources",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ResourceReference"}}}},validatedResources:{serializedName:"validatedResources",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ResourceReference"}}}},error:{serializedName:"error",type:{name:"Composite",className:"ErrorResponse"}}}}},GA={type:{name:"Composite",className:"Provider",modelProperties:{id:{serializedName:"id",readOnly:!0,type:{name:"String"}},namespace:{serializedName:"namespace",type:{name:"String"}},registrationState:{serializedName:"registrationState",readOnly:!0,type:{name:"String"}},registrationPolicy:{serializedName:"registrationPolicy",readOnly:!0,type:{name:"String"}},resourceTypes:{serializedName:"resourceTypes",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ProviderResourceType"}}}},providerAuthorizationConsentState:{serializedName:"providerAuthorizationConsentState",type:{name:"String"}}}}},Iht={type:{name:"Composite",className:"ProviderResourceType",modelProperties:{resourceType:{serializedName:"resourceType",type:{name:"String"}},locations:{serializedName:"locations",type:{name:"Sequence",element:{type:{name:"String"}}}},locationMappings:{serializedName:"locationMappings",type:{name:"Sequence",element:{type:{name:"Composite",className:"ProviderExtendedLocation"}}}},aliases:{serializedName:"aliases",type:{name:"Sequence",element:{type:{name:"Composite",className:"Alias"}}}},apiVersions:{serializedName:"apiVersions",type:{name:"Sequence",element:{type:{name:"String"}}}},defaultApiVersion:{serializedName:"defaultApiVersion",readOnly:!0,type:{name:"String"}},zoneMappings:{serializedName:"zoneMappings",type:{name:"Sequence",element:{type:{name:"Composite",className:"ZoneMapping"}}}},apiProfiles:{serializedName:"apiProfiles",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ApiProfile"}}}},capabilities:{serializedName:"capabilities",type:{name:"String"}},properties:{serializedName:"properties",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},Rht={type:{name:"Composite",className:"ProviderExtendedLocation",modelProperties:{location:{serializedName:"location",type:{name:"String"}},type:{serializedName:"type",type:{name:"String"}},extendedLocations:{serializedName:"extendedLocations",type:{name:"Sequence",element:{type:{name:"String"}}}}}}},xht={type:{name:"Composite",className:"Alias",modelProperties:{name:{serializedName:"name",type:{name:"String"}},paths:{serializedName:"paths",type:{name:"Sequence",element:{type:{name:"Composite",className:"AliasPath"}}}},type:{serializedName:"type",type:{name:"Enum",allowedValues:["NotSpecified","PlainText","Mask"]}},defaultPath:{serializedName:"defaultPath",type:{name:"String"}},defaultPattern:{serializedName:"defaultPattern",type:{name:"Composite",className:"AliasPattern"}},defaultMetadata:{serializedName:"defaultMetadata",type:{name:"Composite",className:"AliasPathMetadata"}}}}},Oht={type:{name:"Composite",className:"AliasPath",modelProperties:{path:{serializedName:"path",type:{name:"String"}},apiVersions:{serializedName:"apiVersions",type:{name:"Sequence",element:{type:{name:"String"}}}},pattern:{serializedName:"pattern",type:{name:"Composite",className:"AliasPattern"}},metadata:{serializedName:"metadata",type:{name:"Composite",className:"AliasPathMetadata"}}}}},Aht={type:{name:"Composite",className:"AliasPattern",modelProperties:{phrase:{serializedName:"phrase",type:{name:"String"}},variable:{serializedName:"variable",type:{name:"String"}},type:{serializedName:"type",type:{name:"Enum",allowedValues:["NotSpecified","Extract"]}}}}},Nht={type:{name:"Composite",className:"AliasPathMetadata",modelProperties:{type:{serializedName:"type",readOnly:!0,type:{name:"String"}},attributes:{serializedName:"attributes",readOnly:!0,type:{name:"String"}}}}},Dht={type:{name:"Composite",className:"ZoneMapping",modelProperties:{location:{serializedName:"location",type:{name:"String"}},zones:{serializedName:"zones",type:{name:"Sequence",element:{type:{name:"String"}}}}}}},Mht={type:{name:"Composite",className:"ApiProfile",modelProperties:{profileVersion:{serializedName:"profileVersion",readOnly:!0,type:{name:"String"}},apiVersion:{serializedName:"apiVersion",readOnly:!0,type:{name:"String"}}}}},kht={type:{name:"Composite",className:"Dependency",modelProperties:{dependsOn:{serializedName:"dependsOn",type:{name:"Sequence",element:{type:{name:"Composite",className:"BasicDependency"}}}},id:{serializedName:"id",type:{name:"String"}},resourceType:{serializedName:"resourceType",type:{name:"String"}},resourceName:{serializedName:"resourceName",type:{name:"String"}}}}},Lht={type:{name:"Composite",className:"BasicDependency",modelProperties:{id:{serializedName:"id",type:{name:"String"}},resourceType:{serializedName:"resourceType",type:{name:"String"}},resourceName:{serializedName:"resourceName",type:{name:"String"}}}}},qht={type:{name:"Composite",className:"OnErrorDeploymentExtended",modelProperties:{provisioningState:{serializedName:"provisioningState",readOnly:!0,type:{name:"String"}},type:{serializedName:"type",type:{name:"Enum",allowedValues:["LastSuccessful","SpecificDeployment"]}},deploymentName:{serializedName:"deploymentName",type:{name:"String"}}}}},zht={type:{name:"Composite",className:"ResourceReference",modelProperties:{id:{serializedName:"id",readOnly:!0,type:{name:"String"}}}}},Zo={type:{name:"Composite",className:"DeploymentValidateResult",modelProperties:{error:{serializedName:"error",type:{name:"Composite",className:"ErrorResponse"}},properties:{serializedName:"properties",type:{name:"Composite",className:"DeploymentPropertiesExtended"}}}}},bE={type:{name:"Composite",className:"DeploymentExportResult",modelProperties:{template:{serializedName:"template",type:{name:"Dictionary",value:{type:{name:"any"}}}}}}},Zp={type:{name:"Composite",className:"DeploymentListResult",modelProperties:{value:{serializedName:"value",type:{name:"Sequence",element:{type:{name:"Composite",className:"DeploymentExtended"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},pIe={type:{name:"Composite",className:"ScopedDeployment",modelProperties:{location:{serializedName:"location",required:!0,type:{name:"String"}},properties:{serializedName:"properties",type:{name:"Composite",className:"DeploymentProperties"}},tags:{serializedName:"tags",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},mIe={type:{name:"Composite",className:"ScopedDeploymentWhatIf",modelProperties:{location:{serializedName:"location",required:!0,type:{name:"String"}},properties:{serializedName:"properties",type:{name:"Composite",className:"DeploymentWhatIfProperties"}}}}},Fht={type:{name:"Composite",className:"DeploymentWhatIfSettings",modelProperties:{resultFormat:{serializedName:"resultFormat",type:{name:"Enum",allowedValues:["ResourceIdOnly","FullResourcePayloads"]}}}}},Pc={type:{name:"Composite",className:"WhatIfOperationResult",modelProperties:{status:{serializedName:"status",type:{name:"String"}},error:{serializedName:"error",type:{name:"Composite",className:"ErrorResponse"}},changes:{serializedName:"properties.changes",type:{name:"Sequence",element:{type:{name:"Composite",className:"WhatIfChange"}}}}}}},jht={type:{name:"Composite",className:"WhatIfChange",modelProperties:{resourceId:{serializedName:"resourceId",required:!0,type:{name:"String"}},changeType:{serializedName:"changeType",required:!0,type:{name:"Enum",allowedValues:["Create","Delete","Ignore","Deploy","NoChange","Modify","Unsupported"]}},unsupportedReason:{serializedName:"unsupportedReason",type:{name:"String"}},before:{serializedName:"before",type:{name:"Dictionary",value:{type:{name:"any"}}}},after:{serializedName:"after",type:{name:"Dictionary",value:{type:{name:"any"}}}},delta:{serializedName:"delta",type:{name:"Sequence",element:{type:{name:"Composite",className:"WhatIfPropertyChange"}}}}}}},Uht={type:{name:"Composite",className:"WhatIfPropertyChange",modelProperties:{path:{serializedName:"path",required:!0,type:{name:"String"}},propertyChangeType:{serializedName:"propertyChangeType",required:!0,type:{name:"Enum",allowedValues:["Create","Delete","Modify","Array","NoEffect"]}},before:{serializedName:"before",type:{name:"Dictionary",value:{type:{name:"any"}}}},after:{serializedName:"after",type:{name:"Dictionary",value:{type:{name:"any"}}}},children:{serializedName:"children",type:{name:"Sequence",element:{type:{name:"Composite",className:"WhatIfPropertyChange"}}}}}}},hIe={type:{name:"Composite",className:"DeploymentWhatIf",modelProperties:{location:{serializedName:"location",type:{name:"String"}},properties:{serializedName:"properties",type:{name:"Composite",className:"DeploymentWhatIfProperties"}}}}},fIe={type:{name:"Composite",className:"ProviderPermissionListResult",modelProperties:{value:{serializedName:"value",type:{name:"Sequence",element:{type:{name:"Composite",className:"ProviderPermission"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},Bht={type:{name:"Composite",className:"ProviderPermission",modelProperties:{applicationId:{serializedName:"applicationId",type:{name:"String"}},roleDefinition:{serializedName:"roleDefinition",type:{name:"Composite",className:"RoleDefinition"}},managedByRoleDefinition:{serializedName:"managedByRoleDefinition",type:{name:"Composite",className:"RoleDefinition"}},providerAuthorizationConsentState:{serializedName:"providerAuthorizationConsentState",type:{name:"String"}}}}},Ght={type:{name:"Composite",className:"RoleDefinition",modelProperties:{id:{serializedName:"id",type:{name:"String"}},name:{serializedName:"name",type:{name:"String"}},isServiceRole:{serializedName:"isServiceRole",type:{name:"Boolean"}},permissions:{serializedName:"permissions",type:{name:"Sequence",element:{type:{name:"Composite",className:"Permission"}}}},scopes:{serializedName:"scopes",type:{name:"Sequence",element:{type:{name:"String"}}}}}}},$ht={type:{name:"Composite",className:"Permission",modelProperties:{actions:{serializedName:"actions",type:{name:"Sequence",element:{type:{name:"String"}}}},notActions:{serializedName:"notActions",type:{name:"Sequence",element:{type:{name:"String"}}}},dataActions:{serializedName:"dataActions",type:{name:"Sequence",element:{type:{name:"String"}}}},notDataActions:{serializedName:"notDataActions",type:{name:"Sequence",element:{type:{name:"String"}}}}}}},gIe={type:{name:"Composite",className:"ProviderRegistrationRequest",modelProperties:{thirdPartyProviderConsent:{serializedName:"thirdPartyProviderConsent",type:{name:"Composite",className:"ProviderConsentDefinition"}}}}},Vht={type:{name:"Composite",className:"ProviderConsentDefinition",modelProperties:{consentToAuthorization:{serializedName:"consentToAuthorization",type:{name:"Boolean"}}}}},$A={type:{name:"Composite",className:"ProviderListResult",modelProperties:{value:{serializedName:"value",type:{name:"Sequence",element:{type:{name:"Composite",className:"Provider"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},yIe={type:{name:"Composite",className:"ProviderResourceTypeListResult",modelProperties:{value:{serializedName:"value",type:{name:"Sequence",element:{type:{name:"Composite",className:"ProviderResourceType"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},VA={type:{name:"Composite",className:"ResourceListResult",modelProperties:{value:{serializedName:"value",type:{name:"Sequence",element:{type:{name:"Composite",className:"GenericResourceExpanded"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},Hht={type:{name:"Composite",className:"Plan",modelProperties:{name:{serializedName:"name",type:{name:"String"}},publisher:{serializedName:"publisher",type:{name:"String"}},product:{serializedName:"product",type:{name:"String"}},promotionCode:{serializedName:"promotionCode",type:{name:"String"}},version:{serializedName:"version",type:{name:"String"}}}}},Wht={type:{name:"Composite",className:"Sku",modelProperties:{name:{serializedName:"name",type:{name:"String"}},tier:{serializedName:"tier",type:{name:"String"}},size:{serializedName:"size",type:{name:"String"}},family:{serializedName:"family",type:{name:"String"}},model:{serializedName:"model",type:{name:"String"}},capacity:{serializedName:"capacity",type:{name:"Number"}}}}},Kht={type:{name:"Composite",className:"Identity",modelProperties:{principalId:{serializedName:"principalId",readOnly:!0,type:{name:"String"}},tenantId:{serializedName:"tenantId",readOnly:!0,type:{name:"String"}},type:{serializedName:"type",type:{name:"Enum",allowedValues:["SystemAssigned","UserAssigned","SystemAssigned, UserAssigned","None"]}},userAssignedIdentities:{serializedName:"userAssignedIdentities",type:{name:"Dictionary",value:{type:{name:"Composite",className:"IdentityUserAssignedIdentitiesValue"}}}}}}},Qht={type:{name:"Composite",className:"IdentityUserAssignedIdentitiesValue",modelProperties:{principalId:{serializedName:"principalId",readOnly:!0,type:{name:"String"}},clientId:{serializedName:"clientId",readOnly:!0,type:{name:"String"}}}}},vIe={type:{name:"Composite",className:"Resource",modelProperties:{id:{serializedName:"id",readOnly:!0,type:{name:"String"}},name:{serializedName:"name",readOnly:!0,type:{name:"String"}},type:{serializedName:"type",readOnly:!0,type:{name:"String"}},location:{serializedName:"location",type:{name:"String"}},extendedLocation:{serializedName:"extendedLocation",type:{name:"Composite",className:"ExtendedLocation"}},tags:{serializedName:"tags",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},Yht={type:{name:"Composite",className:"ExtendedLocation",modelProperties:{type:{serializedName:"type",type:{name:"String"}},name:{serializedName:"name",type:{name:"String"}}}}},vE={type:{name:"Composite",className:"ResourceGroup",modelProperties:{id:{serializedName:"id",readOnly:!0,type:{name:"String"}},name:{serializedName:"name",readOnly:!0,type:{name:"String"}},type:{serializedName:"type",readOnly:!0,type:{name:"String"}},properties:{serializedName:"properties",type:{name:"Composite",className:"ResourceGroupProperties"}},location:{serializedName:"location",required:!0,type:{name:"String"}},managedBy:{serializedName:"managedBy",type:{name:"String"}},tags:{serializedName:"tags",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},Xht={type:{name:"Composite",className:"ResourceGroupProperties",modelProperties:{provisioningState:{serializedName:"provisioningState",readOnly:!0,type:{name:"String"}}}}},bIe={type:{name:"Composite",className:"ResourceGroupPatchable",modelProperties:{name:{serializedName:"name",type:{name:"String"}},properties:{serializedName:"properties",type:{name:"Composite",className:"ResourceGroupProperties"}},managedBy:{serializedName:"managedBy",type:{name:"String"}},tags:{serializedName:"tags",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},_Ie={type:{name:"Composite",className:"ExportTemplateRequest",modelProperties:{resources:{serializedName:"resources",type:{name:"Sequence",element:{type:{name:"String"}}}},options:{serializedName:"options",type:{name:"String"}}}}},BA={type:{name:"Composite",className:"ResourceGroupExportResult",modelProperties:{template:{serializedName:"template",type:{name:"Dictionary",value:{type:{name:"any"}}}},error:{serializedName:"error",type:{name:"Composite",className:"ErrorResponse"}}}}},tX={type:{name:"Composite",className:"ResourceGroupListResult",modelProperties:{value:{serializedName:"value",type:{name:"Sequence",element:{type:{name:"Composite",className:"ResourceGroup"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},SIe={type:{name:"Composite",className:"ResourcesMoveInfo",modelProperties:{resources:{serializedName:"resources",type:{name:"Sequence",element:{type:{name:"String"}}}},targetResourceGroup:{serializedName:"targetResourceGroup",type:{name:"String"}}}}},G9={type:{name:"Composite",className:"TagValue",modelProperties:{id:{serializedName:"id",readOnly:!0,type:{name:"String"}},tagValue:{serializedName:"tagValue",type:{name:"String"}},count:{serializedName:"count",type:{name:"Composite",className:"TagCount"}}}}},Jht={type:{name:"Composite",className:"TagCount",modelProperties:{type:{serializedName:"type",type:{name:"String"}},value:{serializedName:"value",type:{name:"Number"}}}}},$9={type:{name:"Composite",className:"TagDetails",modelProperties:{id:{serializedName:"id",readOnly:!0,type:{name:"String"}},tagName:{serializedName:"tagName",type:{name:"String"}},count:{serializedName:"count",type:{name:"Composite",className:"TagCount"}},values:{serializedName:"values",type:{name:"Sequence",element:{type:{name:"Composite",className:"TagValue"}}}}}}},rX={type:{name:"Composite",className:"TagsListResult",modelProperties:{value:{serializedName:"value",type:{name:"Sequence",element:{type:{name:"Composite",className:"TagDetails"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},_E={type:{name:"Composite",className:"DeploymentOperation",modelProperties:{id:{serializedName:"id",readOnly:!0,type:{name:"String"}},operationId:{serializedName:"operationId",readOnly:!0,type:{name:"String"}},properties:{serializedName:"properties",type:{name:"Composite",className:"DeploymentOperationProperties"}}}}},Zht={type:{name:"Composite",className:"DeploymentOperationProperties",modelProperties:{provisioningOperation:{serializedName:"provisioningOperation",readOnly:!0,type:{name:"Enum",allowedValues:["NotSpecified","Create","Delete","Waiting","AzureAsyncOperationWaiting","ResourceCacheWaiting","Action","Read","EvaluateDeploymentOutput","DeploymentCleanup"]}},provisioningState:{serializedName:"provisioningState",readOnly:!0,type:{name:"String"}},timestamp:{serializedName:"timestamp",readOnly:!0,type:{name:"DateTime"}},duration:{serializedName:"duration",readOnly:!0,type:{name:"String"}},serviceRequestId:{serializedName:"serviceRequestId",readOnly:!0,type:{name:"String"}},statusCode:{serializedName:"statusCode",readOnly:!0,type:{name:"String"}},statusMessage:{serializedName:"statusMessage",type:{name:"Composite",className:"StatusMessage"}},targetResource:{serializedName:"targetResource",type:{name:"Composite",className:"TargetResource"}},request:{serializedName:"request",type:{name:"Composite",className:"HttpMessage"}},response:{serializedName:"response",type:{name:"Composite",className:"HttpMessage"}}}}},eft={type:{name:"Composite",className:"StatusMessage",modelProperties:{status:{serializedName:"status",type:{name:"String"}},error:{serializedName:"error",type:{name:"Composite",className:"ErrorResponse"}}}}},tft={type:{name:"Composite",className:"TargetResource",modelProperties:{id:{serializedName:"id",type:{name:"String"}},resourceName:{serializedName:"resourceName",type:{name:"String"}},resourceType:{serializedName:"resourceType",type:{name:"String"}}}}},rft={type:{name:"Composite",className:"HttpMessage",modelProperties:{content:{serializedName:"content",type:{name:"Dictionary",value:{type:{name:"any"}}}}}}},em={type:{name:"Composite",className:"DeploymentOperationsListResult",modelProperties:{value:{serializedName:"value",type:{name:"Sequence",element:{type:{name:"Composite",className:"DeploymentOperation"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},CIe={type:{name:"Composite",className:"TemplateHashResult",modelProperties:{minifiedTemplate:{serializedName:"minifiedTemplate",type:{name:"String"}},templateHash:{serializedName:"templateHash",type:{name:"String"}}}}},HA={type:{name:"Composite",className:"TagsResource",modelProperties:{id:{serializedName:"id",readOnly:!0,type:{name:"String"}},name:{serializedName:"name",readOnly:!0,type:{name:"String"}},type:{serializedName:"type",readOnly:!0,type:{name:"String"}},properties:{serializedName:"properties",type:{name:"Composite",className:"Tags"}}}}},nft={type:{name:"Composite",className:"Tags",modelProperties:{tags:{serializedName:"tags",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},PIe={type:{name:"Composite",className:"TagsPatchResource",modelProperties:{operation:{serializedName:"operation",type:{name:"String"}},properties:{serializedName:"properties",type:{name:"Composite",className:"Tags"}}}}},ift={type:{name:"Composite",className:"DeploymentExtendedFilter",modelProperties:{provisioningState:{serializedName:"provisioningState",type:{name:"String"}}}}},sft={type:{name:"Composite",className:"GenericResourceFilter",modelProperties:{resourceType:{serializedName:"resourceType",type:{name:"String"}},tagname:{serializedName:"tagname",type:{name:"String"}},tagvalue:{serializedName:"tagvalue",type:{name:"String"}}}}},oft={type:{name:"Composite",className:"ResourceGroupFilter",modelProperties:{tagName:{serializedName:"tagName",type:{name:"String"}},tagValue:{serializedName:"tagValue",type:{name:"String"}}}}},aft={type:{name:"Composite",className:"ResourceProviderOperationDisplayProperties",modelProperties:{publisher:{serializedName:"publisher",type:{name:"String"}},provider:{serializedName:"provider",type:{name:"String"}},resource:{serializedName:"resource",type:{name:"String"}},operation:{serializedName:"operation",type:{name:"String"}},description:{serializedName:"description",type:{name:"String"}}}}},cft={type:{name:"Composite",className:"SubResource",modelProperties:{id:{serializedName:"id",type:{name:"String"}}}}},lft={type:{name:"Composite",className:"DeploymentWhatIfProperties",modelProperties:Object.assign(Object.assign({},dIe.type.modelProperties),{whatIfSettings:{serializedName:"whatIfSettings",type:{name:"Composite",className:"DeploymentWhatIfSettings"}}})}},ea={type:{name:"Composite",className:"GenericResource",modelProperties:Object.assign(Object.assign({},vIe.type.modelProperties),{plan:{serializedName:"plan",type:{name:"Composite",className:"Plan"}},properties:{serializedName:"properties",type:{name:"Dictionary",value:{type:{name:"any"}}}},kind:{constraints:{Pattern:new RegExp("^[-\\w\\._,\\(\\)]+$")},serializedName:"kind",type:{name:"String"}},managedBy:{serializedName:"managedBy",type:{name:"String"}},sku:{serializedName:"sku",type:{name:"Composite",className:"Sku"}},identity:{serializedName:"identity",type:{name:"Composite",className:"Identity"}}})}},uft={type:{name:"Composite",className:"GenericResourceExpanded",modelProperties:Object.assign(Object.assign({},ea.type.modelProperties),{createdTime:{serializedName:"createdTime",readOnly:!0,type:{name:"DateTime"}},changedTime:{serializedName:"changedTime",readOnly:!0,type:{name:"DateTime"}},provisioningState:{serializedName:"provisioningState",readOnly:!0,type:{name:"String"}}})}},dft={type:{name:"Composite",className:"DeploymentsWhatIfAtTenantScopeHeaders",modelProperties:{location:{serializedName:"location",type:{name:"String"}},retryAfter:{serializedName:"retry-after",type:{name:"String"}}}}},pft={type:{name:"Composite",className:"DeploymentsWhatIfAtManagementGroupScopeHeaders",modelProperties:{location:{serializedName:"location",type:{name:"String"}},retryAfter:{serializedName:"retry-after",type:{name:"String"}}}}},mft={type:{name:"Composite",className:"DeploymentsWhatIfAtSubscriptionScopeHeaders",modelProperties:{location:{serializedName:"location",type:{name:"String"}},retryAfter:{serializedName:"retry-after",type:{name:"String"}}}}},hft={type:{name:"Composite",className:"DeploymentsWhatIfHeaders",modelProperties:{location:{serializedName:"location",type:{name:"String"}},retryAfter:{serializedName:"retry-after",type:{name:"String"}}}}},dv=Object.freeze({__proto__:null,OperationListResult:eX,Operation:yht,OperationDisplay:vht,CloudError:At,ErrorResponse:bht,ErrorAdditionalInfo:_ht,Deployment:uIe,DeploymentProperties:dIe,TemplateLink:Sht,ParametersLink:Cht,DebugSetting:Pht,OnErrorDeployment:wht,ExpressionEvaluationOptions:Eht,DeploymentExtended:Ms,DeploymentPropertiesExtended:Tht,Provider:GA,ProviderResourceType:Iht,ProviderExtendedLocation:Rht,Alias:xht,AliasPath:Oht,AliasPattern:Aht,AliasPathMetadata:Nht,ZoneMapping:Dht,ApiProfile:Mht,Dependency:kht,BasicDependency:Lht,OnErrorDeploymentExtended:qht,ResourceReference:zht,DeploymentValidateResult:Zo,DeploymentExportResult:bE,DeploymentListResult:Zp,ScopedDeployment:pIe,ScopedDeploymentWhatIf:mIe,DeploymentWhatIfSettings:Fht,WhatIfOperationResult:Pc,WhatIfChange:jht,WhatIfPropertyChange:Uht,DeploymentWhatIf:hIe,ProviderPermissionListResult:fIe,ProviderPermission:Bht,RoleDefinition:Ght,Permission:$ht,ProviderRegistrationRequest:gIe,ProviderConsentDefinition:Vht,ProviderListResult:$A,ProviderResourceTypeListResult:yIe,ResourceListResult:VA,Plan:Hht,Sku:Wht,Identity:Kht,IdentityUserAssignedIdentitiesValue:Qht,Resource:vIe,ExtendedLocation:Yht,ResourceGroup:vE,ResourceGroupProperties:Xht,ResourceGroupPatchable:bIe,ExportTemplateRequest:_Ie,ResourceGroupExportResult:BA,ResourceGroupListResult:tX,ResourcesMoveInfo:SIe,TagValue:G9,TagCount:Jht,TagDetails:$9,TagsListResult:rX,DeploymentOperation:_E,DeploymentOperationProperties:Zht,StatusMessage:eft,TargetResource:tft,HttpMessage:rft,DeploymentOperationsListResult:em,TemplateHashResult:CIe,TagsResource:HA,Tags:nft,TagsPatchResource:PIe,DeploymentExtendedFilter:ift,GenericResourceFilter:sft,ResourceGroupFilter:oft,ResourceProviderOperationDisplayProperties:aft,SubResource:cft,DeploymentWhatIfProperties:lft,GenericResource:ea,GenericResourceExpanded:uft,DeploymentsWhatIfAtTenantScopeHeaders:dft,DeploymentsWhatIfAtManagementGroupScopeHeaders:pft,DeploymentsWhatIfAtSubscriptionScopeHeaders:mft,DeploymentsWhatIfHeaders:hft}),Nt={parameterPath:"accept",mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Accept",type:{name:"String"}}},Dt={parameterPath:"$host",mapper:{serializedName:"$host",required:!0,type:{name:"String"}},skipEncoding:!0},Qt={parameterPath:"apiVersion",mapper:{defaultValue:"2021-04-01",isConstant:!0,serializedName:"api-version",type:{name:"String"}}},wc={parameterPath:"nextLink",mapper:{serializedName:"nextLink",required:!0,type:{name:"String"}},skipEncoding:!0},Kc={parameterPath:"scope",mapper:{serializedName:"scope",required:!0,type:{name:"String"}},skipEncoding:!0},an={parameterPath:"deploymentName",mapper:{constraints:{Pattern:new RegExp("^[-\\w\\._\\(\\)]+$"),MaxLength:64,MinLength:1},serializedName:"deploymentName",required:!0,type:{name:"String"}}},Is={parameterPath:["options","contentType"],mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},SE={parameterPath:"parameters",mapper:uIe},Qc={parameterPath:["options","filter"],mapper:{serializedName:"$filter",type:{name:"String"}}},ks={parameterPath:["options","top"],mapper:{serializedName:"$top",type:{name:"Number"}}},SU={parameterPath:"parameters",mapper:pIe},wIe={parameterPath:"parameters",mapper:mIe},uu={parameterPath:"groupId",mapper:{constraints:{MaxLength:90,MinLength:1},serializedName:"groupId",required:!0,type:{name:"String"}}},Qr={parameterPath:"subscriptionId",mapper:{serializedName:"subscriptionId",required:!0,type:{name:"String"}}},EIe={parameterPath:"parameters",mapper:hIe},Qs={parameterPath:"resourceGroupName",mapper:{constraints:{Pattern:new RegExp("^[-\\w\\._\\(\\)]+$"),MaxLength:90,MinLength:1},serializedName:"resourceGroupName",required:!0,type:{name:"String"}}},fft={parameterPath:"template",mapper:{serializedName:"template",required:!0,type:{name:"Dictionary",value:{type:{name:"any"}}}}},Vd={parameterPath:"resourceProviderNamespace",mapper:{serializedName:"resourceProviderNamespace",required:!0,type:{name:"String"}}},gft={parameterPath:["options","properties"],mapper:gIe},tm={parameterPath:["options","expand"],mapper:{serializedName:"$expand",type:{name:"String"}}},TIe={parameterPath:"parameters",mapper:SIe},IIe={parameterPath:"sourceResourceGroupName",mapper:{constraints:{Pattern:new RegExp("^[-\\w\\._\\(\\)]+$"),MaxLength:90,MinLength:1},serializedName:"sourceResourceGroupName",required:!0,type:{name:"String"}}},WA={parameterPath:"parentResourcePath",mapper:{serializedName:"parentResourcePath",required:!0,type:{name:"String"}},skipEncoding:!0},KA={parameterPath:"resourceType",mapper:{serializedName:"resourceType",required:!0,type:{name:"String"}},skipEncoding:!0},QA={parameterPath:"resourceName",mapper:{serializedName:"resourceName",required:!0,type:{name:"String"}}},yh={parameterPath:"apiVersion",mapper:{serializedName:"api-version",required:!0,type:{name:"String"}}},CU={parameterPath:"parameters",mapper:ea},YA={parameterPath:"resourceId",mapper:{serializedName:"resourceId",required:!0,type:{name:"String"}},skipEncoding:!0},yft={parameterPath:"parameters",mapper:vE},vft={parameterPath:["options","forceDeletionTypes"],mapper:{serializedName:"forceDeletionTypes",type:{name:"String"}}},bft={parameterPath:"parameters",mapper:bIe},_ft={parameterPath:"parameters",mapper:_Ie},Sft={parameterPath:"resourceGroupName",mapper:{constraints:{MaxLength:90,MinLength:1},serializedName:"resourceGroupName",required:!0,type:{name:"String"}}},PU={parameterPath:"tagName",mapper:{serializedName:"tagName",required:!0,type:{name:"String"}}},RIe={parameterPath:"tagValue",mapper:{serializedName:"tagValue",required:!0,type:{name:"String"}}},Cft={parameterPath:"parameters",mapper:HA},Pft={parameterPath:"parameters",mapper:PIe},XA={parameterPath:"operationId",mapper:{serializedName:"operationId",required:!0,type:{name:"String"}}},V9=class{constructor(e){this.client=e}list(e){let t=this.listPagingAll(e);return{next(){return t.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listPagingPage(e)}}listPagingPage(e){return Z.__asyncGenerator(this,arguments,function*(){let n=yield Z.__await(this._list(e));yield yield Z.__await(n.value||[]);let i=n.nextLink;for(;i;)n=yield Z.__await(this._listNext(i,e)),i=n.nextLink,yield yield Z.__await(n.value||[])})}listPagingAll(e){return Z.__asyncGenerator(this,arguments,function*(){var n,i;try{for(var s=Z.__asyncValues(this.listPagingPage(e)),o;o=yield Z.__await(s.next()),!o.done;){let a=o.value;yield Z.__await(yield*Z.__asyncDelegator(Z.__asyncValues(a)))}}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=s.return)&&(yield Z.__await(i.call(s)))}finally{if(n)throw n.error}}})}_list(e){return this.client.sendOperationRequest({options:e},wft)}_listNext(e,t){return this.client.sendOperationRequest({nextLink:e,options:t},Eft)}},xIe=gh.createSerializer(dv,!1),wft={path:"/providers/Microsoft.Resources/operations",httpMethod:"GET",responses:{200:{bodyMapper:eX},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt],headerParameters:[Nt],serializer:xIe},Eft={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:eX},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,wc],headerParameters:[Nt],serializer:xIe},Gi=class{constructor(e,t,n,i=n.path,s=n.httpMethod){this.sendOperationFn=e,this.args=t,this.spec=n,this.requestPath=i,this.requestMethod=s}sendInitialRequest(){return Z.__awaiter(this,void 0,void 0,function*(){return this.sendOperationFn(this.args,this.spec)})}sendPollRequest(e){return Z.__awaiter(this,void 0,void 0,function*(){let t=this.spec,n=Z.__rest(t,["requestBody"]);return this.sendOperationFn(this.args,Object.assign(Object.assign({},n),{path:e,httpMethod:"GET"}))})}},H9=class{constructor(e){this.client=e}listAtScope(e,t){let n=this.listAtScopePagingAll(e,t);return{next(){return n.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listAtScopePagingPage(e,t)}}listAtScopePagingPage(e,t){return Z.__asyncGenerator(this,arguments,function*(){let i=yield Z.__await(this._listAtScope(e,t));yield yield Z.__await(i.value||[]);let s=i.nextLink;for(;s;)i=yield Z.__await(this._listAtScopeNext(e,s,t)),s=i.nextLink,yield yield Z.__await(i.value||[])})}listAtScopePagingAll(e,t){return Z.__asyncGenerator(this,arguments,function*(){var i,s;try{for(var o=Z.__asyncValues(this.listAtScopePagingPage(e,t)),a;a=yield Z.__await(o.next()),!a.done;){let c=a.value;yield Z.__await(yield*Z.__asyncDelegator(Z.__asyncValues(c)))}}catch(c){i={error:c}}finally{try{a&&!a.done&&(s=o.return)&&(yield Z.__await(s.call(o)))}finally{if(i)throw i.error}}})}listAtTenantScope(e){let t=this.listAtTenantScopePagingAll(e);return{next(){return t.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listAtTenantScopePagingPage(e)}}listAtTenantScopePagingPage(e){return Z.__asyncGenerator(this,arguments,function*(){let n=yield Z.__await(this._listAtTenantScope(e));yield yield Z.__await(n.value||[]);let i=n.nextLink;for(;i;)n=yield Z.__await(this._listAtTenantScopeNext(i,e)),i=n.nextLink,yield yield Z.__await(n.value||[])})}listAtTenantScopePagingAll(e){return Z.__asyncGenerator(this,arguments,function*(){var n,i;try{for(var s=Z.__asyncValues(this.listAtTenantScopePagingPage(e)),o;o=yield Z.__await(s.next()),!o.done;){let a=o.value;yield Z.__await(yield*Z.__asyncDelegator(Z.__asyncValues(a)))}}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=s.return)&&(yield Z.__await(i.call(s)))}finally{if(n)throw n.error}}})}listAtManagementGroupScope(e,t){let n=this.listAtManagementGroupScopePagingAll(e,t);return{next(){return n.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listAtManagementGroupScopePagingPage(e,t)}}listAtManagementGroupScopePagingPage(e,t){return Z.__asyncGenerator(this,arguments,function*(){let i=yield Z.__await(this._listAtManagementGroupScope(e,t));yield yield Z.__await(i.value||[]);let s=i.nextLink;for(;s;)i=yield Z.__await(this._listAtManagementGroupScopeNext(e,s,t)),s=i.nextLink,yield yield Z.__await(i.value||[])})}listAtManagementGroupScopePagingAll(e,t){return Z.__asyncGenerator(this,arguments,function*(){var i,s;try{for(var o=Z.__asyncValues(this.listAtManagementGroupScopePagingPage(e,t)),a;a=yield Z.__await(o.next()),!a.done;){let c=a.value;yield Z.__await(yield*Z.__asyncDelegator(Z.__asyncValues(c)))}}catch(c){i={error:c}}finally{try{a&&!a.done&&(s=o.return)&&(yield Z.__await(s.call(o)))}finally{if(i)throw i.error}}})}listAtSubscriptionScope(e){let t=this.listAtSubscriptionScopePagingAll(e);return{next(){return t.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listAtSubscriptionScopePagingPage(e)}}listAtSubscriptionScopePagingPage(e){return Z.__asyncGenerator(this,arguments,function*(){let n=yield Z.__await(this._listAtSubscriptionScope(e));yield yield Z.__await(n.value||[]);let i=n.nextLink;for(;i;)n=yield Z.__await(this._listAtSubscriptionScopeNext(i,e)),i=n.nextLink,yield yield Z.__await(n.value||[])})}listAtSubscriptionScopePagingAll(e){return Z.__asyncGenerator(this,arguments,function*(){var n,i;try{for(var s=Z.__asyncValues(this.listAtSubscriptionScopePagingPage(e)),o;o=yield Z.__await(s.next()),!o.done;){let a=o.value;yield Z.__await(yield*Z.__asyncDelegator(Z.__asyncValues(a)))}}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=s.return)&&(yield Z.__await(i.call(s)))}finally{if(n)throw n.error}}})}listByResourceGroup(e,t){let n=this.listByResourceGroupPagingAll(e,t);return{next(){return n.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByResourceGroupPagingPage(e,t)}}listByResourceGroupPagingPage(e,t){return Z.__asyncGenerator(this,arguments,function*(){let i=yield Z.__await(this._listByResourceGroup(e,t));yield yield Z.__await(i.value||[]);let s=i.nextLink;for(;s;)i=yield Z.__await(this._listByResourceGroupNext(e,s,t)),s=i.nextLink,yield yield Z.__await(i.value||[])})}listByResourceGroupPagingAll(e,t){return Z.__asyncGenerator(this,arguments,function*(){var i,s;try{for(var o=Z.__asyncValues(this.listByResourceGroupPagingPage(e,t)),a;a=yield Z.__await(o.next()),!a.done;){let c=a.value;yield Z.__await(yield*Z.__asyncDelegator(Z.__asyncValues(c)))}}catch(c){i={error:c}}finally{try{a&&!a.done&&(s=o.return)&&(yield Z.__await(s.call(o)))}finally{if(i)throw i.error}}})}beginDeleteAtScope(e,t,n){return Z.__awaiter(this,void 0,void 0,function*(){let i=(c,l)=>Z.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),s=(c,l)=>Z.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield i(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),o=new Gi(s,{scope:e,deploymentName:t,options:n},Tft),a=new us.LroEngine(o,{resumeFrom:n?.resumeFrom,intervalInMs:n?.updateIntervalInMs});return yield a.poll(),a})}beginDeleteAtScopeAndWait(e,t,n){return Z.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDeleteAtScope(e,t,n)).pollUntilDone()})}checkExistenceAtScope(e,t,n){return this.client.sendOperationRequest({scope:e,deploymentName:t,options:n},Ift)}beginCreateOrUpdateAtScope(e,t,n,i){return Z.__awaiter(this,void 0,void 0,function*(){let s=(l,u)=>Z.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),o=(l,u)=>Z.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield s(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),a=new Gi(o,{scope:e,deploymentName:t,parameters:n,options:i},Rft),c=new us.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs});return yield c.poll(),c})}beginCreateOrUpdateAtScopeAndWait(e,t,n,i){return Z.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdateAtScope(e,t,n,i)).pollUntilDone()})}getAtScope(e,t,n){return this.client.sendOperationRequest({scope:e,deploymentName:t,options:n},xft)}cancelAtScope(e,t,n){return this.client.sendOperationRequest({scope:e,deploymentName:t,options:n},Oft)}beginValidateAtScope(e,t,n,i){return Z.__awaiter(this,void 0,void 0,function*(){let s=(l,u)=>Z.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),o=(l,u)=>Z.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield s(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),a=new Gi(o,{scope:e,deploymentName:t,parameters:n,options:i},Aft),c=new us.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs});return yield c.poll(),c})}beginValidateAtScopeAndWait(e,t,n,i){return Z.__awaiter(this,void 0,void 0,function*(){return(yield this.beginValidateAtScope(e,t,n,i)).pollUntilDone()})}exportTemplateAtScope(e,t,n){return this.client.sendOperationRequest({scope:e,deploymentName:t,options:n},Nft)}_listAtScope(e,t){return this.client.sendOperationRequest({scope:e,options:t},Dft)}beginDeleteAtTenantScope(e,t){return Z.__awaiter(this,void 0,void 0,function*(){let n=(a,c)=>Z.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(a,c)}),i=(a,c)=>Z.__awaiter(this,void 0,void 0,function*(){var l;let u,d=(l=a.options)===null||l===void 0?void 0:l.onResponse,p=(y,v)=>{u=y,d?.(y,v)},m=Object.assign(Object.assign({},a),{options:Object.assign(Object.assign({},a.options),{onResponse:p})});return{flatResponse:yield n(m,c),rawResponse:{statusCode:u.status,body:u.parsedBody,headers:u.headers.toJSON()}}}),s=new Gi(i,{deploymentName:e,options:t},Mft),o=new us.LroEngine(s,{resumeFrom:t?.resumeFrom,intervalInMs:t?.updateIntervalInMs});return yield o.poll(),o})}beginDeleteAtTenantScopeAndWait(e,t){return Z.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDeleteAtTenantScope(e,t)).pollUntilDone()})}checkExistenceAtTenantScope(e,t){return this.client.sendOperationRequest({deploymentName:e,options:t},kft)}beginCreateOrUpdateAtTenantScope(e,t,n){return Z.__awaiter(this,void 0,void 0,function*(){let i=(c,l)=>Z.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),s=(c,l)=>Z.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield i(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),o=new Gi(s,{deploymentName:e,parameters:t,options:n},Lft),a=new us.LroEngine(o,{resumeFrom:n?.resumeFrom,intervalInMs:n?.updateIntervalInMs});return yield a.poll(),a})}beginCreateOrUpdateAtTenantScopeAndWait(e,t,n){return Z.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdateAtTenantScope(e,t,n)).pollUntilDone()})}getAtTenantScope(e,t){return this.client.sendOperationRequest({deploymentName:e,options:t},qft)}cancelAtTenantScope(e,t){return this.client.sendOperationRequest({deploymentName:e,options:t},zft)}beginValidateAtTenantScope(e,t,n){return Z.__awaiter(this,void 0,void 0,function*(){let i=(c,l)=>Z.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),s=(c,l)=>Z.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield i(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),o=new Gi(s,{deploymentName:e,parameters:t,options:n},Fft),a=new us.LroEngine(o,{resumeFrom:n?.resumeFrom,intervalInMs:n?.updateIntervalInMs});return yield a.poll(),a})}beginValidateAtTenantScopeAndWait(e,t,n){return Z.__awaiter(this,void 0,void 0,function*(){return(yield this.beginValidateAtTenantScope(e,t,n)).pollUntilDone()})}beginWhatIfAtTenantScope(e,t,n){return Z.__awaiter(this,void 0,void 0,function*(){let i=(c,l)=>Z.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),s=(c,l)=>Z.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield i(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),o=new Gi(s,{deploymentName:e,parameters:t,options:n},jft),a=new us.LroEngine(o,{resumeFrom:n?.resumeFrom,intervalInMs:n?.updateIntervalInMs,lroResourceLocationConfig:"location"});return yield a.poll(),a})}beginWhatIfAtTenantScopeAndWait(e,t,n){return Z.__awaiter(this,void 0,void 0,function*(){return(yield this.beginWhatIfAtTenantScope(e,t,n)).pollUntilDone()})}exportTemplateAtTenantScope(e,t){return this.client.sendOperationRequest({deploymentName:e,options:t},Uft)}_listAtTenantScope(e){return this.client.sendOperationRequest({options:e},Bft)}beginDeleteAtManagementGroupScope(e,t,n){return Z.__awaiter(this,void 0,void 0,function*(){let i=(c,l)=>Z.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),s=(c,l)=>Z.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield i(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),o=new Gi(s,{groupId:e,deploymentName:t,options:n},Gft),a=new us.LroEngine(o,{resumeFrom:n?.resumeFrom,intervalInMs:n?.updateIntervalInMs});return yield a.poll(),a})}beginDeleteAtManagementGroupScopeAndWait(e,t,n){return Z.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDeleteAtManagementGroupScope(e,t,n)).pollUntilDone()})}checkExistenceAtManagementGroupScope(e,t,n){return this.client.sendOperationRequest({groupId:e,deploymentName:t,options:n},$ft)}beginCreateOrUpdateAtManagementGroupScope(e,t,n,i){return Z.__awaiter(this,void 0,void 0,function*(){let s=(l,u)=>Z.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),o=(l,u)=>Z.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield s(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),a=new Gi(o,{groupId:e,deploymentName:t,parameters:n,options:i},Vft),c=new us.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs});return yield c.poll(),c})}beginCreateOrUpdateAtManagementGroupScopeAndWait(e,t,n,i){return Z.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdateAtManagementGroupScope(e,t,n,i)).pollUntilDone()})}getAtManagementGroupScope(e,t,n){return this.client.sendOperationRequest({groupId:e,deploymentName:t,options:n},Hft)}cancelAtManagementGroupScope(e,t,n){return this.client.sendOperationRequest({groupId:e,deploymentName:t,options:n},Wft)}beginValidateAtManagementGroupScope(e,t,n,i){return Z.__awaiter(this,void 0,void 0,function*(){let s=(l,u)=>Z.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),o=(l,u)=>Z.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield s(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),a=new Gi(o,{groupId:e,deploymentName:t,parameters:n,options:i},Kft),c=new us.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs});return yield c.poll(),c})}beginValidateAtManagementGroupScopeAndWait(e,t,n,i){return Z.__awaiter(this,void 0,void 0,function*(){return(yield this.beginValidateAtManagementGroupScope(e,t,n,i)).pollUntilDone()})}beginWhatIfAtManagementGroupScope(e,t,n,i){return Z.__awaiter(this,void 0,void 0,function*(){let s=(l,u)=>Z.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),o=(l,u)=>Z.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield s(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),a=new Gi(o,{groupId:e,deploymentName:t,parameters:n,options:i},Qft),c=new us.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs,lroResourceLocationConfig:"location"});return yield c.poll(),c})}beginWhatIfAtManagementGroupScopeAndWait(e,t,n,i){return Z.__awaiter(this,void 0,void 0,function*(){return(yield this.beginWhatIfAtManagementGroupScope(e,t,n,i)).pollUntilDone()})}exportTemplateAtManagementGroupScope(e,t,n){return this.client.sendOperationRequest({groupId:e,deploymentName:t,options:n},Yft)}_listAtManagementGroupScope(e,t){return this.client.sendOperationRequest({groupId:e,options:t},Xft)}beginDeleteAtSubscriptionScope(e,t){return Z.__awaiter(this,void 0,void 0,function*(){let n=(a,c)=>Z.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(a,c)}),i=(a,c)=>Z.__awaiter(this,void 0,void 0,function*(){var l;let u,d=(l=a.options)===null||l===void 0?void 0:l.onResponse,p=(y,v)=>{u=y,d?.(y,v)},m=Object.assign(Object.assign({},a),{options:Object.assign(Object.assign({},a.options),{onResponse:p})});return{flatResponse:yield n(m,c),rawResponse:{statusCode:u.status,body:u.parsedBody,headers:u.headers.toJSON()}}}),s=new Gi(i,{deploymentName:e,options:t},Jft),o=new us.LroEngine(s,{resumeFrom:t?.resumeFrom,intervalInMs:t?.updateIntervalInMs});return yield o.poll(),o})}beginDeleteAtSubscriptionScopeAndWait(e,t){return Z.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDeleteAtSubscriptionScope(e,t)).pollUntilDone()})}checkExistenceAtSubscriptionScope(e,t){return this.client.sendOperationRequest({deploymentName:e,options:t},Zft)}beginCreateOrUpdateAtSubscriptionScope(e,t,n){return Z.__awaiter(this,void 0,void 0,function*(){let i=(c,l)=>Z.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),s=(c,l)=>Z.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield i(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),o=new Gi(s,{deploymentName:e,parameters:t,options:n},egt),a=new us.LroEngine(o,{resumeFrom:n?.resumeFrom,intervalInMs:n?.updateIntervalInMs});return yield a.poll(),a})}beginCreateOrUpdateAtSubscriptionScopeAndWait(e,t,n){return Z.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdateAtSubscriptionScope(e,t,n)).pollUntilDone()})}getAtSubscriptionScope(e,t){return this.client.sendOperationRequest({deploymentName:e,options:t},tgt)}cancelAtSubscriptionScope(e,t){return this.client.sendOperationRequest({deploymentName:e,options:t},rgt)}beginValidateAtSubscriptionScope(e,t,n){return Z.__awaiter(this,void 0,void 0,function*(){let i=(c,l)=>Z.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),s=(c,l)=>Z.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield i(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),o=new Gi(s,{deploymentName:e,parameters:t,options:n},ngt),a=new us.LroEngine(o,{resumeFrom:n?.resumeFrom,intervalInMs:n?.updateIntervalInMs});return yield a.poll(),a})}beginValidateAtSubscriptionScopeAndWait(e,t,n){return Z.__awaiter(this,void 0,void 0,function*(){return(yield this.beginValidateAtSubscriptionScope(e,t,n)).pollUntilDone()})}beginWhatIfAtSubscriptionScope(e,t,n){return Z.__awaiter(this,void 0,void 0,function*(){let i=(c,l)=>Z.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),s=(c,l)=>Z.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield i(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),o=new Gi(s,{deploymentName:e,parameters:t,options:n},igt),a=new us.LroEngine(o,{resumeFrom:n?.resumeFrom,intervalInMs:n?.updateIntervalInMs,lroResourceLocationConfig:"location"});return yield a.poll(),a})}beginWhatIfAtSubscriptionScopeAndWait(e,t,n){return Z.__awaiter(this,void 0,void 0,function*(){return(yield this.beginWhatIfAtSubscriptionScope(e,t,n)).pollUntilDone()})}exportTemplateAtSubscriptionScope(e,t){return this.client.sendOperationRequest({deploymentName:e,options:t},sgt)}_listAtSubscriptionScope(e){return this.client.sendOperationRequest({options:e},ogt)}beginDelete(e,t,n){return Z.__awaiter(this,void 0,void 0,function*(){let i=(c,l)=>Z.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),s=(c,l)=>Z.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield i(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),o=new Gi(s,{resourceGroupName:e,deploymentName:t,options:n},agt),a=new us.LroEngine(o,{resumeFrom:n?.resumeFrom,intervalInMs:n?.updateIntervalInMs});return yield a.poll(),a})}beginDeleteAndWait(e,t,n){return Z.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDelete(e,t,n)).pollUntilDone()})}checkExistence(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,deploymentName:t,options:n},cgt)}beginCreateOrUpdate(e,t,n,i){return Z.__awaiter(this,void 0,void 0,function*(){let s=(l,u)=>Z.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),o=(l,u)=>Z.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield s(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),a=new Gi(o,{resourceGroupName:e,deploymentName:t,parameters:n,options:i},lgt),c=new us.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs});return yield c.poll(),c})}beginCreateOrUpdateAndWait(e,t,n,i){return Z.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i)).pollUntilDone()})}get(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,deploymentName:t,options:n},ugt)}cancel(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,deploymentName:t,options:n},dgt)}beginValidate(e,t,n,i){return Z.__awaiter(this,void 0,void 0,function*(){let s=(l,u)=>Z.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),o=(l,u)=>Z.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield s(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),a=new Gi(o,{resourceGroupName:e,deploymentName:t,parameters:n,options:i},pgt),c=new us.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs});return yield c.poll(),c})}beginValidateAndWait(e,t,n,i){return Z.__awaiter(this,void 0,void 0,function*(){return(yield this.beginValidate(e,t,n,i)).pollUntilDone()})}beginWhatIf(e,t,n,i){return Z.__awaiter(this,void 0,void 0,function*(){let s=(l,u)=>Z.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),o=(l,u)=>Z.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield s(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),a=new Gi(o,{resourceGroupName:e,deploymentName:t,parameters:n,options:i},mgt),c=new us.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs,lroResourceLocationConfig:"location"});return yield c.poll(),c})}beginWhatIfAndWait(e,t,n,i){return Z.__awaiter(this,void 0,void 0,function*(){return(yield this.beginWhatIf(e,t,n,i)).pollUntilDone()})}exportTemplate(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,deploymentName:t,options:n},hgt)}_listByResourceGroup(e,t){return this.client.sendOperationRequest({resourceGroupName:e,options:t},fgt)}calculateTemplateHash(e,t){return this.client.sendOperationRequest({template:e,options:t},ggt)}_listAtScopeNext(e,t,n){return this.client.sendOperationRequest({scope:e,nextLink:t,options:n},ygt)}_listAtTenantScopeNext(e,t){return this.client.sendOperationRequest({nextLink:e,options:t},vgt)}_listAtManagementGroupScopeNext(e,t,n){return this.client.sendOperationRequest({groupId:e,nextLink:t,options:n},bgt)}_listAtSubscriptionScopeNext(e,t){return this.client.sendOperationRequest({nextLink:e,options:t},_gt)}_listByResourceGroupNext(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,nextLink:t,options:n},Sgt)}},vn=gh.createSerializer(dv,!1),Tft={path:"/{scope}/providers/Microsoft.Resources/deployments/{deploymentName}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,Kc,an],headerParameters:[Nt],serializer:vn},Ift={path:"/{scope}/providers/Microsoft.Resources/deployments/{deploymentName}",httpMethod:"HEAD",responses:{204:{},404:{},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,Kc,an],headerParameters:[Nt],serializer:vn},Rft={path:"/{scope}/providers/Microsoft.Resources/deployments/{deploymentName}",httpMethod:"PUT",responses:{200:{bodyMapper:Ms},201:{bodyMapper:Ms},202:{bodyMapper:Ms},204:{bodyMapper:Ms},default:{bodyMapper:At}},requestBody:SE,queryParameters:[Qt],urlParameters:[Dt,Kc,an],headerParameters:[Nt,Is],mediaType:"json",serializer:vn},xft={path:"/{scope}/providers/Microsoft.Resources/deployments/{deploymentName}",httpMethod:"GET",responses:{200:{bodyMapper:Ms},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,Kc,an],headerParameters:[Nt],serializer:vn},Oft={path:"/{scope}/providers/Microsoft.Resources/deployments/{deploymentName}/cancel",httpMethod:"POST",responses:{204:{},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,Kc,an],headerParameters:[Nt],serializer:vn},Aft={path:"/{scope}/providers/Microsoft.Resources/deployments/{deploymentName}/validate",httpMethod:"POST",responses:{200:{bodyMapper:Zo},201:{bodyMapper:Zo},202:{bodyMapper:Zo},204:{bodyMapper:Zo},default:{bodyMapper:At}},requestBody:SE,queryParameters:[Qt],urlParameters:[Dt,Kc,an],headerParameters:[Nt,Is],mediaType:"json",serializer:vn},Nft={path:"/{scope}/providers/Microsoft.Resources/deployments/{deploymentName}/exportTemplate",httpMethod:"POST",responses:{200:{bodyMapper:bE},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,Kc,an],headerParameters:[Nt],serializer:vn},Dft={path:"/{scope}/providers/Microsoft.Resources/deployments/",httpMethod:"GET",responses:{200:{bodyMapper:Zp},default:{bodyMapper:At}},queryParameters:[Qt,Qc,ks],urlParameters:[Dt,Kc],headerParameters:[Nt],serializer:vn},Mft={path:"/providers/Microsoft.Resources/deployments/{deploymentName}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,an],headerParameters:[Nt],serializer:vn},kft={path:"/providers/Microsoft.Resources/deployments/{deploymentName}",httpMethod:"HEAD",responses:{204:{},404:{},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,an],headerParameters:[Nt],serializer:vn},Lft={path:"/providers/Microsoft.Resources/deployments/{deploymentName}",httpMethod:"PUT",responses:{200:{bodyMapper:Ms},201:{bodyMapper:Ms},202:{bodyMapper:Ms},204:{bodyMapper:Ms},default:{bodyMapper:At}},requestBody:SU,queryParameters:[Qt],urlParameters:[Dt,an],headerParameters:[Nt,Is],mediaType:"json",serializer:vn},qft={path:"/providers/Microsoft.Resources/deployments/{deploymentName}",httpMethod:"GET",responses:{200:{bodyMapper:Ms},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,an],headerParameters:[Nt],serializer:vn},zft={path:"/providers/Microsoft.Resources/deployments/{deploymentName}/cancel",httpMethod:"POST",responses:{204:{},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,an],headerParameters:[Nt],serializer:vn},Fft={path:"/providers/Microsoft.Resources/deployments/{deploymentName}/validate",httpMethod:"POST",responses:{200:{bodyMapper:Zo},201:{bodyMapper:Zo},202:{bodyMapper:Zo},204:{bodyMapper:Zo},default:{bodyMapper:At}},requestBody:SU,queryParameters:[Qt],urlParameters:[Dt,an],headerParameters:[Nt,Is],mediaType:"json",serializer:vn},jft={path:"/providers/Microsoft.Resources/deployments/{deploymentName}/whatIf",httpMethod:"POST",responses:{200:{bodyMapper:Pc},201:{bodyMapper:Pc},202:{bodyMapper:Pc},204:{bodyMapper:Pc},default:{bodyMapper:At}},requestBody:wIe,queryParameters:[Qt],urlParameters:[Dt,an],headerParameters:[Nt,Is],mediaType:"json",serializer:vn},Uft={path:"/providers/Microsoft.Resources/deployments/{deploymentName}/exportTemplate",httpMethod:"POST",responses:{200:{bodyMapper:bE},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,an],headerParameters:[Nt],serializer:vn},Bft={path:"/providers/Microsoft.Resources/deployments/",httpMethod:"GET",responses:{200:{bodyMapper:Zp},default:{bodyMapper:At}},queryParameters:[Qt,Qc,ks],urlParameters:[Dt],headerParameters:[Nt],serializer:vn},Gft={path:"/providers/Microsoft.Management/managementGroups/{groupId}/providers/Microsoft.Resources/deployments/{deploymentName}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,an,uu],headerParameters:[Nt],serializer:vn},$ft={path:"/providers/Microsoft.Management/managementGroups/{groupId}/providers/Microsoft.Resources/deployments/{deploymentName}",httpMethod:"HEAD",responses:{204:{},404:{},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,an,uu],headerParameters:[Nt],serializer:vn},Vft={path:"/providers/Microsoft.Management/managementGroups/{groupId}/providers/Microsoft.Resources/deployments/{deploymentName}",httpMethod:"PUT",responses:{200:{bodyMapper:Ms},201:{bodyMapper:Ms},202:{bodyMapper:Ms},204:{bodyMapper:Ms},default:{bodyMapper:At}},requestBody:SU,queryParameters:[Qt],urlParameters:[Dt,an,uu],headerParameters:[Nt,Is],mediaType:"json",serializer:vn},Hft={path:"/providers/Microsoft.Management/managementGroups/{groupId}/providers/Microsoft.Resources/deployments/{deploymentName}",httpMethod:"GET",responses:{200:{bodyMapper:Ms},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,an,uu],headerParameters:[Nt],serializer:vn},Wft={path:"/providers/Microsoft.Management/managementGroups/{groupId}/providers/Microsoft.Resources/deployments/{deploymentName}/cancel",httpMethod:"POST",responses:{204:{},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,an,uu],headerParameters:[Nt],serializer:vn},Kft={path:"/providers/Microsoft.Management/managementGroups/{groupId}/providers/Microsoft.Resources/deployments/{deploymentName}/validate",httpMethod:"POST",responses:{200:{bodyMapper:Zo},201:{bodyMapper:Zo},202:{bodyMapper:Zo},204:{bodyMapper:Zo},default:{bodyMapper:At}},requestBody:SU,queryParameters:[Qt],urlParameters:[Dt,an,uu],headerParameters:[Nt,Is],mediaType:"json",serializer:vn},Qft={path:"/providers/Microsoft.Management/managementGroups/{groupId}/providers/Microsoft.Resources/deployments/{deploymentName}/whatIf",httpMethod:"POST",responses:{200:{bodyMapper:Pc},201:{bodyMapper:Pc},202:{bodyMapper:Pc},204:{bodyMapper:Pc},default:{bodyMapper:At}},requestBody:wIe,queryParameters:[Qt],urlParameters:[Dt,an,uu],headerParameters:[Nt,Is],mediaType:"json",serializer:vn},Yft={path:"/providers/Microsoft.Management/managementGroups/{groupId}/providers/Microsoft.Resources/deployments/{deploymentName}/exportTemplate",httpMethod:"POST",responses:{200:{bodyMapper:bE},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,an,uu],headerParameters:[Nt],serializer:vn},Xft={path:"/providers/Microsoft.Management/managementGroups/{groupId}/providers/Microsoft.Resources/deployments/",httpMethod:"GET",responses:{200:{bodyMapper:Zp},default:{bodyMapper:At}},queryParameters:[Qt,Qc,ks],urlParameters:[Dt,uu],headerParameters:[Nt],serializer:vn},Jft={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Resources/deployments/{deploymentName}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,an,Qr],headerParameters:[Nt],serializer:vn},Zft={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Resources/deployments/{deploymentName}",httpMethod:"HEAD",responses:{204:{},404:{},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,an,Qr],headerParameters:[Nt],serializer:vn},egt={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Resources/deployments/{deploymentName}",httpMethod:"PUT",responses:{200:{bodyMapper:Ms},201:{bodyMapper:Ms},202:{bodyMapper:Ms},204:{bodyMapper:Ms},default:{bodyMapper:At}},requestBody:SE,queryParameters:[Qt],urlParameters:[Dt,an,Qr],headerParameters:[Nt,Is],mediaType:"json",serializer:vn},tgt={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Resources/deployments/{deploymentName}",httpMethod:"GET",responses:{200:{bodyMapper:Ms},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,an,Qr],headerParameters:[Nt],serializer:vn},rgt={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Resources/deployments/{deploymentName}/cancel",httpMethod:"POST",responses:{204:{},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,an,Qr],headerParameters:[Nt],serializer:vn},ngt={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Resources/deployments/{deploymentName}/validate",httpMethod:"POST",responses:{200:{bodyMapper:Zo},201:{bodyMapper:Zo},202:{bodyMapper:Zo},204:{bodyMapper:Zo},default:{bodyMapper:At}},requestBody:SE,queryParameters:[Qt],urlParameters:[Dt,an,Qr],headerParameters:[Nt,Is],mediaType:"json",serializer:vn},igt={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Resources/deployments/{deploymentName}/whatIf",httpMethod:"POST",responses:{200:{bodyMapper:Pc},201:{bodyMapper:Pc},202:{bodyMapper:Pc},204:{bodyMapper:Pc},default:{bodyMapper:At}},requestBody:EIe,queryParameters:[Qt],urlParameters:[Dt,an,Qr],headerParameters:[Nt,Is],mediaType:"json",serializer:vn},sgt={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Resources/deployments/{deploymentName}/exportTemplate",httpMethod:"POST",responses:{200:{bodyMapper:bE},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,an,Qr],headerParameters:[Nt],serializer:vn},ogt={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Resources/deployments/",httpMethod:"GET",responses:{200:{bodyMapper:Zp},default:{bodyMapper:At}},queryParameters:[Qt,Qc,ks],urlParameters:[Dt,Qr],headerParameters:[Nt],serializer:vn},agt={path:"/subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/Microsoft.Resources/deployments/{deploymentName}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,an,Qr,Qs],headerParameters:[Nt],serializer:vn},cgt={path:"/subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/Microsoft.Resources/deployments/{deploymentName}",httpMethod:"HEAD",responses:{204:{},404:{},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,an,Qr,Qs],headerParameters:[Nt],serializer:vn},lgt={path:"/subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/Microsoft.Resources/deployments/{deploymentName}",httpMethod:"PUT",responses:{200:{bodyMapper:Ms},201:{bodyMapper:Ms},202:{bodyMapper:Ms},204:{bodyMapper:Ms},default:{bodyMapper:At}},requestBody:SE,queryParameters:[Qt],urlParameters:[Dt,an,Qr,Qs],headerParameters:[Nt,Is],mediaType:"json",serializer:vn},ugt={path:"/subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/Microsoft.Resources/deployments/{deploymentName}",httpMethod:"GET",responses:{200:{bodyMapper:Ms},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,an,Qr,Qs],headerParameters:[Nt],serializer:vn},dgt={path:"/subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/Microsoft.Resources/deployments/{deploymentName}/cancel",httpMethod:"POST",responses:{204:{},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,an,Qr,Qs],headerParameters:[Nt],serializer:vn},pgt={path:"/subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/Microsoft.Resources/deployments/{deploymentName}/validate",httpMethod:"POST",responses:{200:{bodyMapper:Zo},201:{bodyMapper:Zo},202:{bodyMapper:Zo},204:{bodyMapper:Zo},default:{bodyMapper:At}},requestBody:SE,queryParameters:[Qt],urlParameters:[Dt,an,Qr,Qs],headerParameters:[Nt,Is],mediaType:"json",serializer:vn},mgt={path:"/subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/Microsoft.Resources/deployments/{deploymentName}/whatIf",httpMethod:"POST",responses:{200:{bodyMapper:Pc},201:{bodyMapper:Pc},202:{bodyMapper:Pc},204:{bodyMapper:Pc},default:{bodyMapper:At}},requestBody:EIe,queryParameters:[Qt],urlParameters:[Dt,an,Qr,Qs],headerParameters:[Nt,Is],mediaType:"json",serializer:vn},hgt={path:"/subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/Microsoft.Resources/deployments/{deploymentName}/exportTemplate",httpMethod:"POST",responses:{200:{bodyMapper:bE},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,an,Qr,Qs],headerParameters:[Nt],serializer:vn},fgt={path:"/subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/Microsoft.Resources/deployments/",httpMethod:"GET",responses:{200:{bodyMapper:Zp},default:{bodyMapper:At}},queryParameters:[Qt,Qc,ks],urlParameters:[Dt,Qr,Qs],headerParameters:[Nt],serializer:vn},ggt={path:"/providers/Microsoft.Resources/calculateTemplateHash",httpMethod:"POST",responses:{200:{bodyMapper:CIe},default:{bodyMapper:At}},requestBody:fft,queryParameters:[Qt],urlParameters:[Dt],headerParameters:[Nt,Is],mediaType:"json",serializer:vn},ygt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Zp},default:{bodyMapper:At}},queryParameters:[Qt,Qc,ks],urlParameters:[Dt,wc,Kc],headerParameters:[Nt],serializer:vn},vgt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Zp},default:{bodyMapper:At}},queryParameters:[Qt,Qc,ks],urlParameters:[Dt,wc],headerParameters:[Nt],serializer:vn},bgt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Zp},default:{bodyMapper:At}},queryParameters:[Qt,Qc,ks],urlParameters:[Dt,wc,uu],headerParameters:[Nt],serializer:vn},_gt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Zp},default:{bodyMapper:At}},queryParameters:[Qt,Qc,ks],urlParameters:[Dt,wc,Qr],headerParameters:[Nt],serializer:vn},Sgt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Zp},default:{bodyMapper:At}},queryParameters:[Qt,Qc,ks],urlParameters:[Dt,wc,Qr,Qs],headerParameters:[Nt],serializer:vn},W9=class{constructor(e){this.client=e}list(e){let t=this.listPagingAll(e);return{next(){return t.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listPagingPage(e)}}listPagingPage(e){return Z.__asyncGenerator(this,arguments,function*(){let n=yield Z.__await(this._list(e));yield yield Z.__await(n.value||[]);let i=n.nextLink;for(;i;)n=yield Z.__await(this._listNext(i,e)),i=n.nextLink,yield yield Z.__await(n.value||[])})}listPagingAll(e){return Z.__asyncGenerator(this,arguments,function*(){var n,i;try{for(var s=Z.__asyncValues(this.listPagingPage(e)),o;o=yield Z.__await(s.next()),!o.done;){let a=o.value;yield Z.__await(yield*Z.__asyncDelegator(Z.__asyncValues(a)))}}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=s.return)&&(yield Z.__await(i.call(s)))}finally{if(n)throw n.error}}})}listAtTenantScope(e){let t=this.listAtTenantScopePagingAll(e);return{next(){return t.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listAtTenantScopePagingPage(e)}}listAtTenantScopePagingPage(e){return Z.__asyncGenerator(this,arguments,function*(){let n=yield Z.__await(this._listAtTenantScope(e));yield yield Z.__await(n.value||[]);let i=n.nextLink;for(;i;)n=yield Z.__await(this._listAtTenantScopeNext(i,e)),i=n.nextLink,yield yield Z.__await(n.value||[])})}listAtTenantScopePagingAll(e){return Z.__asyncGenerator(this,arguments,function*(){var n,i;try{for(var s=Z.__asyncValues(this.listAtTenantScopePagingPage(e)),o;o=yield Z.__await(s.next()),!o.done;){let a=o.value;yield Z.__await(yield*Z.__asyncDelegator(Z.__asyncValues(a)))}}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=s.return)&&(yield Z.__await(i.call(s)))}finally{if(n)throw n.error}}})}unregister(e,t){return this.client.sendOperationRequest({resourceProviderNamespace:e,options:t},Cgt)}registerAtManagementGroupScope(e,t,n){return this.client.sendOperationRequest({resourceProviderNamespace:e,groupId:t,options:n},Pgt)}providerPermissions(e,t){return this.client.sendOperationRequest({resourceProviderNamespace:e,options:t},wgt)}register(e,t){return this.client.sendOperationRequest({resourceProviderNamespace:e,options:t},Egt)}_list(e){return this.client.sendOperationRequest({options:e},Tgt)}_listAtTenantScope(e){return this.client.sendOperationRequest({options:e},Igt)}get(e,t){return this.client.sendOperationRequest({resourceProviderNamespace:e,options:t},Rgt)}getAtTenantScope(e,t){return this.client.sendOperationRequest({resourceProviderNamespace:e,options:t},xgt)}_listNext(e,t){return this.client.sendOperationRequest({nextLink:e,options:t},Ogt)}_listAtTenantScopeNext(e,t){return this.client.sendOperationRequest({nextLink:e,options:t},Agt)}},vh=gh.createSerializer(dv,!1),Cgt={path:"/subscriptions/{subscriptionId}/providers/{resourceProviderNamespace}/unregister",httpMethod:"POST",responses:{200:{bodyMapper:GA},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,Qr,Vd],headerParameters:[Nt],serializer:vh},Pgt={path:"/providers/Microsoft.Management/managementGroups/{groupId}/providers/{resourceProviderNamespace}/register",httpMethod:"POST",responses:{200:{},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,uu,Vd],headerParameters:[Nt],serializer:vh},wgt={path:"/subscriptions/{subscriptionId}/providers/{resourceProviderNamespace}/providerPermissions",httpMethod:"GET",responses:{200:{bodyMapper:fIe},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,Qr,Vd],headerParameters:[Nt],serializer:vh},Egt={path:"/subscriptions/{subscriptionId}/providers/{resourceProviderNamespace}/register",httpMethod:"POST",responses:{200:{bodyMapper:GA},default:{bodyMapper:At}},requestBody:gft,queryParameters:[Qt],urlParameters:[Dt,Qr,Vd],headerParameters:[Nt,Is],mediaType:"json",serializer:vh},Tgt={path:"/subscriptions/{subscriptionId}/providers",httpMethod:"GET",responses:{200:{bodyMapper:$A},default:{bodyMapper:At}},queryParameters:[Qt,tm],urlParameters:[Dt,Qr],headerParameters:[Nt],serializer:vh},Igt={path:"/providers",httpMethod:"GET",responses:{200:{bodyMapper:$A},default:{bodyMapper:At}},queryParameters:[Qt,tm],urlParameters:[Dt],headerParameters:[Nt],serializer:vh},Rgt={path:"/subscriptions/{subscriptionId}/providers/{resourceProviderNamespace}",httpMethod:"GET",responses:{200:{bodyMapper:GA},default:{bodyMapper:At}},queryParameters:[Qt,tm],urlParameters:[Dt,Qr,Vd],headerParameters:[Nt],serializer:vh},xgt={path:"/providers/{resourceProviderNamespace}",httpMethod:"GET",responses:{200:{bodyMapper:GA},default:{bodyMapper:At}},queryParameters:[Qt,tm],urlParameters:[Dt,Vd],headerParameters:[Nt],serializer:vh},Ogt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:$A},default:{bodyMapper:At}},queryParameters:[Qt,tm],urlParameters:[Dt,wc,Qr],headerParameters:[Nt],serializer:vh},Agt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:$A},default:{bodyMapper:At}},queryParameters:[Qt,tm],urlParameters:[Dt,wc],headerParameters:[Nt],serializer:vh},K9=class{constructor(e){this.client=e}list(e,t){return this.client.sendOperationRequest({resourceProviderNamespace:e,options:t},Dgt)}},Ngt=gh.createSerializer(dv,!1),Dgt={path:"/subscriptions/{subscriptionId}/providers/{resourceProviderNamespace}/resourceTypes",httpMethod:"GET",responses:{200:{bodyMapper:yIe},default:{bodyMapper:At}},queryParameters:[Qt,tm],urlParameters:[Dt,Qr,Vd],headerParameters:[Nt],serializer:Ngt},Q9=class{constructor(e){this.client=e}listByResourceGroup(e,t){let n=this.listByResourceGroupPagingAll(e,t);return{next(){return n.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByResourceGroupPagingPage(e,t)}}listByResourceGroupPagingPage(e,t){return Z.__asyncGenerator(this,arguments,function*(){let i=yield Z.__await(this._listByResourceGroup(e,t));yield yield Z.__await(i.value||[]);let s=i.nextLink;for(;s;)i=yield Z.__await(this._listByResourceGroupNext(e,s,t)),s=i.nextLink,yield yield Z.__await(i.value||[])})}listByResourceGroupPagingAll(e,t){return Z.__asyncGenerator(this,arguments,function*(){var i,s;try{for(var o=Z.__asyncValues(this.listByResourceGroupPagingPage(e,t)),a;a=yield Z.__await(o.next()),!a.done;){let c=a.value;yield Z.__await(yield*Z.__asyncDelegator(Z.__asyncValues(c)))}}catch(c){i={error:c}}finally{try{a&&!a.done&&(s=o.return)&&(yield Z.__await(s.call(o)))}finally{if(i)throw i.error}}})}list(e){let t=this.listPagingAll(e);return{next(){return t.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listPagingPage(e)}}listPagingPage(e){return Z.__asyncGenerator(this,arguments,function*(){let n=yield Z.__await(this._list(e));yield yield Z.__await(n.value||[]);let i=n.nextLink;for(;i;)n=yield Z.__await(this._listNext(i,e)),i=n.nextLink,yield yield Z.__await(n.value||[])})}listPagingAll(e){return Z.__asyncGenerator(this,arguments,function*(){var n,i;try{for(var s=Z.__asyncValues(this.listPagingPage(e)),o;o=yield Z.__await(s.next()),!o.done;){let a=o.value;yield Z.__await(yield*Z.__asyncDelegator(Z.__asyncValues(a)))}}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=s.return)&&(yield Z.__await(i.call(s)))}finally{if(n)throw n.error}}})}_listByResourceGroup(e,t){return this.client.sendOperationRequest({resourceGroupName:e,options:t},Mgt)}beginMoveResources(e,t,n){return Z.__awaiter(this,void 0,void 0,function*(){let i=(c,l)=>Z.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),s=(c,l)=>Z.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield i(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),o=new Gi(s,{sourceResourceGroupName:e,parameters:t,options:n},kgt),a=new us.LroEngine(o,{resumeFrom:n?.resumeFrom,intervalInMs:n?.updateIntervalInMs});return yield a.poll(),a})}beginMoveResourcesAndWait(e,t,n){return Z.__awaiter(this,void 0,void 0,function*(){return(yield this.beginMoveResources(e,t,n)).pollUntilDone()})}beginValidateMoveResources(e,t,n){return Z.__awaiter(this,void 0,void 0,function*(){let i=(c,l)=>Z.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),s=(c,l)=>Z.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield i(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),o=new Gi(s,{sourceResourceGroupName:e,parameters:t,options:n},Lgt),a=new us.LroEngine(o,{resumeFrom:n?.resumeFrom,intervalInMs:n?.updateIntervalInMs});return yield a.poll(),a})}beginValidateMoveResourcesAndWait(e,t,n){return Z.__awaiter(this,void 0,void 0,function*(){return(yield this.beginValidateMoveResources(e,t,n)).pollUntilDone()})}_list(e){return this.client.sendOperationRequest({options:e},qgt)}checkExistence(e,t,n,i,s,o,a){return this.client.sendOperationRequest({resourceGroupName:e,resourceProviderNamespace:t,parentResourcePath:n,resourceType:i,resourceName:s,apiVersion:o,options:a},zgt)}beginDelete(e,t,n,i,s,o,a){return Z.__awaiter(this,void 0,void 0,function*(){let c=(p,m)=>Z.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(p,m)}),l=(p,m)=>Z.__awaiter(this,void 0,void 0,function*(){var f;let y,v=(f=p.options)===null||f===void 0?void 0:f.onResponse,_=(w,R)=>{y=w,v?.(w,R)},C=Object.assign(Object.assign({},p),{options:Object.assign(Object.assign({},p.options),{onResponse:_})});return{flatResponse:yield c(C,m),rawResponse:{statusCode:y.status,body:y.parsedBody,headers:y.headers.toJSON()}}}),u=new Gi(l,{resourceGroupName:e,resourceProviderNamespace:t,parentResourcePath:n,resourceType:i,resourceName:s,apiVersion:o,options:a},Fgt),d=new us.LroEngine(u,{resumeFrom:a?.resumeFrom,intervalInMs:a?.updateIntervalInMs});return yield d.poll(),d})}beginDeleteAndWait(e,t,n,i,s,o,a){return Z.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDelete(e,t,n,i,s,o,a)).pollUntilDone()})}beginCreateOrUpdate(e,t,n,i,s,o,a,c){return Z.__awaiter(this,void 0,void 0,function*(){let l=(m,f)=>Z.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(m,f)}),u=(m,f)=>Z.__awaiter(this,void 0,void 0,function*(){var y;let v,_=(y=m.options)===null||y===void 0?void 0:y.onResponse,C=(R,I)=>{v=R,_?.(R,I)},P=Object.assign(Object.assign({},m),{options:Object.assign(Object.assign({},m.options),{onResponse:C})});return{flatResponse:yield l(P,f),rawResponse:{statusCode:v.status,body:v.parsedBody,headers:v.headers.toJSON()}}}),d=new Gi(u,{resourceGroupName:e,resourceProviderNamespace:t,parentResourcePath:n,resourceType:i,resourceName:s,apiVersion:o,parameters:a,options:c},jgt),p=new us.LroEngine(d,{resumeFrom:c?.resumeFrom,intervalInMs:c?.updateIntervalInMs});return yield p.poll(),p})}beginCreateOrUpdateAndWait(e,t,n,i,s,o,a,c){return Z.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i,s,o,a,c)).pollUntilDone()})}beginUpdate(e,t,n,i,s,o,a,c){return Z.__awaiter(this,void 0,void 0,function*(){let l=(m,f)=>Z.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(m,f)}),u=(m,f)=>Z.__awaiter(this,void 0,void 0,function*(){var y;let v,_=(y=m.options)===null||y===void 0?void 0:y.onResponse,C=(R,I)=>{v=R,_?.(R,I)},P=Object.assign(Object.assign({},m),{options:Object.assign(Object.assign({},m.options),{onResponse:C})});return{flatResponse:yield l(P,f),rawResponse:{statusCode:v.status,body:v.parsedBody,headers:v.headers.toJSON()}}}),d=new Gi(u,{resourceGroupName:e,resourceProviderNamespace:t,parentResourcePath:n,resourceType:i,resourceName:s,apiVersion:o,parameters:a,options:c},Ugt),p=new us.LroEngine(d,{resumeFrom:c?.resumeFrom,intervalInMs:c?.updateIntervalInMs});return yield p.poll(),p})}beginUpdateAndWait(e,t,n,i,s,o,a,c){return Z.__awaiter(this,void 0,void 0,function*(){return(yield this.beginUpdate(e,t,n,i,s,o,a,c)).pollUntilDone()})}get(e,t,n,i,s,o,a){return this.client.sendOperationRequest({resourceGroupName:e,resourceProviderNamespace:t,parentResourcePath:n,resourceType:i,resourceName:s,apiVersion:o,options:a},Bgt)}checkExistenceById(e,t,n){return this.client.sendOperationRequest({resourceId:e,apiVersion:t,options:n},Ggt)}beginDeleteById(e,t,n){return Z.__awaiter(this,void 0,void 0,function*(){let i=(c,l)=>Z.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),s=(c,l)=>Z.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield i(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),o=new Gi(s,{resourceId:e,apiVersion:t,options:n},$gt),a=new us.LroEngine(o,{resumeFrom:n?.resumeFrom,intervalInMs:n?.updateIntervalInMs});return yield a.poll(),a})}beginDeleteByIdAndWait(e,t,n){return Z.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDeleteById(e,t,n)).pollUntilDone()})}beginCreateOrUpdateById(e,t,n,i){return Z.__awaiter(this,void 0,void 0,function*(){let s=(l,u)=>Z.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),o=(l,u)=>Z.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield s(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),a=new Gi(o,{resourceId:e,apiVersion:t,parameters:n,options:i},Vgt),c=new us.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs});return yield c.poll(),c})}beginCreateOrUpdateByIdAndWait(e,t,n,i){return Z.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdateById(e,t,n,i)).pollUntilDone()})}beginUpdateById(e,t,n,i){return Z.__awaiter(this,void 0,void 0,function*(){let s=(l,u)=>Z.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),o=(l,u)=>Z.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield s(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),a=new Gi(o,{resourceId:e,apiVersion:t,parameters:n,options:i},Hgt),c=new us.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs});return yield c.poll(),c})}beginUpdateByIdAndWait(e,t,n,i){return Z.__awaiter(this,void 0,void 0,function*(){return(yield this.beginUpdateById(e,t,n,i)).pollUntilDone()})}getById(e,t,n){return this.client.sendOperationRequest({resourceId:e,apiVersion:t,options:n},Wgt)}_listByResourceGroupNext(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,nextLink:t,options:n},Kgt)}_listNext(e,t){return this.client.sendOperationRequest({nextLink:e,options:t},Qgt)}},Yc=gh.createSerializer(dv,!1),Mgt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/resources",httpMethod:"GET",responses:{200:{bodyMapper:VA},default:{bodyMapper:At}},queryParameters:[Qt,Qc,ks,tm],urlParameters:[Dt,Qr,Qs],headerParameters:[Nt],serializer:Yc},kgt={path:"/subscriptions/{subscriptionId}/resourceGroups/{sourceResourceGroupName}/moveResources",httpMethod:"POST",responses:{200:{},201:{},202:{},204:{},default:{bodyMapper:At}},requestBody:TIe,queryParameters:[Qt],urlParameters:[Dt,Qr,IIe],headerParameters:[Nt,Is],mediaType:"json",serializer:Yc},Lgt={path:"/subscriptions/{subscriptionId}/resourceGroups/{sourceResourceGroupName}/validateMoveResources",httpMethod:"POST",responses:{200:{},201:{},202:{},204:{},default:{bodyMapper:At}},requestBody:TIe,queryParameters:[Qt],urlParameters:[Dt,Qr,IIe],headerParameters:[Nt,Is],mediaType:"json",serializer:Yc},qgt={path:"/subscriptions/{subscriptionId}/resources",httpMethod:"GET",responses:{200:{bodyMapper:VA},default:{bodyMapper:At}},queryParameters:[Qt,Qc,ks,tm],urlParameters:[Dt,Qr],headerParameters:[Nt],serializer:Yc},zgt={path:"/subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/{resourceProviderNamespace}/{parentResourcePath}/{resourceType}/{resourceName}",httpMethod:"HEAD",responses:{204:{},404:{},default:{bodyMapper:At}},queryParameters:[yh],urlParameters:[Dt,Qr,Qs,Vd,WA,KA,QA],headerParameters:[Nt],serializer:Yc},Fgt={path:"/subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/{resourceProviderNamespace}/{parentResourcePath}/{resourceType}/{resourceName}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{bodyMapper:At}},queryParameters:[yh],urlParameters:[Dt,Qr,Qs,Vd,WA,KA,QA],headerParameters:[Nt],serializer:Yc},jgt={path:"/subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/{resourceProviderNamespace}/{parentResourcePath}/{resourceType}/{resourceName}",httpMethod:"PUT",responses:{200:{bodyMapper:ea},201:{bodyMapper:ea},202:{bodyMapper:ea},204:{bodyMapper:ea},default:{bodyMapper:At}},requestBody:CU,queryParameters:[yh],urlParameters:[Dt,Qr,Qs,Vd,WA,KA,QA],headerParameters:[Nt,Is],mediaType:"json",serializer:Yc},Ugt={path:"/subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/{resourceProviderNamespace}/{parentResourcePath}/{resourceType}/{resourceName}",httpMethod:"PATCH",responses:{200:{bodyMapper:ea},201:{bodyMapper:ea},202:{bodyMapper:ea},204:{bodyMapper:ea},default:{bodyMapper:At}},requestBody:CU,queryParameters:[yh],urlParameters:[Dt,Qr,Qs,Vd,WA,KA,QA],headerParameters:[Nt,Is],mediaType:"json",serializer:Yc},Bgt={path:"/subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/{resourceProviderNamespace}/{parentResourcePath}/{resourceType}/{resourceName}",httpMethod:"GET",responses:{200:{bodyMapper:ea},default:{bodyMapper:At}},queryParameters:[yh],urlParameters:[Dt,Qr,Qs,Vd,WA,KA,QA],headerParameters:[Nt],serializer:Yc},Ggt={path:"/{resourceId}",httpMethod:"HEAD",responses:{204:{},404:{},default:{bodyMapper:At}},queryParameters:[yh],urlParameters:[Dt,YA],headerParameters:[Nt],serializer:Yc},$gt={path:"/{resourceId}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{bodyMapper:At}},queryParameters:[yh],urlParameters:[Dt,YA],headerParameters:[Nt],serializer:Yc},Vgt={path:"/{resourceId}",httpMethod:"PUT",responses:{200:{bodyMapper:ea},201:{bodyMapper:ea},202:{bodyMapper:ea},204:{bodyMapper:ea},default:{bodyMapper:At}},requestBody:CU,queryParameters:[yh],urlParameters:[Dt,YA],headerParameters:[Nt,Is],mediaType:"json",serializer:Yc},Hgt={path:"/{resourceId}",httpMethod:"PATCH",responses:{200:{bodyMapper:ea},201:{bodyMapper:ea},202:{bodyMapper:ea},204:{bodyMapper:ea},default:{bodyMapper:At}},requestBody:CU,queryParameters:[yh],urlParameters:[Dt,YA],headerParameters:[Nt,Is],mediaType:"json",serializer:Yc},Wgt={path:"/{resourceId}",httpMethod:"GET",responses:{200:{bodyMapper:ea},default:{bodyMapper:At}},queryParameters:[yh],urlParameters:[Dt,YA],headerParameters:[Nt],serializer:Yc},Kgt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:VA},default:{bodyMapper:At}},queryParameters:[Qt,Qc,ks,tm],urlParameters:[Dt,wc,Qr,Qs],headerParameters:[Nt],serializer:Yc},Qgt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:VA},default:{bodyMapper:At}},queryParameters:[Qt,Qc,ks,tm],urlParameters:[Dt,wc,Qr],headerParameters:[Nt],serializer:Yc},Y9=class{constructor(e){this.client=e}list(e){let t=this.listPagingAll(e);return{next(){return t.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listPagingPage(e)}}listPagingPage(e){return Z.__asyncGenerator(this,arguments,function*(){let n=yield Z.__await(this._list(e));yield yield Z.__await(n.value||[]);let i=n.nextLink;for(;i;)n=yield Z.__await(this._listNext(i,e)),i=n.nextLink,yield yield Z.__await(n.value||[])})}listPagingAll(e){return Z.__asyncGenerator(this,arguments,function*(){var n,i;try{for(var s=Z.__asyncValues(this.listPagingPage(e)),o;o=yield Z.__await(s.next()),!o.done;){let a=o.value;yield Z.__await(yield*Z.__asyncDelegator(Z.__asyncValues(a)))}}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=s.return)&&(yield Z.__await(i.call(s)))}finally{if(n)throw n.error}}})}checkExistence(e,t){return this.client.sendOperationRequest({resourceGroupName:e,options:t},Ygt)}createOrUpdate(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,parameters:t,options:n},Xgt)}beginDelete(e,t){return Z.__awaiter(this,void 0,void 0,function*(){let n=(a,c)=>Z.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(a,c)}),i=(a,c)=>Z.__awaiter(this,void 0,void 0,function*(){var l;let u,d=(l=a.options)===null||l===void 0?void 0:l.onResponse,p=(y,v)=>{u=y,d?.(y,v)},m=Object.assign(Object.assign({},a),{options:Object.assign(Object.assign({},a.options),{onResponse:p})});return{flatResponse:yield n(m,c),rawResponse:{statusCode:u.status,body:u.parsedBody,headers:u.headers.toJSON()}}}),s=new Gi(i,{resourceGroupName:e,options:t},Jgt),o=new us.LroEngine(s,{resumeFrom:t?.resumeFrom,intervalInMs:t?.updateIntervalInMs});return yield o.poll(),o})}beginDeleteAndWait(e,t){return Z.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDelete(e,t)).pollUntilDone()})}get(e,t){return this.client.sendOperationRequest({resourceGroupName:e,options:t},Zgt)}update(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,parameters:t,options:n},eyt)}beginExportTemplate(e,t,n){return Z.__awaiter(this,void 0,void 0,function*(){let i=(c,l)=>Z.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),s=(c,l)=>Z.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield i(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),o=new Gi(s,{resourceGroupName:e,parameters:t,options:n},tyt),a=new us.LroEngine(o,{resumeFrom:n?.resumeFrom,intervalInMs:n?.updateIntervalInMs,lroResourceLocationConfig:"location"});return yield a.poll(),a})}beginExportTemplateAndWait(e,t,n){return Z.__awaiter(this,void 0,void 0,function*(){return(yield this.beginExportTemplate(e,t,n)).pollUntilDone()})}_list(e){return this.client.sendOperationRequest({options:e},ryt)}_listNext(e,t){return this.client.sendOperationRequest({nextLink:e,options:t},nyt)}},pv=gh.createSerializer(dv,!1),Ygt={path:"/subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}",httpMethod:"HEAD",responses:{204:{},404:{},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,Qr,Qs],headerParameters:[Nt],serializer:pv},Xgt={path:"/subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}",httpMethod:"PUT",responses:{200:{bodyMapper:vE},201:{bodyMapper:vE},default:{bodyMapper:At}},requestBody:yft,queryParameters:[Qt],urlParameters:[Dt,Qr,Qs],headerParameters:[Nt,Is],mediaType:"json",serializer:pv},Jgt={path:"/subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{bodyMapper:At}},queryParameters:[Qt,vft],urlParameters:[Dt,Qr,Qs],headerParameters:[Nt],serializer:pv},Zgt={path:"/subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}",httpMethod:"GET",responses:{200:{bodyMapper:vE},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,Qr,Qs],headerParameters:[Nt],serializer:pv},eyt={path:"/subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}",httpMethod:"PATCH",responses:{200:{bodyMapper:vE},default:{bodyMapper:At}},requestBody:bft,queryParameters:[Qt],urlParameters:[Dt,Qr,Qs],headerParameters:[Nt,Is],mediaType:"json",serializer:pv},tyt={path:"/subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/exportTemplate",httpMethod:"POST",responses:{200:{bodyMapper:BA},201:{bodyMapper:BA},202:{bodyMapper:BA},204:{bodyMapper:BA},default:{bodyMapper:At}},requestBody:_ft,queryParameters:[Qt],urlParameters:[Dt,Qr,Sft],headerParameters:[Nt,Is],mediaType:"json",serializer:pv},ryt={path:"/subscriptions/{subscriptionId}/resourcegroups",httpMethod:"GET",responses:{200:{bodyMapper:tX},default:{bodyMapper:At}},queryParameters:[Qt,Qc,ks],urlParameters:[Dt,Qr],headerParameters:[Nt],serializer:pv},nyt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:tX},default:{bodyMapper:At}},queryParameters:[Qt,Qc,ks],urlParameters:[Dt,wc,Qr],headerParameters:[Nt],serializer:pv},X9=class{constructor(e){this.client=e}list(e){let t=this.listPagingAll(e);return{next(){return t.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listPagingPage(e)}}listPagingPage(e){return Z.__asyncGenerator(this,arguments,function*(){let n=yield Z.__await(this._list(e));yield yield Z.__await(n.value||[]);let i=n.nextLink;for(;i;)n=yield Z.__await(this._listNext(i,e)),i=n.nextLink,yield yield Z.__await(n.value||[])})}listPagingAll(e){return Z.__asyncGenerator(this,arguments,function*(){var n,i;try{for(var s=Z.__asyncValues(this.listPagingPage(e)),o;o=yield Z.__await(s.next()),!o.done;){let a=o.value;yield Z.__await(yield*Z.__asyncDelegator(Z.__asyncValues(a)))}}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=s.return)&&(yield Z.__await(i.call(s)))}finally{if(n)throw n.error}}})}deleteValue(e,t,n){return this.client.sendOperationRequest({tagName:e,tagValue:t,options:n},iyt)}createOrUpdateValue(e,t,n){return this.client.sendOperationRequest({tagName:e,tagValue:t,options:n},syt)}createOrUpdate(e,t){return this.client.sendOperationRequest({tagName:e,options:t},oyt)}delete(e,t){return this.client.sendOperationRequest({tagName:e,options:t},ayt)}_list(e){return this.client.sendOperationRequest({options:e},cyt)}createOrUpdateAtScope(e,t,n){return this.client.sendOperationRequest({scope:e,parameters:t,options:n},lyt)}updateAtScope(e,t,n){return this.client.sendOperationRequest({scope:e,parameters:t,options:n},uyt)}getAtScope(e,t){return this.client.sendOperationRequest({scope:e,options:t},dyt)}deleteAtScope(e,t){return this.client.sendOperationRequest({scope:e,options:t},pyt)}_listNext(e,t){return this.client.sendOperationRequest({nextLink:e,options:t},myt)}},bh=gh.createSerializer(dv,!1),iyt={path:"/subscriptions/{subscriptionId}/tagNames/{tagName}/tagValues/{tagValue}",httpMethod:"DELETE",responses:{200:{},204:{},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,Qr,PU,RIe],headerParameters:[Nt],serializer:bh},syt={path:"/subscriptions/{subscriptionId}/tagNames/{tagName}/tagValues/{tagValue}",httpMethod:"PUT",responses:{200:{bodyMapper:G9},201:{bodyMapper:G9},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,Qr,PU,RIe],headerParameters:[Nt],serializer:bh},oyt={path:"/subscriptions/{subscriptionId}/tagNames/{tagName}",httpMethod:"PUT",responses:{200:{bodyMapper:$9},201:{bodyMapper:$9},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,Qr,PU],headerParameters:[Nt],serializer:bh},ayt={path:"/subscriptions/{subscriptionId}/tagNames/{tagName}",httpMethod:"DELETE",responses:{200:{},204:{},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,Qr,PU],headerParameters:[Nt],serializer:bh},cyt={path:"/subscriptions/{subscriptionId}/tagNames",httpMethod:"GET",responses:{200:{bodyMapper:rX},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,Qr],headerParameters:[Nt],serializer:bh},lyt={path:"/{scope}/providers/Microsoft.Resources/tags/default",httpMethod:"PUT",responses:{200:{bodyMapper:HA},default:{bodyMapper:At}},requestBody:Cft,queryParameters:[Qt],urlParameters:[Dt,Kc],headerParameters:[Nt,Is],mediaType:"json",serializer:bh},uyt={path:"/{scope}/providers/Microsoft.Resources/tags/default",httpMethod:"PATCH",responses:{200:{bodyMapper:HA},default:{bodyMapper:At}},requestBody:Pft,queryParameters:[Qt],urlParameters:[Dt,Kc],headerParameters:[Nt,Is],mediaType:"json",serializer:bh},dyt={path:"/{scope}/providers/Microsoft.Resources/tags/default",httpMethod:"GET",responses:{200:{bodyMapper:HA},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,Kc],headerParameters:[Nt],serializer:bh},pyt={path:"/{scope}/providers/Microsoft.Resources/tags/default",httpMethod:"DELETE",responses:{200:{},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,Kc],headerParameters:[Nt],serializer:bh},myt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:rX},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,wc,Qr],headerParameters:[Nt],serializer:bh},J9=class{constructor(e){this.client=e}listAtScope(e,t,n){let i=this.listAtScopePagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listAtScopePagingPage(e,t,n)}}listAtScopePagingPage(e,t,n){return Z.__asyncGenerator(this,arguments,function*(){let s=yield Z.__await(this._listAtScope(e,t,n));yield yield Z.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield Z.__await(this._listAtScopeNext(e,t,o,n)),o=s.nextLink,yield yield Z.__await(s.value||[])})}listAtScopePagingAll(e,t,n){return Z.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=Z.__asyncValues(this.listAtScopePagingPage(e,t,n)),c;c=yield Z.__await(a.next()),!c.done;){let l=c.value;yield Z.__await(yield*Z.__asyncDelegator(Z.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield Z.__await(o.call(a)))}finally{if(s)throw s.error}}})}listAtTenantScope(e,t){let n=this.listAtTenantScopePagingAll(e,t);return{next(){return n.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listAtTenantScopePagingPage(e,t)}}listAtTenantScopePagingPage(e,t){return Z.__asyncGenerator(this,arguments,function*(){let i=yield Z.__await(this._listAtTenantScope(e,t));yield yield Z.__await(i.value||[]);let s=i.nextLink;for(;s;)i=yield Z.__await(this._listAtTenantScopeNext(e,s,t)),s=i.nextLink,yield yield Z.__await(i.value||[])})}listAtTenantScopePagingAll(e,t){return Z.__asyncGenerator(this,arguments,function*(){var i,s;try{for(var o=Z.__asyncValues(this.listAtTenantScopePagingPage(e,t)),a;a=yield Z.__await(o.next()),!a.done;){let c=a.value;yield Z.__await(yield*Z.__asyncDelegator(Z.__asyncValues(c)))}}catch(c){i={error:c}}finally{try{a&&!a.done&&(s=o.return)&&(yield Z.__await(s.call(o)))}finally{if(i)throw i.error}}})}listAtManagementGroupScope(e,t,n){let i=this.listAtManagementGroupScopePagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listAtManagementGroupScopePagingPage(e,t,n)}}listAtManagementGroupScopePagingPage(e,t,n){return Z.__asyncGenerator(this,arguments,function*(){let s=yield Z.__await(this._listAtManagementGroupScope(e,t,n));yield yield Z.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield Z.__await(this._listAtManagementGroupScopeNext(e,t,o,n)),o=s.nextLink,yield yield Z.__await(s.value||[])})}listAtManagementGroupScopePagingAll(e,t,n){return Z.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=Z.__asyncValues(this.listAtManagementGroupScopePagingPage(e,t,n)),c;c=yield Z.__await(a.next()),!c.done;){let l=c.value;yield Z.__await(yield*Z.__asyncDelegator(Z.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield Z.__await(o.call(a)))}finally{if(s)throw s.error}}})}listAtSubscriptionScope(e,t){let n=this.listAtSubscriptionScopePagingAll(e,t);return{next(){return n.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listAtSubscriptionScopePagingPage(e,t)}}listAtSubscriptionScopePagingPage(e,t){return Z.__asyncGenerator(this,arguments,function*(){let i=yield Z.__await(this._listAtSubscriptionScope(e,t));yield yield Z.__await(i.value||[]);let s=i.nextLink;for(;s;)i=yield Z.__await(this._listAtSubscriptionScopeNext(e,s,t)),s=i.nextLink,yield yield Z.__await(i.value||[])})}listAtSubscriptionScopePagingAll(e,t){return Z.__asyncGenerator(this,arguments,function*(){var i,s;try{for(var o=Z.__asyncValues(this.listAtSubscriptionScopePagingPage(e,t)),a;a=yield Z.__await(o.next()),!a.done;){let c=a.value;yield Z.__await(yield*Z.__asyncDelegator(Z.__asyncValues(c)))}}catch(c){i={error:c}}finally{try{a&&!a.done&&(s=o.return)&&(yield Z.__await(s.call(o)))}finally{if(i)throw i.error}}})}list(e,t,n){let i=this.listPagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listPagingPage(e,t,n)}}listPagingPage(e,t,n){return Z.__asyncGenerator(this,arguments,function*(){let s=yield Z.__await(this._list(e,t,n));yield yield Z.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield Z.__await(this._listNext(e,t,o,n)),o=s.nextLink,yield yield Z.__await(s.value||[])})}listPagingAll(e,t,n){return Z.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=Z.__asyncValues(this.listPagingPage(e,t,n)),c;c=yield Z.__await(a.next()),!c.done;){let l=c.value;yield Z.__await(yield*Z.__asyncDelegator(Z.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield Z.__await(o.call(a)))}finally{if(s)throw s.error}}})}getAtScope(e,t,n,i){return this.client.sendOperationRequest({scope:e,deploymentName:t,operationId:n,options:i},hyt)}_listAtScope(e,t,n){return this.client.sendOperationRequest({scope:e,deploymentName:t,options:n},fyt)}getAtTenantScope(e,t,n){return this.client.sendOperationRequest({deploymentName:e,operationId:t,options:n},gyt)}_listAtTenantScope(e,t){return this.client.sendOperationRequest({deploymentName:e,options:t},yyt)}getAtManagementGroupScope(e,t,n,i){return this.client.sendOperationRequest({groupId:e,deploymentName:t,operationId:n,options:i},vyt)}_listAtManagementGroupScope(e,t,n){return this.client.sendOperationRequest({groupId:e,deploymentName:t,options:n},byt)}getAtSubscriptionScope(e,t,n){return this.client.sendOperationRequest({deploymentName:e,operationId:t,options:n},_yt)}_listAtSubscriptionScope(e,t){return this.client.sendOperationRequest({deploymentName:e,options:t},Syt)}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,deploymentName:t,operationId:n,options:i},Cyt)}_list(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,deploymentName:t,options:n},Pyt)}_listAtScopeNext(e,t,n,i){return this.client.sendOperationRequest({scope:e,deploymentName:t,nextLink:n,options:i},wyt)}_listAtTenantScopeNext(e,t,n){return this.client.sendOperationRequest({deploymentName:e,nextLink:t,options:n},Eyt)}_listAtManagementGroupScopeNext(e,t,n,i){return this.client.sendOperationRequest({groupId:e,deploymentName:t,nextLink:n,options:i},Tyt)}_listAtSubscriptionScopeNext(e,t,n){return this.client.sendOperationRequest({deploymentName:e,nextLink:t,options:n},Iyt)}_listNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,deploymentName:t,nextLink:n,options:i},Ryt)}},xl=gh.createSerializer(dv,!1),hyt={path:"/{scope}/providers/Microsoft.Resources/deployments/{deploymentName}/operations/{operationId}",httpMethod:"GET",responses:{200:{bodyMapper:_E},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,Kc,an,XA],headerParameters:[Nt],serializer:xl},fyt={path:"/{scope}/providers/Microsoft.Resources/deployments/{deploymentName}/operations",httpMethod:"GET",responses:{200:{bodyMapper:em},default:{bodyMapper:At}},queryParameters:[Qt,ks],urlParameters:[Dt,Kc,an],headerParameters:[Nt],serializer:xl},gyt={path:"/providers/Microsoft.Resources/deployments/{deploymentName}/operations/{operationId}",httpMethod:"GET",responses:{200:{bodyMapper:_E},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,an,XA],headerParameters:[Nt],serializer:xl},yyt={path:"/providers/Microsoft.Resources/deployments/{deploymentName}/operations",httpMethod:"GET",responses:{200:{bodyMapper:em},default:{bodyMapper:At}},queryParameters:[Qt,ks],urlParameters:[Dt,an],headerParameters:[Nt],serializer:xl},vyt={path:"/providers/Microsoft.Management/managementGroups/{groupId}/providers/Microsoft.Resources/deployments/{deploymentName}/operations/{operationId}",httpMethod:"GET",responses:{200:{bodyMapper:_E},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,an,uu,XA],headerParameters:[Nt],serializer:xl},byt={path:"/providers/Microsoft.Management/managementGroups/{groupId}/providers/Microsoft.Resources/deployments/{deploymentName}/operations",httpMethod:"GET",responses:{200:{bodyMapper:em},default:{bodyMapper:At}},queryParameters:[Qt,ks],urlParameters:[Dt,an,uu],headerParameters:[Nt],serializer:xl},_yt={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Resources/deployments/{deploymentName}/operations/{operationId}",httpMethod:"GET",responses:{200:{bodyMapper:_E},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,an,Qr,XA],headerParameters:[Nt],serializer:xl},Syt={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Resources/deployments/{deploymentName}/operations",httpMethod:"GET",responses:{200:{bodyMapper:em},default:{bodyMapper:At}},queryParameters:[Qt,ks],urlParameters:[Dt,an,Qr],headerParameters:[Nt],serializer:xl},Cyt={path:"/subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/deployments/{deploymentName}/operations/{operationId}",httpMethod:"GET",responses:{200:{bodyMapper:_E},default:{bodyMapper:At}},queryParameters:[Qt],urlParameters:[Dt,an,Qr,Qs,XA],headerParameters:[Nt],serializer:xl},Pyt={path:"/subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/deployments/{deploymentName}/operations",httpMethod:"GET",responses:{200:{bodyMapper:em},default:{bodyMapper:At}},queryParameters:[Qt,ks],urlParameters:[Dt,an,Qr,Qs],headerParameters:[Nt],serializer:xl},wyt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:em},default:{bodyMapper:At}},queryParameters:[Qt,ks],urlParameters:[Dt,wc,Kc,an],headerParameters:[Nt],serializer:xl},Eyt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:em},default:{bodyMapper:At}},queryParameters:[Qt,ks],urlParameters:[Dt,wc,an],headerParameters:[Nt],serializer:xl},Tyt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:em},default:{bodyMapper:At}},queryParameters:[Qt,ks],urlParameters:[Dt,wc,an,uu],headerParameters:[Nt],serializer:xl},Iyt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:em},default:{bodyMapper:At}},queryParameters:[Qt,ks],urlParameters:[Dt,wc,an,Qr],headerParameters:[Nt],serializer:xl},Ryt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:em},default:{bodyMapper:At}},queryParameters:[Qt,ks],urlParameters:[Dt,wc,an,Qr,Qs],headerParameters:[Nt],serializer:xl},Z9=class extends gh.ServiceClient{constructor(e,t,n){var i,s;if(e===void 0)throw new Error("'credentials' cannot be null");if(t===void 0)throw new Error("'subscriptionId' cannot be null");n||(n={});let o={requestContentType:"application/json; charset=utf-8",credential:e},a="azsdk-js-arm-resources/5.0.1",c=n.userAgentOptions&&n.userAgentOptions.userAgentPrefix?`${n.userAgentOptions.userAgentPrefix} ${a}`:`${a}`;n.credentialScopes||(n.credentialScopes=["https://management.azure.com/.default"]);let l=Object.assign(Object.assign(Object.assign({},o),n),{userAgentOptions:{userAgentPrefix:c},baseUri:(s=(i=n.endpoint)!==null&&i!==void 0?i:n.baseUri)!==null&&s!==void 0?s:"https://management.azure.com"});super(l),n?.pipeline&&n.pipeline.getOrderedPolicies().length>0&&(n.pipeline.getOrderedPolicies().some(p=>p.name===B9.bearerTokenAuthenticationPolicyName)||(this.pipeline.removePolicy({name:B9.bearerTokenAuthenticationPolicyName}),this.pipeline.addPolicy(B9.bearerTokenAuthenticationPolicy({scopes:`${l.baseUri}/.default`,challengeCallbacks:{authorizeRequestOnChallenge:gh.authorizeRequestOnClaimChallenge}})))),this.subscriptionId=t,this.$host=n.$host||"https://management.azure.com",this.apiVersion=n.apiVersion||"2021-04-01",this.operations=new V9(this),this.deployments=new H9(this),this.providers=new W9(this),this.providerResourceTypes=new K9(this),this.resources=new Q9(this),this.resourceGroups=new Y9(this),this.tagsOperations=new X9(this),this.deploymentOperations=new J9(this)}};Zs.ResourceManagementClient=Z9});var AIe={};Ea(AIe,{__assign:()=>sX,__asyncDelegator:()=>Uyt,__asyncGenerator:()=>jyt,__asyncValues:()=>Byt,__await:()=>JA,__awaiter:()=>Myt,__classPrivateFieldGet:()=>Wyt,__classPrivateFieldSet:()=>Kyt,__createBinding:()=>aX,__decorate:()=>Ayt,__exportStar:()=>Lyt,__extends:()=>xyt,__generator:()=>kyt,__importDefault:()=>Hyt,__importStar:()=>Vyt,__makeTemplateObject:()=>Gyt,__metadata:()=>Dyt,__param:()=>Nyt,__read:()=>OIe,__rest:()=>Oyt,__spread:()=>qyt,__spreadArray:()=>Fyt,__spreadArrays:()=>zyt,__values:()=>oX});function xyt(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");iX(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Oyt(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function Ayt(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}function Nyt(r,e){return function(t,n){e(t,n,r)}}function Dyt(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function Myt(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})}function kyt(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){t.label=l[1];break}if(l[0]===6&&t.label<s[1]){t.label=s[1],s=l;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(l);break}s[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(u){l=[6,u],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Lyt(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&aX(e,r,t)}function oX(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function OIe(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s}function qyt(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(OIe(arguments[e]));return r}function zyt(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function Fyt(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||e)}function JA(r){return this instanceof JA?(this.v=r,this):new JA(r)}function jyt(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(p){n[p]&&(i[p]=function(m){return new Promise(function(f,y){s.push([p,m,f,y])>1||a(p,m)})})}function a(p,m){try{c(n[p](m))}catch(f){d(s[0][3],f)}}function c(p){p.value instanceof JA?Promise.resolve(p.value.v).then(l,u):d(s[0][2],p)}function l(p){a("next",p)}function u(p){a("throw",p)}function d(p,m){p(m),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Uyt(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=r[i]?function(o){return(t=!t)?{value:JA(r[i](o)),done:i==="return"}:s?s(o):o}:s}}function Byt(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof oX=="function"?oX(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=r[s]&&function(o){return new Promise(function(a,c){o=r[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function Gyt(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function Vyt(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&aX(e,r,t);return $yt(e,r),e}function Hyt(r){return r&&r.__esModule?r:{default:r}}function Wyt(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)}function Kyt(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t}var iX,sX,aX,$yt,NIe=si(()=>{iX=function(r,e){return iX=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},iX(r,e)};sX=function(){return sX=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},sX.apply(this,arguments)};aX=Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]};$yt=Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}});var xxe=O(Te=>{"use strict";Object.defineProperty(Te,"__esModule",{value:!0});var Pt=hU(),h=(NIe(),da(AIe)),St=_U();(function(r){r.Default="Default"})(Te.KnownGeoBackupPolicyName||(Te.KnownGeoBackupPolicyName={}));(function(r){r.Count="count",r.Bytes="bytes",r.Seconds="seconds",r.Percent="percent",r.CountPerSecond="countPerSecond",r.BytesPerSecond="bytesPerSecond"})(Te.KnownUnitType||(Te.KnownUnitType={}));(function(r){r.None="None",r.Average="Average",r.Count="Count",r.Minimum="Minimum",r.Maximum="Maximum",r.Total="Total"})(Te.KnownPrimaryAggregationType||(Te.KnownPrimaryAggregationType={}));(function(r){r.Count="Count",r.Bytes="Bytes",r.Seconds="Seconds",r.Percent="Percent",r.CountPerSecond="CountPerSecond",r.BytesPerSecond="BytesPerSecond"})(Te.KnownUnitDefinitionType||(Te.KnownUnitDefinitionType={}));(function(r){r.Active="Active",r.Pending="Pending",r.Executing="Executing",r.Verifying="Verifying",r.PendingRevert="PendingRevert",r.RevertCancelled="RevertCancelled",r.Reverting="Reverting",r.Reverted="Reverted",r.Ignored="Ignored",r.Expired="Expired",r.Monitoring="Monitoring",r.Resolved="Resolved",r.Success="Success",r.Error="Error"})(Te.KnownRecommendedActionCurrentState||(Te.KnownRecommendedActionCurrentState={}));(function(r){r.Image="image",r.Text="text",r.Uniqueidentifier="uniqueidentifier",r.Date="date",r.Time="time",r.Datetime2="datetime2",r.Datetimeoffset="datetimeoffset",r.Tinyint="tinyint",r.Smallint="smallint",r.Int="int",r.Smalldatetime="smalldatetime",r.Real="real",r.Money="money",r.Datetime="datetime",r.Float="float",r.SqlVariant="sql_variant",r.Ntext="ntext",r.Bit="bit",r.Decimal="decimal",r.Numeric="numeric",r.Smallmoney="smallmoney",r.Bigint="bigint",r.Hierarchyid="hierarchyid",r.Geometry="geometry",r.Geography="geography",r.Varbinary="varbinary",r.Varchar="varchar",r.Binary="binary",r.Char="char",r.Timestamp="timestamp",r.Nvarchar="nvarchar",r.Nchar="nchar",r.Xml="xml",r.Sysname="sysname"})(Te.KnownColumnDataType||(Te.KnownColumnDataType={}));(function(r){r.NonTemporalTable="NonTemporalTable",r.HistoryTable="HistoryTable",r.SystemVersionedTemporalTable="SystemVersionedTemporalTable"})(Te.KnownTableTemporalType||(Te.KnownTableTemporalType={}));(function(r){r.Default="Default"})(Te.KnownSecurityAlertPolicyName||(Te.KnownSecurityAlertPolicyName={}));(function(r){r.User="User",r.Application="Application",r.ManagedIdentity="ManagedIdentity",r.Key="Key"})(Te.KnownCreatedByType||(Te.KnownCreatedByType={}));(function(r){r.Default="default"})(Te.KnownVulnerabilityAssessmentName||(Te.KnownVulnerabilityAssessmentName={}));(function(r){r.OnDemand="OnDemand",r.Recurring="Recurring"})(Te.KnownVulnerabilityAssessmentScanTriggerType||(Te.KnownVulnerabilityAssessmentScanTriggerType={}));(function(r){r.Passed="Passed",r.Failed="Failed",r.FailedToRun="FailedToRun",r.InProgress="InProgress"})(Te.KnownVulnerabilityAssessmentScanState||(Te.KnownVulnerabilityAssessmentScanState={}));(function(r){r.Current="current"})(Te.KnownDataWarehouseUserActivityName||(Te.KnownDataWarehouseUserActivityName={}));(function(r){r.Creating="Creating",r.Ready="Ready",r.Disabled="Disabled"})(Te.KnownElasticPoolState||(Te.KnownElasticPoolState={}));(function(r){r.LicenseIncluded="LicenseIncluded",r.BasePrice="BasePrice"})(Te.KnownElasticPoolLicenseType||(Te.KnownElasticPoolLicenseType={}));(function(r){r.ServiceManaged="ServiceManaged",r.AzureKeyVault="AzureKeyVault"})(Te.KnownServerKeyType||(Te.KnownServerKeyType={}));(function(r){r.Current="current"})(Te.KnownEncryptionProtectorName||(Te.KnownEncryptionProtectorName={}));(function(r){r.Manual="Manual",r.Automatic="Automatic"})(Te.KnownReadWriteEndpointFailoverPolicy||(Te.KnownReadWriteEndpointFailoverPolicy={}));(function(r){r.Disabled="Disabled",r.Enabled="Enabled"})(Te.KnownReadOnlyEndpointFailoverPolicy||(Te.KnownReadOnlyEndpointFailoverPolicy={}));(function(r){r.Primary="Primary",r.Secondary="Secondary"})(Te.KnownFailoverGroupReplicationRole||(Te.KnownFailoverGroupReplicationRole={}));(function(r){r.Primary="Primary",r.Secondary="Secondary"})(Te.KnownInstanceFailoverGroupReplicationRole||(Te.KnownInstanceFailoverGroupReplicationRole={}));(function(r){r.LicenseIncluded="LicenseIncluded",r.BasePrice="BasePrice"})(Te.KnownInstancePoolLicenseType||(Te.KnownInstancePoolLicenseType={}));(function(r){r.Creating="Creating",r.Ready="Ready",r.Updating="Updating",r.Deleting="Deleting",r.Disabled="Disabled"})(Te.KnownJobAgentState||(Te.KnownJobAgentState={}));(function(r){r.Created="Created",r.InProgress="InProgress",r.WaitingForChildJobExecutions="WaitingForChildJobExecutions",r.WaitingForRetry="WaitingForRetry",r.Succeeded="Succeeded",r.SucceededWithSkipped="SucceededWithSkipped",r.Failed="Failed",r.TimedOut="TimedOut",r.Canceled="Canceled",r.Skipped="Skipped"})(Te.KnownJobExecutionLifecycle||(Te.KnownJobExecutionLifecycle={}));(function(r){r.Created="Created",r.InProgress="InProgress",r.Succeeded="Succeeded",r.Failed="Failed",r.Canceled="Canceled"})(Te.KnownProvisioningState||(Te.KnownProvisioningState={}));(function(r){r.TargetGroup="TargetGroup",r.SqlDatabase="SqlDatabase",r.SqlElasticPool="SqlElasticPool",r.SqlShardMap="SqlShardMap",r.SqlServer="SqlServer"})(Te.KnownJobTargetType||(Te.KnownJobTargetType={}));(function(r){r.TSql="TSql"})(Te.KnownJobStepActionType||(Te.KnownJobStepActionType={}));(function(r){r.Inline="Inline"})(Te.KnownJobStepActionSource||(Te.KnownJobStepActionSource={}));(function(r){r.SqlDatabase="SqlDatabase"})(Te.KnownJobStepOutputType||(Te.KnownJobStepOutputType={}));(function(r){r.SupportedEditions="supportedEditions",r.SupportedElasticPoolEditions="supportedElasticPoolEditions",r.SupportedManagedInstanceVersions="supportedManagedInstanceVersions",r.SupportedInstancePoolEditions="supportedInstancePoolEditions",r.SupportedManagedInstanceEditions="supportedManagedInstanceEditions"})(Te.KnownCapabilityGroup||(Te.KnownCapabilityGroup={}));(function(r){r.Megabytes="Megabytes",r.Gigabytes="Gigabytes",r.Terabytes="Terabytes",r.Petabytes="Petabytes"})(Te.KnownMaxSizeUnit||(Te.KnownMaxSizeUnit={}));(function(r){r.Megabytes="Megabytes",r.Gigabytes="Gigabytes",r.Terabytes="Terabytes",r.Petabytes="Petabytes",r.Percent="Percent"})(Te.KnownLogSizeUnit||(Te.KnownLogSizeUnit={}));(function(r){r.DTU="DTU",r.VCores="VCores"})(Te.KnownPerformanceLevelUnit||(Te.KnownPerformanceLevelUnit={}));(function(r){r.Minutes="Minutes"})(Te.KnownPauseDelayTimeUnit||(Te.KnownPauseDelayTimeUnit={}));(function(r){r.GRS="GRS",r.LRS="LRS",r.ZRS="ZRS"})(Te.KnownStorageCapabilityStorageAccountType||(Te.KnownStorageCapabilityStorageAccountType={}));(function(r){r.Default="default"})(Te.KnownLongTermRetentionPolicyName||(Te.KnownLongTermRetentionPolicyName={}));(function(r){r.Sunday="Sunday",r.Monday="Monday",r.Tuesday="Tuesday",r.Wednesday="Wednesday",r.Thursday="Thursday",r.Friday="Friday",r.Saturday="Saturday"})(Te.KnownDayOfWeek||(Te.KnownDayOfWeek={}));(function(r){r.Default="default"})(Te.KnownManagedShortTermRetentionPolicyName||(Te.KnownManagedShortTermRetentionPolicyName={}));(function(r){r.PT1H="PT1H",r.P1D="P1D"})(Te.KnownQueryTimeGrainType||(Te.KnownQueryTimeGrainType={}));(function(r){r.Percentage="percentage",r.KB="KB",r.Microseconds="microseconds",r.Count="count"})(Te.KnownQueryMetricUnitType||(Te.KnownQueryMetricUnitType={}));(function(r){r.Default="Default"})(Te.KnownRestoreDetailsName||(Te.KnownRestoreDetailsName={}));(function(r){r.Online="Online",r.Offline="Offline",r.Shutdown="Shutdown",r.Creating="Creating",r.Inaccessible="Inaccessible",r.Restoring="Restoring",r.Updating="Updating"})(Te.KnownManagedDatabaseStatus||(Te.KnownManagedDatabaseStatus={}));(function(r){r.DatabaseDefault="DATABASE_DEFAULT",r.SQLLatin1GeneralCP1CIAS="SQL_Latin1_General_CP1_CI_AS"})(Te.KnownCatalogCollationType||(Te.KnownCatalogCollationType={}));(function(r){r.Default="Default",r.RestoreExternalBackup="RestoreExternalBackup",r.PointInTimeRestore="PointInTimeRestore",r.Recovery="Recovery",r.RestoreLongTermRetentionBackup="RestoreLongTermRetentionBackup"})(Te.KnownManagedDatabaseCreateMode||(Te.KnownManagedDatabaseCreateMode={}));(function(r){r.Current="current"})(Te.KnownTransparentDataEncryptionName||(Te.KnownTransparentDataEncryptionName={}));(function(r){r.ActiveDirectory="ActiveDirectory"})(Te.KnownManagedInstanceAdministratorType||(Te.KnownManagedInstanceAdministratorType={}));(function(r){r.ActiveDirectory="ActiveDirectory"})(Te.KnownAdministratorName||(Te.KnownAdministratorName={}));(function(r){r.Default="Default"})(Te.KnownAuthenticationName||(Te.KnownAuthenticationName={}));(function(r){r.Default="default"})(Te.KnownManagedInstanceLongTermRetentionPolicyName||(Te.KnownManagedInstanceLongTermRetentionPolicyName={}));(function(r){r.Pending="Pending",r.InProgress="InProgress",r.Succeeded="Succeeded",r.Failed="Failed",r.CancelInProgress="CancelInProgress",r.Cancelled="Cancelled"})(Te.KnownManagementOperationState||(Te.KnownManagementOperationState={}));(function(r){r.NotStarted="NotStarted",r.InProgress="InProgress",r.SlowedDown="SlowedDown",r.Completed="Completed",r.Failed="Failed",r.Canceled="Canceled"})(Te.KnownUpsertManagedServerOperationStepStatus||(Te.KnownUpsertManagedServerOperationStepStatus={}));(function(r){r.User="user",r.System="system"})(Te.KnownOperationOrigin||(Te.KnownOperationOrigin={}));(function(r){r.Approved="Approved",r.Pending="Pending",r.Rejected="Rejected",r.Disconnected="Disconnected"})(Te.KnownPrivateLinkServiceConnectionStateStatus||(Te.KnownPrivateLinkServiceConnectionStateStatus={}));(function(r){r.None="None"})(Te.KnownPrivateLinkServiceConnectionStateActionsRequire||(Te.KnownPrivateLinkServiceConnectionStateActionsRequire={}));(function(r){r.Approving="Approving",r.Ready="Ready",r.Dropping="Dropping",r.Failed="Failed",r.Rejecting="Rejecting"})(Te.KnownPrivateEndpointProvisioningState||(Te.KnownPrivateEndpointProvisioningState={}));(function(r){r.ActiveDirectory="ActiveDirectory"})(Te.KnownAdministratorType||(Te.KnownAdministratorType={}));(function(r){r.GlobalTransactions="GlobalTransactions",r.ServiceBroker="ServiceBroker"})(Te.KnownServerTrustGroupPropertiesTrustScopesItem||(Te.KnownServerTrustGroupPropertiesTrustScopesItem={}));(function(r){r.Enabled="Enabled",r.Disabled="Disabled"})(Te.KnownSqlAgentConfigurationPropertiesState||(Te.KnownSqlAgentConfigurationPropertiesState={}));(function(r){r.Online="Online",r.Offline="Offline",r.NeverConnected="NeverConnected"})(Te.KnownSyncAgentState||(Te.KnownSyncAgentState={}));(function(r){r.AzureSqlDatabase="AzureSqlDatabase",r.SqlServerDatabase="SqlServerDatabase"})(Te.KnownSyncMemberDbType||(Te.KnownSyncMemberDbType={}));(function(r){r.All="All",r.Error="Error",r.Warning="Warning",r.Success="Success"})(Te.KnownEnum60||(Te.KnownEnum60={}));(function(r){r.All="All",r.Error="Error",r.Warning="Warning",r.Success="Success"})(Te.KnownSyncGroupLogType||(Te.KnownSyncGroupLogType={}));(function(r){r.HubWin="HubWin",r.MemberWin="MemberWin"})(Te.KnownSyncConflictResolutionPolicy||(Te.KnownSyncConflictResolutionPolicy={}));(function(r){r.NotReady="NotReady",r.Error="Error",r.Warning="Warning",r.Progressing="Progressing",r.Good="Good"})(Te.KnownSyncGroupState||(Te.KnownSyncGroupState={}));(function(r){r.Bidirectional="Bidirectional",r.OneWayMemberToHub="OneWayMemberToHub",r.OneWayHubToMember="OneWayHubToMember"})(Te.KnownSyncDirection||(Te.KnownSyncDirection={}));(function(r){r.SyncInProgress="SyncInProgress",r.SyncSucceeded="SyncSucceeded",r.SyncFailed="SyncFailed",r.DisabledTombstoneCleanup="DisabledTombstoneCleanup",r.DisabledBackupRestore="DisabledBackupRestore",r.SyncSucceededWithWarnings="SyncSucceededWithWarnings",r.SyncCancelling="SyncCancelling",r.SyncCancelled="SyncCancelled",r.UnProvisioned="UnProvisioned",r.Provisioning="Provisioning",r.Provisioned="Provisioned",r.ProvisionFailed="ProvisionFailed",r.DeProvisioning="DeProvisioning",r.DeProvisioned="DeProvisioned",r.DeProvisionFailed="DeProvisionFailed",r.Reprovisioning="Reprovisioning",r.ReprovisionFailed="ReprovisionFailed",r.UnReprovisioned="UnReprovisioned"})(Te.KnownSyncMemberState||(Te.KnownSyncMemberState={}));(function(r){r.Succeeded="Succeeded",r.Failed="Failed"})(Te.KnownDnsRefreshConfigurationPropertiesStatus||(Te.KnownDnsRefreshConfigurationPropertiesStatus={}));(function(r){r.Initializing="Initializing",r.InProgress="InProgress",r.Ready="Ready",r.Failed="Failed",r.Deleting="Deleting",r.Unknown="Unknown"})(Te.KnownVirtualNetworkRuleState||(Te.KnownVirtualNetworkRuleState={}));(function(r){r.Default="default"})(Te.KnownShortTermRetentionPolicyName||(Te.KnownShortTermRetentionPolicyName={}));(function(r){r[r.Twelve=12]="Twelve",r[r.TwentyFour=24]="TwentyFour"})(Te.KnownDiffBackupIntervalInHours||(Te.KnownDiffBackupIntervalInHours={}));(function(r){r.PolybaseImport="PolybaseImport"})(Te.KnownOperationMode||(Te.KnownOperationMode={}));(function(r){r.SharedAccessKey="SharedAccessKey",r.StorageAccessKey="StorageAccessKey"})(Te.KnownStorageKeyType||(Te.KnownStorageKeyType={}));(function(r){r.Current="current"})(Te.KnownLedgerDigestUploadsName||(Te.KnownLedgerDigestUploadsName={}));(function(r){r.Pending="PENDING",r.Seeding="SEEDING",r.CatchUP="CATCH_UP",r.Suspended="SUSPENDED"})(Te.KnownReplicationState||(Te.KnownReplicationState={}));(function(r){r.GEO="GEO",r.Named="NAMED"})(Te.KnownReplicationLinkType||(Te.KnownReplicationLinkType={}));(function(r){r.None="None",r.SystemAssigned="SystemAssigned",r.UserAssigned="UserAssigned",r.SystemAssignedUserAssigned="SystemAssigned,UserAssigned"})(Te.KnownIdentityType||(Te.KnownIdentityType={}));(function(r){r.Enabled="Enabled",r.Disabled="Disabled"})(Te.KnownServerNetworkAccessFlag||(Te.KnownServerNetworkAccessFlag={}));(function(r){r.Connected="Connected",r.Disconnected="Disconnected"})(Te.KnownServerWorkspaceFeature||(Te.KnownServerWorkspaceFeature={}));(function(r){r.User="User",r.Group="Group",r.Application="Application"})(Te.KnownPrincipalType||(Te.KnownPrincipalType={}));(function(r){r.None="None",r.UserAssigned="UserAssigned"})(Te.KnownDatabaseIdentityType||(Te.KnownDatabaseIdentityType={}));(function(r){r.Default="Default",r.Copy="Copy",r.Secondary="Secondary",r.PointInTimeRestore="PointInTimeRestore",r.Restore="Restore",r.Recovery="Recovery",r.RestoreExternalBackup="RestoreExternalBackup",r.RestoreExternalBackupSecondary="RestoreExternalBackupSecondary",r.RestoreLongTermRetentionBackup="RestoreLongTermRetentionBackup",r.OnlineSecondary="OnlineSecondary"})(Te.KnownCreateMode||(Te.KnownCreateMode={}));(function(r){r.AdventureWorksLT="AdventureWorksLT",r.WideWorldImportersStd="WideWorldImportersStd",r.WideWorldImportersFull="WideWorldImportersFull"})(Te.KnownSampleName||(Te.KnownSampleName={}));(function(r){r.Online="Online",r.Restoring="Restoring",r.RecoveryPending="RecoveryPending",r.Recovering="Recovering",r.Suspect="Suspect",r.Offline="Offline",r.Standby="Standby",r.Shutdown="Shutdown",r.EmergencyMode="EmergencyMode",r.AutoClosed="AutoClosed",r.Copying="Copying",r.Creating="Creating",r.Inaccessible="Inaccessible",r.OfflineSecondary="OfflineSecondary",r.Pausing="Pausing",r.Paused="Paused",r.Resuming="Resuming",r.Scaling="Scaling",r.OfflineChangingDwPerformanceTiers="OfflineChangingDwPerformanceTiers",r.OnlineChangingDwPerformanceTiers="OnlineChangingDwPerformanceTiers",r.Disabled="Disabled",r.Stopping="Stopping",r.Stopped="Stopped",r.Starting="Starting"})(Te.KnownDatabaseStatus||(Te.KnownDatabaseStatus={}));(function(r){r.LicenseIncluded="LicenseIncluded",r.BasePrice="BasePrice"})(Te.KnownDatabaseLicenseType||(Te.KnownDatabaseLicenseType={}));(function(r){r.Enabled="Enabled",r.Disabled="Disabled"})(Te.KnownDatabaseReadScale||(Te.KnownDatabaseReadScale={}));(function(r){r.Geo="Geo",r.Named="Named"})(Te.KnownSecondaryType||(Te.KnownSecondaryType={}));(function(r){r.Geo="Geo",r.Local="Local",r.Zone="Zone",r.GeoZone="GeoZone"})(Te.KnownBackupStorageRedundancy||(Te.KnownBackupStorageRedundancy={}));(function(r){r.Primary="Primary",r.ReadableSecondary="ReadableSecondary"})(Te.KnownReplicaType||(Te.KnownReplicaType={}));(function(r){r.All="All",r.Live="Live",r.Deleted="Deleted"})(Te.KnownDatabaseState||(Te.KnownDatabaseState={}));(function(r){r.Creating="Creating",r.Deleting="Deleting",r.Updating="Updating",r.Unknown="Unknown",r.Succeeded="Succeeded",r.Failed="Failed",r.Accepted="Accepted",r.Created="Created",r.Deleted="Deleted",r.Unrecognized="Unrecognized",r.Running="Running",r.Canceled="Canceled",r.NotSpecified="NotSpecified",r.Registering="Registering",r.TimedOut="TimedOut"})(Te.KnownManagedInstancePropertiesProvisioningState||(Te.KnownManagedInstancePropertiesProvisioningState={}));(function(r){r.Default="Default",r.PointInTimeRestore="PointInTimeRestore"})(Te.KnownManagedServerCreateMode||(Te.KnownManagedServerCreateMode={}));(function(r){r.LicenseIncluded="LicenseIncluded",r.BasePrice="BasePrice"})(Te.KnownManagedInstanceLicenseType||(Te.KnownManagedInstanceLicenseType={}));(function(r){r.Proxy="Proxy",r.Redirect="Redirect",r.Default="Default"})(Te.KnownManagedInstanceProxyOverride||(Te.KnownManagedInstanceProxyOverride={}));(function(r){r.None="None",r.SystemAssigned="SystemAssigned"})(Te.KnownServicePrincipalType||(Te.KnownServicePrincipalType={}));(function(r){r.Avg="avg",r.Min="min",r.Max="max",r.Stdev="stdev",r.Sum="sum"})(Te.KnownAggregationFunctionType||(Te.KnownAggregationFunctionType={}));(function(r){r.Cpu="cpu",r.Io="io",r.LogIo="logIo",r.Duration="duration",r.Dtu="dtu"})(Te.KnownMetricType||(Te.KnownMetricType={}));(function(r){r.Default="default"})(Te.KnownConnectionPolicyName||(Te.KnownConnectionPolicyName={}));(function(r){r.Default="Default",r.Redirect="Redirect",r.Proxy="Proxy"})(Te.KnownServerConnectionType||(Te.KnownServerConnectionType={}));(function(r){r.System="System",r.System0="System0",r.System1="System1",r.System2="System2",r.System3="System3",r.System4="System4",r.System2L="System2L",r.System3L="System3L",r.System4L="System4L",r.Free="Free",r.Basic="Basic",r.S0="S0",r.S1="S1",r.S2="S2",r.S3="S3",r.S4="S4",r.S6="S6",r.S7="S7",r.S9="S9",r.S12="S12",r.P1="P1",r.P2="P2",r.P3="P3",r.P4="P4",r.P6="P6",r.P11="P11",r.P15="P15",r.PRS1="PRS1",r.PRS2="PRS2",r.PRS4="PRS4",r.PRS6="PRS6",r.DW100="DW100",r.DW200="DW200",r.DW300="DW300",r.DW400="DW400",r.DW500="DW500",r.DW600="DW600",r.DW1000="DW1000",r.DW1200="DW1200",r.DW1000C="DW1000c",r.DW1500="DW1500",r.DW1500C="DW1500c",r.DW2000="DW2000",r.DW2000C="DW2000c",r.DW3000="DW3000",r.DW2500C="DW2500c",r.DW3000C="DW3000c",r.DW6000="DW6000",r.DW5000C="DW5000c",r.DW6000C="DW6000c",r.DW7500C="DW7500c",r.DW10000C="DW10000c",r.DW15000C="DW15000c",r.DW30000C="DW30000c",r.DS100="DS100",r.DS200="DS200",r.DS300="DS300",r.DS400="DS400",r.DS500="DS500",r.DS600="DS600",r.DS1000="DS1000",r.DS1200="DS1200",r.DS1500="DS1500",r.DS2000="DS2000",r.ElasticPool="ElasticPool"})(Te.KnownServiceObjectiveName||(Te.KnownServiceObjectiveName={}));var _7={type:{name:"Composite",className:"Resource",modelProperties:{id:{serializedName:"id",readOnly:!0,type:{name:"String"}},name:{serializedName:"name",readOnly:!0,type:{name:"String"}},type:{serializedName:"type",readOnly:!0,type:{name:"String"}}}}},DIe={type:{name:"Composite",className:"RecoverableDatabaseListResult",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"RecoverableDatabase"}}}}}}},MIe={type:{name:"Composite",className:"DataMaskingRuleListResult",modelProperties:{value:{serializedName:"value",type:{name:"Sequence",element:{type:{name:"Composite",className:"DataMaskingRule"}}}}}}},kIe={type:{name:"Composite",className:"GeoBackupPolicyListResult",modelProperties:{value:{serializedName:"value",type:{name:"Sequence",element:{type:{name:"Composite",className:"GeoBackupPolicy"}}}}}}},S7={type:{name:"Composite",className:"MetricListResult",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"Metric"}}}}}}},Qyt={type:{name:"Composite",className:"Metric",modelProperties:{startTime:{serializedName:"startTime",readOnly:!0,type:{name:"DateTime"}},endTime:{serializedName:"endTime",readOnly:!0,type:{name:"DateTime"}},timeGrain:{serializedName:"timeGrain",readOnly:!0,type:{name:"String"}},unit:{serializedName:"unit",readOnly:!0,type:{name:"String"}},name:{serializedName:"name",type:{name:"Composite",className:"MetricName"}},metricValues:{serializedName:"metricValues",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"MetricValue"}}}}}}},Yyt={type:{name:"Composite",className:"MetricName",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"String"}},localizedValue:{serializedName:"localizedValue",readOnly:!0,type:{name:"String"}}}}},Xyt={type:{name:"Composite",className:"MetricValue",modelProperties:{count:{serializedName:"count",readOnly:!0,type:{name:"Number"}},average:{serializedName:"average",readOnly:!0,type:{name:"Number"}},maximum:{serializedName:"maximum",readOnly:!0,type:{name:"Number"}},minimum:{serializedName:"minimum",readOnly:!0,type:{name:"Number"}},timestamp:{serializedName:"timestamp",readOnly:!0,type:{name:"DateTime"}},total:{serializedName:"total",readOnly:!0,type:{name:"Number"}}}}},C7={type:{name:"Composite",className:"MetricDefinitionListResult",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"MetricDefinition"}}}}}}},Jyt={type:{name:"Composite",className:"MetricDefinition",modelProperties:{name:{serializedName:"name",type:{name:"Composite",className:"MetricName"}},primaryAggregationType:{serializedName:"primaryAggregationType",readOnly:!0,type:{name:"String"}},resourceUri:{serializedName:"resourceUri",readOnly:!0,type:{name:"String"}},unit:{serializedName:"unit",readOnly:!0,type:{name:"String"}},metricAvailabilities:{serializedName:"metricAvailabilities",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"MetricAvailability"}}}}}}},Zyt={type:{name:"Composite",className:"MetricAvailability",modelProperties:{retention:{serializedName:"retention",readOnly:!0,type:{name:"String"}},timeGrain:{serializedName:"timeGrain",readOnly:!0,type:{name:"String"}}}}},LIe={type:{name:"Composite",className:"UnlinkParameters",modelProperties:{forcedTermination:{serializedName:"forcedTermination",type:{name:"Boolean"}}}}},qIe={type:{name:"Composite",className:"ServerCommunicationLinkListResult",modelProperties:{value:{serializedName:"value",type:{name:"Sequence",element:{type:{name:"Composite",className:"ServerCommunicationLink"}}}}}}},zIe={type:{name:"Composite",className:"ServiceObjectiveListResult",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ServiceObjective"}}}}}}},FIe={type:{name:"Composite",className:"ElasticPoolActivityListResult",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ElasticPoolActivity"}}}}}}},jIe={type:{name:"Composite",className:"ElasticPoolDatabaseActivityListResult",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ElasticPoolDatabaseActivity"}}}}}}},UIe={type:{name:"Composite",className:"ServerUsageListResult",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ServerUsage"}}}}}}},evt={type:{name:"Composite",className:"ServerUsage",modelProperties:{name:{serializedName:"name",readOnly:!0,type:{name:"String"}},resourceName:{serializedName:"resourceName",readOnly:!0,type:{name:"String"}},displayName:{serializedName:"displayName",readOnly:!0,type:{name:"String"}},currentValue:{serializedName:"currentValue",readOnly:!0,type:{name:"Number"}},limit:{serializedName:"limit",readOnly:!0,type:{name:"Number"}},unit:{serializedName:"unit",readOnly:!0,type:{name:"String"}},nextResetTime:{serializedName:"nextResetTime",readOnly:!0,type:{name:"DateTime"}}}}},P7={type:{name:"Composite",className:"ExtendedDatabaseBlobAuditingPolicyListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ExtendedDatabaseBlobAuditingPolicy"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},w7={type:{name:"Composite",className:"ExtendedServerBlobAuditingPolicyListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ExtendedServerBlobAuditingPolicy"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},E7={type:{name:"Composite",className:"ServerBlobAuditingPolicyListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ServerBlobAuditingPolicy"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},T7={type:{name:"Composite",className:"DatabaseBlobAuditingPolicyListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"DatabaseBlobAuditingPolicy"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},tvt={type:{name:"Composite",className:"RecommendedActionStateInfo",modelProperties:{currentValue:{serializedName:"currentValue",required:!0,type:{name:"String"}},actionInitiatedBy:{serializedName:"actionInitiatedBy",readOnly:!0,type:{name:"Enum",allowedValues:["User","System"]}},lastModified:{serializedName:"lastModified",readOnly:!0,type:{name:"DateTime"}}}}},rvt={type:{name:"Composite",className:"RecommendedActionImplementationInfo",modelProperties:{method:{serializedName:"method",readOnly:!0,type:{name:"Enum",allowedValues:["TSql","AzurePowerShell"]}},script:{serializedName:"script",readOnly:!0,type:{name:"String"}}}}},nvt={type:{name:"Composite",className:"RecommendedActionErrorInfo",modelProperties:{errorCode:{serializedName:"errorCode",readOnly:!0,type:{name:"String"}},isRetryable:{serializedName:"isRetryable",readOnly:!0,type:{name:"Enum",allowedValues:["Yes","No"]}}}}},ivt={type:{name:"Composite",className:"RecommendedActionImpactRecord",modelProperties:{dimensionName:{serializedName:"dimensionName",readOnly:!0,type:{name:"String"}},unit:{serializedName:"unit",readOnly:!0,type:{name:"String"}},absoluteValue:{serializedName:"absoluteValue",readOnly:!0,type:{name:"Number"}},changeValueAbsolute:{serializedName:"changeValueAbsolute",readOnly:!0,type:{name:"Number"}},changeValueRelative:{serializedName:"changeValueRelative",readOnly:!0,type:{name:"Number"}}}}},svt={type:{name:"Composite",className:"RecommendedActionMetricInfo",modelProperties:{metricName:{serializedName:"metricName",readOnly:!0,type:{name:"String"}},unit:{serializedName:"unit",readOnly:!0,type:{name:"String"}},timeGrain:{serializedName:"timeGrain",readOnly:!0,type:{name:"String"}},startTime:{serializedName:"startTime",readOnly:!0,type:{name:"DateTime"}},value:{serializedName:"value",readOnly:!0,type:{name:"Number"}}}}},ovt={type:{name:"Composite",className:"AutomaticTuningOptions",modelProperties:{desiredState:{serializedName:"desiredState",type:{name:"Enum",allowedValues:["Off","On","Default"]}},actualState:{serializedName:"actualState",readOnly:!0,type:{name:"Enum",allowedValues:["Off","On"]}},reasonCode:{serializedName:"reasonCode",readOnly:!0,type:{name:"Number"}},reasonDesc:{serializedName:"reasonDesc",readOnly:!0,type:{name:"Enum",allowedValues:["Default","Disabled","AutoConfigured","InheritedFromServer","QueryStoreOff","QueryStoreReadOnly","NotSupported"]}}}}},ig={type:{name:"Composite",className:"DatabaseColumnListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"DatabaseColumn"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},mN={type:{name:"Composite",className:"DatabaseSchemaListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"DatabaseSchema"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},avt={type:{name:"Composite",className:"SystemData",modelProperties:{createdBy:{serializedName:"createdBy",type:{name:"String"}},createdByType:{serializedName:"createdByType",type:{name:"String"}},createdAt:{serializedName:"createdAt",type:{name:"DateTime"}},lastModifiedBy:{serializedName:"lastModifiedBy",type:{name:"String"}},lastModifiedByType:{serializedName:"lastModifiedByType",type:{name:"String"}},lastModifiedAt:{serializedName:"lastModifiedAt",type:{name:"DateTime"}}}}},I7={type:{name:"Composite",className:"DatabaseSecurityAlertListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"DatabaseSecurityAlertPolicy"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},hN={type:{name:"Composite",className:"DatabaseTableListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"DatabaseTable"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},cvt={type:{name:"Composite",className:"DatabaseVulnerabilityAssessmentRuleBaselineItem",modelProperties:{result:{serializedName:"result",required:!0,type:{name:"Sequence",element:{type:{name:"String"}}}}}}},lvt={type:{name:"Composite",className:"VulnerabilityAssessmentRecurringScansProperties",modelProperties:{isEnabled:{serializedName:"isEnabled",type:{name:"Boolean"}},emailSubscriptionAdmins:{defaultValue:!0,serializedName:"emailSubscriptionAdmins",type:{name:"Boolean"}},emails:{serializedName:"emails",type:{name:"Sequence",element:{type:{name:"String"}}}}}}},fN={type:{name:"Composite",className:"DatabaseVulnerabilityAssessmentListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"DatabaseVulnerabilityAssessment"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},gN={type:{name:"Composite",className:"VulnerabilityAssessmentScanRecordListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"VulnerabilityAssessmentScanRecord"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},uvt={type:{name:"Composite",className:"VulnerabilityAssessmentScanError",modelProperties:{code:{serializedName:"code",readOnly:!0,type:{name:"String"}},message:{serializedName:"message",readOnly:!0,type:{name:"String"}}}}},R7={type:{name:"Composite",className:"DataWarehouseUserActivitiesListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"DataWarehouseUserActivities"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},yN={type:{name:"Composite",className:"DeletedServerListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"DeletedServer"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},x7={type:{name:"Composite",className:"ElasticPoolOperationListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ElasticPoolOperation"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},O7={type:{name:"Composite",className:"ElasticPoolListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ElasticPool"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},dvt={type:{name:"Composite",className:"Sku",modelProperties:{name:{serializedName:"name",required:!0,type:{name:"String"}},tier:{serializedName:"tier",type:{name:"String"}},size:{serializedName:"size",type:{name:"String"}},family:{serializedName:"family",type:{name:"String"}},capacity:{serializedName:"capacity",type:{name:"Number"}}}}},pvt={type:{name:"Composite",className:"ElasticPoolPerDatabaseSettings",modelProperties:{minCapacity:{serializedName:"minCapacity",type:{name:"Number"}},maxCapacity:{serializedName:"maxCapacity",type:{name:"Number"}}}}},BIe={type:{name:"Composite",className:"ElasticPoolUpdate",modelProperties:{sku:{serializedName:"sku",type:{name:"Composite",className:"Sku"}},tags:{serializedName:"tags",type:{name:"Dictionary",value:{type:{name:"String"}}}},maxSizeBytes:{serializedName:"properties.maxSizeBytes",type:{name:"Number"}},perDatabaseSettings:{serializedName:"properties.perDatabaseSettings",type:{name:"Composite",className:"ElasticPoolPerDatabaseSettings"}},zoneRedundant:{serializedName:"properties.zoneRedundant",type:{name:"Boolean"}},licenseType:{serializedName:"properties.licenseType",type:{name:"String"}},maintenanceConfigurationId:{serializedName:"properties.maintenanceConfigurationId",type:{name:"String"}}}}},A7={type:{name:"Composite",className:"EncryptionProtectorListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"EncryptionProtector"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},mvt={type:{name:"Composite",className:"FailoverGroupReadWriteEndpoint",modelProperties:{failoverPolicy:{serializedName:"failoverPolicy",required:!0,type:{name:"String"}},failoverWithDataLossGracePeriodMinutes:{serializedName:"failoverWithDataLossGracePeriodMinutes",type:{name:"Number"}}}}},hvt={type:{name:"Composite",className:"FailoverGroupReadOnlyEndpoint",modelProperties:{failoverPolicy:{serializedName:"failoverPolicy",type:{name:"String"}}}}},fvt={type:{name:"Composite",className:"PartnerInfo",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},location:{serializedName:"location",readOnly:!0,type:{name:"String"}},replicationRole:{serializedName:"replicationRole",readOnly:!0,type:{name:"String"}}}}},GIe={type:{name:"Composite",className:"FailoverGroupUpdate",modelProperties:{tags:{serializedName:"tags",type:{name:"Dictionary",value:{type:{name:"String"}}}},readWriteEndpoint:{serializedName:"properties.readWriteEndpoint",type:{name:"Composite",className:"FailoverGroupReadWriteEndpoint"}},readOnlyEndpoint:{serializedName:"properties.readOnlyEndpoint",type:{name:"Composite",className:"FailoverGroupReadOnlyEndpoint"}},databases:{serializedName:"properties.databases",type:{name:"Sequence",element:{type:{name:"String"}}}}}}},N7={type:{name:"Composite",className:"FailoverGroupListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"FailoverGroup"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},$Ie={type:{name:"Composite",className:"ResourceWithWritableName",modelProperties:{id:{serializedName:"id",readOnly:!0,type:{name:"String"}},name:{serializedName:"name",type:{name:"String"}},type:{serializedName:"type",readOnly:!0,type:{name:"String"}}}}},D7={type:{name:"Composite",className:"FirewallRuleListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"FirewallRule"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},VIe={type:{name:"Composite",className:"FirewallRuleList",modelProperties:{values:{serializedName:"values",type:{name:"Sequence",element:{type:{name:"Composite",className:"FirewallRule"}}}}}}},gvt={type:{name:"Composite",className:"InstanceFailoverGroupReadWriteEndpoint",modelProperties:{failoverPolicy:{serializedName:"failoverPolicy",required:!0,type:{name:"String"}},failoverWithDataLossGracePeriodMinutes:{serializedName:"failoverWithDataLossGracePeriodMinutes",type:{name:"Number"}}}}},yvt={type:{name:"Composite",className:"InstanceFailoverGroupReadOnlyEndpoint",modelProperties:{failoverPolicy:{serializedName:"failoverPolicy",type:{name:"String"}}}}},vvt={type:{name:"Composite",className:"PartnerRegionInfo",modelProperties:{location:{serializedName:"location",type:{name:"String"}},replicationRole:{serializedName:"replicationRole",readOnly:!0,type:{name:"String"}}}}},bvt={type:{name:"Composite",className:"ManagedInstancePairInfo",modelProperties:{primaryManagedInstanceId:{serializedName:"primaryManagedInstanceId",type:{name:"String"}},partnerManagedInstanceId:{serializedName:"partnerManagedInstanceId",type:{name:"String"}}}}},M7={type:{name:"Composite",className:"InstanceFailoverGroupListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"InstanceFailoverGroup"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},HIe={type:{name:"Composite",className:"InstancePoolUpdate",modelProperties:{tags:{serializedName:"tags",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},vN={type:{name:"Composite",className:"InstancePoolListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"InstancePool"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},k7={type:{name:"Composite",className:"JobAgentListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"JobAgent"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},WIe={type:{name:"Composite",className:"JobAgentUpdate",modelProperties:{tags:{serializedName:"tags",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},L7={type:{name:"Composite",className:"JobCredentialListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"JobCredential"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},pm={type:{name:"Composite",className:"JobExecutionListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"JobExecution"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},_vt={type:{name:"Composite",className:"JobExecutionTarget",modelProperties:{type:{serializedName:"type",readOnly:!0,type:{name:"String"}},serverName:{serializedName:"serverName",readOnly:!0,type:{name:"String"}},databaseName:{serializedName:"databaseName",readOnly:!0,type:{name:"String"}}}}},q7={type:{name:"Composite",className:"JobListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"Job"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},Svt={type:{name:"Composite",className:"JobSchedule",modelProperties:{startTime:{defaultValue:"0001-01-01T00:00:00+00:00",serializedName:"startTime",type:{name:"DateTime"}},endTime:{defaultValue:"9999-12-31T11:59:59+00:00",serializedName:"endTime",type:{name:"DateTime"}},type:{defaultValue:"Once",serializedName:"type",type:{name:"Enum",allowedValues:["Once","Recurring"]}},enabled:{serializedName:"enabled",type:{name:"Boolean"}},interval:{serializedName:"interval",type:{name:"String"}}}}},bN={type:{name:"Composite",className:"JobStepListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"JobStep"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},Cvt={type:{name:"Composite",className:"JobStepAction",modelProperties:{type:{defaultValue:"TSql",serializedName:"type",type:{name:"String"}},source:{defaultValue:"Inline",serializedName:"source",type:{name:"String"}},value:{serializedName:"value",required:!0,type:{name:"String"}}}}},Pvt={type:{name:"Composite",className:"JobStepOutput",modelProperties:{type:{defaultValue:"SqlDatabase",serializedName:"type",type:{name:"String"}},subscriptionId:{serializedName:"subscriptionId",type:{name:"Uuid"}},resourceGroupName:{serializedName:"resourceGroupName",type:{name:"String"}},serverName:{serializedName:"serverName",required:!0,type:{name:"String"}},databaseName:{serializedName:"databaseName",required:!0,type:{name:"String"}},schemaName:{defaultValue:"dbo",serializedName:"schemaName",type:{name:"String"}},tableName:{serializedName:"tableName",required:!0,type:{name:"String"}},credential:{serializedName:"credential",required:!0,type:{name:"String"}}}}},wvt={type:{name:"Composite",className:"JobStepExecutionOptions",modelProperties:{timeoutSeconds:{defaultValue:43200,serializedName:"timeoutSeconds",type:{name:"Number"}},retryAttempts:{defaultValue:10,serializedName:"retryAttempts",type:{name:"Number"}},initialRetryIntervalSeconds:{defaultValue:1,serializedName:"initialRetryIntervalSeconds",type:{name:"Number"}},maximumRetryIntervalSeconds:{defaultValue:120,serializedName:"maximumRetryIntervalSeconds",type:{name:"Number"}},retryIntervalBackoffMultiplier:{defaultValue:2,serializedName:"retryIntervalBackoffMultiplier",type:{name:"Number"}}}}},z7={type:{name:"Composite",className:"JobTargetGroupListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"JobTargetGroup"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},Evt={type:{name:"Composite",className:"JobTarget",modelProperties:{membershipType:{defaultValue:"Include",serializedName:"membershipType",type:{name:"Enum",allowedValues:["Include","Exclude"]}},type:{serializedName:"type",required:!0,type:{name:"String"}},serverName:{serializedName:"serverName",type:{name:"String"}},databaseName:{serializedName:"databaseName",type:{name:"String"}},elasticPoolName:{serializedName:"elasticPoolName",type:{name:"String"}},shardMapName:{serializedName:"shardMapName",type:{name:"String"}},refreshCredential:{serializedName:"refreshCredential",type:{name:"String"}}}}},F7={type:{name:"Composite",className:"JobVersionListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"JobVersion"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},KIe={type:{name:"Composite",className:"LocationCapabilities",modelProperties:{name:{serializedName:"name",readOnly:!0,type:{name:"String"}},supportedServerVersions:{serializedName:"supportedServerVersions",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ServerVersionCapability"}}}},supportedManagedInstanceVersions:{serializedName:"supportedManagedInstanceVersions",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ManagedInstanceVersionCapability"}}}},status:{serializedName:"status",readOnly:!0,type:{name:"Enum",allowedValues:["Visible","Available","Default","Disabled"]}},reason:{serializedName:"reason",type:{name:"String"}}}}},Tvt={type:{name:"Composite",className:"ServerVersionCapability",modelProperties:{name:{serializedName:"name",readOnly:!0,type:{name:"String"}},supportedEditions:{serializedName:"supportedEditions",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"EditionCapability"}}}},supportedElasticPoolEditions:{serializedName:"supportedElasticPoolEditions",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ElasticPoolEditionCapability"}}}},status:{serializedName:"status",readOnly:!0,type:{name:"Enum",allowedValues:["Visible","Available","Default","Disabled"]}},reason:{serializedName:"reason",type:{name:"String"}}}}},Ivt={type:{name:"Composite",className:"EditionCapability",modelProperties:{name:{serializedName:"name",readOnly:!0,type:{name:"String"}},supportedServiceLevelObjectives:{serializedName:"supportedServiceLevelObjectives",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ServiceObjectiveCapability"}}}},zoneRedundant:{serializedName:"zoneRedundant",readOnly:!0,type:{name:"Boolean"}},readScale:{serializedName:"readScale",type:{name:"Composite",className:"ReadScaleCapability"}},supportedStorageCapabilities:{serializedName:"supportedStorageCapabilities",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"StorageCapability"}}}},status:{serializedName:"status",readOnly:!0,type:{name:"Enum",allowedValues:["Visible","Available","Default","Disabled"]}},reason:{serializedName:"reason",type:{name:"String"}}}}},Rvt={type:{name:"Composite",className:"ServiceObjectiveCapability",modelProperties:{id:{serializedName:"id",readOnly:!0,type:{name:"Uuid"}},name:{serializedName:"name",readOnly:!0,type:{name:"String"}},supportedMaxSizes:{serializedName:"supportedMaxSizes",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"MaxSizeRangeCapability"}}}},performanceLevel:{serializedName:"performanceLevel",type:{name:"Composite",className:"PerformanceLevelCapability"}},sku:{serializedName:"sku",type:{name:"Composite",className:"Sku"}},supportedLicenseTypes:{serializedName:"supportedLicenseTypes",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"LicenseTypeCapability"}}}},includedMaxSize:{serializedName:"includedMaxSize",type:{name:"Composite",className:"MaxSizeCapability"}},zoneRedundant:{serializedName:"zoneRedundant",readOnly:!0,type:{name:"Boolean"}},supportedAutoPauseDelay:{serializedName:"supportedAutoPauseDelay",type:{name:"Composite",className:"AutoPauseDelayTimeRange"}},supportedMinCapacities:{serializedName:"supportedMinCapacities",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"MinCapacityCapability"}}}},computeModel:{serializedName:"computeModel",readOnly:!0,type:{name:"String"}},supportedMaintenanceConfigurations:{serializedName:"supportedMaintenanceConfigurations",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"MaintenanceConfigurationCapability"}}}},status:{serializedName:"status",readOnly:!0,type:{name:"Enum",allowedValues:["Visible","Available","Default","Disabled"]}},reason:{serializedName:"reason",type:{name:"String"}}}}},xvt={type:{name:"Composite",className:"MaxSizeRangeCapability",modelProperties:{minValue:{serializedName:"minValue",type:{name:"Composite",className:"MaxSizeCapability"}},maxValue:{serializedName:"maxValue",type:{name:"Composite",className:"MaxSizeCapability"}},scaleSize:{serializedName:"scaleSize",type:{name:"Composite",className:"MaxSizeCapability"}},logSize:{serializedName:"logSize",type:{name:"Composite",className:"LogSizeCapability"}},status:{serializedName:"status",readOnly:!0,type:{name:"Enum",allowedValues:["Visible","Available","Default","Disabled"]}},reason:{serializedName:"reason",type:{name:"String"}}}}},Ovt={type:{name:"Composite",className:"MaxSizeCapability",modelProperties:{limit:{serializedName:"limit",readOnly:!0,type:{name:"Number"}},unit:{serializedName:"unit",readOnly:!0,type:{name:"String"}}}}},Avt={type:{name:"Composite",className:"LogSizeCapability",modelProperties:{limit:{serializedName:"limit",readOnly:!0,type:{name:"Number"}},unit:{serializedName:"unit",readOnly:!0,type:{name:"String"}}}}},Nvt={type:{name:"Composite",className:"PerformanceLevelCapability",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Number"}},unit:{serializedName:"unit",readOnly:!0,type:{name:"String"}}}}},Dvt={type:{name:"Composite",className:"LicenseTypeCapability",modelProperties:{name:{serializedName:"name",readOnly:!0,type:{name:"String"}},status:{serializedName:"status",readOnly:!0,type:{name:"Enum",allowedValues:["Visible","Available","Default","Disabled"]}},reason:{serializedName:"reason",type:{name:"String"}}}}},Mvt={type:{name:"Composite",className:"AutoPauseDelayTimeRange",modelProperties:{minValue:{serializedName:"minValue",readOnly:!0,type:{name:"Number"}},maxValue:{serializedName:"maxValue",readOnly:!0,type:{name:"Number"}},stepSize:{serializedName:"stepSize",readOnly:!0,type:{name:"Number"}},default:{serializedName:"default",readOnly:!0,type:{name:"Number"}},unit:{serializedName:"unit",readOnly:!0,type:{name:"String"}},doNotPauseValue:{serializedName:"doNotPauseValue",readOnly:!0,type:{name:"Number"}}}}},kvt={type:{name:"Composite",className:"MinCapacityCapability",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Number"}},status:{serializedName:"status",readOnly:!0,type:{name:"Enum",allowedValues:["Visible","Available","Default","Disabled"]}},reason:{serializedName:"reason",type:{name:"String"}}}}},Lvt={type:{name:"Composite",className:"MaintenanceConfigurationCapability",modelProperties:{name:{serializedName:"name",readOnly:!0,type:{name:"String"}},zoneRedundant:{serializedName:"zoneRedundant",readOnly:!0,type:{name:"Boolean"}},status:{serializedName:"status",readOnly:!0,type:{name:"Enum",allowedValues:["Visible","Available","Default","Disabled"]}},reason:{serializedName:"reason",type:{name:"String"}}}}},qvt={type:{name:"Composite",className:"ReadScaleCapability",modelProperties:{maxNumberOfReplicas:{serializedName:"maxNumberOfReplicas",readOnly:!0,type:{name:"Number"}},status:{serializedName:"status",readOnly:!0,type:{name:"Enum",allowedValues:["Visible","Available","Default","Disabled"]}},reason:{serializedName:"reason",type:{name:"String"}}}}},zvt={type:{name:"Composite",className:"StorageCapability",modelProperties:{storageAccountType:{serializedName:"storageAccountType",readOnly:!0,type:{name:"String"}},status:{serializedName:"status",readOnly:!0,type:{name:"Enum",allowedValues:["Visible","Available","Default","Disabled"]}},reason:{serializedName:"reason",type:{name:"String"}}}}},Fvt={type:{name:"Composite",className:"ElasticPoolEditionCapability",modelProperties:{name:{serializedName:"name",readOnly:!0,type:{name:"String"}},supportedElasticPoolPerformanceLevels:{serializedName:"supportedElasticPoolPerformanceLevels",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ElasticPoolPerformanceLevelCapability"}}}},zoneRedundant:{serializedName:"zoneRedundant",readOnly:!0,type:{name:"Boolean"}},status:{serializedName:"status",readOnly:!0,type:{name:"Enum",allowedValues:["Visible","Available","Default","Disabled"]}},reason:{serializedName:"reason",type:{name:"String"}}}}},jvt={type:{name:"Composite",className:"ElasticPoolPerformanceLevelCapability",modelProperties:{performanceLevel:{serializedName:"performanceLevel",type:{name:"Composite",className:"PerformanceLevelCapability"}},sku:{serializedName:"sku",type:{name:"Composite",className:"Sku"}},supportedLicenseTypes:{serializedName:"supportedLicenseTypes",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"LicenseTypeCapability"}}}},maxDatabaseCount:{serializedName:"maxDatabaseCount",readOnly:!0,type:{name:"Number"}},includedMaxSize:{serializedName:"includedMaxSize",type:{name:"Composite",className:"MaxSizeCapability"}},supportedMaxSizes:{serializedName:"supportedMaxSizes",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"MaxSizeRangeCapability"}}}},supportedPerDatabaseMaxSizes:{serializedName:"supportedPerDatabaseMaxSizes",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"MaxSizeRangeCapability"}}}},supportedPerDatabaseMaxPerformanceLevels:{serializedName:"supportedPerDatabaseMaxPerformanceLevels",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ElasticPoolPerDatabaseMaxPerformanceLevelCapability"}}}},zoneRedundant:{serializedName:"zoneRedundant",readOnly:!0,type:{name:"Boolean"}},supportedMaintenanceConfigurations:{serializedName:"supportedMaintenanceConfigurations",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"MaintenanceConfigurationCapability"}}}},status:{serializedName:"status",readOnly:!0,type:{name:"Enum",allowedValues:["Visible","Available","Default","Disabled"]}},reason:{serializedName:"reason",type:{name:"String"}}}}},Uvt={type:{name:"Composite",className:"ElasticPoolPerDatabaseMaxPerformanceLevelCapability",modelProperties:{limit:{serializedName:"limit",readOnly:!0,type:{name:"Number"}},unit:{serializedName:"unit",readOnly:!0,type:{name:"String"}},supportedPerDatabaseMinPerformanceLevels:{serializedName:"supportedPerDatabaseMinPerformanceLevels",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ElasticPoolPerDatabaseMinPerformanceLevelCapability"}}}},status:{serializedName:"status",readOnly:!0,type:{name:"Enum",allowedValues:["Visible","Available","Default","Disabled"]}},reason:{serializedName:"reason",type:{name:"String"}}}}},Bvt={type:{name:"Composite",className:"ElasticPoolPerDatabaseMinPerformanceLevelCapability",modelProperties:{limit:{serializedName:"limit",readOnly:!0,type:{name:"Number"}},unit:{serializedName:"unit",readOnly:!0,type:{name:"String"}},status:{serializedName:"status",readOnly:!0,type:{name:"Enum",allowedValues:["Visible","Available","Default","Disabled"]}},reason:{serializedName:"reason",type:{name:"String"}}}}},Gvt={type:{name:"Composite",className:"ManagedInstanceVersionCapability",modelProperties:{name:{serializedName:"name",readOnly:!0,type:{name:"String"}},supportedEditions:{serializedName:"supportedEditions",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ManagedInstanceEditionCapability"}}}},supportedInstancePoolEditions:{serializedName:"supportedInstancePoolEditions",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"InstancePoolEditionCapability"}}}},status:{serializedName:"status",readOnly:!0,type:{name:"Enum",allowedValues:["Visible","Available","Default","Disabled"]}},reason:{serializedName:"reason",type:{name:"String"}}}}},$vt={type:{name:"Composite",className:"ManagedInstanceEditionCapability",modelProperties:{name:{serializedName:"name",readOnly:!0,type:{name:"String"}},supportedFamilies:{serializedName:"supportedFamilies",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ManagedInstanceFamilyCapability"}}}},supportedStorageCapabilities:{serializedName:"supportedStorageCapabilities",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"StorageCapability"}}}},zoneRedundant:{serializedName:"zoneRedundant",readOnly:!0,type:{name:"Boolean"}},status:{serializedName:"status",readOnly:!0,type:{name:"Enum",allowedValues:["Visible","Available","Default","Disabled"]}},reason:{serializedName:"reason",type:{name:"String"}}}}},Vvt={type:{name:"Composite",className:"ManagedInstanceFamilyCapability",modelProperties:{name:{serializedName:"name",readOnly:!0,type:{name:"String"}},sku:{serializedName:"sku",readOnly:!0,type:{name:"String"}},supportedLicenseTypes:{serializedName:"supportedLicenseTypes",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"LicenseTypeCapability"}}}},supportedVcoresValues:{serializedName:"supportedVcoresValues",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ManagedInstanceVcoresCapability"}}}},status:{serializedName:"status",readOnly:!0,type:{name:"Enum",allowedValues:["Visible","Available","Default","Disabled"]}},reason:{serializedName:"reason",type:{name:"String"}}}}},Hvt={type:{name:"Composite",className:"ManagedInstanceVcoresCapability",modelProperties:{name:{serializedName:"name",readOnly:!0,type:{name:"String"}},value:{serializedName:"value",readOnly:!0,type:{name:"Number"}},includedMaxSize:{serializedName:"includedMaxSize",type:{name:"Composite",className:"MaxSizeCapability"}},supportedStorageSizes:{serializedName:"supportedStorageSizes",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"MaxSizeRangeCapability"}}}},instancePoolSupported:{serializedName:"instancePoolSupported",readOnly:!0,type:{name:"Boolean"}},standaloneSupported:{serializedName:"standaloneSupported",readOnly:!0,type:{name:"Boolean"}},supportedMaintenanceConfigurations:{serializedName:"supportedMaintenanceConfigurations",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ManagedInstanceMaintenanceConfigurationCapability"}}}},status:{serializedName:"status",readOnly:!0,type:{name:"Enum",allowedValues:["Visible","Available","Default","Disabled"]}},reason:{serializedName:"reason",type:{name:"String"}}}}},Wvt={type:{name:"Composite",className:"ManagedInstanceMaintenanceConfigurationCapability",modelProperties:{name:{serializedName:"name",readOnly:!0,type:{name:"String"}},status:{serializedName:"status",readOnly:!0,type:{name:"Enum",allowedValues:["Visible","Available","Default","Disabled"]}},reason:{serializedName:"reason",type:{name:"String"}}}}},Kvt={type:{name:"Composite",className:"InstancePoolEditionCapability",modelProperties:{name:{serializedName:"name",readOnly:!0,type:{name:"String"}},supportedFamilies:{serializedName:"supportedFamilies",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"InstancePoolFamilyCapability"}}}},status:{serializedName:"status",readOnly:!0,type:{name:"Enum",allowedValues:["Visible","Available","Default","Disabled"]}},reason:{serializedName:"reason",type:{name:"String"}}}}},Qvt={type:{name:"Composite",className:"InstancePoolFamilyCapability",modelProperties:{name:{serializedName:"name",readOnly:!0,type:{name:"String"}},supportedLicenseTypes:{serializedName:"supportedLicenseTypes",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"LicenseTypeCapability"}}}},supportedVcoresValues:{serializedName:"supportedVcoresValues",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"InstancePoolVcoresCapability"}}}},status:{serializedName:"status",readOnly:!0,type:{name:"Enum",allowedValues:["Visible","Available","Default","Disabled"]}},reason:{serializedName:"reason",type:{name:"String"}}}}},Yvt={type:{name:"Composite",className:"InstancePoolVcoresCapability",modelProperties:{name:{serializedName:"name",readOnly:!0,type:{name:"String"}},value:{serializedName:"value",readOnly:!0,type:{name:"Number"}},storageLimit:{serializedName:"storageLimit",type:{name:"Composite",className:"MaxSizeCapability"}},status:{serializedName:"status",readOnly:!0,type:{name:"Enum",allowedValues:["Visible","Available","Default","Disabled"]}},reason:{serializedName:"reason",type:{name:"String"}}}}},j7={type:{name:"Composite",className:"LongTermRetentionPolicyListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"LongTermRetentionPolicy"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},Xvt={type:{name:"Composite",className:"MaintenanceWindowTimeRange",modelProperties:{dayOfWeek:{serializedName:"dayOfWeek",type:{name:"String"}},startTime:{serializedName:"startTime",type:{name:"String"}},duration:{serializedName:"duration",type:{name:"String"}}}}},_N={type:{name:"Composite",className:"ManagedBackupShortTermRetentionPolicyListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ManagedBackupShortTermRetentionPolicy"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},U7={type:{name:"Composite",className:"ManagedInstanceQueryStatistics",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"QueryStatistics"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},Jvt={type:{name:"Composite",className:"QueryStatisticsProperties",modelProperties:{databaseName:{serializedName:"databaseName",readOnly:!0,type:{name:"String"}},queryId:{serializedName:"queryId",readOnly:!0,type:{name:"String"}},startTime:{serializedName:"startTime",readOnly:!0,type:{name:"String"}},endTime:{serializedName:"endTime",readOnly:!0,type:{name:"String"}},intervals:{serializedName:"intervals",type:{name:"Sequence",element:{type:{name:"Composite",className:"QueryMetricInterval"}}}}}}},Zvt={type:{name:"Composite",className:"QueryMetricInterval",modelProperties:{intervalStartTime:{serializedName:"intervalStartTime",readOnly:!0,type:{name:"String"}},intervalType:{serializedName:"intervalType",readOnly:!0,type:{name:"String"}},executionCount:{serializedName:"executionCount",readOnly:!0,type:{name:"Number"}},metrics:{serializedName:"metrics",type:{name:"Sequence",element:{type:{name:"Composite",className:"QueryMetricProperties"}}}}}}},ebt={type:{name:"Composite",className:"QueryMetricProperties",modelProperties:{name:{serializedName:"name",readOnly:!0,type:{name:"String"}},displayName:{serializedName:"displayName",readOnly:!0,type:{name:"String"}},unit:{serializedName:"unit",readOnly:!0,type:{name:"String"}},value:{serializedName:"value",readOnly:!0,type:{name:"Number"}},min:{serializedName:"min",readOnly:!0,type:{name:"Number"}},max:{serializedName:"max",readOnly:!0,type:{name:"Number"}},avg:{serializedName:"avg",readOnly:!0,type:{name:"Number"}},sum:{serializedName:"sum",readOnly:!0,type:{name:"Number"}},stdev:{serializedName:"stdev",readOnly:!0,type:{name:"Number"}}}}},SN={type:{name:"Composite",className:"ManagedDatabaseListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ManagedDatabase"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},QIe={type:{name:"Composite",className:"ManagedDatabaseUpdate",modelProperties:{tags:{serializedName:"tags",type:{name:"Dictionary",value:{type:{name:"String"}}}},collation:{serializedName:"properties.collation",type:{name:"String"}},status:{serializedName:"properties.status",readOnly:!0,type:{name:"String"}},creationDate:{serializedName:"properties.creationDate",readOnly:!0,type:{name:"DateTime"}},earliestRestorePoint:{serializedName:"properties.earliestRestorePoint",readOnly:!0,type:{name:"DateTime"}},restorePointInTime:{serializedName:"properties.restorePointInTime",type:{name:"DateTime"}},defaultSecondaryLocation:{serializedName:"properties.defaultSecondaryLocation",readOnly:!0,type:{name:"String"}},catalogCollation:{serializedName:"properties.catalogCollation",type:{name:"String"}},createMode:{serializedName:"properties.createMode",type:{name:"String"}},storageContainerUri:{serializedName:"properties.storageContainerUri",type:{name:"String"}},sourceDatabaseId:{serializedName:"properties.sourceDatabaseId",type:{name:"String"}},restorableDroppedDatabaseId:{serializedName:"properties.restorableDroppedDatabaseId",type:{name:"String"}},storageContainerSasToken:{serializedName:"properties.storageContainerSasToken",type:{name:"String"}},failoverGroupId:{serializedName:"properties.failoverGroupId",readOnly:!0,type:{name:"String"}},recoverableDatabaseId:{serializedName:"properties.recoverableDatabaseId",type:{name:"String"}},longTermRetentionBackupResourceId:{serializedName:"properties.longTermRetentionBackupResourceId",type:{name:"String"}},autoCompleteRestore:{serializedName:"properties.autoCompleteRestore",type:{name:"Boolean"}},lastBackupName:{serializedName:"properties.lastBackupName",type:{name:"String"}}}}},YIe={type:{name:"Composite",className:"CompleteDatabaseRestoreDefinition",modelProperties:{lastBackupName:{serializedName:"lastBackupName",required:!0,type:{name:"String"}}}}},B7={type:{name:"Composite",className:"ManagedDatabaseSecurityAlertPolicyListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ManagedDatabaseSecurityAlertPolicy"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},G7={type:{name:"Composite",className:"SecurityEventCollection",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"SecurityEvent"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},tbt={type:{name:"Composite",className:"SecurityEventSqlInjectionAdditionalProperties",modelProperties:{threatId:{serializedName:"threatId",readOnly:!0,type:{name:"String"}},statement:{serializedName:"statement",readOnly:!0,type:{name:"String"}},statementHighlightOffset:{serializedName:"statementHighlightOffset",readOnly:!0,type:{name:"Number"}},statementHighlightLength:{serializedName:"statementHighlightLength",readOnly:!0,type:{name:"Number"}},errorCode:{serializedName:"errorCode",readOnly:!0,type:{name:"Number"}},errorSeverity:{serializedName:"errorSeverity",readOnly:!0,type:{name:"Number"}},errorMessage:{serializedName:"errorMessage",readOnly:!0,type:{name:"String"}}}}},sg={type:{name:"Composite",className:"SensitivityLabelListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"SensitivityLabel"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},XIe={type:{name:"Composite",className:"SensitivityLabelUpdateList",modelProperties:{operations:{serializedName:"operations",type:{name:"Sequence",element:{type:{name:"Composite",className:"SensitivityLabelUpdate"}}}}}}},JIe={type:{name:"Composite",className:"RecommendedSensitivityLabelUpdateList",modelProperties:{operations:{serializedName:"operations",type:{name:"Sequence",element:{type:{name:"Composite",className:"RecommendedSensitivityLabelUpdate"}}}}}}},$7={type:{name:"Composite",className:"ManagedTransparentDataEncryptionListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ManagedTransparentDataEncryption"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},V7={type:{name:"Composite",className:"ManagedInstanceAdministratorListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ManagedInstanceAdministrator"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},H7={type:{name:"Composite",className:"ManagedInstanceAzureADOnlyAuthListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ManagedInstanceAzureADOnlyAuthentication"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},W7={type:{name:"Composite",className:"ManagedInstanceEncryptionProtectorListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ManagedInstanceEncryptionProtector"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},K7={type:{name:"Composite",className:"ManagedInstanceKeyListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ManagedInstanceKey"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},Q7={type:{name:"Composite",className:"ManagedInstanceLongTermRetentionPolicyListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ManagedInstanceLongTermRetentionPolicy"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},Y7={type:{name:"Composite",className:"ManagedInstanceOperationListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ManagedInstanceOperation"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},rbt={type:{name:"Composite",className:"ManagedInstanceOperationParametersPair",modelProperties:{currentParameters:{serializedName:"currentParameters",type:{name:"Composite",className:"UpsertManagedServerOperationParameters"}},requestedParameters:{serializedName:"requestedParameters",type:{name:"Composite",className:"UpsertManagedServerOperationParameters"}}}}},nbt={type:{name:"Composite",className:"UpsertManagedServerOperationParameters",modelProperties:{family:{serializedName:"family",type:{name:"String"}},tier:{serializedName:"tier",type:{name:"String"}},vCores:{serializedName:"vCores",type:{name:"Number"}},storageSizeInGB:{serializedName:"storageSizeInGB",type:{name:"Number"}}}}},ibt={type:{name:"Composite",className:"ManagedInstanceOperationSteps",modelProperties:{totalSteps:{serializedName:"totalSteps",readOnly:!0,type:{name:"String"}},currentStep:{serializedName:"currentStep",readOnly:!0,type:{name:"Number"}},stepsList:{serializedName:"stepsList",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"UpsertManagedServerOperationStep"}}}}}}},sbt={type:{name:"Composite",className:"UpsertManagedServerOperationStep",modelProperties:{order:{serializedName:"order",type:{name:"Number"}},name:{serializedName:"name",type:{name:"String"}},status:{serializedName:"status",type:{name:"String"}}}}},obt={type:{name:"Composite",className:"ManagedInstancePrivateEndpointConnectionProperties",modelProperties:{privateEndpoint:{serializedName:"privateEndpoint",type:{name:"Composite",className:"ManagedInstancePrivateEndpointProperty"}},privateLinkServiceConnectionState:{serializedName:"privateLinkServiceConnectionState",type:{name:"Composite",className:"ManagedInstancePrivateLinkServiceConnectionStateProperty"}},provisioningState:{serializedName:"provisioningState",readOnly:!0,type:{name:"String"}}}}},abt={type:{name:"Composite",className:"ManagedInstancePrivateEndpointProperty",modelProperties:{id:{serializedName:"id",type:{name:"String"}}}}},cbt={type:{name:"Composite",className:"ManagedInstancePrivateLinkServiceConnectionStateProperty",modelProperties:{status:{serializedName:"status",required:!0,type:{name:"String"}},description:{serializedName:"description",required:!0,type:{name:"String"}},actionsRequired:{serializedName:"actionsRequired",readOnly:!0,type:{name:"String"}}}}},X7={type:{name:"Composite",className:"ManagedInstancePrivateEndpointConnectionListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ManagedInstancePrivateEndpointConnection"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},J7={type:{name:"Composite",className:"ManagedInstancePrivateLinkListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ManagedInstancePrivateLink"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},lbt={type:{name:"Composite",className:"ManagedInstancePrivateLinkProperties",modelProperties:{groupId:{serializedName:"groupId",readOnly:!0,type:{name:"String"}},requiredMembers:{serializedName:"requiredMembers",readOnly:!0,type:{name:"Sequence",element:{type:{name:"String"}}}}}}},Z7={type:{name:"Composite",className:"ManagedInstanceVulnerabilityAssessmentListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ManagedInstanceVulnerabilityAssessment"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},eZ={type:{name:"Composite",className:"ManagedServerSecurityAlertPolicyListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ManagedServerSecurityAlertPolicy"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},tZ={type:{name:"Composite",className:"OperationListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"Operation"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},ubt={type:{name:"Composite",className:"Operation",modelProperties:{name:{serializedName:"name",readOnly:!0,type:{name:"String"}},display:{serializedName:"display",type:{name:"Composite",className:"OperationDisplay"}},origin:{serializedName:"origin",readOnly:!0,type:{name:"String"}},properties:{serializedName:"properties",readOnly:!0,type:{name:"Dictionary",value:{type:{name:"Dictionary",value:{type:{name:"any"}}}}}}}}},dbt={type:{name:"Composite",className:"OperationDisplay",modelProperties:{provider:{serializedName:"provider",readOnly:!0,type:{name:"String"}},resource:{serializedName:"resource",readOnly:!0,type:{name:"String"}},operation:{serializedName:"operation",readOnly:!0,type:{name:"String"}},description:{serializedName:"description",readOnly:!0,type:{name:"String"}}}}},rZ={type:{name:"Composite",className:"OperationsHealthListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"OperationsHealth"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},pbt={type:{name:"Composite",className:"PrivateEndpointConnectionProperties",modelProperties:{privateEndpoint:{serializedName:"privateEndpoint",type:{name:"Composite",className:"PrivateEndpointProperty"}},privateLinkServiceConnectionState:{serializedName:"privateLinkServiceConnectionState",type:{name:"Composite",className:"PrivateLinkServiceConnectionStateProperty"}},provisioningState:{serializedName:"provisioningState",readOnly:!0,type:{name:"String"}}}}},mbt={type:{name:"Composite",className:"PrivateEndpointProperty",modelProperties:{id:{serializedName:"id",type:{name:"String"}}}}},hbt={type:{name:"Composite",className:"PrivateLinkServiceConnectionStateProperty",modelProperties:{status:{serializedName:"status",required:!0,type:{name:"String"}},description:{serializedName:"description",required:!0,type:{name:"String"}},actionsRequired:{serializedName:"actionsRequired",readOnly:!0,type:{name:"String"}}}}},nZ={type:{name:"Composite",className:"PrivateEndpointConnectionListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"PrivateEndpointConnection"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},iZ={type:{name:"Composite",className:"PrivateLinkResourceListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"PrivateLinkResource"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},fbt={type:{name:"Composite",className:"PrivateLinkResourceProperties",modelProperties:{groupId:{serializedName:"groupId",readOnly:!0,type:{name:"String"}},requiredMembers:{serializedName:"requiredMembers",readOnly:!0,type:{name:"Sequence",element:{type:{name:"String"}}}},requiredZoneNames:{serializedName:"requiredZoneNames",readOnly:!0,type:{name:"Sequence",element:{type:{name:"String"}}}}}}},sZ={type:{name:"Composite",className:"RecoverableManagedDatabaseListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"RecoverableManagedDatabase"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},oZ={type:{name:"Composite",className:"RestorePointListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"RestorePoint"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},ZIe={type:{name:"Composite",className:"CreateDatabaseRestorePointDefinition",modelProperties:{restorePointLabel:{serializedName:"restorePointLabel",required:!0,type:{name:"String"}}}}},gbt={type:{name:"Composite",className:"AutomaticTuningServerOptions",modelProperties:{desiredState:{serializedName:"desiredState",type:{name:"Enum",allowedValues:["Off","On","Default"]}},actualState:{serializedName:"actualState",readOnly:!0,type:{name:"Enum",allowedValues:["Off","On"]}},reasonCode:{serializedName:"reasonCode",readOnly:!0,type:{name:"Number"}},reasonDesc:{serializedName:"reasonDesc",readOnly:!0,type:{name:"Enum",allowedValues:["Default","Disabled","AutoConfigured"]}}}}},aZ={type:{name:"Composite",className:"AdministratorListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ServerAzureADAdministrator"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},cZ={type:{name:"Composite",className:"AzureADOnlyAuthListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ServerAzureADOnlyAuthentication"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},lZ={type:{name:"Composite",className:"ServerDevOpsAuditSettingsListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ServerDevOpsAuditingSettings"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},uZ={type:{name:"Composite",className:"ServerDnsAliasListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ServerDnsAlias"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},eRe={type:{name:"Composite",className:"ServerDnsAliasAcquisition",modelProperties:{oldServerDnsAliasId:{serializedName:"oldServerDnsAliasId",required:!0,type:{name:"String"}}}}},dZ={type:{name:"Composite",className:"ServerKeyListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ServerKey"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},pZ={type:{name:"Composite",className:"ServerOperationListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ServerOperation"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},mZ={type:{name:"Composite",className:"LogicalServerSecurityAlertPolicyListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ServerSecurityAlertPolicy"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},ybt={type:{name:"Composite",className:"ServerInfo",modelProperties:{serverId:{serializedName:"serverId",required:!0,type:{name:"String"}}}}},CN={type:{name:"Composite",className:"ServerTrustGroupListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ServerTrustGroup"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},hZ={type:{name:"Composite",className:"ServerVulnerabilityAssessmentListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ServerVulnerabilityAssessment"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},fZ={type:{name:"Composite",className:"SubscriptionUsageListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"SubscriptionUsage"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},gZ={type:{name:"Composite",className:"SyncAgentListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"SyncAgent"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},tRe={type:{name:"Composite",className:"SyncAgentKeyProperties",modelProperties:{syncAgentKey:{serializedName:"syncAgentKey",readOnly:!0,type:{name:"String"}}}}},yZ={type:{name:"Composite",className:"SyncAgentLinkedDatabaseListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"SyncAgentLinkedDatabase"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},vZ={type:{name:"Composite",className:"SyncDatabaseIdListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"SyncDatabaseIdProperties"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},vbt={type:{name:"Composite",className:"SyncDatabaseIdProperties",modelProperties:{id:{serializedName:"id",readOnly:!0,type:{name:"String"}}}}},PN={type:{name:"Composite",className:"SyncFullSchemaPropertiesListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"SyncFullSchemaProperties"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},bbt={type:{name:"Composite",className:"SyncFullSchemaProperties",modelProperties:{tables:{serializedName:"tables",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"SyncFullSchemaTable"}}}},lastUpdateTime:{serializedName:"lastUpdateTime",readOnly:!0,type:{name:"DateTime"}}}}},_bt={type:{name:"Composite",className:"SyncFullSchemaTable",modelProperties:{columns:{serializedName:"columns",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"SyncFullSchemaTableColumn"}}}},errorId:{serializedName:"errorId",readOnly:!0,type:{name:"String"}},hasError:{serializedName:"hasError",readOnly:!0,type:{name:"Boolean"}},name:{serializedName:"name",readOnly:!0,type:{name:"String"}},quotedName:{serializedName:"quotedName",readOnly:!0,type:{name:"String"}}}}},Sbt={type:{name:"Composite",className:"SyncFullSchemaTableColumn",modelProperties:{dataSize:{serializedName:"dataSize",readOnly:!0,type:{name:"String"}},dataType:{serializedName:"dataType",readOnly:!0,type:{name:"String"}},errorId:{serializedName:"errorId",readOnly:!0,type:{name:"String"}},hasError:{serializedName:"hasError",readOnly:!0,type:{name:"Boolean"}},isPrimaryKey:{serializedName:"isPrimaryKey",readOnly:!0,type:{name:"Boolean"}},name:{serializedName:"name",readOnly:!0,type:{name:"String"}},quotedName:{serializedName:"quotedName",readOnly:!0,type:{name:"String"}}}}},bZ={type:{name:"Composite",className:"SyncGroupLogListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"SyncGroupLogProperties"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},Cbt={type:{name:"Composite",className:"SyncGroupLogProperties",modelProperties:{timestamp:{serializedName:"timestamp",readOnly:!0,type:{name:"DateTime"}},type:{serializedName:"type",readOnly:!0,type:{name:"String"}},source:{serializedName:"source",readOnly:!0,type:{name:"String"}},details:{serializedName:"details",readOnly:!0,type:{name:"String"}},tracingId:{serializedName:"tracingId",readOnly:!0,type:{name:"Uuid"}},operationStatus:{serializedName:"operationStatus",readOnly:!0,type:{name:"String"}}}}},Pbt={type:{name:"Composite",className:"SyncGroupSchema",modelProperties:{tables:{serializedName:"tables",type:{name:"Sequence",element:{type:{name:"Composite",className:"SyncGroupSchemaTable"}}}},masterSyncMemberName:{serializedName:"masterSyncMemberName",type:{name:"String"}}}}},wbt={type:{name:"Composite",className:"SyncGroupSchemaTable",modelProperties:{columns:{serializedName:"columns",type:{name:"Sequence",element:{type:{name:"Composite",className:"SyncGroupSchemaTableColumn"}}}},quotedName:{serializedName:"quotedName",type:{name:"String"}}}}},Ebt={type:{name:"Composite",className:"SyncGroupSchemaTableColumn",modelProperties:{quotedName:{serializedName:"quotedName",type:{name:"String"}},dataSize:{serializedName:"dataSize",type:{name:"String"}},dataType:{serializedName:"dataType",type:{name:"String"}}}}},_Z={type:{name:"Composite",className:"SyncGroupListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"SyncGroup"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},SZ={type:{name:"Composite",className:"SyncMemberListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"SyncMember"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},CZ={type:{name:"Composite",className:"TimeZoneListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"TimeZone"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},wN={type:{name:"Composite",className:"VirtualClusterListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"VirtualCluster"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},rRe={type:{name:"Composite",className:"VirtualClusterUpdate",modelProperties:{tags:{serializedName:"tags",type:{name:"Dictionary",value:{type:{name:"String"}}}},subnetId:{serializedName:"properties.subnetId",readOnly:!0,type:{name:"String"}},family:{serializedName:"properties.family",type:{name:"String"}},childResources:{serializedName:"properties.childResources",readOnly:!0,type:{name:"Sequence",element:{type:{name:"String"}}}},maintenanceConfigurationId:{serializedName:"properties.maintenanceConfigurationId",type:{name:"String"}}}}},PZ={type:{name:"Composite",className:"VirtualNetworkRuleListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"VirtualNetworkRule"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},wZ={type:{name:"Composite",className:"WorkloadClassifierListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"WorkloadClassifier"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},EZ={type:{name:"Composite",className:"WorkloadGroupListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"WorkloadGroup"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},TZ={type:{name:"Composite",className:"LogicalDatabaseTransparentDataEncryptionListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"LogicalDatabaseTransparentDataEncryption"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},IZ={type:{name:"Composite",className:"BackupShortTermRetentionPolicyListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"BackupShortTermRetentionPolicy"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},RZ={type:{name:"Composite",className:"ImportExportExtensionsOperationListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ImportExportExtensionsOperationResult"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},xZ={type:{name:"Composite",className:"DatabaseOperationListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"DatabaseOperation"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},OZ={type:{name:"Composite",className:"DatabaseUsageListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"DatabaseUsage"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},AZ={type:{name:"Composite",className:"LedgerDigestUploadsListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"LedgerDigestUploads"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},NZ={type:{name:"Composite",className:"OutboundFirewallRuleListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"OutboundFirewallRule"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},EN={type:{name:"Composite",className:"ReplicationLinkListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ReplicationLink"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},TN={type:{name:"Composite",className:"ServerListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"Server"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},Tbt={type:{name:"Composite",className:"ResourceIdentity",modelProperties:{userAssignedIdentities:{serializedName:"userAssignedIdentities",type:{name:"Dictionary",value:{type:{name:"Composite",className:"UserIdentity"}}}},principalId:{serializedName:"principalId",readOnly:!0,type:{name:"Uuid"}},type:{serializedName:"type",type:{name:"String"}},tenantId:{serializedName:"tenantId",readOnly:!0,type:{name:"Uuid"}}}}},Ibt={type:{name:"Composite",className:"UserIdentity",modelProperties:{principalId:{serializedName:"principalId",readOnly:!0,type:{name:"Uuid"}},clientId:{serializedName:"clientId",readOnly:!0,type:{name:"Uuid"}}}}},Rbt={type:{name:"Composite",className:"ServerPrivateEndpointConnection",modelProperties:{id:{serializedName:"id",readOnly:!0,type:{name:"String"}},properties:{serializedName:"properties",type:{name:"Composite",className:"PrivateEndpointConnectionProperties"}}}}},xbt={type:{name:"Composite",className:"ServerExternalAdministrator",modelProperties:{administratorType:{serializedName:"administratorType",type:{name:"String"}},principalType:{serializedName:"principalType",type:{name:"String"}},login:{serializedName:"login",type:{name:"String"}},sid:{serializedName:"sid",type:{name:"Uuid"}},tenantId:{serializedName:"tenantId",type:{name:"Uuid"}},azureADOnlyAuthentication:{serializedName:"azureADOnlyAuthentication",type:{name:"Boolean"}}}}},nRe={type:{name:"Composite",className:"ServerUpdate",modelProperties:{identity:{serializedName:"identity",type:{name:"Composite",className:"ResourceIdentity"}},tags:{serializedName:"tags",type:{name:"Dictionary",value:{type:{name:"String"}}}},administratorLogin:{serializedName:"properties.administratorLogin",type:{name:"String"}},administratorLoginPassword:{serializedName:"properties.administratorLoginPassword",type:{name:"String"}},version:{serializedName:"properties.version",type:{name:"String"}},state:{serializedName:"properties.state",readOnly:!0,type:{name:"String"}},fullyQualifiedDomainName:{serializedName:"properties.fullyQualifiedDomainName",readOnly:!0,type:{name:"String"}},privateEndpointConnections:{serializedName:"properties.privateEndpointConnections",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ServerPrivateEndpointConnection"}}}},minimalTlsVersion:{serializedName:"properties.minimalTlsVersion",type:{name:"String"}},publicNetworkAccess:{serializedName:"properties.publicNetworkAccess",type:{name:"String"}},workspaceFeature:{serializedName:"properties.workspaceFeature",readOnly:!0,type:{name:"String"}},primaryUserAssignedIdentityId:{serializedName:"properties.primaryUserAssignedIdentityId",type:{name:"String"}},federatedClientId:{serializedName:"properties.federatedClientId",type:{name:"Uuid"}},keyId:{serializedName:"properties.keyId",type:{name:"String"}},administrators:{serializedName:"properties.administrators",type:{name:"Composite",className:"ServerExternalAdministrator"}},restrictOutboundNetworkAccess:{serializedName:"properties.restrictOutboundNetworkAccess",type:{name:"String"}}}}},iRe={type:{name:"Composite",className:"ImportNewDatabaseDefinition",modelProperties:{databaseName:{serializedName:"databaseName",type:{name:"String"}},edition:{serializedName:"edition",type:{name:"String"}},serviceObjectiveName:{serializedName:"serviceObjectiveName",type:{name:"String"}},maxSizeBytes:{serializedName:"maxSizeBytes",type:{name:"String"}},storageKeyType:{serializedName:"storageKeyType",required:!0,type:{name:"String"}},storageKey:{serializedName:"storageKey",required:!0,type:{name:"String"}},storageUri:{serializedName:"storageUri",required:!0,type:{name:"String"}},administratorLogin:{serializedName:"administratorLogin",required:!0,type:{name:"String"}},administratorLoginPassword:{serializedName:"administratorLoginPassword",required:!0,type:{name:"String"}},authenticationType:{serializedName:"authenticationType",type:{name:"String"}},networkIsolation:{serializedName:"networkIsolation",type:{name:"Composite",className:"NetworkIsolationSettings"}}}}},Obt={type:{name:"Composite",className:"NetworkIsolationSettings",modelProperties:{storageAccountResourceId:{serializedName:"storageAccountResourceId",type:{name:"String"}},sqlServerResourceId:{serializedName:"sqlServerResourceId",type:{name:"String"}}}}},Abt={type:{name:"Composite",className:"PrivateEndpointConnectionRequestStatus",modelProperties:{privateLinkServiceId:{serializedName:"privateLinkServiceId",readOnly:!0,type:{name:"String"}},privateEndpointConnectionName:{serializedName:"privateEndpointConnectionName",readOnly:!0,type:{name:"String"}},status:{serializedName:"status",readOnly:!0,type:{name:"String"}}}}},sRe={type:{name:"Composite",className:"CheckNameAvailabilityRequest",modelProperties:{name:{serializedName:"name",required:!0,type:{name:"String"}},type:{defaultValue:"Microsoft.Sql/servers",isConstant:!0,serializedName:"type",type:{name:"String"}}}}},oRe={type:{name:"Composite",className:"CheckNameAvailabilityResponse",modelProperties:{name:{serializedName:"name",readOnly:!0,type:{name:"String"}},available:{serializedName:"available",readOnly:!0,type:{name:"Boolean"}},reason:{serializedName:"reason",readOnly:!0,type:{name:"Enum",allowedValues:["Invalid","AlreadyExists"]}},message:{serializedName:"message",readOnly:!0,type:{name:"String"}}}}},DZ={type:{name:"Composite",className:"UsageListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"Usage"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},Nbt={type:{name:"Composite",className:"Usage",modelProperties:{id:{serializedName:"id",readOnly:!0,type:{name:"String"}},name:{serializedName:"name",type:{name:"Composite",className:"Name"}},type:{serializedName:"type",readOnly:!0,type:{name:"String"}},unit:{serializedName:"unit",readOnly:!0,type:{name:"String"}},currentValue:{serializedName:"currentValue",readOnly:!0,type:{name:"Number"}},limit:{serializedName:"limit",readOnly:!0,type:{name:"Number"}},requestedLimit:{serializedName:"requestedLimit",readOnly:!0,type:{name:"Number"}}}}},Dbt={type:{name:"Composite",className:"Name",modelProperties:{value:{serializedName:"value",type:{name:"String"}},localizedValue:{serializedName:"localizedValue",type:{name:"String"}}}}},kS={type:{name:"Composite",className:"DatabaseListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"Database"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},Mbt={type:{name:"Composite",className:"DatabaseIdentity",modelProperties:{type:{serializedName:"type",type:{name:"String"}},tenantId:{serializedName:"tenantId",readOnly:!0,type:{name:"Uuid"}},userAssignedIdentities:{serializedName:"userAssignedIdentities",type:{name:"Dictionary",value:{type:{name:"Composite",className:"DatabaseUserIdentity"}}}},delegatedResources:{serializedName:"delegatedResources",type:{name:"Dictionary",value:{type:{name:"Composite",className:"Delegation"}}}}}}},kbt={type:{name:"Composite",className:"DatabaseUserIdentity",modelProperties:{principalId:{serializedName:"principalId",readOnly:!0,type:{name:"Uuid"}},clientId:{serializedName:"clientId",readOnly:!0,type:{name:"Uuid"}}}}},Lbt={type:{name:"Composite",className:"Delegation",modelProperties:{resourceId:{serializedName:"resourceId",type:{name:"String"}},tenantId:{serializedName:"tenantId",readOnly:!0,type:{name:"Uuid"}}}}},aRe={type:{name:"Composite",className:"DatabaseUpdate",modelProperties:{sku:{serializedName:"sku",type:{name:"Composite",className:"Sku"}},identity:{serializedName:"identity",type:{name:"Composite",className:"DatabaseIdentity"}},tags:{serializedName:"tags",type:{name:"Dictionary",value:{type:{name:"String"}}}},createMode:{serializedName:"properties.createMode",type:{name:"String"}},collation:{serializedName:"properties.collation",type:{name:"String"}},maxSizeBytes:{serializedName:"properties.maxSizeBytes",type:{name:"Number"}},sampleName:{serializedName:"properties.sampleName",type:{name:"String"}},elasticPoolId:{serializedName:"properties.elasticPoolId",type:{name:"String"}},sourceDatabaseId:{serializedName:"properties.sourceDatabaseId",type:{name:"String"}},status:{serializedName:"properties.status",readOnly:!0,type:{name:"String"}},databaseId:{serializedName:"properties.databaseId",readOnly:!0,type:{name:"Uuid"}},creationDate:{serializedName:"properties.creationDate",readOnly:!0,type:{name:"DateTime"}},currentServiceObjectiveName:{serializedName:"properties.currentServiceObjectiveName",readOnly:!0,type:{name:"String"}},requestedServiceObjectiveName:{serializedName:"properties.requestedServiceObjectiveName",readOnly:!0,type:{name:"String"}},defaultSecondaryLocation:{serializedName:"properties.defaultSecondaryLocation",readOnly:!0,type:{name:"String"}},failoverGroupId:{serializedName:"properties.failoverGroupId",readOnly:!0,type:{name:"String"}},restorePointInTime:{serializedName:"properties.restorePointInTime",type:{name:"DateTime"}},sourceDatabaseDeletionDate:{serializedName:"properties.sourceDatabaseDeletionDate",type:{name:"DateTime"}},recoveryServicesRecoveryPointId:{serializedName:"properties.recoveryServicesRecoveryPointId",type:{name:"String"}},longTermRetentionBackupResourceId:{serializedName:"properties.longTermRetentionBackupResourceId",type:{name:"String"}},recoverableDatabaseId:{serializedName:"properties.recoverableDatabaseId",type:{name:"String"}},restorableDroppedDatabaseId:{serializedName:"properties.restorableDroppedDatabaseId",type:{name:"String"}},catalogCollation:{serializedName:"properties.catalogCollation",type:{name:"String"}},zoneRedundant:{serializedName:"properties.zoneRedundant",type:{name:"Boolean"}},licenseType:{serializedName:"properties.licenseType",type:{name:"String"}},maxLogSizeBytes:{serializedName:"properties.maxLogSizeBytes",readOnly:!0,type:{name:"Number"}},earliestRestoreDate:{serializedName:"properties.earliestRestoreDate",readOnly:!0,type:{name:"DateTime"}},readScale:{serializedName:"properties.readScale",type:{name:"String"}},highAvailabilityReplicaCount:{serializedName:"properties.highAvailabilityReplicaCount",type:{name:"Number"}},secondaryType:{serializedName:"properties.secondaryType",type:{name:"String"}},currentSku:{serializedName:"properties.currentSku",type:{name:"Composite",className:"Sku"}},autoPauseDelay:{serializedName:"properties.autoPauseDelay",type:{name:"Number"}},currentBackupStorageRedundancy:{serializedName:"properties.currentBackupStorageRedundancy",readOnly:!0,type:{name:"String"}},requestedBackupStorageRedundancy:{serializedName:"properties.requestedBackupStorageRedundancy",type:{name:"String"}},minCapacity:{serializedName:"properties.minCapacity",type:{name:"Number"}},pausedDate:{serializedName:"properties.pausedDate",readOnly:!0,type:{name:"DateTime"}},resumedDate:{serializedName:"properties.resumedDate",readOnly:!0,type:{name:"DateTime"}},maintenanceConfigurationId:{serializedName:"properties.maintenanceConfigurationId",type:{name:"String"}},isLedgerOn:{serializedName:"properties.isLedgerOn",type:{name:"Boolean"}},isInfraEncryptionEnabled:{serializedName:"properties.isInfraEncryptionEnabled",readOnly:!0,type:{name:"Boolean"}},federatedClientId:{serializedName:"properties.federatedClientId",type:{name:"Uuid"}},primaryDelegatedIdentityClientId:{serializedName:"properties.primaryDelegatedIdentityClientId",type:{name:"Uuid"}}}}},cRe={type:{name:"Composite",className:"ResourceMoveDefinition",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}}}}},lRe={type:{name:"Composite",className:"ImportExistingDatabaseDefinition",modelProperties:{storageKeyType:{serializedName:"storageKeyType",required:!0,type:{name:"String"}},storageKey:{serializedName:"storageKey",required:!0,type:{name:"String"}},storageUri:{serializedName:"storageUri",required:!0,type:{name:"String"}},administratorLogin:{serializedName:"administratorLogin",required:!0,type:{name:"String"}},administratorLoginPassword:{serializedName:"administratorLoginPassword",required:!0,type:{name:"String"}},authenticationType:{serializedName:"authenticationType",type:{name:"String"}},networkIsolation:{serializedName:"networkIsolation",type:{name:"Composite",className:"NetworkIsolationSettings"}}}}},uRe={type:{name:"Composite",className:"ExportDatabaseDefinition",modelProperties:{storageKeyType:{serializedName:"storageKeyType",required:!0,type:{name:"String"}},storageKey:{serializedName:"storageKey",required:!0,type:{name:"String"}},storageUri:{serializedName:"storageUri",required:!0,type:{name:"String"}},administratorLogin:{serializedName:"administratorLogin",required:!0,type:{name:"String"}},administratorLoginPassword:{serializedName:"administratorLoginPassword",required:!0,type:{name:"String"}},authenticationType:{serializedName:"authenticationType",type:{name:"String"}},networkIsolation:{serializedName:"networkIsolation",type:{name:"Composite",className:"NetworkIsolationSettings"}}}}},dRe={type:{name:"Composite",className:"CopyLongTermRetentionBackupParameters",modelProperties:{targetSubscriptionId:{serializedName:"properties.targetSubscriptionId",type:{name:"String"}},targetResourceGroup:{serializedName:"properties.targetResourceGroup",type:{name:"String"}},targetServerResourceId:{serializedName:"properties.targetServerResourceId",type:{name:"String"}},targetServerFullyQualifiedDomainName:{serializedName:"properties.targetServerFullyQualifiedDomainName",type:{name:"String"}},targetDatabaseName:{serializedName:"properties.targetDatabaseName",type:{name:"String"}},targetBackupStorageRedundancy:{serializedName:"properties.targetBackupStorageRedundancy",type:{name:"String"}}}}},pRe={type:{name:"Composite",className:"UpdateLongTermRetentionBackupParameters",modelProperties:{requestedBackupStorageRedundancy:{serializedName:"properties.requestedBackupStorageRedundancy",type:{name:"String"}}}}},Vu={type:{name:"Composite",className:"LongTermRetentionBackupListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"LongTermRetentionBackup"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},Hu={type:{name:"Composite",className:"ManagedInstanceLongTermRetentionBackupListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ManagedInstanceLongTermRetentionBackup"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},LS={type:{name:"Composite",className:"ManagedInstanceListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ManagedInstance"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},qbt={type:{name:"Composite",className:"ManagedInstancePecProperty",modelProperties:{id:{serializedName:"id",readOnly:!0,type:{name:"String"}},properties:{serializedName:"properties",type:{name:"Composite",className:"ManagedInstancePrivateEndpointConnectionProperties"}}}}},zbt={type:{name:"Composite",className:"ManagedInstanceExternalAdministrator",modelProperties:{administratorType:{serializedName:"administratorType",type:{name:"String"}},principalType:{serializedName:"principalType",type:{name:"String"}},login:{serializedName:"login",type:{name:"String"}},sid:{serializedName:"sid",type:{name:"Uuid"}},tenantId:{serializedName:"tenantId",type:{name:"Uuid"}},azureADOnlyAuthentication:{serializedName:"azureADOnlyAuthentication",type:{name:"Boolean"}}}}},Fbt={type:{name:"Composite",className:"ServicePrincipal",modelProperties:{principalId:{serializedName:"principalId",readOnly:!0,type:{name:"String"}},clientId:{serializedName:"clientId",readOnly:!0,type:{name:"String"}},tenantId:{serializedName:"tenantId",readOnly:!0,type:{name:"String"}},type:{serializedName:"type",type:{name:"String"}}}}},mRe={type:{name:"Composite",className:"ManagedInstanceUpdate",modelProperties:{sku:{serializedName:"sku",type:{name:"Composite",className:"Sku"}},identity:{serializedName:"identity",type:{name:"Composite",className:"ResourceIdentity"}},tags:{serializedName:"tags",type:{name:"Dictionary",value:{type:{name:"String"}}}},provisioningState:{serializedName:"properties.provisioningState",readOnly:!0,type:{name:"String"}},managedInstanceCreateMode:{serializedName:"properties.managedInstanceCreateMode",type:{name:"String"}},fullyQualifiedDomainName:{serializedName:"properties.fullyQualifiedDomainName",readOnly:!0,type:{name:"String"}},administratorLogin:{serializedName:"properties.administratorLogin",type:{name:"String"}},administratorLoginPassword:{serializedName:"properties.administratorLoginPassword",type:{name:"String"}},subnetId:{serializedName:"properties.subnetId",type:{name:"String"}},state:{serializedName:"properties.state",readOnly:!0,type:{name:"String"}},licenseType:{serializedName:"properties.licenseType",type:{name:"String"}},vCores:{serializedName:"properties.vCores",type:{name:"Number"}},storageSizeInGB:{serializedName:"properties.storageSizeInGB",type:{name:"Number"}},collation:{serializedName:"properties.collation",type:{name:"String"}},dnsZone:{serializedName:"properties.dnsZone",readOnly:!0,type:{name:"String"}},dnsZonePartner:{serializedName:"properties.dnsZonePartner",type:{name:"String"}},publicDataEndpointEnabled:{serializedName:"properties.publicDataEndpointEnabled",type:{name:"Boolean"}},sourceManagedInstanceId:{serializedName:"properties.sourceManagedInstanceId",type:{name:"String"}},restorePointInTime:{serializedName:"properties.restorePointInTime",type:{name:"DateTime"}},proxyOverride:{serializedName:"properties.proxyOverride",type:{name:"String"}},timezoneId:{serializedName:"properties.timezoneId",type:{name:"String"}},instancePoolId:{serializedName:"properties.instancePoolId",type:{name:"String"}},maintenanceConfigurationId:{serializedName:"properties.maintenanceConfigurationId",type:{name:"String"}},privateEndpointConnections:{serializedName:"properties.privateEndpointConnections",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ManagedInstancePecProperty"}}}},minimalTlsVersion:{serializedName:"properties.minimalTlsVersion",type:{name:"String"}},currentBackupStorageRedundancy:{serializedName:"properties.currentBackupStorageRedundancy",readOnly:!0,type:{name:"String"}},requestedBackupStorageRedundancy:{serializedName:"properties.requestedBackupStorageRedundancy",type:{name:"String"}},zoneRedundant:{serializedName:"properties.zoneRedundant",type:{name:"Boolean"}},primaryUserAssignedIdentityId:{serializedName:"properties.primaryUserAssignedIdentityId",type:{name:"String"}},keyId:{serializedName:"properties.keyId",type:{name:"String"}},administrators:{serializedName:"properties.administrators",type:{name:"Composite",className:"ManagedInstanceExternalAdministrator"}},servicePrincipal:{serializedName:"properties.servicePrincipal",type:{name:"Composite",className:"ServicePrincipal"}}}}},MZ={type:{name:"Composite",className:"TopQueriesListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"TopQueries"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},jbt={type:{name:"Composite",className:"TopQueries",modelProperties:{numberOfQueries:{serializedName:"numberOfQueries",readOnly:!0,type:{name:"Number"}},aggregationFunction:{serializedName:"aggregationFunction",readOnly:!0,type:{name:"String"}},observationMetric:{serializedName:"observationMetric",readOnly:!0,type:{name:"String"}},intervalType:{serializedName:"intervalType",readOnly:!0,type:{name:"String"}},startTime:{serializedName:"startTime",readOnly:!0,type:{name:"String"}},endTime:{serializedName:"endTime",readOnly:!0,type:{name:"String"}},queries:{serializedName:"queries",type:{name:"Sequence",element:{type:{name:"Composite",className:"QueryStatisticsProperties"}}}}}}},kZ={type:{name:"Composite",className:"RestorableDroppedDatabaseListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"RestorableDroppedDatabase"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},LZ={type:{name:"Composite",className:"RestorableDroppedManagedDatabaseListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"RestorableDroppedManagedDatabase"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},qZ={type:{name:"Composite",className:"ServerConnectionPolicyListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ServerConnectionPolicy"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},Ubt={type:{name:"Composite",className:"SloUsageMetric",modelProperties:{serviceLevelObjective:{serializedName:"serviceLevelObjective",readOnly:!0,type:{name:"String"}},serviceLevelObjectiveId:{serializedName:"serviceLevelObjectiveId",readOnly:!0,type:{name:"Uuid"}},inRangeTimeRatio:{serializedName:"inRangeTimeRatio",readOnly:!0,type:{name:"Number"}}}}},Bbt={type:{name:"Composite",className:"OperationImpact",modelProperties:{name:{serializedName:"name",readOnly:!0,type:{name:"String"}},unit:{serializedName:"unit",readOnly:!0,type:{name:"String"}},changeValueAbsolute:{serializedName:"changeValueAbsolute",readOnly:!0,type:{name:"Number"}},changeValueRelative:{serializedName:"changeValueRelative",readOnly:!0,type:{name:"Number"}}}}},Gbt={type:{name:"Composite",className:"SecurityEventsFilterParameters",modelProperties:{eventTime:{serializedName:"eventTime",type:{name:"DateTime"}},showServerRecords:{serializedName:"showServerRecords",type:{name:"Boolean"}}}}},Xt={type:{name:"Composite",className:"ProxyResource",modelProperties:Object.assign({},_7.type.modelProperties)}},Sh={type:{name:"Composite",className:"TrackedResource",modelProperties:Object.assign(Object.assign({},_7.type.modelProperties),{location:{serializedName:"location",required:!0,type:{name:"String"}},tags:{serializedName:"tags",type:{name:"Dictionary",value:{type:{name:"String"}}}}})}},hRe={type:{name:"Composite",className:"ProxyResourceWithWritableName",modelProperties:Object.assign({},$Ie.type.modelProperties)}},fRe={type:{name:"Composite",className:"RecoverableDatabase",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{edition:{serializedName:"properties.edition",readOnly:!0,type:{name:"String"}},serviceLevelObjective:{serializedName:"properties.serviceLevelObjective",readOnly:!0,type:{name:"String"}},elasticPoolName:{serializedName:"properties.elasticPoolName",readOnly:!0,type:{name:"String"}},lastAvailableBackupDate:{serializedName:"properties.lastAvailableBackupDate",readOnly:!0,type:{name:"DateTime"}}})}},EU={type:{name:"Composite",className:"DataMaskingPolicy",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{location:{serializedName:"location",readOnly:!0,type:{name:"String"}},kind:{serializedName:"kind",readOnly:!0,type:{name:"String"}},dataMaskingState:{serializedName:"properties.dataMaskingState",type:{name:"Enum",allowedValues:["Disabled","Enabled"]}},exemptPrincipals:{serializedName:"properties.exemptPrincipals",type:{name:"String"}},applicationPrincipals:{serializedName:"properties.applicationPrincipals",readOnly:!0,type:{name:"String"}},maskingLevel:{serializedName:"properties.maskingLevel",readOnly:!0,type:{name:"String"}}})}},wU={type:{name:"Composite",className:"DataMaskingRule",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{location:{serializedName:"location",readOnly:!0,type:{name:"String"}},kind:{serializedName:"kind",readOnly:!0,type:{name:"String"}},idPropertiesId:{serializedName:"properties.id",readOnly:!0,type:{name:"String"}},aliasName:{serializedName:"properties.aliasName",type:{name:"String"}},ruleState:{serializedName:"properties.ruleState",type:{name:"Enum",allowedValues:["Disabled","Enabled"]}},schemaName:{serializedName:"properties.schemaName",type:{name:"String"}},tableName:{serializedName:"properties.tableName",type:{name:"String"}},columnName:{serializedName:"properties.columnName",type:{name:"String"}},maskingFunction:{serializedName:"properties.maskingFunction",type:{name:"Enum",allowedValues:["Default","CCN","Email","Number","SSN","Text"]}},numberFrom:{serializedName:"properties.numberFrom",type:{name:"String"}},numberTo:{serializedName:"properties.numberTo",type:{name:"String"}},prefixSize:{serializedName:"properties.prefixSize",type:{name:"String"}},suffixSize:{serializedName:"properties.suffixSize",type:{name:"String"}},replacementString:{serializedName:"properties.replacementString",type:{name:"String"}}})}},eN={type:{name:"Composite",className:"GeoBackupPolicy",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{kind:{serializedName:"kind",readOnly:!0,type:{name:"String"}},location:{serializedName:"location",readOnly:!0,type:{name:"String"}},state:{serializedName:"properties.state",required:!0,type:{name:"Enum",allowedValues:["Disabled","Enabled"]}},storageType:{serializedName:"properties.storageType",readOnly:!0,type:{name:"String"}}})}},uS={type:{name:"Composite",className:"ServerCommunicationLink",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{location:{serializedName:"location",readOnly:!0,type:{name:"String"}},kind:{serializedName:"kind",readOnly:!0,type:{name:"String"}},state:{serializedName:"properties.state",readOnly:!0,type:{name:"String"}},partnerServer:{serializedName:"properties.partnerServer",type:{name:"String"}}})}},gRe={type:{name:"Composite",className:"ServiceObjective",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{serviceObjectiveName:{serializedName:"properties.serviceObjectiveName",readOnly:!0,type:{name:"String"}},isDefault:{serializedName:"properties.isDefault",readOnly:!0,type:{name:"Boolean"}},isSystem:{serializedName:"properties.isSystem",readOnly:!0,type:{name:"Boolean"}},description:{serializedName:"properties.description",readOnly:!0,type:{name:"String"}},enabled:{serializedName:"properties.enabled",readOnly:!0,type:{name:"Boolean"}}})}},$bt={type:{name:"Composite",className:"ElasticPoolActivity",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{location:{serializedName:"location",type:{name:"String"}},endTime:{serializedName:"properties.endTime",readOnly:!0,type:{name:"DateTime"}},errorCode:{serializedName:"properties.errorCode",readOnly:!0,type:{name:"Number"}},errorMessage:{serializedName:"properties.errorMessage",readOnly:!0,type:{name:"String"}},errorSeverity:{serializedName:"properties.errorSeverity",readOnly:!0,type:{name:"Number"}},operation:{serializedName:"properties.operation",readOnly:!0,type:{name:"String"}},operationId:{serializedName:"properties.operationId",readOnly:!0,type:{name:"Uuid"}},percentComplete:{serializedName:"properties.percentComplete",readOnly:!0,type:{name:"Number"}},requestedDatabaseDtuMax:{serializedName:"properties.requestedDatabaseDtuMax",readOnly:!0,type:{name:"Number"}},requestedDatabaseDtuMin:{serializedName:"properties.requestedDatabaseDtuMin",readOnly:!0,type:{name:"Number"}},requestedDtu:{serializedName:"properties.requestedDtu",readOnly:!0,type:{name:"Number"}},requestedElasticPoolName:{serializedName:"properties.requestedElasticPoolName",readOnly:!0,type:{name:"String"}},requestedStorageLimitInGB:{serializedName:"properties.requestedStorageLimitInGB",readOnly:!0,type:{name:"Number"}},elasticPoolName:{serializedName:"properties.elasticPoolName",readOnly:!0,type:{name:"String"}},serverName:{serializedName:"properties.serverName",readOnly:!0,type:{name:"String"}},startTime:{serializedName:"properties.startTime",readOnly:!0,type:{name:"DateTime"}},state:{serializedName:"properties.state",readOnly:!0,type:{name:"String"}},requestedStorageLimitInMB:{serializedName:"properties.requestedStorageLimitInMB",readOnly:!0,type:{name:"Number"}},requestedDatabaseDtuGuarantee:{serializedName:"properties.requestedDatabaseDtuGuarantee",readOnly:!0,type:{name:"Number"}},requestedDatabaseDtuCap:{serializedName:"properties.requestedDatabaseDtuCap",readOnly:!0,type:{name:"Number"}},requestedDtuGuarantee:{serializedName:"properties.requestedDtuGuarantee",readOnly:!0,type:{name:"Number"}}})}},Vbt={type:{name:"Composite",className:"ElasticPoolDatabaseActivity",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{location:{serializedName:"location",type:{name:"String"}},databaseName:{serializedName:"properties.databaseName",readOnly:!0,type:{name:"String"}},endTime:{serializedName:"properties.endTime",readOnly:!0,type:{name:"DateTime"}},errorCode:{serializedName:"properties.errorCode",readOnly:!0,type:{name:"Number"}},errorMessage:{serializedName:"properties.errorMessage",readOnly:!0,type:{name:"String"}},errorSeverity:{serializedName:"properties.errorSeverity",readOnly:!0,type:{name:"Number"}},operation:{serializedName:"properties.operation",readOnly:!0,type:{name:"String"}},operationId:{serializedName:"properties.operationId",readOnly:!0,type:{name:"Uuid"}},percentComplete:{serializedName:"properties.percentComplete",readOnly:!0,type:{name:"Number"}},requestedElasticPoolName:{serializedName:"properties.requestedElasticPoolName",readOnly:!0,type:{name:"String"}},currentElasticPoolName:{serializedName:"properties.currentElasticPoolName",readOnly:!0,type:{name:"String"}},currentServiceObjective:{serializedName:"properties.currentServiceObjective",readOnly:!0,type:{name:"String"}},requestedServiceObjective:{serializedName:"properties.requestedServiceObjective",readOnly:!0,type:{name:"String"}},serverName:{serializedName:"properties.serverName",readOnly:!0,type:{name:"String"}},startTime:{serializedName:"properties.startTime",readOnly:!0,type:{name:"DateTime"}},state:{serializedName:"properties.state",readOnly:!0,type:{name:"String"}}})}},tN={type:{name:"Composite",className:"ExtendedDatabaseBlobAuditingPolicy",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{predicateExpression:{serializedName:"properties.predicateExpression",type:{name:"String"}},retentionDays:{serializedName:"properties.retentionDays",type:{name:"Number"}},auditActionsAndGroups:{serializedName:"properties.auditActionsAndGroups",type:{name:"Sequence",element:{type:{name:"String"}}}},isStorageSecondaryKeyInUse:{serializedName:"properties.isStorageSecondaryKeyInUse",type:{name:"Boolean"}},isAzureMonitorTargetEnabled:{serializedName:"properties.isAzureMonitorTargetEnabled",type:{name:"Boolean"}},queueDelayMs:{serializedName:"properties.queueDelayMs",type:{name:"Number"}},state:{serializedName:"properties.state",type:{name:"Enum",allowedValues:["Enabled","Disabled"]}},storageEndpoint:{serializedName:"properties.storageEndpoint",type:{name:"String"}},storageAccountAccessKey:{serializedName:"properties.storageAccountAccessKey",type:{name:"String"}},storageAccountSubscriptionId:{serializedName:"properties.storageAccountSubscriptionId",type:{name:"Uuid"}}})}},dS={type:{name:"Composite",className:"ExtendedServerBlobAuditingPolicy",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{isDevopsAuditEnabled:{serializedName:"properties.isDevopsAuditEnabled",type:{name:"Boolean"}},predicateExpression:{serializedName:"properties.predicateExpression",type:{name:"String"}},retentionDays:{serializedName:"properties.retentionDays",type:{name:"Number"}},auditActionsAndGroups:{serializedName:"properties.auditActionsAndGroups",type:{name:"Sequence",element:{type:{name:"String"}}}},isStorageSecondaryKeyInUse:{serializedName:"properties.isStorageSecondaryKeyInUse",type:{name:"Boolean"}},isAzureMonitorTargetEnabled:{serializedName:"properties.isAzureMonitorTargetEnabled",type:{name:"Boolean"}},queueDelayMs:{serializedName:"properties.queueDelayMs",type:{name:"Number"}},state:{serializedName:"properties.state",type:{name:"Enum",allowedValues:["Enabled","Disabled"]}},storageEndpoint:{serializedName:"properties.storageEndpoint",type:{name:"String"}},storageAccountAccessKey:{serializedName:"properties.storageAccountAccessKey",type:{name:"String"}},storageAccountSubscriptionId:{serializedName:"properties.storageAccountSubscriptionId",type:{name:"Uuid"}}})}},pS={type:{name:"Composite",className:"ServerBlobAuditingPolicy",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{isDevopsAuditEnabled:{serializedName:"properties.isDevopsAuditEnabled",type:{name:"Boolean"}},retentionDays:{serializedName:"properties.retentionDays",type:{name:"Number"}},auditActionsAndGroups:{serializedName:"properties.auditActionsAndGroups",type:{name:"Sequence",element:{type:{name:"String"}}}},isStorageSecondaryKeyInUse:{serializedName:"properties.isStorageSecondaryKeyInUse",type:{name:"Boolean"}},isAzureMonitorTargetEnabled:{serializedName:"properties.isAzureMonitorTargetEnabled",type:{name:"Boolean"}},queueDelayMs:{serializedName:"properties.queueDelayMs",type:{name:"Number"}},state:{serializedName:"properties.state",type:{name:"Enum",allowedValues:["Enabled","Disabled"]}},storageEndpoint:{serializedName:"properties.storageEndpoint",type:{name:"String"}},storageAccountAccessKey:{serializedName:"properties.storageAccountAccessKey",type:{name:"String"}},storageAccountSubscriptionId:{serializedName:"properties.storageAccountSubscriptionId",type:{name:"Uuid"}}})}},rN={type:{name:"Composite",className:"DatabaseBlobAuditingPolicy",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{kind:{serializedName:"kind",readOnly:!0,type:{name:"String"}},retentionDays:{serializedName:"properties.retentionDays",type:{name:"Number"}},auditActionsAndGroups:{serializedName:"properties.auditActionsAndGroups",type:{name:"Sequence",element:{type:{name:"String"}}}},isStorageSecondaryKeyInUse:{serializedName:"properties.isStorageSecondaryKeyInUse",type:{name:"Boolean"}},isAzureMonitorTargetEnabled:{serializedName:"properties.isAzureMonitorTargetEnabled",type:{name:"Boolean"}},queueDelayMs:{serializedName:"properties.queueDelayMs",type:{name:"Number"}},state:{serializedName:"properties.state",type:{name:"Enum",allowedValues:["Enabled","Disabled"]}},storageEndpoint:{serializedName:"properties.storageEndpoint",type:{name:"String"}},storageAccountAccessKey:{serializedName:"properties.storageAccountAccessKey",type:{name:"String"}},storageAccountSubscriptionId:{serializedName:"properties.storageAccountSubscriptionId",type:{name:"Uuid"}}})}},TU={type:{name:"Composite",className:"RecommendedAction",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{kind:{serializedName:"kind",readOnly:!0,type:{name:"String"}},location:{serializedName:"location",readOnly:!0,type:{name:"String"}},recommendationReason:{serializedName:"properties.recommendationReason",readOnly:!0,type:{name:"String"}},validSince:{serializedName:"properties.validSince",readOnly:!0,type:{name:"DateTime"}},lastRefresh:{serializedName:"properties.lastRefresh",readOnly:!0,type:{name:"DateTime"}},state:{serializedName:"properties.state",type:{name:"Composite",className:"RecommendedActionStateInfo"}},isExecutableAction:{serializedName:"properties.isExecutableAction",readOnly:!0,type:{name:"Boolean"}},isRevertableAction:{serializedName:"properties.isRevertableAction",readOnly:!0,type:{name:"Boolean"}},isArchivedAction:{serializedName:"properties.isArchivedAction",readOnly:!0,type:{name:"Boolean"}},executeActionStartTime:{serializedName:"properties.executeActionStartTime",readOnly:!0,type:{name:"DateTime"}},executeActionDuration:{serializedName:"properties.executeActionDuration",readOnly:!0,type:{name:"String"}},revertActionStartTime:{serializedName:"properties.revertActionStartTime",readOnly:!0,type:{name:"DateTime"}},revertActionDuration:{serializedName:"properties.revertActionDuration",readOnly:!0,type:{name:"String"}},executeActionInitiatedBy:{serializedName:"properties.executeActionInitiatedBy",readOnly:!0,type:{name:"Enum",allowedValues:["User","System"]}},executeActionInitiatedTime:{serializedName:"properties.executeActionInitiatedTime",readOnly:!0,type:{name:"DateTime"}},revertActionInitiatedBy:{serializedName:"properties.revertActionInitiatedBy",readOnly:!0,type:{name:"Enum",allowedValues:["User","System"]}},revertActionInitiatedTime:{serializedName:"properties.revertActionInitiatedTime",readOnly:!0,type:{name:"DateTime"}},score:{serializedName:"properties.score",readOnly:!0,type:{name:"Number"}},implementationDetails:{serializedName:"properties.implementationDetails",type:{name:"Composite",className:"RecommendedActionImplementationInfo"}},errorDetails:{serializedName:"properties.errorDetails",type:{name:"Composite",className:"RecommendedActionErrorInfo"}},estimatedImpact:{serializedName:"properties.estimatedImpact",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"RecommendedActionImpactRecord"}}}},observedImpact:{serializedName:"properties.observedImpact",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"RecommendedActionImpactRecord"}}}},timeSeries:{serializedName:"properties.timeSeries",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"RecommendedActionMetricInfo"}}}},linkedObjects:{serializedName:"properties.linkedObjects",readOnly:!0,type:{name:"Sequence",element:{type:{name:"String"}}}},details:{serializedName:"properties.details",readOnly:!0,type:{name:"Dictionary",value:{type:{name:"Dictionary",value:{type:{name:"any"}}}}}}})}},IE={type:{name:"Composite",className:"Advisor",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{kind:{serializedName:"kind",readOnly:!0,type:{name:"String"}},location:{serializedName:"location",readOnly:!0,type:{name:"String"}},advisorStatus:{serializedName:"properties.advisorStatus",readOnly:!0,type:{name:"Enum",allowedValues:["GA","PublicPreview","LimitedPublicPreview","PrivatePreview"]}},autoExecuteStatus:{serializedName:"properties.autoExecuteStatus",type:{name:"Enum",allowedValues:["Enabled","Disabled","Default"]}},autoExecuteStatusInheritedFrom:{serializedName:"properties.autoExecuteStatusInheritedFrom",readOnly:!0,type:{name:"Enum",allowedValues:["Default","Subscription","Server","ElasticPool","Database"]}},recommendationsStatus:{serializedName:"properties.recommendationsStatus",readOnly:!0,type:{name:"String"}},lastChecked:{serializedName:"properties.lastChecked",readOnly:!0,type:{name:"DateTime"}},recommendedActions:{serializedName:"properties.recommendedActions",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"RecommendedAction"}}}}})}},IU={type:{name:"Composite",className:"DatabaseAutomaticTuning",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{desiredState:{serializedName:"properties.desiredState",type:{name:"Enum",allowedValues:["Inherit","Custom","Auto","Unspecified"]}},actualState:{serializedName:"properties.actualState",readOnly:!0,type:{name:"Enum",allowedValues:["Inherit","Custom","Auto","Unspecified"]}},options:{serializedName:"properties.options",type:{name:"Dictionary",value:{type:{name:"Composite",className:"AutomaticTuningOptions"}}}}})}},zZ={type:{name:"Composite",className:"DatabaseColumn",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{columnType:{serializedName:"properties.columnType",type:{name:"String"}},temporalType:{serializedName:"properties.temporalType",type:{name:"String"}},memoryOptimized:{serializedName:"properties.memoryOptimized",type:{name:"Boolean"}},isComputed:{serializedName:"properties.isComputed",type:{name:"Boolean"}}})}},FZ={type:{name:"Composite",className:"DatabaseSchema",modelProperties:Object.assign({},Xt.type.modelProperties)}},nN={type:{name:"Composite",className:"DatabaseSecurityAlertPolicy",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{systemData:{serializedName:"systemData",type:{name:"Composite",className:"SystemData"}},state:{serializedName:"properties.state",type:{name:"Enum",allowedValues:["Enabled","Disabled"]}},disabledAlerts:{serializedName:"properties.disabledAlerts",type:{name:"Sequence",element:{type:{name:"String"}}}},emailAddresses:{serializedName:"properties.emailAddresses",type:{name:"Sequence",element:{type:{name:"String"}}}},emailAccountAdmins:{serializedName:"properties.emailAccountAdmins",type:{name:"Boolean"}},storageEndpoint:{serializedName:"properties.storageEndpoint",type:{name:"String"}},storageAccountAccessKey:{serializedName:"properties.storageAccountAccessKey",type:{name:"String"}},retentionDays:{serializedName:"properties.retentionDays",type:{name:"Number"}},creationTime:{serializedName:"properties.creationTime",readOnly:!0,type:{name:"DateTime"}}})}},jZ={type:{name:"Composite",className:"DatabaseTable",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{temporalType:{serializedName:"properties.temporalType",type:{name:"String"}},memoryOptimized:{serializedName:"properties.memoryOptimized",type:{name:"Boolean"}}})}},RE={type:{name:"Composite",className:"DatabaseVulnerabilityAssessmentRuleBaseline",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{baselineResults:{serializedName:"properties.baselineResults",type:{name:"Sequence",element:{type:{name:"Composite",className:"DatabaseVulnerabilityAssessmentRuleBaselineItem"}}}}})}},mv={type:{name:"Composite",className:"DatabaseVulnerabilityAssessment",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{storageContainerPath:{serializedName:"properties.storageContainerPath",type:{name:"String"}},storageContainerSasKey:{serializedName:"properties.storageContainerSasKey",type:{name:"String"}},storageAccountAccessKey:{serializedName:"properties.storageAccountAccessKey",type:{name:"String"}},recurringScans:{serializedName:"properties.recurringScans",type:{name:"Composite",className:"VulnerabilityAssessmentRecurringScansProperties"}}})}},UZ={type:{name:"Composite",className:"VulnerabilityAssessmentScanRecord",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{scanId:{serializedName:"properties.scanId",readOnly:!0,type:{name:"String"}},triggerType:{serializedName:"properties.triggerType",readOnly:!0,type:{name:"String"}},state:{serializedName:"properties.state",readOnly:!0,type:{name:"String"}},startTime:{serializedName:"properties.startTime",readOnly:!0,type:{name:"DateTime"}},endTime:{serializedName:"properties.endTime",readOnly:!0,type:{name:"DateTime"}},errors:{serializedName:"properties.errors",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"VulnerabilityAssessmentScanError"}}}},storageContainerPath:{serializedName:"properties.storageContainerPath",readOnly:!0,type:{name:"String"}},numberOfFailedSecurityChecks:{serializedName:"properties.numberOfFailedSecurityChecks",readOnly:!0,type:{name:"Number"}}})}},iN={type:{name:"Composite",className:"DatabaseVulnerabilityAssessmentScansExport",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{exportedReportLocation:{serializedName:"properties.exportedReportLocation",readOnly:!0,type:{name:"String"}}})}},yRe={type:{name:"Composite",className:"DataWarehouseUserActivities",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{activeQueriesCount:{serializedName:"properties.activeQueriesCount",readOnly:!0,type:{name:"Number"}}})}},CE={type:{name:"Composite",className:"DeletedServer",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{version:{serializedName:"properties.version",readOnly:!0,type:{name:"String"}},deletionTime:{serializedName:"properties.deletionTime",readOnly:!0,type:{name:"DateTime"}},originalId:{serializedName:"properties.originalId",readOnly:!0,type:{name:"String"}},fullyQualifiedDomainName:{serializedName:"properties.fullyQualifiedDomainName",readOnly:!0,type:{name:"String"}}})}},Hbt={type:{name:"Composite",className:"ElasticPoolOperation",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{elasticPoolName:{serializedName:"properties.elasticPoolName",readOnly:!0,type:{name:"String"}},operation:{serializedName:"properties.operation",readOnly:!0,type:{name:"String"}},operationFriendlyName:{serializedName:"properties.operationFriendlyName",readOnly:!0,type:{name:"String"}},percentComplete:{serializedName:"properties.percentComplete",readOnly:!0,type:{name:"Number"}},serverName:{serializedName:"properties.serverName",readOnly:!0,type:{name:"String"}},startTime:{serializedName:"properties.startTime",readOnly:!0,type:{name:"DateTime"}},state:{serializedName:"properties.state",readOnly:!0,type:{name:"String"}},errorCode:{serializedName:"properties.errorCode",readOnly:!0,type:{name:"Number"}},errorDescription:{serializedName:"properties.errorDescription",readOnly:!0,type:{name:"String"}},errorSeverity:{serializedName:"properties.errorSeverity",readOnly:!0,type:{name:"Number"}},isUserError:{serializedName:"properties.isUserError",readOnly:!0,type:{name:"Boolean"}},estimatedCompletionTime:{serializedName:"properties.estimatedCompletionTime",readOnly:!0,type:{name:"DateTime"}},description:{serializedName:"properties.description",readOnly:!0,type:{name:"String"}},isCancellable:{serializedName:"properties.isCancellable",readOnly:!0,type:{name:"Boolean"}}})}},mS={type:{name:"Composite",className:"EncryptionProtector",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{kind:{serializedName:"kind",readOnly:!0,type:{name:"String"}},location:{serializedName:"location",readOnly:!0,type:{name:"String"}},subregion:{serializedName:"properties.subregion",readOnly:!0,type:{name:"String"}},serverKeyName:{serializedName:"properties.serverKeyName",type:{name:"String"}},serverKeyType:{serializedName:"properties.serverKeyType",type:{name:"String"}},uri:{serializedName:"properties.uri",readOnly:!0,type:{name:"String"}},thumbprint:{serializedName:"properties.thumbprint",readOnly:!0,type:{name:"String"}},autoRotationEnabled:{serializedName:"properties.autoRotationEnabled",type:{name:"Boolean"}}})}},Ta={type:{name:"Composite",className:"FailoverGroup",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{location:{serializedName:"location",readOnly:!0,type:{name:"String"}},tags:{serializedName:"tags",type:{name:"Dictionary",value:{type:{name:"String"}}}},readWriteEndpoint:{serializedName:"properties.readWriteEndpoint",type:{name:"Composite",className:"FailoverGroupReadWriteEndpoint"}},readOnlyEndpoint:{serializedName:"properties.readOnlyEndpoint",type:{name:"Composite",className:"FailoverGroupReadOnlyEndpoint"}},replicationRole:{serializedName:"properties.replicationRole",readOnly:!0,type:{name:"String"}},replicationState:{serializedName:"properties.replicationState",readOnly:!0,type:{name:"String"}},partnerServers:{serializedName:"properties.partnerServers",type:{name:"Sequence",element:{type:{name:"Composite",className:"PartnerInfo"}}}},databases:{serializedName:"properties.databases",type:{name:"Sequence",element:{type:{name:"String"}}}}})}},Ol={type:{name:"Composite",className:"InstanceFailoverGroup",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{readWriteEndpoint:{serializedName:"properties.readWriteEndpoint",type:{name:"Composite",className:"InstanceFailoverGroupReadWriteEndpoint"}},readOnlyEndpoint:{serializedName:"properties.readOnlyEndpoint",type:{name:"Composite",className:"InstanceFailoverGroupReadOnlyEndpoint"}},replicationRole:{serializedName:"properties.replicationRole",readOnly:!0,type:{name:"String"}},replicationState:{serializedName:"properties.replicationState",readOnly:!0,type:{name:"String"}},partnerRegions:{serializedName:"properties.partnerRegions",type:{name:"Sequence",element:{type:{name:"Composite",className:"PartnerRegionInfo"}}}},managedInstancePairs:{serializedName:"properties.managedInstancePairs",type:{name:"Sequence",element:{type:{name:"Composite",className:"ManagedInstancePairInfo"}}}}})}},sN={type:{name:"Composite",className:"JobCredential",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{username:{serializedName:"properties.username",type:{name:"String"}},password:{serializedName:"properties.password",type:{name:"String"}}})}},Hd={type:{name:"Composite",className:"JobExecution",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{jobVersion:{serializedName:"properties.jobVersion",readOnly:!0,type:{name:"Number"}},stepName:{serializedName:"properties.stepName",readOnly:!0,type:{name:"String"}},stepId:{serializedName:"properties.stepId",readOnly:!0,type:{name:"Number"}},jobExecutionId:{serializedName:"properties.jobExecutionId",readOnly:!0,type:{name:"Uuid"}},lifecycle:{serializedName:"properties.lifecycle",readOnly:!0,type:{name:"String"}},provisioningState:{serializedName:"properties.provisioningState",readOnly:!0,type:{name:"String"}},createTime:{serializedName:"properties.createTime",readOnly:!0,type:{name:"DateTime"}},startTime:{serializedName:"properties.startTime",readOnly:!0,type:{name:"DateTime"}},endTime:{serializedName:"properties.endTime",readOnly:!0,type:{name:"DateTime"}},currentAttempts:{serializedName:"properties.currentAttempts",type:{name:"Number"}},currentAttemptStartTime:{serializedName:"properties.currentAttemptStartTime",readOnly:!0,type:{name:"DateTime"}},lastMessage:{serializedName:"properties.lastMessage",readOnly:!0,type:{name:"String"}},target:{serializedName:"properties.target",type:{name:"Composite",className:"JobExecutionTarget"}}})}},oN={type:{name:"Composite",className:"Job",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{description:{defaultValue:"",serializedName:"properties.description",type:{name:"String"}},version:{serializedName:"properties.version",readOnly:!0,type:{name:"Number"}},schedule:{serializedName:"properties.schedule",type:{name:"Composite",className:"JobSchedule"}}})}},EE={type:{name:"Composite",className:"JobStep",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{stepId:{serializedName:"properties.stepId",type:{name:"Number"}},targetGroup:{serializedName:"properties.targetGroup",type:{name:"String"}},credential:{serializedName:"properties.credential",type:{name:"String"}},action:{serializedName:"properties.action",type:{name:"Composite",className:"JobStepAction"}},output:{serializedName:"properties.output",type:{name:"Composite",className:"JobStepOutput"}},executionOptions:{serializedName:"properties.executionOptions",type:{name:"Composite",className:"JobStepExecutionOptions"}}})}},aN={type:{name:"Composite",className:"JobTargetGroup",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{members:{serializedName:"properties.members",type:{name:"Sequence",element:{type:{name:"Composite",className:"JobTarget"}}}}})}},vRe={type:{name:"Composite",className:"JobVersion",modelProperties:Object.assign({},Xt.type.modelProperties)}},hS={type:{name:"Composite",className:"LongTermRetentionPolicy",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{weeklyRetention:{serializedName:"properties.weeklyRetention",type:{name:"String"}},monthlyRetention:{serializedName:"properties.monthlyRetention",type:{name:"String"}},yearlyRetention:{serializedName:"properties.yearlyRetention",type:{name:"String"}},weekOfYear:{serializedName:"properties.weekOfYear",type:{name:"Number"}}})}},bRe={type:{name:"Composite",className:"MaintenanceWindowOptions",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{isEnabled:{serializedName:"properties.isEnabled",type:{name:"Boolean"}},maintenanceWindowCycles:{serializedName:"properties.maintenanceWindowCycles",type:{name:"Sequence",element:{type:{name:"Composite",className:"MaintenanceWindowTimeRange"}}}},minDurationInMinutes:{serializedName:"properties.minDurationInMinutes",type:{name:"Number"}},defaultDurationInMinutes:{serializedName:"properties.defaultDurationInMinutes",type:{name:"Number"}},minCycles:{serializedName:"properties.minCycles",type:{name:"Number"}},timeGranularityInMinutes:{serializedName:"properties.timeGranularityInMinutes",type:{name:"Number"}},allowMultipleMaintenanceWindowsPerCycle:{serializedName:"properties.allowMultipleMaintenanceWindowsPerCycle",type:{name:"Boolean"}}})}},BZ={type:{name:"Composite",className:"MaintenanceWindows",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{timeRanges:{serializedName:"properties.timeRanges",type:{name:"Sequence",element:{type:{name:"Composite",className:"MaintenanceWindowTimeRange"}}}}})}},pa={type:{name:"Composite",className:"ManagedBackupShortTermRetentionPolicy",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{retentionDays:{serializedName:"properties.retentionDays",type:{name:"Number"}}})}},_Re={type:{name:"Composite",className:"ManagedInstanceQuery",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{queryText:{serializedName:"properties.queryText",type:{name:"String"}}})}},Wbt={type:{name:"Composite",className:"QueryStatistics",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{databaseName:{serializedName:"properties.databaseName",readOnly:!0,type:{name:"String"}},queryId:{serializedName:"properties.queryId",readOnly:!0,type:{name:"String"}},startTime:{serializedName:"properties.startTime",readOnly:!0,type:{name:"String"}},endTime:{serializedName:"properties.endTime",readOnly:!0,type:{name:"String"}},intervals:{serializedName:"properties.intervals",type:{name:"Sequence",element:{type:{name:"Composite",className:"QueryMetricInterval"}}}}})}},SRe={type:{name:"Composite",className:"ManagedDatabaseRestoreDetailsResult",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{status:{serializedName:"properties.status",readOnly:!0,type:{name:"String"}},currentRestoringFileName:{serializedName:"properties.currentRestoringFileName",readOnly:!0,type:{name:"String"}},lastRestoredFileName:{serializedName:"properties.lastRestoredFileName",readOnly:!0,type:{name:"String"}},lastRestoredFileTime:{serializedName:"properties.lastRestoredFileTime",readOnly:!0,type:{name:"DateTime"}},percentCompleted:{serializedName:"properties.percentCompleted",readOnly:!0,type:{name:"Number"}},unrestorableFiles:{serializedName:"properties.unrestorableFiles",readOnly:!0,type:{name:"Sequence",element:{type:{name:"String"}}}},numberOfFilesDetected:{serializedName:"properties.numberOfFilesDetected",readOnly:!0,type:{name:"Number"}},lastUploadedFileName:{serializedName:"properties.lastUploadedFileName",readOnly:!0,type:{name:"String"}},lastUploadedFileTime:{serializedName:"properties.lastUploadedFileTime",readOnly:!0,type:{name:"DateTime"}},blockReason:{serializedName:"properties.blockReason",readOnly:!0,type:{name:"String"}}})}},cN={type:{name:"Composite",className:"ManagedDatabaseSecurityAlertPolicy",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{state:{serializedName:"properties.state",type:{name:"Enum",allowedValues:["New","Enabled","Disabled"]}},disabledAlerts:{serializedName:"properties.disabledAlerts",type:{name:"Sequence",element:{type:{name:"String"}}}},emailAddresses:{serializedName:"properties.emailAddresses",type:{name:"Sequence",element:{type:{name:"String"}}}},emailAccountAdmins:{serializedName:"properties.emailAccountAdmins",type:{name:"Boolean"}},storageEndpoint:{serializedName:"properties.storageEndpoint",type:{name:"String"}},storageAccountAccessKey:{serializedName:"properties.storageAccountAccessKey",type:{name:"String"}},retentionDays:{serializedName:"properties.retentionDays",type:{name:"Number"}},creationTime:{serializedName:"properties.creationTime",readOnly:!0,type:{name:"DateTime"}}})}},Kbt={type:{name:"Composite",className:"SecurityEvent",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{eventTime:{serializedName:"properties.eventTime",readOnly:!0,type:{name:"DateTime"}},securityEventType:{serializedName:"properties.securityEventType",readOnly:!0,type:{name:"Enum",allowedValues:["Undefined","SqlInjectionVulnerability","SqlInjectionExploit"]}},subscription:{serializedName:"properties.subscription",readOnly:!0,type:{name:"String"}},server:{serializedName:"properties.server",readOnly:!0,type:{name:"String"}},database:{serializedName:"properties.database",readOnly:!0,type:{name:"String"}},clientIp:{serializedName:"properties.clientIp",readOnly:!0,type:{name:"String"}},applicationName:{serializedName:"properties.applicationName",readOnly:!0,type:{name:"String"}},principalName:{serializedName:"properties.principalName",readOnly:!0,type:{name:"String"}},securityEventSqlInjectionAdditionalProperties:{serializedName:"properties.securityEventSqlInjectionAdditionalProperties",type:{name:"Composite",className:"SecurityEventSqlInjectionAdditionalProperties"}}})}},hv={type:{name:"Composite",className:"SensitivityLabel",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{managedBy:{serializedName:"managedBy",readOnly:!0,type:{name:"String"}},schemaName:{serializedName:"properties.schemaName",readOnly:!0,type:{name:"String"}},tableName:{serializedName:"properties.tableName",readOnly:!0,type:{name:"String"}},columnName:{serializedName:"properties.columnName",readOnly:!0,type:{name:"String"}},labelName:{serializedName:"properties.labelName",type:{name:"String"}},labelId:{serializedName:"properties.labelId",type:{name:"String"}},informationType:{serializedName:"properties.informationType",type:{name:"String"}},informationTypeId:{serializedName:"properties.informationTypeId",type:{name:"String"}},isDisabled:{serializedName:"properties.isDisabled",readOnly:!0,type:{name:"Boolean"}},rank:{serializedName:"properties.rank",type:{name:"Enum",allowedValues:["None","Low","Medium","High","Critical"]}}})}},Qbt={type:{name:"Composite",className:"SensitivityLabelUpdate",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{op:{serializedName:"properties.op",type:{name:"Enum",allowedValues:["set","remove"]}},schema:{serializedName:"properties.schema",type:{name:"String"}},table:{serializedName:"properties.table",type:{name:"String"}},column:{serializedName:"properties.column",type:{name:"String"}},sensitivityLabel:{serializedName:"properties.sensitivityLabel",type:{name:"Composite",className:"SensitivityLabel"}}})}},Ybt={type:{name:"Composite",className:"RecommendedSensitivityLabelUpdate",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{op:{serializedName:"properties.op",type:{name:"Enum",allowedValues:["enable","disable"]}},schema:{serializedName:"properties.schema",type:{name:"String"}},table:{serializedName:"properties.table",type:{name:"String"}},column:{serializedName:"properties.column",type:{name:"String"}}})}},lN={type:{name:"Composite",className:"ManagedTransparentDataEncryption",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{state:{serializedName:"properties.state",type:{name:"Enum",allowedValues:["Enabled","Disabled"]}}})}},fS={type:{name:"Composite",className:"ManagedInstanceAdministrator",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{administratorType:{serializedName:"properties.administratorType",type:{name:"String"}},login:{serializedName:"properties.login",type:{name:"String"}},sid:{serializedName:"properties.sid",type:{name:"Uuid"}},tenantId:{serializedName:"properties.tenantId",type:{name:"Uuid"}}})}},gS={type:{name:"Composite",className:"ManagedInstanceAzureADOnlyAuthentication",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{azureADOnlyAuthentication:{serializedName:"properties.azureADOnlyAuthentication",type:{name:"Boolean"}}})}},yS={type:{name:"Composite",className:"ManagedInstanceEncryptionProtector",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{kind:{serializedName:"kind",readOnly:!0,type:{name:"String"}},serverKeyName:{serializedName:"properties.serverKeyName",type:{name:"String"}},serverKeyType:{serializedName:"properties.serverKeyType",type:{name:"String"}},uri:{serializedName:"properties.uri",readOnly:!0,type:{name:"String"}},thumbprint:{serializedName:"properties.thumbprint",readOnly:!0,type:{name:"String"}},autoRotationEnabled:{serializedName:"properties.autoRotationEnabled",type:{name:"Boolean"}}})}},vS={type:{name:"Composite",className:"ManagedInstanceKey",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{kind:{serializedName:"kind",readOnly:!0,type:{name:"String"}},serverKeyType:{serializedName:"properties.serverKeyType",type:{name:"String"}},uri:{serializedName:"properties.uri",type:{name:"String"}},thumbprint:{serializedName:"properties.thumbprint",readOnly:!0,type:{name:"String"}},creationDate:{serializedName:"properties.creationDate",readOnly:!0,type:{name:"DateTime"}},autoRotationEnabled:{serializedName:"properties.autoRotationEnabled",readOnly:!0,type:{name:"Boolean"}}})}},bS={type:{name:"Composite",className:"ManagedInstanceLongTermRetentionPolicy",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{weeklyRetention:{serializedName:"properties.weeklyRetention",type:{name:"String"}},monthlyRetention:{serializedName:"properties.monthlyRetention",type:{name:"String"}},yearlyRetention:{serializedName:"properties.yearlyRetention",type:{name:"String"}},weekOfYear:{serializedName:"properties.weekOfYear",type:{name:"Number"}}})}},CRe={type:{name:"Composite",className:"ManagedInstanceOperation",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{managedInstanceName:{serializedName:"properties.managedInstanceName",readOnly:!0,type:{name:"String"}},operation:{serializedName:"properties.operation",readOnly:!0,type:{name:"String"}},operationFriendlyName:{serializedName:"properties.operationFriendlyName",readOnly:!0,type:{name:"String"}},percentComplete:{serializedName:"properties.percentComplete",readOnly:!0,type:{name:"Number"}},startTime:{serializedName:"properties.startTime",readOnly:!0,type:{name:"DateTime"}},state:{serializedName:"properties.state",readOnly:!0,type:{name:"String"}},errorCode:{serializedName:"properties.errorCode",readOnly:!0,type:{name:"Number"}},errorDescription:{serializedName:"properties.errorDescription",readOnly:!0,type:{name:"String"}},errorSeverity:{serializedName:"properties.errorSeverity",readOnly:!0,type:{name:"Number"}},isUserError:{serializedName:"properties.isUserError",readOnly:!0,type:{name:"Boolean"}},estimatedCompletionTime:{serializedName:"properties.estimatedCompletionTime",readOnly:!0,type:{name:"DateTime"}},description:{serializedName:"properties.description",readOnly:!0,type:{name:"String"}},isCancellable:{serializedName:"properties.isCancellable",readOnly:!0,type:{name:"Boolean"}},operationParameters:{serializedName:"properties.operationParameters",type:{name:"Composite",className:"ManagedInstanceOperationParametersPair"}},operationSteps:{serializedName:"properties.operationSteps",type:{name:"Composite",className:"ManagedInstanceOperationSteps"}}})}},_S={type:{name:"Composite",className:"ManagedInstancePrivateEndpointConnection",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{privateEndpoint:{serializedName:"properties.privateEndpoint",type:{name:"Composite",className:"ManagedInstancePrivateEndpointProperty"}},privateLinkServiceConnectionState:{serializedName:"properties.privateLinkServiceConnectionState",type:{name:"Composite",className:"ManagedInstancePrivateLinkServiceConnectionStateProperty"}},provisioningState:{serializedName:"properties.provisioningState",readOnly:!0,type:{name:"String"}}})}},PRe={type:{name:"Composite",className:"ManagedInstancePrivateLink",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{properties:{serializedName:"properties",type:{name:"Composite",className:"ManagedInstancePrivateLinkProperties"}}})}},wRe={type:{name:"Composite",className:"TdeCertificate",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{privateBlob:{serializedName:"properties.privateBlob",type:{name:"String"}},certPassword:{serializedName:"properties.certPassword",type:{name:"String"}}})}},uN={type:{name:"Composite",className:"ManagedInstanceVulnerabilityAssessment",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{storageContainerPath:{serializedName:"properties.storageContainerPath",type:{name:"String"}},storageContainerSasKey:{serializedName:"properties.storageContainerSasKey",type:{name:"String"}},storageAccountAccessKey:{serializedName:"properties.storageAccountAccessKey",type:{name:"String"}},recurringScans:{serializedName:"properties.recurringScans",type:{name:"Composite",className:"VulnerabilityAssessmentRecurringScansProperties"}}})}},SS={type:{name:"Composite",className:"ManagedServerSecurityAlertPolicy",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{systemData:{serializedName:"systemData",type:{name:"Composite",className:"SystemData"}},state:{serializedName:"properties.state",type:{name:"Enum",allowedValues:["Enabled","Disabled"]}},disabledAlerts:{serializedName:"properties.disabledAlerts",type:{name:"Sequence",element:{type:{name:"String"}}}},emailAddresses:{serializedName:"properties.emailAddresses",type:{name:"Sequence",element:{type:{name:"String"}}}},emailAccountAdmins:{serializedName:"properties.emailAccountAdmins",type:{name:"Boolean"}},storageEndpoint:{serializedName:"properties.storageEndpoint",type:{name:"String"}},storageAccountAccessKey:{serializedName:"properties.storageAccountAccessKey",type:{name:"String"}},retentionDays:{serializedName:"properties.retentionDays",type:{name:"Number"}},creationTime:{serializedName:"properties.creationTime",readOnly:!0,type:{name:"DateTime"}}})}},Xbt={type:{name:"Composite",className:"OperationsHealth",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{namePropertiesName:{serializedName:"properties.name",readOnly:!0,type:{name:"String"}},health:{serializedName:"properties.health",readOnly:!0,type:{name:"String"}},description:{serializedName:"properties.description",readOnly:!0,type:{name:"String"}}})}},CS={type:{name:"Composite",className:"PrivateEndpointConnection",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{privateEndpoint:{serializedName:"properties.privateEndpoint",type:{name:"Composite",className:"PrivateEndpointProperty"}},privateLinkServiceConnectionState:{serializedName:"properties.privateLinkServiceConnectionState",type:{name:"Composite",className:"PrivateLinkServiceConnectionStateProperty"}},provisioningState:{serializedName:"properties.provisioningState",readOnly:!0,type:{name:"String"}}})}},ERe={type:{name:"Composite",className:"PrivateLinkResource",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{properties:{serializedName:"properties",type:{name:"Composite",className:"PrivateLinkResourceProperties"}}})}},TRe={type:{name:"Composite",className:"RecoverableManagedDatabase",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{lastAvailableBackupDate:{serializedName:"properties.lastAvailableBackupDate",readOnly:!0,type:{name:"String"}}})}},PE={type:{name:"Composite",className:"RestorePoint",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{location:{serializedName:"location",readOnly:!0,type:{name:"String"}},restorePointType:{serializedName:"properties.restorePointType",readOnly:!0,type:{name:"Enum",allowedValues:["CONTINUOUS","DISCRETE"]}},earliestRestoreDate:{serializedName:"properties.earliestRestoreDate",readOnly:!0,type:{name:"DateTime"}},restorePointCreationDate:{serializedName:"properties.restorePointCreationDate",readOnly:!0,type:{name:"DateTime"}},restorePointLabel:{serializedName:"properties.restorePointLabel",readOnly:!0,type:{name:"String"}}})}},RU={type:{name:"Composite",className:"ServerAutomaticTuning",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{desiredState:{serializedName:"properties.desiredState",type:{name:"Enum",allowedValues:["Custom","Auto","Unspecified"]}},actualState:{serializedName:"properties.actualState",readOnly:!0,type:{name:"Enum",allowedValues:["Custom","Auto","Unspecified"]}},options:{serializedName:"properties.options",type:{name:"Dictionary",value:{type:{name:"Composite",className:"AutomaticTuningServerOptions"}}}}})}},PS={type:{name:"Composite",className:"ServerAzureADAdministrator",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{administratorType:{serializedName:"properties.administratorType",type:{name:"String"}},login:{serializedName:"properties.login",type:{name:"String"}},sid:{serializedName:"properties.sid",type:{name:"Uuid"}},tenantId:{serializedName:"properties.tenantId",type:{name:"Uuid"}},azureADOnlyAuthentication:{serializedName:"properties.azureADOnlyAuthentication",readOnly:!0,type:{name:"Boolean"}}})}},wS={type:{name:"Composite",className:"ServerAzureADOnlyAuthentication",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{azureADOnlyAuthentication:{serializedName:"properties.azureADOnlyAuthentication",type:{name:"Boolean"}}})}},ES={type:{name:"Composite",className:"ServerDevOpsAuditingSettings",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{systemData:{serializedName:"systemData",type:{name:"Composite",className:"SystemData"}},isAzureMonitorTargetEnabled:{serializedName:"properties.isAzureMonitorTargetEnabled",type:{name:"Boolean"}},state:{serializedName:"properties.state",type:{name:"Enum",allowedValues:["Enabled","Disabled"]}},storageEndpoint:{serializedName:"properties.storageEndpoint",type:{name:"String"}},storageAccountAccessKey:{serializedName:"properties.storageAccountAccessKey",type:{name:"String"}},storageAccountSubscriptionId:{serializedName:"properties.storageAccountSubscriptionId",type:{name:"Uuid"}}})}},_h={type:{name:"Composite",className:"ServerDnsAlias",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{azureDnsRecord:{serializedName:"properties.azureDnsRecord",readOnly:!0,type:{name:"String"}}})}},TS={type:{name:"Composite",className:"ServerKey",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{kind:{serializedName:"kind",readOnly:!0,type:{name:"String"}},location:{serializedName:"location",readOnly:!0,type:{name:"String"}},subregion:{serializedName:"properties.subregion",readOnly:!0,type:{name:"String"}},serverKeyType:{serializedName:"properties.serverKeyType",type:{name:"String"}},uri:{serializedName:"properties.uri",type:{name:"String"}},thumbprint:{serializedName:"properties.thumbprint",readOnly:!0,type:{name:"String"}},creationDate:{serializedName:"properties.creationDate",readOnly:!0,type:{name:"DateTime"}},autoRotationEnabled:{serializedName:"properties.autoRotationEnabled",readOnly:!0,type:{name:"Boolean"}}})}},Jbt={type:{name:"Composite",className:"ServerOperation",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{operation:{serializedName:"properties.operation",readOnly:!0,type:{name:"String"}},operationFriendlyName:{serializedName:"properties.operationFriendlyName",readOnly:!0,type:{name:"String"}},percentComplete:{serializedName:"properties.percentComplete",readOnly:!0,type:{name:"Number"}},serverName:{serializedName:"properties.serverName",readOnly:!0,type:{name:"String"}},startTime:{serializedName:"properties.startTime",readOnly:!0,type:{name:"DateTime"}},state:{serializedName:"properties.state",readOnly:!0,type:{name:"String"}},errorCode:{serializedName:"properties.errorCode",readOnly:!0,type:{name:"Number"}},errorDescription:{serializedName:"properties.errorDescription",readOnly:!0,type:{name:"String"}},errorSeverity:{serializedName:"properties.errorSeverity",readOnly:!0,type:{name:"Number"}},isUserError:{serializedName:"properties.isUserError",readOnly:!0,type:{name:"Boolean"}},estimatedCompletionTime:{serializedName:"properties.estimatedCompletionTime",readOnly:!0,type:{name:"DateTime"}},description:{serializedName:"properties.description",readOnly:!0,type:{name:"String"}},isCancellable:{serializedName:"properties.isCancellable",readOnly:!0,type:{name:"Boolean"}}})}},IS={type:{name:"Composite",className:"ServerSecurityAlertPolicy",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{systemData:{serializedName:"systemData",type:{name:"Composite",className:"SystemData"}},state:{serializedName:"properties.state",type:{name:"Enum",allowedValues:["Enabled","Disabled"]}},disabledAlerts:{serializedName:"properties.disabledAlerts",type:{name:"Sequence",element:{type:{name:"String"}}}},emailAddresses:{serializedName:"properties.emailAddresses",type:{name:"Sequence",element:{type:{name:"String"}}}},emailAccountAdmins:{serializedName:"properties.emailAccountAdmins",type:{name:"Boolean"}},storageEndpoint:{serializedName:"properties.storageEndpoint",type:{name:"String"}},storageAccountAccessKey:{serializedName:"properties.storageAccountAccessKey",type:{name:"String"}},retentionDays:{serializedName:"properties.retentionDays",type:{name:"Number"}},creationTime:{serializedName:"properties.creationTime",readOnly:!0,type:{name:"DateTime"}}})}},RS={type:{name:"Composite",className:"ServerTrustGroup",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{groupMembers:{serializedName:"properties.groupMembers",type:{name:"Sequence",element:{type:{name:"Composite",className:"ServerInfo"}}}},trustScopes:{serializedName:"properties.trustScopes",type:{name:"Sequence",element:{type:{name:"String"}}}}})}},dN={type:{name:"Composite",className:"ServerVulnerabilityAssessment",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{storageContainerPath:{serializedName:"properties.storageContainerPath",type:{name:"String"}},storageContainerSasKey:{serializedName:"properties.storageContainerSasKey",type:{name:"String"}},storageAccountAccessKey:{serializedName:"properties.storageAccountAccessKey",type:{name:"String"}},recurringScans:{serializedName:"properties.recurringScans",type:{name:"Composite",className:"VulnerabilityAssessmentRecurringScansProperties"}}})}},xU={type:{name:"Composite",className:"SqlAgentConfiguration",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{state:{serializedName:"properties.state",type:{name:"String"}}})}},IRe={type:{name:"Composite",className:"SubscriptionUsage",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{displayName:{serializedName:"properties.displayName",readOnly:!0,type:{name:"String"}},currentValue:{serializedName:"properties.currentValue",readOnly:!0,type:{name:"Number"}},limit:{serializedName:"properties.limit",readOnly:!0,type:{name:"Number"}},unit:{serializedName:"properties.unit",readOnly:!0,type:{name:"String"}}})}},xS={type:{name:"Composite",className:"SyncAgent",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{namePropertiesName:{serializedName:"properties.name",readOnly:!0,type:{name:"String"}},syncDatabaseId:{serializedName:"properties.syncDatabaseId",type:{name:"String"}},lastAliveTime:{serializedName:"properties.lastAliveTime",readOnly:!0,type:{name:"DateTime"}},state:{serializedName:"properties.state",readOnly:!0,type:{name:"String"}},isUpToDate:{serializedName:"properties.isUpToDate",readOnly:!0,type:{name:"Boolean"}},expiryTime:{serializedName:"properties.expiryTime",readOnly:!0,type:{name:"DateTime"}},version:{serializedName:"properties.version",readOnly:!0,type:{name:"String"}}})}},Zbt={type:{name:"Composite",className:"SyncAgentLinkedDatabase",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{databaseType:{serializedName:"properties.databaseType",readOnly:!0,type:{name:"String"}},databaseId:{serializedName:"properties.databaseId",readOnly:!0,type:{name:"String"}},description:{serializedName:"properties.description",readOnly:!0,type:{name:"String"}},serverName:{serializedName:"properties.serverName",readOnly:!0,type:{name:"String"}},databaseName:{serializedName:"properties.databaseName",readOnly:!0,type:{name:"String"}},userName:{serializedName:"properties.userName",readOnly:!0,type:{name:"String"}}})}},rm={type:{name:"Composite",className:"SyncGroup",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{sku:{serializedName:"sku",type:{name:"Composite",className:"Sku"}},interval:{serializedName:"properties.interval",type:{name:"Number"}},lastSyncTime:{serializedName:"properties.lastSyncTime",readOnly:!0,type:{name:"DateTime"}},conflictResolutionPolicy:{serializedName:"properties.conflictResolutionPolicy",type:{name:"String"}},syncDatabaseId:{serializedName:"properties.syncDatabaseId",type:{name:"String"}},hubDatabaseUserName:{serializedName:"properties.hubDatabaseUserName",type:{name:"String"}},hubDatabasePassword:{serializedName:"properties.hubDatabasePassword",type:{name:"String"}},syncState:{serializedName:"properties.syncState",readOnly:!0,type:{name:"String"}},schema:{serializedName:"properties.schema",type:{name:"Composite",className:"SyncGroupSchema"}},enableConflictLogging:{serializedName:"properties.enableConflictLogging",type:{name:"Boolean"}},conflictLoggingRetentionInDays:{serializedName:"properties.conflictLoggingRetentionInDays",type:{name:"Number"}},usePrivateLinkConnection:{serializedName:"properties.usePrivateLinkConnection",type:{name:"Boolean"}},privateEndpointName:{serializedName:"properties.privateEndpointName",readOnly:!0,type:{name:"String"}}})}},nm={type:{name:"Composite",className:"SyncMember",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{databaseType:{serializedName:"properties.databaseType",type:{name:"String"}},syncAgentId:{serializedName:"properties.syncAgentId",type:{name:"String"}},sqlServerDatabaseId:{serializedName:"properties.sqlServerDatabaseId",type:{name:"Uuid"}},syncMemberAzureDatabaseResourceId:{serializedName:"properties.syncMemberAzureDatabaseResourceId",type:{name:"String"}},usePrivateLinkConnection:{serializedName:"properties.usePrivateLinkConnection",type:{name:"Boolean"}},privateEndpointName:{serializedName:"properties.privateEndpointName",readOnly:!0,type:{name:"String"}},serverName:{serializedName:"properties.serverName",type:{name:"String"}},databaseName:{serializedName:"properties.databaseName",type:{name:"String"}},userName:{serializedName:"properties.userName",type:{name:"String"}},password:{serializedName:"properties.password",type:{name:"String"}},syncDirection:{serializedName:"properties.syncDirection",type:{name:"String"}},syncState:{serializedName:"properties.syncState",readOnly:!0,type:{name:"String"}}})}},RRe={type:{name:"Composite",className:"TimeZone",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{timeZoneId:{serializedName:"properties.timeZoneId",readOnly:!0,type:{name:"String"}},displayName:{serializedName:"properties.displayName",readOnly:!0,type:{name:"String"}}})}},xRe={type:{name:"Composite",className:"UpdateManagedInstanceDnsServersOperation",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{status:{serializedName:"properties.status",readOnly:!0,type:{name:"String"}}})}},OS={type:{name:"Composite",className:"VirtualNetworkRule",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{virtualNetworkSubnetId:{serializedName:"properties.virtualNetworkSubnetId",type:{name:"String"}},ignoreMissingVnetServiceEndpoint:{serializedName:"properties.ignoreMissingVnetServiceEndpoint",type:{name:"Boolean"}},state:{serializedName:"properties.state",readOnly:!0,type:{name:"String"}}})}},AS={type:{name:"Composite",className:"WorkloadClassifier",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{memberName:{serializedName:"properties.memberName",type:{name:"String"}},label:{serializedName:"properties.label",type:{name:"String"}},context:{serializedName:"properties.context",type:{name:"String"}},startTime:{serializedName:"properties.startTime",type:{name:"String"}},endTime:{serializedName:"properties.endTime",type:{name:"String"}},importance:{serializedName:"properties.importance",type:{name:"String"}}})}},NS={type:{name:"Composite",className:"WorkloadGroup",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{minResourcePercent:{serializedName:"properties.minResourcePercent",type:{name:"Number"}},maxResourcePercent:{serializedName:"properties.maxResourcePercent",type:{name:"Number"}},minResourcePercentPerRequest:{serializedName:"properties.minResourcePercentPerRequest",type:{name:"Number"}},maxResourcePercentPerRequest:{serializedName:"properties.maxResourcePercentPerRequest",type:{name:"Number"}},importance:{serializedName:"properties.importance",type:{name:"String"}},queryExecutionTimeout:{serializedName:"properties.queryExecutionTimeout",type:{name:"Number"}}})}},pN={type:{name:"Composite",className:"LogicalDatabaseTransparentDataEncryption",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{state:{serializedName:"properties.state",type:{name:"Enum",allowedValues:["Enabled","Disabled"]}}})}},im={type:{name:"Composite",className:"BackupShortTermRetentionPolicy",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{retentionDays:{serializedName:"properties.retentionDays",type:{name:"Number"}},diffBackupIntervalInHours:{serializedName:"properties.diffBackupIntervalInHours",type:{name:"Number"}}})}},ORe={type:{name:"Composite",className:"DatabaseExtensions",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{operationMode:{serializedName:"properties.operationMode",type:{name:"String"}},storageKeyType:{serializedName:"properties.storageKeyType",type:{name:"String"}},storageKey:{serializedName:"properties.storageKey",type:{name:"String"}},storageUri:{serializedName:"properties.storageUri",type:{name:"String"}}})}},ZA={type:{name:"Composite",className:"ImportExportExtensionsOperationResult",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{requestId:{serializedName:"properties.requestId",readOnly:!0,type:{name:"Uuid"}},requestType:{serializedName:"properties.requestType",readOnly:!0,type:{name:"String"}},lastModifiedTime:{serializedName:"properties.lastModifiedTime",readOnly:!0,type:{name:"String"}},serverName:{serializedName:"properties.serverName",readOnly:!0,type:{name:"String"}},databaseName:{serializedName:"properties.databaseName",readOnly:!0,type:{name:"String"}},status:{serializedName:"properties.status",readOnly:!0,type:{name:"String"}},errorMessage:{serializedName:"properties.errorMessage",readOnly:!0,type:{name:"String"}}})}},e_t={type:{name:"Composite",className:"DatabaseOperation",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{databaseName:{serializedName:"properties.databaseName",readOnly:!0,type:{name:"String"}},operation:{serializedName:"properties.operation",readOnly:!0,type:{name:"String"}},operationFriendlyName:{serializedName:"properties.operationFriendlyName",readOnly:!0,type:{name:"String"}},percentComplete:{serializedName:"properties.percentComplete",readOnly:!0,type:{name:"Number"}},serverName:{serializedName:"properties.serverName",readOnly:!0,type:{name:"String"}},startTime:{serializedName:"properties.startTime",readOnly:!0,type:{name:"DateTime"}},state:{serializedName:"properties.state",readOnly:!0,type:{name:"String"}},errorCode:{serializedName:"properties.errorCode",readOnly:!0,type:{name:"Number"}},errorDescription:{serializedName:"properties.errorDescription",readOnly:!0,type:{name:"String"}},errorSeverity:{serializedName:"properties.errorSeverity",readOnly:!0,type:{name:"Number"}},isUserError:{serializedName:"properties.isUserError",readOnly:!0,type:{name:"Boolean"}},estimatedCompletionTime:{serializedName:"properties.estimatedCompletionTime",readOnly:!0,type:{name:"DateTime"}},description:{serializedName:"properties.description",readOnly:!0,type:{name:"String"}},isCancellable:{serializedName:"properties.isCancellable",readOnly:!0,type:{name:"Boolean"}}})}},t_t={type:{name:"Composite",className:"DatabaseUsage",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{displayName:{serializedName:"properties.displayName",readOnly:!0,type:{name:"String"}},currentValue:{serializedName:"properties.currentValue",readOnly:!0,type:{name:"Number"}},limit:{serializedName:"properties.limit",readOnly:!0,type:{name:"Number"}},unit:{serializedName:"properties.unit",readOnly:!0,type:{name:"String"}}})}},sm={type:{name:"Composite",className:"LedgerDigestUploads",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{digestStorageEndpoint:{serializedName:"properties.digestStorageEndpoint",type:{name:"String"}},state:{serializedName:"properties.state",readOnly:!0,type:{name:"Enum",allowedValues:["Enabled","Disabled"]}}})}},DS={type:{name:"Composite",className:"OutboundFirewallRule",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{provisioningState:{serializedName:"properties.provisioningState",readOnly:!0,type:{name:"String"}}})}},ARe={type:{name:"Composite",className:"ReplicationLink",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{partnerServer:{serializedName:"properties.partnerServer",readOnly:!0,type:{name:"String"}},partnerDatabase:{serializedName:"properties.partnerDatabase",readOnly:!0,type:{name:"String"}},partnerLocation:{serializedName:"properties.partnerLocation",readOnly:!0,type:{name:"String"}},role:{serializedName:"properties.role",readOnly:!0,type:{name:"Enum",allowedValues:["Primary","Secondary","NonReadableSecondary","Source","Copy"]}},partnerRole:{serializedName:"properties.partnerRole",readOnly:!0,type:{name:"Enum",allowedValues:["Primary","Secondary","NonReadableSecondary","Source","Copy"]}},replicationMode:{serializedName:"properties.replicationMode",readOnly:!0,type:{name:"String"}},startTime:{serializedName:"properties.startTime",readOnly:!0,type:{name:"DateTime"}},percentComplete:{serializedName:"properties.percentComplete",readOnly:!0,type:{name:"Number"}},replicationState:{serializedName:"properties.replicationState",readOnly:!0,type:{name:"String"}},isTerminationAllowed:{serializedName:"properties.isTerminationAllowed",readOnly:!0,type:{name:"Boolean"}},linkType:{serializedName:"properties.linkType",readOnly:!0,type:{name:"String"}}})}},$u={type:{name:"Composite",className:"ImportExportOperationResult",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{requestId:{serializedName:"properties.requestId",readOnly:!0,type:{name:"Uuid"}},requestType:{serializedName:"properties.requestType",readOnly:!0,type:{name:"String"}},queuedTime:{serializedName:"properties.queuedTime",readOnly:!0,type:{name:"String"}},lastModifiedTime:{serializedName:"properties.lastModifiedTime",readOnly:!0,type:{name:"String"}},blobUri:{serializedName:"properties.blobUri",readOnly:!0,type:{name:"String"}},serverName:{serializedName:"properties.serverName",readOnly:!0,type:{name:"String"}},databaseName:{serializedName:"properties.databaseName",readOnly:!0,type:{name:"String"}},status:{serializedName:"properties.status",readOnly:!0,type:{name:"String"}},errorMessage:{serializedName:"properties.errorMessage",readOnly:!0,type:{name:"String"}},privateEndpointConnections:{serializedName:"properties.privateEndpointConnections",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"PrivateEndpointConnectionRequestStatus"}}}}})}},Ec={type:{name:"Composite",className:"LongTermRetentionBackupOperationResult",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{requestId:{serializedName:"properties.requestId",readOnly:!0,type:{name:"Uuid"}},operationType:{serializedName:"properties.operationType",readOnly:!0,type:{name:"String"}},fromBackupResourceId:{serializedName:"properties.fromBackupResourceId",readOnly:!0,type:{name:"String"}},toBackupResourceId:{serializedName:"properties.toBackupResourceId",readOnly:!0,type:{name:"String"}},targetBackupStorageRedundancy:{serializedName:"properties.targetBackupStorageRedundancy",readOnly:!0,type:{name:"String"}},status:{serializedName:"properties.status",readOnly:!0,type:{name:"String"}},message:{serializedName:"properties.message",readOnly:!0,type:{name:"String"}}})}},GZ={type:{name:"Composite",className:"LongTermRetentionBackup",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{serverName:{serializedName:"properties.serverName",readOnly:!0,type:{name:"String"}},serverCreateTime:{serializedName:"properties.serverCreateTime",readOnly:!0,type:{name:"DateTime"}},databaseName:{serializedName:"properties.databaseName",readOnly:!0,type:{name:"String"}},databaseDeletionTime:{serializedName:"properties.databaseDeletionTime",readOnly:!0,type:{name:"DateTime"}},backupTime:{serializedName:"properties.backupTime",readOnly:!0,type:{name:"DateTime"}},backupExpirationTime:{serializedName:"properties.backupExpirationTime",readOnly:!0,type:{name:"DateTime"}},backupStorageRedundancy:{serializedName:"properties.backupStorageRedundancy",readOnly:!0,type:{name:"String"}},requestedBackupStorageRedundancy:{serializedName:"properties.requestedBackupStorageRedundancy",type:{name:"String"}}})}},$Z={type:{name:"Composite",className:"ManagedInstanceLongTermRetentionBackup",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{managedInstanceName:{serializedName:"properties.managedInstanceName",readOnly:!0,type:{name:"String"}},managedInstanceCreateTime:{serializedName:"properties.managedInstanceCreateTime",readOnly:!0,type:{name:"DateTime"}},databaseName:{serializedName:"properties.databaseName",readOnly:!0,type:{name:"String"}},databaseDeletionTime:{serializedName:"properties.databaseDeletionTime",readOnly:!0,type:{name:"DateTime"}},backupTime:{serializedName:"properties.backupTime",readOnly:!0,type:{name:"DateTime"}},backupExpirationTime:{serializedName:"properties.backupExpirationTime",readOnly:!0,type:{name:"DateTime"}},backupStorageRedundancy:{serializedName:"properties.backupStorageRedundancy",readOnly:!0,type:{name:"String"}}})}},NRe={type:{name:"Composite",className:"RestorableDroppedDatabase",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{sku:{serializedName:"sku",type:{name:"Composite",className:"Sku"}},location:{serializedName:"location",type:{name:"String"}},tags:{serializedName:"tags",type:{name:"Dictionary",value:{type:{name:"String"}}}},databaseName:{serializedName:"properties.databaseName",readOnly:!0,type:{name:"String"}},maxSizeBytes:{serializedName:"properties.maxSizeBytes",readOnly:!0,type:{name:"Number"}},creationDate:{serializedName:"properties.creationDate",readOnly:!0,type:{name:"DateTime"}},deletionDate:{serializedName:"properties.deletionDate",readOnly:!0,type:{name:"DateTime"}},earliestRestoreDate:{serializedName:"properties.earliestRestoreDate",readOnly:!0,type:{name:"DateTime"}},backupStorageRedundancy:{serializedName:"properties.backupStorageRedundancy",readOnly:!0,type:{name:"String"}}})}},MS={type:{name:"Composite",className:"ServerConnectionPolicy",modelProperties:Object.assign(Object.assign({},Xt.type.modelProperties),{location:{serializedName:"location",readOnly:!0,type:{name:"String"}},kind:{serializedName:"kind",readOnly:!0,type:{name:"String"}},connectionType:{serializedName:"properties.connectionType",type:{name:"String"}}})}},om={type:{name:"Composite",className:"ElasticPool",modelProperties:Object.assign(Object.assign({},Sh.type.modelProperties),{sku:{serializedName:"sku",type:{name:"Composite",className:"Sku"}},kind:{serializedName:"kind",readOnly:!0,type:{name:"String"}},state:{serializedName:"properties.state",readOnly:!0,type:{name:"String"}},creationDate:{serializedName:"properties.creationDate",readOnly:!0,type:{name:"DateTime"}},maxSizeBytes:{serializedName:"properties.maxSizeBytes",type:{name:"Number"}},perDatabaseSettings:{serializedName:"properties.perDatabaseSettings",type:{name:"Composite",className:"ElasticPoolPerDatabaseSettings"}},zoneRedundant:{serializedName:"properties.zoneRedundant",type:{name:"Boolean"}},licenseType:{serializedName:"properties.licenseType",type:{name:"String"}},maintenanceConfigurationId:{serializedName:"properties.maintenanceConfigurationId",type:{name:"String"}}})}},am={type:{name:"Composite",className:"InstancePool",modelProperties:Object.assign(Object.assign({},Sh.type.modelProperties),{sku:{serializedName:"sku",type:{name:"Composite",className:"Sku"}},subnetId:{serializedName:"properties.subnetId",type:{name:"String"}},vCores:{serializedName:"properties.vCores",type:{name:"Number"}},licenseType:{serializedName:"properties.licenseType",type:{name:"String"}}})}},cm={type:{name:"Composite",className:"JobAgent",modelProperties:Object.assign(Object.assign({},Sh.type.modelProperties),{sku:{serializedName:"sku",type:{name:"Composite",className:"Sku"}},databaseId:{serializedName:"properties.databaseId",type:{name:"String"}},state:{serializedName:"properties.state",readOnly:!0,type:{name:"String"}}})}},lm={type:{name:"Composite",className:"ManagedDatabase",modelProperties:Object.assign(Object.assign({},Sh.type.modelProperties),{collation:{serializedName:"properties.collation",type:{name:"String"}},status:{serializedName:"properties.status",readOnly:!0,type:{name:"String"}},creationDate:{serializedName:"properties.creationDate",readOnly:!0,type:{name:"DateTime"}},earliestRestorePoint:{serializedName:"properties.earliestRestorePoint",readOnly:!0,type:{name:"DateTime"}},restorePointInTime:{serializedName:"properties.restorePointInTime",type:{name:"DateTime"}},defaultSecondaryLocation:{serializedName:"properties.defaultSecondaryLocation",readOnly:!0,type:{name:"String"}},catalogCollation:{serializedName:"properties.catalogCollation",type:{name:"String"}},createMode:{serializedName:"properties.createMode",type:{name:"String"}},storageContainerUri:{serializedName:"properties.storageContainerUri",type:{name:"String"}},sourceDatabaseId:{serializedName:"properties.sourceDatabaseId",type:{name:"String"}},restorableDroppedDatabaseId:{serializedName:"properties.restorableDroppedDatabaseId",type:{name:"String"}},storageContainerSasToken:{serializedName:"properties.storageContainerSasToken",type:{name:"String"}},failoverGroupId:{serializedName:"properties.failoverGroupId",readOnly:!0,type:{name:"String"}},recoverableDatabaseId:{serializedName:"properties.recoverableDatabaseId",type:{name:"String"}},longTermRetentionBackupResourceId:{serializedName:"properties.longTermRetentionBackupResourceId",type:{name:"String"}},autoCompleteRestore:{serializedName:"properties.autoCompleteRestore",type:{name:"Boolean"}},lastBackupName:{serializedName:"properties.lastBackupName",type:{name:"String"}}})}},wE={type:{name:"Composite",className:"VirtualCluster",modelProperties:Object.assign(Object.assign({},Sh.type.modelProperties),{subnetId:{serializedName:"properties.subnetId",readOnly:!0,type:{name:"String"}},family:{serializedName:"properties.family",type:{name:"String"}},childResources:{serializedName:"properties.childResources",readOnly:!0,type:{name:"Sequence",element:{type:{name:"String"}}}},maintenanceConfigurationId:{serializedName:"properties.maintenanceConfigurationId",type:{name:"String"}}})}},um={type:{name:"Composite",className:"Server",modelProperties:Object.assign(Object.assign({},Sh.type.modelProperties),{identity:{serializedName:"identity",type:{name:"Composite",className:"ResourceIdentity"}},kind:{serializedName:"kind",readOnly:!0,type:{name:"String"}},administratorLogin:{serializedName:"properties.administratorLogin",type:{name:"String"}},administratorLoginPassword:{serializedName:"properties.administratorLoginPassword",type:{name:"String"}},version:{serializedName:"properties.version",type:{name:"String"}},state:{serializedName:"properties.state",readOnly:!0,type:{name:"String"}},fullyQualifiedDomainName:{serializedName:"properties.fullyQualifiedDomainName",readOnly:!0,type:{name:"String"}},privateEndpointConnections:{serializedName:"properties.privateEndpointConnections",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ServerPrivateEndpointConnection"}}}},minimalTlsVersion:{serializedName:"properties.minimalTlsVersion",type:{name:"String"}},publicNetworkAccess:{serializedName:"properties.publicNetworkAccess",type:{name:"String"}},workspaceFeature:{serializedName:"properties.workspaceFeature",readOnly:!0,type:{name:"String"}},primaryUserAssignedIdentityId:{serializedName:"properties.primaryUserAssignedIdentityId",type:{name:"String"}},federatedClientId:{serializedName:"properties.federatedClientId",type:{name:"Uuid"}},keyId:{serializedName:"properties.keyId",type:{name:"String"}},administrators:{serializedName:"properties.administrators",type:{name:"Composite",className:"ServerExternalAdministrator"}},restrictOutboundNetworkAccess:{serializedName:"properties.restrictOutboundNetworkAccess",type:{name:"String"}}})}},Ia={type:{name:"Composite",className:"Database",modelProperties:Object.assign(Object.assign({},Sh.type.modelProperties),{sku:{serializedName:"sku",type:{name:"Composite",className:"Sku"}},kind:{serializedName:"kind",readOnly:!0,type:{name:"String"}},managedBy:{serializedName:"managedBy",readOnly:!0,type:{name:"String"}},identity:{serializedName:"identity",type:{name:"Composite",className:"DatabaseIdentity"}},createMode:{serializedName:"properties.createMode",type:{name:"String"}},collation:{serializedName:"properties.collation",type:{name:"String"}},maxSizeBytes:{serializedName:"properties.maxSizeBytes",type:{name:"Number"}},sampleName:{serializedName:"properties.sampleName",type:{name:"String"}},elasticPoolId:{serializedName:"properties.elasticPoolId",type:{name:"String"}},sourceDatabaseId:{serializedName:"properties.sourceDatabaseId",type:{name:"String"}},status:{serializedName:"properties.status",readOnly:!0,type:{name:"String"}},databaseId:{serializedName:"properties.databaseId",readOnly:!0,type:{name:"Uuid"}},creationDate:{serializedName:"properties.creationDate",readOnly:!0,type:{name:"DateTime"}},currentServiceObjectiveName:{serializedName:"properties.currentServiceObjectiveName",readOnly:!0,type:{name:"String"}},requestedServiceObjectiveName:{serializedName:"properties.requestedServiceObjectiveName",readOnly:!0,type:{name:"String"}},defaultSecondaryLocation:{serializedName:"properties.defaultSecondaryLocation",readOnly:!0,type:{name:"String"}},failoverGroupId:{serializedName:"properties.failoverGroupId",readOnly:!0,type:{name:"String"}},restorePointInTime:{serializedName:"properties.restorePointInTime",type:{name:"DateTime"}},sourceDatabaseDeletionDate:{serializedName:"properties.sourceDatabaseDeletionDate",type:{name:"DateTime"}},recoveryServicesRecoveryPointId:{serializedName:"properties.recoveryServicesRecoveryPointId",type:{name:"String"}},longTermRetentionBackupResourceId:{serializedName:"properties.longTermRetentionBackupResourceId",type:{name:"String"}},recoverableDatabaseId:{serializedName:"properties.recoverableDatabaseId",type:{name:"String"}},restorableDroppedDatabaseId:{serializedName:"properties.restorableDroppedDatabaseId",type:{name:"String"}},catalogCollation:{serializedName:"properties.catalogCollation",type:{name:"String"}},zoneRedundant:{serializedName:"properties.zoneRedundant",type:{name:"Boolean"}},licenseType:{serializedName:"properties.licenseType",type:{name:"String"}},maxLogSizeBytes:{serializedName:"properties.maxLogSizeBytes",readOnly:!0,type:{name:"Number"}},earliestRestoreDate:{serializedName:"properties.earliestRestoreDate",readOnly:!0,type:{name:"DateTime"}},readScale:{serializedName:"properties.readScale",type:{name:"String"}},highAvailabilityReplicaCount:{serializedName:"properties.highAvailabilityReplicaCount",type:{name:"Number"}},secondaryType:{serializedName:"properties.secondaryType",type:{name:"String"}},currentSku:{serializedName:"properties.currentSku",type:{name:"Composite",className:"Sku"}},autoPauseDelay:{serializedName:"properties.autoPauseDelay",type:{name:"Number"}},currentBackupStorageRedundancy:{serializedName:"properties.currentBackupStorageRedundancy",readOnly:!0,type:{name:"String"}},requestedBackupStorageRedundancy:{serializedName:"properties.requestedBackupStorageRedundancy",type:{name:"String"}},minCapacity:{serializedName:"properties.minCapacity",type:{name:"Number"}},pausedDate:{serializedName:"properties.pausedDate",readOnly:!0,type:{name:"DateTime"}},resumedDate:{serializedName:"properties.resumedDate",readOnly:!0,type:{name:"DateTime"}},maintenanceConfigurationId:{serializedName:"properties.maintenanceConfigurationId",type:{name:"String"}},isLedgerOn:{serializedName:"properties.isLedgerOn",type:{name:"Boolean"}},isInfraEncryptionEnabled:{serializedName:"properties.isInfraEncryptionEnabled",readOnly:!0,type:{name:"Boolean"}},federatedClientId:{serializedName:"properties.federatedClientId",type:{name:"Uuid"}},primaryDelegatedIdentityClientId:{serializedName:"properties.primaryDelegatedIdentityClientId",type:{name:"Uuid"}}})}},dm={type:{name:"Composite",className:"ManagedInstance",modelProperties:Object.assign(Object.assign({},Sh.type.modelProperties),{identity:{serializedName:"identity",type:{name:"Composite",className:"ResourceIdentity"}},sku:{serializedName:"sku",type:{name:"Composite",className:"Sku"}},provisioningState:{serializedName:"properties.provisioningState",readOnly:!0,type:{name:"String"}},managedInstanceCreateMode:{serializedName:"properties.managedInstanceCreateMode",type:{name:"String"}},fullyQualifiedDomainName:{serializedName:"properties.fullyQualifiedDomainName",readOnly:!0,type:{name:"String"}},administratorLogin:{serializedName:"properties.administratorLogin",type:{name:"String"}},administratorLoginPassword:{serializedName:"properties.administratorLoginPassword",type:{name:"String"}},subnetId:{serializedName:"properties.subnetId",type:{name:"String"}},state:{serializedName:"properties.state",readOnly:!0,type:{name:"String"}},licenseType:{serializedName:"properties.licenseType",type:{name:"String"}},vCores:{serializedName:"properties.vCores",type:{name:"Number"}},storageSizeInGB:{serializedName:"properties.storageSizeInGB",type:{name:"Number"}},collation:{serializedName:"properties.collation",type:{name:"String"}},dnsZone:{serializedName:"properties.dnsZone",readOnly:!0,type:{name:"String"}},dnsZonePartner:{serializedName:"properties.dnsZonePartner",type:{name:"String"}},publicDataEndpointEnabled:{serializedName:"properties.publicDataEndpointEnabled",type:{name:"Boolean"}},sourceManagedInstanceId:{serializedName:"properties.sourceManagedInstanceId",type:{name:"String"}},restorePointInTime:{serializedName:"properties.restorePointInTime",type:{name:"DateTime"}},proxyOverride:{serializedName:"properties.proxyOverride",type:{name:"String"}},timezoneId:{serializedName:"properties.timezoneId",type:{name:"String"}},instancePoolId:{serializedName:"properties.instancePoolId",type:{name:"String"}},maintenanceConfigurationId:{serializedName:"properties.maintenanceConfigurationId",type:{name:"String"}},privateEndpointConnections:{serializedName:"properties.privateEndpointConnections",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ManagedInstancePecProperty"}}}},minimalTlsVersion:{serializedName:"properties.minimalTlsVersion",type:{name:"String"}},currentBackupStorageRedundancy:{serializedName:"properties.currentBackupStorageRedundancy",readOnly:!0,type:{name:"String"}},requestedBackupStorageRedundancy:{serializedName:"properties.requestedBackupStorageRedundancy",type:{name:"String"}},zoneRedundant:{serializedName:"properties.zoneRedundant",type:{name:"Boolean"}},primaryUserAssignedIdentityId:{serializedName:"properties.primaryUserAssignedIdentityId",type:{name:"String"}},keyId:{serializedName:"properties.keyId",type:{name:"String"}},administrators:{serializedName:"properties.administrators",type:{name:"Composite",className:"ManagedInstanceExternalAdministrator"}},servicePrincipal:{serializedName:"properties.servicePrincipal",type:{name:"Composite",className:"ServicePrincipal"}}})}},DRe={type:{name:"Composite",className:"RestorableDroppedManagedDatabase",modelProperties:Object.assign(Object.assign({},Sh.type.modelProperties),{databaseName:{serializedName:"properties.databaseName",readOnly:!0,type:{name:"String"}},creationDate:{serializedName:"properties.creationDate",readOnly:!0,type:{name:"DateTime"}},deletionDate:{serializedName:"properties.deletionDate",readOnly:!0,type:{name:"DateTime"}},earliestRestoreDate:{serializedName:"properties.earliestRestoreDate",readOnly:!0,type:{name:"DateTime"}}})}},TE={type:{name:"Composite",className:"FirewallRule",modelProperties:Object.assign(Object.assign({},hRe.type.modelProperties),{startIpAddress:{serializedName:"properties.startIpAddress",type:{name:"String"}},endIpAddress:{serializedName:"properties.endIpAddress",type:{name:"String"}}})}},Et=Object.freeze({__proto__:null,Resource:_7,RecoverableDatabaseListResult:DIe,DataMaskingRuleListResult:MIe,GeoBackupPolicyListResult:kIe,MetricListResult:S7,Metric:Qyt,MetricName:Yyt,MetricValue:Xyt,MetricDefinitionListResult:C7,MetricDefinition:Jyt,MetricAvailability:Zyt,UnlinkParameters:LIe,ServerCommunicationLinkListResult:qIe,ServiceObjectiveListResult:zIe,ElasticPoolActivityListResult:FIe,ElasticPoolDatabaseActivityListResult:jIe,ServerUsageListResult:UIe,ServerUsage:evt,ExtendedDatabaseBlobAuditingPolicyListResult:P7,ExtendedServerBlobAuditingPolicyListResult:w7,ServerBlobAuditingPolicyListResult:E7,DatabaseBlobAuditingPolicyListResult:T7,RecommendedActionStateInfo:tvt,RecommendedActionImplementationInfo:rvt,RecommendedActionErrorInfo:nvt,RecommendedActionImpactRecord:ivt,RecommendedActionMetricInfo:svt,AutomaticTuningOptions:ovt,DatabaseColumnListResult:ig,DatabaseSchemaListResult:mN,SystemData:avt,DatabaseSecurityAlertListResult:I7,DatabaseTableListResult:hN,DatabaseVulnerabilityAssessmentRuleBaselineItem:cvt,VulnerabilityAssessmentRecurringScansProperties:lvt,DatabaseVulnerabilityAssessmentListResult:fN,VulnerabilityAssessmentScanRecordListResult:gN,VulnerabilityAssessmentScanError:uvt,DataWarehouseUserActivitiesListResult:R7,DeletedServerListResult:yN,ElasticPoolOperationListResult:x7,ElasticPoolListResult:O7,Sku:dvt,ElasticPoolPerDatabaseSettings:pvt,ElasticPoolUpdate:BIe,EncryptionProtectorListResult:A7,FailoverGroupReadWriteEndpoint:mvt,FailoverGroupReadOnlyEndpoint:hvt,PartnerInfo:fvt,FailoverGroupUpdate:GIe,FailoverGroupListResult:N7,ResourceWithWritableName:$Ie,FirewallRuleListResult:D7,FirewallRuleList:VIe,InstanceFailoverGroupReadWriteEndpoint:gvt,InstanceFailoverGroupReadOnlyEndpoint:yvt,PartnerRegionInfo:vvt,ManagedInstancePairInfo:bvt,InstanceFailoverGroupListResult:M7,InstancePoolUpdate:HIe,InstancePoolListResult:vN,JobAgentListResult:k7,JobAgentUpdate:WIe,JobCredentialListResult:L7,JobExecutionListResult:pm,JobExecutionTarget:_vt,JobListResult:q7,JobSchedule:Svt,JobStepListResult:bN,JobStepAction:Cvt,JobStepOutput:Pvt,JobStepExecutionOptions:wvt,JobTargetGroupListResult:z7,JobTarget:Evt,JobVersionListResult:F7,LocationCapabilities:KIe,ServerVersionCapability:Tvt,EditionCapability:Ivt,ServiceObjectiveCapability:Rvt,MaxSizeRangeCapability:xvt,MaxSizeCapability:Ovt,LogSizeCapability:Avt,PerformanceLevelCapability:Nvt,LicenseTypeCapability:Dvt,AutoPauseDelayTimeRange:Mvt,MinCapacityCapability:kvt,MaintenanceConfigurationCapability:Lvt,ReadScaleCapability:qvt,StorageCapability:zvt,ElasticPoolEditionCapability:Fvt,ElasticPoolPerformanceLevelCapability:jvt,ElasticPoolPerDatabaseMaxPerformanceLevelCapability:Uvt,ElasticPoolPerDatabaseMinPerformanceLevelCapability:Bvt,ManagedInstanceVersionCapability:Gvt,ManagedInstanceEditionCapability:$vt,ManagedInstanceFamilyCapability:Vvt,ManagedInstanceVcoresCapability:Hvt,ManagedInstanceMaintenanceConfigurationCapability:Wvt,InstancePoolEditionCapability:Kvt,InstancePoolFamilyCapability:Qvt,InstancePoolVcoresCapability:Yvt,LongTermRetentionPolicyListResult:j7,MaintenanceWindowTimeRange:Xvt,ManagedBackupShortTermRetentionPolicyListResult:_N,ManagedInstanceQueryStatistics:U7,QueryStatisticsProperties:Jvt,QueryMetricInterval:Zvt,QueryMetricProperties:ebt,ManagedDatabaseListResult:SN,ManagedDatabaseUpdate:QIe,CompleteDatabaseRestoreDefinition:YIe,ManagedDatabaseSecurityAlertPolicyListResult:B7,SecurityEventCollection:G7,SecurityEventSqlInjectionAdditionalProperties:tbt,SensitivityLabelListResult:sg,SensitivityLabelUpdateList:XIe,RecommendedSensitivityLabelUpdateList:JIe,ManagedTransparentDataEncryptionListResult:$7,ManagedInstanceAdministratorListResult:V7,ManagedInstanceAzureADOnlyAuthListResult:H7,ManagedInstanceEncryptionProtectorListResult:W7,ManagedInstanceKeyListResult:K7,ManagedInstanceLongTermRetentionPolicyListResult:Q7,ManagedInstanceOperationListResult:Y7,ManagedInstanceOperationParametersPair:rbt,UpsertManagedServerOperationParameters:nbt,ManagedInstanceOperationSteps:ibt,UpsertManagedServerOperationStep:sbt,ManagedInstancePrivateEndpointConnectionProperties:obt,ManagedInstancePrivateEndpointProperty:abt,ManagedInstancePrivateLinkServiceConnectionStateProperty:cbt,ManagedInstancePrivateEndpointConnectionListResult:X7,ManagedInstancePrivateLinkListResult:J7,ManagedInstancePrivateLinkProperties:lbt,ManagedInstanceVulnerabilityAssessmentListResult:Z7,ManagedServerSecurityAlertPolicyListResult:eZ,OperationListResult:tZ,Operation:ubt,OperationDisplay:dbt,OperationsHealthListResult:rZ,PrivateEndpointConnectionProperties:pbt,PrivateEndpointProperty:mbt,PrivateLinkServiceConnectionStateProperty:hbt,PrivateEndpointConnectionListResult:nZ,PrivateLinkResourceListResult:iZ,PrivateLinkResourceProperties:fbt,RecoverableManagedDatabaseListResult:sZ,RestorePointListResult:oZ,CreateDatabaseRestorePointDefinition:ZIe,AutomaticTuningServerOptions:gbt,AdministratorListResult:aZ,AzureADOnlyAuthListResult:cZ,ServerDevOpsAuditSettingsListResult:lZ,ServerDnsAliasListResult:uZ,ServerDnsAliasAcquisition:eRe,ServerKeyListResult:dZ,ServerOperationListResult:pZ,LogicalServerSecurityAlertPolicyListResult:mZ,ServerInfo:ybt,ServerTrustGroupListResult:CN,ServerVulnerabilityAssessmentListResult:hZ,SubscriptionUsageListResult:fZ,SyncAgentListResult:gZ,SyncAgentKeyProperties:tRe,SyncAgentLinkedDatabaseListResult:yZ,SyncDatabaseIdListResult:vZ,SyncDatabaseIdProperties:vbt,SyncFullSchemaPropertiesListResult:PN,SyncFullSchemaProperties:bbt,SyncFullSchemaTable:_bt,SyncFullSchemaTableColumn:Sbt,SyncGroupLogListResult:bZ,SyncGroupLogProperties:Cbt,SyncGroupSchema:Pbt,SyncGroupSchemaTable:wbt,SyncGroupSchemaTableColumn:Ebt,SyncGroupListResult:_Z,SyncMemberListResult:SZ,TimeZoneListResult:CZ,VirtualClusterListResult:wN,VirtualClusterUpdate:rRe,VirtualNetworkRuleListResult:PZ,WorkloadClassifierListResult:wZ,WorkloadGroupListResult:EZ,LogicalDatabaseTransparentDataEncryptionListResult:TZ,BackupShortTermRetentionPolicyListResult:IZ,ImportExportExtensionsOperationListResult:RZ,DatabaseOperationListResult:xZ,DatabaseUsageListResult:OZ,LedgerDigestUploadsListResult:AZ,OutboundFirewallRuleListResult:NZ,ReplicationLinkListResult:EN,ServerListResult:TN,ResourceIdentity:Tbt,UserIdentity:Ibt,ServerPrivateEndpointConnection:Rbt,ServerExternalAdministrator:xbt,ServerUpdate:nRe,ImportNewDatabaseDefinition:iRe,NetworkIsolationSettings:Obt,PrivateEndpointConnectionRequestStatus:Abt,CheckNameAvailabilityRequest:sRe,CheckNameAvailabilityResponse:oRe,UsageListResult:DZ,Usage:Nbt,Name:Dbt,DatabaseListResult:kS,DatabaseIdentity:Mbt,DatabaseUserIdentity:kbt,Delegation:Lbt,DatabaseUpdate:aRe,ResourceMoveDefinition:cRe,ImportExistingDatabaseDefinition:lRe,ExportDatabaseDefinition:uRe,CopyLongTermRetentionBackupParameters:dRe,UpdateLongTermRetentionBackupParameters:pRe,LongTermRetentionBackupListResult:Vu,ManagedInstanceLongTermRetentionBackupListResult:Hu,ManagedInstanceListResult:LS,ManagedInstancePecProperty:qbt,ManagedInstanceExternalAdministrator:zbt,ServicePrincipal:Fbt,ManagedInstanceUpdate:mRe,TopQueriesListResult:MZ,TopQueries:jbt,RestorableDroppedDatabaseListResult:kZ,RestorableDroppedManagedDatabaseListResult:LZ,ServerConnectionPolicyListResult:qZ,SloUsageMetric:Ubt,OperationImpact:Bbt,SecurityEventsFilterParameters:Gbt,ProxyResource:Xt,TrackedResource:Sh,ProxyResourceWithWritableName:hRe,RecoverableDatabase:fRe,DataMaskingPolicy:EU,DataMaskingRule:wU,GeoBackupPolicy:eN,ServerCommunicationLink:uS,ServiceObjective:gRe,ElasticPoolActivity:$bt,ElasticPoolDatabaseActivity:Vbt,ExtendedDatabaseBlobAuditingPolicy:tN,ExtendedServerBlobAuditingPolicy:dS,ServerBlobAuditingPolicy:pS,DatabaseBlobAuditingPolicy:rN,RecommendedAction:TU,Advisor:IE,DatabaseAutomaticTuning:IU,DatabaseColumn:zZ,DatabaseSchema:FZ,DatabaseSecurityAlertPolicy:nN,DatabaseTable:jZ,DatabaseVulnerabilityAssessmentRuleBaseline:RE,DatabaseVulnerabilityAssessment:mv,VulnerabilityAssessmentScanRecord:UZ,DatabaseVulnerabilityAssessmentScansExport:iN,DataWarehouseUserActivities:yRe,DeletedServer:CE,ElasticPoolOperation:Hbt,EncryptionProtector:mS,FailoverGroup:Ta,InstanceFailoverGroup:Ol,JobCredential:sN,JobExecution:Hd,Job:oN,JobStep:EE,JobTargetGroup:aN,JobVersion:vRe,LongTermRetentionPolicy:hS,MaintenanceWindowOptions:bRe,MaintenanceWindows:BZ,ManagedBackupShortTermRetentionPolicy:pa,ManagedInstanceQuery:_Re,QueryStatistics:Wbt,ManagedDatabaseRestoreDetailsResult:SRe,ManagedDatabaseSecurityAlertPolicy:cN,SecurityEvent:Kbt,SensitivityLabel:hv,SensitivityLabelUpdate:Qbt,RecommendedSensitivityLabelUpdate:Ybt,ManagedTransparentDataEncryption:lN,ManagedInstanceAdministrator:fS,ManagedInstanceAzureADOnlyAuthentication:gS,ManagedInstanceEncryptionProtector:yS,ManagedInstanceKey:vS,ManagedInstanceLongTermRetentionPolicy:bS,ManagedInstanceOperation:CRe,ManagedInstancePrivateEndpointConnection:_S,ManagedInstancePrivateLink:PRe,TdeCertificate:wRe,ManagedInstanceVulnerabilityAssessment:uN,ManagedServerSecurityAlertPolicy:SS,OperationsHealth:Xbt,PrivateEndpointConnection:CS,PrivateLinkResource:ERe,RecoverableManagedDatabase:TRe,RestorePoint:PE,ServerAutomaticTuning:RU,ServerAzureADAdministrator:PS,ServerAzureADOnlyAuthentication:wS,ServerDevOpsAuditingSettings:ES,ServerDnsAlias:_h,ServerKey:TS,ServerOperation:Jbt,ServerSecurityAlertPolicy:IS,ServerTrustGroup:RS,ServerVulnerabilityAssessment:dN,SqlAgentConfiguration:xU,SubscriptionUsage:IRe,SyncAgent:xS,SyncAgentLinkedDatabase:Zbt,SyncGroup:rm,SyncMember:nm,TimeZone:RRe,UpdateManagedInstanceDnsServersOperation:xRe,VirtualNetworkRule:OS,WorkloadClassifier:AS,WorkloadGroup:NS,LogicalDatabaseTransparentDataEncryption:pN,BackupShortTermRetentionPolicy:im,DatabaseExtensions:ORe,ImportExportExtensionsOperationResult:ZA,DatabaseOperation:e_t,DatabaseUsage:t_t,LedgerDigestUploads:sm,OutboundFirewallRule:DS,ReplicationLink:ARe,ImportExportOperationResult:$u,LongTermRetentionBackupOperationResult:Ec,LongTermRetentionBackup:GZ,ManagedInstanceLongTermRetentionBackup:$Z,RestorableDroppedDatabase:NRe,ServerConnectionPolicy:MS,ElasticPool:om,InstancePool:am,JobAgent:cm,ManagedDatabase:lm,VirtualCluster:wE,Server:um,Database:Ia,ManagedInstance:dm,RestorableDroppedManagedDatabase:DRe,FirewallRule:TE}),U={parameterPath:"accept",mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Accept",type:{name:"String"}}},M={parameterPath:"$host",mapper:{serializedName:"$host",required:!0,type:{name:"String"}},skipEncoding:!0},Ls={parameterPath:"apiVersion",mapper:{defaultValue:"2014-04-01",isConstant:!0,serializedName:"api-version",type:{name:"String"}}},k={parameterPath:"subscriptionId",mapper:{serializedName:"subscriptionId",required:!0,type:{name:"String"}}},q={parameterPath:"resourceGroupName",mapper:{serializedName:"resourceGroupName",required:!0,type:{name:"String"}}},X={parameterPath:"serverName",mapper:{serializedName:"serverName",required:!0,type:{name:"String"}}},ve={parameterPath:"databaseName",mapper:{serializedName:"databaseName",required:!0,type:{name:"String"}}},Vt={parameterPath:["options","contentType"],mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},r_t={parameterPath:"parameters",mapper:EU},OU={parameterPath:"dataMaskingPolicyName",mapper:{defaultValue:"Default",isConstant:!0,serializedName:"dataMaskingPolicyName",type:{name:"String"}}},n_t={parameterPath:"parameters",mapper:wU},i_t={parameterPath:"dataMaskingRuleName",mapper:{serializedName:"dataMaskingRuleName",required:!0,type:{name:"String"}}},s_t={parameterPath:"parameters",mapper:eN},MRe={parameterPath:"geoBackupPolicyName",mapper:{serializedName:"geoBackupPolicyName",required:!0,type:{name:"String"}}},kRe={parameterPath:"filter",mapper:{serializedName:"$filter",required:!0,type:{name:"String"}}},Ch={parameterPath:["options","skipToken"],mapper:{serializedName:"$skipToken",type:{name:"String"}}},wr={parameterPath:"apiVersion",mapper:{defaultValue:"2021-05-01-preview",isConstant:!0,serializedName:"api-version",type:{name:"String"}}},o_t={parameterPath:"parameters",mapper:Ia},a_t={parameterPath:"parameters",mapper:aRe},du={parameterPath:"elasticPoolName",mapper:{serializedName:"elasticPoolName",required:!0,type:{name:"String"}}},LRe={parameterPath:["options","replicaType"],mapper:{serializedName:"replicaType",type:{name:"String"}}},c_t={parameterPath:"parameters",mapper:cRe},l_t={parameterPath:"parameters",mapper:lRe},u_t={parameterPath:"parameters",mapper:uRe},ft={parameterPath:"nextLink",mapper:{serializedName:"nextLink",required:!0,type:{name:"String"}},skipEncoding:!0},pu={parameterPath:["options","skip"],mapper:{serializedName:"$skip",type:{name:"Number"}}},$={parameterPath:"apiVersion",mapper:{defaultValue:"2020-11-01-preview",isConstant:!0,serializedName:"api-version",type:{name:"String"}}},d_t={parameterPath:"parameters",mapper:om},p_t={parameterPath:"parameters",mapper:BIe},IN={parameterPath:"linkId",mapper:{serializedName:"linkId",required:!0,type:{name:"String"}}},m_t={parameterPath:"parameters",mapper:LIe},An={parameterPath:"apiVersion",mapper:{defaultValue:"2021-02-01-preview",isConstant:!0,serializedName:"api-version",type:{name:"String"}}},VZ={parameterPath:"communicationLinkName",mapper:{serializedName:"communicationLinkName",required:!0,type:{name:"String"}}},h_t={parameterPath:"parameters",mapper:uS},f_t={parameterPath:"serviceObjectiveName",mapper:{serializedName:"serviceObjectiveName",required:!0,type:{name:"String"}}},fv={parameterPath:"blobAuditingPolicyName",mapper:{defaultValue:"default",isConstant:!0,serializedName:"blobAuditingPolicyName",type:{name:"String"}}},g_t={parameterPath:"parameters",mapper:tN},y_t={parameterPath:"parameters",mapper:dS},v_t={parameterPath:"parameters",mapper:pS},b_t={parameterPath:"parameters",mapper:rN},mu={parameterPath:["options","expand"],mapper:{serializedName:"$expand",type:{name:"String"}}},qS={parameterPath:"advisorName",mapper:{serializedName:"advisorName",required:!0,type:{name:"String"}}},qRe={parameterPath:"parameters",mapper:IE},__t={parameterPath:"parameters",mapper:IU},AU={parameterPath:["options","schema"],mapper:{serializedName:"schema",type:{name:"Sequence",element:{type:{name:"String"}}}},collectionFormat:"Multi"},NU={parameterPath:["options","table"],mapper:{serializedName:"table",type:{name:"Sequence",element:{type:{name:"String"}}}},collectionFormat:"Multi"},DU={parameterPath:["options","column"],mapper:{serializedName:"column",type:{name:"Sequence",element:{type:{name:"String"}}}},collectionFormat:"Multi"},MU={parameterPath:["options","orderBy"],mapper:{serializedName:"orderBy",type:{name:"Sequence",element:{type:{name:"String"}}}},collectionFormat:"Multi"},xE={parameterPath:["options","skiptoken"],mapper:{serializedName:"$skiptoken",type:{name:"String"}}},eo={parameterPath:"schemaName",mapper:{serializedName:"schemaName",required:!0,type:{name:"String"}}},Wa={parameterPath:"tableName",mapper:{serializedName:"tableName",required:!0,type:{name:"String"}}},to={parameterPath:["options","filter"],mapper:{serializedName:"$filter",type:{name:"String"}}},Wd={parameterPath:"columnName",mapper:{serializedName:"columnName",required:!0,type:{name:"String"}}},zRe={parameterPath:"recommendedActionName",mapper:{serializedName:"recommendedActionName",required:!0,type:{name:"String"}}},S_t={parameterPath:"parameters",mapper:TU},gv={parameterPath:"securityAlertPolicyName",mapper:{serializedName:"securityAlertPolicyName",required:!0,type:{name:"String"}}},C_t={parameterPath:"parameters",mapper:nN},bs={parameterPath:"vulnerabilityAssessmentName",mapper:{serializedName:"vulnerabilityAssessmentName",required:!0,type:{name:"String"}}},OE={parameterPath:"ruleId",mapper:{serializedName:"ruleId",required:!0,type:{name:"String"}}},AE={parameterPath:"baselineName",mapper:{serializedName:"baselineName",required:!0,type:{name:"Enum",allowedValues:["master","default"]}}},FRe={parameterPath:"parameters",mapper:RE},jRe={parameterPath:"parameters",mapper:mv},NE={parameterPath:"scanId",mapper:{serializedName:"scanId",required:!0,type:{name:"String"}}},P_t={parameterPath:"dataWarehouseUserActivityName",mapper:{serializedName:"dataWarehouseUserActivityName",required:!0,type:{name:"String"}}},jr={parameterPath:"locationName",mapper:{serializedName:"locationName",required:!0,type:{name:"String"}}},URe={parameterPath:"deletedServerName",mapper:{serializedName:"deletedServerName",required:!0,type:{name:"String"}}},kU={parameterPath:"operationId",mapper:{serializedName:"operationId",required:!0,type:{name:"Uuid"}}},DE={parameterPath:"encryptionProtectorName",mapper:{serializedName:"encryptionProtectorName",required:!0,type:{name:"String"}}},w_t={parameterPath:"parameters",mapper:mS},mm={parameterPath:"failoverGroupName",mapper:{serializedName:"failoverGroupName",required:!0,type:{name:"String"}}},E_t={parameterPath:"parameters",mapper:Ta},T_t={parameterPath:"parameters",mapper:GIe},HZ={parameterPath:"firewallRuleName",mapper:{serializedName:"firewallRuleName",required:!0,type:{name:"String"}}},I_t={parameterPath:"parameters",mapper:TE},R_t={parameterPath:"parameters",mapper:VIe},x_t={parameterPath:"parameters",mapper:Ol},yv={parameterPath:"instancePoolName",mapper:{serializedName:"instancePoolName",required:!0,type:{name:"String"}}},O_t={parameterPath:"parameters",mapper:am},A_t={parameterPath:"parameters",mapper:HIe},Rn={parameterPath:"jobAgentName",mapper:{serializedName:"jobAgentName",required:!0,type:{name:"String"}}},N_t={parameterPath:"parameters",mapper:cm},D_t={parameterPath:"parameters",mapper:WIe},WZ={parameterPath:"credentialName",mapper:{serializedName:"credentialName",required:!0,type:{name:"String"}}},M_t={parameterPath:"parameters",mapper:sN},Ph={parameterPath:["options","createTimeMin"],mapper:{serializedName:"createTimeMin",type:{name:"DateTime"}}},wh={parameterPath:["options","createTimeMax"],mapper:{serializedName:"createTimeMax",type:{name:"DateTime"}}},Eh={parameterPath:["options","endTimeMin"],mapper:{serializedName:"endTimeMin",type:{name:"DateTime"}}},Th={parameterPath:["options","endTimeMax"],mapper:{serializedName:"endTimeMax",type:{name:"DateTime"}}},Ih={parameterPath:["options","isActive"],mapper:{serializedName:"isActive",type:{name:"Boolean"}}},Kd={parameterPath:["options","top"],mapper:{serializedName:"$top",type:{name:"Number"}}},_s={parameterPath:"jobName",mapper:{serializedName:"jobName",required:!0,type:{name:"String"}}},hm={parameterPath:"jobExecutionId",mapper:{serializedName:"jobExecutionId",required:!0,type:{name:"Uuid"}}},k_t={parameterPath:"parameters",mapper:oN},vv={parameterPath:"stepName",mapper:{serializedName:"stepName",required:!0,type:{name:"String"}}},LU={parameterPath:"jobVersion",mapper:{serializedName:"jobVersion",required:!0,type:{name:"Number"}}},L_t={parameterPath:"parameters",mapper:EE},q_t={parameterPath:"targetId",mapper:{serializedName:"targetId",required:!0,type:{name:"Uuid"}}},KZ={parameterPath:"targetGroupName",mapper:{serializedName:"targetGroupName",required:!0,type:{name:"String"}}},z_t={parameterPath:"parameters",mapper:aN},F_t={parameterPath:["options","include"],mapper:{serializedName:"include",type:{name:"String"}}},BRe={parameterPath:"policyName",mapper:{serializedName:"policyName",required:!0,type:{name:"String"}}},j_t={parameterPath:"parameters",mapper:hS},U_t={parameterPath:"maintenanceWindowOptionsName",mapper:{serializedName:"maintenanceWindowOptionsName",required:!0,type:{name:"String"}}},GRe={parameterPath:"maintenanceWindowName",mapper:{serializedName:"maintenanceWindowName",required:!0,type:{name:"String"}}},B_t={parameterPath:"parameters",mapper:BZ},st={parameterPath:"managedInstanceName",mapper:{serializedName:"managedInstanceName",required:!0,type:{name:"String"}}},ME={parameterPath:"policyName",mapper:{serializedName:"policyName",required:!0,type:{name:"String"}}},qU={parameterPath:"parameters",mapper:pa},QZ={parameterPath:"queryId",mapper:{serializedName:"queryId",required:!0,type:{name:"String"}}},zU={parameterPath:["options","startTime"],mapper:{serializedName:"startTime",type:{name:"String"}}},FU={parameterPath:["options","endTime"],mapper:{serializedName:"endTime",type:{name:"String"}}},jU={parameterPath:["options","interval"],mapper:{serializedName:"interval",type:{name:"String"}}},G_t={parameterPath:"restoreDetailsName",mapper:{serializedName:"restoreDetailsName",required:!0,type:{name:"String"}}},$_t={parameterPath:"parameters",mapper:lm},V_t={parameterPath:"parameters",mapper:QIe},H_t={parameterPath:"parameters",mapper:YIe},W_t={parameterPath:"parameters",mapper:cN},$Re={parameterPath:"sensitivityLabelSource",mapper:{serializedName:"sensitivityLabelSource",required:!0,type:{name:"Enum",allowedValues:["current","recommended"]}}},VRe={parameterPath:"parameters",mapper:hv},UU={parameterPath:"sensitivityLabelSource",mapper:{defaultValue:"current",isConstant:!0,serializedName:"sensitivityLabelSource",type:{name:"String"}}},BU={parameterPath:"sensitivityLabelSource",mapper:{defaultValue:"recommended",isConstant:!0,serializedName:"sensitivityLabelSource",type:{name:"String"}}},GU={parameterPath:["options","count"],mapper:{serializedName:"$count",type:{name:"Boolean"}}},HRe={parameterPath:"parameters",mapper:XIe},$U={parameterPath:["options","includeDisabledRecommendations"],mapper:{serializedName:"includeDisabledRecommendations",type:{name:"Boolean"}}},WRe={parameterPath:"parameters",mapper:JIe},VU={parameterPath:"tdeName",mapper:{serializedName:"tdeName",required:!0,type:{name:"String"}}},K_t={parameterPath:"parameters",mapper:lN},kE={parameterPath:"administratorName",mapper:{serializedName:"administratorName",required:!0,type:{name:"String"}}},Q_t={parameterPath:"parameters",mapper:fS},LE={parameterPath:"authenticationName",mapper:{serializedName:"authenticationName",required:!0,type:{name:"String"}}},Y_t={parameterPath:"parameters",mapper:gS},X_t={parameterPath:"parameters",mapper:yS},qE={parameterPath:"keyName",mapper:{serializedName:"keyName",required:!0,type:{name:"String"}}},J_t={parameterPath:"parameters",mapper:vS},KRe={parameterPath:"policyName",mapper:{serializedName:"policyName",required:!0,type:{name:"String"}}},Z_t={parameterPath:"parameters",mapper:bS},zE={parameterPath:"privateEndpointConnectionName",mapper:{serializedName:"privateEndpointConnectionName",required:!0,type:{name:"String"}}},eSt={parameterPath:"parameters",mapper:_S},QRe={parameterPath:"groupName",mapper:{serializedName:"groupName",required:!0,type:{name:"String"}}},YRe={parameterPath:"parameters",mapper:wRe},tSt={parameterPath:"parameters",mapper:uN},zS={parameterPath:"restorableDroppedDatabaseId",mapper:{serializedName:"restorableDroppedDatabaseId",required:!0,type:{name:"String"}}},rSt={parameterPath:"parameters",mapper:SS},nSt={parameterPath:"parameters",mapper:CS},iSt={parameterPath:"recoverableDatabaseName",mapper:{serializedName:"recoverableDatabaseName",required:!0,type:{name:"String"}}},sSt={parameterPath:"parameters",mapper:ZIe},XRe={parameterPath:"restorePointName",mapper:{serializedName:"restorePointName",required:!0,type:{name:"String"}}},oSt={parameterPath:"parameters",mapper:RU},aSt={parameterPath:"parameters",mapper:PS},cSt={parameterPath:"parameters",mapper:wS},JRe={parameterPath:"devOpsAuditingSettingsName",mapper:{serializedName:"devOpsAuditingSettingsName",required:!0,type:{name:"String"}}},lSt={parameterPath:"parameters",mapper:ES},HU={parameterPath:"dnsAliasName",mapper:{serializedName:"dnsAliasName",required:!0,type:{name:"String"}}},uSt={parameterPath:"parameters",mapper:eRe},dSt={parameterPath:"parameters",mapper:TS},pSt={parameterPath:"parameters",mapper:IS},YZ={parameterPath:"serverTrustGroupName",mapper:{serializedName:"serverTrustGroupName",required:!0,type:{name:"String"}}},mSt={parameterPath:"parameters",mapper:RS},hSt={parameterPath:"parameters",mapper:dN},fSt={parameterPath:"parameters",mapper:xU},gSt={parameterPath:"usageName",mapper:{serializedName:"usageName",required:!0,type:{name:"String"}}},FE={parameterPath:"syncAgentName",mapper:{serializedName:"syncAgentName",required:!0,type:{name:"String"}}},ySt={parameterPath:"parameters",mapper:xS},ma={parameterPath:"syncGroupName",mapper:{serializedName:"syncGroupName",required:!0,type:{name:"String"}}},ZRe={parameterPath:"startTime",mapper:{serializedName:"startTime",required:!0,type:{name:"String"}}},exe={parameterPath:"endTime",mapper:{serializedName:"endTime",required:!0,type:{name:"String"}}},txe={parameterPath:"typeParam",mapper:{serializedName:"type",required:!0,type:{name:"String"}}},rxe={parameterPath:["options","continuationToken"],mapper:{serializedName:"continuationToken",type:{name:"String"}}},nxe={parameterPath:"parameters",mapper:rm},FS={parameterPath:"syncMemberName",mapper:{serializedName:"syncMemberName",required:!0,type:{name:"String"}}},ixe={parameterPath:"parameters",mapper:nm},vSt={parameterPath:"timeZoneId",mapper:{serializedName:"timeZoneId",required:!0,type:{name:"String"}}},WU={parameterPath:"virtualClusterName",mapper:{serializedName:"virtualClusterName",required:!0,type:{name:"String"}}},bSt={parameterPath:"parameters",mapper:rRe},XZ={parameterPath:"virtualNetworkRuleName",mapper:{serializedName:"virtualNetworkRuleName",required:!0,type:{name:"String"}}},_St={parameterPath:"parameters",mapper:OS},bv={parameterPath:"workloadGroupName",mapper:{serializedName:"workloadGroupName",required:!0,type:{name:"String"}}},JZ={parameterPath:"workloadClassifierName",mapper:{serializedName:"workloadClassifierName",required:!0,type:{name:"String"}}},SSt={parameterPath:"parameters",mapper:AS},CSt={parameterPath:"parameters",mapper:NS},PSt={parameterPath:"parameters",mapper:pN},ZZ={parameterPath:"policyName",mapper:{serializedName:"policyName",required:!0,type:{name:"String"}}},sxe={parameterPath:"parameters",mapper:im},oxe={parameterPath:"extensionName",mapper:{serializedName:"extensionName",required:!0,type:{name:"String"}}},wSt={parameterPath:"parameters",mapper:ORe},eee={parameterPath:"ledgerDigestUploads",mapper:{serializedName:"ledgerDigestUploads",required:!0,type:{name:"String"}}},ESt={parameterPath:"parameters",mapper:sm},tee={parameterPath:"outboundRuleFqdn",mapper:{serializedName:"outboundRuleFqdn",required:!0,type:{name:"String"}}},TSt={parameterPath:"parameters",mapper:DS},ISt={parameterPath:"parameters",mapper:um},RSt={parameterPath:"parameters",mapper:nRe},xSt={parameterPath:"parameters",mapper:iRe},OSt={parameterPath:"parameters",mapper:sRe},axe={parameterPath:["options","expandChildren"],mapper:{serializedName:"expandChildren",type:{name:"Boolean"}}},cxe={parameterPath:"parameters",mapper:dRe},Xc={parameterPath:"longTermRetentionServerName",mapper:{serializedName:"longTermRetentionServerName",required:!0,type:{name:"String"}}},Qd={parameterPath:"longTermRetentionDatabaseName",mapper:{serializedName:"longTermRetentionDatabaseName",required:!0,type:{name:"String"}}},Yd={parameterPath:"backupName",mapper:{serializedName:"backupName",required:!0,type:{name:"String"}}},lxe={parameterPath:"parameters",mapper:pRe},ro={parameterPath:["options","onlyLatestPerDatabase"],mapper:{serializedName:"onlyLatestPerDatabase",type:{name:"Boolean"}}},no={parameterPath:["options","databaseState"],mapper:{serializedName:"databaseState",type:{name:"String"}}},ASt={parameterPath:"parameters",mapper:dm},NSt={parameterPath:"parameters",mapper:mRe},uxe={parameterPath:["options","numberOfQueries"],mapper:{serializedName:"numberOfQueries",type:{name:"Number"}}},dxe={parameterPath:["options","databases"],mapper:{serializedName:"databases",type:{name:"String"}}},pxe={parameterPath:["options","aggregationFunction"],mapper:{serializedName:"aggregationFunction",type:{name:"String"}}},mxe={parameterPath:["options","observationMetric"],mapper:{serializedName:"observationMetric",type:{name:"String"}}},hxe={parameterPath:"connectionPolicyName",mapper:{serializedName:"connectionPolicyName",required:!0,type:{name:"String"}}},DSt={parameterPath:"parameters",mapper:MS},cX=class{constructor(e){this.client=e}listByServer(e,t,n){let i=this.listByServerPagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByServerPagingPage(e,t,n)}}listByServerPagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByServer(e,t,n));yield yield h.__await(s.value||[])})}listByServerPagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByServerPagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,options:i},MSt)}_listByServer(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,options:n},kSt)}},fxe=Pt.createSerializer(Et,!1),MSt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/recoverableDatabases/{databaseName}",httpMethod:"GET",responses:{200:{bodyMapper:fRe}},queryParameters:[Ls],urlParameters:[M,k,q,X,ve],headerParameters:[U],serializer:fxe},kSt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/recoverableDatabases",httpMethod:"GET",responses:{200:{bodyMapper:DIe}},queryParameters:[Ls],urlParameters:[M,k,q,X],headerParameters:[U],serializer:fxe},lX=class{constructor(e){this.client=e}createOrUpdate(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,parameters:i,options:s},LSt)}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,options:i},qSt)}},gxe=Pt.createSerializer(Et,!1),LSt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/dataMaskingPolicies/{dataMaskingPolicyName}",httpMethod:"PUT",responses:{200:{bodyMapper:EU}},requestBody:r_t,queryParameters:[Ls],urlParameters:[M,k,q,X,ve,OU],headerParameters:[U,Vt],mediaType:"json",serializer:gxe},qSt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/dataMaskingPolicies/{dataMaskingPolicyName}",httpMethod:"GET",responses:{200:{bodyMapper:EU}},queryParameters:[Ls],urlParameters:[M,k,q,X,ve,OU],headerParameters:[U],serializer:gxe},uX=class{constructor(e){this.client=e}listByDatabase(e,t,n,i){let s=this.listByDatabasePagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByDatabasePagingPage(e,t,n,i)}}listByDatabasePagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByDatabase(e,t,n,i));yield yield h.__await(o.value||[])})}listByDatabasePagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByDatabasePagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}createOrUpdate(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,dataMaskingRuleName:i,parameters:s,options:o},zSt)}_listByDatabase(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,options:i},FSt)}},yxe=Pt.createSerializer(Et,!1),zSt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/dataMaskingPolicies/{dataMaskingPolicyName}/rules/{dataMaskingRuleName}",httpMethod:"PUT",responses:{200:{bodyMapper:wU},201:{bodyMapper:wU}},requestBody:n_t,queryParameters:[Ls],urlParameters:[M,k,q,X,ve,OU,i_t],headerParameters:[U,Vt],mediaType:"json",serializer:yxe},FSt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/dataMaskingPolicies/{dataMaskingPolicyName}/rules",httpMethod:"GET",responses:{200:{bodyMapper:MIe}},queryParameters:[Ls],urlParameters:[M,k,q,X,ve,OU],headerParameters:[U],serializer:yxe},dX=class{constructor(e){this.client=e}listByDatabase(e,t,n,i){let s=this.listByDatabasePagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByDatabasePagingPage(e,t,n,i)}}listByDatabasePagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByDatabase(e,t,n,i));yield yield h.__await(o.value||[])})}listByDatabasePagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByDatabasePagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}createOrUpdate(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,geoBackupPolicyName:i,parameters:s,options:o},jSt)}get(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,geoBackupPolicyName:i,options:s},USt)}_listByDatabase(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,options:i},BSt)}},ree=Pt.createSerializer(Et,!1),jSt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/geoBackupPolicies/{geoBackupPolicyName}",httpMethod:"PUT",responses:{200:{bodyMapper:eN},201:{bodyMapper:eN}},requestBody:s_t,queryParameters:[Ls],urlParameters:[M,k,q,X,ve,MRe],headerParameters:[U,Vt],mediaType:"json",serializer:ree},USt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/geoBackupPolicies/{geoBackupPolicyName}",httpMethod:"GET",responses:{200:{bodyMapper:eN}},queryParameters:[Ls],urlParameters:[M,k,q,X,ve,MRe],headerParameters:[U],serializer:ree},BSt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/geoBackupPolicies",httpMethod:"GET",responses:{200:{bodyMapper:kIe}},queryParameters:[Ls],urlParameters:[M,k,q,X,ve],headerParameters:[U],serializer:ree},bt=class{constructor(e,t,n,i=n.path,s=n.httpMethod){this.sendOperationFn=e,this.args=t,this.spec=n,this.requestPath=i,this.requestMethod=s}sendInitialRequest(){return h.__awaiter(this,void 0,void 0,function*(){return this.sendOperationFn(this.args,this.spec)})}sendPollRequest(e){return h.__awaiter(this,void 0,void 0,function*(){let t=this.spec,n=h.__rest(t,["requestBody"]);return this.sendOperationFn(this.args,Object.assign(Object.assign({},n),{path:e,httpMethod:"GET"}))})}},pX=class{constructor(e){this.client=e}listMetrics(e,t,n,i,s){let o=this.listMetricsPagingAll(e,t,n,i,s);return{next(){return o.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listMetricsPagingPage(e,t,n,i,s)}}listMetricsPagingPage(e,t,n,i,s){return h.__asyncGenerator(this,arguments,function*(){let a=yield h.__await(this._listMetrics(e,t,n,i,s));yield yield h.__await(a.value||[])})}listMetricsPagingAll(e,t,n,i,s){return h.__asyncGenerator(this,arguments,function*(){var a,c;try{for(var l=h.__asyncValues(this.listMetricsPagingPage(e,t,n,i,s)),u;u=yield h.__await(l.next()),!u.done;){let d=u.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(d)))}}catch(d){a={error:d}}finally{try{u&&!u.done&&(c=l.return)&&(yield h.__await(c.call(l)))}finally{if(a)throw a.error}}})}listMetricDefinitions(e,t,n,i){let s=this.listMetricDefinitionsPagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listMetricDefinitionsPagingPage(e,t,n,i)}}listMetricDefinitionsPagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listMetricDefinitions(e,t,n,i));yield yield h.__await(o.value||[])})}listMetricDefinitionsPagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listMetricDefinitionsPagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}listByServer(e,t,n){let i=this.listByServerPagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByServerPagingPage(e,t,n)}}listByServerPagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByServer(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByServerNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByServerPagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByServerPagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}listByElasticPool(e,t,n,i){let s=this.listByElasticPoolPagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByElasticPoolPagingPage(e,t,n,i)}}listByElasticPoolPagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByElasticPool(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listByElasticPoolNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listByElasticPoolPagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByElasticPoolPagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}listInaccessibleByServer(e,t,n){let i=this.listInaccessibleByServerPagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listInaccessibleByServerPagingPage(e,t,n)}}listInaccessibleByServerPagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listInaccessibleByServer(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listInaccessibleByServerNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listInaccessibleByServerPagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listInaccessibleByServerPagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}_listMetrics(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,filter:i,options:s},GSt)}_listMetricDefinitions(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,options:i},$St)}_listByServer(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,options:n},VSt)}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,options:i},HSt)}beginCreateOrUpdate(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,serverName:t,databaseName:n,parameters:i,options:s},WSt);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i,s)).pollUntilDone()})}beginDelete(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,serverName:t,databaseName:n,options:i},KSt);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginDeleteAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDelete(e,t,n,i)).pollUntilDone()})}beginUpdate(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,serverName:t,databaseName:n,parameters:i,options:s},QSt);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginUpdateAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginUpdate(e,t,n,i,s)).pollUntilDone()})}_listByElasticPool(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,elasticPoolName:n,options:i},YSt)}beginFailover(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,serverName:t,databaseName:n,options:i},XSt);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginFailoverAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginFailover(e,t,n,i)).pollUntilDone()})}_listInaccessibleByServer(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,options:n},JSt)}beginPause(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,serverName:t,databaseName:n,options:i},ZSt);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginPauseAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginPause(e,t,n,i)).pollUntilDone()})}beginResume(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,serverName:t,databaseName:n,options:i},eCt);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginResumeAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginResume(e,t,n,i)).pollUntilDone()})}beginUpgradeDataWarehouse(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,serverName:t,databaseName:n,options:i},tCt);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginUpgradeDataWarehouseAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginUpgradeDataWarehouse(e,t,n,i)).pollUntilDone()})}rename(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,parameters:i,options:s},rCt)}beginImport(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,serverName:t,databaseName:n,parameters:i,options:s},nCt);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginImportAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginImport(e,t,n,i,s)).pollUntilDone()})}beginExport(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,serverName:t,databaseName:n,parameters:i,options:s},iCt);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginExportAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginExport(e,t,n,i,s)).pollUntilDone()})}_listByServerNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,nextLink:n,options:i},sCt)}_listByElasticPoolNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,elasticPoolName:n,nextLink:i,options:s},oCt)}_listInaccessibleByServerNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,nextLink:n,options:i},aCt)}},Ra=Pt.createSerializer(Et,!1),GSt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/metrics",httpMethod:"GET",responses:{200:{bodyMapper:S7}},queryParameters:[Ls,kRe],urlParameters:[M,k,q,X,ve],headerParameters:[U],serializer:Ra},$St={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/metricDefinitions",httpMethod:"GET",responses:{200:{bodyMapper:C7}},queryParameters:[Ls],urlParameters:[M,k,q,X,ve],headerParameters:[U],serializer:Ra},VSt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases",httpMethod:"GET",responses:{200:{bodyMapper:kS},default:{}},queryParameters:[Ch,wr],urlParameters:[M,k,q,X],headerParameters:[U],serializer:Ra},HSt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}",httpMethod:"GET",responses:{200:{bodyMapper:Ia},default:{}},queryParameters:[wr],urlParameters:[M,k,q,X,ve],headerParameters:[U],serializer:Ra},WSt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}",httpMethod:"PUT",responses:{200:{bodyMapper:Ia},201:{bodyMapper:Ia},202:{bodyMapper:Ia},204:{bodyMapper:Ia},default:{}},requestBody:o_t,queryParameters:[wr],urlParameters:[M,k,q,X,ve],headerParameters:[U,Vt],mediaType:"json",serializer:Ra},KSt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[wr],urlParameters:[M,k,q,X,ve],serializer:Ra},QSt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}",httpMethod:"PATCH",responses:{200:{bodyMapper:Ia},201:{bodyMapper:Ia},202:{bodyMapper:Ia},204:{bodyMapper:Ia},default:{}},requestBody:a_t,queryParameters:[wr],urlParameters:[M,k,q,X,ve],headerParameters:[U,Vt],mediaType:"json",serializer:Ra},YSt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/elasticPools/{elasticPoolName}/databases",httpMethod:"GET",responses:{200:{bodyMapper:kS},default:{}},queryParameters:[wr],urlParameters:[M,k,q,X,du],headerParameters:[U],serializer:Ra},XSt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/failover",httpMethod:"POST",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[wr,LRe],urlParameters:[M,k,q,X,ve],serializer:Ra},JSt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/inaccessibleDatabases",httpMethod:"GET",responses:{200:{bodyMapper:kS},default:{}},queryParameters:[wr],urlParameters:[M,k,q,X],headerParameters:[U],serializer:Ra},ZSt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/pause",httpMethod:"POST",responses:{200:{bodyMapper:Ia},201:{bodyMapper:Ia},202:{bodyMapper:Ia},204:{bodyMapper:Ia},default:{}},queryParameters:[wr],urlParameters:[M,k,q,X,ve],headerParameters:[U],serializer:Ra},eCt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/resume",httpMethod:"POST",responses:{200:{bodyMapper:Ia},201:{bodyMapper:Ia},202:{bodyMapper:Ia},204:{bodyMapper:Ia},default:{}},queryParameters:[wr],urlParameters:[M,k,q,X,ve],headerParameters:[U],serializer:Ra},tCt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/upgradeDataWarehouse",httpMethod:"POST",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[wr],urlParameters:[M,k,q,X,ve],serializer:Ra},rCt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/move",httpMethod:"POST",responses:{200:{},default:{}},requestBody:c_t,queryParameters:[wr],urlParameters:[M,k,q,X,ve],headerParameters:[Vt],mediaType:"json",serializer:Ra},nCt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/import",httpMethod:"POST",responses:{200:{bodyMapper:$u},201:{bodyMapper:$u},202:{bodyMapper:$u},204:{bodyMapper:$u},default:{}},requestBody:l_t,queryParameters:[wr],urlParameters:[M,k,q,X,ve],headerParameters:[U,Vt],mediaType:"json",serializer:Ra},iCt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/export",httpMethod:"POST",responses:{200:{bodyMapper:$u},201:{bodyMapper:$u},202:{bodyMapper:$u},204:{bodyMapper:$u},default:{}},requestBody:u_t,queryParameters:[wr],urlParameters:[M,k,q,X,ve],headerParameters:[U,Vt],mediaType:"json",serializer:Ra},sCt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:kS},default:{}},queryParameters:[Ch,wr],urlParameters:[M,k,q,X,ft],headerParameters:[U],serializer:Ra},oCt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:kS},default:{}},queryParameters:[wr],urlParameters:[M,k,q,X,du,ft],headerParameters:[U],serializer:Ra},aCt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:kS},default:{}},queryParameters:[wr],urlParameters:[M,k,q,X,ft],headerParameters:[U],serializer:Ra},mX=class{constructor(e){this.client=e}listMetrics(e,t,n,i,s){let o=this.listMetricsPagingAll(e,t,n,i,s);return{next(){return o.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listMetricsPagingPage(e,t,n,i,s)}}listMetricsPagingPage(e,t,n,i,s){return h.__asyncGenerator(this,arguments,function*(){let a=yield h.__await(this._listMetrics(e,t,n,i,s));yield yield h.__await(a.value||[])})}listMetricsPagingAll(e,t,n,i,s){return h.__asyncGenerator(this,arguments,function*(){var a,c;try{for(var l=h.__asyncValues(this.listMetricsPagingPage(e,t,n,i,s)),u;u=yield h.__await(l.next()),!u.done;){let d=u.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(d)))}}catch(d){a={error:d}}finally{try{u&&!u.done&&(c=l.return)&&(yield h.__await(c.call(l)))}finally{if(a)throw a.error}}})}listMetricDefinitions(e,t,n,i){let s=this.listMetricDefinitionsPagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listMetricDefinitionsPagingPage(e,t,n,i)}}listMetricDefinitionsPagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listMetricDefinitions(e,t,n,i));yield yield h.__await(o.value||[])})}listMetricDefinitionsPagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listMetricDefinitionsPagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}listByServer(e,t,n){let i=this.listByServerPagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByServerPagingPage(e,t,n)}}listByServerPagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByServer(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByServerNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByServerPagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByServerPagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}_listMetrics(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,elasticPoolName:n,filter:i,options:s},cCt)}_listMetricDefinitions(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,elasticPoolName:n,options:i},lCt)}_listByServer(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,options:n},uCt)}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,elasticPoolName:n,options:i},dCt)}beginCreateOrUpdate(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,serverName:t,elasticPoolName:n,parameters:i,options:s},pCt);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i,s)).pollUntilDone()})}beginDelete(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,serverName:t,elasticPoolName:n,options:i},mCt);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginDeleteAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDelete(e,t,n,i)).pollUntilDone()})}beginUpdate(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,serverName:t,elasticPoolName:n,parameters:i,options:s},hCt);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginUpdateAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginUpdate(e,t,n,i,s)).pollUntilDone()})}beginFailover(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,serverName:t,elasticPoolName:n,options:i},fCt);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginFailoverAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginFailover(e,t,n,i)).pollUntilDone()})}_listByServerNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,nextLink:n,options:i},gCt)}},og=Pt.createSerializer(Et,!1),cCt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/elasticPools/{elasticPoolName}/metrics",httpMethod:"GET",responses:{200:{bodyMapper:S7}},queryParameters:[Ls,kRe],urlParameters:[M,k,q,X,du],headerParameters:[U],serializer:og},lCt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/elasticPools/{elasticPoolName}/metricDefinitions",httpMethod:"GET",responses:{200:{bodyMapper:C7}},queryParameters:[Ls],urlParameters:[M,k,q,X,du],headerParameters:[U],serializer:og},uCt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/elasticPools",httpMethod:"GET",responses:{200:{bodyMapper:O7},default:{}},queryParameters:[pu,$],urlParameters:[M,k,q,X],headerParameters:[U],serializer:og},dCt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/elasticPools/{elasticPoolName}",httpMethod:"GET",responses:{200:{bodyMapper:om},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,du],headerParameters:[U],serializer:og},pCt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/elasticPools/{elasticPoolName}",httpMethod:"PUT",responses:{200:{bodyMapper:om},201:{bodyMapper:om},202:{bodyMapper:om},204:{bodyMapper:om},default:{}},requestBody:d_t,queryParameters:[$],urlParameters:[M,k,q,X,du],headerParameters:[U,Vt],mediaType:"json",serializer:og},mCt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/elasticPools/{elasticPoolName}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,du],serializer:og},hCt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/elasticPools/{elasticPoolName}",httpMethod:"PATCH",responses:{200:{bodyMapper:om},201:{bodyMapper:om},202:{bodyMapper:om},204:{bodyMapper:om},default:{}},requestBody:p_t,queryParameters:[$],urlParameters:[M,k,q,X,du],headerParameters:[U,Vt],mediaType:"json",serializer:og},fCt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/elasticPools/{elasticPoolName}/failover",httpMethod:"POST",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,du],serializer:og},gCt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:O7},default:{}},queryParameters:[pu,$],urlParameters:[M,k,q,X,ft],headerParameters:[U],serializer:og},hX=class{constructor(e){this.client=e}listByDatabase(e,t,n,i){let s=this.listByDatabasePagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByDatabasePagingPage(e,t,n,i)}}listByDatabasePagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByDatabase(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listByDatabaseNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listByDatabasePagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByDatabasePagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}listByServer(e,t,n){let i=this.listByServerPagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByServerPagingPage(e,t,n)}}listByServerPagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByServer(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByServerNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByServerPagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByServerPagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}delete(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,linkId:i,options:s},yCt)}beginFailover(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,serverName:t,databaseName:n,linkId:i,options:s},vCt);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginFailoverAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginFailover(e,t,n,i,s)).pollUntilDone()})}beginFailoverAllowDataLoss(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,serverName:t,databaseName:n,linkId:i,options:s},bCt);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginFailoverAllowDataLossAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginFailoverAllowDataLoss(e,t,n,i,s)).pollUntilDone()})}beginUnlink(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){let a=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(u,d)}),c=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){var p;let m,f=(p=u.options)===null||p===void 0?void 0:p.onResponse,y=(C,P)=>{m=C,f?.(C,P)},v=Object.assign(Object.assign({},u),{options:Object.assign(Object.assign({},u.options),{onResponse:y})});return{flatResponse:yield a(v,d),rawResponse:{statusCode:m.status,body:m.parsedBody,headers:m.headers.toJSON()}}}),l=new bt(c,{resourceGroupName:e,serverName:t,databaseName:n,linkId:i,parameters:s,options:o},_Ct);return new St.LroEngine(l,{resumeFrom:o?.resumeFrom,intervalInMs:o?.updateIntervalInMs})})}beginUnlinkAndWait(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginUnlink(e,t,n,i,s,o)).pollUntilDone()})}_listByDatabase(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,options:i},SCt)}get(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,linkId:i,options:s},CCt)}_listByServer(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,options:n},PCt)}_listByDatabaseNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,nextLink:i,options:s},wCt)}_listByServerNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,nextLink:n,options:i},ECt)}},ag=Pt.createSerializer(Et,!1),yCt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/replicationLinks/{linkId}",httpMethod:"DELETE",responses:{200:{},204:{}},queryParameters:[Ls],urlParameters:[M,k,q,X,ve,IN],serializer:ag},vCt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/replicationLinks/{linkId}/failover",httpMethod:"POST",responses:{200:{},201:{},202:{},204:{}},queryParameters:[Ls],urlParameters:[M,k,q,X,ve,IN],serializer:ag},bCt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/replicationLinks/{linkId}/forceFailoverAllowDataLoss",httpMethod:"POST",responses:{200:{},201:{},202:{},204:{}},queryParameters:[Ls],urlParameters:[M,k,q,X,ve,IN],serializer:ag},_Ct={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/replicationLinks/{linkId}/unlink",httpMethod:"POST",responses:{200:{},201:{},202:{},204:{}},requestBody:m_t,queryParameters:[Ls],urlParameters:[M,k,q,X,ve,IN],headerParameters:[Vt],mediaType:"json",serializer:ag},SCt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/replicationLinks",httpMethod:"GET",responses:{200:{bodyMapper:EN},default:{}},queryParameters:[An],urlParameters:[M,k,q,X,ve],headerParameters:[U],serializer:ag},CCt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/replicationLinks/{linkId}",httpMethod:"GET",responses:{200:{bodyMapper:ARe},default:{}},queryParameters:[An],urlParameters:[M,k,q,X,ve,IN],headerParameters:[U],serializer:ag},PCt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/replicationLinks",httpMethod:"GET",responses:{200:{bodyMapper:EN},default:{}},queryParameters:[An],urlParameters:[M,k,q,X],headerParameters:[U],serializer:ag},wCt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:EN},default:{}},queryParameters:[An],urlParameters:[M,k,q,X,ve,ft],headerParameters:[U],serializer:ag},ECt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:EN},default:{}},queryParameters:[An],urlParameters:[M,k,q,X,ft],headerParameters:[U],serializer:ag},fX=class{constructor(e){this.client=e}listByServer(e,t,n){let i=this.listByServerPagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByServerPagingPage(e,t,n)}}listByServerPagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByServer(e,t,n));yield yield h.__await(s.value||[])})}listByServerPagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByServerPagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}delete(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,communicationLinkName:n,options:i},TCt)}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,communicationLinkName:n,options:i},ICt)}beginCreateOrUpdate(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,serverName:t,communicationLinkName:n,parameters:i,options:s},RCt);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i,s)).pollUntilDone()})}_listByServer(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,options:n},xCt)}},KU=Pt.createSerializer(Et,!1),TCt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/communicationLinks/{communicationLinkName}",httpMethod:"DELETE",responses:{200:{}},queryParameters:[Ls],urlParameters:[M,k,q,X,VZ],serializer:KU},ICt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/communicationLinks/{communicationLinkName}",httpMethod:"GET",responses:{200:{bodyMapper:uS}},queryParameters:[Ls],urlParameters:[M,k,q,X,VZ],headerParameters:[U],serializer:KU},RCt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/communicationLinks/{communicationLinkName}",httpMethod:"PUT",responses:{200:{bodyMapper:uS},201:{bodyMapper:uS},202:{bodyMapper:uS},204:{bodyMapper:uS}},requestBody:h_t,queryParameters:[Ls],urlParameters:[M,k,q,X,VZ],headerParameters:[U,Vt],mediaType:"json",serializer:KU},xCt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/communicationLinks",httpMethod:"GET",responses:{200:{bodyMapper:qIe}},queryParameters:[Ls],urlParameters:[M,k,q,X],headerParameters:[U],serializer:KU},gX=class{constructor(e){this.client=e}listByServer(e,t,n){let i=this.listByServerPagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByServerPagingPage(e,t,n)}}listByServerPagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByServer(e,t,n));yield yield h.__await(s.value||[])})}listByServerPagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByServerPagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,serviceObjectiveName:n,options:i},OCt)}_listByServer(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,options:n},ACt)}},vxe=Pt.createSerializer(Et,!1),OCt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/serviceObjectives/{serviceObjectiveName}",httpMethod:"GET",responses:{200:{bodyMapper:gRe}},queryParameters:[Ls],urlParameters:[M,k,q,X,f_t],headerParameters:[U],serializer:vxe},ACt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/serviceObjectives",httpMethod:"GET",responses:{200:{bodyMapper:zIe}},queryParameters:[Ls],urlParameters:[M,k,q,X],headerParameters:[U],serializer:vxe},yX=class{constructor(e){this.client=e}listByElasticPool(e,t,n,i){let s=this.listByElasticPoolPagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByElasticPoolPagingPage(e,t,n,i)}}listByElasticPoolPagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByElasticPool(e,t,n,i));yield yield h.__await(o.value||[])})}listByElasticPoolPagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByElasticPoolPagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}_listByElasticPool(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,elasticPoolName:n,options:i},DCt)}},NCt=Pt.createSerializer(Et,!1),DCt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/elasticPools/{elasticPoolName}/elasticPoolActivity",httpMethod:"GET",responses:{200:{bodyMapper:FIe}},queryParameters:[Ls],urlParameters:[M,k,q,X,du],headerParameters:[U],serializer:NCt},vX=class{constructor(e){this.client=e}listByElasticPool(e,t,n,i){let s=this.listByElasticPoolPagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByElasticPoolPagingPage(e,t,n,i)}}listByElasticPoolPagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByElasticPool(e,t,n,i));yield yield h.__await(o.value||[])})}listByElasticPoolPagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByElasticPoolPagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}_listByElasticPool(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,elasticPoolName:n,options:i},kCt)}},MCt=Pt.createSerializer(Et,!1),kCt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/elasticPools/{elasticPoolName}/elasticPoolDatabaseActivity",httpMethod:"GET",responses:{200:{bodyMapper:jIe}},queryParameters:[Ls],urlParameters:[M,k,q,X,du],headerParameters:[U],serializer:MCt},bX=class{constructor(e){this.client=e}listByServer(e,t,n){let i=this.listByServerPagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByServerPagingPage(e,t,n)}}listByServerPagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByServer(e,t,n));yield yield h.__await(s.value||[])})}listByServerPagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByServerPagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}_listByServer(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,options:n},qCt)}},LCt=Pt.createSerializer(Et,!1),qCt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/usages",httpMethod:"GET",responses:{200:{bodyMapper:UIe}},queryParameters:[Ls],urlParameters:[M,k,q,X],headerParameters:[U],serializer:LCt},_X=class{constructor(e){this.client=e}listByDatabase(e,t,n,i){let s=this.listByDatabasePagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByDatabasePagingPage(e,t,n,i)}}listByDatabasePagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByDatabase(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listByDatabaseNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listByDatabasePagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByDatabasePagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,options:i},zCt)}createOrUpdate(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,parameters:i,options:s},FCt)}_listByDatabase(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,options:i},jCt)}_listByDatabaseNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,nextLink:i,options:s},UCt)}},QU=Pt.createSerializer(Et,!1),zCt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/extendedAuditingSettings/{blobAuditingPolicyName}",httpMethod:"GET",responses:{200:{bodyMapper:tN},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,fv],headerParameters:[U],serializer:QU},FCt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/extendedAuditingSettings/{blobAuditingPolicyName}",httpMethod:"PUT",responses:{200:{bodyMapper:tN},201:{bodyMapper:tN},default:{}},requestBody:g_t,queryParameters:[$],urlParameters:[M,k,q,X,ve,fv],headerParameters:[U,Vt],mediaType:"json",serializer:QU},jCt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/extendedAuditingSettings",httpMethod:"GET",responses:{200:{bodyMapper:P7},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve],headerParameters:[U],serializer:QU},UCt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:P7},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,ft],headerParameters:[U],serializer:QU},SX=class{constructor(e){this.client=e}listByServer(e,t,n){let i=this.listByServerPagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByServerPagingPage(e,t,n)}}listByServerPagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByServer(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByServerNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByServerPagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByServerPagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}get(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,options:n},BCt)}beginCreateOrUpdate(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,serverName:t,parameters:n,options:i},GCt);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i)).pollUntilDone()})}_listByServer(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,options:n},$Ct)}_listByServerNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,nextLink:n,options:i},VCt)}},YU=Pt.createSerializer(Et,!1),BCt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/extendedAuditingSettings/{blobAuditingPolicyName}",httpMethod:"GET",responses:{200:{bodyMapper:dS},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,fv],headerParameters:[U],serializer:YU},GCt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/extendedAuditingSettings/{blobAuditingPolicyName}",httpMethod:"PUT",responses:{200:{bodyMapper:dS},201:{bodyMapper:dS},202:{bodyMapper:dS},204:{bodyMapper:dS},default:{}},requestBody:y_t,queryParameters:[$],urlParameters:[M,k,q,X,fv],headerParameters:[U,Vt],mediaType:"json",serializer:YU},$Ct={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/extendedAuditingSettings",httpMethod:"GET",responses:{200:{bodyMapper:w7},default:{}},queryParameters:[$],urlParameters:[M,k,q,X],headerParameters:[U],serializer:YU},VCt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:w7},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ft],headerParameters:[U],serializer:YU},CX=class{constructor(e){this.client=e}listByServer(e,t,n){let i=this.listByServerPagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByServerPagingPage(e,t,n)}}listByServerPagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByServer(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByServerNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByServerPagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByServerPagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}get(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,options:n},HCt)}beginCreateOrUpdate(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,serverName:t,parameters:n,options:i},WCt);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i)).pollUntilDone()})}_listByServer(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,options:n},KCt)}_listByServerNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,nextLink:n,options:i},QCt)}},XU=Pt.createSerializer(Et,!1),HCt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/auditingSettings/{blobAuditingPolicyName}",httpMethod:"GET",responses:{200:{bodyMapper:pS},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,fv],headerParameters:[U],serializer:XU},WCt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/auditingSettings/{blobAuditingPolicyName}",httpMethod:"PUT",responses:{200:{bodyMapper:pS},201:{bodyMapper:pS},202:{bodyMapper:pS},204:{bodyMapper:pS},default:{}},requestBody:v_t,queryParameters:[$],urlParameters:[M,k,q,X,fv],headerParameters:[U,Vt],mediaType:"json",serializer:XU},KCt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/auditingSettings",httpMethod:"GET",responses:{200:{bodyMapper:E7},default:{}},queryParameters:[$],urlParameters:[M,k,q,X],headerParameters:[U],serializer:XU},QCt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:E7},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ft],headerParameters:[U],serializer:XU},PX=class{constructor(e){this.client=e}listByDatabase(e,t,n,i){let s=this.listByDatabasePagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByDatabasePagingPage(e,t,n,i)}}listByDatabasePagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByDatabase(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listByDatabaseNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listByDatabasePagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByDatabasePagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,options:i},YCt)}createOrUpdate(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,parameters:i,options:s},XCt)}_listByDatabase(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,options:i},JCt)}_listByDatabaseNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,nextLink:i,options:s},ZCt)}},JU=Pt.createSerializer(Et,!1),YCt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/auditingSettings/{blobAuditingPolicyName}",httpMethod:"GET",responses:{200:{bodyMapper:rN},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,fv],headerParameters:[U],serializer:JU},XCt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/auditingSettings/{blobAuditingPolicyName}",httpMethod:"PUT",responses:{200:{bodyMapper:rN},201:{bodyMapper:rN},default:{}},requestBody:b_t,queryParameters:[$],urlParameters:[M,k,q,X,ve,fv],headerParameters:[U,Vt],mediaType:"json",serializer:JU},JCt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/auditingSettings",httpMethod:"GET",responses:{200:{bodyMapper:T7},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve],headerParameters:[U],serializer:JU},ZCt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:T7},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,ft],headerParameters:[U],serializer:JU},wX=class{constructor(e){this.client=e}listByDatabase(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,options:i},ePt)}get(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,advisorName:i,options:s},tPt)}update(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,advisorName:i,parameters:s,options:o},rPt)}},nee=Pt.createSerializer(Et,!1),ePt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/advisors",httpMethod:"GET",responses:{200:{bodyMapper:{type:{name:"Sequence",element:{type:{name:"Composite",className:"Advisor"}}}}},default:{}},queryParameters:[$,mu],urlParameters:[M,k,q,X,ve],headerParameters:[U],serializer:nee},tPt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/advisors/{advisorName}",httpMethod:"GET",responses:{200:{bodyMapper:IE},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,qS],headerParameters:[U],serializer:nee},rPt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/advisors/{advisorName}",httpMethod:"PATCH",responses:{200:{bodyMapper:IE},default:{}},requestBody:qRe,queryParameters:[$],urlParameters:[M,k,q,X,ve,qS],headerParameters:[U,Vt],mediaType:"json",serializer:nee},EX=class{constructor(e){this.client=e}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,options:i},nPt)}update(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,parameters:i,options:s},iPt)}},bxe=Pt.createSerializer(Et,!1),nPt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/automaticTuning/current",httpMethod:"GET",responses:{200:{bodyMapper:IU},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve],headerParameters:[U],serializer:bxe},iPt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/automaticTuning/current",httpMethod:"PATCH",responses:{200:{bodyMapper:IU},default:{}},requestBody:__t,queryParameters:[$],urlParameters:[M,k,q,X,ve],headerParameters:[U,Vt],mediaType:"json",serializer:bxe},TX=class{constructor(e){this.client=e}listByDatabase(e,t,n,i){let s=this.listByDatabasePagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByDatabasePagingPage(e,t,n,i)}}listByDatabasePagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByDatabase(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listByDatabaseNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listByDatabasePagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByDatabasePagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}listByTable(e,t,n,i,s,o){let a=this.listByTablePagingAll(e,t,n,i,s,o);return{next(){return a.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByTablePagingPage(e,t,n,i,s,o)}}listByTablePagingPage(e,t,n,i,s,o){return h.__asyncGenerator(this,arguments,function*(){let c=yield h.__await(this._listByTable(e,t,n,i,s,o));yield yield h.__await(c.value||[]);let l=c.nextLink;for(;l;)c=yield h.__await(this._listByTableNext(e,t,n,i,s,l,o)),l=c.nextLink,yield yield h.__await(c.value||[])})}listByTablePagingAll(e,t,n,i,s,o){return h.__asyncGenerator(this,arguments,function*(){var c,l;try{for(var u=h.__asyncValues(this.listByTablePagingPage(e,t,n,i,s,o)),d;d=yield h.__await(u.next()),!d.done;){let p=d.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(p)))}}catch(p){c={error:p}}finally{try{d&&!d.done&&(l=u.return)&&(yield h.__await(l.call(u)))}finally{if(c)throw c.error}}})}_listByDatabase(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,options:i},sPt)}_listByTable(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,schemaName:i,tableName:s,options:o},oPt)}get(e,t,n,i,s,o,a){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,schemaName:i,tableName:s,columnName:o,options:a},aPt)}_listByDatabaseNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,nextLink:i,options:s},cPt)}_listByTableNext(e,t,n,i,s,o,a){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,schemaName:i,tableName:s,nextLink:o,options:a},lPt)}},RN=Pt.createSerializer(Et,!1),sPt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/columns",httpMethod:"GET",responses:{200:{bodyMapper:ig},default:{}},queryParameters:[$,AU,NU,DU,MU,xE],urlParameters:[M,k,q,X,ve],headerParameters:[U],serializer:RN},oPt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/schemas/{schemaName}/tables/{tableName}/columns",httpMethod:"GET",responses:{200:{bodyMapper:ig},default:{}},queryParameters:[$,to],urlParameters:[M,k,q,X,ve,eo,Wa],headerParameters:[U],serializer:RN},aPt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/schemas/{schemaName}/tables/{tableName}/columns/{columnName}",httpMethod:"GET",responses:{200:{bodyMapper:zZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,eo,Wa,Wd],headerParameters:[U],serializer:RN},cPt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:ig},default:{}},queryParameters:[$,AU,NU,DU,MU,xE],urlParameters:[M,k,q,X,ve,ft],headerParameters:[U],serializer:RN},lPt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:ig},default:{}},queryParameters:[$,to],urlParameters:[M,k,q,X,ve,ft,eo,Wa],headerParameters:[U],serializer:RN},IX=class{constructor(e){this.client=e}listByDatabaseAdvisor(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,advisorName:i,options:s},uPt)}get(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,advisorName:i,recommendedActionName:s,options:o},dPt)}update(e,t,n,i,s,o,a){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,advisorName:i,recommendedActionName:s,parameters:o,options:a},pPt)}},iee=Pt.createSerializer(Et,!1),uPt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/advisors/{advisorName}/recommendedActions",httpMethod:"GET",responses:{200:{bodyMapper:{type:{name:"Sequence",element:{type:{name:"Composite",className:"RecommendedAction"}}}}},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,qS],headerParameters:[U],serializer:iee},dPt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/advisors/{advisorName}/recommendedActions/{recommendedActionName}",httpMethod:"GET",responses:{200:{bodyMapper:TU},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,qS,zRe],headerParameters:[U],serializer:iee},pPt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/advisors/{advisorName}/recommendedActions/{recommendedActionName}",httpMethod:"PATCH",responses:{200:{bodyMapper:TU},default:{}},requestBody:S_t,queryParameters:[$],urlParameters:[M,k,q,X,ve,qS,zRe],headerParameters:[U,Vt],mediaType:"json",serializer:iee},RX=class{constructor(e){this.client=e}listByDatabase(e,t,n,i){let s=this.listByDatabasePagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByDatabasePagingPage(e,t,n,i)}}listByDatabasePagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByDatabase(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listByDatabaseNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listByDatabasePagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByDatabasePagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}_listByDatabase(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,options:i},mPt)}get(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,schemaName:i,options:s},hPt)}_listByDatabaseNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,nextLink:i,options:s},fPt)}},see=Pt.createSerializer(Et,!1),mPt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/schemas",httpMethod:"GET",responses:{200:{bodyMapper:mN},default:{}},queryParameters:[$,to],urlParameters:[M,k,q,X,ve],headerParameters:[U],serializer:see},hPt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/schemas/{schemaName}",httpMethod:"GET",responses:{200:{bodyMapper:FZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,eo],headerParameters:[U],serializer:see},fPt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:mN},default:{}},queryParameters:[$,to],urlParameters:[M,k,q,X,ve,ft],headerParameters:[U],serializer:see},xX=class{constructor(e){this.client=e}listByDatabase(e,t,n,i){let s=this.listByDatabasePagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByDatabasePagingPage(e,t,n,i)}}listByDatabasePagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByDatabase(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listByDatabaseNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listByDatabasePagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByDatabasePagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}get(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,securityAlertPolicyName:i,options:s},gPt)}createOrUpdate(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,securityAlertPolicyName:i,parameters:s,options:o},yPt)}_listByDatabase(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,options:i},vPt)}_listByDatabaseNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,nextLink:i,options:s},bPt)}},ZU=Pt.createSerializer(Et,!1),gPt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/securityAlertPolicies/{securityAlertPolicyName}",httpMethod:"GET",responses:{200:{bodyMapper:nN},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,gv],headerParameters:[U],serializer:ZU},yPt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/securityAlertPolicies/{securityAlertPolicyName}",httpMethod:"PUT",responses:{200:{bodyMapper:nN},201:{bodyMapper:nN},default:{}},requestBody:C_t,queryParameters:[$],urlParameters:[M,k,q,X,ve,gv],headerParameters:[U,Vt],mediaType:"json",serializer:ZU},vPt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/securityAlertPolicies",httpMethod:"GET",responses:{200:{bodyMapper:I7},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve],headerParameters:[U],serializer:ZU},bPt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:I7},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,ft],headerParameters:[U],serializer:ZU},OX=class{constructor(e){this.client=e}listBySchema(e,t,n,i,s){let o=this.listBySchemaPagingAll(e,t,n,i,s);return{next(){return o.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listBySchemaPagingPage(e,t,n,i,s)}}listBySchemaPagingPage(e,t,n,i,s){return h.__asyncGenerator(this,arguments,function*(){let a=yield h.__await(this._listBySchema(e,t,n,i,s));yield yield h.__await(a.value||[]);let c=a.nextLink;for(;c;)a=yield h.__await(this._listBySchemaNext(e,t,n,i,c,s)),c=a.nextLink,yield yield h.__await(a.value||[])})}listBySchemaPagingAll(e,t,n,i,s){return h.__asyncGenerator(this,arguments,function*(){var a,c;try{for(var l=h.__asyncValues(this.listBySchemaPagingPage(e,t,n,i,s)),u;u=yield h.__await(l.next()),!u.done;){let d=u.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(d)))}}catch(d){a={error:d}}finally{try{u&&!u.done&&(c=l.return)&&(yield h.__await(c.call(l)))}finally{if(a)throw a.error}}})}_listBySchema(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,schemaName:i,options:s},_Pt)}get(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,schemaName:i,tableName:s,options:o},SPt)}_listBySchemaNext(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,schemaName:i,nextLink:s,options:o},CPt)}},oee=Pt.createSerializer(Et,!1),_Pt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/schemas/{schemaName}/tables",httpMethod:"GET",responses:{200:{bodyMapper:hN},default:{}},queryParameters:[$,to],urlParameters:[M,k,q,X,ve,eo],headerParameters:[U],serializer:oee},SPt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/schemas/{schemaName}/tables/{tableName}",httpMethod:"GET",responses:{200:{bodyMapper:jZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,eo,Wa],headerParameters:[U],serializer:oee},CPt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:hN},default:{}},queryParameters:[$,to],urlParameters:[M,k,q,X,ve,ft,eo],headerParameters:[U],serializer:oee},AX=class{constructor(e){this.client=e}get(e,t,n,i,s,o,a){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,vulnerabilityAssessmentName:i,ruleId:s,baselineName:o,options:a},PPt)}createOrUpdate(e,t,n,i,s,o,a,c){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,vulnerabilityAssessmentName:i,ruleId:s,baselineName:o,parameters:a,options:c},wPt)}delete(e,t,n,i,s,o,a){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,vulnerabilityAssessmentName:i,ruleId:s,baselineName:o,options:a},EPt)}},aee=Pt.createSerializer(Et,!1),PPt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/vulnerabilityAssessments/{vulnerabilityAssessmentName}/rules/{ruleId}/baselines/{baselineName}",httpMethod:"GET",responses:{200:{bodyMapper:RE},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,bs,OE,AE],headerParameters:[U],serializer:aee},wPt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/vulnerabilityAssessments/{vulnerabilityAssessmentName}/rules/{ruleId}/baselines/{baselineName}",httpMethod:"PUT",responses:{200:{bodyMapper:RE},default:{}},requestBody:FRe,queryParameters:[$],urlParameters:[M,k,q,X,ve,bs,OE,AE],headerParameters:[U,Vt],mediaType:"json",serializer:aee},EPt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/vulnerabilityAssessments/{vulnerabilityAssessmentName}/rules/{ruleId}/baselines/{baselineName}",httpMethod:"DELETE",responses:{200:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,bs,OE,AE],serializer:aee},NX=class{constructor(e){this.client=e}listByDatabase(e,t,n,i){let s=this.listByDatabasePagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByDatabasePagingPage(e,t,n,i)}}listByDatabasePagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByDatabase(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listByDatabaseNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listByDatabasePagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByDatabasePagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}get(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,vulnerabilityAssessmentName:i,options:s},TPt)}createOrUpdate(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,vulnerabilityAssessmentName:i,parameters:s,options:o},IPt)}delete(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,vulnerabilityAssessmentName:i,options:s},RPt)}_listByDatabase(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,options:i},xPt)}_listByDatabaseNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,nextLink:i,options:s},OPt)}},xN=Pt.createSerializer(Et,!1),TPt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/vulnerabilityAssessments/{vulnerabilityAssessmentName}",httpMethod:"GET",responses:{200:{bodyMapper:mv},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,bs],headerParameters:[U],serializer:xN},IPt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/vulnerabilityAssessments/{vulnerabilityAssessmentName}",httpMethod:"PUT",responses:{200:{bodyMapper:mv},201:{bodyMapper:mv},default:{}},requestBody:jRe,queryParameters:[$],urlParameters:[M,k,q,X,ve,bs],headerParameters:[U,Vt],mediaType:"json",serializer:xN},RPt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/vulnerabilityAssessments/{vulnerabilityAssessmentName}",httpMethod:"DELETE",responses:{200:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,bs],serializer:xN},xPt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/vulnerabilityAssessments",httpMethod:"GET",responses:{200:{bodyMapper:fN},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve],headerParameters:[U],serializer:xN},OPt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:fN},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,ft],headerParameters:[U],serializer:xN},DX=class{constructor(e){this.client=e}listByDatabase(e,t,n,i,s){let o=this.listByDatabasePagingAll(e,t,n,i,s);return{next(){return o.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByDatabasePagingPage(e,t,n,i,s)}}listByDatabasePagingPage(e,t,n,i,s){return h.__asyncGenerator(this,arguments,function*(){let a=yield h.__await(this._listByDatabase(e,t,n,i,s));yield yield h.__await(a.value||[]);let c=a.nextLink;for(;c;)a=yield h.__await(this._listByDatabaseNext(e,t,n,i,c,s)),c=a.nextLink,yield yield h.__await(a.value||[])})}listByDatabasePagingAll(e,t,n,i,s){return h.__asyncGenerator(this,arguments,function*(){var a,c;try{for(var l=h.__asyncValues(this.listByDatabasePagingPage(e,t,n,i,s)),u;u=yield h.__await(l.next()),!u.done;){let d=u.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(d)))}}catch(d){a={error:d}}finally{try{u&&!u.done&&(c=l.return)&&(yield h.__await(c.call(l)))}finally{if(a)throw a.error}}})}beginInitiateScan(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){let a=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(u,d)}),c=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){var p;let m,f=(p=u.options)===null||p===void 0?void 0:p.onResponse,y=(C,P)=>{m=C,f?.(C,P)},v=Object.assign(Object.assign({},u),{options:Object.assign(Object.assign({},u.options),{onResponse:y})});return{flatResponse:yield a(v,d),rawResponse:{statusCode:m.status,body:m.parsedBody,headers:m.headers.toJSON()}}}),l=new bt(c,{resourceGroupName:e,serverName:t,databaseName:n,vulnerabilityAssessmentName:i,scanId:s,options:o},APt);return new St.LroEngine(l,{resumeFrom:o?.resumeFrom,intervalInMs:o?.updateIntervalInMs})})}beginInitiateScanAndWait(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginInitiateScan(e,t,n,i,s,o)).pollUntilDone()})}_listByDatabase(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,vulnerabilityAssessmentName:i,options:s},NPt)}get(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,vulnerabilityAssessmentName:i,scanId:s,options:o},DPt)}export(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,vulnerabilityAssessmentName:i,scanId:s,options:o},MPt)}_listByDatabaseNext(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,vulnerabilityAssessmentName:i,nextLink:s,options:o},kPt)}},ON=Pt.createSerializer(Et,!1),APt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/vulnerabilityAssessments/{vulnerabilityAssessmentName}/scans/{scanId}/initiateScan",httpMethod:"POST",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,bs,NE],serializer:ON},NPt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/vulnerabilityAssessments/{vulnerabilityAssessmentName}/scans",httpMethod:"GET",responses:{200:{bodyMapper:gN},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,bs],headerParameters:[U],serializer:ON},DPt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/vulnerabilityAssessments/{vulnerabilityAssessmentName}/scans/{scanId}",httpMethod:"GET",responses:{200:{bodyMapper:UZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,bs,NE],headerParameters:[U],serializer:ON},MPt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/vulnerabilityAssessments/{vulnerabilityAssessmentName}/scans/{scanId}/export",httpMethod:"POST",responses:{200:{bodyMapper:iN},201:{bodyMapper:iN},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,bs,NE],headerParameters:[U],serializer:ON},kPt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:gN},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,ft,bs],headerParameters:[U],serializer:ON},MX=class{constructor(e){this.client=e}listByDatabase(e,t,n,i){let s=this.listByDatabasePagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByDatabasePagingPage(e,t,n,i)}}listByDatabasePagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByDatabase(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listByDatabaseNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listByDatabasePagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByDatabasePagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}get(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,dataWarehouseUserActivityName:i,options:s},LPt)}_listByDatabase(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,options:i},qPt)}_listByDatabaseNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,nextLink:i,options:s},zPt)}},cee=Pt.createSerializer(Et,!1),LPt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/dataWarehouseUserActivities/{dataWarehouseUserActivityName}",httpMethod:"GET",responses:{200:{bodyMapper:yRe},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,P_t],headerParameters:[U],serializer:cee},qPt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/dataWarehouseUserActivities",httpMethod:"GET",responses:{200:{bodyMapper:R7},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve],headerParameters:[U],serializer:cee},zPt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:R7},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,ft],headerParameters:[U],serializer:cee},kX=class{constructor(e){this.client=e}list(e){let t=this.listPagingAll(e);return{next(){return t.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listPagingPage(e)}}listPagingPage(e){return h.__asyncGenerator(this,arguments,function*(){let n=yield h.__await(this._list(e));yield yield h.__await(n.value||[]);let i=n.nextLink;for(;i;)n=yield h.__await(this._listNext(i,e)),i=n.nextLink,yield yield h.__await(n.value||[])})}listPagingAll(e){return h.__asyncGenerator(this,arguments,function*(){var n,i;try{for(var s=h.__asyncValues(this.listPagingPage(e)),o;o=yield h.__await(s.next()),!o.done;){let a=o.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(a)))}}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=s.return)&&(yield h.__await(i.call(s)))}finally{if(n)throw n.error}}})}listByLocation(e,t){let n=this.listByLocationPagingAll(e,t);return{next(){return n.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByLocationPagingPage(e,t)}}listByLocationPagingPage(e,t){return h.__asyncGenerator(this,arguments,function*(){let i=yield h.__await(this._listByLocation(e,t));yield yield h.__await(i.value||[]);let s=i.nextLink;for(;s;)i=yield h.__await(this._listByLocationNext(e,s,t)),s=i.nextLink,yield yield h.__await(i.value||[])})}listByLocationPagingAll(e,t){return h.__asyncGenerator(this,arguments,function*(){var i,s;try{for(var o=h.__asyncValues(this.listByLocationPagingPage(e,t)),a;a=yield h.__await(o.next()),!a.done;){let c=a.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(c)))}}catch(c){i={error:c}}finally{try{a&&!a.done&&(s=o.return)&&(yield h.__await(s.call(o)))}finally{if(i)throw i.error}}})}_list(e){return this.client.sendOperationRequest({options:e},FPt)}get(e,t,n){return this.client.sendOperationRequest({locationName:e,deletedServerName:t,options:n},jPt)}_listByLocation(e,t){return this.client.sendOperationRequest({locationName:e,options:t},UPt)}beginRecover(e,t,n){return h.__awaiter(this,void 0,void 0,function*(){let i=(a,c)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(a,c)}),s=(a,c)=>h.__awaiter(this,void 0,void 0,function*(){var l;let u,d=(l=a.options)===null||l===void 0?void 0:l.onResponse,p=(y,v)=>{u=y,d?.(y,v)},m=Object.assign(Object.assign({},a),{options:Object.assign(Object.assign({},a.options),{onResponse:p})});return{flatResponse:yield i(m,c),rawResponse:{statusCode:u.status,body:u.parsedBody,headers:u.headers.toJSON()}}}),o=new bt(s,{locationName:e,deletedServerName:t,options:n},BPt);return new St.LroEngine(o,{resumeFrom:n?.resumeFrom,intervalInMs:n?.updateIntervalInMs})})}beginRecoverAndWait(e,t,n){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginRecover(e,t,n)).pollUntilDone()})}_listNext(e,t){return this.client.sendOperationRequest({nextLink:e,options:t},GPt)}_listByLocationNext(e,t,n){return this.client.sendOperationRequest({locationName:e,nextLink:t,options:n},$Pt)}},jE=Pt.createSerializer(Et,!1),FPt={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Sql/deletedServers",httpMethod:"GET",responses:{200:{bodyMapper:yN},default:{}},queryParameters:[$],urlParameters:[M,k],headerParameters:[U],serializer:jE},jPt={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Sql/locations/{locationName}/deletedServers/{deletedServerName}",httpMethod:"GET",responses:{200:{bodyMapper:CE},default:{}},queryParameters:[$],urlParameters:[M,k,jr,URe],headerParameters:[U],serializer:jE},UPt={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Sql/locations/{locationName}/deletedServers",httpMethod:"GET",responses:{200:{bodyMapper:yN},default:{}},queryParameters:[$],urlParameters:[M,k,jr],headerParameters:[U],serializer:jE},BPt={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Sql/locations/{locationName}/deletedServers/{deletedServerName}/recover",httpMethod:"POST",responses:{200:{bodyMapper:CE},201:{bodyMapper:CE},202:{bodyMapper:CE},204:{bodyMapper:CE},default:{}},queryParameters:[$],urlParameters:[M,k,jr,URe],headerParameters:[U],serializer:jE},GPt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:yN},default:{}},queryParameters:[$],urlParameters:[M,k,ft],headerParameters:[U],serializer:jE},$Pt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:yN},default:{}},queryParameters:[$],urlParameters:[M,k,ft,jr],headerParameters:[U],serializer:jE},LX=class{constructor(e){this.client=e}listByElasticPool(e,t,n,i){let s=this.listByElasticPoolPagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByElasticPoolPagingPage(e,t,n,i)}}listByElasticPoolPagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByElasticPool(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listByElasticPoolNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listByElasticPoolPagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByElasticPoolPagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}cancel(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,elasticPoolName:n,operationId:i,options:s},VPt)}_listByElasticPool(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,elasticPoolName:n,options:i},HPt)}_listByElasticPoolNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,elasticPoolName:n,nextLink:i,options:s},WPt)}},lee=Pt.createSerializer(Et,!1),VPt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/elasticPools/{elasticPoolName}/operations/{operationId}/cancel",httpMethod:"POST",responses:{200:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,du,kU],serializer:lee},HPt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/elasticPools/{elasticPoolName}/operations",httpMethod:"GET",responses:{200:{bodyMapper:x7},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,du],headerParameters:[U],serializer:lee},WPt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:x7},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,du,ft],headerParameters:[U],serializer:lee},qX=class{constructor(e){this.client=e}listByServer(e,t,n){let i=this.listByServerPagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByServerPagingPage(e,t,n)}}listByServerPagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByServer(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByServerNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByServerPagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByServerPagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}_listByServer(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,options:n},KPt)}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,encryptionProtectorName:n,options:i},QPt)}beginCreateOrUpdate(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,serverName:t,encryptionProtectorName:n,parameters:i,options:s},YPt);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i,s)).pollUntilDone()})}beginRevalidate(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,serverName:t,encryptionProtectorName:n,options:i},XPt);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginRevalidateAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginRevalidate(e,t,n,i)).pollUntilDone()})}_listByServerNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,nextLink:n,options:i},JPt)}},AN=Pt.createSerializer(Et,!1),KPt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/encryptionProtector",httpMethod:"GET",responses:{200:{bodyMapper:A7},default:{}},queryParameters:[$],urlParameters:[M,k,q,X],headerParameters:[U],serializer:AN},QPt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/encryptionProtector/{encryptionProtectorName}",httpMethod:"GET",responses:{200:{bodyMapper:mS},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,DE],headerParameters:[U],serializer:AN},YPt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/encryptionProtector/{encryptionProtectorName}",httpMethod:"PUT",responses:{200:{bodyMapper:mS},201:{bodyMapper:mS},202:{bodyMapper:mS},204:{bodyMapper:mS},default:{}},requestBody:w_t,queryParameters:[$],urlParameters:[M,k,q,X,DE],headerParameters:[U,Vt],mediaType:"json",serializer:AN},XPt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/encryptionProtector/{encryptionProtectorName}/revalidate",httpMethod:"POST",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,DE],serializer:AN},JPt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:A7},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ft],headerParameters:[U],serializer:AN},zX=class{constructor(e){this.client=e}listByServer(e,t,n){let i=this.listByServerPagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByServerPagingPage(e,t,n)}}listByServerPagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByServer(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByServerNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByServerPagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByServerPagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,failoverGroupName:n,options:i},ZPt)}beginCreateOrUpdate(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,serverName:t,failoverGroupName:n,parameters:i,options:s},ewt);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i,s)).pollUntilDone()})}beginDelete(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,serverName:t,failoverGroupName:n,options:i},twt);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginDeleteAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDelete(e,t,n,i)).pollUntilDone()})}beginUpdate(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,serverName:t,failoverGroupName:n,parameters:i,options:s},rwt);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginUpdateAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginUpdate(e,t,n,i,s)).pollUntilDone()})}_listByServer(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,options:n},nwt)}beginFailover(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,serverName:t,failoverGroupName:n,options:i},iwt);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginFailoverAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginFailover(e,t,n,i)).pollUntilDone()})}beginForceFailoverAllowDataLoss(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,serverName:t,failoverGroupName:n,options:i},swt);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginForceFailoverAllowDataLossAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginForceFailoverAllowDataLoss(e,t,n,i)).pollUntilDone()})}_listByServerNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,nextLink:n,options:i},owt)}},_v=Pt.createSerializer(Et,!1),ZPt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/failoverGroups/{failoverGroupName}",httpMethod:"GET",responses:{200:{bodyMapper:Ta},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,mm],headerParameters:[U],serializer:_v},ewt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/failoverGroups/{failoverGroupName}",httpMethod:"PUT",responses:{200:{bodyMapper:Ta},201:{bodyMapper:Ta},202:{bodyMapper:Ta},204:{bodyMapper:Ta},default:{}},requestBody:E_t,queryParameters:[$],urlParameters:[M,k,q,X,mm],headerParameters:[U,Vt],mediaType:"json",serializer:_v},twt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/failoverGroups/{failoverGroupName}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,mm],serializer:_v},rwt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/failoverGroups/{failoverGroupName}",httpMethod:"PATCH",responses:{200:{bodyMapper:Ta},201:{bodyMapper:Ta},202:{bodyMapper:Ta},204:{bodyMapper:Ta},default:{}},requestBody:T_t,queryParameters:[$],urlParameters:[M,k,q,X,mm],headerParameters:[U,Vt],mediaType:"json",serializer:_v},nwt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/failoverGroups",httpMethod:"GET",responses:{200:{bodyMapper:N7},default:{}},queryParameters:[$],urlParameters:[M,k,q,X],headerParameters:[U],serializer:_v},iwt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/failoverGroups/{failoverGroupName}/failover",httpMethod:"POST",responses:{200:{bodyMapper:Ta},201:{bodyMapper:Ta},202:{bodyMapper:Ta},204:{bodyMapper:Ta},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,mm],headerParameters:[U],serializer:_v},swt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/failoverGroups/{failoverGroupName}/forceFailoverAllowDataLoss",httpMethod:"POST",responses:{200:{bodyMapper:Ta},201:{bodyMapper:Ta},202:{bodyMapper:Ta},204:{bodyMapper:Ta},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,mm],headerParameters:[U],serializer:_v},owt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:N7},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ft],headerParameters:[U],serializer:_v},FX=class{constructor(e){this.client=e}listByServer(e,t,n){let i=this.listByServerPagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByServerPagingPage(e,t,n)}}listByServerPagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByServer(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByServerNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByServerPagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByServerPagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,firewallRuleName:n,options:i},awt)}createOrUpdate(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,firewallRuleName:n,parameters:i,options:s},cwt)}delete(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,firewallRuleName:n,options:i},lwt)}_listByServer(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,options:n},uwt)}replace(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,parameters:n,options:i},dwt)}_listByServerNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,nextLink:n,options:i},pwt)}},UE=Pt.createSerializer(Et,!1),awt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/firewallRules/{firewallRuleName}",httpMethod:"GET",responses:{200:{bodyMapper:TE},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,HZ],headerParameters:[U],serializer:UE},cwt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/firewallRules/{firewallRuleName}",httpMethod:"PUT",responses:{200:{bodyMapper:TE},201:{bodyMapper:TE},default:{}},requestBody:I_t,queryParameters:[$],urlParameters:[M,k,q,X,HZ],headerParameters:[U,Vt],mediaType:"json",serializer:UE},lwt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/firewallRules/{firewallRuleName}",httpMethod:"DELETE",responses:{200:{},204:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,HZ],serializer:UE},uwt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/firewallRules",httpMethod:"GET",responses:{200:{bodyMapper:D7},default:{}},queryParameters:[$],urlParameters:[M,k,q,X],headerParameters:[U],serializer:UE},dwt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/firewallRules",httpMethod:"PUT",responses:{200:{bodyMapper:TE},202:{},default:{}},requestBody:R_t,queryParameters:[$],urlParameters:[M,k,q,X],headerParameters:[U,Vt],mediaType:"json",serializer:UE},pwt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:D7},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ft],headerParameters:[U],serializer:UE},jX=class{constructor(e){this.client=e}listByLocation(e,t,n){let i=this.listByLocationPagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByLocationPagingPage(e,t,n)}}listByLocationPagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByLocation(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByLocationNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByLocationPagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByLocationPagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,locationName:t,failoverGroupName:n,options:i},mwt)}beginCreateOrUpdate(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,locationName:t,failoverGroupName:n,parameters:i,options:s},hwt);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i,s)).pollUntilDone()})}beginDelete(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,locationName:t,failoverGroupName:n,options:i},fwt);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginDeleteAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDelete(e,t,n,i)).pollUntilDone()})}_listByLocation(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,locationName:t,options:n},gwt)}beginFailover(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,locationName:t,failoverGroupName:n,options:i},ywt);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginFailoverAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginFailover(e,t,n,i)).pollUntilDone()})}beginForceFailoverAllowDataLoss(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,locationName:t,failoverGroupName:n,options:i},vwt);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginForceFailoverAllowDataLossAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginForceFailoverAllowDataLoss(e,t,n,i)).pollUntilDone()})}_listByLocationNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,locationName:t,nextLink:n,options:i},bwt)}},jS=Pt.createSerializer(Et,!1),mwt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/locations/{locationName}/instanceFailoverGroups/{failoverGroupName}",httpMethod:"GET",responses:{200:{bodyMapper:Ol},default:{}},queryParameters:[$],urlParameters:[M,k,q,jr,mm],headerParameters:[U],serializer:jS},hwt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/locations/{locationName}/instanceFailoverGroups/{failoverGroupName}",httpMethod:"PUT",responses:{200:{bodyMapper:Ol},201:{bodyMapper:Ol},202:{bodyMapper:Ol},204:{bodyMapper:Ol},default:{}},requestBody:x_t,queryParameters:[$],urlParameters:[M,k,q,jr,mm],headerParameters:[U,Vt],mediaType:"json",serializer:jS},fwt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/locations/{locationName}/instanceFailoverGroups/{failoverGroupName}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,jr,mm],serializer:jS},gwt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/locations/{locationName}/instanceFailoverGroups",httpMethod:"GET",responses:{200:{bodyMapper:M7},default:{}},queryParameters:[$],urlParameters:[M,k,q,jr],headerParameters:[U],serializer:jS},ywt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/locations/{locationName}/instanceFailoverGroups/{failoverGroupName}/failover",httpMethod:"POST",responses:{200:{bodyMapper:Ol},201:{bodyMapper:Ol},202:{bodyMapper:Ol},204:{bodyMapper:Ol},default:{}},queryParameters:[$],urlParameters:[M,k,q,jr,mm],headerParameters:[U],serializer:jS},vwt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/locations/{locationName}/instanceFailoverGroups/{failoverGroupName}/forceFailoverAllowDataLoss",httpMethod:"POST",responses:{200:{bodyMapper:Ol},201:{bodyMapper:Ol},202:{bodyMapper:Ol},204:{bodyMapper:Ol},default:{}},queryParameters:[$],urlParameters:[M,k,q,jr,mm],headerParameters:[U],serializer:jS},bwt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:M7},default:{}},queryParameters:[$],urlParameters:[M,k,q,ft,jr],headerParameters:[U],serializer:jS},UX=class{constructor(e){this.client=e}listByResourceGroup(e,t){let n=this.listByResourceGroupPagingAll(e,t);return{next(){return n.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByResourceGroupPagingPage(e,t)}}listByResourceGroupPagingPage(e,t){return h.__asyncGenerator(this,arguments,function*(){let i=yield h.__await(this._listByResourceGroup(e,t));yield yield h.__await(i.value||[]);let s=i.nextLink;for(;s;)i=yield h.__await(this._listByResourceGroupNext(e,s,t)),s=i.nextLink,yield yield h.__await(i.value||[])})}listByResourceGroupPagingAll(e,t){return h.__asyncGenerator(this,arguments,function*(){var i,s;try{for(var o=h.__asyncValues(this.listByResourceGroupPagingPage(e,t)),a;a=yield h.__await(o.next()),!a.done;){let c=a.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(c)))}}catch(c){i={error:c}}finally{try{a&&!a.done&&(s=o.return)&&(yield h.__await(s.call(o)))}finally{if(i)throw i.error}}})}list(e){let t=this.listPagingAll(e);return{next(){return t.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listPagingPage(e)}}listPagingPage(e){return h.__asyncGenerator(this,arguments,function*(){let n=yield h.__await(this._list(e));yield yield h.__await(n.value||[]);let i=n.nextLink;for(;i;)n=yield h.__await(this._listNext(i,e)),i=n.nextLink,yield yield h.__await(n.value||[])})}listPagingAll(e){return h.__asyncGenerator(this,arguments,function*(){var n,i;try{for(var s=h.__asyncValues(this.listPagingPage(e)),o;o=yield h.__await(s.next()),!o.done;){let a=o.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(a)))}}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=s.return)&&(yield h.__await(i.call(s)))}finally{if(n)throw n.error}}})}get(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,instancePoolName:t,options:n},_wt)}beginCreateOrUpdate(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,instancePoolName:t,parameters:n,options:i},Swt);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i)).pollUntilDone()})}beginDelete(e,t,n){return h.__awaiter(this,void 0,void 0,function*(){let i=(a,c)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(a,c)}),s=(a,c)=>h.__awaiter(this,void 0,void 0,function*(){var l;let u,d=(l=a.options)===null||l===void 0?void 0:l.onResponse,p=(y,v)=>{u=y,d?.(y,v)},m=Object.assign(Object.assign({},a),{options:Object.assign(Object.assign({},a.options),{onResponse:p})});return{flatResponse:yield i(m,c),rawResponse:{statusCode:u.status,body:u.parsedBody,headers:u.headers.toJSON()}}}),o=new bt(s,{resourceGroupName:e,instancePoolName:t,options:n},Cwt);return new St.LroEngine(o,{resumeFrom:n?.resumeFrom,intervalInMs:n?.updateIntervalInMs})})}beginDeleteAndWait(e,t,n){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDelete(e,t,n)).pollUntilDone()})}beginUpdate(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,instancePoolName:t,parameters:n,options:i},Pwt);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginUpdateAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginUpdate(e,t,n,i)).pollUntilDone()})}_listByResourceGroup(e,t){return this.client.sendOperationRequest({resourceGroupName:e,options:t},wwt)}_list(e){return this.client.sendOperationRequest({options:e},Ewt)}_listByResourceGroupNext(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,nextLink:t,options:n},Twt)}_listNext(e,t){return this.client.sendOperationRequest({nextLink:e,options:t},Iwt)}},Sv=Pt.createSerializer(Et,!1),_wt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/instancePools/{instancePoolName}",httpMethod:"GET",responses:{200:{bodyMapper:am},default:{}},queryParameters:[$],urlParameters:[M,k,q,yv],headerParameters:[U],serializer:Sv},Swt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/instancePools/{instancePoolName}",httpMethod:"PUT",responses:{200:{bodyMapper:am},201:{bodyMapper:am},202:{bodyMapper:am},204:{bodyMapper:am},default:{}},requestBody:O_t,queryParameters:[$],urlParameters:[M,k,q,yv],headerParameters:[U,Vt],mediaType:"json",serializer:Sv},Cwt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/instancePools/{instancePoolName}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,yv],serializer:Sv},Pwt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/instancePools/{instancePoolName}",httpMethod:"PATCH",responses:{200:{bodyMapper:am},201:{bodyMapper:am},202:{bodyMapper:am},204:{bodyMapper:am},default:{}},requestBody:A_t,queryParameters:[$],urlParameters:[M,k,q,yv],headerParameters:[U,Vt],mediaType:"json",serializer:Sv},wwt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/instancePools",httpMethod:"GET",responses:{200:{bodyMapper:vN},default:{}},queryParameters:[$],urlParameters:[M,k,q],headerParameters:[U],serializer:Sv},Ewt={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Sql/instancePools",httpMethod:"GET",responses:{200:{bodyMapper:vN},default:{}},queryParameters:[$],urlParameters:[M,k],headerParameters:[U],serializer:Sv},Twt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:vN},default:{}},queryParameters:[$],urlParameters:[M,k,q,ft],headerParameters:[U],serializer:Sv},Iwt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:vN},default:{}},queryParameters:[$],urlParameters:[M,k,ft],headerParameters:[U],serializer:Sv},BX=class{constructor(e){this.client=e}listByServer(e,t,n){let i=this.listByServerPagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByServerPagingPage(e,t,n)}}listByServerPagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByServer(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByServerNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByServerPagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByServerPagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}_listByServer(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,options:n},Rwt)}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,options:i},xwt)}beginCreateOrUpdate(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,serverName:t,jobAgentName:n,parameters:i,options:s},Owt);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i,s)).pollUntilDone()})}beginDelete(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,serverName:t,jobAgentName:n,options:i},Awt);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginDeleteAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDelete(e,t,n,i)).pollUntilDone()})}beginUpdate(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,serverName:t,jobAgentName:n,parameters:i,options:s},Nwt);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginUpdateAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginUpdate(e,t,n,i,s)).pollUntilDone()})}_listByServerNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,nextLink:n,options:i},Dwt)}},BE=Pt.createSerializer(Et,!1),Rwt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/jobAgents",httpMethod:"GET",responses:{200:{bodyMapper:k7},default:{}},queryParameters:[$],urlParameters:[M,k,q,X],headerParameters:[U],serializer:BE},xwt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/jobAgents/{jobAgentName}",httpMethod:"GET",responses:{200:{bodyMapper:cm},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,Rn],headerParameters:[U],serializer:BE},Owt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/jobAgents/{jobAgentName}",httpMethod:"PUT",responses:{200:{bodyMapper:cm},201:{bodyMapper:cm},202:{bodyMapper:cm},204:{bodyMapper:cm},default:{}},requestBody:N_t,queryParameters:[$],urlParameters:[M,k,q,X,Rn],headerParameters:[U,Vt],mediaType:"json",serializer:BE},Awt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/jobAgents/{jobAgentName}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,Rn],serializer:BE},Nwt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/jobAgents/{jobAgentName}",httpMethod:"PATCH",responses:{200:{bodyMapper:cm},201:{bodyMapper:cm},202:{bodyMapper:cm},204:{bodyMapper:cm},default:{}},requestBody:D_t,queryParameters:[$],urlParameters:[M,k,q,X,Rn],headerParameters:[U,Vt],mediaType:"json",serializer:BE},Dwt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:k7},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ft],headerParameters:[U],serializer:BE},GX=class{constructor(e){this.client=e}listByAgent(e,t,n,i){let s=this.listByAgentPagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByAgentPagingPage(e,t,n,i)}}listByAgentPagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByAgent(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listByAgentNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listByAgentPagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByAgentPagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}_listByAgent(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,options:i},Mwt)}get(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,credentialName:i,options:s},kwt)}createOrUpdate(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,credentialName:i,parameters:s,options:o},Lwt)}delete(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,credentialName:i,options:s},qwt)}_listByAgentNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,nextLink:i,options:s},zwt)}},NN=Pt.createSerializer(Et,!1),Mwt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/jobAgents/{jobAgentName}/credentials",httpMethod:"GET",responses:{200:{bodyMapper:L7},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,Rn],headerParameters:[U],serializer:NN},kwt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/jobAgents/{jobAgentName}/credentials/{credentialName}",httpMethod:"GET",responses:{200:{bodyMapper:sN},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,Rn,WZ],headerParameters:[U],serializer:NN},Lwt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/jobAgents/{jobAgentName}/credentials/{credentialName}",httpMethod:"PUT",responses:{200:{bodyMapper:sN},201:{bodyMapper:sN},default:{}},requestBody:M_t,queryParameters:[$],urlParameters:[M,k,q,X,Rn,WZ],headerParameters:[U,Vt],mediaType:"json",serializer:NN},qwt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/jobAgents/{jobAgentName}/credentials/{credentialName}",httpMethod:"DELETE",responses:{200:{},204:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,Rn,WZ],serializer:NN},zwt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:L7},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ft,Rn],headerParameters:[U],serializer:NN},$X=class{constructor(e){this.client=e}listByAgent(e,t,n,i){let s=this.listByAgentPagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByAgentPagingPage(e,t,n,i)}}listByAgentPagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByAgent(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listByAgentNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listByAgentPagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByAgentPagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}listByJob(e,t,n,i,s){let o=this.listByJobPagingAll(e,t,n,i,s);return{next(){return o.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByJobPagingPage(e,t,n,i,s)}}listByJobPagingPage(e,t,n,i,s){return h.__asyncGenerator(this,arguments,function*(){let a=yield h.__await(this._listByJob(e,t,n,i,s));yield yield h.__await(a.value||[]);let c=a.nextLink;for(;c;)a=yield h.__await(this._listByJobNext(e,t,n,i,c,s)),c=a.nextLink,yield yield h.__await(a.value||[])})}listByJobPagingAll(e,t,n,i,s){return h.__asyncGenerator(this,arguments,function*(){var a,c;try{for(var l=h.__asyncValues(this.listByJobPagingPage(e,t,n,i,s)),u;u=yield h.__await(l.next()),!u.done;){let d=u.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(d)))}}catch(d){a={error:d}}finally{try{u&&!u.done&&(c=l.return)&&(yield h.__await(c.call(l)))}finally{if(a)throw a.error}}})}_listByAgent(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,options:i},Fwt)}cancel(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,jobName:i,jobExecutionId:s,options:o},jwt)}beginCreate(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,serverName:t,jobAgentName:n,jobName:i,options:s},Uwt);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginCreateAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreate(e,t,n,i,s)).pollUntilDone()})}_listByJob(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,jobName:i,options:s},Bwt)}get(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,jobName:i,jobExecutionId:s,options:o},Gwt)}beginCreateOrUpdate(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){let a=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(u,d)}),c=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){var p;let m,f=(p=u.options)===null||p===void 0?void 0:p.onResponse,y=(C,P)=>{m=C,f?.(C,P)},v=Object.assign(Object.assign({},u),{options:Object.assign(Object.assign({},u.options),{onResponse:y})});return{flatResponse:yield a(v,d),rawResponse:{statusCode:m.status,body:m.parsedBody,headers:m.headers.toJSON()}}}),l=new bt(c,{resourceGroupName:e,serverName:t,jobAgentName:n,jobName:i,jobExecutionId:s,options:o},$wt);return new St.LroEngine(l,{resumeFrom:o?.resumeFrom,intervalInMs:o?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i,s,o)).pollUntilDone()})}_listByAgentNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,nextLink:i,options:s},Vwt)}_listByJobNext(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,jobName:i,nextLink:s,options:o},Hwt)}},Cv=Pt.createSerializer(Et,!1),Fwt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/jobAgents/{jobAgentName}/executions",httpMethod:"GET",responses:{200:{bodyMapper:pm},default:{}},queryParameters:[pu,$,Ph,wh,Eh,Th,Ih,Kd],urlParameters:[M,k,q,X,Rn],headerParameters:[U],serializer:Cv},jwt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/jobAgents/{jobAgentName}/jobs/{jobName}/executions/{jobExecutionId}/cancel",httpMethod:"POST",responses:{200:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,Rn,_s,hm],serializer:Cv},Uwt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/jobAgents/{jobAgentName}/jobs/{jobName}/start",httpMethod:"POST",responses:{200:{bodyMapper:Hd},201:{bodyMapper:Hd},202:{bodyMapper:Hd},204:{bodyMapper:Hd},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,Rn,_s],headerParameters:[U],serializer:Cv},Bwt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/jobAgents/{jobAgentName}/jobs/{jobName}/executions",httpMethod:"GET",responses:{200:{bodyMapper:pm},default:{}},queryParameters:[pu,$,Ph,wh,Eh,Th,Ih,Kd],urlParameters:[M,k,q,X,Rn,_s],headerParameters:[U],serializer:Cv},Gwt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/jobAgents/{jobAgentName}/jobs/{jobName}/executions/{jobExecutionId}",httpMethod:"GET",responses:{200:{bodyMapper:Hd},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,Rn,_s,hm],headerParameters:[U],serializer:Cv},$wt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/jobAgents/{jobAgentName}/jobs/{jobName}/executions/{jobExecutionId}",httpMethod:"PUT",responses:{200:{bodyMapper:Hd},201:{bodyMapper:Hd},202:{bodyMapper:Hd},204:{bodyMapper:Hd},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,Rn,_s,hm],headerParameters:[U],serializer:Cv},Vwt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:pm},default:{}},queryParameters:[pu,$,Ph,wh,Eh,Th,Ih,Kd],urlParameters:[M,k,q,X,ft,Rn],headerParameters:[U],serializer:Cv},Hwt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:pm},default:{}},queryParameters:[pu,$,Ph,wh,Eh,Th,Ih,Kd],urlParameters:[M,k,q,X,ft,Rn,_s],headerParameters:[U],serializer:Cv},VX=class{constructor(e){this.client=e}listByAgent(e,t,n,i){let s=this.listByAgentPagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByAgentPagingPage(e,t,n,i)}}listByAgentPagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByAgent(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listByAgentNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listByAgentPagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByAgentPagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}_listByAgent(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,options:i},Wwt)}get(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,jobName:i,options:s},Kwt)}createOrUpdate(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,jobName:i,parameters:s,options:o},Qwt)}delete(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,jobName:i,options:s},Ywt)}_listByAgentNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,nextLink:i,options:s},Xwt)}},DN=Pt.createSerializer(Et,!1),Wwt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/jobAgents/{jobAgentName}/jobs",httpMethod:"GET",responses:{200:{bodyMapper:q7},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,Rn],headerParameters:[U],serializer:DN},Kwt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/jobAgents/{jobAgentName}/jobs/{jobName}",httpMethod:"GET",responses:{200:{bodyMapper:oN},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,Rn,_s],headerParameters:[U],serializer:DN},Qwt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/jobAgents/{jobAgentName}/jobs/{jobName}",httpMethod:"PUT",responses:{200:{bodyMapper:oN},201:{bodyMapper:oN},default:{}},requestBody:k_t,queryParameters:[$],urlParameters:[M,k,q,X,Rn,_s],headerParameters:[U,Vt],mediaType:"json",serializer:DN},Ywt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/jobAgents/{jobAgentName}/jobs/{jobName}",httpMethod:"DELETE",responses:{200:{},204:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,Rn,_s],serializer:DN},Xwt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:q7},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ft,Rn],headerParameters:[U],serializer:DN},HX=class{constructor(e){this.client=e}listByJobExecution(e,t,n,i,s,o){let a=this.listByJobExecutionPagingAll(e,t,n,i,s,o);return{next(){return a.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByJobExecutionPagingPage(e,t,n,i,s,o)}}listByJobExecutionPagingPage(e,t,n,i,s,o){return h.__asyncGenerator(this,arguments,function*(){let c=yield h.__await(this._listByJobExecution(e,t,n,i,s,o));yield yield h.__await(c.value||[]);let l=c.nextLink;for(;l;)c=yield h.__await(this._listByJobExecutionNext(e,t,n,i,s,l,o)),l=c.nextLink,yield yield h.__await(c.value||[])})}listByJobExecutionPagingAll(e,t,n,i,s,o){return h.__asyncGenerator(this,arguments,function*(){var c,l;try{for(var u=h.__asyncValues(this.listByJobExecutionPagingPage(e,t,n,i,s,o)),d;d=yield h.__await(u.next()),!d.done;){let p=d.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(p)))}}catch(p){c={error:p}}finally{try{d&&!d.done&&(l=u.return)&&(yield h.__await(l.call(u)))}finally{if(c)throw c.error}}})}_listByJobExecution(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,jobName:i,jobExecutionId:s,options:o},Jwt)}get(e,t,n,i,s,o,a){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,jobName:i,jobExecutionId:s,stepName:o,options:a},Zwt)}_listByJobExecutionNext(e,t,n,i,s,o,a){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,jobName:i,jobExecutionId:s,nextLink:o,options:a},eEt)}},uee=Pt.createSerializer(Et,!1),Jwt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/jobAgents/{jobAgentName}/jobs/{jobName}/executions/{jobExecutionId}/steps",httpMethod:"GET",responses:{200:{bodyMapper:pm},default:{}},queryParameters:[pu,$,Ph,wh,Eh,Th,Ih,Kd],urlParameters:[M,k,q,X,Rn,_s,hm],headerParameters:[U],serializer:uee},Zwt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/jobAgents/{jobAgentName}/jobs/{jobName}/executions/{jobExecutionId}/steps/{stepName}",httpMethod:"GET",responses:{200:{bodyMapper:Hd},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,Rn,_s,hm,vv],headerParameters:[U],serializer:uee},eEt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:pm},default:{}},queryParameters:[pu,$,Ph,wh,Eh,Th,Ih,Kd],urlParameters:[M,k,q,X,ft,Rn,_s,hm],headerParameters:[U],serializer:uee},WX=class{constructor(e){this.client=e}listByVersion(e,t,n,i,s,o){let a=this.listByVersionPagingAll(e,t,n,i,s,o);return{next(){return a.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByVersionPagingPage(e,t,n,i,s,o)}}listByVersionPagingPage(e,t,n,i,s,o){return h.__asyncGenerator(this,arguments,function*(){let c=yield h.__await(this._listByVersion(e,t,n,i,s,o));yield yield h.__await(c.value||[]);let l=c.nextLink;for(;l;)c=yield h.__await(this._listByVersionNext(e,t,n,i,s,l,o)),l=c.nextLink,yield yield h.__await(c.value||[])})}listByVersionPagingAll(e,t,n,i,s,o){return h.__asyncGenerator(this,arguments,function*(){var c,l;try{for(var u=h.__asyncValues(this.listByVersionPagingPage(e,t,n,i,s,o)),d;d=yield h.__await(u.next()),!d.done;){let p=d.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(p)))}}catch(p){c={error:p}}finally{try{d&&!d.done&&(l=u.return)&&(yield h.__await(l.call(u)))}finally{if(c)throw c.error}}})}listByJob(e,t,n,i,s){let o=this.listByJobPagingAll(e,t,n,i,s);return{next(){return o.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByJobPagingPage(e,t,n,i,s)}}listByJobPagingPage(e,t,n,i,s){return h.__asyncGenerator(this,arguments,function*(){let a=yield h.__await(this._listByJob(e,t,n,i,s));yield yield h.__await(a.value||[]);let c=a.nextLink;for(;c;)a=yield h.__await(this._listByJobNext(e,t,n,i,c,s)),c=a.nextLink,yield yield h.__await(a.value||[])})}listByJobPagingAll(e,t,n,i,s){return h.__asyncGenerator(this,arguments,function*(){var a,c;try{for(var l=h.__asyncValues(this.listByJobPagingPage(e,t,n,i,s)),u;u=yield h.__await(l.next()),!u.done;){let d=u.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(d)))}}catch(d){a={error:d}}finally{try{u&&!u.done&&(c=l.return)&&(yield h.__await(c.call(l)))}finally{if(a)throw a.error}}})}_listByVersion(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,jobName:i,jobVersion:s,options:o},tEt)}getByVersion(e,t,n,i,s,o,a){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,jobName:i,jobVersion:s,stepName:o,options:a},rEt)}_listByJob(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,jobName:i,options:s},nEt)}get(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,jobName:i,stepName:s,options:o},iEt)}createOrUpdate(e,t,n,i,s,o,a){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,jobName:i,stepName:s,parameters:o,options:a},sEt)}delete(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,jobName:i,stepName:s,options:o},oEt)}_listByVersionNext(e,t,n,i,s,o,a){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,jobName:i,jobVersion:s,nextLink:o,options:a},aEt)}_listByJobNext(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,jobName:i,nextLink:s,options:o},cEt)}},Pv=Pt.createSerializer(Et,!1),tEt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/jobAgents/{jobAgentName}/jobs/{jobName}/versions/{jobVersion}/steps",httpMethod:"GET",responses:{200:{bodyMapper:bN},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,Rn,_s,LU],headerParameters:[U],serializer:Pv},rEt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/jobAgents/{jobAgentName}/jobs/{jobName}/versions/{jobVersion}/steps/{stepName}",httpMethod:"GET",responses:{200:{bodyMapper:EE},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,Rn,_s,vv,LU],headerParameters:[U],serializer:Pv},nEt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/jobAgents/{jobAgentName}/jobs/{jobName}/steps",httpMethod:"GET",responses:{200:{bodyMapper:bN},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,Rn,_s],headerParameters:[U],serializer:Pv},iEt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/jobAgents/{jobAgentName}/jobs/{jobName}/steps/{stepName}",httpMethod:"GET",responses:{200:{bodyMapper:EE},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,Rn,_s,vv],headerParameters:[U],serializer:Pv},sEt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/jobAgents/{jobAgentName}/jobs/{jobName}/steps/{stepName}",httpMethod:"PUT",responses:{200:{bodyMapper:EE},201:{bodyMapper:EE},default:{}},requestBody:L_t,queryParameters:[$],urlParameters:[M,k,q,X,Rn,_s,vv],headerParameters:[U,Vt],mediaType:"json",serializer:Pv},oEt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/jobAgents/{jobAgentName}/jobs/{jobName}/steps/{stepName}",httpMethod:"DELETE",responses:{200:{},204:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,Rn,_s,vv],serializer:Pv},aEt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:bN},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ft,Rn,_s,LU],headerParameters:[U],serializer:Pv},cEt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:bN},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ft,Rn,_s],headerParameters:[U],serializer:Pv},KX=class{constructor(e){this.client=e}listByJobExecution(e,t,n,i,s,o){let a=this.listByJobExecutionPagingAll(e,t,n,i,s,o);return{next(){return a.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByJobExecutionPagingPage(e,t,n,i,s,o)}}listByJobExecutionPagingPage(e,t,n,i,s,o){return h.__asyncGenerator(this,arguments,function*(){let c=yield h.__await(this._listByJobExecution(e,t,n,i,s,o));yield yield h.__await(c.value||[]);let l=c.nextLink;for(;l;)c=yield h.__await(this._listByJobExecutionNext(e,t,n,i,s,l,o)),l=c.nextLink,yield yield h.__await(c.value||[])})}listByJobExecutionPagingAll(e,t,n,i,s,o){return h.__asyncGenerator(this,arguments,function*(){var c,l;try{for(var u=h.__asyncValues(this.listByJobExecutionPagingPage(e,t,n,i,s,o)),d;d=yield h.__await(u.next()),!d.done;){let p=d.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(p)))}}catch(p){c={error:p}}finally{try{d&&!d.done&&(l=u.return)&&(yield h.__await(l.call(u)))}finally{if(c)throw c.error}}})}listByStep(e,t,n,i,s,o,a){let c=this.listByStepPagingAll(e,t,n,i,s,o,a);return{next(){return c.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByStepPagingPage(e,t,n,i,s,o,a)}}listByStepPagingPage(e,t,n,i,s,o,a){return h.__asyncGenerator(this,arguments,function*(){let l=yield h.__await(this._listByStep(e,t,n,i,s,o,a));yield yield h.__await(l.value||[]);let u=l.nextLink;for(;u;)l=yield h.__await(this._listByStepNext(e,t,n,i,s,o,u,a)),u=l.nextLink,yield yield h.__await(l.value||[])})}listByStepPagingAll(e,t,n,i,s,o,a){return h.__asyncGenerator(this,arguments,function*(){var l,u;try{for(var d=h.__asyncValues(this.listByStepPagingPage(e,t,n,i,s,o,a)),p;p=yield h.__await(d.next()),!p.done;){let m=p.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(m)))}}catch(m){l={error:m}}finally{try{p&&!p.done&&(u=d.return)&&(yield h.__await(u.call(d)))}finally{if(l)throw l.error}}})}_listByJobExecution(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,jobName:i,jobExecutionId:s,options:o},lEt)}_listByStep(e,t,n,i,s,o,a){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,jobName:i,jobExecutionId:s,stepName:o,options:a},uEt)}get(e,t,n,i,s,o,a,c){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,jobName:i,jobExecutionId:s,stepName:o,targetId:a,options:c},dEt)}_listByJobExecutionNext(e,t,n,i,s,o,a){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,jobName:i,jobExecutionId:s,nextLink:o,options:a},pEt)}_listByStepNext(e,t,n,i,s,o,a,c){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,jobName:i,jobExecutionId:s,stepName:o,nextLink:a,options:c},mEt)}},MN=Pt.createSerializer(Et,!1),lEt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/jobAgents/{jobAgentName}/jobs/{jobName}/executions/{jobExecutionId}/targets",httpMethod:"GET",responses:{200:{bodyMapper:pm},default:{}},queryParameters:[pu,$,Ph,wh,Eh,Th,Ih,Kd],urlParameters:[M,k,q,X,Rn,_s,hm],headerParameters:[U],serializer:MN},uEt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/jobAgents/{jobAgentName}/jobs/{jobName}/executions/{jobExecutionId}/steps/{stepName}/targets",httpMethod:"GET",responses:{200:{bodyMapper:pm},default:{}},queryParameters:[pu,$,Ph,wh,Eh,Th,Ih,Kd],urlParameters:[M,k,q,X,Rn,_s,hm,vv],headerParameters:[U],serializer:MN},dEt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/jobAgents/{jobAgentName}/jobs/{jobName}/executions/{jobExecutionId}/steps/{stepName}/targets/{targetId}",httpMethod:"GET",responses:{200:{bodyMapper:Hd},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,Rn,_s,hm,vv,q_t],headerParameters:[U],serializer:MN},pEt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:pm},default:{}},queryParameters:[pu,$,Ph,wh,Eh,Th,Ih,Kd],urlParameters:[M,k,q,X,ft,Rn,_s,hm],headerParameters:[U],serializer:MN},mEt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:pm},default:{}},queryParameters:[pu,$,Ph,wh,Eh,Th,Ih,Kd],urlParameters:[M,k,q,X,ft,Rn,_s,hm,vv],headerParameters:[U],serializer:MN},QX=class{constructor(e){this.client=e}listByAgent(e,t,n,i){let s=this.listByAgentPagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByAgentPagingPage(e,t,n,i)}}listByAgentPagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByAgent(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listByAgentNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listByAgentPagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByAgentPagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}_listByAgent(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,options:i},hEt)}get(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,targetGroupName:i,options:s},fEt)}createOrUpdate(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,targetGroupName:i,parameters:s,options:o},gEt)}delete(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,targetGroupName:i,options:s},yEt)}_listByAgentNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,nextLink:i,options:s},vEt)}},kN=Pt.createSerializer(Et,!1),hEt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/jobAgents/{jobAgentName}/targetGroups",httpMethod:"GET",responses:{200:{bodyMapper:z7},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,Rn],headerParameters:[U],serializer:kN},fEt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/jobAgents/{jobAgentName}/targetGroups/{targetGroupName}",httpMethod:"GET",responses:{200:{bodyMapper:aN},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,Rn,KZ],headerParameters:[U],serializer:kN},gEt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/jobAgents/{jobAgentName}/targetGroups/{targetGroupName}",httpMethod:"PUT",responses:{200:{bodyMapper:aN},201:{bodyMapper:aN},default:{}},requestBody:z_t,queryParameters:[$],urlParameters:[M,k,q,X,Rn,KZ],headerParameters:[U,Vt],mediaType:"json",serializer:kN},yEt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/jobAgents/{jobAgentName}/targetGroups/{targetGroupName}",httpMethod:"DELETE",responses:{200:{},204:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,Rn,KZ],serializer:kN},vEt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:z7},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ft,Rn],headerParameters:[U],serializer:kN},YX=class{constructor(e){this.client=e}listByJob(e,t,n,i,s){let o=this.listByJobPagingAll(e,t,n,i,s);return{next(){return o.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByJobPagingPage(e,t,n,i,s)}}listByJobPagingPage(e,t,n,i,s){return h.__asyncGenerator(this,arguments,function*(){let a=yield h.__await(this._listByJob(e,t,n,i,s));yield yield h.__await(a.value||[]);let c=a.nextLink;for(;c;)a=yield h.__await(this._listByJobNext(e,t,n,i,c,s)),c=a.nextLink,yield yield h.__await(a.value||[])})}listByJobPagingAll(e,t,n,i,s){return h.__asyncGenerator(this,arguments,function*(){var a,c;try{for(var l=h.__asyncValues(this.listByJobPagingPage(e,t,n,i,s)),u;u=yield h.__await(l.next()),!u.done;){let d=u.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(d)))}}catch(d){a={error:d}}finally{try{u&&!u.done&&(c=l.return)&&(yield h.__await(c.call(l)))}finally{if(a)throw a.error}}})}_listByJob(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,jobName:i,options:s},bEt)}get(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,jobName:i,jobVersion:s,options:o},_Et)}_listByJobNext(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,jobAgentName:n,jobName:i,nextLink:s,options:o},SEt)}},dee=Pt.createSerializer(Et,!1),bEt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/jobAgents/{jobAgentName}/jobs/{jobName}/versions",httpMethod:"GET",responses:{200:{bodyMapper:F7},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,Rn,_s],headerParameters:[U],serializer:dee},_Et={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/jobAgents/{jobAgentName}/jobs/{jobName}/versions/{jobVersion}",httpMethod:"GET",responses:{200:{bodyMapper:vRe},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,Rn,_s,LU],headerParameters:[U],serializer:dee},SEt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:F7},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ft,Rn,_s],headerParameters:[U],serializer:dee},XX=class{constructor(e){this.client=e}listByLocation(e,t){return this.client.sendOperationRequest({locationName:e,options:t},PEt)}},CEt=Pt.createSerializer(Et,!1),PEt={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Sql/locations/{locationName}/capabilities",httpMethod:"GET",responses:{200:{bodyMapper:KIe},default:{}},queryParameters:[$,F_t],urlParameters:[M,k,jr],headerParameters:[U],serializer:CEt},JX=class{constructor(e){this.client=e}listByDatabase(e,t,n,i){let s=this.listByDatabasePagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByDatabasePagingPage(e,t,n,i)}}listByDatabasePagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByDatabase(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listByDatabaseNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listByDatabasePagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByDatabasePagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}get(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,policyName:i,options:s},wEt)}beginCreateOrUpdate(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){let a=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(u,d)}),c=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){var p;let m,f=(p=u.options)===null||p===void 0?void 0:p.onResponse,y=(C,P)=>{m=C,f?.(C,P)},v=Object.assign(Object.assign({},u),{options:Object.assign(Object.assign({},u.options),{onResponse:y})});return{flatResponse:yield a(v,d),rawResponse:{statusCode:m.status,body:m.parsedBody,headers:m.headers.toJSON()}}}),l=new bt(c,{resourceGroupName:e,serverName:t,databaseName:n,policyName:i,parameters:s,options:o},EEt);return new St.LroEngine(l,{resumeFrom:o?.resumeFrom,intervalInMs:o?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i,s,o)).pollUntilDone()})}_listByDatabase(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,options:i},TEt)}_listByDatabaseNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,nextLink:i,options:s},IEt)}},eB=Pt.createSerializer(Et,!1),wEt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/backupLongTermRetentionPolicies/{policyName}",httpMethod:"GET",responses:{200:{bodyMapper:hS},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,BRe],headerParameters:[U],serializer:eB},EEt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/backupLongTermRetentionPolicies/{policyName}",httpMethod:"PUT",responses:{200:{bodyMapper:hS},201:{bodyMapper:hS},202:{bodyMapper:hS},204:{bodyMapper:hS},default:{}},requestBody:j_t,queryParameters:[$],urlParameters:[M,k,q,X,ve,BRe],headerParameters:[U,Vt],mediaType:"json",serializer:eB},TEt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/backupLongTermRetentionPolicies",httpMethod:"GET",responses:{200:{bodyMapper:j7},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve],headerParameters:[U],serializer:eB},IEt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:j7},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,ft],headerParameters:[U],serializer:eB},ZX=class{constructor(e){this.client=e}get(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,maintenanceWindowOptionsName:i,options:s},xEt)}},REt=Pt.createSerializer(Et,!1),xEt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/maintenanceWindowOptions/current",httpMethod:"GET",responses:{200:{bodyMapper:bRe},default:{}},queryParameters:[$,U_t],urlParameters:[M,k,q,X,ve],headerParameters:[U],serializer:REt},eJ=class{constructor(e){this.client=e}get(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,maintenanceWindowName:i,options:s},OEt)}createOrUpdate(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,maintenanceWindowName:i,parameters:s,options:o},AEt)}},_xe=Pt.createSerializer(Et,!1),OEt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/maintenanceWindows/current",httpMethod:"GET",responses:{200:{bodyMapper:BZ},default:{}},queryParameters:[$,GRe],urlParameters:[M,k,q,X,ve],headerParameters:[U],serializer:_xe},AEt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/maintenanceWindows/current",httpMethod:"PUT",responses:{200:{},default:{}},requestBody:B_t,queryParameters:[$,GRe],urlParameters:[M,k,q,X,ve],headerParameters:[Vt],mediaType:"json",serializer:_xe},tJ=class{constructor(e){this.client=e}listByDatabase(e,t,n,i){let s=this.listByDatabasePagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByDatabasePagingPage(e,t,n,i)}}listByDatabasePagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByDatabase(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listByDatabaseNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listByDatabasePagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByDatabasePagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}get(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,policyName:i,options:s},NEt)}beginCreateOrUpdate(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){let a=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(u,d)}),c=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){var p;let m,f=(p=u.options)===null||p===void 0?void 0:p.onResponse,y=(C,P)=>{m=C,f?.(C,P)},v=Object.assign(Object.assign({},u),{options:Object.assign(Object.assign({},u.options),{onResponse:y})});return{flatResponse:yield a(v,d),rawResponse:{statusCode:m.status,body:m.parsedBody,headers:m.headers.toJSON()}}}),l=new bt(c,{resourceGroupName:e,managedInstanceName:t,databaseName:n,policyName:i,parameters:s,options:o},DEt);return new St.LroEngine(l,{resumeFrom:o?.resumeFrom,intervalInMs:o?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i,s,o)).pollUntilDone()})}beginUpdate(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){let a=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(u,d)}),c=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){var p;let m,f=(p=u.options)===null||p===void 0?void 0:p.onResponse,y=(C,P)=>{m=C,f?.(C,P)},v=Object.assign(Object.assign({},u),{options:Object.assign(Object.assign({},u.options),{onResponse:y})});return{flatResponse:yield a(v,d),rawResponse:{statusCode:m.status,body:m.parsedBody,headers:m.headers.toJSON()}}}),l=new bt(c,{resourceGroupName:e,managedInstanceName:t,databaseName:n,policyName:i,parameters:s,options:o},MEt);return new St.LroEngine(l,{resumeFrom:o?.resumeFrom,intervalInMs:o?.updateIntervalInMs})})}beginUpdateAndWait(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginUpdate(e,t,n,i,s,o)).pollUntilDone()})}_listByDatabase(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,options:i},kEt)}_listByDatabaseNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,nextLink:i,options:s},LEt)}},LN=Pt.createSerializer(Et,!1),NEt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/backupShortTermRetentionPolicies/{policyName}",httpMethod:"GET",responses:{200:{bodyMapper:pa},default:{}},queryParameters:[$],urlParameters:[M,k,q,ve,st,ME],headerParameters:[U],serializer:LN},DEt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/backupShortTermRetentionPolicies/{policyName}",httpMethod:"PUT",responses:{200:{bodyMapper:pa},201:{bodyMapper:pa},202:{bodyMapper:pa},204:{bodyMapper:pa},default:{}},requestBody:qU,queryParameters:[$],urlParameters:[M,k,q,ve,st,ME],headerParameters:[U,Vt],mediaType:"json",serializer:LN},MEt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/backupShortTermRetentionPolicies/{policyName}",httpMethod:"PATCH",responses:{200:{bodyMapper:pa},201:{bodyMapper:pa},202:{bodyMapper:pa},204:{bodyMapper:pa},default:{}},requestBody:qU,queryParameters:[$],urlParameters:[M,k,q,ve,st,ME],headerParameters:[U,Vt],mediaType:"json",serializer:LN},kEt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/backupShortTermRetentionPolicies",httpMethod:"GET",responses:{200:{bodyMapper:_N},default:{}},queryParameters:[$],urlParameters:[M,k,q,ve,st],headerParameters:[U],serializer:LN},LEt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:_N},default:{}},queryParameters:[$],urlParameters:[M,k,q,ve,ft,st],headerParameters:[U],serializer:LN},rJ=class{constructor(e){this.client=e}listByDatabase(e,t,n,i){let s=this.listByDatabasePagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByDatabasePagingPage(e,t,n,i)}}listByDatabasePagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByDatabase(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listByDatabaseNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listByDatabasePagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByDatabasePagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}listByTable(e,t,n,i,s,o){let a=this.listByTablePagingAll(e,t,n,i,s,o);return{next(){return a.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByTablePagingPage(e,t,n,i,s,o)}}listByTablePagingPage(e,t,n,i,s,o){return h.__asyncGenerator(this,arguments,function*(){let c=yield h.__await(this._listByTable(e,t,n,i,s,o));yield yield h.__await(c.value||[]);let l=c.nextLink;for(;l;)c=yield h.__await(this._listByTableNext(e,t,n,i,s,l,o)),l=c.nextLink,yield yield h.__await(c.value||[])})}listByTablePagingAll(e,t,n,i,s,o){return h.__asyncGenerator(this,arguments,function*(){var c,l;try{for(var u=h.__asyncValues(this.listByTablePagingPage(e,t,n,i,s,o)),d;d=yield h.__await(u.next()),!d.done;){let p=d.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(p)))}}catch(p){c={error:p}}finally{try{d&&!d.done&&(l=u.return)&&(yield h.__await(l.call(u)))}finally{if(c)throw c.error}}})}_listByDatabase(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,options:i},qEt)}_listByTable(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,schemaName:i,tableName:s,options:o},zEt)}get(e,t,n,i,s,o,a){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,schemaName:i,tableName:s,columnName:o,options:a},FEt)}_listByDatabaseNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,nextLink:i,options:s},jEt)}_listByTableNext(e,t,n,i,s,o,a){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,schemaName:i,tableName:s,nextLink:o,options:a},UEt)}},qN=Pt.createSerializer(Et,!1),qEt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/columns",httpMethod:"GET",responses:{200:{bodyMapper:ig},default:{}},queryParameters:[$,AU,NU,DU,MU,xE],urlParameters:[M,k,q,ve,st],headerParameters:[U],serializer:qN},zEt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/schemas/{schemaName}/tables/{tableName}/columns",httpMethod:"GET",responses:{200:{bodyMapper:ig},default:{}},queryParameters:[$,to],urlParameters:[M,k,q,ve,eo,Wa,st],headerParameters:[U],serializer:qN},FEt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/schemas/{schemaName}/tables/{tableName}/columns/{columnName}",httpMethod:"GET",responses:{200:{bodyMapper:zZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,ve,eo,Wa,Wd,st],headerParameters:[U],serializer:qN},jEt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:ig},default:{}},queryParameters:[$,AU,NU,DU,MU,xE],urlParameters:[M,k,q,ve,ft,st],headerParameters:[U],serializer:qN},UEt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:ig},default:{}},queryParameters:[$,to],urlParameters:[M,k,q,ve,ft,eo,Wa,st],headerParameters:[U],serializer:qN},nJ=class{constructor(e){this.client=e}listByQuery(e,t,n,i,s){let o=this.listByQueryPagingAll(e,t,n,i,s);return{next(){return o.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByQueryPagingPage(e,t,n,i,s)}}listByQueryPagingPage(e,t,n,i,s){return h.__asyncGenerator(this,arguments,function*(){let a=yield h.__await(this._listByQuery(e,t,n,i,s));yield yield h.__await(a.value||[]);let c=a.nextLink;for(;c;)a=yield h.__await(this._listByQueryNext(e,t,n,i,c,s)),c=a.nextLink,yield yield h.__await(a.value||[])})}listByQueryPagingAll(e,t,n,i,s){return h.__asyncGenerator(this,arguments,function*(){var a,c;try{for(var l=h.__asyncValues(this.listByQueryPagingPage(e,t,n,i,s)),u;u=yield h.__await(l.next()),!u.done;){let d=u.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(d)))}}catch(d){a={error:d}}finally{try{u&&!u.done&&(c=l.return)&&(yield h.__await(c.call(l)))}finally{if(a)throw a.error}}})}get(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,queryId:i,options:s},BEt)}_listByQuery(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,queryId:i,options:s},GEt)}_listByQueryNext(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,queryId:i,nextLink:s,options:o},$Et)}},pee=Pt.createSerializer(Et,!1),BEt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/queries/{queryId}",httpMethod:"GET",responses:{200:{bodyMapper:_Re},default:{}},queryParameters:[$],urlParameters:[M,k,q,ve,st,QZ],headerParameters:[U],serializer:pee},GEt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/queries/{queryId}/statistics",httpMethod:"GET",responses:{200:{bodyMapper:U7},default:{}},queryParameters:[$,zU,FU,jU],urlParameters:[M,k,q,ve,st,QZ],headerParameters:[U],serializer:pee},$Et={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:U7},default:{}},queryParameters:[$,zU,FU,jU],urlParameters:[M,k,q,ve,ft,st,QZ],headerParameters:[U],serializer:pee},iJ=class{constructor(e){this.client=e}get(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,restoreDetailsName:i,options:s},HEt)}},VEt=Pt.createSerializer(Et,!1),HEt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/restoreDetails/{restoreDetailsName}",httpMethod:"GET",responses:{200:{bodyMapper:SRe},default:{}},queryParameters:[$],urlParameters:[M,k,q,ve,st,G_t],headerParameters:[U],serializer:VEt},sJ=class{constructor(e){this.client=e}listByInstance(e,t,n){let i=this.listByInstancePagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByInstancePagingPage(e,t,n)}}listByInstancePagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByInstance(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByInstanceNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByInstancePagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByInstancePagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}listInaccessibleByInstance(e,t,n){let i=this.listInaccessibleByInstancePagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listInaccessibleByInstancePagingPage(e,t,n)}}listInaccessibleByInstancePagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listInaccessibleByInstance(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listInaccessibleByInstanceNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listInaccessibleByInstancePagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listInaccessibleByInstancePagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}_listByInstance(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,options:n},WEt)}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,options:i},KEt)}beginCreateOrUpdate(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,managedInstanceName:t,databaseName:n,parameters:i,options:s},QEt);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i,s)).pollUntilDone()})}beginDelete(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,managedInstanceName:t,databaseName:n,options:i},YEt);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginDeleteAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDelete(e,t,n,i)).pollUntilDone()})}beginUpdate(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,managedInstanceName:t,databaseName:n,parameters:i,options:s},XEt);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginUpdateAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginUpdate(e,t,n,i,s)).pollUntilDone()})}beginCompleteRestore(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,managedInstanceName:t,databaseName:n,parameters:i,options:s},JEt);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginCompleteRestoreAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCompleteRestore(e,t,n,i,s)).pollUntilDone()})}_listInaccessibleByInstance(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,options:n},ZEt)}_listByInstanceNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,nextLink:n,options:i},eTt)}_listInaccessibleByInstanceNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,nextLink:n,options:i},tTt)}},cg=Pt.createSerializer(Et,!1),WEt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases",httpMethod:"GET",responses:{200:{bodyMapper:SN},default:{}},queryParameters:[$],urlParameters:[M,k,q,st],headerParameters:[U],serializer:cg},KEt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}",httpMethod:"GET",responses:{200:{bodyMapper:lm},default:{}},queryParameters:[$],urlParameters:[M,k,q,ve,st],headerParameters:[U],serializer:cg},QEt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}",httpMethod:"PUT",responses:{200:{bodyMapper:lm},201:{bodyMapper:lm},202:{bodyMapper:lm},204:{bodyMapper:lm},default:{}},requestBody:$_t,queryParameters:[$],urlParameters:[M,k,q,ve,st],headerParameters:[U,Vt],mediaType:"json",serializer:cg},YEt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,ve,st],serializer:cg},XEt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}",httpMethod:"PATCH",responses:{200:{bodyMapper:lm},201:{bodyMapper:lm},202:{bodyMapper:lm},204:{bodyMapper:lm},default:{}},requestBody:V_t,queryParameters:[$],urlParameters:[M,k,q,ve,st],headerParameters:[U,Vt],mediaType:"json",serializer:cg},JEt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/completeRestore",httpMethod:"POST",responses:{200:{},201:{},202:{},204:{},default:{}},requestBody:H_t,queryParameters:[$],urlParameters:[M,k,q,ve,st],headerParameters:[Vt],mediaType:"json",serializer:cg},ZEt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/inaccessibleManagedDatabases",httpMethod:"GET",responses:{200:{bodyMapper:SN},default:{}},queryParameters:[$],urlParameters:[M,k,q,st],headerParameters:[U],serializer:cg},eTt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:SN},default:{}},queryParameters:[$],urlParameters:[M,k,q,ft,st],headerParameters:[U],serializer:cg},tTt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:SN},default:{}},queryParameters:[$],urlParameters:[M,k,q,ft,st],headerParameters:[U],serializer:cg},oJ=class{constructor(e){this.client=e}listByDatabase(e,t,n,i){let s=this.listByDatabasePagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByDatabasePagingPage(e,t,n,i)}}listByDatabasePagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByDatabase(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listByDatabaseNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listByDatabasePagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByDatabasePagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}_listByDatabase(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,options:i},rTt)}get(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,schemaName:i,options:s},nTt)}_listByDatabaseNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,nextLink:i,options:s},iTt)}},mee=Pt.createSerializer(Et,!1),rTt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/schemas",httpMethod:"GET",responses:{200:{bodyMapper:mN},default:{}},queryParameters:[$,to],urlParameters:[M,k,q,ve,st],headerParameters:[U],serializer:mee},nTt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/schemas/{schemaName}",httpMethod:"GET",responses:{200:{bodyMapper:FZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,ve,eo,st],headerParameters:[U],serializer:mee},iTt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:mN},default:{}},queryParameters:[$,to],urlParameters:[M,k,q,ve,ft,st],headerParameters:[U],serializer:mee},aJ=class{constructor(e){this.client=e}listByDatabase(e,t,n,i){let s=this.listByDatabasePagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByDatabasePagingPage(e,t,n,i)}}listByDatabasePagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByDatabase(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listByDatabaseNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listByDatabasePagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByDatabasePagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}get(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,securityAlertPolicyName:i,options:s},sTt)}createOrUpdate(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,securityAlertPolicyName:i,parameters:s,options:o},oTt)}_listByDatabase(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,options:i},aTt)}_listByDatabaseNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,nextLink:i,options:s},cTt)}},tB=Pt.createSerializer(Et,!1),sTt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/securityAlertPolicies/{securityAlertPolicyName}",httpMethod:"GET",responses:{200:{bodyMapper:cN},default:{}},queryParameters:[$],urlParameters:[M,k,q,ve,gv,st],headerParameters:[U],serializer:tB},oTt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/securityAlertPolicies/{securityAlertPolicyName}",httpMethod:"PUT",responses:{200:{bodyMapper:cN},201:{bodyMapper:cN},default:{}},requestBody:W_t,queryParameters:[$],urlParameters:[M,k,q,ve,gv,st],headerParameters:[U,Vt],mediaType:"json",serializer:tB},aTt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/securityAlertPolicies",httpMethod:"GET",responses:{200:{bodyMapper:B7},default:{}},queryParameters:[$],urlParameters:[M,k,q,ve,st],headerParameters:[U],serializer:tB},cTt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:B7},default:{}},queryParameters:[$],urlParameters:[M,k,q,ve,ft,st],headerParameters:[U],serializer:tB},cJ=class{constructor(e){this.client=e}listByDatabase(e,t,n,i){let s=this.listByDatabasePagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByDatabasePagingPage(e,t,n,i)}}listByDatabasePagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByDatabase(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listByDatabaseNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listByDatabasePagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByDatabasePagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}_listByDatabase(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,options:i},lTt)}_listByDatabaseNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,nextLink:i,options:s},uTt)}},Sxe=Pt.createSerializer(Et,!1),lTt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/securityEvents",httpMethod:"GET",responses:{200:{bodyMapper:G7},default:{}},queryParameters:[pu,$,xE,to,Kd],urlParameters:[M,k,q,ve,st],headerParameters:[U],serializer:Sxe},uTt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:G7},default:{}},queryParameters:[pu,$,xE,to,Kd],urlParameters:[M,k,q,ve,ft,st],headerParameters:[U],serializer:Sxe},lJ=class{constructor(e){this.client=e}listCurrentByDatabase(e,t,n,i){let s=this.listCurrentByDatabasePagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listCurrentByDatabasePagingPage(e,t,n,i)}}listCurrentByDatabasePagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listCurrentByDatabase(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listCurrentByDatabaseNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listCurrentByDatabasePagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listCurrentByDatabasePagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}listRecommendedByDatabase(e,t,n,i){let s=this.listRecommendedByDatabasePagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listRecommendedByDatabasePagingPage(e,t,n,i)}}listRecommendedByDatabasePagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listRecommendedByDatabase(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listRecommendedByDatabaseNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listRecommendedByDatabasePagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listRecommendedByDatabasePagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}get(e,t,n,i,s,o,a,c){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,schemaName:i,tableName:s,columnName:o,sensitivityLabelSource:a,options:c},dTt)}createOrUpdate(e,t,n,i,s,o,a,c){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,schemaName:i,tableName:s,columnName:o,parameters:a,options:c},pTt)}delete(e,t,n,i,s,o,a){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,schemaName:i,tableName:s,columnName:o,options:a},mTt)}disableRecommendation(e,t,n,i,s,o,a){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,schemaName:i,tableName:s,columnName:o,options:a},hTt)}enableRecommendation(e,t,n,i,s,o,a){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,schemaName:i,tableName:s,columnName:o,options:a},fTt)}_listCurrentByDatabase(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,options:i},gTt)}update(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,parameters:i,options:s},yTt)}_listRecommendedByDatabase(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,options:i},vTt)}_listCurrentByDatabaseNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,nextLink:i,options:s},bTt)}_listRecommendedByDatabaseNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,nextLink:i,options:s},_Tt)}},Rh=Pt.createSerializer(Et,!1),dTt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/schemas/{schemaName}/tables/{tableName}/columns/{columnName}/sensitivityLabels/{sensitivityLabelSource}",httpMethod:"GET",responses:{200:{bodyMapper:hv},default:{}},queryParameters:[$],urlParameters:[M,k,q,ve,eo,Wa,Wd,st,$Re],headerParameters:[U],serializer:Rh},pTt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/schemas/{schemaName}/tables/{tableName}/columns/{columnName}/sensitivityLabels/{sensitivityLabelSource}",httpMethod:"PUT",responses:{200:{bodyMapper:hv},201:{bodyMapper:hv},default:{}},requestBody:VRe,queryParameters:[$],urlParameters:[M,k,q,ve,eo,Wa,Wd,st,UU],headerParameters:[U,Vt],mediaType:"json",serializer:Rh},mTt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/schemas/{schemaName}/tables/{tableName}/columns/{columnName}/sensitivityLabels/{sensitivityLabelSource}",httpMethod:"DELETE",responses:{200:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,ve,eo,Wa,Wd,st,UU],serializer:Rh},hTt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/schemas/{schemaName}/tables/{tableName}/columns/{columnName}/sensitivityLabels/{sensitivityLabelSource}/disable",httpMethod:"POST",responses:{200:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,ve,eo,Wa,Wd,st,BU],serializer:Rh},fTt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/schemas/{schemaName}/tables/{tableName}/columns/{columnName}/sensitivityLabels/{sensitivityLabelSource}/enable",httpMethod:"POST",responses:{200:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,ve,eo,Wa,Wd,st,BU],serializer:Rh},gTt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/currentSensitivityLabels",httpMethod:"GET",responses:{200:{bodyMapper:sg},default:{}},queryParameters:[Ch,$,to,GU],urlParameters:[M,k,q,ve,st],headerParameters:[U],serializer:Rh},yTt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/currentSensitivityLabels",httpMethod:"PATCH",responses:{200:{},default:{}},requestBody:HRe,queryParameters:[$],urlParameters:[M,k,q,ve,st],headerParameters:[Vt],mediaType:"json",serializer:Rh},vTt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/recommendedSensitivityLabels",httpMethod:"GET",responses:{200:{bodyMapper:sg},default:{}},queryParameters:[Ch,$,to,$U],urlParameters:[M,k,q,ve,st],headerParameters:[U],serializer:Rh},bTt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:sg},default:{}},queryParameters:[Ch,$,to,GU],urlParameters:[M,k,q,ve,ft,st],headerParameters:[U],serializer:Rh},_Tt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:sg},default:{}},queryParameters:[Ch,$,to,$U],urlParameters:[M,k,q,ve,ft,st],headerParameters:[U],serializer:Rh},uJ=class{constructor(e){this.client=e}update(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,parameters:i,options:s},CTt)}},STt=Pt.createSerializer(Et,!1),CTt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/recommendedSensitivityLabels",httpMethod:"PATCH",responses:{200:{},default:{}},requestBody:WRe,queryParameters:[$],urlParameters:[M,k,q,ve,st],headerParameters:[Vt],mediaType:"json",serializer:STt},dJ=class{constructor(e){this.client=e}listBySchema(e,t,n,i,s){let o=this.listBySchemaPagingAll(e,t,n,i,s);return{next(){return o.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listBySchemaPagingPage(e,t,n,i,s)}}listBySchemaPagingPage(e,t,n,i,s){return h.__asyncGenerator(this,arguments,function*(){let a=yield h.__await(this._listBySchema(e,t,n,i,s));yield yield h.__await(a.value||[]);let c=a.nextLink;for(;c;)a=yield h.__await(this._listBySchemaNext(e,t,n,i,c,s)),c=a.nextLink,yield yield h.__await(a.value||[])})}listBySchemaPagingAll(e,t,n,i,s){return h.__asyncGenerator(this,arguments,function*(){var a,c;try{for(var l=h.__asyncValues(this.listBySchemaPagingPage(e,t,n,i,s)),u;u=yield h.__await(l.next()),!u.done;){let d=u.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(d)))}}catch(d){a={error:d}}finally{try{u&&!u.done&&(c=l.return)&&(yield h.__await(c.call(l)))}finally{if(a)throw a.error}}})}_listBySchema(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,schemaName:i,options:s},PTt)}get(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,schemaName:i,tableName:s,options:o},wTt)}_listBySchemaNext(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,schemaName:i,nextLink:s,options:o},ETt)}},hee=Pt.createSerializer(Et,!1),PTt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/schemas/{schemaName}/tables",httpMethod:"GET",responses:{200:{bodyMapper:hN},default:{}},queryParameters:[$,to],urlParameters:[M,k,q,ve,eo,st],headerParameters:[U],serializer:hee},wTt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/schemas/{schemaName}/tables/{tableName}",httpMethod:"GET",responses:{200:{bodyMapper:jZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,ve,eo,Wa,st],headerParameters:[U],serializer:hee},ETt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:hN},default:{}},queryParameters:[$,to],urlParameters:[M,k,q,ve,ft,eo,st],headerParameters:[U],serializer:hee},pJ=class{constructor(e){this.client=e}listByDatabase(e,t,n,i){let s=this.listByDatabasePagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByDatabasePagingPage(e,t,n,i)}}listByDatabasePagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByDatabase(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listByDatabaseNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listByDatabasePagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByDatabasePagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}get(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,tdeName:i,options:s},TTt)}createOrUpdate(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,tdeName:i,parameters:s,options:o},ITt)}_listByDatabase(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,options:i},RTt)}_listByDatabaseNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,nextLink:i,options:s},xTt)}},rB=Pt.createSerializer(Et,!1),TTt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/transparentDataEncryption/{tdeName}",httpMethod:"GET",responses:{200:{bodyMapper:lN},default:{}},queryParameters:[$],urlParameters:[M,k,q,ve,st,VU],headerParameters:[U],serializer:rB},ITt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/transparentDataEncryption/{tdeName}",httpMethod:"PUT",responses:{200:{bodyMapper:lN},201:{bodyMapper:lN},default:{}},requestBody:K_t,queryParameters:[$],urlParameters:[M,k,q,ve,st,VU],headerParameters:[U,Vt],mediaType:"json",serializer:rB},RTt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/transparentDataEncryption",httpMethod:"GET",responses:{200:{bodyMapper:$7},default:{}},queryParameters:[$],urlParameters:[M,k,q,ve,st],headerParameters:[U],serializer:rB},xTt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:$7},default:{}},queryParameters:[$],urlParameters:[M,k,q,ve,ft,st],headerParameters:[U],serializer:rB},mJ=class{constructor(e){this.client=e}get(e,t,n,i,s,o,a){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,vulnerabilityAssessmentName:i,ruleId:s,baselineName:o,options:a},OTt)}createOrUpdate(e,t,n,i,s,o,a,c){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,vulnerabilityAssessmentName:i,ruleId:s,baselineName:o,parameters:a,options:c},ATt)}delete(e,t,n,i,s,o,a){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,vulnerabilityAssessmentName:i,ruleId:s,baselineName:o,options:a},NTt)}},fee=Pt.createSerializer(Et,!1),OTt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/vulnerabilityAssessments/{vulnerabilityAssessmentName}/rules/{ruleId}/baselines/{baselineName}",httpMethod:"GET",responses:{200:{bodyMapper:RE},default:{}},queryParameters:[$],urlParameters:[M,k,q,ve,bs,OE,AE,st],headerParameters:[U],serializer:fee},ATt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/vulnerabilityAssessments/{vulnerabilityAssessmentName}/rules/{ruleId}/baselines/{baselineName}",httpMethod:"PUT",responses:{200:{bodyMapper:RE},default:{}},requestBody:FRe,queryParameters:[$],urlParameters:[M,k,q,ve,bs,OE,AE,st],headerParameters:[U,Vt],mediaType:"json",serializer:fee},NTt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/vulnerabilityAssessments/{vulnerabilityAssessmentName}/rules/{ruleId}/baselines/{baselineName}",httpMethod:"DELETE",responses:{200:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,ve,bs,OE,AE,st],serializer:fee},hJ=class{constructor(e){this.client=e}listByDatabase(e,t,n,i){let s=this.listByDatabasePagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByDatabasePagingPage(e,t,n,i)}}listByDatabasePagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByDatabase(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listByDatabaseNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listByDatabasePagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByDatabasePagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}get(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,vulnerabilityAssessmentName:i,options:s},DTt)}createOrUpdate(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,vulnerabilityAssessmentName:i,parameters:s,options:o},MTt)}delete(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,vulnerabilityAssessmentName:i,options:s},kTt)}_listByDatabase(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,options:i},LTt)}_listByDatabaseNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,nextLink:i,options:s},qTt)}},zN=Pt.createSerializer(Et,!1),DTt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/vulnerabilityAssessments/{vulnerabilityAssessmentName}",httpMethod:"GET",responses:{200:{bodyMapper:mv},default:{}},queryParameters:[$],urlParameters:[M,k,q,ve,bs,st],headerParameters:[U],serializer:zN},MTt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/vulnerabilityAssessments/{vulnerabilityAssessmentName}",httpMethod:"PUT",responses:{200:{bodyMapper:mv},201:{bodyMapper:mv},default:{}},requestBody:jRe,queryParameters:[$],urlParameters:[M,k,q,ve,bs,st],headerParameters:[U,Vt],mediaType:"json",serializer:zN},kTt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/vulnerabilityAssessments/{vulnerabilityAssessmentName}",httpMethod:"DELETE",responses:{200:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,ve,bs,st],serializer:zN},LTt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/vulnerabilityAssessments",httpMethod:"GET",responses:{200:{bodyMapper:fN},default:{}},queryParameters:[$],urlParameters:[M,k,q,ve,st],headerParameters:[U],serializer:zN},qTt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:fN},default:{}},queryParameters:[$],urlParameters:[M,k,q,ve,ft,st],headerParameters:[U],serializer:zN},fJ=class{constructor(e){this.client=e}listByDatabase(e,t,n,i,s){let o=this.listByDatabasePagingAll(e,t,n,i,s);return{next(){return o.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByDatabasePagingPage(e,t,n,i,s)}}listByDatabasePagingPage(e,t,n,i,s){return h.__asyncGenerator(this,arguments,function*(){let a=yield h.__await(this._listByDatabase(e,t,n,i,s));yield yield h.__await(a.value||[]);let c=a.nextLink;for(;c;)a=yield h.__await(this._listByDatabaseNext(e,t,n,i,c,s)),c=a.nextLink,yield yield h.__await(a.value||[])})}listByDatabasePagingAll(e,t,n,i,s){return h.__asyncGenerator(this,arguments,function*(){var a,c;try{for(var l=h.__asyncValues(this.listByDatabasePagingPage(e,t,n,i,s)),u;u=yield h.__await(l.next()),!u.done;){let d=u.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(d)))}}catch(d){a={error:d}}finally{try{u&&!u.done&&(c=l.return)&&(yield h.__await(c.call(l)))}finally{if(a)throw a.error}}})}beginInitiateScan(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){let a=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(u,d)}),c=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){var p;let m,f=(p=u.options)===null||p===void 0?void 0:p.onResponse,y=(C,P)=>{m=C,f?.(C,P)},v=Object.assign(Object.assign({},u),{options:Object.assign(Object.assign({},u.options),{onResponse:y})});return{flatResponse:yield a(v,d),rawResponse:{statusCode:m.status,body:m.parsedBody,headers:m.headers.toJSON()}}}),l=new bt(c,{resourceGroupName:e,managedInstanceName:t,databaseName:n,vulnerabilityAssessmentName:i,scanId:s,options:o},zTt);return new St.LroEngine(l,{resumeFrom:o?.resumeFrom,intervalInMs:o?.updateIntervalInMs})})}beginInitiateScanAndWait(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginInitiateScan(e,t,n,i,s,o)).pollUntilDone()})}export(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,vulnerabilityAssessmentName:i,scanId:s,options:o},FTt)}_listByDatabase(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,vulnerabilityAssessmentName:i,options:s},jTt)}get(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,vulnerabilityAssessmentName:i,scanId:s,options:o},UTt)}_listByDatabaseNext(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,vulnerabilityAssessmentName:i,nextLink:s,options:o},BTt)}},FN=Pt.createSerializer(Et,!1),zTt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/vulnerabilityAssessments/{vulnerabilityAssessmentName}/scans/{scanId}/initiateScan",httpMethod:"POST",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,ve,bs,NE,st],serializer:FN},FTt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/vulnerabilityAssessments/{vulnerabilityAssessmentName}/scans/{scanId}/export",httpMethod:"POST",responses:{200:{bodyMapper:iN},201:{bodyMapper:iN},default:{}},queryParameters:[$],urlParameters:[M,k,q,ve,bs,NE,st],headerParameters:[U],serializer:FN},jTt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/vulnerabilityAssessments/{vulnerabilityAssessmentName}/scans",httpMethod:"GET",responses:{200:{bodyMapper:gN},default:{}},queryParameters:[$],urlParameters:[M,k,q,ve,bs,st],headerParameters:[U],serializer:FN},UTt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/vulnerabilityAssessments/{vulnerabilityAssessmentName}/scans/{scanId}",httpMethod:"GET",responses:{200:{bodyMapper:UZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,ve,bs,NE,st],headerParameters:[U],serializer:FN},BTt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:gN},default:{}},queryParameters:[$],urlParameters:[M,k,q,ve,ft,bs,st],headerParameters:[U],serializer:FN},gJ=class{constructor(e){this.client=e}listByInstance(e,t,n){let i=this.listByInstancePagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByInstancePagingPage(e,t,n)}}listByInstancePagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByInstance(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByInstanceNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByInstancePagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByInstancePagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}_listByInstance(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,options:n},GTt)}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,administratorName:n,options:i},$Tt)}beginCreateOrUpdate(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,managedInstanceName:t,administratorName:n,parameters:i,options:s},VTt);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i,s)).pollUntilDone()})}beginDelete(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,managedInstanceName:t,administratorName:n,options:i},HTt);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginDeleteAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDelete(e,t,n,i)).pollUntilDone()})}_listByInstanceNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,nextLink:n,options:i},WTt)}},jN=Pt.createSerializer(Et,!1),GTt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/administrators",httpMethod:"GET",responses:{200:{bodyMapper:V7},default:{}},queryParameters:[$],urlParameters:[M,k,q,st],headerParameters:[U],serializer:jN},$Tt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/administrators/{administratorName}",httpMethod:"GET",responses:{200:{bodyMapper:fS},default:{}},queryParameters:[$],urlParameters:[M,k,q,st,kE],headerParameters:[U],serializer:jN},VTt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/administrators/{administratorName}",httpMethod:"PUT",responses:{200:{bodyMapper:fS},201:{bodyMapper:fS},202:{bodyMapper:fS},204:{bodyMapper:fS},default:{}},requestBody:Q_t,queryParameters:[$],urlParameters:[M,k,q,st,kE],headerParameters:[U,Vt],mediaType:"json",serializer:jN},HTt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/administrators/{administratorName}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,st,kE],serializer:jN},WTt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:V7},default:{}},queryParameters:[$],urlParameters:[M,k,q,ft,st],headerParameters:[U],serializer:jN},yJ=class{constructor(e){this.client=e}listByInstance(e,t,n){let i=this.listByInstancePagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByInstancePagingPage(e,t,n)}}listByInstancePagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByInstance(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByInstanceNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByInstancePagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByInstancePagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,authenticationName:n,options:i},KTt)}beginCreateOrUpdate(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,managedInstanceName:t,authenticationName:n,parameters:i,options:s},QTt);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i,s)).pollUntilDone()})}beginDelete(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,managedInstanceName:t,authenticationName:n,options:i},YTt);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginDeleteAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDelete(e,t,n,i)).pollUntilDone()})}_listByInstance(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,options:n},XTt)}_listByInstanceNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,nextLink:n,options:i},JTt)}},UN=Pt.createSerializer(Et,!1),KTt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/azureADOnlyAuthentications/{authenticationName}",httpMethod:"GET",responses:{200:{bodyMapper:gS},default:{}},queryParameters:[$],urlParameters:[M,k,q,st,LE],headerParameters:[U],serializer:UN},QTt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/azureADOnlyAuthentications/{authenticationName}",httpMethod:"PUT",responses:{200:{bodyMapper:gS},201:{bodyMapper:gS},202:{bodyMapper:gS},204:{bodyMapper:gS},default:{}},requestBody:Y_t,queryParameters:[$],urlParameters:[M,k,q,st,LE],headerParameters:[U,Vt],mediaType:"json",serializer:UN},YTt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/azureADOnlyAuthentications/{authenticationName}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,st,LE],serializer:UN},XTt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/azureADOnlyAuthentications",httpMethod:"GET",responses:{200:{bodyMapper:H7},default:{}},queryParameters:[$],urlParameters:[M,k,q,st],headerParameters:[U],serializer:UN},JTt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:H7},default:{}},queryParameters:[$],urlParameters:[M,k,q,ft,st],headerParameters:[U],serializer:UN},vJ=class{constructor(e){this.client=e}listByInstance(e,t,n){let i=this.listByInstancePagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByInstancePagingPage(e,t,n)}}listByInstancePagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByInstance(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByInstanceNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByInstancePagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByInstancePagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}beginRevalidate(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,managedInstanceName:t,encryptionProtectorName:n,options:i},ZTt);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginRevalidateAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginRevalidate(e,t,n,i)).pollUntilDone()})}_listByInstance(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,options:n},e0t)}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,encryptionProtectorName:n,options:i},t0t)}beginCreateOrUpdate(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,managedInstanceName:t,encryptionProtectorName:n,parameters:i,options:s},r0t);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i,s)).pollUntilDone()})}_listByInstanceNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,nextLink:n,options:i},n0t)}},BN=Pt.createSerializer(Et,!1),ZTt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/encryptionProtector/{encryptionProtectorName}/revalidate",httpMethod:"POST",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,DE,st],serializer:BN},e0t={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/encryptionProtector",httpMethod:"GET",responses:{200:{bodyMapper:W7},default:{}},queryParameters:[$],urlParameters:[M,k,q,st],headerParameters:[U],serializer:BN},t0t={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/encryptionProtector/{encryptionProtectorName}",httpMethod:"GET",responses:{200:{bodyMapper:yS},default:{}},queryParameters:[$],urlParameters:[M,k,q,DE,st],headerParameters:[U],serializer:BN},r0t={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/encryptionProtector/{encryptionProtectorName}",httpMethod:"PUT",responses:{200:{bodyMapper:yS},201:{bodyMapper:yS},202:{bodyMapper:yS},204:{bodyMapper:yS},default:{}},requestBody:X_t,queryParameters:[$],urlParameters:[M,k,q,DE,st],headerParameters:[U,Vt],mediaType:"json",serializer:BN},n0t={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:W7},default:{}},queryParameters:[$],urlParameters:[M,k,q,ft,st],headerParameters:[U],serializer:BN},bJ=class{constructor(e){this.client=e}listByInstance(e,t,n){let i=this.listByInstancePagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByInstancePagingPage(e,t,n)}}listByInstancePagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByInstance(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByInstanceNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByInstancePagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByInstancePagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}_listByInstance(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,options:n},i0t)}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,keyName:n,options:i},s0t)}beginCreateOrUpdate(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,managedInstanceName:t,keyName:n,parameters:i,options:s},o0t);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i,s)).pollUntilDone()})}beginDelete(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,managedInstanceName:t,keyName:n,options:i},a0t);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginDeleteAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDelete(e,t,n,i)).pollUntilDone()})}_listByInstanceNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,nextLink:n,options:i},c0t)}},GN=Pt.createSerializer(Et,!1),i0t={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/keys",httpMethod:"GET",responses:{200:{bodyMapper:K7},default:{}},queryParameters:[$,to],urlParameters:[M,k,q,st],headerParameters:[U],serializer:GN},s0t={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/keys/{keyName}",httpMethod:"GET",responses:{200:{bodyMapper:vS},default:{}},queryParameters:[$],urlParameters:[M,k,q,st,qE],headerParameters:[U],serializer:GN},o0t={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/keys/{keyName}",httpMethod:"PUT",responses:{200:{bodyMapper:vS},201:{bodyMapper:vS},202:{bodyMapper:vS},204:{bodyMapper:vS},default:{}},requestBody:J_t,queryParameters:[$],urlParameters:[M,k,q,st,qE],headerParameters:[U,Vt],mediaType:"json",serializer:GN},a0t={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/keys/{keyName}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,st,qE],serializer:GN},c0t={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:K7},default:{}},queryParameters:[$,to],urlParameters:[M,k,q,ft,st],headerParameters:[U],serializer:GN},_J=class{constructor(e){this.client=e}listByDatabase(e,t,n,i){let s=this.listByDatabasePagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByDatabasePagingPage(e,t,n,i)}}listByDatabasePagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByDatabase(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listByDatabaseNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listByDatabasePagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByDatabasePagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}get(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,policyName:i,options:s},l0t)}beginCreateOrUpdate(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){let a=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(u,d)}),c=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){var p;let m,f=(p=u.options)===null||p===void 0?void 0:p.onResponse,y=(C,P)=>{m=C,f?.(C,P)},v=Object.assign(Object.assign({},u),{options:Object.assign(Object.assign({},u.options),{onResponse:y})});return{flatResponse:yield a(v,d),rawResponse:{statusCode:m.status,body:m.parsedBody,headers:m.headers.toJSON()}}}),l=new bt(c,{resourceGroupName:e,managedInstanceName:t,databaseName:n,policyName:i,parameters:s,options:o},u0t);return new St.LroEngine(l,{resumeFrom:o?.resumeFrom,intervalInMs:o?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i,s,o)).pollUntilDone()})}_listByDatabase(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,options:i},d0t)}_listByDatabaseNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,databaseName:n,nextLink:i,options:s},p0t)}},nB=Pt.createSerializer(Et,!1),l0t={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/backupLongTermRetentionPolicies/{policyName}",httpMethod:"GET",responses:{200:{bodyMapper:bS},default:{}},queryParameters:[$],urlParameters:[M,k,q,ve,st,KRe],headerParameters:[U],serializer:nB},u0t={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/backupLongTermRetentionPolicies/{policyName}",httpMethod:"PUT",responses:{200:{bodyMapper:bS},201:{bodyMapper:bS},202:{bodyMapper:bS},204:{bodyMapper:bS},default:{}},requestBody:Z_t,queryParameters:[$],urlParameters:[M,k,q,ve,st,KRe],headerParameters:[U,Vt],mediaType:"json",serializer:nB},d0t={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/databases/{databaseName}/backupLongTermRetentionPolicies",httpMethod:"GET",responses:{200:{bodyMapper:Q7},default:{}},queryParameters:[$],urlParameters:[M,k,q,ve,st],headerParameters:[U],serializer:nB},p0t={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Q7},default:{}},queryParameters:[$],urlParameters:[M,k,q,ve,ft,st],headerParameters:[U],serializer:nB},SJ=class{constructor(e){this.client=e}listByManagedInstance(e,t,n){let i=this.listByManagedInstancePagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByManagedInstancePagingPage(e,t,n)}}listByManagedInstancePagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByManagedInstance(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByManagedInstanceNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByManagedInstancePagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByManagedInstancePagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}_listByManagedInstance(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,options:n},m0t)}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,operationId:n,options:i},h0t)}cancel(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,operationId:n,options:i},f0t)}_listByManagedInstanceNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,nextLink:n,options:i},g0t)}},iB=Pt.createSerializer(Et,!1),m0t={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/operations",httpMethod:"GET",responses:{200:{bodyMapper:Y7},default:{}},queryParameters:[$],urlParameters:[M,k,q,st],headerParameters:[U],serializer:iB},h0t={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/operations/{operationId}",httpMethod:"GET",responses:{200:{bodyMapper:CRe},default:{}},queryParameters:[$],urlParameters:[M,k,q,kU,st],headerParameters:[U],serializer:iB},f0t={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/operations/{operationId}/cancel",httpMethod:"POST",responses:{200:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,kU,st],serializer:iB},g0t={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Y7},default:{}},queryParameters:[$],urlParameters:[M,k,q,ft,st],headerParameters:[U],serializer:iB},CJ=class{constructor(e){this.client=e}listByManagedInstance(e,t,n){let i=this.listByManagedInstancePagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByManagedInstancePagingPage(e,t,n)}}listByManagedInstancePagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByManagedInstance(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByManagedInstanceNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByManagedInstancePagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByManagedInstancePagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,privateEndpointConnectionName:n,options:i},y0t)}beginCreateOrUpdate(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,managedInstanceName:t,privateEndpointConnectionName:n,parameters:i,options:s},v0t);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i,s)).pollUntilDone()})}beginDelete(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,managedInstanceName:t,privateEndpointConnectionName:n,options:i},b0t);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginDeleteAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDelete(e,t,n,i)).pollUntilDone()})}_listByManagedInstance(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,options:n},_0t)}_listByManagedInstanceNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,nextLink:n,options:i},S0t)}},$N=Pt.createSerializer(Et,!1),y0t={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/privateEndpointConnections/{privateEndpointConnectionName}",httpMethod:"GET",responses:{200:{bodyMapper:_S},default:{}},queryParameters:[$],urlParameters:[M,k,q,st,zE],headerParameters:[U],serializer:$N},v0t={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/privateEndpointConnections/{privateEndpointConnectionName}",httpMethod:"PUT",responses:{200:{bodyMapper:_S},201:{bodyMapper:_S},202:{bodyMapper:_S},204:{bodyMapper:_S},default:{}},requestBody:eSt,queryParameters:[$],urlParameters:[M,k,q,st,zE],headerParameters:[U,Vt],mediaType:"json",serializer:$N},b0t={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/privateEndpointConnections/{privateEndpointConnectionName}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,st,zE],serializer:$N},_0t={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/privateEndpointConnections",httpMethod:"GET",responses:{200:{bodyMapper:X7},default:{}},queryParameters:[$],urlParameters:[M,k,q,st],headerParameters:[U],serializer:$N},S0t={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:X7},default:{}},queryParameters:[$],urlParameters:[M,k,q,ft,st],headerParameters:[U],serializer:$N},PJ=class{constructor(e){this.client=e}listByManagedInstance(e,t,n){let i=this.listByManagedInstancePagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByManagedInstancePagingPage(e,t,n)}}listByManagedInstancePagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByManagedInstance(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByManagedInstanceNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByManagedInstancePagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByManagedInstancePagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}_listByManagedInstance(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,options:n},C0t)}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,groupName:n,options:i},P0t)}_listByManagedInstanceNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,nextLink:n,options:i},w0t)}},gee=Pt.createSerializer(Et,!1),C0t={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/privateLinkResources",httpMethod:"GET",responses:{200:{bodyMapper:J7},default:{}},queryParameters:[$],urlParameters:[M,k,q,st],headerParameters:[U],serializer:gee},P0t={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/privateLinkResources/{groupName}",httpMethod:"GET",responses:{200:{bodyMapper:PRe},default:{}},queryParameters:[$],urlParameters:[M,k,q,st,QRe],headerParameters:[U],serializer:gee},w0t={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:J7},default:{}},queryParameters:[$],urlParameters:[M,k,q,ft,st],headerParameters:[U],serializer:gee},wJ=class{constructor(e){this.client=e}beginCreate(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,managedInstanceName:t,parameters:n,options:i},T0t);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginCreateAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreate(e,t,n,i)).pollUntilDone()})}},E0t=Pt.createSerializer(Et,!1),T0t={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/tdeCertificates",httpMethod:"POST",responses:{200:{},201:{},202:{},204:{},default:{}},requestBody:YRe,queryParameters:[$],urlParameters:[M,k,q,st],headerParameters:[Vt],mediaType:"json",serializer:E0t},EJ=class{constructor(e){this.client=e}listByInstance(e,t,n){let i=this.listByInstancePagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByInstancePagingPage(e,t,n)}}listByInstancePagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByInstance(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByInstanceNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByInstancePagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByInstancePagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,vulnerabilityAssessmentName:n,options:i},I0t)}createOrUpdate(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,vulnerabilityAssessmentName:n,parameters:i,options:s},R0t)}delete(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,vulnerabilityAssessmentName:n,options:i},x0t)}_listByInstance(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,options:n},O0t)}_listByInstanceNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,nextLink:n,options:i},A0t)}},VN=Pt.createSerializer(Et,!1),I0t={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/vulnerabilityAssessments/{vulnerabilityAssessmentName}",httpMethod:"GET",responses:{200:{bodyMapper:uN},default:{}},queryParameters:[$],urlParameters:[M,k,q,bs,st],headerParameters:[U],serializer:VN},R0t={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/vulnerabilityAssessments/{vulnerabilityAssessmentName}",httpMethod:"PUT",responses:{200:{bodyMapper:uN},201:{bodyMapper:uN},default:{}},requestBody:tSt,queryParameters:[$],urlParameters:[M,k,q,bs,st],headerParameters:[U,Vt],mediaType:"json",serializer:VN},x0t={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/vulnerabilityAssessments/{vulnerabilityAssessmentName}",httpMethod:"DELETE",responses:{200:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,bs,st],serializer:VN},O0t={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/vulnerabilityAssessments",httpMethod:"GET",responses:{200:{bodyMapper:Z7},default:{}},queryParameters:[$],urlParameters:[M,k,q,st],headerParameters:[U],serializer:VN},A0t={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Z7},default:{}},queryParameters:[$],urlParameters:[M,k,q,ft,st],headerParameters:[U],serializer:VN},TJ=class{constructor(e){this.client=e}listByRestorableDroppedDatabase(e,t,n,i){let s=this.listByRestorableDroppedDatabasePagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByRestorableDroppedDatabasePagingPage(e,t,n,i)}}listByRestorableDroppedDatabasePagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByRestorableDroppedDatabase(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listByRestorableDroppedDatabaseNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listByRestorableDroppedDatabasePagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByRestorableDroppedDatabasePagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}get(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,restorableDroppedDatabaseId:n,policyName:i,options:s},N0t)}beginCreateOrUpdate(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){let a=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(u,d)}),c=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){var p;let m,f=(p=u.options)===null||p===void 0?void 0:p.onResponse,y=(C,P)=>{m=C,f?.(C,P)},v=Object.assign(Object.assign({},u),{options:Object.assign(Object.assign({},u.options),{onResponse:y})});return{flatResponse:yield a(v,d),rawResponse:{statusCode:m.status,body:m.parsedBody,headers:m.headers.toJSON()}}}),l=new bt(c,{resourceGroupName:e,managedInstanceName:t,restorableDroppedDatabaseId:n,policyName:i,parameters:s,options:o},D0t);return new St.LroEngine(l,{resumeFrom:o?.resumeFrom,intervalInMs:o?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i,s,o)).pollUntilDone()})}beginUpdate(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){let a=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(u,d)}),c=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){var p;let m,f=(p=u.options)===null||p===void 0?void 0:p.onResponse,y=(C,P)=>{m=C,f?.(C,P)},v=Object.assign(Object.assign({},u),{options:Object.assign(Object.assign({},u.options),{onResponse:y})});return{flatResponse:yield a(v,d),rawResponse:{statusCode:m.status,body:m.parsedBody,headers:m.headers.toJSON()}}}),l=new bt(c,{resourceGroupName:e,managedInstanceName:t,restorableDroppedDatabaseId:n,policyName:i,parameters:s,options:o},M0t);return new St.LroEngine(l,{resumeFrom:o?.resumeFrom,intervalInMs:o?.updateIntervalInMs})})}beginUpdateAndWait(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginUpdate(e,t,n,i,s,o)).pollUntilDone()})}_listByRestorableDroppedDatabase(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,restorableDroppedDatabaseId:n,options:i},k0t)}_listByRestorableDroppedDatabaseNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,restorableDroppedDatabaseId:n,nextLink:i,options:s},L0t)}},HN=Pt.createSerializer(Et,!1),N0t={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/restorableDroppedDatabases/{restorableDroppedDatabaseId}/backupShortTermRetentionPolicies/{policyName}",httpMethod:"GET",responses:{200:{bodyMapper:pa},default:{}},queryParameters:[$],urlParameters:[M,k,q,st,ME,zS],headerParameters:[U],serializer:HN},D0t={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/restorableDroppedDatabases/{restorableDroppedDatabaseId}/backupShortTermRetentionPolicies/{policyName}",httpMethod:"PUT",responses:{200:{bodyMapper:pa},201:{bodyMapper:pa},202:{bodyMapper:pa},204:{bodyMapper:pa},default:{}},requestBody:qU,queryParameters:[$],urlParameters:[M,k,q,st,ME,zS],headerParameters:[U,Vt],mediaType:"json",serializer:HN},M0t={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/restorableDroppedDatabases/{restorableDroppedDatabaseId}/backupShortTermRetentionPolicies/{policyName}",httpMethod:"PATCH",responses:{200:{bodyMapper:pa},201:{bodyMapper:pa},202:{bodyMapper:pa},204:{bodyMapper:pa},default:{}},requestBody:qU,queryParameters:[$],urlParameters:[M,k,q,st,ME,zS],headerParameters:[U,Vt],mediaType:"json",serializer:HN},k0t={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/restorableDroppedDatabases/{restorableDroppedDatabaseId}/backupShortTermRetentionPolicies",httpMethod:"GET",responses:{200:{bodyMapper:_N},default:{}},queryParameters:[$],urlParameters:[M,k,q,st,zS],headerParameters:[U],serializer:HN},L0t={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:_N},default:{}},queryParameters:[$],urlParameters:[M,k,q,ft,st,zS],headerParameters:[U],serializer:HN},IJ=class{constructor(e){this.client=e}listByInstance(e,t,n){let i=this.listByInstancePagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByInstancePagingPage(e,t,n)}}listByInstancePagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByInstance(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByInstanceNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByInstancePagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByInstancePagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,securityAlertPolicyName:n,options:i},q0t)}beginCreateOrUpdate(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,managedInstanceName:t,securityAlertPolicyName:n,parameters:i,options:s},z0t);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i,s)).pollUntilDone()})}_listByInstance(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,options:n},F0t)}_listByInstanceNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,nextLink:n,options:i},j0t)}},sB=Pt.createSerializer(Et,!1),q0t={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/securityAlertPolicies/{securityAlertPolicyName}",httpMethod:"GET",responses:{200:{bodyMapper:SS},default:{}},queryParameters:[$],urlParameters:[M,k,q,gv,st],headerParameters:[U],serializer:sB},z0t={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/securityAlertPolicies/{securityAlertPolicyName}",httpMethod:"PUT",responses:{200:{bodyMapper:SS},201:{bodyMapper:SS},202:{bodyMapper:SS},204:{bodyMapper:SS},default:{}},requestBody:rSt,queryParameters:[$],urlParameters:[M,k,q,gv,st],headerParameters:[U,Vt],mediaType:"json",serializer:sB},F0t={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/securityAlertPolicies",httpMethod:"GET",responses:{200:{bodyMapper:eZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,st],headerParameters:[U],serializer:sB},j0t={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:eZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,ft,st],headerParameters:[U],serializer:sB},RJ=class{constructor(e){this.client=e}list(e){let t=this.listPagingAll(e);return{next(){return t.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listPagingPage(e)}}listPagingPage(e){return h.__asyncGenerator(this,arguments,function*(){let n=yield h.__await(this._list(e));yield yield h.__await(n.value||[]);let i=n.nextLink;for(;i;)n=yield h.__await(this._listNext(i,e)),i=n.nextLink,yield yield h.__await(n.value||[])})}listPagingAll(e){return h.__asyncGenerator(this,arguments,function*(){var n,i;try{for(var s=h.__asyncValues(this.listPagingPage(e)),o;o=yield h.__await(s.next()),!o.done;){let a=o.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(a)))}}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=s.return)&&(yield h.__await(i.call(s)))}finally{if(n)throw n.error}}})}_list(e){return this.client.sendOperationRequest({options:e},U0t)}_listNext(e,t){return this.client.sendOperationRequest({nextLink:e,options:t},B0t)}},Cxe=Pt.createSerializer(Et,!1),U0t={path:"/providers/Microsoft.Sql/operations",httpMethod:"GET",responses:{200:{bodyMapper:tZ},default:{}},queryParameters:[$],urlParameters:[M],headerParameters:[U],serializer:Cxe},B0t={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:tZ},default:{}},queryParameters:[$],urlParameters:[M,ft],headerParameters:[U],serializer:Cxe},xJ=class{constructor(e){this.client=e}listByLocation(e,t){let n=this.listByLocationPagingAll(e,t);return{next(){return n.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByLocationPagingPage(e,t)}}listByLocationPagingPage(e,t){return h.__asyncGenerator(this,arguments,function*(){let i=yield h.__await(this._listByLocation(e,t));yield yield h.__await(i.value||[]);let s=i.nextLink;for(;s;)i=yield h.__await(this._listByLocationNext(e,s,t)),s=i.nextLink,yield yield h.__await(i.value||[])})}listByLocationPagingAll(e,t){return h.__asyncGenerator(this,arguments,function*(){var i,s;try{for(var o=h.__asyncValues(this.listByLocationPagingPage(e,t)),a;a=yield h.__await(o.next()),!a.done;){let c=a.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(c)))}}catch(c){i={error:c}}finally{try{a&&!a.done&&(s=o.return)&&(yield h.__await(s.call(o)))}finally{if(i)throw i.error}}})}_listByLocation(e,t){return this.client.sendOperationRequest({locationName:e,options:t},G0t)}_listByLocationNext(e,t,n){return this.client.sendOperationRequest({locationName:e,nextLink:t,options:n},$0t)}},Pxe=Pt.createSerializer(Et,!1),G0t={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Sql/locations/{locationName}/operationsHealth",httpMethod:"GET",responses:{200:{bodyMapper:rZ},default:{}},queryParameters:[$],urlParameters:[M,k,jr],headerParameters:[U],serializer:Pxe},$0t={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:rZ},default:{}},queryParameters:[$],urlParameters:[M,k,ft,jr],headerParameters:[U],serializer:Pxe},OJ=class{constructor(e){this.client=e}listByServer(e,t,n){let i=this.listByServerPagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByServerPagingPage(e,t,n)}}listByServerPagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByServer(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByServerNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByServerPagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByServerPagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,privateEndpointConnectionName:n,options:i},V0t)}beginCreateOrUpdate(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,serverName:t,privateEndpointConnectionName:n,parameters:i,options:s},H0t);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i,s)).pollUntilDone()})}beginDelete(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,serverName:t,privateEndpointConnectionName:n,options:i},W0t);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginDeleteAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDelete(e,t,n,i)).pollUntilDone()})}_listByServer(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,options:n},K0t)}_listByServerNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,nextLink:n,options:i},Q0t)}},WN=Pt.createSerializer(Et,!1),V0t={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/privateEndpointConnections/{privateEndpointConnectionName}",httpMethod:"GET",responses:{200:{bodyMapper:CS},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,zE],headerParameters:[U],serializer:WN},H0t={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/privateEndpointConnections/{privateEndpointConnectionName}",httpMethod:"PUT",responses:{200:{bodyMapper:CS},201:{bodyMapper:CS},202:{bodyMapper:CS},204:{bodyMapper:CS},default:{}},requestBody:nSt,queryParameters:[$],urlParameters:[M,k,q,X,zE],headerParameters:[U,Vt],mediaType:"json",serializer:WN},W0t={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/privateEndpointConnections/{privateEndpointConnectionName}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,zE],serializer:WN},K0t={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/privateEndpointConnections",httpMethod:"GET",responses:{200:{bodyMapper:nZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,X],headerParameters:[U],serializer:WN},Q0t={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:nZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ft],headerParameters:[U],serializer:WN},AJ=class{constructor(e){this.client=e}listByServer(e,t,n){let i=this.listByServerPagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByServerPagingPage(e,t,n)}}listByServerPagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByServer(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByServerNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByServerPagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByServerPagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}_listByServer(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,options:n},Y0t)}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,groupName:n,options:i},X0t)}_listByServerNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,nextLink:n,options:i},J0t)}},yee=Pt.createSerializer(Et,!1),Y0t={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/privateLinkResources",httpMethod:"GET",responses:{200:{bodyMapper:iZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,X],headerParameters:[U],serializer:yee},X0t={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/privateLinkResources/{groupName}",httpMethod:"GET",responses:{200:{bodyMapper:ERe},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,QRe],headerParameters:[U],serializer:yee},J0t={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:iZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ft],headerParameters:[U],serializer:yee},NJ=class{constructor(e){this.client=e}listByInstance(e,t,n){let i=this.listByInstancePagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByInstancePagingPage(e,t,n)}}listByInstancePagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByInstance(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByInstanceNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByInstancePagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByInstancePagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}_listByInstance(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,options:n},Z0t)}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,recoverableDatabaseName:n,options:i},eIt)}_listByInstanceNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,nextLink:n,options:i},tIt)}},vee=Pt.createSerializer(Et,!1),Z0t={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/recoverableDatabases",httpMethod:"GET",responses:{200:{bodyMapper:sZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,st],headerParameters:[U],serializer:vee},eIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/recoverableDatabases/{recoverableDatabaseName}",httpMethod:"GET",responses:{200:{bodyMapper:TRe},default:{}},queryParameters:[$],urlParameters:[M,k,q,st,iSt],headerParameters:[U],serializer:vee},tIt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:sZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,ft,st],headerParameters:[U],serializer:vee},DJ=class{constructor(e){this.client=e}listByDatabase(e,t,n,i){let s=this.listByDatabasePagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByDatabasePagingPage(e,t,n,i)}}listByDatabasePagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByDatabase(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listByDatabaseNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listByDatabasePagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByDatabasePagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}_listByDatabase(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,options:i},rIt)}beginCreate(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,serverName:t,databaseName:n,parameters:i,options:s},nIt);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginCreateAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreate(e,t,n,i,s)).pollUntilDone()})}get(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,restorePointName:i,options:s},iIt)}delete(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,restorePointName:i,options:s},sIt)}_listByDatabaseNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,nextLink:i,options:s},oIt)}},KN=Pt.createSerializer(Et,!1),rIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/restorePoints",httpMethod:"GET",responses:{200:{bodyMapper:oZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve],headerParameters:[U],serializer:KN},nIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/restorePoints",httpMethod:"POST",responses:{200:{bodyMapper:PE},201:{bodyMapper:PE},202:{bodyMapper:PE},204:{bodyMapper:PE},default:{}},requestBody:sSt,queryParameters:[$],urlParameters:[M,k,q,X,ve],headerParameters:[U,Vt],mediaType:"json",serializer:KN},iIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/restorePoints/{restorePointName}",httpMethod:"GET",responses:{200:{bodyMapper:PE},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,XRe],headerParameters:[U],serializer:KN},sIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/restorePoints/{restorePointName}",httpMethod:"DELETE",responses:{200:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,XRe],serializer:KN},oIt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:oZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,ft],headerParameters:[U],serializer:KN},MJ=class{constructor(e){this.client=e}listCurrentByDatabase(e,t,n,i){let s=this.listCurrentByDatabasePagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listCurrentByDatabasePagingPage(e,t,n,i)}}listCurrentByDatabasePagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listCurrentByDatabase(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listCurrentByDatabaseNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listCurrentByDatabasePagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listCurrentByDatabasePagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}listRecommendedByDatabase(e,t,n,i){let s=this.listRecommendedByDatabasePagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listRecommendedByDatabasePagingPage(e,t,n,i)}}listRecommendedByDatabasePagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listRecommendedByDatabase(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listRecommendedByDatabaseNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listRecommendedByDatabasePagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listRecommendedByDatabasePagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}_listCurrentByDatabase(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,options:i},aIt)}update(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,parameters:i,options:s},cIt)}_listRecommendedByDatabase(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,options:i},lIt)}enableRecommendation(e,t,n,i,s,o,a){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,schemaName:i,tableName:s,columnName:o,options:a},uIt)}disableRecommendation(e,t,n,i,s,o,a){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,schemaName:i,tableName:s,columnName:o,options:a},dIt)}get(e,t,n,i,s,o,a,c){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,schemaName:i,tableName:s,columnName:o,sensitivityLabelSource:a,options:c},pIt)}createOrUpdate(e,t,n,i,s,o,a,c){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,schemaName:i,tableName:s,columnName:o,parameters:a,options:c},mIt)}delete(e,t,n,i,s,o,a){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,schemaName:i,tableName:s,columnName:o,options:a},hIt)}_listCurrentByDatabaseNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,nextLink:i,options:s},fIt)}_listRecommendedByDatabaseNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,nextLink:i,options:s},gIt)}},xh=Pt.createSerializer(Et,!1),aIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/currentSensitivityLabels",httpMethod:"GET",responses:{200:{bodyMapper:sg},default:{}},queryParameters:[Ch,$,to,GU],urlParameters:[M,k,q,X,ve],headerParameters:[U],serializer:xh},cIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/currentSensitivityLabels",httpMethod:"PATCH",responses:{200:{},default:{}},requestBody:HRe,queryParameters:[$],urlParameters:[M,k,q,X,ve],headerParameters:[Vt],mediaType:"json",serializer:xh},lIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/recommendedSensitivityLabels",httpMethod:"GET",responses:{200:{bodyMapper:sg},default:{}},queryParameters:[Ch,$,to,$U],urlParameters:[M,k,q,X,ve],headerParameters:[U],serializer:xh},uIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/schemas/{schemaName}/tables/{tableName}/columns/{columnName}/sensitivityLabels/{sensitivityLabelSource}/enable",httpMethod:"POST",responses:{200:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,eo,Wa,Wd,BU],serializer:xh},dIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/schemas/{schemaName}/tables/{tableName}/columns/{columnName}/sensitivityLabels/{sensitivityLabelSource}/disable",httpMethod:"POST",responses:{200:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,eo,Wa,Wd,BU],serializer:xh},pIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/schemas/{schemaName}/tables/{tableName}/columns/{columnName}/sensitivityLabels/{sensitivityLabelSource}",httpMethod:"GET",responses:{200:{bodyMapper:hv},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,eo,Wa,Wd,$Re],headerParameters:[U],serializer:xh},mIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/schemas/{schemaName}/tables/{tableName}/columns/{columnName}/sensitivityLabels/{sensitivityLabelSource}",httpMethod:"PUT",responses:{200:{bodyMapper:hv},201:{bodyMapper:hv},default:{}},requestBody:VRe,queryParameters:[$],urlParameters:[M,k,q,X,ve,eo,Wa,Wd,UU],headerParameters:[U,Vt],mediaType:"json",serializer:xh},hIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/schemas/{schemaName}/tables/{tableName}/columns/{columnName}/sensitivityLabels/{sensitivityLabelSource}",httpMethod:"DELETE",responses:{200:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,eo,Wa,Wd,UU],serializer:xh},fIt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:sg},default:{}},queryParameters:[Ch,$,to,GU],urlParameters:[M,k,q,X,ve,ft],headerParameters:[U],serializer:xh},gIt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:sg},default:{}},queryParameters:[Ch,$,to,$U],urlParameters:[M,k,q,X,ve,ft],headerParameters:[U],serializer:xh},kJ=class{constructor(e){this.client=e}update(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,parameters:i,options:s},vIt)}},yIt=Pt.createSerializer(Et,!1),vIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/recommendedSensitivityLabels",httpMethod:"PATCH",responses:{200:{},default:{}},requestBody:WRe,queryParameters:[$],urlParameters:[M,k,q,X,ve],headerParameters:[Vt],mediaType:"json",serializer:yIt},LJ=class{constructor(e){this.client=e}listByServer(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,options:n},bIt)}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,advisorName:n,options:i},_It)}update(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,advisorName:n,parameters:i,options:s},SIt)}},bee=Pt.createSerializer(Et,!1),bIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/advisors",httpMethod:"GET",responses:{200:{bodyMapper:{type:{name:"Sequence",element:{type:{name:"Composite",className:"Advisor"}}}}},default:{}},queryParameters:[$,mu],urlParameters:[M,k,q,X],headerParameters:[U],serializer:bee},_It={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/advisors/{advisorName}",httpMethod:"GET",responses:{200:{bodyMapper:IE},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,qS],headerParameters:[U],serializer:bee},SIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/advisors/{advisorName}",httpMethod:"PATCH",responses:{200:{bodyMapper:IE},default:{}},requestBody:qRe,queryParameters:[$],urlParameters:[M,k,q,X,qS],headerParameters:[U,Vt],mediaType:"json",serializer:bee},qJ=class{constructor(e){this.client=e}get(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,options:n},CIt)}update(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,parameters:n,options:i},PIt)}},wxe=Pt.createSerializer(Et,!1),CIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/automaticTuning/current",httpMethod:"GET",responses:{200:{bodyMapper:RU},default:{}},queryParameters:[$],urlParameters:[M,k,q,X],headerParameters:[U],serializer:wxe},PIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/automaticTuning/current",httpMethod:"PATCH",responses:{200:{bodyMapper:RU},default:{}},requestBody:oSt,queryParameters:[$],urlParameters:[M,k,q,X],headerParameters:[U,Vt],mediaType:"json",serializer:wxe},zJ=class{constructor(e){this.client=e}listByServer(e,t,n){let i=this.listByServerPagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByServerPagingPage(e,t,n)}}listByServerPagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByServer(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByServerNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByServerPagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByServerPagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,administratorName:n,options:i},wIt)}beginCreateOrUpdate(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,serverName:t,administratorName:n,parameters:i,options:s},EIt);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i,s)).pollUntilDone()})}beginDelete(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,serverName:t,administratorName:n,options:i},TIt);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginDeleteAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDelete(e,t,n,i)).pollUntilDone()})}_listByServer(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,options:n},IIt)}_listByServerNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,nextLink:n,options:i},RIt)}},QN=Pt.createSerializer(Et,!1),wIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/administrators/{administratorName}",httpMethod:"GET",responses:{200:{bodyMapper:PS},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,kE],headerParameters:[U],serializer:QN},EIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/administrators/{administratorName}",httpMethod:"PUT",responses:{200:{bodyMapper:PS},201:{bodyMapper:PS},202:{bodyMapper:PS},204:{bodyMapper:PS},default:{}},requestBody:aSt,queryParameters:[$],urlParameters:[M,k,q,X,kE],headerParameters:[U,Vt],mediaType:"json",serializer:QN},TIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/administrators/{administratorName}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,kE],serializer:QN},IIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/administrators",httpMethod:"GET",responses:{200:{bodyMapper:aZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,X],headerParameters:[U],serializer:QN},RIt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:aZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ft],headerParameters:[U],serializer:QN},FJ=class{constructor(e){this.client=e}listByServer(e,t,n){let i=this.listByServerPagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByServerPagingPage(e,t,n)}}listByServerPagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByServer(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByServerNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByServerPagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByServerPagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,authenticationName:n,options:i},xIt)}beginCreateOrUpdate(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,serverName:t,authenticationName:n,parameters:i,options:s},OIt);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i,s)).pollUntilDone()})}beginDelete(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,serverName:t,authenticationName:n,options:i},AIt);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginDeleteAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDelete(e,t,n,i)).pollUntilDone()})}_listByServer(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,options:n},NIt)}_listByServerNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,nextLink:n,options:i},DIt)}},YN=Pt.createSerializer(Et,!1),xIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/azureADOnlyAuthentications/{authenticationName}",httpMethod:"GET",responses:{200:{bodyMapper:wS},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,LE],headerParameters:[U],serializer:YN},OIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/azureADOnlyAuthentications/{authenticationName}",httpMethod:"PUT",responses:{200:{bodyMapper:wS},201:{bodyMapper:wS},202:{bodyMapper:wS},204:{bodyMapper:wS},default:{}},requestBody:cSt,queryParameters:[$],urlParameters:[M,k,q,X,LE],headerParameters:[U,Vt],mediaType:"json",serializer:YN},AIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/azureADOnlyAuthentications/{authenticationName}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,LE],serializer:YN},NIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/azureADOnlyAuthentications",httpMethod:"GET",responses:{200:{bodyMapper:cZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,X],headerParameters:[U],serializer:YN},DIt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:cZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ft],headerParameters:[U],serializer:YN},jJ=class{constructor(e){this.client=e}listByServer(e,t,n){let i=this.listByServerPagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByServerPagingPage(e,t,n)}}listByServerPagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByServer(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByServerNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByServerPagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByServerPagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,devOpsAuditingSettingsName:n,options:i},MIt)}beginCreateOrUpdate(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,serverName:t,devOpsAuditingSettingsName:n,parameters:i,options:s},kIt);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs,lroResourceLocationConfig:"azure-async-operation"})})}beginCreateOrUpdateAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i,s)).pollUntilDone()})}_listByServer(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,options:n},LIt)}_listByServerNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,nextLink:n,options:i},qIt)}},oB=Pt.createSerializer(Et,!1),MIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/devOpsAuditingSettings/{devOpsAuditingSettingsName}",httpMethod:"GET",responses:{200:{bodyMapper:ES},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,JRe],headerParameters:[U],serializer:oB},kIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/devOpsAuditingSettings/{devOpsAuditingSettingsName}",httpMethod:"PUT",responses:{200:{bodyMapper:ES},201:{bodyMapper:ES},202:{bodyMapper:ES},204:{bodyMapper:ES},default:{}},requestBody:lSt,queryParameters:[$],urlParameters:[M,k,q,X,JRe],headerParameters:[U,Vt],mediaType:"json",serializer:oB},LIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/devOpsAuditingSettings",httpMethod:"GET",responses:{200:{bodyMapper:lZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,X],headerParameters:[U],serializer:oB},qIt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:lZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ft],headerParameters:[U],serializer:oB},UJ=class{constructor(e){this.client=e}listByServer(e,t,n){let i=this.listByServerPagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByServerPagingPage(e,t,n)}}listByServerPagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByServer(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByServerNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByServerPagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByServerPagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,dnsAliasName:n,options:i},zIt)}beginCreateOrUpdate(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,serverName:t,dnsAliasName:n,options:i},FIt);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i)).pollUntilDone()})}beginDelete(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,serverName:t,dnsAliasName:n,options:i},jIt);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginDeleteAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDelete(e,t,n,i)).pollUntilDone()})}_listByServer(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,options:n},UIt)}beginAcquire(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,serverName:t,dnsAliasName:n,parameters:i,options:s},BIt);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginAcquireAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginAcquire(e,t,n,i,s)).pollUntilDone()})}_listByServerNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,nextLink:n,options:i},GIt)}},GE=Pt.createSerializer(Et,!1),zIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/dnsAliases/{dnsAliasName}",httpMethod:"GET",responses:{200:{bodyMapper:_h},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,HU],headerParameters:[U],serializer:GE},FIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/dnsAliases/{dnsAliasName}",httpMethod:"PUT",responses:{200:{bodyMapper:_h},201:{bodyMapper:_h},202:{bodyMapper:_h},204:{bodyMapper:_h},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,HU],headerParameters:[U],serializer:GE},jIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/dnsAliases/{dnsAliasName}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,HU],serializer:GE},UIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/dnsAliases",httpMethod:"GET",responses:{200:{bodyMapper:uZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,X],headerParameters:[U],serializer:GE},BIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/dnsAliases/{dnsAliasName}/acquire",httpMethod:"POST",responses:{200:{bodyMapper:_h},201:{bodyMapper:_h},202:{bodyMapper:_h},204:{bodyMapper:_h},default:{}},requestBody:uSt,queryParameters:[$],urlParameters:[M,k,q,X,HU],headerParameters:[U,Vt],mediaType:"json",serializer:GE},GIt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:uZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ft],headerParameters:[U],serializer:GE},BJ=class{constructor(e){this.client=e}listByServer(e,t,n){let i=this.listByServerPagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByServerPagingPage(e,t,n)}}listByServerPagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByServer(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByServerNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByServerPagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByServerPagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}_listByServer(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,options:n},$It)}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,keyName:n,options:i},VIt)}beginCreateOrUpdate(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,serverName:t,keyName:n,parameters:i,options:s},HIt);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i,s)).pollUntilDone()})}beginDelete(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,serverName:t,keyName:n,options:i},WIt);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginDeleteAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDelete(e,t,n,i)).pollUntilDone()})}_listByServerNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,nextLink:n,options:i},KIt)}},XN=Pt.createSerializer(Et,!1),$It={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/keys",httpMethod:"GET",responses:{200:{bodyMapper:dZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,X],headerParameters:[U],serializer:XN},VIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/keys/{keyName}",httpMethod:"GET",responses:{200:{bodyMapper:TS},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,qE],headerParameters:[U],serializer:XN},HIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/keys/{keyName}",httpMethod:"PUT",responses:{200:{bodyMapper:TS},201:{bodyMapper:TS},202:{bodyMapper:TS},204:{bodyMapper:TS},default:{}},requestBody:dSt,queryParameters:[$],urlParameters:[M,k,q,X,qE],headerParameters:[U,Vt],mediaType:"json",serializer:XN},WIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/keys/{keyName}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,qE],serializer:XN},KIt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:dZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ft],headerParameters:[U],serializer:XN},GJ=class{constructor(e){this.client=e}listByServer(e,t,n){let i=this.listByServerPagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByServerPagingPage(e,t,n)}}listByServerPagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByServer(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByServerNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByServerPagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByServerPagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}_listByServer(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,options:n},QIt)}_listByServerNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,nextLink:n,options:i},YIt)}},Exe=Pt.createSerializer(Et,!1),QIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/operations",httpMethod:"GET",responses:{200:{bodyMapper:pZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,X],headerParameters:[U],serializer:Exe},YIt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:pZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ft],headerParameters:[U],serializer:Exe},$J=class{constructor(e){this.client=e}listByServer(e,t,n){let i=this.listByServerPagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByServerPagingPage(e,t,n)}}listByServerPagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByServer(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByServerNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByServerPagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByServerPagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,securityAlertPolicyName:n,options:i},XIt)}beginCreateOrUpdate(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,serverName:t,securityAlertPolicyName:n,parameters:i,options:s},JIt);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i,s)).pollUntilDone()})}_listByServer(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,options:n},ZIt)}_listByServerNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,nextLink:n,options:i},eRt)}},aB=Pt.createSerializer(Et,!1),XIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/securityAlertPolicies/{securityAlertPolicyName}",httpMethod:"GET",responses:{200:{bodyMapper:IS},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,gv],headerParameters:[U],serializer:aB},JIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/securityAlertPolicies/{securityAlertPolicyName}",httpMethod:"PUT",responses:{200:{bodyMapper:IS},201:{bodyMapper:IS},202:{bodyMapper:IS},204:{bodyMapper:IS},default:{}},requestBody:pSt,queryParameters:[$],urlParameters:[M,k,q,X,gv],headerParameters:[U,Vt],mediaType:"json",serializer:aB},ZIt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/securityAlertPolicies",httpMethod:"GET",responses:{200:{bodyMapper:mZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,X],headerParameters:[U],serializer:aB},eRt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:mZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ft],headerParameters:[U],serializer:aB},VJ=class{constructor(e){this.client=e}listByLocation(e,t,n){let i=this.listByLocationPagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByLocationPagingPage(e,t,n)}}listByLocationPagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByLocation(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByLocationNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByLocationPagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByLocationPagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}listByInstance(e,t,n){let i=this.listByInstancePagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByInstancePagingPage(e,t,n)}}listByInstancePagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByInstance(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByInstanceNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByInstancePagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByInstancePagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,locationName:t,serverTrustGroupName:n,options:i},tRt)}beginCreateOrUpdate(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,locationName:t,serverTrustGroupName:n,parameters:i,options:s},rRt);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i,s)).pollUntilDone()})}beginDelete(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,locationName:t,serverTrustGroupName:n,options:i},nRt);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginDeleteAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDelete(e,t,n,i)).pollUntilDone()})}_listByLocation(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,locationName:t,options:n},iRt)}_listByInstance(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,options:n},sRt)}_listByLocationNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,locationName:t,nextLink:n,options:i},oRt)}_listByInstanceNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,nextLink:n,options:i},aRt)}},US=Pt.createSerializer(Et,!1),tRt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/locations/{locationName}/serverTrustGroups/{serverTrustGroupName}",httpMethod:"GET",responses:{200:{bodyMapper:RS},default:{}},queryParameters:[$],urlParameters:[M,k,q,jr,YZ],headerParameters:[U],serializer:US},rRt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/locations/{locationName}/serverTrustGroups/{serverTrustGroupName}",httpMethod:"PUT",responses:{200:{bodyMapper:RS},201:{bodyMapper:RS},202:{bodyMapper:RS},204:{bodyMapper:RS},default:{}},requestBody:mSt,queryParameters:[$],urlParameters:[M,k,q,jr,YZ],headerParameters:[U,Vt],mediaType:"json",serializer:US},nRt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/locations/{locationName}/serverTrustGroups/{serverTrustGroupName}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,jr,YZ],serializer:US},iRt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/locations/{locationName}/serverTrustGroups",httpMethod:"GET",responses:{200:{bodyMapper:CN},default:{}},queryParameters:[$],urlParameters:[M,k,q,jr],headerParameters:[U],serializer:US},sRt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/serverTrustGroups",httpMethod:"GET",responses:{200:{bodyMapper:CN},default:{}},queryParameters:[$],urlParameters:[M,k,q,st],headerParameters:[U],serializer:US},oRt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:CN},default:{}},queryParameters:[$],urlParameters:[M,k,q,ft,jr],headerParameters:[U],serializer:US},aRt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:CN},default:{}},queryParameters:[$],urlParameters:[M,k,q,ft,st],headerParameters:[U],serializer:US},HJ=class{constructor(e){this.client=e}listByServer(e,t,n){let i=this.listByServerPagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByServerPagingPage(e,t,n)}}listByServerPagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByServer(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByServerNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByServerPagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByServerPagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,vulnerabilityAssessmentName:n,options:i},cRt)}createOrUpdate(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,vulnerabilityAssessmentName:n,parameters:i,options:s},lRt)}delete(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,vulnerabilityAssessmentName:n,options:i},uRt)}_listByServer(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,options:n},dRt)}_listByServerNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,nextLink:n,options:i},pRt)}},JN=Pt.createSerializer(Et,!1),cRt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/vulnerabilityAssessments/{vulnerabilityAssessmentName}",httpMethod:"GET",responses:{200:{bodyMapper:dN},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,bs],headerParameters:[U],serializer:JN},lRt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/vulnerabilityAssessments/{vulnerabilityAssessmentName}",httpMethod:"PUT",responses:{200:{bodyMapper:dN},201:{bodyMapper:dN},default:{}},requestBody:hSt,queryParameters:[$],urlParameters:[M,k,q,X,bs],headerParameters:[U,Vt],mediaType:"json",serializer:JN},uRt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/vulnerabilityAssessments/{vulnerabilityAssessmentName}",httpMethod:"DELETE",responses:{200:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,bs],serializer:JN},dRt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/vulnerabilityAssessments",httpMethod:"GET",responses:{200:{bodyMapper:hZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,X],headerParameters:[U],serializer:JN},pRt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:hZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ft],headerParameters:[U],serializer:JN},WJ=class{constructor(e){this.client=e}get(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,options:n},mRt)}createOrUpdate(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,parameters:n,options:i},hRt)}},Txe=Pt.createSerializer(Et,!1),mRt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/sqlAgent/current",httpMethod:"GET",responses:{200:{bodyMapper:xU},default:{}},queryParameters:[$],urlParameters:[M,k,q,st],headerParameters:[U],serializer:Txe},hRt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/sqlAgent/current",httpMethod:"PUT",responses:{200:{bodyMapper:xU},default:{}},requestBody:fSt,queryParameters:[$],urlParameters:[M,k,q,st],headerParameters:[U,Vt],mediaType:"json",serializer:Txe},KJ=class{constructor(e){this.client=e}listByLocation(e,t){let n=this.listByLocationPagingAll(e,t);return{next(){return n.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByLocationPagingPage(e,t)}}listByLocationPagingPage(e,t){return h.__asyncGenerator(this,arguments,function*(){let i=yield h.__await(this._listByLocation(e,t));yield yield h.__await(i.value||[]);let s=i.nextLink;for(;s;)i=yield h.__await(this._listByLocationNext(e,s,t)),s=i.nextLink,yield yield h.__await(i.value||[])})}listByLocationPagingAll(e,t){return h.__asyncGenerator(this,arguments,function*(){var i,s;try{for(var o=h.__asyncValues(this.listByLocationPagingPage(e,t)),a;a=yield h.__await(o.next()),!a.done;){let c=a.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(c)))}}catch(c){i={error:c}}finally{try{a&&!a.done&&(s=o.return)&&(yield h.__await(s.call(o)))}finally{if(i)throw i.error}}})}_listByLocation(e,t){return this.client.sendOperationRequest({locationName:e,options:t},fRt)}get(e,t,n){return this.client.sendOperationRequest({locationName:e,usageName:t,options:n},gRt)}_listByLocationNext(e,t,n){return this.client.sendOperationRequest({locationName:e,nextLink:t,options:n},yRt)}},_ee=Pt.createSerializer(Et,!1),fRt={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Sql/locations/{locationName}/usages",httpMethod:"GET",responses:{200:{bodyMapper:fZ},default:{}},queryParameters:[$],urlParameters:[M,k,jr],headerParameters:[U],serializer:_ee},gRt={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Sql/locations/{locationName}/usages/{usageName}",httpMethod:"GET",responses:{200:{bodyMapper:IRe},default:{}},queryParameters:[$],urlParameters:[M,k,jr,gSt],headerParameters:[U],serializer:_ee},yRt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:fZ},default:{}},queryParameters:[$],urlParameters:[M,k,ft,jr],headerParameters:[U],serializer:_ee},QJ=class{constructor(e){this.client=e}listByServer(e,t,n){let i=this.listByServerPagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByServerPagingPage(e,t,n)}}listByServerPagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByServer(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByServerNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByServerPagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByServerPagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}listLinkedDatabases(e,t,n,i){let s=this.listLinkedDatabasesPagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listLinkedDatabasesPagingPage(e,t,n,i)}}listLinkedDatabasesPagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listLinkedDatabases(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listLinkedDatabasesNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listLinkedDatabasesPagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listLinkedDatabasesPagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,syncAgentName:n,options:i},vRt)}beginCreateOrUpdate(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,serverName:t,syncAgentName:n,parameters:i,options:s},bRt);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i,s)).pollUntilDone()})}beginDelete(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,serverName:t,syncAgentName:n,options:i},_Rt);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginDeleteAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDelete(e,t,n,i)).pollUntilDone()})}_listByServer(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,options:n},SRt)}generateKey(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,syncAgentName:n,options:i},CRt)}_listLinkedDatabases(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,syncAgentName:n,options:i},PRt)}_listByServerNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,nextLink:n,options:i},wRt)}_listLinkedDatabasesNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,syncAgentName:n,nextLink:i,options:s},ERt)}},wv=Pt.createSerializer(Et,!1),vRt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/syncAgents/{syncAgentName}",httpMethod:"GET",responses:{200:{bodyMapper:xS},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,FE],headerParameters:[U],serializer:wv},bRt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/syncAgents/{syncAgentName}",httpMethod:"PUT",responses:{200:{bodyMapper:xS},201:{bodyMapper:xS},202:{bodyMapper:xS},204:{bodyMapper:xS},default:{}},requestBody:ySt,queryParameters:[$],urlParameters:[M,k,q,X,FE],headerParameters:[U,Vt],mediaType:"json",serializer:wv},_Rt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/syncAgents/{syncAgentName}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,FE],serializer:wv},SRt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/syncAgents",httpMethod:"GET",responses:{200:{bodyMapper:gZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,X],headerParameters:[U],serializer:wv},CRt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/syncAgents/{syncAgentName}/generateKey",httpMethod:"POST",responses:{200:{bodyMapper:tRe},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,FE],headerParameters:[U],serializer:wv},PRt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/syncAgents/{syncAgentName}/linkedDatabases",httpMethod:"GET",responses:{200:{bodyMapper:yZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,FE],headerParameters:[U],serializer:wv},wRt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:gZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ft],headerParameters:[U],serializer:wv},ERt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:yZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ft,FE],headerParameters:[U],serializer:wv},YJ=class{constructor(e){this.client=e}listSyncDatabaseIds(e,t){let n=this.listSyncDatabaseIdsPagingAll(e,t);return{next(){return n.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listSyncDatabaseIdsPagingPage(e,t)}}listSyncDatabaseIdsPagingPage(e,t){return h.__asyncGenerator(this,arguments,function*(){let i=yield h.__await(this._listSyncDatabaseIds(e,t));yield yield h.__await(i.value||[]);let s=i.nextLink;for(;s;)i=yield h.__await(this._listSyncDatabaseIdsNext(e,s,t)),s=i.nextLink,yield yield h.__await(i.value||[])})}listSyncDatabaseIdsPagingAll(e,t){return h.__asyncGenerator(this,arguments,function*(){var i,s;try{for(var o=h.__asyncValues(this.listSyncDatabaseIdsPagingPage(e,t)),a;a=yield h.__await(o.next()),!a.done;){let c=a.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(c)))}}catch(c){i={error:c}}finally{try{a&&!a.done&&(s=o.return)&&(yield h.__await(s.call(o)))}finally{if(i)throw i.error}}})}listHubSchemas(e,t,n,i,s){let o=this.listHubSchemasPagingAll(e,t,n,i,s);return{next(){return o.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listHubSchemasPagingPage(e,t,n,i,s)}}listHubSchemasPagingPage(e,t,n,i,s){return h.__asyncGenerator(this,arguments,function*(){let a=yield h.__await(this._listHubSchemas(e,t,n,i,s));yield yield h.__await(a.value||[]);let c=a.nextLink;for(;c;)a=yield h.__await(this._listHubSchemasNext(e,t,n,i,c,s)),c=a.nextLink,yield yield h.__await(a.value||[])})}listHubSchemasPagingAll(e,t,n,i,s){return h.__asyncGenerator(this,arguments,function*(){var a,c;try{for(var l=h.__asyncValues(this.listHubSchemasPagingPage(e,t,n,i,s)),u;u=yield h.__await(l.next()),!u.done;){let d=u.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(d)))}}catch(d){a={error:d}}finally{try{u&&!u.done&&(c=l.return)&&(yield h.__await(c.call(l)))}finally{if(a)throw a.error}}})}listLogs(e,t,n,i,s,o,a,c){let l=this.listLogsPagingAll(e,t,n,i,s,o,a,c);return{next(){return l.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listLogsPagingPage(e,t,n,i,s,o,a,c)}}listLogsPagingPage(e,t,n,i,s,o,a,c){return h.__asyncGenerator(this,arguments,function*(){let u=yield h.__await(this._listLogs(e,t,n,i,s,o,a,c));yield yield h.__await(u.value||[]);let d=u.nextLink;for(;d;)u=yield h.__await(this._listLogsNext(e,t,n,i,s,o,d,a,c)),d=u.nextLink,yield yield h.__await(u.value||[])})}listLogsPagingAll(e,t,n,i,s,o,a,c){return h.__asyncGenerator(this,arguments,function*(){var u,d;try{for(var p=h.__asyncValues(this.listLogsPagingPage(e,t,n,i,s,o,a,c)),m;m=yield h.__await(p.next()),!m.done;){let f=m.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(f)))}}catch(f){u={error:f}}finally{try{m&&!m.done&&(d=p.return)&&(yield h.__await(d.call(p)))}finally{if(u)throw u.error}}})}listByDatabase(e,t,n,i){let s=this.listByDatabasePagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByDatabasePagingPage(e,t,n,i)}}listByDatabasePagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByDatabase(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listByDatabaseNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listByDatabasePagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByDatabasePagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}_listSyncDatabaseIds(e,t){return this.client.sendOperationRequest({locationName:e,options:t},TRt)}beginRefreshHubSchema(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,serverName:t,databaseName:n,syncGroupName:i,options:s},IRt);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginRefreshHubSchemaAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginRefreshHubSchema(e,t,n,i,s)).pollUntilDone()})}_listHubSchemas(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,syncGroupName:i,options:s},RRt)}_listLogs(e,t,n,i,s,o,a,c){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,syncGroupName:i,startTime:s,endTime:o,typeParam:a,options:c},xRt)}cancelSync(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,syncGroupName:i,options:s},ORt)}triggerSync(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,syncGroupName:i,options:s},ARt)}get(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,syncGroupName:i,options:s},NRt)}beginCreateOrUpdate(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){let a=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(u,d)}),c=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){var p;let m,f=(p=u.options)===null||p===void 0?void 0:p.onResponse,y=(C,P)=>{m=C,f?.(C,P)},v=Object.assign(Object.assign({},u),{options:Object.assign(Object.assign({},u.options),{onResponse:y})});return{flatResponse:yield a(v,d),rawResponse:{statusCode:m.status,body:m.parsedBody,headers:m.headers.toJSON()}}}),l=new bt(c,{resourceGroupName:e,serverName:t,databaseName:n,syncGroupName:i,parameters:s,options:o},DRt);return new St.LroEngine(l,{resumeFrom:o?.resumeFrom,intervalInMs:o?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i,s,o)).pollUntilDone()})}beginDelete(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,serverName:t,databaseName:n,syncGroupName:i,options:s},MRt);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginDeleteAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDelete(e,t,n,i,s)).pollUntilDone()})}beginUpdate(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){let a=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(u,d)}),c=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){var p;let m,f=(p=u.options)===null||p===void 0?void 0:p.onResponse,y=(C,P)=>{m=C,f?.(C,P)},v=Object.assign(Object.assign({},u),{options:Object.assign(Object.assign({},u.options),{onResponse:y})});return{flatResponse:yield a(v,d),rawResponse:{statusCode:m.status,body:m.parsedBody,headers:m.headers.toJSON()}}}),l=new bt(c,{resourceGroupName:e,serverName:t,databaseName:n,syncGroupName:i,parameters:s,options:o},kRt);return new St.LroEngine(l,{resumeFrom:o?.resumeFrom,intervalInMs:o?.updateIntervalInMs})})}beginUpdateAndWait(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginUpdate(e,t,n,i,s,o)).pollUntilDone()})}_listByDatabase(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,options:i},LRt)}_listSyncDatabaseIdsNext(e,t,n){return this.client.sendOperationRequest({locationName:e,nextLink:t,options:n},qRt)}_listHubSchemasNext(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,syncGroupName:i,nextLink:s,options:o},zRt)}_listLogsNext(e,t,n,i,s,o,a,c,l){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,syncGroupName:i,startTime:s,endTime:o,nextLink:a,typeParam:c,options:l},FRt)}_listByDatabaseNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,nextLink:i,options:s},jRt)}},Al=Pt.createSerializer(Et,!1),TRt={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Sql/locations/{locationName}/syncDatabaseIds",httpMethod:"GET",responses:{200:{bodyMapper:vZ},default:{}},queryParameters:[$],urlParameters:[M,k,jr],headerParameters:[U],serializer:Al},IRt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/syncGroups/{syncGroupName}/refreshHubSchema",httpMethod:"POST",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,ma],serializer:Al},RRt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/syncGroups/{syncGroupName}/hubSchemas",httpMethod:"GET",responses:{200:{bodyMapper:PN},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,ma],headerParameters:[U],serializer:Al},xRt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/syncGroups/{syncGroupName}/logs",httpMethod:"GET",responses:{200:{bodyMapper:bZ},default:{}},queryParameters:[$,ZRe,exe,txe,rxe],urlParameters:[M,k,q,X,ve,ma],headerParameters:[U],serializer:Al},ORt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/syncGroups/{syncGroupName}/cancelSync",httpMethod:"POST",responses:{200:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,ma],serializer:Al},ARt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/syncGroups/{syncGroupName}/triggerSync",httpMethod:"POST",responses:{200:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,ma],serializer:Al},NRt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/syncGroups/{syncGroupName}",httpMethod:"GET",responses:{200:{bodyMapper:rm},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,ma],headerParameters:[U],serializer:Al},DRt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/syncGroups/{syncGroupName}",httpMethod:"PUT",responses:{200:{bodyMapper:rm},201:{bodyMapper:rm},202:{bodyMapper:rm},204:{bodyMapper:rm},default:{}},requestBody:nxe,queryParameters:[$],urlParameters:[M,k,q,X,ve,ma],headerParameters:[U,Vt],mediaType:"json",serializer:Al},MRt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/syncGroups/{syncGroupName}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,ma],serializer:Al},kRt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/syncGroups/{syncGroupName}",httpMethod:"PATCH",responses:{200:{bodyMapper:rm},201:{bodyMapper:rm},202:{bodyMapper:rm},204:{bodyMapper:rm},default:{}},requestBody:nxe,queryParameters:[$],urlParameters:[M,k,q,X,ve,ma],headerParameters:[U,Vt],mediaType:"json",serializer:Al},LRt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/syncGroups",httpMethod:"GET",responses:{200:{bodyMapper:_Z},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve],headerParameters:[U],serializer:Al},qRt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:vZ},default:{}},queryParameters:[$],urlParameters:[M,k,ft,jr],headerParameters:[U],serializer:Al},zRt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:PN},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,ft,ma],headerParameters:[U],serializer:Al},FRt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:bZ},default:{}},queryParameters:[$,ZRe,exe,txe,rxe],urlParameters:[M,k,q,X,ve,ft,ma],headerParameters:[U],serializer:Al},jRt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:_Z},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,ft],headerParameters:[U],serializer:Al},XJ=class{constructor(e){this.client=e}listBySyncGroup(e,t,n,i,s){let o=this.listBySyncGroupPagingAll(e,t,n,i,s);return{next(){return o.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listBySyncGroupPagingPage(e,t,n,i,s)}}listBySyncGroupPagingPage(e,t,n,i,s){return h.__asyncGenerator(this,arguments,function*(){let a=yield h.__await(this._listBySyncGroup(e,t,n,i,s));yield yield h.__await(a.value||[]);let c=a.nextLink;for(;c;)a=yield h.__await(this._listBySyncGroupNext(e,t,n,i,c,s)),c=a.nextLink,yield yield h.__await(a.value||[])})}listBySyncGroupPagingAll(e,t,n,i,s){return h.__asyncGenerator(this,arguments,function*(){var a,c;try{for(var l=h.__asyncValues(this.listBySyncGroupPagingPage(e,t,n,i,s)),u;u=yield h.__await(l.next()),!u.done;){let d=u.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(d)))}}catch(d){a={error:d}}finally{try{u&&!u.done&&(c=l.return)&&(yield h.__await(c.call(l)))}finally{if(a)throw a.error}}})}listMemberSchemas(e,t,n,i,s,o){let a=this.listMemberSchemasPagingAll(e,t,n,i,s,o);return{next(){return a.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listMemberSchemasPagingPage(e,t,n,i,s,o)}}listMemberSchemasPagingPage(e,t,n,i,s,o){return h.__asyncGenerator(this,arguments,function*(){let c=yield h.__await(this._listMemberSchemas(e,t,n,i,s,o));yield yield h.__await(c.value||[]);let l=c.nextLink;for(;l;)c=yield h.__await(this._listMemberSchemasNext(e,t,n,i,s,l,o)),l=c.nextLink,yield yield h.__await(c.value||[])})}listMemberSchemasPagingAll(e,t,n,i,s,o){return h.__asyncGenerator(this,arguments,function*(){var c,l;try{for(var u=h.__asyncValues(this.listMemberSchemasPagingPage(e,t,n,i,s,o)),d;d=yield h.__await(u.next()),!d.done;){let p=d.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(p)))}}catch(p){c={error:p}}finally{try{d&&!d.done&&(l=u.return)&&(yield h.__await(l.call(u)))}finally{if(c)throw c.error}}})}get(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,syncGroupName:i,syncMemberName:s,options:o},URt)}beginCreateOrUpdate(e,t,n,i,s,o,a){return h.__awaiter(this,void 0,void 0,function*(){let c=(d,p)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(d,p)}),l=(d,p)=>h.__awaiter(this,void 0,void 0,function*(){var m;let f,y=(m=d.options)===null||m===void 0?void 0:m.onResponse,v=(P,w)=>{f=P,y?.(P,w)},_=Object.assign(Object.assign({},d),{options:Object.assign(Object.assign({},d.options),{onResponse:v})});return{flatResponse:yield c(_,p),rawResponse:{statusCode:f.status,body:f.parsedBody,headers:f.headers.toJSON()}}}),u=new bt(l,{resourceGroupName:e,serverName:t,databaseName:n,syncGroupName:i,syncMemberName:s,parameters:o,options:a},BRt);return new St.LroEngine(u,{resumeFrom:a?.resumeFrom,intervalInMs:a?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i,s,o,a){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i,s,o,a)).pollUntilDone()})}beginDelete(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){let a=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(u,d)}),c=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){var p;let m,f=(p=u.options)===null||p===void 0?void 0:p.onResponse,y=(C,P)=>{m=C,f?.(C,P)},v=Object.assign(Object.assign({},u),{options:Object.assign(Object.assign({},u.options),{onResponse:y})});return{flatResponse:yield a(v,d),rawResponse:{statusCode:m.status,body:m.parsedBody,headers:m.headers.toJSON()}}}),l=new bt(c,{resourceGroupName:e,serverName:t,databaseName:n,syncGroupName:i,syncMemberName:s,options:o},GRt);return new St.LroEngine(l,{resumeFrom:o?.resumeFrom,intervalInMs:o?.updateIntervalInMs})})}beginDeleteAndWait(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDelete(e,t,n,i,s,o)).pollUntilDone()})}beginUpdate(e,t,n,i,s,o,a){return h.__awaiter(this,void 0,void 0,function*(){let c=(d,p)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(d,p)}),l=(d,p)=>h.__awaiter(this,void 0,void 0,function*(){var m;let f,y=(m=d.options)===null||m===void 0?void 0:m.onResponse,v=(P,w)=>{f=P,y?.(P,w)},_=Object.assign(Object.assign({},d),{options:Object.assign(Object.assign({},d.options),{onResponse:v})});return{flatResponse:yield c(_,p),rawResponse:{statusCode:f.status,body:f.parsedBody,headers:f.headers.toJSON()}}}),u=new bt(l,{resourceGroupName:e,serverName:t,databaseName:n,syncGroupName:i,syncMemberName:s,parameters:o,options:a},$Rt);return new St.LroEngine(u,{resumeFrom:a?.resumeFrom,intervalInMs:a?.updateIntervalInMs})})}beginUpdateAndWait(e,t,n,i,s,o,a){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginUpdate(e,t,n,i,s,o,a)).pollUntilDone()})}_listBySyncGroup(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,syncGroupName:i,options:s},VRt)}_listMemberSchemas(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,syncGroupName:i,syncMemberName:s,options:o},HRt)}beginRefreshMemberSchema(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){let a=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(u,d)}),c=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){var p;let m,f=(p=u.options)===null||p===void 0?void 0:p.onResponse,y=(C,P)=>{m=C,f?.(C,P)},v=Object.assign(Object.assign({},u),{options:Object.assign(Object.assign({},u.options),{onResponse:y})});return{flatResponse:yield a(v,d),rawResponse:{statusCode:m.status,body:m.parsedBody,headers:m.headers.toJSON()}}}),l=new bt(c,{resourceGroupName:e,serverName:t,databaseName:n,syncGroupName:i,syncMemberName:s,options:o},WRt);return new St.LroEngine(l,{resumeFrom:o?.resumeFrom,intervalInMs:o?.updateIntervalInMs})})}beginRefreshMemberSchemaAndWait(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginRefreshMemberSchema(e,t,n,i,s,o)).pollUntilDone()})}_listBySyncGroupNext(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,syncGroupName:i,nextLink:s,options:o},KRt)}_listMemberSchemasNext(e,t,n,i,s,o,a){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,syncGroupName:i,syncMemberName:s,nextLink:o,options:a},QRt)}},lg=Pt.createSerializer(Et,!1),URt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/syncGroups/{syncGroupName}/syncMembers/{syncMemberName}",httpMethod:"GET",responses:{200:{bodyMapper:nm},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,ma,FS],headerParameters:[U],serializer:lg},BRt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/syncGroups/{syncGroupName}/syncMembers/{syncMemberName}",httpMethod:"PUT",responses:{200:{bodyMapper:nm},201:{bodyMapper:nm},202:{bodyMapper:nm},204:{bodyMapper:nm},default:{}},requestBody:ixe,queryParameters:[$],urlParameters:[M,k,q,X,ve,ma,FS],headerParameters:[U,Vt],mediaType:"json",serializer:lg},GRt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/syncGroups/{syncGroupName}/syncMembers/{syncMemberName}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,ma,FS],serializer:lg},$Rt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/syncGroups/{syncGroupName}/syncMembers/{syncMemberName}",httpMethod:"PATCH",responses:{200:{bodyMapper:nm},201:{bodyMapper:nm},202:{bodyMapper:nm},204:{bodyMapper:nm},default:{}},requestBody:ixe,queryParameters:[$],urlParameters:[M,k,q,X,ve,ma,FS],headerParameters:[U,Vt],mediaType:"json",serializer:lg},VRt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/syncGroups/{syncGroupName}/syncMembers",httpMethod:"GET",responses:{200:{bodyMapper:SZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,ma],headerParameters:[U],serializer:lg},HRt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/syncGroups/{syncGroupName}/syncMembers/{syncMemberName}/schemas",httpMethod:"GET",responses:{200:{bodyMapper:PN},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,ma,FS],headerParameters:[U],serializer:lg},WRt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/syncGroups/{syncGroupName}/syncMembers/{syncMemberName}/refreshSchema",httpMethod:"POST",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,ma,FS],serializer:lg},KRt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:SZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,ft,ma],headerParameters:[U],serializer:lg},QRt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:PN},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,ft,ma,FS],headerParameters:[U],serializer:lg},JJ=class{constructor(e){this.client=e}beginCreate(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,serverName:t,parameters:n,options:i},XRt);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginCreateAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreate(e,t,n,i)).pollUntilDone()})}},YRt=Pt.createSerializer(Et,!1),XRt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/tdeCertificates",httpMethod:"POST",responses:{200:{},201:{},202:{},204:{},default:{}},requestBody:YRe,queryParameters:[$],urlParameters:[M,k,q,X],headerParameters:[Vt],mediaType:"json",serializer:YRt},ZJ=class{constructor(e){this.client=e}listByLocation(e,t){let n=this.listByLocationPagingAll(e,t);return{next(){return n.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByLocationPagingPage(e,t)}}listByLocationPagingPage(e,t){return h.__asyncGenerator(this,arguments,function*(){let i=yield h.__await(this._listByLocation(e,t));yield yield h.__await(i.value||[]);let s=i.nextLink;for(;s;)i=yield h.__await(this._listByLocationNext(e,s,t)),s=i.nextLink,yield yield h.__await(i.value||[])})}listByLocationPagingAll(e,t){return h.__asyncGenerator(this,arguments,function*(){var i,s;try{for(var o=h.__asyncValues(this.listByLocationPagingPage(e,t)),a;a=yield h.__await(o.next()),!a.done;){let c=a.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(c)))}}catch(c){i={error:c}}finally{try{a&&!a.done&&(s=o.return)&&(yield h.__await(s.call(o)))}finally{if(i)throw i.error}}})}_listByLocation(e,t){return this.client.sendOperationRequest({locationName:e,options:t},JRt)}get(e,t,n){return this.client.sendOperationRequest({locationName:e,timeZoneId:t,options:n},ZRt)}_listByLocationNext(e,t,n){return this.client.sendOperationRequest({locationName:e,nextLink:t,options:n},ext)}},See=Pt.createSerializer(Et,!1),JRt={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Sql/locations/{locationName}/timeZones",httpMethod:"GET",responses:{200:{bodyMapper:CZ},default:{}},queryParameters:[$],urlParameters:[M,k,jr],headerParameters:[U],serializer:See},ZRt={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Sql/locations/{locationName}/timeZones/{timeZoneId}",httpMethod:"GET",responses:{200:{bodyMapper:RRe},default:{}},queryParameters:[$],urlParameters:[M,k,jr,vSt],headerParameters:[U],serializer:See},ext={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:CZ},default:{}},queryParameters:[$],urlParameters:[M,k,ft,jr],headerParameters:[U],serializer:See},e7=class{constructor(e){this.client=e}list(e){let t=this.listPagingAll(e);return{next(){return t.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listPagingPage(e)}}listPagingPage(e){return h.__asyncGenerator(this,arguments,function*(){let n=yield h.__await(this._list(e));yield yield h.__await(n.value||[]);let i=n.nextLink;for(;i;)n=yield h.__await(this._listNext(i,e)),i=n.nextLink,yield yield h.__await(n.value||[])})}listPagingAll(e){return h.__asyncGenerator(this,arguments,function*(){var n,i;try{for(var s=h.__asyncValues(this.listPagingPage(e)),o;o=yield h.__await(s.next()),!o.done;){let a=o.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(a)))}}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=s.return)&&(yield h.__await(i.call(s)))}finally{if(n)throw n.error}}})}listByResourceGroup(e,t){let n=this.listByResourceGroupPagingAll(e,t);return{next(){return n.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByResourceGroupPagingPage(e,t)}}listByResourceGroupPagingPage(e,t){return h.__asyncGenerator(this,arguments,function*(){let i=yield h.__await(this._listByResourceGroup(e,t));yield yield h.__await(i.value||[]);let s=i.nextLink;for(;s;)i=yield h.__await(this._listByResourceGroupNext(e,s,t)),s=i.nextLink,yield yield h.__await(i.value||[])})}listByResourceGroupPagingAll(e,t){return h.__asyncGenerator(this,arguments,function*(){var i,s;try{for(var o=h.__asyncValues(this.listByResourceGroupPagingPage(e,t)),a;a=yield h.__await(o.next()),!a.done;){let c=a.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(c)))}}catch(c){i={error:c}}finally{try{a&&!a.done&&(s=o.return)&&(yield h.__await(s.call(o)))}finally{if(i)throw i.error}}})}updateDnsServers(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,virtualClusterName:t,options:n},txt)}_list(e){return this.client.sendOperationRequest({options:e},rxt)}_listByResourceGroup(e,t){return this.client.sendOperationRequest({resourceGroupName:e,options:t},nxt)}get(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,virtualClusterName:t,options:n},ixt)}beginDelete(e,t,n){return h.__awaiter(this,void 0,void 0,function*(){let i=(a,c)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(a,c)}),s=(a,c)=>h.__awaiter(this,void 0,void 0,function*(){var l;let u,d=(l=a.options)===null||l===void 0?void 0:l.onResponse,p=(y,v)=>{u=y,d?.(y,v)},m=Object.assign(Object.assign({},a),{options:Object.assign(Object.assign({},a.options),{onResponse:p})});return{flatResponse:yield i(m,c),rawResponse:{statusCode:u.status,body:u.parsedBody,headers:u.headers.toJSON()}}}),o=new bt(s,{resourceGroupName:e,virtualClusterName:t,options:n},sxt);return new St.LroEngine(o,{resumeFrom:n?.resumeFrom,intervalInMs:n?.updateIntervalInMs})})}beginDeleteAndWait(e,t,n){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDelete(e,t,n)).pollUntilDone()})}beginUpdate(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,virtualClusterName:t,parameters:n,options:i},oxt);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginUpdateAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginUpdate(e,t,n,i)).pollUntilDone()})}_listNext(e,t){return this.client.sendOperationRequest({nextLink:e,options:t},axt)}_listByResourceGroupNext(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,nextLink:t,options:n},cxt)}},Ev=Pt.createSerializer(Et,!1),txt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/virtualClusters/{virtualClusterName}/updateManagedInstanceDnsServers",httpMethod:"POST",responses:{200:{bodyMapper:xRe},default:{}},queryParameters:[$],urlParameters:[M,k,q,WU],headerParameters:[U],serializer:Ev},rxt={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Sql/virtualClusters",httpMethod:"GET",responses:{200:{bodyMapper:wN},default:{}},queryParameters:[$],urlParameters:[M,k],headerParameters:[U],serializer:Ev},nxt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/virtualClusters",httpMethod:"GET",responses:{200:{bodyMapper:wN},default:{}},queryParameters:[$],urlParameters:[M,k,q],headerParameters:[U],serializer:Ev},ixt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/virtualClusters/{virtualClusterName}",httpMethod:"GET",responses:{200:{bodyMapper:wE},default:{}},queryParameters:[$],urlParameters:[M,k,q,WU],headerParameters:[U],serializer:Ev},sxt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/virtualClusters/{virtualClusterName}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,WU],serializer:Ev},oxt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/virtualClusters/{virtualClusterName}",httpMethod:"PATCH",responses:{200:{bodyMapper:wE},201:{bodyMapper:wE},202:{bodyMapper:wE},204:{bodyMapper:wE},default:{}},requestBody:bSt,queryParameters:[$],urlParameters:[M,k,q,WU],headerParameters:[U,Vt],mediaType:"json",serializer:Ev},axt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:wN},default:{}},queryParameters:[$],urlParameters:[M,k,ft],headerParameters:[U],serializer:Ev},cxt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:wN},default:{}},queryParameters:[$],urlParameters:[M,k,q,ft],headerParameters:[U],serializer:Ev},t7=class{constructor(e){this.client=e}listByServer(e,t,n){let i=this.listByServerPagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByServerPagingPage(e,t,n)}}listByServerPagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByServer(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByServerNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByServerPagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByServerPagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,virtualNetworkRuleName:n,options:i},lxt)}beginCreateOrUpdate(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,serverName:t,virtualNetworkRuleName:n,parameters:i,options:s},uxt);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i,s)).pollUntilDone()})}beginDelete(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,serverName:t,virtualNetworkRuleName:n,options:i},dxt);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginDeleteAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDelete(e,t,n,i)).pollUntilDone()})}_listByServer(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,options:n},pxt)}_listByServerNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,nextLink:n,options:i},mxt)}},ZN=Pt.createSerializer(Et,!1),lxt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/virtualNetworkRules/{virtualNetworkRuleName}",httpMethod:"GET",responses:{200:{bodyMapper:OS},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,XZ],headerParameters:[U],serializer:ZN},uxt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/virtualNetworkRules/{virtualNetworkRuleName}",httpMethod:"PUT",responses:{200:{bodyMapper:OS},201:{bodyMapper:OS},202:{bodyMapper:OS},204:{bodyMapper:OS},default:{}},requestBody:_St,queryParameters:[$],urlParameters:[M,k,q,X,XZ],headerParameters:[U,Vt],mediaType:"json",serializer:ZN},dxt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/virtualNetworkRules/{virtualNetworkRuleName}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,XZ],serializer:ZN},pxt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/virtualNetworkRules",httpMethod:"GET",responses:{200:{bodyMapper:PZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,X],headerParameters:[U],serializer:ZN},mxt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:PZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ft],headerParameters:[U],serializer:ZN},r7=class{constructor(e){this.client=e}listByWorkloadGroup(e,t,n,i,s){let o=this.listByWorkloadGroupPagingAll(e,t,n,i,s);return{next(){return o.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByWorkloadGroupPagingPage(e,t,n,i,s)}}listByWorkloadGroupPagingPage(e,t,n,i,s){return h.__asyncGenerator(this,arguments,function*(){let a=yield h.__await(this._listByWorkloadGroup(e,t,n,i,s));yield yield h.__await(a.value||[]);let c=a.nextLink;for(;c;)a=yield h.__await(this._listByWorkloadGroupNext(e,t,n,i,c,s)),c=a.nextLink,yield yield h.__await(a.value||[])})}listByWorkloadGroupPagingAll(e,t,n,i,s){return h.__asyncGenerator(this,arguments,function*(){var a,c;try{for(var l=h.__asyncValues(this.listByWorkloadGroupPagingPage(e,t,n,i,s)),u;u=yield h.__await(l.next()),!u.done;){let d=u.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(d)))}}catch(d){a={error:d}}finally{try{u&&!u.done&&(c=l.return)&&(yield h.__await(c.call(l)))}finally{if(a)throw a.error}}})}get(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,workloadGroupName:i,workloadClassifierName:s,options:o},hxt)}beginCreateOrUpdate(e,t,n,i,s,o,a){return h.__awaiter(this,void 0,void 0,function*(){let c=(d,p)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(d,p)}),l=(d,p)=>h.__awaiter(this,void 0,void 0,function*(){var m;let f,y=(m=d.options)===null||m===void 0?void 0:m.onResponse,v=(P,w)=>{f=P,y?.(P,w)},_=Object.assign(Object.assign({},d),{options:Object.assign(Object.assign({},d.options),{onResponse:v})});return{flatResponse:yield c(_,p),rawResponse:{statusCode:f.status,body:f.parsedBody,headers:f.headers.toJSON()}}}),u=new bt(l,{resourceGroupName:e,serverName:t,databaseName:n,workloadGroupName:i,workloadClassifierName:s,parameters:o,options:a},fxt);return new St.LroEngine(u,{resumeFrom:a?.resumeFrom,intervalInMs:a?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i,s,o,a){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i,s,o,a)).pollUntilDone()})}beginDelete(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){let a=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(u,d)}),c=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){var p;let m,f=(p=u.options)===null||p===void 0?void 0:p.onResponse,y=(C,P)=>{m=C,f?.(C,P)},v=Object.assign(Object.assign({},u),{options:Object.assign(Object.assign({},u.options),{onResponse:y})});return{flatResponse:yield a(v,d),rawResponse:{statusCode:m.status,body:m.parsedBody,headers:m.headers.toJSON()}}}),l=new bt(c,{resourceGroupName:e,serverName:t,databaseName:n,workloadGroupName:i,workloadClassifierName:s,options:o},gxt);return new St.LroEngine(l,{resumeFrom:o?.resumeFrom,intervalInMs:o?.updateIntervalInMs})})}beginDeleteAndWait(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDelete(e,t,n,i,s,o)).pollUntilDone()})}_listByWorkloadGroup(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,workloadGroupName:i,options:s},yxt)}_listByWorkloadGroupNext(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,workloadGroupName:i,nextLink:s,options:o},vxt)}},eD=Pt.createSerializer(Et,!1),hxt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/workloadGroups/{workloadGroupName}/workloadClassifiers/{workloadClassifierName}",httpMethod:"GET",responses:{200:{bodyMapper:AS},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,bv,JZ],headerParameters:[U],serializer:eD},fxt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/workloadGroups/{workloadGroupName}/workloadClassifiers/{workloadClassifierName}",httpMethod:"PUT",responses:{200:{bodyMapper:AS},201:{bodyMapper:AS},202:{bodyMapper:AS},204:{bodyMapper:AS},default:{}},requestBody:SSt,queryParameters:[$],urlParameters:[M,k,q,X,ve,bv,JZ],headerParameters:[U,Vt],mediaType:"json",serializer:eD},gxt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/workloadGroups/{workloadGroupName}/workloadClassifiers/{workloadClassifierName}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,bv,JZ],serializer:eD},yxt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/workloadGroups/{workloadGroupName}/workloadClassifiers",httpMethod:"GET",responses:{200:{bodyMapper:wZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,bv],headerParameters:[U],serializer:eD},vxt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:wZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,ft,bv],headerParameters:[U],serializer:eD},n7=class{constructor(e){this.client=e}listByDatabase(e,t,n,i){let s=this.listByDatabasePagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByDatabasePagingPage(e,t,n,i)}}listByDatabasePagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByDatabase(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listByDatabaseNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listByDatabasePagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByDatabasePagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}get(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,workloadGroupName:i,options:s},bxt)}beginCreateOrUpdate(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){let a=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(u,d)}),c=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){var p;let m,f=(p=u.options)===null||p===void 0?void 0:p.onResponse,y=(C,P)=>{m=C,f?.(C,P)},v=Object.assign(Object.assign({},u),{options:Object.assign(Object.assign({},u.options),{onResponse:y})});return{flatResponse:yield a(v,d),rawResponse:{statusCode:m.status,body:m.parsedBody,headers:m.headers.toJSON()}}}),l=new bt(c,{resourceGroupName:e,serverName:t,databaseName:n,workloadGroupName:i,parameters:s,options:o},_xt);return new St.LroEngine(l,{resumeFrom:o?.resumeFrom,intervalInMs:o?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i,s,o)).pollUntilDone()})}beginDelete(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,serverName:t,databaseName:n,workloadGroupName:i,options:s},Sxt);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginDeleteAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDelete(e,t,n,i,s)).pollUntilDone()})}_listByDatabase(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,options:i},Cxt)}_listByDatabaseNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,nextLink:i,options:s},Pxt)}},tD=Pt.createSerializer(Et,!1),bxt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/workloadGroups/{workloadGroupName}",httpMethod:"GET",responses:{200:{bodyMapper:NS},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,bv],headerParameters:[U],serializer:tD},_xt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/workloadGroups/{workloadGroupName}",httpMethod:"PUT",responses:{200:{bodyMapper:NS},201:{bodyMapper:NS},202:{bodyMapper:NS},204:{bodyMapper:NS},default:{}},requestBody:CSt,queryParameters:[$],urlParameters:[M,k,q,X,ve,bv],headerParameters:[U,Vt],mediaType:"json",serializer:tD},Sxt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/workloadGroups/{workloadGroupName}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,bv],serializer:tD},Cxt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/workloadGroups",httpMethod:"GET",responses:{200:{bodyMapper:EZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve],headerParameters:[U],serializer:tD},Pxt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:EZ},default:{}},queryParameters:[$],urlParameters:[M,k,q,X,ve,ft],headerParameters:[U],serializer:tD},i7=class{constructor(e){this.client=e}listByDatabase(e,t,n,i){let s=this.listByDatabasePagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByDatabasePagingPage(e,t,n,i)}}listByDatabasePagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByDatabase(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listByDatabaseNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listByDatabasePagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByDatabasePagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}get(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,tdeName:i,options:s},wxt)}createOrUpdate(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,tdeName:i,parameters:s,options:o},Ext)}_listByDatabase(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,options:i},Txt)}_listByDatabaseNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,nextLink:i,options:s},Ixt)}},cB=Pt.createSerializer(Et,!1),wxt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/transparentDataEncryption/{tdeName}",httpMethod:"GET",responses:{200:{bodyMapper:pN},default:{}},queryParameters:[An],urlParameters:[M,k,q,X,ve,VU],headerParameters:[U],serializer:cB},Ext={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/transparentDataEncryption/{tdeName}",httpMethod:"PUT",responses:{200:{bodyMapper:pN},201:{bodyMapper:pN},202:{},default:{}},requestBody:PSt,queryParameters:[An],urlParameters:[M,k,q,X,ve,VU],headerParameters:[U,Vt],mediaType:"json",serializer:cB},Txt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/transparentDataEncryption",httpMethod:"GET",responses:{200:{bodyMapper:TZ},default:{}},queryParameters:[An],urlParameters:[M,k,q,X,ve],headerParameters:[U],serializer:cB},Ixt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:TZ},default:{}},queryParameters:[An],urlParameters:[M,k,q,X,ve,ft],headerParameters:[U],serializer:cB},s7=class{constructor(e){this.client=e}listByDatabase(e,t,n,i){let s=this.listByDatabasePagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByDatabasePagingPage(e,t,n,i)}}listByDatabasePagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByDatabase(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listByDatabaseNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listByDatabasePagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByDatabasePagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}get(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,policyName:i,options:s},Rxt)}beginCreateOrUpdate(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){let a=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(u,d)}),c=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){var p;let m,f=(p=u.options)===null||p===void 0?void 0:p.onResponse,y=(C,P)=>{m=C,f?.(C,P)},v=Object.assign(Object.assign({},u),{options:Object.assign(Object.assign({},u.options),{onResponse:y})});return{flatResponse:yield a(v,d),rawResponse:{statusCode:m.status,body:m.parsedBody,headers:m.headers.toJSON()}}}),l=new bt(c,{resourceGroupName:e,serverName:t,databaseName:n,policyName:i,parameters:s,options:o},xxt);return new St.LroEngine(l,{resumeFrom:o?.resumeFrom,intervalInMs:o?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i,s,o)).pollUntilDone()})}beginUpdate(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){let a=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(u,d)}),c=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){var p;let m,f=(p=u.options)===null||p===void 0?void 0:p.onResponse,y=(C,P)=>{m=C,f?.(C,P)},v=Object.assign(Object.assign({},u),{options:Object.assign(Object.assign({},u.options),{onResponse:y})});return{flatResponse:yield a(v,d),rawResponse:{statusCode:m.status,body:m.parsedBody,headers:m.headers.toJSON()}}}),l=new bt(c,{resourceGroupName:e,serverName:t,databaseName:n,policyName:i,parameters:s,options:o},Oxt);return new St.LroEngine(l,{resumeFrom:o?.resumeFrom,intervalInMs:o?.updateIntervalInMs})})}beginUpdateAndWait(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginUpdate(e,t,n,i,s,o)).pollUntilDone()})}_listByDatabase(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,options:i},Axt)}_listByDatabaseNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,nextLink:i,options:s},Nxt)}},rD=Pt.createSerializer(Et,!1),Rxt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/backupShortTermRetentionPolicies/{policyName}",httpMethod:"GET",responses:{200:{bodyMapper:im},default:{}},queryParameters:[An],urlParameters:[M,k,q,X,ve,ZZ],headerParameters:[U],serializer:rD},xxt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/backupShortTermRetentionPolicies/{policyName}",httpMethod:"PUT",responses:{200:{bodyMapper:im},201:{bodyMapper:im},202:{bodyMapper:im},204:{bodyMapper:im},default:{}},requestBody:sxe,queryParameters:[An],urlParameters:[M,k,q,X,ve,ZZ],headerParameters:[U,Vt],mediaType:"json",serializer:rD},Oxt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/backupShortTermRetentionPolicies/{policyName}",httpMethod:"PATCH",responses:{200:{bodyMapper:im},201:{bodyMapper:im},202:{bodyMapper:im},204:{bodyMapper:im},default:{}},requestBody:sxe,queryParameters:[An],urlParameters:[M,k,q,X,ve,ZZ],headerParameters:[U,Vt],mediaType:"json",serializer:rD},Axt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/backupShortTermRetentionPolicies",httpMethod:"GET",responses:{200:{bodyMapper:IZ},default:{}},queryParameters:[An],urlParameters:[M,k,q,X,ve],headerParameters:[U],serializer:rD},Nxt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:IZ},default:{}},queryParameters:[An],urlParameters:[M,k,q,X,ve,ft],headerParameters:[U],serializer:rD},o7=class{constructor(e){this.client=e}listByDatabase(e,t,n,i){let s=this.listByDatabasePagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByDatabasePagingPage(e,t,n,i)}}listByDatabasePagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByDatabase(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listByDatabaseNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listByDatabasePagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByDatabasePagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}get(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,extensionName:i,options:s},Dxt)}beginCreateOrUpdate(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){let a=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(u,d)}),c=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){var p;let m,f=(p=u.options)===null||p===void 0?void 0:p.onResponse,y=(C,P)=>{m=C,f?.(C,P)},v=Object.assign(Object.assign({},u),{options:Object.assign(Object.assign({},u.options),{onResponse:y})});return{flatResponse:yield a(v,d),rawResponse:{statusCode:m.status,body:m.parsedBody,headers:m.headers.toJSON()}}}),l=new bt(c,{resourceGroupName:e,serverName:t,databaseName:n,extensionName:i,parameters:s,options:o},Mxt);return new St.LroEngine(l,{resumeFrom:o?.resumeFrom,intervalInMs:o?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i,s,o)).pollUntilDone()})}_listByDatabase(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,options:i},kxt)}_listByDatabaseNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,nextLink:i,options:s},Lxt)}},lB=Pt.createSerializer(Et,!1),Dxt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/extensions/{extensionName}",httpMethod:"GET",responses:{200:{},default:{}},queryParameters:[An],urlParameters:[M,k,q,X,ve,oxe],serializer:lB},Mxt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/extensions/{extensionName}",httpMethod:"PUT",responses:{200:{bodyMapper:ZA},201:{bodyMapper:ZA},202:{bodyMapper:ZA},204:{bodyMapper:ZA},default:{}},requestBody:wSt,queryParameters:[An],urlParameters:[M,k,q,X,ve,oxe],headerParameters:[U,Vt],mediaType:"json",serializer:lB},kxt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/extensions",httpMethod:"GET",responses:{200:{bodyMapper:RZ},default:{}},queryParameters:[An],urlParameters:[M,k,q,X,ve],headerParameters:[U],serializer:lB},Lxt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:RZ},default:{}},queryParameters:[An],urlParameters:[M,k,q,X,ve,ft],headerParameters:[U],serializer:lB},a7=class{constructor(e){this.client=e}listByDatabase(e,t,n,i){let s=this.listByDatabasePagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByDatabasePagingPage(e,t,n,i)}}listByDatabasePagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByDatabase(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listByDatabaseNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listByDatabasePagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByDatabasePagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}cancel(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,operationId:i,options:s},qxt)}_listByDatabase(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,options:i},zxt)}_listByDatabaseNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,nextLink:i,options:s},Fxt)}},Cee=Pt.createSerializer(Et,!1),qxt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/operations/{operationId}/cancel",httpMethod:"POST",responses:{200:{},default:{}},queryParameters:[An],urlParameters:[M,k,q,X,ve,kU],serializer:Cee},zxt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/operations",httpMethod:"GET",responses:{200:{bodyMapper:xZ},default:{}},queryParameters:[An],urlParameters:[M,k,q,X,ve],headerParameters:[U],serializer:Cee},Fxt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:xZ},default:{}},queryParameters:[An],urlParameters:[M,k,q,X,ve,ft],headerParameters:[U],serializer:Cee},c7=class{constructor(e){this.client=e}listByDatabase(e,t,n,i){let s=this.listByDatabasePagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByDatabasePagingPage(e,t,n,i)}}listByDatabasePagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByDatabase(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listByDatabaseNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listByDatabasePagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByDatabasePagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}_listByDatabase(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,options:i},jxt)}_listByDatabaseNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,nextLink:i,options:s},Uxt)}},Ixe=Pt.createSerializer(Et,!1),jxt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/usages",httpMethod:"GET",responses:{200:{bodyMapper:OZ},default:{}},queryParameters:[An],urlParameters:[M,k,q,X,ve],headerParameters:[U],serializer:Ixe},Uxt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:OZ},default:{}},queryParameters:[An],urlParameters:[M,k,q,X,ve,ft],headerParameters:[U],serializer:Ixe},l7=class{constructor(e){this.client=e}listByDatabase(e,t,n,i){let s=this.listByDatabasePagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByDatabasePagingPage(e,t,n,i)}}listByDatabasePagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByDatabase(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listByDatabaseNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listByDatabasePagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByDatabasePagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}get(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,ledgerDigestUploads:i,options:s},Bxt)}beginCreateOrUpdate(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){let a=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(u,d)}),c=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){var p;let m,f=(p=u.options)===null||p===void 0?void 0:p.onResponse,y=(C,P)=>{m=C,f?.(C,P)},v=Object.assign(Object.assign({},u),{options:Object.assign(Object.assign({},u.options),{onResponse:y})});return{flatResponse:yield a(v,d),rawResponse:{statusCode:m.status,body:m.parsedBody,headers:m.headers.toJSON()}}}),l=new bt(c,{resourceGroupName:e,serverName:t,databaseName:n,ledgerDigestUploads:i,parameters:s,options:o},Gxt);return new St.LroEngine(l,{resumeFrom:o?.resumeFrom,intervalInMs:o?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i,s,o)).pollUntilDone()})}_listByDatabase(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,options:i},$xt)}beginDisable(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,serverName:t,databaseName:n,ledgerDigestUploads:i,options:s},Vxt);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginDisableAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDisable(e,t,n,i,s)).pollUntilDone()})}_listByDatabaseNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,databaseName:n,nextLink:i,options:s},Hxt)}},nD=Pt.createSerializer(Et,!1),Bxt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/ledgerDigestUploads/{ledgerDigestUploads}",httpMethod:"GET",responses:{200:{bodyMapper:sm},default:{}},queryParameters:[An],urlParameters:[M,k,q,X,ve,eee],headerParameters:[U],serializer:nD},Gxt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/ledgerDigestUploads/{ledgerDigestUploads}",httpMethod:"PUT",responses:{200:{bodyMapper:sm},201:{bodyMapper:sm},202:{bodyMapper:sm},204:{bodyMapper:sm},default:{}},requestBody:ESt,queryParameters:[An],urlParameters:[M,k,q,X,ve,eee],headerParameters:[U,Vt],mediaType:"json",serializer:nD},$xt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/ledgerDigestUploads",httpMethod:"GET",responses:{200:{bodyMapper:AZ},default:{}},queryParameters:[An],urlParameters:[M,k,q,X,ve],headerParameters:[U],serializer:nD},Vxt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/ledgerDigestUploads/{ledgerDigestUploads}/disable",httpMethod:"POST",responses:{200:{bodyMapper:sm},201:{bodyMapper:sm},202:{bodyMapper:sm},204:{bodyMapper:sm},default:{}},queryParameters:[An],urlParameters:[M,k,q,X,ve,eee],headerParameters:[U],serializer:nD},Hxt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:AZ},default:{}},queryParameters:[An],urlParameters:[M,k,q,X,ve,ft],headerParameters:[U],serializer:nD},u7=class{constructor(e){this.client=e}listByServer(e,t,n){let i=this.listByServerPagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByServerPagingPage(e,t,n)}}listByServerPagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByServer(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByServerNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByServerPagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByServerPagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,outboundRuleFqdn:n,options:i},Wxt)}beginCreateOrUpdate(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,serverName:t,outboundRuleFqdn:n,parameters:i,options:s},Kxt);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i,s)).pollUntilDone()})}beginDelete(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,serverName:t,outboundRuleFqdn:n,options:i},Qxt);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginDeleteAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDelete(e,t,n,i)).pollUntilDone()})}_listByServer(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,options:n},Yxt)}_listByServerNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,nextLink:n,options:i},Xxt)}},iD=Pt.createSerializer(Et,!1),Wxt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/outboundFirewallRules/{outboundRuleFqdn}",httpMethod:"GET",responses:{200:{bodyMapper:DS},default:{}},queryParameters:[An],urlParameters:[M,k,q,X,tee],headerParameters:[U],serializer:iD},Kxt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/outboundFirewallRules/{outboundRuleFqdn}",httpMethod:"PUT",responses:{200:{bodyMapper:DS},201:{bodyMapper:DS},202:{bodyMapper:DS},204:{bodyMapper:DS},default:{}},requestBody:TSt,queryParameters:[An],urlParameters:[M,k,q,X,tee],headerParameters:[U,Vt],mediaType:"json",serializer:iD},Qxt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/outboundFirewallRules/{outboundRuleFqdn}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[An],urlParameters:[M,k,q,X,tee],serializer:iD},Yxt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/outboundFirewallRules",httpMethod:"GET",responses:{200:{bodyMapper:NZ},default:{}},queryParameters:[An],urlParameters:[M,k,q,X],headerParameters:[U],serializer:iD},Xxt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:NZ},default:{}},queryParameters:[An],urlParameters:[M,k,q,X,ft],headerParameters:[U],serializer:iD},d7=class{constructor(e){this.client=e}listByResourceGroup(e,t){let n=this.listByResourceGroupPagingAll(e,t);return{next(){return n.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByResourceGroupPagingPage(e,t)}}listByResourceGroupPagingPage(e,t){return h.__asyncGenerator(this,arguments,function*(){let i=yield h.__await(this._listByResourceGroup(e,t));yield yield h.__await(i.value||[]);let s=i.nextLink;for(;s;)i=yield h.__await(this._listByResourceGroupNext(e,s,t)),s=i.nextLink,yield yield h.__await(i.value||[])})}listByResourceGroupPagingAll(e,t){return h.__asyncGenerator(this,arguments,function*(){var i,s;try{for(var o=h.__asyncValues(this.listByResourceGroupPagingPage(e,t)),a;a=yield h.__await(o.next()),!a.done;){let c=a.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(c)))}}catch(c){i={error:c}}finally{try{a&&!a.done&&(s=o.return)&&(yield h.__await(s.call(o)))}finally{if(i)throw i.error}}})}list(e){let t=this.listPagingAll(e);return{next(){return t.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listPagingPage(e)}}listPagingPage(e){return h.__asyncGenerator(this,arguments,function*(){let n=yield h.__await(this._list(e));yield yield h.__await(n.value||[]);let i=n.nextLink;for(;i;)n=yield h.__await(this._listNext(i,e)),i=n.nextLink,yield yield h.__await(n.value||[])})}listPagingAll(e){return h.__asyncGenerator(this,arguments,function*(){var n,i;try{for(var s=h.__asyncValues(this.listPagingPage(e)),o;o=yield h.__await(s.next()),!o.done;){let a=o.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(a)))}}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=s.return)&&(yield h.__await(i.call(s)))}finally{if(n)throw n.error}}})}_listByResourceGroup(e,t){return this.client.sendOperationRequest({resourceGroupName:e,options:t},Jxt)}get(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,options:n},Zxt)}beginCreateOrUpdate(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,serverName:t,parameters:n,options:i},eOt);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i)).pollUntilDone()})}beginDelete(e,t,n){return h.__awaiter(this,void 0,void 0,function*(){let i=(a,c)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(a,c)}),s=(a,c)=>h.__awaiter(this,void 0,void 0,function*(){var l;let u,d=(l=a.options)===null||l===void 0?void 0:l.onResponse,p=(y,v)=>{u=y,d?.(y,v)},m=Object.assign(Object.assign({},a),{options:Object.assign(Object.assign({},a.options),{onResponse:p})});return{flatResponse:yield i(m,c),rawResponse:{statusCode:u.status,body:u.parsedBody,headers:u.headers.toJSON()}}}),o=new bt(s,{resourceGroupName:e,serverName:t,options:n},tOt);return new St.LroEngine(o,{resumeFrom:n?.resumeFrom,intervalInMs:n?.updateIntervalInMs})})}beginDeleteAndWait(e,t,n){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDelete(e,t,n)).pollUntilDone()})}beginUpdate(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,serverName:t,parameters:n,options:i},rOt);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginUpdateAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginUpdate(e,t,n,i)).pollUntilDone()})}_list(e){return this.client.sendOperationRequest({options:e},nOt)}beginImportDatabase(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,serverName:t,parameters:n,options:i},iOt);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginImportDatabaseAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginImportDatabase(e,t,n,i)).pollUntilDone()})}checkNameAvailability(e,t){return this.client.sendOperationRequest({parameters:e,options:t},sOt)}_listByResourceGroupNext(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,nextLink:t,options:n},oOt)}_listNext(e,t){return this.client.sendOperationRequest({nextLink:e,options:t},aOt)}},Oh=Pt.createSerializer(Et,!1),Jxt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers",httpMethod:"GET",responses:{200:{bodyMapper:TN},default:{}},queryParameters:[An,mu],urlParameters:[M,k,q],headerParameters:[U],serializer:Oh},Zxt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}",httpMethod:"GET",responses:{200:{bodyMapper:um},default:{}},queryParameters:[An,mu],urlParameters:[M,k,q,X],headerParameters:[U],serializer:Oh},eOt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}",httpMethod:"PUT",responses:{200:{bodyMapper:um},201:{bodyMapper:um},202:{bodyMapper:um},204:{bodyMapper:um},default:{}},requestBody:ISt,queryParameters:[An],urlParameters:[M,k,q,X],headerParameters:[U,Vt],mediaType:"json",serializer:Oh},tOt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[An],urlParameters:[M,k,q,X],serializer:Oh},rOt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}",httpMethod:"PATCH",responses:{200:{bodyMapper:um},201:{bodyMapper:um},202:{bodyMapper:um},204:{bodyMapper:um},default:{}},requestBody:RSt,queryParameters:[An],urlParameters:[M,k,q,X],headerParameters:[U,Vt],mediaType:"json",serializer:Oh},nOt={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Sql/servers",httpMethod:"GET",responses:{200:{bodyMapper:TN},default:{}},queryParameters:[An,mu],urlParameters:[M,k],headerParameters:[U],serializer:Oh},iOt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/import",httpMethod:"POST",responses:{200:{bodyMapper:$u},201:{bodyMapper:$u},202:{bodyMapper:$u},204:{bodyMapper:$u},default:{}},requestBody:xSt,queryParameters:[An],urlParameters:[M,k,q,X],headerParameters:[U,Vt],mediaType:"json",serializer:Oh},sOt={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Sql/checkNameAvailability",httpMethod:"POST",responses:{200:{bodyMapper:oRe},default:{}},requestBody:OSt,queryParameters:[An],urlParameters:[M,k],headerParameters:[U,Vt],mediaType:"json",serializer:Oh},oOt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:TN},default:{}},queryParameters:[An,mu],urlParameters:[M,k,q,ft],headerParameters:[U],serializer:Oh},aOt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:TN},default:{}},queryParameters:[An,mu],urlParameters:[M,k,ft],headerParameters:[U],serializer:Oh},p7=class{constructor(e){this.client=e}listByInstancePool(e,t,n){let i=this.listByInstancePoolPagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByInstancePoolPagingPage(e,t,n)}}listByInstancePoolPagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByInstancePool(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByInstancePoolNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByInstancePoolPagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByInstancePoolPagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}_listByInstancePool(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,instancePoolName:t,options:n},cOt)}_listByInstancePoolNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,instancePoolName:t,nextLink:n,options:i},lOt)}},Rxe=Pt.createSerializer(Et,!1),cOt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/instancePools/{instancePoolName}/usages",httpMethod:"GET",responses:{200:{bodyMapper:DZ},default:{}},queryParameters:[An,axe],urlParameters:[M,k,q,yv],headerParameters:[U],serializer:Rxe},lOt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:DZ},default:{}},queryParameters:[An,axe],urlParameters:[M,k,q,ft,yv],headerParameters:[U],serializer:Rxe},m7=class{constructor(e){this.client=e}listByDatabase(e,t,n,i){let s=this.listByDatabasePagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByDatabasePagingPage(e,t,n,i)}}listByDatabasePagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByDatabase(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listByDatabaseNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listByDatabasePagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByDatabasePagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}listByLocation(e,t){let n=this.listByLocationPagingAll(e,t);return{next(){return n.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByLocationPagingPage(e,t)}}listByLocationPagingPage(e,t){return h.__asyncGenerator(this,arguments,function*(){let i=yield h.__await(this._listByLocation(e,t));yield yield h.__await(i.value||[]);let s=i.nextLink;for(;s;)i=yield h.__await(this._listByLocationNext(e,s,t)),s=i.nextLink,yield yield h.__await(i.value||[])})}listByLocationPagingAll(e,t){return h.__asyncGenerator(this,arguments,function*(){var i,s;try{for(var o=h.__asyncValues(this.listByLocationPagingPage(e,t)),a;a=yield h.__await(o.next()),!a.done;){let c=a.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(c)))}}catch(c){i={error:c}}finally{try{a&&!a.done&&(s=o.return)&&(yield h.__await(s.call(o)))}finally{if(i)throw i.error}}})}listByServer(e,t,n){let i=this.listByServerPagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByServerPagingPage(e,t,n)}}listByServerPagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByServer(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByServerNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByServerPagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByServerPagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}listByResourceGroupDatabase(e,t,n,i,s){let o=this.listByResourceGroupDatabasePagingAll(e,t,n,i,s);return{next(){return o.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByResourceGroupDatabasePagingPage(e,t,n,i,s)}}listByResourceGroupDatabasePagingPage(e,t,n,i,s){return h.__asyncGenerator(this,arguments,function*(){let a=yield h.__await(this._listByResourceGroupDatabase(e,t,n,i,s));yield yield h.__await(a.value||[]);let c=a.nextLink;for(;c;)a=yield h.__await(this._listByResourceGroupDatabaseNext(e,t,n,i,c,s)),c=a.nextLink,yield yield h.__await(a.value||[])})}listByResourceGroupDatabasePagingAll(e,t,n,i,s){return h.__asyncGenerator(this,arguments,function*(){var a,c;try{for(var l=h.__asyncValues(this.listByResourceGroupDatabasePagingPage(e,t,n,i,s)),u;u=yield h.__await(l.next()),!u.done;){let d=u.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(d)))}}catch(d){a={error:d}}finally{try{u&&!u.done&&(c=l.return)&&(yield h.__await(c.call(l)))}finally{if(a)throw a.error}}})}listByResourceGroupLocation(e,t,n){let i=this.listByResourceGroupLocationPagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByResourceGroupLocationPagingPage(e,t,n)}}listByResourceGroupLocationPagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByResourceGroupLocation(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByResourceGroupLocationNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByResourceGroupLocationPagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByResourceGroupLocationPagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}listByResourceGroupServer(e,t,n,i){let s=this.listByResourceGroupServerPagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByResourceGroupServerPagingPage(e,t,n,i)}}listByResourceGroupServerPagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByResourceGroupServer(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listByResourceGroupServerNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listByResourceGroupServerPagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByResourceGroupServerPagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}beginCopy(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){let a=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(u,d)}),c=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){var p;let m,f=(p=u.options)===null||p===void 0?void 0:p.onResponse,y=(C,P)=>{m=C,f?.(C,P)},v=Object.assign(Object.assign({},u),{options:Object.assign(Object.assign({},u.options),{onResponse:y})});return{flatResponse:yield a(v,d),rawResponse:{statusCode:m.status,body:m.parsedBody,headers:m.headers.toJSON()}}}),l=new bt(c,{locationName:e,longTermRetentionServerName:t,longTermRetentionDatabaseName:n,backupName:i,parameters:s,options:o},uOt);return new St.LroEngine(l,{resumeFrom:o?.resumeFrom,intervalInMs:o?.updateIntervalInMs})})}beginCopyAndWait(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCopy(e,t,n,i,s,o)).pollUntilDone()})}beginUpdate(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){let a=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(u,d)}),c=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){var p;let m,f=(p=u.options)===null||p===void 0?void 0:p.onResponse,y=(C,P)=>{m=C,f?.(C,P)},v=Object.assign(Object.assign({},u),{options:Object.assign(Object.assign({},u.options),{onResponse:y})});return{flatResponse:yield a(v,d),rawResponse:{statusCode:m.status,body:m.parsedBody,headers:m.headers.toJSON()}}}),l=new bt(c,{locationName:e,longTermRetentionServerName:t,longTermRetentionDatabaseName:n,backupName:i,parameters:s,options:o},dOt);return new St.LroEngine(l,{resumeFrom:o?.resumeFrom,intervalInMs:o?.updateIntervalInMs})})}beginUpdateAndWait(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginUpdate(e,t,n,i,s,o)).pollUntilDone()})}get(e,t,n,i,s){return this.client.sendOperationRequest({locationName:e,longTermRetentionServerName:t,longTermRetentionDatabaseName:n,backupName:i,options:s},pOt)}beginDelete(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{locationName:e,longTermRetentionServerName:t,longTermRetentionDatabaseName:n,backupName:i,options:s},mOt);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginDeleteAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDelete(e,t,n,i,s)).pollUntilDone()})}_listByDatabase(e,t,n,i){return this.client.sendOperationRequest({locationName:e,longTermRetentionServerName:t,longTermRetentionDatabaseName:n,options:i},hOt)}_listByLocation(e,t){return this.client.sendOperationRequest({locationName:e,options:t},fOt)}_listByServer(e,t,n){return this.client.sendOperationRequest({locationName:e,longTermRetentionServerName:t,options:n},gOt)}beginCopyByResourceGroup(e,t,n,i,s,o,a){return h.__awaiter(this,void 0,void 0,function*(){let c=(d,p)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(d,p)}),l=(d,p)=>h.__awaiter(this,void 0,void 0,function*(){var m;let f,y=(m=d.options)===null||m===void 0?void 0:m.onResponse,v=(P,w)=>{f=P,y?.(P,w)},_=Object.assign(Object.assign({},d),{options:Object.assign(Object.assign({},d.options),{onResponse:v})});return{flatResponse:yield c(_,p),rawResponse:{statusCode:f.status,body:f.parsedBody,headers:f.headers.toJSON()}}}),u=new bt(l,{resourceGroupName:e,locationName:t,longTermRetentionServerName:n,longTermRetentionDatabaseName:i,backupName:s,parameters:o,options:a},yOt);return new St.LroEngine(u,{resumeFrom:a?.resumeFrom,intervalInMs:a?.updateIntervalInMs})})}beginCopyByResourceGroupAndWait(e,t,n,i,s,o,a){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCopyByResourceGroup(e,t,n,i,s,o,a)).pollUntilDone()})}beginUpdateByResourceGroup(e,t,n,i,s,o,a){return h.__awaiter(this,void 0,void 0,function*(){let c=(d,p)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(d,p)}),l=(d,p)=>h.__awaiter(this,void 0,void 0,function*(){var m;let f,y=(m=d.options)===null||m===void 0?void 0:m.onResponse,v=(P,w)=>{f=P,y?.(P,w)},_=Object.assign(Object.assign({},d),{options:Object.assign(Object.assign({},d.options),{onResponse:v})});return{flatResponse:yield c(_,p),rawResponse:{statusCode:f.status,body:f.parsedBody,headers:f.headers.toJSON()}}}),u=new bt(l,{resourceGroupName:e,locationName:t,longTermRetentionServerName:n,longTermRetentionDatabaseName:i,backupName:s,parameters:o,options:a},vOt);return new St.LroEngine(u,{resumeFrom:a?.resumeFrom,intervalInMs:a?.updateIntervalInMs})})}beginUpdateByResourceGroupAndWait(e,t,n,i,s,o,a){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginUpdateByResourceGroup(e,t,n,i,s,o,a)).pollUntilDone()})}getByResourceGroup(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,locationName:t,longTermRetentionServerName:n,longTermRetentionDatabaseName:i,backupName:s,options:o},bOt)}beginDeleteByResourceGroup(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){let a=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(u,d)}),c=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){var p;let m,f=(p=u.options)===null||p===void 0?void 0:p.onResponse,y=(C,P)=>{m=C,f?.(C,P)},v=Object.assign(Object.assign({},u),{options:Object.assign(Object.assign({},u.options),{onResponse:y})});return{flatResponse:yield a(v,d),rawResponse:{statusCode:m.status,body:m.parsedBody,headers:m.headers.toJSON()}}}),l=new bt(c,{resourceGroupName:e,locationName:t,longTermRetentionServerName:n,longTermRetentionDatabaseName:i,backupName:s,options:o},_Ot);return new St.LroEngine(l,{resumeFrom:o?.resumeFrom,intervalInMs:o?.updateIntervalInMs})})}beginDeleteByResourceGroupAndWait(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDeleteByResourceGroup(e,t,n,i,s,o)).pollUntilDone()})}_listByResourceGroupDatabase(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,locationName:t,longTermRetentionServerName:n,longTermRetentionDatabaseName:i,options:s},SOt)}_listByResourceGroupLocation(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,locationName:t,options:n},COt)}_listByResourceGroupServer(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,locationName:t,longTermRetentionServerName:n,options:i},POt)}_listByDatabaseNext(e,t,n,i,s){return this.client.sendOperationRequest({locationName:e,longTermRetentionServerName:t,longTermRetentionDatabaseName:n,nextLink:i,options:s},wOt)}_listByLocationNext(e,t,n){return this.client.sendOperationRequest({locationName:e,nextLink:t,options:n},EOt)}_listByServerNext(e,t,n,i){return this.client.sendOperationRequest({locationName:e,longTermRetentionServerName:t,nextLink:n,options:i},TOt)}_listByResourceGroupDatabaseNext(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,locationName:t,longTermRetentionServerName:n,longTermRetentionDatabaseName:i,nextLink:s,options:o},IOt)}_listByResourceGroupLocationNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,locationName:t,nextLink:n,options:i},ROt)}_listByResourceGroupServerNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,locationName:t,longTermRetentionServerName:n,nextLink:i,options:s},xOt)}},ha=Pt.createSerializer(Et,!1),uOt={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Sql/locations/{locationName}/longTermRetentionServers/{longTermRetentionServerName}/longTermRetentionDatabases/{longTermRetentionDatabaseName}/longTermRetentionBackups/{backupName}/copy",httpMethod:"POST",responses:{200:{bodyMapper:Ec},201:{bodyMapper:Ec},202:{bodyMapper:Ec},204:{bodyMapper:Ec},default:{}},requestBody:cxe,queryParameters:[wr],urlParameters:[M,k,jr,Xc,Qd,Yd],headerParameters:[U,Vt],mediaType:"json",serializer:ha},dOt={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Sql/locations/{locationName}/longTermRetentionServers/{longTermRetentionServerName}/longTermRetentionDatabases/{longTermRetentionDatabaseName}/longTermRetentionBackups/{backupName}/update",httpMethod:"POST",responses:{200:{bodyMapper:Ec},201:{bodyMapper:Ec},202:{bodyMapper:Ec},204:{bodyMapper:Ec},default:{}},requestBody:lxe,queryParameters:[wr],urlParameters:[M,k,jr,Xc,Qd,Yd],headerParameters:[U,Vt],mediaType:"json",serializer:ha},pOt={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Sql/locations/{locationName}/longTermRetentionServers/{longTermRetentionServerName}/longTermRetentionDatabases/{longTermRetentionDatabaseName}/longTermRetentionBackups/{backupName}",httpMethod:"GET",responses:{200:{bodyMapper:GZ},default:{}},queryParameters:[wr],urlParameters:[M,k,jr,Xc,Qd,Yd],headerParameters:[U],serializer:ha},mOt={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Sql/locations/{locationName}/longTermRetentionServers/{longTermRetentionServerName}/longTermRetentionDatabases/{longTermRetentionDatabaseName}/longTermRetentionBackups/{backupName}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[wr],urlParameters:[M,k,jr,Xc,Qd,Yd],serializer:ha},hOt={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Sql/locations/{locationName}/longTermRetentionServers/{longTermRetentionServerName}/longTermRetentionDatabases/{longTermRetentionDatabaseName}/longTermRetentionBackups",httpMethod:"GET",responses:{200:{bodyMapper:Vu},default:{}},queryParameters:[wr,ro,no],urlParameters:[M,k,jr,Xc,Qd],headerParameters:[U],serializer:ha},fOt={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Sql/locations/{locationName}/longTermRetentionBackups",httpMethod:"GET",responses:{200:{bodyMapper:Vu},default:{}},queryParameters:[wr,ro,no],urlParameters:[M,k,jr],headerParameters:[U],serializer:ha},gOt={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Sql/locations/{locationName}/longTermRetentionServers/{longTermRetentionServerName}/longTermRetentionBackups",httpMethod:"GET",responses:{200:{bodyMapper:Vu},default:{}},queryParameters:[wr,ro,no],urlParameters:[M,k,jr,Xc],headerParameters:[U],serializer:ha},yOt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/locations/{locationName}/longTermRetentionServers/{longTermRetentionServerName}/longTermRetentionDatabases/{longTermRetentionDatabaseName}/longTermRetentionBackups/{backupName}/copy",httpMethod:"POST",responses:{200:{bodyMapper:Ec},201:{bodyMapper:Ec},202:{bodyMapper:Ec},204:{bodyMapper:Ec},default:{}},requestBody:cxe,queryParameters:[wr],urlParameters:[M,k,q,jr,Xc,Qd,Yd],headerParameters:[U,Vt],mediaType:"json",serializer:ha},vOt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/locations/{locationName}/longTermRetentionServers/{longTermRetentionServerName}/longTermRetentionDatabases/{longTermRetentionDatabaseName}/longTermRetentionBackups/{backupName}/update",httpMethod:"POST",responses:{200:{bodyMapper:Ec},201:{bodyMapper:Ec},202:{bodyMapper:Ec},204:{bodyMapper:Ec},default:{}},requestBody:lxe,queryParameters:[wr],urlParameters:[M,k,q,jr,Xc,Qd,Yd],headerParameters:[U,Vt],mediaType:"json",serializer:ha},bOt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/locations/{locationName}/longTermRetentionServers/{longTermRetentionServerName}/longTermRetentionDatabases/{longTermRetentionDatabaseName}/longTermRetentionBackups/{backupName}",httpMethod:"GET",responses:{200:{bodyMapper:GZ},default:{}},queryParameters:[wr],urlParameters:[M,k,q,jr,Xc,Qd,Yd],headerParameters:[U],serializer:ha},_Ot={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/locations/{locationName}/longTermRetentionServers/{longTermRetentionServerName}/longTermRetentionDatabases/{longTermRetentionDatabaseName}/longTermRetentionBackups/{backupName}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[wr],urlParameters:[M,k,q,jr,Xc,Qd,Yd],serializer:ha},SOt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/locations/{locationName}/longTermRetentionServers/{longTermRetentionServerName}/longTermRetentionDatabases/{longTermRetentionDatabaseName}/longTermRetentionBackups",httpMethod:"GET",responses:{200:{bodyMapper:Vu},default:{}},queryParameters:[wr,ro,no],urlParameters:[M,k,q,jr,Xc,Qd],headerParameters:[U],serializer:ha},COt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/locations/{locationName}/longTermRetentionBackups",httpMethod:"GET",responses:{200:{bodyMapper:Vu},default:{}},queryParameters:[wr,ro,no],urlParameters:[M,k,q,jr],headerParameters:[U],serializer:ha},POt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/locations/{locationName}/longTermRetentionServers/{longTermRetentionServerName}/longTermRetentionBackups",httpMethod:"GET",responses:{200:{bodyMapper:Vu},default:{}},queryParameters:[wr,ro,no],urlParameters:[M,k,q,jr,Xc],headerParameters:[U],serializer:ha},wOt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Vu},default:{}},queryParameters:[wr,ro,no],urlParameters:[M,k,ft,jr,Xc,Qd],headerParameters:[U],serializer:ha},EOt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Vu},default:{}},queryParameters:[wr,ro,no],urlParameters:[M,k,ft,jr],headerParameters:[U],serializer:ha},TOt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Vu},default:{}},queryParameters:[wr,ro,no],urlParameters:[M,k,ft,jr,Xc],headerParameters:[U],serializer:ha},IOt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Vu},default:{}},queryParameters:[wr,ro,no],urlParameters:[M,k,q,ft,jr,Xc,Qd],headerParameters:[U],serializer:ha},ROt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Vu},default:{}},queryParameters:[wr,ro,no],urlParameters:[M,k,q,ft,jr],headerParameters:[U],serializer:ha},xOt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Vu},default:{}},queryParameters:[wr,ro,no],urlParameters:[M,k,q,ft,jr,Xc],headerParameters:[U],serializer:ha},h7=class{constructor(e){this.client=e}listByDatabase(e,t,n,i){let s=this.listByDatabasePagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByDatabasePagingPage(e,t,n,i)}}listByDatabasePagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByDatabase(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listByDatabaseNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listByDatabasePagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByDatabasePagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}listByInstance(e,t,n){let i=this.listByInstancePagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByInstancePagingPage(e,t,n)}}listByInstancePagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByInstance(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByInstanceNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByInstancePagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByInstancePagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}listByLocation(e,t){let n=this.listByLocationPagingAll(e,t);return{next(){return n.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByLocationPagingPage(e,t)}}listByLocationPagingPage(e,t){return h.__asyncGenerator(this,arguments,function*(){let i=yield h.__await(this._listByLocation(e,t));yield yield h.__await(i.value||[]);let s=i.nextLink;for(;s;)i=yield h.__await(this._listByLocationNext(e,s,t)),s=i.nextLink,yield yield h.__await(i.value||[])})}listByLocationPagingAll(e,t){return h.__asyncGenerator(this,arguments,function*(){var i,s;try{for(var o=h.__asyncValues(this.listByLocationPagingPage(e,t)),a;a=yield h.__await(o.next()),!a.done;){let c=a.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(c)))}}catch(c){i={error:c}}finally{try{a&&!a.done&&(s=o.return)&&(yield h.__await(s.call(o)))}finally{if(i)throw i.error}}})}listByResourceGroupDatabase(e,t,n,i,s){let o=this.listByResourceGroupDatabasePagingAll(e,t,n,i,s);return{next(){return o.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByResourceGroupDatabasePagingPage(e,t,n,i,s)}}listByResourceGroupDatabasePagingPage(e,t,n,i,s){return h.__asyncGenerator(this,arguments,function*(){let a=yield h.__await(this._listByResourceGroupDatabase(e,t,n,i,s));yield yield h.__await(a.value||[]);let c=a.nextLink;for(;c;)a=yield h.__await(this._listByResourceGroupDatabaseNext(e,t,n,i,c,s)),c=a.nextLink,yield yield h.__await(a.value||[])})}listByResourceGroupDatabasePagingAll(e,t,n,i,s){return h.__asyncGenerator(this,arguments,function*(){var a,c;try{for(var l=h.__asyncValues(this.listByResourceGroupDatabasePagingPage(e,t,n,i,s)),u;u=yield h.__await(l.next()),!u.done;){let d=u.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(d)))}}catch(d){a={error:d}}finally{try{u&&!u.done&&(c=l.return)&&(yield h.__await(c.call(l)))}finally{if(a)throw a.error}}})}listByResourceGroupInstance(e,t,n,i){let s=this.listByResourceGroupInstancePagingAll(e,t,n,i);return{next(){return s.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByResourceGroupInstancePagingPage(e,t,n,i)}}listByResourceGroupInstancePagingPage(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){let o=yield h.__await(this._listByResourceGroupInstance(e,t,n,i));yield yield h.__await(o.value||[]);let a=o.nextLink;for(;a;)o=yield h.__await(this._listByResourceGroupInstanceNext(e,t,n,a,i)),a=o.nextLink,yield yield h.__await(o.value||[])})}listByResourceGroupInstancePagingAll(e,t,n,i){return h.__asyncGenerator(this,arguments,function*(){var o,a;try{for(var c=h.__asyncValues(this.listByResourceGroupInstancePagingPage(e,t,n,i)),l;l=yield h.__await(c.next()),!l.done;){let u=l.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(u)))}}catch(u){o={error:u}}finally{try{l&&!l.done&&(a=c.return)&&(yield h.__await(a.call(c)))}finally{if(o)throw o.error}}})}listByResourceGroupLocation(e,t,n){let i=this.listByResourceGroupLocationPagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByResourceGroupLocationPagingPage(e,t,n)}}listByResourceGroupLocationPagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByResourceGroupLocation(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByResourceGroupLocationNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByResourceGroupLocationPagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByResourceGroupLocationPagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}get(e,t,n,i,s){return this.client.sendOperationRequest({locationName:e,managedInstanceName:t,databaseName:n,backupName:i,options:s},OOt)}beginDelete(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{locationName:e,managedInstanceName:t,databaseName:n,backupName:i,options:s},AOt);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginDeleteAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDelete(e,t,n,i,s)).pollUntilDone()})}_listByDatabase(e,t,n,i){return this.client.sendOperationRequest({locationName:e,managedInstanceName:t,databaseName:n,options:i},NOt)}_listByInstance(e,t,n){return this.client.sendOperationRequest({locationName:e,managedInstanceName:t,options:n},DOt)}_listByLocation(e,t){return this.client.sendOperationRequest({locationName:e,options:t},MOt)}getByResourceGroup(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,locationName:t,managedInstanceName:n,databaseName:i,backupName:s,options:o},kOt)}beginDeleteByResourceGroup(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){let a=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(u,d)}),c=(u,d)=>h.__awaiter(this,void 0,void 0,function*(){var p;let m,f=(p=u.options)===null||p===void 0?void 0:p.onResponse,y=(C,P)=>{m=C,f?.(C,P)},v=Object.assign(Object.assign({},u),{options:Object.assign(Object.assign({},u.options),{onResponse:y})});return{flatResponse:yield a(v,d),rawResponse:{statusCode:m.status,body:m.parsedBody,headers:m.headers.toJSON()}}}),l=new bt(c,{resourceGroupName:e,locationName:t,managedInstanceName:n,databaseName:i,backupName:s,options:o},LOt);return new St.LroEngine(l,{resumeFrom:o?.resumeFrom,intervalInMs:o?.updateIntervalInMs})})}beginDeleteByResourceGroupAndWait(e,t,n,i,s,o){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDeleteByResourceGroup(e,t,n,i,s,o)).pollUntilDone()})}_listByResourceGroupDatabase(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,locationName:t,managedInstanceName:n,databaseName:i,options:s},qOt)}_listByResourceGroupInstance(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,locationName:t,managedInstanceName:n,options:i},zOt)}_listByResourceGroupLocation(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,locationName:t,options:n},FOt)}_listByDatabaseNext(e,t,n,i,s){return this.client.sendOperationRequest({locationName:e,managedInstanceName:t,databaseName:n,nextLink:i,options:s},jOt)}_listByInstanceNext(e,t,n,i){return this.client.sendOperationRequest({locationName:e,managedInstanceName:t,nextLink:n,options:i},UOt)}_listByLocationNext(e,t,n){return this.client.sendOperationRequest({locationName:e,nextLink:t,options:n},BOt)}_listByResourceGroupDatabaseNext(e,t,n,i,s,o){return this.client.sendOperationRequest({resourceGroupName:e,locationName:t,managedInstanceName:n,databaseName:i,nextLink:s,options:o},GOt)}_listByResourceGroupInstanceNext(e,t,n,i,s){return this.client.sendOperationRequest({resourceGroupName:e,locationName:t,managedInstanceName:n,nextLink:i,options:s},$Ot)}_listByResourceGroupLocationNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,locationName:t,nextLink:n,options:i},VOt)}},Jc=Pt.createSerializer(Et,!1),OOt={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Sql/locations/{locationName}/longTermRetentionManagedInstances/{managedInstanceName}/longTermRetentionDatabases/{databaseName}/longTermRetentionManagedInstanceBackups/{backupName}",httpMethod:"GET",responses:{200:{bodyMapper:$Z},default:{}},queryParameters:[wr],urlParameters:[M,k,ve,jr,st,Yd],headerParameters:[U],serializer:Jc},AOt={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Sql/locations/{locationName}/longTermRetentionManagedInstances/{managedInstanceName}/longTermRetentionDatabases/{databaseName}/longTermRetentionManagedInstanceBackups/{backupName}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[wr],urlParameters:[M,k,ve,jr,st,Yd],serializer:Jc},NOt={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Sql/locations/{locationName}/longTermRetentionManagedInstances/{managedInstanceName}/longTermRetentionDatabases/{databaseName}/longTermRetentionManagedInstanceBackups",httpMethod:"GET",responses:{200:{bodyMapper:Hu},default:{}},queryParameters:[wr,ro,no],urlParameters:[M,k,ve,jr,st],headerParameters:[U],serializer:Jc},DOt={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Sql/locations/{locationName}/longTermRetentionManagedInstances/{managedInstanceName}/longTermRetentionManagedInstanceBackups",httpMethod:"GET",responses:{200:{bodyMapper:Hu},default:{}},queryParameters:[wr,ro,no],urlParameters:[M,k,jr,st],headerParameters:[U],serializer:Jc},MOt={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Sql/locations/{locationName}/longTermRetentionManagedInstanceBackups",httpMethod:"GET",responses:{200:{bodyMapper:Hu},default:{}},queryParameters:[wr,ro,no],urlParameters:[M,k,jr],headerParameters:[U],serializer:Jc},kOt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/locations/{locationName}/longTermRetentionManagedInstances/{managedInstanceName}/longTermRetentionDatabases/{databaseName}/longTermRetentionManagedInstanceBackups/{backupName}",httpMethod:"GET",responses:{200:{bodyMapper:$Z},default:{}},queryParameters:[wr],urlParameters:[M,k,q,ve,jr,st,Yd],headerParameters:[U],serializer:Jc},LOt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/locations/{locationName}/longTermRetentionManagedInstances/{managedInstanceName}/longTermRetentionDatabases/{databaseName}/longTermRetentionManagedInstanceBackups/{backupName}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[wr],urlParameters:[M,k,q,ve,jr,st,Yd],serializer:Jc},qOt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/locations/{locationName}/longTermRetentionManagedInstances/{managedInstanceName}/longTermRetentionDatabases/{databaseName}/longTermRetentionManagedInstanceBackups",httpMethod:"GET",responses:{200:{bodyMapper:Hu},default:{}},queryParameters:[wr,ro,no],urlParameters:[M,k,q,ve,jr,st],headerParameters:[U],serializer:Jc},zOt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/locations/{locationName}/longTermRetentionManagedInstances/{managedInstanceName}/longTermRetentionManagedInstanceBackups",httpMethod:"GET",responses:{200:{bodyMapper:Hu},default:{}},queryParameters:[wr,ro,no],urlParameters:[M,k,q,jr,st],headerParameters:[U],serializer:Jc},FOt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/locations/{locationName}/longTermRetentionManagedInstanceBackups",httpMethod:"GET",responses:{200:{bodyMapper:Hu},default:{}},queryParameters:[wr,ro,no],urlParameters:[M,k,q,jr],headerParameters:[U],serializer:Jc},jOt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Hu},default:{}},queryParameters:[wr,ro,no],urlParameters:[M,k,ve,ft,jr,st],headerParameters:[U],serializer:Jc},UOt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Hu},default:{}},queryParameters:[wr,ro,no],urlParameters:[M,k,ft,jr,st],headerParameters:[U],serializer:Jc},BOt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Hu},default:{}},queryParameters:[wr,ro,no],urlParameters:[M,k,ft,jr],headerParameters:[U],serializer:Jc},GOt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Hu},default:{}},queryParameters:[wr,ro,no],urlParameters:[M,k,q,ve,ft,jr,st],headerParameters:[U],serializer:Jc},$Ot={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Hu},default:{}},queryParameters:[wr,ro,no],urlParameters:[M,k,q,ft,jr,st],headerParameters:[U],serializer:Jc},VOt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Hu},default:{}},queryParameters:[wr,ro,no],urlParameters:[M,k,q,ft,jr],headerParameters:[U],serializer:Jc},f7=class{constructor(e){this.client=e}listByInstancePool(e,t,n){let i=this.listByInstancePoolPagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByInstancePoolPagingPage(e,t,n)}}listByInstancePoolPagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByInstancePool(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByInstancePoolNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByInstancePoolPagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByInstancePoolPagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}list(e){let t=this.listPagingAll(e);return{next(){return t.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listPagingPage(e)}}listPagingPage(e){return h.__asyncGenerator(this,arguments,function*(){let n=yield h.__await(this._list(e));yield yield h.__await(n.value||[]);let i=n.nextLink;for(;i;)n=yield h.__await(this._listNext(i,e)),i=n.nextLink,yield yield h.__await(n.value||[])})}listPagingAll(e){return h.__asyncGenerator(this,arguments,function*(){var n,i;try{for(var s=h.__asyncValues(this.listPagingPage(e)),o;o=yield h.__await(s.next()),!o.done;){let a=o.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(a)))}}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=s.return)&&(yield h.__await(i.call(s)))}finally{if(n)throw n.error}}})}listByResourceGroup(e,t){let n=this.listByResourceGroupPagingAll(e,t);return{next(){return n.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByResourceGroupPagingPage(e,t)}}listByResourceGroupPagingPage(e,t){return h.__asyncGenerator(this,arguments,function*(){let i=yield h.__await(this._listByResourceGroup(e,t));yield yield h.__await(i.value||[]);let s=i.nextLink;for(;s;)i=yield h.__await(this._listByResourceGroupNext(e,s,t)),s=i.nextLink,yield yield h.__await(i.value||[])})}listByResourceGroupPagingAll(e,t){return h.__asyncGenerator(this,arguments,function*(){var i,s;try{for(var o=h.__asyncValues(this.listByResourceGroupPagingPage(e,t)),a;a=yield h.__await(o.next()),!a.done;){let c=a.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(c)))}}catch(c){i={error:c}}finally{try{a&&!a.done&&(s=o.return)&&(yield h.__await(s.call(o)))}finally{if(i)throw i.error}}})}listByManagedInstance(e,t,n){let i=this.listByManagedInstancePagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByManagedInstancePagingPage(e,t,n)}}listByManagedInstancePagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByManagedInstance(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByManagedInstanceNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByManagedInstancePagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByManagedInstancePagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}_listByInstancePool(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,instancePoolName:t,options:n},HOt)}_list(e){return this.client.sendOperationRequest({options:e},WOt)}_listByResourceGroup(e,t){return this.client.sendOperationRequest({resourceGroupName:e,options:t},KOt)}get(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,options:n},QOt)}beginCreateOrUpdate(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,managedInstanceName:t,parameters:n,options:i},YOt);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i)).pollUntilDone()})}beginDelete(e,t,n){return h.__awaiter(this,void 0,void 0,function*(){let i=(a,c)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(a,c)}),s=(a,c)=>h.__awaiter(this,void 0,void 0,function*(){var l;let u,d=(l=a.options)===null||l===void 0?void 0:l.onResponse,p=(y,v)=>{u=y,d?.(y,v)},m=Object.assign(Object.assign({},a),{options:Object.assign(Object.assign({},a.options),{onResponse:p})});return{flatResponse:yield i(m,c),rawResponse:{statusCode:u.status,body:u.parsedBody,headers:u.headers.toJSON()}}}),o=new bt(s,{resourceGroupName:e,managedInstanceName:t,options:n},XOt);return new St.LroEngine(o,{resumeFrom:n?.resumeFrom,intervalInMs:n?.updateIntervalInMs})})}beginDeleteAndWait(e,t,n){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginDelete(e,t,n)).pollUntilDone()})}beginUpdate(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){let s=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(c,l)}),o=(c,l)=>h.__awaiter(this,void 0,void 0,function*(){var u;let d,p=(u=c.options)===null||u===void 0?void 0:u.onResponse,m=(v,_)=>{d=v,p?.(v,_)},f=Object.assign(Object.assign({},c),{options:Object.assign(Object.assign({},c.options),{onResponse:m})});return{flatResponse:yield s(f,l),rawResponse:{statusCode:d.status,body:d.parsedBody,headers:d.headers.toJSON()}}}),a=new bt(o,{resourceGroupName:e,managedInstanceName:t,parameters:n,options:i},JOt);return new St.LroEngine(a,{resumeFrom:i?.resumeFrom,intervalInMs:i?.updateIntervalInMs})})}beginUpdateAndWait(e,t,n,i){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginUpdate(e,t,n,i)).pollUntilDone()})}_listByManagedInstance(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,options:n},ZOt)}beginFailover(e,t,n){return h.__awaiter(this,void 0,void 0,function*(){let i=(a,c)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(a,c)}),s=(a,c)=>h.__awaiter(this,void 0,void 0,function*(){var l;let u,d=(l=a.options)===null||l===void 0?void 0:l.onResponse,p=(y,v)=>{u=y,d?.(y,v)},m=Object.assign(Object.assign({},a),{options:Object.assign(Object.assign({},a.options),{onResponse:p})});return{flatResponse:yield i(m,c),rawResponse:{statusCode:u.status,body:u.parsedBody,headers:u.headers.toJSON()}}}),o=new bt(s,{resourceGroupName:e,managedInstanceName:t,options:n},eAt);return new St.LroEngine(o,{resumeFrom:n?.resumeFrom,intervalInMs:n?.updateIntervalInMs})})}beginFailoverAndWait(e,t,n){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginFailover(e,t,n)).pollUntilDone()})}_listByInstancePoolNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,instancePoolName:t,nextLink:n,options:i},tAt)}_listNext(e,t){return this.client.sendOperationRequest({nextLink:e,options:t},rAt)}_listByResourceGroupNext(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,nextLink:t,options:n},nAt)}_listByManagedInstanceNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,nextLink:n,options:i},iAt)}},Wu=Pt.createSerializer(Et,!1),HOt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/instancePools/{instancePoolName}/managedInstances",httpMethod:"GET",responses:{200:{bodyMapper:LS},default:{}},queryParameters:[wr,mu],urlParameters:[M,k,q,yv],headerParameters:[U],serializer:Wu},WOt={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Sql/managedInstances",httpMethod:"GET",responses:{200:{bodyMapper:LS},default:{}},queryParameters:[wr,mu],urlParameters:[M,k],headerParameters:[U],serializer:Wu},KOt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances",httpMethod:"GET",responses:{200:{bodyMapper:LS},default:{}},queryParameters:[wr,mu],urlParameters:[M,k,q],headerParameters:[U],serializer:Wu},QOt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}",httpMethod:"GET",responses:{200:{bodyMapper:dm},default:{}},queryParameters:[wr,mu],urlParameters:[M,k,q,st],headerParameters:[U],serializer:Wu},YOt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}",httpMethod:"PUT",responses:{200:{bodyMapper:dm},201:{bodyMapper:dm},202:{bodyMapper:dm},204:{bodyMapper:dm},default:{}},requestBody:ASt,queryParameters:[wr],urlParameters:[M,k,q,st],headerParameters:[U,Vt],mediaType:"json",serializer:Wu},XOt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}",httpMethod:"DELETE",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[wr],urlParameters:[M,k,q,st],serializer:Wu},JOt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}",httpMethod:"PATCH",responses:{200:{bodyMapper:dm},201:{bodyMapper:dm},202:{bodyMapper:dm},204:{bodyMapper:dm},default:{}},requestBody:NSt,queryParameters:[wr],urlParameters:[M,k,q,st],headerParameters:[U,Vt],mediaType:"json",serializer:Wu},ZOt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/topqueries",httpMethod:"GET",responses:{200:{bodyMapper:MZ},default:{}},queryParameters:[wr,zU,FU,jU,uxe,dxe,pxe,mxe],urlParameters:[M,k,q,st],headerParameters:[U],serializer:Wu},eAt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/failover",httpMethod:"POST",responses:{200:{},201:{},202:{},204:{},default:{}},queryParameters:[wr,LRe],urlParameters:[M,k,q,st],serializer:Wu},tAt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:LS},default:{}},queryParameters:[wr,mu],urlParameters:[M,k,q,ft,yv],headerParameters:[U],serializer:Wu},rAt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:LS},default:{}},queryParameters:[wr,mu],urlParameters:[M,k,ft],headerParameters:[U],serializer:Wu},nAt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:LS},default:{}},queryParameters:[wr,mu],urlParameters:[M,k,q,ft],headerParameters:[U],serializer:Wu},iAt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:MZ},default:{}},queryParameters:[wr,zU,FU,jU,uxe,dxe,pxe,mxe],urlParameters:[M,k,q,ft,st],headerParameters:[U],serializer:Wu},g7=class{constructor(e){this.client=e}listByServer(e,t,n){let i=this.listByServerPagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByServerPagingPage(e,t,n)}}listByServerPagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByServer(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByServerNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByServerPagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByServerPagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}_listByServer(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,options:n},sAt)}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,restorableDroppedDatabaseId:n,options:i},oAt)}_listByServerNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,nextLink:n,options:i},aAt)}},Pee=Pt.createSerializer(Et,!1),sAt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/restorableDroppedDatabases",httpMethod:"GET",responses:{200:{bodyMapper:kZ},default:{}},queryParameters:[wr],urlParameters:[M,k,q,X],headerParameters:[U],serializer:Pee},oAt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/restorableDroppedDatabases/{restorableDroppedDatabaseId}",httpMethod:"GET",responses:{200:{bodyMapper:NRe},default:{}},queryParameters:[wr],urlParameters:[M,k,q,X,zS],headerParameters:[U],serializer:Pee},aAt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:kZ},default:{}},queryParameters:[wr],urlParameters:[M,k,q,X,ft],headerParameters:[U],serializer:Pee},y7=class{constructor(e){this.client=e}listByInstance(e,t,n){let i=this.listByInstancePagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByInstancePagingPage(e,t,n)}}listByInstancePagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByInstance(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByInstanceNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByInstancePagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByInstancePagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}_listByInstance(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,options:n},cAt)}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,restorableDroppedDatabaseId:n,options:i},lAt)}_listByInstanceNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,managedInstanceName:t,nextLink:n,options:i},uAt)}},wee=Pt.createSerializer(Et,!1),cAt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/restorableDroppedDatabases",httpMethod:"GET",responses:{200:{bodyMapper:LZ},default:{}},queryParameters:[wr],urlParameters:[M,k,q,st],headerParameters:[U],serializer:wee},lAt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/managedInstances/{managedInstanceName}/restorableDroppedDatabases/{restorableDroppedDatabaseId}",httpMethod:"GET",responses:{200:{bodyMapper:DRe},default:{}},queryParameters:[wr],urlParameters:[M,k,q,st,zS],headerParameters:[U],serializer:wee},uAt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:LZ},default:{}},queryParameters:[wr],urlParameters:[M,k,q,ft,st],headerParameters:[U],serializer:wee},v7=class{constructor(e){this.client=e}listByServer(e,t,n){let i=this.listByServerPagingAll(e,t,n);return{next(){return i.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listByServerPagingPage(e,t,n)}}listByServerPagingPage(e,t,n){return h.__asyncGenerator(this,arguments,function*(){let s=yield h.__await(this._listByServer(e,t,n));yield yield h.__await(s.value||[]);let o=s.nextLink;for(;o;)s=yield h.__await(this._listByServerNext(e,t,o,n)),o=s.nextLink,yield yield h.__await(s.value||[])})}listByServerPagingAll(e,t,n){return h.__asyncGenerator(this,arguments,function*(){var s,o;try{for(var a=h.__asyncValues(this.listByServerPagingPage(e,t,n)),c;c=yield h.__await(a.next()),!c.done;){let l=c.value;yield h.__await(yield*h.__asyncDelegator(h.__asyncValues(l)))}}catch(l){s={error:l}}finally{try{c&&!c.done&&(o=a.return)&&(yield h.__await(o.call(a)))}finally{if(s)throw s.error}}})}get(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,connectionPolicyName:n,options:i},dAt)}beginCreateOrUpdate(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){let o=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(l,u)}),a=(l,u)=>h.__awaiter(this,void 0,void 0,function*(){var d;let p,m=(d=l.options)===null||d===void 0?void 0:d.onResponse,f=(_,C)=>{p=_,m?.(_,C)},y=Object.assign(Object.assign({},l),{options:Object.assign(Object.assign({},l.options),{onResponse:f})});return{flatResponse:yield o(y,u),rawResponse:{statusCode:p.status,body:p.parsedBody,headers:p.headers.toJSON()}}}),c=new bt(a,{resourceGroupName:e,serverName:t,connectionPolicyName:n,parameters:i,options:s},pAt);return new St.LroEngine(c,{resumeFrom:s?.resumeFrom,intervalInMs:s?.updateIntervalInMs})})}beginCreateOrUpdateAndWait(e,t,n,i,s){return h.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreateOrUpdate(e,t,n,i,s)).pollUntilDone()})}_listByServer(e,t,n){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,options:n},mAt)}_listByServerNext(e,t,n,i){return this.client.sendOperationRequest({resourceGroupName:e,serverName:t,nextLink:n,options:i},hAt)}},uB=Pt.createSerializer(Et,!1),dAt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/connectionPolicies/{connectionPolicyName}",httpMethod:"GET",responses:{200:{bodyMapper:MS},default:{}},queryParameters:[wr],urlParameters:[M,k,q,X,hxe],headerParameters:[U],serializer:uB},pAt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/connectionPolicies/{connectionPolicyName}",httpMethod:"PUT",responses:{200:{bodyMapper:MS},201:{bodyMapper:MS},202:{bodyMapper:MS},204:{bodyMapper:MS},default:{}},requestBody:DSt,queryParameters:[wr],urlParameters:[M,k,q,X,hxe],headerParameters:[U,Vt],mediaType:"json",serializer:uB},mAt={path:"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Sql/servers/{serverName}/connectionPolicies",httpMethod:"GET",responses:{200:{bodyMapper:qZ},default:{}},queryParameters:[wr],urlParameters:[M,k,q,X],headerParameters:[U],serializer:uB},hAt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:qZ},default:{}},queryParameters:[wr],urlParameters:[M,k,q,X,ft],headerParameters:[U],serializer:uB},b7=class extends Pt.ServiceClient{constructor(e,t,n){if(e===void 0)throw new Error("'credentials' cannot be null");if(t===void 0)throw new Error("'subscriptionId' cannot be null");n||(n={});let i={requestContentType:"application/json; charset=utf-8",credential:e},s="azsdk-js-arm-sql/9.0.0",o=n.userAgentOptions&&n.userAgentOptions.userAgentPrefix?`${n.userAgentOptions.userAgentPrefix} ${s}`:`${s}`;n.credentialScopes||(n.credentialScopes=["https://management.azure.com/.default"]);let a=Object.assign(Object.assign(Object.assign({},i),n),{userAgentOptions:{userAgentPrefix:o},baseUri:n.endpoint||"https://management.azure.com"});super(a),this.subscriptionId=t,this.$host=n.$host||"https://management.azure.com",this.recoverableDatabases=new cX(this),this.dataMaskingPolicies=new lX(this),this.dataMaskingRules=new uX(this),this.geoBackupPolicies=new dX(this),this.databases=new pX(this),this.elasticPools=new mX(this),this.replicationLinks=new hX(this),this.serverCommunicationLinks=new fX(this),this.serviceObjectives=new gX(this),this.elasticPoolActivities=new yX(this),this.elasticPoolDatabaseActivities=new vX(this),this.serverUsages=new bX(this),this.extendedDatabaseBlobAuditingPolicies=new _X(this),this.extendedServerBlobAuditingPolicies=new SX(this),this.serverBlobAuditingPolicies=new CX(this),this.databaseBlobAuditingPolicies=new PX(this),this.databaseAdvisors=new wX(this),this.databaseAutomaticTuningOperations=new EX(this),this.databaseColumns=new TX(this),this.databaseRecommendedActions=new IX(this),this.databaseSchemas=new RX(this),this.databaseSecurityAlertPolicies=new xX(this),this.databaseTables=new OX(this),this.databaseVulnerabilityAssessmentRuleBaselines=new AX(this),this.databaseVulnerabilityAssessments=new NX(this),this.databaseVulnerabilityAssessmentScans=new DX(this),this.dataWarehouseUserActivitiesOperations=new MX(this),this.deletedServers=new kX(this),this.elasticPoolOperations=new LX(this),this.encryptionProtectors=new qX(this),this.failoverGroups=new zX(this),this.firewallRules=new FX(this),this.instanceFailoverGroups=new jX(this),this.instancePools=new UX(this),this.jobAgents=new BX(this),this.jobCredentials=new GX(this),this.jobExecutions=new $X(this),this.jobs=new VX(this),this.jobStepExecutions=new HX(this),this.jobSteps=new WX(this),this.jobTargetExecutions=new KX(this),this.jobTargetGroups=new QX(this),this.jobVersions=new YX(this),this.capabilities=new XX(this),this.longTermRetentionPolicies=new JX(this),this.maintenanceWindowOptionsOperations=new ZX(this),this.maintenanceWindowsOperations=new eJ(this),this.managedBackupShortTermRetentionPolicies=new tJ(this),this.managedDatabaseColumns=new rJ(this),this.managedDatabaseQueries=new nJ(this),this.managedDatabaseRestoreDetails=new iJ(this),this.managedDatabases=new sJ(this),this.managedDatabaseSchemas=new oJ(this),this.managedDatabaseSecurityAlertPolicies=new aJ(this),this.managedDatabaseSecurityEvents=new cJ(this),this.managedDatabaseSensitivityLabels=new lJ(this),this.managedDatabaseRecommendedSensitivityLabels=new uJ(this),this.managedDatabaseTables=new dJ(this),this.managedDatabaseTransparentDataEncryption=new pJ(this),this.managedDatabaseVulnerabilityAssessmentRuleBaselines=new mJ(this),this.managedDatabaseVulnerabilityAssessments=new hJ(this),this.managedDatabaseVulnerabilityAssessmentScans=new fJ(this),this.managedInstanceAdministrators=new gJ(this),this.managedInstanceAzureADOnlyAuthentications=new yJ(this),this.managedInstanceEncryptionProtectors=new vJ(this),this.managedInstanceKeys=new bJ(this),this.managedInstanceLongTermRetentionPolicies=new _J(this),this.managedInstanceOperations=new SJ(this),this.managedInstancePrivateEndpointConnections=new CJ(this),this.managedInstancePrivateLinkResources=new PJ(this),this.managedInstanceTdeCertificates=new wJ(this),this.managedInstanceVulnerabilityAssessments=new EJ(this),this.managedRestorableDroppedDatabaseBackupShortTermRetentionPolicies=new TJ(this),this.managedServerSecurityAlertPolicies=new IJ(this),this.operations=new RJ(this),this.operationsHealthOperations=new xJ(this),this.privateEndpointConnections=new OJ(this),this.privateLinkResources=new AJ(this),this.recoverableManagedDatabases=new NJ(this),this.restorePoints=new DJ(this),this.sensitivityLabels=new MJ(this),this.recommendedSensitivityLabels=new kJ(this),this.serverAdvisors=new LJ(this),this.serverAutomaticTuningOperations=new qJ(this),this.serverAzureADAdministrators=new zJ(this),this.serverAzureADOnlyAuthentications=new FJ(this),this.serverDevOpsAuditSettings=new jJ(this),this.serverDnsAliases=new UJ(this),this.serverKeys=new BJ(this),this.serverOperations=new GJ(this),this.serverSecurityAlertPolicies=new $J(this),this.serverTrustGroups=new VJ(this),this.serverVulnerabilityAssessments=new HJ(this),this.sqlAgent=new WJ(this),this.subscriptionUsages=new KJ(this),this.syncAgents=new QJ(this),this.syncGroups=new YJ(this),this.syncMembers=new XJ(this),this.tdeCertificates=new JJ(this),this.timeZones=new ZJ(this),this.virtualClusters=new e7(this),this.virtualNetworkRules=new t7(this),this.workloadClassifiers=new r7(this),this.workloadGroups=new n7(this),this.transparentDataEncryptions=new i7(this),this.backupShortTermRetentionPolicies=new s7(this),this.databaseExtensionsOperations=new o7(this),this.databaseOperations=new a7(this),this.databaseUsages=new c7(this),this.ledgerDigestUploadsOperations=new l7(this),this.outboundFirewallRules=new u7(this),this.servers=new d7(this),this.usages=new p7(this),this.longTermRetentionBackups=new m7(this),this.longTermRetentionManagedInstanceBackups=new h7(this),this.managedInstances=new f7(this),this.restorableDroppedDatabases=new g7(this),this.restorableDroppedManagedDatabases=new y7(this),this.serverConnectionPolicies=new v7(this)}};Te.SqlManagementClient=b7});var Axe={};Ea(Axe,{__assign:()=>Tee,__asyncDelegator:()=>IAt,__asyncGenerator:()=>TAt,__asyncValues:()=>RAt,__await:()=>sD,__awaiter:()=>_At,__classPrivateFieldGet:()=>DAt,__classPrivateFieldSet:()=>MAt,__createBinding:()=>Ree,__decorate:()=>yAt,__exportStar:()=>CAt,__extends:()=>fAt,__generator:()=>SAt,__importDefault:()=>NAt,__importStar:()=>AAt,__makeTemplateObject:()=>xAt,__metadata:()=>bAt,__param:()=>vAt,__read:()=>Oxe,__rest:()=>gAt,__spread:()=>PAt,__spreadArray:()=>EAt,__spreadArrays:()=>wAt,__values:()=>Iee});function fAt(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Eee(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function gAt(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function yAt(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}function vAt(r,e){return function(t,n){e(t,n,r)}}function bAt(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function _At(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})}function SAt(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){t.label=l[1];break}if(l[0]===6&&t.label<s[1]){t.label=s[1],s=l;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(l);break}s[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(u){l=[6,u],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function CAt(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Ree(e,r,t)}function Iee(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Oxe(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s}function PAt(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(Oxe(arguments[e]));return r}function wAt(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function EAt(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||e)}function sD(r){return this instanceof sD?(this.v=r,this):new sD(r)}function TAt(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(p){n[p]&&(i[p]=function(m){return new Promise(function(f,y){s.push([p,m,f,y])>1||a(p,m)})})}function a(p,m){try{c(n[p](m))}catch(f){d(s[0][3],f)}}function c(p){p.value instanceof sD?Promise.resolve(p.value.v).then(l,u):d(s[0][2],p)}function l(p){a("next",p)}function u(p){a("throw",p)}function d(p,m){p(m),s.shift(),s.length&&a(s[0][0],s[0][1])}}function IAt(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=r[i]?function(o){return(t=!t)?{value:sD(r[i](o)),done:i==="return"}:s?s(o):o}:s}}function RAt(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof Iee=="function"?Iee(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=r[s]&&function(o){return new Promise(function(a,c){o=r[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function xAt(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function AAt(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Ree(e,r,t);return OAt(e,r),e}function NAt(r){return r&&r.__esModule?r:{default:r}}function DAt(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)}function MAt(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t}var Eee,Tee,Ree,OAt,Nxe=si(()=>{Eee=function(r,e){return Eee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},Eee(r,e)};Tee=function(){return Tee=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Tee.apply(this,arguments)};Ree=Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]};OAt=Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}});var Kxe=O(fm=>{"use strict";Object.defineProperty(fm,"__esModule",{value:!0});var Tv=hU(),Mr=(Nxe(),da(Axe)),Dxe=_U();(function(r){r.Production="Production",r.DevTest="DevTest"})(fm.KnownWorkload||(fm.KnownWorkload={}));(function(r){r.Accepted="Accepted",r.Succeeded="Succeeded",r.Failed="Failed"})(fm.KnownProvisioningState||(fm.KnownProvisioningState={}));(function(r){r.Pending="Pending",r.Completed="Completed",r.Expired="Expired"})(fm.KnownAcceptOwnership||(fm.KnownAcceptOwnership={}));(function(r){r.User="User",r.Application="Application",r.ManagedIdentity="ManagedIdentity",r.Key="Key"})(fm.KnownCreatedByType||(fm.KnownCreatedByType={}));var Mxe={type:{name:"Composite",className:"LocationListResult",modelProperties:{value:{serializedName:"value",type:{name:"Sequence",element:{type:{name:"Composite",className:"Location"}}}}}}},kAt={type:{name:"Composite",className:"Location",modelProperties:{id:{serializedName:"id",readOnly:!0,type:{name:"String"}},subscriptionId:{serializedName:"subscriptionId",readOnly:!0,type:{name:"String"}},name:{serializedName:"name",readOnly:!0,type:{name:"String"}},displayName:{serializedName:"displayName",readOnly:!0,type:{name:"String"}},latitude:{serializedName:"latitude",readOnly:!0,type:{name:"String"}},longitude:{serializedName:"longitude",readOnly:!0,type:{name:"String"}}}}},kxe={type:{name:"Composite",className:"Subscription",modelProperties:{id:{serializedName:"id",readOnly:!0,type:{name:"String"}},subscriptionId:{serializedName:"subscriptionId",readOnly:!0,type:{name:"String"}},displayName:{serializedName:"displayName",readOnly:!0,type:{name:"String"}},state:{serializedName:"state",readOnly:!0,type:{name:"Enum",allowedValues:["Enabled","Warned","PastDue","Disabled","Deleted"]}},subscriptionPolicies:{serializedName:"subscriptionPolicies",type:{name:"Composite",className:"SubscriptionPolicies"}},authorizationSource:{serializedName:"authorizationSource",type:{name:"String"}}}}},LAt={type:{name:"Composite",className:"SubscriptionPolicies",modelProperties:{locationPlacementId:{serializedName:"locationPlacementId",readOnly:!0,type:{name:"String"}},quotaId:{serializedName:"quotaId",readOnly:!0,type:{name:"String"}},spendingLimit:{serializedName:"spendingLimit",readOnly:!0,type:{name:"Enum",allowedValues:["On","Off","CurrentPeriodOff"]}}}}},qee={type:{name:"Composite",className:"SubscriptionListResult",modelProperties:{value:{serializedName:"value",type:{name:"Sequence",element:{type:{name:"Composite",className:"Subscription"}}}},nextLink:{serializedName:"nextLink",required:!0,type:{name:"String"}}}}},zee={type:{name:"Composite",className:"TenantListResult",modelProperties:{value:{serializedName:"value",type:{name:"Sequence",element:{type:{name:"Composite",className:"TenantIdDescription"}}}},nextLink:{serializedName:"nextLink",required:!0,type:{name:"String"}}}}},qAt={type:{name:"Composite",className:"TenantIdDescription",modelProperties:{id:{serializedName:"id",readOnly:!0,type:{name:"String"}},tenantId:{serializedName:"tenantId",readOnly:!0,type:{name:"String"}}}}},Lxe={type:{name:"Composite",className:"CanceledSubscriptionId",modelProperties:{subscriptionId:{serializedName:"subscriptionId",readOnly:!0,type:{name:"String"}}}}},Tc={type:{name:"Composite",className:"ErrorResponseBody",modelProperties:{error:{serializedName:"error",type:{name:"Composite",className:"ErrorResponse"}},code:{serializedName:"code",type:{name:"String"}},message:{serializedName:"message",type:{name:"String"}}}}},zAt={type:{name:"Composite",className:"ErrorResponse",modelProperties:{code:{serializedName:"code",type:{name:"String"}},message:{serializedName:"message",type:{name:"String"}}}}},qxe={type:{name:"Composite",className:"SubscriptionName",modelProperties:{subscriptionName:{serializedName:"subscriptionName",type:{name:"String"}}}}},zxe={type:{name:"Composite",className:"RenamedSubscriptionId",modelProperties:{subscriptionId:{serializedName:"subscriptionId",readOnly:!0,type:{name:"String"}}}}},Fxe={type:{name:"Composite",className:"EnabledSubscriptionId",modelProperties:{subscriptionId:{serializedName:"subscriptionId",readOnly:!0,type:{name:"String"}}}}},Fee={type:{name:"Composite",className:"OperationListResult",modelProperties:{value:{serializedName:"value",type:{name:"Sequence",element:{type:{name:"Composite",className:"Operation"}}}},nextLink:{serializedName:"nextLink",type:{name:"String"}}}}},FAt={type:{name:"Composite",className:"Operation",modelProperties:{name:{serializedName:"name",type:{name:"String"}},isDataAction:{serializedName:"isDataAction",type:{name:"Boolean"}},display:{serializedName:"display",type:{name:"Composite",className:"OperationDisplay"}}}}},jAt={type:{name:"Composite",className:"OperationDisplay",modelProperties:{provider:{serializedName:"provider",type:{name:"String"}},resource:{serializedName:"resource",type:{name:"String"}},operation:{serializedName:"operation",type:{name:"String"}},description:{serializedName:"description",type:{name:"String"}}}}},jxe={type:{name:"Composite",className:"PutAliasRequest",modelProperties:{properties:{serializedName:"properties",type:{name:"Composite",className:"PutAliasRequestProperties"}}}}},UAt={type:{name:"Composite",className:"PutAliasRequestProperties",modelProperties:{displayName:{serializedName:"displayName",type:{name:"String"}},workload:{serializedName:"workload",type:{name:"String"}},billingScope:{serializedName:"billingScope",type:{name:"String"}},subscriptionId:{serializedName:"subscriptionId",type:{name:"String"}},resellerId:{serializedName:"resellerId",type:{name:"String"}},additionalProperties:{serializedName:"additionalProperties",type:{name:"Composite",className:"PutAliasRequestAdditionalProperties"}}}}},BAt={type:{name:"Composite",className:"PutAliasRequestAdditionalProperties",modelProperties:{managementGroupId:{serializedName:"managementGroupId",type:{name:"String"}},subscriptionTenantId:{serializedName:"subscriptionTenantId",type:{name:"String"}},subscriptionOwnerId:{serializedName:"subscriptionOwnerId",type:{name:"String"}},tags:{serializedName:"tags",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},$E={type:{name:"Composite",className:"SubscriptionAliasResponse",modelProperties:{id:{serializedName:"id",readOnly:!0,type:{name:"String"}},name:{serializedName:"name",readOnly:!0,type:{name:"String"}},type:{serializedName:"type",readOnly:!0,type:{name:"String"}},properties:{serializedName:"properties",type:{name:"Composite",className:"SubscriptionAliasResponseProperties"}},systemData:{serializedName:"systemData",type:{name:"Composite",className:"SystemData"}}}}},GAt={type:{name:"Composite",className:"SubscriptionAliasResponseProperties",modelProperties:{subscriptionId:{serializedName:"subscriptionId",readOnly:!0,type:{name:"String"}},displayName:{serializedName:"displayName",type:{name:"String"}},provisioningState:{serializedName:"provisioningState",type:{name:"String"}},acceptOwnershipUrl:{serializedName:"acceptOwnershipUrl",readOnly:!0,type:{name:"String"}},acceptOwnershipState:{serializedName:"acceptOwnershipState",readOnly:!0,type:{name:"String"}},billingScope:{serializedName:"billingScope",type:{name:"String"}},workload:{serializedName:"workload",type:{name:"String"}},resellerId:{serializedName:"resellerId",type:{name:"String"}},subscriptionOwnerId:{serializedName:"subscriptionOwnerId",type:{name:"String"}},managementGroupId:{serializedName:"managementGroupId",type:{name:"String"}},createdTime:{serializedName:"createdTime",type:{name:"String"}},tags:{serializedName:"tags",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},$At={type:{name:"Composite",className:"SystemData",modelProperties:{createdBy:{serializedName:"createdBy",type:{name:"String"}},createdByType:{serializedName:"createdByType",type:{name:"String"}},createdAt:{serializedName:"createdAt",type:{name:"DateTime"}},lastModifiedBy:{serializedName:"lastModifiedBy",type:{name:"String"}},lastModifiedByType:{serializedName:"lastModifiedByType",type:{name:"String"}},lastModifiedAt:{serializedName:"lastModifiedAt",type:{name:"DateTime"}}}}},Uxe={type:{name:"Composite",className:"SubscriptionAliasListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"SubscriptionAliasResponse"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},Bxe={type:{name:"Composite",className:"AcceptOwnershipRequest",modelProperties:{properties:{serializedName:"properties",type:{name:"Composite",className:"AcceptOwnershipRequestProperties"}}}}},VAt={type:{name:"Composite",className:"AcceptOwnershipRequestProperties",modelProperties:{displayName:{serializedName:"displayName",required:!0,type:{name:"String"}},managementGroupId:{serializedName:"managementGroupId",type:{name:"String"}},tags:{serializedName:"tags",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},Gxe={type:{name:"Composite",className:"AcceptOwnershipStatusResponse",modelProperties:{subscriptionId:{serializedName:"subscriptionId",readOnly:!0,type:{name:"String"}},acceptOwnershipState:{serializedName:"acceptOwnershipState",readOnly:!0,type:{name:"String"}},billingOwner:{serializedName:"billingOwner",readOnly:!0,type:{name:"String"}},subscriptionTenantId:{serializedName:"subscriptionTenantId",type:{name:"String"}},displayName:{serializedName:"displayName",type:{name:"String"}},tags:{serializedName:"tags",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},$xe={type:{name:"Composite",className:"PutTenantPolicyRequestProperties",modelProperties:{blockSubscriptionsLeavingTenant:{serializedName:"blockSubscriptionsLeavingTenant",type:{name:"Boolean"}},blockSubscriptionsIntoTenant:{serializedName:"blockSubscriptionsIntoTenant",type:{name:"Boolean"}},exemptedPrincipals:{serializedName:"exemptedPrincipals",type:{name:"Sequence",element:{type:{name:"Uuid"}}}}}}},jee={type:{name:"Composite",className:"GetTenantPolicyResponse",modelProperties:{id:{serializedName:"id",readOnly:!0,type:{name:"String"}},name:{serializedName:"name",readOnly:!0,type:{name:"String"}},type:{serializedName:"type",readOnly:!0,type:{name:"String"}},properties:{serializedName:"properties",type:{name:"Composite",className:"TenantPolicy"}},systemData:{serializedName:"systemData",type:{name:"Composite",className:"SystemData"}}}}},HAt={type:{name:"Composite",className:"TenantPolicy",modelProperties:{policyId:{serializedName:"policyId",readOnly:!0,type:{name:"String"}},blockSubscriptionsLeavingTenant:{serializedName:"blockSubscriptionsLeavingTenant",type:{name:"Boolean"}},blockSubscriptionsIntoTenant:{serializedName:"blockSubscriptionsIntoTenant",type:{name:"Boolean"}},exemptedPrincipals:{serializedName:"exemptedPrincipals",type:{name:"Sequence",element:{type:{name:"Uuid"}}}}}}},Uee={type:{name:"Composite",className:"GetTenantPolicyListResponse",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"GetTenantPolicyResponse"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},Vxe={type:{name:"Composite",className:"BillingAccountPoliciesResponse",modelProperties:{id:{serializedName:"id",readOnly:!0,type:{name:"String"}},name:{serializedName:"name",readOnly:!0,type:{name:"String"}},type:{serializedName:"type",readOnly:!0,type:{name:"String"}},properties:{serializedName:"properties",type:{name:"Composite",className:"BillingAccountPoliciesResponseProperties"}},systemData:{serializedName:"systemData",type:{name:"Composite",className:"SystemData"}}}}},WAt={type:{name:"Composite",className:"BillingAccountPoliciesResponseProperties",modelProperties:{serviceTenants:{serializedName:"serviceTenants",type:{name:"Sequence",element:{type:{name:"Composite",className:"ServiceTenantResponse"}}}},allowTransfers:{serializedName:"allowTransfers",type:{name:"Boolean"}}}}},KAt={type:{name:"Composite",className:"ServiceTenantResponse",modelProperties:{tenantId:{serializedName:"tenantId",type:{name:"String"}},tenantName:{serializedName:"tenantName",type:{name:"String"}}}}},oD={type:{name:"Composite",className:"SubscriptionAcceptOwnershipHeaders",modelProperties:{location:{serializedName:"location",type:{name:"String"}},retryAfter:{serializedName:"retry-after",type:{name:"Number"}}}}},BS=Object.freeze({__proto__:null,LocationListResult:Mxe,Location:kAt,Subscription:kxe,SubscriptionPolicies:LAt,SubscriptionListResult:qee,TenantListResult:zee,TenantIdDescription:qAt,CanceledSubscriptionId:Lxe,ErrorResponseBody:Tc,ErrorResponse:zAt,SubscriptionName:qxe,RenamedSubscriptionId:zxe,EnabledSubscriptionId:Fxe,OperationListResult:Fee,Operation:FAt,OperationDisplay:jAt,PutAliasRequest:jxe,PutAliasRequestProperties:UAt,PutAliasRequestAdditionalProperties:BAt,SubscriptionAliasResponse:$E,SubscriptionAliasResponseProperties:GAt,SystemData:$At,SubscriptionAliasListResult:Uxe,AcceptOwnershipRequest:Bxe,AcceptOwnershipRequestProperties:VAt,AcceptOwnershipStatusResponse:Gxe,PutTenantPolicyRequestProperties:$xe,GetTenantPolicyResponse:jee,TenantPolicy:HAt,GetTenantPolicyListResponse:Uee,BillingAccountPoliciesResponse:Vxe,BillingAccountPoliciesResponseProperties:WAt,ServiceTenantResponse:KAt,SubscriptionAcceptOwnershipHeaders:oD}),zo={parameterPath:"accept",mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Accept",type:{name:"String"}}},Fo={parameterPath:"$host",mapper:{serializedName:"$host",required:!0,type:{name:"String"}},skipEncoding:!0},GS={parameterPath:"subscriptionId",mapper:{serializedName:"subscriptionId",required:!0,type:{name:"String"}}},VE={parameterPath:"apiVersion",mapper:{defaultValue:"2016-06-01",isConstant:!0,serializedName:"api-version",type:{name:"String"}}},pB={parameterPath:"nextLink",mapper:{serializedName:"nextLink",required:!0,type:{name:"String"}},skipEncoding:!0},Zc={parameterPath:"apiVersion",mapper:{defaultValue:"2021-10-01",isConstant:!0,serializedName:"api-version",type:{name:"String"}}},mB={parameterPath:["options","contentType"],mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},QAt={parameterPath:"body",mapper:qxe},YAt={parameterPath:"body",mapper:Bxe},XAt={parameterPath:"body",mapper:jxe},Bee={parameterPath:"aliasName",mapper:{serializedName:"aliasName",required:!0,type:{name:"String"}}},JAt={parameterPath:"body",mapper:$xe},ZAt={parameterPath:"billingAccountId",mapper:{serializedName:"billingAccountId",required:!0,type:{name:"String"}}},xee=class{constructor(e){this.client=e}listLocations(e,t){let n=this.listLocationsPagingAll(e,t);return{next(){return n.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listLocationsPagingPage(e,t)}}listLocationsPagingPage(e,t){return Mr.__asyncGenerator(this,arguments,function*(){let i=yield Mr.__await(this._listLocations(e,t));yield yield Mr.__await(i.value||[])})}listLocationsPagingAll(e,t){return Mr.__asyncGenerator(this,arguments,function*(){var i,s;try{for(var o=Mr.__asyncValues(this.listLocationsPagingPage(e,t)),a;a=yield Mr.__await(o.next()),!a.done;){let c=a.value;yield Mr.__await(yield*Mr.__asyncDelegator(Mr.__asyncValues(c)))}}catch(c){i={error:c}}finally{try{a&&!a.done&&(s=o.return)&&(yield Mr.__await(s.call(o)))}finally{if(i)throw i.error}}})}list(e){let t=this.listPagingAll(e);return{next(){return t.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listPagingPage(e)}}listPagingPage(e){return Mr.__asyncGenerator(this,arguments,function*(){let n=yield Mr.__await(this._list(e));yield yield Mr.__await(n.value||[]);let i=n.nextLink;for(;i;)n=yield Mr.__await(this._listNext(i,e)),i=n.nextLink,yield yield Mr.__await(n.value||[])})}listPagingAll(e){return Mr.__asyncGenerator(this,arguments,function*(){var n,i;try{for(var s=Mr.__asyncValues(this.listPagingPage(e)),o;o=yield Mr.__await(s.next()),!o.done;){let a=o.value;yield Mr.__await(yield*Mr.__asyncDelegator(Mr.__asyncValues(a)))}}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=s.return)&&(yield Mr.__await(i.call(s)))}finally{if(n)throw n.error}}})}_listLocations(e,t){return this.client.sendOperationRequest({subscriptionId:e,options:t},eNt)}get(e,t){return this.client.sendOperationRequest({subscriptionId:e,options:t},tNt)}_list(e){return this.client.sendOperationRequest({options:e},rNt)}_listNext(e,t){return this.client.sendOperationRequest({nextLink:e,options:t},nNt)}},hB=Tv.createSerializer(BS,!1),eNt={path:"/subscriptions/{subscriptionId}/locations",httpMethod:"GET",responses:{200:{bodyMapper:Mxe}},queryParameters:[VE],urlParameters:[Fo,GS],headerParameters:[zo],serializer:hB},tNt={path:"/subscriptions/{subscriptionId}",httpMethod:"GET",responses:{200:{bodyMapper:kxe}},queryParameters:[VE],urlParameters:[Fo,GS],headerParameters:[zo],serializer:hB},rNt={path:"/subscriptions",httpMethod:"GET",responses:{200:{bodyMapper:qee}},queryParameters:[VE],urlParameters:[Fo],headerParameters:[zo],serializer:hB},nNt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:qee}},queryParameters:[VE],urlParameters:[Fo,pB],headerParameters:[zo],serializer:hB},Oee=class{constructor(e){this.client=e}list(e){let t=this.listPagingAll(e);return{next(){return t.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listPagingPage(e)}}listPagingPage(e){return Mr.__asyncGenerator(this,arguments,function*(){let n=yield Mr.__await(this._list(e));yield yield Mr.__await(n.value||[]);let i=n.nextLink;for(;i;)n=yield Mr.__await(this._listNext(i,e)),i=n.nextLink,yield yield Mr.__await(n.value||[])})}listPagingAll(e){return Mr.__asyncGenerator(this,arguments,function*(){var n,i;try{for(var s=Mr.__asyncValues(this.listPagingPage(e)),o;o=yield Mr.__await(s.next()),!o.done;){let a=o.value;yield Mr.__await(yield*Mr.__asyncDelegator(Mr.__asyncValues(a)))}}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=s.return)&&(yield Mr.__await(i.call(s)))}finally{if(n)throw n.error}}})}_list(e){return this.client.sendOperationRequest({options:e},iNt)}_listNext(e,t){return this.client.sendOperationRequest({nextLink:e,options:t},sNt)}},Hxe=Tv.createSerializer(BS,!1),iNt={path:"/tenants",httpMethod:"GET",responses:{200:{bodyMapper:zee}},queryParameters:[VE],urlParameters:[Fo],headerParameters:[zo],serializer:Hxe},sNt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:zee}},queryParameters:[VE],urlParameters:[Fo,pB],headerParameters:[zo],serializer:Hxe},dB=class{constructor(e,t,n,i=n.path,s=n.httpMethod){this.sendOperationFn=e,this.args=t,this.spec=n,this.requestPath=i,this.requestMethod=s}sendInitialRequest(){return Mr.__awaiter(this,void 0,void 0,function*(){return this.sendOperationFn(this.args,this.spec)})}sendPollRequest(e){return Mr.__awaiter(this,void 0,void 0,function*(){let t=this.spec,n=Mr.__rest(t,["requestBody"]);return this.sendOperationFn(this.args,Object.assign(Object.assign({},n),{path:e,httpMethod:"GET"}))})}},Aee=class{constructor(e){this.client=e}cancel(e,t){return this.client.sendOperationRequest({subscriptionId:e,options:t},oNt)}rename(e,t,n){return this.client.sendOperationRequest({subscriptionId:e,body:t,options:n},aNt)}enable(e,t){return this.client.sendOperationRequest({subscriptionId:e,options:t},cNt)}beginAcceptOwnership(e,t,n){return Mr.__awaiter(this,void 0,void 0,function*(){let i=(a,c)=>Mr.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(a,c)}),s=(a,c)=>Mr.__awaiter(this,void 0,void 0,function*(){var l;let u,d=(l=a.options)===null||l===void 0?void 0:l.onResponse,p=(y,v)=>{u=y,d?.(y,v)},m=Object.assign(Object.assign({},a),{options:Object.assign(Object.assign({},a.options),{onResponse:p})});return{flatResponse:yield i(m,c),rawResponse:{statusCode:u.status,body:u.parsedBody,headers:u.headers.toJSON()}}}),o=new dB(s,{subscriptionId:e,body:t,options:n},lNt);return new Dxe.LroEngine(o,{resumeFrom:n?.resumeFrom,intervalInMs:n?.updateIntervalInMs})})}beginAcceptOwnershipAndWait(e,t,n){return Mr.__awaiter(this,void 0,void 0,function*(){return(yield this.beginAcceptOwnership(e,t,n)).pollUntilDone()})}acceptOwnershipStatus(e,t){return this.client.sendOperationRequest({subscriptionId:e,options:t},uNt)}},aD=Tv.createSerializer(BS,!1),oNt={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Subscription/cancel",httpMethod:"POST",responses:{200:{bodyMapper:Lxe},default:{bodyMapper:Tc}},queryParameters:[Zc],urlParameters:[Fo,GS],headerParameters:[zo],serializer:aD},aNt={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Subscription/rename",httpMethod:"POST",responses:{200:{bodyMapper:zxe},default:{bodyMapper:Tc}},requestBody:QAt,queryParameters:[Zc],urlParameters:[Fo,GS],headerParameters:[zo,mB],mediaType:"json",serializer:aD},cNt={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Subscription/enable",httpMethod:"POST",responses:{200:{bodyMapper:Fxe},default:{bodyMapper:Tc}},queryParameters:[Zc],urlParameters:[Fo,GS],headerParameters:[zo],serializer:aD},lNt={path:"/providers/Microsoft.Subscription/subscriptions/{subscriptionId}/acceptOwnership",httpMethod:"POST",responses:{200:{headersMapper:oD},201:{headersMapper:oD},202:{headersMapper:oD},204:{headersMapper:oD},default:{bodyMapper:Tc}},requestBody:YAt,queryParameters:[Zc],urlParameters:[Fo,GS],headerParameters:[zo,mB],mediaType:"json",serializer:aD},uNt={path:"/providers/Microsoft.Subscription/subscriptions/{subscriptionId}/acceptOwnershipStatus",httpMethod:"GET",responses:{200:{bodyMapper:Gxe},default:{bodyMapper:Tc}},queryParameters:[Zc],urlParameters:[Fo,GS],headerParameters:[zo],serializer:aD},Nee=class{constructor(e){this.client=e}list(e){let t=this.listPagingAll(e);return{next(){return t.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listPagingPage(e)}}listPagingPage(e){return Mr.__asyncGenerator(this,arguments,function*(){let n=yield Mr.__await(this._list(e));yield yield Mr.__await(n.value||[]);let i=n.nextLink;for(;i;)n=yield Mr.__await(this._listNext(i,e)),i=n.nextLink,yield yield Mr.__await(n.value||[])})}listPagingAll(e){return Mr.__asyncGenerator(this,arguments,function*(){var n,i;try{for(var s=Mr.__asyncValues(this.listPagingPage(e)),o;o=yield Mr.__await(s.next()),!o.done;){let a=o.value;yield Mr.__await(yield*Mr.__asyncDelegator(Mr.__asyncValues(a)))}}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=s.return)&&(yield Mr.__await(i.call(s)))}finally{if(n)throw n.error}}})}_list(e){return this.client.sendOperationRequest({options:e},dNt)}_listNext(e,t){return this.client.sendOperationRequest({nextLink:e,options:t},pNt)}},Wxe=Tv.createSerializer(BS,!1),dNt={path:"/providers/Microsoft.Subscription/operations",httpMethod:"GET",responses:{200:{bodyMapper:Fee},default:{bodyMapper:Tc}},queryParameters:[Zc],urlParameters:[Fo],headerParameters:[zo],serializer:Wxe},pNt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Fee},default:{bodyMapper:Tc}},queryParameters:[Zc],urlParameters:[Fo,pB],headerParameters:[zo],serializer:Wxe},Dee=class{constructor(e){this.client=e}beginCreate(e,t,n){return Mr.__awaiter(this,void 0,void 0,function*(){let i=(a,c)=>Mr.__awaiter(this,void 0,void 0,function*(){return this.client.sendOperationRequest(a,c)}),s=(a,c)=>Mr.__awaiter(this,void 0,void 0,function*(){var l;let u,d=(l=a.options)===null||l===void 0?void 0:l.onResponse,p=(y,v)=>{u=y,d?.(y,v)},m=Object.assign(Object.assign({},a),{options:Object.assign(Object.assign({},a.options),{onResponse:p})});return{flatResponse:yield i(m,c),rawResponse:{statusCode:u.status,body:u.parsedBody,headers:u.headers.toJSON()}}}),o=new dB(s,{aliasName:e,body:t,options:n},mNt);return new Dxe.LroEngine(o,{resumeFrom:n?.resumeFrom,intervalInMs:n?.updateIntervalInMs})})}beginCreateAndWait(e,t,n){return Mr.__awaiter(this,void 0,void 0,function*(){return(yield this.beginCreate(e,t,n)).pollUntilDone()})}get(e,t){return this.client.sendOperationRequest({aliasName:e,options:t},hNt)}delete(e,t){return this.client.sendOperationRequest({aliasName:e,options:t},fNt)}list(e){return this.client.sendOperationRequest({options:e},gNt)}},fB=Tv.createSerializer(BS,!1),mNt={path:"/providers/Microsoft.Subscription/aliases/{aliasName}",httpMethod:"PUT",responses:{200:{bodyMapper:$E},201:{bodyMapper:$E},202:{bodyMapper:$E},204:{bodyMapper:$E},default:{bodyMapper:Tc}},requestBody:XAt,queryParameters:[Zc],urlParameters:[Fo,Bee],headerParameters:[zo,mB],mediaType:"json",serializer:fB},hNt={path:"/providers/Microsoft.Subscription/aliases/{aliasName}",httpMethod:"GET",responses:{200:{bodyMapper:$E},default:{bodyMapper:Tc}},queryParameters:[Zc],urlParameters:[Fo,Bee],headerParameters:[zo],serializer:fB},fNt={path:"/providers/Microsoft.Subscription/aliases/{aliasName}",httpMethod:"DELETE",responses:{200:{},204:{},default:{bodyMapper:Tc}},queryParameters:[Zc],urlParameters:[Fo,Bee],headerParameters:[zo],serializer:fB},gNt={path:"/providers/Microsoft.Subscription/aliases",httpMethod:"GET",responses:{200:{bodyMapper:Uxe},default:{bodyMapper:Tc}},queryParameters:[Zc],urlParameters:[Fo],headerParameters:[zo],serializer:fB},Mee=class{constructor(e){this.client=e}listPolicyForTenant(e){let t=this.listPolicyForTenantPagingAll(e);return{next(){return t.next()},[Symbol.asyncIterator](){return this},byPage:()=>this.listPolicyForTenantPagingPage(e)}}listPolicyForTenantPagingPage(e){return Mr.__asyncGenerator(this,arguments,function*(){let n=yield Mr.__await(this._listPolicyForTenant(e));yield yield Mr.__await(n.value||[]);let i=n.nextLink;for(;i;)n=yield Mr.__await(this._listPolicyForTenantNext(i,e)),i=n.nextLink,yield yield Mr.__await(n.value||[])})}listPolicyForTenantPagingAll(e){return Mr.__asyncGenerator(this,arguments,function*(){var n,i;try{for(var s=Mr.__asyncValues(this.listPolicyForTenantPagingPage(e)),o;o=yield Mr.__await(s.next()),!o.done;){let a=o.value;yield Mr.__await(yield*Mr.__asyncDelegator(Mr.__asyncValues(a)))}}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=s.return)&&(yield Mr.__await(i.call(s)))}finally{if(n)throw n.error}}})}addUpdatePolicyForTenant(e,t){return this.client.sendOperationRequest({body:e,options:t},yNt)}getPolicyForTenant(e){return this.client.sendOperationRequest({options:e},vNt)}_listPolicyForTenant(e){return this.client.sendOperationRequest({options:e},bNt)}_listPolicyForTenantNext(e,t){return this.client.sendOperationRequest({nextLink:e,options:t},_Nt)}},gB=Tv.createSerializer(BS,!1),yNt={path:"/providers/Microsoft.Subscription/policies/default",httpMethod:"PUT",responses:{200:{bodyMapper:jee},default:{bodyMapper:Tc}},requestBody:JAt,queryParameters:[Zc],urlParameters:[Fo],headerParameters:[zo,mB],mediaType:"json",serializer:gB},vNt={path:"/providers/Microsoft.Subscription/policies/default",httpMethod:"GET",responses:{200:{bodyMapper:jee},default:{bodyMapper:Tc}},queryParameters:[Zc],urlParameters:[Fo],headerParameters:[zo],serializer:gB},bNt={path:"/providers/Microsoft.Subscription/policies",httpMethod:"GET",responses:{200:{bodyMapper:Uee},default:{bodyMapper:Tc}},queryParameters:[Zc],urlParameters:[Fo],headerParameters:[zo],serializer:gB},_Nt={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Uee},default:{bodyMapper:Tc}},queryParameters:[Zc],urlParameters:[Fo,pB],headerParameters:[zo],serializer:gB},kee=class{constructor(e){this.client=e}getPolicy(e,t){return this.client.sendOperationRequest({billingAccountId:e,options:t},CNt)}},SNt=Tv.createSerializer(BS,!1),CNt={path:"/providers/Microsoft.Billing/billingAccounts/{billingAccountId}/providers/Microsoft.Subscription/policies/default",httpMethod:"GET",responses:{200:{bodyMapper:Vxe},default:{bodyMapper:Tc}},queryParameters:[Zc],urlParameters:[Fo,ZAt],headerParameters:[zo],serializer:SNt},Lee=class extends Tv.ServiceClient{constructor(e,t){if(e===void 0)throw new Error("'credentials' cannot be null");t||(t={});let n={requestContentType:"application/json; charset=utf-8",credential:e},i="azsdk-js-arm-subscriptions/5.0.0",s=t.userAgentOptions&&t.userAgentOptions.userAgentPrefix?`${t.userAgentOptions.userAgentPrefix} ${i}`:`${i}`;t.credentialScopes||(t.credentialScopes=["https://management.azure.com/.default"]);let o=Object.assign(Object.assign(Object.assign({},n),t),{userAgentOptions:{userAgentPrefix:s},baseUri:t.endpoint||"https://management.azure.com"});super(o),this.$host=t.$host||"https://management.azure.com",this.subscriptions=new xee(this),this.tenants=new Oee(this),this.subscriptionOperations=new Aee(this),this.operations=new Nee(this),this.alias=new Dee(this),this.subscriptionPolicy=new Mee(this),this.billingAccount=new kee(this)}};fm.SubscriptionClient=Lee});var dOe=O((qn,uOe)=>{qn=uOe.exports=Ci;var ds;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?ds=function(){var r=Array.prototype.slice.call(arguments,0);r.unshift("SEMVER"),console.log.apply(console,r)}:ds=function(){};qn.SEMVER_SPEC_VERSION="2.0.0";var $ee=256,yB=Number.MAX_SAFE_INTEGER||9007199254740991,Gee=16,Rs=qn.re=[],rr=qn.src=[],hi=0,HE=hi++;rr[HE]="0|[1-9]\\d*";var WE=hi++;rr[WE]="[0-9]+";var Kee=hi++;rr[Kee]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var Yxe=hi++;rr[Yxe]="("+rr[HE]+")\\.("+rr[HE]+")\\.("+rr[HE]+")";var Xxe=hi++;rr[Xxe]="("+rr[WE]+")\\.("+rr[WE]+")\\.("+rr[WE]+")";var Vee=hi++;rr[Vee]="(?:"+rr[HE]+"|"+rr[Kee]+")";var Hee=hi++;rr[Hee]="(?:"+rr[WE]+"|"+rr[Kee]+")";var Qee=hi++;rr[Qee]="(?:-("+rr[Vee]+"(?:\\."+rr[Vee]+")*))";var Yee=hi++;rr[Yee]="(?:-?("+rr[Hee]+"(?:\\."+rr[Hee]+")*))";var Wee=hi++;rr[Wee]="[0-9A-Za-z-]+";var uD=hi++;rr[uD]="(?:\\+("+rr[Wee]+"(?:\\."+rr[Wee]+")*))";var Xee=hi++,Jxe="v?"+rr[Yxe]+rr[Qee]+"?"+rr[uD]+"?";rr[Xee]="^"+Jxe+"$";var Jee="[v=\\s]*"+rr[Xxe]+rr[Yee]+"?"+rr[uD]+"?",Zee=hi++;rr[Zee]="^"+Jee+"$";var YE=hi++;rr[YE]="((?:<|>)?=?)";var vB=hi++;rr[vB]=rr[WE]+"|x|X|\\*";var bB=hi++;rr[bB]=rr[HE]+"|x|X|\\*";var $S=hi++;rr[$S]="[v=\\s]*("+rr[bB]+")(?:\\.("+rr[bB]+")(?:\\.("+rr[bB]+")(?:"+rr[Qee]+")?"+rr[uD]+"?)?)?";var QE=hi++;rr[QE]="[v=\\s]*("+rr[vB]+")(?:\\.("+rr[vB]+")(?:\\.("+rr[vB]+")(?:"+rr[Yee]+")?"+rr[uD]+"?)?)?";var Zxe=hi++;rr[Zxe]="^"+rr[YE]+"\\s*"+rr[$S]+"$";var eOe=hi++;rr[eOe]="^"+rr[YE]+"\\s*"+rr[QE]+"$";var tOe=hi++;rr[tOe]="(?:^|[^\\d])(\\d{1,"+Gee+"})(?:\\.(\\d{1,"+Gee+"}))?(?:\\.(\\d{1,"+Gee+"}))?(?:$|[^\\d])";var EB=hi++;rr[EB]="(?:~>?)";var _B=hi++;rr[_B]="(\\s*)"+rr[EB]+"\\s+";Rs[_B]=new RegExp(rr[_B],"g");var PNt="$1~",rOe=hi++;rr[rOe]="^"+rr[EB]+rr[$S]+"$";var nOe=hi++;rr[nOe]="^"+rr[EB]+rr[QE]+"$";var TB=hi++;rr[TB]="(?:\\^)";var SB=hi++;rr[SB]="(\\s*)"+rr[TB]+"\\s+";Rs[SB]=new RegExp(rr[SB],"g");var wNt="$1^",iOe=hi++;rr[iOe]="^"+rr[TB]+rr[$S]+"$";var sOe=hi++;rr[sOe]="^"+rr[TB]+rr[QE]+"$";var ete=hi++;rr[ete]="^"+rr[YE]+"\\s*("+Jee+")$|^$";var tte=hi++;rr[tte]="^"+rr[YE]+"\\s*("+Jxe+")$|^$";var cD=hi++;rr[cD]="(\\s*)"+rr[YE]+"\\s*("+Jee+"|"+rr[$S]+")";Rs[cD]=new RegExp(rr[cD],"g");var ENt="$1$2$3",oOe=hi++;rr[oOe]="^\\s*("+rr[$S]+")\\s+-\\s+("+rr[$S]+")\\s*$";var aOe=hi++;rr[aOe]="^\\s*("+rr[QE]+")\\s+-\\s+("+rr[QE]+")\\s*$";var cOe=hi++;rr[cOe]="(<|>)?=?\\s*\\*";for(Iv=0;Iv<hi;Iv++)ds(Iv,rr[Iv]),Rs[Iv]||(Rs[Iv]=new RegExp(rr[Iv]));var Iv;qn.parse=VS;function VS(r,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),r instanceof Ci)return r;if(typeof r!="string"||r.length>$ee)return null;var t=e.loose?Rs[Zee]:Rs[Xee];if(!t.test(r))return null;try{return new Ci(r,e)}catch{return null}}qn.valid=TNt;function TNt(r,e){var t=VS(r,e);return t?t.version:null}qn.clean=INt;function INt(r,e){var t=VS(r.trim().replace(/^[=v]+/,""),e);return t?t.version:null}qn.SemVer=Ci;function Ci(r,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),r instanceof Ci){if(r.loose===e.loose)return r;r=r.version}else if(typeof r!="string")throw new TypeError("Invalid Version: "+r);if(r.length>$ee)throw new TypeError("version is longer than "+$ee+" characters");if(!(this instanceof Ci))return new Ci(r,e);ds("SemVer",r,e),this.options=e,this.loose=!!e.loose;var t=r.trim().match(e.loose?Rs[Zee]:Rs[Xee]);if(!t)throw new TypeError("Invalid Version: "+r);if(this.raw=r,this.major=+t[1],this.minor=+t[2],this.patch=+t[3],this.major>yB||this.major<0)throw new TypeError("Invalid major version");if(this.minor>yB||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>yB||this.patch<0)throw new TypeError("Invalid patch version");t[4]?this.prerelease=t[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var i=+n;if(i>=0&&i<yB)return i}return n}):this.prerelease=[],this.build=t[5]?t[5].split("."):[],this.format()}Ci.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};Ci.prototype.toString=function(){return this.version};Ci.prototype.compare=function(r){return ds("SemVer.compare",this.version,this.options,r),r instanceof Ci||(r=new Ci(r,this.options)),this.compareMain(r)||this.comparePre(r)};Ci.prototype.compareMain=function(r){return r instanceof Ci||(r=new Ci(r,this.options)),KE(this.major,r.major)||KE(this.minor,r.minor)||KE(this.patch,r.patch)};Ci.prototype.comparePre=function(r){if(r instanceof Ci||(r=new Ci(r,this.options)),this.prerelease.length&&!r.prerelease.length)return-1;if(!this.prerelease.length&&r.prerelease.length)return 1;if(!this.prerelease.length&&!r.prerelease.length)return 0;var e=0;do{var t=this.prerelease[e],n=r.prerelease[e];if(ds("prerelease compare",e,t,n),t===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(t===void 0)return-1;if(t===n)continue;return KE(t,n)}while(++e)};Ci.prototype.inc=function(r,e){switch(r){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e),this.inc("pre",e);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var t=this.prerelease.length;--t>=0;)typeof this.prerelease[t]=="number"&&(this.prerelease[t]++,t=-2);t===-1&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+r)}return this.format(),this.raw=this.version,this};qn.inc=RNt;function RNt(r,e,t,n){typeof t=="string"&&(n=t,t=void 0);try{return new Ci(r,t).inc(e,n).version}catch{return null}}qn.diff=xNt;function xNt(r,e){if(rte(r,e))return null;var t=VS(r),n=VS(e),i="";if(t.prerelease.length||n.prerelease.length){i="pre";var s="prerelease"}for(var o in t)if((o==="major"||o==="minor"||o==="patch")&&t[o]!==n[o])return i+o;return s}qn.compareIdentifiers=KE;var Qxe=/^[0-9]+$/;function KE(r,e){var t=Qxe.test(r),n=Qxe.test(e);return t&&n&&(r=+r,e=+e),r===e?0:t&&!n?-1:n&&!t?1:r<e?-1:1}qn.rcompareIdentifiers=ONt;function ONt(r,e){return KE(e,r)}qn.major=ANt;function ANt(r,e){return new Ci(r,e).major}qn.minor=NNt;function NNt(r,e){return new Ci(r,e).minor}qn.patch=DNt;function DNt(r,e){return new Ci(r,e).patch}qn.compare=ug;function ug(r,e,t){return new Ci(r,t).compare(new Ci(e,t))}qn.compareLoose=MNt;function MNt(r,e){return ug(r,e,!0)}qn.rcompare=kNt;function kNt(r,e,t){return ug(e,r,t)}qn.sort=LNt;function LNt(r,e){return r.sort(function(t,n){return qn.compare(t,n,e)})}qn.rsort=qNt;function qNt(r,e){return r.sort(function(t,n){return qn.rcompare(t,n,e)})}qn.gt=lD;function lD(r,e,t){return ug(r,e,t)>0}qn.lt=CB;function CB(r,e,t){return ug(r,e,t)<0}qn.eq=rte;function rte(r,e,t){return ug(r,e,t)===0}qn.neq=lOe;function lOe(r,e,t){return ug(r,e,t)!==0}qn.gte=nte;function nte(r,e,t){return ug(r,e,t)>=0}qn.lte=ite;function ite(r,e,t){return ug(r,e,t)<=0}qn.cmp=PB;function PB(r,e,t,n){switch(e){case"===":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r===t;case"!==":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r!==t;case"":case"=":case"==":return rte(r,t,n);case"!=":return lOe(r,t,n);case">":return lD(r,t,n);case">=":return nte(r,t,n);case"<":return CB(r,t,n);case"<=":return ite(r,t,n);default:throw new TypeError("Invalid operator: "+e)}}qn.Comparator=Xd;function Xd(r,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),r instanceof Xd){if(r.loose===!!e.loose)return r;r=r.value}if(!(this instanceof Xd))return new Xd(r,e);ds("comparator",r,e),this.options=e,this.loose=!!e.loose,this.parse(r),this.semver===dD?this.value="":this.value=this.operator+this.semver.version,ds("comp",this)}var dD={};Xd.prototype.parse=function(r){var e=this.options.loose?Rs[ete]:Rs[tte],t=r.match(e);if(!t)throw new TypeError("Invalid comparator: "+r);this.operator=t[1],this.operator==="="&&(this.operator=""),t[2]?this.semver=new Ci(t[2],this.options.loose):this.semver=dD};Xd.prototype.toString=function(){return this.value};Xd.prototype.test=function(r){return ds("Comparator.test",r,this.options.loose),this.semver===dD?!0:(typeof r=="string"&&(r=new Ci(r,this.options)),PB(r,this.operator,this.semver,this.options))};Xd.prototype.intersects=function(r,e){if(!(r instanceof Xd))throw new TypeError("a Comparator is required");(!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1});var t;if(this.operator==="")return t=new bo(r.value,e),wB(this.value,t,e);if(r.operator==="")return t=new bo(this.value,e),wB(r.semver,t,e);var n=(this.operator===">="||this.operator===">")&&(r.operator===">="||r.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(r.operator==="<="||r.operator==="<"),s=this.semver.version===r.semver.version,o=(this.operator===">="||this.operator==="<=")&&(r.operator===">="||r.operator==="<="),a=PB(this.semver,"<",r.semver,e)&&(this.operator===">="||this.operator===">")&&(r.operator==="<="||r.operator==="<"),c=PB(this.semver,">",r.semver,e)&&(this.operator==="<="||this.operator==="<")&&(r.operator===">="||r.operator===">");return n||i||s&&o||a||c};qn.Range=bo;function bo(r,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),r instanceof bo)return r.loose===!!e.loose&&r.includePrerelease===!!e.includePrerelease?r:new bo(r.raw,e);if(r instanceof Xd)return new bo(r.value,e);if(!(this instanceof bo))return new bo(r,e);if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=r,this.set=r.split(/\s*\|\|\s*/).map(function(t){return this.parseRange(t.trim())},this).filter(function(t){return t.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+r);this.format()}bo.prototype.format=function(){return this.range=this.set.map(function(r){return r.join(" ").trim()}).join("||").trim(),this.range};bo.prototype.toString=function(){return this.range};bo.prototype.parseRange=function(r){var e=this.options.loose;r=r.trim();var t=e?Rs[aOe]:Rs[oOe];r=r.replace(t,WNt),ds("hyphen replace",r),r=r.replace(Rs[cD],ENt),ds("comparator trim",r,Rs[cD]),r=r.replace(Rs[_B],PNt),r=r.replace(Rs[SB],wNt),r=r.split(/\s+/).join(" ");var n=e?Rs[ete]:Rs[tte],i=r.split(" ").map(function(s){return FNt(s,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(s){return!!s.match(n)})),i=i.map(function(s){return new Xd(s,this.options)},this),i};bo.prototype.intersects=function(r,e){if(!(r instanceof bo))throw new TypeError("a Range is required");return this.set.some(function(t){return t.every(function(n){return r.set.some(function(i){return i.every(function(s){return n.intersects(s,e)})})})})};qn.toComparators=zNt;function zNt(r,e){return new bo(r,e).set.map(function(t){return t.map(function(n){return n.value}).join(" ").trim().split(" ")})}function FNt(r,e){return ds("comp",r,e),r=BNt(r,e),ds("caret",r),r=jNt(r,e),ds("tildes",r),r=$Nt(r,e),ds("xrange",r),r=HNt(r,e),ds("stars",r),r}function Nl(r){return!r||r.toLowerCase()==="x"||r==="*"}function jNt(r,e){return r.trim().split(/\s+/).map(function(t){return UNt(t,e)}).join(" ")}function UNt(r,e){var t=e.loose?Rs[nOe]:Rs[rOe];return r.replace(t,function(n,i,s,o,a){ds("tilde",r,n,i,s,o,a);var c;return Nl(i)?c="":Nl(s)?c=">="+i+".0.0 <"+(+i+1)+".0.0":Nl(o)?c=">="+i+"."+s+".0 <"+i+"."+(+s+1)+".0":a?(ds("replaceTilde pr",a),c=">="+i+"."+s+"."+o+"-"+a+" <"+i+"."+(+s+1)+".0"):c=">="+i+"."+s+"."+o+" <"+i+"."+(+s+1)+".0",ds("tilde return",c),c})}function BNt(r,e){return r.trim().split(/\s+/).map(function(t){return GNt(t,e)}).join(" ")}function GNt(r,e){ds("caret",r,e);var t=e.loose?Rs[sOe]:Rs[iOe];return r.replace(t,function(n,i,s,o,a){ds("caret",r,n,i,s,o,a);var c;return Nl(i)?c="":Nl(s)?c=">="+i+".0.0 <"+(+i+1)+".0.0":Nl(o)?i==="0"?c=">="+i+"."+s+".0 <"+i+"."+(+s+1)+".0":c=">="+i+"."+s+".0 <"+(+i+1)+".0.0":a?(ds("replaceCaret pr",a),i==="0"?s==="0"?c=">="+i+"."+s+"."+o+"-"+a+" <"+i+"."+s+"."+(+o+1):c=">="+i+"."+s+"."+o+"-"+a+" <"+i+"."+(+s+1)+".0":c=">="+i+"."+s+"."+o+"-"+a+" <"+(+i+1)+".0.0"):(ds("no pr"),i==="0"?s==="0"?c=">="+i+"."+s+"."+o+" <"+i+"."+s+"."+(+o+1):c=">="+i+"."+s+"."+o+" <"+i+"."+(+s+1)+".0":c=">="+i+"."+s+"."+o+" <"+(+i+1)+".0.0"),ds("caret return",c),c})}function $Nt(r,e){return ds("replaceXRanges",r,e),r.split(/\s+/).map(function(t){return VNt(t,e)}).join(" ")}function VNt(r,e){r=r.trim();var t=e.loose?Rs[eOe]:Rs[Zxe];return r.replace(t,function(n,i,s,o,a,c){ds("xRange",r,n,i,s,o,a,c);var l=Nl(s),u=l||Nl(o),d=u||Nl(a),p=d;return i==="="&&p&&(i=""),l?i===">"||i==="<"?n="<0.0.0":n="*":i&&p?(u&&(o=0),a=0,i===">"?(i=">=",u?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):i==="<="&&(i="<",u?s=+s+1:o=+o+1),n=i+s+"."+o+"."+a):u?n=">="+s+".0.0 <"+(+s+1)+".0.0":d&&(n=">="+s+"."+o+".0 <"+s+"."+(+o+1)+".0"),ds("xRange return",n),n})}function HNt(r,e){return ds("replaceStars",r,e),r.trim().replace(Rs[cOe],"")}function WNt(r,e,t,n,i,s,o,a,c,l,u,d,p){return Nl(t)?e="":Nl(n)?e=">="+t+".0.0":Nl(i)?e=">="+t+"."+n+".0":e=">="+e,Nl(c)?a="":Nl(l)?a="<"+(+c+1)+".0.0":Nl(u)?a="<"+c+"."+(+l+1)+".0":d?a="<="+c+"."+l+"."+u+"-"+d:a="<="+a,(e+" "+a).trim()}bo.prototype.test=function(r){if(!r)return!1;typeof r=="string"&&(r=new Ci(r,this.options));for(var e=0;e<this.set.length;e++)if(KNt(this.set[e],r,this.options))return!0;return!1};function KNt(r,e,t){for(var n=0;n<r.length;n++)if(!r[n].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(n=0;n<r.length;n++)if(ds(r[n].semver),r[n].semver!==dD&&r[n].semver.prerelease.length>0){var i=r[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}qn.satisfies=wB;function wB(r,e,t){try{e=new bo(e,t)}catch{return!1}return e.test(r)}qn.maxSatisfying=QNt;function QNt(r,e,t){var n=null,i=null;try{var s=new bo(e,t)}catch{return null}return r.forEach(function(o){s.test(o)&&(!n||i.compare(o)===-1)&&(n=o,i=new Ci(n,t))}),n}qn.minSatisfying=YNt;function YNt(r,e,t){var n=null,i=null;try{var s=new bo(e,t)}catch{return null}return r.forEach(function(o){s.test(o)&&(!n||i.compare(o)===1)&&(n=o,i=new Ci(n,t))}),n}qn.minVersion=XNt;function XNt(r,e){r=new bo(r,e);var t=new Ci("0.0.0");if(r.test(t)||(t=new Ci("0.0.0-0"),r.test(t)))return t;t=null;for(var n=0;n<r.set.length;++n){var i=r.set[n];i.forEach(function(s){var o=new Ci(s.semver.version);switch(s.operator){case">":o.prerelease.length===0?o.patch++:o.prerelease.push(0),o.raw=o.format();case"":case">=":(!t||lD(t,o))&&(t=o);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+s.operator)}})}return t&&r.test(t)?t:null}qn.validRange=JNt;function JNt(r,e){try{return new bo(r,e).range||"*"}catch{return null}}qn.ltr=ZNt;function ZNt(r,e,t){return ste(r,e,"<",t)}qn.gtr=eDt;function eDt(r,e,t){return ste(r,e,">",t)}qn.outside=ste;function ste(r,e,t,n){r=new Ci(r,n),e=new bo(e,n);var i,s,o,a,c;switch(t){case">":i=lD,s=ite,o=CB,a=">",c=">=";break;case"<":i=CB,s=nte,o=lD,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(wB(r,e,n))return!1;for(var l=0;l<e.set.length;++l){var u=e.set[l],d=null,p=null;if(u.forEach(function(m){m.semver===dD&&(m=new Xd(">=0.0.0")),d=d||m,p=p||m,i(m.semver,d.semver,n)?d=m:o(m.semver,p.semver,n)&&(p=m)}),d.operator===a||d.operator===c||(!p.operator||p.operator===a)&&s(r,p.semver))return!1;if(p.operator===c&&o(r,p.semver))return!1}return!0}qn.prerelease=tDt;function tDt(r,e){var t=VS(r,e);return t&&t.prerelease.length?t.prerelease:null}qn.intersects=rDt;function rDt(r,e,t){return r=new bo(r,t),e=new bo(e,t),r.intersects(e)}qn.coerce=nDt;function nDt(r){if(r instanceof Ci)return r;if(typeof r!="string")return null;var e=r.match(Rs[tOe]);return e==null?null:VS(e[1]+"."+(e[2]||"0")+"."+(e[3]||"0"))}});var XE=O(dg=>{"use strict";Object.defineProperty(dg,"__esModule",{value:!0});function iDt(r){return r===!0||r===!1}dg.boolean=iDt;function pOe(r){return typeof r=="string"||r instanceof String}dg.string=pOe;function sDt(r){return typeof r=="number"||r instanceof Number}dg.number=sDt;function oDt(r){return r instanceof Error}dg.error=oDt;function aDt(r){return typeof r=="function"}dg.func=aDt;function mOe(r){return Array.isArray(r)}dg.array=mOe;function cDt(r){return mOe(r)&&r.every(e=>pOe(e))}dg.stringArray=cDt});var fOe=O($i=>{"use strict";Object.defineProperty($i,"__esModule",{value:!0});var HS=XE(),hOe;(function(r){r.ParseError=-32700,r.InvalidRequest=-32600,r.MethodNotFound=-32601,r.InvalidParams=-32602,r.InternalError=-32603,r.serverErrorStart=-32099,r.serverErrorEnd=-32e3,r.ServerNotInitialized=-32002,r.UnknownErrorCode=-32001,r.RequestCancelled=-32800,r.MessageWriteError=1,r.MessageReadError=2})(hOe=$i.ErrorCodes||($i.ErrorCodes={}));var ote=class r extends Error{constructor(e,t,n){super(t),this.code=HS.number(e)?e:hOe.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,r.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}};$i.ResponseError=ote;var Ys=class{constructor(e,t){this._method=e,this._numberOfParams=t}get method(){return this._method}get numberOfParams(){return this._numberOfParams}};$i.AbstractMessageType=Ys;var ate=class extends Ys{constructor(e){super(e,0),this._=void 0}};$i.RequestType0=ate;var cte=class extends Ys{constructor(e){super(e,1),this._=void 0}};$i.RequestType=cte;var lte=class extends Ys{constructor(e){super(e,1),this._=void 0}};$i.RequestType1=lte;var ute=class extends Ys{constructor(e){super(e,2),this._=void 0}};$i.RequestType2=ute;var dte=class extends Ys{constructor(e){super(e,3),this._=void 0}};$i.RequestType3=dte;var pte=class extends Ys{constructor(e){super(e,4),this._=void 0}};$i.RequestType4=pte;var mte=class extends Ys{constructor(e){super(e,5),this._=void 0}};$i.RequestType5=mte;var hte=class extends Ys{constructor(e){super(e,6),this._=void 0}};$i.RequestType6=hte;var fte=class extends Ys{constructor(e){super(e,7),this._=void 0}};$i.RequestType7=fte;var gte=class extends Ys{constructor(e){super(e,8),this._=void 0}};$i.RequestType8=gte;var yte=class extends Ys{constructor(e){super(e,9),this._=void 0}};$i.RequestType9=yte;var vte=class extends Ys{constructor(e){super(e,1),this._=void 0}};$i.NotificationType=vte;var bte=class extends Ys{constructor(e){super(e,0),this._=void 0}};$i.NotificationType0=bte;var _te=class extends Ys{constructor(e){super(e,1),this._=void 0}};$i.NotificationType1=_te;var Ste=class extends Ys{constructor(e){super(e,2),this._=void 0}};$i.NotificationType2=Ste;var Cte=class extends Ys{constructor(e){super(e,3),this._=void 0}};$i.NotificationType3=Cte;var Pte=class extends Ys{constructor(e){super(e,4),this._=void 0}};$i.NotificationType4=Pte;var wte=class extends Ys{constructor(e){super(e,5),this._=void 0}};$i.NotificationType5=wte;var Ete=class extends Ys{constructor(e){super(e,6),this._=void 0}};$i.NotificationType6=Ete;var Tte=class extends Ys{constructor(e){super(e,7),this._=void 0}};$i.NotificationType7=Tte;var Ite=class extends Ys{constructor(e){super(e,8),this._=void 0}};$i.NotificationType8=Ite;var Rte=class extends Ys{constructor(e){super(e,9),this._=void 0}};$i.NotificationType9=Rte;function lDt(r){let e=r;return e&&HS.string(e.method)&&(HS.string(e.id)||HS.number(e.id))}$i.isRequestMessage=lDt;function uDt(r){let e=r;return e&&HS.string(e.method)&&r.id===void 0}$i.isNotificationMessage=uDt;function dDt(r){let e=r;return e&&(e.result!==void 0||!!e.error)&&(HS.string(e.id)||HS.number(e.id)||e.id===null)}$i.isResponseMessage=dDt});var pD=O(WS=>{"use strict";Object.defineProperty(WS,"__esModule",{value:!0});var pDt;(function(r){function e(t){return{dispose:t}}r.create=e})(pDt=WS.Disposable||(WS.Disposable={}));var mDt;(function(r){let e={dispose(){}};r.None=function(){return e}})(mDt=WS.Event||(WS.Event={}));var xte=class{add(e,t=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(this._callbacks){for(var n=!1,i=0,s=this._callbacks.length;i<s;i++)if(this._callbacks[i]===e)if(this._contexts[i]===t){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}}invoke(...e){if(!this._callbacks)return[];for(var t=[],n=this._callbacks.slice(0),i=this._contexts.slice(0),s=0,o=n.length;s<o;s++)try{t.push(n[s].apply(i[s],e))}catch(a){console.error(a)}return t}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},IB=class r{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,n)=>{this._callbacks||(this._callbacks=new xte),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t);let i;return i={dispose:()=>{this._callbacks.remove(e,t),i.dispose=r._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this)}},Array.isArray(n)&&n.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};IB._noop=function(){};WS.Emitter=IB});var xB=O(Rv=>{"use strict";Object.defineProperty(Rv,"__esModule",{value:!0});var Ote=pD(),JE=XE(),Ate=8192,gOe=Buffer.from("\r","ascii")[0],yOe=Buffer.from(`
`,"ascii")[0],hDt=`\r
`,Nte=class{constructor(e="utf8"){this.encoding=e,this.index=0,this.buffer=Buffer.allocUnsafe(Ate)}append(e){var t=e;if(typeof e=="string"){var n=e,i=Buffer.byteLength(n,this.encoding);t=Buffer.allocUnsafe(i),t.write(n,0,i,this.encoding)}if(this.buffer.length-this.index>=t.length)t.copy(this.buffer,this.index,0,t.length);else{var s=(Math.ceil((this.index+t.length)/Ate)+1)*Ate;this.index===0?(this.buffer=Buffer.allocUnsafe(s),t.copy(this.buffer,0,0,t.length)):this.buffer=Buffer.concat([this.buffer.slice(0,this.index),t],s)}this.index+=t.length}tryReadHeaders(){let e,t=0;for(;t+3<this.index&&(this.buffer[t]!==gOe||this.buffer[t+1]!==yOe||this.buffer[t+2]!==gOe||this.buffer[t+3]!==yOe);)t++;if(t+3>=this.index)return e;e=Object.create(null),this.buffer.toString("ascii",0,t).split(hDt).forEach(s=>{let o=s.indexOf(":");if(o===-1)throw new Error("Message header must separate key and value using :");let a=s.substr(0,o),c=s.substr(o+1).trim();e[a]=c});let i=t+4;return this.buffer=this.buffer.slice(i),this.index=this.index-i,e}tryReadContent(e){if(this.index<e)return null;let t=this.buffer.toString(this.encoding,0,e),n=e;return this.buffer.copy(this.buffer,0,n),this.index=this.index-n,t}get numberOfBytes(){return this.index}},fDt;(function(r){function e(t){let n=t;return n&&JE.func(n.listen)&&JE.func(n.dispose)&&JE.func(n.onError)&&JE.func(n.onClose)&&JE.func(n.onPartialMessage)}r.is=e})(fDt=Rv.MessageReader||(Rv.MessageReader={}));var mD=class{constructor(){this.errorEmitter=new Ote.Emitter,this.closeEmitter=new Ote.Emitter,this.partialMessageEmitter=new Ote.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader recevied error. Reason: ${JE.string(e.message)?e.message:"unknown"}`)}};Rv.AbstractMessageReader=mD;var RB=class extends mD{constructor(e,t="utf8"){super(),this.readable=e,this.buffer=new Nte(t),this._partialMessageTimeout=1e4}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e,this.readable.on("data",t=>{this.onData(t)}),this.readable.on("error",t=>this.fireError(t)),this.readable.on("close",()=>this.fireClose())}onData(e){for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let i=this.buffer.tryReadHeaders();if(!i)return;let s=i["Content-Length"];if(!s)throw new Error("Header must provide a Content-Length property.");let o=parseInt(s);if(isNaN(o))throw new Error("Content-Length value must be a number.");this.nextMessageLength=o}var t=this.buffer.tryReadContent(this.nextMessageLength);if(t===null){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.messageToken++;var n=JSON.parse(t);this.callback(n)}}clearPartialMessageTimer(){this.partialMessageTimer&&(clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=setTimeout((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};Rv.StreamMessageReader=RB;var Dte=class extends mD{constructor(e){super(),this.process=e;let t=this.process;t.on("error",n=>this.fireError(n)),t.on("close",()=>this.fireClose())}listen(e){this.process.on("message",e)}};Rv.IPCMessageReader=Dte;var Mte=class extends RB{constructor(e,t="utf-8"){super(e,t)}};Rv.SocketMessageReader=Mte});var AB=O(xv=>{"use strict";Object.defineProperty(xv,"__esModule",{value:!0});var vOe=pD(),hD=XE(),bOe="Content-Length: ",OB=`\r
`,gDt;(function(r){function e(t){let n=t;return n&&hD.func(n.dispose)&&hD.func(n.onClose)&&hD.func(n.onError)&&hD.func(n.write)}r.is=e})(gDt=xv.MessageWriter||(xv.MessageWriter={}));var ZE=class{constructor(){this.errorEmitter=new vOe.Emitter,this.closeEmitter=new vOe.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer recevied error. Reason: ${hD.string(e.message)?e.message:"unknown"}`)}};xv.AbstractMessageWriter=ZE;var kte=class extends ZE{constructor(e,t="utf8"){super(),this.writable=e,this.encoding=t,this.errorCount=0,this.writable.on("error",n=>this.fireError(n)),this.writable.on("close",()=>this.fireClose())}write(e){let t=JSON.stringify(e),n=Buffer.byteLength(t,this.encoding),i=[bOe,n.toString(),OB,OB];try{this.writable.write(i.join(""),"ascii"),this.writable.write(t,this.encoding),this.errorCount=0}catch(s){this.errorCount++,this.fireError(s,e,this.errorCount)}}};xv.StreamMessageWriter=kte;var Lte=class extends ZE{constructor(e){super(),this.process=e,this.errorCount=0,this.queue=[],this.sending=!1;let t=this.process;t.on("error",n=>this.fireError(n)),t.on("close",()=>this.fireClose)}write(e){!this.sending&&this.queue.length===0?this.doWriteMessage(e):this.queue.push(e)}doWriteMessage(e){try{this.process.send&&(this.sending=!0,this.process.send(e,void 0,void 0,t=>{this.sending=!1,t?(this.errorCount++,this.fireError(t,e,this.errorCount)):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())}))}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}}};xv.IPCMessageWriter=Lte;var qte=class extends ZE{constructor(e,t="utf8"){super(),this.socket=e,this.queue=[],this.sending=!1,this.encoding=t,this.errorCount=0,this.socket.on("error",n=>this.fireError(n)),this.socket.on("close",()=>this.fireClose())}write(e){!this.sending&&this.queue.length===0?this.doWriteMessage(e):this.queue.push(e)}doWriteMessage(e){let t=JSON.stringify(e),n=Buffer.byteLength(t,this.encoding),i=[bOe,n.toString(),OB,OB];try{this.sending=!0,this.socket.write(i.join(""),"ascii",s=>{s&&this.handleError(s,e);try{this.socket.write(t,this.encoding,o=>{this.sending=!1,o?this.handleError(o,e):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())})}catch(o){this.handleError(o,e)}})}catch(s){this.handleError(s,e)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}};xv.SocketMessageWriter=qte});var SOe=O(fD=>{"use strict";Object.defineProperty(fD,"__esModule",{value:!0});var zte=pD(),yDt=XE(),_Oe;(function(r){r.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:zte.Event.None}),r.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:zte.Event.None});function e(t){let n=t;return n&&(n===r.None||n===r.Cancelled||yDt.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}r.is=e})(_Oe=fD.CancellationToken||(fD.CancellationToken={}));var vDt=Object.freeze(function(r,e){let t=setTimeout(r.bind(e),0);return{dispose(){clearTimeout(t)}}}),Fte=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this._emitter=void 0))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?vDt:(this._emitter||(this._emitter=new zte.Emitter),this._emitter.event)}},jte=class{get token(){return this._token||(this._token=new Fte),this._token}cancel(){this._token?this._token.cancel():this._token=_Oe.Cancelled}dispose(){this.cancel()}};fD.CancellationTokenSource=jte});var COe=O(gD=>{"use strict";Object.defineProperty(gD,"__esModule",{value:!0});var Ah;(function(r){r.None=0,r.First=1,r.Last=2})(Ah=gD.Touch||(gD.Touch={}));var Ute=class{constructor(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}has(e){return this._map.has(e)}get(e){let t=this._map.get(e);if(t)return t.value}set(e,t,n=Ah.None){let i=this._map.get(e);if(i)i.value=t,n!==Ah.None&&this.touch(i,n);else{switch(i={key:e,value:t,next:void 0,previous:void 0},n){case Ah.None:this.addItemLast(i);break;case Ah.First:this.addItemFirst(i);break;case Ah.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}}delete(e){let t=this._map.get(e);return t?(this._map.delete(e),this.removeItem(t),this._size--,!0):!1}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let n=this._head;for(;n;)t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),n=n.next}forEachReverse(e,t){let n=this._tail;for(;n;)t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),n=n.previous}values(){let e=[],t=this._head;for(;t;)e.push(t.value),t=t.next;return e}keys(){let e=[],t=this._head;for(;t;)e.push(t.key),t=t.next;return e}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head)this._head=e.next;else if(e===this._tail)this._tail=e.previous;else{let t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==Ah.First&&t!==Ah.Last)){if(t===Ah.First){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e}else if(t===Ah.Last){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e}}}};gD.LinkedMap=Ute});var TOe=O(yD=>{"use strict";Object.defineProperty(yD,"__esModule",{value:!0});var bDt=require("path"),_Dt=require("os"),SDt=require("crypto"),POe=require("net"),wOe=xB(),EOe=AB();function CDt(){let r=SDt.randomBytes(21).toString("hex");return process.platform==="win32"?`\\\\.\\pipe\\vscode-jsonrpc-${r}-sock`:bDt.join(_Dt.tmpdir(),`vscode-${r}.sock`)}yD.generateRandomPipeName=CDt;function PDt(r,e="utf-8"){let t,n=new Promise((i,s)=>{t=i});return new Promise((i,s)=>{let o=POe.createServer(a=>{o.close(),t([new wOe.SocketMessageReader(a,e),new EOe.SocketMessageWriter(a,e)])});o.on("error",s),o.listen(r,()=>{o.removeListener("error",s),i({onConnected:()=>n})})})}yD.createClientPipeTransport=PDt;function wDt(r,e="utf-8"){let t=POe.createConnection(r);return[new wOe.SocketMessageReader(t,e),new EOe.SocketMessageWriter(t,e)]}yD.createServerPipeTransport=wDt});var OOe=O(NB=>{"use strict";Object.defineProperty(NB,"__esModule",{value:!0});var IOe=require("net"),ROe=xB(),xOe=AB();function EDt(r,e="utf-8"){let t,n=new Promise((i,s)=>{t=i});return new Promise((i,s)=>{let o=IOe.createServer(a=>{o.close(),t([new ROe.SocketMessageReader(a,e),new xOe.SocketMessageWriter(a,e)])});o.on("error",s),o.listen(r,"127.0.0.1",()=>{o.removeListener("error",s),i({onConnected:()=>n})})})}NB.createClientSocketTransport=EDt;function TDt(r,e="utf-8"){let t=IOe.createConnection(r,"127.0.0.1");return[new ROe.SocketMessageReader(t,e),new xOe.SocketMessageWriter(t,e)]}NB.createServerSocketTransport=TDt});var Nh=O(Hr=>{"use strict";function NOe(r){for(var e in r)Hr.hasOwnProperty(e)||(Hr[e]=r[e])}Object.defineProperty(Hr,"__esModule",{value:!0});var el=XE(),bn=fOe();Hr.RequestType=bn.RequestType;Hr.RequestType0=bn.RequestType0;Hr.RequestType1=bn.RequestType1;Hr.RequestType2=bn.RequestType2;Hr.RequestType3=bn.RequestType3;Hr.RequestType4=bn.RequestType4;Hr.RequestType5=bn.RequestType5;Hr.RequestType6=bn.RequestType6;Hr.RequestType7=bn.RequestType7;Hr.RequestType8=bn.RequestType8;Hr.RequestType9=bn.RequestType9;Hr.ResponseError=bn.ResponseError;Hr.ErrorCodes=bn.ErrorCodes;Hr.NotificationType=bn.NotificationType;Hr.NotificationType0=bn.NotificationType0;Hr.NotificationType1=bn.NotificationType1;Hr.NotificationType2=bn.NotificationType2;Hr.NotificationType3=bn.NotificationType3;Hr.NotificationType4=bn.NotificationType4;Hr.NotificationType5=bn.NotificationType5;Hr.NotificationType6=bn.NotificationType6;Hr.NotificationType7=bn.NotificationType7;Hr.NotificationType8=bn.NotificationType8;Hr.NotificationType9=bn.NotificationType9;var bD=xB();Hr.MessageReader=bD.MessageReader;Hr.StreamMessageReader=bD.StreamMessageReader;Hr.IPCMessageReader=bD.IPCMessageReader;Hr.SocketMessageReader=bD.SocketMessageReader;var _D=AB();Hr.MessageWriter=_D.MessageWriter;Hr.StreamMessageWriter=_D.StreamMessageWriter;Hr.IPCMessageWriter=_D.IPCMessageWriter;Hr.SocketMessageWriter=_D.SocketMessageWriter;var KS=pD();Hr.Disposable=KS.Disposable;Hr.Event=KS.Event;Hr.Emitter=KS.Emitter;var eT=SOe();Hr.CancellationTokenSource=eT.CancellationTokenSource;Hr.CancellationToken=eT.CancellationToken;var AOe=COe();NOe(TOe());NOe(OOe());var vD;(function(r){r.type=new bn.NotificationType("$/cancelRequest")})(vD||(vD={}));Hr.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var fa;(function(r){r[r.Off=0]="Off",r[r.Messages=1]="Messages",r[r.Verbose=2]="Verbose"})(fa=Hr.Trace||(Hr.Trace={}));(function(r){function e(n){switch(n=n.toLowerCase(),n){case"off":return r.Off;case"messages":return r.Messages;case"verbose":return r.Verbose;default:return r.Off}}r.fromString=e;function t(n){switch(n){case r.Off:return"off";case r.Messages:return"messages";case r.Verbose:return"verbose";default:return"off"}}r.toString=t})(fa=Hr.Trace||(Hr.Trace={}));var gm;(function(r){r.Text="text",r.JSON="json"})(gm=Hr.TraceFormat||(Hr.TraceFormat={}));(function(r){function e(t){return t=t.toLowerCase(),t==="json"?r.JSON:r.Text}r.fromString=e})(gm=Hr.TraceFormat||(Hr.TraceFormat={}));var DOe;(function(r){r.type=new bn.NotificationType("$/setTraceNotification")})(DOe=Hr.SetTraceNotification||(Hr.SetTraceNotification={}));var Bte;(function(r){r.type=new bn.NotificationType("$/logTraceNotification")})(Bte=Hr.LogTraceNotification||(Hr.LogTraceNotification={}));var DB;(function(r){r[r.Closed=1]="Closed",r[r.Disposed=2]="Disposed",r[r.AlreadyListening=3]="AlreadyListening"})(DB=Hr.ConnectionErrors||(Hr.ConnectionErrors={}));var tT=class r extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,r.prototype)}};Hr.ConnectionError=tT;var IDt;(function(r){function e(t){let n=t;return n&&el.func(n.cancelUndispatched)}r.is=e})(IDt=Hr.ConnectionStrategy||(Hr.ConnectionStrategy={}));var ym;(function(r){r[r.New=1]="New",r[r.Listening=2]="Listening",r[r.Closed=3]="Closed",r[r.Disposed=4]="Disposed"})(ym||(ym={}));function RDt(r,e,t,n){let i=0,s=0,o=0,a="2.0",c,l=Object.create(null),u,d=Object.create(null),p,m=new AOe.LinkedMap,f=Object.create(null),y=Object.create(null),v=fa.Off,_=gm.Text,C,P=ym.New,w=new KS.Emitter,R=new KS.Emitter,I=new KS.Emitter,z=new KS.Emitter;function G(B){return"req-"+B.toString()}function L(B){return B===null?"res-unknown-"+(++o).toString():"res-"+B.toString()}function H(){return"not-"+(++s).toString()}function ee(B,be){bn.isRequestMessage(be)?B.set(G(be.id),be):bn.isResponseMessage(be)?B.set(L(be.id),be):B.set(H(),be)}function ye(B){}function $e(){return P===ym.Listening}function Be(){return P===ym.Closed}function Ct(){return P===ym.Disposed}function Ge(){(P===ym.New||P===ym.Listening)&&(P=ym.Closed,R.fire(void 0))}function pe(B){w.fire([B,void 0,void 0])}function Ie(B){w.fire(B)}r.onClose(Ge),r.onError(pe),e.onClose(Ge),e.onError(Ie);function Ve(){p||m.size===0||(p=setImmediate(()=>{p=void 0,lt()}))}function lt(){if(m.size===0)return;let B=m.shift();try{bn.isRequestMessage(B)?ce(B):bn.isNotificationMessage(B)?Ue(B):bn.isResponseMessage(B)?ue(B):ct(B)}finally{Ve()}}let ut=B=>{try{if(bn.isNotificationMessage(B)&&B.method===vD.type.method){let be=G(B.params.id),ke=m.get(be);if(bn.isRequestMessage(ke)){let W=n&&n.cancelUndispatched?n.cancelUndispatched(ke,ye):void 0;if(W&&(W.error!==void 0||W.result!==void 0)){m.delete(be),W.id=ke.id,se(W,B.method,Date.now()),e.write(W);return}}}ee(m,B)}finally{Ve()}};function ce(B){if(Ct())return;function be(He,Xe,J){let fe={jsonrpc:a,id:B.id};He instanceof bn.ResponseError?fe.error=He.toJson():fe.result=He===void 0?null:He,se(fe,Xe,J),e.write(fe)}function ke(He,Xe,J){let fe={jsonrpc:a,id:B.id,error:He.toJson()};se(fe,Xe,J),e.write(fe)}function W(He,Xe,J){He===void 0&&(He=null);let fe={jsonrpc:a,id:B.id,result:He};se(fe,Xe,J),e.write(fe)}we(B);let Oe=l[B.method],Ht,_r;Oe&&(Ht=Oe.type,_r=Oe.handler);let fr=Date.now();if(_r||c){let He=new eT.CancellationTokenSource,Xe=String(B.id);y[Xe]=He;try{let J;B.params===void 0||Ht!==void 0&&Ht.numberOfParams===0?J=_r?_r(He.token):c(B.method,He.token):el.array(B.params)&&(Ht===void 0||Ht.numberOfParams>1)?J=_r?_r(...B.params,He.token):c(B.method,...B.params,He.token):J=_r?_r(B.params,He.token):c(B.method,B.params,He.token);let fe=J;J?fe.then?fe.then(Ke=>{delete y[Xe],be(Ke,B.method,fr)},Ke=>{delete y[Xe],Ke instanceof bn.ResponseError?ke(Ke,B.method,fr):Ke&&el.string(Ke.message)?ke(new bn.ResponseError(bn.ErrorCodes.InternalError,`Request ${B.method} failed with message: ${Ke.message}`),B.method,fr):ke(new bn.ResponseError(bn.ErrorCodes.InternalError,`Request ${B.method} failed unexpectedly without providing any details.`),B.method,fr)}):(delete y[Xe],be(J,B.method,fr)):(delete y[Xe],W(J,B.method,fr))}catch(J){delete y[Xe],J instanceof bn.ResponseError?be(J,B.method,fr):J&&el.string(J.message)?ke(new bn.ResponseError(bn.ErrorCodes.InternalError,`Request ${B.method} failed with message: ${J.message}`),B.method,fr):ke(new bn.ResponseError(bn.ErrorCodes.InternalError,`Request ${B.method} failed unexpectedly without providing any details.`),B.method,fr)}}else ke(new bn.ResponseError(bn.ErrorCodes.MethodNotFound,`Unhandled method ${B.method}`),B.method,fr)}function ue(B){if(!Ct())if(B.id===null)B.error?t.error(`Received response message without id: Error is: 
${JSON.stringify(B.error,void 0,4)}`):t.error("Received response message without id. No further error information provided.");else{let be=String(B.id),ke=f[be];if(Re(B,ke),ke){delete f[be];try{if(B.error){let W=B.error;ke.reject(new bn.ResponseError(W.code,W.message,W.data))}else if(B.result!==void 0)ke.resolve(B.result);else throw new Error("Should never happen.")}catch(W){W.message?t.error(`Response handler '${ke.method}' failed with message: ${W.message}`):t.error(`Response handler '${ke.method}' failed unexpectedly.`)}}}}function Ue(B){if(Ct())return;let be,ke;if(B.method===vD.type.method)ke=W=>{let Oe=W.id,Ht=y[String(Oe)];Ht&&Ht.cancel()};else{let W=d[B.method];W&&(ke=W.handler,be=W.type)}if(ke||u)try{Ne(B),B.params===void 0||be!==void 0&&be.numberOfParams===0?ke?ke():u(B.method):el.array(B.params)&&(be===void 0||be.numberOfParams>1)?ke?ke(...B.params):u(B.method,...B.params):ke?ke(B.params):u(B.method,B.params)}catch(W){W.message?t.error(`Notification handler '${B.method}' failed with message: ${W.message}`):t.error(`Notification handler '${B.method}' failed unexpectedly.`)}else I.fire(B)}function ct(B){if(!B){t.error("Received empty message.");return}t.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(B,null,4)}`);let be=B;if(el.string(be.id)||el.number(be.id)){let ke=String(be.id),W=f[ke];W&&W.reject(new Error("The received response has neither a result nor an error property."))}}function jt(B){if(!(v===fa.Off||!C))if(_===gm.Text){let be;v===fa.Verbose&&B.params&&(be=`Params: ${JSON.stringify(B.params,null,4)}

`),C.log(`Sending request '${B.method} - (${B.id})'.`,be)}else Le("send-request",B)}function tr(B){if(!(v===fa.Off||!C))if(_===gm.Text){let be;v===fa.Verbose&&(B.params?be=`Params: ${JSON.stringify(B.params,null,4)}

`:be=`No parameters provided.

`),C.log(`Sending notification '${B.method}'.`,be)}else Le("send-notification",B)}function se(B,be,ke){if(!(v===fa.Off||!C))if(_===gm.Text){let W;v===fa.Verbose&&(B.error&&B.error.data?W=`Error data: ${JSON.stringify(B.error.data,null,4)}

`:B.result?W=`Result: ${JSON.stringify(B.result,null,4)}

`:B.error===void 0&&(W=`No result returned.

`)),C.log(`Sending response '${be} - (${B.id})'. Processing request took ${Date.now()-ke}ms`,W)}else Le("send-response",B)}function we(B){if(!(v===fa.Off||!C))if(_===gm.Text){let be;v===fa.Verbose&&B.params&&(be=`Params: ${JSON.stringify(B.params,null,4)}

`),C.log(`Received request '${B.method} - (${B.id})'.`,be)}else Le("receive-request",B)}function Ne(B){if(!(v===fa.Off||!C||B.method===Bte.type.method))if(_===gm.Text){let be;v===fa.Verbose&&(B.params?be=`Params: ${JSON.stringify(B.params,null,4)}

`:be=`No parameters provided.

`),C.log(`Received notification '${B.method}'.`,be)}else Le("receive-notification",B)}function Re(B,be){if(!(v===fa.Off||!C))if(_===gm.Text){let ke;if(v===fa.Verbose&&(B.error&&B.error.data?ke=`Error data: ${JSON.stringify(B.error.data,null,4)}

`:B.result?ke=`Result: ${JSON.stringify(B.result,null,4)}

`:B.error===void 0&&(ke=`No result returned.

`)),be){let W=B.error?` Request failed: ${B.error.message} (${B.error.code}).`:"";C.log(`Received response '${be.method} - (${B.id})' in ${Date.now()-be.timerStart}ms.${W}`,ke)}else C.log(`Received response ${B.id} without active response promise.`,ke)}else Le("receive-response",B)}function Le(B,be){if(!C||v===fa.Off)return;let ke={isLSPMessage:!0,type:B,message:be,timestamp:Date.now()};C.log(ke)}function ht(){if(Be())throw new tT(DB.Closed,"Connection is closed.");if(Ct())throw new tT(DB.Disposed,"Connection is disposed.")}function Ee(){if($e())throw new tT(DB.AlreadyListening,"Connection is already listening")}function ie(){if(!$e())throw new Error("Call listen() first.")}function je(B){return B===void 0?null:B}function le(B,be){let ke,W=B.numberOfParams;switch(W){case 0:ke=null;break;case 1:ke=je(be[0]);break;default:ke=[];for(let Oe=0;Oe<be.length&&Oe<W;Oe++)ke.push(je(be[Oe]));if(be.length<W)for(let Oe=be.length;Oe<W;Oe++)ke.push(null);break}return ke}let _e={sendNotification:(B,...be)=>{ht();let ke,W;if(el.string(B))switch(ke=B,be.length){case 0:W=null;break;case 1:W=be[0];break;default:W=be;break}else ke=B.method,W=le(B,be);let Oe={jsonrpc:a,method:ke,params:W};tr(Oe),e.write(Oe)},onNotification:(B,be)=>{ht(),el.func(B)?u=B:be&&(el.string(B)?d[B]={type:void 0,handler:be}:d[B.method]={type:B,handler:be})},sendRequest:(B,...be)=>{ht(),ie();let ke,W,Oe;if(el.string(B))switch(ke=B,be.length){case 0:W=null;break;case 1:eT.CancellationToken.is(be[0])?(W=null,Oe=be[0]):W=je(be[0]);break;default:let fr=be.length-1;eT.CancellationToken.is(be[fr])?(Oe=be[fr],be.length===2?W=je(be[0]):W=be.slice(0,fr).map(He=>je(He))):W=be.map(He=>je(He));break}else{ke=B.method,W=le(B,be);let fr=B.numberOfParams;Oe=eT.CancellationToken.is(be[fr])?be[fr]:void 0}let Ht=i++,_r=new Promise((fr,He)=>{let Xe={jsonrpc:a,id:Ht,method:ke,params:W},J={method:ke,timerStart:Date.now(),resolve:fr,reject:He};jt(Xe);try{e.write(Xe)}catch(fe){J.reject(new bn.ResponseError(bn.ErrorCodes.MessageWriteError,fe.message?fe.message:"Unknown reason")),J=null}J&&(f[String(Ht)]=J)});return Oe&&Oe.onCancellationRequested(()=>{_e.sendNotification(vD.type,{id:Ht})}),_r},onRequest:(B,be)=>{ht(),el.func(B)?c=B:be&&(el.string(B)?l[B]={type:void 0,handler:be}:l[B.method]={type:B,handler:be})},trace:(B,be,ke)=>{let W=!1,Oe=gm.Text;ke!==void 0&&(el.boolean(ke)?W=ke:(W=ke.sendNotification||!1,Oe=ke.traceFormat||gm.Text)),v=B,_=Oe,v===fa.Off?C=void 0:C=be,W&&!Be()&&!Ct()&&_e.sendNotification(DOe.type,{value:fa.toString(B)})},onError:w.event,onClose:R.event,onUnhandledNotification:I.event,onDispose:z.event,dispose:()=>{if(Ct())return;P=ym.Disposed,z.fire(void 0);let B=new Error("Connection got disposed.");Object.keys(f).forEach(be=>{f[be].reject(B)}),f=Object.create(null),y=Object.create(null),m=new AOe.LinkedMap,el.func(e.dispose)&&e.dispose(),el.func(r.dispose)&&r.dispose()},listen:()=>{ht(),Ee(),P=ym.Listening,r.listen(ut)},inspect:()=>{console.log("inspect")}};return _e.onNotification(Bte.type,B=>{v===fa.Off||!C||C.log(B.message,v===fa.Verbose?B.verbose:void 0)}),_e}function xDt(r){return r.listen!==void 0&&r.read===void 0}function ODt(r){return r.write!==void 0&&r.end===void 0}function ADt(r,e,t,n){t||(t=Hr.NullLogger);let i=xDt(r)?r:new bD.StreamMessageReader(r),s=ODt(e)?e:new _D.StreamMessageWriter(e);return RDt(i,s,t,n)}Hr.createMessageConnection=ADt});var kOe=O((MOe,MB)=>{(function(r){if(typeof MB=="object"&&typeof MB.exports=="object"){var e=r(require,MOe);e!==void 0&&(MB.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],r)})(function(r,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t;(function(ie){function je(_e,B){return{line:_e,character:B}}ie.create=je;function le(_e){var B=_e;return Ee.objectLiteral(B)&&Ee.number(B.line)&&Ee.number(B.character)}ie.is=le})(t=e.Position||(e.Position={}));var n;(function(ie){function je(_e,B,be,ke){if(Ee.number(_e)&&Ee.number(B)&&Ee.number(be)&&Ee.number(ke))return{start:t.create(_e,B),end:t.create(be,ke)};if(t.is(_e)&&t.is(B))return{start:_e,end:B};throw new Error("Range#create called with invalid arguments["+_e+", "+B+", "+be+", "+ke+"]")}ie.create=je;function le(_e){var B=_e;return Ee.objectLiteral(B)&&t.is(B.start)&&t.is(B.end)}ie.is=le})(n=e.Range||(e.Range={}));var i;(function(ie){function je(_e,B){return{uri:_e,range:B}}ie.create=je;function le(_e){var B=_e;return Ee.defined(B)&&n.is(B.range)&&(Ee.string(B.uri)||Ee.undefined(B.uri))}ie.is=le})(i=e.Location||(e.Location={}));var s;(function(ie){function je(_e,B,be,ke){return{targetUri:_e,targetRange:B,targetSelectionRange:be,originSelectionRange:ke}}ie.create=je;function le(_e){var B=_e;return Ee.defined(B)&&n.is(B.targetRange)&&Ee.string(B.targetUri)&&(n.is(B.targetSelectionRange)||Ee.undefined(B.targetSelectionRange))&&(n.is(B.originSelectionRange)||Ee.undefined(B.originSelectionRange))}ie.is=le})(s=e.LocationLink||(e.LocationLink={}));var o;(function(ie){function je(_e,B,be,ke){return{red:_e,green:B,blue:be,alpha:ke}}ie.create=je;function le(_e){var B=_e;return Ee.number(B.red)&&Ee.number(B.green)&&Ee.number(B.blue)&&Ee.number(B.alpha)}ie.is=le})(o=e.Color||(e.Color={}));var a;(function(ie){function je(_e,B){return{range:_e,color:B}}ie.create=je;function le(_e){var B=_e;return n.is(B.range)&&o.is(B.color)}ie.is=le})(a=e.ColorInformation||(e.ColorInformation={}));var c;(function(ie){function je(_e,B,be){return{label:_e,textEdit:B,additionalTextEdits:be}}ie.create=je;function le(_e){var B=_e;return Ee.string(B.label)&&(Ee.undefined(B.textEdit)||y.is(B))&&(Ee.undefined(B.additionalTextEdits)||Ee.typedArray(B.additionalTextEdits,y.is))}ie.is=le})(c=e.ColorPresentation||(e.ColorPresentation={}));var l;(function(ie){ie.Comment="comment",ie.Imports="imports",ie.Region="region"})(l=e.FoldingRangeKind||(e.FoldingRangeKind={}));var u;(function(ie){function je(_e,B,be,ke,W){var Oe={startLine:_e,endLine:B};return Ee.defined(be)&&(Oe.startCharacter=be),Ee.defined(ke)&&(Oe.endCharacter=ke),Ee.defined(W)&&(Oe.kind=W),Oe}ie.create=je;function le(_e){var B=_e;return Ee.number(B.startLine)&&Ee.number(B.startLine)&&(Ee.undefined(B.startCharacter)||Ee.number(B.startCharacter))&&(Ee.undefined(B.endCharacter)||Ee.number(B.endCharacter))&&(Ee.undefined(B.kind)||Ee.string(B.kind))}ie.is=le})(u=e.FoldingRange||(e.FoldingRange={}));var d;(function(ie){function je(_e,B){return{location:_e,message:B}}ie.create=je;function le(_e){var B=_e;return Ee.defined(B)&&i.is(B.location)&&Ee.string(B.message)}ie.is=le})(d=e.DiagnosticRelatedInformation||(e.DiagnosticRelatedInformation={}));var p;(function(ie){ie.Error=1,ie.Warning=2,ie.Information=3,ie.Hint=4})(p=e.DiagnosticSeverity||(e.DiagnosticSeverity={}));var m;(function(ie){function je(_e,B,be,ke,W,Oe){var Ht={range:_e,message:B};return Ee.defined(be)&&(Ht.severity=be),Ee.defined(ke)&&(Ht.code=ke),Ee.defined(W)&&(Ht.source=W),Ee.defined(Oe)&&(Ht.relatedInformation=Oe),Ht}ie.create=je;function le(_e){var B=_e;return Ee.defined(B)&&n.is(B.range)&&Ee.string(B.message)&&(Ee.number(B.severity)||Ee.undefined(B.severity))&&(Ee.number(B.code)||Ee.string(B.code)||Ee.undefined(B.code))&&(Ee.string(B.source)||Ee.undefined(B.source))&&(Ee.undefined(B.relatedInformation)||Ee.typedArray(B.relatedInformation,d.is))}ie.is=le})(m=e.Diagnostic||(e.Diagnostic={}));var f;(function(ie){function je(_e,B){for(var be=[],ke=2;ke<arguments.length;ke++)be[ke-2]=arguments[ke];var W={title:_e,command:B};return Ee.defined(be)&&be.length>0&&(W.arguments=be),W}ie.create=je;function le(_e){var B=_e;return Ee.defined(B)&&Ee.string(B.title)&&Ee.string(B.command)}ie.is=le})(f=e.Command||(e.Command={}));var y;(function(ie){function je(be,ke){return{range:be,newText:ke}}ie.replace=je;function le(be,ke){return{range:{start:be,end:be},newText:ke}}ie.insert=le;function _e(be){return{range:be,newText:""}}ie.del=_e;function B(be){var ke=be;return Ee.objectLiteral(ke)&&Ee.string(ke.newText)&&n.is(ke.range)}ie.is=B})(y=e.TextEdit||(e.TextEdit={}));var v;(function(ie){function je(_e,B){return{textDocument:_e,edits:B}}ie.create=je;function le(_e){var B=_e;return Ee.defined(B)&&G.is(B.textDocument)&&Array.isArray(B.edits)}ie.is=le})(v=e.TextDocumentEdit||(e.TextDocumentEdit={}));var _;(function(ie){function je(_e,B){var be={kind:"create",uri:_e};return B!==void 0&&(B.overwrite!==void 0||B.ignoreIfExists!==void 0)&&(be.options=B),be}ie.create=je;function le(_e){var B=_e;return B&&B.kind==="create"&&Ee.string(B.uri)&&(B.options===void 0||(B.options.overwrite===void 0||Ee.boolean(B.options.overwrite))&&(B.options.ignoreIfExists===void 0||Ee.boolean(B.options.ignoreIfExists)))}ie.is=le})(_=e.CreateFile||(e.CreateFile={}));var C;(function(ie){function je(_e,B,be){var ke={kind:"rename",oldUri:_e,newUri:B};return be!==void 0&&(be.overwrite!==void 0||be.ignoreIfExists!==void 0)&&(ke.options=be),ke}ie.create=je;function le(_e){var B=_e;return B&&B.kind==="rename"&&Ee.string(B.oldUri)&&Ee.string(B.newUri)&&(B.options===void 0||(B.options.overwrite===void 0||Ee.boolean(B.options.overwrite))&&(B.options.ignoreIfExists===void 0||Ee.boolean(B.options.ignoreIfExists)))}ie.is=le})(C=e.RenameFile||(e.RenameFile={}));var P;(function(ie){function je(_e,B){var be={kind:"delete",uri:_e};return B!==void 0&&(B.recursive!==void 0||B.ignoreIfNotExists!==void 0)&&(be.options=B),be}ie.create=je;function le(_e){var B=_e;return B&&B.kind==="delete"&&Ee.string(B.uri)&&(B.options===void 0||(B.options.recursive===void 0||Ee.boolean(B.options.recursive))&&(B.options.ignoreIfNotExists===void 0||Ee.boolean(B.options.ignoreIfNotExists)))}ie.is=le})(P=e.DeleteFile||(e.DeleteFile={}));var w;(function(ie){function je(le){var _e=le;return _e&&(_e.changes!==void 0||_e.documentChanges!==void 0)&&(_e.documentChanges===void 0||_e.documentChanges.every(function(B){return Ee.string(B.kind)?_.is(B)||C.is(B)||P.is(B):v.is(B)}))}ie.is=je})(w=e.WorkspaceEdit||(e.WorkspaceEdit={}));var R=function(){function ie(je){this.edits=je}return ie.prototype.insert=function(je,le){this.edits.push(y.insert(je,le))},ie.prototype.replace=function(je,le){this.edits.push(y.replace(je,le))},ie.prototype.delete=function(je){this.edits.push(y.del(je))},ie.prototype.add=function(je){this.edits.push(je)},ie.prototype.all=function(){return this.edits},ie.prototype.clear=function(){this.edits.splice(0,this.edits.length)},ie}(),I=function(){function ie(je){var le=this;this._textEditChanges=Object.create(null),je&&(this._workspaceEdit=je,je.documentChanges?je.documentChanges.forEach(function(_e){if(v.is(_e)){var B=new R(_e.edits);le._textEditChanges[_e.textDocument.uri]=B}}):je.changes&&Object.keys(je.changes).forEach(function(_e){var B=new R(je.changes[_e]);le._textEditChanges[_e]=B}))}return Object.defineProperty(ie.prototype,"edit",{get:function(){return this._workspaceEdit},enumerable:!0,configurable:!0}),ie.prototype.getTextEditChange=function(je){if(G.is(je)){if(this._workspaceEdit||(this._workspaceEdit={documentChanges:[]}),!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var le=je,_e=this._textEditChanges[le.uri];if(!_e){var B=[],be={textDocument:le,edits:B};this._workspaceEdit.documentChanges.push(be),_e=new R(B),this._textEditChanges[le.uri]=_e}return _e}else{if(this._workspaceEdit||(this._workspaceEdit={changes:Object.create(null)}),!this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var _e=this._textEditChanges[je];if(!_e){var B=[];this._workspaceEdit.changes[je]=B,_e=new R(B),this._textEditChanges[je]=_e}return _e}},ie.prototype.createFile=function(je,le){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(_.create(je,le))},ie.prototype.renameFile=function(je,le,_e){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(C.create(je,le,_e))},ie.prototype.deleteFile=function(je,le){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(P.create(je,le))},ie.prototype.checkDocumentChanges=function(){if(!this._workspaceEdit||!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.")},ie}();e.WorkspaceChange=I;var z;(function(ie){function je(_e){return{uri:_e}}ie.create=je;function le(_e){var B=_e;return Ee.defined(B)&&Ee.string(B.uri)}ie.is=le})(z=e.TextDocumentIdentifier||(e.TextDocumentIdentifier={}));var G;(function(ie){function je(_e,B){return{uri:_e,version:B}}ie.create=je;function le(_e){var B=_e;return Ee.defined(B)&&Ee.string(B.uri)&&(B.version===null||Ee.number(B.version))}ie.is=le})(G=e.VersionedTextDocumentIdentifier||(e.VersionedTextDocumentIdentifier={}));var L;(function(ie){function je(_e,B,be,ke){return{uri:_e,languageId:B,version:be,text:ke}}ie.create=je;function le(_e){var B=_e;return Ee.defined(B)&&Ee.string(B.uri)&&Ee.string(B.languageId)&&Ee.number(B.version)&&Ee.string(B.text)}ie.is=le})(L=e.TextDocumentItem||(e.TextDocumentItem={}));var H;(function(ie){ie.PlainText="plaintext",ie.Markdown="markdown"})(H=e.MarkupKind||(e.MarkupKind={})),function(ie){function je(le){var _e=le;return _e===ie.PlainText||_e===ie.Markdown}ie.is=je}(H=e.MarkupKind||(e.MarkupKind={}));var ee;(function(ie){function je(le){var _e=le;return Ee.objectLiteral(le)&&H.is(_e.kind)&&Ee.string(_e.value)}ie.is=je})(ee=e.MarkupContent||(e.MarkupContent={}));var ye;(function(ie){ie.Text=1,ie.Method=2,ie.Function=3,ie.Constructor=4,ie.Field=5,ie.Variable=6,ie.Class=7,ie.Interface=8,ie.Module=9,ie.Property=10,ie.Unit=11,ie.Value=12,ie.Enum=13,ie.Keyword=14,ie.Snippet=15,ie.Color=16,ie.File=17,ie.Reference=18,ie.Folder=19,ie.EnumMember=20,ie.Constant=21,ie.Struct=22,ie.Event=23,ie.Operator=24,ie.TypeParameter=25})(ye=e.CompletionItemKind||(e.CompletionItemKind={}));var $e;(function(ie){ie.PlainText=1,ie.Snippet=2})($e=e.InsertTextFormat||(e.InsertTextFormat={}));var Be;(function(ie){function je(le){return{label:le}}ie.create=je})(Be=e.CompletionItem||(e.CompletionItem={}));var Ct;(function(ie){function je(le,_e){return{items:le||[],isIncomplete:!!_e}}ie.create=je})(Ct=e.CompletionList||(e.CompletionList={}));var Ge;(function(ie){function je(_e){return _e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}ie.fromPlainText=je;function le(_e){var B=_e;return Ee.string(B)||Ee.objectLiteral(B)&&Ee.string(B.language)&&Ee.string(B.value)}ie.is=le})(Ge=e.MarkedString||(e.MarkedString={}));var pe;(function(ie){function je(le){var _e=le;return!!_e&&Ee.objectLiteral(_e)&&(ee.is(_e.contents)||Ge.is(_e.contents)||Ee.typedArray(_e.contents,Ge.is))&&(le.range===void 0||n.is(le.range))}ie.is=je})(pe=e.Hover||(e.Hover={}));var Ie;(function(ie){function je(le,_e){return _e?{label:le,documentation:_e}:{label:le}}ie.create=je})(Ie=e.ParameterInformation||(e.ParameterInformation={}));var Ve;(function(ie){function je(le,_e){for(var B=[],be=2;be<arguments.length;be++)B[be-2]=arguments[be];var ke={label:le};return Ee.defined(_e)&&(ke.documentation=_e),Ee.defined(B)?ke.parameters=B:ke.parameters=[],ke}ie.create=je})(Ve=e.SignatureInformation||(e.SignatureInformation={}));var lt;(function(ie){ie.Text=1,ie.Read=2,ie.Write=3})(lt=e.DocumentHighlightKind||(e.DocumentHighlightKind={}));var ut;(function(ie){function je(le,_e){var B={range:le};return Ee.number(_e)&&(B.kind=_e),B}ie.create=je})(ut=e.DocumentHighlight||(e.DocumentHighlight={}));var ce;(function(ie){ie.File=1,ie.Module=2,ie.Namespace=3,ie.Package=4,ie.Class=5,ie.Method=6,ie.Property=7,ie.Field=8,ie.Constructor=9,ie.Enum=10,ie.Interface=11,ie.Function=12,ie.Variable=13,ie.Constant=14,ie.String=15,ie.Number=16,ie.Boolean=17,ie.Array=18,ie.Object=19,ie.Key=20,ie.Null=21,ie.EnumMember=22,ie.Struct=23,ie.Event=24,ie.Operator=25,ie.TypeParameter=26})(ce=e.SymbolKind||(e.SymbolKind={}));var ue;(function(ie){function je(le,_e,B,be,ke){var W={name:le,kind:_e,location:{uri:be,range:B}};return ke&&(W.containerName=ke),W}ie.create=je})(ue=e.SymbolInformation||(e.SymbolInformation={}));var Ue=function(){function ie(){}return ie}();e.DocumentSymbol=Ue,function(ie){function je(_e,B,be,ke,W,Oe){var Ht={name:_e,detail:B,kind:be,range:ke,selectionRange:W};return Oe!==void 0&&(Ht.children=Oe),Ht}ie.create=je;function le(_e){var B=_e;return B&&Ee.string(B.name)&&Ee.number(B.kind)&&n.is(B.range)&&n.is(B.selectionRange)&&(B.detail===void 0||Ee.string(B.detail))&&(B.deprecated===void 0||Ee.boolean(B.deprecated))&&(B.children===void 0||Array.isArray(B.children))}ie.is=le}(Ue=e.DocumentSymbol||(e.DocumentSymbol={})),e.DocumentSymbol=Ue;var ct;(function(ie){ie.QuickFix="quickfix",ie.Refactor="refactor",ie.RefactorExtract="refactor.extract",ie.RefactorInline="refactor.inline",ie.RefactorRewrite="refactor.rewrite",ie.Source="source",ie.SourceOrganizeImports="source.organizeImports"})(ct=e.CodeActionKind||(e.CodeActionKind={}));var jt;(function(ie){function je(_e,B){var be={diagnostics:_e};return B!=null&&(be.only=B),be}ie.create=je;function le(_e){var B=_e;return Ee.defined(B)&&Ee.typedArray(B.diagnostics,m.is)&&(B.only===void 0||Ee.typedArray(B.only,Ee.string))}ie.is=le})(jt=e.CodeActionContext||(e.CodeActionContext={}));var tr;(function(ie){function je(_e,B,be){var ke={title:_e};return f.is(B)?ke.command=B:ke.edit=B,be!==void 0&&(ke.kind=be),ke}ie.create=je;function le(_e){var B=_e;return B&&Ee.string(B.title)&&(B.diagnostics===void 0||Ee.typedArray(B.diagnostics,m.is))&&(B.kind===void 0||Ee.string(B.kind))&&(B.edit!==void 0||B.command!==void 0)&&(B.command===void 0||f.is(B.command))&&(B.edit===void 0||w.is(B.edit))}ie.is=le})(tr=e.CodeAction||(e.CodeAction={}));var se;(function(ie){function je(_e,B){var be={range:_e};return Ee.defined(B)&&(be.data=B),be}ie.create=je;function le(_e){var B=_e;return Ee.defined(B)&&n.is(B.range)&&(Ee.undefined(B.command)||f.is(B.command))}ie.is=le})(se=e.CodeLens||(e.CodeLens={}));var we;(function(ie){function je(_e,B){return{tabSize:_e,insertSpaces:B}}ie.create=je;function le(_e){var B=_e;return Ee.defined(B)&&Ee.number(B.tabSize)&&Ee.boolean(B.insertSpaces)}ie.is=le})(we=e.FormattingOptions||(e.FormattingOptions={}));var Ne=function(){function ie(){}return ie}();e.DocumentLink=Ne,function(ie){function je(_e,B,be){return{range:_e,target:B,data:be}}ie.create=je;function le(_e){var B=_e;return Ee.defined(B)&&n.is(B.range)&&(Ee.undefined(B.target)||Ee.string(B.target))}ie.is=le}(Ne=e.DocumentLink||(e.DocumentLink={})),e.DocumentLink=Ne,e.EOL=[`
`,`\r
`,"\r"];var Re;(function(ie){function je(be,ke,W,Oe){return new ht(be,ke,W,Oe)}ie.create=je;function le(be){var ke=be;return!!(Ee.defined(ke)&&Ee.string(ke.uri)&&(Ee.undefined(ke.languageId)||Ee.string(ke.languageId))&&Ee.number(ke.lineCount)&&Ee.func(ke.getText)&&Ee.func(ke.positionAt)&&Ee.func(ke.offsetAt))}ie.is=le;function _e(be,ke){for(var W=be.getText(),Oe=B(ke,function(J,fe){var Ke=J.range.start.line-fe.range.start.line;return Ke===0?J.range.start.character-fe.range.start.character:Ke}),Ht=W.length,_r=Oe.length-1;_r>=0;_r--){var fr=Oe[_r],He=be.offsetAt(fr.range.start),Xe=be.offsetAt(fr.range.end);if(Xe<=Ht)W=W.substring(0,He)+fr.newText+W.substring(Xe,W.length);else throw new Error("Overlapping edit");Ht=He}return W}ie.applyEdits=_e;function B(be,ke){if(be.length<=1)return be;var W=be.length/2|0,Oe=be.slice(0,W),Ht=be.slice(W);B(Oe,ke),B(Ht,ke);for(var _r=0,fr=0,He=0;_r<Oe.length&&fr<Ht.length;){var Xe=ke(Oe[_r],Ht[fr]);Xe<=0?be[He++]=Oe[_r++]:be[He++]=Ht[fr++]}for(;_r<Oe.length;)be[He++]=Oe[_r++];for(;fr<Ht.length;)be[He++]=Ht[fr++];return be}})(Re=e.TextDocument||(e.TextDocument={}));var Le;(function(ie){ie.Manual=1,ie.AfterDelay=2,ie.FocusOut=3})(Le=e.TextDocumentSaveReason||(e.TextDocumentSaveReason={}));var ht=function(){function ie(je,le,_e,B){this._uri=je,this._languageId=le,this._version=_e,this._content=B,this._lineOffsets=null}return Object.defineProperty(ie.prototype,"uri",{get:function(){return this._uri},enumerable:!0,configurable:!0}),Object.defineProperty(ie.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(ie.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),ie.prototype.getText=function(je){if(je){var le=this.offsetAt(je.start),_e=this.offsetAt(je.end);return this._content.substring(le,_e)}return this._content},ie.prototype.update=function(je,le){this._content=je.text,this._version=le,this._lineOffsets=null},ie.prototype.getLineOffsets=function(){if(this._lineOffsets===null){for(var je=[],le=this._content,_e=!0,B=0;B<le.length;B++){_e&&(je.push(B),_e=!1);var be=le.charAt(B);_e=be==="\r"||be===`
`,be==="\r"&&B+1<le.length&&le.charAt(B+1)===`
`&&B++}_e&&le.length>0&&je.push(le.length),this._lineOffsets=je}return this._lineOffsets},ie.prototype.positionAt=function(je){je=Math.max(Math.min(je,this._content.length),0);var le=this.getLineOffsets(),_e=0,B=le.length;if(B===0)return t.create(0,je);for(;_e<B;){var be=Math.floor((_e+B)/2);le[be]>je?B=be:_e=be+1}var ke=_e-1;return t.create(ke,je-le[ke])},ie.prototype.offsetAt=function(je){var le=this.getLineOffsets();if(je.line>=le.length)return this._content.length;if(je.line<0)return 0;var _e=le[je.line],B=je.line+1<le.length?le[je.line+1]:this._content.length;return Math.max(Math.min(_e+je.character,B),_e)},Object.defineProperty(ie.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!0,configurable:!0}),ie}(),Ee;(function(ie){var je=Object.prototype.toString;function le(_r){return typeof _r<"u"}ie.defined=le;function _e(_r){return typeof _r>"u"}ie.undefined=_e;function B(_r){return _r===!0||_r===!1}ie.boolean=B;function be(_r){return je.call(_r)==="[object String]"}ie.string=be;function ke(_r){return je.call(_r)==="[object Number]"}ie.number=ke;function W(_r){return je.call(_r)==="[object Function]"}ie.func=W;function Oe(_r){return _r!==null&&typeof _r=="object"}ie.objectLiteral=Oe;function Ht(_r,fr){return Array.isArray(_r)&&_r.every(fr)}ie.typedArray=Ht})(Ee||(Ee={}))})});var FOe=O(vm=>{"use strict";Object.defineProperty(vm,"__esModule",{value:!0});function NDt(r){return r===!0||r===!1}vm.boolean=NDt;function LOe(r){return typeof r=="string"||r instanceof String}vm.string=LOe;function DDt(r){return typeof r=="number"||r instanceof Number}vm.number=DDt;function MDt(r){return r instanceof Error}vm.error=MDt;function qOe(r){return typeof r=="function"}vm.func=qOe;function zOe(r){return Array.isArray(r)}vm.array=zOe;function kDt(r){return zOe(r)&&r.every(e=>LOe(e))}vm.stringArray=kDt;function LDt(r,e){return Array.isArray(r)&&r.every(e)}vm.typedArray=LDt;function qDt(r){return r&&qOe(r.then)}vm.thenable=qDt});var jOe=O(kB=>{"use strict";Object.defineProperty(kB,"__esModule",{value:!0});var zDt=Nh(),FDt;(function(r){r.type=new zDt.RequestType("textDocument/implementation")})(FDt=kB.ImplementationRequest||(kB.ImplementationRequest={}))});var UOe=O(LB=>{"use strict";Object.defineProperty(LB,"__esModule",{value:!0});var jDt=Nh(),UDt;(function(r){r.type=new jDt.RequestType("textDocument/typeDefinition")})(UDt=LB.TypeDefinitionRequest||(LB.TypeDefinitionRequest={}))});var GOe=O(rT=>{"use strict";Object.defineProperty(rT,"__esModule",{value:!0});var BOe=Nh(),BDt;(function(r){r.type=new BOe.RequestType0("workspace/workspaceFolders")})(BDt=rT.WorkspaceFoldersRequest||(rT.WorkspaceFoldersRequest={}));var GDt;(function(r){r.type=new BOe.NotificationType("workspace/didChangeWorkspaceFolders")})(GDt=rT.DidChangeWorkspaceFoldersNotification||(rT.DidChangeWorkspaceFoldersNotification={}))});var $Oe=O(qB=>{"use strict";Object.defineProperty(qB,"__esModule",{value:!0});var $Dt=Nh(),VDt;(function(r){r.type=new $Dt.RequestType("workspace/configuration")})(VDt=qB.ConfigurationRequest||(qB.ConfigurationRequest={}))});var HOe=O(nT=>{"use strict";Object.defineProperty(nT,"__esModule",{value:!0});var VOe=Nh(),HDt;(function(r){r.type=new VOe.RequestType("textDocument/documentColor")})(HDt=nT.DocumentColorRequest||(nT.DocumentColorRequest={}));var WDt;(function(r){r.type=new VOe.RequestType("textDocument/colorPresentation")})(WDt=nT.ColorPresentationRequest||(nT.ColorPresentationRequest={}))});var WOe=O(iT=>{"use strict";Object.defineProperty(iT,"__esModule",{value:!0});var KDt=Nh(),QDt;(function(r){r.Comment="comment",r.Imports="imports",r.Region="region"})(QDt=iT.FoldingRangeKind||(iT.FoldingRangeKind={}));var YDt;(function(r){r.type=new KDt.RequestType("textDocument/foldingRange")})(YDt=iT.FoldingRangeRequest||(iT.FoldingRangeRequest={}))});var KOe=O(zB=>{"use strict";Object.defineProperty(zB,"__esModule",{value:!0});var XDt=Nh(),JDt;(function(r){r.type=new XDt.RequestType("textDocument/declaration")})(JDt=zB.DeclarationRequest||(zB.DeclarationRequest={}))});var XOe=O(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});var Gte=FOe(),Jn=Nh(),ZDt=jOe();qt.ImplementationRequest=ZDt.ImplementationRequest;var eMt=UOe();qt.TypeDefinitionRequest=eMt.TypeDefinitionRequest;var QOe=GOe();qt.WorkspaceFoldersRequest=QOe.WorkspaceFoldersRequest;qt.DidChangeWorkspaceFoldersNotification=QOe.DidChangeWorkspaceFoldersNotification;var tMt=$Oe();qt.ConfigurationRequest=tMt.ConfigurationRequest;var YOe=HOe();qt.DocumentColorRequest=YOe.DocumentColorRequest;qt.ColorPresentationRequest=YOe.ColorPresentationRequest;var rMt=WOe();qt.FoldingRangeRequest=rMt.FoldingRangeRequest;var nMt=KOe();qt.DeclarationRequest=nMt.DeclarationRequest;var iMt;(function(r){function e(t){let n=t;return Gte.string(n.language)||Gte.string(n.scheme)||Gte.string(n.pattern)}r.is=e})(iMt=qt.DocumentFilter||(qt.DocumentFilter={}));var sMt;(function(r){r.type=new Jn.RequestType("client/registerCapability")})(sMt=qt.RegistrationRequest||(qt.RegistrationRequest={}));var oMt;(function(r){r.type=new Jn.RequestType("client/unregisterCapability")})(oMt=qt.UnregistrationRequest||(qt.UnregistrationRequest={}));var aMt;(function(r){r.Create="create",r.Rename="rename",r.Delete="delete"})(aMt=qt.ResourceOperationKind||(qt.ResourceOperationKind={}));var cMt;(function(r){r.Abort="abort",r.Transactional="transactional",r.TextOnlyTransactional="textOnlyTransactional",r.Undo="undo"})(cMt=qt.FailureHandlingKind||(qt.FailureHandlingKind={}));var lMt;(function(r){r.None=0,r.Full=1,r.Incremental=2})(lMt=qt.TextDocumentSyncKind||(qt.TextDocumentSyncKind={}));var uMt;(function(r){r.type=new Jn.RequestType("initialize")})(uMt=qt.InitializeRequest||(qt.InitializeRequest={}));var dMt;(function(r){r.unknownProtocolVersion=1})(dMt=qt.InitializeError||(qt.InitializeError={}));var pMt;(function(r){r.type=new Jn.NotificationType("initialized")})(pMt=qt.InitializedNotification||(qt.InitializedNotification={}));var mMt;(function(r){r.type=new Jn.RequestType0("shutdown")})(mMt=qt.ShutdownRequest||(qt.ShutdownRequest={}));var hMt;(function(r){r.type=new Jn.NotificationType0("exit")})(hMt=qt.ExitNotification||(qt.ExitNotification={}));var fMt;(function(r){r.type=new Jn.NotificationType("workspace/didChangeConfiguration")})(fMt=qt.DidChangeConfigurationNotification||(qt.DidChangeConfigurationNotification={}));var gMt;(function(r){r.Error=1,r.Warning=2,r.Info=3,r.Log=4})(gMt=qt.MessageType||(qt.MessageType={}));var yMt;(function(r){r.type=new Jn.NotificationType("window/showMessage")})(yMt=qt.ShowMessageNotification||(qt.ShowMessageNotification={}));var vMt;(function(r){r.type=new Jn.RequestType("window/showMessageRequest")})(vMt=qt.ShowMessageRequest||(qt.ShowMessageRequest={}));var bMt;(function(r){r.type=new Jn.NotificationType("window/logMessage")})(bMt=qt.LogMessageNotification||(qt.LogMessageNotification={}));var _Mt;(function(r){r.type=new Jn.NotificationType("telemetry/event")})(_Mt=qt.TelemetryEventNotification||(qt.TelemetryEventNotification={}));var SMt;(function(r){r.type=new Jn.NotificationType("textDocument/didOpen")})(SMt=qt.DidOpenTextDocumentNotification||(qt.DidOpenTextDocumentNotification={}));var CMt;(function(r){r.type=new Jn.NotificationType("textDocument/didChange")})(CMt=qt.DidChangeTextDocumentNotification||(qt.DidChangeTextDocumentNotification={}));var PMt;(function(r){r.type=new Jn.NotificationType("textDocument/didClose")})(PMt=qt.DidCloseTextDocumentNotification||(qt.DidCloseTextDocumentNotification={}));var wMt;(function(r){r.type=new Jn.NotificationType("textDocument/didSave")})(wMt=qt.DidSaveTextDocumentNotification||(qt.DidSaveTextDocumentNotification={}));var EMt;(function(r){r.type=new Jn.NotificationType("textDocument/willSave")})(EMt=qt.WillSaveTextDocumentNotification||(qt.WillSaveTextDocumentNotification={}));var TMt;(function(r){r.type=new Jn.RequestType("textDocument/willSaveWaitUntil")})(TMt=qt.WillSaveTextDocumentWaitUntilRequest||(qt.WillSaveTextDocumentWaitUntilRequest={}));var IMt;(function(r){r.type=new Jn.NotificationType("workspace/didChangeWatchedFiles")})(IMt=qt.DidChangeWatchedFilesNotification||(qt.DidChangeWatchedFilesNotification={}));var RMt;(function(r){r.Created=1,r.Changed=2,r.Deleted=3})(RMt=qt.FileChangeType||(qt.FileChangeType={}));var xMt;(function(r){r.Create=1,r.Change=2,r.Delete=4})(xMt=qt.WatchKind||(qt.WatchKind={}));var OMt;(function(r){r.type=new Jn.NotificationType("textDocument/publishDiagnostics")})(OMt=qt.PublishDiagnosticsNotification||(qt.PublishDiagnosticsNotification={}));var AMt;(function(r){r.Invoked=1,r.TriggerCharacter=2,r.TriggerForIncompleteCompletions=3})(AMt=qt.CompletionTriggerKind||(qt.CompletionTriggerKind={}));var NMt;(function(r){r.type=new Jn.RequestType("textDocument/completion")})(NMt=qt.CompletionRequest||(qt.CompletionRequest={}));var DMt;(function(r){r.type=new Jn.RequestType("completionItem/resolve")})(DMt=qt.CompletionResolveRequest||(qt.CompletionResolveRequest={}));var MMt;(function(r){r.type=new Jn.RequestType("textDocument/hover")})(MMt=qt.HoverRequest||(qt.HoverRequest={}));var kMt;(function(r){r.type=new Jn.RequestType("textDocument/signatureHelp")})(kMt=qt.SignatureHelpRequest||(qt.SignatureHelpRequest={}));var LMt;(function(r){r.type=new Jn.RequestType("textDocument/definition")})(LMt=qt.DefinitionRequest||(qt.DefinitionRequest={}));var qMt;(function(r){r.type=new Jn.RequestType("textDocument/references")})(qMt=qt.ReferencesRequest||(qt.ReferencesRequest={}));var zMt;(function(r){r.type=new Jn.RequestType("textDocument/documentHighlight")})(zMt=qt.DocumentHighlightRequest||(qt.DocumentHighlightRequest={}));var FMt;(function(r){r.type=new Jn.RequestType("textDocument/documentSymbol")})(FMt=qt.DocumentSymbolRequest||(qt.DocumentSymbolRequest={}));var jMt;(function(r){r.type=new Jn.RequestType("workspace/symbol")})(jMt=qt.WorkspaceSymbolRequest||(qt.WorkspaceSymbolRequest={}));var UMt;(function(r){r.type=new Jn.RequestType("textDocument/codeAction")})(UMt=qt.CodeActionRequest||(qt.CodeActionRequest={}));var BMt;(function(r){r.type=new Jn.RequestType("textDocument/codeLens")})(BMt=qt.CodeLensRequest||(qt.CodeLensRequest={}));var GMt;(function(r){r.type=new Jn.RequestType("codeLens/resolve")})(GMt=qt.CodeLensResolveRequest||(qt.CodeLensResolveRequest={}));var $Mt;(function(r){r.type=new Jn.RequestType("textDocument/formatting")})($Mt=qt.DocumentFormattingRequest||(qt.DocumentFormattingRequest={}));var VMt;(function(r){r.type=new Jn.RequestType("textDocument/rangeFormatting")})(VMt=qt.DocumentRangeFormattingRequest||(qt.DocumentRangeFormattingRequest={}));var HMt;(function(r){r.type=new Jn.RequestType("textDocument/onTypeFormatting")})(HMt=qt.DocumentOnTypeFormattingRequest||(qt.DocumentOnTypeFormattingRequest={}));var WMt;(function(r){r.type=new Jn.RequestType("textDocument/rename")})(WMt=qt.RenameRequest||(qt.RenameRequest={}));var KMt;(function(r){r.type=new Jn.RequestType("textDocument/prepareRename")})(KMt=qt.PrepareRenameRequest||(qt.PrepareRenameRequest={}));var QMt;(function(r){r.type=new Jn.RequestType("textDocument/documentLink")})(QMt=qt.DocumentLinkRequest||(qt.DocumentLinkRequest={}));var YMt;(function(r){r.type=new Jn.RequestType("documentLink/resolve")})(YMt=qt.DocumentLinkResolveRequest||(qt.DocumentLinkResolveRequest={}));var XMt;(function(r){r.type=new Jn.RequestType("workspace/executeCommand")})(XMt=qt.ExecuteCommandRequest||(qt.ExecuteCommandRequest={}));var JMt;(function(r){r.type=new Jn.RequestType("workspace/applyEdit")})(JMt=qt.ApplyWorkspaceEditRequest||(qt.ApplyWorkspaceEditRequest={}))});var Ku=O(ki=>{"use strict";function JOe(r){for(var e in r)ki.hasOwnProperty(e)||(ki[e]=r[e])}Object.defineProperty(ki,"__esModule",{value:!0});var Ss=Nh();ki.ErrorCodes=Ss.ErrorCodes;ki.ResponseError=Ss.ResponseError;ki.CancellationToken=Ss.CancellationToken;ki.CancellationTokenSource=Ss.CancellationTokenSource;ki.Disposable=Ss.Disposable;ki.Event=Ss.Event;ki.Emitter=Ss.Emitter;ki.Trace=Ss.Trace;ki.TraceFormat=Ss.TraceFormat;ki.SetTraceNotification=Ss.SetTraceNotification;ki.LogTraceNotification=Ss.LogTraceNotification;ki.RequestType=Ss.RequestType;ki.RequestType0=Ss.RequestType0;ki.NotificationType=Ss.NotificationType;ki.NotificationType0=Ss.NotificationType0;ki.MessageReader=Ss.MessageReader;ki.MessageWriter=Ss.MessageWriter;ki.ConnectionStrategy=Ss.ConnectionStrategy;ki.StreamMessageReader=Ss.StreamMessageReader;ki.StreamMessageWriter=Ss.StreamMessageWriter;ki.IPCMessageReader=Ss.IPCMessageReader;ki.IPCMessageWriter=Ss.IPCMessageWriter;ki.createClientPipeTransport=Ss.createClientPipeTransport;ki.createServerPipeTransport=Ss.createServerPipeTransport;ki.generateRandomPipeName=Ss.generateRandomPipeName;ki.createClientSocketTransport=Ss.createClientSocketTransport;ki.createServerSocketTransport=Ss.createServerSocketTransport;JOe(kOe());JOe(XOe());function ZMt(r,e,t,n){return Ss.createMessageConnection(r,e,t,n)}ki.createProtocolConnection=ZMt});var Dh=O(bm=>{"use strict";Object.defineProperty(bm,"__esModule",{value:!0});function ekt(r){return r===!0||r===!1}bm.boolean=ekt;function ZOe(r){return typeof r=="string"||r instanceof String}bm.string=ZOe;function tkt(r){return typeof r=="number"||r instanceof Number}bm.number=tkt;function rkt(r){return r instanceof Error}bm.error=rkt;function eAe(r){return typeof r=="function"}bm.func=eAe;function tAe(r){return Array.isArray(r)}bm.array=tAe;function nkt(r){return tAe(r)&&r.every(e=>ZOe(e))}bm.stringArray=nkt;function ikt(r,e){return Array.isArray(r)&&r.every(e)}bm.typedArray=ikt;function skt(r){return r&&eAe(r.then)}bm.thenable=skt});var Hte=O(Vte=>{"use strict";Object.defineProperty(Vte,"__esModule",{value:!0});var okt=require("vscode"),$te=class extends okt.CompletionItem{constructor(e){super(e)}};Vte.default=$te});var Qte=O(Kte=>{"use strict";Object.defineProperty(Kte,"__esModule",{value:!0});var akt=require("vscode"),Wte=class extends akt.CodeLens{constructor(e){super(e)}};Kte.default=Wte});var Jte=O(Xte=>{"use strict";Object.defineProperty(Xte,"__esModule",{value:!0});var ckt=require("vscode"),Yte=class extends ckt.DocumentLink{constructor(e,t){super(e,t)}};Xte.default=Yte});var rAe=O(Zte=>{"use strict";Object.defineProperty(Zte,"__esModule",{value:!0});var Mh=require("vscode"),ga=Ku(),SD=Dh(),lkt=Hte(),ukt=Qte(),dkt=Jte();function pkt(r){let t=r||(ce=>ce.toString());function n(ce){return t(ce)}function i(ce){return{uri:t(ce.uri)}}function s(ce){return{uri:t(ce.uri),version:ce.version}}function o(ce){return{textDocument:{uri:t(ce.uri),languageId:ce.languageId,version:ce.version,text:ce.getText()}}}function a(ce){let ue=ce;return!!ue.document&&!!ue.contentChanges}function c(ce){let ue=ce;return!!ue.uri&&!!ue.version}function l(ce){if(c(ce))return{textDocument:{uri:t(ce.uri),version:ce.version},contentChanges:[{text:ce.getText()}]};if(a(ce)){let ue=ce.document;return{textDocument:{uri:t(ue.uri),version:ue.version},contentChanges:ce.contentChanges.map(ct=>{let jt=ct.range;return{range:{start:{line:jt.start.line,character:jt.start.character},end:{line:jt.end.line,character:jt.end.character}},rangeLength:ct.rangeLength,text:ct.text}})}}else throw Error("Unsupported text document change parameter")}function u(ce){return{textDocument:i(ce)}}function d(ce,ue=!1){let Ue={textDocument:s(ce)};return ue&&(Ue.text=ce.getText()),Ue}function p(ce){switch(ce){case Mh.TextDocumentSaveReason.Manual:return ga.TextDocumentSaveReason.Manual;case Mh.TextDocumentSaveReason.AfterDelay:return ga.TextDocumentSaveReason.AfterDelay;case Mh.TextDocumentSaveReason.FocusOut:return ga.TextDocumentSaveReason.FocusOut}return ga.TextDocumentSaveReason.Manual}function m(ce){return{textDocument:i(ce.document),reason:p(ce.reason)}}function f(ce,ue){return{textDocument:i(ce),position:_(ue)}}function y(ce){switch(ce){case Mh.CompletionTriggerKind.TriggerCharacter:return ga.CompletionTriggerKind.TriggerCharacter;case Mh.CompletionTriggerKind.TriggerForIncompleteCompletions:return ga.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return ga.CompletionTriggerKind.Invoked}}function v(ce,ue,Ue){return{textDocument:i(ce),position:_(ue),context:{triggerKind:y(Ue.triggerKind),triggerCharacter:Ue.triggerCharacter}}}function _(ce){return{line:ce.line,character:ce.character}}function C(ce){if(ce!==void 0)return ce===null?null:{line:ce.line,character:ce.character}}function P(ce){return ce==null?ce:{start:C(ce.start),end:C(ce.end)}}function w(ce){switch(ce){case Mh.DiagnosticSeverity.Error:return ga.DiagnosticSeverity.Error;case Mh.DiagnosticSeverity.Warning:return ga.DiagnosticSeverity.Warning;case Mh.DiagnosticSeverity.Information:return ga.DiagnosticSeverity.Information;case Mh.DiagnosticSeverity.Hint:return ga.DiagnosticSeverity.Hint}}function R(ce){let ue=ga.Diagnostic.create(P(ce.range),ce.message);return SD.number(ce.severity)&&(ue.severity=w(ce.severity)),(SD.number(ce.code)||SD.string(ce.code))&&(ue.code=ce.code),ce.source&&(ue.source=ce.source),ue}function I(ce){return ce==null?ce:ce.map(R)}function z(ce,ue){switch(ce){case"$string":return ue;case ga.MarkupKind.PlainText:return{kind:ce,value:ue};case ga.MarkupKind.Markdown:return{kind:ce,value:ue.value};default:return`Unsupported Markup content received. Kind is: ${ce}`}}function G(ce,ue){return ue!==void 0?ue:ce+1}function L(ce){let ue={label:ce.label},Ue=ce instanceof lkt.default?ce:void 0;return ce.detail&&(ue.detail=ce.detail),ce.documentation&&(!Ue||Ue.documentationFormat==="$string"?ue.documentation=ce.documentation:ue.documentation=z(Ue.documentationFormat,ce.documentation)),ce.filterText&&(ue.filterText=ce.filterText),H(ue,ce),SD.number(ce.kind)&&(ue.kind=G(ce.kind,Ue&&Ue.originalItemKind)),ce.sortText&&(ue.sortText=ce.sortText),ce.additionalTextEdits&&(ue.additionalTextEdits=ye(ce.additionalTextEdits)),ce.commitCharacters&&(ue.commitCharacters=ce.commitCharacters.slice()),ce.command&&(ue.command=Ct(ce.command)),(ce.preselect===!0||ce.preselect===!1)&&(ue.preselect=ce.preselect),Ue&&(Ue.data!==void 0&&(ue.data=Ue.data),(Ue.deprecated===!0||Ue.deprecated===!1)&&(ue.deprecated=Ue.deprecated)),ue}function H(ce,ue){let Ue=ga.InsertTextFormat.PlainText,ct,jt;ue.textEdit?(ct=ue.textEdit.newText,jt=P(ue.textEdit.range)):ue.insertText instanceof Mh.SnippetString?(Ue=ga.InsertTextFormat.Snippet,ct=ue.insertText.value):ct=ue.insertText,ue.range&&(jt=P(ue.range)),ce.insertTextFormat=Ue,ue.fromEdit&&ct&&jt?ce.textEdit={newText:ct,range:jt}:ce.insertText=ct}function ee(ce){return{range:P(ce.range),newText:ce.newText}}function ye(ce){return ce==null?ce:ce.map(ee)}function $e(ce,ue,Ue){return{textDocument:i(ce),position:_(ue),context:{includeDeclaration:Ue.includeDeclaration}}}function Be(ce){return ce==null?ce:ga.CodeActionContext.create(I(ce.diagnostics),SD.string(ce.only)?[ce.only]:void 0)}function Ct(ce){let ue=ga.Command.create(ce.title,ce.command);return ce.arguments&&(ue.arguments=ce.arguments),ue}function Ge(ce){let ue=ga.CodeLens.create(P(ce.range));return ce.command&&(ue.command=Ct(ce.command)),ce instanceof ukt.default&&ce.data&&(ue.data=ce.data),ue}function pe(ce){return{tabSize:ce.tabSize,insertSpaces:ce.insertSpaces}}function Ie(ce){return{textDocument:i(ce)}}function Ve(ce){return{textDocument:i(ce)}}function lt(ce){let ue=ga.DocumentLink.create(P(ce.range));ce.target&&(ue.target=n(ce.target));let Ue=ce instanceof dkt.default?ce:void 0;return Ue&&Ue.data&&(ue.data=Ue.data),ue}function ut(ce){return{textDocument:i(ce)}}return{asUri:n,asTextDocumentIdentifier:i,asVersionedTextDocumentIdentifier:s,asOpenTextDocumentParams:o,asChangeTextDocumentParams:l,asCloseTextDocumentParams:u,asSaveTextDocumentParams:d,asWillSaveTextDocumentParams:m,asTextDocumentPositionParams:f,asCompletionParams:v,asWorkerPosition:_,asRange:P,asPosition:C,asDiagnosticSeverity:w,asDiagnostic:R,asDiagnostics:I,asCompletionItem:L,asTextEdit:ee,asReferenceParams:$e,asCodeActionContext:Be,asCommand:Ct,asCodeLens:Ge,asFormattingOptions:pe,asDocumentSymbolParams:Ie,asCodeLensParams:Ve,asDocumentLink:lt,asDocumentLinkParams:ut}}Zte.createConverter=pkt});var nAe=O(ere=>{"use strict";Object.defineProperty(ere,"__esModule",{value:!0});var cn=require("vscode"),Li=Ku(),Qu=Dh(),mkt=Hte(),hkt=Qte(),fkt=Jte(),FB;(function(r){function e(t){let n=t;return n&&Qu.string(n.language)&&Qu.string(n.value)}r.is=e})(FB||(FB={}));function gkt(r){let t=r||(W=>cn.Uri.parse(W));function n(W){return t(W)}function i(W){return W.map(s)}function s(W){let Oe=new cn.Diagnostic(l(W.range),W.message,u(W.severity));return(Qu.number(W.code)||Qu.string(W.code))&&(Oe.code=W.code),W.source&&(Oe.source=W.source),W.relatedInformation&&(Oe.relatedInformation=o(W.relatedInformation)),Oe}function o(W){return W.map(a)}function a(W){return new cn.DiagnosticRelatedInformation(L(W.location),W.message)}function c(W){if(W)return new cn.Position(W.line,W.character)}function l(W){if(W)return new cn.Range(c(W.start),c(W.end))}function u(W){if(W==null)return cn.DiagnosticSeverity.Error;switch(W){case Li.DiagnosticSeverity.Error:return cn.DiagnosticSeverity.Error;case Li.DiagnosticSeverity.Warning:return cn.DiagnosticSeverity.Warning;case Li.DiagnosticSeverity.Information:return cn.DiagnosticSeverity.Information;case Li.DiagnosticSeverity.Hint:return cn.DiagnosticSeverity.Hint}return cn.DiagnosticSeverity.Error}function d(W){if(Qu.string(W))return new cn.MarkdownString(W);if(FB.is(W))return new cn.MarkdownString().appendCodeblock(W.value,W.language);if(Array.isArray(W)){let Oe=[];for(let Ht of W){let _r=new cn.MarkdownString;FB.is(Ht)?_r.appendCodeblock(Ht.value,Ht.language):_r.appendMarkdown(Ht),Oe.push(_r)}return Oe}else{let Oe;switch(W.kind){case Li.MarkupKind.Markdown:return new cn.MarkdownString(W.value);case Li.MarkupKind.PlainText:return Oe=new cn.MarkdownString,Oe.appendText(W.value),Oe;default:return Oe=new cn.MarkdownString,Oe.appendText(`Unsupported Markup content received. Kind is: ${W.kind}`),Oe}}}function p(W){if(Qu.string(W))return W;switch(W.kind){case Li.MarkupKind.Markdown:return new cn.MarkdownString(W.value);case Li.MarkupKind.PlainText:return W.value;default:return`Unsupported Markup content received. Kind is: ${W.kind}`}}function m(W){if(W)return new cn.Hover(d(W.contents),l(W.range))}function f(W){if(!W)return;if(Array.isArray(W))return W.map(v);let Oe=W;return new cn.CompletionList(Oe.items.map(v),Oe.isIncomplete)}function y(W){return Li.CompletionItemKind.Text<=W&&W<=Li.CompletionItemKind.TypeParameter?[W-1,void 0]:[cn.CompletionItemKind.Text,W]}function v(W){let Oe=new mkt.default(W.label);W.detail&&(Oe.detail=W.detail),W.documentation&&(Oe.documentation=p(W.documentation),Oe.documentationFormat=Qu.string(W.documentation)?"$string":W.documentation.kind),W.filterText&&(Oe.filterText=W.filterText);let Ht=_(W);if(Ht&&(Oe.insertText=Ht.text,Oe.range=Ht.range,Oe.fromEdit=Ht.fromEdit),Qu.number(W.kind)){let[_r,fr]=y(W.kind);Oe.kind=_r,fr&&(Oe.originalItemKind=fr)}return W.sortText&&(Oe.sortText=W.sortText),W.additionalTextEdits&&(Oe.additionalTextEdits=P(W.additionalTextEdits)),Qu.stringArray(W.commitCharacters)&&(Oe.commitCharacters=W.commitCharacters.slice()),W.command&&(Oe.command=ue(W.command)),(W.deprecated===!0||W.deprecated===!1)&&(Oe.deprecated=W.deprecated),(W.preselect===!0||W.preselect===!1)&&(Oe.preselect=W.preselect),W.data!==void 0&&(Oe.data=W.data),Oe}function _(W){return W.textEdit?W.insertTextFormat===Li.InsertTextFormat.Snippet?{text:new cn.SnippetString(W.textEdit.newText),range:l(W.textEdit.range),fromEdit:!0}:{text:W.textEdit.newText,range:l(W.textEdit.range),fromEdit:!0}:W.insertText?W.insertTextFormat===Li.InsertTextFormat.Snippet?{text:new cn.SnippetString(W.insertText),fromEdit:!1}:{text:W.insertText,fromEdit:!1}:void 0}function C(W){if(W)return new cn.TextEdit(l(W.range),W.newText)}function P(W){if(W)return W.map(C)}function w(W){if(!W)return;let Oe=new cn.SignatureHelp;return Qu.number(W.activeSignature)?Oe.activeSignature=W.activeSignature:Oe.activeSignature=0,Qu.number(W.activeParameter)?Oe.activeParameter=W.activeParameter:Oe.activeParameter=0,W.signatures&&(Oe.signatures=R(W.signatures)),Oe}function R(W){return W.map(I)}function I(W){let Oe=new cn.SignatureInformation(W.label);return W.documentation&&(Oe.documentation=p(W.documentation)),W.parameters&&(Oe.parameters=z(W.parameters)),Oe}function z(W){return W.map(G)}function G(W){let Oe=new cn.ParameterInformation(W.label);return W.documentation&&(Oe.documentation=p(W.documentation)),Oe}function L(W){if(W)return new cn.Location(t(W.uri),l(W.range))}function H(W){if(W)return $e(W)}function ee(W){if(W)return $e(W)}function ye(W){if(W)return{targetUri:t(W.targetUri),targetRange:l(W.targetSelectionRange),originSelectionRange:l(W.originSelectionRange),targetSelectionRange:l(W.targetSelectionRange)}}function $e(W){if(W)return Qu.array(W)?W.length===0?[]:Li.LocationLink.is(W[0])?W.map(Ht=>ye(Ht)):W.map(Ht=>L(Ht)):Li.LocationLink.is(W)?[ye(W)]:L(W)}function Be(W){if(W)return W.map(Oe=>L(Oe))}function Ct(W){if(W)return W.map(Ge)}function Ge(W){let Oe=new cn.DocumentHighlight(l(W.range));return Qu.number(W.kind)&&(Oe.kind=pe(W.kind)),Oe}function pe(W){switch(W){case Li.DocumentHighlightKind.Text:return cn.DocumentHighlightKind.Text;case Li.DocumentHighlightKind.Read:return cn.DocumentHighlightKind.Read;case Li.DocumentHighlightKind.Write:return cn.DocumentHighlightKind.Write}return cn.DocumentHighlightKind.Text}function Ie(W,Oe){if(W)return W.map(Ht=>lt(Ht,Oe))}function Ve(W){return W<=Li.SymbolKind.TypeParameter?W-1:cn.SymbolKind.Property}function lt(W,Oe){let Ht=new cn.SymbolInformation(W.name,Ve(W.kind),l(W.location.range),W.location.uri?t(W.location.uri):Oe);return W.containerName&&(Ht.containerName=W.containerName),Ht}function ut(W){if(W!=null)return W.map(ce)}function ce(W){let Oe=new cn.DocumentSymbol(W.name,W.detail||"",Ve(W.kind),l(W.range),l(W.selectionRange));if(W.children!==void 0&&W.children.length>0){let Ht=[];for(let _r of W.children)Ht.push(ce(_r));Oe.children=Ht}return Oe}function ue(W){let Oe={title:W.title,command:W.command};return W.arguments&&(Oe.arguments=W.arguments),Oe}function Ue(W){if(W)return W.map(ue)}let ct=new Map;ct.set("",cn.CodeActionKind.Empty),ct.set(Li.CodeActionKind.QuickFix,cn.CodeActionKind.QuickFix),ct.set(Li.CodeActionKind.Refactor,cn.CodeActionKind.Refactor),ct.set(Li.CodeActionKind.RefactorExtract,cn.CodeActionKind.RefactorExtract),ct.set(Li.CodeActionKind.RefactorInline,cn.CodeActionKind.RefactorInline),ct.set(Li.CodeActionKind.RefactorRewrite,cn.CodeActionKind.RefactorRewrite),ct.set(Li.CodeActionKind.Source,cn.CodeActionKind.Source),ct.set(Li.CodeActionKind.SourceOrganizeImports,cn.CodeActionKind.SourceOrganizeImports);function jt(W){if(W==null)return;let Oe=ct.get(W);if(Oe)return Oe;let Ht=W.split(".");Oe=cn.CodeActionKind.Empty;for(let _r of Ht)Oe=Oe.append(_r);return Oe}function tr(W){if(W!=null)return W.map(Oe=>jt(Oe))}function se(W){if(W==null)return;let Oe=new cn.CodeAction(W.title);return W.kind!==void 0&&(Oe.kind=jt(W.kind)),W.diagnostics&&(Oe.diagnostics=i(W.diagnostics)),W.edit&&(Oe.edit=Re(W.edit)),W.command&&(Oe.command=ue(W.command)),Oe}function we(W){if(!W)return;let Oe=new hkt.default(l(W.range));return W.command&&(Oe.command=ue(W.command)),W.data!==void 0&&W.data!==null&&(Oe.data=W.data),Oe}function Ne(W){if(W)return W.map(Oe=>we(Oe))}function Re(W){if(!W)return;let Oe=new cn.WorkspaceEdit;return W.documentChanges?W.documentChanges.forEach(Ht=>{Li.CreateFile.is(Ht)?Oe.createFile(t(Ht.uri),Ht.options):Li.RenameFile.is(Ht)?Oe.renameFile(t(Ht.oldUri),t(Ht.newUri),Ht.options):Li.DeleteFile.is(Ht)?Oe.deleteFile(t(Ht.uri),Ht.options):Li.TextDocumentEdit.is(Ht)?Oe.set(t(Ht.textDocument.uri),P(Ht.edits)):console.error(`Unknown workspace edit change received:
${JSON.stringify(Ht,void 0,4)}`)}):W.changes&&Object.keys(W.changes).forEach(Ht=>{Oe.set(t(Ht),P(W.changes[Ht]))}),Oe}function Le(W){let Oe=l(W.range),Ht=W.target?n(W.target):void 0,_r=new fkt.default(Oe,Ht);return W.data!==void 0&&W.data!==null&&(_r.data=W.data),_r}function ht(W){if(W)return W.map(Le)}function Ee(W){return new cn.Color(W.red,W.green,W.blue,W.alpha)}function ie(W){return new cn.ColorInformation(l(W.range),Ee(W.color))}function je(W){if(Array.isArray(W))return W.map(ie)}function le(W){let Oe=new cn.ColorPresentation(W.label);return Oe.additionalTextEdits=P(W.additionalTextEdits),W.textEdit&&(Oe.textEdit=C(W.textEdit)),Oe}function _e(W){if(Array.isArray(W))return W.map(le)}function B(W){if(W)switch(W){case Li.FoldingRangeKind.Comment:return cn.FoldingRangeKind.Comment;case Li.FoldingRangeKind.Imports:return cn.FoldingRangeKind.Imports;case Li.FoldingRangeKind.Region:return cn.FoldingRangeKind.Region}}function be(W){return new cn.FoldingRange(W.startLine,W.endLine,B(W.kind))}function ke(W){if(Array.isArray(W))return W.map(be)}return{asUri:n,asDiagnostics:i,asDiagnostic:s,asRange:l,asPosition:c,asDiagnosticSeverity:u,asHover:m,asCompletionResult:f,asCompletionItem:v,asTextEdit:C,asTextEdits:P,asSignatureHelp:w,asSignatureInformations:R,asSignatureInformation:I,asParameterInformations:z,asParameterInformation:G,asDeclarationResult:H,asDefinitionResult:ee,asLocation:L,asReferences:Be,asDocumentHighlights:Ct,asDocumentHighlight:Ge,asDocumentHighlightKind:pe,asSymbolInformations:Ie,asSymbolInformation:lt,asDocumentSymbols:ut,asDocumentSymbol:ce,asCommand:ue,asCommands:Ue,asCodeAction:se,asCodeActionKind:jt,asCodeActionKinds:tr,asCodeLens:we,asCodeLenses:Ne,asWorkspaceEdit:Re,asDocumentLink:Le,asDocumentLinks:ht,asFoldingRangeKind:B,asFoldingRange:be,asFoldingRanges:ke,asColor:Ee,asColorInformation:ie,asColorInformations:je,asColorPresentation:le,asColorPresentations:_e}}ere.createConverter=gkt});var iAe=O(rre=>{"use strict";Object.defineProperty(rre,"__esModule",{value:!0});var tre=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,t=this.defaultDelay){return this.task=e,t>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(n=>{this.onSuccess=n}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var n=this.task();return this.task=void 0,n})),(t>=0||this.timeout===void 0)&&(this.timeout=setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},t>=0?t:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(clearTimeout(this.timeout),this.timeout=void 0)}};rre.Delayer=tre});var Ov=O(QS=>{"use strict";Object.defineProperty(QS,"__esModule",{value:!0});var CD=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},PD=class r extends CD{constructor(){super([r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),"-",r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),"-","4",r._randomHex(),r._randomHex(),r._randomHex(),"-",r._oneOf(r._timeHighBits),r._randomHex(),r._randomHex(),r._randomHex(),"-",r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return r._oneOf(r._chars)}};PD._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];PD._timeHighBits=["8","9","a","b"];QS.empty=new CD("00000000-0000-0000-0000-000000000000");function sAe(){return new PD}QS.v4=sAe;var ykt=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function oAe(r){return ykt.test(r)}QS.isUUID=oAe;function vkt(r){if(!oAe(r))throw new Error("invalid uuid");return new CD(r)}QS.parse=vkt;function bkt(){return sAe().asHex()}QS.generateUuid=bkt});var Av=O(tl=>{"use strict";function _kt(r){for(var e in r)tl.hasOwnProperty(e)||(tl[e]=r[e])}Object.defineProperty(tl,"__esModule",{value:!0});var un=require("vscode"),Pe=Ku(),Skt=rAe(),Ckt=nAe(),_o=Dh(),aAe=iAe(),io=Ov();_kt(Ku());var nre=class{error(e){console.error(e)}warn(e){console.warn(e)}info(e){console.info(e)}log(e){console.log(e)}};function Pkt(r,e,t,n){let i=new nre,s=Pe.createProtocolConnection(r,e,i);return s.onError(a=>{t(a[0],a[1],a[2])}),s.onClose(n),{listen:()=>s.listen(),sendRequest:(a,...c)=>s.sendRequest(_o.string(a)?a:a.method,...c),onRequest:(a,c)=>s.onRequest(_o.string(a)?a:a.method,c),sendNotification:(a,c)=>s.sendNotification(_o.string(a)?a:a.method,c),onNotification:(a,c)=>s.onNotification(_o.string(a)?a:a.method,c),trace:(a,c,l)=>{let u={sendNotification:!1,traceFormat:Pe.TraceFormat.Text};l===void 0?s.trace(a,c,u):(_o.boolean(l),s.trace(a,c,l))},initialize:a=>s.sendRequest(Pe.InitializeRequest.type,a),shutdown:()=>s.sendRequest(Pe.ShutdownRequest.type,void 0),exit:()=>s.sendNotification(Pe.ExitNotification.type),onLogMessage:a=>s.onNotification(Pe.LogMessageNotification.type,a),onShowMessage:a=>s.onNotification(Pe.ShowMessageNotification.type,a),onTelemetry:a=>s.onNotification(Pe.TelemetryEventNotification.type,a),didChangeConfiguration:a=>s.sendNotification(Pe.DidChangeConfigurationNotification.type,a),didChangeWatchedFiles:a=>s.sendNotification(Pe.DidChangeWatchedFilesNotification.type,a),didOpenTextDocument:a=>s.sendNotification(Pe.DidOpenTextDocumentNotification.type,a),didChangeTextDocument:a=>s.sendNotification(Pe.DidChangeTextDocumentNotification.type,a),didCloseTextDocument:a=>s.sendNotification(Pe.DidCloseTextDocumentNotification.type,a),didSaveTextDocument:a=>s.sendNotification(Pe.DidSaveTextDocumentNotification.type,a),onDiagnostics:a=>s.onNotification(Pe.PublishDiagnosticsNotification.type,a),dispose:()=>s.dispose()}}var UB;(function(r){r[r.Continue=1]="Continue",r[r.Shutdown=2]="Shutdown"})(UB=tl.ErrorAction||(tl.ErrorAction={}));var YS;(function(r){r[r.DoNotRestart=1]="DoNotRestart",r[r.Restart=2]="Restart"})(YS=tl.CloseAction||(tl.CloseAction={}));var BB=class{constructor(e){this.name=e,this.restarts=[]}error(e,t,n){return n&&n<=3?UB.Continue:UB.Shutdown}closed(){return this.restarts.push(Date.now()),this.restarts.length<5?YS.Restart:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?(un.window.showErrorMessage(`The ${this.name} server crashed 5 times in the last 3 minutes. The server will not be restarted.`),YS.DoNotRestart):(this.restarts.shift(),YS.Restart)}},wD;(function(r){r[r.Info=1]="Info",r[r.Warn=2]="Warn",r[r.Error=3]="Error",r[r.Never=4]="Never"})(wD=tl.RevealOutputChannelOn||(tl.RevealOutputChannelOn={}));var jB;(function(r){r[r.Stopped=1]="Stopped",r[r.Starting=3]="Starting",r[r.Running=2]="Running"})(jB=tl.State||(tl.State={}));var jo;(function(r){r[r.Initial=0]="Initial",r[r.Starting=1]="Starting",r[r.StartFailed=2]="StartFailed",r[r.Running=3]="Running",r[r.Stopping=4]="Stopping",r[r.Stopped=5]="Stopped"})(jo||(jo={}));var cAe=[Pe.SymbolKind.File,Pe.SymbolKind.Module,Pe.SymbolKind.Namespace,Pe.SymbolKind.Package,Pe.SymbolKind.Class,Pe.SymbolKind.Method,Pe.SymbolKind.Property,Pe.SymbolKind.Field,Pe.SymbolKind.Constructor,Pe.SymbolKind.Enum,Pe.SymbolKind.Interface,Pe.SymbolKind.Function,Pe.SymbolKind.Variable,Pe.SymbolKind.Constant,Pe.SymbolKind.String,Pe.SymbolKind.Number,Pe.SymbolKind.Boolean,Pe.SymbolKind.Array,Pe.SymbolKind.Object,Pe.SymbolKind.Key,Pe.SymbolKind.Null,Pe.SymbolKind.EnumMember,Pe.SymbolKind.Struct,Pe.SymbolKind.Event,Pe.SymbolKind.Operator,Pe.SymbolKind.TypeParameter],wkt=[Pe.CompletionItemKind.Text,Pe.CompletionItemKind.Method,Pe.CompletionItemKind.Function,Pe.CompletionItemKind.Constructor,Pe.CompletionItemKind.Field,Pe.CompletionItemKind.Variable,Pe.CompletionItemKind.Class,Pe.CompletionItemKind.Interface,Pe.CompletionItemKind.Module,Pe.CompletionItemKind.Property,Pe.CompletionItemKind.Unit,Pe.CompletionItemKind.Value,Pe.CompletionItemKind.Enum,Pe.CompletionItemKind.Keyword,Pe.CompletionItemKind.Snippet,Pe.CompletionItemKind.Color,Pe.CompletionItemKind.File,Pe.CompletionItemKind.Reference,Pe.CompletionItemKind.Folder,Pe.CompletionItemKind.EnumMember,Pe.CompletionItemKind.Constant,Pe.CompletionItemKind.Struct,Pe.CompletionItemKind.Event,Pe.CompletionItemKind.Operator,Pe.CompletionItemKind.TypeParameter];function dn(r,e){return r[e]===void 0&&(r[e]={}),r[e]}var ire;(function(r){function e(t){let n=t;return n&&_o.func(n.register)&&_o.func(n.unregister)&&_o.func(n.dispose)&&n.messages!==void 0}r.is=e})(ire||(ire={}));var _m=class{constructor(e,t,n,i,s,o){this._client=e,this._event=t,this._type=n,this._middleware=i,this._createParams=s,this._selectorFilter=o,this._selectors=new Map}static textDocumentFilter(e,t){for(let n of e)if(un.languages.match(n,t))return!0;return!1}register(e,t){t.registerOptions.documentSelector&&(this._listener||(this._listener=this._event(this.callback,this)),this._selectors.set(t.id,t.registerOptions.documentSelector))}callback(e){(!this._selectorFilter||this._selectorFilter(this._selectors.values(),e))&&(this._middleware?this._middleware(e,t=>this._client.sendNotification(this._type,this._createParams(t))):this._client.sendNotification(this._type,this._createParams(e)),this.notificationSent(e))}notificationSent(e){}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}},sre=class extends _m{constructor(e,t){super(e,un.workspace.onDidOpenTextDocument,Pe.DidOpenTextDocumentNotification.type,e.clientOptions.middleware.didOpen,n=>e.code2ProtocolConverter.asOpenTextDocumentParams(n),_m.textDocumentFilter),this._syncedDocuments=t}get messages(){return Pe.DidOpenTextDocumentNotification.type}fillClientCapabilities(e){dn(dn(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.openClose&&this.register(this.messages,{id:io.generateUuid(),registerOptions:{documentSelector:t}})}register(e,t){if(super.register(e,t),!t.registerOptions.documentSelector)return;let n=t.registerOptions.documentSelector;un.workspace.textDocuments.forEach(i=>{let s=i.uri.toString();if(!this._syncedDocuments.has(s)&&un.languages.match(n,i)){let o=this._client.clientOptions.middleware,a=c=>{this._client.sendNotification(this._type,this._createParams(c))};o.didOpen?o.didOpen(i,a):a(i),this._syncedDocuments.set(s,i)}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.set(e.uri.toString(),e)}},ore=class extends _m{constructor(e,t){super(e,un.workspace.onDidCloseTextDocument,Pe.DidCloseTextDocumentNotification.type,e.clientOptions.middleware.didClose,n=>e.code2ProtocolConverter.asCloseTextDocumentParams(n),_m.textDocumentFilter),this._syncedDocuments=t}get messages(){return Pe.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){dn(dn(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.openClose&&this.register(this.messages,{id:io.generateUuid(),registerOptions:{documentSelector:t}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.delete(e.uri.toString())}unregister(e){let t=this._selectors.get(e);super.unregister(e);let n=this._selectors.values();this._syncedDocuments.forEach(i=>{if(un.languages.match(t,i)&&!this._selectorFilter(n,i)){let s=this._client.clientOptions.middleware,o=a=>{this._client.sendNotification(this._type,this._createParams(a))};this._syncedDocuments.delete(i.uri.toString()),s.didClose?s.didClose(i,o):o(i)}})}},are=class{constructor(e){this._client=e,this._changeData=new Map,this._forcingDelivery=!1}get messages(){return Pe.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){dn(dn(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.change!==void 0&&n.change!==Pe.TextDocumentSyncKind.None&&this.register(this.messages,{id:io.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{syncKind:n.change})})}register(e,t){t.registerOptions.documentSelector&&(this._listener||(this._listener=un.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(t.id,{documentSelector:t.registerOptions.documentSelector,syncKind:t.registerOptions.syncKind}))}callback(e){if(e.contentChanges.length!==0){for(let t of this._changeData.values())if(un.languages.match(t.documentSelector,e.document)){let n=this._client.clientOptions.middleware;if(t.syncKind===Pe.TextDocumentSyncKind.Incremental){let i=this._client.code2ProtocolConverter.asChangeTextDocumentParams(e);n.didChange?n.didChange(e,()=>this._client.sendNotification(Pe.DidChangeTextDocumentNotification.type,i)):this._client.sendNotification(Pe.DidChangeTextDocumentNotification.type,i)}else if(t.syncKind===Pe.TextDocumentSyncKind.Full){let i=s=>{this._changeDelayer?(this._changeDelayer.uri!==s.document.uri.toString()&&(this.forceDelivery(),this._changeDelayer.uri=s.document.uri.toString()),this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(Pe.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(s.document))})):(this._changeDelayer={uri:s.document.uri.toString(),delayer:new aAe.Delayer(200)},this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(Pe.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(s.document))},-1))};n.didChange?n.didChange(e,i):i(e)}}}}unregister(e){this._changeData.delete(e),this._changeData.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._changeDelayer=void 0,this._forcingDelivery=!1,this._changeData.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}forceDelivery(){if(!(this._forcingDelivery||!this._changeDelayer))try{this._forcingDelivery=!0,this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=!1}}},cre=class extends _m{constructor(e){super(e,un.workspace.onWillSaveTextDocument,Pe.WillSaveTextDocumentNotification.type,e.clientOptions.middleware.willSave,t=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(t),(t,n)=>_m.textDocumentFilter(t,n.document))}get messages(){return Pe.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){let t=dn(dn(e,"textDocument"),"synchronization");t.willSave=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.willSave&&this.register(this.messages,{id:io.generateUuid(),registerOptions:{documentSelector:t}})}},lre=class{constructor(e){this._client=e,this._selectors=new Map}get messages(){return Pe.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){let t=dn(dn(e,"textDocument"),"synchronization");t.willSaveWaitUntil=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.willSaveWaitUntil&&this.register(this.messages,{id:io.generateUuid(),registerOptions:{documentSelector:t}})}register(e,t){t.registerOptions.documentSelector&&(this._listener||(this._listener=un.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(t.id,t.registerOptions.documentSelector))}callback(e){if(_m.textDocumentFilter(this._selectors.values(),e.document)){let t=this._client.clientOptions.middleware,n=i=>this._client.sendRequest(Pe.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(i)).then(s=>{let o=this._client.protocol2CodeConverter.asTextEdits(s);return o===void 0?[]:o});e.waitUntil(t.willSaveWaitUntil?t.willSaveWaitUntil(e,n):n(e))}}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}},ure=class extends _m{constructor(e){super(e,un.workspace.onDidSaveTextDocument,Pe.DidSaveTextDocumentNotification.type,e.clientOptions.middleware.didSave,t=>e.code2ProtocolConverter.asSaveTextDocumentParams(t,this._includeText),_m.textDocumentFilter)}get messages(){return Pe.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){dn(dn(e,"textDocument"),"synchronization").didSave=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.save&&this.register(this.messages,{id:io.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{includeText:!!n.save.includeText})})}register(e,t){this._includeText=!!t.registerOptions.includeText,super.register(e,t)}},dre=class{constructor(e,t){this._client=e,this._notifyFileEvent=t,this._watchers=new Map}get messages(){return Pe.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){dn(dn(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0}initialize(e,t){}register(e,t){if(!Array.isArray(t.registerOptions.watchers))return;let n=[];for(let i of t.registerOptions.watchers){if(!_o.string(i.globPattern))continue;let s=!0,o=!0,a=!0;i.kind!==void 0&&i.kind!==null&&(s=(i.kind&Pe.WatchKind.Create)!==0,o=(i.kind&Pe.WatchKind.Change)!=0,a=(i.kind&Pe.WatchKind.Delete)!=0);let c=un.workspace.createFileSystemWatcher(i.globPattern,!s,!o,!a);this.hookListeners(c,s,o,a),n.push(c)}this._watchers.set(t.id,n)}registerRaw(e,t){let n=[];for(let i of t)this.hookListeners(i,!0,!0,!0,n);this._watchers.set(e,n)}hookListeners(e,t,n,i,s){t&&e.onDidCreate(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:Pe.FileChangeType.Created}),null,s),n&&e.onDidChange(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:Pe.FileChangeType.Changed}),null,s),i&&e.onDidDelete(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:Pe.FileChangeType.Deleted}),null,s)}unregister(e){let t=this._watchers.get(e);if(t)for(let n of t)n.dispose()}dispose(){this._watchers.forEach(e=>{for(let t of e)t.dispose()}),this._watchers.clear()}},Ic=class{constructor(e,t){this._client=e,this._message=t,this._providers=new Map}get messages(){return this._message}register(e,t){if(e.method!==this.messages.method)throw new Error(`Register called on wrong feature. Requested ${e.method} but reached feature ${this.messages.method}`);if(!t.registerOptions.documentSelector)return;let n=this.registerLanguageProvider(t.registerOptions);n&&this._providers.set(t.id,n)}unregister(e){let t=this._providers.get(e);t&&t.dispose()}dispose(){this._providers.forEach(e=>{e.dispose()}),this._providers.clear()}};tl.TextDocumentFeature=Ic;var pre=class{constructor(e,t){this._client=e,this._message=t,this._providers=new Map}get messages(){return this._message}register(e,t){if(e.method!==this.messages.method)throw new Error(`Register called on wron feature. Requested ${e.method} but reached feature ${this.messages.method}`);let n=this.registerLanguageProvider(t.registerOptions);n&&this._providers.set(t.id,n)}unregister(e){let t=this._providers.get(e);t&&t.dispose()}dispose(){this._providers.forEach(e=>{e.dispose()}),this._providers.clear()}},mre=class extends Ic{constructor(e){super(e,Pe.CompletionRequest.type)}fillClientCapabilities(e){let t=dn(dn(e,"textDocument"),"completion");t.dynamicRegistration=!0,t.contextSupport=!0,t.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[Pe.MarkupKind.Markdown,Pe.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0},t.completionItemKind={valueSet:wkt}}initialize(e,t){!e.completionProvider||!t||this.register(this.messages,{id:io.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.completionProvider)})}registerLanguageProvider(e){let t=e.triggerCharacters||[],n=this._client,i=(a,c,l,u)=>n.sendRequest(Pe.CompletionRequest.type,n.code2ProtocolConverter.asCompletionParams(a,c,l),u).then(n.protocol2CodeConverter.asCompletionResult,d=>(n.logFailedRequest(Pe.CompletionRequest.type,d),Promise.resolve([]))),s=(a,c)=>n.sendRequest(Pe.CompletionResolveRequest.type,n.code2ProtocolConverter.asCompletionItem(a),c).then(n.protocol2CodeConverter.asCompletionItem,l=>(n.logFailedRequest(Pe.CompletionResolveRequest.type,l),Promise.resolve(a))),o=this._client.clientOptions.middleware;return un.languages.registerCompletionItemProvider(e.documentSelector,{provideCompletionItems:(a,c,l,u)=>o.provideCompletionItem?o.provideCompletionItem(a,c,u,l,i):i(a,c,u,l),resolveCompletionItem:e.resolveProvider?(a,c)=>o.resolveCompletionItem?o.resolveCompletionItem(a,c,s):s(a,c):void 0},...t)}},hre=class extends Ic{constructor(e){super(e,Pe.HoverRequest.type)}fillClientCapabilities(e){let t=dn(dn(e,"textDocument"),"hover");t.dynamicRegistration=!0,t.contentFormat=[Pe.MarkupKind.Markdown,Pe.MarkupKind.PlainText]}initialize(e,t){!e.hoverProvider||!t||this.register(this.messages,{id:io.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(s,o,a)=>t.sendRequest(Pe.HoverRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(s,o),a).then(t.protocol2CodeConverter.asHover,c=>(t.logFailedRequest(Pe.HoverRequest.type,c),Promise.resolve(null))),i=t.clientOptions.middleware;return un.languages.registerHoverProvider(e.documentSelector,{provideHover:(s,o,a)=>i.provideHover?i.provideHover(s,o,a,n):n(s,o,a)})}},fre=class extends Ic{constructor(e){super(e,Pe.SignatureHelpRequest.type)}fillClientCapabilities(e){let t=dn(dn(e,"textDocument"),"signatureHelp");t.dynamicRegistration=!0,t.signatureInformation={documentationFormat:[Pe.MarkupKind.Markdown,Pe.MarkupKind.PlainText]},t.signatureInformation.parameterInformation={labelOffsetSupport:!0}}initialize(e,t){!e.signatureHelpProvider||!t||this.register(this.messages,{id:io.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.signatureHelpProvider)})}registerLanguageProvider(e){let t=this._client,n=(o,a,c)=>t.sendRequest(Pe.SignatureHelpRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(o,a),c).then(t.protocol2CodeConverter.asSignatureHelp,l=>(t.logFailedRequest(Pe.SignatureHelpRequest.type,l),Promise.resolve(null))),i=t.clientOptions.middleware,s=e.triggerCharacters||[];return un.languages.registerSignatureHelpProvider(e.documentSelector,{provideSignatureHelp:(o,a,c)=>i.provideSignatureHelp?i.provideSignatureHelp(o,a,c,n):n(o,a,c)},...s)}},gre=class extends Ic{constructor(e){super(e,Pe.DefinitionRequest.type)}fillClientCapabilities(e){let t=dn(dn(e,"textDocument"),"definition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){!e.definitionProvider||!t||this.register(this.messages,{id:io.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(s,o,a)=>t.sendRequest(Pe.DefinitionRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(s,o),a).then(t.protocol2CodeConverter.asDefinitionResult,c=>(t.logFailedRequest(Pe.DefinitionRequest.type,c),Promise.resolve(null))),i=t.clientOptions.middleware;return un.languages.registerDefinitionProvider(e.documentSelector,{provideDefinition:(s,o,a)=>i.provideDefinition?i.provideDefinition(s,o,a,n):n(s,o,a)})}},yre=class extends Ic{constructor(e){super(e,Pe.ReferencesRequest.type)}fillClientCapabilities(e){dn(dn(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,t){!e.referencesProvider||!t||this.register(this.messages,{id:io.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(s,o,a,c)=>t.sendRequest(Pe.ReferencesRequest.type,t.code2ProtocolConverter.asReferenceParams(s,o,a),c).then(t.protocol2CodeConverter.asReferences,l=>(t.logFailedRequest(Pe.ReferencesRequest.type,l),Promise.resolve([]))),i=t.clientOptions.middleware;return un.languages.registerReferenceProvider(e.documentSelector,{provideReferences:(s,o,a,c)=>i.provideReferences?i.provideReferences(s,o,a,c,n):n(s,o,a,c)})}},vre=class extends Ic{constructor(e){super(e,Pe.DocumentHighlightRequest.type)}fillClientCapabilities(e){dn(dn(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,t){!e.documentHighlightProvider||!t||this.register(this.messages,{id:io.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(s,o,a)=>t.sendRequest(Pe.DocumentHighlightRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(s,o),a).then(t.protocol2CodeConverter.asDocumentHighlights,c=>(t.logFailedRequest(Pe.DocumentHighlightRequest.type,c),Promise.resolve([]))),i=t.clientOptions.middleware;return un.languages.registerDocumentHighlightProvider(e.documentSelector,{provideDocumentHighlights:(s,o,a)=>i.provideDocumentHighlights?i.provideDocumentHighlights(s,o,a,n):n(s,o,a)})}},bre=class extends Ic{constructor(e){super(e,Pe.DocumentSymbolRequest.type)}fillClientCapabilities(e){let t=dn(dn(e,"textDocument"),"documentSymbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:cAe},t.hierarchicalDocumentSymbolSupport=!0}initialize(e,t){!e.documentSymbolProvider||!t||this.register(this.messages,{id:io.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(s,o)=>t.sendRequest(Pe.DocumentSymbolRequest.type,t.code2ProtocolConverter.asDocumentSymbolParams(s),o).then(a=>{if(a!==null){if(a.length===0)return[];{let c=a[0];return Pe.DocumentSymbol.is(c)?t.protocol2CodeConverter.asDocumentSymbols(a):t.protocol2CodeConverter.asSymbolInformations(a)}}},a=>(t.logFailedRequest(Pe.DocumentSymbolRequest.type,a),Promise.resolve([]))),i=t.clientOptions.middleware;return un.languages.registerDocumentSymbolProvider(e.documentSelector,{provideDocumentSymbols:(s,o)=>i.provideDocumentSymbols?i.provideDocumentSymbols(s,o,n):n(s,o)})}},_re=class extends pre{constructor(e){super(e,Pe.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let t=dn(dn(e,"workspace"),"symbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:cAe}}initialize(e){e.workspaceSymbolProvider&&this.register(this.messages,{id:io.generateUuid(),registerOptions:void 0})}registerLanguageProvider(e){let t=this._client,n=(s,o)=>t.sendRequest(Pe.WorkspaceSymbolRequest.type,{query:s},o).then(t.protocol2CodeConverter.asSymbolInformations,a=>(t.logFailedRequest(Pe.WorkspaceSymbolRequest.type,a),Promise.resolve([]))),i=t.clientOptions.middleware;return un.languages.registerWorkspaceSymbolProvider({provideWorkspaceSymbols:(s,o)=>i.provideWorkspaceSymbols?i.provideWorkspaceSymbols(s,o,n):n(s,o)})}},Sre=class extends Ic{constructor(e){super(e,Pe.CodeActionRequest.type)}fillClientCapabilities(e){let t=dn(dn(e,"textDocument"),"codeAction");t.dynamicRegistration=!0,t.codeActionLiteralSupport={codeActionKind:{valueSet:["",Pe.CodeActionKind.QuickFix,Pe.CodeActionKind.Refactor,Pe.CodeActionKind.RefactorExtract,Pe.CodeActionKind.RefactorInline,Pe.CodeActionKind.RefactorRewrite,Pe.CodeActionKind.Source,Pe.CodeActionKind.SourceOrganizeImports]}}}initialize(e,t){if(!e.codeActionProvider||!t)return;let n;_o.boolean(e.codeActionProvider)||(n=e.codeActionProvider.codeActionKinds),this.register(this.messages,{id:io.generateUuid(),registerOptions:{documentSelector:t,codeActionKinds:n}})}registerLanguageProvider(e){let t=this._client,n=(s,o,a,c)=>{let l={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(s),range:t.code2ProtocolConverter.asRange(o),context:t.code2ProtocolConverter.asCodeActionContext(a)};return t.sendRequest(Pe.CodeActionRequest.type,l,c).then(u=>{if(u===null)return;let d=[];for(let p of u)Pe.Command.is(p)?d.push(t.protocol2CodeConverter.asCommand(p)):d.push(t.protocol2CodeConverter.asCodeAction(p));return d},u=>(t.logFailedRequest(Pe.CodeActionRequest.type,u),Promise.resolve([])))},i=t.clientOptions.middleware;return un.languages.registerCodeActionsProvider(e.documentSelector,{provideCodeActions:(s,o,a,c)=>i.provideCodeActions?i.provideCodeActions(s,o,a,c,n):n(s,o,a,c)},e.codeActionKinds?{providedCodeActionKinds:t.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0)}},Cre=class extends Ic{constructor(e){super(e,Pe.CodeLensRequest.type)}fillClientCapabilities(e){dn(dn(e,"textDocument"),"codeLens").dynamicRegistration=!0}initialize(e,t){!e.codeLensProvider||!t||this.register(this.messages,{id:io.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.codeLensProvider)})}registerLanguageProvider(e){let t=this._client,n=(o,a)=>t.sendRequest(Pe.CodeLensRequest.type,t.code2ProtocolConverter.asCodeLensParams(o),a).then(t.protocol2CodeConverter.asCodeLenses,c=>(t.logFailedRequest(Pe.CodeLensRequest.type,c),Promise.resolve([]))),i=(o,a)=>t.sendRequest(Pe.CodeLensResolveRequest.type,t.code2ProtocolConverter.asCodeLens(o),a).then(t.protocol2CodeConverter.asCodeLens,c=>(t.logFailedRequest(Pe.CodeLensResolveRequest.type,c),o)),s=t.clientOptions.middleware;return un.languages.registerCodeLensProvider(e.documentSelector,{provideCodeLenses:(o,a)=>s.provideCodeLenses?s.provideCodeLenses(o,a,n):n(o,a),resolveCodeLens:e.resolveProvider?(o,a)=>s.resolveCodeLens?s.resolveCodeLens(o,a,i):i(o,a):void 0})}},Pre=class extends Ic{constructor(e){super(e,Pe.DocumentFormattingRequest.type)}fillClientCapabilities(e){dn(dn(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,t){!e.documentFormattingProvider||!t||this.register(this.messages,{id:io.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(s,o,a)=>{let c={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(s),options:t.code2ProtocolConverter.asFormattingOptions(o)};return t.sendRequest(Pe.DocumentFormattingRequest.type,c,a).then(t.protocol2CodeConverter.asTextEdits,l=>(t.logFailedRequest(Pe.DocumentFormattingRequest.type,l),Promise.resolve([])))},i=t.clientOptions.middleware;return un.languages.registerDocumentFormattingEditProvider(e.documentSelector,{provideDocumentFormattingEdits:(s,o,a)=>i.provideDocumentFormattingEdits?i.provideDocumentFormattingEdits(s,o,a,n):n(s,o,a)})}},wre=class extends Ic{constructor(e){super(e,Pe.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){dn(dn(e,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(e,t){!e.documentRangeFormattingProvider||!t||this.register(this.messages,{id:io.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(s,o,a,c)=>{let l={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(s),range:t.code2ProtocolConverter.asRange(o),options:t.code2ProtocolConverter.asFormattingOptions(a)};return t.sendRequest(Pe.DocumentRangeFormattingRequest.type,l,c).then(t.protocol2CodeConverter.asTextEdits,u=>(t.logFailedRequest(Pe.DocumentRangeFormattingRequest.type,u),Promise.resolve([])))},i=t.clientOptions.middleware;return un.languages.registerDocumentRangeFormattingEditProvider(e.documentSelector,{provideDocumentRangeFormattingEdits:(s,o,a,c)=>i.provideDocumentRangeFormattingEdits?i.provideDocumentRangeFormattingEdits(s,o,a,c,n):n(s,o,a,c)})}},Ere=class extends Ic{constructor(e){super(e,Pe.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){dn(dn(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,t){!e.documentOnTypeFormattingProvider||!t||this.register(this.messages,{id:io.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.documentOnTypeFormattingProvider)})}registerLanguageProvider(e){let t=this._client,n=e.moreTriggerCharacter||[],i=(o,a,c,l,u)=>{let d={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(o),position:t.code2ProtocolConverter.asPosition(a),ch:c,options:t.code2ProtocolConverter.asFormattingOptions(l)};return t.sendRequest(Pe.DocumentOnTypeFormattingRequest.type,d,u).then(t.protocol2CodeConverter.asTextEdits,p=>(t.logFailedRequest(Pe.DocumentOnTypeFormattingRequest.type,p),Promise.resolve([])))},s=t.clientOptions.middleware;return un.languages.registerOnTypeFormattingEditProvider(e.documentSelector,{provideOnTypeFormattingEdits:(o,a,c,l,u)=>s.provideOnTypeFormattingEdits?s.provideOnTypeFormattingEdits(o,a,c,l,u,i):i(o,a,c,l,u)},e.firstTriggerCharacter,...n)}},Tre=class extends Ic{constructor(e){super(e,Pe.RenameRequest.type)}fillClientCapabilities(e){let t=dn(dn(e,"textDocument"),"rename");t.dynamicRegistration=!0,t.prepareSupport=!0}initialize(e,t){if(!e.renameProvider||!t)return;let n=Object.assign({},{documentSelector:t});_o.boolean(e.renameProvider)?n.prepareProvider=!1:n.prepareProvider=e.renameProvider.prepareProvider,this.register(this.messages,{id:io.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t=this._client,n=(o,a,c,l)=>{let u={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(o),position:t.code2ProtocolConverter.asPosition(a),newName:c};return t.sendRequest(Pe.RenameRequest.type,u,l).then(t.protocol2CodeConverter.asWorkspaceEdit,d=>(t.logFailedRequest(Pe.RenameRequest.type,d),Promise.reject(new Error(d.message))))},i=(o,a,c)=>{let l={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(o),position:t.code2ProtocolConverter.asPosition(a)};return t.sendRequest(Pe.PrepareRenameRequest.type,l,c).then(u=>Pe.Range.is(u)?t.protocol2CodeConverter.asRange(u):u&&u.range?{range:t.protocol2CodeConverter.asRange(u.range),placeholder:u.placeholder}:null,u=>(t.logFailedRequest(Pe.PrepareRenameRequest.type,u),Promise.reject(new Error(u.message))))},s=t.clientOptions.middleware;return un.languages.registerRenameProvider(e.documentSelector,{provideRenameEdits:(o,a,c,l)=>s.provideRenameEdits?s.provideRenameEdits(o,a,c,l,n):n(o,a,c,l),prepareRename:e.prepareProvider?(o,a,c)=>s.prepareRename?s.prepareRename(o,a,c,i):i(o,a,c):void 0})}},Ire=class extends Ic{constructor(e){super(e,Pe.DocumentLinkRequest.type)}fillClientCapabilities(e){dn(dn(e,"textDocument"),"documentLink").dynamicRegistration=!0}initialize(e,t){!e.documentLinkProvider||!t||this.register(this.messages,{id:io.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.documentLinkProvider)})}registerLanguageProvider(e){let t=this._client,n=(o,a)=>t.sendRequest(Pe.DocumentLinkRequest.type,t.code2ProtocolConverter.asDocumentLinkParams(o),a).then(t.protocol2CodeConverter.asDocumentLinks,c=>{t.logFailedRequest(Pe.DocumentLinkRequest.type,c),Promise.resolve(new Error(c.message))}),i=(o,a)=>t.sendRequest(Pe.DocumentLinkResolveRequest.type,t.code2ProtocolConverter.asDocumentLink(o),a).then(t.protocol2CodeConverter.asDocumentLink,c=>{t.logFailedRequest(Pe.DocumentLinkResolveRequest.type,c),Promise.resolve(new Error(c.message))}),s=t.clientOptions.middleware;return un.languages.registerDocumentLinkProvider(e.documentSelector,{provideDocumentLinks:(o,a)=>s.provideDocumentLinks?s.provideDocumentLinks(o,a,n):n(o,a),resolveDocumentLink:e.resolveProvider?(o,a)=>s.resolveDocumentLink?s.resolveDocumentLink(o,a,i):i(o,a):void 0})}},Rre=class{constructor(e){this._client=e,this._listeners=new Map}get messages(){return Pe.DidChangeConfigurationNotification.type}fillClientCapabilities(e){dn(dn(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let e=this._client.clientOptions.synchronize.configurationSection;e!==void 0&&this.register(this.messages,{id:io.generateUuid(),registerOptions:{section:e}})}register(e,t){let n=un.workspace.onDidChangeConfiguration(i=>{this.onDidChangeConfiguration(t.registerOptions.section,i)});this._listeners.set(t.id,n),t.registerOptions.section!==void 0&&this.onDidChangeConfiguration(t.registerOptions.section,void 0)}unregister(e){let t=this._listeners.get(e);t&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}onDidChangeConfiguration(e,t){let n;if(_o.string(e)?n=[e]:n=e,n!==void 0&&t!==void 0&&!n.some(a=>t.affectsConfiguration(a)))return;let i=o=>{if(o===void 0){this._client.sendNotification(Pe.DidChangeConfigurationNotification.type,{settings:null});return}this._client.sendNotification(Pe.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(o)})},s=this.getMiddleware();s?s(n,i):i(n)}extractSettingsInformation(e){function t(s,o){let a=s;for(let c=0;c<o.length-1;c++){let l=a[o[c]];l||(l=Object.create(null),a[o[c]]=l),a=l}return a}let n=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,i=Object.create(null);for(let s=0;s<e.length;s++){let o=e[s],a=o.indexOf("."),c=null;if(a>=0?c=un.workspace.getConfiguration(o.substr(0,a),n).get(o.substr(a+1)):c=un.workspace.getConfiguration(o,n),c){let l=e[s].split(".");t(i,l)[l[l.length-1]]=c}}return i}getMiddleware(){let e=this._client.clientOptions.middleware;if(e.workspace&&e.workspace.didChangeConfiguration)return e.workspace.didChangeConfiguration}},xre=class{constructor(e){this._client=e,this._commands=new Map}get messages(){return Pe.ExecuteCommandRequest.type}fillClientCapabilities(e){dn(dn(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){e.executeCommandProvider&&this.register(this.messages,{id:io.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e,t){let n=this._client;if(t.registerOptions.commands){let i=[];for(let s of t.registerOptions.commands)i.push(un.commands.registerCommand(s,(...o)=>{let a={command:s,arguments:o};return n.sendRequest(Pe.ExecuteCommandRequest.type,a).then(void 0,c=>{n.logFailedRequest(Pe.ExecuteCommandRequest.type,c)})}));this._commands.set(t.id,i)}}unregister(e){let t=this._commands.get(e);t&&t.forEach(n=>n.dispose())}dispose(){this._commands.forEach(e=>{e.forEach(t=>t.dispose())}),this._commands.clear()}},Ekt;(function(r){function e(t){return t&&Pe.MessageReader.is(t.reader)&&Pe.MessageWriter.is(t.writer)}r.is=e})(Ekt=tl.MessageTransports||(tl.MessageTransports={}));var GB=class{constructor(e,t){this._resolve=e,this._reject=t,this._used=!1}get isUsed(){return this._used}resolve(){this._used=!0,this._resolve()}reject(e){this._used=!0,this._reject(e)}},Ore=class{constructor(e,t,n){this._traceFormat=Pe.TraceFormat.Text,this._features=[],this._method2Message=new Map,this._dynamicFeatures=new Map,this._id=e,this._name=t,n=n||{},this._clientOptions={documentSelector:n.documentSelector||[],synchronize:n.synchronize||{},diagnosticCollectionName:n.diagnosticCollectionName,outputChannelName:n.outputChannelName||this._name,revealOutputChannelOn:n.revealOutputChannelOn||wD.Error,stdioEncoding:n.stdioEncoding||"utf8",initializationOptions:n.initializationOptions,initializationFailedHandler:n.initializationFailedHandler,errorHandler:n.errorHandler||new BB(this._name),middleware:n.middleware||{},uriConverters:n.uriConverters,workspaceFolder:n.workspaceFolder},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this.state=jo.Initial,this._connectionPromise=void 0,this._resolvedConnection=void 0,this._initializeResult=void 0,n.outputChannel?(this._outputChannel=n.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._listeners=void 0,this._providers=void 0,this._diagnostics=void 0,this._fileEvents=[],this._fileEventDelayer=new aAe.Delayer(250),this._onReady=new Promise((i,s)=>{this._onReadyCallbacks=new GB(i,s)}),this._onStop=void 0,this._telemetryEmitter=new Pe.Emitter,this._stateChangeEmitter=new Pe.Emitter,this._tracer={log:(i,s)=>{_o.string(i)?this.logTrace(i,s):this.logObjectTrace(i)}},this._c2p=Skt.createConverter(n.uriConverters?n.uriConverters.code2Protocol:void 0),this._p2c=Ckt.createConverter(n.uriConverters?n.uriConverters.protocol2Code:void 0),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get state(){return this._state}set state(e){let t=this.getPublicState();this._state=e;let n=this.getPublicState();n!==t&&this._stateChangeEmitter.fire({oldState:t,newState:n})}getPublicState(){return this.state===jo.Running?jB.Running:this.state===jo.Starting?jB.Starting:jB.Stopped}get initializeResult(){return this._initializeResult}sendRequest(e,...t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{return this._resolvedConnection.sendRequest(e,...t)}catch(n){throw this.error(`Sending request ${_o.string(e)?e:e.method} failed.`,n),n}}onRequest(e,t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{this._resolvedConnection.onRequest(e,t)}catch(n){throw this.error(`Registering request handler ${_o.string(e)?e:e.method} failed.`,n),n}}sendNotification(e,t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendNotification(e,t)}catch(n){throw this.error(`Sending notification ${_o.string(e)?e:e.method} failed.`,n),n}}onNotification(e,t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{this._resolvedConnection.onNotification(e,t)}catch(n){throw this.error(`Registering notification handler ${_o.string(e)?e:e.method} failed.`,n),n}}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=un.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get diagnostics(){return this._diagnostics}createDefaultErrorHandler(){return new BB(this._name)}set trace(e){this._trace=e,this.onReady().then(()=>{this.resolveConnection().then(t=>{t.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})})},()=>{})}data2String(e){if(e instanceof Pe.ResponseError){let t=e;return`  Message: ${t.message}
  Code: ${t.code} ${t.data?`
`+t.data.toString():""}`}return e instanceof Error?_o.string(e.stack)?e.stack:e.message:_o.string(e)?e:e.toString()}info(e,t){this.outputChannel.appendLine(`[Info  - ${new Date().toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t)),this._clientOptions.revealOutputChannelOn<=wD.Info&&this.outputChannel.show(!0)}warn(e,t){this.outputChannel.appendLine(`[Warn  - ${new Date().toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t)),this._clientOptions.revealOutputChannelOn<=wD.Warn&&this.outputChannel.show(!0)}error(e,t){this.outputChannel.appendLine(`[Error - ${new Date().toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t)),this._clientOptions.revealOutputChannelOn<=wD.Error&&this.outputChannel.show(!0)}logTrace(e,t){this.outputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t))}logObjectTrace(e){e.isLSPMessage&&e.type?this.outputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.outputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),e&&this.outputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.state===jo.Initial||this.state===jo.Stopping||this.state===jo.Stopped}needsStop(){return this.state===jo.Starting||this.state===jo.Running}onReady(){return this._onReady}isConnectionActive(){return this.state===jo.Running&&!!this._resolvedConnection}start(){return this._onReadyCallbacks.isUsed&&(this._onReady=new Promise((e,t)=>{this._onReadyCallbacks=new GB(e,t)})),this._listeners=[],this._providers=[],this._diagnostics||(this._diagnostics=this._clientOptions.diagnosticCollectionName?un.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):un.languages.createDiagnosticCollection()),this.state=jo.Starting,this.resolveConnection().then(e=>(e.onLogMessage(t=>{switch(t.type){case Pe.MessageType.Error:this.error(t.message);break;case Pe.MessageType.Warning:this.warn(t.message);break;case Pe.MessageType.Info:this.info(t.message);break;default:this.outputChannel.appendLine(t.message)}}),e.onShowMessage(t=>{switch(t.type){case Pe.MessageType.Error:un.window.showErrorMessage(t.message);break;case Pe.MessageType.Warning:un.window.showWarningMessage(t.message);break;case Pe.MessageType.Info:un.window.showInformationMessage(t.message);break;default:un.window.showInformationMessage(t.message)}}),e.onRequest(Pe.ShowMessageRequest.type,t=>{let n;switch(t.type){case Pe.MessageType.Error:n=un.window.showErrorMessage;break;case Pe.MessageType.Warning:n=un.window.showWarningMessage;break;case Pe.MessageType.Info:n=un.window.showInformationMessage;break;default:n=un.window.showInformationMessage}let i=t.actions||[];return n(t.message,...i)}),e.onTelemetry(t=>{this._telemetryEmitter.fire(t)}),e.listen(),this.initialize(e))).then(void 0,e=>{this.state=jo.StartFailed,this._onReadyCallbacks.reject(e),this.error("Starting client failed",e),un.window.showErrorMessage(`Couldn't start client ${this._name}`)}),new un.Disposable(()=>{this.needsStop()&&this.stop()})}resolveConnection(){return this._connectionPromise||(this._connectionPromise=this.createConnection()),this._connectionPromise}initialize(e){this.refreshTrace(e,!1);let t=this._clientOptions.initializationOptions,n=this._clientOptions.workspaceFolder?this._clientOptions.workspaceFolder.uri.fsPath:this._clientGetRootPath(),i={processId:process.pid,rootPath:n||null,rootUri:n?this._c2p.asUri(un.Uri.file(n)):null,capabilities:this.computeClientCapabilities(),initializationOptions:_o.func(t)?t():t,trace:Pe.Trace.toString(this._trace),workspaceFolders:null};return this.fillInitializeParams(i),e.initialize(i).then(s=>{this._resolvedConnection=e,this._initializeResult=s,this.state=jo.Running;let o;return _o.number(s.capabilities.textDocumentSync)?s.capabilities.textDocumentSync===Pe.TextDocumentSyncKind.None?o={openClose:!1,change:Pe.TextDocumentSyncKind.None,save:void 0}:o={openClose:!0,change:s.capabilities.textDocumentSync,save:{includeText:!1}}:s.capabilities.textDocumentSync!==void 0&&s.capabilities.textDocumentSync!==null&&(o=s.capabilities.textDocumentSync),this._capabilities=Object.assign({},s.capabilities,{resolvedTextDocumentSync:o}),e.onDiagnostics(a=>this.handleDiagnostics(a)),e.onRequest(Pe.RegistrationRequest.type,a=>this.handleRegistrationRequest(a)),e.onRequest("client/registerFeature",a=>this.handleRegistrationRequest(a)),e.onRequest(Pe.UnregistrationRequest.type,a=>this.handleUnregistrationRequest(a)),e.onRequest("client/unregisterFeature",a=>this.handleUnregistrationRequest(a)),e.onRequest(Pe.ApplyWorkspaceEditRequest.type,a=>this.handleApplyWorkspaceEdit(a)),e.sendNotification(Pe.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),this._onReadyCallbacks.resolve(),s}).then(void 0,s=>{this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(s)?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(s)):s instanceof Pe.ResponseError&&s.data&&s.data.retry?un.window.showErrorMessage(s.message,{title:"Retry",id:"retry"}).then(o=>{o&&o.id==="retry"?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(s))}):(s&&s.message&&un.window.showErrorMessage(s.message),this.error("Server initialization failed.",s),this.stop(),this._onReadyCallbacks.reject(s))})}_clientGetRootPath(){let e=un.workspace.workspaceFolders;if(!e||e.length===0)return;let t=e[0];if(t.uri.scheme==="file")return t.uri.fsPath}stop(){return this._initializeResult=void 0,this._connectionPromise?this.state===jo.Stopping&&this._onStop?this._onStop:(this.state=jo.Stopping,this.cleanUp(),this._onStop=this.resolveConnection().then(e=>e.shutdown().then(()=>{e.exit(),e.dispose(),this.state=jo.Stopped,this._onStop=void 0,this._connectionPromise=void 0,this._resolvedConnection=void 0}))):(this.state=jo.Stopped,Promise.resolve())}cleanUp(e=!0,t=!0){this._listeners&&(this._listeners.forEach(n=>n.dispose()),this._listeners=void 0),this._providers&&(this._providers.forEach(n=>n.dispose()),this._providers=void 0),this._syncedDocuments&&this._syncedDocuments.clear();for(let n of this._dynamicFeatures.values())n.dispose();e&&this._outputChannel&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0),t&&this._diagnostics&&(this._diagnostics.dispose(),this._diagnostics=void 0)}notifyFileEvent(e){this._fileEvents.push(e),this._fileEventDelayer.trigger(()=>{this.onReady().then(()=>{this.resolveConnection().then(t=>{this.isConnectionActive()&&t.didChangeWatchedFiles({changes:this._fileEvents}),this._fileEvents=[]})},t=>{this.error("Notify file events failed.",t)})})}forceDocumentSync(){this._dynamicFeatures.get(Pe.DidChangeTextDocumentNotification.type.method).forceDelivery()}handleDiagnostics(e){if(!this._diagnostics)return;let t=this._p2c.asUri(e.uri),n=this._p2c.asDiagnostics(e.diagnostics),i=this.clientOptions.middleware.handleDiagnostics;i?i(t,n,(s,o)=>this.setDiagnostics(s,o)):this.setDiagnostics(t,n)}setDiagnostics(e,t){this._diagnostics&&this._diagnostics.set(e,t)}createConnection(){let e=(n,i,s)=>{this.handleConnectionError(n,i,s)},t=()=>{this.handleConnectionClosed()};return this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8").then(n=>Pkt(n.reader,n.writer,e,t))}handleConnectionClosed(){if(this.state===jo.Stopping||this.state===jo.Stopped)return;try{this._resolvedConnection&&this._resolvedConnection.dispose()}catch{}let e=YS.DoNotRestart;try{e=this._clientOptions.errorHandler.closed()}catch{}this._connectionPromise=void 0,this._resolvedConnection=void 0,e===YS.DoNotRestart?(this.error("Connection to server got closed. Server will not be restarted."),this.state=jo.Stopped,this.cleanUp(!1,!0)):e===YS.Restart&&(this.info("Connection to server got closed. Server will restart."),this.cleanUp(!1,!1),this.state=jo.Initial,this.start())}handleConnectionError(e,t,n){this._clientOptions.errorHandler.error(e,t,n)===UB.Shutdown&&(this.error("Connection to server is erroring. Shutting down server."),this.stop())}hookConfigurationChanged(e){un.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,!0)})}refreshTrace(e,t=!1){let n=un.workspace.getConfiguration(this._id),i=Pe.Trace.Off,s=Pe.TraceFormat.Text;if(n){let o=n.get("trace.server","off");typeof o=="string"?i=Pe.Trace.fromString(o):(i=Pe.Trace.fromString(n.get("trace.server.verbosity","off")),s=Pe.TraceFormat.fromString(n.get("trace.server.format","text")))}this._trace=i,this._traceFormat=s,e.trace(this._trace,this._tracer,{sendNotification:t,traceFormat:this._traceFormat})}hookFileEvents(e){let t=this._clientOptions.synchronize.fileEvents;if(!t)return;let n;_o.array(t)?n=t:n=[t],n&&this._dynamicFeatures.get(Pe.DidChangeWatchedFilesNotification.type.method).registerRaw(io.generateUuid(),n)}registerFeatures(e){for(let t of e)this.registerFeature(t)}registerFeature(e){if(this._features.push(e),ire.is(e)){let t=e.messages;if(Array.isArray(t))for(let n of t)this._method2Message.set(n.method,n),this._dynamicFeatures.set(n.method,e);else this._method2Message.set(t.method,t),this._dynamicFeatures.set(t.method,e)}}registerBuiltinFeatures(){this.registerFeature(new Rre(this)),this.registerFeature(new sre(this,this._syncedDocuments)),this.registerFeature(new are(this)),this.registerFeature(new cre(this)),this.registerFeature(new lre(this)),this.registerFeature(new ure(this)),this.registerFeature(new ore(this,this._syncedDocuments)),this.registerFeature(new dre(this,e=>this.notifyFileEvent(e))),this.registerFeature(new mre(this)),this.registerFeature(new hre(this)),this.registerFeature(new fre(this)),this.registerFeature(new gre(this)),this.registerFeature(new yre(this)),this.registerFeature(new vre(this)),this.registerFeature(new bre(this)),this.registerFeature(new _re(this)),this.registerFeature(new Sre(this)),this.registerFeature(new Cre(this)),this.registerFeature(new Pre(this)),this.registerFeature(new wre(this)),this.registerFeature(new Ere(this)),this.registerFeature(new Tre(this)),this.registerFeature(new Ire(this)),this.registerFeature(new xre(this))}fillInitializeParams(e){for(let t of this._features)_o.func(t.fillInitializeParams)&&t.fillInitializeParams(e)}computeClientCapabilities(){let e={};dn(e,"workspace").applyEdit=!0;let t=dn(dn(e,"workspace"),"workspaceEdit");t.documentChanges=!0,t.resourceOperations=[Pe.ResourceOperationKind.Create,Pe.ResourceOperationKind.Rename,Pe.ResourceOperationKind.Delete],t.failureHandling=Pe.FailureHandlingKind.TextOnlyTransactional,dn(dn(e,"textDocument"),"publishDiagnostics").relatedInformation=!0;for(let n of this._features)n.fillClientCapabilities(e);return e}initializeFeatures(e){let t=this._clientOptions.documentSelector;for(let n of this._features)n.initialize(this._capabilities,t)}handleRegistrationRequest(e){return new Promise((t,n)=>{for(let i of e.registrations){let s=this._dynamicFeatures.get(i.method);if(!s){n(new Error(`No feature implementation for ${i.method} found. Registration failed.`));return}let o=i.registerOptions||{};o.documentSelector=o.documentSelector||this._clientOptions.documentSelector;let a={id:i.id,registerOptions:o};s.register(this._method2Message.get(i.method),a)}t()})}handleUnregistrationRequest(e){return new Promise((t,n)=>{for(let i of e.unregisterations){let s=this._dynamicFeatures.get(i.method);if(!s){n(new Error(`No feature implementation for ${i.method} found. Unregistration failed.`));return}s.unregister(i.id)}t()})}handleApplyWorkspaceEdit(e){let t=e.edit,n=new Map;un.workspace.textDocuments.forEach(s=>n.set(s.uri.toString(),s));let i=!1;if(t.documentChanges){for(let s of t.documentChanges)if(Pe.TextDocumentEdit.is(s)&&s.textDocument.version&&s.textDocument.version>=0){let o=n.get(s.textDocument.uri);if(o&&o.version!==s.textDocument.version){i=!0;break}}}return i?Promise.resolve({applied:!1}):un.workspace.applyEdit(this._p2c.asWorkspaceEdit(e.edit)).then(s=>({applied:s}))}logFailedRequest(e,t){t instanceof Pe.ResponseError&&t.code===Pe.ErrorCodes.RequestCancelled||this.error(`Request ${e.method} failed.`,t)}};tl.BaseLanguageClient=Ore});var uAe=O(Nre=>{"use strict";Object.defineProperty(Nre,"__esModule",{value:!0});var Tkt=Ov(),Ikt=Dh(),$B=require("vscode"),ED=Ku(),Rkt=Av();function lAe(r,e){return r[e]===void 0&&(r[e]={}),r[e]}var Are=class extends Rkt.TextDocumentFeature{constructor(e){super(e,ED.DocumentColorRequest.type)}fillClientCapabilities(e){lAe(lAe(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,t){if(!e.colorProvider)return;let n=e.colorProvider,i=Ikt.string(n.id)&&n.id.length>0?n.id:Tkt.generateUuid(),s=n.documentSelector||t;s&&this.register(this.messages,{id:i,registerOptions:Object.assign({},{documentSelector:s})})}registerLanguageProvider(e){let t=this._client,n=(o,a,c)=>{let l={color:o,textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(a.document),range:t.code2ProtocolConverter.asRange(a.range)};return t.sendRequest(ED.ColorPresentationRequest.type,l,c).then(this.asColorPresentations.bind(this),u=>(t.logFailedRequest(ED.ColorPresentationRequest.type,u),Promise.resolve(null)))},i=(o,a)=>{let c={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(o)};return t.sendRequest(ED.DocumentColorRequest.type,c,a).then(this.asColorInformations.bind(this),l=>(t.logFailedRequest(ED.ColorPresentationRequest.type,l),Promise.resolve(null)))},s=t.clientOptions.middleware;return $B.languages.registerColorProvider(e.documentSelector,{provideColorPresentations:(o,a,c)=>s.provideColorPresentations?s.provideColorPresentations(o,a,c,n):n(o,a,c),provideDocumentColors:(o,a)=>s.provideDocumentColors?s.provideDocumentColors(o,a,i):i(o,a)})}asColor(e){return new $B.Color(e.red,e.green,e.blue,e.alpha)}asColorInformations(e){return Array.isArray(e)?e.map(t=>new $B.ColorInformation(this._client.protocol2CodeConverter.asRange(t.range),this.asColor(t.color))):[]}asColorPresentations(e){return Array.isArray(e)?e.map(t=>{let n=new $B.ColorPresentation(t.label);return n.additionalTextEdits=this._client.protocol2CodeConverter.asTextEdits(t.additionalTextEdits),n.textEdit=this._client.protocol2CodeConverter.asTextEdit(t.textEdit),n}):[]}};Nre.ColorProviderFeature=Are});var dAe=O(kre=>{"use strict";Object.defineProperty(kre,"__esModule",{value:!0});var Dre=require("vscode"),xkt=Ku(),Mre=class{constructor(e){this._client=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(xkt.ConfigurationRequest.type,(t,n)=>{let i=o=>{let a=[];for(let c of o.items){let l=c.scopeUri!==void 0&&c.scopeUri!==null?this._client.protocol2CodeConverter.asUri(c.scopeUri):void 0;a.push(this.getConfiguration(l,c.section!==null?c.section:void 0))}return a},s=e.clientOptions.middleware.workspace;return s&&s.configuration?s.configuration(t,n,i):i(t,n)})}getConfiguration(e,t){let n=null;if(t){let i=t.lastIndexOf(".");if(i===-1)n=Dre.workspace.getConfiguration(void 0,e).get(t);else{let s=Dre.workspace.getConfiguration(t.substr(0,i));s&&(n=s.get(t.substr(i+1)))}}else{let i=Dre.workspace.getConfiguration(void 0,e);n={};for(let s of Object.keys(i))i.has(s)&&(n[s]=i.get(s))}return n||null}};kre.ConfigurationFeature=Mre});var hAe=O(zre=>{"use strict";Object.defineProperty(zre,"__esModule",{value:!0});var pAe=Ov(),Okt=Dh(),Akt=require("vscode"),Lre=Ku(),Nkt=Av();function mAe(r,e){return r[e]===void 0&&(r[e]={}),r[e]}var qre=class extends Nkt.TextDocumentFeature{constructor(e){super(e,Lre.ImplementationRequest.type)}fillClientCapabilities(e){let t=mAe(mAe(e,"textDocument"),"implementation");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){if(e.implementationProvider)if(e.implementationProvider===!0){if(!t)return;this.register(this.messages,{id:pAe.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}else{let n=e.implementationProvider,i=Okt.string(n.id)&&n.id.length>0?n.id:pAe.generateUuid(),s=n.documentSelector||t;s&&this.register(this.messages,{id:i,registerOptions:Object.assign({},{documentSelector:s})})}}registerLanguageProvider(e){let t=this._client,n=(s,o,a)=>t.sendRequest(Lre.ImplementationRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(s,o),a).then(t.protocol2CodeConverter.asDefinitionResult,c=>(t.logFailedRequest(Lre.ImplementationRequest.type,c),Promise.resolve(null))),i=t.clientOptions.middleware;return Akt.languages.registerImplementationProvider(e.documentSelector,{provideImplementation:(s,o,a)=>i.provideImplementation?i.provideImplementation(s,o,a,n):n(s,o,a)})}};zre.ImplementationFeature=qre});var gAe=O(Ure=>{"use strict";Object.defineProperty(Ure,"__esModule",{value:!0});var fAe=Ov(),Dkt=Dh(),Mkt=require("vscode"),Fre=Ku(),kkt=Av();function VB(r,e){return r[e]===void 0&&(r[e]={}),r[e]}var jre=class extends kkt.TextDocumentFeature{constructor(e){super(e,Fre.TypeDefinitionRequest.type)}fillClientCapabilities(e){VB(VB(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let t=VB(VB(e,"textDocument"),"typeDefinition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){if(e.typeDefinitionProvider)if(e.typeDefinitionProvider===!0){if(!t)return;this.register(this.messages,{id:fAe.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}else{let n=e.typeDefinitionProvider,i=Dkt.string(n.id)&&n.id.length>0?n.id:fAe.generateUuid(),s=n.documentSelector||t;s&&this.register(this.messages,{id:i,registerOptions:Object.assign({},{documentSelector:s})})}}registerLanguageProvider(e){let t=this._client,n=(s,o,a)=>t.sendRequest(Fre.TypeDefinitionRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(s,o),a).then(t.protocol2CodeConverter.asDefinitionResult,c=>(t.logFailedRequest(Fre.TypeDefinitionRequest.type,c),Promise.resolve(null))),i=t.clientOptions.middleware;return Mkt.languages.registerTypeDefinitionProvider(e.documentSelector,{provideTypeDefinition:(s,o,a)=>i.provideTypeDefinition?i.provideTypeDefinition(s,o,a,n):n(s,o,a)})}};Ure.TypeDefinitionFeature=jre});var yAe=O(Hre=>{"use strict";Object.defineProperty(Hre,"__esModule",{value:!0});var Lkt=Ov(),Bre=require("vscode"),Gre=Ku();function $re(r,e){if(r!==void 0)return r[e]}var Vre=class{constructor(e){this._client=e,this._listeners=new Map}get messages(){return Gre.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let t=Bre.workspace.workspaceFolders;t===void 0?e.workspaceFolders=null:e.workspaceFolders=t.map(n=>this.asProtocol(n))}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let t=this._client;t.onRequest(Gre.WorkspaceFoldersRequest.type,s=>{let o=()=>{let c=Bre.workspace.workspaceFolders;return c===void 0?null:c.map(u=>this.asProtocol(u))},a=t.clientOptions.middleware.workspace;return a&&a.workspaceFolders?a.workspaceFolders(s,o):o(s)});let n=$re($re($re(e,"workspace"),"workspaceFolders"),"changeNotifications"),i;typeof n=="string"?i=n:n===!0&&(i=Lkt.generateUuid()),i&&this.register(this.messages,{id:i,registerOptions:void 0})}register(e,t){let n=t.id,i=this._client,s=Bre.workspace.onDidChangeWorkspaceFolders(o=>{let a=l=>{let u={event:{added:l.added.map(d=>this.asProtocol(d)),removed:l.removed.map(d=>this.asProtocol(d))}};this._client.sendNotification(Gre.DidChangeWorkspaceFoldersNotification.type,u)},c=i.clientOptions.middleware.workspace;c&&c.didChangeWorkspaceFolders?c.didChangeWorkspaceFolders(o,a):a(o)});this._listeners.set(n,s)}unregister(e){let t=this._listeners.get(e);t!==void 0&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};Hre.WorkspaceFoldersFeature=Vre});var bAe=O(Kre=>{"use strict";Object.defineProperty(Kre,"__esModule",{value:!0});var qkt=Ov(),zkt=Dh(),TD=require("vscode"),sT=Ku(),Fkt=Av();function vAe(r,e){return r[e]===void 0&&(r[e]={}),r[e]}var Wre=class extends Fkt.TextDocumentFeature{constructor(e){super(e,sT.FoldingRangeRequest.type)}fillClientCapabilities(e){let t=vAe(vAe(e,"textDocument"),"foldingRange");t.dynamicRegistration=!0,t.rangeLimit=5e3,t.lineFoldingOnly=!0}initialize(e,t){if(!e.foldingRangeProvider)return;let n=e.foldingRangeProvider,i=zkt.string(n.id)&&n.id.length>0?n.id:qkt.generateUuid(),s=n.documentSelector||t;s&&this.register(this.messages,{id:i,registerOptions:Object.assign({},{documentSelector:s})})}registerLanguageProvider(e){let t=this._client,n=(s,o,a)=>{let c={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(s)};return t.sendRequest(sT.FoldingRangeRequest.type,c,a).then(this.asFoldingRanges.bind(this),l=>(t.logFailedRequest(sT.FoldingRangeRequest.type,l),Promise.resolve(null)))},i=t.clientOptions.middleware;return TD.languages.registerFoldingRangeProvider(e.documentSelector,{provideFoldingRanges(s,o,a){return i.provideFoldingRanges?i.provideFoldingRanges(s,o,a,n):n(s,o,a)}})}asFoldingRangeKind(e){if(e)switch(e){case sT.FoldingRangeKind.Comment:return TD.FoldingRangeKind.Comment;case sT.FoldingRangeKind.Imports:return TD.FoldingRangeKind.Imports;case sT.FoldingRangeKind.Region:return TD.FoldingRangeKind.Region}}asFoldingRanges(e){return Array.isArray(e)?e.map(t=>new TD.FoldingRange(t.startLine,t.endLine,this.asFoldingRangeKind(t.kind))):[]}};Kre.FoldingRangeFeature=Wre});var CAe=O(Xre=>{"use strict";Object.defineProperty(Xre,"__esModule",{value:!0});var _Ae=Ov(),jkt=Dh(),Ukt=require("vscode"),Qre=Ku(),Bkt=Av();function SAe(r,e){return r[e]===void 0&&(r[e]={}),r[e]}var Yre=class extends Bkt.TextDocumentFeature{constructor(e){super(e,Qre.DeclarationRequest.type)}fillClientCapabilities(e){let t=SAe(SAe(e,"textDocument"),"declaration");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){if(e.declarationProvider)if(e.declarationProvider===!0){if(!t)return;this.register(this.messages,{id:_Ae.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}else{let n=e.declarationProvider,i=jkt.string(n.id)&&n.id.length>0?n.id:_Ae.generateUuid(),s=n.documentSelector||t;s&&this.register(this.messages,{id:i,registerOptions:Object.assign({},{documentSelector:s})})}}registerLanguageProvider(e){let t=this._client,n=(s,o,a)=>t.sendRequest(Qre.DeclarationRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(s,o),a).then(t.protocol2CodeConverter.asDeclarationResult,c=>(t.logFailedRequest(Qre.DeclarationRequest.type,c),Promise.resolve(null))),i=t.clientOptions.middleware;return Ukt.languages.registerDeclarationProvider(e.documentSelector,{provideDeclaration:(s,o,a)=>i.provideDeclaration?i.provideDeclaration(s,o,a,n):n(s,o,a)})}};Xre.DeclarationFeature=Yre});var wAe=O(Jre=>{"use strict";Object.defineProperty(Jre,"__esModule",{value:!0});var PAe=require("child_process"),Gkt=require("path"),$kt=process.platform==="win32",Vkt=process.platform==="darwin",Hkt=process.platform==="linux";function Wkt(r,e){if($kt)try{let i={stdio:["pipe","pipe","ignore"]};return e&&(i.cwd=e),PAe.execFileSync("taskkill",["/T","/F","/PID",r.pid.toString()],i),!0}catch{return!1}else if(Hkt||Vkt)try{var t=Gkt.join(__dirname,"terminateProcess.sh"),n=PAe.spawnSync(t,[r.pid.toString()]);return!n.error}catch{return!1}else return r.kill("SIGKILL"),!0}Jre.terminate=Wkt});var Vi=O(kh=>{"use strict";function Kkt(r){for(var e in r)kh.hasOwnProperty(e)||(kh[e]=r[e])}Object.defineProperty(kh,"__esModule",{value:!0});var XS=require("child_process"),Qkt=require("fs"),EAe=dOe(),TAe=Av(),Nv=require("vscode"),ya=Ku(),Ykt=uAe(),Xkt=dAe(),Jkt=hAe(),Zkt=gAe(),eLt=yAe(),tLt=bAe(),rLt=CAe(),va=Dh(),nLt=wAe();Kkt(Av());var IAe="^1.30",Zre;(function(r){function e(t){return va.string(t.command)}r.is=e})(Zre||(Zre={}));var Rc;(function(r){r[r.stdio=0]="stdio",r[r.ipc=1]="ipc",r[r.pipe=2]="pipe",r[r.socket=3]="socket"})(Rc=kh.TransportKind||(kh.TransportKind={}));var oT;(function(r){function e(t){let n=t;return n&&n.kind===Rc.socket&&va.number(n.port)}r.isSocket=e})(oT||(oT={}));var ene;(function(r){function e(t){return va.string(t.module)}r.is=e})(ene||(ene={}));var tne;(function(r){function e(t){let n=t;return n&&n.writer!==void 0&&n.reader!==void 0}r.is=e})(tne||(tne={}));var rne;(function(r){function e(t){let n=t;return n&&n.process!==void 0&&typeof n.detached=="boolean"}r.is=e})(rne||(rne={}));var nne=class extends TAe.BaseLanguageClient{constructor(e,t,n,i,s){let o,a,c,l,u;va.string(t)?(o=e,a=t,c=n,l=i,u=!!s):(o=e.toLowerCase(),a=e,c=t,l=n,u=i),u===void 0&&(u=!1),super(o,a,l),this._serverOptions=c,this._forceDebug=u;try{this.checkVersion()}catch(d){throw va.string(d.message)&&this.outputChannel.appendLine(d.message),d}}checkVersion(){let e=EAe.parse(Nv.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${Nv.version}`);if(e.prerelease&&e.prerelease.length>0&&(e.prerelease=[]),!EAe.satisfies(e,IAe))throw new Error(`The language client requires VS Code version ${IAe} but received version ${Nv.version}`)}stop(){return super.stop().then(()=>{if(this._serverProcess){let e=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&&this.checkProcessDied(e),this._isDetached=void 0}})}checkProcessDied(e){e&&setTimeout(()=>{try{process.kill(e.pid,0),nLt.terminate(e)}catch{}},2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}createMessageTransports(e){function t(a){if(!a)return process.env;let c=Object.create(null);return Object.keys(process.env).forEach(l=>c[l]=process.env[l]),Object.keys(a).forEach(l=>c[l]=a[l]),c}function n(){let a=process.execArgv;return a?a.some(c=>/^--debug=?/.test(c)||/^--debug-brk=?/.test(c)||/^--inspect=?/.test(c)||/^--inspect-brk=?/.test(c)):!1}let i=this._serverOptions;if(va.func(i))return i().then(a=>{if(TAe.MessageTransports.is(a))return this._isDetached=!!a.detached,a;if(tne.is(a))return this._isDetached=!!a.detached,{reader:new ya.StreamMessageReader(a.reader),writer:new ya.StreamMessageWriter(a.writer)};{let c;return rne.is(a)?(c=a.process,this._isDetached=a.detached):(c=a,this._isDetached=!1),c.stderr.on("data",l=>this.outputChannel.append(va.string(l)?l:l.toString(e))),{reader:new ya.StreamMessageReader(c.stdout),writer:new ya.StreamMessageWriter(c.stdin)}}});let s,o=i;return o.run||o.debug?typeof v8debug=="object"||this._forceDebug||n()?s=o.debug:s=o.run:s=i,this._getServerWorkingDir(s.options).then(a=>{if(ene.is(s)&&s.module){let c=s,l=c.transport||Rc.stdio;if(c.runtime){let u=[],d=c.options||Object.create(null);d.execArgv&&d.execArgv.forEach(f=>u.push(f)),u.push(c.module),c.args&&c.args.forEach(f=>u.push(f));let p=Object.create(null);p.cwd=a,p.env=t(d.env);let m;if(l===Rc.ipc?(p.stdio=[null,null,null,"ipc"],u.push("--node-ipc")):l===Rc.stdio?u.push("--stdio"):l===Rc.pipe?(m=ya.generateRandomPipeName(),u.push(`--pipe=${m}`)):oT.isSocket(l)&&u.push(`--socket=${l.port}`),u.push(`--clientProcessId=${process.pid.toString()}`),l===Rc.ipc||l===Rc.stdio){let f=XS.spawn(c.runtime,u,p);return!f||!f.pid?Promise.reject(`Launching server using runtime ${c.runtime} failed.`):(this._serverProcess=f,f.stderr.on("data",y=>this.outputChannel.append(va.string(y)?y:y.toString(e))),l===Rc.ipc?(f.stdout.on("data",y=>this.outputChannel.append(va.string(y)?y:y.toString(e))),Promise.resolve({reader:new ya.IPCMessageReader(f),writer:new ya.IPCMessageWriter(f)})):Promise.resolve({reader:new ya.StreamMessageReader(f.stdout),writer:new ya.StreamMessageWriter(f.stdin)}))}else{if(l==Rc.pipe)return ya.createClientPipeTransport(m).then(f=>{let y=XS.spawn(c.runtime,u,p);return!y||!y.pid?Promise.reject(`Launching server using runtime ${c.runtime} failed.`):(this._serverProcess=y,y.stderr.on("data",v=>this.outputChannel.append(va.string(v)?v:v.toString(e))),y.stdout.on("data",v=>this.outputChannel.append(va.string(v)?v:v.toString(e))),f.onConnected().then(v=>({reader:v[0],writer:v[1]})))});if(oT.isSocket(l))return ya.createClientSocketTransport(l.port).then(f=>{let y=XS.spawn(c.runtime,u,p);return!y||!y.pid?Promise.reject(`Launching server using runtime ${c.runtime} failed.`):(this._serverProcess=y,y.stderr.on("data",v=>this.outputChannel.append(va.string(v)?v:v.toString(e))),y.stdout.on("data",v=>this.outputChannel.append(va.string(v)?v:v.toString(e))),f.onConnected().then(v=>({reader:v[0],writer:v[1]})))})}}else{let u;return new Promise((d,p)=>{let m=c.args&&c.args.slice()||[];l===Rc.ipc?m.push("--node-ipc"):l===Rc.stdio?m.push("--stdio"):l===Rc.pipe?(u=ya.generateRandomPipeName(),m.push(`--pipe=${u}`)):oT.isSocket(l)&&m.push(`--socket=${l.port}`),m.push(`--clientProcessId=${process.pid.toString()}`);let f=c.options||Object.create(null);if(f.execArgv=f.execArgv||[],f.cwd=a,f.silent=!0,l===Rc.ipc||l===Rc.stdio){let y=XS.fork(c.module,m||[],f);this._serverProcess=y,y.stderr.on("data",v=>this.outputChannel.append(va.string(v)?v:v.toString(e))),l===Rc.ipc?(y.stdout.on("data",v=>this.outputChannel.append(va.string(v)?v:v.toString(e))),d({reader:new ya.IPCMessageReader(this._serverProcess),writer:new ya.IPCMessageWriter(this._serverProcess)})):d({reader:new ya.StreamMessageReader(y.stdout),writer:new ya.StreamMessageWriter(y.stdin)})}else l===Rc.pipe?ya.createClientPipeTransport(u).then(y=>{let v=XS.fork(c.module,m||[],f);this._serverProcess=v,v.stderr.on("data",_=>this.outputChannel.append(va.string(_)?_:_.toString(e))),v.stdout.on("data",_=>this.outputChannel.append(va.string(_)?_:_.toString(e))),y.onConnected().then(_=>{d({reader:_[0],writer:_[1]})})}):oT.isSocket(l)&&ya.createClientSocketTransport(l.port).then(y=>{let v=XS.fork(c.module,m||[],f);this._serverProcess=v,v.stderr.on("data",_=>this.outputChannel.append(va.string(_)?_:_.toString(e))),v.stdout.on("data",_=>this.outputChannel.append(va.string(_)?_:_.toString(e))),y.onConnected().then(_=>{d({reader:_[0],writer:_[1]})})})})}}else if(Zre.is(s)&&s.command){let c=s,l=c.args||[],u=Object.assign({},c.options);u.cwd=u.cwd||a;let d=XS.spawn(c.command,l,u);return!d||!d.pid?Promise.reject(`Launching server using command ${c.command} failed.`):(d.stderr.on("data",p=>this.outputChannel.append(va.string(p)?p:p.toString(e))),this._serverProcess=d,this._isDetached=!!u.detached,Promise.resolve({reader:new ya.StreamMessageReader(d.stdout),writer:new ya.StreamMessageWriter(d.stdin)}))}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(i,null,4)))})}registerProposedFeatures(){this.registerFeatures(RAe.createAll(this))}registerBuiltinFeatures(){super.registerBuiltinFeatures(),this.registerFeature(new Xkt.ConfigurationFeature(this)),this.registerFeature(new Zkt.TypeDefinitionFeature(this)),this.registerFeature(new Jkt.ImplementationFeature(this)),this.registerFeature(new Ykt.ColorProviderFeature(this)),this.registerFeature(new eLt.WorkspaceFoldersFeature(this)),this.registerFeature(new tLt.FoldingRangeFeature(this)),this.registerFeature(new rLt.DeclarationFeature(this))}_mainGetRootPath(){let e=Nv.workspace.workspaceFolders;if(!e||e.length===0)return;let t=e[0];if(t.uri.scheme==="file")return t.uri.fsPath}_getServerWorkingDir(e){let t=e&&e.cwd;return t||(t=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),t?new Promise(n=>{Qkt.lstat(t,(i,s)=>{n(!i&&s.isDirectory()?t:void 0)})}):Promise.resolve(void 0)}};kh.LanguageClient=nne;var ine=class{constructor(e,t){this._client=e,this._setting=t,this._listeners=[]}start(){return Nv.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new Nv.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf("."),t=e>=0?this._setting.substr(0,e):this._setting,n=e>=0?this._setting.substr(e+1):void 0,i=n?Nv.workspace.getConfiguration(t).get(n,!1):Nv.workspace.getConfiguration(t);i&&this._client.needsStart()?this._client.start():!i&&this._client.needsStop()&&this._client.stop()}};kh.SettingMonitor=ine;var RAe;(function(r){function e(t){return[]}r.createAll=e})(RAe=kh.ProposedFeatures||(kh.ProposedFeatures={}))});var KAe=O(lT=>{"use strict";var sbr=require("net"),uLt=require("tls"),lne=require("http"),VAe=require("https"),dLt=require("events"),obr=require("assert"),pLt=require("util");lT.httpOverHttp=mLt;lT.httpsOverHttp=hLt;lT.httpOverHttps=fLt;lT.httpsOverHttps=gLt;function mLt(r){var e=new pg(r);return e.request=lne.request,e}function hLt(r){var e=new pg(r);return e.request=lne.request,e.createSocket=HAe,e.defaultPort=443,e}function fLt(r){var e=new pg(r);return e.request=VAe.request,e}function gLt(r){var e=new pg(r);return e.request=VAe.request,e.createSocket=HAe,e.defaultPort=443,e}function pg(r){var e=this;e.options=r||{},e.proxyOptions=e.options.proxy||{},e.maxSockets=e.options.maxSockets||lne.Agent.defaultMaxSockets,e.requests=[],e.sockets=[],e.on("free",function(n,i,s,o){for(var a=WAe(i,s,o),c=0,l=e.requests.length;c<l;++c){var u=e.requests[c];if(u.host===a.host&&u.port===a.port){e.requests.splice(c,1),u.request.onSocket(n);return}}n.destroy(),e.removeSocket(n)})}pLt.inherits(pg,dLt.EventEmitter);pg.prototype.addRequest=function(e,t,n,i){var s=this,o=une({request:e},s.options,WAe(t,n,i));if(s.sockets.length>=this.maxSockets){s.requests.push(o);return}s.createSocket(o,function(a){a.on("free",c),a.on("close",l),a.on("agentRemove",l),e.onSocket(a);function c(){s.emit("free",a,o)}function l(u){s.removeSocket(a),a.removeListener("free",c),a.removeListener("close",l),a.removeListener("agentRemove",l)}})};pg.prototype.createSocket=function(e,t){var n=this,i={};n.sockets.push(i);var s=une({},n.proxyOptions,{method:"CONNECT",path:e.host+":"+e.port,agent:!1,headers:{host:e.host+":"+e.port}});e.localAddress&&(s.localAddress=e.localAddress),s.proxyAuth&&(s.headers=s.headers||{},s.headers["Proxy-Authorization"]="Basic "+new Buffer(s.proxyAuth).toString("base64")),Dv("making CONNECT request");var o=n.request(s);o.useChunkedEncodingByDefault=!1,o.once("response",a),o.once("upgrade",c),o.once("connect",l),o.once("error",u),o.end();function a(d){d.upgrade=!0}function c(d,p,m){process.nextTick(function(){l(d,p,m)})}function l(d,p,m){if(o.removeAllListeners(),p.removeAllListeners(),d.statusCode!==200){Dv("tunneling socket could not be established, statusCode=%d",d.statusCode),p.destroy();var f=new Error("tunneling socket could not be established, statusCode="+d.statusCode);f.code="ECONNRESET",e.request.emit("error",f),n.removeSocket(i);return}if(m.length>0){Dv("got illegal response body from proxy"),p.destroy();var f=new Error("got illegal response body from proxy");f.code="ECONNRESET",e.request.emit("error",f),n.removeSocket(i);return}return Dv("tunneling connection has established"),n.sockets[n.sockets.indexOf(i)]=p,t(p)}function u(d){o.removeAllListeners(),Dv(`tunneling socket could not be established, cause=%s
`,d.message,d.stack);var p=new Error("tunneling socket could not be established, cause="+d.message);p.code="ECONNRESET",e.request.emit("error",p),n.removeSocket(i)}};pg.prototype.removeSocket=function(e){var t=this.sockets.indexOf(e);if(t!==-1){this.sockets.splice(t,1);var n=this.requests.shift();n&&this.createSocket(n,function(i){n.request.onSocket(i)})}};function HAe(r,e){var t=this;pg.prototype.createSocket.call(t,r,function(n){var i=r.request.getHeader("host"),s=une({},t.options,{socket:n,servername:i?i.replace(/:.*$/,""):r.host}),o=uLt.connect(0,s);t.sockets[t.sockets.indexOf(n)]=o,e(o)})}function WAe(r,e,t){return typeof r=="string"?{host:r,port:e,localAddress:t}:r}function une(r){for(var e=1,t=arguments.length;e<t;++e){var n=arguments[e];if(typeof n=="object")for(var i=Object.keys(n),s=0,o=i.length;s<o;++s){var a=i[s];n[a]!==void 0&&(r[a]=n[a])}}return r}var Dv;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?Dv=function(){var r=Array.prototype.slice.call(arguments);typeof r[0]=="string"?r[0]="TUNNEL: "+r[0]:r.unshift("TUNNEL:"),console.error.apply(console,r)}:Dv=function(){};lT.debug=Dv});var YAe=O((cbr,QAe)=>{QAe.exports=KAe()});var PNe=O(CNe=>{"use strict";var vqt=require("url").parse,bqt={ftp:21,gopher:70,http:80,https:443,ws:80,wss:443},_qt=String.prototype.endsWith||function(r){return r.length<=this.length&&this.indexOf(r,this.length-r.length)!==-1};function Sqt(r){var e=typeof r=="string"?vqt(r):r||{},t=e.protocol,n=e.host,i=e.port;if(typeof n!="string"||!n||typeof t!="string"||(t=t.split(":",1)[0],n=n.replace(/:\d*$/,""),i=parseInt(i)||bqt[t]||0,!Cqt(n,i)))return"";var s=fT("npm_config_"+t+"_proxy")||fT(t+"_proxy")||fT("npm_config_proxy")||fT("all_proxy");return s&&s.indexOf("://")===-1&&(s=t+"://"+s),s}function Cqt(r,e){var t=(fT("npm_config_no_proxy")||fT("no_proxy")).toLowerCase();return t?t==="*"?!1:t.split(/[,\s]/).every(function(n){if(!n)return!0;var i=n.match(/^(.+):(\d+)$/),s=i?i[1]:n,o=i?parseInt(i[2]):0;return o&&o!==e?!0:/^[.*]/.test(s)?(s.charAt(0)==="*"&&(s=s.slice(1)),!_qt.call(r,s)):r!==s}):!0}function fT(r){return process.env[r.toLowerCase()]||process.env[r.toUpperCase()]||""}CNe.getProxyForUrl=Sqt});var ENe=O((h_r,wNe)=>{var gT=1e3,yT=gT*60,vT=yT*60,tC=vT*24,Pqt=tC*7,wqt=tC*365.25;wNe.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return Eqt(r);if(t==="number"&&isFinite(r))return e.long?Iqt(r):Tqt(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function Eqt(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*wqt;case"weeks":case"week":case"w":return t*Pqt;case"days":case"day":case"d":return t*tC;case"hours":case"hour":case"hrs":case"hr":case"h":return t*vT;case"minutes":case"minute":case"mins":case"min":case"m":return t*yT;case"seconds":case"second":case"secs":case"sec":case"s":return t*gT;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function Tqt(r){var e=Math.abs(r);return e>=tC?Math.round(r/tC)+"d":e>=vT?Math.round(r/vT)+"h":e>=yT?Math.round(r/yT)+"m":e>=gT?Math.round(r/gT)+"s":r+"ms"}function Iqt(r){var e=Math.abs(r);return e>=tC?iG(r,e,tC,"day"):e>=vT?iG(r,e,vT,"hour"):e>=yT?iG(r,e,yT,"minute"):e>=gT?iG(r,e,gT,"second"):r+" ms"}function iG(r,e,t,n){var i=e>=t*1.5;return Math.round(r/t)+" "+n+(i?"s":"")}});var Ene=O((f_r,TNe)=>{function Rqt(r){t.debug=t,t.default=t,t.coerce=c,t.disable=s,t.enable=i,t.enabled=o,t.humanize=ENe(),t.destroy=l,Object.keys(r).forEach(u=>{t[u]=r[u]}),t.names=[],t.skips=[],t.formatters={};function e(u){let d=0;for(let p=0;p<u.length;p++)d=(d<<5)-d+u.charCodeAt(p),d|=0;return t.colors[Math.abs(d)%t.colors.length]}t.selectColor=e;function t(u){let d,p=null,m,f;function y(...v){if(!y.enabled)return;let _=y,C=Number(new Date),P=C-(d||C);_.diff=P,_.prev=d,_.curr=C,d=C,v[0]=t.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let w=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(I,z)=>{if(I==="%%")return"%";w++;let G=t.formatters[z];if(typeof G=="function"){let L=v[w];I=G.call(_,L),v.splice(w,1),w--}return I}),t.formatArgs.call(_,v),(_.log||t.log).apply(_,v)}return y.namespace=u,y.useColors=t.useColors(),y.color=t.selectColor(u),y.extend=n,y.destroy=t.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(m!==t.namespaces&&(m=t.namespaces,f=t.enabled(u)),f),set:v=>{p=v}}),typeof t.init=="function"&&t.init(y),y}function n(u,d){let p=t(this.namespace+(typeof d>"u"?":":d)+u);return p.log=this.log,p}function i(u){t.save(u),t.namespaces=u,t.names=[],t.skips=[];let d,p=(typeof u=="string"?u:"").split(/[\s,]+/),m=p.length;for(d=0;d<m;d++)p[d]&&(u=p[d].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.slice(1)+"$")):t.names.push(new RegExp("^"+u+"$")))}function s(){let u=[...t.names.map(a),...t.skips.map(a).map(d=>"-"+d)].join(",");return t.enable(""),u}function o(u){if(u[u.length-1]==="*")return!0;let d,p;for(d=0,p=t.skips.length;d<p;d++)if(t.skips[d].test(u))return!1;for(d=0,p=t.names.length;d<p;d++)if(t.names[d].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}TNe.exports=Rqt});var INe=O((Ju,sG)=>{Ju.formatArgs=Oqt;Ju.save=Aqt;Ju.load=Nqt;Ju.useColors=xqt;Ju.storage=Dqt();Ju.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Ju.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function xqt(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Oqt(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+sG.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,n=0;r[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),r.splice(n,0,e)}Ju.log=console.debug||console.log||(()=>{});function Aqt(r){try{r?Ju.storage.setItem("debug",r):Ju.storage.removeItem("debug")}catch{}}function Nqt(){let r;try{r=Ju.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}function Dqt(){try{return localStorage}catch{}}sG.exports=Ene()(Ju);var{formatters:Mqt}=sG.exports;Mqt.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var xNe=O((Ka,aG)=>{var kqt=require("tty"),oG=require("util");Ka.init=Bqt;Ka.log=Fqt;Ka.formatArgs=qqt;Ka.save=jqt;Ka.load=Uqt;Ka.useColors=Lqt;Ka.destroy=oG.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Ka.colors=[6,2,3,4,5,1];try{let r=fA();r&&(r.stderr||r).level>=2&&(Ka.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Ka.inspectOpts=Object.keys(process.env).filter(r=>/^debug_/i.test(r)).reduce((r,e)=>{let t=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),r[t]=n,r},{});function Lqt(){return"colors"in Ka.inspectOpts?!!Ka.inspectOpts.colors:kqt.isatty(process.stderr.fd)}function qqt(r){let{namespace:e,useColors:t}=this;if(t){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${e} \x1B[0m`;r[0]=s+r[0].split(`
`).join(`
`+s),r.push(i+"m+"+aG.exports.humanize(this.diff)+"\x1B[0m")}else r[0]=zqt()+e+" "+r[0]}function zqt(){return Ka.inspectOpts.hideDate?"":new Date().toISOString()+" "}function Fqt(...r){return process.stderr.write(oG.formatWithOptions(Ka.inspectOpts,...r)+`
`)}function jqt(r){r?process.env.DEBUG=r:delete process.env.DEBUG}function Uqt(){return process.env.DEBUG}function Bqt(r){r.inspectOpts={};let e=Object.keys(Ka.inspectOpts);for(let t=0;t<e.length;t++)r.inspectOpts[e[t]]=Ka.inspectOpts[e[t]]}aG.exports=Ene()(Ka);var{formatters:RNe}=aG.exports;RNe.o=function(r){return this.inspectOpts.colors=this.useColors,oG.inspect(r,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};RNe.O=function(r){return this.inspectOpts.colors=this.useColors,oG.inspect(r,this.inspectOpts)}});var Ine=O((g_r,Tne)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Tne.exports=INe():Tne.exports=xNe()});var ANe=O((y_r,ONe)=>{var DD;ONe.exports=function(){if(!DD){try{DD=Ine()("follow-redirects")}catch{}typeof DD!="function"&&(DD=function(){})}DD.apply(null,arguments)}});var LNe=O((v_r,Fne)=>{var LD=require("url"),MD=LD.URL,Gqt=require("http"),$qt=require("https"),Nne=require("stream").Writable,Dne=require("assert"),NNe=ANe(),Mne=!1;try{Dne(new MD)}catch(r){Mne=r.code==="ERR_INVALID_URL"}var Vqt=["auth","host","hostname","href","path","pathname","port","protocol","query","search","hash"],kne=["abort","aborted","connect","error","socket","timeout"],Lne=Object.create(null);kne.forEach(function(r){Lne[r]=function(e,t,n){this._redirectable.emit(r,e,t,n)}});var xne=qD("ERR_INVALID_URL","Invalid URL",TypeError),One=qD("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),Hqt=qD("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded",One),Wqt=qD("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),Kqt=qD("ERR_STREAM_WRITE_AFTER_END","write after end"),Qqt=Nne.prototype.destroy||MNe;function hu(r,e){Nne.call(this),this._sanitizeOptions(r),this._options=r,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e&&this.on("response",e);var t=this;this._onNativeResponse=function(n){try{t._processResponse(n)}catch(i){t.emit("error",i instanceof One?i:new One({cause:i}))}},this._performRequest()}hu.prototype=Object.create(Nne.prototype);hu.prototype.abort=function(){zne(this._currentRequest),this._currentRequest.abort(),this.emit("abort")};hu.prototype.destroy=function(r){return zne(this._currentRequest,r),Qqt.call(this,r),this};hu.prototype.write=function(r,e,t){if(this._ending)throw new Kqt;if(!rC(r)&&!Jqt(r))throw new TypeError("data should be a string, Buffer or Uint8Array");if(kD(e)&&(t=e,e=null),r.length===0){t&&t();return}this._requestBodyLength+r.length<=this._options.maxBodyLength?(this._requestBodyLength+=r.length,this._requestBodyBuffers.push({data:r,encoding:e}),this._currentRequest.write(r,e,t)):(this.emit("error",new Wqt),this.abort())};hu.prototype.end=function(r,e,t){if(kD(r)?(t=r,r=e=null):kD(e)&&(t=e,e=null),!r)this._ended=this._ending=!0,this._currentRequest.end(null,null,t);else{var n=this,i=this._currentRequest;this.write(r,e,function(){n._ended=!0,i.end(null,null,t)}),this._ending=!0}};hu.prototype.setHeader=function(r,e){this._options.headers[r]=e,this._currentRequest.setHeader(r,e)};hu.prototype.removeHeader=function(r){delete this._options.headers[r],this._currentRequest.removeHeader(r)};hu.prototype.setTimeout=function(r,e){var t=this;function n(o){o.setTimeout(r),o.removeListener("timeout",o.destroy),o.addListener("timeout",o.destroy)}function i(o){t._timeout&&clearTimeout(t._timeout),t._timeout=setTimeout(function(){t.emit("timeout"),s()},r),n(o)}function s(){t._timeout&&(clearTimeout(t._timeout),t._timeout=null),t.removeListener("abort",s),t.removeListener("error",s),t.removeListener("response",s),t.removeListener("close",s),e&&t.removeListener("timeout",e),t.socket||t._currentRequest.removeListener("socket",i)}return e&&this.on("timeout",e),this.socket?i(this.socket):this._currentRequest.once("socket",i),this.on("socket",n),this.on("abort",s),this.on("error",s),this.on("response",s),this.on("close",s),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(r){hu.prototype[r]=function(e,t){return this._currentRequest[r](e,t)}});["aborted","connection","socket"].forEach(function(r){Object.defineProperty(hu.prototype,r,{get:function(){return this._currentRequest[r]}})});hu.prototype._sanitizeOptions=function(r){if(r.headers||(r.headers={}),r.host&&(r.hostname||(r.hostname=r.host),delete r.host),!r.pathname&&r.path){var e=r.path.indexOf("?");e<0?r.pathname=r.path:(r.pathname=r.path.substring(0,e),r.search=r.path.substring(e))}};hu.prototype._performRequest=function(){var r=this._options.protocol,e=this._options.nativeProtocols[r];if(!e)throw new TypeError("Unsupported protocol "+r);if(this._options.agents){var t=r.slice(0,-1);this._options.agent=this._options.agents[t]}var n=this._currentRequest=e.request(this._options,this._onNativeResponse);n._redirectable=this;for(var i of kne)n.on(i,Lne[i]);if(this._currentUrl=/^\//.test(this._options.path)?LD.format(this._options):this._options.path,this._isRedirect){var s=0,o=this,a=this._requestBodyBuffers;(function c(l){if(n===o._currentRequest)if(l)o.emit("error",l);else if(s<a.length){var u=a[s++];n.finished||n.write(u.data,u.encoding,c)}else o._ended&&n.end()})()}};hu.prototype._processResponse=function(r){var e=r.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:r.headers,statusCode:e});var t=r.headers.location;if(!t||this._options.followRedirects===!1||e<300||e>=400){r.responseUrl=this._currentUrl,r.redirects=this._redirects,this.emit("response",r),this._requestBodyBuffers=[];return}if(zne(this._currentRequest),r.destroy(),++this._redirectCount>this._options.maxRedirects)throw new Hqt;var n,i=this._options.beforeRedirect;i&&(n=Object.assign({Host:r.req.getHeader("host")},this._options.headers));var s=this._options.method;((e===301||e===302)&&this._options.method==="POST"||e===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],Rne(/^content-/i,this._options.headers));var o=Rne(/^host$/i,this._options.headers),a=qne(this._currentUrl),c=o||a.host,l=/^\w+:/.test(t)?this._currentUrl:LD.format(Object.assign(a,{host:c})),u=Yqt(t,l);if(NNe("redirecting to",u.href),this._isRedirect=!0,Ane(u,this._options),(u.protocol!==a.protocol&&u.protocol!=="https:"||u.host!==c&&!Xqt(u.host,c))&&Rne(/^(?:(?:proxy-)?authorization|cookie)$/i,this._options.headers),kD(i)){var d={headers:r.headers,statusCode:e},p={url:l,method:s,headers:n};i(this._options,d,p),this._sanitizeOptions(this._options)}this._performRequest()};function DNe(r){var e={maxRedirects:21,maxBodyLength:10485760},t={};return Object.keys(r).forEach(function(n){var i=n+":",s=t[i]=r[n],o=e[n]=Object.create(s);function a(l,u,d){return Zqt(l)?l=Ane(l):rC(l)?l=Ane(qne(l)):(d=u,u=kNe(l),l={protocol:i}),kD(u)&&(d=u,u=null),u=Object.assign({maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},l,u),u.nativeProtocols=t,!rC(u.host)&&!rC(u.hostname)&&(u.hostname="::1"),Dne.equal(u.protocol,i,"protocol mismatch"),NNe("options",u),new hu(u,d)}function c(l,u,d){var p=o.request(l,u,d);return p.end(),p}Object.defineProperties(o,{request:{value:a,configurable:!0,enumerable:!0,writable:!0},get:{value:c,configurable:!0,enumerable:!0,writable:!0}})}),e}function MNe(){}function qne(r){var e;if(Mne)e=new MD(r);else if(e=kNe(LD.parse(r)),!rC(e.protocol))throw new xne({input:r});return e}function Yqt(r,e){return Mne?new MD(r,e):qne(LD.resolve(e,r))}function kNe(r){if(/^\[/.test(r.hostname)&&!/^\[[:0-9a-f]+\]$/i.test(r.hostname))throw new xne({input:r.href||r});if(/^\[/.test(r.host)&&!/^\[[:0-9a-f]+\](:\d+)?$/i.test(r.host))throw new xne({input:r.href||r});return r}function Ane(r,e){var t=e||{};for(var n of Vqt)t[n]=r[n];return t.hostname.startsWith("[")&&(t.hostname=t.hostname.slice(1,-1)),t.port!==""&&(t.port=Number(t.port)),t.path=t.search?t.pathname+t.search:t.pathname,t}function Rne(r,e){var t;for(var n in e)r.test(n)&&(t=e[n],delete e[n]);return t===null||typeof t>"u"?void 0:String(t).trim()}function qD(r,e,t){function n(i){Error.captureStackTrace(this,this.constructor),Object.assign(this,i||{}),this.code=r,this.message=this.cause?e+": "+this.cause.message:e}return n.prototype=new(t||Error),Object.defineProperties(n.prototype,{constructor:{value:n,enumerable:!1},name:{value:"Error ["+r+"]",enumerable:!1}}),n}function zne(r,e){for(var t of kne)r.removeListener(t,Lne[t]);r.on("error",MNe),r.destroy(e)}function Xqt(r,e){Dne(rC(r)&&rC(e));var t=r.length-e.length-1;return t>0&&r[t]==="."&&r.endsWith(e)}function rC(r){return typeof r=="string"||r instanceof String}function kD(r){return typeof r=="function"}function Jqt(r){return typeof r=="object"&&"length"in r}function Zqt(r){return MD&&r instanceof MD}Fne.exports=DNe({http:Gqt,https:$qt});Fne.exports.wrap=DNe});var qqe=O((pwr,Lqe)=>{"use strict";Lqe.exports=Mqe;function Mqe(r,e,t){r instanceof RegExp&&(r=Dqe(r,t)),e instanceof RegExp&&(e=Dqe(e,t));var n=kqe(r,e,t);return n&&{start:n[0],end:n[1],pre:t.slice(0,n[0]),body:t.slice(n[0]+r.length,n[1]),post:t.slice(n[1]+e.length)}}function Dqe(r,e){var t=e.match(r);return t?t[0]:null}Mqe.range=kqe;function kqe(r,e,t){var n,i,s,o,a,c=t.indexOf(r),l=t.indexOf(e,c+1),u=c;if(c>=0&&l>0){if(r===e)return[c,l];for(n=[],s=t.length;u>=0&&!a;)u==c?(n.push(u),c=t.indexOf(r,u+1)):n.length==1?a=[n.pop(),l]:(i=n.pop(),i<s&&(s=i,o=l),l=t.indexOf(e,u+1)),u=c<l&&c>=0?c:l;n.length&&(a=[s,o])}return a}});var Vqe=O((mwr,$qe)=>{var zqe=qqe();$qe.exports=zzt;var Fqe="\0SLASH"+Math.random()+"\0",jqe="\0OPEN"+Math.random()+"\0",vse="\0CLOSE"+Math.random()+"\0",Uqe="\0COMMA"+Math.random()+"\0",Bqe="\0PERIOD"+Math.random()+"\0";function yse(r){return parseInt(r,10)==r?parseInt(r,10):r.charCodeAt(0)}function Lzt(r){return r.split("\\\\").join(Fqe).split("\\{").join(jqe).split("\\}").join(vse).split("\\,").join(Uqe).split("\\.").join(Bqe)}function qzt(r){return r.split(Fqe).join("\\").split(jqe).join("{").split(vse).join("}").split(Uqe).join(",").split(Bqe).join(".")}function Gqe(r){if(!r)return[""];var e=[],t=zqe("{","}",r);if(!t)return r.split(",");var n=t.pre,i=t.body,s=t.post,o=n.split(",");o[o.length-1]+="{"+i+"}";var a=Gqe(s);return s.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),e.push.apply(e,o),e}function zzt(r){return r?(r.substr(0,2)==="{}"&&(r="\\{\\}"+r.substr(2)),hM(Lzt(r),!0).map(qzt)):[]}function Fzt(r){return"{"+r+"}"}function jzt(r){return/^-?0\d/.test(r)}function Uzt(r,e){return r<=e}function Bzt(r,e){return r>=e}function hM(r,e){var t=[],n=zqe("{","}",r);if(!n)return[r];var i=n.pre,s=n.post.length?hM(n.post,!1):[""];if(/\$$/.test(n.pre))for(var o=0;o<s.length;o++){var a=i+"{"+n.body+"}"+s[o];t.push(a)}else{var c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),l=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),u=c||l,d=n.body.indexOf(",")>=0;if(!u&&!d)return n.post.match(/,.*\}/)?(r=n.pre+"{"+n.body+vse+n.post,hM(r)):[r];var p;if(u)p=n.body.split(/\.\./);else if(p=Gqe(n.body),p.length===1&&(p=hM(p[0],!1).map(Fzt),p.length===1))return s.map(function(H){return n.pre+p[0]+H});var m;if(u){var f=yse(p[0]),y=yse(p[1]),v=Math.max(p[0].length,p[1].length),_=p.length==3?Math.abs(yse(p[2])):1,C=Uzt,P=y<f;P&&(_*=-1,C=Bzt);var w=p.some(jzt);m=[];for(var R=f;C(R,y);R+=_){var I;if(l)I=String.fromCharCode(R),I==="\\"&&(I="");else if(I=String(R),w){var z=v-I.length;if(z>0){var G=new Array(z+1).join("0");R<0?I="-"+G+I.slice(1):I=G+I}}m.push(I)}}else{m=[];for(var L=0;L<p.length;L++)m.push.apply(m,hM(p[L],!1))}for(var L=0;L<m.length;L++)for(var o=0;o<s.length;o++){var a=i+m[L]+s[o];(!e||u||a)&&t.push(a)}}return t}});var Hqe=O(u2=>{"use strict";Object.defineProperty(u2,"__esModule",{value:!0});u2.assertValidPattern=void 0;var Gzt=1024*64,$zt=r=>{if(typeof r!="string")throw new TypeError("invalid pattern");if(r.length>Gzt)throw new TypeError("pattern is too long")};u2.assertValidPattern=$zt});var Kqe=O(d2=>{"use strict";Object.defineProperty(d2,"__esModule",{value:!0});d2.parseClass=void 0;var Vzt={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},fM=r=>r.replace(/[[\]\\-]/g,"\\$&"),Hzt=r=>r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Wqe=r=>r.join(""),Wzt=(r,e)=>{let t=e;if(r.charAt(t)!=="[")throw new Error("not in a brace expression");let n=[],i=[],s=t+1,o=!1,a=!1,c=!1,l=!1,u=t,d="";e:for(;s<r.length;){let y=r.charAt(s);if((y==="!"||y==="^")&&s===t+1){l=!0,s++;continue}if(y==="]"&&o&&!c){u=s+1;break}if(o=!0,y==="\\"&&!c){c=!0,s++;continue}if(y==="["&&!c){for(let[v,[_,C,P]]of Object.entries(Vzt))if(r.startsWith(v,s)){if(d)return["$.",!1,r.length-t,!0];s+=v.length,P?i.push(_):n.push(_),a=a||C;continue e}}if(c=!1,d){y>d?n.push(fM(d)+"-"+fM(y)):y===d&&n.push(fM(y)),d="",s++;continue}if(r.startsWith("-]",s+1)){n.push(fM(y+"-")),s+=2;continue}if(r.startsWith("-",s+1)){d=y,s+=2;continue}n.push(fM(y)),s++}if(u<s)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,r.length-t,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!l){let y=n[0].length===2?n[0].slice(-1):n[0];return[Hzt(y),!1,u-t,!1]}let p="["+(l?"^":"")+Wqe(n)+"]",m="["+(l?"":"^")+Wqe(i)+"]";return[n.length&&i.length?"("+p+"|"+m+")":n.length?p:m,a,u-t,!0]};d2.parseClass=Wzt});var m2=O(p2=>{"use strict";Object.defineProperty(p2,"__esModule",{value:!0});p2.unescape=void 0;var Kzt=(r,{windowsPathsNoEscape:e=!1}={})=>e?r.replace(/\[([^\/\\])\]/g,"$1"):r.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");p2.unescape=Kzt});var Sse=O(g2=>{"use strict";Object.defineProperty(g2,"__esModule",{value:!0});g2.AST=void 0;var Qzt=Kqe(),h2=m2(),Yzt=new Set(["!","?","+","*","@"]),Qqe=r=>Yzt.has(r),Xzt="(?!(?:^|/)\\.\\.?(?:$|/))",f2="(?!\\.)",Jzt=new Set(["[","."]),Zzt=new Set(["..","."]),e1t=new Set("().*{}+?[]^$\\!"),t1t=r=>r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),_se="[^/]",Yqe=_se+"*?",Xqe=_se+"+?",bse=class r{type;#e;#t;#n=!1;#r=[];#o;#a;#c;#p=!1;#l;#u;#s=!1;constructor(e,t,n={}){this.type=e,e&&(this.#t=!0),this.#o=t,this.#e=this.#o?this.#o.#e:this,this.#l=this.#e===this?n:this.#e.#l,this.#c=this.#e===this?[]:this.#e.#c,e==="!"&&!this.#e.#p&&this.#c.push(this),this.#a=this.#o?this.#o.#r.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#r)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#u!==void 0?this.#u:this.type?this.#u=this.type+"("+this.#r.map(e=>String(e)).join("|")+")":this.#u=this.#r.map(e=>String(e)).join("")}#y(){if(this!==this.#e)throw new Error("should only call on root");if(this.#p)return this;this.toString(),this.#p=!0;let e;for(;e=this.#c.pop();){if(e.type!=="!")continue;let t=e,n=t.#o;for(;n;){for(let i=t.#a+1;!n.type&&i<n.#r.length;i++)for(let s of e.#r){if(typeof s=="string")throw new Error("string part in extglob AST??");s.copyIn(n.#r[i])}t=n,n=t.#o}}return this}push(...e){for(let t of e)if(t!==""){if(typeof t!="string"&&!(t instanceof r&&t.#o===this))throw new Error("invalid part: "+t);this.#r.push(t)}}toJSON(){let e=this.type===null?this.#r.slice().map(t=>typeof t=="string"?t:t.toJSON()):[this.type,...this.#r.map(t=>t.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#p&&this.#o?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#o?.isStart())return!1;if(this.#a===0)return!0;let e=this.#o;for(let t=0;t<this.#a;t++){let n=e.#r[t];if(!(n instanceof r&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#o?.type==="!")return!0;if(!this.#o?.isEnd())return!1;if(!this.type)return this.#o?.isEnd();let e=this.#o?this.#o.#r.length:0;return this.#a===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let t=new r(this.type,e);for(let n of this.#r)t.copyIn(n);return t}static#v(e,t,n,i){let s=!1,o=!1,a=-1,c=!1;if(t.type===null){let m=n,f="";for(;m<e.length;){let y=e.charAt(m++);if(s||y==="\\"){s=!s,f+=y;continue}if(o){m===a+1?(y==="^"||y==="!")&&(c=!0):y==="]"&&!(m===a+2&&c)&&(o=!1),f+=y;continue}else if(y==="["){o=!0,a=m,c=!1,f+=y;continue}if(!i.noext&&Qqe(y)&&e.charAt(m)==="("){t.push(f),f="";let v=new r(y,t);m=r.#v(e,v,m,i),t.push(v);continue}f+=y}return t.push(f),m}let l=n+1,u=new r(null,t),d=[],p="";for(;l<e.length;){let m=e.charAt(l++);if(s||m==="\\"){s=!s,p+=m;continue}if(o){l===a+1?(m==="^"||m==="!")&&(c=!0):m==="]"&&!(l===a+2&&c)&&(o=!1),p+=m;continue}else if(m==="["){o=!0,a=l,c=!1,p+=m;continue}if(Qqe(m)&&e.charAt(l)==="("){u.push(p),p="";let f=new r(m,u);u.push(f),l=r.#v(e,f,l,i);continue}if(m==="|"){u.push(p),p="",d.push(u),u=new r(null,t);continue}if(m===")")return p===""&&t.#r.length===0&&(t.#s=!0),u.push(p),p="",t.push(...d,u),l;p+=m}return t.type=null,t.#t=void 0,t.#r=[e.substring(n-1)],l}static fromGlob(e,t={}){let n=new r(null,void 0,t);return r.#v(e,n,0,t),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[t,n,i,s]=this.toRegExpSource();if(!(i||this.#t||this.#l.nocase&&!this.#l.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let a=(this.#l.nocase?"i":"")+(s?"u":"");return Object.assign(new RegExp(`^${t}$`,a),{_src:t,_glob:e})}get options(){return this.#l}toRegExpSource(e){let t=e??!!this.#l.dot;if(this.#e===this&&this.#y(),!this.type){let c=this.isStart()&&this.isEnd(),l=this.#r.map(m=>{let[f,y,v,_]=typeof m=="string"?r.#m(m,this.#t,c):m.toRegExpSource(e);return this.#t=this.#t||v,this.#n=this.#n||_,f}).join(""),u="";if(this.isStart()&&typeof this.#r[0]=="string"&&!(this.#r.length===1&&Zzt.has(this.#r[0]))){let f=Jzt,y=t&&f.has(l.charAt(0))||l.startsWith("\\.")&&f.has(l.charAt(2))||l.startsWith("\\.\\.")&&f.has(l.charAt(4)),v=!t&&!e&&f.has(l.charAt(0));u=y?Xzt:v?f2:""}let d="";return this.isEnd()&&this.#e.#p&&this.#o?.type==="!"&&(d="(?:$|\\/)"),[u+l+d,(0,h2.unescape)(l),this.#t=!!this.#t,this.#n]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",s=this.#h(t);if(this.isStart()&&this.isEnd()&&!s&&this.type!=="!"){let c=this.toString();return this.#r=[c],this.type=null,this.#t=void 0,[c,(0,h2.unescape)(this.toString()),!1,!1]}let o=!n||e||t||!f2?"":this.#h(!0);o===s&&(o=""),o&&(s=`(?:${s})(?:${o})*?`);let a="";if(this.type==="!"&&this.#s)a=(this.isStart()&&!t?f2:"")+Xqe;else{let c=this.type==="!"?"))"+(this.isStart()&&!t&&!e?f2:"")+Yqe+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&o?")":this.type==="*"&&o?")?":`)${this.type}`;a=i+s+c}return[a,(0,h2.unescape)(s),this.#t=!!this.#t,this.#n]}#h(e){return this.#r.map(t=>{if(typeof t=="string")throw new Error("string type in extglob ast??");let[n,i,s,o]=t.toRegExpSource(e);return this.#n=this.#n||o,n}).filter(t=>!(this.isStart()&&this.isEnd())||!!t).join("|")}static#m(e,t,n=!1){let i=!1,s="",o=!1;for(let a=0;a<e.length;a++){let c=e.charAt(a);if(i){i=!1,s+=(e1t.has(c)?"\\":"")+c;continue}if(c==="\\"){a===e.length-1?s+="\\\\":i=!0;continue}if(c==="["){let[l,u,d,p]=(0,Qzt.parseClass)(e,a);if(d){s+=l,o=o||u,a+=d-1,t=t||p;continue}}if(c==="*"){n&&e==="*"?s+=Xqe:s+=Yqe,t=!0;continue}if(c==="?"){s+=_se,t=!0;continue}s+=t1t(c)}return[s,(0,h2.unescape)(e),!!t,o]}};g2.AST=bse});var Cse=O(y2=>{"use strict";Object.defineProperty(y2,"__esModule",{value:!0});y2.escape=void 0;var r1t=(r,{windowsPathsNoEscape:e=!1}={})=>e?r.replace(/[?*()[\]]/g,"[$&]"):r.replace(/[?*()[\]\\]/g,"\\$&");y2.escape=r1t});var Bv=O(Gr=>{"use strict";var n1t=Gr&&Gr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Gr,"__esModule",{value:!0});Gr.unescape=Gr.escape=Gr.AST=Gr.Minimatch=Gr.match=Gr.makeRe=Gr.braceExpand=Gr.defaults=Gr.filter=Gr.GLOBSTAR=Gr.sep=Gr.minimatch=void 0;var i1t=n1t(Vqe()),v2=Hqe(),eze=Sse(),s1t=Cse(),o1t=m2(),a1t=(r,e,t={})=>((0,v2.assertValidPattern)(e),!t.nocomment&&e.charAt(0)==="#"?!1:new mC(e,t).match(r));Gr.minimatch=a1t;var c1t=/^\*+([^+@!?\*\[\(]*)$/,l1t=r=>e=>!e.startsWith(".")&&e.endsWith(r),u1t=r=>e=>e.endsWith(r),d1t=r=>(r=r.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(r)),p1t=r=>(r=r.toLowerCase(),e=>e.toLowerCase().endsWith(r)),m1t=/^\*+\.\*+$/,h1t=r=>!r.startsWith(".")&&r.includes("."),f1t=r=>r!=="."&&r!==".."&&r.includes("."),g1t=/^\.\*+$/,y1t=r=>r!=="."&&r!==".."&&r.startsWith("."),v1t=/^\*+$/,b1t=r=>r.length!==0&&!r.startsWith("."),_1t=r=>r.length!==0&&r!=="."&&r!=="..",S1t=/^\?+([^+@!?\*\[\(]*)?$/,C1t=([r,e=""])=>{let t=tze([r]);return e?(e=e.toLowerCase(),n=>t(n)&&n.toLowerCase().endsWith(e)):t},P1t=([r,e=""])=>{let t=rze([r]);return e?(e=e.toLowerCase(),n=>t(n)&&n.toLowerCase().endsWith(e)):t},w1t=([r,e=""])=>{let t=rze([r]);return e?n=>t(n)&&n.endsWith(e):t},E1t=([r,e=""])=>{let t=tze([r]);return e?n=>t(n)&&n.endsWith(e):t},tze=([r])=>{let e=r.length;return t=>t.length===e&&!t.startsWith(".")},rze=([r])=>{let e=r.length;return t=>t.length===e&&t!=="."&&t!==".."},nze=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",Jqe={win32:{sep:"\\"},posix:{sep:"/"}};Gr.sep=nze==="win32"?Jqe.win32.sep:Jqe.posix.sep;Gr.minimatch.sep=Gr.sep;Gr.GLOBSTAR=Symbol("globstar **");Gr.minimatch.GLOBSTAR=Gr.GLOBSTAR;var T1t="[^/]",I1t=T1t+"*?",R1t="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",x1t="(?:(?!(?:\\/|^)\\.).)*?",O1t=(r,e={})=>t=>(0,Gr.minimatch)(t,r,e);Gr.filter=O1t;Gr.minimatch.filter=Gr.filter;var ep=(r,e={})=>Object.assign({},r,e),A1t=r=>{if(!r||typeof r!="object"||!Object.keys(r).length)return Gr.minimatch;let e=Gr.minimatch;return Object.assign((n,i,s={})=>e(n,i,ep(r,s)),{Minimatch:class extends e.Minimatch{constructor(i,s={}){super(i,ep(r,s))}static defaults(i){return e.defaults(ep(r,i)).Minimatch}},AST:class extends e.AST{constructor(i,s,o={}){super(i,s,ep(r,o))}static fromGlob(i,s={}){return e.AST.fromGlob(i,ep(r,s))}},unescape:(n,i={})=>e.unescape(n,ep(r,i)),escape:(n,i={})=>e.escape(n,ep(r,i)),filter:(n,i={})=>e.filter(n,ep(r,i)),defaults:n=>e.defaults(ep(r,n)),makeRe:(n,i={})=>e.makeRe(n,ep(r,i)),braceExpand:(n,i={})=>e.braceExpand(n,ep(r,i)),match:(n,i,s={})=>e.match(n,i,ep(r,s)),sep:e.sep,GLOBSTAR:Gr.GLOBSTAR})};Gr.defaults=A1t;Gr.minimatch.defaults=Gr.defaults;var N1t=(r,e={})=>((0,v2.assertValidPattern)(r),e.nobrace||!/\{(?:(?!\{).)*\}/.test(r)?[r]:(0,i1t.default)(r));Gr.braceExpand=N1t;Gr.minimatch.braceExpand=Gr.braceExpand;var D1t=(r,e={})=>new mC(r,e).makeRe();Gr.makeRe=D1t;Gr.minimatch.makeRe=Gr.makeRe;var M1t=(r,e,t={})=>{let n=new mC(e,t);return r=r.filter(i=>n.match(i)),n.options.nonull&&!r.length&&r.push(e),r};Gr.match=M1t;Gr.minimatch.match=Gr.match;var Zqe=/[?*]|[+@!]\(.*?\)|\[|\]/,k1t=r=>r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),mC=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,t={}){(0,v2.assertValidPattern)(e),t=t||{},this.options=t,this.pattern=e,this.platform=t.platform||nze,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!t.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!t.nonegate,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=t.windowsNoMagicRoot!==void 0?t.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let t of e)if(typeof t!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],t.debug&&(this.debug=(...s)=>console.error(...s)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(s=>this.slashSplit(s));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((s,o,a)=>{if(this.isWindows&&this.windowsNoMagicRoot){let c=s[0]===""&&s[1]===""&&(s[2]==="?"||!Zqe.test(s[2]))&&!Zqe.test(s[3]),l=/^[a-z]:/i.test(s[0]);if(c)return[...s.slice(0,4),...s.slice(4).map(u=>this.parse(u))];if(l)return[s[0],...s.slice(1).map(u=>this.parse(u))]}return s.map(c=>this.parse(c))});if(this.debug(this.pattern,i),this.set=i.filter(s=>s.indexOf(!1)===-1),this.isWindows)for(let s=0;s<this.set.length;s++){let o=this.set[s];o[0]===""&&o[1]===""&&this.globParts[s][2]==="?"&&typeof o[3]=="string"&&/^[a-z]:$/i.test(o[3])&&(o[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:t=1}=this.options;return t>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):t>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(t=>{let n=-1;for(;(n=t.indexOf("**",n+1))!==-1;){let i=n;for(;t[i+1]==="**";)i++;i!==n&&t.splice(n,i-n)}return t})}levelOneOptimize(e){return e.map(t=>(t=t.reduce((n,i)=>{let s=n[n.length-1];return i==="**"&&s==="**"?n:i===".."&&s&&s!==".."&&s!=="."&&s!=="**"?(n.pop(),n):(n.push(i),n)},[]),t.length===0?[""]:t))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let t=!1;do{if(t=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let s=e[i];i===1&&s===""&&e[0]===""||(s==="."||s==="")&&(t=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(t=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(t=!0,e.splice(n-1,2),n-=2)}}while(t);return e.length===0?[""]:e}firstPhasePreProcess(e){let t=!1;do{t=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let o=i;for(;n[o+1]==="**";)o++;o>i&&n.splice(i+1,o-i);let a=n[i+1],c=n[i+2],l=n[i+3];if(a!==".."||!c||c==="."||c===".."||!l||l==="."||l==="..")continue;t=!0,n.splice(i,1);let u=n.slice(0);u[i]="**",e.push(u),i--}if(!this.preserveMultipleSlashes){for(let o=1;o<n.length-1;o++){let a=n[o];o===1&&a===""&&n[0]===""||(a==="."||a==="")&&(t=!0,n.splice(o,1),o--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(t=!0,n.pop())}let s=0;for(;(s=n.indexOf("..",s+1))!==-1;){let o=n[s-1];if(o&&o!=="."&&o!==".."&&o!=="**"){t=!0;let c=s===1&&n[s+1]==="**"?["."]:[];n.splice(s-1,2,...c),n.length===0&&n.push(""),s-=2}}}}while(t);return e}secondPhasePreProcess(e){for(let t=0;t<e.length-1;t++)for(let n=t+1;n<e.length;n++){let i=this.partsMatch(e[t],e[n],!this.preserveMultipleSlashes);if(i){e[t]=[],e[n]=i;break}}return e.filter(t=>t.length)}partsMatch(e,t,n=!1){let i=0,s=0,o=[],a="";for(;i<e.length&&s<t.length;)if(e[i]===t[s])o.push(a==="b"?t[s]:e[i]),i++,s++;else if(n&&e[i]==="**"&&t[s]===e[i+1])o.push(e[i]),i++;else if(n&&t[s]==="**"&&e[i]===t[s+1])o.push(t[s]),s++;else if(e[i]==="*"&&t[s]&&(this.options.dot||!t[s].startsWith("."))&&t[s]!=="**"){if(a==="b")return!1;a="a",o.push(e[i]),i++,s++}else if(t[s]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(a==="a")return!1;a="b",o.push(t[s]),i++,s++}else return!1;return e.length===t.length&&o}parseNegate(){if(this.nonegate)return;let e=this.pattern,t=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)t=!t,n++;n&&(this.pattern=e.slice(n)),this.negate=t}matchOne(e,t,n=!1){let i=this.options;if(this.isWindows){let y=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),v=!y&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),_=typeof t[0]=="string"&&/^[a-z]:$/i.test(t[0]),C=!_&&t[0]===""&&t[1]===""&&t[2]==="?"&&typeof t[3]=="string"&&/^[a-z]:$/i.test(t[3]),P=v?3:y?0:void 0,w=C?3:_?0:void 0;if(typeof P=="number"&&typeof w=="number"){let[R,I]=[e[P],t[w]];R.toLowerCase()===I.toLowerCase()&&(t[w]=R,w>P?t=t.slice(w):P>w&&(e=e.slice(P)))}}let{optimizationLevel:s=1}=this.options;s>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var o=0,a=0,c=e.length,l=t.length;o<c&&a<l;o++,a++){this.debug("matchOne loop");var u=t[a],d=e[o];if(this.debug(t,u,d),u===!1)return!1;if(u===Gr.GLOBSTAR){this.debug("GLOBSTAR",[t,u,d]);var p=o,m=a+1;if(m===l){for(this.debug("** at the end");o<c;o++)if(e[o]==="."||e[o]===".."||!i.dot&&e[o].charAt(0)===".")return!1;return!0}for(;p<c;){var f=e[p];if(this.debug(`
globstar while`,e,p,t,m,f),this.matchOne(e.slice(p),t.slice(m),n))return this.debug("globstar found match!",p,c,f),!0;if(f==="."||f===".."||!i.dot&&f.charAt(0)==="."){this.debug("dot detected!",e,p,t,m);break}this.debug("globstar swallow a segment, and continue"),p++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,p,t,m),p===c))}let y;if(typeof u=="string"?(y=d===u,this.debug("string match",u,d,y)):(y=u.test(d),this.debug("pattern match",u,d,y)),!y)return!1}if(o===c&&a===l)return!0;if(o===c)return n;if(a===l)return o===c-1&&e[o]==="";throw new Error("wtf?")}braceExpand(){return(0,Gr.braceExpand)(this.pattern,this.options)}parse(e){(0,v2.assertValidPattern)(e);let t=this.options;if(e==="**")return Gr.GLOBSTAR;if(e==="")return"";let n,i=null;(n=e.match(v1t))?i=t.dot?_1t:b1t:(n=e.match(c1t))?i=(t.nocase?t.dot?p1t:d1t:t.dot?u1t:l1t)(n[1]):(n=e.match(S1t))?i=(t.nocase?t.dot?P1t:C1t:t.dot?w1t:E1t)(n):(n=e.match(m1t))?i=t.dot?f1t:h1t:(n=e.match(g1t))&&(i=y1t);let s=eze.AST.fromGlob(e,this.options).toMMPattern();return i&&typeof s=="object"&&Reflect.defineProperty(s,"test",{value:i}),s}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let t=this.options,n=t.noglobstar?I1t:t.dot?R1t:x1t,i=new Set(t.nocase?["i"]:[]),s=e.map(c=>{let l=c.map(u=>{if(u instanceof RegExp)for(let d of u.flags.split(""))i.add(d);return typeof u=="string"?k1t(u):u===Gr.GLOBSTAR?Gr.GLOBSTAR:u._src});return l.forEach((u,d)=>{let p=l[d+1],m=l[d-1];u!==Gr.GLOBSTAR||m===Gr.GLOBSTAR||(m===void 0?p!==void 0&&p!==Gr.GLOBSTAR?l[d+1]="(?:\\/|"+n+"\\/)?"+p:l[d]=n:p===void 0?l[d-1]=m+"(?:\\/|"+n+")?":p!==Gr.GLOBSTAR&&(l[d-1]=m+"(?:\\/|\\/"+n+"\\/)"+p,l[d+1]=Gr.GLOBSTAR))}),l.filter(u=>u!==Gr.GLOBSTAR).join("/")}).join("|"),[o,a]=e.length>1?["(?:",")"]:["",""];s="^"+o+s+a+"$",this.negate&&(s="^(?!"+s+").+$");try{this.regexp=new RegExp(s,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,t=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&t)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let s=this.set;this.debug(this.pattern,"set",s);let o=i[i.length-1];if(!o)for(let a=i.length-2;!o&&a>=0;a--)o=i[a];for(let a=0;a<s.length;a++){let c=s[a],l=i;if(n.matchBase&&c.length===1&&(l=[o]),this.matchOne(l,c,t))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return Gr.minimatch.defaults(e).Minimatch}};Gr.Minimatch=mC;var L1t=Sse();Object.defineProperty(Gr,"AST",{enumerable:!0,get:function(){return L1t.AST}});var q1t=Cse();Object.defineProperty(Gr,"escape",{enumerable:!0,get:function(){return q1t.escape}});var z1t=m2();Object.defineProperty(Gr,"unescape",{enumerable:!0,get:function(){return z1t.unescape}});Gr.minimatch.AST=eze.AST;Gr.minimatch.Minimatch=mC;Gr.minimatch.escape=s1t.escape;Gr.minimatch.unescape=o1t.unescape});var cze=O(_2=>{"use strict";Object.defineProperty(_2,"__esModule",{value:!0});_2.LRUCache=void 0;var DT=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,sze=new Set,Pse=typeof process=="object"&&process?process:{},oze=(r,e,t,n)=>{typeof Pse.emitWarning=="function"?Pse.emitWarning(r,e,t,n):console.error(`[${t}] ${e}: ${r}`)},b2=globalThis.AbortController,ize=globalThis.AbortSignal;if(typeof b2>"u"){ize=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},b2=class{constructor(){e()}signal=new ize;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let r=Pse.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{r&&(r=!1,oze("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var F1t=r=>!sze.has(r),wwr=Symbol("type"),Gv=r=>r&&r===Math.floor(r)&&r>0&&isFinite(r),aze=r=>Gv(r)?r<=Math.pow(2,8)?Uint8Array:r<=Math.pow(2,16)?Uint16Array:r<=Math.pow(2,32)?Uint32Array:r<=Number.MAX_SAFE_INTEGER?MT:null:null,MT=class extends Array{constructor(e){super(e),this.fill(0)}},wse=class r{heap;length;static#e=!1;static create(e){let t=aze(e);if(!t)return[];r.#e=!0;let n=new r(e,t);return r.#e=!1,n}constructor(e,t){if(!r.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},Ese=class r{#e;#t;#n;#r;#o;#a;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#c;#p;#l;#u;#s;#y;#v;#h;#m;#P;#g;#w;#E;#_;#S;#C;#f;static unsafeExposeInternals(e){return{starts:e.#E,ttls:e.#_,sizes:e.#w,keyMap:e.#l,keyList:e.#u,valList:e.#s,next:e.#y,prev:e.#v,get head(){return e.#h},get tail(){return e.#m},free:e.#P,isBackgroundFetch:t=>e.#d(t),backgroundFetch:(t,n,i,s)=>e.#z(t,n,i,s),moveToTail:t=>e.#j(t),indexes:t=>e.#I(t),rindexes:t=>e.#R(t),isStale:t=>e.#b(t)}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#p}get size(){return this.#c}get fetchMethod(){return this.#o}get memoMethod(){return this.#a}get dispose(){return this.#n}get disposeAfter(){return this.#r}constructor(e){let{max:t=0,ttl:n,ttlResolution:i=1,ttlAutopurge:s,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:c,dispose:l,disposeAfter:u,noDisposeOnSet:d,noUpdateTTL:p,maxSize:m=0,maxEntrySize:f=0,sizeCalculation:y,fetchMethod:v,memoMethod:_,noDeleteOnFetchRejection:C,noDeleteOnStaleGet:P,allowStaleOnFetchRejection:w,allowStaleOnFetchAbort:R,ignoreFetchAbort:I}=e;if(t!==0&&!Gv(t))throw new TypeError("max option must be a nonnegative integer");let z=t?aze(t):Array;if(!z)throw new Error("invalid max value: "+t);if(this.#e=t,this.#t=m,this.maxEntrySize=f||this.#t,this.sizeCalculation=y,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(_!==void 0&&typeof _!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#a=_,v!==void 0&&typeof v!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#o=v,this.#C=!!v,this.#l=new Map,this.#u=new Array(t).fill(void 0),this.#s=new Array(t).fill(void 0),this.#y=new z(t),this.#v=new z(t),this.#h=0,this.#m=0,this.#P=wse.create(t),this.#c=0,this.#p=0,typeof l=="function"&&(this.#n=l),typeof u=="function"?(this.#r=u,this.#g=[]):(this.#r=void 0,this.#g=void 0),this.#S=!!this.#n,this.#f=!!this.#r,this.noDisposeOnSet=!!d,this.noUpdateTTL=!!p,this.noDeleteOnFetchRejection=!!C,this.allowStaleOnFetchRejection=!!w,this.allowStaleOnFetchAbort=!!R,this.ignoreFetchAbort=!!I,this.maxEntrySize!==0){if(this.#t!==0&&!Gv(this.#t))throw new TypeError("maxSize must be a positive integer if specified");if(!Gv(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#O()}if(this.allowStale=!!c,this.noDeleteOnStaleGet=!!P,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=Gv(i)||i===0?i:1,this.ttlAutopurge=!!s,this.ttl=n||0,this.ttl){if(!Gv(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#x()}if(this.#e===0&&this.ttl===0&&this.#t===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let G="LRU_CACHE_UNBOUNDED";F1t(G)&&(sze.add(G),oze("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",G,r))}}getRemainingTTL(e){return this.#l.has(e)?1/0:0}#x(){let e=new MT(this.#e),t=new MT(this.#e);this.#_=e,this.#E=t,this.#N=(s,o,a=DT.now())=>{if(t[s]=o!==0?a:0,e[s]=o,o!==0&&this.ttlAutopurge){let c=setTimeout(()=>{this.#b(s)&&this.#A(this.#u[s],"expire")},o+1);c.unref&&c.unref()}},this.#T=s=>{t[s]=e[s]!==0?DT.now():0},this.#i=(s,o)=>{if(e[o]){let a=e[o],c=t[o];if(!a||!c)return;s.ttl=a,s.start=c,s.now=n||i();let l=s.now-c;s.remainingTTL=a-l}};let n=0,i=()=>{let s=DT.now();if(this.ttlResolution>0){n=s;let o=setTimeout(()=>n=0,this.ttlResolution);o.unref&&o.unref()}return s};this.getRemainingTTL=s=>{let o=this.#l.get(s);if(o===void 0)return 0;let a=e[o],c=t[o];if(!a||!c)return 1/0;let l=(n||i())-c;return a-l},this.#b=s=>{let o=t[s],a=e[s];return!!a&&!!o&&(n||i())-o>a}}#T=()=>{};#i=()=>{};#N=()=>{};#b=()=>!1;#O(){let e=new MT(this.#e);this.#p=0,this.#w=e,this.#D=t=>{this.#p-=e[t],e[t]=0},this.#k=(t,n,i,s)=>{if(this.#d(n))return 0;if(!Gv(i))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(i=s(n,t),!Gv(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#M=(t,n,i)=>{if(e[t]=n,this.#t){let s=this.#t-e[t];for(;this.#p>s;)this.#q(!0)}this.#p+=e[t],i&&(i.entrySize=n,i.totalCalculatedSize=this.#p)}}#D=e=>{};#M=(e,t,n)=>{};#k=(e,t,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#I({allowStale:e=this.allowStale}={}){if(this.#c)for(let t=this.#m;!(!this.#L(t)||((e||!this.#b(t))&&(yield t),t===this.#h));)t=this.#v[t]}*#R({allowStale:e=this.allowStale}={}){if(this.#c)for(let t=this.#h;!(!this.#L(t)||((e||!this.#b(t))&&(yield t),t===this.#m));)t=this.#y[t]}#L(e){return e!==void 0&&this.#l.get(this.#u[e])===e}*entries(){for(let e of this.#I())this.#s[e]!==void 0&&this.#u[e]!==void 0&&!this.#d(this.#s[e])&&(yield[this.#u[e],this.#s[e]])}*rentries(){for(let e of this.#R())this.#s[e]!==void 0&&this.#u[e]!==void 0&&!this.#d(this.#s[e])&&(yield[this.#u[e],this.#s[e]])}*keys(){for(let e of this.#I()){let t=this.#u[e];t!==void 0&&!this.#d(this.#s[e])&&(yield t)}}*rkeys(){for(let e of this.#R()){let t=this.#u[e];t!==void 0&&!this.#d(this.#s[e])&&(yield t)}}*values(){for(let e of this.#I())this.#s[e]!==void 0&&!this.#d(this.#s[e])&&(yield this.#s[e])}*rvalues(){for(let e of this.#R())this.#s[e]!==void 0&&!this.#d(this.#s[e])&&(yield this.#s[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,t={}){for(let n of this.#I()){let i=this.#s[n],s=this.#d(i)?i.__staleWhileFetching:i;if(s!==void 0&&e(s,this.#u[n],this))return this.get(this.#u[n],t)}}forEach(e,t=this){for(let n of this.#I()){let i=this.#s[n],s=this.#d(i)?i.__staleWhileFetching:i;s!==void 0&&e.call(t,s,this.#u[n],this)}}rforEach(e,t=this){for(let n of this.#R()){let i=this.#s[n],s=this.#d(i)?i.__staleWhileFetching:i;s!==void 0&&e.call(t,s,this.#u[n],this)}}purgeStale(){let e=!1;for(let t of this.#R({allowStale:!0}))this.#b(t)&&(this.#A(this.#u[t],"expire"),e=!0);return e}info(e){let t=this.#l.get(e);if(t===void 0)return;let n=this.#s[t],i=this.#d(n)?n.__staleWhileFetching:n;if(i===void 0)return;let s={value:i};if(this.#_&&this.#E){let o=this.#_[t],a=this.#E[t];if(o&&a){let c=o-(DT.now()-a);s.ttl=c,s.start=Date.now()}}return this.#w&&(s.size=this.#w[t]),s}dump(){let e=[];for(let t of this.#I({allowStale:!0})){let n=this.#u[t],i=this.#s[t],s=this.#d(i)?i.__staleWhileFetching:i;if(s===void 0||n===void 0)continue;let o={value:s};if(this.#_&&this.#E){o.ttl=this.#_[t];let a=DT.now()-this.#E[t];o.start=Math.floor(Date.now()-a)}this.#w&&(o.size=this.#w[t]),e.unshift([n,o])}return e}load(e){this.clear();for(let[t,n]of e){if(n.start){let i=Date.now()-n.start;n.start=DT.now()-i}this.set(t,n.value,n)}}set(e,t,n={}){if(t===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:s,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:c}=n,{noUpdateTTL:l=this.noUpdateTTL}=n,u=this.#k(e,t,n.size||0,a);if(this.maxEntrySize&&u>this.maxEntrySize)return c&&(c.set="miss",c.maxEntrySizeExceeded=!0),this.#A(e,"set"),this;let d=this.#c===0?void 0:this.#l.get(e);if(d===void 0)d=this.#c===0?this.#m:this.#P.length!==0?this.#P.pop():this.#c===this.#e?this.#q(!1):this.#c,this.#u[d]=e,this.#s[d]=t,this.#l.set(e,d),this.#y[this.#m]=d,this.#v[d]=this.#m,this.#m=d,this.#c++,this.#M(d,u,c),c&&(c.set="add"),l=!1;else{this.#j(d);let p=this.#s[d];if(t!==p){if(this.#C&&this.#d(p)){p.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:m}=p;m!==void 0&&!o&&(this.#S&&this.#n?.(m,e,"set"),this.#f&&this.#g?.push([m,e,"set"]))}else o||(this.#S&&this.#n?.(p,e,"set"),this.#f&&this.#g?.push([p,e,"set"]));if(this.#D(d),this.#M(d,u,c),this.#s[d]=t,c){c.set="replace";let m=p&&this.#d(p)?p.__staleWhileFetching:p;m!==void 0&&(c.oldValue=m)}}else c&&(c.set="update")}if(i!==0&&!this.#_&&this.#x(),this.#_&&(l||this.#N(d,i,s),c&&this.#i(c,d)),!o&&this.#f&&this.#g){let p=this.#g,m;for(;m=p?.shift();)this.#r?.(...m)}return this}pop(){try{for(;this.#c;){let e=this.#s[this.#h];if(this.#q(!0),this.#d(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#f&&this.#g){let e=this.#g,t;for(;t=e?.shift();)this.#r?.(...t)}}}#q(e){let t=this.#h,n=this.#u[t],i=this.#s[t];return this.#C&&this.#d(i)?i.__abortController.abort(new Error("evicted")):(this.#S||this.#f)&&(this.#S&&this.#n?.(i,n,"evict"),this.#f&&this.#g?.push([i,n,"evict"])),this.#D(t),e&&(this.#u[t]=void 0,this.#s[t]=void 0,this.#P.push(t)),this.#c===1?(this.#h=this.#m=0,this.#P.length=0):this.#h=this.#y[t],this.#l.delete(n),this.#c--,t}has(e,t={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=t,s=this.#l.get(e);if(s!==void 0){let o=this.#s[s];if(this.#d(o)&&o.__staleWhileFetching===void 0)return!1;if(this.#b(s))i&&(i.has="stale",this.#i(i,s));else return n&&this.#T(s),i&&(i.has="hit",this.#i(i,s)),!0}else i&&(i.has="miss");return!1}peek(e,t={}){let{allowStale:n=this.allowStale}=t,i=this.#l.get(e);if(i===void 0||!n&&this.#b(i))return;let s=this.#s[i];return this.#d(s)?s.__staleWhileFetching:s}#z(e,t,n,i){let s=t===void 0?void 0:this.#s[t];if(this.#d(s))return s;let o=new b2,{signal:a}=n;a?.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});let c={signal:o.signal,options:n,context:i},l=(y,v=!1)=>{let{aborted:_}=o.signal,C=n.ignoreFetchAbort&&y!==void 0;if(n.status&&(_&&!v?(n.status.fetchAborted=!0,n.status.fetchError=o.signal.reason,C&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),_&&!C&&!v)return d(o.signal.reason);let P=m;return this.#s[t]===m&&(y===void 0?P.__staleWhileFetching?this.#s[t]=P.__staleWhileFetching:this.#A(e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,y,c.options))),y},u=y=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=y),d(y)),d=y=>{let{aborted:v}=o.signal,_=v&&n.allowStaleOnFetchAbort,C=_||n.allowStaleOnFetchRejection,P=C||n.noDeleteOnFetchRejection,w=m;if(this.#s[t]===m&&(!P||w.__staleWhileFetching===void 0?this.#A(e,"fetch"):_||(this.#s[t]=w.__staleWhileFetching)),C)return n.status&&w.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),w.__staleWhileFetching;if(w.__returned===w)throw y},p=(y,v)=>{let _=this.#o?.(e,s,c);_&&_ instanceof Promise&&_.then(C=>y(C===void 0?void 0:C),v),o.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(y(void 0),n.allowStaleOnFetchAbort&&(y=C=>l(C,!0)))})};n.status&&(n.status.fetchDispatched=!0);let m=new Promise(p).then(l,u),f=Object.assign(m,{__abortController:o,__staleWhileFetching:s,__returned:void 0});return t===void 0?(this.set(e,f,{...c.options,status:void 0}),t=this.#l.get(e)):this.#s[t]=f,f}#d(e){if(!this.#C)return!1;let t=e;return!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof b2}async fetch(e,t={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:c=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:p=this.allowStaleOnFetchRejection,ignoreFetchAbort:m=this.ignoreFetchAbort,allowStaleOnFetchAbort:f=this.allowStaleOnFetchAbort,context:y,forceRefresh:v=!1,status:_,signal:C}=t;if(!this.#C)return _&&(_.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:s,status:_});let P={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:s,ttl:o,noDisposeOnSet:a,size:c,sizeCalculation:l,noUpdateTTL:u,noDeleteOnFetchRejection:d,allowStaleOnFetchRejection:p,allowStaleOnFetchAbort:f,ignoreFetchAbort:m,status:_,signal:C},w=this.#l.get(e);if(w===void 0){_&&(_.fetch="miss");let R=this.#z(e,w,P,y);return R.__returned=R}else{let R=this.#s[w];if(this.#d(R)){let H=n&&R.__staleWhileFetching!==void 0;return _&&(_.fetch="inflight",H&&(_.returnedStale=!0)),H?R.__staleWhileFetching:R.__returned=R}let I=this.#b(w);if(!v&&!I)return _&&(_.fetch="hit"),this.#j(w),i&&this.#T(w),_&&this.#i(_,w),R;let z=this.#z(e,w,P,y),L=z.__staleWhileFetching!==void 0&&n;return _&&(_.fetch=I?"stale":"refresh",L&&I&&(_.returnedStale=!0)),L?z.__staleWhileFetching:z.__returned=z}}async forceFetch(e,t={}){let n=await this.fetch(e,t);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,t={}){let n=this.#a;if(!n)throw new Error("no memoMethod provided to constructor");let{context:i,forceRefresh:s,...o}=t,a=this.get(e,o);if(!s&&a!==void 0)return a;let c=n(e,a,{options:o,context:i});return this.set(e,c,o),c}get(e,t={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:o}=t,a=this.#l.get(e);if(a!==void 0){let c=this.#s[a],l=this.#d(c);return o&&this.#i(o,a),this.#b(a)?(o&&(o.get="stale"),l?(o&&n&&c.__staleWhileFetching!==void 0&&(o.returnedStale=!0),n?c.__staleWhileFetching:void 0):(s||this.#A(e,"expire"),o&&n&&(o.returnedStale=!0),n?c:void 0)):(o&&(o.get="hit"),l?c.__staleWhileFetching:(this.#j(a),i&&this.#T(a),c))}else o&&(o.get="miss")}#F(e,t){this.#v[t]=e,this.#y[e]=t}#j(e){e!==this.#m&&(e===this.#h?this.#h=this.#y[e]:this.#F(this.#v[e],this.#y[e]),this.#F(this.#m,e),this.#m=e)}delete(e){return this.#A(e,"delete")}#A(e,t){let n=!1;if(this.#c!==0){let i=this.#l.get(e);if(i!==void 0)if(n=!0,this.#c===1)this.#U(t);else{this.#D(i);let s=this.#s[i];if(this.#d(s)?s.__abortController.abort(new Error("deleted")):(this.#S||this.#f)&&(this.#S&&this.#n?.(s,e,t),this.#f&&this.#g?.push([s,e,t])),this.#l.delete(e),this.#u[i]=void 0,this.#s[i]=void 0,i===this.#m)this.#m=this.#v[i];else if(i===this.#h)this.#h=this.#y[i];else{let o=this.#v[i];this.#y[o]=this.#y[i];let a=this.#y[i];this.#v[a]=this.#v[i]}this.#c--,this.#P.push(i)}}if(this.#f&&this.#g?.length){let i=this.#g,s;for(;s=i?.shift();)this.#r?.(...s)}return n}clear(){return this.#U("delete")}#U(e){for(let t of this.#R({allowStale:!0})){let n=this.#s[t];if(this.#d(n))n.__abortController.abort(new Error("deleted"));else{let i=this.#u[t];this.#S&&this.#n?.(n,i,e),this.#f&&this.#g?.push([n,i,e])}}if(this.#l.clear(),this.#s.fill(void 0),this.#u.fill(void 0),this.#_&&this.#E&&(this.#_.fill(0),this.#E.fill(0)),this.#w&&this.#w.fill(0),this.#h=0,this.#m=0,this.#P.length=0,this.#p=0,this.#c=0,this.#f&&this.#g){let t=this.#g,n;for(;n=t?.shift();)this.#r?.(...n)}}};_2.LRUCache=Ese});var Dse=O(kl=>{"use strict";var j1t=kl&&kl.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(kl,"__esModule",{value:!0});kl.Minipass=kl.isWritable=kl.isReadable=kl.isStream=void 0;var lze=typeof process=="object"&&process?process:{stdout:null,stderr:null},Nse=require("node:events"),mze=j1t(require("node:stream")),U1t=require("node:string_decoder"),B1t=r=>!!r&&typeof r=="object"&&(r instanceof I2||r instanceof mze.default||(0,kl.isReadable)(r)||(0,kl.isWritable)(r));kl.isStream=B1t;var G1t=r=>!!r&&typeof r=="object"&&r instanceof Nse.EventEmitter&&typeof r.pipe=="function"&&r.pipe!==mze.default.Writable.prototype.pipe;kl.isReadable=G1t;var $1t=r=>!!r&&typeof r=="object"&&r instanceof Nse.EventEmitter&&typeof r.write=="function"&&typeof r.end=="function";kl.isWritable=$1t;var Cg=Symbol("EOF"),Pg=Symbol("maybeEmitEnd"),$v=Symbol("emittedEnd"),S2=Symbol("emittingEnd"),gM=Symbol("emittedError"),C2=Symbol("closed"),uze=Symbol("read"),P2=Symbol("flush"),dze=Symbol("flushChunk"),Tm=Symbol("encoding"),kT=Symbol("decoder"),Xa=Symbol("flowing"),yM=Symbol("paused"),LT=Symbol("resume"),Ja=Symbol("buffer"),Ml=Symbol("pipes"),Za=Symbol("bufferLength"),Tse=Symbol("bufferPush"),w2=Symbol("bufferShift"),sl=Symbol("objectMode"),ta=Symbol("destroyed"),Ise=Symbol("error"),Rse=Symbol("emitData"),pze=Symbol("emitEnd"),xse=Symbol("emitEnd2"),Bh=Symbol("async"),Ose=Symbol("abort"),E2=Symbol("aborted"),vM=Symbol("signal"),hC=Symbol("dataListeners"),td=Symbol("discarded"),bM=r=>Promise.resolve().then(r),V1t=r=>r(),H1t=r=>r==="end"||r==="finish"||r==="prefinish",W1t=r=>r instanceof ArrayBuffer||!!r&&typeof r=="object"&&r.constructor&&r.constructor.name==="ArrayBuffer"&&r.byteLength>=0,K1t=r=>!Buffer.isBuffer(r)&&ArrayBuffer.isView(r),T2=class{src;dest;opts;ondrain;constructor(e,t,n){this.src=e,this.dest=t,this.opts=n,this.ondrain=()=>e[LT](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Ase=class extends T2{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,t,n){super(e,t,n),this.proxyErrors=i=>t.emit("error",i),e.on("error",this.proxyErrors)}},Q1t=r=>!!r.objectMode,Y1t=r=>!r.objectMode&&!!r.encoding&&r.encoding!=="buffer",I2=class extends Nse.EventEmitter{[Xa]=!1;[yM]=!1;[Ml]=[];[Ja]=[];[sl];[Tm];[Bh];[kT];[Cg]=!1;[$v]=!1;[S2]=!1;[C2]=!1;[gM]=null;[Za]=0;[ta]=!1;[vM];[E2]=!1;[hC]=0;[td]=!1;writable=!0;readable=!0;constructor(...e){let t=e[0]||{};if(super(),t.objectMode&&typeof t.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");Q1t(t)?(this[sl]=!0,this[Tm]=null):Y1t(t)?(this[Tm]=t.encoding,this[sl]=!1):(this[sl]=!1,this[Tm]=null),this[Bh]=!!t.async,this[kT]=this[Tm]?new U1t.StringDecoder(this[Tm]):null,t&&t.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[Ja]}),t&&t.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[Ml]});let{signal:n}=t;n&&(this[vM]=n,n.aborted?this[Ose]():n.addEventListener("abort",()=>this[Ose]()))}get bufferLength(){return this[Za]}get encoding(){return this[Tm]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[sl]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[Bh]}set async(e){this[Bh]=this[Bh]||!!e}[Ose](){this[E2]=!0,this.emit("abort",this[vM]?.reason),this.destroy(this[vM]?.reason)}get aborted(){return this[E2]}set aborted(e){}write(e,t,n){if(this[E2])return!1;if(this[Cg])throw new Error("write after end");if(this[ta])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof t=="function"&&(n=t,t="utf8"),t||(t="utf8");let i=this[Bh]?bM:V1t;if(!this[sl]&&!Buffer.isBuffer(e)){if(K1t(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(W1t(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[sl]?(this[Xa]&&this[Za]!==0&&this[P2](!0),this[Xa]?this.emit("data",e):this[Tse](e),this[Za]!==0&&this.emit("readable"),n&&i(n),this[Xa]):e.length?(typeof e=="string"&&!(t===this[Tm]&&!this[kT]?.lastNeed)&&(e=Buffer.from(e,t)),Buffer.isBuffer(e)&&this[Tm]&&(e=this[kT].write(e)),this[Xa]&&this[Za]!==0&&this[P2](!0),this[Xa]?this.emit("data",e):this[Tse](e),this[Za]!==0&&this.emit("readable"),n&&i(n),this[Xa]):(this[Za]!==0&&this.emit("readable"),n&&i(n),this[Xa])}read(e){if(this[ta])return null;if(this[td]=!1,this[Za]===0||e===0||e&&e>this[Za])return this[Pg](),null;this[sl]&&(e=null),this[Ja].length>1&&!this[sl]&&(this[Ja]=[this[Tm]?this[Ja].join(""):Buffer.concat(this[Ja],this[Za])]);let t=this[uze](e||null,this[Ja][0]);return this[Pg](),t}[uze](e,t){if(this[sl])this[w2]();else{let n=t;e===n.length||e===null?this[w2]():typeof n=="string"?(this[Ja][0]=n.slice(e),t=n.slice(0,e),this[Za]-=e):(this[Ja][0]=n.subarray(e),t=n.subarray(0,e),this[Za]-=e)}return this.emit("data",t),!this[Ja].length&&!this[Cg]&&this.emit("drain"),t}end(e,t,n){return typeof e=="function"&&(n=e,e=void 0),typeof t=="function"&&(n=t,t="utf8"),e!==void 0&&this.write(e,t),n&&this.once("end",n),this[Cg]=!0,this.writable=!1,(this[Xa]||!this[yM])&&this[Pg](),this}[LT](){this[ta]||(!this[hC]&&!this[Ml].length&&(this[td]=!0),this[yM]=!1,this[Xa]=!0,this.emit("resume"),this[Ja].length?this[P2]():this[Cg]?this[Pg]():this.emit("drain"))}resume(){return this[LT]()}pause(){this[Xa]=!1,this[yM]=!0,this[td]=!1}get destroyed(){return this[ta]}get flowing(){return this[Xa]}get paused(){return this[yM]}[Tse](e){this[sl]?this[Za]+=1:this[Za]+=e.length,this[Ja].push(e)}[w2](){return this[sl]?this[Za]-=1:this[Za]-=this[Ja][0].length,this[Ja].shift()}[P2](e=!1){do;while(this[dze](this[w2]())&&this[Ja].length);!e&&!this[Ja].length&&!this[Cg]&&this.emit("drain")}[dze](e){return this.emit("data",e),this[Xa]}pipe(e,t){if(this[ta])return e;this[td]=!1;let n=this[$v];return t=t||{},e===lze.stdout||e===lze.stderr?t.end=!1:t.end=t.end!==!1,t.proxyErrors=!!t.proxyErrors,n?t.end&&e.end():(this[Ml].push(t.proxyErrors?new Ase(this,e,t):new T2(this,e,t)),this[Bh]?bM(()=>this[LT]()):this[LT]()),e}unpipe(e){let t=this[Ml].find(n=>n.dest===e);t&&(this[Ml].length===1?(this[Xa]&&this[hC]===0&&(this[Xa]=!1),this[Ml]=[]):this[Ml].splice(this[Ml].indexOf(t),1),t.unpipe())}addListener(e,t){return this.on(e,t)}on(e,t){let n=super.on(e,t);if(e==="data")this[td]=!1,this[hC]++,!this[Ml].length&&!this[Xa]&&this[LT]();else if(e==="readable"&&this[Za]!==0)super.emit("readable");else if(H1t(e)&&this[$v])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[gM]){let i=t;this[Bh]?bM(()=>i.call(this,this[gM])):i.call(this,this[gM])}return n}removeListener(e,t){return this.off(e,t)}off(e,t){let n=super.off(e,t);return e==="data"&&(this[hC]=this.listeners("data").length,this[hC]===0&&!this[td]&&!this[Ml].length&&(this[Xa]=!1)),n}removeAllListeners(e){let t=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[hC]=0,!this[td]&&!this[Ml].length&&(this[Xa]=!1)),t}get emittedEnd(){return this[$v]}[Pg](){!this[S2]&&!this[$v]&&!this[ta]&&this[Ja].length===0&&this[Cg]&&(this[S2]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[C2]&&this.emit("close"),this[S2]=!1)}emit(e,...t){let n=t[0];if(e!=="error"&&e!=="close"&&e!==ta&&this[ta])return!1;if(e==="data")return!this[sl]&&!n?!1:this[Bh]?(bM(()=>this[Rse](n)),!0):this[Rse](n);if(e==="end")return this[pze]();if(e==="close"){if(this[C2]=!0,!this[$v]&&!this[ta])return!1;let s=super.emit("close");return this.removeAllListeners("close"),s}else if(e==="error"){this[gM]=n,super.emit(Ise,n);let s=!this[vM]||this.listeners("error").length?super.emit("error",n):!1;return this[Pg](),s}else if(e==="resume"){let s=super.emit("resume");return this[Pg](),s}else if(e==="finish"||e==="prefinish"){let s=super.emit(e);return this.removeAllListeners(e),s}let i=super.emit(e,...t);return this[Pg](),i}[Rse](e){for(let n of this[Ml])n.dest.write(e)===!1&&this.pause();let t=this[td]?!1:super.emit("data",e);return this[Pg](),t}[pze](){return this[$v]?!1:(this[$v]=!0,this.readable=!1,this[Bh]?(bM(()=>this[xse]()),!0):this[xse]())}[xse](){if(this[kT]){let t=this[kT].end();if(t){for(let n of this[Ml])n.dest.write(t);this[td]||super.emit("data",t)}}for(let t of this[Ml])t.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[sl]||(e.dataLength=0);let t=this.promise();return this.on("data",n=>{e.push(n),this[sl]||(e.dataLength+=n.length)}),await t,e}async concat(){if(this[sl])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[Tm]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,t)=>{this.on(ta,()=>t(new Error("stream destroyed"))),this.on("error",n=>t(n)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[td]=!1;let e=!1,t=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return t();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[Cg])return t();let s,o,a=d=>{this.off("data",c),this.off("end",l),this.off(ta,u),t(),o(d)},c=d=>{this.off("error",a),this.off("end",l),this.off(ta,u),this.pause(),s({value:d,done:!!this[Cg]})},l=()=>{this.off("error",a),this.off("data",c),this.off(ta,u),t(),s({done:!0,value:void 0})},u=()=>a(new Error("stream destroyed"));return new Promise((d,p)=>{o=p,s=d,this.once(ta,u),this.once("error",a),this.once("end",l),this.once("data",c)})},throw:t,return:t,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[td]=!1;let e=!1,t=()=>(this.pause(),this.off(Ise,t),this.off(ta,t),this.off("end",t),e=!0,{done:!0,value:void 0}),n=()=>{if(e)return t();let i=this.read();return i===null?t():{done:!1,value:i}};return this.once("end",t),this.once(Ise,t),this.once(ta,t),{next:n,throw:t,return:t,[Symbol.iterator](){return this}}}destroy(e){if(this[ta])return e?this.emit("error",e):this.emit(ta),this;this[ta]=!0,this[td]=!0,this[Ja].length=0,this[Za]=0;let t=this;return typeof t.close=="function"&&!this[C2]&&t.close(),e?this.emit("error",e):this.emit(ta),this}static get isStream(){return kl.isStream}};kl.Minipass=I2});var Rze=O(ts=>{"use strict";var X1t=ts&&ts.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),J1t=ts&&ts.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Z1t=ts&&ts.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&X1t(e,r,t);return J1t(e,r),e};Object.defineProperty(ts,"__esModule",{value:!0});ts.PathScurry=ts.Path=ts.PathScurryDarwin=ts.PathScurryPosix=ts.PathScurryWin32=ts.PathScurryBase=ts.PathPosix=ts.PathWin32=ts.PathBase=ts.ChildrenCache=ts.ResolveCache=void 0;var bze=cze(),N2=require("node:path"),eFt=require("node:url"),SM=require("fs"),tFt=Z1t(require("node:fs")),rFt=SM.realpathSync.native,R2=require("node:fs/promises"),hze=Dse(),CM={lstatSync:SM.lstatSync,readdir:SM.readdir,readdirSync:SM.readdirSync,readlinkSync:SM.readlinkSync,realpathSync:rFt,promises:{lstat:R2.lstat,readdir:R2.readdir,readlink:R2.readlink,realpath:R2.realpath}},_ze=r=>!r||r===CM||r===tFt?CM:{...CM,...r,promises:{...CM.promises,...r.promises||{}}},Sze=/^\\\\\?\\([a-z]:)\\?$/i,nFt=r=>r.replace(/\//g,"\\").replace(Sze,"$1\\"),iFt=/[\\\/]/,rp=0,Cze=1,Pze=2,Gh=4,wze=6,Eze=8,fC=10,Tze=12,tp=15,_M=~tp,Mse=16,fze=32,PM=64,Im=128,x2=256,A2=512,gze=PM|Im|A2,sFt=1023,kse=r=>r.isFile()?Eze:r.isDirectory()?Gh:r.isSymbolicLink()?fC:r.isCharacterDevice()?Pze:r.isBlockDevice()?wze:r.isSocket()?Tze:r.isFIFO()?Cze:rp,yze=new Map,wM=r=>{let e=yze.get(r);if(e)return e;let t=r.normalize("NFKD");return yze.set(r,t),t},vze=new Map,O2=r=>{let e=vze.get(r);if(e)return e;let t=wM(r.toLowerCase());return vze.set(r,t),t},EM=class extends bze.LRUCache{constructor(){super({max:256})}};ts.ResolveCache=EM;var D2=class extends bze.LRUCache{constructor(e=16*1024){super({maxSize:e,sizeCalculation:t=>t.length+1})}};ts.ChildrenCache=D2;var Ize=Symbol("PathScurry setAsCwd"),xc=class{name;root;roots;parent;nocase;isCWD=!1;#e;#t;get dev(){return this.#t}#n;get mode(){return this.#n}#r;get nlink(){return this.#r}#o;get uid(){return this.#o}#a;get gid(){return this.#a}#c;get rdev(){return this.#c}#p;get blksize(){return this.#p}#l;get ino(){return this.#l}#u;get size(){return this.#u}#s;get blocks(){return this.#s}#y;get atimeMs(){return this.#y}#v;get mtimeMs(){return this.#v}#h;get ctimeMs(){return this.#h}#m;get birthtimeMs(){return this.#m}#P;get atime(){return this.#P}#g;get mtime(){return this.#g}#w;get ctime(){return this.#w}#E;get birthtime(){return this.#E}#_;#S;#C;#f;#x;#T;#i;#N;#b;#O;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(e,t=rp,n,i,s,o,a){this.name=e,this.#_=s?O2(e):wM(e),this.#i=t&sFt,this.nocase=s,this.roots=i,this.root=n||this,this.#N=o,this.#C=a.fullpath,this.#x=a.relative,this.#T=a.relativePosix,this.parent=a.parent,this.parent?this.#e=this.parent.#e:this.#e=_ze(a.fs)}depth(){return this.#S!==void 0?this.#S:this.parent?this.#S=this.parent.depth()+1:this.#S=0}childrenCache(){return this.#N}resolve(e){if(!e)return this;let t=this.getRootString(e),i=e.substring(t.length).split(this.splitSep);return t?this.getRoot(t).#D(i):this.#D(i)}#D(e){let t=this;for(let n of e)t=t.child(n);return t}children(){let e=this.#N.get(this);if(e)return e;let t=Object.assign([],{provisional:0});return this.#N.set(this,t),this.#i&=~Mse,t}child(e,t){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let n=this.children(),i=this.nocase?O2(e):wM(e);for(let c of n)if(c.#_===i)return c;let s=this.parent?this.sep:"",o=this.#C?this.#C+s+e:void 0,a=this.newChild(e,rp,{...t,parent:this,fullpath:o});return this.canReaddir()||(a.#i|=Im),n.push(a),a}relative(){if(this.isCWD)return"";if(this.#x!==void 0)return this.#x;let e=this.name,t=this.parent;if(!t)return this.#x=this.name;let n=t.relative();return n+(!n||!t.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#T!==void 0)return this.#T;let e=this.name,t=this.parent;if(!t)return this.#T=this.fullpathPosix();let n=t.relativePosix();return n+(!n||!t.parent?"":"/")+e}fullpath(){if(this.#C!==void 0)return this.#C;let e=this.name,t=this.parent;if(!t)return this.#C=this.name;let i=t.fullpath()+(t.parent?this.sep:"")+e;return this.#C=i}fullpathPosix(){if(this.#f!==void 0)return this.#f;if(this.sep==="/")return this.#f=this.fullpath();if(!this.parent){let i=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(i)?this.#f=`//?/${i}`:this.#f=i}let e=this.parent,t=e.fullpathPosix(),n=t+(!t||!e.parent?"":"/")+this.name;return this.#f=n}isUnknown(){return(this.#i&tp)===rp}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#i&tp)===Eze}isDirectory(){return(this.#i&tp)===Gh}isCharacterDevice(){return(this.#i&tp)===Pze}isBlockDevice(){return(this.#i&tp)===wze}isFIFO(){return(this.#i&tp)===Cze}isSocket(){return(this.#i&tp)===Tze}isSymbolicLink(){return(this.#i&fC)===fC}lstatCached(){return this.#i&fze?this:void 0}readlinkCached(){return this.#b}realpathCached(){return this.#O}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#b)return!0;if(!this.parent)return!1;let e=this.#i&tp;return!(e!==rp&&e!==fC||this.#i&x2||this.#i&Im)}calledReaddir(){return!!(this.#i&Mse)}isENOENT(){return!!(this.#i&Im)}isNamed(e){return this.nocase?this.#_===O2(e):this.#_===wM(e)}async readlink(){let e=this.#b;if(e)return e;if(this.canReadlink()&&this.parent)try{let t=await this.#e.promises.readlink(this.fullpath()),n=(await this.parent.realpath())?.resolve(t);if(n)return this.#b=n}catch(t){this.#d(t.code);return}}readlinkSync(){let e=this.#b;if(e)return e;if(this.canReadlink()&&this.parent)try{let t=this.#e.readlinkSync(this.fullpath()),n=this.parent.realpathSync()?.resolve(t);if(n)return this.#b=n}catch(t){this.#d(t.code);return}}#M(e){this.#i|=Mse;for(let t=e.provisional;t<e.length;t++){let n=e[t];n&&n.#k()}}#k(){this.#i&Im||(this.#i=(this.#i|Im)&_M,this.#I())}#I(){let e=this.children();e.provisional=0;for(let t of e)t.#k()}#R(){this.#i|=A2,this.#L()}#L(){if(this.#i&PM)return;let e=this.#i;(e&tp)===Gh&&(e&=_M),this.#i=e|PM,this.#I()}#q(e=""){e==="ENOTDIR"||e==="EPERM"?this.#L():e==="ENOENT"?this.#k():this.children().provisional=0}#z(e=""){e==="ENOTDIR"?this.parent.#L():e==="ENOENT"&&this.#k()}#d(e=""){let t=this.#i;t|=x2,e==="ENOENT"&&(t|=Im),(e==="EINVAL"||e==="UNKNOWN")&&(t&=_M),this.#i=t,e==="ENOTDIR"&&this.parent&&this.parent.#L()}#F(e,t){return this.#A(e,t)||this.#j(e,t)}#j(e,t){let n=kse(e),i=this.newChild(e.name,n,{parent:this}),s=i.#i&tp;return s!==Gh&&s!==fC&&s!==rp&&(i.#i|=PM),t.unshift(i),t.provisional++,i}#A(e,t){for(let n=t.provisional;n<t.length;n++){let i=t[n];if((this.nocase?O2(e.name):wM(e.name))===i.#_)return this.#U(e,i,n,t)}}#U(e,t,n,i){let s=t.name;return t.#i=t.#i&_M|kse(e),s!==e.name&&(t.name=e.name),n!==i.provisional&&(n===i.length-1?i.pop():i.splice(n,1),i.unshift(t)),i.provisional++,t}async lstat(){if((this.#i&Im)===0)try{return this.#V(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#z(e.code)}}lstatSync(){if((this.#i&Im)===0)try{return this.#V(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#z(e.code)}}#V(e){let{atime:t,atimeMs:n,birthtime:i,birthtimeMs:s,blksize:o,blocks:a,ctime:c,ctimeMs:l,dev:u,gid:d,ino:p,mode:m,mtime:f,mtimeMs:y,nlink:v,rdev:_,size:C,uid:P}=e;this.#P=t,this.#y=n,this.#E=i,this.#m=s,this.#p=o,this.#s=a,this.#w=c,this.#h=l,this.#t=u,this.#a=d,this.#l=p,this.#n=m,this.#g=f,this.#v=y,this.#r=v,this.#c=_,this.#u=C,this.#o=P;let w=kse(e);this.#i=this.#i&_M|w|fze,w!==rp&&w!==Gh&&w!==fC&&(this.#i|=PM)}#G=[];#$=!1;#H(e){this.#$=!1;let t=this.#G.slice();this.#G.length=0,t.forEach(n=>n(null,e))}readdirCB(e,t=!1){if(!this.canReaddir()){t?e(null,[]):queueMicrotask(()=>e(null,[]));return}let n=this.children();if(this.calledReaddir()){let s=n.slice(0,n.provisional);t?e(null,s):queueMicrotask(()=>e(null,s));return}if(this.#G.push(e),this.#$)return;this.#$=!0;let i=this.fullpath();this.#e.readdir(i,{withFileTypes:!0},(s,o)=>{if(s)this.#q(s.code),n.provisional=0;else{for(let a of o)this.#F(a,n);this.#M(n)}this.#H(n.slice(0,n.provisional))})}#B;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let t=this.fullpath();if(this.#B)await this.#B;else{let n=()=>{};this.#B=new Promise(i=>n=i);try{for(let i of await this.#e.promises.readdir(t,{withFileTypes:!0}))this.#F(i,e);this.#M(e)}catch(i){this.#q(i.code),e.provisional=0}this.#B=void 0,n()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let t=this.fullpath();try{for(let n of this.#e.readdirSync(t,{withFileTypes:!0}))this.#F(n,e);this.#M(e)}catch(n){this.#q(n.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#i&gze)return!1;let e=tp&this.#i;return e===rp||e===Gh||e===fC}shouldWalk(e,t){return(this.#i&Gh)===Gh&&!(this.#i&gze)&&!e.has(this)&&(!t||t(this))}async realpath(){if(this.#O)return this.#O;if(!((A2|x2|Im)&this.#i))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#O=this.resolve(e)}catch{this.#R()}}realpathSync(){if(this.#O)return this.#O;if(!((A2|x2|Im)&this.#i))try{let e=this.#e.realpathSync(this.fullpath());return this.#O=this.resolve(e)}catch{this.#R()}}[Ize](e){if(e===this)return;e.isCWD=!1,this.isCWD=!0;let t=new Set([]),n=[],i=this;for(;i&&i.parent;)t.add(i),i.#x=n.join(this.sep),i.#T=n.join("/"),i=i.parent,n.push("..");for(i=e;i&&i.parent&&!t.has(i);)i.#x=void 0,i.#T=void 0,i=i.parent}};ts.PathBase=xc;var TM=class r extends xc{sep="\\";splitSep=iFt;constructor(e,t=rp,n,i,s,o,a){super(e,t,n,i,s,o,a)}newChild(e,t=rp,n={}){return new r(e,t,this.root,this.roots,this.nocase,this.childrenCache(),n)}getRootString(e){return N2.win32.parse(e).root}getRoot(e){if(e=nFt(e.toUpperCase()),e===this.root.name)return this.root;for(let[t,n]of Object.entries(this.roots))if(this.sameRoot(e,t))return this.roots[e]=n;return this.roots[e]=new xM(e,this).root}sameRoot(e,t=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(Sze,"$1\\"),e===t}};ts.PathWin32=TM;var IM=class r extends xc{splitSep="/";sep="/";constructor(e,t=rp,n,i,s,o,a){super(e,t,n,i,s,o,a)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,t=rp,n={}){return new r(e,t,this.root,this.roots,this.nocase,this.childrenCache(),n)}};ts.PathPosix=IM;var RM=class{root;rootPath;roots;cwd;#e;#t;#n;nocase;#r;constructor(e=process.cwd(),t,n,{nocase:i,childrenCacheSize:s=16*1024,fs:o=CM}={}){this.#r=_ze(o),(e instanceof URL||e.startsWith("file://"))&&(e=(0,eFt.fileURLToPath)(e));let a=t.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(a),this.#e=new EM,this.#t=new EM,this.#n=new D2(s);let c=a.substring(this.rootPath.length).split(n);if(c.length===1&&!c[0]&&c.pop(),i===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=i,this.root=this.newRoot(this.#r),this.roots[this.rootPath]=this.root;let l=this.root,u=c.length-1,d=t.sep,p=this.rootPath,m=!1;for(let f of c){let y=u--;l=l.child(f,{relative:new Array(y).fill("..").join(d),relativePosix:new Array(y).fill("..").join("/"),fullpath:p+=(m?"":d)+f}),m=!0}this.cwd=l}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#n}resolve(...e){let t="";for(let s=e.length-1;s>=0;s--){let o=e[s];if(!(!o||o===".")&&(t=t?`${o}/${t}`:o,this.isAbsolute(o)))break}let n=this.#e.get(t);if(n!==void 0)return n;let i=this.cwd.resolve(t).fullpath();return this.#e.set(t,i),i}resolvePosix(...e){let t="";for(let s=e.length-1;s>=0;s--){let o=e[s];if(!(!o||o===".")&&(t=t?`${o}/${t}`:o,this.isAbsolute(o)))break}let n=this.#t.get(t);if(n!==void 0)return n;let i=this.cwd.resolve(t).fullpathPosix();return this.#t.set(t,i),i}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,t={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof xc||(t=e,e=this.cwd);let{withFileTypes:n}=t;if(e.canReaddir()){let i=await e.readdir();return n?i:i.map(s=>s.name)}else return[]}readdirSync(e=this.cwd,t={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof xc||(t=e,e=this.cwd);let{withFileTypes:n=!0}=t;return e.canReaddir()?n?e.readdirSync():e.readdirSync().map(i=>i.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:t}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof xc||(t=e.withFileTypes,e=this.cwd);let n=await e.readlink();return t?n:n?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:t}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof xc||(t=e.withFileTypes,e=this.cwd);let n=e.readlinkSync();return t?n:n?.fullpath()}async realpath(e=this.cwd,{withFileTypes:t}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof xc||(t=e.withFileTypes,e=this.cwd);let n=await e.realpath();return t?n:n?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:t}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof xc||(t=e.withFileTypes,e=this.cwd);let n=e.realpathSync();return t?n:n?.fullpath()}async walk(e=this.cwd,t={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof xc||(t=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:s,walkFilter:o}=t,a=[];(!s||s(e))&&a.push(n?e:e.fullpath());let c=new Set,l=(d,p)=>{c.add(d),d.readdirCB((m,f)=>{if(m)return p(m);let y=f.length;if(!y)return p();let v=()=>{--y===0&&p()};for(let _ of f)(!s||s(_))&&a.push(n?_:_.fullpath()),i&&_.isSymbolicLink()?_.realpath().then(C=>C?.isUnknown()?C.lstat():C).then(C=>C?.shouldWalk(c,o)?l(C,v):v()):_.shouldWalk(c,o)?l(_,v):v()},!0)},u=e;return new Promise((d,p)=>{l(u,m=>{if(m)return p(m);d(a)})})}walkSync(e=this.cwd,t={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof xc||(t=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:s,walkFilter:o}=t,a=[];(!s||s(e))&&a.push(n?e:e.fullpath());let c=new Set([e]);for(let l of c){let u=l.readdirSync();for(let d of u){(!s||s(d))&&a.push(n?d:d.fullpath());let p=d;if(d.isSymbolicLink()){if(!(i&&(p=d.realpathSync())))continue;p.isUnknown()&&p.lstatSync()}p.shouldWalk(c,o)&&c.add(p)}}return a}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,t={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof xc||(t=e,e=this.cwd),this.stream(e,t)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,t={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof xc||(t=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:s,walkFilter:o}=t;(!s||s(e))&&(yield n?e:e.fullpath());let a=new Set([e]);for(let c of a){let l=c.readdirSync();for(let u of l){(!s||s(u))&&(yield n?u:u.fullpath());let d=u;if(u.isSymbolicLink()){if(!(i&&(d=u.realpathSync())))continue;d.isUnknown()&&d.lstatSync()}d.shouldWalk(a,o)&&a.add(d)}}}stream(e=this.cwd,t={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof xc||(t=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:s,walkFilter:o}=t,a=new hze.Minipass({objectMode:!0});(!s||s(e))&&a.write(n?e:e.fullpath());let c=new Set,l=[e],u=0,d=()=>{let p=!1;for(;!p;){let m=l.shift();if(!m){u===0&&a.end();return}u++,c.add(m);let f=(v,_,C=!1)=>{if(v)return a.emit("error",v);if(i&&!C){let P=[];for(let w of _)w.isSymbolicLink()&&P.push(w.realpath().then(R=>R?.isUnknown()?R.lstat():R));if(P.length){Promise.all(P).then(()=>f(null,_,!0));return}}for(let P of _)P&&(!s||s(P))&&(a.write(n?P:P.fullpath())||(p=!0));u--;for(let P of _){let w=P.realpathCached()||P;w.shouldWalk(c,o)&&l.push(w)}p&&!a.flowing?a.once("drain",d):y||d()},y=!0;m.readdirCB(f,!0),y=!1}};return d(),a}streamSync(e=this.cwd,t={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof xc||(t=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:s,walkFilter:o}=t,a=new hze.Minipass({objectMode:!0}),c=new Set;(!s||s(e))&&a.write(n?e:e.fullpath());let l=[e],u=0,d=()=>{let p=!1;for(;!p;){let m=l.shift();if(!m){u===0&&a.end();return}u++,c.add(m);let f=m.readdirSync();for(let y of f)(!s||s(y))&&(a.write(n?y:y.fullpath())||(p=!0));u--;for(let y of f){let v=y;if(y.isSymbolicLink()){if(!(i&&(v=y.realpathSync())))continue;v.isUnknown()&&v.lstatSync()}v.shouldWalk(c,o)&&l.push(v)}}p&&!a.flowing&&a.once("drain",d)};return d(),a}chdir(e=this.cwd){let t=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[Ize](t)}};ts.PathScurryBase=RM;var xM=class extends RM{sep="\\";constructor(e=process.cwd(),t={}){let{nocase:n=!0}=t;super(e,N2.win32,"\\",{...t,nocase:n}),this.nocase=n;for(let i=this.cwd;i;i=i.parent)i.nocase=this.nocase}parseRootPath(e){return N2.win32.parse(e).root.toUpperCase()}newRoot(e){return new TM(this.rootPath,Gh,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}};ts.PathScurryWin32=xM;var OM=class extends RM{sep="/";constructor(e=process.cwd(),t={}){let{nocase:n=!1}=t;super(e,N2.posix,"/",{...t,nocase:n}),this.nocase=n}parseRootPath(e){return"/"}newRoot(e){return new IM(this.rootPath,Gh,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}};ts.PathScurryPosix=OM;var M2=class extends OM{constructor(e=process.cwd(),t={}){let{nocase:n=!0}=t;super(e,{...t,nocase:n})}};ts.PathScurryDarwin=M2;ts.Path=process.platform==="win32"?TM:IM;ts.PathScurry=process.platform==="win32"?xM:process.platform==="darwin"?M2:OM});var qse=O(k2=>{"use strict";Object.defineProperty(k2,"__esModule",{value:!0});k2.Pattern=void 0;var oFt=Bv(),aFt=r=>r.length>=1,cFt=r=>r.length>=1,Lse=class r{#e;#t;#n;length;#r;#o;#a;#c;#p;#l;#u=!0;constructor(e,t,n,i){if(!aFt(e))throw new TypeError("empty pattern list");if(!cFt(t))throw new TypeError("empty glob list");if(t.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,n<0||n>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#t=t,this.#n=n,this.#r=i,this.#n===0){if(this.isUNC()){let[s,o,a,c,...l]=this.#e,[u,d,p,m,...f]=this.#t;l[0]===""&&(l.shift(),f.shift());let y=[s,o,a,c,""].join("/"),v=[u,d,p,m,""].join("/");this.#e=[y,...l],this.#t=[v,...f],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[s,...o]=this.#e,[a,...c]=this.#t;o[0]===""&&(o.shift(),c.shift());let l=s+"/",u=a+"/";this.#e=[l,...o],this.#t=[u,...c],this.length=this.#e.length}}}pattern(){return this.#e[this.#n]}isString(){return typeof this.#e[this.#n]=="string"}isGlobstar(){return this.#e[this.#n]===oFt.GLOBSTAR}isRegExp(){return this.#e[this.#n]instanceof RegExp}globString(){return this.#a=this.#a||(this.#n===0?this.isAbsolute()?this.#t[0]+this.#t.slice(1).join("/"):this.#t.join("/"):this.#t.slice(this.#n).join("/"))}hasMore(){return this.length>this.#n+1}rest(){return this.#o!==void 0?this.#o:this.hasMore()?(this.#o=new r(this.#e,this.#t,this.#n+1,this.#r),this.#o.#l=this.#l,this.#o.#p=this.#p,this.#o.#c=this.#c,this.#o):this.#o=null}isUNC(){let e=this.#e;return this.#p!==void 0?this.#p:this.#p=this.#r==="win32"&&this.#n===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#c!==void 0?this.#c:this.#c=this.#r==="win32"&&this.#n===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#l!==void 0?this.#l:this.#l=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#n===0?e:""}checkFollowGlobstar(){return!(this.#n===0||!this.isGlobstar()||!this.#u)}markFollowGlobstar(){return this.#n===0||!this.isGlobstar()||!this.#u?!1:(this.#u=!1,!0)}};k2.Pattern=Lse});var Fse=O(L2=>{"use strict";Object.defineProperty(L2,"__esModule",{value:!0});L2.Ignore=void 0;var xze=Bv(),lFt=qse(),uFt=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",zse=class{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(e,{nobrace:t,nocase:n,noext:i,noglobstar:s,platform:o=uFt}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=o,this.mmopts={dot:!0,nobrace:t,nocase:n,noext:i,noglobstar:s,optimizationLevel:2,platform:o,nocomment:!0,nonegate:!0};for(let a of e)this.add(a)}add(e){let t=new xze.Minimatch(e,this.mmopts);for(let n=0;n<t.set.length;n++){let i=t.set[n],s=t.globParts[n];if(!i||!s)throw new Error("invalid pattern object");for(;i[0]==="."&&s[0]===".";)i.shift(),s.shift();let o=new lFt.Pattern(i,s,0,this.platform),a=new xze.Minimatch(o.globString(),this.mmopts),c=s[s.length-1]==="**",l=o.isAbsolute();l?this.absolute.push(a):this.relative.push(a),c&&(l?this.absoluteChildren.push(a):this.relativeChildren.push(a))}}ignored(e){let t=e.fullpath(),n=`${t}/`,i=e.relative()||".",s=`${i}/`;for(let o of this.relative)if(o.match(i)||o.match(s))return!0;for(let o of this.absolute)if(o.match(t)||o.match(n))return!0;return!1}childrenIgnored(e){let t=e.fullpath()+"/",n=(e.relative()||".")+"/";for(let i of this.relativeChildren)if(i.match(n))return!0;for(let i of this.absoluteChildren)if(i.match(t))return!0;return!1}};L2.Ignore=zse});var Aze=O($h=>{"use strict";Object.defineProperty($h,"__esModule",{value:!0});$h.Processor=$h.SubWalks=$h.MatchRecord=$h.HasWalkedCache=void 0;var Oze=Bv(),q2=class r{store;constructor(e=new Map){this.store=e}copy(){return new r(new Map(this.store))}hasWalked(e,t){return this.store.get(e.fullpath())?.has(t.globString())}storeWalked(e,t){let n=e.fullpath(),i=this.store.get(n);i?i.add(t.globString()):this.store.set(n,new Set([t.globString()]))}};$h.HasWalkedCache=q2;var z2=class{store=new Map;add(e,t,n){let i=(t?2:0)|(n?1:0),s=this.store.get(e);this.store.set(e,s===void 0?i:i&s)}entries(){return[...this.store.entries()].map(([e,t])=>[e,!!(t&2),!!(t&1)])}};$h.MatchRecord=z2;var F2=class{store=new Map;add(e,t){if(!e.canReaddir())return;let n=this.store.get(e);n?n.find(i=>i.globString()===t.globString())||n.push(t):this.store.set(e,[t])}get(e){let t=this.store.get(e);if(!t)throw new Error("attempting to walk unknown path");return t}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}};$h.SubWalks=F2;var jse=class r{hasWalkedCache;matches=new z2;subwalks=new F2;patterns;follow;dot;opts;constructor(e,t){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=t?t.copy():new q2}processPatterns(e,t){this.patterns=t;let n=t.map(i=>[e,i]);for(let[i,s]of n){this.hasWalkedCache.storeWalked(i,s);let o=s.root(),a=s.isAbsolute()&&this.opts.absolute!==!1;if(o){i=i.resolve(o==="/"&&this.opts.root!==void 0?this.opts.root:o);let d=s.rest();if(d)s=d;else{this.matches.add(i,!0,!1);continue}}if(i.isENOENT())continue;let c,l,u=!1;for(;typeof(c=s.pattern())=="string"&&(l=s.rest());)i=i.resolve(c),s=l,u=!0;if(c=s.pattern(),l=s.rest(),u){if(this.hasWalkedCache.hasWalked(i,s))continue;this.hasWalkedCache.storeWalked(i,s)}if(typeof c=="string"){let d=c===".."||c===""||c===".";this.matches.add(i.resolve(c),a,d);continue}else if(c===Oze.GLOBSTAR){(!i.isSymbolicLink()||this.follow||s.checkFollowGlobstar())&&this.subwalks.add(i,s);let d=l?.pattern(),p=l?.rest();if(!l||(d===""||d===".")&&!p)this.matches.add(i,a,d===""||d===".");else if(d===".."){let m=i.parent||i;p?this.hasWalkedCache.hasWalked(m,p)||this.subwalks.add(m,p):this.matches.add(m,a,!0)}}else c instanceof RegExp&&this.subwalks.add(i,s)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new r(this.opts,this.hasWalkedCache)}filterEntries(e,t){let n=this.subwalks.get(e),i=this.child();for(let s of t)for(let o of n){let a=o.isAbsolute(),c=o.pattern(),l=o.rest();c===Oze.GLOBSTAR?i.testGlobstar(s,o,l,a):c instanceof RegExp?i.testRegExp(s,c,l,a):i.testString(s,c,l,a)}return i}testGlobstar(e,t,n,i){if((this.dot||!e.name.startsWith("."))&&(t.hasMore()||this.matches.add(e,i,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,t):e.isSymbolicLink()&&(n&&t.checkFollowGlobstar()?this.subwalks.add(e,n):t.markFollowGlobstar()&&this.subwalks.add(e,t)))),n){let s=n.pattern();if(typeof s=="string"&&s!==".."&&s!==""&&s!==".")this.testString(e,s,n.rest(),i);else if(s===".."){let o=e.parent||e;this.subwalks.add(o,n)}else s instanceof RegExp&&this.testRegExp(e,s,n.rest(),i)}}testRegExp(e,t,n,i){t.test(e.name)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}testString(e,t,n,i){e.isNamed(t)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}};$h.Processor=jse});var Mze=O(Vv=>{"use strict";Object.defineProperty(Vv,"__esModule",{value:!0});Vv.GlobStream=Vv.GlobWalker=Vv.GlobUtil=void 0;var dFt=Dse(),Nze=Fse(),Dze=Aze(),pFt=(r,e)=>typeof r=="string"?new Nze.Ignore([r],e):Array.isArray(r)?new Nze.Ignore(r,e):r,AM=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#t;#n;signal;maxDepth;includeChildMatches;constructor(e,t,n){if(this.patterns=e,this.path=t,this.opts=n,this.#n=!n.posix&&n.platform==="win32"?"\\":"/",this.includeChildMatches=n.includeChildMatches!==!1,(n.ignore||!this.includeChildMatches)&&(this.#t=pFt(n.ignore??[],n),!this.includeChildMatches&&typeof this.#t.add!="function")){let i="cannot ignore child matches, ignore lacks add() method.";throw new Error(i)}this.maxDepth=n.maxDepth||1/0,n.signal&&(this.signal=n.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#r(e){return this.seen.has(e)||!!this.#t?.ignored?.(e)}#o(e){return!!this.#t?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,t){if(t&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||await e.realpath(),!n)return;e=n}let s=e.isUnknown()||this.opts.stat?await e.lstat():e;if(this.opts.follow&&this.opts.nodir&&s?.isSymbolicLink()){let o=await s.realpath();o&&(o.isUnknown()||this.opts.stat)&&await o.lstat()}return this.matchCheckTest(s,t)}matchCheckTest(e,t){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!t||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!e.isSymbolicLink()||!e.realpathCached()?.isDirectory())&&!this.#r(e)?e:void 0}matchCheckSync(e,t){if(t&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||e.realpathSync(),!n)return;e=n}let s=e.isUnknown()||this.opts.stat?e.lstatSync():e;if(this.opts.follow&&this.opts.nodir&&s?.isSymbolicLink()){let o=s.realpathSync();o&&(o?.isUnknown()||this.opts.stat)&&o.lstatSync()}return this.matchCheckTest(s,t)}matchFinish(e,t){if(this.#r(e))return;if(!this.includeChildMatches&&this.#t?.add){let s=`${e.relativePosix()}/**`;this.#t.add(s)}let n=this.opts.absolute===void 0?t:this.opts.absolute;this.seen.add(e);let i=this.opts.mark&&e.isDirectory()?this.#n:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(n){let s=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(s+i)}else{let s=this.opts.posix?e.relativePosix():e.relative(),o=this.opts.dotRelative&&!s.startsWith(".."+this.#n)?"."+this.#n:"";this.matchEmit(s?o+s+i:"."+i)}}async match(e,t,n){let i=await this.matchCheck(e,n);i&&this.matchFinish(i,t)}matchSync(e,t,n){let i=this.matchCheckSync(e,n);i&&this.matchFinish(i,t)}walkCB(e,t,n){this.signal?.aborted&&n(),this.walkCB2(e,t,new Dze.Processor(this.opts),n)}walkCB2(e,t,n,i){if(this.#o(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2(e,t,n,i));return}n.processPatterns(e,t);let s=1,o=()=>{--s===0&&i()};for(let[a,c,l]of n.matches.entries())this.#r(a)||(s++,this.match(a,c,l).then(()=>o()));for(let a of n.subwalkTargets()){if(this.maxDepth!==1/0&&a.depth()>=this.maxDepth)continue;s++;let c=a.readdirCached();a.calledReaddir()?this.walkCB3(a,c,n,o):a.readdirCB((l,u)=>this.walkCB3(a,u,n,o),!0)}o()}walkCB3(e,t,n,i){n=n.filterEntries(e,t);let s=1,o=()=>{--s===0&&i()};for(let[a,c,l]of n.matches.entries())this.#r(a)||(s++,this.match(a,c,l).then(()=>o()));for(let[a,c]of n.subwalks.entries())s++,this.walkCB2(a,c,n.child(),o);o()}walkCBSync(e,t,n){this.signal?.aborted&&n(),this.walkCB2Sync(e,t,new Dze.Processor(this.opts),n)}walkCB2Sync(e,t,n,i){if(this.#o(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2Sync(e,t,n,i));return}n.processPatterns(e,t);let s=1,o=()=>{--s===0&&i()};for(let[a,c,l]of n.matches.entries())this.#r(a)||this.matchSync(a,c,l);for(let a of n.subwalkTargets()){if(this.maxDepth!==1/0&&a.depth()>=this.maxDepth)continue;s++;let c=a.readdirSync();this.walkCB3Sync(a,c,n,o)}o()}walkCB3Sync(e,t,n,i){n=n.filterEntries(e,t);let s=1,o=()=>{--s===0&&i()};for(let[a,c,l]of n.matches.entries())this.#r(a)||this.matchSync(a,c,l);for(let[a,c]of n.subwalks.entries())s++,this.walkCB2Sync(a,c,n.child(),o);o()}};Vv.GlobUtil=AM;var Use=class extends AM{matches=new Set;constructor(e,t,n){super(e,t,n)}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,t)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?t(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}};Vv.GlobWalker=Use;var Bse=class extends AM{results;constructor(e,t,n){super(e,t,n),this.results=new dFt.Minipass({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};Vv.GlobStream=Bse});var $se=O(B2=>{"use strict";Object.defineProperty(B2,"__esModule",{value:!0});B2.Glob=void 0;var mFt=Bv(),hFt=require("node:url"),j2=Rze(),fFt=qse(),U2=Mze(),gFt=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Gse=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(e,t){if(!t)throw new TypeError("glob options required");if(this.withFileTypes=!!t.withFileTypes,this.signal=t.signal,this.follow=!!t.follow,this.dot=!!t.dot,this.dotRelative=!!t.dotRelative,this.nodir=!!t.nodir,this.mark=!!t.mark,t.cwd?(t.cwd instanceof URL||t.cwd.startsWith("file://"))&&(t.cwd=(0,hFt.fileURLToPath)(t.cwd)):this.cwd="",this.cwd=t.cwd||"",this.root=t.root,this.magicalBraces=!!t.magicalBraces,this.nobrace=!!t.nobrace,this.noext=!!t.noext,this.realpath=!!t.realpath,this.absolute=t.absolute,this.includeChildMatches=t.includeChildMatches!==!1,this.noglobstar=!!t.noglobstar,this.matchBase=!!t.matchBase,this.maxDepth=typeof t.maxDepth=="number"?t.maxDepth:1/0,this.stat=!!t.stat,this.ignore=t.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(c=>c.replace(/\\/g,"/"))),this.matchBase){if(t.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(c=>c.includes("/")?c:`./**/${c}`)}if(this.pattern=e,this.platform=t.platform||gFt,this.opts={...t,platform:this.platform},t.scurry){if(this.scurry=t.scurry,t.nocase!==void 0&&t.nocase!==t.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let c=t.platform==="win32"?j2.PathScurryWin32:t.platform==="darwin"?j2.PathScurryDarwin:t.platform?j2.PathScurryPosix:j2.PathScurry;this.scurry=new c(this.cwd,{nocase:t.nocase,fs:t.fs})}this.nocase=this.scurry.nocase;let n=this.platform==="darwin"||this.platform==="win32",i={...t,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:n,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},s=this.pattern.map(c=>new mFt.Minimatch(c,i)),[o,a]=s.reduce((c,l)=>(c[0].push(...l.set),c[1].push(...l.globParts),c),[[],[]]);this.patterns=o.map((c,l)=>{let u=a[l];if(!u)throw new Error("invalid pattern object");return new fFt.Pattern(c,u,0,this.platform)})}async walk(){return[...await new U2.GlobWalker(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new U2.GlobWalker(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new U2.GlobStream(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new U2.GlobStream(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};B2.Glob=Gse});var Vse=O(G2=>{"use strict";Object.defineProperty(G2,"__esModule",{value:!0});G2.hasMagic=void 0;var yFt=Bv(),vFt=(r,e={})=>{Array.isArray(r)||(r=[r]);for(let t of r)if(new yFt.Minimatch(t,e).hasMagic())return!0;return!1};G2.hasMagic=vFt});var zze=O(yi=>{"use strict";Object.defineProperty(yi,"__esModule",{value:!0});yi.glob=yi.sync=yi.iterate=yi.iterateSync=yi.stream=yi.streamSync=yi.Ignore=yi.hasMagic=yi.Glob=yi.unescape=yi.escape=void 0;yi.globStreamSync=NM;yi.globStream=Hse;yi.globSync=Wse;yi.globIterateSync=DM;yi.globIterate=Kse;var kze=Bv(),gC=$se(),bFt=Vse(),qze=Bv();Object.defineProperty(yi,"escape",{enumerable:!0,get:function(){return qze.escape}});Object.defineProperty(yi,"unescape",{enumerable:!0,get:function(){return qze.unescape}});var _Ft=$se();Object.defineProperty(yi,"Glob",{enumerable:!0,get:function(){return _Ft.Glob}});var SFt=Vse();Object.defineProperty(yi,"hasMagic",{enumerable:!0,get:function(){return SFt.hasMagic}});var CFt=Fse();Object.defineProperty(yi,"Ignore",{enumerable:!0,get:function(){return CFt.Ignore}});function NM(r,e={}){return new gC.Glob(r,e).streamSync()}function Hse(r,e={}){return new gC.Glob(r,e).stream()}function Wse(r,e={}){return new gC.Glob(r,e).walkSync()}async function Lze(r,e={}){return new gC.Glob(r,e).walk()}function DM(r,e={}){return new gC.Glob(r,e).iterateSync()}function Kse(r,e={}){return new gC.Glob(r,e).iterate()}yi.streamSync=NM;yi.stream=Object.assign(Hse,{sync:NM});yi.iterateSync=DM;yi.iterate=Object.assign(Kse,{sync:DM});yi.sync=Object.assign(Wse,{stream:NM,iterate:DM});yi.glob=Object.assign(Lze,{glob:Lze,globSync:Wse,sync:yi.sync,globStream:Hse,stream:yi.stream,globStreamSync:NM,streamSync:yi.streamSync,globIterate:Kse,iterate:yi.iterate,globIterateSync:DM,iterateSync:yi.iterateSync,Glob:gC.Glob,hasMagic:bFt.hasMagic,escape:kze.escape,unescape:kze.unescape});yi.glob.glob=yi.glob});var Qse=O(np=>{"use strict";Object.defineProperty(np,"__esModule",{value:!0});np.optArgSync=np.optArg=np.assertRimrafOptions=np.isRimrafOptions=void 0;var Hv=(r,e)=>typeof r>"u"||typeof r===e,PFt=r=>!!r&&typeof r=="object"&&Hv(r.preserveRoot,"boolean")&&Hv(r.tmp,"string")&&Hv(r.maxRetries,"number")&&Hv(r.retryDelay,"number")&&Hv(r.backoff,"number")&&Hv(r.maxBackoff,"number")&&(Hv(r.glob,"boolean")||r.glob&&typeof r.glob=="object")&&Hv(r.filter,"function");np.isRimrafOptions=PFt;var wFt=r=>{if(!(0,np.isRimrafOptions)(r))throw new Error("invalid rimraf options")};np.assertRimrafOptions=wFt;var Fze=r=>{(0,np.assertRimrafOptions)(r);let{glob:e,...t}=r;if(!e)return t;let n=e===!0?r.signal?{signal:r.signal}:{}:r.signal?{signal:r.signal,...e}:e;return{...t,glob:{...n,absolute:!0,withFileTypes:!1}}},EFt=(r={})=>Fze(r);np.optArg=EFt;var TFt=(r={})=>Fze(r);np.optArgSync=TFt});var MM=O(Yse=>{"use strict";Object.defineProperty(Yse,"__esModule",{value:!0});Yse.default=process.env.__TESTING_RIMRAF_PLATFORM__||process.platform});var jze=O(kM=>{"use strict";var IFt=kM&&kM.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(kM,"__esModule",{value:!0});var Xse=require("path"),RFt=require("util"),xFt=IFt(MM()),OFt=(r,e={})=>{let t=typeof r;if(t!=="string"){let i=r&&t==="object"&&r.constructor,o=`The "path" argument must be of type string. Received ${i&&i.name?`an instance of ${i.name}`:t==="object"?(0,RFt.inspect)(r):`type ${t} ${r}`}`;throw Object.assign(new TypeError(o),{path:r,code:"ERR_INVALID_ARG_TYPE"})}if(/\0/.test(r)){let i="path must be a string without null bytes";throw Object.assign(new TypeError(i),{path:r,code:"ERR_INVALID_ARG_VALUE"})}r=(0,Xse.resolve)(r);let{root:n}=(0,Xse.parse)(r);if(r===n&&e.preserveRoot!==!1){let i="refusing to remove root directory without preserveRoot:false";throw Object.assign(new Error(i),{path:r,code:"ERR_PRESERVE_ROOT"})}if(xFt.default==="win32"){let i=/[*|"<>?:]/,{root:s}=(0,Xse.parse)(r);if(i.test(r.substring(s.length)))throw Object.assign(new Error("Illegal characters in path."),{path:r,code:"EINVAL"})}return r};kM.default=OFt});var Kv=O(so=>{"use strict";var AFt=so&&so.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(so,"__esModule",{value:!0});so.promises=so.readdirSync=so.unlinkSync=so.lstatSync=so.statSync=so.rmSync=so.rmdirSync=so.renameSync=so.mkdirSync=so.chmodSync=void 0;var wg=AFt(require("fs")),Wv=require("fs");Object.defineProperty(so,"chmodSync",{enumerable:!0,get:function(){return Wv.chmodSync}});Object.defineProperty(so,"mkdirSync",{enumerable:!0,get:function(){return Wv.mkdirSync}});Object.defineProperty(so,"renameSync",{enumerable:!0,get:function(){return Wv.renameSync}});Object.defineProperty(so,"rmdirSync",{enumerable:!0,get:function(){return Wv.rmdirSync}});Object.defineProperty(so,"rmSync",{enumerable:!0,get:function(){return Wv.rmSync}});Object.defineProperty(so,"statSync",{enumerable:!0,get:function(){return Wv.statSync}});Object.defineProperty(so,"lstatSync",{enumerable:!0,get:function(){return Wv.lstatSync}});Object.defineProperty(so,"unlinkSync",{enumerable:!0,get:function(){return Wv.unlinkSync}});var NFt=require("fs"),DFt=r=>(0,NFt.readdirSync)(r,{withFileTypes:!0});so.readdirSync=DFt;var MFt=(r,e)=>new Promise((t,n)=>wg.default.chmod(r,e,(i,...s)=>i?n(i):t(...s))),kFt=(r,e)=>new Promise((t,n)=>wg.default.mkdir(r,e,(i,s)=>i?n(i):t(s))),LFt=r=>new Promise((e,t)=>wg.default.readdir(r,{withFileTypes:!0},(n,i)=>n?t(n):e(i))),qFt=(r,e)=>new Promise((t,n)=>wg.default.rename(r,e,(i,...s)=>i?n(i):t(...s))),zFt=(r,e)=>new Promise((t,n)=>wg.default.rm(r,e,(i,...s)=>i?n(i):t(...s))),FFt=r=>new Promise((e,t)=>wg.default.rmdir(r,(n,...i)=>n?t(n):e(...i))),jFt=r=>new Promise((e,t)=>wg.default.stat(r,(n,i)=>n?t(n):e(i))),UFt=r=>new Promise((e,t)=>wg.default.lstat(r,(n,i)=>n?t(n):e(i))),BFt=r=>new Promise((e,t)=>wg.default.unlink(r,(n,...i)=>n?t(n):e(...i)));so.promises={chmod:MFt,mkdir:kFt,readdir:LFt,rename:qFt,rm:zFt,rmdir:FFt,stat:jFt,lstat:UFt,unlink:BFt}});var $2=O(qT=>{"use strict";Object.defineProperty(qT,"__esModule",{value:!0});qT.readdirOrErrorSync=qT.readdirOrError=void 0;var Uze=Kv(),{readdir:GFt}=Uze.promises,$Ft=r=>GFt(r).catch(e=>e);qT.readdirOrError=$Ft;var VFt=r=>{try{return(0,Uze.readdirSync)(r)}catch(e){return e}};qT.readdirOrErrorSync=VFt});var V2=O(zT=>{"use strict";Object.defineProperty(zT,"__esModule",{value:!0});zT.ignoreENOENTSync=zT.ignoreENOENT=void 0;var HFt=async r=>r.catch(e=>{if(e.code!=="ENOENT")throw e});zT.ignoreENOENT=HFt;var WFt=r=>{try{return r()}catch(e){if(e?.code!=="ENOENT")throw e}};zT.ignoreENOENTSync=WFt});var Jse=O(FT=>{"use strict";Object.defineProperty(FT,"__esModule",{value:!0});FT.rimrafPosixSync=FT.rimrafPosix=void 0;var H2=Kv(),{lstat:KFt,rmdir:QFt,unlink:YFt}=H2.promises,W2=require("path"),Bze=$2(),K2=V2(),XFt=async(r,e)=>{if(e?.signal?.aborted)throw e.signal.reason;try{return await Gze(r,e,await KFt(r))}catch(t){if(t?.code==="ENOENT")return!0;throw t}};FT.rimrafPosix=XFt;var JFt=(r,e)=>{if(e?.signal?.aborted)throw e.signal.reason;try{return $ze(r,e,(0,H2.lstatSync)(r))}catch(t){if(t?.code==="ENOENT")return!0;throw t}};FT.rimrafPosixSync=JFt;var Gze=async(r,e,t)=>{if(e?.signal?.aborted)throw e.signal.reason;let n=t.isDirectory()?await(0,Bze.readdirOrError)(r):null;if(!Array.isArray(n)){if(n){if(n.code==="ENOENT")return!0;if(n.code!=="ENOTDIR")throw n}return e.filter&&!await e.filter(r,t)?!1:(await(0,K2.ignoreENOENT)(YFt(r)),!0)}return!(await Promise.all(n.map(s=>Gze((0,W2.resolve)(r,s.name),e,s)))).reduce((s,o)=>s&&o,!0)||e.preserveRoot===!1&&r===(0,W2.parse)(r).root||e.filter&&!await e.filter(r,t)?!1:(await(0,K2.ignoreENOENT)(QFt(r)),!0)},$ze=(r,e,t)=>{if(e?.signal?.aborted)throw e.signal.reason;let n=t.isDirectory()?(0,Bze.readdirOrErrorSync)(r):null;if(!Array.isArray(n)){if(n){if(n.code==="ENOENT")return!0;if(n.code!=="ENOTDIR")throw n}return e.filter&&!e.filter(r,t)?!1:((0,K2.ignoreENOENTSync)(()=>(0,H2.unlinkSync)(r)),!0)}let i=!0;for(let s of n){let o=(0,W2.resolve)(r,s.name);i=$ze(o,e,s)&&i}return e.preserveRoot===!1&&r===(0,W2.parse)(r).root||!i||e.filter&&!e.filter(r,t)?!1:((0,K2.ignoreENOENTSync)(()=>(0,H2.rmdirSync)(r)),!0)}});var Hze=O(jT=>{"use strict";Object.defineProperty(jT,"__esModule",{value:!0});jT.fixEPERMSync=jT.fixEPERM=void 0;var Vze=Kv(),{chmod:ZFt}=Vze.promises,ejt=r=>async e=>{try{return await r(e)}catch(t){let n=t;if(n?.code==="ENOENT")return;if(n?.code==="EPERM"){try{await ZFt(e,438)}catch(i){if(i?.code==="ENOENT")return;throw t}return await r(e)}throw t}};jT.fixEPERM=ejt;var tjt=r=>e=>{try{return r(e)}catch(t){let n=t;if(n?.code==="ENOENT")return;if(n?.code==="EPERM"){try{(0,Vze.chmodSync)(e,438)}catch(i){if(i?.code==="ENOENT")return;throw t}return r(e)}throw t}};jT.fixEPERMSync=tjt});var Wze=O(_a=>{"use strict";Object.defineProperty(_a,"__esModule",{value:!0});_a.retryBusySync=_a.retryBusy=_a.codes=_a.MAXRETRIES=_a.RATE=_a.MAXBACKOFF=void 0;_a.MAXBACKOFF=200;_a.RATE=1.2;_a.MAXRETRIES=10;_a.codes=new Set(["EMFILE","ENFILE","EBUSY"]);var rjt=r=>{let e=async(t,n,i=1,s=0)=>{let o=n.maxBackoff||_a.MAXBACKOFF,a=n.backoff||_a.RATE,c=n.maxRetries||_a.MAXRETRIES,l=0;for(;;)try{return await r(t)}catch(u){let d=u;if(d?.path===t&&d?.code&&_a.codes.has(d.code)){if(i=Math.ceil(i*a),s=i+s,s<o)return new Promise((p,m)=>{setTimeout(()=>{e(t,n,i,s).then(p,m)},i)});if(l<c){l++;continue}}throw u}};return e};_a.retryBusy=rjt;var njt=r=>(t,n)=>{let i=n.maxRetries||_a.MAXRETRIES,s=0;for(;;)try{return r(t)}catch(o){let a=o;if(a?.path===t&&a?.code&&_a.codes.has(a.code)&&s<i){s++;continue}throw o}};_a.retryBusySync=njt});var Yze=O(Qv=>{"use strict";var ijt=Qv&&Qv.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Qv,"__esModule",{value:!0});Qv.defaultTmpSync=Qv.defaultTmp=void 0;var Q2=require("os"),UT=require("path"),Kze=Kv(),Qze=ijt(MM()),{stat:sjt}=Kze.promises,ojt=r=>{try{return(0,Kze.statSync)(r).isDirectory()}catch{return!1}},ajt=r=>sjt(r).then(e=>e.isDirectory(),()=>!1),cjt=async r=>{let{root:e}=(0,UT.parse)(r),t=(0,Q2.tmpdir)(),{root:n}=(0,UT.parse)(t);if(e.toLowerCase()===n.toLowerCase())return t;let i=(0,UT.resolve)(e,"/temp");return await ajt(i)?i:e},ljt=r=>{let{root:e}=(0,UT.parse)(r),t=(0,Q2.tmpdir)(),{root:n}=(0,UT.parse)(t);if(e.toLowerCase()===n.toLowerCase())return t;let i=(0,UT.resolve)(e,"/temp");return ojt(i)?i:e},ujt=async()=>(0,Q2.tmpdir)(),djt=()=>(0,Q2.tmpdir)();Qv.defaultTmp=Qze.default==="win32"?cjt:ujt;Qv.defaultTmpSync=Qze.default==="win32"?ljt:djt});var toe=O(GT=>{"use strict";Object.defineProperty(GT,"__esModule",{value:!0});GT.rimrafMoveRemoveSync=GT.rimrafMoveRemove=void 0;var Eg=require("path"),e1e=Yze(),Y2=V2(),BT=Kv(),{lstat:pjt,rename:mjt,unlink:Xze,rmdir:hjt,chmod:fjt}=BT.promises,t1e=$2(),r1e=r=>`.${(0,Eg.basename)(r)}.${Math.random()}`,gjt=async r=>Xze(r).catch(e=>{if(e.code==="EPERM")return fjt(r,438).then(()=>Xze(r),t=>{if(t.code!=="ENOENT")throw e});if(e.code==="ENOENT")return;throw e}),yjt=r=>{try{(0,BT.unlinkSync)(r)}catch(e){if(e?.code==="EPERM")try{return(0,BT.chmodSync)(r,438)}catch(t){if(t?.code==="ENOENT")return;throw e}else if(e?.code==="ENOENT")return;throw e}},vjt=async(r,e)=>{if(e?.signal?.aborted)throw e.signal.reason;try{return await Zse(r,e,await pjt(r))}catch(t){if(t?.code==="ENOENT")return!0;throw t}};GT.rimrafMoveRemove=vjt;var Zse=async(r,e,t)=>{if(e?.signal?.aborted)throw e.signal.reason;if(!e.tmp)return Zse(r,{...e,tmp:await(0,e1e.defaultTmp)(r)},t);if(r===e.tmp&&(0,Eg.parse)(r).root!==r)throw new Error("cannot delete temp directory used for deletion");let n=t.isDirectory()?await(0,t1e.readdirOrError)(r):null;if(!Array.isArray(n)){if(n){if(n.code==="ENOENT")return!0;if(n.code!=="ENOTDIR")throw n}return e.filter&&!await e.filter(r,t)?!1:(await(0,Y2.ignoreENOENT)(Jze(r,e.tmp,gjt)),!0)}return!(await Promise.all(n.map(s=>Zse((0,Eg.resolve)(r,s.name),e,s)))).reduce((s,o)=>s&&o,!0)||e.preserveRoot===!1&&r===(0,Eg.parse)(r).root||e.filter&&!await e.filter(r,t)?!1:(await(0,Y2.ignoreENOENT)(Jze(r,e.tmp,hjt)),!0)},Jze=async(r,e,t)=>{let n=(0,Eg.resolve)(e,r1e(r));return await mjt(r,n),await t(n)},bjt=(r,e)=>{if(e?.signal?.aborted)throw e.signal.reason;try{return eoe(r,e,(0,BT.lstatSync)(r))}catch(t){if(t?.code==="ENOENT")return!0;throw t}};GT.rimrafMoveRemoveSync=bjt;var eoe=(r,e,t)=>{if(e?.signal?.aborted)throw e.signal.reason;if(!e.tmp)return eoe(r,{...e,tmp:(0,e1e.defaultTmpSync)(r)},t);let n=e.tmp;if(r===e.tmp&&(0,Eg.parse)(r).root!==r)throw new Error("cannot delete temp directory used for deletion");let i=t.isDirectory()?(0,t1e.readdirOrErrorSync)(r):null;if(!Array.isArray(i)){if(i){if(i.code==="ENOENT")return!0;if(i.code!=="ENOTDIR")throw i}return e.filter&&!e.filter(r,t)?!1:((0,Y2.ignoreENOENTSync)(()=>Zze(r,n,yjt)),!0)}let s=!0;for(let o of i){let a=(0,Eg.resolve)(r,o.name);s=eoe(a,e,o)&&s}return!s||e.preserveRoot===!1&&r===(0,Eg.parse)(r).root||e.filter&&!e.filter(r,t)?!1:((0,Y2.ignoreENOENTSync)(()=>Zze(r,n,BT.rmdirSync)),!0)},Zze=(r,e,t)=>{let n=(0,Eg.resolve)(e,r1e(r));return(0,BT.renameSync)(r,n),t(n)}});var ioe=O($T=>{"use strict";Object.defineProperty($T,"__esModule",{value:!0});$T.rimrafWindowsSync=$T.rimrafWindows=void 0;var X2=require("path"),e$=Hze(),t$=Kv(),J2=V2(),n1e=$2(),r$=Wze(),i1e=toe(),{unlink:_jt,rmdir:Sjt,lstat:Cjt}=t$.promises,Pjt=(0,r$.retryBusy)((0,e$.fixEPERM)(_jt)),wjt=(0,r$.retryBusySync)((0,e$.fixEPERMSync)(t$.unlinkSync)),Ejt=(0,r$.retryBusy)((0,e$.fixEPERM)(Sjt)),Tjt=(0,r$.retryBusySync)((0,e$.fixEPERMSync)(t$.rmdirSync)),Ijt=async(r,e)=>{if(e?.signal?.aborted)throw e.signal.reason;let{filter:t,...n}=e;try{return await Ejt(r,n)}catch(i){if(i?.code==="ENOTEMPTY")return await(0,i1e.rimrafMoveRemove)(r,n);throw i}},Rjt=(r,e)=>{if(e?.signal?.aborted)throw e.signal.reason;let{filter:t,...n}=e;try{return Tjt(r,n)}catch(i){if(i?.code==="ENOTEMPTY")return(0,i1e.rimrafMoveRemoveSync)(r,n);throw i}},Yv=Symbol("start"),s1e=Symbol("child"),Z2=Symbol("finish"),xjt=async(r,e)=>{if(e?.signal?.aborted)throw e.signal.reason;try{return await roe(r,e,await Cjt(r),Yv)}catch(t){if(t?.code==="ENOENT")return!0;throw t}};$T.rimrafWindows=xjt;var Ojt=(r,e)=>{if(e?.signal?.aborted)throw e.signal.reason;try{return noe(r,e,(0,t$.lstatSync)(r),Yv)}catch(t){if(t?.code==="ENOENT")return!0;throw t}};$T.rimrafWindowsSync=Ojt;var roe=async(r,e,t,n=Yv)=>{if(e?.signal?.aborted)throw e.signal.reason;let i=t.isDirectory()?await(0,n1e.readdirOrError)(r):null;if(!Array.isArray(i)){if(i){if(i.code==="ENOENT")return!0;if(i.code!=="ENOTDIR")throw i}return e.filter&&!await e.filter(r,t)?!1:(await(0,J2.ignoreENOENT)(Pjt(r,e)),!0)}let s=n===Yv?s1e:n,o=(await Promise.all(i.map(a=>roe((0,X2.resolve)(r,a.name),e,a,s)))).reduce((a,c)=>a&&c,!0);if(n===Yv)return roe(r,e,t,Z2);if(n===Z2){if(e.preserveRoot===!1&&r===(0,X2.parse)(r).root||!o||e.filter&&!await e.filter(r,t))return!1;await(0,J2.ignoreENOENT)(Ijt(r,e))}return!0},noe=(r,e,t,n=Yv)=>{let i=t.isDirectory()?(0,n1e.readdirOrErrorSync)(r):null;if(!Array.isArray(i)){if(i){if(i.code==="ENOENT")return!0;if(i.code!=="ENOTDIR")throw i}return e.filter&&!e.filter(r,t)?!1:((0,J2.ignoreENOENTSync)(()=>wjt(r,e)),!0)}let s=!0;for(let o of i){let a=n===Yv?s1e:n,c=(0,X2.resolve)(r,o.name);s=noe(c,e,o,a)&&s}if(n===Yv)return noe(r,e,t,Z2);if(n===Z2){if(e.preserveRoot===!1&&r===(0,X2.parse)(r).root||!s||e.filter&&!e.filter(r,t))return!1;(0,J2.ignoreENOENTSync)(()=>{Rjt(r,e)})}return!0}});var l1e=O(Xv=>{"use strict";var Ajt=Xv&&Xv.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Xv,"__esModule",{value:!0});Xv.rimrafManualSync=Xv.rimrafManual=void 0;var o1e=Ajt(MM()),a1e=Jse(),c1e=ioe();Xv.rimrafManual=o1e.default==="win32"?c1e.rimrafWindows:a1e.rimrafPosix;Xv.rimrafManualSync=o1e.default==="win32"?c1e.rimrafWindowsSync:a1e.rimrafPosixSync});var d1e=O(VT=>{"use strict";Object.defineProperty(VT,"__esModule",{value:!0});VT.rimrafNativeSync=VT.rimrafNative=void 0;var u1e=Kv(),{rm:Njt}=u1e.promises,Djt=async(r,e)=>(await Njt(r,{...e,force:!0,recursive:!0}),!0);VT.rimrafNative=Djt;var Mjt=(r,e)=>((0,u1e.rmSync)(r,{...e,force:!0,recursive:!0}),!0);VT.rimrafNativeSync=Mjt});var f1e=O(Jv=>{"use strict";var kjt=Jv&&Jv.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Jv,"__esModule",{value:!0});Jv.useNativeSync=Jv.useNative=void 0;var m1e=kjt(MM()),Ljt=process.env.__TESTING_RIMRAF_NODE_VERSION__||process.version,qjt=Ljt.replace(/^v/,"").split("."),[p1e=0,zjt=0]=qjt.map(r=>parseInt(r,10)),h1e=p1e>14||p1e===14&&zjt>=14;Jv.useNative=!h1e||m1e.default==="win32"?()=>!1:r=>!r?.signal&&!r?.filter;Jv.useNativeSync=!h1e||m1e.default==="win32"?()=>!1:r=>!r?.signal&&!r?.filter});var w1e=O(ln=>{"use strict";var Fjt=ln&&ln.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ln,"__esModule",{value:!0});ln.rimraf=ln.sync=ln.rimrafSync=ln.moveRemove=ln.moveRemoveSync=ln.posix=ln.posixSync=ln.windows=ln.windowsSync=ln.manual=ln.manualSync=ln.native=ln.nativeSync=ln.isRimrafOptions=ln.assertRimrafOptions=void 0;var y1e=zze(),v1e=Qse(),n$=Fjt(jze()),i$=l1e(),b1e=toe(),s$=d1e(),_1e=Jse(),S1e=ioe(),C1e=f1e(),P1e=Qse();Object.defineProperty(ln,"assertRimrafOptions",{enumerable:!0,get:function(){return P1e.assertRimrafOptions}});Object.defineProperty(ln,"isRimrafOptions",{enumerable:!0,get:function(){return P1e.isRimrafOptions}});var HT=r=>async(e,t)=>{let n=(0,v1e.optArg)(t);return n.glob&&(e=await(0,y1e.glob)(e,n.glob)),Array.isArray(e)?!!(await Promise.all(e.map(i=>r((0,n$.default)(i,n),n)))).reduce((i,s)=>i&&s,!0):!!await r((0,n$.default)(e,n),n)},WT=r=>(e,t)=>{let n=(0,v1e.optArgSync)(t);return n.glob&&(e=(0,y1e.globSync)(e,n.glob)),Array.isArray(e)?!!e.map(i=>r((0,n$.default)(i,n),n)).reduce((i,s)=>i&&s,!0):!!r((0,n$.default)(e,n),n)};ln.nativeSync=WT(s$.rimrafNativeSync);ln.native=Object.assign(HT(s$.rimrafNative),{sync:ln.nativeSync});ln.manualSync=WT(i$.rimrafManualSync);ln.manual=Object.assign(HT(i$.rimrafManual),{sync:ln.manualSync});ln.windowsSync=WT(S1e.rimrafWindowsSync);ln.windows=Object.assign(HT(S1e.rimrafWindows),{sync:ln.windowsSync});ln.posixSync=WT(_1e.rimrafPosixSync);ln.posix=Object.assign(HT(_1e.rimrafPosix),{sync:ln.posixSync});ln.moveRemoveSync=WT(b1e.rimrafMoveRemoveSync);ln.moveRemove=Object.assign(HT(b1e.rimrafMoveRemove),{sync:ln.moveRemoveSync});ln.rimrafSync=WT((r,e)=>(0,C1e.useNativeSync)(e)?(0,s$.rimrafNativeSync)(r,e):(0,i$.rimrafManualSync)(r,e));ln.sync=ln.rimrafSync;var g1e=HT((r,e)=>(0,C1e.useNative)(e)?(0,s$.rimrafNative)(r,e):(0,i$.rimrafManual)(r,e));ln.rimraf=Object.assign(g1e,{rimraf:g1e,sync:ln.rimrafSync,rimrafSync:ln.rimrafSync,manual:ln.manual,manualSync:ln.manualSync,native:ln.native,nativeSync:ln.nativeSync,posix:ln.posix,posixSync:ln.posixSync,windows:ln.windows,windowsSync:ln.windowsSync,moveRemove:ln.moveRemove,moveRemoveSync:ln.moveRemoveSync});ln.rimraf.rimraf=ln.rimraf});var N1e=O((Xwr,A1e)=>{var jjt=require("fs"),Ujt=require("path"),Bjt=w1e();function R1e(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}var aoe,soe,KT=R1e(jjt),o$=R1e(Ujt);function coe(){return coe=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},coe.apply(null,arguments)}function E1e(r,e){if(!aoe)return!1;var t=KT.default.statSync(r).mtime.getTime();return aoe>t+1e3*e}function x1e(r){return r===void 0&&(r={}),r.totalRemoved!==void 0?r.totalRemoved:-2}function ooe(r){return r===void 0&&(r={}),x1e(r)>=function(e){return e===void 0&&(e={}),e.limit!==void 0?e.limit:-1}(r)}function T1e(r){return r===void 0&&(r={}),r.maxLevel!==void 0?r.maxLevel:-1}function I1e(r){var e;return r===void 0&&(r={}),r.age&&(e=r.age.seconds)!=null?e:null}var O1e=function(r,e,t){e===void 0&&(e={});var n={};if(ooe(e))return n;var i=!1,s=KT.default.existsSync(r),o=function(c){try{return KT.default.lstatSync(c),!0}catch{return!1}}(r);if(s&&!o)i=!0;else if(s){var a=T1e(e);e.limit!==void 0&&(e.totalRemoved=e.totalRemoved!==void 0?x1e(e):0),t===void 0?t=0:t++,t<1?(aoe=new Date().getTime(),soe=e.test):i=function(c,l,u){u===void 0&&(u={});var d=!1,p=u.dir;if(p){var m=I1e(u),f=o$.default.basename(c);Array.isArray(p)?d=p.indexOf("*")!==-1||p.indexOf(f)!==-1:(u.regex&&f.match(new RegExp(p))||f===p||p==="*")&&(d=!0),d&&u.limit!==void 0&&(d=!ooe(u)),d&&u.maxLevel!==void 0&&l>0&&(d=l<=T1e(u)),m&&d&&(d=E1e(c,m))}return d}(r,t,e),(a===-1||t<a)&&KT.default.readdirSync(r).forEach(function(c){var l,u,d=o$.default.join(r,c),p=!1;try{u=KT.default.statSync(d)}catch{p=!0}if(!p){if((l=u)!=null&&l.isDirectory()){var m=O1e(d,e,t);n=coe({},n,m),e.totalRemoved!==void 0&&(e.totalRemoved+=Object.keys(m).length)}else if(function(y,v){var _;v===void 0&&(v={});var C=!1,P=v.extensions?v.extensions:null,w=v.files?v.files:null,R=v.prefix?v.prefix:null,I=(_=v.ignore)!=null?_:null,z=o$.default.basename(y);if(w&&(C=Array.isArray(w)?w.indexOf("*.*")!==-1||w.indexOf(z)!==-1:!!(v.regex&&z.match(new RegExp(w))||w==="*.*")||z===w),!C&&P){var G=o$.default.extname(y);C=Array.isArray(P)?P.indexOf(G)!==-1:G===P}if(!C&&R&&(C=z.indexOf(R)===0),C&&v.limit!==void 0&&(C=!ooe(v)),C&&I&&(C=Array.isArray(I)?I.indexOf(z)===-1:z!==I),C){var L=I1e(v);L&&(C=E1e(y,L))}return C}(d,e)){var f;if(soe)f=!0;else try{KT.default.unlinkSync(d),f=!0}catch{}f&&(n[d]=!0,e.totalRemoved!==void 0&&e.totalRemoved++)}}})}return i&&(soe||Bjt.rimrafSync(r),e.totalRemoved===void 0&&(n[r]=!0)),n};A1e.exports=O1e});var sFe=O((aEr,Rg)=>{var Ps=require("fs"),f$=require("os"),tc=require("path"),B1e=require("crypto"),Hh={fs:Ps.constants,os:f$.constants},G1e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",W1e=/XXXXXX/,Jjt=3,K1e=(Hh.O_CREAT||Hh.fs.O_CREAT)|(Hh.O_EXCL||Hh.fs.O_EXCL)|(Hh.O_RDWR||Hh.fs.O_RDWR),Zjt=f$.platform()==="win32",eUt=Hh.EBADF||Hh.os.errno.EBADF,tUt=Hh.ENOENT||Hh.os.errno.ENOENT,Q1e=448,Y1e=384,rUt="exit",XT=[],X1e=Ps.rmdirSync.bind(Ps),J1e=!1;function nUt(r,e){return Ps.rm(r,{recursive:!0},e)}function Z1e(r){return Ps.rmSync(r,{recursive:!0})}function _oe(r,e){let t=JT(r,e),n=t[0],i=t[1];mUt(n,function(s,o){if(s)return i(s);let a=o.tries;(function c(){try{let l=tFe(o);Ps.stat(l,function(u){if(!u)return a-- >0?c():i(new Error("Could not get a unique tmp filename, max tries reached "+l));i(null,l)})}catch(l){i(l)}})()})}function Soe(r){let e=JT(r),t=e[0],n=hUt(t),i=n.tries;do{let s=tFe(n);try{Ps.statSync(s)}catch{return s}}while(i-- >0);throw new Error("Could not get a unique tmp filename, max tries reached")}function iUt(r,e){let t=JT(r,e),n=t[0],i=t[1];_oe(n,function(o,a){if(o)return i(o);Ps.open(a,K1e,n.mode||Y1e,function(l,u){if(l)return i(l);if(n.discardDescriptor)return Ps.close(u,function(p){return i(p,a,void 0,voe(a,-1,n,!1))});{let d=n.discardDescriptor||n.detachDescriptor;i(null,a,u,voe(a,d?-1:u,n,!1))}})})}function sUt(r){let e=JT(r),t=e[0],n=t.discardDescriptor||t.detachDescriptor,i=Soe(t),s=Ps.openSync(i,K1e,t.mode||Y1e);return t.discardDescriptor&&(Ps.closeSync(s),s=void 0),{name:i,fd:s,removeCallback:voe(i,n?-1:s,t,!0)}}function oUt(r,e){let t=JT(r,e),n=t[0],i=t[1];_oe(n,function(o,a){if(o)return i(o);Ps.mkdir(a,n.mode||Q1e,function(l){if(l)return i(l);i(null,a,eFe(a,n,!1))})})}function aUt(r){let e=JT(r),t=e[0],n=Soe(t);return Ps.mkdirSync(n,t.mode||Q1e),{name:n,removeCallback:eFe(n,t,!0)}}function cUt(r,e){let t=function(n){if(n&&!boe(n))return e(n);e()};0<=r[0]?Ps.close(r[0],function(){Ps.unlink(r[1],t)}):Ps.unlink(r[1],t)}function lUt(r){let e=null;try{0<=r[0]&&Ps.closeSync(r[0])}catch(t){if(!fUt(t)&&!boe(t))throw t}finally{try{Ps.unlinkSync(r[1])}catch(t){boe(t)||(e=t)}}if(e!==null)throw e}function voe(r,e,t,n){let i=h$(lUt,[e,r],n),s=h$(cUt,[e,r],n,i);return t.keep||XT.unshift(i),n?i:s}function eFe(r,e,t){let n=e.unsafeCleanup?nUt:Ps.rmdir.bind(Ps),i=e.unsafeCleanup?Z1e:X1e,s=h$(i,r,t),o=h$(n,r,t,s);return e.keep||XT.unshift(s),t?s:o}function h$(r,e,t,n){let i=!1;return function s(o){if(!i){let a=n||s,c=XT.indexOf(a);return c>=0&&XT.splice(c,1),i=!0,t||r===X1e||r===Z1e?r(e):r(e,o||function(){})}}}function uUt(){if(J1e)for(;XT.length;)try{XT[0]()}catch{}}function $1e(r){let e=[],t=null;try{t=B1e.randomBytes(r)}catch{t=B1e.pseudoRandomBytes(r)}for(let n=0;n<r;n++)e.push(G1e[t[n]%G1e.length]);return e.join("")}function rd(r){return typeof r>"u"}function JT(r,e){if(typeof r=="function")return[{},r];if(rd(r))return[{},e];let t={};for(let n of Object.getOwnPropertyNames(r))t[n]=r[n];return[t,e]}function dUt(r,e,t){let n=tc.isAbsolute(r)?r:tc.join(e,r);Ps.stat(n,function(i){i?Ps.realpath(tc.dirname(n),function(s,o){if(s)return t(s);t(null,tc.join(o,tc.basename(n)))}):Ps.realpath(tc,t)})}function pUt(r,e){let t=tc.isAbsolute(r)?r:tc.join(e,r);try{return Ps.statSync(t),Ps.realpathSync(t)}catch{let i=Ps.realpathSync(tc.dirname(t));return tc.join(i,tc.basename(t))}}function tFe(r){let e=r.tmpdir;if(!rd(r.name))return tc.join(e,r.dir,r.name);if(!rd(r.template))return tc.join(e,r.dir,r.template).replace(W1e,$1e(6));let t=[r.prefix?r.prefix:"tmp","-",process.pid,"-",$1e(12),r.postfix?"-"+r.postfix:""].join("");return tc.join(e,r.dir,t)}function rFe(r){if(!rd(r.name)){let e=r.name;if(tc.isAbsolute(e))throw new Error(`name option must not contain an absolute path, found "${e}".`);let t=tc.basename(e);if(t===".."||t==="."||t!==e)throw new Error(`name option must not contain a path, found "${e}".`)}if(!rd(r.template)&&!r.template.match(W1e))throw new Error(`Invalid template, found "${r.template}".`);if(!rd(r.tries)&&isNaN(r.tries)||r.tries<0)throw new Error(`Invalid tries, found "${r.tries}".`);r.tries=rd(r.name)?r.tries||Jjt:1,r.keep=!!r.keep,r.detachDescriptor=!!r.detachDescriptor,r.discardDescriptor=!!r.discardDescriptor,r.unsafeCleanup=!!r.unsafeCleanup,r.prefix=rd(r.prefix)?"":r.prefix,r.postfix=rd(r.postfix)?"":r.postfix}function V1e(r,e,t,n){if(rd(e))return n(null);dUt(e,t,function(i,s){if(i)return n(i);let o=tc.relative(t,s);if(!s.startsWith(t))return n(new Error(`${r} option must be relative to "${t}", found "${o}".`));n(null,o)})}function H1e(r,e,t){if(rd(e))return;let n=pUt(e,t),i=tc.relative(t,n);if(!n.startsWith(t))throw new Error(`${r} option must be relative to "${t}", found "${i}".`);return i}function mUt(r,e){yUt(r,function(t,n){if(t)return e(t);r.tmpdir=n;try{rFe(r,n)}catch(i){return e(i)}V1e("dir",r.dir,n,function(i,s){if(i)return e(i);r.dir=rd(s)?"":s,V1e("template",r.template,n,function(o,a){if(o)return e(o);r.template=a,e(null,r)})})})}function hUt(r){let e=r.tmpdir=iFe(r);rFe(r,e);let t=H1e("dir",r.dir,e);return r.dir=rd(t)?"":t,r.template=H1e("template",r.template,e),r}function fUt(r){return nFe(r,-eUt,"EBADF")}function boe(r){return nFe(r,-tUt,"ENOENT")}function nFe(r,e,t){return Zjt?r.code===t:r.code===t&&r.errno===e}function gUt(){J1e=!0}function yUt(r,e){return Ps.realpath(r&&r.tmpdir||f$.tmpdir(),e)}function iFe(r){return Ps.realpathSync(r&&r.tmpdir||f$.tmpdir())}process.addListener(rUt,uUt);Object.defineProperty(Rg.exports,"tmpdir",{enumerable:!0,configurable:!1,get:function(){return iFe()}});Rg.exports.dir=oUt;Rg.exports.dirSync=aUt;Rg.exports.file=iUt;Rg.exports.fileSync=sUt;Rg.exports.tmpName=_oe;Rg.exports.tmpNameSync=Soe;Rg.exports.setGracefulCleanup=gUt});var PFe=O((ti,CFe)=>{ti=CFe.exports=ms;var rs;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?rs=function(){var r=Array.prototype.slice.call(arguments,0);r.unshift("SEMVER"),console.log.apply(console,r)}:rs=function(){};ti.SEMVER_SPEC_VERSION="2.0.0";var Coe=256,g$=Number.MAX_SAFE_INTEGER||9007199254740991,qs=ti.re=[],nr=ti.src=[],Pi=0,ZT=Pi++;nr[ZT]="0|[1-9]\\d*";var e0=Pi++;nr[e0]="[0-9]+";var Toe=Pi++;nr[Toe]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var aFe=Pi++;nr[aFe]="("+nr[ZT]+")\\.("+nr[ZT]+")\\.("+nr[ZT]+")";var cFe=Pi++;nr[cFe]="("+nr[e0]+")\\.("+nr[e0]+")\\.("+nr[e0]+")";var Poe=Pi++;nr[Poe]="(?:"+nr[ZT]+"|"+nr[Toe]+")";var woe=Pi++;nr[woe]="(?:"+nr[e0]+"|"+nr[Toe]+")";var Ioe=Pi++;nr[Ioe]="(?:-("+nr[Poe]+"(?:\\."+nr[Poe]+")*))";var Roe=Pi++;nr[Roe]="(?:-?("+nr[woe]+"(?:\\."+nr[woe]+")*))";var Eoe=Pi++;nr[Eoe]="[0-9A-Za-z-]+";var GM=Pi++;nr[GM]="(?:\\+("+nr[Eoe]+"(?:\\."+nr[Eoe]+")*))";var xoe=Pi++,lFe="v?"+nr[aFe]+nr[Ioe]+"?"+nr[GM]+"?";nr[xoe]="^"+lFe+"$";var Ooe="[v=\\s]*"+nr[cFe]+nr[Roe]+"?"+nr[GM]+"?",Aoe=Pi++;nr[Aoe]="^"+Ooe+"$";var n0=Pi++;nr[n0]="((?:<|>)?=?)";var y$=Pi++;nr[y$]=nr[e0]+"|x|X|\\*";var v$=Pi++;nr[v$]=nr[ZT]+"|x|X|\\*";var _C=Pi++;nr[_C]="[v=\\s]*("+nr[v$]+")(?:\\.("+nr[v$]+")(?:\\.("+nr[v$]+")(?:"+nr[Ioe]+")?"+nr[GM]+"?)?)?";var r0=Pi++;nr[r0]="[v=\\s]*("+nr[y$]+")(?:\\.("+nr[y$]+")(?:\\.("+nr[y$]+")(?:"+nr[Roe]+")?"+nr[GM]+"?)?)?";var uFe=Pi++;nr[uFe]="^"+nr[n0]+"\\s*"+nr[_C]+"$";var dFe=Pi++;nr[dFe]="^"+nr[n0]+"\\s*"+nr[r0]+"$";var P$=Pi++;nr[P$]="(?:~>?)";var b$=Pi++;nr[b$]="(\\s*)"+nr[P$]+"\\s+";qs[b$]=new RegExp(nr[b$],"g");var vUt="$1~",pFe=Pi++;nr[pFe]="^"+nr[P$]+nr[_C]+"$";var mFe=Pi++;nr[mFe]="^"+nr[P$]+nr[r0]+"$";var w$=Pi++;nr[w$]="(?:\\^)";var _$=Pi++;nr[_$]="(\\s*)"+nr[w$]+"\\s+";qs[_$]=new RegExp(nr[_$],"g");var bUt="$1^",hFe=Pi++;nr[hFe]="^"+nr[w$]+nr[_C]+"$";var fFe=Pi++;nr[fFe]="^"+nr[w$]+nr[r0]+"$";var Noe=Pi++;nr[Noe]="^"+nr[n0]+"\\s*("+Ooe+")$|^$";var Doe=Pi++;nr[Doe]="^"+nr[n0]+"\\s*("+lFe+")$|^$";var UM=Pi++;nr[UM]="(\\s*)"+nr[n0]+"\\s*("+Ooe+"|"+nr[_C]+")";qs[UM]=new RegExp(nr[UM],"g");var _Ut="$1$2$3",gFe=Pi++;nr[gFe]="^\\s*("+nr[_C]+")\\s+-\\s+("+nr[_C]+")\\s*$";var yFe=Pi++;nr[yFe]="^\\s*("+nr[r0]+")\\s+-\\s+("+nr[r0]+")\\s*$";var vFe=Pi++;nr[vFe]="(<|>)?=?\\s*\\*";for(Zv=0;Zv<Pi;Zv++)rs(Zv,nr[Zv]),qs[Zv]||(qs[Zv]=new RegExp(nr[Zv]));var Zv;ti.parse=BM;function BM(r,e){if(r instanceof ms)return r;if(typeof r!="string"||r.length>Coe)return null;var t=e?qs[Aoe]:qs[xoe];if(!t.test(r))return null;try{return new ms(r,e)}catch{return null}}ti.valid=SUt;function SUt(r,e){var t=BM(r,e);return t?t.version:null}ti.clean=CUt;function CUt(r,e){var t=BM(r.trim().replace(/^[=v]+/,""),e);return t?t.version:null}ti.SemVer=ms;function ms(r,e){if(r instanceof ms){if(r.loose===e)return r;r=r.version}else if(typeof r!="string")throw new TypeError("Invalid Version: "+r);if(r.length>Coe)throw new TypeError("version is longer than "+Coe+" characters");if(!(this instanceof ms))return new ms(r,e);rs("SemVer",r,e),this.loose=e;var t=r.trim().match(e?qs[Aoe]:qs[xoe]);if(!t)throw new TypeError("Invalid Version: "+r);if(this.raw=r,this.major=+t[1],this.minor=+t[2],this.patch=+t[3],this.major>g$||this.major<0)throw new TypeError("Invalid major version");if(this.minor>g$||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>g$||this.patch<0)throw new TypeError("Invalid patch version");t[4]?this.prerelease=t[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var i=+n;if(i>=0&&i<g$)return i}return n}):this.prerelease=[],this.build=t[5]?t[5].split("."):[],this.format()}ms.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};ms.prototype.inspect=function(){return'<SemVer "'+this+'">'};ms.prototype.toString=function(){return this.version};ms.prototype.compare=function(r){return rs("SemVer.compare",this.version,this.loose,r),r instanceof ms||(r=new ms(r,this.loose)),this.compareMain(r)||this.comparePre(r)};ms.prototype.compareMain=function(r){return r instanceof ms||(r=new ms(r,this.loose)),t0(this.major,r.major)||t0(this.minor,r.minor)||t0(this.patch,r.patch)};ms.prototype.comparePre=function(r){if(r instanceof ms||(r=new ms(r,this.loose)),this.prerelease.length&&!r.prerelease.length)return-1;if(!this.prerelease.length&&r.prerelease.length)return 1;if(!this.prerelease.length&&!r.prerelease.length)return 0;var e=0;do{var t=this.prerelease[e],n=r.prerelease[e];if(rs("prerelease compare",e,t,n),t===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(t===void 0)return-1;if(t===n)continue;return t0(t,n)}while(++e)};ms.prototype.inc=function(r,e){switch(r){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e),this.inc("pre",e);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var t=this.prerelease.length;--t>=0;)typeof this.prerelease[t]=="number"&&(this.prerelease[t]++,t=-2);t===-1&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+r)}return this.format(),this.raw=this.version,this};ti.inc=PUt;function PUt(r,e,t,n){typeof t=="string"&&(n=t,t=void 0);try{return new ms(r,t).inc(e,n).version}catch{return null}}ti.diff=wUt;function wUt(r,e){if(Moe(r,e))return null;var t=BM(r),n=BM(e);if(t.prerelease.length||n.prerelease.length){for(var i in t)if((i==="major"||i==="minor"||i==="patch")&&t[i]!==n[i])return"pre"+i;return"prerelease"}for(var i in t)if((i==="major"||i==="minor"||i==="patch")&&t[i]!==n[i])return i}ti.compareIdentifiers=t0;var oFe=/^[0-9]+$/;function t0(r,e){var t=oFe.test(r),n=oFe.test(e);return t&&n&&(r=+r,e=+e),t&&!n?-1:n&&!t?1:r<e?-1:r>e?1:0}ti.rcompareIdentifiers=EUt;function EUt(r,e){return t0(e,r)}ti.major=TUt;function TUt(r,e){return new ms(r,e).major}ti.minor=IUt;function IUt(r,e){return new ms(r,e).minor}ti.patch=RUt;function RUt(r,e){return new ms(r,e).patch}ti.compare=xg;function xg(r,e,t){return new ms(r,t).compare(e)}ti.compareLoose=xUt;function xUt(r,e){return xg(r,e,!0)}ti.rcompare=bFe;function bFe(r,e,t){return xg(e,r,t)}ti.sort=OUt;function OUt(r,e){return r.sort(function(t,n){return ti.compare(t,n,e)})}ti.rsort=AUt;function AUt(r,e){return r.sort(function(t,n){return ti.rcompare(t,n,e)})}ti.gt=S$;function S$(r,e,t){return xg(r,e,t)>0}ti.lt=C$;function C$(r,e,t){return xg(r,e,t)<0}ti.eq=Moe;function Moe(r,e,t){return xg(r,e,t)===0}ti.neq=_Fe;function _Fe(r,e,t){return xg(r,e,t)!==0}ti.gte=koe;function koe(r,e,t){return xg(r,e,t)>=0}ti.lte=Loe;function Loe(r,e,t){return xg(r,e,t)<=0}ti.cmp=SFe;function SFe(r,e,t,n){var i;switch(e){case"===":typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),i=r===t;break;case"!==":typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),i=r!==t;break;case"":case"=":case"==":i=Moe(r,t,n);break;case"!=":i=_Fe(r,t,n);break;case">":i=S$(r,t,n);break;case">=":i=koe(r,t,n);break;case"<":i=C$(r,t,n);break;case"<=":i=Loe(r,t,n);break;default:throw new TypeError("Invalid operator: "+e)}return i}ti.Comparator=Wh;function Wh(r,e){if(r instanceof Wh){if(r.loose===e)return r;r=r.value}if(!(this instanceof Wh))return new Wh(r,e);rs("comparator",r,e),this.loose=e,this.parse(r),this.semver===$M?this.value="":this.value=this.operator+this.semver.version,rs("comp",this)}var $M={};Wh.prototype.parse=function(r){var e=this.loose?qs[Noe]:qs[Doe],t=r.match(e);if(!t)throw new TypeError("Invalid comparator: "+r);this.operator=t[1],this.operator==="="&&(this.operator=""),t[2]?this.semver=new ms(t[2],this.loose):this.semver=$M};Wh.prototype.inspect=function(){return'<SemVer Comparator "'+this+'">'};Wh.prototype.toString=function(){return this.value};Wh.prototype.test=function(r){return rs("Comparator.test",r,this.loose),this.semver===$M?!0:(typeof r=="string"&&(r=new ms(r,this.loose)),SFe(r,this.operator,this.semver,this.loose))};ti.Range=nd;function nd(r,e){if(r instanceof nd&&r.loose===e)return r;if(!(this instanceof nd))return new nd(r,e);if(this.loose=e,this.raw=r,this.set=r.split(/\s*\|\|\s*/).map(function(t){return this.parseRange(t.trim())},this).filter(function(t){return t.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+r);this.format()}nd.prototype.inspect=function(){return'<SemVer Range "'+this.range+'">'};nd.prototype.format=function(){return this.range=this.set.map(function(r){return r.join(" ").trim()}).join("||").trim(),this.range};nd.prototype.toString=function(){return this.range};nd.prototype.parseRange=function(r){var e=this.loose;r=r.trim(),rs("range",r,e);var t=e?qs[yFe]:qs[gFe];r=r.replace(t,UUt),rs("hyphen replace",r),r=r.replace(qs[UM],_Ut),rs("comparator trim",r,qs[UM]),r=r.replace(qs[b$],vUt),r=r.replace(qs[_$],bUt),r=r.split(/\s+/).join(" ");var n=e?qs[Noe]:qs[Doe],i=r.split(" ").map(function(s){return DUt(s,e)}).join(" ").split(/\s+/);return this.loose&&(i=i.filter(function(s){return!!s.match(n)})),i=i.map(function(s){return new Wh(s,e)}),i};ti.toComparators=NUt;function NUt(r,e){return new nd(r,e).set.map(function(t){return t.map(function(n){return n.value}).join(" ").trim().split(" ")})}function DUt(r,e){return rs("comp",r),r=LUt(r,e),rs("caret",r),r=MUt(r,e),rs("tildes",r),r=zUt(r,e),rs("xrange",r),r=jUt(r,e),rs("stars",r),r}function ql(r){return!r||r.toLowerCase()==="x"||r==="*"}function MUt(r,e){return r.trim().split(/\s+/).map(function(t){return kUt(t,e)}).join(" ")}function kUt(r,e){var t=e?qs[mFe]:qs[pFe];return r.replace(t,function(n,i,s,o,a){rs("tilde",r,n,i,s,o,a);var c;return ql(i)?c="":ql(s)?c=">="+i+".0.0 <"+(+i+1)+".0.0":ql(o)?c=">="+i+"."+s+".0 <"+i+"."+(+s+1)+".0":a?(rs("replaceTilde pr",a),a.charAt(0)!=="-"&&(a="-"+a),c=">="+i+"."+s+"."+o+a+" <"+i+"."+(+s+1)+".0"):c=">="+i+"."+s+"."+o+" <"+i+"."+(+s+1)+".0",rs("tilde return",c),c})}function LUt(r,e){return r.trim().split(/\s+/).map(function(t){return qUt(t,e)}).join(" ")}function qUt(r,e){rs("caret",r,e);var t=e?qs[fFe]:qs[hFe];return r.replace(t,function(n,i,s,o,a){rs("caret",r,n,i,s,o,a);var c;return ql(i)?c="":ql(s)?c=">="+i+".0.0 <"+(+i+1)+".0.0":ql(o)?i==="0"?c=">="+i+"."+s+".0 <"+i+"."+(+s+1)+".0":c=">="+i+"."+s+".0 <"+(+i+1)+".0.0":a?(rs("replaceCaret pr",a),a.charAt(0)!=="-"&&(a="-"+a),i==="0"?s==="0"?c=">="+i+"."+s+"."+o+a+" <"+i+"."+s+"."+(+o+1):c=">="+i+"."+s+"."+o+a+" <"+i+"."+(+s+1)+".0":c=">="+i+"."+s+"."+o+a+" <"+(+i+1)+".0.0"):(rs("no pr"),i==="0"?s==="0"?c=">="+i+"."+s+"."+o+" <"+i+"."+s+"."+(+o+1):c=">="+i+"."+s+"."+o+" <"+i+"."+(+s+1)+".0":c=">="+i+"."+s+"."+o+" <"+(+i+1)+".0.0"),rs("caret return",c),c})}function zUt(r,e){return rs("replaceXRanges",r,e),r.split(/\s+/).map(function(t){return FUt(t,e)}).join(" ")}function FUt(r,e){r=r.trim();var t=e?qs[dFe]:qs[uFe];return r.replace(t,function(n,i,s,o,a,c){rs("xRange",r,n,i,s,o,a,c);var l=ql(s),u=l||ql(o),d=u||ql(a),p=d;return i==="="&&p&&(i=""),l?i===">"||i==="<"?n="<0.0.0":n="*":i&&p?(u&&(o=0),d&&(a=0),i===">"?(i=">=",u?(s=+s+1,o=0,a=0):d&&(o=+o+1,a=0)):i==="<="&&(i="<",u?s=+s+1:o=+o+1),n=i+s+"."+o+"."+a):u?n=">="+s+".0.0 <"+(+s+1)+".0.0":d&&(n=">="+s+"."+o+".0 <"+s+"."+(+o+1)+".0"),rs("xRange return",n),n})}function jUt(r,e){return rs("replaceStars",r,e),r.trim().replace(qs[vFe],"")}function UUt(r,e,t,n,i,s,o,a,c,l,u,d,p){return ql(t)?e="":ql(n)?e=">="+t+".0.0":ql(i)?e=">="+t+"."+n+".0":e=">="+e,ql(c)?a="":ql(l)?a="<"+(+c+1)+".0.0":ql(u)?a="<"+c+"."+(+l+1)+".0":d?a="<="+c+"."+l+"."+u+"-"+d:a="<="+a,(e+" "+a).trim()}nd.prototype.test=function(r){if(!r)return!1;typeof r=="string"&&(r=new ms(r,this.loose));for(var e=0;e<this.set.length;e++)if(BUt(this.set[e],r))return!0;return!1};function BUt(r,e){for(var t=0;t<r.length;t++)if(!r[t].test(e))return!1;if(e.prerelease.length){for(var t=0;t<r.length;t++)if(rs(r[t].semver),r[t].semver!==$M&&r[t].semver.prerelease.length>0){var n=r[t].semver;if(n.major===e.major&&n.minor===e.minor&&n.patch===e.patch)return!0}return!1}return!0}ti.satisfies=qoe;function qoe(r,e,t){try{e=new nd(e,t)}catch{return!1}return e.test(r)}ti.maxSatisfying=GUt;function GUt(r,e,t){return r.filter(function(n){return qoe(n,e,t)}).sort(function(n,i){return bFe(n,i,t)})[0]||null}ti.validRange=$Ut;function $Ut(r,e){try{return new nd(r,e).range||"*"}catch{return null}}ti.ltr=VUt;function VUt(r,e,t){return zoe(r,e,"<",t)}ti.gtr=HUt;function HUt(r,e,t){return zoe(r,e,">",t)}ti.outside=zoe;function zoe(r,e,t,n){r=new ms(r,n),e=new nd(e,n);var i,s,o,a,c;switch(t){case">":i=S$,s=Loe,o=C$,a=">",c=">=";break;case"<":i=C$,s=koe,o=S$,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(qoe(r,e,n))return!1;for(var l=0;l<e.set.length;++l){var u=e.set[l],d=null,p=null;if(u.forEach(function(m){m.semver===$M&&(m=new Wh(">=0.0.0")),d=d||m,p=p||m,i(m.semver,d.semver,n)?d=m:o(m.semver,p.semver,n)&&(p=m)}),d.operator===a||d.operator===c||(!p.operator||p.operator===a)&&s(r,p.semver))return!1;if(p.operator===c&&o(r,p.semver))return!1}return!0}});var EFe=O(wFe=>{wFe.entityMap={lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\xC0",Aacute:"\xC1",Acirc:"\xC2",Atilde:"\xC3",Auml:"\xC4",Aring:"\xC5",AElig:"\xC6",Ccedil:"\xC7",Egrave:"\xC8",Eacute:"\xC9",Ecirc:"\xCA",Euml:"\xCB",Igrave:"\xCC",Iacute:"\xCD",Icirc:"\xCE",Iuml:"\xCF",ETH:"\xD0",Ntilde:"\xD1",Ograve:"\xD2",Oacute:"\xD3",Ocirc:"\xD4",Otilde:"\xD5",Ouml:"\xD6",Oslash:"\xD8",Ugrave:"\xD9",Uacute:"\xDA",Ucirc:"\xDB",Uuml:"\xDC",Yacute:"\xDD",THORN:"\xDE",szlig:"\xDF",agrave:"\xE0",aacute:"\xE1",acirc:"\xE2",atilde:"\xE3",auml:"\xE4",aring:"\xE5",aelig:"\xE6",ccedil:"\xE7",egrave:"\xE8",eacute:"\xE9",ecirc:"\xEA",euml:"\xEB",igrave:"\xEC",iacute:"\xED",icirc:"\xEE",iuml:"\xEF",eth:"\xF0",ntilde:"\xF1",ograve:"\xF2",oacute:"\xF3",ocirc:"\xF4",otilde:"\xF5",ouml:"\xF6",oslash:"\xF8",ugrave:"\xF9",uacute:"\xFA",ucirc:"\xFB",uuml:"\xFC",yacute:"\xFD",thorn:"\xFE",yuml:"\xFF",nbsp:"\xA0",iexcl:"\xA1",cent:"\xA2",pound:"\xA3",curren:"\xA4",yen:"\xA5",brvbar:"\xA6",sect:"\xA7",uml:"\xA8",copy:"\xA9",ordf:"\xAA",laquo:"\xAB",not:"\xAC",shy:"\xAD\xAD",reg:"\xAE",macr:"\xAF",deg:"\xB0",plusmn:"\xB1",sup2:"\xB2",sup3:"\xB3",acute:"\xB4",micro:"\xB5",para:"\xB6",middot:"\xB7",cedil:"\xB8",sup1:"\xB9",ordm:"\xBA",raquo:"\xBB",frac14:"\xBC",frac12:"\xBD",frac34:"\xBE",iquest:"\xBF",times:"\xD7",divide:"\xF7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220B",prod:"\u220F",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221A",prop:"\u221D",infin:"\u221E",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222A",int:"\u222B",there4:"\u2234",sim:"\u223C",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22A5",sdot:"\u22C5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039A",Lambda:"\u039B",Mu:"\u039C",Nu:"\u039D",Xi:"\u039E",Omicron:"\u039F",Pi:"\u03A0",Rho:"\u03A1",Sigma:"\u03A3",Tau:"\u03A4",Upsilon:"\u03A5",Phi:"\u03A6",Chi:"\u03A7",Psi:"\u03A8",Omega:"\u03A9",alpha:"\u03B1",beta:"\u03B2",gamma:"\u03B3",delta:"\u03B4",epsilon:"\u03B5",zeta:"\u03B6",eta:"\u03B7",theta:"\u03B8",iota:"\u03B9",kappa:"\u03BA",lambda:"\u03BB",mu:"\u03BC",nu:"\u03BD",xi:"\u03BE",omicron:"\u03BF",pi:"\u03C0",rho:"\u03C1",sigmaf:"\u03C2",sigma:"\u03C3",tau:"\u03C4",upsilon:"\u03C5",phi:"\u03C6",chi:"\u03C7",psi:"\u03C8",omega:"\u03C9",thetasym:"\u03D1",upsih:"\u03D2",piv:"\u03D6",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02C6",tilde:"\u02DC",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200C",zwj:"\u200D",lrm:"\u200E",rlm:"\u200F",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201A",ldquo:"\u201C",rdquo:"\u201D",bdquo:"\u201E",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203A",oline:"\u203E",euro:"\u20AC",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21B5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230A",rfloor:"\u230B",loz:"\u25CA",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"}});var DFe=O(joe=>{var Foe=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,TFe=new RegExp("[\\-\\.0-9"+Foe.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),IFe=new RegExp("^"+Foe.source+TFe.source+"*(?::"+Foe.source+TFe.source+"*)?$"),VM=0,eb=1,i0=2,HM=3,s0=4,o0=5,WM=6,E$=7;function a0(r,e){this.message=r,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,a0)}a0.prototype=new Error;a0.prototype.name=a0.name;function OFe(){}OFe.prototype={parse:function(r,e,t){var n=this.domBuilder;n.startDocument(),AFe(e,e={}),WUt(r,e,t,n,this.errorHandler),n.endDocument()}};function WUt(r,e,t,n,i){function s(Ge){if(Ge>65535){Ge-=65536;var pe=55296+(Ge>>10),Ie=56320+(Ge&1023);return String.fromCharCode(pe,Ie)}else return String.fromCharCode(Ge)}function o(Ge){var pe=Ge.slice(1,-1);return pe in t?t[pe]:pe.charAt(0)==="#"?s(parseInt(pe.substr(1).replace("x","0x"))):(i.error("entity not found:"+Ge),Ge)}function a(Ge){if(Ge>y){var pe=r.substring(y,Ge).replace(/&#?\w+;/g,o);p&&c(y),n.characters(pe,0,Ge-y),y=Ge}}function c(Ge,pe){for(;Ge>=u&&(pe=d.exec(r));)l=pe.index,u=l+pe[0].length,p.lineNumber++;p.columnNumber=Ge-l+1}for(var l=0,u=0,d=/.*(?:\r\n?|\n)|.*$/g,p=n.locator,m=[{currentNSMap:e}],f={},y=0;;){try{var v=r.indexOf("<",y);if(v<0){if(!r.substr(y).match(/^\s*$/)){var _=n.doc,C=_.createTextNode(r.substr(y));_.appendChild(C),n.currentElement=C}return}switch(v>y&&a(v),r.charAt(v+1)){case"/":var ee=r.indexOf(">",v+3),P=r.substring(v+2,ee),w=m.pop();ee<0?(P=r.substring(v+2).replace(/[\s<].*/,""),i.error("end tag name: "+P+" is not complete:"+w.tagName),ee=v+1+P.length):P.match(/\s</)&&(P=P.replace(/[\s<].*/,""),i.error("end tag name: "+P+" maybe not complete"),ee=v+1+P.length);var R=w.localNSMap,I=w.tagName==P,z=I||w.tagName&&w.tagName.toLowerCase()==P.toLowerCase();if(z){if(n.endElement(w.uri,w.localName,P),R)for(var G in R)n.endPrefixMapping(G);I||i.fatalError("end tag name: "+P+" is not match the current start tagName:"+w.tagName)}else m.push(w);ee++;break;case"?":p&&c(v),ee=JUt(r,v,n);break;case"!":p&&c(v),ee=XUt(r,v,n,i);break;default:p&&c(v);var L=new NFe,H=m[m.length-1].currentNSMap,ee=KUt(r,v,L,H,o,i),ye=L.length;if(!L.closed&&YUt(r,ee,L.tagName,f)&&(L.closed=!0,t.nbsp||i.warning("unclosed xml attribute")),p&&ye){for(var $e=RFe(p,{}),Be=0;Be<ye;Be++){var Ct=L[Be];c(Ct.offset),Ct.locator=RFe(p,{})}n.locator=$e,xFe(L,n,H)&&m.push(L),n.locator=p}else xFe(L,n,H)&&m.push(L);L.uri==="http://www.w3.org/1999/xhtml"&&!L.closed?ee=QUt(r,ee,L.tagName,o,n):ee++}}catch(Ge){if(Ge instanceof a0)throw Ge;i.error("element parse error: "+Ge),ee=-1}ee>y?y=ee:a(Math.max(v,y)+1)}}function RFe(r,e){return e.lineNumber=r.lineNumber,e.columnNumber=r.columnNumber,e}function KUt(r,e,t,n,i,s){function o(m,f,y){m in t.attributeNames&&s.fatalError("Attribute "+m+" redefined"),t.addValue(m,f,y)}for(var a,c,l=++e,u=VM;;){var d=r.charAt(l);switch(d){case"=":if(u===eb)a=r.slice(e,l),u=HM;else if(u===i0)u=HM;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(u===HM||u===eb)if(u===eb&&(s.warning('attribute value must after "="'),a=r.slice(e,l)),e=l+1,l=r.indexOf(d,e),l>0)c=r.slice(e,l).replace(/&#?\w+;/g,i),o(a,c,e-1),u=o0;else throw new Error("attribute value no end '"+d+"' match");else if(u==s0)c=r.slice(e,l).replace(/&#?\w+;/g,i),o(a,c,e),s.warning('attribute "'+a+'" missed start quot('+d+")!!"),e=l+1,u=o0;else throw new Error('attribute value must after "="');break;case"/":switch(u){case VM:t.setTagName(r.slice(e,l));case o0:case WM:case E$:u=E$,t.closed=!0;case s0:case eb:case i0:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return s.error("unexpected end of input"),u==VM&&t.setTagName(r.slice(e,l)),l;case">":switch(u){case VM:t.setTagName(r.slice(e,l));case o0:case WM:case E$:break;case s0:case eb:c=r.slice(e,l),c.slice(-1)==="/"&&(t.closed=!0,c=c.slice(0,-1));case i0:u===i0&&(c=a),u==s0?(s.warning('attribute "'+c+'" missed quot(")!'),o(a,c.replace(/&#?\w+;/g,i),e)):((n[""]!=="http://www.w3.org/1999/xhtml"||!c.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+c+'" missed value!! "'+c+'" instead!!'),o(c,c,e));break;case HM:throw new Error("attribute value missed!!")}return l;case"\x80":d=" ";default:if(d<=" ")switch(u){case VM:t.setTagName(r.slice(e,l)),u=WM;break;case eb:a=r.slice(e,l),u=i0;break;case s0:var c=r.slice(e,l).replace(/&#?\w+;/g,i);s.warning('attribute "'+c+'" missed quot(")!!'),o(a,c,e);case o0:u=WM;break}else switch(u){case i0:var p=t.tagName;(n[""]!=="http://www.w3.org/1999/xhtml"||!a.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+a+'" missed value!! "'+a+'" instead2!!'),o(a,a,e),e=l,u=eb;break;case o0:s.warning('attribute space is required"'+a+'"!!');case WM:u=eb,e=l;break;case HM:u=s0,e=l;break;case E$:throw new Error("elements closed character '/' and '>' must be connected to")}}l++}}function xFe(r,e,t){for(var n=r.tagName,i=null,d=r.length;d--;){var s=r[d],o=s.qName,a=s.value,p=o.indexOf(":");if(p>0)var c=s.prefix=o.slice(0,p),l=o.slice(p+1),u=c==="xmlns"&&l;else l=o,c=null,u=o==="xmlns"&&"";s.localName=l,u!==!1&&(i==null&&(i={},AFe(t,t={})),t[u]=i[u]=a,s.uri="http://www.w3.org/2000/xmlns/",e.startPrefixMapping(u,a))}for(var d=r.length;d--;){s=r[d];var c=s.prefix;c&&(c==="xml"&&(s.uri="http://www.w3.org/XML/1998/namespace"),c!=="xmlns"&&(s.uri=t[c||""]))}var p=n.indexOf(":");p>0?(c=r.prefix=n.slice(0,p),l=r.localName=n.slice(p+1)):(c=null,l=r.localName=n);var m=r.uri=t[c||""];if(e.startElement(m,l,n,r),r.closed){if(e.endElement(m,l,n),i)for(c in i)e.endPrefixMapping(c)}else return r.currentNSMap=t,r.localNSMap=i,!0}function QUt(r,e,t,n,i){if(/^(?:script|textarea)$/i.test(t)){var s=r.indexOf("</"+t+">",e),o=r.substring(e+1,s);if(/[&<]/.test(o))return/^script$/i.test(t)?(i.characters(o,0,o.length),s):(o=o.replace(/&#?\w+;/g,n),i.characters(o,0,o.length),s)}return e+1}function YUt(r,e,t,n){var i=n[t];return i==null&&(i=r.lastIndexOf("</"+t+">"),i<e&&(i=r.lastIndexOf("</"+t)),n[t]=i),i<e}function AFe(r,e){for(var t in r)e[t]=r[t]}function XUt(r,e,t,n){var i=r.charAt(e+2);switch(i){case"-":if(r.charAt(e+3)==="-"){var s=r.indexOf("-->",e+4);return s>e?(t.comment(r,e+4,s-e-4),s+3):(n.error("Unclosed comment"),-1)}else return-1;default:if(r.substr(e+3,6)=="CDATA["){var s=r.indexOf("]]>",e+9);return t.startCDATA(),t.characters(r,e+9,s-e-9),t.endCDATA(),s+3}var o=ZUt(r,e),a=o.length;if(a>1&&/!doctype/i.test(o[0][0])){var c=o[1][0],l=!1,u=!1;a>3&&(/^public$/i.test(o[2][0])?(l=o[3][0],u=a>4&&o[4][0]):/^system$/i.test(o[2][0])&&(u=o[3][0]));var d=o[a-1];return t.startDTD(c,l,u),t.endDTD(),d.index+d[0].length}}return-1}function JUt(r,e,t){var n=r.indexOf("?>",e);if(n){var i=r.substring(e,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(i){var s=i[0].length;return t.processingInstruction(i[1],i[2]),n+2}else return-1}return-1}function NFe(){this.attributeNames={}}NFe.prototype={setTagName:function(r){if(!IFe.test(r))throw new Error("invalid tagName:"+r);this.tagName=r},addValue:function(r,e,t){if(!IFe.test(r))throw new Error("invalid attribute:"+r);this.attributeNames[r]=this.length,this[this.length++]={qName:r,value:e,offset:t}},length:0,getLocalName:function(r){return this[r].localName},getLocator:function(r){return this[r].locator},getQName:function(r){return this[r].qName},getURI:function(r){return this[r].uri},getValue:function(r){return this[r].value}};function ZUt(r,e){var t,n=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=e,i.exec(r);t=i.exec(r);)if(n.push(t),t[1])return n}joe.XMLReader=OFe;joe.ParseError=a0});var Yoe=O(JM=>{function QM(r,e){for(var t in r)e[t]=r[t]}function fu(r,e){var t=r.prototype;if(!(t instanceof e)){let i=function(){};var n=i;i.prototype=e.prototype,i=new i,QM(t,i),r.prototype=t=i}t.constructor!=r&&(typeof r!="function"&&console.error("unknow Class:"+r),t.constructor=r)}var eBt="http://www.w3.org/1999/xhtml",gu={},Rm=gu.ELEMENT_NODE=1,l0=gu.ATTRIBUTE_NODE=2,T$=gu.TEXT_NODE=3,FFe=gu.CDATA_SECTION_NODE=4,jFe=gu.ENTITY_REFERENCE_NODE=5,tBt=gu.ENTITY_NODE=6,UFe=gu.PROCESSING_INSTRUCTION_NODE=7,BFe=gu.COMMENT_NODE=8,GFe=gu.DOCUMENT_NODE=9,$Fe=gu.DOCUMENT_TYPE_NODE=10,Og=gu.DOCUMENT_FRAGMENT_NODE=11,rBt=gu.NOTATION_NODE=12,ol={},rc={},uEr=ol.INDEX_SIZE_ERR=(rc[1]="Index size error",1),dEr=ol.DOMSTRING_SIZE_ERR=(rc[2]="DOMString size error",2),nBt=ol.HIERARCHY_REQUEST_ERR=(rc[3]="Hierarchy request error",3),pEr=ol.WRONG_DOCUMENT_ERR=(rc[4]="Wrong document",4),mEr=ol.INVALID_CHARACTER_ERR=(rc[5]="Invalid character",5),hEr=ol.NO_DATA_ALLOWED_ERR=(rc[6]="No data allowed",6),fEr=ol.NO_MODIFICATION_ALLOWED_ERR=(rc[7]="No modification allowed",7),iBt=ol.NOT_FOUND_ERR=(rc[8]="Not found",8),gEr=ol.NOT_SUPPORTED_ERR=(rc[9]="Not supported",9),MFe=ol.INUSE_ATTRIBUTE_ERR=(rc[10]="Attribute in use",10),yEr=ol.INVALID_STATE_ERR=(rc[11]="Invalid state",11),vEr=ol.SYNTAX_ERR=(rc[12]="Syntax error",12),bEr=ol.INVALID_MODIFICATION_ERR=(rc[13]="Invalid modification",13),_Er=ol.NAMESPACE_ERR=(rc[14]="Invalid namespace",14),SEr=ol.INVALID_ACCESS_ERR=(rc[15]="Invalid access",15);function SC(r,e){if(e instanceof Error)var t=e;else t=this,Error.call(this,rc[r]),this.message=rc[r],Error.captureStackTrace&&Error.captureStackTrace(this,SC);return t.code=r,e&&(this.message=this.message+": "+e),t}SC.prototype=Error.prototype;QM(ol,SC);function tb(){}tb.prototype={length:0,item:function(r){return this[r]||null},toString:function(r,e){for(var t=[],n=0;n<this.length;n++)c0(this[n],t,r,e);return t.join("")}};function u0(r,e){this._node=r,this._refresh=e,Boe(this)}function Boe(r){var e=r._node._inc||r._node.ownerDocument._inc;if(r._inc!=e){var t=r._refresh(r._node);tje(r,"length",t.length),QM(t,r),r._inc=e}}u0.prototype.item=function(r){return Boe(this),this[r]};fu(u0,tb);function I$(){}function VFe(r,e){for(var t=r.length;t--;)if(r[t]===e)return t}function kFe(r,e,t,n){if(n?e[VFe(e,n)]=t:e[e.length++]=t,r){t.ownerElement=r;var i=r.ownerDocument;i&&(n&&WFe(i,r,n),sBt(i,r,t))}}function LFe(r,e,t){var n=VFe(e,t);if(n>=0){for(var i=e.length-1;n<i;)e[n]=e[++n];if(e.length=i,r){var s=r.ownerDocument;s&&(WFe(s,r,t),t.ownerElement=null)}}else throw SC(iBt,new Error(r.tagName+"@"+t))}I$.prototype={length:0,item:tb.prototype.item,getNamedItem:function(r){for(var e=this.length;e--;){var t=this[e];if(t.nodeName==r)return t}},setNamedItem:function(r){var e=r.ownerElement;if(e&&e!=this._ownerElement)throw new SC(MFe);var t=this.getNamedItem(r.nodeName);return kFe(this._ownerElement,this,r,t),t},setNamedItemNS:function(r){var e=r.ownerElement,t;if(e&&e!=this._ownerElement)throw new SC(MFe);return t=this.getNamedItemNS(r.namespaceURI,r.localName),kFe(this._ownerElement,this,r,t),t},removeNamedItem:function(r){var e=this.getNamedItem(r);return LFe(this._ownerElement,this,e),e},removeNamedItemNS:function(r,e){var t=this.getNamedItemNS(r,e);return LFe(this._ownerElement,this,t),t},getNamedItemNS:function(r,e){for(var t=this.length;t--;){var n=this[t];if(n.localName==e&&n.namespaceURI==r)return n}return null}};function HFe(r){if(this._features={},r)for(var e in r)this._features=r[e]}HFe.prototype={hasFeature:function(r,e){var t=this._features[r.toLowerCase()];return!!(t&&(!e||e in t))},createDocument:function(r,e,t){var n=new YM;if(n.implementation=this,n.childNodes=new tb,n.doctype=t,t&&n.appendChild(t),e){var i=n.createElementNS(r,e);n.appendChild(i)}return n},createDocumentType:function(r,e,t){var n=new Woe;return n.name=r,n.nodeName=r,n.publicId=e,n.systemId=t,n}};function al(){}al.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(r,e){return QFe(this,r,e)},replaceChild:function(r,e){this.insertBefore(r,e),e&&this.removeChild(e)},removeChild:function(r){return KFe(this,r)},appendChild:function(r){return this.insertBefore(r,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(r){return Uoe(this.ownerDocument||this,this,r)},normalize:function(){for(var r=this.firstChild;r;){var e=r.nextSibling;e&&e.nodeType==T$&&r.nodeType==T$?(this.removeChild(e),r.appendData(e.data)):(r.normalize(),r=e)}},isSupported:function(r,e){return this.ownerDocument.implementation.hasFeature(r,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(r){for(var e=this;e;){var t=e._nsMap;if(t){for(var n in t)if(t[n]==r)return n}e=e.nodeType==l0?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(r){for(var e=this;e;){var t=e._nsMap;if(t&&r in t)return t[r];e=e.nodeType==l0?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(r){var e=this.lookupPrefix(r);return e==null}};function qFe(r){return r=="<"&&"&lt;"||r==">"&&"&gt;"||r=="&"&&"&amp;"||r=='"'&&"&quot;"||"&#"+r.charCodeAt()+";"}QM(gu,al);QM(gu,al.prototype);function KM(r,e){if(e(r))return!0;if(r=r.firstChild)do if(KM(r,e))return!0;while(r=r.nextSibling)}function YM(){}function sBt(r,e,t){r&&r._inc++;var n=t.namespaceURI;n=="http://www.w3.org/2000/xmlns/"&&(e._nsMap[t.prefix?t.localName:""]=t.value)}function WFe(r,e,t,n){r&&r._inc++;var i=t.namespaceURI;i=="http://www.w3.org/2000/xmlns/"&&delete e._nsMap[t.prefix?t.localName:""]}function Goe(r,e,t){if(r&&r._inc){r._inc++;var n=e.childNodes;if(t)n[n.length++]=t;else{for(var i=e.firstChild,s=0;i;)n[s++]=i,i=i.nextSibling;n.length=s}}}function KFe(r,e){var t=e.previousSibling,n=e.nextSibling;return t?t.nextSibling=n:r.firstChild=n,n?n.previousSibling=t:r.lastChild=t,Goe(r.ownerDocument,r),e}function QFe(r,e,t){var n=e.parentNode;if(n&&n.removeChild(e),e.nodeType===Og){var i=e.firstChild;if(i==null)return e;var s=e.lastChild}else i=s=e;var o=t?t.previousSibling:r.lastChild;i.previousSibling=o,s.nextSibling=t,o?o.nextSibling=i:r.firstChild=i,t==null?r.lastChild=s:t.previousSibling=s;do i.parentNode=r;while(i!==s&&(i=i.nextSibling));return Goe(r.ownerDocument||r,r),e.nodeType==Og&&(e.firstChild=e.lastChild=null),e}function oBt(r,e){var t=e.parentNode;if(t){var n=r.lastChild;t.removeChild(e);var n=r.lastChild}var n=r.lastChild;return e.parentNode=r,e.previousSibling=n,e.nextSibling=null,n?n.nextSibling=e:r.firstChild=e,r.lastChild=e,Goe(r.ownerDocument,r,e),e}YM.prototype={nodeName:"#document",nodeType:GFe,doctype:null,documentElement:null,_inc:1,insertBefore:function(r,e){if(r.nodeType==Og){for(var t=r.firstChild;t;){var n=t.nextSibling;this.insertBefore(t,e),t=n}return r}return this.documentElement==null&&r.nodeType==Rm&&(this.documentElement=r),QFe(this,r,e),r.ownerDocument=this,r},removeChild:function(r){return this.documentElement==r&&(this.documentElement=null),KFe(this,r)},importNode:function(r,e){return eje(this,r,e)},getElementById:function(r){var e=null;return KM(this.documentElement,function(t){if(t.nodeType==Rm&&t.getAttribute("id")==r)return e=t,!0}),e},getElementsByClassName:function(r){var e=new RegExp("(^|\\s)"+r+"(\\s|$)");return new u0(this,function(t){var n=[];return KM(t.documentElement,function(i){i!==t&&i.nodeType==Rm&&e.test(i.getAttribute("class"))&&n.push(i)}),n})},createElement:function(r){var e=new d0;e.ownerDocument=this,e.nodeName=r,e.tagName=r,e.childNodes=new tb;var t=e.attributes=new I$;return t._ownerElement=e,e},createDocumentFragment:function(){var r=new x$;return r.ownerDocument=this,r.childNodes=new tb,r},createTextNode:function(r){var e=new $oe;return e.ownerDocument=this,e.appendData(r),e},createComment:function(r){var e=new Voe;return e.ownerDocument=this,e.appendData(r),e},createCDATASection:function(r){var e=new Hoe;return e.ownerDocument=this,e.appendData(r),e},createProcessingInstruction:function(r,e){var t=new Qoe;return t.ownerDocument=this,t.tagName=t.target=r,t.nodeValue=t.data=e,t},createAttribute:function(r){var e=new R$;return e.ownerDocument=this,e.name=r,e.nodeName=r,e.localName=r,e.specified=!0,e},createEntityReference:function(r){var e=new Koe;return e.ownerDocument=this,e.nodeName=r,e},createElementNS:function(r,e){var t=new d0,n=e.split(":"),i=t.attributes=new I$;return t.childNodes=new tb,t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.namespaceURI=r,n.length==2?(t.prefix=n[0],t.localName=n[1]):t.localName=e,i._ownerElement=t,t},createAttributeNS:function(r,e){var t=new R$,n=e.split(":");return t.ownerDocument=this,t.nodeName=e,t.name=e,t.namespaceURI=r,t.specified=!0,n.length==2?(t.prefix=n[0],t.localName=n[1]):t.localName=e,t}};fu(YM,al);function d0(){this._nsMap={}}d0.prototype={nodeType:Rm,hasAttribute:function(r){return this.getAttributeNode(r)!=null},getAttribute:function(r){var e=this.getAttributeNode(r);return e&&e.value||""},getAttributeNode:function(r){return this.attributes.getNamedItem(r)},setAttribute:function(r,e){var t=this.ownerDocument.createAttribute(r);t.value=t.nodeValue=""+e,this.setAttributeNode(t)},removeAttribute:function(r){var e=this.getAttributeNode(r);e&&this.removeAttributeNode(e)},appendChild:function(r){return r.nodeType===Og?this.insertBefore(r,null):oBt(this,r)},setAttributeNode:function(r){return this.attributes.setNamedItem(r)},setAttributeNodeNS:function(r){return this.attributes.setNamedItemNS(r)},removeAttributeNode:function(r){return this.attributes.removeNamedItem(r.nodeName)},removeAttributeNS:function(r,e){var t=this.getAttributeNodeNS(r,e);t&&this.removeAttributeNode(t)},hasAttributeNS:function(r,e){return this.getAttributeNodeNS(r,e)!=null},getAttributeNS:function(r,e){var t=this.getAttributeNodeNS(r,e);return t&&t.value||""},setAttributeNS:function(r,e,t){var n=this.ownerDocument.createAttributeNS(r,e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},getAttributeNodeNS:function(r,e){return this.attributes.getNamedItemNS(r,e)},getElementsByTagName:function(r){return new u0(this,function(e){var t=[];return KM(e,function(n){n!==e&&n.nodeType==Rm&&(r==="*"||n.tagName==r)&&t.push(n)}),t})},getElementsByTagNameNS:function(r,e){return new u0(this,function(t){var n=[];return KM(t,function(i){i!==t&&i.nodeType===Rm&&(r==="*"||i.namespaceURI===r)&&(e==="*"||i.localName==e)&&n.push(i)}),n})}};YM.prototype.getElementsByTagName=d0.prototype.getElementsByTagName;YM.prototype.getElementsByTagNameNS=d0.prototype.getElementsByTagNameNS;fu(d0,al);function R$(){}R$.prototype.nodeType=l0;fu(R$,al);function XM(){}XM.prototype={data:"",substringData:function(r,e){return this.data.substring(r,r+e)},appendData:function(r){r=this.data+r,this.nodeValue=this.data=r,this.length=r.length},insertData:function(r,e){this.replaceData(r,0,e)},appendChild:function(r){throw new Error(rc[nBt])},deleteData:function(r,e){this.replaceData(r,e,"")},replaceData:function(r,e,t){var n=this.data.substring(0,r),i=this.data.substring(r+e);t=n+t+i,this.nodeValue=this.data=t,this.length=t.length}};fu(XM,al);function $oe(){}$oe.prototype={nodeName:"#text",nodeType:T$,splitText:function(r){var e=this.data,t=e.substring(r);e=e.substring(0,r),this.data=this.nodeValue=e,this.length=e.length;var n=this.ownerDocument.createTextNode(t);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}};fu($oe,XM);function Voe(){}Voe.prototype={nodeName:"#comment",nodeType:BFe};fu(Voe,XM);function Hoe(){}Hoe.prototype={nodeName:"#cdata-section",nodeType:FFe};fu(Hoe,XM);function Woe(){}Woe.prototype.nodeType=$Fe;fu(Woe,al);function YFe(){}YFe.prototype.nodeType=rBt;fu(YFe,al);function XFe(){}XFe.prototype.nodeType=tBt;fu(XFe,al);function Koe(){}Koe.prototype.nodeType=jFe;fu(Koe,al);function x$(){}x$.prototype.nodeName="#document-fragment";x$.prototype.nodeType=Og;fu(x$,al);function Qoe(){}Qoe.prototype.nodeType=UFe;fu(Qoe,al);function JFe(){}JFe.prototype.serializeToString=function(r,e,t){return ZFe.call(r,e,t)};al.prototype.toString=ZFe;function ZFe(r,e){var t=[],n=this.nodeType==9&&this.documentElement||this,i=n.prefix,s=n.namespaceURI;if(s&&i==null){var i=n.lookupPrefix(s);if(i==null)var o=[{namespace:s,prefix:null}]}return c0(this,t,r,e,o),t.join("")}function zFe(r,e,t){var n=r.prefix||"",i=r.namespaceURI;if(!n&&!i||n==="xml"&&i==="http://www.w3.org/XML/1998/namespace"||i=="http://www.w3.org/2000/xmlns/")return!1;for(var s=t.length;s--;){var o=t[s];if(o.prefix==n)return o.namespace!=i}return!0}function c0(r,e,t,n,i){if(n)if(r=n(r),r){if(typeof r=="string"){e.push(r);return}}else return;switch(r.nodeType){case Rm:i||(i=[]);var s=i.length,o=r.attributes,a=o.length,f=r.firstChild,c=r.tagName;t=eBt===r.namespaceURI||t,e.push("<",c);for(var l=0;l<a;l++){var u=o.item(l);u.prefix=="xmlns"?i.push({prefix:u.localName,namespace:u.value}):u.nodeName=="xmlns"&&i.push({prefix:"",namespace:u.value})}for(var l=0;l<a;l++){var u=o.item(l);if(zFe(u,t,i)){var d=u.prefix||"",p=u.namespaceURI,m=d?" xmlns:"+d:" xmlns";e.push(m,'="',p,'"'),i.push({prefix:d,namespace:p})}c0(u,e,t,n,i)}if(zFe(r,t,i)){var d=r.prefix||"",p=r.namespaceURI;if(p){var m=d?" xmlns:"+d:" xmlns";e.push(m,'="',p,'"'),i.push({prefix:d,namespace:p})}}if(f||t&&!/^(?:meta|link|img|br|hr|input)$/i.test(c)){if(e.push(">"),t&&/^script$/i.test(c))for(;f;)f.data?e.push(f.data):c0(f,e,t,n,i),f=f.nextSibling;else for(;f;)c0(f,e,t,n,i),f=f.nextSibling;e.push("</",c,">")}else e.push("/>");return;case GFe:case Og:for(var f=r.firstChild;f;)c0(f,e,t,n,i),f=f.nextSibling;return;case l0:return e.push(" ",r.name,'="',r.value.replace(/[<&"]/g,qFe),'"');case T$:return e.push(r.data.replace(/[<&]/g,qFe).replace(/]]>/g,"]]&gt;"));case FFe:return e.push("<![CDATA[",r.data,"]]>");case BFe:return e.push("<!--",r.data,"-->");case $Fe:var y=r.publicId,v=r.systemId;if(e.push("<!DOCTYPE ",r.name),y)e.push(" PUBLIC ",y),v&&v!="."&&e.push(" ",v),e.push(">");else if(v&&v!=".")e.push(" SYSTEM ",v,">");else{var _=r.internalSubset;_&&e.push(" [",_,"]"),e.push(">")}return;case UFe:return e.push("<?",r.target," ",r.data,"?>");case jFe:return e.push("&",r.nodeName,";");default:e.push("??",r.nodeName)}}function eje(r,e,t){var n;switch(e.nodeType){case Rm:n=e.cloneNode(!1),n.ownerDocument=r;case Og:break;case l0:t=!0;break}if(n||(n=e.cloneNode(!1)),n.ownerDocument=r,n.parentNode=null,t)for(var i=e.firstChild;i;)n.appendChild(eje(r,i,t)),i=i.nextSibling;return n}function Uoe(r,e,t){var n=new e.constructor;for(var i in e){var s=e[i];typeof s!="object"&&s!=n[i]&&(n[i]=s)}switch(e.childNodes&&(n.childNodes=new tb),n.ownerDocument=r,n.nodeType){case Rm:var o=e.attributes,a=n.attributes=new I$,c=o.length;a._ownerElement=n;for(var l=0;l<c;l++)n.setAttributeNode(Uoe(r,o.item(l),!0));break;case l0:t=!0}if(t)for(var u=e.firstChild;u;)n.appendChild(Uoe(r,u,t)),u=u.nextSibling;return n}function tje(r,e,t){r[e]=t}try{if(Object.defineProperty){let r=function(e){switch(e.nodeType){case Rm:case Og:var t=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&t.push(r(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}};aBt=r,Object.defineProperty(u0.prototype,"length",{get:function(){return Boe(this),this.$$length}}),Object.defineProperty(al.prototype,"textContent",{get:function(){return r(this)},set:function(e){switch(this.nodeType){case Rm:case Og:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),tje=function(e,t,n){e["$$"+t]=n}}}catch{}var aBt;JM.Node=al;JM.DOMException=SC;JM.DOMImplementation=HFe;JM.XMLSerializer=JFe});var sje=O(ek=>{function nje(r){this.options=r||{locator:{}}}nje.prototype.parseFromString=function(r,e){var t=this.options,n=new uBt,i=t.domBuilder||new ZM,s=t.errorHandler,o=t.locator,a=t.xmlns||{},c=/\/x?html?$/.test(e),l=c?lBt.entityMap:{lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return o&&i.setDocumentLocator(o),n.errorHandler=cBt(s,i,o),n.domBuilder=t.domBuilder||i,c&&(a[""]="http://www.w3.org/1999/xhtml"),a.xml=a.xml||"http://www.w3.org/XML/1998/namespace",r&&typeof r=="string"?n.parse(r,a,l):n.errorHandler.error("invalid doc source"),i.doc};function cBt(r,e,t){if(!r){if(e instanceof ZM)return e;r=e}var n={},i=r instanceof Function;t=t||{};function s(o){var a=r[o];!a&&i&&(a=r.length==2?function(c){r(o,c)}:r),n[o]=a&&function(c){a("[xmldom "+o+"]	"+c+Xoe(t))}||function(){}}return s("warning"),s("error"),s("fatalError"),n}function ZM(){this.cdata=!1}function p0(r,e){e.lineNumber=r.lineNumber,e.columnNumber=r.columnNumber}ZM.prototype={startDocument:function(){this.doc=new pBt().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(r,e,t,n){var i=this.doc,s=i.createElementNS(r,t||e),o=n.length;O$(this,s),this.currentElement=s,this.locator&&p0(this.locator,s);for(var a=0;a<o;a++){var r=n.getURI(a),c=n.getValue(a),t=n.getQName(a),l=i.createAttributeNS(r,t);this.locator&&p0(n.getLocator(a),l),l.value=l.nodeValue=c,s.setAttributeNode(l)}},endElement:function(r,e,t){var n=this.currentElement,i=n.tagName;this.currentElement=n.parentNode},startPrefixMapping:function(r,e){},endPrefixMapping:function(r){},processingInstruction:function(r,e){var t=this.doc.createProcessingInstruction(r,e);this.locator&&p0(this.locator,t),O$(this,t)},ignorableWhitespace:function(r,e,t){},characters:function(r,e,t){if(r=rje.apply(this,arguments),r){if(this.cdata)var n=this.doc.createCDATASection(r);else var n=this.doc.createTextNode(r);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(r)&&this.doc.appendChild(n),this.locator&&p0(this.locator,n)}},skippedEntity:function(r){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(r){(this.locator=r)&&(r.lineNumber=0)},comment:function(r,e,t){r=rje.apply(this,arguments);var n=this.doc.createComment(r);this.locator&&p0(this.locator,n),O$(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(r,e,t){var n=this.doc.implementation;if(n&&n.createDocumentType){var i=n.createDocumentType(r,e,t);this.locator&&p0(this.locator,i),O$(this,i)}},warning:function(r){console.warn("[xmldom warning]	"+r,Xoe(this.locator))},error:function(r){console.error("[xmldom error]	"+r,Xoe(this.locator))},fatalError:function(r){throw new dBt(r,this.locator)}};function Xoe(r){if(r)return`
@`+(r.systemId||"")+"#[line:"+r.lineNumber+",col:"+r.columnNumber+"]"}function rje(r,e,t){return typeof r=="string"?r.substr(e,t):r.length>=e+t||e?new java.lang.String(r,e,t)+"":r}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(r){ZM.prototype[r]=function(){return null}});function O$(r,e){r.currentElement?r.currentElement.appendChild(e):r.doc.appendChild(e)}var lBt=EFe(),ije=DFe(),uBt=ije.XMLReader,dBt=ije.ParseError,pBt=ek.DOMImplementation=Yoe().DOMImplementation;ek.XMLSerializer=Yoe().XMLSerializer;ek.DOMParser=nje;ek.__DOMHandler=ZM});var cje=O(aje=>{var mBt=sje().DOMParser;aje.parse=fBt;var A$=3,oje=4,hBt=8;function Joe(r){return r.nodeType===A$||r.nodeType===hBt||r.nodeType===oje}function Ag(r){return!r.childNodes||r.childNodes.length===0}function CC(r,e){if(!r)throw new Error(e)}function fBt(r){var e=new mBt().parseFromString(r);CC(e.documentElement.nodeName==="plist","malformed document. First element should be <plist>");var t=m0(e.documentElement);return t.length==1&&(t=t[0]),t}function m0(r){var e,t,n,i,s,o,a,c;if(!r)return null;if(r.nodeName==="plist"){if(s=[],Ag(r))return s;for(e=0;e<r.childNodes.length;e++)Joe(r.childNodes[e])||s.push(m0(r.childNodes[e]));return s}else if(r.nodeName==="dict"){if(t={},n=null,a=0,Ag(r))return t;for(e=0;e<r.childNodes.length;e++)Joe(r.childNodes[e])||(a%2===0?(CC(r.childNodes[e].nodeName==="key","Missing key while parsing <dict/>."),n=m0(r.childNodes[e])):(CC(r.childNodes[e].nodeName!=="key",'Unexpected key "'+m0(r.childNodes[e])+'" while parsing <dict/>.'),t[n]=m0(r.childNodes[e])),a+=1);return a%2===1&&(t[n]=""),t}else if(r.nodeName==="array"){if(s=[],Ag(r))return s;for(e=0;e<r.childNodes.length;e++)Joe(r.childNodes[e])||(o=m0(r.childNodes[e]),o!=null&&s.push(o));return s}else if(r.nodeName!=="#text"){if(r.nodeName==="key")return Ag(r)?"":(CC(r.childNodes[0].nodeValue!=="__proto__","__proto__ keys can lead to prototype pollution. More details on CVE-2022-22912"),r.childNodes[0].nodeValue);if(r.nodeName==="string"){if(o="",Ag(r))return o;for(e=0;e<r.childNodes.length;e++){var c=r.childNodes[e].nodeType;(c===A$||c===oje)&&(o+=r.childNodes[e].nodeValue)}return o}else{if(r.nodeName==="integer")return CC(!Ag(r),'Cannot parse "" as integer.'),parseInt(r.childNodes[0].nodeValue,10);if(r.nodeName==="real"){for(CC(!Ag(r),'Cannot parse "" as real.'),o="",e=0;e<r.childNodes.length;e++)r.childNodes[e].nodeType===A$&&(o+=r.childNodes[e].nodeValue);return parseFloat(o)}else if(r.nodeName==="data"){if(o="",Ag(r))return Buffer.from(o,"base64");for(e=0;e<r.childNodes.length;e++)r.childNodes[e].nodeType===A$&&(o+=r.childNodes[e].nodeValue.replace(/\s+/g,""));return Buffer.from(o,"base64")}else{if(r.nodeName==="date")return CC(!Ag(r),'Cannot parse "" as Date.'),new Date(r.childNodes[0].nodeValue);if(r.nodeName==="null")return null;if(r.nodeName==="true")return!0;if(r.nodeName==="false")return!1;throw new Error("Invalid PLIST tag "+r.nodeName)}}}}});var dje=O(N$=>{"use strict";N$.byteLength=yBt;N$.toByteArray=bBt;N$.fromByteArray=CBt;var Kh=[],sp=[],gBt=typeof Uint8Array<"u"?Uint8Array:Array,Zoe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(PC=0,lje=Zoe.length;PC<lje;++PC)Kh[PC]=Zoe[PC],sp[Zoe.charCodeAt(PC)]=PC;var PC,lje;sp[45]=62;sp[95]=63;function uje(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function yBt(r){var e=uje(r),t=e[0],n=e[1];return(t+n)*3/4-n}function vBt(r,e,t){return(e+t)*3/4-t}function bBt(r){var e,t=uje(r),n=t[0],i=t[1],s=new gBt(vBt(r,n,i)),o=0,a=i>0?n-4:n,c;for(c=0;c<a;c+=4)e=sp[r.charCodeAt(c)]<<18|sp[r.charCodeAt(c+1)]<<12|sp[r.charCodeAt(c+2)]<<6|sp[r.charCodeAt(c+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=sp[r.charCodeAt(c)]<<2|sp[r.charCodeAt(c+1)]>>4,s[o++]=e&255),i===1&&(e=sp[r.charCodeAt(c)]<<10|sp[r.charCodeAt(c+1)]<<4|sp[r.charCodeAt(c+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function _Bt(r){return Kh[r>>18&63]+Kh[r>>12&63]+Kh[r>>6&63]+Kh[r&63]}function SBt(r,e,t){for(var n,i=[],s=e;s<t;s+=3)n=(r[s]<<16&16711680)+(r[s+1]<<8&65280)+(r[s+2]&255),i.push(_Bt(n));return i.join("")}function CBt(r){for(var e,t=r.length,n=t%3,i=[],s=16383,o=0,a=t-n;o<a;o+=s)i.push(SBt(r,o,o+s>a?a:o+s));return n===1?(e=r[t-1],i.push(Kh[e>>2]+Kh[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(Kh[e>>10]+Kh[e>>4&63]+Kh[e<<2&63]+"=")),i.join("")}});var Qh=O((pje,rb)=>{(function(){var r,e,t,n,i,s,o,a={}.hasOwnProperty;r=function(c,...l){var u,d,p,m;if(i(Object.assign))Object.assign.apply(null,arguments);else for(u=0,p=l.length;u<p;u++)if(m=l[u],m!=null)for(d in m)a.call(m,d)&&(c[d]=m[d]);return c},i=function(c){return!!c&&Object.prototype.toString.call(c)==="[object Function]"},s=function(c){var l;return!!c&&((l=typeof c)=="function"||l==="object")},t=function(c){return i(Array.isArray)?Array.isArray(c):Object.prototype.toString.call(c)==="[object Array]"},n=function(c){var l;if(t(c))return!c.length;for(l in c)if(a.call(c,l))return!1;return!0},o=function(c){var l,u;return s(c)&&(u=Object.getPrototypeOf(c))&&(l=u.constructor)&&typeof l=="function"&&l instanceof l&&Function.prototype.toString.call(l)===Function.prototype.toString.call(Object)},e=function(c){return i(c.valueOf)?c.valueOf():c},rb.exports.assign=r,rb.exports.isFunction=i,rb.exports.isObject=s,rb.exports.isArray=t,rb.exports.isEmpty=n,rb.exports.isPlainObject=o,rb.exports.getValue=e}).call(pje)});var eae=O((mje,hje)=>{(function(){var r;hje.exports=r=class{hasFeature(t,n){return!0}createDocumentType(t,n,i){throw new Error("This DOM method is not implemented.")}createDocument(t,n,i){throw new Error("This DOM method is not implemented.")}createHTMLDocument(t){throw new Error("This DOM method is not implemented.")}getFeature(t,n){throw new Error("This DOM method is not implemented.")}}}).call(mje)});var yje=O((fje,gje)=>{(function(){var r;gje.exports=r=class{constructor(){}handleError(t){throw new Error(t)}}}).call(fje)});var _je=O((vje,bje)=>{(function(){var r;bje.exports=r=function(){class e{constructor(n){this.arr=n||[]}item(n){return this.arr[n]||null}contains(n){return this.arr.indexOf(n)!==-1}}return Object.defineProperty(e.prototype,"length",{get:function(){return this.arr.length}}),e}.call(this)}).call(vje)});var Pje=O((Sje,Cje)=>{(function(){var r,e,t;e=yje(),t=_je(),Cje.exports=r=function(){class n{constructor(){var s;this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new e,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=s=Object.create(this.defaultParams)}getParameter(s){return this.params.hasOwnProperty(s)?this.params[s]:null}canSetParameter(s,o){return!0}setParameter(s,o){return o!=null?this.params[s]=o:delete this.params[s]}}return Object.defineProperty(n.prototype,"parameterNames",{get:function(){return new t(Object.keys(this.defaultParams))}}),n}.call(this)}).call(Sje)});var na=O((wje,Eje)=>{(function(){Eje.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(wje)});var tae=O((Tje,Ije)=>{(function(){var r,e,t;r=na(),t=id(),Ije.exports=e=function(){class n{constructor(s,o,a){if(this.parent=s,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),o==null)throw new Error("Missing attribute name. "+this.debugInfo(o));this.name=this.stringify.name(o),this.value=this.stringify.attValue(a),this.type=r.Attribute,this.isId=!1,this.schemaTypeInfo=null}clone(){return Object.create(this)}toString(s){return this.options.writer.attribute(this,this.options.writer.filterOptions(s))}debugInfo(s){return s=s||this.name,s==null?"parent: <"+this.parent.name+">":"attribute: {"+s+"}, parent: <"+this.parent.name+">"}isEqualNode(s){return!(s.namespaceURI!==this.namespaceURI||s.prefix!==this.prefix||s.localName!==this.localName||s.value!==this.value)}}return Object.defineProperty(n.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(n.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(n.prototype,"textContent",{get:function(){return this.value},set:function(i){return this.value=i||""}}),Object.defineProperty(n.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(n.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(n.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(n.prototype,"specified",{get:function(){return!0}}),n}.call(this)}).call(Tje)});var D$=O((Rje,xje)=>{(function(){var r;xje.exports=r=function(){class e{constructor(n){this.nodes=n}clone(){return this.nodes=null}getNamedItem(n){return this.nodes[n]}setNamedItem(n){var i;return i=this.nodes[n.nodeName],this.nodes[n.nodeName]=n,i||null}removeNamedItem(n){var i;return i=this.nodes[n],delete this.nodes[n],i||null}item(n){return this.nodes[Object.keys(this.nodes)[n]]||null}getNamedItemNS(n,i){throw new Error("This DOM method is not implemented.")}setNamedItemNS(n){throw new Error("This DOM method is not implemented.")}removeNamedItemNS(n,i){throw new Error("This DOM method is not implemented.")}}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),e}.call(this)}).call(Rje)});var M$=O((Oje,Aje)=>{(function(){var r,e,t,n,i,s,o,a,c={}.hasOwnProperty;({isObject:a,isFunction:o,getValue:s}=Qh()),i=id(),r=na(),e=tae(),n=D$(),Aje.exports=t=function(){class l extends i{constructor(d,p,m){var f,y,v,_;if(super(d),p==null)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(p),this.type=r.Element,this.attribs={},this.schemaTypeInfo=null,m!=null&&this.attribute(m),d.type===r.Document&&(this.isRoot=!0,this.documentObject=d,d.rootObject=this,d.children)){for(_=d.children,y=0,v=_.length;y<v;y++)if(f=_[y],f.type===r.DocType){f.name=this.name;break}}}clone(){var d,p,m,f;m=Object.create(this),m.isRoot&&(m.documentObject=null),m.attribs={},f=this.attribs;for(p in f)c.call(f,p)&&(d=f[p],m.attribs[p]=d.clone());return m.children=[],this.children.forEach(function(y){var v;return v=y.clone(),v.parent=m,m.children.push(v)}),m}attribute(d,p){var m,f;if(d!=null&&(d=s(d)),a(d))for(m in d)c.call(d,m)&&(f=d[m],this.attribute(m,f));else o(p)&&(p=p.apply()),this.options.keepNullAttributes&&p==null?this.attribs[d]=new e(this,d,""):p!=null&&(this.attribs[d]=new e(this,d,p));return this}removeAttribute(d){var p,m,f;if(d==null)throw new Error("Missing attribute name. "+this.debugInfo());if(d=s(d),Array.isArray(d))for(m=0,f=d.length;m<f;m++)p=d[m],delete this.attribs[p];else delete this.attribs[d];return this}toString(d){return this.options.writer.element(this,this.options.writer.filterOptions(d))}att(d,p){return this.attribute(d,p)}a(d,p){return this.attribute(d,p)}getAttribute(d){return this.attribs.hasOwnProperty(d)?this.attribs[d].value:null}setAttribute(d,p){throw new Error("This DOM method is not implemented."+this.debugInfo())}getAttributeNode(d){return this.attribs.hasOwnProperty(d)?this.attribs[d]:null}setAttributeNode(d){throw new Error("This DOM method is not implemented."+this.debugInfo())}removeAttributeNode(d){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagName(d){throw new Error("This DOM method is not implemented."+this.debugInfo())}getAttributeNS(d,p){throw new Error("This DOM method is not implemented."+this.debugInfo())}setAttributeNS(d,p,m){throw new Error("This DOM method is not implemented."+this.debugInfo())}removeAttributeNS(d,p){throw new Error("This DOM method is not implemented."+this.debugInfo())}getAttributeNodeNS(d,p){throw new Error("This DOM method is not implemented."+this.debugInfo())}setAttributeNodeNS(d){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagNameNS(d,p){throw new Error("This DOM method is not implemented."+this.debugInfo())}hasAttribute(d){return this.attribs.hasOwnProperty(d)}hasAttributeNS(d,p){throw new Error("This DOM method is not implemented."+this.debugInfo())}setIdAttribute(d,p){return this.attribs.hasOwnProperty(d)?this.attribs[d].isId:p}setIdAttributeNS(d,p,m){throw new Error("This DOM method is not implemented."+this.debugInfo())}setIdAttributeNode(d,p){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagName(d){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagNameNS(d,p){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByClassName(d){throw new Error("This DOM method is not implemented."+this.debugInfo())}isEqualNode(d){var p,m,f;if(!super.isEqualNode(d)||d.namespaceURI!==this.namespaceURI||d.prefix!==this.prefix||d.localName!==this.localName||d.attribs.length!==this.attribs.length)return!1;for(p=m=0,f=this.attribs.length-1;0<=f?m<=f:m>=f;p=0<=f?++m:--m)if(!this.attribs[p].isEqualNode(d.attribs[p]))return!1;return!0}}return Object.defineProperty(l.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(l.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(l.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(l.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(l.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(l.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(l.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(l.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new n(this.attribs)),this.attributeMap}}),l}.call(this)}).call(Oje)});var tk=O((Nje,Dje)=>{(function(){var r,e;e=id(),Dje.exports=r=function(){class t extends e{constructor(i){super(i),this.value=""}clone(){return Object.create(this)}substringData(i,s){throw new Error("This DOM method is not implemented."+this.debugInfo())}appendData(i){throw new Error("This DOM method is not implemented."+this.debugInfo())}insertData(i,s){throw new Error("This DOM method is not implemented."+this.debugInfo())}deleteData(i,s){throw new Error("This DOM method is not implemented."+this.debugInfo())}replaceData(i,s,o){throw new Error("This DOM method is not implemented."+this.debugInfo())}isEqualNode(i){return!(!super.isEqualNode(i)||i.data!==this.data)}}return Object.defineProperty(t.prototype,"data",{get:function(){return this.value},set:function(n){return this.value=n||""}}),Object.defineProperty(t.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(t.prototype,"textContent",{get:function(){return this.value},set:function(n){return this.value=n||""}}),t}.call(this)}).call(Nje)});var k$=O((Mje,kje)=>{(function(){var r,e,t;r=na(),t=tk(),kje.exports=e=class extends t{constructor(i,s){if(super(i),s==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=r.CData,this.value=this.stringify.cdata(s)}clone(){return Object.create(this)}toString(i){return this.options.writer.cdata(this,this.options.writer.filterOptions(i))}}}).call(Mje)});var L$=O((Lje,qje)=>{(function(){var r,e,t;r=na(),e=tk(),qje.exports=t=class extends e{constructor(i,s){if(super(i),s==null)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=r.Comment,this.value=this.stringify.comment(s)}clone(){return Object.create(this)}toString(i){return this.options.writer.comment(this,this.options.writer.filterOptions(i))}}}).call(Lje)});var q$=O((zje,Fje)=>{(function(){var r,e,t,n;({isObject:n}=Qh()),t=id(),r=na(),Fje.exports=e=class extends t{constructor(s,o,a,c){super(s),n(o)&&({version:o,encoding:a,standalone:c}=o),o||(o="1.0"),this.type=r.Declaration,this.version=this.stringify.xmlVersion(o),a!=null&&(this.encoding=this.stringify.xmlEncoding(a)),c!=null&&(this.standalone=this.stringify.xmlStandalone(c))}toString(s){return this.options.writer.declaration(this,this.options.writer.filterOptions(s))}}}).call(zje)});var z$=O((jje,Uje)=>{(function(){var r,e,t;t=id(),r=na(),Uje.exports=e=class extends t{constructor(i,s,o,a,c,l){if(super(i),s==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(o==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(s));if(!a)throw new Error("Missing DTD attribute type. "+this.debugInfo(s));if(!c)throw new Error("Missing DTD attribute default. "+this.debugInfo(s));if(c.indexOf("#")!==0&&(c="#"+c),!c.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(s));if(l&&!c.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(s));this.elementName=this.stringify.name(s),this.type=r.AttributeDeclaration,this.attributeName=this.stringify.name(o),this.attributeType=this.stringify.dtdAttType(a),l&&(this.defaultValue=this.stringify.dtdAttDefault(l)),this.defaultValueType=c}toString(i){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(i))}}}).call(jje)});var F$=O((Bje,Gje)=>{(function(){var r,e,t,n;({isObject:n}=Qh()),t=id(),r=na(),Gje.exports=e=function(){class i extends t{constructor(o,a,c,l){if(super(o),c==null)throw new Error("Missing DTD entity name. "+this.debugInfo(c));if(l==null)throw new Error("Missing DTD entity value. "+this.debugInfo(c));if(this.pe=!!a,this.name=this.stringify.name(c),this.type=r.EntityDeclaration,!n(l))this.value=this.stringify.dtdEntityValue(l),this.internal=!0;else{if(!l.pubID&&!l.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(c));if(l.pubID&&!l.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(c));if(this.internal=!1,l.pubID!=null&&(this.pubID=this.stringify.dtdPubID(l.pubID)),l.sysID!=null&&(this.sysID=this.stringify.dtdSysID(l.sysID)),l.nData!=null&&(this.nData=this.stringify.dtdNData(l.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(c))}}toString(o){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(o))}}return Object.defineProperty(i.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(i.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(i.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(i.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(i.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(i.prototype,"xmlVersion",{get:function(){return null}}),i}.call(this)}).call(Bje)});var j$=O(($je,Vje)=>{(function(){var r,e,t;t=id(),r=na(),Vje.exports=e=class extends t{constructor(i,s,o){if(super(i),s==null)throw new Error("Missing DTD element name. "+this.debugInfo());o||(o="(#PCDATA)"),Array.isArray(o)&&(o="("+o.join(",")+")"),this.name=this.stringify.name(s),this.type=r.ElementDeclaration,this.value=this.stringify.dtdElementValue(o)}toString(i){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(i))}}}).call($je)});var U$=O((Hje,Wje)=>{(function(){var r,e,t;t=id(),r=na(),Wje.exports=e=function(){class n extends t{constructor(s,o,a){if(super(s),o==null)throw new Error("Missing DTD notation name. "+this.debugInfo(o));if(!a.pubID&&!a.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(o));this.name=this.stringify.name(o),this.type=r.NotationDeclaration,a.pubID!=null&&(this.pubID=this.stringify.dtdPubID(a.pubID)),a.sysID!=null&&(this.sysID=this.stringify.dtdSysID(a.sysID))}toString(s){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(s))}}return Object.defineProperty(n.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(n.prototype,"systemId",{get:function(){return this.sysID}}),n}.call(this)}).call(Hje)});var B$=O((Kje,Qje)=>{(function(){var r,e,t,n,i,s,o,a,c;({isObject:c}=Qh()),a=id(),r=na(),e=z$(),n=F$(),t=j$(),i=U$(),o=D$(),Qje.exports=s=function(){class l extends a{constructor(d,p,m){var f,y,v,_;if(super(d),this.type=r.DocType,d.children){for(_=d.children,y=0,v=_.length;y<v;y++)if(f=_[y],f.type===r.Element){this.name=f.name;break}}this.documentObject=d,c(p)&&({pubID:p,sysID:m}=p),m==null&&([m,p]=[p,m]),p!=null&&(this.pubID=this.stringify.dtdPubID(p)),m!=null&&(this.sysID=this.stringify.dtdSysID(m))}element(d,p){var m;return m=new t(this,d,p),this.children.push(m),this}attList(d,p,m,f,y){var v;return v=new e(this,d,p,m,f,y),this.children.push(v),this}entity(d,p){var m;return m=new n(this,!1,d,p),this.children.push(m),this}pEntity(d,p){var m;return m=new n(this,!0,d,p),this.children.push(m),this}notation(d,p){var m;return m=new i(this,d,p),this.children.push(m),this}toString(d){return this.options.writer.docType(this,this.options.writer.filterOptions(d))}ele(d,p){return this.element(d,p)}att(d,p,m,f,y){return this.attList(d,p,m,f,y)}ent(d,p){return this.entity(d,p)}pent(d,p){return this.pEntity(d,p)}not(d,p){return this.notation(d,p)}up(){return this.root()||this.documentObject}isEqualNode(d){return!(!super.isEqualNode(d)||d.name!==this.name||d.publicId!==this.publicId||d.systemId!==this.systemId)}}return Object.defineProperty(l.prototype,"entities",{get:function(){var u,d,p,m,f;for(m={},f=this.children,d=0,p=f.length;d<p;d++)u=f[d],u.type===r.EntityDeclaration&&!u.pe&&(m[u.name]=u);return new o(m)}}),Object.defineProperty(l.prototype,"notations",{get:function(){var u,d,p,m,f;for(m={},f=this.children,d=0,p=f.length;d<p;d++)u=f[d],u.type===r.NotationDeclaration&&(m[u.name]=u);return new o(m)}}),Object.defineProperty(l.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(l.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(l.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),l}.call(this)}).call(Kje)});var G$=O((Yje,Xje)=>{(function(){var r,e,t;r=na(),e=id(),Xje.exports=t=class extends e{constructor(i,s){if(super(i),s==null)throw new Error("Missing raw text. "+this.debugInfo());this.type=r.Raw,this.value=this.stringify.raw(s)}clone(){return Object.create(this)}toString(i){return this.options.writer.raw(this,this.options.writer.filterOptions(i))}}}).call(Yje)});var $$=O((Jje,Zje)=>{(function(){var r,e,t;r=na(),e=tk(),Zje.exports=t=function(){class n extends e{constructor(s,o){if(super(s),o==null)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=r.Text,this.value=this.stringify.text(o)}clone(){return Object.create(this)}toString(s){return this.options.writer.text(this,this.options.writer.filterOptions(s))}splitText(s){throw new Error("This DOM method is not implemented."+this.debugInfo())}replaceWholeText(s){throw new Error("This DOM method is not implemented."+this.debugInfo())}}return Object.defineProperty(n.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(n.prototype,"wholeText",{get:function(){var i,s,o;for(o="",s=this.previousSibling;s;)o=s.data+o,s=s.previousSibling;for(o+=this.data,i=this.nextSibling;i;)o=o+i.data,i=i.nextSibling;return o}}),n}.call(this)}).call(Jje)});var V$=O((eUe,tUe)=>{(function(){var r,e,t;r=na(),e=tk(),tUe.exports=t=class extends e{constructor(i,s,o){if(super(i),s==null)throw new Error("Missing instruction target. "+this.debugInfo());this.type=r.ProcessingInstruction,this.target=this.stringify.insTarget(s),this.name=this.target,o&&(this.value=this.stringify.insValue(o))}clone(){return Object.create(this)}toString(i){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(i))}isEqualNode(i){return!(!super.isEqualNode(i)||i.target!==this.target)}}}).call(eUe)});var rae=O((rUe,nUe)=>{(function(){var r,e,t;t=id(),r=na(),nUe.exports=e=class extends t{constructor(i){super(i),this.type=r.Dummy}clone(){return Object.create(this)}toString(i){return""}}}).call(rUe)});var oUe=O((iUe,sUe)=>{(function(){var r;sUe.exports=r=function(){class e{constructor(n){this.nodes=n}clone(){return this.nodes=null}item(n){return this.nodes[n]||null}}return Object.defineProperty(e.prototype,"length",{get:function(){return this.nodes.length||0}}),e}.call(this)}).call(iUe)});var lUe=O((aUe,cUe)=>{(function(){cUe.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(aUe)});var id=O((uUe,dUe)=>{(function(){var r,e,t,n,i,s,o,a,c,l,u,d,p,m,f,y,v,_,C={}.hasOwnProperty,P=[].splice;({isObject:_,isFunction:v,isEmpty:y,getValue:f}=Qh()),a=null,t=null,n=null,i=null,s=null,p=null,m=null,d=null,o=null,e=null,u=null,c=null,r=null,dUe.exports=l=function(){class w{constructor(I){this.parent=I,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,a||(a=M$(),t=k$(),n=L$(),i=q$(),s=B$(),p=G$(),m=$$(),d=V$(),o=rae(),e=na(),u=oUe(),c=D$(),r=lUe())}setParent(I){var z,G,L,H,ee;for(this.parent=I,I&&(this.options=I.options,this.stringify=I.stringify),H=this.children,ee=[],G=0,L=H.length;G<L;G++)z=H[G],ee.push(z.setParent(this));return ee}element(I,z,G){var L,H,ee,ye,$e,Be,Ct,Ge,pe;if(Be=null,z===null&&G==null&&([z,G]=[{},null]),z==null&&(z={}),z=f(z),_(z)||([G,z]=[z,G]),I!=null&&(I=f(I)),Array.isArray(I))for(ee=0,Ct=I.length;ee<Ct;ee++)H=I[ee],Be=this.element(H);else if(v(I))Be=this.element(I.apply());else if(_(I)){for($e in I)if(C.call(I,$e))if(pe=I[$e],v(pe)&&(pe=pe.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&$e.indexOf(this.stringify.convertAttKey)===0)Be=this.attribute($e.substr(this.stringify.convertAttKey.length),pe);else if(!this.options.separateArrayItems&&Array.isArray(pe)&&y(pe))Be=this.dummy();else if(_(pe)&&y(pe))Be=this.element($e);else if(!this.options.keepNullNodes&&pe==null)Be=this.dummy();else if(!this.options.separateArrayItems&&Array.isArray(pe))for(ye=0,Ge=pe.length;ye<Ge;ye++)H=pe[ye],L={},L[$e]=H,Be=this.element(L);else _(pe)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&$e.indexOf(this.stringify.convertTextKey)===0?Be=this.element(pe):(Be=this.element($e),Be.element(pe)):Be=this.element($e,pe)}else!this.options.keepNullNodes&&G===null?Be=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&I.indexOf(this.stringify.convertTextKey)===0?Be=this.text(G):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&I.indexOf(this.stringify.convertCDataKey)===0?Be=this.cdata(G):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&I.indexOf(this.stringify.convertCommentKey)===0?Be=this.comment(G):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&I.indexOf(this.stringify.convertRawKey)===0?Be=this.raw(G):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&I.indexOf(this.stringify.convertPIKey)===0?Be=this.instruction(I.substr(this.stringify.convertPIKey.length),G):Be=this.node(I,z,G);if(Be==null)throw new Error("Could not create any elements with: "+I+". "+this.debugInfo());return Be}insertBefore(I,z,G){var L,H,ee,ye,$e;if(I?.type)return ee=I,ye=z,ee.setParent(this),ye?(H=children.indexOf(ye),$e=children.splice(H),children.push(ee),Array.prototype.push.apply(children,$e)):children.push(ee),ee;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(I));return H=this.parent.children.indexOf(this),$e=this.parent.children.splice(H),L=this.parent.element(I,z,G),Array.prototype.push.apply(this.parent.children,$e),L}insertAfter(I,z,G){var L,H,ee;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(I));return H=this.parent.children.indexOf(this),ee=this.parent.children.splice(H+1),L=this.parent.element(I,z,G),Array.prototype.push.apply(this.parent.children,ee),L}remove(){var I,z;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return I=this.parent.children.indexOf(this),P.apply(this.parent.children,[I,I-I+1].concat(z=[])),this.parent}node(I,z,G){var L;return I!=null&&(I=f(I)),z||(z={}),z=f(z),_(z)||([G,z]=[z,G]),L=new a(this,I,z),G!=null&&L.text(G),this.children.push(L),L}text(I){var z;return _(I)&&this.element(I),z=new m(this,I),this.children.push(z),this}cdata(I){var z;return z=new t(this,I),this.children.push(z),this}comment(I){var z;return z=new n(this,I),this.children.push(z),this}commentBefore(I){var z,G,L;return G=this.parent.children.indexOf(this),L=this.parent.children.splice(G),z=this.parent.comment(I),Array.prototype.push.apply(this.parent.children,L),this}commentAfter(I){var z,G,L;return G=this.parent.children.indexOf(this),L=this.parent.children.splice(G+1),z=this.parent.comment(I),Array.prototype.push.apply(this.parent.children,L),this}raw(I){var z;return z=new p(this,I),this.children.push(z),this}dummy(){var I;return I=new o(this),I}instruction(I,z){var G,L,H,ee,ye;if(I!=null&&(I=f(I)),z!=null&&(z=f(z)),Array.isArray(I))for(ee=0,ye=I.length;ee<ye;ee++)G=I[ee],this.instruction(G);else if(_(I))for(G in I)C.call(I,G)&&(L=I[G],this.instruction(G,L));else v(z)&&(z=z.apply()),H=new d(this,I,z),this.children.push(H);return this}instructionBefore(I,z){var G,L,H;return L=this.parent.children.indexOf(this),H=this.parent.children.splice(L),G=this.parent.instruction(I,z),Array.prototype.push.apply(this.parent.children,H),this}instructionAfter(I,z){var G,L,H;return L=this.parent.children.indexOf(this),H=this.parent.children.splice(L+1),G=this.parent.instruction(I,z),Array.prototype.push.apply(this.parent.children,H),this}declaration(I,z,G){var L,H;return L=this.document(),H=new i(L,I,z,G),L.children.length===0?L.children.unshift(H):L.children[0].type===e.Declaration?L.children[0]=H:L.children.unshift(H),L.root()||L}dtd(I,z){var G,L,H,ee,ye,$e,Be,Ct,Ge,pe;for(L=this.document(),H=new s(L,I,z),Ge=L.children,ee=ye=0,Be=Ge.length;ye<Be;ee=++ye)if(G=Ge[ee],G.type===e.DocType)return L.children[ee]=H,H;for(pe=L.children,ee=$e=0,Ct=pe.length;$e<Ct;ee=++$e)if(G=pe[ee],G.isRoot)return L.children.splice(ee,0,H),H;return L.children.push(H),H}up(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent}root(){var I;for(I=this;I;){if(I.type===e.Document)return I.rootObject;if(I.isRoot)return I;I=I.parent}}document(){var I;for(I=this;I;){if(I.type===e.Document)return I;I=I.parent}}end(I){return this.document().end(I)}prev(){var I;if(I=this.parent.children.indexOf(this),I<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[I-1]}next(){var I;if(I=this.parent.children.indexOf(this),I===-1||I===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[I+1]}importDocument(I){var z,G,L,H,ee;if(G=I.root().clone(),G.parent=this,G.isRoot=!1,this.children.push(G),this.type===e.Document&&(G.isRoot=!0,G.documentObject=this,this.rootObject=G,this.children)){for(ee=this.children,L=0,H=ee.length;L<H;L++)if(z=ee[L],z.type===e.DocType){z.name=G.name;break}}return this}debugInfo(I){var z,G;return I=I||this.name,I==null&&!((z=this.parent)!=null&&z.name)?"":I==null?"parent: <"+this.parent.name+">":(G=this.parent)!=null&&G.name?"node: <"+I+">, parent: <"+this.parent.name+">":"node: <"+I+">"}ele(I,z,G){return this.element(I,z,G)}nod(I,z,G){return this.node(I,z,G)}txt(I){return this.text(I)}dat(I){return this.cdata(I)}com(I){return this.comment(I)}ins(I,z){return this.instruction(I,z)}doc(){return this.document()}dec(I,z,G){return this.declaration(I,z,G)}e(I,z,G){return this.element(I,z,G)}n(I,z,G){return this.node(I,z,G)}t(I){return this.text(I)}d(I){return this.cdata(I)}c(I){return this.comment(I)}r(I){return this.raw(I)}i(I,z){return this.instruction(I,z)}u(){return this.up()}importXMLBuilder(I){return this.importDocument(I)}attribute(I,z){throw new Error("attribute() applies to element nodes only.")}att(I,z){return this.attribute(I,z)}a(I,z){return this.attribute(I,z)}removeAttribute(I){throw new Error("attribute() applies to element nodes only.")}replaceChild(I,z){throw new Error("This DOM method is not implemented."+this.debugInfo())}removeChild(I){throw new Error("This DOM method is not implemented."+this.debugInfo())}appendChild(I){throw new Error("This DOM method is not implemented."+this.debugInfo())}hasChildNodes(){return this.children.length!==0}cloneNode(I){throw new Error("This DOM method is not implemented."+this.debugInfo())}normalize(){throw new Error("This DOM method is not implemented."+this.debugInfo())}isSupported(I,z){return!0}hasAttributes(){return this.attribs.length!==0}compareDocumentPosition(I){var z,G;return z=this,z===I?0:this.document()!==I.document()?(G=r.Disconnected|r.ImplementationSpecific,Math.random()<.5?G|=r.Preceding:G|=r.Following,G):z.isAncestor(I)?r.Contains|r.Preceding:z.isDescendant(I)?r.Contains|r.Following:z.isPreceding(I)?r.Preceding:r.Following}isSameNode(I){throw new Error("This DOM method is not implemented."+this.debugInfo())}lookupPrefix(I){throw new Error("This DOM method is not implemented."+this.debugInfo())}isDefaultNamespace(I){throw new Error("This DOM method is not implemented."+this.debugInfo())}lookupNamespaceURI(I){throw new Error("This DOM method is not implemented."+this.debugInfo())}isEqualNode(I){var z,G,L;if(I.nodeType!==this.nodeType||I.children.length!==this.children.length)return!1;for(z=G=0,L=this.children.length-1;0<=L?G<=L:G>=L;z=0<=L?++G:--G)if(!this.children[z].isEqualNode(I.children[z]))return!1;return!0}getFeature(I,z){throw new Error("This DOM method is not implemented."+this.debugInfo())}setUserData(I,z,G){throw new Error("This DOM method is not implemented."+this.debugInfo())}getUserData(I){throw new Error("This DOM method is not implemented."+this.debugInfo())}contains(I){return I?I===this||this.isDescendant(I):!1}isDescendant(I){var z,G,L,H,ee;for(ee=this.children,L=0,H=ee.length;L<H;L++)if(z=ee[L],I===z||(G=z.isDescendant(I),G))return!0;return!1}isAncestor(I){return I.isDescendant(this)}isPreceding(I){var z,G;return z=this.treePosition(I),G=this.treePosition(this),z===-1||G===-1?!1:z<G}isFollowing(I){var z,G;return z=this.treePosition(I),G=this.treePosition(this),z===-1||G===-1?!1:z>G}treePosition(I){var z,G;return G=0,z=!1,this.foreachTreeNode(this.document(),function(L){if(G++,!z&&L===I)return z=!0}),z?G:-1}foreachTreeNode(I,z){var G,L,H,ee,ye;for(I||(I=this.document()),ee=I.children,L=0,H=ee.length;L<H;L++){if(G=ee[L],ye=z(G))return ye;if(ye=this.foreachTreeNode(G,z),ye)return ye}}}return Object.defineProperty(w.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(w.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(w.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(w.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(w.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new u(this.children)),this.childNodeList}}),Object.defineProperty(w.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(w.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(w.prototype,"previousSibling",{get:function(){var R;return R=this.parent.children.indexOf(this),this.parent.children[R-1]||null}}),Object.defineProperty(w.prototype,"nextSibling",{get:function(){var R;return R=this.parent.children.indexOf(this),this.parent.children[R+1]||null}}),Object.defineProperty(w.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(w.prototype,"textContent",{get:function(){var R,I,z,G,L;if(this.nodeType===e.Element||this.nodeType===e.DocumentFragment){for(L="",G=this.children,I=0,z=G.length;I<z;I++)R=G[I],R.textContent&&(L+=R.textContent);return L}else return null},set:function(R){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),w}.call(this)}).call(uUe)});var nae=O((pUe,mUe)=>{(function(){var r,e={}.hasOwnProperty;mUe.exports=r=function(){class t{constructor(i){var s,o,a;this.assertLegalChar=this.assertLegalChar.bind(this),this.assertLegalName=this.assertLegalName.bind(this),i||(i={}),this.options=i,this.options.version||(this.options.version="1.0"),o=i.stringify||{};for(s in o)e.call(o,s)&&(a=o[s],this[s]=a)}name(i){return this.options.noValidation?i:this.assertLegalName(""+i||"")}text(i){return this.options.noValidation?i:this.assertLegalChar(this.textEscape(""+i||""))}cdata(i){return this.options.noValidation?i:(i=""+i||"",i=i.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(i))}comment(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+i);return this.assertLegalChar(i)}raw(i){return this.options.noValidation?i:""+i||""}attValue(i){return this.options.noValidation?i:this.assertLegalChar(this.attEscape(i=""+i||""))}insTarget(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")}insValue(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/\?>/))throw new Error("Invalid processing instruction value: "+i);return this.assertLegalChar(i)}xmlVersion(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+i);return i}xmlEncoding(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+i);return this.assertLegalChar(i)}xmlStandalone(i){return this.options.noValidation?i:i?"yes":"no"}dtdPubID(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")}dtdSysID(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")}dtdElementValue(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")}dtdAttType(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")}dtdAttDefault(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")}dtdEntityValue(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")}dtdNData(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")}assertLegalChar(i){var s,o;if(this.options.noValidation)return i;if(this.options.version==="1.0"){if(s=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/g,this.options.invalidCharReplacement!==void 0)i=i.replace(s,this.options.invalidCharReplacement);else if(o=i.match(s))throw new Error(`Invalid character in string: ${i} at index ${o.index}`)}else if(this.options.version==="1.1"){if(s=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/g,this.options.invalidCharReplacement!==void 0)i=i.replace(s,this.options.invalidCharReplacement);else if(o=i.match(s))throw new Error(`Invalid character in string: ${i} at index ${o.index}`)}return i}assertLegalName(i){var s;if(this.options.noValidation)return i;if(i=this.assertLegalChar(i),s=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!i.match(s))throw new Error(`Invalid character in name: ${i}`);return i}textEscape(i){var s;return this.options.noValidation?i:(s=this.options.noDoubleEncoding?/(?!&(lt|gt|amp|apos|quot);)&/g:/&/g,i.replace(s,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))}attEscape(i){var s;return this.options.noValidation?i:(s=this.options.noDoubleEncoding?/(?!&(lt|gt|amp|apos|quot);)&/g:/&/g,i.replace(s,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))}}return t.prototype.convertAttKey="@",t.prototype.convertPIKey="?",t.prototype.convertTextKey="#text",t.prototype.convertCDataKey="#cdata",t.prototype.convertCommentKey="#comment",t.prototype.convertRawKey="#raw",t}.call(this)}).call(pUe)});var rk=O((hUe,fUe)=>{(function(){fUe.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(hUe)});var iae=O((gUe,yUe)=>{(function(){var r,e,t,n,i,s,o,a,c,l,u,d,p,m,f,y,v,_={}.hasOwnProperty;({assign:v}=Qh()),r=na(),c=q$(),l=B$(),t=k$(),n=L$(),d=M$(),m=G$(),f=$$(),p=V$(),u=rae(),i=z$(),s=j$(),o=F$(),a=U$(),e=rk(),yUe.exports=y=class{constructor(P){var w,R,I;P||(P={}),this.options=P,R=P.writer||{};for(w in R)_.call(R,w)&&(I=R[w],this["_"+w]=this[w],this[w]=I)}filterOptions(P){var w,R,I,z,G,L,H,ee,ye;return P||(P={}),P=v({},this.options,P),w={writer:this},w.pretty=P.pretty||!1,w.allowEmpty=P.allowEmpty||!1,w.indent=(R=P.indent)!=null?R:"  ",w.newline=(I=P.newline)!=null?I:`
`,w.offset=(z=P.offset)!=null?z:0,w.width=(G=P.width)!=null?G:0,w.dontPrettyTextNodes=(L=(H=P.dontPrettyTextNodes)!=null?H:P.dontprettytextnodes)!=null?L:0,w.spaceBeforeSlash=(ee=(ye=P.spaceBeforeSlash)!=null?ye:P.spacebeforeslash)!=null?ee:"",w.spaceBeforeSlash===!0&&(w.spaceBeforeSlash=" "),w.suppressPrettyCount=0,w.user={},w.state=e.None,w}indent(P,w,R){var I;return!w.pretty||w.suppressPrettyCount?"":w.pretty&&(I=(R||0)+w.offset+1,I>0)?new Array(I).join(w.indent):""}endline(P,w,R){return!w.pretty||w.suppressPrettyCount?"":w.newline}attribute(P,w,R){var I;return this.openAttribute(P,w,R),w.pretty&&w.width>0?I=P.name+'="'+P.value+'"':I=" "+P.name+'="'+P.value+'"',this.closeAttribute(P,w,R),I}cdata(P,w,R){var I;return this.openNode(P,w,R),w.state=e.OpenTag,I=this.indent(P,w,R)+"<![CDATA[",w.state=e.InsideTag,I+=P.value,w.state=e.CloseTag,I+="]]>"+this.endline(P,w,R),w.state=e.None,this.closeNode(P,w,R),I}comment(P,w,R){var I;return this.openNode(P,w,R),w.state=e.OpenTag,I=this.indent(P,w,R)+"<!-- ",w.state=e.InsideTag,I+=P.value,w.state=e.CloseTag,I+=" -->"+this.endline(P,w,R),w.state=e.None,this.closeNode(P,w,R),I}declaration(P,w,R){var I;return this.openNode(P,w,R),w.state=e.OpenTag,I=this.indent(P,w,R)+"<?xml",w.state=e.InsideTag,I+=' version="'+P.version+'"',P.encoding!=null&&(I+=' encoding="'+P.encoding+'"'),P.standalone!=null&&(I+=' standalone="'+P.standalone+'"'),w.state=e.CloseTag,I+=w.spaceBeforeSlash+"?>",I+=this.endline(P,w,R),w.state=e.None,this.closeNode(P,w,R),I}docType(P,w,R){var I,z,G,L,H;if(R||(R=0),this.openNode(P,w,R),w.state=e.OpenTag,L=this.indent(P,w,R),L+="<!DOCTYPE "+P.root().name,P.pubID&&P.sysID?L+=' PUBLIC "'+P.pubID+'" "'+P.sysID+'"':P.sysID&&(L+=' SYSTEM "'+P.sysID+'"'),P.children.length>0){for(L+=" [",L+=this.endline(P,w,R),w.state=e.InsideTag,H=P.children,z=0,G=H.length;z<G;z++)I=H[z],L+=this.writeChildNode(I,w,R+1);w.state=e.CloseTag,L+="]"}return w.state=e.CloseTag,L+=w.spaceBeforeSlash+">",L+=this.endline(P,w,R),w.state=e.None,this.closeNode(P,w,R),L}element(P,w,R){var I,z,G,L,H,ee,ye,$e,Be,Ct,Ge,pe,Ie,Ve,lt,ut,ce,ue,Ue;if(R||(R=0),pe=!1,this.openNode(P,w,R),w.state=e.OpenTag,Ie=this.indent(P,w,R)+"<"+P.name,w.pretty&&w.width>0){$e=Ie.length,lt=P.attribs;for(Ge in lt)_.call(lt,Ge)&&(I=lt[Ge],Ve=this.attribute(I,w,R),z=Ve.length,$e+z>w.width?(Ue=this.indent(P,w,R+1)+Ve,Ie+=this.endline(P,w,R)+Ue,$e=Ue.length):(Ue=" "+Ve,Ie+=Ue,$e+=Ue.length))}else{ut=P.attribs;for(Ge in ut)_.call(ut,Ge)&&(I=ut[Ge],Ie+=this.attribute(I,w,R))}if(L=P.children.length,H=L===0?null:P.children[0],L===0||P.children.every(function(ct){return(ct.type===r.Text||ct.type===r.Raw||ct.type===r.CData)&&ct.value===""}))w.allowEmpty?(Ie+=">",w.state=e.CloseTag,Ie+="</"+P.name+">"+this.endline(P,w,R)):(w.state=e.CloseTag,Ie+=w.spaceBeforeSlash+"/>"+this.endline(P,w,R));else if(w.pretty&&L===1&&(H.type===r.Text||H.type===r.Raw||H.type===r.CData)&&H.value!=null)Ie+=">",w.state=e.InsideTag,w.suppressPrettyCount++,pe=!0,Ie+=this.writeChildNode(H,w,R+1),w.suppressPrettyCount--,pe=!1,w.state=e.CloseTag,Ie+="</"+P.name+">"+this.endline(P,w,R);else{if(w.dontPrettyTextNodes){for(ce=P.children,ee=0,Be=ce.length;ee<Be;ee++)if(G=ce[ee],(G.type===r.Text||G.type===r.Raw||G.type===r.CData)&&G.value!=null){w.suppressPrettyCount++,pe=!0;break}}for(Ie+=">"+this.endline(P,w,R),w.state=e.InsideTag,ue=P.children,ye=0,Ct=ue.length;ye<Ct;ye++)G=ue[ye],Ie+=this.writeChildNode(G,w,R+1);w.state=e.CloseTag,Ie+=this.indent(P,w,R)+"</"+P.name+">",pe&&w.suppressPrettyCount--,Ie+=this.endline(P,w,R),w.state=e.None}return this.closeNode(P,w,R),Ie}writeChildNode(P,w,R){switch(P.type){case r.CData:return this.cdata(P,w,R);case r.Comment:return this.comment(P,w,R);case r.Element:return this.element(P,w,R);case r.Raw:return this.raw(P,w,R);case r.Text:return this.text(P,w,R);case r.ProcessingInstruction:return this.processingInstruction(P,w,R);case r.Dummy:return"";case r.Declaration:return this.declaration(P,w,R);case r.DocType:return this.docType(P,w,R);case r.AttributeDeclaration:return this.dtdAttList(P,w,R);case r.ElementDeclaration:return this.dtdElement(P,w,R);case r.EntityDeclaration:return this.dtdEntity(P,w,R);case r.NotationDeclaration:return this.dtdNotation(P,w,R);default:throw new Error("Unknown XML node type: "+P.constructor.name)}}processingInstruction(P,w,R){var I;return this.openNode(P,w,R),w.state=e.OpenTag,I=this.indent(P,w,R)+"<?",w.state=e.InsideTag,I+=P.target,P.value&&(I+=" "+P.value),w.state=e.CloseTag,I+=w.spaceBeforeSlash+"?>",I+=this.endline(P,w,R),w.state=e.None,this.closeNode(P,w,R),I}raw(P,w,R){var I;return this.openNode(P,w,R),w.state=e.OpenTag,I=this.indent(P,w,R),w.state=e.InsideTag,I+=P.value,w.state=e.CloseTag,I+=this.endline(P,w,R),w.state=e.None,this.closeNode(P,w,R),I}text(P,w,R){var I;return this.openNode(P,w,R),w.state=e.OpenTag,I=this.indent(P,w,R),w.state=e.InsideTag,I+=P.value,w.state=e.CloseTag,I+=this.endline(P,w,R),w.state=e.None,this.closeNode(P,w,R),I}dtdAttList(P,w,R){var I;return this.openNode(P,w,R),w.state=e.OpenTag,I=this.indent(P,w,R)+"<!ATTLIST",w.state=e.InsideTag,I+=" "+P.elementName+" "+P.attributeName+" "+P.attributeType,P.defaultValueType!=="#DEFAULT"&&(I+=" "+P.defaultValueType),P.defaultValue&&(I+=' "'+P.defaultValue+'"'),w.state=e.CloseTag,I+=w.spaceBeforeSlash+">"+this.endline(P,w,R),w.state=e.None,this.closeNode(P,w,R),I}dtdElement(P,w,R){var I;return this.openNode(P,w,R),w.state=e.OpenTag,I=this.indent(P,w,R)+"<!ELEMENT",w.state=e.InsideTag,I+=" "+P.name+" "+P.value,w.state=e.CloseTag,I+=w.spaceBeforeSlash+">"+this.endline(P,w,R),w.state=e.None,this.closeNode(P,w,R),I}dtdEntity(P,w,R){var I;return this.openNode(P,w,R),w.state=e.OpenTag,I=this.indent(P,w,R)+"<!ENTITY",w.state=e.InsideTag,P.pe&&(I+=" %"),I+=" "+P.name,P.value?I+=' "'+P.value+'"':(P.pubID&&P.sysID?I+=' PUBLIC "'+P.pubID+'" "'+P.sysID+'"':P.sysID&&(I+=' SYSTEM "'+P.sysID+'"'),P.nData&&(I+=" NDATA "+P.nData)),w.state=e.CloseTag,I+=w.spaceBeforeSlash+">"+this.endline(P,w,R),w.state=e.None,this.closeNode(P,w,R),I}dtdNotation(P,w,R){var I;return this.openNode(P,w,R),w.state=e.OpenTag,I=this.indent(P,w,R)+"<!NOTATION",w.state=e.InsideTag,I+=" "+P.name,P.pubID&&P.sysID?I+=' PUBLIC "'+P.pubID+'" "'+P.sysID+'"':P.pubID?I+=' PUBLIC "'+P.pubID+'"':P.sysID&&(I+=' SYSTEM "'+P.sysID+'"'),w.state=e.CloseTag,I+=w.spaceBeforeSlash+">"+this.endline(P,w,R),w.state=e.None,this.closeNode(P,w,R),I}openNode(P,w,R){}closeNode(P,w,R){}openAttribute(P,w,R){}closeAttribute(P,w,R){}}}).call(gUe)});var H$=O((vUe,bUe)=>{(function(){var r,e;e=iae(),bUe.exports=r=class extends e{constructor(n){super(n)}document(n,i){var s,o,a,c,l;for(i=this.filterOptions(i),c="",l=n.children,o=0,a=l.length;o<a;o++)s=l[o],c+=this.writeChildNode(s,i,0);return i.pretty&&c.slice(-i.newline.length)===i.newline&&(c=c.slice(0,-i.newline.length)),c}}}).call(vUe)});var sae=O((_Ue,SUe)=>{(function(){var r,e,t,n,i,s,o,a;({isPlainObject:a}=Qh()),t=eae(),e=Pje(),i=id(),r=na(),o=nae(),s=H$(),SUe.exports=n=function(){class c extends i{constructor(u){super(null),this.name="#document",this.type=r.Document,this.documentURI=null,this.domConfig=new e,u||(u={}),u.writer||(u.writer=new s),this.options=u,this.stringify=new o(u)}end(u){var d;return d={},u?a(u)&&(d=u,u=this.options.writer):u=this.options.writer,u.document(this,u.filterOptions(d))}toString(u){return this.options.writer.document(this,this.options.writer.filterOptions(u))}createElement(u){throw new Error("This DOM method is not implemented."+this.debugInfo())}createDocumentFragment(){throw new Error("This DOM method is not implemented."+this.debugInfo())}createTextNode(u){throw new Error("This DOM method is not implemented."+this.debugInfo())}createComment(u){throw new Error("This DOM method is not implemented."+this.debugInfo())}createCDATASection(u){throw new Error("This DOM method is not implemented."+this.debugInfo())}createProcessingInstruction(u,d){throw new Error("This DOM method is not implemented."+this.debugInfo())}createAttribute(u){throw new Error("This DOM method is not implemented."+this.debugInfo())}createEntityReference(u){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagName(u){throw new Error("This DOM method is not implemented."+this.debugInfo())}importNode(u,d){throw new Error("This DOM method is not implemented."+this.debugInfo())}createElementNS(u,d){throw new Error("This DOM method is not implemented."+this.debugInfo())}createAttributeNS(u,d){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagNameNS(u,d){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementById(u){throw new Error("This DOM method is not implemented."+this.debugInfo())}adoptNode(u){throw new Error("This DOM method is not implemented."+this.debugInfo())}normalizeDocument(){throw new Error("This DOM method is not implemented."+this.debugInfo())}renameNode(u,d,p){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByClassName(u){throw new Error("This DOM method is not implemented."+this.debugInfo())}createEvent(u){throw new Error("This DOM method is not implemented."+this.debugInfo())}createRange(){throw new Error("This DOM method is not implemented."+this.debugInfo())}createNodeIterator(u,d,p){throw new Error("This DOM method is not implemented."+this.debugInfo())}createTreeWalker(u,d,p){throw new Error("This DOM method is not implemented."+this.debugInfo())}}return Object.defineProperty(c.prototype,"implementation",{value:new t}),Object.defineProperty(c.prototype,"doctype",{get:function(){var l,u,d,p;for(p=this.children,u=0,d=p.length;u<d;u++)if(l=p[u],l.type===r.DocType)return l;return null}}),Object.defineProperty(c.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(c.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(c.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(c.prototype,"xmlEncoding",{get:function(){return this.children.length!==0&&this.children[0].type===r.Declaration?this.children[0].encoding:null}}),Object.defineProperty(c.prototype,"xmlStandalone",{get:function(){return this.children.length!==0&&this.children[0].type===r.Declaration?this.children[0].standalone==="yes":!1}}),Object.defineProperty(c.prototype,"xmlVersion",{get:function(){return this.children.length!==0&&this.children[0].type===r.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(c.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(c.prototype,"origin",{get:function(){return null}}),Object.defineProperty(c.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(c.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(c.prototype,"contentType",{get:function(){return null}}),c}.call(this)}).call(_Ue)});var wUe=O((CUe,PUe)=>{(function(){var r,e,t,n,i,s,o,a,c,l,u,d,p,m,f,y,v,_,C,P,w,R,I,z={}.hasOwnProperty;({isObject:R,isFunction:w,isPlainObject:I,getValue:P}=Qh()),r=na(),d=sae(),m=M$(),n=k$(),i=L$(),y=G$(),C=$$(),f=V$(),l=q$(),u=B$(),s=z$(),a=F$(),o=j$(),c=U$(),t=tae(),_=nae(),v=H$(),e=rk(),PUe.exports=p=class{constructor(L,H,ee){var ye;this.name="?xml",this.type=r.Document,L||(L={}),ye={},L.writer?I(L.writer)&&(ye=L.writer,L.writer=new v):L.writer=new v,this.options=L,this.writer=L.writer,this.writerOptions=this.writer.filterOptions(ye),this.stringify=new _(L),this.onDataCallback=H||function(){},this.onEndCallback=ee||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}createChildNode(L){var H,ee,ye,$e,Be,Ct,Ge,pe;switch(L.type){case r.CData:this.cdata(L.value);break;case r.Comment:this.comment(L.value);break;case r.Element:ye={},Ge=L.attribs;for(ee in Ge)z.call(Ge,ee)&&(H=Ge[ee],ye[ee]=H.value);this.node(L.name,ye);break;case r.Dummy:this.dummy();break;case r.Raw:this.raw(L.value);break;case r.Text:this.text(L.value);break;case r.ProcessingInstruction:this.instruction(L.target,L.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+L.constructor.name)}for(pe=L.children,Be=0,Ct=pe.length;Be<Ct;Be++)$e=pe[Be],this.createChildNode($e),$e.type===r.Element&&this.up();return this}dummy(){return this}node(L,H,ee){if(L==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(L));return this.openCurrent(),L=P(L),H==null&&(H={}),H=P(H),R(H)||([ee,H]=[H,ee]),this.currentNode=new m(this,L,H),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,ee!=null&&this.text(ee),this}element(L,H,ee){var ye,$e,Be,Ct,Ge,pe;if(this.currentNode&&this.currentNode.type===r.DocType)this.dtdElement(...arguments);else if(Array.isArray(L)||R(L)||w(L))for(Ct=this.options.noValidation,this.options.noValidation=!0,pe=new d(this.options).element("TEMP_ROOT"),pe.element(L),this.options.noValidation=Ct,Ge=pe.children,$e=0,Be=Ge.length;$e<Be;$e++)ye=Ge[$e],this.createChildNode(ye),ye.type===r.Element&&this.up();else this.node(L,H,ee);return this}attribute(L,H){var ee,ye;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(L));if(L!=null&&(L=P(L)),R(L))for(ee in L)z.call(L,ee)&&(ye=L[ee],this.attribute(ee,ye));else w(H)&&(H=H.apply()),this.options.keepNullAttributes&&H==null?this.currentNode.attribs[L]=new t(this,L,""):H!=null&&(this.currentNode.attribs[L]=new t(this,L,H));return this}text(L){var H;return this.openCurrent(),H=new C(this,L),this.onData(this.writer.text(H,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}cdata(L){var H;return this.openCurrent(),H=new n(this,L),this.onData(this.writer.cdata(H,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}comment(L){var H;return this.openCurrent(),H=new i(this,L),this.onData(this.writer.comment(H,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}raw(L){var H;return this.openCurrent(),H=new y(this,L),this.onData(this.writer.raw(H,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}instruction(L,H){var ee,ye,$e,Be,Ct;if(this.openCurrent(),L!=null&&(L=P(L)),H!=null&&(H=P(H)),Array.isArray(L))for(ee=0,Be=L.length;ee<Be;ee++)ye=L[ee],this.instruction(ye);else if(R(L))for(ye in L)z.call(L,ye)&&($e=L[ye],this.instruction(ye,$e));else w(H)&&(H=H.apply()),Ct=new f(this,L,H),this.onData(this.writer.processingInstruction(Ct,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this}declaration(L,H,ee){var ye;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return ye=new l(this,L,H,ee),this.onData(this.writer.declaration(ye,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}doctype(L,H,ee){if(this.openCurrent(),L==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new u(this,H,ee),this.currentNode.rootNodeName=L,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this}dtdElement(L,H){var ee;return this.openCurrent(),ee=new o(this,L,H),this.onData(this.writer.dtdElement(ee,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}attList(L,H,ee,ye,$e){var Be;return this.openCurrent(),Be=new s(this,L,H,ee,ye,$e),this.onData(this.writer.dtdAttList(Be,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}entity(L,H){var ee;return this.openCurrent(),ee=new a(this,!1,L,H),this.onData(this.writer.dtdEntity(ee,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}pEntity(L,H){var ee;return this.openCurrent(),ee=new a(this,!0,L,H),this.onData(this.writer.dtdEntity(ee,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}notation(L,H){var ee;return this.openCurrent(),ee=new c(this,L,H),this.onData(this.writer.dtdNotation(ee,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}up(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this}end(){for(;this.currentLevel>=0;)this.up();return this.onEnd()}openCurrent(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)}openNode(L){var H,ee,ye,$e;if(!L.isOpen){if(!this.root&&this.currentLevel===0&&L.type===r.Element&&(this.root=L),ee="",L.type===r.Element){this.writerOptions.state=e.OpenTag,ee=this.writer.indent(L,this.writerOptions,this.currentLevel)+"<"+L.name,$e=L.attribs;for(ye in $e)z.call($e,ye)&&(H=$e[ye],ee+=this.writer.attribute(H,this.writerOptions,this.currentLevel));ee+=(L.children?">":"/>")+this.writer.endline(L,this.writerOptions,this.currentLevel),this.writerOptions.state=e.InsideTag}else this.writerOptions.state=e.OpenTag,ee=this.writer.indent(L,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+L.rootNodeName,L.pubID&&L.sysID?ee+=' PUBLIC "'+L.pubID+'" "'+L.sysID+'"':L.sysID&&(ee+=' SYSTEM "'+L.sysID+'"'),L.children?(ee+=" [",this.writerOptions.state=e.InsideTag):(this.writerOptions.state=e.CloseTag,ee+=">"),ee+=this.writer.endline(L,this.writerOptions,this.currentLevel);return this.onData(ee,this.currentLevel),L.isOpen=!0}}closeNode(L){var H;if(!L.isClosed)return H="",this.writerOptions.state=e.CloseTag,L.type===r.Element?H=this.writer.indent(L,this.writerOptions,this.currentLevel)+"</"+L.name+">"+this.writer.endline(L,this.writerOptions,this.currentLevel):H=this.writer.indent(L,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(L,this.writerOptions,this.currentLevel),this.writerOptions.state=e.None,this.onData(H,this.currentLevel),L.isClosed=!0}onData(L,H){return this.documentStarted=!0,this.onDataCallback(L,H+1)}onEnd(){return this.documentCompleted=!0,this.onEndCallback()}debugInfo(L){return L==null?"":"node: <"+L+">"}ele(){return this.element(...arguments)}nod(L,H,ee){return this.node(L,H,ee)}txt(L){return this.text(L)}dat(L){return this.cdata(L)}com(L){return this.comment(L)}ins(L,H){return this.instruction(L,H)}dec(L,H,ee){return this.declaration(L,H,ee)}dtd(L,H,ee){return this.doctype(L,H,ee)}e(L,H,ee){return this.element(L,H,ee)}n(L,H,ee){return this.node(L,H,ee)}t(L){return this.text(L)}d(L){return this.cdata(L)}c(L){return this.comment(L)}r(L){return this.raw(L)}i(L,H){return this.instruction(L,H)}att(){return this.currentNode&&this.currentNode.type===r.DocType?this.attList(...arguments):this.attribute(...arguments)}a(){return this.currentNode&&this.currentNode.type===r.DocType?this.attList(...arguments):this.attribute(...arguments)}ent(L,H){return this.entity(L,H)}pent(L,H){return this.pEntity(L,H)}not(L,H){return this.notation(L,H)}}}).call(CUe)});var IUe=O((EUe,TUe)=>{(function(){var r,e,t,n,i={}.hasOwnProperty;r=na(),n=iae(),e=rk(),TUe.exports=t=class extends n{constructor(o,a){super(a),this.stream=o}endline(o,a,c){return o.isLastRootNode&&a.state===e.CloseTag?"":super.endline(o,a,c)}document(o,a){var c,l,u,d,p,m,f,y,v;for(f=o.children,l=u=0,p=f.length;u<p;l=++u)c=f[l],c.isLastRootNode=l===o.children.length-1;for(a=this.filterOptions(a),y=o.children,v=[],d=0,m=y.length;d<m;d++)c=y[d],v.push(this.writeChildNode(c,a,0));return v}cdata(o,a,c){return this.stream.write(super.cdata(o,a,c))}comment(o,a,c){return this.stream.write(super.comment(o,a,c))}declaration(o,a,c){return this.stream.write(super.declaration(o,a,c))}docType(o,a,c){var l,u,d,p;if(c||(c=0),this.openNode(o,a,c),a.state=e.OpenTag,this.stream.write(this.indent(o,a,c)),this.stream.write("<!DOCTYPE "+o.root().name),o.pubID&&o.sysID?this.stream.write(' PUBLIC "'+o.pubID+'" "'+o.sysID+'"'):o.sysID&&this.stream.write(' SYSTEM "'+o.sysID+'"'),o.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(o,a,c)),a.state=e.InsideTag,p=o.children,u=0,d=p.length;u<d;u++)l=p[u],this.writeChildNode(l,a,c+1);a.state=e.CloseTag,this.stream.write("]")}return a.state=e.CloseTag,this.stream.write(a.spaceBeforeSlash+">"),this.stream.write(this.endline(o,a,c)),a.state=e.None,this.closeNode(o,a,c)}element(o,a,c){var l,u,d,p,m,f,y,v,_,C,P,w,R,I,z,G;if(c||(c=0),this.openNode(o,a,c),a.state=e.OpenTag,P=this.indent(o,a,c)+"<"+o.name,a.pretty&&a.width>0){y=P.length,R=o.attribs;for(_ in R)i.call(R,_)&&(l=R[_],w=this.attribute(l,a,c),u=w.length,y+u>a.width?(G=this.indent(o,a,c+1)+w,P+=this.endline(o,a,c)+G,y=G.length):(G=" "+w,P+=G,y+=G.length))}else{I=o.attribs;for(_ in I)i.call(I,_)&&(l=I[_],P+=this.attribute(l,a,c))}if(this.stream.write(P),p=o.children.length,m=p===0?null:o.children[0],p===0||o.children.every(function(L){return(L.type===r.Text||L.type===r.Raw||L.type===r.CData)&&L.value===""}))a.allowEmpty?(this.stream.write(">"),a.state=e.CloseTag,this.stream.write("</"+o.name+">")):(a.state=e.CloseTag,this.stream.write(a.spaceBeforeSlash+"/>"));else if(a.pretty&&p===1&&(m.type===r.Text||m.type===r.Raw||m.type===r.CData)&&m.value!=null)this.stream.write(">"),a.state=e.InsideTag,a.suppressPrettyCount++,C=!0,this.writeChildNode(m,a,c+1),a.suppressPrettyCount--,C=!1,a.state=e.CloseTag,this.stream.write("</"+o.name+">");else{for(this.stream.write(">"+this.endline(o,a,c)),a.state=e.InsideTag,z=o.children,f=0,v=z.length;f<v;f++)d=z[f],this.writeChildNode(d,a,c+1);a.state=e.CloseTag,this.stream.write(this.indent(o,a,c)+"</"+o.name+">")}return this.stream.write(this.endline(o,a,c)),a.state=e.None,this.closeNode(o,a,c)}processingInstruction(o,a,c){return this.stream.write(super.processingInstruction(o,a,c))}raw(o,a,c){return this.stream.write(super.raw(o,a,c))}text(o,a,c){return this.stream.write(super.text(o,a,c))}dtdAttList(o,a,c){return this.stream.write(super.dtdAttList(o,a,c))}dtdElement(o,a,c){return this.stream.write(super.dtdElement(o,a,c))}dtdEntity(o,a,c){return this.stream.write(super.dtdEntity(o,a,c))}dtdNotation(o,a,c){return this.stream.write(super.dtdNotation(o,a,c))}}}).call(EUe)});var xUe=O((RUe,nb)=>{(function(){var r,e,t,n,i,s,o,a,c;({assign:a,isFunction:c}=Qh()),t=eae(),n=sae(),i=wUe(),o=H$(),s=IUe(),r=na(),e=rk(),nb.exports.create=function(l,u,d,p){var m,f;if(l==null)throw new Error("Root element needs a name.");return p=a({},u,d,p),m=new n(p),f=m.element(l),p.headless||(m.declaration(p),(p.pubID!=null||p.sysID!=null)&&m.dtd(p)),f},nb.exports.begin=function(l,u,d){return c(l)&&([u,d]=[l,u],l={}),u?new i(l,u,d):new n(l)},nb.exports.stringWriter=function(l){return new o(l)},nb.exports.streamWriter=function(l,u){return new s(l,u)},nb.exports.implementation=new t,nb.exports.nodeType=r,nb.exports.writerState=e}).call(RUe)});var DUe=O(NUe=>{var OUe=dje(),PBt=xUe();NUe.build=TBt;function wBt(r){function e(t){return t<10?"0"+t:t}return r.getUTCFullYear()+"-"+e(r.getUTCMonth()+1)+"-"+e(r.getUTCDate())+"T"+e(r.getUTCHours())+":"+e(r.getUTCMinutes())+":"+e(r.getUTCSeconds())+"Z"}var EBt=Object.prototype.toString;function AUe(r){var e=EBt.call(r).match(/\[object (.*)\]/);return e&&e[1]}function TBt(r,e){var t={version:"1.0",encoding:"UTF-8"},n={pubid:"-//Apple//DTD PLIST 1.0//EN",sysid:"http://www.apple.com/DTDs/PropertyList-1.0.dtd"},i=PBt.create("plist");return i.dec(t.version,t.encoding,t.standalone),i.dtd(n.pubid,n.sysid),i.att("version","1.0"),oae(r,i),e||(e={}),e.pretty=e.pretty!==!1,i.end(e)}function oae(r,e){var t,n,i,s=AUe(r);if(s!="Undefined")if(Array.isArray(r))for(e=e.ele("array"),n=0;n<r.length;n++)oae(r[n],e);else if(Buffer.isBuffer(r))e.ele("data").raw(r.toString("base64"));else if(s=="Object"){e=e.ele("dict");for(i in r)r.hasOwnProperty(i)&&(e.ele("key").txt(i),oae(r[i],e))}else s=="Number"?(t=r%1===0?"integer":"real",e.ele(t).txt(r.toString())):s=="Date"?e.ele("date").txt(wBt(new Date(r))):s=="Boolean"?e.ele(r?"true":"false"):s=="String"?e.ele("string").txt(r):s=="ArrayBuffer"?e.ele("data").raw(OUe.fromByteArray(r)):r&&r.buffer&&AUe(r.buffer)=="ArrayBuffer"?e.ele("data").raw(OUe.fromByteArray(new Uint8Array(r.buffer),e)):s==="Null"&&e.ele("null").txt("")}});var LUe=O(aae=>{var MUe=cje();Object.keys(MUe).forEach(function(r){aae[r]=MUe[r]});var kUe=DUe();Object.keys(kUe).forEach(function(r){aae[r]=kUe[r]})});var QBe=O((bIr,KBe)=>{KBe.exports=YV;function YV(){this.pending=0,this.max=1/0,this.listeners=[],this.waiting=[],this.error=null}YV.prototype.go=function(r){this.pending<this.max?WBe(this,r):this.waiting.push(r)};YV.prototype.wait=function(r){this.pending===0?r(this.error):this.listeners.push(r)};YV.prototype.hold=function(){return HBe(this)};function HBe(r){r.pending+=1;var e=!1;return t;function t(i){if(e)throw new Error("callback called twice");if(e=!0,r.error=r.error||i,r.pending-=1,r.waiting.length>0&&r.pending<r.max)WBe(r,r.waiting.shift());else if(r.pending===0){var s=r.listeners;r.listeners=[],s.forEach(n)}}function n(i){i(r.error)}}function WBe(r,e){e(HBe(r))}});var XBe=O(kk=>{var Mk=require("fs"),XV=require("util"),wce=require("stream"),YBe=wce.Readable,Ece=wce.Writable,n2t=wce.PassThrough,i2t=QBe(),JV=require("events").EventEmitter;kk.createFromBuffer=s2t;kk.createFromFd=o2t;kk.BufferSlicer=Vg;kk.FdSlicer=$g;XV.inherits($g,JV);function $g(r,e){e=e||{},JV.call(this),this.fd=r,this.pend=new i2t,this.pend.max=1,this.refCount=0,this.autoClose=!!e.autoClose}$g.prototype.read=function(r,e,t,n,i){var s=this;s.pend.go(function(o){Mk.read(s.fd,r,e,t,n,function(a,c,l){o(),i(a,c,l)})})};$g.prototype.write=function(r,e,t,n,i){var s=this;s.pend.go(function(o){Mk.write(s.fd,r,e,t,n,function(a,c,l){o(),i(a,c,l)})})};$g.prototype.createReadStream=function(r){return new ZV(this,r)};$g.prototype.createWriteStream=function(r){return new eH(this,r)};$g.prototype.ref=function(){this.refCount+=1};$g.prototype.unref=function(){var r=this;if(r.refCount-=1,r.refCount>0)return;if(r.refCount<0)throw new Error("invalid unref");r.autoClose&&Mk.close(r.fd,e);function e(t){t?r.emit("error",t):r.emit("close")}};XV.inherits(ZV,YBe);function ZV(r,e){e=e||{},YBe.call(this,e),this.context=r,this.context.ref(),this.start=e.start||0,this.endOffset=e.end,this.pos=this.start,this.destroyed=!1}ZV.prototype._read=function(r){var e=this;if(!e.destroyed){var t=Math.min(e._readableState.highWaterMark,r);if(e.endOffset!=null&&(t=Math.min(t,e.endOffset-e.pos)),t<=0){e.destroyed=!0,e.push(null),e.context.unref();return}e.context.pend.go(function(n){if(e.destroyed)return n();var i=Buffer.allocUnsafe(t);Mk.read(e.context.fd,i,0,t,e.pos,function(s,o){s?e.destroy(s):o===0?(e.destroyed=!0,e.push(null),e.context.unref()):(e.pos+=o,e.push(i.slice(0,o))),n()})})}};ZV.prototype.destroy=function(r){this.destroyed||(r=r||new Error("stream destroyed"),this.destroyed=!0,this.emit("error",r),this.context.unref())};XV.inherits(eH,Ece);function eH(r,e){e=e||{},Ece.call(this,e),this.context=r,this.context.ref(),this.start=e.start||0,this.endOffset=e.end==null?1/0:+e.end,this.bytesWritten=0,this.pos=this.start,this.destroyed=!1,this.on("finish",this.destroy.bind(this))}eH.prototype._write=function(r,e,t){var n=this;if(!n.destroyed){if(n.pos+r.length>n.endOffset){var i=new Error("maximum file length exceeded");i.code="ETOOBIG",n.destroy(),t(i);return}n.context.pend.go(function(s){if(n.destroyed)return s();Mk.write(n.context.fd,r,0,r.length,n.pos,function(o,a){o?(n.destroy(),s(),t(o)):(n.bytesWritten+=a,n.pos+=a,n.emit("progress"),s(),t())})})}};eH.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.context.unref())};XV.inherits(Vg,JV);function Vg(r,e){JV.call(this),e=e||{},this.refCount=0,this.buffer=r,this.maxChunkSize=e.maxChunkSize||Number.MAX_SAFE_INTEGER}Vg.prototype.read=function(r,e,t,n,i){if(!(0<=e&&e<=r.length))throw new RangeError("offset outside buffer: 0 <= "+e+" <= "+r.length);if(n<0)throw new RangeError("position is negative: "+n);if(e+t>r.length&&(t=r.length-e),n+t>this.buffer.length&&(t=this.buffer.length-n),t<=0){setImmediate(function(){i(null,0)});return}this.buffer.copy(r,e,n,n+t),setImmediate(function(){i(null,t)})};Vg.prototype.write=function(r,e,t,n,i){r.copy(this.buffer,n,e,e+t),setImmediate(function(){i(null,t,r)})};Vg.prototype.createReadStream=function(r){r=r||{};var e=new n2t(r);e.destroyed=!1,e.start=r.start||0,e.endOffset=r.end,e.pos=e.endOffset||this.buffer.length;for(var t=this.buffer.slice(e.start,e.pos),n=0;;){var i=n+this.maxChunkSize;if(i>=t.length){n<t.length&&e.write(t.slice(n,t.length));break}e.write(t.slice(n,i)),n=i}return e.end(),e.destroy=function(){e.destroyed=!0},e};Vg.prototype.createWriteStream=function(r){var e=this;r=r||{};var t=new Ece(r);return t.start=r.start||0,t.endOffset=r.end==null?this.buffer.length:+r.end,t.bytesWritten=0,t.pos=t.start,t.destroyed=!1,t._write=function(n,i,s){if(!t.destroyed){var o=t.pos+n.length;if(o>t.endOffset){var a=new Error("maximum file length exceeded");a.code="ETOOBIG",t.destroyed=!0,s(a);return}n.copy(e.buffer,t.pos,0,n.length),t.bytesWritten+=n.length,t.pos=o,t.emit("progress"),s()}},t.destroy=function(){t.destroyed=!0},t};Vg.prototype.ref=function(){this.refCount+=1};Vg.prototype.unref=function(){if(this.refCount-=1,this.refCount<0)throw new Error("invalid unref")};function s2t(r,e){return new Vg(r,e)}function o2t(r,e){return new $g(r,e)}});var eGe=O((SIr,ZBe)=>{var vb=require("buffer").Buffer,Tce=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array<"u"&&(Tce=new Int32Array(Tce));function JBe(r){if(vb.isBuffer(r))return r;var e=typeof vb.alloc=="function"&&typeof vb.from=="function";if(typeof r=="number")return e?vb.alloc(r):new vb(r);if(typeof r=="string")return e?vb.from(r):new vb(r);throw new Error("input must be buffer, number, or string, received "+typeof r)}function a2t(r){var e=JBe(4);return e.writeInt32BE(r,0),e}function Ice(r,e){r=JBe(r),vb.isBuffer(e)&&(e=e.readUInt32BE(0));for(var t=~~e^-1,n=0;n<r.length;n++)t=Tce[(t^r[n])&255]^t>>>8;return t^-1}function Rce(){return a2t(Ice.apply(null,arguments))}Rce.signed=function(){return Ice.apply(null,arguments)};Rce.unsigned=function(){return Ice.apply(null,arguments)>>>0};ZBe.exports=Rce});var uGe=O(cd=>{var xce=require("fs"),c2t=require("zlib"),tGe=XBe(),l2t=eGe(),nH=require("util"),iH=require("events").EventEmitter,rGe=require("stream").Transform,Ace=require("stream").PassThrough,u2t=require("stream").Writable;cd.open=d2t;cd.fromFd=nGe;cd.fromBuffer=p2t;cd.fromRandomAccessReader=Nce;cd.dosDateTimeToDate=oGe;cd.getFileNameLowLevel=aGe;cd.validateFileName=cGe;cd.parseExtraFields=lGe;cd.ZipFile=of;cd.Entry=Lk;cd.LocalFileHeader=sGe;cd.RandomAccessReader=bb;function d2t(r,e,t){typeof e=="function"&&(t=e,e=null),e==null&&(e={}),e.autoClose==null&&(e.autoClose=!0),e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1),t==null&&(t=rH),xce.open(r,"r",function(n,i){if(n)return t(n);nGe(i,e,function(s,o){s&&xce.close(i,rH),t(s,o)})})}function nGe(r,e,t){typeof e=="function"&&(t=e,e=null),e==null&&(e={}),e.autoClose==null&&(e.autoClose=!1),e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1),t==null&&(t=rH),xce.fstat(r,function(n,i){if(n)return t(n);var s=tGe.createFromFd(r,{autoClose:!0});Nce(s,i.size,e,t)})}function p2t(r,e,t){typeof e=="function"&&(t=e,e=null),e==null&&(e={}),e.autoClose=!1,e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1);var n=tGe.createFromBuffer(r,{maxChunkSize:65536});Nce(n,r.length,e,t)}function Nce(r,e,t,n){typeof t=="function"&&(n=t,t=null),t==null&&(t={}),t.autoClose==null&&(t.autoClose=!0),t.lazyEntries==null&&(t.lazyEntries=!1),t.decodeStrings==null&&(t.decodeStrings=!0);var i=!!t.decodeStrings;if(t.validateEntrySizes==null&&(t.validateEntrySizes=!0),t.strictFileNames==null&&(t.strictFileNames=!1),n==null&&(n=rH),typeof e!="number")throw new Error("expected totalSize parameter to be a number");if(e>Number.MAX_SAFE_INTEGER)throw new Error("zip file too large. only file sizes up to 2^52 are supported due to JavaScript's Number type being an IEEE 754 double.");r.ref();var s=22,o=20,a=65535,c=Math.min(o+s+a,e),l=Hg(c),u=e-l.length;M0(r,l,0,c,u,function(d){if(d)return n(d);for(var p=c-s;p>=0;p-=1)if(l.readUInt32LE(p)===101010256){var m=l.subarray(p),f=m.readUInt16LE(4),y=m.readUInt16LE(10),v=m.readUInt32LE(16),_=m.readUInt16LE(20),C=m.length-s;if(_!==C)return n(new Error("Invalid comment length. Expected: "+C+". Found: "+_+". Are there extra bytes at the end of the file? Or is the end of central dir signature `PK\u263A\u263B` in the comment?"));var P=i?tH(m.subarray(22),!1):m.subarray(22);if(p-o>=0&&l.readUInt32LE(p-o)===117853008){var w=l.subarray(p-o,p-o+o),R=D0(w,8),I=Hg(56);return M0(r,I,0,I.length,R,function(z){return z?n(z):I.readUInt32LE(0)!==101075792?n(new Error("invalid zip64 end of central directory record signature")):(f=I.readUInt32LE(16),f!==0?n(new Error("multi-disk zip files are not supported: found disk number: "+f)):(y=D0(I,32),v=D0(I,48),n(null,new of(r,v,e,y,P,t.autoClose,t.lazyEntries,i,t.validateEntrySizes,t.strictFileNames))))})}return f!==0?n(new Error("multi-disk zip files are not supported: found disk number: "+f)):n(null,new of(r,v,e,y,P,t.autoClose,t.lazyEntries,i,t.validateEntrySizes,t.strictFileNames))}n(new Error("End of central directory record signature not found. Either not a zip file, or file is truncated."))})}nH.inherits(of,iH);function of(r,e,t,n,i,s,o,a,c,l){var u=this;iH.call(u),u.reader=r,u.reader.on("error",function(d){iGe(u,d)}),u.reader.once("close",function(){u.emit("close")}),u.readEntryCursor=e,u.fileSize=t,u.entryCount=n,u.comment=i,u.entriesRead=0,u.autoClose=!!s,u.lazyEntries=!!o,u.decodeStrings=!!a,u.validateEntrySizes=!!c,u.strictFileNames=!!l,u.isOpen=!0,u.emittedError=!1,u.lazyEntries||u._readEntry()}of.prototype.close=function(){this.isOpen&&(this.isOpen=!1,this.reader.unref())};function sf(r,e){r.autoClose&&r.close(),iGe(r,e)}function iGe(r,e){r.emittedError||(r.emittedError=!0,r.emit("error",e))}of.prototype.readEntry=function(){if(!this.lazyEntries)throw new Error("readEntry() called without lazyEntries:true");this._readEntry()};of.prototype._readEntry=function(){var r=this;if(r.entryCount===r.entriesRead){setImmediate(function(){r.autoClose&&r.close(),!r.emittedError&&r.emit("end")});return}if(!r.emittedError){var e=Hg(46);M0(r.reader,e,0,e.length,r.readEntryCursor,function(t){if(t)return sf(r,t);if(!r.emittedError){var n=new Lk,i=e.readUInt32LE(0);if(i!==33639248)return sf(r,new Error("invalid central directory file header signature: 0x"+i.toString(16)));if(n.versionMadeBy=e.readUInt16LE(4),n.versionNeededToExtract=e.readUInt16LE(6),n.generalPurposeBitFlag=e.readUInt16LE(8),n.compressionMethod=e.readUInt16LE(10),n.lastModFileTime=e.readUInt16LE(12),n.lastModFileDate=e.readUInt16LE(14),n.crc32=e.readUInt32LE(16),n.compressedSize=e.readUInt32LE(20),n.uncompressedSize=e.readUInt32LE(24),n.fileNameLength=e.readUInt16LE(28),n.extraFieldLength=e.readUInt16LE(30),n.fileCommentLength=e.readUInt16LE(32),n.internalFileAttributes=e.readUInt16LE(36),n.externalFileAttributes=e.readUInt32LE(38),n.relativeOffsetOfLocalHeader=e.readUInt32LE(42),n.generalPurposeBitFlag&64)return sf(r,new Error("strong encryption is not supported"));r.readEntryCursor+=46,e=Hg(n.fileNameLength+n.extraFieldLength+n.fileCommentLength),M0(r.reader,e,0,e.length,r.readEntryCursor,function(s){if(s)return sf(r,s);if(!r.emittedError){n.fileNameRaw=e.subarray(0,n.fileNameLength);var o=n.fileNameLength+n.extraFieldLength;n.extraFieldRaw=e.subarray(n.fileNameLength,o),n.fileCommentRaw=e.subarray(o,o+n.fileCommentLength);try{n.extraFields=lGe(n.extraFieldRaw)}catch(y){return sf(r,y)}if(r.decodeStrings){var a=(n.generalPurposeBitFlag&2048)!==0;n.fileComment=tH(n.fileCommentRaw,a),n.fileName=aGe(n.generalPurposeBitFlag,n.fileNameRaw,n.extraFields,r.strictFileNames);var c=cGe(n.fileName);if(c!=null)return sf(r,new Error(c))}else n.fileComment=n.fileCommentRaw,n.fileName=n.fileNameRaw;n.comment=n.fileComment,r.readEntryCursor+=e.length,r.entriesRead+=1;for(var l=0;l<n.extraFields.length;l++){var u=n.extraFields[l];if(u.id===1){var d=u.data,p=0;if(n.uncompressedSize===4294967295){if(p+8>d.length)return sf(r,new Error("zip64 extended information extra field does not include uncompressed size"));n.uncompressedSize=D0(d,p),p+=8}if(n.compressedSize===4294967295){if(p+8>d.length)return sf(r,new Error("zip64 extended information extra field does not include compressed size"));n.compressedSize=D0(d,p),p+=8}if(n.relativeOffsetOfLocalHeader===4294967295){if(p+8>d.length)return sf(r,new Error("zip64 extended information extra field does not include relative header offset"));n.relativeOffsetOfLocalHeader=D0(d,p),p+=8}break}}if(r.validateEntrySizes&&n.compressionMethod===0){var m=n.uncompressedSize;if(n.isEncrypted()&&(m+=12),n.compressedSize!==m){var f="compressed/uncompressed size mismatch for stored file: "+n.compressedSize+" != "+n.uncompressedSize;return sf(r,new Error(f))}}r.emit("entry",n),r.lazyEntries||r._readEntry()}})}})}};of.prototype.openReadStream=function(r,e,t){var n=this,i=0,s=r.compressedSize;if(t==null&&(t=e,e=null),e==null)e={};else{if(e.decrypt!=null){if(!r.isEncrypted())throw new Error("options.decrypt can only be specified for encrypted entries");if(e.decrypt!==!1)throw new Error("invalid options.decrypt value: "+e.decrypt);if(r.isCompressed()&&e.decompress!==!1)throw new Error("entry is encrypted and compressed, and options.decompress !== false")}if(e.decompress!=null){if(!r.isCompressed())throw new Error("options.decompress can only be specified for compressed entries");if(!(e.decompress===!1||e.decompress===!0))throw new Error("invalid options.decompress value: "+e.decompress)}if(e.start!=null||e.end!=null){if(r.isCompressed()&&e.decompress!==!1)throw new Error("start/end range not allowed for compressed entry without options.decompress === false");if(r.isEncrypted()&&e.decrypt!==!1)throw new Error("start/end range not allowed for encrypted entry without options.decrypt === false")}if(e.start!=null){if(i=e.start,i<0)throw new Error("options.start < 0");if(i>r.compressedSize)throw new Error("options.start > entry.compressedSize")}if(e.end!=null){if(s=e.end,s<0)throw new Error("options.end < 0");if(s>r.compressedSize)throw new Error("options.end > entry.compressedSize");if(s<i)throw new Error("options.end < options.start")}}if(!n.isOpen)return t(new Error("closed"));if(r.isEncrypted()&&e.decrypt!==!1)return t(new Error("entry is encrypted, and options.decrypt !== false"));var o;if(r.compressionMethod===0)o=!1;else if(r.compressionMethod===8)o=e.decompress!=null?e.decompress:!0;else return t(new Error("unsupported compression method: "+r.compressionMethod));n.readLocalFileHeader(r,{minimal:!0},function(a,c){if(a)return t(a);n.openReadStreamLowLevel(c.fileDataStart,r.compressedSize,i,s,o,r.uncompressedSize,t)})};of.prototype.openReadStreamLowLevel=function(r,e,t,n,i,s,o){var a=this,c=r+e,l=a.reader.createReadStream({start:r+t,end:r+n}),u=l;if(i){var d=!1,p=c2t.createInflateRaw();l.on("error",function(m){setImmediate(function(){d||p.emit("error",m)})}),l.pipe(p),a.validateEntrySizes?(u=new qk(s),p.on("error",function(m){setImmediate(function(){d||u.emit("error",m)})}),p.pipe(u)):u=p,Oce(u,function(){d=!0,p!==u&&p.unpipe(u),l.unpipe(p),l.destroy()})}o(null,u)};of.prototype.readLocalFileHeader=function(r,e,t){var n=this;t==null&&(t=e,e=null),e==null&&(e={}),n.reader.ref();var i=Hg(30);M0(n.reader,i,0,i.length,r.relativeOffsetOfLocalHeader,function(s){try{if(s)return t(s);var o=i.readUInt32LE(0);if(o!==67324752)return t(new Error("invalid local file header signature: 0x"+o.toString(16)));var a=i.readUInt16LE(26),c=i.readUInt16LE(28),l=r.relativeOffsetOfLocalHeader+30+a+c;if(l+r.compressedSize>n.fileSize)return t(new Error("file data overflows file bounds: "+l+" + "+r.compressedSize+" > "+n.fileSize));if(e.minimal)return t(null,{fileDataStart:l});var u=new sGe;u.fileDataStart=l,u.versionNeededToExtract=i.readUInt16LE(4),u.generalPurposeBitFlag=i.readUInt16LE(6),u.compressionMethod=i.readUInt16LE(8),u.lastModFileTime=i.readUInt16LE(10),u.lastModFileDate=i.readUInt16LE(12),u.crc32=i.readUInt32LE(14),u.compressedSize=i.readUInt32LE(18),u.uncompressedSize=i.readUInt32LE(22),u.fileNameLength=a,u.extraFieldLength=c,i=Hg(a+c),n.reader.ref(),M0(n.reader,i,0,i.length,r.relativeOffsetOfLocalHeader+30,function(d){try{return d?t(d):(u.fileName=i.subarray(0,a),u.extraField=i.subarray(a),t(null,u))}finally{n.reader.unref()}})}finally{n.reader.unref()}})};function Lk(){}Lk.prototype.getLastModDate=function(r){if(r==null&&(r={}),!r.forceDosFormat)for(var e=0;e<this.extraFields.length;e++){var t=this.extraFields[e];if(t.id===21589){var n=t.data;if(n.length<5)continue;var i=n[0],s=1;if(!(i&s))continue;var o=n.readInt32LE(1);return new Date(o*1e3)}else if(t.id===10)for(var n=t.data,a=4;a<n.length+4;){var c=n.readUInt16LE(a);a+=2;var l=n.readUInt16LE(a);if(a+=2,c!==1){a+=l;continue}if(l<8||a+l>n.length)break;var u=4294967296*n.readInt32LE(a+4)+n.readUInt32LE(a),d=u/1e4-116444736e5;return new Date(d)}}return oGe(this.lastModFileDate,this.lastModFileTime,r.timezone)};Lk.prototype.isEncrypted=function(){return(this.generalPurposeBitFlag&1)!==0};Lk.prototype.isCompressed=function(){return this.compressionMethod===8};function sGe(){}function oGe(r,e,t){var n=r&31,i=(r>>5&15)-1,s=(r>>9&127)+1980,o=0,a=(e&31)*2,c=e>>5&63,l=e>>11&31;if(t==null||t==="local")return new Date(s,i,n,l,c,a,o);if(t==="UTC")return new Date(Date.UTC(s,i,n,l,c,a,o));throw new Error("unrecognized options.timezone: "+options.timezone)}function aGe(r,e,t,n){for(var i=null,s=0;s<t.length;s++){var o=t[s];if(o.id===28789){if(o.data.length<6||o.data.readUInt8(0)!==1)continue;var a=o.data.readUInt32LE(1);if(l2t.unsigned(e)!==a)continue;i=tH(o.data.subarray(5),!0);break}}if(i==null){var c=(r&2048)!==0;i=tH(e,c)}return n||(i=i.replace(/\\/g,"/")),i}function cGe(r){return r.indexOf("\\")!==-1?"invalid characters in fileName: "+r:/^[a-zA-Z]:/.test(r)||/^\//.test(r)?"absolute path: "+r:r.split("/").indexOf("..")!==-1?"invalid relative path: "+r:null}function lGe(r){for(var e=[],t=0;t<r.length-3;){var n=r.readUInt16LE(t+0),i=r.readUInt16LE(t+2),s=t+4,o=s+i;if(o>r.length)throw new Error("extra field length exceeds extra field buffer size");var a=r.subarray(s,o);e.push({id:n,data:a}),t=o}return e}function M0(r,e,t,n,i,s){if(n===0)return setImmediate(function(){s(null,Hg(0))});r.read(e,t,n,i,function(o,a){if(o)return s(o);if(a<n)return s(new Error("unexpected EOF"));s()})}nH.inherits(qk,rGe);function qk(r){rGe.call(this),this.actualByteCount=0,this.expectedByteCount=r}qk.prototype._transform=function(r,e,t){if(this.actualByteCount+=r.length,this.actualByteCount>this.expectedByteCount){var n="too many bytes in the stream. expected "+this.expectedByteCount+". got at least "+this.actualByteCount;return t(new Error(n))}t(null,r)};qk.prototype._flush=function(r){if(this.actualByteCount<this.expectedByteCount){var e="not enough bytes in the stream. expected "+this.expectedByteCount+". got only "+this.actualByteCount;return r(new Error(e))}r()};nH.inherits(bb,iH);function bb(){iH.call(this),this.refCount=0}bb.prototype.ref=function(){this.refCount+=1};bb.prototype.unref=function(){var r=this;if(r.refCount-=1,r.refCount>0)return;if(r.refCount<0)throw new Error("invalid unref");r.close(e);function e(t){if(t)return r.emit("error",t);r.emit("close")}};bb.prototype.createReadStream=function(r){r==null&&(r={});var e=r.start,t=r.end;if(e===t){var n=new Ace;return setImmediate(function(){n.end()}),n}var i=this._readStreamForRange(e,t),s=!1,o=new sH(this);i.on("error",function(c){setImmediate(function(){s||o.emit("error",c)})}),Oce(o,function(){i.unpipe(o),o.unref(),i.destroy()});var a=new qk(t-e);return o.on("error",function(c){setImmediate(function(){s||a.emit("error",c)})}),Oce(a,function(){s=!0,o.unpipe(a),o.destroy()}),i.pipe(o).pipe(a)};bb.prototype._readStreamForRange=function(r,e){throw new Error("not implemented")};bb.prototype.read=function(r,e,t,n,i){var s=this.createReadStream({start:n,end:n+t}),o=new u2t,a=0;o._write=function(c,l,u){c.copy(r,e+a,0,c.length),a+=c.length,u()},o.on("finish",i),s.on("error",function(c){i(c)}),s.pipe(o)};bb.prototype.close=function(r){setImmediate(r)};nH.inherits(sH,Ace);function sH(r){Ace.call(this),this.context=r,this.context.ref(),this.unreffedYet=!1}sH.prototype._flush=function(r){this.unref(),r()};sH.prototype.unref=function(r){this.unreffedYet||(this.unreffedYet=!0,this.context.unref())};var m2t="\0\u263A\u263B\u2665\u2666\u2663\u2660\u2022\u25D8\u25CB\u25D9\u2642\u2640\u266A\u266B\u263C\u25BA\u25C4\u2195\u203C\xB6\xA7\u25AC\u21A8\u2191\u2193\u2192\u2190\u221F\u2194\u25B2\u25BC !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\u2302\xC7\xFC\xE9\xE2\xE4\xE0\xE5\xE7\xEA\xEB\xE8\xEF\xEE\xEC\xC4\xC5\xC9\xE6\xC6\xF4\xF6\xF2\xFB\xF9\xFF\xD6\xDC\xA2\xA3\xA5\u20A7\u0192\xE1\xED\xF3\xFA\xF1\xD1\xAA\xBA\xBF\u2310\xAC\xBD\xBC\xA1\xAB\xBB\u2591\u2592\u2593\u2502\u2524\u2561\u2562\u2556\u2555\u2563\u2551\u2557\u255D\u255C\u255B\u2510\u2514\u2534\u252C\u251C\u2500\u253C\u255E\u255F\u255A\u2554\u2569\u2566\u2560\u2550\u256C\u2567\u2568\u2564\u2565\u2559\u2558\u2552\u2553\u256B\u256A\u2518\u250C\u2588\u2584\u258C\u2590\u2580\u03B1\xDF\u0393\u03C0\u03A3\u03C3\xB5\u03C4\u03A6\u0398\u03A9\u03B4\u221E\u03C6\u03B5\u2229\u2261\xB1\u2265\u2264\u2320\u2321\xF7\u2248\xB0\u2219\xB7\u221A\u207F\xB2\u25A0\xA0";function tH(r,e){if(e)return r.toString("utf8");for(var t="",n=0;n<r.length;n++)t+=m2t[r[n]];return t}function D0(r,e){var t=r.readUInt32LE(e),n=r.readUInt32LE(e+4);return n*4294967296+t}var Hg;typeof Buffer.allocUnsafe=="function"?Hg=function(r){return Buffer.allocUnsafe(r)}:Hg=function(r){return new Buffer(r)};function Oce(r,e){typeof r.destroy=="function"?r._destroy=function(t,n){e(),n?.(t)}:r.destroy=e}function rH(r){if(r)throw r}});var T2e=O((SRr,E2e)=>{var C2t=Object.create,Wk=Object.defineProperty,P2t=Object.defineProperties,w2t=Object.getOwnPropertyDescriptor,E2t=Object.getOwnPropertyDescriptors,T2t=Object.getOwnPropertyNames,AGe=Object.getOwnPropertySymbols,I2t=Object.getPrototypeOf,MGe=Object.prototype.hasOwnProperty,R2t=Object.prototype.propertyIsEnumerable,NGe=(r,e,t)=>e in r?Wk(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,GC=(r,e)=>{for(var t in e||(e={}))MGe.call(e,t)&&NGe(r,t,e[t]);if(AGe)for(var t of AGe(e))R2t.call(e,t)&&NGe(r,t,e[t]);return r},x2t=(r,e)=>P2t(r,E2t(e)),ae=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),O2t=(r,e)=>{for(var t in e)Wk(r,t,{get:e[t],enumerable:!0})},kGe=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of T2t(e))!MGe.call(r,i)&&i!==t&&Wk(r,i,{get:()=>e[i],enumerable:!(n=w2t(e,i))||n.enumerable});return r},q0=(r,e,t)=>(t=r!=null?C2t(I2t(r)):{},kGe(e||!r||!r.__esModule?Wk(t,"default",{value:r,enumerable:!0}):t,r)),A2t=r=>kGe(Wk({},"__esModule",{value:!0}),r),N2t=ae((r,e)=>{(function(t,n){typeof r=="object"&&typeof e<"u"?n(r):typeof define=="function"&&define.amd?define(["exports"],n):(t=typeof globalThis<"u"?globalThis:t||self,n((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{},t.Microsoft.ApplicationInsights.Shims={})))})(r,function(t){"use strict";var n="function",i="object",s="undefined",o="prototype",a="hasOwnProperty",c="default",l=Object,u=l[o],d=l.assign,p=l.create,m=l.defineProperty,f=u[a],y=null;function v(se){return se===void 0&&(se=!0),(!y||!se)&&(typeof globalThis!==s&&globalThis&&(y=globalThis),typeof self!==s&&self&&(y=self),typeof window!==s&&window&&(y=window),typeof global!==s&&global&&(y=global)),y}function _(se){throw new TypeError(se)}function C(se){var we=p;if(we)return we(se);if(se==null)return{};var Ne=typeof se;Ne!==i&&Ne!==n&&_("Object prototype may only be an Object:"+se);function Re(){}return Re[o]=se,new Re}var P=(v()||{}).Symbol,w=(v()||{}).Reflect,R=!!w,I="decorate",z="metadata",G="getOwnPropertySymbols",L="iterator",H=function(se){for(var we,Ne=1,Re=arguments.length;Ne<Re;Ne++){we=arguments[Ne];for(var Le in we)u[a].call(we,Le)&&(se[Le]=we[Le])}return se},ee=d||H,ye=function(se,we){return ye=l.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ne,Re){Ne.__proto__=Re}||function(Ne,Re){for(var Le in Re)Re[a](Le)&&(Ne[Le]=Re[Le])},ye(se,we)};function $e(se,we){typeof we!==n&&we!==null&&_("Class extends value "+String(we)+" is not a constructor or null"),ye(se,we);function Ne(){this.constructor=se}se[o]=we===null?C(we):(Ne[o]=we[o],new Ne)}function Be(se,we){var Ne={};for(var Re in se)f.call(se,Re)&&we.indexOf(Re)<0&&(Ne[Re]=se[Re]);if(se!=null&&typeof l[G]===n)for(var Le=0,ht=l[G](se);Le<ht.length;Le++)we.indexOf(ht[Le])<0&&u.propertyIsEnumerable.call(se,ht[Le])&&(Ne[ht[Le]]=se[ht[Le]]);return Ne}function Ct(se,we,Ne,Re){var Le=arguments.length,ht=Le<3?we:Re===null?Re=l.getOwnPropertyDescriptor(we,Ne):Re,Ee;if(R&&typeof w[I]===n)ht=w[I](se,we,Ne,Re);else for(var ie=se.length-1;ie>=0;ie--)(Ee=se[ie])&&(ht=(Le<3?Ee(ht):Le>3?Ee(we,Ne,ht):Ee(we,Ne))||ht);return Le>3&&ht&&m(we,Ne,ht),ht}function Ge(se,we){return function(Ne,Re){we(Ne,Re,se)}}function pe(se,we){if(R&&w[z]===n)return w[z](se,we)}function Ie(se,we){for(var Ne in se)Ne!==c&&!f.call(we,Ne)&&Ve(we,se,Ne)}function Ve(se,we,Ne,Re){Re===void 0&&(Re=Ne),p?m(se,Re,{enumerable:!0,get:function(){return we[Ne]}}):se[Re]=we[Ne]}function lt(se){var we=typeof P===n&&P[L],Ne=we&&se[we],Re=0;if(Ne)return Ne.call(se);if(se&&typeof se.length=="number")return{next:function(){return se&&Re>=se.length&&(se=void 0),{value:se&&se[Re++],done:!se}}};_(we?"Object is not iterable.":"Symbol.iterator is not defined.")}function ut(se,we){var Ne=typeof P===n&&se[P[L]];if(!Ne)return se;var Re=Ne.call(se),Le,ht=[],Ee;try{for(;(we===void 0||we-- >0)&&!(Le=Re.next()).done;)ht.push(Le.value)}catch(ie){Ee={error:ie}}finally{try{Le&&!Le.done&&(Ne=Re.return)&&Ne.call(Re)}finally{if(Ee)throw Ee.error}}return ht}function ce(){for(var se=arguments,we=0,Ne=0,Re=se.length;Ne<Re;Ne++)we+=se[Ne].length;for(var Le=Array(we),ht=0,Ne=0;Ne<Re;Ne++)for(var Ee=se[Ne],ie=0,je=Ee.length;ie<je;ie++,ht++)Le[ht]=Ee[ie];return Le}function ue(se,we){for(var Ne=0,Re=we.length,Le=se.length;Ne<Re;Ne++,Le++)se[Le]=we[Ne];return se}function Ue(se,we){return m?m(se,"raw",{value:we}):se.raw=we,se}function ct(se){if(se&&se.__esModule)return se;var we={};if(se!=null)for(var Ne in se)Ne!==c&&Object.prototype.hasOwnProperty.call(se,Ne)&&Ve(we,se,Ne);return p?m(we,c,{enumerable:!0,value:se}):we[c]=se,we}function jt(se){return se&&se.__esModule?se:{strDefault:se}}function tr(){var se=v()||{};(function(we,Ne,Re,Le){we.__assign||(we.__assign=d||Ne),we.__extends||(we.__extends=Re),we.__createBinding||(we.__createBinding=Le)})(se,ee,$e,Ve),__assign||(__assign=se.__assign),__extends||(__extends=se.__extends),__createBinding||(__createBinding=se.__createBinding)}t.ObjAssign=d,t.ObjClass=l,t.ObjCreate=p,t.ObjDefineProperty=m,t.ObjHasOwnProperty=f,t.ObjProto=u,t.__assignFn=ee,t.__createBindingFn=Ve,t.__decorateFn=Ct,t.__exportStarFn=Ie,t.__exposeGlobalTsLib=tr,t.__extendsFn=$e,t.__importDefaultFn=jt,t.__importStarFn=ct,t.__makeTemplateObjectFn=Ue,t.__metadataFn=pe,t.__paramFn=Ge,t.__readFn=ut,t.__restFn=Be,t.__spreadArrayFn=ue,t.__spreadArraysFn=ce,t.__valuesFn=lt,t.getGlobal=v,t.objCreateFn=C,t.strDefault=c,t.strShimFunction=n,t.strShimHasOwnProperty=a,t.strShimObject=i,t.strShimPrototype=o,t.strShimUndefined=s,t.throwTypeError=_,function(se,we,Ne){var Re=Object.defineProperty;if(Re)try{return Re(se,we,Ne)}catch{}return Ne&&typeof Ne.value!==void 0&&(se[we]=Ne.value),se}(t,"__esModule",{value:!0})})}),D2t=ae((r,e)=>{(function(t,n){typeof r=="object"&&typeof e<"u"?n(r):typeof define=="function"&&define.amd?define(["exports"],n):(t=typeof globalThis<"u"?globalThis:t||self,n((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(r,function(t){"use strict";var n=100,i="function",s="object",o="undefined",a="prototype",c="hasOwnProperty",l=Object,u=l[a],d=l.assign,p=l.create,m=l.defineProperty,f=u[c],y=null;function v(T){return T===void 0&&(T=!0),(!y||!T)&&(typeof globalThis!==o&&globalThis&&(y=globalThis),typeof self!==o&&self&&(y=self),typeof window!==o&&window&&(y=window),typeof global!==o&&global&&(y=global)),y}function _(T){throw new TypeError(T)}function C(T){var D=p;if(D)return D(T);if(T==null)return{};var F=typeof T;F!==s&&F!==i&&_("Object prototype may only be an Object:"+T);function K(){}return K[a]=T,new K}(v()||{}).Symbol,(v()||{}).Reflect;var P=function(T,D){return P=l.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,K){F.__proto__=K}||function(F,K){for(var Q in K)K[c](Q)&&(F[Q]=K[Q])},P(T,D)};function w(T,D){typeof D!==i&&D!==null&&_("Class extends value "+String(D)+" is not a constructor or null"),P(T,D);function F(){this.constructor=T}T[a]=D===null?C(D):(F[a]=D[a],new F)}function R(T,D){for(var F=0,K=D.length,Q=T.length;F<K;F++,Q++)T[Q]=D[F];return T}var I="",z="processTelemetry",G="priority",L="setNextPlugin",H="isInitialized",ee="teardown",ye="core",$e="update",Be="disabled",Ct="_doTeardown",Ge="processNext",pe="resume",Ie="pause",Ve="NotificationListener",lt="add"+Ve,ut="remove"+Ve,ce="eventsSent",ue="eventsDiscarded",Ue="eventsSendRequest",ct="perfEvent",jt="toISOString",tr="endsWith",se="startsWith",we="indexOf",Ne="map",Re="reduce",Le="trim",ht="toString",Ee="__proto__",ie="constructor",je=m,le=l.freeze,_e=l.seal,B=l.keys,be=String[a],ke=be[Le],W=be[tr],Oe=be[se],Ht=Date[a],_r=Ht[jt],fr=Array.isArray,He=u[ht],Xe=f[ht],J=Xe.call(l),fe=/-([a-z])/g,Ke=/([^\w\d_$])/g,nt=/^(\d+[\w\d_$])/,Ut=Object.getPrototypeOf;function er(T){if(T){if(Ut)return Ut(T);var D=T[Ee]||T[a]||T[ie];if(D)return D}return null}function Cr(T){return He.call(T)}function gr(T,D){return typeof T===D}function dt(T){return T===void 0||typeof T===o}function It(T){return!dt(T)}function Je(T){return T===null||dt(T)}function Ye(T){return!Je(T)}function pr(T,D){return!!(T&&f.call(T,D))}function Kr(T){return!!(T&&typeof T===s)}function Bt(T){return!!(T&&typeof T===i)}function pi(T){var D=T;return D&&Yt(D)&&(D=D.replace(fe,function(F,K){return K.toUpperCase()}),D=D.replace(Ke,"_"),D=D.replace(nt,function(F,K){return"_"+K})),D}function Yi(T,D){if(T)for(var F in T)f.call(T,F)&&D.call(T,F,T[F])}function Do(T,D){var F=!1;return T&&D&&!(F=T===D)&&(F=W?T[tr](D):aa(T,D)),F}function aa(T,D){var F=!1,K=D?D.length:0,Q=T?T.length:0;if(K&&Q&&Q>=K&&!(F=T===D)){for(var de=Q-1,Me=K-1;Me>=0;Me--){if(T[de]!=D[Me])return!1;de--}F=!0}return F}function za(T,D){var F=!1;return T&&D&&!(F=T===D)&&(F=Oe?T[se](D):mr(T,D)),F}function mr(T,D){var F=!1,K=D?D.length:0;if(T&&K&&T.length>=K&&!(F=T===D)){for(var Q=0;Q<K;Q++)if(T[Q]!==D[Q])return!1;F=!0}return F}function or(T,D){return T&&D?T.indexOf(D)!==-1:!1}function $t(T){return!!(T&&He.call(T)==="[object Date]")}var yt=fr||Pr;function Pr(T){return!!(T&&He.call(T)==="[object Array]")}function Ir(T){return!!(T&&He.call(T)==="[object Error]")}function Yt(T){return typeof T=="string"}function $r(T){return typeof T=="number"}function tn(T){return typeof T=="boolean"}function ei(T){return typeof T=="symbol"}function Xi(T){var D=!1;if(T&&typeof T=="object"){var F=Ut?Ut(T):er(T);F?(F[ie]&&f.call(F,ie)&&(F=F[ie]),D=typeof F===i&&Xe.call(F)===J):D=!0}return D}function mi(T){if(T)return _r?T[jt]():ni(T)}function ni(T){if(T&&T.getUTCFullYear){var D=function(F){var K=String(F);return K.length===1&&(K="0"+K),K};return T.getUTCFullYear()+"-"+D(T.getUTCMonth()+1)+"-"+D(T.getUTCDate())+"T"+D(T.getUTCHours())+":"+D(T.getUTCMinutes())+":"+D(T.getUTCSeconds())+"."+String((T.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}function Lr(T,D,F){var K=T.length;try{for(var Q=0;Q<K&&!(Q in T&&D.call(F||T,T[Q],Q,T)===-1);Q++);}catch{}}function On(T,D,F){if(T){if(T[we])return T[we](D,F);var K=T.length,Q=F||0;try{for(var de=Math.max(Q>=0?Q:K-Math.abs(Q),0);de<K;de++)if(de in T&&T[de]===D)return de}catch{}}return-1}function E(T,D,F){var K;if(T){if(T[Ne])return T[Ne](D,F);var Q=T.length,de=F||T;K=new Array(Q);try{for(var Me=0;Me<Q;Me++)Me in T&&(K[Me]=D.call(de,T[Me],T))}catch{}}return K}function x(T,D,F){var K;if(T){if(T[Re])return T[Re](D,F);var Q=T.length,de=0;if(arguments.length>=3)K=arguments[2];else{for(;de<Q&&!(de in T);)de++;K=T[de++]}for(;de<Q;)de in T&&(K=D(K,T[de],de,T)),de++}return K}function j(T){return T&&(T=ke&&T[Le]?T[Le]():T.replace?T.replace(/^\s+|\s+$/g,""):T),T}var ne=!{toString:null}.propertyIsEnumerable("toString"),re=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function he(T){var D=typeof T;if(D!==i&&(D!==s||T===null)&&_("objKeys called on non-object"),!ne&&B)return B(T);var F=[];for(var K in T)T&&f.call(T,K)&&F.push(K);if(ne)for(var Q=re.length,de=0;de<Q;de++)T&&f.call(T,re[de])&&F.push(re[de]);return F}function Se(T,D,F,K){if(je)try{var Q={enumerable:!0,configurable:!0};return F&&(Q.get=F),K&&(Q.set=K),je(T,D,Q),!0}catch{}return!1}function ot(T){return T}function it(T){return le&&Yi(T,function(D,F){(yt(F)||Kr(F))&&le(F)}),zr(T)}var zr=le||ot,Vr=_e||ot;function sr(){var T=Date;return T.now?T.now():new T().getTime()}function qr(T){return Ir(T)?T.name:I}function Or(T,D,F,K,Q){var de=F;return T&&(de=T[D],de!==F&&(!Q||Q(de))&&(!K||K(F))&&(de=F,T[D]=de)),de}function Hs(T,D,F){var K;return T?(K=T[D],!K&&Je(K)&&(K=dt(F)?{}:F,T[D]=K)):K=dt(F)?{}:F,K}function Ni(T){return!T}function Jr(T){return!!T}function ci(T){throw new Error(T)}function bl(T,D){var F=null,K=null;return Bt(T)?F=T:K=T,function(){var Q=arguments;if(F&&(K=F()),K)return K[D].apply(K,Q)}}function po(T,D,F){if(T&&D&&Kr(T)&&Kr(D)){var K=function(de){if(Yt(de)){var Me=D[de];Bt(Me)?(!F||F(de,!0,D,T))&&(T[de]=bl(D,de)):(!F||F(de,!1,D,T))&&(pr(T,de)&&delete T[de],Se(T,de,function(){return D[de]},function(Qe){D[de]=Qe})||(T[de]=Me))}};for(var Q in D)K(Q)}return T}function ca(T,D,F,K,Q){T&&D&&F&&(Q!==!1||dt(T[D]))&&(T[D]=bl(F,K))}function ru(T,D,F,K){return T&&D&&Kr(T)&&yt(F)&&Lr(F,function(Q){Yt(Q)&&ca(T,Q,D,Q,K)}),T}function hc(T){return function(){function D(){var F=this;T&&Yi(T,function(K,Q){F[K]=Q})}return D}()}function Ad(T){return T&&d&&(T=l(d({},T))),T}function Ws(T,D,F,K,Q,de){var Me=arguments,Qe=Me[0]||{},We=Me.length,Mt=!1,pt=1;for(We>0&&tn(Qe)&&(Mt=Qe,Qe=Me[pt]||{},pt++),Kr(Qe)||(Qe={});pt<We;pt++){var Kt=Me[pt],cr=yt(Kt),kt=Kr(Kt);for(var Sr in Kt){var nn=cr&&Sr in Kt||kt&&f.call(Kt,Sr);if(nn){var Xr=Kt[Sr],Wn=void 0;if(Mt&&Xr&&((Wn=yt(Xr))||Xi(Xr))){var Hn=Qe[Sr];Wn?yt(Hn)||(Hn=[]):Xi(Hn)||(Hn={}),Xr=Ws(Mt,Hn,Xr)}Xr!==void 0&&(Qe[Sr]=Xr)}}}return Qe}function fc(T){var D={};return Yi(T,function(F,K){D[F]=K,D[K]=F}),it(D)}function gc(T){var D={};return Yi(T,function(F,K){D[F]=F,D[K]=F}),it(D)}function la(T){var D={};return Yi(T,function(F,K){D[F]=K[1],D[K[0]]=K[1]}),it(D)}var _l=fc({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}),Sl="constructor",Wo="prototype",Cl="function",Fa="_dynInstFuncs",Nd="_isDynProxy",ja="_dynClass",Fp="_dynCls$",Nu="_dynInstChk",yc=Nu,ua="_dfOpts",Dd="_unknown_",qe="__proto__",zt="_dyn"+qe,Ft="_dynInstProto",Zt="useBaseInst",Ar="setInstFuncs",pn=Object,on=pn.getPrototypeOf,In=pn.getOwnPropertyNames,rn=0;function Nr(T,D){return T&&pn[Wo].hasOwnProperty.call(T,D)}function Fe(T){return T&&(T===pn[Wo]||T===Array[Wo])}function wt(T){return Fe(T)||T===Function[Wo]}function Gt(T){var D;if(T){if(on)return on(T);var F=T[qe]||T[Wo]||(T[Sl]?T[Sl][Wo]:null);D=T[zt]||F,Nr(T,zt)||(delete T[Ft],D=T[zt]=T[Ft]||T[zt],T[Ft]=F)}return D}function ar(T,D){var F=[];if(In)F=In(T);else for(var K in T)typeof K=="string"&&Nr(T,K)&&F.push(K);if(F&&F.length>0)for(var Q=0;Q<F.length;Q++)D(F[Q])}function yr(T,D,F){return D!==Sl&&typeof T[D]===Cl&&(F||Nr(T,D))}function vr(T){throw new TypeError("DynamicProto: "+T)}function vs(T){var D={};return ar(T,function(F){!D[F]&&yr(T,F,!1)&&(D[F]=T[F])}),D}function Ks(T,D){for(var F=T.length-1;F>=0;F--)if(T[F]===D)return!0;return!1}function Ko(T,D,F,K){function Q(We,Mt,pt){var Kt=Mt[pt];if(Kt[Nd]&&K){var cr=We[Fa]||{};cr[yc]!==!1&&(Kt=(cr[Mt[ja]]||{})[pt]||Kt)}return function(){return Kt.apply(We,arguments)}}var de={};ar(F,function(We){de[We]=Q(D,F,We)});for(var Me=Gt(T),Qe=[];Me&&!wt(Me)&&!Ks(Qe,Me);)ar(Me,function(We){!de[We]&&yr(Me,We,!on)&&(de[We]=Q(D,Me,We))}),Qe.push(Me),Me=Gt(Me);return de}function Pl(T,D,F,K){var Q=null;if(T&&Nr(F,ja)){var de=T[Fa]||{};if(Q=(de[F[ja]]||{})[D],Q||vr("Missing ["+D+"] "+Cl),!Q[Nu]&&de[yc]!==!1){for(var Me=!Nr(T,D),Qe=Gt(T),We=[];Me&&Qe&&!wt(Qe)&&!Ks(We,Qe);){var Mt=Qe[D];if(Mt){Me=Mt===K;break}We.push(Qe),Qe=Gt(Qe)}try{Me&&(T[D]=Q),Q[Nu]=1}catch{de[yc]=!1}}}return Q}function oe(T,D,F){var K=D[T];return K===F&&(K=Gt(D)[T]),typeof K!==Cl&&vr("["+T+"] is not a "+Cl),K}function Ae(T,D,F,K,Q){function de(We,Mt){var pt=function(){var Kt=Pl(this,Mt,We,pt)||oe(Mt,We,pt);return Kt.apply(this,arguments)};return pt[Nd]=1,pt}if(!Fe(T)){var Me=F[Fa]=F[Fa]||{},Qe=Me[D]=Me[D]||{};Me[yc]!==!1&&(Me[yc]=!!Q),ar(F,function(We){yr(F,We,!1)&&F[We]!==K[We]&&(Qe[We]=F[We],delete F[We],(!Nr(T,We)||T[We]&&!T[We][Nd])&&(T[We]=de(T,We)))})}}function et(T,D){if(on){for(var F=[],K=Gt(D);K&&!wt(K)&&!Ks(F,K);){if(K===T)return!0;F.push(K),K=Gt(K)}return!1}return!0}function xr(T,D){return Nr(T,Wo)?T.name||D||Dd:((T||{})[Sl]||{}).name||D||Dd}function Fr(T,D,F,K){Nr(T,Wo)||vr("theClass is an invalid class definition.");var Q=T[Wo];et(Q,D)||vr("["+xr(T)+"] is not in class hierarchy of ["+xr(D)+"]");var de=null;Nr(Q,ja)?de=Q[ja]:(de=Fp+xr(T,"_")+"$"+rn,rn++,Q[ja]=de);var Me=Fr[ua],Qe=!!Me[Zt];Qe&&K&&K[Zt]!==void 0&&(Qe=!!K[Zt]);var We=vs(D),Mt=Ko(Q,D,We,Qe);F(D,Mt);var pt=!!on&&!!Me[Ar];pt&&K&&(pt=!!K[Ar]),Ae(Q,de,D,We,pt!==!1)}var Di={setInstFuncs:!0,useBaseInst:!0};Fr[ua]=Di;var _i="window",Yn="document",Ji="documentMode",Ts="navigator",Ua="history",rh="location",Iy="console",Ry="performance",xy="JSON",rF="crypto",wl="msCrypto",YY="ReactNative",Bc="msie",fO="trident/",gO="XMLHttpRequest",Md=null,Oy=null,yw=!1,Ui=null,kd=null;function vw(T,D){var F=!1;if(T){try{if(F=D in T,!F){var K=T[a];K&&(F=D in K)}}catch{}if(!F)try{var Q=new T;F=!dt(Q[D])}catch{}}return F}function XY(T){yw=T}function mo(T){var D=v();return D&&D[T]?D[T]:T===_i&&yO()?window:null}function yO(){return!!(typeof window===s&&window)}function vO(){return yO()?window:mo(_i)}function nF(){return!!(typeof document===s&&document)}function jp(){return nF()?document:mo(Yn)}function Ay(){return!!(typeof navigator===s&&navigator)}function nu(){return Ay()?navigator:mo(Ts)}function iF(){return!!(typeof history===s&&history)}function sF(){return iF()?history:mo(Ua)}function bO(T){if(T&&yw){var D=mo("__mockLocation");if(D)return D}return typeof location===s&&location?location:mo(rh)}function bw(){return typeof console!==o?console:mo(Iy)}function T_(){return mo(Ry)}function I_(){return!!(typeof JSON===s&&JSON||mo(xy)!==null)}function _O(){return I_()?JSON||mo(xy):null}function _w(){return mo(rF)}function Sw(){return mo(wl)}function JY(){var T=nu();return T&&T.product?T.product===YY:!1}function Ny(){var T=nu();if(T&&(T.userAgent!==Oy||Md===null)){Oy=T.userAgent;var D=(Oy||I).toLowerCase();Md=or(D,Bc)||or(D,fO)}return Md}function El(T){if(T===void 0&&(T=null),!T){var D=nu()||{};T=D?(D.userAgent||I).toLowerCase():I}var F=(T||I).toLowerCase();if(or(F,Bc)){var K=jp()||{};return Math.max(parseInt(F.split(Bc)[1]),K[Ji]||0)}else if(or(F,fO)){var Q=parseInt(F.split(fO)[1]);if(Q)return Q+4}return null}function Ld(T){var D=Object[a].toString.call(T),F=I;return D==="[object Error]"?F="{ stack: '"+T.stack+"', message: '"+T.message+"', name: '"+T.name+"'":I_()&&(F=_O().stringify(T)),D+F}function R_(T){if(!T||!Yt(T)){var D=nu()||{};T=D?(D.userAgent||I).toLowerCase():I}var F=(T||I).toLowerCase();return F.indexOf("safari")>=0}function oF(){return kd===null&&(kd=Ay()&&!!nu().sendBeacon),kd}function aF(T){var D=!1;try{D=!!mo("fetch");var F=mo("Request");D&&T&&F&&(D=vw(F,"keepalive"))}catch{}return D}function ZY(){return Ui===null&&(Ui=typeof XDomainRequest!==o,Ui&&cF()&&(Ui=Ui&&!vw(mo(gO),"withCredentials"))),Ui}function cF(){var T=!1;try{var D=mo(gO);T=!!D}catch{}return T}function lF(T,D){if(T)for(var F=0;F<T.length;F++){var K=T[F];if(K.name&&K.name===D)return K}return{}}function uF(T){var D=jp();return D&&T?lF(D.querySelectorAll("meta"),T).content:null}function dF(T){var D,F=T_();if(F){var K=F.getEntriesByType("navigation")||[];D=lF((K.length>0?K[0]:{}).serverTiming,T).description}return D}var nh=["eventsSent","eventsDiscarded","eventsSendRequest","perfEvent"],Cw=null,Pw;function SO(T,D){return function(){var F=arguments,K=qd(D);if(K){var Q=K.listener;Q&&Q[T]&&Q[T].apply(Q,F)}}}function pF(){var T=mo("Microsoft");return T&&(Cw=T.ApplicationInsights),Cw}function qd(T){var D=Cw;return!D&&T.disableDbgExt!==!0&&(D=Cw||pF()),D?D.ChromeDbgExt:null}function x_(T){if(!Pw){Pw={};for(var D=0;D<nh.length;D++)Pw[nh[D]]=SO(nh[D],T)}return Pw}var e5="AI (Internal): ",t5="AI: ",r5="AITR_",Dy="errorToConsole",Du="warnToConsole";function CO(T){return T?'"'+T.replace(/\"/g,I)+'"':I}function mF(T,D){var F=bw();if(F){var K="log";F[T]&&(K=T),Bt(F[K])&&F[K](D)}}var ww=function(){function T(D,F,K,Q){K===void 0&&(K=!1);var de=this;de.messageId=D,de.message=(K?t5:e5)+D;var Me=I;I_()&&(Me=_O().stringify(Q));var Qe=(F?" message:"+CO(F):I)+(Q?" props:"+CO(Me):I);de.message+=Qe}return T.dataType="MessageData",T}();function hF(T,D){return(T||{}).logger||new My(D)}var My=function(){function T(D){this.identifier="DiagnosticLogger",this.queue=[];var F=0,K={};Fr(T,this,function(Q){Je(D)&&(D={}),Q.consoleLoggingLevel=function(){return de("loggingLevelConsole",0)},Q.telemetryLoggingLevel=function(){return de("loggingLevelTelemetry",1)},Q.maxInternalMessageLimit=function(){return de("maxMessageLimit",25)},Q.enableDebugExceptions=function(){return de("enableDebugExceptions",!1)},Q.throwInternal=function(We,Mt,pt,Kt,cr){cr===void 0&&(cr=!1);var kt=new ww(Mt,pt,cr,Kt);if(Q.enableDebugExceptions())throw Ld(kt);var Sr=We===1?Dy:Du;if(dt(kt.message))Qe("throw"+(We===1?"Critical":"Warning"),kt);else{var nn=Q.consoleLoggingLevel();if(cr){var Xr=+kt.messageId;!K[Xr]&&nn>=We&&(Q[Sr](kt.message),K[Xr]=!0)}else nn>=We&&Q[Sr](kt.message);Q.logInternalMessage(We,kt)}},Q.warnToConsole=function(We){mF("warn",We),Qe("warning",We)},Q.errorToConsole=function(We){mF("error",We),Qe("error",We)},Q.resetInternalMessageCount=function(){F=0,K={}},Q.logInternalMessage=function(We,Mt){if(!Me()){var pt=!0,Kt=r5+Mt.messageId;if(K[Kt]?pt=!1:K[Kt]=!0,pt&&(We<=Q.telemetryLoggingLevel()&&(Q.queue.push(Mt),F++,Qe(We===1?"error":"warn",Mt)),F===Q.maxInternalMessageLimit())){var cr="Internal events throttle limit per PageView reached for this app.",kt=new ww(23,cr,!1);Q.queue.push(kt),We===1?Q.errorToConsole(cr):Q.warnToConsole(cr)}}};function de(We,Mt){var pt=D[We];return Je(pt)?Mt:pt}function Me(){return F>=Q.maxInternalMessageLimit()}function Qe(We,Mt){var pt=qd(D);pt&&pt.diagLog&&pt.diagLog(We,Mt)}})}return T}();function fF(T){return T||new My}function Gc(T,D,F,K,Q,de){de===void 0&&(de=!1),(T||new My).throwInternal(D,F,K,Q,de)}function De(T,D){fF(T).warnToConsole(D)}function gt(T,D,F){fF(T).logInternalMessage(D,F)}var tt="ctx",Dr=null,fn=function(){function T(D,F,K){var Q=this,de=!1;if(Q.start=sr(),Q.name=D,Q.isAsync=K,Q.isChildEvt=function(){return!1},Bt(F)){var Me;de=Se(Q,"payload",function(){return!Me&&Bt(F)&&(Me=F(),F=null),Me})}Q.getCtx=function(Qe){return Qe?Qe===T.ParentContextKey||Qe===T.ChildrenContextKey?Q[Qe]:(Q[tt]||{})[Qe]:null},Q.setCtx=function(Qe,We){if(Qe)if(Qe===T.ParentContextKey)Q[Qe]||(Q.isChildEvt=function(){return!0}),Q[Qe]=We;else if(Qe===T.ChildrenContextKey)Q[Qe]=We;else{var Mt=Q[tt]=Q[tt]||{};Mt[Qe]=We}},Q.complete=function(){var Qe=0,We=Q.getCtx(T.ChildrenContextKey);if(yt(We))for(var Mt=0;Mt<We.length;Mt++){var pt=We[Mt];pt&&(Qe+=pt.time)}Q.time=sr()-Q.start,Q.exTime=Q.time-Qe,Q.complete=function(){},!de&&Bt(F)&&(Q.payload=F())}}return T.ParentContextKey="parent",T.ChildrenContextKey="childEvts",T}(),Ii=function(){function T(D){this.ctx={},Fr(T,this,function(F){F.create=function(K,Q,de){return new fn(K,Q,de)},F.fire=function(K){K&&(K.complete(),D&&Bt(D.perfEvent)&&D.perfEvent(K))},F.setCtx=function(K,Q){if(K){var de=F[tt]=F[tt]||{};de[K]=Q}},F.getCtx=function(K){return(F[tt]||{})[K]}})}return T}(),ho="CoreUtils.doPerf";function Bi(T,D,F,K,Q){if(T){var de=T;if(Bt(de.getPerfMgr)&&(de=de.getPerfMgr()),de){var Me=void 0,Qe=de.getCtx(ho);try{if(Me=de.create(D(),K,Q),Me){if(Qe&&Me.setCtx&&(Me.setCtx(fn.ParentContextKey,Qe),Qe.getCtx&&Qe.setCtx)){var We=Qe.getCtx(fn.ChildrenContextKey);We||(We=[],Qe.setCtx(fn.ChildrenContextKey,We)),We.push(Me)}return de.setCtx(ho,Me),F(Me)}}catch(Mt){Me&&Me.setCtx&&Me.setCtx("exception",Mt)}finally{Me&&de.fire(Me),de.setCtx(ho,Qe)}}}return F()}function PO(T){Dr=T}function gF(){return Dr}var Tl=4294967296,Mu=4294967295,yF=!1,zd=123456789,ih=987654321;function O_(T){T<0&&(T>>>=0),zd=123456789+T&Mu,ih=987654321-T&Mu,yF=!0}function Mi(){try{var T=sr()&2147483647;O_((Math.random()*Tl^T)+T)}catch{}}function wO(T){return T>0?Math.floor(sh()/Mu*(T+1))>>>0:0}function sh(T){var D=0,F=_w()||Sw();return F&&F.getRandomValues&&(D=F.getRandomValues(new Uint32Array(1))[0]&Mu),D===0&&Ny()&&(yF||Mi(),D=EO()&Mu),D===0&&(D=Math.floor(Tl*Math.random()|0)),T||(D>>>=0),D}function A_(T){T?O_(T):Mi()}function EO(T){ih=36969*(ih&65535)+(ih>>16)&Mu,zd=18e3*(zd&65535)+(zd>>16)&Mu;var D=(ih<<16)+(zd&65535)>>>0&Mu|0;return T||(D>>>=0),D}function TO(T){T===void 0&&(T=22);for(var D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",F=sh()>>>0,K=0,Q=I;Q.length<T;)K++,Q+=D.charAt(F&63),F>>>=6,K===5&&(F=(sh()<<2&4294967295|F&3)>>>0,K=0);return Q}var vF=m,N_="2.8.4",oh="."+TO(6),Ew=0;function bF(T,D,F){if(vF)try{return vF(T,D,{value:F,enumerable:!1,configurable:!0}),!0}catch{}return!1}function D_(T){return T.nodeType===1||T.nodeType===9||!+T.nodeType}function _F(T,D){var F=D[T.id];if(!F){F={};try{D_(D)&&(bF(D,T.id,F)||(D[T.id]=F))}catch{}}return F}function ky(T,D){return D===void 0&&(D=!1),pi(T+Ew+++(D?"."+N_:"")+oh)}function M_(T){var D={id:ky("_aiData-"+(T||"")+"."+N_),accept:function(F){return D_(F)},get:function(F,K,Q,de){var Me=F[D.id];return Me?Me[pi(K)]:(de&&(Me=_F(D,F),Me[pi(K)]=Q),Q)},kill:function(F,K){if(F&&F[K])try{delete F[K]}catch{}}};return D}var IO="toGMTString",Ly="toUTCString",Up="cookie",qy="expires",RO="enabled",SF="isCookieUseDisabled",CF="disableCookiesUsage",ku="_ckMgr",Bf=null,k_=null,PF=null,zy=jp(),wF={},Tw={};function Mo(T,D){var F=Gf[ku]||Tw[ku];return F||(F=Gf[ku]=Gf(T,D),Tw[ku]=F),F}function Qo(T){return T?T.isEnabled():!0}function n5(T){var D=T.cookieCfg=T.cookieCfg||{};if(Or(D,"domain",T.cookieDomain,Ye,Je),Or(D,"path",T.cookiePath||"/",null,Je),Je(D[RO])){var F=void 0;dt(T[SF])||(F=!T[SF]),dt(T[CF])||(F=!T[CF]),D[RO]=F}return D}function i5(T,D){var F;if(T)F=T.getCookieMgr();else if(D){var K=D.cookieCfg;K[ku]?F=K[ku]:F=Gf(D)}return F||(F=Mo(D,(T||{}).logger)),F}function Gf(T,D){var F=n5(T||Tw),K=F.path||"/",Q=F.domain,de=F[RO]!==!1,Me={isEnabled:function(){var Qe=de&&xO(D),We=Tw[ku];return Qe&&We&&Me!==We&&(Qe=Qo(We)),Qe},setEnabled:function(Qe){de=Qe!==!1},set:function(Qe,We,Mt,pt,Kt){var cr=!1;if(Qo(Me)){var kt={},Sr=j(We||I),nn=Sr.indexOf(";");if(nn!==-1&&(Sr=j(We.substring(0,nn)),kt=Iw(We.substring(nn+1))),Or(kt,"domain",pt||Q,Jr,dt),!Je(Mt)){var Xr=Ny();if(dt(kt[qy])){var Wn=sr(),Hn=Wn+Mt*1e3;if(Hn>0){var fo=new Date;fo.setTime(Hn),Or(kt,qy,Fy(fo,Xr?IO:Ly)||Fy(fo,Xr?IO:Ly)||I,Jr)}}Xr||Or(kt,"max-age",I+Mt,null,dt)}var go=bO();go&&go.protocol==="https:"&&(Or(kt,"secure",null,null,dt),k_===null&&(k_=!By((nu()||{}).userAgent)),k_&&Or(kt,"SameSite","None",null,dt)),Or(kt,"path",Kt||K,null,dt);var ir=F.setCookie||Uy;ir(Qe,Rw(Sr,kt)),cr=!0}return cr},get:function(Qe){var We=I;return Qo(Me)&&(We=(F.getCookie||jy)(Qe)),We},del:function(Qe,We){var Mt=!1;return Qo(Me)&&(Mt=Me.purge(Qe,We)),Mt},purge:function(Qe,We){var Mt,pt=!1;if(xO(D)){var Kt=(Mt={},Mt.path=We||"/",Mt[qy]="Thu, 01 Jan 1970 00:00:01 GMT",Mt);Ny()||(Kt["max-age"]="0");var cr=F.delCookie||Uy;cr(Qe,Rw(I,Kt)),pt=!0}return pt}};return Me[ku]=Me,Me}function xO(T){if(Bf===null){Bf=!1;try{var D=zy||{};Bf=D[Up]!==void 0}catch(F){Gc(T,2,68,"Cannot access document.cookie - "+qr(F),{exception:Ld(F)})}}return Bf}function Iw(T){var D={};if(T&&T.length){var F=j(T).split(";");Lr(F,function(K){if(K=j(K||I),K){var Q=K.indexOf("=");Q===-1?D[K]=null:D[j(K.substring(0,Q))]=j(K.substring(Q+1))}})}return D}function Fy(T,D){return Bt(T[D])?T[D]():null}function Rw(T,D){var F=T||I;return Yi(D,function(K,Q){F+="; "+K+(Je(Q)?I:"="+Q)}),F}function jy(T){var D=I;if(zy){var F=zy[Up]||I;PF!==F&&(wF=Iw(F),PF=F),D=j(wF[T]||I)}return D}function Uy(T,D){zy&&(zy[Up]=T+"="+D)}function By(T){return Yt(T)?!!(or(T,"CPU iPhone OS 12")||or(T,"iPad; CPU OS 12")||or(T,"Macintosh; Intel Mac OS X 10_14")&&or(T,"Version/")&&or(T,"Safari")||or(T,"Macintosh; Intel Mac OS X 10_14")&&Do(T,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||or(T,"Chrome/5")||or(T,"Chrome/6")||or(T,"UnrealEngine")&&!or(T,"Chrome")||or(T,"UCBrowser/12")||or(T,"UCBrowser/11")):!1}var L_="on",$f="attachEvent",EF="addEventListener",TF="detachEvent",IF="removeEventListener",xw="events",q_="visibilitychange",Vf="pagehide",Gy="pageshow",OO="unload",Y="beforeunload",Hf=ky("aiEvtPageHide"),z_=ky("aiEvtPageShow"),iu=/\.[\.]+/g,ii=/[\.]+$/,s5=1,F_=M_("events"),o5=/^([^.]*)(?:\.(.+)|)/;function ah(T){return T&&T.replace?T.replace(/^\s*\.*|\.*\s*$/g,""):T}function Ow(T,D){if(D){var F="";yt(D)?(F="",Lr(D,function(Q){Q=ah(Q),Q&&(Q[0]!=="."&&(Q="."+Q),F+=Q)})):F=ah(D),F&&(F[0]!=="."&&(F="."+F),T=(T||"")+F)}var K=o5.exec(T||"")||[];return{type:K[1],ns:(K[2]||"").replace(iu,".").replace(ii,"").split(".").sort().join(".")}}function a5(T,D,F){var K=[],Q=F_.get(T,xw,{},!1),de=Ow(D,F);return Yi(Q,function(Me,Qe){Lr(Qe,function(We){(!de.type||de.type===We.evtName.type)&&(!de.ns||de.ns===de.ns)&&K.push({name:We.evtName.type+(We.evtName.ns?"."+We.evtName.ns:""),handler:We.handler})})}),K}function RF(T,D,F){F===void 0&&(F=!0);var K=F_.get(T,xw,{},F),Q=K[D];return Q||(Q=K[D]=[]),Q}function xF(T,D,F,K){T&&D&&D.type&&(T[IF]?T[IF](D.type,F,K):T[TF]&&T[TF](L_+D.type,F))}function c5(T,D,F,K){var Q=!1;return T&&D&&D.type&&F&&(T[EF]?(T[EF](D.type,F,K),Q=!0):T[$f]&&(T[$f](L_+D.type,F),Q=!0)),Q}function Fd(T,D,F,K){for(var Q=D.length;Q--;){var de=D[Q];de&&(!F.ns||F.ns===de.evtName.ns)&&(!K||K(de))&&(xF(T,de.evtName,de.handler,de.capture),D.splice(Q,1))}}function l5(T,D,F){if(D.type)Fd(T,RF(T,D.type),D,F);else{var K=F_.get(T,xw,{});Yi(K,function(Q,de){Fd(T,de,D,F)}),he(K).length===0&&F_.kill(T,xw)}}function j_(T,D){var F;return D?(yt(D)?F=[T].concat(D):F=[T,D],F=Ow("xx",F).ns.split(".")):F=T,F}function U_(T,D,F,K,Q){Q===void 0&&(Q=!1);var de=!1;if(T)try{var Me=Ow(D,K);if(de=c5(T,Me,F,Q),de&&F_.accept(T)){var Qe={guid:s5++,evtName:Me,handler:F,capture:Q};RF(T,Me.type).push(Qe)}}catch{}return de}function B_(T,D,F,K,Q){if(Q===void 0&&(Q=!1),T)try{var de=Ow(D,K),Me=!1;l5(T,de,function(Qe){return de.ns&&!F||Qe.handler===F?(Me=!0,!0):!1}),Me||xF(T,de,F,Q)}catch{}}function AO(T,D,F,K){return K===void 0&&(K=!1),U_(T,D,F,null,K)}function Lu(T,D,F,K){K===void 0&&(K=!1),B_(T,D,F,null,K)}function NO(T,D,F){var K=!1,Q=vO();Q&&(K=U_(Q,T,D,F),K=U_(Q.body,T,D,F)||K);var de=jp();return de&&(K=U_(de,T,D,F)||K),K}function OF(T,D,F){var K=vO();K&&(B_(K,T,D,F),B_(K.body,T,D,F));var Q=jp();Q&&B_(Q,T,D,F)}function $y(T,D,F,K){var Q=!1;return D&&T&&T.length>0&&Lr(T,function(de){de&&(!F||On(F,de)===-1)&&(Q=NO(de,D,K)||Q)}),Q}function AF(T,D,F,K){var Q=!1;return D&&T&&yt(T)&&(Q=$y(T,D,F,K),!Q&&F&&F.length>0&&(Q=$y(T,D,null,K))),Q}function Vy(T,D,F){T&&yt(T)&&Lr(T,function(K){K&&OF(K,D,F)})}function Wf(T,D,F){return AF([Y,OO,Vf],T,D,F)}function u5(T,D){Vy([Y,OO,Vf],T,D)}function NF(T,D,F){function K(Me){var Qe=jp();T&&Qe&&Qe.visibilityState==="hidden"&&T(Me)}var Q=j_(Hf,F),de=$y([Vf],T,D,Q);return(!D||On(D,q_)===-1)&&(de=$y([q_],K,D,Q)||de),!de&&D&&(de=NF(T,null,F)),de}function qu(T,D){var F=j_(Hf,D);Vy([Vf],T,F),Vy([q_],null,F)}function DF(T,D,F){function K(Me){var Qe=jp();T&&Qe&&Qe.visibilityState==="visible"&&T(Me)}var Q=j_(z_,F),de=$y([Gy],T,D,Q);return de=$y([q_],K,D,Q)||de,!de&&D&&(de=DF(T,null,F)),de}function d5(T,D){var F=j_(z_,D);Vy([Gy],T,F),Vy([q_],null,F)}var G_=null,$_,p5=o;function DO(){function T(){return wO(15)}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(LO,function(D){var F=T()|0,K=D==="x"?F:F&3|8;return K.toString(16)})}function MO(){var T=T_();return T&&T.now?T.now():sr()}function Aw(){for(var T=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],D=I,F,K=0;K<4;K++)F=sh(),D+=T[F&15]+T[F>>4&15]+T[F>>8&15]+T[F>>12&15]+T[F>>16&15]+T[F>>20&15]+T[F>>24&15]+T[F>>28&15];var Q=T[8+(sh()&3)|0];return D.substr(0,8)+D.substr(9,4)+"4"+D.substr(13,3)+Q+D.substr(16,3)+D.substr(19,12)}var kO={_canUseCookies:void 0,isTypeof:gr,isUndefined:dt,isNullOrUndefined:Je,hasOwnProperty:pr,isFunction:Bt,isObject:Kr,isDate:$t,isArray:yt,isError:Ir,isString:Yt,isNumber:$r,isBoolean:tn,toISOString:mi,arrForEach:Lr,arrIndexOf:On,arrMap:E,arrReduce:x,strTrim:j,objCreate:C,objKeys:he,objDefineAccessors:Se,addEventHandler:NO,dateNow:sr,isIE:Ny,disableCookies:MF,newGuid:DO,perfNow:MO,newId:TO,randomValue:wO,random32:sh,mwcRandomSeed:A_,mwcRandom32:EO,generateW3CId:Aw},LO=/[xy]/g,V_={Attach:AO,AttachEvent:AO,Detach:Lu,DetachEvent:Lu};function Bp(T,D){var F=Mo(T,D),K=kO._canUseCookies;return G_===null&&(G_=[],$_=K,Se(kO,"_canUseCookies",function(){return $_},function(Q){$_=Q,Lr(G_,function(de){de.setEnabled(Q)})})),On(G_,F)===-1&&G_.push(F),tn(K)&&F.setEnabled(K),tn($_)&&F.setEnabled($_),F}function MF(){Bp().setEnabled(!1)}function kF(T){return Bp(null,T).isEnabled()}function m5(T,D){return Bp(null,T).get(D)}function Gp(T,D,F,K){Bp(null,T).set(D,F,null,K)}function qO(T,D){return Bp(null,T).del(D)}var Kf=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]*)?$/,$c="00",zO="ff",H_="00000000000000000000000000000000",W_="0000000000000000",Hy=1;function Ba(T,D,F){return T&&T.length===D&&T!==F?!!T.match(/^[\da-f]*$/):!1}function FO(T,D,F){return Ba(T,D)?T:F}function LF(T){(isNaN(T)||T<0||T>255)&&(T=1);for(var D=T.toString(16);D.length<2;)D="0"+D;return D}function Nw(T,D,F,K){return{version:Ba(K,2,zO)?K:$c,traceId:Dw(T)?T:Aw(),spanId:Yo(D)?D:Aw().substr(0,16),traceFlags:F>=0&&F<=255?F:1}}function jO(T){if(!T||(yt(T)&&(T=T[0]||""),!T||!Yt(T)||T.length>8192))return null;var D=Kf.exec(j(T));return!D||D[1]===zO||D[2]===H_||D[3]===W_?null:{version:D[1],traceId:D[2],spanId:D[3],traceFlags:parseInt(D[4],16)}}function Dw(T){return Ba(T,32,H_)}function Yo(T){return Ba(T,16,W_)}function Mw(T){return!(!T||!Ba(T.version,2,zO)||!Ba(T.traceId,32,H_)||!Ba(T.spanId,16,W_)||!Ba(LF(T.traceFlags),2))}function qF(T){return Mw(T)?(T.traceFlags&Hy)===Hy:!1}function jd(T){if(T){var D=LF(T.traceFlags);Ba(D,2)||(D="01");var F=T.version||$c;return F!=="00"&&F!=="ff"&&(F=$c),"".concat(F,"-").concat(FO(T.traceId,32,H_),"-").concat(FO(T.spanId,16,W_),"-").concat(D)}return""}function UO(){var T="traceparent",D=jO(uF(T));return D||(D=jO(dF(T))),D}var kw="_doUnload",Qf=M_("plugin");function ch(T){return Qf.get(T,"state",{},!0)}function Pa(T,D){for(var F=[],K=null,Q=T.getNext(),de;Q;){var Me=Q.getPlugin();if(Me){K&&Bt(K[L])&&Bt(Me[z])&&K[L](Me);var Qe=!1;Bt(Me[H])?Qe=Me[H]():(de=ch(Me),Qe=de[H]),Qe||F.push(Me),K=Me,Q=Q.getNext()}}Lr(F,function(We){var Mt=T.core();We.initialize(T.getCfg(),Mt,D,T.getNext()),de=ch(We),!We[ye]&&!de[ye]&&(de[ye]=Mt),de[H]=!0,delete de[ee]})}function Wy(T){return T.sort(function(D,F){var K=0;if(F){var Q=Bt(F[z]);Bt(D[z])?K=Q?D[G]-F[G]:1:Q&&(K=-1)}else K=D?1:-1;return K})}function h5(T,D,F,K){var Q=0;function de(){for(;Q<T.length;){var Me=T[Q++];if(Me){var Qe=Me[kw]||Me[Ct];if(Bt(Qe)&&Qe.call(Me,D,F,de)===!0)return!0}}}return de()}function f5(T){var D={};return{getName:function(){return D.name},setName:function(F){T&&T.setName(F),D.name=F},getTraceId:function(){return D.traceId},setTraceId:function(F){T&&T.setTraceId(F),Dw(F)&&(D.traceId=F)},getSpanId:function(){return D.spanId},setSpanId:function(F){T&&T.setSpanId(F),Yo(F)&&(D.spanId=F)},getTraceFlags:function(){return D.traceFlags},setTraceFlags:function(F){T&&T.setTraceFlags(F),D.traceFlags=F}}}var g5="TelemetryPluginChain",Lw="_hasRun",zF="_getTelCtx",Ky=0;function FF(T,D,F){for(;T;){if(T.getPlugin()===F)return T;T=T.getNext()}return uh([F],D.config||{},D)}function BO(T,D,F,K){var Q=null,de=[];K!==null&&(Q=K?FF(T,F,K):T);var Me={_next:We,ctx:{core:function(){return F},diagLog:function(){return hF(F,D)},getCfg:function(){return D},getExtCfg:Mt,getConfig:pt,hasNext:function(){return!!Q},getNext:function(){return Q},setNext:function(cr){Q=cr},iterate:Kt,onComplete:Qe}};function Qe(cr,kt){for(var Sr=[],nn=2;nn<arguments.length;nn++)Sr[nn-2]=arguments[nn];cr&&de.push({func:cr,self:dt(kt)?Me.ctx:kt,args:Sr})}function We(){var cr=Q;if(Q=cr?cr.getNext():null,!cr){var kt=de;kt&&kt.length>0&&(Lr(kt,function(Sr){try{Sr.func.call(Sr.self,Sr.args)}catch(nn){Gc(F.logger,2,73,"Unexpected Exception during onComplete - "+Ld(nn))}}),de=[])}return cr}function Mt(cr,kt,Sr){kt===void 0&&(kt={}),Sr===void 0&&(Sr=0);var nn;if(D){var Xr=D.extensionConfig;Xr&&cr&&(nn=Xr[cr])}if(!nn)nn=kt;else if(Kr(kt)&&Sr!==0){var Wn=Ws(!0,kt,nn);D&&Sr===2&&Yi(kt,function(Hn){if(Je(Wn[Hn])){var fo=D[Hn];Je(fo)||(Wn[Hn]=fo)}}),nn=Wn}return nn}function pt(cr,kt,Sr){Sr===void 0&&(Sr=!1);var nn,Xr=Mt(cr,null);return Xr&&!Je(Xr[kt])?nn=Xr[kt]:D&&!Je(D[kt])&&(nn=D[kt]),Je(nn)?Sr:nn}function Kt(cr){for(var kt;kt=Me._next();){var Sr=kt.getPlugin();Sr&&cr(Sr)}}return Me}function $p(T,D,F,K){var Q=BO(T,D,F,K),de=Q.ctx;function Me(We){var Mt=Q._next();return Mt&&Mt.processTelemetry(We,de),!Mt}function Qe(We,Mt){return We===void 0&&(We=null),yt(We)&&(We=uh(We,D,F,Mt)),$p(We||de.getNext(),D,F,Mt)}return de.processNext=Me,de.createNew=Qe,de}function lh(T,D,F){var K=D.config||{},Q=BO(T,K,D,F),de=Q.ctx;function Me(We){var Mt=Q._next();return Mt&&Mt.unload(de,We),!Mt}function Qe(We,Mt){return We===void 0&&(We=null),yt(We)&&(We=uh(We,K,D,Mt)),lh(We||de.getNext(),D,Mt)}return de.processNext=Me,de.createNew=Qe,de}function GO(T,D,F){var K=D.config||{},Q=BO(T,K,D,F),de=Q.ctx;function Me(We){return de.iterate(function(Mt){Bt(Mt.update)&&Mt.update(de,We)})}function Qe(We,Mt){return We===void 0&&(We=null),yt(We)&&(We=uh(We,K,D,Mt)),GO(We||de.getNext(),D,Mt)}return de.processNext=Me,de.createNew=Qe,de}function uh(T,D,F,K){var Q=null,de=!K;if(yt(T)&&T.length>0){var Me=null;Lr(T,function(Qe){if(!de&&K===Qe&&(de=!0),de&&Qe&&Bt(Qe.processTelemetry)){var We=$O(Qe,D,F);Q||(Q=We),Me&&Me._setNext(We),Me=We}})}return K&&!Q?uh([K],D,F):Q}function $O(T,D,F){var K=null,Q=Bt(T.processTelemetry),de=Bt(T.setNextPlugin),Me;T?Me=T.identifier+"-"+T.priority+"-"+Ky++:Me="Unknown-0-"+Ky++;var Qe={getPlugin:function(){return T},getNext:function(){return K},processTelemetry:pt,unload:Kt,update:cr,_id:Me,_setNext:function(kt){K=kt}};function We(){var kt;return T&&Bt(T[zF])&&(kt=T[zF]()),kt||(kt=$p(Qe,D,F)),kt}function Mt(kt,Sr,nn,Xr,Wn){var Hn=!1,fo=T?T.identifier:g5,go=kt[Lw];return go||(go=kt[Lw]={}),kt.setNext(K),T&&Bi(kt[ye](),function(){return fo+":"+nn},function(){go[Me]=!0;try{var ir=K?K._id:I;ir&&(go[ir]=!1),Hn=Sr(kt)}catch(Xy){var Hc=K?go[K._id]:!0;Hc&&(Hn=!0),(!K||!Hc)&&Gc(kt.diagLog(),1,73,"Plugin ["+fo+"] failed during "+nn+" - "+Ld(Xy)+", run flags: "+Ld(go))}},Xr,Wn),Hn}function pt(kt,Sr){Sr=Sr||We();function nn(Xr){if(!T||!Q)return!1;var Wn=ch(T);return Wn.teardown||Wn[Be]?!1:(de&&T.setNextPlugin(K),T.processTelemetry(kt,Xr),!0)}Mt(Sr,nn,"processTelemetry",function(){return{item:kt}},!kt.sync)||Sr.processNext(kt)}function Kt(kt,Sr){function nn(){var Xr=!1;if(T){var Wn=ch(T),Hn=T[ye]||Wn.core;T&&(!Hn||Hn===kt[ye]())&&!Wn[ee]&&(Wn[ye]=null,Wn[ee]=!0,Wn[H]=!1,T[ee]&&T[ee](kt,Sr)===!0&&(Xr=!0))}return Xr}Mt(kt,nn,"unload",function(){},Sr.isAsync)||kt.processNext(Sr)}function cr(kt,Sr){function nn(){var Xr=!1;if(T){var Wn=ch(T),Hn=T[ye]||Wn.core;T&&(!Hn||Hn===kt[ye]())&&!Wn[ee]&&T[$e]&&T[$e](kt,Sr)===!0&&(Xr=!0)}return Xr}Mt(kt,nn,"update",function(){},!1)||kt.processNext(Sr)}return zr(Qe)}var jF=function(){function T(D,F,K,Q){var de=this,Me=$p(D,F,K,Q);ru(de,Me,he(Me))}return T}(),y5="iKey",UF="extensionConfig",qw=500,BF="Channel has invalid priority - ";function zw(T,D,F,K){D&&yt(D)&&D.length>0&&(D=D.sort(function(Q,de){return Q.priority-de.priority}),Lr(D,function(Q){Q.priority<qw&&ci(BF+Q.identifier)}),T.push({queue:zr(D),chain:uh(D,F,K)}))}function v5(T,D){var F;function K(){return $p(null,D.config,D,null)}function Q(pt,Kt,cr,kt){var Sr=pt?pt.length+1:1;function nn(){Sr--,Sr===0&&(kt&&kt(),kt=null)}Sr>0&&Lr(pt,function(Xr){if(Xr&&Xr.queue.length>0){var Wn=Xr.chain,Hn=Kt.createNew(Wn);Hn.onComplete(nn),cr(Hn)}else Sr--}),nn()}function de(pt,Kt){var cr=Kt||{reason:0};return Q(T,pt,function(kt){kt[Ge](cr)},function(){pt[Ge](cr)}),!0}function Me(pt,Kt){var cr=Kt||{reason:0,isAsync:!1};return Q(T,pt,function(kt){kt[Ge](cr)},function(){pt[Ge](cr),We=!1}),!0}function Qe(pt){var Kt=null;return T&&T.length>0&&Lr(T,function(cr){if(cr&&cr.queue.length>0&&(Lr(cr.queue,function(kt){if(kt.identifier===pt)return Kt=kt,-1}),Kt))return-1}),Kt}var We=!1,Mt=(F={identifier:"ChannelControllerPlugin",priority:qw,initialize:function(pt,Kt,cr,kt){We=!0,Lr(T,function(Sr){Sr&&Sr.queue.length>0&&Pa($p(Sr.chain,pt,Kt),cr)})},isInitialized:function(){return We},processTelemetry:function(pt,Kt){Q(T,Kt||K(),function(cr){cr[Ge](pt)},function(){Kt[Ge](pt)})},update:de},F[Ie]=function(){Q(T,K(),function(pt){pt.iterate(function(Kt){Kt[Ie]&&Kt[Ie]()})},null)},F[pe]=function(){Q(T,K(),function(pt){pt.iterate(function(Kt){Kt[pe]&&Kt[pe]()})},null)},F[ee]=Me,F.getChannel=Qe,F.flush=function(pt,Kt,cr,kt){var Sr=1,nn=!1,Xr=null;kt=kt||5e3;function Wn(){Sr--,nn&&Sr===0&&(Xr&&(clearTimeout(Xr),Xr=null),Kt&&Kt(nn),Kt=null)}return Q(T,K(),function(Hn){Hn.iterate(function(fo){if(fo.flush){Sr++;var go=!1;fo.flush(pt,function(){go=!0,Wn()},cr)||go||(pt&&Xr==null?Xr=setTimeout(function(){Xr=null,Wn()},kt):Wn())}})},function(){nn=!0,Wn()}),!0},F._setQueue=function(pt){T=pt},F);return Mt}function VO(T,D,F,K){var Q=[];if(T&&Lr(T,function(Me){return zw(Q,Me,F,K)}),D){var de=[];Lr(D,function(Me){Me.priority>qw&&de.push(Me)}),zw(Q,de,F,K)}return Q}function Fw(){var T=[];function D(K){K&&T.push(K)}function F(K,Q){Lr(T,function(de){try{de(K,Q)}catch(Me){Gc(K.diagLog(),2,73,"Unexpected error calling unload handler - "+Ld(Me))}}),T=[]}return{add:D,run:F}}var Vp="getPlugin",HO=function(){function T(){var D=this,F,K,Q,de,Me;Mt(),Fr(T,D,function(pt){pt.initialize=function(Kt,cr,kt,Sr){We(Kt,cr,Sr),F=!0},pt.teardown=function(Kt,cr){var kt=pt.core;if(!kt||Kt&&kt!==Kt.core())return;var Sr,nn=!1,Xr=Kt||lh(null,kt,Q&&Q[Vp]?Q[Vp]():Q),Wn=cr||{reason:0,isAsync:!1};function Hn(){nn||(nn=!0,de.run(Xr,cr),Lr(Me,function(fo){fo.rm()}),Me=[],Sr===!0&&Xr.processNext(Wn),Mt())}return!pt[Ct]||pt[Ct](Xr,Wn,Hn)!==!0?Hn():Sr=!0,Sr},pt.update=function(Kt,cr){var kt=pt.core;if(!kt||Kt&&kt!==Kt.core())return;var Sr,nn=!1,Xr=Kt||GO(null,kt,Q&&Q[Vp]?Q[Vp]():Q),Wn=cr||{reason:0};function Hn(){nn||(nn=!0,We(Xr.getCfg(),Xr.core(),Xr.getNext()))}return!pt._doUpdate||pt._doUpdate(Xr,Wn,Hn)!==!0?Hn():Sr=!0,Sr},pt._addHook=function(Kt){Kt&&(yt(Kt)?Me=Me.concat(Kt):Me.push(Kt))},ca(pt,"_addUnloadCb",function(){return de},"add")}),D.diagLog=function(pt){return Qe(pt).diagLog()},D[H]=function(){return F},D.setInitialized=function(pt){F=pt},D[L]=function(pt){Q=pt},D.processNext=function(pt,Kt){Kt?Kt.processNext(pt):Q&&Bt(Q.processTelemetry)&&Q.processTelemetry(pt,null)},D._getTelCtx=Qe;function Qe(pt){pt===void 0&&(pt=null);var Kt=pt;if(!Kt){var cr=K||$p(null,{},D.core);Q&&Q[Vp]?Kt=cr.createNew(null,Q[Vp]):Kt=cr.createNew(null,Q)}return Kt}function We(pt,Kt,cr){pt&&Or(pt,UF,[],null,Je),!cr&&Kt&&(cr=Kt.getProcessTelContext().getNext());var kt=Q;Q&&Q[Vp]&&(kt=Q[Vp]()),D.core=Kt,K=$p(cr,pt,Kt,kt)}function Mt(){F=!1,D.core=null,K=null,Q=null,Me=[],de=Fw()}}return T}(),jw=function(T){w(D,T);function D(){var F=T.call(this)||this;F.identifier="TelemetryInitializerPlugin",F.priority=199;var K,Q;de(),Fr(D,F,function(Me,Qe){Me.addTelemetryInitializer=function(We){var Mt={id:K++,fn:We};Q.push(Mt);var pt={remove:function(){Lr(Q,function(Kt,cr){if(Kt.id===Mt.id)return Q.splice(cr,1),-1})}};return pt},Me.processTelemetry=function(We,Mt){for(var pt=!1,Kt=Q.length,cr=0;cr<Kt;++cr){var kt=Q[cr];if(kt)try{if(kt.fn.apply(null,[We])===!1){pt=!0;break}}catch(Sr){Gc(Mt.diagLog(),1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+qr(Sr),{exception:Ld(Sr)},!0)}}pt||Me.processNext(We,Mt)},Me[Ct]=function(){de()}});function de(){K=0,Q=[]}return F}return D}(HO),GF="Plugins must provide initialize method",WO="_notificationManager",KO="SDK is still unloading...",b5="SDK is not initialized",$F={loggingLevelConsole:1};function _5(T,D){return new Ii(D)}function QO(T,D,F){var K=[],Q={};return Lr(F,function(de){(Je(de)||Je(de.initialize))&&ci(GF);var Me=de.priority,Qe=de.identifier;de&&Me&&(Je(Q[Me])?Q[Me]=Qe:De(T,"Two extensions have same priority #"+Me+" - "+Q[Me]+", "+Qe)),(!Me||Me<D)&&K.push(de)}),{all:F,core:K}}function YO(T,D){var F=!1;return Lr(D,function(K){if(K===T)return F=!0,-1}),F}function XO(){var T;return C((T={},T[lt]=function(D){},T[ut]=function(D){},T[ce]=function(D){},T[ue]=function(D,F){},T[Ue]=function(D,F){},T))}var VF=function(){function T(){var D,F,K,Q,de,Me,Qe,We,Mt,pt,Kt,cr,kt,Sr,nn,Xr,Wn,Hn,fo,go=0;Fr(T,this,function(ir){Hc(),ir.isInitialized=function(){return D},ir.initialize=function(hr,Un,ls,En){kt&&ci(KO),ir.isInitialized()&&ci("Core should not be initialized more than once"),(!hr||Je(hr.instrumentationKey))&&ci("Please provide instrumentation key"),K=En,ir[WO]=En,ir.config=hr||{},QF(hr),Jy(hr),hr.extensions=Je(hr.extensions)?[]:hr.extensions,Y_(hr),ls&&(ir.logger=ls),We=[],We.push.apply(We,R(R([],Un,!1),hr.extensions)),Kt=(hr||{}).channels,rA(hr,null),(!cr||cr.length===0)&&ci("No channels available"),D=!0,ir.releaseQueue()},ir.getTransmissionControls=function(){var hr=[];return cr&&Lr(cr,function(Un){hr.push(Un.queue)}),zr(hr)},ir.track=function(hr){Or(hr,y5,ir.config.instrumentationKey,null,Ni),Or(hr,"time",mi(new Date),null,Ni),Or(hr,"ver","4.0",null,Je),!kt&&ir.isInitialized()?Xy().processNext(hr):F.push(hr)},ir.getProcessTelContext=Xy,ir.getNotifyMgr=function(){return K||(K=XO(),ir[WO]=K),K},ir[lt]=function(hr){K&&K[lt](hr)},ir[ut]=function(hr){K&&K[ut](hr)},ir.getCookieMgr=function(){return Me||(Me=Gf(ir.config,ir.logger)),Me},ir.setCookieMgr=function(hr){Me=hr},ir.getPerfMgr=function(){return!Q&&!de&&ir.config&&ir.config.enablePerfMgr&&Bt(ir.config.createPerfMgr)&&(de=ir.config.createPerfMgr(ir,ir.getNotifyMgr())),Q||de||gF()},ir.setPerfMgr=function(hr){Q=hr},ir.eventCnt=function(){return F.length},ir.releaseQueue=function(){if(D&&F.length>0){var hr=F;F=[],Lr(hr,function(Un){Xy().processNext(Un)})}},ir.pollInternalLogs=function(hr){nn=hr||null;var Un=ir.config.diagnosticLogInterval;return(!Un||!(Un>0))&&(Un=1e4),go&&clearInterval(go),go=setInterval(function(){iA()},Un),go},ir.stopPollingInternalLogs=function(){go&&(clearInterval(go),go=0,iA())},ru(ir,function(){return Sr},["addTelemetryInitializer"]),ir.unload=function(hr,Un,ls){hr===void 0&&(hr=!0),D||ci(b5),kt&&ci(KO);var En={reason:50,isAsync:hr,flushComplete:!1},yo=lh(dh(),ir);yo.onComplete(function(){Hc(),Un&&Un(En)},ir);function wa(Wp){En.flushComplete=Wp,kt=!0,Wn.run(yo,En),ir.stopPollingInternalLogs(),yo.processNext(En)}KF(hr,wa,6,ls)||wa(!1)},ir.getPlugin=Q_,ir.addPlugin=function(hr,Un,ls,En){if(!hr){En&&En(!1),sA(GF);return}var yo=Q_(hr.identifier);if(yo&&!Un){En&&En(!1),sA("Plugin ["+hr.identifier+"] is already loaded!");return}var wa={reason:16};function Wp(X_){We.push(hr),wa.added=[hr],rA(ir.config,wa),En&&En(!0)}if(yo){var Kp=[yo.plugin],Qp={reason:2,isAsync:!!ls};nA(Kp,Qp,function(X_){X_?(wa.removed=Kp,wa.reason|=32,Wp()):En&&En(!1)})}else Wp()},ir.evtNamespace=function(){return Xr},ir.flush=KF,ir.getTraceCtx=function(hr){return fo||(fo=f5()),fo},ir.setTraceCtx=function(hr){fo=hr||null},ca(ir,"addUnloadCb",function(){return Wn},"add");function Hc(){D=!1,ir.config=Ws(!0,{},$F),ir.logger=new My(ir.config),ir._extensions=[],Sr=new jw,F=[],K=null,Q=null,de=null,Me=null,Qe=null,Mt=null,We=[],pt=null,Kt=null,cr=null,kt=!1,nn=null,Xr=ky("AIBaseCore",!0),Wn=Fw(),fo=null}function Xy(){return $p(dh(),ir.config,ir)}function rA(hr,Un){var ls=QO(ir.logger,qw,We);Mt=ls.core,Qe=null;var En=ls.all;if(cr=zr(VO(Kt,En,hr,ir)),pt){var yo=On(En,pt);yo!==-1&&En.splice(yo,1),yo=On(Mt,pt),yo!==-1&&Mt.splice(yo,1),pt._setQueue(cr)}else pt=v5(cr,ir);En.push(pt),Mt.push(pt),ir._extensions=Wy(En),pt.initialize(hr,ir,En),Pa(Xy(),En),ir._extensions=zr(Wy(Mt||[])).slice(),Un&&w5(Un)}function Q_(hr){var Un=null,ls=null;return Lr(ir._extensions,function(En){if(En.identifier===hr&&En!==pt&&En!==Sr)return ls=En,-1}),!ls&&pt&&(ls=pt.getChannel(hr)),ls&&(Un={plugin:ls,setEnabled:function(En){ch(ls)[Be]=!En},isEnabled:function(){var En=ch(ls);return!En[ee]&&!En[Be]},remove:function(En,yo){En===void 0&&(En=!0);var wa=[ls],Wp={reason:1,isAsync:En};nA(wa,Wp,function(Kp){Kp&&rA(ir.config,{reason:32,removed:wa}),yo&&yo(Kp)})}}),Un}function dh(){if(!Qe){var hr=(Mt||[]).slice();On(hr,Sr)===-1&&hr.push(Sr),Qe=uh(Wy(hr),ir.config,ir)}return Qe}function nA(hr,Un,ls){if(hr&&hr.length>0){var En=uh(hr,ir.config,ir),yo=lh(En,ir);yo.onComplete(function(){var wa=!1,Wp=[];Lr(We,function(Qp,X_){YO(Qp,hr)?wa=!0:Wp.push(Qp)}),We=Wp;var Kp=[];Kt&&(Lr(Kt,function(Qp,X_){var Bw=[];Lr(Qp,function(YF){YO(YF,hr)?wa=!0:Bw.push(YF)}),Kp.push(Bw)}),Kt=Kp),ls&&ls(wa)}),yo.processNext(Un)}else ls(!1)}function iA(){var hr=ir.logger?ir.logger.queue:[];hr&&(Lr(hr,function(Un){var ls={name:nn||"InternalMessageId: "+Un.messageId,iKey:ir.config.instrumentationKey,time:mi(new Date),baseType:ww.dataType,baseData:{message:Un.message}};ir.track(ls)}),hr.length=0)}function KF(hr,Un,ls,En){return pt?pt.flush(hr,Un,ls||6,En):(Un&&Un(!1),!0)}function QF(hr){hr.disableDbgExt===!0&&Hn&&(K[ut](Hn),Hn=null),K&&!Hn&&hr.disableDbgExt!==!0&&(Hn=x_(hr),K[lt](Hn))}function Jy(hr){!hr.enablePerfMgr&&de&&(de=null),hr.enablePerfMgr&&Or(ir.config,"createPerfMgr",_5)}function Y_(hr){var Un=Hs(hr,UF);Un.NotificationManager=K}function w5(hr){var Un=GO(dh(),ir);(!ir._updateHook||ir._updateHook(Un,hr)!==!0)&&Un.processNext(hr)}function sA(hr){var Un=ir.logger;Un?Gc(Un,2,73,hr):ci(hr)}})}return T}();function Qy(T,D,F,K){Lr(T,function(Q){if(Q&&Q[D])if(F)setTimeout(function(){return K(Q)},0);else try{K(Q)}catch{}})}var Vn=function(){function T(D){this.listeners=[];var F=!!(D||{}).perfEvtsSendAll;Fr(T,this,function(K){K[lt]=function(Q){K.listeners.push(Q)},K[ut]=function(Q){for(var de=On(K.listeners,Q);de>-1;)K.listeners.splice(de,1),de=On(K.listeners,Q)},K[ce]=function(Q){Qy(K.listeners,ce,!0,function(de){de[ce](Q)})},K[ue]=function(Q,de){Qy(K.listeners,ue,!0,function(Me){Me[ue](Q,de)})},K[Ue]=function(Q,de){Qy(K.listeners,Ue,de,function(Me){Me[Ue](Q,de)})},K[ct]=function(Q){Q&&(F||!Q.isChildEvt())&&Qy(K.listeners,ct,!1,function(de){Q.isAsync?setTimeout(function(){return de[ct](Q)},0):de[ct](Q)})}})}return T}(),S5=function(T){w(D,T);function D(){var F=T.call(this)||this;return Fr(D,F,function(K,Q){K.initialize=function(Qe,We,Mt,pt){Q.initialize(Qe,We,Mt||new My(Qe),pt||new Vn(Qe))},K.track=function(Qe){Bi(K.getPerfMgr(),function(){return"AppInsightsCore:track"},function(){Qe===null&&(Me(Qe),ci("Invalid telemetry item")),de(Qe),Q.track(Qe)},function(){return{item:Qe}},!Qe.sync)};function de(Qe){Je(Qe.name)&&(Me(Qe),ci("telemetry name required"))}function Me(Qe){var We=K.getNotifyMgr();We&&We.eventsDiscarded([Qe],2)}}),F}return D}(VF),C5=fc({CRITICAL:1,WARNING:2}),K_=fc({BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69,InvalidEvent:70,FailedMonitorAjaxSetRequestHeader:71,SendBrowserInfoOnUserInit:72,PluginException:73,NotificationException:74,SnippetScriptLoadFailure:99,InvalidInstrumentationKey:100,CannotParseAiBlobValue:101,InvalidContentBlob:102,TrackPageActionEventFailed:103,FailedAddingCustomDefinedRequestContext:104,InMemoryStorageBufferFull:105,InstrumentationKeyDeprecation:106}),JO="_aiHooks",HF=["req","rsp","hkErr","fnErr"];function Uw(T,D){if(T)for(var F=0;F<T.length&&!D(T[F],F);F++);}function Vc(T,D,F,K,Q){Q>=0&&Q<=2&&Uw(T,function(de,Me){var Qe=de.cbks,We=Qe[HF[Q]];if(We){D.ctx=function(){var Kt=K[Me]=K[Me]||{};return Kt};try{We.apply(D.inst,F)}catch(Kt){var Mt=D.err;try{var pt=Qe[HF[2]];pt&&(D.err=Kt,pt.apply(D.inst,F))}catch{}finally{D.err=Mt}}}})}function P5(T){return function(){var D=this,F=arguments,K=T.h,Q={name:T.n,inst:D,ctx:null,set:We},de=[],Me=Qe([Q],F);Q.evt=mo("event");function Qe(pt,Kt){return Uw(Kt,function(cr){pt.push(cr)}),pt}function We(pt,Kt){F=Qe([],F),F[pt]=Kt,Me=Qe([Q],F)}Vc(K,Q,Me,de,0);var Mt=T.f;if(Mt)try{Q.rslt=Mt.apply(D,F)}catch(pt){throw Q.err=pt,Vc(K,Q,Me,de,3),pt}return Vc(K,Q,Me,de,1),Q.rslt}}function Yy(T,D,F){var K=null;return T&&(pr(T,D)?K=T:F&&(K=Yy(er(T),D,!1))),K}function ZO(T,D,F){return T?vc(T[a],D,F,!1):null}function WF(T,D,F){return T?Hp(T[a],D,F,!1):null}function eA(T,D,F,K){var Q=F&&F[JO];if(!Q){Q={i:0,n:D,f:F,h:[]};var de=P5(Q);de[JO]=Q,T[D]=de}var Me={id:Q.i,cbks:K,rm:function(){var Qe=this.id;Uw(Q.h,function(We,Mt){if(We.id===Qe)return Q.h.splice(Mt,1),1})}};return Q.i++,Q.h.push(Me),Me}function vc(T,D,F,K){if(K===void 0&&(K=!0),T&&D&&F){var Q=Yy(T,D,K);if(Q){var de=Q[D];if(typeof de===i)return eA(Q,D,de,F)}}return null}function Hp(T,D,F,K){K===void 0&&(K=!0);var Q=null;return Uw(D,function(de){var Me=vc(T,de,F,K);Me&&(Q||(Q=[]),Q.push(Me))}),Q}function tA(T,D,F,K){if(T&&D&&F){var Q=Yy(T,D,K)||T;if(Q)return eA(Q,D,Q[D],F)}return null}t.AppInsightsCore=S5,t.BaseCore=VF,t.BaseTelemetryPlugin=HO,t.CoreUtils=kO,t.DiagnosticLogger=My,t.EventHelper=V_,t.EventsDiscardedReason=_l,t.InstrumentEvent=tA,t.InstrumentFunc=vc,t.InstrumentFuncs=Hp,t.InstrumentProto=ZO,t.InstrumentProtos=WF,t.LoggingSeverity=C5,t.MinChannelPriorty=n,t.NotificationManager=Vn,t.PerfEvent=fn,t.PerfManager=Ii,t.ProcessTelemetryContext=jF,t.Undefined=p5,t._InternalLogMessage=ww,t._InternalMessageId=K_,t.__getRegisteredEvents=a5,t._legacyCookieMgr=Bp,t._logInternalMessage=gt,t._throwInternal=Gc,t._warnToConsole=De,t.addEventHandler=NO,t.addEventListeners=AF,t.addPageHideEventListener=NF,t.addPageShowEventListener=DF,t.addPageUnloadEventListener=Wf,t.areCookiesSupported=xO,t.arrForEach=Lr,t.arrIndexOf=On,t.arrMap=E,t.arrReduce=x,t.attachEvent=AO,t.canUseCookies=kF,t.createClassFromInterface=hc,t.createCookieMgr=Gf,t.createEnumMap=gc,t.createEnumStyle=fc,t.createProcessTelemetryContext=$p,t.createTraceParent=Nw,t.createUniqueNamespace=ky,t.createUnloadHandlerContainer=Fw,t.createValueMap=la,t.dateNow=sr,t.deepFreeze=it,t.deleteCookie=qO,t.detachEvent=Lu,t.disableCookies=MF,t.doPerf=Bi,t.dumpObj=Ld,t.eventOff=B_,t.eventOn=U_,t.findMetaTag=uF,t.findNamedServerTiming=dF,t.findW3cTraceParent=UO,t.formatTraceParent=jd,t.generateW3CId=Aw,t.getConsole=bw,t.getCookie=m5,t.getCrypto=_w,t.getDebugExt=qd,t.getDebugListener=x_,t.getDocument=jp,t.getExceptionName=qr,t.getGblPerfMgr=gF,t.getGlobal=v,t.getGlobalInst=mo,t.getHistory=sF,t.getIEVersion=El,t.getJSON=_O,t.getLocation=bO,t.getMsCrypto=Sw,t.getNavigator=nu,t.getPerformance=T_,t.getSetValue=Hs,t.getWindow=vO,t.hasDocument=nF,t.hasHistory=iF,t.hasJSON=I_,t.hasNavigator=Ay,t.hasOwnProperty=pr,t.hasWindow=yO,t.initializePlugins=Pa,t.isArray=yt,t.isBeaconsSupported=oF,t.isBoolean=tn,t.isDate=$t,t.isError=Ir,t.isFetchSupported=aF,t.isFunction=Bt,t.isIE=Ny,t.isNotNullOrUndefined=Ye,t.isNotTruthy=Ni,t.isNotUndefined=It,t.isNullOrUndefined=Je,t.isNumber=$r,t.isObject=Kr,t.isReactNative=JY,t.isSafari=R_,t.isSampledFlag=qF,t.isString=Yt,t.isSymbol=ei,t.isTruthy=Jr,t.isTypeof=gr,t.isUndefined=dt,t.isValidSpanId=Yo,t.isValidTraceId=Dw,t.isValidTraceParent=Mw,t.isXhrSupported=cF,t.mergeEvtNamespace=j_,t.mwcRandom32=EO,t.mwcRandomSeed=A_,t.newGuid=DO,t.newId=TO,t.normalizeJsName=pi,t.objCreate=C,t.objDefineAccessors=Se,t.objExtend=Ws,t.objForEachKey=Yi,t.objFreeze=zr,t.objKeys=he,t.objSeal=Vr,t.objToString=Cr,t.optimizeObject=Ad,t.parseTraceParent=jO,t.perfNow=MO,t.proxyAssign=po,t.proxyFunctionAs=ca,t.proxyFunctions=ru,t.random32=sh,t.randomValue=wO,t.removeEventHandler=OF,t.removeEventListeners=Vy,t.removePageHideEventListener=qu,t.removePageShowEventListener=d5,t.removePageUnloadEventListener=u5,t.safeGetCookieMgr=i5,t.safeGetLogger=hF,t.setCookie=Gp,t.setEnableEnvMocks=XY,t.setGblPerfMgr=PO,t.setValue=Or,t.sortPlugins=Wy,t.strContains=or,t.strEndsWith=Do,t.strFunction=i,t.strObject=s,t.strPrototype=a,t.strStartsWith=za,t.strTrim=j,t.strUndefined=o,t.throwError=ci,t.toISOString=mi,t.uaDisallowsSameSiteNone=By,t.unloadComponents=h5,t.useXDomainRequest=ZY,function(T,D,F){var K=Object.defineProperty;if(K)try{return K(T,D,F)}catch{}return F&&typeof F.value!==void 0&&(T[D]=F.value),T}(t,"__esModule",{value:!0})})}),LGe=ae((r,e)=>{(function(t,n){typeof r=="object"&&typeof e<"u"?e.exports=n():typeof define=="function"&&define.amd?define(n):(t=typeof globalThis<"u"?globalThis:t||self,t.Microsoft=t.Microsoft||{},t.Microsoft["DynamicProto-JS"]=n())})(r,function(){"use strict";var t="constructor",n="prototype",i="function",s="_dynInstFuncs",o="_isDynProxy",a="_dynClass",c="_dynCls$",l="_dynInstChk",u=l,d="_dfOpts",p="_unknown_",m="__proto__",f="_dyn"+m,y="_dynInstProto",v="useBaseInst",_="setInstFuncs",C=Object,P=C.getPrototypeOf,w=C.getOwnPropertyNames,R=0;function I(ue,Ue){return ue&&C[n].hasOwnProperty.call(ue,Ue)}function z(ue){return ue&&(ue===C[n]||ue===Array[n])}function G(ue){return z(ue)||ue===Function[n]}function L(ue){var Ue;if(ue){if(P)return P(ue);var ct=ue[m]||ue[n]||(ue[t]?ue[t][n]:null);Ue=ue[f]||ct,I(ue,f)||(delete ue[y],Ue=ue[f]=ue[y]||ue[f],ue[y]=ct)}return Ue}function H(ue,Ue){var ct=[];if(w)ct=w(ue);else for(var jt in ue)typeof jt=="string"&&I(ue,jt)&&ct.push(jt);if(ct&&ct.length>0)for(var tr=0;tr<ct.length;tr++)Ue(ct[tr])}function ee(ue,Ue,ct){return Ue!==t&&typeof ue[Ue]===i&&(ct||I(ue,Ue))}function ye(ue){throw new TypeError("DynamicProto: "+ue)}function $e(ue){var Ue={};return H(ue,function(ct){!Ue[ct]&&ee(ue,ct,!1)&&(Ue[ct]=ue[ct])}),Ue}function Be(ue,Ue){for(var ct=ue.length-1;ct>=0;ct--)if(ue[ct]===Ue)return!0;return!1}function Ct(ue,Ue,ct,jt){function tr(Re,Le,ht){var Ee=Le[ht];if(Ee[o]&&jt){var ie=Re[s]||{};ie[u]!==!1&&(Ee=(ie[Le[a]]||{})[ht]||Ee)}return function(){return Ee.apply(Re,arguments)}}var se={};H(ct,function(Re){se[Re]=tr(Ue,ct,Re)});for(var we=L(ue),Ne=[];we&&!G(we)&&!Be(Ne,we);)H(we,function(Re){!se[Re]&&ee(we,Re,!P)&&(se[Re]=tr(Ue,we,Re))}),Ne.push(we),we=L(we);return se}function Ge(ue,Ue,ct,jt){var tr=null;if(ue&&I(ct,a)){var se=ue[s]||{};if(tr=(se[ct[a]]||{})[Ue],tr||ye("Missing ["+Ue+"] "+i),!tr[l]&&se[u]!==!1){for(var we=!I(ue,Ue),Ne=L(ue),Re=[];we&&Ne&&!G(Ne)&&!Be(Re,Ne);){var Le=Ne[Ue];if(Le){we=Le===jt;break}Re.push(Ne),Ne=L(Ne)}try{we&&(ue[Ue]=tr),tr[l]=1}catch{se[u]=!1}}}return tr}function pe(ue,Ue,ct){var jt=Ue[ue];return jt===ct&&(jt=L(Ue)[ue]),typeof jt!==i&&ye("["+ue+"] is not a "+i),jt}function Ie(ue,Ue,ct,jt,tr){function se(Re,Le){var ht=function(){var Ee=Ge(this,Le,Re,ht)||pe(Le,Re,ht);return Ee.apply(this,arguments)};return ht[o]=1,ht}if(!z(ue)){var we=ct[s]=ct[s]||{},Ne=we[Ue]=we[Ue]||{};we[u]!==!1&&(we[u]=!!tr),H(ct,function(Re){ee(ct,Re,!1)&&ct[Re]!==jt[Re]&&(Ne[Re]=ct[Re],delete ct[Re],(!I(ue,Re)||ue[Re]&&!ue[Re][o])&&(ue[Re]=se(ue,Re)))})}}function Ve(ue,Ue){if(P){for(var ct=[],jt=L(Ue);jt&&!G(jt)&&!Be(ct,jt);){if(jt===ue)return!0;ct.push(jt),jt=L(jt)}return!1}return!0}function lt(ue,Ue){return I(ue,n)?ue.name||Ue||p:((ue||{})[t]||{}).name||Ue||p}function ut(ue,Ue,ct,jt){I(ue,n)||ye("theClass is an invalid class definition.");var tr=ue[n];Ve(tr,Ue)||ye("["+lt(ue)+"] is not in class hierarchy of ["+lt(Ue)+"]");var se=null;I(tr,a)?se=tr[a]:(se=c+lt(ue,"_")+"$"+R,R++,tr[a]=se);var we=ut[d],Ne=!!we[v];Ne&&jt&&jt[v]!==void 0&&(Ne=!!jt[v]);var Re=$e(Ue),Le=Ct(tr,Ue,Re,Ne);ct(Ue,Le);var ht=!!P&&!!we[_];ht&&jt&&(ht=!!jt[_]),Ie(tr,se,Ue,Re,ht!==!1)}var ce={setInstFuncs:!0,useBaseInst:!0};return ut[d]=ce,ut})}),qGe=ae((r,e)=>{(function(t,n){typeof r=="object"&&typeof e<"u"?n(r,N2t(),D2t(),LGe()):typeof define=="function"&&define.amd?define(["exports","@microsoft/applicationinsights-shims","@microsoft/applicationinsights-core-js","@microsoft/dynamicproto-js"],n):(t=typeof globalThis<"u"?globalThis:t||self,n(t.oneDS=t.oneDS||{},t.applicationinsightsShims,t.applicationinsightsCoreJs,t.dynamicProto))})(r,function(t,n,i,s){"use strict";function o(He){return He&&typeof He=="object"&&"default"in He?He.default:He}var a=o(s),c=i.createEnumStyle({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,CustomerContent_GenericContent:32}),l=i.createEnumStyle({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),u=i.createEnumStyle({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),d=i.createEnumStyle({Normal:1,Critical:2}),p=i.createEnumStyle({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),m=i.objFreeze(n.__assignFn(n.__assignFn({},i._InternalMessageId),i.createEnumStyle({AuthHandShakeError:501,AuthRedirectFail:502,BrowserCannotReadLocalStorage:503,BrowserCannotWriteLocalStorage:504,BrowserDoesNotSupportLocalStorage:505,CannotParseBiBlobValue:506,CannotParseDataAttribute:507,CVPluginNotAvailable:508,DroppedEvent:509,ErrorParsingAISessionCookie:510,ErrorProvidedChannels:511,FailedToGetCookies:512,FailedToInitializeCorrelationVector:513,FailedToInitializeSDK:514,InvalidContentBlob:515,InvalidCorrelationValue:516,SessionRenewalDateIsZero:517,SendPostOnCompleteFailure:518,PostResponseHandler:519,SDKNotInitialized:520}))),f,y="3.2.3",v="1DS-Web-JS-"+y,_="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",C="withCredentials",P="timeout",w=(f={},f[0]=0,f[2]=6,f[1]=1,f[3]=7,f[4098]=6,f[4097]=1,f[4099]=7,f),R=null,I=!!i.getDocument(),z=!!i.getWindow();function G(He){return!(He===""||i.isNullOrUndefined(He))}function L(He){if(He){var Xe=He.indexOf("-");if(Xe>-1)return He.substring(0,Xe)}return""}function H(){return R===null&&(R=!i.isUndefined(Uint8Array)&&!Ue()&&!i.isReactNative()),R}function ee(He){return!!(He&&i.isNumber(He)&&He>=1&&He<=4)}function ye(He,Xe,J){if(!Xe&&!G(Xe)||typeof He!="string")return null;var fe=typeof Xe;if(fe==="string"||fe==="number"||fe==="boolean"||i.isArray(Xe))Xe={value:Xe};else if(fe==="object"&&!Xe.hasOwnProperty("value"))Xe={value:J?JSON.stringify(Xe):Xe};else if(i.isNullOrUndefined(Xe.value)||Xe.value===""||!i.isString(Xe.value)&&!i.isNumber(Xe.value)&&!i.isBoolean(Xe.value)&&!i.isArray(Xe.value))return null;if(i.isArray(Xe.value)&&!ct(Xe.value))return null;if(!i.isNullOrUndefined(Xe.kind)){if(i.isArray(Xe.value)||!ce(Xe.kind))return null;Xe.value=Xe.value.toString()}return Xe}function $e(He,Xe,J){var fe=-1;if(!i.isUndefined(He))if(Xe>0&&(Xe===32?fe=8192:Xe<=13&&(fe=Xe<<5)),ue(J))fe===-1&&(fe=0),fe|=J;else{var Ke=w[tr(He)]||-1;fe!==-1&&Ke!==-1?fe|=Ke:Ke===6&&(fe=Ke)}return fe}function Be(){i.safeGetCookieMgr(null).setEnabled(!1)}function Ct(He,Xe,J){i.areCookiesSupported(null)&&i.safeGetCookieMgr(null).set(He,Xe,J*86400,null,"/")}function Ge(He){i.areCookiesSupported(null)&&i.safeGetCookieMgr(null).del(He)}function pe(He){return i.areCookiesSupported(null)?Ie(i.safeGetCookieMgr(null),He):""}function Ie(He,Xe,J){J===void 0&&(J=!0);var fe;return He&&(fe=He.get(Xe),J&&fe&&decodeURIComponent&&(fe=decodeURIComponent(fe))),fe||""}function Ve(He){He===void 0&&(He="D");var Xe=i.newGuid();return He==="B"?Xe="{"+Xe+"}":He==="P"?Xe="("+Xe+")":He==="N"&&(Xe=Xe.replace(/-/g,"")),Xe}function lt(He,Xe,J,fe,Ke){var nt={},Ut=!1,er=0,Cr=arguments.length,gr=Object[i.strPrototype],dt=arguments;for(gr.toString.call(dt[0])==="[object Boolean]"&&(Ut=dt[0],er++);er<Cr;er++){var He=dt[er];i.objForEachKey(He,function(Je,Ye){Ut&&Ye&&i.isObject(Ye)?i.isArray(Ye)?(nt[Je]=nt[Je]||[],i.arrForEach(Ye,function(pr,Kr){pr&&i.isObject(pr)?nt[Je][Kr]=lt(!0,nt[Je][Kr],pr):nt[Je][Kr]=pr})):nt[Je]=lt(!0,nt[Je],Ye):nt[Je]=Ye})}return nt}var ut=i.perfNow;function ce(He){return He===0||He>0&&He<=13||He===32}function ue(He){return He>=0&&He<=9}function Ue(){var He=i.getNavigator();if(!i.isUndefined(He)&&He.userAgent){var Xe=He.userAgent.toLowerCase();if((Xe.indexOf("safari")>=0||Xe.indexOf("firefox")>=0)&&Xe.indexOf("chrome")<0)return!0}return!1}function ct(He){return He.length>0}function jt(He,Xe){var J=He;J.timings=J.timings||{},J.timings.processTelemetryStart=J.timings.processTelemetryStart||{},J.timings.processTelemetryStart[Xe]=ut()}function tr(He){var Xe=0;if(He!=null){var J=typeof He;J==="string"?Xe=1:J==="number"?Xe=2:J==="boolean"?Xe=3:J===n.strShimObject&&(Xe=4,i.isArray(He)?(Xe=4096,He.length>0&&(Xe|=tr(He[0]))):i.hasOwnProperty(He,"value")&&(Xe=8192|tr(He.value)))}return Xe}var se={Version:y,FullVersionString:v,strUndefined:i.strUndefined,strObject:i.strObject,Undefined:i.strUndefined,arrForEach:i.arrForEach,arrIndexOf:i.arrIndexOf,arrMap:i.arrMap,arrReduce:i.arrReduce,objKeys:i.objKeys,toISOString:i.toISOString,isReactNative:i.isReactNative,isString:i.isString,isNumber:i.isNumber,isBoolean:i.isBoolean,isFunction:i.isFunction,isArray:i.isArray,isObject:i.isObject,strTrim:i.strTrim,isDocumentObjectAvailable:I,isWindowObjectAvailable:z,isValueAssigned:G,getTenantId:L,isBeaconsSupported:i.isBeaconsSupported,isUint8ArrayAvailable:H,isLatency:ee,sanitizeProperty:ye,getISOString:i.toISOString,useXDomainRequest:i.useXDomainRequest,getCommonSchemaMetaData:$e,cookieAvailable:i.areCookiesSupported,disallowsSameSiteNone:i.uaDisallowsSameSiteNone,setCookie:Ct,deleteCookie:Ge,getCookie:pe,createGuid:Ve,extend:lt,getTime:ut,isValueKind:ce,isArrayValid:ct,objDefineAccessors:i.objDefineAccessors,addPageUnloadEventListener:i.addPageUnloadEventListener,setProcessTelemetryTimings:jt,addEventHandler:i.addEventHandler,getFieldValueType:tr,strEndsWith:i.strEndsWith,objForEachKey:i.objForEachKey},we={_canUseCookies:void 0,isTypeof:i.isTypeof,isUndefined:i.isUndefined,isNullOrUndefined:i.isNullOrUndefined,hasOwnProperty:i.hasOwnProperty,isFunction:i.isFunction,isObject:i.isObject,isDate:i.isDate,isArray:i.isArray,isError:i.isError,isString:i.isString,isNumber:i.isNumber,isBoolean:i.isBoolean,toISOString:i.toISOString,arrForEach:i.arrForEach,arrIndexOf:i.arrIndexOf,arrMap:i.arrMap,arrReduce:i.arrReduce,strTrim:i.strTrim,objCreate:n.objCreateFn,objKeys:i.objKeys,objDefineAccessors:i.objDefineAccessors,addEventHandler:i.addEventHandler,dateNow:i.dateNow,isIE:i.isIE,disableCookies:Be,newGuid:i.newGuid,perfNow:i.perfNow,newId:i.newId,randomValue:i.randomValue,random32:i.random32,mwcRandomSeed:i.mwcRandomSeed,mwcRandom32:i.mwcRandom32,generateW3CId:i.generateW3CId};function Ne(){return!!i.getGlobalInst("chrome")}function Re(He,Xe,J,fe,Ke,nt){fe===void 0&&(fe=!1),Ke===void 0&&(Ke=!1);function Ut(Cr,gr,dt){try{Cr[gr]=dt}catch{}}var er=new XMLHttpRequest;return fe&&Ut(er,_,fe),J&&Ut(er,C,J),er.open(He,Xe,!Ke),J&&Ut(er,C,J),!Ke&&nt&&Ut(er,P,nt),er}var Le="version",ht="properties",Ee=function(He){n.__extendsFn(Xe,He);function Xe(){var J=He.call(this)||this;return J.pluginVersionStringArr=[],J.pluginVersionString="",a(Xe,J,function(fe,Ke){(!fe.logger||!fe.logger.queue)&&(fe.logger=new i.DiagnosticLogger({loggingLevelConsole:1})),fe.initialize=function(nt,Ut,er,Cr){i.doPerf(fe,function(){return"AppInsightsCore.initialize"},function(){if(nt){nt.endpointUrl||(nt.endpointUrl="https://browser.events.data.microsoft.com/OneCollector/1.0/");var gr=nt.propertyStorageOverride;if(gr&&(!gr.getProperty||!gr.setProperty))throw new Error("Invalid property storage override passed.");nt.channels&&i.arrForEach(nt.channels,function(Je){Je&&i.arrForEach(Je,function(Ye){if(Ye.identifier&&Ye.version){var pr=Ye.identifier+"="+Ye.version;fe.pluginVersionStringArr.push(pr)}})})}fe.getWParam=function(){return typeof document<"u"?0:-1},Ut&&i.arrForEach(Ut,function(Je){if(Je&&Je.identifier&&Je.version){var Ye=Je.identifier+"="+Je.version;fe.pluginVersionStringArr.push(Ye)}}),fe.pluginVersionString=fe.pluginVersionStringArr.join(";");try{Ke.initialize(nt,Ut,er,Cr),fe.pollInternalLogs("InternalLog")}catch(Je){var dt=fe.logger,It=i.dumpObj(Je);It.indexOf("channels")!==-1&&(It+=`
 - Channels must be provided through config.channels only!`),dt.throwInternal(1,514,"SDK Initialization Failed - no telemetry will be sent: "+It)}},function(){return{config:nt,extensions:Ut,logger:er,notificationManager:Cr}})},fe.track=function(nt){i.doPerf(fe,function(){return"AppInsightsCore.track"},function(){var Ut=nt;if(Ut){Ut.timings=Ut.timings||{},Ut.timings.trackStart=ut(),ee(Ut.latency)||(Ut.latency=1);var er=Ut.ext=Ut.ext||{};er.sdk=er.sdk||{},er.sdk.ver=v;var Cr=Ut.baseData=Ut.baseData||{};Cr[ht]||(Cr[ht]={});var gr=Cr[ht];gr[Le]||(gr[Le]=""),fe.pluginVersionString!==""&&(gr[Le]=fe.pluginVersionString)}Ke.track(Ut)},function(){return{item:nt}},!nt.sync)}}),J}return Xe}(i.AppInsightsCore),ie=function(He){n.__extendsFn(Xe,He);function Xe(){var J=He.call(this)||this;return a(Xe,J,function(fe,Ke){fe.initialize=function(nt,Ut,er,Cr){nt&&!nt.endpointUrl&&(nt.endpointUrl="https://browser.events.data.microsoft.com/OneCollector/1.0/"),fe.getWParam=function(){return I?0:-1};try{Ke.initialize(nt,Ut,er,Cr)}catch(gr){i._throwInternal(fe.logger,1,514,"Initialization Failed: "+i.dumpObj(gr)+`
 - Note: Channels must be provided through config.channels only`)}},fe.track=function(nt){var Ut=nt;if(Ut){var er=Ut.ext=Ut.ext||{};er.sdk=er.sdk||{},er.sdk.ver=v}Ke.track(Ut)}}),J}return Xe}(i.BaseCore),je=i.isFunction;function le(He,Xe,J){return function(fe){He[Xe]=fe,J()}}var _e=function(){function He(Xe){var J=0,fe=null,Ke=[];a(He,this,function(gr){gr.then=function(dt,It){return new He(function(Je,Ye){nt(dt,It,Je,Ye)})},gr.catch=function(dt){return gr.then(null,dt)}});function nt(gr,dt,It,Je){Ke.push(function(){var Ye;try{J===1?Ye=je(gr)?gr(fe):fe:Ye=je(dt)?dt(fe):fe,Ye instanceof He?Ye.then(It,Je):J===2&&!je(dt)?Je(Ye):It(Ye)}catch(pr){Je(pr);return}}),J!==0&&Ut()}function Ut(){if(Ke.length>0){var gr=Ke.slice();Ke=[],setTimeout(function(){for(var dt=0,It=gr.length;dt<It;++dt)try{gr[dt]()}catch{}},0)}}function er(gr){J===0&&(fe=gr,J=1,Ut())}function Cr(gr){J===0&&(fe=gr,J=2,Ut())}(function(){if(!je(Xe))throw new TypeError("ESPromise: resolvedFunc argument is not a Function");try{Xe(er,Cr)}catch(gr){Cr(gr)}})()}return He.resolve=function(Xe){return Xe instanceof He?Xe:Xe&&je(Xe.then)?new He(function(J,fe){try{Xe.then(J,fe)}catch(Ke){fe(Ke)}}):new He(function(J){J(Xe)})},He.reject=function(Xe){return new He(function(J,fe){fe(Xe)})},He.all=function(Xe){if(!(!Xe||!Xe.length))return new He(function(J,fe){try{for(var Ke=[],nt=0,Ut=0;Ut<Xe.length;Ut++){var er=Xe[Ut];er&&je(er.then)?(nt++,er.then(le(Ke,Ut,function(){--nt===0&&J(Ke)}),fe)):Ke[Ut]=er}nt===0&&setTimeout(function(){J(Ke)},0)}catch(Cr){fe(Cr)}})},He.race=function(Xe){return new He(function(J,fe){if(!(!Xe||!Xe.length))try{for(var Ke=function(Ut){var er=Xe[Ut];er&&je(er.then)?er.then(J,fe):setTimeout(function(){J(er)},0)},nt=0;nt<Xe.length;nt++)Ke(nt)}catch(Ut){fe(Ut)}})},He}(),B=6e5,be=0,ke=[],W=[],Oe=[];function Ht(){return new Date().getTime()}var _r=function(){function He(Xe,J){var fe=0,Ke=(Xe||"<unnamed>")+"."+be;be++,a(He,this,function(er){var Cr=null,gr=0;er.scheduleEvent=function(It,Je,Ye){var pr=Ke+"."+gr;gr++,Je&&(pr+="-("+Je+")");var Kr=pr+"{"+fe+"}";fe++;var Bt={evt:null,tm:Ht(),id:Kr,isRunning:!1,isAborted:!1};return Cr?Bt.evt=or(Bt,Cr):Bt.evt=mr(Bt),Cr=Bt,Cr.evt._schId=Kr,Bt.evt;function pi($t){for(var yt=Ht(),Pr=yt-B,Ir=$t.length,Yt=0;Yt<Ir;){var $r=$t[Yt];if($r&&$r.tm<Pr){var tn=null;$r.abort?(tn="Aborting ["+$r.id+"] due to Excessive runtime ("+(yt-$r.tm)+" ms)",$r.abort(tn)):tn="Removing ["+$r.id+"] due to Excessive runtime ("+(yt-$r.tm)+" ms)",Ut(tn),$t.splice(Yt,1),Ir--}else Yt++}}function Yi($t,yt){var Pr=!1,Ir=dt(ke,$t);if(Ir||(Ir=dt(Oe,$t),Pr=!0),Ir){Ir.to&&(clearTimeout(Ir.to),Ir.to=null);var Yt=Ht()-Ir.tm;yt?Pr?Ut("Timed out event ["+$t+"] finally complete -- "+Yt+" ms"):nt("Promise ["+$t+"] Complete -- "+Yt+" ms"):(Oe.push(Ir),Ut("Event ["+$t+"] Timed out and removed -- "+Yt+" ms"))}else nt("Failed to remove ["+$t+"] from running queue");Cr&&Cr.id===$t&&(Cr=null),pi(ke),pi(W),pi(Oe)}function Do($t,yt){return function(Pr){return Yi($t,!0),yt&&yt(Pr),Pr}}function aa($t,yt,Pr,Ir){yt.then(function(Yt){return Yt instanceof _e?(nt("Event ["+$t+"] returned a promise -- waiting"),aa($t,Yt,Pr,Ir),Yt):Do($t,Pr)(Yt)},Do($t,Ir))}function za($t,yt){var Pr=$t.id;return new _e(function(Ir,Yt){nt("Event ["+Pr+"] Starting -- waited for "+($t.wTm||"--")+" ms"),$t.isRunning=!0,$t.abort=function(tn){$t.abort=null,$t.isAborted=!0,Yi(Pr,!1),Yt(new Error(tn))};var $r=yt(Pr);$r instanceof _e?(Ye&&($t.to=setTimeout(function(){Yi(Pr,!1),Yt(new Error("Timed out after ["+Ye+"] ms"))},Ye)),aa(Pr,$r,function(tn){nt("Event ["+Pr+"] Resolving after "+(Ht()-$t.tm)+" ms"),Ir(tn)},Yt)):(nt("Promise ["+Pr+"] Auto completed as the start action did not return a promise"),Ir())})}function mr($t){var yt=Ht();return $t.wTm=yt-$t.tm,$t.tm=yt,$t.isAborted?_e.reject(new Error("["+pr+"] was aborted")):(ke.push($t),za($t,It))}function or($t,yt){var Pr=new _e(function(Ir,Yt){var $r=Ht()-yt.tm,tn=yt.id;nt("["+pr+"] is waiting for ["+tn+":"+$r+" ms] to complete before starting -- ["+W.length+"] waiting and ["+ke.length+"] running"),$t.abort=function(ei){$t.abort=null,dt(W,pr),$t.isAborted=!0,Yt(new Error(ei))},yt.evt.then(function(ei){dt(W,pr),mr($t).then(Ir,Yt)},function(ei){dt(W,pr),mr($t).then(Ir,Yt)})});return W.push($t),Pr}};function dt(It,Je){for(var Ye=0;Ye<It.length;Ye++)if(It[Ye].id===Je)return It.splice(Ye,1)[0];return null}});function nt(er){var Cr=i.getGlobal();Cr&&Cr.QUnit&&console&&console.log("ESPromiseScheduler["+Ke+"] "+er)}function Ut(er){J&&J.warnToConsole("ESPromiseScheduler["+Ke+"] "+er)}}return He.incomplete=function(){return ke},He.waitingToStart=function(){return W},He}(),fr=function(){function He(Xe){var J=this,fe={},Ke=[],nt=[];Xe&&nt.push(Xe);function Ut(dt,It){var Je,Ye=fe[dt];if(Ye&&(Je=Ye[It]),!Je&&Je!==null){if(i.isString(dt)&&i.isString(It))if(nt.length>0){for(var pr=0;pr<nt.length;pr++)if(nt[pr].handleField(dt,It)){Je={canHandle:!0,fieldHandler:nt[pr]};break}}else Ke.length===0&&(Je={canHandle:!0});if(!Je&&Je!==null){Je=null;for(var pr=0;pr<Ke.length;pr++)if(Ke[pr].handleField(dt,It)){Je={canHandle:!0,handler:Ke[pr],fieldHandler:null};break}}Ye||(Ye=fe[dt]={}),Ye[It]=Je}return Je}J.addSanitizer=function(dt){dt&&(Ke.push(dt),fe={})},J.addFieldSanitizer=function(dt){dt&&(nt.push(dt),fe={})},J.handleField=function(dt,It){var Je=Ut(dt,It);return Je?Je.canHandle:!1},J.value=function(dt,It,Je,Ye){var pr=Ut(dt,It);if(pr&&pr.canHandle){if(!pr||!pr.canHandle)return null;if(pr.handler)return pr.handler.value(dt,It,Je,Ye);if(!i.isString(It)||i.isNullOrUndefined(Je)||Je==="")return null;var Kr=null,Bt=tr(Je);if((Bt&8192)===8192){var pi=Bt&-8193;if(Kr=Je,!G(Kr.value)||pi!==1&&pi!==2&&pi!==3&&(pi&4096)!==4096)return null}else Bt===1||Bt===2||Bt===3||(Bt&4096)===4096?Kr=Cr(dt,It,Je):Bt===4&&(Kr=Cr(dt,It,Ye?JSON.stringify(Je):Je));if(Kr)return er(pr,dt,It,Bt,Kr,Ye)}return null},J.property=function(dt,It,Je,Ye){var pr=Ut(dt,It);if(!pr||!pr.canHandle||!i.isString(It)||i.isNullOrUndefined(Je)||!G(Je.value))return null;var Kr=tr(Je.value);return Kr===0?null:er(pr,dt,It,Kr,Je,Ye)};function er(dt,It,Je,Ye,pr,Kr){if(dt.handler)return dt.handler.property(It,Je,pr,Kr);if(!i.isNullOrUndefined(pr.kind)){if((Ye&4096)===4096||!ce(pr.kind))return null;pr.value=pr.value.toString()}return gr(dt.fieldHandler,It,Je,Ye,pr)}function Cr(dt,It,Je){return G(Je)?{value:Je}:null}function gr(dt,It,Je,Ye,pr){if(pr&&dt){var Kr=dt.getSanitizer(It,Je,Ye,pr.kind,pr.propertyType);if(Kr)if(Ye===4){var Bt={},pi=pr.value;i.objForEachKey(pi,function(Do,aa){var za=It+"."+Je;if(G(aa)){var mr=Cr(za,Do,aa);mr=gr(dt,za,Do,tr(aa),mr),mr&&(Bt[Do]=mr.value)}}),pr.value=Bt}else{var Yi={path:It,name:Je,type:Ye,prop:pr,sanitizer:J};pr=Kr.call(J,Yi)}}return pr}}return He.getFieldType=tr,He}();t.BaseTelemetryPlugin=i.BaseTelemetryPlugin,t.DiagnosticLogger=i.DiagnosticLogger,t.EventHelper=i.EventHelper,t.EventsDiscardedReason=i.EventsDiscardedReason,t.InternalAppInsightsCore=i.AppInsightsCore,t.InternalBaseCore=i.BaseCore,t.LoggingSeverity=i.LoggingSeverity,t.MinChannelPriorty=i.MinChannelPriorty,t.NotificationManager=i.NotificationManager,t.PerfEvent=i.PerfEvent,t.PerfManager=i.PerfManager,t.ProcessTelemetryContext=i.ProcessTelemetryContext,t.Undefined=i.strUndefined,t._InternalLogMessage=i._InternalLogMessage,t._InternalMessageId=i._InternalMessageId,t.__getRegisteredEvents=i.__getRegisteredEvents,t._throwInternal=i._throwInternal,t.addEventHandler=i.addEventHandler,t.addEventListeners=i.addEventListeners,t.addPageHideEventListener=i.addPageHideEventListener,t.addPageShowEventListener=i.addPageShowEventListener,t.addPageUnloadEventListener=i.addPageUnloadEventListener,t.areCookiesSupported=i.areCookiesSupported,t.arrForEach=i.arrForEach,t.arrIndexOf=i.arrIndexOf,t.arrMap=i.arrMap,t.arrReduce=i.arrReduce,t.attachEvent=i.attachEvent,t.cookieAvailable=i.areCookiesSupported,t.createCookieMgr=i.createCookieMgr,t.createEnumStyle=i.createEnumStyle,t.createProcessTelemetryContext=i.createProcessTelemetryContext,t.createTraceParent=i.createTraceParent,t.createUniqueNamespace=i.createUniqueNamespace,t.createUnloadHandlerContainer=i.createUnloadHandlerContainer,t.dateNow=i.dateNow,t.detachEvent=i.detachEvent,t.disallowsSameSiteNone=i.uaDisallowsSameSiteNone,t.doPerf=i.doPerf,t.dumpObj=i.dumpObj,t.eventOff=i.eventOff,t.eventOn=i.eventOn,t.findW3cTraceParent=i.findW3cTraceParent,t.formatTraceParent=i.formatTraceParent,t.generateW3CId=i.generateW3CId,t.getConsole=i.getConsole,t.getCrypto=i.getCrypto,t.getDocument=i.getDocument,t.getExceptionName=i.getExceptionName,t.getGlobal=i.getGlobal,t.getGlobalInst=i.getGlobalInst,t.getHistory=i.getHistory,t.getIEVersion=i.getIEVersion,t.getISOString=i.toISOString,t.getJSON=i.getJSON,t.getLocation=i.getLocation,t.getMsCrypto=i.getMsCrypto,t.getNavigator=i.getNavigator,t.getPerformance=i.getPerformance,t.getSetValue=i.getSetValue,t.getWindow=i.getWindow,t.hasDocument=i.hasDocument,t.hasHistory=i.hasHistory,t.hasJSON=i.hasJSON,t.hasNavigator=i.hasNavigator,t.hasOwnProperty=i.hasOwnProperty,t.hasWindow=i.hasWindow,t.isArray=i.isArray,t.isBeaconsSupported=i.isBeaconsSupported,t.isBoolean=i.isBoolean,t.isDate=i.isDate,t.isError=i.isError,t.isFetchSupported=i.isFetchSupported,t.isFunction=i.isFunction,t.isIE=i.isIE,t.isNotTruthy=i.isNotTruthy,t.isNullOrUndefined=i.isNullOrUndefined,t.isNumber=i.isNumber,t.isObject=i.isObject,t.isReactNative=i.isReactNative,t.isSampledFlag=i.isSampledFlag,t.isString=i.isString,t.isTruthy=i.isTruthy,t.isTypeof=i.isTypeof,t.isUndefined=i.isUndefined,t.isValidSpanId=i.isValidSpanId,t.isValidTraceId=i.isValidTraceId,t.isValidTraceParent=i.isValidTraceParent,t.isXhrSupported=i.isXhrSupported,t.mergeEvtNamespace=i.mergeEvtNamespace,t.newGuid=i.newGuid,t.newId=i.newId,t.normalizeJsName=i.normalizeJsName,t.objCreate=i.objCreate,t.objDefineAccessors=i.objDefineAccessors,t.objForEachKey=i.objForEachKey,t.objFreeze=i.objFreeze,t.objKeys=i.objKeys,t.objSeal=i.objSeal,t.optimizeObject=i.optimizeObject,t.parseTraceParent=i.parseTraceParent,t.perfNow=i.perfNow,t.proxyAssign=i.proxyAssign,t.proxyFunctionAs=i.proxyFunctionAs,t.proxyFunctions=i.proxyFunctions,t.random32=i.random32,t.randomValue=i.randomValue,t.removeEventHandler=i.removeEventHandler,t.removeEventListeners=i.removeEventListeners,t.removePageHideEventListener=i.removePageHideEventListener,t.removePageShowEventListener=i.removePageShowEventListener,t.removePageUnloadEventListener=i.removePageUnloadEventListener,t.safeGetCookieMgr=i.safeGetCookieMgr,t.safeGetLogger=i.safeGetLogger,t.setEnableEnvMocks=i.setEnableEnvMocks,t.setValue=i.setValue,t.strContains=i.strContains,t.strEndsWith=i.strEndsWith,t.strFunction=i.strFunction,t.strObject=i.strObject,t.strPrototype=i.strPrototype,t.strStartsWith=i.strStartsWith,t.strTrim=i.strTrim,t.strUndefined=i.strUndefined,t.throwError=i.throwError,t.toISOString=i.toISOString,t.useXDomainRequest=i.useXDomainRequest,t.AppInsightsCore=Ee,t.BaseCore=ie,t.CoreUtils=we,t.ESPromise=_e,t.ESPromiseScheduler=_r,t.EventLatency=l,t.EventPersistence=d,t.EventPropertyType=u,t.FullVersionString=v,t.TraceLevel=p,t.Utils=se,t.ValueKind=c,t.ValueSanitizer=fr,t.Version=y,t._ExtendedInternalMessageId=m,t.createGuid=Ve,t.deleteCookie=Ge,t.disableCookies=Be,t.extend=lt,t.getCommonSchemaMetaData=$e,t.getCookie=pe,t.getCookieValue=Ie,t.getFieldValueType=tr,t.getTenantId=L,t.getTime=ut,t.isArrayValid=ct,t.isChromium=Ne,t.isDocumentObjectAvailable=I,t.isLatency=ee,t.isUint8ArrayAvailable=H,t.isValueAssigned=G,t.isValueKind=ce,t.isWindowObjectAvailable=z,t.openXhr=Re,t.sanitizeProperty=ye,t.setCookie=Ct,t.setProcessTelemetryTimings=jt,function(He,Xe,J){var fe=Object.defineProperty;if(fe)try{return fe(He,Xe,J)}catch{}return J&&typeof J.value!==void 0&&(He[Xe]=J.value),He}(t,"__esModule",{value:!0})})}),M2t=ae((r,e)=>{(function(t,n){typeof r=="object"&&typeof e<"u"?n(r):typeof define=="function"&&define.amd?define(["exports"],n):(t=typeof globalThis<"u"?globalThis:t||self,n((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{},t.Microsoft.ApplicationInsights.Shims={})))})(r,function(t){"use strict";var n="function",i="object",s="undefined",o="prototype",a="hasOwnProperty",c="default",l=Object,u=l[o],d=l.assign,p=l.create,m=l.defineProperty,f=u[a],y=null;function v(se){return se===void 0&&(se=!0),(!y||!se)&&(typeof globalThis!==s&&globalThis&&(y=globalThis),typeof self!==s&&self&&(y=self),typeof window!==s&&window&&(y=window),typeof global!==s&&global&&(y=global)),y}function _(se){throw new TypeError(se)}function C(se){var we=p;if(we)return we(se);if(se==null)return{};var Ne=typeof se;Ne!==i&&Ne!==n&&_("Object prototype may only be an Object:"+se);function Re(){}return Re[o]=se,new Re}var P=(v()||{}).Symbol,w=(v()||{}).Reflect,R=!!w,I="decorate",z="metadata",G="getOwnPropertySymbols",L="iterator",H=function(se){for(var we,Ne=1,Re=arguments.length;Ne<Re;Ne++){we=arguments[Ne];for(var Le in we)u[a].call(we,Le)&&(se[Le]=we[Le])}return se},ee=d||H,ye=function(se,we){return ye=l.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ne,Re){Ne.__proto__=Re}||function(Ne,Re){for(var Le in Re)Re[a](Le)&&(Ne[Le]=Re[Le])},ye(se,we)};function $e(se,we){typeof we!==n&&we!==null&&_("Class extends value "+String(we)+" is not a constructor or null"),ye(se,we);function Ne(){this.constructor=se}se[o]=we===null?C(we):(Ne[o]=we[o],new Ne)}function Be(se,we){var Ne={};for(var Re in se)f.call(se,Re)&&we.indexOf(Re)<0&&(Ne[Re]=se[Re]);if(se!=null&&typeof l[G]===n)for(var Le=0,ht=l[G](se);Le<ht.length;Le++)we.indexOf(ht[Le])<0&&u.propertyIsEnumerable.call(se,ht[Le])&&(Ne[ht[Le]]=se[ht[Le]]);return Ne}function Ct(se,we,Ne,Re){var Le=arguments.length,ht=Le<3?we:Re===null?Re=l.getOwnPropertyDescriptor(we,Ne):Re,Ee;if(R&&typeof w[I]===n)ht=w[I](se,we,Ne,Re);else for(var ie=se.length-1;ie>=0;ie--)(Ee=se[ie])&&(ht=(Le<3?Ee(ht):Le>3?Ee(we,Ne,ht):Ee(we,Ne))||ht);return Le>3&&ht&&m(we,Ne,ht),ht}function Ge(se,we){return function(Ne,Re){we(Ne,Re,se)}}function pe(se,we){if(R&&w[z]===n)return w[z](se,we)}function Ie(se,we){for(var Ne in se)Ne!==c&&!f.call(we,Ne)&&Ve(we,se,Ne)}function Ve(se,we,Ne,Re){Re===void 0&&(Re=Ne),p?m(se,Re,{enumerable:!0,get:function(){return we[Ne]}}):se[Re]=we[Ne]}function lt(se){var we=typeof P===n&&P[L],Ne=we&&se[we],Re=0;if(Ne)return Ne.call(se);if(se&&typeof se.length=="number")return{next:function(){return se&&Re>=se.length&&(se=void 0),{value:se&&se[Re++],done:!se}}};_(we?"Object is not iterable.":"Symbol.iterator is not defined.")}function ut(se,we){var Ne=typeof P===n&&se[P[L]];if(!Ne)return se;var Re=Ne.call(se),Le,ht=[],Ee;try{for(;(we===void 0||we-- >0)&&!(Le=Re.next()).done;)ht.push(Le.value)}catch(ie){Ee={error:ie}}finally{try{Le&&!Le.done&&(Ne=Re.return)&&Ne.call(Re)}finally{if(Ee)throw Ee.error}}return ht}function ce(){for(var se=arguments,we=0,Ne=0,Re=se.length;Ne<Re;Ne++)we+=se[Ne].length;for(var Le=Array(we),ht=0,Ne=0;Ne<Re;Ne++)for(var Ee=se[Ne],ie=0,je=Ee.length;ie<je;ie++,ht++)Le[ht]=Ee[ie];return Le}function ue(se,we){for(var Ne=0,Re=we.length,Le=se.length;Ne<Re;Ne++,Le++)se[Le]=we[Ne];return se}function Ue(se,we){return m?m(se,"raw",{value:we}):se.raw=we,se}function ct(se){if(se&&se.__esModule)return se;var we={};if(se!=null)for(var Ne in se)Ne!==c&&Object.prototype.hasOwnProperty.call(se,Ne)&&Ve(we,se,Ne);return p?m(we,c,{enumerable:!0,value:se}):we[c]=se,we}function jt(se){return se&&se.__esModule?se:{strDefault:se}}function tr(){var se=v()||{};(function(we,Ne,Re,Le){we.__assign||(we.__assign=d||Ne),we.__extends||(we.__extends=Re),we.__createBinding||(we.__createBinding=Le)})(se,ee,$e,Ve),__assign||(__assign=se.__assign),__extends||(__extends=se.__extends),__createBinding||(__createBinding=se.__createBinding)}t.ObjAssign=d,t.ObjClass=l,t.ObjCreate=p,t.ObjDefineProperty=m,t.ObjHasOwnProperty=f,t.ObjProto=u,t.__assignFn=ee,t.__createBindingFn=Ve,t.__decorateFn=Ct,t.__exportStarFn=Ie,t.__exposeGlobalTsLib=tr,t.__extendsFn=$e,t.__importDefaultFn=jt,t.__importStarFn=ct,t.__makeTemplateObjectFn=Ue,t.__metadataFn=pe,t.__paramFn=Ge,t.__readFn=ut,t.__restFn=Be,t.__spreadArrayFn=ue,t.__spreadArraysFn=ce,t.__valuesFn=lt,t.getGlobal=v,t.objCreateFn=C,t.strDefault=c,t.strShimFunction=n,t.strShimHasOwnProperty=a,t.strShimObject=i,t.strShimPrototype=o,t.strShimUndefined=s,t.throwTypeError=_,function(se,we,Ne){var Re=Object.defineProperty;if(Re)try{return Re(se,we,Ne)}catch{}return Ne&&typeof Ne.value!==void 0&&(se[we]=Ne.value),se}(t,"__esModule",{value:!0})})}),k2t=ae((r,e)=>{(function(t,n){typeof r=="object"&&typeof e<"u"?n(r,M2t(),LGe(),qGe()):typeof define=="function"&&define.amd?define(["exports","@microsoft/applicationinsights-shims","@microsoft/dynamicproto-js","@microsoft/1ds-core-js"],n):(t=typeof globalThis<"u"?globalThis:t||self,n(t.oneDS=t.oneDS||{},t.applicationinsightsShims,t.dynamicProto,t._1dsCoreJs))})(r,function(t,n,i,s){"use strict";function o(mr){return mr&&typeof mr=="object"&&"default"in mr?mr.default:mr}var a=o(i),c="REAL_TIME",l="NEAR_REAL_TIME",u="BEST_EFFORT",d="POST",p="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",m="drop",f="send",y="requeue",v="rspFail",_="oth",C="no-cache, no-store",P="application/x-json-stream",w="cache-control",R="content-type",I="kill-tokens",z="kill-duration",G="kill-duration-seconds",L="time-delta-millis",H="client-version",ee="client-id",ye="time-delta-to-apply-millis",$e="upload-time",Be="apikey",Ct="AuthMsaDeviceTicket",Ge="AuthXToken",pe="NoResponseBody",Ie="msfpc";function Ve(mr){var or=(mr.ext||{}).intweb;return or&&s.isValueAssigned(or[Ie])?or[Ie]:null}function lt(mr){for(var or=null,$t=0;or===null&&$t<mr.length;$t++)or=Ve(mr[$t]);return or}var ut=function(){function mr(or,$t){var yt=$t?[].concat($t):[],Pr=this,Ir=lt(yt);Pr.iKey=function(){return or},Pr.Msfpc=function(){return Ir||""},Pr.count=function(){return yt.length},Pr.events=function(){return yt},Pr.addEvent=function(Yt){return Yt?(yt.push(Yt),Ir||(Ir=Ve(Yt)),!0):!1},Pr.split=function(Yt,$r){var tn;if(Yt<yt.length){var ei=yt.length-Yt;s.isNullOrUndefined($r)||(ei=$r<ei?$r:ei),tn=yt.splice(Yt,ei),Ir=lt(yt)}return new mr(or,tn)}}return mr.create=function(or,$t){return new mr(or,$t)},mr}(),ce=20,ue=3984588,Ue=65e3,ct=2e6,jt=Math.min(ct,Ue),tr="metadata",se="f",we=/\./,Ne=function(){function mr(or,$t,yt,Pr){var Ir="data",Yt="baseData",$r="ext",tn=!!Pr,ei=!0,Xi=$t,mi={};a(mr,this,function(ni){ni.createPayload=function(E,x,j,ne,re,he){return{apiKeys:[],payloadBlob:"",overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:E,isTeardown:x,isSync:j,isBeacon:ne,sendType:he,sendReason:re}},ni.appendPayload=function(E,x,j){var ne=E&&x&&!E.overflow;return ne&&s.doPerf(or,function(){return"Serializer:appendPayload"},function(){for(var re=x.events(),he=E.payloadBlob,Se=E.numEvents,ot=!1,it=[],zr=[],Vr=E.isBeacon,sr=Vr?Ue:ue,qr=Vr?jt:ct,Or=0,Hs=0;Or<re.length;){var Ni=re[Or];if(Ni){if(Se>=j){E.overflow=x.split(Or);break}var Jr=ni.getEventBlob(Ni);if(Jr&&Jr.length<=qr){var ci=Jr.length,bl=he.length;if(bl+ci>sr){E.overflow=x.split(Or);break}he&&(he+=`
`),he+=Jr,Hs++,Hs>ce&&(he.substr(0,1),Hs=0),ot=!0,Se++}else Jr?it.push(Ni):zr.push(Ni),re.splice(Or,1),Or--}Or++}if(it&&it.length>0&&E.sizeExceed.push(ut.create(x.iKey(),it)),zr&&zr.length>0&&E.failedEvts.push(ut.create(x.iKey(),zr)),ot){E.batches.push(x),E.payloadBlob=he,E.numEvents=Se;var po=x.iKey();s.arrIndexOf(E.apiKeys,po)===-1&&E.apiKeys.push(po)}},function(){return{payload:E,theBatch:{iKey:x.iKey(),evts:x.events()},max:j}}),ne},ni.getEventBlob=function(E){try{return s.doPerf(or,function(){return"Serializer.getEventBlob"},function(){var x={};x.name=E.name,x.time=E.time,x.ver=E.ver,x.iKey="o:"+s.getTenantId(E.iKey);var j={},ne=E[$r];ne&&(x[$r]=j,s.objForEachKey(ne,function(Se,ot){var it=j[Se]={};On(ot,it,"ext."+Se,!0,null,null,!0)}));var re=x[Ir]={};re.baseType=E.baseType;var he=re[Yt]={};return On(E.baseData,he,Yt,!1,[Yt],function(Se,ot,it){Re(j,Se,ot,it)},ei),On(E.data,re,Ir,!1,[],function(Se,ot,it){Re(j,Se,ot,it)},ei),JSON.stringify(x)},function(){return{item:E}})}catch{return null}};function Lr(E,x){var j=mi[E];return j===void 0&&(E.length>=7&&(j=s.strStartsWith(E,"ext.metadata")||s.strStartsWith(E,"ext.web")),mi[E]=j),j}function On(E,x,j,ne,re,he,Se){s.objForEachKey(E,function(ot,it){var zr=null;if(it||s.isValueAssigned(it)){var Vr=j,sr=ot,qr=re,Or=x;if(tn&&!ne&&we.test(ot)){var Hs=ot.split("."),Ni=Hs.length;if(Ni>1){qr&&(qr=qr.slice());for(var Jr=0;Jr<Ni-1;Jr++){var ci=Hs[Jr];Or=Or[ci]=Or[ci]||{},Vr+="."+ci,qr&&qr.push(ci)}sr=Hs[Ni-1]}}var bl=ne&&Lr(Vr);if(!bl&&Xi&&Xi.handleField(Vr,sr)?zr=Xi.value(Vr,sr,it,yt):zr=s.sanitizeProperty(sr,it,yt),zr){var po=zr.value;if(Or[sr]=po,he&&he(qr,sr,zr),Se&&typeof po=="object"&&!s.isArray(po)){var ca=qr;ca&&(ca=ca.slice(),ca.push(sr)),On(it,po,Vr+"."+sr,ne,ca,he,Se)}}}})}})}return mr}();function Re(mr,or,$t,yt){if(yt&&mr){var Pr=s.getCommonSchemaMetaData(yt.value,yt.kind,yt.propertyType);if(Pr>-1){var Ir=mr[tr];Ir||(Ir=mr[tr]={f:{}});var Yt=Ir[se];if(Yt||(Yt=Ir[se]={}),or)for(var $r=0;$r<or.length;$r++){var tn=or[$r];Yt[tn]||(Yt[tn]={f:{}});var ei=Yt[tn][se];ei||(ei=Yt[tn][se]={}),Yt=ei}Yt=Yt[$t]={},s.isArray(yt.value)?Yt.a={t:Pr}:Yt.t=Pr}}}var Le=.8,ht=1.2,Ee=3e3,ie=6e5;function je(mr){return!(mr>=300&&mr<500&&mr!=408&&mr!=429||mr==501||mr==505)}function le(mr){var or=0,$t=Ee*Le,yt=Ee*ht,Pr=Math.floor(Math.random()*(yt-$t))+$t;return or=Math.pow(2,mr)*Pr,Math.min(or,ie)}var _e=1e3,B=function(){function mr(){var or={};function $t(yt){var Pr=[];return yt&&s.arrForEach(yt,function(Ir){Pr.push(s.strTrim(Ir))}),Pr}a(mr,this,function(yt){yt.setKillSwitchTenants=function(Pr,Ir){if(Pr&&Ir)try{var Yt=$t(Pr.split(","));if(Ir==="this-request-only")return Yt;for(var $r=parseInt(Ir,10)*_e,tn=0;tn<Yt.length;++tn)or[Yt[tn]]=s.dateNow()+$r}catch{return[]}return[]},yt.isTenantKilled=function(Pr){var Ir=or,Yt=s.strTrim(Pr);return Ir[Yt]!==void 0&&Ir[Yt]>s.dateNow()?!0:(delete Ir[Yt],!1)}})}return mr}(),be=function(){function mr(){var or=!0,$t=!0,yt=!0,Pr="use-collector-delta",Ir=!1;a(mr,this,function(Yt){Yt.allowRequestSending=function(){return or},Yt.firstRequestSent=function(){yt&&(yt=!1,Ir||(or=!1))},Yt.shouldAddClockSkewHeaders=function(){return $t},Yt.getClockSkewHeaderValue=function(){return Pr},Yt.setClockSkew=function($r){Ir||($r?(Pr=$r,$t=!0,Ir=!0):$t=!1,or=!0)}})}return mr}(),ke,W="sendAttempt",Oe="&"+pe+"=true",Ht=(ke={},ke[1]=y,ke[100]=y,ke[200]="sent",ke[8004]=m,ke[8003]=m,ke),_r={},fr={};function He(mr,or,$t){_r[mr]=or,$t!==!1&&(fr[or]=mr)}He(Ct,Ct,!1),He(H,H),He(ee,"Client-Id"),He(Be,Be),He(ye,ye),He($e,$e),He(Ge,Ge);function Xe(mr){try{return mr.responseText}catch{}return""}function J(mr,or){var $t=!1;if(mr&&or){var yt=s.objKeys(mr);if(yt&&yt.length>0)for(var Pr=or.toLowerCase(),Ir=0;Ir<yt.length;Ir++){var Yt=yt[Ir];if(Yt&&s.hasOwnProperty(or,Yt)&&Yt.toLowerCase()===Pr){$t=!0;break}}}return $t}function fe(mr,or,$t,yt){or&&$t&&$t.length>0&&(yt&&_r[or]?(mr.hdrs[_r[or]]=$t,mr.useHdrs=!0):mr.url+="&"+or+"="+$t)}var Ke=function(){function mr(or,$t,yt,Pr,Ir){this._responseHandlers=[];var Yt="?cors=true&"+R.toLowerCase()+"="+P,$r=new B,tn=!1,ei=new be,Xi=!1,mi=0,ni,Lr,On,E=!0,x=[],j={},ne=[],re=null,he=!1,Se,ot=!1,it=!1,zr,Vr;a(mr,this,function(sr){var qr=!0;sr.initialize=function(qe,zt,Ft,Zt,Ar){var pn;Ar||(Ar={}),Yt=qe+Yt,it=s.isUndefined(Ar.avoidOptions)?!0:!Ar.avoidOptions,On=zt,Se=zt.getCookieMgr(),he=!On.config.disableEventTimings;var on=!!On.config.enableCompoundKey;ni=Ft;var In=Ar.valueSanitizer,rn=Ar.stringifyObjects;s.isUndefined(Ar.enableCompoundKey)||(on=!!Ar.enableCompoundKey),zr=Ar.xhrTimeout,Vr=Ar.disableXhrSync,Xi=!s.isReactNative(),re=new Ne(On,In,rn,on);var Nr=Zt,Fe=Ar.alwaysUseXhrOverride?Zt:null,wt=Ar.alwaysUseXhrOverride?Zt:null;if(!Zt){E=!1;var Gt=s.getLocation();Gt&&Gt.protocol&&Gt.protocol.toLowerCase()==="file:"&&(qr=!1);var ar=[];s.isReactNative()?ar=[2,1]:ar=[1,2,3];var yr=Ar.transports;yr&&(s.isNumber(yr)?ar=[yr].concat(ar):s.isArray(yr)&&(ar=yr.concat(ar))),Zt=Or(ar,!1),Nr=Or(ar,!0),Zt||ni.diagLog().warnToConsole("No available transport to send events")}Lr=(pn={},pn[0]=Zt,pn[1]=Nr||Or([1,2,3],!0),pn[2]=Fe||Or([3,2],!0)||Nr||Or([1],!0),pn[3]=wt||Or([2,3],!0)||Nr||Or([1],!0),pn)};function Or(qe,zt){for(var Ft=0,Zt=null,Ar=0;Zt==null&&Ar<qe.length;)Ft=qe[Ar],Ft===1?s.useXDomainRequest()?Zt=Hs:s.isXhrSupported()&&(Zt=Jr):Ft===2&&s.isFetchSupported(zt)?Zt=Ni:Xi&&Ft===3&&s.isBeaconsSupported()&&(Zt=bl),Ar++;return Zt?{_transport:Ft,_isSync:zt,sendPOST:Zt}:null}sr._getDbgPlgTargets=function(){return[Lr[0],$r,re,Lr]};function Hs(qe,zt,Ft){var Zt=new XDomainRequest;Zt.open(d,qe.urlString),qe.timeout&&(Zt.timeout=qe.timeout),Zt.onload=function(){var Ar=Xe(Zt);ci(zt,200,{},Ar),yc(Ar)},Zt.onerror=function(){ci(zt,400,{})},Zt.ontimeout=function(){ci(zt,500,{})},Zt.onprogress=function(){},Ft?Zt.send(qe.data):Ir.set(function(){Zt.send(qe.data)},0)}function Ni(qe,zt,Ft){var Zt,Ar=qe.urlString,pn=!1,on=!1,In=(Zt={body:qe.data,method:d},Zt[p]=!0,Zt);Ft&&(In.keepalive=!0,qe._sendReason===2&&(pn=!0,Ar+=Oe)),qr&&(In.credentials="include"),qe.headers&&s.objKeys(qe.headers).length>0&&(In.headers=qe.headers),fetch(Ar,In).then(function(rn){var Nr={},Fe="";rn.headers&&rn.headers.forEach(function(wt,Gt){Nr[Gt]=wt}),rn.body&&rn.text().then(function(wt){Fe=wt}),on||(on=!0,ci(zt,rn.status,Nr,Fe),yc(Fe))}).catch(function(rn){on||(on=!0,ci(zt,0,{}))}),pn&&!on&&(on=!0,ci(zt,200,{})),!on&&qe.timeout>0&&Ir.set(function(){on||(on=!0,ci(zt,500,{}))},qe.timeout)}function Jr(qe,zt,Ft){var Zt=qe.urlString;function Ar(rn,Nr,Fe){if(!rn[Fe]&&Nr&&Nr.getResponseHeader){var wt=Nr.getResponseHeader(Fe);wt&&(rn[Fe]=s.strTrim(wt))}return rn}function pn(rn){var Nr={};return rn.getAllResponseHeaders?Nr=Fp(rn.getAllResponseHeaders()):(Nr=Ar(Nr,rn,L),Nr=Ar(Nr,rn,z),Nr=Ar(Nr,rn,G)),Nr}function on(rn,Nr){ci(zt,rn.status,pn(rn),Nr)}Ft&&qe.disableXhrSync&&(Ft=!1);var In=s.openXhr(d,Zt,qr,!0,Ft,qe.timeout);s.objForEachKey(qe.headers,function(rn,Nr){In.setRequestHeader(rn,Nr)}),In.onload=function(){var rn=Xe(In);on(In,rn),yc(rn)},In.onerror=function(){on(In)},In.ontimeout=function(){on(In)},In.send(qe.data)}function ci(qe,zt,Ft,Zt){try{qe(zt,Ft,Zt)}catch(Ar){s._throwInternal(ni.diagLog(),2,518,s.dumpObj(Ar))}}function bl(qe,zt,Ft){var Zt=qe,Ar=200,pn=Zt._thePayload,on=qe.urlString+Oe;try{var In=s.getNavigator();if(!In.sendBeacon(on,qe.data))if(pn){var rn=[];s.arrForEach(pn.batches,function(Nr){if(rn&&Nr&&Nr.count()>0){for(var Fe=Nr.events(),wt=0;wt<Fe.length;wt++)if(!In.sendBeacon(on,re.getEventBlob(Fe[wt]))){rn.push(Nr.split(wt));break}}else rn.push(Nr.split(0))}),ua(rn,8003,pn.sendType,!0)}else Ar=0}catch(Nr){ni.diagLog().warnToConsole("Failed to send telemetry using sendBeacon API. Ex:"+s.dumpObj(Nr)),Ar=0}finally{ci(zt,Ar,{},"")}}function po(qe){return qe===2||qe===3}function ca(qe){return ot&&po(qe)&&(qe=2),qe}sr.addQueryStringParameter=function(qe,zt){for(var Ft=0;Ft<x.length;Ft++)if(x[Ft].name===qe){x[Ft].value=zt;return}x.push({name:qe,value:zt})},sr.addHeader=function(qe,zt){j[qe]=zt},sr.canSendRequest=function(){return ru()&&ei.allowRequestSending()},sr.sendQueuedRequests=function(qe,zt){s.isUndefined(qe)&&(qe=0),ot&&(qe=ca(qe),zt=2),Ad(ne,qe,0)&&fc(hc(),0,!1,qe,zt||0)},sr.isCompletelyIdle=function(){return!tn&&mi===0&&ne.length===0},sr.setUnloading=function(qe){ot=qe},sr.addBatch=function(qe){if(qe&&qe.count()>0){if($r.isTenantKilled(qe.iKey()))return!1;ne.push(qe)}return!0},sr.teardown=function(){ne.length>0&&fc(hc(),0,!0,2,2)},sr.pause=function(){tn=!0},sr.resume=function(){tn=!1,sr.sendQueuedRequests(0,4)},sr.sendSynchronousBatch=function(qe,zt,Ft){qe&&qe.count()>0&&(s.isNullOrUndefined(zt)&&(zt=1),ot&&(zt=ca(zt),Ft=2),fc([qe],0,!1,zt,Ft||0))};function ru(){return!tn&&mi<$t}function hc(){var qe=ne;return ne=[],qe}function Ad(qe,zt,Ft){var Zt=!1;return qe&&qe.length>0&&!tn&&Lr[zt]&&re&&(Zt=zt!==0||ru()&&(Ft>0||ei.allowRequestSending())),Zt}function Ws(qe){var zt={};return qe&&s.arrForEach(qe,function(Ft,Zt){zt[Zt]={iKey:Ft.iKey(),evts:Ft.events()}}),zt}function fc(qe,zt,Ft,Zt,Ar){if(!(!qe||qe.length===0)){if(tn){ua(qe,1,Zt);return}Zt=ca(Zt);try{var pn=qe,on=Zt!==0;s.doPerf(On,function(){return"HttpManager:_sendBatches"},function(In){In&&(qe=qe.slice(0));for(var rn=[],Nr=null,Fe=s.getTime(),wt=Lr[Zt]||(on?Lr[1]:Lr[0]),Gt=(ot||po(Zt)||wt&&wt._transport===3)&&la();Ad(qe,Zt,zt);){var ar=qe.shift();ar&&ar.count()>0&&($r.isTenantKilled(ar.iKey())?rn.push(ar):(Nr=Nr||re.createPayload(zt,Ft,on,Gt,Ar,Zt),re.appendPayload(Nr,ar,or)?Nr.overflow!==null&&(qe=[Nr.overflow].concat(qe),Nr.overflow=null,Sl(Nr,Fe,s.getTime(),Ar),Fe=s.getTime(),Nr=null):(Sl(Nr,Fe,s.getTime(),Ar),Fe=s.getTime(),qe=[ar].concat(qe),Nr=null)))}Nr&&Sl(Nr,Fe,s.getTime(),Ar),qe.length>0&&(ne=qe.concat(ne)),ua(rn,8004,Zt)},function(){return{batches:Ws(pn),retryCount:zt,isTeardown:Ft,isSynchronous:on,sendReason:Ar,useSendBeacon:po(Zt),sendType:Zt}},!on)}catch(In){s._throwInternal(ni.diagLog(),2,48,"Unexpected Exception sending batch: "+s.dumpObj(In))}}}function gc(qe,zt){var Ft={url:Yt,hdrs:{},useHdrs:!1};zt?(Ft.hdrs=s.extend(Ft.hdrs,j),Ft.useHdrs=s.objKeys(Ft.hdrs).length>0):s.objForEachKey(j,function(In,rn){fr[In]?fe(Ft,fr[In],rn,!1):(Ft.hdrs[In]=rn,Ft.useHdrs=!0)}),fe(Ft,ee,"NO_AUTH",zt),fe(Ft,H,s.FullVersionString,zt);var Zt="";s.arrForEach(qe.apiKeys,function(In){Zt.length>0&&(Zt+=","),Zt+=In}),fe(Ft,Be,Zt,zt),fe(Ft,$e,s.dateNow().toString(),zt);var Ar=Nu(qe);if(s.isValueAssigned(Ar)&&(Ft.url+="&ext.intweb.msfpc="+Ar),ei.shouldAddClockSkewHeaders()&&fe(Ft,ye,ei.getClockSkewHeaderValue(),zt),On.getWParam){var pn=On.getWParam();pn>=0&&(Ft.url+="&w="+pn)}for(var on=0;on<x.length;on++)Ft.url+="&"+x[on].name+"="+x[on].value;return Ft}function la(){return!E&&Xi&&s.isBeaconsSupported()}function _l(qe,zt,Ft){qe[zt]=qe[zt]||{},qe[zt][ni.identifier]=Ft}function Sl(qe,zt,Ft,Zt){if(qe&&qe.payloadBlob&&qe.payloadBlob.length>0){var Ar=!!sr.sendHook,pn=Lr[qe.sendType];!po(qe.sendType)&&qe.isBeacon&&qe.sendReason===2&&(pn=Lr[2]||Lr[3]||pn);var on=it;(qe.isBeacon||pn._transport===3)&&(on=!1);var In=gc(qe,on);on=on||In.useHdrs;var rn=s.getTime();s.doPerf(On,function(){return"HttpManager:_doPayloadSend"},function(){for(var Nr=0;Nr<qe.batches.length;Nr++)for(var Fe=qe.batches[Nr],wt=Fe.events(),Gt=0;Gt<wt.length;Gt++){var ar=wt[Gt];if(he){var yr=ar.timings=ar.timings||{};_l(yr,"sendEventStart",rn),_l(yr,"serializationStart",zt),_l(yr,"serializationCompleted",Ft)}ar[W]>0?ar[W]++:ar[W]=1}ua(qe.batches,1e3+(Zt||0),qe.sendType,!0);var vr={data:qe.payloadBlob,urlString:In.url,headers:In.hdrs,_thePayload:qe,_sendReason:Zt,timeout:zr};s.isUndefined(Vr)||(vr.disableXhrSync=!!Vr),on&&(J(vr.headers,w)||(vr.headers[w]=C),J(vr.headers,R)||(vr.headers[R]=P));var vs=null;pn&&(vs=function(Ks){ei.firstRequestSent();var Ko=function(oe,Ae){Cl(oe,Ae,qe,Zt)},Pl=qe.isTeardown||qe.isSync;try{pn.sendPOST(Ks,Ko,Pl),sr.sendListener&&sr.sendListener(vr,Ks,Pl,qe.isBeacon)}catch(oe){ni.diagLog().warnToConsole("Unexpected exception sending payload. Ex:"+s.dumpObj(oe)),ci(Ko,0,{})}}),s.doPerf(On,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(vs)if(qe.sendType===0&&mi++,Ar&&!qe.isBeacon&&pn._transport!==3){var Ks={data:vr.data,urlString:vr.urlString,headers:s.extend({},vr.headers),timeout:vr.timeout,disableXhrSync:vr.disableXhrSync},Ko=!1;s.doPerf(On,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{sr.sendHook(Ks,function(Pl){Ko=!0,!E&&!Pl._thePayload&&(Pl._thePayload=Pl._thePayload||vr._thePayload,Pl._sendReason=Pl._sendReason||vr._sendReason),vs(Pl)},qe.isSync||qe.isTeardown)}catch{Ko||vs(vr)}})}else vs(vr)})},function(){return{thePayload:qe,serializationStart:zt,serializationCompleted:Ft,sendReason:Zt}},qe.isSync)}qe.sizeExceed&&qe.sizeExceed.length>0&&ua(qe.sizeExceed,8003,qe.sendType),qe.failedEvts&&qe.failedEvts.length>0&&ua(qe.failedEvts,8002,qe.sendType)}function Wo(qe,zt){he&&s.arrForEach(qe,function(Ft){var Zt=Ft.timings=Ft.timings||{};_l(Zt,"sendEventCompleted",zt)})}function Cl(qe,zt,Ft,Zt){var Ar=9e3,pn=null,on=!1,In=!1;try{var rn=!0;if(typeof qe!==s.strUndefined){if(zt){ei.setClockSkew(zt[L]);var Nr=zt[z]||zt["kill-duration-seconds"];s.arrForEach($r.setKillSwitchTenants(zt[I],Nr),function(wt){s.arrForEach(Ft.batches,function(Gt){if(Gt.iKey()===wt){pn=pn||[];var ar=Gt.split(0);Ft.numEvents-=ar.count(),pn.push(ar)}})})}if(qe==200||qe==204){Ar=200;return}(!je(qe)||Ft.numEvents<=0)&&(rn=!1),Ar=9e3+qe%1e3}if(rn){Ar=100;var Fe=Ft.retryCnt;Ft.sendType===0&&(Fe<yt?(on=!0,ja(function(){Ft.sendType===0&&mi--,fc(Ft.batches,Fe+1,Ft.isTeardown,ot?2:Ft.sendType,5)},ot,le(Fe))):(In=!0,ot&&(Ar=8001)))}}finally{on||(ei.setClockSkew(),Fa(Ft,Ar,Zt,In)),ua(pn,8004,Ft.sendType)}}function Fa(qe,zt,Ft,Zt){try{Zt&&ni._backOffTransmission(),zt===200&&(!Zt&&!qe.isSync&&ni._clearBackOff(),Nd(qe.batches)),ua(qe.batches,zt,qe.sendType,!0)}finally{qe.sendType===0&&(mi--,Ft!==5&&sr.sendQueuedRequests(qe.sendType,Ft))}}function Nd(qe){if(he){var zt=s.getTime();s.arrForEach(qe,function(Ft){Ft&&Ft.count()>0&&Wo(Ft.events(),zt)})}}function ja(qe,zt,Ft){zt?qe():Ir.set(qe,Ft)}function Fp(qe){var zt={};if(s.isString(qe)){var Ft=s.strTrim(qe).split(/[\r\n]+/);s.arrForEach(Ft,function(Zt){if(Zt){var Ar=Zt.indexOf(": ");if(Ar!==-1){var pn=s.strTrim(Zt.substring(0,Ar)).toLowerCase(),on=s.strTrim(Zt.substring(Ar+1));zt[pn]=on}else zt[s.strTrim(Zt)]=1}})}return zt}function Nu(qe){for(var zt=0;zt<qe.batches.length;zt++){var Ft=qe.batches[zt].Msfpc();if(Ft)return encodeURIComponent(Ft)}return""}function yc(qe){var zt=sr._responseHandlers;try{for(var Ft=0;Ft<zt.length;Ft++)try{zt[Ft](qe)}catch(Ar){s._throwInternal(ni.diagLog(),1,519,"Response handler failed: "+Ar)}if(qe){var Zt=JSON.parse(qe);s.isValueAssigned(Zt.webResult)&&s.isValueAssigned(Zt.webResult[Ie])&&Se.set("MSFPC",Zt.webResult[Ie],365*86400)}}catch{}}function ua(qe,zt,Ft,Zt){if(qe&&qe.length>0&&Pr){var Ar=Pr[Dd(zt)];if(Ar){var pn=Ft!==0;s.doPerf(On,function(){return"HttpManager:_sendBatchesNotification"},function(){ja(function(){try{Ar.call(Pr,qe,zt,pn,Ft)}catch(on){s._throwInternal(ni.diagLog(),1,74,"send request notification failed: "+on)}},Zt||pn,0)},function(){return{batches:Ws(qe),reason:zt,isSync:pn,sendSync:Zt,sendType:Ft}},!pn)}}}function Dd(qe){var zt=Ht[qe];return s.isValueAssigned(zt)||(zt=_,qe>=9e3&&qe<=9999?zt=v:qe>=8e3&&qe<=8999?zt=m:qe>=1e3&&qe<=1999&&(zt=f)),zt}})}return mr}();function nt(mr,or){for(var $t=[],yt=2;yt<arguments.length;yt++)$t[yt-2]=arguments[yt];return setTimeout(mr,or,$t)}function Ut(mr){clearTimeout(mr)}function er(mr,or){return{set:mr||nt,clear:or||Ut}}var Cr=.25,gr=500,dt=20,It=6,Je=2,Ye=4,pr=2,Kr=1,Bt="eventsDiscarded",pi="overrideInstrumentationKey",Yi="maxEventRetryAttempts",Do="maxUnloadEventRetryAttempts",aa="addUnloadCb",za=function(mr){n.__extendsFn(or,mr);function or(){var $t=mr.call(this)||this;$t.identifier="PostChannel",$t.priority=1011,$t.version="3.2.3";var yt,Pr=!1,Ir=[],Yt=null,$r=!1,tn=0,ei=500,Xi=0,mi=1e4,ni={},Lr=c,On=null,E=null,x=0,j=0,ne,re,he={},Se,ot,it=-1,zr,Vr=!0,sr=!1,qr=It,Or=Je,Hs,Ni;return a(or,$t,function(Jr,ci){fc(),Jr._getDbgPlgTargets=function(){return[re]},Jr.initialize=function(Fe,wt,Gt){s.doPerf(wt,function(){return"PostChannel:initialize"},function(){var ar=wt;ci.initialize(Fe,wt,Gt);try{var yr=!!wt[aa];Hs=s.mergeEvtNamespace(s.createUniqueNamespace(Jr.identifier),wt.evtNamespace&&wt.evtNamespace());var vr=Jr._getTelCtx();Fe.extensionConfig[Jr.identifier]=Fe.extensionConfig[Jr.identifier]||{},yt=vr.getExtCfg(Jr.identifier),Ni=er(yt.setTimeoutOverride,yt.clearTimeoutOverride),Vr=!yt.disableOptimizeObj&&s.isChromium(),bl(ar),yt.eventsLimitInMem>0&&(mi=yt.eventsLimitInMem),yt.immediateEventLimit>0&&(ei=yt.immediateEventLimit),yt.autoFlushEventsLimit>0&&(Se=yt.autoFlushEventsLimit),s.isNumber(yt[Yi])&&(qr=yt[Yi]),s.isNumber(yt[Do])&&(Or=yt[Do]),Nr(),yt.httpXHROverride&&yt.httpXHROverride.sendPOST&&(ne=yt.httpXHROverride),s.isValueAssigned(Fe.anonCookieName)&&re.addQueryStringParameter("anoncknm",Fe.anonCookieName),re.sendHook=yt.payloadPreprocessor,re.sendListener=yt.payloadListener;var vs=yt.overrideEndpointUrl?yt.overrideEndpointUrl:Fe.endpointUrl;Jr._notificationManager=Fe.extensionConfig.NotificationManager,re.initialize(vs,Jr.core,Jr,ne,yt);var Ks=Fe.disablePageUnloadEvents||[];s.addPageUnloadEventListener(po,Ks,Hs),s.addPageHideEventListener(po,Ks,Hs),s.addPageShowEventListener(ca,Fe.disablePageShowEvents,Hs)}catch(Ko){throw Jr.setInitialized(!1),Ko}},function(){return{coreConfig:Fe,core:wt,extensions:Gt}})},Jr.processTelemetry=function(Fe,wt){s.setProcessTelemetryTimings(Fe,Jr.identifier),wt=Jr._getTelCtx(wt);var Gt=wt.getExtCfg(Jr.identifier),ar=!!yt.disableTelemetry;Gt&&(ar=ar||!!Gt.disableTelemetry);var yr=Fe;!ar&&!Pr&&(yt[pi]&&(yr.iKey=yt[pi]),Gt&&Gt[pi]&&(yr.iKey=Gt[pi]),ru(yr,!0),sr?_l(2,2):Ws()),Jr.processNext(yr,wt)},Jr._doTeardown=function(Fe,wt){_l(2,2),Pr=!0,re.teardown(),s.removePageUnloadEventListener(null,Hs),s.removePageHideEventListener(null,Hs),s.removePageShowEventListener(null,Hs),fc()};function bl(Fe){var wt=Fe.getWParam;Fe.getWParam=function(){var Gt=0;return yt.ignoreMc1Ms0CookieProcessing&&(Gt=Gt|2),Gt|wt()}}function po(Fe){var wt=Fe||s.getWindow().event;wt.type!=="beforeunload"&&(sr=!0,re.setUnloading(sr)),_l(2,2)}function ca(Fe){sr=!1,re.setUnloading(sr)}function ru(Fe,wt){if(Fe.sendAttempt||(Fe.sendAttempt=0),Fe.latency||(Fe.latency=1),Fe.ext&&Fe.ext.trace&&delete Fe.ext.trace,Fe.ext&&Fe.ext.user&&Fe.ext.user.id&&delete Fe.ext.user.id,Vr&&(Fe.ext=s.optimizeObject(Fe.ext),Fe.baseData&&(Fe.baseData=s.optimizeObject(Fe.baseData)),Fe.data&&(Fe.data=s.optimizeObject(Fe.data))),Fe.sync){if(x||$r)Fe.latency=3,Fe.sync=!1;else if(re){Vr&&(Fe=s.optimizeObject(Fe)),re.sendSynchronousBatch(ut.create(Fe.iKey,[Fe]),Fe.sync===!0?1:Fe.sync,3);return}}var Gt=Fe.latency,ar=Xi,yr=mi;Gt===4&&(ar=tn,yr=ei);var vr=!1;if(ar<yr)vr=!Fa(Fe,wt);else{var vs=1,Ks=dt;Gt===4&&(vs=4,Ks=1),vr=!0,Nd(Fe.iKey,Fe.latency,vs,Ks)&&(vr=!Fa(Fe,wt))}vr&&Ft(Bt,[Fe],s.EventsDiscardedReason.QueueFull)}Jr.setEventQueueLimits=function(Fe,wt){mi=Fe>0?Fe:1e4,Se=wt>0?wt:0,Nr();var Gt=Xi>Fe;if(!Gt&&ot>0)for(var ar=1;!Gt&&ar<=3;ar++){var yr=he[ar];yr&&yr.batches&&s.arrForEach(yr.batches,function(vr){vr&&vr.count()>=ot&&(Gt=!0)})}Cl(!0,Gt)},Jr.pause=function(){la(),$r=!0,re.pause()},Jr.resume=function(){$r=!1,re.resume(),Ws()},Jr.addResponseHandler=function(Fe){re._responseHandlers.push(Fe)},Jr._loadTransmitProfiles=function(Fe){ua(),s.objForEachKey(Fe,function(wt,Gt){var ar=Gt.length;if(ar>=2){var yr=ar>2?Gt[2]:0;if(Gt.splice(0,ar-2),Gt[1]<0&&(Gt[0]=-1),Gt[1]>0&&Gt[0]>0){var vr=Gt[0]/Gt[1];Gt[0]=Math.ceil(vr)*Gt[1]}yr>=0&&Gt[1]>=0&&yr>Gt[1]&&(yr=Gt[1]),Gt.push(yr),ni[wt]=Gt}})},Jr.flush=function(Fe,wt,Gt){if(Fe===void 0&&(Fe=!0),!$r)if(Gt=Gt||1,Fe)Yt==null?(la(),Fp(1,0,Gt),Yt=gc(function(){Yt=null,Nu(wt,Gt)},0)):Ir.push(wt);else{var ar=la();hc(1,1,Gt),wt?.(),ar&&Ws()}},Jr.setMsaAuthTicket=function(Fe){re.addHeader(Ct,Fe)},Jr.hasEvents=Ad,Jr._setTransmitProfile=function(Fe){Lr!==Fe&&ni[Fe]!==void 0&&(la(),Lr=Fe,Ws())};function hc(Fe,wt,Gt){var ar=Fp(Fe,wt,Gt);return re.sendQueuedRequests(wt,Gt),ar}function Ad(){return Xi>0}function Ws(){if(it>=0&&Fp(it,0,zr)&&re.sendQueuedRequests(0,zr),tn>0&&!E&&!$r){var Fe=ni[Lr][2];Fe>=0&&(E=gc(function(){E=null,hc(4,0,1),Ws()},Fe))}var wt=ni[Lr][1];!On&&!Yt&&wt>=0&&!$r&&(Ad()?On=gc(function(){On=null,hc(j===0?3:1,0,1),j++,j%=2,Ws()},wt):j=0)}Jr._backOffTransmission=function(){x<Ye&&(x++,la(),Ws())},Jr._clearBackOff=function(){x&&(x=0,la(),Ws())};function fc(){yt=null,Pr=!1,Ir=[],Yt=null,$r=!1,tn=0,ei=500,Xi=0,mi=1e4,ni={},Lr=c,On=null,E=null,x=0,j=0,ne=null,he={},Se=void 0,ot=0,it=-1,zr=null,Vr=!0,sr=!1,qr=It,Or=Je,Hs=null,Ni=er(),re=new Ke(gr,pr,Kr,{requeue:qe,send:Ar,sent:pn,drop:on,rspFail:In,oth:rn},Ni),Dd(),Sl(),Nr()}function gc(Fe,wt){wt===0&&x&&(wt=1);var Gt=1e3;return x&&(Gt=le(x-1)),Ni.set(Fe,wt*Gt)}function la(){return On!==null?(Ni.clear(On),On=null,j=0,!0):!1}function _l(Fe,wt){la(),Yt&&(Ni.clear(Yt),Yt=null),$r||hc(1,Fe,wt)}function Sl(){he[4]={batches:[],iKeyMap:{}},he[3]={batches:[],iKeyMap:{}},he[2]={batches:[],iKeyMap:{}},he[1]={batches:[],iKeyMap:{}}}function Wo(Fe,wt,Gt){var ar=he[wt];ar||(wt=1,ar=he[wt]);var yr=ar.iKeyMap[Fe];return!yr&&Gt&&(yr=ut.create(Fe),ar.batches.push(yr),ar.iKeyMap[Fe]=yr),yr}function Cl(Fe,wt){re.canSendRequest()&&!x&&(Se>0&&Xi>Se&&(wt=!0),wt&&Yt==null&&Jr.flush(Fe,null,20))}function Fa(Fe,wt){Vr&&(Fe=s.optimizeObject(Fe));var Gt=Fe.latency,ar=Wo(Fe.iKey,Gt,!0);return ar.addEvent(Fe)?(Gt!==4?(Xi++,wt&&Fe.sendAttempt===0&&Cl(!Fe.sync,ot>0&&ar.count()>=ot)):tn++,!0):!1}function Nd(Fe,wt,Gt,ar){for(;Gt<=wt;){var yr=Wo(Fe,wt,!0);if(yr&&yr.count()>0){var vr=yr.split(0,ar),vs=vr.count();if(vs>0)return Gt===4?tn-=vs:Xi-=vs,Zt(Bt,[vr],s.EventsDiscardedReason.QueueFull),!0}Gt++}return ja(),!1}function ja(){for(var Fe=0,wt=0,Gt=function(yr){var vr=he[yr];vr&&vr.batches&&s.arrForEach(vr.batches,function(vs){yr===4?Fe+=vs.count():wt+=vs.count()})},ar=1;ar<=4;ar++)Gt(ar);Xi=wt,tn=Fe}function Fp(Fe,wt,Gt){var ar=!1,yr=wt===0;return!yr||re.canSendRequest()?s.doPerf(Jr.core,function(){return"PostChannel._queueBatches"},function(){for(var vr=[],vs=4;vs>=Fe;){var Ks=he[vs];Ks&&Ks.batches&&Ks.batches.length>0&&(s.arrForEach(Ks.batches,function(Ko){re.addBatch(Ko)?ar=ar||Ko&&Ko.count()>0:vr=vr.concat(Ko.events()),vs===4?tn-=Ko.count():Xi-=Ko.count()}),Ks.batches=[],Ks.iKeyMap={}),vs--}vr.length>0&&Ft(Bt,vr,s.EventsDiscardedReason.KillSwitch),ar&&it>=Fe&&(it=-1,zr=0)},function(){return{latency:Fe,sendType:wt,sendReason:Gt}},!yr):(it=it>=0?Math.min(it,Fe):Fe,zr=Math.max(zr,Gt)),ar}function Nu(Fe,wt){hc(1,0,wt),ja(),yc(function(){Fe&&Fe(),Ir.length>0?Yt=gc(function(){Yt=null,Nu(Ir.shift(),wt)},0):(Yt=null,Ws())})}function yc(Fe){re.isCompletelyIdle()?Fe():Yt=gc(function(){Yt=null,yc(Fe)},Cr)}function ua(){la(),Dd(),Lr=c,Ws()}function Dd(){ni={},ni[c]=[2,1,0],ni[l]=[6,3,0],ni[u]=[18,9,0]}function qe(Fe,wt){var Gt=[],ar=qr;sr&&(ar=Or),s.arrForEach(Fe,function(yr){yr&&yr.count()>0&&s.arrForEach(yr.events(),function(vr){vr&&(vr.sync&&(vr.latency=4,vr.sync=!1),vr.sendAttempt<ar?(s.setProcessTelemetryTimings(vr,Jr.identifier),ru(vr,!1)):Gt.push(vr))})}),Gt.length>0&&Ft(Bt,Gt,s.EventsDiscardedReason.NonRetryableStatus),sr&&_l(2,2)}function zt(Fe,wt){var Gt=Jr._notificationManager||{},ar=Gt[Fe];if(ar)try{ar.apply(Gt,wt)}catch(yr){s._throwInternal(Jr.diagLog(),1,74,Fe+" notification failed: "+yr)}}function Ft(Fe,wt){for(var Gt=[],ar=2;ar<arguments.length;ar++)Gt[ar-2]=arguments[ar];wt&&wt.length>0&&zt(Fe,[wt].concat(Gt))}function Zt(Fe,wt){for(var Gt=[],ar=2;ar<arguments.length;ar++)Gt[ar-2]=arguments[ar];wt&&wt.length>0&&s.arrForEach(wt,function(yr){yr&&yr.count()>0&&zt(Fe,[yr.events()].concat(Gt))})}function Ar(Fe,wt,Gt){Fe&&Fe.length>0&&zt("eventsSendRequest",[wt>=1e3&&wt<=1999?wt-1e3:0,Gt!==!0])}function pn(Fe,wt){Zt("eventsSent",Fe,wt),Ws()}function on(Fe,wt){Zt(Bt,Fe,wt>=8e3&&wt<=8999?wt-8e3:s.EventsDiscardedReason.Unknown)}function In(Fe){Zt(Bt,Fe,s.EventsDiscardedReason.NonRetryableStatus),Ws()}function rn(Fe,wt){Zt(Bt,Fe,s.EventsDiscardedReason.Unknown),Ws()}function Nr(){!yt||!yt.disableAutoBatchFlushLimit?ot=Math.max(gr*(pr+1),mi/6):ot=0}s.objDefineAccessors(Jr,"_setTimeoutOverride",function(){return Ni.set},function(Fe){Ni=er(Fe,Ni.clear)}),s.objDefineAccessors(Jr,"_clearTimeoutOverride",function(){return Ni.clear},function(Fe){Ni=er(Ni.set,Fe)})}),$t}return or}(s.BaseTelemetryPlugin);t.BE_PROFILE=u,t.NRT_PROFILE=l,t.PostChannel=za,t.RT_PROFILE=c,function(mr,or,$t){var yt=Object.defineProperty;if(yt)try{return yt(mr,or,$t)}catch{}return $t&&typeof $t.value!==void 0&&(mr[or]=$t.value),mr}(t,"__esModule",{value:!0})})}),Oc=ae((r,e)=>{"use strict";var t=function(){function n(){}return n.info=function(i){for(var s=[],o=1;o<arguments.length;o++)s[o-1]=arguments[o];n.enableDebug&&console.info(n.TAG+i,s)},n.warn=function(i){for(var s=[],o=1;o<arguments.length;o++)s[o-1]=arguments[o];n.disableWarnings||console.warn(n.TAG+i,s)},n.enableDebug=!1,n.disableWarnings=!1,n.disableErrors=!1,n.TAG="ApplicationInsights:",n}();e.exports=t}),zGe=ae(r=>{"use strict";var e=r&&r.__assign||function(){return e=Object.assign||function(s){for(var o,a=1,c=arguments.length;a<c;a++){o=arguments[a];for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(s[l]=o[l])}return s},e.apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0}),r.AsyncScopeManager=r.OpenTelemetryScopeManagerWrapper=void 0;var t=F0(),n=require("events"),i=function(){function s(){}return s.prototype.active=function(){var o=this,a=t.CorrelationContextManager.getCurrentContext();return e(e({},a),{getValue:function(c){return o._activeSymbol?c===o._activeSymbol?a:!1:(o._activeSymbol=c,a)},setValue:function(){}})},s.prototype.with=function(o,a){var c=o.parentSpanId,l=o.name,u=s._spanToContext(o,c,l);return t.CorrelationContextManager.runWithContext(u,a)()},s.prototype.bind=function(o){return typeof o=="function"?t.CorrelationContextManager.wrapCallback(o):(o instanceof n.EventEmitter&&t.CorrelationContextManager.wrapEmitter(o),o)},s.prototype.enable=function(){return t.CorrelationContextManager.enable(),this},s.prototype.disable=function(){return t.CorrelationContextManager.disable(),this},s._spanToContext=function(o,a,c){var l=a?"|"+o.spanContext().traceId+"."+a+".":o.spanContext().traceId,u=e(e({},o.spanContext()),{traceFlags:o.spanContext().traceFlags}),d=t.CorrelationContextManager.spanToContextObject(u,l,c);return d},s}();r.OpenTelemetryScopeManagerWrapper=i,r.AsyncScopeManager=new i}),L2t=ae((r,e)=>{r=e.exports=le;var t;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?t=function(){var E=Array.prototype.slice.call(arguments,0);E.unshift("SEMVER"),console.log.apply(console,E)}:t=function(){},r.SEMVER_SPEC_VERSION="2.0.0";var n=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,s=16,o=r.re=[],a=r.src=[],c=0,l=c++;a[l]="0|[1-9]\\d*";var u=c++;a[u]="[0-9]+";var d=c++;a[d]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var p=c++;a[p]="("+a[l]+")\\.("+a[l]+")\\.("+a[l]+")";var m=c++;a[m]="("+a[u]+")\\.("+a[u]+")\\.("+a[u]+")";var f=c++;a[f]="(?:"+a[l]+"|"+a[d]+")";var y=c++;a[y]="(?:"+a[u]+"|"+a[d]+")";var v=c++;a[v]="(?:-("+a[f]+"(?:\\."+a[f]+")*))";var _=c++;a[_]="(?:-?("+a[y]+"(?:\\."+a[y]+")*))";var C=c++;a[C]="[0-9A-Za-z-]+";var P=c++;a[P]="(?:\\+("+a[C]+"(?:\\."+a[C]+")*))";var w=c++,R="v?"+a[p]+a[v]+"?"+a[P]+"?";a[w]="^"+R+"$";var I="[v=\\s]*"+a[m]+a[_]+"?"+a[P]+"?",z=c++;a[z]="^"+I+"$";var G=c++;a[G]="((?:<|>)?=?)";var L=c++;a[L]=a[u]+"|x|X|\\*";var H=c++;a[H]=a[l]+"|x|X|\\*";var ee=c++;a[ee]="[v=\\s]*("+a[H]+")(?:\\.("+a[H]+")(?:\\.("+a[H]+")(?:"+a[v]+")?"+a[P]+"?)?)?";var ye=c++;a[ye]="[v=\\s]*("+a[L]+")(?:\\.("+a[L]+")(?:\\.("+a[L]+")(?:"+a[_]+")?"+a[P]+"?)?)?";var $e=c++;a[$e]="^"+a[G]+"\\s*"+a[ee]+"$";var Be=c++;a[Be]="^"+a[G]+"\\s*"+a[ye]+"$";var Ct=c++;a[Ct]="(?:^|[^\\d])(\\d{1,"+s+"})(?:\\.(\\d{1,"+s+"}))?(?:\\.(\\d{1,"+s+"}))?(?:$|[^\\d])";var Ge=c++;a[Ge]="(?:~>?)";var pe=c++;a[pe]="(\\s*)"+a[Ge]+"\\s+",o[pe]=new RegExp(a[pe],"g");var Ie="$1~",Ve=c++;a[Ve]="^"+a[Ge]+a[ee]+"$";var lt=c++;a[lt]="^"+a[Ge]+a[ye]+"$";var ut=c++;a[ut]="(?:\\^)";var ce=c++;a[ce]="(\\s*)"+a[ut]+"\\s+",o[ce]=new RegExp(a[ce],"g");var ue="$1^",Ue=c++;a[Ue]="^"+a[ut]+a[ee]+"$";var ct=c++;a[ct]="^"+a[ut]+a[ye]+"$";var jt=c++;a[jt]="^"+a[G]+"\\s*("+I+")$|^$";var tr=c++;a[tr]="^"+a[G]+"\\s*("+R+")$|^$";var se=c++;a[se]="(\\s*)"+a[G]+"\\s*("+I+"|"+a[ee]+")",o[se]=new RegExp(a[se],"g");var we="$1$2$3",Ne=c++;a[Ne]="^\\s*("+a[ee]+")\\s+-\\s+("+a[ee]+")\\s*$";var Re=c++;a[Re]="^\\s*("+a[ye]+")\\s+-\\s+("+a[ye]+")\\s*$";var Le=c++;for(a[Le]="(<|>)?=?\\s*\\*",ht=0;ht<c;ht++)t(ht,a[ht]),o[ht]||(o[ht]=new RegExp(a[ht]));var ht;r.parse=Ee;function Ee(E,x){if((!x||typeof x!="object")&&(x={loose:!!x,includePrerelease:!1}),E instanceof le)return E;if(typeof E!="string"||E.length>n)return null;var j=x.loose?o[z]:o[w];if(!j.test(E))return null;try{return new le(E,x)}catch{return null}}r.valid=ie;function ie(E,x){var j=Ee(E,x);return j?j.version:null}r.clean=je;function je(E,x){var j=Ee(E.trim().replace(/^[=v]+/,""),x);return j?j.version:null}r.SemVer=le;function le(E,x){if((!x||typeof x!="object")&&(x={loose:!!x,includePrerelease:!1}),E instanceof le){if(E.loose===x.loose)return E;E=E.version}else if(typeof E!="string")throw new TypeError("Invalid Version: "+E);if(E.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof le))return new le(E,x);t("SemVer",E,x),this.options=x,this.loose=!!x.loose;var j=E.trim().match(x.loose?o[z]:o[w]);if(!j)throw new TypeError("Invalid Version: "+E);if(this.raw=E,this.major=+j[1],this.minor=+j[2],this.patch=+j[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");j[4]?this.prerelease=j[4].split(".").map(function(ne){if(/^[0-9]+$/.test(ne)){var re=+ne;if(re>=0&&re<i)return re}return ne}):this.prerelease=[],this.build=j[5]?j[5].split("."):[],this.format()}le.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},le.prototype.toString=function(){return this.version},le.prototype.compare=function(E){return t("SemVer.compare",this.version,this.options,E),E instanceof le||(E=new le(E,this.options)),this.compareMain(E)||this.comparePre(E)},le.prototype.compareMain=function(E){return E instanceof le||(E=new le(E,this.options)),ke(this.major,E.major)||ke(this.minor,E.minor)||ke(this.patch,E.patch)},le.prototype.comparePre=function(E){if(E instanceof le||(E=new le(E,this.options)),this.prerelease.length&&!E.prerelease.length)return-1;if(!this.prerelease.length&&E.prerelease.length)return 1;if(!this.prerelease.length&&!E.prerelease.length)return 0;var x=0;do{var j=this.prerelease[x],ne=E.prerelease[x];if(t("prerelease compare",x,j,ne),j===void 0&&ne===void 0)return 0;if(ne===void 0)return 1;if(j===void 0)return-1;if(j!==ne)return ke(j,ne)}while(++x)},le.prototype.inc=function(E,x){switch(E){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",x);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",x);break;case"prepatch":this.prerelease.length=0,this.inc("patch",x),this.inc("pre",x);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",x),this.inc("pre",x);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var j=this.prerelease.length;--j>=0;)typeof this.prerelease[j]=="number"&&(this.prerelease[j]++,j=-2);j===-1&&this.prerelease.push(0)}x&&(this.prerelease[0]===x?isNaN(this.prerelease[1])&&(this.prerelease=[x,0]):this.prerelease=[x,0]);break;default:throw new Error("invalid increment argument: "+E)}return this.format(),this.raw=this.version,this},r.inc=_e;function _e(E,x,j,ne){typeof j=="string"&&(ne=j,j=void 0);try{return new le(E,j).inc(x,ne).version}catch{return null}}r.diff=B;function B(E,x){if(Ut(E,x))return null;var j=Ee(E),ne=Ee(x),re="";if(j.prerelease.length||ne.prerelease.length){re="pre";var he="prerelease"}for(var Se in j)if((Se==="major"||Se==="minor"||Se==="patch")&&j[Se]!==ne[Se])return re+Se;return he}r.compareIdentifiers=ke;var be=/^[0-9]+$/;function ke(E,x){var j=be.test(E),ne=be.test(x);return j&&ne&&(E=+E,x=+x),E===x?0:j&&!ne?-1:ne&&!j?1:E<x?-1:1}r.rcompareIdentifiers=W;function W(E,x){return ke(x,E)}r.major=Oe;function Oe(E,x){return new le(E,x).major}r.minor=Ht;function Ht(E,x){return new le(E,x).minor}r.patch=_r;function _r(E,x){return new le(E,x).patch}r.compare=fr;function fr(E,x,j){return new le(E,j).compare(new le(x,j))}r.compareLoose=He;function He(E,x){return fr(E,x,!0)}r.rcompare=Xe;function Xe(E,x,j){return fr(x,E,j)}r.sort=J;function J(E,x){return E.sort(function(j,ne){return r.compare(j,ne,x)})}r.rsort=fe;function fe(E,x){return E.sort(function(j,ne){return r.rcompare(j,ne,x)})}r.gt=Ke;function Ke(E,x,j){return fr(E,x,j)>0}r.lt=nt;function nt(E,x,j){return fr(E,x,j)<0}r.eq=Ut;function Ut(E,x,j){return fr(E,x,j)===0}r.neq=er;function er(E,x,j){return fr(E,x,j)!==0}r.gte=Cr;function Cr(E,x,j){return fr(E,x,j)>=0}r.lte=gr;function gr(E,x,j){return fr(E,x,j)<=0}r.cmp=dt;function dt(E,x,j,ne){switch(x){case"===":return typeof E=="object"&&(E=E.version),typeof j=="object"&&(j=j.version),E===j;case"!==":return typeof E=="object"&&(E=E.version),typeof j=="object"&&(j=j.version),E!==j;case"":case"=":case"==":return Ut(E,j,ne);case"!=":return er(E,j,ne);case">":return Ke(E,j,ne);case">=":return Cr(E,j,ne);case"<":return nt(E,j,ne);case"<=":return gr(E,j,ne);default:throw new TypeError("Invalid operator: "+x)}}r.Comparator=It;function It(E,x){if((!x||typeof x!="object")&&(x={loose:!!x,includePrerelease:!1}),E instanceof It){if(E.loose===!!x.loose)return E;E=E.value}if(!(this instanceof It))return new It(E,x);t("comparator",E,x),this.options=x,this.loose=!!x.loose,this.parse(E),this.semver===Je?this.value="":this.value=this.operator+this.semver.version,t("comp",this)}var Je={};It.prototype.parse=function(E){var x=this.options.loose?o[jt]:o[tr],j=E.match(x);if(!j)throw new TypeError("Invalid comparator: "+E);this.operator=j[1],this.operator==="="&&(this.operator=""),j[2]?this.semver=new le(j[2],this.options.loose):this.semver=Je},It.prototype.toString=function(){return this.value},It.prototype.test=function(E){return t("Comparator.test",E,this.options.loose),this.semver===Je?!0:(typeof E=="string"&&(E=new le(E,this.options)),dt(E,this.operator,this.semver,this.options))},It.prototype.intersects=function(E,x){if(!(E instanceof It))throw new TypeError("a Comparator is required");(!x||typeof x!="object")&&(x={loose:!!x,includePrerelease:!1});var j;if(this.operator==="")return j=new Ye(E.value,x),Pr(this.value,j,x);if(E.operator==="")return j=new Ye(this.value,x),Pr(E.semver,j,x);var ne=(this.operator===">="||this.operator===">")&&(E.operator===">="||E.operator===">"),re=(this.operator==="<="||this.operator==="<")&&(E.operator==="<="||E.operator==="<"),he=this.semver.version===E.semver.version,Se=(this.operator===">="||this.operator==="<=")&&(E.operator===">="||E.operator==="<="),ot=dt(this.semver,"<",E.semver,x)&&(this.operator===">="||this.operator===">")&&(E.operator==="<="||E.operator==="<"),it=dt(this.semver,">",E.semver,x)&&(this.operator==="<="||this.operator==="<")&&(E.operator===">="||E.operator===">");return ne||re||he&&Se||ot||it},r.Range=Ye;function Ye(E,x){if((!x||typeof x!="object")&&(x={loose:!!x,includePrerelease:!1}),E instanceof Ye)return E.loose===!!x.loose&&E.includePrerelease===!!x.includePrerelease?E:new Ye(E.raw,x);if(E instanceof It)return new Ye(E.value,x);if(!(this instanceof Ye))return new Ye(E,x);if(this.options=x,this.loose=!!x.loose,this.includePrerelease=!!x.includePrerelease,this.raw=E,this.set=E.split(/\s*\|\|\s*/).map(function(j){return this.parseRange(j.trim())},this).filter(function(j){return j.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+E);this.format()}Ye.prototype.format=function(){return this.range=this.set.map(function(E){return E.join(" ").trim()}).join("||").trim(),this.range},Ye.prototype.toString=function(){return this.range},Ye.prototype.parseRange=function(E){var x=this.options.loose;E=E.trim();var j=x?o[Re]:o[Ne];E=E.replace(j,$t),t("hyphen replace",E),E=E.replace(o[se],we),t("comparator trim",E,o[se]),E=E.replace(o[pe],Ie),E=E.replace(o[ce],ue),E=E.split(/\s+/).join(" ");var ne=x?o[jt]:o[tr],re=E.split(" ").map(function(he){return Kr(he,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(re=re.filter(function(he){return!!he.match(ne)})),re=re.map(function(he){return new It(he,this.options)},this),re},Ye.prototype.intersects=function(E,x){if(!(E instanceof Ye))throw new TypeError("a Range is required");return this.set.some(function(j){return j.every(function(ne){return E.set.some(function(re){return re.every(function(he){return ne.intersects(he,x)})})})})},r.toComparators=pr;function pr(E,x){return new Ye(E,x).set.map(function(j){return j.map(function(ne){return ne.value}).join(" ").trim().split(" ")})}function Kr(E,x){return t("comp",E,x),E=Do(E,x),t("caret",E),E=pi(E,x),t("tildes",E),E=za(E,x),t("xrange",E),E=or(E,x),t("stars",E),E}function Bt(E){return!E||E.toLowerCase()==="x"||E==="*"}function pi(E,x){return E.trim().split(/\s+/).map(function(j){return Yi(j,x)}).join(" ")}function Yi(E,x){var j=x.loose?o[lt]:o[Ve];return E.replace(j,function(ne,re,he,Se,ot){t("tilde",E,ne,re,he,Se,ot);var it;return Bt(re)?it="":Bt(he)?it=">="+re+".0.0 <"+(+re+1)+".0.0":Bt(Se)?it=">="+re+"."+he+".0 <"+re+"."+(+he+1)+".0":ot?(t("replaceTilde pr",ot),it=">="+re+"."+he+"."+Se+"-"+ot+" <"+re+"."+(+he+1)+".0"):it=">="+re+"."+he+"."+Se+" <"+re+"."+(+he+1)+".0",t("tilde return",it),it})}function Do(E,x){return E.trim().split(/\s+/).map(function(j){return aa(j,x)}).join(" ")}function aa(E,x){t("caret",E,x);var j=x.loose?o[ct]:o[Ue];return E.replace(j,function(ne,re,he,Se,ot){t("caret",E,ne,re,he,Se,ot);var it;return Bt(re)?it="":Bt(he)?it=">="+re+".0.0 <"+(+re+1)+".0.0":Bt(Se)?re==="0"?it=">="+re+"."+he+".0 <"+re+"."+(+he+1)+".0":it=">="+re+"."+he+".0 <"+(+re+1)+".0.0":ot?(t("replaceCaret pr",ot),re==="0"?he==="0"?it=">="+re+"."+he+"."+Se+"-"+ot+" <"+re+"."+he+"."+(+Se+1):it=">="+re+"."+he+"."+Se+"-"+ot+" <"+re+"."+(+he+1)+".0":it=">="+re+"."+he+"."+Se+"-"+ot+" <"+(+re+1)+".0.0"):(t("no pr"),re==="0"?he==="0"?it=">="+re+"."+he+"."+Se+" <"+re+"."+he+"."+(+Se+1):it=">="+re+"."+he+"."+Se+" <"+re+"."+(+he+1)+".0":it=">="+re+"."+he+"."+Se+" <"+(+re+1)+".0.0"),t("caret return",it),it})}function za(E,x){return t("replaceXRanges",E,x),E.split(/\s+/).map(function(j){return mr(j,x)}).join(" ")}function mr(E,x){E=E.trim();var j=x.loose?o[Be]:o[$e];return E.replace(j,function(ne,re,he,Se,ot,it){t("xRange",E,ne,re,he,Se,ot,it);var zr=Bt(he),Vr=zr||Bt(Se),sr=Vr||Bt(ot),qr=sr;return re==="="&&qr&&(re=""),zr?re===">"||re==="<"?ne="<0.0.0":ne="*":re&&qr?(Vr&&(Se=0),ot=0,re===">"?(re=">=",Vr?(he=+he+1,Se=0,ot=0):(Se=+Se+1,ot=0)):re==="<="&&(re="<",Vr?he=+he+1:Se=+Se+1),ne=re+he+"."+Se+"."+ot):Vr?ne=">="+he+".0.0 <"+(+he+1)+".0.0":sr&&(ne=">="+he+"."+Se+".0 <"+he+"."+(+Se+1)+".0"),t("xRange return",ne),ne})}function or(E,x){return t("replaceStars",E,x),E.trim().replace(o[Le],"")}function $t(E,x,j,ne,re,he,Se,ot,it,zr,Vr,sr,qr){return Bt(j)?x="":Bt(ne)?x=">="+j+".0.0":Bt(re)?x=">="+j+"."+ne+".0":x=">="+x,Bt(it)?ot="":Bt(zr)?ot="<"+(+it+1)+".0.0":Bt(Vr)?ot="<"+it+"."+(+zr+1)+".0":sr?ot="<="+it+"."+zr+"."+Vr+"-"+sr:ot="<="+ot,(x+" "+ot).trim()}Ye.prototype.test=function(E){if(!E)return!1;typeof E=="string"&&(E=new le(E,this.options));for(var x=0;x<this.set.length;x++)if(yt(this.set[x],E,this.options))return!0;return!1};function yt(E,x,j){for(var ne=0;ne<E.length;ne++)if(!E[ne].test(x))return!1;if(x.prerelease.length&&!j.includePrerelease){for(ne=0;ne<E.length;ne++)if(t(E[ne].semver),E[ne].semver!==Je&&E[ne].semver.prerelease.length>0){var re=E[ne].semver;if(re.major===x.major&&re.minor===x.minor&&re.patch===x.patch)return!0}return!1}return!0}r.satisfies=Pr;function Pr(E,x,j){try{x=new Ye(x,j)}catch{return!1}return x.test(E)}r.maxSatisfying=Ir;function Ir(E,x,j){var ne=null,re=null;try{var he=new Ye(x,j)}catch{return null}return E.forEach(function(Se){he.test(Se)&&(!ne||re.compare(Se)===-1)&&(ne=Se,re=new le(ne,j))}),ne}r.minSatisfying=Yt;function Yt(E,x,j){var ne=null,re=null;try{var he=new Ye(x,j)}catch{return null}return E.forEach(function(Se){he.test(Se)&&(!ne||re.compare(Se)===1)&&(ne=Se,re=new le(ne,j))}),ne}r.minVersion=$r;function $r(E,x){E=new Ye(E,x);var j=new le("0.0.0");if(E.test(j)||(j=new le("0.0.0-0"),E.test(j)))return j;j=null;for(var ne=0;ne<E.set.length;++ne){var re=E.set[ne];re.forEach(function(he){var Se=new le(he.semver.version);switch(he.operator){case">":Se.prerelease.length===0?Se.patch++:Se.prerelease.push(0),Se.raw=Se.format();case"":case">=":(!j||Ke(j,Se))&&(j=Se);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+he.operator)}})}return j&&E.test(j)?j:null}r.validRange=tn;function tn(E,x){try{return new Ye(E,x).range||"*"}catch{return null}}r.ltr=ei;function ei(E,x,j){return mi(E,x,"<",j)}r.gtr=Xi;function Xi(E,x,j){return mi(E,x,">",j)}r.outside=mi;function mi(E,x,j,ne){E=new le(E,ne),x=new Ye(x,ne);var re,he,Se,ot,it;switch(j){case">":re=Ke,he=gr,Se=nt,ot=">",it=">=";break;case"<":re=nt,he=Cr,Se=Ke,ot="<",it="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Pr(E,x,ne))return!1;for(var zr=0;zr<x.set.length;++zr){var Vr=x.set[zr],sr=null,qr=null;if(Vr.forEach(function(Or){Or.semver===Je&&(Or=new It(">=0.0.0")),sr=sr||Or,qr=qr||Or,re(Or.semver,sr.semver,ne)?sr=Or:Se(Or.semver,qr.semver,ne)&&(qr=Or)}),sr.operator===ot||sr.operator===it||(!qr.operator||qr.operator===ot)&&he(E,qr.semver)||qr.operator===it&&Se(E,qr.semver))return!1}return!0}r.prerelease=ni;function ni(E,x){var j=Ee(E,x);return j&&j.prerelease.length?j.prerelease:null}r.intersects=Lr;function Lr(E,x,j){return E=new Ye(E,j),x=new Ye(x,j),E.intersects(x)}r.coerce=On;function On(E){if(E instanceof le)return E;if(typeof E!="string")return null;var x=E.match(o[Ct]);return x==null?null:Ee(x[1]+"."+(x[2]||"0")+"."+(x[3]||"0"))}}),DGe=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.makePatchingRequire=void 0;var e=require("path"),t=L2t(),n=require("module"),i=Object.keys(process.binding("natives")),s=n.prototype.require;function o(a){var c={};return function(l){var u=s.apply(this,arguments);if(a[l]){var d=n._resolveFilename(l,this);if(c.hasOwnProperty(d))return c[d];var p=void 0;if(i.indexOf(l)<0)try{p=s.call(this,e.join(l,"package.json")).version}catch{return u}else p=process.version.substring(1);var m=p.indexOf("-");m>=0&&(p=p.substring(0,m));for(var f=u,y=0,v=a[l];y<v.length;y++){var _=v[y];t.satisfies(p,_.versionSpecifier)&&(f=_.patch(f,d))}return c[d]=f}return u}}r.makePatchingRequire=o}),q2t=ae((r,e)=>{e.exports={name:"diagnostic-channel",version:"1.0.0",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"tslint -c tslint.json -p tsconfig.json",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^5.3.0"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}}),Sa=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.channel=r.makePatchingRequire=void 0;var e=DGe(),t=DGe();Object.defineProperty(r,"makePatchingRequire",{enumerable:!0,get:function(){return t.makePatchingRequire}});var n=function(o){return!0},i=function(){function o(){this.version=q2t().version,this.subscribers={},this.contextPreservationFunction=function(a){return a},this.knownPatches={},this.currentlyPublishing=!1}return o.prototype.shouldPublish=function(a){var c=this.subscribers[a];return c?c.some(function(l){var u=l.filter;return!u||u(!1)}):!1},o.prototype.publish=function(a,c){if(!this.currentlyPublishing){var l=this.subscribers[a];if(l){var u={timestamp:Date.now(),data:c};this.currentlyPublishing=!0,l.forEach(function(d){var p=d.listener,m=d.filter;try{m&&m(!0)&&p(u)}catch{}}),this.currentlyPublishing=!1}}},o.prototype.subscribe=function(a,c,l){l===void 0&&(l=n),this.subscribers[a]||(this.subscribers[a]=[]),this.subscribers[a].push({listener:c,filter:l})},o.prototype.unsubscribe=function(a,c,l){l===void 0&&(l=n);var u=this.subscribers[a];if(u){for(var d=0;d<u.length;++d)if(u[d].listener===c&&u[d].filter===l)return u.splice(d,1),!0}return!1},o.prototype.reset=function(){var a=this;this.subscribers={},this.contextPreservationFunction=function(c){return c},Object.getOwnPropertyNames(this.knownPatches).forEach(function(c){return delete a.knownPatches[c]})},o.prototype.bindToContext=function(a){return this.contextPreservationFunction(a)},o.prototype.addContextPreservation=function(a){var c=this.contextPreservationFunction;this.contextPreservationFunction=function(l){return a(c(l))}},o.prototype.registerMonkeyPatch=function(a,c){this.knownPatches[a]||(this.knownPatches[a]=[]),this.knownPatches[a].push(c)},o.prototype.getPatchesObject=function(){return this.knownPatches},o}();global.diagnosticsSource||(global.diagnosticsSource=new i,s=require("module"),s.prototype.require=e.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));var s;r.channel=global.diagnosticsSource}),z2t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),F2t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r._globalThis=void 0,r._globalThis=typeof globalThis=="object"?globalThis:global}),j2t=ae(r=>{"use strict";var e=r&&r.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),t=r&&r.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(F2t(),r)}),U2t=ae(r=>{"use strict";var e=r&&r.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),t=r&&r.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(j2t(),r)}),FGe=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.VERSION=void 0,r.VERSION="1.0.3"}),B2t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isCompatible=r._makeCompatibilityCheck=void 0;var e=FGe(),t=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function n(i){var s=new Set([i]),o=new Set,a=i.match(t);if(!a)return function(){return!1};var c={major:+a[1],minor:+a[2],patch:+a[3],prerelease:a[4]};if(c.prerelease!=null)return function(d){return d===i};function l(d){return o.add(d),!1}function u(d){return s.add(d),!0}return function(d){if(s.has(d))return!0;if(o.has(d))return!1;var p=d.match(t);if(!p)return l(d);var m={major:+p[1],minor:+p[2],patch:+p[3],prerelease:p[4]};return m.prerelease!=null||c.major!==m.major?l(d):c.major===0?c.minor===m.minor&&c.patch<=m.patch?u(d):l(d):c.minor<=m.minor?u(d):l(d)}}r._makeCompatibilityCheck=n,r.isCompatible=n(e.VERSION)}),Kk=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.unregisterGlobal=r.getGlobal=r.registerGlobal=void 0;var e=U2t(),t=FGe(),n=B2t(),i=t.VERSION.split(".")[0],s=Symbol.for("opentelemetry.js.api."+i),o=e._globalThis;function a(u,d,p,m){var f;m===void 0&&(m=!1);var y=o[s]=(f=o[s])!==null&&f!==void 0?f:{version:t.VERSION};if(!m&&y[u]){var v=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+u);return p.error(v.stack||v.message),!1}if(y.version!==t.VERSION){var v=new Error("@opentelemetry/api: All API registration versions must match");return p.error(v.stack||v.message),!1}return y[u]=d,p.debug("@opentelemetry/api: Registered a global for "+u+" v"+t.VERSION+"."),!0}r.registerGlobal=a;function c(u){var d,p,m=(d=o[s])===null||d===void 0?void 0:d.version;if(!(!m||!n.isCompatible(m)))return(p=o[s])===null||p===void 0?void 0:p[u]}r.getGlobal=c;function l(u,d){d.debug("@opentelemetry/api: Unregistering a global for "+u+" v"+t.VERSION+".");var p=o[s];p&&delete p[u]}r.unregisterGlobal=l}),G2t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DiagComponentLogger=void 0;var e=Kk(),t=function(){function i(s){this._namespace=s.namespace||"DiagComponentLogger"}return i.prototype.debug=function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];return n("debug",this._namespace,s)},i.prototype.error=function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];return n("error",this._namespace,s)},i.prototype.info=function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];return n("info",this._namespace,s)},i.prototype.warn=function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];return n("warn",this._namespace,s)},i.prototype.verbose=function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];return n("verbose",this._namespace,s)},i}();r.DiagComponentLogger=t;function n(i,s,o){var a=e.getGlobal("diag");if(a)return o.unshift(s),a[i].apply(a,o)}}),ale=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DiagLogLevel=void 0;var e;(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(e=r.DiagLogLevel||(r.DiagLogLevel={}))}),$2t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createLogLevelDiagLogger=void 0;var e=ale();function t(n,i){n<e.DiagLogLevel.NONE?n=e.DiagLogLevel.NONE:n>e.DiagLogLevel.ALL&&(n=e.DiagLogLevel.ALL),i=i||{};function s(o,a){var c=i[o];return typeof c=="function"&&n>=a?c.bind(i):function(){}}return{error:s("error",e.DiagLogLevel.ERROR),warn:s("warn",e.DiagLogLevel.WARN),info:s("info",e.DiagLogLevel.INFO),debug:s("debug",e.DiagLogLevel.DEBUG),verbose:s("verbose",e.DiagLogLevel.VERBOSE)}}r.createLogLevelDiagLogger=t}),Qk=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DiagAPI=void 0;var e=G2t(),t=$2t(),n=ale(),i=Kk(),s="diag",o=function(){function a(){function c(u){return function(){var d=i.getGlobal("diag");if(d)return d[u].apply(d,arguments)}}var l=this;l.setLogger=function(u,d){var p,m;if(d===void 0&&(d=n.DiagLogLevel.INFO),u===l){var f=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return l.error((p=f.stack)!==null&&p!==void 0?p:f.message),!1}var y=i.getGlobal("diag"),v=t.createLogLevelDiagLogger(d,u);if(y){var _=(m=new Error().stack)!==null&&m!==void 0?m:"<failed to generate stacktrace>";y.warn("Current logger will be overwritten from "+_),v.warn("Current logger will overwrite one already registered from "+_)}return i.registerGlobal("diag",v,l,!0)},l.disable=function(){i.unregisterGlobal(s,l)},l.createComponentLogger=function(u){return new e.DiagComponentLogger(u)},l.verbose=c("verbose"),l.debug=c("debug"),l.info=c("info"),l.warn=c("warn"),l.error=c("error")}return a.instance=function(){return this._instance||(this._instance=new a),this._instance},a}();r.DiagAPI=o}),V2t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BaggageImpl=void 0;var e=function(){function t(n){this._entries=n?new Map(n):new Map}return t.prototype.getEntry=function(n){var i=this._entries.get(n);if(i)return Object.assign({},i)},t.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(n){var i=n[0],s=n[1];return[i,s]})},t.prototype.setEntry=function(n,i){var s=new t(this._entries);return s._entries.set(n,i),s},t.prototype.removeEntry=function(n){var i=new t(this._entries);return i._entries.delete(n),i},t.prototype.removeEntries=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];for(var s=new t(this._entries),o=0,a=n;o<a.length;o++){var c=a[o];s._entries.delete(c)}return s},t.prototype.clear=function(){return new t},t}();r.BaggageImpl=e}),H2t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.baggageEntryMetadataSymbol=void 0,r.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")}),jGe=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.baggageEntryMetadataFromString=r.createBaggage=void 0;var e=Qk(),t=V2t(),n=H2t(),i=e.DiagAPI.instance();function s(a){return a===void 0&&(a={}),new t.BaggageImpl(new Map(Object.entries(a)))}r.createBaggage=s;function o(a){return typeof a!="string"&&(i.error("Cannot create baggage metadata from unknown type: "+typeof a),a=""),{__TYPE__:n.baggageEntryMetadataSymbol,toString:function(){return a}}}r.baggageEntryMetadataFromString=o}),W2t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),K2t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),Q2t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DiagConsoleLogger=void 0;var e=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],t=function(){function n(){function i(o){return function(){var a=arguments;if(console){var c=console[o];if(typeof c!="function"&&(c=console.log),typeof c=="function")return c.apply(console,a)}}}for(var s=0;s<e.length;s++)this[e[s].n]=i(e[s].c)}return n}();r.DiagConsoleLogger=t}),Y2t=ae(r=>{"use strict";var e=r&&r.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),t=r&&r.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Q2t(),r),t(ale(),r)}),UGe=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.defaultTextMapSetter=r.defaultTextMapGetter=void 0,r.defaultTextMapGetter={get:function(e,t){if(e!=null)return e[t]},keys:function(e){return e==null?[]:Object.keys(e)}},r.defaultTextMapSetter={set:function(e,t,n){e!=null&&(e[t]=n)}}}),X2t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),J2t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),mH=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ROOT_CONTEXT=r.createContextKey=void 0;function e(n){return Symbol.for(n)}r.createContextKey=e;var t=function(){function n(i){var s=this;s._currentContext=i?new Map(i):new Map,s.getValue=function(o){return s._currentContext.get(o)},s.setValue=function(o,a){var c=new n(s._currentContext);return c._currentContext.set(o,a),c},s.deleteValue=function(o){var a=new n(s._currentContext);return a._currentContext.delete(o),a}}return n}();r.ROOT_CONTEXT=new t}),Z2t=ae(r=>{"use strict";var e=r&&r.__spreadArray||function(i,s){for(var o=0,a=s.length,c=i.length;o<a;o++,c++)i[c]=s[o];return i};Object.defineProperty(r,"__esModule",{value:!0}),r.NoopContextManager=void 0;var t=mH(),n=function(){function i(){}return i.prototype.active=function(){return t.ROOT_CONTEXT},i.prototype.with=function(s,o,a){for(var c=[],l=3;l<arguments.length;l++)c[l-3]=arguments[l];return o.call.apply(o,e([a],c))},i.prototype.bind=function(s,o){return o},i.prototype.enable=function(){return this},i.prototype.disable=function(){return this},i}();r.NoopContextManager=n}),BGe=ae(r=>{"use strict";var e=r&&r.__spreadArray||function(c,l){for(var u=0,d=l.length,p=c.length;u<d;u++,p++)c[p]=l[u];return c};Object.defineProperty(r,"__esModule",{value:!0}),r.ContextAPI=void 0;var t=Z2t(),n=Kk(),i=Qk(),s="context",o=new t.NoopContextManager,a=function(){function c(){}return c.getInstance=function(){return this._instance||(this._instance=new c),this._instance},c.prototype.setGlobalContextManager=function(l){return n.registerGlobal(s,l,i.DiagAPI.instance())},c.prototype.active=function(){return this._getContextManager().active()},c.prototype.with=function(l,u,d){for(var p,m=[],f=3;f<arguments.length;f++)m[f-3]=arguments[f];return(p=this._getContextManager()).with.apply(p,e([l,u,d],m))},c.prototype.bind=function(l,u){return this._getContextManager().bind(l,u)},c.prototype._getContextManager=function(){return n.getGlobal(s)||o},c.prototype.disable=function(){this._getContextManager().disable(),n.unregisterGlobal(s,i.DiagAPI.instance())},c}();r.ContextAPI=a}),GGe=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TraceFlags=void 0;var e;(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(e=r.TraceFlags||(r.TraceFlags={}))}),cle=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.INVALID_SPAN_CONTEXT=r.INVALID_TRACEID=r.INVALID_SPANID=void 0;var e=GGe();r.INVALID_SPANID="0000000000000000",r.INVALID_TRACEID="00000000000000000000000000000000",r.INVALID_SPAN_CONTEXT={traceId:r.INVALID_TRACEID,spanId:r.INVALID_SPANID,traceFlags:e.TraceFlags.NONE}}),lle=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.NonRecordingSpan=void 0;var e=cle(),t=function(){function n(i){i===void 0&&(i=e.INVALID_SPAN_CONTEXT),this._spanContext=i}return n.prototype.spanContext=function(){return this._spanContext},n.prototype.setAttribute=function(i,s){return this},n.prototype.setAttributes=function(i){return this},n.prototype.addEvent=function(i,s){return this},n.prototype.setStatus=function(i){return this},n.prototype.updateName=function(i){return this},n.prototype.end=function(i){},n.prototype.isRecording=function(){return!1},n.prototype.recordException=function(i,s){},n}();r.NonRecordingSpan=t}),$Ge=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getSpanContext=r.setSpanContext=r.deleteSpan=r.setSpan=r.getSpan=void 0;var e=mH(),t=lle(),n=e.createContextKey("OpenTelemetry Context Key SPAN");function i(l){return l.getValue(n)||void 0}r.getSpan=i;function s(l,u){return l.setValue(n,u)}r.setSpan=s;function o(l){return l.deleteValue(n)}r.deleteSpan=o;function a(l,u){return s(l,new t.NonRecordingSpan(u))}r.setSpanContext=a;function c(l){var u;return(u=i(l))===null||u===void 0?void 0:u.spanContext()}r.getSpanContext=c}),ule=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.wrapSpanContext=r.isSpanContextValid=r.isValidSpanId=r.isValidTraceId=void 0;var e=cle(),t=lle(),n=/^([0-9a-f]{32})$/i,i=/^[0-9a-f]{16}$/i;function s(l){return n.test(l)&&l!==e.INVALID_TRACEID}r.isValidTraceId=s;function o(l){return i.test(l)&&l!==e.INVALID_SPANID}r.isValidSpanId=o;function a(l){return s(l.traceId)&&o(l.spanId)}r.isSpanContextValid=a;function c(l){return new t.NonRecordingSpan(l)}r.wrapSpanContext=c}),VGe=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.NoopTracer=void 0;var e=BGe(),t=$Ge(),n=lle(),i=ule(),s=e.ContextAPI.getInstance(),o=function(){function c(){}return c.prototype.startSpan=function(l,u,d){var p=!!u?.root;if(p)return new n.NonRecordingSpan;var m=d&&t.getSpanContext(d);return a(m)&&i.isSpanContextValid(m)?new n.NonRecordingSpan(m):new n.NonRecordingSpan},c.prototype.startActiveSpan=function(l,u,d,p){var m,f,y;if(!(arguments.length<2)){arguments.length===2?y=u:arguments.length===3?(m=u,y=d):(m=u,f=d,y=p);var v=f??s.active(),_=this.startSpan(l,m,v),C=t.setSpan(v,_);return s.with(C,y,void 0,_)}},c}();r.NoopTracer=o;function a(c){return typeof c=="object"&&typeof c.spanId=="string"&&typeof c.traceId=="string"&&typeof c.traceFlags=="number"}}),HGe=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ProxyTracer=void 0;var e=VGe(),t=new e.NoopTracer,n=function(){function i(s,o,a){this._provider=s,this.name=o,this.version=a}return i.prototype.startSpan=function(s,o,a){return this._getTracer().startSpan(s,o,a)},i.prototype.startActiveSpan=function(s,o,a,c){var l=this._getTracer();return Reflect.apply(l.startActiveSpan,l,arguments)},i.prototype._getTracer=function(){if(this._delegate)return this._delegate;var s=this._provider.getDelegateTracer(this.name,this.version);return s?(this._delegate=s,this._delegate):t},i}();r.ProxyTracer=n}),e$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.NoopTracerProvider=void 0;var e=VGe(),t=function(){function n(){}return n.prototype.getTracer=function(i,s){return new e.NoopTracer},n}();r.NoopTracerProvider=t}),WGe=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ProxyTracerProvider=void 0;var e=HGe(),t=e$t(),n=new t.NoopTracerProvider,i=function(){function s(){}return s.prototype.getTracer=function(o,a){var c;return(c=this.getDelegateTracer(o,a))!==null&&c!==void 0?c:new e.ProxyTracer(this,o,a)},s.prototype.getDelegate=function(){var o;return(o=this._delegate)!==null&&o!==void 0?o:n},s.prototype.setDelegate=function(o){this._delegate=o},s.prototype.getDelegateTracer=function(o,a){var c;return(c=this._delegate)===null||c===void 0?void 0:c.getTracer(o,a)},s}();r.ProxyTracerProvider=i}),t$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),r$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SamplingDecision=void 0;var e;(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(e=r.SamplingDecision||(r.SamplingDecision={}))}),n$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),i$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SpanKind=void 0;var e;(function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})(e=r.SpanKind||(r.SpanKind={}))}),s$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),o$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),a$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SpanStatusCode=void 0;var e;(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(e=r.SpanStatusCode||(r.SpanStatusCode={}))}),c$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),l$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),u$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),d$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),p$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TraceAPI=void 0;var e=Kk(),t=WGe(),n=ule(),i=$Ge(),s=Qk(),o="trace",a=function(){function c(){this._proxyTracerProvider=new t.ProxyTracerProvider,this.wrapSpanContext=n.wrapSpanContext,this.isSpanContextValid=n.isSpanContextValid,this.deleteSpan=i.deleteSpan,this.getSpan=i.getSpan,this.getSpanContext=i.getSpanContext,this.setSpan=i.setSpan,this.setSpanContext=i.setSpanContext}return c.getInstance=function(){return this._instance||(this._instance=new c),this._instance},c.prototype.setGlobalTracerProvider=function(l){var u=e.registerGlobal(o,this._proxyTracerProvider,s.DiagAPI.instance());return u&&this._proxyTracerProvider.setDelegate(l),u},c.prototype.getTracerProvider=function(){return e.getGlobal(o)||this._proxyTracerProvider},c.prototype.getTracer=function(l,u){return this.getTracerProvider().getTracer(l,u)},c.prototype.disable=function(){e.unregisterGlobal(o,s.DiagAPI.instance()),this._proxyTracerProvider=new t.ProxyTracerProvider},c}();r.TraceAPI=a}),m$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.NoopTextMapPropagator=void 0;var e=function(){function t(){}return t.prototype.inject=function(n,i){},t.prototype.extract=function(n,i){return n},t.prototype.fields=function(){return[]},t}();r.NoopTextMapPropagator=e}),h$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deleteBaggage=r.setBaggage=r.getBaggage=void 0;var e=mH(),t=e.createContextKey("OpenTelemetry Baggage Key");function n(o){return o.getValue(t)||void 0}r.getBaggage=n;function i(o,a){return o.setValue(t,a)}r.setBaggage=i;function s(o){return o.deleteValue(t)}r.deleteBaggage=s}),f$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PropagationAPI=void 0;var e=Kk(),t=m$t(),n=UGe(),i=h$t(),s=jGe(),o=Qk(),a="propagation",c=new t.NoopTextMapPropagator,l=function(){function u(){this.createBaggage=s.createBaggage,this.getBaggage=i.getBaggage,this.setBaggage=i.setBaggage,this.deleteBaggage=i.deleteBaggage}return u.getInstance=function(){return this._instance||(this._instance=new u),this._instance},u.prototype.setGlobalPropagator=function(d){return e.registerGlobal(a,d,o.DiagAPI.instance())},u.prototype.inject=function(d,p,m){return m===void 0&&(m=n.defaultTextMapSetter),this._getGlobalPropagator().inject(d,p,m)},u.prototype.extract=function(d,p,m){return m===void 0&&(m=n.defaultTextMapGetter),this._getGlobalPropagator().extract(d,p,m)},u.prototype.fields=function(){return this._getGlobalPropagator().fields()},u.prototype.disable=function(){e.unregisterGlobal(a,o.DiagAPI.instance())},u.prototype._getGlobalPropagator=function(){return e.getGlobal(a)||c},u}();r.PropagationAPI=l}),oo=ae(r=>{"use strict";var e=r&&r.__createBinding||(Object.create?function(u,d,p,m){m===void 0&&(m=p),Object.defineProperty(u,m,{enumerable:!0,get:function(){return d[p]}})}:function(u,d,p,m){m===void 0&&(m=p),u[m]=d[p]}),t=r&&r.__exportStar||function(u,d){for(var p in u)p!=="default"&&!Object.prototype.hasOwnProperty.call(d,p)&&e(d,u,p)};Object.defineProperty(r,"__esModule",{value:!0}),r.diag=r.propagation=r.trace=r.context=r.INVALID_SPAN_CONTEXT=r.INVALID_TRACEID=r.INVALID_SPANID=r.isValidSpanId=r.isValidTraceId=r.isSpanContextValid=r.baggageEntryMetadataFromString=void 0,t(z2t(),r);var n=jGe();Object.defineProperty(r,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return n.baggageEntryMetadataFromString}}),t(W2t(),r),t(K2t(),r),t(Y2t(),r),t(UGe(),r),t(X2t(),r),t(J2t(),r),t(HGe(),r),t(WGe(),r),t(t$t(),r),t(r$t(),r),t(n$t(),r),t(i$t(),r),t(s$t(),r),t(o$t(),r),t(a$t(),r),t(GGe(),r),t(c$t(),r),t(l$t(),r),t(u$t(),r);var i=ule();Object.defineProperty(r,"isSpanContextValid",{enumerable:!0,get:function(){return i.isSpanContextValid}}),Object.defineProperty(r,"isValidTraceId",{enumerable:!0,get:function(){return i.isValidTraceId}}),Object.defineProperty(r,"isValidSpanId",{enumerable:!0,get:function(){return i.isValidSpanId}});var s=cle();Object.defineProperty(r,"INVALID_SPANID",{enumerable:!0,get:function(){return s.INVALID_SPANID}}),Object.defineProperty(r,"INVALID_TRACEID",{enumerable:!0,get:function(){return s.INVALID_TRACEID}}),Object.defineProperty(r,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return s.INVALID_SPAN_CONTEXT}}),t(mH(),r),t(d$t(),r);var o=BGe();r.context=o.ContextAPI.getInstance();var a=p$t();r.trace=a.TraceAPI.getInstance();var c=f$t();r.propagation=c.PropagationAPI.getInstance();var l=Qk();r.diag=l.DiagAPI.instance(),r.default={trace:r.trace,context:r.context,propagation:r.propagation,diag:r.diag}}),dle=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isTracingSuppressed=r.unsuppressTracing=r.suppressTracing=void 0;var e=oo(),t=e.createContextKey("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function n(o){return o.setValue(t,!0)}r.suppressTracing=n;function i(o){return o.deleteValue(t)}r.unsuppressTracing=i;function s(o){return o.getValue(t)===!0}r.isTracingSuppressed=s}),KGe=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BAGGAGE_MAX_TOTAL_LENGTH=r.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=r.BAGGAGE_MAX_NAME_VALUE_PAIRS=r.BAGGAGE_HEADER=r.BAGGAGE_ITEMS_SEPARATOR=r.BAGGAGE_PROPERTIES_SEPARATOR=r.BAGGAGE_KEY_PAIR_SEPARATOR=void 0,r.BAGGAGE_KEY_PAIR_SEPARATOR="=",r.BAGGAGE_PROPERTIES_SEPARATOR=";",r.BAGGAGE_ITEMS_SEPARATOR=",",r.BAGGAGE_HEADER="baggage",r.BAGGAGE_MAX_NAME_VALUE_PAIRS=180,r.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096,r.BAGGAGE_MAX_TOTAL_LENGTH=8192}),QGe=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseKeyPairsIntoRecord=r.parsePairKeyValue=r.getKeyPairs=r.serializeKeyPairs=void 0;var e=oo(),t=KGe(),n=a=>a.reduce((c,l)=>{let u=`${c}${c!==""?t.BAGGAGE_ITEMS_SEPARATOR:""}${l}`;return u.length>t.BAGGAGE_MAX_TOTAL_LENGTH?c:u},"");r.serializeKeyPairs=n;var i=a=>a.getAllEntries().map(([c,l])=>`${encodeURIComponent(c)}=${encodeURIComponent(l.value)}`);r.getKeyPairs=i;var s=a=>{let c=a.split(t.BAGGAGE_PROPERTIES_SEPARATOR);if(c.length<=0)return;let l=c.shift();if(!l)return;let u=l.split(t.BAGGAGE_KEY_PAIR_SEPARATOR);if(u.length!==2)return;let d=decodeURIComponent(u[0].trim()),p=decodeURIComponent(u[1].trim()),m;return c.length>0&&(m=e.baggageEntryMetadataFromString(c.join(t.BAGGAGE_PROPERTIES_SEPARATOR))),{key:d,value:p,metadata:m}};r.parsePairKeyValue=s;var o=a=>typeof a!="string"||a.length===0?{}:a.split(t.BAGGAGE_ITEMS_SEPARATOR).map(c=>r.parsePairKeyValue(c)).filter(c=>c!==void 0&&c.value.length>0).reduce((c,l)=>(c[l.key]=l.value,c),{});r.parseKeyPairsIntoRecord=o}),g$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.HttpBaggagePropagator=void 0;var e=oo(),t=dle(),n=KGe(),i=QGe(),s=class{inject(o,a,c){let l=e.propagation.getBaggage(o);if(!l||t.isTracingSuppressed(o))return;let u=i.getKeyPairs(l).filter(p=>p.length<=n.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS).slice(0,n.BAGGAGE_MAX_NAME_VALUE_PAIRS),d=i.serializeKeyPairs(u);d.length>0&&c.set(a,n.BAGGAGE_HEADER,d)}extract(o,a,c){let l=c.get(a,n.BAGGAGE_HEADER);if(!l)return o;let u={};return l.length===0||(l.split(n.BAGGAGE_ITEMS_SEPARATOR).forEach(d=>{let p=i.parsePairKeyValue(d);if(p){let m={value:p.value};p.metadata&&(m.metadata=p.metadata),u[p.key]=m}}),Object.entries(u).length===0)?o:e.propagation.setBaggage(o,e.propagation.createBaggage(u))}fields(){return[n.BAGGAGE_HEADER]}};r.HttpBaggagePropagator=s}),y$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isAttributeValue=r.sanitizeAttributes=void 0;function e(s){let o={};if(s==null||typeof s!="object")return o;for(let[a,c]of Object.entries(s))t(c)&&(Array.isArray(c)?o[a]=c.slice():o[a]=c);return o}r.sanitizeAttributes=e;function t(s){return s==null?!0:Array.isArray(s)?n(s):i(s)}r.isAttributeValue=t;function n(s){let o;for(let a of s)if(a!=null){if(!o){if(i(a)){o=typeof a;continue}return!1}if(typeof a!==o)return!1}return!0}function i(s){switch(typeof s){case"number":return!0;case"boolean":return!0;case"string":return!0}return!1}}),YGe=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.loggingErrorHandler=void 0;var e=oo();function t(){return s=>{e.diag.error(n(s))}}r.loggingErrorHandler=t;function n(s){return typeof s=="string"?s:JSON.stringify(i(s))}function i(s){let o={},a=s;for(;a!==null;)Object.getOwnPropertyNames(a).forEach(c=>{if(o[c])return;let l=a[c];l&&(o[c]=String(l))}),a=Object.getPrototypeOf(a);return o}}),XGe=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.globalErrorHandler=r.setGlobalErrorHandler=void 0;var e=YGe(),t=e.loggingErrorHandler();function n(s){t=s}r.setGlobalErrorHandler=n;var i=s=>{try{t(s)}catch{}};r.globalErrorHandler=i}),JGe=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TracesSamplerValues=void 0;var e;(function(t){t.AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"})(e=r.TracesSamplerValues||(r.TracesSamplerValues={}))}),ZGe=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseEnvironment=r.DEFAULT_ENVIRONMENT=void 0;var e=oo(),t=JGe(),n=",",i=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT"];function s(m){return i.indexOf(m)>-1}var o=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function a(m){return o.indexOf(m)>-1}r.DEFAULT_ENVIRONMENT={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:e.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:t.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:""};function c(m,f,y,v=-1/0,_=1/0){if(typeof y[m]<"u"){let C=Number(y[m]);isNaN(C)||(C<v?f[m]=v:C>_?f[m]=_:f[m]=C)}}function l(m,f,y,v=n){let _=y[m];typeof _=="string"&&(f[m]=_.split(v).map(C=>C.trim()))}var u={ALL:e.DiagLogLevel.ALL,VERBOSE:e.DiagLogLevel.VERBOSE,DEBUG:e.DiagLogLevel.DEBUG,INFO:e.DiagLogLevel.INFO,WARN:e.DiagLogLevel.WARN,ERROR:e.DiagLogLevel.ERROR,NONE:e.DiagLogLevel.NONE};function d(m,f,y){let v=y[m];if(typeof v=="string"){let _=u[v.toUpperCase()];_!=null&&(f[m]=_)}}function p(m){let f={};for(let y in r.DEFAULT_ENVIRONMENT){let v=y;switch(v){case"OTEL_LOG_LEVEL":d(v,f,m);break;default:if(s(v))c(v,f,m);else if(a(v))l(v,f,m);else{let _=m[v];typeof _<"u"&&_!==null&&(f[v]=String(_))}}}return f}r.parseEnvironment=p}),v$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getEnv=void 0;var e=require("os"),t=ZGe();function n(){let i=t.parseEnvironment(process.env);return Object.assign({HOSTNAME:e.hostname()},t.DEFAULT_ENVIRONMENT,i)}r.getEnv=n}),b$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hexToBase64=void 0;function e(t){let n=t.length,i="";for(let s=0;s<n;s+=2){let o=t.substring(s,s+2),a=parseInt(o,16);i+=String.fromCharCode(a)}return Buffer.from(i,"ascii").toString("base64")}r.hexToBase64=e}),_$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RandomIdGenerator=void 0;var e=8,t=16,n=class{constructor(){this.generateTraceId=s(t),this.generateSpanId=s(e)}};r.RandomIdGenerator=n;var i=Buffer.allocUnsafe(t);function s(o){return function(){for(let a=0;a<o/4;a++)i.writeUInt32BE(Math.random()*2**32>>>0,a*4);for(let a=0;a<o&&!(i[a]>0);a++)a===o-1&&(i[o-1]=1);return i.toString("hex",0,o)}}}),S$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.otperformance=void 0;var e=require("perf_hooks");r.otperformance=e.performance}),ole=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.VERSION=void 0,r.VERSION="0.23.0"}),C$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RpcGrpcStatusCodeValues=r.MessagingOperationValues=r.MessagingDestinationKindValues=r.HttpFlavorValues=r.NetTransportValues=r.FaasInvokedProviderValues=r.FaasDocumentOperationValues=r.FaasTriggerValues=r.DbCassandraConsistencyLevelValues=r.DbSystemValues=r.SemanticAttributes=void 0,r.SemanticAttributes={DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_METHOD:"rpc.jsonrpc.method",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message"};var e;(function(d){d.OTHER_SQL="other_sql",d.MSSQL="mssql",d.MYSQL="mysql",d.ORACLE="oracle",d.DB2="db2",d.POSTGRESQL="postgresql",d.REDSHIFT="redshift",d.HIVE="hive",d.CLOUDSCAPE="cloudscape",d.HSQLDB="hsqldb",d.PROGRESS="progress",d.MAXDB="maxdb",d.HANADB="hanadb",d.INGRES="ingres",d.FIRSTSQL="firstsql",d.EDB="edb",d.CACHE="cache",d.ADABAS="adabas",d.FIREBIRD="firebird",d.DERBY="derby",d.FILEMAKER="filemaker",d.INFORMIX="informix",d.INSTANTDB="instantdb",d.INTERBASE="interbase",d.MARIADB="mariadb",d.NETEZZA="netezza",d.PERVASIVE="pervasive",d.POINTBASE="pointbase",d.SQLITE="sqlite",d.SYBASE="sybase",d.TERADATA="teradata",d.VERTICA="vertica",d.H2="h2",d.COLDFUSION="coldfusion",d.CASSANDRA="cassandra",d.HBASE="hbase",d.MONGODB="mongodb",d.REDIS="redis",d.COUCHBASE="couchbase",d.COUCHDB="couchdb",d.COSMOSDB="cosmosdb",d.DYNAMODB="dynamodb",d.NEO4J="neo4j",d.GEODE="geode",d.ELASTICSEARCH="elasticsearch",d.MEMCACHED="memcached",d.COCKROACHDB="cockroachdb"})(e=r.DbSystemValues||(r.DbSystemValues={}));var t;(function(d){d.ALL="all",d.EACH_QUORUM="each_quorum",d.QUORUM="quorum",d.LOCAL_QUORUM="local_quorum",d.ONE="one",d.TWO="two",d.THREE="three",d.LOCAL_ONE="local_one",d.ANY="any",d.SERIAL="serial",d.LOCAL_SERIAL="local_serial"})(t=r.DbCassandraConsistencyLevelValues||(r.DbCassandraConsistencyLevelValues={}));var n;(function(d){d.DATASOURCE="datasource",d.HTTP="http",d.PUBSUB="pubsub",d.TIMER="timer",d.OTHER="other"})(n=r.FaasTriggerValues||(r.FaasTriggerValues={}));var i;(function(d){d.INSERT="insert",d.EDIT="edit",d.DELETE="delete"})(i=r.FaasDocumentOperationValues||(r.FaasDocumentOperationValues={}));var s;(function(d){d.AWS="aws",d.AZURE="azure",d.GCP="gcp"})(s=r.FaasInvokedProviderValues||(r.FaasInvokedProviderValues={}));var o;(function(d){d.IP_TCP="ip_tcp",d.IP_UDP="ip_udp",d.IP="ip",d.UNIX="unix",d.PIPE="pipe",d.INPROC="inproc",d.OTHER="other"})(o=r.NetTransportValues||(r.NetTransportValues={}));var a;(function(d){d.HTTP_1_0="1.0",d.HTTP_1_1="1.1",d.HTTP_2_0="2.0",d.SPDY="SPDY",d.QUIC="QUIC"})(a=r.HttpFlavorValues||(r.HttpFlavorValues={}));var c;(function(d){d.QUEUE="queue",d.TOPIC="topic"})(c=r.MessagingDestinationKindValues||(r.MessagingDestinationKindValues={}));var l;(function(d){d.RECEIVE="receive",d.PROCESS="process"})(l=r.MessagingOperationValues||(r.MessagingOperationValues={}));var u;(function(d){d[d.OK=0]="OK",d[d.CANCELLED=1]="CANCELLED",d[d.UNKNOWN=2]="UNKNOWN",d[d.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",d[d.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",d[d.NOT_FOUND=5]="NOT_FOUND",d[d.ALREADY_EXISTS=6]="ALREADY_EXISTS",d[d.PERMISSION_DENIED=7]="PERMISSION_DENIED",d[d.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",d[d.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",d[d.ABORTED=10]="ABORTED",d[d.OUT_OF_RANGE=11]="OUT_OF_RANGE",d[d.UNIMPLEMENTED=12]="UNIMPLEMENTED",d[d.INTERNAL=13]="INTERNAL",d[d.UNAVAILABLE=14]="UNAVAILABLE",d[d.DATA_LOSS=15]="DATA_LOSS",d[d.UNAUTHENTICATED=16]="UNAUTHENTICATED"})(u=r.RpcGrpcStatusCodeValues||(r.RpcGrpcStatusCodeValues={}))}),P$t=ae(r=>{"use strict";var e=r&&r.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),t=r&&r.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(C$t(),r)}),w$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TelemetrySdkLanguageValues=r.OsTypeValues=r.HostArchValues=r.AwsEcsLaunchtypeValues=r.CloudPlatformValues=r.CloudProviderValues=r.ResourceAttributes=void 0,r.ResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"};var e;(function(a){a.AWS="aws",a.AZURE="azure",a.GCP="gcp"})(e=r.CloudProviderValues||(r.CloudProviderValues={}));var t;(function(a){a.AWS_EC2="aws_ec2",a.AWS_ECS="aws_ecs",a.AWS_EKS="aws_eks",a.AWS_LAMBDA="aws_lambda",a.AWS_ELASTIC_BEANSTALK="aws_elastic_beanstalk",a.AZURE_VM="azure_vm",a.AZURE_CONTAINER_INSTANCES="azure_container_instances",a.AZURE_AKS="azure_aks",a.AZURE_FUNCTIONS="azure_functions",a.AZURE_APP_SERVICE="azure_app_service",a.GCP_COMPUTE_ENGINE="gcp_compute_engine",a.GCP_CLOUD_RUN="gcp_cloud_run",a.GCP_KUBERNETES_ENGINE="gcp_kubernetes_engine",a.GCP_CLOUD_FUNCTIONS="gcp_cloud_functions",a.GCP_APP_ENGINE="gcp_app_engine"})(t=r.CloudPlatformValues||(r.CloudPlatformValues={}));var n;(function(a){a.EC2="ec2",a.FARGATE="fargate"})(n=r.AwsEcsLaunchtypeValues||(r.AwsEcsLaunchtypeValues={}));var i;(function(a){a.AMD64="amd64",a.ARM32="arm32",a.ARM64="arm64",a.IA64="ia64",a.PPC32="ppc32",a.PPC64="ppc64",a.X86="x86"})(i=r.HostArchValues||(r.HostArchValues={}));var s;(function(a){a.WINDOWS="windows",a.LINUX="linux",a.DARWIN="darwin",a.FREEBSD="freebsd",a.NETBSD="netbsd",a.OPENBSD="openbsd",a.DRAGONFLYBSD="dragonflybsd",a.HPUX="hpux",a.AIX="aix",a.SOLARIS="solaris",a.Z_OS="z_os"})(s=r.OsTypeValues||(r.OsTypeValues={}));var o;(function(a){a.CPP="cpp",a.DOTNET="dotnet",a.ERLANG="erlang",a.GO="go",a.JAVA="java",a.NODEJS="nodejs",a.PHP="php",a.PYTHON="python",a.RUBY="ruby",a.WEBJS="webjs"})(o=r.TelemetrySdkLanguageValues||(r.TelemetrySdkLanguageValues={}))}),E$t=ae(r=>{"use strict";var e=r&&r.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),t=r&&r.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(w$t(),r)}),Yk=ae(r=>{"use strict";var e=r&&r.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),t=r&&r.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(P$t(),r),t(E$t(),r)}),T$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SDK_INFO=void 0;var e=ole(),t=Yk();r.SDK_INFO={[t.ResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[t.ResourceAttributes.PROCESS_RUNTIME_NAME]:"node",[t.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:t.TelemetrySdkLanguageValues.NODEJS,[t.ResourceAttributes.TELEMETRY_SDK_VERSION]:e.VERSION}}),I$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.unrefTimer=void 0;function e(t){t.unref()}r.unrefTimer=e}),R$t=ae(r=>{"use strict";var e=r&&r.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),t=r&&r.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(v$t(),r),t(b$t(),r),t(_$t(),r),t(S$t(),r),t(T$t(),r),t(I$t(),r)}),e2e=ae(r=>{"use strict";var e=r&&r.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),t=r&&r.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(R$t(),r)}),x$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isTimeInput=r.isTimeInputHrTime=r.hrTimeToMicroseconds=r.hrTimeToMilliseconds=r.hrTimeToNanoseconds=r.hrTimeToTimeStamp=r.hrTimeDuration=r.timeInputToHrTime=r.hrTime=void 0;var e=e2e(),t=9,n=Math.pow(10,t);function i(y){let v=y/1e3,_=Math.trunc(v),C=Number((v-_).toFixed(t))*n;return[_,C]}function s(){let y=e.otperformance.timeOrigin;if(typeof y!="number"){let v=e.otperformance;y=v.timing&&v.timing.fetchStart}return y}function o(y){let v=i(s()),_=i(typeof y=="number"?y:e.otperformance.now()),C=v[0]+_[0],P=v[1]+_[1];return P>n&&(P-=n,C+=1),[C,P]}r.hrTime=o;function a(y){if(m(y))return y;if(typeof y=="number")return y<s()?o(y):i(y);if(y instanceof Date)return i(y.getTime());throw TypeError("Invalid input type")}r.timeInputToHrTime=a;function c(y,v){let _=v[0]-y[0],C=v[1]-y[1];return C<0&&(_-=1,C+=n),[_,C]}r.hrTimeDuration=c;function l(y){let v=t,_=`${"0".repeat(v)}${y[1]}Z`,C=_.substr(_.length-v-1);return new Date(y[0]*1e3).toISOString().replace("000Z",C)}r.hrTimeToTimeStamp=l;function u(y){return y[0]*n+y[1]}r.hrTimeToNanoseconds=u;function d(y){return Math.round(y[0]*1e3+y[1]/1e6)}r.hrTimeToMilliseconds=d;function p(y){return Math.round(y[0]*1e6+y[1]/1e3)}r.hrTimeToMicroseconds=p;function m(y){return Array.isArray(y)&&y.length===2&&typeof y[0]=="number"&&typeof y[1]=="number"}r.isTimeInputHrTime=m;function f(y){return m(y)||typeof y=="number"||y instanceof Date}r.isTimeInput=f}),O$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),A$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ExportResultCode=void 0;var e;(function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"})(e=r.ExportResultCode||(r.ExportResultCode={}))}),N$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CompositePropagator=void 0;var e=oo(),t=class{constructor(n={}){var i;this._propagators=(i=n.propagators)!==null&&i!==void 0?i:[],this._fields=Array.from(new Set(this._propagators.map(s=>typeof s.fields=="function"?s.fields():[]).reduce((s,o)=>s.concat(o),[])))}inject(n,i,s){for(let o of this._propagators)try{o.inject(n,i,s)}catch(a){e.diag.warn(`Failed to inject with ${o.constructor.name}. Err: ${a.message}`)}}extract(n,i,s){return this._propagators.reduce((o,a)=>{try{return a.extract(o,i,s)}catch(c){e.diag.warn(`Failed to inject with ${a.constructor.name}. Err: ${c.message}`)}return o},n)}fields(){return this._fields.slice()}};r.CompositePropagator=t}),D$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.validateValue=r.validateKey=void 0;var e="[_0-9a-z-*/]",t=`[a-z]${e}{0,255}`,n=`[a-z0-9]${e}{0,240}@[a-z]${e}{0,13}`,i=new RegExp(`^(?:${t}|${n})$`),s=/^[ -~]{0,255}[!-~]$/,o=/,|=/;function a(l){return i.test(l)}r.validateKey=a;function c(l){return s.test(l)&&!o.test(l)}r.validateValue=c}),t2e=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TraceState=void 0;var e=D$t(),t=32,n=512,i=",",s="=",o=class{constructor(a){this._internalState=new Map,a&&this._parse(a)}set(a,c){let l=this._clone();return l._internalState.has(a)&&l._internalState.delete(a),l._internalState.set(a,c),l}unset(a){let c=this._clone();return c._internalState.delete(a),c}get(a){return this._internalState.get(a)}serialize(){return this._keys().reduce((a,c)=>(a.push(c+s+this.get(c)),a),[]).join(i)}_parse(a){a.length>n||(this._internalState=a.split(i).reverse().reduce((c,l)=>{let u=l.trim(),d=u.indexOf(s);if(d!==-1){let p=u.slice(0,d),m=u.slice(d+1,l.length);e.validateKey(p)&&e.validateValue(m)&&c.set(p,m)}return c},new Map),this._internalState.size>t&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,t))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let a=new o;return a._internalState=new Map(this._internalState),a}};r.TraceState=o}),M$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.HttpTraceContextPropagator=r.parseTraceParent=r.TRACE_STATE_HEADER=r.TRACE_PARENT_HEADER=void 0;var e=oo(),t=dle(),n=t2e();r.TRACE_PARENT_HEADER="traceparent",r.TRACE_STATE_HEADER="tracestate";var i="00",s="(?!ff)[\\da-f]{2}",o="(?![0]{32})[\\da-f]{32}",a="(?![0]{16})[\\da-f]{16}",c="[\\da-f]{2}",l=new RegExp(`^\\s?(${s})-(${o})-(${a})-(${c})(-.*)?\\s?$`);function u(p){let m=l.exec(p);return!m||m[1]==="00"&&m[5]?null:{traceId:m[2],spanId:m[3],traceFlags:parseInt(m[4],16)}}r.parseTraceParent=u;var d=class{inject(p,m,f){let y=e.trace.getSpanContext(p);if(!y||t.isTracingSuppressed(p)||!e.isSpanContextValid(y))return;let v=`${i}-${y.traceId}-${y.spanId}-0${Number(y.traceFlags||e.TraceFlags.NONE).toString(16)}`;f.set(m,r.TRACE_PARENT_HEADER,v),y.traceState&&f.set(m,r.TRACE_STATE_HEADER,y.traceState.serialize())}extract(p,m,f){let y=f.get(m,r.TRACE_PARENT_HEADER);if(!y)return p;let v=Array.isArray(y)?y[0]:y;if(typeof v!="string")return p;let _=u(v);if(!_)return p;_.isRemote=!0;let C=f.get(m,r.TRACE_STATE_HEADER);if(C){let P=Array.isArray(C)?C.join(","):C;_.traceState=new n.TraceState(typeof P=="string"?P:void 0)}return e.trace.setSpanContext(p,_)}fields(){return[r.TRACE_PARENT_HEADER,r.TRACE_STATE_HEADER]}};r.HttpTraceContextPropagator=d}),k$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),L$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getRPCMetadata=r.deleteRPCMetadata=r.setRPCMetadata=r.RPCType=void 0;var e=oo(),t=e.createContextKey("OpenTelemetry SDK Context Key RPC_METADATA"),n;(function(a){a.HTTP="http"})(n=r.RPCType||(r.RPCType={}));function i(a,c){return a.setValue(t,c)}r.setRPCMetadata=i;function s(a){return a.deleteValue(t)}r.deleteRPCMetadata=s;function o(a){return a.getValue(t)}r.getRPCMetadata=o}),r2e=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AlwaysOffSampler=void 0;var e=oo(),t=class{shouldSample(){return{decision:e.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}};r.AlwaysOffSampler=t}),n2e=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AlwaysOnSampler=void 0;var e=oo(),t=class{shouldSample(){return{decision:e.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}};r.AlwaysOnSampler=t}),q$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ParentBasedSampler=void 0;var e=oo(),t=XGe(),n=r2e(),i=n2e(),s=class{constructor(o){var a,c,l,u;this._root=o.root,this._root||(t.globalErrorHandler(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new i.AlwaysOnSampler),this._remoteParentSampled=(a=o.remoteParentSampled)!==null&&a!==void 0?a:new i.AlwaysOnSampler,this._remoteParentNotSampled=(c=o.remoteParentNotSampled)!==null&&c!==void 0?c:new n.AlwaysOffSampler,this._localParentSampled=(l=o.localParentSampled)!==null&&l!==void 0?l:new i.AlwaysOnSampler,this._localParentNotSampled=(u=o.localParentNotSampled)!==null&&u!==void 0?u:new n.AlwaysOffSampler}shouldSample(o,a,c,l,u,d){let p=e.trace.getSpanContext(o);return!p||!e.isSpanContextValid(p)?this._root.shouldSample(o,a,c,l,u,d):p.isRemote?p.traceFlags&e.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(o,a,c,l,u,d):this._remoteParentNotSampled.shouldSample(o,a,c,l,u,d):p.traceFlags&e.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(o,a,c,l,u,d):this._localParentNotSampled.shouldSample(o,a,c,l,u,d)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}};r.ParentBasedSampler=s}),z$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TraceIdRatioBasedSampler=void 0;var e=oo(),t=class{constructor(n=0){this._ratio=n,this._ratio=this._normalize(n),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(n,i){return{decision:e.isValidTraceId(i)&&this._accumulate(i)<this._upperBound?e.SamplingDecision.RECORD_AND_SAMPLED:e.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(n){return typeof n!="number"||isNaN(n)?0:n>=1?1:n<=0?0:n}_accumulate(n){let i=0;for(let s=0;s<n.length/8;s++){let o=s*8,a=parseInt(n.slice(o,o+8),16);i=(i^a)>>>0}return i}};r.TraceIdRatioBasedSampler=t}),F$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isUrlIgnored=r.urlMatches=void 0;function e(n,i){return typeof i=="string"?n===i:i.test(n)}r.urlMatches=e;function t(n,i){if(!i)return!1;for(let s of i)if(e(n,s))return!0;return!1}r.isUrlIgnored=t}),j$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isWrapped=void 0;function e(t){return typeof t=="function"&&typeof t.__original=="function"&&typeof t.__unwrap=="function"&&t.__wrapped===!0}r.isWrapped=e}),Lm=ae(r=>{"use strict";var e=r&&r.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),t=r&&r.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),r.baggageUtils=void 0,t(g$t(),r),t(y$t(),r),t(XGe(),r),t(YGe(),r),t(x$t(),r),t(O$t(),r),t(A$t(),r),t(ole(),r),r.baggageUtils=QGe(),t(e2e(),r),t(N$t(),r),t(M$t(),r),t(k$t(),r),t(L$t(),r),t(r2e(),r),t(n2e(),r),t(q$t(),r),t(z$t(),r),t(dle(),r),t(t2e(),r),t(ZGe(),r),t(JGe(),r),t(F$t(),r),t(j$t(),r),t(ole(),r)}),U$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ExceptionEventName=void 0,r.ExceptionEventName="exception"}),i2e=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Span=void 0;var e=oo(),t=Lm(),n=Yk(),i=U$t(),s=class{constructor(o,a,c,l,u,d,p=[],m=t.hrTime()){this.attributes={},this.links=[],this.events=[],this.status={code:e.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=c,this._spanContext=l,this.parentSpanId=d,this.kind=u,this.links=p,this.startTime=t.timeInputToHrTime(m),this.resource=o.resource,this.instrumentationLibrary=o.instrumentationLibrary,this._spanLimits=o.getSpanLimits(),this._spanProcessor=o.getActiveSpanProcessor(),this._spanProcessor.onStart(this,a)}spanContext(){return this._spanContext}setAttribute(o,a){return a==null||this._isSpanEnded()?this:o.length===0?(e.diag.warn(`Invalid attribute key: ${o}`),this):t.isAttributeValue(a)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,o)?this:(this.attributes[o]=a,this):(e.diag.warn(`Invalid attribute value set for key: ${o}`),this)}setAttributes(o){for(let[a,c]of Object.entries(o))this.setAttribute(a,c);return this}addEvent(o,a,c){return this._isSpanEnded()?this:(this.events.length>=this._spanLimits.eventCountLimit&&(e.diag.warn("Dropping extra events."),this.events.shift()),t.isTimeInput(a)&&(typeof c>"u"&&(c=a),a=void 0),typeof c>"u"&&(c=t.hrTime()),this.events.push({name:o,attributes:a,time:t.timeInputToHrTime(c)}),this)}setStatus(o){return this._isSpanEnded()?this:(this.status=o,this)}updateName(o){return this._isSpanEnded()?this:(this.name=o,this)}end(o=t.hrTime()){if(this._isSpanEnded()){e.diag.error("You can only call end() on a span once.");return}this._ended=!0,this.endTime=t.timeInputToHrTime(o),this._duration=t.hrTimeDuration(this.startTime,this.endTime),this._duration[0]<0&&e.diag.warn("Inconsistent start and end time, startTime > endTime",this.startTime,this.endTime),this._spanProcessor.onEnd(this)}isRecording(){return this._ended===!1}recordException(o,a=t.hrTime()){let c={};typeof o=="string"?c[n.SemanticAttributes.EXCEPTION_MESSAGE]=o:o&&(o.code?c[n.SemanticAttributes.EXCEPTION_TYPE]=o.code.toString():o.name&&(c[n.SemanticAttributes.EXCEPTION_TYPE]=o.name),o.message&&(c[n.SemanticAttributes.EXCEPTION_MESSAGE]=o.message),o.stack&&(c[n.SemanticAttributes.EXCEPTION_STACKTRACE]=o.stack)),c[n.SemanticAttributes.EXCEPTION_TYPE]||c[n.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(i.ExceptionEventName,c,a):e.diag.warn(`Failed to record an exception ${o}`)}get duration(){return this._duration}get ended(){return this._ended}_isSpanEnded(){return this._ended&&e.diag.warn("Can not execute the operation on ended Span {traceId: %s, spanId: %s}",this._spanContext.traceId,this._spanContext.spanId),this._ended}};r.Span=s}),s2e=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.buildSamplerFromEnv=r.DEFAULT_CONFIG=void 0;var e=oo(),t=Lm(),n=t.getEnv(),i=t.TracesSamplerValues.AlwaysOn;r.DEFAULT_CONFIG={sampler:s(n),forceFlushTimeoutMillis:3e4,spanLimits:{attributeCountLimit:t.getEnv().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:t.getEnv().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:t.getEnv().OTEL_SPAN_EVENT_COUNT_LIMIT}};function s(c=t.getEnv()){switch(c.OTEL_TRACES_SAMPLER){case t.TracesSamplerValues.AlwaysOn:return new t.AlwaysOnSampler;case t.TracesSamplerValues.AlwaysOff:return new t.AlwaysOffSampler;case t.TracesSamplerValues.ParentBasedAlwaysOn:return new t.ParentBasedSampler({root:new t.AlwaysOnSampler});case t.TracesSamplerValues.ParentBasedAlwaysOff:return new t.ParentBasedSampler({root:new t.AlwaysOffSampler});case t.TracesSamplerValues.TraceIdRatio:return new t.TraceIdRatioBasedSampler(a(c));case t.TracesSamplerValues.ParentBasedTraceIdRatio:return new t.ParentBasedSampler({root:new t.TraceIdRatioBasedSampler(a(c))});default:return e.diag.error(`OTEL_TRACES_SAMPLER value "${c.OTEL_TRACES_SAMPLER} invalid, defaulting to ${i}".`),new t.AlwaysOnSampler}}r.buildSamplerFromEnv=s;var o=1;function a(c){if(c.OTEL_TRACES_SAMPLER_ARG===void 0||c.OTEL_TRACES_SAMPLER_ARG==="")return e.diag.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${o}.`),o;let l=Number(c.OTEL_TRACES_SAMPLER_ARG);return isNaN(l)?(e.diag.error(`OTEL_TRACES_SAMPLER_ARG=${c.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to ${o}.`),o):l<0||l>1?(e.diag.error(`OTEL_TRACES_SAMPLER_ARG=${c.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to ${o}.`),o):l}}),B$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.mergeConfig=void 0;var e=s2e();function t(n){let i={sampler:e.buildSamplerFromEnv()},s=Object.assign({},e.DEFAULT_CONFIG,i,n);return s.spanLimits=Object.assign({},e.DEFAULT_CONFIG.spanLimits,n.spanLimits||{}),s}r.mergeConfig=t}),G$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Tracer=void 0;var e=oo(),t=Lm(),n=i2e(),i=B$t(),s=class{constructor(a,c,l){this._tracerProvider=l;let u=i.mergeConfig(c);this._sampler=u.sampler,this._spanLimits=u.spanLimits,this._idGenerator=c.idGenerator||new t.RandomIdGenerator,this.resource=l.resource,this.instrumentationLibrary=a}startSpan(a,c={},l=e.context.active()){var u,d;if(t.isTracingSuppressed(l))return e.diag.debug("Instrumentation suppressed, returning Noop Span"),e.trace.wrapSpanContext(e.INVALID_SPAN_CONTEXT);let p=o(c,l),m=this._idGenerator.generateSpanId(),f,y,v;!p||!e.trace.isSpanContextValid(p)?f=this._idGenerator.generateTraceId():(f=p.traceId,y=p.traceState,v=p.spanId);let _=(u=c.kind)!==null&&u!==void 0?u:e.SpanKind.INTERNAL,C=(d=c.links)!==null&&d!==void 0?d:[],P=t.sanitizeAttributes(c.attributes),w=this._sampler.shouldSample(c.root?e.trace.setSpanContext(l,e.INVALID_SPAN_CONTEXT):l,f,a,_,P,C),R=w.decision===e.SamplingDecision.RECORD_AND_SAMPLED?e.TraceFlags.SAMPLED:e.TraceFlags.NONE,I={traceId:f,spanId:m,traceFlags:R,traceState:y};if(w.decision===e.SamplingDecision.NOT_RECORD)return e.diag.debug("Recording is off, propagating context in a non-recording span"),e.trace.wrapSpanContext(I);let z=new n.Span(this,l,a,I,_,v,C,c.startTime);return z.setAttributes(Object.assign(P,w.attributes)),z}startActiveSpan(a,c,l,u){let d,p,m;if(arguments.length<2)return;arguments.length===2?m=c:arguments.length===3?(d=c,m=l):(d=c,p=l,m=u);let f=p??e.context.active(),y=this.startSpan(a,d,f),v=e.trace.setSpan(f,y);return e.context.with(v,m,void 0,y)}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}};r.Tracer=s;function o(a,c){if(!a.root)return e.trace.getSpanContext(c)}}),$$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.defaultServiceName=void 0;function e(){return`unknown_service:${process.argv0}`}r.defaultServiceName=e}),V$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.detectResources=void 0;var e=a2e(),t=oo(),n=require("util"),i=async(o={})=>{let a=Object.assign(o),c=await Promise.all((a.detectors||[]).map(async l=>{try{let u=await l.detect(a);return t.diag.debug(`${l.constructor.name} found resource.`,u),u}catch(u){return t.diag.debug(`${l.constructor.name} failed: ${u.message}`),e.Resource.empty()}}));return s(c),c.reduce((l,u)=>l.merge(u),e.Resource.empty())};r.detectResources=i;var s=o=>{o.forEach(a=>{if(Object.keys(a.attributes).length>0){let c=n.inspect(a.attributes,{depth:2,breakLength:1/0,sorted:!0,compact:!1});t.diag.verbose(c)}})}}),H$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.envDetector=void 0;var e=oo(),t=Lm(),n=Yk(),i=ple(),s=class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}async detect(o){let a={},c=t.getEnv(),l=c.OTEL_RESOURCE_ATTRIBUTES,u=c.OTEL_SERVICE_NAME;if(l)try{let d=this._parseResourceAttributes(l);Object.assign(a,d)}catch(d){e.diag.debug(`EnvDetector failed: ${d.message}`)}return u&&(a[n.ResourceAttributes.SERVICE_NAME]=u),new i.Resource(a)}_parseResourceAttributes(o){if(!o)return{};let a={},c=o.split(this._COMMA_SEPARATOR,-1);for(let l of c){let u=l.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(u.length!==2)continue;let[d,p]=u;if(d=d.trim(),p=p.trim().split('^"|"$').join(""),!this._isValidAndNotEmpty(d))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(p))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);a[d]=p}return a}_isValid(o){return o.length<=this._MAX_LENGTH&&this._isPrintableString(o)}_isPrintableString(o){for(let a=0;a<o.length;a++){let c=o.charAt(a);if(c<=" "||c>="~")return!1}return!0}_isValidAndNotEmpty(o){return o.length>0&&this._isValid(o)}};r.envDetector=new s}),W$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.processDetector=void 0;var e=oo(),t=Yk(),n=ple(),i=class{async detect(s){let o={[t.ResourceAttributes.PROCESS_PID]:process.pid,[t.ResourceAttributes.PROCESS_EXECUTABLE_NAME]:process.title||"",[t.ResourceAttributes.PROCESS_COMMAND]:process.argv[1]||"",[t.ResourceAttributes.PROCESS_COMMAND_LINE]:process.argv.join(" ")||""};return this._getResourceAttributes(o,s)}_getResourceAttributes(s,o){return s[t.ResourceAttributes.PROCESS_EXECUTABLE_NAME]===""||s[t.ResourceAttributes.PROCESS_EXECUTABLE_PATH]===""||s[t.ResourceAttributes.PROCESS_COMMAND]===""||s[t.ResourceAttributes.PROCESS_COMMAND_LINE]===""?(e.diag.debug("ProcessDetector failed: Unable to find required process resources. "),n.Resource.empty()):new n.Resource(Object.assign({},s))}};r.processDetector=new i}),K$t=ae(r=>{"use strict";var e=r&&r.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),t=r&&r.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(H$t(),r),t(W$t(),r)}),Q$t=ae(r=>{"use strict";var e=r&&r.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),t=r&&r.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t($$t(),r),t(V$t(),r),t(K$t(),r)}),o2e=ae(r=>{"use strict";var e=r&&r.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),t=r&&r.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Q$t(),r)}),a2e=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Resource=void 0;var e=Yk(),t=Lm(),n=o2e(),i=class{constructor(s){this.attributes=s}static empty(){return i.EMPTY}static default(){return new i({[e.ResourceAttributes.SERVICE_NAME]:n.defaultServiceName(),[e.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:t.SDK_INFO[e.ResourceAttributes.TELEMETRY_SDK_LANGUAGE],[e.ResourceAttributes.TELEMETRY_SDK_NAME]:t.SDK_INFO[e.ResourceAttributes.TELEMETRY_SDK_NAME],[e.ResourceAttributes.TELEMETRY_SDK_VERSION]:t.SDK_INFO[e.ResourceAttributes.TELEMETRY_SDK_VERSION]})}merge(s){if(!s||!Object.keys(s.attributes).length)return this;let o=Object.assign({},this.attributes,s.attributes);return new i(o)}};r.Resource=i,i.EMPTY=new i({})}),Y$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),X$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),ple=ae(r=>{"use strict";var e=r&&r.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),t=r&&r.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(a2e(),r),t(o2e(),r),t(Y$t(),r),t(X$t(),r)}),J$t=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MultiSpanProcessor=void 0;var e=Lm(),t=class{constructor(n){this._spanProcessors=n}forceFlush(){let n=[];for(let i of this._spanProcessors)n.push(i.forceFlush());return new Promise(i=>{Promise.all(n).then(()=>{i()}).catch(s=>{e.globalErrorHandler(s||new Error("MultiSpanProcessor: forceFlush failed")),i()})})}onStart(n,i){for(let s of this._spanProcessors)s.onStart(n,i)}onEnd(n){for(let i of this._spanProcessors)i.onEnd(n)}shutdown(){let n=[];for(let i of this._spanProcessors)n.push(i.shutdown());return new Promise((i,s)=>{Promise.all(n).then(()=>{i()},s)})}};r.MultiSpanProcessor=t}),c2e=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.NoopSpanProcessor=void 0;var e=class{onStart(t,n){}onEnd(t){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}};r.NoopSpanProcessor=e}),Z$t=ae((r,e)=>{var t=200,n="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",c="[object Array]",l="[object AsyncFunction]",u="[object Boolean]",d="[object Date]",p="[object Error]",m="[object Function]",f="[object GeneratorFunction]",y="[object Map]",v="[object Number]",_="[object Null]",C="[object Object]",P="[object Proxy]",w="[object RegExp]",R="[object Set]",I="[object String]",z="[object Undefined]",G="[object WeakMap]",L="[object ArrayBuffer]",H="[object DataView]",ee="[object Float32Array]",ye="[object Float64Array]",$e="[object Int8Array]",Be="[object Int16Array]",Ct="[object Int32Array]",Ge="[object Uint8Array]",pe="[object Uint8ClampedArray]",Ie="[object Uint16Array]",Ve="[object Uint32Array]",lt=/[\\^$.*+?()[\]{}|]/g,ut=/^\[object .+?Constructor\]$/,ce=/^(?:0|[1-9]\d*)$/,ue={};ue[ee]=ue[ye]=ue[$e]=ue[Be]=ue[Ct]=ue[Ge]=ue[pe]=ue[Ie]=ue[Ve]=!0,ue[a]=ue[c]=ue[L]=ue[u]=ue[H]=ue[d]=ue[p]=ue[m]=ue[y]=ue[v]=ue[C]=ue[w]=ue[R]=ue[I]=ue[G]=!1;var Ue=typeof global=="object"&&global&&global.Object===Object&&global,ct=typeof self=="object"&&self&&self.Object===Object&&self,jt=Ue||ct||Function("return this")(),tr=typeof r=="object"&&r&&!r.nodeType&&r,se=tr&&typeof e=="object"&&e&&!e.nodeType&&e,we=se&&se.exports===tr,Ne=we&&Ue.process,Re=function(){try{var oe=se&&se.require&&se.require("util").types;return oe||Ne&&Ne.binding&&Ne.binding("util")}catch{}}(),Le=Re&&Re.isTypedArray;function ht(oe,Ae,et){switch(et.length){case 0:return oe.call(Ae);case 1:return oe.call(Ae,et[0]);case 2:return oe.call(Ae,et[0],et[1]);case 3:return oe.call(Ae,et[0],et[1],et[2])}return oe.apply(Ae,et)}function Ee(oe,Ae){for(var et=-1,xr=Array(oe);++et<oe;)xr[et]=Ae(et);return xr}function ie(oe){return function(Ae){return oe(Ae)}}function je(oe,Ae){return oe?.[Ae]}function le(oe,Ae){return function(et){return oe(Ae(et))}}var _e=Array.prototype,B=Function.prototype,be=Object.prototype,ke=jt["__core-js_shared__"],W=B.toString,Oe=be.hasOwnProperty,Ht=function(){var oe=/[^.]+$/.exec(ke&&ke.keys&&ke.keys.IE_PROTO||"");return oe?"Symbol(src)_1."+oe:""}(),_r=be.toString,fr=W.call(Object),He=RegExp("^"+W.call(Oe).replace(lt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xe=we?jt.Buffer:void 0,J=jt.Symbol,fe=jt.Uint8Array,Ke=Xe?Xe.allocUnsafe:void 0,nt=le(Object.getPrototypeOf,Object),Ut=Object.create,er=be.propertyIsEnumerable,Cr=_e.splice,gr=J?J.toStringTag:void 0,dt=function(){try{var oe=la(Object,"defineProperty");return oe({},"",{}),oe}catch{}}(),It=Xe?Xe.isBuffer:void 0,Je=Math.max,Ye=Date.now,pr=la(jt,"Map"),Kr=la(Object,"create"),Bt=function(){function oe(){}return function(Ae){if(!Fe(Ae))return{};if(Ut)return Ut(Ae);oe.prototype=Ae;var et=new oe;return oe.prototype=void 0,et}}();function pi(oe){var Ae=-1,et=oe==null?0:oe.length;for(this.clear();++Ae<et;){var xr=oe[Ae];this.set(xr[0],xr[1])}}function Yi(){this.__data__=Kr?Kr(null):{},this.size=0}function Do(oe){var Ae=this.has(oe)&&delete this.__data__[oe];return this.size-=Ae?1:0,Ae}function aa(oe){var Ae=this.__data__;if(Kr){var et=Ae[oe];return et===n?void 0:et}return Oe.call(Ae,oe)?Ae[oe]:void 0}function za(oe){var Ae=this.__data__;return Kr?Ae[oe]!==void 0:Oe.call(Ae,oe)}function mr(oe,Ae){var et=this.__data__;return this.size+=this.has(oe)?0:1,et[oe]=Kr&&Ae===void 0?n:Ae,this}pi.prototype.clear=Yi,pi.prototype.delete=Do,pi.prototype.get=aa,pi.prototype.has=za,pi.prototype.set=mr;function or(oe){var Ae=-1,et=oe==null?0:oe.length;for(this.clear();++Ae<et;){var xr=oe[Ae];this.set(xr[0],xr[1])}}function $t(){this.__data__=[],this.size=0}function yt(oe){var Ae=this.__data__,et=ot(Ae,oe);if(et<0)return!1;var xr=Ae.length-1;return et==xr?Ae.pop():Cr.call(Ae,et,1),--this.size,!0}function Pr(oe){var Ae=this.__data__,et=ot(Ae,oe);return et<0?void 0:Ae[et][1]}function Ir(oe){return ot(this.__data__,oe)>-1}function Yt(oe,Ae){var et=this.__data__,xr=ot(et,oe);return xr<0?(++this.size,et.push([oe,Ae])):et[xr][1]=Ae,this}or.prototype.clear=$t,or.prototype.delete=yt,or.prototype.get=Pr,or.prototype.has=Ir,or.prototype.set=Yt;function $r(oe){var Ae=-1,et=oe==null?0:oe.length;for(this.clear();++Ae<et;){var xr=oe[Ae];this.set(xr[0],xr[1])}}function tn(){this.size=0,this.__data__={hash:new pi,map:new(pr||or),string:new pi}}function ei(oe){var Ae=gc(this,oe).delete(oe);return this.size-=Ae?1:0,Ae}function Xi(oe){return gc(this,oe).get(oe)}function mi(oe){return gc(this,oe).has(oe)}function ni(oe,Ae){var et=gc(this,oe),xr=et.size;return et.set(oe,Ae),this.size+=et.size==xr?0:1,this}$r.prototype.clear=tn,$r.prototype.delete=ei,$r.prototype.get=Xi,$r.prototype.has=mi,$r.prototype.set=ni;function Lr(oe){var Ae=this.__data__=new or(oe);this.size=Ae.size}function On(){this.__data__=new or,this.size=0}function E(oe){var Ae=this.__data__,et=Ae.delete(oe);return this.size=Ae.size,et}function x(oe){return this.__data__.get(oe)}function j(oe){return this.__data__.has(oe)}function ne(oe,Ae){var et=this.__data__;if(et instanceof or){var xr=et.__data__;if(!pr||xr.length<t-1)return xr.push([oe,Ae]),this.size=++et.size,this;et=this.__data__=new $r(xr)}return et.set(oe,Ae),this.size=et.size,this}Lr.prototype.clear=On,Lr.prototype.delete=E,Lr.prototype.get=x,Lr.prototype.has=j,Lr.prototype.set=ne;function re(oe,Ae){var et=Ar(oe),xr=!et&&Zt(oe),Fr=!et&&!xr&&In(oe),Di=!et&&!xr&&!Fr&&ar(oe),_i=et||xr||Fr||Di,Yn=_i?Ee(oe.length,String):[],Ji=Yn.length;for(var Ts in oe)(Ae||Oe.call(oe,Ts))&&!(_i&&(Ts=="length"||Fr&&(Ts=="offset"||Ts=="parent")||Di&&(Ts=="buffer"||Ts=="byteLength"||Ts=="byteOffset")||Wo(Ts,Ji)))&&Yn.push(Ts);return Yn}function he(oe,Ae,et){(et!==void 0&&!Ft(oe[Ae],et)||et===void 0&&!(Ae in oe))&&it(oe,Ae,et)}function Se(oe,Ae,et){var xr=oe[Ae];(!(Oe.call(oe,Ae)&&Ft(xr,et))||et===void 0&&!(Ae in oe))&&it(oe,Ae,et)}function ot(oe,Ae){for(var et=oe.length;et--;)if(Ft(oe[et][0],Ae))return et;return-1}function it(oe,Ae,et){Ae=="__proto__"&&dt?dt(oe,Ae,{configurable:!0,enumerable:!0,value:et,writable:!0}):oe[Ae]=et}var zr=fc();function Vr(oe){return oe==null?oe===void 0?z:_:gr&&gr in Object(oe)?_l(oe):Nu(oe)}function sr(oe){return wt(oe)&&Vr(oe)==a}function qr(oe){if(!Fe(oe)||Nd(oe))return!1;var Ae=rn(oe)?He:ut;return Ae.test(zt(oe))}function Or(oe){return wt(oe)&&Nr(oe.length)&&!!ue[Vr(oe)]}function Hs(oe){if(!Fe(oe))return Fp(oe);var Ae=ja(oe),et=[];for(var xr in oe)xr=="constructor"&&(Ae||!Oe.call(oe,xr))||et.push(xr);return et}function Ni(oe,Ae,et,xr,Fr){oe!==Ae&&zr(Ae,function(Di,_i){if(Fr||(Fr=new Lr),Fe(Di))Jr(oe,Ae,_i,et,Ni,xr,Fr);else{var Yn=xr?xr(ua(oe,_i),Di,_i+"",oe,Ae,Fr):void 0;Yn===void 0&&(Yn=Di),he(oe,_i,Yn)}},vr)}function Jr(oe,Ae,et,xr,Fr,Di,_i){var Yn=ua(oe,et),Ji=ua(Ae,et),Ts=_i.get(Ji);if(Ts){he(oe,et,Ts);return}var Ua=Di?Di(Yn,Ji,et+"",oe,Ae,_i):void 0,rh=Ua===void 0;if(rh){var Iy=Ar(Ji),Ry=!Iy&&In(Ji),xy=!Iy&&!Ry&&ar(Ji);Ua=Ji,Iy||Ry||xy?Ar(Yn)?Ua=Yn:on(Yn)?Ua=hc(Yn):Ry?(rh=!1,Ua=po(Ji,!0)):xy?(rh=!1,Ua=ru(Ji,!0)):Ua=[]:Gt(Ji)||Zt(Ji)?(Ua=Yn,Zt(Yn)?Ua=yr(Yn):(!Fe(Yn)||rn(Yn))&&(Ua=Sl(Ji))):rh=!1}rh&&(_i.set(Ji,Ua),Fr(Ua,Ji,xr,Di,_i),_i.delete(Ji)),he(oe,et,Ua)}function ci(oe,Ae){return Dd(yc(oe,Ae,Ko),oe+"")}var bl=dt?function(oe,Ae){return dt(oe,"toString",{configurable:!0,enumerable:!1,value:Ks(Ae),writable:!0})}:Ko;function po(oe,Ae){if(Ae)return oe.slice();var et=oe.length,xr=Ke?Ke(et):new oe.constructor(et);return oe.copy(xr),xr}function ca(oe){var Ae=new oe.constructor(oe.byteLength);return new fe(Ae).set(new fe(oe)),Ae}function ru(oe,Ae){var et=Ae?ca(oe.buffer):oe.buffer;return new oe.constructor(et,oe.byteOffset,oe.length)}function hc(oe,Ae){var et=-1,xr=oe.length;for(Ae||(Ae=Array(xr));++et<xr;)Ae[et]=oe[et];return Ae}function Ad(oe,Ae,et,xr){var Fr=!et;et||(et={});for(var Di=-1,_i=Ae.length;++Di<_i;){var Yn=Ae[Di],Ji=xr?xr(et[Yn],oe[Yn],Yn,et,oe):void 0;Ji===void 0&&(Ji=oe[Yn]),Fr?it(et,Yn,Ji):Se(et,Yn,Ji)}return et}function Ws(oe){return ci(function(Ae,et){var xr=-1,Fr=et.length,Di=Fr>1?et[Fr-1]:void 0,_i=Fr>2?et[2]:void 0;for(Di=oe.length>3&&typeof Di=="function"?(Fr--,Di):void 0,_i&&Cl(et[0],et[1],_i)&&(Di=Fr<3?void 0:Di,Fr=1),Ae=Object(Ae);++xr<Fr;){var Yn=et[xr];Yn&&oe(Ae,Yn,xr,Di)}return Ae})}function fc(oe){return function(Ae,et,xr){for(var Fr=-1,Di=Object(Ae),_i=xr(Ae),Yn=_i.length;Yn--;){var Ji=_i[oe?Yn:++Fr];if(et(Di[Ji],Ji,Di)===!1)break}return Ae}}function gc(oe,Ae){var et=oe.__data__;return Fa(Ae)?et[typeof Ae=="string"?"string":"hash"]:et.map}function la(oe,Ae){var et=je(oe,Ae);return qr(et)?et:void 0}function _l(oe){var Ae=Oe.call(oe,gr),et=oe[gr];try{oe[gr]=void 0;var xr=!0}catch{}var Fr=_r.call(oe);return xr&&(Ae?oe[gr]=et:delete oe[gr]),Fr}function Sl(oe){return typeof oe.constructor=="function"&&!ja(oe)?Bt(nt(oe)):{}}function Wo(oe,Ae){var et=typeof oe;return Ae=Ae??o,!!Ae&&(et=="number"||et!="symbol"&&ce.test(oe))&&oe>-1&&oe%1==0&&oe<Ae}function Cl(oe,Ae,et){if(!Fe(et))return!1;var xr=typeof Ae;return(xr=="number"?pn(et)&&Wo(Ae,et.length):xr=="string"&&Ae in et)?Ft(et[Ae],oe):!1}function Fa(oe){var Ae=typeof oe;return Ae=="string"||Ae=="number"||Ae=="symbol"||Ae=="boolean"?oe!=="__proto__":oe===null}function Nd(oe){return!!Ht&&Ht in oe}function ja(oe){var Ae=oe&&oe.constructor,et=typeof Ae=="function"&&Ae.prototype||be;return oe===et}function Fp(oe){var Ae=[];if(oe!=null)for(var et in Object(oe))Ae.push(et);return Ae}function Nu(oe){return _r.call(oe)}function yc(oe,Ae,et){return Ae=Je(Ae===void 0?oe.length-1:Ae,0),function(){for(var xr=arguments,Fr=-1,Di=Je(xr.length-Ae,0),_i=Array(Di);++Fr<Di;)_i[Fr]=xr[Ae+Fr];Fr=-1;for(var Yn=Array(Ae+1);++Fr<Ae;)Yn[Fr]=xr[Fr];return Yn[Ae]=et(_i),ht(oe,this,Yn)}}function ua(oe,Ae){if(!(Ae==="constructor"&&typeof oe[Ae]=="function")&&Ae!="__proto__")return oe[Ae]}var Dd=qe(bl);function qe(oe){var Ae=0,et=0;return function(){var xr=Ye(),Fr=s-(xr-et);if(et=xr,Fr>0){if(++Ae>=i)return arguments[0]}else Ae=0;return oe.apply(void 0,arguments)}}function zt(oe){if(oe!=null){try{return W.call(oe)}catch{}try{return oe+""}catch{}}return""}function Ft(oe,Ae){return oe===Ae||oe!==oe&&Ae!==Ae}var Zt=sr(function(){return arguments}())?sr:function(oe){return wt(oe)&&Oe.call(oe,"callee")&&!er.call(oe,"callee")},Ar=Array.isArray;function pn(oe){return oe!=null&&Nr(oe.length)&&!rn(oe)}function on(oe){return wt(oe)&&pn(oe)}var In=It||Pl;function rn(oe){if(!Fe(oe))return!1;var Ae=Vr(oe);return Ae==m||Ae==f||Ae==l||Ae==P}function Nr(oe){return typeof oe=="number"&&oe>-1&&oe%1==0&&oe<=o}function Fe(oe){var Ae=typeof oe;return oe!=null&&(Ae=="object"||Ae=="function")}function wt(oe){return oe!=null&&typeof oe=="object"}function Gt(oe){if(!wt(oe)||Vr(oe)!=C)return!1;var Ae=nt(oe);if(Ae===null)return!0;var et=Oe.call(Ae,"constructor")&&Ae.constructor;return typeof et=="function"&&et instanceof et&&W.call(et)==fr}var ar=Le?ie(Le):Or;function yr(oe){return Ad(oe,vr(oe))}function vr(oe){return pn(oe)?re(oe,!0):Hs(oe)}var vs=Ws(function(oe,Ae,et){Ni(oe,Ae,et)});function Ks(oe){return function(){return oe}}function Ko(oe){return oe}function Pl(){return!1}e.exports=vs}),eVt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BatchSpanProcessorBase=void 0;var e=oo(),t=Lm(),n=class{constructor(i,s){this._exporter=i,this._finishedSpans=[],this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve();let o=t.getEnv();this._maxExportBatchSize=typeof s?.maxExportBatchSize=="number"?s.maxExportBatchSize:o.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof s?.maxQueueSize=="number"?s.maxQueueSize:o.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof s?.scheduledDelayMillis=="number"?s.scheduledDelayMillis:o.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof s?.exportTimeoutMillis=="number"?s.exportTimeoutMillis:o.OTEL_BSP_EXPORT_TIMEOUT}forceFlush(){return this._isShutdown?this._shuttingDownPromise:this._flushAll()}onStart(i){}onEnd(i){this._isShutdown||this._addToBuffer(i)}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((i,s)=>{Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown()).then(i).catch(o=>{s(o)})}),this._shuttingDownPromise)}_addToBuffer(i){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(i),this._maybeStartTimer())}_flushAll(){return new Promise((i,s)=>{let o=[],a=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);for(let c=0,l=a;c<l;c++)o.push(this._flushOneBatch());Promise.all(o).then(()=>{i()}).catch(s)})}_flushOneBatch(){return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise((i,s)=>{let o=setTimeout(()=>{s(new Error("Timeout"))},this._exportTimeoutMillis);e.context.with(t.suppressTracing(e.context.active()),()=>{this._exporter.export(this._finishedSpans.splice(0,this._maxExportBatchSize),a=>{var c;clearTimeout(o),a.code===t.ExportResultCode.SUCCESS?i():s((c=a.error)!==null&&c!==void 0?c:new Error("BatchSpanProcessor: span export failed"))})})})}_maybeStartTimer(){this._timer===void 0&&(this._timer=setTimeout(()=>{this._flushOneBatch().then(()=>{this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(i=>{t.globalErrorHandler(i)})},this._scheduledDelayMillis),t.unrefTimer(this._timer))}_clearTimer(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)}};r.BatchSpanProcessorBase=n}),tVt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BatchSpanProcessor=void 0;var e=eVt(),t=class extends e.BatchSpanProcessorBase{onShutdown(){}};r.BatchSpanProcessor=t}),rVt=ae(r=>{"use strict";var e=r&&r.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),t=r&&r.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(tVt(),r)}),l2e=ae(r=>{"use strict";var e=r&&r.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),t=r&&r.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(rVt(),r)}),nVt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BasicTracerProvider=r.ForceFlushState=void 0;var e=oo(),t=Lm(),n=ple(),i=u2e(),s=s2e(),o=J$t(),a=c2e(),c=Z$t(),l=l2e(),u;(function(p){p[p.resolved=0]="resolved",p[p.timeout=1]="timeout",p[p.error=2]="error",p[p.unresolved=3]="unresolved"})(u=r.ForceFlushState||(r.ForceFlushState={}));var d=class{constructor(p={}){var m;this._registeredSpanProcessors=[],this._tracers=new Map;let f=c({},s.DEFAULT_CONFIG,p);this.resource=(m=f.resource)!==null&&m!==void 0?m:n.Resource.empty(),this.resource=n.Resource.default().merge(this.resource),this._config=Object.assign({},f,{resource:this.resource});let y=this._buildExporterFromEnv();if(y!==void 0){let v=new l.BatchSpanProcessor(y);this.activeSpanProcessor=v}else this.activeSpanProcessor=new a.NoopSpanProcessor}getTracer(p,m){let f=`${p}@${m||""}`;return this._tracers.has(f)||this._tracers.set(f,new i.Tracer({name:p,version:m},this._config,this)),this._tracers.get(f)}addSpanProcessor(p){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(m=>e.diag.error("Error while trying to shutdown current span processor",m)),this._registeredSpanProcessors.push(p),this.activeSpanProcessor=new o.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(p={}){e.trace.setGlobalTracerProvider(this),p.propagator===void 0&&(p.propagator=this._buildPropagatorFromEnv()),p.contextManager&&e.context.setGlobalContextManager(p.contextManager),p.propagator&&e.propagation.setGlobalPropagator(p.propagator)}forceFlush(){let p=this._config.forceFlushTimeoutMillis,m=this._registeredSpanProcessors.map(f=>new Promise(y=>{let v,_=setTimeout(()=>{y(new Error(`Span processor did not completed within timeout period of ${p} ms`)),v=u.timeout},p);f.forceFlush().then(()=>{clearTimeout(_),v!==u.timeout&&(v=u.resolved,y(v))}).catch(C=>{clearTimeout(_),v=u.error,y(C)})}));return new Promise((f,y)=>{Promise.all(m).then(v=>{let _=v.filter(C=>C!==u.resolved);_.length>0?y(_):f()}).catch(v=>y([v]))})}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(p){var m;return(m=d._registeredPropagators.get(p))===null||m===void 0?void 0:m()}_getSpanExporter(p){var m;return(m=d._registeredExporters.get(p))===null||m===void 0?void 0:m()}_buildPropagatorFromEnv(){let p=Array.from(new Set(t.getEnv().OTEL_PROPAGATORS)),m=p.map(f=>{let y=this._getPropagator(f);return y||e.diag.warn(`Propagator "${f}" requested through environment variable is unavailable.`),y}).reduce((f,y)=>(y&&f.push(y),f),[]);if(m.length!==0)return p.length===1?m[0]:new t.CompositePropagator({propagators:m})}_buildExporterFromEnv(){let p=t.getEnv().OTEL_TRACES_EXPORTER;if(p==="none")return;let m=this._getSpanExporter(p);return m||e.diag.error(`Exporter "${p}" requested through environment variable is unavailable.`),m}};r.BasicTracerProvider=d,d._registeredPropagators=new Map([["tracecontext",()=>new t.HttpTraceContextPropagator],["baggage",()=>new t.HttpBaggagePropagator]]),d._registeredExporters=new Map}),iVt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ConsoleSpanExporter=void 0;var e=Lm(),t=class{export(n,i){return this._sendSpans(n,i)}shutdown(){return this._sendSpans([]),Promise.resolve()}_exportInfo(n){return{traceId:n.spanContext().traceId,parentId:n.parentSpanId,name:n.name,id:n.spanContext().spanId,kind:n.kind,timestamp:e.hrTimeToMicroseconds(n.startTime),duration:e.hrTimeToMicroseconds(n.duration),attributes:n.attributes,status:n.status,events:n.events}}_sendSpans(n,i){for(let s of n)console.log(this._exportInfo(s));if(i)return i({code:e.ExportResultCode.SUCCESS})}};r.ConsoleSpanExporter=t}),sVt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.InMemorySpanExporter=void 0;var e=Lm(),t=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(n,i){if(this._stopped)return i({code:e.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...n),setTimeout(()=>i({code:e.ExportResultCode.SUCCESS}),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}};r.InMemorySpanExporter=t}),oVt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),aVt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SimpleSpanProcessor=void 0;var e=oo(),t=Lm(),n=class{constructor(i){this._exporter=i,this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve()}forceFlush(){return Promise.resolve()}onStart(i){}onEnd(i){this._isShutdown||e.context.with(t.suppressTracing(e.context.active()),()=>{this._exporter.export([i],s=>{var o;s.code!==t.ExportResultCode.SUCCESS&&t.globalErrorHandler((o=s.error)!==null&&o!==void 0?o:new Error(`SimpleSpanProcessor: span export failed (status ${s})`))})})}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((i,s)=>{Promise.resolve().then(()=>this._exporter.shutdown()).then(i).catch(o=>{s(o)})}),this._shuttingDownPromise)}};r.SimpleSpanProcessor=n}),cVt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),lVt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),uVt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),dVt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),u2e=ae(r=>{"use strict";var e=r&&r.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),t=r&&r.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(G$t(),r),t(nVt(),r),t(l2e(),r),t(iVt(),r),t(sVt(),r),t(oVt(),r),t(aVt(),r),t(cVt(),r),t(c2e(),r),t(i2e(),r),t(lVt(),r),t(uVt(),r),t(dVt(),r)}),pVt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.enable=r.azureCoreTracing=r.AzureMonitorSymbol=void 0;var e=Sa();r.AzureMonitorSymbol="Azure_Monitor_Tracer";var t=!1,n=function(s){if(t)return s;try{var o=u2e(),a=oo(),c=new o.BasicTracerProvider,l=c.getTracer("applicationinsights tracer"),u=s.setTracer;s.setTracer=function(d){var p=d.startSpan;d.startSpan=function(m,f,y){var v=p.call(this,m,f,y),_=v.end;return v.end=function(){var C=_.apply(this,arguments);return e.channel.publish("azure-coretracing",v),C},v},d[r.AzureMonitorSymbol]=!0,u.call(this,d)},a.trace.getSpan(a.context.active()),s.setTracer(l),t=!0}catch{}return s};r.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:n};function i(){e.channel.registerMonkeyPatch("@azure/core-tracing",r.azureCoreTracing)}r.enable=i}),mVt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.enable=r.bunyan=void 0;var e=Sa(),t=function(i){var s=i.prototype._emit;return i.prototype._emit=function(o,a){var c=s.apply(this,arguments);if(!a){var l=c;l||(l=s.call(this,o,!0)),e.channel.publish("bunyan",{level:o.level,result:l})}return c},i};r.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:t};function n(){e.channel.registerMonkeyPatch("bunyan",r.bunyan)}r.enable=n}),hVt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.enable=r.console=void 0;var e=Sa(),t=require("stream"),n=function(s){var o=new t.Writable,a=new t.Writable;o.write=function(f){if(!f)return!0;var y=f.toString();return e.channel.publish("console",{message:y}),!0},a.write=function(f){if(!f)return!0;var y=f.toString();return e.channel.publish("console",{message:y,stderr:!0}),!0};for(var c=new s.Console(o,a),l=["log","info","warn","error","dir","time","timeEnd","trace","assert"],u=function(f){var y=s[f];y&&(s[f]=function(){if(c[f])try{c[f].apply(c,arguments)}catch{}return y.apply(s,arguments)})},d=0,p=l;d<p.length;d++){var m=p[d];u(m)}return s};r.console={versionSpecifier:">= 4.0.0",patch:n};function i(){e.channel.registerMonkeyPatch("console",r.console),require("console")}r.enable=i}),fVt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.enable=r.mongoCore=void 0;var e=Sa(),t=function(i){var s=i.Server.prototype.connect;return i.Server.prototype.connect=function(){var o=s.apply(this,arguments),a=this.s.pool.write;this.s.pool.write=function(){var l=typeof arguments[1]=="function"?1:2;return typeof arguments[l]=="function"&&(arguments[l]=e.channel.bindToContext(arguments[l])),a.apply(this,arguments)};var c=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=e.channel.bindToContext(arguments[1])),c.apply(this,arguments)},o},i};r.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:t};function n(){e.channel.registerMonkeyPatch("mongodb-core",r.mongoCore)}r.enable=n}),gVt=ae(r=>{"use strict";var e=r&&r.__assign||function(){return e=Object.assign||function(c){for(var l,u=1,d=arguments.length;u<d;u++){l=arguments[u];for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(c[p]=l[p])}return c},e.apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0}),r.enable=r.mongo330=r.mongo3=r.mongo2=void 0;var t=Sa(),n=function(c){var l=c.instrument({operationIdGenerator:{next:function(){return t.channel.bindToContext(function(d){return d()})}}}),u={};return l.on("started",function(d){u[d.requestId]||(u[d.requestId]=e(e({},d),{time:new Date}))}),l.on("succeeded",function(d){var p=u[d.requestId];p&&delete u[d.requestId],typeof d.operationId=="function"?d.operationId(function(){return t.channel.publish("mongodb",{startedData:p,event:d,succeeded:!0})}):t.channel.publish("mongodb",{startedData:p,event:d,succeeded:!0})}),l.on("failed",function(d){var p=u[d.requestId];p&&delete u[d.requestId],typeof d.operationId=="function"?d.operationId(function(){return t.channel.publish("mongodb",{startedData:p,event:d,succeeded:!1})}):t.channel.publish("mongodb",{startedData:p,event:d,succeeded:!1})}),c},i=function(c){var l=c.instrument(),u={},d={};return l.on("started",function(p){u[p.requestId]||(d[p.requestId]=t.channel.bindToContext(function(m){return m()}),u[p.requestId]=e(e({},p),{time:new Date}))}),l.on("succeeded",function(p){var m=u[p.requestId];m&&delete u[p.requestId],typeof p=="object"&&typeof d[p.requestId]=="function"&&(d[p.requestId](function(){return t.channel.publish("mongodb",{startedData:m,event:p,succeeded:!0})}),delete d[p.requestId])}),l.on("failed",function(p){var m=u[p.requestId];m&&delete u[p.requestId],typeof p=="object"&&typeof d[p.requestId]=="function"&&(d[p.requestId](function(){return t.channel.publish("mongodb",{startedData:m,event:p,succeeded:!1})}),delete d[p.requestId])}),c},s=function(c){var l=c.Server.prototype.connect;return c.Server.prototype.connect=function(){var u=l.apply(this,arguments),d=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var m=typeof arguments[1]=="function"?1:2;return typeof arguments[m]=="function"&&(arguments[m]=t.channel.bindToContext(arguments[m])),d.apply(this,arguments)};var p=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=t.channel.bindToContext(arguments[1])),p.apply(this,arguments)},u},c},o=function(c){s(c);var l=c.instrument(),u={},d={};return l.on("started",function(p){u[p.requestId]||(d[p.requestId]=t.channel.bindToContext(function(m){return m()}),u[p.requestId]=p)}),l.on("succeeded",function(p){var m=u[p.requestId];m&&delete u[p.requestId],typeof p=="object"&&typeof d[p.requestId]=="function"&&(d[p.requestId](function(){return t.channel.publish("mongodb",{startedData:m,event:p,succeeded:!0})}),delete d[p.requestId])}),l.on("failed",function(p){var m=u[p.requestId];m&&delete u[p.requestId],typeof p=="object"&&typeof d[p.requestId]=="function"&&(d[p.requestId](function(){return t.channel.publish("mongodb",{startedData:m,event:p,succeeded:!1})}),delete d[p.requestId])}),c};r.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:n},r.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:i},r.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:o};function a(){t.channel.registerMonkeyPatch("mongodb",r.mongo2),t.channel.registerMonkeyPatch("mongodb",r.mongo3),t.channel.registerMonkeyPatch("mongodb",r.mongo330)}r.enable=a}),yVt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.enable=r.mysql=void 0;var e=Sa(),t=require("path"),n=function(s,o){var a=function(m,f){return function(y,v){var _=m[y];_&&(m[y]=function(){for(var C=arguments.length-1,P=arguments.length-1;P>=0;--P)if(typeof arguments[P]=="function"){C=P;break}else if(typeof arguments[P]<"u")break;var w=arguments[C],R={result:null,startTime:null,startDate:null};typeof w=="function"&&(v?(R.startTime=process.hrtime(),R.startDate=new Date,arguments[C]=e.channel.bindToContext(v(R,w))):arguments[C]=e.channel.bindToContext(w));var I=_.apply(this,arguments);return R.result=I,I})}},c=function(m,f){return a(m.prototype,f+".prototype")},l=["connect","changeUser","ping","statistics","end"],u=require(t.dirname(o)+"/lib/Connection");l.forEach(function(m){return c(u,"Connection")(m)}),a(u,"Connection")("createQuery",function(m,f){return function(y){var v=process.hrtime(m.startTime),_=v[0]*1e3+v[1]/1e6|0;e.channel.publish("mysql",{query:m.result,callbackArgs:arguments,err:y,duration:_,time:m.startDate}),f.apply(this,arguments)}});var d=["_enqueueCallback"],p=require(t.dirname(o)+"/lib/Pool");return d.forEach(function(m){return c(p,"Pool")(m)}),s};r.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:n};function i(){e.channel.registerMonkeyPatch("mysql",r.mysql)}r.enable=i}),vVt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.enable=r.postgresPool1=void 0;var e=Sa();function t(i){var s=i.prototype.connect;return i.prototype.connect=function(o){return o&&(arguments[0]=e.channel.bindToContext(o)),s.apply(this,arguments)},i}r.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:t};function n(){e.channel.registerMonkeyPatch("pg-pool",r.postgresPool1)}r.enable=n}),bVt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.enable=r.postgres7=r.postgres6=void 0;var e=Sa(),t=require("events");function n(o,a){var c=o.Client.prototype.query,l="__diagnosticOriginalFunc";return o.Client.prototype.query=function(u,d,p){var m={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},f=process.hrtime(),y;function v(_){_&&_[l]&&(_=_[l]);var C=e.channel.bindToContext(function(P,w){var R=process.hrtime(f);if(m.result=w&&{rowCount:w.rowCount,command:w.command},m.error=P,m.duration=Math.ceil(R[0]*1e3+R[1]/1e6),e.channel.publish("postgres",m),P){if(_)return _.apply(this,arguments);y&&y instanceof t.EventEmitter&&y.emit("error",P)}else _&&_.apply(this,arguments)});try{return Object.defineProperty(C,l,{value:_}),C}catch{return _}}try{typeof u=="string"?d instanceof Array?(m.query.preparable={text:u,args:d},p=v(p)):(m.query.text=u,p?p=v(p):d=v(d)):(typeof u.name=="string"?m.query.plan=u.name:u.values instanceof Array?m.query.preparable={text:u.text,args:u.values}:m.query.text=u.text,p?p=v(p):d?d=v(d):u.callback=v(u.callback))}catch{return c.apply(this,arguments)}return arguments[0]=u,arguments[1]=d,arguments[2]=p,arguments.length=arguments.length>3?arguments.length:3,y=c.apply(this,arguments),y},o}function i(o,a){var c=o.Client.prototype.query,l="__diagnosticOriginalFunc";return o.Client.prototype.query=function(u,d,p){var m=this,f=!!p,y={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},v=process.hrtime(),_;function C(P){P&&P[l]&&(P=P[l]);var w=e.channel.bindToContext(function(R,I){var z=process.hrtime(v);if(y.result=I&&{rowCount:I.rowCount,command:I.command},y.error=R,y.duration=Math.ceil(z[0]*1e3+z[1]/1e6),e.channel.publish("postgres",y),R){if(P)return P.apply(this,arguments);_&&_ instanceof t.EventEmitter&&_.emit("error",R)}else P&&P.apply(this,arguments)});try{return Object.defineProperty(w,l,{value:P}),w}catch{return P}}try{typeof u=="string"?d instanceof Array?(y.query.preparable={text:u,args:d},f=typeof p=="function",p=f?C(p):p):(y.query.text=u,p?(f=typeof p=="function",p=f?C(p):p):(f=typeof d=="function",d=f?C(d):d)):(typeof u.name=="string"?y.query.plan=u.name:u.values instanceof Array?y.query.preparable={text:u.text,args:u.values}:y.query.text=u.text,p?(f=typeof p=="function",p=C(p)):d?(f=typeof d=="function",d=f?C(d):d):(f=typeof u.callback=="function",u.callback=f?C(u.callback):u.callback))}catch{return c.apply(this,arguments)}return arguments[0]=u,arguments[1]=d,arguments[2]=p,arguments.length=arguments.length>3?arguments.length:3,_=c.apply(this,arguments),f?_:_.then(function(P){return C()(void 0,P),new m._Promise(function(w,R){w(P)})}).catch(function(P){return C()(P,void 0),new m._Promise(function(w,R){R(P)})})},o}r.postgres6={versionSpecifier:"6.*",patch:n},r.postgres7={versionSpecifier:">=7.* <=8.*",patch:i};function s(){e.channel.registerMonkeyPatch("pg",r.postgres6),e.channel.registerMonkeyPatch("pg",r.postgres7)}r.enable=s}),_Vt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.enable=r.redis=void 0;var e=Sa(),t=function(i){var s=i.RedisClient.prototype.internal_send_command;return i.RedisClient.prototype.internal_send_command=function(o){if(o){var a=o.callback;if(!a||!a.pubsubBound){var c=this.address,l=process.hrtime(),u=new Date;o.callback=e.channel.bindToContext(function(d,p){var m=process.hrtime(l),f=m[0]*1e3+m[1]/1e6|0;e.channel.publish("redis",{duration:f,address:c,commandObj:o,err:d,result:p,time:u}),typeof a=="function"&&a.apply(this,arguments)}),o.callback.pubsubBound=!0}}return s.call(this,o)},i};r.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:t};function n(){e.channel.registerMonkeyPatch("redis",r.redis)}r.enable=n}),SVt=ae(r=>{"use strict";var e=r&&r.__assign||function(){return e=Object.assign||function(s){for(var o,a=1,c=arguments.length;a<c;a++){o=arguments[a];for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(s[l]=o[l])}return s},e.apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0}),r.enable=r.tedious=void 0;var t=Sa(),n=function(s){var o=s.Connection.prototype.makeRequest;return s.Connection.prototype.makeRequest=function(){function a(l){var u=process.hrtime(),d={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return t.channel.bindToContext(function(p,m,f){var y=process.hrtime(u);d=e(e({},d),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!p&&{rowCount:m,rows:f},query:{text:this.parametersByName.statement.value},error:p,duration:Math.ceil(y[0]*1e3+y[1]/1e6)}),t.channel.publish("tedious",d),l.call(this,p,m,f)})}var c=arguments[0];arguments[0].callback=a(c.callback),o.apply(this,arguments)},s};r.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:n};function i(){t.channel.registerMonkeyPatch("tedious",r.tedious)}r.enable=i}),CVt=ae(r=>{"use strict";var e=r&&r.__extends||function(){var a=function(c,l){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var p in d)Object.prototype.hasOwnProperty.call(d,p)&&(u[p]=d[p])},a(c,l)};return function(c,l){a(c,l);function u(){this.constructor=c}c.prototype=l===null?Object.create(l):(u.prototype=l.prototype,new u)}}(),t=r&&r.__rest||function(a,c){var l={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&c.indexOf(u)<0&&(l[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,u=Object.getOwnPropertySymbols(a);d<u.length;d++)c.indexOf(u[d])<0&&Object.prototype.propertyIsEnumerable.call(a,u[d])&&(l[u[d]]=a[u[d]]);return l};Object.defineProperty(r,"__esModule",{value:!0}),r.enable=r.winston2=r.winston3=void 0;var n=Sa(),i=function(a){var c=a.Logger.prototype.log,l,u=function(d,p,m){var f;return l===a.config.npm.levels?f="npm":l===a.config.syslog.levels?f="syslog":f="unknown",n.channel.publish("winston",{level:d,message:p,meta:m,levelKind:f}),p};return a.Logger.prototype.log=function(){return l=this.levels,!this.filters||this.filters.length===0?this.filters=[u]:this.filters[this.filters.length-1]!==u&&(this.filters=this.filters.filter(function(d){return d!==u}),this.filters.push(u)),c.apply(this,arguments)},a},s=function(a){var c=function(m,f){var y;return m.config.npm.levels[f]!=null?y="npm":m.config.syslog.levels[f]!=null?y="syslog":y="unknown",y},l=function(m){e(f,m);function f(y,v){var _=m.call(this,v)||this;return _.winston=y,_}return f.prototype.log=function(y,v){var _=y.message,C=y.level,P=y.meta,w=t(y,["message","level","meta"]);C=typeof Symbol.for=="function"?y[Symbol.for("level")]:C,_=y instanceof Error?y:_;var R=c(this.winston,C);P=P||{};for(var I in w)w.hasOwnProperty(I)&&(P[I]=w[I]);n.channel.publish("winston",{message:_,level:C,levelKind:R,meta:P}),v()},f}(a.Transport);function u(){var m=arguments[0].levels||a.config.npm.levels,f;for(var y in m)m.hasOwnProperty(y)&&(f=f===void 0||m[y]>m[f]?y:f);this.add(new l(a,{level:f}))}var d=a.createLogger;a.createLogger=function(){var m=arguments[0].levels||a.config.npm.levels,f;for(var y in m)m.hasOwnProperty(y)&&(f=f===void 0||m[y]>m[f]?y:f);var v=d.apply(this,arguments);v.add(new l(a,{level:f}));var _=v.configure;return v.configure=function(){_.apply(this,arguments),u.apply(this,arguments)},v};var p=a.configure;return a.configure=function(){p.apply(this,arguments),u.apply(this,arguments)},a.add(new l(a)),a};r.winston3={versionSpecifier:"3.x",patch:s},r.winston2={versionSpecifier:"2.x",patch:i};function o(){n.channel.registerMonkeyPatch("winston",r.winston2),n.channel.registerMonkeyPatch("winston",r.winston3)}r.enable=o}),PVt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.enable=r.tedious=r.pgPool=r.pg=r.winston=r.redis=r.mysql=r.mongodb=r.mongodbCore=r.console=r.bunyan=r.azuresdk=void 0;var e=pVt();r.azuresdk=e;var t=mVt();r.bunyan=t;var n=hVt();r.console=n;var i=fVt();r.mongodbCore=i;var s=gVt();r.mongodb=s;var o=yVt();r.mysql=o;var a=vVt();r.pgPool=a;var c=bVt();r.pg=c;var l=_Vt();r.redis=l;var u=SVt();r.tedious=u;var d=CVt();r.winston=d;function p(){t.enable(),n.enable(),i.enable(),s.enable(),o.enable(),c.enable(),a.enable(),l.enable(),d.enable(),e.enable(),u.enable()}r.enable=p}),mle=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.registerContextPreservation=r.IsInitialized=void 0;var e=zGe(),t=Oc();r.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var n="DiagnosticChannel";if(r.IsInitialized){i=PVt(),s=process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"",o=s.split(","),a={bunyan:i.bunyan,console:i.console,mongodb:i.mongodb,mongodbCore:i.mongodbCore,mysql:i.mysql,redis:i.redis,pg:i.pg,pgPool:i.pgPool,winston:i.winston,azuresdk:i.azuresdk};for(c in a)o.indexOf(c)===-1&&(a[c].enable(),t.info(n,"Subscribed to "+c+" events"));o.length>0&&t.info(n,"Some modules will not be patched",o)}else t.info(n,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");var i,s,o,a,c;function l(u){if(r.IsInitialized){var d=Sa();d.channel.addContextPreservation(u),d.channel.spanContextPropagator=e.AsyncScopeManager}}r.registerContextPreservation=l}),Xk=ae((r,e)=>{"use strict";e.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}}),up=ae((r,e)=>{"use strict";var t=r&&r.__assign||function(){return t=Object.assign||function(u){for(var d,p=1,m=arguments.length;p<m;p++){d=arguments[p];for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(u[f]=d[f])}return u},t.apply(this,arguments)},n=require("http"),i=require("https"),s=require("url"),o=require("constants"),a=Oc(),c=Xk(),l=function(){function u(){}return u.getCookie=function(d,p){var m="";if(d&&d.length&&typeof p=="string")for(var f=d+"=",y=p.split(";"),v=0;v<y.length;v++){var p=y[v];if(p=u.trim(p),p&&p.indexOf(f)===0){m=p.substring(f.length,y[v].length);break}}return m},u.trim=function(d){return typeof d=="string"?d.replace(/^\s+|\s+$/g,""):""},u.int32ArrayToBase64=function(d){var p=function(_,C){return String.fromCharCode(_>>C&255)},m=function(_){return p(_,24)+p(_,16)+p(_,8)+p(_,0)},f=d.map(m).join(""),y=Buffer.from?Buffer.from(f,"binary"):new Buffer(f,"binary"),v=y.toString("base64");return v.substr(0,v.indexOf("="))},u.random32=function(){return 4294967296*Math.random()|0},u.randomu32=function(){return u.random32()+2147483648},u.w3cTraceId=function(){for(var d=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],p="",m,f=0;f<4;f++)m=u.random32(),p+=d[m&15]+d[m>>4&15]+d[m>>8&15]+d[m>>12&15]+d[m>>16&15]+d[m>>20&15]+d[m>>24&15]+d[m>>28&15];var y=d[8+Math.random()*4|0];return p.substr(0,8)+p.substr(9,4)+"4"+p.substr(13,3)+y+p.substr(16,3)+p.substr(19,12)},u.w3cSpanId=function(){return u.w3cTraceId().substring(16)},u.isValidW3CId=function(d){return d.length===32&&d!=="00000000000000000000000000000000"},u.isArray=function(d){return Object.prototype.toString.call(d)==="[object Array]"},u.isError=function(d){return d instanceof Error},u.isPrimitive=function(d){var p=typeof d;return p==="string"||p==="number"||p==="boolean"},u.isDate=function(d){return Object.prototype.toString.call(d)==="[object Date]"},u.msToTimeSpan=function(d){(isNaN(d)||d<0)&&(d=0);var p=(d/1e3%60).toFixed(7).replace(/0{0,4}$/,""),m=""+Math.floor(d/(1e3*60))%60,f=""+Math.floor(d/(1e3*60*60))%24,y=Math.floor(d/(1e3*60*60*24));p=p.indexOf(".")<2?"0"+p:p,m=m.length<2?"0"+m:m,f=f.length<2?"0"+f:f;var v=y>0?y+".":"";return v+f+":"+m+":"+p},u.extractError=function(d){var p=d;return{message:d.message,code:p.code||p.id||""}},u.extractObject=function(d){return d instanceof Error?u.extractError(d):typeof d.toJSON=="function"?d.toJSON():d},u.validateStringMap=function(d){if(typeof d!="object"){a.info("Invalid properties dropped from payload");return}var p={};for(var m in d){var f="",y=d[m],v=typeof y;if(u.isPrimitive(y))f=y.toString();else if(y===null||v==="undefined")f="";else if(v==="function"){a.info("key: "+m+" was function; will not serialize");continue}else{var _=u.isArray(y)?y:u.extractObject(y);try{u.isPrimitive(_)?f=_:f=JSON.stringify(_)}catch(C){f=y.constructor.name.toString()+" (Error: "+C.message+")",a.info("key: "+m+", could not be serialized")}}p[m]=f.substring(0,u.MAX_PROPERTY_LENGTH)}return p},u.canIncludeCorrelationHeader=function(d,p){var m=d&&d.config&&d.config.correlationHeaderExcludedDomains;if(!m||m.length==0||!p)return!0;for(var f=0;f<m.length;f++){var y=new RegExp(m[f].replace(/\./g,".").replace(/\*/g,".*"));if(y.test(s.parse(p).hostname))return!1}return!0},u.getCorrelationContextTarget=function(d,p){var m=d.headers&&d.headers[c.requestContextHeader];if(m)for(var f=m.split(","),y=0;y<f.length;++y){var v=f[y].split("=");if(v.length==2&&v[0]==p)return v[1]}},u.makeRequest=function(d,p,m,f){p&&p.indexOf("//")===0&&(p="https:"+p);var y=s.parse(p),v=t(t({},m),{host:y.hostname,port:y.port,path:y.pathname}),_=void 0;if(y.protocol==="https:"&&(_=d.proxyHttpsUrl||void 0),y.protocol==="http:"&&(_=d.proxyHttpUrl||void 0),_){_.indexOf("//")===0&&(_="http:"+_);var C=s.parse(_);C.protocol==="https:"?(a.info("Proxies that use HTTPS are not supported"),_=void 0):v=t(t({},v),{host:C.hostname,port:C.port||"80",path:p,headers:t(t({},v.headers),{Host:y.hostname})})}var P=y.protocol==="https:"&&!_;return P&&d.httpsAgent!==void 0?v.agent=d.httpsAgent:!P&&d.httpAgent!==void 0?v.agent=d.httpAgent:P&&(v.agent=u.tlsRestrictedAgent),P?i.request(v,f):n.request(v,f)},u.safeIncludeCorrelationHeader=function(d,p,m){var f;if(typeof m=="string")f=m;else if(m instanceof Array)f=m.join(",");else if(m&&typeof m.toString=="function")try{f=m.toString()}catch(y){a.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",y,m)}f?u.addCorrelationIdHeaderFromString(d,p,f):p.setHeader(c.requestContextHeader,c.requestContextSourceKey+"="+d.config.correlationId)},u.dumpObj=function(d){var p=Object.prototype.toString.call(d),m="";return p==="[object Error]"?m="{ stack: '"+d.stack+"', message: '"+d.message+"', name: '"+d.name+"'":m=JSON.stringify(d),p+m},u.addCorrelationIdHeaderFromString=function(d,p,m){var f=m.split(","),y=c.requestContextSourceKey+"=",v=f.some(function(_){return _.substring(0,y.length)===y});v||p.setHeader(c.requestContextHeader,m+","+c.requestContextSourceKey+"="+d.config.correlationId)},u.MAX_PROPERTY_LENGTH=8192,u.tlsRestrictedAgent=new i.Agent({keepAlive:!0,maxSockets:25,secureOptions:o.SSL_OP_NO_SSLv2|o.SSL_OP_NO_SSLv3|o.SSL_OP_NO_TLSv1|o.SSL_OP_NO_TLSv1_1}),u}();e.exports=l}),z0=ae((r,e)=>{"use strict";var t=up(),n=Oc(),i=function(){function s(){}return s.queryCorrelationId=function(o,a){var c=o.profileQueryEndpoint+"/api/profiles/"+o.instrumentationKey+"/appId";if(s.completedLookups.hasOwnProperty(c)){a(s.completedLookups[c]);return}else if(s.pendingLookups[c]){s.pendingLookups[c].push(a);return}s.pendingLookups[c]=[a];var l=function(){if(s.pendingLookups[c]){var u={method:"GET",disableAppInsightsAutoCollection:!0};n.info(s.TAG,u);var d=t.makeRequest(o,c,u,function(p){if(p.statusCode===200){var m="";p.setEncoding("utf-8"),p.on("data",function(f){m+=f}),p.on("end",function(){n.info(s.TAG,m);var f=s.correlationIdPrefix+m;s.completedLookups[c]=f,s.pendingLookups[c]&&s.pendingLookups[c].forEach(function(y){return y(f)}),delete s.pendingLookups[c]})}else p.statusCode>=400&&p.statusCode<500?(s.completedLookups[c]=void 0,delete s.pendingLookups[c]):setTimeout(l,o.correlationIdRetryIntervalMs)});d&&(d.on("error",function(p){n.warn(s.TAG,p)}),d.end())}};setTimeout(l,0)},s.cancelCorrelationIdQuery=function(o,a){var c=o.profileQueryEndpoint+"/api/profiles/"+o.instrumentationKey+"/appId",l=s.pendingLookups[c];l&&(s.pendingLookups[c]=l.filter(function(u){return u!=a}),s.pendingLookups[c].length==0&&delete s.pendingLookups[c])},s.generateRequestId=function(o){if(o){o=o[0]=="|"?o:"|"+o,o[o.length-1]!=="."&&(o+=".");var a=(s.currentRootId++).toString(16);return s.appendSuffix(o,a,"_")}else return s.generateRootId()},s.getRootId=function(o){var a=o.indexOf(".");a<0&&(a=o.length);var c=o[0]==="|"?1:0;return o.substring(c,a)},s.generateRootId=function(){return"|"+t.w3cTraceId()+"."},s.appendSuffix=function(o,a,c){if(o.length+a.length<s.requestIdMaxLength)return o+a+c;var l=s.requestIdMaxLength-9;if(o.length>l)for(;l>1;--l){var u=o[l-1];if(u==="."||u==="_")break}if(l<=1)return s.generateRootId();for(a=t.randomu32().toString(16);a.length<8;)a="0"+a;return o.substring(0,l)+a+"#"},s.TAG="CorrelationIdManager",s.correlationIdPrefix="cid-v1:",s.w3cEnabled=!0,s.pendingLookups={},s.completedLookups={},s.requestIdMaxLength=1024,s.currentRootId=t.randomu32(),s}();e.exports=i}),hH=ae((r,e)=>{"use strict";var t=up(),n=z0(),i=function(){function s(o,a){if(this.traceFlag=s.DEFAULT_TRACE_FLAG,this.version=s.DEFAULT_VERSION,o&&typeof o=="string")if(o.split(",").length>1)this.traceId=t.w3cTraceId(),this.spanId=t.w3cTraceId().substr(0,16);else{var c=o.trim().split("-"),l=c.length;l>=4?(this.version=c[0],this.traceId=c[1],this.spanId=c[2],this.traceFlag=c[3]):(this.traceId=t.w3cTraceId(),this.spanId=t.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=s.DEFAULT_VERSION,this.traceId=t.w3cTraceId()),this.version==="00"&&l!==4&&(this.traceId=t.w3cTraceId(),this.spanId=t.w3cTraceId().substr(0,16)),this.version==="ff"&&(this.version=s.DEFAULT_VERSION,this.traceId=t.w3cTraceId(),this.spanId=t.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=s.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=s.DEFAULT_TRACE_FLAG,this.traceId=t.w3cTraceId()),s.isValidTraceId(this.traceId)||(this.traceId=t.w3cTraceId()),s.isValidSpanId(this.spanId)||(this.spanId=t.w3cTraceId().substr(0,16),this.traceId=t.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(a){this.parentId=a.slice();var u=n.getRootId(a);s.isValidTraceId(u)||(this.legacyRootId=u,u=t.w3cTraceId()),a.indexOf("|")!==-1&&(a=a.substring(1+a.substring(0,a.length-1).lastIndexOf("."),a.length-1)),this.traceId=u,this.spanId=a}else this.traceId=t.w3cTraceId(),this.spanId=t.w3cTraceId().substr(0,16)}return s.isValidTraceId=function(o){return o.match(/^[0-9a-f]{32}$/)&&o!=="00000000000000000000000000000000"},s.isValidSpanId=function(o){return o.match(/^[0-9a-f]{16}$/)&&o!=="0000000000000000"},s.formatOpenTelemetryTraceFlags=function(o){var a="0"+o.toString(16);return a.substring(a.length-2)},s.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},s.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},s.prototype.updateSpanId=function(){this.spanId=t.w3cTraceId().substr(0,16)},s.DEFAULT_TRACE_FLAG="01",s.DEFAULT_VERSION="00",s}();e.exports=i}),d2e=ae((r,e)=>{"use strict";var t=function(){function n(i){this.fieldmap=[],i&&(this.fieldmap=this.parseHeader(i))}return n.prototype.toString=function(){var i=this.fieldmap;return!i||i.length==0?null:i.join(", ")},n.validateKeyChars=function(i){var s=i.split("@");if(s.length==2){var o=s[0].trim(),a=s[1].trim(),c=!!o.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/),l=!!a.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/);return c&&l}else if(s.length==1)return!!i.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/);return!1},n.prototype.parseHeader=function(i){var s=[],o={},a=i.split(",");if(a.length>32)return null;for(var c=0,l=a;c<l.length;c++){var u=l[c],d=u.trim();if(d.length!==0){var p=d.split("=");if(p.length!==2||!n.validateKeyChars(p[0])||o[p[0]])return null;o[p[0]]=!0,s.push(d)}}return s},n.strict=!0,n}();e.exports=t}),Cb=ae((r,e)=>{"use strict";var t=function(){function n(){}return n}();e.exports=t}),wVt=ae((r,e)=>{"use strict";var t=r&&r.__extends||function(){var s=function(o,a){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},s(o,a)};return function(o,a){s(o,a);function c(){this.constructor=o}o.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Cb(),i=function(s){t(o,s);function o(){var a=s.call(this)||this;return a.ver=2,a.properties={},a.measurements={},a}return o}(n);e.exports=i}),p2e=ae((r,e)=>{"use strict";var t=function(){function n(){}return n}();e.exports=t}),EVt=ae((r,e)=>{"use strict";var t=function(){function n(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return n}();e.exports=t}),TVt=ae((r,e)=>{"use strict";var t=r&&r.__extends||function(){var s=function(o,a){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},s(o,a)};return function(o,a){s(o,a);function c(){this.constructor=o}o.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=p2e(),i=function(s){t(o,s);function o(){return s.call(this)||this}return o}(n);e.exports=i}),m2e=ae((r,e)=>{"use strict";var t;(function(n){n[n.Measurement=0]="Measurement",n[n.Aggregation=1]="Aggregation"})(t||(t={})),e.exports=t}),IVt=ae((r,e)=>{"use strict";var t=m2e(),n=function(){function i(){this.kind=t.Measurement}return i}();e.exports=n}),RVt=ae((r,e)=>{"use strict";var t=function(){function n(){this.ver=1,this.sampleRate=100,this.tags={}}return n}();e.exports=t}),h2e=ae((r,e)=>{"use strict";var t=r&&r.__extends||function(){var s=function(o,a){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},s(o,a)};return function(o,a){s(o,a);function c(){this.constructor=o}o.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Cb(),i=function(s){t(o,s);function o(){var a=s.call(this)||this;return a.ver=2,a.properties={},a.measurements={},a}return o}(n);e.exports=i}),xVt=ae((r,e)=>{"use strict";var t=r&&r.__extends||function(){var s=function(o,a){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},s(o,a)};return function(o,a){s(o,a);function c(){this.constructor=o}o.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Cb(),i=function(s){t(o,s);function o(){var a=s.call(this)||this;return a.ver=2,a.exceptions=[],a.properties={},a.measurements={},a}return o}(n);e.exports=i}),OVt=ae((r,e)=>{"use strict";var t=function(){function n(){this.hasFullStack=!0,this.parsedStack=[]}return n}();e.exports=t}),AVt=ae((r,e)=>{"use strict";var t=r&&r.__extends||function(){var s=function(o,a){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},s(o,a)};return function(o,a){s(o,a);function c(){this.constructor=o}o.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Cb(),i=function(s){t(o,s);function o(){var a=s.call(this)||this;return a.ver=2,a.properties={},a}return o}(n);e.exports=i}),NVt=ae((r,e)=>{"use strict";var t=r&&r.__extends||function(){var s=function(o,a){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},s(o,a)};return function(o,a){s(o,a);function c(){this.constructor=o}o.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Cb(),i=function(s){t(o,s);function o(){var a=s.call(this)||this;return a.ver=2,a.metrics=[],a.properties={},a}return o}(n);e.exports=i}),DVt=ae((r,e)=>{"use strict";var t=r&&r.__extends||function(){var s=function(o,a){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},s(o,a)};return function(o,a){s(o,a);function c(){this.constructor=o}o.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=h2e(),i=function(s){t(o,s);function o(){var a=s.call(this)||this;return a.ver=2,a.properties={},a.measurements={},a}return o}(n);e.exports=i}),MVt=ae((r,e)=>{"use strict";var t=r&&r.__extends||function(){var s=function(o,a){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},s(o,a)};return function(o,a){s(o,a);function c(){this.constructor=o}o.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Cb(),i=function(s){t(o,s);function o(){var a=s.call(this)||this;return a.ver=2,a.success=!0,a.properties={},a.measurements={},a}return o}(n);e.exports=i}),kVt=ae((r,e)=>{"use strict";var t=r&&r.__extends||function(){var s=function(o,a){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},s(o,a)};return function(o,a){s(o,a);function c(){this.constructor=o}o.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Cb(),i=function(s){t(o,s);function o(){var a=s.call(this)||this;return a.ver=2,a.properties={},a.measurements={},a}return o}(n);e.exports=i}),LVt=ae((r,e)=>{"use strict";var t;(function(n){n[n.Verbose=0]="Verbose",n[n.Information=1]="Information",n[n.Warning=2]="Warning",n[n.Error=3]="Error",n[n.Critical=4]="Critical"})(t||(t={})),e.exports=t}),qVt=ae((r,e)=>{"use strict";var t=function(){function n(){}return n}();e.exports=t}),f2e=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AvailabilityData=wVt(),r.Base=p2e(),r.ContextTagKeys=EVt(),r.Data=TVt(),r.DataPoint=IVt(),r.DataPointType=m2e(),r.Domain=Cb(),r.Envelope=RVt(),r.EventData=h2e(),r.ExceptionData=xVt(),r.ExceptionDetails=OVt(),r.MessageData=AVt(),r.MetricData=NVt(),r.PageViewData=DVt(),r.RemoteDependencyData=MVt(),r.RequestData=kVt(),r.SeverityLevel=LVt(),r.StackFrame=qVt()}),zVt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.domainSupportsProperties=r.RemoteDependencyDataConstants=void 0;var e=f2e(),t=function(){function i(){}return i.TYPE_HTTP="Http",i.TYPE_AI="Http (tracked component)",i}();r.RemoteDependencyDataConstants=t;function n(i){return"properties"in i||i instanceof e.EventData||i instanceof e.ExceptionData||i instanceof e.MessageData||i instanceof e.MetricData||i instanceof e.PageViewData||i instanceof e.RemoteDependencyData||i instanceof e.RequestData}r.domainSupportsProperties=n}),FVt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),jVt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),UVt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),BVt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),GVt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),$Vt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),VVt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),HVt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),WVt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),KVt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),QVt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),YVt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),XVt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TelemetryType=r.TelemetryTypeString=r.baseTypeToTelemetryType=r.telemetryTypeToBaseType=void 0;function e(i){switch(i){case n.Event:return"EventData";case n.Exception:return"ExceptionData";case n.Trace:return"MessageData";case n.Metric:return"MetricData";case n.Request:return"RequestData";case n.Dependency:return"RemoteDependencyData";case n.Availability:return"AvailabilityData";case n.PageView:return"PageViewData"}}r.telemetryTypeToBaseType=e;function t(i){switch(i){case"EventData":return n.Event;case"ExceptionData":return n.Exception;case"MessageData":return n.Trace;case"MetricData":return n.Metric;case"RequestData":return n.Request;case"RemoteDependencyData":return n.Dependency;case"AvailabilityData":return n.Availability;case"PageViewData":return n.PageView}}r.baseTypeToTelemetryType=t,r.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"};var n;(function(i){i[i.Event=0]="Event",i[i.Exception=1]="Exception",i[i.Trace=2]="Trace",i[i.Metric=3]="Metric",i[i.Request=4]="Request",i[i.Dependency=5]="Dependency",i[i.Availability=6]="Availability",i[i.PageView=7]="PageView"})(n=r.TelemetryType||(r.TelemetryType={}))}),JVt=ae(r=>{"use strict";var e=r&&r.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),t=r&&r.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(FVt(),r),t(jVt(),r),t(UVt(),r),t(BVt(),r),t(GVt(),r),t($Vt(),r),t(VVt(),r),t(HVt(),r),t(WVt(),r),t(KVt(),r),t(QVt(),r),t(YVt(),r),t(XVt(),r)}),ZVt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),eHt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),tHt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),rHt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),nHt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),iHt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),sHt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),oHt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),aHt=ae(r=>{"use strict";var e=r&&r.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),t=r&&r.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(ZVt(),r),t(eHt(),r),t(tHt(),r),t(rHt(),r),t(nHt(),r),t(iHt(),r),t(sHt(),r),t(oHt(),r)}),Su=ae(r=>{"use strict";var e=r&&r.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),t=r&&r.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(zVt(),r),t(f2e(),r),t(JVt(),r),t(aHt(),r)}),g2e=ae((r,e)=>{"use strict";var t=function(){function n(){}return n.prototype.getUrl=function(){return this.url},n.prototype.RequestParser=function(){this.startTime=+new Date},n.prototype._setStatus=function(i,s){var o=+new Date;this.duration=o-this.startTime,this.statusCode=i;var a=this.properties||{};if(s){if(typeof s=="string")a.error=s;else if(s instanceof Error)a.error=s.message;else if(typeof s=="object")for(var c in s)a[c]=s[c]&&s[c].toString&&s[c].toString()}this.properties=a},n.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},n}();e.exports=t}),y2e=ae((r,e)=>{"use strict";var t=r&&r.__extends||function(){var p=function(m,f){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,v){y.__proto__=v}||function(y,v){for(var _ in v)Object.prototype.hasOwnProperty.call(v,_)&&(y[_]=v[_])},p(m,f)};return function(m,f){p(m,f);function y(){this.constructor=m}m.prototype=f===null?Object.create(f):(y.prototype=f.prototype,new y)}}(),n=require("url"),i=Su(),s=up(),o=Xk(),a=g2e(),c=z0(),l=d2e(),u=hH(),d=function(p){t(m,p);function m(f,y){var v=p.call(this)||this;return f&&(v.method=f.method,v.url=v._getAbsoluteUrl(f),v.startTime=+new Date,v.socketRemoteAddress=f.socket&&f.socket.remoteAddress,v.parseHeaders(f,y),f.connection&&(v.connectionRemoteAddress=f.connection.remoteAddress,v.legacySocketRemoteAddress=f.connection.socket&&f.connection.socket.remoteAddress)),v}return m.prototype.onError=function(f,y){this._setStatus(void 0,f),y&&(this.duration=y)},m.prototype.onResponse=function(f,y){this._setStatus(f.statusCode,void 0),y&&(this.duration=y)},m.prototype.getRequestTelemetry=function(f){var y={id:this.requestId,name:this.method+" "+n.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(f&&f.time?y.time=f.time:this.startTime&&(y.time=new Date(this.startTime)),f){for(var v in f)y[v]||(y[v]=f[v]);if(f.properties)for(var v in f.properties)y.properties[v]=f.properties[v]}return y},m.prototype.getRequestTags=function(f){var y={};for(var v in f)y[v]=f[v];return y[m.keys.locationIp]=f[m.keys.locationIp]||this._getIp(),y[m.keys.sessionId]=f[m.keys.sessionId]||this._getId("ai_session"),y[m.keys.userId]=f[m.keys.userId]||this._getId("ai_user"),y[m.keys.userAuthUserId]=f[m.keys.userAuthUserId]||this._getId("ai_authUser"),y[m.keys.operationName]=this.getOperationName(f),y[m.keys.operationParentId]=this.getOperationParentId(f),y[m.keys.operationId]=this.getOperationId(f),y},m.prototype.getOperationId=function(f){return f[m.keys.operationId]||this.operationId},m.prototype.getOperationParentId=function(f){return f[m.keys.operationParentId]||this.parentId||this.getOperationId(f)},m.prototype.getOperationName=function(f){return f[m.keys.operationName]||this.method+" "+n.parse(this.url).pathname},m.prototype.getRequestId=function(){return this.requestId},m.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},m.prototype.getTraceparent=function(){return this.traceparent},m.prototype.getTracestate=function(){return this.tracestate},m.prototype.getLegacyRootId=function(){return this.legacyRootId},m.prototype._getAbsoluteUrl=function(f){if(!f.headers)return f.url;var y=f.connection?f.connection.encrypted:null,v=n.parse(f.url),_=v.pathname,C=v.search,P=y||f.headers["x-forwarded-proto"]=="https"?"https":"http",w=n.format({protocol:P,host:f.headers.host,pathname:_,search:C});return w},m.prototype._getIp=function(){var f=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,y=function(_){var C=f.exec(_);if(C)return C[0]},v=y(this.rawHeaders["x-forwarded-for"])||y(this.rawHeaders["x-client-ip"])||y(this.rawHeaders["x-real-ip"])||y(this.connectionRemoteAddress)||y(this.socketRemoteAddress)||y(this.legacySocketRemoteAddress);return!v&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(v="127.0.0.1"),v},m.prototype._getId=function(f){var y=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"",v=m.parseId(s.getCookie(f,y));return v},m.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},m.prototype.parseHeaders=function(f,y){if(this.rawHeaders=f.headers||f.rawHeaders,this.userAgent=f.headers&&f.headers["user-agent"],this.sourceCorrelationId=s.getCorrelationContextTarget(f,o.requestContextSourceKey),f.headers){var v=f.headers[o.traceStateHeader]?f.headers[o.traceStateHeader].toString():null,_=f.headers[o.traceparentHeader]?f.headers[o.traceparentHeader].toString():null,C=f.headers[o.requestIdHeader]?f.headers[o.requestIdHeader].toString():null,P=f.headers[o.parentIdHeader]?f.headers[o.parentIdHeader].toString():null,w=f.headers[o.rootIdHeader]?f.headers[o.rootIdHeader].toString():null;this.correlationContextHeader=f.headers[o.correlationContextHeader]?f.headers[o.correlationContextHeader].toString():null,c.w3cEnabled&&(_||v)?(this.traceparent=new u(_?_.toString():null),this.tracestate=_&&v&&new l(v?v.toString():null),this.setBackCompatFromThisTraceContext()):C?c.w3cEnabled?(this.traceparent=new u(null,C),this.setBackCompatFromThisTraceContext()):(this.parentId=C,this.requestId=c.generateRequestId(this.parentId),this.operationId=c.getRootId(this.requestId)):c.w3cEnabled?(this.traceparent=new u,this.traceparent.parentId=P,this.traceparent.legacyRootId=w||P,this.setBackCompatFromThisTraceContext()):(this.parentId=P,this.requestId=c.generateRequestId(w||this.parentId),this.correlationContextHeader=null,this.operationId=c.getRootId(this.requestId)),y&&(this.requestId=y,this.operationId=c.getRootId(this.requestId))}},m.parseId=function(f){var y=f.split("|");return y.length>0?y[0]:""},m.keys=new i.ContextTagKeys,m}(a);e.exports=d}),cHt=ae((r,e)=>{r=e.exports=le;var t;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?t=function(){var E=Array.prototype.slice.call(arguments,0);E.unshift("SEMVER"),console.log.apply(console,E)}:t=function(){},r.SEMVER_SPEC_VERSION="2.0.0";var n=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,s=16,o=r.re=[],a=r.src=[],c=0,l=c++;a[l]="0|[1-9]\\d*";var u=c++;a[u]="[0-9]+";var d=c++;a[d]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var p=c++;a[p]="("+a[l]+")\\.("+a[l]+")\\.("+a[l]+")";var m=c++;a[m]="("+a[u]+")\\.("+a[u]+")\\.("+a[u]+")";var f=c++;a[f]="(?:"+a[l]+"|"+a[d]+")";var y=c++;a[y]="(?:"+a[u]+"|"+a[d]+")";var v=c++;a[v]="(?:-("+a[f]+"(?:\\."+a[f]+")*))";var _=c++;a[_]="(?:-?("+a[y]+"(?:\\."+a[y]+")*))";var C=c++;a[C]="[0-9A-Za-z-]+";var P=c++;a[P]="(?:\\+("+a[C]+"(?:\\."+a[C]+")*))";var w=c++,R="v?"+a[p]+a[v]+"?"+a[P]+"?";a[w]="^"+R+"$";var I="[v=\\s]*"+a[m]+a[_]+"?"+a[P]+"?",z=c++;a[z]="^"+I+"$";var G=c++;a[G]="((?:<|>)?=?)";var L=c++;a[L]=a[u]+"|x|X|\\*";var H=c++;a[H]=a[l]+"|x|X|\\*";var ee=c++;a[ee]="[v=\\s]*("+a[H]+")(?:\\.("+a[H]+")(?:\\.("+a[H]+")(?:"+a[v]+")?"+a[P]+"?)?)?";var ye=c++;a[ye]="[v=\\s]*("+a[L]+")(?:\\.("+a[L]+")(?:\\.("+a[L]+")(?:"+a[_]+")?"+a[P]+"?)?)?";var $e=c++;a[$e]="^"+a[G]+"\\s*"+a[ee]+"$";var Be=c++;a[Be]="^"+a[G]+"\\s*"+a[ye]+"$";var Ct=c++;a[Ct]="(?:^|[^\\d])(\\d{1,"+s+"})(?:\\.(\\d{1,"+s+"}))?(?:\\.(\\d{1,"+s+"}))?(?:$|[^\\d])";var Ge=c++;a[Ge]="(?:~>?)";var pe=c++;a[pe]="(\\s*)"+a[Ge]+"\\s+",o[pe]=new RegExp(a[pe],"g");var Ie="$1~",Ve=c++;a[Ve]="^"+a[Ge]+a[ee]+"$";var lt=c++;a[lt]="^"+a[Ge]+a[ye]+"$";var ut=c++;a[ut]="(?:\\^)";var ce=c++;a[ce]="(\\s*)"+a[ut]+"\\s+",o[ce]=new RegExp(a[ce],"g");var ue="$1^",Ue=c++;a[Ue]="^"+a[ut]+a[ee]+"$";var ct=c++;a[ct]="^"+a[ut]+a[ye]+"$";var jt=c++;a[jt]="^"+a[G]+"\\s*("+I+")$|^$";var tr=c++;a[tr]="^"+a[G]+"\\s*("+R+")$|^$";var se=c++;a[se]="(\\s*)"+a[G]+"\\s*("+I+"|"+a[ee]+")",o[se]=new RegExp(a[se],"g");var we="$1$2$3",Ne=c++;a[Ne]="^\\s*("+a[ee]+")\\s+-\\s+("+a[ee]+")\\s*$";var Re=c++;a[Re]="^\\s*("+a[ye]+")\\s+-\\s+("+a[ye]+")\\s*$";var Le=c++;for(a[Le]="(<|>)?=?\\s*\\*",ht=0;ht<c;ht++)t(ht,a[ht]),o[ht]||(o[ht]=new RegExp(a[ht]));var ht;r.parse=Ee;function Ee(E,x){if((!x||typeof x!="object")&&(x={loose:!!x,includePrerelease:!1}),E instanceof le)return E;if(typeof E!="string"||E.length>n)return null;var j=x.loose?o[z]:o[w];if(!j.test(E))return null;try{return new le(E,x)}catch{return null}}r.valid=ie;function ie(E,x){var j=Ee(E,x);return j?j.version:null}r.clean=je;function je(E,x){var j=Ee(E.trim().replace(/^[=v]+/,""),x);return j?j.version:null}r.SemVer=le;function le(E,x){if((!x||typeof x!="object")&&(x={loose:!!x,includePrerelease:!1}),E instanceof le){if(E.loose===x.loose)return E;E=E.version}else if(typeof E!="string")throw new TypeError("Invalid Version: "+E);if(E.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof le))return new le(E,x);t("SemVer",E,x),this.options=x,this.loose=!!x.loose;var j=E.trim().match(x.loose?o[z]:o[w]);if(!j)throw new TypeError("Invalid Version: "+E);if(this.raw=E,this.major=+j[1],this.minor=+j[2],this.patch=+j[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");j[4]?this.prerelease=j[4].split(".").map(function(ne){if(/^[0-9]+$/.test(ne)){var re=+ne;if(re>=0&&re<i)return re}return ne}):this.prerelease=[],this.build=j[5]?j[5].split("."):[],this.format()}le.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},le.prototype.toString=function(){return this.version},le.prototype.compare=function(E){return t("SemVer.compare",this.version,this.options,E),E instanceof le||(E=new le(E,this.options)),this.compareMain(E)||this.comparePre(E)},le.prototype.compareMain=function(E){return E instanceof le||(E=new le(E,this.options)),ke(this.major,E.major)||ke(this.minor,E.minor)||ke(this.patch,E.patch)},le.prototype.comparePre=function(E){if(E instanceof le||(E=new le(E,this.options)),this.prerelease.length&&!E.prerelease.length)return-1;if(!this.prerelease.length&&E.prerelease.length)return 1;if(!this.prerelease.length&&!E.prerelease.length)return 0;var x=0;do{var j=this.prerelease[x],ne=E.prerelease[x];if(t("prerelease compare",x,j,ne),j===void 0&&ne===void 0)return 0;if(ne===void 0)return 1;if(j===void 0)return-1;if(j!==ne)return ke(j,ne)}while(++x)},le.prototype.inc=function(E,x){switch(E){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",x);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",x);break;case"prepatch":this.prerelease.length=0,this.inc("patch",x),this.inc("pre",x);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",x),this.inc("pre",x);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var j=this.prerelease.length;--j>=0;)typeof this.prerelease[j]=="number"&&(this.prerelease[j]++,j=-2);j===-1&&this.prerelease.push(0)}x&&(this.prerelease[0]===x?isNaN(this.prerelease[1])&&(this.prerelease=[x,0]):this.prerelease=[x,0]);break;default:throw new Error("invalid increment argument: "+E)}return this.format(),this.raw=this.version,this},r.inc=_e;function _e(E,x,j,ne){typeof j=="string"&&(ne=j,j=void 0);try{return new le(E,j).inc(x,ne).version}catch{return null}}r.diff=B;function B(E,x){if(Ut(E,x))return null;var j=Ee(E),ne=Ee(x),re="";if(j.prerelease.length||ne.prerelease.length){re="pre";var he="prerelease"}for(var Se in j)if((Se==="major"||Se==="minor"||Se==="patch")&&j[Se]!==ne[Se])return re+Se;return he}r.compareIdentifiers=ke;var be=/^[0-9]+$/;function ke(E,x){var j=be.test(E),ne=be.test(x);return j&&ne&&(E=+E,x=+x),E===x?0:j&&!ne?-1:ne&&!j?1:E<x?-1:1}r.rcompareIdentifiers=W;function W(E,x){return ke(x,E)}r.major=Oe;function Oe(E,x){return new le(E,x).major}r.minor=Ht;function Ht(E,x){return new le(E,x).minor}r.patch=_r;function _r(E,x){return new le(E,x).patch}r.compare=fr;function fr(E,x,j){return new le(E,j).compare(new le(x,j))}r.compareLoose=He;function He(E,x){return fr(E,x,!0)}r.rcompare=Xe;function Xe(E,x,j){return fr(x,E,j)}r.sort=J;function J(E,x){return E.sort(function(j,ne){return r.compare(j,ne,x)})}r.rsort=fe;function fe(E,x){return E.sort(function(j,ne){return r.rcompare(j,ne,x)})}r.gt=Ke;function Ke(E,x,j){return fr(E,x,j)>0}r.lt=nt;function nt(E,x,j){return fr(E,x,j)<0}r.eq=Ut;function Ut(E,x,j){return fr(E,x,j)===0}r.neq=er;function er(E,x,j){return fr(E,x,j)!==0}r.gte=Cr;function Cr(E,x,j){return fr(E,x,j)>=0}r.lte=gr;function gr(E,x,j){return fr(E,x,j)<=0}r.cmp=dt;function dt(E,x,j,ne){switch(x){case"===":return typeof E=="object"&&(E=E.version),typeof j=="object"&&(j=j.version),E===j;case"!==":return typeof E=="object"&&(E=E.version),typeof j=="object"&&(j=j.version),E!==j;case"":case"=":case"==":return Ut(E,j,ne);case"!=":return er(E,j,ne);case">":return Ke(E,j,ne);case">=":return Cr(E,j,ne);case"<":return nt(E,j,ne);case"<=":return gr(E,j,ne);default:throw new TypeError("Invalid operator: "+x)}}r.Comparator=It;function It(E,x){if((!x||typeof x!="object")&&(x={loose:!!x,includePrerelease:!1}),E instanceof It){if(E.loose===!!x.loose)return E;E=E.value}if(!(this instanceof It))return new It(E,x);t("comparator",E,x),this.options=x,this.loose=!!x.loose,this.parse(E),this.semver===Je?this.value="":this.value=this.operator+this.semver.version,t("comp",this)}var Je={};It.prototype.parse=function(E){var x=this.options.loose?o[jt]:o[tr],j=E.match(x);if(!j)throw new TypeError("Invalid comparator: "+E);this.operator=j[1],this.operator==="="&&(this.operator=""),j[2]?this.semver=new le(j[2],this.options.loose):this.semver=Je},It.prototype.toString=function(){return this.value},It.prototype.test=function(E){return t("Comparator.test",E,this.options.loose),this.semver===Je?!0:(typeof E=="string"&&(E=new le(E,this.options)),dt(E,this.operator,this.semver,this.options))},It.prototype.intersects=function(E,x){if(!(E instanceof It))throw new TypeError("a Comparator is required");(!x||typeof x!="object")&&(x={loose:!!x,includePrerelease:!1});var j;if(this.operator==="")return j=new Ye(E.value,x),Pr(this.value,j,x);if(E.operator==="")return j=new Ye(this.value,x),Pr(E.semver,j,x);var ne=(this.operator===">="||this.operator===">")&&(E.operator===">="||E.operator===">"),re=(this.operator==="<="||this.operator==="<")&&(E.operator==="<="||E.operator==="<"),he=this.semver.version===E.semver.version,Se=(this.operator===">="||this.operator==="<=")&&(E.operator===">="||E.operator==="<="),ot=dt(this.semver,"<",E.semver,x)&&(this.operator===">="||this.operator===">")&&(E.operator==="<="||E.operator==="<"),it=dt(this.semver,">",E.semver,x)&&(this.operator==="<="||this.operator==="<")&&(E.operator===">="||E.operator===">");return ne||re||he&&Se||ot||it},r.Range=Ye;function Ye(E,x){if((!x||typeof x!="object")&&(x={loose:!!x,includePrerelease:!1}),E instanceof Ye)return E.loose===!!x.loose&&E.includePrerelease===!!x.includePrerelease?E:new Ye(E.raw,x);if(E instanceof It)return new Ye(E.value,x);if(!(this instanceof Ye))return new Ye(E,x);if(this.options=x,this.loose=!!x.loose,this.includePrerelease=!!x.includePrerelease,this.raw=E,this.set=E.split(/\s*\|\|\s*/).map(function(j){return this.parseRange(j.trim())},this).filter(function(j){return j.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+E);this.format()}Ye.prototype.format=function(){return this.range=this.set.map(function(E){return E.join(" ").trim()}).join("||").trim(),this.range},Ye.prototype.toString=function(){return this.range},Ye.prototype.parseRange=function(E){var x=this.options.loose;E=E.trim();var j=x?o[Re]:o[Ne];E=E.replace(j,$t),t("hyphen replace",E),E=E.replace(o[se],we),t("comparator trim",E,o[se]),E=E.replace(o[pe],Ie),E=E.replace(o[ce],ue),E=E.split(/\s+/).join(" ");var ne=x?o[jt]:o[tr],re=E.split(" ").map(function(he){return Kr(he,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(re=re.filter(function(he){return!!he.match(ne)})),re=re.map(function(he){return new It(he,this.options)},this),re},Ye.prototype.intersects=function(E,x){if(!(E instanceof Ye))throw new TypeError("a Range is required");return this.set.some(function(j){return j.every(function(ne){return E.set.some(function(re){return re.every(function(he){return ne.intersects(he,x)})})})})},r.toComparators=pr;function pr(E,x){return new Ye(E,x).set.map(function(j){return j.map(function(ne){return ne.value}).join(" ").trim().split(" ")})}function Kr(E,x){return t("comp",E,x),E=Do(E,x),t("caret",E),E=pi(E,x),t("tildes",E),E=za(E,x),t("xrange",E),E=or(E,x),t("stars",E),E}function Bt(E){return!E||E.toLowerCase()==="x"||E==="*"}function pi(E,x){return E.trim().split(/\s+/).map(function(j){return Yi(j,x)}).join(" ")}function Yi(E,x){var j=x.loose?o[lt]:o[Ve];return E.replace(j,function(ne,re,he,Se,ot){t("tilde",E,ne,re,he,Se,ot);var it;return Bt(re)?it="":Bt(he)?it=">="+re+".0.0 <"+(+re+1)+".0.0":Bt(Se)?it=">="+re+"."+he+".0 <"+re+"."+(+he+1)+".0":ot?(t("replaceTilde pr",ot),it=">="+re+"."+he+"."+Se+"-"+ot+" <"+re+"."+(+he+1)+".0"):it=">="+re+"."+he+"."+Se+" <"+re+"."+(+he+1)+".0",t("tilde return",it),it})}function Do(E,x){return E.trim().split(/\s+/).map(function(j){return aa(j,x)}).join(" ")}function aa(E,x){t("caret",E,x);var j=x.loose?o[ct]:o[Ue];return E.replace(j,function(ne,re,he,Se,ot){t("caret",E,ne,re,he,Se,ot);var it;return Bt(re)?it="":Bt(he)?it=">="+re+".0.0 <"+(+re+1)+".0.0":Bt(Se)?re==="0"?it=">="+re+"."+he+".0 <"+re+"."+(+he+1)+".0":it=">="+re+"."+he+".0 <"+(+re+1)+".0.0":ot?(t("replaceCaret pr",ot),re==="0"?he==="0"?it=">="+re+"."+he+"."+Se+"-"+ot+" <"+re+"."+he+"."+(+Se+1):it=">="+re+"."+he+"."+Se+"-"+ot+" <"+re+"."+(+he+1)+".0":it=">="+re+"."+he+"."+Se+"-"+ot+" <"+(+re+1)+".0.0"):(t("no pr"),re==="0"?he==="0"?it=">="+re+"."+he+"."+Se+" <"+re+"."+he+"."+(+Se+1):it=">="+re+"."+he+"."+Se+" <"+re+"."+(+he+1)+".0":it=">="+re+"."+he+"."+Se+" <"+(+re+1)+".0.0"),t("caret return",it),it})}function za(E,x){return t("replaceXRanges",E,x),E.split(/\s+/).map(function(j){return mr(j,x)}).join(" ")}function mr(E,x){E=E.trim();var j=x.loose?o[Be]:o[$e];return E.replace(j,function(ne,re,he,Se,ot,it){t("xRange",E,ne,re,he,Se,ot,it);var zr=Bt(he),Vr=zr||Bt(Se),sr=Vr||Bt(ot),qr=sr;return re==="="&&qr&&(re=""),zr?re===">"||re==="<"?ne="<0.0.0":ne="*":re&&qr?(Vr&&(Se=0),ot=0,re===">"?(re=">=",Vr?(he=+he+1,Se=0,ot=0):(Se=+Se+1,ot=0)):re==="<="&&(re="<",Vr?he=+he+1:Se=+Se+1),ne=re+he+"."+Se+"."+ot):Vr?ne=">="+he+".0.0 <"+(+he+1)+".0.0":sr&&(ne=">="+he+"."+Se+".0 <"+he+"."+(+Se+1)+".0"),t("xRange return",ne),ne})}function or(E,x){return t("replaceStars",E,x),E.trim().replace(o[Le],"")}function $t(E,x,j,ne,re,he,Se,ot,it,zr,Vr,sr,qr){return Bt(j)?x="":Bt(ne)?x=">="+j+".0.0":Bt(re)?x=">="+j+"."+ne+".0":x=">="+x,Bt(it)?ot="":Bt(zr)?ot="<"+(+it+1)+".0.0":Bt(Vr)?ot="<"+it+"."+(+zr+1)+".0":sr?ot="<="+it+"."+zr+"."+Vr+"-"+sr:ot="<="+ot,(x+" "+ot).trim()}Ye.prototype.test=function(E){if(!E)return!1;typeof E=="string"&&(E=new le(E,this.options));for(var x=0;x<this.set.length;x++)if(yt(this.set[x],E,this.options))return!0;return!1};function yt(E,x,j){for(var ne=0;ne<E.length;ne++)if(!E[ne].test(x))return!1;if(x.prerelease.length&&!j.includePrerelease){for(ne=0;ne<E.length;ne++)if(t(E[ne].semver),E[ne].semver!==Je&&E[ne].semver.prerelease.length>0){var re=E[ne].semver;if(re.major===x.major&&re.minor===x.minor&&re.patch===x.patch)return!0}return!1}return!0}r.satisfies=Pr;function Pr(E,x,j){try{x=new Ye(x,j)}catch{return!1}return x.test(E)}r.maxSatisfying=Ir;function Ir(E,x,j){var ne=null,re=null;try{var he=new Ye(x,j)}catch{return null}return E.forEach(function(Se){he.test(Se)&&(!ne||re.compare(Se)===-1)&&(ne=Se,re=new le(ne,j))}),ne}r.minSatisfying=Yt;function Yt(E,x,j){var ne=null,re=null;try{var he=new Ye(x,j)}catch{return null}return E.forEach(function(Se){he.test(Se)&&(!ne||re.compare(Se)===1)&&(ne=Se,re=new le(ne,j))}),ne}r.minVersion=$r;function $r(E,x){E=new Ye(E,x);var j=new le("0.0.0");if(E.test(j)||(j=new le("0.0.0-0"),E.test(j)))return j;j=null;for(var ne=0;ne<E.set.length;++ne){var re=E.set[ne];re.forEach(function(he){var Se=new le(he.semver.version);switch(he.operator){case">":Se.prerelease.length===0?Se.patch++:Se.prerelease.push(0),Se.raw=Se.format();case"":case">=":(!j||Ke(j,Se))&&(j=Se);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+he.operator)}})}return j&&E.test(j)?j:null}r.validRange=tn;function tn(E,x){try{return new Ye(E,x).range||"*"}catch{return null}}r.ltr=ei;function ei(E,x,j){return mi(E,x,"<",j)}r.gtr=Xi;function Xi(E,x,j){return mi(E,x,">",j)}r.outside=mi;function mi(E,x,j,ne){E=new le(E,ne),x=new Ye(x,ne);var re,he,Se,ot,it;switch(j){case">":re=Ke,he=gr,Se=nt,ot=">",it=">=";break;case"<":re=nt,he=Cr,Se=Ke,ot="<",it="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Pr(E,x,ne))return!1;for(var zr=0;zr<x.set.length;++zr){var Vr=x.set[zr],sr=null,qr=null;if(Vr.forEach(function(Or){Or.semver===Je&&(Or=new It(">=0.0.0")),sr=sr||Or,qr=qr||Or,re(Or.semver,sr.semver,ne)?sr=Or:Se(Or.semver,qr.semver,ne)&&(qr=Or)}),sr.operator===ot||sr.operator===it||(!qr.operator||qr.operator===ot)&&he(E,qr.semver)||qr.operator===it&&Se(E,qr.semver))return!1}return!0}r.prerelease=ni;function ni(E,x){var j=Ee(E,x);return j&&j.prerelease.length?j.prerelease:null}r.intersects=Lr;function Lr(E,x,j){return E=new Ye(E,j),x=new Ye(x,j),E.intersects(x)}r.coerce=On;function On(E){if(E instanceof le)return E;if(typeof E!="string")return null;var x=E.match(o[Ct]);return x==null?null:Ee(x[1]+"."+(x[2]||"0")+"."+(x[3]||"0"))}}),hle=ae((r,e)=>{"use strict";function t(u){return typeof u=="function"}var n=console.error.bind(console);function i(u,d,p){var m=!!u[d]&&u.propertyIsEnumerable(d);Object.defineProperty(u,d,{configurable:!0,enumerable:m,writable:!0,value:p})}function s(u){u&&u.logger&&(t(u.logger)?n=u.logger:n("new logger isn't a function, not replacing"))}function o(u,d,p){if(!u||!u[d]){n("no original function "+d+" to wrap");return}if(!p){n("no wrapper function"),n(new Error().stack);return}if(!t(u[d])||!t(p)){n("original object and wrapper must be functions");return}var m=u[d],f=p(m,d);return i(f,"__original",m),i(f,"__unwrap",function(){u[d]===f&&i(u,d,m)}),i(f,"__wrapped",!0),i(u,d,f),f}function a(u,d,p){if(u)Array.isArray(u)||(u=[u]);else{n("must provide one or more modules to patch"),n(new Error().stack);return}if(!(d&&Array.isArray(d))){n("must provide one or more functions to wrap on modules");return}u.forEach(function(m){d.forEach(function(f){o(m,f,p)})})}function c(u,d){if(!u||!u[d]){n("no function to unwrap."),n(new Error().stack);return}if(!u[d].__unwrap)n("no original to unwrap to -- has "+d+" already been unwrapped?");else return u[d].__unwrap()}function l(u,d){if(u)Array.isArray(u)||(u=[u]);else{n("must provide one or more modules to patch"),n(new Error().stack);return}if(!(d&&Array.isArray(d))){n("must provide one or more functions to unwrap on modules");return}u.forEach(function(p){d.forEach(function(m){c(p,m)})})}s.wrap=o,s.massWrap=a,s.unwrap=c,s.massUnwrap=l,e.exports=s}),fle=ae((r,e)=>{"use strict";var t=hle(),n=t.wrap,i=t.unwrap,s="wrap@before";function o(d,p,m){var f=!!d[p]&&d.propertyIsEnumerable(p);Object.defineProperty(d,p,{configurable:!0,enumerable:f,writable:!0,value:m})}function a(d,p){for(var m=p.length,f=0;f<m;f++){var y=p[f],v=d[s];if(typeof v=="function")v(y);else if(Array.isArray(v))for(var _=v.length,C=0;C<_;C++)v[C](y)}}function c(d,p){var m;return m=d._events&&d._events[p],Array.isArray(m)||(m?m=[m]:m=[]),m}function l(d,p,m){var f=c(d,p),y=f.filter(function(v){return m.indexOf(v)===-1});y.length>0&&a(d,y)}function u(d,p){if(d){var m=d;if(typeof d=="function")m=p(d);else if(Array.isArray(d)){m=[];for(var f=0;f<d.length;f++)m[f]=p(d[f])}return m}}e.exports=function(d,p,m){if(!d||!d.on||!d.addListener||!d.removeListener||!d.emit)throw new Error("can only wrap real EEs");if(!p)throw new Error("must have function to run on listener addition");if(!m)throw new Error("must have function to wrap listeners when emitting");function f(v){return function(_,C){var P=c(this,_).slice();try{var w=v.call(this,_,C);return l(this,_,P),w}finally{this.on.__wrapped||n(this,"on",f),this.addListener.__wrapped||n(this,"addListener",f)}}}function y(v){return function(_){if(!this._events||!this._events[_])return v.apply(this,arguments);var C=this._events[_];function P(w){return function(){this._events[_]=C;try{return w.apply(this,arguments)}finally{C=this._events[_],this._events[_]=u(C,m)}}}n(this,"removeListener",P);try{return this._events[_]=u(C,m),v.apply(this,arguments)}finally{i(this,"removeListener"),this._events[_]=C}}}d[s]?typeof d[s]=="function"?o(d,s,[d[s],p]):Array.isArray(d[s])&&d[s].push(p):o(d,s,p),d.__wrapped||(n(d,"addListener",f),n(d,"on",f),n(d,"emit",y),o(d,"__unwrap",function(){i(d,"addListener"),i(d,"on"),i(d,"emit"),delete d[s],delete d.__wrapped}),o(d,"__wrapped",!0))}}),lHt=ae((r,e)=>{"use strict";var t=require("util"),n=require("assert"),i=fle(),s=require("async_hooks"),o="cls@contexts",a="error@context",c=process.env.DEBUG_CLS_HOOKED,l=-1;e.exports={getNamespace:d,createNamespace:p,destroyNamespace:m,reset:f,ERROR_SYMBOL:a};function u(v){this.name=v,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}u.prototype.set=function(v,_){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[v]=_,c){let C=" ".repeat(this._indent<0?0:this._indent);y(C+"CONTEXT-SET KEY:"+v+"="+_+" in ns:"+this.name+" currentUid:"+l+" active:"+t.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return _},u.prototype.get=function(v){if(!this.active){if(c){let _=s.currentId(),C=s.triggerAsyncId(),P=" ".repeat(this._indent<0?0:this._indent);y(`${P}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${v}=undefined currentUid:${l} asyncHooksCurrentId:${_} triggerId:${C} len:${this._set.length}`)}return}if(c){let _=s.executionAsyncId(),C=s.triggerAsyncId(),P=" ".repeat(this._indent<0?0:this._indent);y(P+"CONTEXT-GETTING KEY:"+v+"="+this.active[v]+" ("+this.name+") currentUid:"+l+" active:"+t.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),y(`${P}CONTEXT-GETTING KEY: (${this.name}) ${v}=${this.active[v]} currentUid:${l} asyncHooksCurrentId:${_} triggerId:${C} len:${this._set.length} active:${t.inspect(this.active)}`)}return this.active[v]},u.prototype.createContext=function(){let v=Object.create(this.active?this.active:Object.prototype);if(v._ns_name=this.name,v.id=l,c){let _=s.executionAsyncId(),C=s.triggerAsyncId(),P=" ".repeat(this._indent<0?0:this._indent);y(`${P}CONTEXT-CREATED Context: (${this.name}) currentUid:${l} asyncHooksCurrentId:${_} triggerId:${C} len:${this._set.length} context:${t.inspect(v,{showHidden:!0,depth:2,colors:!0})}`)}return v},u.prototype.run=function(v){let _=this.createContext();this.enter(_);try{if(c){let C=s.triggerAsyncId(),P=s.executionAsyncId(),w=" ".repeat(this._indent<0?0:this._indent);y(`${w}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${l} triggerId:${C} asyncHooksCurrentId:${P} len:${this._set.length} context:${t.inspect(_)}`)}return v(_),_}catch(C){throw C&&(C[a]=_),C}finally{if(c){let C=s.triggerAsyncId(),P=s.executionAsyncId(),w=" ".repeat(this._indent<0?0:this._indent);y(`${w}CONTEXT-RUN END: (${this.name}) currentUid:${l} triggerId:${C} asyncHooksCurrentId:${P} len:${this._set.length} ${t.inspect(_)}`)}this.exit(_)}},u.prototype.runAndReturn=function(v){let _;return this.run(function(C){_=v(C)}),_},u.prototype.runPromise=function(v){let _=this.createContext();this.enter(_);let C=v(_);if(!C||!C.then||!C.catch)throw new Error("fn must return a promise.");return c&&y("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+t.inspect(_)),C.then(P=>(c&&y("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+t.inspect(_)),this.exit(_),P)).catch(P=>{throw P[a]=_,c&&y("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+t.inspect(_)),this.exit(_),P})},u.prototype.bind=function(v,_){_||(this.active?_=this.active:_=this.createContext());let C=this;return function(){C.enter(_);try{return v.apply(this,arguments)}catch(P){throw P&&(P[a]=_),P}finally{C.exit(_)}}},u.prototype.enter=function(v){if(n.ok(v,"context must be provided for entering"),c){let _=s.executionAsyncId(),C=s.triggerAsyncId(),P=" ".repeat(this._indent<0?0:this._indent);y(`${P}CONTEXT-ENTER: (${this.name}) currentUid:${l} triggerId:${C} asyncHooksCurrentId:${_} len:${this._set.length} ${t.inspect(v)}`)}this._set.push(this.active),this.active=v},u.prototype.exit=function(v){if(n.ok(v,"context must be provided for exiting"),c){let C=s.executionAsyncId(),P=s.triggerAsyncId(),w=" ".repeat(this._indent<0?0:this._indent);y(`${w}CONTEXT-EXIT: (${this.name}) currentUid:${l} triggerId:${P} asyncHooksCurrentId:${C} len:${this._set.length} ${t.inspect(v)}`)}if(this.active===v){n.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let _=this._set.lastIndexOf(v);_<0?(c&&y("??ERROR?? context exiting but not entered - ignoring: "+t.inspect(v)),n.ok(_>=0,`context not currently entered; can't exit. 
`+t.inspect(this)+`
`+t.inspect(v))):(n.ok(_,"can't remove top context"),this._set.splice(_,1))},u.prototype.bindEmitter=function(v){n.ok(v.on&&v.addListener&&v.emit,"can only bind real EEs");let _=this,C="context@"+this.name;function P(R){!R||(R[o]||(R[o]=Object.create(null)),R[o][C]={namespace:_,context:_.active})}function w(R){if(!(R&&R[o]))return R;let I=R,z=R[o];return Object.keys(z).forEach(function(G){let L=z[G];I=L.namespace.bind(I,L.context)}),I}i(v,P,w)},u.prototype.fromException=function(v){return v[a]};function d(v){return process.namespaces[v]}function p(v){n.ok(v,"namespace must be given a name."),c&&y(`NS-CREATING NAMESPACE (${v})`);let _=new u(v);return _.id=l,s.createHook({init(C,P,w,R){if(l=s.executionAsyncId(),_.active){if(_._contexts.set(C,_.active),c){let I=" ".repeat(_._indent<0?0:_._indent);y(`${I}INIT [${P}] (${v}) asyncId:${C} currentUid:${l} triggerId:${w} active:${t.inspect(_.active,{showHidden:!0,depth:2,colors:!0})} resource:${R}`)}}else if(l===0){let I=s.triggerAsyncId(),z=_._contexts.get(I);if(z){if(_._contexts.set(C,z),c){let G=" ".repeat(_._indent<0?0:_._indent);y(`${G}INIT USING CONTEXT FROM TRIGGERID [${P}] (${v}) asyncId:${C} currentUid:${l} triggerId:${I} active:${t.inspect(_.active,{showHidden:!0,depth:2,colors:!0})} resource:${R}`)}}else if(c){let G=" ".repeat(_._indent<0?0:_._indent);y(`${G}INIT MISSING CONTEXT [${P}] (${v}) asyncId:${C} currentUid:${l} triggerId:${I} active:${t.inspect(_.active,{showHidden:!0,depth:2,colors:!0})} resource:${R}`)}}if(c&&P==="PROMISE"){y(t.inspect(R,{showHidden:!0}));let I=R.parentId,z=" ".repeat(_._indent<0?0:_._indent);y(`${z}INIT RESOURCE-PROMISE [${P}] (${v}) parentId:${I} asyncId:${C} currentUid:${l} triggerId:${w} active:${t.inspect(_.active,{showHidden:!0,depth:2,colors:!0})} resource:${R}`)}},before(C){l=s.executionAsyncId();let P;if(P=_._contexts.get(C)||_._contexts.get(l),P){if(c){let w=s.triggerAsyncId(),R=" ".repeat(_._indent<0?0:_._indent);y(`${R}BEFORE (${v}) asyncId:${C} currentUid:${l} triggerId:${w} active:${t.inspect(_.active,{showHidden:!0,depth:2,colors:!0})} context:${t.inspect(P)}`),_._indent+=2}_.enter(P)}else if(c){let w=s.triggerAsyncId(),R=" ".repeat(_._indent<0?0:_._indent);y(`${R}BEFORE MISSING CONTEXT (${v}) asyncId:${C} currentUid:${l} triggerId:${w} active:${t.inspect(_.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${t.inspect(_._contexts,{showHidden:!0,depth:2,colors:!0})}`),_._indent+=2}},after(C){l=s.executionAsyncId();let P;if(P=_._contexts.get(C)||_._contexts.get(l),P){if(c){let w=s.triggerAsyncId();_._indent-=2;let R=" ".repeat(_._indent<0?0:_._indent);y(`${R}AFTER (${v}) asyncId:${C} currentUid:${l} triggerId:${w} active:${t.inspect(_.active,{showHidden:!0,depth:2,colors:!0})} context:${t.inspect(P)}`)}_.exit(P)}else if(c){let w=s.triggerAsyncId();_._indent-=2;let R=" ".repeat(_._indent<0?0:_._indent);y(`${R}AFTER MISSING CONTEXT (${v}) asyncId:${C} currentUid:${l} triggerId:${w} active:${t.inspect(_.active,{showHidden:!0,depth:2,colors:!0})} context:${t.inspect(P)}`)}},destroy(C){if(l=s.executionAsyncId(),c){let P=s.triggerAsyncId(),w=" ".repeat(_._indent<0?0:_._indent);y(`${w}DESTROY (${v}) currentUid:${l} asyncId:${C} triggerId:${P} active:${t.inspect(_.active,{showHidden:!0,depth:2,colors:!0})} context:${t.inspect(_._contexts.get(l))}`)}_._contexts.delete(C)}}).enable(),process.namespaces[v]=_,_}function m(v){let _=d(v);n.ok(_,`can't delete nonexistent namespace! "`+v+'"'),n.ok(_.id,"don't assign to process.namespaces directly! "+t.inspect(_)),process.namespaces[v]=null}function f(){process.namespaces&&Object.keys(process.namespaces).forEach(function(v){m(v)}),process.namespaces=Object.create(null)}process.namespaces={};function y(...v){c&&process._rawDebug(`${t.format(...v)}`)}}),uHt=ae((r,e)=>{"use strict";function t(){}e.exports=function(){let n=this._hooks,i=this._state,s=process.nextTick;process.nextTick=function(){if(!i.enabled)return s.apply(process,arguments);let o=new Array(arguments.length);for(let u=0;u<arguments.length;u++)o[u]=arguments[u];let a=o[0];if(typeof a!="function")throw new TypeError("callback is not a function");let c=new t,l=--i.counter;return n.init.call(c,l,0,null,null),o[0]=function(){n.pre.call(c,l);let u=!0;try{a.apply(this,arguments),u=!1}finally{u&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){n.post.call(c,l,!0),n.destroy.call(null,l)})}n.post.call(c,l,!1),n.destroy.call(null,l)},s.apply(process,o)}}}),dHt=ae((r,e)=>{"use strict";function t(){}e.exports=function(){let n=this._hooks,i=this._state,s=global.Promise,o=s.prototype.then;s.prototype.then=u;function a(d,p,m,f){return typeof d!="function"?f?c(m):l(m):function(){n.pre.call(p,m);try{return d.apply(this,arguments)}finally{n.post.call(p,m,!1),n.destroy.call(null,m)}}}function c(d){return function(p){return n.destroy.call(null,d),p}}function l(d){return function(p){throw n.destroy.call(null,d),p}}function u(d,p){if(!i.enabled)return o.call(this,d,p);let m=new t,f=--i.counter;return n.init.call(m,f,0,null,null),o.call(this,a(d,m,f,!0),a(p,m,f,!1))}}}),pHt=ae((r,e)=>{"use strict";var t=require("timers");function n(){}function i(){}function s(){}var o=new Map,a=new Map,c=new Map,l=null,u=!1;e.exports=function(){d(this._hooks,this._state,"setTimeout","clearTimeout",n,o,!0),d(this._hooks,this._state,"setInterval","clearInterval",i,a,!1),d(this._hooks,this._state,"setImmediate","clearImmediate",s,c,!0),global.setTimeout=t.setTimeout,global.setInterval=t.setInterval,global.setImmediate=t.setImmediate,global.clearTimeout=t.clearTimeout,global.clearInterval=t.clearInterval,global.clearImmediate=t.clearImmediate};function d(p,m,f,y,v,_,C){let P=t[f],w=t[y];t[f]=function(){if(!m.enabled)return P.apply(t,arguments);let R=new Array(arguments.length);for(let H=0;H<arguments.length;H++)R[H]=arguments[H];let I=R[0];if(typeof I!="function")throw new TypeError('"callback" argument must be a function');let z=new v,G=--m.counter,L;return p.init.call(z,G,0,null,null),R[0]=function(){l=L,p.pre.call(z,G);let H=!0;try{I.apply(this,arguments),H=!1}finally{H&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){p.post.call(z,G,!0),_.delete(L),p.destroy.call(null,G)})}p.post.call(z,G,!1),l=null,(C||u)&&(u=!1,_.delete(L),p.destroy.call(null,G))},L=P.apply(t,R),_.set(L,G),L},t[y]=function(R){if(l===R&&R!==null)u=!0;else if(_.has(R)){let I=_.get(R);_.delete(R),p.destroy.call(null,I)}w.apply(t,arguments)}}}),v2e=ae((r,e)=>{e.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}}}),mHt=ae((r,e)=>{"use strict";var t=process.binding("async_wrap"),n=t.Providers.TIMERWRAP,i={nextTick:uHt(),promise:dHt(),timers:pHt()},s=new Set;function o(){this.enabled=!1,this.counter=0}function a(){let u=this.initFns=[],d=this.preFns=[],p=this.postFns=[],m=this.destroyFns=[];this.init=function(f,y,v,_){if(y===n){s.add(f);return}for(let C of u)C(f,this,y,v,_)},this.pre=function(f){if(!s.has(f))for(let y of d)y(f,this)},this.post=function(f,y){if(!s.has(f))for(let v of p)v(f,this,y)},this.destroy=function(f){if(s.has(f)){s.delete(f);return}for(let y of m)y(f)}}a.prototype.add=function(u){u.init&&this.initFns.push(u.init),u.pre&&this.preFns.push(u.pre),u.post&&this.postFns.push(u.post),u.destroy&&this.destroyFns.push(u.destroy)};function c(u,d){let p=u.indexOf(d);p!==-1&&u.splice(p,1)}a.prototype.remove=function(u){u.init&&c(this.initFns,u.init),u.pre&&c(this.preFns,u.pre),u.post&&c(this.postFns,u.post),u.destroy&&c(this.destroyFns,u.destroy)};function l(){this._state=new o,this._hooks=new a,this.version=v2e().version,this.providers=t.Providers;for(let u of Object.keys(i))i[u].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),t.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}e.exports=l,l.prototype.addHooks=function(u){this._hooks.add(u)},l.prototype.removeHooks=function(u){this._hooks.remove(u)},l.prototype.enable=function(){this._state.enabled=!0,t.enable()},l.prototype.disable=function(){this._state.enabled=!1,t.disable()}}),b2e=ae((r,e)=>{e.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"}}),hHt=ae((r,e)=>{function t(n){try{return Error.prototype.toString.call(n)}catch(i){try{return"<error: "+i+">"}catch{return"<error>"}}}e.exports=function(n,i){var s=[];s.push(t(n));for(var o=0;o<i.length;o++){var a=i[o],c;try{c=a.toString()}catch(l){try{c="<error: "+l+">"}catch{c="<error>"}}s.push("    at "+c)}return s.join(`
`)}}),fHt=ae((r,e)=>{var t=hHt();function n(){this.extend=new o,this.filter=new o,this.format=new a,this.version=b2e().version}var i=!1;n.prototype.callSite=function d(p){p||(p={}),i=!0;var m={};Error.captureStackTrace(m,d);var f=m.stack;return i=!1,f=f.slice(p.slice||0),p.extend&&(f=this.extend._modify(m,f)),p.filter&&(f=this.filter._modify(m,f)),f};var s=new n;function o(){this._modifiers=[]}o.prototype._modify=function(d,p){for(var m=0,f=this._modifiers.length;m<f;m++)p=this._modifiers[m](d,p);return p},o.prototype.attach=function(d){this._modifiers.push(d)},o.prototype.deattach=function(d){var p=this._modifiers.indexOf(d);return p===-1?!1:(this._modifiers.splice(p,1),!0)};function a(){this._formater=t,this._previous=void 0}a.prototype.replace=function(d){d?this._formater=d:this.restore()},a.prototype.restore=function(){this._formater=t,this._previous=void 0},a.prototype._backup=function(){this._previous=this._formater},a.prototype._roolback=function(){this._previous===t?this.replace(void 0):this.replace(this._previous),this._previous=void 0},Error.prepareStackTrace&&s.format.replace(Error.prepareStackTrace);var c=!1;function l(d,p){if(i)return p;if(c)return t(d,p);var m=p.concat();m=s.extend._modify(d,m),m=s.filter._modify(d,m),m=m.slice(0,Error.stackTraceLimit),Object.isExtensible(d)&&Object.getOwnPropertyDescriptor(d,"callSite")===void 0&&(d.callSite={original:p,mutated:m}),c=!0;var f=s.format._formater(d,m);return c=!1,f}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return l},set:function(d){d===l?s.format._roolback():(s.format._backup(),s.format.replace(d))}});function u(){return this.stack,this.callSite}Object.defineProperty(Error.prototype,"callSite",{get:u,set:function(d){Object.defineProperty(this,"callSite",{value:d,writable:!0,configurable:!0})},configurable:!0}),e.exports=s}),_2e=ae((r,e)=>{if(global._stackChain)if(global._stackChain.version===b2e().version)e.exports=global._stackChain;else throw new Error("Conflicting version of stack-chain found");else e.exports=global._stackChain=fHt()}),gHt=ae((r,e)=>{"use strict";var t=mHt();if(global._asyncHook)if(global._asyncHook.version===v2e().version)e.exports=global._asyncHook;else throw new Error("Conflicting version of async-hook-jl found");else _2e().filter.attach(function(n,i){return i.filter(function(s){let o=s.getFileName();return!(o&&o.slice(0,__dirname.length)===__dirname)})}),e.exports=global._asyncHook=new t}),yHt=ae((r,e)=>{"use strict";var t=require("util"),n=require("assert"),i=fle(),s=gHt(),o="cls@contexts",a="error@context",c=[];for(let w in s.providers)c[s.providers[w]]=w;var l=process.env.DEBUG_CLS_HOOKED,u=-1;e.exports={getNamespace:p,createNamespace:m,destroyNamespace:f,reset:y,ERROR_SYMBOL:a};function d(w){this.name=w,this.active=null,this._set=[],this.id=null,this._contexts=new Map}d.prototype.set=function(w,R){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return l&&v("    SETTING KEY:"+w+"="+R+" in ns:"+this.name+" uid:"+u+" active:"+t.inspect(this.active,!0)),this.active[w]=R,R},d.prototype.get=function(w){if(!this.active){l&&v("    GETTING KEY:"+w+"=undefined "+this.name+" uid:"+u+" active:"+t.inspect(this.active,!0));return}return l&&v("    GETTING KEY:"+w+"="+this.active[w]+" "+this.name+" uid:"+u+" active:"+t.inspect(this.active,!0)),this.active[w]},d.prototype.createContext=function(){l&&v("   CREATING Context: "+this.name+" uid:"+u+" len:"+this._set.length+"  active:"+t.inspect(this.active,!0,2,!0));let w=Object.create(this.active?this.active:Object.prototype);return w._ns_name=this.name,w.id=u,l&&v("   CREATED Context: "+this.name+" uid:"+u+" len:"+this._set.length+"  context:"+t.inspect(w,!0,2,!0)),w},d.prototype.run=function(w){let R=this.createContext();this.enter(R);try{return l&&v(" BEFORE RUN: "+this.name+" uid:"+u+" len:"+this._set.length+" "+t.inspect(R)),w(R),R}catch(I){throw I&&(I[a]=R),I}finally{l&&v(" AFTER RUN: "+this.name+" uid:"+u+" len:"+this._set.length+" "+t.inspect(R)),this.exit(R)}},d.prototype.runAndReturn=function(w){var R;return this.run(function(I){R=w(I)}),R},d.prototype.runPromise=function(w){let R=this.createContext();this.enter(R);let I=w(R);if(!I||!I.then||!I.catch)throw new Error("fn must return a promise.");return l&&v(" BEFORE runPromise: "+this.name+" uid:"+u+" len:"+this._set.length+" "+t.inspect(R)),I.then(z=>(l&&v(" AFTER runPromise: "+this.name+" uid:"+u+" len:"+this._set.length+" "+t.inspect(R)),this.exit(R),z)).catch(z=>{throw z[a]=R,l&&v(" AFTER runPromise: "+this.name+" uid:"+u+" len:"+this._set.length+" "+t.inspect(R)),this.exit(R),z})},d.prototype.bind=function(w,R){R||(this.active?R=this.active:R=this.createContext());let I=this;return function(){I.enter(R);try{return w.apply(this,arguments)}catch(z){throw z&&(z[a]=R),z}finally{I.exit(R)}}},d.prototype.enter=function(w){n.ok(w,"context must be provided for entering"),l&&v("  ENTER "+this.name+" uid:"+u+" len:"+this._set.length+" context: "+t.inspect(w)),this._set.push(this.active),this.active=w},d.prototype.exit=function(w){if(n.ok(w,"context must be provided for exiting"),l&&v("  EXIT "+this.name+" uid:"+u+" len:"+this._set.length+" context: "+t.inspect(w)),this.active===w){n.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let R=this._set.lastIndexOf(w);R<0?(l&&v("??ERROR?? context exiting but not entered - ignoring: "+t.inspect(w)),n.ok(R>=0,`context not currently entered; can't exit. 
`+t.inspect(this)+`
`+t.inspect(w))):(n.ok(R,"can't remove top context"),this._set.splice(R,1))},d.prototype.bindEmitter=function(w){n.ok(w.on&&w.addListener&&w.emit,"can only bind real EEs");let R=this,I="context@"+this.name;function z(L){!L||(L[o]||(L[o]=Object.create(null)),L[o][I]={namespace:R,context:R.active})}function G(L){if(!(L&&L[o]))return L;let H=L,ee=L[o];return Object.keys(ee).forEach(function(ye){let $e=ee[ye];H=$e.namespace.bind(H,$e.context)}),H}i(w,z,G)},d.prototype.fromException=function(w){return w[a]};function p(w){return process.namespaces[w]}function m(w){n.ok(w,"namespace must be given a name."),l&&v("CREATING NAMESPACE "+w);let R=new d(w);return R.id=u,s.addHooks({init(I,z,G,L,H){u=I,L?(R._contexts.set(I,R._contexts.get(L)),l&&v("PARENTID: "+w+" uid:"+I+" parent:"+L+" provider:"+G)):R._contexts.set(u,R.active),l&&v("INIT "+w+" uid:"+I+" parent:"+L+" provider:"+c[G]+" active:"+t.inspect(R.active,!0))},pre(I,z){u=I;let G=R._contexts.get(I);G?(l&&v(" PRE "+w+" uid:"+I+" handle:"+_(z)+" context:"+t.inspect(G)),R.enter(G)):l&&v(" PRE MISSING CONTEXT "+w+" uid:"+I+" handle:"+_(z))},post(I,z){u=I;let G=R._contexts.get(I);G?(l&&v(" POST "+w+" uid:"+I+" handle:"+_(z)+" context:"+t.inspect(G)),R.exit(G)):l&&v(" POST MISSING CONTEXT "+w+" uid:"+I+" handle:"+_(z))},destroy(I){u=I,l&&v("DESTROY "+w+" uid:"+I+" context:"+t.inspect(R._contexts.get(u))+" active:"+t.inspect(R.active,!0)),R._contexts.delete(I)}}),process.namespaces[w]=R,R}function f(w){let R=p(w);n.ok(R,`can't delete nonexistent namespace! "`+w+'"'),n.ok(R.id,"don't assign to process.namespaces directly! "+t.inspect(R)),process.namespaces[w]=null}function y(){process.namespaces&&Object.keys(process.namespaces).forEach(function(w){f(w)}),process.namespaces=Object.create(null)}process.namespaces={},s._state&&!s._state.enabled&&s.enable();function v(w){process.env.DEBUG&&process._rawDebug(w)}function _(w){if(!w)return w;if(typeof w=="function")return w.name?w.name:(w.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1];if(w.constructor&&w.constructor.name)return w.constructor.name}if(l){C=_2e();for(P in C.filter._modifiers)C.filter.deattach(P)}var C,P}),vHt=ae((r,e)=>{"use strict";var t=cHt();process&&t.gte(process.versions.node,"8.0.0")?e.exports=lHt():e.exports=yHt()}),bHt=ae((r,e)=>{r=e.exports=le;var t;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?t=function(){var E=Array.prototype.slice.call(arguments,0);E.unshift("SEMVER"),console.log.apply(console,E)}:t=function(){},r.SEMVER_SPEC_VERSION="2.0.0";var n=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,s=16,o=r.re=[],a=r.src=[],c=0,l=c++;a[l]="0|[1-9]\\d*";var u=c++;a[u]="[0-9]+";var d=c++;a[d]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var p=c++;a[p]="("+a[l]+")\\.("+a[l]+")\\.("+a[l]+")";var m=c++;a[m]="("+a[u]+")\\.("+a[u]+")\\.("+a[u]+")";var f=c++;a[f]="(?:"+a[l]+"|"+a[d]+")";var y=c++;a[y]="(?:"+a[u]+"|"+a[d]+")";var v=c++;a[v]="(?:-("+a[f]+"(?:\\."+a[f]+")*))";var _=c++;a[_]="(?:-?("+a[y]+"(?:\\."+a[y]+")*))";var C=c++;a[C]="[0-9A-Za-z-]+";var P=c++;a[P]="(?:\\+("+a[C]+"(?:\\."+a[C]+")*))";var w=c++,R="v?"+a[p]+a[v]+"?"+a[P]+"?";a[w]="^"+R+"$";var I="[v=\\s]*"+a[m]+a[_]+"?"+a[P]+"?",z=c++;a[z]="^"+I+"$";var G=c++;a[G]="((?:<|>)?=?)";var L=c++;a[L]=a[u]+"|x|X|\\*";var H=c++;a[H]=a[l]+"|x|X|\\*";var ee=c++;a[ee]="[v=\\s]*("+a[H]+")(?:\\.("+a[H]+")(?:\\.("+a[H]+")(?:"+a[v]+")?"+a[P]+"?)?)?";var ye=c++;a[ye]="[v=\\s]*("+a[L]+")(?:\\.("+a[L]+")(?:\\.("+a[L]+")(?:"+a[_]+")?"+a[P]+"?)?)?";var $e=c++;a[$e]="^"+a[G]+"\\s*"+a[ee]+"$";var Be=c++;a[Be]="^"+a[G]+"\\s*"+a[ye]+"$";var Ct=c++;a[Ct]="(?:^|[^\\d])(\\d{1,"+s+"})(?:\\.(\\d{1,"+s+"}))?(?:\\.(\\d{1,"+s+"}))?(?:$|[^\\d])";var Ge=c++;a[Ge]="(?:~>?)";var pe=c++;a[pe]="(\\s*)"+a[Ge]+"\\s+",o[pe]=new RegExp(a[pe],"g");var Ie="$1~",Ve=c++;a[Ve]="^"+a[Ge]+a[ee]+"$";var lt=c++;a[lt]="^"+a[Ge]+a[ye]+"$";var ut=c++;a[ut]="(?:\\^)";var ce=c++;a[ce]="(\\s*)"+a[ut]+"\\s+",o[ce]=new RegExp(a[ce],"g");var ue="$1^",Ue=c++;a[Ue]="^"+a[ut]+a[ee]+"$";var ct=c++;a[ct]="^"+a[ut]+a[ye]+"$";var jt=c++;a[jt]="^"+a[G]+"\\s*("+I+")$|^$";var tr=c++;a[tr]="^"+a[G]+"\\s*("+R+")$|^$";var se=c++;a[se]="(\\s*)"+a[G]+"\\s*("+I+"|"+a[ee]+")",o[se]=new RegExp(a[se],"g");var we="$1$2$3",Ne=c++;a[Ne]="^\\s*("+a[ee]+")\\s+-\\s+("+a[ee]+")\\s*$";var Re=c++;a[Re]="^\\s*("+a[ye]+")\\s+-\\s+("+a[ye]+")\\s*$";var Le=c++;for(a[Le]="(<|>)?=?\\s*\\*",ht=0;ht<c;ht++)t(ht,a[ht]),o[ht]||(o[ht]=new RegExp(a[ht]));var ht;r.parse=Ee;function Ee(E,x){if((!x||typeof x!="object")&&(x={loose:!!x,includePrerelease:!1}),E instanceof le)return E;if(typeof E!="string"||E.length>n)return null;var j=x.loose?o[z]:o[w];if(!j.test(E))return null;try{return new le(E,x)}catch{return null}}r.valid=ie;function ie(E,x){var j=Ee(E,x);return j?j.version:null}r.clean=je;function je(E,x){var j=Ee(E.trim().replace(/^[=v]+/,""),x);return j?j.version:null}r.SemVer=le;function le(E,x){if((!x||typeof x!="object")&&(x={loose:!!x,includePrerelease:!1}),E instanceof le){if(E.loose===x.loose)return E;E=E.version}else if(typeof E!="string")throw new TypeError("Invalid Version: "+E);if(E.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof le))return new le(E,x);t("SemVer",E,x),this.options=x,this.loose=!!x.loose;var j=E.trim().match(x.loose?o[z]:o[w]);if(!j)throw new TypeError("Invalid Version: "+E);if(this.raw=E,this.major=+j[1],this.minor=+j[2],this.patch=+j[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");j[4]?this.prerelease=j[4].split(".").map(function(ne){if(/^[0-9]+$/.test(ne)){var re=+ne;if(re>=0&&re<i)return re}return ne}):this.prerelease=[],this.build=j[5]?j[5].split("."):[],this.format()}le.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},le.prototype.toString=function(){return this.version},le.prototype.compare=function(E){return t("SemVer.compare",this.version,this.options,E),E instanceof le||(E=new le(E,this.options)),this.compareMain(E)||this.comparePre(E)},le.prototype.compareMain=function(E){return E instanceof le||(E=new le(E,this.options)),ke(this.major,E.major)||ke(this.minor,E.minor)||ke(this.patch,E.patch)},le.prototype.comparePre=function(E){if(E instanceof le||(E=new le(E,this.options)),this.prerelease.length&&!E.prerelease.length)return-1;if(!this.prerelease.length&&E.prerelease.length)return 1;if(!this.prerelease.length&&!E.prerelease.length)return 0;var x=0;do{var j=this.prerelease[x],ne=E.prerelease[x];if(t("prerelease compare",x,j,ne),j===void 0&&ne===void 0)return 0;if(ne===void 0)return 1;if(j===void 0)return-1;if(j!==ne)return ke(j,ne)}while(++x)},le.prototype.inc=function(E,x){switch(E){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",x);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",x);break;case"prepatch":this.prerelease.length=0,this.inc("patch",x),this.inc("pre",x);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",x),this.inc("pre",x);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var j=this.prerelease.length;--j>=0;)typeof this.prerelease[j]=="number"&&(this.prerelease[j]++,j=-2);j===-1&&this.prerelease.push(0)}x&&(this.prerelease[0]===x?isNaN(this.prerelease[1])&&(this.prerelease=[x,0]):this.prerelease=[x,0]);break;default:throw new Error("invalid increment argument: "+E)}return this.format(),this.raw=this.version,this},r.inc=_e;function _e(E,x,j,ne){typeof j=="string"&&(ne=j,j=void 0);try{return new le(E,j).inc(x,ne).version}catch{return null}}r.diff=B;function B(E,x){if(Ut(E,x))return null;var j=Ee(E),ne=Ee(x),re="";if(j.prerelease.length||ne.prerelease.length){re="pre";var he="prerelease"}for(var Se in j)if((Se==="major"||Se==="minor"||Se==="patch")&&j[Se]!==ne[Se])return re+Se;return he}r.compareIdentifiers=ke;var be=/^[0-9]+$/;function ke(E,x){var j=be.test(E),ne=be.test(x);return j&&ne&&(E=+E,x=+x),E===x?0:j&&!ne?-1:ne&&!j?1:E<x?-1:1}r.rcompareIdentifiers=W;function W(E,x){return ke(x,E)}r.major=Oe;function Oe(E,x){return new le(E,x).major}r.minor=Ht;function Ht(E,x){return new le(E,x).minor}r.patch=_r;function _r(E,x){return new le(E,x).patch}r.compare=fr;function fr(E,x,j){return new le(E,j).compare(new le(x,j))}r.compareLoose=He;function He(E,x){return fr(E,x,!0)}r.rcompare=Xe;function Xe(E,x,j){return fr(x,E,j)}r.sort=J;function J(E,x){return E.sort(function(j,ne){return r.compare(j,ne,x)})}r.rsort=fe;function fe(E,x){return E.sort(function(j,ne){return r.rcompare(j,ne,x)})}r.gt=Ke;function Ke(E,x,j){return fr(E,x,j)>0}r.lt=nt;function nt(E,x,j){return fr(E,x,j)<0}r.eq=Ut;function Ut(E,x,j){return fr(E,x,j)===0}r.neq=er;function er(E,x,j){return fr(E,x,j)!==0}r.gte=Cr;function Cr(E,x,j){return fr(E,x,j)>=0}r.lte=gr;function gr(E,x,j){return fr(E,x,j)<=0}r.cmp=dt;function dt(E,x,j,ne){switch(x){case"===":return typeof E=="object"&&(E=E.version),typeof j=="object"&&(j=j.version),E===j;case"!==":return typeof E=="object"&&(E=E.version),typeof j=="object"&&(j=j.version),E!==j;case"":case"=":case"==":return Ut(E,j,ne);case"!=":return er(E,j,ne);case">":return Ke(E,j,ne);case">=":return Cr(E,j,ne);case"<":return nt(E,j,ne);case"<=":return gr(E,j,ne);default:throw new TypeError("Invalid operator: "+x)}}r.Comparator=It;function It(E,x){if((!x||typeof x!="object")&&(x={loose:!!x,includePrerelease:!1}),E instanceof It){if(E.loose===!!x.loose)return E;E=E.value}if(!(this instanceof It))return new It(E,x);t("comparator",E,x),this.options=x,this.loose=!!x.loose,this.parse(E),this.semver===Je?this.value="":this.value=this.operator+this.semver.version,t("comp",this)}var Je={};It.prototype.parse=function(E){var x=this.options.loose?o[jt]:o[tr],j=E.match(x);if(!j)throw new TypeError("Invalid comparator: "+E);this.operator=j[1],this.operator==="="&&(this.operator=""),j[2]?this.semver=new le(j[2],this.options.loose):this.semver=Je},It.prototype.toString=function(){return this.value},It.prototype.test=function(E){return t("Comparator.test",E,this.options.loose),this.semver===Je?!0:(typeof E=="string"&&(E=new le(E,this.options)),dt(E,this.operator,this.semver,this.options))},It.prototype.intersects=function(E,x){if(!(E instanceof It))throw new TypeError("a Comparator is required");(!x||typeof x!="object")&&(x={loose:!!x,includePrerelease:!1});var j;if(this.operator==="")return j=new Ye(E.value,x),Pr(this.value,j,x);if(E.operator==="")return j=new Ye(this.value,x),Pr(E.semver,j,x);var ne=(this.operator===">="||this.operator===">")&&(E.operator===">="||E.operator===">"),re=(this.operator==="<="||this.operator==="<")&&(E.operator==="<="||E.operator==="<"),he=this.semver.version===E.semver.version,Se=(this.operator===">="||this.operator==="<=")&&(E.operator===">="||E.operator==="<="),ot=dt(this.semver,"<",E.semver,x)&&(this.operator===">="||this.operator===">")&&(E.operator==="<="||E.operator==="<"),it=dt(this.semver,">",E.semver,x)&&(this.operator==="<="||this.operator==="<")&&(E.operator===">="||E.operator===">");return ne||re||he&&Se||ot||it},r.Range=Ye;function Ye(E,x){if((!x||typeof x!="object")&&(x={loose:!!x,includePrerelease:!1}),E instanceof Ye)return E.loose===!!x.loose&&E.includePrerelease===!!x.includePrerelease?E:new Ye(E.raw,x);if(E instanceof It)return new Ye(E.value,x);if(!(this instanceof Ye))return new Ye(E,x);if(this.options=x,this.loose=!!x.loose,this.includePrerelease=!!x.includePrerelease,this.raw=E,this.set=E.split(/\s*\|\|\s*/).map(function(j){return this.parseRange(j.trim())},this).filter(function(j){return j.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+E);this.format()}Ye.prototype.format=function(){return this.range=this.set.map(function(E){return E.join(" ").trim()}).join("||").trim(),this.range},Ye.prototype.toString=function(){return this.range},Ye.prototype.parseRange=function(E){var x=this.options.loose;E=E.trim();var j=x?o[Re]:o[Ne];E=E.replace(j,$t),t("hyphen replace",E),E=E.replace(o[se],we),t("comparator trim",E,o[se]),E=E.replace(o[pe],Ie),E=E.replace(o[ce],ue),E=E.split(/\s+/).join(" ");var ne=x?o[jt]:o[tr],re=E.split(" ").map(function(he){return Kr(he,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(re=re.filter(function(he){return!!he.match(ne)})),re=re.map(function(he){return new It(he,this.options)},this),re},Ye.prototype.intersects=function(E,x){if(!(E instanceof Ye))throw new TypeError("a Range is required");return this.set.some(function(j){return j.every(function(ne){return E.set.some(function(re){return re.every(function(he){return ne.intersects(he,x)})})})})},r.toComparators=pr;function pr(E,x){return new Ye(E,x).set.map(function(j){return j.map(function(ne){return ne.value}).join(" ").trim().split(" ")})}function Kr(E,x){return t("comp",E,x),E=Do(E,x),t("caret",E),E=pi(E,x),t("tildes",E),E=za(E,x),t("xrange",E),E=or(E,x),t("stars",E),E}function Bt(E){return!E||E.toLowerCase()==="x"||E==="*"}function pi(E,x){return E.trim().split(/\s+/).map(function(j){return Yi(j,x)}).join(" ")}function Yi(E,x){var j=x.loose?o[lt]:o[Ve];return E.replace(j,function(ne,re,he,Se,ot){t("tilde",E,ne,re,he,Se,ot);var it;return Bt(re)?it="":Bt(he)?it=">="+re+".0.0 <"+(+re+1)+".0.0":Bt(Se)?it=">="+re+"."+he+".0 <"+re+"."+(+he+1)+".0":ot?(t("replaceTilde pr",ot),it=">="+re+"."+he+"."+Se+"-"+ot+" <"+re+"."+(+he+1)+".0"):it=">="+re+"."+he+"."+Se+" <"+re+"."+(+he+1)+".0",t("tilde return",it),it})}function Do(E,x){return E.trim().split(/\s+/).map(function(j){return aa(j,x)}).join(" ")}function aa(E,x){t("caret",E,x);var j=x.loose?o[ct]:o[Ue];return E.replace(j,function(ne,re,he,Se,ot){t("caret",E,ne,re,he,Se,ot);var it;return Bt(re)?it="":Bt(he)?it=">="+re+".0.0 <"+(+re+1)+".0.0":Bt(Se)?re==="0"?it=">="+re+"."+he+".0 <"+re+"."+(+he+1)+".0":it=">="+re+"."+he+".0 <"+(+re+1)+".0.0":ot?(t("replaceCaret pr",ot),re==="0"?he==="0"?it=">="+re+"."+he+"."+Se+"-"+ot+" <"+re+"."+he+"."+(+Se+1):it=">="+re+"."+he+"."+Se+"-"+ot+" <"+re+"."+(+he+1)+".0":it=">="+re+"."+he+"."+Se+"-"+ot+" <"+(+re+1)+".0.0"):(t("no pr"),re==="0"?he==="0"?it=">="+re+"."+he+"."+Se+" <"+re+"."+he+"."+(+Se+1):it=">="+re+"."+he+"."+Se+" <"+re+"."+(+he+1)+".0":it=">="+re+"."+he+"."+Se+" <"+(+re+1)+".0.0"),t("caret return",it),it})}function za(E,x){return t("replaceXRanges",E,x),E.split(/\s+/).map(function(j){return mr(j,x)}).join(" ")}function mr(E,x){E=E.trim();var j=x.loose?o[Be]:o[$e];return E.replace(j,function(ne,re,he,Se,ot,it){t("xRange",E,ne,re,he,Se,ot,it);var zr=Bt(he),Vr=zr||Bt(Se),sr=Vr||Bt(ot),qr=sr;return re==="="&&qr&&(re=""),zr?re===">"||re==="<"?ne="<0.0.0":ne="*":re&&qr?(Vr&&(Se=0),ot=0,re===">"?(re=">=",Vr?(he=+he+1,Se=0,ot=0):(Se=+Se+1,ot=0)):re==="<="&&(re="<",Vr?he=+he+1:Se=+Se+1),ne=re+he+"."+Se+"."+ot):Vr?ne=">="+he+".0.0 <"+(+he+1)+".0.0":sr&&(ne=">="+he+"."+Se+".0 <"+he+"."+(+Se+1)+".0"),t("xRange return",ne),ne})}function or(E,x){return t("replaceStars",E,x),E.trim().replace(o[Le],"")}function $t(E,x,j,ne,re,he,Se,ot,it,zr,Vr,sr,qr){return Bt(j)?x="":Bt(ne)?x=">="+j+".0.0":Bt(re)?x=">="+j+"."+ne+".0":x=">="+x,Bt(it)?ot="":Bt(zr)?ot="<"+(+it+1)+".0.0":Bt(Vr)?ot="<"+it+"."+(+zr+1)+".0":sr?ot="<="+it+"."+zr+"."+Vr+"-"+sr:ot="<="+ot,(x+" "+ot).trim()}Ye.prototype.test=function(E){if(!E)return!1;typeof E=="string"&&(E=new le(E,this.options));for(var x=0;x<this.set.length;x++)if(yt(this.set[x],E,this.options))return!0;return!1};function yt(E,x,j){for(var ne=0;ne<E.length;ne++)if(!E[ne].test(x))return!1;if(x.prerelease.length&&!j.includePrerelease){for(ne=0;ne<E.length;ne++)if(t(E[ne].semver),E[ne].semver!==Je&&E[ne].semver.prerelease.length>0){var re=E[ne].semver;if(re.major===x.major&&re.minor===x.minor&&re.patch===x.patch)return!0}return!1}return!0}r.satisfies=Pr;function Pr(E,x,j){try{x=new Ye(x,j)}catch{return!1}return x.test(E)}r.maxSatisfying=Ir;function Ir(E,x,j){var ne=null,re=null;try{var he=new Ye(x,j)}catch{return null}return E.forEach(function(Se){he.test(Se)&&(!ne||re.compare(Se)===-1)&&(ne=Se,re=new le(ne,j))}),ne}r.minSatisfying=Yt;function Yt(E,x,j){var ne=null,re=null;try{var he=new Ye(x,j)}catch{return null}return E.forEach(function(Se){he.test(Se)&&(!ne||re.compare(Se)===1)&&(ne=Se,re=new le(ne,j))}),ne}r.minVersion=$r;function $r(E,x){E=new Ye(E,x);var j=new le("0.0.0");if(E.test(j)||(j=new le("0.0.0-0"),E.test(j)))return j;j=null;for(var ne=0;ne<E.set.length;++ne){var re=E.set[ne];re.forEach(function(he){var Se=new le(he.semver.version);switch(he.operator){case">":Se.prerelease.length===0?Se.patch++:Se.prerelease.push(0),Se.raw=Se.format();case"":case">=":(!j||Ke(j,Se))&&(j=Se);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+he.operator)}})}return j&&E.test(j)?j:null}r.validRange=tn;function tn(E,x){try{return new Ye(E,x).range||"*"}catch{return null}}r.ltr=ei;function ei(E,x,j){return mi(E,x,"<",j)}r.gtr=Xi;function Xi(E,x,j){return mi(E,x,">",j)}r.outside=mi;function mi(E,x,j,ne){E=new le(E,ne),x=new Ye(x,ne);var re,he,Se,ot,it;switch(j){case">":re=Ke,he=gr,Se=nt,ot=">",it=">=";break;case"<":re=nt,he=Cr,Se=Ke,ot="<",it="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Pr(E,x,ne))return!1;for(var zr=0;zr<x.set.length;++zr){var Vr=x.set[zr],sr=null,qr=null;if(Vr.forEach(function(Or){Or.semver===Je&&(Or=new It(">=0.0.0")),sr=sr||Or,qr=qr||Or,re(Or.semver,sr.semver,ne)?sr=Or:Se(Or.semver,qr.semver,ne)&&(qr=Or)}),sr.operator===ot||sr.operator===it||(!qr.operator||qr.operator===ot)&&he(E,qr.semver)||qr.operator===it&&Se(E,qr.semver))return!1}return!0}r.prerelease=ni;function ni(E,x){var j=Ee(E,x);return j&&j.prerelease.length?j.prerelease:null}r.intersects=Lr;function Lr(E,x,j){return E=new Ye(E,j),x=new Ye(x,j),E.intersects(x)}r.coerce=On;function On(E){if(E instanceof le)return E;if(typeof E!="string")return null;var x=E.match(o[Ct]);return x==null?null:Ee(x[1]+"."+(x[2]||"0")+"."+(x[3]||"0"))}}),_Ht=ae((r,e)=>{var t=hle().wrap,n=1,i=2,s=4,o=8,a=[],c=0,l=!1,u=[],d,p;function m(z,G){var L=z.length,H=G.length,ee=[];if(L===0&&H===0)return ee;for(var ye=0;ye<L;ye++)ee[ye]=z[ye];if(H===0)return ee;for(var $e=0;$e<H;$e++){var Be=!0;for(ye=0;ye<L;ye++)if(z[ye].uid===G[$e].uid){Be=!1;break}Be&&ee.push(G[$e])}return ee}process._fatalException?(f=!1,d=function(z){var G=a.length;if(f||G===0)return!1;var L=!1;f=!0;for(var H=0;H<G;++H){var ee=a[H];if((ee.flags&o)!==0){var ye=y&&y[ee.uid];L=ee.error(ye,z)||L}}return f=!1,u.length>0&&(a=u.pop()),y=void 0,L&&!l},p=function(z,G,L){var H=[];l=!0;for(var ee=0;ee<L;++ee){var ye=G[ee];if(H[ye.uid]=ye.data,(ye.flags&n)!==0){var $e=ye.create(ye.data);$e!==void 0&&(H[ye.uid]=$e)}}return l=!1,function(){y=H,u.push(a),a=m(G,a),l=!0;for(var Be=0;Be<L;++Be)(G[Be].flags&i)>0&&G[Be].before(this,H[G[Be].uid]);l=!1;var Ct=z.apply(this,arguments);for(l=!0,Be=0;Be<L;++Be)(G[Be].flags&s)>0&&G[Be].after(this,H[G[Be].uid]);return l=!1,a=u.pop(),y=void 0,Ct}},t(process,"_fatalException",function(z){return function(G){return d(G)||z(G)}})):(v=!1,d=function(z){if(v)throw z;for(var G=!1,L=a.length,H=0;H<L;++H){var ee=a[H];(ee.flags&o)!==0&&(G=ee.error(null,z)||G)}if(!G&&l)throw z},p=function(z,G,L){var H=[];l=!0;for(var ee=0;ee<L;++ee){var ye=G[ee];if(H[ye.uid]=ye.data,(ye.flags&n)!==0){var $e=ye.create(ye.data);$e!==void 0&&(H[ye.uid]=$e)}}return l=!1,function(){var Be=!1,Ct=!1;u.push(a),a=m(G,a),l=!0;for(var Ge=0;Ge<L;++Ge)(G[Ge].flags&i)>0&&G[Ge].before(this,H[G[Ge].uid]);l=!1;var pe;try{pe=z.apply(this,arguments)}catch(Ie){Be=!0;for(var Ge=0;Ge<L;++Ge)if((a[Ge].flags&o)!=0)try{Ct=a[Ge].error(H[G[Ge].uid],Ie)||Ct}catch(lt){throw v=!0,lt}if(!Ct)throw process.removeListener("uncaughtException",d),process._originalNextTick(function(){process.addListener("uncaughtException",d)}),Ie}finally{if(!Be||Ct){for(l=!0,Ge=0;Ge<L;++Ge)(G[Ge].flags&s)>0&&G[Ge].after(this,H[G[Ge].uid]);l=!1}a=u.pop()}return pe}},process.addListener("uncaughtException",d));var f,y,v;function _(z,G,L){l=!0;for(var H=0;H<L;++H){var ee=G[H];ee.create&&ee.create(ee.data)}return l=!1,function(){u.push(a),a=m(G,a);var ye=z.apply(this,arguments);return a=u.pop(),ye}}function C(z){var G=a.length;if(G===0)return z;for(var L=a.slice(),H=0;H<G;++H)if(L[H].flags>0)return p(z,L,G);return _(z,L,G)}function P(z,G){typeof z.create=="function"&&(this.create=z.create,this.flags|=n),typeof z.before=="function"&&(this.before=z.before,this.flags|=i),typeof z.after=="function"&&(this.after=z.after,this.flags|=s),typeof z.error=="function"&&(this.error=z.error,this.flags|=o),this.uid=++c,this.data=G===void 0?null:G}P.prototype.create=void 0,P.prototype.before=void 0,P.prototype.after=void 0,P.prototype.error=void 0,P.prototype.data=void 0,P.prototype.uid=0,P.prototype.flags=0;function w(z,G){if(typeof z!="object"||!z)throw new TypeError("callbacks argument must be an object");return z instanceof P?z:new P(z,G)}function R(z,G){var L;z instanceof P?L=z:L=w(z,G);for(var H=!1,ee=0;ee<a.length;ee++)if(L===a[ee]){H=!0;break}return H||a.push(L),L}function I(z){for(var G=0;G<a.length;G++)if(z===a[G]){a.splice(G,1);break}}process.createAsyncListener=w,process.addAsyncListener=R,process.removeAsyncListener=I,e.exports=C}),SHt=ae((r,e)=>{"use strict";e.exports=(t,n)=>class extends t{constructor(i){var s,o;super(c);var a=this;try{i.apply(s,o)}catch(l){o[1](l)}return a;function c(l,u){s=this,o=[d,p];function d(m){return n(a,!1),l(m)}function p(m){return n(a,!1),u(m)}}}}}),CHt=ae(()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var r=hle(),e=bHt(),t=r.wrap,n=r.massWrap,i=_Ht(),s=require("util"),o=e.gte(process.version,"6.0.0"),a=e.gte(process.version,"7.0.0"),c=e.gte(process.version,"8.0.0"),l=e.gte(process.version,"11.0.0"),u=require("net");a&&!u._normalizeArgs?u._normalizeArgs=function(pe){if(pe.length===0)return[{},null];var Ie=pe[0],Ve={};typeof Ie=="object"&&Ie!==null?Ve=Ie:Ge(Ie)?Ve.path=Ie:(Ve.port=Ie,pe.length>1&&typeof pe[1]=="string"&&(Ve.host=pe[1]));var lt=pe[pe.length-1];return typeof lt!="function"?[Ve,null]:[Ve,lt]}:!a&&!u._normalizeConnectArgs&&(u._normalizeConnectArgs=function(pe){var Ie={};function Ve(ut){return(ut=Number(ut))>=0?ut:!1}typeof pe[0]=="object"&&pe[0]!==null?Ie=pe[0]:typeof pe[0]=="string"&&Ve(pe[0])===!1?Ie.path=pe[0]:(Ie.port=pe[0],typeof pe[1]=="string"&&(Ie.host=pe[1]));var lt=pe[pe.length-1];return typeof lt=="function"?[Ie,lt]:[Ie]}),"_setUpListenHandle"in u.Server.prototype?t(u.Server.prototype,"_setUpListenHandle",d):t(u.Server.prototype,"_listen2",d);function d(pe){return function(){this.on("connection",function(Ie){Ie._handle&&(Ie._handle.onread=i(Ie._handle.onread))});try{return pe.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=i(this._handle.onconnection))}}}function p(pe){if(pe&&pe._handle){var Ie=pe._handle;Ie._originalOnread||(Ie._originalOnread=Ie.onread),Ie.onread=i(Ie._originalOnread)}}t(u.Socket.prototype,"connect",function(pe){return function(){var Ie;c&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?Ie=arguments[0]:Ie=a?u._normalizeArgs(arguments):u._normalizeConnectArgs(arguments),Ie[1]&&(Ie[1]=i(Ie[1]));var Ve=pe.apply(this,Ie);return p(this),Ve}});var m=require("http");t(m.Agent.prototype,"addRequest",function(pe){return function(Ie){var Ve=Ie.onSocket;return Ie.onSocket=i(function(lt){return p(lt),Ve.apply(this,arguments)}),pe.apply(this,arguments)}});var f=require("child_process");function y(pe){Array.isArray(pe.stdio)&&pe.stdio.forEach(function(Ie){Ie&&Ie._handle&&(Ie._handle.onread=i(Ie._handle.onread),t(Ie._handle,"close",Be))}),pe._handle&&(pe._handle.onexit=i(pe._handle.onexit))}f.ChildProcess?t(f.ChildProcess.prototype,"spawn",function(pe){return function(){var Ie=pe.apply(this,arguments);return y(this),Ie}}):n(f,["execFile","fork","spawn"],function(pe){return function(){var Ie=pe.apply(this,arguments);return y(Ie),Ie}}),process._fatalException||(process._originalNextTick=process.nextTick);var v=[];process._nextDomainTick&&v.push("_nextDomainTick"),process._tickDomainCallback&&v.push("_tickDomainCallback"),n(process,v,$e),t(process,"nextTick",Be);var _=["setTimeout","setInterval"];global.setImmediate&&_.push("setImmediate");var C=require("timers"),P=global.setTimeout===C.setTimeout;n(C,_,Be),P&&n(global,_,Be);var w=require("dns");n(w,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],$e),w.resolveNaptr&&t(w,"resolveNaptr",$e);var R=require("fs");n(R,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],$e),R.lchown&&t(R,"lchown",$e),R.lchmod&&t(R,"lchmod",$e),R.ftruncate&&t(R,"ftruncate",$e);var I;try{I=require("zlib")}catch{}I&&I.Deflate&&I.Deflate.prototype&&(z=Object.getPrototypeOf(I.Deflate.prototype),z._transform?t(z,"_transform",$e):z.write&&z.flush&&z.end&&n(z,["write","flush","end"],$e));var z,G;try{G=require("crypto")}catch{}G&&(L=["pbkdf2","randomBytes"],l||L.push("pseudoRandomBytes"),n(G,L,$e));var L,H=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";H&&(ee=process.addAsyncListener({create:function(){H=!1}}),global.Promise.resolve(!0).then(function(){H=!1}),process.removeAsyncListener(ee));var ee;H&&ye();function ye(){var pe=global.Promise;function Ie(ue){if(!(this instanceof Ie))return pe(ue);if(typeof ue!="function")return new pe(ue);var Ue,ct,jt=new pe(tr);jt.__proto__=Ie.prototype;try{ue.apply(Ue,ct)}catch(se){ct[1](se)}return jt;function tr(se,we){Ue=this,ct=[Ne,Re];function Ne(Le){return lt(jt,!1),se(Le)}function Re(Le){return lt(jt,!1),we(Le)}}}if(s.inherits(Ie,pe),t(pe.prototype,"then",ce),pe.prototype.chain&&t(pe.prototype,"chain",ce),o)global.Promise=SHt()(pe,lt);else{var Ve=["all","race","reject","resolve","accept","defer"];Ve.forEach(function(ue){typeof pe[ue]=="function"&&(Ie[ue]=pe[ue])}),global.Promise=Ie}function lt(ue,Ue){(!ue.__asl_wrapper||Ue)&&(ue.__asl_wrapper=i(ut))}function ut(ue,Ue,ct,jt){var tr;try{return tr=Ue.call(ue,ct),{returnVal:tr,error:!1}}catch(se){return{errorVal:se,error:!0}}finally{tr instanceof pe?jt.__asl_wrapper=function(){var se=tr.__asl_wrapper||ut;return se.apply(this,arguments)}:lt(jt,!0)}}function ce(ue){return function(){var Ue=this,ct=ue.apply(Ue,Array.prototype.map.call(arguments,jt));return ct.__asl_wrapper=function(tr,se,we,Ne){return Ue.__asl_wrapper?(Ue.__asl_wrapper(tr,function(){},null,ct),ct.__asl_wrapper(tr,se,we,Ne)):ut(tr,se,we,Ne)},ct;function jt(tr){return typeof tr!="function"?tr:i(function(se){var we=(Ue.__asl_wrapper||ut)(this,tr,se,ct);if(we.error)throw we.errorVal;return we.returnVal})}}}}function $e(pe){var Ie=function(){var Ve,lt=arguments.length-1;if(typeof arguments[lt]=="function"){Ve=Array(arguments.length);for(var ut=0;ut<arguments.length-1;ut++)Ve[ut]=arguments[ut];Ve[lt]=i(arguments[lt])}return pe.apply(this,Ve||arguments)};switch(pe.length){case 1:return function(Ve){return arguments.length!==1?Ie.apply(this,arguments):(typeof Ve=="function"&&(Ve=i(Ve)),pe.call(this,Ve))};case 2:return function(Ve,lt){return arguments.length!==2?Ie.apply(this,arguments):(typeof lt=="function"&&(lt=i(lt)),pe.call(this,Ve,lt))};case 3:return function(Ve,lt,ut){return arguments.length!==3?Ie.apply(this,arguments):(typeof ut=="function"&&(ut=i(ut)),pe.call(this,Ve,lt,ut))};case 4:return function(Ve,lt,ut,ce){return arguments.length!==4?Ie.apply(this,arguments):(typeof ce=="function"&&(ce=i(ce)),pe.call(this,Ve,lt,ut,ce))};case 5:return function(Ve,lt,ut,ce,ue){return arguments.length!==5?Ie.apply(this,arguments):(typeof ue=="function"&&(ue=i(ue)),pe.call(this,Ve,lt,ut,ce,ue))};case 6:return function(Ve,lt,ut,ce,ue,Ue){return arguments.length!==6?Ie.apply(this,arguments):(typeof Ue=="function"&&(Ue=i(Ue)),pe.call(this,Ve,lt,ut,ce,ue,Ue))};default:return Ie}}function Be(pe){var Ie=function(){var Ve;if(typeof arguments[0]=="function"){Ve=Array(arguments.length),Ve[0]=i(arguments[0]);for(var lt=1;lt<arguments.length;lt++)Ve[lt]=arguments[lt]}return pe.apply(this,Ve||arguments)};switch(pe.length){case 1:return function(Ve){return arguments.length!==1?Ie.apply(this,arguments):(typeof Ve=="function"&&(Ve=i(Ve)),pe.call(this,Ve))};case 2:return function(Ve,lt){return arguments.length!==2?Ie.apply(this,arguments):(typeof Ve=="function"&&(Ve=i(Ve)),pe.call(this,Ve,lt))};case 3:return function(Ve,lt,ut){return arguments.length!==3?Ie.apply(this,arguments):(typeof Ve=="function"&&(Ve=i(Ve)),pe.call(this,Ve,lt,ut))};case 4:return function(Ve,lt,ut,ce){return arguments.length!==4?Ie.apply(this,arguments):(typeof Ve=="function"&&(Ve=i(Ve)),pe.call(this,Ve,lt,ut,ce))};case 5:return function(Ve,lt,ut,ce,ue){return arguments.length!==5?Ie.apply(this,arguments):(typeof Ve=="function"&&(Ve=i(Ve)),pe.call(this,Ve,lt,ut,ce,ue))};case 6:return function(Ve,lt,ut,ce,ue,Ue){return arguments.length!==6?Ie.apply(this,arguments):(typeof Ve=="function"&&(Ve=i(Ve)),pe.call(this,Ve,lt,ut,ce,ue,Ue))};default:return Ie}}function Ct(pe){return(pe=Number(pe))>=0?pe:!1}function Ge(pe){return typeof pe=="string"&&Ct(pe)===!1}}),PHt=ae((r,e)=>{"use strict";var t=require("assert"),n=fle(),i="cls@contexts",s="error@context";process.addAsyncListener||CHt();function o(d){this.name=d,this.active=null,this._set=[],this.id=null}o.prototype.set=function(d,p){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[d]=p,p},o.prototype.get=function(d){if(this.active)return this.active[d]},o.prototype.createContext=function(){return Object.create(this.active)},o.prototype.run=function(d){var p=this.createContext();this.enter(p);try{return d(p),p}catch(m){throw m&&(m[s]=p),m}finally{this.exit(p)}},o.prototype.runAndReturn=function(d){var p;return this.run(function(m){p=d(m)}),p},o.prototype.bind=function(d,p){p||(this.active?p=this.active:p=this.createContext());var m=this;return function(){m.enter(p);try{return d.apply(this,arguments)}catch(f){throw f&&(f[s]=p),f}finally{m.exit(p)}}},o.prototype.enter=function(d){t.ok(d,"context must be provided for entering"),this._set.push(this.active),this.active=d},o.prototype.exit=function(d){if(t.ok(d,"context must be provided for exiting"),this.active===d){t.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}var p=this._set.lastIndexOf(d);t.ok(p>=0,"context not currently entered; can't exit"),t.ok(p,"can't remove top context"),this._set.splice(p,1)},o.prototype.bindEmitter=function(d){t.ok(d.on&&d.addListener&&d.emit,"can only bind real EEs");var p=this,m="context@"+this.name;function f(v){!v||(v[i]||(v[i]=Object.create(null)),v[i][m]={namespace:p,context:p.active})}function y(v){if(!(v&&v[i]))return v;var _=v,C=v[i];return Object.keys(C).forEach(function(P){var w=C[P];_=w.namespace.bind(_,w.context)}),_}n(d,f,y)},o.prototype.fromException=function(d){return d[s]};function a(d){return process.namespaces[d]}function c(d){t.ok(d,"namespace must be given a name!");var p=new o(d);return p.id=process.addAsyncListener({create:function(){return p.active},before:function(m,f){f&&p.enter(f)},after:function(m,f){f&&p.exit(f)},error:function(m){m&&p.exit(m)}}),process.namespaces[d]=p,p}function l(d){var p=a(d);t.ok(p,"can't delete nonexistent namespace!"),t.ok(p.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(p.id),process.namespaces[d]=null}function u(){process.namespaces&&Object.keys(process.namespaces).forEach(function(d){l(d)}),process.namespaces=Object.create(null)}process.namespaces||u(),e.exports={getNamespace:a,createNamespace:c,destroyNamespace:l,reset:u}}),F0=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CorrelationContextManager=void 0;var e=Oc(),t=mle(),n=hH(),i=d2e(),s=y2e(),o=function(){function c(){}return c.getCurrentContext=function(){if(!c.enabled)return null;var l=c.session.get(c.CONTEXT_NAME);return l===void 0?null:l},c.generateContextObject=function(l,u,d,p,m,f){return u=u||l,this.enabled?{operation:{name:d,id:l,parentId:u,traceparent:m,tracestate:f},customProperties:new a(p)}:null},c.spanToContextObject=function(l,u,d){var p=new n;return p.traceId=l.traceId,p.spanId=l.spanId,p.traceFlag=n.formatOpenTelemetryTraceFlags(l.traceFlags)||n.DEFAULT_TRACE_FLAG,p.parentId=u,c.generateContextObject(p.traceId,p.parentId,d,null,p)},c.runWithContext=function(l,u){var d;return c.enabled?c.session.bind(u,(d={},d[c.CONTEXT_NAME]=l,d))():u()},c.wrapEmitter=function(l){c.enabled&&c.session.bindEmitter(l)},c.wrapCallback=function(l,u){var d;return c.enabled?c.session.bind(l,u?(d={},d[c.CONTEXT_NAME]=u,d):void 0):l},c.enable=function(l){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}c.hasEverEnabled||(this.forceClsHooked=l,this.hasEverEnabled=!0,typeof this.cls>"u"&&(c.forceClsHooked===!0||c.forceClsHooked===void 0&&c.shouldUseClsHooked()?this.cls=vHt():this.cls=PHt()),c.session=this.cls.createNamespace("AI-CLS-Session"),t.registerContextPreservation(function(u){return c.session.bind(u)})),this.enabled=!0}},c.startOperation=function(l,u){var d=l&&l.traceContext||null,p=l&&l.traceId?l:null,m=l&&l.headers;if(p){var f=new n("00-"+p.traceId+"-"+p.spanId+"-01"),y=new i(p.traceState?p.traceState.serialize():null),v=c.generateContextObject(p.traceId,"|"+p.traceId+"."+p.spanId+".",typeof u=="string"?u:"",void 0,f,y);return v}if(d){var f=new n(d.traceparent),y=new i(d.tracestate),_=typeof u=="object"?new s(u):null,v=c.generateContextObject(f.traceId,f.parentId,typeof u=="string"?u:_.getOperationName({}),_&&_.getCorrelationContextHeader()||void 0,f,y);return v}if(m){var f=new n(m.traceparent?m.traceparent.toString():null),y=new i(m.tracestate?m.tracestate.toString():null),_=new s(l),v=c.generateContextObject(f.traceId,f.parentId,_.getOperationName({}),_.getCorrelationContextHeader(),f,y);return v}return e.warn("startOperation was called with invalid arguments",arguments),null},c.disable=function(){this.enabled=!1},c.reset=function(){c.hasEverEnabled&&(c.session=null,c.session=this.cls.createNamespace("AI-CLS-Session"))},c.isNodeVersionCompatible=function(){var l=process.versions.node.split(".");return parseInt(l[0])>3||parseInt(l[0])>2&&parseInt(l[1])>2},c.shouldUseClsHooked=function(){var l=process.versions.node.split(".");return parseInt(l[0])>8||parseInt(l[0])>=8&&parseInt(l[1])>=2},c.canUseClsHooked=function(){var l=process.versions.node.split("."),u=parseInt(l[0])>8||parseInt(l[0])>=8&&parseInt(l[1])>=0,d=parseInt(l[0])<8||parseInt(l[0])<=8&&parseInt(l[1])<2,p=parseInt(l[0])>4||parseInt(l[0])>=4&&parseInt(l[1])>=7;return!(u&&d)&&p},c.enabled=!1,c.hasEverEnabled=!1,c.forceClsHooked=void 0,c.CONTEXT_NAME="ApplicationInsights-Context",c}();r.CorrelationContextManager=o;var a=function(){function c(l){this.props=[],this.addHeaderData(l)}return c.prototype.addHeaderData=function(l){var u=l?l.split(", "):[];this.props=u.map(function(d){var p=d.split("=");return{key:p[0],value:p[1]}}).concat(this.props)},c.prototype.serializeToHeader=function(){return this.props.map(function(l){return l.key+"="+l.value}).join(", ")},c.prototype.getProperty=function(l){for(var u=0;u<this.props.length;++u){var d=this.props[u];if(d.key===l)return d.value}},c.prototype.setProperty=function(l,u){if(c.bannedCharacters.test(l)||c.bannedCharacters.test(u)){e.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+l+" and value: "+u);return}for(var d=0;d<this.props.length;++d){var p=this.props[d];if(p.key===l){p.value=u;return}}this.props.push({key:l,value:u})},c.bannedCharacters=/[,=]/,c}()}),wHt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.dispose=r.enable=void 0;var e=Su(),t=Sa(),n=[],i=function(a){var c=a.data.message;n.forEach(function(l){c instanceof Error?l.trackException({exception:c}):(c.lastIndexOf(`
`)==c.length-1&&(c=c.substring(0,c.length-1)),l.trackTrace({message:c,severity:a.data.stderr?e.SeverityLevel.Warning:e.SeverityLevel.Information}))})};function s(a,c){a?(n.length===0&&t.channel.subscribe("console",i),n.push(c)):(n=n.filter(function(l){return l!=c}),n.length===0&&t.channel.unsubscribe("console",i))}r.enable=s;function o(){t.channel.unsubscribe("console",i),n=[]}r.dispose=o}),EHt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.dispose=r.enable=void 0;var e=Su(),t=Sa(),n=[],i={10:e.SeverityLevel.Verbose,20:e.SeverityLevel.Verbose,30:e.SeverityLevel.Information,40:e.SeverityLevel.Warning,50:e.SeverityLevel.Error,60:e.SeverityLevel.Critical},s=function(c){var l=c.data.result;n.forEach(function(u){var d=i[c.data.level];l instanceof Error?u.trackException({exception:l}):u.trackTrace({message:l,severity:d})})};function o(c,l){c?(n.length===0&&t.channel.subscribe("bunyan",s),n.push(l)):(n=n.filter(function(u){return u!=l}),n.length===0&&t.channel.unsubscribe("bunyan",s))}r.enable=o;function a(){t.channel.unsubscribe("bunyan",s),n=[]}r.dispose=a}),THt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.dispose=r.enable=void 0;var e=Su(),t=Sa(),n=[],i={syslog:function(c){var l={emerg:e.SeverityLevel.Critical,alert:e.SeverityLevel.Critical,crit:e.SeverityLevel.Critical,error:e.SeverityLevel.Error,warning:e.SeverityLevel.Warning,notice:e.SeverityLevel.Information,info:e.SeverityLevel.Information,debug:e.SeverityLevel.Verbose};return l[c]===void 0?e.SeverityLevel.Information:l[c]},npm:function(c){var l={error:e.SeverityLevel.Error,warn:e.SeverityLevel.Warning,info:e.SeverityLevel.Information,verbose:e.SeverityLevel.Verbose,debug:e.SeverityLevel.Verbose,silly:e.SeverityLevel.Verbose};return l[c]===void 0?e.SeverityLevel.Information:l[c]},unknown:function(c){return e.SeverityLevel.Information}},s=function(c){var l=c.data.message;n.forEach(function(u){if(l instanceof Error)u.trackException({exception:l,properties:c.data.meta});else{var d=i[c.data.levelKind](c.data.level);u.trackTrace({message:l,severity:d,properties:c.data.meta})}})};function o(c,l){c?(n.length===0&&t.channel.subscribe("winston",s),n.push(l)):(n=n.filter(function(u){return u!=l}),n.length===0&&t.channel.unsubscribe("winston",s))}r.enable=o;function a(){t.channel.unsubscribe("winston",s),n=[]}r.dispose=a}),IHt=ae((r,e)=>{"use strict";var t=mle(),n=function(){function i(s){if(i.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=s,i.INSTANCE=this}return i.prototype.enable=function(s,o){t.IsInitialized&&(wHt().enable(s&&o,this._client),EHt().enable(s,this._client),THt().enable(s,this._client))},i.prototype.isInitialized=function(){return this._isInitialized},i.prototype.dispose=function(){i.INSTANCE=null,this.enable(!1,!1)},i._methodNames=["debug","info","log","warn","error"],i}();e.exports=n}),RHt=ae((r,e)=>{"use strict";var t=function(){function n(i){if(n.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");n.INSTANCE=this,this._client=i;var s=process.versions.node.split(".");n._canUseUncaughtExceptionMonitor=parseInt(s[0])>13||parseInt(s[0])===13&&parseInt(s[1])>=7}return n.prototype.isInitialized=function(){return this._isInitialized},n.prototype.enable=function(i){var s=this;if(i){this._isInitialized=!0;var o=this;if(!this._exceptionListenerHandle){var a=function(c,l,u){u===void 0&&(u=new Error(n._FALLBACK_ERROR_MESSAGE)),s._client.trackException({exception:u}),s._client.flush({isAppCrashing:!0}),c&&l&&process.listeners(l).length===1&&(console.error(u),process.exit(1))};n._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=a.bind(this,!1,void 0),process.on(n.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=a.bind(this,!0,n.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=a.bind(this,!1,void 0),process.on(n.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(n.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(n._canUseUncaughtExceptionMonitor?process.removeListener(n.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(n.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(n.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},n.prototype.dispose=function(){n.INSTANCE=null,this.enable(!1),this._isInitialized=!1},n.INSTANCE=null,n.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",n.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",n.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",n._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",n._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",n._canUseUncaughtExceptionMonitor=!1,n}();e.exports=t}),Pb=ae(r=>{"use strict";var e;Object.defineProperty(r,"__esModule",{value:!0}),r.HeartBeatMetricName=r.DependencyTypeName=r.SpanAttribute=r.TelemetryTypeStringToQuickPulseDocumentType=r.TelemetryTypeStringToQuickPulseType=r.QuickPulseType=r.QuickPulseDocumentType=r.PerformanceToQuickPulseCounter=r.MetricId=r.PerformanceCounter=r.QuickPulseCounter=r.DEFAULT_LIVEMETRICS_HOST=r.DEFAULT_LIVEMETRICS_ENDPOINT=r.DEFAULT_BREEZE_ENDPOINT=void 0,r.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com",r.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com",r.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var t;(function(s){s.COMMITTED_BYTES="\\Memory\\Committed Bytes",s.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",s.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",s.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",s.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",s.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",s.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",s.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",s.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"})(t=r.QuickPulseCounter||(r.QuickPulseCounter={}));var n;(function(s){s.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",s.AVAILABLE_BYTES="\\Memory\\Available Bytes",s.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",s.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",s.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",s.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"})(n=r.PerformanceCounter||(r.PerformanceCounter={}));var i;(function(s){s.REQUESTS_DURATION="requests/duration",s.DEPENDENCIES_DURATION="dependencies/duration",s.EXCEPTIONS_COUNT="exceptions/count",s.TRACES_COUNT="traces/count"})(i=r.MetricId||(r.MetricId={})),r.PerformanceToQuickPulseCounter=(e={},e[n.PROCESSOR_TIME]=t.PROCESSOR_TIME,e[n.REQUEST_RATE]=t.REQUEST_RATE,e[n.REQUEST_DURATION]=t.REQUEST_DURATION,e[t.COMMITTED_BYTES]=t.COMMITTED_BYTES,e[t.REQUEST_FAILURE_RATE]=t.REQUEST_FAILURE_RATE,e[t.DEPENDENCY_RATE]=t.DEPENDENCY_RATE,e[t.DEPENDENCY_FAILURE_RATE]=t.DEPENDENCY_FAILURE_RATE,e[t.DEPENDENCY_DURATION]=t.DEPENDENCY_DURATION,e[t.EXCEPTION_RATE]=t.EXCEPTION_RATE,e),r.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"},r.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"},r.TelemetryTypeStringToQuickPulseType={EventData:r.QuickPulseType.Event,ExceptionData:r.QuickPulseType.Exception,MessageData:r.QuickPulseType.Trace,MetricData:r.QuickPulseType.Metric,RequestData:r.QuickPulseType.Request,RemoteDependencyData:r.QuickPulseType.Dependency,AvailabilityData:r.QuickPulseType.Availability,PageViewData:r.QuickPulseType.PageView},r.TelemetryTypeStringToQuickPulseDocumentType={EventData:r.QuickPulseDocumentType.Event,ExceptionData:r.QuickPulseDocumentType.Exception,MessageData:r.QuickPulseDocumentType.Trace,MetricData:r.QuickPulseDocumentType.Metric,RequestData:r.QuickPulseDocumentType.Request,RemoteDependencyData:r.QuickPulseDocumentType.Dependency,AvailabilityData:r.QuickPulseDocumentType.Availability,PageViewData:r.QuickPulseDocumentType.PageView},r.SpanAttribute={HttpHost:"http.host",HttpMethod:"http.method",HttpPort:"http.port",HttpStatusCode:"http.status_code",HttpUrl:"http.url",HttpUserAgent:"http.user_agent",GrpcMethod:"grpc.method",GrpcService:"rpc.service"},r.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc"},r.HeartBeatMetricName="HeartBeat"}),gle=ae((r,e)=>{"use strict";var t=require("os"),n=Pb(),i=function(){function s(o,a,c){a===void 0&&(a=6e4),c===void 0&&(c=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,s.INSTANCE||(s.INSTANCE=this),this._isInitialized=!1,this._client=o,this._collectionInterval=a,this._enableLiveMetricsCounters=c}return s.prototype.enable=function(o,a){var c=this;this._isEnabled=o,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),o?this._handle||(this._lastCpus=t.cpus(),this._lastRequests={totalRequestCount:s._totalRequestCount,totalFailedRequestCount:s._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:s._totalDependencyCount,totalFailedDependencyCount:s._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:s._totalExceptionCount,time:+new Date},typeof process.cpuUsage=="function"&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=a||this._collectionInterval,this._handle=setInterval(function(){return c.trackPerformance()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},s.countRequest=function(o,a){var c;if(s.isEnabled()){if(typeof o=="string")c=+new Date("1970-01-01T"+o+"Z");else if(typeof o=="number")c=o;else return;s._intervalRequestExecutionTime+=c,a===!1&&s._totalFailedRequestCount++,s._totalRequestCount++}},s.countException=function(){s._totalExceptionCount++},s.countDependency=function(o,a){var c;if(s.isEnabled()){if(typeof o=="string")c=+new Date("1970-01-01T"+o+"Z");else if(typeof o=="number")c=o;else return;s._intervalDependencyExecutionTime+=c,a===!1&&s._totalFailedDependencyCount++,s._totalDependencyCount++}},s.prototype.isInitialized=function(){return this._isInitialized},s.isEnabled=function(){return s.INSTANCE&&s.INSTANCE._isEnabled},s.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},s.prototype._trackCpu=function(){var o=t.cpus();if(o&&o.length&&this._lastCpus&&o.length===this._lastCpus.length){for(var a=0,c=0,l=0,u=0,d=0,p=0;o&&p<o.length;p++){var m=o[p],f=this._lastCpus[p],y="% cpu("+p+") ",v=m.model,_=m.speed,C=m.times,P=f.times,w=C.user-P.user||0;a+=w;var R=C.sys-P.sys||0;c+=R;var I=C.nice-P.nice||0;l+=I;var z=C.idle-P.idle||0;u+=z;var G=C.irq-P.irq||0;d+=G}var L=void 0;if(typeof process.cpuUsage=="function"){var H=process.cpuUsage(),ee=process.hrtime(),ye=H.user-this._lastAppCpuUsage.user+(H.system-this._lastAppCpuUsage.system)||0;if(typeof this._lastHrtime<"u"&&this._lastHrtime.length===2){var $e=(ee[0]-this._lastHrtime[0])*1e6+(ee[1]-this._lastHrtime[1])/1e3||0;L=100*ye/($e*o.length)}this._lastAppCpuUsage=H,this._lastHrtime=ee}var Be=a+c+l+u+d||1;this._client.trackMetric({name:n.PerformanceCounter.PROCESSOR_TIME,value:(Be-u)/Be*100}),this._client.trackMetric({name:n.PerformanceCounter.PROCESS_TIME,value:L||a/Be*100})}this._lastCpus=o},s.prototype._trackMemory=function(){var o=t.freemem(),a=process.memoryUsage().rss,c=t.totalmem()-o;this._client.trackMetric({name:n.PerformanceCounter.PRIVATE_BYTES,value:a}),this._client.trackMetric({name:n.PerformanceCounter.AVAILABLE_BYTES,value:o}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:n.QuickPulseCounter.COMMITTED_BYTES,value:c})},s.prototype._trackNetwork=function(){var o=this._lastRequests,a={totalRequestCount:s._totalRequestCount,totalFailedRequestCount:s._totalFailedRequestCount,time:+new Date},c=a.totalRequestCount-o.totalRequestCount||0,l=a.totalFailedRequestCount-o.totalFailedRequestCount||0,u=a.time-o.time,d=u/1e3,p=(s._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/c||0;if(this._lastIntervalRequestExecutionTime=s._intervalRequestExecutionTime,u>0){var m=c/d,f=l/d;this._client.trackMetric({name:n.PerformanceCounter.REQUEST_RATE,value:m}),(!this._enableLiveMetricsCounters||c>0)&&this._client.trackMetric({name:n.PerformanceCounter.REQUEST_DURATION,value:p}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:n.QuickPulseCounter.REQUEST_FAILURE_RATE,value:f})}this._lastRequests=a},s.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var o=this._lastDependencies,a={totalDependencyCount:s._totalDependencyCount,totalFailedDependencyCount:s._totalFailedDependencyCount,time:+new Date},c=a.totalDependencyCount-o.totalDependencyCount||0,l=a.totalFailedDependencyCount-o.totalFailedDependencyCount||0,u=a.time-o.time,d=u/1e3,p=(s._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/c||0;if(this._lastIntervalDependencyExecutionTime=s._intervalDependencyExecutionTime,u>0){var m=c/d,f=l/d;this._client.trackMetric({name:n.QuickPulseCounter.DEPENDENCY_RATE,value:m}),this._client.trackMetric({name:n.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:f}),(!this._enableLiveMetricsCounters||c>0)&&this._client.trackMetric({name:n.QuickPulseCounter.DEPENDENCY_DURATION,value:p})}this._lastDependencies=a}},s.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var o=this._lastExceptions,a={totalExceptionCount:s._totalExceptionCount,time:+new Date},c=a.totalExceptionCount-o.totalExceptionCount||0,l=a.time-o.time,u=l/1e3;if(l>0){var d=c/u;this._client.trackMetric({name:n.QuickPulseCounter.EXCEPTION_RATE,value:d})}this._lastExceptions=a}},s.prototype.dispose=function(){s.INSTANCE=null,this.enable(!1),this._isInitialized=!1},s._totalRequestCount=0,s._totalFailedRequestCount=0,s._totalDependencyCount=0,s._totalFailedDependencyCount=0,s._totalExceptionCount=0,s._intervalDependencyExecutionTime=0,s._intervalRequestExecutionTime=0,s}();e.exports=i}),xHt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AggregatedMetricCounter=void 0;var e=function(){function t(n){this.dimensions=n,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}return t}();r.AggregatedMetricCounter=e}),OHt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PreaggregatedMetricPropertyNames=void 0,r.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}}),S2e=ae((r,e)=>{"use strict";var t=r&&r.__assign||function(){return t=Object.assign||function(a){for(var c,l=1,u=arguments.length;l<u;l++){c=arguments[l];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},t.apply(this,arguments)},n=Pb(),i=xHt(),s=OHt(),o=function(){function a(c,l){l===void 0&&(l=6e4),a.INSTANCE||(a.INSTANCE=this),this._isInitialized=!1,a._dependencyCountersCollection=[],a._requestCountersCollection=[],a._exceptionCountersCollection=[],a._traceCountersCollection=[],this._client=c,this._collectionInterval=l}return a.prototype.enable=function(c,l){var u=this;this._isEnabled=c,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),c?this._handle||(this._collectionInterval=l||this._collectionInterval,this._handle=setInterval(function(){return u.trackPreAggregatedMetrics()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},a.countException=function(c){if(a.isEnabled()){var l=a._getAggregatedCounter(c,this._exceptionCountersCollection);l.totalCount++}},a.countTrace=function(c){if(a.isEnabled()){var l=a._getAggregatedCounter(c,this._traceCountersCollection);l.totalCount++}},a.countRequest=function(c,l){if(a.isEnabled()){var u,d=a._getAggregatedCounter(l,this._requestCountersCollection);if(typeof c=="string")u=+new Date("1970-01-01T"+c+"Z");else if(typeof c=="number")u=c;else return;d.intervalExecutionTime+=u,d.totalCount++}},a.countDependency=function(c,l){if(a.isEnabled()){var u=a._getAggregatedCounter(l,this._dependencyCountersCollection),d;if(typeof c=="string")d=+new Date("1970-01-01T"+c+"Z");else if(typeof c=="number")d=c;else return;u.intervalExecutionTime+=d,u.totalCount++}},a.prototype.isInitialized=function(){return this._isInitialized},a.isEnabled=function(){return a.INSTANCE&&a.INSTANCE._isEnabled},a.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},a._getAggregatedCounter=function(c,l){for(var u=!1,d=0;d<l.length;d++){if(c===l[d].dimensions)return l[d];if(Object.keys(c).length===Object.keys(l[d].dimensions).length){for(var p in c)if(c[p]!=l[d].dimensions[p]){u=!0;break}if(!u)return l[d];u=!1}}var m=new i.AggregatedMetricCounter(c);return l.push(m),m},a.prototype._trackRequestMetrics=function(){for(var c=0;c<a._requestCountersCollection.length;c++){var l=a._requestCountersCollection[c];l.time=+new Date;var u=l.totalCount-l.lastTotalCount||0,d=l.time-l.lastTime,p=(l.intervalExecutionTime-l.lastIntervalExecutionTime)/u||0;l.lastIntervalExecutionTime=l.intervalExecutionTime,d>0&&u>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:l.dimensions,value:p,count:u,aggregationInterval:d,metricType:n.MetricId.REQUESTS_DURATION}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},a.prototype._trackDependencyMetrics=function(){for(var c=0;c<a._dependencyCountersCollection.length;c++){var l=a._dependencyCountersCollection[c];l.time=+new Date;var u=l.totalCount-l.lastTotalCount||0,d=l.time-l.lastTime,p=(l.intervalExecutionTime-l.lastIntervalExecutionTime)/u||0;l.lastIntervalExecutionTime=l.intervalExecutionTime,d>0&&u>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:l.dimensions,value:p,count:u,aggregationInterval:d,metricType:n.MetricId.DEPENDENCIES_DURATION}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},a.prototype._trackExceptionMetrics=function(){for(var c=0;c<a._exceptionCountersCollection.length;c++){var l=a._exceptionCountersCollection[c],u=l.totalCount-l.lastTotalCount||0,d=l.time-l.lastTime;this._trackPreAggregatedMetric({name:"Exceptions",dimensions:l.dimensions,value:u,count:u,aggregationInterval:d,metricType:n.MetricId.EXCEPTIONS_COUNT}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},a.prototype._trackTraceMetrics=function(){for(var c=0;c<a._traceCountersCollection.length;c++){var l=a._traceCountersCollection[c],u=l.totalCount-l.lastTotalCount||0,d=l.time-l.lastTime;this._trackPreAggregatedMetric({name:"Traces",dimensions:l.dimensions,value:u,count:u,aggregationInterval:d,metricType:n.MetricId.TRACES_COUNT}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},a.prototype._trackPreAggregatedMetric=function(c){var l={};for(var u in c.dimensions)l[s.PreaggregatedMetricPropertyNames[u]]=c.dimensions[u];l=t(t({},l),{"_MS.MetricId":c.metricType,"_MS.AggregationIntervalMs":String(c.aggregationInterval),"_MS.IsAutocollected":"True"});var d={name:c.name,value:c.value,count:c.count,properties:l,kind:"Aggregation"};this._client.trackMetric(d)},a.prototype.dispose=function(){a.INSTANCE=null,this.enable(!1),this._isInitialized=!1},a}();e.exports=o}),fH=ae((r,e)=>{"use strict";var t=require("os"),n=require("fs"),i=require("path"),s=Su(),o=Oc(),a=function(){function c(l){this.keys=new s.ContextTagKeys,this.tags={},this._loadApplicationContext(l),this._loadDeviceContext(),this._loadInternalContext()}return c.prototype._loadApplicationContext=function(l){if(l=l||i.resolve(__dirname,"../../../../package.json"),!c.appVersion[l]){c.appVersion[l]="unknown";try{var u=JSON.parse(n.readFileSync(l,"utf8"));u&&typeof u.version=="string"&&(c.appVersion[l]=u.version)}catch(d){o.info("unable to read app version: ",d)}}this.tags[this.keys.applicationVersion]=c.appVersion[l]},c.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=t&&t.hostname(),this.tags[this.keys.deviceOSVersion]=t&&t.type()+" "+t.release(),this.tags[this.keys.cloudRole]=c.DefaultRoleName,this.tags["ai.device.osArchitecture"]=t&&t.arch(),this.tags["ai.device.osPlatform"]=t&&t.platform()},c.prototype._loadInternalContext=function(){var l=i.resolve(__dirname,"../../package.json");if(!c.sdkVersion){c.sdkVersion="unknown";try{var u=JSON.parse(n.readFileSync(l,"utf8"));u&&typeof u.version=="string"&&(c.sdkVersion=u.version)}catch(d){o.info("unable to read app version: ",d)}}this.tags[this.keys.internalSdkVersion]="node:"+c.sdkVersion},c.DefaultRoleName="Web",c.appVersion={},c.sdkVersion=null,c}();e.exports=a}),AHt=ae((r,e)=>{"use strict";var t=r&&r.__extends||function(){var u=function(d,p){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,f){m.__proto__=f}||function(m,f){for(var y in f)Object.prototype.hasOwnProperty.call(f,y)&&(m[y]=f[y])},u(d,p)};return function(d,p){u(d,p);function m(){this.constructor=d}d.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}}(),n=require("url"),i=Su(),s=up(),o=Xk(),a=g2e(),c=z0(),l=function(u){t(d,u);function d(p,m){var f=u.call(this)||this;return m&&m.method&&p&&(f.method=m.method,f.url=d._getUrlFromRequestOptions(p,m),f.startTime=+new Date),f}return d.prototype.onError=function(p){this._setStatus(void 0,p)},d.prototype.onResponse=function(p){this._setStatus(p.statusCode,void 0),this.correlationId=s.getCorrelationContextTarget(p,o.requestContextTargetKey)},d.prototype.getDependencyTelemetry=function(p,m){var f=n.parse(this.url);f.search=void 0,f.hash=void 0;var y=this.method.toUpperCase()+" "+f.pathname,v=i.RemoteDependencyDataConstants.TYPE_HTTP,_=f.hostname;f.port&&(_+=":"+f.port),this.correlationId?(v=i.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==c.correlationIdPrefix&&(_+=" | "+this.correlationId)):v=i.RemoteDependencyDataConstants.TYPE_HTTP;var C={id:m,name:y,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:v,target:_};if(p&&p.time?C.time=p.time:this.startTime&&(C.time=new Date(this.startTime)),p){for(var P in p)C[P]||(C[P]=p[P]);if(p.properties)for(var P in p.properties)C.properties[P]=p.properties[P]}return C},d._getUrlFromRequestOptions=function(p,m){if(typeof p=="string")if(p.indexOf("http://")===0||p.indexOf("https://")===0)p=n.parse(p);else{var f=n.parse(p);f.host==="443"?p=n.parse("https://"+p):p=n.parse("http://"+p)}else{if(p&&typeof n.URL=="function"&&p instanceof n.URL)return n.format(p);var y=p;p={},y&&Object.keys(y).forEach(function(C){p[C]=y[C]})}if(p.path){var v=n.parse(p.path);p.pathname=v.pathname,p.search=v.search}if(p.host&&p.port){var _=n.parse("http://"+p.host);!_.port&&p.port&&(p.hostname=p.host,delete p.host)}return p.protocol=p.protocol||m.agent&&m.agent.protocol||m.protocol||void 0,p.hostname=p.hostname||"localhost",n.format(p)},d}(a);e.exports=l}),NHt=ae(r=>{"use strict";var e=r&&r.__assign||function(){return e=Object.assign||function(o){for(var a,c=1,l=arguments.length;c<l;c++){a=arguments[c];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(o[u]=a[u])}return o},e.apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0}),r.spanToTelemetryContract=void 0;var t=oo(),n=Pb();function i(o){var a=e({},o);return Object.keys(n.SpanAttribute).forEach(function(c){delete a[c]}),a}function s(o){var a="|"+o.spanContext().traceId+"."+o.spanContext().spanId+".",c=Math.round(o._duration[0]*1e3+o._duration[1]/1e6),l=o.attributes["peer.address"]?o.attributes["peer.address"].toString():"",u=o.attributes.component?o.attributes.component.toString():"",d=u.toUpperCase()===n.DependencyTypeName.Http||!!o.attributes[n.SpanAttribute.HttpUrl],p=u.toLowerCase()===n.DependencyTypeName.Grpc;if(d){var m=o.attributes[n.SpanAttribute.HttpMethod]||"GET",f=new URL(o.attributes[n.SpanAttribute.HttpUrl].toString()),y=o.attributes[n.SpanAttribute.HttpHost]||f.host,v=o.attributes[n.SpanAttribute.HttpPort]||f.port||null,_=f.pathname||"/",C=m+" "+_,P=n.DependencyTypeName.Http,w=v?(y+":"+v).toString():y.toString(),R=f.toString(),I=o.attributes[n.SpanAttribute.HttpStatusCode]||o.status.code||0,z=I<400;return{id:a,name:C,dependencyTypeName:P,target:w,data:R,success:z,duration:c,url:R,resultCode:String(I),properties:i(o.attributes)}}else if(p){var m=o.attributes[n.SpanAttribute.GrpcMethod]||"rpc",G=o.attributes[n.SpanAttribute.GrpcService],L=G?m+" "+G:o.name;return{id:a,duration:c,name:L,target:G.toString(),data:G.toString()||L,url:G.toString()||L,dependencyTypeName:n.DependencyTypeName.Grpc,resultCode:String(o.status.code||0),success:o.status.code===0,properties:i(o.attributes)}}else{var H=o.name,ee=o.links&&o.links.map(function(ye){return{operation_Id:ye.context.traceId,id:ye.context.spanId}});return{id:a,duration:c,name:H,target:l,data:l||H,url:l||H,dependencyTypeName:o.kind===t.SpanKind.INTERNAL?n.DependencyTypeName.InProc:u||o.name,resultCode:String(o.status.code||0),success:o.status.code===0,properties:e(e({},i(o.attributes)),{"_MS.links":ee||void 0})}}}r.spanToTelemetryContract=s}),DHt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.enable=r.subscriber=void 0;var e=oo(),t=Sa(),n=hH(),i=NHt(),s=zGe(),o=[],a=function(l){var u=l.data,d=i.spanToTelemetryContract(u),p=u.spanContext(),m=new n;m.traceId=p.traceId,m.spanId=p.spanId,m.traceFlag=n.formatOpenTelemetryTraceFlags(p.traceFlags),m.parentId=u.parentSpanId?"|"+p.traceId+"."+u.parentSpanId+".":null,s.AsyncScopeManager.with(u,function(){o.forEach(function(f){u.kind===e.SpanKind.SERVER?f.trackRequest(d):(u.kind===e.SpanKind.CLIENT||u.kind===e.SpanKind.INTERNAL)&&f.trackDependency(d)})})};r.subscriber=a;function c(l,u){l?(o.length===0&&t.channel.subscribe("azure-coretracing",r.subscriber),o.push(u)):(o=o.filter(function(d){return d!=u}),o.length===0&&t.channel.unsubscribe("azure-coretracing",r.subscriber))}r.enable=c}),MHt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.enable=r.subscriber=void 0;var e=Sa(),t=[],n=function(s){s.data.event.commandName!=="ismaster"&&t.forEach(function(o){var a=s.data.startedData&&s.data.startedData.databaseName||"Unknown database";o.trackDependency({target:a,data:s.data.event.commandName,name:s.data.event.commandName,duration:s.data.event.duration,success:s.data.succeeded,resultCode:s.data.succeeded?"0":"1",time:s.data.startedData.time,dependencyTypeName:"mongodb"})})};r.subscriber=n;function i(s,o){s?(t.length===0&&e.channel.subscribe("mongodb",r.subscriber),t.push(o)):(t=t.filter(function(a){return a!=o}),t.length===0&&e.channel.unsubscribe("mongodb",r.subscriber))}r.enable=i}),kHt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.enable=r.subscriber=void 0;var e=Sa(),t=[],n=function(s){t.forEach(function(o){var a=s.data.query||{},c=a.sql||"Unknown query",l=!s.data.err,u=a._connection||{},d=u.config||{},p=d.socketPath?d.socketPath:(d.host||"localhost")+":"+d.port;o.trackDependency({target:p,data:c,name:c,duration:s.data.duration,success:l,resultCode:l?"0":"1",time:s.data.time,dependencyTypeName:"mysql"})})};r.subscriber=n;function i(s,o){s?(t.length===0&&e.channel.subscribe("mysql",r.subscriber),t.push(o)):(t=t.filter(function(a){return a!=o}),t.length===0&&e.channel.unsubscribe("mysql",r.subscriber))}r.enable=i}),LHt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.enable=r.subscriber=void 0;var e=Sa(),t=[],n=function(s){t.forEach(function(o){s.data.commandObj.command!=="info"&&o.trackDependency({target:s.data.address,name:s.data.commandObj.command,data:s.data.commandObj.command,duration:s.data.duration,success:!s.data.err,resultCode:s.data.err?"1":"0",time:s.data.time,dependencyTypeName:"redis"})})};r.subscriber=n;function i(s,o){s?(t.length===0&&e.channel.subscribe("redis",r.subscriber),t.push(o)):(t=t.filter(function(a){return a!=o}),t.length===0&&e.channel.unsubscribe("redis",r.subscriber))}r.enable=i}),qHt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.enable=r.subscriber=void 0;var e=Sa(),t=[],n=function(s){t.forEach(function(o){var a=s.data.query,c=a.preparable&&a.preparable.text||a.plan||a.text||"unknown query",l=!s.data.error,u=s.data.database.host+":"+s.data.database.port;o.trackDependency({target:u,data:c,name:c,duration:s.data.duration,success:l,resultCode:l?"0":"1",time:s.data.time,dependencyTypeName:"postgres"})})};r.subscriber=n;function i(s,o){s?(t.length===0&&e.channel.subscribe("postgres",r.subscriber),t.push(o)):(t=t.filter(function(a){return a!=o}),t.length===0&&e.channel.unsubscribe("postgres",r.subscriber))}r.enable=i}),Jk=ae((r,e)=>{"use strict";var t=r&&r.__spreadArrays||function(){for(var f=0,y=0,v=arguments.length;y<v;y++)f+=arguments[y].length;for(var _=Array(f),C=0,y=0;y<v;y++)for(var P=arguments[y],w=0,R=P.length;w<R;w++,C++)_[C]=P[w];return _},n=require("http"),i=require("https"),s=Oc(),o=up(),a=Xk(),c=AHt(),l=F0(),u=z0(),d=hH(),p=mle(),m=function(){function f(y){if(f.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");f.INSTANCE=this,this._client=y}return f.prototype.enable=function(y){this._isEnabled=y,this._isEnabled&&!this._isInitialized&&this._initialize(),p.IsInitialized&&(DHt().enable(!0,this._client),MHt().enable(y,this._client),kHt().enable(y,this._client),LHt().enable(y,this._client),qHt().enable(y,this._client))},f.prototype.isInitialized=function(){return this._isInitialized},f.prototype._initialize=function(){var y=this;this._isInitialized=!0;var v=n.request,_=i.request,C=function(P,w){var R=!w[f.disableCollectionRequestOption]&&!P[f.alreadyAutoCollectedFlag];w.headers&&w.headers["user-agent"]&&w.headers["user-agent"].toString().indexOf("azsdk-js")!==-1&&(R=!1),P[f.alreadyAutoCollectedFlag]=!0,P&&w&&R&&(l.CorrelationContextManager.wrapEmitter(P),f.trackRequest(y._client,{options:w,request:P}))};n.request=function(P){for(var w=[],R=1;R<arguments.length;R++)w[R-1]=arguments[R];var I=v.call.apply(v,t([n,P],w));return C(I,P),I},i.request=function(P){for(var w=[],R=1;R<arguments.length;R++)w[R-1]=arguments[R];var I=_.call.apply(_,t([i,P],w));return C(I,P),I},n.get=function(P){for(var w,R=[],I=1;I<arguments.length;I++)R[I-1]=arguments[I];var z=(w=n.request).call.apply(w,t([n,P],R));return z.end(),z},i.get=function(P){for(var w,R=[],I=1;I<arguments.length;I++)R[I-1]=arguments[I];var z=(w=i.request).call.apply(w,t([i,P],R));return z.end(),z}},f.trackRequest=function(y,v){if(!v.options||!v.request||!y){s.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!v.options,!v.request,!y);return}var _=new c(v.options,v.request),C=l.CorrelationContextManager.getCurrentContext(),P,w;if(C&&C.operation&&C.operation.traceparent&&d.isValidTraceId(C.operation.traceparent.traceId))C.operation.traceparent.updateSpanId(),P=C.operation.traceparent.getBackCompatRequestId();else if(u.w3cEnabled){var R=new d;w=R.toString(),P=R.getBackCompatRequestId()}else P=C&&C.operation&&C.operation.parentId+f.requestNumber+++".";if(o.canIncludeCorrelationHeader(y,_.getUrl())&&v.request.getHeader&&v.request.setHeader&&y.config&&y.config.correlationId){var I=v.request.getHeader(a.requestContextHeader);try{o.safeIncludeCorrelationHeader(y,v.request,I)}catch(L){s.warn("Request-Context header could not be set. Correlation of requests may be lost",L)}if(C&&C.operation)try{if(v.request.setHeader(a.requestIdHeader,P),y.config.ignoreLegacyHeaders||(v.request.setHeader(a.parentIdHeader,C.operation.id),v.request.setHeader(a.rootIdHeader,P)),w||C.operation.traceparent)v.request.setHeader(a.traceparentHeader,w||C.operation.traceparent.toString());else if(u.w3cEnabled){var R=new d().toString();v.request.setHeader(a.traceparentHeader,R)}if(C.operation.tracestate){var z=C.operation.tracestate.toString();z&&v.request.setHeader(a.traceStateHeader,z)}var G=C.customProperties.serializeToHeader();G&&v.request.setHeader(a.correlationContextHeader,G)}catch(L){s.warn("Correlation headers could not be set. Correlation of requests may be lost.",L)}}v.request.on&&(v.request.on("response",function(L){_.onResponse(L);var H=_.getDependencyTelemetry(v,P);H.contextObjects=H.contextObjects||{},H.contextObjects["http.RequestOptions"]=v.options,H.contextObjects["http.ClientRequest"]=v.request,H.contextObjects["http.ClientResponse"]=L,y.trackDependency(H)}),v.request.on("error",function(L){_.onError(L);var H=_.getDependencyTelemetry(v,P);H.contextObjects=H.contextObjects||{},H.contextObjects["http.RequestOptions"]=v.options,H.contextObjects["http.ClientRequest"]=v.request,H.contextObjects.Error=L,y.trackDependency(H)}),v.request.on("abort",function(){_.onError(new Error);var L=_.getDependencyTelemetry(v,P);L.contextObjects=L.contextObjects||{},L.contextObjects["http.RequestOptions"]=v.options,L.contextObjects["http.ClientRequest"]=v.request,y.trackDependency(L)}))},f.prototype.dispose=function(){f.INSTANCE=null,this.enable(!1),this._isInitialized=!1},f.disableCollectionRequestOption="disableAppInsightsAutoCollection",f.requestNumber=1,f.alreadyAutoCollectedFlag="_appInsightsAutoCollected",f}();e.exports=m}),zHt=ae((r,e)=>{"use strict";var t=require("os"),n=Pb(),i=up(),s=fH(),o=Jk(),a="http://169.254.169.254/metadata/instance/compute",c="api-version=2017-12-01",l="format=json",u="ENETUNREACH",d=function(){function p(m){this._collectionInterval=9e5,this._vmData={},this._azInst_vmId="",this._azInst_subscriptionId="",this._azInst_osType="",p.INSTANCE||(p.INSTANCE=this),this._isInitialized=!1,this._client=m}return p.prototype.enable=function(m,f){var y=this;this._isEnabled=m,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),m?this._handle||(this._handle=setInterval(function(){return y.trackHeartBeat(f,function(){})},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},p.prototype.isInitialized=function(){return this._isInitialized},p.isEnabled=function(){return p.INSTANCE&&p.INSTANCE._isEnabled},p.prototype.trackHeartBeat=function(m,f){var y=this,v=!1,_={},C=s.sdkVersion;_.sdk=C,_.osType=t.type(),process.env.WEBSITE_SITE_NAME?(_.appSrv_SiteName=process.env.WEBSITE_SITE_NAME||"",_.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME||"",_.appSrv_wsHost=process.env.WEBSITE_HOSTNAME||""):process.env.FUNCTIONS_WORKER_RUNTIME?_.azfunction_appId=process.env.WEBSITE_HOSTNAME:m&&(this._isVM===void 0?(v=!0,this._getAzureComputeMetadata(m,function(){y._isVM&&Object.keys(y._vmData).length>0&&(_.azInst_vmId=y._vmData.vmId||"",_.azInst_subscriptionId=y._vmData.subscriptionId||"",_.azInst_osType=y._vmData.osType||"",y._azInst_vmId=y._vmData.vmId||"",y._azInst_subscriptionId=y._vmData.subscriptionId||"",y._azInst_osType=y._vmData.osType||""),y._client.trackMetric({name:n.HeartBeatMetricName,value:0,properties:_}),f()})):this._isVM&&(_.azInst_vmId=this._azInst_vmId,_.azInst_subscriptionId=this._azInst_subscriptionId,_.azInst_osType=this._azInst_osType)),v||(this._client.trackMetric({name:n.HeartBeatMetricName,value:0,properties:_}),f())},p.prototype.dispose=function(){p.INSTANCE=null,this.enable(!1),this._isInitialized=!1},p.prototype._getAzureComputeMetadata=function(m,f){var y,v=this,_=a+"?"+c+"&"+l,C=(y={method:"GET"},y[o.disableCollectionRequestOption]=!0,y.headers={Metadata:"True"},y),P=i.makeRequest(m,_,C,function(w){if(w.statusCode===200){v._isVM=!0;var R="";w.on("data",function(I){R+=I}),w.on("end",function(){v._vmData=v._isJSON(R)?JSON.parse(R):{},f()})}else f()});P&&(P.on("error",function(w){w&&w.message&&w.message.indexOf(u)>-1&&(v._isVM=!1),f()}),P.end())},p.prototype._isJSON=function(m){try{return JSON.parse(m)&&!!m}catch{return!1}},p}();e.exports=d}),C2e=ae((r,e)=>{"use strict";var t=require("http"),n=require("https"),i=Oc(),s=up(),o=Xk(),a=y2e(),c=F0(),l=gle(),u=function(){function d(p){if(d.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");d.INSTANCE=this,this._client=p}return d.prototype.enable=function(p){this._isEnabled=p,(this._isAutoCorrelating||this._isEnabled||l.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},d.prototype.useAutoCorrelation=function(p,m){p&&!this._isAutoCorrelating?c.CorrelationContextManager.enable(m):!p&&this._isAutoCorrelating&&c.CorrelationContextManager.disable(),this._isAutoCorrelating=p},d.prototype.isInitialized=function(){return this._isInitialized},d.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},d.prototype._generateCorrelationContext=function(p){if(this._isAutoCorrelating)return c.CorrelationContextManager.generateContextObject(p.getOperationId(this._client.context.tags),p.getRequestId(),p.getOperationName(this._client.context.tags),p.getCorrelationContextHeader(),p.getTraceparent(),p.getTracestate())},d.prototype._initialize=function(){var p=this;this._isInitialized=!0;var m=function(_){if(_){if(typeof _!="function")throw new Error("onRequest handler must be a function");return function(C,P){c.CorrelationContextManager.wrapEmitter(C),c.CorrelationContextManager.wrapEmitter(P);var w=C&&!C[d.alreadyAutoCollectedFlag];if(C&&w){var R=new a(C),I=p._generateCorrelationContext(R);c.CorrelationContextManager.runWithContext(I,function(){p._isEnabled&&(C[d.alreadyAutoCollectedFlag]=!0,d.trackRequest(p._client,{request:C,response:P},R)),typeof _=="function"&&_(C,P)})}else typeof _=="function"&&_(C,P)}}},f=function(_){var C=_.addListener.bind(_);_.addListener=function(P,w){switch(P){case"request":case"checkContinue":return C(P,m(w));default:return C(P,w)}},_.on=_.addListener},y=t.createServer;t.createServer=function(_,C){if(C&&typeof C=="function"){var P=y(_,m(C));return f(P),P}else{var P=y(m(_));return f(P),P}};var v=n.createServer;n.createServer=function(_,C){var P=v(_,m(C));return f(P),P}},d.trackRequestSync=function(p,m){if(!m.request||!m.response||!p){i.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!m.request,!m.response,!p);return}d.addResponseCorrelationIdHeader(p,m.response);var f=c.CorrelationContextManager.getCurrentContext(),y=new a(m.request,f&&f.operation.parentId);f&&(f.operation.id=y.getOperationId(p.context.tags)||f.operation.id,f.operation.name=y.getOperationName(p.context.tags)||f.operation.name,f.operation.parentId=y.getRequestId()||f.operation.parentId,f.customProperties.addHeaderData(y.getCorrelationContextHeader())),d.endRequest(p,y,m,m.duration,m.error)},d.trackRequest=function(p,m,f){if(!m.request||!m.response||!p){i.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!m.request,!m.response,!p);return}var y=c.CorrelationContextManager.getCurrentContext(),v=f||new a(m.request,y&&y.operation.parentId);s.canIncludeCorrelationHeader(p,v.getUrl())&&d.addResponseCorrelationIdHeader(p,m.response),y&&!f&&(y.operation.id=v.getOperationId(p.context.tags)||y.operation.id,y.operation.name=v.getOperationName(p.context.tags)||y.operation.name,y.operation.parentId=v.getOperationParentId(p.context.tags)||y.operation.parentId,y.customProperties.addHeaderData(v.getCorrelationContextHeader())),m.response.once&&m.response.once("finish",function(){d.endRequest(p,v,m,null,null)}),m.request.on&&m.request.on("error",function(_){d.endRequest(p,v,m,null,_)}),m.request.on&&m.request.on("aborted",function(){var _="The request has been aborted and the network socket has closed.";d.endRequest(p,v,m,null,_)})},d.addResponseCorrelationIdHeader=function(p,m){if(p.config&&p.config.correlationId&&m.getHeader&&m.setHeader&&!m.headersSent){var f=m.getHeader(o.requestContextHeader);s.safeIncludeCorrelationHeader(p,m,f)}},d.endRequest=function(p,m,f,y,v){v?m.onError(v,y):m.onResponse(f.response,y);var _=m.getRequestTelemetry(f);if(_.tagOverrides=m.getRequestTags(p.context.tags),f.tagOverrides)for(var C in f.tagOverrides)_.tagOverrides[C]=f.tagOverrides[C];var P=m.getLegacyRootId();P&&(_.properties.ai_legacyRootId=P),_.contextObjects=_.contextObjects||{},_.contextObjects["http.ServerRequest"]=f.request,_.contextObjects["http.ServerResponse"]=f.response,p.trackRequest(_)},d.prototype.dispose=function(){d.INSTANCE=null,this.enable(!1),this._isInitialized=!1,c.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},d.alreadyAutoCollectedFlag="_appInsightsAutoCollected",d}();e.exports=u}),FHt=ae((r,e)=>{"use strict";var t=r&&r.__assign||function(){return t=Object.assign||function(u){for(var d,p=1,m=arguments.length;p<m;p++){d=arguments[p];for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(u[f]=d[f])}return u},t.apply(this,arguments)},n=require("os"),i=Su(),s=Pb(),o=up(),a=Oc(),c=o.w3cTraceId(),l=function(){function u(){}return u.createQuickPulseEnvelope=function(d,p,m,f){var y=n&&typeof n.hostname=="function"&&n.hostname()||"Unknown",v=f.tags&&f.keys&&f.keys.cloudRoleInstance&&f.tags[f.keys.cloudRoleInstance]||y,_=f.tags&&f.keys&&f.keys.cloudRole&&f.tags[f.keys.cloudRole]||null,C={Documents:p.length>0?p:null,InstrumentationKey:m.instrumentationKey||"",Metrics:d.length>0?d:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:f.tags[f.keys.internalSdkVersion],StreamId:c,MachineName:y,Instance:v,RoleName:_};return C},u.createQuickPulseMetric=function(d){var p;return p={Name:d.name,Value:d.value,Weight:d.count||1},p},u.telemetryEnvelopeToQuickPulseDocument=function(d){switch(d.data.baseType){case i.TelemetryTypeString.Event:return u.createQuickPulseEventDocument(d);case i.TelemetryTypeString.Exception:return u.createQuickPulseExceptionDocument(d);case i.TelemetryTypeString.Trace:return u.createQuickPulseTraceDocument(d);case i.TelemetryTypeString.Dependency:return u.createQuickPulseDependencyDocument(d);case i.TelemetryTypeString.Request:return u.createQuickPulseRequestDocument(d)}return null},u.createQuickPulseEventDocument=function(d){var p=u.createQuickPulseDocument(d),m=d.data.baseData.name,f=t(t({},p),{Name:m});return f},u.createQuickPulseTraceDocument=function(d){var p=u.createQuickPulseDocument(d),m=d.data.baseData.severityLevel||0,f=t(t({},p),{Message:d.data.baseData.message,SeverityLevel:i.SeverityLevel[m]});return f},u.createQuickPulseExceptionDocument=function(d){var p=u.createQuickPulseDocument(d),m=d.data.baseData.exceptions,f="",y="",v="";m&&m.length>0&&(m[0].parsedStack&&m[0].parsedStack.length>0?m[0].parsedStack.forEach(function(C){f+=C.assembly+`
`}):m[0].stack&&m[0].stack.length>0&&(f=m[0].stack),y=m[0].message,v=m[0].typeName);var _=t(t({},p),{Exception:f,ExceptionMessage:y,ExceptionType:v});return _},u.createQuickPulseRequestDocument=function(d){var p=u.createQuickPulseDocument(d),m=d.data.baseData,f=t(t({},p),{Name:m.name,Success:m.success,Duration:m.duration,ResponseCode:m.responseCode,OperationName:m.name});return f},u.createQuickPulseDependencyDocument=function(d){var p=u.createQuickPulseDocument(d),m=d.data.baseData,f=t(t({},p),{Name:m.name,Target:m.target,Success:m.success,Duration:m.duration,ResultCode:m.resultCode,CommandName:m.data,OperationName:p.OperationId,DependencyTypeName:m.type});return f},u.createQuickPulseDocument=function(d){var p,m,f,y;d.data.baseType?(m=s.TelemetryTypeStringToQuickPulseType[d.data.baseType],p=s.TelemetryTypeStringToQuickPulseDocumentType[d.data.baseType]):a.warn("Document type invalid; not sending live metric document",d.data.baseType),f=d.tags[u.keys.operationId],y=u.aggregateProperties(d);var v={DocumentType:p,__type:m,OperationId:f,Version:"1.0",Properties:y};return v},u.aggregateProperties=function(d){var p=[],m=d.data.baseData.measurements||{};for(var f in m)if(m.hasOwnProperty(f)){var y=m[f],v={key:f,value:y};p.push(v)}var _=d.data.baseData.properties||{};for(var f in _)if(_.hasOwnProperty(f)){var y=_[f],v={key:f,value:y};p.push(v)}return p},u.keys=new i.ContextTagKeys,u}();e.exports=l}),jHt=ae((r,e)=>{"use strict";var t=function(){return(Date.now()+621355968e5)*1e4};e.exports={getTransmissionTime:t}}),UHt=ae((r,e)=>{"use strict";var t=r&&r.__awaiter||function(d,p,m,f){function y(v){return v instanceof m?v:new m(function(_){_(v)})}return new(m||(m=Promise))(function(v,_){function C(R){try{w(f.next(R))}catch(I){_(I)}}function P(R){try{w(f.throw(R))}catch(I){_(I)}}function w(R){R.done?v(R.value):y(R.value).then(C,P)}w((f=f.apply(d,p||[])).next())})},n=r&&r.__generator||function(d,p){var m={label:0,sent:function(){if(v[0]&1)throw v[1];return v[1]},trys:[],ops:[]},f,y,v,_;return _={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function C(w){return function(R){return P([w,R])}}function P(w){if(f)throw new TypeError("Generator is already executing.");for(;m;)try{if(f=1,y&&(v=w[0]&2?y.return:w[0]?y.throw||((v=y.return)&&v.call(y),0):y.next)&&!(v=v.call(y,w[1])).done)return v;switch(y=0,v&&(w=[w[0]&2,v.value]),w[0]){case 0:case 1:v=w;break;case 4:return m.label++,{value:w[1],done:!1};case 5:m.label++,y=w[1],w=[0];continue;case 7:w=m.ops.pop(),m.trys.pop();continue;default:if(v=m.trys,!(v=v.length>0&&v[v.length-1])&&(w[0]===6||w[0]===2)){m=0;continue}if(w[0]===3&&(!v||w[1]>v[0]&&w[1]<v[3])){m.label=w[1];break}if(w[0]===6&&m.label<v[1]){m.label=v[1],v=w;break}if(v&&m.label<v[2]){m.label=v[2],m.ops.push(w);break}v[2]&&m.ops.pop(),m.trys.pop();continue}w=p.call(d,m)}catch(R){w=[6,R],y=0}finally{f=v=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},i=require("https"),s=Jk(),o=Oc(),a=jHt(),c=up(),l={method:"POST",time:"x-ms-qps-transmission-time",pollingIntervalHint:"x-ms-qps-service-polling-interval-hint",endpointRedirect:"x-ms-qps-service-endpoint-redirect",instanceName:"x-ms-qps-instance-name",streamId:"x-ms-qps-stream-id",machineName:"x-ms-qps-machine-name",roleName:"x-ms-qps-role-name",streamid:"x-ms-qps-stream-id",invariantVersion:"x-ms-qps-invariant-version",subscribed:"x-ms-qps-subscribed"},u=function(){function d(p){this._config=p,this._consecutiveErrors=0}return d.prototype.ping=function(p,m,f){var y=[{name:l.streamId,value:p.StreamId},{name:l.machineName,value:p.MachineName},{name:l.roleName,value:p.RoleName},{name:l.instanceName,value:p.Instance},{name:l.invariantVersion,value:p.InvariantVersion.toString()}];this._submitData(p,m,f,"ping",y)},d.prototype.post=function(p,m,f){return t(this,void 0,void 0,function(){return n(this,function(y){switch(y.label){case 0:return[4,this._submitData([p],m,f,"post")];case 1:return y.sent(),[2]}})})},d.prototype._submitData=function(p,m,f,y,v){return t(this,void 0,void 0,function(){var _,C,P,w,R,I=this;return n(this,function(z){return _=JSON.stringify(p),C=(w={},w[s.disableCollectionRequestOption]=!0,w.host=m&&m.length>0?m:this._config.quickPulseHost,w.method=l.method,w.path="/QuickPulseService.svc/"+y+"?ikey="+this._config.instrumentationKey,w.headers=(R={Expect:"100-continue"},R[l.time]=a.getTransmissionTime(),R["Content-Type"]="application/json",R["Content-Length"]=Buffer.byteLength(_),R),w),v&&v.length>0&&v.forEach(function(G){return C.headers[G.name]=G.value}),this._config.httpsAgent?C.agent=this._config.httpsAgent:C.agent=c.tlsRestrictedAgent,P=i.request(C,function(G){if(G.statusCode==200){var L=G.headers[l.subscribed]==="true",H=G.headers[l.endpointRedirect]?G.headers[l.endpointRedirect].toString():null,ee=G.headers[l.pollingIntervalHint]?parseInt(G.headers[l.pollingIntervalHint].toString()):null;I._consecutiveErrors=0,f(L,G,H,ee)}else I._onError("StatusCode:"+G.statusCode+" StatusMessage:"+G.statusMessage),f()}),P.on("error",function(G){I._onError(G),f()}),P.write(_),P.end(),[2]})})},d.prototype._onError=function(p){this._consecutiveErrors++;var m="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%d.MAX_QPS_FAILURES_BEFORE_WARN===0?(m="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",o.warn(d.TAG,m,p)):o.info(d.TAG,m,p)},d.TAG="QuickPulseSender",d.MAX_QPS_FAILURES_BEFORE_WARN=25,d}();e.exports=u}),BHt=ae((r,e)=>{"use strict";var t=r&&r.__awaiter||function(u,d,p,m){function f(y){return y instanceof p?y:new p(function(v){v(y)})}return new(p||(p=Promise))(function(y,v){function _(w){try{P(m.next(w))}catch(R){v(R)}}function C(w){try{P(m.throw(w))}catch(R){v(R)}}function P(w){w.done?y(w.value):f(w.value).then(_,C)}P((m=m.apply(u,d||[])).next())})},n=r&&r.__generator||function(u,d){var p={label:0,sent:function(){if(y[0]&1)throw y[1];return y[1]},trys:[],ops:[]},m,f,y,v;return v={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function _(P){return function(w){return C([P,w])}}function C(P){if(m)throw new TypeError("Generator is already executing.");for(;p;)try{if(m=1,f&&(y=P[0]&2?f.return:P[0]?f.throw||((y=f.return)&&y.call(f),0):f.next)&&!(y=y.call(f,P[1])).done)return y;switch(f=0,y&&(P=[P[0]&2,y.value]),P[0]){case 0:case 1:y=P;break;case 4:return p.label++,{value:P[1],done:!1};case 5:p.label++,f=P[1],P=[0];continue;case 7:P=p.ops.pop(),p.trys.pop();continue;default:if(y=p.trys,!(y=y.length>0&&y[y.length-1])&&(P[0]===6||P[0]===2)){p=0;continue}if(P[0]===3&&(!y||P[1]>y[0]&&P[1]<y[3])){p.label=P[1];break}if(P[0]===6&&p.label<y[1]){p.label=y[1],y=P;break}if(y&&p.label<y[2]){p.label=y[2],p.ops.push(P);break}y[2]&&p.ops.pop(),p.trys.pop();continue}P=d.call(u,p)}catch(w){P=[6,w],f=0}finally{m=y=0}if(P[0]&5)throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}},i=Oc(),s=FHt(),o=UHt(),a=Pb(),c=fH(),l=function(){function u(d,p){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=d,this.context=p||new c,this._sender=new o(this.config),this._isEnabled=!1}return u.prototype.addCollector=function(d){this._collectors.push(d)},u.prototype.trackMetric=function(d){this._addMetric(d)},u.prototype.addDocument=function(d){var p=s.telemetryEnvelopeToQuickPulseDocument(d);p&&this._documents.push(p)},u.prototype.enable=function(d){d&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!d&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},u.prototype.enableCollectors=function(d){this._collectors.forEach(function(p){p.enable(d)})},u.prototype._addMetric=function(d){var p=d.value,m=d.count||1,f=a.PerformanceToQuickPulseCounter[d.name];f&&(this._metrics[f]?(this._metrics[f].Value=(this._metrics[f].Value*this._metrics[f].Weight+p*m)/(this._metrics[f].Weight+m),this._metrics[f].Weight+=m):(this._metrics[f]=s.createQuickPulseMetric(d),this._metrics[f].Name=f,this._metrics[f].Weight=1))},u.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},u.prototype._goQuickPulse=function(){return t(this,void 0,void 0,function(){var d,p,m,f,y=this;return n(this,function(v){switch(v.label){case 0:return d=Object.keys(this._metrics).map(function(_){return y._metrics[_]}),p=s.createQuickPulseEnvelope(d,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(p)]:[3,2];case 1:return v.sent(),[3,3];case 2:this._ping(p),v.label=3;case 3:return m=this._pollingIntervalHint>0?this._pollingIntervalHint:u.PING_INTERVAL,f=this._isCollectingData?u.POST_INTERVAL:m,this._isCollectingData&&Date.now()-this._lastSuccessTime>=u.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,f=u.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=u.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(f=u.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),f),this._handle.unref(),[2]}})})},u.prototype._ping=function(d){this._sender.ping(d,this._redirectedHost,this._quickPulseDone.bind(this))},u.prototype._post=function(d){return t(this,void 0,void 0,function(){return n(this,function(p){switch(p.label){case 0:return[4,this._sender.post(d,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return p.sent(),[2]}})})},u.prototype._quickPulseDone=function(d,p,m,f){d!=null?(this._isCollectingData!==d&&(i.info("Live Metrics sending data",d),this.enableCollectors(d)),this._isCollectingData=d,m&&m.length>0&&(this._redirectedHost=m,i.info("Redirecting endpoint to: ",m)),f&&f>0&&(this._pollingIntervalHint=f),p&&p.statusCode<300&&p.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},u.MAX_POST_WAIT_TIME=2e4,u.MAX_PING_WAIT_TIME=6e4,u.FALLBACK_INTERVAL=6e4,u.PING_INTERVAL=5e3,u.POST_INTERVAL=1e3,u}();e.exports=l}),GHt=ae((r,e)=>{"use strict";var t=Pb(),n=function(){function i(){}return i.parse=function(s){if(!s)return{};var o=s.split(i._FIELDS_SEPARATOR),a=o.reduce(function(l,u){var d=u.split(i._FIELD_KEY_VALUE_SEPARATOR);if(d.length===2){var p=d[0].toLowerCase(),m=d[1];l[p]=m}return l},{});if(Object.keys(a).length>0){if(a.endpointsuffix){var c=a.location?a.location+".":"";a.ingestionendpoint=a.ingestionendpoint||"https://"+c+"dc."+a.endpointsuffix,a.liveendpoint=a.liveendpoint||"https://"+c+"live."+a.endpointsuffix}a.ingestionendpoint=a.ingestionendpoint||t.DEFAULT_BREEZE_ENDPOINT,a.liveendpoint=a.liveendpoint||t.DEFAULT_LIVEMETRICS_ENDPOINT}return a},i._FIELDS_SEPARATOR=";",i._FIELD_KEY_VALUE_SEPARATOR="=",i}();e.exports=n}),P2e=ae((r,e)=>{"use strict";var t=z0(),n=GHt(),i=Oc(),s=Pb(),o=require("url"),a=function(){function c(l){var u=this;this.endpointBase=s.DEFAULT_BREEZE_ENDPOINT;var d=process.env[c.ENV_connectionString],p=n.parse(l),m=n.parse(d),f=!p.instrumentationkey&&Object.keys(p).length>0?null:l;this.instrumentationKey=p.instrumentationkey||f||m.instrumentationkey||c._getInstrumentationKey(),c._validateInstrumentationKey(this.instrumentationKey),this.endpointUrl=(p.ingestionendpoint||m.ingestionendpoint||this.endpointBase)+"/v2.1/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=30*1e3,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(y){return u.correlationId=y},this.proxyHttpUrl=process.env[c.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[c.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=p.ingestionendpoint||m.ingestionendpoint||process.env[c.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=p.liveendpoint||m.liveendpoint||process.env[c.ENV_quickPulseHost]||s.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=o.parse(this._quickPulseHost).host)}return Object.defineProperty(c.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(l){t.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=l,this.correlationId=t.correlationIdPrefix,t.queryCorrelationId(this,this.setCorrelationId)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(l){this._quickPulseHost=l},enumerable:!1,configurable:!0}),c._getInstrumentationKey=function(){var l=process.env[c.ENV_iKey]||process.env[c.ENV_azurePrefix+c.ENV_iKey]||process.env[c.legacy_ENV_iKey]||process.env[c.ENV_azurePrefix+c.legacy_ENV_iKey];if(!l||l=="")throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return l},c._validateInstrumentationKey=function(l){var u="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",d=new RegExp(u);return d.test(l)},c.ENV_azurePrefix="APPSETTING_",c.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",c.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",c.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",c.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",c.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",c.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",c.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",c.ENV_http_proxy="http_proxy",c.ENV_https_proxy="https_proxy",c}();e.exports=a}),$Ht=ae(r=>{"use strict";var e=r&&r.__assign||function(){return e=Object.assign||function(o){for(var a,c=1,l=arguments.length;c<l;c++){a=arguments[c];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(o[u]=a[u])}return o},e.apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0}),r.AutoCollectNativePerformance=void 0;var t=P2e(),n=fH(),i=Oc(),s=function(){function o(a){this._disabledMetrics={},o.INSTANCE&&o.INSTANCE.dispose(),o.INSTANCE=this,this._client=a}return o.isNodeVersionCompatible=function(){var a=process.versions.node.split(".");return parseInt(a[0])>=6},o.prototype.enable=function(a,c,l){var u=this;if(c===void 0&&(c={}),l===void 0&&(l=6e4),!!o.isNodeVersionCompatible()){if(o._metricsAvailable==null&&a&&!this._isInitialized)try{var d=require("applicationinsights-native-metrics");o._emitter=new d,o._metricsAvailable=!0,i.info("Native metrics module successfully loaded!")}catch{o._metricsAvailable=!1;return}this._isEnabled=a,this._disabledMetrics=c,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&o._emitter?(o._emitter.enable(!0,l),this._handle||(this._handle=setInterval(function(){return u._trackNativeMetrics()},l),this._handle.unref())):o._emitter&&(o._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},o.prototype.dispose=function(){this.enable(!1)},o.parseEnabled=function(a){var c=process.env[t.ENV_nativeMetricsDisableAll],l=process.env[t.ENV_nativeMetricsDisablers];if(c)return{isEnabled:!1,disabledMetrics:{}};if(l){var u=l.split(","),d={};if(u.length>0)for(var p=0,m=u;p<m.length;p++){var f=m[p];d[f]=!0}return typeof a=="object"?{isEnabled:!0,disabledMetrics:e(e({},a),d)}:{isEnabled:a,disabledMetrics:d}}return typeof a=="boolean"?{isEnabled:a,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:a}},o.prototype._trackNativeMetrics=function(){var a=!0;typeof this._isEnabled!="object"&&(a=this._isEnabled),a&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},o.prototype._trackGarbageCollection=function(){var a;if(!this._disabledMetrics.gc){var c=o._emitter.getGCData();for(var l in c){var u=c[l].metrics,d=l+" Garbage Collection Duration",p=Math.sqrt(u.sumSquares/u.count-Math.pow(u.total/u.count,2))||0;this._client.trackMetric({name:d,value:u.total,count:u.count,max:u.max,min:u.min,stdDev:p,tagOverrides:(a={},a[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,a)})}}},o.prototype._trackEventLoop=function(){var a;if(!this._disabledMetrics.loop){var c=o._emitter.getLoopData(),l=c.loopUsage;if(l.count!=0){var u="Event Loop CPU Time",d=Math.sqrt(l.sumSquares/l.count-Math.pow(l.total/l.count,2))||0;this._client.trackMetric({name:u,value:l.total,count:l.count,min:l.min,max:l.max,stdDev:d,tagOverrides:(a={},a[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,a)})}}},o.prototype._trackHeapUsage=function(){var a,c,l;if(!this._disabledMetrics.heap){var u=process.memoryUsage(),d=u.heapUsed,p=u.heapTotal,m=u.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:d,count:1,tagOverrides:(a={},a[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,a)}),this._client.trackMetric({name:"Memory Total (Heap)",value:p,count:1,tagOverrides:(c={},c[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,c)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:m-p,count:1,tagOverrides:(l={},l[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,l)})}},o}();r.AutoCollectNativePerformance=s}),VHt=ae((r,e)=>{"use strict";var t=Oc(),n=function(){function i(s,o,a,c){this._buffer=[],this._lastSend=0,this._isDisabled=s,this._getBatchSize=o,this._getBatchIntervalMs=a,this._sender=c}return i.prototype.setUseDiskRetryCaching=function(s,o,a){this._sender.setDiskRetryMode(s,o,a)},i.prototype.send=function(s){var o=this;if(!this._isDisabled()){if(!s){t.warn("Cannot send null/undefined telemetry");return}if(this._buffer.push(s),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){o._timeoutHandle=null,o.triggerSend(!1)},this._getBatchIntervalMs()))}},i.prototype.triggerSend=function(s,o){var a=this._buffer.length<1;a||(s?(this._sender.saveOnCrash(this._buffer),typeof o=="function"&&o("data saved on crash")):this._sender.send(this._buffer,o)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,a&&typeof o=="function"&&o("no data to send")},i}();e.exports=n}),HHt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.azureRoleEnvironmentTelemetryProcessor=void 0;function e(t,n){process.env.WEBSITE_SITE_NAME&&(t.tags[n.keys.cloudRole]=process.env.WEBSITE_SITE_NAME)}r.azureRoleEnvironmentTelemetryProcessor=e}),WHt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getSamplingHashCode=r.samplingTelemetryProcessor=void 0;var e=Su();function t(i,s){var o=i.sampleRate,a=!1;return o==null||o>=100||i.data&&e.TelemetryType.Metric===e.baseTypeToTelemetryType(i.data.baseType)?!0:(s.correlationContext&&s.correlationContext.operation?a=n(s.correlationContext.operation.id)<o:a=Math.random()*100<o,a)}r.samplingTelemetryProcessor=t;function n(i){var s=-2147483648,o=2147483647,a=5381;if(!i)return 0;for(;i.length<8;)i=i+i;for(var c=0;c<i.length;c++)a=((a<<5)+a|0)+i.charCodeAt(c)|0;return a=a<=s?o:Math.abs(a),a/o*100}r.getSamplingHashCode=n}),KHt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.performanceMetricsTelemetryProcessor=void 0;var e=gle(),t=Su();function n(i,s){switch(s&&s.addDocument(i),i.data.baseType){case t.TelemetryTypeString.Exception:e.countException();break;case t.TelemetryTypeString.Request:var o=i.data.baseData;e.countRequest(o.duration,o.success);break;case t.TelemetryTypeString.Dependency:var a=i.data.baseData;e.countDependency(a.duration,a.success);break}return!0}r.performanceMetricsTelemetryProcessor=n}),QHt=ae(r=>{"use strict";var e=r&&r.__assign||function(){return e=Object.assign||function(o){for(var a,c=1,l=arguments.length;c<l;c++){a=arguments[c];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(o[u]=a[u])}return o},e.apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0}),r.preAggregatedMetricsTelemetryProcessor=void 0;var t=Su(),n=S2e(),i=Su();function s(o,a){if(n.isEnabled())switch(o.data.baseType){case i.TelemetryTypeString.Exception:var c=o.data.baseData;c.properties=e(e({},c.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var l={cloudRoleInstance:o.tags[a.keys.cloudRoleInstance],cloudRoleName:o.tags[a.keys.cloudRole]};n.countException(l);break;case i.TelemetryTypeString.Trace:var u=o.data.baseData;u.properties=e(e({},u.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var d={cloudRoleInstance:o.tags[a.keys.cloudRoleInstance],cloudRoleName:o.tags[a.keys.cloudRole],traceSeverityLevel:t.SeverityLevel[u.severity]};n.countTrace(d);break;case i.TelemetryTypeString.Request:var p=o.data.baseData;p.properties=e(e({},p.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var m={cloudRoleInstance:o.tags[a.keys.cloudRoleInstance],cloudRoleName:o.tags[a.keys.cloudRole],operationSynthetic:o.tags[a.keys.operationSyntheticSource],requestSuccess:p.success,requestResultCode:p.responseCode};n.countRequest(p.duration,m);break;case i.TelemetryTypeString.Dependency:var f=o.data.baseData;f.properties=e(e({},f.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var y={cloudRoleInstance:o.tags[a.keys.cloudRoleInstance],cloudRoleName:o.tags[a.keys.cloudRole],operationSynthetic:o.tags[a.keys.operationSyntheticSource],dependencySuccess:f.success,dependencyType:f.type,dependencyTarget:f.target,dependencyResultCode:f.resultCode};n.countDependency(f.duration,y);break}return!0}r.preAggregatedMetricsTelemetryProcessor=s}),YHt=ae(r=>{"use strict";var e=r&&r.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),t=r&&r.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(HHt(),r),t(WHt(),r),t(KHt(),r),t(QHt(),r)}),XHt=ae((r,e)=>{"use strict";var t=r&&r.__awaiter||function(m,f,y,v){function _(C){return C instanceof y?C:new y(function(P){P(C)})}return new(y||(y=Promise))(function(C,P){function w(z){try{I(v.next(z))}catch(G){P(G)}}function R(z){try{I(v.throw(z))}catch(G){P(G)}}function I(z){z.done?C(z.value):_(z.value).then(w,R)}I((v=v.apply(m,f||[])).next())})},n=r&&r.__generator||function(m,f){var y={label:0,sent:function(){if(C[0]&1)throw C[1];return C[1]},trys:[],ops:[]},v,_,C,P;return P={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(P[Symbol.iterator]=function(){return this}),P;function w(I){return function(z){return R([I,z])}}function R(I){if(v)throw new TypeError("Generator is already executing.");for(;y;)try{if(v=1,_&&(C=I[0]&2?_.return:I[0]?_.throw||((C=_.return)&&C.call(_),0):_.next)&&!(C=C.call(_,I[1])).done)return C;switch(_=0,C&&(I=[I[0]&2,C.value]),I[0]){case 0:case 1:C=I;break;case 4:return y.label++,{value:I[1],done:!1};case 5:y.label++,_=I[1],I=[0];continue;case 7:I=y.ops.pop(),y.trys.pop();continue;default:if(C=y.trys,!(C=C.length>0&&C[C.length-1])&&(I[0]===6||I[0]===2)){y=0;continue}if(I[0]===3&&(!C||I[1]>C[0]&&I[1]<C[3])){y.label=I[1];break}if(I[0]===6&&y.label<C[1]){y.label=C[1],C=I;break}if(C&&y.label<C[2]){y.label=C[2],y.ops.push(I);break}C[2]&&y.ops.pop(),y.trys.pop();continue}I=f.call(m,y)}catch(z){I=[6,z],_=0}finally{v=C=0}if(I[0]&5)throw I[1];return{value:I[0]?I[1]:void 0,done:!0}}},i=require("fs"),s=require("os"),o=require("path"),a=require("zlib"),c=require("child_process"),l=Oc(),u=Jk(),d=up(),p=function(){function m(f,y,v){if(this._redirectedHost=null,this._config=f,this._onSuccess=y,this._onError=v,this._enableDiskRetryMode=!1,this._resendInterval=m.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=m.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._fileCleanupTimer=null,this._tempDir=o.join(s.tmpdir(),m.TEMPDIR_PREFIX+this._config.instrumentationKey),!m.OS_PROVIDES_FILE_PROTECTION)if(m.USE_ICACLS){try{m.OS_PROVIDES_FILE_PROTECTION=i.existsSync(m.ICACLS_PATH)}catch{}m.OS_PROVIDES_FILE_PROTECTION||l.warn(m.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else m.OS_PROVIDES_FILE_PROTECTION=!0}return m.prototype.setDiskRetryMode=function(f,y,v){var _=this;this._enableDiskRetryMode=m.OS_PROVIDES_FILE_PROTECTION&&f,typeof y=="number"&&y>=0&&(this._resendInterval=Math.floor(y)),typeof v=="number"&&v>=0&&(this._maxBytesOnDisk=Math.floor(v)),f&&!m.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,l.warn(m.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout(function(){_._fileCleanupTask()},m.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref()):this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer)},m.prototype.send=function(f,y){return t(this,void 0,void 0,function(){var v,_,C,P,w=this;return n(this,function(R){return f&&(v=this._redirectedHost||this._config.endpointUrl,_={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},C="",f.forEach(function(I){var z=w._stringify(I);typeof z=="string"&&(C+=z+`
`)}),C.length>0&&(C=C.substring(0,C.length-1)),P=Buffer.from?Buffer.from(C):new Buffer(C),a.gzip(P,function(I,z){var G=z;I?(l.warn(I),G=P,_.headers["Content-Length"]=P.length.toString()):(_.headers["Content-Encoding"]="gzip",_.headers["Content-Length"]=z.length.toString()),l.info(m.TAG,_),_[u.disableCollectionRequestOption]=!0;var L=function(ee){ee.setEncoding("utf-8");var ye="";ee.on("data",function($e){ye+=$e}),ee.on("end",function(){if(w._numConsecutiveFailures=0,w._enableDiskRetryMode){if(ee.statusCode===200)w._resendTimer||(w._resendTimer=setTimeout(function(){w._resendTimer=null,w._sendFirstFileOnDisk()},w._resendInterval),w._resendTimer.unref());else if(w._isRetriable(ee.statusCode))try{var $e=JSON.parse(ye),Be=[];$e.errors.forEach(function(Ge){w._isRetriable(Ge.statusCode)&&Be.push(f[Ge.index])}),Be.length>0&&w._storeToDisk(Be)}catch{w._storeToDisk(f)}}if(ee.statusCode===307||ee.statusCode===308)if(w._numConsecutiveRedirects++,w._numConsecutiveRedirects<10){var Ct=ee.headers.location?ee.headers.location.toString():null;Ct&&(w._redirectedHost=Ct,w.send(f,y))}else typeof y=="function"&&y("Error sending telemetry because of circular redirects.");else w._numConsecutiveRedirects=0,typeof y=="function"&&y(ye),l.info(m.TAG,ye),typeof w._onSuccess=="function"&&w._onSuccess(ye)})},H=d.makeRequest(w._config,v,_,L);H.on("error",function(ee){if(w._numConsecutiveFailures++,!w._enableDiskRetryMode||w._numConsecutiveFailures>0&&w._numConsecutiveFailures%m.MAX_CONNECTION_FAILURES_BEFORE_WARN===0){var ye="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";w._enableDiskRetryMode&&(ye="Ingestion endpoint could not be reached "+w._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),l.warn(m.TAG,ye,d.dumpObj(ee))}else{var ye="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";l.info(m.TAG,ye,d.dumpObj(ee))}w._onErrorHelper(ee),typeof y=="function"&&(ee&&y(d.dumpObj(ee)),y("Error sending telemetry")),w._enableDiskRetryMode&&w._storeToDisk(f)}),H.write(G),H.end()})),[2]})})},m.prototype.saveOnCrash=function(f){this._enableDiskRetryMode&&this._storeToDiskSync(this._stringify(f))},m.prototype._isRetriable=function(f){return f===206||f===408||f===429||f===439||f===500||f===503},m.prototype._runICACLS=function(f,y){var v=c.spawn(m.ICACLS_PATH,f,{windowsHide:!0});v.on("error",function(_){return y(_)}),v.on("close",function(_,C){return y(_===0?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+_+")"))})},m.prototype._runICACLSSync=function(f){if(c.spawnSync){var y=c.spawnSync(m.ICACLS_PATH,f,{windowsHide:!0});if(y.error)throw y.error;if(y.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+y.status+")")}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},m.prototype._getACLIdentity=function(f){if(m.ACL_IDENTITY)return f(null,m.ACL_IDENTITY);var y=c.spawn(m.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),v="";y.stdout.on("data",function(_){return v+=_}),y.on("error",function(_){return f(_,null)}),y.on("close",function(_,C){return m.ACL_IDENTITY=v&&v.trim(),f(_===0?null:new Error("Getting ACL identity did not succeed (PS returned code "+_+")"),m.ACL_IDENTITY)})},m.prototype._getACLIdentitySync=function(){if(m.ACL_IDENTITY)return m.ACL_IDENTITY;if(c.spawnSync){var f=c.spawnSync(m.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(f.error)throw f.error;if(f.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+f.status+")");return m.ACL_IDENTITY=f.stdout&&f.stdout.toString().trim(),m.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},m.prototype._getACLArguments=function(f,y){return[f,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",y+":(OI)(CI)F","/inheritance:r"]},m.prototype._applyACLRules=function(f,y){var v=this;if(!m.USE_ICACLS)return y(null);if(m.ACLED_DIRECTORIES[f]===void 0)m.ACLED_DIRECTORIES[f]=!1,this._getACLIdentity(function(_,C){if(_)return m.ACLED_DIRECTORIES[f]=!1,y(_);v._runICACLS(v._getACLArguments(f,C),function(P){return m.ACLED_DIRECTORIES[f]=!P,y(P)})});else return y(m.ACLED_DIRECTORIES[f]?null:new Error("Setting ACL restrictions did not succeed (cached result)"))},m.prototype._applyACLRulesSync=function(f){if(m.USE_ICACLS){if(m.ACLED_DIRECTORIES[f]===void 0){this._runICACLSSync(this._getACLArguments(f,this._getACLIdentitySync())),m.ACLED_DIRECTORIES[f]=!0;return}else if(!m.ACLED_DIRECTORIES[f])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},m.prototype._confirmDirExists=function(f,y){var v=this;i.lstat(f,function(_,C){_&&_.code==="ENOENT"?i.mkdir(f,function(P){P&&P.code!=="EEXIST"?y(P):v._applyACLRules(f,y)}):!_&&C.isDirectory()?v._applyACLRules(f,y):y(_||new Error("Path existed but was not a directory"))})},m.prototype._getShallowDirectorySize=function(f,y){i.readdir(f,function(v,_){if(v)return y(v,-1);var C=null,P=0,w=0;if(_.length===0){y(null,0);return}for(var R=0;R<_.length;R++)i.stat(o.join(f,_[R]),function(I,z){w++,I?C=I:z.isFile()&&(P+=z.size),w===_.length&&(C?y(C,-1):y(C,P))})})},m.prototype._getShallowDirectorySizeSync=function(f){for(var y=i.readdirSync(f),v=0,_=0;_<y.length;_++)v+=i.statSync(o.join(f,y[_])).size;return v},m.prototype._storeToDisk=function(f){var y=this;l.info(m.TAG,"Checking existence of data storage directory: "+this._tempDir),this._confirmDirExists(this._tempDir,function(v){if(v){l.warn(m.TAG,"Error while checking/creating directory: "+(v&&v.message)),y._onErrorHelper(v);return}y._getShallowDirectorySize(y._tempDir,function(_,C){if(_||C<0){l.warn(m.TAG,"Error while checking directory size: "+(_&&_.message)),y._onErrorHelper(_);return}else if(C>y._maxBytesOnDisk){l.warn(m.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+C);return}var P=new Date().getTime()+".ai.json",w=o.join(y._tempDir,P);l.info(m.TAG,"saving data to disk at: "+w),i.writeFile(w,y._stringify(f),{mode:384},function(R){return y._onErrorHelper(R)})})})},m.prototype._storeToDiskSync=function(f){try{l.info(m.TAG,"Checking existence of data storage directory: "+this._tempDir),i.existsSync(this._tempDir)||i.mkdirSync(this._tempDir),this._applyACLRulesSync(this._tempDir);var y=this._getShallowDirectorySizeSync(this._tempDir);if(y>this._maxBytesOnDisk){l.info(m.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+y);return}var v=new Date().getTime()+".ai.json",_=o.join(this._tempDir,v);l.info(m.TAG,"saving data before crash to disk at: "+_),i.writeFileSync(_,f,{mode:384})}catch(C){l.warn(m.TAG,"Error while saving data to disk: "+(C&&C.message)),this._onErrorHelper(C)}},m.prototype._sendFirstFileOnDisk=function(){var f=this;i.exists(this._tempDir,function(y){y&&i.readdir(f._tempDir,function(v,_){if(v)f._onErrorHelper(v);else if(_=_.filter(function(w){return o.basename(w).indexOf(".ai.json")>-1}),_.length>0){var C=_[0],P=o.join(f._tempDir,C);i.readFile(P,function(w,R){w?f._onErrorHelper(w):i.unlink(P,function(I){if(I)f._onErrorHelper(I);else try{var z=JSON.parse(R.toString());f.send(z)}catch(G){l.warn("Failed to read persisted file",G)}})})}})})},m.prototype._onErrorHelper=function(f){typeof this._onError=="function"&&this._onError(f)},m.prototype._stringify=function(f){try{return JSON.stringify(f)}catch(y){l.warn("Failed to serialize payload",y,f)}},m.prototype._fileCleanupTask=function(){var f=this;i.exists(this._tempDir,function(y){y&&i.readdir(f._tempDir,function(v,_){v?f._onErrorHelper(v):(_=_.filter(function(C){return o.basename(C).indexOf(".ai.json")>-1}),_.length>0&&_.forEach(function(C){var P=new Date(parseInt(C.split(".ai.json")[0])),w=new Date(+new Date-m.FILE_RETEMPTION_PERIOD)>P;if(w){var R=o.join(f._tempDir,C);i.unlink(R,function(I){I&&f._onErrorHelper(I)})}}))})})},m.TAG="Sender",m.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",m.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",m.ACLED_DIRECTORIES={},m.ACL_IDENTITY=null,m.WAIT_BETWEEN_RESEND=60*1e3,m.MAX_BYTES_ON_DISK=50*1024*1024,m.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,m.CLEANUP_TIMEOUT=60*60*1e3,m.FILE_RETEMPTION_PERIOD=7*24*60*60*1e3,m.TEMPDIR_PREFIX="appInsights-node",m.OS_PROVIDES_FILE_PROTECTION=!1,m.USE_ICACLS=s.type()==="Windows_NT",m}();e.exports=p}),JHt=ae((r,e)=>{"use strict";var t=Su(),n=up(),i=F0(),s=function(){function a(){}return a.createEnvelope=function(c,l,u,d,p){var m=null;switch(l){case t.TelemetryType.Trace:m=a.createTraceData(c);break;case t.TelemetryType.Dependency:m=a.createDependencyData(c);break;case t.TelemetryType.Event:m=a.createEventData(c);break;case t.TelemetryType.Exception:m=a.createExceptionData(c);break;case t.TelemetryType.Request:m=a.createRequestData(c);break;case t.TelemetryType.Metric:m=a.createMetricData(c);break;case t.TelemetryType.Availability:m=a.createAvailabilityData(c);break;case t.TelemetryType.PageView:m=a.createPageViewData(c);break}if(u&&t.domainSupportsProperties(m.baseData)){if(m&&m.baseData)if(!m.baseData.properties)m.baseData.properties=u;else for(var f in u)m.baseData.properties[f]||(m.baseData.properties[f]=u[f]);m.baseData.properties=n.validateStringMap(m.baseData.properties)}var y=p&&p.instrumentationKey||"",v=new t.Envelope;return v.data=m,v.iKey=y,v.name="Microsoft.ApplicationInsights."+y.replace(/-/g,"")+"."+m.baseType.substr(0,m.baseType.length-4),v.tags=this.getTags(d,c.tagOverrides),v.time=new Date().toISOString(),v.ver=1,v.sampleRate=p?p.samplingPercentage:100,l===t.TelemetryType.Metric&&(v.sampleRate=100),v},a.createTraceData=function(c){var l=new t.MessageData;l.message=c.message,l.properties=c.properties,isNaN(c.severity)?l.severityLevel=t.SeverityLevel.Information:l.severityLevel=c.severity;var u=new t.Data;return u.baseType=t.telemetryTypeToBaseType(t.TelemetryType.Trace),u.baseData=l,u},a.createDependencyData=function(c){var l=new t.RemoteDependencyData;typeof c.name=="string"&&(l.name=c.name.length>1024?c.name.slice(0,1021)+"...":c.name),l.data=c.data,l.target=c.target,l.duration=n.msToTimeSpan(c.duration),l.success=c.success,l.type=c.dependencyTypeName,l.properties=c.properties,l.resultCode=c.resultCode?c.resultCode+"":"",c.id?l.id=c.id:l.id=n.w3cTraceId();var u=new t.Data;return u.baseType=t.telemetryTypeToBaseType(t.TelemetryType.Dependency),u.baseData=l,u},a.createEventData=function(c){var l=new t.EventData;l.name=c.name,l.properties=c.properties,l.measurements=c.measurements;var u=new t.Data;return u.baseType=t.telemetryTypeToBaseType(t.TelemetryType.Event),u.baseData=l,u},a.createExceptionData=function(c){var l=new t.ExceptionData;l.properties=c.properties,isNaN(c.severity)?l.severityLevel=t.SeverityLevel.Error:l.severityLevel=c.severity,l.measurements=c.measurements,l.exceptions=[];var u=c.exception.stack,d=new t.ExceptionDetails;d.message=c.exception.message,d.typeName=c.exception.name,d.parsedStack=this.parseStack(u),d.hasFullStack=n.isArray(d.parsedStack)&&d.parsedStack.length>0,l.exceptions.push(d);var p=new t.Data;return p.baseType=t.telemetryTypeToBaseType(t.TelemetryType.Exception),p.baseData=l,p},a.createRequestData=function(c){var l=new t.RequestData;c.id?l.id=c.id:l.id=n.w3cTraceId(),l.name=c.name,l.url=c.url,l.source=c.source,l.duration=n.msToTimeSpan(c.duration),l.responseCode=c.resultCode?c.resultCode+"":"",l.success=c.success,l.properties=c.properties;var u=new t.Data;return u.baseType=t.telemetryTypeToBaseType(t.TelemetryType.Request),u.baseData=l,u},a.createMetricData=function(c){var l=new t.MetricData;l.metrics=[];var u=new t.DataPoint;u.count=isNaN(c.count)?1:c.count,u.kind=t.DataPointType.Aggregation,u.max=isNaN(c.max)?c.value:c.max,u.min=isNaN(c.min)?c.value:c.min,u.name=c.name,u.stdDev=isNaN(c.stdDev)?0:c.stdDev,u.value=c.value,l.metrics.push(u),l.properties=c.properties;var d=new t.Data;return d.baseType=t.telemetryTypeToBaseType(t.TelemetryType.Metric),d.baseData=l,d},a.createAvailabilityData=function(c){var l=new t.AvailabilityData;c.id?l.id=c.id:l.id=n.w3cTraceId(),l.name=c.name,l.duration=n.msToTimeSpan(c.duration),l.success=c.success,l.runLocation=c.runLocation,l.message=c.message,l.measurements=c.measurements,l.properties=c.properties;var u=new t.Data;return u.baseType=t.telemetryTypeToBaseType(t.TelemetryType.Availability),u.baseData=l,u},a.createPageViewData=function(c){var l=new t.PageViewData;l.name=c.name,l.duration=n.msToTimeSpan(c.duration),l.url=c.url,l.measurements=c.measurements,l.properties=c.properties;var u=new t.Data;return u.baseType=t.telemetryTypeToBaseType(t.TelemetryType.PageView),u.baseData=l,u},a.getTags=function(c,l){var u=i.CorrelationContextManager.getCurrentContext(),d={};if(c&&c.tags)for(var p in c.tags)d[p]=c.tags[p];if(l)for(var p in l)d[p]=l[p];return u&&(d[c.keys.operationId]=d[c.keys.operationId]||u.operation.id,d[c.keys.operationName]=d[c.keys.operationName]||u.operation.name,d[c.keys.operationParentId]=d[c.keys.operationParentId]||u.operation.parentId),d},a.parseStack=function(c){var l=void 0;if(typeof c=="string"){var u=c.split(`
`);l=[];for(var d=0,p=0,m=0;m<=u.length;m++){var f=u[m];if(o.regex.test(f)){var y=new o(u[m],d++);p+=y.sizeInBytes,l.push(y)}}var v=32*1024;if(p>v)for(var _=0,C=l.length-1,P=0,w=_,R=C;_<C;){var I=l[_].sizeInBytes,z=l[C].sizeInBytes;if(P+=I+z,P>v){var G=R-w+1;l.splice(w,G);break}w=_,R=C,_++,C--}}return l},a}(),o=function(){function a(c,l){this.sizeInBytes=0,this.level=l,this.method="<no_method>",this.assembly=n.trim(c);var u=c.match(a.regex);u&&u.length>=5&&(this.method=n.trim(u[2])||this.method,this.fileName=n.trim(u[4])||"<no_filename>",this.line=parseInt(u[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=a.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return a.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,a.baseSize=58,a}();e.exports=s}),ZHt=ae((r,e)=>{"use strict";var t=require("url"),n=P2e(),i=fH(),s=Su(),o=VHt(),a=YHt(),c=F0(),l=XHt(),u=up(),d=Oc(),p=JHt(),m=function(){function f(y){this._telemetryProcessors=[],this._enableAzureProperties=!1;var v=new n(y);this.config=v,this.context=new i,this.commonProperties={};var _=new l(this.config);this.channel=new o(function(){return v.disableAppInsights},function(){return v.maxBatchSize},function(){return v.maxBatchIntervalMs},_)}return f.prototype.trackAvailability=function(y){this.track(y,s.TelemetryType.Availability)},f.prototype.trackPageView=function(y){this.track(y,s.TelemetryType.PageView)},f.prototype.trackTrace=function(y){this.track(y,s.TelemetryType.Trace)},f.prototype.trackMetric=function(y){this.track(y,s.TelemetryType.Metric)},f.prototype.trackException=function(y){y&&y.exception&&!u.isError(y.exception)&&(y.exception=new Error(y.exception.toString())),this.track(y,s.TelemetryType.Exception)},f.prototype.trackEvent=function(y){this.track(y,s.TelemetryType.Event)},f.prototype.trackRequest=function(y){this.track(y,s.TelemetryType.Request)},f.prototype.trackDependency=function(y){y&&!y.target&&y.data&&(y.target=t.parse(y.data).host),this.track(y,s.TelemetryType.Dependency)},f.prototype.flush=function(y){this.channel.triggerSend(y?!!y.isAppCrashing:!1,y?y.callback:void 0)},f.prototype.track=function(y,v){if(y&&s.telemetryTypeToBaseType(v)){var _=p.createEnvelope(y,v,this.commonProperties,this.context,this.config);y.time&&(_.time=y.time.toISOString()),this._enableAzureProperties&&a.azureRoleEnvironmentTelemetryProcessor(_,this.context);var C=this.runTelemetryProcessors(_,y.contextObjects);C=C&&a.samplingTelemetryProcessor(_,{correlationContext:c.CorrelationContextManager.getCurrentContext()}),a.preAggregatedMetricsTelemetryProcessor(_,this.context),C&&(a.performanceMetricsTelemetryProcessor(_,this.quickPulseClient),this.channel.send(_))}else d.warn("track() requires telemetry object and telemetryType to be specified.")},f.prototype.setAutoPopulateAzureProperties=function(y){this._enableAzureProperties=y},f.prototype.addTelemetryProcessor=function(y){this._telemetryProcessors.push(y)},f.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},f.prototype.runTelemetryProcessors=function(y,v){var _=!0,C=this._telemetryProcessors.length;if(C===0)return _;v=v||{},v.correlationContext=c.CorrelationContextManager.getCurrentContext();for(var P=0;P<C;++P)try{var w=this._telemetryProcessors[P];if(w&&w.apply(null,[y,v])===!1){_=!1;break}}catch(R){_=!0,d.warn("One of telemetry processors failed, telemetry item will be sent.",R,y)}return _&&(y&&y.tags&&(y.tags=u.validateStringMap(y.tags)),y&&y.data&&y.data.baseData&&y.data.baseData.properties&&(y.data.baseData.properties=u.validateStringMap(y.data.baseData.properties))),_},f}();e.exports=m}),eWt=ae((r,e)=>{"use strict";var t=r&&r.__extends||function(){var c=function(l,u){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var m in p)Object.prototype.hasOwnProperty.call(p,m)&&(d[m]=p[m])},c(l,u)};return function(l,u){c(l,u);function d(){this.constructor=l}l.prototype=u===null?Object.create(u):(d.prototype=u.prototype,new d)}}(),n=ZHt(),i=C2e(),s=Jk(),o=Oc(),a=function(c){t(l,c);function l(){return c!==null&&c.apply(this,arguments)||this}return l.prototype.trackNodeHttpRequestSync=function(u){u&&u.request&&u.response&&u.duration?i.trackRequestSync(this,u):o.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},l.prototype.trackNodeHttpRequest=function(u){(u.duration||u.error)&&o.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),u&&u.request&&u.response?i.trackRequest(this,u):o.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},l.prototype.trackNodeHttpDependency=function(u){u&&u.request?s.trackRequest(this,u):o.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},l}(n);e.exports=a}),tWt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})}),rWt=ae(r=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.dispose=r.Configuration=r.wrapWithCorrelationContext=r.startOperation=r.getCorrelationContext=r.start=r.setup=r.liveMetricsClient=r.defaultClient=r.DistributedTracingModes=void 0;var e=F0(),t=IHt(),n=RHt(),i=gle(),s=S2e(),o=zHt(),a=Jk(),c=C2e(),l=z0(),u=Oc(),d=BHt(),p=$Ht();r.TelemetryClient=eWt(),r.Contracts=Su(),r.azureFunctionsTypes=tWt();var m;(function(Re){Re[Re.AI=0]="AI",Re[Re.AI_AND_W3C=1]="AI_AND_W3C"})(m=r.DistributedTracingModes||(r.DistributedTracingModes={}));var f=!0,y=!1,v=!0,_=!0,C=!0,P=!1,w=!0,R=!0,I=!0,z=!0,G,L=!1,H=!0,ee,ye=void 0,$e=void 0,Be,Ct,Ge,pe,Ie,Ve,lt,ut,ce=!1,ue;function Ue(Re){return r.defaultClient?u.info("The default client is already setup"):(r.defaultClient=new r.TelemetryClient(Re),Be=new t(r.defaultClient),Ct=new n(r.defaultClient),Ge=new i(r.defaultClient),pe=new s(r.defaultClient),Ie=new o(r.defaultClient),lt=new c(r.defaultClient),ut=new a(r.defaultClient),Ve||(Ve=new p.AutoCollectNativePerformance(r.defaultClient))),r.defaultClient&&r.defaultClient.channel&&r.defaultClient.channel.setUseDiskRetryCaching(I,ye,$e),we}r.setup=Ue;function ct(){return r.defaultClient?(ce=!0,Be.enable(f,y),Ct.enable(v),Ge.enable(_),pe.enable(C),Ie.enable(P,r.defaultClient.config),Ve.enable(H,ee),lt.useAutoCorrelation(z,G),lt.enable(w),ut.enable(R),r.liveMetricsClient&&L&&r.liveMetricsClient.enable(L)):u.warn("Start cannot be called before setup"),we}r.start=ct;function jt(){return z?e.CorrelationContextManager.getCurrentContext():null}r.getCorrelationContext=jt;function tr(Re,Le){return e.CorrelationContextManager.startOperation(Re,Le)}r.startOperation=tr;function se(Re,Le){return e.CorrelationContextManager.wrapCallback(Re,Le)}r.wrapWithCorrelationContext=se;var we=function(){function Re(){}return Re.setDistributedTracingMode=function(Le){return l.w3cEnabled=Le===m.AI_AND_W3C,Re},Re.setAutoCollectConsole=function(Le,ht){return ht===void 0&&(ht=!1),f=Le,y=ht,ce&&Be.enable(Le,ht),Re},Re.setAutoCollectExceptions=function(Le){return v=Le,ce&&Ct.enable(Le),Re},Re.setAutoCollectPerformance=function(Le,ht){ht===void 0&&(ht=!0),_=Le;var Ee=p.AutoCollectNativePerformance.parseEnabled(ht);return H=Ee.isEnabled,ee=Ee.disabledMetrics,ce&&(Ge.enable(Le),Ve.enable(Ee.isEnabled,Ee.disabledMetrics)),Re},Re.setAutoCollectPreAggregatedMetrics=function(Le){return C=Le,ce&&pe.enable(Le),Re},Re.setAutoCollectHeartbeat=function(Le){return P=Le,ce&&Ie.enable(Le,r.defaultClient.config),Re},Re.setAutoCollectRequests=function(Le){return w=Le,ce&&lt.enable(Le),Re},Re.setAutoCollectDependencies=function(Le){return R=Le,ce&&ut.enable(Le),Re},Re.setAutoDependencyCorrelation=function(Le,ht){return z=Le,G=ht,ce&&lt.useAutoCorrelation(Le,ht),Re},Re.setUseDiskRetryCaching=function(Le,ht,Ee){return I=Le,ye=ht,$e=Ee,r.defaultClient&&r.defaultClient.channel&&r.defaultClient.channel.setUseDiskRetryCaching(Le,ht,Ee),Re},Re.setInternalLogging=function(Le,ht){return Le===void 0&&(Le=!1),ht===void 0&&(ht=!0),u.enableDebug=Le,u.disableWarnings=!ht,Re},Re.setSendLiveMetrics=function(Le){return Le===void 0&&(Le=!1),r.defaultClient?(!r.liveMetricsClient&&Le?(r.liveMetricsClient=new d(r.defaultClient.config,null),ue=new i(r.liveMetricsClient,1e3,!0),r.liveMetricsClient.addCollector(ue),r.defaultClient.quickPulseClient=r.liveMetricsClient):r.liveMetricsClient&&r.liveMetricsClient.enable(Le),L=Le,Re):(u.warn("Live metrics client cannot be setup without the default client"),Re)},Re.start=ct,Re}();r.Configuration=we;function Ne(){l.w3cEnabled=!0,r.defaultClient=null,ce=!1,Be&&Be.dispose(),Ct&&Ct.dispose(),Ge&&Ge.dispose(),pe&&pe.dispose(),Ie&&Ie.dispose(),Ve&&Ve.dispose(),lt&&lt.dispose(),ut&&ut.dispose(),r.liveMetricsClient&&(r.liveMetricsClient.enable(!1),L=!1,r.liveMetricsClient=void 0)}r.dispose=Ne}),w2e={};O2t(w2e,{default:()=>dWt});E2e.exports=A2t(w2e);var sle=q0(require("os")),Sb=q0(require("vscode")),nWt=q0(require("https")),km=class{constructor(r){this.vscodeAPI=r}getTelemetryLevel(){let r="telemetry",e="enableTelemetry";try{let t=this.vscodeAPI.env.telemetryConfiguration;return t.isUsageEnabled&&t.isErrorsEnabled&&t.isCrashEnabled?"on":t.isErrorsEnabled&&t.isCrashEnabled?"error":"off"}catch{return this.vscodeAPI.env.isTelemetryEnabled!==void 0?this.vscodeAPI.env.isTelemetryEnabled?"on":"off":this.vscodeAPI.workspace.getConfiguration(r).get(e)?"on":"off"}}static applyReplacements(r,e){for(let t of Object.keys(r))for(let n of e)n.lookup.test(t)&&(n.replacementString!==void 0?r[t]=n.replacementString:delete r[t])}static shouldUseOneDataSystemSDK(r){return r.length===74&&r[32]==="-"&&r[41]==="-"&&r[46]==="-"&&r[51]==="-"&&r[56]==="-"&&r[69]==="-"}static getInstance(r){return km._instance||(km._instance=new km(r)),km._instance}},iWt=class{constructor(r,e,t,n,i,s){this.extensionId=r,this.extensionVersion=e,this.telemetryAppender=t,this.osShim=n,this.vscodeAPI=i,this.firstParty=!1,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this.firstParty=!!s,this.updateUserOptStatus(),i.env.onDidChangeTelemetryEnabled!==void 0?(this.disposables.push(i.env.onDidChangeTelemetryEnabled(()=>this.updateUserOptStatus())),this.disposables.push(i.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))):this.disposables.push(i.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))}updateUserOptStatus(){let r=km.getInstance(this.vscodeAPI).getTelemetryLevel();this.userOptIn=r==="on",this.errorOptIn=r==="error"||this.userOptIn,(this.userOptIn||this.errorOptIn)&&this.telemetryAppender.instantiateAppender()}cleanRemoteName(r){if(!r)return"none";let e="other";return["ssh-remote","dev-container","attached-container","wsl","codespaces"].forEach(t=>{r.indexOf(`${t}`)===0&&(e=t)}),e}get extension(){return this._extension===void 0&&(this._extension=this.vscodeAPI.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(r,e){if(r===null||typeof r!="object"||typeof e!="function")return r;let t={};for(let n in r)t[n]=e(n,r[n]);return t}shouldSendErrorTelemetry(){return this.errorOptIn===!1?!1:this.firstParty?!(this.vscodeAPI.env.remoteName&&this.cleanRemoteName(this.vscodeAPI.env.remoteName)==="other"):!0}getCommonProperties(){let r={};if(r["common.os"]=this.osShim.platform,r["common.nodeArch"]=this.osShim.architecture,r["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),r["common.extname"]=this.extensionId,r["common.extversion"]=this.extensionVersion,this.vscodeAPI&&this.vscodeAPI.env){switch(r["common.vscodemachineid"]=this.vscodeAPI.env.machineId,r["common.vscodesessionid"]=this.vscodeAPI.env.sessionId,r["common.vscodeversion"]=this.vscodeAPI.version,r["common.isnewappinstall"]=this.vscodeAPI.env.isNewAppInstall?this.vscodeAPI.env.isNewAppInstall.toString():"false",r["common.product"]=this.vscodeAPI.env.appHost,this.vscodeAPI.env.uiKind){case this.vscodeAPI.UIKind.Web:r["common.uikind"]="web";break;case this.vscodeAPI.UIKind.Desktop:r["common.uikind"]="desktop";break;default:r["common.uikind"]="unknown"}r["common.remotename"]=this.cleanRemoteName(this.vscodeAPI.env.remoteName)}return r}anonymizeFilePaths(r,e){let t;if(r==null)return"";let n=[];this.vscodeAPI.env.appRoot!==""&&n.push(new RegExp(this.vscodeAPI.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&n.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let i=r;if(e){let s=[];for(let l of n)for(;(t=l.exec(r))&&t;)s.push([t.index,l.lastIndex]);let o=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,a=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,c=0;for(i="";(t=a.exec(r))&&t;)t[0]&&!o.test(t[0])&&s.every(([l,u])=>t.index<l||t.index>=u)&&(i+=r.substring(c,t.index)+"<REDACTED: user-file-path>",c=a.lastIndex);c<r.length&&(i+=r.substr(c))}for(let s of n)i=i.replace(s,"");return i}removePropertiesWithPossibleUserInfo(r){if(typeof r!="object")return;let e={};for(let t of Object.keys(r)){let n=r[t];if(!n)continue;let i=/@[a-zA-Z0-9-.]+/,s=/(key|token|sig|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/,o=/xox[pbaors]-[a-zA-Z0-9]+-[a-zA-Z0-9-]+?/;s.test(n.toLowerCase())?e[t]="<REDACTED: secret>":i.test(n)?e[t]="<REDACTED: email>":o.test(n)?e[t]="<REDACTED: token>":e[t]=n}return e}get telemetryLevel(){switch(km.getInstance(this.vscodeAPI).getTelemetryLevel()){case"on":return"all";case"error":return"error";case"off":return"off"}}internalSendTelemetryEvent(r,e,t,n,i){if((this.userOptIn||i)&&r!==""){if(e=GC(GC({},e),this.getCommonProperties()),n){let s=this.cloneAndChange(e,(o,a)=>this.anonymizeFilePaths(a,this.firstParty));e=this.removePropertiesWithPossibleUserInfo(s)}e=e??{},t=t??{},r=`${this.extensionId}/${r}`,this.telemetryAppender.logEvent(r,{properties:e,measurements:t})}}sendTelemetryEvent(r,e,t){this.internalSendTelemetryEvent(r,e,t,!0,!1)}sendRawTelemetryEvent(r,e,t){this.internalSendTelemetryEvent(r,e,t,!1,!1)}sendDangerousTelemetryEvent(r,e,t,n=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryEvent(r,e,t,n,!0)}internalSendTelemetryErrorEvent(r,e,t,n,i){if((this.shouldSendErrorTelemetry()||i)&&r!==""){if(e=GC(GC({},e),this.getCommonProperties()),n){let s=this.cloneAndChange(e,(o,a)=>this.anonymizeFilePaths(a,this.firstParty));e=this.removePropertiesWithPossibleUserInfo(s)}e=e??{},t=t??{},r=`${this.extensionId}/${r}`,this.telemetryAppender.logEvent(r,{properties:e,measurements:t})}}sendTelemetryErrorEvent(r,e,t){this.internalSendTelemetryErrorEvent(r,e,t,!0,!1)}sendDangerousTelemetryErrorEvent(r,e,t,n=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryErrorEvent(r,e,t,n,!0)}internalSendTelemetryException(r,e,t,n,i){if((this.shouldSendErrorTelemetry()||i)&&r){if(e=GC(GC({},e),this.getCommonProperties()),n){let s=this.cloneAndChange(e,(o,a)=>this.anonymizeFilePaths(a,this.firstParty));r.stack&&(r.stack=this.anonymizeFilePaths(r.stack,this.firstParty)),e=this.removePropertiesWithPossibleUserInfo(s)}e=e??{},t=t??{},this.telemetryAppender.logException(r,{properties:e,measurements:t})}}sendTelemetryException(r,e,t){this.internalSendTelemetryException(r,e,t,!0,!1)}sendDangerousTelemetryException(r,e,t,n=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryException(r,e,t,n,!0)}dispose(){return this.telemetryAppender.flush(),Promise.all(this.disposables.map(r=>r.dispose()))}},sWt=class{constructor(r,e){this._instantiationStatus=0,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=e,this._key=r}logEvent(r,e){if(!this._telemetryClient){this._instantiationStatus!==2&&this._eventQueue.push({eventName:r,data:e});return}this._telemetryClient.logEvent(r,e)}logException(r,e){if(!this._telemetryClient){this._instantiationStatus!==2&&this._exceptionQueue.push({exception:r,data:e});return}this._telemetryClient.logException(r,e)}async flush(){this._telemetryClient&&(await this._telemetryClient.flush(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:r,data:e})=>this.logEvent(r,e)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:r,data:e})=>this.logException(r,e)),this._exceptionQueue=[]}instantiateAppender(){this._instantiationStatus===0&&(this._instantiationStatus=1,this._clientFactory(this._key).then(r=>{this._telemetryClient=r,this._instantiationStatus=2,this._flushQueues()}).catch(r=>{console.error(r),this._instantiationStatus=2}))}},oWt=async(r,e,t)=>{let n=await Promise.resolve().then(()=>q0(qGe())),i=await Promise.resolve().then(()=>q0(k2t())),s=new n.AppInsightsCore,o=new i.PostChannel,a={instrumentationKey:r,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[o]]};if(t){a.extensionConfig={};let l={alwaysUseXhrOverride:!0,httpXHROverride:t};a.extensionConfig[o.identifier]=l}let c=e.workspace.getConfiguration("telemetry").get("internalTesting");return s.initialize(a,[]),s.addTelemetryInitializer(l=>{!c||(l.ext=l.ext??{},l.ext.utc=l.ext.utc??{},l.ext.utc.flags=8462029)}),s},aWt=async(r,e,t)=>{let n=await oWt(r,e,t);return{logEvent:(i,s)=>{try{n?.track({name:i,baseData:{name:i,properties:s?.properties,measurements:s?.measurements}})}catch(o){throw new Error(`Failed to log event to app insights!
`+o.message)}},logException:(i,s)=>{throw new Error("1DS SDK does not support logging exceptions, please use logEvent for exception tracking")},flush:async()=>{try{n?.unload()}catch(i){throw new Error(`Failed to flush app insights!
`+i.message)}}}},cWt=async(r,e)=>{let t;try{process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL="1";let n=await Promise.resolve().then(()=>q0(rWt()));n.defaultClient?(t=new n.TelemetryClient(r),t.channel.setUseDiskRetryCaching(!0)):(n.setup(r).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setAutoCollectHeartbeat(!1).setUseDiskRetryCaching(!0).start(),t=n.defaultClient),Sb&&Sb.env&&(t.context.tags[t.context.keys.userId]=Sb.env.machineId,t.context.tags[t.context.keys.sessionId]=Sb.env.sessionId,t.context.tags[t.context.keys.cloudRole]=Sb.env.appName,t.context.tags[t.context.keys.cloudRoleInstance]=Sb.env.appName),r&&r.indexOf("AIF-")===0&&(t.config.endpointUrl="https://mobile.events.data.microsoft.com/collect/v1")}catch(n){return Promise.reject(`Failed to initialize app insights!
`+n.message)}return e!=null&&e.length&&lWt(t,e),{logEvent:(n,i)=>{try{t?.trackEvent({name:n,properties:i?.properties,measurements:i?.measurements})}catch(s){throw new Error(`Failed to log event to app insights!
`+s.message)}},logException:(n,i)=>{try{t?.trackException({exception:n,properties:i?.properties,measurements:i?.measurements})}catch(s){throw new Error(`Failed to log exception to app insights!
`+s.message)}},flush:async()=>{try{t?.flush()}catch(n){throw new Error(`Failed to flush app insights!
`+n.message)}}}};function lWt(r,e){r.addTelemetryProcessor(t=>(Array.isArray(t.tags)?t.tags.forEach(n=>km.applyReplacements(n,e)):t.tags&&km.applyReplacements(t.tags,e),t.data.baseData&&km.applyReplacements(t.data.baseData,e),!0))}function uWt(){return{sendPOST:(r,e)=>{let t={method:"POST",headers:x2t(GC({},r.headers),{"Content-Type":"application/json","Content-Length":Buffer.byteLength(r.data)})};try{let n=nWt.request(r.urlString,t,i=>{i.on("data",function(s){e(i.statusCode??200,i.headers,s.toString())}),i.on("error",function(){e(0,{})})});n.write(r.data),n.end()}catch{e(0,{})}}}}var dWt=class extends iWt{constructor(r,e,t,n,i){let s=a=>cWt(a,i);km.shouldUseOneDataSystemSDK(t)&&(s=a=>aWt(a,Sb,uWt()));let o=new sWt(t,s);t&&(t.indexOf("AIF-")===0||km.shouldUseOneDataSystemSDK(t))&&(n=!0),super(r,e,o,{release:sle.release(),platform:sle.platform(),architecture:sle.arch()},Sb,n)}};});var I2e=O(gH=>{"use strict";Object.defineProperty(gH,"__esModule",{value:!0});gH.TimedAction=void 0;var yle=class{constructor(e,t,n,i="",s=""){this.reporter=e,this.view=t,this.action=n,this.target=i,this.source=s,this.properties={},this.measures={},this.start=Date.now()}withAdditionalProperties(e){return Object.assign(this.properties,e),this}withAdditionalMeasures(e){return Object.assign(this.measures,e),this}send(){this.reporter.createActionEvent(this.view,this.action,this.source,this.target,Date.now()-this.start).withAdditionalProperties(this.properties).withAdditionalMeasurements(this.measures).send()}};gH.TimedAction=yle});var x2e=O(Zk=>{"use strict";var pWt=Zk&&Zk.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})};Object.defineProperty(Zk,"__esModule",{value:!0});var mWt=T2e(),hWt=I2e(),fWt=["redmond.corp.microsoft.com","northamerica.corp.microsoft.com","fareast.corp.microsoft.com","ntdev.corp.microsoft.com","wingroup.corp.microsoft.com","southpacific.corp.microsoft.com","wingroup.windeploy.ntdev.microsoft.com","ddnet.microsoft.com","europe.corp.microsoft.com"];function gWt(){let r=process.env.USERDNSDOMAIN;if(!r)return!1;let e=r.toLowerCase();return fWt.some(t=>e===t)}var yWt={"common.msftInternal":gWt()?1:0},R2e={};try{let r=require("azdata");R2e["common.adsversion"]=r?.version}catch{}var wb=class{constructor(e,t,n,i){this.reporter=e,this.eventName=t,this.properties=n,this.measurements=i,this.properties=n||{},Object.assign(this.properties,R2e),this.measurements=i||{},Object.assign(this.measurements,yWt)}send(){var e;try{(e=this.reporter)===null||e===void 0||e.sendTelemetryEvent(this.eventName,this.properties,this.measurements)}catch(t){let n=t instanceof Error?t.message:t;console.error(`Error sending ${this.eventName} event ${n}`)}}withAdditionalProperties(e){return Object.assign(this.properties,e),this}withAdditionalMeasurements(e){return Object.assign(this.measurements,e),this}withConnectionInfo(e){return typeof e=="object"?Object.assign(this.properties,{authenticationType:e.authenticationType,providerName:e.providerName}):console.error(`AdsTelemetryReporter received invalid ConnectionInfo object of type ${typeof e}`),this}withServerInfo(e){var t,n,i;return typeof e=="object"?Object.assign(this.properties,{connectionType:e.isCloud!==void 0?e.isCloud?"Azure":"Standalone":"",serverVersion:(t=e.serverVersion)!==null&&t!==void 0?t:"",serverEdition:(n=e.serverEdition)!==null&&n!==void 0?n:"",serverEngineEdition:(i=e.engineEditionId)!==null&&i!==void 0?i:""}):console.error(`AdsTelemetryReporter received invalid ServerInfo object of type ${typeof e}`),this}},vle=class{constructor(e,t,n){var i,s;this._telemetryReporter=void 0;try{this._telemetryReporter=new mWt.default(e,t,n)}catch(o){console.error(`Error initializing TelemetryReporter for '${e}'. ${(s=(i=o)===null||i===void 0?void 0:i.message)!==null&&s!==void 0?s:o}`)}}createViewEvent(e){return new wb(this._telemetryReporter,"view",{view:e})}sendViewEvent(e){this.createViewEvent(e).send()}createActionEvent(e,t,n="",i="",s){let o=s?{durationInMs:s}:{};return new wb(this._telemetryReporter,"action",{view:e,action:t,target:n,source:i},o)}sendActionEvent(e,t,n="",i="",s){this.createActionEvent(e,t,n,i,s).send()}createTimedAction(e,t,n,i){return new hWt.TimedAction(this,e,t,n,i)}createMetricsEvent(e,t=""){return new wb(this._telemetryReporter,"metrics",{groupName:t},e)}sendMetricsEvent(e,t=""){this.createMetricsEvent(e,t).send()}createErrorEvent(e,t,n="",i=""){return new wb(this._telemetryReporter,"error",{view:e,name:t,errorCode:n,errorType:i})}sendErrorEvent(e,t,n="",i=""){this.createErrorEvent(e,t,n,i).send()}createErrorEvent2(e,t,n=void 0,i=!1,s="",o=""){let a={view:e,name:t,errorCode:s,errorType:o};if(n instanceof Error){a.message=i===!0?n.message:"";let c=n.stack||"";if(i!==!0&&n.message){let l=new RegExp(n.message,"g");c=c.replace(l,"<REDACTED: error-message>")}a.stack=c}else a.message=i===!0?n?.toString():"",a.stack="";return new wb(this._telemetryReporter,"error",a)}sendErrorEvent2(e,t,n=void 0,i=!1,s="",o=""){this.createErrorEvent2(e,t,n,i,s,o).send()}createTelemetryEvent(e,t,n){return new wb(this._telemetryReporter,e,t,n)}sendTelemetryEvent(e,t,n){this.createTelemetryEvent(e,t,n).send()}dispose(){var e;return pWt(this,void 0,void 0,function*(){yield(e=this._telemetryReporter)===null||e===void 0?void 0:e.dispose()})}};Zk.default=vle});var F2e=O((Bxr,z2e)=>{"use strict";var bWt=require("child_process"),_Wt=require("os");z2e.exports=function(e,t,n){var i=process.platform;i==="linux"&&_Wt.release().indexOf("Microsoft")!==-1&&(i="win32");var s;switch(i){case"win32":{s="cmd.exe";break}case"darwin":{s="open";break}default:{s="xdg-open";break}}return typeof e=="string"&&(e=[e]),typeof t=="function"&&(n=t,t={}),t&&typeof t=="object"&&t.command&&(i==="win32"?e=[t.command].concat(e):s=t.command),i==="win32"&&(e=e.map(function(o){return o.replace(/[&^]/g,"^$&")}),e=["/c","start",'""'].concat(e)),bWt.execFile(s,e,t,n)}});var G0=O(ul=>{"use strict";Object.defineProperty(ul,"__esModule",{value:!0});ul.stringArray=ul.array=ul.func=ul.error=ul.number=ul.string=ul.boolean=void 0;function SWt(r){return r===!0||r===!1}ul.boolean=SWt;function B2e(r){return typeof r=="string"||r instanceof String}ul.string=B2e;function CWt(r){return typeof r=="number"||r instanceof Number}ul.number=CWt;function PWt(r){return r instanceof Error}ul.error=PWt;function wWt(r){return typeof r=="function"}ul.func=wWt;function G2e(r){return Array.isArray(r)}ul.array=G2e;function EWt(r){return G2e(r)&&r.every(e=>B2e(e))}ul.stringArray=EWt});var Zle=O(Zr=>{"use strict";Object.defineProperty(Zr,"__esModule",{value:!0});Zr.Message=Zr.NotificationType9=Zr.NotificationType8=Zr.NotificationType7=Zr.NotificationType6=Zr.NotificationType5=Zr.NotificationType4=Zr.NotificationType3=Zr.NotificationType2=Zr.NotificationType1=Zr.NotificationType0=Zr.NotificationType=Zr.RequestType9=Zr.RequestType8=Zr.RequestType7=Zr.RequestType6=Zr.RequestType5=Zr.RequestType4=Zr.RequestType3=Zr.RequestType2=Zr.RequestType1=Zr.RequestType=Zr.RequestType0=Zr.AbstractMessageSignature=Zr.ParameterStructures=Zr.ResponseError=Zr.ErrorCodes=void 0;var VC=G0(),xle;(function(r){r.ParseError=-32700,r.InvalidRequest=-32600,r.MethodNotFound=-32601,r.InvalidParams=-32602,r.InternalError=-32603,r.jsonrpcReservedErrorRangeStart=-32099,r.serverErrorStart=-32099,r.MessageWriteError=-32099,r.MessageReadError=-32098,r.PendingResponseRejected=-32097,r.ConnectionInactive=-32096,r.ServerNotInitialized=-32002,r.UnknownErrorCode=-32001,r.jsonrpcReservedErrorRangeEnd=-32e3,r.serverErrorEnd=-32e3})(xle||(Zr.ErrorCodes=xle={}));var Ole=class r extends Error{constructor(e,t,n){super(t),this.code=VC.number(e)?e:xle.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,r.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};Zr.ResponseError=Ole;var Cu=class r{constructor(e){this.kind=e}static is(e){return e===r.auto||e===r.byName||e===r.byPosition}toString(){return this.kind}};Zr.ParameterStructures=Cu;Cu.auto=new Cu("auto");Cu.byPosition=new Cu("byPosition");Cu.byName=new Cu("byName");var Xs=class{constructor(e,t){this.method=e,this.numberOfParams=t}get parameterStructures(){return Cu.auto}};Zr.AbstractMessageSignature=Xs;var Ale=class extends Xs{constructor(e){super(e,0)}};Zr.RequestType0=Ale;var Nle=class extends Xs{constructor(e,t=Cu.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};Zr.RequestType=Nle;var Dle=class extends Xs{constructor(e,t=Cu.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};Zr.RequestType1=Dle;var Mle=class extends Xs{constructor(e){super(e,2)}};Zr.RequestType2=Mle;var kle=class extends Xs{constructor(e){super(e,3)}};Zr.RequestType3=kle;var Lle=class extends Xs{constructor(e){super(e,4)}};Zr.RequestType4=Lle;var qle=class extends Xs{constructor(e){super(e,5)}};Zr.RequestType5=qle;var zle=class extends Xs{constructor(e){super(e,6)}};Zr.RequestType6=zle;var Fle=class extends Xs{constructor(e){super(e,7)}};Zr.RequestType7=Fle;var jle=class extends Xs{constructor(e){super(e,8)}};Zr.RequestType8=jle;var Ule=class extends Xs{constructor(e){super(e,9)}};Zr.RequestType9=Ule;var Ble=class extends Xs{constructor(e,t=Cu.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};Zr.NotificationType=Ble;var Gle=class extends Xs{constructor(e){super(e,0)}};Zr.NotificationType0=Gle;var $le=class extends Xs{constructor(e,t=Cu.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};Zr.NotificationType1=$le;var Vle=class extends Xs{constructor(e){super(e,2)}};Zr.NotificationType2=Vle;var Hle=class extends Xs{constructor(e){super(e,3)}};Zr.NotificationType3=Hle;var Wle=class extends Xs{constructor(e){super(e,4)}};Zr.NotificationType4=Wle;var Kle=class extends Xs{constructor(e){super(e,5)}};Zr.NotificationType5=Kle;var Qle=class extends Xs{constructor(e){super(e,6)}};Zr.NotificationType6=Qle;var Yle=class extends Xs{constructor(e){super(e,7)}};Zr.NotificationType7=Yle;var Xle=class extends Xs{constructor(e){super(e,8)}};Zr.NotificationType8=Xle;var Jle=class extends Xs{constructor(e){super(e,9)}};Zr.NotificationType9=Jle;var $2e;(function(r){function e(i){let s=i;return s&&VC.string(s.method)&&(VC.string(s.id)||VC.number(s.id))}r.isRequest=e;function t(i){let s=i;return s&&VC.string(s.method)&&i.id===void 0}r.isNotification=t;function n(i){let s=i;return s&&(s.result!==void 0||!!s.error)&&(VC.string(s.id)||VC.number(s.id)||s.id===null)}r.isResponse=n})($2e||(Zr.Message=$2e={}))});var tue=O(Eb=>{"use strict";var V2e;Object.defineProperty(Eb,"__esModule",{value:!0});Eb.LRUCache=Eb.LinkedMap=Eb.Touch=void 0;var dl;(function(r){r.None=0,r.First=1,r.AsOld=r.First,r.Last=2,r.AsNew=r.Last})(dl||(Eb.Touch=dl={}));var CH=class{constructor(){this[V2e]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=dl.None){let n=this._map.get(e);if(n)return t!==dl.None&&this.touch(n,t),n.value}set(e,t,n=dl.None){let i=this._map.get(e);if(i)i.value=t,n!==dl.None&&this.touch(i,n);else{switch(i={key:e,value:t,next:void 0,previous:void 0},n){case dl.None:this.addItemLast(i);break;case dl.First:this.addItemFirst(i);break;case dl.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let n=this._state,i=this._head;for(;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,t=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){let i={value:t.key,done:!1};return t=t.next,i}else return{value:void 0,done:!0}}};return n}values(){let e=this._state,t=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){let i={value:t.value,done:!1};return t=t.next,i}else return{value:void 0,done:!0}}};return n}entries(){let e=this._state,t=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){let i={value:[t.key,t.value],done:!1};return t=t.next,i}else return{value:void 0,done:!0}}};return n}[(V2e=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==dl.First&&t!==dl.Last)){if(t===dl.First){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===dl.Last){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((t,n)=>{e.push([n,t])}),e}fromJSON(e){this.clear();for(let[t,n]of e)this.set(t,n)}};Eb.LinkedMap=CH;var eue=class extends CH{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=dl.AsNew){return super.get(e,t)}peek(e){return super.get(e,dl.None)}set(e,t){return super.set(e,t,dl.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Eb.LRUCache=eue});var W2e=O(PH=>{"use strict";Object.defineProperty(PH,"__esModule",{value:!0});PH.Disposable=void 0;var H2e;(function(r){function e(t){return{dispose:t}}r.create=e})(H2e||(PH.Disposable=H2e={}))});var Tb=O(iue=>{"use strict";Object.defineProperty(iue,"__esModule",{value:!0});var rue;function nue(){if(rue===void 0)throw new Error("No runtime abstraction layer installed");return rue}(function(r){function e(t){if(t===void 0)throw new Error("No runtime abstraction layer provided");rue=t}r.install=e})(nue||(nue={}));iue.default=nue});var V0=O($0=>{"use strict";Object.defineProperty($0,"__esModule",{value:!0});$0.Emitter=$0.Event=void 0;var TWt=Tb(),K2e;(function(r){let e={dispose(){}};r.None=function(){return e}})(K2e||($0.Event=K2e={}));var sue=class{add(e,t=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let n=!1;for(let i=0,s=this._callbacks.length;i<s;i++)if(this._callbacks[i]===e)if(this._contexts[i]===t){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let t=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let s=0,o=n.length;s<o;s++)try{t.push(n[s].apply(i[s],e))}catch(a){(0,TWt.default)().console.error(a)}return t}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},wH=class r{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,n)=>{this._callbacks||(this._callbacks=new sue),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t);let i={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,t),i.dispose=r._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(n)&&n.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};$0.Emitter=wH;wH._noop=function(){}});var IH=O(H0=>{"use strict";Object.defineProperty(H0,"__esModule",{value:!0});H0.CancellationTokenSource=H0.CancellationToken=void 0;var IWt=Tb(),RWt=G0(),oue=V0(),EH;(function(r){r.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:oue.Event.None}),r.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:oue.Event.None});function e(t){let n=t;return n&&(n===r.None||n===r.Cancelled||RWt.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}r.is=e})(EH||(H0.CancellationToken=EH={}));var xWt=Object.freeze(function(r,e){let t=(0,IWt.default)().timer.setTimeout(r.bind(e),0);return{dispose(){t.dispose()}}}),TH=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?xWt:(this._emitter||(this._emitter=new oue.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},aue=class{get token(){return this._token||(this._token=new TH),this._token}cancel(){this._token?this._token.cancel():this._token=EH.Cancelled}dispose(){this._token?this._token instanceof TH&&this._token.dispose():this._token=EH.None}};H0.CancellationTokenSource=aue});var Q2e=O(W0=>{"use strict";Object.defineProperty(W0,"__esModule",{value:!0});W0.SharedArrayReceiverStrategy=W0.SharedArraySenderStrategy=void 0;var OWt=IH(),nL;(function(r){r.Continue=0,r.Cancelled=1})(nL||(nL={}));var cue=class{constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let t=new SharedArrayBuffer(4),n=new Int32Array(t,0,1);n[0]=nL.Continue,this.buffers.set(e.id,t),e.$cancellationData=t}async sendCancellation(e,t){let n=this.buffers.get(t);if(n===void 0)return;let i=new Int32Array(n,0,1);Atomics.store(i,0,nL.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};W0.SharedArraySenderStrategy=cue;var lue=class{constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===nL.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},uue=class{constructor(e){this.token=new lue(e)}cancel(){}dispose(){}},due=class{constructor(){this.kind="request"}createCancellationTokenSource(e){let t=e.$cancellationData;return t===void 0?new OWt.CancellationTokenSource:new uue(t)}};W0.SharedArrayReceiverStrategy=due});var mue=O(RH=>{"use strict";Object.defineProperty(RH,"__esModule",{value:!0});RH.Semaphore=void 0;var AWt=Tb(),pue=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((t,n)=>{this._waiting.push({thunk:e,resolve:t,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,AWt.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let t=e.thunk();t instanceof Promise?t.then(n=>{this._active--,e.resolve(n),this.runNext()},n=>{this._active--,e.reject(n),this.runNext()}):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}};RH.Semaphore=pue});var X2e=O(Ib=>{"use strict";Object.defineProperty(Ib,"__esModule",{value:!0});Ib.ReadableStreamMessageReader=Ib.AbstractMessageReader=Ib.MessageReader=void 0;var fue=Tb(),K0=G0(),hue=V0(),NWt=mue(),Y2e;(function(r){function e(t){let n=t;return n&&K0.func(n.listen)&&K0.func(n.dispose)&&K0.func(n.onError)&&K0.func(n.onClose)&&K0.func(n.onPartialMessage)}r.is=e})(Y2e||(Ib.MessageReader=Y2e={}));var xH=class{constructor(){this.errorEmitter=new hue.Emitter,this.closeEmitter=new hue.Emitter,this.partialMessageEmitter=new hue.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${K0.string(e.message)?e.message:"unknown"}`)}};Ib.AbstractMessageReader=xH;var gue;(function(r){function e(t){let n,i,s,o=new Map,a,c=new Map;if(t===void 0||typeof t=="string")n=t??"utf-8";else{if(n=t.charset??"utf-8",t.contentDecoder!==void 0&&(s=t.contentDecoder,o.set(s.name,s)),t.contentDecoders!==void 0)for(let l of t.contentDecoders)o.set(l.name,l);if(t.contentTypeDecoder!==void 0&&(a=t.contentTypeDecoder,c.set(a.name,a)),t.contentTypeDecoders!==void 0)for(let l of t.contentTypeDecoders)c.set(l.name,l)}return a===void 0&&(a=(0,fue.default)().applicationJson.decoder,c.set(a.name,a)),{charset:n,contentDecoder:s,contentDecoders:o,contentTypeDecoder:a,contentTypeDecoders:c}}r.fromOptions=e})(gue||(gue={}));var yue=class extends xH{constructor(e,t){super(),this.readable=e,this.options=gue.fromOptions(t),this.buffer=(0,fue.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new NWt.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let t=this.readable.onData(n=>{this.onData(n)});return this.readable.onError(n=>this.fireError(n)),this.readable.onClose(()=>this.fireClose()),t}onData(e){try{for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let n=this.buffer.tryReadHeaders(!0);if(!n)return;let i=n.get("content-length");if(!i){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(n))}`));return}let s=parseInt(i);if(isNaN(s)){this.fireError(new Error(`Content-Length value must be a number. Got ${i}`));return}this.nextMessageLength=s}let t=this.buffer.tryReadBody(this.nextMessageLength);if(t===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let n=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(t):t,i=await this.options.contentTypeDecoder.decode(n,this.options);this.callback(i)}).catch(n=>{this.fireError(n)})}}catch(t){this.fireError(t)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,fue.default)().timer.setTimeout((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};Ib.ReadableStreamMessageReader=yue});var r$e=O(Rb=>{"use strict";Object.defineProperty(Rb,"__esModule",{value:!0});Rb.WriteableStreamMessageWriter=Rb.AbstractMessageWriter=Rb.MessageWriter=void 0;var J2e=Tb(),iL=G0(),DWt=mue(),Z2e=V0(),MWt="Content-Length: ",e$e=`\r
`,t$e;(function(r){function e(t){let n=t;return n&&iL.func(n.dispose)&&iL.func(n.onClose)&&iL.func(n.onError)&&iL.func(n.write)}r.is=e})(t$e||(Rb.MessageWriter=t$e={}));var OH=class{constructor(){this.errorEmitter=new Z2e.Emitter,this.closeEmitter=new Z2e.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${iL.string(e.message)?e.message:"unknown"}`)}};Rb.AbstractMessageWriter=OH;var vue;(function(r){function e(t){return t===void 0||typeof t=="string"?{charset:t??"utf-8",contentTypeEncoder:(0,J2e.default)().applicationJson.encoder}:{charset:t.charset??"utf-8",contentEncoder:t.contentEncoder,contentTypeEncoder:t.contentTypeEncoder??(0,J2e.default)().applicationJson.encoder}}r.fromOptions=e})(vue||(vue={}));var bue=class extends OH{constructor(e,t){super(),this.writable=e,this.options=vue.fromOptions(t),this.errorCount=0,this.writeSemaphore=new DWt.Semaphore(1),this.writable.onError(n=>this.fireError(n)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(n=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(n):n).then(n=>{let i=[];return i.push(MWt,n.byteLength.toString(),e$e),i.push(e$e),this.doWrite(e,i,n)},n=>{throw this.fireError(n),n}))}async doWrite(e,t,n){try{return await this.writable.write(t.join(""),"ascii"),this.writable.write(n)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){this.writable.end()}};Rb.WriteableStreamMessageWriter=bue});var n$e=O(AH=>{"use strict";Object.defineProperty(AH,"__esModule",{value:!0});AH.AbstractMessageBuffer=void 0;var kWt=13,LWt=10,qWt=`\r
`,_ue=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let t=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(t),this._totalLength+=t.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let t=0,n=0,i=0,s=0;e:for(;n<this._chunks.length;){let l=this._chunks[n];for(i=0;i<l.length;){switch(l[i]){case kWt:switch(t){case 0:t=1;break;case 2:t=3;break;default:t=0}break;case LWt:switch(t){case 1:t=2;break;case 3:t=4,i++;break e;default:t=0}break;default:t=0}i++}s+=l.byteLength,n++}if(t!==4)return;let o=this._read(s+i),a=new Map,c=this.toString(o,"ascii").split(qWt);if(c.length<2)return a;for(let l=0;l<c.length-2;l++){let u=c[l],d=u.indexOf(":");if(d===-1)throw new Error(`Message header must separate key and value using ':'
${u}`);let p=u.substr(0,d),m=u.substr(d+1).trim();a.set(e?p.toLowerCase():p,m)}return a}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let s=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(s)}if(this._chunks[0].byteLength>e){let s=this._chunks[0],o=this.asNative(s,e);return this._chunks[0]=s.slice(e),this._totalLength-=e,o}let t=this.allocNative(e),n=0,i=0;for(;e>0;){let s=this._chunks[i];if(s.byteLength>e){let o=s.slice(0,e);t.set(o,n),n+=e,this._chunks[i]=s.slice(e),this._totalLength-=e,e-=e}else t.set(s,n),n+=s.byteLength,this._chunks.shift(),this._totalLength-=s.byteLength,e-=s.byteLength}return t}};AH.AbstractMessageBuffer=_ue});var c$e=O(Gn=>{"use strict";Object.defineProperty(Gn,"__esModule",{value:!0});Gn.createMessageConnection=Gn.ConnectionOptions=Gn.MessageStrategy=Gn.CancellationStrategy=Gn.CancellationSenderStrategy=Gn.CancellationReceiverStrategy=Gn.RequestCancellationReceiverStrategy=Gn.IdCancellationReceiverStrategy=Gn.ConnectionStrategy=Gn.ConnectionError=Gn.ConnectionErrors=Gn.LogTraceNotification=Gn.SetTraceNotification=Gn.TraceFormat=Gn.TraceValues=Gn.Trace=Gn.NullLogger=Gn.ProgressType=Gn.ProgressToken=void 0;var i$e=Tb(),Co=G0(),wn=Zle(),s$e=tue(),sL=V0(),Sue=IH(),cL;(function(r){r.type=new wn.NotificationType("$/cancelRequest")})(cL||(cL={}));var Cue;(function(r){function e(t){return typeof t=="string"||typeof t=="number"}r.is=e})(Cue||(Gn.ProgressToken=Cue={}));var oL;(function(r){r.type=new wn.NotificationType("$/progress")})(oL||(oL={}));var Pue=class{constructor(){}};Gn.ProgressType=Pue;var wue;(function(r){function e(t){return Co.func(t)}r.is=e})(wue||(wue={}));Gn.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var Wi;(function(r){r[r.Off=0]="Off",r[r.Messages=1]="Messages",r[r.Compact=2]="Compact",r[r.Verbose=3]="Verbose"})(Wi||(Gn.Trace=Wi={}));var o$e;(function(r){r.Off="off",r.Messages="messages",r.Compact="compact",r.Verbose="verbose"})(o$e||(Gn.TraceValues=o$e={}));(function(r){function e(n){if(!Co.string(n))return r.Off;switch(n=n.toLowerCase(),n){case"off":return r.Off;case"messages":return r.Messages;case"compact":return r.Compact;case"verbose":return r.Verbose;default:return r.Off}}r.fromString=e;function t(n){switch(n){case r.Off:return"off";case r.Messages:return"messages";case r.Compact:return"compact";case r.Verbose:return"verbose";default:return"off"}}r.toString=t})(Wi||(Gn.Trace=Wi={}));var ld;(function(r){r.Text="text",r.JSON="json"})(ld||(Gn.TraceFormat=ld={}));(function(r){function e(t){return Co.string(t)?(t=t.toLowerCase(),t==="json"?r.JSON:r.Text):r.Text}r.fromString=e})(ld||(Gn.TraceFormat=ld={}));var Eue;(function(r){r.type=new wn.NotificationType("$/setTrace")})(Eue||(Gn.SetTraceNotification=Eue={}));var NH;(function(r){r.type=new wn.NotificationType("$/logTrace")})(NH||(Gn.LogTraceNotification=NH={}));var aL;(function(r){r[r.Closed=1]="Closed",r[r.Disposed=2]="Disposed",r[r.AlreadyListening=3]="AlreadyListening"})(aL||(Gn.ConnectionErrors=aL={}));var Q0=class r extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,r.prototype)}};Gn.ConnectionError=Q0;var Tue;(function(r){function e(t){let n=t;return n&&Co.func(n.cancelUndispatched)}r.is=e})(Tue||(Gn.ConnectionStrategy=Tue={}));var DH;(function(r){function e(t){let n=t;return n&&(n.kind===void 0||n.kind==="id")&&Co.func(n.createCancellationTokenSource)&&(n.dispose===void 0||Co.func(n.dispose))}r.is=e})(DH||(Gn.IdCancellationReceiverStrategy=DH={}));var Iue;(function(r){function e(t){let n=t;return n&&n.kind==="request"&&Co.func(n.createCancellationTokenSource)&&(n.dispose===void 0||Co.func(n.dispose))}r.is=e})(Iue||(Gn.RequestCancellationReceiverStrategy=Iue={}));var MH;(function(r){r.Message=Object.freeze({createCancellationTokenSource(t){return new Sue.CancellationTokenSource}});function e(t){return DH.is(t)||Iue.is(t)}r.is=e})(MH||(Gn.CancellationReceiverStrategy=MH={}));var kH;(function(r){r.Message=Object.freeze({sendCancellation(t,n){return t.sendNotification(cL.type,{id:n})},cleanup(t){}});function e(t){let n=t;return n&&Co.func(n.sendCancellation)&&Co.func(n.cleanup)}r.is=e})(kH||(Gn.CancellationSenderStrategy=kH={}));var LH;(function(r){r.Message=Object.freeze({receiver:MH.Message,sender:kH.Message});function e(t){let n=t;return n&&MH.is(n.receiver)&&kH.is(n.sender)}r.is=e})(LH||(Gn.CancellationStrategy=LH={}));var qH;(function(r){function e(t){let n=t;return n&&Co.func(n.handleMessage)}r.is=e})(qH||(Gn.MessageStrategy=qH={}));var a$e;(function(r){function e(t){let n=t;return n&&(LH.is(n.cancellationStrategy)||Tue.is(n.connectionStrategy)||qH.is(n.messageStrategy))}r.is=e})(a$e||(Gn.ConnectionOptions=a$e={}));var qm;(function(r){r[r.New=1]="New",r[r.Listening=2]="Listening",r[r.Closed=3]="Closed",r[r.Disposed=4]="Disposed"})(qm||(qm={}));function zWt(r,e,t,n){let i=t!==void 0?t:Gn.NullLogger,s=0,o=0,a=0,c="2.0",l,u=new Map,d,p=new Map,m=new Map,f,y=new s$e.LinkedMap,v=new Map,_=new Set,C=new Map,P=Wi.Off,w=ld.Text,R,I=qm.New,z=new sL.Emitter,G=new sL.Emitter,L=new sL.Emitter,H=new sL.Emitter,ee=new sL.Emitter,ye=n&&n.cancellationStrategy?n.cancellationStrategy:LH.Message;function $e(J){if(J===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+J.toString()}function Be(J){return J===null?"res-unknown-"+(++a).toString():"res-"+J.toString()}function Ct(){return"not-"+(++o).toString()}function Ge(J,fe){wn.Message.isRequest(fe)?J.set($e(fe.id),fe):wn.Message.isResponse(fe)?J.set(Be(fe.id),fe):J.set(Ct(),fe)}function pe(J){}function Ie(){return I===qm.Listening}function Ve(){return I===qm.Closed}function lt(){return I===qm.Disposed}function ut(){(I===qm.New||I===qm.Listening)&&(I=qm.Closed,G.fire(void 0))}function ce(J){z.fire([J,void 0,void 0])}function ue(J){z.fire(J)}r.onClose(ut),r.onError(ce),e.onClose(ut),e.onError(ue);function Ue(){f||y.size===0||(f=(0,i$e.default)().timer.setImmediate(()=>{f=void 0,jt()}))}function ct(J){wn.Message.isRequest(J)?se(J):wn.Message.isNotification(J)?Ne(J):wn.Message.isResponse(J)?we(J):Re(J)}function jt(){if(y.size===0)return;let J=y.shift();try{let fe=n?.messageStrategy;qH.is(fe)?fe.handleMessage(J,ct):ct(J)}finally{Ue()}}let tr=J=>{try{if(wn.Message.isNotification(J)&&J.method===cL.type.method){let fe=J.params.id,Ke=$e(fe),nt=y.get(Ke);if(wn.Message.isRequest(nt)){let er=n?.connectionStrategy,Cr=er&&er.cancelUndispatched?er.cancelUndispatched(nt,pe):void 0;if(Cr&&(Cr.error!==void 0||Cr.result!==void 0)){y.delete(Ke),C.delete(fe),Cr.id=nt.id,ie(Cr,J.method,Date.now()),e.write(Cr).catch(()=>i.error("Sending response for canceled message failed."));return}}let Ut=C.get(fe);if(Ut!==void 0){Ut.cancel(),le(J);return}else _.add(fe)}Ge(y,J)}finally{Ue()}};function se(J){if(lt())return;function fe(dt,It,Je){let Ye={jsonrpc:c,id:J.id};dt instanceof wn.ResponseError?Ye.error=dt.toJson():Ye.result=dt===void 0?null:dt,ie(Ye,It,Je),e.write(Ye).catch(()=>i.error("Sending response failed."))}function Ke(dt,It,Je){let Ye={jsonrpc:c,id:J.id,error:dt.toJson()};ie(Ye,It,Je),e.write(Ye).catch(()=>i.error("Sending response failed."))}function nt(dt,It,Je){dt===void 0&&(dt=null);let Ye={jsonrpc:c,id:J.id,result:dt};ie(Ye,It,Je),e.write(Ye).catch(()=>i.error("Sending response failed."))}je(J);let Ut=u.get(J.method),er,Cr;Ut&&(er=Ut.type,Cr=Ut.handler);let gr=Date.now();if(Cr||l){let dt=J.id??String(Date.now()),It=DH.is(ye.receiver)?ye.receiver.createCancellationTokenSource(dt):ye.receiver.createCancellationTokenSource(J);J.id!==null&&_.has(J.id)&&It.cancel(),J.id!==null&&C.set(dt,It);try{let Je;if(Cr)if(J.params===void 0){if(er!==void 0&&er.numberOfParams!==0){Ke(new wn.ResponseError(wn.ErrorCodes.InvalidParams,`Request ${J.method} defines ${er.numberOfParams} params but received none.`),J.method,gr);return}Je=Cr(It.token)}else if(Array.isArray(J.params)){if(er!==void 0&&er.parameterStructures===wn.ParameterStructures.byName){Ke(new wn.ResponseError(wn.ErrorCodes.InvalidParams,`Request ${J.method} defines parameters by name but received parameters by position`),J.method,gr);return}Je=Cr(...J.params,It.token)}else{if(er!==void 0&&er.parameterStructures===wn.ParameterStructures.byPosition){Ke(new wn.ResponseError(wn.ErrorCodes.InvalidParams,`Request ${J.method} defines parameters by position but received parameters by name`),J.method,gr);return}Je=Cr(J.params,It.token)}else l&&(Je=l(J.method,J.params,It.token));let Ye=Je;Je?Ye.then?Ye.then(pr=>{C.delete(dt),fe(pr,J.method,gr)},pr=>{C.delete(dt),pr instanceof wn.ResponseError?Ke(pr,J.method,gr):pr&&Co.string(pr.message)?Ke(new wn.ResponseError(wn.ErrorCodes.InternalError,`Request ${J.method} failed with message: ${pr.message}`),J.method,gr):Ke(new wn.ResponseError(wn.ErrorCodes.InternalError,`Request ${J.method} failed unexpectedly without providing any details.`),J.method,gr)}):(C.delete(dt),fe(Je,J.method,gr)):(C.delete(dt),nt(Je,J.method,gr))}catch(Je){C.delete(dt),Je instanceof wn.ResponseError?fe(Je,J.method,gr):Je&&Co.string(Je.message)?Ke(new wn.ResponseError(wn.ErrorCodes.InternalError,`Request ${J.method} failed with message: ${Je.message}`),J.method,gr):Ke(new wn.ResponseError(wn.ErrorCodes.InternalError,`Request ${J.method} failed unexpectedly without providing any details.`),J.method,gr)}}else Ke(new wn.ResponseError(wn.ErrorCodes.MethodNotFound,`Unhandled method ${J.method}`),J.method,gr)}function we(J){if(!lt())if(J.id===null)J.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(J.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let fe=J.id,Ke=v.get(fe);if(_e(J,Ke),Ke!==void 0){v.delete(fe);try{if(J.error){let nt=J.error;Ke.reject(new wn.ResponseError(nt.code,nt.message,nt.data))}else if(J.result!==void 0)Ke.resolve(J.result);else throw new Error("Should never happen.")}catch(nt){nt.message?i.error(`Response handler '${Ke.method}' failed with message: ${nt.message}`):i.error(`Response handler '${Ke.method}' failed unexpectedly.`)}}}}function Ne(J){if(lt())return;let fe,Ke;if(J.method===cL.type.method){let nt=J.params.id;_.delete(nt),le(J);return}else{let nt=p.get(J.method);nt&&(Ke=nt.handler,fe=nt.type)}if(Ke||d)try{if(le(J),Ke)if(J.params===void 0)fe!==void 0&&fe.numberOfParams!==0&&fe.parameterStructures!==wn.ParameterStructures.byName&&i.error(`Notification ${J.method} defines ${fe.numberOfParams} params but received none.`),Ke();else if(Array.isArray(J.params)){let nt=J.params;J.method===oL.type.method&&nt.length===2&&Cue.is(nt[0])?Ke({token:nt[0],value:nt[1]}):(fe!==void 0&&(fe.parameterStructures===wn.ParameterStructures.byName&&i.error(`Notification ${J.method} defines parameters by name but received parameters by position`),fe.numberOfParams!==J.params.length&&i.error(`Notification ${J.method} defines ${fe.numberOfParams} params but received ${nt.length} arguments`)),Ke(...nt))}else fe!==void 0&&fe.parameterStructures===wn.ParameterStructures.byPosition&&i.error(`Notification ${J.method} defines parameters by position but received parameters by name`),Ke(J.params);else d&&d(J.method,J.params)}catch(nt){nt.message?i.error(`Notification handler '${J.method}' failed with message: ${nt.message}`):i.error(`Notification handler '${J.method}' failed unexpectedly.`)}else L.fire(J)}function Re(J){if(!J){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(J,null,4)}`);let fe=J;if(Co.string(fe.id)||Co.number(fe.id)){let Ke=fe.id,nt=v.get(Ke);nt&&nt.reject(new Error("The received response has neither a result nor an error property."))}}function Le(J){if(J!=null)switch(P){case Wi.Verbose:return JSON.stringify(J,null,4);case Wi.Compact:return JSON.stringify(J);default:return}}function ht(J){if(!(P===Wi.Off||!R))if(w===ld.Text){let fe;(P===Wi.Verbose||P===Wi.Compact)&&J.params&&(fe=`Params: ${Le(J.params)}

`),R.log(`Sending request '${J.method} - (${J.id})'.`,fe)}else B("send-request",J)}function Ee(J){if(!(P===Wi.Off||!R))if(w===ld.Text){let fe;(P===Wi.Verbose||P===Wi.Compact)&&(J.params?fe=`Params: ${Le(J.params)}

`:fe=`No parameters provided.

`),R.log(`Sending notification '${J.method}'.`,fe)}else B("send-notification",J)}function ie(J,fe,Ke){if(!(P===Wi.Off||!R))if(w===ld.Text){let nt;(P===Wi.Verbose||P===Wi.Compact)&&(J.error&&J.error.data?nt=`Error data: ${Le(J.error.data)}

`:J.result?nt=`Result: ${Le(J.result)}

`:J.error===void 0&&(nt=`No result returned.

`)),R.log(`Sending response '${fe} - (${J.id})'. Processing request took ${Date.now()-Ke}ms`,nt)}else B("send-response",J)}function je(J){if(!(P===Wi.Off||!R))if(w===ld.Text){let fe;(P===Wi.Verbose||P===Wi.Compact)&&J.params&&(fe=`Params: ${Le(J.params)}

`),R.log(`Received request '${J.method} - (${J.id})'.`,fe)}else B("receive-request",J)}function le(J){if(!(P===Wi.Off||!R||J.method===NH.type.method))if(w===ld.Text){let fe;(P===Wi.Verbose||P===Wi.Compact)&&(J.params?fe=`Params: ${Le(J.params)}

`:fe=`No parameters provided.

`),R.log(`Received notification '${J.method}'.`,fe)}else B("receive-notification",J)}function _e(J,fe){if(!(P===Wi.Off||!R))if(w===ld.Text){let Ke;if((P===Wi.Verbose||P===Wi.Compact)&&(J.error&&J.error.data?Ke=`Error data: ${Le(J.error.data)}

`:J.result?Ke=`Result: ${Le(J.result)}

`:J.error===void 0&&(Ke=`No result returned.

`)),fe){let nt=J.error?` Request failed: ${J.error.message} (${J.error.code}).`:"";R.log(`Received response '${fe.method} - (${J.id})' in ${Date.now()-fe.timerStart}ms.${nt}`,Ke)}else R.log(`Received response ${J.id} without active response promise.`,Ke)}else B("receive-response",J)}function B(J,fe){if(!R||P===Wi.Off)return;let Ke={isLSPMessage:!0,type:J,message:fe,timestamp:Date.now()};R.log(Ke)}function be(){if(Ve())throw new Q0(aL.Closed,"Connection is closed.");if(lt())throw new Q0(aL.Disposed,"Connection is disposed.")}function ke(){if(Ie())throw new Q0(aL.AlreadyListening,"Connection is already listening")}function W(){if(!Ie())throw new Error("Call listen() first.")}function Oe(J){return J===void 0?null:J}function Ht(J){if(J!==null)return J}function _r(J){return J!=null&&!Array.isArray(J)&&typeof J=="object"}function fr(J,fe){switch(J){case wn.ParameterStructures.auto:return _r(fe)?Ht(fe):[Oe(fe)];case wn.ParameterStructures.byName:if(!_r(fe))throw new Error("Received parameters by name but param is not an object literal.");return Ht(fe);case wn.ParameterStructures.byPosition:return[Oe(fe)];default:throw new Error(`Unknown parameter structure ${J.toString()}`)}}function He(J,fe){let Ke,nt=J.numberOfParams;switch(nt){case 0:Ke=void 0;break;case 1:Ke=fr(J.parameterStructures,fe[0]);break;default:Ke=[];for(let Ut=0;Ut<fe.length&&Ut<nt;Ut++)Ke.push(Oe(fe[Ut]));if(fe.length<nt)for(let Ut=fe.length;Ut<nt;Ut++)Ke.push(null);break}return Ke}let Xe={sendNotification:(J,...fe)=>{be();let Ke,nt;if(Co.string(J)){Ke=J;let er=fe[0],Cr=0,gr=wn.ParameterStructures.auto;wn.ParameterStructures.is(er)&&(Cr=1,gr=er);let dt=fe.length,It=dt-Cr;switch(It){case 0:nt=void 0;break;case 1:nt=fr(gr,fe[Cr]);break;default:if(gr===wn.ParameterStructures.byName)throw new Error(`Received ${It} parameters for 'by Name' notification parameter structure.`);nt=fe.slice(Cr,dt).map(Je=>Oe(Je));break}}else{let er=fe;Ke=J.method,nt=He(J,er)}let Ut={jsonrpc:c,method:Ke,params:nt};return Ee(Ut),e.write(Ut).catch(er=>{throw i.error("Sending notification failed."),er})},onNotification:(J,fe)=>{be();let Ke;return Co.func(J)?d=J:fe&&(Co.string(J)?(Ke=J,p.set(J,{type:void 0,handler:fe})):(Ke=J.method,p.set(J.method,{type:J,handler:fe}))),{dispose:()=>{Ke!==void 0?p.delete(Ke):d=void 0}}},onProgress:(J,fe,Ke)=>{if(m.has(fe))throw new Error(`Progress handler for token ${fe} already registered`);return m.set(fe,Ke),{dispose:()=>{m.delete(fe)}}},sendProgress:(J,fe,Ke)=>Xe.sendNotification(oL.type,{token:fe,value:Ke}),onUnhandledProgress:H.event,sendRequest:(J,...fe)=>{be(),W();let Ke,nt,Ut;if(Co.string(J)){Ke=J;let dt=fe[0],It=fe[fe.length-1],Je=0,Ye=wn.ParameterStructures.auto;wn.ParameterStructures.is(dt)&&(Je=1,Ye=dt);let pr=fe.length;Sue.CancellationToken.is(It)&&(pr=pr-1,Ut=It);let Kr=pr-Je;switch(Kr){case 0:nt=void 0;break;case 1:nt=fr(Ye,fe[Je]);break;default:if(Ye===wn.ParameterStructures.byName)throw new Error(`Received ${Kr} parameters for 'by Name' request parameter structure.`);nt=fe.slice(Je,pr).map(Bt=>Oe(Bt));break}}else{let dt=fe;Ke=J.method,nt=He(J,dt);let It=J.numberOfParams;Ut=Sue.CancellationToken.is(dt[It])?dt[It]:void 0}let er=s++,Cr;Ut&&(Cr=Ut.onCancellationRequested(()=>{let dt=ye.sender.sendCancellation(Xe,er);return dt===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${er}`),Promise.resolve()):dt.catch(()=>{i.log(`Sending cancellation messages for id ${er} failed`)})}));let gr={jsonrpc:c,id:er,method:Ke,params:nt};return ht(gr),typeof ye.sender.enableCancellation=="function"&&ye.sender.enableCancellation(gr),new Promise(async(dt,It)=>{let Je=Kr=>{dt(Kr),ye.sender.cleanup(er),Cr?.dispose()},Ye=Kr=>{It(Kr),ye.sender.cleanup(er),Cr?.dispose()},pr={method:Ke,timerStart:Date.now(),resolve:Je,reject:Ye};try{v.set(er,pr),await e.write(gr)}catch(Kr){throw v.delete(er),pr.reject(new wn.ResponseError(wn.ErrorCodes.MessageWriteError,Kr.message?Kr.message:"Unknown reason")),i.error("Sending request failed."),Kr}})},onRequest:(J,fe)=>{be();let Ke=null;return wue.is(J)?(Ke=void 0,l=J):Co.string(J)?(Ke=null,fe!==void 0&&(Ke=J,u.set(J,{handler:fe,type:void 0}))):fe!==void 0&&(Ke=J.method,u.set(J.method,{type:J,handler:fe})),{dispose:()=>{Ke!==null&&(Ke!==void 0?u.delete(Ke):l=void 0)}}},hasPendingResponse:()=>v.size>0,trace:async(J,fe,Ke)=>{let nt=!1,Ut=ld.Text;Ke!==void 0&&(Co.boolean(Ke)?nt=Ke:(nt=Ke.sendNotification||!1,Ut=Ke.traceFormat||ld.Text)),P=J,w=Ut,P===Wi.Off?R=void 0:R=fe,nt&&!Ve()&&!lt()&&await Xe.sendNotification(Eue.type,{value:Wi.toString(J)})},onError:z.event,onClose:G.event,onUnhandledNotification:L.event,onDispose:ee.event,end:()=>{e.end()},dispose:()=>{if(lt())return;I=qm.Disposed,ee.fire(void 0);let J=new wn.ResponseError(wn.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let fe of v.values())fe.reject(J);v=new Map,C=new Map,_=new Set,y=new s$e.LinkedMap,Co.func(e.dispose)&&e.dispose(),Co.func(r.dispose)&&r.dispose()},listen:()=>{be(),ke(),I=qm.Listening,r.listen(tr)},inspect:()=>{(0,i$e.default)().console.log("inspect")}};return Xe.onNotification(NH.type,J=>{if(P===Wi.Off||!R)return;let fe=P===Wi.Verbose||P===Wi.Compact;R.log(J.message,fe?J.verbose:void 0)}),Xe.onNotification(oL.type,J=>{let fe=m.get(J.token);fe?fe(J.value):H.fire(J)}),Xe}Gn.createMessageConnection=zWt});var HC=O(_t=>{"use strict";Object.defineProperty(_t,"__esModule",{value:!0});_t.ProgressType=_t.ProgressToken=_t.createMessageConnection=_t.NullLogger=_t.ConnectionOptions=_t.ConnectionStrategy=_t.AbstractMessageBuffer=_t.WriteableStreamMessageWriter=_t.AbstractMessageWriter=_t.MessageWriter=_t.ReadableStreamMessageReader=_t.AbstractMessageReader=_t.MessageReader=_t.SharedArrayReceiverStrategy=_t.SharedArraySenderStrategy=_t.CancellationToken=_t.CancellationTokenSource=_t.Emitter=_t.Event=_t.Disposable=_t.LRUCache=_t.Touch=_t.LinkedMap=_t.ParameterStructures=_t.NotificationType9=_t.NotificationType8=_t.NotificationType7=_t.NotificationType6=_t.NotificationType5=_t.NotificationType4=_t.NotificationType3=_t.NotificationType2=_t.NotificationType1=_t.NotificationType0=_t.NotificationType=_t.ErrorCodes=_t.ResponseError=_t.RequestType9=_t.RequestType8=_t.RequestType7=_t.RequestType6=_t.RequestType5=_t.RequestType4=_t.RequestType3=_t.RequestType2=_t.RequestType1=_t.RequestType0=_t.RequestType=_t.Message=_t.RAL=void 0;_t.MessageStrategy=_t.CancellationStrategy=_t.CancellationSenderStrategy=_t.CancellationReceiverStrategy=_t.ConnectionError=_t.ConnectionErrors=_t.LogTraceNotification=_t.SetTraceNotification=_t.TraceFormat=_t.TraceValues=_t.Trace=void 0;var Fs=Zle();Object.defineProperty(_t,"Message",{enumerable:!0,get:function(){return Fs.Message}});Object.defineProperty(_t,"RequestType",{enumerable:!0,get:function(){return Fs.RequestType}});Object.defineProperty(_t,"RequestType0",{enumerable:!0,get:function(){return Fs.RequestType0}});Object.defineProperty(_t,"RequestType1",{enumerable:!0,get:function(){return Fs.RequestType1}});Object.defineProperty(_t,"RequestType2",{enumerable:!0,get:function(){return Fs.RequestType2}});Object.defineProperty(_t,"RequestType3",{enumerable:!0,get:function(){return Fs.RequestType3}});Object.defineProperty(_t,"RequestType4",{enumerable:!0,get:function(){return Fs.RequestType4}});Object.defineProperty(_t,"RequestType5",{enumerable:!0,get:function(){return Fs.RequestType5}});Object.defineProperty(_t,"RequestType6",{enumerable:!0,get:function(){return Fs.RequestType6}});Object.defineProperty(_t,"RequestType7",{enumerable:!0,get:function(){return Fs.RequestType7}});Object.defineProperty(_t,"RequestType8",{enumerable:!0,get:function(){return Fs.RequestType8}});Object.defineProperty(_t,"RequestType9",{enumerable:!0,get:function(){return Fs.RequestType9}});Object.defineProperty(_t,"ResponseError",{enumerable:!0,get:function(){return Fs.ResponseError}});Object.defineProperty(_t,"ErrorCodes",{enumerable:!0,get:function(){return Fs.ErrorCodes}});Object.defineProperty(_t,"NotificationType",{enumerable:!0,get:function(){return Fs.NotificationType}});Object.defineProperty(_t,"NotificationType0",{enumerable:!0,get:function(){return Fs.NotificationType0}});Object.defineProperty(_t,"NotificationType1",{enumerable:!0,get:function(){return Fs.NotificationType1}});Object.defineProperty(_t,"NotificationType2",{enumerable:!0,get:function(){return Fs.NotificationType2}});Object.defineProperty(_t,"NotificationType3",{enumerable:!0,get:function(){return Fs.NotificationType3}});Object.defineProperty(_t,"NotificationType4",{enumerable:!0,get:function(){return Fs.NotificationType4}});Object.defineProperty(_t,"NotificationType5",{enumerable:!0,get:function(){return Fs.NotificationType5}});Object.defineProperty(_t,"NotificationType6",{enumerable:!0,get:function(){return Fs.NotificationType6}});Object.defineProperty(_t,"NotificationType7",{enumerable:!0,get:function(){return Fs.NotificationType7}});Object.defineProperty(_t,"NotificationType8",{enumerable:!0,get:function(){return Fs.NotificationType8}});Object.defineProperty(_t,"NotificationType9",{enumerable:!0,get:function(){return Fs.NotificationType9}});Object.defineProperty(_t,"ParameterStructures",{enumerable:!0,get:function(){return Fs.ParameterStructures}});var Rue=tue();Object.defineProperty(_t,"LinkedMap",{enumerable:!0,get:function(){return Rue.LinkedMap}});Object.defineProperty(_t,"LRUCache",{enumerable:!0,get:function(){return Rue.LRUCache}});Object.defineProperty(_t,"Touch",{enumerable:!0,get:function(){return Rue.Touch}});var FWt=W2e();Object.defineProperty(_t,"Disposable",{enumerable:!0,get:function(){return FWt.Disposable}});var l$e=V0();Object.defineProperty(_t,"Event",{enumerable:!0,get:function(){return l$e.Event}});Object.defineProperty(_t,"Emitter",{enumerable:!0,get:function(){return l$e.Emitter}});var u$e=IH();Object.defineProperty(_t,"CancellationTokenSource",{enumerable:!0,get:function(){return u$e.CancellationTokenSource}});Object.defineProperty(_t,"CancellationToken",{enumerable:!0,get:function(){return u$e.CancellationToken}});var d$e=Q2e();Object.defineProperty(_t,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return d$e.SharedArraySenderStrategy}});Object.defineProperty(_t,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return d$e.SharedArrayReceiverStrategy}});var xue=X2e();Object.defineProperty(_t,"MessageReader",{enumerable:!0,get:function(){return xue.MessageReader}});Object.defineProperty(_t,"AbstractMessageReader",{enumerable:!0,get:function(){return xue.AbstractMessageReader}});Object.defineProperty(_t,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return xue.ReadableStreamMessageReader}});var Oue=r$e();Object.defineProperty(_t,"MessageWriter",{enumerable:!0,get:function(){return Oue.MessageWriter}});Object.defineProperty(_t,"AbstractMessageWriter",{enumerable:!0,get:function(){return Oue.AbstractMessageWriter}});Object.defineProperty(_t,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return Oue.WriteableStreamMessageWriter}});var jWt=n$e();Object.defineProperty(_t,"AbstractMessageBuffer",{enumerable:!0,get:function(){return jWt.AbstractMessageBuffer}});var Nc=c$e();Object.defineProperty(_t,"ConnectionStrategy",{enumerable:!0,get:function(){return Nc.ConnectionStrategy}});Object.defineProperty(_t,"ConnectionOptions",{enumerable:!0,get:function(){return Nc.ConnectionOptions}});Object.defineProperty(_t,"NullLogger",{enumerable:!0,get:function(){return Nc.NullLogger}});Object.defineProperty(_t,"createMessageConnection",{enumerable:!0,get:function(){return Nc.createMessageConnection}});Object.defineProperty(_t,"ProgressToken",{enumerable:!0,get:function(){return Nc.ProgressToken}});Object.defineProperty(_t,"ProgressType",{enumerable:!0,get:function(){return Nc.ProgressType}});Object.defineProperty(_t,"Trace",{enumerable:!0,get:function(){return Nc.Trace}});Object.defineProperty(_t,"TraceValues",{enumerable:!0,get:function(){return Nc.TraceValues}});Object.defineProperty(_t,"TraceFormat",{enumerable:!0,get:function(){return Nc.TraceFormat}});Object.defineProperty(_t,"SetTraceNotification",{enumerable:!0,get:function(){return Nc.SetTraceNotification}});Object.defineProperty(_t,"LogTraceNotification",{enumerable:!0,get:function(){return Nc.LogTraceNotification}});Object.defineProperty(_t,"ConnectionErrors",{enumerable:!0,get:function(){return Nc.ConnectionErrors}});Object.defineProperty(_t,"ConnectionError",{enumerable:!0,get:function(){return Nc.ConnectionError}});Object.defineProperty(_t,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return Nc.CancellationReceiverStrategy}});Object.defineProperty(_t,"CancellationSenderStrategy",{enumerable:!0,get:function(){return Nc.CancellationSenderStrategy}});Object.defineProperty(_t,"CancellationStrategy",{enumerable:!0,get:function(){return Nc.CancellationStrategy}});Object.defineProperty(_t,"MessageStrategy",{enumerable:!0,get:function(){return Nc.MessageStrategy}});var UWt=Tb();_t.RAL=UWt.default});var m$e=O(Mue=>{"use strict";Object.defineProperty(Mue,"__esModule",{value:!0});var cf=HC(),zH=class r extends cf.AbstractMessageBuffer{constructor(e="utf-8"){super(e),this.asciiDecoder=new TextDecoder("ascii")}emptyBuffer(){return r.emptyBuffer}fromString(e,t){return new TextEncoder().encode(e)}toString(e,t){return t==="ascii"?this.asciiDecoder.decode(e):new TextDecoder(t).decode(e)}asNative(e,t){return t===void 0?e:e.slice(0,t)}allocNative(e){return new Uint8Array(e)}};zH.emptyBuffer=new Uint8Array(0);var Aue=class{constructor(e){this.socket=e,this._onData=new cf.Emitter,this._messageListener=t=>{t.data.arrayBuffer().then(i=>{this._onData.fire(new Uint8Array(i))},()=>{(0,cf.RAL)().console.error("Converting blob to array buffer failed.")})},this.socket.addEventListener("message",this._messageListener)}onClose(e){return this.socket.addEventListener("close",e),cf.Disposable.create(()=>this.socket.removeEventListener("close",e))}onError(e){return this.socket.addEventListener("error",e),cf.Disposable.create(()=>this.socket.removeEventListener("error",e))}onEnd(e){return this.socket.addEventListener("end",e),cf.Disposable.create(()=>this.socket.removeEventListener("end",e))}onData(e){return this._onData.event(e)}},Nue=class{constructor(e){this.socket=e}onClose(e){return this.socket.addEventListener("close",e),cf.Disposable.create(()=>this.socket.removeEventListener("close",e))}onError(e){return this.socket.addEventListener("error",e),cf.Disposable.create(()=>this.socket.removeEventListener("error",e))}onEnd(e){return this.socket.addEventListener("end",e),cf.Disposable.create(()=>this.socket.removeEventListener("end",e))}write(e,t){if(typeof e=="string"){if(t!==void 0&&t!=="utf-8")throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${t}`);this.socket.send(e)}else this.socket.send(e);return Promise.resolve()}end(){this.socket.close()}},BWt=new TextEncoder,p$e=Object.freeze({messageBuffer:Object.freeze({create:r=>new zH(r)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(r,e)=>{if(e.charset!=="utf-8")throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${e.charset}`);return Promise.resolve(BWt.encode(JSON.stringify(r,void 0,0)))}}),decoder:Object.freeze({name:"application/json",decode:(r,e)=>{if(!(r instanceof Uint8Array))throw new Error("In a Browser environments only Uint8Arrays are supported.");return Promise.resolve(JSON.parse(new TextDecoder(e.charset).decode(r)))}})}),stream:Object.freeze({asReadableStream:r=>new Aue(r),asWritableStream:r=>new Nue(r)}),console,timer:Object.freeze({setTimeout(r,e,...t){let n=setTimeout(r,e,...t);return{dispose:()=>clearTimeout(n)}},setImmediate(r,...e){let t=setTimeout(r,0,...e);return{dispose:()=>clearTimeout(t)}},setInterval(r,e,...t){let n=setInterval(r,e,...t);return{dispose:()=>clearInterval(n)}}})});function Due(){return p$e}(function(r){function e(){cf.RAL.install(p$e)}r.install=e})(Due||(Due={}));Mue.default=Due});var h$e=O(ud=>{"use strict";var GWt=ud&&ud.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),$Wt=ud&&ud.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&GWt(e,r,t)};Object.defineProperty(ud,"__esModule",{value:!0});ud.createMessageConnection=ud.BrowserMessageWriter=ud.BrowserMessageReader=void 0;var VWt=m$e();VWt.default.install();var Y0=HC();$Wt(HC(),ud);var kue=class extends Y0.AbstractMessageReader{constructor(e){super(),this._onData=new Y0.Emitter,this._messageListener=t=>{this._onData.fire(t.data)},e.addEventListener("error",t=>this.fireError(t)),e.onmessage=this._messageListener}listen(e){return this._onData.event(e)}};ud.BrowserMessageReader=kue;var Lue=class extends Y0.AbstractMessageWriter{constructor(e){super(),this.port=e,this.errorCount=0,e.addEventListener("error",t=>this.fireError(t))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}};ud.BrowserMessageWriter=Lue;function HWt(r,e,t,n){return t===void 0&&(t=Y0.NullLogger),Y0.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,Y0.createMessageConnection)(r,e,t,n)}ud.createMessageConnection=HWt});var lL=O((cOr,f$e)=>{"use strict";f$e.exports=h$e()});var v$e=O(bde=>{"use strict";Object.defineProperty(bde,"__esModule",{value:!0});var g$e=require("util"),Qg=HC(),jH=class r extends Qg.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return r.emptyBuffer}fromString(e,t){return Buffer.from(e,t)}toString(e,t){return e instanceof Buffer?e.toString(t):new g$e.TextDecoder(t).decode(e)}asNative(e,t){return t===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,t):Buffer.from(e,0,t)}allocNative(e){return Buffer.allocUnsafe(e)}};jH.emptyBuffer=Buffer.allocUnsafe(0);var gde=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Qg.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Qg.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Qg.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),Qg.Disposable.create(()=>this.stream.off("data",e))}},yde=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Qg.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Qg.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Qg.Disposable.create(()=>this.stream.off("end",e))}write(e,t){return new Promise((n,i)=>{let s=o=>{o==null?n():i(o)};typeof e=="string"?this.stream.write(e,t,s):this.stream.write(e,s)})}end(){this.stream.end()}},y$e=Object.freeze({messageBuffer:Object.freeze({create:r=>new jH(r)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(r,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(r,void 0,0),e.charset))}catch(t){return Promise.reject(t)}}}),decoder:Object.freeze({name:"application/json",decode:(r,e)=>{try{return r instanceof Buffer?Promise.resolve(JSON.parse(r.toString(e.charset))):Promise.resolve(JSON.parse(new g$e.TextDecoder(e.charset).decode(r)))}catch(t){return Promise.reject(t)}}})}),stream:Object.freeze({asReadableStream:r=>new gde(r),asWritableStream:r=>new yde(r)}),console,timer:Object.freeze({setTimeout(r,e,...t){let n=setTimeout(r,e,...t);return{dispose:()=>clearTimeout(n)}},setImmediate(r,...e){let t=setImmediate(r,...e);return{dispose:()=>clearImmediate(t)}},setInterval(r,e,...t){let n=setInterval(r,e,...t);return{dispose:()=>clearInterval(n)}}})});function vde(){return y$e}(function(r){function e(){Qg.RAL.install(y$e)}r.install=e})(vde||(vde={}));bde.default=vde});var S$e=O(wi=>{"use strict";var WWt=wi&&wi.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),KWt=wi&&wi.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&WWt(e,r,t)};Object.defineProperty(wi,"__esModule",{value:!0});wi.createMessageConnection=wi.createServerSocketTransport=wi.createClientSocketTransport=wi.createServerPipeTransport=wi.createClientPipeTransport=wi.generateRandomPipeName=wi.StreamMessageWriter=wi.StreamMessageReader=wi.SocketMessageWriter=wi.SocketMessageReader=wi.PortMessageWriter=wi.PortMessageReader=wi.IPCMessageWriter=wi.IPCMessageReader=void 0;var X0=v$e();X0.default.install();var b$e=require("path"),QWt=require("os"),YWt=require("crypto"),GH=require("net"),dd=HC();KWt(HC(),wi);var _de=class extends dd.AbstractMessageReader{constructor(e){super(),this.process=e;let t=this.process;t.on("error",n=>this.fireError(n)),t.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),dd.Disposable.create(()=>this.process.off("message",e))}};wi.IPCMessageReader=_de;var Sde=class extends dd.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let t=this.process;t.on("error",n=>this.fireError(n)),t.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,t=>{t?(this.errorCount++,this.handleError(t,e)):this.errorCount=0}),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}};wi.IPCMessageWriter=Sde;var Cde=class extends dd.AbstractMessageReader{constructor(e){super(),this.onData=new dd.Emitter,e.on("close",()=>this.fireClose),e.on("error",t=>this.fireError(t)),e.on("message",t=>{this.onData.fire(t)})}listen(e){return this.onData.event(e)}};wi.PortMessageReader=Cde;var Pde=class extends dd.AbstractMessageWriter{constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",t=>this.fireError(t))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}};wi.PortMessageWriter=Pde;var WC=class extends dd.ReadableStreamMessageReader{constructor(e,t="utf-8"){super((0,X0.default)().stream.asReadableStream(e),t)}};wi.SocketMessageReader=WC;var KC=class extends dd.WriteableStreamMessageWriter{constructor(e,t){super((0,X0.default)().stream.asWritableStream(e),t),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};wi.SocketMessageWriter=KC;var UH=class extends dd.ReadableStreamMessageReader{constructor(e,t){super((0,X0.default)().stream.asReadableStream(e),t)}};wi.StreamMessageReader=UH;var BH=class extends dd.WriteableStreamMessageWriter{constructor(e,t){super((0,X0.default)().stream.asWritableStream(e),t)}};wi.StreamMessageWriter=BH;var _$e=process.env.XDG_RUNTIME_DIR,XWt=new Map([["linux",107],["darwin",103]]);function JWt(){let r=(0,YWt.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${r}-sock`;let e;_$e?e=b$e.join(_$e,`vscode-ipc-${r}.sock`):e=b$e.join(QWt.tmpdir(),`vscode-${r}.sock`);let t=XWt.get(process.platform);return t!==void 0&&e.length>t&&(0,X0.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${t} characters.`),e}wi.generateRandomPipeName=JWt;function ZWt(r,e="utf-8"){let t,n=new Promise((i,s)=>{t=i});return new Promise((i,s)=>{let o=(0,GH.createServer)(a=>{o.close(),t([new WC(a,e),new KC(a,e)])});o.on("error",s),o.listen(r,()=>{o.removeListener("error",s),i({onConnected:()=>n})})})}wi.createClientPipeTransport=ZWt;function e3t(r,e="utf-8"){let t=(0,GH.createConnection)(r);return[new WC(t,e),new KC(t,e)]}wi.createServerPipeTransport=e3t;function t3t(r,e="utf-8"){let t,n=new Promise((i,s)=>{t=i});return new Promise((i,s)=>{let o=(0,GH.createServer)(a=>{o.close(),t([new WC(a,e),new KC(a,e)])});o.on("error",s),o.listen(r,"127.0.0.1",()=>{o.removeListener("error",s),i({onConnected:()=>n})})})}wi.createClientSocketTransport=t3t;function r3t(r,e="utf-8"){let t=(0,GH.createConnection)(r,"127.0.0.1");return[new WC(t,e),new KC(t,e)]}wi.createServerSocketTransport=r3t;function n3t(r){let e=r;return e.read!==void 0&&e.addListener!==void 0}function i3t(r){let e=r;return e.write!==void 0&&e.addListener!==void 0}function s3t(r,e,t,n){t||(t=dd.NullLogger);let i=n3t(r)?new UH(r):r,s=i3t(e)?new BH(e):e;return dd.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,dd.createMessageConnection)(i,s,t,n)}wi.createMessageConnection=s3t});var P$e=O((pOr,C$e)=>{"use strict";C$e.exports=S$e()});var M$e=O(D$e=>{function Yg(){for(this.shift=[`
`],this.step="  ",maxdeep=100,ix=0,ix=0;ix<maxdeep;ix++)this.shift.push(this.shift[ix]+this.step)}Yg.prototype.xml=function(r){var e=r.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/xmlns\:/g,"~::~xmlns:").replace(/xmlns\=/g,"~::~xmlns=").split("~::~"),t=e.length,n=!1,i=0,s="",o=0;for(o=0;o<t;o++)e[o].search(/<!/)>-1?(s+=this.shift[i]+e[o],n=!0,(e[o].search(/-->/)>-1||e[o].search(/\]>/)>-1||e[o].search(/!DOCTYPE/)>-1)&&(n=!1)):e[o].search(/-->/)>-1||e[o].search(/\]>/)>-1?(s+=e[o],n=!1):/^<\w/.exec(e[o-1])&&/^<\/\w/.exec(e[o])&&/^<[\w:\-\.\,]+/.exec(e[o-1])==/^<\/[\w:\-\.\,]+/.exec(e[o])[0].replace("/","")?(s+=e[o],n||i--):e[o].search(/<\w/)>-1&&e[o].search(/<\//)==-1&&e[o].search(/\/>/)==-1?s=n?s+=e[o]:s+=this.shift[i++]+e[o]:e[o].search(/<\w/)>-1&&e[o].search(/<\//)>-1?s=n?s+=e[o]:s+=this.shift[i]+e[o]:e[o].search(/<\//)>-1?s=n?s+=e[o]:s+=this.shift[--i]+e[o]:e[o].search(/\/>/)>-1?s=n?s+=e[o]:s+=this.shift[i]+e[o]:e[o].search(/<\?/)>-1?s+=this.shift[i]+e[o]:e[o].search(/xmlns\:/)>-1||e[o].search(/xmlns\=/)>-1?s+=this.shift[i]+e[o]:s+=e[o];return s[0]==`
`?s.slice(1):s};Yg.prototype.json=function(r){return typeof r=="string"?JSON.stringify(JSON.parse(r),null,this.step):typeof r=="object"?JSON.stringify(r,null,this.step):null};Yg.prototype.css=function(r){var e=r.replace(/\s{1,}/g," ").replace(/\{/g,"{~::~").replace(/\}/g,"~::~}~::~").replace(/\;/g,";~::~").replace(/\/\*/g,"~::~/*").replace(/\*\//g,"*/~::~").replace(/~::~\s{0,}~::~/g,"~::~").split("~::~"),t=e.length,n=0,i="",s=0;for(s=0;s<t;s++)/\{/.exec(e[s])?i+=this.shift[n++]+e[s]:/\}/.exec(e[s])?i+=this.shift[--n]+e[s]:/\*\\/.exec(e[s])?i+=this.shift[n]+e[s]:i+=this.shift[n]+e[s];return i.replace(/^\n{1,}/,"")};function d3t(r,e){return e-(r.replace(/\(/g,"").length-r.replace(/\)/g,"").length)}function p3t(r,e){return r.replace(/\s{1,}/g," ").replace(/ AND /ig,"~::~"+e+e+"AND ").replace(/ BETWEEN /ig,"~::~"+e+"BETWEEN ").replace(/ CASE /ig,"~::~"+e+"CASE ").replace(/ ELSE /ig,"~::~"+e+"ELSE ").replace(/ END /ig,"~::~"+e+"END ").replace(/ FROM /ig,"~::~FROM ").replace(/ GROUP\s{1,}BY/ig,"~::~GROUP BY ").replace(/ HAVING /ig,"~::~HAVING ").replace(/ IN /ig," IN ").replace(/ JOIN /ig,"~::~JOIN ").replace(/ CROSS~::~{1,}JOIN /ig,"~::~CROSS JOIN ").replace(/ INNER~::~{1,}JOIN /ig,"~::~INNER JOIN ").replace(/ LEFT~::~{1,}JOIN /ig,"~::~LEFT JOIN ").replace(/ RIGHT~::~{1,}JOIN /ig,"~::~RIGHT JOIN ").replace(/ ON /ig,"~::~"+e+"ON ").replace(/ OR /ig,"~::~"+e+e+"OR ").replace(/ ORDER\s{1,}BY/ig,"~::~ORDER BY ").replace(/ OVER /ig,"~::~"+e+"OVER ").replace(/\(\s{0,}SELECT /ig,"~::~(SELECT ").replace(/\)\s{0,}SELECT /ig,")~::~SELECT ").replace(/ THEN /ig," THEN~::~"+e).replace(/ UNION /ig,"~::~UNION~::~").replace(/ USING /ig,"~::~USING ").replace(/ WHEN /ig,"~::~"+e+"WHEN ").replace(/ WHERE /ig,"~::~WHERE ").replace(/ WITH /ig,"~::~WITH ").replace(/ ALL /ig," ALL ").replace(/ AS /ig," AS ").replace(/ ASC /ig," ASC ").replace(/ DESC /ig," DESC ").replace(/ DISTINCT /ig," DISTINCT ").replace(/ EXISTS /ig," EXISTS ").replace(/ NOT /ig," NOT ").replace(/ NULL /ig," NULL ").replace(/ LIKE /ig," LIKE ").replace(/\s{0,}SELECT /ig,"SELECT ").replace(/~::~{1,}/g,"~::~").split("~::~")}Yg.prototype.sql=function(r){var e=r.replace(/\s{1,}/g," ").replace(/\'/ig,"~::~'").split("~::~"),t=e.length,n=[],i=0,s=this.step,o=!0,a=!1,c=0,l="",u=0;for(u=0;u<t;u++)u%2?n=n.concat(e[u]):n=n.concat(p3t(e[u],s));for(t=n.length,u=0;u<t;u++)c=d3t(n[u],c),/\s{0,}\s{0,}SELECT\s{0,}/.exec(n[u])&&(n[u]=n[u].replace(/\,/g,`,
`+s+s)),/\s{0,}\(\s{0,}SELECT\s{0,}/.exec(n[u])?(i++,l+=this.shift[i]+n[u]):/\'/.exec(n[u])?(c<1&&i&&i--,l+=n[u]):(l+=this.shift[i]+n[u],c<1&&i&&i--);return l=l.replace(/^\n{1,}/,"").replace(/\n{1,}/g,`
`),l};Yg.prototype.xmlmin=function(r,e){var t=e?r:r.replace(/\<![ \r\n\t]*(--([^\-]|[\r\n]|-[^\-])*--[ \r\n\t]*)\>/g,"");return t.replace(/>\s{0,}</g,"><")};Yg.prototype.jsonmin=function(r){return r.replace(/\s{0,}\{\s{0,}/g,"{").replace(/\s{0,}\[$/g,"[").replace(/\[\s{0,}/g,"[").replace(/:\s{0,}\[/g,":[").replace(/\s{0,}\}\s{0,}/g,"}").replace(/\s{0,}\]\s{0,}/g,"]").replace(/\"\s{0,}\,/g,'",').replace(/\,\s{0,}\"/g,',"').replace(/\"\s{0,}:/g,'":').replace(/:\s{0,}\"/g,':"').replace(/:\s{0,}\[/g,":[").replace(/\,\s{0,}\[/g,",[").replace(/\,\s{2,}/g,", ").replace(/\]\s{0,},\s{0,}\[/g,"],[")};Yg.prototype.cssmin=function(r,e){var t=e?r:r.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\//g,"");return t.replace(/\s{1,}/g," ").replace(/\{\s{1,}/g,"{").replace(/\}\s{1,}/g,"}").replace(/\;\s{1,}/g,";").replace(/\/\*\s{1,}/g,"/*").replace(/\*\/\s{1,}/g,"*/")};Yg.prototype.sqlmin=function(r){return r.replace(/\s{1,}/g," ").replace(/\s{1,}\(/,"(").replace(/\s{1,}\)/,")")};D$e.pd=new Yg});var lVe=O((RDr,cVe)=>{"use strict";cVe.exports=function(e){return e?e instanceof Array||Array.isArray(e)||e.length>=0&&e.splice instanceof Function:!1}});var Hde=O((xDr,uVe)=>{"use strict";var L3t=require("util"),q3t=lVe(),Vde=function(e,t){(!e||e.constructor!==String)&&(t=e||{},e=Error.name);var n=function i(s){if(!this)return new i(s);s=s instanceof Error?s.message:s||this.message,Error.call(this,s),Error.captureStackTrace(this,n),this.name=e,Object.defineProperty(this,"message",{configurable:!0,enumerable:!1,get:function(){var u=s.split(/\r?\n/g);for(var d in t)if(t.hasOwnProperty(d)){var p=t[d];"message"in p&&(u=p.message(this[d],u)||u,q3t(u)||(u=[u]))}return u.join(`
`)},set:function(u){s=u}});var o=null,a=Object.getOwnPropertyDescriptor(this,"stack"),c=a.get,l=a.value;delete a.value,delete a.writable,a.set=function(u){o=u},a.get=function(){var u=(o||(c?c.call(this):l)).split(/\r?\n+/g);o||(u[0]=this.name+": "+this.message);var d=1;for(var p in t)if(t.hasOwnProperty(p)){var m=t[p];if("line"in m){var f=m.line(this[p]);f&&u.splice(d++,0,"    "+f)}"stack"in m&&m.stack(this[p],u)}return u.join(`
`)},Object.defineProperty(this,"stack",a)};return Object.setPrototypeOf?(Object.setPrototypeOf(n.prototype,Error.prototype),Object.setPrototypeOf(n,Error)):L3t.inherits(n,Error),n};Vde.append=function(r,e){return{message:function(t,n){return t=t||e,t&&(n[0]+=" "+r.replace("%s",t.toString())),n}}};Vde.line=function(r,e){return{line:function(t){return t=t||e,t?r.replace("%s",t.toString()):null}}};uVe.exports=Vde});var mVe=O((ADr,pVe)=>{"use strict";var dVe=Object.getOwnPropertySymbols,z3t=Object.prototype.hasOwnProperty,F3t=Object.prototype.propertyIsEnumerable;function j3t(r){if(r==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}function U3t(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de",Object.getOwnPropertyNames(r)[0]==="5")return!1;for(var e={},t=0;t<10;t++)e["_"+String.fromCharCode(t)]=t;var n=Object.getOwnPropertyNames(e).map(function(s){return e[s]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}pVe.exports=U3t()?Object.assign:function(r,e){for(var t,n=j3t(r),i,s=1;s<arguments.length;s++){t=Object(arguments[s]);for(var o in t)z3t.call(t,o)&&(n[o]=t[o]);if(dVe){i=dVe(t);for(var a=0;a<i.length;a++)F3t.call(t,i[a])&&(n[i[a]]=t[i[a]])}}return n}});var fVe=O((NDr,hVe)=>{"use strict";var B3t=/[|\\{}()[\]^$+*?.]/g;hVe.exports=function(r){if(typeof r!="string")throw new TypeError("Expected a string");return r.replace(B3t,"\\$&")}});var bW=O((DDr,yVe)=>{"use strict";var G3t=mVe(),$3t=fVe(),gVe=process.platform,Fm={tick:"\u2714",cross:"\u2716",star:"\u2605",square:"\u2587",squareSmall:"\u25FB",squareSmallFilled:"\u25FC",play:"\u25B6",circle:"\u25EF",circleFilled:"\u25C9",circleDotted:"\u25CC",circleDouble:"\u25CE",circleCircle:"\u24DE",circleCross:"\u24E7",circlePipe:"\u24BE",circleQuestionMark:"?\u20DD",bullet:"\u25CF",dot:"\u2024",line:"\u2500",ellipsis:"\u2026",pointer:"\u276F",pointerSmall:"\u203A",info:"\u2139",warning:"\u26A0",hamburger:"\u2630",smiley:"\u32E1",mustache:"\u0DF4",heart:"\u2665",arrowUp:"\u2191",arrowDown:"\u2193",arrowLeft:"\u2190",arrowRight:"\u2192",radioOn:"\u25C9",radioOff:"\u25EF",checkboxOn:"\u2612",checkboxOff:"\u2610",checkboxCircleOn:"\u24E7",checkboxCircleOff:"\u24BE",questionMarkPrefix:"?\u20DD",oneHalf:"\xBD",oneThird:"\u2153",oneQuarter:"\xBC",oneFifth:"\u2155",oneSixth:"\u2159",oneSeventh:"\u2150",oneEighth:"\u215B",oneNinth:"\u2151",oneTenth:"\u2152",twoThirds:"\u2154",twoFifths:"\u2156",threeQuarters:"\xBE",threeFifths:"\u2157",threeEighths:"\u215C",fourFifths:"\u2158",fiveSixths:"\u215A",fiveEighths:"\u215D",sevenEighths:"\u215E"},V3t={tick:"\u221A",cross:"\xD7",star:"*",square:"\u2588",squareSmall:"[ ]",squareSmallFilled:"[\u2588]",play:"\u25BA",circle:"( )",circleFilled:"(*)",circleDotted:"( )",circleDouble:"( )",circleCircle:"(\u25CB)",circleCross:"(\xD7)",circlePipe:"(\u2502)",circleQuestionMark:"(?)",bullet:"*",dot:".",line:"\u2500",ellipsis:"...",pointer:">",pointerSmall:"\xBB",info:"i",warning:"\u203C",hamburger:"\u2261",smiley:"\u263A",mustache:"\u250C\u2500\u2510",heart:Fm.heart,arrowUp:Fm.arrowUp,arrowDown:Fm.arrowDown,arrowLeft:Fm.arrowLeft,arrowRight:Fm.arrowRight,radioOn:"(*)",radioOff:"( )",checkboxOn:"[\xD7]",checkboxOff:"[ ]",checkboxCircleOn:"(\xD7)",checkboxCircleOff:"( )",questionMarkPrefix:"\uFF1F",oneHalf:"1/2",oneThird:"1/3",oneQuarter:"1/4",oneFifth:"1/5",oneSixth:"1/6",oneSeventh:"1/7",oneEighth:"1/8",oneNinth:"1/9",oneTenth:"1/10",twoThirds:"2/3",twoFifths:"2/5",threeQuarters:"3/4",threeFifths:"3/5",threeEighths:"3/8",fourFifths:"4/5",fiveSixths:"5/6",fiveEighths:"5/8",sevenEighths:"7/8"};gVe==="linux"&&(Fm.questionMarkPrefix="?");var vW=gVe==="win32"?V3t:Fm,H3t=function(r){return vW===Fm||Object.keys(Fm).forEach(function(e){Fm[e]!==vW[e]&&(r=r.replace(new RegExp($3t(Fm[e]),"g"),vW[e]))}),r};yVe.exports=G3t(H3t,vW)});var oq=O((Tjr,pHe)=>{var S3=function(r,e){Error.call(this,r),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=r,e&&(this.inner=e)};S3.prototype=Object.create(Error.prototype);S3.prototype.constructor=S3;pHe.exports=S3});var vhe=O((Ijr,hHe)=>{var mHe=oq(),C3=function(r,e){mHe.call(this,r),this.name="NotBeforeError",this.date=e};C3.prototype=Object.create(mHe.prototype);C3.prototype.constructor=C3;hHe.exports=C3});var bhe=O((Rjr,gHe)=>{var fHe=oq(),P3=function(r,e){fHe.call(this,r),this.name="TokenExpiredError",this.expiredAt=e};P3.prototype=Object.create(fHe.prototype);P3.prototype.constructor=P3;gHe.exports=P3});var RI=O((_he,vHe)=>{var w3=require("buffer"),gf=w3.Buffer;function yHe(r,e){for(var t in r)e[t]=r[t]}gf.from&&gf.alloc&&gf.allocUnsafe&&gf.allocUnsafeSlow?vHe.exports=w3:(yHe(w3,_he),_he.Buffer=TP);function TP(r,e,t){return gf(r,e,t)}TP.prototype=Object.create(gf.prototype);yHe(gf,TP);TP.from=function(r,e,t){if(typeof r=="number")throw new TypeError("Argument must not be a number");return gf(r,e,t)};TP.alloc=function(r,e,t){if(typeof r!="number")throw new TypeError("Argument must be a number");var n=gf(r);return e!==void 0?typeof t=="string"?n.fill(e,t):n.fill(e):n.fill(0),n};TP.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return gf(r)};TP.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return w3.SlowBuffer(r)}});var She=O((xjr,bHe)=>{var E3=RI().Buffer,s6t=require("stream"),o6t=require("util");function T3(r){if(this.buffer=null,this.writable=!0,this.readable=!0,!r)return this.buffer=E3.alloc(0),this;if(typeof r.pipe=="function")return this.buffer=E3.alloc(0),r.pipe(this),this;if(r.length||typeof r=="object")return this.buffer=r,this.writable=!1,process.nextTick(function(){this.emit("end",r),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof r+")")}o6t.inherits(T3,s6t);T3.prototype.write=function(e){this.buffer=E3.concat([this.buffer,E3.from(e)]),this.emit("data",e)};T3.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1};bHe.exports=T3});var SHe=O((Ojr,_He)=>{"use strict";var aq=require("buffer").Buffer,Che=require("buffer").SlowBuffer;_He.exports=I3;function I3(r,e){if(!aq.isBuffer(r)||!aq.isBuffer(e)||r.length!==e.length)return!1;for(var t=0,n=0;n<r.length;n++)t|=r[n]^e[n];return t===0}I3.install=function(){aq.prototype.equal=Che.prototype.equal=function(e){return I3(this,e)}};var a6t=aq.prototype.equal,c6t=Che.prototype.equal;I3.restore=function(){aq.prototype.equal=a6t,Che.prototype.equal=c6t}});var PHe=O((Ajr,CHe)=>{"use strict";function Phe(r){var e=(r/8|0)+(r%8===0?0:1);return e}var l6t={ES256:Phe(256),ES384:Phe(384),ES512:Phe(521)};function u6t(r){var e=l6t[r];if(e)return e;throw new Error('Unknown algorithm "'+r+'"')}CHe.exports=u6t});var OHe=O((Njr,xHe)=>{"use strict";var R3=RI().Buffer,EHe=PHe(),x3=128,THe=0,d6t=32,p6t=16,m6t=2,IHe=p6t|d6t|THe<<6,O3=m6t|THe<<6;function h6t(r){return r.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function RHe(r){if(R3.isBuffer(r))return r;if(typeof r=="string")return R3.from(r,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function f6t(r,e){r=RHe(r);var t=EHe(e),n=t+1,i=r.length,s=0;if(r[s++]!==IHe)throw new Error('Could not find expected "seq"');var o=r[s++];if(o===(x3|1)&&(o=r[s++]),i-s<o)throw new Error('"seq" specified length of "'+o+'", only "'+(i-s)+'" remaining');if(r[s++]!==O3)throw new Error('Could not find expected "int" for "r"');var a=r[s++];if(i-s-2<a)throw new Error('"r" specified length of "'+a+'", only "'+(i-s-2)+'" available');if(n<a)throw new Error('"r" specified length of "'+a+'", max of "'+n+'" is acceptable');var c=s;if(s+=a,r[s++]!==O3)throw new Error('Could not find expected "int" for "s"');var l=r[s++];if(i-s!==l)throw new Error('"s" specified length of "'+l+'", expected "'+(i-s)+'"');if(n<l)throw new Error('"s" specified length of "'+l+'", max of "'+n+'" is acceptable');var u=s;if(s+=l,s!==i)throw new Error('Expected to consume entire buffer, but "'+(i-s)+'" bytes remain');var d=t-a,p=t-l,m=R3.allocUnsafe(d+a+p+l);for(s=0;s<d;++s)m[s]=0;r.copy(m,s,c+Math.max(-d,0),c+a),s=t;for(var f=s;s<f+p;++s)m[s]=0;return r.copy(m,s,u+Math.max(-p,0),u+l),m=m.toString("base64"),m=h6t(m),m}function wHe(r,e,t){for(var n=0;e+n<t&&r[e+n]===0;)++n;var i=r[e+n]>=x3;return i&&--n,n}function g6t(r,e){r=RHe(r);var t=EHe(e),n=r.length;if(n!==t*2)throw new TypeError('"'+e+'" signatures must be "'+t*2+'" bytes, saw "'+n+'"');var i=wHe(r,0,t),s=wHe(r,t,r.length),o=t-i,a=t-s,c=2+o+1+1+a,l=c<x3,u=R3.allocUnsafe((l?2:3)+c),d=0;return u[d++]=IHe,l?u[d++]=c:(u[d++]=x3|1,u[d++]=c&255),u[d++]=O3,u[d++]=o,i<0?(u[d++]=0,d+=r.copy(u,d,0,t)):d+=r.copy(u,d,i,t),u[d++]=O3,u[d++]=a,s<0?(u[d++]=0,r.copy(u,d,t)):r.copy(u,d,t+s),u}xHe.exports={derToJose:f6t,joseToDer:g6t}});var The=O((Djr,FHe)=>{var y6t=SHe(),OI=RI().Buffer,yf=require("crypto"),NHe=OHe(),AHe=require("util"),v6t=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,cq="secret must be a string or buffer",xI="key must be a string or a buffer",b6t="key must be a string, a buffer or an object",whe=typeof yf.createPublicKey=="function";whe&&(xI+=" or a KeyObject",cq+="or a KeyObject");function DHe(r){if(!OI.isBuffer(r)&&typeof r!="string"&&(!whe||typeof r!="object"||typeof r.type!="string"||typeof r.asymmetricKeyType!="string"||typeof r.export!="function"))throw Vm(xI)}function MHe(r){if(!OI.isBuffer(r)&&typeof r!="string"&&typeof r!="object")throw Vm(b6t)}function _6t(r){if(!OI.isBuffer(r)){if(typeof r=="string")return r;if(!whe||typeof r!="object"||r.type!=="secret"||typeof r.export!="function")throw Vm(cq)}}function Ehe(r){return r.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function kHe(r){r=r.toString();var e=4-r.length%4;if(e!==4)for(var t=0;t<e;++t)r+="=";return r.replace(/\-/g,"+").replace(/_/g,"/")}function Vm(r){var e=[].slice.call(arguments,1),t=AHe.format.bind(AHe,r).apply(null,e);return new TypeError(t)}function S6t(r){return OI.isBuffer(r)||typeof r=="string"}function lq(r){return S6t(r)||(r=JSON.stringify(r)),r}function LHe(r){return function(t,n){_6t(n),t=lq(t);var i=yf.createHmac("sha"+r,n),s=(i.update(t),i.digest("base64"));return Ehe(s)}}function C6t(r){return function(t,n,i){var s=LHe(r)(t,i);return y6t(OI.from(n),OI.from(s))}}function qHe(r){return function(t,n){MHe(n),t=lq(t);var i=yf.createSign("RSA-SHA"+r),s=(i.update(t),i.sign(n,"base64"));return Ehe(s)}}function zHe(r){return function(t,n,i){DHe(i),t=lq(t),n=kHe(n);var s=yf.createVerify("RSA-SHA"+r);return s.update(t),s.verify(i,n,"base64")}}function P6t(r){return function(t,n){MHe(n),t=lq(t);var i=yf.createSign("RSA-SHA"+r),s=(i.update(t),i.sign({key:n,padding:yf.constants.RSA_PKCS1_PSS_PADDING,saltLength:yf.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return Ehe(s)}}function w6t(r){return function(t,n,i){DHe(i),t=lq(t),n=kHe(n);var s=yf.createVerify("RSA-SHA"+r);return s.update(t),s.verify({key:i,padding:yf.constants.RSA_PKCS1_PSS_PADDING,saltLength:yf.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")}}function E6t(r){var e=qHe(r);return function(){var n=e.apply(null,arguments);return n=NHe.derToJose(n,"ES"+r),n}}function T6t(r){var e=zHe(r);return function(n,i,s){i=NHe.joseToDer(i,"ES"+r).toString("base64");var o=e(n,i,s);return o}}function I6t(){return function(){return""}}function R6t(){return function(e,t){return t===""}}FHe.exports=function(e){var t={hs:LHe,rs:qHe,ps:P6t,es:E6t,none:I6t},n={hs:C6t,rs:zHe,ps:w6t,es:T6t,none:R6t},i=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!i)throw Vm(v6t,e);var s=(i[1]||i[3]).toLowerCase(),o=i[2];return{sign:t[s](o),verify:n[s](o)}}});var Ihe=O((Mjr,jHe)=>{var x6t=require("buffer").Buffer;jHe.exports=function(e){return typeof e=="string"?e:typeof e=="number"||x6t.isBuffer(e)?e.toString():JSON.stringify(e)}});var HHe=O((kjr,VHe)=>{var O6t=RI().Buffer,UHe=She(),A6t=The(),N6t=require("stream"),BHe=Ihe(),Rhe=require("util");function GHe(r,e){return O6t.from(r,e).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function D6t(r,e,t){t=t||"utf8";var n=GHe(BHe(r),"binary"),i=GHe(BHe(e),t);return Rhe.format("%s.%s",n,i)}function $He(r){var e=r.header,t=r.payload,n=r.secret||r.privateKey,i=r.encoding,s=A6t(e.alg),o=D6t(e,t,i),a=s.sign(o,n);return Rhe.format("%s.%s",o,a)}function A3(r){var e=r.secret||r.privateKey||r.key,t=new UHe(e);this.readable=!0,this.header=r.header,this.encoding=r.encoding,this.secret=this.privateKey=this.key=t,this.payload=new UHe(r.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}Rhe.inherits(A3,N6t);A3.prototype.sign=function(){try{var e=$He({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(t){this.readable=!1,this.emit("error",t),this.emit("close")}};A3.sign=$He;VHe.exports=A3});var rWe=O((Ljr,tWe)=>{var KHe=RI().Buffer,WHe=She(),M6t=The(),k6t=require("stream"),QHe=Ihe(),L6t=require("util"),q6t=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function z6t(r){return Object.prototype.toString.call(r)==="[object Object]"}function F6t(r){if(z6t(r))return r;try{return JSON.parse(r)}catch{return}}function YHe(r){var e=r.split(".",1)[0];return F6t(KHe.from(e,"base64").toString("binary"))}function j6t(r){return r.split(".",2).join(".")}function XHe(r){return r.split(".")[2]}function U6t(r,e){e=e||"utf8";var t=r.split(".")[1];return KHe.from(t,"base64").toString(e)}function JHe(r){return q6t.test(r)&&!!YHe(r)}function ZHe(r,e,t){if(!e){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}r=QHe(r);var i=XHe(r),s=j6t(r),o=M6t(e);return o.verify(s,i,t)}function eWe(r,e){if(e=e||{},r=QHe(r),!JHe(r))return null;var t=YHe(r);if(!t)return null;var n=U6t(r);return(t.typ==="JWT"||e.json)&&(n=JSON.parse(n,e.encoding)),{header:t,payload:n,signature:XHe(r)}}function AI(r){r=r||{};var e=r.secret||r.publicKey||r.key,t=new WHe(e);this.readable=!0,this.algorithm=r.algorithm,this.encoding=r.encoding,this.secret=this.publicKey=this.key=t,this.signature=new WHe(r.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}L6t.inherits(AI,k6t);AI.prototype.verify=function(){try{var e=ZHe(this.signature.buffer,this.algorithm,this.key.buffer),t=eWe(this.signature.buffer,this.encoding);return this.emit("done",e,t),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(n){this.readable=!1,this.emit("error",n),this.emit("close")}};AI.decode=eWe;AI.isValid=JHe;AI.verify=ZHe;tWe.exports=AI});var D3=O(Jb=>{var nWe=HHe(),N3=rWe(),B6t=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];Jb.ALGORITHMS=B6t;Jb.sign=nWe.sign;Jb.verify=N3.verify;Jb.decode=N3.decode;Jb.isValid=N3.isValid;Jb.createSign=function(e){return new nWe(e)};Jb.createVerify=function(e){return new N3(e)}});var xhe=O((zjr,iWe)=>{var G6t=D3();iWe.exports=function(r,e){e=e||{};var t=G6t.decode(r,e);if(!t)return null;var n=t.payload;if(typeof n=="string")try{var i=JSON.parse(n);i!==null&&typeof i=="object"&&(n=i)}catch{}return e.complete===!0?{header:t.header,payload:n,signature:t.signature}:n}});var oWe=O((Fjr,sWe)=>{var NI=1e3,DI=NI*60,MI=DI*60,IP=MI*24,$6t=IP*7,V6t=IP*365.25;sWe.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return H6t(r);if(t==="number"&&isFinite(r))return e.long?K6t(r):W6t(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function H6t(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*V6t;case"weeks":case"week":case"w":return t*$6t;case"days":case"day":case"d":return t*IP;case"hours":case"hour":case"hrs":case"hr":case"h":return t*MI;case"minutes":case"minute":case"mins":case"min":case"m":return t*DI;case"seconds":case"second":case"secs":case"sec":case"s":return t*NI;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function W6t(r){var e=Math.abs(r);return e>=IP?Math.round(r/IP)+"d":e>=MI?Math.round(r/MI)+"h":e>=DI?Math.round(r/DI)+"m":e>=NI?Math.round(r/NI)+"s":r+"ms"}function K6t(r){var e=Math.abs(r);return e>=IP?M3(r,e,IP,"day"):e>=MI?M3(r,e,MI,"hour"):e>=DI?M3(r,e,DI,"minute"):e>=NI?M3(r,e,NI,"second"):r+" ms"}function M3(r,e,t,n){var i=e>=t*1.5;return Math.round(r/t)+" "+n+(i?"s":"")}});var Ohe=O((jjr,aWe)=>{var Q6t=oWe();aWe.exports=function(r,e){var t=e||Math.floor(Date.now()/1e3);if(typeof r=="string"){var n=Q6t(r);return typeof n>"u"?void 0:Math.floor(t+n/1e3)}else return typeof r=="number"?t+r:void 0}});var uq=O((Ujr,cWe)=>{var Y6t="2.0.0",X6t=Number.MAX_SAFE_INTEGER||9007199254740991,J6t=16;cWe.exports={SEMVER_SPEC_VERSION:Y6t,MAX_LENGTH:256,MAX_SAFE_INTEGER:X6t,MAX_SAFE_COMPONENT_LENGTH:J6t}});var dq=O((Bjr,lWe)=>{var Z6t=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{};lWe.exports=Z6t});var RP=O((Zb,uWe)=>{var{MAX_SAFE_COMPONENT_LENGTH:Ahe}=uq(),eKt=dq();Zb=uWe.exports={};var tKt=Zb.re=[],Ur=Zb.src=[],Br=Zb.t={},rKt=0,Zn=(r,e,t)=>{let n=rKt++;eKt(r,n,e),Br[r]=n,Ur[n]=e,tKt[n]=new RegExp(e,t?"g":void 0)};Zn("NUMERICIDENTIFIER","0|[1-9]\\d*");Zn("NUMERICIDENTIFIERLOOSE","[0-9]+");Zn("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");Zn("MAINVERSION",`(${Ur[Br.NUMERICIDENTIFIER]})\\.(${Ur[Br.NUMERICIDENTIFIER]})\\.(${Ur[Br.NUMERICIDENTIFIER]})`);Zn("MAINVERSIONLOOSE",`(${Ur[Br.NUMERICIDENTIFIERLOOSE]})\\.(${Ur[Br.NUMERICIDENTIFIERLOOSE]})\\.(${Ur[Br.NUMERICIDENTIFIERLOOSE]})`);Zn("PRERELEASEIDENTIFIER",`(?:${Ur[Br.NUMERICIDENTIFIER]}|${Ur[Br.NONNUMERICIDENTIFIER]})`);Zn("PRERELEASEIDENTIFIERLOOSE",`(?:${Ur[Br.NUMERICIDENTIFIERLOOSE]}|${Ur[Br.NONNUMERICIDENTIFIER]})`);Zn("PRERELEASE",`(?:-(${Ur[Br.PRERELEASEIDENTIFIER]}(?:\\.${Ur[Br.PRERELEASEIDENTIFIER]})*))`);Zn("PRERELEASELOOSE",`(?:-?(${Ur[Br.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${Ur[Br.PRERELEASEIDENTIFIERLOOSE]})*))`);Zn("BUILDIDENTIFIER","[0-9A-Za-z-]+");Zn("BUILD",`(?:\\+(${Ur[Br.BUILDIDENTIFIER]}(?:\\.${Ur[Br.BUILDIDENTIFIER]})*))`);Zn("FULLPLAIN",`v?${Ur[Br.MAINVERSION]}${Ur[Br.PRERELEASE]}?${Ur[Br.BUILD]}?`);Zn("FULL",`^${Ur[Br.FULLPLAIN]}$`);Zn("LOOSEPLAIN",`[v=\\s]*${Ur[Br.MAINVERSIONLOOSE]}${Ur[Br.PRERELEASELOOSE]}?${Ur[Br.BUILD]}?`);Zn("LOOSE",`^${Ur[Br.LOOSEPLAIN]}$`);Zn("GTLT","((?:<|>)?=?)");Zn("XRANGEIDENTIFIERLOOSE",`${Ur[Br.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);Zn("XRANGEIDENTIFIER",`${Ur[Br.NUMERICIDENTIFIER]}|x|X|\\*`);Zn("XRANGEPLAIN",`[v=\\s]*(${Ur[Br.XRANGEIDENTIFIER]})(?:\\.(${Ur[Br.XRANGEIDENTIFIER]})(?:\\.(${Ur[Br.XRANGEIDENTIFIER]})(?:${Ur[Br.PRERELEASE]})?${Ur[Br.BUILD]}?)?)?`);Zn("XRANGEPLAINLOOSE",`[v=\\s]*(${Ur[Br.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Ur[Br.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Ur[Br.XRANGEIDENTIFIERLOOSE]})(?:${Ur[Br.PRERELEASELOOSE]})?${Ur[Br.BUILD]}?)?)?`);Zn("XRANGE",`^${Ur[Br.GTLT]}\\s*${Ur[Br.XRANGEPLAIN]}$`);Zn("XRANGELOOSE",`^${Ur[Br.GTLT]}\\s*${Ur[Br.XRANGEPLAINLOOSE]}$`);Zn("COERCE",`(^|[^\\d])(\\d{1,${Ahe}})(?:\\.(\\d{1,${Ahe}}))?(?:\\.(\\d{1,${Ahe}}))?(?:$|[^\\d])`);Zn("COERCERTL",Ur[Br.COERCE],!0);Zn("LONETILDE","(?:~>?)");Zn("TILDETRIM",`(\\s*)${Ur[Br.LONETILDE]}\\s+`,!0);Zb.tildeTrimReplace="$1~";Zn("TILDE",`^${Ur[Br.LONETILDE]}${Ur[Br.XRANGEPLAIN]}$`);Zn("TILDELOOSE",`^${Ur[Br.LONETILDE]}${Ur[Br.XRANGEPLAINLOOSE]}$`);Zn("LONECARET","(?:\\^)");Zn("CARETTRIM",`(\\s*)${Ur[Br.LONECARET]}\\s+`,!0);Zb.caretTrimReplace="$1^";Zn("CARET",`^${Ur[Br.LONECARET]}${Ur[Br.XRANGEPLAIN]}$`);Zn("CARETLOOSE",`^${Ur[Br.LONECARET]}${Ur[Br.XRANGEPLAINLOOSE]}$`);Zn("COMPARATORLOOSE",`^${Ur[Br.GTLT]}\\s*(${Ur[Br.LOOSEPLAIN]})$|^$`);Zn("COMPARATOR",`^${Ur[Br.GTLT]}\\s*(${Ur[Br.FULLPLAIN]})$|^$`);Zn("COMPARATORTRIM",`(\\s*)${Ur[Br.GTLT]}\\s*(${Ur[Br.LOOSEPLAIN]}|${Ur[Br.XRANGEPLAIN]})`,!0);Zb.comparatorTrimReplace="$1$2$3";Zn("HYPHENRANGE",`^\\s*(${Ur[Br.XRANGEPLAIN]})\\s+-\\s+(${Ur[Br.XRANGEPLAIN]})\\s*$`);Zn("HYPHENRANGELOOSE",`^\\s*(${Ur[Br.XRANGEPLAINLOOSE]})\\s+-\\s+(${Ur[Br.XRANGEPLAINLOOSE]})\\s*$`);Zn("STAR","(<|>)?=?\\s*\\*");Zn("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");Zn("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var pq=O((Gjr,dWe)=>{var nKt=["includePrerelease","loose","rtl"],iKt=r=>r?typeof r!="object"?{loose:!0}:nKt.filter(e=>r[e]).reduce((e,t)=>(e[t]=!0,e),{}):{};dWe.exports=iKt});var Nhe=O(($jr,hWe)=>{var pWe=/^[0-9]+$/,mWe=(r,e)=>{let t=pWe.test(r),n=pWe.test(e);return t&&n&&(r=+r,e=+e),r===e?0:t&&!n?-1:n&&!t?1:r<e?-1:1},sKt=(r,e)=>mWe(e,r);hWe.exports={compareIdentifiers:mWe,rcompareIdentifiers:sKt}});var fl=O((Vjr,vWe)=>{var k3=dq(),{MAX_LENGTH:fWe,MAX_SAFE_INTEGER:L3}=uq(),{re:gWe,t:yWe}=RP(),oKt=pq(),{compareIdentifiers:kI}=Nhe(),Dhe=class r{constructor(e,t){if(t=oKt(t),e instanceof r){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>fWe)throw new TypeError(`version is longer than ${fWe} characters`);k3("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let n=e.trim().match(t.loose?gWe[yWe.LOOSE]:gWe[yWe.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>L3||this.major<0)throw new TypeError("Invalid major version");if(this.minor>L3||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>L3||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<L3)return s}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(k3("SemVer.compare",this.version,this.options,e),!(e instanceof r)){if(typeof e=="string"&&e===this.version)return 0;e=new r(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof r||(e=new r(e,this.options)),kI(this.major,e.major)||kI(this.minor,e.minor)||kI(this.patch,e.patch)}comparePre(e){if(e instanceof r||(e=new r(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let n=this.prerelease[t],i=e.prerelease[t];if(k3("prerelease compare",t,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return kI(n,i)}while(++t)}compareBuild(e){e instanceof r||(e=new r(e,this.options));let t=0;do{let n=this.build[t],i=e.build[t];if(k3("prerelease compare",t,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return kI(n,i)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}t&&(kI(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};vWe.exports=Dhe});var xP=O((Hjr,CWe)=>{var{MAX_LENGTH:aKt}=uq(),{re:bWe,t:_We}=RP(),SWe=fl(),cKt=pq(),lKt=(r,e)=>{if(e=cKt(e),r instanceof SWe)return r;if(typeof r!="string"||r.length>aKt||!(e.loose?bWe[_We.LOOSE]:bWe[_We.FULL]).test(r))return null;try{return new SWe(r,e)}catch{return null}};CWe.exports=lKt});var wWe=O((Wjr,PWe)=>{var uKt=xP(),dKt=(r,e)=>{let t=uKt(r,e);return t?t.version:null};PWe.exports=dKt});var TWe=O((Kjr,EWe)=>{var pKt=xP(),mKt=(r,e)=>{let t=pKt(r.trim().replace(/^[=v]+/,""),e);return t?t.version:null};EWe.exports=mKt});var xWe=O((Qjr,RWe)=>{var IWe=fl(),hKt=(r,e,t,n)=>{typeof t=="string"&&(n=t,t=void 0);try{return new IWe(r instanceof IWe?r.version:r,t).inc(e,n).version}catch{return null}};RWe.exports=hKt});var gp=O((Yjr,AWe)=>{var OWe=fl(),fKt=(r,e,t)=>new OWe(r,t).compare(new OWe(e,t));AWe.exports=fKt});var q3=O((Xjr,NWe)=>{var gKt=gp(),yKt=(r,e,t)=>gKt(r,e,t)===0;NWe.exports=yKt});var kWe=O((Jjr,MWe)=>{var DWe=xP(),vKt=q3(),bKt=(r,e)=>{if(vKt(r,e))return null;{let t=DWe(r),n=DWe(e),i=t.prerelease.length||n.prerelease.length,s=i?"pre":"",o=i?"prerelease":"";for(let a in t)if((a==="major"||a==="minor"||a==="patch")&&t[a]!==n[a])return s+a;return o}};MWe.exports=bKt});var qWe=O((Zjr,LWe)=>{var _Kt=fl(),SKt=(r,e)=>new _Kt(r,e).major;LWe.exports=SKt});var FWe=O((eUr,zWe)=>{var CKt=fl(),PKt=(r,e)=>new CKt(r,e).minor;zWe.exports=PKt});var UWe=O((tUr,jWe)=>{var wKt=fl(),EKt=(r,e)=>new wKt(r,e).patch;jWe.exports=EKt});var GWe=O((rUr,BWe)=>{var TKt=xP(),IKt=(r,e)=>{let t=TKt(r,e);return t&&t.prerelease.length?t.prerelease:null};BWe.exports=IKt});var VWe=O((nUr,$We)=>{var RKt=gp(),xKt=(r,e,t)=>RKt(e,r,t);$We.exports=xKt});var WWe=O((iUr,HWe)=>{var OKt=gp(),AKt=(r,e)=>OKt(r,e,!0);HWe.exports=AKt});var z3=O((sUr,QWe)=>{var KWe=fl(),NKt=(r,e,t)=>{let n=new KWe(r,t),i=new KWe(e,t);return n.compare(i)||n.compareBuild(i)};QWe.exports=NKt});var XWe=O((oUr,YWe)=>{var DKt=z3(),MKt=(r,e)=>r.sort((t,n)=>DKt(t,n,e));YWe.exports=MKt});var ZWe=O((aUr,JWe)=>{var kKt=z3(),LKt=(r,e)=>r.sort((t,n)=>kKt(n,t,e));JWe.exports=LKt});var mq=O((cUr,e3e)=>{var qKt=gp(),zKt=(r,e,t)=>qKt(r,e,t)>0;e3e.exports=zKt});var F3=O((lUr,t3e)=>{var FKt=gp(),jKt=(r,e,t)=>FKt(r,e,t)<0;t3e.exports=jKt});var Mhe=O((uUr,r3e)=>{var UKt=gp(),BKt=(r,e,t)=>UKt(r,e,t)!==0;r3e.exports=BKt});var j3=O((dUr,n3e)=>{var GKt=gp(),$Kt=(r,e,t)=>GKt(r,e,t)>=0;n3e.exports=$Kt});var U3=O((pUr,i3e)=>{var VKt=gp(),HKt=(r,e,t)=>VKt(r,e,t)<=0;i3e.exports=HKt});var khe=O((mUr,s3e)=>{var WKt=q3(),KKt=Mhe(),QKt=mq(),YKt=j3(),XKt=F3(),JKt=U3(),ZKt=(r,e,t,n)=>{switch(e){case"===":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r===t;case"!==":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r!==t;case"":case"=":case"==":return WKt(r,t,n);case"!=":return KKt(r,t,n);case">":return QKt(r,t,n);case">=":return YKt(r,t,n);case"<":return XKt(r,t,n);case"<=":return JKt(r,t,n);default:throw new TypeError(`Invalid operator: ${e}`)}};s3e.exports=ZKt});var a3e=O((hUr,o3e)=>{var eQt=fl(),tQt=xP(),{re:B3,t:G3}=RP(),rQt=(r,e)=>{if(r instanceof eQt)return r;if(typeof r=="number"&&(r=String(r)),typeof r!="string")return null;e=e||{};let t=null;if(!e.rtl)t=r.match(B3[G3.COERCE]);else{let n;for(;(n=B3[G3.COERCERTL].exec(r))&&(!t||t.index+t[0].length!==r.length);)(!t||n.index+n[0].length!==t.index+t[0].length)&&(t=n),B3[G3.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;B3[G3.COERCERTL].lastIndex=-1}return t===null?null:tQt(`${t[2]}.${t[3]||"0"}.${t[4]||"0"}`,e)};o3e.exports=rQt});var l3e=O((fUr,c3e)=>{"use strict";c3e.exports=function(r){r.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var d3e=O((gUr,u3e)=>{"use strict";u3e.exports=Fi;Fi.Node=OP;Fi.create=Fi;function Fi(r){var e=this;if(e instanceof Fi||(e=new Fi),e.tail=null,e.head=null,e.length=0,r&&typeof r.forEach=="function")r.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var t=0,n=arguments.length;t<n;t++)e.push(arguments[t]);return e}Fi.prototype.removeNode=function(r){if(r.list!==this)throw new Error("removing node which does not belong to this list");var e=r.next,t=r.prev;return e&&(e.prev=t),t&&(t.next=e),r===this.head&&(this.head=e),r===this.tail&&(this.tail=t),r.list.length--,r.next=null,r.prev=null,r.list=null,e};Fi.prototype.unshiftNode=function(r){if(r!==this.head){r.list&&r.list.removeNode(r);var e=this.head;r.list=this,r.next=e,e&&(e.prev=r),this.head=r,this.tail||(this.tail=r),this.length++}};Fi.prototype.pushNode=function(r){if(r!==this.tail){r.list&&r.list.removeNode(r);var e=this.tail;r.list=this,r.prev=e,e&&(e.next=r),this.tail=r,this.head||(this.head=r),this.length++}};Fi.prototype.push=function(){for(var r=0,e=arguments.length;r<e;r++)iQt(this,arguments[r]);return this.length};Fi.prototype.unshift=function(){for(var r=0,e=arguments.length;r<e;r++)sQt(this,arguments[r]);return this.length};Fi.prototype.pop=function(){if(this.tail){var r=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,r}};Fi.prototype.shift=function(){if(this.head){var r=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,r}};Fi.prototype.forEach=function(r,e){e=e||this;for(var t=this.head,n=0;t!==null;n++)r.call(e,t.value,n,this),t=t.next};Fi.prototype.forEachReverse=function(r,e){e=e||this;for(var t=this.tail,n=this.length-1;t!==null;n--)r.call(e,t.value,n,this),t=t.prev};Fi.prototype.get=function(r){for(var e=0,t=this.head;t!==null&&e<r;e++)t=t.next;if(e===r&&t!==null)return t.value};Fi.prototype.getReverse=function(r){for(var e=0,t=this.tail;t!==null&&e<r;e++)t=t.prev;if(e===r&&t!==null)return t.value};Fi.prototype.map=function(r,e){e=e||this;for(var t=new Fi,n=this.head;n!==null;)t.push(r.call(e,n.value,this)),n=n.next;return t};Fi.prototype.mapReverse=function(r,e){e=e||this;for(var t=new Fi,n=this.tail;n!==null;)t.push(r.call(e,n.value,this)),n=n.prev;return t};Fi.prototype.reduce=function(r,e){var t,n=this.head;if(arguments.length>1)t=e;else if(this.head)n=this.head.next,t=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)t=r(t,n.value,i),n=n.next;return t};Fi.prototype.reduceReverse=function(r,e){var t,n=this.tail;if(arguments.length>1)t=e;else if(this.tail)n=this.tail.prev,t=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)t=r(t,n.value,i),n=n.prev;return t};Fi.prototype.toArray=function(){for(var r=new Array(this.length),e=0,t=this.head;t!==null;e++)r[e]=t.value,t=t.next;return r};Fi.prototype.toArrayReverse=function(){for(var r=new Array(this.length),e=0,t=this.tail;t!==null;e++)r[e]=t.value,t=t.prev;return r};Fi.prototype.slice=function(r,e){e=e||this.length,e<0&&(e+=this.length),r=r||0,r<0&&(r+=this.length);var t=new Fi;if(e<r||e<0)return t;r<0&&(r=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;i!==null&&n<r;n++)i=i.next;for(;i!==null&&n<e;n++,i=i.next)t.push(i.value);return t};Fi.prototype.sliceReverse=function(r,e){e=e||this.length,e<0&&(e+=this.length),r=r||0,r<0&&(r+=this.length);var t=new Fi;if(e<r||e<0)return t;r<0&&(r=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;i!==null&&n>e;n--)i=i.prev;for(;i!==null&&n>r;n--,i=i.prev)t.push(i.value);return t};Fi.prototype.splice=function(r,e,...t){r>this.length&&(r=this.length-1),r<0&&(r=this.length+r);for(var n=0,i=this.head;i!==null&&n<r;n++)i=i.next;for(var s=[],n=0;i&&n<e;n++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<t.length;n++)i=nQt(this,i,t[n]);return s};Fi.prototype.reverse=function(){for(var r=this.head,e=this.tail,t=r;t!==null;t=t.prev){var n=t.prev;t.prev=t.next,t.next=n}return this.head=e,this.tail=r,this};function nQt(r,e,t){var n=e===r.head?new OP(t,null,e,r):new OP(t,e,e.next,r);return n.next===null&&(r.tail=n),n.prev===null&&(r.head=n),r.length++,n}function iQt(r,e){r.tail=new OP(e,r.tail,null,r),r.head||(r.head=r.tail),r.length++}function sQt(r,e){r.head=new OP(e,null,r.head,r),r.tail||(r.tail=r.head),r.length++}function OP(r,e,t,n){if(!(this instanceof OP))return new OP(r,e,t,n);this.list=n,this.value=r,e?(e.next=this,this.prev=e):this.prev=null,t?(t.prev=this,this.next=t):this.next=null}try{l3e()(Fi)}catch{}});var g3e=O((yUr,f3e)=>{"use strict";var oQt=d3e(),AP=Symbol("max"),py=Symbol("length"),LI=Symbol("lengthCalculator"),fq=Symbol("allowStale"),NP=Symbol("maxAge"),dy=Symbol("dispose"),p3e=Symbol("noDisposeOnSet"),cc=Symbol("lruList"),Hm=Symbol("cache"),h3e=Symbol("updateAgeOnGet"),Lhe=()=>1,zhe=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let t=this[AP]=e.max||1/0,n=e.length||Lhe;if(this[LI]=typeof n!="function"?Lhe:n,this[fq]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[NP]=e.maxAge||0,this[dy]=e.dispose,this[p3e]=e.noDisposeOnSet||!1,this[h3e]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[AP]=e||1/0,hq(this)}get max(){return this[AP]}set allowStale(e){this[fq]=!!e}get allowStale(){return this[fq]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[NP]=e,hq(this)}get maxAge(){return this[NP]}set lengthCalculator(e){typeof e!="function"&&(e=Lhe),e!==this[LI]&&(this[LI]=e,this[py]=0,this[cc].forEach(t=>{t.length=this[LI](t.value,t.key),this[py]+=t.length})),hq(this)}get lengthCalculator(){return this[LI]}get length(){return this[py]}get itemCount(){return this[cc].length}rforEach(e,t){t=t||this;for(let n=this[cc].tail;n!==null;){let i=n.prev;m3e(this,e,n,t),n=i}}forEach(e,t){t=t||this;for(let n=this[cc].head;n!==null;){let i=n.next;m3e(this,e,n,t),n=i}}keys(){return this[cc].toArray().map(e=>e.key)}values(){return this[cc].toArray().map(e=>e.value)}reset(){this[dy]&&this[cc]&&this[cc].length&&this[cc].forEach(e=>this[dy](e.key,e.value)),this[Hm]=new Map,this[cc]=new oQt,this[py]=0}dump(){return this[cc].map(e=>$3(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[cc]}set(e,t,n){if(n=n||this[NP],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let i=n?Date.now():0,s=this[LI](t,e);if(this[Hm].has(e)){if(s>this[AP])return qI(this,this[Hm].get(e)),!1;let c=this[Hm].get(e).value;return this[dy]&&(this[p3e]||this[dy](e,c.value)),c.now=i,c.maxAge=n,c.value=t,this[py]+=s-c.length,c.length=s,this.get(e),hq(this),!0}let o=new Fhe(e,t,s,i,n);return o.length>this[AP]?(this[dy]&&this[dy](e,t),!1):(this[py]+=o.length,this[cc].unshift(o),this[Hm].set(e,this[cc].head),hq(this),!0)}has(e){if(!this[Hm].has(e))return!1;let t=this[Hm].get(e).value;return!$3(this,t)}get(e){return qhe(this,e,!0)}peek(e){return qhe(this,e,!1)}pop(){let e=this[cc].tail;return e?(qI(this,e),e.value):null}del(e){qI(this,this[Hm].get(e))}load(e){this.reset();let t=Date.now();for(let n=e.length-1;n>=0;n--){let i=e[n],s=i.e||0;if(s===0)this.set(i.k,i.v);else{let o=s-t;o>0&&this.set(i.k,i.v,o)}}}prune(){this[Hm].forEach((e,t)=>qhe(this,t,!1))}},qhe=(r,e,t)=>{let n=r[Hm].get(e);if(n){let i=n.value;if($3(r,i)){if(qI(r,n),!r[fq])return}else t&&(r[h3e]&&(n.value.now=Date.now()),r[cc].unshiftNode(n));return i.value}},$3=(r,e)=>{if(!e||!e.maxAge&&!r[NP])return!1;let t=Date.now()-e.now;return e.maxAge?t>e.maxAge:r[NP]&&t>r[NP]},hq=r=>{if(r[py]>r[AP])for(let e=r[cc].tail;r[py]>r[AP]&&e!==null;){let t=e.prev;qI(r,e),e=t}},qI=(r,e)=>{if(e){let t=e.value;r[dy]&&r[dy](t.key,t.value),r[py]-=t.length,r[Hm].delete(t.key),r[cc].removeNode(e)}},Fhe=class{constructor(e,t,n,i,s){this.key=e,this.value=t,this.length=n,this.now=i,this.maxAge=s||0}},m3e=(r,e,t,n)=>{let i=t.value;$3(r,i)&&(qI(r,t),r[fq]||(i=void 0)),i&&e.call(n,i.value,i.key,r)};f3e.exports=zhe});var yp=O((vUr,_3e)=>{var jhe=class r{constructor(e,t){if(t=cQt(t),e instanceof r)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new r(e.raw,t);if(e instanceof Uhe)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!v3e(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&mQt(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();let n=`parseRange:${Object.keys(this.options).join(",")}:${e}`,i=y3e.get(n);if(i)return i;let s=this.options.loose,o=s?Eu[Ql.HYPHENRANGELOOSE]:Eu[Ql.HYPHENRANGE];e=e.replace(o,PQt(this.options.includePrerelease)),Eo("hyphen replace",e),e=e.replace(Eu[Ql.COMPARATORTRIM],uQt),Eo("comparator trim",e),e=e.replace(Eu[Ql.TILDETRIM],dQt),e=e.replace(Eu[Ql.CARETTRIM],pQt),e=e.split(/\s+/).join(" ");let a=e.split(" ").map(d=>hQt(d,this.options)).join(" ").split(/\s+/).map(d=>CQt(d,this.options));s&&(a=a.filter(d=>(Eo("loose invalid filter",d,this.options),!!d.match(Eu[Ql.COMPARATORLOOSE])))),Eo("range list",a);let c=new Map,l=a.map(d=>new Uhe(d,this.options));for(let d of l){if(v3e(d))return[d];c.set(d.value,d)}c.size>1&&c.has("")&&c.delete("");let u=[...c.values()];return y3e.set(n,u),u}intersects(e,t){if(!(e instanceof r))throw new TypeError("a Range is required");return this.set.some(n=>b3e(n,t)&&e.set.some(i=>b3e(i,t)&&n.every(s=>i.every(o=>s.intersects(o,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new lQt(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(wQt(this.set[t],e,this.options))return!0;return!1}};_3e.exports=jhe;var aQt=g3e(),y3e=new aQt({max:1e3}),cQt=pq(),Uhe=gq(),Eo=dq(),lQt=fl(),{re:Eu,t:Ql,comparatorTrimReplace:uQt,tildeTrimReplace:dQt,caretTrimReplace:pQt}=RP(),v3e=r=>r.value==="<0.0.0-0",mQt=r=>r.value==="",b3e=(r,e)=>{let t=!0,n=r.slice(),i=n.pop();for(;t&&n.length;)t=n.every(s=>i.intersects(s,e)),i=n.pop();return t},hQt=(r,e)=>(Eo("comp",r,e),r=yQt(r,e),Eo("caret",r),r=fQt(r,e),Eo("tildes",r),r=bQt(r,e),Eo("xrange",r),r=SQt(r,e),Eo("stars",r),r),Yl=r=>!r||r.toLowerCase()==="x"||r==="*",fQt=(r,e)=>r.trim().split(/\s+/).map(t=>gQt(t,e)).join(" "),gQt=(r,e)=>{let t=e.loose?Eu[Ql.TILDELOOSE]:Eu[Ql.TILDE];return r.replace(t,(n,i,s,o,a)=>{Eo("tilde",r,n,i,s,o,a);let c;return Yl(i)?c="":Yl(s)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:Yl(o)?c=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:a?(Eo("replaceTilde pr",a),c=`>=${i}.${s}.${o}-${a} <${i}.${+s+1}.0-0`):c=`>=${i}.${s}.${o} <${i}.${+s+1}.0-0`,Eo("tilde return",c),c})},yQt=(r,e)=>r.trim().split(/\s+/).map(t=>vQt(t,e)).join(" "),vQt=(r,e)=>{Eo("caret",r,e);let t=e.loose?Eu[Ql.CARETLOOSE]:Eu[Ql.CARET],n=e.includePrerelease?"-0":"";return r.replace(t,(i,s,o,a,c)=>{Eo("caret",r,i,s,o,a,c);let l;return Yl(s)?l="":Yl(o)?l=`>=${s}.0.0${n} <${+s+1}.0.0-0`:Yl(a)?s==="0"?l=`>=${s}.${o}.0${n} <${s}.${+o+1}.0-0`:l=`>=${s}.${o}.0${n} <${+s+1}.0.0-0`:c?(Eo("replaceCaret pr",c),s==="0"?o==="0"?l=`>=${s}.${o}.${a}-${c} <${s}.${o}.${+a+1}-0`:l=`>=${s}.${o}.${a}-${c} <${s}.${+o+1}.0-0`:l=`>=${s}.${o}.${a}-${c} <${+s+1}.0.0-0`):(Eo("no pr"),s==="0"?o==="0"?l=`>=${s}.${o}.${a}${n} <${s}.${o}.${+a+1}-0`:l=`>=${s}.${o}.${a}${n} <${s}.${+o+1}.0-0`:l=`>=${s}.${o}.${a} <${+s+1}.0.0-0`),Eo("caret return",l),l})},bQt=(r,e)=>(Eo("replaceXRanges",r,e),r.split(/\s+/).map(t=>_Qt(t,e)).join(" ")),_Qt=(r,e)=>{r=r.trim();let t=e.loose?Eu[Ql.XRANGELOOSE]:Eu[Ql.XRANGE];return r.replace(t,(n,i,s,o,a,c)=>{Eo("xRange",r,n,i,s,o,a,c);let l=Yl(s),u=l||Yl(o),d=u||Yl(a),p=d;return i==="="&&p&&(i=""),c=e.includePrerelease?"-0":"",l?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&p?(u&&(o=0),a=0,i===">"?(i=">=",u?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):i==="<="&&(i="<",u?s=+s+1:o=+o+1),i==="<"&&(c="-0"),n=`${i+s}.${o}.${a}${c}`):u?n=`>=${s}.0.0${c} <${+s+1}.0.0-0`:d&&(n=`>=${s}.${o}.0${c} <${s}.${+o+1}.0-0`),Eo("xRange return",n),n})},SQt=(r,e)=>(Eo("replaceStars",r,e),r.trim().replace(Eu[Ql.STAR],"")),CQt=(r,e)=>(Eo("replaceGTE0",r,e),r.trim().replace(Eu[e.includePrerelease?Ql.GTE0PRE:Ql.GTE0],"")),PQt=r=>(e,t,n,i,s,o,a,c,l,u,d,p,m)=>(Yl(n)?t="":Yl(i)?t=`>=${n}.0.0${r?"-0":""}`:Yl(s)?t=`>=${n}.${i}.0${r?"-0":""}`:o?t=`>=${t}`:t=`>=${t}${r?"-0":""}`,Yl(l)?c="":Yl(u)?c=`<${+l+1}.0.0-0`:Yl(d)?c=`<${l}.${+u+1}.0-0`:p?c=`<=${l}.${u}.${d}-${p}`:r?c=`<${l}.${u}.${+d+1}-0`:c=`<=${c}`,`${t} ${c}`.trim()),wQt=(r,e,t)=>{for(let n=0;n<r.length;n++)if(!r[n].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(let n=0;n<r.length;n++)if(Eo(r[n].semver),r[n].semver!==Uhe.ANY&&r[n].semver.prerelease.length>0){let i=r[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var gq=O((bUr,E3e)=>{var yq=Symbol("SemVer ANY"),$he=class r{static get ANY(){return yq}constructor(e,t){if(t=EQt(t),e instanceof r){if(e.loose===!!t.loose)return e;e=e.value}Ghe("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===yq?this.value="":this.value=this.operator+this.semver.version,Ghe("comp",this)}parse(e){let t=this.options.loose?S3e[C3e.COMPARATORLOOSE]:S3e[C3e.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new P3e(n[2],this.options.loose):this.semver=yq}toString(){return this.value}test(e){if(Ghe("Comparator.test",e,this.options.loose),this.semver===yq||e===yq)return!0;if(typeof e=="string")try{e=new P3e(e,this.options)}catch{return!1}return Bhe(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof r))throw new TypeError("a Comparator is required");if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new w3e(e.value,t).test(this.value);if(e.operator==="")return e.value===""?!0:new w3e(this.value,t).test(e.semver);let n=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),s=this.semver.version===e.semver.version,o=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),a=Bhe(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),c=Bhe(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||i||s&&o||a||c}};E3e.exports=$he;var EQt=pq(),{re:S3e,t:C3e}=RP(),Bhe=khe(),Ghe=dq(),P3e=fl(),w3e=yp()});var vq=O((_Ur,T3e)=>{var TQt=yp(),IQt=(r,e,t)=>{try{e=new TQt(e,t)}catch{return!1}return e.test(r)};T3e.exports=IQt});var R3e=O((SUr,I3e)=>{var RQt=yp(),xQt=(r,e)=>new RQt(r,e).set.map(t=>t.map(n=>n.value).join(" ").trim().split(" "));I3e.exports=xQt});var O3e=O((CUr,x3e)=>{var OQt=fl(),AQt=yp(),NQt=(r,e,t)=>{let n=null,i=null,s=null;try{s=new AQt(e,t)}catch{return null}return r.forEach(o=>{s.test(o)&&(!n||i.compare(o)===-1)&&(n=o,i=new OQt(n,t))}),n};x3e.exports=NQt});var N3e=O((PUr,A3e)=>{var DQt=fl(),MQt=yp(),kQt=(r,e,t)=>{let n=null,i=null,s=null;try{s=new MQt(e,t)}catch{return null}return r.forEach(o=>{s.test(o)&&(!n||i.compare(o)===1)&&(n=o,i=new DQt(n,t))}),n};A3e.exports=kQt});var k3e=O((wUr,M3e)=>{var Vhe=fl(),LQt=yp(),D3e=mq(),qQt=(r,e)=>{r=new LQt(r,e);let t=new Vhe("0.0.0");if(r.test(t)||(t=new Vhe("0.0.0-0"),r.test(t)))return t;t=null;for(let n=0;n<r.set.length;++n){let i=r.set[n],s=null;i.forEach(o=>{let a=new Vhe(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!s||D3e(a,s))&&(s=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),s&&(!t||D3e(t,s))&&(t=s)}return t&&r.test(t)?t:null};M3e.exports=qQt});var q3e=O((EUr,L3e)=>{var zQt=yp(),FQt=(r,e)=>{try{return new zQt(r,e).range||"*"}catch{return null}};L3e.exports=FQt});var V3=O((TUr,U3e)=>{var jQt=fl(),j3e=gq(),{ANY:UQt}=j3e,BQt=yp(),GQt=vq(),z3e=mq(),F3e=F3(),$Qt=U3(),VQt=j3(),HQt=(r,e,t,n)=>{r=new jQt(r,n),e=new BQt(e,n);let i,s,o,a,c;switch(t){case">":i=z3e,s=$Qt,o=F3e,a=">",c=">=";break;case"<":i=F3e,s=VQt,o=z3e,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(GQt(r,e,n))return!1;for(let l=0;l<e.set.length;++l){let u=e.set[l],d=null,p=null;if(u.forEach(m=>{m.semver===UQt&&(m=new j3e(">=0.0.0")),d=d||m,p=p||m,i(m.semver,d.semver,n)?d=m:o(m.semver,p.semver,n)&&(p=m)}),d.operator===a||d.operator===c||(!p.operator||p.operator===a)&&s(r,p.semver))return!1;if(p.operator===c&&o(r,p.semver))return!1}return!0};U3e.exports=HQt});var G3e=O((IUr,B3e)=>{var WQt=V3(),KQt=(r,e,t)=>WQt(r,e,">",t);B3e.exports=KQt});var V3e=O((RUr,$3e)=>{var QQt=V3(),YQt=(r,e,t)=>QQt(r,e,"<",t);$3e.exports=YQt});var K3e=O((xUr,W3e)=>{var H3e=yp(),XQt=(r,e,t)=>(r=new H3e(r,t),e=new H3e(e,t),r.intersects(e));W3e.exports=XQt});var Y3e=O((OUr,Q3e)=>{var JQt=vq(),ZQt=gp();Q3e.exports=(r,e,t)=>{let n=[],i=null,s=null,o=r.sort((u,d)=>ZQt(u,d,t));for(let u of o)JQt(u,e,t)?(s=u,i||(i=u)):(s&&n.push([i,s]),s=null,i=null);i&&n.push([i,null]);let a=[];for(let[u,d]of n)u===d?a.push(u):!d&&u===o[0]?a.push("*"):d?u===o[0]?a.push(`<=${d}`):a.push(`${u} - ${d}`):a.push(`>=${u}`);let c=a.join(" || "),l=typeof e.raw=="string"?e.raw:String(e);return c.length<l.length?c:e}});var t4e=O((AUr,e4e)=>{var X3e=yp(),H3=gq(),{ANY:Hhe}=H3,bq=vq(),Whe=gp(),eYt=(r,e,t={})=>{if(r===e)return!0;r=new X3e(r,t),e=new X3e(e,t);let n=!1;e:for(let i of r.set){for(let s of e.set){let o=tYt(i,s,t);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},tYt=(r,e,t)=>{if(r===e)return!0;if(r.length===1&&r[0].semver===Hhe){if(e.length===1&&e[0].semver===Hhe)return!0;t.includePrerelease?r=[new H3(">=0.0.0-0")]:r=[new H3(">=0.0.0")]}if(e.length===1&&e[0].semver===Hhe){if(t.includePrerelease)return!0;e=[new H3(">=0.0.0")]}let n=new Set,i,s;for(let m of r)m.operator===">"||m.operator===">="?i=J3e(i,m,t):m.operator==="<"||m.operator==="<="?s=Z3e(s,m,t):n.add(m.semver);if(n.size>1)return null;let o;if(i&&s){if(o=Whe(i.semver,s.semver,t),o>0)return null;if(o===0&&(i.operator!==">="||s.operator!=="<="))return null}for(let m of n){if(i&&!bq(m,String(i),t)||s&&!bq(m,String(s),t))return null;for(let f of e)if(!bq(m,String(f),t))return!1;return!0}let a,c,l,u,d=s&&!t.includePrerelease&&s.semver.prerelease.length?s.semver:!1,p=i&&!t.includePrerelease&&i.semver.prerelease.length?i.semver:!1;d&&d.prerelease.length===1&&s.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let m of e){if(u=u||m.operator===">"||m.operator===">=",l=l||m.operator==="<"||m.operator==="<=",i){if(p&&m.semver.prerelease&&m.semver.prerelease.length&&m.semver.major===p.major&&m.semver.minor===p.minor&&m.semver.patch===p.patch&&(p=!1),m.operator===">"||m.operator===">="){if(a=J3e(i,m,t),a===m&&a!==i)return!1}else if(i.operator===">="&&!bq(i.semver,String(m),t))return!1}if(s){if(d&&m.semver.prerelease&&m.semver.prerelease.length&&m.semver.major===d.major&&m.semver.minor===d.minor&&m.semver.patch===d.patch&&(d=!1),m.operator==="<"||m.operator==="<="){if(c=Z3e(s,m,t),c===m&&c!==s)return!1}else if(s.operator==="<="&&!bq(s.semver,String(m),t))return!1}if(!m.operator&&(s||i)&&o!==0)return!1}return!(i&&l&&!s&&o!==0||s&&u&&!i&&o!==0||p||d)},J3e=(r,e,t)=>{if(!r)return e;let n=Whe(r.semver,e.semver,t);return n>0?r:n<0||e.operator===">"&&r.operator===">="?e:r},Z3e=(r,e,t)=>{if(!r)return e;let n=Whe(r.semver,e.semver,t);return n<0?r:n>0||e.operator==="<"&&r.operator==="<="?e:r};e4e.exports=eYt});var W3=O((NUr,n4e)=>{var Khe=RP(),rYt=uq(),nYt=fl(),r4e=Nhe(),iYt=xP(),sYt=wWe(),oYt=TWe(),aYt=xWe(),cYt=kWe(),lYt=qWe(),uYt=FWe(),dYt=UWe(),pYt=GWe(),mYt=gp(),hYt=VWe(),fYt=WWe(),gYt=z3(),yYt=XWe(),vYt=ZWe(),bYt=mq(),_Yt=F3(),SYt=q3(),CYt=Mhe(),PYt=j3(),wYt=U3(),EYt=khe(),TYt=a3e(),IYt=gq(),RYt=yp(),xYt=vq(),OYt=R3e(),AYt=O3e(),NYt=N3e(),DYt=k3e(),MYt=q3e(),kYt=V3(),LYt=G3e(),qYt=V3e(),zYt=K3e(),FYt=Y3e(),jYt=t4e();n4e.exports={parse:iYt,valid:sYt,clean:oYt,inc:aYt,diff:cYt,major:lYt,minor:uYt,patch:dYt,prerelease:pYt,compare:mYt,rcompare:hYt,compareLoose:fYt,compareBuild:gYt,sort:yYt,rsort:vYt,gt:bYt,lt:_Yt,eq:SYt,neq:CYt,gte:PYt,lte:wYt,cmp:EYt,coerce:TYt,Comparator:IYt,Range:RYt,satisfies:xYt,toComparators:OYt,maxSatisfying:AYt,minSatisfying:NYt,minVersion:DYt,validRange:MYt,outside:kYt,gtr:LYt,ltr:qYt,intersects:zYt,simplifyRange:FYt,subset:jYt,SemVer:nYt,re:Khe.re,src:Khe.src,tokens:Khe.t,SEMVER_SPEC_VERSION:rYt.SEMVER_SPEC_VERSION,compareIdentifiers:r4e.compareIdentifiers,rcompareIdentifiers:r4e.rcompareIdentifiers}});var s4e=O((DUr,i4e)=>{var UYt=W3();i4e.exports=UYt.satisfies(process.version,">=15.7.0")});var a4e=O((MUr,o4e)=>{var BYt=W3();o4e.exports=BYt.satisfies(process.version,">=16.9.0")});var Qhe=O((kUr,c4e)=>{var GYt=s4e(),$Yt=a4e(),VYt={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},HYt={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};c4e.exports=function(r,e){if(!r||!e)return;let t=e.asymmetricKeyType;if(!t)return;let n=VYt[t];if(!n)throw new Error(`Unknown key type "${t}".`);if(!n.includes(r))throw new Error(`"alg" parameter for "${t}" key type must be one of: ${n.join(", ")}.`);if(GYt)switch(t){case"ec":let i=e.asymmetricKeyDetails.namedCurve,s=HYt[r];if(i!==s)throw new Error(`"alg" parameter "${r}" requires curve "${s}".`);break;case"rsa-pss":if($Yt){let o=parseInt(r.slice(-3),10),{hashAlgorithm:a,mgf1HashAlgorithm:c,saltLength:l}=e.asymmetricKeyDetails;if(a!==`sha${o}`||c!==a)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${r}.`);if(l!==void 0&&l>o>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${r}.`)}break}}});var Yhe=O((LUr,l4e)=>{var WYt=W3();l4e.exports=WYt.satisfies(process.version,"^6.12.0 || >=8.0.0")});var p4e=O((qUr,d4e)=>{var js=oq(),KYt=vhe(),u4e=bhe(),QYt=xhe(),YYt=Ohe(),XYt=Qhe(),JYt=Yhe(),ZYt=D3(),{KeyObject:e5t,createSecretKey:t5t,createPublicKey:r5t}=require("crypto"),Xhe=["RS256","RS384","RS512"],n5t=["ES256","ES384","ES512"],Jhe=["RS256","RS384","RS512"],i5t=["HS256","HS384","HS512"];JYt&&(Xhe.splice(Xhe.length,0,"PS256","PS384","PS512"),Jhe.splice(Jhe.length,0,"PS256","PS384","PS512"));d4e.exports=function(r,e,t,n){typeof t=="function"&&!n&&(n=t,t={}),t||(t={}),t=Object.assign({},t);let i;if(n?i=n:i=function(u,d){if(u)throw u;return d},t.clockTimestamp&&typeof t.clockTimestamp!="number")return i(new js("clockTimestamp must be a number"));if(t.nonce!==void 0&&(typeof t.nonce!="string"||t.nonce.trim()===""))return i(new js("nonce must be a non-empty string"));if(t.allowInvalidAsymmetricKeyTypes!==void 0&&typeof t.allowInvalidAsymmetricKeyTypes!="boolean")return i(new js("allowInvalidAsymmetricKeyTypes must be a boolean"));let s=t.clockTimestamp||Math.floor(Date.now()/1e3);if(!r)return i(new js("jwt must be provided"));if(typeof r!="string")return i(new js("jwt must be a string"));let o=r.split(".");if(o.length!==3)return i(new js("jwt malformed"));let a;try{a=QYt(r,{complete:!0})}catch(u){return i(u)}if(!a)return i(new js("invalid token"));let c=a.header,l;if(typeof e=="function"){if(!n)return i(new js("verify must be called asynchronous if secret or public key is provided as a callback"));l=e}else l=function(u,d){return d(null,e)};return l(c,function(u,d){if(u)return i(new js("error in secret or public key callback: "+u.message));let p=o[2].trim()!=="";if(!p&&d)return i(new js("jwt signature is required"));if(p&&!d)return i(new js("secret or public key must be provided"));if(!p&&!t.algorithms)return i(new js('please specify "none" in "algorithms" to verify unsigned tokens'));if(d!=null&&!(d instanceof e5t))try{d=r5t(d)}catch{try{d=t5t(typeof d=="string"?Buffer.from(d):d)}catch{return i(new js("secretOrPublicKey is not valid key material"))}}if(t.algorithms||(d.type==="secret"?t.algorithms=i5t:["rsa","rsa-pss"].includes(d.asymmetricKeyType)?t.algorithms=Jhe:d.asymmetricKeyType==="ec"?t.algorithms=n5t:t.algorithms=Xhe),t.algorithms.indexOf(a.header.alg)===-1)return i(new js("invalid algorithm"));if(c.alg.startsWith("HS")&&d.type!=="secret")return i(new js(`secretOrPublicKey must be a symmetric key when using ${c.alg}`));if(/^(?:RS|PS|ES)/.test(c.alg)&&d.type!=="public")return i(new js(`secretOrPublicKey must be an asymmetric key when using ${c.alg}`));if(!t.allowInvalidAsymmetricKeyTypes)try{XYt(c.alg,d)}catch(y){return i(y)}let m;try{m=ZYt.verify(r,a.header.alg,d)}catch(y){return i(y)}if(!m)return i(new js("invalid signature"));let f=a.payload;if(typeof f.nbf<"u"&&!t.ignoreNotBefore){if(typeof f.nbf!="number")return i(new js("invalid nbf value"));if(f.nbf>s+(t.clockTolerance||0))return i(new KYt("jwt not active",new Date(f.nbf*1e3)))}if(typeof f.exp<"u"&&!t.ignoreExpiration){if(typeof f.exp!="number")return i(new js("invalid exp value"));if(s>=f.exp+(t.clockTolerance||0))return i(new u4e("jwt expired",new Date(f.exp*1e3)))}if(t.audience){let y=Array.isArray(t.audience)?t.audience:[t.audience];if(!(Array.isArray(f.aud)?f.aud:[f.aud]).some(function(C){return y.some(function(P){return P instanceof RegExp?P.test(C):P===C})}))return i(new js("jwt audience invalid. expected: "+y.join(" or ")))}if(t.issuer&&(typeof t.issuer=="string"&&f.iss!==t.issuer||Array.isArray(t.issuer)&&t.issuer.indexOf(f.iss)===-1))return i(new js("jwt issuer invalid. expected: "+t.issuer));if(t.subject&&f.sub!==t.subject)return i(new js("jwt subject invalid. expected: "+t.subject));if(t.jwtid&&f.jti!==t.jwtid)return i(new js("jwt jwtid invalid. expected: "+t.jwtid));if(t.nonce&&f.nonce!==t.nonce)return i(new js("jwt nonce invalid. expected: "+t.nonce));if(t.maxAge){if(typeof f.iat!="number")return i(new js("iat required when maxAge is specified"));let y=YYt(t.maxAge,f.iat);if(typeof y>"u")return i(new js('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(s>=y+(t.clockTolerance||0))return i(new u4e("maxAge exceeded",new Date(y*1e3)))}if(t.complete===!0){let y=a.signature;return i(null,{header:c,payload:f,signature:y})}return i(null,f)})}});var m4e=O((zI,_q)=>{(function(){var r,e="4.17.21",t=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",s="Invalid `variable` option passed into `_.template`",o="__lodash_hash_undefined__",a=500,c="__lodash_placeholder__",l=1,u=2,d=4,p=1,m=2,f=1,y=2,v=4,_=8,C=16,P=32,w=64,R=128,I=256,z=512,G=30,L="...",H=800,ee=16,ye=1,$e=2,Be=3,Ct=1/0,Ge=9007199254740991,pe=17976931348623157e292,Ie=NaN,Ve=4294967295,lt=Ve-1,ut=Ve>>>1,ce=[["ary",R],["bind",f],["bindKey",y],["curry",_],["curryRight",C],["flip",z],["partial",P],["partialRight",w],["rearg",I]],ue="[object Arguments]",Ue="[object Array]",ct="[object AsyncFunction]",jt="[object Boolean]",tr="[object Date]",se="[object DOMException]",we="[object Error]",Ne="[object Function]",Re="[object GeneratorFunction]",Le="[object Map]",ht="[object Number]",Ee="[object Null]",ie="[object Object]",je="[object Promise]",le="[object Proxy]",_e="[object RegExp]",B="[object Set]",be="[object String]",ke="[object Symbol]",W="[object Undefined]",Oe="[object WeakMap]",Ht="[object WeakSet]",_r="[object ArrayBuffer]",fr="[object DataView]",He="[object Float32Array]",Xe="[object Float64Array]",J="[object Int8Array]",fe="[object Int16Array]",Ke="[object Int32Array]",nt="[object Uint8Array]",Ut="[object Uint8ClampedArray]",er="[object Uint16Array]",Cr="[object Uint32Array]",gr=/\b__p \+= '';/g,dt=/\b(__p \+=) '' \+/g,It=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Je=/&(?:amp|lt|gt|quot|#39);/g,Ye=/[&<>"']/g,pr=RegExp(Je.source),Kr=RegExp(Ye.source),Bt=/<%-([\s\S]+?)%>/g,pi=/<%([\s\S]+?)%>/g,Yi=/<%=([\s\S]+?)%>/g,Do=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,aa=/^\w*$/,za=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,mr=/[\\^$.*+?()[\]{}|]/g,or=RegExp(mr.source),$t=/^\s+/,yt=/\s/,Pr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ir=/\{\n\/\* \[wrapped with (.+)\] \*/,Yt=/,? & /,$r=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,tn=/[()=,{}\[\]\/\s]/,ei=/\\(\\)?/g,Xi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,mi=/\w*$/,ni=/^[-+]0x[0-9a-f]+$/i,Lr=/^0b[01]+$/i,On=/^\[object .+?Constructor\]$/,E=/^0o[0-7]+$/i,x=/^(?:0|[1-9]\d*)$/,j=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ne=/($^)/,re=/['\n\r\u2028\u2029\\]/g,he="\\ud800-\\udfff",Se="\\u0300-\\u036f",ot="\\ufe20-\\ufe2f",it="\\u20d0-\\u20ff",zr=Se+ot+it,Vr="\\u2700-\\u27bf",sr="a-z\\xdf-\\xf6\\xf8-\\xff",qr="\\xac\\xb1\\xd7\\xf7",Or="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Hs="\\u2000-\\u206f",Ni=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Jr="A-Z\\xc0-\\xd6\\xd8-\\xde",ci="\\ufe0e\\ufe0f",bl=qr+Or+Hs+Ni,po="['\u2019]",ca="["+he+"]",ru="["+bl+"]",hc="["+zr+"]",Ad="\\d+",Ws="["+Vr+"]",fc="["+sr+"]",gc="[^"+he+bl+Ad+Vr+sr+Jr+"]",la="\\ud83c[\\udffb-\\udfff]",_l="(?:"+hc+"|"+la+")",Sl="[^"+he+"]",Wo="(?:\\ud83c[\\udde6-\\uddff]){2}",Cl="[\\ud800-\\udbff][\\udc00-\\udfff]",Fa="["+Jr+"]",Nd="\\u200d",ja="(?:"+fc+"|"+gc+")",Fp="(?:"+Fa+"|"+gc+")",Nu="(?:"+po+"(?:d|ll|m|re|s|t|ve))?",yc="(?:"+po+"(?:D|LL|M|RE|S|T|VE))?",ua=_l+"?",Dd="["+ci+"]?",qe="(?:"+Nd+"(?:"+[Sl,Wo,Cl].join("|")+")"+Dd+ua+")*",zt="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ft="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Zt=Dd+ua+qe,Ar="(?:"+[Ws,Wo,Cl].join("|")+")"+Zt,pn="(?:"+[Sl+hc+"?",hc,Wo,Cl,ca].join("|")+")",on=RegExp(po,"g"),In=RegExp(hc,"g"),rn=RegExp(la+"(?="+la+")|"+pn+Zt,"g"),Nr=RegExp([Fa+"?"+fc+"+"+Nu+"(?="+[ru,Fa,"$"].join("|")+")",Fp+"+"+yc+"(?="+[ru,Fa+ja,"$"].join("|")+")",Fa+"?"+ja+"+"+Nu,Fa+"+"+yc,Ft,zt,Ad,Ar].join("|"),"g"),Fe=RegExp("["+Nd+he+zr+ci+"]"),wt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Gt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ar=-1,yr={};yr[He]=yr[Xe]=yr[J]=yr[fe]=yr[Ke]=yr[nt]=yr[Ut]=yr[er]=yr[Cr]=!0,yr[ue]=yr[Ue]=yr[_r]=yr[jt]=yr[fr]=yr[tr]=yr[we]=yr[Ne]=yr[Le]=yr[ht]=yr[ie]=yr[_e]=yr[B]=yr[be]=yr[Oe]=!1;var vr={};vr[ue]=vr[Ue]=vr[_r]=vr[fr]=vr[jt]=vr[tr]=vr[He]=vr[Xe]=vr[J]=vr[fe]=vr[Ke]=vr[Le]=vr[ht]=vr[ie]=vr[_e]=vr[B]=vr[be]=vr[ke]=vr[nt]=vr[Ut]=vr[er]=vr[Cr]=!0,vr[we]=vr[Ne]=vr[Oe]=!1;var vs={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Ks={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ko={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Pl={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},oe=parseFloat,Ae=parseInt,et=typeof global=="object"&&global&&global.Object===Object&&global,xr=typeof self=="object"&&self&&self.Object===Object&&self,Fr=et||xr||Function("return this")(),Di=typeof zI=="object"&&zI&&!zI.nodeType&&zI,_i=Di&&typeof _q=="object"&&_q&&!_q.nodeType&&_q,Yn=_i&&_i.exports===Di,Ji=Yn&&et.process,Ts=function(){try{var De=_i&&_i.require&&_i.require("util").types;return De||Ji&&Ji.binding&&Ji.binding("util")}catch{}}(),Ua=Ts&&Ts.isArrayBuffer,rh=Ts&&Ts.isDate,Iy=Ts&&Ts.isMap,Ry=Ts&&Ts.isRegExp,xy=Ts&&Ts.isSet,rF=Ts&&Ts.isTypedArray;function wl(De,gt,tt){switch(tt.length){case 0:return De.call(gt);case 1:return De.call(gt,tt[0]);case 2:return De.call(gt,tt[0],tt[1]);case 3:return De.call(gt,tt[0],tt[1],tt[2])}return De.apply(gt,tt)}function YY(De,gt,tt,Dr){for(var fn=-1,Ii=De==null?0:De.length;++fn<Ii;){var ho=De[fn];gt(Dr,ho,tt(ho),De)}return Dr}function Bc(De,gt){for(var tt=-1,Dr=De==null?0:De.length;++tt<Dr&&gt(De[tt],tt,De)!==!1;);return De}function fO(De,gt){for(var tt=De==null?0:De.length;tt--&&gt(De[tt],tt,De)!==!1;);return De}function gO(De,gt){for(var tt=-1,Dr=De==null?0:De.length;++tt<Dr;)if(!gt(De[tt],tt,De))return!1;return!0}function Md(De,gt){for(var tt=-1,Dr=De==null?0:De.length,fn=0,Ii=[];++tt<Dr;){var ho=De[tt];gt(ho,tt,De)&&(Ii[fn++]=ho)}return Ii}function Oy(De,gt){var tt=De==null?0:De.length;return!!tt&&nu(De,gt,0)>-1}function yw(De,gt,tt){for(var Dr=-1,fn=De==null?0:De.length;++Dr<fn;)if(tt(gt,De[Dr]))return!0;return!1}function Ui(De,gt){for(var tt=-1,Dr=De==null?0:De.length,fn=Array(Dr);++tt<Dr;)fn[tt]=gt(De[tt],tt,De);return fn}function kd(De,gt){for(var tt=-1,Dr=gt.length,fn=De.length;++tt<Dr;)De[fn+tt]=gt[tt];return De}function vw(De,gt,tt,Dr){var fn=-1,Ii=De==null?0:De.length;for(Dr&&Ii&&(tt=De[++fn]);++fn<Ii;)tt=gt(tt,De[fn],fn,De);return tt}function XY(De,gt,tt,Dr){var fn=De==null?0:De.length;for(Dr&&fn&&(tt=De[--fn]);fn--;)tt=gt(tt,De[fn],fn,De);return tt}function mo(De,gt){for(var tt=-1,Dr=De==null?0:De.length;++tt<Dr;)if(gt(De[tt],tt,De))return!0;return!1}var yO=bw("length");function vO(De){return De.split("")}function nF(De){return De.match($r)||[]}function jp(De,gt,tt){var Dr;return tt(De,function(fn,Ii,ho){if(gt(fn,Ii,ho))return Dr=Ii,!1}),Dr}function Ay(De,gt,tt,Dr){for(var fn=De.length,Ii=tt+(Dr?1:-1);Dr?Ii--:++Ii<fn;)if(gt(De[Ii],Ii,De))return Ii;return-1}function nu(De,gt,tt){return gt===gt?t5(De,gt,tt):Ay(De,sF,tt)}function iF(De,gt,tt,Dr){for(var fn=tt-1,Ii=De.length;++fn<Ii;)if(Dr(De[fn],gt))return fn;return-1}function sF(De){return De!==De}function bO(De,gt){var tt=De==null?0:De.length;return tt?_w(De,gt)/tt:Ie}function bw(De){return function(gt){return gt==null?r:gt[De]}}function T_(De){return function(gt){return De==null?r:De[gt]}}function I_(De,gt,tt,Dr,fn){return fn(De,function(Ii,ho,Bi){tt=Dr?(Dr=!1,Ii):gt(tt,Ii,ho,Bi)}),tt}function _O(De,gt){var tt=De.length;for(De.sort(gt);tt--;)De[tt]=De[tt].value;return De}function _w(De,gt){for(var tt,Dr=-1,fn=De.length;++Dr<fn;){var Ii=gt(De[Dr]);Ii!==r&&(tt=tt===r?Ii:tt+Ii)}return tt}function Sw(De,gt){for(var tt=-1,Dr=Array(De);++tt<De;)Dr[tt]=gt(tt);return Dr}function JY(De,gt){return Ui(gt,function(tt){return[tt,De[tt]]})}function Ny(De){return De&&De.slice(0,CO(De)+1).replace($t,"")}function El(De){return function(gt){return De(gt)}}function Ld(De,gt){return Ui(gt,function(tt){return De[tt]})}function R_(De,gt){return De.has(gt)}function oF(De,gt){for(var tt=-1,Dr=De.length;++tt<Dr&&nu(gt,De[tt],0)>-1;);return tt}function aF(De,gt){for(var tt=De.length;tt--&&nu(gt,De[tt],0)>-1;);return tt}function ZY(De,gt){for(var tt=De.length,Dr=0;tt--;)De[tt]===gt&&++Dr;return Dr}var cF=T_(vs),lF=T_(Ks);function uF(De){return"\\"+Pl[De]}function dF(De,gt){return De==null?r:De[gt]}function nh(De){return Fe.test(De)}function Cw(De){return wt.test(De)}function Pw(De){for(var gt,tt=[];!(gt=De.next()).done;)tt.push(gt.value);return tt}function SO(De){var gt=-1,tt=Array(De.size);return De.forEach(function(Dr,fn){tt[++gt]=[fn,Dr]}),tt}function pF(De,gt){return function(tt){return De(gt(tt))}}function qd(De,gt){for(var tt=-1,Dr=De.length,fn=0,Ii=[];++tt<Dr;){var ho=De[tt];(ho===gt||ho===c)&&(De[tt]=c,Ii[fn++]=tt)}return Ii}function x_(De){var gt=-1,tt=Array(De.size);return De.forEach(function(Dr){tt[++gt]=Dr}),tt}function e5(De){var gt=-1,tt=Array(De.size);return De.forEach(function(Dr){tt[++gt]=[Dr,Dr]}),tt}function t5(De,gt,tt){for(var Dr=tt-1,fn=De.length;++Dr<fn;)if(De[Dr]===gt)return Dr;return-1}function r5(De,gt,tt){for(var Dr=tt+1;Dr--;)if(De[Dr]===gt)return Dr;return Dr}function Dy(De){return nh(De)?ww(De):yO(De)}function Du(De){return nh(De)?hF(De):vO(De)}function CO(De){for(var gt=De.length;gt--&&yt.test(De.charAt(gt)););return gt}var mF=T_(Ko);function ww(De){for(var gt=rn.lastIndex=0;rn.test(De);)++gt;return gt}function hF(De){return De.match(rn)||[]}function My(De){return De.match(Nr)||[]}var fF=function De(gt){gt=gt==null?Fr:Gc.defaults(Fr.Object(),gt,Gc.pick(Fr,Gt));var tt=gt.Array,Dr=gt.Date,fn=gt.Error,Ii=gt.Function,ho=gt.Math,Bi=gt.Object,PO=gt.RegExp,gF=gt.String,Tl=gt.TypeError,Mu=tt.prototype,yF=Ii.prototype,zd=Bi.prototype,ih=gt["__core-js_shared__"],O_=yF.toString,Mi=zd.hasOwnProperty,wO=0,sh=function(){var g=/[^.]+$/.exec(ih&&ih.keys&&ih.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}(),A_=zd.toString,EO=O_.call(Bi),TO=Fr._,vF=PO("^"+O_.call(Mi).replace(mr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),N_=Yn?gt.Buffer:r,oh=gt.Symbol,Ew=gt.Uint8Array,bF=N_?N_.allocUnsafe:r,D_=pF(Bi.getPrototypeOf,Bi),_F=Bi.create,ky=zd.propertyIsEnumerable,M_=Mu.splice,IO=oh?oh.isConcatSpreadable:r,Ly=oh?oh.iterator:r,Up=oh?oh.toStringTag:r,qy=function(){try{var g=J_(Bi,"defineProperty");return g({},"",{}),g}catch{}}(),RO=gt.clearTimeout!==Fr.clearTimeout&&gt.clearTimeout,SF=Dr&&Dr.now!==Fr.Date.now&&Dr.now,CF=gt.setTimeout!==Fr.setTimeout&&gt.setTimeout,ku=ho.ceil,Bf=ho.floor,k_=Bi.getOwnPropertySymbols,PF=N_?N_.isBuffer:r,zy=gt.isFinite,wF=Mu.join,Tw=pF(Bi.keys,Bi),Mo=ho.max,Qo=ho.min,n5=Dr.now,i5=gt.parseInt,Gf=ho.random,xO=Mu.reverse,Iw=J_(gt,"DataView"),Fy=J_(gt,"Map"),Rw=J_(gt,"Promise"),jy=J_(gt,"Set"),Uy=J_(gt,"WeakMap"),By=J_(Bi,"create"),L_=Uy&&new Uy,$f={},EF=Z_(Iw),TF=Z_(Fy),IF=Z_(Rw),xw=Z_(jy),q_=Z_(Uy),Vf=oh?oh.prototype:r,Gy=Vf?Vf.valueOf:r,OO=Vf?Vf.toString:r;function Y(g){if(ko(g)&&!Bn(g)&&!(g instanceof ii)){if(g instanceof iu)return g;if(Mi.call(g,"__wrapped__"))return xSe(g)}return new iu(g)}var Hf=function(){function g(){}return function(b){if(!vo(b))return{};if(_F)return _F(b);g.prototype=b;var S=new g;return g.prototype=r,S}}();function z_(){}function iu(g,b){this.__wrapped__=g,this.__actions__=[],this.__chain__=!!b,this.__index__=0,this.__values__=r}Y.templateSettings={escape:Bt,evaluate:pi,interpolate:Yi,variable:"",imports:{_:Y}},Y.prototype=z_.prototype,Y.prototype.constructor=Y,iu.prototype=Hf(z_.prototype),iu.prototype.constructor=iu;function ii(g){this.__wrapped__=g,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ve,this.__views__=[]}function s5(){var g=new ii(this.__wrapped__);return g.__actions__=ir(this.__actions__),g.__dir__=this.__dir__,g.__filtered__=this.__filtered__,g.__iteratees__=ir(this.__iteratees__),g.__takeCount__=this.__takeCount__,g.__views__=ir(this.__views__),g}function F_(){if(this.__filtered__){var g=new ii(this);g.__dir__=-1,g.__filtered__=!0}else g=this.clone(),g.__dir__*=-1;return g}function o5(){var g=this.__wrapped__.value(),b=this.__dir__,S=Bn(g),A=b<0,V=S?g.length:0,te=dtt(0,V,this.__views__),me=te.start,Ce=te.end,ze=Ce-me,Rt=A?Ce:me-1,Ot=this.__iteratees__,Wt=Ot.length,Er=0,Wr=Qo(ze,this.__takeCount__);if(!S||!A&&V==ze&&Wr==ze)return F(g,this.__actions__);var gn=[];e:for(;ze--&&Er<Wr;){Rt+=b;for(var Xn=-1,yn=g[Rt];++Xn<Wt;){var li=Ot[Xn],Si=li.iteratee,Fu=li.type,Rl=Si(yn);if(Fu==$e)yn=Rl;else if(!Rl){if(Fu==ye)continue e;break e}}gn[Er++]=yn}return gn}ii.prototype=Hf(z_.prototype),ii.prototype.constructor=ii;function ah(g){var b=-1,S=g==null?0:g.length;for(this.clear();++b<S;){var A=g[b];this.set(A[0],A[1])}}function Ow(){this.__data__=By?By(null):{},this.size=0}function a5(g){var b=this.has(g)&&delete this.__data__[g];return this.size-=b?1:0,b}function RF(g){var b=this.__data__;if(By){var S=b[g];return S===o?r:S}return Mi.call(b,g)?b[g]:r}function xF(g){var b=this.__data__;return By?b[g]!==r:Mi.call(b,g)}function c5(g,b){var S=this.__data__;return this.size+=this.has(g)?0:1,S[g]=By&&b===r?o:b,this}ah.prototype.clear=Ow,ah.prototype.delete=a5,ah.prototype.get=RF,ah.prototype.has=xF,ah.prototype.set=c5;function Fd(g){var b=-1,S=g==null?0:g.length;for(this.clear();++b<S;){var A=g[b];this.set(A[0],A[1])}}function l5(){this.__data__=[],this.size=0}function j_(g){var b=this.__data__,S=Bp(b,g);if(S<0)return!1;var A=b.length-1;return S==A?b.pop():M_.call(b,S,1),--this.size,!0}function U_(g){var b=this.__data__,S=Bp(b,g);return S<0?r:b[S][1]}function B_(g){return Bp(this.__data__,g)>-1}function AO(g,b){var S=this.__data__,A=Bp(S,g);return A<0?(++this.size,S.push([g,b])):S[A][1]=b,this}Fd.prototype.clear=l5,Fd.prototype.delete=j_,Fd.prototype.get=U_,Fd.prototype.has=B_,Fd.prototype.set=AO;function Lu(g){var b=-1,S=g==null?0:g.length;for(this.clear();++b<S;){var A=g[b];this.set(A[0],A[1])}}function NO(){this.size=0,this.__data__={hash:new ah,map:new(Fy||Fd),string:new ah}}function OF(g){var b=JF(this,g).delete(g);return this.size-=b?1:0,b}function $y(g){return JF(this,g).get(g)}function AF(g){return JF(this,g).has(g)}function Vy(g,b){var S=JF(this,g),A=S.size;return S.set(g,b),this.size+=S.size==A?0:1,this}Lu.prototype.clear=NO,Lu.prototype.delete=OF,Lu.prototype.get=$y,Lu.prototype.has=AF,Lu.prototype.set=Vy;function Wf(g){var b=-1,S=g==null?0:g.length;for(this.__data__=new Lu;++b<S;)this.add(g[b])}function u5(g){return this.__data__.set(g,o),this}function NF(g){return this.__data__.has(g)}Wf.prototype.add=Wf.prototype.push=u5,Wf.prototype.has=NF;function qu(g){var b=this.__data__=new Fd(g);this.size=b.size}function DF(){this.__data__=new Fd,this.size=0}function d5(g){var b=this.__data__,S=b.delete(g);return this.size=b.size,S}function G_(g){return this.__data__.get(g)}function $_(g){return this.__data__.has(g)}function p5(g,b){var S=this.__data__;if(S instanceof Fd){var A=S.__data__;if(!Fy||A.length<t-1)return A.push([g,b]),this.size=++S.size,this;S=this.__data__=new Lu(A)}return S.set(g,b),this.size=S.size,this}qu.prototype.clear=DF,qu.prototype.delete=d5,qu.prototype.get=G_,qu.prototype.has=$_,qu.prototype.set=p5;function DO(g,b){var S=Bn(g),A=!S&&eS(g),V=!S&&!A&&Zy(g),te=!S&&!A&&!V&&$w(g),me=S||A||V||te,Ce=me?Sw(g.length,gF):[],ze=Ce.length;for(var Rt in g)(b||Mi.call(g,Rt))&&!(me&&(Rt=="length"||V&&(Rt=="offset"||Rt=="parent")||te&&(Rt=="buffer"||Rt=="byteLength"||Rt=="byteOffset")||Jf(Rt,ze)))&&Ce.push(Rt);return Ce}function MO(g){var b=g.length;return b?g[XO(0,b-1)]:r}function Aw(g,b){return ZF(ir(g),Kf(b,0,g.length))}function kO(g){return ZF(ir(g))}function LO(g,b,S){(S!==r&&!Yp(g[b],S)||S===r&&!(b in g))&&Gp(g,b,S)}function V_(g,b,S){var A=g[b];(!(Mi.call(g,b)&&Yp(A,S))||S===r&&!(b in g))&&Gp(g,b,S)}function Bp(g,b){for(var S=g.length;S--;)if(Yp(g[S][0],b))return S;return-1}function MF(g,b,S,A){return Ba(g,function(V,te,me){b(A,V,S(V),me)}),A}function kF(g,b){return g&&Hc(b,Ga(b),g)}function m5(g,b){return g&&Hc(b,ou(b),g)}function Gp(g,b,S){b=="__proto__"&&qy?qy(g,b,{configurable:!0,enumerable:!0,value:S,writable:!0}):g[b]=S}function qO(g,b){for(var S=-1,A=b.length,V=tt(A),te=g==null;++S<A;)V[S]=te?r:j5(g,b[S]);return V}function Kf(g,b,S){return g===g&&(S!==r&&(g=g<=S?g:S),b!==r&&(g=g>=b?g:b)),g}function $c(g,b,S,A,V,te){var me,Ce=b&l,ze=b&u,Rt=b&d;if(S&&(me=V?S(g,A,V,te):S(g)),me!==r)return me;if(!vo(g))return g;var Ot=Bn(g);if(Ot){if(me=mtt(g),!Ce)return ir(g,me)}else{var Wt=Wc(g),Er=Wt==Ne||Wt==Re;if(Zy(g))return Kt(g,Ce);if(Wt==ie||Wt==ue||Er&&!V){if(me=ze||Er?{}:_Se(g),!Ce)return ze?rA(g,m5(me,g)):Xy(g,kF(me,g))}else{if(!vr[Wt])return V?g:{};me=htt(g,Wt,Ce)}}te||(te=new qu);var Wr=te.get(g);if(Wr)return Wr;te.set(g,me),QSe(g)?g.forEach(function(yn){me.add($c(yn,b,S,yn,g,te))}):WSe(g)&&g.forEach(function(yn,li){me.set(li,$c(yn,b,S,li,g,te))});var gn=Rt?ze?T5:E5:ze?ou:Ga,Xn=Ot?r:gn(g);return Bc(Xn||g,function(yn,li){Xn&&(li=yn,yn=g[li]),V_(me,li,$c(yn,b,S,li,g,te))}),me}function zO(g){var b=Ga(g);return function(S){return H_(S,g,b)}}function H_(g,b,S){var A=S.length;if(g==null)return!A;for(g=Bi(g);A--;){var V=S[A],te=b[V],me=g[V];if(me===r&&!(V in g)||!te(me))return!1}return!0}function W_(g,b,S){if(typeof g!="function")throw new Tl(i);return aA(function(){g.apply(r,S)},b)}function Hy(g,b,S,A){var V=-1,te=Oy,me=!0,Ce=g.length,ze=[],Rt=b.length;if(!Ce)return ze;S&&(b=Ui(b,El(S))),A?(te=yw,me=!1):b.length>=t&&(te=R_,me=!1,b=new Wf(b));e:for(;++V<Ce;){var Ot=g[V],Wt=S==null?Ot:S(Ot);if(Ot=A||Ot!==0?Ot:0,me&&Wt===Wt){for(var Er=Rt;Er--;)if(b[Er]===Wt)continue e;ze.push(Ot)}else te(b,Wt,A)||ze.push(Ot)}return ze}var Ba=nA(jd),FO=nA(UO,!0);function LF(g,b){var S=!0;return Ba(g,function(A,V,te){return S=!!b(A,V,te),S}),S}function Nw(g,b,S){for(var A=-1,V=g.length;++A<V;){var te=g[A],me=b(te);if(me!=null&&(Ce===r?me===me&&!zu(me):S(me,Ce)))var Ce=me,ze=te}return ze}function jO(g,b,S,A){var V=g.length;for(S=Kn(S),S<0&&(S=-S>V?0:V+S),A=A===r||A>V?V:Kn(A),A<0&&(A+=V),A=S>A?0:XSe(A);S<A;)g[S++]=b;return g}function Dw(g,b){var S=[];return Ba(g,function(A,V,te){b(A,V,te)&&S.push(A)}),S}function Yo(g,b,S,A,V){var te=-1,me=g.length;for(S||(S=gtt),V||(V=[]);++te<me;){var Ce=g[te];b>0&&S(Ce)?b>1?Yo(Ce,b-1,S,A,V):kd(V,Ce):A||(V[V.length]=Ce)}return V}var Mw=iA(),qF=iA(!0);function jd(g,b){return g&&Mw(g,b,Ga)}function UO(g,b){return g&&qF(g,b,Ga)}function kw(g,b){return Md(b,function(S){return Zf(g[S])})}function Qf(g,b){b=Qe(b,g);for(var S=0,A=b.length;g!=null&&S<A;)g=g[ph(b[S++])];return S&&S==A?g:r}function ch(g,b,S){var A=b(g);return Bn(g)?A:kd(A,S(g))}function Pa(g){return g==null?g===r?W:Ee:Up&&Up in Bi(g)?utt(g):Ptt(g)}function Wy(g,b){return g>b}function h5(g,b){return g!=null&&Mi.call(g,b)}function f5(g,b){return g!=null&&b in Bi(g)}function g5(g,b,S){return g>=Qo(b,S)&&g<Mo(b,S)}function Lw(g,b,S){for(var A=S?yw:Oy,V=g[0].length,te=g.length,me=te,Ce=tt(te),ze=1/0,Rt=[];me--;){var Ot=g[me];me&&b&&(Ot=Ui(Ot,El(b))),ze=Qo(Ot.length,ze),Ce[me]=!S&&(b||V>=120&&Ot.length>=120)?new Wf(me&&Ot):r}Ot=g[0];var Wt=-1,Er=Ce[0];e:for(;++Wt<V&&Rt.length<ze;){var Wr=Ot[Wt],gn=b?b(Wr):Wr;if(Wr=S||Wr!==0?Wr:0,!(Er?R_(Er,gn):A(Rt,gn,S))){for(me=te;--me;){var Xn=Ce[me];if(!(Xn?R_(Xn,gn):A(g[me],gn,S)))continue e}Er&&Er.push(gn),Rt.push(Wr)}}return Rt}function zF(g,b,S,A){return jd(g,function(V,te,me){b(A,S(V),te,me)}),A}function Ky(g,b,S){b=Qe(b,g),g=wSe(g,b);var A=g==null?g:g[ph(Ud(b))];return A==null?r:wl(A,g,S)}function FF(g){return ko(g)&&Pa(g)==ue}function BO(g){return ko(g)&&Pa(g)==_r}function $p(g){return ko(g)&&Pa(g)==tr}function lh(g,b,S,A,V){return g===b?!0:g==null||b==null||!ko(g)&&!ko(b)?g!==g&&b!==b:GO(g,b,S,A,lh,V)}function GO(g,b,S,A,V,te){var me=Bn(g),Ce=Bn(b),ze=me?Ue:Wc(g),Rt=Ce?Ue:Wc(b);ze=ze==ue?ie:ze,Rt=Rt==ue?ie:Rt;var Ot=ze==ie,Wt=Rt==ie,Er=ze==Rt;if(Er&&Zy(g)){if(!Zy(b))return!1;me=!0,Ot=!1}if(Er&&!Ot)return te||(te=new qu),me||$w(g)?ySe(g,b,S,A,V,te):ctt(g,b,ze,S,A,V,te);if(!(S&p)){var Wr=Ot&&Mi.call(g,"__wrapped__"),gn=Wt&&Mi.call(b,"__wrapped__");if(Wr||gn){var Xn=Wr?g.value():g,yn=gn?b.value():b;return te||(te=new qu),V(Xn,yn,S,A,te)}}return Er?(te||(te=new qu),ltt(g,b,S,A,V,te)):!1}function uh(g){return ko(g)&&Wc(g)==Le}function $O(g,b,S,A){var V=S.length,te=V,me=!A;if(g==null)return!te;for(g=Bi(g);V--;){var Ce=S[V];if(me&&Ce[2]?Ce[1]!==g[Ce[0]]:!(Ce[0]in g))return!1}for(;++V<te;){Ce=S[V];var ze=Ce[0],Rt=g[ze],Ot=Ce[1];if(me&&Ce[2]){if(Rt===r&&!(ze in g))return!1}else{var Wt=new qu;if(A)var Er=A(Rt,Ot,ze,g,b,Wt);if(!(Er===r?lh(Ot,Rt,p|m,A,Wt):Er))return!1}}return!0}function jF(g){if(!vo(g)||vtt(g))return!1;var b=Zf(g)?vF:On;return b.test(Z_(g))}function y5(g){return ko(g)&&Pa(g)==_e}function UF(g){return ko(g)&&Wc(g)==B}function qw(g){return ko(g)&&sj(g.length)&&!!yr[Pa(g)]}function BF(g){return typeof g=="function"?g:g==null?au:typeof g=="object"?Bn(g)?HO(g[0],g[1]):Vp(g):cCe(g)}function zw(g){if(!oA(g))return Tw(g);var b=[];for(var S in Bi(g))Mi.call(g,S)&&S!="constructor"&&b.push(S);return b}function v5(g){if(!vo(g))return Ctt(g);var b=oA(g),S=[];for(var A in g)A=="constructor"&&(b||!Mi.call(g,A))||S.push(A);return S}function VO(g,b){return g<b}function Fw(g,b){var S=-1,A=su(g)?tt(g.length):[];return Ba(g,function(V,te,me){A[++S]=b(V,te,me)}),A}function Vp(g){var b=R5(g);return b.length==1&&b[0][2]?CSe(b[0][0],b[0][1]):function(S){return S===g||$O(S,g,b)}}function HO(g,b){return O5(g)&&SSe(b)?CSe(ph(g),b):function(S){var A=j5(S,g);return A===r&&A===b?U5(S,g):lh(b,A,p|m)}}function jw(g,b,S,A,V){g!==b&&Mw(b,function(te,me){if(V||(V=new qu),vo(te))GF(g,b,me,S,jw,A,V);else{var Ce=A?A(N5(g,me),te,me+"",g,b,V):r;Ce===r&&(Ce=te),LO(g,me,Ce)}},ou)}function GF(g,b,S,A,V,te,me){var Ce=N5(g,S),ze=N5(b,S),Rt=me.get(ze);if(Rt){LO(g,S,Rt);return}var Ot=te?te(Ce,ze,S+"",g,b,me):r,Wt=Ot===r;if(Wt){var Er=Bn(ze),Wr=!Er&&Zy(ze),gn=!Er&&!Wr&&$w(ze);Ot=ze,Er||Wr||gn?Bn(Ce)?Ot=Ce:Xo(Ce)?Ot=ir(Ce):Wr?(Wt=!1,Ot=Kt(ze,!0)):gn?(Wt=!1,Ot=Xr(ze,!0)):Ot=[]:cA(ze)||eS(ze)?(Ot=Ce,eS(Ce)?Ot=JSe(Ce):(!vo(Ce)||Zf(Ce))&&(Ot=_Se(ze))):Wt=!1}Wt&&(me.set(ze,Ot),V(Ot,ze,A,te,me),me.delete(ze)),LO(g,S,Ot)}function WO(g,b){var S=g.length;if(S)return b+=b<0?S:0,Jf(b,S)?g[b]:r}function KO(g,b,S){b.length?b=Ui(b,function(te){return Bn(te)?function(me){return Qf(me,te.length===1?te[0]:te)}:te}):b=[au];var A=-1;b=Ui(b,El(mn()));var V=Fw(g,function(te,me,Ce){var ze=Ui(b,function(Rt){return Rt(te)});return{criteria:ze,index:++A,value:te}});return _O(V,function(te,me){return Hn(te,me,S)})}function b5(g,b){return $F(g,b,function(S,A){return U5(g,A)})}function $F(g,b,S){for(var A=-1,V=b.length,te={};++A<V;){var me=b[A],Ce=Qf(g,me);S(Ce,me)&&K_(te,Qe(me,g),Ce)}return te}function _5(g){return function(b){return Qf(b,g)}}function QO(g,b,S,A){var V=A?iF:nu,te=-1,me=b.length,Ce=g;for(g===b&&(b=ir(b)),S&&(Ce=Ui(g,El(S)));++te<me;)for(var ze=0,Rt=b[te],Ot=S?S(Rt):Rt;(ze=V(Ce,Ot,ze,A))>-1;)Ce!==g&&M_.call(Ce,ze,1),M_.call(g,ze,1);return g}function YO(g,b){for(var S=g?b.length:0,A=S-1;S--;){var V=b[S];if(S==A||V!==te){var te=V;Jf(V)?M_.call(g,V,1):tA(g,V)}}return g}function XO(g,b){return g+Bf(Gf()*(b-g+1))}function VF(g,b,S,A){for(var V=-1,te=Mo(ku((b-g)/(S||1)),0),me=tt(te);te--;)me[A?te:++V]=g,g+=S;return me}function Qy(g,b){var S="";if(!g||b<1||b>Ge)return S;do b%2&&(S+=g),b=Bf(b/2),b&&(g+=g);while(b);return S}function Vn(g,b){return D5(PSe(g,b,au),g+"")}function S5(g){return MO(Vw(g))}function C5(g,b){var S=Vw(g);return ZF(S,Kf(b,0,S.length))}function K_(g,b,S,A){if(!vo(g))return g;b=Qe(b,g);for(var V=-1,te=b.length,me=te-1,Ce=g;Ce!=null&&++V<te;){var ze=ph(b[V]),Rt=S;if(ze==="__proto__"||ze==="constructor"||ze==="prototype")return g;if(V!=me){var Ot=Ce[ze];Rt=A?A(Ot,ze,Ce):r,Rt===r&&(Rt=vo(Ot)?Ot:Jf(b[V+1])?[]:{})}V_(Ce,ze,Rt),Ce=Ce[ze]}return g}var JO=L_?function(g,b){return L_.set(g,b),g}:au,HF=qy?function(g,b){return qy(g,"toString",{configurable:!0,enumerable:!1,value:G5(b),writable:!0})}:au;function Uw(g){return ZF(Vw(g))}function Vc(g,b,S){var A=-1,V=g.length;b<0&&(b=-b>V?0:V+b),S=S>V?V:S,S<0&&(S+=V),V=b>S?0:S-b>>>0,b>>>=0;for(var te=tt(V);++A<V;)te[A]=g[A+b];return te}function P5(g,b){var S;return Ba(g,function(A,V,te){return S=b(A,V,te),!S}),!!S}function Yy(g,b,S){var A=0,V=g==null?A:g.length;if(typeof b=="number"&&b===b&&V<=ut){for(;A<V;){var te=A+V>>>1,me=g[te];me!==null&&!zu(me)&&(S?me<=b:me<b)?A=te+1:V=te}return V}return ZO(g,b,au,S)}function ZO(g,b,S,A){var V=0,te=g==null?0:g.length;if(te===0)return 0;b=S(b);for(var me=b!==b,Ce=b===null,ze=zu(b),Rt=b===r;V<te;){var Ot=Bf((V+te)/2),Wt=S(g[Ot]),Er=Wt!==r,Wr=Wt===null,gn=Wt===Wt,Xn=zu(Wt);if(me)var yn=A||gn;else Rt?yn=gn&&(A||Er):Ce?yn=gn&&Er&&(A||!Wr):ze?yn=gn&&Er&&!Wr&&(A||!Xn):Wr||Xn?yn=!1:yn=A?Wt<=b:Wt<b;yn?V=Ot+1:te=Ot}return Qo(te,lt)}function WF(g,b){for(var S=-1,A=g.length,V=0,te=[];++S<A;){var me=g[S],Ce=b?b(me):me;if(!S||!Yp(Ce,ze)){var ze=Ce;te[V++]=me===0?0:me}}return te}function eA(g){return typeof g=="number"?g:zu(g)?Ie:+g}function vc(g){if(typeof g=="string")return g;if(Bn(g))return Ui(g,vc)+"";if(zu(g))return OO?OO.call(g):"";var b=g+"";return b=="0"&&1/g==-Ct?"-0":b}function Hp(g,b,S){var A=-1,V=Oy,te=g.length,me=!0,Ce=[],ze=Ce;if(S)me=!1,V=yw;else if(te>=t){var Rt=b?null:YF(g);if(Rt)return x_(Rt);me=!1,V=R_,ze=new Wf}else ze=b?[]:Ce;e:for(;++A<te;){var Ot=g[A],Wt=b?b(Ot):Ot;if(Ot=S||Ot!==0?Ot:0,me&&Wt===Wt){for(var Er=ze.length;Er--;)if(ze[Er]===Wt)continue e;b&&ze.push(Wt),Ce.push(Ot)}else V(ze,Wt,S)||(ze!==Ce&&ze.push(Wt),Ce.push(Ot))}return Ce}function tA(g,b){return b=Qe(b,g),g=wSe(g,b),g==null||delete g[ph(Ud(b))]}function T(g,b,S,A){return K_(g,b,S(Qf(g,b)),A)}function D(g,b,S,A){for(var V=g.length,te=A?V:-1;(A?te--:++te<V)&&b(g[te],te,g););return S?Vc(g,A?0:te,A?te+1:V):Vc(g,A?te+1:0,A?V:te)}function F(g,b){var S=g;return S instanceof ii&&(S=S.value()),vw(b,function(A,V){return V.func.apply(V.thisArg,kd([A],V.args))},S)}function K(g,b,S){var A=g.length;if(A<2)return A?Hp(g[0]):[];for(var V=-1,te=tt(A);++V<A;)for(var me=g[V],Ce=-1;++Ce<A;)Ce!=V&&(te[V]=Hy(te[V]||me,g[Ce],b,S));return Hp(Yo(te,1),b,S)}function Q(g,b,S){for(var A=-1,V=g.length,te=b.length,me={};++A<V;){var Ce=A<te?b[A]:r;S(me,g[A],Ce)}return me}function de(g){return Xo(g)?g:[]}function Me(g){return typeof g=="function"?g:au}function Qe(g,b){return Bn(g)?g:O5(g,b)?[g]:RSe(Zi(g))}var We=Vn;function Mt(g,b,S){var A=g.length;return S=S===r?A:S,!b&&S>=A?g:Vc(g,b,S)}var pt=RO||function(g){return Fr.clearTimeout(g)};function Kt(g,b){if(b)return g.slice();var S=g.length,A=bF?bF(S):new g.constructor(S);return g.copy(A),A}function cr(g){var b=new g.constructor(g.byteLength);return new Ew(b).set(new Ew(g)),b}function kt(g,b){var S=b?cr(g.buffer):g.buffer;return new g.constructor(S,g.byteOffset,g.byteLength)}function Sr(g){var b=new g.constructor(g.source,mi.exec(g));return b.lastIndex=g.lastIndex,b}function nn(g){return Gy?Bi(Gy.call(g)):{}}function Xr(g,b){var S=b?cr(g.buffer):g.buffer;return new g.constructor(S,g.byteOffset,g.length)}function Wn(g,b){if(g!==b){var S=g!==r,A=g===null,V=g===g,te=zu(g),me=b!==r,Ce=b===null,ze=b===b,Rt=zu(b);if(!Ce&&!Rt&&!te&&g>b||te&&me&&ze&&!Ce&&!Rt||A&&me&&ze||!S&&ze||!V)return 1;if(!A&&!te&&!Rt&&g<b||Rt&&S&&V&&!A&&!te||Ce&&S&&V||!me&&V||!ze)return-1}return 0}function Hn(g,b,S){for(var A=-1,V=g.criteria,te=b.criteria,me=V.length,Ce=S.length;++A<me;){var ze=Wn(V[A],te[A]);if(ze){if(A>=Ce)return ze;var Rt=S[A];return ze*(Rt=="desc"?-1:1)}}return g.index-b.index}function fo(g,b,S,A){for(var V=-1,te=g.length,me=S.length,Ce=-1,ze=b.length,Rt=Mo(te-me,0),Ot=tt(ze+Rt),Wt=!A;++Ce<ze;)Ot[Ce]=b[Ce];for(;++V<me;)(Wt||V<te)&&(Ot[S[V]]=g[V]);for(;Rt--;)Ot[Ce++]=g[V++];return Ot}function go(g,b,S,A){for(var V=-1,te=g.length,me=-1,Ce=S.length,ze=-1,Rt=b.length,Ot=Mo(te-Ce,0),Wt=tt(Ot+Rt),Er=!A;++V<Ot;)Wt[V]=g[V];for(var Wr=V;++ze<Rt;)Wt[Wr+ze]=b[ze];for(;++me<Ce;)(Er||V<te)&&(Wt[Wr+S[me]]=g[V++]);return Wt}function ir(g,b){var S=-1,A=g.length;for(b||(b=tt(A));++S<A;)b[S]=g[S];return b}function Hc(g,b,S,A){var V=!S;S||(S={});for(var te=-1,me=b.length;++te<me;){var Ce=b[te],ze=A?A(S[Ce],g[Ce],Ce,S,g):r;ze===r&&(ze=g[Ce]),V?Gp(S,Ce,ze):V_(S,Ce,ze)}return S}function Xy(g,b){return Hc(g,x5(g),b)}function rA(g,b){return Hc(g,vSe(g),b)}function Q_(g,b){return function(S,A){var V=Bn(S)?YY:MF,te=b?b():{};return V(S,g,mn(A,2),te)}}function dh(g){return Vn(function(b,S){var A=-1,V=S.length,te=V>1?S[V-1]:r,me=V>2?S[2]:r;for(te=g.length>3&&typeof te=="function"?(V--,te):r,me&&Il(S[0],S[1],me)&&(te=V<3?r:te,V=1),b=Bi(b);++A<V;){var Ce=S[A];Ce&&g(b,Ce,A,te)}return b})}function nA(g,b){return function(S,A){if(S==null)return S;if(!su(S))return g(S,A);for(var V=S.length,te=b?V:-1,me=Bi(S);(b?te--:++te<V)&&A(me[te],te,me)!==!1;);return S}}function iA(g){return function(b,S,A){for(var V=-1,te=Bi(b),me=A(b),Ce=me.length;Ce--;){var ze=me[g?Ce:++V];if(S(te[ze],ze,te)===!1)break}return b}}function KF(g,b,S){var A=b&f,V=Y_(g);function te(){var me=this&&this!==Fr&&this instanceof te?V:g;return me.apply(A?S:this,arguments)}return te}function QF(g){return function(b){b=Zi(b);var S=nh(b)?Du(b):r,A=S?S[0]:b.charAt(0),V=S?Mt(S,1).join(""):b.slice(1);return A[g]()+V}}function Jy(g){return function(b){return vw(oCe(sCe(b).replace(on,"")),g,"")}}function Y_(g){return function(){var b=arguments;switch(b.length){case 0:return new g;case 1:return new g(b[0]);case 2:return new g(b[0],b[1]);case 3:return new g(b[0],b[1],b[2]);case 4:return new g(b[0],b[1],b[2],b[3]);case 5:return new g(b[0],b[1],b[2],b[3],b[4]);case 6:return new g(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new g(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var S=Hf(g.prototype),A=g.apply(S,b);return vo(A)?A:S}}function w5(g,b,S){var A=Y_(g);function V(){for(var te=arguments.length,me=tt(te),Ce=te,ze=Gw(V);Ce--;)me[Ce]=arguments[Ce];var Rt=te<3&&me[0]!==ze&&me[te-1]!==ze?[]:qd(me,ze);if(te-=Rt.length,te<S)return X_(g,b,Un,V.placeholder,r,me,Rt,r,r,S-te);var Ot=this&&this!==Fr&&this instanceof V?A:g;return wl(Ot,this,me)}return V}function sA(g){return function(b,S,A){var V=Bi(b);if(!su(b)){var te=mn(S,3);b=Ga(b),S=function(Ce){return te(V[Ce],Ce,V)}}var me=g(b,S,A);return me>-1?V[te?b[me]:me]:r}}function hr(g){return Xf(function(b){var S=b.length,A=S,V=iu.prototype.thru;for(g&&b.reverse();A--;){var te=b[A];if(typeof te!="function")throw new Tl(i);if(V&&!me&&XF(te)=="wrapper")var me=new iu([],!0)}for(A=me?A:S;++A<S;){te=b[A];var Ce=XF(te),ze=Ce=="wrapper"?I5(te):r;ze&&A5(ze[0])&&ze[1]==(R|_|P|I)&&!ze[4].length&&ze[9]==1?me=me[XF(ze[0])].apply(me,ze[3]):me=te.length==1&&A5(te)?me[Ce]():me.thru(te)}return function(){var Rt=arguments,Ot=Rt[0];if(me&&Rt.length==1&&Bn(Ot))return me.plant(Ot).value();for(var Wt=0,Er=S?b[Wt].apply(this,Rt):Ot;++Wt<S;)Er=b[Wt].call(this,Er);return Er}})}function Un(g,b,S,A,V,te,me,Ce,ze,Rt){var Ot=b&R,Wt=b&f,Er=b&y,Wr=b&(_|C),gn=b&z,Xn=Er?r:Y_(g);function yn(){for(var li=arguments.length,Si=tt(li),Fu=li;Fu--;)Si[Fu]=arguments[Fu];if(Wr)var Rl=Gw(yn),ju=ZY(Si,Rl);if(A&&(Si=fo(Si,A,V,Wr)),te&&(Si=go(Si,te,me,Wr)),li-=ju,Wr&&li<Rt){var Jo=qd(Si,Rl);return X_(g,b,Un,yn.placeholder,S,Si,Jo,Ce,ze,Rt-li)}var Xp=Wt?S:this,tg=Er?Xp[g]:g;return li=Si.length,Ce?Si=wtt(Si,Ce):gn&&li>1&&Si.reverse(),Ot&&ze<li&&(Si.length=ze),this&&this!==Fr&&this instanceof yn&&(tg=Xn||Y_(tg)),tg.apply(Xp,Si)}return yn}function ls(g,b){return function(S,A){return zF(S,g,b(A),{})}}function En(g,b){return function(S,A){var V;if(S===r&&A===r)return b;if(S!==r&&(V=S),A!==r){if(V===r)return A;typeof S=="string"||typeof A=="string"?(S=vc(S),A=vc(A)):(S=eA(S),A=eA(A)),V=g(S,A)}return V}}function yo(g){return Xf(function(b){return b=Ui(b,El(mn())),Vn(function(S){var A=this;return g(b,function(V){return wl(V,A,S)})})})}function wa(g,b){b=b===r?" ":vc(b);var S=b.length;if(S<2)return S?Qy(b,g):b;var A=Qy(b,ku(g/Dy(b)));return nh(b)?Mt(Du(A),0,g).join(""):A.slice(0,g)}function Wp(g,b,S,A){var V=b&f,te=Y_(g);function me(){for(var Ce=-1,ze=arguments.length,Rt=-1,Ot=A.length,Wt=tt(Ot+ze),Er=this&&this!==Fr&&this instanceof me?te:g;++Rt<Ot;)Wt[Rt]=A[Rt];for(;ze--;)Wt[Rt++]=arguments[++Ce];return wl(Er,V?S:this,Wt)}return me}function Kp(g){return function(b,S,A){return A&&typeof A!="number"&&Il(b,S,A)&&(S=A=r),b=eg(b),S===r?(S=b,b=0):S=eg(S),A=A===r?b<S?1:-1:eg(A),VF(b,S,A,g)}}function Qp(g){return function(b,S){return typeof b=="string"&&typeof S=="string"||(b=Bd(b),S=Bd(S)),g(b,S)}}function X_(g,b,S,A,V,te,me,Ce,ze,Rt){var Ot=b&_,Wt=Ot?me:r,Er=Ot?r:me,Wr=Ot?te:r,gn=Ot?r:te;b|=Ot?P:w,b&=~(Ot?w:P),b&v||(b&=~(f|y));var Xn=[g,b,V,Wr,Wt,gn,Er,Ce,ze,Rt],yn=S.apply(r,Xn);return A5(g)&&ESe(yn,Xn),yn.placeholder=A,TSe(yn,g,b)}function Bw(g){var b=ho[g];return function(S,A){if(S=Bd(S),A=A==null?0:Qo(Kn(A),292),A&&zy(S)){var V=(Zi(S)+"e").split("e"),te=b(V[0]+"e"+(+V[1]+A));return V=(Zi(te)+"e").split("e"),+(V[0]+"e"+(+V[1]-A))}return b(S)}}var YF=jy&&1/x_(new jy([,-0]))[1]==Ct?function(g){return new jy(g)}:H5;function hSe(g){return function(b){var S=Wc(b);return S==Le?SO(b):S==B?e5(b):JY(b,g(b))}}function Yf(g,b,S,A,V,te,me,Ce){var ze=b&y;if(!ze&&typeof g!="function")throw new Tl(i);var Rt=A?A.length:0;if(Rt||(b&=~(P|w),A=V=r),me=me===r?me:Mo(Kn(me),0),Ce=Ce===r?Ce:Kn(Ce),Rt-=V?V.length:0,b&w){var Ot=A,Wt=V;A=V=r}var Er=ze?r:I5(g),Wr=[g,b,S,A,V,Ot,Wt,te,me,Ce];if(Er&&Stt(Wr,Er),g=Wr[0],b=Wr[1],S=Wr[2],A=Wr[3],V=Wr[4],Ce=Wr[9]=Wr[9]===r?ze?0:g.length:Mo(Wr[9]-Rt,0),!Ce&&b&(_|C)&&(b&=~(_|C)),!b||b==f)var gn=KF(g,b,S);else b==_||b==C?gn=w5(g,b,Ce):(b==P||b==(f|P))&&!V.length?gn=Wp(g,b,S,A):gn=Un.apply(r,Wr);var Xn=Er?JO:ESe;return TSe(Xn(gn,Wr),g,b)}function fSe(g,b,S,A){return g===r||Yp(g,zd[S])&&!Mi.call(A,S)?b:g}function gSe(g,b,S,A,V,te){return vo(g)&&vo(b)&&(te.set(b,g),jw(g,b,r,gSe,te),te.delete(b)),g}function att(g){return cA(g)?r:g}function ySe(g,b,S,A,V,te){var me=S&p,Ce=g.length,ze=b.length;if(Ce!=ze&&!(me&&ze>Ce))return!1;var Rt=te.get(g),Ot=te.get(b);if(Rt&&Ot)return Rt==b&&Ot==g;var Wt=-1,Er=!0,Wr=S&m?new Wf:r;for(te.set(g,b),te.set(b,g);++Wt<Ce;){var gn=g[Wt],Xn=b[Wt];if(A)var yn=me?A(Xn,gn,Wt,b,g,te):A(gn,Xn,Wt,g,b,te);if(yn!==r){if(yn)continue;Er=!1;break}if(Wr){if(!mo(b,function(li,Si){if(!R_(Wr,Si)&&(gn===li||V(gn,li,S,A,te)))return Wr.push(Si)})){Er=!1;break}}else if(!(gn===Xn||V(gn,Xn,S,A,te))){Er=!1;break}}return te.delete(g),te.delete(b),Er}function ctt(g,b,S,A,V,te,me){switch(S){case fr:if(g.byteLength!=b.byteLength||g.byteOffset!=b.byteOffset)return!1;g=g.buffer,b=b.buffer;case _r:return!(g.byteLength!=b.byteLength||!te(new Ew(g),new Ew(b)));case jt:case tr:case ht:return Yp(+g,+b);case we:return g.name==b.name&&g.message==b.message;case _e:case be:return g==b+"";case Le:var Ce=SO;case B:var ze=A&p;if(Ce||(Ce=x_),g.size!=b.size&&!ze)return!1;var Rt=me.get(g);if(Rt)return Rt==b;A|=m,me.set(g,b);var Ot=ySe(Ce(g),Ce(b),A,V,te,me);return me.delete(g),Ot;case ke:if(Gy)return Gy.call(g)==Gy.call(b)}return!1}function ltt(g,b,S,A,V,te){var me=S&p,Ce=E5(g),ze=Ce.length,Rt=E5(b),Ot=Rt.length;if(ze!=Ot&&!me)return!1;for(var Wt=ze;Wt--;){var Er=Ce[Wt];if(!(me?Er in b:Mi.call(b,Er)))return!1}var Wr=te.get(g),gn=te.get(b);if(Wr&&gn)return Wr==b&&gn==g;var Xn=!0;te.set(g,b),te.set(b,g);for(var yn=me;++Wt<ze;){Er=Ce[Wt];var li=g[Er],Si=b[Er];if(A)var Fu=me?A(Si,li,Er,b,g,te):A(li,Si,Er,g,b,te);if(!(Fu===r?li===Si||V(li,Si,S,A,te):Fu)){Xn=!1;break}yn||(yn=Er=="constructor")}if(Xn&&!yn){var Rl=g.constructor,ju=b.constructor;Rl!=ju&&"constructor"in g&&"constructor"in b&&!(typeof Rl=="function"&&Rl instanceof Rl&&typeof ju=="function"&&ju instanceof ju)&&(Xn=!1)}return te.delete(g),te.delete(b),Xn}function Xf(g){return D5(PSe(g,r,NSe),g+"")}function E5(g){return ch(g,Ga,x5)}function T5(g){return ch(g,ou,vSe)}var I5=L_?function(g){return L_.get(g)}:H5;function XF(g){for(var b=g.name+"",S=$f[b],A=Mi.call($f,b)?S.length:0;A--;){var V=S[A],te=V.func;if(te==null||te==g)return V.name}return b}function Gw(g){var b=Mi.call(Y,"placeholder")?Y:g;return b.placeholder}function mn(){var g=Y.iteratee||$5;return g=g===$5?BF:g,arguments.length?g(arguments[0],arguments[1]):g}function JF(g,b){var S=g.__data__;return ytt(b)?S[typeof b=="string"?"string":"hash"]:S.map}function R5(g){for(var b=Ga(g),S=b.length;S--;){var A=b[S],V=g[A];b[S]=[A,V,SSe(V)]}return b}function J_(g,b){var S=dF(g,b);return jF(S)?S:r}function utt(g){var b=Mi.call(g,Up),S=g[Up];try{g[Up]=r;var A=!0}catch{}var V=A_.call(g);return A&&(b?g[Up]=S:delete g[Up]),V}var x5=k_?function(g){return g==null?[]:(g=Bi(g),Md(k_(g),function(b){return ky.call(g,b)}))}:W5,vSe=k_?function(g){for(var b=[];g;)kd(b,x5(g)),g=D_(g);return b}:W5,Wc=Pa;(Iw&&Wc(new Iw(new ArrayBuffer(1)))!=fr||Fy&&Wc(new Fy)!=Le||Rw&&Wc(Rw.resolve())!=je||jy&&Wc(new jy)!=B||Uy&&Wc(new Uy)!=Oe)&&(Wc=function(g){var b=Pa(g),S=b==ie?g.constructor:r,A=S?Z_(S):"";if(A)switch(A){case EF:return fr;case TF:return Le;case IF:return je;case xw:return B;case q_:return Oe}return b});function dtt(g,b,S){for(var A=-1,V=S.length;++A<V;){var te=S[A],me=te.size;switch(te.type){case"drop":g+=me;break;case"dropRight":b-=me;break;case"take":b=Qo(b,g+me);break;case"takeRight":g=Mo(g,b-me);break}}return{start:g,end:b}}function ptt(g){var b=g.match(Ir);return b?b[1].split(Yt):[]}function bSe(g,b,S){b=Qe(b,g);for(var A=-1,V=b.length,te=!1;++A<V;){var me=ph(b[A]);if(!(te=g!=null&&S(g,me)))break;g=g[me]}return te||++A!=V?te:(V=g==null?0:g.length,!!V&&sj(V)&&Jf(me,V)&&(Bn(g)||eS(g)))}function mtt(g){var b=g.length,S=new g.constructor(b);return b&&typeof g[0]=="string"&&Mi.call(g,"index")&&(S.index=g.index,S.input=g.input),S}function _Se(g){return typeof g.constructor=="function"&&!oA(g)?Hf(D_(g)):{}}function htt(g,b,S){var A=g.constructor;switch(b){case _r:return cr(g);case jt:case tr:return new A(+g);case fr:return kt(g,S);case He:case Xe:case J:case fe:case Ke:case nt:case Ut:case er:case Cr:return Xr(g,S);case Le:return new A;case ht:case be:return new A(g);case _e:return Sr(g);case B:return new A;case ke:return nn(g)}}function ftt(g,b){var S=b.length;if(!S)return g;var A=S-1;return b[A]=(S>1?"& ":"")+b[A],b=b.join(S>2?", ":" "),g.replace(Pr,`{
/* [wrapped with `+b+`] */
`)}function gtt(g){return Bn(g)||eS(g)||!!(IO&&g&&g[IO])}function Jf(g,b){var S=typeof g;return b=b??Ge,!!b&&(S=="number"||S!="symbol"&&x.test(g))&&g>-1&&g%1==0&&g<b}function Il(g,b,S){if(!vo(S))return!1;var A=typeof b;return(A=="number"?su(S)&&Jf(b,S.length):A=="string"&&b in S)?Yp(S[b],g):!1}function O5(g,b){if(Bn(g))return!1;var S=typeof g;return S=="number"||S=="symbol"||S=="boolean"||g==null||zu(g)?!0:aa.test(g)||!Do.test(g)||b!=null&&g in Bi(b)}function ytt(g){var b=typeof g;return b=="string"||b=="number"||b=="symbol"||b=="boolean"?g!=="__proto__":g===null}function A5(g){var b=XF(g),S=Y[b];if(typeof S!="function"||!(b in ii.prototype))return!1;if(g===S)return!0;var A=I5(S);return!!A&&g===A[0]}function vtt(g){return!!sh&&sh in g}var btt=ih?Zf:K5;function oA(g){var b=g&&g.constructor,S=typeof b=="function"&&b.prototype||zd;return g===S}function SSe(g){return g===g&&!vo(g)}function CSe(g,b){return function(S){return S==null?!1:S[g]===b&&(b!==r||g in Bi(S))}}function _tt(g){var b=nj(g,function(A){return S.size===a&&S.clear(),A}),S=b.cache;return b}function Stt(g,b){var S=g[1],A=b[1],V=S|A,te=V<(f|y|R),me=A==R&&S==_||A==R&&S==I&&g[7].length<=b[8]||A==(R|I)&&b[7].length<=b[8]&&S==_;if(!(te||me))return g;A&f&&(g[2]=b[2],V|=S&f?0:v);var Ce=b[3];if(Ce){var ze=g[3];g[3]=ze?fo(ze,Ce,b[4]):Ce,g[4]=ze?qd(g[3],c):b[4]}return Ce=b[5],Ce&&(ze=g[5],g[5]=ze?go(ze,Ce,b[6]):Ce,g[6]=ze?qd(g[5],c):b[6]),Ce=b[7],Ce&&(g[7]=Ce),A&R&&(g[8]=g[8]==null?b[8]:Qo(g[8],b[8])),g[9]==null&&(g[9]=b[9]),g[0]=b[0],g[1]=V,g}function Ctt(g){var b=[];if(g!=null)for(var S in Bi(g))b.push(S);return b}function Ptt(g){return A_.call(g)}function PSe(g,b,S){return b=Mo(b===r?g.length-1:b,0),function(){for(var A=arguments,V=-1,te=Mo(A.length-b,0),me=tt(te);++V<te;)me[V]=A[b+V];V=-1;for(var Ce=tt(b+1);++V<b;)Ce[V]=A[V];return Ce[b]=S(me),wl(g,this,Ce)}}function wSe(g,b){return b.length<2?g:Qf(g,Vc(b,0,-1))}function wtt(g,b){for(var S=g.length,A=Qo(b.length,S),V=ir(g);A--;){var te=b[A];g[A]=Jf(te,S)?V[te]:r}return g}function N5(g,b){if(!(b==="constructor"&&typeof g[b]=="function")&&b!="__proto__")return g[b]}var ESe=ISe(JO),aA=CF||function(g,b){return Fr.setTimeout(g,b)},D5=ISe(HF);function TSe(g,b,S){var A=b+"";return D5(g,ftt(A,Ett(ptt(A),S)))}function ISe(g){var b=0,S=0;return function(){var A=n5(),V=ee-(A-S);if(S=A,V>0){if(++b>=H)return arguments[0]}else b=0;return g.apply(r,arguments)}}function ZF(g,b){var S=-1,A=g.length,V=A-1;for(b=b===r?A:b;++S<b;){var te=XO(S,V),me=g[te];g[te]=g[S],g[S]=me}return g.length=b,g}var RSe=_tt(function(g){var b=[];return g.charCodeAt(0)===46&&b.push(""),g.replace(za,function(S,A,V,te){b.push(V?te.replace(ei,"$1"):A||S)}),b});function ph(g){if(typeof g=="string"||zu(g))return g;var b=g+"";return b=="0"&&1/g==-Ct?"-0":b}function Z_(g){if(g!=null){try{return O_.call(g)}catch{}try{return g+""}catch{}}return""}function Ett(g,b){return Bc(ce,function(S){var A="_."+S[0];b&S[1]&&!Oy(g,A)&&g.push(A)}),g.sort()}function xSe(g){if(g instanceof ii)return g.clone();var b=new iu(g.__wrapped__,g.__chain__);return b.__actions__=ir(g.__actions__),b.__index__=g.__index__,b.__values__=g.__values__,b}function Ttt(g,b,S){(S?Il(g,b,S):b===r)?b=1:b=Mo(Kn(b),0);var A=g==null?0:g.length;if(!A||b<1)return[];for(var V=0,te=0,me=tt(ku(A/b));V<A;)me[te++]=Vc(g,V,V+=b);return me}function Itt(g){for(var b=-1,S=g==null?0:g.length,A=0,V=[];++b<S;){var te=g[b];te&&(V[A++]=te)}return V}function Rtt(){var g=arguments.length;if(!g)return[];for(var b=tt(g-1),S=arguments[0],A=g;A--;)b[A-1]=arguments[A];return kd(Bn(S)?ir(S):[S],Yo(b,1))}var xtt=Vn(function(g,b){return Xo(g)?Hy(g,Yo(b,1,Xo,!0)):[]}),Ott=Vn(function(g,b){var S=Ud(b);return Xo(S)&&(S=r),Xo(g)?Hy(g,Yo(b,1,Xo,!0),mn(S,2)):[]}),Att=Vn(function(g,b){var S=Ud(b);return Xo(S)&&(S=r),Xo(g)?Hy(g,Yo(b,1,Xo,!0),r,S):[]});function Ntt(g,b,S){var A=g==null?0:g.length;return A?(b=S||b===r?1:Kn(b),Vc(g,b<0?0:b,A)):[]}function Dtt(g,b,S){var A=g==null?0:g.length;return A?(b=S||b===r?1:Kn(b),b=A-b,Vc(g,0,b<0?0:b)):[]}function Mtt(g,b){return g&&g.length?D(g,mn(b,3),!0,!0):[]}function ktt(g,b){return g&&g.length?D(g,mn(b,3),!0):[]}function Ltt(g,b,S,A){var V=g==null?0:g.length;return V?(S&&typeof S!="number"&&Il(g,b,S)&&(S=0,A=V),jO(g,b,S,A)):[]}function OSe(g,b,S){var A=g==null?0:g.length;if(!A)return-1;var V=S==null?0:Kn(S);return V<0&&(V=Mo(A+V,0)),Ay(g,mn(b,3),V)}function ASe(g,b,S){var A=g==null?0:g.length;if(!A)return-1;var V=A-1;return S!==r&&(V=Kn(S),V=S<0?Mo(A+V,0):Qo(V,A-1)),Ay(g,mn(b,3),V,!0)}function NSe(g){var b=g==null?0:g.length;return b?Yo(g,1):[]}function qtt(g){var b=g==null?0:g.length;return b?Yo(g,Ct):[]}function ztt(g,b){var S=g==null?0:g.length;return S?(b=b===r?1:Kn(b),Yo(g,b)):[]}function Ftt(g){for(var b=-1,S=g==null?0:g.length,A={};++b<S;){var V=g[b];A[V[0]]=V[1]}return A}function DSe(g){return g&&g.length?g[0]:r}function jtt(g,b,S){var A=g==null?0:g.length;if(!A)return-1;var V=S==null?0:Kn(S);return V<0&&(V=Mo(A+V,0)),nu(g,b,V)}function Utt(g){var b=g==null?0:g.length;return b?Vc(g,0,-1):[]}var Btt=Vn(function(g){var b=Ui(g,de);return b.length&&b[0]===g[0]?Lw(b):[]}),Gtt=Vn(function(g){var b=Ud(g),S=Ui(g,de);return b===Ud(S)?b=r:S.pop(),S.length&&S[0]===g[0]?Lw(S,mn(b,2)):[]}),$tt=Vn(function(g){var b=Ud(g),S=Ui(g,de);return b=typeof b=="function"?b:r,b&&S.pop(),S.length&&S[0]===g[0]?Lw(S,r,b):[]});function Vtt(g,b){return g==null?"":wF.call(g,b)}function Ud(g){var b=g==null?0:g.length;return b?g[b-1]:r}function Htt(g,b,S){var A=g==null?0:g.length;if(!A)return-1;var V=A;return S!==r&&(V=Kn(S),V=V<0?Mo(A+V,0):Qo(V,A-1)),b===b?r5(g,b,V):Ay(g,sF,V,!0)}function Wtt(g,b){return g&&g.length?WO(g,Kn(b)):r}var Ktt=Vn(MSe);function MSe(g,b){return g&&g.length&&b&&b.length?QO(g,b):g}function Qtt(g,b,S){return g&&g.length&&b&&b.length?QO(g,b,mn(S,2)):g}function Ytt(g,b,S){return g&&g.length&&b&&b.length?QO(g,b,r,S):g}var Xtt=Xf(function(g,b){var S=g==null?0:g.length,A=qO(g,b);return YO(g,Ui(b,function(V){return Jf(V,S)?+V:V}).sort(Wn)),A});function Jtt(g,b){var S=[];if(!(g&&g.length))return S;var A=-1,V=[],te=g.length;for(b=mn(b,3);++A<te;){var me=g[A];b(me,A,g)&&(S.push(me),V.push(A))}return YO(g,V),S}function M5(g){return g==null?g:xO.call(g)}function Ztt(g,b,S){var A=g==null?0:g.length;return A?(S&&typeof S!="number"&&Il(g,b,S)?(b=0,S=A):(b=b==null?0:Kn(b),S=S===r?A:Kn(S)),Vc(g,b,S)):[]}function ert(g,b){return Yy(g,b)}function trt(g,b,S){return ZO(g,b,mn(S,2))}function rrt(g,b){var S=g==null?0:g.length;if(S){var A=Yy(g,b);if(A<S&&Yp(g[A],b))return A}return-1}function nrt(g,b){return Yy(g,b,!0)}function irt(g,b,S){return ZO(g,b,mn(S,2),!0)}function srt(g,b){var S=g==null?0:g.length;if(S){var A=Yy(g,b,!0)-1;if(Yp(g[A],b))return A}return-1}function ort(g){return g&&g.length?WF(g):[]}function art(g,b){return g&&g.length?WF(g,mn(b,2)):[]}function crt(g){var b=g==null?0:g.length;return b?Vc(g,1,b):[]}function lrt(g,b,S){return g&&g.length?(b=S||b===r?1:Kn(b),Vc(g,0,b<0?0:b)):[]}function urt(g,b,S){var A=g==null?0:g.length;return A?(b=S||b===r?1:Kn(b),b=A-b,Vc(g,b<0?0:b,A)):[]}function drt(g,b){return g&&g.length?D(g,mn(b,3),!1,!0):[]}function prt(g,b){return g&&g.length?D(g,mn(b,3)):[]}var mrt=Vn(function(g){return Hp(Yo(g,1,Xo,!0))}),hrt=Vn(function(g){var b=Ud(g);return Xo(b)&&(b=r),Hp(Yo(g,1,Xo,!0),mn(b,2))}),frt=Vn(function(g){var b=Ud(g);return b=typeof b=="function"?b:r,Hp(Yo(g,1,Xo,!0),r,b)});function grt(g){return g&&g.length?Hp(g):[]}function yrt(g,b){return g&&g.length?Hp(g,mn(b,2)):[]}function vrt(g,b){return b=typeof b=="function"?b:r,g&&g.length?Hp(g,r,b):[]}function k5(g){if(!(g&&g.length))return[];var b=0;return g=Md(g,function(S){if(Xo(S))return b=Mo(S.length,b),!0}),Sw(b,function(S){return Ui(g,bw(S))})}function kSe(g,b){if(!(g&&g.length))return[];var S=k5(g);return b==null?S:Ui(S,function(A){return wl(b,r,A)})}var brt=Vn(function(g,b){return Xo(g)?Hy(g,b):[]}),_rt=Vn(function(g){return K(Md(g,Xo))}),Srt=Vn(function(g){var b=Ud(g);return Xo(b)&&(b=r),K(Md(g,Xo),mn(b,2))}),Crt=Vn(function(g){var b=Ud(g);return b=typeof b=="function"?b:r,K(Md(g,Xo),r,b)}),Prt=Vn(k5);function wrt(g,b){return Q(g||[],b||[],V_)}function Ert(g,b){return Q(g||[],b||[],K_)}var Trt=Vn(function(g){var b=g.length,S=b>1?g[b-1]:r;return S=typeof S=="function"?(g.pop(),S):r,kSe(g,S)});function LSe(g){var b=Y(g);return b.__chain__=!0,b}function Irt(g,b){return b(g),g}function ej(g,b){return b(g)}var Rrt=Xf(function(g){var b=g.length,S=b?g[0]:0,A=this.__wrapped__,V=function(te){return qO(te,g)};return b>1||this.__actions__.length||!(A instanceof ii)||!Jf(S)?this.thru(V):(A=A.slice(S,+S+(b?1:0)),A.__actions__.push({func:ej,args:[V],thisArg:r}),new iu(A,this.__chain__).thru(function(te){return b&&!te.length&&te.push(r),te}))});function xrt(){return LSe(this)}function Ort(){return new iu(this.value(),this.__chain__)}function Art(){this.__values__===r&&(this.__values__=YSe(this.value()));var g=this.__index__>=this.__values__.length,b=g?r:this.__values__[this.__index__++];return{done:g,value:b}}function Nrt(){return this}function Drt(g){for(var b,S=this;S instanceof z_;){var A=xSe(S);A.__index__=0,A.__values__=r,b?V.__wrapped__=A:b=A;var V=A;S=S.__wrapped__}return V.__wrapped__=g,b}function Mrt(){var g=this.__wrapped__;if(g instanceof ii){var b=g;return this.__actions__.length&&(b=new ii(this)),b=b.reverse(),b.__actions__.push({func:ej,args:[M5],thisArg:r}),new iu(b,this.__chain__)}return this.thru(M5)}function krt(){return F(this.__wrapped__,this.__actions__)}var Lrt=Q_(function(g,b,S){Mi.call(g,S)?++g[S]:Gp(g,S,1)});function qrt(g,b,S){var A=Bn(g)?gO:LF;return S&&Il(g,b,S)&&(b=r),A(g,mn(b,3))}function zrt(g,b){var S=Bn(g)?Md:Dw;return S(g,mn(b,3))}var Frt=sA(OSe),jrt=sA(ASe);function Urt(g,b){return Yo(tj(g,b),1)}function Brt(g,b){return Yo(tj(g,b),Ct)}function Grt(g,b,S){return S=S===r?1:Kn(S),Yo(tj(g,b),S)}function qSe(g,b){var S=Bn(g)?Bc:Ba;return S(g,mn(b,3))}function zSe(g,b){var S=Bn(g)?fO:FO;return S(g,mn(b,3))}var $rt=Q_(function(g,b,S){Mi.call(g,S)?g[S].push(b):Gp(g,S,[b])});function Vrt(g,b,S,A){g=su(g)?g:Vw(g),S=S&&!A?Kn(S):0;var V=g.length;return S<0&&(S=Mo(V+S,0)),oj(g)?S<=V&&g.indexOf(b,S)>-1:!!V&&nu(g,b,S)>-1}var Hrt=Vn(function(g,b,S){var A=-1,V=typeof b=="function",te=su(g)?tt(g.length):[];return Ba(g,function(me){te[++A]=V?wl(b,me,S):Ky(me,b,S)}),te}),Wrt=Q_(function(g,b,S){Gp(g,S,b)});function tj(g,b){var S=Bn(g)?Ui:Fw;return S(g,mn(b,3))}function Krt(g,b,S,A){return g==null?[]:(Bn(b)||(b=b==null?[]:[b]),S=A?r:S,Bn(S)||(S=S==null?[]:[S]),KO(g,b,S))}var Qrt=Q_(function(g,b,S){g[S?0:1].push(b)},function(){return[[],[]]});function Yrt(g,b,S){var A=Bn(g)?vw:I_,V=arguments.length<3;return A(g,mn(b,4),S,V,Ba)}function Xrt(g,b,S){var A=Bn(g)?XY:I_,V=arguments.length<3;return A(g,mn(b,4),S,V,FO)}function Jrt(g,b){var S=Bn(g)?Md:Dw;return S(g,ij(mn(b,3)))}function Zrt(g){var b=Bn(g)?MO:S5;return b(g)}function ent(g,b,S){(S?Il(g,b,S):b===r)?b=1:b=Kn(b);var A=Bn(g)?Aw:C5;return A(g,b)}function tnt(g){var b=Bn(g)?kO:Uw;return b(g)}function rnt(g){if(g==null)return 0;if(su(g))return oj(g)?Dy(g):g.length;var b=Wc(g);return b==Le||b==B?g.size:zw(g).length}function nnt(g,b,S){var A=Bn(g)?mo:P5;return S&&Il(g,b,S)&&(b=r),A(g,mn(b,3))}var int=Vn(function(g,b){if(g==null)return[];var S=b.length;return S>1&&Il(g,b[0],b[1])?b=[]:S>2&&Il(b[0],b[1],b[2])&&(b=[b[0]]),KO(g,Yo(b,1),[])}),rj=SF||function(){return Fr.Date.now()};function snt(g,b){if(typeof b!="function")throw new Tl(i);return g=Kn(g),function(){if(--g<1)return b.apply(this,arguments)}}function FSe(g,b,S){return b=S?r:b,b=g&&b==null?g.length:b,Yf(g,R,r,r,r,r,b)}function jSe(g,b){var S;if(typeof b!="function")throw new Tl(i);return g=Kn(g),function(){return--g>0&&(S=b.apply(this,arguments)),g<=1&&(b=r),S}}var L5=Vn(function(g,b,S){var A=f;if(S.length){var V=qd(S,Gw(L5));A|=P}return Yf(g,A,b,S,V)}),USe=Vn(function(g,b,S){var A=f|y;if(S.length){var V=qd(S,Gw(USe));A|=P}return Yf(b,A,g,S,V)});function BSe(g,b,S){b=S?r:b;var A=Yf(g,_,r,r,r,r,r,b);return A.placeholder=BSe.placeholder,A}function GSe(g,b,S){b=S?r:b;var A=Yf(g,C,r,r,r,r,r,b);return A.placeholder=GSe.placeholder,A}function $Se(g,b,S){var A,V,te,me,Ce,ze,Rt=0,Ot=!1,Wt=!1,Er=!0;if(typeof g!="function")throw new Tl(i);b=Bd(b)||0,vo(S)&&(Ot=!!S.leading,Wt="maxWait"in S,te=Wt?Mo(Bd(S.maxWait)||0,b):te,Er="trailing"in S?!!S.trailing:Er);function Wr(Jo){var Xp=A,tg=V;return A=V=r,Rt=Jo,me=g.apply(tg,Xp),me}function gn(Jo){return Rt=Jo,Ce=aA(li,b),Ot?Wr(Jo):me}function Xn(Jo){var Xp=Jo-ze,tg=Jo-Rt,lCe=b-Xp;return Wt?Qo(lCe,te-tg):lCe}function yn(Jo){var Xp=Jo-ze,tg=Jo-Rt;return ze===r||Xp>=b||Xp<0||Wt&&tg>=te}function li(){var Jo=rj();if(yn(Jo))return Si(Jo);Ce=aA(li,Xn(Jo))}function Si(Jo){return Ce=r,Er&&A?Wr(Jo):(A=V=r,me)}function Fu(){Ce!==r&&pt(Ce),Rt=0,A=ze=V=Ce=r}function Rl(){return Ce===r?me:Si(rj())}function ju(){var Jo=rj(),Xp=yn(Jo);if(A=arguments,V=this,ze=Jo,Xp){if(Ce===r)return gn(ze);if(Wt)return pt(Ce),Ce=aA(li,b),Wr(ze)}return Ce===r&&(Ce=aA(li,b)),me}return ju.cancel=Fu,ju.flush=Rl,ju}var ont=Vn(function(g,b){return W_(g,1,b)}),ant=Vn(function(g,b,S){return W_(g,Bd(b)||0,S)});function cnt(g){return Yf(g,z)}function nj(g,b){if(typeof g!="function"||b!=null&&typeof b!="function")throw new Tl(i);var S=function(){var A=arguments,V=b?b.apply(this,A):A[0],te=S.cache;if(te.has(V))return te.get(V);var me=g.apply(this,A);return S.cache=te.set(V,me)||te,me};return S.cache=new(nj.Cache||Lu),S}nj.Cache=Lu;function ij(g){if(typeof g!="function")throw new Tl(i);return function(){var b=arguments;switch(b.length){case 0:return!g.call(this);case 1:return!g.call(this,b[0]);case 2:return!g.call(this,b[0],b[1]);case 3:return!g.call(this,b[0],b[1],b[2])}return!g.apply(this,b)}}function lnt(g){return jSe(2,g)}var unt=We(function(g,b){b=b.length==1&&Bn(b[0])?Ui(b[0],El(mn())):Ui(Yo(b,1),El(mn()));var S=b.length;return Vn(function(A){for(var V=-1,te=Qo(A.length,S);++V<te;)A[V]=b[V].call(this,A[V]);return wl(g,this,A)})}),q5=Vn(function(g,b){var S=qd(b,Gw(q5));return Yf(g,P,r,b,S)}),VSe=Vn(function(g,b){var S=qd(b,Gw(VSe));return Yf(g,w,r,b,S)}),dnt=Xf(function(g,b){return Yf(g,I,r,r,r,b)});function pnt(g,b){if(typeof g!="function")throw new Tl(i);return b=b===r?b:Kn(b),Vn(g,b)}function mnt(g,b){if(typeof g!="function")throw new Tl(i);return b=b==null?0:Mo(Kn(b),0),Vn(function(S){var A=S[b],V=Mt(S,0,b);return A&&kd(V,A),wl(g,this,V)})}function hnt(g,b,S){var A=!0,V=!0;if(typeof g!="function")throw new Tl(i);return vo(S)&&(A="leading"in S?!!S.leading:A,V="trailing"in S?!!S.trailing:V),$Se(g,b,{leading:A,maxWait:b,trailing:V})}function fnt(g){return FSe(g,1)}function gnt(g,b){return q5(Me(b),g)}function ynt(){if(!arguments.length)return[];var g=arguments[0];return Bn(g)?g:[g]}function vnt(g){return $c(g,d)}function bnt(g,b){return b=typeof b=="function"?b:r,$c(g,d,b)}function _nt(g){return $c(g,l|d)}function Snt(g,b){return b=typeof b=="function"?b:r,$c(g,l|d,b)}function Cnt(g,b){return b==null||H_(g,b,Ga(b))}function Yp(g,b){return g===b||g!==g&&b!==b}var Pnt=Qp(Wy),wnt=Qp(function(g,b){return g>=b}),eS=FF(function(){return arguments}())?FF:function(g){return ko(g)&&Mi.call(g,"callee")&&!ky.call(g,"callee")},Bn=tt.isArray,Ent=Ua?El(Ua):BO;function su(g){return g!=null&&sj(g.length)&&!Zf(g)}function Xo(g){return ko(g)&&su(g)}function Tnt(g){return g===!0||g===!1||ko(g)&&Pa(g)==jt}var Zy=PF||K5,Int=rh?El(rh):$p;function Rnt(g){return ko(g)&&g.nodeType===1&&!cA(g)}function xnt(g){if(g==null)return!0;if(su(g)&&(Bn(g)||typeof g=="string"||typeof g.splice=="function"||Zy(g)||$w(g)||eS(g)))return!g.length;var b=Wc(g);if(b==Le||b==B)return!g.size;if(oA(g))return!zw(g).length;for(var S in g)if(Mi.call(g,S))return!1;return!0}function Ont(g,b){return lh(g,b)}function Ant(g,b,S){S=typeof S=="function"?S:r;var A=S?S(g,b):r;return A===r?lh(g,b,r,S):!!A}function z5(g){if(!ko(g))return!1;var b=Pa(g);return b==we||b==se||typeof g.message=="string"&&typeof g.name=="string"&&!cA(g)}function Nnt(g){return typeof g=="number"&&zy(g)}function Zf(g){if(!vo(g))return!1;var b=Pa(g);return b==Ne||b==Re||b==ct||b==le}function HSe(g){return typeof g=="number"&&g==Kn(g)}function sj(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=Ge}function vo(g){var b=typeof g;return g!=null&&(b=="object"||b=="function")}function ko(g){return g!=null&&typeof g=="object"}var WSe=Iy?El(Iy):uh;function Dnt(g,b){return g===b||$O(g,b,R5(b))}function Mnt(g,b,S){return S=typeof S=="function"?S:r,$O(g,b,R5(b),S)}function knt(g){return KSe(g)&&g!=+g}function Lnt(g){if(btt(g))throw new fn(n);return jF(g)}function qnt(g){return g===null}function znt(g){return g==null}function KSe(g){return typeof g=="number"||ko(g)&&Pa(g)==ht}function cA(g){if(!ko(g)||Pa(g)!=ie)return!1;var b=D_(g);if(b===null)return!0;var S=Mi.call(b,"constructor")&&b.constructor;return typeof S=="function"&&S instanceof S&&O_.call(S)==EO}var F5=Ry?El(Ry):y5;function Fnt(g){return HSe(g)&&g>=-Ge&&g<=Ge}var QSe=xy?El(xy):UF;function oj(g){return typeof g=="string"||!Bn(g)&&ko(g)&&Pa(g)==be}function zu(g){return typeof g=="symbol"||ko(g)&&Pa(g)==ke}var $w=rF?El(rF):qw;function jnt(g){return g===r}function Unt(g){return ko(g)&&Wc(g)==Oe}function Bnt(g){return ko(g)&&Pa(g)==Ht}var Gnt=Qp(VO),$nt=Qp(function(g,b){return g<=b});function YSe(g){if(!g)return[];if(su(g))return oj(g)?Du(g):ir(g);if(Ly&&g[Ly])return Pw(g[Ly]());var b=Wc(g),S=b==Le?SO:b==B?x_:Vw;return S(g)}function eg(g){if(!g)return g===0?g:0;if(g=Bd(g),g===Ct||g===-Ct){var b=g<0?-1:1;return b*pe}return g===g?g:0}function Kn(g){var b=eg(g),S=b%1;return b===b?S?b-S:b:0}function XSe(g){return g?Kf(Kn(g),0,Ve):0}function Bd(g){if(typeof g=="number")return g;if(zu(g))return Ie;if(vo(g)){var b=typeof g.valueOf=="function"?g.valueOf():g;g=vo(b)?b+"":b}if(typeof g!="string")return g===0?g:+g;g=Ny(g);var S=Lr.test(g);return S||E.test(g)?Ae(g.slice(2),S?2:8):ni.test(g)?Ie:+g}function JSe(g){return Hc(g,ou(g))}function Vnt(g){return g?Kf(Kn(g),-Ge,Ge):g===0?g:0}function Zi(g){return g==null?"":vc(g)}var Hnt=dh(function(g,b){if(oA(b)||su(b)){Hc(b,Ga(b),g);return}for(var S in b)Mi.call(b,S)&&V_(g,S,b[S])}),ZSe=dh(function(g,b){Hc(b,ou(b),g)}),aj=dh(function(g,b,S,A){Hc(b,ou(b),g,A)}),Wnt=dh(function(g,b,S,A){Hc(b,Ga(b),g,A)}),Knt=Xf(qO);function Qnt(g,b){var S=Hf(g);return b==null?S:kF(S,b)}var Ynt=Vn(function(g,b){g=Bi(g);var S=-1,A=b.length,V=A>2?b[2]:r;for(V&&Il(b[0],b[1],V)&&(A=1);++S<A;)for(var te=b[S],me=ou(te),Ce=-1,ze=me.length;++Ce<ze;){var Rt=me[Ce],Ot=g[Rt];(Ot===r||Yp(Ot,zd[Rt])&&!Mi.call(g,Rt))&&(g[Rt]=te[Rt])}return g}),Xnt=Vn(function(g){return g.push(r,gSe),wl(eCe,r,g)});function Jnt(g,b){return jp(g,mn(b,3),jd)}function Znt(g,b){return jp(g,mn(b,3),UO)}function eit(g,b){return g==null?g:Mw(g,mn(b,3),ou)}function tit(g,b){return g==null?g:qF(g,mn(b,3),ou)}function rit(g,b){return g&&jd(g,mn(b,3))}function nit(g,b){return g&&UO(g,mn(b,3))}function iit(g){return g==null?[]:kw(g,Ga(g))}function sit(g){return g==null?[]:kw(g,ou(g))}function j5(g,b,S){var A=g==null?r:Qf(g,b);return A===r?S:A}function oit(g,b){return g!=null&&bSe(g,b,h5)}function U5(g,b){return g!=null&&bSe(g,b,f5)}var ait=ls(function(g,b,S){b!=null&&typeof b.toString!="function"&&(b=A_.call(b)),g[b]=S},G5(au)),cit=ls(function(g,b,S){b!=null&&typeof b.toString!="function"&&(b=A_.call(b)),Mi.call(g,b)?g[b].push(S):g[b]=[S]},mn),lit=Vn(Ky);function Ga(g){return su(g)?DO(g):zw(g)}function ou(g){return su(g)?DO(g,!0):v5(g)}function uit(g,b){var S={};return b=mn(b,3),jd(g,function(A,V,te){Gp(S,b(A,V,te),A)}),S}function dit(g,b){var S={};return b=mn(b,3),jd(g,function(A,V,te){Gp(S,V,b(A,V,te))}),S}var pit=dh(function(g,b,S){jw(g,b,S)}),eCe=dh(function(g,b,S,A){jw(g,b,S,A)}),mit=Xf(function(g,b){var S={};if(g==null)return S;var A=!1;b=Ui(b,function(te){return te=Qe(te,g),A||(A=te.length>1),te}),Hc(g,T5(g),S),A&&(S=$c(S,l|u|d,att));for(var V=b.length;V--;)tA(S,b[V]);return S});function hit(g,b){return tCe(g,ij(mn(b)))}var fit=Xf(function(g,b){return g==null?{}:b5(g,b)});function tCe(g,b){if(g==null)return{};var S=Ui(T5(g),function(A){return[A]});return b=mn(b),$F(g,S,function(A,V){return b(A,V[0])})}function git(g,b,S){b=Qe(b,g);var A=-1,V=b.length;for(V||(V=1,g=r);++A<V;){var te=g==null?r:g[ph(b[A])];te===r&&(A=V,te=S),g=Zf(te)?te.call(g):te}return g}function yit(g,b,S){return g==null?g:K_(g,b,S)}function vit(g,b,S,A){return A=typeof A=="function"?A:r,g==null?g:K_(g,b,S,A)}var rCe=hSe(Ga),nCe=hSe(ou);function bit(g,b,S){var A=Bn(g),V=A||Zy(g)||$w(g);if(b=mn(b,4),S==null){var te=g&&g.constructor;V?S=A?new te:[]:vo(g)?S=Zf(te)?Hf(D_(g)):{}:S={}}return(V?Bc:jd)(g,function(me,Ce,ze){return b(S,me,Ce,ze)}),S}function _it(g,b){return g==null?!0:tA(g,b)}function Sit(g,b,S){return g==null?g:T(g,b,Me(S))}function Cit(g,b,S,A){return A=typeof A=="function"?A:r,g==null?g:T(g,b,Me(S),A)}function Vw(g){return g==null?[]:Ld(g,Ga(g))}function Pit(g){return g==null?[]:Ld(g,ou(g))}function wit(g,b,S){return S===r&&(S=b,b=r),S!==r&&(S=Bd(S),S=S===S?S:0),b!==r&&(b=Bd(b),b=b===b?b:0),Kf(Bd(g),b,S)}function Eit(g,b,S){return b=eg(b),S===r?(S=b,b=0):S=eg(S),g=Bd(g),g5(g,b,S)}function Tit(g,b,S){if(S&&typeof S!="boolean"&&Il(g,b,S)&&(b=S=r),S===r&&(typeof b=="boolean"?(S=b,b=r):typeof g=="boolean"&&(S=g,g=r)),g===r&&b===r?(g=0,b=1):(g=eg(g),b===r?(b=g,g=0):b=eg(b)),g>b){var A=g;g=b,b=A}if(S||g%1||b%1){var V=Gf();return Qo(g+V*(b-g+oe("1e-"+((V+"").length-1))),b)}return XO(g,b)}var Iit=Jy(function(g,b,S){return b=b.toLowerCase(),g+(S?iCe(b):b)});function iCe(g){return B5(Zi(g).toLowerCase())}function sCe(g){return g=Zi(g),g&&g.replace(j,cF).replace(In,"")}function Rit(g,b,S){g=Zi(g),b=vc(b);var A=g.length;S=S===r?A:Kf(Kn(S),0,A);var V=S;return S-=b.length,S>=0&&g.slice(S,V)==b}function xit(g){return g=Zi(g),g&&Kr.test(g)?g.replace(Ye,lF):g}function Oit(g){return g=Zi(g),g&&or.test(g)?g.replace(mr,"\\$&"):g}var Ait=Jy(function(g,b,S){return g+(S?"-":"")+b.toLowerCase()}),Nit=Jy(function(g,b,S){return g+(S?" ":"")+b.toLowerCase()}),Dit=QF("toLowerCase");function Mit(g,b,S){g=Zi(g),b=Kn(b);var A=b?Dy(g):0;if(!b||A>=b)return g;var V=(b-A)/2;return wa(Bf(V),S)+g+wa(ku(V),S)}function kit(g,b,S){g=Zi(g),b=Kn(b);var A=b?Dy(g):0;return b&&A<b?g+wa(b-A,S):g}function Lit(g,b,S){g=Zi(g),b=Kn(b);var A=b?Dy(g):0;return b&&A<b?wa(b-A,S)+g:g}function qit(g,b,S){return S||b==null?b=0:b&&(b=+b),i5(Zi(g).replace($t,""),b||0)}function zit(g,b,S){return(S?Il(g,b,S):b===r)?b=1:b=Kn(b),Qy(Zi(g),b)}function Fit(){var g=arguments,b=Zi(g[0]);return g.length<3?b:b.replace(g[1],g[2])}var jit=Jy(function(g,b,S){return g+(S?"_":"")+b.toLowerCase()});function Uit(g,b,S){return S&&typeof S!="number"&&Il(g,b,S)&&(b=S=r),S=S===r?Ve:S>>>0,S?(g=Zi(g),g&&(typeof b=="string"||b!=null&&!F5(b))&&(b=vc(b),!b&&nh(g))?Mt(Du(g),0,S):g.split(b,S)):[]}var Bit=Jy(function(g,b,S){return g+(S?" ":"")+B5(b)});function Git(g,b,S){return g=Zi(g),S=S==null?0:Kf(Kn(S),0,g.length),b=vc(b),g.slice(S,S+b.length)==b}function $it(g,b,S){var A=Y.templateSettings;S&&Il(g,b,S)&&(b=r),g=Zi(g),b=aj({},b,A,fSe);var V=aj({},b.imports,A.imports,fSe),te=Ga(V),me=Ld(V,te),Ce,ze,Rt=0,Ot=b.interpolate||ne,Wt="__p += '",Er=PO((b.escape||ne).source+"|"+Ot.source+"|"+(Ot===Yi?Xi:ne).source+"|"+(b.evaluate||ne).source+"|$","g"),Wr="//# sourceURL="+(Mi.call(b,"sourceURL")?(b.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ar+"]")+`
`;g.replace(Er,function(yn,li,Si,Fu,Rl,ju){return Si||(Si=Fu),Wt+=g.slice(Rt,ju).replace(re,uF),li&&(Ce=!0,Wt+=`' +
__e(`+li+`) +
'`),Rl&&(ze=!0,Wt+=`';
`+Rl+`;
__p += '`),Si&&(Wt+=`' +
((__t = (`+Si+`)) == null ? '' : __t) +
'`),Rt=ju+yn.length,yn}),Wt+=`';
`;var gn=Mi.call(b,"variable")&&b.variable;if(!gn)Wt=`with (obj) {
`+Wt+`
}
`;else if(tn.test(gn))throw new fn(s);Wt=(ze?Wt.replace(gr,""):Wt).replace(dt,"$1").replace(It,"$1;"),Wt="function("+(gn||"obj")+`) {
`+(gn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Ce?", __e = _.escape":"")+(ze?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Wt+`return __p
}`;var Xn=aCe(function(){return Ii(te,Wr+"return "+Wt).apply(r,me)});if(Xn.source=Wt,z5(Xn))throw Xn;return Xn}function Vit(g){return Zi(g).toLowerCase()}function Hit(g){return Zi(g).toUpperCase()}function Wit(g,b,S){if(g=Zi(g),g&&(S||b===r))return Ny(g);if(!g||!(b=vc(b)))return g;var A=Du(g),V=Du(b),te=oF(A,V),me=aF(A,V)+1;return Mt(A,te,me).join("")}function Kit(g,b,S){if(g=Zi(g),g&&(S||b===r))return g.slice(0,CO(g)+1);if(!g||!(b=vc(b)))return g;var A=Du(g),V=aF(A,Du(b))+1;return Mt(A,0,V).join("")}function Qit(g,b,S){if(g=Zi(g),g&&(S||b===r))return g.replace($t,"");if(!g||!(b=vc(b)))return g;var A=Du(g),V=oF(A,Du(b));return Mt(A,V).join("")}function Yit(g,b){var S=G,A=L;if(vo(b)){var V="separator"in b?b.separator:V;S="length"in b?Kn(b.length):S,A="omission"in b?vc(b.omission):A}g=Zi(g);var te=g.length;if(nh(g)){var me=Du(g);te=me.length}if(S>=te)return g;var Ce=S-Dy(A);if(Ce<1)return A;var ze=me?Mt(me,0,Ce).join(""):g.slice(0,Ce);if(V===r)return ze+A;if(me&&(Ce+=ze.length-Ce),F5(V)){if(g.slice(Ce).search(V)){var Rt,Ot=ze;for(V.global||(V=PO(V.source,Zi(mi.exec(V))+"g")),V.lastIndex=0;Rt=V.exec(Ot);)var Wt=Rt.index;ze=ze.slice(0,Wt===r?Ce:Wt)}}else if(g.indexOf(vc(V),Ce)!=Ce){var Er=ze.lastIndexOf(V);Er>-1&&(ze=ze.slice(0,Er))}return ze+A}function Xit(g){return g=Zi(g),g&&pr.test(g)?g.replace(Je,mF):g}var Jit=Jy(function(g,b,S){return g+(S?" ":"")+b.toUpperCase()}),B5=QF("toUpperCase");function oCe(g,b,S){return g=Zi(g),b=S?r:b,b===r?Cw(g)?My(g):nF(g):g.match(b)||[]}var aCe=Vn(function(g,b){try{return wl(g,r,b)}catch(S){return z5(S)?S:new fn(S)}}),Zit=Xf(function(g,b){return Bc(b,function(S){S=ph(S),Gp(g,S,L5(g[S],g))}),g});function est(g){var b=g==null?0:g.length,S=mn();return g=b?Ui(g,function(A){if(typeof A[1]!="function")throw new Tl(i);return[S(A[0]),A[1]]}):[],Vn(function(A){for(var V=-1;++V<b;){var te=g[V];if(wl(te[0],this,A))return wl(te[1],this,A)}})}function tst(g){return zO($c(g,l))}function G5(g){return function(){return g}}function rst(g,b){return g==null||g!==g?b:g}var nst=hr(),ist=hr(!0);function au(g){return g}function $5(g){return BF(typeof g=="function"?g:$c(g,l))}function sst(g){return Vp($c(g,l))}function ost(g,b){return HO(g,$c(b,l))}var ast=Vn(function(g,b){return function(S){return Ky(S,g,b)}}),cst=Vn(function(g,b){return function(S){return Ky(g,S,b)}});function V5(g,b,S){var A=Ga(b),V=kw(b,A);S==null&&!(vo(b)&&(V.length||!A.length))&&(S=b,b=g,g=this,V=kw(b,Ga(b)));var te=!(vo(S)&&"chain"in S)||!!S.chain,me=Zf(g);return Bc(V,function(Ce){var ze=b[Ce];g[Ce]=ze,me&&(g.prototype[Ce]=function(){var Rt=this.__chain__;if(te||Rt){var Ot=g(this.__wrapped__),Wt=Ot.__actions__=ir(this.__actions__);return Wt.push({func:ze,args:arguments,thisArg:g}),Ot.__chain__=Rt,Ot}return ze.apply(g,kd([this.value()],arguments))})}),g}function lst(){return Fr._===this&&(Fr._=TO),this}function H5(){}function ust(g){return g=Kn(g),Vn(function(b){return WO(b,g)})}var dst=yo(Ui),pst=yo(gO),mst=yo(mo);function cCe(g){return O5(g)?bw(ph(g)):_5(g)}function hst(g){return function(b){return g==null?r:Qf(g,b)}}var fst=Kp(),gst=Kp(!0);function W5(){return[]}function K5(){return!1}function yst(){return{}}function vst(){return""}function bst(){return!0}function _st(g,b){if(g=Kn(g),g<1||g>Ge)return[];var S=Ve,A=Qo(g,Ve);b=mn(b),g-=Ve;for(var V=Sw(A,b);++S<g;)b(S);return V}function Sst(g){return Bn(g)?Ui(g,ph):zu(g)?[g]:ir(RSe(Zi(g)))}function Cst(g){var b=++wO;return Zi(g)+b}var Pst=En(function(g,b){return g+b},0),wst=Bw("ceil"),Est=En(function(g,b){return g/b},1),Tst=Bw("floor");function Ist(g){return g&&g.length?Nw(g,au,Wy):r}function Rst(g,b){return g&&g.length?Nw(g,mn(b,2),Wy):r}function xst(g){return bO(g,au)}function Ost(g,b){return bO(g,mn(b,2))}function Ast(g){return g&&g.length?Nw(g,au,VO):r}function Nst(g,b){return g&&g.length?Nw(g,mn(b,2),VO):r}var Dst=En(function(g,b){return g*b},1),Mst=Bw("round"),kst=En(function(g,b){return g-b},0);function Lst(g){return g&&g.length?_w(g,au):0}function qst(g,b){return g&&g.length?_w(g,mn(b,2)):0}return Y.after=snt,Y.ary=FSe,Y.assign=Hnt,Y.assignIn=ZSe,Y.assignInWith=aj,Y.assignWith=Wnt,Y.at=Knt,Y.before=jSe,Y.bind=L5,Y.bindAll=Zit,Y.bindKey=USe,Y.castArray=ynt,Y.chain=LSe,Y.chunk=Ttt,Y.compact=Itt,Y.concat=Rtt,Y.cond=est,Y.conforms=tst,Y.constant=G5,Y.countBy=Lrt,Y.create=Qnt,Y.curry=BSe,Y.curryRight=GSe,Y.debounce=$Se,Y.defaults=Ynt,Y.defaultsDeep=Xnt,Y.defer=ont,Y.delay=ant,Y.difference=xtt,Y.differenceBy=Ott,Y.differenceWith=Att,Y.drop=Ntt,Y.dropRight=Dtt,Y.dropRightWhile=Mtt,Y.dropWhile=ktt,Y.fill=Ltt,Y.filter=zrt,Y.flatMap=Urt,Y.flatMapDeep=Brt,Y.flatMapDepth=Grt,Y.flatten=NSe,Y.flattenDeep=qtt,Y.flattenDepth=ztt,Y.flip=cnt,Y.flow=nst,Y.flowRight=ist,Y.fromPairs=Ftt,Y.functions=iit,Y.functionsIn=sit,Y.groupBy=$rt,Y.initial=Utt,Y.intersection=Btt,Y.intersectionBy=Gtt,Y.intersectionWith=$tt,Y.invert=ait,Y.invertBy=cit,Y.invokeMap=Hrt,Y.iteratee=$5,Y.keyBy=Wrt,Y.keys=Ga,Y.keysIn=ou,Y.map=tj,Y.mapKeys=uit,Y.mapValues=dit,Y.matches=sst,Y.matchesProperty=ost,Y.memoize=nj,Y.merge=pit,Y.mergeWith=eCe,Y.method=ast,Y.methodOf=cst,Y.mixin=V5,Y.negate=ij,Y.nthArg=ust,Y.omit=mit,Y.omitBy=hit,Y.once=lnt,Y.orderBy=Krt,Y.over=dst,Y.overArgs=unt,Y.overEvery=pst,Y.overSome=mst,Y.partial=q5,Y.partialRight=VSe,Y.partition=Qrt,Y.pick=fit,Y.pickBy=tCe,Y.property=cCe,Y.propertyOf=hst,Y.pull=Ktt,Y.pullAll=MSe,Y.pullAllBy=Qtt,Y.pullAllWith=Ytt,Y.pullAt=Xtt,Y.range=fst,Y.rangeRight=gst,Y.rearg=dnt,Y.reject=Jrt,Y.remove=Jtt,Y.rest=pnt,Y.reverse=M5,Y.sampleSize=ent,Y.set=yit,Y.setWith=vit,Y.shuffle=tnt,Y.slice=Ztt,Y.sortBy=int,Y.sortedUniq=ort,Y.sortedUniqBy=art,Y.split=Uit,Y.spread=mnt,Y.tail=crt,Y.take=lrt,Y.takeRight=urt,Y.takeRightWhile=drt,Y.takeWhile=prt,Y.tap=Irt,Y.throttle=hnt,Y.thru=ej,Y.toArray=YSe,Y.toPairs=rCe,Y.toPairsIn=nCe,Y.toPath=Sst,Y.toPlainObject=JSe,Y.transform=bit,Y.unary=fnt,Y.union=mrt,Y.unionBy=hrt,Y.unionWith=frt,Y.uniq=grt,Y.uniqBy=yrt,Y.uniqWith=vrt,Y.unset=_it,Y.unzip=k5,Y.unzipWith=kSe,Y.update=Sit,Y.updateWith=Cit,Y.values=Vw,Y.valuesIn=Pit,Y.without=brt,Y.words=oCe,Y.wrap=gnt,Y.xor=_rt,Y.xorBy=Srt,Y.xorWith=Crt,Y.zip=Prt,Y.zipObject=wrt,Y.zipObjectDeep=Ert,Y.zipWith=Trt,Y.entries=rCe,Y.entriesIn=nCe,Y.extend=ZSe,Y.extendWith=aj,V5(Y,Y),Y.add=Pst,Y.attempt=aCe,Y.camelCase=Iit,Y.capitalize=iCe,Y.ceil=wst,Y.clamp=wit,Y.clone=vnt,Y.cloneDeep=_nt,Y.cloneDeepWith=Snt,Y.cloneWith=bnt,Y.conformsTo=Cnt,Y.deburr=sCe,Y.defaultTo=rst,Y.divide=Est,Y.endsWith=Rit,Y.eq=Yp,Y.escape=xit,Y.escapeRegExp=Oit,Y.every=qrt,Y.find=Frt,Y.findIndex=OSe,Y.findKey=Jnt,Y.findLast=jrt,Y.findLastIndex=ASe,Y.findLastKey=Znt,Y.floor=Tst,Y.forEach=qSe,Y.forEachRight=zSe,Y.forIn=eit,Y.forInRight=tit,Y.forOwn=rit,Y.forOwnRight=nit,Y.get=j5,Y.gt=Pnt,Y.gte=wnt,Y.has=oit,Y.hasIn=U5,Y.head=DSe,Y.identity=au,Y.includes=Vrt,Y.indexOf=jtt,Y.inRange=Eit,Y.invoke=lit,Y.isArguments=eS,Y.isArray=Bn,Y.isArrayBuffer=Ent,Y.isArrayLike=su,Y.isArrayLikeObject=Xo,Y.isBoolean=Tnt,Y.isBuffer=Zy,Y.isDate=Int,Y.isElement=Rnt,Y.isEmpty=xnt,Y.isEqual=Ont,Y.isEqualWith=Ant,Y.isError=z5,Y.isFinite=Nnt,Y.isFunction=Zf,Y.isInteger=HSe,Y.isLength=sj,Y.isMap=WSe,Y.isMatch=Dnt,Y.isMatchWith=Mnt,Y.isNaN=knt,Y.isNative=Lnt,Y.isNil=znt,Y.isNull=qnt,Y.isNumber=KSe,Y.isObject=vo,Y.isObjectLike=ko,Y.isPlainObject=cA,Y.isRegExp=F5,Y.isSafeInteger=Fnt,Y.isSet=QSe,Y.isString=oj,Y.isSymbol=zu,Y.isTypedArray=$w,Y.isUndefined=jnt,Y.isWeakMap=Unt,Y.isWeakSet=Bnt,Y.join=Vtt,Y.kebabCase=Ait,Y.last=Ud,Y.lastIndexOf=Htt,Y.lowerCase=Nit,Y.lowerFirst=Dit,Y.lt=Gnt,Y.lte=$nt,Y.max=Ist,Y.maxBy=Rst,Y.mean=xst,Y.meanBy=Ost,Y.min=Ast,Y.minBy=Nst,Y.stubArray=W5,Y.stubFalse=K5,Y.stubObject=yst,Y.stubString=vst,Y.stubTrue=bst,Y.multiply=Dst,Y.nth=Wtt,Y.noConflict=lst,Y.noop=H5,Y.now=rj,Y.pad=Mit,Y.padEnd=kit,Y.padStart=Lit,Y.parseInt=qit,Y.random=Tit,Y.reduce=Yrt,Y.reduceRight=Xrt,Y.repeat=zit,Y.replace=Fit,Y.result=git,Y.round=Mst,Y.runInContext=De,Y.sample=Zrt,Y.size=rnt,Y.snakeCase=jit,Y.some=nnt,Y.sortedIndex=ert,Y.sortedIndexBy=trt,Y.sortedIndexOf=rrt,Y.sortedLastIndex=nrt,Y.sortedLastIndexBy=irt,Y.sortedLastIndexOf=srt,Y.startCase=Bit,Y.startsWith=Git,Y.subtract=kst,Y.sum=Lst,Y.sumBy=qst,Y.template=$it,Y.times=_st,Y.toFinite=eg,Y.toInteger=Kn,Y.toLength=XSe,Y.toLower=Vit,Y.toNumber=Bd,Y.toSafeInteger=Vnt,Y.toString=Zi,Y.toUpper=Hit,Y.trim=Wit,Y.trimEnd=Kit,Y.trimStart=Qit,Y.truncate=Yit,Y.unescape=Xit,Y.uniqueId=Cst,Y.upperCase=Jit,Y.upperFirst=B5,Y.each=qSe,Y.eachRight=zSe,Y.first=DSe,V5(Y,function(){var g={};return jd(Y,function(b,S){Mi.call(Y.prototype,S)||(g[S]=b)}),g}(),{chain:!1}),Y.VERSION=e,Bc(["bind","bindKey","curry","curryRight","partial","partialRight"],function(g){Y[g].placeholder=Y}),Bc(["drop","take"],function(g,b){ii.prototype[g]=function(S){S=S===r?1:Mo(Kn(S),0);var A=this.__filtered__&&!b?new ii(this):this.clone();return A.__filtered__?A.__takeCount__=Qo(S,A.__takeCount__):A.__views__.push({size:Qo(S,Ve),type:g+(A.__dir__<0?"Right":"")}),A},ii.prototype[g+"Right"]=function(S){return this.reverse()[g](S).reverse()}}),Bc(["filter","map","takeWhile"],function(g,b){var S=b+1,A=S==ye||S==Be;ii.prototype[g]=function(V){var te=this.clone();return te.__iteratees__.push({iteratee:mn(V,3),type:S}),te.__filtered__=te.__filtered__||A,te}}),Bc(["head","last"],function(g,b){var S="take"+(b?"Right":"");ii.prototype[g]=function(){return this[S](1).value()[0]}}),Bc(["initial","tail"],function(g,b){var S="drop"+(b?"":"Right");ii.prototype[g]=function(){return this.__filtered__?new ii(this):this[S](1)}}),ii.prototype.compact=function(){return this.filter(au)},ii.prototype.find=function(g){return this.filter(g).head()},ii.prototype.findLast=function(g){return this.reverse().find(g)},ii.prototype.invokeMap=Vn(function(g,b){return typeof g=="function"?new ii(this):this.map(function(S){return Ky(S,g,b)})}),ii.prototype.reject=function(g){return this.filter(ij(mn(g)))},ii.prototype.slice=function(g,b){g=Kn(g);var S=this;return S.__filtered__&&(g>0||b<0)?new ii(S):(g<0?S=S.takeRight(-g):g&&(S=S.drop(g)),b!==r&&(b=Kn(b),S=b<0?S.dropRight(-b):S.take(b-g)),S)},ii.prototype.takeRightWhile=function(g){return this.reverse().takeWhile(g).reverse()},ii.prototype.toArray=function(){return this.take(Ve)},jd(ii.prototype,function(g,b){var S=/^(?:filter|find|map|reject)|While$/.test(b),A=/^(?:head|last)$/.test(b),V=Y[A?"take"+(b=="last"?"Right":""):b],te=A||/^find/.test(b);V&&(Y.prototype[b]=function(){var me=this.__wrapped__,Ce=A?[1]:arguments,ze=me instanceof ii,Rt=Ce[0],Ot=ze||Bn(me),Wt=function(li){var Si=V.apply(Y,kd([li],Ce));return A&&Er?Si[0]:Si};Ot&&S&&typeof Rt=="function"&&Rt.length!=1&&(ze=Ot=!1);var Er=this.__chain__,Wr=!!this.__actions__.length,gn=te&&!Er,Xn=ze&&!Wr;if(!te&&Ot){me=Xn?me:new ii(this);var yn=g.apply(me,Ce);return yn.__actions__.push({func:ej,args:[Wt],thisArg:r}),new iu(yn,Er)}return gn&&Xn?g.apply(this,Ce):(yn=this.thru(Wt),gn?A?yn.value()[0]:yn.value():yn)})}),Bc(["pop","push","shift","sort","splice","unshift"],function(g){var b=Mu[g],S=/^(?:push|sort|unshift)$/.test(g)?"tap":"thru",A=/^(?:pop|shift)$/.test(g);Y.prototype[g]=function(){var V=arguments;if(A&&!this.__chain__){var te=this.value();return b.apply(Bn(te)?te:[],V)}return this[S](function(me){return b.apply(Bn(me)?me:[],V)})}}),jd(ii.prototype,function(g,b){var S=Y[b];if(S){var A=S.name+"";Mi.call($f,A)||($f[A]=[]),$f[A].push({name:b,func:S})}}),$f[Un(r,y).name]=[{name:"wrapper",func:r}],ii.prototype.clone=s5,ii.prototype.reverse=F_,ii.prototype.value=o5,Y.prototype.at=Rrt,Y.prototype.chain=xrt,Y.prototype.commit=Ort,Y.prototype.next=Art,Y.prototype.plant=Drt,Y.prototype.reverse=Mrt,Y.prototype.toJSON=Y.prototype.valueOf=Y.prototype.value=krt,Y.prototype.first=Y.prototype.head,Ly&&(Y.prototype[Ly]=Nrt),Y},Gc=fF();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Fr._=Gc,define(function(){return Gc})):_i?((_i.exports=Gc)._=Gc,Di._=Gc):Fr._=Gc}).call(zI)});var C4e=O((zUr,S4e)=>{var h4e=Ohe(),s5t=Yhe(),o5t=Qhe(),f4e=D3(),{includes:a5t,isBoolean:K3,isInteger:g4e,isNumber:Zhe,isPlainObject:v4e,isString:e_,once:c5t}=m4e(),{KeyObject:l5t,createSecretKey:u5t,createPrivateKey:d5t}=require("crypto"),b4e=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];s5t&&b4e.splice(3,0,"PS256","PS384","PS512");var p5t={expiresIn:{isValid:function(r){return g4e(r)||e_(r)&&r},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(r){return g4e(r)||e_(r)&&r},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(r){return e_(r)||Array.isArray(r)},message:'"audience" must be a string or array'},algorithm:{isValid:a5t.bind(null,b4e),message:'"algorithm" must be a valid string enum value'},header:{isValid:v4e,message:'"header" must be an object'},encoding:{isValid:e_,message:'"encoding" must be a string'},issuer:{isValid:e_,message:'"issuer" must be a string'},subject:{isValid:e_,message:'"subject" must be a string'},jwtid:{isValid:e_,message:'"jwtid" must be a string'},noTimestamp:{isValid:K3,message:'"noTimestamp" must be a boolean'},keyid:{isValid:e_,message:'"keyid" must be a string'},mutatePayload:{isValid:K3,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:K3,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:K3,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},m5t={iat:{isValid:Zhe,message:'"iat" should be a number of seconds'},exp:{isValid:Zhe,message:'"exp" should be a number of seconds'},nbf:{isValid:Zhe,message:'"nbf" should be a number of seconds'}};function _4e(r,e,t,n){if(!v4e(t))throw new Error('Expected "'+n+'" to be a plain object.');Object.keys(t).forEach(function(i){let s=r[i];if(!s){if(!e)throw new Error('"'+i+'" is not allowed in "'+n+'"');return}if(!s.isValid(t[i]))throw new Error(s.message)})}function h5t(r){return _4e(p5t,!1,r,"options")}function f5t(r){return _4e(m5t,!0,r,"payload")}var y4e={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},g5t=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];S4e.exports=function(r,e,t,n){typeof t=="function"?(n=t,t={}):t=t||{};let i=typeof r=="object"&&!Buffer.isBuffer(r),s=Object.assign({alg:t.algorithm||"HS256",typ:i?"JWT":void 0,kid:t.keyid},t.header);function o(l){if(n)return n(l);throw l}if(!e&&t.algorithm!=="none")return o(new Error("secretOrPrivateKey must have a value"));if(e!=null&&!(e instanceof l5t))try{e=d5t(e)}catch{try{e=u5t(typeof e=="string"?Buffer.from(e):e)}catch{return o(new Error("secretOrPrivateKey is not valid key material"))}}if(s.alg.startsWith("HS")&&e.type!=="secret")return o(new Error(`secretOrPrivateKey must be a symmetric key when using ${s.alg}`));if(/^(?:RS|PS|ES)/.test(s.alg)){if(e.type!=="private")return o(new Error(`secretOrPrivateKey must be an asymmetric key when using ${s.alg}`));if(!t.allowInsecureKeySizes&&!s.alg.startsWith("ES")&&e.asymmetricKeyDetails!==void 0&&e.asymmetricKeyDetails.modulusLength<2048)return o(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${s.alg}`))}if(typeof r>"u")return o(new Error("payload is required"));if(i){try{f5t(r)}catch(l){return o(l)}t.mutatePayload||(r=Object.assign({},r))}else{let l=g5t.filter(function(u){return typeof t[u]<"u"});if(l.length>0)return o(new Error("invalid "+l.join(",")+" option for "+typeof r+" payload"))}if(typeof r.exp<"u"&&typeof t.expiresIn<"u")return o(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof r.nbf<"u"&&typeof t.notBefore<"u")return o(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{h5t(t)}catch(l){return o(l)}if(!t.allowInvalidAsymmetricKeyTypes)try{o5t(s.alg,e)}catch(l){return o(l)}let a=r.iat||Math.floor(Date.now()/1e3);if(t.noTimestamp?delete r.iat:i&&(r.iat=a),typeof t.notBefore<"u"){try{r.nbf=h4e(t.notBefore,a)}catch(l){return o(l)}if(typeof r.nbf>"u")return o(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof t.expiresIn<"u"&&typeof r=="object"){try{r.exp=h4e(t.expiresIn,a)}catch(l){return o(l)}if(typeof r.exp>"u")return o(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(y4e).forEach(function(l){let u=y4e[l];if(typeof t[l]<"u"){if(typeof r[u]<"u")return o(new Error('Bad "options.'+l+'" option. The payload already has an "'+u+'" property.'));r[u]=t[l]}});let c=t.encoding||"utf8";if(typeof n=="function")n=n&&c5t(n),f4e.createSign({header:s,privateKey:e,payload:r,encoding:c}).once("error",n).once("done",function(l){if(!t.allowInsecureKeySizes&&/^(?:RS|PS)/.test(s.alg)&&l.length<256)return n(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${s.alg}`));n(null,l)});else{let l=f4e.sign({header:s,payload:r,secret:e,encoding:c});if(!t.allowInsecureKeySizes&&/^(?:RS|PS)/.test(s.alg)&&l.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${s.alg}`);return l}}});var tfe=O((FUr,efe)=>{efe.exports={verify:p4e(),sign:C4e(),JsonWebTokenError:oq(),NotBeforeError:vhe(),TokenExpiredError:bhe()};Object.defineProperty(efe.exports,"decode",{enumerable:!1,value:xhe()})});var A4e=O((z2r,n4)=>{n4.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&n4.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&n4.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var L4e=O((F2r,VI)=>{var ao=global.process,kP=function(r){return r&&typeof r=="object"&&typeof r.removeListener=="function"&&typeof r.emit=="function"&&typeof r.reallyExit=="function"&&typeof r.listeners=="function"&&typeof r.kill=="function"&&typeof r.pid=="number"&&typeof r.on=="function"};kP(ao)?(N4e=require("assert"),GI=A4e(),D4e=/^win/i.test(ao.platform),Eq=require("events"),typeof Eq!="function"&&(Eq=Eq.EventEmitter),ao.__signal_exit_emitter__?lc=ao.__signal_exit_emitter__:(lc=ao.__signal_exit_emitter__=new Eq,lc.count=0,lc.emitted={}),lc.infinite||(lc.setMaxListeners(1/0),lc.infinite=!0),VI.exports=function(r,e){if(!kP(global.process))return function(){};N4e.equal(typeof r,"function","a callback must be provided for exit handler"),$I===!1&&afe();var t="exit";e&&e.alwaysLast&&(t="afterexit");var n=function(){lc.removeListener(t,r),lc.listeners("exit").length===0&&lc.listeners("afterexit").length===0&&i4()};return lc.on(t,r),n},i4=function(){!$I||!kP(global.process)||($I=!1,GI.forEach(function(e){try{ao.removeListener(e,s4[e])}catch{}}),ao.emit=o4,ao.reallyExit=cfe,lc.count-=1)},VI.exports.unload=i4,LP=function(e,t,n){lc.emitted[e]||(lc.emitted[e]=!0,lc.emit(e,t,n))},s4={},GI.forEach(function(r){s4[r]=function(){if(kP(global.process)){var t=ao.listeners(r);t.length===lc.count&&(i4(),LP("exit",null,r),LP("afterexit",null,r),D4e&&r==="SIGHUP"&&(r="SIGINT"),ao.kill(ao.pid,r))}}}),VI.exports.signals=function(){return GI},$I=!1,afe=function(){$I||!kP(global.process)||($I=!0,lc.count+=1,GI=GI.filter(function(e){try{return ao.on(e,s4[e]),!0}catch{return!1}}),ao.emit=k4e,ao.reallyExit=M4e)},VI.exports.load=afe,cfe=ao.reallyExit,M4e=function(e){kP(global.process)&&(ao.exitCode=e||0,LP("exit",ao.exitCode,null),LP("afterexit",ao.exitCode,null),cfe.call(ao,ao.exitCode))},o4=ao.emit,k4e=function(e,t){if(e==="exit"&&kP(global.process)){t!==void 0&&(ao.exitCode=t);var n=o4.apply(this,arguments);return LP("exit",ao.exitCode,null),LP("afterexit",ao.exitCode,null),n}else return o4.apply(this,arguments)}):VI.exports=function(){return function(){}};var N4e,GI,D4e,Eq,lc,i4,LP,s4,$I,afe,cfe,M4e,o4,k4e});var U4e=O(To=>{var Ma=require("fs"),lfe="wx";process.version.match(/^v0\.[0-6]/)&&(Tq=require("constants"),lfe=Tq.O_TRUNC|Tq.O_CREAT|Tq.O_WRONLY|Tq.O_EXCL);var Tq,b5t=require("os");To.filetime="ctime";b5t.platform()=="win32"&&(To.filetime="mtime");var ji,a4=require("util");a4.debuglog?ji=a4.debuglog("LOCKFILE"):/\blockfile\b/i.test(process.env.NODE_DEBUG)?ji=function(){var r=a4.format.apply(a4,arguments);console.error("LOCKFILE %d %s",process.pid,r)}:ji=function(){};var HI={},_5t=L4e();_5t(function(){ji("exit listener"),Object.keys(HI).forEach(To.unlockSync)});/^v0\.[0-8]\./.test(process.version)&&(ji("uncaughtException, version = %s",process.version),process.on("uncaughtException",function r(e){ji("uncaughtException");var t=process.listeners("uncaughtException").filter(function(n){return n!==r});if(!t.length){try{Object.keys(HI).forEach(To.unlockSync)}catch{}throw process.removeListener("uncaughtException",r),e}}));To.unlock=function(r,e){ji("unlock",r),delete HI[r],Ma.unlink(r,function(t){e&&e()})};To.unlockSync=function(r){ji("unlockSync",r);try{Ma.unlinkSync(r)}catch{}delete HI[r]};To.check=function(r,e,t){typeof e=="function"&&(t=e,e={}),ji("check",r,e),Ma.open(r,"r",function(n,i){if(n)return n.code!=="ENOENT"?t(n):t(null,!1);if(!e.stale)return Ma.close(i,function(s){return t(s,!0)});Ma.fstat(i,function(s,o){if(s)return Ma.close(i,function(a){return t(s)});Ma.close(i,function(a){var c=Date.now()-o[To.filetime].getTime();return t(a,c<=e.stale)})})})};To.checkSync=function(r,e){if(e=e||{},ji("checkSync",r,e),e.wait)throw new Error("opts.wait not supported sync for obvious reasons");try{var t=Ma.openSync(r,"r")}catch(s){if(s.code!=="ENOENT")throw s;return!1}if(!e.stale){try{Ma.closeSync(t)}catch{}return!0}if(e.stale){try{var n=Ma.fstatSync(t)}finally{Ma.closeSync(t)}var i=Date.now()-n[To.filetime].getTime();return i<=e.stale}};var z4e=1;To.lock=function(r,e,t){if(typeof e=="function"&&(t=e,e={}),e.req=e.req||z4e++,ji("lock",r,e),e.start=e.start||Date.now(),typeof e.retries=="number"&&e.retries>0){ji("has retries",e.retries);var n=e.retries;e.retries=0,t=function(i){return function s(o,a){if(ji("retry-mutated callback"),n-=1,!o||n<0)return i(o,a);ji("lock retry",r,e),e.retryWait?setTimeout(c,e.retryWait):c();function c(){e.start=Date.now(),ji("retrying",e.start),To.lock(r,e,s)}}}(t)}Ma.open(r,lfe,function(i,s){return i?(ji("failed to acquire lock",i),i.code!=="EEXIST"?(ji("not EEXIST error",i),t(i)):e.stale?F4e(i,r,e,!1,t):j4e(i,r,e,t)):(ji("locked",r,s),HI[r]=s,Ma.close(s,function(){return t()}))}),ji("lock return")};function F4e(r,e,t,n,i){Ma.stat(e,function(s,o){if(s){if(s.code==="ENOENT"){t.stale=!1,ji("lock stale enoent retry",e,t),To.lock(e,t,i);return}return i(s)}var a=Date.now()-o[To.filetime].getTime();if(a<=t.stale)return j4e(r,e,t,i);ji("lock stale",e,t),n?To.unlock(e,function(c){if(c)return i(c);ji("lock stale retry",e,t),Ma.link(e+".STALE",e,function(l){Ma.unlink(e+".STALE",function(){i(l)})})}):(ji("acquire .STALE file lock",t),To.lock(e+".STALE",t,function(c){if(c)return i(c);F4e(r,e,t,!0,i)}))})}function j4e(r,e,t,n){if(ji("notStale",e,t),typeof t.wait!="number"||t.wait<=0)return ji("notStale, wait is not a number"),n(r);var i=Date.now(),s=t.start||i,o=s+t.wait;if(o<=i)return n(r);ji("now=%d, wait until %d (delta=%d)",s,o,o-s);var a=Math.min(o-s,t.pollPeriod||100),c=setTimeout(l,a);function l(){ji("notStale, polling",e,t),To.lock(e,t,n)}}To.lockSync=function(r,e){if(e=e||{},e.req=e.req||z4e++,ji("lockSync",r,e),e.wait||e.retryWait)throw new Error("opts.wait not supported sync for obvious reasons");try{var t=Ma.openSync(r,lfe);HI[r]=t;try{Ma.closeSync(t)}catch{}ji("locked sync!",r,t);return}catch(o){if(o.code!=="EEXIST")return q4e(r,e,o);if(e.stale){var n=Ma.statSync(r),i=n[To.filetime].getTime();!(i%1e3)&&e.stale%1e3&&(e.stale=1e3*Math.ceil(e.stale/1e3));var s=Date.now()-i;if(s>e.stale)return ji("lockSync stale",r,e,s),To.unlockSync(r),To.lockSync(r,e)}return ji("failed to lock",r,e,o),q4e(r,e,o)}};function q4e(r,e,t){if(typeof e.retries=="number"&&e.retries>0){var n=e.retries-1;return ji("retryThrow",r,e,n),e.retries=n,To.lockSync(r,e)}throw t}});var H4e=O(V4e=>{"use strict";Object.defineProperty(V4e,"__esModule",{value:!0})});var K4e=O((y4,W4e)=>{(function(r,e){typeof y4=="object"&&typeof W4e<"u"?e(y4):typeof define=="function"&&define.amd?define(["exports"],e):e(r.Azure={})})(y4,function(r){"use strict";var e=function(){function t(n){if(this.validateAuthority=!0,!n||typeof n!="object")throw new Error("'parameters' is a required parameter and must be of type 'object'.");var i=["name","portalUrl","managementEndpointUrl","resourceManagerEndpointUrl","activeDirectoryEndpointUrl","activeDirectoryResourceId"];i.forEach(function(s){if(!n[s]||typeof n[s].valueOf()!="string")throw new Error('Please provide "'+s+'" for the environment and it must be of type "string".')}),this.name=n.name,this.portalUrl=n.portalUrl,this.managementEndpointUrl=n.managementEndpointUrl,this.resourceManagerEndpointUrl=n.resourceManagerEndpointUrl,this.activeDirectoryEndpointUrl=n.activeDirectoryEndpointUrl,this.activeDirectoryResourceId=n.activeDirectoryResourceId,this.activeDirectoryGraphApiVersion&&(this.activeDirectoryGraphApiVersion=n.activeDirectoryGraphApiVersion),this.activeDirectoryGraphResourceId&&(this.activeDirectoryGraphResourceId=n.activeDirectoryGraphResourceId),this.azureDataLakeAnalyticsCatalogAndJobEndpointSuffix&&(this.azureDataLakeAnalyticsCatalogAndJobEndpointSuffix=n.azureDataLakeAnalyticsCatalogAndJobEndpointSuffix),this.azureDataLakeStoreFileSystemEndpointSuffix&&(this.azureDataLakeStoreFileSystemEndpointSuffix=n.azureDataLakeStoreFileSystemEndpointSuffix),this.batchResourceId&&(this.batchResourceId=n.batchResourceId),this.galleryEndpointUrl&&(this.galleryEndpointUrl=n.galleryEndpointUrl),this.keyVaultDnsSuffix&&(this.keyVaultDnsSuffix=n.keyVaultDnsSuffix),this.publishingProfileUrl&&(this.publishingProfileUrl=n.publishingProfileUrl),this.sqlManagementEndpointUrl&&(this.sqlManagementEndpointUrl=n.sqlManagementEndpointUrl),this.sqlServerHostnameSuffix&&(this.sqlServerHostnameSuffix=n.sqlServerHostnameSuffix),this.storageEndpointSuffix&&(this.storageEndpointSuffix=n.storageEndpointSuffix)}return t.add=function(n){var i={},s=new t(n);i[n.name]=s,Object.assign(t,i)},t.get=function(n){if(!n)throw new TypeError("name cannot be null or undefined and must be of type string.");return t[n]},t.AzureCloud={name:"AzureCloud",portalUrl:"https://portal.azure.com",publishingProfileUrl:"https://go.microsoft.com/fwlink/?LinkId=254432",managementEndpointUrl:"https://management.core.windows.net",resourceManagerEndpointUrl:"https://management.azure.com/",sqlManagementEndpointUrl:"https://management.core.windows.net:8443/",sqlServerHostnameSuffix:".database.windows.net",galleryEndpointUrl:"https://gallery.azure.com/",activeDirectoryEndpointUrl:"https://login.microsoftonline.com/",activeDirectoryResourceId:"https://management.core.windows.net/",activeDirectoryGraphResourceId:"https://graph.windows.net/",batchResourceId:"https://batch.core.windows.net/",activeDirectoryGraphApiVersion:"2013-04-05",storageEndpointSuffix:"core.windows.net",keyVaultDnsSuffix:".vault.azure.net",azureDataLakeStoreFileSystemEndpointSuffix:"azuredatalakestore.net",azureDataLakeAnalyticsCatalogAndJobEndpointSuffix:"azuredatalakeanalytics.net",validateAuthority:!0},t.ChinaCloud={name:"AzureChinaCloud",portalUrl:"https://portal.azure.cn",publishingProfileUrl:"https://go.microsoft.com/fwlink/?LinkID=301774",managementEndpointUrl:"https://management.core.chinacloudapi.cn",resourceManagerEndpointUrl:"https://management.chinacloudapi.cn",sqlManagementEndpointUrl:"https://management.core.chinacloudapi.cn:8443/",sqlServerHostnameSuffix:".database.chinacloudapi.cn",galleryEndpointUrl:"https://gallery.chinacloudapi.cn/",activeDirectoryEndpointUrl:"https://login.chinacloudapi.cn/",activeDirectoryResourceId:"https://management.core.chinacloudapi.cn/",activeDirectoryGraphResourceId:"https://graph.chinacloudapi.cn/",activeDirectoryGraphApiVersion:"2013-04-05",batchResourceId:"https://batch.chinacloudapi.cn/",storageEndpointSuffix:"core.chinacloudapi.cn",keyVaultDnsSuffix:".vault.azure.cn",azureDataLakeStoreFileSystemEndpointSuffix:"N/A",azureDataLakeAnalyticsCatalogAndJobEndpointSuffix:"N/A",validateAuthority:!0},t.USGovernment={name:"AzureUSGovernment",portalUrl:"https://portal.azure.us",publishingProfileUrl:"https://manage.windowsazure.us/publishsettings/index",managementEndpointUrl:"https://management.core.usgovcloudapi.net",resourceManagerEndpointUrl:"https://management.usgovcloudapi.net",sqlManagementEndpointUrl:"https://management.core.usgovcloudapi.net:8443/",sqlServerHostnameSuffix:".database.usgovcloudapi.net",galleryEndpointUrl:"https://gallery.usgovcloudapi.net/",activeDirectoryEndpointUrl:"https://login.microsoftonline.us/",activeDirectoryResourceId:"https://management.core.usgovcloudapi.net/",activeDirectoryGraphResourceId:"https://graph.windows.net/",batchResourceId:"https://batch.core.usgovcloudapi.net/",activeDirectoryGraphApiVersion:"2013-04-05",storageEndpointSuffix:"core.usgovcloudapi.net",keyVaultDnsSuffix:".vault.usgovcloudapi.net",azureDataLakeStoreFileSystemEndpointSuffix:"N/A",azureDataLakeAnalyticsCatalogAndJobEndpointSuffix:"N/A",validateAuthority:!0},t.GermanCloud={name:"AzureGermanCloud",portalUrl:"https://portal.microsoftazure.de/",publishingProfileUrl:"https://manage.microsoftazure.de/publishsettings/index",managementEndpointUrl:"https://management.core.cloudapi.de",resourceManagerEndpointUrl:"https://management.microsoftazure.de",sqlManagementEndpointUrl:"https://management.core.cloudapi.de:8443/",sqlServerHostnameSuffix:".database.cloudapi.de",galleryEndpointUrl:"https://gallery.cloudapi.de/",activeDirectoryEndpointUrl:"https://login.microsoftonline.de/",activeDirectoryResourceId:"https://management.core.cloudapi.de/",activeDirectoryGraphResourceId:"https://graph.cloudapi.de/",batchResourceId:"https://batch.microsoftazure.de/",activeDirectoryGraphApiVersion:"2013-04-05",storageEndpointSuffix:"core.cloudapi.de",keyVaultDnsSuffix:".vault.microsoftazure.de",azureDataLakeStoreFileSystemEndpointSuffix:"N/A",azureDataLakeAnalyticsCatalogAndJobEndpointSuffix:"N/A",validateAuthority:!0},t}();r.Environment=e,Object.defineProperty(r,"__esModule",{value:!0})})});var Aq=O(vf=>{"use strict";var C5t=vf&&vf.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})};Object.defineProperty(vf,"__esModule",{value:!0});vf.getConfiguredAuthProviderId=vf.setConfiguredAzureEnv=vf.getConfiguredAzureEnv=void 0;var KI=K4e(),v4=require("vscode"),Pfe="microsoft-sovereign-cloud",Oq="environment",wfe="customEnvironment",QI;(function(r){r.ChinaCloud="ChinaCloud",r.USGovernment="USGovernment",r.Custom="custom"})(QI||(QI={}));function Q4e(){let r=v4.workspace.getConfiguration(Pfe),e=r.get(Oq);if(e===QI.ChinaCloud)return Object.assign(Object.assign({},KI.Environment.ChinaCloud),{isCustomCloud:!1});if(e===QI.USGovernment)return Object.assign(Object.assign({},KI.Environment.USGovernment),{isCustomCloud:!1});if(e===QI.Custom){let t=r.get(wfe);if(t)return Object.assign(Object.assign({},new KI.Environment(t)),{isCustomCloud:!0});throw new Error(v4.l10n.t("The custom cloud choice is not configured. Please configure the setting `{0}.{1}`.",Pfe,wfe))}return Object.assign(Object.assign({},KI.Environment.get(KI.Environment.AzureCloud.name)),{isCustomCloud:!1})}vf.getConfiguredAzureEnv=Q4e;function P5t(r,e=v4.ConfigurationTarget.Global){return C5t(this,void 0,void 0,function*(){let t=v4.workspace.getConfiguration(Pfe);if(typeof r>"u"||!r)yield t.update(Oq,void 0,e);else if(typeof r=="string"&&r==="AzureCloud")yield t.update(Oq,void 0,e);else if(typeof r=="string")yield t.update(Oq,r,e);else if(typeof r=="object")yield t.update(Oq,QI.Custom,e),yield t.update(wfe,r,e);else throw new Error(`Invalid cloud value: ${JSON.stringify(r)}`)})}vf.setConfiguredAzureEnv=P5t;function w5t(){return Q4e().name===KI.Environment.AzureCloud.name?"microsoft":"microsoft-sovereign-cloud"}vf.getConfiguredAuthProviderId=w5t});var X4e={};Ea(X4e,{__assign:()=>Tfe,__asyncDelegator:()=>q5t,__asyncGenerator:()=>L5t,__asyncValues:()=>z5t,__await:()=>Nq,__awaiter:()=>O5t,__classPrivateFieldGet:()=>G5t,__classPrivateFieldSet:()=>$5t,__createBinding:()=>Rfe,__decorate:()=>I5t,__exportStar:()=>N5t,__extends:()=>E5t,__generator:()=>A5t,__importDefault:()=>B5t,__importStar:()=>U5t,__makeTemplateObject:()=>F5t,__metadata:()=>x5t,__param:()=>R5t,__read:()=>Y4e,__rest:()=>T5t,__spread:()=>D5t,__spreadArray:()=>k5t,__spreadArrays:()=>M5t,__values:()=>Ife});function E5t(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Efe(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function T5t(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function I5t(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}function R5t(r,e){return function(t,n){e(t,n,r)}}function x5t(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function O5t(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})}function A5t(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){t.label=l[1];break}if(l[0]===6&&t.label<s[1]){t.label=s[1],s=l;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(l);break}s[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(u){l=[6,u],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function N5t(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Rfe(e,r,t)}function Ife(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Y4e(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s}function D5t(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(Y4e(arguments[e]));return r}function M5t(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function k5t(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||e)}function Nq(r){return this instanceof Nq?(this.v=r,this):new Nq(r)}function L5t(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(p){n[p]&&(i[p]=function(m){return new Promise(function(f,y){s.push([p,m,f,y])>1||a(p,m)})})}function a(p,m){try{c(n[p](m))}catch(f){d(s[0][3],f)}}function c(p){p.value instanceof Nq?Promise.resolve(p.value.v).then(l,u):d(s[0][2],p)}function l(p){a("next",p)}function u(p){a("throw",p)}function d(p,m){p(m),s.shift(),s.length&&a(s[0][0],s[0][1])}}function q5t(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=r[i]?function(o){return(t=!t)?{value:Nq(r[i](o)),done:i==="return"}:s?s(o):o}:s}}function z5t(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof Ife=="function"?Ife(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=r[s]&&function(o){return new Promise(function(a,c){o=r[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function F5t(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function U5t(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Rfe(e,r,t);return j5t(e,r),e}function B5t(r){return r&&r.__esModule?r:{default:r}}function G5t(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)}function $5t(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t}var Efe,Tfe,Rfe,j5t,J4e=si(()=>{Efe=function(r,e){return Efe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},Efe(r,e)};Tfe=function(){return Tfe=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Tfe.apply(this,arguments)};Rfe=Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]};j5t=Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}});var Dq={};Ea(Dq,{__addDisposableResource:()=>b6e,__assign:()=>b4,__asyncDelegator:()=>d6e,__asyncGenerator:()=>u6e,__asyncValues:()=>p6e,__await:()=>YI,__awaiter:()=>i6e,__classPrivateFieldGet:()=>g6e,__classPrivateFieldIn:()=>v6e,__classPrivateFieldSet:()=>y6e,__createBinding:()=>S4,__decorate:()=>t6e,__disposeResources:()=>_6e,__esDecorate:()=>V5t,__exportStar:()=>o6e,__extends:()=>Z4e,__generator:()=>s6e,__importDefault:()=>f6e,__importStar:()=>h6e,__makeTemplateObject:()=>m6e,__metadata:()=>n6e,__param:()=>r6e,__propKey:()=>W5t,__read:()=>Ofe,__rest:()=>e6e,__runInitializers:()=>H5t,__setFunctionName:()=>K5t,__spread:()=>a6e,__spreadArray:()=>l6e,__spreadArrays:()=>c6e,__values:()=>_4,default:()=>X5t});function Z4e(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");xfe(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function e6e(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function t6e(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}function r6e(r,e){return function(t,n){e(t,n,r)}}function V5t(r,e,t,n,i,s){function o(_){if(_!==void 0&&typeof _!="function")throw new TypeError("Function expected");return _}for(var a=n.kind,c=a==="getter"?"get":a==="setter"?"set":"value",l=!e&&r?n.static?r:r.prototype:null,u=e||(l?Object.getOwnPropertyDescriptor(l,n.name):{}),d,p=!1,m=t.length-1;m>=0;m--){var f={};for(var y in n)f[y]=y==="access"?{}:n[y];for(var y in n.access)f.access[y]=n.access[y];f.addInitializer=function(_){if(p)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(_||null))};var v=(0,t[m])(a==="accessor"?{get:u.get,set:u.set}:u[c],f);if(a==="accessor"){if(v===void 0)continue;if(v===null||typeof v!="object")throw new TypeError("Object expected");(d=o(v.get))&&(u.get=d),(d=o(v.set))&&(u.set=d),(d=o(v.init))&&i.unshift(d)}else(d=o(v))&&(a==="field"?i.unshift(d):u[c]=d)}l&&Object.defineProperty(l,n.name,u),p=!0}function H5t(r,e,t){for(var n=arguments.length>2,i=0;i<e.length;i++)t=n?e[i].call(r,t):e[i].call(r);return n?t:void 0}function W5t(r){return typeof r=="symbol"?r:"".concat(r)}function K5t(r,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(r,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function n6e(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function i6e(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})}function s6e(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(t=0)),t;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){t.label=l[1];break}if(l[0]===6&&t.label<s[1]){t.label=s[1],s=l;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(l);break}s[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(u){l=[6,u],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function o6e(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&S4(e,r,t)}function _4(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ofe(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s}function a6e(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(Ofe(arguments[e]));return r}function c6e(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function l6e(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))}function YI(r){return this instanceof YI?(this.v=r,this):new YI(r)}function u6e(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(m){return function(f){return Promise.resolve(f).then(m,d)}}function a(m,f){n[m]&&(i[m]=function(y){return new Promise(function(v,_){s.push([m,y,v,_])>1||c(m,y)})},f&&(i[m]=f(i[m])))}function c(m,f){try{l(n[m](f))}catch(y){p(s[0][3],y)}}function l(m){m.value instanceof YI?Promise.resolve(m.value.v).then(u,d):p(s[0][2],m)}function u(m){c("next",m)}function d(m){c("throw",m)}function p(m,f){m(f),s.shift(),s.length&&c(s[0][0],s[0][1])}}function d6e(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=r[i]?function(o){return(t=!t)?{value:YI(r[i](o)),done:!1}:s?s(o):o}:s}}function p6e(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof _4=="function"?_4(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=r[s]&&function(o){return new Promise(function(a,c){o=r[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function m6e(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function h6e(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&S4(e,r,t);return Q5t(e,r),e}function f6e(r){return r&&r.__esModule?r:{default:r}}function g6e(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)}function y6e(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t}function v6e(r,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof r=="function"?e===r:r.has(e)}function b6e(r,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],t&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),r.stack.push({value:e,dispose:n,async:t})}else t&&r.stack.push({async:!0});return e}function _6e(r){function e(n){r.error=r.hasError?new Y5t(n,r.error,"An error was suppressed during disposal."):n,r.hasError=!0}function t(){for(;r.stack.length;){var n=r.stack.pop();try{var i=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(i).then(t,function(s){return e(s),t()})}catch(s){e(s)}}if(r.hasError)throw r.error}return t()}var xfe,b4,S4,Q5t,Y5t,X5t,Mq=si(()=>{xfe=function(r,e){return xfe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},xfe(r,e)};b4=function(){return b4=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},b4.apply(this,arguments)};S4=Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]};Q5t=Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e};Y5t=typeof SuppressedError=="function"?SuppressedError:function(r,e,t){var n=new Error(t);return n.name="SuppressedError",n.error=r,n.suppressed=e,n};X5t={__extends:Z4e,__assign:b4,__rest:e6e,__decorate:t6e,__param:r6e,__metadata:n6e,__awaiter:i6e,__generator:s6e,__createBinding:S4,__exportStar:o6e,__values:_4,__read:Ofe,__spread:a6e,__spreadArrays:c6e,__spreadArray:l6e,__await:YI,__asyncGenerator:u6e,__asyncDelegator:d6e,__asyncValues:p6e,__makeTemplateObject:m6e,__importStar:h6e,__importDefault:f6e,__classPrivateFieldGet:g6e,__classPrivateFieldSet:y6e,__classPrivateFieldIn:v6e,__addDisposableResource:b6e,__disposeResources:_6e}});var Afe=O(bf=>{"use strict";Object.defineProperty(bf,"__esModule",{value:!0});bf.decodeStringToString=bf.decodeString=bf.encodeByteArray=bf.encodeString=void 0;function J5t(r){return Buffer.from(r).toString("base64")}bf.encodeString=J5t;function Z5t(r){return(r instanceof Buffer?r:Buffer.from(r.buffer)).toString("base64")}bf.encodeByteArray=Z5t;function e8t(r){return Buffer.from(r,"base64")}bf.decodeString=e8t;function t8t(r){return Buffer.from(r,"base64").toString()}bf.decodeStringToString=t8t});var kq=O(XI=>{"use strict";Object.defineProperty(XI,"__esModule",{value:!0});XI.XML_CHARKEY=XI.XML_ATTRKEY=void 0;XI.XML_ATTRKEY="$";XI.XML_CHARKEY="_"});var Nfe=O(_f=>{"use strict";Object.defineProperty(_f,"__esModule",{value:!0});_f.flattenResponse=_f.isValidUuid=_f.isDuration=_f.isPrimitiveBody=void 0;function S6e(r,e){return e!=="Composite"&&e!=="Dictionary"&&(typeof r=="string"||typeof r=="number"||typeof r=="boolean"||e?.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i)!==null||r===void 0||r===null)}_f.isPrimitiveBody=S6e;var r8t=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function n8t(r){return r8t.test(r)}_f.isDuration=n8t;var i8t=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i;function s8t(r){return i8t.test(r)}_f.isValidUuid=s8t;function o8t(r){let e=Object.assign(Object.assign({},r.headers),r.body);return r.hasNullableType&&Object.getOwnPropertyNames(e).length===0?r.shouldWrapBody?{body:null}:null:r.shouldWrapBody?Object.assign(Object.assign({},r.headers),{body:r.body}):e}function a8t(r,e){var t,n;let i=r.parsedHeaders;if(r.request.method==="HEAD")return Object.assign(Object.assign({},i),{body:r.parsedBody});let s=e&&e.bodyMapper,o=!!s?.nullable,a=s?.type.name;if(a==="Stream")return Object.assign(Object.assign({},i),{blobBody:r.blobBody,readableStreamBody:r.readableStreamBody});let c=a==="Composite"&&s.type.modelProperties||{},l=Object.keys(c).some(u=>c[u].serializedName==="");if(a==="Sequence"||l){let u=(t=r.parsedBody)!==null&&t!==void 0?t:[];for(let d of Object.keys(c))c[d].serializedName&&(u[d]=(n=r.parsedBody)===null||n===void 0?void 0:n[d]);if(i)for(let d of Object.keys(i))u[d]=i[d];return o&&!r.parsedBody&&!i&&Object.getOwnPropertyNames(c).length===0?null:u}return o8t({body:r.parsedBody,headers:i,hasNullableType:o,shouldWrapBody:S6e(r.parsedBody,a)})}_f.flattenResponse=a8t});var Lq=O(JI=>{"use strict";Object.defineProperty(JI,"__esModule",{value:!0});JI.MapperTypeNames=JI.createSerializer=void 0;var c8t=(Mq(),da(Dq)),P4=c8t.__importStar(Afe()),uc=kq(),P6e=Nfe(),Dfe=class{constructor(e={},t=!1){this.modelMappers=e,this.isXML=t}validateConstraints(e,t,n){let i=(s,o)=>{throw new Error(`"${n}" with value "${t}" should satisfy the constraint "${s}": ${o}.`)};if(e.constraints&&t!==void 0&&t!==null){let{ExclusiveMaximum:s,ExclusiveMinimum:o,InclusiveMaximum:a,InclusiveMinimum:c,MaxItems:l,MaxLength:u,MinItems:d,MinLength:p,MultipleOf:m,Pattern:f,UniqueItems:y}=e.constraints;if(s!==void 0&&t>=s&&i("ExclusiveMaximum",s),o!==void 0&&t<=o&&i("ExclusiveMinimum",o),a!==void 0&&t>a&&i("InclusiveMaximum",a),c!==void 0&&t<c&&i("InclusiveMinimum",c),l!==void 0&&t.length>l&&i("MaxItems",l),u!==void 0&&t.length>u&&i("MaxLength",u),d!==void 0&&t.length<d&&i("MinItems",d),p!==void 0&&t.length<p&&i("MinLength",p),m!==void 0&&t%m!==0&&i("MultipleOf",m),f){let v=typeof f=="string"?new RegExp(f):f;(typeof t!="string"||t.match(v)===null)&&i("Pattern",f)}y&&t.some((v,_,C)=>C.indexOf(v)!==_)&&i("UniqueItems",y)}}serialize(e,t,n,i={xml:{}}){var s,o,a;let c={xml:{rootName:(s=i.xml.rootName)!==null&&s!==void 0?s:"",includeRoot:(o=i.xml.includeRoot)!==null&&o!==void 0?o:!1,xmlCharKey:(a=i.xml.xmlCharKey)!==null&&a!==void 0?a:uc.XML_CHARKEY}},l={},u=e.type.name;n||(n=e.serializedName),u.match(/^Sequence$/i)!==null&&(l=[]),e.isConstant&&(t=e.defaultValue);let{required:d,nullable:p}=e;if(d&&p&&t===void 0)throw new Error(`${n} cannot be undefined.`);if(d&&!p&&t==null)throw new Error(`${n} cannot be null or undefined.`);if(!d&&p===!1&&t===null)throw new Error(`${n} cannot be null.`);return t==null||u.match(/^any$/i)!==null?l=t:u.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/i)!==null?l=f8t(u,n,t):u.match(/^Enum$/i)!==null?l=g8t(n,e.type.allowedValues,t):u.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/i)!==null?l=b8t(u,t,n):u.match(/^ByteArray$/i)!==null?l=y8t(n,t):u.match(/^Base64Url$/i)!==null?l=v8t(n,t):u.match(/^Sequence$/i)!==null?l=_8t(this,e,t,n,!!this.isXML,c):u.match(/^Dictionary$/i)!==null?l=S8t(this,e,t,n,!!this.isXML,c):u.match(/^Composite$/i)!==null&&(l=P8t(this,e,t,n,!!this.isXML,c)),l}deserialize(e,t,n,i={xml:{}}){var s,o,a,c;let l={xml:{rootName:(s=i.xml.rootName)!==null&&s!==void 0?s:"",includeRoot:(o=i.xml.includeRoot)!==null&&o!==void 0?o:!1,xmlCharKey:(a=i.xml.xmlCharKey)!==null&&a!==void 0?a:uc.XML_CHARKEY},ignoreUnknownProperties:(c=i.ignoreUnknownProperties)!==null&&c!==void 0?c:!1};if(t==null)return this.isXML&&e.type.name==="Sequence"&&!e.xmlIsWrapped&&(t=[]),e.defaultValue!==void 0&&(t=e.defaultValue),t;let u,d=e.type.name;if(n||(n=e.serializedName),d.match(/^Composite$/i)!==null)u=E8t(this,e,t,n,l);else{if(this.isXML){let p=l.xml.xmlCharKey;t[uc.XML_ATTRKEY]!==void 0&&t[p]!==void 0&&(t=t[p])}d.match(/^Number$/i)!==null?(u=parseFloat(t),isNaN(u)&&(u=t)):d.match(/^Boolean$/i)!==null?t==="true"?u=!0:t==="false"?u=!1:u=t:d.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/i)!==null?u=t:d.match(/^(Date|DateTime|DateTimeRfc1123)$/i)!==null?u=new Date(t):d.match(/^UnixTime$/i)!==null?u=h8t(t):d.match(/^ByteArray$/i)!==null?u=P4.decodeString(t):d.match(/^Base64Url$/i)!==null?u=p8t(t):d.match(/^Sequence$/i)!==null?u=I8t(this,e,t,n,l):d.match(/^Dictionary$/i)!==null&&(u=T8t(this,e,t,n,l))}return e.isConstant&&(u=e.defaultValue),u}};function l8t(r={},e=!1){return new Dfe(r,e)}JI.createSerializer=l8t;function u8t(r,e){let t=r.length;for(;t-1>=0&&r[t-1]===e;)--t;return r.substr(0,t)}function d8t(r){if(!r)return;if(!(r instanceof Uint8Array))throw new Error("Please provide an input of type Uint8Array for converting to Base64Url.");let e=P4.encodeByteArray(r);return u8t(e,"=").replace(/\+/g,"-").replace(/\//g,"_")}function p8t(r){if(r){if(r&&typeof r.valueOf()!="string")throw new Error("Please provide an input of type string for converting to Uint8Array");return r=r.replace(/-/g,"+").replace(/_/g,"/"),P4.decodeString(r)}}function Mfe(r){let e=[],t="";if(r){let n=r.split(".");for(let i of n)i.charAt(i.length-1)==="\\"?t+=i.substr(0,i.length-1)+".":(t+=i,e.push(t),t="")}return e}function m8t(r){if(r)return typeof r.valueOf()=="string"&&(r=new Date(r)),Math.floor(r.getTime()/1e3)}function h8t(r){if(r)return new Date(r*1e3)}function f8t(r,e,t){if(t!=null){if(r.match(/^Number$/i)!==null){if(typeof t!="number")throw new Error(`${e} with value ${t} must be of type number.`)}else if(r.match(/^String$/i)!==null){if(typeof t.valueOf()!="string")throw new Error(`${e} with value "${t}" must be of type string.`)}else if(r.match(/^Uuid$/i)!==null){if(!(typeof t.valueOf()=="string"&&(0,P6e.isValidUuid)(t)))throw new Error(`${e} with value "${t}" must be of type string and a valid uuid.`)}else if(r.match(/^Boolean$/i)!==null){if(typeof t!="boolean")throw new Error(`${e} with value ${t} must be of type boolean.`)}else if(r.match(/^Stream$/i)!==null){let n=typeof t;if(n!=="string"&&typeof t.pipe!="function"&&typeof t.tee!="function"&&!(t instanceof ArrayBuffer)&&!ArrayBuffer.isView(t)&&!((typeof Blob=="function"||typeof Blob=="object")&&t instanceof Blob)&&n!=="function")throw new Error(`${e} must be a string, Blob, ArrayBuffer, ArrayBufferView, ReadableStream, or () => ReadableStream.`)}}return t}function g8t(r,e,t){if(!e)throw new Error(`Please provide a set of allowedValues to validate ${r} as an Enum Type.`);if(!e.some(i=>typeof i.valueOf()=="string"?i.toLowerCase()===t.toLowerCase():i===t))throw new Error(`${t} is not a valid value for ${r}. The valid values are: ${JSON.stringify(e)}.`);return t}function y8t(r,e){if(e!=null){if(!(e instanceof Uint8Array))throw new Error(`${r} must be of type Uint8Array.`);e=P4.encodeByteArray(e)}return e}function v8t(r,e){if(e!=null){if(!(e instanceof Uint8Array))throw new Error(`${r} must be of type Uint8Array.`);e=d8t(e)}return e}function b8t(r,e,t){if(e!=null){if(r.match(/^Date$/i)!==null){if(!(e instanceof Date||typeof e.valueOf()=="string"&&!isNaN(Date.parse(e))))throw new Error(`${t} must be an instanceof Date or a string in ISO8601 format.`);e=e instanceof Date?e.toISOString().substring(0,10):new Date(e).toISOString().substring(0,10)}else if(r.match(/^DateTime$/i)!==null){if(!(e instanceof Date||typeof e.valueOf()=="string"&&!isNaN(Date.parse(e))))throw new Error(`${t} must be an instanceof Date or a string in ISO8601 format.`);e=e instanceof Date?e.toISOString():new Date(e).toISOString()}else if(r.match(/^DateTimeRfc1123$/i)!==null){if(!(e instanceof Date||typeof e.valueOf()=="string"&&!isNaN(Date.parse(e))))throw new Error(`${t} must be an instanceof Date or a string in RFC-1123 format.`);e=e instanceof Date?e.toUTCString():new Date(e).toUTCString()}else if(r.match(/^UnixTime$/i)!==null){if(!(e instanceof Date||typeof e.valueOf()=="string"&&!isNaN(Date.parse(e))))throw new Error(`${t} must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.`);e=m8t(e)}else if(r.match(/^TimeSpan$/i)!==null&&!(0,P6e.isDuration)(e))throw new Error(`${t} must be a string in ISO 8601 format. Instead was "${e}".`)}return e}function _8t(r,e,t,n,i,s){var o;if(!Array.isArray(t))throw new Error(`${n} must be of type Array.`);let a=e.type.element;if(!a||typeof a!="object")throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${n}.`);a.type.name==="Composite"&&a.type.className&&(a=(o=r.modelMappers[a.type.className])!==null&&o!==void 0?o:a);let c=[];for(let l=0;l<t.length;l++){let u=r.serialize(a,t[l],n,s);if(i&&a.xmlNamespace){let d=a.xmlNamespacePrefix?`xmlns:${a.xmlNamespacePrefix}`:"xmlns";a.type.name==="Composite"?(c[l]=Object.assign({},u),c[l][uc.XML_ATTRKEY]={[d]:a.xmlNamespace}):(c[l]={},c[l][s.xml.xmlCharKey]=u,c[l][uc.XML_ATTRKEY]={[d]:a.xmlNamespace})}else c[l]=u}return c}function S8t(r,e,t,n,i,s){if(typeof t!="object")throw new Error(`${n} must be of type object.`);let o=e.type.value;if(!o||typeof o!="object")throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${n}.`);let a={};for(let c of Object.keys(t)){let l=r.serialize(o,t[c],n,s);a[c]=T6e(o,l,i,s)}if(i&&e.xmlNamespace){let c=e.xmlNamespacePrefix?`xmlns:${e.xmlNamespacePrefix}`:"xmlns",l=a;return l[uc.XML_ATTRKEY]={[c]:e.xmlNamespace},l}return a}function C8t(r,e,t){let n=e.type.additionalProperties;if(!n&&e.type.className){let i=w6e(r,e,t);return i?.type.additionalProperties}return n}function w6e(r,e,t){let n=e.type.className;if(!n)throw new Error(`Class name for model "${t}" is not provided in the mapper "${JSON.stringify(e,void 0,2)}".`);return r.modelMappers[n]}function E6e(r,e,t){let n=e.type.modelProperties;if(!n){let i=w6e(r,e,t);if(!i)throw new Error(`mapper() cannot be null or undefined for model "${e.type.className}".`);if(n=i?.type.modelProperties,!n)throw new Error(`modelProperties cannot be null or undefined in the mapper "${JSON.stringify(i)}" of type "${e.type.className}" for object "${t}".`)}return n}function P8t(r,e,t,n,i,s){if(C4(r,e)&&(e=I6e(r,e,t,"clientName")),t!=null){let o={},a=E6e(r,e,n);for(let l of Object.keys(a)){let u=a[l];if(u.readOnly)continue;let d,p=o;if(r.isXML)u.xmlIsWrapped?d=u.xmlName:d=u.xmlElementName||u.xmlName;else{let m=Mfe(u.serializedName);d=m.pop();for(let f of m){let y=p[f];y==null&&(t[l]!==void 0&&t[l]!==null||u.defaultValue!==void 0)&&(p[f]={}),p=p[f]}}if(p!=null){if(i&&e.xmlNamespace){let _=e.xmlNamespacePrefix?`xmlns:${e.xmlNamespacePrefix}`:"xmlns";p[uc.XML_ATTRKEY]=Object.assign(Object.assign({},p[uc.XML_ATTRKEY]),{[_]:e.xmlNamespace})}let m=u.serializedName!==""?n+"."+u.serializedName:n,f=t[l],y=C4(r,e);y&&y.clientName===l&&f==null&&(f=e.serializedName);let v=r.serialize(u,f,m,s);if(v!==void 0&&d!==void 0&&d!==null){let _=T6e(u,v,i,s);i&&u.xmlIsAttribute?(p[uc.XML_ATTRKEY]=p[uc.XML_ATTRKEY]||{},p[uc.XML_ATTRKEY][d]=v):i&&u.xmlIsWrapped?p[d]={[u.xmlElementName]:_}:p[d]=_}}}let c=C8t(r,e,n);if(c){let l=Object.keys(a);for(let u in t)l.every(p=>p!==u)&&(o[u]=r.serialize(c,t[u],n+'["'+u+'"]',s))}return o}return t}function T6e(r,e,t,n){if(!t||!r.xmlNamespace)return e;let s={[r.xmlNamespacePrefix?`xmlns:${r.xmlNamespacePrefix}`:"xmlns"]:r.xmlNamespace};if(["Composite"].includes(r.type.name)){if(e[uc.XML_ATTRKEY])return e;{let a=Object.assign({},e);return a[uc.XML_ATTRKEY]=s,a}}let o={};return o[n.xml.xmlCharKey]=e,o[uc.XML_ATTRKEY]=s,o}function w8t(r,e){return[uc.XML_ATTRKEY,e.xml.xmlCharKey].includes(r)}function E8t(r,e,t,n,i){var s,o;let a=(s=i.xml.xmlCharKey)!==null&&s!==void 0?s:uc.XML_CHARKEY;C4(r,e)&&(e=I6e(r,e,t,"serializedName"));let c=E6e(r,e,n),l={},u=[];for(let p of Object.keys(c)){let m=c[p],f=Mfe(c[p].serializedName);u.push(f[0]);let{serializedName:y,xmlName:v,xmlElementName:_}=m,C=n;y!==""&&y!==void 0&&(C=n+"."+y);let P=m.headerCollectionPrefix;if(P){let w={};for(let R of Object.keys(t))R.startsWith(P)&&(w[R.substring(P.length)]=r.deserialize(m.type.value,t[R],C,i)),u.push(R);l[p]=w}else if(r.isXML)if(m.xmlIsAttribute&&t[uc.XML_ATTRKEY])l[p]=r.deserialize(m,t[uc.XML_ATTRKEY][v],C,i);else if(m.xmlIsMsText)t[a]!==void 0?l[p]=t[a]:typeof t=="string"&&(l[p]=t);else{let w=_||v||y;if(m.xmlIsWrapped){let R=t[v],I=(o=R?.[_])!==null&&o!==void 0?o:[];l[p]=r.deserialize(m,I,C,i),u.push(v)}else{let R=t[w];l[p]=r.deserialize(m,R,C,i),u.push(w)}}else{let w,R=t,I=0;for(let L of f){if(!R)break;I++,R=R[L]}R===null&&I<f.length&&(R=void 0),w=R;let z=e.type.polymorphicDiscriminator;z&&p===z.clientName&&w==null&&(w=e.serializedName);let G;if(Array.isArray(t[p])&&c[p].serializedName===""){w=t[p];let L=r.deserialize(m,w,C,i);for(let[H,ee]of Object.entries(l))Object.prototype.hasOwnProperty.call(L,H)||(L[H]=ee);l=L}else(w!==void 0||m.defaultValue!==void 0)&&(G=r.deserialize(m,w,C,i),l[p]=G)}}let d=e.type.additionalProperties;if(d){let p=m=>{for(let f in c)if(Mfe(c[f].serializedName)[0]===m)return!1;return!0};for(let m in t)p(m)&&(l[m]=r.deserialize(d,t[m],n+'["'+m+'"]',i))}else if(t&&!i.ignoreUnknownProperties)for(let p of Object.keys(t))l[p]===void 0&&!u.includes(p)&&!w8t(p,i)&&(l[p]=t[p]);return l}function T8t(r,e,t,n,i){let s=e.type.value;if(!s||typeof s!="object")throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${n}`);if(t){let o={};for(let a of Object.keys(t))o[a]=r.deserialize(s,t[a],n,i);return o}return t}function I8t(r,e,t,n,i){var s;let o=e.type.element;if(!o||typeof o!="object")throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${n}`);if(t){Array.isArray(t)||(t=[t]),o.type.name==="Composite"&&o.type.className&&(o=(s=r.modelMappers[o.type.className])!==null&&s!==void 0?s:o);let a=[];for(let c=0;c<t.length;c++)a[c]=r.deserialize(o,t[c],`${n}[${c}]`,i);return a}return t}function R8t(r,e,t){let n=[t];for(;n.length;){let i=n.shift(),s=e===i?e:i+"."+e;if(Object.prototype.hasOwnProperty.call(r,s))return r[s];for(let[o,a]of Object.entries(r))o.startsWith(i+".")&&a.type.uberParent===i&&a.type.className&&n.push(a.type.className)}}function I6e(r,e,t,n){var i;let s=C4(r,e);if(s){let o=s[n];if(o){n==="serializedName"&&(o=o.replace(/\\/gi,""));let a=t[o],c=(i=e.type.uberParent)!==null&&i!==void 0?i:e.type.className;if(typeof a=="string"&&c){let l=R8t(r.modelMappers.discriminators,a,c);l&&(e=l)}}}return e}function C4(r,e){return e.type.polymorphicDiscriminator||C6e(r,e.type.uberParent)||C6e(r,e.type.className)}function C6e(r,e){return e&&r.modelMappers[e]&&r.modelMappers[e].type.polymorphicDiscriminator}JI.MapperTypeNames={Base64Url:"Base64Url",Boolean:"Boolean",ByteArray:"ByteArray",Composite:"Composite",Date:"Date",DateTime:"DateTime",DateTimeRfc1123:"DateTimeRfc1123",Dictionary:"Dictionary",Enum:"Enum",Number:"Number",Object:"Object",Sequence:"Sequence",String:"String",Stream:"Stream",TimeSpan:"TimeSpan",UnixTime:"UnixTime"}});var qfe=O(Lfe=>{"use strict";Object.defineProperty(Lfe,"__esModule",{value:!0});Lfe.createEmptyPipeline=x8t;var R6e=new Set(["Deserialize","Serialize","Retry","Sign"]),kfe=class r{constructor(e){var t;this._policies=[],this._policies=(t=e?.slice(0))!==null&&t!==void 0?t:[],this._orderedPolicies=void 0}addPolicy(e,t={}){if(t.phase&&t.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(t.phase&&!R6e.has(t.phase))throw new Error(`Invalid phase name: ${t.phase}`);if(t.afterPhase&&!R6e.has(t.afterPhase))throw new Error(`Invalid afterPhase name: ${t.afterPhase}`);this._policies.push({policy:e,options:t}),this._orderedPolicies=void 0}removePolicy(e){let t=[];return this._policies=this._policies.filter(n=>e.name&&n.policy.name===e.name||e.phase&&n.options.phase===e.phase?(t.push(n.policy),!1):!0),this._orderedPolicies=void 0,t}sendRequest(e,t){return this.getOrderedPolicies().reduceRight((s,o)=>a=>o.sendRequest(a,s),s=>e.sendRequest(s))(t)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new r(this._policies)}static create(){return new r}orderPolicies(){let e=[],t=new Map;function n(f){return{name:f,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}let i=n("Serialize"),s=n("None"),o=n("Deserialize"),a=n("Retry"),c=n("Sign"),l=[i,s,o,a,c];function u(f){return f==="Retry"?a:f==="Serialize"?i:f==="Deserialize"?o:f==="Sign"?c:s}for(let f of this._policies){let y=f.policy,v=f.options,_=y.name;if(t.has(_))throw new Error("Duplicate policy names not allowed in pipeline");let C={policy:y,dependsOn:new Set,dependants:new Set};v.afterPhase&&(C.afterPhase=u(v.afterPhase),C.afterPhase.hasAfterPolicies=!0),t.set(_,C),u(v.phase).policies.add(C)}for(let f of this._policies){let{policy:y,options:v}=f,_=y.name,C=t.get(_);if(!C)throw new Error(`Missing node for policy ${_}`);if(v.afterPolicies)for(let P of v.afterPolicies){let w=t.get(P);w&&(C.dependsOn.add(w),w.dependants.add(C))}if(v.beforePolicies)for(let P of v.beforePolicies){let w=t.get(P);w&&(w.dependsOn.add(C),C.dependants.add(w))}}function d(f){f.hasRun=!0;for(let y of f.policies)if(!(y.afterPhase&&(!y.afterPhase.hasRun||y.afterPhase.policies.size))&&y.dependsOn.size===0){e.push(y.policy);for(let v of y.dependants)v.dependsOn.delete(y);t.delete(y.policy.name),f.policies.delete(y)}}function p(){for(let f of l){if(d(f),f.policies.size>0&&f!==s){s.hasRun||d(s);return}f.hasAfterPolicies&&d(s)}}let m=0;for(;t.size>0;){m++;let f=e.length;if(p(),e.length<=f&&m>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return e}};function x8t(){return kfe.create()}});var zP=O(w4=>{"use strict";Object.defineProperty(w4,"__esModule",{value:!0});w4.logger=void 0;var O8t=lu();w4.logger=(0,O8t.createClientLogger)("core-rest-pipeline")});var x6e=O(E4=>{"use strict";Object.defineProperty(E4,"__esModule",{value:!0});E4.AbortError=void 0;var zfe=class extends Error{constructor(e){super(e),this.name="AbortError"}};E4.AbortError=zfe});var O6e=O(T4=>{"use strict";Object.defineProperty(T4,"__esModule",{value:!0});T4.AbortError=void 0;var A8t=x6e();Object.defineProperty(T4,"AbortError",{enumerable:!0,get:function(){return A8t.AbortError}})});var jfe=O(Ffe=>{"use strict";Object.defineProperty(Ffe,"__esModule",{value:!0});Ffe.createAbortablePromise=D8t;var N8t=O6e();function D8t(r,e){let{cleanupBeforeAbort:t,abortSignal:n,abortErrorMsg:i}=e??{};return new Promise((s,o)=>{function a(){o(new N8t.AbortError(i??"The operation was aborted."))}function c(){n?.removeEventListener("abort",l)}function l(){t?.(),c(),a()}if(n?.aborted)return a();try{r(u=>{c(),s(u)},u=>{c(),o(u)})}catch(u){o(u)}n?.addEventListener("abort",l)})}});var Bfe=O(Ufe=>{"use strict";Object.defineProperty(Ufe,"__esModule",{value:!0});Ufe.getRandomIntegerInclusive=M8t;function M8t(r,e){return r=Math.ceil(r),e=Math.floor(e),Math.floor(Math.random()*(e-r+1))+r}});var A6e=O(I4=>{"use strict";Object.defineProperty(I4,"__esModule",{value:!0});I4.delay=z8t;I4.calculateRetryDelay=F8t;var k8t=jfe(),L8t=Bfe(),q8t="The delay was aborted.";function z8t(r,e){let t,{abortSignal:n,abortErrorMsg:i}=e??{};return(0,k8t.createAbortablePromise)(s=>{t=setTimeout(s,r)},{cleanupBeforeAbort:()=>clearTimeout(t),abortSignal:n,abortErrorMsg:i??q8t})}function F8t(r,e){let t=e.retryDelayInMs*Math.pow(2,r),n=Math.min(e.maxRetryDelayInMs,t);return{retryAfterInMs:n/2+(0,L8t.getRandomIntegerInclusive)(0,n/2)}}});var N6e=O(Gfe=>{"use strict";Object.defineProperty(Gfe,"__esModule",{value:!0});Gfe.cancelablePromiseRace=j8t;async function j8t(r,e){var t,n;let i=new AbortController;function s(){i.abort()}(t=e?.abortSignal)===null||t===void 0||t.addEventListener("abort",s);try{return await Promise.race(r.map(o=>o({abortSignal:i.signal})))}finally{i.abort(),(n=e?.abortSignal)===null||n===void 0||n.removeEventListener("abort",s)}}});var Vfe=O($fe=>{"use strict";Object.defineProperty($fe,"__esModule",{value:!0});$fe.isObject=U8t;function U8t(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)&&!(r instanceof RegExp)&&!(r instanceof Date)}});var M6e=O(R4=>{"use strict";Object.defineProperty(R4,"__esModule",{value:!0});R4.isError=D6e;R4.getErrorMessage=G8t;var B8t=Vfe();function D6e(r){if((0,B8t.isObject)(r)){let e=typeof r.name=="string",t=typeof r.message=="string";return e&&t}return!1}function G8t(r){if(D6e(r))return r.message;{let e;try{typeof r=="object"&&r?e=JSON.stringify(r):e=String(r)}catch{e="[unable to stringify input]"}return`Unknown error ${e}`}}});var L6e=O(x4=>{"use strict";Object.defineProperty(x4,"__esModule",{value:!0});x4.computeSha256Hmac=$8t;x4.computeSha256Hash=V8t;var k6e=require("crypto");async function $8t(r,e,t){let n=Buffer.from(r,"base64");return(0,k6e.createHmac)("sha256",n).update(e).digest(t)}async function V8t(r,e){return(0,k6e.createHash)("sha256").update(r).digest(e)}});var z6e=O(qq=>{"use strict";Object.defineProperty(qq,"__esModule",{value:!0});qq.isDefined=Hfe;qq.isObjectWithProperties=H8t;qq.objectHasProperty=q6e;function Hfe(r){return typeof r<"u"&&r!==null}function H8t(r,e){if(!Hfe(r)||typeof r!="object")return!1;for(let t of e)if(!q6e(r,t))return!1;return!0}function q6e(r,e){return Hfe(r)&&typeof r=="object"&&e in r}});var F6e=O(Kfe=>{"use strict";var Wfe;Object.defineProperty(Kfe,"__esModule",{value:!0});Kfe.randomUUID=Q8t;var W8t=require("crypto"),K8t=typeof((Wfe=globalThis?.crypto)===null||Wfe===void 0?void 0:Wfe.randomUUID)=="function"?globalThis.crypto.randomUUID.bind(globalThis.crypto):W8t.randomUUID;function Q8t(){return K8t()}});var j6e=O(Vo=>{"use strict";var Qfe,Yfe,Xfe,Jfe;Object.defineProperty(Vo,"__esModule",{value:!0});Vo.isReactNative=Vo.isNodeRuntime=Vo.isNode=Vo.isNodeLike=Vo.isBun=Vo.isDeno=Vo.isWebWorker=Vo.isBrowser=void 0;Vo.isBrowser=typeof window<"u"&&typeof window.document<"u";Vo.isWebWorker=typeof self=="object"&&typeof self?.importScripts=="function"&&(((Qfe=self.constructor)===null||Qfe===void 0?void 0:Qfe.name)==="DedicatedWorkerGlobalScope"||((Yfe=self.constructor)===null||Yfe===void 0?void 0:Yfe.name)==="ServiceWorkerGlobalScope"||((Xfe=self.constructor)===null||Xfe===void 0?void 0:Xfe.name)==="SharedWorkerGlobalScope");Vo.isDeno=typeof Deno<"u"&&typeof Deno.version<"u"&&typeof Deno.version.deno<"u";Vo.isBun=typeof Bun<"u"&&typeof Bun.version<"u";Vo.isNodeLike=typeof globalThis.process<"u"&&!!globalThis.process.version&&!!(!((Jfe=globalThis.process.versions)===null||Jfe===void 0)&&Jfe.node);Vo.isNode=Vo.isNodeLike;Vo.isNodeRuntime=Vo.isNodeLike&&!Vo.isBun&&!Vo.isDeno;Vo.isReactNative=typeof navigator<"u"&&navigator?.product==="ReactNative"});var U6e=O(O4=>{"use strict";Object.defineProperty(O4,"__esModule",{value:!0});O4.uint8ArrayToString=Y8t;O4.stringToUint8Array=X8t;function Y8t(r,e){return Buffer.from(r).toString(e)}function X8t(r,e){return Buffer.from(r,e)}});var gs=O(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});Cn.stringToUint8Array=Cn.uint8ArrayToString=Cn.isWebWorker=Cn.isReactNative=Cn.isDeno=Cn.isNodeRuntime=Cn.isNodeLike=Cn.isNode=Cn.isBun=Cn.isBrowser=Cn.randomUUID=Cn.objectHasProperty=Cn.isObjectWithProperties=Cn.isDefined=Cn.computeSha256Hmac=Cn.computeSha256Hash=Cn.getErrorMessage=Cn.isError=Cn.isObject=Cn.getRandomIntegerInclusive=Cn.createAbortablePromise=Cn.cancelablePromiseRace=Cn.calculateRetryDelay=Cn.delay=void 0;var B6e=A6e();Object.defineProperty(Cn,"delay",{enumerable:!0,get:function(){return B6e.delay}});Object.defineProperty(Cn,"calculateRetryDelay",{enumerable:!0,get:function(){return B6e.calculateRetryDelay}});var J8t=N6e();Object.defineProperty(Cn,"cancelablePromiseRace",{enumerable:!0,get:function(){return J8t.cancelablePromiseRace}});var Z8t=jfe();Object.defineProperty(Cn,"createAbortablePromise",{enumerable:!0,get:function(){return Z8t.createAbortablePromise}});var e9t=Bfe();Object.defineProperty(Cn,"getRandomIntegerInclusive",{enumerable:!0,get:function(){return e9t.getRandomIntegerInclusive}});var t9t=Vfe();Object.defineProperty(Cn,"isObject",{enumerable:!0,get:function(){return t9t.isObject}});var G6e=M6e();Object.defineProperty(Cn,"isError",{enumerable:!0,get:function(){return G6e.isError}});Object.defineProperty(Cn,"getErrorMessage",{enumerable:!0,get:function(){return G6e.getErrorMessage}});var $6e=L6e();Object.defineProperty(Cn,"computeSha256Hash",{enumerable:!0,get:function(){return $6e.computeSha256Hash}});Object.defineProperty(Cn,"computeSha256Hmac",{enumerable:!0,get:function(){return $6e.computeSha256Hmac}});var Zfe=z6e();Object.defineProperty(Cn,"isDefined",{enumerable:!0,get:function(){return Zfe.isDefined}});Object.defineProperty(Cn,"isObjectWithProperties",{enumerable:!0,get:function(){return Zfe.isObjectWithProperties}});Object.defineProperty(Cn,"objectHasProperty",{enumerable:!0,get:function(){return Zfe.objectHasProperty}});var r9t=F6e();Object.defineProperty(Cn,"randomUUID",{enumerable:!0,get:function(){return r9t.randomUUID}});var n_=j6e();Object.defineProperty(Cn,"isBrowser",{enumerable:!0,get:function(){return n_.isBrowser}});Object.defineProperty(Cn,"isBun",{enumerable:!0,get:function(){return n_.isBun}});Object.defineProperty(Cn,"isNode",{enumerable:!0,get:function(){return n_.isNode}});Object.defineProperty(Cn,"isNodeLike",{enumerable:!0,get:function(){return n_.isNodeLike}});Object.defineProperty(Cn,"isNodeRuntime",{enumerable:!0,get:function(){return n_.isNodeRuntime}});Object.defineProperty(Cn,"isDeno",{enumerable:!0,get:function(){return n_.isDeno}});Object.defineProperty(Cn,"isReactNative",{enumerable:!0,get:function(){return n_.isReactNative}});Object.defineProperty(Cn,"isWebWorker",{enumerable:!0,get:function(){return n_.isWebWorker}});var V6e=U6e();Object.defineProperty(Cn,"uint8ArrayToString",{enumerable:!0,get:function(){return V6e.uint8ArrayToString}});Object.defineProperty(Cn,"stringToUint8Array",{enumerable:!0,get:function(){return V6e.stringToUint8Array}})});var N4=O(A4=>{"use strict";Object.defineProperty(A4,"__esModule",{value:!0});A4.Sanitizer=void 0;var n9t=gs(),ege="REDACTED",i9t=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],s9t=["api-version"],tge=class{constructor({additionalAllowedHeaderNames:e=[],additionalAllowedQueryParameters:t=[]}={}){e=i9t.concat(e),t=s9t.concat(t),this.allowedHeaderNames=new Set(e.map(n=>n.toLowerCase())),this.allowedQueryParameters=new Set(t.map(n=>n.toLowerCase()))}sanitize(e){let t=new Set;return JSON.stringify(e,(n,i)=>{if(i instanceof Error)return Object.assign(Object.assign({},i),{name:i.name,message:i.message});if(n==="headers")return this.sanitizeHeaders(i);if(n==="url")return this.sanitizeUrl(i);if(n==="query")return this.sanitizeQuery(i);if(n==="body")return;if(n==="response")return;if(n==="operationSpec")return;if(Array.isArray(i)||(0,n9t.isObject)(i)){if(t.has(i))return"[Circular]";t.add(i)}return i},2)}sanitizeUrl(e){if(typeof e!="string"||e===null||e==="")return e;let t=new URL(e);if(!t.search)return e;for(let[n]of t.searchParams)this.allowedQueryParameters.has(n.toLowerCase())||t.searchParams.set(n,ege);return t.toString()}sanitizeHeaders(e){let t={};for(let n of Object.keys(e))this.allowedHeaderNames.has(n.toLowerCase())?t[n]=e[n]:t[n]=ege;return t}sanitizeQuery(e){if(typeof e!="object"||e===null)return e;let t={};for(let n of Object.keys(e))this.allowedQueryParameters.has(n.toLowerCase())?t[n]=e[n]:t[n]=ege;return t}};A4.Sanitizer=tge});var rge=O(ZI=>{"use strict";Object.defineProperty(ZI,"__esModule",{value:!0});ZI.logPolicyName=void 0;ZI.logPolicy=c9t;var o9t=zP(),a9t=N4();ZI.logPolicyName="logPolicy";function c9t(r={}){var e;let t=(e=r.logger)!==null&&e!==void 0?e:o9t.logger.info,n=new a9t.Sanitizer({additionalAllowedHeaderNames:r.additionalAllowedHeaderNames,additionalAllowedQueryParameters:r.additionalAllowedQueryParameters});return{name:ZI.logPolicyName,async sendRequest(i,s){if(!t.enabled)return s(i);t(`Request: ${n.sanitize(i)}`);let o=await s(i);return t(`Response status code: ${o.status}`),t(`Headers: ${n.sanitize(o.headers)}`),o}}}});var nge=O(eR=>{"use strict";Object.defineProperty(eR,"__esModule",{value:!0});eR.redirectPolicyName=void 0;eR.redirectPolicy=l9t;eR.redirectPolicyName="redirectPolicy";var H6e=["GET","HEAD"];function l9t(r={}){let{maxRetries:e=20}=r;return{name:eR.redirectPolicyName,async sendRequest(t,n){let i=await n(t);return W6e(n,i,e)}}}async function W6e(r,e,t,n=0){let{request:i,status:s,headers:o}=e,a=o.get("location");if(a&&(s===300||s===301&&H6e.includes(i.method)||s===302&&H6e.includes(i.method)||s===303&&i.method==="POST"||s===307)&&n<t){let c=new URL(a,i.url);i.url=c.toString(),s===303&&(i.method="GET",i.headers.delete("Content-Length"),delete i.body),i.headers.delete("Authorization");let l=await r(i);return W6e(r,l,t,n+1)}return e}});var Q6e=O(D4=>{"use strict";Object.defineProperty(D4,"__esModule",{value:!0});D4.getHeaderName=u9t;D4.setPlatformSpecificData=d9t;var K6e=(Mq(),da(Dq)),ige=K6e.__importStar(require("node:os")),sge=K6e.__importStar(require("node:process"));function u9t(){return"User-Agent"}async function d9t(r){if(sge&&sge.versions){let e=sge.versions;e.bun?r.set("Bun",e.bun):e.deno?r.set("Deno",e.deno):e.node&&r.set("Node",e.node)}r.set("OS",`(${ige.arch()}-${ige.type()}-${ige.release()})`)}});var i_=O(tR=>{"use strict";Object.defineProperty(tR,"__esModule",{value:!0});tR.DEFAULT_RETRY_POLICY_COUNT=tR.SDK_VERSION=void 0;tR.SDK_VERSION="1.17.0";tR.DEFAULT_RETRY_POLICY_COUNT=3});var oge=O(M4=>{"use strict";Object.defineProperty(M4,"__esModule",{value:!0});M4.getUserAgentHeaderName=h9t;M4.getUserAgentValue=f9t;var Y6e=Q6e(),p9t=i_();function m9t(r){let e=[];for(let[t,n]of r){let i=n?`${t}/${n}`:t;e.push(i)}return e.join(" ")}function h9t(){return(0,Y6e.getHeaderName)()}async function f9t(r){let e=new Map;e.set("core-rest-pipeline",p9t.SDK_VERSION),await(0,Y6e.setPlatformSpecificData)(e);let t=m9t(e);return r?`${r} ${t}`:t}});var age=O(rR=>{"use strict";Object.defineProperty(rR,"__esModule",{value:!0});rR.userAgentPolicyName=void 0;rR.userAgentPolicy=g9t;var J6e=oge(),X6e=(0,J6e.getUserAgentHeaderName)();rR.userAgentPolicyName="userAgentPolicy";function g9t(r={}){let e=(0,J6e.getUserAgentValue)(r.userAgentPrefix);return{name:rR.userAgentPolicyName,async sendRequest(t,n){return t.headers.has(X6e)||t.headers.set(X6e,await e),n(t)}}}});var k4=O(nR=>{"use strict";Object.defineProperty(nR,"__esModule",{value:!0});nR.isNodeReadableStream=Z6e;nR.isWebReadableStream=eKe;nR.isReadableStream=y9t;nR.isBlob=v9t;function Z6e(r){return!!(r&&typeof r.pipe=="function")}function eKe(r){return!!(r&&typeof r.getReader=="function"&&typeof r.tee=="function")}function y9t(r){return Z6e(r)||eKe(r)}function v9t(r){return typeof r.stream=="function"}});var cge=O(zq=>{"use strict";Object.defineProperty(zq,"__esModule",{value:!0});zq.getRawContent=C9t;zq.createFileFromStream=P9t;zq.createFile=w9t;var b9t=gs(),_9t=k4(),tKe={arrayBuffer:()=>{throw new Error("Not implemented")},slice:()=>{throw new Error("Not implemented")},text:()=>{throw new Error("Not implemented")}},L4=Symbol("rawContent");function S9t(r){return typeof r[L4]=="function"}function C9t(r){return S9t(r)?r[L4]():r.stream()}function P9t(r,e,t={}){var n,i,s,o;return Object.assign(Object.assign({},tKe),{type:(n=t.type)!==null&&n!==void 0?n:"",lastModified:(i=t.lastModified)!==null&&i!==void 0?i:new Date().getTime(),webkitRelativePath:(s=t.webkitRelativePath)!==null&&s!==void 0?s:"",size:(o=t.size)!==null&&o!==void 0?o:-1,name:e,stream:()=>{let a=r();if((0,_9t.isNodeReadableStream)(a))throw new Error("Not supported: a Node stream was provided as input to createFileFromStream.");return a},[L4]:r})}function w9t(r,e,t={}){var n,i,s;return b9t.isNodeLike?Object.assign(Object.assign({},tKe),{type:(n=t.type)!==null&&n!==void 0?n:"",lastModified:(i=t.lastModified)!==null&&i!==void 0?i:new Date().getTime(),webkitRelativePath:(s=t.webkitRelativePath)!==null&&s!==void 0?s:"",size:r.byteLength,name:e,arrayBuffer:async()=>r.buffer,stream:()=>new Blob([r]).stream(),[L4]:()=>r}):new File([r],e,t)}});var iKe=O(uge=>{"use strict";Object.defineProperty(uge,"__esModule",{value:!0});uge.concat=x9t;var my=(Mq(),da(Dq)),lge=require("node:stream"),E9t=k4(),T9t=cge();function rKe(){return my.__asyncGenerator(this,arguments,function*(){let e=this.getReader();try{for(;;){let{done:t,value:n}=yield my.__await(e.read());if(t)return yield my.__await(void 0);yield yield my.__await(n)}}finally{e.releaseLock()}})}function I9t(r){r[Symbol.asyncIterator]||(r[Symbol.asyncIterator]=rKe.bind(r)),r.values||(r.values=rKe.bind(r))}function R9t(r){return r instanceof ReadableStream?(I9t(r),lge.Readable.fromWeb(r)):r}function nKe(r){return r instanceof Uint8Array?lge.Readable.from(Buffer.from(r)):(0,E9t.isBlob)(r)?nKe((0,T9t.getRawContent)(r)):R9t(r)}async function x9t(r){return function(){let e=r.map(t=>typeof t=="function"?t():t).map(nKe);return lge.Readable.from(function(){return my.__asyncGenerator(this,arguments,function*(){var t,n,i,s;for(let l of e)try{for(var o=!0,a=(n=void 0,my.__asyncValues(l)),c;c=yield my.__await(a.next()),t=c.done,!t;o=!0){s=c.value,o=!1;let u=s;yield yield my.__await(u)}}catch(u){n={error:u}}finally{try{!o&&!t&&(i=a.return)&&(yield my.__await(i.call(a)))}finally{if(n)throw n.error}}})}())}}});var dge=O(iR=>{"use strict";Object.defineProperty(iR,"__esModule",{value:!0});iR.multipartPolicyName=void 0;iR.multipartPolicy=j9t;var FP=gs(),O9t=iKe(),A9t=k4();function N9t(){return`----AzSDKFormBoundary${(0,FP.randomUUID)()}`}function D9t(r){let e="";for(let[t,n]of r)e+=`${t}: ${n}\r
`;return e}function M9t(r){return r instanceof Uint8Array?r.byteLength:(0,A9t.isBlob)(r)?r.size===-1?void 0:r.size:void 0}function k9t(r){let e=0;for(let t of r){let n=M9t(t);if(n===void 0)return;e+=n}return e}async function L9t(r,e,t){let n=[(0,FP.stringToUint8Array)(`--${t}`,"utf-8"),...e.flatMap(s=>[(0,FP.stringToUint8Array)(`\r
`,"utf-8"),(0,FP.stringToUint8Array)(D9t(s.headers),"utf-8"),(0,FP.stringToUint8Array)(`\r
`,"utf-8"),s.body,(0,FP.stringToUint8Array)(`\r
--${t}`,"utf-8")]),(0,FP.stringToUint8Array)(`--\r
\r
`,"utf-8")],i=k9t(n);i&&r.headers.set("Content-Length",i),r.body=await(0,O9t.concat)(n)}iR.multipartPolicyName="multipartPolicy";var q9t=70,z9t=new Set("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'()+,-./:=?");function F9t(r){if(r.length>q9t)throw new Error(`Multipart boundary "${r}" exceeds maximum length of 70 characters`);if(Array.from(r).some(e=>!z9t.has(e)))throw new Error(`Multipart boundary "${r}" contains invalid characters`)}function j9t(){return{name:iR.multipartPolicyName,async sendRequest(r,e){var t;if(!r.multipartBody)return e(r);if(r.body)throw new Error("multipartBody and regular body cannot be set at the same time");let n=r.multipartBody.boundary,i=(t=r.headers.get("Content-Type"))!==null&&t!==void 0?t:"multipart/mixed",s=i.match(/^(multipart\/[^ ;]+)(?:; *boundary=(.+))?$/);if(!s)throw new Error(`Got multipart request body, but content-type header was not multipart: ${i}`);let[,o,a]=s;if(a&&n&&a!==n)throw new Error(`Multipart boundary was specified as ${a} in the header, but got ${n} in the request body`);return n??(n=a),n?F9t(n):n=N9t(),r.headers.set("Content-Type",`${o}; boundary=${n}`),await L9t(r,r.multipartBody.parts,n),r.multipartBody=void 0,e(r)}}}});var pge=O(sR=>{"use strict";Object.defineProperty(sR,"__esModule",{value:!0});sR.decompressResponsePolicyName=void 0;sR.decompressResponsePolicy=U9t;sR.decompressResponsePolicyName="decompressResponsePolicy";function U9t(){return{name:sR.decompressResponsePolicyName,async sendRequest(r,e){return r.method!=="HEAD"&&r.headers.set("Accept-Encoding","gzip,deflate"),e(r)}}}});var sKe=O(q4=>{"use strict";Object.defineProperty(q4,"__esModule",{value:!0});q4.AbortError=void 0;var mge=class extends Error{constructor(e){super(e),this.name="AbortError"}};q4.AbortError=mge});var F4=O(z4=>{"use strict";Object.defineProperty(z4,"__esModule",{value:!0});z4.AbortError=void 0;var B9t=sKe();Object.defineProperty(z4,"AbortError",{enumerable:!0,get:function(){return B9t.AbortError}})});var U4=O(j4=>{"use strict";Object.defineProperty(j4,"__esModule",{value:!0});j4.delay=V9t;j4.parseHeaderValueAsNumber=H9t;var G9t=F4(),$9t="The operation was aborted.";function V9t(r,e,t){return new Promise((n,i)=>{let s,o,a=()=>i(new G9t.AbortError(t?.abortErrorMsg?t?.abortErrorMsg:$9t)),c=()=>{t?.abortSignal&&o&&t.abortSignal.removeEventListener("abort",o)};if(o=()=>(s&&clearTimeout(s),c(),a()),t?.abortSignal&&t.abortSignal.aborted)return a();s=setTimeout(()=>{c(),n(e)},r),t?.abortSignal&&t.abortSignal.addEventListener("abort",o)})}function H9t(r,e){let t=r.headers.get(e);if(!t)return;let n=Number(t);if(!Number.isNaN(n))return n}});var G4=O(B4=>{"use strict";Object.defineProperty(B4,"__esModule",{value:!0});B4.isThrottlingRetryResponse=Q9t;B4.throttlingRetryStrategy=Y9t;var W9t=U4(),hge="Retry-After",K9t=["retry-after-ms","x-ms-retry-after-ms",hge];function oKe(r){if(r&&[429,503].includes(r.status))try{for(let i of K9t){let s=(0,W9t.parseHeaderValueAsNumber)(r,i);if(s===0||s)return s*(i===hge?1e3:1)}let e=r.headers.get(hge);if(!e)return;let n=Date.parse(e)-Date.now();return Number.isFinite(n)?Math.max(0,n):void 0}catch{return}}function Q9t(r){return Number.isFinite(oKe(r))}function Y9t(){return{name:"throttlingRetryStrategy",retry({response:r}){let e=oKe(r);return Number.isFinite(e)?{retryAfterInMs:e}:{skipStrategy:!0}}}}});var $4=O(Fq=>{"use strict";Object.defineProperty(Fq,"__esModule",{value:!0});Fq.exponentialRetryStrategy=tXt;Fq.isExponentialRetryResponse=aKe;Fq.isSystemError=cKe;var X9t=gs(),J9t=G4(),Z9t=1e3,eXt=1e3*64;function tXt(r={}){var e,t;let n=(e=r.retryDelayInMs)!==null&&e!==void 0?e:Z9t,i=(t=r.maxRetryDelayInMs)!==null&&t!==void 0?t:eXt,s=n;return{name:"exponentialRetryStrategy",retry({retryCount:o,response:a,responseError:c}){let l=cKe(c),u=l&&r.ignoreSystemErrors,d=aKe(a),p=d&&r.ignoreHttpStatusCodes;if(a&&((0,J9t.isThrottlingRetryResponse)(a)||!d)||p||u)return{skipStrategy:!0};if(c&&!l&&!d)return{errorToThrow:c};let f=s*Math.pow(2,o),y=Math.min(i,f);return s=y/2+(0,X9t.getRandomIntegerInclusive)(0,y/2),{retryAfterInMs:s}}}}function aKe(r){return!!(r&&r.status!==void 0&&(r.status>=500||r.status===408)&&r.status!==501&&r.status!==505)}function cKe(r){return r?r.code==="ETIMEDOUT"||r.code==="ESOCKETTIMEDOUT"||r.code==="ECONNREFUSED"||r.code==="ECONNRESET"||r.code==="ENOENT"||r.code==="ENOTFOUND":!1}});var oR=O(fge=>{"use strict";Object.defineProperty(fge,"__esModule",{value:!0});fge.retryPolicy=oXt;var rXt=U4(),nXt=lu(),iXt=F4(),lKe=i_(),uKe=(0,nXt.createClientLogger)("core-rest-pipeline retryPolicy"),sXt="retryPolicy";function oXt(r,e={maxRetries:lKe.DEFAULT_RETRY_POLICY_COUNT}){let t=e.logger||uKe;return{name:sXt,async sendRequest(n,i){var s,o;let a,c,l=-1;e:for(;;){l+=1,a=void 0,c=void 0;try{t.info(`Retry ${l}: Attempting to send request`,n.requestId),a=await i(n),t.info(`Retry ${l}: Received a response from request`,n.requestId)}catch(u){if(t.error(`Retry ${l}: Received an error from request`,n.requestId),c=u,!u||c.name!=="RestError")throw u;a=c.response}if(!((s=n.abortSignal)===null||s===void 0)&&s.aborted)throw t.error(`Retry ${l}: Request aborted.`),new iXt.AbortError;if(l>=((o=e.maxRetries)!==null&&o!==void 0?o:lKe.DEFAULT_RETRY_POLICY_COUNT)){if(t.info(`Retry ${l}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),c)throw c;if(a)return a;throw new Error("Maximum retries reached with no response or error to throw")}t.info(`Retry ${l}: Processing ${r.length} retry strategies.`);t:for(let u of r){let d=u.logger||uKe;d.info(`Retry ${l}: Processing retry strategy ${u.name}.`);let p=u.retry({retryCount:l,response:a,responseError:c});if(p.skipStrategy){d.info(`Retry ${l}: Skipped.`);continue t}let{errorToThrow:m,retryAfterInMs:f,redirectTo:y}=p;if(m)throw d.error(`Retry ${l}: Retry strategy ${u.name} throws error:`,m),m;if(f||f===0){d.info(`Retry ${l}: Retry strategy ${u.name} retries after ${f}`),await(0,rXt.delay)(f,void 0,{abortSignal:n.abortSignal});continue e}if(y){d.info(`Retry ${l}: Retry strategy ${u.name} redirects to ${y}`),n.url=y;continue e}}if(c)throw t.info("None of the retry strategies could work with the received error. Throwing it."),c;if(a)return t.info("None of the retry strategies could work with the received response. Returning it."),a}}}}});var gge=O(aR=>{"use strict";Object.defineProperty(aR,"__esModule",{value:!0});aR.defaultRetryPolicyName=void 0;aR.defaultRetryPolicy=dXt;var aXt=$4(),cXt=G4(),lXt=oR(),uXt=i_();aR.defaultRetryPolicyName="defaultRetryPolicy";function dXt(r={}){var e;return{name:aR.defaultRetryPolicyName,sendRequest:(0,lXt.retryPolicy)([(0,cXt.throttlingRetryStrategy)(),(0,aXt.exponentialRetryStrategy)(r)],{maxRetries:(e=r.maxRetries)!==null&&e!==void 0?e:uXt.DEFAULT_RETRY_POLICY_COUNT}).sendRequest}}});var jq=O(vge=>{"use strict";Object.defineProperty(vge,"__esModule",{value:!0});vge.createHttpHeaders=mXt;function V4(r){return r.toLowerCase()}function*pXt(r){for(let e of r.values())yield[e.name,e.value]}var yge=class{constructor(e){if(this._headersMap=new Map,e)for(let t of Object.keys(e))this.set(t,e[t])}set(e,t){this._headersMap.set(V4(e),{name:e,value:String(t).trim()})}get(e){var t;return(t=this._headersMap.get(V4(e)))===null||t===void 0?void 0:t.value}has(e){return this._headersMap.has(V4(e))}delete(e){this._headersMap.delete(V4(e))}toJSON(e={}){let t={};if(e.preserveCase)for(let n of this._headersMap.values())t[n.name]=n.value;else for(let[n,i]of this._headersMap)t[n]=i.value;return t}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return pXt(this._headersMap)}};function mXt(r){return new yge(r)}});var bge=O(cR=>{"use strict";Object.defineProperty(cR,"__esModule",{value:!0});cR.formDataPolicyName=void 0;cR.formDataPolicy=fXt;var pKe=gs(),dKe=jq();cR.formDataPolicyName="formDataPolicy";function hXt(r){var e;let t={};for(let[n,i]of r.entries())(e=t[n])!==null&&e!==void 0||(t[n]=[]),t[n].push(i);return t}function fXt(){return{name:cR.formDataPolicyName,async sendRequest(r,e){if(pKe.isNodeLike&&typeof FormData<"u"&&r.body instanceof FormData&&(r.formData=hXt(r.body),r.body=void 0),r.formData){let t=r.headers.get("Content-Type");t&&t.indexOf("application/x-www-form-urlencoded")!==-1?r.body=gXt(r.formData):await yXt(r.formData,r),r.formData=void 0}return e(r)}}}function gXt(r){let e=new URLSearchParams;for(let[t,n]of Object.entries(r))if(Array.isArray(n))for(let i of n)e.append(t,i.toString());else e.append(t,n.toString());return e.toString()}async function yXt(r,e){let t=e.headers.get("Content-Type");if(t&&!t.startsWith("multipart/form-data"))return;e.headers.set("Content-Type",t??"multipart/form-data");let n=[];for(let[i,s]of Object.entries(r))for(let o of Array.isArray(s)?s:[s])if(typeof o=="string")n.push({headers:(0,dKe.createHttpHeaders)({"Content-Disposition":`form-data; name="${i}"`}),body:(0,pKe.stringToUint8Array)(o,"utf-8")});else{if(o==null||typeof o!="object")throw new Error(`Unexpected value for key ${i}: ${o}. Value should be serialized to string first.`);{let a=o.name||"blob",c=(0,dKe.createHttpHeaders)();c.set("Content-Disposition",`form-data; name="${i}"; filename="${a}"`),c.set("Content-Type",o.type||"application/octet-stream"),n.push({headers:c,body:o})}}e.multipartBody={parts:n}}});var hKe=O((rVr,mKe)=>{var lR=1e3,uR=lR*60,dR=uR*60,jP=dR*24,vXt=jP*7,bXt=jP*365.25;mKe.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return _Xt(r);if(t==="number"&&isFinite(r))return e.long?CXt(r):SXt(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function _Xt(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*bXt;case"weeks":case"week":case"w":return t*vXt;case"days":case"day":case"d":return t*jP;case"hours":case"hour":case"hrs":case"hr":case"h":return t*dR;case"minutes":case"minute":case"mins":case"min":case"m":return t*uR;case"seconds":case"second":case"secs":case"sec":case"s":return t*lR;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function SXt(r){var e=Math.abs(r);return e>=jP?Math.round(r/jP)+"d":e>=dR?Math.round(r/dR)+"h":e>=uR?Math.round(r/uR)+"m":e>=lR?Math.round(r/lR)+"s":r+"ms"}function CXt(r){var e=Math.abs(r);return e>=jP?H4(r,e,jP,"day"):e>=dR?H4(r,e,dR,"hour"):e>=uR?H4(r,e,uR,"minute"):e>=lR?H4(r,e,lR,"second"):r+" ms"}function H4(r,e,t,n){var i=e>=t*1.5;return Math.round(r/t)+" "+n+(i?"s":"")}});var _ge=O((nVr,fKe)=>{function PXt(r){t.debug=t,t.default=t,t.coerce=c,t.disable=s,t.enable=i,t.enabled=o,t.humanize=hKe(),t.destroy=l,Object.keys(r).forEach(u=>{t[u]=r[u]}),t.names=[],t.skips=[],t.formatters={};function e(u){let d=0;for(let p=0;p<u.length;p++)d=(d<<5)-d+u.charCodeAt(p),d|=0;return t.colors[Math.abs(d)%t.colors.length]}t.selectColor=e;function t(u){let d,p=null,m,f;function y(...v){if(!y.enabled)return;let _=y,C=Number(new Date),P=C-(d||C);_.diff=P,_.prev=d,_.curr=C,d=C,v[0]=t.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let w=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(I,z)=>{if(I==="%%")return"%";w++;let G=t.formatters[z];if(typeof G=="function"){let L=v[w];I=G.call(_,L),v.splice(w,1),w--}return I}),t.formatArgs.call(_,v),(_.log||t.log).apply(_,v)}return y.namespace=u,y.useColors=t.useColors(),y.color=t.selectColor(u),y.extend=n,y.destroy=t.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(m!==t.namespaces&&(m=t.namespaces,f=t.enabled(u)),f),set:v=>{p=v}}),typeof t.init=="function"&&t.init(y),y}function n(u,d){let p=t(this.namespace+(typeof d>"u"?":":d)+u);return p.log=this.log,p}function i(u){t.save(u),t.namespaces=u,t.names=[],t.skips=[];let d,p=(typeof u=="string"?u:"").split(/[\s,]+/),m=p.length;for(d=0;d<m;d++)p[d]&&(u=p[d].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.substr(1)+"$")):t.names.push(new RegExp("^"+u+"$")))}function s(){let u=[...t.names.map(a),...t.skips.map(a).map(d=>"-"+d)].join(",");return t.enable(""),u}function o(u){if(u[u.length-1]==="*")return!0;let d,p;for(d=0,p=t.skips.length;d<p;d++)if(t.skips[d].test(u))return!1;for(d=0,p=t.names.length;d<p;d++)if(t.names[d].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}fKe.exports=PXt});var gKe=O((Pd,W4)=>{Pd.formatArgs=EXt;Pd.save=TXt;Pd.load=IXt;Pd.useColors=wXt;Pd.storage=RXt();Pd.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Pd.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function wXt(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function EXt(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+W4.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,n=0;r[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),r.splice(n,0,e)}Pd.log=console.debug||console.log||(()=>{});function TXt(r){try{r?Pd.storage.setItem("debug",r):Pd.storage.removeItem("debug")}catch{}}function IXt(){let r;try{r=Pd.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}function RXt(){try{return localStorage}catch{}}W4.exports=_ge()(Pd);var{formatters:xXt}=W4.exports;xXt.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var vKe=O((qc,Q4)=>{var OXt=require("tty"),K4=require("util");qc.init=qXt;qc.log=MXt;qc.formatArgs=NXt;qc.save=kXt;qc.load=LXt;qc.useColors=AXt;qc.destroy=K4.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");qc.colors=[6,2,3,4,5,1];try{let r=fA();r&&(r.stderr||r).level>=2&&(qc.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}qc.inspectOpts=Object.keys(process.env).filter(r=>/^debug_/i.test(r)).reduce((r,e)=>{let t=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),r[t]=n,r},{});function AXt(){return"colors"in qc.inspectOpts?!!qc.inspectOpts.colors:OXt.isatty(process.stderr.fd)}function NXt(r){let{namespace:e,useColors:t}=this;if(t){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${e} \x1B[0m`;r[0]=s+r[0].split(`
`).join(`
`+s),r.push(i+"m+"+Q4.exports.humanize(this.diff)+"\x1B[0m")}else r[0]=DXt()+e+" "+r[0]}function DXt(){return qc.inspectOpts.hideDate?"":new Date().toISOString()+" "}function MXt(...r){return process.stderr.write(K4.format(...r)+`
`)}function kXt(r){r?process.env.DEBUG=r:delete process.env.DEBUG}function LXt(){return process.env.DEBUG}function qXt(r){r.inspectOpts={};let e=Object.keys(qc.inspectOpts);for(let t=0;t<e.length;t++)r.inspectOpts[e[t]]=qc.inspectOpts[e[t]]}Q4.exports=_ge()(qc);var{formatters:yKe}=Q4.exports;yKe.o=function(r){return this.inspectOpts.colors=this.useColors,K4.inspect(r,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};yKe.O=function(r){return this.inspectOpts.colors=this.useColors,K4.inspect(r,this.inspectOpts)}});var Cge=O((iVr,Sge)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Sge.exports=gKe():Sge.exports=vKe()});var SKe=O(Tu=>{"use strict";var zXt=Tu&&Tu.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),FXt=Tu&&Tu.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),bKe=Tu&&Tu.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&zXt(e,r,t);return FXt(e,r),e};Object.defineProperty(Tu,"__esModule",{value:!0});Tu.req=Tu.json=Tu.toBuffer=void 0;var jXt=bKe(require("http")),UXt=bKe(require("https"));async function _Ke(r){let e=0,t=[];for await(let n of r)e+=n.length,t.push(n);return Buffer.concat(t,e)}Tu.toBuffer=_Ke;async function BXt(r){let t=(await _Ke(r)).toString("utf8");try{return JSON.parse(t)}catch(n){let i=n;throw i.message+=` (input: ${t})`,i}}Tu.json=BXt;function GXt(r,e={}){let n=((typeof r=="string"?r:r.href).startsWith("https:")?UXt:jXt).request(r,e),i=new Promise((s,o)=>{n.once("response",s).once("error",o).end()});return n.then=i.then.bind(i),n}Tu.req=GXt});var EKe=O(wd=>{"use strict";var PKe=wd&&wd.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),$Xt=wd&&wd.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),wKe=wd&&wd.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&PKe(e,r,t);return $Xt(e,r),e},VXt=wd&&wd.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&PKe(e,r,t)};Object.defineProperty(wd,"__esModule",{value:!0});wd.Agent=void 0;var HXt=wKe(require("net")),CKe=wKe(require("http")),WXt=require("https");VXt(SKe(),wd);var Sf=Symbol("AgentBaseInternalState"),Pge=class extends CKe.Agent{constructor(e){super(e),this[Sf]={}}isSecureEndpoint(e){if(e){if(typeof e.secureEndpoint=="boolean")return e.secureEndpoint;if(typeof e.protocol=="string")return e.protocol==="https:"}let{stack:t}=new Error;return typeof t!="string"?!1:t.split(`
`).some(n=>n.indexOf("(https.js:")!==-1||n.indexOf("node:https:")!==-1)}incrementSockets(e){if(this.maxSockets===1/0&&this.maxTotalSockets===1/0)return null;this.sockets[e]||(this.sockets[e]=[]);let t=new HXt.Socket({writable:!1});return this.sockets[e].push(t),this.totalSocketCount++,t}decrementSockets(e,t){if(!this.sockets[e]||t===null)return;let n=this.sockets[e],i=n.indexOf(t);i!==-1&&(n.splice(i,1),this.totalSocketCount--,n.length===0&&delete this.sockets[e])}getName(e){return(typeof e.secureEndpoint=="boolean"?e.secureEndpoint:this.isSecureEndpoint(e))?WXt.Agent.prototype.getName.call(this,e):super.getName(e)}createSocket(e,t,n){let i={...t,secureEndpoint:this.isSecureEndpoint(t)},s=this.getName(i),o=this.incrementSockets(s);Promise.resolve().then(()=>this.connect(e,i)).then(a=>{if(this.decrementSockets(s,o),a instanceof CKe.Agent)return a.addRequest(e,i);this[Sf].currentSocket=a,super.createSocket(e,t,n)},a=>{this.decrementSockets(s,o),n(a)})}createConnection(){let e=this[Sf].currentSocket;if(this[Sf].currentSocket=void 0,!e)throw new Error("No socket was returned in the `connect()` function");return e}get defaultPort(){return this[Sf].defaultPort??(this.protocol==="https:"?443:80)}set defaultPort(e){this[Sf]&&(this[Sf].defaultPort=e)}get protocol(){return this[Sf].protocol??(this.isSecureEndpoint()?"https:":"http:")}set protocol(e){this[Sf]&&(this[Sf].protocol=e)}};wd.Agent=Pge});var TKe=O(pR=>{"use strict";var KXt=pR&&pR.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(pR,"__esModule",{value:!0});pR.parseProxyResponse=void 0;var QXt=KXt(Cge()),Y4=(0,QXt.default)("https-proxy-agent:parse-proxy-response");function YXt(r){return new Promise((e,t)=>{let n=0,i=[];function s(){let u=r.read();u?l(u):r.once("readable",s)}function o(){r.removeListener("end",a),r.removeListener("error",c),r.removeListener("readable",s)}function a(){o(),Y4("onend"),t(new Error("Proxy connection ended before receiving CONNECT response"))}function c(u){o(),Y4("onerror %o",u),t(u)}function l(u){i.push(u),n+=u.length;let d=Buffer.concat(i,n),p=d.indexOf(`\r
\r
`);if(p===-1){Y4("have not received end of HTTP headers yet..."),s();return}let m=d.slice(0,p).toString("ascii").split(`\r
`),f=m.shift();if(!f)return r.destroy(),t(new Error("No header received from proxy CONNECT response"));let y=f.split(" "),v=+y[1],_=y.slice(2).join(" "),C={};for(let P of m){if(!P)continue;let w=P.indexOf(":");if(w===-1)return r.destroy(),t(new Error(`Invalid header from proxy CONNECT response: "${P}"`));let R=P.slice(0,w).toLowerCase(),I=P.slice(w+1).trimStart(),z=C[R];typeof z=="string"?C[R]=[z,I]:Array.isArray(z)?z.push(I):C[R]=I}Y4("got proxy server response: %o %o",f,C),o(),e({connect:{statusCode:v,statusText:_,headers:C},buffered:d})}r.on("error",c),r.on("end",a),s()})}pR.parseProxyResponse=YXt});var J4=O(vp=>{"use strict";var XXt=vp&&vp.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),JXt=vp&&vp.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),xKe=vp&&vp.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&XXt(e,r,t);return JXt(e,r),e},OKe=vp&&vp.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vp,"__esModule",{value:!0});vp.HttpsProxyAgent=void 0;var wge=xKe(require("net")),IKe=xKe(require("tls")),ZXt=OKe(require("assert")),eJt=OKe(Cge()),tJt=EKe(),rJt=require("url"),nJt=TKe(),Uq=(0,eJt.default)("https-proxy-agent"),X4=class extends tJt.Agent{constructor(e,t){super(t),this.options={path:void 0},this.proxy=typeof e=="string"?new rJt.URL(e):e,this.proxyHeaders=t?.headers??{},Uq("Creating new HttpsProxyAgent instance: %o",this.proxy.href);let n=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),i=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...t?RKe(t,"headers"):null,host:n,port:i}}async connect(e,t){let{proxy:n}=this;if(!t.host)throw new TypeError('No "host" provided');let i;if(n.protocol==="https:"){Uq("Creating `tls.Socket`: %o",this.connectOpts);let p=this.connectOpts.servername||this.connectOpts.host;i=IKe.connect({...this.connectOpts,servername:p})}else Uq("Creating `net.Socket`: %o",this.connectOpts),i=wge.connect(this.connectOpts);let s=typeof this.proxyHeaders=="function"?this.proxyHeaders():{...this.proxyHeaders},o=wge.isIPv6(t.host)?`[${t.host}]`:t.host,a=`CONNECT ${o}:${t.port} HTTP/1.1\r
`;if(n.username||n.password){let p=`${decodeURIComponent(n.username)}:${decodeURIComponent(n.password)}`;s["Proxy-Authorization"]=`Basic ${Buffer.from(p).toString("base64")}`}s.Host=`${o}:${t.port}`,s["Proxy-Connection"]||(s["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(let p of Object.keys(s))a+=`${p}: ${s[p]}\r
`;let c=(0,nJt.parseProxyResponse)(i);i.write(`${a}\r
`);let{connect:l,buffered:u}=await c;if(e.emit("proxyConnect",l),this.emit("proxyConnect",l,e),l.statusCode===200){if(e.once("socket",iJt),t.secureEndpoint){Uq("Upgrading socket connection to TLS");let p=t.servername||t.host;return IKe.connect({...RKe(t,"host","path","port"),socket:i,servername:p})}return i}i.destroy();let d=new wge.Socket({writable:!1});return d.readable=!0,e.once("socket",p=>{Uq("Replaying proxy buffer for failed request"),(0,ZXt.default)(p.listenerCount("data")>0),p.push(u),p.push(null)}),d}};X4.protocols=["http","https"];vp.HttpsProxyAgent=X4;function iJt(r){r.resume()}function RKe(r,...e){let t={},n;for(n in r)e.includes(n)||(t[n]=r[n]);return t}});var DKe=O(Iu=>{"use strict";var sJt=Iu&&Iu.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),oJt=Iu&&Iu.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),AKe=Iu&&Iu.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&sJt(e,r,t);return oJt(e,r),e};Object.defineProperty(Iu,"__esModule",{value:!0});Iu.req=Iu.json=Iu.toBuffer=void 0;var aJt=AKe(require("http")),cJt=AKe(require("https"));async function NKe(r){let e=0,t=[];for await(let n of r)e+=n.length,t.push(n);return Buffer.concat(t,e)}Iu.toBuffer=NKe;async function lJt(r){let t=(await NKe(r)).toString("utf8");try{return JSON.parse(t)}catch(n){let i=n;throw i.message+=` (input: ${t})`,i}}Iu.json=lJt;function uJt(r,e={}){let n=((typeof r=="string"?r:r.href).startsWith("https:")?cJt:aJt).request(r,e),i=new Promise((s,o)=>{n.once("response",s).once("error",o).end()});return n.then=i.then.bind(i),n}Iu.req=uJt});var qKe=O(Ed=>{"use strict";var kKe=Ed&&Ed.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),dJt=Ed&&Ed.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),LKe=Ed&&Ed.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&kKe(e,r,t);return dJt(e,r),e},pJt=Ed&&Ed.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&kKe(e,r,t)};Object.defineProperty(Ed,"__esModule",{value:!0});Ed.Agent=void 0;var mJt=LKe(require("net")),MKe=LKe(require("http")),hJt=require("https");pJt(DKe(),Ed);var Cf=Symbol("AgentBaseInternalState"),Ege=class extends MKe.Agent{constructor(e){super(e),this[Cf]={}}isSecureEndpoint(e){if(e){if(typeof e.secureEndpoint=="boolean")return e.secureEndpoint;if(typeof e.protocol=="string")return e.protocol==="https:"}let{stack:t}=new Error;return typeof t!="string"?!1:t.split(`
`).some(n=>n.indexOf("(https.js:")!==-1||n.indexOf("node:https:")!==-1)}incrementSockets(e){if(this.maxSockets===1/0&&this.maxTotalSockets===1/0)return null;this.sockets[e]||(this.sockets[e]=[]);let t=new mJt.Socket({writable:!1});return this.sockets[e].push(t),this.totalSocketCount++,t}decrementSockets(e,t){if(!this.sockets[e]||t===null)return;let n=this.sockets[e],i=n.indexOf(t);i!==-1&&(n.splice(i,1),this.totalSocketCount--,n.length===0&&delete this.sockets[e])}getName(e){return(typeof e.secureEndpoint=="boolean"?e.secureEndpoint:this.isSecureEndpoint(e))?hJt.Agent.prototype.getName.call(this,e):super.getName(e)}createSocket(e,t,n){let i={...t,secureEndpoint:this.isSecureEndpoint(t)},s=this.getName(i),o=this.incrementSockets(s);Promise.resolve().then(()=>this.connect(e,i)).then(a=>{if(this.decrementSockets(s,o),a instanceof MKe.Agent)return a.addRequest(e,i);this[Cf].currentSocket=a,super.createSocket(e,t,n)},a=>{this.decrementSockets(s,o),n(a)})}createConnection(){let e=this[Cf].currentSocket;if(this[Cf].currentSocket=void 0,!e)throw new Error("No socket was returned in the `connect()` function");return e}get defaultPort(){return this[Cf].defaultPort??(this.protocol==="https:"?443:80)}set defaultPort(e){this[Cf]&&(this[Cf].defaultPort=e)}get protocol(){return this[Cf].protocol??(this.isSecureEndpoint()?"https:":"http:")}set protocol(e){this[Cf]&&(this[Cf].protocol=e)}};Ed.Agent=Ege});var e6=O(bp=>{"use strict";var fJt=bp&&bp.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),gJt=bp&&bp.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),FKe=bp&&bp.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&fJt(e,r,t);return gJt(e,r),e},yJt=bp&&bp.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(bp,"__esModule",{value:!0});bp.HttpProxyAgent=void 0;var vJt=FKe(require("net")),bJt=FKe(require("tls")),_Jt=yJt(Ine()),SJt=require("events"),CJt=qKe(),zKe=require("url"),mR=(0,_Jt.default)("http-proxy-agent"),Z4=class extends CJt.Agent{constructor(e,t){super(t),this.proxy=typeof e=="string"?new zKe.URL(e):e,this.proxyHeaders=t?.headers??{},mR("Creating new HttpProxyAgent instance: %o",this.proxy.href);let n=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),i=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={...t?PJt(t,"headers"):null,host:n,port:i}}addRequest(e,t){e._header=null,this.setRequestProps(e,t),super.addRequest(e,t)}setRequestProps(e,t){let{proxy:n}=this,i=t.secureEndpoint?"https:":"http:",s=e.getHeader("host")||"localhost",o=`${i}//${s}`,a=new zKe.URL(e.path,o);t.port!==80&&(a.port=String(t.port)),e.path=String(a);let c=typeof this.proxyHeaders=="function"?this.proxyHeaders():{...this.proxyHeaders};if(n.username||n.password){let l=`${decodeURIComponent(n.username)}:${decodeURIComponent(n.password)}`;c["Proxy-Authorization"]=`Basic ${Buffer.from(l).toString("base64")}`}c["Proxy-Connection"]||(c["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(let l of Object.keys(c)){let u=c[l];u&&e.setHeader(l,u)}}async connect(e,t){e._header=null,e.path.includes("://")||this.setRequestProps(e,t);let n,i;mR("Regenerating stored HTTP header string for request"),e._implicitHeader(),e.outputData&&e.outputData.length>0&&(mR("Patching connection write() output buffer with updated header"),n=e.outputData[0].data,i=n.indexOf(`\r
\r
`)+4,e.outputData[0].data=e._header+n.substring(i),mR("Output buffer: %o",e.outputData[0].data));let s;return this.proxy.protocol==="https:"?(mR("Creating `tls.Socket`: %o",this.connectOpts),s=bJt.connect(this.connectOpts)):(mR("Creating `net.Socket`: %o",this.connectOpts),s=vJt.connect(this.connectOpts)),await(0,SJt.once)(s,"connect"),s}};Z4.protocols=["http","https"];bp.HttpProxyAgent=Z4;function PJt(r,...e){let t={},n;for(n in r)e.includes(n)||(t[n]=r[n]);return t}});var Tge=O(_p=>{"use strict";Object.defineProperty(_p,"__esModule",{value:!0});_p.globalNoProxyList=_p.proxyPolicyName=void 0;_p.loadNoProxy=$Ke;_p.getDefaultProxySettings=DJt;_p.proxyPolicy=kJt;var wJt=J4(),EJt=e6(),TJt=zP(),IJt="HTTPS_PROXY",RJt="HTTP_PROXY",xJt="ALL_PROXY",OJt="NO_PROXY";_p.proxyPolicyName="proxyPolicy";_p.globalNoProxyList=[];var BKe=!1,AJt=new Map;function t6(r){if(process.env[r])return process.env[r];if(process.env[r.toLowerCase()])return process.env[r.toLowerCase()]}function GKe(){if(!process)return;let r=t6(IJt),e=t6(xJt),t=t6(RJt);return r||e||t}function NJt(r,e,t){if(e.length===0)return!1;let n=new URL(r).hostname;if(t?.has(n))return t.get(n);let i=!1;for(let s of e)s[0]==="."?(n.endsWith(s)||n.length===s.length-1&&n===s.slice(1))&&(i=!0):n===s&&(i=!0);return t?.set(n,i),i}function $Ke(){let r=t6(OJt);return BKe=!0,r?r.split(",").map(e=>e.trim()).filter(e=>e.length):[]}function DJt(r){if(!r&&(r=GKe(),!r))return;let e=new URL(r);return{host:(e.protocol?e.protocol+"//":"")+e.hostname,port:Number.parseInt(e.port||"80"),username:e.username,password:e.password}}function MJt(){let r=GKe();return r?new URL(r):void 0}function jKe(r){let e;try{e=new URL(r.host)}catch{throw new Error(`Expecting a valid host string in proxy settings, but found "${r.host}".`)}return e.port=String(r.port),r.username&&(e.username=r.username),r.password&&(e.password=r.password),e}function UKe(r,e,t){if(r.agent)return;let i=new URL(r.url).protocol!=="https:";r.tlsSettings&&TJt.logger.warning("TLS settings are not supported in combination with custom Proxy, certificates provided to the client will be ignored.");let s=r.headers.toJSON();i?(e.httpProxyAgent||(e.httpProxyAgent=new EJt.HttpProxyAgent(t,{headers:s})),r.agent=e.httpProxyAgent):(e.httpsProxyAgent||(e.httpsProxyAgent=new wJt.HttpsProxyAgent(t,{headers:s})),r.agent=e.httpsProxyAgent)}function kJt(r,e){BKe||_p.globalNoProxyList.push(...$Ke());let t=r?jKe(r):MJt(),n={};return{name:_p.proxyPolicyName,async sendRequest(i,s){var o;return!i.proxySettings&&t&&!NJt(i.url,(o=e?.customNoProxyList)!==null&&o!==void 0?o:_p.globalNoProxyList,e?.customNoProxyList?void 0:AJt)?UKe(i,n,t):i.proxySettings&&UKe(i,n,jKe(i.proxySettings)),s(i)}}}});var Ige=O(hR=>{"use strict";Object.defineProperty(hR,"__esModule",{value:!0});hR.setClientRequestIdPolicyName=void 0;hR.setClientRequestIdPolicy=LJt;hR.setClientRequestIdPolicyName="setClientRequestIdPolicy";function LJt(r="x-ms-client-request-id"){return{name:hR.setClientRequestIdPolicyName,async sendRequest(e,t){return e.headers.has(r)||e.headers.set(r,e.requestId),t(e)}}}});var Rge=O(fR=>{"use strict";Object.defineProperty(fR,"__esModule",{value:!0});fR.tlsPolicyName=void 0;fR.tlsPolicy=qJt;fR.tlsPolicyName="tlsPolicy";function qJt(r){return{name:fR.tlsPolicyName,sendRequest:async(e,t)=>(e.tlsSettings||(e.tlsSettings=r),t(e))}}});var xge=O(Pf=>{"use strict";Object.defineProperty(Pf,"__esModule",{value:!0});Pf.TracingContextImpl=Pf.createTracingContext=Pf.knownContextKeys=void 0;Pf.knownContextKeys={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};function zJt(r={}){let e=new r6(r.parentContext);return r.span&&(e=e.setValue(Pf.knownContextKeys.span,r.span)),r.namespace&&(e=e.setValue(Pf.knownContextKeys.namespace,r.namespace)),e}Pf.createTracingContext=zJt;var r6=class r{constructor(e){this._contextMap=e instanceof r?new Map(e._contextMap):new Map}setValue(e,t){let n=new r(this);return n._contextMap.set(e,t),n}getValue(e){return this._contextMap.get(e)}deleteValue(e){let t=new r(this);return t._contextMap.delete(e),t}};Pf.TracingContextImpl=r6});var VKe=O(n6=>{"use strict";Object.defineProperty(n6,"__esModule",{value:!0});n6.state=void 0;n6.state={instrumenterImplementation:void 0}});var Oge=O(wf=>{"use strict";Object.defineProperty(wf,"__esModule",{value:!0});wf.getInstrumenter=wf.useInstrumenter=wf.createDefaultInstrumenter=wf.createDefaultTracingSpan=void 0;var FJt=xge(),i6=VKe();function HKe(){return{end:()=>{},isRecording:()=>!1,recordException:()=>{},setAttribute:()=>{},setStatus:()=>{}}}wf.createDefaultTracingSpan=HKe;function WKe(){return{createRequestHeaders:()=>({}),parseTraceparentHeader:()=>{},startSpan:(r,e)=>({span:HKe(),tracingContext:(0,FJt.createTracingContext)({parentContext:e.tracingContext})}),withContext(r,e,...t){return e(...t)}}}wf.createDefaultInstrumenter=WKe;function jJt(r){i6.state.instrumenterImplementation=r}wf.useInstrumenter=jJt;function UJt(){return i6.state.instrumenterImplementation||(i6.state.instrumenterImplementation=WKe()),i6.state.instrumenterImplementation}wf.getInstrumenter=UJt});var KKe=O(o6=>{"use strict";Object.defineProperty(o6,"__esModule",{value:!0});o6.createTracingClient=void 0;var s6=Oge(),Age=xge();function BJt(r){let{namespace:e,packageName:t,packageVersion:n}=r;function i(l,u,d){var p;let m=(0,s6.getInstrumenter)().startSpan(l,Object.assign(Object.assign({},d),{packageName:t,packageVersion:n,tracingContext:(p=u?.tracingOptions)===null||p===void 0?void 0:p.tracingContext})),f=m.tracingContext,y=m.span;f.getValue(Age.knownContextKeys.namespace)||(f=f.setValue(Age.knownContextKeys.namespace,e)),y.setAttribute("az.namespace",f.getValue(Age.knownContextKeys.namespace));let v=Object.assign({},u,{tracingOptions:Object.assign(Object.assign({},u?.tracingOptions),{tracingContext:f})});return{span:y,updatedOptions:v}}async function s(l,u,d,p){let{span:m,updatedOptions:f}=i(l,u,p);try{let y=await o(f.tracingOptions.tracingContext,()=>Promise.resolve(d(f,m)));return m.setStatus({status:"success"}),y}catch(y){throw m.setStatus({status:"error",error:y}),y}finally{m.end()}}function o(l,u,...d){return(0,s6.getInstrumenter)().withContext(l,u,...d)}function a(l){return(0,s6.getInstrumenter)().parseTraceparentHeader(l)}function c(l){return(0,s6.getInstrumenter)().createRequestHeaders(l)}return{startSpan:i,withSpan:s,withContext:o,parseTraceparentHeader:a,createRequestHeaders:c}}o6.createTracingClient=BJt});var Bq=O(gR=>{"use strict";Object.defineProperty(gR,"__esModule",{value:!0});gR.createTracingClient=gR.useInstrumenter=void 0;var GJt=Oge();Object.defineProperty(gR,"useInstrumenter",{enumerable:!0,get:function(){return GJt.useInstrumenter}});var $Jt=KKe();Object.defineProperty(gR,"createTracingClient",{enumerable:!0,get:function(){return $Jt.createTracingClient}})});var QKe=O(a6=>{"use strict";Object.defineProperty(a6,"__esModule",{value:!0});a6.custom=void 0;var VJt=require("node:util");a6.custom=VJt.inspect.custom});var c6=O(Gq=>{"use strict";Object.defineProperty(Gq,"__esModule",{value:!0});Gq.RestError=void 0;Gq.isRestError=YJt;var HJt=gs(),WJt=QKe(),KJt=N4(),QJt=new KJt.Sanitizer,yR=class r extends Error{constructor(e,t={}){super(e),this.name="RestError",this.code=t.code,this.statusCode=t.statusCode,Object.defineProperty(this,"request",{value:t.request,enumerable:!1}),Object.defineProperty(this,"response",{value:t.response,enumerable:!1}),Object.setPrototypeOf(this,r.prototype)}[WJt.custom](){return`RestError: ${this.message} 
 ${QJt.sanitize(Object.assign(Object.assign({},this),{request:this.request,response:this.response}))}`}};Gq.RestError=yR;yR.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR";yR.PARSE_ERROR="PARSE_ERROR";function YJt(r){return r instanceof yR?!0:(0,HJt.isError)(r)&&r.name==="RestError"}});var Nge=O(vR=>{"use strict";Object.defineProperty(vR,"__esModule",{value:!0});vR.tracingPolicyName=void 0;vR.tracingPolicy=r7t;var XJt=Bq(),JJt=i_(),ZJt=oge(),l6=zP(),$q=gs(),e7t=c6(),t7t=N4();vR.tracingPolicyName="tracingPolicy";function r7t(r={}){let e=(0,ZJt.getUserAgentValue)(r.userAgentPrefix),t=new t7t.Sanitizer({additionalAllowedQueryParameters:r.additionalAllowedQueryParameters}),n=n7t();return{name:vR.tracingPolicyName,async sendRequest(i,s){var o;if(!n)return s(i);let a=await e,c={"http.url":t.sanitizeUrl(i.url),"http.method":i.method,"http.user_agent":a,requestId:i.requestId};a&&(c["http.user_agent"]=a);let{span:l,tracingContext:u}=(o=i7t(n,i,c))!==null&&o!==void 0?o:{};if(!l||!u)return s(i);try{let d=await n.withContext(u,s,i);return o7t(l,d),d}catch(d){throw s7t(l,d),d}}}}function n7t(){try{return(0,XJt.createTracingClient)({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:JJt.SDK_VERSION})}catch(r){l6.logger.warning(`Error when creating the TracingClient: ${(0,$q.getErrorMessage)(r)}`);return}}function i7t(r,e,t){try{let{span:n,updatedOptions:i}=r.startSpan(`HTTP ${e.method}`,{tracingOptions:e.tracingOptions},{spanKind:"client",spanAttributes:t});if(!n.isRecording()){n.end();return}let s=r.createRequestHeaders(i.tracingOptions.tracingContext);for(let[o,a]of Object.entries(s))e.headers.set(o,a);return{span:n,tracingContext:i.tracingOptions.tracingContext}}catch(n){l6.logger.warning(`Skipping creating a tracing span due to an error: ${(0,$q.getErrorMessage)(n)}`);return}}function s7t(r,e){try{r.setStatus({status:"error",error:(0,$q.isError)(e)?e:void 0}),(0,e7t.isRestError)(e)&&e.statusCode&&r.setAttribute("http.status_code",e.statusCode),r.end()}catch(t){l6.logger.warning(`Skipping tracing span processing due to an error: ${(0,$q.getErrorMessage)(t)}`)}}function o7t(r,e){try{r.setAttribute("http.status_code",e.status);let t=e.headers.get("x-ms-request-id");t&&r.setAttribute("serviceRequestId",t),r.setStatus({status:"success"}),r.end()}catch(t){l6.logger.warning(`Skipping tracing span processing due to an error: ${(0,$q.getErrorMessage)(t)}`)}}});var JKe=O(Dge=>{"use strict";Object.defineProperty(Dge,"__esModule",{value:!0});Dge.createPipelineFromOptions=v7t;var a7t=rge(),c7t=qfe(),l7t=nge(),u7t=age(),YKe=dge(),d7t=pge(),p7t=gge(),m7t=bge(),XKe=gs(),h7t=Tge(),f7t=Ige(),g7t=Rge(),y7t=Nge();function v7t(r){var e;let t=(0,c7t.createEmptyPipeline)();return XKe.isNodeLike&&(r.tlsOptions&&t.addPolicy((0,g7t.tlsPolicy)(r.tlsOptions)),t.addPolicy((0,h7t.proxyPolicy)(r.proxyOptions)),t.addPolicy((0,d7t.decompressResponsePolicy)())),t.addPolicy((0,m7t.formDataPolicy)(),{beforePolicies:[YKe.multipartPolicyName]}),t.addPolicy((0,u7t.userAgentPolicy)(r.userAgentOptions)),t.addPolicy((0,f7t.setClientRequestIdPolicy)((e=r.telemetryOptions)===null||e===void 0?void 0:e.clientRequestIdHeaderName)),t.addPolicy((0,YKe.multipartPolicy)(),{afterPhase:"Deserialize"}),t.addPolicy((0,p7t.defaultRetryPolicy)(r.retryOptions),{phase:"Retry"}),t.addPolicy((0,y7t.tracingPolicy)(Object.assign(Object.assign({},r.userAgentOptions),r.loggingOptions)),{afterPhase:"Retry"}),XKe.isNodeLike&&t.addPolicy((0,l7t.redirectPolicy)(r.redirectOptions),{afterPhase:"Retry"}),t.addPolicy((0,a7t.logPolicy)(r.loggingOptions),{afterPhase:"Sign"}),t}});var iQe=O(d6=>{"use strict";Object.defineProperty(d6,"__esModule",{value:!0});d6.getBodyLength=nQe;d6.createNodeHttpClient=E7t;var qge=(Mq(),da(Dq)),Mge=qge.__importStar(require("node:http")),kge=qge.__importStar(require("node:https")),ZKe=qge.__importStar(require("node:zlib")),b7t=require("node:stream"),eQe=F4(),_7t=jq(),Wq=c6(),Vq=zP(),S7t={};function Hq(r){return r&&typeof r.pipe=="function"}function tQe(r){return new Promise(e=>{let t=()=>{e(),r.removeListener("close",t),r.removeListener("end",t),r.removeListener("error",t)};r.on("close",t),r.on("end",t),r.on("error",t)})}function rQe(r){return r&&typeof r.byteLength=="number"}var u6=class extends b7t.Transform{_transform(e,t,n){this.push(e),this.loadedBytes+=e.length;try{this.progressCallback({loadedBytes:this.loadedBytes}),n()}catch(i){n(i)}}constructor(e){super(),this.loadedBytes=0,this.progressCallback=e}},Lge=class{constructor(){this.cachedHttpsAgents=new WeakMap}async sendRequest(e){var t,n,i;let s=new AbortController,o;if(e.abortSignal){if(e.abortSignal.aborted)throw new eQe.AbortError("The operation was aborted.");o=d=>{d.type==="abort"&&s.abort()},e.abortSignal.addEventListener("abort",o)}e.timeout>0&&setTimeout(()=>{s.abort()},e.timeout);let a=e.headers.get("Accept-Encoding"),c=a?.includes("gzip")||a?.includes("deflate"),l=typeof e.body=="function"?e.body():e.body;if(l&&!e.headers.has("Content-Length")){let d=nQe(l);d!==null&&e.headers.set("Content-Length",d)}let u;try{if(l&&e.onUploadProgress){let v=e.onUploadProgress,_=new u6(v);_.on("error",C=>{Vq.logger.error("Error in upload progress",C)}),Hq(l)?l.pipe(_):_.end(l),l=_}let d=await this.makeRequest(e,s,l),p=C7t(d),f={status:(t=d.statusCode)!==null&&t!==void 0?t:0,headers:p,request:e};if(e.method==="HEAD")return d.resume(),f;u=c?P7t(d,p):d;let y=e.onDownloadProgress;if(y){let v=new u6(y);v.on("error",_=>{Vq.logger.error("Error in download progress",_)}),u.pipe(v),u=v}return!((n=e.streamResponseStatusCodes)===null||n===void 0)&&n.has(Number.POSITIVE_INFINITY)||!((i=e.streamResponseStatusCodes)===null||i===void 0)&&i.has(f.status)?f.readableStreamBody=u:f.bodyAsText=await w7t(u),f}finally{if(e.abortSignal&&o){let d=Promise.resolve();Hq(l)&&(d=tQe(l));let p=Promise.resolve();Hq(u)&&(p=tQe(u)),Promise.all([d,p]).then(()=>{var m;o&&((m=e.abortSignal)===null||m===void 0||m.removeEventListener("abort",o))}).catch(m=>{Vq.logger.warning("Error when cleaning up abortListener on httpRequest",m)})}}}makeRequest(e,t,n){var i;let s=new URL(e.url),o=s.protocol!=="https:";if(o&&!e.allowInsecureConnection)throw new Error(`Cannot connect to ${e.url} while allowInsecureConnection is false.`);let c={agent:(i=e.agent)!==null&&i!==void 0?i:this.getOrCreateAgent(e,o),hostname:s.hostname,path:`${s.pathname}${s.search}`,port:s.port,method:e.method,headers:e.headers.toJSON({preserveCase:!0})};return new Promise((l,u)=>{let d=o?Mge.request(c,l):kge.request(c,l);d.once("error",p=>{var m;u(new Wq.RestError(p.message,{code:(m=p.code)!==null&&m!==void 0?m:Wq.RestError.REQUEST_SEND_ERROR,request:e}))}),t.signal.addEventListener("abort",()=>{let p=new eQe.AbortError("The operation was aborted.");d.destroy(p),u(p)}),n&&Hq(n)?n.pipe(d):n?typeof n=="string"||Buffer.isBuffer(n)?d.end(n):rQe(n)?d.end(ArrayBuffer.isView(n)?Buffer.from(n.buffer):Buffer.from(n)):(Vq.logger.error("Unrecognized body type",n),u(new Wq.RestError("Unrecognized body type"))):d.end()})}getOrCreateAgent(e,t){var n;let i=e.disableKeepAlive;if(t)return i?Mge.globalAgent:(this.cachedHttpAgent||(this.cachedHttpAgent=new Mge.Agent({keepAlive:!0})),this.cachedHttpAgent);{if(i&&!e.tlsSettings)return kge.globalAgent;let s=(n=e.tlsSettings)!==null&&n!==void 0?n:S7t,o=this.cachedHttpsAgents.get(s);return o&&o.options.keepAlive===!i||(Vq.logger.info("No cached TLS Agent exist, creating a new Agent"),o=new kge.Agent(Object.assign({keepAlive:!i},s)),this.cachedHttpsAgents.set(s,o)),o}}};function C7t(r){let e=(0,_7t.createHttpHeaders)();for(let t of Object.keys(r.headers)){let n=r.headers[t];Array.isArray(n)?n.length>0&&e.set(t,n[0]):n&&e.set(t,n)}return e}function P7t(r,e){let t=e.get("Content-Encoding");if(t==="gzip"){let n=ZKe.createGunzip();return r.pipe(n),n}else if(t==="deflate"){let n=ZKe.createInflate();return r.pipe(n),n}return r}function w7t(r){return new Promise((e,t)=>{let n=[];r.on("data",i=>{Buffer.isBuffer(i)?n.push(i):n.push(Buffer.from(i))}),r.on("end",()=>{e(Buffer.concat(n).toString("utf8"))}),r.on("error",i=>{i&&i?.name==="AbortError"?t(i):t(new Wq.RestError(`Error reading response as text: ${i.message}`,{code:Wq.RestError.PARSE_ERROR}))})})}function nQe(r){return r?Buffer.isBuffer(r)?r.length:Hq(r)?null:rQe(r)?r.byteLength:typeof r=="string"?Buffer.from(r).length:null:0}function E7t(){return new Lge}});var sQe=O(zge=>{"use strict";Object.defineProperty(zge,"__esModule",{value:!0});zge.createDefaultHttpClient=I7t;var T7t=iQe();function I7t(){return(0,T7t.createNodeHttpClient)()}});var oQe=O(jge=>{"use strict";Object.defineProperty(jge,"__esModule",{value:!0});jge.createPipelineRequest=O7t;var R7t=jq(),x7t=gs(),Fge=class{constructor(e){var t,n,i,s,o,a,c;this.url=e.url,this.body=e.body,this.headers=(t=e.headers)!==null&&t!==void 0?t:(0,R7t.createHttpHeaders)(),this.method=(n=e.method)!==null&&n!==void 0?n:"GET",this.timeout=(i=e.timeout)!==null&&i!==void 0?i:0,this.multipartBody=e.multipartBody,this.formData=e.formData,this.disableKeepAlive=(s=e.disableKeepAlive)!==null&&s!==void 0?s:!1,this.proxySettings=e.proxySettings,this.streamResponseStatusCodes=e.streamResponseStatusCodes,this.withCredentials=(o=e.withCredentials)!==null&&o!==void 0?o:!1,this.abortSignal=e.abortSignal,this.tracingOptions=e.tracingOptions,this.onUploadProgress=e.onUploadProgress,this.onDownloadProgress=e.onDownloadProgress,this.requestId=e.requestId||(0,x7t.randomUUID)(),this.allowInsecureConnection=(a=e.allowInsecureConnection)!==null&&a!==void 0?a:!1,this.enableBrowserStreams=(c=e.enableBrowserStreams)!==null&&c!==void 0?c:!1}};function O7t(r){return new Fge(r)}});var aQe=O(Kq=>{"use strict";Object.defineProperty(Kq,"__esModule",{value:!0});Kq.exponentialRetryPolicyName=void 0;Kq.exponentialRetryPolicy=M7t;var A7t=$4(),N7t=oR(),D7t=i_();Kq.exponentialRetryPolicyName="exponentialRetryPolicy";function M7t(r={}){var e;return(0,N7t.retryPolicy)([(0,A7t.exponentialRetryStrategy)(Object.assign(Object.assign({},r),{ignoreSystemErrors:!0}))],{maxRetries:(e=r.maxRetries)!==null&&e!==void 0?e:D7t.DEFAULT_RETRY_POLICY_COUNT})}});var cQe=O(bR=>{"use strict";Object.defineProperty(bR,"__esModule",{value:!0});bR.systemErrorRetryPolicyName=void 0;bR.systemErrorRetryPolicy=z7t;var k7t=$4(),L7t=oR(),q7t=i_();bR.systemErrorRetryPolicyName="systemErrorRetryPolicy";function z7t(r={}){var e;return{name:bR.systemErrorRetryPolicyName,sendRequest:(0,L7t.retryPolicy)([(0,k7t.exponentialRetryStrategy)(Object.assign(Object.assign({},r),{ignoreHttpStatusCodes:!0}))],{maxRetries:(e=r.maxRetries)!==null&&e!==void 0?e:q7t.DEFAULT_RETRY_POLICY_COUNT}).sendRequest}}});var lQe=O(_R=>{"use strict";Object.defineProperty(_R,"__esModule",{value:!0});_R.throttlingRetryPolicyName=void 0;_R.throttlingRetryPolicy=B7t;var F7t=G4(),j7t=oR(),U7t=i_();_R.throttlingRetryPolicyName="throttlingRetryPolicy";function B7t(r={}){var e;return{name:_R.throttlingRetryPolicyName,sendRequest:(0,j7t.retryPolicy)([(0,F7t.throttlingRetryStrategy)()],{maxRetries:(e=r.maxRetries)!==null&&e!==void 0?e:U7t.DEFAULT_RETRY_POLICY_COUNT}).sendRequest}}});var Uge=O(SR=>{"use strict";Object.defineProperty(SR,"__esModule",{value:!0});SR.DEFAULT_CYCLER_OPTIONS=void 0;SR.createTokenCycler=V7t;var G7t=U4();SR.DEFAULT_CYCLER_OPTIONS={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:1e3*60*2};async function $7t(r,e,t){async function n(){if(Date.now()<t)try{return await r()}catch{return null}else{let s=await r();if(s===null)throw new Error("Failed to refresh access token.");return s}}let i=await n();for(;i===null;)await(0,G7t.delay)(e),i=await n();return i}function V7t(r,e){let t=null,n=null,i,s=Object.assign(Object.assign({},SR.DEFAULT_CYCLER_OPTIONS),e),o={get isRefreshing(){return t!==null},get shouldRefresh(){var c;return o.isRefreshing?!1:n?.refreshAfterTimestamp&&n.refreshAfterTimestamp<Date.now()?!0:((c=n?.expiresOnTimestamp)!==null&&c!==void 0?c:0)-s.refreshWindowInMs<Date.now()},get mustRefresh(){return n===null||n.expiresOnTimestamp-s.forcedRefreshWindowInMs<Date.now()}};function a(c,l){var u;return o.isRefreshing||(t=$7t(()=>r.getToken(c,l),s.retryIntervalInMs,(u=n?.expiresOnTimestamp)!==null&&u!==void 0?u:Date.now()).then(p=>(t=null,n=p,i=l.tenantId,n)).catch(p=>{throw t=null,n=null,i=void 0,p})),t}return async(c,l)=>{let u=!!l.claims,d=i!==l.tenantId;return u&&(n=null),d||u||o.mustRefresh?a(c,l):(o.shouldRefresh&&a(c,l),n)}}});var uQe=O(CR=>{"use strict";Object.defineProperty(CR,"__esModule",{value:!0});CR.bearerTokenAuthenticationPolicyName=void 0;CR.bearerTokenAuthenticationPolicy=Y7t;var H7t=Uge(),W7t=zP();CR.bearerTokenAuthenticationPolicyName="bearerTokenAuthenticationPolicy";async function K7t(r){let{scopes:e,getAccessToken:t,request:n}=r,i={abortSignal:n.abortSignal,tracingOptions:n.tracingOptions},s=await t(e,i);s&&r.request.headers.set("Authorization",`Bearer ${s.token}`)}function Q7t(r){let e=r.headers.get("WWW-Authenticate");if(r.status===401&&e)return e}function Y7t(r){var e;let{credential:t,scopes:n,challengeCallbacks:i}=r,s=r.logger||W7t.logger,o=Object.assign({authorizeRequest:(e=i?.authorizeRequest)!==null&&e!==void 0?e:K7t,authorizeRequestOnChallenge:i?.authorizeRequestOnChallenge},i),a=t?(0,H7t.createTokenCycler)(t):()=>Promise.resolve(null);return{name:CR.bearerTokenAuthenticationPolicyName,async sendRequest(c,l){if(!c.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");await o.authorizeRequest({scopes:Array.isArray(n)?n:[n],request:c,getAccessToken:a,logger:s});let u,d;try{u=await l(c)}catch(p){d=p,u=p.response}if(o.authorizeRequestOnChallenge&&u?.status===401&&Q7t(u)&&await o.authorizeRequestOnChallenge({scopes:Array.isArray(n)?n:[n],request:c,response:u,getAccessToken:a,logger:s}))return l(c);if(d)throw d;return u}}}});var dQe=O(PR=>{"use strict";Object.defineProperty(PR,"__esModule",{value:!0});PR.ndJsonPolicyName=void 0;PR.ndJsonPolicy=X7t;PR.ndJsonPolicyName="ndJsonPolicy";function X7t(){return{name:PR.ndJsonPolicyName,async sendRequest(r,e){if(typeof r.body=="string"&&r.body.startsWith("[")){let t=JSON.parse(r.body);Array.isArray(t)&&(r.body=t.map(n=>JSON.stringify(n)+`
`).join(""))}return e(r)}}}});var mQe=O(UP=>{"use strict";Object.defineProperty(UP,"__esModule",{value:!0});UP.auxiliaryAuthenticationHeaderPolicyName=void 0;UP.auxiliaryAuthenticationHeaderPolicy=tZt;var J7t=Uge(),Z7t=zP();UP.auxiliaryAuthenticationHeaderPolicyName="auxiliaryAuthenticationHeaderPolicy";var pQe="x-ms-authorization-auxiliary";async function eZt(r){var e,t;let{scopes:n,getAccessToken:i,request:s}=r,o={abortSignal:s.abortSignal,tracingOptions:s.tracingOptions};return(t=(e=await i(n,o))===null||e===void 0?void 0:e.token)!==null&&t!==void 0?t:""}function tZt(r){let{credentials:e,scopes:t}=r,n=r.logger||Z7t.logger,i=new WeakMap;return{name:UP.auxiliaryAuthenticationHeaderPolicyName,async sendRequest(s,o){if(!s.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication for auxiliary header is not permitted for non-TLS protected (non-https) URLs.");if(!e||e.length===0)return n.info(`${UP.auxiliaryAuthenticationHeaderPolicyName} header will not be set due to empty credentials.`),o(s);let a=[];for(let l of e){let u=i.get(l);u||(u=(0,J7t.createTokenCycler)(l),i.set(l,u)),a.push(eZt({scopes:Array.isArray(t)?t:[t],request:s,getAccessToken:u,logger:n}))}let c=(await Promise.all(a)).filter(l=>!!l);return c.length===0?(n.warning(`None of the auxiliary tokens are valid. ${pQe} header will not be set.`),o(s)):(s.headers.set(pQe,c.map(l=>`Bearer ${l}`).join(", ")),o(s))}}}});var Qq=O(lr=>{"use strict";Object.defineProperty(lr,"__esModule",{value:!0});lr.createFileFromStream=lr.createFile=lr.auxiliaryAuthenticationHeaderPolicyName=lr.auxiliaryAuthenticationHeaderPolicy=lr.ndJsonPolicyName=lr.ndJsonPolicy=lr.bearerTokenAuthenticationPolicyName=lr.bearerTokenAuthenticationPolicy=lr.formDataPolicyName=lr.formDataPolicy=lr.tlsPolicyName=lr.tlsPolicy=lr.userAgentPolicyName=lr.userAgentPolicy=lr.defaultRetryPolicy=lr.tracingPolicyName=lr.tracingPolicy=lr.retryPolicy=lr.throttlingRetryPolicyName=lr.throttlingRetryPolicy=lr.systemErrorRetryPolicyName=lr.systemErrorRetryPolicy=lr.redirectPolicyName=lr.redirectPolicy=lr.getDefaultProxySettings=lr.proxyPolicyName=lr.proxyPolicy=lr.multipartPolicyName=lr.multipartPolicy=lr.logPolicyName=lr.logPolicy=lr.setClientRequestIdPolicyName=lr.setClientRequestIdPolicy=lr.exponentialRetryPolicyName=lr.exponentialRetryPolicy=lr.decompressResponsePolicyName=lr.decompressResponsePolicy=lr.isRestError=lr.RestError=lr.createPipelineRequest=lr.createHttpHeaders=lr.createDefaultHttpClient=lr.createPipelineFromOptions=lr.createEmptyPipeline=void 0;var rZt=qfe();Object.defineProperty(lr,"createEmptyPipeline",{enumerable:!0,get:function(){return rZt.createEmptyPipeline}});var nZt=JKe();Object.defineProperty(lr,"createPipelineFromOptions",{enumerable:!0,get:function(){return nZt.createPipelineFromOptions}});var iZt=sQe();Object.defineProperty(lr,"createDefaultHttpClient",{enumerable:!0,get:function(){return iZt.createDefaultHttpClient}});var sZt=jq();Object.defineProperty(lr,"createHttpHeaders",{enumerable:!0,get:function(){return sZt.createHttpHeaders}});var oZt=oQe();Object.defineProperty(lr,"createPipelineRequest",{enumerable:!0,get:function(){return oZt.createPipelineRequest}});var hQe=c6();Object.defineProperty(lr,"RestError",{enumerable:!0,get:function(){return hQe.RestError}});Object.defineProperty(lr,"isRestError",{enumerable:!0,get:function(){return hQe.isRestError}});var fQe=pge();Object.defineProperty(lr,"decompressResponsePolicy",{enumerable:!0,get:function(){return fQe.decompressResponsePolicy}});Object.defineProperty(lr,"decompressResponsePolicyName",{enumerable:!0,get:function(){return fQe.decompressResponsePolicyName}});var gQe=aQe();Object.defineProperty(lr,"exponentialRetryPolicy",{enumerable:!0,get:function(){return gQe.exponentialRetryPolicy}});Object.defineProperty(lr,"exponentialRetryPolicyName",{enumerable:!0,get:function(){return gQe.exponentialRetryPolicyName}});var yQe=Ige();Object.defineProperty(lr,"setClientRequestIdPolicy",{enumerable:!0,get:function(){return yQe.setClientRequestIdPolicy}});Object.defineProperty(lr,"setClientRequestIdPolicyName",{enumerable:!0,get:function(){return yQe.setClientRequestIdPolicyName}});var vQe=rge();Object.defineProperty(lr,"logPolicy",{enumerable:!0,get:function(){return vQe.logPolicy}});Object.defineProperty(lr,"logPolicyName",{enumerable:!0,get:function(){return vQe.logPolicyName}});var bQe=dge();Object.defineProperty(lr,"multipartPolicy",{enumerable:!0,get:function(){return bQe.multipartPolicy}});Object.defineProperty(lr,"multipartPolicyName",{enumerable:!0,get:function(){return bQe.multipartPolicyName}});var Bge=Tge();Object.defineProperty(lr,"proxyPolicy",{enumerable:!0,get:function(){return Bge.proxyPolicy}});Object.defineProperty(lr,"proxyPolicyName",{enumerable:!0,get:function(){return Bge.proxyPolicyName}});Object.defineProperty(lr,"getDefaultProxySettings",{enumerable:!0,get:function(){return Bge.getDefaultProxySettings}});var _Qe=nge();Object.defineProperty(lr,"redirectPolicy",{enumerable:!0,get:function(){return _Qe.redirectPolicy}});Object.defineProperty(lr,"redirectPolicyName",{enumerable:!0,get:function(){return _Qe.redirectPolicyName}});var SQe=cQe();Object.defineProperty(lr,"systemErrorRetryPolicy",{enumerable:!0,get:function(){return SQe.systemErrorRetryPolicy}});Object.defineProperty(lr,"systemErrorRetryPolicyName",{enumerable:!0,get:function(){return SQe.systemErrorRetryPolicyName}});var CQe=lQe();Object.defineProperty(lr,"throttlingRetryPolicy",{enumerable:!0,get:function(){return CQe.throttlingRetryPolicy}});Object.defineProperty(lr,"throttlingRetryPolicyName",{enumerable:!0,get:function(){return CQe.throttlingRetryPolicyName}});var aZt=oR();Object.defineProperty(lr,"retryPolicy",{enumerable:!0,get:function(){return aZt.retryPolicy}});var PQe=Nge();Object.defineProperty(lr,"tracingPolicy",{enumerable:!0,get:function(){return PQe.tracingPolicy}});Object.defineProperty(lr,"tracingPolicyName",{enumerable:!0,get:function(){return PQe.tracingPolicyName}});var cZt=gge();Object.defineProperty(lr,"defaultRetryPolicy",{enumerable:!0,get:function(){return cZt.defaultRetryPolicy}});var wQe=age();Object.defineProperty(lr,"userAgentPolicy",{enumerable:!0,get:function(){return wQe.userAgentPolicy}});Object.defineProperty(lr,"userAgentPolicyName",{enumerable:!0,get:function(){return wQe.userAgentPolicyName}});var EQe=Rge();Object.defineProperty(lr,"tlsPolicy",{enumerable:!0,get:function(){return EQe.tlsPolicy}});Object.defineProperty(lr,"tlsPolicyName",{enumerable:!0,get:function(){return EQe.tlsPolicyName}});var TQe=bge();Object.defineProperty(lr,"formDataPolicy",{enumerable:!0,get:function(){return TQe.formDataPolicy}});Object.defineProperty(lr,"formDataPolicyName",{enumerable:!0,get:function(){return TQe.formDataPolicyName}});var IQe=uQe();Object.defineProperty(lr,"bearerTokenAuthenticationPolicy",{enumerable:!0,get:function(){return IQe.bearerTokenAuthenticationPolicy}});Object.defineProperty(lr,"bearerTokenAuthenticationPolicyName",{enumerable:!0,get:function(){return IQe.bearerTokenAuthenticationPolicyName}});var RQe=dQe();Object.defineProperty(lr,"ndJsonPolicy",{enumerable:!0,get:function(){return RQe.ndJsonPolicy}});Object.defineProperty(lr,"ndJsonPolicyName",{enumerable:!0,get:function(){return RQe.ndJsonPolicyName}});var xQe=mQe();Object.defineProperty(lr,"auxiliaryAuthenticationHeaderPolicy",{enumerable:!0,get:function(){return xQe.auxiliaryAuthenticationHeaderPolicy}});Object.defineProperty(lr,"auxiliaryAuthenticationHeaderPolicyName",{enumerable:!0,get:function(){return xQe.auxiliaryAuthenticationHeaderPolicyName}});var OQe=cge();Object.defineProperty(lr,"createFile",{enumerable:!0,get:function(){return OQe.createFile}});Object.defineProperty(lr,"createFileFromStream",{enumerable:!0,get:function(){return OQe.createFileFromStream}})});var AQe=O(p6=>{"use strict";Object.defineProperty(p6,"__esModule",{value:!0});p6.state=void 0;p6.state={operationRequestMap:new WeakMap}});var Yq=O(wR=>{"use strict";Object.defineProperty(wR,"__esModule",{value:!0});wR.getOperationRequestInfo=wR.getOperationArgumentValueFromParameter=void 0;var NQe=AQe();function MQe(r,e,t){let n=e.parameterPath,i=e.mapper,s;if(typeof n=="string"&&(n=[n]),Array.isArray(n)){if(n.length>0)if(i.isConstant)s=i.defaultValue;else{let o=DQe(r,n);!o.propertyFound&&t&&(o=DQe(t,n));let a=!1;o.propertyFound||(a=i.required||n[0]==="options"&&n.length===2),s=a?i.defaultValue:o.propertyValue}}else{i.required&&(s={});for(let o in n){let a=i.type.modelProperties[o],c=n[o],l=MQe(r,{parameterPath:c,mapper:a},t);l!==void 0&&(s||(s={}),s[o]=l)}}return s}wR.getOperationArgumentValueFromParameter=MQe;function DQe(r,e){let t={propertyFound:!1},n=0;for(;n<e.length;++n){let i=e[n];if(r&&i in r)r=r[i];else break}return n===e.length&&(t.propertyValue=r,t.propertyFound=!0),t}var kQe=Symbol.for("@azure/core-client original request");function lZt(r){return kQe in r}function LQe(r){if(lZt(r))return LQe(r[kQe]);let e=NQe.state.operationRequestMap.get(r);return e||(e={},NQe.state.operationRequestMap.set(r,e)),e}wR.getOperationRequestInfo=LQe});var $ge=O(BP=>{"use strict";Object.defineProperty(BP,"__esModule",{value:!0});BP.deserializationPolicy=BP.deserializationPolicyName=void 0;var uZt=kq(),m6=Qq(),qQe=Lq(),Gge=Yq(),dZt=["application/json","text/json"],pZt=["application/xml","application/atom+xml"];BP.deserializationPolicyName="deserializationPolicy";function mZt(r={}){var e,t,n,i,s,o,a;let c=(t=(e=r.expectedContentTypes)===null||e===void 0?void 0:e.json)!==null&&t!==void 0?t:dZt,l=(i=(n=r.expectedContentTypes)===null||n===void 0?void 0:n.xml)!==null&&i!==void 0?i:pZt,u=r.parseXML,d=r.serializerOptions,p={xml:{rootName:(s=d?.xml.rootName)!==null&&s!==void 0?s:"",includeRoot:(o=d?.xml.includeRoot)!==null&&o!==void 0?o:!1,xmlCharKey:(a=d?.xml.xmlCharKey)!==null&&a!==void 0?a:uZt.XML_CHARKEY}};return{name:BP.deserializationPolicyName,async sendRequest(m,f){let y=await f(m);return gZt(c,l,y,p,u)}}}BP.deserializationPolicy=mZt;function hZt(r){let e,t=r.request,n=(0,Gge.getOperationRequestInfo)(t),i=n?.operationSpec;return i&&(n?.operationResponseGetter?e=n?.operationResponseGetter(i,r):e=i.responses[r.status]),e}function fZt(r){let e=r.request,t=(0,Gge.getOperationRequestInfo)(e),n=t?.shouldDeserialize,i;return n===void 0?i=!0:typeof n=="boolean"?i=n:i=n(r),i}async function gZt(r,e,t,n,i){let s=await bZt(r,e,t,n,i);if(!fZt(s))return s;let o=(0,Gge.getOperationRequestInfo)(s.request),a=o?.operationSpec;if(!a||!a.responses)return s;let c=hZt(s),{error:l,shouldReturnResponse:u}=vZt(s,a,c,n);if(l)throw l;if(u)return s;if(c){if(c.bodyMapper){let d=s.parsedBody;a.isXML&&c.bodyMapper.type.name===qQe.MapperTypeNames.Sequence&&(d=typeof d=="object"?d[c.bodyMapper.xmlElementName]:[]);try{s.parsedBody=a.serializer.deserialize(c.bodyMapper,d,"operationRes.parsedBody",n)}catch(p){throw new m6.RestError(`Error ${p} occurred in deserializing the responseBody - ${s.bodyAsText}`,{statusCode:s.status,request:s.request,response:s})}}else a.httpMethod==="HEAD"&&(s.parsedBody=t.status>=200&&t.status<300);c.headersMapper&&(s.parsedHeaders=a.serializer.deserialize(c.headersMapper,s.headers.toJSON(),"operationRes.parsedHeaders",{xml:{},ignoreUnknownProperties:!0}))}return s}function yZt(r){let e=Object.keys(r.responses);return e.length===0||e.length===1&&e[0]==="default"}function vZt(r,e,t,n){var i;let s=200<=r.status&&r.status<300;if(yZt(e)?s:!!t)if(t){if(!t.isError)return{error:null,shouldReturnResponse:!1}}else return{error:null,shouldReturnResponse:!1};let a=t??e.responses.default,c=!((i=r.request.streamResponseStatusCodes)===null||i===void 0)&&i.has(r.status)?`Unexpected status code: ${r.status}`:r.bodyAsText,l=new m6.RestError(c,{statusCode:r.status,request:r.request,response:r});if(!a)throw l;let u=a.bodyMapper,d=a.headersMapper;try{if(r.parsedBody){let p=r.parsedBody,m;if(u){let y=p;if(e.isXML&&u.type.name===qQe.MapperTypeNames.Sequence){y=[];let v=u.xmlElementName;typeof p=="object"&&v&&(y=p[v])}m=e.serializer.deserialize(u,y,"error.response.parsedBody",n)}let f=p.error||m||p;l.code=f.code,f.message&&(l.message=f.message),u&&(l.response.parsedBody=m)}r.headers&&d&&(l.response.parsedHeaders=e.serializer.deserialize(d,r.headers.toJSON(),"operationRes.parsedHeaders"))}catch(p){l.message=`Error "${p.message}" occurred in deserializing the responseBody - "${r.bodyAsText}" for the default response.`}return{error:l,shouldReturnResponse:!1}}async function bZt(r,e,t,n,i){var s;if(!(!((s=t.request.streamResponseStatusCodes)===null||s===void 0)&&s.has(t.status))&&t.bodyAsText){let o=t.bodyAsText,a=t.headers.get("Content-Type")||"",c=a?a.split(";").map(l=>l.toLowerCase()):[];try{if(c.length===0||c.some(l=>r.indexOf(l)!==-1))return t.parsedBody=JSON.parse(o),t;if(c.some(l=>e.indexOf(l)!==-1)){if(!i)throw new Error("Parsing XML not supported.");let l=await i(o,n.xml);return t.parsedBody=l,t}}catch(l){let u=`Error "${l}" occurred while parsing the response body - ${t.bodyAsText}.`,d=l.code||m6.RestError.PARSE_ERROR;throw new m6.RestError(u,{code:d,statusCode:t.status,request:t.request,response:t})}}return t}});var h6=O(ER=>{"use strict";Object.defineProperty(ER,"__esModule",{value:!0});ER.getPathStringFromParameter=ER.getStreamingResponseStatusCodes=void 0;var _Zt=Lq();function SZt(r){let e=new Set;for(let t in r.responses){let n=r.responses[t];n.bodyMapper&&n.bodyMapper.type.name===_Zt.MapperTypeNames.Stream&&e.add(Number(t))}return e}ER.getStreamingResponseStatusCodes=SZt;function CZt(r){let{parameterPath:e,mapper:t}=r,n;return typeof e=="string"?n=e:Array.isArray(e)?n=e.join("."):n=t.serializedName,n}ER.getPathStringFromParameter=CZt});var Wge=O(Wm=>{"use strict";Object.defineProperty(Wm,"__esModule",{value:!0});Wm.serializeRequestBody=Wm.serializeHeaders=Wm.serializationPolicy=Wm.serializationPolicyName=void 0;var Hge=kq(),f6=Yq(),Vge=Lq(),Xq=h6();Wm.serializationPolicyName="serializationPolicy";function PZt(r={}){let e=r.stringifyXML;return{name:Wm.serializationPolicyName,async sendRequest(t,n){let i=(0,f6.getOperationRequestInfo)(t),s=i?.operationSpec,o=i?.operationArguments;return s&&o&&(zQe(t,o,s),FQe(t,o,s,e)),n(t)}}}Wm.serializationPolicy=PZt;function zQe(r,e,t){var n,i;if(t.headerParameters)for(let o of t.headerParameters){let a=(0,f6.getOperationArgumentValueFromParameter)(e,o);if(a!=null||o.mapper.required){a=t.serializer.serialize(o.mapper,a,(0,Xq.getPathStringFromParameter)(o));let c=o.mapper.headerCollectionPrefix;if(c)for(let l of Object.keys(a))r.headers.set(c+l,a[l]);else r.headers.set(o.mapper.serializedName||(0,Xq.getPathStringFromParameter)(o),a)}}let s=(i=(n=e.options)===null||n===void 0?void 0:n.requestOptions)===null||i===void 0?void 0:i.customHeaders;if(s)for(let o of Object.keys(s))r.headers.set(o,s[o])}Wm.serializeHeaders=zQe;function FQe(r,e,t,n=function(){throw new Error("XML serialization unsupported!")}){var i,s,o,a,c;let l=(i=e.options)===null||i===void 0?void 0:i.serializerOptions,u={xml:{rootName:(s=l?.xml.rootName)!==null&&s!==void 0?s:"",includeRoot:(o=l?.xml.includeRoot)!==null&&o!==void 0?o:!1,xmlCharKey:(a=l?.xml.xmlCharKey)!==null&&a!==void 0?a:Hge.XML_CHARKEY}},d=u.xml.xmlCharKey;if(t.requestBody&&t.requestBody.mapper){r.body=(0,f6.getOperationArgumentValueFromParameter)(e,t.requestBody);let p=t.requestBody.mapper,{required:m,serializedName:f,xmlName:y,xmlElementName:v,xmlNamespace:_,xmlNamespacePrefix:C,nullable:P}=p,w=p.type.name;try{if(r.body!==void 0&&r.body!==null||P&&r.body===null||m){let R=(0,Xq.getPathStringFromParameter)(t.requestBody);r.body=t.serializer.serialize(p,r.body,R,u);let I=w===Vge.MapperTypeNames.Stream;if(t.isXML){let z=C?`xmlns:${C}`:"xmlns",G=wZt(_,z,w,r.body,u);w===Vge.MapperTypeNames.Sequence?r.body=n(EZt(G,v||y||f,z,_),{rootName:y||f,xmlCharKey:d}):I||(r.body=n(G,{rootName:y||f,xmlCharKey:d}))}else{if(w===Vge.MapperTypeNames.String&&(!((c=t.contentType)===null||c===void 0)&&c.match("text/plain")||t.mediaType==="text"))return;I||(r.body=JSON.stringify(r.body))}}}catch(R){throw new Error(`Error "${R.message}" occurred in serializing the payload - ${JSON.stringify(f,void 0,"  ")}.`)}}else if(t.formDataParameters&&t.formDataParameters.length>0){r.formData={};for(let p of t.formDataParameters){let m=(0,f6.getOperationArgumentValueFromParameter)(e,p);if(m!=null){let f=p.mapper.serializedName||(0,Xq.getPathStringFromParameter)(p);r.formData[f]=t.serializer.serialize(p.mapper,m,(0,Xq.getPathStringFromParameter)(p),u)}}}}Wm.serializeRequestBody=FQe;function wZt(r,e,t,n,i){if(r&&!["Composite","Sequence","Dictionary"].includes(t)){let s={};return s[i.xml.xmlCharKey]=n,s[Hge.XML_ATTRKEY]={[e]:r},s}return n}function EZt(r,e,t,n){if(Array.isArray(r)||(r=[r]),!t||!n)return{[e]:r};let i={[e]:r};return i[Hge.XML_ATTRKEY]={[t]:n},i}});var Kge=O(g6=>{"use strict";Object.defineProperty(g6,"__esModule",{value:!0});g6.createClientPipeline=void 0;var TZt=$ge(),jQe=Qq(),IZt=Wge();function RZt(r={}){let e=(0,jQe.createPipelineFromOptions)(r??{});return r.credentialOptions&&e.addPolicy((0,jQe.bearerTokenAuthenticationPolicy)({credential:r.credentialOptions.credential,scopes:r.credentialOptions.credentialScopes})),e.addPolicy((0,IZt.serializationPolicy)(r.serializationOptions),{phase:"Serialize"}),e.addPolicy((0,TZt.deserializationPolicy)(r.deserializationOptions),{phase:"Deserialize"}),e}g6.createClientPipeline=RZt});var UQe=O(y6=>{"use strict";Object.defineProperty(y6,"__esModule",{value:!0});y6.getCachedDefaultHttpClient=void 0;var xZt=Qq(),Qge;function OZt(){return Qge||(Qge=(0,xZt.createDefaultHttpClient)()),Qge}y6.getCachedDefaultHttpClient=OZt});var VQe=O(TR=>{"use strict";Object.defineProperty(TR,"__esModule",{value:!0});TR.appendQueryParams=TR.getRequestUrl=void 0;var GQe=Yq(),Yge=h6(),AZt={CSV:",",SSV:" ",Multi:"Multi",TSV:"	",Pipes:"|"};function NZt(r,e,t,n){let i=DZt(e,t,n),s=!1,o=BQe(r,i);if(e.path){let l=BQe(e.path,i);e.path==="/{nextLink}"&&l.startsWith("/")&&(l=l.substring(1)),MZt(l)?(o=l,s=!0):o=kZt(o,l)}let{queryParams:a,sequenceParams:c}=LZt(e,t,n);return o=$Qe(o,a,c,s),o}TR.getRequestUrl=NZt;function BQe(r,e){let t=r;for(let[n,i]of e)t=t.split(n).join(i);return t}function DZt(r,e,t){var n;let i=new Map;if(!((n=r.urlParameters)===null||n===void 0)&&n.length)for(let s of r.urlParameters){let o=(0,GQe.getOperationArgumentValueFromParameter)(e,s,t),a=(0,Yge.getPathStringFromParameter)(s);o=r.serializer.serialize(s.mapper,o,a),s.skipEncoding||(o=encodeURIComponent(o)),i.set(`{${s.mapper.serializedName||a}}`,o)}return i}function MZt(r){return r.includes("://")}function kZt(r,e){if(!e)return r;let t=new URL(r),n=t.pathname;n.endsWith("/")||(n=`${n}/`),e.startsWith("/")&&(e=e.substring(1));let i=e.indexOf("?");if(i!==-1){let s=e.substring(0,i),o=e.substring(i+1);n=n+s,o&&(t.search=t.search?`${t.search}&${o}`:o)}else n=n+e;return t.pathname=n,t.toString()}function LZt(r,e,t){var n;let i=new Map,s=new Set;if(!((n=r.queryParameters)===null||n===void 0)&&n.length)for(let o of r.queryParameters){o.mapper.type.name==="Sequence"&&o.mapper.serializedName&&s.add(o.mapper.serializedName);let a=(0,GQe.getOperationArgumentValueFromParameter)(e,o,t);if(a!=null||o.mapper.required){a=r.serializer.serialize(o.mapper,a,(0,Yge.getPathStringFromParameter)(o));let c=o.collectionFormat?AZt[o.collectionFormat]:"";if(Array.isArray(a)&&(a=a.map(l=>l??"")),o.collectionFormat==="Multi"&&a.length===0)continue;Array.isArray(a)&&(o.collectionFormat==="SSV"||o.collectionFormat==="TSV")&&(a=a.join(c)),o.skipEncoding||(Array.isArray(a)?a=a.map(l=>encodeURIComponent(l)):a=encodeURIComponent(a)),Array.isArray(a)&&(o.collectionFormat==="CSV"||o.collectionFormat==="Pipes")&&(a=a.join(c)),i.set(o.mapper.serializedName||(0,Yge.getPathStringFromParameter)(o),a)}}return{queryParams:i,sequenceParams:s}}function qZt(r){let e=new Map;if(!r||r[0]!=="?")return e;r=r.slice(1);let t=r.split("&");for(let n of t){let[i,s]=n.split("=",2),o=e.get(i);o?Array.isArray(o)?o.push(s):e.set(i,[o,s]):e.set(i,s)}return e}function $Qe(r,e,t,n=!1){if(e.size===0)return r;let i=new URL(r),s=qZt(i.search);for(let[a,c]of e){let l=s.get(a);if(Array.isArray(l))if(Array.isArray(c)){l.push(...c);let u=new Set(l);s.set(a,Array.from(u))}else l.push(c);else l?(Array.isArray(c)?c.unshift(l):t.has(a)&&s.set(a,[l,c]),n||s.set(a,c)):s.set(a,c)}let o=[];for(let[a,c]of s)if(typeof c=="string")o.push(`${a}=${c}`);else if(Array.isArray(c))for(let l of c)o.push(`${a}=${l}`);else o.push(`${a}=${c}`);return i.search=o.length?`?${o.join("&")}`:"",i.toString()}TR.appendQueryParams=$Qe});var Xge=O(v6=>{"use strict";Object.defineProperty(v6,"__esModule",{value:!0});v6.logger=void 0;var zZt=lu();v6.logger=(0,zZt.createClientLogger)("core-client")});var WQe=O(b6=>{"use strict";Object.defineProperty(b6,"__esModule",{value:!0});b6.ServiceClient=void 0;var FZt=Qq(),jZt=Kge(),HQe=Nfe(),UZt=UQe(),BZt=Yq(),GZt=VQe(),$Zt=h6(),VZt=Xge(),Jge=class{constructor(e={}){var t,n;if(this._requestContentType=e.requestContentType,this._endpoint=(t=e.endpoint)!==null&&t!==void 0?t:e.baseUri,e.baseUri&&VZt.logger.warning("The baseUri option for SDK Clients has been deprecated, please use endpoint instead."),this._allowInsecureConnection=e.allowInsecureConnection,this._httpClient=e.httpClient||(0,UZt.getCachedDefaultHttpClient)(),this.pipeline=e.pipeline||HZt(e),!((n=e.additionalPolicies)===null||n===void 0)&&n.length)for(let{policy:i,position:s}of e.additionalPolicies){let o=s==="perRetry"?"Sign":void 0;this.pipeline.addPolicy(i,{afterPhase:o})}}async sendRequest(e){return this.pipeline.sendRequest(this._httpClient,e)}async sendOperationRequest(e,t){let n=t.baseUrl||this._endpoint;if(!n)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a endpoint string property that contains the base URL to use.");let i=(0,GZt.getRequestUrl)(n,t,e,this),s=(0,FZt.createPipelineRequest)({url:i});s.method=t.httpMethod;let o=(0,BZt.getOperationRequestInfo)(s);o.operationSpec=t,o.operationArguments=e;let a=t.contentType||this._requestContentType;a&&t.requestBody&&s.headers.set("Content-Type",a);let c=e.options;if(c){let l=c.requestOptions;l&&(l.timeout&&(s.timeout=l.timeout),l.onUploadProgress&&(s.onUploadProgress=l.onUploadProgress),l.onDownloadProgress&&(s.onDownloadProgress=l.onDownloadProgress),l.shouldDeserialize!==void 0&&(o.shouldDeserialize=l.shouldDeserialize),l.allowInsecureConnection&&(s.allowInsecureConnection=!0)),c.abortSignal&&(s.abortSignal=c.abortSignal),c.tracingOptions&&(s.tracingOptions=c.tracingOptions)}this._allowInsecureConnection&&(s.allowInsecureConnection=!0),s.streamResponseStatusCodes===void 0&&(s.streamResponseStatusCodes=(0,$Zt.getStreamingResponseStatusCodes)(t));try{let l=await this.sendRequest(s),u=(0,HQe.flattenResponse)(l,t.responses[l.status]);return c?.onResponse&&c.onResponse(l,u),u}catch(l){if(typeof l=="object"&&l?.response){let u=l.response,d=(0,HQe.flattenResponse)(u,t.responses[l.statusCode]||t.responses.default);l.details=d,c?.onResponse&&c.onResponse(u,d,l)}throw l}}};b6.ServiceClient=Jge;function HZt(r){let e=WZt(r),t=r.credential&&e?{credentialScopes:e,credential:r.credential}:void 0;return(0,jZt.createClientPipeline)(Object.assign(Object.assign({},r),{credentialOptions:t}))}function WZt(r){if(r.credentialScopes)return r.credentialScopes;if(r.endpoint)return`${r.endpoint}/.default`;if(r.baseUri)return`${r.baseUri}/.default`;if(r.credential&&!r.credentialScopes)throw new Error("When using credentials, the ServiceClientOptions must contain either a endpoint or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy")}});var QQe=O(IR=>{"use strict";Object.defineProperty(IR,"__esModule",{value:!0});IR.authorizeRequestOnClaimChallenge=IR.parseCAEChallenge=void 0;var KZt=Xge(),QZt=Afe();function KQe(r){return`, ${r.trim()}`.split(", Bearer ").filter(t=>t).map(t=>`${t.trim()}, `.split('", ').filter(s=>s).map(s=>(([o,a])=>({[o]:a}))(s.trim().split('="'))).reduce((s,o)=>Object.assign(Object.assign({},s),o),{}))}IR.parseCAEChallenge=KQe;async function YZt(r){let{scopes:e,response:t}=r,n=r.logger||KZt.logger,i=t.headers.get("WWW-Authenticate");if(!i)return n.info("The WWW-Authenticate header was missing. Failed to perform the Continuous Access Evaluation authentication flow."),!1;let o=(KQe(i)||[]).find(c=>c.claims);if(!o)return n.info('The WWW-Authenticate header was missing the necessary "claims" to perform the Continuous Access Evaluation authentication flow.'),!1;let a=await r.getAccessToken(o.scope?[o.scope]:e,{claims:(0,QZt.decodeStringToString)(o.claims)});return a?(r.request.headers.set("Authorization",`Bearer ${a.token}`),!0):!1}IR.authorizeRequestOnClaimChallenge=YZt});var XQe=O(_6=>{"use strict";Object.defineProperty(_6,"__esModule",{value:!0});_6.authorizeRequestOnTenantChallenge=void 0;var YQe={DefaultScope:"/.default",HeaderConstants:{AUTHORIZATION:"authorization"}};function XZt(r){return/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/.test(r)}var JZt=async r=>{let e=ner(r.request),t=ter(r.response);if(t){let n=rer(t),i=eer(r,n),s=ZZt(n);if(!s)return!1;let o=await r.getAccessToken(i,Object.assign(Object.assign({},e),{tenantId:s}));return o?(r.request.headers.set(YQe.HeaderConstants.AUTHORIZATION,`Bearer ${o.token}`),!0):!1}return!1};_6.authorizeRequestOnTenantChallenge=JZt;function ZZt(r){let n=new URL(r.authorization_uri).pathname.split("/")[1];if(n&&XZt(n))return n}function eer(r,e){if(!e.resource_id)return r.scopes;let t=new URL(e.resource_id);t.pathname=YQe.DefaultScope;let n=t.toString();return n==="https://disk.azure.com/.default"&&(n="https://disk.azure.com//.default"),[n]}function ter(r){let e=r.headers.get("WWW-Authenticate");if(r.status===401&&e)return e}function rer(r){return`${r.slice(7).trim()} `.split(" ").filter(i=>i).map(i=>(([s,o])=>({[s]:o}))(i.trim().split("="))).reduce((i,s)=>Object.assign(Object.assign({},i),s),{})}function ner(r){return{abortSignal:r.abortSignal,requestOptions:{timeout:r.timeout},tracingOptions:r.tracingOptions}}});var rYe=O(Us=>{"use strict";Object.defineProperty(Us,"__esModule",{value:!0});Us.authorizeRequestOnTenantChallenge=Us.authorizeRequestOnClaimChallenge=Us.serializationPolicyName=Us.serializationPolicy=Us.deserializationPolicyName=Us.deserializationPolicy=Us.XML_CHARKEY=Us.XML_ATTRKEY=Us.createClientPipeline=Us.ServiceClient=Us.MapperTypeNames=Us.createSerializer=void 0;var JQe=Lq();Object.defineProperty(Us,"createSerializer",{enumerable:!0,get:function(){return JQe.createSerializer}});Object.defineProperty(Us,"MapperTypeNames",{enumerable:!0,get:function(){return JQe.MapperTypeNames}});var ier=WQe();Object.defineProperty(Us,"ServiceClient",{enumerable:!0,get:function(){return ier.ServiceClient}});var ser=Kge();Object.defineProperty(Us,"createClientPipeline",{enumerable:!0,get:function(){return ser.createClientPipeline}});var ZQe=kq();Object.defineProperty(Us,"XML_ATTRKEY",{enumerable:!0,get:function(){return ZQe.XML_ATTRKEY}});Object.defineProperty(Us,"XML_CHARKEY",{enumerable:!0,get:function(){return ZQe.XML_CHARKEY}});var eYe=$ge();Object.defineProperty(Us,"deserializationPolicy",{enumerable:!0,get:function(){return eYe.deserializationPolicy}});Object.defineProperty(Us,"deserializationPolicyName",{enumerable:!0,get:function(){return eYe.deserializationPolicyName}});var tYe=Wge();Object.defineProperty(Us,"serializationPolicy",{enumerable:!0,get:function(){return tYe.serializationPolicy}});Object.defineProperty(Us,"serializationPolicyName",{enumerable:!0,get:function(){return tYe.serializationPolicyName}});var oer=QQe();Object.defineProperty(Us,"authorizeRequestOnClaimChallenge",{enumerable:!0,get:function(){return oer.authorizeRequestOnClaimChallenge}});var aer=XQe();Object.defineProperty(Us,"authorizeRequestOnTenantChallenge",{enumerable:!0,get:function(){return aer.authorizeRequestOnTenantChallenge}})});var uye=O(ka=>{"use strict";Object.defineProperty(ka,"__esModule",{value:!0});var Tn=(J4e(),da(X4e)),cer=rYe(),ler=zA();function nYe(r){if(r&&r.__esModule)return r;var e=Object.create(null);return r&&Object.keys(r).forEach(function(t){if(t!=="default"){var n=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:function(){return r[t]}})}}),e.default=r,Object.freeze(e)}var RR=nYe(cer),Zge=nYe(ler),eye=new WeakMap;function uer(r){var e;if(!(typeof r!="object"||r===null))return(e=eye.get(r))===null||e===void 0?void 0:e.continuationToken}function xR(r,e){var t;if(typeof r!="object"||r===null||!e)return;let n=(t=eye.get(r))!==null&&t!==void 0?t:{};n.continuationToken=e,eye.set(r,n)}ka.KnownOrigin=void 0;(function(r){r.User="user",r.System="system",r.UserSystem="user,system"})(ka.KnownOrigin||(ka.KnownOrigin={}));ka.KnownActionType=void 0;(function(r){r.Internal="Internal"})(ka.KnownActionType||(ka.KnownActionType={}));ka.KnownRegionType=void 0;(function(r){r.Physical="Physical",r.Logical="Logical"})(ka.KnownRegionType||(ka.KnownRegionType={}));ka.KnownRegionCategory=void 0;(function(r){r.Recommended="Recommended",r.Extended="Extended",r.Other="Other"})(ka.KnownRegionCategory||(ka.KnownRegionCategory={}));ka.KnownResourceNameStatus=void 0;(function(r){r.Allowed="Allowed",r.Reserved="Reserved"})(ka.KnownResourceNameStatus||(ka.KnownResourceNameStatus={}));var sye={type:{name:"Composite",className:"OperationListResult",modelProperties:{value:{serializedName:"value",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"Operation"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},der={type:{name:"Composite",className:"Operation",modelProperties:{name:{serializedName:"name",readOnly:!0,type:{name:"String"}},isDataAction:{serializedName:"isDataAction",readOnly:!0,type:{name:"Boolean"}},display:{serializedName:"display",type:{name:"Composite",className:"OperationDisplay"}},origin:{serializedName:"origin",readOnly:!0,type:{name:"String"}},actionType:{serializedName:"actionType",readOnly:!0,type:{name:"String"}}}}},per={type:{name:"Composite",className:"OperationDisplay",modelProperties:{provider:{serializedName:"provider",readOnly:!0,type:{name:"String"}},resource:{serializedName:"resource",readOnly:!0,type:{name:"String"}},operation:{serializedName:"operation",readOnly:!0,type:{name:"String"}},description:{serializedName:"description",readOnly:!0,type:{name:"String"}}}}},Ef={type:{name:"Composite",className:"CloudError",modelProperties:{error:{serializedName:"error",type:{name:"Composite",className:"ErrorResponse"}}}}},mer={type:{name:"Composite",className:"ErrorResponse",modelProperties:{code:{serializedName:"code",readOnly:!0,type:{name:"String"}},message:{serializedName:"message",readOnly:!0,type:{name:"String"}},target:{serializedName:"target",readOnly:!0,type:{name:"String"}},details:{serializedName:"details",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ErrorResponse"}}}},additionalInfo:{serializedName:"additionalInfo",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ErrorAdditionalInfo"}}}}}}},her={type:{name:"Composite",className:"ErrorAdditionalInfo",modelProperties:{type:{serializedName:"type",readOnly:!0,type:{name:"String"}},info:{serializedName:"info",readOnly:!0,type:{name:"Dictionary",value:{type:{name:"any"}}}}}}},iYe={type:{name:"Composite",className:"LocationListResult",modelProperties:{value:{serializedName:"value",type:{name:"Sequence",element:{type:{name:"Composite",className:"Location"}}}}}}},fer={type:{name:"Composite",className:"Location",modelProperties:{id:{serializedName:"id",readOnly:!0,type:{name:"String"}},subscriptionId:{serializedName:"subscriptionId",readOnly:!0,type:{name:"String"}},name:{serializedName:"name",readOnly:!0,type:{name:"String"}},type:{serializedName:"type",readOnly:!0,type:{name:"Enum",allowedValues:["Region","EdgeZone"]}},displayName:{serializedName:"displayName",readOnly:!0,type:{name:"String"}},regionalDisplayName:{serializedName:"regionalDisplayName",readOnly:!0,type:{name:"String"}},metadata:{serializedName:"metadata",type:{name:"Composite",className:"LocationMetadata"}},availabilityZoneMappings:{serializedName:"availabilityZoneMappings",type:{name:"Sequence",element:{type:{name:"Composite",className:"AvailabilityZoneMappings"}}}}}}},ger={type:{name:"Composite",className:"LocationMetadata",modelProperties:{regionType:{serializedName:"regionType",readOnly:!0,type:{name:"String"}},regionCategory:{serializedName:"regionCategory",readOnly:!0,type:{name:"String"}},geography:{serializedName:"geography",readOnly:!0,type:{name:"String"}},geographyGroup:{serializedName:"geographyGroup",readOnly:!0,type:{name:"String"}},longitude:{serializedName:"longitude",readOnly:!0,type:{name:"String"}},latitude:{serializedName:"latitude",readOnly:!0,type:{name:"String"}},physicalLocation:{serializedName:"physicalLocation",readOnly:!0,type:{name:"String"}},pairedRegion:{serializedName:"pairedRegion",type:{name:"Sequence",element:{type:{name:"Composite",className:"PairedRegion"}}}},homeLocation:{serializedName:"homeLocation",readOnly:!0,type:{name:"String"}}}}},yer={type:{name:"Composite",className:"PairedRegion",modelProperties:{name:{serializedName:"name",readOnly:!0,type:{name:"String"}},id:{serializedName:"id",readOnly:!0,type:{name:"String"}},subscriptionId:{serializedName:"subscriptionId",readOnly:!0,type:{name:"String"}}}}},ver={type:{name:"Composite",className:"AvailabilityZoneMappings",modelProperties:{logicalZone:{serializedName:"logicalZone",readOnly:!0,type:{name:"String"}},physicalZone:{serializedName:"physicalZone",readOnly:!0,type:{name:"String"}}}}},sYe={type:{name:"Composite",className:"Subscription",modelProperties:{id:{serializedName:"id",readOnly:!0,type:{name:"String"}},subscriptionId:{serializedName:"subscriptionId",readOnly:!0,type:{name:"String"}},displayName:{serializedName:"displayName",readOnly:!0,type:{name:"String"}},tenantId:{serializedName:"tenantId",readOnly:!0,type:{name:"String"}},state:{serializedName:"state",readOnly:!0,type:{name:"Enum",allowedValues:["Enabled","Warned","PastDue","Disabled","Deleted"]}},subscriptionPolicies:{serializedName:"subscriptionPolicies",type:{name:"Composite",className:"SubscriptionPolicies"}},authorizationSource:{serializedName:"authorizationSource",type:{name:"String"}},managedByTenants:{serializedName:"managedByTenants",type:{name:"Sequence",element:{type:{name:"Composite",className:"ManagedByTenant"}}}},tags:{serializedName:"tags",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},ber={type:{name:"Composite",className:"SubscriptionPolicies",modelProperties:{locationPlacementId:{serializedName:"locationPlacementId",readOnly:!0,type:{name:"String"}},quotaId:{serializedName:"quotaId",readOnly:!0,type:{name:"String"}},spendingLimit:{serializedName:"spendingLimit",readOnly:!0,type:{name:"Enum",allowedValues:["On","Off","CurrentPeriodOff"]}}}}},_er={type:{name:"Composite",className:"ManagedByTenant",modelProperties:{tenantId:{serializedName:"tenantId",readOnly:!0,type:{name:"String"}}}}},oye={type:{name:"Composite",className:"SubscriptionListResult",modelProperties:{value:{serializedName:"value",type:{name:"Sequence",element:{type:{name:"Composite",className:"Subscription"}}}},nextLink:{serializedName:"nextLink",required:!0,type:{name:"String"}}}}},aye={type:{name:"Composite",className:"TenantListResult",modelProperties:{value:{serializedName:"value",type:{name:"Sequence",element:{type:{name:"Composite",className:"TenantIdDescription"}}}},nextLink:{serializedName:"nextLink",required:!0,type:{name:"String"}}}}},Ser={type:{name:"Composite",className:"TenantIdDescription",modelProperties:{id:{serializedName:"id",readOnly:!0,type:{name:"String"}},tenantId:{serializedName:"tenantId",readOnly:!0,type:{name:"String"}},tenantCategory:{serializedName:"tenantCategory",readOnly:!0,type:{name:"Enum",allowedValues:["Home","ProjectedBy","ManagedBy"]}},country:{serializedName:"country",readOnly:!0,type:{name:"String"}},countryCode:{serializedName:"countryCode",readOnly:!0,type:{name:"String"}},displayName:{serializedName:"displayName",readOnly:!0,type:{name:"String"}},domains:{serializedName:"domains",readOnly:!0,type:{name:"Sequence",element:{type:{name:"String"}}}},defaultDomain:{serializedName:"defaultDomain",readOnly:!0,type:{name:"String"}},tenantType:{serializedName:"tenantType",readOnly:!0,type:{name:"String"}},tenantBrandingLogoUrl:{serializedName:"tenantBrandingLogoUrl",readOnly:!0,type:{name:"String"}}}}},oYe={type:{name:"Composite",className:"CheckZonePeersRequest",modelProperties:{location:{serializedName:"location",type:{name:"String"}},subscriptionIds:{serializedName:"subscriptionIds",type:{name:"Sequence",element:{type:{name:"String"}}}}}}},aYe={type:{name:"Composite",className:"CheckZonePeersResult",modelProperties:{subscriptionId:{serializedName:"subscriptionId",readOnly:!0,type:{name:"String"}},location:{serializedName:"location",type:{name:"String"}},availabilityZonePeers:{serializedName:"availabilityZonePeers",type:{name:"Sequence",element:{type:{name:"Composite",className:"AvailabilityZonePeers"}}}}}}},Cer={type:{name:"Composite",className:"AvailabilityZonePeers",modelProperties:{availabilityZone:{serializedName:"availabilityZone",readOnly:!0,type:{name:"String"}},peers:{serializedName:"peers",type:{name:"Sequence",element:{type:{name:"Composite",className:"Peers"}}}}}}},Per={type:{name:"Composite",className:"Peers",modelProperties:{subscriptionId:{serializedName:"subscriptionId",readOnly:!0,type:{name:"String"}},availabilityZone:{serializedName:"availabilityZone",readOnly:!0,type:{name:"String"}}}}},cYe={type:{name:"Composite",className:"ErrorResponseAutoGenerated",modelProperties:{error:{serializedName:"error",type:{name:"Composite",className:"ErrorDetail"}}}}},wer={type:{name:"Composite",className:"ErrorDetail",modelProperties:{code:{serializedName:"code",readOnly:!0,type:{name:"String"}},message:{serializedName:"message",readOnly:!0,type:{name:"String"}},target:{serializedName:"target",readOnly:!0,type:{name:"String"}},details:{serializedName:"details",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ErrorDetail"}}}},additionalInfo:{serializedName:"additionalInfo",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ErrorAdditionalInfo"}}}}}}},lYe={type:{name:"Composite",className:"ResourceName",modelProperties:{name:{serializedName:"name",required:!0,type:{name:"String"}},type:{serializedName:"type",required:!0,type:{name:"String"}}}}},uYe={type:{name:"Composite",className:"CheckResourceNameResult",modelProperties:{name:{serializedName:"name",type:{name:"String"}},type:{serializedName:"type",type:{name:"String"}},status:{serializedName:"status",type:{name:"String"}}}}},Eer={type:{name:"Composite",className:"OperationAutoGenerated",modelProperties:{name:{serializedName:"name",type:{name:"String"}},isDataAction:{serializedName:"isDataAction",readOnly:!0,type:{name:"Boolean"}},display:{serializedName:"display",type:{name:"Composite",className:"OperationDisplayAutoGenerated"}},origin:{serializedName:"origin",readOnly:!0,type:{name:"String"}},actionType:{serializedName:"actionType",readOnly:!0,type:{name:"String"}}}}},Ter={type:{name:"Composite",className:"OperationDisplayAutoGenerated",modelProperties:{provider:{serializedName:"provider",type:{name:"String"}},resource:{serializedName:"resource",type:{name:"String"}},operation:{serializedName:"operation",type:{name:"String"}},description:{serializedName:"description",type:{name:"String"}}}}},Ier={type:{name:"Composite",className:"OperationListResultAutoGenerated",modelProperties:{value:{serializedName:"value",type:{name:"Sequence",element:{type:{name:"Composite",className:"OperationAutoGenerated"}}}},nextLink:{serializedName:"nextLink",type:{name:"String"}}}}},S6=Object.freeze({__proto__:null,OperationListResult:sye,Operation:der,OperationDisplay:per,CloudError:Ef,ErrorResponse:mer,ErrorAdditionalInfo:her,LocationListResult:iYe,Location:fer,LocationMetadata:ger,PairedRegion:yer,AvailabilityZoneMappings:ver,Subscription:sYe,SubscriptionPolicies:ber,ManagedByTenant:_er,SubscriptionListResult:oye,TenantListResult:aye,TenantIdDescription:Ser,CheckZonePeersRequest:oYe,CheckZonePeersResult:aYe,AvailabilityZonePeers:Cer,Peers:Per,ErrorResponseAutoGenerated:cYe,ErrorDetail:wer,ResourceName:lYe,CheckResourceNameResult:uYe,OperationAutoGenerated:Eer,OperationDisplayAutoGenerated:Ter,OperationListResultAutoGenerated:Ier}),Tf={parameterPath:"accept",mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Accept",type:{name:"String"}}},If={parameterPath:"$host",mapper:{serializedName:"$host",required:!0,type:{name:"String"}},skipEncoding:!0},GP={parameterPath:"apiVersion",mapper:{defaultValue:"2022-12-01",isConstant:!0,serializedName:"api-version",type:{name:"String"}}},cye={parameterPath:"nextLink",mapper:{serializedName:"nextLink",required:!0,type:{name:"String"}},skipEncoding:!0},lye={parameterPath:"subscriptionId",mapper:{serializedName:"subscriptionId",required:!0,type:{name:"String"}}},Rer={parameterPath:["options","includeExtendedLocations"],mapper:{serializedName:"includeExtendedLocations",type:{name:"Boolean"}}},dYe={parameterPath:["options","contentType"],mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},xer={parameterPath:"parameters",mapper:oYe},Oer={parameterPath:["options","resourceNameDefinition"],mapper:lYe},tye=class{constructor(e){this.client=e}list(e){let t=this.listPagingAll(e);return{next(){return t.next()},[Symbol.asyncIterator](){return this},byPage:n=>{if(n?.maxPageSize)throw new Error("maxPageSize is not supported by this operation.");return this.listPagingPage(e,n)}}}listPagingPage(e,t){return Tn.__asyncGenerator(this,arguments,function*(){let i,s=t?.continuationToken;if(!s){i=yield Tn.__await(this._list(e));let o=i.value||[];s=i.nextLink,xR(o,s),yield yield Tn.__await(o)}for(;s;){i=yield Tn.__await(this._listNext(s,e)),s=i.nextLink;let o=i.value||[];xR(o,s),yield yield Tn.__await(o)}})}listPagingAll(e){return Tn.__asyncGenerator(this,arguments,function*(){var n,i,s,o;try{for(var a=!0,c=Tn.__asyncValues(this.listPagingPage(e)),l;l=yield Tn.__await(c.next()),n=l.done,!n;){o=l.value,a=!1;try{let u=o;yield Tn.__await(yield*Tn.__asyncDelegator(Tn.__asyncValues(u)))}finally{a=!0}}}catch(u){i={error:u}}finally{try{!a&&!n&&(s=c.return)&&(yield Tn.__await(s.call(c)))}finally{if(i)throw i.error}}})}_list(e){return this.client.sendOperationRequest({options:e},Aer)}_listNext(e,t){return this.client.sendOperationRequest({nextLink:e,options:t},Ner)}},pYe=RR.createSerializer(S6,!1),Aer={path:"/providers/Microsoft.Resources/operations",httpMethod:"GET",responses:{200:{bodyMapper:sye},default:{bodyMapper:Ef}},queryParameters:[GP],urlParameters:[If],headerParameters:[Tf],serializer:pYe},Ner={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:sye},default:{bodyMapper:Ef}},urlParameters:[If,cye],headerParameters:[Tf],serializer:pYe},rye=class{constructor(e){this.client=e}listLocations(e,t){let n=this.listLocationsPagingAll(e,t);return{next(){return n.next()},[Symbol.asyncIterator](){return this},byPage:i=>{if(i?.maxPageSize)throw new Error("maxPageSize is not supported by this operation.");return this.listLocationsPagingPage(e,t,i)}}}listLocationsPagingPage(e,t,n){return Tn.__asyncGenerator(this,arguments,function*(){let s;s=yield Tn.__await(this._listLocations(e,t)),yield yield Tn.__await(s.value||[])})}listLocationsPagingAll(e,t){return Tn.__asyncGenerator(this,arguments,function*(){var i,s,o,a;try{for(var c=!0,l=Tn.__asyncValues(this.listLocationsPagingPage(e,t)),u;u=yield Tn.__await(l.next()),i=u.done,!i;){a=u.value,c=!1;try{let d=a;yield Tn.__await(yield*Tn.__asyncDelegator(Tn.__asyncValues(d)))}finally{c=!0}}}catch(d){s={error:d}}finally{try{!c&&!i&&(o=l.return)&&(yield Tn.__await(o.call(l)))}finally{if(s)throw s.error}}})}list(e){let t=this.listPagingAll(e);return{next(){return t.next()},[Symbol.asyncIterator](){return this},byPage:n=>{if(n?.maxPageSize)throw new Error("maxPageSize is not supported by this operation.");return this.listPagingPage(e,n)}}}listPagingPage(e,t){return Tn.__asyncGenerator(this,arguments,function*(){let i,s=t?.continuationToken;if(!s){i=yield Tn.__await(this._list(e));let o=i.value||[];s=i.nextLink,xR(o,s),yield yield Tn.__await(o)}for(;s;){i=yield Tn.__await(this._listNext(s,e)),s=i.nextLink;let o=i.value||[];xR(o,s),yield yield Tn.__await(o)}})}listPagingAll(e){return Tn.__asyncGenerator(this,arguments,function*(){var n,i,s,o;try{for(var a=!0,c=Tn.__asyncValues(this.listPagingPage(e)),l;l=yield Tn.__await(c.next()),n=l.done,!n;){o=l.value,a=!1;try{let u=o;yield Tn.__await(yield*Tn.__asyncDelegator(Tn.__asyncValues(u)))}finally{a=!0}}}catch(u){i={error:u}}finally{try{!a&&!n&&(s=c.return)&&(yield Tn.__await(s.call(c)))}finally{if(i)throw i.error}}})}_listLocations(e,t){return this.client.sendOperationRequest({subscriptionId:e,options:t},Der)}get(e,t){return this.client.sendOperationRequest({subscriptionId:e,options:t},Mer)}_list(e){return this.client.sendOperationRequest({options:e},ker)}checkZonePeers(e,t,n){return this.client.sendOperationRequest({subscriptionId:e,parameters:t,options:n},Ler)}_listNext(e,t){return this.client.sendOperationRequest({nextLink:e,options:t},qer)}},Jq=RR.createSerializer(S6,!1),Der={path:"/subscriptions/{subscriptionId}/locations",httpMethod:"GET",responses:{200:{bodyMapper:iYe},default:{bodyMapper:Ef}},queryParameters:[GP,Rer],urlParameters:[If,lye],headerParameters:[Tf],serializer:Jq},Mer={path:"/subscriptions/{subscriptionId}",httpMethod:"GET",responses:{200:{bodyMapper:sYe},default:{bodyMapper:Ef}},queryParameters:[GP],urlParameters:[If,lye],headerParameters:[Tf],serializer:Jq},ker={path:"/subscriptions",httpMethod:"GET",responses:{200:{bodyMapper:oye},default:{bodyMapper:Ef}},queryParameters:[GP],urlParameters:[If],headerParameters:[Tf],serializer:Jq},Ler={path:"/subscriptions/{subscriptionId}/providers/Microsoft.Resources/checkZonePeers/",httpMethod:"POST",responses:{200:{bodyMapper:aYe},default:{bodyMapper:cYe}},requestBody:xer,queryParameters:[GP],urlParameters:[If,lye],headerParameters:[Tf,dYe],mediaType:"json",serializer:Jq},qer={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:oye},default:{bodyMapper:Ef}},urlParameters:[If,cye],headerParameters:[Tf],serializer:Jq},nye=class{constructor(e){this.client=e}list(e){let t=this.listPagingAll(e);return{next(){return t.next()},[Symbol.asyncIterator](){return this},byPage:n=>{if(n?.maxPageSize)throw new Error("maxPageSize is not supported by this operation.");return this.listPagingPage(e,n)}}}listPagingPage(e,t){return Tn.__asyncGenerator(this,arguments,function*(){let i,s=t?.continuationToken;if(!s){i=yield Tn.__await(this._list(e));let o=i.value||[];s=i.nextLink,xR(o,s),yield yield Tn.__await(o)}for(;s;){i=yield Tn.__await(this._listNext(s,e)),s=i.nextLink;let o=i.value||[];xR(o,s),yield yield Tn.__await(o)}})}listPagingAll(e){return Tn.__asyncGenerator(this,arguments,function*(){var n,i,s,o;try{for(var a=!0,c=Tn.__asyncValues(this.listPagingPage(e)),l;l=yield Tn.__await(c.next()),n=l.done,!n;){o=l.value,a=!1;try{let u=o;yield Tn.__await(yield*Tn.__asyncDelegator(Tn.__asyncValues(u)))}finally{a=!0}}}catch(u){i={error:u}}finally{try{!a&&!n&&(s=c.return)&&(yield Tn.__await(s.call(c)))}finally{if(i)throw i.error}}})}_list(e){return this.client.sendOperationRequest({options:e},zer)}_listNext(e,t){return this.client.sendOperationRequest({nextLink:e,options:t},Fer)}},mYe=RR.createSerializer(S6,!1),zer={path:"/tenants",httpMethod:"GET",responses:{200:{bodyMapper:aye},default:{bodyMapper:Ef}},queryParameters:[GP],urlParameters:[If],headerParameters:[Tf],serializer:mYe},Fer={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:aye},default:{bodyMapper:Ef}},urlParameters:[If,cye],headerParameters:[Tf],serializer:mYe},iye=class extends RR.ServiceClient{constructor(e,t){var n,i,s;if(e===void 0)throw new Error("'credentials' cannot be null");t||(t={});let o={requestContentType:"application/json; charset=utf-8",credential:e},a="azsdk-js-arm-resources-subscriptions/2.1.0",c=t.userAgentOptions&&t.userAgentOptions.userAgentPrefix?`${t.userAgentOptions.userAgentPrefix} ${a}`:`${a}`,l=Object.assign(Object.assign(Object.assign({},o),t),{userAgentOptions:{userAgentPrefix:c},endpoint:(i=(n=t.endpoint)!==null&&n!==void 0?n:t.baseUri)!==null&&i!==void 0?i:"https://management.azure.com"});super(l);let u=!1;t?.pipeline&&t.pipeline.getOrderedPolicies().length>0&&(u=t.pipeline.getOrderedPolicies().some(p=>p.name===Zge.bearerTokenAuthenticationPolicyName)),(!t||!t.pipeline||t.pipeline.getOrderedPolicies().length==0||!u)&&(this.pipeline.removePolicy({name:Zge.bearerTokenAuthenticationPolicyName}),this.pipeline.addPolicy(Zge.bearerTokenAuthenticationPolicy({credential:e,scopes:(s=l.credentialScopes)!==null&&s!==void 0?s:`${l.endpoint}/.default`,challengeCallbacks:{authorizeRequestOnChallenge:RR.authorizeRequestOnClaimChallenge}}))),this.$host=t.$host||"https://management.azure.com",this.apiVersion=t.apiVersion||"2022-12-01",this.operations=new tye(this),this.subscriptions=new rye(this),this.tenants=new nye(this),this.addCustomApiVersionPolicy(t.apiVersion)}addCustomApiVersionPolicy(e){if(!e)return;let t={name:"CustomApiVersionPolicy",sendRequest(n,i){return Tn.__awaiter(this,void 0,void 0,function*(){let s=n.url.split("?");if(s.length>1){let o=s[1].split("&").map(a=>a.indexOf("api-version")>-1?"api-version="+e:a);n.url=s[0]+"?"+o.join("&")}return i(n)})}};this.pipeline.addPolicy(t)}checkResourceName(e){return this.sendOperationRequest({options:e},Uer)}},jer=RR.createSerializer(S6,!1),Uer={path:"/providers/Microsoft.Resources/checkResourceName",httpMethod:"POST",responses:{200:{bodyMapper:uYe},default:{bodyMapper:Ef}},requestBody:Oer,queryParameters:[GP],urlParameters:[If],headerParameters:[Tf,dYe],mediaType:"json",serializer:jer};ka.SubscriptionClient=iye;ka.getContinuationToken=uer});var Zq={};Ea(Zq,{__addDisposableResource:()=>MYe,__assign:()=>C6,__asyncDelegator:()=>TYe,__asyncGenerator:()=>EYe,__asyncValues:()=>IYe,__await:()=>OR,__awaiter:()=>bYe,__classPrivateFieldGet:()=>AYe,__classPrivateFieldIn:()=>DYe,__classPrivateFieldSet:()=>NYe,__createBinding:()=>w6,__decorate:()=>gYe,__disposeResources:()=>kYe,__esDecorate:()=>Ber,__exportStar:()=>SYe,__extends:()=>hYe,__generator:()=>_Ye,__importDefault:()=>OYe,__importStar:()=>xYe,__makeTemplateObject:()=>RYe,__metadata:()=>vYe,__param:()=>yYe,__propKey:()=>$er,__read:()=>pye,__rest:()=>fYe,__runInitializers:()=>Ger,__setFunctionName:()=>Ver,__spread:()=>CYe,__spreadArray:()=>wYe,__spreadArrays:()=>PYe,__values:()=>P6,default:()=>Ker});function hYe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");dye(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function fYe(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function gYe(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}function yYe(r,e){return function(t,n){e(t,n,r)}}function Ber(r,e,t,n,i,s){function o(_){if(_!==void 0&&typeof _!="function")throw new TypeError("Function expected");return _}for(var a=n.kind,c=a==="getter"?"get":a==="setter"?"set":"value",l=!e&&r?n.static?r:r.prototype:null,u=e||(l?Object.getOwnPropertyDescriptor(l,n.name):{}),d,p=!1,m=t.length-1;m>=0;m--){var f={};for(var y in n)f[y]=y==="access"?{}:n[y];for(var y in n.access)f.access[y]=n.access[y];f.addInitializer=function(_){if(p)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(_||null))};var v=(0,t[m])(a==="accessor"?{get:u.get,set:u.set}:u[c],f);if(a==="accessor"){if(v===void 0)continue;if(v===null||typeof v!="object")throw new TypeError("Object expected");(d=o(v.get))&&(u.get=d),(d=o(v.set))&&(u.set=d),(d=o(v.init))&&i.unshift(d)}else(d=o(v))&&(a==="field"?i.unshift(d):u[c]=d)}l&&Object.defineProperty(l,n.name,u),p=!0}function Ger(r,e,t){for(var n=arguments.length>2,i=0;i<e.length;i++)t=n?e[i].call(r,t):e[i].call(r);return n?t:void 0}function $er(r){return typeof r=="symbol"?r:"".concat(r)}function Ver(r,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(r,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function vYe(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function bYe(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})}function _Ye(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(t=0)),t;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){t.label=l[1];break}if(l[0]===6&&t.label<s[1]){t.label=s[1],s=l;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(l);break}s[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(u){l=[6,u],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function SYe(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&w6(e,r,t)}function P6(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function pye(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s}function CYe(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(pye(arguments[e]));return r}function PYe(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function wYe(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))}function OR(r){return this instanceof OR?(this.v=r,this):new OR(r)}function EYe(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(m){return function(f){return Promise.resolve(f).then(m,d)}}function a(m,f){n[m]&&(i[m]=function(y){return new Promise(function(v,_){s.push([m,y,v,_])>1||c(m,y)})},f&&(i[m]=f(i[m])))}function c(m,f){try{l(n[m](f))}catch(y){p(s[0][3],y)}}function l(m){m.value instanceof OR?Promise.resolve(m.value.v).then(u,d):p(s[0][2],m)}function u(m){c("next",m)}function d(m){c("throw",m)}function p(m,f){m(f),s.shift(),s.length&&c(s[0][0],s[0][1])}}function TYe(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=r[i]?function(o){return(t=!t)?{value:OR(r[i](o)),done:!1}:s?s(o):o}:s}}function IYe(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof P6=="function"?P6(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=r[s]&&function(o){return new Promise(function(a,c){o=r[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function RYe(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function xYe(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&w6(e,r,t);return Her(e,r),e}function OYe(r){return r&&r.__esModule?r:{default:r}}function AYe(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)}function NYe(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t}function DYe(r,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof r=="function"?e===r:r.has(e)}function MYe(r,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],t&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),r.stack.push({value:e,dispose:n,async:t})}else t&&r.stack.push({async:!0});return e}function kYe(r){function e(n){r.error=r.hasError?new Wer(n,r.error,"An error was suppressed during disposal."):n,r.hasError=!0}function t(){for(;r.stack.length;){var n=r.stack.pop();try{var i=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(i).then(t,function(s){return e(s),t()})}catch(s){e(s)}}if(r.hasError)throw r.error}return t()}var dye,C6,w6,Her,Wer,Ker,ez=si(()=>{dye=function(r,e){return dye=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},dye(r,e)};C6=function(){return C6=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},C6.apply(this,arguments)};w6=Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]};Her=Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e};Wer=typeof SuppressedError=="function"?SuppressedError:function(r,e,t){var n=new Error(t);return n.name="SuppressedError",n.error=r,n.suppressed=e,n};Ker={__extends:hYe,__assign:C6,__rest:fYe,__decorate:gYe,__param:yYe,__metadata:vYe,__awaiter:bYe,__generator:_Ye,__createBinding:w6,__exportStar:SYe,__values:P6,__read:pye,__spread:CYe,__spreadArrays:PYe,__spreadArray:wYe,__await:OR,__asyncGenerator:EYe,__asyncDelegator:TYe,__asyncValues:IYe,__makeTemplateObject:RYe,__importStar:xYe,__importDefault:OYe,__classPrivateFieldGet:AYe,__classPrivateFieldSet:NYe,__classPrivateFieldIn:DYe,__addDisposableResource:MYe,__disposeResources:kYe}});var mye=O(Rf=>{"use strict";Object.defineProperty(Rf,"__esModule",{value:!0});Rf.decodeStringToString=Rf.decodeString=Rf.encodeByteArray=Rf.encodeString=void 0;function Qer(r){return Buffer.from(r).toString("base64")}Rf.encodeString=Qer;function Yer(r){return(r instanceof Buffer?r:Buffer.from(r.buffer)).toString("base64")}Rf.encodeByteArray=Yer;function Xer(r){return Buffer.from(r,"base64")}Rf.decodeString=Xer;function Jer(r){return Buffer.from(r,"base64").toString()}Rf.decodeStringToString=Jer});var tz=O(AR=>{"use strict";Object.defineProperty(AR,"__esModule",{value:!0});AR.XML_CHARKEY=AR.XML_ATTRKEY=void 0;AR.XML_ATTRKEY="$";AR.XML_CHARKEY="_"});var hye=O(xf=>{"use strict";Object.defineProperty(xf,"__esModule",{value:!0});xf.flattenResponse=xf.isValidUuid=xf.isDuration=xf.isPrimitiveBody=void 0;function LYe(r,e){return e!=="Composite"&&e!=="Dictionary"&&(typeof r=="string"||typeof r=="number"||typeof r=="boolean"||e?.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i)!==null||r===void 0||r===null)}xf.isPrimitiveBody=LYe;var Zer=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function etr(r){return Zer.test(r)}xf.isDuration=etr;var ttr=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i;function rtr(r){return ttr.test(r)}xf.isValidUuid=rtr;function ntr(r){let e=Object.assign(Object.assign({},r.headers),r.body);return r.hasNullableType&&Object.getOwnPropertyNames(e).length===0?r.shouldWrapBody?{body:null}:null:r.shouldWrapBody?Object.assign(Object.assign({},r.headers),{body:r.body}):e}function itr(r,e){var t,n;let i=r.parsedHeaders;if(r.request.method==="HEAD")return Object.assign(Object.assign({},i),{body:r.parsedBody});let s=e&&e.bodyMapper,o=!!s?.nullable,a=s?.type.name;if(a==="Stream")return Object.assign(Object.assign({},i),{blobBody:r.blobBody,readableStreamBody:r.readableStreamBody});let c=a==="Composite"&&s.type.modelProperties||{},l=Object.keys(c).some(u=>c[u].serializedName==="");if(a==="Sequence"||l){let u=(t=r.parsedBody)!==null&&t!==void 0?t:[];for(let d of Object.keys(c))c[d].serializedName&&(u[d]=(n=r.parsedBody)===null||n===void 0?void 0:n[d]);if(i)for(let d of Object.keys(i))u[d]=i[d];return o&&!r.parsedBody&&!i&&Object.getOwnPropertyNames(c).length===0?null:u}return ntr({body:r.parsedBody,headers:i,hasNullableType:o,shouldWrapBody:LYe(r.parsedBody,a)})}xf.flattenResponse=itr});var rz=O(NR=>{"use strict";Object.defineProperty(NR,"__esModule",{value:!0});NR.MapperTypeNames=NR.createSerializer=void 0;var str=(ez(),da(Zq)),T6=str.__importStar(mye()),dc=tz(),zYe=hye(),fye=class{constructor(e={},t=!1){this.modelMappers=e,this.isXML=t}validateConstraints(e,t,n){let i=(s,o)=>{throw new Error(`"${n}" with value "${t}" should satisfy the constraint "${s}": ${o}.`)};if(e.constraints&&t!==void 0&&t!==null){let{ExclusiveMaximum:s,ExclusiveMinimum:o,InclusiveMaximum:a,InclusiveMinimum:c,MaxItems:l,MaxLength:u,MinItems:d,MinLength:p,MultipleOf:m,Pattern:f,UniqueItems:y}=e.constraints;if(s!==void 0&&t>=s&&i("ExclusiveMaximum",s),o!==void 0&&t<=o&&i("ExclusiveMinimum",o),a!==void 0&&t>a&&i("InclusiveMaximum",a),c!==void 0&&t<c&&i("InclusiveMinimum",c),l!==void 0&&t.length>l&&i("MaxItems",l),u!==void 0&&t.length>u&&i("MaxLength",u),d!==void 0&&t.length<d&&i("MinItems",d),p!==void 0&&t.length<p&&i("MinLength",p),m!==void 0&&t%m!==0&&i("MultipleOf",m),f){let v=typeof f=="string"?new RegExp(f):f;(typeof t!="string"||t.match(v)===null)&&i("Pattern",f)}y&&t.some((v,_,C)=>C.indexOf(v)!==_)&&i("UniqueItems",y)}}serialize(e,t,n,i={xml:{}}){var s,o,a;let c={xml:{rootName:(s=i.xml.rootName)!==null&&s!==void 0?s:"",includeRoot:(o=i.xml.includeRoot)!==null&&o!==void 0?o:!1,xmlCharKey:(a=i.xml.xmlCharKey)!==null&&a!==void 0?a:dc.XML_CHARKEY}},l={},u=e.type.name;n||(n=e.serializedName),u.match(/^Sequence$/i)!==null&&(l=[]),e.isConstant&&(t=e.defaultValue);let{required:d,nullable:p}=e;if(d&&p&&t===void 0)throw new Error(`${n} cannot be undefined.`);if(d&&!p&&t==null)throw new Error(`${n} cannot be null or undefined.`);if(!d&&p===!1&&t===null)throw new Error(`${n} cannot be null.`);return t==null||u.match(/^any$/i)!==null?l=t:u.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/i)!==null?l=ptr(u,n,t):u.match(/^Enum$/i)!==null?l=mtr(n,e.type.allowedValues,t):u.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/i)!==null?l=gtr(u,t,n):u.match(/^ByteArray$/i)!==null?l=htr(n,t):u.match(/^Base64Url$/i)!==null?l=ftr(n,t):u.match(/^Sequence$/i)!==null?l=ytr(this,e,t,n,!!this.isXML,c):u.match(/^Dictionary$/i)!==null?l=vtr(this,e,t,n,!!this.isXML,c):u.match(/^Composite$/i)!==null&&(l=_tr(this,e,t,n,!!this.isXML,c)),l}deserialize(e,t,n,i={xml:{}}){var s,o,a,c;let l={xml:{rootName:(s=i.xml.rootName)!==null&&s!==void 0?s:"",includeRoot:(o=i.xml.includeRoot)!==null&&o!==void 0?o:!1,xmlCharKey:(a=i.xml.xmlCharKey)!==null&&a!==void 0?a:dc.XML_CHARKEY},ignoreUnknownProperties:(c=i.ignoreUnknownProperties)!==null&&c!==void 0?c:!1};if(t==null)return this.isXML&&e.type.name==="Sequence"&&!e.xmlIsWrapped&&(t=[]),e.defaultValue!==void 0&&(t=e.defaultValue),t;let u,d=e.type.name;if(n||(n=e.serializedName),d.match(/^Composite$/i)!==null)u=Ctr(this,e,t,n,l);else{if(this.isXML){let p=l.xml.xmlCharKey;t[dc.XML_ATTRKEY]!==void 0&&t[p]!==void 0&&(t=t[p])}d.match(/^Number$/i)!==null?(u=parseFloat(t),isNaN(u)&&(u=t)):d.match(/^Boolean$/i)!==null?t==="true"?u=!0:t==="false"?u=!1:u=t:d.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/i)!==null?u=t:d.match(/^(Date|DateTime|DateTimeRfc1123)$/i)!==null?u=new Date(t):d.match(/^UnixTime$/i)!==null?u=dtr(t):d.match(/^ByteArray$/i)!==null?u=T6.decodeString(t):d.match(/^Base64Url$/i)!==null?u=ltr(t):d.match(/^Sequence$/i)!==null?u=wtr(this,e,t,n,l):d.match(/^Dictionary$/i)!==null&&(u=Ptr(this,e,t,n,l))}return e.isConstant&&(u=e.defaultValue),u}};function otr(r={},e=!1){return new fye(r,e)}NR.createSerializer=otr;function atr(r,e){let t=r.length;for(;t-1>=0&&r[t-1]===e;)--t;return r.substr(0,t)}function ctr(r){if(!r)return;if(!(r instanceof Uint8Array))throw new Error("Please provide an input of type Uint8Array for converting to Base64Url.");let e=T6.encodeByteArray(r);return atr(e,"=").replace(/\+/g,"-").replace(/\//g,"_")}function ltr(r){if(r){if(r&&typeof r.valueOf()!="string")throw new Error("Please provide an input of type string for converting to Uint8Array");return r=r.replace(/-/g,"+").replace(/_/g,"/"),T6.decodeString(r)}}function gye(r){let e=[],t="";if(r){let n=r.split(".");for(let i of n)i.charAt(i.length-1)==="\\"?t+=i.substr(0,i.length-1)+".":(t+=i,e.push(t),t="")}return e}function utr(r){if(r)return typeof r.valueOf()=="string"&&(r=new Date(r)),Math.floor(r.getTime()/1e3)}function dtr(r){if(r)return new Date(r*1e3)}function ptr(r,e,t){if(t!=null){if(r.match(/^Number$/i)!==null){if(typeof t!="number")throw new Error(`${e} with value ${t} must be of type number.`)}else if(r.match(/^String$/i)!==null){if(typeof t.valueOf()!="string")throw new Error(`${e} with value "${t}" must be of type string.`)}else if(r.match(/^Uuid$/i)!==null){if(!(typeof t.valueOf()=="string"&&(0,zYe.isValidUuid)(t)))throw new Error(`${e} with value "${t}" must be of type string and a valid uuid.`)}else if(r.match(/^Boolean$/i)!==null){if(typeof t!="boolean")throw new Error(`${e} with value ${t} must be of type boolean.`)}else if(r.match(/^Stream$/i)!==null){let n=typeof t;if(n!=="string"&&typeof t.pipe!="function"&&typeof t.tee!="function"&&!(t instanceof ArrayBuffer)&&!ArrayBuffer.isView(t)&&!((typeof Blob=="function"||typeof Blob=="object")&&t instanceof Blob)&&n!=="function")throw new Error(`${e} must be a string, Blob, ArrayBuffer, ArrayBufferView, ReadableStream, or () => ReadableStream.`)}}return t}function mtr(r,e,t){if(!e)throw new Error(`Please provide a set of allowedValues to validate ${r} as an Enum Type.`);if(!e.some(i=>typeof i.valueOf()=="string"?i.toLowerCase()===t.toLowerCase():i===t))throw new Error(`${t} is not a valid value for ${r}. The valid values are: ${JSON.stringify(e)}.`);return t}function htr(r,e){if(e!=null){if(!(e instanceof Uint8Array))throw new Error(`${r} must be of type Uint8Array.`);e=T6.encodeByteArray(e)}return e}function ftr(r,e){if(e!=null){if(!(e instanceof Uint8Array))throw new Error(`${r} must be of type Uint8Array.`);e=ctr(e)}return e}function gtr(r,e,t){if(e!=null){if(r.match(/^Date$/i)!==null){if(!(e instanceof Date||typeof e.valueOf()=="string"&&!isNaN(Date.parse(e))))throw new Error(`${t} must be an instanceof Date or a string in ISO8601 format.`);e=e instanceof Date?e.toISOString().substring(0,10):new Date(e).toISOString().substring(0,10)}else if(r.match(/^DateTime$/i)!==null){if(!(e instanceof Date||typeof e.valueOf()=="string"&&!isNaN(Date.parse(e))))throw new Error(`${t} must be an instanceof Date or a string in ISO8601 format.`);e=e instanceof Date?e.toISOString():new Date(e).toISOString()}else if(r.match(/^DateTimeRfc1123$/i)!==null){if(!(e instanceof Date||typeof e.valueOf()=="string"&&!isNaN(Date.parse(e))))throw new Error(`${t} must be an instanceof Date or a string in RFC-1123 format.`);e=e instanceof Date?e.toUTCString():new Date(e).toUTCString()}else if(r.match(/^UnixTime$/i)!==null){if(!(e instanceof Date||typeof e.valueOf()=="string"&&!isNaN(Date.parse(e))))throw new Error(`${t} must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.`);e=utr(e)}else if(r.match(/^TimeSpan$/i)!==null&&!(0,zYe.isDuration)(e))throw new Error(`${t} must be a string in ISO 8601 format. Instead was "${e}".`)}return e}function ytr(r,e,t,n,i,s){var o;if(!Array.isArray(t))throw new Error(`${n} must be of type Array.`);let a=e.type.element;if(!a||typeof a!="object")throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${n}.`);a.type.name==="Composite"&&a.type.className&&(a=(o=r.modelMappers[a.type.className])!==null&&o!==void 0?o:a);let c=[];for(let l=0;l<t.length;l++){let u=r.serialize(a,t[l],n,s);if(i&&a.xmlNamespace){let d=a.xmlNamespacePrefix?`xmlns:${a.xmlNamespacePrefix}`:"xmlns";a.type.name==="Composite"?(c[l]=Object.assign({},u),c[l][dc.XML_ATTRKEY]={[d]:a.xmlNamespace}):(c[l]={},c[l][s.xml.xmlCharKey]=u,c[l][dc.XML_ATTRKEY]={[d]:a.xmlNamespace})}else c[l]=u}return c}function vtr(r,e,t,n,i,s){if(typeof t!="object")throw new Error(`${n} must be of type object.`);let o=e.type.value;if(!o||typeof o!="object")throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${n}.`);let a={};for(let c of Object.keys(t)){let l=r.serialize(o,t[c],n,s);a[c]=UYe(o,l,i,s)}if(i&&e.xmlNamespace){let c=e.xmlNamespacePrefix?`xmlns:${e.xmlNamespacePrefix}`:"xmlns",l=a;return l[dc.XML_ATTRKEY]={[c]:e.xmlNamespace},l}return a}function btr(r,e,t){let n=e.type.additionalProperties;if(!n&&e.type.className){let i=FYe(r,e,t);return i?.type.additionalProperties}return n}function FYe(r,e,t){let n=e.type.className;if(!n)throw new Error(`Class name for model "${t}" is not provided in the mapper "${JSON.stringify(e,void 0,2)}".`);return r.modelMappers[n]}function jYe(r,e,t){let n=e.type.modelProperties;if(!n){let i=FYe(r,e,t);if(!i)throw new Error(`mapper() cannot be null or undefined for model "${e.type.className}".`);if(n=i?.type.modelProperties,!n)throw new Error(`modelProperties cannot be null or undefined in the mapper "${JSON.stringify(i)}" of type "${e.type.className}" for object "${t}".`)}return n}function _tr(r,e,t,n,i,s){if(E6(r,e)&&(e=BYe(r,e,t,"clientName")),t!=null){let o={},a=jYe(r,e,n);for(let l of Object.keys(a)){let u=a[l];if(u.readOnly)continue;let d,p=o;if(r.isXML)u.xmlIsWrapped?d=u.xmlName:d=u.xmlElementName||u.xmlName;else{let m=gye(u.serializedName);d=m.pop();for(let f of m){let y=p[f];y==null&&(t[l]!==void 0&&t[l]!==null||u.defaultValue!==void 0)&&(p[f]={}),p=p[f]}}if(p!=null){if(i&&e.xmlNamespace){let _=e.xmlNamespacePrefix?`xmlns:${e.xmlNamespacePrefix}`:"xmlns";p[dc.XML_ATTRKEY]=Object.assign(Object.assign({},p[dc.XML_ATTRKEY]),{[_]:e.xmlNamespace})}let m=u.serializedName!==""?n+"."+u.serializedName:n,f=t[l],y=E6(r,e);y&&y.clientName===l&&f==null&&(f=e.serializedName);let v=r.serialize(u,f,m,s);if(v!==void 0&&d!==void 0&&d!==null){let _=UYe(u,v,i,s);i&&u.xmlIsAttribute?(p[dc.XML_ATTRKEY]=p[dc.XML_ATTRKEY]||{},p[dc.XML_ATTRKEY][d]=v):i&&u.xmlIsWrapped?p[d]={[u.xmlElementName]:_}:p[d]=_}}}let c=btr(r,e,n);if(c){let l=Object.keys(a);for(let u in t)l.every(p=>p!==u)&&(o[u]=r.serialize(c,t[u],n+'["'+u+'"]',s))}return o}return t}function UYe(r,e,t,n){if(!t||!r.xmlNamespace)return e;let s={[r.xmlNamespacePrefix?`xmlns:${r.xmlNamespacePrefix}`:"xmlns"]:r.xmlNamespace};if(["Composite"].includes(r.type.name)){if(e[dc.XML_ATTRKEY])return e;{let a=Object.assign({},e);return a[dc.XML_ATTRKEY]=s,a}}let o={};return o[n.xml.xmlCharKey]=e,o[dc.XML_ATTRKEY]=s,o}function Str(r,e){return[dc.XML_ATTRKEY,e.xml.xmlCharKey].includes(r)}function Ctr(r,e,t,n,i){var s,o;let a=(s=i.xml.xmlCharKey)!==null&&s!==void 0?s:dc.XML_CHARKEY;E6(r,e)&&(e=BYe(r,e,t,"serializedName"));let c=jYe(r,e,n),l={},u=[];for(let p of Object.keys(c)){let m=c[p],f=gye(c[p].serializedName);u.push(f[0]);let{serializedName:y,xmlName:v,xmlElementName:_}=m,C=n;y!==""&&y!==void 0&&(C=n+"."+y);let P=m.headerCollectionPrefix;if(P){let w={};for(let R of Object.keys(t))R.startsWith(P)&&(w[R.substring(P.length)]=r.deserialize(m.type.value,t[R],C,i)),u.push(R);l[p]=w}else if(r.isXML)if(m.xmlIsAttribute&&t[dc.XML_ATTRKEY])l[p]=r.deserialize(m,t[dc.XML_ATTRKEY][v],C,i);else if(m.xmlIsMsText)t[a]!==void 0?l[p]=t[a]:typeof t=="string"&&(l[p]=t);else{let w=_||v||y;if(m.xmlIsWrapped){let R=t[v],I=(o=R?.[_])!==null&&o!==void 0?o:[];l[p]=r.deserialize(m,I,C,i),u.push(v)}else{let R=t[w];l[p]=r.deserialize(m,R,C,i),u.push(w)}}else{let w,R=t,I=0;for(let L of f){if(!R)break;I++,R=R[L]}R===null&&I<f.length&&(R=void 0),w=R;let z=e.type.polymorphicDiscriminator;z&&p===z.clientName&&w==null&&(w=e.serializedName);let G;if(Array.isArray(t[p])&&c[p].serializedName===""){w=t[p];let L=r.deserialize(m,w,C,i);for(let[H,ee]of Object.entries(l))Object.prototype.hasOwnProperty.call(L,H)||(L[H]=ee);l=L}else(w!==void 0||m.defaultValue!==void 0)&&(G=r.deserialize(m,w,C,i),l[p]=G)}}let d=e.type.additionalProperties;if(d){let p=m=>{for(let f in c)if(gye(c[f].serializedName)[0]===m)return!1;return!0};for(let m in t)p(m)&&(l[m]=r.deserialize(d,t[m],n+'["'+m+'"]',i))}else if(t&&!i.ignoreUnknownProperties)for(let p of Object.keys(t))l[p]===void 0&&!u.includes(p)&&!Str(p,i)&&(l[p]=t[p]);return l}function Ptr(r,e,t,n,i){let s=e.type.value;if(!s||typeof s!="object")throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${n}`);if(t){let o={};for(let a of Object.keys(t))o[a]=r.deserialize(s,t[a],n,i);return o}return t}function wtr(r,e,t,n,i){var s;let o=e.type.element;if(!o||typeof o!="object")throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${n}`);if(t){Array.isArray(t)||(t=[t]),o.type.name==="Composite"&&o.type.className&&(o=(s=r.modelMappers[o.type.className])!==null&&s!==void 0?s:o);let a=[];for(let c=0;c<t.length;c++)a[c]=r.deserialize(o,t[c],`${n}[${c}]`,i);return a}return t}function Etr(r,e,t){let n=[t];for(;n.length;){let i=n.shift(),s=e===i?e:i+"."+e;if(Object.prototype.hasOwnProperty.call(r,s))return r[s];for(let[o,a]of Object.entries(r))o.startsWith(i+".")&&a.type.uberParent===i&&a.type.className&&n.push(a.type.className)}}function BYe(r,e,t,n){var i;let s=E6(r,e);if(s){let o=s[n];if(o){n==="serializedName"&&(o=o.replace(/\\/gi,""));let a=t[o],c=(i=e.type.uberParent)!==null&&i!==void 0?i:e.type.className;if(typeof a=="string"&&c){let l=Etr(r.modelMappers.discriminators,a,c);l&&(e=l)}}}return e}function E6(r,e){return e.type.polymorphicDiscriminator||qYe(r,e.type.uberParent)||qYe(r,e.type.className)}function qYe(r,e){return e&&r.modelMappers[e]&&r.modelMappers[e].type.polymorphicDiscriminator}NR.MapperTypeNames={Base64Url:"Base64Url",Boolean:"Boolean",ByteArray:"ByteArray",Composite:"Composite",Date:"Date",DateTime:"DateTime",DateTimeRfc1123:"DateTimeRfc1123",Dictionary:"Dictionary",Enum:"Enum",Number:"Number",Object:"Object",Sequence:"Sequence",String:"String",Stream:"Stream",TimeSpan:"TimeSpan",UnixTime:"UnixTime"}});var bye=O(vye=>{"use strict";Object.defineProperty(vye,"__esModule",{value:!0});vye.createEmptyPipeline=Ttr;var GYe=new Set(["Deserialize","Serialize","Retry","Sign"]),yye=class r{constructor(e){var t;this._policies=[],this._policies=(t=e?.slice(0))!==null&&t!==void 0?t:[],this._orderedPolicies=void 0}addPolicy(e,t={}){if(t.phase&&t.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(t.phase&&!GYe.has(t.phase))throw new Error(`Invalid phase name: ${t.phase}`);if(t.afterPhase&&!GYe.has(t.afterPhase))throw new Error(`Invalid afterPhase name: ${t.afterPhase}`);this._policies.push({policy:e,options:t}),this._orderedPolicies=void 0}removePolicy(e){let t=[];return this._policies=this._policies.filter(n=>e.name&&n.policy.name===e.name||e.phase&&n.options.phase===e.phase?(t.push(n.policy),!1):!0),this._orderedPolicies=void 0,t}sendRequest(e,t){return this.getOrderedPolicies().reduceRight((s,o)=>a=>o.sendRequest(a,s),s=>e.sendRequest(s))(t)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new r(this._policies)}static create(){return new r}orderPolicies(){let e=[],t=new Map;function n(f){return{name:f,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}let i=n("Serialize"),s=n("None"),o=n("Deserialize"),a=n("Retry"),c=n("Sign"),l=[i,s,o,a,c];function u(f){return f==="Retry"?a:f==="Serialize"?i:f==="Deserialize"?o:f==="Sign"?c:s}for(let f of this._policies){let y=f.policy,v=f.options,_=y.name;if(t.has(_))throw new Error("Duplicate policy names not allowed in pipeline");let C={policy:y,dependsOn:new Set,dependants:new Set};v.afterPhase&&(C.afterPhase=u(v.afterPhase),C.afterPhase.hasAfterPolicies=!0),t.set(_,C),u(v.phase).policies.add(C)}for(let f of this._policies){let{policy:y,options:v}=f,_=y.name,C=t.get(_);if(!C)throw new Error(`Missing node for policy ${_}`);if(v.afterPolicies)for(let P of v.afterPolicies){let w=t.get(P);w&&(C.dependsOn.add(w),w.dependants.add(C))}if(v.beforePolicies)for(let P of v.beforePolicies){let w=t.get(P);w&&(w.dependsOn.add(C),C.dependants.add(w))}}function d(f){f.hasRun=!0;for(let y of f.policies)if(!(y.afterPhase&&(!y.afterPhase.hasRun||y.afterPhase.policies.size))&&y.dependsOn.size===0){e.push(y.policy);for(let v of y.dependants)v.dependsOn.delete(y);t.delete(y.policy.name),f.policies.delete(y)}}function p(){for(let f of l){if(d(f),f.policies.size>0&&f!==s){s.hasRun||d(s);return}f.hasAfterPolicies&&d(s)}}let m=0;for(;t.size>0;){m++;let f=e.length;if(p(),e.length<=f&&m>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return e}};function Ttr(){return yye.create()}});var $P=O(I6=>{"use strict";Object.defineProperty(I6,"__esModule",{value:!0});I6.logger=void 0;var Itr=lu();I6.logger=(0,Itr.createClientLogger)("core-rest-pipeline")});var x6=O(R6=>{"use strict";Object.defineProperty(R6,"__esModule",{value:!0});R6.Sanitizer=void 0;var Rtr=gs(),_ye="REDACTED",xtr=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],Otr=["api-version"],Sye=class{constructor({additionalAllowedHeaderNames:e=[],additionalAllowedQueryParameters:t=[]}={}){e=xtr.concat(e),t=Otr.concat(t),this.allowedHeaderNames=new Set(e.map(n=>n.toLowerCase())),this.allowedQueryParameters=new Set(t.map(n=>n.toLowerCase()))}sanitize(e){let t=new Set;return JSON.stringify(e,(n,i)=>{if(i instanceof Error)return Object.assign(Object.assign({},i),{name:i.name,message:i.message});if(n==="headers")return this.sanitizeHeaders(i);if(n==="url")return this.sanitizeUrl(i);if(n==="query")return this.sanitizeQuery(i);if(n==="body")return;if(n==="response")return;if(n==="operationSpec")return;if(Array.isArray(i)||(0,Rtr.isObject)(i)){if(t.has(i))return"[Circular]";t.add(i)}return i},2)}sanitizeUrl(e){if(typeof e!="string"||e===null||e==="")return e;let t=new URL(e);if(!t.search)return e;for(let[n]of t.searchParams)this.allowedQueryParameters.has(n.toLowerCase())||t.searchParams.set(n,_ye);return t.toString()}sanitizeHeaders(e){let t={};for(let n of Object.keys(e))this.allowedHeaderNames.has(n.toLowerCase())?t[n]=e[n]:t[n]=_ye;return t}sanitizeQuery(e){if(typeof e!="object"||e===null)return e;let t={};for(let n of Object.keys(e))this.allowedQueryParameters.has(n.toLowerCase())?t[n]=e[n]:t[n]=_ye;return t}};R6.Sanitizer=Sye});var Cye=O(DR=>{"use strict";Object.defineProperty(DR,"__esModule",{value:!0});DR.logPolicyName=void 0;DR.logPolicy=Dtr;var Atr=$P(),Ntr=x6();DR.logPolicyName="logPolicy";function Dtr(r={}){var e;let t=(e=r.logger)!==null&&e!==void 0?e:Atr.logger.info,n=new Ntr.Sanitizer({additionalAllowedHeaderNames:r.additionalAllowedHeaderNames,additionalAllowedQueryParameters:r.additionalAllowedQueryParameters});return{name:DR.logPolicyName,async sendRequest(i,s){if(!t.enabled)return s(i);t(`Request: ${n.sanitize(i)}`);let o=await s(i);return t(`Response status code: ${o.status}`),t(`Headers: ${n.sanitize(o.headers)}`),o}}}});var Pye=O(MR=>{"use strict";Object.defineProperty(MR,"__esModule",{value:!0});MR.redirectPolicyName=void 0;MR.redirectPolicy=Mtr;MR.redirectPolicyName="redirectPolicy";var $Ye=["GET","HEAD"];function Mtr(r={}){let{maxRetries:e=20}=r;return{name:MR.redirectPolicyName,async sendRequest(t,n){let i=await n(t);return VYe(n,i,e)}}}async function VYe(r,e,t,n=0){let{request:i,status:s,headers:o}=e,a=o.get("location");if(a&&(s===300||s===301&&$Ye.includes(i.method)||s===302&&$Ye.includes(i.method)||s===303&&i.method==="POST"||s===307)&&n<t){let c=new URL(a,i.url);i.url=c.toString(),s===303&&(i.method="GET",i.headers.delete("Content-Length"),delete i.body),i.headers.delete("Authorization");let l=await r(i);return VYe(r,l,t,n+1)}return e}});var WYe=O(O6=>{"use strict";Object.defineProperty(O6,"__esModule",{value:!0});O6.getHeaderName=ktr;O6.setPlatformSpecificData=Ltr;var HYe=(ez(),da(Zq)),wye=HYe.__importStar(require("node:os")),Eye=HYe.__importStar(require("node:process"));function ktr(){return"User-Agent"}async function Ltr(r){if(Eye&&Eye.versions){let e=Eye.versions;e.bun?r.set("Bun",e.bun):e.deno?r.set("Deno",e.deno):e.node&&r.set("Node",e.node)}r.set("OS",`(${wye.arch()}-${wye.type()}-${wye.release()})`)}});var s_=O(kR=>{"use strict";Object.defineProperty(kR,"__esModule",{value:!0});kR.DEFAULT_RETRY_POLICY_COUNT=kR.SDK_VERSION=void 0;kR.SDK_VERSION="1.17.0";kR.DEFAULT_RETRY_POLICY_COUNT=3});var Tye=O(A6=>{"use strict";Object.defineProperty(A6,"__esModule",{value:!0});A6.getUserAgentHeaderName=Ftr;A6.getUserAgentValue=jtr;var KYe=WYe(),qtr=s_();function ztr(r){let e=[];for(let[t,n]of r){let i=n?`${t}/${n}`:t;e.push(i)}return e.join(" ")}function Ftr(){return(0,KYe.getHeaderName)()}async function jtr(r){let e=new Map;e.set("core-rest-pipeline",qtr.SDK_VERSION),await(0,KYe.setPlatformSpecificData)(e);let t=ztr(e);return r?`${r} ${t}`:t}});var Iye=O(LR=>{"use strict";Object.defineProperty(LR,"__esModule",{value:!0});LR.userAgentPolicyName=void 0;LR.userAgentPolicy=Utr;var YYe=Tye(),QYe=(0,YYe.getUserAgentHeaderName)();LR.userAgentPolicyName="userAgentPolicy";function Utr(r={}){let e=(0,YYe.getUserAgentValue)(r.userAgentPrefix);return{name:LR.userAgentPolicyName,async sendRequest(t,n){return t.headers.has(QYe)||t.headers.set(QYe,await e),n(t)}}}});var N6=O(qR=>{"use strict";Object.defineProperty(qR,"__esModule",{value:!0});qR.isNodeReadableStream=XYe;qR.isWebReadableStream=JYe;qR.isReadableStream=Btr;qR.isBlob=Gtr;function XYe(r){return!!(r&&typeof r.pipe=="function")}function JYe(r){return!!(r&&typeof r.getReader=="function"&&typeof r.tee=="function")}function Btr(r){return XYe(r)||JYe(r)}function Gtr(r){return typeof r.stream=="function"}});var Rye=O(nz=>{"use strict";Object.defineProperty(nz,"__esModule",{value:!0});nz.getRawContent=Wtr;nz.createFileFromStream=Ktr;nz.createFile=Qtr;var $tr=gs(),Vtr=N6(),ZYe={arrayBuffer:()=>{throw new Error("Not implemented")},slice:()=>{throw new Error("Not implemented")},text:()=>{throw new Error("Not implemented")}},D6=Symbol("rawContent");function Htr(r){return typeof r[D6]=="function"}function Wtr(r){return Htr(r)?r[D6]():r.stream()}function Ktr(r,e,t={}){var n,i,s,o;return Object.assign(Object.assign({},ZYe),{type:(n=t.type)!==null&&n!==void 0?n:"",lastModified:(i=t.lastModified)!==null&&i!==void 0?i:new Date().getTime(),webkitRelativePath:(s=t.webkitRelativePath)!==null&&s!==void 0?s:"",size:(o=t.size)!==null&&o!==void 0?o:-1,name:e,stream:()=>{let a=r();if((0,Vtr.isNodeReadableStream)(a))throw new Error("Not supported: a Node stream was provided as input to createFileFromStream.");return a},[D6]:r})}function Qtr(r,e,t={}){var n,i,s;return $tr.isNodeLike?Object.assign(Object.assign({},ZYe),{type:(n=t.type)!==null&&n!==void 0?n:"",lastModified:(i=t.lastModified)!==null&&i!==void 0?i:new Date().getTime(),webkitRelativePath:(s=t.webkitRelativePath)!==null&&s!==void 0?s:"",size:r.byteLength,name:e,arrayBuffer:async()=>r.buffer,stream:()=>new Blob([r]).stream(),[D6]:()=>r}):new File([r],e,t)}});var r5e=O(Oye=>{"use strict";Object.defineProperty(Oye,"__esModule",{value:!0});Oye.concat=err;var hy=(ez(),da(Zq)),xye=require("node:stream"),Ytr=N6(),Xtr=Rye();function e5e(){return hy.__asyncGenerator(this,arguments,function*(){let e=this.getReader();try{for(;;){let{done:t,value:n}=yield hy.__await(e.read());if(t)return yield hy.__await(void 0);yield yield hy.__await(n)}}finally{e.releaseLock()}})}function Jtr(r){r[Symbol.asyncIterator]||(r[Symbol.asyncIterator]=e5e.bind(r)),r.values||(r.values=e5e.bind(r))}function Ztr(r){return r instanceof ReadableStream?(Jtr(r),xye.Readable.fromWeb(r)):r}function t5e(r){return r instanceof Uint8Array?xye.Readable.from(Buffer.from(r)):(0,Ytr.isBlob)(r)?t5e((0,Xtr.getRawContent)(r)):Ztr(r)}async function err(r){return function(){let e=r.map(t=>typeof t=="function"?t():t).map(t5e);return xye.Readable.from(function(){return hy.__asyncGenerator(this,arguments,function*(){var t,n,i,s;for(let l of e)try{for(var o=!0,a=(n=void 0,hy.__asyncValues(l)),c;c=yield hy.__await(a.next()),t=c.done,!t;o=!0){s=c.value,o=!1;let u=s;yield yield hy.__await(u)}}catch(u){n={error:u}}finally{try{!o&&!t&&(i=a.return)&&(yield hy.__await(i.call(a)))}finally{if(n)throw n.error}}})}())}}});var Aye=O(zR=>{"use strict";Object.defineProperty(zR,"__esModule",{value:!0});zR.multipartPolicyName=void 0;zR.multipartPolicy=drr;var VP=gs(),trr=r5e(),rrr=N6();function nrr(){return`----AzSDKFormBoundary${(0,VP.randomUUID)()}`}function irr(r){let e="";for(let[t,n]of r)e+=`${t}: ${n}\r
`;return e}function srr(r){return r instanceof Uint8Array?r.byteLength:(0,rrr.isBlob)(r)?r.size===-1?void 0:r.size:void 0}function orr(r){let e=0;for(let t of r){let n=srr(t);if(n===void 0)return;e+=n}return e}async function arr(r,e,t){let n=[(0,VP.stringToUint8Array)(`--${t}`,"utf-8"),...e.flatMap(s=>[(0,VP.stringToUint8Array)(`\r
`,"utf-8"),(0,VP.stringToUint8Array)(irr(s.headers),"utf-8"),(0,VP.stringToUint8Array)(`\r
`,"utf-8"),s.body,(0,VP.stringToUint8Array)(`\r
--${t}`,"utf-8")]),(0,VP.stringToUint8Array)(`--\r
\r
`,"utf-8")],i=orr(n);i&&r.headers.set("Content-Length",i),r.body=await(0,trr.concat)(n)}zR.multipartPolicyName="multipartPolicy";var crr=70,lrr=new Set("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'()+,-./:=?");function urr(r){if(r.length>crr)throw new Error(`Multipart boundary "${r}" exceeds maximum length of 70 characters`);if(Array.from(r).some(e=>!lrr.has(e)))throw new Error(`Multipart boundary "${r}" contains invalid characters`)}function drr(){return{name:zR.multipartPolicyName,async sendRequest(r,e){var t;if(!r.multipartBody)return e(r);if(r.body)throw new Error("multipartBody and regular body cannot be set at the same time");let n=r.multipartBody.boundary,i=(t=r.headers.get("Content-Type"))!==null&&t!==void 0?t:"multipart/mixed",s=i.match(/^(multipart\/[^ ;]+)(?:; *boundary=(.+))?$/);if(!s)throw new Error(`Got multipart request body, but content-type header was not multipart: ${i}`);let[,o,a]=s;if(a&&n&&a!==n)throw new Error(`Multipart boundary was specified as ${a} in the header, but got ${n} in the request body`);return n??(n=a),n?urr(n):n=nrr(),r.headers.set("Content-Type",`${o}; boundary=${n}`),await arr(r,r.multipartBody.parts,n),r.multipartBody=void 0,e(r)}}}});var Nye=O(FR=>{"use strict";Object.defineProperty(FR,"__esModule",{value:!0});FR.decompressResponsePolicyName=void 0;FR.decompressResponsePolicy=prr;FR.decompressResponsePolicyName="decompressResponsePolicy";function prr(){return{name:FR.decompressResponsePolicyName,async sendRequest(r,e){return r.method!=="HEAD"&&r.headers.set("Accept-Encoding","gzip,deflate"),e(r)}}}});var n5e=O(M6=>{"use strict";Object.defineProperty(M6,"__esModule",{value:!0});M6.AbortError=void 0;var Dye=class extends Error{constructor(e){super(e),this.name="AbortError"}};M6.AbortError=Dye});var L6=O(k6=>{"use strict";Object.defineProperty(k6,"__esModule",{value:!0});k6.AbortError=void 0;var mrr=n5e();Object.defineProperty(k6,"AbortError",{enumerable:!0,get:function(){return mrr.AbortError}})});var z6=O(q6=>{"use strict";Object.defineProperty(q6,"__esModule",{value:!0});q6.delay=grr;q6.parseHeaderValueAsNumber=yrr;var hrr=L6(),frr="The operation was aborted.";function grr(r,e,t){return new Promise((n,i)=>{let s,o,a=()=>i(new hrr.AbortError(t?.abortErrorMsg?t?.abortErrorMsg:frr)),c=()=>{t?.abortSignal&&o&&t.abortSignal.removeEventListener("abort",o)};if(o=()=>(s&&clearTimeout(s),c(),a()),t?.abortSignal&&t.abortSignal.aborted)return a();s=setTimeout(()=>{c(),n(e)},r),t?.abortSignal&&t.abortSignal.addEventListener("abort",o)})}function yrr(r,e){let t=r.headers.get(e);if(!t)return;let n=Number(t);if(!Number.isNaN(n))return n}});var j6=O(F6=>{"use strict";Object.defineProperty(F6,"__esModule",{value:!0});F6.isThrottlingRetryResponse=_rr;F6.throttlingRetryStrategy=Srr;var vrr=z6(),Mye="Retry-After",brr=["retry-after-ms","x-ms-retry-after-ms",Mye];function i5e(r){if(r&&[429,503].includes(r.status))try{for(let i of brr){let s=(0,vrr.parseHeaderValueAsNumber)(r,i);if(s===0||s)return s*(i===Mye?1e3:1)}let e=r.headers.get(Mye);if(!e)return;let n=Date.parse(e)-Date.now();return Number.isFinite(n)?Math.max(0,n):void 0}catch{return}}function _rr(r){return Number.isFinite(i5e(r))}function Srr(){return{name:"throttlingRetryStrategy",retry({response:r}){let e=i5e(r);return Number.isFinite(e)?{retryAfterInMs:e}:{skipStrategy:!0}}}}});var U6=O(iz=>{"use strict";Object.defineProperty(iz,"__esModule",{value:!0});iz.exponentialRetryStrategy=Trr;iz.isExponentialRetryResponse=s5e;iz.isSystemError=o5e;var Crr=gs(),Prr=j6(),wrr=1e3,Err=1e3*64;function Trr(r={}){var e,t;let n=(e=r.retryDelayInMs)!==null&&e!==void 0?e:wrr,i=(t=r.maxRetryDelayInMs)!==null&&t!==void 0?t:Err,s=n;return{name:"exponentialRetryStrategy",retry({retryCount:o,response:a,responseError:c}){let l=o5e(c),u=l&&r.ignoreSystemErrors,d=s5e(a),p=d&&r.ignoreHttpStatusCodes;if(a&&((0,Prr.isThrottlingRetryResponse)(a)||!d)||p||u)return{skipStrategy:!0};if(c&&!l&&!d)return{errorToThrow:c};let f=s*Math.pow(2,o),y=Math.min(i,f);return s=y/2+(0,Crr.getRandomIntegerInclusive)(0,y/2),{retryAfterInMs:s}}}}function s5e(r){return!!(r&&r.status!==void 0&&(r.status>=500||r.status===408)&&r.status!==501&&r.status!==505)}function o5e(r){return r?r.code==="ETIMEDOUT"||r.code==="ESOCKETTIMEDOUT"||r.code==="ECONNREFUSED"||r.code==="ECONNRESET"||r.code==="ENOENT"||r.code==="ENOTFOUND":!1}});var jR=O(kye=>{"use strict";Object.defineProperty(kye,"__esModule",{value:!0});kye.retryPolicy=Arr;var Irr=z6(),Rrr=lu(),xrr=L6(),a5e=s_(),c5e=(0,Rrr.createClientLogger)("core-rest-pipeline retryPolicy"),Orr="retryPolicy";function Arr(r,e={maxRetries:a5e.DEFAULT_RETRY_POLICY_COUNT}){let t=e.logger||c5e;return{name:Orr,async sendRequest(n,i){var s,o;let a,c,l=-1;e:for(;;){l+=1,a=void 0,c=void 0;try{t.info(`Retry ${l}: Attempting to send request`,n.requestId),a=await i(n),t.info(`Retry ${l}: Received a response from request`,n.requestId)}catch(u){if(t.error(`Retry ${l}: Received an error from request`,n.requestId),c=u,!u||c.name!=="RestError")throw u;a=c.response}if(!((s=n.abortSignal)===null||s===void 0)&&s.aborted)throw t.error(`Retry ${l}: Request aborted.`),new xrr.AbortError;if(l>=((o=e.maxRetries)!==null&&o!==void 0?o:a5e.DEFAULT_RETRY_POLICY_COUNT)){if(t.info(`Retry ${l}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),c)throw c;if(a)return a;throw new Error("Maximum retries reached with no response or error to throw")}t.info(`Retry ${l}: Processing ${r.length} retry strategies.`);t:for(let u of r){let d=u.logger||c5e;d.info(`Retry ${l}: Processing retry strategy ${u.name}.`);let p=u.retry({retryCount:l,response:a,responseError:c});if(p.skipStrategy){d.info(`Retry ${l}: Skipped.`);continue t}let{errorToThrow:m,retryAfterInMs:f,redirectTo:y}=p;if(m)throw d.error(`Retry ${l}: Retry strategy ${u.name} throws error:`,m),m;if(f||f===0){d.info(`Retry ${l}: Retry strategy ${u.name} retries after ${f}`),await(0,Irr.delay)(f,void 0,{abortSignal:n.abortSignal});continue e}if(y){d.info(`Retry ${l}: Retry strategy ${u.name} redirects to ${y}`),n.url=y;continue e}}if(c)throw t.info("None of the retry strategies could work with the received error. Throwing it."),c;if(a)return t.info("None of the retry strategies could work with the received response. Returning it."),a}}}}});var Lye=O(UR=>{"use strict";Object.defineProperty(UR,"__esModule",{value:!0});UR.defaultRetryPolicyName=void 0;UR.defaultRetryPolicy=Lrr;var Nrr=U6(),Drr=j6(),Mrr=jR(),krr=s_();UR.defaultRetryPolicyName="defaultRetryPolicy";function Lrr(r={}){var e;return{name:UR.defaultRetryPolicyName,sendRequest:(0,Mrr.retryPolicy)([(0,Drr.throttlingRetryStrategy)(),(0,Nrr.exponentialRetryStrategy)(r)],{maxRetries:(e=r.maxRetries)!==null&&e!==void 0?e:krr.DEFAULT_RETRY_POLICY_COUNT}).sendRequest}}});var sz=O(zye=>{"use strict";Object.defineProperty(zye,"__esModule",{value:!0});zye.createHttpHeaders=zrr;function B6(r){return r.toLowerCase()}function*qrr(r){for(let e of r.values())yield[e.name,e.value]}var qye=class{constructor(e){if(this._headersMap=new Map,e)for(let t of Object.keys(e))this.set(t,e[t])}set(e,t){this._headersMap.set(B6(e),{name:e,value:String(t).trim()})}get(e){var t;return(t=this._headersMap.get(B6(e)))===null||t===void 0?void 0:t.value}has(e){return this._headersMap.has(B6(e))}delete(e){this._headersMap.delete(B6(e))}toJSON(e={}){let t={};if(e.preserveCase)for(let n of this._headersMap.values())t[n.name]=n.value;else for(let[n,i]of this._headersMap)t[n]=i.value;return t}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return qrr(this._headersMap)}};function zrr(r){return new qye(r)}});var Fye=O(BR=>{"use strict";Object.defineProperty(BR,"__esModule",{value:!0});BR.formDataPolicyName=void 0;BR.formDataPolicy=jrr;var u5e=gs(),l5e=sz();BR.formDataPolicyName="formDataPolicy";function Frr(r){var e;let t={};for(let[n,i]of r.entries())(e=t[n])!==null&&e!==void 0||(t[n]=[]),t[n].push(i);return t}function jrr(){return{name:BR.formDataPolicyName,async sendRequest(r,e){if(u5e.isNodeLike&&typeof FormData<"u"&&r.body instanceof FormData&&(r.formData=Frr(r.body),r.body=void 0),r.formData){let t=r.headers.get("Content-Type");t&&t.indexOf("application/x-www-form-urlencoded")!==-1?r.body=Urr(r.formData):await Brr(r.formData,r),r.formData=void 0}return e(r)}}}function Urr(r){let e=new URLSearchParams;for(let[t,n]of Object.entries(r))if(Array.isArray(n))for(let i of n)e.append(t,i.toString());else e.append(t,n.toString());return e.toString()}async function Brr(r,e){let t=e.headers.get("Content-Type");if(t&&!t.startsWith("multipart/form-data"))return;e.headers.set("Content-Type",t??"multipart/form-data");let n=[];for(let[i,s]of Object.entries(r))for(let o of Array.isArray(s)?s:[s])if(typeof o=="string")n.push({headers:(0,l5e.createHttpHeaders)({"Content-Disposition":`form-data; name="${i}"`}),body:(0,u5e.stringToUint8Array)(o,"utf-8")});else{if(o==null||typeof o!="object")throw new Error(`Unexpected value for key ${i}: ${o}. Value should be serialized to string first.`);{let a=o.name||"blob",c=(0,l5e.createHttpHeaders)();c.set("Content-Disposition",`form-data; name="${i}"; filename="${a}"`),c.set("Content-Type",o.type||"application/octet-stream"),n.push({headers:c,body:o})}}e.multipartBody={parts:n}}});var jye=O(Sp=>{"use strict";Object.defineProperty(Sp,"__esModule",{value:!0});Sp.globalNoProxyList=Sp.proxyPolicyName=void 0;Sp.loadNoProxy=f5e;Sp.getDefaultProxySettings=Jrr;Sp.proxyPolicy=enr;var Grr=J4(),$rr=e6(),Vrr=$P(),Hrr="HTTPS_PROXY",Wrr="HTTP_PROXY",Krr="ALL_PROXY",Qrr="NO_PROXY";Sp.proxyPolicyName="proxyPolicy";Sp.globalNoProxyList=[];var m5e=!1,Yrr=new Map;function G6(r){if(process.env[r])return process.env[r];if(process.env[r.toLowerCase()])return process.env[r.toLowerCase()]}function h5e(){if(!process)return;let r=G6(Hrr),e=G6(Krr),t=G6(Wrr);return r||e||t}function Xrr(r,e,t){if(e.length===0)return!1;let n=new URL(r).hostname;if(t?.has(n))return t.get(n);let i=!1;for(let s of e)s[0]==="."?(n.endsWith(s)||n.length===s.length-1&&n===s.slice(1))&&(i=!0):n===s&&(i=!0);return t?.set(n,i),i}function f5e(){let r=G6(Qrr);return m5e=!0,r?r.split(",").map(e=>e.trim()).filter(e=>e.length):[]}function Jrr(r){if(!r&&(r=h5e(),!r))return;let e=new URL(r);return{host:(e.protocol?e.protocol+"//":"")+e.hostname,port:Number.parseInt(e.port||"80"),username:e.username,password:e.password}}function Zrr(){let r=h5e();return r?new URL(r):void 0}function d5e(r){let e;try{e=new URL(r.host)}catch{throw new Error(`Expecting a valid host string in proxy settings, but found "${r.host}".`)}return e.port=String(r.port),r.username&&(e.username=r.username),r.password&&(e.password=r.password),e}function p5e(r,e,t){if(r.agent)return;let i=new URL(r.url).protocol!=="https:";r.tlsSettings&&Vrr.logger.warning("TLS settings are not supported in combination with custom Proxy, certificates provided to the client will be ignored.");let s=r.headers.toJSON();i?(e.httpProxyAgent||(e.httpProxyAgent=new $rr.HttpProxyAgent(t,{headers:s})),r.agent=e.httpProxyAgent):(e.httpsProxyAgent||(e.httpsProxyAgent=new Grr.HttpsProxyAgent(t,{headers:s})),r.agent=e.httpsProxyAgent)}function enr(r,e){m5e||Sp.globalNoProxyList.push(...f5e());let t=r?d5e(r):Zrr(),n={};return{name:Sp.proxyPolicyName,async sendRequest(i,s){var o;return!i.proxySettings&&t&&!Xrr(i.url,(o=e?.customNoProxyList)!==null&&o!==void 0?o:Sp.globalNoProxyList,e?.customNoProxyList?void 0:Yrr)?p5e(i,n,t):i.proxySettings&&p5e(i,n,d5e(i.proxySettings)),s(i)}}}});var Uye=O(GR=>{"use strict";Object.defineProperty(GR,"__esModule",{value:!0});GR.setClientRequestIdPolicyName=void 0;GR.setClientRequestIdPolicy=tnr;GR.setClientRequestIdPolicyName="setClientRequestIdPolicy";function tnr(r="x-ms-client-request-id"){return{name:GR.setClientRequestIdPolicyName,async sendRequest(e,t){return e.headers.has(r)||e.headers.set(r,e.requestId),t(e)}}}});var Bye=O($R=>{"use strict";Object.defineProperty($R,"__esModule",{value:!0});$R.tlsPolicyName=void 0;$R.tlsPolicy=rnr;$R.tlsPolicyName="tlsPolicy";function rnr(r){return{name:$R.tlsPolicyName,sendRequest:async(e,t)=>(e.tlsSettings||(e.tlsSettings=r),t(e))}}});var g5e=O($6=>{"use strict";Object.defineProperty($6,"__esModule",{value:!0});$6.custom=void 0;var nnr=require("node:util");$6.custom=nnr.inspect.custom});var V6=O(oz=>{"use strict";Object.defineProperty(oz,"__esModule",{value:!0});oz.RestError=void 0;oz.isRestError=cnr;var inr=gs(),snr=g5e(),onr=x6(),anr=new onr.Sanitizer,VR=class r extends Error{constructor(e,t={}){super(e),this.name="RestError",this.code=t.code,this.statusCode=t.statusCode,Object.defineProperty(this,"request",{value:t.request,enumerable:!1}),Object.defineProperty(this,"response",{value:t.response,enumerable:!1}),Object.setPrototypeOf(this,r.prototype)}[snr.custom](){return`RestError: ${this.message} 
 ${anr.sanitize(Object.assign(Object.assign({},this),{request:this.request,response:this.response}))}`}};oz.RestError=VR;VR.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR";VR.PARSE_ERROR="PARSE_ERROR";function cnr(r){return r instanceof VR?!0:(0,inr.isError)(r)&&r.name==="RestError"}});var Gye=O(HR=>{"use strict";Object.defineProperty(HR,"__esModule",{value:!0});HR.tracingPolicyName=void 0;HR.tracingPolicy=hnr;var lnr=Bq(),unr=s_(),dnr=Tye(),H6=$P(),az=gs(),pnr=V6(),mnr=x6();HR.tracingPolicyName="tracingPolicy";function hnr(r={}){let e=(0,dnr.getUserAgentValue)(r.userAgentPrefix),t=new mnr.Sanitizer({additionalAllowedQueryParameters:r.additionalAllowedQueryParameters}),n=fnr();return{name:HR.tracingPolicyName,async sendRequest(i,s){var o;if(!n)return s(i);let a=await e,c={"http.url":t.sanitizeUrl(i.url),"http.method":i.method,"http.user_agent":a,requestId:i.requestId};a&&(c["http.user_agent"]=a);let{span:l,tracingContext:u}=(o=gnr(n,i,c))!==null&&o!==void 0?o:{};if(!l||!u)return s(i);try{let d=await n.withContext(u,s,i);return vnr(l,d),d}catch(d){throw ynr(l,d),d}}}}function fnr(){try{return(0,lnr.createTracingClient)({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:unr.SDK_VERSION})}catch(r){H6.logger.warning(`Error when creating the TracingClient: ${(0,az.getErrorMessage)(r)}`);return}}function gnr(r,e,t){try{let{span:n,updatedOptions:i}=r.startSpan(`HTTP ${e.method}`,{tracingOptions:e.tracingOptions},{spanKind:"client",spanAttributes:t});if(!n.isRecording()){n.end();return}let s=r.createRequestHeaders(i.tracingOptions.tracingContext);for(let[o,a]of Object.entries(s))e.headers.set(o,a);return{span:n,tracingContext:i.tracingOptions.tracingContext}}catch(n){H6.logger.warning(`Skipping creating a tracing span due to an error: ${(0,az.getErrorMessage)(n)}`);return}}function ynr(r,e){try{r.setStatus({status:"error",error:(0,az.isError)(e)?e:void 0}),(0,pnr.isRestError)(e)&&e.statusCode&&r.setAttribute("http.status_code",e.statusCode),r.end()}catch(t){H6.logger.warning(`Skipping tracing span processing due to an error: ${(0,az.getErrorMessage)(t)}`)}}function vnr(r,e){try{r.setAttribute("http.status_code",e.status);let t=e.headers.get("x-ms-request-id");t&&r.setAttribute("serviceRequestId",t),r.setStatus({status:"success"}),r.end()}catch(t){H6.logger.warning(`Skipping tracing span processing due to an error: ${(0,az.getErrorMessage)(t)}`)}}});var b5e=O($ye=>{"use strict";Object.defineProperty($ye,"__esModule",{value:!0});$ye.createPipelineFromOptions=Onr;var bnr=Cye(),_nr=bye(),Snr=Pye(),Cnr=Iye(),y5e=Aye(),Pnr=Nye(),wnr=Lye(),Enr=Fye(),v5e=gs(),Tnr=jye(),Inr=Uye(),Rnr=Bye(),xnr=Gye();function Onr(r){var e;let t=(0,_nr.createEmptyPipeline)();return v5e.isNodeLike&&(r.tlsOptions&&t.addPolicy((0,Rnr.tlsPolicy)(r.tlsOptions)),t.addPolicy((0,Tnr.proxyPolicy)(r.proxyOptions)),t.addPolicy((0,Pnr.decompressResponsePolicy)())),t.addPolicy((0,Enr.formDataPolicy)(),{beforePolicies:[y5e.multipartPolicyName]}),t.addPolicy((0,Cnr.userAgentPolicy)(r.userAgentOptions)),t.addPolicy((0,Inr.setClientRequestIdPolicy)((e=r.telemetryOptions)===null||e===void 0?void 0:e.clientRequestIdHeaderName)),t.addPolicy((0,y5e.multipartPolicy)(),{afterPhase:"Deserialize"}),t.addPolicy((0,wnr.defaultRetryPolicy)(r.retryOptions),{phase:"Retry"}),t.addPolicy((0,xnr.tracingPolicy)(Object.assign(Object.assign({},r.userAgentOptions),r.loggingOptions)),{afterPhase:"Retry"}),v5e.isNodeLike&&t.addPolicy((0,Snr.redirectPolicy)(r.redirectOptions),{afterPhase:"Retry"}),t.addPolicy((0,bnr.logPolicy)(r.loggingOptions),{afterPhase:"Sign"}),t}});var E5e=O(K6=>{"use strict";Object.defineProperty(K6,"__esModule",{value:!0});K6.getBodyLength=w5e;K6.createNodeHttpClient=qnr;var Kye=(ez(),da(Zq)),Vye=Kye.__importStar(require("node:http")),Hye=Kye.__importStar(require("node:https")),_5e=Kye.__importStar(require("node:zlib")),Anr=require("node:stream"),S5e=L6(),Nnr=sz(),uz=V6(),cz=$P(),Dnr={};function lz(r){return r&&typeof r.pipe=="function"}function C5e(r){return new Promise(e=>{let t=()=>{e(),r.removeListener("close",t),r.removeListener("end",t),r.removeListener("error",t)};r.on("close",t),r.on("end",t),r.on("error",t)})}function P5e(r){return r&&typeof r.byteLength=="number"}var W6=class extends Anr.Transform{_transform(e,t,n){this.push(e),this.loadedBytes+=e.length;try{this.progressCallback({loadedBytes:this.loadedBytes}),n()}catch(i){n(i)}}constructor(e){super(),this.loadedBytes=0,this.progressCallback=e}},Wye=class{constructor(){this.cachedHttpsAgents=new WeakMap}async sendRequest(e){var t,n,i;let s=new AbortController,o;if(e.abortSignal){if(e.abortSignal.aborted)throw new S5e.AbortError("The operation was aborted.");o=d=>{d.type==="abort"&&s.abort()},e.abortSignal.addEventListener("abort",o)}e.timeout>0&&setTimeout(()=>{s.abort()},e.timeout);let a=e.headers.get("Accept-Encoding"),c=a?.includes("gzip")||a?.includes("deflate"),l=typeof e.body=="function"?e.body():e.body;if(l&&!e.headers.has("Content-Length")){let d=w5e(l);d!==null&&e.headers.set("Content-Length",d)}let u;try{if(l&&e.onUploadProgress){let v=e.onUploadProgress,_=new W6(v);_.on("error",C=>{cz.logger.error("Error in upload progress",C)}),lz(l)?l.pipe(_):_.end(l),l=_}let d=await this.makeRequest(e,s,l),p=Mnr(d),f={status:(t=d.statusCode)!==null&&t!==void 0?t:0,headers:p,request:e};if(e.method==="HEAD")return d.resume(),f;u=c?knr(d,p):d;let y=e.onDownloadProgress;if(y){let v=new W6(y);v.on("error",_=>{cz.logger.error("Error in download progress",_)}),u.pipe(v),u=v}return!((n=e.streamResponseStatusCodes)===null||n===void 0)&&n.has(Number.POSITIVE_INFINITY)||!((i=e.streamResponseStatusCodes)===null||i===void 0)&&i.has(f.status)?f.readableStreamBody=u:f.bodyAsText=await Lnr(u),f}finally{if(e.abortSignal&&o){let d=Promise.resolve();lz(l)&&(d=C5e(l));let p=Promise.resolve();lz(u)&&(p=C5e(u)),Promise.all([d,p]).then(()=>{var m;o&&((m=e.abortSignal)===null||m===void 0||m.removeEventListener("abort",o))}).catch(m=>{cz.logger.warning("Error when cleaning up abortListener on httpRequest",m)})}}}makeRequest(e,t,n){var i;let s=new URL(e.url),o=s.protocol!=="https:";if(o&&!e.allowInsecureConnection)throw new Error(`Cannot connect to ${e.url} while allowInsecureConnection is false.`);let c={agent:(i=e.agent)!==null&&i!==void 0?i:this.getOrCreateAgent(e,o),hostname:s.hostname,path:`${s.pathname}${s.search}`,port:s.port,method:e.method,headers:e.headers.toJSON({preserveCase:!0})};return new Promise((l,u)=>{let d=o?Vye.request(c,l):Hye.request(c,l);d.once("error",p=>{var m;u(new uz.RestError(p.message,{code:(m=p.code)!==null&&m!==void 0?m:uz.RestError.REQUEST_SEND_ERROR,request:e}))}),t.signal.addEventListener("abort",()=>{let p=new S5e.AbortError("The operation was aborted.");d.destroy(p),u(p)}),n&&lz(n)?n.pipe(d):n?typeof n=="string"||Buffer.isBuffer(n)?d.end(n):P5e(n)?d.end(ArrayBuffer.isView(n)?Buffer.from(n.buffer):Buffer.from(n)):(cz.logger.error("Unrecognized body type",n),u(new uz.RestError("Unrecognized body type"))):d.end()})}getOrCreateAgent(e,t){var n;let i=e.disableKeepAlive;if(t)return i?Vye.globalAgent:(this.cachedHttpAgent||(this.cachedHttpAgent=new Vye.Agent({keepAlive:!0})),this.cachedHttpAgent);{if(i&&!e.tlsSettings)return Hye.globalAgent;let s=(n=e.tlsSettings)!==null&&n!==void 0?n:Dnr,o=this.cachedHttpsAgents.get(s);return o&&o.options.keepAlive===!i||(cz.logger.info("No cached TLS Agent exist, creating a new Agent"),o=new Hye.Agent(Object.assign({keepAlive:!i},s)),this.cachedHttpsAgents.set(s,o)),o}}};function Mnr(r){let e=(0,Nnr.createHttpHeaders)();for(let t of Object.keys(r.headers)){let n=r.headers[t];Array.isArray(n)?n.length>0&&e.set(t,n[0]):n&&e.set(t,n)}return e}function knr(r,e){let t=e.get("Content-Encoding");if(t==="gzip"){let n=_5e.createGunzip();return r.pipe(n),n}else if(t==="deflate"){let n=_5e.createInflate();return r.pipe(n),n}return r}function Lnr(r){return new Promise((e,t)=>{let n=[];r.on("data",i=>{Buffer.isBuffer(i)?n.push(i):n.push(Buffer.from(i))}),r.on("end",()=>{e(Buffer.concat(n).toString("utf8"))}),r.on("error",i=>{i&&i?.name==="AbortError"?t(i):t(new uz.RestError(`Error reading response as text: ${i.message}`,{code:uz.RestError.PARSE_ERROR}))})})}function w5e(r){return r?Buffer.isBuffer(r)?r.length:lz(r)?null:P5e(r)?r.byteLength:typeof r=="string"?Buffer.from(r).length:null:0}function qnr(){return new Wye}});var T5e=O(Qye=>{"use strict";Object.defineProperty(Qye,"__esModule",{value:!0});Qye.createDefaultHttpClient=Fnr;var znr=E5e();function Fnr(){return(0,znr.createNodeHttpClient)()}});var I5e=O(Xye=>{"use strict";Object.defineProperty(Xye,"__esModule",{value:!0});Xye.createPipelineRequest=Bnr;var jnr=sz(),Unr=gs(),Yye=class{constructor(e){var t,n,i,s,o,a,c;this.url=e.url,this.body=e.body,this.headers=(t=e.headers)!==null&&t!==void 0?t:(0,jnr.createHttpHeaders)(),this.method=(n=e.method)!==null&&n!==void 0?n:"GET",this.timeout=(i=e.timeout)!==null&&i!==void 0?i:0,this.multipartBody=e.multipartBody,this.formData=e.formData,this.disableKeepAlive=(s=e.disableKeepAlive)!==null&&s!==void 0?s:!1,this.proxySettings=e.proxySettings,this.streamResponseStatusCodes=e.streamResponseStatusCodes,this.withCredentials=(o=e.withCredentials)!==null&&o!==void 0?o:!1,this.abortSignal=e.abortSignal,this.tracingOptions=e.tracingOptions,this.onUploadProgress=e.onUploadProgress,this.onDownloadProgress=e.onDownloadProgress,this.requestId=e.requestId||(0,Unr.randomUUID)(),this.allowInsecureConnection=(a=e.allowInsecureConnection)!==null&&a!==void 0?a:!1,this.enableBrowserStreams=(c=e.enableBrowserStreams)!==null&&c!==void 0?c:!1}};function Bnr(r){return new Yye(r)}});var R5e=O(dz=>{"use strict";Object.defineProperty(dz,"__esModule",{value:!0});dz.exponentialRetryPolicyName=void 0;dz.exponentialRetryPolicy=Hnr;var Gnr=U6(),$nr=jR(),Vnr=s_();dz.exponentialRetryPolicyName="exponentialRetryPolicy";function Hnr(r={}){var e;return(0,$nr.retryPolicy)([(0,Gnr.exponentialRetryStrategy)(Object.assign(Object.assign({},r),{ignoreSystemErrors:!0}))],{maxRetries:(e=r.maxRetries)!==null&&e!==void 0?e:Vnr.DEFAULT_RETRY_POLICY_COUNT})}});var x5e=O(WR=>{"use strict";Object.defineProperty(WR,"__esModule",{value:!0});WR.systemErrorRetryPolicyName=void 0;WR.systemErrorRetryPolicy=Ynr;var Wnr=U6(),Knr=jR(),Qnr=s_();WR.systemErrorRetryPolicyName="systemErrorRetryPolicy";function Ynr(r={}){var e;return{name:WR.systemErrorRetryPolicyName,sendRequest:(0,Knr.retryPolicy)([(0,Wnr.exponentialRetryStrategy)(Object.assign(Object.assign({},r),{ignoreHttpStatusCodes:!0}))],{maxRetries:(e=r.maxRetries)!==null&&e!==void 0?e:Qnr.DEFAULT_RETRY_POLICY_COUNT}).sendRequest}}});var O5e=O(KR=>{"use strict";Object.defineProperty(KR,"__esModule",{value:!0});KR.throttlingRetryPolicyName=void 0;KR.throttlingRetryPolicy=eir;var Xnr=j6(),Jnr=jR(),Znr=s_();KR.throttlingRetryPolicyName="throttlingRetryPolicy";function eir(r={}){var e;return{name:KR.throttlingRetryPolicyName,sendRequest:(0,Jnr.retryPolicy)([(0,Xnr.throttlingRetryStrategy)()],{maxRetries:(e=r.maxRetries)!==null&&e!==void 0?e:Znr.DEFAULT_RETRY_POLICY_COUNT}).sendRequest}}});var Jye=O(QR=>{"use strict";Object.defineProperty(QR,"__esModule",{value:!0});QR.DEFAULT_CYCLER_OPTIONS=void 0;QR.createTokenCycler=nir;var tir=z6();QR.DEFAULT_CYCLER_OPTIONS={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:1e3*60*2};async function rir(r,e,t){async function n(){if(Date.now()<t)try{return await r()}catch{return null}else{let s=await r();if(s===null)throw new Error("Failed to refresh access token.");return s}}let i=await n();for(;i===null;)await(0,tir.delay)(e),i=await n();return i}function nir(r,e){let t=null,n=null,i,s=Object.assign(Object.assign({},QR.DEFAULT_CYCLER_OPTIONS),e),o={get isRefreshing(){return t!==null},get shouldRefresh(){var c;return o.isRefreshing?!1:n?.refreshAfterTimestamp&&n.refreshAfterTimestamp<Date.now()?!0:((c=n?.expiresOnTimestamp)!==null&&c!==void 0?c:0)-s.refreshWindowInMs<Date.now()},get mustRefresh(){return n===null||n.expiresOnTimestamp-s.forcedRefreshWindowInMs<Date.now()}};function a(c,l){var u;return o.isRefreshing||(t=rir(()=>r.getToken(c,l),s.retryIntervalInMs,(u=n?.expiresOnTimestamp)!==null&&u!==void 0?u:Date.now()).then(p=>(t=null,n=p,i=l.tenantId,n)).catch(p=>{throw t=null,n=null,i=void 0,p})),t}return async(c,l)=>{let u=!!l.claims,d=i!==l.tenantId;return u&&(n=null),d||u||o.mustRefresh?a(c,l):(o.shouldRefresh&&a(c,l),n)}}});var A5e=O(YR=>{"use strict";Object.defineProperty(YR,"__esModule",{value:!0});YR.bearerTokenAuthenticationPolicyName=void 0;YR.bearerTokenAuthenticationPolicy=cir;var iir=Jye(),sir=$P();YR.bearerTokenAuthenticationPolicyName="bearerTokenAuthenticationPolicy";async function oir(r){let{scopes:e,getAccessToken:t,request:n}=r,i={abortSignal:n.abortSignal,tracingOptions:n.tracingOptions},s=await t(e,i);s&&r.request.headers.set("Authorization",`Bearer ${s.token}`)}function air(r){let e=r.headers.get("WWW-Authenticate");if(r.status===401&&e)return e}function cir(r){var e;let{credential:t,scopes:n,challengeCallbacks:i}=r,s=r.logger||sir.logger,o=Object.assign({authorizeRequest:(e=i?.authorizeRequest)!==null&&e!==void 0?e:oir,authorizeRequestOnChallenge:i?.authorizeRequestOnChallenge},i),a=t?(0,iir.createTokenCycler)(t):()=>Promise.resolve(null);return{name:YR.bearerTokenAuthenticationPolicyName,async sendRequest(c,l){if(!c.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");await o.authorizeRequest({scopes:Array.isArray(n)?n:[n],request:c,getAccessToken:a,logger:s});let u,d;try{u=await l(c)}catch(p){d=p,u=p.response}if(o.authorizeRequestOnChallenge&&u?.status===401&&air(u)&&await o.authorizeRequestOnChallenge({scopes:Array.isArray(n)?n:[n],request:c,response:u,getAccessToken:a,logger:s}))return l(c);if(d)throw d;return u}}}});var N5e=O(XR=>{"use strict";Object.defineProperty(XR,"__esModule",{value:!0});XR.ndJsonPolicyName=void 0;XR.ndJsonPolicy=lir;XR.ndJsonPolicyName="ndJsonPolicy";function lir(){return{name:XR.ndJsonPolicyName,async sendRequest(r,e){if(typeof r.body=="string"&&r.body.startsWith("[")){let t=JSON.parse(r.body);Array.isArray(t)&&(r.body=t.map(n=>JSON.stringify(n)+`
`).join(""))}return e(r)}}}});var M5e=O(HP=>{"use strict";Object.defineProperty(HP,"__esModule",{value:!0});HP.auxiliaryAuthenticationHeaderPolicyName=void 0;HP.auxiliaryAuthenticationHeaderPolicy=mir;var uir=Jye(),dir=$P();HP.auxiliaryAuthenticationHeaderPolicyName="auxiliaryAuthenticationHeaderPolicy";var D5e="x-ms-authorization-auxiliary";async function pir(r){var e,t;let{scopes:n,getAccessToken:i,request:s}=r,o={abortSignal:s.abortSignal,tracingOptions:s.tracingOptions};return(t=(e=await i(n,o))===null||e===void 0?void 0:e.token)!==null&&t!==void 0?t:""}function mir(r){let{credentials:e,scopes:t}=r,n=r.logger||dir.logger,i=new WeakMap;return{name:HP.auxiliaryAuthenticationHeaderPolicyName,async sendRequest(s,o){if(!s.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication for auxiliary header is not permitted for non-TLS protected (non-https) URLs.");if(!e||e.length===0)return n.info(`${HP.auxiliaryAuthenticationHeaderPolicyName} header will not be set due to empty credentials.`),o(s);let a=[];for(let l of e){let u=i.get(l);u||(u=(0,uir.createTokenCycler)(l),i.set(l,u)),a.push(pir({scopes:Array.isArray(t)?t:[t],request:s,getAccessToken:u,logger:n}))}let c=(await Promise.all(a)).filter(l=>!!l);return c.length===0?(n.warning(`None of the auxiliary tokens are valid. ${D5e} header will not be set.`),o(s)):(s.headers.set(D5e,c.map(l=>`Bearer ${l}`).join(", ")),o(s))}}}});var pz=O(ur=>{"use strict";Object.defineProperty(ur,"__esModule",{value:!0});ur.createFileFromStream=ur.createFile=ur.auxiliaryAuthenticationHeaderPolicyName=ur.auxiliaryAuthenticationHeaderPolicy=ur.ndJsonPolicyName=ur.ndJsonPolicy=ur.bearerTokenAuthenticationPolicyName=ur.bearerTokenAuthenticationPolicy=ur.formDataPolicyName=ur.formDataPolicy=ur.tlsPolicyName=ur.tlsPolicy=ur.userAgentPolicyName=ur.userAgentPolicy=ur.defaultRetryPolicy=ur.tracingPolicyName=ur.tracingPolicy=ur.retryPolicy=ur.throttlingRetryPolicyName=ur.throttlingRetryPolicy=ur.systemErrorRetryPolicyName=ur.systemErrorRetryPolicy=ur.redirectPolicyName=ur.redirectPolicy=ur.getDefaultProxySettings=ur.proxyPolicyName=ur.proxyPolicy=ur.multipartPolicyName=ur.multipartPolicy=ur.logPolicyName=ur.logPolicy=ur.setClientRequestIdPolicyName=ur.setClientRequestIdPolicy=ur.exponentialRetryPolicyName=ur.exponentialRetryPolicy=ur.decompressResponsePolicyName=ur.decompressResponsePolicy=ur.isRestError=ur.RestError=ur.createPipelineRequest=ur.createHttpHeaders=ur.createDefaultHttpClient=ur.createPipelineFromOptions=ur.createEmptyPipeline=void 0;var hir=bye();Object.defineProperty(ur,"createEmptyPipeline",{enumerable:!0,get:function(){return hir.createEmptyPipeline}});var fir=b5e();Object.defineProperty(ur,"createPipelineFromOptions",{enumerable:!0,get:function(){return fir.createPipelineFromOptions}});var gir=T5e();Object.defineProperty(ur,"createDefaultHttpClient",{enumerable:!0,get:function(){return gir.createDefaultHttpClient}});var yir=sz();Object.defineProperty(ur,"createHttpHeaders",{enumerable:!0,get:function(){return yir.createHttpHeaders}});var vir=I5e();Object.defineProperty(ur,"createPipelineRequest",{enumerable:!0,get:function(){return vir.createPipelineRequest}});var k5e=V6();Object.defineProperty(ur,"RestError",{enumerable:!0,get:function(){return k5e.RestError}});Object.defineProperty(ur,"isRestError",{enumerable:!0,get:function(){return k5e.isRestError}});var L5e=Nye();Object.defineProperty(ur,"decompressResponsePolicy",{enumerable:!0,get:function(){return L5e.decompressResponsePolicy}});Object.defineProperty(ur,"decompressResponsePolicyName",{enumerable:!0,get:function(){return L5e.decompressResponsePolicyName}});var q5e=R5e();Object.defineProperty(ur,"exponentialRetryPolicy",{enumerable:!0,get:function(){return q5e.exponentialRetryPolicy}});Object.defineProperty(ur,"exponentialRetryPolicyName",{enumerable:!0,get:function(){return q5e.exponentialRetryPolicyName}});var z5e=Uye();Object.defineProperty(ur,"setClientRequestIdPolicy",{enumerable:!0,get:function(){return z5e.setClientRequestIdPolicy}});Object.defineProperty(ur,"setClientRequestIdPolicyName",{enumerable:!0,get:function(){return z5e.setClientRequestIdPolicyName}});var F5e=Cye();Object.defineProperty(ur,"logPolicy",{enumerable:!0,get:function(){return F5e.logPolicy}});Object.defineProperty(ur,"logPolicyName",{enumerable:!0,get:function(){return F5e.logPolicyName}});var j5e=Aye();Object.defineProperty(ur,"multipartPolicy",{enumerable:!0,get:function(){return j5e.multipartPolicy}});Object.defineProperty(ur,"multipartPolicyName",{enumerable:!0,get:function(){return j5e.multipartPolicyName}});var Zye=jye();Object.defineProperty(ur,"proxyPolicy",{enumerable:!0,get:function(){return Zye.proxyPolicy}});Object.defineProperty(ur,"proxyPolicyName",{enumerable:!0,get:function(){return Zye.proxyPolicyName}});Object.defineProperty(ur,"getDefaultProxySettings",{enumerable:!0,get:function(){return Zye.getDefaultProxySettings}});var U5e=Pye();Object.defineProperty(ur,"redirectPolicy",{enumerable:!0,get:function(){return U5e.redirectPolicy}});Object.defineProperty(ur,"redirectPolicyName",{enumerable:!0,get:function(){return U5e.redirectPolicyName}});var B5e=x5e();Object.defineProperty(ur,"systemErrorRetryPolicy",{enumerable:!0,get:function(){return B5e.systemErrorRetryPolicy}});Object.defineProperty(ur,"systemErrorRetryPolicyName",{enumerable:!0,get:function(){return B5e.systemErrorRetryPolicyName}});var G5e=O5e();Object.defineProperty(ur,"throttlingRetryPolicy",{enumerable:!0,get:function(){return G5e.throttlingRetryPolicy}});Object.defineProperty(ur,"throttlingRetryPolicyName",{enumerable:!0,get:function(){return G5e.throttlingRetryPolicyName}});var bir=jR();Object.defineProperty(ur,"retryPolicy",{enumerable:!0,get:function(){return bir.retryPolicy}});var $5e=Gye();Object.defineProperty(ur,"tracingPolicy",{enumerable:!0,get:function(){return $5e.tracingPolicy}});Object.defineProperty(ur,"tracingPolicyName",{enumerable:!0,get:function(){return $5e.tracingPolicyName}});var _ir=Lye();Object.defineProperty(ur,"defaultRetryPolicy",{enumerable:!0,get:function(){return _ir.defaultRetryPolicy}});var V5e=Iye();Object.defineProperty(ur,"userAgentPolicy",{enumerable:!0,get:function(){return V5e.userAgentPolicy}});Object.defineProperty(ur,"userAgentPolicyName",{enumerable:!0,get:function(){return V5e.userAgentPolicyName}});var H5e=Bye();Object.defineProperty(ur,"tlsPolicy",{enumerable:!0,get:function(){return H5e.tlsPolicy}});Object.defineProperty(ur,"tlsPolicyName",{enumerable:!0,get:function(){return H5e.tlsPolicyName}});var W5e=Fye();Object.defineProperty(ur,"formDataPolicy",{enumerable:!0,get:function(){return W5e.formDataPolicy}});Object.defineProperty(ur,"formDataPolicyName",{enumerable:!0,get:function(){return W5e.formDataPolicyName}});var K5e=A5e();Object.defineProperty(ur,"bearerTokenAuthenticationPolicy",{enumerable:!0,get:function(){return K5e.bearerTokenAuthenticationPolicy}});Object.defineProperty(ur,"bearerTokenAuthenticationPolicyName",{enumerable:!0,get:function(){return K5e.bearerTokenAuthenticationPolicyName}});var Q5e=N5e();Object.defineProperty(ur,"ndJsonPolicy",{enumerable:!0,get:function(){return Q5e.ndJsonPolicy}});Object.defineProperty(ur,"ndJsonPolicyName",{enumerable:!0,get:function(){return Q5e.ndJsonPolicyName}});var Y5e=M5e();Object.defineProperty(ur,"auxiliaryAuthenticationHeaderPolicy",{enumerable:!0,get:function(){return Y5e.auxiliaryAuthenticationHeaderPolicy}});Object.defineProperty(ur,"auxiliaryAuthenticationHeaderPolicyName",{enumerable:!0,get:function(){return Y5e.auxiliaryAuthenticationHeaderPolicyName}});var X5e=Rye();Object.defineProperty(ur,"createFile",{enumerable:!0,get:function(){return X5e.createFile}});Object.defineProperty(ur,"createFileFromStream",{enumerable:!0,get:function(){return X5e.createFileFromStream}})});var J5e=O(Q6=>{"use strict";Object.defineProperty(Q6,"__esModule",{value:!0});Q6.state=void 0;Q6.state={operationRequestMap:new WeakMap}});var mz=O(JR=>{"use strict";Object.defineProperty(JR,"__esModule",{value:!0});JR.getOperationRequestInfo=JR.getOperationArgumentValueFromParameter=void 0;var Z5e=J5e();function t8e(r,e,t){let n=e.parameterPath,i=e.mapper,s;if(typeof n=="string"&&(n=[n]),Array.isArray(n)){if(n.length>0)if(i.isConstant)s=i.defaultValue;else{let o=e8e(r,n);!o.propertyFound&&t&&(o=e8e(t,n));let a=!1;o.propertyFound||(a=i.required||n[0]==="options"&&n.length===2),s=a?i.defaultValue:o.propertyValue}}else{i.required&&(s={});for(let o in n){let a=i.type.modelProperties[o],c=n[o],l=t8e(r,{parameterPath:c,mapper:a},t);l!==void 0&&(s||(s={}),s[o]=l)}}return s}JR.getOperationArgumentValueFromParameter=t8e;function e8e(r,e){let t={propertyFound:!1},n=0;for(;n<e.length;++n){let i=e[n];if(r&&i in r)r=r[i];else break}return n===e.length&&(t.propertyValue=r,t.propertyFound=!0),t}var r8e=Symbol.for("@azure/core-client original request");function Sir(r){return r8e in r}function n8e(r){if(Sir(r))return n8e(r[r8e]);let e=Z5e.state.operationRequestMap.get(r);return e||(e={},Z5e.state.operationRequestMap.set(r,e)),e}JR.getOperationRequestInfo=n8e});var tve=O(WP=>{"use strict";Object.defineProperty(WP,"__esModule",{value:!0});WP.deserializationPolicy=WP.deserializationPolicyName=void 0;var Cir=tz(),Y6=pz(),i8e=rz(),eve=mz(),Pir=["application/json","text/json"],wir=["application/xml","application/atom+xml"];WP.deserializationPolicyName="deserializationPolicy";function Eir(r={}){var e,t,n,i,s,o,a;let c=(t=(e=r.expectedContentTypes)===null||e===void 0?void 0:e.json)!==null&&t!==void 0?t:Pir,l=(i=(n=r.expectedContentTypes)===null||n===void 0?void 0:n.xml)!==null&&i!==void 0?i:wir,u=r.parseXML,d=r.serializerOptions,p={xml:{rootName:(s=d?.xml.rootName)!==null&&s!==void 0?s:"",includeRoot:(o=d?.xml.includeRoot)!==null&&o!==void 0?o:!1,xmlCharKey:(a=d?.xml.xmlCharKey)!==null&&a!==void 0?a:Cir.XML_CHARKEY}};return{name:WP.deserializationPolicyName,async sendRequest(m,f){let y=await f(m);return Rir(c,l,y,p,u)}}}WP.deserializationPolicy=Eir;function Tir(r){let e,t=r.request,n=(0,eve.getOperationRequestInfo)(t),i=n?.operationSpec;return i&&(n?.operationResponseGetter?e=n?.operationResponseGetter(i,r):e=i.responses[r.status]),e}function Iir(r){let e=r.request,t=(0,eve.getOperationRequestInfo)(e),n=t?.shouldDeserialize,i;return n===void 0?i=!0:typeof n=="boolean"?i=n:i=n(r),i}async function Rir(r,e,t,n,i){let s=await Air(r,e,t,n,i);if(!Iir(s))return s;let o=(0,eve.getOperationRequestInfo)(s.request),a=o?.operationSpec;if(!a||!a.responses)return s;let c=Tir(s),{error:l,shouldReturnResponse:u}=Oir(s,a,c,n);if(l)throw l;if(u)return s;if(c){if(c.bodyMapper){let d=s.parsedBody;a.isXML&&c.bodyMapper.type.name===i8e.MapperTypeNames.Sequence&&(d=typeof d=="object"?d[c.bodyMapper.xmlElementName]:[]);try{s.parsedBody=a.serializer.deserialize(c.bodyMapper,d,"operationRes.parsedBody",n)}catch(p){throw new Y6.RestError(`Error ${p} occurred in deserializing the responseBody - ${s.bodyAsText}`,{statusCode:s.status,request:s.request,response:s})}}else a.httpMethod==="HEAD"&&(s.parsedBody=t.status>=200&&t.status<300);c.headersMapper&&(s.parsedHeaders=a.serializer.deserialize(c.headersMapper,s.headers.toJSON(),"operationRes.parsedHeaders",{xml:{},ignoreUnknownProperties:!0}))}return s}function xir(r){let e=Object.keys(r.responses);return e.length===0||e.length===1&&e[0]==="default"}function Oir(r,e,t,n){var i;let s=200<=r.status&&r.status<300;if(xir(e)?s:!!t)if(t){if(!t.isError)return{error:null,shouldReturnResponse:!1}}else return{error:null,shouldReturnResponse:!1};let a=t??e.responses.default,c=!((i=r.request.streamResponseStatusCodes)===null||i===void 0)&&i.has(r.status)?`Unexpected status code: ${r.status}`:r.bodyAsText,l=new Y6.RestError(c,{statusCode:r.status,request:r.request,response:r});if(!a)throw l;let u=a.bodyMapper,d=a.headersMapper;try{if(r.parsedBody){let p=r.parsedBody,m;if(u){let y=p;if(e.isXML&&u.type.name===i8e.MapperTypeNames.Sequence){y=[];let v=u.xmlElementName;typeof p=="object"&&v&&(y=p[v])}m=e.serializer.deserialize(u,y,"error.response.parsedBody",n)}let f=p.error||m||p;l.code=f.code,f.message&&(l.message=f.message),u&&(l.response.parsedBody=m)}r.headers&&d&&(l.response.parsedHeaders=e.serializer.deserialize(d,r.headers.toJSON(),"operationRes.parsedHeaders"))}catch(p){l.message=`Error "${p.message}" occurred in deserializing the responseBody - "${r.bodyAsText}" for the default response.`}return{error:l,shouldReturnResponse:!1}}async function Air(r,e,t,n,i){var s;if(!(!((s=t.request.streamResponseStatusCodes)===null||s===void 0)&&s.has(t.status))&&t.bodyAsText){let o=t.bodyAsText,a=t.headers.get("Content-Type")||"",c=a?a.split(";").map(l=>l.toLowerCase()):[];try{if(c.length===0||c.some(l=>r.indexOf(l)!==-1))return t.parsedBody=JSON.parse(o),t;if(c.some(l=>e.indexOf(l)!==-1)){if(!i)throw new Error("Parsing XML not supported.");let l=await i(o,n.xml);return t.parsedBody=l,t}}catch(l){let u=`Error "${l}" occurred while parsing the response body - ${t.bodyAsText}.`,d=l.code||Y6.RestError.PARSE_ERROR;throw new Y6.RestError(u,{code:d,statusCode:t.status,request:t.request,response:t})}}return t}});var X6=O(ZR=>{"use strict";Object.defineProperty(ZR,"__esModule",{value:!0});ZR.getPathStringFromParameter=ZR.getStreamingResponseStatusCodes=void 0;var Nir=rz();function Dir(r){let e=new Set;for(let t in r.responses){let n=r.responses[t];n.bodyMapper&&n.bodyMapper.type.name===Nir.MapperTypeNames.Stream&&e.add(Number(t))}return e}ZR.getStreamingResponseStatusCodes=Dir;function Mir(r){let{parameterPath:e,mapper:t}=r,n;return typeof e=="string"?n=e:Array.isArray(e)?n=e.join("."):n=t.serializedName,n}ZR.getPathStringFromParameter=Mir});var ive=O(Km=>{"use strict";Object.defineProperty(Km,"__esModule",{value:!0});Km.serializeRequestBody=Km.serializeHeaders=Km.serializationPolicy=Km.serializationPolicyName=void 0;var nve=tz(),J6=mz(),rve=rz(),hz=X6();Km.serializationPolicyName="serializationPolicy";function kir(r={}){let e=r.stringifyXML;return{name:Km.serializationPolicyName,async sendRequest(t,n){let i=(0,J6.getOperationRequestInfo)(t),s=i?.operationSpec,o=i?.operationArguments;return s&&o&&(s8e(t,o,s),o8e(t,o,s,e)),n(t)}}}Km.serializationPolicy=kir;function s8e(r,e,t){var n,i;if(t.headerParameters)for(let o of t.headerParameters){let a=(0,J6.getOperationArgumentValueFromParameter)(e,o);if(a!=null||o.mapper.required){a=t.serializer.serialize(o.mapper,a,(0,hz.getPathStringFromParameter)(o));let c=o.mapper.headerCollectionPrefix;if(c)for(let l of Object.keys(a))r.headers.set(c+l,a[l]);else r.headers.set(o.mapper.serializedName||(0,hz.getPathStringFromParameter)(o),a)}}let s=(i=(n=e.options)===null||n===void 0?void 0:n.requestOptions)===null||i===void 0?void 0:i.customHeaders;if(s)for(let o of Object.keys(s))r.headers.set(o,s[o])}Km.serializeHeaders=s8e;function o8e(r,e,t,n=function(){throw new Error("XML serialization unsupported!")}){var i,s,o,a,c;let l=(i=e.options)===null||i===void 0?void 0:i.serializerOptions,u={xml:{rootName:(s=l?.xml.rootName)!==null&&s!==void 0?s:"",includeRoot:(o=l?.xml.includeRoot)!==null&&o!==void 0?o:!1,xmlCharKey:(a=l?.xml.xmlCharKey)!==null&&a!==void 0?a:nve.XML_CHARKEY}},d=u.xml.xmlCharKey;if(t.requestBody&&t.requestBody.mapper){r.body=(0,J6.getOperationArgumentValueFromParameter)(e,t.requestBody);let p=t.requestBody.mapper,{required:m,serializedName:f,xmlName:y,xmlElementName:v,xmlNamespace:_,xmlNamespacePrefix:C,nullable:P}=p,w=p.type.name;try{if(r.body!==void 0&&r.body!==null||P&&r.body===null||m){let R=(0,hz.getPathStringFromParameter)(t.requestBody);r.body=t.serializer.serialize(p,r.body,R,u);let I=w===rve.MapperTypeNames.Stream;if(t.isXML){let z=C?`xmlns:${C}`:"xmlns",G=Lir(_,z,w,r.body,u);w===rve.MapperTypeNames.Sequence?r.body=n(qir(G,v||y||f,z,_),{rootName:y||f,xmlCharKey:d}):I||(r.body=n(G,{rootName:y||f,xmlCharKey:d}))}else{if(w===rve.MapperTypeNames.String&&(!((c=t.contentType)===null||c===void 0)&&c.match("text/plain")||t.mediaType==="text"))return;I||(r.body=JSON.stringify(r.body))}}}catch(R){throw new Error(`Error "${R.message}" occurred in serializing the payload - ${JSON.stringify(f,void 0,"  ")}.`)}}else if(t.formDataParameters&&t.formDataParameters.length>0){r.formData={};for(let p of t.formDataParameters){let m=(0,J6.getOperationArgumentValueFromParameter)(e,p);if(m!=null){let f=p.mapper.serializedName||(0,hz.getPathStringFromParameter)(p);r.formData[f]=t.serializer.serialize(p.mapper,m,(0,hz.getPathStringFromParameter)(p),u)}}}}Km.serializeRequestBody=o8e;function Lir(r,e,t,n,i){if(r&&!["Composite","Sequence","Dictionary"].includes(t)){let s={};return s[i.xml.xmlCharKey]=n,s[nve.XML_ATTRKEY]={[e]:r},s}return n}function qir(r,e,t,n){if(Array.isArray(r)||(r=[r]),!t||!n)return{[e]:r};let i={[e]:r};return i[nve.XML_ATTRKEY]={[t]:n},i}});var sve=O(Z6=>{"use strict";Object.defineProperty(Z6,"__esModule",{value:!0});Z6.createClientPipeline=void 0;var zir=tve(),a8e=pz(),Fir=ive();function jir(r={}){let e=(0,a8e.createPipelineFromOptions)(r??{});return r.credentialOptions&&e.addPolicy((0,a8e.bearerTokenAuthenticationPolicy)({credential:r.credentialOptions.credential,scopes:r.credentialOptions.credentialScopes})),e.addPolicy((0,Fir.serializationPolicy)(r.serializationOptions),{phase:"Serialize"}),e.addPolicy((0,zir.deserializationPolicy)(r.deserializationOptions),{phase:"Deserialize"}),e}Z6.createClientPipeline=jir});var c8e=O(eK=>{"use strict";Object.defineProperty(eK,"__esModule",{value:!0});eK.getCachedDefaultHttpClient=void 0;var Uir=pz(),ove;function Bir(){return ove||(ove=(0,Uir.createDefaultHttpClient)()),ove}eK.getCachedDefaultHttpClient=Bir});var p8e=O(ex=>{"use strict";Object.defineProperty(ex,"__esModule",{value:!0});ex.appendQueryParams=ex.getRequestUrl=void 0;var u8e=mz(),ave=X6(),Gir={CSV:",",SSV:" ",Multi:"Multi",TSV:"	",Pipes:"|"};function $ir(r,e,t,n){let i=Vir(e,t,n),s=!1,o=l8e(r,i);if(e.path){let l=l8e(e.path,i);e.path==="/{nextLink}"&&l.startsWith("/")&&(l=l.substring(1)),Hir(l)?(o=l,s=!0):o=Wir(o,l)}let{queryParams:a,sequenceParams:c}=Kir(e,t,n);return o=d8e(o,a,c,s),o}ex.getRequestUrl=$ir;function l8e(r,e){let t=r;for(let[n,i]of e)t=t.split(n).join(i);return t}function Vir(r,e,t){var n;let i=new Map;if(!((n=r.urlParameters)===null||n===void 0)&&n.length)for(let s of r.urlParameters){let o=(0,u8e.getOperationArgumentValueFromParameter)(e,s,t),a=(0,ave.getPathStringFromParameter)(s);o=r.serializer.serialize(s.mapper,o,a),s.skipEncoding||(o=encodeURIComponent(o)),i.set(`{${s.mapper.serializedName||a}}`,o)}return i}function Hir(r){return r.includes("://")}function Wir(r,e){if(!e)return r;let t=new URL(r),n=t.pathname;n.endsWith("/")||(n=`${n}/`),e.startsWith("/")&&(e=e.substring(1));let i=e.indexOf("?");if(i!==-1){let s=e.substring(0,i),o=e.substring(i+1);n=n+s,o&&(t.search=t.search?`${t.search}&${o}`:o)}else n=n+e;return t.pathname=n,t.toString()}function Kir(r,e,t){var n;let i=new Map,s=new Set;if(!((n=r.queryParameters)===null||n===void 0)&&n.length)for(let o of r.queryParameters){o.mapper.type.name==="Sequence"&&o.mapper.serializedName&&s.add(o.mapper.serializedName);let a=(0,u8e.getOperationArgumentValueFromParameter)(e,o,t);if(a!=null||o.mapper.required){a=r.serializer.serialize(o.mapper,a,(0,ave.getPathStringFromParameter)(o));let c=o.collectionFormat?Gir[o.collectionFormat]:"";if(Array.isArray(a)&&(a=a.map(l=>l??"")),o.collectionFormat==="Multi"&&a.length===0)continue;Array.isArray(a)&&(o.collectionFormat==="SSV"||o.collectionFormat==="TSV")&&(a=a.join(c)),o.skipEncoding||(Array.isArray(a)?a=a.map(l=>encodeURIComponent(l)):a=encodeURIComponent(a)),Array.isArray(a)&&(o.collectionFormat==="CSV"||o.collectionFormat==="Pipes")&&(a=a.join(c)),i.set(o.mapper.serializedName||(0,ave.getPathStringFromParameter)(o),a)}}return{queryParams:i,sequenceParams:s}}function Qir(r){let e=new Map;if(!r||r[0]!=="?")return e;r=r.slice(1);let t=r.split("&");for(let n of t){let[i,s]=n.split("=",2),o=e.get(i);o?Array.isArray(o)?o.push(s):e.set(i,[o,s]):e.set(i,s)}return e}function d8e(r,e,t,n=!1){if(e.size===0)return r;let i=new URL(r),s=Qir(i.search);for(let[a,c]of e){let l=s.get(a);if(Array.isArray(l))if(Array.isArray(c)){l.push(...c);let u=new Set(l);s.set(a,Array.from(u))}else l.push(c);else l?(Array.isArray(c)?c.unshift(l):t.has(a)&&s.set(a,[l,c]),n||s.set(a,c)):s.set(a,c)}let o=[];for(let[a,c]of s)if(typeof c=="string")o.push(`${a}=${c}`);else if(Array.isArray(c))for(let l of c)o.push(`${a}=${l}`);else o.push(`${a}=${c}`);return i.search=o.length?`?${o.join("&")}`:"",i.toString()}ex.appendQueryParams=d8e});var cve=O(tK=>{"use strict";Object.defineProperty(tK,"__esModule",{value:!0});tK.logger=void 0;var Yir=lu();tK.logger=(0,Yir.createClientLogger)("core-client")});var h8e=O(rK=>{"use strict";Object.defineProperty(rK,"__esModule",{value:!0});rK.ServiceClient=void 0;var Xir=pz(),Jir=sve(),m8e=hye(),Zir=c8e(),esr=mz(),tsr=p8e(),rsr=X6(),nsr=cve(),lve=class{constructor(e={}){var t,n;if(this._requestContentType=e.requestContentType,this._endpoint=(t=e.endpoint)!==null&&t!==void 0?t:e.baseUri,e.baseUri&&nsr.logger.warning("The baseUri option for SDK Clients has been deprecated, please use endpoint instead."),this._allowInsecureConnection=e.allowInsecureConnection,this._httpClient=e.httpClient||(0,Zir.getCachedDefaultHttpClient)(),this.pipeline=e.pipeline||isr(e),!((n=e.additionalPolicies)===null||n===void 0)&&n.length)for(let{policy:i,position:s}of e.additionalPolicies){let o=s==="perRetry"?"Sign":void 0;this.pipeline.addPolicy(i,{afterPhase:o})}}async sendRequest(e){return this.pipeline.sendRequest(this._httpClient,e)}async sendOperationRequest(e,t){let n=t.baseUrl||this._endpoint;if(!n)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a endpoint string property that contains the base URL to use.");let i=(0,tsr.getRequestUrl)(n,t,e,this),s=(0,Xir.createPipelineRequest)({url:i});s.method=t.httpMethod;let o=(0,esr.getOperationRequestInfo)(s);o.operationSpec=t,o.operationArguments=e;let a=t.contentType||this._requestContentType;a&&t.requestBody&&s.headers.set("Content-Type",a);let c=e.options;if(c){let l=c.requestOptions;l&&(l.timeout&&(s.timeout=l.timeout),l.onUploadProgress&&(s.onUploadProgress=l.onUploadProgress),l.onDownloadProgress&&(s.onDownloadProgress=l.onDownloadProgress),l.shouldDeserialize!==void 0&&(o.shouldDeserialize=l.shouldDeserialize),l.allowInsecureConnection&&(s.allowInsecureConnection=!0)),c.abortSignal&&(s.abortSignal=c.abortSignal),c.tracingOptions&&(s.tracingOptions=c.tracingOptions)}this._allowInsecureConnection&&(s.allowInsecureConnection=!0),s.streamResponseStatusCodes===void 0&&(s.streamResponseStatusCodes=(0,rsr.getStreamingResponseStatusCodes)(t));try{let l=await this.sendRequest(s),u=(0,m8e.flattenResponse)(l,t.responses[l.status]);return c?.onResponse&&c.onResponse(l,u),u}catch(l){if(typeof l=="object"&&l?.response){let u=l.response,d=(0,m8e.flattenResponse)(u,t.responses[l.statusCode]||t.responses.default);l.details=d,c?.onResponse&&c.onResponse(u,d,l)}throw l}}};rK.ServiceClient=lve;function isr(r){let e=ssr(r),t=r.credential&&e?{credentialScopes:e,credential:r.credential}:void 0;return(0,Jir.createClientPipeline)(Object.assign(Object.assign({},r),{credentialOptions:t}))}function ssr(r){if(r.credentialScopes)return r.credentialScopes;if(r.endpoint)return`${r.endpoint}/.default`;if(r.baseUri)return`${r.baseUri}/.default`;if(r.credential&&!r.credentialScopes)throw new Error("When using credentials, the ServiceClientOptions must contain either a endpoint or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy")}});var g8e=O(tx=>{"use strict";Object.defineProperty(tx,"__esModule",{value:!0});tx.authorizeRequestOnClaimChallenge=tx.parseCAEChallenge=void 0;var osr=cve(),asr=mye();function f8e(r){return`, ${r.trim()}`.split(", Bearer ").filter(t=>t).map(t=>`${t.trim()}, `.split('", ').filter(s=>s).map(s=>(([o,a])=>({[o]:a}))(s.trim().split('="'))).reduce((s,o)=>Object.assign(Object.assign({},s),o),{}))}tx.parseCAEChallenge=f8e;async function csr(r){let{scopes:e,response:t}=r,n=r.logger||osr.logger,i=t.headers.get("WWW-Authenticate");if(!i)return n.info("The WWW-Authenticate header was missing. Failed to perform the Continuous Access Evaluation authentication flow."),!1;let o=(f8e(i)||[]).find(c=>c.claims);if(!o)return n.info('The WWW-Authenticate header was missing the necessary "claims" to perform the Continuous Access Evaluation authentication flow.'),!1;let a=await r.getAccessToken(o.scope?[o.scope]:e,{claims:(0,asr.decodeStringToString)(o.claims)});return a?(r.request.headers.set("Authorization",`Bearer ${a.token}`),!0):!1}tx.authorizeRequestOnClaimChallenge=csr});var v8e=O(nK=>{"use strict";Object.defineProperty(nK,"__esModule",{value:!0});nK.authorizeRequestOnTenantChallenge=void 0;var y8e={DefaultScope:"/.default",HeaderConstants:{AUTHORIZATION:"authorization"}};function lsr(r){return/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/.test(r)}var usr=async r=>{let e=fsr(r.request),t=msr(r.response);if(t){let n=hsr(t),i=psr(r,n),s=dsr(n);if(!s)return!1;let o=await r.getAccessToken(i,Object.assign(Object.assign({},e),{tenantId:s}));return o?(r.request.headers.set(y8e.HeaderConstants.AUTHORIZATION,`Bearer ${o.token}`),!0):!1}return!1};nK.authorizeRequestOnTenantChallenge=usr;function dsr(r){let n=new URL(r.authorization_uri).pathname.split("/")[1];if(n&&lsr(n))return n}function psr(r,e){if(!e.resource_id)return r.scopes;let t=new URL(e.resource_id);t.pathname=y8e.DefaultScope;let n=t.toString();return n==="https://disk.azure.com/.default"&&(n="https://disk.azure.com//.default"),[n]}function msr(r){let e=r.headers.get("WWW-Authenticate");if(r.status===401&&e)return e}function hsr(r){return`${r.slice(7).trim()} `.split(" ").filter(i=>i).map(i=>(([s,o])=>({[s]:o}))(i.trim().split("="))).reduce((i,s)=>Object.assign(Object.assign({},i),s),{})}function fsr(r){return{abortSignal:r.abortSignal,requestOptions:{timeout:r.timeout},tracingOptions:r.tracingOptions}}});var P8e=O(Bs=>{"use strict";Object.defineProperty(Bs,"__esModule",{value:!0});Bs.authorizeRequestOnTenantChallenge=Bs.authorizeRequestOnClaimChallenge=Bs.serializationPolicyName=Bs.serializationPolicy=Bs.deserializationPolicyName=Bs.deserializationPolicy=Bs.XML_CHARKEY=Bs.XML_ATTRKEY=Bs.createClientPipeline=Bs.ServiceClient=Bs.MapperTypeNames=Bs.createSerializer=void 0;var b8e=rz();Object.defineProperty(Bs,"createSerializer",{enumerable:!0,get:function(){return b8e.createSerializer}});Object.defineProperty(Bs,"MapperTypeNames",{enumerable:!0,get:function(){return b8e.MapperTypeNames}});var gsr=h8e();Object.defineProperty(Bs,"ServiceClient",{enumerable:!0,get:function(){return gsr.ServiceClient}});var ysr=sve();Object.defineProperty(Bs,"createClientPipeline",{enumerable:!0,get:function(){return ysr.createClientPipeline}});var _8e=tz();Object.defineProperty(Bs,"XML_ATTRKEY",{enumerable:!0,get:function(){return _8e.XML_ATTRKEY}});Object.defineProperty(Bs,"XML_CHARKEY",{enumerable:!0,get:function(){return _8e.XML_CHARKEY}});var S8e=tve();Object.defineProperty(Bs,"deserializationPolicy",{enumerable:!0,get:function(){return S8e.deserializationPolicy}});Object.defineProperty(Bs,"deserializationPolicyName",{enumerable:!0,get:function(){return S8e.deserializationPolicyName}});var C8e=ive();Object.defineProperty(Bs,"serializationPolicy",{enumerable:!0,get:function(){return C8e.serializationPolicy}});Object.defineProperty(Bs,"serializationPolicyName",{enumerable:!0,get:function(){return C8e.serializationPolicyName}});var vsr=g8e();Object.defineProperty(Bs,"authorizeRequestOnClaimChallenge",{enumerable:!0,get:function(){return vsr.authorizeRequestOnClaimChallenge}});var bsr=v8e();Object.defineProperty(Bs,"authorizeRequestOnTenantChallenge",{enumerable:!0,get:function(){return bsr.authorizeRequestOnTenantChallenge}})});function fz(){return iK>sK.length-16&&(w8e.default.randomFillSync(sK),iK=0),sK.slice(iK,iK+=16)}var w8e,sK,iK,uve=si(()=>{w8e=ge(require("crypto")),sK=new Uint8Array(256),iK=sK.length});var E8e,T8e=si(()=>{E8e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function _sr(r){return typeof r=="string"&&E8e.test(r)}var o_,gz=si(()=>{T8e();o_=_sr});function Ssr(r,e=0){let t=(zc[r[e+0]]+zc[r[e+1]]+zc[r[e+2]]+zc[r[e+3]]+"-"+zc[r[e+4]]+zc[r[e+5]]+"-"+zc[r[e+6]]+zc[r[e+7]]+"-"+zc[r[e+8]]+zc[r[e+9]]+"-"+zc[r[e+10]]+zc[r[e+11]]+zc[r[e+12]]+zc[r[e+13]]+zc[r[e+14]]+zc[r[e+15]]).toLowerCase();if(!o_(t))throw TypeError("Stringified UUID is invalid");return t}var zc,a_,yz=si(()=>{gz();zc=[];for(let r=0;r<256;++r)zc.push((r+256).toString(16).substr(1));a_=Ssr});function Csr(r,e,t){let n=e&&t||0,i=e||new Array(16);r=r||{};let s=r.node||I8e,o=r.clockseq!==void 0?r.clockseq:dve;if(s==null||o==null){let p=r.random||(r.rng||fz)();s==null&&(s=I8e=[p[0]|1,p[1],p[2],p[3],p[4],p[5]]),o==null&&(o=dve=(p[6]<<8|p[7])&16383)}let a=r.msecs!==void 0?r.msecs:Date.now(),c=r.nsecs!==void 0?r.nsecs:mve+1,l=a-pve+(c-mve)/1e4;if(l<0&&r.clockseq===void 0&&(o=o+1&16383),(l<0||a>pve)&&r.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");pve=a,mve=c,dve=o,a+=122192928e5;let u=((a&268435455)*1e4+c)%4294967296;i[n++]=u>>>24&255,i[n++]=u>>>16&255,i[n++]=u>>>8&255,i[n++]=u&255;let d=a/4294967296*1e4&268435455;i[n++]=d>>>8&255,i[n++]=d&255,i[n++]=d>>>24&15|16,i[n++]=d>>>16&255,i[n++]=o>>>8|128,i[n++]=o&255;for(let p=0;p<6;++p)i[n+p]=s[p];return e||a_(i)}var I8e,dve,pve,mve,R8e,x8e=si(()=>{uve();yz();pve=0,mve=0;R8e=Csr});function Psr(r){if(!o_(r))throw TypeError("Invalid UUID");let e,t=new Uint8Array(16);return t[0]=(e=parseInt(r.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(r.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(r.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(r.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(r.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}var oK,hve=si(()=>{gz();oK=Psr});function wsr(r){r=unescape(encodeURIComponent(r));let e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t));return e}function aK(r,e,t){function n(i,s,o,a){if(typeof i=="string"&&(i=wsr(i)),typeof s=="string"&&(s=oK(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+i.length);if(c.set(s),c.set(i,s.length),c=t(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,o){a=a||0;for(let l=0;l<16;++l)o[a+l]=c[l];return o}return a_(c)}try{n.name=r}catch{}return n.DNS=Esr,n.URL=Tsr,n}var Esr,Tsr,fve=si(()=>{yz();hve();Esr="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Tsr="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function Isr(r){return Array.isArray(r)?r=Buffer.from(r):typeof r=="string"&&(r=Buffer.from(r,"utf8")),O8e.default.createHash("md5").update(r).digest()}var O8e,A8e,N8e=si(()=>{O8e=ge(require("crypto"));A8e=Isr});var Rsr,D8e,M8e=si(()=>{fve();N8e();Rsr=aK("v3",48,A8e),D8e=Rsr});function xsr(r,e,t){r=r||{};let n=r.random||(r.rng||fz)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(let i=0;i<16;++i)e[t+i]=n[i];return e}return a_(n)}var k8e,L8e=si(()=>{uve();yz();k8e=xsr});function Osr(r){return Array.isArray(r)?r=Buffer.from(r):typeof r=="string"&&(r=Buffer.from(r,"utf8")),q8e.default.createHash("sha1").update(r).digest()}var q8e,z8e,F8e=si(()=>{q8e=ge(require("crypto"));z8e=Osr});var Asr,j8e,U8e=si(()=>{fve();F8e();Asr=aK("v5",80,z8e),j8e=Asr});var B8e,G8e=si(()=>{B8e="00000000-0000-0000-0000-000000000000"});function Nsr(r){if(!o_(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}var $8e,V8e=si(()=>{gz();$8e=Nsr});var H8e={};Ea(H8e,{NIL:()=>B8e,parse:()=>oK,stringify:()=>a_,v1:()=>R8e,v3:()=>D8e,v4:()=>k8e,v5:()=>j8e,validate:()=>o_,version:()=>$8e});var W8e=si(()=>{x8e();M8e();L8e();U8e();G8e();V8e();gz();yz();hve()});var Y9e=O(en=>{"use strict";var mK=require("http"),K8e=require("https"),Dsr=(W8e(),da(H8e)),S9e=require("crypto"),Msr=tfe(),vz=require("fs"),ksr=require("path"),Ez=class{static serializeJSONBlob(e){return JSON.stringify(e)}static serializeAccounts(e){let t={};return Object.keys(e).map(function(n){let i=e[n];t[n]={home_account_id:i.homeAccountId,environment:i.environment,realm:i.realm,local_account_id:i.localAccountId,username:i.username,authority_type:i.authorityType,name:i.name,client_info:i.clientInfo,last_modification_time:i.lastModificationTime,last_modification_app:i.lastModificationApp,tenantProfiles:i.tenantProfiles?.map(s=>JSON.stringify(s))}}),t}static serializeIdTokens(e){let t={};return Object.keys(e).map(function(n){let i=e[n];t[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,realm:i.realm}}),t}static serializeAccessTokens(e){let t={};return Object.keys(e).map(function(n){let i=e[n];t[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,realm:i.realm,target:i.target,cached_at:i.cachedAt,expires_on:i.expiresOn,extended_expires_on:i.extendedExpiresOn,refresh_on:i.refreshOn,key_id:i.keyId,token_type:i.tokenType,requestedClaims:i.requestedClaims,requestedClaimsHash:i.requestedClaimsHash,userAssertionHash:i.userAssertionHash}}),t}static serializeRefreshTokens(e){let t={};return Object.keys(e).map(function(n){let i=e[n];t[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,family_id:i.familyId,target:i.target,realm:i.realm}}),t}static serializeAppMetadata(e){let t={};return Object.keys(e).map(function(n){let i=e[n];t[n]={client_id:i.clientId,environment:i.environment,family_id:i.familyId}}),t}static serializeAllCache(e){return{Account:this.serializeAccounts(e.accounts),IdToken:this.serializeIdTokens(e.idTokens),AccessToken:this.serializeAccessTokens(e.accessTokens),RefreshToken:this.serializeRefreshTokens(e.refreshTokens),AppMetadata:this.serializeAppMetadata(e.appMetadata)}}};var Tt={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},co={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},u_=[Tt.OPENID_SCOPE,Tt.PROFILE_SCOPE,Tt.OFFLINE_ACCESS_SCOPE],Q8e=[...u_,Tt.EMAIL_SCOPE],wp={CONTENT_TYPE:"Content-Type",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},fy={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},cK={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},ax={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},Pve={PLAIN:"plain",S256:"S256"},Lsr={QUERY:"query",FRAGMENT:"fragment"},YK={...Lsr,FORM_POST:"form_post"},Ox={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},lK={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},yl={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},Es={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},Gve="appmetadata",qsr="client_info",Sz="1",hK={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},Td={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},Fc={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},Gs={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},Cz={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},Y8e={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},X8e={username:"username",password:"password"},uK={httpSuccess:200,httpBadRequest:400},rx={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},gve={CONFIGURED_MATCHES_DETECTED:"1",CONFIGURED_NO_AUTO_DETECTION:"2",CONFIGURED_NOT_DETECTED:"3",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},La={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},C9e=300;var fK="unexpected_error",Tz="post_request_failed",zsr=Object.freeze({__proto__:null,postRequestFailed:Tz,unexpectedError:fK});var gK={[fK]:"Unexpected error in authentication.",[Tz]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},Fsr={unexpectedError:{code:fK,desc:gK[fK]},postRequestFailed:{code:Tz,desc:gK[Tz]}},xo=class r extends Error{constructor(e,t,n){let i=t?`${e}: ${t}`:e;super(i),Object.setPrototypeOf(this,r.prototype),this.errorCode=e||Tt.EMPTY_STRING,this.errorMessage=t||Tt.EMPTY_STRING,this.subError=n||Tt.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}};function jsr(r,e){return new xo(r,e?`${gK[r]} ${e}`:gK[r])}var cx="client_info_decoding_error",Iz="client_info_empty_error",lx="token_parsing_error",Rz="null_or_empty_token",Cp="endpoints_resolution_error",KP="network_error",xz="openid_config_error",Oz="hash_not_deserialized",d_="invalid_state",ux="state_mismatch",dx="state_not_found",Az="nonce_mismatch",px="auth_time_not_found",Nz="max_age_transpired",mx="multiple_matching_tokens",yK="multiple_matching_accounts",Dz="multiple_matching_appMetadata",Mz="request_cannot_be_made",kz="cannot_remove_empty_scope",Lz="cannot_append_scopeset",hx="empty_input_scopeset",qz="device_code_polling_cancelled",zz="device_code_expired",Fz="device_code_unknown_error",fx="no_account_in_silent_request",jz="invalid_cache_record",gx="invalid_cache_environment",vK="no_account_found",yx="no_crypto_object",bK="unexpected_credential_type",Uz="invalid_assertion",vx="invalid_client_credential",Af="token_refresh_required",Bz="user_timeout_reached",Gz="token_claims_cnf_required_for_signedjwt",$z="authorization_code_missing_from_server_response",Vz="binding_key_not_removed",Hz="end_session_endpoint_not_supported",Wz="key_id_missing",_K="no_network_connectivity",SK="user_canceled",Kz="missing_tenant_id_error",ri="method_not_implemented",CK="nested_app_auth_bridge_disabled",Usr=Object.freeze({__proto__:null,authTimeNotFound:px,authorizationCodeMissingFromServerResponse:$z,bindingKeyNotRemoved:Vz,cannotAppendScopeSet:Lz,cannotRemoveEmptyScope:kz,clientInfoDecodingError:cx,clientInfoEmptyError:Iz,deviceCodeExpired:zz,deviceCodePollingCancelled:qz,deviceCodeUnknownError:Fz,emptyInputScopeSet:hx,endSessionEndpointNotSupported:Hz,endpointResolutionError:Cp,hashNotDeserialized:Oz,invalidAssertion:Uz,invalidCacheEnvironment:gx,invalidCacheRecord:jz,invalidClientCredential:vx,invalidState:d_,keyIdMissing:Wz,maxAgeTranspired:Nz,methodNotImplemented:ri,missingTenantIdError:Kz,multipleMatchingAccounts:yK,multipleMatchingAppMetadata:Dz,multipleMatchingTokens:mx,nestedAppAuthBridgeDisabled:CK,networkError:KP,noAccountFound:vK,noAccountInSilentRequest:fx,noCryptoObject:yx,noNetworkConnectivity:_K,nonceMismatch:Az,nullOrEmptyToken:Rz,openIdConfigError:xz,requestCannotBeMade:Mz,stateMismatch:ux,stateNotFound:dx,tokenClaimsCnfRequiredForSignedJwt:Gz,tokenParsingError:lx,tokenRefreshRequired:Af,unexpectedCredentialType:bK,userCanceled:SK,userTimeoutReached:Bz});var Ln={[cx]:"The client info could not be parsed/decoded correctly",[Iz]:"The client info was empty",[lx]:"Token cannot be parsed",[Rz]:"The token is null or empty",[Cp]:"Endpoints cannot be resolved",[KP]:"Network request failed",[xz]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[Oz]:"The hash parameters could not be deserialized",[d_]:"State was not the expected format",[ux]:"State mismatch error",[dx]:"State not found",[Az]:"Nonce mismatch error",[px]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[Nz]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[mx]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[yK]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[Dz]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[Mz]:"Token request cannot be made without authorization code or refresh token.",[kz]:"Cannot remove null or empty scope from ScopeSet",[Lz]:"Cannot append ScopeSet",[hx]:"Empty input ScopeSet cannot be processed",[qz]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[zz]:"Device code is expired.",[Fz]:"Device code stopped polling for unknown reasons.",[fx]:"Please pass an account object, silent flow is not supported without account information",[jz]:"Cache record object was null or undefined.",[gx]:"Invalid environment when attempting to create cache entry",[vK]:"No account found in cache for given key.",[yx]:"No crypto object detected.",[bK]:"Unexpected credential type.",[Uz]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[vx]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[Af]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[Bz]:"User defined timeout for device code polling reached",[Gz]:"Cannot generate a POP jwt if the token_claims are not populated",[$z]:"Server response does not contain an authorization code to proceed",[Vz]:"Could not remove the credential's binding key from storage.",[Hz]:"The provided authority does not support logout",[Wz]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[_K]:"No network connectivity. Check your internet connection.",[SK]:"User cancelled the flow.",[Kz]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[ri]:"This method has not been implemented",[CK]:"The nested app auth bridge is disabled"},Bsr={clientInfoDecodingError:{code:cx,desc:Ln[cx]},clientInfoEmptyError:{code:Iz,desc:Ln[Iz]},tokenParsingError:{code:lx,desc:Ln[lx]},nullOrEmptyToken:{code:Rz,desc:Ln[Rz]},endpointResolutionError:{code:Cp,desc:Ln[Cp]},networkError:{code:KP,desc:Ln[KP]},unableToGetOpenidConfigError:{code:xz,desc:Ln[xz]},hashNotDeserialized:{code:Oz,desc:Ln[Oz]},invalidStateError:{code:d_,desc:Ln[d_]},stateMismatchError:{code:ux,desc:Ln[ux]},stateNotFoundError:{code:dx,desc:Ln[dx]},nonceMismatchError:{code:Az,desc:Ln[Az]},authTimeNotFoundError:{code:px,desc:Ln[px]},maxAgeTranspired:{code:Nz,desc:Ln[Nz]},multipleMatchingTokens:{code:mx,desc:Ln[mx]},multipleMatchingAccounts:{code:yK,desc:Ln[yK]},multipleMatchingAppMetadata:{code:Dz,desc:Ln[Dz]},tokenRequestCannotBeMade:{code:Mz,desc:Ln[Mz]},removeEmptyScopeError:{code:kz,desc:Ln[kz]},appendScopeSetError:{code:Lz,desc:Ln[Lz]},emptyInputScopeSetError:{code:hx,desc:Ln[hx]},DeviceCodePollingCancelled:{code:qz,desc:Ln[qz]},DeviceCodeExpired:{code:zz,desc:Ln[zz]},DeviceCodeUnknownError:{code:Fz,desc:Ln[Fz]},NoAccountInSilentRequest:{code:fx,desc:Ln[fx]},invalidCacheRecord:{code:jz,desc:Ln[jz]},invalidCacheEnvironment:{code:gx,desc:Ln[gx]},noAccountFound:{code:vK,desc:Ln[vK]},noCryptoObj:{code:yx,desc:Ln[yx]},unexpectedCredentialType:{code:bK,desc:Ln[bK]},invalidAssertion:{code:Uz,desc:Ln[Uz]},invalidClientCredential:{code:vx,desc:Ln[vx]},tokenRefreshRequired:{code:Af,desc:Ln[Af]},userTimeoutReached:{code:Bz,desc:Ln[Bz]},tokenClaimsRequired:{code:Gz,desc:Ln[Gz]},noAuthorizationCodeFromServer:{code:$z,desc:Ln[$z]},bindingKeyNotRemovedError:{code:Vz,desc:Ln[Vz]},logoutNotSupported:{code:Hz,desc:Ln[Hz]},keyIdMissing:{code:Wz,desc:Ln[Wz]},noNetworkConnectivity:{code:_K,desc:Ln[_K]},userCanceledError:{code:SK,desc:Ln[SK]},missingTenantIdError:{code:Kz,desc:Ln[Kz]},nestedAppAuthBridgeDisabled:{code:CK,desc:Ln[CK]}},Qz=class r extends xo{constructor(e,t){super(e,t?`${Ln[e]}: ${t}`:Ln[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,r.prototype)}};function Jt(r,e){return new Qz(r,e)}var wve={createNewGuid:()=>{throw Jt(ri)},base64Decode:()=>{throw Jt(ri)},base64Encode:()=>{throw Jt(ri)},base64UrlEncode:()=>{throw Jt(ri)},encodeKid:()=>{throw Jt(ri)},async getPublicKeyThumbprint(){throw Jt(ri)},async removeTokenBindingKey(){throw Jt(ri)},async clearKeystore(){throw Jt(ri)},async signJwt(){throw Jt(ri)},async hashString(){throw Jt(ri)}};en.LogLevel=void 0;(function(r){r[r.Error=0]="Error",r[r.Warning=1]="Warning",r[r.Info=2]="Info",r[r.Verbose=3]="Verbose",r[r.Trace=4]="Trace"})(en.LogLevel||(en.LogLevel={}));var QP=class r{constructor(e,t,n){this.level=en.LogLevel.Info;let i=()=>{},s=e||r.createDefaultLoggerOptions();this.localCallback=s.loggerCallback||i,this.piiLoggingEnabled=s.piiLoggingEnabled||!1,this.level=typeof s.logLevel=="number"?s.logLevel:en.LogLevel.Info,this.correlationId=s.correlationId||Tt.EMPTY_STRING,this.packageName=t||Tt.EMPTY_STRING,this.packageVersion=n||Tt.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:en.LogLevel.Info}}clone(e,t,n){return new r({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:n||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;let s=`${`[${new Date().toUTCString()}] : [${t.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${en.LogLevel[t.logLevel]} - ${e}`;this.executeCallback(t.logLevel,s,t.containsPii||!1)}executeCallback(e,t,n){this.localCallback&&this.localCallback(e,t,n)}error(e,t){this.logMessage(e,{logLevel:en.LogLevel.Error,containsPii:!1,correlationId:t||Tt.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:en.LogLevel.Error,containsPii:!0,correlationId:t||Tt.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:en.LogLevel.Warning,containsPii:!1,correlationId:t||Tt.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:en.LogLevel.Warning,containsPii:!0,correlationId:t||Tt.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:en.LogLevel.Info,containsPii:!1,correlationId:t||Tt.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:en.LogLevel.Info,containsPii:!0,correlationId:t||Tt.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:en.LogLevel.Verbose,containsPii:!1,correlationId:t||Tt.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:en.LogLevel.Verbose,containsPii:!0,correlationId:t||Tt.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:en.LogLevel.Trace,containsPii:!1,correlationId:t||Tt.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:en.LogLevel.Trace,containsPii:!0,correlationId:t||Tt.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}};var P9e="@azure/msal-common",$ve="14.15.0";var XK={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"};function h1(r,e){let t=Gsr(r);try{let n=e(t);return JSON.parse(n)}catch{throw Jt(lx)}}function Gsr(r){if(!r)throw Jt(Rz);let t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(r);if(!t||t.length<4)throw Jt(lx);return t[2]}function w9e(r,e){if(e===0||Date.now()-3e5>r+e)throw Jt(Nz)}function oa(){return Math.round(new Date().getTime()/1e3)}function bx(r,e){let t=Number(r)||0;return oa()+e>t}function $sr(r){return Number(r)>oa()}function Vsr(r,e){return new Promise(t=>setTimeout(()=>t(e),r))}function nx(r){return[Qsr(r),Ysr(r),Xsr(r),Jsr(r),Zsr(r)].join(yl.CACHE_KEY_SEPARATOR).toLowerCase()}function Hsr(r,e,t,n,i){return{credentialType:Es.ID_TOKEN,homeAccountId:r,environment:e,clientId:n,secret:t,realm:i}}function Wsr(r,e,t,n,i,s,o,a,c,l,u,d,p,m,f){let y={homeAccountId:r,credentialType:Es.ACCESS_TOKEN,secret:t,cachedAt:oa().toString(),expiresOn:o.toString(),extendedExpiresOn:a.toString(),environment:e,clientId:n,realm:i,target:s,tokenType:u||Gs.BEARER};if(d&&(y.userAssertionHash=d),l&&(y.refreshOn=l.toString()),m&&(y.requestedClaims=m,y.requestedClaimsHash=f),y.tokenType?.toLowerCase()!==Gs.BEARER.toLowerCase())switch(y.credentialType=Es.ACCESS_TOKEN_WITH_AUTH_SCHEME,y.tokenType){case Gs.POP:let v=h1(t,c);if(!v?.cnf?.kid)throw Jt(Gz);y.keyId=v.cnf.kid;break;case Gs.SSH:y.keyId=p}return y}function Ksr(r,e,t,n,i,s,o){let a={credentialType:Es.REFRESH_TOKEN,homeAccountId:r,environment:e,clientId:n,secret:t};return s&&(a.userAssertionHash=s),i&&(a.familyId=i),o&&(a.expiresOn=o.toString()),a}function Vve(r){return r.hasOwnProperty("homeAccountId")&&r.hasOwnProperty("environment")&&r.hasOwnProperty("credentialType")&&r.hasOwnProperty("clientId")&&r.hasOwnProperty("secret")}function J8e(r){return r?Vve(r)&&r.hasOwnProperty("realm")&&r.hasOwnProperty("target")&&(r.credentialType===Es.ACCESS_TOKEN||r.credentialType===Es.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function Z8e(r){return r?Vve(r)&&r.hasOwnProperty("realm")&&r.credentialType===Es.ID_TOKEN:!1}function e9e(r){return r?Vve(r)&&r.credentialType===Es.REFRESH_TOKEN:!1}function Qsr(r){return[r.homeAccountId,r.environment].join(yl.CACHE_KEY_SEPARATOR).toLowerCase()}function Ysr(r){let e=r.credentialType===Es.REFRESH_TOKEN&&r.familyId||r.clientId;return[r.credentialType,e,r.realm||""].join(yl.CACHE_KEY_SEPARATOR).toLowerCase()}function Xsr(r){return(r.target||"").toLowerCase()}function Jsr(r){return(r.requestedClaimsHash||"").toLowerCase()}function Zsr(r){return r.tokenType&&r.tokenType.toLowerCase()!==Gs.BEARER.toLowerCase()?r.tokenType.toLowerCase():""}function eor(r,e){let t=r.indexOf(Fc.CACHE_KEY)===0,n=!0;return e&&(n=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),t&&n}function tor(r,e){let t=!1;r&&(t=r.indexOf(Cz.THROTTLING_PREFIX)===0);let n=!0;return e&&(n=e.hasOwnProperty("throttleTime")),t&&n}function ror({environment:r,clientId:e}){return[Gve,r,e].join(yl.CACHE_KEY_SEPARATOR).toLowerCase()}function t9e(r,e){return e?r.indexOf(Gve)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function nor(r,e){return e?r.indexOf(hK.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function r9e(){return oa()+hK.REFRESH_TIME_SECONDS}function dK(r,e,t){r.authorization_endpoint=e.authorization_endpoint,r.token_endpoint=e.token_endpoint,r.end_session_endpoint=e.end_session_endpoint,r.issuer=e.issuer,r.endpointsFromNetwork=t,r.jwks_uri=e.jwks_uri}function yve(r,e,t){r.aliases=e.aliases,r.preferred_cache=e.preferred_cache,r.preferred_network=e.preferred_network,r.aliasesFromNetwork=t}function n9e(r){return r.expiresAt<=oa()}var Yz="redirect_uri_empty",PK="claims_request_parsing_error",Xz="authority_uri_insecure",l_="url_parse_error",_x="empty_url_error",Jz="empty_input_scopes_error",Zz="invalid_prompt_value",Sx="invalid_claims",e1="token_request_empty",t1="logout_request_empty",r1="invalid_code_challenge_method",Cx="pkce_params_missing",Px="invalid_cloud_discovery_metadata",n1="invalid_authority_metadata",i1="untrusted_authority",wx="missing_ssh_jwk",wK="missing_ssh_kid",EK="missing_nonce_authentication_header",TK="invalid_authentication_header",IK="cannot_set_OIDCOptions",RK="cannot_allow_native_broker",xK="authority_mismatch",ior=Object.freeze({__proto__:null,authorityMismatch:xK,authorityUriInsecure:Xz,cannotAllowNativeBroker:RK,cannotSetOIDCOptions:IK,claimsRequestParsingError:PK,emptyInputScopesError:Jz,invalidAuthenticationHeader:TK,invalidAuthorityMetadata:n1,invalidClaims:Sx,invalidCloudDiscoveryMetadata:Px,invalidCodeChallengeMethod:r1,invalidPromptValue:Zz,logoutRequestEmpty:t1,missingNonceAuthenticationHeader:EK,missingSshJwk:wx,missingSshKid:wK,pkceParamsMissing:Cx,redirectUriEmpty:Yz,tokenRequestEmpty:e1,untrustedAuthority:i1,urlEmptyError:_x,urlParseError:l_});var Io={[Yz]:"A redirect URI is required for all calls, and none has been set.",[PK]:"Could not parse the given claims request object.",[Xz]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[l_]:"URL could not be parsed into appropriate segments.",[_x]:"URL was empty or null.",[Jz]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[Zz]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[Sx]:"Given claims parameter must be a stringified JSON object.",[e1]:"Token request was empty and not found in cache.",[t1]:"The logout request was null or undefined.",[r1]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[Cx]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[Px]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[n1]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[i1]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[wx]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[wK]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[EK]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[TK]:"Invalid authentication header provided",[IK]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[RK]:"Cannot set allowNativeBroker parameter to true when not in AAD protocol mode.",[xK]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."},sor={redirectUriNotSet:{code:Yz,desc:Io[Yz]},claimsRequestParsingError:{code:PK,desc:Io[PK]},authorityUriInsecure:{code:Xz,desc:Io[Xz]},urlParseError:{code:l_,desc:Io[l_]},urlEmptyError:{code:_x,desc:Io[_x]},emptyScopesError:{code:Jz,desc:Io[Jz]},invalidPrompt:{code:Zz,desc:Io[Zz]},invalidClaimsRequest:{code:Sx,desc:Io[Sx]},tokenRequestEmptyError:{code:e1,desc:Io[e1]},logoutRequestEmptyError:{code:t1,desc:Io[t1]},invalidCodeChallengeMethod:{code:r1,desc:Io[r1]},invalidCodeChallengeParams:{code:Cx,desc:Io[Cx]},invalidCloudDiscoveryMetadata:{code:Px,desc:Io[Px]},invalidAuthorityMetadata:{code:n1,desc:Io[n1]},untrustedAuthority:{code:i1,desc:Io[i1]},missingSshJwk:{code:wx,desc:Io[wx]},missingSshKid:{code:wK,desc:Io[wK]},missingNonceAuthenticationHeader:{code:EK,desc:Io[EK]},invalidAuthenticationHeader:{code:TK,desc:Io[TK]},cannotSetOIDCOptions:{code:IK,desc:Io[IK]},cannotAllowNativeBroker:{code:RK,desc:Io[RK]},authorityMismatch:{code:xK,desc:Io[xK]}},OK=class r extends xo{constructor(e){super(e,Io[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,r.prototype)}};function Ro(r){return new OK(r)}var xu=class{static isEmptyObj(e){if(e)try{let t=JSON.parse(e);return Object.keys(t).length===0}catch{}return!0}static startsWith(e,t){return e.indexOf(t)===0}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){let t={},n=e.split("&"),i=s=>decodeURIComponent(s.replace(/\+/g," "));return n.forEach(s=>{if(s.trim()){let[o,a]=s.split(/=(.+)/g,2);o&&a&&(t[i(o)]=i(a))}}),t}static trimArrayEntries(e){return e.map(t=>t.trim())}static removeEmptyStringsFromArray(e){return e.filter(t=>!!t)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}};var Ru=class r{constructor(e){let t=e?xu.trimArrayEntries([...e]):[],n=t?xu.removeEmptyStringsFromArray(t):[];this.validateInputScopes(n),this.scopes=new Set,n.forEach(i=>this.scopes.add(i))}static fromString(e){let n=(e||Tt.EMPTY_STRING).split(" ");return new r(n)}static createSearchScopes(e){let t=new r(e);return t.containsOnlyOIDCScopes()?t.removeScope(Tt.OFFLINE_ACCESS_SCOPE):t.removeOIDCScopes(),t}validateInputScopes(e){if(!e||e.length<1)throw Ro(Jz)}containsScope(e){let t=this.printScopesLowerCase().split(" "),n=new r(t);return e?n.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(t=>this.containsScope(t))}containsOnlyOIDCScopes(){let e=0;return Q8e.forEach(t=>{this.containsScope(t)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(t=>this.appendScope(t))}catch{throw Jt(Lz)}}removeScope(e){if(!e)throw Jt(kz);this.scopes.delete(e.trim())}removeOIDCScopes(){Q8e.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw Jt(hx);let t=new Set;return e.scopes.forEach(n=>t.add(n.toLowerCase())),this.scopes.forEach(n=>t.add(n.toLowerCase())),t}intersectingScopeSets(e){if(!e)throw Jt(hx);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();let t=this.unionScopeSets(e),n=e.getScopeCount(),i=this.getScopeCount();return t.size<i+n}getScopeCount(){return this.scopes.size}asArray(){let e=[];return this.scopes.forEach(t=>e.push(t)),e}printScopes(){return this.scopes?this.asArray().join(" "):Tt.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}};function AK(r,e){if(!r)throw Jt(Iz);try{let t=e(r);return JSON.parse(t)}catch{throw Jt(cx)}}function sx(r){if(!r)throw Jt(cx);let e=r.split(yl.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?Tt.EMPTY_STRING:e[1]}}function NK(r,e){return!!r&&!!e&&r===e.split(".")[1]}function Hve(r,e,t,n){if(n){let{oid:i,sub:s,tid:o,name:a,tfp:c,acr:l}=n,u=o||c||l||"";return{tenantId:u,localAccountId:i||s||"",name:a,isHomeTenant:NK(u,r)}}else return{tenantId:t,localAccountId:e,isHomeTenant:NK(t,r)}}function E9e(r,e,t,n){let i=r;if(e){let{isHomeTenant:s,...o}=e;i={...r,...o}}if(t){let{isHomeTenant:s,...o}=Hve(r.homeAccountId,r.localAccountId,r.tenantId,t);return i={...i,...o,idTokenClaims:t,idToken:n},i}return i}var Of={Default:0,Adfs:1,Dsts:2,Ciam:3};function T9e(r){return r&&(r.tid||r.tfp||r.acr)||null}var YP={AAD:"AAD",OIDC:"OIDC"};var Ep=class r{generateAccountId(){return[this.homeAccountId,this.environment].join(yl.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return r.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){let t=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",t||e.tenantId||""].join(yl.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(e,t,n){let i=new r;t.authorityType===Of.Adfs?i.authorityType=lK.ADFS_ACCOUNT_TYPE:t.protocolMode===YP.AAD?i.authorityType=lK.MSSTS_ACCOUNT_TYPE:i.authorityType=lK.GENERIC_ACCOUNT_TYPE;let s;e.clientInfo&&n&&(s=AK(e.clientInfo,n)),i.clientInfo=e.clientInfo,i.homeAccountId=e.homeAccountId,i.nativeAccountId=e.nativeAccountId;let o=e.environment||t&&t.getPreferredCache();if(!o)throw Jt(gx);i.environment=o,i.realm=s?.utid||T9e(e.idTokenClaims)||"",i.localAccountId=s?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";let a=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,c=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(i.username=a||c||"",i.name=e.idTokenClaims?.name||"",i.cloudGraphHostName=e.cloudGraphHostName,i.msGraphHost=e.msGraphHost,e.tenantProfiles)i.tenantProfiles=e.tenantProfiles;else{let l=Hve(e.homeAccountId,i.localAccountId,i.realm,e.idTokenClaims);i.tenantProfiles=[l]}return i}static createFromAccountInfo(e,t,n){let i=new r;return i.authorityType=e.authorityType||lK.GENERIC_ACCOUNT_TYPE,i.homeAccountId=e.homeAccountId,i.localAccountId=e.localAccountId,i.nativeAccountId=e.nativeAccountId,i.realm=e.tenantId,i.environment=e.environment,i.username=e.username,i.name=e.name,i.cloudGraphHostName=t,i.msGraphHost=n,i.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),i}static generateHomeAccountId(e,t,n,i,s){if(!(t===Of.Adfs||t===Of.Dsts)){if(e)try{let o=AK(e,i.base64Decode);if(o.uid&&o.utid)return`${o.uid}.${o.utid}`}catch{}n.warning("No client info in response")}return s?.sub||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,t,n){if(!e||!t)return!1;let i=!0;if(n){let s=e.idTokenClaims||{},o=t.idTokenClaims||{};i=s.iat===o.iat&&s.nonce===o.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&i}};function oor(r){return r.startsWith("#/")?r.substring(2):r.startsWith("#")||r.startsWith("?")?r.substring(1):r}function I9e(r){if(!r||r.indexOf("=")<0)return null;try{let e=oor(r),t=Object.fromEntries(new URLSearchParams(e));if(t.code||t.error||t.error_description||t.state)return t}catch{throw Jt(Oz)}return null}var Js=class r{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw Ro(_x);e.includes("#")||(this._urlString=r.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return xu.endsWith(t,"?")?t=t.slice(0,-1):xu.endsWith(t,"?/")&&(t=t.slice(0,-2)),xu.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw Ro(l_)}if(!e.HostNameAndPort||!e.PathSegments)throw Ro(l_);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw Ro(Xz)}static appendQueryString(e,t){return t?e.indexOf("?")<0?`${e}?${t}`:`${e}&${t}`:e}static removeHashFromUrl(e){return r.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){let t=this.getUrlComponents(),n=t.PathSegments;return e&&n.length!==0&&(n[0]===fy.COMMON||n[0]===fy.ORGANIZATIONS)&&(n[0]=e),r.constructAuthorityUriFromObject(t)}getUrlComponents(){let e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw Ro(l_);let n={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]},i=n.AbsolutePath.split("/");return i=i.filter(s=>s&&s.length>0),n.PathSegments=i,n.QueryString&&n.QueryString.endsWith("/")&&(n.QueryString=n.QueryString.substring(0,n.QueryString.length-1)),n}static getDomainFromUrl(e){let t=RegExp("^([^:/?#]+://)?([^/?#]*)"),n=e.match(t);if(!n)throw Ro(l_);return n[2]}static getAbsoluteUrl(e,t){if(e[0]===Tt.FORWARD_SLASH){let i=new r(t).getUrlComponents();return i.Protocol+"//"+i.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new r(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!I9e(e)}};var R9e={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{tenant_discovery_endpoint:"https://{canonicalAuthority}/v2.0/.well-known/openid-configuration",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},i9e=R9e.endpointMetadata,Wve=R9e.instanceDiscoveryMetadata,x9e=new Set;Wve.metadata.forEach(r=>{r.aliases.forEach(e=>{x9e.add(e)})});function aor(r,e){let t,n=r.canonicalAuthority;if(n){let i=new Js(n).getUrlComponents().HostNameAndPort;t=s9e(i,r.cloudDiscoveryMetadata?.metadata,Td.CONFIG,e)||s9e(i,Wve.metadata,Td.HARDCODED_VALUES,e)||r.knownAuthorities}return t||[]}function s9e(r,e,t,n){if(n?.trace(`getAliasesFromMetadata called with source: ${t}`),r&&e){let i=DK(e,r);if(i)return n?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${t}, returning aliases`),i.aliases;n?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${t}`)}return null}function cor(r){return DK(Wve.metadata,r)}function DK(r,e){for(let t=0;t<r.length;t++){let n=r[t];if(n.aliases.includes(e))return n}return null}var O9e="cache_quota_exceeded",Kve="cache_error_unknown";var vve={[O9e]:"Exceeded cache storage capacity.",[Kve]:"Unexpected error occurred when using cache storage."},Pz=class r extends Error{constructor(e,t){let n=t||(vve[e]?vve[e]:vve[Kve]);super(`${e}: ${n}`),Object.setPrototypeOf(this,r.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=n}};var s1=class r{constructor(e,t,n,i){this.clientId=e,this.cryptoImpl=t,this.commonLogger=n.clone(P9e,$ve),this.staticAuthorityOptions=i}getAllAccounts(e){return this.buildTenantProfiles(this.getAccountsFilteredBy(e||{}),e)}getAccountInfoFilteredBy(e){let t=this.getAllAccounts(e);return t.length>1?t.sort(i=>i.idTokenClaims?-1:1)[0]:t.length===1?t[0]:null}getBaseAccountInfo(e){let t=this.getAccountsFilteredBy(e);return t.length>0?t[0].getAccountInfo():null}buildTenantProfiles(e,t){return e.flatMap(n=>this.getTenantProfilesFromAccountEntity(n,t?.tenantId,t))}getTenantedAccountInfoByFilter(e,t,n,i){let s=null,o;if(i&&!this.tenantProfileMatchesFilter(n,i))return null;let a=this.getIdToken(e,t,n.tenantId);return a&&(o=h1(a.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(o,i))?null:(s=E9e(e,n,o,a?.secret),s)}getTenantProfilesFromAccountEntity(e,t,n){let i=e.getAccountInfo(),s=i.tenantProfiles||new Map,o=this.getTokenKeys();if(t){let c=s.get(t);if(c)s=new Map([[t,c]]);else return[]}let a=[];return s.forEach(c=>{let l=this.getTenantedAccountInfoByFilter(i,o,c,n);l&&a.push(l)}),a}tenantProfileMatchesFilter(e,t){return!(t.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId)||t.name&&e.name!==t.name||t.isHomeTenant!==void 0&&e.isHomeTenant!==t.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,t){return!(t&&(t.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId)||t.loginHint&&!this.matchLoginHintFromTokenClaims(e,t.loginHint)||t.username&&!this.matchUsername(e.preferred_username,t.username)||t.name&&!this.matchName(e,t.name)||t.sid&&!this.matchSid(e,t.sid)))}async saveCacheRecord(e,t,n){if(!e)throw Jt(jz);try{e.account&&this.setAccount(e.account),e.idToken&&t?.idToken!==!1&&this.setIdTokenCredential(e.idToken),e.accessToken&&t?.accessToken!==!1&&await this.saveAccessToken(e.accessToken),e.refreshToken&&t?.refreshToken!==!1&&this.setRefreshTokenCredential(e.refreshToken),e.appMetadata&&this.setAppMetadata(e.appMetadata)}catch(i){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),i instanceof Error?(this.commonLogger?.errorPii(`CacheManager.saveCacheRecord: ${i.message}`,n),i.name==="QuotaExceededError"||i.name==="NS_ERROR_DOM_QUOTA_REACHED"||i.message.includes("exceeded the quota")?(this.commonLogger?.error("CacheManager.saveCacheRecord: exceeded storage quota",n),new Pz(O9e)):new Pz(i.name,i.message)):(this.commonLogger?.errorPii(`CacheManager.saveCacheRecord: ${i}`,n),new Pz(Kve))}}async saveAccessToken(e){let t={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},n=this.getTokenKeys(),i=Ru.fromString(e.target),s=[];n.accessToken.forEach(o=>{if(!this.accessTokenKeyMatchesFilter(o,t,!1))return;let a=this.getAccessTokenCredential(o);a&&this.credentialMatchesFilter(a,t)&&Ru.fromString(a.target).intersectingScopeSets(i)&&s.push(this.removeAccessToken(o))}),await Promise.all(s),this.setAccessTokenCredential(e)}getAccountsFilteredBy(e){let t=this.getAccountKeys(),n=[];return t.forEach(i=>{if(!this.isAccountKey(i,e.homeAccountId))return;let s=this.getAccount(i,this.commonLogger);if(!s||e.homeAccountId&&!this.matchHomeAccountId(s,e.homeAccountId)||e.username&&!this.matchUsername(s.username,e.username)||e.environment&&!this.matchEnvironment(s,e.environment)||e.realm&&!this.matchRealm(s,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(s,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(s,e.authorityType))return;let o={localAccountId:e?.localAccountId,name:e?.name},a=s.tenantProfiles?.filter(c=>this.tenantProfileMatchesFilter(c,o));a&&a.length===0||n.push(s)}),n}isAccountKey(e,t,n){return!(e.split(yl.CACHE_KEY_SEPARATOR).length<3||t&&!e.toLowerCase().includes(t.toLowerCase())||n&&!e.toLowerCase().includes(n.toLowerCase()))}isCredentialKey(e){if(e.split(yl.CACHE_KEY_SEPARATOR).length<6)return!1;let t=e.toLowerCase();if(t.indexOf(Es.ID_TOKEN.toLowerCase())===-1&&t.indexOf(Es.ACCESS_TOKEN.toLowerCase())===-1&&t.indexOf(Es.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())===-1&&t.indexOf(Es.REFRESH_TOKEN.toLowerCase())===-1)return!1;if(t.indexOf(Es.REFRESH_TOKEN.toLowerCase())>-1){let n=`${Es.REFRESH_TOKEN}${yl.CACHE_KEY_SEPARATOR}${this.clientId}${yl.CACHE_KEY_SEPARATOR}`,i=`${Es.REFRESH_TOKEN}${yl.CACHE_KEY_SEPARATOR}${Sz}${yl.CACHE_KEY_SEPARATOR}`;if(t.indexOf(n.toLowerCase())===-1&&t.indexOf(i.toLowerCase())===-1)return!1}else if(t.indexOf(this.clientId.toLowerCase())===-1)return!1;return!0}credentialMatchesFilter(e,t){return!(t.clientId&&!this.matchClientId(e,t.clientId)||t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash)||typeof t.homeAccountId=="string"&&!this.matchHomeAccountId(e,t.homeAccountId)||t.environment&&!this.matchEnvironment(e,t.environment)||t.realm&&!this.matchRealm(e,t.realm)||t.credentialType&&!this.matchCredentialType(e,t.credentialType)||t.familyId&&!this.matchFamilyId(e,t.familyId)||t.target&&!this.matchTarget(e,t.target)||(t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash||e.credentialType===Es.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(t.tokenType&&!this.matchTokenType(e,t.tokenType)||t.tokenType===Gs.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId)))}getAppMetadataFilteredBy(e){let t=this.getKeys(),n={};return t.forEach(i=>{if(!this.isAppMetadata(i))return;let s=this.getAppMetadata(i);s&&(e.environment&&!this.matchEnvironment(s,e.environment)||e.clientId&&!this.matchClientId(s,e.clientId)||(n[i]=s))}),n}getAuthorityMetadataByAlias(e){let t=this.getAuthorityMetadataKeys(),n=null;return t.forEach(i=>{if(!this.isAuthorityMetadata(i)||i.indexOf(this.clientId)===-1)return;let s=this.getAuthorityMetadata(i);s&&s.aliases.indexOf(e)!==-1&&(n=s)}),n}async removeAllAccounts(){let e=this.getAccountKeys(),t=[];e.forEach(n=>{t.push(this.removeAccount(n))}),await Promise.all(t)}async removeAccount(e){let t=this.getAccount(e,this.commonLogger);t&&(await this.removeAccountContext(t),this.removeItem(e))}async removeAccountContext(e){let t=this.getTokenKeys(),n=e.generateAccountId(),i=[];t.idToken.forEach(s=>{s.indexOf(n)===0&&this.removeIdToken(s)}),t.accessToken.forEach(s=>{s.indexOf(n)===0&&i.push(this.removeAccessToken(s))}),t.refreshToken.forEach(s=>{s.indexOf(n)===0&&this.removeRefreshToken(s)}),await Promise.all(i)}updateOutdatedCachedAccount(e,t,n){if(t&&t.isSingleTenant()){this.commonLogger?.verbose("updateOutdatedCachedAccount: Found a single-tenant (outdated) account entity in the cache, migrating to multi-tenant account entity");let i=this.getAccountKeys().filter(l=>l.startsWith(t.homeAccountId)),s=[];i.forEach(l=>{let u=this.getCachedAccountEntity(l);u&&s.push(u)});let o=s.find(l=>NK(l.realm,l.homeAccountId))||s[0];o.tenantProfiles=s.map(l=>({tenantId:l.realm,localAccountId:l.localAccountId,name:l.name,isHomeTenant:NK(l.realm,l.homeAccountId)}));let a=r.toObject(new Ep,{...o}),c=a.generateAccountKey();return i.forEach(l=>{l!==c&&this.removeOutdatedAccount(e)}),this.setAccount(a),n?.verbose("Updated an outdated account entity in the cache"),a}return t}async removeAccessToken(e){let t=this.getAccessTokenCredential(e);if(t){if(t.credentialType.toLowerCase()===Es.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&t.tokenType===Gs.POP){let i=t.keyId;if(i)try{await this.cryptoImpl.removeTokenBindingKey(i)}catch{throw Jt(Vz)}}return this.removeItem(e)}}removeAppMetadata(){return this.getKeys().forEach(t=>{this.isAppMetadata(t)&&this.removeItem(t)}),!0}readAccountFromCache(e){let t=Ep.generateAccountCacheKey(e);return this.getAccount(t,this.commonLogger)}getIdToken(e,t,n,i,s){this.commonLogger.trace("CacheManager - getIdToken called");let o={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Es.ID_TOKEN,clientId:this.clientId,realm:n},a=this.getIdTokensByFilter(o,t),c=a.size;if(c<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(c>1){let l=a;if(!n){let u=new Map;a.forEach((p,m)=>{p.realm===e.tenantId&&u.set(m,p)});let d=u.size;if(d<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(d===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),u.values().next().value;l=u}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),l.forEach((u,d)=>{this.removeIdToken(d)}),i&&s&&i.addFields({multiMatchedID:a.size},s),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,t){let n=t&&t.idToken||this.getTokenKeys().idToken,i=new Map;return n.forEach(s=>{if(!this.idTokenKeyMatchesFilter(s,{clientId:this.clientId,...e}))return;let o=this.getIdTokenCredential(s);o&&this.credentialMatchesFilter(o,e)&&i.set(s,o)}),i}idTokenKeyMatchesFilter(e,t){let n=e.toLowerCase();return!(t.clientId&&n.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&n.indexOf(t.homeAccountId.toLowerCase())===-1)}removeIdToken(e){this.removeItem(e)}removeRefreshToken(e){this.removeItem(e)}getAccessToken(e,t,n,i,s,o){this.commonLogger.trace("CacheManager - getAccessToken called");let a=Ru.createSearchScopes(t.scopes),c=t.authenticationScheme||Gs.BEARER,l=c&&c.toLowerCase()!==Gs.BEARER.toLowerCase()?Es.ACCESS_TOKEN_WITH_AUTH_SCHEME:Es.ACCESS_TOKEN,u={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:l,clientId:this.clientId,realm:i||e.tenantId,target:a,tokenType:c,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},d=n&&n.accessToken||this.getTokenKeys().accessToken,p=[];d.forEach(f=>{if(this.accessTokenKeyMatchesFilter(f,u,!0)){let y=this.getAccessTokenCredential(f);y&&this.credentialMatchesFilter(y,u)&&p.push(y)}});let m=p.length;return m<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):m>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),p.forEach(f=>{this.removeAccessToken(nx(f))}),s&&o&&s.addFields({multiMatchedAT:p.length},o),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),p[0])}accessTokenKeyMatchesFilter(e,t,n){let i=e.toLowerCase();if(t.clientId&&i.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&i.indexOf(t.homeAccountId.toLowerCase())===-1||t.realm&&i.indexOf(t.realm.toLowerCase())===-1||t.requestedClaimsHash&&i.indexOf(t.requestedClaimsHash.toLowerCase())===-1)return!1;if(t.target){let s=t.target.asArray();for(let o=0;o<s.length;o++){if(n&&!i.includes(s[o].toLowerCase()))return!1;if(!n&&i.includes(s[o].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e){let t=this.getTokenKeys(),n=[];return t.accessToken.forEach(i=>{if(!this.accessTokenKeyMatchesFilter(i,e,!0))return;let s=this.getAccessTokenCredential(i);s&&this.credentialMatchesFilter(s,e)&&n.push(s)}),n}getRefreshToken(e,t,n,i,s){this.commonLogger.trace("CacheManager - getRefreshToken called");let o=t?Sz:void 0,a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Es.REFRESH_TOKEN,clientId:this.clientId,familyId:o},c=n&&n.refreshToken||this.getTokenKeys().refreshToken,l=[];c.forEach(d=>{if(this.refreshTokenKeyMatchesFilter(d,a)){let p=this.getRefreshTokenCredential(d);p&&this.credentialMatchesFilter(p,a)&&l.push(p)}});let u=l.length;return u<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(u>1&&i&&s&&i.addFields({multiMatchedRT:u},s),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),l[0])}refreshTokenKeyMatchesFilter(e,t){let n=e.toLowerCase();return!(t.familyId&&n.indexOf(t.familyId.toLowerCase())===-1||!t.familyId&&t.clientId&&n.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&n.indexOf(t.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){let t={environment:e,clientId:this.clientId},n=this.getAppMetadataFilteredBy(t),i=Object.keys(n).map(o=>n[o]),s=i.length;if(s<1)return null;if(s>1)throw Jt(Dz);return i[0]}isAppMetadataFOCI(e){let t=this.readAppMetadataFromCache(e);return!!(t&&t.familyId===Sz)}matchHomeAccountId(e,t){return typeof e.homeAccountId=="string"&&t===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,t){let n=e.oid||e.sub;return t===n}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){return t.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,t){return!!(e&&typeof e=="string"&&t?.toLowerCase()===e.toLowerCase())}matchUserAssertionHash(e,t){return!!(e.userAssertionHash&&t===e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){let i=aor(this.staticAuthorityOptions,this.commonLogger);if(i.includes(t)&&i.includes(e.environment))return!0}let n=this.getAuthorityMetadataByAlias(t);return!!(n&&n.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!!(e.clientId&&t===e.clientId)}matchFamilyId(e,t){return!!(e.familyId&&t===e.familyId)}matchRealm(e,t){return e.realm?.toLowerCase()===t.toLowerCase()}matchNativeAccountId(e,t){return!!(e.nativeAccountId&&t===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||e.preferred_username===t||e.upn===t}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!!(e.authorityType&&t.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,t){return e.credentialType!==Es.ACCESS_TOKEN&&e.credentialType!==Es.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:Ru.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!!(e.tokenType&&e.tokenType===t)}matchKeyId(e,t){return!!(e.keyId&&e.keyId===t)}isAppMetadata(e){return e.indexOf(Gve)!==-1}isAuthorityMetadata(e){return e.indexOf(hK.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${hK.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,t){for(let n in t)e[n]=t[n];return e}},Eve=class extends s1{setAccount(){throw Jt(ri)}getAccount(){throw Jt(ri)}getCachedAccountEntity(){throw Jt(ri)}setIdTokenCredential(){throw Jt(ri)}getIdTokenCredential(){throw Jt(ri)}setAccessTokenCredential(){throw Jt(ri)}getAccessTokenCredential(){throw Jt(ri)}setRefreshTokenCredential(){throw Jt(ri)}getRefreshTokenCredential(){throw Jt(ri)}setAppMetadata(){throw Jt(ri)}getAppMetadata(){throw Jt(ri)}setServerTelemetry(){throw Jt(ri)}getServerTelemetry(){throw Jt(ri)}setAuthorityMetadata(){throw Jt(ri)}getAuthorityMetadata(){throw Jt(ri)}getAuthorityMetadataKeys(){throw Jt(ri)}setThrottlingCache(){throw Jt(ri)}getThrottlingCache(){throw Jt(ri)}removeItem(){throw Jt(ri)}getKeys(){throw Jt(ri)}getAccountKeys(){throw Jt(ri)}getTokenKeys(){throw Jt(ri)}async clear(){throw Jt(ri)}updateCredentialCacheKey(){throw Jt(ri)}removeOutdatedAccount(){throw Jt(ri)}};var lor={tokenRenewalOffsetSeconds:C9e,preventCorsPreflight:!1},uor={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:en.LogLevel.Info,correlationId:Tt.EMPTY_STRING},dor={claimsBasedCachingEnabled:!1},por={async sendGetRequestAsync(){throw Jt(ri)},async sendPostRequestAsync(){throw Jt(ri)}},mor={sku:Tt.SKU,version:$ve,cpu:Tt.EMPTY_STRING,os:Tt.EMPTY_STRING},hor={clientSecret:Tt.EMPTY_STRING,clientAssertion:void 0},gor={azureCloudInstance:XK.None,tenant:`${Tt.DEFAULT_COMMON_TENANT}`},yor={application:{appName:"",appVersion:""}};function vor({authOptions:r,systemOptions:e,loggerOptions:t,cacheOptions:n,storageInterface:i,networkInterface:s,cryptoInterface:o,clientCredentials:a,libraryInfo:c,telemetry:l,serverTelemetryManager:u,persistencePlugin:d,serializableCache:p}){let m={...uor,...t};return{authOptions:bor(r),systemOptions:{...lor,...e},loggerOptions:m,cacheOptions:{...dor,...n},storageInterface:i||new Eve(r.clientId,wve,new QP(m)),networkInterface:s||por,cryptoInterface:o||wve,clientCredentials:a||hor,libraryInfo:{...mor,...c},telemetry:{...yor,...l},serverTelemetryManager:u||null,persistencePlugin:d||null,serializableCache:p||null}}function bor(r){return{clientCapabilities:[],azureCloudOptions:gor,skipAuthorityMetadataCache:!1,instanceAware:!1,...r}}function Tve(r){return r.authOptions.authority.options.protocolMode===YP.OIDC}var p_=class r extends xo{constructor(e,t,n,i,s){super(e,t,n),this.name="ServerError",this.errorNo=i,this.status=s,Object.setPrototypeOf(this,r.prototype)}};var MK=class r{static generateThrottlingStorageKey(e){return`${Cz.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,t){let n=r.generateThrottlingStorageKey(t),i=e.getThrottlingCache(n);if(i){if(i.throttleTime<Date.now()){e.removeItem(n);return}throw new p_(i.errorCodes?.join(" ")||Tt.EMPTY_STRING,i.errorMessage,i.subError)}}static postProcess(e,t,n){if(r.checkResponseStatus(n)||r.checkResponseForRetryAfter(n)){let i={throttleTime:r.calculateThrottleTime(parseInt(n.headers[wp.RETRY_AFTER])),error:n.body.error,errorCodes:n.body.error_codes,errorMessage:n.body.error_description,subError:n.body.suberror};e.setThrottlingCache(r.generateThrottlingStorageKey(t),i)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(wp.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){let t=e<=0?0:e,n=Date.now()/1e3;return Math.floor(Math.min(n+(t||Cz.DEFAULT_THROTTLE_TIME_SECONDS),n+Cz.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,t,n,i){let s={clientId:t,authority:n.authority,scopes:n.scopes,homeAccountIdentifier:i,claims:n.claims,authenticationScheme:n.authenticationScheme,resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,sshKid:n.sshKid},o=this.generateThrottlingStorageKey(s);e.removeItem(o)}};var Ive=class{constructor(e,t){this.networkClient=e,this.cacheManager=t}async sendPostRequest(e,t,n){MK.preProcess(this.cacheManager,e);let i;try{i=await this.networkClient.sendPostRequestAsync(t,n)}catch(s){throw s instanceof xo?s:Jt(KP)}return MK.postProcess(this.cacheManager,e,i),i}};var Nf={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};var kK="client_id",_or="redirect_uri",o9e="response_type",Sor="response_mode",Cor="grant_type",Por="claims",wor="scope",Eor="refresh_token",Tor="state",Ior="nonce",Ror="prompt",xor="code",Oor="code_challenge",Aor="code_challenge_method",Nor="code_verifier",Dor="client-request-id",Mor="x-client-SKU",kor="x-client-VER",Lor="x-client-OS",qor="x-client-CPU",zor="x-client-current-telemetry",For="x-client-last-telemetry",jor="x-ms-lib-capability",Uor="x-app-name",Bor="x-app-ver",Gor="post_logout_redirect_uri",$or="id_token_hint",Vor="device_code",Hor="client_secret",Wor="client_assertion",Kor="client_assertion_type",a9e="token_type",c9e="req_cnf",Qor="assertion",Yor="requested_token_use",Xor="on_behalf_of",l9e="return_spa_code",Jor="nativebroker",Zor="logout_hint",ear="sid",tar="login_hint",rar="domain_hint",u9e="x-client-xtra-sku";var c_=class{static validateRedirectUri(e){if(!e)throw Ro(Yz)}static validatePrompt(e){let t=[];for(let n in ax)t.push(ax[n]);if(t.indexOf(e)<0)throw Ro(Zz)}static validateClaims(e){try{JSON.parse(e)}catch{throw Ro(Sx)}}static validateCodeChallengeParams(e,t){if(!e||!t)throw Ro(Cx);this.validateCodeChallengeMethod(t)}static validateCodeChallengeMethod(e){if([Pve.PLAIN,Pve.S256].indexOf(e)<0)throw Ro(r1)}};var Jl=class{constructor(){this.parameters=new Map}addResponseTypeCode(){this.parameters.set(o9e,encodeURIComponent(Tt.CODE_RESPONSE_TYPE))}addResponseTypeForTokenAndIdToken(){this.parameters.set(o9e,encodeURIComponent(`${Tt.TOKEN_RESPONSE_TYPE} ${Tt.ID_TOKEN_RESPONSE_TYPE}`))}addResponseMode(e){this.parameters.set(Sor,encodeURIComponent(e||YK.QUERY))}addNativeBroker(){this.parameters.set(Jor,encodeURIComponent("1"))}addScopes(e,t=!0,n=u_){t&&!n.includes("openid")&&!e.includes("openid")&&n.push("openid");let i=t?[...e||[],...n]:e||[],s=new Ru(i);this.parameters.set(wor,encodeURIComponent(s.printScopes()))}addClientId(e){this.parameters.set(kK,encodeURIComponent(e))}addRedirectUri(e){c_.validateRedirectUri(e),this.parameters.set(_or,encodeURIComponent(e))}addPostLogoutRedirectUri(e){c_.validateRedirectUri(e),this.parameters.set(Gor,encodeURIComponent(e))}addIdTokenHint(e){this.parameters.set($or,encodeURIComponent(e))}addDomainHint(e){this.parameters.set(rar,encodeURIComponent(e))}addLoginHint(e){this.parameters.set(tar,encodeURIComponent(e))}addCcsUpn(e){this.parameters.set(wp.CCS_HEADER,encodeURIComponent(`UPN:${e}`))}addCcsOid(e){this.parameters.set(wp.CCS_HEADER,encodeURIComponent(`Oid:${e.uid}@${e.utid}`))}addSid(e){this.parameters.set(ear,encodeURIComponent(e))}addClaims(e,t){let n=this.addClientCapabilitiesToClaims(e,t);c_.validateClaims(n),this.parameters.set(Por,encodeURIComponent(n))}addCorrelationId(e){this.parameters.set(Dor,encodeURIComponent(e))}addLibraryInfo(e){this.parameters.set(Mor,e.sku),this.parameters.set(kor,e.version),e.os&&this.parameters.set(Lor,e.os),e.cpu&&this.parameters.set(qor,e.cpu)}addApplicationTelemetry(e){e?.appName&&this.parameters.set(Uor,e.appName),e?.appVersion&&this.parameters.set(Bor,e.appVersion)}addPrompt(e){c_.validatePrompt(e),this.parameters.set(`${Ror}`,encodeURIComponent(e))}addState(e){e&&this.parameters.set(Tor,encodeURIComponent(e))}addNonce(e){this.parameters.set(Ior,encodeURIComponent(e))}addCodeChallengeParams(e,t){if(c_.validateCodeChallengeParams(e,t),e&&t)this.parameters.set(Oor,encodeURIComponent(e)),this.parameters.set(Aor,encodeURIComponent(t));else throw Ro(Cx)}addAuthorizationCode(e){this.parameters.set(xor,encodeURIComponent(e))}addDeviceCode(e){this.parameters.set(Vor,encodeURIComponent(e))}addRefreshToken(e){this.parameters.set(Eor,encodeURIComponent(e))}addCodeVerifier(e){this.parameters.set(Nor,encodeURIComponent(e))}addClientSecret(e){this.parameters.set(Hor,encodeURIComponent(e))}addClientAssertion(e){e&&this.parameters.set(Wor,encodeURIComponent(e))}addClientAssertionType(e){e&&this.parameters.set(Kor,encodeURIComponent(e))}addOboAssertion(e){this.parameters.set(Qor,encodeURIComponent(e))}addRequestTokenUse(e){this.parameters.set(Yor,encodeURIComponent(e))}addGrantType(e){this.parameters.set(Cor,encodeURIComponent(e))}addClientInfo(){this.parameters.set(qsr,"1")}addExtraQueryParameters(e){Object.entries(e).forEach(([t,n])=>{!this.parameters.has(t)&&n&&this.parameters.set(t,n)})}addClientCapabilitiesToClaims(e,t){let n;if(!e)n={};else try{n=JSON.parse(e)}catch{throw Ro(Sx)}return t&&t.length>0&&(n.hasOwnProperty(cK.ACCESS_TOKEN)||(n[cK.ACCESS_TOKEN]={}),n[cK.ACCESS_TOKEN][cK.XMS_CC]={values:t}),JSON.stringify(n)}addUsername(e){this.parameters.set(X8e.username,encodeURIComponent(e))}addPassword(e){this.parameters.set(X8e.password,encodeURIComponent(e))}addPopToken(e){e&&(this.parameters.set(a9e,Gs.POP),this.parameters.set(c9e,encodeURIComponent(e)))}addSshJwk(e){e&&(this.parameters.set(a9e,Gs.SSH),this.parameters.set(c9e,encodeURIComponent(e)))}addServerTelemetry(e){this.parameters.set(zor,e.generateCurrentRequestHeaderValue()),this.parameters.set(For,e.generateLastRequestHeaderValue())}addThrottling(){this.parameters.set(jor,Cz.X_MS_LIB_CAPABILITY_VALUE)}addLogoutHint(e){this.parameters.set(Zor,encodeURIComponent(e))}createQueryString(){let e=new Array;return this.parameters.forEach((t,n)=>{e.push(`${n}=${t}`)}),e.join("&")}};function nar(r){return r.hasOwnProperty("authorization_endpoint")&&r.hasOwnProperty("token_endpoint")&&r.hasOwnProperty("issuer")&&r.hasOwnProperty("jwks_uri")}function iar(r){return r.hasOwnProperty("tenant_discovery_endpoint")&&r.hasOwnProperty("metadata")}function sar(r){return r.hasOwnProperty("error")&&r.hasOwnProperty("error_description")}var Yr={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",StandardInteractionClientInitializeAuthorizationCodeRequest:"standardInteractionClientInitializeAuthorizationCodeRequest",GetAuthCodeUrl:"getAuthCodeUrl",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",AuthClientCreateQueryString:"authClientCreateQueryString",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues"};var oar=(r,e,t,n,i)=>(...s)=>{t.trace(`Executing function ${e}`);let o=n?.startMeasurement(e,i);if(i){let a=e+"CallCount";n?.incrementFields({[a]:1},i)}try{let a=r(...s);return o?.end({success:!0}),t.trace(`Returning result from ${e}`),a}catch(a){t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(a))}catch{t.trace("Unable to print error message.")}throw o?.end({success:!1},a),a}},ys=(r,e,t,n,i)=>(...s)=>{t.trace(`Executing function ${e}`);let o=n?.startMeasurement(e,i);if(i){let a=e+"CallCount";n?.incrementFields({[a]:1},i)}return n?.setPreQueueTime(e,i),r(...s).then(a=>(t.trace(`Returning result from ${e}`),o?.end({success:!0}),a)).catch(a=>{t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(a))}catch{t.trace("Unable to print error message.")}throw o?.end({success:!1},a),a})};var LK=class r{constructor(e,t,n,i){this.networkInterface=e,this.logger=t,this.performanceClient=n,this.correlationId=i}async detectRegion(e,t){this.performanceClient?.addQueueMeasurement(Yr.RegionDiscoveryDetectRegion,this.correlationId);let n=e;if(n)t.region_source=rx.ENVIRONMENT_VARIABLE;else{let i=r.IMDS_OPTIONS;try{let s=await ys(this.getRegionFromIMDS.bind(this),Yr.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(Tt.IMDS_VERSION,i);if(s.status===uK.httpSuccess&&(n=s.body,t.region_source=rx.IMDS),s.status===uK.httpBadRequest){let o=await ys(this.getCurrentVersion.bind(this),Yr.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(i);if(!o)return t.region_source=rx.FAILED_AUTO_DETECTION,null;let a=await ys(this.getRegionFromIMDS.bind(this),Yr.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(o,i);a.status===uK.httpSuccess&&(n=a.body,t.region_source=rx.IMDS)}}catch{return t.region_source=rx.FAILED_AUTO_DETECTION,null}}return n||(t.region_source=rx.FAILED_AUTO_DETECTION),n||null}async getRegionFromIMDS(e,t){return this.performanceClient?.addQueueMeasurement(Yr.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${Tt.IMDS_ENDPOINT}?api-version=${e}&format=text`,t,Tt.IMDS_TIMEOUT)}async getCurrentVersion(e){this.performanceClient?.addQueueMeasurement(Yr.RegionDiscoveryGetCurrentVersion,this.correlationId);try{let t=await this.networkInterface.sendGetRequestAsync(`${Tt.IMDS_ENDPOINT}?format=json`,e);return t.status===uK.httpBadRequest&&t.body&&t.body["newest-versions"]&&t.body["newest-versions"].length>0?t.body["newest-versions"][0]:null}catch{return null}}};LK.IMDS_OPTIONS={headers:{Metadata:"true"}};var XP=class r{constructor(e,t,n,i,s,o,a,c){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=n,this.authorityOptions=i,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=s,this.performanceClient=a,this.correlationId=o,this.managedIdentity=c||!1,this.regionDiscovery=new LK(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(Tt.CIAM_AUTH_URL))return Of.Ciam;let t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case Tt.ADFS:return Of.Adfs;case Tt.DSTS:return Of.Dsts}return Of.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new Js(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw Jt(Cp)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw Jt(Cp)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw Jt(Cp)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw Jt(Hz);return this.replacePath(this.metadata.end_session_endpoint)}else throw Jt(Cp)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw Jt(Cp)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw Jt(Cp)}canReplaceTenant(e){return e.PathSegments.length===1&&!r.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===Of.Default&&this.protocolMode===YP.AAD}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e,i=new Js(this.metadata.canonical_authority).getUrlComponents(),s=i.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((a,c)=>{let l=s[c];if(c===0&&this.canReplaceTenant(i)){let u=new Js(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];l!==u&&(this.logger.verbose(`Replacing tenant domain name ${l} with id ${u}`),l=u)}a!==l&&(t=t.replace(`/${l}/`,`/${a}/`))}),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){let e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===Of.Adfs||this.protocolMode!==YP.AAD&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(Yr.AuthorityResolveEndpointsAsync,this.correlationId);let e=this.getCurrentMetadataEntity(),t=await ys(this.updateCloudDiscoveryMetadata.bind(this),Yr.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);let n=await ys(this.updateEndpointMetadata.bind(this),Yr.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,t,{source:n}),this.performanceClient?.addFields({cloudDiscoverySource:t,authorityEndpointSource:n},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:r9e(),jwks_uri:""}),e}updateCachedMetadata(e,t,n){t!==Td.CACHE&&n?.source!==Td.CACHE&&(e.expiresAt=r9e(),e.canonical_authority=this.canonicalAuthority);let i=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(i,e),this.metadata=e}async updateEndpointMetadata(e){this.performanceClient?.addQueueMeasurement(Yr.AuthorityUpdateEndpointMetadata,this.correlationId);let t=this.updateEndpointMetadataFromLocalSources(e);if(t){if(t.source===Td.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&t.metadata){let i=await ys(this.updateMetadataWithRegionalInformation.bind(this),Yr.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(t.metadata);dK(e,i,!1),e.canonical_authority=this.canonicalAuthority}return t.source}let n=await ys(this.getEndpointMetadataFromNetwork.bind(this),Yr.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(n)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(n=await ys(this.updateMetadataWithRegionalInformation.bind(this),Yr.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(n)),dK(e,n,!0),Td.NETWORK;throw Jt(xz,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");let t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),dK(e,t,!1),{source:Td.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{let i=this.getEndpointMetadataFromHardcodedValues();if(i)return dK(e,i,!1),{source:Td.HARDCODED_VALUES,metadata:i};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}let n=n9e(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!n?(this.logger.verbose("Found endpoint metadata in the cache."),{source:Td.CACHE}):(n&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new Js(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw Ro(n1)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(Yr.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);let e={},t=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${t}`);try{let n=await this.networkInterface.sendGetRequestAsync(t,e);return nar(n.body)?n.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(n){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${n}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in i9e?i9e[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){this.performanceClient?.addQueueMeasurement(Yr.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);let t=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(t){if(t!==Tt.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=gve.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=t,r.replaceWithRegionalInformation(e,t);let n=await ys(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),Yr.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(n)return this.regionDiscoveryMetadata.region_outcome=gve.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=n,r.replaceWithRegionalInformation(e,n);this.regionDiscoveryMetadata.region_outcome=gve.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){this.performanceClient?.addQueueMeasurement(Yr.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);let t=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(t)return t;let n=await ys(this.getCloudDiscoveryMetadataFromNetwork.bind(this),Yr.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(n)return yve(e,n,!0),Td.NETWORK;throw Ro(i1)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||Tt.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||Tt.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||Tt.NOT_APPLICABLE}`);let t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),yve(e,t,!1),Td.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{let i=cor(this.hostnameAndPort);if(i)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),yve(e,i,!1),Td.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}let n=n9e(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!n?(this.logger.verbose("Found cloud discovery metadata in the cache."),Td.CACHE):(n&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===Of.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),r.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");let e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),t=DK(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),t)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),t;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),Ro(Px)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),r.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(Yr.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);let e=`${Tt.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,t={},n=null;try{let i=await this.networkInterface.sendGetRequestAsync(e,t),s,o;if(iar(i.body))s=i.body,o=s.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${s.tenant_discovery_endpoint}`);else if(sar(i.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${i.status}`),s=i.body,s.error===Tt.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${s.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${s.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),o=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),n=DK(o,this.hostnameAndPort)}catch(i){if(i instanceof xo)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${i.errorCode}
Error Description: ${i.errorMessage}`);else{let s=i;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${s.name}
Error Description: ${s.message}`)}return null}return n||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),n=r.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),n}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(t=>t&&Js.getDomainFromUrl(t).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,t){let n;if(t&&t.azureCloudInstance!==XK.None){let i=t.tenant?t.tenant:Tt.DEFAULT_COMMON_TENANT;n=`${t.azureCloudInstance}/${i}/`}return n||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return Tt.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw Jt(Cp)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return x9e.has(e)}static isPublicCloudAuthority(e){return Tt.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,n){let i=new Js(e);i.validateAsUri();let s=i.getUrlComponents(),o=`${t}.${s.HostNameAndPort}`;this.isPublicCloudAuthority(s.HostNameAndPort)&&(o=`${t}.${Tt.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);let a=Js.constructAuthorityUriFromObject({...i.getUrlComponents(),HostNameAndPort:o}).urlString;return n?`${a}?${n}`:a}static replaceWithRegionalInformation(e,t){let n={...e};return n.authorization_endpoint=r.buildRegionalAuthorityString(n.authorization_endpoint,t),n.token_endpoint=r.buildRegionalAuthorityString(n.token_endpoint,t),n.end_session_endpoint&&(n.end_session_endpoint=r.buildRegionalAuthorityString(n.end_session_endpoint,t)),n}static transformCIAMAuthority(e){let t=e,i=new Js(e).getUrlComponents();if(i.PathSegments.length===0&&i.HostNameAndPort.endsWith(Tt.CIAM_AUTH_URL)){let s=i.HostNameAndPort.split(".")[0];t=`${t}${s}${Tt.AAD_TENANT_DOMAIN_SUFFIX}`}return t}};XP.reservedTenantDomains=new Set(["{tenant}","{tenantid}",fy.COMMON,fy.CONSUMERS,fy.ORGANIZATIONS]);function aar(r){let n=new Js(r).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(n){case fy.COMMON:case fy.ORGANIZATIONS:case fy.CONSUMERS:return;default:return n}}function A9e(r){return r.endsWith(Tt.FORWARD_SLASH)?r:`${r}${Tt.FORWARD_SLASH}`}function car(r){let e=r.cloudDiscoveryMetadata,t;if(e)try{t=JSON.parse(e)}catch{throw Ro(Px)}return{canonicalAuthority:r.authority?A9e(r.authority):void 0,knownAuthorities:r.knownAuthorities,cloudDiscoveryMetadata:t}}async function N9e(r,e,t,n,i,s,o){o?.addQueueMeasurement(Yr.AuthorityFactoryCreateDiscoveredInstance,s);let a=XP.transformCIAMAuthority(A9e(r)),c=new XP(a,e,t,n,i,s,o);try{return await ys(c.resolveEndpointsAsync.bind(c),Yr.AuthorityResolveEndpointsAsync,i,o,s)(),c}catch{throw Jt(Cp)}}var yy=class{constructor(e,t){this.config=vor(e),this.logger=new QP(this.config.loggerOptions,P9e,$ve),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.networkManager=new Ive(this.networkClient,this.cacheManager),this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){let t={};if(t[wp.CONTENT_TYPE]=Tt.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case Nf.HOME_ACCOUNT_ID:try{let n=sx(e.credential);t[wp.CCS_HEADER]=`Oid:${n.uid}@${n.utid}`}catch(n){this.logger.verbose("Could not parse home account ID for CCS Header: "+n)}break;case Nf.UPN:t[wp.CCS_HEADER]=`UPN: ${e.credential}`;break}return t}async executePostToTokenEndpoint(e,t,n,i,s,o){o&&this.performanceClient?.addQueueMeasurement(o,s);let a=await this.networkManager.sendPostRequest(i,e,{body:t,headers:n});return this.performanceClient?.addFields({refreshTokenSize:a.body.refresh_token?.length||0,httpVerToken:a.headers?.[wp.X_MS_HTTP_VERSION]||""},s),this.config.serverTelemetryManager&&a.status<500&&a.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),a}async updateAuthority(e,t){this.performanceClient?.addQueueMeasurement(Yr.UpdateTokenEndpointAuthority,t);let n=`https://${e}/${this.authority.tenant}/`,i=await N9e(n,this.networkClient,this.cacheManager,this.authority.options,this.logger,t,this.performanceClient);this.authority=i}createTokenQueryParameters(e){let t=new Jl;return e.tokenQueryParameters&&t.addExtraQueryParameters(e.tokenQueryParameters),t.createQueryString()}};var Ex="no_tokens_found",qK="native_account_unavailable",Qve="refresh_token_expired",D9e="interaction_required",M9e="consent_required",k9e="login_required",Tx="bad_token",lar=Object.freeze({__proto__:null,badToken:Tx,consentRequired:M9e,interactionRequired:D9e,loginRequired:k9e,nativeAccountUnavailable:qK,noTokensFound:Ex,refreshTokenExpired:Qve});var d9e=[D9e,M9e,k9e,Tx],uar=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],pK={[Ex]:"No refresh token found in the cache. Please sign-in.",[qK]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[Qve]:"Refresh token has expired.",[Tx]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."},dar={noTokensFoundError:{code:Ex,desc:pK[Ex]},native_account_unavailable:{code:qK,desc:pK[qK]},bad_token:{code:Tx,desc:pK[Tx]}},m_=class r extends xo{constructor(e,t,n,i,s,o,a,c){super(e,t,n),Object.setPrototypeOf(this,r.prototype),this.timestamp=i||Tt.EMPTY_STRING,this.traceId=s||Tt.EMPTY_STRING,this.correlationId=o||Tt.EMPTY_STRING,this.claims=a||Tt.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=c}};function p9e(r,e,t){let n=!!r&&d9e.indexOf(r)>-1,i=!!t&&uar.indexOf(t)>-1,s=!!e&&d9e.some(o=>e.indexOf(o)>-1);return n||s||i}function m9e(r){return new m_(r,pK[r])}var Rve=class r{static setRequestState(e,t,n){let i=r.generateLibraryState(e,n);return t?`${i}${Tt.RESOURCE_DELIM}${t}`:i}static generateLibraryState(e,t){if(!e)throw Jt(yx);let n={id:e.createNewGuid()};t&&(n.meta=t);let i=JSON.stringify(n);return e.base64Encode(i)}static parseRequestState(e,t){if(!e)throw Jt(yx);if(!t)throw Jt(d_);try{let n=t.split(Tt.RESOURCE_DELIM),i=n[0],s=n.length>1?n.slice(1).join(Tt.RESOURCE_DELIM):Tt.EMPTY_STRING,o=e.base64Decode(i),a=JSON.parse(o);return{userRequestState:s||Tt.EMPTY_STRING,libraryState:a}}catch{throw Jt(d_)}}};var par={SW:"sw",UHW:"uhw"},Ix=class{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}async generateCnf(e,t){this.performanceClient?.addQueueMeasurement(Yr.PopTokenGenerateCnf,e.correlationId);let n=await ys(this.generateKid.bind(this),Yr.PopTokenGenerateCnf,t,this.performanceClient,e.correlationId)(e),i=this.cryptoUtils.base64UrlEncode(JSON.stringify(n));return{kid:n.kid,reqCnfString:i}}async generateKid(e){return this.performanceClient?.addQueueMeasurement(Yr.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:par.SW}}async signPopToken(e,t,n){return this.signPayload(e,t,n)}async signPayload(e,t,n,i){let{resourceRequestMethod:s,resourceRequestUri:o,shrClaims:a,shrNonce:c,shrOptions:l}=n,d=(o?new Js(o):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:oa(),m:s?.toUpperCase(),u:d?.HostNameAndPort,nonce:c||this.cryptoUtils.createNewGuid(),p:d?.AbsolutePath,q:d?.QueryString?[[],d.QueryString]:void 0,client_claims:a||void 0,...i},t,l,n.correlationId)}};var JP=class{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}};function mar(r){let e="code=",t=r.error_uri?.lastIndexOf(e);return t&&t>=0?r.error_uri?.substring(t+e.length):void 0}var Rd=class r{constructor(e,t,n,i,s,o,a){this.clientId=e,this.cacheStorage=t,this.cryptoObj=n,this.logger=i,this.serializableCache=s,this.persistencePlugin=o,this.performanceClient=a}validateServerAuthorizationCodeResponse(e,t){if(!e.state||!t)throw e.state?Jt(dx,"Cached State"):Jt(dx,"Server State");let n,i;try{n=decodeURIComponent(e.state)}catch{throw Jt(d_,e.state)}try{i=decodeURIComponent(t)}catch{throw Jt(d_,e.state)}if(n!==i)throw Jt(ux);if(e.error||e.error_description||e.suberror){let s=mar(e);throw p9e(e.error,e.error_description,e.suberror)?new m_(e.error||"",e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||"",s):new p_(e.error||"",e.error_description,e.suberror,s)}}validateTokenResponse(e,t){if(e.error||e.error_description||e.suberror){let n=`Error(s): ${e.error_codes||Tt.NOT_AVAILABLE} - Timestamp: ${e.timestamp||Tt.NOT_AVAILABLE} - Description: ${e.error_description||Tt.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||Tt.NOT_AVAILABLE} - Trace ID: ${e.trace_id||Tt.NOT_AVAILABLE}`,i=e.error_codes?.length?e.error_codes[0]:void 0,s=new p_(e.error,n,e.suberror,i,e.status);if(t&&e.status&&e.status>=co.SERVER_ERROR_RANGE_START&&e.status<=co.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${s}`);return}else if(t&&e.status&&e.status>=co.CLIENT_ERROR_RANGE_START&&e.status<=co.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${s}`);return}throw p9e(e.error,e.error_description,e.suberror)?new m_(e.error,e.error_description,e.suberror,e.timestamp||Tt.EMPTY_STRING,e.trace_id||Tt.EMPTY_STRING,e.correlation_id||Tt.EMPTY_STRING,e.claims||Tt.EMPTY_STRING,i):s}}async handleServerTokenResponse(e,t,n,i,s,o,a,c,l){this.performanceClient?.addQueueMeasurement(Yr.HandleServerTokenResponse,e.correlation_id);let u;if(e.id_token){if(u=h1(e.id_token||Tt.EMPTY_STRING,this.cryptoObj.base64Decode),s&&s.nonce&&u.nonce!==s.nonce)throw Jt(Az);if(i.maxAge||i.maxAge===0){let f=u.auth_time;if(!f)throw Jt(px);w9e(f,i.maxAge)}}this.homeAccountIdentifier=Ep.generateHomeAccountId(e.client_info||Tt.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,u);let d;s&&s.state&&(d=Rve.parseRequestState(this.cryptoObj,s.state)),e.key_id=e.key_id||i.sshKid||void 0;let p=this.generateCacheRecord(e,t,n,i,u,o,s),m;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),m=new JP(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(m)),a&&!c&&p.account){let f=p.account.generateAccountKey();if(!this.cacheStorage.getAccount(f,this.logger))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await r.generateAuthenticationResult(this.cryptoObj,t,p,!1,i,u,d,void 0,l)}await this.cacheStorage.saveCacheRecord(p,i.storeInCache,i.correlationId)}finally{this.persistencePlugin&&this.serializableCache&&m&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(m))}return r.generateAuthenticationResult(this.cryptoObj,t,p,!1,i,u,d,e,l)}generateCacheRecord(e,t,n,i,s,o,a){let c=t.getPreferredCache();if(!c)throw Jt(gx);let l=T9e(s),u,d;e.id_token&&s&&(u=Hsr(this.homeAccountIdentifier,c,e.id_token,this.clientId,l||""),d=har(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,s,e.client_info,c,l,a,void 0,this.logger));let p=null;if(e.access_token){let y=e.scope?Ru.fromString(e.scope):new Ru(i.scopes||[]),v=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,_=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,C=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,P=n+v,w=P+_,R=C&&C>0?n+C:void 0;p=Wsr(this.homeAccountIdentifier,c,e.access_token,this.clientId,l||t.tenant||"",y.printScopes(),P,w,this.cryptoObj.base64Decode,R,e.token_type,o,e.key_id,i.claims,i.requestedClaimsHash)}let m=null;if(e.refresh_token){let y;if(e.refresh_token_expires_in){let v=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;y=n+v}m=Ksr(this.homeAccountIdentifier,c,e.refresh_token,this.clientId,e.foci,o,y)}let f=null;return e.foci&&(f={clientId:this.clientId,environment:c,familyId:e.foci}),{account:d,idToken:u,accessToken:p,refreshToken:m,appMetadata:f}}static async generateAuthenticationResult(e,t,n,i,s,o,a,c,l){let u=Tt.EMPTY_STRING,d=[],p=null,m,f,y=Tt.EMPTY_STRING;if(n.accessToken){if(n.accessToken.tokenType===Gs.POP&&!s.popKid){let P=new Ix(e),{secret:w,keyId:R}=n.accessToken;if(!R)throw Jt(Wz);u=await P.signPopToken(w,R,s)}else u=n.accessToken.secret;d=Ru.fromString(n.accessToken.target).asArray(),p=new Date(Number(n.accessToken.expiresOn)*1e3),m=new Date(Number(n.accessToken.extendedExpiresOn)*1e3),n.accessToken.refreshOn&&(f=new Date(Number(n.accessToken.refreshOn)*1e3))}n.appMetadata&&(y=n.appMetadata.familyId===Sz?Sz:"");let v=o?.oid||o?.sub||"",_=o?.tid||"";c?.spa_accountid&&n.account&&(n.account.nativeAccountId=c?.spa_accountid);let C=n.account?E9e(n.account.getAccountInfo(),void 0,o,n.idToken?.secret):null;return{authority:t.canonicalAuthority,uniqueId:v,tenantId:_,scopes:d,account:C,idToken:n?.idToken?.secret||"",idTokenClaims:o||{},accessToken:u,fromCache:i,expiresOn:p,extExpiresOn:m,refreshOn:f,correlationId:s.correlationId,requestId:l||Tt.EMPTY_STRING,familyId:y,tokenType:n.accessToken?.tokenType||Tt.EMPTY_STRING,state:a?a.userRequestState:Tt.EMPTY_STRING,cloudGraphHostName:n.account?.cloudGraphHostName||Tt.EMPTY_STRING,msGraphHost:n.account?.msGraphHost||Tt.EMPTY_STRING,code:c?.spa_code,fromNativeBroker:!1}}};function har(r,e,t,n,i,s,o,a,c,l,u){u?.verbose("setCachedAccount called");let p=r.getAccountKeys().find(_=>_.startsWith(t)),m=null;p&&(m=r.getAccount(p,u));let f=m||Ep.createAccount({homeAccountId:t,idTokenClaims:i,clientInfo:s,environment:o,cloudGraphHostName:c?.cloud_graph_host_name,msGraphHost:c?.msgraph_host,nativeAccountId:l},e,n),y=f.tenantProfiles||[],v=a||f.realm;if(v&&!y.find(_=>_.tenantId===v)){let _=Hve(t,f.localAccountId,v,i);y.push(_)}return f.tenantProfiles=y,f}async function ew(r,e,t){return typeof r=="string"?r:r({clientId:e,tokenEndpoint:t})}var zK=class extends yy{constructor(e,t){super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async getAuthCodeUrl(e){this.performanceClient?.addQueueMeasurement(Yr.GetAuthCodeUrl,e.correlationId);let t=await ys(this.createAuthCodeUrlQueryString.bind(this),Yr.AuthClientCreateQueryString,this.logger,this.performanceClient,e.correlationId)(e);return Js.appendQueryString(this.authority.authorizationEndpoint,t)}async acquireToken(e,t){if(this.performanceClient?.addQueueMeasurement(Yr.AuthClientAcquireToken,e.correlationId),!e.code)throw Jt(Mz);let n=oa(),i=await ys(this.executeTokenRequest.bind(this),Yr.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),s=i.headers?.[wp.X_MS_REQUEST_ID],o=new Rd(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return o.validateTokenResponse(i.body),ys(o.handleServerTokenResponse.bind(o),Yr.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(i.body,this.authority,n,e,t,void 0,void 0,void 0,s)}handleFragmentResponse(e,t){if(new Rd(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null).validateServerAuthorizationCodeResponse(e,t),!e.code)throw Jt($z);return e}getLogoutUri(e){if(!e)throw Ro(t1);let t=this.createLogoutUrlQueryString(e);return Js.appendQueryString(this.authority.endSessionEndpoint,t)}async executeTokenRequest(e,t){this.performanceClient?.addQueueMeasurement(Yr.AuthClientExecuteTokenRequest,t.correlationId);let n=this.createTokenQueryParameters(t),i=Js.appendQueryString(e.tokenEndpoint,n),s=await ys(this.createTokenRequestBody.bind(this),Yr.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,t.correlationId)(t),o;if(t.clientInfo)try{let l=AK(t.clientInfo,this.cryptoUtils.base64Decode);o={credential:`${l.uid}${yl.CLIENT_INFO_SEPARATOR}${l.utid}`,type:Nf.HOME_ACCOUNT_ID}}catch(l){this.logger.verbose("Could not parse client info for CCS Header: "+l)}let a=this.createTokenRequestHeaders(o||t.ccsCredential),c={clientId:t.tokenBodyParameters?.clientId||this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid};return ys(this.executePostToTokenEndpoint.bind(this),Yr.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,t.correlationId)(i,s,a,c,t.correlationId,Yr.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(Yr.AuthClientCreateTokenRequestBody,e.correlationId);let t=new Jl;if(t.addClientId(e.tokenBodyParameters?.[kK]||this.config.authOptions.clientId),this.includeRedirectUri?t.addRedirectUri(e.redirectUri):c_.validateRedirectUri(e.redirectUri),t.addScopes(e.scopes,!0,this.oidcDefaultScopes),t.addAuthorizationCode(e.code),t.addLibraryInfo(this.config.libraryInfo),t.addApplicationTelemetry(this.config.telemetry.application),t.addThrottling(),this.serverTelemetryManager&&!Tve(this.config)&&t.addServerTelemetry(this.serverTelemetryManager),e.codeVerifier&&t.addCodeVerifier(e.codeVerifier),this.config.clientCredentials.clientSecret&&t.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let s=this.config.clientCredentials.clientAssertion;t.addClientAssertion(await ew(s.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),t.addClientAssertionType(s.assertionType)}if(t.addGrantType(Ox.AUTHORIZATION_CODE_GRANT),t.addClientInfo(),e.authenticationScheme===Gs.POP){let s=new Ix(this.cryptoUtils,this.performanceClient),o;e.popKid?o=this.cryptoUtils.encodeKid(e.popKid):o=(await ys(s.generateCnf.bind(s),Yr.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,t.addPopToken(o)}else if(e.authenticationScheme===Gs.SSH)if(e.sshJwk)t.addSshJwk(e.sshJwk);else throw Ro(wx);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();t.addCorrelationId(n),(!xu.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities);let i;if(e.clientInfo)try{let s=AK(e.clientInfo,this.cryptoUtils.base64Decode);i={credential:`${s.uid}${yl.CLIENT_INFO_SEPARATOR}${s.utid}`,type:Nf.HOME_ACCOUNT_ID}}catch(s){this.logger.verbose("Could not parse client info for CCS Header: "+s)}else i=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&i)switch(i.type){case Nf.HOME_ACCOUNT_ID:try{let s=sx(i.credential);t.addCcsOid(s)}catch(s){this.logger.verbose("Could not parse home account ID for CCS Header: "+s)}break;case Nf.UPN:t.addCcsUpn(i.credential);break}return e.tokenBodyParameters&&t.addExtraQueryParameters(e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[l9e])&&t.addExtraQueryParameters({[l9e]:"1"}),t.createQueryString()}async createAuthCodeUrlQueryString(e){this.performanceClient?.addQueueMeasurement(Yr.AuthClientCreateQueryString,e.correlationId);let t=new Jl;t.addClientId(e.extraQueryParameters?.[kK]||this.config.authOptions.clientId);let n=[...e.scopes||[],...e.extraScopesToConsent||[]];t.addScopes(n,!0,this.oidcDefaultScopes),t.addRedirectUri(e.redirectUri);let i=e.correlationId||this.config.cryptoInterface.createNewGuid();if(t.addCorrelationId(i),t.addResponseMode(e.responseMode),t.addResponseTypeCode(),t.addLibraryInfo(this.config.libraryInfo),Tve(this.config)||t.addApplicationTelemetry(this.config.telemetry.application),t.addClientInfo(),e.codeChallenge&&e.codeChallengeMethod&&t.addCodeChallengeParams(e.codeChallenge,e.codeChallengeMethod),e.prompt&&t.addPrompt(e.prompt),e.domainHint&&t.addDomainHint(e.domainHint),e.prompt!==ax.SELECT_ACCOUNT)if(e.sid&&e.prompt===ax.NONE)this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),t.addSid(e.sid);else if(e.account){let s=this.extractAccountSid(e.account),o=this.extractLoginHint(e.account);if(o&&e.domainHint&&(this.logger.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),o=null),o){this.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),t.addLoginHint(o);try{let a=sx(e.account.homeAccountId);t.addCcsOid(a)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(s&&e.prompt===ax.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),t.addSid(s);try{let a=sx(e.account.homeAccountId);t.addCcsOid(a)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),t.addLoginHint(e.loginHint),t.addCcsUpn(e.loginHint);else if(e.account.username){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),t.addLoginHint(e.account.username);try{let a=sx(e.account.homeAccountId);t.addCcsOid(a)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(this.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),t.addLoginHint(e.loginHint),t.addCcsUpn(e.loginHint));else this.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");if(e.nonce&&t.addNonce(e.nonce),e.state&&t.addState(e.state),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.addExtraQueryParams(e,t),e.nativeBroker&&(t.addNativeBroker(),e.authenticationScheme===Gs.POP)){let s=new Ix(this.cryptoUtils),o;e.popKid?o=this.cryptoUtils.encodeKid(e.popKid):o=(await ys(s.generateCnf.bind(s),Yr.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,t.addPopToken(o)}return t.createQueryString()}createLogoutUrlQueryString(e){let t=new Jl;return e.postLogoutRedirectUri&&t.addPostLogoutRedirectUri(e.postLogoutRedirectUri),e.correlationId&&t.addCorrelationId(e.correlationId),e.idTokenHint&&t.addIdTokenHint(e.idTokenHint),e.state&&t.addState(e.state),e.logoutHint&&t.addLogoutHint(e.logoutHint),this.addExtraQueryParams(e,t),t.createQueryString()}addExtraQueryParams(e,t){!(e.extraQueryParameters&&e.extraQueryParameters.hasOwnProperty("instance_aware"))&&this.config.authOptions.instanceAware&&(e.extraQueryParameters=e.extraQueryParameters||{},e.extraQueryParameters.instance_aware="true"),e.extraQueryParameters&&t.addExtraQueryParameters(e.extraQueryParameters)}extractAccountSid(e){return e.idTokenClaims?.sid||null}extractLoginHint(e){return e.idTokenClaims?.login_hint||null}};var far=300,o1=class extends yy{constructor(e,t){super(e,t)}async acquireToken(e){this.performanceClient?.addQueueMeasurement(Yr.RefreshTokenClientAcquireToken,e.correlationId);let t=oa(),n=await ys(this.executeTokenRequest.bind(this),Yr.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),i=n.headers?.[wp.X_MS_REQUEST_ID],s=new Rd(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return s.validateTokenResponse(n.body),ys(s.handleServerTokenResponse.bind(s),Yr.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(n.body,this.authority,t,e,void 0,void 0,!0,e.forceCache,i)}async acquireTokenByRefreshToken(e){if(!e)throw Ro(e1);if(this.performanceClient?.addQueueMeasurement(Yr.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw Jt(fx);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await ys(this.acquireTokenWithCachedRefreshToken.bind(this),Yr.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(n){let i=n instanceof m_&&n.errorCode===Ex,s=n instanceof p_&&n.errorCode===Y8e.INVALID_GRANT_ERROR&&n.subError===Y8e.CLIENT_MISMATCH_ERROR;if(i||s)return ys(this.acquireTokenWithCachedRefreshToken.bind(this),Yr.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw n}return ys(this.acquireTokenWithCachedRefreshToken.bind(this),Yr.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,t){this.performanceClient?.addQueueMeasurement(Yr.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);let n=oar(this.cacheManager.getRefreshToken.bind(this.cacheManager),Yr.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,t,void 0,this.performanceClient,e.correlationId);if(!n)throw m9e(Ex);if(n.expiresOn&&bx(n.expiresOn,e.refreshTokenExpirationOffsetSeconds||far))throw m9e(Qve);let i={...e,refreshToken:n.secret,authenticationScheme:e.authenticationScheme||Gs.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:Nf.HOME_ACCOUNT_ID}};try{return await ys(this.acquireToken.bind(this),Yr.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(i)}catch(s){if(s instanceof m_&&s.subError===Tx){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");let o=nx(n);this.cacheManager.removeRefreshToken(o)}throw s}}async executeTokenRequest(e,t){this.performanceClient?.addQueueMeasurement(Yr.RefreshTokenClientExecuteTokenRequest,e.correlationId);let n=this.createTokenQueryParameters(e),i=Js.appendQueryString(t.tokenEndpoint,n),s=await ys(this.createTokenRequestBody.bind(this),Yr.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),o=this.createTokenRequestHeaders(e.ccsCredential),a={clientId:e.tokenBodyParameters?.clientId||this.config.authOptions.clientId,authority:t.canonicalAuthority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return ys(this.executePostToTokenEndpoint.bind(this),Yr.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(i,s,o,a,e.correlationId,Yr.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(Yr.RefreshTokenClientCreateTokenRequestBody,e.correlationId);let t=e.correlationId,n=new Jl;if(n.addClientId(e.tokenBodyParameters?.[kK]||this.config.authOptions.clientId),e.redirectUri&&n.addRedirectUri(e.redirectUri),n.addScopes(e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),n.addGrantType(Ox.REFRESH_TOKEN_GRANT),n.addClientInfo(),n.addLibraryInfo(this.config.libraryInfo),n.addApplicationTelemetry(this.config.telemetry.application),n.addThrottling(),this.serverTelemetryManager&&!Tve(this.config)&&n.addServerTelemetry(this.serverTelemetryManager),n.addCorrelationId(t),n.addRefreshToken(e.refreshToken),this.config.clientCredentials.clientSecret&&n.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let i=this.config.clientCredentials.clientAssertion;n.addClientAssertion(await ew(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),n.addClientAssertionType(i.assertionType)}if(e.authenticationScheme===Gs.POP){let i=new Ix(this.cryptoUtils,this.performanceClient),s;e.popKid?s=this.cryptoUtils.encodeKid(e.popKid):s=(await ys(i.generateCnf.bind(i),Yr.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,n.addPopToken(s)}else if(e.authenticationScheme===Gs.SSH)if(e.sshJwk)n.addSshJwk(e.sshJwk);else throw Ro(wx);if((!xu.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case Nf.HOME_ACCOUNT_ID:try{let i=sx(e.ccsCredential.credential);n.addCcsOid(i)}catch(i){this.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case Nf.UPN:n.addCcsUpn(e.ccsCredential.credential);break}return e.tokenBodyParameters&&n.addExtraQueryParameters(e.tokenBodyParameters),n.createQueryString()}};var xve=class extends yy{constructor(e,t){super(e,t)}async acquireToken(e){try{let[t,n]=await this.acquireCachedToken({...e,scopes:e.scopes?.length?e.scopes:[...u_]});return n===La.PROACTIVELY_REFRESHED&&(this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),new o1(this.config,this.performanceClient).acquireTokenByRefreshToken(e).catch(()=>{})),t}catch(t){if(t instanceof Qz&&t.errorCode===Af)return new o1(this.config,this.performanceClient).acquireTokenByRefreshToken(e);throw t}}async acquireCachedToken(e){this.performanceClient?.addQueueMeasurement(Yr.SilentFlowClientAcquireCachedToken,e.correlationId);let t=La.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!xu.isEmptyObj(e.claims))throw this.setCacheOutcome(La.FORCE_REFRESH_OR_CLAIMS,e.correlationId),Jt(Af);if(!e.account)throw Jt(fx);let n=e.account.tenantId||aar(e.authority),i=this.cacheManager.getTokenKeys(),s=this.cacheManager.getAccessToken(e.account,e,i,n,this.performanceClient,e.correlationId);if(s){if($sr(s.cachedAt)||bx(s.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(La.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),Jt(Af);s.refreshOn&&bx(s.refreshOn,0)&&(t=La.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(La.NO_CACHED_ACCESS_TOKEN,e.correlationId),Jt(Af);let o=e.authority||this.authority.getPreferredCache(),a={account:this.cacheManager.readAccountFromCache(e.account),accessToken:s,idToken:this.cacheManager.getIdToken(e.account,i,n,this.performanceClient,e.correlationId),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(o)};return this.setCacheOutcome(t,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await ys(this.generateResultFromCacheRecord.bind(this),Yr.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(a,e),t]}setCacheOutcome(e,t){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},t),e!==La.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,t){this.performanceClient?.addQueueMeasurement(Yr.SilentFlowClientGenerateResultFromCacheRecord,t.correlationId);let n;if(e.idToken&&(n=h1(e.idToken.secret,this.config.cryptoInterface.base64Decode)),t.maxAge||t.maxAge===0){let i=n?.auth_time;if(!i)throw Jt(px);w9e(i,t.maxAge)}return Rd.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,n)}};var h9e=",",L9e="|";function gar(r){let{skus:e,libraryName:t,libraryVersion:n,extensionName:i,extensionVersion:s}=r,o=new Map([[0,[t,n]],[2,[i,s]]]),a=[];if(e?.length){if(a=e.split(h9e),a.length<4)return e}else a=Array.from({length:4},()=>L9e);return o.forEach((c,l)=>{c.length===2&&c[0]?.length&&c[1]?.length&&yar({skuArr:a,index:l,skuName:c[0],skuVersion:c[1]})}),a.join(h9e)}function yar(r){let{skuArr:e,index:t,skuName:n,skuVersion:i}=r;t>=e.length||(e[t]=[n,i].join(L9e))}var FK=class r{constructor(e,t){this.cacheOutcome=La.NOT_APPLICABLE,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||Tt.EMPTY_STRING,this.wrapperVer=e.wrapperVer||Tt.EMPTY_STRING,this.telemetryCacheKey=Fc.CACHE_KEY+yl.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){let e=`${this.apiId}${Fc.VALUE_SEPARATOR}${this.cacheOutcome}`,t=[this.wrapperSKU,this.wrapperVer],n=this.getNativeBrokerErrorCode();n?.length&&t.push(`broker_error=${n}`);let i=t.join(Fc.VALUE_SEPARATOR),s=this.getRegionDiscoveryFields(),o=[e,s].join(Fc.VALUE_SEPARATOR);return[Fc.SCHEMA_VERSION,o,i].join(Fc.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){let e=this.getLastRequests(),t=r.maxErrorsToSend(e),n=e.failedRequests.slice(0,2*t).join(Fc.VALUE_SEPARATOR),i=e.errors.slice(0,t).join(Fc.VALUE_SEPARATOR),s=e.errors.length,o=t<s?Fc.OVERFLOW_TRUE:Fc.OVERFLOW_FALSE,a=[s,o].join(Fc.VALUE_SEPARATOR);return[Fc.SCHEMA_VERSION,e.cacheHits,n,i,a].join(Fc.CATEGORY_SEPARATOR)}cacheFailedRequest(e){let t=this.getLastRequests();t.errors.length>=Fc.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof xo?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(Fc.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}incrementCacheHits(){let e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits}getLastRequests(){let e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){let e=this.getLastRequests(),t=r.maxErrorsToSend(e),n=e.errors.length;if(t===n)this.cacheManager.removeItem(this.telemetryCacheKey);else{let i={failedRequests:e.failedRequests.slice(t*2),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,i)}}static maxErrorsToSend(e){let t,n=0,i=0,s=e.errors.length;for(t=0;t<s;t++){let o=e.failedRequests[2*t]||Tt.EMPTY_STRING,a=e.failedRequests[2*t+1]||Tt.EMPTY_STRING,c=e.errors[t]||Tt.EMPTY_STRING;if(i+=o.toString().length+a.toString().length+c.length+3,i<Fc.MAX_LAST_HEADER_BYTES)n+=1;else break}return n}getRegionDiscoveryFields(){let e=[];return e.push(this.regionUsed||Tt.EMPTY_STRING),e.push(this.regionSource||Tt.EMPTY_STRING),e.push(this.regionOutcome||Tt.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){let t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){let e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e)}static makeExtraSkuString(e){return gar(e)}},Rx=class{static deserializeJSONBlob(e){return e?JSON.parse(e):{}}static deserializeAccounts(e){let t={};return e&&Object.keys(e).map(function(n){let i=e[n],s={homeAccountId:i.home_account_id,environment:i.environment,realm:i.realm,localAccountId:i.local_account_id,username:i.username,authorityType:i.authority_type,name:i.name,clientInfo:i.client_info,lastModificationTime:i.last_modification_time,lastModificationApp:i.last_modification_app,tenantProfiles:i.tenantProfiles?.map(a=>JSON.parse(a))},o=new Ep;s1.toObject(o,s),t[n]=o}),t}static deserializeIdTokens(e){let t={};return e&&Object.keys(e).map(function(n){let i=e[n],s={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,realm:i.realm};t[n]=s}),t}static deserializeAccessTokens(e){let t={};return e&&Object.keys(e).map(function(n){let i=e[n],s={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,realm:i.realm,target:i.target,cachedAt:i.cached_at,expiresOn:i.expires_on,extendedExpiresOn:i.extended_expires_on,refreshOn:i.refresh_on,keyId:i.key_id,tokenType:i.token_type,requestedClaims:i.requestedClaims,requestedClaimsHash:i.requestedClaimsHash,userAssertionHash:i.userAssertionHash};t[n]=s}),t}static deserializeRefreshTokens(e){let t={};return e&&Object.keys(e).map(function(n){let i=e[n],s={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,familyId:i.family_id,target:i.target,realm:i.realm};t[n]=s}),t}static deserializeAppMetadata(e){let t={};return e&&Object.keys(e).map(function(n){let i=e[n];t[n]={clientId:i.client_id,environment:i.environment,familyId:i.family_id}}),t}static deserializeAllCache(e){return{accounts:e.Account?this.deserializeAccounts(e.Account):{},idTokens:e.IdToken?this.deserializeIdTokens(e.IdToken):{},accessTokens:e.AccessToken?this.deserializeAccessTokens(e.AccessToken):{},refreshTokens:e.RefreshToken?this.deserializeRefreshTokens(e.RefreshToken):{},appMetadata:e.AppMetadata?this.deserializeAppMetadata(e.AppMetadata):{}}}},bar=Object.freeze({__proto__:null,Deserializer:Rx,Serializer:Ez}),_ar="Authorization",Yve="Metadata",Sar="X-IDENTITY-HEADER",Car="secret",JK="api-version",f1="resource",Par="system_assigned_managed_identity",war="managed_identity",f9e=`https://login.microsoftonline.com/${war}/`,Ti={AZURE_POD_IDENTITY_AUTHORITY_HOST:"AZURE_POD_IDENTITY_AUTHORITY_HOST",IDENTITY_ENDPOINT:"IDENTITY_ENDPOINT",IDENTITY_HEADER:"IDENTITY_HEADER",IDENTITY_SERVER_THUMBPRINT:"IDENTITY_SERVER_THUMBPRINT",IMDS_ENDPOINT:"IMDS_ENDPOINT",MSI_ENDPOINT:"MSI_ENDPOINT"},Qi={APP_SERVICE:"AppService",AZURE_ARC:"AzureArc",CLOUD_SHELL:"CloudShell",DEFAULT_TO_IMDS:"DefaultToImds",IMDS:"Imds",SERVICE_FABRIC:"ServiceFabric"},Id={SYSTEM_ASSIGNED:"system-assigned",USER_ASSIGNED_CLIENT_ID:"user-assigned-client-id",USER_ASSIGNED_RESOURCE_ID:"user-assigned-resource-id",USER_ASSIGNED_OBJECT_ID:"user-assigned-object-id"},Xl={GET:"get",POST:"post"},bve={SUCCESS:co.SUCCESS,SUCCESS_RANGE_START:co.SUCCESS_RANGE_START,SUCCESS_RANGE_END:co.SUCCESS_RANGE_END,SERVER_ERROR:co.SERVER_ERROR},Ear="REGION_NAME",Tar=32,Iar={SHA256:"sha256"},_ve={CV_CHARSET:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~"},Pp={MSAL_SKU:"msal.js.node",JWT_BEARER_ASSERTION_TYPE:"urn:ietf:params:oauth:client-assertion-type:jwt-bearer",AUTHORIZATION_PENDING:"authorization_pending",HTTP_PROTOCOL:"http://",LOCALHOST:"localhost"},ox={acquireTokenSilent:62,acquireTokenByUsernamePassword:371,acquireTokenByDeviceCode:671,acquireTokenByClientCredential:771,acquireTokenByCode:871,acquireTokenByRefreshToken:872},Qm={ALGORITHM:"alg",RSA_256:"RS256",PSS_256:"PS256",X5T_256:"x5t#S256",X5T:"x5t",X5C:"x5c",AUDIENCE:"aud",EXPIRATION_TIME:"exp",ISSUER:"iss",SUBJECT:"sub",NOT_BEFORE:"nbf",JWT_ID:"jti"},Sve={INTERVAL_MS:100,TIMEOUT_MS:5e3},Rar=4096,xar=3,Oar=1e3,Aar=[co.NOT_FOUND,co.REQUEST_TIMEOUT,co.TOO_MANY_REQUESTS,co.SERVER_ERROR,co.SERVICE_UNAVAILABLE,co.GATEWAY_TIMEOUT],a1=class{static getNetworkResponse(e,t,n){return{headers:e,body:t,status:n}}static urlToHttpOptions(e){let t={protocol:e.protocol,hostname:e.hostname&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:`${e.pathname||""}${e.search||""}`,href:e.href};return e.port!==""&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=`${decodeURIComponent(e.username)}:${decodeURIComponent(e.password)}`),t}},c1=class{constructor(e,t){this.proxyUrl=e||"",this.customAgentOptions=t||{}}async sendGetRequestAsync(e,t,n){return this.proxyUrl?g9e(e,this.proxyUrl,Xl.GET,t,this.customAgentOptions,n):y9e(e,Xl.GET,t,this.customAgentOptions,n)}async sendPostRequestAsync(e,t){return this.proxyUrl?g9e(e,this.proxyUrl,Xl.POST,t,this.customAgentOptions):y9e(e,Xl.POST,t,this.customAgentOptions)}},g9e=(r,e,t,n,i,s)=>{let o=new URL(r),a=new URL(e),c=n?.headers||{},l={host:a.hostname,port:a.port,method:"CONNECT",path:o.hostname,headers:c};i&&Object.keys(i).length&&(l.agent=new mK.Agent(i));let u="";if(t===Xl.POST){let p=n?.body||"";u=`Content-Type: application/x-www-form-urlencoded\r
Content-Length: ${p.length}\r
\r
${p}`}else s&&(l.timeout=s);let d=`${t.toUpperCase()} ${o.href} HTTP/1.1\r
Host: ${o.host}\r
Connection: close\r
`+u+`\r
`;return new Promise((p,m)=>{let f=mK.request(l);s&&f.on("timeout",()=>{f.destroy(),m(new Error("Request time out"))}),f.end(),f.on("connect",(y,v)=>{let _=y?.statusCode||bve.SERVER_ERROR;(_<bve.SUCCESS_RANGE_START||_>bve.SUCCESS_RANGE_END)&&(f.destroy(),v.destroy(),m(new Error(`Error connecting to proxy. Http status code: ${y.statusCode}. Http status message: ${y?.statusMessage||"Unknown"}`))),v.write(d);let C=[];v.on("data",P=>{C.push(P)}),v.on("end",()=>{let w=Buffer.concat([...C]).toString().split(`\r
`),R=parseInt(w[0].split(" ")[1]),I=w[0].split(" ").slice(2).join(" "),z=w[w.length-1],G=w.slice(1,w.length-2),L=new Map;G.forEach($e=>{let Be=$e.split(new RegExp(/:\s(.*)/s)),Ct=Be[0],Ge=Be[1];try{let pe=JSON.parse(Ge);pe&&typeof pe=="object"&&(Ge=pe)}catch{}L.set(Ct,Ge)});let ee=Object.fromEntries(L),ye=a1.getNetworkResponse(ee,q9e(R,I,ee,z),R);(R<co.SUCCESS_RANGE_START||R>co.SUCCESS_RANGE_END)&&ye.body.error!==Pp.AUTHORIZATION_PENDING&&f.destroy(),p(ye)}),v.on("error",P=>{f.destroy(),v.destroy(),m(new Error(P.toString()))})}),f.on("error",y=>{f.destroy(),m(new Error(y.toString()))})})},y9e=(r,e,t,n,i)=>{let s=e===Xl.POST,o=t?.body||"",a=new URL(r),c=t?.headers||{},l={method:e,headers:c,...a1.urlToHttpOptions(a)};return n&&Object.keys(n).length&&(l.agent=new K8e.Agent(n)),s?l.headers={...l.headers,"Content-Length":o.length}:i&&(l.timeout=i),new Promise((u,d)=>{let p;l.protocol==="http:"?p=mK.request(l):p=K8e.request(l),s&&p.write(o),i&&p.on("timeout",()=>{p.destroy(),d(new Error("Request time out"))}),p.end(),p.on("response",m=>{let f=m.headers,y=m.statusCode,v=m.statusMessage,_=[];m.on("data",C=>{_.push(C)}),m.on("end",()=>{let C=Buffer.concat([..._]).toString(),P=f,w=a1.getNetworkResponse(P,q9e(y,v,P,C),y);(y<co.SUCCESS_RANGE_START||y>co.SUCCESS_RANGE_END)&&w.body.error!==Pp.AUTHORIZATION_PENDING&&p.destroy(),u(w)})}),p.on("error",m=>{p.destroy(),d(new Error(m.toString()))})})},q9e=(r,e,t,n)=>{let i;try{i=JSON.parse(n)}catch{let o,a;r>=co.CLIENT_ERROR_RANGE_START&&r<=co.CLIENT_ERROR_RANGE_END?(o="client_error",a="A client"):r>=co.SERVER_ERROR_RANGE_START&&r<=co.SERVER_ERROR_RANGE_END?(o="server_error",a="A server"):(o="unknown_error",a="An unknown"),i={error:o,error_description:`${a} error occured.
Http status code: ${r}
Http status message: ${e||"Unknown"}
Headers: ${JSON.stringify(t)}`}}return i},z9e="invalid_file_extension",F9e="invalid_file_path",wz="invalid_managed_identity_id_type",j9e="invalid_secret",Nar="missing_client_id",Dar="network_unavailable",U9e="platform_not_supported",B9e="unable_to_create_azure_arc",G9e="unable_to_create_cloud_shell",$9e="unable_to_create_source",Ove="unable_to_read_secret_file",Mar="user_assigned_not_available_at_runtime",V9e="www_authenticate_header_missing",H9e="www_authenticate_header_unsupported_format",_z={[Ti.AZURE_POD_IDENTITY_AUTHORITY_HOST]:"azure_pod_identity_authority_host_url_malformed",[Ti.IDENTITY_ENDPOINT]:"identity_endpoint_url_malformed",[Ti.IMDS_ENDPOINT]:"imds_endpoint_url_malformed",[Ti.MSI_ENDPOINT]:"msi_endpoint_url_malformed"},kar={[z9e]:"The file path in the WWW-Authenticate header does not contain a .key file.",[F9e]:"The file path in the WWW-Authenticate header is not in a valid Windows or Linux Format.",[wz]:"More than one ManagedIdentityIdType was provided.",[j9e]:"The secret in the file on the file path in the WWW-Authenticate header is greater than 4096 bytes.",[U9e]:"The platform is not supported by Azure Arc. Azure Arc only supports Windows and Linux.",[Nar]:"A ManagedIdentityId id was not provided.",[_z.AZURE_POD_IDENTITY_AUTHORITY_HOST]:`The Managed Identity's '${Ti.AZURE_POD_IDENTITY_AUTHORITY_HOST}' environment variable is malformed.`,[_z.IDENTITY_ENDPOINT]:`The Managed Identity's '${Ti.IDENTITY_ENDPOINT}' environment variable is malformed.`,[_z.IMDS_ENDPOINT]:`The Managed Identity's '${Ti.IMDS_ENDPOINT}' environment variable is malformed.`,[_z.MSI_ENDPOINT]:`The Managed Identity's '${Ti.MSI_ENDPOINT}' environment variable is malformed.`,[Dar]:"Authentication unavailable. The request to the managed identity endpoint timed out.",[B9e]:"Azure Arc Managed Identities can only be system assigned.",[G9e]:"Cloud Shell Managed Identities can only be system assigned.",[$9e]:"Unable to create a Managed Identity source based on environment variables.",[Ove]:"Unable to read the secret file.",[Mar]:"Service Fabric user assigned managed identity ClientId or ResourceId is not configurable at runtime.",[V9e]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is missing.",[H9e]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is in an unsupported format."},Ave=class r extends xo{constructor(e){super(e,kar[e]),this.name="ManagedIdentityError",Object.setPrototypeOf(this,r.prototype)}};function gl(r){return new Ave(r)}var Nve=class{get id(){return this._id}set id(e){this._id=e}get idType(){return this._idType}set idType(e){this._idType=e}constructor(e){let t=e?.userAssignedClientId,n=e?.userAssignedResourceId,i=e?.userAssignedObjectId;if(t){if(n||i)throw gl(wz);this.id=t,this.idType=Id.USER_ASSIGNED_CLIENT_ID}else if(n){if(t||i)throw gl(wz);this.id=n,this.idType=Id.USER_ASSIGNED_RESOURCE_ID}else if(i){if(t||n)throw gl(wz);this.id=i,this.idType=Id.USER_ASSIGNED_OBJECT_ID}else this.id=Par,this.idType=Id.SYSTEM_ASSIGNED}},Dve=class{constructor(e,t,n){this.maxRetries=e,this.retryDelay=t,this.httpStatusCodesToRetryOn=n}retryAfterMillisecondsToSleep(e){if(!e)return 0;let t=Math.round(parseFloat(e)*1e3);return isNaN(t)&&(t=Math.max(0,new Date(e).valueOf()-new Date().valueOf())),t}async pauseForRetry(e,t,n){if(this.httpStatusCodesToRetryOn.includes(e)&&t<this.maxRetries){let i=this.retryAfterMillisecondsToSleep(n);return await new Promise(s=>setTimeout(s,i||this.retryDelay)),!0}return!1}},Mve=class{constructor(e,t){this.httpClientNoRetries=e,this.retryPolicy=t}async sendNetworkRequestAsyncHelper(e,t,n){return e===Xl.GET?this.httpClientNoRetries.sendGetRequestAsync(t,n):this.httpClientNoRetries.sendPostRequestAsync(t,n)}async sendNetworkRequestAsync(e,t,n){let i=await this.sendNetworkRequestAsyncHelper(e,t,n),s=0;for(;await this.retryPolicy.pauseForRetry(i.status,s,i.headers[wp.RETRY_AFTER]);)i=await this.sendNetworkRequestAsyncHelper(e,t,n),s++;return i}async sendGetRequestAsync(e,t){return this.sendNetworkRequestAsync(Xl.GET,e,t)}async sendPostRequestAsync(e,t){return this.sendNetworkRequestAsync(Xl.POST,e,t)}},jc={invalidLoopbackAddressType:{code:"invalid_loopback_server_address_type",desc:"Loopback server address is not type string. This is unexpected."},unableToLoadRedirectUri:{code:"unable_to_load_redirectUrl",desc:"Loopback server callback was invoked without a url. This is unexpected."},noAuthCodeInResponse:{code:"no_auth_code_in_response",desc:"No auth code found in the server response. Please check your network trace to determine what happened."},noLoopbackServerExists:{code:"no_loopback_server_exists",desc:"No loopback server exists yet."},loopbackServerAlreadyExists:{code:"loopback_server_already_exists",desc:"Loopback server already exists. Cannot create another."},loopbackServerTimeout:{code:"loopback_server_timeout",desc:"Timed out waiting for auth code listener to be registered."},stateNotFoundError:{code:"state_not_found",desc:"State not found. Please verify that the request originated from msal."},thumbprintMissing:{code:"thumbprint_missing_from_client_certificate",desc:"Client certificate does not contain a SHA-1 or SHA-256 thumbprint."}},Df=class r extends xo{constructor(e,t){super(e,t),this.name="NodeAuthError"}static createInvalidLoopbackAddressTypeError(){return new r(jc.invalidLoopbackAddressType.code,`${jc.invalidLoopbackAddressType.desc}`)}static createUnableToLoadRedirectUrlError(){return new r(jc.unableToLoadRedirectUri.code,`${jc.unableToLoadRedirectUri.desc}`)}static createNoAuthCodeInResponseError(){return new r(jc.noAuthCodeInResponse.code,`${jc.noAuthCodeInResponse.desc}`)}static createNoLoopbackServerExistsError(){return new r(jc.noLoopbackServerExists.code,`${jc.noLoopbackServerExists.desc}`)}static createLoopbackServerAlreadyExistsError(){return new r(jc.loopbackServerAlreadyExists.code,`${jc.loopbackServerAlreadyExists.desc}`)}static createLoopbackServerTimeoutError(){return new r(jc.loopbackServerTimeout.code,`${jc.loopbackServerTimeout.desc}`)}static createStateNotFoundError(){return new r(jc.stateNotFoundError.code,jc.stateNotFoundError.desc)}static createThumbprintMissingError(){return new r(jc.thumbprintMissing.code,jc.thumbprintMissing.desc)}},Lar={clientId:Tt.EMPTY_STRING,authority:Tt.DEFAULT_AUTHORITY,clientSecret:Tt.EMPTY_STRING,clientAssertion:Tt.EMPTY_STRING,clientCertificate:{thumbprint:Tt.EMPTY_STRING,thumbprintSha256:Tt.EMPTY_STRING,privateKey:Tt.EMPTY_STRING,x5c:Tt.EMPTY_STRING},knownAuthorities:[],cloudDiscoveryMetadata:Tt.EMPTY_STRING,authorityMetadata:Tt.EMPTY_STRING,clientCapabilities:[],protocolMode:YP.AAD,azureCloudOptions:{azureCloudInstance:XK.None,tenant:Tt.EMPTY_STRING},skipAuthorityMetadataCache:!1},qar={claimsBasedCachingEnabled:!1},Xve={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:en.LogLevel.Info},zar={loggerOptions:Xve,networkClient:new c1,proxyUrl:Tt.EMPTY_STRING,customAgentOptions:{},disableInternalRetries:!1},Far={application:{appName:Tt.EMPTY_STRING,appVersion:Tt.EMPTY_STRING}};function W9e({auth:r,broker:e,cache:t,system:n,telemetry:i}){let s={...zar,networkClient:new c1(n?.proxyUrl,n?.customAgentOptions),loggerOptions:n?.loggerOptions||Xve,disableInternalRetries:n?.disableInternalRetries||!1};if(r.clientCertificate&&!r.clientCertificate.thumbprint&&!r.clientCertificate.thumbprintSha256)throw Df.createStateNotFoundError();return{auth:{...Lar,...r},broker:{...e},cache:{...qar,...t},system:{...s,...n},telemetry:{...Far,...i}}}function jar({managedIdentityIdParams:r,system:e}){let t=new Nve(r),n=e?.loggerOptions||Xve,i;if(e?.networkClient?i=e.networkClient:i=new c1(e?.proxyUrl,e?.customAgentOptions),!e?.disableInternalRetries){let s=new Dve(xar,Oar,Aar);i=new Mve(i,s)}return{managedIdentityId:t,system:{loggerOptions:n,networkClient:i}}}var kve=class{generateGuid(){return Dsr.v4()}isGuid(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}},gy=class r{static base64Encode(e,t){return Buffer.from(e,t).toString("base64")}static base64EncodeUrl(e,t){return r.base64Encode(e,t).replace(/=/g,Tt.EMPTY_STRING).replace(/\+/g,"-").replace(/\//g,"_")}static base64Decode(e){return Buffer.from(e,"base64").toString("utf8")}static base64DecodeUrl(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");for(;t.length%4;)t+="=";return r.base64Decode(t)}},jK=class{sha256(e){return S9e.createHash(Iar.SHA256).update(e).digest()}},Lve=class{constructor(){this.hashUtils=new jK}async generatePkceCodes(){let e=this.generateCodeVerifier(),t=this.generateCodeChallengeFromVerifier(e);return{verifier:e,challenge:t}}generateCodeVerifier(){let e=[],t=256-256%_ve.CV_CHARSET.length;for(;e.length<=Tar;){let i=S9e.randomBytes(1)[0];if(i>=t)continue;let s=i%_ve.CV_CHARSET.length;e.push(_ve.CV_CHARSET[s])}let n=e.join(Tt.EMPTY_STRING);return gy.base64EncodeUrl(n)}generateCodeChallengeFromVerifier(e){return gy.base64EncodeUrl(this.hashUtils.sha256(e).toString("base64"),"base64")}},l1=class{constructor(){this.pkceGenerator=new Lve,this.guidGenerator=new kve,this.hashUtils=new jK}base64UrlEncode(){throw new Error("Method not implemented.")}encodeKid(){throw new Error("Method not implemented.")}createNewGuid(){return this.guidGenerator.generateGuid()}base64Encode(e){return gy.base64Encode(e)}base64Decode(e){return gy.base64Decode(e)}generatePkceCodes(){return this.pkceGenerator.generatePkceCodes()}getPublicKeyThumbprint(){throw new Error("Method not implemented.")}removeTokenBindingKey(){throw new Error("Method not implemented.")}clearKeystore(){throw new Error("Method not implemented.")}signJwt(){throw new Error("Method not implemented.")}async hashString(e){return gy.base64EncodeUrl(this.hashUtils.sha256(e).toString("base64"),"base64")}},u1=class extends s1{constructor(e,t,n,i){super(t,n,e,i),this.cache={},this.changeEmitters=[],this.logger=e}registerChangeEmitter(e){this.changeEmitters.push(e)}emitChange(){this.changeEmitters.forEach(e=>e.call(null))}cacheToInMemoryCache(e){let t={accounts:{},idTokens:{},accessTokens:{},refreshTokens:{},appMetadata:{}};for(let n in e){let i=e[n];if(typeof i=="object")if(i instanceof Ep)t.accounts[n]=i;else if(Z8e(i))t.idTokens[n]=i;else if(J8e(i))t.accessTokens[n]=i;else if(e9e(i))t.refreshTokens[n]=i;else if(t9e(n,i))t.appMetadata[n]=i;else continue}return t}inMemoryCacheToCache(e){let t=this.getCache();return t={...t,...e.accounts,...e.idTokens,...e.accessTokens,...e.refreshTokens,...e.appMetadata},t}getInMemoryCache(){return this.logger.trace("Getting in-memory cache"),this.cacheToInMemoryCache(this.getCache())}setInMemoryCache(e){this.logger.trace("Setting in-memory cache");let t=this.inMemoryCacheToCache(e);this.setCache(t),this.emitChange()}getCache(){return this.logger.trace("Getting cache key-value store"),this.cache}setCache(e){this.logger.trace("Setting cache key value store"),this.cache=e,this.emitChange()}getItem(e){return this.logger.tracePii(`Item key: ${e}`),this.getCache()[e]}setItem(e,t){this.logger.tracePii(`Item key: ${e}`);let n=this.getCache();n[e]=t,this.setCache(n)}getAccountKeys(){let e=this.getInMemoryCache();return Object.keys(e.accounts)}getTokenKeys(){let e=this.getInMemoryCache();return{idToken:Object.keys(e.idTokens),accessToken:Object.keys(e.accessTokens),refreshToken:Object.keys(e.refreshTokens)}}getAccount(e){let t=this.getCachedAccountEntity(e);return t&&Ep.isAccountEntity(t)?this.updateOutdatedCachedAccount(e,t):null}getCachedAccountEntity(e){return this.getItem(e)?Object.assign(new Ep,this.getItem(e)):null}setAccount(e){let t=e.generateAccountKey();this.setItem(t,e)}getIdTokenCredential(e){let t=this.getItem(e);return Z8e(t)?t:null}setIdTokenCredential(e){let t=nx(e);this.setItem(t,e)}getAccessTokenCredential(e){let t=this.getItem(e);return J8e(t)?t:null}setAccessTokenCredential(e){let t=nx(e);this.setItem(t,e)}getRefreshTokenCredential(e){let t=this.getItem(e);return e9e(t)?t:null}setRefreshTokenCredential(e){let t=nx(e);this.setItem(t,e)}getAppMetadata(e){let t=this.getItem(e);return t9e(e,t)?t:null}setAppMetadata(e){let t=ror(e);this.setItem(t,e)}getServerTelemetry(e){let t=this.getItem(e);return t&&eor(e,t)?t:null}setServerTelemetry(e,t){this.setItem(e,t)}getAuthorityMetadata(e){let t=this.getItem(e);return t&&nor(e,t)?t:null}getAuthorityMetadataKeys(){return this.getKeys().filter(e=>this.isAuthorityMetadata(e))}setAuthorityMetadata(e,t){this.setItem(e,t)}getThrottlingCache(e){let t=this.getItem(e);return t&&tor(e,t)?t:null}setThrottlingCache(e,t){this.setItem(e,t)}removeItem(e){this.logger.tracePii(`Item key: ${e}`);let t=!1,n=this.getCache();return n[e]&&(delete n[e],t=!0),t&&(this.setCache(n),this.emitChange()),t}removeOutdatedAccount(e){this.removeItem(e)}containsKey(e){return this.getKeys().includes(e)}getKeys(){this.logger.trace("Retrieving all cache keys");let e=this.getCache();return[...Object.keys(e)]}async clear(){this.logger.trace("Clearing cache entries created by MSAL"),this.getKeys().forEach(t=>{this.removeItem(t)}),this.emitChange()}static generateInMemoryCache(e){return Rx.deserializeAllCache(Rx.deserializeJSONBlob(e))}static generateJsonCache(e){return Ez.serializeAllCache(e)}updateCredentialCacheKey(e,t){let n=nx(t);if(e!==n){let i=this.getItem(e);if(i)return this.removeItem(e),this.setItem(n,i),this.logger.verbose(`Updated an outdated ${t.credentialType} cache key`),n;this.logger.error(`Attempted to update an outdated ${t.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}},bz={Account:{},IdToken:{},AccessToken:{},RefreshToken:{},AppMetadata:{}},UK=class{constructor(e,t,n){this.cacheHasChanged=!1,this.storage=e,this.storage.registerChangeEmitter(this.handleChangeEvent.bind(this)),n&&(this.persistence=n),this.logger=t}hasChanged(){return this.cacheHasChanged}serialize(){this.logger.trace("Serializing in-memory cache");let e=Ez.serializeAllCache(this.storage.getInMemoryCache());return this.cacheSnapshot?(this.logger.trace("Reading cache snapshot from disk"),e=this.mergeState(JSON.parse(this.cacheSnapshot),e)):this.logger.trace("No cache snapshot to merge"),this.cacheHasChanged=!1,JSON.stringify(e)}deserialize(e){if(this.logger.trace("Deserializing JSON to in-memory cache"),this.cacheSnapshot=e,this.cacheSnapshot){this.logger.trace("Reading cache snapshot from disk");let t=Rx.deserializeAllCache(this.overlayDefaults(JSON.parse(this.cacheSnapshot)));this.storage.setInMemoryCache(t)}else this.logger.trace("No cache snapshot to deserialize")}getKVStore(){return this.storage.getCache()}async getAllAccounts(){this.logger.trace("getAllAccounts called");let e;try{return this.persistence&&(e=new JP(this,!0),await this.persistence.beforeCacheAccess(e)),this.storage.getAllAccounts()}finally{this.persistence&&e&&await this.persistence.afterCacheAccess(e)}}async getAccountByHomeId(e){let t=await this.getAllAccounts();return e&&t&&t.length&&t.filter(n=>n.homeAccountId===e)[0]||null}async getAccountByLocalId(e){let t=await this.getAllAccounts();return e&&t&&t.length&&t.filter(n=>n.localAccountId===e)[0]||null}async removeAccount(e){this.logger.trace("removeAccount called");let t;try{this.persistence&&(t=new JP(this,!0),await this.persistence.beforeCacheAccess(t)),await this.storage.removeAccount(Ep.generateAccountCacheKey(e))}finally{this.persistence&&t&&await this.persistence.afterCacheAccess(t)}}handleChangeEvent(){this.cacheHasChanged=!0}mergeState(e,t){this.logger.trace("Merging in-memory cache with cache snapshot");let n=this.mergeRemovals(e,t);return this.mergeUpdates(n,t)}mergeUpdates(e,t){return Object.keys(t).forEach(n=>{let i=t[n];if(!e.hasOwnProperty(n))i!==null&&(e[n]=i);else{let s=i!==null,o=typeof i=="object",a=!Array.isArray(i),c=typeof e[n]<"u"&&e[n]!==null;s&&o&&a&&c?this.mergeUpdates(e[n],i):e[n]=i}}),e}mergeRemovals(e,t){this.logger.trace("Remove updated entries in cache");let n=e.Account?this.mergeRemovalsDict(e.Account,t.Account):e.Account,i=e.AccessToken?this.mergeRemovalsDict(e.AccessToken,t.AccessToken):e.AccessToken,s=e.RefreshToken?this.mergeRemovalsDict(e.RefreshToken,t.RefreshToken):e.RefreshToken,o=e.IdToken?this.mergeRemovalsDict(e.IdToken,t.IdToken):e.IdToken,a=e.AppMetadata?this.mergeRemovalsDict(e.AppMetadata,t.AppMetadata):e.AppMetadata;return{...e,Account:n,AccessToken:i,RefreshToken:s,IdToken:o,AppMetadata:a}}mergeRemovalsDict(e,t){let n={...e};return Object.keys(e).forEach(i=>{(!t||!t.hasOwnProperty(i))&&delete n[i]}),n}overlayDefaults(e){return this.logger.trace("Overlaying input cache with the default cache"),{Account:{...bz.Account,...e.Account},IdToken:{...bz.IdToken,...e.IdToken},AccessToken:{...bz.AccessToken,...e.AccessToken},RefreshToken:{...bz.RefreshToken,...e.RefreshToken},AppMetadata:{...bz.AppMetadata,...e.AppMetadata}}}},xx=class r{static fromAssertion(e){let t=new r;return t.jwt=e,t}static fromCertificate(e,t,n){let i=new r;return i.privateKey=t,i.thumbprint=e,i.useSha256=!1,n&&(i.publicCertificate=this.parseCertificate(n)),i}static fromCertificateWithSha256Thumbprint(e,t,n){let i=new r;return i.privateKey=t,i.thumbprint=e,i.useSha256=!0,n&&(i.publicCertificate=this.parseCertificate(n)),i}getJwt(e,t,n){if(this.privateKey&&this.thumbprint)return this.jwt&&!this.isExpired()&&t===this.issuer&&n===this.jwtAudience?this.jwt:this.createJwt(e,t,n);if(this.jwt)return this.jwt;throw Jt(Uz)}createJwt(e,t,n){this.issuer=t,this.jwtAudience=n;let i=oa();this.expirationTime=i+600;let o={alg:this.useSha256?Qm.PSS_256:Qm.RSA_256},a=this.useSha256?Qm.X5T_256:Qm.X5T;Object.assign(o,{[a]:gy.base64EncodeUrl(this.thumbprint,"hex")}),this.publicCertificate&&Object.assign(o,{[Qm.X5C]:this.publicCertificate});let c={[Qm.AUDIENCE]:this.jwtAudience,[Qm.EXPIRATION_TIME]:this.expirationTime,[Qm.ISSUER]:this.issuer,[Qm.SUBJECT]:this.issuer,[Qm.NOT_BEFORE]:i,[Qm.JWT_ID]:e.createNewGuid()};return this.jwt=Msr.sign(c,this.privateKey,{header:o}),this.jwt}isExpired(){return this.expirationTime<oa()}static parseCertificate(e){let t=/-----BEGIN CERTIFICATE-----\r*\n(.+?)\r*\n-----END CERTIFICATE-----/gs,n=[],i;for(;(i=t.exec(e))!==null;)n.push(i[1].replace(/\r*\n/g,Tt.EMPTY_STRING));return n}},K9e="@azure/msal-node",d1="2.14.0",BK=class extends yy{constructor(e){super(e)}async acquireToken(e){this.logger.info("in acquireToken call in username-password client");let t=oa(),n=await this.executeTokenRequest(this.authority,e),i=new Rd(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(n.body),i.handleServerTokenResponse(n.body,this.authority,t,e)}async executeTokenRequest(e,t){let n=this.createTokenQueryParameters(t),i=Js.appendQueryString(e.tokenEndpoint,n),s=await this.createTokenRequestBody(t),o=this.createTokenRequestHeaders({credential:t.username,type:Nf.UPN}),a={clientId:this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid};return this.executePostToTokenEndpoint(i,s,o,a,t.correlationId)}async createTokenRequestBody(e){let t=new Jl;t.addClientId(this.config.authOptions.clientId),t.addUsername(e.username),t.addPassword(e.password),t.addScopes(e.scopes),t.addResponseTypeForTokenAndIdToken(),t.addGrantType(Ox.RESOURCE_OWNER_PASSWORD_GRANT),t.addClientInfo(),t.addLibraryInfo(this.config.libraryInfo),t.addApplicationTelemetry(this.config.telemetry.application),t.addThrottling(),this.serverTelemetryManager&&t.addServerTelemetry(this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();t.addCorrelationId(n),this.config.clientCredentials.clientSecret&&t.addClientSecret(this.config.clientCredentials.clientSecret);let i=this.config.clientCredentials.clientAssertion;return i&&(t.addClientAssertion(await ew(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),t.addClientAssertionType(i.assertionType)),(!xu.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.username&&t.addCcsUpn(e.username),t.createQueryString()}},p1=class{constructor(e){this.config=W9e(e),this.cryptoProvider=new l1,this.logger=new QP(this.config.system.loggerOptions,K9e,d1),this.storage=new u1(this.logger,this.config.auth.clientId,this.cryptoProvider,car(this.config.auth)),this.tokenCache=new UK(this.storage,this.logger,this.config.cache.cachePlugin)}async getAuthCodeUrl(e){this.logger.info("getAuthCodeUrl called",e.correlationId);let t={...e,...await this.initializeBaseRequest(e),responseMode:e.responseMode||YK.QUERY,authenticationScheme:Gs.BEARER},n=await this.buildOauthClientConfiguration(t.authority,t.correlationId,void 0,void 0,e.azureCloudOptions),i=new zK(n);return this.logger.verbose("Auth code client created",t.correlationId),i.getAuthCodeUrl(t)}async acquireTokenByCode(e,t){this.logger.info("acquireTokenByCode called"),e.state&&t&&(this.logger.info("acquireTokenByCode - validating state"),this.validateState(e.state,t.state||""),t={...t,state:""});let n={...e,...await this.initializeBaseRequest(e),authenticationScheme:Gs.BEARER},i=this.initializeServerTelemetryManager(ox.acquireTokenByCode,n.correlationId);try{let s=await this.buildOauthClientConfiguration(n.authority,n.correlationId,i,void 0,e.azureCloudOptions),o=new zK(s);return this.logger.verbose("Auth code client created",n.correlationId),await o.acquireToken(n,t)}catch(s){throw s instanceof xo&&s.setCorrelationId(n.correlationId),i.cacheFailedRequest(s),s}}async acquireTokenByRefreshToken(e){this.logger.info("acquireTokenByRefreshToken called",e.correlationId);let t={...e,...await this.initializeBaseRequest(e),authenticationScheme:Gs.BEARER},n=this.initializeServerTelemetryManager(ox.acquireTokenByRefreshToken,t.correlationId);try{let i=await this.buildOauthClientConfiguration(t.authority,t.correlationId,n,void 0,e.azureCloudOptions),s=new o1(i);return this.logger.verbose("Refresh token client created",t.correlationId),await s.acquireToken(t)}catch(i){throw i instanceof xo&&i.setCorrelationId(t.correlationId),n.cacheFailedRequest(i),i}}async acquireTokenSilent(e){let t={...e,...await this.initializeBaseRequest(e),forceRefresh:e.forceRefresh||!1},n=this.initializeServerTelemetryManager(ox.acquireTokenSilent,t.correlationId,t.forceRefresh);try{let i=await this.buildOauthClientConfiguration(t.authority,t.correlationId,n,void 0,e.azureCloudOptions),s=new xve(i);return this.logger.verbose("Silent flow client created",t.correlationId),await s.acquireToken(t)}catch(i){throw i instanceof xo&&i.setCorrelationId(t.correlationId),n.cacheFailedRequest(i),i}}async acquireTokenByUsernamePassword(e){this.logger.info("acquireTokenByUsernamePassword called",e.correlationId);let t={...e,...await this.initializeBaseRequest(e)},n=this.initializeServerTelemetryManager(ox.acquireTokenByUsernamePassword,t.correlationId);try{let i=await this.buildOauthClientConfiguration(t.authority,t.correlationId,n,void 0,e.azureCloudOptions),s=new BK(i);return this.logger.verbose("Username password client created",t.correlationId),await s.acquireToken(t)}catch(i){throw i instanceof xo&&i.setCorrelationId(t.correlationId),n.cacheFailedRequest(i),i}}getTokenCache(){return this.logger.info("getTokenCache called"),this.tokenCache}validateState(e,t){if(!e)throw Df.createStateNotFoundError();if(e!==t)throw Jt(ux)}getLogger(){return this.logger}setLogger(e){this.logger=e}async buildOauthClientConfiguration(e,t,n,i,s){this.logger.verbose("buildOauthClientConfiguration called",t);let o=s||this.config.auth.azureCloudOptions,a=await this.createAuthority(e,t,i,o);return this.logger.info(`Building oauth client configuration with the following authority: ${a.tokenEndpoint}.`,t),n?.updateRegionDiscoveryMetadata(a.regionDiscoveryMetadata),{authOptions:{clientId:this.config.auth.clientId,authority:a,clientCapabilities:this.config.auth.clientCapabilities},loggerOptions:{logLevel:this.config.system.loggerOptions.logLevel,loggerCallback:this.config.system.loggerOptions.loggerCallback,piiLoggingEnabled:this.config.system.loggerOptions.piiLoggingEnabled,correlationId:t},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.cryptoProvider,networkInterface:this.config.system.networkClient,storageInterface:this.storage,serverTelemetryManager:n,clientCredentials:{clientSecret:this.clientSecret,clientAssertion:await this.getClientAssertion(a)},libraryInfo:{sku:Pp.MSAL_SKU,version:d1,cpu:process.arch||Tt.EMPTY_STRING,os:process.platform||Tt.EMPTY_STRING},telemetry:this.config.telemetry,persistencePlugin:this.config.cache.cachePlugin,serializableCache:this.tokenCache}}async getClientAssertion(e){return this.developerProvidedClientAssertion&&(this.clientAssertion=xx.fromAssertion(await ew(this.developerProvidedClientAssertion,this.config.auth.clientId,e.tokenEndpoint))),this.clientAssertion&&{assertion:this.clientAssertion.getJwt(this.cryptoProvider,this.config.auth.clientId,e.tokenEndpoint),assertionType:Pp.JWT_BEARER_ASSERTION_TYPE}}async initializeBaseRequest(e){return this.logger.verbose("initializeRequestScopes called",e.correlationId),e.authenticationScheme&&e.authenticationScheme===Gs.POP&&this.logger.verbose("Authentication Scheme 'pop' is not supported yet, setting Authentication Scheme to 'Bearer' for request",e.correlationId),e.authenticationScheme=Gs.BEARER,this.config.cache.claimsBasedCachingEnabled&&e.claims&&!xu.isEmptyObj(e.claims)&&(e.requestedClaimsHash=await this.cryptoProvider.hashString(e.claims)),{...e,scopes:[...e&&e.scopes||[],...u_],correlationId:e&&e.correlationId||this.cryptoProvider.createNewGuid(),authority:e.authority||this.config.auth.authority}}initializeServerTelemetryManager(e,t,n){let i={clientId:this.config.auth.clientId,correlationId:t,apiId:e,forceRefresh:n||!1};return new FK(i,this.storage)}async createAuthority(e,t,n,i){this.logger.verbose("createAuthority called",t);let s=XP.generateAuthority(e,i),o={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,azureRegionConfiguration:n,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache};return N9e(s,this.config.system.networkClient,this.storage,o,this.logger,t)}clearCache(){this.storage.clear()}},qve=class{async listenForAuthCode(e,t){if(this.server)throw Df.createLoopbackServerAlreadyExistsError();return new Promise((n,i)=>{this.server=mK.createServer((s,o)=>{let a=s.url;if(a){if(a===Tt.FORWARD_SLASH){o.end(e||"Auth code was successfully acquired. You can close this window now.");return}}else{o.end(t||"Error occurred loading redirectUrl"),i(Df.createUnableToLoadRedirectUrlError());return}let c=this.getRedirectUri(),l=new URL(a,c),u=I9e(l.search)||{};u.code&&(o.writeHead(co.REDIRECT,{location:c}),o.end()),u.error&&o.end(t||`Error occurred: ${u.error}`),n(u)}),this.server.listen(0,"127.0.0.1")})}getRedirectUri(){if(!this.server||!this.server.listening)throw Df.createNoLoopbackServerExistsError();let e=this.server.address();if(!e||typeof e=="string"||!e.port)throw this.closeServer(),Df.createInvalidLoopbackAddressTypeError();let t=e&&e.port;return`${Pp.HTTP_PROTOCOL}${Pp.LOCALHOST}:${t}`}closeServer(){this.server&&(this.server.close(),typeof this.server.closeAllConnections=="function"&&this.server.closeAllConnections(),this.server.unref(),this.server=void 0)}},GK=class extends yy{constructor(e){super(e)}async acquireToken(e){let t=await this.getDeviceCode(e);e.deviceCodeCallback(t);let n=oa(),i=await this.acquireTokenWithDeviceCode(e,t),s=new Rd(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return s.validateTokenResponse(i),s.handleServerTokenResponse(i,this.authority,n,e)}async getDeviceCode(e){let t=this.createExtraQueryParameters(e),n=Js.appendQueryString(this.authority.deviceCodeEndpoint,t),i=this.createQueryString(e),s=this.createTokenRequestHeaders(),o={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return this.executePostRequestToDeviceCodeEndpoint(n,i,s,o)}createExtraQueryParameters(e){let t=new Jl;return e.extraQueryParameters&&t.addExtraQueryParameters(e.extraQueryParameters),t.createQueryString()}async executePostRequestToDeviceCodeEndpoint(e,t,n,i){let{body:{user_code:s,device_code:o,verification_uri:a,expires_in:c,interval:l,message:u}}=await this.networkManager.sendPostRequest(i,e,{body:t,headers:n});return{userCode:s,deviceCode:o,verificationUri:a,expiresIn:c,interval:l,message:u}}createQueryString(e){let t=new Jl;return t.addScopes(e.scopes),t.addClientId(this.config.authOptions.clientId),e.extraQueryParameters&&t.addExtraQueryParameters(e.extraQueryParameters),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities),t.createQueryString()}continuePolling(e,t,n){if(n)throw this.logger.error("Token request cancelled by setting DeviceCodeRequest.cancel = true"),Jt(qz);if(t&&t<e&&oa()>t)throw this.logger.error(`User defined timeout for device code polling reached. The timeout was set for ${t}`),Jt(Bz);if(oa()>e)throw t&&this.logger.verbose(`User specified timeout ignored as the device code has expired before the timeout elapsed. The user specified timeout was set for ${t}`),this.logger.error(`Device code expired. Expiration time of device code was ${e}`),Jt(zz);return!0}async acquireTokenWithDeviceCode(e,t){let n=this.createTokenQueryParameters(e),i=Js.appendQueryString(this.authority.tokenEndpoint,n),s=this.createTokenRequestBody(e,t),o=this.createTokenRequestHeaders(),a=e.timeout?oa()+e.timeout:void 0,c=oa()+t.expiresIn,l=t.interval*1e3;for(;this.continuePolling(c,a,e.cancel);){let u={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},d=await this.executePostToTokenEndpoint(i,s,o,u,e.correlationId);if(d.body&&d.body.error)if(d.body.error===Tt.AUTHORIZATION_PENDING)this.logger.info("Authorization pending. Continue polling."),await Vsr(l);else throw this.logger.info("Unexpected error in polling from the server"),jsr(Tz,d.body.error);else return this.logger.verbose("Authorization completed successfully. Polling stopped."),d.body}throw this.logger.error("Polling stopped for unknown reasons."),Jt(Fz)}createTokenRequestBody(e,t){let n=new Jl;n.addScopes(e.scopes),n.addClientId(this.config.authOptions.clientId),n.addGrantType(Ox.DEVICE_CODE_GRANT),n.addDeviceCode(t.deviceCode);let i=e.correlationId||this.config.cryptoInterface.createNewGuid();return n.addCorrelationId(i),n.addClientInfo(),n.addLibraryInfo(this.config.libraryInfo),n.addApplicationTelemetry(this.config.telemetry.application),n.addThrottling(),this.serverTelemetryManager&&n.addServerTelemetry(this.serverTelemetryManager),(!xu.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(e.claims,this.config.authOptions.clientCapabilities),n.createQueryString()}},zve=class extends p1{constructor(e){super(e),this.config.broker.nativeBrokerPlugin&&(this.config.broker.nativeBrokerPlugin.isBrokerAvailable?(this.nativeBrokerPlugin=this.config.broker.nativeBrokerPlugin,this.nativeBrokerPlugin.setLogger(this.config.system.loggerOptions)):this.logger.warning("NativeBroker implementation was provided but the broker is unavailable.")),this.skus=FK.makeExtraSkuString({libraryName:Pp.MSAL_SKU,libraryVersion:d1})}async acquireTokenByDeviceCode(e){this.logger.info("acquireTokenByDeviceCode called",e.correlationId);let t=Object.assign(e,await this.initializeBaseRequest(e)),n=this.initializeServerTelemetryManager(ox.acquireTokenByDeviceCode,t.correlationId);try{let i=await this.buildOauthClientConfiguration(t.authority,t.correlationId,n,void 0,e.azureCloudOptions),s=new GK(i);return this.logger.verbose("Device code client created",t.correlationId),await s.acquireToken(t)}catch(i){throw i instanceof xo&&i.setCorrelationId(t.correlationId),n.cacheFailedRequest(i),i}}async acquireTokenInteractive(e){let t=e.correlationId||this.cryptoProvider.createNewGuid();this.logger.trace("acquireTokenInteractive called",t);let{openBrowser:n,successTemplate:i,errorTemplate:s,windowHandle:o,loopbackClient:a,...c}=e;if(this.nativeBrokerPlugin){let f={...c,clientId:this.config.auth.clientId,scopes:e.scopes||u_,redirectUri:`${Pp.HTTP_PROTOCOL}${Pp.LOCALHOST}`,authority:e.authority||this.config.auth.authority,correlationId:t,extraParameters:{...c.extraQueryParameters,...c.tokenQueryParameters,[u9e]:this.skus},accountId:c.account?.nativeAccountId};return this.nativeBrokerPlugin.acquireTokenInteractive(f,o)}let{verifier:l,challenge:u}=await this.cryptoProvider.generatePkceCodes(),d=a||new qve,p={},m=null;try{let f=d.listenForAuthCode(i,s).then(w=>{p=w}).catch(w=>{m=w}),y=await this.waitForRedirectUri(d),v={...c,correlationId:t,scopes:e.scopes||u_,redirectUri:y,responseMode:YK.QUERY,codeChallenge:u,codeChallengeMethod:Pve.S256},_=await this.getAuthCodeUrl(v);if(await n(_),await f,m)throw m;if(p.error)throw new p_(p.error,p.error_description,p.suberror);if(!p.code)throw Df.createNoAuthCodeInResponseError();let C=p.client_info,P={code:p.code,codeVerifier:l,clientInfo:C||Tt.EMPTY_STRING,...v};return await this.acquireTokenByCode(P)}finally{d.closeServer()}}async acquireTokenSilent(e){let t=e.correlationId||this.cryptoProvider.createNewGuid();if(this.logger.trace("acquireTokenSilent called",t),this.nativeBrokerPlugin){let n={...e,clientId:this.config.auth.clientId,scopes:e.scopes||u_,redirectUri:`${Pp.HTTP_PROTOCOL}${Pp.LOCALHOST}`,authority:e.authority||this.config.auth.authority,correlationId:t,extraParameters:{...e.tokenQueryParameters,[u9e]:this.skus},accountId:e.account.nativeAccountId,forceRefresh:e.forceRefresh||!1};return this.nativeBrokerPlugin.acquireTokenSilent(n)}return super.acquireTokenSilent(e)}async signOut(e){if(this.nativeBrokerPlugin&&e.account.nativeAccountId){let t={clientId:this.config.auth.clientId,accountId:e.account.nativeAccountId,correlationId:e.correlationId||this.cryptoProvider.createNewGuid()};await this.nativeBrokerPlugin.signOut(t)}await this.getTokenCache().removeAccount(e.account)}async getAllAccounts(){if(this.nativeBrokerPlugin){let e=this.cryptoProvider.createNewGuid();return this.nativeBrokerPlugin.getAllAccounts(this.config.auth.clientId,e)}return this.getTokenCache().getAllAccounts()}async waitForRedirectUri(e){return new Promise((t,n)=>{let i=0,s=setInterval(()=>{if(Sve.TIMEOUT_MS/Sve.INTERVAL_MS<i){clearInterval(s),n(Df.createLoopbackServerTimeoutError());return}try{let o=e.getRedirectUri();clearInterval(s),t(o);return}catch(o){if(o instanceof xo&&o.errorCode===jc.noLoopbackServerExists.code){i++;return}clearInterval(s),n(o);return}},Sve.INTERVAL_MS)})}},m1=class extends yy{constructor(e,t){super(e),this.appTokenProvider=t}async acquireToken(e){if(e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority);let[t,n]=await this.getCachedAuthenticationResult(e,this.config,this.cryptoUtils,this.authority,this.cacheManager,this.serverTelemetryManager);return t?(n===La.PROACTIVELY_REFRESHED&&(this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),await this.executeTokenRequest(e,this.authority,!0)),t):this.executeTokenRequest(e,this.authority)}async getCachedAuthenticationResult(e,t,n,i,s,o){let a=t,c=t,l=La.NOT_APPLICABLE,u;a.serializableCache&&a.persistencePlugin&&(u=new JP(a.serializableCache,!1),await a.persistencePlugin.beforeCacheAccess(u));let d=this.readAccessTokenFromCache(i,c.managedIdentityId?.id||a.authOptions.clientId,new Ru(e.scopes||[]),s);return a.serializableCache&&a.persistencePlugin&&u&&await a.persistencePlugin.afterCacheAccess(u),d?bx(d.expiresOn,a.systemOptions?.tokenRenewalOffsetSeconds||C9e)?(o?.setCacheOutcome(La.CACHED_ACCESS_TOKEN_EXPIRED),[null,La.CACHED_ACCESS_TOKEN_EXPIRED]):(d.refreshOn&&bx(d.refreshOn.toString(),0)&&(l=La.PROACTIVELY_REFRESHED,o?.setCacheOutcome(La.PROACTIVELY_REFRESHED)),[await Rd.generateAuthenticationResult(n,i,{account:null,idToken:null,accessToken:d,refreshToken:null,appMetadata:null},!0,e),l]):(o?.setCacheOutcome(La.NO_CACHED_ACCESS_TOKEN),[null,La.NO_CACHED_ACCESS_TOKEN])}readAccessTokenFromCache(e,t,n,i){let s={homeAccountId:Tt.EMPTY_STRING,environment:e.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:Es.ACCESS_TOKEN,clientId:t,realm:e.tenant,target:Ru.createSearchScopes(n.asArray())},o=i.getAccessTokensByFilter(s);if(o.length<1)return null;if(o.length>1)throw Jt(mx);return o[0]}async executeTokenRequest(e,t,n){let i,s;if(this.appTokenProvider){this.logger.info("Using appTokenProvider extensibility.");let c={correlationId:e.correlationId,tenantId:this.config.authOptions.authority.tenant,scopes:e.scopes,claims:e.claims};s=oa();let l=await this.appTokenProvider(c);i={access_token:l.accessToken,expires_in:l.expiresInSeconds,refresh_in:l.refreshInSeconds,token_type:Gs.BEARER}}else{let c=this.createTokenQueryParameters(e),l=Js.appendQueryString(t.tokenEndpoint,c),u=await this.createTokenRequestBody(e),d=this.createTokenRequestHeaders(),p={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};this.logger.info("Sending token request to endpoint: "+t.tokenEndpoint),s=oa();let m=await this.executePostToTokenEndpoint(l,u,d,p,e.correlationId);i=m.body,i.status=m.status}let o=new Rd(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return o.validateTokenResponse(i,n),await o.handleServerTokenResponse(i,this.authority,s,e)}async createTokenRequestBody(e){let t=new Jl;t.addClientId(this.config.authOptions.clientId),t.addScopes(e.scopes,!1),t.addGrantType(Ox.CLIENT_CREDENTIALS_GRANT),t.addLibraryInfo(this.config.libraryInfo),t.addApplicationTelemetry(this.config.telemetry.application),t.addThrottling(),this.serverTelemetryManager&&t.addServerTelemetry(this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();t.addCorrelationId(n),this.config.clientCredentials.clientSecret&&t.addClientSecret(this.config.clientCredentials.clientSecret);let i=e.clientAssertion||this.config.clientCredentials.clientAssertion;return i&&(t.addClientAssertion(await ew(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),t.addClientAssertionType(i.assertionType)),(!xu.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities),t.createQueryString()}},$K=class extends yy{constructor(e){super(e)}async acquireToken(e){if(this.scopeSet=new Ru(e.scopes||[]),this.userAssertionHash=await this.cryptoUtils.hashString(e.oboAssertion),e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority,this.userAssertionHash);try{return await this.getCachedAuthenticationResult(e)}catch{return await this.executeTokenRequest(e,this.authority,this.userAssertionHash)}}async getCachedAuthenticationResult(e){let t=this.readAccessTokenFromCacheForOBO(this.config.authOptions.clientId,e);if(t){if(bx(t.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.serverTelemetryManager?.setCacheOutcome(La.CACHED_ACCESS_TOKEN_EXPIRED),this.logger.info(`OnbehalfofFlow:getCachedAuthenticationResult - Cached access token is expired or will expire within ${this.config.systemOptions.tokenRenewalOffsetSeconds} seconds.`),Jt(Af)}else throw this.serverTelemetryManager?.setCacheOutcome(La.NO_CACHED_ACCESS_TOKEN),this.logger.info("SilentFlowClient:acquireCachedToken - No access token found in cache for the given properties."),Jt(Af);let n=this.readIdTokenFromCacheForOBO(t.homeAccountId),i,s=null;if(n){i=h1(n.secret,gy.base64Decode);let o=i.oid||i.sub,a={homeAccountId:n.homeAccountId,environment:n.environment,tenantId:n.realm,username:Tt.EMPTY_STRING,localAccountId:o||Tt.EMPTY_STRING};s=this.cacheManager.readAccountFromCache(a)}return this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),Rd.generateAuthenticationResult(this.cryptoUtils,this.authority,{account:s,accessToken:t,idToken:n,refreshToken:null,appMetadata:null},!0,e,i)}readIdTokenFromCacheForOBO(e){let t={homeAccountId:e,environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:Es.ID_TOKEN,clientId:this.config.authOptions.clientId,realm:this.authority.tenant},n=this.cacheManager.getIdTokensByFilter(t);return Object.values(n).length<1?null:Object.values(n)[0]}readAccessTokenFromCacheForOBO(e,t){let n=t.authenticationScheme||Gs.BEARER,s={credentialType:n&&n.toLowerCase()!==Gs.BEARER.toLowerCase()?Es.ACCESS_TOKEN_WITH_AUTH_SCHEME:Es.ACCESS_TOKEN,clientId:e,target:Ru.createSearchScopes(this.scopeSet.asArray()),tokenType:n,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash,userAssertionHash:this.userAssertionHash},o=this.cacheManager.getAccessTokensByFilter(s),a=o.length;if(a<1)return null;if(a>1)throw Jt(mx);return o[0]}async executeTokenRequest(e,t,n){let i=this.createTokenQueryParameters(e),s=Js.appendQueryString(t.tokenEndpoint,i),o=await this.createTokenRequestBody(e),a=this.createTokenRequestHeaders(),c={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},l=oa(),u=await this.executePostToTokenEndpoint(s,o,a,c,e.correlationId),d=new Rd(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return d.validateTokenResponse(u.body),await d.handleServerTokenResponse(u.body,this.authority,l,e,void 0,n)}async createTokenRequestBody(e){let t=new Jl;t.addClientId(this.config.authOptions.clientId),t.addScopes(e.scopes),t.addGrantType(Ox.JWT_BEARER),t.addClientInfo(),t.addLibraryInfo(this.config.libraryInfo),t.addApplicationTelemetry(this.config.telemetry.application),t.addThrottling(),this.serverTelemetryManager&&t.addServerTelemetry(this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();t.addCorrelationId(n),t.addRequestTokenUse(Xor),t.addOboAssertion(e.oboAssertion),this.config.clientCredentials.clientSecret&&t.addClientSecret(this.config.clientCredentials.clientSecret);let i=this.config.clientCredentials.clientAssertion;return i&&(t.addClientAssertion(await ew(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),t.addClientAssertionType(i.assertionType)),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities),t.createQueryString()}},Fve=class extends p1{constructor(e){super(e),this.setClientCredential(),this.appTokenProvider=void 0}SetAppTokenProvider(e){this.appTokenProvider=e}async acquireTokenByClientCredential(e){this.logger.info("acquireTokenByClientCredential called",e.correlationId);let t;e.clientAssertion&&(t={assertion:await ew(e.clientAssertion,this.config.auth.clientId),assertionType:Pp.JWT_BEARER_ASSERTION_TYPE});let n=await this.initializeBaseRequest(e),i={...n,scopes:n.scopes.filter(u=>!u_.includes(u))},s={...e,...i,clientAssertion:t},a=new Js(s.authority).getUrlComponents().PathSegments[0];if(Object.values(fy).includes(a))throw Jt(Kz);let c={azureRegion:s.azureRegion,environmentRegion:process.env[Ear]},l=this.initializeServerTelemetryManager(ox.acquireTokenByClientCredential,s.correlationId,s.skipCache);try{let u=await this.buildOauthClientConfiguration(s.authority,s.correlationId,l,c,e.azureCloudOptions),d=new m1(u,this.appTokenProvider);return this.logger.verbose("Client credential client created",s.correlationId),await d.acquireToken(s)}catch(u){throw u instanceof xo&&u.setCorrelationId(s.correlationId),l.cacheFailedRequest(u),u}}async acquireTokenOnBehalfOf(e){this.logger.info("acquireTokenOnBehalfOf called",e.correlationId);let t={...e,...await this.initializeBaseRequest(e)};try{let n=await this.buildOauthClientConfiguration(t.authority,t.correlationId,void 0,void 0,e.azureCloudOptions),i=new $K(n);return this.logger.verbose("On behalf of client created",t.correlationId),await i.acquireToken(t)}catch(n){throw n instanceof xo&&n.setCorrelationId(t.correlationId),n}}setClientCredential(){let e=!!this.config.auth.clientSecret,t=!!this.config.auth.clientAssertion,n=(!!this.config.auth.clientCertificate?.thumbprint||!!this.config.auth.clientCertificate?.thumbprintSha256)&&!!this.config.auth.clientCertificate?.privateKey;if(!this.appTokenProvider){if(e&&t||t&&n||e&&n)throw Jt(vx);if(this.config.auth.clientSecret){this.clientSecret=this.config.auth.clientSecret;return}if(this.config.auth.clientAssertion){this.developerProvidedClientAssertion=this.config.auth.clientAssertion;return}if(n)this.clientAssertion=this.config.auth.clientCertificate.thumbprintSha256?xx.fromCertificateWithSha256Thumbprint(this.config.auth.clientCertificate.thumbprintSha256,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c):xx.fromCertificate(this.config.auth.clientCertificate.thumbprint,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c);else throw Jt(vx)}}},Cve={MANAGED_IDENTITY_CLIENT_ID:"client_id",MANAGED_IDENTITY_OBJECT_ID:"object_id",MANAGED_IDENTITY_RESOURCE_ID:"mi_res_id"},h_=class{constructor(e,t,n,i){this.logger=e,this.nodeStorage=t,this.networkClient=n,this.cryptoProvider=i}async getServerTokenResponseAsync(e,t,n,i){return this.getServerTokenResponse(e)}getServerTokenResponse(e){let t,n;return e.body.expires_on&&(n=e.body.expires_on-oa(),n>2*3600&&(t=n/2)),{status:e.status,access_token:e.body.access_token,expires_in:n,scope:e.body.resource,token_type:e.body.token_type,refresh_in:t,correlation_id:e.body.correlation_id||e.body.correlationId,error:typeof e.body.error=="string"?e.body.error:e.body.error?.code,error_description:e.body.message||(typeof e.body.error=="string"?e.body.error_description:e.body.error?.message),error_codes:e.body.error_codes,timestamp:e.body.timestamp,trace_id:e.body.trace_id}}async acquireTokenWithManagedIdentity(e,t,n,i){let s=this.createRequest(e.resource,t),o=s.headers;o[wp.CONTENT_TYPE]=Tt.URL_FORM_CONTENT_TYPE;let a={headers:o};Object.keys(s.bodyParameters).length&&(a.body=s.computeParametersBodyString());let c=oa(),l;try{s.httpMethod===Xl.POST?l=await this.networkClient.sendPostRequestAsync(s.computeUri(),a):l=await this.networkClient.sendGetRequestAsync(s.computeUri(),a)}catch(p){throw p instanceof xo?p:Jt(KP)}let u=new Rd(t.id,this.nodeStorage,this.cryptoProvider,this.logger,null,null),d=await this.getServerTokenResponseAsync(l,this.networkClient,s,a);return u.validateTokenResponse(d,i),u.handleServerTokenResponse(d,n,c,e)}getManagedIdentityUserAssignedIdQueryParameterKey(e){switch(e){case Id.USER_ASSIGNED_CLIENT_ID:return this.logger.info("[Managed Identity] Adding user assigned client id to the request."),Cve.MANAGED_IDENTITY_CLIENT_ID;case Id.USER_ASSIGNED_RESOURCE_ID:return this.logger.info("[Managed Identity] Adding user assigned resource id to the request."),Cve.MANAGED_IDENTITY_RESOURCE_ID;case Id.USER_ASSIGNED_OBJECT_ID:return this.logger.info("[Managed Identity] Adding user assigned object id to the request."),Cve.MANAGED_IDENTITY_OBJECT_ID;default:throw gl(wz)}}};h_.getValidatedEnvVariableUrlString=(r,e,t,n)=>{try{return new Js(e).urlString}catch{throw n.info(`[Managed Identity] ${t} managed identity is unavailable because the '${r}' environment variable is malformed.`),gl(_z[r])}};var ZP=class{constructor(e,t){this.httpMethod=e,this._baseEndpoint=t,this.headers={},this.bodyParameters={},this.queryParameters={}}computeUri(){let e=new Jl;this.queryParameters&&e.addExtraQueryParameters(this.queryParameters);let t=e.createQueryString();return Js.appendQueryString(this._baseEndpoint,t)}computeParametersBodyString(){let e=new Jl;return this.bodyParameters&&e.addExtraQueryParameters(this.bodyParameters),e.createQueryString()}},Uar="2019-08-01",VK=class r extends h_{constructor(e,t,n,i,s,o){super(e,t,n,i),this.identityEndpoint=s,this.identityHeader=o}static getEnvironmentVariables(){let e=process.env[Ti.IDENTITY_ENDPOINT],t=process.env[Ti.IDENTITY_HEADER];return[e,t]}static tryCreate(e,t,n,i){let[s,o]=r.getEnvironmentVariables();if(!s||!o)return e.info(`[Managed Identity] ${Qi.APP_SERVICE} managed identity is unavailable because one or both of the '${Ti.IDENTITY_HEADER}' and '${Ti.IDENTITY_ENDPOINT}' environment variables are not defined.`),null;let a=r.getValidatedEnvVariableUrlString(Ti.IDENTITY_ENDPOINT,s,Qi.APP_SERVICE,e);return e.info(`[Managed Identity] Environment variables validation passed for ${Qi.APP_SERVICE} managed identity. Endpoint URI: ${a}. Creating ${Qi.APP_SERVICE} managed identity.`),new r(e,t,n,i,s,o)}createRequest(e,t){let n=new ZP(Xl.GET,this.identityEndpoint);return n.headers[Sar]=this.identityHeader,n.queryParameters[JK]=Uar,n.queryParameters[f1]=e,t.idType!==Id.SYSTEM_ASSIGNED&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(t.idType)]=t.id),n}},Bar="2019-11-01",v9e="http://127.0.0.1:40342/metadata/identity/oauth2/token",b9e="N/A: himds executable exists",_9e={win32:`${process.env.ProgramData}\\AzureConnectedMachineAgent\\Tokens\\`,linux:"/var/opt/azcmagent/tokens/"},Gar={win32:`${process.env.ProgramFiles}\\AzureConnectedMachineAgent\\himds.exe`,linux:"/opt/azcmagent/bin/himds"},HK=class r extends h_{constructor(e,t,n,i,s){super(e,t,n,i),this.identityEndpoint=s}static getEnvironmentVariables(){let e=process.env[Ti.IDENTITY_ENDPOINT],t=process.env[Ti.IMDS_ENDPOINT];if(!e||!t){let n=Gar[process.platform];try{vz.accessSync(n,vz.constants.F_OK|vz.constants.R_OK),e=v9e,t=b9e}catch{}}return[e,t]}static tryCreate(e,t,n,i,s){let[o,a]=r.getEnvironmentVariables();if(!o||!a)return e.info(`[Managed Identity] ${Qi.AZURE_ARC} managed identity is unavailable through environment variables because one or both of '${Ti.IDENTITY_ENDPOINT}' and '${Ti.IMDS_ENDPOINT}' are not defined. ${Qi.AZURE_ARC} managed identity is also unavailable through file detection.`),null;if(a===b9e)e.info(`[Managed Identity] ${Qi.AZURE_ARC} managed identity is available through file detection. Defaulting to known ${Qi.AZURE_ARC} endpoint: ${v9e}. Creating ${Qi.AZURE_ARC} managed identity.`);else{let c=r.getValidatedEnvVariableUrlString(Ti.IDENTITY_ENDPOINT,o,Qi.AZURE_ARC,e);c.endsWith("/")&&c.slice(0,-1),r.getValidatedEnvVariableUrlString(Ti.IMDS_ENDPOINT,a,Qi.AZURE_ARC,e),e.info(`[Managed Identity] Environment variables validation passed for ${Qi.AZURE_ARC} managed identity. Endpoint URI: ${c}. Creating ${Qi.AZURE_ARC} managed identity.`)}if(s.idType!==Id.SYSTEM_ASSIGNED)throw gl(B9e);return new r(e,t,n,i,o)}createRequest(e){let t=new ZP(Xl.GET,this.identityEndpoint.replace("localhost","127.0.0.1"));return t.headers[Yve]="true",t.queryParameters[JK]=Bar,t.queryParameters[f1]=e,t}async getServerTokenResponseAsync(e,t,n,i){let s;if(e.status===co.UNAUTHORIZED){let o=e.headers["www-authenticate"];if(!o)throw gl(V9e);if(!o.includes("Basic realm="))throw gl(H9e);let a=o.split("Basic realm=")[1];if(!_9e.hasOwnProperty(process.platform))throw gl(U9e);let c=_9e[process.platform],l=ksr.basename(a);if(!l.endsWith(".key"))throw gl(z9e);if(c+l!==a)throw gl(F9e);let u;try{u=await vz.statSync(a).size}catch{throw gl(Ove)}if(u>Rar)throw gl(j9e);let d;try{d=vz.readFileSync(a,"utf-8")}catch{throw gl(Ove)}let p=`Basic ${d}`;this.logger.info("[Managed Identity] Adding authorization header to the request."),n.headers[_ar]=p;try{s=await t.sendGetRequestAsync(n.computeUri(),i)}catch(m){throw m instanceof xo?m:Jt(KP)}}return this.getServerTokenResponse(s||e)}},WK=class r extends h_{constructor(e,t,n,i,s){super(e,t,n,i),this.msiEndpoint=s}static getEnvironmentVariables(){return[process.env[Ti.MSI_ENDPOINT]]}static tryCreate(e,t,n,i,s){let[o]=r.getEnvironmentVariables();if(!o)return e.info(`[Managed Identity] ${Qi.CLOUD_SHELL} managed identity is unavailable because the '${Ti.MSI_ENDPOINT} environment variable is not defined.`),null;let a=r.getValidatedEnvVariableUrlString(Ti.MSI_ENDPOINT,o,Qi.CLOUD_SHELL,e);if(e.info(`[Managed Identity] Environment variable validation passed for ${Qi.CLOUD_SHELL} managed identity. Endpoint URI: ${a}. Creating ${Qi.CLOUD_SHELL} managed identity.`),s.idType!==Id.SYSTEM_ASSIGNED)throw gl(G9e);return new r(e,t,n,i,o)}createRequest(e){let t=new ZP(Xl.POST,this.msiEndpoint);return t.headers[Yve]="true",t.bodyParameters[f1]=e,t}},Q9e="/metadata/identity/oauth2/token",$ar=`http://169.254.169.254${Q9e}`,Var="2018-02-01",jve=class r extends h_{constructor(e,t,n,i,s){super(e,t,n,i),this.identityEndpoint=s}static tryCreate(e,t,n,i){let s;return process.env[Ti.AZURE_POD_IDENTITY_AUTHORITY_HOST]?(e.info(`[Managed Identity] Environment variable ${Ti.AZURE_POD_IDENTITY_AUTHORITY_HOST} for ${Qi.IMDS} returned endpoint: ${process.env[Ti.AZURE_POD_IDENTITY_AUTHORITY_HOST]}`),s=r.getValidatedEnvVariableUrlString(Ti.AZURE_POD_IDENTITY_AUTHORITY_HOST,`${process.env[Ti.AZURE_POD_IDENTITY_AUTHORITY_HOST]}${Q9e}`,Qi.IMDS,e)):(e.info(`[Managed Identity] Unable to find ${Ti.AZURE_POD_IDENTITY_AUTHORITY_HOST} environment variable for ${Qi.IMDS}, using the default endpoint.`),s=$ar),new r(e,t,n,i,s)}createRequest(e,t){let n=new ZP(Xl.GET,this.identityEndpoint);return n.headers[Yve]="true",n.queryParameters[JK]=Var,n.queryParameters[f1]=e,t.idType!==Id.SYSTEM_ASSIGNED&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(t.idType)]=t.id),n}},Har="2019-07-01-preview",KK=class r extends h_{constructor(e,t,n,i,s,o){super(e,t,n,i),this.identityEndpoint=s,this.identityHeader=o}static getEnvironmentVariables(){let e=process.env[Ti.IDENTITY_ENDPOINT],t=process.env[Ti.IDENTITY_HEADER],n=process.env[Ti.IDENTITY_SERVER_THUMBPRINT];return[e,t,n]}static tryCreate(e,t,n,i,s){let[o,a,c]=r.getEnvironmentVariables();if(!o||!a||!c)return e.info(`[Managed Identity] ${Qi.SERVICE_FABRIC} managed identity is unavailable because one or all of the '${Ti.IDENTITY_HEADER}', '${Ti.IDENTITY_ENDPOINT}' or '${Ti.IDENTITY_SERVER_THUMBPRINT}' environment variables are not defined.`),null;let l=r.getValidatedEnvVariableUrlString(Ti.IDENTITY_ENDPOINT,o,Qi.SERVICE_FABRIC,e);return e.info(`[Managed Identity] Environment variables validation passed for ${Qi.SERVICE_FABRIC} managed identity. Endpoint URI: ${l}. Creating ${Qi.SERVICE_FABRIC} managed identity.`),s.idType!==Id.SYSTEM_ASSIGNED&&e.warning(`[Managed Identity] ${Qi.SERVICE_FABRIC} user assigned managed identity is configured in the cluster, not during runtime. See also: https://learn.microsoft.com/en-us/azure/service-fabric/configure-existing-cluster-enable-managed-identity-token-service.`),new r(e,t,n,i,o,a)}createRequest(e,t){let n=new ZP(Xl.GET,this.identityEndpoint);return n.headers[Car]=this.identityHeader,n.queryParameters[JK]=Har,n.queryParameters[f1]=e,t.idType!==Id.SYSTEM_ASSIGNED&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(t.idType)]=t.id),n}},QK=class r{constructor(e,t,n,i){this.logger=e,this.nodeStorage=t,this.networkClient=n,this.cryptoProvider=i}async sendManagedIdentityTokenRequest(e,t,n,i){return r.identitySource||(r.identitySource=this.selectManagedIdentitySource(this.logger,this.nodeStorage,this.networkClient,this.cryptoProvider,t)),r.identitySource.acquireTokenWithManagedIdentity(e,t,n,i)}allEnvironmentVariablesAreDefined(e){return Object.values(e).every(t=>t!==void 0)}getManagedIdentitySource(){return r.sourceName=this.allEnvironmentVariablesAreDefined(KK.getEnvironmentVariables())?Qi.SERVICE_FABRIC:this.allEnvironmentVariablesAreDefined(VK.getEnvironmentVariables())?Qi.APP_SERVICE:this.allEnvironmentVariablesAreDefined(WK.getEnvironmentVariables())?Qi.CLOUD_SHELL:this.allEnvironmentVariablesAreDefined(HK.getEnvironmentVariables())?Qi.AZURE_ARC:Qi.DEFAULT_TO_IMDS,r.sourceName}selectManagedIdentitySource(e,t,n,i,s){let o=KK.tryCreate(e,t,n,i,s)||VK.tryCreate(e,t,n,i)||WK.tryCreate(e,t,n,i,s)||HK.tryCreate(e,t,n,i,s)||jve.tryCreate(e,t,n,i);if(!o)throw gl($9e);return o}},Uve=class r{constructor(e){this.config=jar(e||{}),this.logger=new QP(this.config.system.loggerOptions,K9e,d1);let t={canonicalAuthority:Tt.DEFAULT_AUTHORITY};r.nodeStorage||(r.nodeStorage=new u1(this.logger,this.config.managedIdentityId.id,wve,t)),this.networkClient=this.config.system.networkClient,this.cryptoProvider=new l1;let n={protocolMode:YP.AAD,knownAuthorities:[f9e],cloudDiscoveryMetadata:"",authorityMetadata:""};this.fakeAuthority=new XP(f9e,this.networkClient,r.nodeStorage,n,this.logger,this.cryptoProvider.createNewGuid(),void 0,!0),this.fakeClientCredentialClient=new m1({authOptions:{clientId:this.config.managedIdentityId.id,authority:this.fakeAuthority}}),this.managedIdentityClient=new QK(this.logger,r.nodeStorage,this.networkClient,this.cryptoProvider)}async acquireToken(e){if(!e.resource)throw Ro(_x);let t={forceRefresh:e.forceRefresh,resource:e.resource.replace("/.default",""),scopes:[e.resource.replace("/.default","")],authority:this.fakeAuthority.canonicalAuthority,correlationId:this.cryptoProvider.createNewGuid()};if(t.forceRefresh)return this.managedIdentityClient.sendManagedIdentityTokenRequest(t,this.config.managedIdentityId,this.fakeAuthority);let[n,i]=await this.fakeClientCredentialClient.getCachedAuthenticationResult(t,this.config,this.cryptoProvider,this.fakeAuthority,r.nodeStorage);return n?(i===La.PROACTIVELY_REFRESHED&&(this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),await this.managedIdentityClient.sendManagedIdentityTokenRequest(t,this.config.managedIdentityId,this.fakeAuthority,!0)),n):this.managedIdentityClient.sendManagedIdentityTokenRequest(t,this.config.managedIdentityId,this.fakeAuthority)}getManagedIdentitySource(){return QK.sourceName||this.managedIdentityClient.getManagedIdentitySource()}},Bve=class{constructor(e,t){this.client=e,this.partitionManager=t}async beforeCacheAccess(e){let t=await this.partitionManager.getKey(),n=await this.client.get(t);e.tokenCache.deserialize(n)}async afterCacheAccess(e){if(e.cacheHasChanged){let t=e.tokenCache.getKVStore(),n=Object.values(t).filter(i=>Ep.isAccountEntity(i));if(n.length>0){let i=n[0],s=await this.partitionManager.extractKey(i);await this.client.set(s,e.tokenCache.serialize())}}}};en.AuthError=xo;en.AuthErrorCodes=zsr;en.AuthErrorMessage=Fsr;en.AzureCloudInstance=XK;en.ClientApplication=p1;en.ClientAssertion=xx;en.ClientAuthError=Qz;en.ClientAuthErrorCodes=Usr;en.ClientAuthErrorMessage=Bsr;en.ClientConfigurationError=OK;en.ClientConfigurationErrorCodes=ior;en.ClientConfigurationErrorMessage=sor;en.ClientCredentialClient=m1;en.ConfidentialClientApplication=Fve;en.CryptoProvider=l1;en.DeviceCodeClient=GK;en.DistributedCachePlugin=Bve;en.InteractionRequiredAuthError=m_;en.InteractionRequiredAuthErrorCodes=lar;en.InteractionRequiredAuthErrorMessage=dar;en.Logger=QP;en.ManagedIdentityApplication=Uve;en.ManagedIdentitySourceNames=Qi;en.NodeStorage=u1;en.OnBehalfOfClient=$K;en.PromptValue=ax;en.ProtocolMode=YP;en.PublicClientApplication=zve;en.ResponseMode=YK;en.ServerError=p_;en.TokenCache=UK;en.TokenCacheContext=JP;en.UsernamePasswordClient=BK;en.buildAppConfiguration=W9e;en.internals=bar;en.version=d1});var Zve=O((qWr,J9e)=>{"use strict";var X9e=require("fs"),Jve;function War(){try{return X9e.statSync("/.dockerenv"),!0}catch{return!1}}function Kar(){try{return X9e.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}J9e.exports=()=>(Jve===void 0&&(Jve=War()||Kar()),Jve)});var tXe=O((zWr,ebe)=>{"use strict";var Qar=require("os"),Yar=require("fs"),Z9e=Zve(),eXe=()=>{if(process.platform!=="linux")return!1;if(Qar.release().toLowerCase().includes("microsoft"))return!Z9e();try{return Yar.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!Z9e():!1}catch{return!1}};process.env.__IS_WSL_TEST__?ebe.exports=eXe:ebe.exports=eXe()});var nXe=O((FWr,rXe)=>{"use strict";rXe.exports=(r,e,t)=>{let n=i=>Object.defineProperty(r,e,{value:i,enumerable:!0,writable:!0});return Object.defineProperty(r,e,{configurable:!0,enumerable:!0,get(){let i=t();return n(i),i},set(i){n(i)}}),r}});var uXe=O((jWr,lXe)=>{var Xar=require("path"),Jar=require("child_process"),{promises:eQ,constants:cXe}=require("fs"),ZK=tXe(),Zar=Zve(),rbe=nXe(),iXe=Xar.join(__dirname,"xdg-open"),{platform:Ax,arch:sXe}=process,ecr=()=>{try{return eQ.statSync("/run/.containerenv"),!0}catch{return!1}},tbe;function tcr(){return tbe===void 0&&(tbe=ecr()||Zar()),tbe}var rcr=(()=>{let r="/mnt/",e;return async function(){if(e)return e;let t="/etc/wsl.conf",n=!1;try{await eQ.access(t,cXe.F_OK),n=!0}catch{}if(!n)return r;let i=await eQ.readFile(t,{encoding:"utf8"}),s=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(i);return s?(e=s.groups.mountPoint.trim(),e=e.endsWith("/")?e:`${e}/`,e):r}})(),oXe=async(r,e)=>{let t;for(let n of r)try{return await e(n)}catch(i){t=i}throw t},tQ=async r=>{if(r={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...r},Array.isArray(r.app))return oXe(r.app,a=>tQ({...r,app:a}));let{name:e,arguments:t=[]}=r.app||{};if(t=[...t],Array.isArray(e))return oXe(e,a=>tQ({...r,app:{name:a,arguments:t}}));let n,i=[],s={};if(Ax==="darwin")n="open",r.wait&&i.push("--wait-apps"),r.background&&i.push("--background"),r.newInstance&&i.push("--new"),e&&i.push("-a",e);else if(Ax==="win32"||ZK&&!tcr()&&!e){let a=await rcr();n=ZK?`${a}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${process.env.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`,i.push("-NoProfile","-NonInteractive","\u2013ExecutionPolicy","Bypass","-EncodedCommand"),ZK||(s.windowsVerbatimArguments=!0);let c=["Start"];r.wait&&c.push("-Wait"),e?(c.push(`"\`"${e}\`""`,"-ArgumentList"),r.target&&t.unshift(r.target)):r.target&&c.push(`"${r.target}"`),t.length>0&&(t=t.map(l=>`"\`"${l}\`""`),c.push(t.join(","))),r.target=Buffer.from(c.join(" "),"utf16le").toString("base64")}else{if(e)n=e;else{let a=!__dirname||__dirname==="/",c=!1;try{await eQ.access(iXe,cXe.X_OK),c=!0}catch{}n=process.versions.electron||Ax==="android"||a||!c?"xdg-open":iXe}t.length>0&&i.push(...t),r.wait||(s.stdio="ignore",s.detached=!0)}r.target&&i.push(r.target),Ax==="darwin"&&t.length>0&&i.push("--args",...t);let o=Jar.spawn(n,i,s);return r.wait?new Promise((a,c)=>{o.once("error",c),o.once("close",l=>{if(!r.allowNonzeroExitCode&&l>0){c(new Error(`Exited with code ${l}`));return}a(o)})}):(o.unref(),o)},nbe=(r,e)=>{if(typeof r!="string")throw new TypeError("Expected a `target`");return tQ({...e,target:r})},ncr=(r,e)=>{if(typeof r!="string")throw new TypeError("Expected a `name`");let{arguments:t=[]}=e||{};if(t!=null&&!Array.isArray(t))throw new TypeError("Expected `appArguments` as Array type");return tQ({...e,app:{name:r,arguments:t}})};function aXe(r){if(typeof r=="string"||Array.isArray(r))return r;let{[sXe]:e}=r;if(!e)throw new Error(`${sXe} is not supported`);return e}function ibe({[Ax]:r},{wsl:e}){if(e&&ZK)return aXe(e);if(!r)throw new Error(`${Ax} is not supported`);return aXe(r)}var rQ={};rbe(rQ,"chrome",()=>ibe({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));rbe(rQ,"firefox",()=>ibe({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));rbe(rQ,"edge",()=>ibe({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));nbe.apps=rQ;nbe.openApp=ncr;lXe.exports=nbe});var VXe=O(Qn=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});var wbe=lu(),icr=P8e(),C1=gs(),Zl=zA(),wXe=C8(),scr=Bq(),ocr=require("fs"),acr=require("os"),ccr=require("path"),EXe=Y9e(),lcr=uXe(),TXe=require("fs/promises"),Ebe=require("child_process"),dXe=require("crypto"),ucr=require("node:fs/promises"),dcr=require("node:crypto");function IXe(r){var e=Object.create(null);return r&&Object.keys(r).forEach(function(t){if(t!=="default"){var n=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:function(){return r[t]}})}}),e.default=r,Object.freeze(e)}var Ym=IXe(EXe),pcr=IXe(Ebe),RXe="4.4.1",oQ="04b07795-8ddb-461a-bbee-02f9e1bf7b46",mcr="common";Qn.AzureAuthorityHosts=void 0;(function(r){r.AzureChina="https://login.chinacloudapi.cn",r.AzureGermany="https://login.microsoftonline.de",r.AzureGovernment="https://login.microsoftonline.us",r.AzurePublicCloud="https://login.microsoftonline.com"})(Qn.AzureAuthorityHosts||(Qn.AzureAuthorityHosts={}));var xXe=Qn.AzureAuthorityHosts.AzurePublicCloud,hcr=["*"],fcr="cae",gcr="nocae",ycr="msal.cache",nQ,vcr={setPersistence(r){nQ=r}},dbe,bcr={setNativeBroker(r){dbe={broker:r}}};function _cr(r){var e,t,n,i,s,o,a;let c={cache:{},broker:{isEnabled:(t=(e=r.brokerOptions)===null||e===void 0?void 0:e.enabled)!==null&&t!==void 0?t:!1,enableMsaPassthrough:(i=(n=r.brokerOptions)===null||n===void 0?void 0:n.legacyEnableMsaPassthrough)!==null&&i!==void 0?i:!1,parentWindowHandle:(s=r.brokerOptions)===null||s===void 0?void 0:s.parentWindowHandle}};if(!((o=r.tokenCachePersistenceOptions)===null||o===void 0)&&o.enabled){if(nQ===void 0)throw new Error(["Persistent token caching was requested, but no persistence provider was configured.","You must install the identity-cache-persistence plugin package (`npm install --save @azure/identity-cache-persistence`)","and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling","`useIdentityPlugin(cachePersistencePlugin)` before using `tokenCachePersistenceOptions`."].join(" "));let l=r.tokenCachePersistenceOptions.name||ycr;c.cache.cachePlugin=nQ(Object.assign({name:`${l}.${gcr}`},r.tokenCachePersistenceOptions)),c.cache.cachePluginCae=nQ(Object.assign({name:`${l}.${fcr}`},r.tokenCachePersistenceOptions))}if(!((a=r.brokerOptions)===null||a===void 0)&&a.enabled){if(dbe===void 0)throw new Error(["Broker for WAM was requested to be enabled, but no native broker was configured.","You must install the identity-broker plugin package (`npm install --save @azure/identity-broker`)","and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling","`useIdentityPlugin(createNativeBrokerPlugin())` before using `enableBroker`."].join(" "));c.broker.nativeBrokerPlugin=dbe.broker}return c}var Scr={generatePluginConfiguration:_cr},Ip=wbe.createClientLogger("identity");function OXe(r){return r.reduce((e,t)=>(process.env[t]?e.assigned.push(t):e.missing.push(t),e),{missing:[],assigned:[]})}function xp(r){return`SUCCESS. Scopes: ${Array.isArray(r)?r.join(", "):r}.`}function Oo(r,e){let t="ERROR.";return r?.length&&(t+=` Scopes: ${Array.isArray(r)?r.join(", "):r}.`),`${t} Error message: ${typeof e=="string"?e:e.message}.`}function pXe(r,e,t=Ip){let n=e?`${e.fullTitle} ${r}`:r;function i(c){t.info(`${n} =>`,c)}function s(c){t.warning(`${n} =>`,c)}function o(c){t.verbose(`${n} =>`,c)}function a(c){t.error(`${n} =>`,c)}return{title:r,fullTitle:n,info:i,warning:s,verbose:o,error:a}}function Ho(r,e=Ip){let t=pXe(r,void 0,e);return Object.assign(Object.assign({},t),{parent:e,getToken:pXe("=> getToken()",t,e)})}function Ccr(r){return r&&typeof r.error=="string"&&typeof r.error_description=="string"}var AXe="CredentialUnavailableError",Oi=class extends Error{constructor(e){super(e),this.name=AXe}},Tbe="AuthenticationError",Sy=class extends Error{constructor(e,t){let n={error:"unknown",errorDescription:"An unknown error occurred and no additional details are available."};if(Ccr(t))n=mXe(t);else if(typeof t=="string")try{let i=JSON.parse(t);n=mXe(i)}catch{e===400?n={error:"authority_not_found",errorDescription:"The specified authority URL was not found."}:n={error:"unknown_error",errorDescription:`An unknown error has occurred. Response body:

${t}`}}else n={error:"unknown_error",errorDescription:"An unknown error occurred and no additional details are available."};super(`${n.error} Status code: ${e}
More details:
${n.errorDescription}`),this.statusCode=e,this.errorResponse=n,this.name=Tbe}},NXe="AggregateAuthenticationError",aQ=class extends Error{constructor(e,t){let n=e.join(`
`);super(`${t}
${n}`),this.errors=e,this.name=NXe}};function mXe(r){return{error:r.error,errorDescription:r.error_description,correlationId:r.correlation_id,errorCodes:r.error_codes,timestamp:r.timestamp,traceId:r.trace_id}}var Cy=class extends Error{constructor(e){super(e.message),this.scopes=e.scopes,this.getTokenOptions=e.getTokenOptions,this.name="AuthenticationRequiredError"}};function Pcr(r){return`The current credential is not configured to acquire tokens for tenant ${r}. To enable acquiring tokens for this tenant add it to the AdditionallyAllowedTenants on the credential options, or add "*" to AdditionallyAllowedTenants to allow acquiring tokens for any tenant.`}function Ap(r,e,t=[],n){var i;let s;if(process.env.AZURE_IDENTITY_DISABLE_MULTITENANTAUTH||r==="adfs"?s=r:s=(i=e?.tenantId)!==null&&i!==void 0?i:r,r&&s!==r&&!t.includes("*")&&!t.some(o=>o.localeCompare(s)===0)){let o=Pcr(r);throw n?.info(o),new Oi(o)}return s}function Op(r,e){if(!e.match(/^[0-9a-zA-Z-.]+$/)){let t=new Error("Invalid tenant id provided. You can locate your tenant id by following the instructions listed here: https://learn.microsoft.com/partner-center/find-ids-and-domain-names.");throw r.info(Oo("",t)),t}}function Ibe(r,e,t){return e?(Op(r,e),e):(t||(t=oQ),t!==oQ?"common":"organizations")}function Np(r){return!r||r.length===0?[]:r.includes("*")?hcr:r}function wcr(r){return r==="adfs"?"oauth2/token":"oauth2/v2.0/token"}var pc=scr.createTracingClient({namespace:"Microsoft.AAD",packageName:"@azure/identity",packageVersion:RXe}),hXe="/.default",DXe="http://169.254.169.254",Ecr="/metadata/identity/oauth2/token",Tcr="2018-02-01";function Rbe(r){let e="";if(Array.isArray(r)){if(r.length!==1)return;e=r[0]}else typeof r=="string"&&(e=r);return e.endsWith(hXe)?e.substr(0,e.lastIndexOf(hXe)):e}function Icr(r){if(typeof r.expires_on=="number")return r.expires_on*1e3;if(typeof r.expires_on=="string"){let e=+r.expires_on;if(!isNaN(e))return e*1e3;let t=Date.parse(r.expires_on);if(!isNaN(t))return t}if(typeof r.expires_in=="number")return Date.now()+r.expires_in*1e3;throw new Error(`Failed to parse token expiration from body. expires_in="${r.expires_in}", expires_on="${r.expires_on}"`)}var g1="noCorrelationId";function Rcr(r){let e=r?.authorityHost;return C1.isNode&&(e=e??process.env.AZURE_AUTHORITY_HOST),e??xXe}var sw=class extends icr.ServiceClient{constructor(e){var t,n;let i=`azsdk-js-identity/${RXe}`,s=!((t=e?.userAgentOptions)===null||t===void 0)&&t.userAgentPrefix?`${e.userAgentOptions.userAgentPrefix} ${i}`:`${i}`,o=Rcr(e);if(!o.startsWith("https:"))throw new Error("The authorityHost address must use the 'https' protocol.");super(Object.assign(Object.assign({requestContentType:"application/json; charset=utf-8",retryOptions:{maxRetries:3}},e),{userAgentOptions:{userAgentPrefix:s},baseUri:o})),this.allowInsecureConnection=!1,this.authorityHost=o,this.abortControllers=new Map,this.allowLoggingAccountIdentifiers=(n=e?.loggingOptions)===null||n===void 0?void 0:n.allowLoggingAccountIdentifiers,this.tokenCredentialOptions=Object.assign({},e),e?.allowInsecureConnection&&(this.allowInsecureConnection=e.allowInsecureConnection)}async sendTokenRequest(e){Ip.info(`IdentityClient: sending token request to [${e.url}]`);let t=await this.sendRequest(e);if(t.bodyAsText&&(t.status===200||t.status===201)){let n=JSON.parse(t.bodyAsText);if(!n.access_token)return null;this.logIdentifiers(t);let i={accessToken:{token:n.access_token,expiresOnTimestamp:Icr(n)},refreshToken:n.refresh_token};return Ip.info(`IdentityClient: [${e.url}] token acquired, expires on ${i.accessToken.expiresOnTimestamp}`),i}else{let n=new Sy(t.status,t.bodyAsText);throw Ip.warning(`IdentityClient: authentication error. HTTP status: ${t.status}, ${n.errorResponse.errorDescription}`),n}}async refreshAccessToken(e,t,n,i,s,o={}){if(i===void 0)return null;Ip.info(`IdentityClient: refreshing access token with client ID: ${t}, scopes: ${n} started`);let a={grant_type:"refresh_token",client_id:t,refresh_token:i,scope:n};s!==void 0&&(a.client_secret=s);let c=new URLSearchParams(a);return pc.withSpan("IdentityClient.refreshAccessToken",o,async l=>{try{let u=wcr(e),d=Zl.createPipelineRequest({url:`${this.authorityHost}/${e}/${u}`,method:"POST",body:c.toString(),abortSignal:o.abortSignal,headers:Zl.createHttpHeaders({Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}),tracingOptions:l.tracingOptions}),p=await this.sendTokenRequest(d);return Ip.info(`IdentityClient: refreshed token for client ID: ${t}`),p}catch(u){if(u.name===Tbe&&u.errorResponse.error==="interaction_required")return Ip.info(`IdentityClient: interaction required for client ID: ${t}`),null;throw Ip.warning(`IdentityClient: failed refreshing token for client ID: ${t}: ${u}`),u}})}generateAbortSignal(e){let t=new wXe.AbortController,n=this.abortControllers.get(e)||[];n.push(t),this.abortControllers.set(e,n);let i=t.signal.onabort;return t.signal.onabort=(...s)=>{this.abortControllers.set(e,void 0),i&&i(...s)},t.signal}abortRequests(e){let t=e||g1,n=[...this.abortControllers.get(t)||[],...this.abortControllers.get(g1)||[]];if(n.length){for(let i of n)i.abort();this.abortControllers.set(t,void 0)}}getCorrelationId(e){var t;let n=(t=e?.body)===null||t===void 0?void 0:t.split("&").map(i=>i.split("=")).find(([i])=>i==="client-request-id");return n&&n.length&&n[1]||g1}async sendGetRequestAsync(e,t){let n=Zl.createPipelineRequest({url:e,method:"GET",body:t?.body,allowInsecureConnection:this.allowInsecureConnection,headers:Zl.createHttpHeaders(t?.headers),abortSignal:this.generateAbortSignal(g1)}),i=await this.sendRequest(n);return this.logIdentifiers(i),{body:i.bodyAsText?JSON.parse(i.bodyAsText):void 0,headers:i.headers.toJSON(),status:i.status}}async sendPostRequestAsync(e,t){let n=Zl.createPipelineRequest({url:e,method:"POST",body:t?.body,headers:Zl.createHttpHeaders(t?.headers),allowInsecureConnection:this.allowInsecureConnection,abortSignal:this.generateAbortSignal(this.getCorrelationId(t))}),i=await this.sendRequest(n);return this.logIdentifiers(i),{body:i.bodyAsText?JSON.parse(i.bodyAsText):void 0,headers:i.headers.toJSON(),status:i.status}}getTokenCredentialOptions(){return this.tokenCredentialOptions}logIdentifiers(e){if(!this.allowLoggingAccountIdentifiers||!e.bodyAsText)return;let t="No User Principal Name available";try{let i=(e.parsedBody||JSON.parse(e.bodyAsText)).access_token;if(!i)return;let s=i.split(".")[1],{appid:o,upn:a,tid:c,oid:l}=JSON.parse(Buffer.from(s,"base64").toString("utf8"));Ip.info(`[Authenticated account] Client ID: ${o}. Tenant ID: ${c}. User Principal Name: ${a||t}. Object ID (user): ${l}`)}catch(n){Ip.warning("allowLoggingAccountIdentifiers was set, but we couldn't log the account information. Error:",n.message)}}},xcr="common",Ocr="aebc6443-996d-45c2-90f0-388ff96faa56",rw=Ho("VisualStudioCodeCredential"),pbe,Acr={setVsCodeCredentialFinder(r){pbe=r}},Ncr={adfs:"The VisualStudioCodeCredential does not support authentication with ADFS tenants."};function fXe(r){let e=Ncr[r];if(e)throw new Oi(e)}var Dcr={AzureCloud:Qn.AzureAuthorityHosts.AzurePublicCloud,AzureChina:Qn.AzureAuthorityHosts.AzureChina,AzureGermanCloud:Qn.AzureAuthorityHosts.AzureGermany,AzureUSGovernment:Qn.AzureAuthorityHosts.AzureGovernment};function gXe(r){let e=["User","settings.json"],t="Code",n=acr.homedir();function i(...s){let o=ccr.join(...s,t,...e);return JSON.parse(ocr.readFileSync(o,{encoding:"utf8"}))[r]}try{let s;switch(process.platform){case"win32":return s=process.env.APPDATA,s?i(s):void 0;case"darwin":return i(n,"Library","Application Support");case"linux":return i(n,".config");default:return}}catch(s){rw.info(`Failed to load the Visual Studio Code configuration file. Error: ${s.message}`);return}}var mbe=class{constructor(e){this.cloudName=gXe("azure.cloud")||"AzureCloud";let t=Dcr[this.cloudName];this.identityClient=new sw(Object.assign({authorityHost:t},e)),e&&e.tenantId?(Op(rw,e.tenantId),this.tenantId=e.tenantId):this.tenantId=xcr,this.additionallyAllowedTenantIds=Np(e?.additionallyAllowedTenants),fXe(this.tenantId)}async prepare(){let e=gXe("azure.tenant");e&&(this.tenantId=e),fXe(this.tenantId)}prepareOnce(){return this.preparePromise||(this.preparePromise=this.prepare()),this.preparePromise}async getToken(e,t){var n,i;await this.prepareOnce();let s=Ap(this.tenantId,t,this.additionallyAllowedTenantIds,rw)||this.tenantId;if(pbe===void 0)throw new Oi(["No implementation of `VisualStudioCodeCredential` is available.","You must install the identity-vscode plugin package (`npm install --save-dev @azure/identity-vscode`)","and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling","`useIdentityPlugin(vsCodePlugin)` before creating a `VisualStudioCodeCredential`.","To troubleshoot, visit https://aka.ms/azsdk/js/identity/vscodecredential/troubleshoot."].join(" "));let o=typeof e=="string"?e:e.join(" ");if(!o.match(/^[0-9a-zA-Z-.:/]+$/)){let l=new Error("Invalid scope was specified by the user or calling client");throw rw.getToken.info(Oo(e,l)),l}o.indexOf("offline_access")<0&&(o+=" offline_access");let a=await pbe(),{password:c}=(i=(n=a.find(({account:l})=>l===this.cloudName))!==null&&n!==void 0?n:a[0])!==null&&i!==void 0?i:{};if(c){let l=await this.identityClient.refreshAccessToken(s,Ocr,o,c,void 0);if(l)return rw.getToken.info(xp(e)),l.accessToken;{let u=new Oi("Could not retrieve the token associated with Visual Studio Code. Have you connected using the 'Azure Account' extension recently? To troubleshoot, visit https://aka.ms/azsdk/js/identity/vscodecredential/troubleshoot.");throw rw.getToken.info(Oo(e,u)),u}}else{let l=new Oi("Could not retrieve the token associated with Visual Studio Code. Did you connect using the 'Azure Account' extension? To troubleshoot, visit https://aka.ms/azsdk/js/identity/vscodecredential/troubleshoot.");throw rw.getToken.info(Oo(e,l)),l}}},Mcr={cachePluginControl:vcr,nativeBrokerPluginControl:bcr,vsCodeCredentialControl:Acr};function kcr(r){r(Mcr)}var _1=Ho("IdentityUtils"),MXe="1.0";function y1(r,e,t){let n=i=>(_1.getToken.info(i),new Cy({scopes:Array.isArray(r)?r:[r],getTokenOptions:t,message:i}));if(!e)throw n("No response");if(!e.expiresOn)throw n('Response had no "expiresOn" property.');if(!e.accessToken)throw n('Response had no "accessToken" property.')}function xbe(r,e){return e||(e=xXe),new RegExp(`${r}/?$`).test(e)?e:e.endsWith("/")?e+r:`${e}/${r}`}function Lcr(r,e,t){return r==="adfs"&&e||t?[e]:[]}var kXe=(r,e=C1.isNode?"Node":"Browser")=>(t,n,i)=>{if(!i)switch(t){case Ym.LogLevel.Error:r.info(`MSAL ${e} V2 error: ${n}`);return;case Ym.LogLevel.Info:r.info(`MSAL ${e} V2 info message: ${n}`);return;case Ym.LogLevel.Verbose:r.info(`MSAL ${e} V2 verbose message: ${n}`);return;case Ym.LogLevel.Warning:r.info(`MSAL ${e} V2 warning: ${n}`);return}};function LXe(r){switch(r){case"error":return Ym.LogLevel.Error;case"info":return Ym.LogLevel.Info;case"verbose":return Ym.LogLevel.Verbose;case"warning":return Ym.LogLevel.Warning;default:return Ym.LogLevel.Info}}function v1(r,e,t){if(e.name==="AuthError"||e.name==="ClientAuthError"||e.name==="BrowserAuthError"){let n=e;switch(n.errorCode){case"endpoints_resolution_error":return _1.info(Oo(r,e.message)),new Oi(e.message);case"device_code_polling_cancelled":return new wXe.AbortError("The authentication has been aborted by the caller.");case"consent_required":case"interaction_required":case"login_required":_1.info(Oo(r,`Authentication returned errorCode ${n.errorCode}`));break;default:_1.info(Oo(r,`Failed to acquire token: ${e.message}`));break}}return e.name==="ClientConfigurationError"||e.name==="BrowserConfigurationAuthError"||e.name==="AbortError"?e:e.name==="NativeAuthError"?(_1.info(Oo(r,`Error from the native broker: ${e.message} with status code: ${e.statusCode}`)),e):new Cy({scopes:r,getTokenOptions:t,message:e.message})}function qcr(r){let[e]=r.authority.match(/([a-z]*\.[a-z]*\.[a-z]*)/)||[""];return Object.assign(Object.assign({},r),{localAccountId:r.homeAccountId,environment:e})}function zcr(r,e){return{authority:xbe(e.tenantId,e.environment),homeAccountId:e.homeAccountId,tenantId:e.tenantId||mcr,username:e.username,clientId:r,version:MXe}}function Fcr(r){return JSON.stringify(r)}function jcr(r){let e=JSON.parse(r);if(e.version&&e.version!==MXe)throw Error("Unsupported AuthenticationRecord version");return e}var Tp="ManagedIdentityCredential - IMDS",vy=Ho(Tp);function yXe(r,e,t,n){var i;let s=Rbe(r);if(!s)throw new Error(`${Tp}: Multiple scopes are not supported.`);let{skipQuery:o,skipMetadataHeader:a}=n||{},c="";if(!o){let d={resource:s,"api-version":Tcr};e&&(d.client_id=e),t&&(d.msi_res_id=t),c=`?${new URLSearchParams(d).toString()}`}let l=new URL(Ecr,(i=process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST)!==null&&i!==void 0?i:DXe),u={Accept:"application/json",Metadata:"true"};return a&&delete u.Metadata,{url:`${l}${c}`,method:"GET",headers:Zl.createHttpHeaders(u)}}var Ucr={name:"imdsMsi",async isAvailable({scopes:r,identityClient:e,clientId:t,resourceId:n,getTokenOptions:i={}}){let s=Rbe(r);if(!s)return vy.info(`${Tp}: Unavailable. Multiple scopes are not supported.`),!1;if(process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST)return!0;if(!e)throw new Error("Missing IdentityClient");let o=yXe(s,t,n,{skipMetadataHeader:!0,skipQuery:!0});return pc.withSpan("ManagedIdentityCredential-pingImdsEndpoint",i,async a=>{var c,l;o.tracingOptions=a.tracingOptions;let u=Zl.createPipelineRequest(o);u.timeout=((c=a.requestOptions)===null||c===void 0?void 0:c.timeout)||1e3,u.allowInsecureConnection=!0;let d;try{vy.info(`${Tp}: Pinging the Azure IMDS endpoint`),d=await e.sendRequest(u)}catch(p){return C1.isError(p)&&vy.verbose(`${Tp}: Caught error ${p.name}: ${p.message}`),vy.info(`${Tp}: The Azure IMDS endpoint is unavailable`),!1}return d.status===403&&!((l=d.bodyAsText)===null||l===void 0)&&l.includes("unreachable")?(vy.info(`${Tp}: The Azure IMDS endpoint is unavailable`),vy.info(`${Tp}: ${d.bodyAsText}`),!1):(vy.info(`${Tp}: The Azure IMDS endpoint is available`),!0)})},async getToken(r,e={}){let{identityClient:t,scopes:n,clientId:i,resourceId:s}=r;process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST?vy.info(`${Tp}: Using the Azure IMDS endpoint coming from the environment variable AZURE_POD_IDENTITY_AUTHORITY_HOST=${process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST}.`):vy.info(`${Tp}: Using the default Azure IMDS endpoint ${DXe}.`);let o=r.retryConfig.startDelayInMs;for(let a=0;a<r.retryConfig.maxRetries;a++)try{let c=Zl.createPipelineRequest(Object.assign(Object.assign({abortSignal:e.abortSignal},yXe(n,i,s)),{allowInsecureConnection:!0})),l=await t.sendTokenRequest(c);return l&&l.accessToken||null}catch(c){if(c.statusCode===404){await C1.delay(o),o*=r.retryConfig.intervalIncrement;continue}throw c}throw new Sy(404,`${Tp}: Failed to retrieve IMDS token after ${r.retryConfig.maxRetries} retries.`)}},Bcr=1e3*64;function Gcr(r){return Zl.retryPolicy([{name:"imdsRetryPolicy",retry:({retryCount:e,response:t})=>{if(t?.status!==404)return{skipStrategy:!0};let n=r.startDelayInMs*Math.pow(2,e),i=Math.min(Bcr,n);return{retryAfterInMs:i/2+C1.getRandomIntegerInclusive(0,i/2)}}}],{maxRetries:r.maxRetries})}var hbe;(function(r){r.AutoDiscoverRegion="AutoDiscoverRegion",r.USWest="westus",r.USWest2="westus2",r.USCentral="centralus",r.USEast="eastus",r.USEast2="eastus2",r.USNorthCentral="northcentralus",r.USSouthCentral="southcentralus",r.USWestCentral="westcentralus",r.CanadaCentral="canadacentral",r.CanadaEast="canadaeast",r.BrazilSouth="brazilsouth",r.EuropeNorth="northeurope",r.EuropeWest="westeurope",r.UKSouth="uksouth",r.UKWest="ukwest",r.FranceCentral="francecentral",r.FranceSouth="francesouth",r.SwitzerlandNorth="switzerlandnorth",r.SwitzerlandWest="switzerlandwest",r.GermanyNorth="germanynorth",r.GermanyWestCentral="germanywestcentral",r.NorwayWest="norwaywest",r.NorwayEast="norwayeast",r.AsiaEast="eastasia",r.AsiaSouthEast="southeastasia",r.JapanEast="japaneast",r.JapanWest="japanwest",r.AustraliaEast="australiaeast",r.AustraliaSouthEast="australiasoutheast",r.AustraliaCentral="australiacentral",r.AustraliaCentral2="australiacentral2",r.IndiaCentral="centralindia",r.IndiaSouth="southindia",r.IndiaWest="westindia",r.KoreaSouth="koreasouth",r.KoreaCentral="koreacentral",r.UAECentral="uaecentral",r.UAENorth="uaenorth",r.SouthAfricaNorth="southafricanorth",r.SouthAfricaWest="southafricawest",r.ChinaNorth="chinanorth",r.ChinaEast="chinaeast",r.ChinaNorth2="chinanorth2",r.ChinaEast2="chinaeast2",r.GermanyCentral="germanycentral",r.GermanyNorthEast="germanynortheast",r.GovernmentUSVirginia="usgovvirginia",r.GovernmentUSIowa="usgoviowa",r.GovernmentUSArizona="usgovarizona",r.GovernmentUSTexas="usgovtexas",r.GovernmentUSDodEast="usdodeast",r.GovernmentUSDodCentral="usdodcentral"})(hbe||(hbe={}));function sbe(r){var e,t;let n=r;return n===void 0&&((t=(e=globalThis.process)===null||e===void 0?void 0:e.env)===null||t===void 0?void 0:t.AZURE_REGIONAL_AUTHORITY_NAME)!==void 0&&(n=process.env.AZURE_REGIONAL_AUTHORITY_NAME),n===hbe.AutoDiscoverRegion?"AUTO_DISCOVER":n}var $cr={open:lcr},Ou=Ho("MsalClient");function Vcr(r,e,t={}){var n,i,s,o;let a=Ibe((n=t.logger)!==null&&n!==void 0?n:Ou,e,r),c=xbe(a,(i=t.authorityHost)!==null&&i!==void 0?i:process.env.AZURE_AUTHORITY_HOST),l=new sw(Object.assign(Object.assign({},t.tokenCredentialOptions),{authorityHost:c,loggingOptions:t.loggingOptions}));return{auth:{clientId:r,authority:c,knownAuthorities:Lcr(a,c,t.disableInstanceDiscovery)},system:{networkClient:l,loggerOptions:{loggerCallback:kXe((s=t.logger)!==null&&s!==void 0?s:Ou),logLevel:LXe(wbe.getLogLevel()),piiLoggingEnabled:(o=t.loggingOptions)===null||o===void 0?void 0:o.enableUnsafeSupportLogging}}}}function v_(r,e,t={}){var n;let i={msalConfig:Vcr(r,e,t),cachedAccount:t.authenticationRecord?qcr(t.authenticationRecord):null,pluginConfiguration:Scr.generatePluginConfiguration(t),logger:(n=t.logger)!==null&&n!==void 0?n:Ou},s=new Map;async function o(R={}){let I=R.enableCae?"CAE":"default",z=s.get(I);if(z)return i.logger.getToken.info("Existing PublicClientApplication found in cache, returning it."),z;i.logger.getToken.info(`Creating new PublicClientApplication with CAE ${R.enableCae?"enabled":"disabled"}.`);let G=R.enableCae?i.pluginConfiguration.cache.cachePluginCae:i.pluginConfiguration.cache.cachePlugin;return i.msalConfig.auth.clientCapabilities=R.enableCae?["cp1"]:void 0,z=new Ym.PublicClientApplication(Object.assign(Object.assign({},i.msalConfig),{broker:{nativeBrokerPlugin:i.pluginConfiguration.broker.nativeBrokerPlugin},cache:{cachePlugin:await G}})),s.set(I,z),z}let a=new Map;async function c(R={}){let I=R.enableCae?"CAE":"default",z=a.get(I);if(z)return i.logger.getToken.info("Existing ConfidentialClientApplication found in cache, returning it."),z;i.logger.getToken.info(`Creating new ConfidentialClientApplication with CAE ${R.enableCae?"enabled":"disabled"}.`);let G=R.enableCae?i.pluginConfiguration.cache.cachePluginCae:i.pluginConfiguration.cache.cachePlugin;return i.msalConfig.auth.clientCapabilities=R.enableCae?["cp1"]:void 0,z=new Ym.ConfidentialClientApplication(Object.assign(Object.assign({},i.msalConfig),{broker:{nativeBrokerPlugin:i.pluginConfiguration.broker.nativeBrokerPlugin},cache:{cachePlugin:await G}})),a.set(I,z),z}async function l(R,I,z={}){if(i.cachedAccount===null){i.logger.getToken.info("No cached account found in local state, attempting to load it from MSAL cache.");let H=await R.getTokenCache().getAllAccounts();if(H===void 0||H.length===0)throw new Cy({scopes:I});if(H.length>1)throw i.logger.info(`More than one account was found authenticated for this Client ID and Tenant ID.
However, no "authenticationRecord" has been provided for this credential,
therefore we're unable to pick between these accounts.
A new login attempt will be requested, to ensure the correct account is picked.
To work with multiple accounts for the same Client ID and Tenant ID, please provide an "authenticationRecord" when initializing a credential to prevent this from happening.`),new Cy({scopes:I});i.cachedAccount=H[0]}z.claims&&(i.cachedClaims=z.claims);let G={account:i.cachedAccount,scopes:I,claims:i.cachedClaims};return i.pluginConfiguration.broker.isEnabled&&(G.tokenQueryParameters||(G.tokenQueryParameters={}),i.pluginConfiguration.broker.enableMsaPassthrough&&(G.tokenQueryParameters.msal_request_type="consumer_passthrough")),i.logger.getToken.info("Attempting to acquire token silently"),R.acquireTokenSilent(G)}function u(R){return R?.tenantId?xbe(R.tenantId,t.authorityHost):i.msalConfig.auth.authority}async function d(R,I,z,G){var L;let H=null;try{H=await l(R,I,z)}catch(ee){if(ee.name!=="AuthenticationRequiredError")throw ee;if(z.disableAutomaticAuthentication)throw new Cy({scopes:I,getTokenOptions:z,message:"Automatic authentication has been disabled. You may call the authentication() method."})}if(H===null)try{H=await G()}catch(ee){throw v1(I,ee,z)}return y1(I,H,z),i.cachedAccount=(L=H?.account)!==null&&L!==void 0?L:null,i.logger.getToken.info(xp(I)),{token:H.accessToken,expiresOnTimestamp:H.expiresOn.getTime()}}async function p(R,I,z={}){i.logger.getToken.info("Attempting to acquire token using client secret"),i.msalConfig.auth.clientSecret=I;let G=await c(z);try{let L=await G.acquireTokenByClientCredential({scopes:R,authority:u(z),azureRegion:sbe(),claims:z?.claims});return y1(R,L,z),i.logger.getToken.info(xp(R)),{token:L.accessToken,expiresOnTimestamp:L.expiresOn.getTime()}}catch(L){throw v1(R,L,z)}}async function m(R,I,z={}){i.logger.getToken.info("Attempting to acquire token using client assertion"),i.msalConfig.auth.clientAssertion=I;let G=await c(z);try{let L=await G.acquireTokenByClientCredential({scopes:R,authority:u(z),azureRegion:sbe(),claims:z?.claims,clientAssertion:I});return y1(R,L,z),i.logger.getToken.info(xp(R)),{token:L.accessToken,expiresOnTimestamp:L.expiresOn.getTime()}}catch(L){throw v1(R,L,z)}}async function f(R,I,z={}){i.logger.getToken.info("Attempting to acquire token using client certificate"),i.msalConfig.auth.clientCertificate=I;let G=await c(z);try{let L=await G.acquireTokenByClientCredential({scopes:R,authority:u(z),azureRegion:sbe(),claims:z?.claims});return y1(R,L,z),i.logger.getToken.info(xp(R)),{token:L.accessToken,expiresOnTimestamp:L.expiresOn.getTime()}}catch(L){throw v1(R,L,z)}}async function y(R,I,z={}){i.logger.getToken.info("Attempting to acquire token using device code");let G=await o(z);return d(G,R,z,()=>{var L,H;let ee={scopes:R,cancel:(H=(L=z?.abortSignal)===null||L===void 0?void 0:L.aborted)!==null&&H!==void 0?H:!1,deviceCodeCallback:I,authority:u(z),claims:z?.claims},ye=G.acquireTokenByDeviceCode(ee);return z.abortSignal&&z.abortSignal.addEventListener("abort",()=>{ee.cancel=!0}),ye})}async function v(R,I,z,G={}){i.logger.getToken.info("Attempting to acquire token using username and password");let L=await o(G);return d(L,R,G,()=>{let H={scopes:R,username:I,password:z,authority:u(G),claims:G?.claims};return L.acquireTokenByUsernamePassword(H)})}function _(){if(i.cachedAccount)return zcr(r,i.cachedAccount)}async function C(R,I,z,G,L={}){i.logger.getToken.info("Attempting to acquire token using authorization code");let H;return G?(i.msalConfig.auth.clientSecret=G,H=await c(L)):H=await o(L),d(H,R,L,()=>H.acquireTokenByCode({scopes:R,redirectUri:I,code:z,authority:u(L),claims:L?.claims}))}async function P(R,I,z,G={}){Ou.getToken.info("Attempting to acquire token on behalf of another user"),typeof z=="string"?(Ou.getToken.info("Using client secret for on behalf of flow"),i.msalConfig.auth.clientSecret=z):typeof z=="function"?(Ou.getToken.info("Using client assertion callback for on behalf of flow"),i.msalConfig.auth.clientAssertion=z):(Ou.getToken.info("Using client certificate for on behalf of flow"),i.msalConfig.auth.clientCertificate=z);let L=await c(G);try{let H=await L.acquireTokenOnBehalfOf({scopes:R,authority:u(G),claims:G.claims,oboAssertion:I});return y1(R,H,G),Ou.getToken.info(xp(R)),{token:H.accessToken,expiresOnTimestamp:H.expiresOn.getTime()}}catch(H){throw v1(R,H,G)}}async function w(R,I={}){Ou.getToken.info("Attempting to acquire token interactively");let z=await o(I);async function G(H){var ee;Ou.verbose("Authentication will resume through the broker");let ye=L();i.pluginConfiguration.broker.parentWindowHandle?ye.windowHandle=Buffer.from(i.pluginConfiguration.broker.parentWindowHandle):Ou.warning("Parent window handle is not specified for the broker. This may cause unexpected behavior. Please provide the parentWindowHandle."),i.pluginConfiguration.broker.enableMsaPassthrough&&(((ee=ye.tokenQueryParameters)!==null&&ee!==void 0?ee:ye.tokenQueryParameters={}).msal_request_type="consumer_passthrough"),H?(ye.prompt="none",Ou.verbose("Attempting broker authentication using the default broker account")):Ou.verbose("Attempting broker authentication without the default broker account");try{return await z.acquireTokenInteractive(ye)}catch($e){if(Ou.verbose(`Failed to authenticate through the broker: ${$e.message}`),H)return G(!1);throw $e}}function L(){var H,ee;return{openBrowser:async ye=>{await $cr.open(ye,{wait:!0,newInstance:!0})},scopes:R,authority:u(I),claims:I?.claims,loginHint:I?.loginHint,errorTemplate:(H=I?.browserCustomizationOptions)===null||H===void 0?void 0:H.errorMessage,successTemplate:(ee=I?.browserCustomizationOptions)===null||ee===void 0?void 0:ee.successMessage}}return d(z,R,I,async()=>{var H;let ee=L();return i.pluginConfiguration.broker.isEnabled?G((H=i.pluginConfiguration.broker.useDefaultBrokerAccount)!==null&&H!==void 0?H:!1):z.acquireTokenInteractive(ee)})}return{getActiveAccount:_,getTokenByClientSecret:p,getTokenByClientAssertion:m,getTokenByClientCertificate:f,getTokenByDeviceCode:y,getTokenByUsernamePassword:v,getTokenByAuthorizationCode:C,getTokenOnBehalfOf:P,getTokenByInteractiveRequest:w}}var vXe=Ho("ClientAssertionCredential"),P1=class{constructor(e,t,n,i={}){if(!e||!t||!n)throw new Error("ClientAssertionCredential: tenantId, clientId, and clientAssertion are required parameters.");this.tenantId=e,this.additionallyAllowedTenantIds=Np(i?.additionallyAllowedTenants),this.options=i,this.getAssertion=n,this.msalClient=v_(t,e,Object.assign(Object.assign({},i),{logger:vXe,tokenCredentialOptions:this.options}))}async getToken(e,t={}){return pc.withSpan(`${this.constructor.name}.getToken`,t,async n=>{n.tenantId=Ap(this.tenantId,n,this.additionallyAllowedTenantIds,vXe);let i=Array.isArray(e)?e:[e];return this.msalClient.getTokenByClientAssertion(i,this.getAssertion,n)})}},iQ="WorkloadIdentityCredential",Hcr=["AZURE_TENANT_ID","AZURE_CLIENT_ID","AZURE_FEDERATED_TOKEN_FILE"],b1=Ho(iQ),iw=class{constructor(e){this.azureFederatedTokenFileContent=void 0,this.cacheDate=void 0;let t=OXe(Hcr).assigned.join(", ");b1.info(`Found the following environment variables: ${t}`);let n=e??{},i=n.tenantId||process.env.AZURE_TENANT_ID,s=n.clientId||process.env.AZURE_CLIENT_ID;this.federatedTokenFilePath=n.tokenFilePath||process.env.AZURE_FEDERATED_TOKEN_FILE,i&&Op(b1,i),s&&i&&this.federatedTokenFilePath&&(b1.info(`Invoking ClientAssertionCredential with tenant ID: ${i}, clientId: ${n.clientId} and federated token path: [REDACTED]`),this.client=new P1(i,s,this.readFileContents.bind(this),e))}async getToken(e,t){if(!this.client){let n=`${iQ}: is unavailable. tenantId, clientId, and federatedTokenFilePath are required parameters. 
      In DefaultAzureCredential and ManagedIdentityCredential, these can be provided as environment variables - 
      "AZURE_TENANT_ID",
      "AZURE_CLIENT_ID",
      "AZURE_FEDERATED_TOKEN_FILE". See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot  `;throw b1.info(n),new Oi(n)}return b1.info("Invoking getToken() of Client Assertion Credential"),this.client.getToken(e,t)}async readFileContents(){if(this.cacheDate!==void 0&&Date.now()-this.cacheDate>=1e3*60*5&&(this.azureFederatedTokenFileContent=void 0),!this.federatedTokenFilePath)throw new Oi(`${iQ}: is unavailable. Invalid file path provided ${this.federatedTokenFilePath}.`);if(!this.azureFederatedTokenFileContent){let t=(await TXe.readFile(this.federatedTokenFilePath,"utf8")).trim();if(t)this.azureFederatedTokenFileContent=t,this.cacheDate=Date.now();else throw new Oi(`${iQ}: is unavailable. No content on the file ${this.federatedTokenFilePath}.`)}return this.azureFederatedTokenFileContent}},qXe="ManagedIdentityCredential - Token Exchange",Wcr=Ho(qXe),bXe={name:"tokenExchangeMsi",async isAvailable({clientId:r}){let e=process.env,t=!!((r||e.AZURE_CLIENT_ID)&&e.AZURE_TENANT_ID&&process.env.AZURE_FEDERATED_TOKEN_FILE);return t||Wcr.info(`${qXe}: Unavailable. The environment variables needed are: AZURE_CLIENT_ID (or the client ID sent through the parameters), AZURE_TENANT_ID and AZURE_FEDERATED_TOKEN_FILE`),t},async getToken(r,e={}){let{scopes:t,clientId:n}=r,i={};return new iw(Object.assign(Object.assign({clientId:n,tenantId:process.env.AZURE_TENANT_ID,tokenFilePath:process.env.AZURE_FEDERATED_TOKEN_FILE},i),{disableInstanceDiscovery:!0})).getToken(t,e)}},f_=Ho("ManagedIdentityCredential(MSAL)"),fbe=class{constructor(e,t={}){var n,i;this.msiRetryConfig={maxRetries:5,startDelayInMs:800,intervalIncrement:2};let s={};if(typeof e=="string"?(this.clientId=e,s=t):(this.clientId=e?.clientId,s=e??{}),this.resourceId=s?.resourceId,this.clientId&&this.resourceId)throw new Error("ManagedIdentityCredential - Client Id and Resource Id can't be provided at the same time.");s.allowInsecureConnection=!0,((n=s?.retryOptions)===null||n===void 0?void 0:n.maxRetries)!==void 0&&(this.msiRetryConfig.maxRetries=s.retryOptions.maxRetries),this.identityClient=new sw(Object.assign(Object.assign({},s),{additionalPolicies:[{policy:Gcr(this.msiRetryConfig),position:"perCall"}]})),this.managedIdentityApp=new EXe.ManagedIdentityApplication({managedIdentityIdParams:{userAssignedClientId:this.clientId,userAssignedResourceId:this.resourceId},system:{disableInternalRetries:!0,networkClient:this.identityClient,loggerOptions:{logLevel:LXe(wbe.getLogLevel()),piiLoggingEnabled:(i=t.loggingOptions)===null||i===void 0?void 0:i.enableUnsafeSupportLogging,loggerCallback:kXe(f_)}}}),this.isAvailableIdentityClient=new sw(Object.assign(Object.assign({},s),{retryOptions:{maxRetries:0}}))}async getToken(e,t={}){f_.getToken.info("Using the MSAL provider for Managed Identity.");let n=Rbe(e);if(!n)throw new Oi(`ManagedIdentityCredential: Multiple scopes are not supported. Scopes: ${JSON.stringify(e)}`);return pc.withSpan("ManagedIdentityCredential.getToken",t,async()=>{try{let i=await bXe.isAvailable({scopes:e,clientId:this.clientId,getTokenOptions:t,identityClient:this.identityClient,resourceId:this.resourceId}),s=this.managedIdentityApp.getManagedIdentitySource(),o=s==="DefaultToImds"||s==="Imds";if(i){f_.getToken.info("Using the token exchange managed identity.");let c=await bXe.getToken({scopes:e,clientId:this.clientId,identityClient:this.identityClient,retryConfig:this.msiRetryConfig,resourceId:this.resourceId});if(c===null)throw new Oi("The managed identity endpoint was reached, yet no tokens were received.");return c}else if(o&&(f_.getToken.info("Using the IMDS endpoint to probe for availability."),!await Ucr.isAvailable({scopes:e,clientId:this.clientId,getTokenOptions:t,identityClient:this.isAvailableIdentityClient,resourceId:this.resourceId})))throw new Oi("ManagedIdentityCredential: The managed identity endpoint is not available.");f_.getToken.info("Calling into MSAL for managed identity token.");let a=await this.managedIdentityApp.acquireToken({resource:n});return this.ensureValidMsalToken(e,a,t),f_.getToken.info(xp(e)),{expiresOnTimestamp:a.expiresOn.getTime(),token:a.accessToken}}catch(i){throw f_.getToken.error(Oo(e,i)),i.name==="AuthenticationRequiredError"?i:Kcr(i)?new Oi(`ManagedIdentityCredential: Network unreachable. Message: ${i.message}`):new Oi(`ManagedIdentityCredential: Authentication failed. Message ${i.message}`)}})}ensureValidMsalToken(e,t,n){let i=s=>(f_.getToken.info(s),new Cy({scopes:Array.isArray(e)?e:[e],getTokenOptions:n,message:s}));if(!t)throw i("No response");if(!t.expiresOn)throw i('Response had no "expiresOn" property.');if(!t.accessToken)throw i('Response had no "accessToken" property.')}};function Kcr(r){return!!(r.errorCode==="network_error"||r.code==="ENETUNREACH"||r.code==="EHOSTUNREACH"||(r.statusCode===403||r.code===403)&&r.message.includes("unreachable"))}var nw=class{constructor(e,t){this.implProvider=new fbe(e,t)}async getToken(e,t){return this.implProvider.getToken(e,t)}};function ow(r){return Array.isArray(r)?r:[r]}function Obe(r,e){if(!r.match(/^[0-9a-zA-Z-_.:/]+$/)){let t=new Error("Invalid scope was specified by the user or calling client");throw e.getToken.info(Oo(r,t)),t}}function zXe(r){return r.replace(/\/.default$/,"")}var FXe={getSafeWorkingDir(){if(process.platform==="win32"){if(!process.env.SystemRoot)throw new Error("Azure CLI credential expects a 'SystemRoot' environment variable");return process.env.SystemRoot}else return"/bin"},async getAzureCliAccessToken(r,e,t){let n=[];return e&&(n=["--tenant",e]),new Promise((i,s)=>{try{Ebe.execFile("az",["account","get-access-token","--output","json","--resource",r,...n],{cwd:FXe.getSafeWorkingDir(),shell:!0,timeout:t},(o,a,c)=>{i({stdout:a,stderr:c,error:o})})}catch(o){s(o)}})}},by=Ho("AzureCliCredential"),cQ=class{constructor(e){e?.tenantId&&(Op(by,e?.tenantId),this.tenantId=e?.tenantId),this.additionallyAllowedTenantIds=Np(e?.additionallyAllowedTenants),this.timeout=e?.processTimeoutInMs}async getToken(e,t={}){let n=Ap(this.tenantId,t,this.additionallyAllowedTenantIds);n&&Op(by,n);let i=typeof e=="string"?e:e[0];return by.getToken.info(`Using the scope ${i}`),pc.withSpan(`${this.constructor.name}.getToken`,t,async()=>{var s,o,a,c;try{Obe(i,by);let l=zXe(i),u=await FXe.getAzureCliAccessToken(l,n,this.timeout),d=(s=u.stderr)===null||s===void 0?void 0:s.match("(.*)az login --scope(.*)"),p=((o=u.stderr)===null||o===void 0?void 0:o.match("(.*)az login(.*)"))&&!d;if(((a=u.stderr)===null||a===void 0?void 0:a.match("az:(.*)not found"))||((c=u.stderr)===null||c===void 0?void 0:c.startsWith("'az' is not recognized"))){let f=new Oi("Azure CLI could not be found. Please visit https://aka.ms/azure-cli for installation instructions and then, once installed, authenticate to your Azure account using 'az login'.");throw by.getToken.info(Oo(e,f)),f}if(p){let f=new Oi("Please run 'az login' from a command prompt to authenticate before using this credential.");throw by.getToken.info(Oo(e,f)),f}try{let f=u.stdout,y=this.parseRawResponse(f);return by.getToken.info(xp(e)),y}catch(f){throw u.stderr?new Oi(u.stderr):f}}catch(l){let u=l.name==="CredentialUnavailableError"?l:new Oi(l.message||"Unknown error while trying to retrieve the access token");throw by.getToken.info(Oo(e,u)),u}})}parseRawResponse(e){let t=JSON.parse(e),n=t.accessToken,i=Number.parseInt(t.expires_on,10)*1e3;if(!isNaN(i))return by.getToken.info("expires_on is available and is valid, using it"),{token:n,expiresOnTimestamp:i};if(i=new Date(t.expiresOn).getTime(),isNaN(i))throw new Oi(`Unexpected response from Azure CLI when getting token. Expected "expiresOn" to be a RFC3339 date string. Got: "${t.expiresOn}"`);return{token:n,expiresOnTimestamp:i}}},jXe={getSafeWorkingDir(){if(process.platform==="win32"){if(!process.env.SystemRoot)throw new Error("Azure Developer CLI credential expects a 'SystemRoot' environment variable");return process.env.SystemRoot}else return"/bin"},async getAzdAccessToken(r,e,t){let n=[];return e&&(n=["--tenant-id",e]),new Promise((i,s)=>{try{Ebe.execFile("azd",["auth","token","--output","json",...r.reduce((o,a)=>o.concat("--scope",a),[]),...n],{cwd:jXe.getSafeWorkingDir(),timeout:t},(o,a,c)=>{i({stdout:a,stderr:c,error:o})})}catch(o){s(o)}})}},g_=Ho("AzureDeveloperCliCredential"),lQ=class{constructor(e){e?.tenantId&&(Op(g_,e?.tenantId),this.tenantId=e?.tenantId),this.additionallyAllowedTenantIds=Np(e?.additionallyAllowedTenants),this.timeout=e?.processTimeoutInMs}async getToken(e,t={}){let n=Ap(this.tenantId,t,this.additionallyAllowedTenantIds);n&&Op(g_,n);let i;return typeof e=="string"?i=[e]:i=e,g_.getToken.info(`Using the scopes ${e}`),pc.withSpan(`${this.constructor.name}.getToken`,t,async()=>{var s,o,a,c;try{i.forEach(p=>{Obe(p,g_)});let l=await jXe.getAzdAccessToken(i,n,this.timeout),u=((s=l.stderr)===null||s===void 0?void 0:s.match("not logged in, run `azd login` to login"))||((o=l.stderr)===null||o===void 0?void 0:o.match("not logged in, run `azd auth login` to login"));if(((a=l.stderr)===null||a===void 0?void 0:a.match("azd:(.*)not found"))||((c=l.stderr)===null||c===void 0?void 0:c.startsWith("'azd' is not recognized"))||l.error&&l.error.code==="ENOENT"){let p=new Oi("Azure Developer CLI couldn't be found. To mitigate this issue, see the troubleshooting guidelines at https://aka.ms/azsdk/js/identity/azdevclicredential/troubleshoot.");throw g_.getToken.info(Oo(e,p)),p}if(u){let p=new Oi("Please run 'azd auth login' from a command prompt to authenticate before using this credential. For more information, see the troubleshooting guidelines at https://aka.ms/azsdk/js/identity/azdevclicredential/troubleshoot.");throw g_.getToken.info(Oo(e,p)),p}try{let p=JSON.parse(l.stdout);return g_.getToken.info(xp(e)),{token:p.token,expiresOnTimestamp:new Date(p.expiresOn).getTime()}}catch(p){throw l.stderr?new Oi(l.stderr):p}}catch(l){let u=l.name==="CredentialUnavailableError"?l:new Oi(l.message||"Unknown error while trying to retrieve the access token");throw g_.getToken.info(Oo(e,u)),u}})}},Qcr={execFile(r,e,t){return new Promise((n,i)=>{pcr.execFile(r,e,t,(s,o,a)=>{Buffer.isBuffer(o)&&(o=o.toString("utf8")),Buffer.isBuffer(a)&&(a=a.toString("utf8")),a||s?i(a?new Error(a):s):n(o)})})}},_y=Ho("AzurePowerShellCredential"),UXe=process.platform==="win32";function BXe(r){return UXe?`${r}.exe`:r}async function _Xe(r,e){let t=[];for(let n of r){let[i,...s]=n,o=await Qcr.execFile(i,s,{encoding:"utf8",timeout:e});t.push(o)}return t}var GXe={login:"Run Connect-AzAccount to login",installed:"The specified module 'Az.Accounts' with version '2.2.0' was not loaded because no valid module file was found in any module directory"},obe={login:"Please run 'Connect-AzAccount' from PowerShell to authenticate before using this credential.",installed:`The 'Az.Account' module >= 2.2.0 is not installed. Install the Azure Az PowerShell module with: "Install-Module -Name Az -Scope CurrentUser -Repository PSGallery -Force".`,troubleshoot:"To troubleshoot, visit https://aka.ms/azsdk/js/identity/powershellcredential/troubleshoot."},Ycr=r=>r.message.match(`(.*)${GXe.login}(.*)`),Xcr=r=>r.message.match(GXe.installed),gbe=[BXe("pwsh")];UXe&&gbe.push(BXe("powershell"));var uQ=class{constructor(e){e?.tenantId&&(Op(_y,e?.tenantId),this.tenantId=e?.tenantId),this.additionallyAllowedTenantIds=Np(e?.additionallyAllowedTenants),this.timeout=e?.processTimeoutInMs}async getAzurePowerShellAccessToken(e,t,n){for(let i of[...gbe]){try{await _Xe([[i,"/?"]],n)}catch{gbe.shift();continue}let s="";t&&(s=`-TenantId "${t}"`);let a=(await _Xe([[i,"-NoProfile","-NonInteractive","-Command","Import-Module Az.Accounts -MinimumVersion 2.2.0 -PassThru"],[i,"-NoProfile","-NonInteractive","-Command",`Get-AzAccessToken ${s} -ResourceUrl "${e}" | ConvertTo-Json`]]))[1];return Jcr(a)}throw new Error("Unable to execute PowerShell. Ensure that it is installed in your system")}async getToken(e,t={}){return pc.withSpan(`${this.constructor.name}.getToken`,t,async()=>{let n=Ap(this.tenantId,t,this.additionallyAllowedTenantIds),i=typeof e=="string"?e:e[0];n&&Op(_y,n);try{Obe(i,_y),_y.getToken.info(`Using the scope ${i}`);let s=zXe(i),o=await this.getAzurePowerShellAccessToken(s,n,this.timeout);return _y.getToken.info(xp(e)),{token:o.Token,expiresOnTimestamp:new Date(o.ExpiresOn).getTime()}}catch(s){if(Xcr(s)){let a=new Oi(obe.installed);throw _y.getToken.info(Oo(i,a)),a}else if(Ycr(s)){let a=new Oi(obe.login);throw _y.getToken.info(Oo(i,a)),a}let o=new Oi(`${s}. ${obe.troubleshoot}`);throw _y.getToken.info(Oo(i,o)),o}})}};async function Jcr(r){let e=/{[^{}]*}/g,t=r.match(e),n=r;if(t)try{for(let i of t)try{let s=JSON.parse(i);if(s?.Token)return n=n.replace(i,""),n&&_y.getToken.warning(n),s}catch{continue}}catch{throw new Error(`Unable to parse the output of PowerShell. Received output: ${r}`)}throw new Error(`No access token found in the output. Received output: ${r}`)}var abe=Ho("ChainedTokenCredential"),dQ=class{constructor(...e){this._sources=[],this._sources=e}async getToken(e,t={}){let{token:n}=await this.getTokenInternal(e,t);return n}async getTokenInternal(e,t={}){let n=null,i,s=[];return pc.withSpan("ChainedTokenCredential.getToken",t,async o=>{for(let a=0;a<this._sources.length&&n===null;a++)try{n=await this._sources[a].getToken(e,o),i=this._sources[a]}catch(c){if(c.name==="CredentialUnavailableError"||c.name==="AuthenticationRequiredError")s.push(c);else throw abe.getToken.info(Oo(e,c)),c}if(!n&&s.length>0){let a=new aQ(s,"ChainedTokenCredential authentication failed.");throw abe.getToken.info(Oo(e,a)),a}if(abe.getToken.info(`Result for ${i.constructor.name}: ${xp(e)}`),n===null)throw new Oi("Failed to retrieve a valid token");return{token:n,successfulCredential:i}})}},S1="ClientCertificateCredential",SXe=Ho(S1),pQ=class{constructor(e,t,n,i={}){if(!e||!t)throw new Error(`${S1}: tenantId and clientId are required parameters.`);this.tenantId=e,this.additionallyAllowedTenantIds=Np(i?.additionallyAllowedTenants),this.sendCertificateChain=i.sendCertificateChain,this.certificateConfiguration=Object.assign({},typeof n=="string"?{certificatePath:n}:n);let s=this.certificateConfiguration.certificate,o=this.certificateConfiguration.certificatePath;if(!this.certificateConfiguration||!(s||o))throw new Error(`${S1}: Provide either a PEM certificate in string form, or the path to that certificate in the filesystem. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);if(s&&o)throw new Error(`${S1}: To avoid unexpected behaviors, providing both the contents of a PEM certificate and the path to a PEM certificate is forbidden. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);this.msalClient=v_(t,e,Object.assign(Object.assign({},i),{logger:SXe,tokenCredentialOptions:i}))}async getToken(e,t={}){return pc.withSpan(`${S1}.getToken`,t,async n=>{n.tenantId=Ap(this.tenantId,n,this.additionallyAllowedTenantIds,SXe);let i=Array.isArray(e)?e:[e],s=await this.buildClientCertificate();return this.msalClient.getTokenByClientCertificate(i,s,n)})}async buildClientCertificate(){let e=await this.parseCertificate(),t;return this.certificateConfiguration.certificatePassword!==void 0?t=dXe.createPrivateKey({key:e.certificateContents,passphrase:this.certificateConfiguration.certificatePassword,format:"pem"}).export({format:"pem",type:"pkcs8"}).toString():t=e.certificateContents,{thumbprint:e.thumbprint,privateKey:t,x5c:e.x5c}}async parseCertificate(){let e=this.certificateConfiguration.certificate,t=this.certificateConfiguration.certificatePath,n=e||await TXe.readFile(t,"utf8"),i=this.sendCertificateChain?n:void 0,s=/(-+BEGIN CERTIFICATE-+)(\n\r?|\r\n?)([A-Za-z0-9+/\n\r]+=*)(\n\r?|\r\n?)(-+END CERTIFICATE-+)/g,o=[],a;do a=s.exec(n),a&&o.push(a[3]);while(a);if(o.length===0)throw new Error("The file at the specified path does not contain a PEM-encoded certificate.");let c=dXe.createHash("sha1").update(Buffer.from(o[0],"base64")).digest("hex").toUpperCase();return{certificateContents:n,thumbprint:c,x5c:i}}},CXe=Ho("ClientSecretCredential"),mQ=class{constructor(e,t,n,i={}){if(!e||!t||!n)throw new Error("ClientSecretCredential: tenantId, clientId, and clientSecret are required parameters. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");this.clientSecret=n,this.tenantId=e,this.additionallyAllowedTenantIds=Np(i?.additionallyAllowedTenants),this.msalClient=v_(t,e,Object.assign(Object.assign({},i),{logger:CXe,tokenCredentialOptions:i}))}async getToken(e,t={}){return pc.withSpan(`${this.constructor.name}.getToken`,t,async n=>{n.tenantId=Ap(this.tenantId,n,this.additionallyAllowedTenantIds,CXe);let i=ow(e);return this.msalClient.getTokenByClientSecret(i,this.clientSecret,n)})}},Zcr=Ho("UsernamePasswordCredential"),hQ=class{constructor(e,t,n,i,s={}){if(!e||!t||!n||!i)throw new Error("UsernamePasswordCredential: tenantId, clientId, username and password are required parameters. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");this.tenantId=e,this.additionallyAllowedTenantIds=Np(s?.additionallyAllowedTenants),this.username=n,this.password=i,this.msalClient=v_(t,this.tenantId,Object.assign(Object.assign({},s),{tokenCredentialOptions:s??{}}))}async getToken(e,t={}){return pc.withSpan(`${this.constructor.name}.getToken`,t,async n=>{n.tenantId=Ap(this.tenantId,n,this.additionallyAllowedTenantIds,Zcr);let i=ow(e);return this.msalClient.getTokenByUsernamePassword(i,this.username,this.password,n)})}},elr=["AZURE_TENANT_ID","AZURE_CLIENT_ID","AZURE_CLIENT_SECRET","AZURE_CLIENT_CERTIFICATE_PATH","AZURE_CLIENT_CERTIFICATE_PASSWORD","AZURE_USERNAME","AZURE_PASSWORD","AZURE_ADDITIONALLY_ALLOWED_TENANTS"];function tlr(){var r;return((r=process.env.AZURE_ADDITIONALLY_ALLOWED_TENANTS)!==null&&r!==void 0?r:"").split(";")}var sQ="EnvironmentCredential",tw=Ho(sQ),fQ=class{constructor(e){this._credential=void 0;let t=OXe(elr).assigned.join(", ");tw.info(`Found the following environment variables: ${t}`);let n=process.env.AZURE_TENANT_ID,i=process.env.AZURE_CLIENT_ID,s=process.env.AZURE_CLIENT_SECRET,o=tlr(),a=Object.assign(Object.assign({},e),{additionallyAllowedTenantIds:o});if(n&&Op(tw,n),n&&i&&s){tw.info(`Invoking ClientSecretCredential with tenant ID: ${n}, clientId: ${i} and clientSecret: [REDACTED]`),this._credential=new mQ(n,i,s,a);return}let c=process.env.AZURE_CLIENT_CERTIFICATE_PATH,l=process.env.AZURE_CLIENT_CERTIFICATE_PASSWORD;if(n&&i&&c){tw.info(`Invoking ClientCertificateCredential with tenant ID: ${n}, clientId: ${i} and certificatePath: ${c}`),this._credential=new pQ(n,i,{certificatePath:c,certificatePassword:l},a);return}let u=process.env.AZURE_USERNAME,d=process.env.AZURE_PASSWORD;n&&i&&u&&d&&(tw.info(`Invoking UsernamePasswordCredential with tenant ID: ${n}, clientId: ${i} and username: ${u}`),this._credential=new hQ(n,i,u,d,a))}async getToken(e,t={}){return pc.withSpan(`${sQ}.getToken`,t,async n=>{if(this._credential)try{let i=await this._credential.getToken(e,n);return tw.getToken.info(xp(e)),i}catch(i){let s=new Sy(400,{error:`${sQ} authentication failed. To troubleshoot, visit https://aka.ms/azsdk/js/identity/environmentcredential/troubleshoot.`,error_description:i.message.toString().split("More details:").join("")});throw tw.getToken.info(Oo(e,s)),s}throw new Oi(`${sQ} is unavailable. No underlying credential could be used. To troubleshoot, visit https://aka.ms/azsdk/js/identity/environmentcredential/troubleshoot.`)})}},$Xe=Ho("DefaultAzureCredential");function rlr(r={}){var e,t,n,i;(e=r.retryOptions)!==null&&e!==void 0||(r.retryOptions={maxRetries:5,retryDelayInMs:800});let s=(t=r?.managedIdentityClientId)!==null&&t!==void 0?t:process.env.AZURE_CLIENT_ID,o=(n=r?.workloadIdentityClientId)!==null&&n!==void 0?n:s,a=r?.managedIdentityResourceId,c=process.env.AZURE_FEDERATED_TOKEN_FILE,l=(i=r?.tenantId)!==null&&i!==void 0?i:process.env.AZURE_TENANT_ID;if(a){let u=Object.assign(Object.assign({},r),{resourceId:a});return new nw(u)}if(c&&o){let u=Object.assign(Object.assign({},r),{tenantId:l});return new nw(o,u)}if(s){let u=Object.assign(Object.assign({},r),{clientId:s});return new nw(u)}return new nw(r)}function nlr(r){var e,t,n;let i=(e=r?.managedIdentityClientId)!==null&&e!==void 0?e:process.env.AZURE_CLIENT_ID,s=(t=r?.workloadIdentityClientId)!==null&&t!==void 0?t:i,o=process.env.AZURE_FEDERATED_TOKEN_FILE,a=(n=r?.tenantId)!==null&&n!==void 0?n:process.env.AZURE_TENANT_ID;if(o&&s){let c=Object.assign(Object.assign({},r),{tenantId:a,clientId:s,tokenFilePath:o});return new iw(c)}if(a){let c=Object.assign(Object.assign({},r),{tenantId:a});return new iw(c)}return new iw(r)}function ilr(r={}){let e=r.processTimeoutInMs;return new lQ(Object.assign({processTimeoutInMs:e},r))}function slr(r={}){let e=r.processTimeoutInMs;return new cQ(Object.assign({processTimeoutInMs:e},r))}function olr(r={}){let e=r.processTimeoutInMs;return new uQ(Object.assign({processTimeoutInMs:e},r))}function alr(r={}){return new fQ(r)}var ybe=class{constructor(e,t){this.credentialName=e,this.credentialUnavailableErrorMessage=t}getToken(){return $Xe.getToken.info(`Skipping ${this.credentialName}, reason: ${this.credentialUnavailableErrorMessage}`),Promise.resolve(null)}},gQ=class extends dQ{constructor(e){let n=[alr,nlr,rlr,slr,olr,ilr].map(i=>{try{return i(e)}catch(s){return $Xe.warning(`Skipped ${i.name} because of an error creating the credential: ${s}`),new ybe(i.name,s.message)}});super(...n)}},cbe=Ho("InteractiveBrowserCredential"),vbe=class{constructor(e){var t,n,i,s,o;this.tenantId=Ibe(cbe,e.tenantId,e.clientId),this.additionallyAllowedTenantIds=Np(e?.additionallyAllowedTenants);let a=Object.assign(Object.assign({},e),{tokenCredentialOptions:e,logger:cbe}),c=e;if(this.browserCustomizationOptions=c.browserCustomizationOptions,this.loginHint=c.loginHint,!((t=c?.brokerOptions)===null||t===void 0)&&t.enabled)if(!((n=c?.brokerOptions)===null||n===void 0)&&n.parentWindowHandle)a.brokerOptions={enabled:!0,parentWindowHandle:c.brokerOptions.parentWindowHandle,legacyEnableMsaPassthrough:(i=c.brokerOptions)===null||i===void 0?void 0:i.legacyEnableMsaPassthrough,useDefaultBrokerAccount:(s=c.brokerOptions)===null||s===void 0?void 0:s.useDefaultBrokerAccount};else throw new Error("In order to do WAM authentication, `parentWindowHandle` under `brokerOptions` is a required parameter");this.msalClient=v_((o=e.clientId)!==null&&o!==void 0?o:oQ,this.tenantId,a),this.disableAutomaticAuthentication=e?.disableAutomaticAuthentication}async getToken(e,t={}){return pc.withSpan(`${this.constructor.name}.getToken`,t,async n=>{n.tenantId=Ap(this.tenantId,n,this.additionallyAllowedTenantIds,cbe);let i=ow(e);return this.msalClient.getTokenByInteractiveRequest(i,Object.assign(Object.assign({},n),{disableAutomaticAuthentication:this.disableAutomaticAuthentication,browserCustomizationOptions:this.browserCustomizationOptions,loginHint:this.loginHint}))})}async authenticate(e,t={}){return pc.withSpan(`${this.constructor.name}.authenticate`,t,async n=>{let i=ow(e);return await this.msalClient.getTokenByInteractiveRequest(i,Object.assign(Object.assign({},n),{disableAutomaticAuthentication:!1,browserCustomizationOptions:this.browserCustomizationOptions,loginHint:this.loginHint})),this.msalClient.getActiveAccount()})}},lbe=Ho("DeviceCodeCredential");function clr(r){console.log(r.message)}var bbe=class{constructor(e){var t,n;this.tenantId=e?.tenantId,this.additionallyAllowedTenantIds=Np(e?.additionallyAllowedTenants);let i=(t=e?.clientId)!==null&&t!==void 0?t:oQ,s=Ibe(lbe,e?.tenantId,i);this.userPromptCallback=(n=e?.userPromptCallback)!==null&&n!==void 0?n:clr,this.msalClient=v_(i,s,Object.assign(Object.assign({},e),{logger:lbe,tokenCredentialOptions:e||{}})),this.disableAutomaticAuthentication=e?.disableAutomaticAuthentication}async getToken(e,t={}){return pc.withSpan(`${this.constructor.name}.getToken`,t,async n=>{n.tenantId=Ap(this.tenantId,n,this.additionallyAllowedTenantIds,lbe);let i=ow(e);return this.msalClient.getTokenByDeviceCode(i,this.userPromptCallback,Object.assign(Object.assign({},n),{disableAutomaticAuthentication:this.disableAutomaticAuthentication}))})}async authenticate(e,t={}){return pc.withSpan(`${this.constructor.name}.authenticate`,t,async n=>{let i=Array.isArray(e)?e:[e];return await this.msalClient.getTokenByDeviceCode(i,this.userPromptCallback,Object.assign(Object.assign({},n),{disableAutomaticAuthentication:!1})),this.msalClient.getActiveAccount()})}},y_="AzurePipelinesCredential",Rp=Ho(y_),llr="7.1",_be=class{constructor(e,t,n,i,s){if(!t||!e||!n||!i)throw new Oi(`${y_}: is unavailable. tenantId, clientId, serviceConnectionId, and systemAccessToken are required parameters.`);if(this.identityClient=new sw(s),Op(Rp,e),Rp.info(`Invoking AzurePipelinesCredential with tenant ID: ${e}, client ID: ${t}, and service connection ID: ${n}`),!process.env.SYSTEM_OIDCREQUESTURI)throw new Oi(`${y_}: is unavailable. Ensure that you're running this task in an Azure Pipeline, so that following missing system variable(s) can be defined- "SYSTEM_OIDCREQUESTURI"`);let o=`${process.env.SYSTEM_OIDCREQUESTURI}?api-version=${llr}&serviceConnectionId=${n}`;Rp.info(`Invoking ClientAssertionCredential with tenant ID: ${e}, client ID: ${t} and service connection ID: ${n}`),this.clientAssertionCredential=new P1(e,t,this.requestOidcToken.bind(this,o,i),s)}async getToken(e,t){if(!this.clientAssertionCredential){let n=`${y_}: is unavailable. To use Federation Identity in Azure Pipelines, the following parameters are required - 
      tenantId,
      clientId,
      serviceConnectionId,
      systemAccessToken,
      "SYSTEM_OIDCREQUESTURI".      
      See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/azurepipelinescredential/troubleshoot`;throw Rp.error(n),new Oi(n)}return Rp.info("Invoking getToken() of Client Assertion Credential"),this.clientAssertionCredential.getToken(e,t)}async requestOidcToken(e,t){Rp.info("Requesting OIDC token from Azure Pipelines..."),Rp.info(e);let n=Zl.createPipelineRequest({url:e,method:"POST",headers:Zl.createHttpHeaders({"Content-Type":"application/json",Authorization:`Bearer ${t}`})}),i=await this.identityClient.sendRequest(n);return ulr(i)}};function ulr(r){let e=r.bodyAsText;if(!e)throw Rp.error(`${y_}: Authentication Failed. Received null token from OIDC request. Response status- ${r.status}. Complete response - ${JSON.stringify(r)}`),new Sy(r.status,{error:`${y_}: Authentication Failed. Received null token from OIDC request.`,error_description:`${JSON.stringify(r)}. See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/azurepipelinescredential/troubleshoot`});try{let t=JSON.parse(e);if(t?.oidcToken)return t.oidcToken;{let n=`${y_}: Authentication Failed. oidcToken field not detected in the response.`,i="";throw r.status!==200&&(i=`Complete response - ${JSON.stringify(t)}. See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/azurepipelinescredential/troubleshoot`),Rp.error(n),Rp.error(i),new Sy(r.status,{error:n,error_description:i})}}catch(t){let n=`${y_}: Authentication Failed. oidcToken field not detected in the response.`;throw Rp.error(`Response from service = ${e} and error message = ${t.message}`),Rp.error(n),new Sy(r.status,{error:n,error_description:`Response = ${e}. See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/azurepipelinescredential/troubleshoot`})}}var PXe=Ho("AuthorizationCodeCredential"),Sbe=class{constructor(e,t,n,i,s,o){Op(PXe,e),this.clientSecret=n,typeof s=="string"?(this.authorizationCode=i,this.redirectUri=s):(this.authorizationCode=n,this.redirectUri=i,this.clientSecret=void 0,o=s),this.tenantId=e,this.additionallyAllowedTenantIds=Np(o?.additionallyAllowedTenants),this.msalClient=v_(t,e,Object.assign(Object.assign({},o),{logger:PXe,tokenCredentialOptions:o??{}}))}async getToken(e,t={}){return pc.withSpan(`${this.constructor.name}.getToken`,t,async n=>{let i=Ap(this.tenantId,n,this.additionallyAllowedTenantIds);n.tenantId=i;let s=ow(e);return this.msalClient.getTokenByAuthorizationCode(s,this.redirectUri,this.authorizationCode,this.clientSecret,Object.assign(Object.assign({},n),{disableAutomaticAuthentication:this.disableAutomaticAuthentication}))})}},Cbe="OnBehalfOfCredential",ube=Ho(Cbe),Pbe=class{constructor(e){let{clientSecret:t}=e,{certificatePath:n,sendCertificateChain:i}=e,{getAssertion:s}=e,{tenantId:o,clientId:a,userAssertionToken:c,additionallyAllowedTenants:l}=e;if(!o||!a||!(t||n||s)||!c)throw new Error(`${Cbe}: tenantId, clientId, clientSecret (or certificatePath or getAssertion) and userAssertionToken are required parameters.`);this.certificatePath=n,this.clientSecret=t,this.userAssertionToken=c,this.sendCertificateChain=i,this.clientAssertion=s,this.tenantId=o,this.additionallyAllowedTenantIds=Np(l),this.msalClient=v_(a,this.tenantId,Object.assign(Object.assign({},e),{logger:ube,tokenCredentialOptions:e}))}async getToken(e,t={}){return pc.withSpan(`${Cbe}.getToken`,t,async n=>{n.tenantId=Ap(this.tenantId,n,this.additionallyAllowedTenantIds,ube);let i=ow(e);if(this.certificatePath){let s=await this.buildClientCertificate(this.certificatePath);return this.msalClient.getTokenOnBehalfOf(i,this.userAssertionToken,s,n)}else{if(this.clientSecret)return this.msalClient.getTokenOnBehalfOf(i,this.userAssertionToken,this.clientSecret,t);if(this.clientAssertion)return this.msalClient.getTokenOnBehalfOf(i,this.userAssertionToken,this.clientAssertion,t);throw new Error("Expected either clientSecret or certificatePath or clientAssertion to be defined.")}})}async buildClientCertificate(e){try{let t=await this.parseCertificate({certificatePath:e},this.sendCertificateChain);return{thumbprint:t.thumbprint,privateKey:t.certificateContents,x5c:t.x5c}}catch(t){throw ube.info(Oo("",t)),t}}async parseCertificate(e,t){let n=e.certificatePath,i=await ucr.readFile(n,"utf8"),s=t?i:void 0,o=/(-+BEGIN CERTIFICATE-+)(\n\r?|\r\n?)([A-Za-z0-9+/\n\r]+=*)(\n\r?|\r\n?)(-+END CERTIFICATE-+)/g,a=[],c;do c=o.exec(i),c&&a.push(c[3]);while(c);if(a.length===0)throw new Error("The file at the specified path does not contain a PEM-encoded certificate.");let l=dcr.createHash("sha1").update(Buffer.from(a[0],"base64")).digest("hex").toUpperCase();return{certificateContents:i,thumbprint:l,x5c:s}}};function dlr(r,e,t){let{abortSignal:n,tracingOptions:i}=t||{},s=Zl.createEmptyPipeline();s.addPolicy(Zl.bearerTokenAuthenticationPolicy({credential:r,scopes:e}));async function o(){var a;let l=(a=(await s.sendRequest({sendRequest:u=>Promise.resolve({request:u,status:200,headers:u.headers})},Zl.createPipelineRequest({url:"https://example.com",abortSignal:n,tracingOptions:i}))).headers.get("authorization"))===null||a===void 0?void 0:a.split(" ")[1];if(!l)throw new Error("Failed to get access token");return l}return o}function plr(){return new gQ}Qn.AggregateAuthenticationError=aQ;Qn.AggregateAuthenticationErrorName=NXe;Qn.AuthenticationError=Sy;Qn.AuthenticationErrorName=Tbe;Qn.AuthenticationRequiredError=Cy;Qn.AuthorizationCodeCredential=Sbe;Qn.AzureCliCredential=cQ;Qn.AzureDeveloperCliCredential=lQ;Qn.AzurePipelinesCredential=_be;Qn.AzurePowerShellCredential=uQ;Qn.ChainedTokenCredential=dQ;Qn.ClientAssertionCredential=P1;Qn.ClientCertificateCredential=pQ;Qn.ClientSecretCredential=mQ;Qn.CredentialUnavailableError=Oi;Qn.CredentialUnavailableErrorName=AXe;Qn.DefaultAzureCredential=gQ;Qn.DeviceCodeCredential=bbe;Qn.EnvironmentCredential=fQ;Qn.InteractiveBrowserCredential=vbe;Qn.ManagedIdentityCredential=nw;Qn.OnBehalfOfCredential=Pbe;Qn.UsernamePasswordCredential=hQ;Qn.VisualStudioCodeCredential=mbe;Qn.WorkloadIdentityCredential=iw;Qn.deserializeAuthenticationRecord=jcr;Qn.getBearerTokenProvider=dlr;Qn.getDefaultAzureCredential=plr;Qn.logger=Ip;Qn.serializeAuthenticationRecord=Fcr;Qn.useIdentityPlugin=kcr});var w1={};Ea(w1,{__addDisposableResource:()=>pJe,__assign:()=>yQ,__asyncDelegator:()=>iJe,__asyncGenerator:()=>nJe,__asyncValues:()=>sJe,__await:()=>Nx,__awaiter:()=>XXe,__classPrivateFieldGet:()=>lJe,__classPrivateFieldIn:()=>dJe,__classPrivateFieldSet:()=>uJe,__createBinding:()=>bQ,__decorate:()=>KXe,__disposeResources:()=>mJe,__esDecorate:()=>mlr,__exportStar:()=>ZXe,__extends:()=>HXe,__generator:()=>JXe,__importDefault:()=>cJe,__importStar:()=>aJe,__makeTemplateObject:()=>oJe,__metadata:()=>YXe,__param:()=>QXe,__propKey:()=>flr,__read:()=>Nbe,__rest:()=>WXe,__runInitializers:()=>hlr,__setFunctionName:()=>glr,__spread:()=>eJe,__spreadArray:()=>rJe,__spreadArrays:()=>tJe,__values:()=>vQ,default:()=>blr});function HXe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Abe(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function WXe(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function KXe(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}function QXe(r,e){return function(t,n){e(t,n,r)}}function mlr(r,e,t,n,i,s){function o(_){if(_!==void 0&&typeof _!="function")throw new TypeError("Function expected");return _}for(var a=n.kind,c=a==="getter"?"get":a==="setter"?"set":"value",l=!e&&r?n.static?r:r.prototype:null,u=e||(l?Object.getOwnPropertyDescriptor(l,n.name):{}),d,p=!1,m=t.length-1;m>=0;m--){var f={};for(var y in n)f[y]=y==="access"?{}:n[y];for(var y in n.access)f.access[y]=n.access[y];f.addInitializer=function(_){if(p)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(_||null))};var v=(0,t[m])(a==="accessor"?{get:u.get,set:u.set}:u[c],f);if(a==="accessor"){if(v===void 0)continue;if(v===null||typeof v!="object")throw new TypeError("Object expected");(d=o(v.get))&&(u.get=d),(d=o(v.set))&&(u.set=d),(d=o(v.init))&&i.unshift(d)}else(d=o(v))&&(a==="field"?i.unshift(d):u[c]=d)}l&&Object.defineProperty(l,n.name,u),p=!0}function hlr(r,e,t){for(var n=arguments.length>2,i=0;i<e.length;i++)t=n?e[i].call(r,t):e[i].call(r);return n?t:void 0}function flr(r){return typeof r=="symbol"?r:"".concat(r)}function glr(r,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(r,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function YXe(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function XXe(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})}function JXe(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(t=0)),t;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){t.label=l[1];break}if(l[0]===6&&t.label<s[1]){t.label=s[1],s=l;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(l);break}s[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(u){l=[6,u],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function ZXe(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&bQ(e,r,t)}function vQ(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Nbe(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s}function eJe(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(Nbe(arguments[e]));return r}function tJe(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function rJe(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))}function Nx(r){return this instanceof Nx?(this.v=r,this):new Nx(r)}function nJe(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(m){return function(f){return Promise.resolve(f).then(m,d)}}function a(m,f){n[m]&&(i[m]=function(y){return new Promise(function(v,_){s.push([m,y,v,_])>1||c(m,y)})},f&&(i[m]=f(i[m])))}function c(m,f){try{l(n[m](f))}catch(y){p(s[0][3],y)}}function l(m){m.value instanceof Nx?Promise.resolve(m.value.v).then(u,d):p(s[0][2],m)}function u(m){c("next",m)}function d(m){c("throw",m)}function p(m,f){m(f),s.shift(),s.length&&c(s[0][0],s[0][1])}}function iJe(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=r[i]?function(o){return(t=!t)?{value:Nx(r[i](o)),done:!1}:s?s(o):o}:s}}function sJe(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof vQ=="function"?vQ(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=r[s]&&function(o){return new Promise(function(a,c){o=r[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function oJe(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function aJe(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&bQ(e,r,t);return ylr(e,r),e}function cJe(r){return r&&r.__esModule?r:{default:r}}function lJe(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)}function uJe(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t}function dJe(r,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof r=="function"?e===r:r.has(e)}function pJe(r,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],t&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),r.stack.push({value:e,dispose:n,async:t})}else t&&r.stack.push({async:!0});return e}function mJe(r){function e(n){r.error=r.hasError?new vlr(n,r.error,"An error was suppressed during disposal."):n,r.hasError=!0}function t(){for(;r.stack.length;){var n=r.stack.pop();try{var i=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(i).then(t,function(s){return e(s),t()})}catch(s){e(s)}}if(r.hasError)throw r.error}return t()}var Abe,yQ,bQ,ylr,vlr,blr,E1=si(()=>{Abe=function(r,e){return Abe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},Abe(r,e)};yQ=function(){return yQ=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},yQ.apply(this,arguments)};bQ=Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]};ylr=Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e};vlr=typeof SuppressedError=="function"?SuppressedError:function(r,e,t){var n=new Error(t);return n.name="SuppressedError",n.error=r,n.suppressed=e,n};blr={__extends:HXe,__assign:yQ,__rest:WXe,__decorate:KXe,__param:QXe,__metadata:YXe,__awaiter:XXe,__generator:JXe,__createBinding:bQ,__exportStar:ZXe,__values:vQ,__read:Nbe,__spread:eJe,__spreadArrays:tJe,__spreadArray:rJe,__await:Nx,__asyncGenerator:nJe,__asyncDelegator:iJe,__asyncValues:sJe,__makeTemplateObject:oJe,__importStar:aJe,__importDefault:cJe,__classPrivateFieldGet:lJe,__classPrivateFieldSet:uJe,__classPrivateFieldIn:dJe,__addDisposableResource:pJe,__disposeResources:mJe}});var Dbe=O(Mf=>{"use strict";Object.defineProperty(Mf,"__esModule",{value:!0});Mf.decodeStringToString=Mf.decodeString=Mf.encodeByteArray=Mf.encodeString=void 0;function _lr(r){return Buffer.from(r).toString("base64")}Mf.encodeString=_lr;function Slr(r){return(r instanceof Buffer?r:Buffer.from(r.buffer)).toString("base64")}Mf.encodeByteArray=Slr;function Clr(r){return Buffer.from(r,"base64")}Mf.decodeString=Clr;function Plr(r){return Buffer.from(r,"base64").toString()}Mf.decodeStringToString=Plr});var T1=O(Dx=>{"use strict";Object.defineProperty(Dx,"__esModule",{value:!0});Dx.XML_CHARKEY=Dx.XML_ATTRKEY=void 0;Dx.XML_ATTRKEY="$";Dx.XML_CHARKEY="_"});var Mbe=O(kf=>{"use strict";Object.defineProperty(kf,"__esModule",{value:!0});kf.flattenResponse=kf.isValidUuid=kf.isDuration=kf.isPrimitiveBody=void 0;function hJe(r,e){return e!=="Composite"&&e!=="Dictionary"&&(typeof r=="string"||typeof r=="number"||typeof r=="boolean"||e?.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i)!==null||r===void 0||r===null)}kf.isPrimitiveBody=hJe;var wlr=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Elr(r){return wlr.test(r)}kf.isDuration=Elr;var Tlr=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i;function Ilr(r){return Tlr.test(r)}kf.isValidUuid=Ilr;function Rlr(r){let e=Object.assign(Object.assign({},r.headers),r.body);return r.hasNullableType&&Object.getOwnPropertyNames(e).length===0?r.shouldWrapBody?{body:null}:null:r.shouldWrapBody?Object.assign(Object.assign({},r.headers),{body:r.body}):e}function xlr(r,e){var t,n;let i=r.parsedHeaders;if(r.request.method==="HEAD")return Object.assign(Object.assign({},i),{body:r.parsedBody});let s=e&&e.bodyMapper,o=!!s?.nullable,a=s?.type.name;if(a==="Stream")return Object.assign(Object.assign({},i),{blobBody:r.blobBody,readableStreamBody:r.readableStreamBody});let c=a==="Composite"&&s.type.modelProperties||{},l=Object.keys(c).some(u=>c[u].serializedName==="");if(a==="Sequence"||l){let u=(t=r.parsedBody)!==null&&t!==void 0?t:[];for(let d of Object.keys(c))c[d].serializedName&&(u[d]=(n=r.parsedBody)===null||n===void 0?void 0:n[d]);if(i)for(let d of Object.keys(i))u[d]=i[d];return o&&!r.parsedBody&&!i&&Object.getOwnPropertyNames(c).length===0?null:u}return Rlr({body:r.parsedBody,headers:i,hasNullableType:o,shouldWrapBody:hJe(r.parsedBody,a)})}kf.flattenResponse=xlr});var I1=O(Mx=>{"use strict";Object.defineProperty(Mx,"__esModule",{value:!0});Mx.MapperTypeNames=Mx.createSerializer=void 0;var Olr=(E1(),da(w1)),SQ=Olr.__importStar(Dbe()),mc=T1(),gJe=Mbe(),kbe=class{constructor(e={},t=!1){this.modelMappers=e,this.isXML=t}validateConstraints(e,t,n){let i=(s,o)=>{throw new Error(`"${n}" with value "${t}" should satisfy the constraint "${s}": ${o}.`)};if(e.constraints&&t!==void 0&&t!==null){let{ExclusiveMaximum:s,ExclusiveMinimum:o,InclusiveMaximum:a,InclusiveMinimum:c,MaxItems:l,MaxLength:u,MinItems:d,MinLength:p,MultipleOf:m,Pattern:f,UniqueItems:y}=e.constraints;if(s!==void 0&&t>=s&&i("ExclusiveMaximum",s),o!==void 0&&t<=o&&i("ExclusiveMinimum",o),a!==void 0&&t>a&&i("InclusiveMaximum",a),c!==void 0&&t<c&&i("InclusiveMinimum",c),l!==void 0&&t.length>l&&i("MaxItems",l),u!==void 0&&t.length>u&&i("MaxLength",u),d!==void 0&&t.length<d&&i("MinItems",d),p!==void 0&&t.length<p&&i("MinLength",p),m!==void 0&&t%m!==0&&i("MultipleOf",m),f){let v=typeof f=="string"?new RegExp(f):f;(typeof t!="string"||t.match(v)===null)&&i("Pattern",f)}y&&t.some((v,_,C)=>C.indexOf(v)!==_)&&i("UniqueItems",y)}}serialize(e,t,n,i={xml:{}}){var s,o,a;let c={xml:{rootName:(s=i.xml.rootName)!==null&&s!==void 0?s:"",includeRoot:(o=i.xml.includeRoot)!==null&&o!==void 0?o:!1,xmlCharKey:(a=i.xml.xmlCharKey)!==null&&a!==void 0?a:mc.XML_CHARKEY}},l={},u=e.type.name;n||(n=e.serializedName),u.match(/^Sequence$/i)!==null&&(l=[]),e.isConstant&&(t=e.defaultValue);let{required:d,nullable:p}=e;if(d&&p&&t===void 0)throw new Error(`${n} cannot be undefined.`);if(d&&!p&&t==null)throw new Error(`${n} cannot be null or undefined.`);if(!d&&p===!1&&t===null)throw new Error(`${n} cannot be null.`);return t==null||u.match(/^any$/i)!==null?l=t:u.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/i)!==null?l=qlr(u,n,t):u.match(/^Enum$/i)!==null?l=zlr(n,e.type.allowedValues,t):u.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/i)!==null?l=Ulr(u,t,n):u.match(/^ByteArray$/i)!==null?l=Flr(n,t):u.match(/^Base64Url$/i)!==null?l=jlr(n,t):u.match(/^Sequence$/i)!==null?l=Blr(this,e,t,n,!!this.isXML,c):u.match(/^Dictionary$/i)!==null?l=Glr(this,e,t,n,!!this.isXML,c):u.match(/^Composite$/i)!==null&&(l=Vlr(this,e,t,n,!!this.isXML,c)),l}deserialize(e,t,n,i={xml:{}}){var s,o,a,c;let l={xml:{rootName:(s=i.xml.rootName)!==null&&s!==void 0?s:"",includeRoot:(o=i.xml.includeRoot)!==null&&o!==void 0?o:!1,xmlCharKey:(a=i.xml.xmlCharKey)!==null&&a!==void 0?a:mc.XML_CHARKEY},ignoreUnknownProperties:(c=i.ignoreUnknownProperties)!==null&&c!==void 0?c:!1};if(t==null)return this.isXML&&e.type.name==="Sequence"&&!e.xmlIsWrapped&&(t=[]),e.defaultValue!==void 0&&(t=e.defaultValue),t;let u,d=e.type.name;if(n||(n=e.serializedName),d.match(/^Composite$/i)!==null)u=Wlr(this,e,t,n,l);else{if(this.isXML){let p=l.xml.xmlCharKey;t[mc.XML_ATTRKEY]!==void 0&&t[p]!==void 0&&(t=t[p])}d.match(/^Number$/i)!==null?(u=parseFloat(t),isNaN(u)&&(u=t)):d.match(/^Boolean$/i)!==null?t==="true"?u=!0:t==="false"?u=!1:u=t:d.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/i)!==null?u=t:d.match(/^(Date|DateTime|DateTimeRfc1123)$/i)!==null?u=new Date(t):d.match(/^UnixTime$/i)!==null?u=Llr(t):d.match(/^ByteArray$/i)!==null?u=SQ.decodeString(t):d.match(/^Base64Url$/i)!==null?u=Mlr(t):d.match(/^Sequence$/i)!==null?u=Qlr(this,e,t,n,l):d.match(/^Dictionary$/i)!==null&&(u=Klr(this,e,t,n,l))}return e.isConstant&&(u=e.defaultValue),u}};function Alr(r={},e=!1){return new kbe(r,e)}Mx.createSerializer=Alr;function Nlr(r,e){let t=r.length;for(;t-1>=0&&r[t-1]===e;)--t;return r.substr(0,t)}function Dlr(r){if(!r)return;if(!(r instanceof Uint8Array))throw new Error("Please provide an input of type Uint8Array for converting to Base64Url.");let e=SQ.encodeByteArray(r);return Nlr(e,"=").replace(/\+/g,"-").replace(/\//g,"_")}function Mlr(r){if(r){if(r&&typeof r.valueOf()!="string")throw new Error("Please provide an input of type string for converting to Uint8Array");return r=r.replace(/-/g,"+").replace(/_/g,"/"),SQ.decodeString(r)}}function Lbe(r){let e=[],t="";if(r){let n=r.split(".");for(let i of n)i.charAt(i.length-1)==="\\"?t+=i.substr(0,i.length-1)+".":(t+=i,e.push(t),t="")}return e}function klr(r){if(r)return typeof r.valueOf()=="string"&&(r=new Date(r)),Math.floor(r.getTime()/1e3)}function Llr(r){if(r)return new Date(r*1e3)}function qlr(r,e,t){if(t!=null){if(r.match(/^Number$/i)!==null){if(typeof t!="number")throw new Error(`${e} with value ${t} must be of type number.`)}else if(r.match(/^String$/i)!==null){if(typeof t.valueOf()!="string")throw new Error(`${e} with value "${t}" must be of type string.`)}else if(r.match(/^Uuid$/i)!==null){if(!(typeof t.valueOf()=="string"&&(0,gJe.isValidUuid)(t)))throw new Error(`${e} with value "${t}" must be of type string and a valid uuid.`)}else if(r.match(/^Boolean$/i)!==null){if(typeof t!="boolean")throw new Error(`${e} with value ${t} must be of type boolean.`)}else if(r.match(/^Stream$/i)!==null){let n=typeof t;if(n!=="string"&&typeof t.pipe!="function"&&typeof t.tee!="function"&&!(t instanceof ArrayBuffer)&&!ArrayBuffer.isView(t)&&!((typeof Blob=="function"||typeof Blob=="object")&&t instanceof Blob)&&n!=="function")throw new Error(`${e} must be a string, Blob, ArrayBuffer, ArrayBufferView, ReadableStream, or () => ReadableStream.`)}}return t}function zlr(r,e,t){if(!e)throw new Error(`Please provide a set of allowedValues to validate ${r} as an Enum Type.`);if(!e.some(i=>typeof i.valueOf()=="string"?i.toLowerCase()===t.toLowerCase():i===t))throw new Error(`${t} is not a valid value for ${r}. The valid values are: ${JSON.stringify(e)}.`);return t}function Flr(r,e){if(e!=null){if(!(e instanceof Uint8Array))throw new Error(`${r} must be of type Uint8Array.`);e=SQ.encodeByteArray(e)}return e}function jlr(r,e){if(e!=null){if(!(e instanceof Uint8Array))throw new Error(`${r} must be of type Uint8Array.`);e=Dlr(e)}return e}function Ulr(r,e,t){if(e!=null){if(r.match(/^Date$/i)!==null){if(!(e instanceof Date||typeof e.valueOf()=="string"&&!isNaN(Date.parse(e))))throw new Error(`${t} must be an instanceof Date or a string in ISO8601 format.`);e=e instanceof Date?e.toISOString().substring(0,10):new Date(e).toISOString().substring(0,10)}else if(r.match(/^DateTime$/i)!==null){if(!(e instanceof Date||typeof e.valueOf()=="string"&&!isNaN(Date.parse(e))))throw new Error(`${t} must be an instanceof Date or a string in ISO8601 format.`);e=e instanceof Date?e.toISOString():new Date(e).toISOString()}else if(r.match(/^DateTimeRfc1123$/i)!==null){if(!(e instanceof Date||typeof e.valueOf()=="string"&&!isNaN(Date.parse(e))))throw new Error(`${t} must be an instanceof Date or a string in RFC-1123 format.`);e=e instanceof Date?e.toUTCString():new Date(e).toUTCString()}else if(r.match(/^UnixTime$/i)!==null){if(!(e instanceof Date||typeof e.valueOf()=="string"&&!isNaN(Date.parse(e))))throw new Error(`${t} must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.`);e=klr(e)}else if(r.match(/^TimeSpan$/i)!==null&&!(0,gJe.isDuration)(e))throw new Error(`${t} must be a string in ISO 8601 format. Instead was "${e}".`)}return e}function Blr(r,e,t,n,i,s){var o;if(!Array.isArray(t))throw new Error(`${n} must be of type Array.`);let a=e.type.element;if(!a||typeof a!="object")throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${n}.`);a.type.name==="Composite"&&a.type.className&&(a=(o=r.modelMappers[a.type.className])!==null&&o!==void 0?o:a);let c=[];for(let l=0;l<t.length;l++){let u=r.serialize(a,t[l],n,s);if(i&&a.xmlNamespace){let d=a.xmlNamespacePrefix?`xmlns:${a.xmlNamespacePrefix}`:"xmlns";a.type.name==="Composite"?(c[l]=Object.assign({},u),c[l][mc.XML_ATTRKEY]={[d]:a.xmlNamespace}):(c[l]={},c[l][s.xml.xmlCharKey]=u,c[l][mc.XML_ATTRKEY]={[d]:a.xmlNamespace})}else c[l]=u}return c}function Glr(r,e,t,n,i,s){if(typeof t!="object")throw new Error(`${n} must be of type object.`);let o=e.type.value;if(!o||typeof o!="object")throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${n}.`);let a={};for(let c of Object.keys(t)){let l=r.serialize(o,t[c],n,s);a[c]=bJe(o,l,i,s)}if(i&&e.xmlNamespace){let c=e.xmlNamespacePrefix?`xmlns:${e.xmlNamespacePrefix}`:"xmlns",l=a;return l[mc.XML_ATTRKEY]={[c]:e.xmlNamespace},l}return a}function $lr(r,e,t){let n=e.type.additionalProperties;if(!n&&e.type.className){let i=yJe(r,e,t);return i?.type.additionalProperties}return n}function yJe(r,e,t){let n=e.type.className;if(!n)throw new Error(`Class name for model "${t}" is not provided in the mapper "${JSON.stringify(e,void 0,2)}".`);return r.modelMappers[n]}function vJe(r,e,t){let n=e.type.modelProperties;if(!n){let i=yJe(r,e,t);if(!i)throw new Error(`mapper() cannot be null or undefined for model "${e.type.className}".`);if(n=i?.type.modelProperties,!n)throw new Error(`modelProperties cannot be null or undefined in the mapper "${JSON.stringify(i)}" of type "${e.type.className}" for object "${t}".`)}return n}function Vlr(r,e,t,n,i,s){if(_Q(r,e)&&(e=_Je(r,e,t,"clientName")),t!=null){let o={},a=vJe(r,e,n);for(let l of Object.keys(a)){let u=a[l];if(u.readOnly)continue;let d,p=o;if(r.isXML)u.xmlIsWrapped?d=u.xmlName:d=u.xmlElementName||u.xmlName;else{let m=Lbe(u.serializedName);d=m.pop();for(let f of m){let y=p[f];y==null&&(t[l]!==void 0&&t[l]!==null||u.defaultValue!==void 0)&&(p[f]={}),p=p[f]}}if(p!=null){if(i&&e.xmlNamespace){let _=e.xmlNamespacePrefix?`xmlns:${e.xmlNamespacePrefix}`:"xmlns";p[mc.XML_ATTRKEY]=Object.assign(Object.assign({},p[mc.XML_ATTRKEY]),{[_]:e.xmlNamespace})}let m=u.serializedName!==""?n+"."+u.serializedName:n,f=t[l],y=_Q(r,e);y&&y.clientName===l&&f==null&&(f=e.serializedName);let v=r.serialize(u,f,m,s);if(v!==void 0&&d!==void 0&&d!==null){let _=bJe(u,v,i,s);i&&u.xmlIsAttribute?(p[mc.XML_ATTRKEY]=p[mc.XML_ATTRKEY]||{},p[mc.XML_ATTRKEY][d]=v):i&&u.xmlIsWrapped?p[d]={[u.xmlElementName]:_}:p[d]=_}}}let c=$lr(r,e,n);if(c){let l=Object.keys(a);for(let u in t)l.every(p=>p!==u)&&(o[u]=r.serialize(c,t[u],n+'["'+u+'"]',s))}return o}return t}function bJe(r,e,t,n){if(!t||!r.xmlNamespace)return e;let s={[r.xmlNamespacePrefix?`xmlns:${r.xmlNamespacePrefix}`:"xmlns"]:r.xmlNamespace};if(["Composite"].includes(r.type.name)){if(e[mc.XML_ATTRKEY])return e;{let a=Object.assign({},e);return a[mc.XML_ATTRKEY]=s,a}}let o={};return o[n.xml.xmlCharKey]=e,o[mc.XML_ATTRKEY]=s,o}function Hlr(r,e){return[mc.XML_ATTRKEY,e.xml.xmlCharKey].includes(r)}function Wlr(r,e,t,n,i){var s,o;let a=(s=i.xml.xmlCharKey)!==null&&s!==void 0?s:mc.XML_CHARKEY;_Q(r,e)&&(e=_Je(r,e,t,"serializedName"));let c=vJe(r,e,n),l={},u=[];for(let p of Object.keys(c)){let m=c[p],f=Lbe(c[p].serializedName);u.push(f[0]);let{serializedName:y,xmlName:v,xmlElementName:_}=m,C=n;y!==""&&y!==void 0&&(C=n+"."+y);let P=m.headerCollectionPrefix;if(P){let w={};for(let R of Object.keys(t))R.startsWith(P)&&(w[R.substring(P.length)]=r.deserialize(m.type.value,t[R],C,i)),u.push(R);l[p]=w}else if(r.isXML)if(m.xmlIsAttribute&&t[mc.XML_ATTRKEY])l[p]=r.deserialize(m,t[mc.XML_ATTRKEY][v],C,i);else if(m.xmlIsMsText)t[a]!==void 0?l[p]=t[a]:typeof t=="string"&&(l[p]=t);else{let w=_||v||y;if(m.xmlIsWrapped){let R=t[v],I=(o=R?.[_])!==null&&o!==void 0?o:[];l[p]=r.deserialize(m,I,C,i),u.push(v)}else{let R=t[w];l[p]=r.deserialize(m,R,C,i),u.push(w)}}else{let w,R=t,I=0;for(let L of f){if(!R)break;I++,R=R[L]}R===null&&I<f.length&&(R=void 0),w=R;let z=e.type.polymorphicDiscriminator;z&&p===z.clientName&&w==null&&(w=e.serializedName);let G;if(Array.isArray(t[p])&&c[p].serializedName===""){w=t[p];let L=r.deserialize(m,w,C,i);for(let[H,ee]of Object.entries(l))Object.prototype.hasOwnProperty.call(L,H)||(L[H]=ee);l=L}else(w!==void 0||m.defaultValue!==void 0)&&(G=r.deserialize(m,w,C,i),l[p]=G)}}let d=e.type.additionalProperties;if(d){let p=m=>{for(let f in c)if(Lbe(c[f].serializedName)[0]===m)return!1;return!0};for(let m in t)p(m)&&(l[m]=r.deserialize(d,t[m],n+'["'+m+'"]',i))}else if(t&&!i.ignoreUnknownProperties)for(let p of Object.keys(t))l[p]===void 0&&!u.includes(p)&&!Hlr(p,i)&&(l[p]=t[p]);return l}function Klr(r,e,t,n,i){let s=e.type.value;if(!s||typeof s!="object")throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${n}`);if(t){let o={};for(let a of Object.keys(t))o[a]=r.deserialize(s,t[a],n,i);return o}return t}function Qlr(r,e,t,n,i){var s;let o=e.type.element;if(!o||typeof o!="object")throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${n}`);if(t){Array.isArray(t)||(t=[t]),o.type.name==="Composite"&&o.type.className&&(o=(s=r.modelMappers[o.type.className])!==null&&s!==void 0?s:o);let a=[];for(let c=0;c<t.length;c++)a[c]=r.deserialize(o,t[c],`${n}[${c}]`,i);return a}return t}function Ylr(r,e,t){let n=[t];for(;n.length;){let i=n.shift(),s=e===i?e:i+"."+e;if(Object.prototype.hasOwnProperty.call(r,s))return r[s];for(let[o,a]of Object.entries(r))o.startsWith(i+".")&&a.type.uberParent===i&&a.type.className&&n.push(a.type.className)}}function _Je(r,e,t,n){var i;let s=_Q(r,e);if(s){let o=s[n];if(o){n==="serializedName"&&(o=o.replace(/\\/gi,""));let a=t[o],c=(i=e.type.uberParent)!==null&&i!==void 0?i:e.type.className;if(typeof a=="string"&&c){let l=Ylr(r.modelMappers.discriminators,a,c);l&&(e=l)}}}return e}function _Q(r,e){return e.type.polymorphicDiscriminator||fJe(r,e.type.uberParent)||fJe(r,e.type.className)}function fJe(r,e){return e&&r.modelMappers[e]&&r.modelMappers[e].type.polymorphicDiscriminator}Mx.MapperTypeNames={Base64Url:"Base64Url",Boolean:"Boolean",ByteArray:"ByteArray",Composite:"Composite",Date:"Date",DateTime:"DateTime",DateTimeRfc1123:"DateTimeRfc1123",Dictionary:"Dictionary",Enum:"Enum",Number:"Number",Object:"Object",Sequence:"Sequence",String:"String",Stream:"Stream",TimeSpan:"TimeSpan",UnixTime:"UnixTime"}});var Fbe=O(zbe=>{"use strict";Object.defineProperty(zbe,"__esModule",{value:!0});zbe.createEmptyPipeline=Xlr;var SJe=new Set(["Deserialize","Serialize","Retry","Sign"]),qbe=class r{constructor(e){var t;this._policies=[],this._policies=(t=e?.slice(0))!==null&&t!==void 0?t:[],this._orderedPolicies=void 0}addPolicy(e,t={}){if(t.phase&&t.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(t.phase&&!SJe.has(t.phase))throw new Error(`Invalid phase name: ${t.phase}`);if(t.afterPhase&&!SJe.has(t.afterPhase))throw new Error(`Invalid afterPhase name: ${t.afterPhase}`);this._policies.push({policy:e,options:t}),this._orderedPolicies=void 0}removePolicy(e){let t=[];return this._policies=this._policies.filter(n=>e.name&&n.policy.name===e.name||e.phase&&n.options.phase===e.phase?(t.push(n.policy),!1):!0),this._orderedPolicies=void 0,t}sendRequest(e,t){return this.getOrderedPolicies().reduceRight((s,o)=>a=>o.sendRequest(a,s),s=>e.sendRequest(s))(t)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new r(this._policies)}static create(){return new r}orderPolicies(){let e=[],t=new Map;function n(f){return{name:f,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}let i=n("Serialize"),s=n("None"),o=n("Deserialize"),a=n("Retry"),c=n("Sign"),l=[i,s,o,a,c];function u(f){return f==="Retry"?a:f==="Serialize"?i:f==="Deserialize"?o:f==="Sign"?c:s}for(let f of this._policies){let y=f.policy,v=f.options,_=y.name;if(t.has(_))throw new Error("Duplicate policy names not allowed in pipeline");let C={policy:y,dependsOn:new Set,dependants:new Set};v.afterPhase&&(C.afterPhase=u(v.afterPhase),C.afterPhase.hasAfterPolicies=!0),t.set(_,C),u(v.phase).policies.add(C)}for(let f of this._policies){let{policy:y,options:v}=f,_=y.name,C=t.get(_);if(!C)throw new Error(`Missing node for policy ${_}`);if(v.afterPolicies)for(let P of v.afterPolicies){let w=t.get(P);w&&(C.dependsOn.add(w),w.dependants.add(C))}if(v.beforePolicies)for(let P of v.beforePolicies){let w=t.get(P);w&&(w.dependsOn.add(C),C.dependants.add(w))}}function d(f){f.hasRun=!0;for(let y of f.policies)if(!(y.afterPhase&&(!y.afterPhase.hasRun||y.afterPhase.policies.size))&&y.dependsOn.size===0){e.push(y.policy);for(let v of y.dependants)v.dependsOn.delete(y);t.delete(y.policy.name),f.policies.delete(y)}}function p(){for(let f of l){if(d(f),f.policies.size>0&&f!==s){s.hasRun||d(s);return}f.hasAfterPolicies&&d(s)}}let m=0;for(;t.size>0;){m++;let f=e.length;if(p(),e.length<=f&&m>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return e}};function Xlr(){return qbe.create()}});var aw=O(CQ=>{"use strict";Object.defineProperty(CQ,"__esModule",{value:!0});CQ.logger=void 0;var Jlr=lu();CQ.logger=(0,Jlr.createClientLogger)("core-rest-pipeline")});var wQ=O(PQ=>{"use strict";Object.defineProperty(PQ,"__esModule",{value:!0});PQ.Sanitizer=void 0;var Zlr=gs(),jbe="REDACTED",eur=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],tur=["api-version"],Ube=class{constructor({additionalAllowedHeaderNames:e=[],additionalAllowedQueryParameters:t=[]}={}){e=eur.concat(e),t=tur.concat(t),this.allowedHeaderNames=new Set(e.map(n=>n.toLowerCase())),this.allowedQueryParameters=new Set(t.map(n=>n.toLowerCase()))}sanitize(e){let t=new Set;return JSON.stringify(e,(n,i)=>{if(i instanceof Error)return Object.assign(Object.assign({},i),{name:i.name,message:i.message});if(n==="headers")return this.sanitizeHeaders(i);if(n==="url")return this.sanitizeUrl(i);if(n==="query")return this.sanitizeQuery(i);if(n==="body")return;if(n==="response")return;if(n==="operationSpec")return;if(Array.isArray(i)||(0,Zlr.isObject)(i)){if(t.has(i))return"[Circular]";t.add(i)}return i},2)}sanitizeUrl(e){if(typeof e!="string"||e===null||e==="")return e;let t=new URL(e);if(!t.search)return e;for(let[n]of t.searchParams)this.allowedQueryParameters.has(n.toLowerCase())||t.searchParams.set(n,jbe);return t.toString()}sanitizeHeaders(e){let t={};for(let n of Object.keys(e))this.allowedHeaderNames.has(n.toLowerCase())?t[n]=e[n]:t[n]=jbe;return t}sanitizeQuery(e){if(typeof e!="object"||e===null)return e;let t={};for(let n of Object.keys(e))this.allowedQueryParameters.has(n.toLowerCase())?t[n]=e[n]:t[n]=jbe;return t}};PQ.Sanitizer=Ube});var Bbe=O(kx=>{"use strict";Object.defineProperty(kx,"__esModule",{value:!0});kx.logPolicyName=void 0;kx.logPolicy=iur;var rur=aw(),nur=wQ();kx.logPolicyName="logPolicy";function iur(r={}){var e;let t=(e=r.logger)!==null&&e!==void 0?e:rur.logger.info,n=new nur.Sanitizer({additionalAllowedHeaderNames:r.additionalAllowedHeaderNames,additionalAllowedQueryParameters:r.additionalAllowedQueryParameters});return{name:kx.logPolicyName,async sendRequest(i,s){if(!t.enabled)return s(i);t(`Request: ${n.sanitize(i)}`);let o=await s(i);return t(`Response status code: ${o.status}`),t(`Headers: ${n.sanitize(o.headers)}`),o}}}});var Gbe=O(Lx=>{"use strict";Object.defineProperty(Lx,"__esModule",{value:!0});Lx.redirectPolicyName=void 0;Lx.redirectPolicy=sur;Lx.redirectPolicyName="redirectPolicy";var CJe=["GET","HEAD"];function sur(r={}){let{maxRetries:e=20}=r;return{name:Lx.redirectPolicyName,async sendRequest(t,n){let i=await n(t);return PJe(n,i,e)}}}async function PJe(r,e,t,n=0){let{request:i,status:s,headers:o}=e,a=o.get("location");if(a&&(s===300||s===301&&CJe.includes(i.method)||s===302&&CJe.includes(i.method)||s===303&&i.method==="POST"||s===307)&&n<t){let c=new URL(a,i.url);i.url=c.toString(),s===303&&(i.method="GET",i.headers.delete("Content-Length"),delete i.body),i.headers.delete("Authorization");let l=await r(i);return PJe(r,l,t,n+1)}return e}});var EJe=O(EQ=>{"use strict";Object.defineProperty(EQ,"__esModule",{value:!0});EQ.getHeaderName=our;EQ.setPlatformSpecificData=aur;var wJe=(E1(),da(w1)),$be=wJe.__importStar(require("node:os")),Vbe=wJe.__importStar(require("node:process"));function our(){return"User-Agent"}async function aur(r){if(Vbe&&Vbe.versions){let e=Vbe.versions;e.bun?r.set("Bun",e.bun):e.deno?r.set("Deno",e.deno):e.node&&r.set("Node",e.node)}r.set("OS",`(${$be.arch()}-${$be.type()}-${$be.release()})`)}});var b_=O(qx=>{"use strict";Object.defineProperty(qx,"__esModule",{value:!0});qx.DEFAULT_RETRY_POLICY_COUNT=qx.SDK_VERSION=void 0;qx.SDK_VERSION="1.17.0";qx.DEFAULT_RETRY_POLICY_COUNT=3});var Hbe=O(TQ=>{"use strict";Object.defineProperty(TQ,"__esModule",{value:!0});TQ.getUserAgentHeaderName=uur;TQ.getUserAgentValue=dur;var TJe=EJe(),cur=b_();function lur(r){let e=[];for(let[t,n]of r){let i=n?`${t}/${n}`:t;e.push(i)}return e.join(" ")}function uur(){return(0,TJe.getHeaderName)()}async function dur(r){let e=new Map;e.set("core-rest-pipeline",cur.SDK_VERSION),await(0,TJe.setPlatformSpecificData)(e);let t=lur(e);return r?`${r} ${t}`:t}});var Wbe=O(zx=>{"use strict";Object.defineProperty(zx,"__esModule",{value:!0});zx.userAgentPolicyName=void 0;zx.userAgentPolicy=pur;var RJe=Hbe(),IJe=(0,RJe.getUserAgentHeaderName)();zx.userAgentPolicyName="userAgentPolicy";function pur(r={}){let e=(0,RJe.getUserAgentValue)(r.userAgentPrefix);return{name:zx.userAgentPolicyName,async sendRequest(t,n){return t.headers.has(IJe)||t.headers.set(IJe,await e),n(t)}}}});var IQ=O(Fx=>{"use strict";Object.defineProperty(Fx,"__esModule",{value:!0});Fx.isNodeReadableStream=xJe;Fx.isWebReadableStream=OJe;Fx.isReadableStream=mur;Fx.isBlob=hur;function xJe(r){return!!(r&&typeof r.pipe=="function")}function OJe(r){return!!(r&&typeof r.getReader=="function"&&typeof r.tee=="function")}function mur(r){return xJe(r)||OJe(r)}function hur(r){return typeof r.stream=="function"}});var Kbe=O(R1=>{"use strict";Object.defineProperty(R1,"__esModule",{value:!0});R1.getRawContent=vur;R1.createFileFromStream=bur;R1.createFile=_ur;var fur=gs(),gur=IQ(),AJe={arrayBuffer:()=>{throw new Error("Not implemented")},slice:()=>{throw new Error("Not implemented")},text:()=>{throw new Error("Not implemented")}},RQ=Symbol("rawContent");function yur(r){return typeof r[RQ]=="function"}function vur(r){return yur(r)?r[RQ]():r.stream()}function bur(r,e,t={}){var n,i,s,o;return Object.assign(Object.assign({},AJe),{type:(n=t.type)!==null&&n!==void 0?n:"",lastModified:(i=t.lastModified)!==null&&i!==void 0?i:new Date().getTime(),webkitRelativePath:(s=t.webkitRelativePath)!==null&&s!==void 0?s:"",size:(o=t.size)!==null&&o!==void 0?o:-1,name:e,stream:()=>{let a=r();if((0,gur.isNodeReadableStream)(a))throw new Error("Not supported: a Node stream was provided as input to createFileFromStream.");return a},[RQ]:r})}function _ur(r,e,t={}){var n,i,s;return fur.isNodeLike?Object.assign(Object.assign({},AJe),{type:(n=t.type)!==null&&n!==void 0?n:"",lastModified:(i=t.lastModified)!==null&&i!==void 0?i:new Date().getTime(),webkitRelativePath:(s=t.webkitRelativePath)!==null&&s!==void 0?s:"",size:r.byteLength,name:e,arrayBuffer:async()=>r.buffer,stream:()=>new Blob([r]).stream(),[RQ]:()=>r}):new File([r],e,t)}});var MJe=O(Ybe=>{"use strict";Object.defineProperty(Ybe,"__esModule",{value:!0});Ybe.concat=Eur;var Py=(E1(),da(w1)),Qbe=require("node:stream"),Sur=IQ(),Cur=Kbe();function NJe(){return Py.__asyncGenerator(this,arguments,function*(){let e=this.getReader();try{for(;;){let{done:t,value:n}=yield Py.__await(e.read());if(t)return yield Py.__await(void 0);yield yield Py.__await(n)}}finally{e.releaseLock()}})}function Pur(r){r[Symbol.asyncIterator]||(r[Symbol.asyncIterator]=NJe.bind(r)),r.values||(r.values=NJe.bind(r))}function wur(r){return r instanceof ReadableStream?(Pur(r),Qbe.Readable.fromWeb(r)):r}function DJe(r){return r instanceof Uint8Array?Qbe.Readable.from(Buffer.from(r)):(0,Sur.isBlob)(r)?DJe((0,Cur.getRawContent)(r)):wur(r)}async function Eur(r){return function(){let e=r.map(t=>typeof t=="function"?t():t).map(DJe);return Qbe.Readable.from(function(){return Py.__asyncGenerator(this,arguments,function*(){var t,n,i,s;for(let l of e)try{for(var o=!0,a=(n=void 0,Py.__asyncValues(l)),c;c=yield Py.__await(a.next()),t=c.done,!t;o=!0){s=c.value,o=!1;let u=s;yield yield Py.__await(u)}}catch(u){n={error:u}}finally{try{!o&&!t&&(i=a.return)&&(yield Py.__await(i.call(a)))}finally{if(n)throw n.error}}})}())}}});var Xbe=O(jx=>{"use strict";Object.defineProperty(jx,"__esModule",{value:!0});jx.multipartPolicyName=void 0;jx.multipartPolicy=Lur;var cw=gs(),Tur=MJe(),Iur=IQ();function Rur(){return`----AzSDKFormBoundary${(0,cw.randomUUID)()}`}function xur(r){let e="";for(let[t,n]of r)e+=`${t}: ${n}\r
`;return e}function Our(r){return r instanceof Uint8Array?r.byteLength:(0,Iur.isBlob)(r)?r.size===-1?void 0:r.size:void 0}function Aur(r){let e=0;for(let t of r){let n=Our(t);if(n===void 0)return;e+=n}return e}async function Nur(r,e,t){let n=[(0,cw.stringToUint8Array)(`--${t}`,"utf-8"),...e.flatMap(s=>[(0,cw.stringToUint8Array)(`\r
`,"utf-8"),(0,cw.stringToUint8Array)(xur(s.headers),"utf-8"),(0,cw.stringToUint8Array)(`\r
`,"utf-8"),s.body,(0,cw.stringToUint8Array)(`\r
--${t}`,"utf-8")]),(0,cw.stringToUint8Array)(`--\r
\r
`,"utf-8")],i=Aur(n);i&&r.headers.set("Content-Length",i),r.body=await(0,Tur.concat)(n)}jx.multipartPolicyName="multipartPolicy";var Dur=70,Mur=new Set("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'()+,-./:=?");function kur(r){if(r.length>Dur)throw new Error(`Multipart boundary "${r}" exceeds maximum length of 70 characters`);if(Array.from(r).some(e=>!Mur.has(e)))throw new Error(`Multipart boundary "${r}" contains invalid characters`)}function Lur(){return{name:jx.multipartPolicyName,async sendRequest(r,e){var t;if(!r.multipartBody)return e(r);if(r.body)throw new Error("multipartBody and regular body cannot be set at the same time");let n=r.multipartBody.boundary,i=(t=r.headers.get("Content-Type"))!==null&&t!==void 0?t:"multipart/mixed",s=i.match(/^(multipart\/[^ ;]+)(?:; *boundary=(.+))?$/);if(!s)throw new Error(`Got multipart request body, but content-type header was not multipart: ${i}`);let[,o,a]=s;if(a&&n&&a!==n)throw new Error(`Multipart boundary was specified as ${a} in the header, but got ${n} in the request body`);return n??(n=a),n?kur(n):n=Rur(),r.headers.set("Content-Type",`${o}; boundary=${n}`),await Nur(r,r.multipartBody.parts,n),r.multipartBody=void 0,e(r)}}}});var Jbe=O(Ux=>{"use strict";Object.defineProperty(Ux,"__esModule",{value:!0});Ux.decompressResponsePolicyName=void 0;Ux.decompressResponsePolicy=qur;Ux.decompressResponsePolicyName="decompressResponsePolicy";function qur(){return{name:Ux.decompressResponsePolicyName,async sendRequest(r,e){return r.method!=="HEAD"&&r.headers.set("Accept-Encoding","gzip,deflate"),e(r)}}}});var kJe=O(xQ=>{"use strict";Object.defineProperty(xQ,"__esModule",{value:!0});xQ.AbortError=void 0;var Zbe=class extends Error{constructor(e){super(e),this.name="AbortError"}};xQ.AbortError=Zbe});var AQ=O(OQ=>{"use strict";Object.defineProperty(OQ,"__esModule",{value:!0});OQ.AbortError=void 0;var zur=kJe();Object.defineProperty(OQ,"AbortError",{enumerable:!0,get:function(){return zur.AbortError}})});var DQ=O(NQ=>{"use strict";Object.defineProperty(NQ,"__esModule",{value:!0});NQ.delay=Uur;NQ.parseHeaderValueAsNumber=Bur;var Fur=AQ(),jur="The operation was aborted.";function Uur(r,e,t){return new Promise((n,i)=>{let s,o,a=()=>i(new Fur.AbortError(t?.abortErrorMsg?t?.abortErrorMsg:jur)),c=()=>{t?.abortSignal&&o&&t.abortSignal.removeEventListener("abort",o)};if(o=()=>(s&&clearTimeout(s),c(),a()),t?.abortSignal&&t.abortSignal.aborted)return a();s=setTimeout(()=>{c(),n(e)},r),t?.abortSignal&&t.abortSignal.addEventListener("abort",o)})}function Bur(r,e){let t=r.headers.get(e);if(!t)return;let n=Number(t);if(!Number.isNaN(n))return n}});var kQ=O(MQ=>{"use strict";Object.defineProperty(MQ,"__esModule",{value:!0});MQ.isThrottlingRetryResponse=Vur;MQ.throttlingRetryStrategy=Hur;var Gur=DQ(),e_e="Retry-After",$ur=["retry-after-ms","x-ms-retry-after-ms",e_e];function LJe(r){if(r&&[429,503].includes(r.status))try{for(let i of $ur){let s=(0,Gur.parseHeaderValueAsNumber)(r,i);if(s===0||s)return s*(i===e_e?1e3:1)}let e=r.headers.get(e_e);if(!e)return;let n=Date.parse(e)-Date.now();return Number.isFinite(n)?Math.max(0,n):void 0}catch{return}}function Vur(r){return Number.isFinite(LJe(r))}function Hur(){return{name:"throttlingRetryStrategy",retry({response:r}){let e=LJe(r);return Number.isFinite(e)?{retryAfterInMs:e}:{skipStrategy:!0}}}}});var LQ=O(x1=>{"use strict";Object.defineProperty(x1,"__esModule",{value:!0});x1.exponentialRetryStrategy=Xur;x1.isExponentialRetryResponse=qJe;x1.isSystemError=zJe;var Wur=gs(),Kur=kQ(),Qur=1e3,Yur=1e3*64;function Xur(r={}){var e,t;let n=(e=r.retryDelayInMs)!==null&&e!==void 0?e:Qur,i=(t=r.maxRetryDelayInMs)!==null&&t!==void 0?t:Yur,s=n;return{name:"exponentialRetryStrategy",retry({retryCount:o,response:a,responseError:c}){let l=zJe(c),u=l&&r.ignoreSystemErrors,d=qJe(a),p=d&&r.ignoreHttpStatusCodes;if(a&&((0,Kur.isThrottlingRetryResponse)(a)||!d)||p||u)return{skipStrategy:!0};if(c&&!l&&!d)return{errorToThrow:c};let f=s*Math.pow(2,o),y=Math.min(i,f);return s=y/2+(0,Wur.getRandomIntegerInclusive)(0,y/2),{retryAfterInMs:s}}}}function qJe(r){return!!(r&&r.status!==void 0&&(r.status>=500||r.status===408)&&r.status!==501&&r.status!==505)}function zJe(r){return r?r.code==="ETIMEDOUT"||r.code==="ESOCKETTIMEDOUT"||r.code==="ECONNREFUSED"||r.code==="ECONNRESET"||r.code==="ENOENT"||r.code==="ENOTFOUND":!1}});var Bx=O(t_e=>{"use strict";Object.defineProperty(t_e,"__esModule",{value:!0});t_e.retryPolicy=rdr;var Jur=DQ(),Zur=lu(),edr=AQ(),FJe=b_(),jJe=(0,Zur.createClientLogger)("core-rest-pipeline retryPolicy"),tdr="retryPolicy";function rdr(r,e={maxRetries:FJe.DEFAULT_RETRY_POLICY_COUNT}){let t=e.logger||jJe;return{name:tdr,async sendRequest(n,i){var s,o;let a,c,l=-1;e:for(;;){l+=1,a=void 0,c=void 0;try{t.info(`Retry ${l}: Attempting to send request`,n.requestId),a=await i(n),t.info(`Retry ${l}: Received a response from request`,n.requestId)}catch(u){if(t.error(`Retry ${l}: Received an error from request`,n.requestId),c=u,!u||c.name!=="RestError")throw u;a=c.response}if(!((s=n.abortSignal)===null||s===void 0)&&s.aborted)throw t.error(`Retry ${l}: Request aborted.`),new edr.AbortError;if(l>=((o=e.maxRetries)!==null&&o!==void 0?o:FJe.DEFAULT_RETRY_POLICY_COUNT)){if(t.info(`Retry ${l}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),c)throw c;if(a)return a;throw new Error("Maximum retries reached with no response or error to throw")}t.info(`Retry ${l}: Processing ${r.length} retry strategies.`);t:for(let u of r){let d=u.logger||jJe;d.info(`Retry ${l}: Processing retry strategy ${u.name}.`);let p=u.retry({retryCount:l,response:a,responseError:c});if(p.skipStrategy){d.info(`Retry ${l}: Skipped.`);continue t}let{errorToThrow:m,retryAfterInMs:f,redirectTo:y}=p;if(m)throw d.error(`Retry ${l}: Retry strategy ${u.name} throws error:`,m),m;if(f||f===0){d.info(`Retry ${l}: Retry strategy ${u.name} retries after ${f}`),await(0,Jur.delay)(f,void 0,{abortSignal:n.abortSignal});continue e}if(y){d.info(`Retry ${l}: Retry strategy ${u.name} redirects to ${y}`),n.url=y;continue e}}if(c)throw t.info("None of the retry strategies could work with the received error. Throwing it."),c;if(a)return t.info("None of the retry strategies could work with the received response. Returning it."),a}}}}});var r_e=O(Gx=>{"use strict";Object.defineProperty(Gx,"__esModule",{value:!0});Gx.defaultRetryPolicyName=void 0;Gx.defaultRetryPolicy=adr;var ndr=LQ(),idr=kQ(),sdr=Bx(),odr=b_();Gx.defaultRetryPolicyName="defaultRetryPolicy";function adr(r={}){var e;return{name:Gx.defaultRetryPolicyName,sendRequest:(0,sdr.retryPolicy)([(0,idr.throttlingRetryStrategy)(),(0,ndr.exponentialRetryStrategy)(r)],{maxRetries:(e=r.maxRetries)!==null&&e!==void 0?e:odr.DEFAULT_RETRY_POLICY_COUNT}).sendRequest}}});var O1=O(i_e=>{"use strict";Object.defineProperty(i_e,"__esModule",{value:!0});i_e.createHttpHeaders=ldr;function qQ(r){return r.toLowerCase()}function*cdr(r){for(let e of r.values())yield[e.name,e.value]}var n_e=class{constructor(e){if(this._headersMap=new Map,e)for(let t of Object.keys(e))this.set(t,e[t])}set(e,t){this._headersMap.set(qQ(e),{name:e,value:String(t).trim()})}get(e){var t;return(t=this._headersMap.get(qQ(e)))===null||t===void 0?void 0:t.value}has(e){return this._headersMap.has(qQ(e))}delete(e){this._headersMap.delete(qQ(e))}toJSON(e={}){let t={};if(e.preserveCase)for(let n of this._headersMap.values())t[n.name]=n.value;else for(let[n,i]of this._headersMap)t[n]=i.value;return t}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return cdr(this._headersMap)}};function ldr(r){return new n_e(r)}});var s_e=O($x=>{"use strict";Object.defineProperty($x,"__esModule",{value:!0});$x.formDataPolicyName=void 0;$x.formDataPolicy=ddr;var BJe=gs(),UJe=O1();$x.formDataPolicyName="formDataPolicy";function udr(r){var e;let t={};for(let[n,i]of r.entries())(e=t[n])!==null&&e!==void 0||(t[n]=[]),t[n].push(i);return t}function ddr(){return{name:$x.formDataPolicyName,async sendRequest(r,e){if(BJe.isNodeLike&&typeof FormData<"u"&&r.body instanceof FormData&&(r.formData=udr(r.body),r.body=void 0),r.formData){let t=r.headers.get("Content-Type");t&&t.indexOf("application/x-www-form-urlencoded")!==-1?r.body=pdr(r.formData):await mdr(r.formData,r),r.formData=void 0}return e(r)}}}function pdr(r){let e=new URLSearchParams;for(let[t,n]of Object.entries(r))if(Array.isArray(n))for(let i of n)e.append(t,i.toString());else e.append(t,n.toString());return e.toString()}async function mdr(r,e){let t=e.headers.get("Content-Type");if(t&&!t.startsWith("multipart/form-data"))return;e.headers.set("Content-Type",t??"multipart/form-data");let n=[];for(let[i,s]of Object.entries(r))for(let o of Array.isArray(s)?s:[s])if(typeof o=="string")n.push({headers:(0,UJe.createHttpHeaders)({"Content-Disposition":`form-data; name="${i}"`}),body:(0,BJe.stringToUint8Array)(o,"utf-8")});else{if(o==null||typeof o!="object")throw new Error(`Unexpected value for key ${i}: ${o}. Value should be serialized to string first.`);{let a=o.name||"blob",c=(0,UJe.createHttpHeaders)();c.set("Content-Disposition",`form-data; name="${i}"; filename="${a}"`),c.set("Content-Type",o.type||"application/octet-stream"),n.push({headers:c,body:o})}}e.multipartBody={parts:n}}});var o_e=O(Dp=>{"use strict";Object.defineProperty(Dp,"__esModule",{value:!0});Dp.globalNoProxyList=Dp.proxyPolicyName=void 0;Dp.loadNoProxy=WJe;Dp.getDefaultProxySettings=Pdr;Dp.proxyPolicy=Edr;var hdr=J4(),fdr=e6(),gdr=aw(),ydr="HTTPS_PROXY",vdr="HTTP_PROXY",bdr="ALL_PROXY",_dr="NO_PROXY";Dp.proxyPolicyName="proxyPolicy";Dp.globalNoProxyList=[];var VJe=!1,Sdr=new Map;function zQ(r){if(process.env[r])return process.env[r];if(process.env[r.toLowerCase()])return process.env[r.toLowerCase()]}function HJe(){if(!process)return;let r=zQ(ydr),e=zQ(bdr),t=zQ(vdr);return r||e||t}function Cdr(r,e,t){if(e.length===0)return!1;let n=new URL(r).hostname;if(t?.has(n))return t.get(n);let i=!1;for(let s of e)s[0]==="."?(n.endsWith(s)||n.length===s.length-1&&n===s.slice(1))&&(i=!0):n===s&&(i=!0);return t?.set(n,i),i}function WJe(){let r=zQ(_dr);return VJe=!0,r?r.split(",").map(e=>e.trim()).filter(e=>e.length):[]}function Pdr(r){if(!r&&(r=HJe(),!r))return;let e=new URL(r);return{host:(e.protocol?e.protocol+"//":"")+e.hostname,port:Number.parseInt(e.port||"80"),username:e.username,password:e.password}}function wdr(){let r=HJe();return r?new URL(r):void 0}function GJe(r){let e;try{e=new URL(r.host)}catch{throw new Error(`Expecting a valid host string in proxy settings, but found "${r.host}".`)}return e.port=String(r.port),r.username&&(e.username=r.username),r.password&&(e.password=r.password),e}function $Je(r,e,t){if(r.agent)return;let i=new URL(r.url).protocol!=="https:";r.tlsSettings&&gdr.logger.warning("TLS settings are not supported in combination with custom Proxy, certificates provided to the client will be ignored.");let s=r.headers.toJSON();i?(e.httpProxyAgent||(e.httpProxyAgent=new fdr.HttpProxyAgent(t,{headers:s})),r.agent=e.httpProxyAgent):(e.httpsProxyAgent||(e.httpsProxyAgent=new hdr.HttpsProxyAgent(t,{headers:s})),r.agent=e.httpsProxyAgent)}function Edr(r,e){VJe||Dp.globalNoProxyList.push(...WJe());let t=r?GJe(r):wdr(),n={};return{name:Dp.proxyPolicyName,async sendRequest(i,s){var o;return!i.proxySettings&&t&&!Cdr(i.url,(o=e?.customNoProxyList)!==null&&o!==void 0?o:Dp.globalNoProxyList,e?.customNoProxyList?void 0:Sdr)?$Je(i,n,t):i.proxySettings&&$Je(i,n,GJe(i.proxySettings)),s(i)}}}});var a_e=O(Vx=>{"use strict";Object.defineProperty(Vx,"__esModule",{value:!0});Vx.setClientRequestIdPolicyName=void 0;Vx.setClientRequestIdPolicy=Tdr;Vx.setClientRequestIdPolicyName="setClientRequestIdPolicy";function Tdr(r="x-ms-client-request-id"){return{name:Vx.setClientRequestIdPolicyName,async sendRequest(e,t){return e.headers.has(r)||e.headers.set(r,e.requestId),t(e)}}}});var c_e=O(Hx=>{"use strict";Object.defineProperty(Hx,"__esModule",{value:!0});Hx.tlsPolicyName=void 0;Hx.tlsPolicy=Idr;Hx.tlsPolicyName="tlsPolicy";function Idr(r){return{name:Hx.tlsPolicyName,sendRequest:async(e,t)=>(e.tlsSettings||(e.tlsSettings=r),t(e))}}});var KJe=O(FQ=>{"use strict";Object.defineProperty(FQ,"__esModule",{value:!0});FQ.custom=void 0;var Rdr=require("node:util");FQ.custom=Rdr.inspect.custom});var jQ=O(A1=>{"use strict";Object.defineProperty(A1,"__esModule",{value:!0});A1.RestError=void 0;A1.isRestError=Ddr;var xdr=gs(),Odr=KJe(),Adr=wQ(),Ndr=new Adr.Sanitizer,Wx=class r extends Error{constructor(e,t={}){super(e),this.name="RestError",this.code=t.code,this.statusCode=t.statusCode,Object.defineProperty(this,"request",{value:t.request,enumerable:!1}),Object.defineProperty(this,"response",{value:t.response,enumerable:!1}),Object.setPrototypeOf(this,r.prototype)}[Odr.custom](){return`RestError: ${this.message} 
 ${Ndr.sanitize(Object.assign(Object.assign({},this),{request:this.request,response:this.response}))}`}};A1.RestError=Wx;Wx.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR";Wx.PARSE_ERROR="PARSE_ERROR";function Ddr(r){return r instanceof Wx?!0:(0,xdr.isError)(r)&&r.name==="RestError"}});var l_e=O(Kx=>{"use strict";Object.defineProperty(Kx,"__esModule",{value:!0});Kx.tracingPolicyName=void 0;Kx.tracingPolicy=Fdr;var Mdr=Bq(),kdr=b_(),Ldr=Hbe(),UQ=aw(),N1=gs(),qdr=jQ(),zdr=wQ();Kx.tracingPolicyName="tracingPolicy";function Fdr(r={}){let e=(0,Ldr.getUserAgentValue)(r.userAgentPrefix),t=new zdr.Sanitizer({additionalAllowedQueryParameters:r.additionalAllowedQueryParameters}),n=jdr();return{name:Kx.tracingPolicyName,async sendRequest(i,s){var o;if(!n)return s(i);let a=await e,c={"http.url":t.sanitizeUrl(i.url),"http.method":i.method,"http.user_agent":a,requestId:i.requestId};a&&(c["http.user_agent"]=a);let{span:l,tracingContext:u}=(o=Udr(n,i,c))!==null&&o!==void 0?o:{};if(!l||!u)return s(i);try{let d=await n.withContext(u,s,i);return Gdr(l,d),d}catch(d){throw Bdr(l,d),d}}}}function jdr(){try{return(0,Mdr.createTracingClient)({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:kdr.SDK_VERSION})}catch(r){UQ.logger.warning(`Error when creating the TracingClient: ${(0,N1.getErrorMessage)(r)}`);return}}function Udr(r,e,t){try{let{span:n,updatedOptions:i}=r.startSpan(`HTTP ${e.method}`,{tracingOptions:e.tracingOptions},{spanKind:"client",spanAttributes:t});if(!n.isRecording()){n.end();return}let s=r.createRequestHeaders(i.tracingOptions.tracingContext);for(let[o,a]of Object.entries(s))e.headers.set(o,a);return{span:n,tracingContext:i.tracingOptions.tracingContext}}catch(n){UQ.logger.warning(`Skipping creating a tracing span due to an error: ${(0,N1.getErrorMessage)(n)}`);return}}function Bdr(r,e){try{r.setStatus({status:"error",error:(0,N1.isError)(e)?e:void 0}),(0,qdr.isRestError)(e)&&e.statusCode&&r.setAttribute("http.status_code",e.statusCode),r.end()}catch(t){UQ.logger.warning(`Skipping tracing span processing due to an error: ${(0,N1.getErrorMessage)(t)}`)}}function Gdr(r,e){try{r.setAttribute("http.status_code",e.status);let t=e.headers.get("x-ms-request-id");t&&r.setAttribute("serviceRequestId",t),r.setStatus({status:"success"}),r.end()}catch(t){UQ.logger.warning(`Skipping tracing span processing due to an error: ${(0,N1.getErrorMessage)(t)}`)}}});var XJe=O(u_e=>{"use strict";Object.defineProperty(u_e,"__esModule",{value:!0});u_e.createPipelineFromOptions=tpr;var $dr=Bbe(),Vdr=Fbe(),Hdr=Gbe(),Wdr=Wbe(),QJe=Xbe(),Kdr=Jbe(),Qdr=r_e(),Ydr=s_e(),YJe=gs(),Xdr=o_e(),Jdr=a_e(),Zdr=c_e(),epr=l_e();function tpr(r){var e;let t=(0,Vdr.createEmptyPipeline)();return YJe.isNodeLike&&(r.tlsOptions&&t.addPolicy((0,Zdr.tlsPolicy)(r.tlsOptions)),t.addPolicy((0,Xdr.proxyPolicy)(r.proxyOptions)),t.addPolicy((0,Kdr.decompressResponsePolicy)())),t.addPolicy((0,Ydr.formDataPolicy)(),{beforePolicies:[QJe.multipartPolicyName]}),t.addPolicy((0,Wdr.userAgentPolicy)(r.userAgentOptions)),t.addPolicy((0,Jdr.setClientRequestIdPolicy)((e=r.telemetryOptions)===null||e===void 0?void 0:e.clientRequestIdHeaderName)),t.addPolicy((0,QJe.multipartPolicy)(),{afterPhase:"Deserialize"}),t.addPolicy((0,Qdr.defaultRetryPolicy)(r.retryOptions),{phase:"Retry"}),t.addPolicy((0,epr.tracingPolicy)(Object.assign(Object.assign({},r.userAgentOptions),r.loggingOptions)),{afterPhase:"Retry"}),YJe.isNodeLike&&t.addPolicy((0,Hdr.redirectPolicy)(r.redirectOptions),{afterPhase:"Retry"}),t.addPolicy((0,$dr.logPolicy)(r.loggingOptions),{afterPhase:"Sign"}),t}});var n7e=O(GQ=>{"use strict";Object.defineProperty(GQ,"__esModule",{value:!0});GQ.getBodyLength=r7e;GQ.createNodeHttpClient=cpr;var h_e=(E1(),da(w1)),d_e=h_e.__importStar(require("node:http")),p_e=h_e.__importStar(require("node:https")),JJe=h_e.__importStar(require("node:zlib")),rpr=require("node:stream"),ZJe=AQ(),npr=O1(),k1=jQ(),D1=aw(),ipr={};function M1(r){return r&&typeof r.pipe=="function"}function e7e(r){return new Promise(e=>{let t=()=>{e(),r.removeListener("close",t),r.removeListener("end",t),r.removeListener("error",t)};r.on("close",t),r.on("end",t),r.on("error",t)})}function t7e(r){return r&&typeof r.byteLength=="number"}var BQ=class extends rpr.Transform{_transform(e,t,n){this.push(e),this.loadedBytes+=e.length;try{this.progressCallback({loadedBytes:this.loadedBytes}),n()}catch(i){n(i)}}constructor(e){super(),this.loadedBytes=0,this.progressCallback=e}},m_e=class{constructor(){this.cachedHttpsAgents=new WeakMap}async sendRequest(e){var t,n,i;let s=new AbortController,o;if(e.abortSignal){if(e.abortSignal.aborted)throw new ZJe.AbortError("The operation was aborted.");o=d=>{d.type==="abort"&&s.abort()},e.abortSignal.addEventListener("abort",o)}e.timeout>0&&setTimeout(()=>{s.abort()},e.timeout);let a=e.headers.get("Accept-Encoding"),c=a?.includes("gzip")||a?.includes("deflate"),l=typeof e.body=="function"?e.body():e.body;if(l&&!e.headers.has("Content-Length")){let d=r7e(l);d!==null&&e.headers.set("Content-Length",d)}let u;try{if(l&&e.onUploadProgress){let v=e.onUploadProgress,_=new BQ(v);_.on("error",C=>{D1.logger.error("Error in upload progress",C)}),M1(l)?l.pipe(_):_.end(l),l=_}let d=await this.makeRequest(e,s,l),p=spr(d),f={status:(t=d.statusCode)!==null&&t!==void 0?t:0,headers:p,request:e};if(e.method==="HEAD")return d.resume(),f;u=c?opr(d,p):d;let y=e.onDownloadProgress;if(y){let v=new BQ(y);v.on("error",_=>{D1.logger.error("Error in download progress",_)}),u.pipe(v),u=v}return!((n=e.streamResponseStatusCodes)===null||n===void 0)&&n.has(Number.POSITIVE_INFINITY)||!((i=e.streamResponseStatusCodes)===null||i===void 0)&&i.has(f.status)?f.readableStreamBody=u:f.bodyAsText=await apr(u),f}finally{if(e.abortSignal&&o){let d=Promise.resolve();M1(l)&&(d=e7e(l));let p=Promise.resolve();M1(u)&&(p=e7e(u)),Promise.all([d,p]).then(()=>{var m;o&&((m=e.abortSignal)===null||m===void 0||m.removeEventListener("abort",o))}).catch(m=>{D1.logger.warning("Error when cleaning up abortListener on httpRequest",m)})}}}makeRequest(e,t,n){var i;let s=new URL(e.url),o=s.protocol!=="https:";if(o&&!e.allowInsecureConnection)throw new Error(`Cannot connect to ${e.url} while allowInsecureConnection is false.`);let c={agent:(i=e.agent)!==null&&i!==void 0?i:this.getOrCreateAgent(e,o),hostname:s.hostname,path:`${s.pathname}${s.search}`,port:s.port,method:e.method,headers:e.headers.toJSON({preserveCase:!0})};return new Promise((l,u)=>{let d=o?d_e.request(c,l):p_e.request(c,l);d.once("error",p=>{var m;u(new k1.RestError(p.message,{code:(m=p.code)!==null&&m!==void 0?m:k1.RestError.REQUEST_SEND_ERROR,request:e}))}),t.signal.addEventListener("abort",()=>{let p=new ZJe.AbortError("The operation was aborted.");d.destroy(p),u(p)}),n&&M1(n)?n.pipe(d):n?typeof n=="string"||Buffer.isBuffer(n)?d.end(n):t7e(n)?d.end(ArrayBuffer.isView(n)?Buffer.from(n.buffer):Buffer.from(n)):(D1.logger.error("Unrecognized body type",n),u(new k1.RestError("Unrecognized body type"))):d.end()})}getOrCreateAgent(e,t){var n;let i=e.disableKeepAlive;if(t)return i?d_e.globalAgent:(this.cachedHttpAgent||(this.cachedHttpAgent=new d_e.Agent({keepAlive:!0})),this.cachedHttpAgent);{if(i&&!e.tlsSettings)return p_e.globalAgent;let s=(n=e.tlsSettings)!==null&&n!==void 0?n:ipr,o=this.cachedHttpsAgents.get(s);return o&&o.options.keepAlive===!i||(D1.logger.info("No cached TLS Agent exist, creating a new Agent"),o=new p_e.Agent(Object.assign({keepAlive:!i},s)),this.cachedHttpsAgents.set(s,o)),o}}};function spr(r){let e=(0,npr.createHttpHeaders)();for(let t of Object.keys(r.headers)){let n=r.headers[t];Array.isArray(n)?n.length>0&&e.set(t,n[0]):n&&e.set(t,n)}return e}function opr(r,e){let t=e.get("Content-Encoding");if(t==="gzip"){let n=JJe.createGunzip();return r.pipe(n),n}else if(t==="deflate"){let n=JJe.createInflate();return r.pipe(n),n}return r}function apr(r){return new Promise((e,t)=>{let n=[];r.on("data",i=>{Buffer.isBuffer(i)?n.push(i):n.push(Buffer.from(i))}),r.on("end",()=>{e(Buffer.concat(n).toString("utf8"))}),r.on("error",i=>{i&&i?.name==="AbortError"?t(i):t(new k1.RestError(`Error reading response as text: ${i.message}`,{code:k1.RestError.PARSE_ERROR}))})})}function r7e(r){return r?Buffer.isBuffer(r)?r.length:M1(r)?null:t7e(r)?r.byteLength:typeof r=="string"?Buffer.from(r).length:null:0}function cpr(){return new m_e}});var i7e=O(f_e=>{"use strict";Object.defineProperty(f_e,"__esModule",{value:!0});f_e.createDefaultHttpClient=upr;var lpr=n7e();function upr(){return(0,lpr.createNodeHttpClient)()}});var s7e=O(y_e=>{"use strict";Object.defineProperty(y_e,"__esModule",{value:!0});y_e.createPipelineRequest=mpr;var dpr=O1(),ppr=gs(),g_e=class{constructor(e){var t,n,i,s,o,a,c;this.url=e.url,this.body=e.body,this.headers=(t=e.headers)!==null&&t!==void 0?t:(0,dpr.createHttpHeaders)(),this.method=(n=e.method)!==null&&n!==void 0?n:"GET",this.timeout=(i=e.timeout)!==null&&i!==void 0?i:0,this.multipartBody=e.multipartBody,this.formData=e.formData,this.disableKeepAlive=(s=e.disableKeepAlive)!==null&&s!==void 0?s:!1,this.proxySettings=e.proxySettings,this.streamResponseStatusCodes=e.streamResponseStatusCodes,this.withCredentials=(o=e.withCredentials)!==null&&o!==void 0?o:!1,this.abortSignal=e.abortSignal,this.tracingOptions=e.tracingOptions,this.onUploadProgress=e.onUploadProgress,this.onDownloadProgress=e.onDownloadProgress,this.requestId=e.requestId||(0,ppr.randomUUID)(),this.allowInsecureConnection=(a=e.allowInsecureConnection)!==null&&a!==void 0?a:!1,this.enableBrowserStreams=(c=e.enableBrowserStreams)!==null&&c!==void 0?c:!1}};function mpr(r){return new g_e(r)}});var o7e=O(L1=>{"use strict";Object.defineProperty(L1,"__esModule",{value:!0});L1.exponentialRetryPolicyName=void 0;L1.exponentialRetryPolicy=ypr;var hpr=LQ(),fpr=Bx(),gpr=b_();L1.exponentialRetryPolicyName="exponentialRetryPolicy";function ypr(r={}){var e;return(0,fpr.retryPolicy)([(0,hpr.exponentialRetryStrategy)(Object.assign(Object.assign({},r),{ignoreSystemErrors:!0}))],{maxRetries:(e=r.maxRetries)!==null&&e!==void 0?e:gpr.DEFAULT_RETRY_POLICY_COUNT})}});var a7e=O(Qx=>{"use strict";Object.defineProperty(Qx,"__esModule",{value:!0});Qx.systemErrorRetryPolicyName=void 0;Qx.systemErrorRetryPolicy=Spr;var vpr=LQ(),bpr=Bx(),_pr=b_();Qx.systemErrorRetryPolicyName="systemErrorRetryPolicy";function Spr(r={}){var e;return{name:Qx.systemErrorRetryPolicyName,sendRequest:(0,bpr.retryPolicy)([(0,vpr.exponentialRetryStrategy)(Object.assign(Object.assign({},r),{ignoreHttpStatusCodes:!0}))],{maxRetries:(e=r.maxRetries)!==null&&e!==void 0?e:_pr.DEFAULT_RETRY_POLICY_COUNT}).sendRequest}}});var c7e=O(Yx=>{"use strict";Object.defineProperty(Yx,"__esModule",{value:!0});Yx.throttlingRetryPolicyName=void 0;Yx.throttlingRetryPolicy=Epr;var Cpr=kQ(),Ppr=Bx(),wpr=b_();Yx.throttlingRetryPolicyName="throttlingRetryPolicy";function Epr(r={}){var e;return{name:Yx.throttlingRetryPolicyName,sendRequest:(0,Ppr.retryPolicy)([(0,Cpr.throttlingRetryStrategy)()],{maxRetries:(e=r.maxRetries)!==null&&e!==void 0?e:wpr.DEFAULT_RETRY_POLICY_COUNT}).sendRequest}}});var v_e=O(Xx=>{"use strict";Object.defineProperty(Xx,"__esModule",{value:!0});Xx.DEFAULT_CYCLER_OPTIONS=void 0;Xx.createTokenCycler=Rpr;var Tpr=DQ();Xx.DEFAULT_CYCLER_OPTIONS={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:1e3*60*2};async function Ipr(r,e,t){async function n(){if(Date.now()<t)try{return await r()}catch{return null}else{let s=await r();if(s===null)throw new Error("Failed to refresh access token.");return s}}let i=await n();for(;i===null;)await(0,Tpr.delay)(e),i=await n();return i}function Rpr(r,e){let t=null,n=null,i,s=Object.assign(Object.assign({},Xx.DEFAULT_CYCLER_OPTIONS),e),o={get isRefreshing(){return t!==null},get shouldRefresh(){var c;return o.isRefreshing?!1:n?.refreshAfterTimestamp&&n.refreshAfterTimestamp<Date.now()?!0:((c=n?.expiresOnTimestamp)!==null&&c!==void 0?c:0)-s.refreshWindowInMs<Date.now()},get mustRefresh(){return n===null||n.expiresOnTimestamp-s.forcedRefreshWindowInMs<Date.now()}};function a(c,l){var u;return o.isRefreshing||(t=Ipr(()=>r.getToken(c,l),s.retryIntervalInMs,(u=n?.expiresOnTimestamp)!==null&&u!==void 0?u:Date.now()).then(p=>(t=null,n=p,i=l.tenantId,n)).catch(p=>{throw t=null,n=null,i=void 0,p})),t}return async(c,l)=>{let u=!!l.claims,d=i!==l.tenantId;return u&&(n=null),d||u||o.mustRefresh?a(c,l):(o.shouldRefresh&&a(c,l),n)}}});var l7e=O(Jx=>{"use strict";Object.defineProperty(Jx,"__esModule",{value:!0});Jx.bearerTokenAuthenticationPolicyName=void 0;Jx.bearerTokenAuthenticationPolicy=Dpr;var xpr=v_e(),Opr=aw();Jx.bearerTokenAuthenticationPolicyName="bearerTokenAuthenticationPolicy";async function Apr(r){let{scopes:e,getAccessToken:t,request:n}=r,i={abortSignal:n.abortSignal,tracingOptions:n.tracingOptions},s=await t(e,i);s&&r.request.headers.set("Authorization",`Bearer ${s.token}`)}function Npr(r){let e=r.headers.get("WWW-Authenticate");if(r.status===401&&e)return e}function Dpr(r){var e;let{credential:t,scopes:n,challengeCallbacks:i}=r,s=r.logger||Opr.logger,o=Object.assign({authorizeRequest:(e=i?.authorizeRequest)!==null&&e!==void 0?e:Apr,authorizeRequestOnChallenge:i?.authorizeRequestOnChallenge},i),a=t?(0,xpr.createTokenCycler)(t):()=>Promise.resolve(null);return{name:Jx.bearerTokenAuthenticationPolicyName,async sendRequest(c,l){if(!c.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");await o.authorizeRequest({scopes:Array.isArray(n)?n:[n],request:c,getAccessToken:a,logger:s});let u,d;try{u=await l(c)}catch(p){d=p,u=p.response}if(o.authorizeRequestOnChallenge&&u?.status===401&&Npr(u)&&await o.authorizeRequestOnChallenge({scopes:Array.isArray(n)?n:[n],request:c,response:u,getAccessToken:a,logger:s}))return l(c);if(d)throw d;return u}}}});var u7e=O(Zx=>{"use strict";Object.defineProperty(Zx,"__esModule",{value:!0});Zx.ndJsonPolicyName=void 0;Zx.ndJsonPolicy=Mpr;Zx.ndJsonPolicyName="ndJsonPolicy";function Mpr(){return{name:Zx.ndJsonPolicyName,async sendRequest(r,e){if(typeof r.body=="string"&&r.body.startsWith("[")){let t=JSON.parse(r.body);Array.isArray(t)&&(r.body=t.map(n=>JSON.stringify(n)+`
`).join(""))}return e(r)}}}});var p7e=O(lw=>{"use strict";Object.defineProperty(lw,"__esModule",{value:!0});lw.auxiliaryAuthenticationHeaderPolicyName=void 0;lw.auxiliaryAuthenticationHeaderPolicy=zpr;var kpr=v_e(),Lpr=aw();lw.auxiliaryAuthenticationHeaderPolicyName="auxiliaryAuthenticationHeaderPolicy";var d7e="x-ms-authorization-auxiliary";async function qpr(r){var e,t;let{scopes:n,getAccessToken:i,request:s}=r,o={abortSignal:s.abortSignal,tracingOptions:s.tracingOptions};return(t=(e=await i(n,o))===null||e===void 0?void 0:e.token)!==null&&t!==void 0?t:""}function zpr(r){let{credentials:e,scopes:t}=r,n=r.logger||Lpr.logger,i=new WeakMap;return{name:lw.auxiliaryAuthenticationHeaderPolicyName,async sendRequest(s,o){if(!s.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication for auxiliary header is not permitted for non-TLS protected (non-https) URLs.");if(!e||e.length===0)return n.info(`${lw.auxiliaryAuthenticationHeaderPolicyName} header will not be set due to empty credentials.`),o(s);let a=[];for(let l of e){let u=i.get(l);u||(u=(0,kpr.createTokenCycler)(l),i.set(l,u)),a.push(qpr({scopes:Array.isArray(t)?t:[t],request:s,getAccessToken:u,logger:n}))}let c=(await Promise.all(a)).filter(l=>!!l);return c.length===0?(n.warning(`None of the auxiliary tokens are valid. ${d7e} header will not be set.`),o(s)):(s.headers.set(d7e,c.map(l=>`Bearer ${l}`).join(", ")),o(s))}}}});var eO=O(dr=>{"use strict";Object.defineProperty(dr,"__esModule",{value:!0});dr.createFileFromStream=dr.createFile=dr.auxiliaryAuthenticationHeaderPolicyName=dr.auxiliaryAuthenticationHeaderPolicy=dr.ndJsonPolicyName=dr.ndJsonPolicy=dr.bearerTokenAuthenticationPolicyName=dr.bearerTokenAuthenticationPolicy=dr.formDataPolicyName=dr.formDataPolicy=dr.tlsPolicyName=dr.tlsPolicy=dr.userAgentPolicyName=dr.userAgentPolicy=dr.defaultRetryPolicy=dr.tracingPolicyName=dr.tracingPolicy=dr.retryPolicy=dr.throttlingRetryPolicyName=dr.throttlingRetryPolicy=dr.systemErrorRetryPolicyName=dr.systemErrorRetryPolicy=dr.redirectPolicyName=dr.redirectPolicy=dr.getDefaultProxySettings=dr.proxyPolicyName=dr.proxyPolicy=dr.multipartPolicyName=dr.multipartPolicy=dr.logPolicyName=dr.logPolicy=dr.setClientRequestIdPolicyName=dr.setClientRequestIdPolicy=dr.exponentialRetryPolicyName=dr.exponentialRetryPolicy=dr.decompressResponsePolicyName=dr.decompressResponsePolicy=dr.isRestError=dr.RestError=dr.createPipelineRequest=dr.createHttpHeaders=dr.createDefaultHttpClient=dr.createPipelineFromOptions=dr.createEmptyPipeline=void 0;var Fpr=Fbe();Object.defineProperty(dr,"createEmptyPipeline",{enumerable:!0,get:function(){return Fpr.createEmptyPipeline}});var jpr=XJe();Object.defineProperty(dr,"createPipelineFromOptions",{enumerable:!0,get:function(){return jpr.createPipelineFromOptions}});var Upr=i7e();Object.defineProperty(dr,"createDefaultHttpClient",{enumerable:!0,get:function(){return Upr.createDefaultHttpClient}});var Bpr=O1();Object.defineProperty(dr,"createHttpHeaders",{enumerable:!0,get:function(){return Bpr.createHttpHeaders}});var Gpr=s7e();Object.defineProperty(dr,"createPipelineRequest",{enumerable:!0,get:function(){return Gpr.createPipelineRequest}});var m7e=jQ();Object.defineProperty(dr,"RestError",{enumerable:!0,get:function(){return m7e.RestError}});Object.defineProperty(dr,"isRestError",{enumerable:!0,get:function(){return m7e.isRestError}});var h7e=Jbe();Object.defineProperty(dr,"decompressResponsePolicy",{enumerable:!0,get:function(){return h7e.decompressResponsePolicy}});Object.defineProperty(dr,"decompressResponsePolicyName",{enumerable:!0,get:function(){return h7e.decompressResponsePolicyName}});var f7e=o7e();Object.defineProperty(dr,"exponentialRetryPolicy",{enumerable:!0,get:function(){return f7e.exponentialRetryPolicy}});Object.defineProperty(dr,"exponentialRetryPolicyName",{enumerable:!0,get:function(){return f7e.exponentialRetryPolicyName}});var g7e=a_e();Object.defineProperty(dr,"setClientRequestIdPolicy",{enumerable:!0,get:function(){return g7e.setClientRequestIdPolicy}});Object.defineProperty(dr,"setClientRequestIdPolicyName",{enumerable:!0,get:function(){return g7e.setClientRequestIdPolicyName}});var y7e=Bbe();Object.defineProperty(dr,"logPolicy",{enumerable:!0,get:function(){return y7e.logPolicy}});Object.defineProperty(dr,"logPolicyName",{enumerable:!0,get:function(){return y7e.logPolicyName}});var v7e=Xbe();Object.defineProperty(dr,"multipartPolicy",{enumerable:!0,get:function(){return v7e.multipartPolicy}});Object.defineProperty(dr,"multipartPolicyName",{enumerable:!0,get:function(){return v7e.multipartPolicyName}});var b_e=o_e();Object.defineProperty(dr,"proxyPolicy",{enumerable:!0,get:function(){return b_e.proxyPolicy}});Object.defineProperty(dr,"proxyPolicyName",{enumerable:!0,get:function(){return b_e.proxyPolicyName}});Object.defineProperty(dr,"getDefaultProxySettings",{enumerable:!0,get:function(){return b_e.getDefaultProxySettings}});var b7e=Gbe();Object.defineProperty(dr,"redirectPolicy",{enumerable:!0,get:function(){return b7e.redirectPolicy}});Object.defineProperty(dr,"redirectPolicyName",{enumerable:!0,get:function(){return b7e.redirectPolicyName}});var _7e=a7e();Object.defineProperty(dr,"systemErrorRetryPolicy",{enumerable:!0,get:function(){return _7e.systemErrorRetryPolicy}});Object.defineProperty(dr,"systemErrorRetryPolicyName",{enumerable:!0,get:function(){return _7e.systemErrorRetryPolicyName}});var S7e=c7e();Object.defineProperty(dr,"throttlingRetryPolicy",{enumerable:!0,get:function(){return S7e.throttlingRetryPolicy}});Object.defineProperty(dr,"throttlingRetryPolicyName",{enumerable:!0,get:function(){return S7e.throttlingRetryPolicyName}});var $pr=Bx();Object.defineProperty(dr,"retryPolicy",{enumerable:!0,get:function(){return $pr.retryPolicy}});var C7e=l_e();Object.defineProperty(dr,"tracingPolicy",{enumerable:!0,get:function(){return C7e.tracingPolicy}});Object.defineProperty(dr,"tracingPolicyName",{enumerable:!0,get:function(){return C7e.tracingPolicyName}});var Vpr=r_e();Object.defineProperty(dr,"defaultRetryPolicy",{enumerable:!0,get:function(){return Vpr.defaultRetryPolicy}});var P7e=Wbe();Object.defineProperty(dr,"userAgentPolicy",{enumerable:!0,get:function(){return P7e.userAgentPolicy}});Object.defineProperty(dr,"userAgentPolicyName",{enumerable:!0,get:function(){return P7e.userAgentPolicyName}});var w7e=c_e();Object.defineProperty(dr,"tlsPolicy",{enumerable:!0,get:function(){return w7e.tlsPolicy}});Object.defineProperty(dr,"tlsPolicyName",{enumerable:!0,get:function(){return w7e.tlsPolicyName}});var E7e=s_e();Object.defineProperty(dr,"formDataPolicy",{enumerable:!0,get:function(){return E7e.formDataPolicy}});Object.defineProperty(dr,"formDataPolicyName",{enumerable:!0,get:function(){return E7e.formDataPolicyName}});var T7e=l7e();Object.defineProperty(dr,"bearerTokenAuthenticationPolicy",{enumerable:!0,get:function(){return T7e.bearerTokenAuthenticationPolicy}});Object.defineProperty(dr,"bearerTokenAuthenticationPolicyName",{enumerable:!0,get:function(){return T7e.bearerTokenAuthenticationPolicyName}});var I7e=u7e();Object.defineProperty(dr,"ndJsonPolicy",{enumerable:!0,get:function(){return I7e.ndJsonPolicy}});Object.defineProperty(dr,"ndJsonPolicyName",{enumerable:!0,get:function(){return I7e.ndJsonPolicyName}});var R7e=p7e();Object.defineProperty(dr,"auxiliaryAuthenticationHeaderPolicy",{enumerable:!0,get:function(){return R7e.auxiliaryAuthenticationHeaderPolicy}});Object.defineProperty(dr,"auxiliaryAuthenticationHeaderPolicyName",{enumerable:!0,get:function(){return R7e.auxiliaryAuthenticationHeaderPolicyName}});var x7e=Kbe();Object.defineProperty(dr,"createFile",{enumerable:!0,get:function(){return x7e.createFile}});Object.defineProperty(dr,"createFileFromStream",{enumerable:!0,get:function(){return x7e.createFileFromStream}})});var O7e=O($Q=>{"use strict";Object.defineProperty($Q,"__esModule",{value:!0});$Q.state=void 0;$Q.state={operationRequestMap:new WeakMap}});var q1=O(tO=>{"use strict";Object.defineProperty(tO,"__esModule",{value:!0});tO.getOperationRequestInfo=tO.getOperationArgumentValueFromParameter=void 0;var A7e=O7e();function D7e(r,e,t){let n=e.parameterPath,i=e.mapper,s;if(typeof n=="string"&&(n=[n]),Array.isArray(n)){if(n.length>0)if(i.isConstant)s=i.defaultValue;else{let o=N7e(r,n);!o.propertyFound&&t&&(o=N7e(t,n));let a=!1;o.propertyFound||(a=i.required||n[0]==="options"&&n.length===2),s=a?i.defaultValue:o.propertyValue}}else{i.required&&(s={});for(let o in n){let a=i.type.modelProperties[o],c=n[o],l=D7e(r,{parameterPath:c,mapper:a},t);l!==void 0&&(s||(s={}),s[o]=l)}}return s}tO.getOperationArgumentValueFromParameter=D7e;function N7e(r,e){let t={propertyFound:!1},n=0;for(;n<e.length;++n){let i=e[n];if(r&&i in r)r=r[i];else break}return n===e.length&&(t.propertyValue=r,t.propertyFound=!0),t}var M7e=Symbol.for("@azure/core-client original request");function Hpr(r){return M7e in r}function k7e(r){if(Hpr(r))return k7e(r[M7e]);let e=A7e.state.operationRequestMap.get(r);return e||(e={},A7e.state.operationRequestMap.set(r,e)),e}tO.getOperationRequestInfo=k7e});var S_e=O(uw=>{"use strict";Object.defineProperty(uw,"__esModule",{value:!0});uw.deserializationPolicy=uw.deserializationPolicyName=void 0;var Wpr=T1(),VQ=eO(),L7e=I1(),__e=q1(),Kpr=["application/json","text/json"],Qpr=["application/xml","application/atom+xml"];uw.deserializationPolicyName="deserializationPolicy";function Ypr(r={}){var e,t,n,i,s,o,a;let c=(t=(e=r.expectedContentTypes)===null||e===void 0?void 0:e.json)!==null&&t!==void 0?t:Kpr,l=(i=(n=r.expectedContentTypes)===null||n===void 0?void 0:n.xml)!==null&&i!==void 0?i:Qpr,u=r.parseXML,d=r.serializerOptions,p={xml:{rootName:(s=d?.xml.rootName)!==null&&s!==void 0?s:"",includeRoot:(o=d?.xml.includeRoot)!==null&&o!==void 0?o:!1,xmlCharKey:(a=d?.xml.xmlCharKey)!==null&&a!==void 0?a:Wpr.XML_CHARKEY}};return{name:uw.deserializationPolicyName,async sendRequest(m,f){let y=await f(m);return Zpr(c,l,y,p,u)}}}uw.deserializationPolicy=Ypr;function Xpr(r){let e,t=r.request,n=(0,__e.getOperationRequestInfo)(t),i=n?.operationSpec;return i&&(n?.operationResponseGetter?e=n?.operationResponseGetter(i,r):e=i.responses[r.status]),e}function Jpr(r){let e=r.request,t=(0,__e.getOperationRequestInfo)(e),n=t?.shouldDeserialize,i;return n===void 0?i=!0:typeof n=="boolean"?i=n:i=n(r),i}async function Zpr(r,e,t,n,i){let s=await rmr(r,e,t,n,i);if(!Jpr(s))return s;let o=(0,__e.getOperationRequestInfo)(s.request),a=o?.operationSpec;if(!a||!a.responses)return s;let c=Xpr(s),{error:l,shouldReturnResponse:u}=tmr(s,a,c,n);if(l)throw l;if(u)return s;if(c){if(c.bodyMapper){let d=s.parsedBody;a.isXML&&c.bodyMapper.type.name===L7e.MapperTypeNames.Sequence&&(d=typeof d=="object"?d[c.bodyMapper.xmlElementName]:[]);try{s.parsedBody=a.serializer.deserialize(c.bodyMapper,d,"operationRes.parsedBody",n)}catch(p){throw new VQ.RestError(`Error ${p} occurred in deserializing the responseBody - ${s.bodyAsText}`,{statusCode:s.status,request:s.request,response:s})}}else a.httpMethod==="HEAD"&&(s.parsedBody=t.status>=200&&t.status<300);c.headersMapper&&(s.parsedHeaders=a.serializer.deserialize(c.headersMapper,s.headers.toJSON(),"operationRes.parsedHeaders",{xml:{},ignoreUnknownProperties:!0}))}return s}function emr(r){let e=Object.keys(r.responses);return e.length===0||e.length===1&&e[0]==="default"}function tmr(r,e,t,n){var i;let s=200<=r.status&&r.status<300;if(emr(e)?s:!!t)if(t){if(!t.isError)return{error:null,shouldReturnResponse:!1}}else return{error:null,shouldReturnResponse:!1};let a=t??e.responses.default,c=!((i=r.request.streamResponseStatusCodes)===null||i===void 0)&&i.has(r.status)?`Unexpected status code: ${r.status}`:r.bodyAsText,l=new VQ.RestError(c,{statusCode:r.status,request:r.request,response:r});if(!a)throw l;let u=a.bodyMapper,d=a.headersMapper;try{if(r.parsedBody){let p=r.parsedBody,m;if(u){let y=p;if(e.isXML&&u.type.name===L7e.MapperTypeNames.Sequence){y=[];let v=u.xmlElementName;typeof p=="object"&&v&&(y=p[v])}m=e.serializer.deserialize(u,y,"error.response.parsedBody",n)}let f=p.error||m||p;l.code=f.code,f.message&&(l.message=f.message),u&&(l.response.parsedBody=m)}r.headers&&d&&(l.response.parsedHeaders=e.serializer.deserialize(d,r.headers.toJSON(),"operationRes.parsedHeaders"))}catch(p){l.message=`Error "${p.message}" occurred in deserializing the responseBody - "${r.bodyAsText}" for the default response.`}return{error:l,shouldReturnResponse:!1}}async function rmr(r,e,t,n,i){var s;if(!(!((s=t.request.streamResponseStatusCodes)===null||s===void 0)&&s.has(t.status))&&t.bodyAsText){let o=t.bodyAsText,a=t.headers.get("Content-Type")||"",c=a?a.split(";").map(l=>l.toLowerCase()):[];try{if(c.length===0||c.some(l=>r.indexOf(l)!==-1))return t.parsedBody=JSON.parse(o),t;if(c.some(l=>e.indexOf(l)!==-1)){if(!i)throw new Error("Parsing XML not supported.");let l=await i(o,n.xml);return t.parsedBody=l,t}}catch(l){let u=`Error "${l}" occurred while parsing the response body - ${t.bodyAsText}.`,d=l.code||VQ.RestError.PARSE_ERROR;throw new VQ.RestError(u,{code:d,statusCode:t.status,request:t.request,response:t})}}return t}});var HQ=O(rO=>{"use strict";Object.defineProperty(rO,"__esModule",{value:!0});rO.getPathStringFromParameter=rO.getStreamingResponseStatusCodes=void 0;var nmr=I1();function imr(r){let e=new Set;for(let t in r.responses){let n=r.responses[t];n.bodyMapper&&n.bodyMapper.type.name===nmr.MapperTypeNames.Stream&&e.add(Number(t))}return e}rO.getStreamingResponseStatusCodes=imr;function smr(r){let{parameterPath:e,mapper:t}=r,n;return typeof e=="string"?n=e:Array.isArray(e)?n=e.join("."):n=t.serializedName,n}rO.getPathStringFromParameter=smr});var w_e=O(Xm=>{"use strict";Object.defineProperty(Xm,"__esModule",{value:!0});Xm.serializeRequestBody=Xm.serializeHeaders=Xm.serializationPolicy=Xm.serializationPolicyName=void 0;var P_e=T1(),WQ=q1(),C_e=I1(),z1=HQ();Xm.serializationPolicyName="serializationPolicy";function omr(r={}){let e=r.stringifyXML;return{name:Xm.serializationPolicyName,async sendRequest(t,n){let i=(0,WQ.getOperationRequestInfo)(t),s=i?.operationSpec,o=i?.operationArguments;return s&&o&&(q7e(t,o,s),z7e(t,o,s,e)),n(t)}}}Xm.serializationPolicy=omr;function q7e(r,e,t){var n,i;if(t.headerParameters)for(let o of t.headerParameters){let a=(0,WQ.getOperationArgumentValueFromParameter)(e,o);if(a!=null||o.mapper.required){a=t.serializer.serialize(o.mapper,a,(0,z1.getPathStringFromParameter)(o));let c=o.mapper.headerCollectionPrefix;if(c)for(let l of Object.keys(a))r.headers.set(c+l,a[l]);else r.headers.set(o.mapper.serializedName||(0,z1.getPathStringFromParameter)(o),a)}}let s=(i=(n=e.options)===null||n===void 0?void 0:n.requestOptions)===null||i===void 0?void 0:i.customHeaders;if(s)for(let o of Object.keys(s))r.headers.set(o,s[o])}Xm.serializeHeaders=q7e;function z7e(r,e,t,n=function(){throw new Error("XML serialization unsupported!")}){var i,s,o,a,c;let l=(i=e.options)===null||i===void 0?void 0:i.serializerOptions,u={xml:{rootName:(s=l?.xml.rootName)!==null&&s!==void 0?s:"",includeRoot:(o=l?.xml.includeRoot)!==null&&o!==void 0?o:!1,xmlCharKey:(a=l?.xml.xmlCharKey)!==null&&a!==void 0?a:P_e.XML_CHARKEY}},d=u.xml.xmlCharKey;if(t.requestBody&&t.requestBody.mapper){r.body=(0,WQ.getOperationArgumentValueFromParameter)(e,t.requestBody);let p=t.requestBody.mapper,{required:m,serializedName:f,xmlName:y,xmlElementName:v,xmlNamespace:_,xmlNamespacePrefix:C,nullable:P}=p,w=p.type.name;try{if(r.body!==void 0&&r.body!==null||P&&r.body===null||m){let R=(0,z1.getPathStringFromParameter)(t.requestBody);r.body=t.serializer.serialize(p,r.body,R,u);let I=w===C_e.MapperTypeNames.Stream;if(t.isXML){let z=C?`xmlns:${C}`:"xmlns",G=amr(_,z,w,r.body,u);w===C_e.MapperTypeNames.Sequence?r.body=n(cmr(G,v||y||f,z,_),{rootName:y||f,xmlCharKey:d}):I||(r.body=n(G,{rootName:y||f,xmlCharKey:d}))}else{if(w===C_e.MapperTypeNames.String&&(!((c=t.contentType)===null||c===void 0)&&c.match("text/plain")||t.mediaType==="text"))return;I||(r.body=JSON.stringify(r.body))}}}catch(R){throw new Error(`Error "${R.message}" occurred in serializing the payload - ${JSON.stringify(f,void 0,"  ")}.`)}}else if(t.formDataParameters&&t.formDataParameters.length>0){r.formData={};for(let p of t.formDataParameters){let m=(0,WQ.getOperationArgumentValueFromParameter)(e,p);if(m!=null){let f=p.mapper.serializedName||(0,z1.getPathStringFromParameter)(p);r.formData[f]=t.serializer.serialize(p.mapper,m,(0,z1.getPathStringFromParameter)(p),u)}}}}Xm.serializeRequestBody=z7e;function amr(r,e,t,n,i){if(r&&!["Composite","Sequence","Dictionary"].includes(t)){let s={};return s[i.xml.xmlCharKey]=n,s[P_e.XML_ATTRKEY]={[e]:r},s}return n}function cmr(r,e,t,n){if(Array.isArray(r)||(r=[r]),!t||!n)return{[e]:r};let i={[e]:r};return i[P_e.XML_ATTRKEY]={[t]:n},i}});var E_e=O(KQ=>{"use strict";Object.defineProperty(KQ,"__esModule",{value:!0});KQ.createClientPipeline=void 0;var lmr=S_e(),F7e=eO(),umr=w_e();function dmr(r={}){let e=(0,F7e.createPipelineFromOptions)(r??{});return r.credentialOptions&&e.addPolicy((0,F7e.bearerTokenAuthenticationPolicy)({credential:r.credentialOptions.credential,scopes:r.credentialOptions.credentialScopes})),e.addPolicy((0,umr.serializationPolicy)(r.serializationOptions),{phase:"Serialize"}),e.addPolicy((0,lmr.deserializationPolicy)(r.deserializationOptions),{phase:"Deserialize"}),e}KQ.createClientPipeline=dmr});var j7e=O(QQ=>{"use strict";Object.defineProperty(QQ,"__esModule",{value:!0});QQ.getCachedDefaultHttpClient=void 0;var pmr=eO(),T_e;function mmr(){return T_e||(T_e=(0,pmr.createDefaultHttpClient)()),T_e}QQ.getCachedDefaultHttpClient=mmr});var $7e=O(nO=>{"use strict";Object.defineProperty(nO,"__esModule",{value:!0});nO.appendQueryParams=nO.getRequestUrl=void 0;var B7e=q1(),I_e=HQ(),hmr={CSV:",",SSV:" ",Multi:"Multi",TSV:"	",Pipes:"|"};function fmr(r,e,t,n){let i=gmr(e,t,n),s=!1,o=U7e(r,i);if(e.path){let l=U7e(e.path,i);e.path==="/{nextLink}"&&l.startsWith("/")&&(l=l.substring(1)),ymr(l)?(o=l,s=!0):o=vmr(o,l)}let{queryParams:a,sequenceParams:c}=bmr(e,t,n);return o=G7e(o,a,c,s),o}nO.getRequestUrl=fmr;function U7e(r,e){let t=r;for(let[n,i]of e)t=t.split(n).join(i);return t}function gmr(r,e,t){var n;let i=new Map;if(!((n=r.urlParameters)===null||n===void 0)&&n.length)for(let s of r.urlParameters){let o=(0,B7e.getOperationArgumentValueFromParameter)(e,s,t),a=(0,I_e.getPathStringFromParameter)(s);o=r.serializer.serialize(s.mapper,o,a),s.skipEncoding||(o=encodeURIComponent(o)),i.set(`{${s.mapper.serializedName||a}}`,o)}return i}function ymr(r){return r.includes("://")}function vmr(r,e){if(!e)return r;let t=new URL(r),n=t.pathname;n.endsWith("/")||(n=`${n}/`),e.startsWith("/")&&(e=e.substring(1));let i=e.indexOf("?");if(i!==-1){let s=e.substring(0,i),o=e.substring(i+1);n=n+s,o&&(t.search=t.search?`${t.search}&${o}`:o)}else n=n+e;return t.pathname=n,t.toString()}function bmr(r,e,t){var n;let i=new Map,s=new Set;if(!((n=r.queryParameters)===null||n===void 0)&&n.length)for(let o of r.queryParameters){o.mapper.type.name==="Sequence"&&o.mapper.serializedName&&s.add(o.mapper.serializedName);let a=(0,B7e.getOperationArgumentValueFromParameter)(e,o,t);if(a!=null||o.mapper.required){a=r.serializer.serialize(o.mapper,a,(0,I_e.getPathStringFromParameter)(o));let c=o.collectionFormat?hmr[o.collectionFormat]:"";if(Array.isArray(a)&&(a=a.map(l=>l??"")),o.collectionFormat==="Multi"&&a.length===0)continue;Array.isArray(a)&&(o.collectionFormat==="SSV"||o.collectionFormat==="TSV")&&(a=a.join(c)),o.skipEncoding||(Array.isArray(a)?a=a.map(l=>encodeURIComponent(l)):a=encodeURIComponent(a)),Array.isArray(a)&&(o.collectionFormat==="CSV"||o.collectionFormat==="Pipes")&&(a=a.join(c)),i.set(o.mapper.serializedName||(0,I_e.getPathStringFromParameter)(o),a)}}return{queryParams:i,sequenceParams:s}}function _mr(r){let e=new Map;if(!r||r[0]!=="?")return e;r=r.slice(1);let t=r.split("&");for(let n of t){let[i,s]=n.split("=",2),o=e.get(i);o?Array.isArray(o)?o.push(s):e.set(i,[o,s]):e.set(i,s)}return e}function G7e(r,e,t,n=!1){if(e.size===0)return r;let i=new URL(r),s=_mr(i.search);for(let[a,c]of e){let l=s.get(a);if(Array.isArray(l))if(Array.isArray(c)){l.push(...c);let u=new Set(l);s.set(a,Array.from(u))}else l.push(c);else l?(Array.isArray(c)?c.unshift(l):t.has(a)&&s.set(a,[l,c]),n||s.set(a,c)):s.set(a,c)}let o=[];for(let[a,c]of s)if(typeof c=="string")o.push(`${a}=${c}`);else if(Array.isArray(c))for(let l of c)o.push(`${a}=${l}`);else o.push(`${a}=${c}`);return i.search=o.length?`?${o.join("&")}`:"",i.toString()}nO.appendQueryParams=G7e});var R_e=O(YQ=>{"use strict";Object.defineProperty(YQ,"__esModule",{value:!0});YQ.logger=void 0;var Smr=lu();YQ.logger=(0,Smr.createClientLogger)("core-client")});var H7e=O(XQ=>{"use strict";Object.defineProperty(XQ,"__esModule",{value:!0});XQ.ServiceClient=void 0;var Cmr=eO(),Pmr=E_e(),V7e=Mbe(),wmr=j7e(),Emr=q1(),Tmr=$7e(),Imr=HQ(),Rmr=R_e(),x_e=class{constructor(e={}){var t,n;if(this._requestContentType=e.requestContentType,this._endpoint=(t=e.endpoint)!==null&&t!==void 0?t:e.baseUri,e.baseUri&&Rmr.logger.warning("The baseUri option for SDK Clients has been deprecated, please use endpoint instead."),this._allowInsecureConnection=e.allowInsecureConnection,this._httpClient=e.httpClient||(0,wmr.getCachedDefaultHttpClient)(),this.pipeline=e.pipeline||xmr(e),!((n=e.additionalPolicies)===null||n===void 0)&&n.length)for(let{policy:i,position:s}of e.additionalPolicies){let o=s==="perRetry"?"Sign":void 0;this.pipeline.addPolicy(i,{afterPhase:o})}}async sendRequest(e){return this.pipeline.sendRequest(this._httpClient,e)}async sendOperationRequest(e,t){let n=t.baseUrl||this._endpoint;if(!n)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a endpoint string property that contains the base URL to use.");let i=(0,Tmr.getRequestUrl)(n,t,e,this),s=(0,Cmr.createPipelineRequest)({url:i});s.method=t.httpMethod;let o=(0,Emr.getOperationRequestInfo)(s);o.operationSpec=t,o.operationArguments=e;let a=t.contentType||this._requestContentType;a&&t.requestBody&&s.headers.set("Content-Type",a);let c=e.options;if(c){let l=c.requestOptions;l&&(l.timeout&&(s.timeout=l.timeout),l.onUploadProgress&&(s.onUploadProgress=l.onUploadProgress),l.onDownloadProgress&&(s.onDownloadProgress=l.onDownloadProgress),l.shouldDeserialize!==void 0&&(o.shouldDeserialize=l.shouldDeserialize),l.allowInsecureConnection&&(s.allowInsecureConnection=!0)),c.abortSignal&&(s.abortSignal=c.abortSignal),c.tracingOptions&&(s.tracingOptions=c.tracingOptions)}this._allowInsecureConnection&&(s.allowInsecureConnection=!0),s.streamResponseStatusCodes===void 0&&(s.streamResponseStatusCodes=(0,Imr.getStreamingResponseStatusCodes)(t));try{let l=await this.sendRequest(s),u=(0,V7e.flattenResponse)(l,t.responses[l.status]);return c?.onResponse&&c.onResponse(l,u),u}catch(l){if(typeof l=="object"&&l?.response){let u=l.response,d=(0,V7e.flattenResponse)(u,t.responses[l.statusCode]||t.responses.default);l.details=d,c?.onResponse&&c.onResponse(u,d,l)}throw l}}};XQ.ServiceClient=x_e;function xmr(r){let e=Omr(r),t=r.credential&&e?{credentialScopes:e,credential:r.credential}:void 0;return(0,Pmr.createClientPipeline)(Object.assign(Object.assign({},r),{credentialOptions:t}))}function Omr(r){if(r.credentialScopes)return r.credentialScopes;if(r.endpoint)return`${r.endpoint}/.default`;if(r.baseUri)return`${r.baseUri}/.default`;if(r.credential&&!r.credentialScopes)throw new Error("When using credentials, the ServiceClientOptions must contain either a endpoint or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy")}});var K7e=O(iO=>{"use strict";Object.defineProperty(iO,"__esModule",{value:!0});iO.authorizeRequestOnClaimChallenge=iO.parseCAEChallenge=void 0;var Amr=R_e(),Nmr=Dbe();function W7e(r){return`, ${r.trim()}`.split(", Bearer ").filter(t=>t).map(t=>`${t.trim()}, `.split('", ').filter(s=>s).map(s=>(([o,a])=>({[o]:a}))(s.trim().split('="'))).reduce((s,o)=>Object.assign(Object.assign({},s),o),{}))}iO.parseCAEChallenge=W7e;async function Dmr(r){let{scopes:e,response:t}=r,n=r.logger||Amr.logger,i=t.headers.get("WWW-Authenticate");if(!i)return n.info("The WWW-Authenticate header was missing. Failed to perform the Continuous Access Evaluation authentication flow."),!1;let o=(W7e(i)||[]).find(c=>c.claims);if(!o)return n.info('The WWW-Authenticate header was missing the necessary "claims" to perform the Continuous Access Evaluation authentication flow.'),!1;let a=await r.getAccessToken(o.scope?[o.scope]:e,{claims:(0,Nmr.decodeStringToString)(o.claims)});return a?(r.request.headers.set("Authorization",`Bearer ${a.token}`),!0):!1}iO.authorizeRequestOnClaimChallenge=Dmr});var Y7e=O(JQ=>{"use strict";Object.defineProperty(JQ,"__esModule",{value:!0});JQ.authorizeRequestOnTenantChallenge=void 0;var Q7e={DefaultScope:"/.default",HeaderConstants:{AUTHORIZATION:"authorization"}};function Mmr(r){return/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/.test(r)}var kmr=async r=>{let e=jmr(r.request),t=zmr(r.response);if(t){let n=Fmr(t),i=qmr(r,n),s=Lmr(n);if(!s)return!1;let o=await r.getAccessToken(i,Object.assign(Object.assign({},e),{tenantId:s}));return o?(r.request.headers.set(Q7e.HeaderConstants.AUTHORIZATION,`Bearer ${o.token}`),!0):!1}return!1};JQ.authorizeRequestOnTenantChallenge=kmr;function Lmr(r){let n=new URL(r.authorization_uri).pathname.split("/")[1];if(n&&Mmr(n))return n}function qmr(r,e){if(!e.resource_id)return r.scopes;let t=new URL(e.resource_id);t.pathname=Q7e.DefaultScope;let n=t.toString();return n==="https://disk.azure.com/.default"&&(n="https://disk.azure.com//.default"),[n]}function zmr(r){let e=r.headers.get("WWW-Authenticate");if(r.status===401&&e)return e}function Fmr(r){return`${r.slice(7).trim()} `.split(" ").filter(i=>i).map(i=>(([s,o])=>({[s]:o}))(i.trim().split("="))).reduce((i,s)=>Object.assign(Object.assign({},i),s),{})}function jmr(r){return{abortSignal:r.abortSignal,requestOptions:{timeout:r.timeout},tracingOptions:r.tracingOptions}}});var tZe=O($s=>{"use strict";Object.defineProperty($s,"__esModule",{value:!0});$s.authorizeRequestOnTenantChallenge=$s.authorizeRequestOnClaimChallenge=$s.serializationPolicyName=$s.serializationPolicy=$s.deserializationPolicyName=$s.deserializationPolicy=$s.XML_CHARKEY=$s.XML_ATTRKEY=$s.createClientPipeline=$s.ServiceClient=$s.MapperTypeNames=$s.createSerializer=void 0;var X7e=I1();Object.defineProperty($s,"createSerializer",{enumerable:!0,get:function(){return X7e.createSerializer}});Object.defineProperty($s,"MapperTypeNames",{enumerable:!0,get:function(){return X7e.MapperTypeNames}});var Umr=H7e();Object.defineProperty($s,"ServiceClient",{enumerable:!0,get:function(){return Umr.ServiceClient}});var Bmr=E_e();Object.defineProperty($s,"createClientPipeline",{enumerable:!0,get:function(){return Bmr.createClientPipeline}});var J7e=T1();Object.defineProperty($s,"XML_ATTRKEY",{enumerable:!0,get:function(){return J7e.XML_ATTRKEY}});Object.defineProperty($s,"XML_CHARKEY",{enumerable:!0,get:function(){return J7e.XML_CHARKEY}});var Z7e=S_e();Object.defineProperty($s,"deserializationPolicy",{enumerable:!0,get:function(){return Z7e.deserializationPolicy}});Object.defineProperty($s,"deserializationPolicyName",{enumerable:!0,get:function(){return Z7e.deserializationPolicyName}});var eZe=w_e();Object.defineProperty($s,"serializationPolicy",{enumerable:!0,get:function(){return eZe.serializationPolicy}});Object.defineProperty($s,"serializationPolicyName",{enumerable:!0,get:function(){return eZe.serializationPolicyName}});var Gmr=K7e();Object.defineProperty($s,"authorizeRequestOnClaimChallenge",{enumerable:!0,get:function(){return Gmr.authorizeRequestOnClaimChallenge}});var $mr=Y7e();Object.defineProperty($s,"authorizeRequestOnTenantChallenge",{enumerable:!0,get:function(){return $mr.authorizeRequestOnTenantChallenge}})});var nZe=O(Lf=>{"use strict";var Jm=Lf&&Lf.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})},Vmr=Lf&&Lf.__asyncValues||function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof __values=="function"?__values(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=r[s]&&function(o){return new Promise(function(a,c){o=r[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}};Object.defineProperty(Lf,"__esModule",{value:!0});Lf.AzureDevOpsSubscriptionProvider=Lf.createAzureDevOpsSubscriptionProviderFactory=void 0;var rZe=require("vscode"),Hmr=Aq(),F1;function Wmr(r){return()=>Jm(this,void 0,void 0,function*(){return F1??(F1=new ZQ(r)),F1})}Lf.createAzureDevOpsSubscriptionProviderFactory=Wmr;var ZQ=class{constructor({serviceConnectionId:e,domain:t,clientId:n}){if(this.onDidSignIn=()=>new rZe.Disposable(()=>{}),this.onDidSignOut=()=>new rZe.Disposable(()=>{}),!e||!t||!n)throw new Error(`Missing initializer values to identify Azure DevOps federated service connection

                Values provided:

                serviceConnectionId: ${e?"\u2705":"\u274C"}

                domain: ${t?"\u2705":"\u274C"}

                clientId: ${n?"\u2705":"\u274C"}

            `);this._SERVICE_CONNECTION_ID=e,this._DOMAIN=t,this._CLIENT_ID=n}getSubscriptions(e){return Jm(this,void 0,void 0,function*(){let t=[];for(let i of yield this.getTenants()){let s=i.tenantId;t.push(...yield this.getSubscriptionsForTenant(s))}return(i=>i.sort((s,o)=>s.name.localeCompare(o.name)))(t)})}isSignedIn(){return Jm(this,void 0,void 0,function*(){return!!this._tokenCredential})}signIn(){return Jm(this,void 0,void 0,function*(){return this._tokenCredential=yield Kmr(this._SERVICE_CONNECTION_ID,this._DOMAIN,this._CLIENT_ID),!!this._tokenCredential})}signOut(){return Jm(this,void 0,void 0,function*(){this._tokenCredential=void 0})}getTenants(){var e;return Jm(this,void 0,void 0,function*(){return[{tenantId:(e=this._tokenCredential)===null||e===void 0?void 0:e.tenantId,account:{id:"test-account-id",label:"test-account"}}]})}getSubscriptionsForTenant(e){var t,n,i,s;return Jm(this,void 0,void 0,function*(){let{client:o,credential:a,authentication:c}=yield this.getSubscriptionClient(e),l=(0,Hmr.getConfiguredAzureEnv)(),u=[];try{for(var d=!0,p=Vmr(o.subscriptions.list()),m;m=yield p.next(),t=m.done,!t;){s=m.value,d=!1;try{let f=s;u.push({authentication:c,environment:l,credential:a,isCustomCloud:l.isCustomCloud,name:f.displayName,subscriptionId:f.subscriptionId,tenantId:e,account:{id:"test-account-id",label:"test-account"}})}finally{d=!0}}}catch(f){n={error:f}}finally{try{!d&&!t&&(i=p.return)&&(yield i.call(p))}finally{if(n)throw n.error}}return u})}getSubscriptionClient(e,t){var n,i;return Jm(this,void 0,void 0,function*(){let s=yield Promise.resolve().then(()=>uye());if(!this._tokenCredential)throw new Error("Not signed in");let o=((i=yield(n=this._tokenCredential)===null||n===void 0?void 0:n.getToken("https://management.azure.com/.default"))===null||i===void 0?void 0:i.token)||"",a=()=>{var c,l,u,d;return{accessToken:o,id:((c=this._tokenCredential)===null||c===void 0?void 0:c.tenantId)||"",account:{id:((l=this._tokenCredential)===null||l===void 0?void 0:l.tenantId)||"",label:((u=this._tokenCredential)===null||u===void 0?void 0:u.tenantId)||""},tenantId:((d=this._tokenCredential)===null||d===void 0?void 0:d.tenantId)||"",scopes:t||[]}};return{client:new s.SubscriptionClient(this._tokenCredential),credential:this._tokenCredential,authentication:{getSession:a,getSessionWithScopes:a}}})}};Lf.AzureDevOpsSubscriptionProvider=ZQ;function Kmr(r,e,t){return Jm(this,void 0,void 0,function*(){if(process.env.AGENT_BUILDDIRECTORY){console.log("Creating DevOps federated service connection credential for service connection..");let n=process.env.SYSTEM_ACCESSTOKEN,i=process.env.SYSTEM_TEAMFOUNDATIONCOLLECTIONURI,s=process.env.SYSTEM_TEAMPROJECTID,o=process.env.SYSTEM_PLANID,a=process.env.SYSTEM_JOBID;if(!n||!i||!s||!o||!a)throw new Error(`Azure DevOps environment variables are not set.

            process.env.SYSTEM_ACCESSTOKEN: ${process.env.SYSTEM_ACCESSTOKEN?"\u2705":"\u274C"}

            process.env.SYSTEM_TEAMFOUNDATIONCOLLECTIONURI: ${process.env.SYSTEM_TEAMFOUNDATIONCOLLECTIONURI?"\u2705":"\u274C"}

            process.env.SYSTEM_TEAMPROJECTID: ${process.env.SYSTEM_TEAMPROJECTID?"\u2705":"\u274C"}

            process.env.SYSTEM_PLANID: ${process.env.SYSTEM_PLANID?"\u2705":"\u274C"}

            process.env.SYSTEM_JOBID: ${process.env.SYSTEM_JOBID?"\u2705":"\u274C"}

            REMEMBER: process.env.SYSTEM_ACCESSTOKEN must be explicitly mapped!

            https://learn.microsoft.com/en-us/azure/devops/pipelines/build/variables?view=azure-devops&tabs=yaml#systemaccesstoken
        `);let c=`${i}${s}/_apis/distributedtask/hubs/build/plans/${o}/jobs/${a}/oidctoken?api-version=7.1-preview.1&serviceConnectionId=${r}`,{ClientAssertionCredential:l}=yield Promise.resolve().then(()=>VXe());return new l(e,t,()=>Jm(this,void 0,void 0,function*(){return yield Qmr(c,n)}))}else throw new Error("Cannot create DevOps federated service connection credential outside of an Azure DevOps pipeline.")})}function Qmr(r,e){var t;return Jm(this,void 0,void 0,function*(){let{ServiceClient:n}=yield Promise.resolve().then(()=>tZe()),{createHttpHeaders:i,createPipelineRequest:s}=yield Promise.resolve().then(()=>eO()),o=new n,a=s({url:r,method:"POST",headers:i({"Content-Type":"application/json",Authorization:`Bearer ${e}`})}),c=yield o.sendRequest(a),l=((t=c.bodyAsText)===null||t===void 0?void 0:t.toString())||"";if(c.status!==200)throw new Error(`Failed to get OIDC token:

            Response status: ${c.status}

            Response body: ${l}

            Response headers: ${JSON.stringify(c.headers.toJSON())}
        `);return console.log(`Successfully got OIDC token with status ${c.status}`),JSON.parse(l).oidcToken})}});var sZe=O(iZe=>{"use strict";Object.defineProperty(iZe,"__esModule",{value:!0})});var aZe=O(oZe=>{"use strict";Object.defineProperty(oZe,"__esModule",{value:!0})});var lZe=O(cZe=>{"use strict";Object.defineProperty(cZe,"__esModule",{value:!0})});var A_e=O(sO=>{"use strict";Object.defineProperty(sO,"__esModule",{value:!0});sO.isNotSignedInError=sO.NotSignedInError=void 0;var Ymr=require("vscode"),O_e=class extends Error{constructor(){super(Ymr.l10n.t("You are not signed in to an Azure account. Please sign in.")),this.isNotSignedInError=!0}};sO.NotSignedInError=O_e;function Xmr(r){return!!r&&typeof r=="object"&&r.isNotSignedInError===!0}sO.isNotSignedInError=Xmr});var N_e=O(__=>{"use strict";var Jmr=__&&__.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})},Zmr=__&&__.__asyncValues||function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof __values=="function"?__values(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=r[s]&&function(o){return new Promise(function(a,c){o=r[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}};Object.defineProperty(__,"__esModule",{value:!0});__.getUnauthenticatedTenants=void 0;function ehr(r){var e,t,n,i;return Jmr(this,void 0,void 0,function*(){let s=yield r.getTenants(),o=[];try{for(var a=!0,c=Zmr(s),l;l=yield c.next(),e=l.done,!e;){i=l.value,a=!1;try{let u=i;(yield r.isSignedIn(u.tenantId,u.account))||o.push(u)}finally{a=!0}}}catch(u){t={error:u}}finally{try{!a&&!e&&(n=c.return)&&(yield n.call(c))}finally{if(t)throw t.error}}return o})}__.getUnauthenticatedTenants=ehr});var uZe=O(oO=>{"use strict";var D_e=oO&&oO.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})};Object.defineProperty(oO,"__esModule",{value:!0});oO.signInToTenant=void 0;var thr=require("vscode"),rhr=N_e();function nhr(r){return D_e(this,void 0,void 0,function*(){let e=yield ihr(r);e&&(yield r.signIn(e))})}oO.signInToTenant=nhr;function ihr(r){return D_e(this,void 0,void 0,function*(){let e=yield thr.window.showQuickPick(shr(r),{placeHolder:"Select a Tenant (Directory) to Sign In To",matchOnDescription:!0,ignoreFocusOut:!0});return e?.tenant.tenantId})}function shr(r){return D_e(this,void 0,void 0,function*(){let e=yield(0,rhr.getUnauthenticatedTenants)(r),t=new Set(e.filter((s,o,a)=>o!==a.findIndex(c=>c.tenantId===s.tenantId)).map(s=>s.tenantId)),n=s=>t.has(s);return e.sort((s,o)=>s.displayName.localeCompare(o.displayName)).map(s=>{var o,a;return{label:(o=s.displayName)!==null&&o!==void 0?o:"",description:`${s.tenantId}${n(s.tenantId)?` (${s.account.label})`:""}`,detail:(a=s.defaultDomain)!==null&&a!==void 0?a:"",tenant:s}})})}});var pZe=O(aO=>{"use strict";var ohr=aO&&aO.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})};Object.defineProperty(aO,"__esModule",{value:!0});aO.getSessionFromVSCode=void 0;var ahr=require("vscode"),dZe=Aq();function chr(r){return r.endsWith("/")?r:`${r}/`}function lhr(r){(r===void 0||r===""||r.length===0)&&(r=chr((0,dZe.getConfiguredAzureEnv)().managementEndpointUrl));let e=(Array.isArray(r)?r:[r]).map(t=>t.endsWith(".default")?t:`${t}.default`);return Array.from(new Set(e))}function uhr(r,e){let t=new Set(r);return t.add(`VSCODE_TENANT:${e}`),Array.from(t)}function dhr(r,e){let t=lhr(r);return e&&(t=uhr(t,e)),t}function phr(r,e,t){return ohr(this,void 0,void 0,function*(){return yield ahr.authentication.getSession((0,dZe.getConfiguredAuthProviderId)(),dhr(r,e),t)})}aO.getSessionFromVSCode=phr});var hZe=O(S_=>{"use strict";var Mp=S_&&S_.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})},M_e=S_&&S_.__asyncValues||function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof __values=="function"?__values(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=r[s]&&function(o){return new Promise(function(a,c){o=r[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}};Object.defineProperty(S_,"__esModule",{value:!0});S_.VSCodeAzureSubscriptionProvider=void 0;var qf=require("vscode"),eY=pZe(),mhr=A_e(),cO=Aq(),mZe=5*1e3,k_e=class extends qf.Disposable{constructor(e){let t=qf.authentication.onDidChangeSessions(n=>Mp(this,void 0,void 0,function*(){n.provider.id===(0,cO.getConfiguredAuthProviderId)()&&((yield this.isSignedIn())?!this.suppressSignInEvents&&Date.now()>this.lastSignInEventFired+mZe&&(this.lastSignInEventFired=Date.now(),this.onDidSignInEmitter.fire()):Date.now()>this.lastSignOutEventFired+mZe&&(this.lastSignOutEventFired=Date.now(),this.onDidSignOutEmitter.fire()))}));super(()=>{this.onDidSignInEmitter.dispose(),this.onDidSignOutEmitter.dispose(),t.dispose()}),this.logger=e,this.onDidSignInEmitter=new qf.EventEmitter,this.lastSignInEventFired=0,this.suppressSignInEvents=!1,this.onDidSignOutEmitter=new qf.EventEmitter,this.lastSignOutEventFired=0,this.onDidSignIn=this.onDidSignInEmitter.event,this.onDidSignOut=this.onDidSignOutEmitter.event}getTenants(e){var t,n,i,s,o,a,c,l,u;return Mp(this,void 0,void 0,function*(){let d=Date.now(),p=[];try{for(var m=!0,f=M_e(e?[e]:yield qf.authentication.getAccounts((0,cO.getConfiguredAuthProviderId)())),y;y=yield f.next(),t=y.done,!t;){s=y.value,m=!1;try{if(e=s,yield this.isSignedIn(void 0,e)){let{client:w}=yield this.getSubscriptionClient(e,void 0,void 0);try{for(var v=!0,_=(a=void 0,M_e(w.tenants.list())),C;C=yield _.next(),o=C.done,!o;){l=C.value,v=!1;try{let R=l;p.push(Object.assign(Object.assign({},R),{account:e}))}finally{v=!0}}}catch(R){a={error:R}}finally{try{!v&&!o&&(c=_.return)&&(yield c.call(_))}finally{if(a)throw a.error}}}}finally{m=!0}}}catch(w){n={error:w}}finally{try{!m&&!t&&(i=f.return)&&(yield i.call(f))}finally{if(n)throw n.error}}let P=Date.now();return(u=this.logger)===null||u===void 0||u.debug(`auth: Got ${p.length} tenants for account "${e?.label}" in ${P-d}ms`),p})}getSubscriptions(e=!0){var t,n;return Mp(this,void 0,void 0,function*(){(t=this.logger)===null||t===void 0||t.debug("auth: Loading subscriptions...");let i=Date.now(),s=yield this.getTenantFilters(),o=typeof e=="object"&&e.tenantId?[e.tenantId]:e===!0&&s.length>0?s:void 0,a=[],c;try{this.suppressSignInEvents=!0;let f=typeof e=="object"&&e.account?[e.account]:yield qf.authentication.getAccounts((0,cO.getConfiguredAuthProviderId)());c=f.length;for(let y of f){for(let v of yield this.getTenants(y)){let _=v.tenantId;o?.includes(_)!==!1&&a.push(...yield this.getSubscriptionsForTenant(y,_))}a.push(...yield this.getSubscriptionsForTenant(y))}}finally{this.suppressSignInEvents=!1}let l=new Map;a.forEach(f=>l.set(`${f.account.id}/${f.subscriptionId}`,f));let u=Array.from(l.values()),d=Date.now();(n=this.logger)===null||n===void 0||n.debug(`auth: Got ${u.length} subscriptions from ${c} accounts in ${d-i}ms`);let p=f=>f.sort((y,v)=>y.name.localeCompare(v.name)),m=yield this.getSubscriptionFilters();return e===!0&&m.length?p(u.filter(f=>m.includes(f.subscriptionId))):p(u)})}isSignedIn(e,t){var n,i;return Mp(this,void 0,void 0,function*(){function s(c,l){return Mp(this,void 0,void 0,function*(){return!!(yield(0,eY.getSessionFromVSCode)([],c,{createIfNone:!1,silent:!0,account:l}))})}let a=yield Mp(this,void 0,void 0,function*(){if(!t&&!e){let c=yield qf.authentication.getAccounts((0,cO.getConfiguredAuthProviderId)());if(c.length===0)return!1;for(let l of c)if(yield s(e,l))return!0}return s(e,t)});return(n=this.logger)===null||n===void 0||n.trace(`auth: isSignedIn returned ${a} (account="${(i=t?.label)!==null&&i!==void 0?i:"none"}") (tenantId="${e??"none"}")`),a})}signIn(e,t){var n,i;return Mp(this,void 0,void 0,function*(){return(n=this.logger)===null||n===void 0||n.debug(`auth: Signing in (account="${(i=t?.label)!==null&&i!==void 0?i:"none"}") (tenantId="${e??"none"}")`),!!(yield(0,eY.getSessionFromVSCode)([],e,{createIfNone:!0,clearSessionPreference:!t,account:t}))})}signOut(){throw new Error(qf.l10n.t("Signing out programmatically is not supported. You must sign out by selecting the account in the Accounts menu and choosing Sign Out."))}getTenantFilters(){return Mp(this,void 0,void 0,function*(){return qf.workspace.getConfiguration("azureResourceGroups").get("selectedSubscriptions",[]).map(n=>n.split("/")[0])})}getSubscriptionFilters(){return Mp(this,void 0,void 0,function*(){return qf.workspace.getConfiguration("azureResourceGroups").get("selectedSubscriptions",[]).map(n=>n.split("/")[1])})}getSubscriptionsForTenant(e,t){var n,i,s,o;return Mp(this,void 0,void 0,function*(){if(!(yield this.isSignedIn(t,e)))return[];let{client:a,credential:c,authentication:l}=yield this.getSubscriptionClient(e,t,void 0),u=(0,cO.getConfiguredAzureEnv)(),d=[];try{for(var p=!0,m=M_e(a.subscriptions.list()),f;f=yield m.next(),n=f.done,!n;){o=f.value,p=!1;try{let y=o;d.push({authentication:l,environment:u,credential:c,isCustomCloud:u.isCustomCloud,name:y.displayName,subscriptionId:y.subscriptionId,tenantId:t??y.tenantId,account:e})}finally{p=!0}}}catch(y){i={error:y}}finally{try{!p&&!n&&(s=m.return)&&(yield s.call(m))}finally{if(i)throw i.error}}return d})}getSubscriptionClient(e,t,n){return Mp(this,void 0,void 0,function*(){let i=yield Promise.resolve().then(()=>uye()),s=yield(0,eY.getSessionFromVSCode)(n,t,{createIfNone:!1,silent:!0,account:e});if(!s)throw new mhr.NotSignedInError;let o={getToken:()=>Mp(this,void 0,void 0,function*(){return{token:s.accessToken,expiresOnTimestamp:0}})},c=(0,cO.getConfiguredAzureEnv)().resourceManagerEndpointUrl;return{client:new i.SubscriptionClient(o,{endpoint:c}),credential:o,authentication:{getSession:()=>s,getSessionWithScopes:l=>(0,eY.getSessionFromVSCode)(l,t,{createIfNone:!1,silent:!0,account:e})}}})}};S_.VSCodeAzureSubscriptionProvider=k_e});var L_e=O(vl=>{"use strict";var hhr=vl&&vl.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),zf=vl&&vl.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&hhr(e,r,t)};Object.defineProperty(vl,"__esModule",{value:!0});zf(H4e(),vl);zf(nZe(),vl);zf(sZe(),vl);zf(aZe(),vl);zf(lZe(),vl);zf(A_e(),vl);zf(uZe(),vl);zf(Aq(),vl);zf(N_e(),vl);zf(hZe(),vl)});var kZe=O(hY=>{function DZe(r,e){if(r===e)return!0;if(!r||!e)return!1;var t=r.length;if(e.length!==t)return!1;for(var n=0;n<t;n++)if(r[n]!==e[n])return!1;return!0}function MZe(r,e){if(r===e)return!0;if(!r||!e)return!1;var t=Object.keys(r),n=Object.keys(e),i=t.length;if(n.length!==i)return!1;for(var s=0;s<i;s++){var o=t[s];if(r[o]!==e[o]||!Object.prototype.hasOwnProperty.call(e,o))return!1}return!0}function Mhr(r,e){var t=Array.isArray(r),n=Array.isArray(e);return t!==n?!1:t&&n?DZe(r,e):MZe(r,e)}hY.shallowEqual=Mhr;hY.shallowEqualArrays=DZe;hY.shallowEqualObjects=MZe});var cfr={};Ea(cfr,{activate:()=>sfr,controller:()=>ai,deactivate:()=>ofr,getController:()=>afr});module.exports=da(cfr);var Uf=ge(require("vscode"));var rtt=ge(require("events")),QY=ge(require("fs")),mO=ge(require("path")),Lt=ge(require("vscode"));var $ke=ge(nX()),Vke=ge(xxe()),Hke=ge(Kxe()),RG=ge(require("path")),Aie=ge(require("os")),oC=ge(require("vscode"));var xAe=ge(Vi()),Sm=(t=>(t[t.AuthCodeGrant=0]="AuthCodeGrant",t[t.DeviceCode=1]="DeviceCode",t))(Sm||{});var sne;(e=>e.type=new xAe.RequestType("account/securityTokenRequest"))(sne||={});var HB="Code";var OAe="mssql",AAe="Azure Accounts",NAe="Home";var one="accounts",iLt="auth",ane="azure",DAe="azureAccountProviderCredentials",sLt="cloud",oLt="clearTokenCache",aLt="config",cLt="mssql",lLt="tenant",cne="enableSqlAuthenticationProvider",MAe="enableConnectionPooling",ebr=cLt+"."+cne,tbr=one+"."+oLt,kAe=one+"."+ane+"."+iLt,rbr=one+"."+ane+"."+sLt,nbr=ane+"."+lLt+"."+aLt,LAe="azureTokenCacheMsal-azure_publicCloud",WB="AADSTS70043",KB="AADSTS50173",QB="AADSTS50020",qAe="User account '{0}' not found in MSAL cache, please add linked account or refresh account credentials.",zAe="User account not received.",FAe="no_account_in_silent_request",jAe="multiple_matching_tokens",UAe="2.0";var BAe="S256",GAe="select_account",$Ae={id:"common",displayName:"common"},YB={id:"organizations",displayName:"organizations"};var cT=class{constructor(e){this._token=e}getToken(e,t){return Promise.resolve({token:this._token.token,expiresOnTimestamp:this._token.expiresOn||0})}};var Gke=ge(require("vscode")),qv=ge(YAe()),IG=ge(require("url"));function ID(r,e){return function(){return r.apply(e,arguments)}}var{toString:yLt}=Object.prototype,{getPrototypeOf:pne}=Object,JB=(r=>e=>{let t=yLt.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Cm=r=>(r=r.toLowerCase(),e=>JB(e)===r),ZB=r=>e=>typeof e===r,{isArray:uT}=Array,RD=ZB("undefined");function vLt(r){return r!==null&&!RD(r)&&r.constructor!==null&&!RD(r.constructor)&&Yu(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}var JAe=Cm("ArrayBuffer");function bLt(r){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&JAe(r.buffer),e}var _Lt=ZB("string"),Yu=ZB("function"),ZAe=ZB("number"),eG=r=>r!==null&&typeof r=="object",SLt=r=>r===!0||r===!1,XB=r=>{if(JB(r)!=="object")return!1;let e=pne(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},CLt=Cm("Date"),PLt=Cm("File"),wLt=Cm("Blob"),ELt=Cm("FileList"),TLt=r=>eG(r)&&Yu(r.pipe),ILt=r=>{let e;return r&&(typeof FormData=="function"&&r instanceof FormData||Yu(r.append)&&((e=JB(r))==="formdata"||e==="object"&&Yu(r.toString)&&r.toString()==="[object FormData]"))},RLt=Cm("URLSearchParams"),[xLt,OLt,ALt,NLt]=["ReadableStream","Request","Response","Headers"].map(Cm),DLt=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function xD(r,e,{allOwnKeys:t=!1}={}){if(r===null||typeof r>"u")return;let n,i;if(typeof r!="object"&&(r=[r]),uT(r))for(n=0,i=r.length;n<i;n++)e.call(null,r[n],n,r);else{let s=t?Object.getOwnPropertyNames(r):Object.keys(r),o=s.length,a;for(n=0;n<o;n++)a=s[n],e.call(null,r[a],a,r)}}function eNe(r,e){e=e.toLowerCase();let t=Object.keys(r),n=t.length,i;for(;n-- >0;)if(i=t[n],e===i.toLowerCase())return i;return null}var JS=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,tNe=r=>!RD(r)&&r!==JS;function dne(){let{caseless:r}=tNe(this)&&this||{},e={},t=(n,i)=>{let s=r&&eNe(e,i)||i;XB(e[s])&&XB(n)?e[s]=dne(e[s],n):XB(n)?e[s]=dne({},n):uT(n)?e[s]=n.slice():e[s]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&xD(arguments[n],t);return e}var MLt=(r,e,t,{allOwnKeys:n}={})=>(xD(e,(i,s)=>{t&&Yu(i)?r[s]=ID(i,t):r[s]=i},{allOwnKeys:n}),r),kLt=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),LLt=(r,e,t,n)=>{r.prototype=Object.create(e.prototype,n),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:e.prototype}),t&&Object.assign(r.prototype,t)},qLt=(r,e,t,n)=>{let i,s,o,a={};if(e=e||{},r==null)return e;do{for(i=Object.getOwnPropertyNames(r),s=i.length;s-- >0;)o=i[s],(!n||n(o,r,e))&&!a[o]&&(e[o]=r[o],a[o]=!0);r=t!==!1&&pne(r)}while(r&&(!t||t(r,e))&&r!==Object.prototype);return e},zLt=(r,e,t)=>{r=String(r),(t===void 0||t>r.length)&&(t=r.length),t-=e.length;let n=r.indexOf(e,t);return n!==-1&&n===t},FLt=r=>{if(!r)return null;if(uT(r))return r;let e=r.length;if(!ZAe(e))return null;let t=new Array(e);for(;e-- >0;)t[e]=r[e];return t},jLt=(r=>e=>r&&e instanceof r)(typeof Uint8Array<"u"&&pne(Uint8Array)),ULt=(r,e)=>{let n=(r&&r[Symbol.iterator]).call(r),i;for(;(i=n.next())&&!i.done;){let s=i.value;e.call(r,s[0],s[1])}},BLt=(r,e)=>{let t,n=[];for(;(t=r.exec(e))!==null;)n.push(t);return n},GLt=Cm("HTMLFormElement"),$Lt=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,i){return n.toUpperCase()+i}),XAe=(({hasOwnProperty:r})=>(e,t)=>r.call(e,t))(Object.prototype),VLt=Cm("RegExp"),rNe=(r,e)=>{let t=Object.getOwnPropertyDescriptors(r),n={};xD(t,(i,s)=>{let o;(o=e(i,s,r))!==!1&&(n[s]=o||i)}),Object.defineProperties(r,n)},HLt=r=>{rNe(r,(e,t)=>{if(Yu(r)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;let n=r[t];if(Yu(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},WLt=(r,e)=>{let t={},n=i=>{i.forEach(s=>{t[s]=!0})};return uT(r)?n(r):n(String(r).split(e)),t},KLt=()=>{},QLt=(r,e)=>r!=null&&Number.isFinite(r=+r)?r:e;function YLt(r){return!!(r&&Yu(r.append)&&r[Symbol.toStringTag]==="FormData"&&r[Symbol.iterator])}var XLt=r=>{let e=new Array(10),t=(n,i)=>{if(eG(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[i]=n;let s=uT(n)?[]:{};return xD(n,(o,a)=>{let c=t(o,i+1);!RD(c)&&(s[a]=c)}),e[i]=void 0,s}}return n};return t(r,0)},JLt=Cm("AsyncFunction"),ZLt=r=>r&&(eG(r)||Yu(r))&&Yu(r.then)&&Yu(r.catch),nNe=((r,e)=>r?setImmediate:e?((t,n)=>(JS.addEventListener("message",({source:i,data:s})=>{i===JS&&s===t&&n.length&&n.shift()()},!1),i=>{n.push(i),JS.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Yu(JS.postMessage)),eqt=typeof queueMicrotask<"u"?queueMicrotask.bind(JS):typeof process<"u"&&process.nextTick||nNe,xe={isArray:uT,isArrayBuffer:JAe,isBuffer:vLt,isFormData:ILt,isArrayBufferView:bLt,isString:_Lt,isNumber:ZAe,isBoolean:SLt,isObject:eG,isPlainObject:XB,isReadableStream:xLt,isRequest:OLt,isResponse:ALt,isHeaders:NLt,isUndefined:RD,isDate:CLt,isFile:PLt,isBlob:wLt,isRegExp:VLt,isFunction:Yu,isStream:TLt,isURLSearchParams:RLt,isTypedArray:jLt,isFileList:ELt,forEach:xD,merge:dne,extend:MLt,trim:DLt,stripBOM:kLt,inherits:LLt,toFlatObject:qLt,kindOf:JB,kindOfTest:Cm,endsWith:zLt,toArray:FLt,forEachEntry:ULt,matchAll:BLt,isHTMLForm:GLt,hasOwnProperty:XAe,hasOwnProp:XAe,reduceDescriptors:rNe,freezeMethods:HLt,toObjectSet:WLt,toCamelCase:$Lt,noop:KLt,toFiniteNumber:QLt,findKey:eNe,global:JS,isContextDefined:tNe,isSpecCompliantForm:YLt,toJSONObject:XLt,isAsyncFn:JLt,isThenable:ZLt,setImmediate:nNe,asap:eqt};function dT(r,e,t,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}xe.inherits(dT,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:xe.toJSONObject(this.config),code:this.code,status:this.status}}});var iNe=dT.prototype,sNe={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{sNe[r]={value:r}});Object.defineProperties(dT,sNe);Object.defineProperty(iNe,"isAxiosError",{value:!0});dT.from=(r,e,t,n,i,s)=>{let o=Object.create(iNe);return xe.toFlatObject(r,o,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),dT.call(o,r.message,e,t,n,i),o.cause=r,o.name=r.name,s&&Object.assign(o,s),o};var Tr=dT;var oNe=ge(d8(),1),tG=oNe.default;function mne(r){return xe.isPlainObject(r)||xe.isArray(r)}function cNe(r){return xe.endsWith(r,"[]")?r.slice(0,-2):r}function aNe(r,e,t){return r?r.concat(e).map(function(i,s){return i=cNe(i),!t&&s?"["+i+"]":i}).join(t?".":""):e}function tqt(r){return xe.isArray(r)&&!r.some(mne)}var rqt=xe.toFlatObject(xe,{},null,function(e){return/^is[A-Z]/.test(e)});function nqt(r,e,t){if(!xe.isObject(r))throw new TypeError("target must be an object");e=e||new(tG||FormData),t=xe.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,v){return!xe.isUndefined(v[y])});let n=t.metaTokens,i=t.visitor||u,s=t.dots,o=t.indexes,c=(t.Blob||typeof Blob<"u"&&Blob)&&xe.isSpecCompliantForm(e);if(!xe.isFunction(i))throw new TypeError("visitor must be a function");function l(f){if(f===null)return"";if(xe.isDate(f))return f.toISOString();if(!c&&xe.isBlob(f))throw new Tr("Blob is not supported. Use a Buffer instead.");return xe.isArrayBuffer(f)||xe.isTypedArray(f)?c&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function u(f,y,v){let _=f;if(f&&!v&&typeof f=="object"){if(xe.endsWith(y,"{}"))y=n?y:y.slice(0,-2),f=JSON.stringify(f);else if(xe.isArray(f)&&tqt(f)||(xe.isFileList(f)||xe.endsWith(y,"[]"))&&(_=xe.toArray(f)))return y=cNe(y),_.forEach(function(P,w){!(xe.isUndefined(P)||P===null)&&e.append(o===!0?aNe([y],w,s):o===null?y:y+"[]",l(P))}),!1}return mne(f)?!0:(e.append(aNe(v,y,s),l(f)),!1)}let d=[],p=Object.assign(rqt,{defaultVisitor:u,convertValue:l,isVisitable:mne});function m(f,y){if(!xe.isUndefined(f)){if(d.indexOf(f)!==-1)throw Error("Circular reference detected in "+y.join("."));d.push(f),xe.forEach(f,function(_,C){(!(xe.isUndefined(_)||_===null)&&i.call(e,_,xe.isString(C)?C.trim():C,y,p))===!0&&m(_,y?y.concat(C):[C])}),d.pop()}}if(!xe.isObject(r))throw new TypeError("data must be an object");return m(r),e}var Mv=nqt;function lNe(r){let e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function uNe(r,e){this._pairs=[],r&&Mv(r,this,e)}var dNe=uNe.prototype;dNe.append=function(e,t){this._pairs.push([e,t])};dNe.toString=function(e){let t=e?function(n){return e.call(this,n,lNe)}:lNe;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};var pNe=uNe;function iqt(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ZS(r,e,t){if(!e)return r;let n=t&&t.encode||iqt;xe.isFunction(t)&&(t={serialize:t});let i=t&&t.serialize,s;if(i?s=i(e,t):s=xe.isURLSearchParams(e)?e.toString():new pNe(e,t).toString(n),s){let o=r.indexOf("#");o!==-1&&(r=r.slice(0,o)),r+=(r.indexOf("?")===-1?"?":"&")+s}return r}var hne=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){xe.forEach(this.handlers,function(n){n!==null&&e(n)})}},fne=hne;var pT={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};var gNe=ge(require("crypto"),1);var mNe=ge(require("url"),1),hNe=mNe.default.URLSearchParams;var gne="abcdefghijklmnopqrstuvwxyz",fNe="0123456789",yNe={DIGIT:fNe,ALPHA:gne,ALPHA_DIGIT:gne+gne.toUpperCase()+fNe},sqt=(r=16,e=yNe.ALPHA_DIGIT)=>{let t="",{length:n}=e,i=new Uint32Array(r);gNe.default.randomFillSync(i);for(let s=0;s<r;s++)t+=e[i[s]%n];return t},vNe={isNode:!0,classes:{URLSearchParams:hNe,FormData:tG,Blob:typeof Blob<"u"&&Blob||null},ALPHABET:yNe,generateString:sqt,protocols:["http","https","file","data"]};var bne={};Ea(bne,{hasBrowserEnv:()=>vne,hasStandardBrowserEnv:()=>oqt,hasStandardBrowserWebWorkerEnv:()=>aqt,navigator:()=>yne,origin:()=>cqt});var vne=typeof window<"u"&&typeof document<"u",yne=typeof navigator=="object"&&navigator||void 0,oqt=vne&&(!yne||["ReactNative","NativeScript","NS"].indexOf(yne.product)<0),aqt=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",cqt=vne&&window.location.href||"http://localhost";var qi={...bne,...vNe};function _ne(r,e){return Mv(r,new qi.classes.URLSearchParams,Object.assign({visitor:function(t,n,i,s){return qi.isNode&&xe.isBuffer(t)?(this.append(n,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function lqt(r){return xe.matchAll(/\w+|\[(\w*)]/g,r).map(e=>e[0]==="[]"?"":e[1]||e[0])}function uqt(r){let e={},t=Object.keys(r),n,i=t.length,s;for(n=0;n<i;n++)s=t[n],e[s]=r[s];return e}function dqt(r){function e(t,n,i,s){let o=t[s++];if(o==="__proto__")return!0;let a=Number.isFinite(+o),c=s>=t.length;return o=!o&&xe.isArray(i)?i.length:o,c?(xe.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!a):((!i[o]||!xe.isObject(i[o]))&&(i[o]=[]),e(t,n,i[o],s)&&xe.isArray(i[o])&&(i[o]=uqt(i[o])),!a)}if(xe.isFormData(r)&&xe.isFunction(r.entries)){let t={};return xe.forEachEntry(r,(n,i)=>{e(lqt(n),i,t,0)}),t}return null}var rG=dqt;function pqt(r,e,t){if(xe.isString(r))try{return(e||JSON.parse)(r),xe.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(r)}var Sne={transitional:pT,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){let n=t.getContentType()||"",i=n.indexOf("application/json")>-1,s=xe.isObject(e);if(s&&xe.isHTMLForm(e)&&(e=new FormData(e)),xe.isFormData(e))return i?JSON.stringify(rG(e)):e;if(xe.isArrayBuffer(e)||xe.isBuffer(e)||xe.isStream(e)||xe.isFile(e)||xe.isBlob(e)||xe.isReadableStream(e))return e;if(xe.isArrayBufferView(e))return e.buffer;if(xe.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return _ne(e,this.formSerializer).toString();if((a=xe.isFileList(e))||n.indexOf("multipart/form-data")>-1){let c=this.env&&this.env.FormData;return Mv(a?{"files[]":e}:e,c&&new c,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),pqt(e)):e}],transformResponse:[function(e){let t=this.transitional||Sne.transitional,n=t&&t.forcedJSONParsing,i=this.responseType==="json";if(xe.isResponse(e)||xe.isReadableStream(e))return e;if(e&&xe.isString(e)&&(n&&!this.responseType||i)){let o=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?Tr.from(a,Tr.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:qi.classes.FormData,Blob:qi.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};xe.forEach(["delete","get","head","post","put","patch"],r=>{Sne.headers[r]={}});var mT=Sne;var mqt=xe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),bNe=r=>{let e={},t,n,i;return r&&r.split(`
`).forEach(function(o){i=o.indexOf(":"),t=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!t||e[t]&&mqt[t])&&(t==="set-cookie"?e[t]?e[t].push(n):e[t]=[n]:e[t]=e[t]?e[t]+", "+n:n)}),e};var _Ne=Symbol("internals");function OD(r){return r&&String(r).trim().toLowerCase()}function nG(r){return r===!1||r==null?r:xe.isArray(r)?r.map(nG):String(r)}function hqt(r){let e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,n;for(;n=t.exec(r);)e[n[1]]=n[2];return e}var fqt=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function Cne(r,e,t,n,i){if(xe.isFunction(n))return n.call(this,e,t);if(i&&(e=t),!!xe.isString(e)){if(xe.isString(n))return e.indexOf(n)!==-1;if(xe.isRegExp(n))return n.test(e)}}function gqt(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function yqt(r,e){let t=xe.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(r,n+t,{value:function(i,s,o){return this[n].call(this,e,i,s,o)},configurable:!0})})}var hT=class{constructor(e){e&&this.set(e)}set(e,t,n){let i=this;function s(a,c,l){let u=OD(c);if(!u)throw new Error("header name must be a non-empty string");let d=xe.findKey(i,u);(!d||i[d]===void 0||l===!0||l===void 0&&i[d]!==!1)&&(i[d||c]=nG(a))}let o=(a,c)=>xe.forEach(a,(l,u)=>s(l,u,c));if(xe.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(xe.isString(e)&&(e=e.trim())&&!fqt(e))o(bNe(e),t);else if(xe.isHeaders(e))for(let[a,c]of e.entries())s(c,a,n);else e!=null&&s(t,e,n);return this}get(e,t){if(e=OD(e),e){let n=xe.findKey(this,e);if(n){let i=this[n];if(!t)return i;if(t===!0)return hqt(i);if(xe.isFunction(t))return t.call(this,i,n);if(xe.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=OD(e),e){let n=xe.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||Cne(this,this[n],n,t)))}return!1}delete(e,t){let n=this,i=!1;function s(o){if(o=OD(o),o){let a=xe.findKey(n,o);a&&(!t||Cne(n,n[a],a,t))&&(delete n[a],i=!0)}}return xe.isArray(e)?e.forEach(s):s(e),i}clear(e){let t=Object.keys(this),n=t.length,i=!1;for(;n--;){let s=t[n];(!e||Cne(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){let t=this,n={};return xe.forEach(this,(i,s)=>{let o=xe.findKey(n,s);if(o){t[o]=nG(i),delete t[s];return}let a=e?gqt(s):String(s).trim();a!==s&&delete t[s],t[a]=nG(i),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){let t=Object.create(null);return xe.forEach(this,(n,i)=>{n!=null&&n!==!1&&(t[i]=e&&xe.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){let n=new this(e);return t.forEach(i=>n.set(i)),n}static accessor(e){let n=(this[_Ne]=this[_Ne]={accessors:{}}).accessors,i=this.prototype;function s(o){let a=OD(o);n[a]||(yqt(i,o),n[a]=!0)}return xe.isArray(e)?e.forEach(s):s(e),this}};hT.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);xe.reduceDescriptors(hT.prototype,({value:r},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>r,set(n){this[t]=n}}});xe.freezeMethods(hT);var So=hT;function AD(r,e){let t=this||mT,n=e||t,i=So.from(n.headers),s=n.data;return xe.forEach(r,function(a){s=a.call(t,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function ND(r){return!!(r&&r.__CANCEL__)}function SNe(r,e,t){Tr.call(this,r??"canceled",Tr.ERR_CANCELED,e,t),this.name="CanceledError"}xe.inherits(SNe,Tr,{__CANCEL__:!0});var Xu=SNe;function Lh(r,e,t){let n=t.config.validateStatus;!t.status||!n||n(t.status)?r(t):e(new Tr("Request failed with status code "+t.status,[Tr.ERR_BAD_REQUEST,Tr.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function Pne(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function wne(r,e){return e?r.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):r}function eC(r,e,t){let n=!Pne(e);return r&&n||t==!1?wne(r,e):e}var JNe=ge(PNe(),1),ZNe=ge(require("http"),1),eDe=ge(require("https"),1),tDe=ge(require("util"),1),rDe=ge(LNe(),1),hg=ge(require("zlib"),1);var nC="1.8.2";function zD(r){let e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return e&&e[1]||""}var ezt=/^(?:([^;]+);)?(?:[^;]+;)?(base64|),([\s\S]*)$/;function jne(r,e,t){let n=t&&t.Blob||qi.classes.Blob,i=zD(r);if(e===void 0&&n&&(e=!0),i==="data"){r=i.length?r.slice(i.length+1):r;let s=ezt.exec(r);if(!s)throw new Tr("Invalid URL",Tr.ERR_INVALID_URL);let o=s[1],a=s[2],c=s[3],l=Buffer.from(decodeURIComponent(c),a?"base64":"utf8");if(e){if(!n)throw new Tr("Blob is not supported",Tr.ERR_NOT_SUPPORT);return new n([l],{type:o})}return l}throw new Tr("Unsupported protocol "+i,Tr.ERR_NOT_SUPPORT)}var iC=ge(require("stream"),1);var qNe=ge(require("stream"),1);var Une=Symbol("internals"),Bne=class extends qNe.default.Transform{constructor(e){e=xe.toFlatObject(e,{maxRate:0,chunkSize:64*1024,minChunkSize:100,timeWindow:500,ticksRate:2,samplesCount:15},null,(n,i)=>!xe.isUndefined(i[n])),super({readableHighWaterMark:e.chunkSize});let t=this[Une]={timeWindow:e.timeWindow,chunkSize:e.chunkSize,maxRate:e.maxRate,minChunkSize:e.minChunkSize,bytesSeen:0,isCaptured:!1,notifiedBytesLoaded:0,ts:Date.now(),bytes:0,onReadCallback:null};this.on("newListener",n=>{n==="progress"&&(t.isCaptured||(t.isCaptured=!0))})}_read(e){let t=this[Une];return t.onReadCallback&&t.onReadCallback(),super._read(e)}_transform(e,t,n){let i=this[Une],s=i.maxRate,o=this.readableHighWaterMark,a=i.timeWindow,c=1e3/a,l=s/c,u=i.minChunkSize!==!1?Math.max(i.minChunkSize,l*.01):0,d=(m,f)=>{let y=Buffer.byteLength(m);i.bytesSeen+=y,i.bytes+=y,i.isCaptured&&this.emit("progress",i.bytesSeen),this.push(m)?process.nextTick(f):i.onReadCallback=()=>{i.onReadCallback=null,process.nextTick(f)}},p=(m,f)=>{let y=Buffer.byteLength(m),v=null,_=o,C,P=0;if(s){let w=Date.now();(!i.ts||(P=w-i.ts)>=a)&&(i.ts=w,C=l-i.bytes,i.bytes=C<0?-C:0,P=0),C=l-i.bytes}if(s){if(C<=0)return setTimeout(()=>{f(null,m)},a-P);C<_&&(_=C)}_&&y>_&&y-_>u&&(v=m.subarray(_),m=m.subarray(0,_)),d(m,v?()=>{process.nextTick(f,null,v)}:f)};p(e,function m(f,y){if(f)return n(f);y?p(y,m):n(null)})}},Gne=Bne;var nDe=require("events");var FNe=ge(require("util"),1),jNe=require("stream");var{asyncIterator:zNe}=Symbol,tzt=async function*(r){r.stream?yield*r.stream():r.arrayBuffer?yield await r.arrayBuffer():r[zNe]?yield*r[zNe]():yield r},cG=tzt;var rzt=qi.ALPHABET.ALPHA_DIGIT+"-_",FD=typeof TextEncoder=="function"?new TextEncoder:new FNe.default.TextEncoder,kv=`\r
`,nzt=FD.encode(kv),izt=2,$ne=class{constructor(e,t){let{escapeName:n}=this.constructor,i=xe.isString(t),s=`Content-Disposition: form-data; name="${n(e)}"${!i&&t.name?`; filename="${n(t.name)}"`:""}${kv}`;i?t=FD.encode(String(t).replace(/\r?\n|\r\n?/g,kv)):s+=`Content-Type: ${t.type||"application/octet-stream"}${kv}`,this.headers=FD.encode(s+kv),this.contentLength=i?t.byteLength:t.size,this.size=this.headers.byteLength+this.contentLength+izt,this.name=e,this.value=t}async*encode(){yield this.headers;let{value:e}=this;xe.isTypedArray(e)?yield e:yield*cG(e),yield nzt}static escapeName(e){return String(e).replace(/[\r\n"]/g,t=>({"\r":"%0D","\n":"%0A",'"':"%22"})[t])}},szt=(r,e,t)=>{let{tag:n="form-data-boundary",size:i=25,boundary:s=n+"-"+qi.generateString(i,rzt)}=t||{};if(!xe.isFormData(r))throw TypeError("FormData instance required");if(s.length<1||s.length>70)throw Error("boundary must be 10-70 characters long");let o=FD.encode("--"+s+kv),a=FD.encode("--"+s+"--"+kv+kv),c=a.byteLength,l=Array.from(r.entries()).map(([d,p])=>{let m=new $ne(d,p);return c+=m.size,m});c+=o.byteLength*l.length,c=xe.toFiniteNumber(c);let u={"Content-Type":`multipart/form-data; boundary=${s}`};return Number.isFinite(c)&&(u["Content-Length"]=c),e&&e(u),jNe.Readable.from(async function*(){for(let d of l)yield o,yield*d.encode();yield a}())},UNe=szt;var BNe=ge(require("stream"),1),Vne=class extends BNe.default.Transform{__transform(e,t,n){this.push(e),n()}_transform(e,t,n){if(e.length!==0&&(this._transform=this.__transform,e[0]!==120)){let i=Buffer.alloc(2);i[0]=120,i[1]=156,this.push(i,t)}this.__transform(e,t,n)}},GNe=Vne;var ozt=(r,e)=>xe.isAsyncFn(r)?function(...t){let n=t.pop();r.apply(this,t).then(i=>{try{e?n(null,...e(i)):n(null,i)}catch(s){n(s)}},n)}:r,$Ne=ozt;function azt(r,e){r=r||10;let t=new Array(r),n=new Array(r),i=0,s=0,o;return e=e!==void 0?e:1e3,function(c){let l=Date.now(),u=n[s];o||(o=l),t[i]=c,n[i]=l;let d=s,p=0;for(;d!==i;)p+=t[d++],d=d%r;if(i=(i+1)%r,i===s&&(s=(s+1)%r),l-o<e)return;let m=u&&l-u;return m?Math.round(p*1e3/m):void 0}}var VNe=azt;function czt(r,e){let t=0,n=1e3/e,i,s,o=(l,u=Date.now())=>{t=u,i=null,s&&(clearTimeout(s),s=null),r.apply(null,l)};return[(...l)=>{let u=Date.now(),d=u-t;d>=n?o(l,u):(i=l,s||(s=setTimeout(()=>{s=null,o(i)},n-d)))},()=>i&&o(i)]}var HNe=czt;var mg=(r,e,t=3)=>{let n=0,i=VNe(50,250);return HNe(s=>{let o=s.loaded,a=s.lengthComputable?s.total:void 0,c=o-n,l=i(c),u=o<=a;n=o;let d={loaded:o,total:a,progress:a?o/a:void 0,bytes:c,rate:l||void 0,estimated:l&&a&&u?(a-o)/l:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};r(d)},t)},bT=(r,e)=>{let t=r!=null;return[n=>e[0]({lengthComputable:t,total:r,loaded:n}),e[1]]},_T=r=>(...e)=>xe.asap(()=>r(...e));var WNe={flush:hg.default.constants.Z_SYNC_FLUSH,finishFlush:hg.default.constants.Z_SYNC_FLUSH},lzt={flush:hg.default.constants.BROTLI_OPERATION_FLUSH,finishFlush:hg.default.constants.BROTLI_OPERATION_FLUSH},KNe=xe.isFunction(hg.default.createBrotliDecompress),{http:uzt,https:dzt}=rDe.default,pzt=/https:?/,QNe=qi.protocols.map(r=>r+":"),YNe=(r,[e,t])=>(r.on("end",t).on("error",t),e);function mzt(r,e){r.beforeRedirects.proxy&&r.beforeRedirects.proxy(r),r.beforeRedirects.config&&r.beforeRedirects.config(r,e)}function iDe(r,e,t){let n=e;if(!n&&n!==!1){let i=JNe.default.getProxyForUrl(t);i&&(n=new URL(i))}if(n){if(n.username&&(n.auth=(n.username||"")+":"+(n.password||"")),n.auth){(n.auth.username||n.auth.password)&&(n.auth=(n.auth.username||"")+":"+(n.auth.password||""));let s=Buffer.from(n.auth,"utf8").toString("base64");r.headers["Proxy-Authorization"]="Basic "+s}r.headers.host=r.hostname+(r.port?":"+r.port:"");let i=n.hostname||n.host;r.hostname=i,r.host=i,r.port=n.port,r.path=t,n.protocol&&(r.protocol=n.protocol.includes(":")?n.protocol:`${n.protocol}:`)}r.beforeRedirects.proxy=function(s){iDe(s,e,s.href)}}var hzt=typeof process<"u"&&xe.kindOf(process)==="process",fzt=r=>new Promise((e,t)=>{let n,i,s=(c,l)=>{i||(i=!0,n&&n(c,l))},o=c=>{s(c),e(c)},a=c=>{s(c,!0),t(c)};r(o,a,c=>n=c).catch(a)}),gzt=({address:r,family:e})=>{if(!xe.isString(r))throw TypeError("address must be a string");return{address:r,family:e||(r.indexOf(".")<0?6:4)}},XNe=(r,e)=>gzt(xe.isObject(r)?r:{address:r,family:e}),sDe=hzt&&function(e){return fzt(async function(n,i,s){let{data:o,lookup:a,family:c}=e,{responseType:l,responseEncoding:u}=e,d=e.method.toUpperCase(),p,m=!1,f;if(a){let pe=$Ne(a,Ie=>xe.isArray(Ie)?Ie:[Ie]);a=(Ie,Ve,lt)=>{pe(Ie,Ve,(ut,ce,ue)=>{if(ut)return lt(ut);let Ue=xe.isArray(ce)?ce.map(ct=>XNe(ct)):[XNe(ce,ue)];Ve.all?lt(ut,Ue):lt(ut,Ue[0].address,Ue[0].family)})}}let y=new nDe.EventEmitter,v=()=>{e.cancelToken&&e.cancelToken.unsubscribe(_),e.signal&&e.signal.removeEventListener("abort",_),y.removeAllListeners()};s((pe,Ie)=>{p=!0,Ie&&(m=!0,v())});function _(pe){y.emit("abort",!pe||pe.type?new Xu(null,e,f):pe)}y.once("abort",i),(e.cancelToken||e.signal)&&(e.cancelToken&&e.cancelToken.subscribe(_),e.signal&&(e.signal.aborted?_():e.signal.addEventListener("abort",_)));let C=eC(e.baseURL,e.url,e.allowAbsoluteUrls),P=new URL(C,qi.hasBrowserEnv?qi.origin:void 0),w=P.protocol||QNe[0];if(w==="data:"){let pe;if(d!=="GET")return Lh(n,i,{status:405,statusText:"method not allowed",headers:{},config:e});try{pe=jne(e.url,l==="blob",{Blob:e.env&&e.env.Blob})}catch(Ie){throw Tr.from(Ie,Tr.ERR_BAD_REQUEST,e)}return l==="text"?(pe=pe.toString(u),(!u||u==="utf8")&&(pe=xe.stripBOM(pe))):l==="stream"&&(pe=iC.default.Readable.from(pe)),Lh(n,i,{data:pe,status:200,statusText:"OK",headers:new So,config:e})}if(QNe.indexOf(w)===-1)return i(new Tr("Unsupported protocol "+w,Tr.ERR_BAD_REQUEST,e));let R=So.from(e.headers).normalize();R.set("User-Agent","axios/"+nC,!1);let{onUploadProgress:I,onDownloadProgress:z}=e,G=e.maxRate,L,H;if(xe.isSpecCompliantForm(o)){let pe=R.getContentType(/boundary=([-_\w\d]{10,70})/i);o=UNe(o,Ie=>{R.set(Ie)},{tag:`axios-${nC}-boundary`,boundary:pe&&pe[1]||void 0})}else if(xe.isFormData(o)&&xe.isFunction(o.getHeaders)){if(R.set(o.getHeaders()),!R.hasContentLength())try{let pe=await tDe.default.promisify(o.getLength).call(o);Number.isFinite(pe)&&pe>=0&&R.setContentLength(pe)}catch{}}else if(xe.isBlob(o)||xe.isFile(o))o.size&&R.setContentType(o.type||"application/octet-stream"),R.setContentLength(o.size||0),o=iC.default.Readable.from(cG(o));else if(o&&!xe.isStream(o)){if(!Buffer.isBuffer(o))if(xe.isArrayBuffer(o))o=Buffer.from(new Uint8Array(o));else if(xe.isString(o))o=Buffer.from(o,"utf-8");else return i(new Tr("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",Tr.ERR_BAD_REQUEST,e));if(R.setContentLength(o.length,!1),e.maxBodyLength>-1&&o.length>e.maxBodyLength)return i(new Tr("Request body larger than maxBodyLength limit",Tr.ERR_BAD_REQUEST,e))}let ee=xe.toFiniteNumber(R.getContentLength());xe.isArray(G)?(L=G[0],H=G[1]):L=H=G,o&&(I||L)&&(xe.isStream(o)||(o=iC.default.Readable.from(o,{objectMode:!1})),o=iC.default.pipeline([o,new Gne({maxRate:xe.toFiniteNumber(L)})],xe.noop),I&&o.on("progress",YNe(o,bT(ee,mg(_T(I),!1,3)))));let ye;if(e.auth){let pe=e.auth.username||"",Ie=e.auth.password||"";ye=pe+":"+Ie}if(!ye&&P.username){let pe=P.username,Ie=P.password;ye=pe+":"+Ie}ye&&R.delete("authorization");let $e;try{$e=ZS(P.pathname+P.search,e.params,e.paramsSerializer).replace(/^\?/,"")}catch(pe){let Ie=new Error(pe.message);return Ie.config=e,Ie.url=e.url,Ie.exists=!0,i(Ie)}R.set("Accept-Encoding","gzip, compress, deflate"+(KNe?", br":""),!1);let Be={path:$e,method:d,headers:R.toJSON(),agents:{http:e.httpAgent,https:e.httpsAgent},auth:ye,protocol:w,family:c,beforeRedirect:mzt,beforeRedirects:{}};!xe.isUndefined(a)&&(Be.lookup=a),e.socketPath?Be.socketPath=e.socketPath:(Be.hostname=P.hostname.startsWith("[")?P.hostname.slice(1,-1):P.hostname,Be.port=P.port,iDe(Be,e.proxy,w+"//"+P.hostname+(P.port?":"+P.port:"")+Be.path));let Ct,Ge=pzt.test(Be.protocol);if(Be.agent=Ge?e.httpsAgent:e.httpAgent,e.transport?Ct=e.transport:e.maxRedirects===0?Ct=Ge?eDe.default:ZNe.default:(e.maxRedirects&&(Be.maxRedirects=e.maxRedirects),e.beforeRedirect&&(Be.beforeRedirects.config=e.beforeRedirect),Ct=Ge?dzt:uzt),e.maxBodyLength>-1?Be.maxBodyLength=e.maxBodyLength:Be.maxBodyLength=1/0,e.insecureHTTPParser&&(Be.insecureHTTPParser=e.insecureHTTPParser),f=Ct.request(Be,function(Ie){if(f.destroyed)return;let Ve=[Ie],lt=+Ie.headers["content-length"];if(z||H){let ct=new Gne({maxRate:xe.toFiniteNumber(H)});z&&ct.on("progress",YNe(ct,bT(lt,mg(_T(z),!0,3)))),Ve.push(ct)}let ut=Ie,ce=Ie.req||f;if(e.decompress!==!1&&Ie.headers["content-encoding"])switch((d==="HEAD"||Ie.statusCode===204)&&delete Ie.headers["content-encoding"],(Ie.headers["content-encoding"]||"").toLowerCase()){case"gzip":case"x-gzip":case"compress":case"x-compress":Ve.push(hg.default.createUnzip(WNe)),delete Ie.headers["content-encoding"];break;case"deflate":Ve.push(new GNe),Ve.push(hg.default.createUnzip(WNe)),delete Ie.headers["content-encoding"];break;case"br":KNe&&(Ve.push(hg.default.createBrotliDecompress(lzt)),delete Ie.headers["content-encoding"])}ut=Ve.length>1?iC.default.pipeline(Ve,xe.noop):Ve[0];let ue=iC.default.finished(ut,()=>{ue(),v()}),Ue={status:Ie.statusCode,statusText:Ie.statusMessage,headers:new So(Ie.headers),config:e,request:ce};if(l==="stream")Ue.data=ut,Lh(n,i,Ue);else{let ct=[],jt=0;ut.on("data",function(se){ct.push(se),jt+=se.length,e.maxContentLength>-1&&jt>e.maxContentLength&&(m=!0,ut.destroy(),i(new Tr("maxContentLength size of "+e.maxContentLength+" exceeded",Tr.ERR_BAD_RESPONSE,e,ce)))}),ut.on("aborted",function(){if(m)return;let se=new Tr("stream has been aborted",Tr.ERR_BAD_RESPONSE,e,ce);ut.destroy(se),i(se)}),ut.on("error",function(se){f.destroyed||i(Tr.from(se,null,e,ce))}),ut.on("end",function(){try{let se=ct.length===1?ct[0]:Buffer.concat(ct);l!=="arraybuffer"&&(se=se.toString(u),(!u||u==="utf8")&&(se=xe.stripBOM(se))),Ue.data=se}catch(se){return i(Tr.from(se,null,e,Ue.request,Ue))}Lh(n,i,Ue)})}y.once("abort",ct=>{ut.destroyed||(ut.emit("error",ct),ut.destroy())})}),y.once("abort",pe=>{i(pe),f.destroy(pe)}),f.on("error",function(Ie){i(Tr.from(Ie,null,e,f))}),f.on("socket",function(Ie){Ie.setKeepAlive(!0,1e3*60)}),e.timeout){let pe=parseInt(e.timeout,10);if(Number.isNaN(pe)){i(new Tr("error trying to parse `config.timeout` to int",Tr.ERR_BAD_OPTION_VALUE,e,f));return}f.setTimeout(pe,function(){if(p)return;let Ve=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",lt=e.transitional||pT;e.timeoutErrorMessage&&(Ve=e.timeoutErrorMessage),i(new Tr(Ve,lt.clarifyTimeoutError?Tr.ETIMEDOUT:Tr.ECONNABORTED,e,f)),_()})}if(xe.isStream(o)){let pe=!1,Ie=!1;o.on("end",()=>{pe=!0}),o.once("error",Ve=>{Ie=!0,f.destroy(Ve)}),o.on("close",()=>{!pe&&!Ie&&_(new Xu("Request stream has been aborted",e,f))}),o.pipe(f)}else f.end(o)})};var oDe=qi.hasStandardBrowserEnv?((r,e)=>t=>(t=new URL(t,qi.origin),r.protocol===t.protocol&&r.host===t.host&&(e||r.port===t.port)))(new URL(qi.origin),qi.navigator&&/(msie|trident)/i.test(qi.navigator.userAgent)):()=>!0;var aDe=qi.hasStandardBrowserEnv?{write(r,e,t,n,i,s){let o=[r+"="+encodeURIComponent(e)];xe.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),xe.isString(n)&&o.push("path="+n),xe.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(r){let e=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(r){this.write(r,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};var cDe=r=>r instanceof So?{...r}:r;function Pm(r,e){e=e||{};let t={};function n(l,u,d,p){return xe.isPlainObject(l)&&xe.isPlainObject(u)?xe.merge.call({caseless:p},l,u):xe.isPlainObject(u)?xe.merge({},u):xe.isArray(u)?u.slice():u}function i(l,u,d,p){if(xe.isUndefined(u)){if(!xe.isUndefined(l))return n(void 0,l,d,p)}else return n(l,u,d,p)}function s(l,u){if(!xe.isUndefined(u))return n(void 0,u)}function o(l,u){if(xe.isUndefined(u)){if(!xe.isUndefined(l))return n(void 0,l)}else return n(void 0,u)}function a(l,u,d){if(d in e)return n(l,u);if(d in r)return n(void 0,l)}let c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(l,u,d)=>i(cDe(l),cDe(u),d,!0)};return xe.forEach(Object.keys(Object.assign({},r,e)),function(u){let d=c[u]||i,p=d(r[u],e[u],u);xe.isUndefined(p)&&d!==a||(t[u]=p)}),t}var lG=r=>{let e=Pm({},r),{data:t,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=So.from(o),e.url=ZS(eC(e.baseURL,e.url),r.params,r.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let c;if(xe.isFormData(t)){if(qi.hasStandardBrowserEnv||qi.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){let[l,...u]=c?c.split(";").map(d=>d.trim()).filter(Boolean):[];o.setContentType([l||"multipart/form-data",...u].join("; "))}}if(qi.hasStandardBrowserEnv&&(n&&xe.isFunction(n)&&(n=n(e)),n||n!==!1&&oDe(e.url))){let l=i&&s&&aDe.read(s);l&&o.set(i,l)}return e};var yzt=typeof XMLHttpRequest<"u",lDe=yzt&&function(r){return new Promise(function(t,n){let i=lG(r),s=i.data,o=So.from(i.headers).normalize(),{responseType:a,onUploadProgress:c,onDownloadProgress:l}=i,u,d,p,m,f;function y(){m&&m(),f&&f(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let v=new XMLHttpRequest;v.open(i.method.toUpperCase(),i.url,!0),v.timeout=i.timeout;function _(){if(!v)return;let P=So.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),R={data:!a||a==="text"||a==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:P,config:r,request:v};Lh(function(z){t(z),y()},function(z){n(z),y()},R),v=null}"onloadend"in v?v.onloadend=_:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(_)},v.onabort=function(){v&&(n(new Tr("Request aborted",Tr.ECONNABORTED,r,v)),v=null)},v.onerror=function(){n(new Tr("Network Error",Tr.ERR_NETWORK,r,v)),v=null},v.ontimeout=function(){let w=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded",R=i.transitional||pT;i.timeoutErrorMessage&&(w=i.timeoutErrorMessage),n(new Tr(w,R.clarifyTimeoutError?Tr.ETIMEDOUT:Tr.ECONNABORTED,r,v)),v=null},s===void 0&&o.setContentType(null),"setRequestHeader"in v&&xe.forEach(o.toJSON(),function(w,R){v.setRequestHeader(R,w)}),xe.isUndefined(i.withCredentials)||(v.withCredentials=!!i.withCredentials),a&&a!=="json"&&(v.responseType=i.responseType),l&&([p,f]=mg(l,!0),v.addEventListener("progress",p)),c&&v.upload&&([d,m]=mg(c),v.upload.addEventListener("progress",d),v.upload.addEventListener("loadend",m)),(i.cancelToken||i.signal)&&(u=P=>{v&&(n(!P||P.type?new Xu(null,r,v):P),v.abort(),v=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));let C=zD(i.url);if(C&&qi.protocols.indexOf(C)===-1){n(new Tr("Unsupported protocol "+C+":",Tr.ERR_BAD_REQUEST,r));return}v.send(s||null)})};var vzt=(r,e)=>{let{length:t}=r=r?r.filter(Boolean):[];if(e||t){let n=new AbortController,i,s=function(l){if(!i){i=!0,a();let u=l instanceof Error?l:this.reason;n.abort(u instanceof Tr?u:new Xu(u instanceof Error?u.message:u))}},o=e&&setTimeout(()=>{o=null,s(new Tr(`timeout ${e} of ms exceeded`,Tr.ETIMEDOUT))},e),a=()=>{r&&(o&&clearTimeout(o),o=null,r.forEach(l=>{l.unsubscribe?l.unsubscribe(s):l.removeEventListener("abort",s)}),r=null)};r.forEach(l=>l.addEventListener("abort",s));let{signal:c}=n;return c.unsubscribe=()=>xe.asap(a),c}},uDe=vzt;var bzt=function*(r,e){let t=r.byteLength;if(!e||t<e){yield r;return}let n=0,i;for(;n<t;)i=n+e,yield r.slice(n,i),n=i},_zt=async function*(r,e){for await(let t of Szt(r))yield*bzt(t,e)},Szt=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}let e=r.getReader();try{for(;;){let{done:t,value:n}=await e.read();if(t)break;yield n}}finally{await e.cancel()}},Hne=(r,e,t,n)=>{let i=_zt(r,e),s=0,o,a=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{let{done:l,value:u}=await i.next();if(l){a(),c.close();return}let d=u.byteLength;if(t){let p=s+=d;t(p)}c.enqueue(new Uint8Array(u))}catch(l){throw a(l),l}},cancel(c){return a(c),i.return()}},{highWaterMark:2})};var dG=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",pDe=dG&&typeof ReadableStream=="function",Czt=dG&&(typeof TextEncoder=="function"?(r=>e=>r.encode(e))(new TextEncoder):async r=>new Uint8Array(await new Response(r).arrayBuffer())),mDe=(r,...e)=>{try{return!!r(...e)}catch{return!1}},Pzt=pDe&&mDe(()=>{let r=!1,e=new Request(qi.origin,{body:new ReadableStream,method:"POST",get duplex(){return r=!0,"half"}}).headers.has("Content-Type");return r&&!e}),dDe=64*1024,Wne=pDe&&mDe(()=>xe.isReadableStream(new Response("").body)),uG={stream:Wne&&(r=>r.body)};dG&&(r=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!uG[e]&&(uG[e]=xe.isFunction(r[e])?t=>t[e]():(t,n)=>{throw new Tr(`Response type '${e}' is not supported`,Tr.ERR_NOT_SUPPORT,n)})})})(new Response);var wzt=async r=>{if(r==null)return 0;if(xe.isBlob(r))return r.size;if(xe.isSpecCompliantForm(r))return(await new Request(qi.origin,{method:"POST",body:r}).arrayBuffer()).byteLength;if(xe.isArrayBufferView(r)||xe.isArrayBuffer(r))return r.byteLength;if(xe.isURLSearchParams(r)&&(r=r+""),xe.isString(r))return(await Czt(r)).byteLength},Ezt=async(r,e)=>{let t=xe.toFiniteNumber(r.getContentLength());return t??wzt(e)},hDe=dG&&(async r=>{let{url:e,method:t,data:n,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:c,responseType:l,headers:u,withCredentials:d="same-origin",fetchOptions:p}=lG(r);l=l?(l+"").toLowerCase():"text";let m=uDe([i,s&&s.toAbortSignal()],o),f,y=m&&m.unsubscribe&&(()=>{m.unsubscribe()}),v;try{if(c&&Pzt&&t!=="get"&&t!=="head"&&(v=await Ezt(u,n))!==0){let R=new Request(e,{method:"POST",body:n,duplex:"half"}),I;if(xe.isFormData(n)&&(I=R.headers.get("content-type"))&&u.setContentType(I),R.body){let[z,G]=bT(v,mg(_T(c)));n=Hne(R.body,dDe,z,G)}}xe.isString(d)||(d=d?"include":"omit");let _="credentials"in Request.prototype;f=new Request(e,{...p,signal:m,method:t.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:_?d:void 0});let C=await fetch(f),P=Wne&&(l==="stream"||l==="response");if(Wne&&(a||P&&y)){let R={};["status","statusText","headers"].forEach(L=>{R[L]=C[L]});let I=xe.toFiniteNumber(C.headers.get("content-length")),[z,G]=a&&bT(I,mg(_T(a),!0))||[];C=new Response(Hne(C.body,dDe,z,()=>{G&&G(),y&&y()}),R)}l=l||"text";let w=await uG[xe.findKey(uG,l)||"text"](C,r);return!P&&y&&y(),await new Promise((R,I)=>{Lh(R,I,{data:w,headers:So.from(C.headers),status:C.status,statusText:C.statusText,config:r,request:f})})}catch(_){throw y&&y(),_&&_.name==="TypeError"&&/fetch/i.test(_.message)?Object.assign(new Tr("Network Error",Tr.ERR_NETWORK,r,f),{cause:_.cause||_}):Tr.from(_,_&&_.code,r,f)}});var Kne={http:sDe,xhr:lDe,fetch:hDe};xe.forEach(Kne,(r,e)=>{if(r){try{Object.defineProperty(r,"name",{value:e})}catch{}Object.defineProperty(r,"adapterName",{value:e})}});var fDe=r=>`- ${r}`,Tzt=r=>xe.isFunction(r)||r===null||r===!1,pG={getAdapter:r=>{r=xe.isArray(r)?r:[r];let{length:e}=r,t,n,i={};for(let s=0;s<e;s++){t=r[s];let o;if(n=t,!Tzt(t)&&(n=Kne[(o=String(t)).toLowerCase()],n===void 0))throw new Tr(`Unknown adapter '${o}'`);if(n)break;i[o||"#"+s]=n}if(!n){let s=Object.entries(i).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build")),o=e?s.length>1?`since :
`+s.map(fDe).join(`
`):" "+fDe(s[0]):"as no adapter specified";throw new Tr("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:Kne};function Qne(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new Xu(null,r)}function mG(r){return Qne(r),r.headers=So.from(r.headers),r.data=AD.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),pG.getAdapter(r.adapter||mT.adapter)(r).then(function(n){return Qne(r),n.data=AD.call(r,r.transformResponse,n),n.headers=So.from(n.headers),n},function(n){return ND(n)||(Qne(r),n&&n.response&&(n.response.data=AD.call(r,r.transformResponse,n.response),n.response.headers=So.from(n.response.headers))),Promise.reject(n)})}var hG={};["object","boolean","number","function","string","symbol"].forEach((r,e)=>{hG[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});var gDe={};hG.transitional=function(e,t,n){function i(s,o){return"[Axios v"+nC+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return(s,o,a)=>{if(e===!1)throw new Tr(i(o," has been removed"+(t?" in "+t:"")),Tr.ERR_DEPRECATED);return t&&!gDe[o]&&(gDe[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,o,a):!0}};hG.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function Izt(r,e,t){if(typeof r!="object")throw new Tr("options must be an object",Tr.ERR_BAD_OPTION_VALUE);let n=Object.keys(r),i=n.length;for(;i-- >0;){let s=n[i],o=e[s];if(o){let a=r[s],c=a===void 0||o(a,s,r);if(c!==!0)throw new Tr("option "+s+" must be "+c,Tr.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Tr("Unknown option "+s,Tr.ERR_BAD_OPTION)}}var jD={assertOptions:Izt,validators:hG};var qh=jD.validators,ST=class{constructor(e){this.defaults=e,this.interceptors={request:new fne,response:new fne}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;let s=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Pm(this.defaults,t);let{transitional:n,paramsSerializer:i,headers:s}=t;n!==void 0&&jD.assertOptions(n,{silentJSONParsing:qh.transitional(qh.boolean),forcedJSONParsing:qh.transitional(qh.boolean),clarifyTimeoutError:qh.transitional(qh.boolean)},!1),i!=null&&(xe.isFunction(i)?t.paramsSerializer={serialize:i}:jD.assertOptions(i,{encode:qh.function,serialize:qh.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),jD.assertOptions(t,{baseUrl:qh.spelling("baseURL"),withXsrfToken:qh.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&xe.merge(s.common,s[t.method]);s&&xe.forEach(["delete","get","head","post","put","patch","common"],f=>{delete s[f]}),t.headers=So.concat(o,s);let a=[],c=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(t)===!1||(c=c&&y.synchronous,a.unshift(y.fulfilled,y.rejected))});let l=[];this.interceptors.response.forEach(function(y){l.push(y.fulfilled,y.rejected)});let u,d=0,p;if(!c){let f=[mG.bind(this),void 0];for(f.unshift.apply(f,a),f.push.apply(f,l),p=f.length,u=Promise.resolve(t);d<p;)u=u.then(f[d++],f[d++]);return u}p=a.length;let m=t;for(d=0;d<p;){let f=a[d++],y=a[d++];try{m=f(m)}catch(v){y.call(this,v);break}}try{u=mG.call(this,m)}catch(f){return Promise.reject(f)}for(d=0,p=l.length;d<p;)u=u.then(l[d++],l[d++]);return u}getUri(e){e=Pm(this.defaults,e);let t=eC(e.baseURL,e.url,e.allowAbsoluteUrls);return ZS(t,e.params,e.paramsSerializer)}};xe.forEach(["delete","get","head","options"],function(e){ST.prototype[e]=function(t,n){return this.request(Pm(n||{},{method:e,url:t,data:(n||{}).data}))}});xe.forEach(["post","put","patch"],function(e){function t(n){return function(s,o,a){return this.request(Pm(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}ST.prototype[e]=t(),ST.prototype[e+"Form"]=t(!0)});var UD=ST;var Yne=class r{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});let n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s,o=new Promise(a=>{n.subscribe(a),s=a}).then(i);return o.cancel=function(){n.unsubscribe(s)},o},e(function(s,o,a){n.reason||(n.reason=new Xu(s,o,a),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;let t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){let e=new AbortController,t=n=>{e.abort(n)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new r(function(i){e=i}),cancel:e}}},yDe=Yne;function Xne(r){return function(t){return r.apply(null,t)}}function Jne(r){return xe.isObject(r)&&r.isAxiosError===!0}var Zne={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Zne).forEach(([r,e])=>{Zne[e]=r});var vDe=Zne;function bDe(r){let e=new UD(r),t=ID(UD.prototype.request,e);return xe.extend(t,UD.prototype,e,{allOwnKeys:!0}),xe.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return bDe(Pm(r,i))},t}var ba=bDe(mT);ba.Axios=UD;ba.CanceledError=Xu;ba.CancelToken=yDe;ba.isCancel=ND;ba.VERSION=nC;ba.toFormData=Mv;ba.AxiosError=Tr;ba.Cancel=ba.CanceledError;ba.all=function(e){return Promise.all(e)};ba.spread=Xne;ba.isAxiosError=Jne;ba.mergeConfig=Pm;ba.AxiosHeaders=So;ba.formToJSON=r=>rG(xe.isHTMLForm(r)?new FormData(r):r);ba.getAdapter=pG.getAdapter;ba.HttpStatusCode=vDe;ba.default=ba;var BD=ba;var{Axios:$Cr,AxiosError:VCr,CanceledError:HCr,isCancel:WCr,CancelToken:KCr,VERSION:QCr,all:YCr,Cancel:XCr,isAxiosError:JCr,spread:ZCr,toFormData:ePr,AxiosHeaders:tPr,HttpStatusCode:rPr,formToJSON:nPr,getAdapter:iPr,mergeConfig:sPr}=BD;var N=require("vscode"),zi=class{static remindMeLater=N.l10n.t("Remind Me Later");static dontShowAgain=N.l10n.t("Don't Show Again");static learnMore=N.l10n.t("Learn More");static delete=N.l10n.t("Delete");static cancel=N.l10n.t("Cancel");static areYouSure=N.l10n.t("Are you sure?");static areYouSureYouWantTo=e=>N.l10n.t({message:"Are you sure you want to {0}?",args:[e],comment:["{0} is the action being confirmed"]});static accept=N.l10n.t("Accept");static error=N.l10n.t("Error")},_De=N.l10n.t("View More"),SDe=N.l10n.t("View mssql for Visual Studio Code release notes?");function CDe(r){return N.l10n.t({message:'Started query execution for document "{0}"',args:[r],comment:["{0} is the document name"]})}function PDe(r){return N.l10n.t({message:'Finished query execution for document "{0}"',args:[r],comment:["{0} is the document name"]})}var wDe=N.l10n.t("A query is already running for this editor session. Please cancel this query or wait for its completion."),EDe=N.l10n.t("Started executing query at ");function TDe(r){return N.l10n.t({message:"Line {0}",args:[r],comment:["{0} is the line number"]})}function IDe(r){return N.l10n.t({message:"Canceling the query failed: {0}",args:[r],comment:["{0} is the error message"]})}var RDe=N.l10n.t("Cannot cancel query as no query is running."),eie=N.l10n.t("No connection was found. Please connect to a server first."),xDe=N.l10n.t("Choose a database from the list below");function gG(r,e){return N.l10n.t({message:"Error {0}: {1}",args:[r,e],comment:["{0} is the error number","{1} is the error message"]})}function yG(r){return N.l10n.t({message:"Failed to connect: {0}",args:[r],comment:["{0} is the error message"]})}var tie=N.l10n.t("Server name not set.");function ODe(r,e){return N.l10n.t({message:"Error {0}: {1} Please login as a different user and change the password using ALTER LOGIN.",args:[r,e],comment:["{0} is the error number","{1} is the error message"]})}var rie=N.l10n.t("Server connection in progress. Do you want to cancel?"),nie=N.l10n.t("Confirm to clear recent connections list"),PT=N.l10n.t('To use this command, Open a .sql file -or- Change editor language to "SQL" -or- Select T-SQL text in the active SQL editor.'),ADe=N.l10n.t("Choose a connection profile from the list below"),NDe=N.l10n.t("Create Connection Profile"),DDe=N.l10n.t("Create"),MDe=N.l10n.t("Clear Recent Connections List"),kDe=N.l10n.t("Edit"),VD=N.l10n.t("Remove"),iie=N.l10n.t("Manage Connection Profiles"),LDe=N.l10n.t("{{put-server-name-here}}"),vG=N.l10n.t("Server name or ADO.NET connection string"),qDe=N.l10n.t("hostname\\instance or <server>.database.windows.net or ADO.NET connection string"),sie=N.l10n.t("Database name"),HD=N.l10n.t("Start IP Address"),WD=N.l10n.t("End IP Address"),oie=N.l10n.t("Firewall rule name"),zDe=N.l10n.t("[Optional] Database to connect (press Enter to connect to <default> database)"),FDe=N.l10n.t("Authentication Type"),jDe=N.l10n.t("authenticationType"),UDe=N.l10n.t("Integrated"),BDe=N.l10n.t("SQL Login"),GDe=N.l10n.t("Microsoft Entra Id - Universal w/ MFA Support"),$De=N.l10n.t("Azure Code Grant"),VDe=N.l10n.t("Azure Device Code"),HDe=N.l10n.t("MSSQL - Azure Auth Logs"),WDe=N.l10n.t("Open"),aPr=N.l10n.t("Ignore Tenant");function KDe(r){return N.l10n.t({message:"Your account needs re-authentication to access {0} resources. Press Open to start the authentication process.",args:[r],comment:["{0} is the resource"]})}var QDe=N.l10n.t("Microsoft Corp"),YDe=N.l10n.t("Microsoft Entra Account");function XDe(r){return N.l10n.t({message:"Provider '{0}' does not have a Microsoft resource endpoint defined.",args:[r],comment:["{0} is the provider"]})}var JDe=N.l10n.t("Unable to read proxy agent options to get tenants."),ZDe=N.l10n.t("Server could not start. This could be a permissions error or an incompatibility on your system. You can try enabling device code authentication from settings."),aie=N.l10n.t("Authentication failed due to a nonce mismatch, please close Azure Data Studio and try again."),cie=N.l10n.t("Authentication failed due to a state mismatch, please close ADS and try again."),cPr=N.l10n.t("Encrypt"),lPr=N.l10n.t("encrypt"),uPr=N.l10n.t("Optional (False)"),dPr=N.l10n.t("Mandatory (True)"),pPr=N.l10n.t("Mandatory (Recommended)"),lie=N.l10n.t("Enable Trust Server Certificate"),uie=N.l10n.t("Read more"),die=N.l10n.t("Copy code and open webpage"),wT=N.l10n.t("Choose a Microsoft Entra account"),KD=N.l10n.t("Add a Microsoft Entra account...");function bG(r){return N.l10n.t({message:"Microsoft Entra account {0} successfully added.",args:[r],comment:["{0} is the account name"]})}var eMe=N.l10n.t("New Microsoft Entra account could not be added."),tMe=N.l10n.t("Selected Microsoft Entra account removed successfully.");function rMe(r){return N.l10n.t({message:"An error occurred while removing Microsoft Entra account: {0}",args:[r],comment:["{0} is the error message"]})}var nMe=N.l10n.t("No Microsoft Entra account can be found for removal."),iMe=N.l10n.t("Azure token cache cleared successfully."),pie=N.l10n.t("Cannot connect due to expired tokens. Please re-authenticate and try again."),_G=N.l10n.t("Microsoft Entra Id"),ET=N.l10n.t("Choose a Microsoft Entra tenant"),TT=N.l10n.t("Tenant"),SG=N.l10n.t("User name"),sMe=N.l10n.t("User name (SQL Login)"),yg=N.l10n.t("Password"),CG=N.l10n.t("Password (SQL Login)"),Lv=N.l10n.t("Save Password? If 'No', password will be required each time you connect"),mie=N.l10n.t("Profile Name"),oMe=N.l10n.t("Error occurred opening content in editor."),aMe=N.l10n.t("Started saving results to "),QD=N.l10n.t("Failed to save results. "),hie=N.l10n.t("Successfully saved results to "),cMe=N.l10n.t("Select profile to remove"),lMe=N.l10n.t("Confirm to remove this profile."),uMe=N.l10n.t("No connection profile to remove."),dMe=N.l10n.t("Profile removed successfully"),pMe=N.l10n.t("Profile created successfully"),mMe=N.l10n.t("Profile created and connected"),hMe=N.l10n.t("Recent connections list cleared"),fMe=N.l10n.t(" is required."),gMe=N.l10n.t("Error: "),wm=N.l10n.t("Yes"),IT=N.l10n.t("No"),Jd=N.l10n.t("<default>"),yMe=N.l10n.t("Connecting to: "),YD=N.l10n.t("Error connecting to: "),vMe=N.l10n.t("Error code: "),fie=N.l10n.t("Error Message: "),gie=N.l10n.t("Canceling query "),bMe=N.l10n.t("Updating IntelliSense..."),_Me=N.l10n.t("Unable to execute the command while the extension is initializing. Please try again later."),SMe=N.l10n.t("untitled"),yie=N.l10n.t('To use this command, you must set the language to "SQL". Confirm to change language mode.');function CMe(r,e){return N.l10n.t({message:'Changed database context to "{0}" for document "{1}"',args:[r,e],comment:["{0} is the database name","{1} is the document name"]})}var PMe=N.l10n.t("Error: Unable to connect using the connection information provided. Retry profile creation?"),Em=N.l10n.t("Refresh Credentials"),wMe=N.l10n.t("Failed to fetch user tokens."),EMe=N.l10n.t("Error: Login failed. Retry using different credentials?"),TMe=N.l10n.t("Encryption was enabled on this connection; review your SSL and certificate configuration for the target SQL Server, or set 'Trust server certificate' to 'true' in the settings file. Note: A self-signed certificate offers only limited protection and is not a recommended practice for production environments. Do you want to enable 'Trust server certificate' on this connection and retry?"),IMe=N.l10n.t("Your client IP address does not have access to the server. Add a Microsoft Entra account and create a new firewall rule to enable access.");function RMe(r,e){return N.l10n.t({message:"Your client IP Address '{0}' does not have access to the server '{1}' you're attempting to connect to. Would you like to create new firewall rule?",args:[r,e],comment:["{0} is the client IP address","{1} is the server name"]})}var xMe=N.l10n.t("Firewall rule successfully added. Retry profile creation? "),RT=N.l10n.t("Credential Error: An error occurred while attempting to refresh account credentials. Please re-authenticate."),mPr=N.l10n.t("Connection Profile could not be updated. Please modify the connection details manually in settings.json and try again."),OMe=N.l10n.t("Unable to expand. Please check logs for more information."),AMe=N.l10n.t("Firewall rule successfully created."),NMe=N.l10n.t("Failed to get authentication method, please remove and re-add the account."),vg=N.l10n.t("Account not found"),DMe=N.l10n.t("Choose Query History"),MMe=N.l10n.t("Choose An Action"),vie=N.l10n.t("Open Query History"),bie=N.l10n.t("Run Query History"),_ie=N.l10n.t("Invalid IP Address"),kMe=N.l10n.t("Invalid Firewall rule name"),LMe=N.l10n.t("No Queries Available"),XD=N.l10n.t("Retry"),Sie=N.l10n.t("Create Firewall Rule");function qMe(r,e){return N.l10n.t({message:'Connecting to server "{0}" on document "{1}".',args:[r,e],comment:["{0} is the server name","{1} is the document name"]})}function zMe(r){return N.l10n.t({message:'Connection not found for uri "{0}".',args:[r],comment:["{0} is the uri"]})}function FMe(r){return N.l10n.t({message:"Found pending reconnect promise for uri {0}, waiting.",args:[r],comment:["{0} is the uri"]})}function jMe(r){return N.l10n.t({message:"Previous pending reconnection for uri {0}, succeeded.",args:[r],comment:["{0} is the uri"]})}function UMe(r){return N.l10n.t({message:"Found pending reconnect promise for uri {0}, failed.",args:[r],comment:["{0} is the uri"]})}function BMe(r,e){return N.l10n.t({message:"Previous pending reconnect promise for uri {0} is rejected with error {1}, will attempt to reconnect if necessary.",args:[r,e],comment:["{0} is the uri","{1} is the error"]})}function GMe(r,e){return N.l10n.t({message:"Access token expired for connection {0} with uri {1}",args:[r,e],comment:["{0} is the connection id","{1} is the uri"]})}var $Me=N.l10n.t("Error when refreshing token"),VMe=N.l10n.t(`Keys for token cache could not be saved in credential store, this may cause Microsoft Entra Id access token persistence issues and connection instabilities. It's likely that SqlTools has reached credential storage limit on Windows, please clear at least 2 credentials that start with "Microsoft.SqlTools|" in Windows Credential Manager and reload.`);function HMe(r,e){return N.l10n.t({message:"Failed to refresh connection ${0} with uri {1}, invalid connection result.",args:[r,e],comment:["{0} is the connection id","{1} is the uri"]})}function WMe(r,e,t){return N.l10n.t({message:"Successfully refreshed token for connection {0} with uri {1}, {2}",args:[r,e,t],comment:["{0} is the connection id","{1} is the uri","{2} is the message"]})}function KMe(r,e){return N.l10n.t({message:"No need to refresh Microsoft Entra acccount token for connection {0} with uri {1}",args:[r,e],comment:["{0} is the connection id","{1} is the uri"]})}function QMe(r,e,t){return N.l10n.t({message:'Connected to server "{0}" on document "{1}". Server information: {2}',args:[r,e,t],comment:["{0} is the server name","{1} is the document name","{2} is the server info"]})}function YMe(r,e){return N.l10n.t({message:'Error connecting to server "{0}". Details: {1}',args:[r,e],comment:["{0} is the server name","{1} is the error message"]})}function XMe(r,e,t){return N.l10n.t({message:'Changing database context to "{0}" on server "{1}" on document "{2}".',args:[r,e,t],comment:["{0} is the database name","{1} is the server name","{2} is the document name"]})}function Cie(r,e,t){return N.l10n.t({message:'Changed database context to "{0}" on server "{1}" on document "{2}".',args:[r,e,t],comment:["{0} is the database name","{1} is the server name","{2} is the document name"]})}function JMe(r){return N.l10n.t({message:'Disconnected on document "{0}"',args:[r],comment:["{0} is the document name"]})}var ZMe=N.l10n.t("OpenSSL version >=1.0.1 is required to connect."),JD=N.l10n.t("Help"),PG=N.l10n.t("macOS Sierra or newer is required to use this feature."),eke=N.l10n.t("Getting definition ..."),tke=N.l10n.t("DefinitionRequested"),Pie=N.l10n.t("DefinitionRequestCompleted"),xT=N.l10n.t("updatingIntelliSense"),wG=N.l10n.t("intelliSenseUpdated"),hPr=N.l10n.t("test"),rke=N.l10n.t("Disconnect"),nke=N.l10n.t("Close the current connection"),wie=N.l10n.t("Are you sure you want to disconnect?");function ike(r){return N.l10n.t({message:"Batch execution time: {0}",args:[r],comment:["{0} is the batch time"]})}var ske=N.l10n.t("A SQL editor must have focus before executing this command"),fPr=N.l10n.t("Maximize"),gPr=N.l10n.t("Restore"),yPr=N.l10n.t("Save as CSV"),vPr=N.l10n.t("Save as JSON"),bPr=N.l10n.t("Save as Excel"),oke=N.l10n.t("CSV"),ake=N.l10n.t("JSON"),cke=N.l10n.t("Excel"),_Pr=N.l10n.t("Results"),SPr=N.l10n.t("Select all"),CPr=N.l10n.t("Copy"),PPr=N.l10n.t("Copy with Headers"),Eie=N.l10n.t("Executing query..."),lke=N.l10n.t("Query executed"),wPr=N.l10n.t("Messages"),EPr=N.l10n.t("Timestamp"),TPr=N.l10n.t("Message");function uke(r){return N.l10n.t({message:"Total execution time: {0}",args:[r],comment:["{0} is the elapsed time"]})}var IPr=N.l10n.t("Save results command cannot be used with multiple selections."),dke=N.l10n.t("MSSQL"),pke=N.l10n.t("None"),mke=N.l10n.t("Choose SQL Language"),hke=N.l10n.t("Use T-SQL intellisense and syntax error checking on current document"),fke=N.l10n.t("Disable intellisense and syntax error checking on current document"),gke=N.l10n.t("Non-SQL Server SQL file detected. Disable IntelliSense for such files?"),Tie=N.l10n.t("Add Connection"),OT=N.l10n.t("Connect"),Rzt=N.l10n.t("Azure: Sign In"),xzt=N.l10n.t("Sign in to your Azure subscription"),Ozt=N.l10n.t("Azure: Sign In with Device Code"),Azt=N.l10n.t("Sign in to your Azure subscription with a device code. Use this in setups where the Sign In command does not work"),Nzt=N.l10n.t("Azure: Sign In to Azure Cloud"),Dzt=N.l10n.t("Sign in to your Azure subscription in one of the sovereign clouds.");function yke(r,e){return N.l10n.t({message:"{0}: {1}",args:[r,e],comment:["{0} is the task name","{1} is the status"]})}function Iie(r,e,t){return N.l10n.t({message:"{0}: {1}. {2}",args:[r,e,t],comment:["{0} is the task name","{1} is the status","{2} is the message"]})}var vke=N.l10n.t("Failed"),bke=N.l10n.t("Succeeded"),_ke=N.l10n.t("Succeeded with warning"),Ske=N.l10n.t("Canceled"),Cke=N.l10n.t("In progress"),Pke=N.l10n.t("Canceling"),wke=N.l10n.t("Not started"),Eke=N.l10n.t("Parent node was not TreeNodeInfo.");function Tke(r,e){return N.l10n.t({message:"Failed to delete credential with id: {0}. {1}",args:[r,e],comment:["{0} is the id","{1} is the error"]})}var Ike=N.l10n.t("The recent connections list has been cleared but there were errors while deleting some associated credentials. View the errors in the MSSQL output channel."),RPr=N.l10n.t("Testing connection profile..."),Rke=N.l10n.t("Running query is not supported when the editor is in multiple selection mode."),xPr=N.l10n.t("Enter new column width"),OPr=N.l10n.t("Invalid column width"),APr=N.l10n.t("Width cannot be 0 or negative"),xke=N.l10n.t("An error occurred refreshing nodes. See the MSSQL output channel for more details."),NPr=N.l10n.t("Show MSSQL output"),DPr=N.l10n.t("Authentication Library has changed, please reload Visual Studio Code."),Oke=N.l10n.t("Visual Studio Code must be relaunched for this setting to come into effect.  Please reload Visual Studio Code."),AT=N.l10n.t("Reload Visual Studio Code"),MPr=N.l10n.t("Switch to MSAL"),Ake=N.l10n.t("Dismiss"),Nke=N.l10n.t("Query succeeded"),Dke=N.l10n.t("Search for database objects..."),kPr=N.l10n.t("Enter part of an object name to search for");function Mke(r){return N.l10n.t({message:"No database objects found matching '{0}'",args:[r],comment:["{0} is the search term"]})}var LPr=N.l10n.t("An error occurred while searching database objects");function Rie(r){return N.l10n.t({message:"An error occurred while searching database objects: {0}",args:[r],comment:["{0} is the error detail returned from the search operation"]})}var xie=N.l10n.t("No active database connection. Please connect to a database first.");var kke=N.l10n.t("Invalid connection URI. Please ensure you have an active database connection."),Lke=N.l10n.t("Query failed"),qPr=N.l10n.t("Parameters"),zPr=N.l10n.t("Loading"),FPr=N.l10n.t("Execution Plan"),qke=N.l10n.t("SQL Plan Files"),zke=N.l10n.t("Script copied to clipboard"),Fke=N.l10n.t("Copied"),jke=N.l10n.t("Do you want to always display query results in a new tab instead of the query pane?"),EG=N.l10n.t("Always show in new tab"),Oie=N.l10n.t("Keep in query pane"),Uke=N.l10n.t("Max row count for filtering/sorting has been exceeded. To update it, navigate to User Settings and change the setting: mssql.resultsGrid.inMemoryDataProcessingThreshold");function Bke(r){return N.l10n.t({message:"The MSSQL for VS Code extension is introducing new modern data development features! Would you like to enable them? [Learn more]({0})",args:[r],comment:["{0} is a url to learn more about the new features"]})}var TG=N.l10n.t("Enable Experiences & Reload"),ZD=N.l10n.t("New Deployment"),zn=class{static ErrorLoadingRefreshToTryAgain=N.l10n.t("Error loading; refresh to try again");static NoItems=N.l10n.t("No items");static FailedOEConnectionError=N.l10n.t("We couldn't connect using the current connection information. Would you like to retry the connection or edit the connection profile?");static FailedOEConnectionErrorRetry=N.l10n.t("Retry");static FailedOEConnectionErrorUpdate=N.l10n.t("Edit Connection Profile");static Connecting=N.l10n.t("Connecting...");static NodeDeletionConfirmation(e){return N.l10n.t({message:"Are you sure you want to remove {0}?",args:[e],comment:["{0} is the node label"]})}static NodeDeletionConfirmationYes=N.l10n.t("Yes");static NodeDeletionConfirmationNo=N.l10n.t("No");static LoadingNodeLabel=N.l10n.t("Loading...");static FetchingScriptLabel(e){return N.l10n.t({message:"Fetching {0} script...",args:[e],comment:["{0} is the script type"]})}static ScriptSelectLabel=N.l10n.t("Select");static ScriptCreateLabel=N.l10n.t("Create");static ScriptInsertLabel=N.l10n.t("Insert");static ScriptUpdateLabel=N.l10n.t("Update");static ScriptDeleteLabel=N.l10n.t("Delete");static ScriptExecuteLabel=N.l10n.t("Execute");static ScriptAlterLabel=N.l10n.t("Alter");static AzureSignInMessage=N.l10n.t("Signing in to Azure...");static ConnectionGroupDeletionConfirmationWithContents(e){return N.l10n.t({message:"Are you sure you want to delete {0}?  You can delete its connections as well, or move them to the root folder.",args:[e],comment:["{0} is the group name"]})}static ConnectionGroupDeleteContents=N.l10n.t("Delete Contents");static ConnectionGroupMoveContents=N.l10n.t("Move to Root");static ConnectionGroupDeletionConfirmationWithoutContents(e){return N.l10n.t({message:"Are you sure you want to delete {0}?",args:[e],comment:["{0} is the group name"]})}},xn=class{static connectionDialog=N.l10n.t("Connection Dialog");static microsoftAccount=N.l10n.t("Microsoft Account");static microsoftAccountIsRequired=N.l10n.t("Microsoft Account is required");static selectAnAccount=N.l10n.t("Select an account");static addAccount=N.l10n.t("Add account");static savePassword=N.l10n.t("Save Password");static tenantId=N.l10n.t("Tenant ID");static selectATenant=N.l10n.t("Select a tenant");static tenantIdIsRequired=N.l10n.t("Tenant ID is required");static profileName=N.l10n.t("Profile Name");static profileNamePlaceholder=N.l10n.t("Enter profile name");static profileNameTooltip=N.l10n.t("[Optional] Enter a display name for this connection profile");static connectionGroup=N.l10n.t("Connection Group");static serverIsRequired=N.l10n.t("Server is required");static usernameIsRequired=N.l10n.t("User name is required");static connectionString=N.l10n.t("Connection String");static connectionStringIsRequired=N.l10n.t("Connection string is required");static signIn=N.l10n.t("Sign in");static additionalParameters=N.l10n.t("Additional parameters");static connect=N.l10n.t("Connect");static default=N.l10n.t("<Default>");static createConnectionGroup=N.l10n.t("+ Create Connection Group");static selectConnectionGroup=N.l10n.t("Select a connection group");static searchConnectionGroups=N.l10n.t("Search connection groups");static errorLoadingAzureDatabases(e,t){return N.l10n.t({message:"Error loading Azure databases for subscription {0} ({1}).  Confirm that you have permission.",args:[e,t],comment:["{0} is the subscription name","{1} is the subscription id"]})}static deleteTheSavedConnection=e=>N.l10n.t({message:"delete the saved connection: {0}?",args:[e],comment:["{0} is the connection name"]});static multipleMatchingTokensError(e,t){return!e||!t?N.l10n.t("Authentication error for account. Resolving this requires clearing your token cache, which will sign you out of all connected accounts."):N.l10n.t({message:"Authentication error for account '{0}' (tenant '{1}'). Resolving this requires clearing your token cache, which will sign you out of all connected accounts.",args:[e,t],comment:["{0} is the account display name","{1} is the tenant id"]})}static ClearCacheAndRefreshToken=N.l10n.t("Clear cache and refresh token");static noWorkspacesFound=N.l10n.t("No workspaces found. Please change Fabric account or tenant to view available workspaces.")},GD=class{static addFirewallRule=N.l10n.t("Add Firewall Rule");static addFirewallRuleToServer=e=>N.l10n.t({message:"Add Firewall Rule to {0}",args:[e],comment:["{0} is the server name"]})},Zu=class{static errorSigningIntoAzure(e){return N.l10n.t({message:"Error signing into Azure: {0}",args:[e],comment:["{0} is the error message"]})}static errorLoadingAzureAccountInfoForTenantId=e=>N.l10n.t({message:"Error loading Azure account information for tenant ID '{0}'",args:[e],comment:["{0} is the tenant ID"]});static errorCreatingFirewallRule=(e,t)=>N.l10n.t({message:"Error creating firewall rule {0}.  Check your Azure account settings and try again.  Error: {1}",args:[e,t],comment:["{0} is the rule info in format 'name (startIp - endIp)'","{1} is the error message"]});static failedToGetTenantForAccount=(e,t)=>N.l10n.t({message:"Failed to get tenant '{0}' for account '{1}'.",args:[e,t],comment:["{0} is the tenant id","{1} is the account name"]})},xs=class{static failedToGetWorkspacesForTenant=(e,t)=>N.l10n.t({message:"Failed to get Fabric workspaces for tenant '{0} ({1})'.",args:[e,t],comment:["{0} is the tenant name","{1} is the tenant id"]});static listingCapacitiesForTenant=e=>N.l10n.t({message:"Listing Fabric capacities for tenant '{0}'",args:[e],comment:["{0} is the tenant ID"]});static listingWorkspacesForTenant=e=>N.l10n.t({message:"Listing Fabric workspaces for tenant '{0}'",args:[e],comment:["{0} is the tenant ID"]});static gettingWorkspace=e=>N.l10n.t({message:"Getting Fabric workspace '{0}'",args:[e],comment:["{0} is the workspace ID"]});static listingSqlDatabasesForWorkspace=e=>N.l10n.t({message:"Listing Fabric SQL Databases for workspace '{0}'",args:[e],comment:["{0} is the workspace ID"]});static listingSqlEndpointsForWorkspace=e=>N.l10n.t({message:"Listing Fabric SQL Endpoints for workspace '{0}'",args:[e],comment:["{0} is the workspace ID"]});static gettingConnectionStringForSqlEndpoint=(e,t)=>N.l10n.t({message:"Getting connection string for SQL Endpoint '{0}' in workspace '{1}'",args:[e,t],comment:["{0} is the SQL endpoint ID","{1} is the workspace ID"]});static createWorkspaceWithCapacity=e=>N.l10n.t({message:"Creating workspace with capacity {0}",args:[e],comment:["{0} is the capacity ID"]});static createSqlDatabaseForWorkspace=e=>N.l10n.t({message:"Creating SQL Database for workspace {0}",args:[e],comment:["{0} is the workspace ID"]});static listingRoleAssignmentsForWorkspace=e=>N.l10n.t({message:"Listing role assignments for workspace '${workspaceId}'",args:[e],comment:["{0} is the workspace ID"]});static gettingFabricDatabase=e=>N.l10n.t({message:"Getting Fabric database '{0}'",args:[e],comment:["{0} is the database ID"]});static fabricApiError=(e,t)=>N.l10n.t({message:"Fabric API error occurred ({0}): {1}",args:[e,t],comment:["{0} is the error code","{1} is the error message"]});static fabricLongRunningApiError=(e,t)=>N.l10n.t({message:"Fabric long-running API error with error code '{0}': {1}",args:[e,t],comment:["{0} is the error code","{1} is the error message"]});static fabricAccount=N.l10n.t("Fabric Account");static fabricAccountIsRequired=N.l10n.t("Fabric Account is required");static workspace=N.l10n.t("Workspace");static selectAWorkspace=N.l10n.t("Select a Workspace");static searchWorkspaces=N.l10n.t("Search Workspaces");static workspaceIsRequired=N.l10n.t("Workspace is required");static insufficientWorkspacePermissions=N.l10n.t("Insufficient Worskpace Permissions");static insufficientCapacityPermissions=N.l10n.t("Insufficient Capacity Permissions")},fG=class{static invalidEntraAccountsRemoved=e=>N.l10n.t({message:"{0} invalid Entra accounts have been removed; you may need to run `MS SQL: Clear Microsoft Entra account token cache` and log in again.",args:[e],comment:["{0} is the number of invalid accounts that have been removed"]})},zh=class{static databaseName=N.l10n.t("Database Name");static enterDatabaseName=N.l10n.t("Enter Database Name");static databaseNameIsRequired=N.l10n.t("Database Name is required");static databaseDescription=N.l10n.t("Database Description");static enterDatabaseDescription=N.l10n.t("Enter Database Description");static workspacePermissionsError=N.l10n.t("Please select a workspace where you have sufficient permissions (Contributor or higher)");static databaseNameError=N.l10n.t("This database name is already in use. Please choose a different name.")},CT=class{static nonNumericSelectionSummary=(e,t,n)=>N.l10n.t({message:"Count: {0}  Distinct Count: {1}  Null Count: {2}",args:[e,t,n],comment:["{0} is the count, {1} is the distinct count, and {2} is the null count"]});static numericSelectionSummary=(e,t,n)=>N.l10n.t({message:"Average: {0}  Count: {1}  Sum: {2}",args:[e,t,n],comment:["{0} is the average, {1} is the count, {2} is the sum"]});static numericSelectionSummaryTooltip=(e,t,n,i,s,o,a)=>N.l10n.t({message:"Average: {0}  Count: {1}  Distinct Count: {2}  Max: {3}  Min: {4}  Null Count: {5}  Sum: {6}",args:[e,t,n,i,s,o,a],comment:["{0} is the average, {1} is the count, {2} is the distinct count, {3} is the max, {4} is the min, {5} is the null count, {6} is the sum"]})},Rr=class{static stoppedContainerSucessfully=e=>N.l10n.t({message:"{0} stopped successfully.",args:[e],comment:["{0} stopped successfully."]});static failStopContainer=e=>N.l10n.t({message:"Failed to stop {0}.",args:[e],comment:["Failed to stop {0}."]});static startedContainerSucessfully=e=>N.l10n.t({message:"{0} started successfully.",args:[e],comment:["{0} started successfully."]});static startingContainer=e=>N.l10n.t({message:"Starting {0}...",args:[e],comment:["{0} is the container name"]});static failStartContainer=e=>N.l10n.t({message:"Failed to start {0}.",args:[e],comment:["Failed to start {0}."]});static deletedContainerSucessfully=e=>N.l10n.t({message:"{0} deleted successfully.",args:[e],comment:["{0} deleted successfully."]});static failDeleteContainer=e=>N.l10n.t({message:"Failed to delete {0}.",args:[e],comment:["Failed to delete {0}."]});static selectImage=N.l10n.t("Select image");static selectImageTooltip=N.l10n.t("Select the SQL Server Container Image");static sqlServerVersionImage=e=>N.l10n.t({message:"SQL Server {0} - latest",args:[e],comment:["{0} is the SQL Server version"]});static sqlServerPasswordTooltip=N.l10n.t("SQL Server Container SA Password");static pleaseChooseUniqueProfileName=N.l10n.t("Please choose a unique name for the profile");static containerName=N.l10n.t("Container Name");static containerNameTooltip=N.l10n.t("Choose a name for the SQL Server Docker Container");static pleaseChooseUniqueContainerName=N.l10n.t("Please choose a unique name for the container");static port=N.l10n.t("Port");static portTooltip=N.l10n.t("Choose a port to host the SQL Server Docker Container");static pleaseChooseUnusedPort=N.l10n.t("Please make sure the port is a number, and choose a port that is not in use");static hostname=N.l10n.t("Hostname");static hostnameTooltip=N.l10n.t("Choose a hostname for the container");static termsAndConditions=N.l10n.t("Terms & Conditions");static acceptSqlServerEulaTooltip=N.l10n.t("Accept the SQL Server EULA to deploy a SQL Server Docker container");static acceptSqlServerEula=N.l10n.t("Please Accept the SQL Server EULA");static dockerInstallHeader=N.l10n.t("Checking if Docker is installed");static dockerInstallBody=N.l10n.t("Checking if Docker is installed on your machine");static dockerInstallError=N.l10n.t("Docker is not installed or not in PATH. Please install Docker Desktop and try again.");static startDockerHeader=N.l10n.t("Checking if Docker is started");static startDockerBody=N.l10n.t("Checking if Docker is running on your machine. If not, we'll start it for you.");static dockerError=N.l10n.t("Error running Docker commands. Please make sure Docker is running.");static startDockerEngineHeader=N.l10n.t("Checking Docker Engine Configuration");static startDockerEngineBody=N.l10n.t("Checking if the Docker Engine is configured correctly on your machine.");static pullImageHeader=N.l10n.t("Pulling SQL Server Image");static pullImageBody=N.l10n.t("Pulling the SQL Server container image. This might take a few minutes depending on your internet connection.");static creatingContainerHeader=N.l10n.t("Creating Container");static creatingContainerBody=N.l10n.t("Creating and starting your SQL Server container");static settingUpContainerHeader=N.l10n.t("Setting up container");static settingUpContainerBody=N.l10n.t("Readying container for connections.");static connectingToContainerHeader=N.l10n.t("Connecting to Container");static connectingToContainerBody=N.l10n.t("Connecting to your SQL Server Docker container");static passwordLengthError=N.l10n.t("Please make your password 8-128 characters long.");static passwordComplexityError=N.l10n.t("Your password must contain characters from at least three of the following categories: uppercase letters, lowercase letters, numbers (0-9), and special characters (!, $, #, %, etc.).");static pullSqlServerContainerImageError=N.l10n.t("Failed to pull SQL Server image. Please check your network connection and try again.");static unsupportedDockerPlatformError=e=>N.l10n.t({message:"Unsupported platform for Docker: {0}",args:[e],comment:["{0} is the platform name of the machine"]});static unsupportedDockerArchitectureError=e=>N.l10n.t({message:"Unsupported architecture for Docker: {0}",args:[e],comment:["{0} is the architecture name of the machine"]});static rosettaError=N.l10n.t('Rosetta is required to run SQL Server container images on Apple Silicon. Enable "Use Rosetta for x86_64/amd64 emulation on Apple Silicon" in Docker Desktop > Settings > General.');static windowsContainersError=N.l10n.t("SQL Server does not support Windows containers. Please switch to Linux containers in Docker Desktop settings.");static linuxDockerPermissionsError=N.l10n.t("Docker requires root permissions to run. Please run Docker with sudo or add your user to the docker group using sudo usermod -aG docker $USER. Then, reboot your machine and retry.");static dockerFailedToStartWithinTimeout=N.l10n.t("Docker failed to start within the timeout period. Please manually start Docker and try again.");static containerFailedToStartWithinTimeout=N.l10n.t("Container failed to start within the timeout period. Please wait a few minutes and try again.");static dockerDesktopPathError=N.l10n.t("We can't find where Docker Desktop is located on your machine. Please manually start Docker Desktop and try again.");static installDocker=N.l10n.t("Install Docker");static msgCreateLocalSqlContainer=N.l10n.t("Create Local SQL Container");static startingDockerLoadingLabel=N.l10n.t("Starting Docker...");static startingContainerLoadingLabel=N.l10n.t("Starting Container...");static readyingContainerLoadingLabel=N.l10n.t("Readying container for connections...");static stoppingContainerLoadingLabel=N.l10n.t("Stopping Container...");static deletingContainerLoadingLabel=N.l10n.t("Deleting Container...");static deleteContainerConfirmation=e=>N.l10n.t({message:"Are you sure you want to delete the container {0}? This will remove both the container and its connection from VS Code.",args:[e],comment:["{0} is the container name"]});static configureLinuxContainers=N.l10n.t("Configure Linux containers");static configureRosetta=N.l10n.t("Configure Rosetta in Docker Desktop");static switchToLinuxContainersConfirmation=N.l10n.t("Your Docker Engine currently runs Windows containers. SQL Server only supports Linux containers. Would you like to switch to Linux containers?");static switchToLinuxContainersCanceled=N.l10n.t("Switching to Linux containers was canceled. SQL Server only supports Linux containers.");static startSqlServerContainerError=N.l10n.t("Failed to start SQL Server container. Please check the error message for more details, and then try again.");static containerDoesNotExistError=N.l10n.t("Container does not exist. Would you like to remove the connection?");static passwordPlaceholder=N.l10n.t("Enter password");static containerNamePlaceholder=N.l10n.t("Enter container name");static portPlaceholder=N.l10n.t("Enter port");static hostnamePlaceholder=N.l10n.t("Enter hostname")},rl=class{static overallHowSatisfiedAreYouWithMSSQLExtension=N.l10n.t("Overall, how satisfied are you with the MSSQL extension?");static howlikelyAreYouToRecommendMSSQLExtension=N.l10n.t("How likely it is that you would recommend the MSSQL extension to a friend or colleague?");static whatCanWeDoToImprove=N.l10n.t("What can we do to improve?");static takeSurvey=N.l10n.t("Take Survey");static doYouMindTakingAQuickFeedbackSurvey=N.l10n.t("Do you mind taking a quick feedback survey about the MSSQL Extension for VS Code?");static mssqlFeedback=N.l10n.t("MSSQL Feedback");static privacyDisclaimer=N.l10n.t("Microsoft reviews your feedback to improve our products, so don't share any personal data or confidential/proprietary content.");static overallHowStatisfiedAreYouWithFeature=e=>N.l10n.t({message:"Overall, how satisfied are you with {0}?",args:[e],comment:["{0} is the feature name"]});static howLikelyAreYouToRecommendFeature=e=>N.l10n.t({message:"How likely it is that you would recommend {0} to a friend or colleague?",args:[e],comment:["{0} is the feature name"]});static fileAnIssuePrompt=N.l10n.t("Encountering a problem?  Share the details with us by opening a GitHub issue so we can improve!");static submitIssue=N.l10n.t("Submit an issue")},fg=class{static webviewRestorePrompt=e=>N.l10n.t({message:"{0} has been closed. Would you like to restore it?",args:[e],comment:["{0} is the webview name"]});static Restore=N.l10n.t("Restore")},Dl=class{static General=N.l10n.t("General");static Columns=N.l10n.t("Columns");static AdvancedOptions=N.l10n.t("Advanced Options")},ps=class{static Title=N.l10n.t("Schema Compare");static Open=N.l10n.t("Open");static Save=N.l10n.t("Save");static defaultUserName=N.l10n.t("default");static Yes=N.l10n.t("Yes");static No=N.l10n.t("No");static optionsChangedMessage=N.l10n.t("Options have changed. Recompare to see the comparison?");static generateScriptErrorMessage=e=>N.l10n.t({message:"Failed to generate script: '{0}'",args:[e||"Unknown"],comment:["{0} is the error message returned from the generate script operation"]});static areYouSureYouWantToUpdateTheTarget=N.l10n.t("Are you sure you want to update the target?");static schemaCompareApplyFailed=e=>N.l10n.t({message:"Failed to apply changes: '{0}'",args:[e||"Unknown"],comment:["{0} is the error message returned from the publish changes operation"]});static openScmpErrorMessage=e=>N.l10n.t({message:"Failed to open scmp file: '{0}'",args:[e||"Unknown"],comment:["{0} is the error message returned from the open scmp operation"]});static saveScmpErrorMessage=e=>N.l10n.t({message:"Failed to save scmp file: '{0}'",args:[e||"Unknown"],comment:["{0} is the error message returned from the save scmp operation"]});static cancelErrorMessage=e=>N.l10n.t({message:"Cancel schema compare failed: '{0}'",args:[e||"Unknown"],comment:["{0} is the error message returned from the cancel operation"]});static compareErrorMessage=e=>N.l10n.t({message:"Schema Compare failed: '{0}'",args:[e||"Unknown"],comment:["{0} is the error message returned from the compare operation"]});static cannotExcludeEntryWithBlockingDependency=(e,t)=>N.l10n.t({message:"Cannot exclude {0}. Included dependents exist, such as {1}",args:[e,t],comment:["{0} is the name of the entry","{1} is the name of the blocking dependency preventing exclusion."]});static cannotIncludeEntryWithBlockingDependency=(e,t)=>N.l10n.t({message:"Cannot include {0}. Excluded dependents exist, such as {1}",args:[e,t],comment:["{0} is the name of the entry","{1} is the name of the blocking dependency preventing inclusion."]});static cannotExcludeEntry=e=>N.l10n.t({message:"Cannot exclude {0}. Included dependents exist",args:[e],comment:["{0} is the name of the entry"]});static cannotIncludeEntry=e=>N.l10n.t({message:"Cannot include {0}. Excluded dependents exist",args:[e],comment:["{0} is the name of the entry"]})},Fh=class{static LoadingSchemaDesginerModel=N.l10n.t("Loading Schema Designer Model...");static SchemaReady=N.l10n.t("Schema Designer Model is ready. Changes can now be published.");static SaveAs=N.l10n.t("Save As");static Save=N.l10n.t("Save");static SchemaDesigner=N.l10n.t("Schema Designer");static OpeningPublishScript=N.l10n.t("Opening Publish Script. This may take a while...");static GeneratingReport=N.l10n.t("Generating Report. This may take a while...");static PublishScriptFailed=e=>N.l10n.t({message:"Failed to generate publish script: '{0}'",args:[e||"Unknown"],comment:["{0} is the error message returned from the generate script operation"]})},gg=class{static disconnectedLabel=N.l10n.t("Connect to MSSQL");static notConnectedTooltip=N.l10n.t("Click to connect to a database");static connectingLabel=N.l10n.t("Connecting");static connectErrorLabel=N.l10n.t("Connection error")},nl=class{static connectingToProfile=e=>N.l10n.t({message:"Connecting to {0}...",args:[e],comment:["{0} is the connection display name"]});static missingConnectionIdsError=e=>N.l10n.t({message:`The following workspace or workspace folder connections are missing the 'id' property and are being ignored.  Please manually add the 'id' property to the connection in order to use it. 

 {0}`,args:[e.join(`
`)],comment:["{0} is the list of display names for the connections that have been ignored"]});static missingConnectionInformation=e=>N.l10n.t({message:"The connection with ID '{0}' does not have the 'server' property set and is being ignored.  Please set the 'server' property on this connection in order to use it.",args:[e],comment:["{0} is the connection ID for the connection that has been ignored"]});static errorMigratingLegacyConnection=(e,t)=>N.l10n.t({message:`Error migrating connection ID {0} to new format.  Please recreate this connection to use it.
Error:
{1}`,args:[e,t],comment:["{0} is the connection id","{1} is the error message"]});static noAccountSelected=N.l10n.t("No account selected");static currentAccount=e=>N.l10n.t({message:"{0} (Current Account)",args:[e],comment:["{0} is the account display name"]});static signInToAzure=N.l10n.t("Sign in to a new account");static SelectAccountForKeyVault=N.l10n.t("Select Azure account with Key Vault access for column decryption");static NoTenantSelected=N.l10n.t("No tenant selected");static SelectTenant=N.l10n.t("Select a tenant")},mt=class{static noModelFound=N.l10n.t("No model found.");static noToolsToProcess=N.l10n.t("No tools to process.");static notConnected=N.l10n.t("You are not connected to any database.");static connectedTo=N.l10n.t("Connected to:");static server=e=>N.l10n.t({message:"Server - {0}",args:[e],comment:["{0} is the server name"]});static database=e=>N.l10n.t({message:"Database - {0}",args:[e],comment:["{0} is the database name"]});static usingModel=(e,t)=>N.l10n.t({message:"Using {0} ({1})...",args:[e,t],comment:["{0} is the model name","{1} is whether the model can send requests"]});static toolLookupFor=(e,t)=>N.l10n.t({message:"Tool lookup for: {0} - {1}.",args:[e,t],comment:["{0} is the part name","{1} is the part input"]});static gotInvalidToolUseParameters=(e,t)=>N.l10n.t({message:'Got invalid tool use parameters: "{0}". ({1})',args:[e,t],comment:["{0} is the part input","{1} is the error message"]});static callingTool=(e,t)=>N.l10n.t({message:"Calling tool: {0} with {1}.",args:[e,t],comment:["{0} is the tool function name","{1} is the SQL tool parameters"]});static modelNotFoundError=N.l10n.t("The requested model could not be found. Please check model availability or try a different model.");static noPermissionError=N.l10n.t("Access denied. Please ensure you have the necessary permissions to use this tool or model.");static quoteLimitExceededError=N.l10n.t("Usage limits exceeded. Try again later, or consider optimizing your requests.");static offTopicError=N.l10n.t("I'm sorry, I can only assist with SQL-related questions.");static unexpectedError=N.l10n.t("An unexpected error occurred with the language model. Please try again.");static usingModelToProcessRequest=e=>N.l10n.t({message:"Using {0} to process your request...",args:[e],comment:["{0} is the model name that will be processing the request"]});static languageModelDidNotReturnAnyOutput=N.l10n.t("The language model did not return any output.");static errorOccurredWhileProcessingRequest=N.l10n.t("An error occurred while processing your request.");static errorOccurredWith=e=>N.l10n.t({message:"An error occurred: {0}",args:[e],comment:["{0} is the error message"]});static unknownErrorOccurred=N.l10n.t("An unknown error occurred. Please try again.");static listServersToolConfirmationTitle=N.l10n.t("List Connections");static listServersToolConfirmationMessage=N.l10n.t("List all connections registered with the mssql extension?");static listServersToolInvocationMessage=N.l10n.t("Listing server connections");static connectToolConfirmationTitle=N.l10n.t("Connect to Server");static connectToolConfirmationMessageWithServerOnly=e=>N.l10n.t({message:"Connect to server {0}?",args:[e],comment:["{0} is the server name"]});static connectToolConfirmationMessageWithServerAndDatabase=(e,t)=>N.l10n.t({message:"Connect to server {0} and database {1}?",args:[e,t],comment:["{0} is the server name","{1} is the database name"]});static connectToolInvocationMessageWithServerOnly=e=>N.l10n.t({message:"Connecting to server {0}",args:[e],comment:["{0} is the server name"]});static connectToolInvocationMessageWithServerAndDatabase=(e,t)=>N.l10n.t({message:"Connecting to server {0} and database {1}",args:[e,t],comment:["{0} is the server name","{1} is the database name"]});static connectToolServerNotFoundError=e=>N.l10n.t({message:"Server {0} not found.",args:[e],comment:["{0} is the server name"]});static connectToolSuccessMessage=N.l10n.t("Successfully connected to server.");static connectToolFailMessage=N.l10n.t("Failed to connect to server.");static connectToolProfileNotFoundError=e=>N.l10n.t({message:"Connection profile '{0}' not found.",args:[e],comment:["{0} is the profile ID"]});static connectToolInvalidInputError=()=>N.l10n.t("Either profileId or serverName must be provided.");static connectToolConfirmationMessageWithProfile=e=>N.l10n.t({message:"Connect using profile {0}?",args:[e],comment:["{0} is the profile ID"]});static connectToolInvocationMessageWithProfile=e=>N.l10n.t({message:"Connecting using profile {0}",args:[e],comment:["{0} is the profile ID"]});static disconnectToolConfirmationTitle=N.l10n.t("Disconnect");static disconnectToolConfirmationMessage=e=>N.l10n.t({message:"Disconnect from connection '{0}'?",args:[e],comment:["{0} is the connection ID"]});static disconnectToolInvocationMessage=e=>N.l10n.t({message:"Disconnecting from connection '{0}'",args:[e],comment:["{0} is the connection ID"]});static showSchemaToolConfirmationTitle=N.l10n.t("Show Schema");static showSchemaToolConfirmationMessage=e=>N.l10n.t({message:"Show schema for connection '{0}'?",args:[e],comment:["{0} is the connection ID"]});static showSchemaToolInvocationMessage=e=>N.l10n.t({message:"Showing schema for connection '{0}'",args:[e],comment:["{0} is the connection ID"]});static noConnectionError=e=>N.l10n.t({message:"No connection found for connectionId: {0}",args:[e],comment:["{0} is the connection ID"]});static showSchemaToolSuccessMessage=N.l10n.t("Schema visualization opened.");static getConnectionDetailsToolConfirmationTitle=N.l10n.t("Get Connection Details");static getConnectionDetailsToolConfirmationMessage=e=>N.l10n.t({message:"Get connection details for connection '{0}'?",args:[e],comment:["{0} is the connection ID"]});static getConnectionDetailsToolInvocationMessage=e=>N.l10n.t({message:"Getting connection details for connection '{0}'",args:[e],comment:["{0} is the connection ID"]});static listDatabasesToolConfirmationTitle=N.l10n.t("List Databases");static listDatabasesToolConfirmationMessage=e=>N.l10n.t({message:"List databases for connection '{0}'?",args:[e],comment:["{0} is the connection ID"]});static listDatabasesToolInvocationMessage=e=>N.l10n.t({message:"Listing databases for connection '{0}'",args:[e],comment:["{0} is the connection ID"]});static changeDatabaseToolConfirmationTitle=N.l10n.t("Change Database");static changeDatabaseToolConfirmationMessage=(e,t)=>N.l10n.t({message:"Change database to '{1}' for connection '{0}'?",args:[e,t],comment:["{0} is the connection ID","{1} is the database name"]});static changeDatabaseToolInvocationMessage=(e,t)=>N.l10n.t({message:"Changing database to '{1}' for connection '{0}'",args:[e,t],comment:["{0} is the connection ID","{1} is the database name"]});static changeDatabaseToolSuccessMessage=e=>N.l10n.t({message:"Successfully changed to database: {0}",args:[e],comment:["{0} is the database name"]});static changeDatabaseToolFailMessage=e=>N.l10n.t({message:"Failed to connect to database: {0}",args:[e],comment:["{0} is the database name"]});static ListTablesToolConfirmationTitle=N.l10n.t("List Tables");static ListTablesToolConfirmationMessage=e=>N.l10n.t({message:"List tables for connection '{0}'?",args:[e],comment:["{0} is the connection ID"]});static ListTablesToolInvocationMessage=e=>N.l10n.t({message:"Listing tables for connection '{0}'",args:[e],comment:["{0} is the connection ID"]});static ListSchemasToolConfirmationTitle=N.l10n.t("List Schemas");static ListSchemasToolConfirmationMessage=e=>N.l10n.t({message:"List schemas for connection '{0}'?",args:[e],comment:["{0} is the connection ID"]});static ListSchemasToolInvocationMessage=e=>N.l10n.t({message:"Listing schemas for connection '{0}'",args:[e],comment:["{0} is the connection ID"]});static ListViewsToolConfirmationTitle=N.l10n.t("List Views");static ListViewsToolConfirmationMessage=e=>N.l10n.t({message:"List views for connection '{0}'?",args:[e],comment:["{0} is the connection ID"]});static ListViewsToolInvocationMessage=e=>N.l10n.t({message:"Listing views for connection '{0}'",args:[e],comment:["{0} is the connection ID"]});static ListFunctionsToolConfirmationTitle=N.l10n.t("List Functions");static ListFunctionsToolConfirmationMessage=e=>N.l10n.t({message:"List functions for connection '{0}'?",args:[e],comment:["{0} is the connection ID"]});static ListFunctionsToolInvocationMessage=e=>N.l10n.t({message:"Listing functions for connection '{0}'",args:[e],comment:["{0} is the connection ID"]});static RunQueryToolConfirmationTitle=N.l10n.t("Run Query");static RunQueryToolConfirmationMessage=(e,t)=>N.l10n.t({message:`Run query on connection '{0}'?

Query: {1}`,args:[e,t],comment:["{0} is the connection ID","{1} is the SQL query"]});static RunQueryToolInvocationMessage=e=>N.l10n.t({message:"Running query on connection '{0}'",args:[e],comment:["{0} is the connection ID"]});static connectedSuccessfully=N.l10n.t("Connected successfully");static failedToConnect=N.l10n.t("Failed to connect");static disconnectedSuccessfully=N.l10n.t("Disconnected successfully");static databaseChangedSuccessfully=N.l10n.t("Database changed successfully");static failedToChangeDatabase=N.l10n.t("Failed to change database");static noActiveConnectionForDatabaseChange=N.l10n.t("No active connection for database change");static connectionDetails=N.l10n.t("Connection Details");static serverLabel=N.l10n.t("Server");static databaseLabel=N.l10n.t("Database");static authentication=N.l10n.t("Authentication");static sqlLogin=N.l10n.t("SQL Login");static serverVersion=N.l10n.t("Server Version");static serverEdition=N.l10n.t("Server Edition");static cloud=N.l10n.t("Cloud");static yes=N.l10n.t("Yes");static no=N.l10n.t("No");static user=N.l10n.t("User");static noConnectionInformationFound=N.l10n.t("No connection information found");static noActiveConnection=N.l10n.t("No active connection");static openingSchemaDesigner=N.l10n.t("Opening schema designer...");static noConnectionCredentialsFound=N.l10n.t("No connection credentials found");static noActiveConnectionForSchemaView=N.l10n.t("No active connection for schema view");static availableServers=N.l10n.t("Available Servers");static noSavedConnectionProfilesFound=N.l10n.t("No saved connection profiles found.");static useConnectToCreateNewConnection=e=>N.l10n.t({message:"Use {0} to create a new connection.",args:[e],comment:["{0} is the connect command"]});static unnamedProfile=N.l10n.t("Unnamed Profile");static default=N.l10n.t("Default");static foundSavedConnectionProfiles=e=>N.l10n.t({message:"Found {0} saved connection profile(s).",args:[e],comment:["{0} is the number of connection profiles"]});static errorRetrievingServerList=e=>N.l10n.t({message:"Error retrieving server list: {0}",args:[e],comment:["{0} is the error message"]});static unknownError=N.l10n.t("Unknown error");static noActiveDatabaseConnection=N.l10n.t("No active database connection in the current editor. Please establish a connection to continue.");static chatCommandNotAvailable=N.l10n.t("Chat command not available in this VS Code version")},sC=class{static codeLensConnect=N.l10n.t("$(plug)  Connect to MSSQL");static queryCancelFailed(e){return N.l10n.t({message:"Cancel failed: {0}",args:[e],comment:["{0} is the error message"]})}static queryDisposeFailed(e){return N.l10n.t({message:"Failed disposing query: {0}",args:[e],comment:["{0} is the error message"]})}},es=class{static connectionSharingRequestNotification(e){return N.l10n.t({message:"The extension '{0}' is requesting access to your SQL Server connections. This will allow it to execute queries and access your database.",args:[e],comment:["{0} is the extension name"]})}static Approve=N.l10n.t("Approve");static Deny=N.l10n.t("Deny");static GrantAccess=N.l10n.t("\u2705 Grant Access");static GrantAccessCurrent=N.l10n.t("\u2705 Grant Access (Current)");static DenyAccess=N.l10n.t("\u274C Deny Access");static DenyAccessCurrent=N.l10n.t("\u274C Deny Access (Current)");static AllowThisExtensionToAccessYourConnections=N.l10n.t("Allow this extension to access your connections");static BlockThisExtensionFromAccessingYourConnections=N.l10n.t("Block this extension from accessing your connections");static SelectAnExtensionToManage=N.l10n.t("Select an extension to manage connection sharing permissions");static SelectNewPermission=e=>N.l10n.t({message:"Select new permission for extension: '{0}'",args:[e],comment:["{0} is the extension name"]});static ClearAllPermissions=N.l10n.t("Clear permissions for all extensions to access your connections");static Clear=N.l10n.t("Clear");static Cancel=N.l10n.t("Cancel");static AllPermissionsCleared=N.l10n.t("All permissions for extensions to access your connections have been cleared.");static noActiveEditorError=N.l10n.t("No active text editor found. Please open a file with an active database connection.");static connectionNotFoundError(e){return N.l10n.t({message:'Connection with ID "{0}" not found. Please verify the connection ID exists.',args:[e],comment:["{0} is the connection ID"]})}static failedToEstablishConnectionError(e){return N.l10n.t({message:'Failed to establish connection with ID "{0}". Please check connection details and network connectivity.',args:[e],comment:["{0} is the connection ID"]})}static invalidConnectionUri=N.l10n.t("Invalid connection URI provided.");static connectionNotActive=N.l10n.t("Connection is not active. Please establish a connection before performing this action.");static permissionDenied(e){return N.l10n.t({message:"Connection sharing permission denied for extension: '{0}'. Use the permission management commands to change this.",args:[e],comment:["{0} is the extension ID"]})}static permissionRequired(e){return N.l10n.t({message:"Connection sharing permission is required for extension: '{0}'",args:[e],comment:["{0} is the extension ID"]})}},$D=class{static createNewGroup=N.l10n.t("Create Connection Group");static editExistingGroup=e=>N.l10n.t({message:"Edit Connection Group - {0}",args:[e],comment:["{0} is the connection group name"]})};var bg=class{constructor(e){this.logger=e}async makeGetRequest(e,t){let n=this.setupConfigAndProxyForRequest(e,t);e=this.constructRequestUrl(e,n);let i=await BD.get(e,n);return this.logger?.piiSanitized("GET request ",[{name:"response",objOrArray:i.data?.value??i.data}],[],e),i}async makePostRequest(e,t,n){let i=this.setupConfigAndProxyForRequest(e,t);e=this.constructRequestUrl(e,i);let s=await BD.post(e,n,i);return this.logger?.piiSanitized("POST request ",[{name:"response",objOrArray:s.data}],[],e),s}setupConfigAndProxyForRequest(e,t){let n={headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},validateStatus:()=>!0},i=Gke.workspace.getConfiguration("http"),s=i.proxy;if(s||(this.logger?.verbose("Workspace HTTP config didn't contain a proxy endpoint. Checking environment variables."),s=this.loadEnvironmentProxyValue()),s){this.logger?.verbose("Proxy endpoint found in environment variables or workspace configuration."),n.proxy=!1;let o=this.createProxyAgent(e,s,i.proxyStrictSSL);o.isHttps?n.httpsAgent=o.agent:n.httpAgent=o.agent}return n}constructRequestUrl(e,t){if(!t.proxy){let s=IG.parse(e),o=s.protocol?.startsWith("https")?443:80;return`${s.protocol}//${s.hostname}:${o}${s.path}`}return e}loadEnvironmentProxyValue(){let e="HTTP_PROXY",t="HTTPS_PROXY";if(!process){this.logger?.verbose("No process object found, unable to read environment variables for proxy.");return}if(process.env[e]||process.env[e.toLowerCase()])return this.logger?.verbose("Loading proxy value from HTTP_PROXY environment variable."),process.env[e]||process.env[e.toLowerCase()];if(process.env[t]||process.env[t.toLowerCase()])return this.logger?.verbose("Loading proxy value from HTTPS_PROXY environment variable."),process.env[t]||process.env[t.toLowerCase()];this.logger?.verbose("No proxy value found in either HTTPS_PROXY or HTTP_PROXY environment variables.")}createProxyAgent(e,t,n){let i=this.getProxyAgentOptions(IG.parse(e),t,n);if(!i||!i.host||!i.port)throw this.logger?.error("Unable to read proxy agent options to create proxy agent."),new Error(JDe);let s={};typeof i.auth=="string"&&i.auth?s={proxy:{proxyAuth:i.auth,host:i.host,port:Number(i.port)}}:s={proxy:{host:i.host,port:Number(i.port)}};let o=e.startsWith("https"),a=t.startsWith("https");return{isHttps:a,agent:this.createTunnelingAgent(o,a,s)}}createTunnelingAgent(e,t,n){return e&&t?(this.logger?.verbose("Creating https request over https proxy tunneling agent"),qv.httpsOverHttps(n)):e&&!t?(this.logger?.verbose("Creating https request over http proxy tunneling agent"),qv.httpsOverHttp(n)):!e&&t?(this.logger?.verbose("Creating http request over https proxy tunneling agent"),qv.httpOverHttps(n)):(this.logger?.verbose("Creating http request over http proxy tunneling agent"),qv.httpOverHttp(n))}getProxyAgentOptions(e,t,n){let i=t||this.getSystemProxyURL(e);if(!i)return;let s=IG.parse(i);return/^https?:$/.test(s.protocol)?{host:s.hostname,port:Number(s.port),auth:s.auth,rejectUnauthorized:typeof n=="boolean"}:void 0}getSystemProxyURL(e){if(e.protocol==="http:")return process.env.HTTP_PROXY||process.env.http_proxy||void 0;if(e.protocol==="https:")return process.env.HTTPS_PROXY||process.env.https_proxy||process.env.HTTP_PROXY||process.env.http_proxy||void 0}};var Mzt="azureActiveDirectory";async function eM(r,e){let t=[],n=await r.next();for(;!n.done;)t.push(e(n.value)),n=await r.next();return t}function xG(r){return new Hke.SubscriptionClient(new cT(r))}function Wke(r,e){return new $ke.ResourceManagementClient(new cT(r),e)}function Kke(r,e){return new Vke.SqlManagementClient(new cT(r),e)}function Nie(){return oC.workspace.getConfiguration(OAe)}function _g(){let r=Nie();if(r){let e=r.get(Mzt);if(e)return Sm[e]}else return 0}function zv(){let r=Nie();if(r){let e=r.get(cne);if(e!==void 0)return e}return!0}function Qke(){let r=Nie();if(r){let e=r.get(MAe);if(e!==void 0)return e}return!1}function OG(){switch(process.platform){case"win32":return process.env.APPDATA||RG.join(process.env.USERPROFILE,"AppData","Roaming");case"darwin":return RG.join(Aie.homedir(),"Library","Application Support");case"linux":return process.env.XDG_CONFIG_HOME||RG.join(Aie.homedir(),".config");default:throw new Error("Platform not supported")}}async function Yke(r){let e=oC.Uri.parse("https://graph.microsoft.com/v1.0/"),t=oC.Uri.joinPath(e,`users/${r}/memberOf`),n=new bg,s=(await oC.authentication.getSession("microsoft",[],{createIfNone:!0}))?.accessToken;if(!s)throw new Error("No access token found");let o=[],a=t.toString();for(;a;)try{let c=await n.makeGetRequest(a,s),l=c.data.value.map(u=>({displayName:u.displayName,id:u.id}));o=o.concat(l),a=c.data["@odata.nextLink"]}catch(c){console.error("Error fetching user groups:",c)}return o}var AG=class{constructor(e=xG,t=Wke,n=Kke){this._subscriptionClientFactory=e;this._resourceManagementClientFactory=t;this._sqlManagementClientFactory=n}async getLocations(e){let t=this._subscriptionClientFactory(e.token);if(e.subscription?.subscriptionId){let n=await t.subscriptions.listLocations(e.subscription.subscriptionId);return(await eM(n,s=>s)).sort((s,o)=>(s.name||"").localeCompare(o.name||""))}else throw new Error("Invalid session")}async createOrUpdateServer(e,t,n,i,s){if(e&&t){let o=this._sqlManagementClientFactory(s,e);if(o)return(await o.servers.beginCreateOrUpdateAndWait(t,n,i)).fullyQualifiedDomainName}}async getResourceGroups(e){if(e.subscription?.subscriptionId){let n=await this._resourceManagementClientFactory(e.token,e.subscription.subscriptionId).resourceGroups.list();return(await eM(n,s=>s)).sort((s,o)=>(s.name||"").localeCompare(o.name||""))}else throw new Error("Invalid session")}};var jh="sql",aC="ms-mssql.mssql",hn="mssql",fi="mssql",Jke="telemetry",il="MSSQL",Uh="mssql",tM="None";var Zke="vscode-mssql",eLe="MSSQL";var cC="connections",NT="connectionGroups",tLe="disconnectedServer";var NG="Server",rLe="disconnectedDockerContainer",nLe="DockerContainer";var Die="mssql.runQuery",Mie="mssql.runCurrentStatement",kie="mssql.cancelQuery",iLe="mssql.revealQueryResult",sLe="mssql.copyAll",Fv="mssql.connect",rM="mssql.disconnect",Lie="mssql.changeDatabase",lC="mssql.chooseDatabase",nM="mssql.chooseLanguageFlavor";var qie="mssql.showGettingStarted",DG="mssql.refreshQueryHistory",oLe="mssql.clearAllQueryHistory",aLe="mssql.deleteQueryHistory",cLe="mssql.openQueryHistory",lLe="mssql.runQueryHistory",uLe="mssql.startQueryHistoryCapture",dLe="mssql.pauseQueryHistoryCapture",pLe="mssql.commandPaletteQueryHistory",zie="mssql.newQuery",mLe="mssql.schemaCompare",hLe="mssql.schemaCompareOpenFromCommandPalette",Fie="mssql.manageProfiles",jie="mssql.clearPooledConnections",Uie="mssql.rebuildIntelliSenseCache",ed="mssql.addObjectExplorer",Bie="mssql.addObjectExplorerLegacy",Gie="mssql.connectionGroups.create",$ie="mssql.connectionGroups.edit",Vie="mssql.connectionGroups.delete",fLe="mssql.objectExplorerNewQuery",Hie="mssql.objectExplorerChatWithDatabase",Wie="mssql.objectExplorerChatWithDatabaseInAgentMode",gLe="mssql.copilot.explainQuery",yLe="mssql.copilot.rewriteQuery",vLe="mssql.copilot.analyzeQueryPerformance",bLe="mssql.removeObjectExplorerNode",_Le="mssql.refreshObjectExplorerNode",SLe="mssql.disconnectObjectExplorerNode",MG="mssql.objectExplorerNodeSignIn",kG="mssql.connectObjectExplorerNode",iM="mssql.connectObjectExplorerProfile";var LG="mssql.objectExplorer.groupBySchema",Kie="mssql.objectExplorer.enableGroupBySchema",Qie="mssql.objectExplorer.disableGroupBySchema",CLe="objectExplorer.collapseConnectionGroupsOnStartup",qG="mssql.enableRichExperiences",PLe="mssql.scriptSelect",wLe="mssql.scriptCreate",ELe="mssql.scriptDelete",TLe="mssql.scriptExecute",ILe="mssql.scriptAlter",sM="mssql.toggleSqlCmd",RLe="mssql.copyObjectName",xLe="mssql.filterNode",OLe="mssql.filterNodeWithExistingFilters",ALe="mssql.clearFilters";var Yie="mssql.loadCompletionExtension";var Xie="mssql.removeAadAccount",Jie="mssql.addAadAccount",Zie="mssql.clearAzureAccountTokenCache",NLe="workbench.action.chat.openagent",DLe="workbench.action.chat.openAgent",ese="mssql.showEstimatedPlan",MLe="mssql.enableActualPlan",kLe="mssql.disableActualPlan",LLe="mssql.newTable",qLe="mssql.editTable",zLe="mssql.editConnection",tse="mssql.userFeedback",FLe="mssql.schemaDesigner",oM="mssql.deployNewDatabase",jLe="mssql.stopContainer",ULe="mssql.deleteContainer",BLe="mssql.startContainer",GLe="piiLogging",$Le="mssql.piiLogging",VLe="mssql.enableSqlAuthenticationProvider",HLe="mssql.enableConnectionPooling",WLe=".database.windows.net";var Qa="AzureMFA";var zG="Integrated",Ya="SqlLogin",rse="master";var aM="localhost",nse="127.0.0.1",ise="sql_server_container";var KLe="https://github.com/Microsoft/vscode-mssql/wiki/OpenSSL-Configuration",QLe="https://aka.ms/mssql-getting-started",YLe="https://aka.ms/vscode-mssql-changes",XLe="https://aka.ms/vscodemssql-connection",JLe="https://aka.ms/vscode-mssql-integratedauth",ZLe="https://github.com/Microsoft/vscode-mssql/wiki/SqlToolsService-Known-Issues",eqe="ms-vscode.azure-account",tqe="Database";var sse=/\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b/,rqe=/^[a-zA-Z0-9][a-zA-Z0-9_.-]{0,78}[a-zA-Z0-9_]?$/,jv="azureAccount";var nqe="accessTokenCache",FG="mssql_connect",jG="mssql_disconnect",UG="mssql_list_servers",BG="mssql_list_databases",GG="mssql_list_tables",$G="mssql_list_schemas",VG="mssql_list_views",HG="mssql_list_functions",WG="mssql_run_query",KG="mssql_change_database",QG="mssql_show_schema",YG="mssql_get_connection_details",iqe="copyIncludeHeaders",XG="logDebugInfo";var cM="saveAsCsv",sqe="saveAsJson";var lM="recentConnections",oqe="maxRecentConnections",aqe="copyRemoveNewLine",JG="splitPaneSelection",cqe="showBatchTime",ZG=(i=>(i.Shortcuts="shortcuts",i.MessagesDefaultOpen="messagesDefaultOpen",i.ResultsFontSize="resultsFontSize",i.ResultsFontFamily="resultsFontFamily",i))(ZG||{}),e2="installDir",t2="executableFiles",r2="version",n2="downloadUrl";var lqe="queryHistoryLimit",uM="enableQueryHistoryCapture",i2="enableQueryHistoryFeature",ose="mssql.enableExperimentalFeatures",uC="mssql.enableRichExperiences",ase="mssql.enableRichExperiencesDoNotShowPrompt",uqe="https://aka.ms/mssql-rich-features",dM="mssql.openQueryResultsInTabByDefault",pM="mssql.useLegacyConnectionExperience",cse="mssql.openQueryResultsInTabByDefaultDoNotShowPrompt",dqe="resultsGrid.autoSizeColumns",lse="resultsGrid.inMemoryDataProcessingThreshold",s2="mssql.autoDisableNonTSqlLanguageService",use="mssql.copilotDebugLogging",dC="mssql.selectedAzureSubscriptions",pqe="mssql.query.showActiveConnectionAsCodeLensSuggestion",mqe="statusBar.connectionInfoMaxLength",o2="mssql.statusBar.enableConnectionColor",dse="mssql.schemaDesigner.enableExpandCollapseButtons",hqe="mssql.connectionManagement.rememberPasswordsUntilRestart",fqe="Installing SQL tools service to",gqe="Installing",a2="Downloading",pse="Sql Tools Service installed",yqe="Failed to install Sql Tools Service",vqe="SQL Tools Service component could not start.",mse="View Known Issues";var bqe="Initializing SQL tools service for the mssql extension.",_qe="Note: mssql commands will be available after installing the service.",Sqe="The platform is not supported",hse="Failed to load Sql Tools Service",fse="Invalid file path for Sql Tools Service",Cqe="SQLToolsService",Pqe="AzureResourceProvider",wqe="azurePublicCloud",mM="service",Eqe="v1Service";var Tqe="Microsoft",Iqe="SqlToolsResourceProviderService.exe",Rqe="SqlToolsResourceProviderService",xqe="https://go.microsoft.com/fwlink/?LinkId=521839",c2="sqlplan",l2="Microsoft SQL Server 2005 XML Showplan";var Oqe="SA",Uv="x64",Aqe="Docker Desktop.exe",gse="docker",Nqe="Docker Deployment";var lp=ge(require("vscode")),af=ge(Vi()),Wg=ge(require("path"));var _n=ge(require("vscode"));var Zd=(n=>(n[n.Integrated=1]="Integrated",n[n.SqlLogin=2]="SqlLogin",n[n.AzureMFA=3]="AzureMFA",n))(Zd||{});var pC=(n=>(n[n.Profile=0]="Profile",n[n.Mru=1]="Mru",n[n.NewConnection=2]="NewConnection",n))(pC||{});var Sg=_n.ConfigurationTarget,gi=class r{static _outputChannel;constructor(){typeof r._outputChannel>"u"&&(r._outputChannel=this.createOutputChannel(eLe))}get activeTextEditor(){return _n.window.activeTextEditor}get onDidChangeActiveTextEditor(){return _n.window.onDidChangeActiveTextEditor}get textDocuments(){return _n.workspace.textDocuments}parseUri(e){return _n.Uri.parse(e)}get activeTextEditorUri(){if(typeof _n.window.activeTextEditor<"u"&&typeof _n.window.activeTextEditor.document<"u")return _n.window.activeTextEditor.document.uri.toString(!0)}createOutputChannel(e){return _n.window.createOutputChannel(e)}executeCommand(e,...t){return _n.commands.executeCommand(e,...t)}getConfiguration(e,t){if(typeof t=="string")try{t=this.parseUri(t)}catch{t=void 0}return _n.workspace.getConfiguration(e,t)}get isEditingSqlFile(){let e=!1,t=this.activeTextEditor;return t&&t.document.languageId===jh&&(e=!0),e}get onDidCloseTextDocument(){return _n.workspace.onDidCloseTextDocument}get onDidOpenTextDocument(){return _n.workspace.onDidOpenTextDocument}get onDidSaveTextDocument(){return _n.workspace.onDidSaveTextDocument}get onDidChangeTextDocument(){return _n.workspace.onDidChangeTextDocument}async openTextDocument(e){return await _n.workspace.openTextDocument(e)}async openMsSqlTextDocument(e){return await _n.workspace.openTextDocument({language:"sql",content:e})}logToOutputChannel(e){let t=new Date;e instanceof Array?e.forEach(n=>{r._outputChannel.appendLine("["+t.toLocaleTimeString()+"] "+n.toString())}):r._outputChannel.appendLine("["+t.toLocaleTimeString()+"] "+e.toString())}range(e,t){return new _n.Range(e,t)}position(e,t){return new _n.Position(e,t)}selection(e,t){return new _n.Selection(e,t)}showErrorMessage(e,...t){return _n.window.showErrorMessage(hn+": "+e,...t)}showInputBox(e){return _n.window.showInputBox(e)}showInformationMessage(e,...t){return _n.window.showInformationMessage(hn+": "+e,...t)}showQuickPickStrings(e,t){return _n.window.showQuickPick(e,t)}createQuickPick(){return _n.window.createQuickPick()}showQuickPick(e,t){return _n.window.showQuickPick(e,t)}showSaveDialog(e){return _n.window.showSaveDialog(e)}async showTextDocument(e,t){return await _n.window.showTextDocument(e,t)}showWarningMessage(e){return _n.window.showWarningMessage(hn+": "+e)}showWarningMessageAdvanced(e,t,n){return _n.window.showWarningMessage(hn+": "+e,t,...n)}openExternal(e){return _n.env.openExternal(_n.Uri.parse(e))}get visibleEditors(){return _n.window.visibleTextEditors}uriFile(e){return _n.Uri.file(e)}uriParse(e){return _n.Uri.parse(e)}clipboardWriteText(e){return _n.env.clipboard.writeText(e)}get onDidChangeConfiguration(){return _n.workspace.onDidChangeConfiguration}setConfiguration(e,t,n,i=Sg.Global){return this.getConfiguration(e).update(t,n,i)}async setContext(e,t){await this.executeCommand("setContext",e,t)}get outputChannel(){return r._outputChannel}get onDidChangeExtensions(){return _n.extensions.onDidChange}get azureAccountExtension(){return _n.extensions.getExtension(eqe)}get azureAccountExtensionActive(){return this.azureAccountExtension!==void 0&&this.azureAccountExtension.isActive}get isAccountSignedIn(){return this.azureAccountExtensionActive&&this.azureAccountExtension.exports.status==="LoggedIn"}};var D1e=ge(require("os")),LM=ge(require("path")),M1e=ge(N1e()),Vh=ge(require("vscode"));var loe=36e5,uoe=6e4,doe=1e3,Gjt="tracingLevel",$jt="piiLogging",Vjt="logRetentionMinutes",Hjt="logFilesRemovalLimit";function ec(){let r=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],e="",t;for(let i=0;i<4;i++)t=4294967296*Math.random()|0,e+=r[t&15]+r[t>>4&15]+r[t>>8&15]+r[t>>12&15]+r[t>>16&15]+r[t>>20&15]+r[t>>24&15]+r[t>>28&15];let n=r[8+Math.random()*4|0];return e.substr(0,8)+"-"+e.substr(9,4)+"-4"+e.substr(13,3)+"-"+n+e.substr(16,3)+"-"+e.substr(19,12)}function k1e(){return typeof Vh.window.activeTextEditor<"u"&&typeof Vh.window.activeTextEditor.document<"u"?Vh.window.activeTextEditor.document.uri.toString(!0):""}function Tg(r){if(Vh.workspace.getConfiguration(fi).get(XG)===!0){let i="["+new Date().toLocaleTimeString()+"]: "+r?r.toString():"";console.log(i)}}function Ll(r){Vh.window.showErrorMessage(hn+": "+r)}function oi(r){return!r||r===""}function Ig(r){return r&&r!==""}function ip(r){return Zd[r]}function poe(r){return Sm[r]}function L1e(r,...e){let t;return e.length===0?t=r:t=r.replace(/\{(\d+)\}/g,(n,i)=>{let s=i[0];return typeof e[s]<"u"?e[s]:n}),t}function c$(r,e){return r===e}function qM(r,e){return oi(r)&&(r=rse),oi(e)&&(e=rse),r===e}function l$(r,e){return oi(r)&&(r=Ya),oi(e)&&(e=Ya),r===e}function QT(r,e){return r.id&&e.id?r.id===e.id:r===void 0?!1:e.profileName?e.profileName===r.profileName:r.profileName?!1:r.connectionString||e.connectionString?r.connectionString===e.connectionString:r.authenticationType===Qa&&e.authenticationType===Qa?e.server===r.server&&qM(e.database,r.database)&&c$(e.accountId,r.accountId):e.server===r.server&&qM(e.database,r.database)&&l$(e.authenticationType,r.authenticationType)&&(oi(e.user)&&oi(r.user)||e.user===r.user)}var a$=class r{static isMatchingConnection(e,t){return e.id&&t.id&&e.id===t.id?5:e.connectionString||t.connectionString?e.connectionString===t.connectionString?4:0:r.serverMatches(e,t)?t.database&&r.databaseMatches(e,t)?t.authenticationType&&r.authenticationMatches(e,t)?r.additionalPropertiesMatch(e,t)?4:3:2:1:0}static serverMatches(e,t){function n(o){return o==="."?"localhost":o}let i=n(e.server),s=n(t.server);return i===s}static databaseMatches(e,t){return qM(e.database,t.database)}static authenticationMatches(e,t){let n=!0;return n&&=l$(e.authenticationType,t.authenticationType),e.authenticationType===Ya?n&&=e.user===t.user:e.authenticationType===Qa&&e.accountId&&t.accountId&&(n&&=c$(e.accountId,t.accountId)),n}static additionalPropertiesMatch(e,t){let n=new Set(["server","database","authenticationType","user","password","accountId","profileName","connectionString","savePassword","id"]);for(let i of Object.keys(t).filter(s=>!n.has(s)))if(e[i]!==t[i])return!1;return!0}};function vC(r,e){let t=r.id,n=e.id;return t&&n?t===n:r.connectionString||e.connectionString?r.connectionString===e.connectionString:e.authenticationType===Qa&&r.authenticationType===Qa?e.server===r.server&&qM(e.database,r.database)&&c$(e.accountId,r.accountId):e.server===r.server&&qM(e.database,r.database)&&l$(e.authenticationType,r.authenticationType)&&(r.authenticationType===Ya?r.user===e.user:oi(r.user)===oi(e.user))&&r.savePassword===e.savePassword}function q1e(r,e){if(r.connectionString)return r.connectionString===e.connectionString;if(e.authenticationType===Qa&&r.authenticationType===Qa)return e.server===r.server&&c$(e.accountId,r.accountId);if(e.server===r.server&&l$(e.authenticationType,r.authenticationType))return r.authenticationType===Ya?r.user===e.user:oi(r.user)===oi(e.user)}var yC=class{_startTime;_endTime;constructor(){this.start()}getDuration(){if(this._startTime){if(this._endTime)return this._endTime[0]*1e3+this._endTime[1]/1e6;{let e=process.hrtime(this._startTime);return e[0]*1e3+e[1]/1e6}}else return-1}start(){this._startTime=process.hrtime()}end(){this._endTime||(this._endTime=process.hrtime(this._startTime))}};function moe(r){if(!r)return!1;let e=r.split(".");if(e.length===1)e=[e[0],"0"];else if(e.length!==2)return!1;let t=e[1],n=t.length<3?t.length:3,i=parseInt(e[1].substring(0,n),10);if(e=e[0].split(":"),e.length!==3)return!1;let s=parseInt(e[0],10),o=parseInt(e[1],10),a=parseInt(e[2],10);return i+s*loe+o*uoe+a*doe}function bC(r){let e=r,t=Math.floor(e/loe);e%=loe;let n=Math.floor(e/uoe);e%=uoe;let i=Math.floor(e/doe);e%=doe;let s=t<10?"0"+t:""+t,o=n<10?"0"+n:""+n,a=i<10?"0"+i:""+i,c=e<10?"00"+e:e<100?"0"+e:""+e,l=s+":"+o+":"+a;return e>0?l+"."+c:l}function u$(){return Vh.workspace.getConfiguration(fi)}function hoe(){let r=u$();if(r)return r.get(Gjt)}function foe(){let r=u$();if(r)return r.get($jt)}function Wjt(){let r=u$();if(r)return Number(r.get(Hjt,0).toFixed(0))}function Kjt(){let r=u$();if(r)return Number((r.get(Vjt,0)*60).toFixed(0))}function Qjt(r,e){return(0,M1e.default)(r,{age:{seconds:Kjt()},limit:Wjt(),prefix:e})}function goe(r,e,t){let n=[];n.push("--log-file");let i=LM.join(e,t);n.push(i),console.log(`logFile for ${LM.basename(r)} is ${i}`);let s=Qjt(e,t);return console.log(`Old log files deletion report: ${JSON.stringify(s)}`),console.log(`This process (ui Extenstion Host) for ${LM.basename(r)} is pid: ${process.pid}`),n.push("--tracing-level"),n.push(hoe()),foe()&&n.push("--pii-logging"),n}function zM(r,e=!1){if(e){if(r.length>100)return`${r.substr(0,45)}...${r.substr(r.length-45,r.length)}`}else if(r.length>45)return`${r.substr(0,20)}...${r.substr(r.length-20,r.length)}`;return r}var Yjt=0;function d$(r="vscode-mssql-adhoc"){return Vh.Uri.from({scheme:r,authority:`Query${Yjt++}`})}function YT(r){if(!r||typeof r!="object"||r instanceof RegExp)return r;let e=Array.isArray(r)?[]:{};return Object.keys(r).forEach(t=>{r[t]&&typeof r[t]=="object"?e[t]=YT(r[t]):e[t]=r[t]}),e}var p$=D1e.platform()==="linux";var F1e=ge(require("os"));var yoe=(c=>(c[c.Pii=0]="Pii",c[c.Off=1]="Off",c[c.Critical=2]="Critical",c[c.Error=3]="Error",c[c.Warning=4]="Warning",c[c.Information=5]="Information",c[c.Verbose=6]="Verbose",c[c.All=7]="All",c))(yoe||{}),Cs=class r{constructor(e,t,n,i){this._writer=e;this._logLevel=t;this._piiLogging=n;this._prefix=i}_indentLevel=0;_indentSize=4;_atLineStart=!0;static create(e,t){let n=yoe[hoe()],i=foe();function s(a){e.append(a)}return new r(s,n,i,t)}piiSanitized(e,t,n,...i){this.piiLogging&&(e=[e,...t?.map(s=>`${s.name}=${Xjt(s.objOrArray)}`),...n.map(s=>`${s.name}=${j1e(s.value)}`)].join(" "),this.write(0,e,...i))}pii(e,...t){this.piiLogging&&this.write(0,e,...t)}set piiLogging(e){this._piiLogging=e}get piiLogging(){return this._piiLogging}logDebug(e){Tg(e),this.write(6,e)}critical(e,...t){this.write(2,e,...t),console.error(e)}error(e,...t){this.write(3,e,...t),console.error(e)}warn(e,...t){this.write(4,e,...t),console.warn(e)}info(e,...t){this.write(5,e,...t)}verbose(e,...t){this.write(6,e,...t)}log(e,...t){this.write(7,e,...t)}increaseIndent(){this._indentLevel+=1}decreaseIndent(){this._indentLevel>0&&(this._indentLevel-=1)}append(e){e=e||"",this.appendCore(e)}appendLine(e){e=e||"",this.appendCore(e+F1e.EOL),this._atLineStart=!0}shouldLog(e){return e<=this._logLevel}write(e,t,...n){if(this.shouldLog(e)||e===0){let i=`[${yoe[e]}]: ${t}`;n.length>0&&(i+=` - ${n.map(s=>JSON.stringify(s)).join(" - ")}`),this.appendLine(i)}}appendCore(e){if(this._atLineStart){if(this._indentLevel>0){let t=" ".repeat(this._indentLevel*this._indentSize);this._writer(t)}this._writer(`[${new Date().toLocaleTimeString()}] `),this._prefix&&this._writer(`[${this._prefix}] `),this._atLineStart=!1}this._writer(e)}};function Xjt(r){return Array.isArray(r)?JSON.stringify(r.map(e=>z1e(e))):z1e(r)}function z1e(r){return r=Object.assign({},r),delete r.domains,FM(r,"token"),FM(r,"refresh_token"),FM(r,"access_token"),FM(r,"code"),FM(r,"id_token"),JSON.stringify(r)}function FM(r,e){r[e]&&(r[e]=j1e(r[e]))}function j1e(r){return!r||r.length<10?r:`${r.substr(0,3)}...${r.slice(-3)}`}var U1e=ge(require("path")),m$=ge(require("fs/promises")),jM=class{constructor(e,t,n){this._downloadProvider=e;this._config=t;this._statusView=n}async findServerPath(e){if((await m$.lstat(e)).isFile())return e;if(this._config!==void 0){let n=this._config.getSqlToolsExecutableFiles();for(let i of n){let s=U1e.join(e,i);try{if(await m$.stat(s))return s}catch{}}}}async getOrDownloadServer(e){let t=await this.getServerPath(e);return t===void 0?this.downloadServerFiles(e):t}async getServerPath(e){let t=await this._downloadProvider.getOrMakeInstallDirectory(e);return this.findServerPath(t)}async downloadServerFiles(e){let t=await this._downloadProvider.getOrMakeInstallDirectory(e);try{return await this._downloadProvider.installSQLToolsService(e),this.findServerPath(t)}catch(n){throw this._statusView.serviceInstallationFailed(),n}}};var g0=ge(require("path")),Y$=ge(sFe());var qUe=ge(require("child_process")),W$=ge(require("fs")),K$=ge(require("os")),zUe=ge(PFe()),FUe=ge(LUe()),h0="unknown";function lae(r){switch(r){case"Windows_64":case"Windows_86":case"Windows_ARM64":return"Windows";case"OSX_10_11_64":case"OSX_ARM64":return"OSX";case"CentOS_7":return"CentOS";case"Debian_8":return"Debian";case"Fedora_23":return"Fedora";case"OpenSUSE_13_2":return"OpenSUSE";case"SLES_12_2":return"SLES";case"RHEL_7":return"RHEL";case"Ubuntu_14":return"Ubuntu14";case"Ubuntu_16":return"Ubuntu16";case"Linux_ARM64":return"Linux";default:return"Unknown"}}var cae=class r{constructor(e,t,n){this.name=e;this.version=t;this.idLike=n}static getCurrent(){return r.fromFilePath("/etc/os-release").catch(()=>r.fromFilePath("/usr/lib/os-release")).catch(()=>Promise.resolve(new r(h0,h0)))}toString(){return`name=${this.name}, version=${this.version}`}static fromFilePath(e){return new Promise((t,n)=>{W$.readFile(e,"utf8",(i,s)=>{i?n(i):t(r.fromReleaseInfo(s))})})}static fromReleaseInfo(e,t=K$.EOL){let n=h0,i=h0,s,o=e.split(t);for(let a of o){a=a.trim();let c=a.indexOf("=");if(c>=0){let l=a.substring(0,c),u=a.substring(c+1);if((u.length>1&&u.startsWith('"')&&u.endsWith('"')||u.length>1&&u.startsWith("'")&&u.endsWith("'"))&&(u=u.substring(1,u.length-1)),l==="ID"?n=u:l==="VERSION_ID"?i=u:l==="ID_LIKE"&&(s=u.split(" ")),n!==h0&&i!==h0&&s!==void 0)break}}return new r(n,i,s)}},f0=class r{constructor(e,t,n=void 0){this.platform=e;this.architecture=t;this.distribution=n;try{this.runtimeId=r.getRuntimeId(e,t,n)}catch{this.runtimeId=void 0}}runtimeId;get isWindows(){return this.platform==="win32"}get isMacOS(){return this.platform==="darwin"}get isLinux(){return this.platform==="linux"}get isValidRuntime(){return this.runtimeId!==void 0&&this.runtimeId!=="Unknown"}getRuntimeDisplayName(){return lae(this.runtimeId)}isMacVersionLessThan(e){if(this.isMacOS)try{let t=FUe.parse(W$.readFileSync("/System/Library/CoreServices/SystemVersion.plist","utf-8"));if(t&&t.ProductVersion&&zUe.lt(t.ProductVersion,e))return!0}catch{}return!1}toString(){let e=this.platform;return this.architecture&&(e&&(e+=", "),e+=this.architecture),this.distribution&&(e&&(e+=", "),e+=this.distribution.toString()),e}static getCurrent(){let e=K$.platform(),t,n;switch(e){case"win32":t=r.getWindowsArchitecture(),n=Promise.resolve(void 0);break;case"darwin":t=r.getUnixArchitecture(),n=Promise.resolve(void 0);break;case"linux":t=r.getUnixArchitecture(),n=cae.getCurrent();break;default:throw new Error(`Unsupported platform: ${e}`)}return t.then(i=>n.then(s=>new r(e,i,s)))}static getWindowsArchitecture(){return new Promise((e,t)=>{process.env.PROCESSOR_ARCHITECTURE==="ARM64"?e("arm64"):process.env.PROCESSOR_ARCHITECTURE==="x86"&&process.env.PROCESSOR_ARCHITEW6432===void 0?e("x86"):e("x86_64")})}static getUnixArchitecture(){return r.execChildProcess("uname -m").then(e=>{if(e)return e.trim()})}static execChildProcess(e){return new Promise((t,n)=>{qUe.exec(e,{maxBuffer:500*1024},(i,s,o)=>{if(i){n(i);return}if(o&&o.length>0){n(new Error(o));return}t(s)})})}static getRuntimeId(e,t,n){switch(e){case"win32":switch(t){case"x86":return"Windows_86";case"x86_64":return"Windows_64";case"arm64":return"Windows_ARM64";default:}throw new Error(`Unsupported Windows architecture: ${t}`);case"darwin":switch(t){case"x86_64":return"OSX_10_11_64";case"arm64":return"OSX_ARM64";default:}throw new Error(`Unsupported macOS architecture: ${t}`);case"linux":if(t==="x86_64"){let i=r.getRuntimeIdHelper(n.name,n.version);if(i==="Unknown"&&n.idLike&&n.idLike.length>0){for(let s of n.idLike)if(i=r.getRuntimeIdHelper(s,n.version),i!=="Unknown")break}if(i!=="Unknown")return i}else if(t==="aarch64")return"Linux_ARM64";throw new Error(`Unsupported Linux distro: ${n.name}, ${n.version}, ${t}`);default:throw Error("Unsupported platform "+e)}}static getRuntimeIdHelper(e,t){switch(e){case"arch":case"antergos":return"Ubuntu_16";case"ubuntu":if(t.startsWith("14"))return"Ubuntu_14";if(t.startsWith("16"))return"Ubuntu_16";break;case"elementary":case"elementary OS":if(t.startsWith("0.3"))return"Ubuntu_14";if(t.startsWith("0.4"))return"Ubuntu_16";break;case"linuxmint":if(t.startsWith("18")||t.startsWith("19"))return"Ubuntu_16";break;case"centos":case"ol":return"CentOS_7";case"fedora":return"Fedora_23";case"opensuse":return"OpenSUSE_13_2";case"sles":return"SLES_12_2";case"rhel":return"RHEL_7";case"debian":case"deepin":return"Debian_8";case"galliumos":if(t.startsWith("2.0"))return"Ubuntu_16";break;default:return"Ubuntu_16"}return"Ubuntu_16"}};var Q$=class extends Error{constructor(t,n){super(n);this.connectionUri=t}},Ng=class extends Error{constructor(t,n=void 0,i=void 0){super(t);this.message=t;this.pkg=n;this.innerError=i}};var jUe=ge(require("fs/promises")),nk=class{constructor(e,t,n,i,s){this._config=e;this._logger=t;this._statusView=n;this._httpClient=i;this._decompressProvider=s;Y$.setGracefulCleanup()}getDownloadFileName(e){let n=this._config.getSqlToolsConfigValue("downloadFileNames")[e.toString()];if(n===void 0)throw process.platform==="linux"?new Error("Unsupported linux distribution"):new Error(`Unsupported platform: ${process.platform}`);return n}async getOrMakeInstallDirectory(e){let t=this.getInstallDirectoryRoot(),n=this._config.getSqlToolsPackageVersion();t=t.replace("{#version#}",n),t=t.replace("{#platform#}",lae(e));try{await jUe.mkdir(t,{recursive:!0})}catch{}return t}getInstallDirectoryRoot(){let e=this._config.getSqlToolsInstallDirectory(),t;return g0.isAbsolute(e)?t=e:t=g0.join(__dirname,"../"+e),t}getGetDownloadUrl(e){let t=this._config.getSqlToolsServiceDownloadUrl(),n=this._config.getSqlToolsPackageVersion();return t=t.replace("{#version#}",n),t=t.replace("{#fileName#}",e),t}async installSQLToolsService(e){let t=this.getDownloadFileName(e),n=await this.getOrMakeInstallDirectory(e);this._logger.appendLine(`${fqe} ${n}.`);let i=this.getGetDownloadUrl(t),s=g0.extname(t)===".zip";this._logger.appendLine(`${a2} ${i}`);let o={installPath:n,url:i,tmpFile:void 0,isZipFile:s},a=await this.createTempFile(o);o.tmpFile=a;try{await this._httpClient.downloadFile(o.url,o,this._logger,this._statusView),this._logger.logDebug(`Downloaded to ${o.tmpFile.name}...`),this._logger.appendLine(" Done!"),await this.install(o)}catch(c){throw this._logger.appendLine(`[ERROR] ${c}`),c}return!0}createTempFile(e){return new Promise((t,n)=>{Y$.file({prefix:"package-"},(i,s,o,a)=>{if(i)return n(new Ng("Error from tmp.file",e,i));t({name:s,fd:o,removeCallback:a})})})}install(e){return this._logger.appendLine("Installing ..."),this._statusView.installingService(),new Promise((t,n)=>{this._decompressProvider.decompress(e,this._logger).then(i=>{this._statusView.serviceInstalled(),t()}).catch(i=>{n(i)})})}};var HUe=ge(require("events"),1),Fl=ge(require("fs"),1);var nV=require("node:events"),gae=ge(require("node:stream"),1),VUe=require("node:string_decoder"),UUe=typeof process=="object"&&process?process:{stdout:null,stderr:null},IBt=r=>!!r&&typeof r=="object"&&(r instanceof yu||r instanceof gae.default||RBt(r)||xBt(r)),RBt=r=>!!r&&typeof r=="object"&&r instanceof nV.EventEmitter&&typeof r.pipe=="function"&&r.pipe!==gae.default.Writable.prototype.pipe,xBt=r=>!!r&&typeof r=="object"&&r instanceof nV.EventEmitter&&typeof r.write=="function"&&typeof r.end=="function",Dg=Symbol("EOF"),Mg=Symbol("maybeEmitEnd"),ib=Symbol("emittedEnd"),X$=Symbol("emittingEnd"),ik=Symbol("emittedError"),J$=Symbol("closed"),BUe=Symbol("read"),Z$=Symbol("flush"),GUe=Symbol("flushChunk"),xm=Symbol("encoding"),y0=Symbol("decoder"),nc=Symbol("flowing"),sk=Symbol("paused"),v0=Symbol("resume"),ic=Symbol("buffer"),zl=Symbol("pipes"),sc=Symbol("bufferLength"),uae=Symbol("bufferPush"),eV=Symbol("bufferShift"),cl=Symbol("objectMode"),ia=Symbol("destroyed"),dae=Symbol("error"),pae=Symbol("emitData"),$Ue=Symbol("emitEnd"),mae=Symbol("emitEnd2"),Yh=Symbol("async"),hae=Symbol("abort"),tV=Symbol("aborted"),ok=Symbol("signal"),wC=Symbol("dataListeners"),sd=Symbol("discarded"),ak=r=>Promise.resolve().then(r),OBt=r=>r(),ABt=r=>r==="end"||r==="finish"||r==="prefinish",NBt=r=>r instanceof ArrayBuffer||!!r&&typeof r=="object"&&r.constructor&&r.constructor.name==="ArrayBuffer"&&r.byteLength>=0,DBt=r=>!Buffer.isBuffer(r)&&ArrayBuffer.isView(r),rV=class{src;dest;opts;ondrain;constructor(e,t,n){this.src=e,this.dest=t,this.opts=n,this.ondrain=()=>e[v0](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},fae=class extends rV{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,t,n){super(e,t,n),this.proxyErrors=i=>t.emit("error",i),e.on("error",this.proxyErrors)}},MBt=r=>!!r.objectMode,kBt=r=>!r.objectMode&&!!r.encoding&&r.encoding!=="buffer",yu=class extends nV.EventEmitter{[nc]=!1;[sk]=!1;[zl]=[];[ic]=[];[cl];[xm];[Yh];[y0];[Dg]=!1;[ib]=!1;[X$]=!1;[J$]=!1;[ik]=null;[sc]=0;[ia]=!1;[ok];[tV]=!1;[wC]=0;[sd]=!1;writable=!0;readable=!0;constructor(...e){let t=e[0]||{};if(super(),t.objectMode&&typeof t.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");MBt(t)?(this[cl]=!0,this[xm]=null):kBt(t)?(this[xm]=t.encoding,this[cl]=!1):(this[cl]=!1,this[xm]=null),this[Yh]=!!t.async,this[y0]=this[xm]?new VUe.StringDecoder(this[xm]):null,t&&t.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[ic]}),t&&t.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[zl]});let{signal:n}=t;n&&(this[ok]=n,n.aborted?this[hae]():n.addEventListener("abort",()=>this[hae]()))}get bufferLength(){return this[sc]}get encoding(){return this[xm]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[cl]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[Yh]}set async(e){this[Yh]=this[Yh]||!!e}[hae](){this[tV]=!0,this.emit("abort",this[ok]?.reason),this.destroy(this[ok]?.reason)}get aborted(){return this[tV]}set aborted(e){}write(e,t,n){if(this[tV])return!1;if(this[Dg])throw new Error("write after end");if(this[ia])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof t=="function"&&(n=t,t="utf8"),t||(t="utf8");let i=this[Yh]?ak:OBt;if(!this[cl]&&!Buffer.isBuffer(e)){if(DBt(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(NBt(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[cl]?(this[nc]&&this[sc]!==0&&this[Z$](!0),this[nc]?this.emit("data",e):this[uae](e),this[sc]!==0&&this.emit("readable"),n&&i(n),this[nc]):e.length?(typeof e=="string"&&!(t===this[xm]&&!this[y0]?.lastNeed)&&(e=Buffer.from(e,t)),Buffer.isBuffer(e)&&this[xm]&&(e=this[y0].write(e)),this[nc]&&this[sc]!==0&&this[Z$](!0),this[nc]?this.emit("data",e):this[uae](e),this[sc]!==0&&this.emit("readable"),n&&i(n),this[nc]):(this[sc]!==0&&this.emit("readable"),n&&i(n),this[nc])}read(e){if(this[ia])return null;if(this[sd]=!1,this[sc]===0||e===0||e&&e>this[sc])return this[Mg](),null;this[cl]&&(e=null),this[ic].length>1&&!this[cl]&&(this[ic]=[this[xm]?this[ic].join(""):Buffer.concat(this[ic],this[sc])]);let t=this[BUe](e||null,this[ic][0]);return this[Mg](),t}[BUe](e,t){if(this[cl])this[eV]();else{let n=t;e===n.length||e===null?this[eV]():typeof n=="string"?(this[ic][0]=n.slice(e),t=n.slice(0,e),this[sc]-=e):(this[ic][0]=n.subarray(e),t=n.subarray(0,e),this[sc]-=e)}return this.emit("data",t),!this[ic].length&&!this[Dg]&&this.emit("drain"),t}end(e,t,n){return typeof e=="function"&&(n=e,e=void 0),typeof t=="function"&&(n=t,t="utf8"),e!==void 0&&this.write(e,t),n&&this.once("end",n),this[Dg]=!0,this.writable=!1,(this[nc]||!this[sk])&&this[Mg](),this}[v0](){this[ia]||(!this[wC]&&!this[zl].length&&(this[sd]=!0),this[sk]=!1,this[nc]=!0,this.emit("resume"),this[ic].length?this[Z$]():this[Dg]?this[Mg]():this.emit("drain"))}resume(){return this[v0]()}pause(){this[nc]=!1,this[sk]=!0,this[sd]=!1}get destroyed(){return this[ia]}get flowing(){return this[nc]}get paused(){return this[sk]}[uae](e){this[cl]?this[sc]+=1:this[sc]+=e.length,this[ic].push(e)}[eV](){return this[cl]?this[sc]-=1:this[sc]-=this[ic][0].length,this[ic].shift()}[Z$](e=!1){do;while(this[GUe](this[eV]())&&this[ic].length);!e&&!this[ic].length&&!this[Dg]&&this.emit("drain")}[GUe](e){return this.emit("data",e),this[nc]}pipe(e,t){if(this[ia])return e;this[sd]=!1;let n=this[ib];return t=t||{},e===UUe.stdout||e===UUe.stderr?t.end=!1:t.end=t.end!==!1,t.proxyErrors=!!t.proxyErrors,n?t.end&&e.end():(this[zl].push(t.proxyErrors?new fae(this,e,t):new rV(this,e,t)),this[Yh]?ak(()=>this[v0]()):this[v0]()),e}unpipe(e){let t=this[zl].find(n=>n.dest===e);t&&(this[zl].length===1?(this[nc]&&this[wC]===0&&(this[nc]=!1),this[zl]=[]):this[zl].splice(this[zl].indexOf(t),1),t.unpipe())}addListener(e,t){return this.on(e,t)}on(e,t){let n=super.on(e,t);if(e==="data")this[sd]=!1,this[wC]++,!this[zl].length&&!this[nc]&&this[v0]();else if(e==="readable"&&this[sc]!==0)super.emit("readable");else if(ABt(e)&&this[ib])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[ik]){let i=t;this[Yh]?ak(()=>i.call(this,this[ik])):i.call(this,this[ik])}return n}removeListener(e,t){return this.off(e,t)}off(e,t){let n=super.off(e,t);return e==="data"&&(this[wC]=this.listeners("data").length,this[wC]===0&&!this[sd]&&!this[zl].length&&(this[nc]=!1)),n}removeAllListeners(e){let t=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[wC]=0,!this[sd]&&!this[zl].length&&(this[nc]=!1)),t}get emittedEnd(){return this[ib]}[Mg](){!this[X$]&&!this[ib]&&!this[ia]&&this[ic].length===0&&this[Dg]&&(this[X$]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[J$]&&this.emit("close"),this[X$]=!1)}emit(e,...t){let n=t[0];if(e!=="error"&&e!=="close"&&e!==ia&&this[ia])return!1;if(e==="data")return!this[cl]&&!n?!1:this[Yh]?(ak(()=>this[pae](n)),!0):this[pae](n);if(e==="end")return this[$Ue]();if(e==="close"){if(this[J$]=!0,!this[ib]&&!this[ia])return!1;let s=super.emit("close");return this.removeAllListeners("close"),s}else if(e==="error"){this[ik]=n,super.emit(dae,n);let s=!this[ok]||this.listeners("error").length?super.emit("error",n):!1;return this[Mg](),s}else if(e==="resume"){let s=super.emit("resume");return this[Mg](),s}else if(e==="finish"||e==="prefinish"){let s=super.emit(e);return this.removeAllListeners(e),s}let i=super.emit(e,...t);return this[Mg](),i}[pae](e){for(let n of this[zl])n.dest.write(e)===!1&&this.pause();let t=this[sd]?!1:super.emit("data",e);return this[Mg](),t}[$Ue](){return this[ib]?!1:(this[ib]=!0,this.readable=!1,this[Yh]?(ak(()=>this[mae]()),!0):this[mae]())}[mae](){if(this[y0]){let t=this[y0].end();if(t){for(let n of this[zl])n.dest.write(t);this[sd]||super.emit("data",t)}}for(let t of this[zl])t.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[cl]||(e.dataLength=0);let t=this.promise();return this.on("data",n=>{e.push(n),this[cl]||(e.dataLength+=n.length)}),await t,e}async concat(){if(this[cl])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[xm]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,t)=>{this.on(ia,()=>t(new Error("stream destroyed"))),this.on("error",n=>t(n)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[sd]=!1;let e=!1,t=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return t();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[Dg])return t();let s,o,a=d=>{this.off("data",c),this.off("end",l),this.off(ia,u),t(),o(d)},c=d=>{this.off("error",a),this.off("end",l),this.off(ia,u),this.pause(),s({value:d,done:!!this[Dg]})},l=()=>{this.off("error",a),this.off("data",c),this.off(ia,u),t(),s({done:!0,value:void 0})},u=()=>a(new Error("stream destroyed"));return new Promise((d,p)=>{o=p,s=d,this.once(ia,u),this.once("error",a),this.once("end",l),this.once("data",c)})},throw:t,return:t,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[sd]=!1;let e=!1,t=()=>(this.pause(),this.off(dae,t),this.off(ia,t),this.off("end",t),e=!0,{done:!0,value:void 0}),n=()=>{if(e)return t();let i=this.read();return i===null?t():{done:!1,value:i}};return this.once("end",t),this.once(dae,t),this.once(ia,t),{next:n,throw:t,return:t,[Symbol.iterator](){return this}}}destroy(e){if(this[ia])return e?this.emit("error",e):this.emit(ia),this;this[ia]=!0,this[sd]=!0,this[ic].length=0,this[sc]=0;let t=this;return typeof t.close=="function"&&!this[J$]&&t.close(),e?this.emit("error",e):this.emit(ia),this}static get isStream(){return IBt}};var LBt=Fl.default.writev,ob=Symbol("_autoClose"),Am=Symbol("_close"),ck=Symbol("_ended"),ns=Symbol("_fd"),yae=Symbol("_finished"),Lg=Symbol("_flags"),vae=Symbol("_flush"),Cae=Symbol("_handleChunk"),Pae=Symbol("_makeBuf"),uk=Symbol("_mode"),iV=Symbol("_needDrain"),S0=Symbol("_onerror"),C0=Symbol("_onopen"),bae=Symbol("_onread"),b0=Symbol("_onwrite"),ab=Symbol("_open"),Om=Symbol("_path"),sb=Symbol("_pos"),Xh=Symbol("_queue"),_0=Symbol("_read"),_ae=Symbol("_readSize"),kg=Symbol("_reading"),lk=Symbol("_remain"),Sae=Symbol("_size"),sV=Symbol("_write"),EC=Symbol("_writing"),oV=Symbol("_defaultFlag"),TC=Symbol("_errored"),IC=class extends yu{[TC]=!1;[ns];[Om];[_ae];[kg]=!1;[Sae];[lk];[ob];constructor(e,t){if(t=t||{},super(t),this.readable=!0,this.writable=!1,typeof e!="string")throw new TypeError("path must be a string");this[TC]=!1,this[ns]=typeof t.fd=="number"?t.fd:void 0,this[Om]=e,this[_ae]=t.readSize||16*1024*1024,this[kg]=!1,this[Sae]=typeof t.size=="number"?t.size:1/0,this[lk]=this[Sae],this[ob]=typeof t.autoClose=="boolean"?t.autoClose:!0,typeof this[ns]=="number"?this[_0]():this[ab]()}get fd(){return this[ns]}get path(){return this[Om]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[ab](){Fl.default.open(this[Om],"r",(e,t)=>this[C0](e,t))}[C0](e,t){e?this[S0](e):(this[ns]=t,this.emit("open",t),this[_0]())}[Pae](){return Buffer.allocUnsafe(Math.min(this[_ae],this[lk]))}[_0](){if(!this[kg]){this[kg]=!0;let e=this[Pae]();if(e.length===0)return process.nextTick(()=>this[bae](null,0,e));Fl.default.read(this[ns],e,0,e.length,null,(t,n,i)=>this[bae](t,n,i))}}[bae](e,t,n){this[kg]=!1,e?this[S0](e):this[Cae](t,n)&&this[_0]()}[Am](){if(this[ob]&&typeof this[ns]=="number"){let e=this[ns];this[ns]=void 0,Fl.default.close(e,t=>t?this.emit("error",t):this.emit("close"))}}[S0](e){this[kg]=!0,this[Am](),this.emit("error",e)}[Cae](e,t){let n=!1;return this[lk]-=e,e>0&&(n=super.write(e<t.length?t.subarray(0,e):t)),(e===0||this[lk]<=0)&&(n=!1,this[Am](),super.end()),n}emit(e,...t){switch(e){case"prefinish":case"finish":return!1;case"drain":return typeof this[ns]=="number"&&this[_0](),!1;case"error":return this[TC]?!1:(this[TC]=!0,super.emit(e,...t));default:return super.emit(e,...t)}}},aV=class extends IC{[ab](){let e=!0;try{this[C0](null,Fl.default.openSync(this[Om],"r")),e=!1}finally{e&&this[Am]()}}[_0](){let e=!0;try{if(!this[kg]){this[kg]=!0;do{let t=this[Pae](),n=t.length===0?0:Fl.default.readSync(this[ns],t,0,t.length,null);if(!this[Cae](n,t))break}while(!0);this[kg]=!1}e=!1}finally{e&&this[Am]()}}[Am](){if(this[ob]&&typeof this[ns]=="number"){let e=this[ns];this[ns]=void 0,Fl.default.closeSync(e),this.emit("close")}}},qg=class extends HUe.default{readable=!1;writable=!0;[TC]=!1;[EC]=!1;[ck]=!1;[Xh]=[];[iV]=!1;[Om];[uk];[ob];[ns];[oV];[Lg];[yae]=!1;[sb];constructor(e,t){t=t||{},super(t),this[Om]=e,this[ns]=typeof t.fd=="number"?t.fd:void 0,this[uk]=t.mode===void 0?438:t.mode,this[sb]=typeof t.start=="number"?t.start:void 0,this[ob]=typeof t.autoClose=="boolean"?t.autoClose:!0;let n=this[sb]!==void 0?"r+":"w";this[oV]=t.flags===void 0,this[Lg]=t.flags===void 0?n:t.flags,this[ns]===void 0&&this[ab]()}emit(e,...t){if(e==="error"){if(this[TC])return!1;this[TC]=!0}return super.emit(e,...t)}get fd(){return this[ns]}get path(){return this[Om]}[S0](e){this[Am](),this[EC]=!0,this.emit("error",e)}[ab](){Fl.default.open(this[Om],this[Lg],this[uk],(e,t)=>this[C0](e,t))}[C0](e,t){this[oV]&&this[Lg]==="r+"&&e&&e.code==="ENOENT"?(this[Lg]="w",this[ab]()):e?this[S0](e):(this[ns]=t,this.emit("open",t),this[EC]||this[vae]())}end(e,t){return e&&this.write(e,t),this[ck]=!0,!this[EC]&&!this[Xh].length&&typeof this[ns]=="number"&&this[b0](null,0),this}write(e,t){return typeof e=="string"&&(e=Buffer.from(e,t)),this[ck]?(this.emit("error",new Error("write() after end()")),!1):this[ns]===void 0||this[EC]||this[Xh].length?(this[Xh].push(e),this[iV]=!0,!1):(this[EC]=!0,this[sV](e),!0)}[sV](e){Fl.default.write(this[ns],e,0,e.length,this[sb],(t,n)=>this[b0](t,n))}[b0](e,t){e?this[S0](e):(this[sb]!==void 0&&typeof t=="number"&&(this[sb]+=t),this[Xh].length?this[vae]():(this[EC]=!1,this[ck]&&!this[yae]?(this[yae]=!0,this[Am](),this.emit("finish")):this[iV]&&(this[iV]=!1,this.emit("drain"))))}[vae](){if(this[Xh].length===0)this[ck]&&this[b0](null,0);else if(this[Xh].length===1)this[sV](this[Xh].pop());else{let e=this[Xh];this[Xh]=[],LBt(this[ns],e,this[sb],(t,n)=>this[b0](t,n))}}[Am](){if(this[ob]&&typeof this[ns]=="number"){let e=this[ns];this[ns]=void 0,Fl.default.close(e,t=>t?this.emit("error",t):this.emit("close"))}}},P0=class extends qg{[ab](){let e;if(this[oV]&&this[Lg]==="r+")try{e=Fl.default.openSync(this[Om],this[Lg],this[uk])}catch(t){if(t?.code==="ENOENT")return this[Lg]="w",this[ab]();throw t}else e=Fl.default.openSync(this[Om],this[Lg],this[uk]);this[C0](null,e)}[Am](){if(this[ob]&&typeof this[ns]=="number"){let e=this[ns];this[ns]=void 0,Fl.default.closeSync(e),this.emit("close")}}[sV](e){let t=!0;try{this[b0](null,Fl.default.writeSync(this[ns],e,0,e.length,this[sb])),t=!1}finally{if(t)try{this[Am]()}catch{}}}};var Jae=ge(require("node:path"),1);var LC=ge(require("node:fs"),1),wV=require("path");var qBt=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"],["onentry","onReadEntry"]]),WUe=r=>!!r.sync&&!!r.file,KUe=r=>!r.sync&&!!r.file,QUe=r=>!!r.sync&&!r.file,YUe=r=>!r.sync&&!r.file;var XUe=r=>!!r.file;var zBt=r=>{let e=qBt.get(r);return e||r},dk=(r={})=>{if(!r)return{};let e={};for(let[t,n]of Object.entries(r)){let i=zBt(t);e[i]=n}return e.chmod===void 0&&e.noChmod===!1&&(e.chmod=!0),delete e.noChmod,e};var Jh=(r,e,t,n,i)=>Object.assign((s=[],o,a)=>{Array.isArray(s)&&(o=s,s={}),typeof o=="function"&&(a=o,o=void 0),o?o=Array.from(o):o=[];let c=dk(s);if(i?.(c,o),WUe(c)){if(typeof a=="function")throw new TypeError("callback not supported for sync tar functions");return r(c,o)}else if(KUe(c)){let l=e(c,o),u=a||void 0;return u?l.then(()=>u(),u):l}else if(QUe(c)){if(typeof a=="function")throw new TypeError("callback not supported for sync tar functions");return t(c,o)}else if(YUe(c)){if(typeof a=="function")throw new TypeError("callback only supported with file option");return n(c,o)}else throw new Error("impossible options??")},{syncFile:r,asyncFile:e,syncNoFile:t,asyncNoFile:n,validate:i});var mBe=require("events");var cV=ge(require("assert"),1),Fg=require("buffer");var eBe=ge(require("zlib"),1);var JUe=ge(require("zlib"),1),FBt=JUe.default.constants||{ZLIB_VERNUM:4736},zg=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},FBt));var ZUe=Fg.Buffer.concat,RC=Symbol("_superWrite"),w0=class extends Error{code;errno;constructor(e){super("zlib: "+e.message),this.code=e.code,this.errno=e.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+e.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}},Eae=Symbol("flushFlag"),lV=class extends yu{#e=!1;#t=!1;#n;#r;#o;#a;#c;get sawError(){return this.#e}get handle(){return this.#a}get flushFlag(){return this.#n}constructor(e,t){if(!e||typeof e!="object")throw new TypeError("invalid options for ZlibBase constructor");super(e),this.#n=e.flush??0,this.#r=e.finishFlush??0,this.#o=e.fullFlushFlag??0;try{this.#a=new eBe.default[t](e)}catch(n){throw new w0(n)}this.#c=n=>{this.#e||(this.#e=!0,this.close(),this.emit("error",n))},this.#a?.on("error",n=>this.#c(new w0(n))),this.once("end",()=>this.close)}close(){this.#a&&(this.#a.close(),this.#a=void 0,this.emit("close"))}reset(){if(!this.#e)return(0,cV.default)(this.#a,"zlib binding closed"),this.#a.reset?.()}flush(e){this.ended||(typeof e!="number"&&(e=this.#o),this.write(Object.assign(Fg.Buffer.alloc(0),{[Eae]:e})))}end(e,t,n){return typeof e=="function"&&(n=e,t=void 0,e=void 0),typeof t=="function"&&(n=t,t=void 0),e&&(t?this.write(e,t):this.write(e)),this.flush(this.#r),this.#t=!0,super.end(n)}get ended(){return this.#t}[RC](e){return super.write(e)}write(e,t,n){if(typeof t=="function"&&(n=t,t="utf8"),typeof e=="string"&&(e=Fg.Buffer.from(e,t)),this.#e)return;(0,cV.default)(this.#a,"zlib binding closed");let i=this.#a._handle,s=i.close;i.close=()=>{};let o=this.#a.close;this.#a.close=()=>{},Fg.Buffer.concat=l=>l;let a;try{let l=typeof e[Eae]=="number"?e[Eae]:this.#n;a=this.#a._processChunk(e,l),Fg.Buffer.concat=ZUe}catch(l){Fg.Buffer.concat=ZUe,this.#c(new w0(l))}finally{this.#a&&(this.#a._handle=i,i.close=s,this.#a.close=o,this.#a.removeAllListeners("error"))}this.#a&&this.#a.on("error",l=>this.#c(new w0(l)));let c;if(a)if(Array.isArray(a)&&a.length>0){let l=a[0];c=this[RC](Fg.Buffer.from(l));for(let u=1;u<a.length;u++)c=this[RC](a[u])}else c=this[RC](Fg.Buffer.from(a));return n&&n(),c}},uV=class extends lV{#e;#t;constructor(e,t){e=e||{},e.flush=e.flush||zg.Z_NO_FLUSH,e.finishFlush=e.finishFlush||zg.Z_FINISH,e.fullFlushFlag=zg.Z_FULL_FLUSH,super(e,t),this.#e=e.level,this.#t=e.strategy}params(e,t){if(!this.sawError){if(!this.handle)throw new Error("cannot switch params when binding is closed");if(!this.handle.params)throw new Error("not supported in this implementation");if(this.#e!==e||this.#t!==t){this.flush(zg.Z_SYNC_FLUSH),(0,cV.default)(this.handle,"zlib binding closed");let n=this.handle.flush;this.handle.flush=(i,s)=>{typeof i=="function"&&(s=i,i=this.flushFlag),this.flush(i),s?.()};try{this.handle.params(e,t)}finally{this.handle.flush=n}this.handle&&(this.#e=e,this.#t=t)}}}};var dV=class extends uV{#e;constructor(e){super(e,"Gzip"),this.#e=e&&!!e.portable}[RC](e){return this.#e?(this.#e=!1,e[9]=255,super[RC](e)):super[RC](e)}};var pV=class extends uV{constructor(e){super(e,"Unzip")}},mV=class extends lV{constructor(e,t){e=e||{},e.flush=e.flush||zg.BROTLI_OPERATION_PROCESS,e.finishFlush=e.finishFlush||zg.BROTLI_OPERATION_FINISH,e.fullFlushFlag=zg.BROTLI_OPERATION_FLUSH,super(e,t)}},hV=class extends mV{constructor(e){super(e,"BrotliCompress")}},fV=class extends mV{constructor(e){super(e,"BrotliDecompress")}};var E0=class r{tail;head;length=0;static create(e=[]){return new r(e)}constructor(e=[]){for(let t of e)this.push(t)}*[Symbol.iterator](){for(let e=this.head;e;e=e.next)yield e.value}removeNode(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");let t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),this.length--,e.next=void 0,e.prev=void 0,e.list=void 0,t}unshiftNode(e){if(e===this.head)return;e.list&&e.list.removeNode(e);let t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}pushNode(e){if(e===this.tail)return;e.list&&e.list.removeNode(e);let t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}push(...e){for(let t=0,n=e.length;t<n;t++)BBt(this,e[t]);return this.length}unshift(...e){for(var t=0,n=e.length;t<n;t++)GBt(this,e[t]);return this.length}pop(){if(!this.tail)return;let e=this.tail.value,t=this.tail;return this.tail=this.tail.prev,this.tail?this.tail.next=void 0:this.head=void 0,t.list=void 0,this.length--,e}shift(){if(!this.head)return;let e=this.head.value,t=this.head;return this.head=this.head.next,this.head?this.head.prev=void 0:this.tail=void 0,t.list=void 0,this.length--,e}forEach(e,t){t=t||this;for(let n=this.head,i=0;n;i++)e.call(t,n.value,i,this),n=n.next}forEachReverse(e,t){t=t||this;for(let n=this.tail,i=this.length-1;n;i--)e.call(t,n.value,i,this),n=n.prev}get(e){let t=0,n=this.head;for(;n&&t<e;t++)n=n.next;if(t===e&&n)return n.value}getReverse(e){let t=0,n=this.tail;for(;n&&t<e;t++)n=n.prev;if(t===e&&n)return n.value}map(e,t){t=t||this;let n=new r;for(let i=this.head;i;)n.push(e.call(t,i.value,this)),i=i.next;return n}mapReverse(e,t){t=t||this;var n=new r;for(let i=this.tail;i;)n.push(e.call(t,i.value,this)),i=i.prev;return n}reduce(e,t){let n,i=this.head;if(arguments.length>1)n=t;else if(this.head)i=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=0;i;s++)n=e(n,i.value,s),i=i.next;return n}reduceReverse(e,t){let n,i=this.tail;if(arguments.length>1)n=t;else if(this.tail)i=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(let s=this.length-1;i;s--)n=e(n,i.value,s),i=i.prev;return n}toArray(){let e=new Array(this.length);for(let t=0,n=this.head;n;t++)e[t]=n.value,n=n.next;return e}toArrayReverse(){let e=new Array(this.length);for(let t=0,n=this.tail;n;t++)e[t]=n.value,n=n.prev;return e}slice(e=0,t=this.length){t<0&&(t+=this.length),e<0&&(e+=this.length);let n=new r;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);let i=this.head,s=0;for(s=0;i&&s<e;s++)i=i.next;for(;i&&s<t;s++,i=i.next)n.push(i.value);return n}sliceReverse(e=0,t=this.length){t<0&&(t+=this.length),e<0&&(e+=this.length);let n=new r;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);let i=this.length,s=this.tail;for(;s&&i>t;i--)s=s.prev;for(;s&&i>e;i--,s=s.prev)n.push(s.value);return n}splice(e,t=0,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);let i=this.head;for(let o=0;i&&o<e;o++)i=i.next;let s=[];for(let o=0;i&&o<t;o++)s.push(i.value),i=this.removeNode(i);i?i!==this.tail&&(i=i.prev):i=this.tail;for(let o of n)i=UBt(this,i,o);return s}reverse(){let e=this.head,t=this.tail;for(let n=e;n;n=n.prev){let i=n.prev;n.prev=n.next,n.next=i}return this.head=t,this.tail=e,this}};function UBt(r,e,t){let n=e,i=e?e.next:r.head,s=new pk(t,n,i,r);return s.next===void 0&&(r.tail=s),s.prev===void 0&&(r.head=s),r.length++,s}function BBt(r,e){r.tail=new pk(e,r.tail,void 0,r),r.head||(r.head=r.tail),r.length++}function GBt(r,e){r.head=new pk(e,void 0,r.head,r),r.tail||(r.tail=r.head),r.length++}var pk=class{list;next;prev;value;constructor(e,t,n,i){this.list=i,this.value=e,t?(t.next=this,this.prev=t):this.prev=void 0,n?(n.prev=this,this.next=n):this.next=void 0}};var AC=require("node:path");var tBe=(r,e)=>{if(Number.isSafeInteger(r))r<0?VBt(r,e):$Bt(r,e);else throw Error("cannot encode number outside of javascript safe integer range");return e},$Bt=(r,e)=>{e[0]=128;for(var t=e.length;t>1;t--)e[t-1]=r&255,r=Math.floor(r/256)},VBt=(r,e)=>{e[0]=255;var t=!1;r=r*-1;for(var n=e.length;n>1;n--){var i=r&255;r=Math.floor(r/256),t?e[n-1]=nBe(i):i===0?e[n-1]=0:(t=!0,e[n-1]=iBe(i))}},rBe=r=>{let e=r[0],t=e===128?WBt(r.subarray(1,r.length)):e===255?HBt(r):null;if(t===null)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(t))throw Error("parsed number outside of javascript safe integer range");return t},HBt=r=>{for(var e=r.length,t=0,n=!1,i=e-1;i>-1;i--){var s=Number(r[i]),o;n?o=nBe(s):s===0?o=s:(n=!0,o=iBe(s)),o!==0&&(t-=o*Math.pow(256,e-i-1))}return t},WBt=r=>{for(var e=r.length,t=0,n=e-1;n>-1;n--){var i=Number(r[n]);i!==0&&(t+=i*Math.pow(256,e-n-1))}return t},nBe=r=>(255^r)&255,iBe=r=>(255^r)+1&255;var gV=r=>yV.has(r);var yV=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]),sBe=new Map(Array.from(yV).map(r=>[r[1],r[0]]));var od=class{cksumValid=!1;needPax=!1;nullBlock=!1;block;path;mode;uid;gid;size;cksum;#e="Unsupported";linkpath;uname;gname;devmaj=0;devmin=0;atime;ctime;mtime;charset;comment;constructor(e,t=0,n,i){Buffer.isBuffer(e)?this.decode(e,t||0,n,i):e&&this.#t(e)}decode(e,t,n,i){if(t||(t=0),!e||!(e.length>=t+512))throw new Error("need 512 bytes for header");this.path=xC(e,t,100),this.mode=cb(e,t+100,8),this.uid=cb(e,t+108,8),this.gid=cb(e,t+116,8),this.size=cb(e,t+124,12),this.mtime=Tae(e,t+136,12),this.cksum=cb(e,t+148,12),i&&this.#t(i,!0),n&&this.#t(n);let s=xC(e,t+156,1);if(gV(s)&&(this.#e=s||"0"),this.#e==="0"&&this.path.slice(-1)==="/"&&(this.#e="5"),this.#e==="5"&&(this.size=0),this.linkpath=xC(e,t+157,100),e.subarray(t+257,t+265).toString()==="ustar\x0000")if(this.uname=xC(e,t+265,32),this.gname=xC(e,t+297,32),this.devmaj=cb(e,t+329,8)??0,this.devmin=cb(e,t+337,8)??0,e[t+475]!==0){let a=xC(e,t+345,155);this.path=a+"/"+this.path}else{let a=xC(e,t+345,130);a&&(this.path=a+"/"+this.path),this.atime=Tae(e,t+476,12),this.ctime=Tae(e,t+488,12)}let o=8*32;for(let a=t;a<t+148;a++)o+=e[a];for(let a=t+156;a<t+512;a++)o+=e[a];this.cksumValid=o===this.cksum,this.cksum===void 0&&o===8*32&&(this.nullBlock=!0)}#t(e,t=!1){Object.assign(this,Object.fromEntries(Object.entries(e).filter(([n,i])=>!(i==null||n==="path"&&t||n==="linkpath"&&t||n==="global"))))}encode(e,t=0){if(e||(e=this.block=Buffer.alloc(512)),this.#e==="Unsupported"&&(this.#e="0"),!(e.length>=t+512))throw new Error("need 512 bytes for header");let n=this.ctime||this.atime?130:155,i=QBt(this.path||"",n),s=i[0],o=i[1];this.needPax=!!i[2],this.needPax=OC(e,t,100,s)||this.needPax,this.needPax=lb(e,t+100,8,this.mode)||this.needPax,this.needPax=lb(e,t+108,8,this.uid)||this.needPax,this.needPax=lb(e,t+116,8,this.gid)||this.needPax,this.needPax=lb(e,t+124,12,this.size)||this.needPax,this.needPax=Iae(e,t+136,12,this.mtime)||this.needPax,e[t+156]=this.#e.charCodeAt(0),this.needPax=OC(e,t+157,100,this.linkpath)||this.needPax,e.write("ustar\x0000",t+257,8),this.needPax=OC(e,t+265,32,this.uname)||this.needPax,this.needPax=OC(e,t+297,32,this.gname)||this.needPax,this.needPax=lb(e,t+329,8,this.devmaj)||this.needPax,this.needPax=lb(e,t+337,8,this.devmin)||this.needPax,this.needPax=OC(e,t+345,n,o)||this.needPax,e[t+475]!==0?this.needPax=OC(e,t+345,155,o)||this.needPax:(this.needPax=OC(e,t+345,130,o)||this.needPax,this.needPax=Iae(e,t+476,12,this.atime)||this.needPax,this.needPax=Iae(e,t+488,12,this.ctime)||this.needPax);let a=8*32;for(let c=t;c<t+148;c++)a+=e[c];for(let c=t+156;c<t+512;c++)a+=e[c];return this.cksum=a,lb(e,t+148,8,this.cksum),this.cksumValid=!0,this.needPax}get type(){return this.#e==="Unsupported"?this.#e:yV.get(this.#e)}get typeKey(){return this.#e}set type(e){let t=String(sBe.get(e));if(gV(t)||t==="Unsupported")this.#e=t;else if(gV(e))this.#e=e;else throw new TypeError("invalid entry type: "+e)}},QBt=(r,e)=>{let n=r,i="",s,o=AC.posix.parse(r).root||".";if(Buffer.byteLength(n)<100)s=[n,i,!1];else{i=AC.posix.dirname(n),n=AC.posix.basename(n);do Buffer.byteLength(n)<=100&&Buffer.byteLength(i)<=e?s=[n,i,!1]:Buffer.byteLength(n)>100&&Buffer.byteLength(i)<=e?s=[n.slice(0,99),i,!0]:(n=AC.posix.join(AC.posix.basename(i),n),i=AC.posix.dirname(i));while(i!==o&&s===void 0);s||(s=[r.slice(0,99),"",!0])}return s},xC=(r,e,t)=>r.subarray(e,e+t).toString("utf8").replace(/\0.*/,""),Tae=(r,e,t)=>YBt(cb(r,e,t)),YBt=r=>r===void 0?void 0:new Date(r*1e3),cb=(r,e,t)=>Number(r[e])&128?rBe(r.subarray(e,e+t)):JBt(r,e,t),XBt=r=>isNaN(r)?void 0:r,JBt=(r,e,t)=>XBt(parseInt(r.subarray(e,e+t).toString("utf8").replace(/\0.*$/,"").trim(),8)),ZBt={12:8589934591,8:2097151},lb=(r,e,t,n)=>n===void 0?!1:n>ZBt[t]||n<0?(tBe(n,r.subarray(e,e+t)),!0):(eGt(r,e,t,n),!1),eGt=(r,e,t,n)=>r.write(tGt(n,t),e,t,"ascii"),tGt=(r,e)=>rGt(Math.floor(r).toString(8),e),rGt=(r,e)=>(r.length===e-1?r:new Array(e-r.length-1).join("0")+r+" ")+"\0",Iae=(r,e,t,n)=>n===void 0?!1:lb(r,e,t,n.getTime()/1e3),nGt=new Array(156).join("\0"),OC=(r,e,t,n)=>n===void 0?!1:(r.write(n+nGt,e,t,"utf8"),n.length!==Buffer.byteLength(n)||n.length>t);var aBe=require("node:path");var ub=class r{atime;mtime;ctime;charset;comment;gid;uid;gname;uname;linkpath;dev;ino;nlink;path;size;mode;global;constructor(e,t=!1){this.atime=e.atime,this.charset=e.charset,this.comment=e.comment,this.ctime=e.ctime,this.dev=e.dev,this.gid=e.gid,this.global=t,this.gname=e.gname,this.ino=e.ino,this.linkpath=e.linkpath,this.mtime=e.mtime,this.nlink=e.nlink,this.path=e.path,this.size=e.size,this.uid=e.uid,this.uname=e.uname}encode(){let e=this.encodeBody();if(e==="")return Buffer.allocUnsafe(0);let t=Buffer.byteLength(e),n=512*Math.ceil(1+t/512),i=Buffer.allocUnsafe(n);for(let s=0;s<512;s++)i[s]=0;new od({path:("PaxHeader/"+(0,aBe.basename)(this.path??"")).slice(0,99),mode:this.mode||420,uid:this.uid,gid:this.gid,size:t,mtime:this.mtime,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime,ctime:this.ctime}).encode(i),i.write(e,512,t,"utf8");for(let s=t+512;s<i.length;s++)i[s]=0;return i}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(e){if(this[e]===void 0)return"";let t=this[e],n=t instanceof Date?t.getTime()/1e3:t,i=" "+(e==="dev"||e==="ino"||e==="nlink"?"SCHILY.":"")+e+"="+n+`
`,s=Buffer.byteLength(i),o=Math.floor(Math.log(s)/Math.log(10))+1;return s+o>=Math.pow(10,o)&&(o+=1),o+s+i}static parse(e,t,n=!1){return new r(iGt(sGt(e),t),n)}},iGt=(r,e)=>e?Object.assign({},e,r):r,sGt=r=>r.replace(/\n$/,"").split(`
`).reduce(oGt,Object.create(null)),oGt=(r,e)=>{let t=parseInt(e,10);if(t!==Buffer.byteLength(e)+1)return r;e=e.slice((t+" ").length);let n=e.split("="),i=n.shift();if(!i)return r;let s=i.replace(/^SCHILY\.(dev|ino|nlink)/,"$1"),o=n.join("=");return r[s]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(s)?new Date(Number(o)*1e3):/^[0-9]+$/.test(o)?+o:o,r};var aGt=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,Dn=aGt!=="win32"?r=>r:r=>r&&r.replace(/\\/g,"/");var T0=class extends yu{extended;globalExtended;header;startBlockSize;blockRemain;remain;type;meta=!1;ignore=!1;path;mode;uid;gid;uname;gname;size=0;mtime;atime;ctime;linkpath;dev;ino;nlink;invalid=!1;absolute;unsupported=!1;constructor(e,t,n){switch(super({}),this.pause(),this.extended=t,this.globalExtended=n,this.header=e,this.remain=e.size??0,this.startBlockSize=512*Math.ceil(this.remain/512),this.blockRemain=this.startBlockSize,this.type=e.type,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}if(!e.path)throw new Error("no path provided for tar.ReadEntry");this.path=Dn(e.path),this.mode=e.mode,this.mode&&(this.mode=this.mode&4095),this.uid=e.uid,this.gid=e.gid,this.uname=e.uname,this.gname=e.gname,this.size=this.remain,this.mtime=e.mtime,this.atime=e.atime,this.ctime=e.ctime,this.linkpath=e.linkpath?Dn(e.linkpath):void 0,this.uname=e.uname,this.gname=e.gname,t&&this.#e(t),n&&this.#e(n,!0)}write(e){let t=e.length;if(t>this.blockRemain)throw new Error("writing more to entry than is appropriate");let n=this.remain,i=this.blockRemain;return this.remain=Math.max(0,n-t),this.blockRemain=Math.max(0,i-t),this.ignore?!0:n>=t?super.write(e):super.write(e.subarray(0,n))}#e(e,t=!1){e.path&&(e.path=Dn(e.path)),e.linkpath&&(e.linkpath=Dn(e.linkpath)),Object.assign(this,Object.fromEntries(Object.entries(e).filter(([n,i])=>!(i==null||n==="path"&&t))))}};var NC=(r,e,t,n={})=>{r.file&&(n.file=r.file),r.cwd&&(n.cwd=r.cwd),n.code=t instanceof Error&&t.code||e,n.tarCode=e,!r.strict&&n.recoverable!==!1?(t instanceof Error&&(n=Object.assign(t,n),t=t.message),r.emit("warn",e,t,n)):t instanceof Error?r.emit("error",Object.assign(t,n)):r.emit("error",Object.assign(new Error(`${e}: ${t}`),n))};var cGt=1024*1024,Rae=Buffer.from([31,139]),op=Symbol("state"),DC=Symbol("writeEntry"),jg=Symbol("readEntry"),xae=Symbol("nextEntry"),cBe=Symbol("processEntry"),Zh=Symbol("extendedHeader"),mk=Symbol("globalExtendedHeader"),db=Symbol("meta"),lBe=Symbol("emitMeta"),zs=Symbol("buffer"),Ug=Symbol("queue"),pb=Symbol("ended"),Oae=Symbol("emittedEnd"),MC=Symbol("emit"),xa=Symbol("unzip"),vV=Symbol("consumeChunk"),bV=Symbol("consumeChunkSub"),Aae=Symbol("consumeBody"),uBe=Symbol("consumeMeta"),dBe=Symbol("consumeHeader"),hk=Symbol("consuming"),Nae=Symbol("bufferConcat"),_V=Symbol("maybeEnd"),I0=Symbol("writing"),mb=Symbol("aborted"),SV=Symbol("onDone"),kC=Symbol("sawValidEntry"),CV=Symbol("sawNullBlock"),PV=Symbol("sawEOF"),pBe=Symbol("closeStream"),lGt=()=>!0,Bg=class extends mBe.EventEmitter{file;strict;maxMetaEntrySize;filter;brotli;writable=!0;readable=!1;[Ug]=new E0;[zs];[jg];[DC];[op]="begin";[db]="";[Zh];[mk];[pb]=!1;[xa];[mb]=!1;[kC];[CV]=!1;[PV]=!1;[I0]=!1;[hk]=!1;[Oae]=!1;constructor(e={}){super(),this.file=e.file||"",this.on(SV,()=>{(this[op]==="begin"||this[kC]===!1)&&this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}),e.ondone?this.on(SV,e.ondone):this.on(SV,()=>{this.emit("prefinish"),this.emit("finish"),this.emit("end")}),this.strict=!!e.strict,this.maxMetaEntrySize=e.maxMetaEntrySize||cGt,this.filter=typeof e.filter=="function"?e.filter:lGt;let t=e.file&&(e.file.endsWith(".tar.br")||e.file.endsWith(".tbr"));this.brotli=!e.gzip&&e.brotli!==void 0?e.brotli:t?void 0:!1,this.on("end",()=>this[pBe]()),typeof e.onwarn=="function"&&this.on("warn",e.onwarn),typeof e.onReadEntry=="function"&&this.on("entry",e.onReadEntry)}warn(e,t,n={}){NC(this,e,t,n)}[dBe](e,t){this[kC]===void 0&&(this[kC]=!1);let n;try{n=new od(e,t,this[Zh],this[mk])}catch(i){return this.warn("TAR_ENTRY_INVALID",i)}if(n.nullBlock)this[CV]?(this[PV]=!0,this[op]==="begin"&&(this[op]="header"),this[MC]("eof")):(this[CV]=!0,this[MC]("nullBlock"));else if(this[CV]=!1,!n.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:n});else if(!n.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:n});else{let i=n.type;if(/^(Symbolic)?Link$/.test(i)&&!n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:n});else if(!/^(Symbolic)?Link$/.test(i)&&!/^(Global)?ExtendedHeader$/.test(i)&&n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:n});else{let s=this[DC]=new T0(n,this[Zh],this[mk]);if(!this[kC])if(s.remain){let o=()=>{s.invalid||(this[kC]=!0)};s.on("end",o)}else this[kC]=!0;s.meta?s.size>this.maxMetaEntrySize?(s.ignore=!0,this[MC]("ignoredEntry",s),this[op]="ignore",s.resume()):s.size>0&&(this[db]="",s.on("data",o=>this[db]+=o),this[op]="meta"):(this[Zh]=void 0,s.ignore=s.ignore||!this.filter(s.path,s),s.ignore?(this[MC]("ignoredEntry",s),this[op]=s.remain?"ignore":"header",s.resume()):(s.remain?this[op]="body":(this[op]="header",s.end()),this[jg]?this[Ug].push(s):(this[Ug].push(s),this[xae]())))}}}[pBe](){queueMicrotask(()=>this.emit("close"))}[cBe](e){let t=!0;if(!e)this[jg]=void 0,t=!1;else if(Array.isArray(e)){let[n,...i]=e;this.emit(n,...i)}else this[jg]=e,this.emit("entry",e),e.emittedEnd||(e.on("end",()=>this[xae]()),t=!1);return t}[xae](){do;while(this[cBe](this[Ug].shift()));if(!this[Ug].length){let e=this[jg];!e||e.flowing||e.size===e.remain?this[I0]||this.emit("drain"):e.once("drain",()=>this.emit("drain"))}}[Aae](e,t){let n=this[DC];if(!n)throw new Error("attempt to consume body without entry??");let i=n.blockRemain??0,s=i>=e.length&&t===0?e:e.subarray(t,t+i);return n.write(s),n.blockRemain||(this[op]="header",this[DC]=void 0,n.end()),s.length}[uBe](e,t){let n=this[DC],i=this[Aae](e,t);return!this[DC]&&n&&this[lBe](n),i}[MC](e,t,n){!this[Ug].length&&!this[jg]?this.emit(e,t,n):this[Ug].push([e,t,n])}[lBe](e){switch(this[MC]("meta",this[db]),e.type){case"ExtendedHeader":case"OldExtendedHeader":this[Zh]=ub.parse(this[db],this[Zh],!1);break;case"GlobalExtendedHeader":this[mk]=ub.parse(this[db],this[mk],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":{let t=this[Zh]??Object.create(null);this[Zh]=t,t.path=this[db].replace(/\0.*/,"");break}case"NextFileHasLongLinkpath":{let t=this[Zh]||Object.create(null);this[Zh]=t,t.linkpath=this[db].replace(/\0.*/,"");break}default:throw new Error("unknown meta: "+e.type)}}abort(e){this[mb]=!0,this.emit("abort",e),this.warn("TAR_ABORT",e,{recoverable:!1})}write(e,t,n){if(typeof t=="function"&&(n=t,t=void 0),typeof e=="string"&&(e=Buffer.from(e,typeof t=="string"?t:"utf8")),this[mb])return n?.(),!1;if((this[xa]===void 0||this.brotli===void 0&&this[xa]===!1)&&e){if(this[zs]&&(e=Buffer.concat([this[zs],e]),this[zs]=void 0),e.length<Rae.length)return this[zs]=e,n?.(),!0;for(let a=0;this[xa]===void 0&&a<Rae.length;a++)e[a]!==Rae[a]&&(this[xa]=!1);let o=this.brotli===void 0;if(this[xa]===!1&&o)if(e.length<512)if(this[pb])this.brotli=!0;else return this[zs]=e,n?.(),!0;else try{new od(e.subarray(0,512)),this.brotli=!1}catch{this.brotli=!0}if(this[xa]===void 0||this[xa]===!1&&this.brotli){let a=this[pb];this[pb]=!1,this[xa]=this[xa]===void 0?new pV({}):new fV({}),this[xa].on("data",l=>this[vV](l)),this[xa].on("error",l=>this.abort(l)),this[xa].on("end",()=>{this[pb]=!0,this[vV]()}),this[I0]=!0;let c=!!this[xa][a?"end":"write"](e);return this[I0]=!1,n?.(),c}}this[I0]=!0,this[xa]?this[xa].write(e):this[vV](e),this[I0]=!1;let s=this[Ug].length?!1:this[jg]?this[jg].flowing:!0;return!s&&!this[Ug].length&&this[jg]?.once("drain",()=>this.emit("drain")),n?.(),s}[Nae](e){e&&!this[mb]&&(this[zs]=this[zs]?Buffer.concat([this[zs],e]):e)}[_V](){if(this[pb]&&!this[Oae]&&!this[mb]&&!this[hk]){this[Oae]=!0;let e=this[DC];if(e&&e.blockRemain){let t=this[zs]?this[zs].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${e.blockRemain} more bytes, only ${t} available)`,{entry:e}),this[zs]&&e.write(this[zs]),e.end()}this[MC](SV)}}[vV](e){if(this[hk]&&e)this[Nae](e);else if(!e&&!this[zs])this[_V]();else if(e){if(this[hk]=!0,this[zs]){this[Nae](e);let t=this[zs];this[zs]=void 0,this[bV](t)}else this[bV](e);for(;this[zs]&&this[zs]?.length>=512&&!this[mb]&&!this[PV];){let t=this[zs];this[zs]=void 0,this[bV](t)}this[hk]=!1}(!this[zs]||this[pb])&&this[_V]()}[bV](e){let t=0,n=e.length;for(;t+512<=n&&!this[mb]&&!this[PV];)switch(this[op]){case"begin":case"header":this[dBe](e,t),t+=512;break;case"ignore":case"body":t+=this[Aae](e,t);break;case"meta":t+=this[uBe](e,t);break;default:throw new Error("invalid state: "+this[op])}t<n&&(this[zs]?this[zs]=Buffer.concat([e.subarray(t),this[zs]]):this[zs]=e.subarray(t))}end(e,t,n){return typeof e=="function"&&(n=e,t=void 0,e=void 0),typeof t=="function"&&(n=t,t=void 0),typeof e=="string"&&(e=Buffer.from(e,t)),n&&this.once("finish",n),this[mb]||(this[xa]?(e&&this[xa].write(e),this[xa].end()):(this[pb]=!0,this.brotli===void 0&&(e=e||Buffer.alloc(0)),e&&this.write(e),this[_V]())),this}};var ef=r=>{let e=r.length-1,t=-1;for(;e>-1&&r.charAt(e)==="/";)t=e,e--;return t===-1?r:r.slice(0,t)};var uGt=r=>{let e=r.onReadEntry;r.onReadEntry=e?t=>{e(t),t.resume()}:t=>t.resume()},Dae=(r,e)=>{let t=new Map(e.map(s=>[ef(s),!0])),n=r.filter,i=(s,o="")=>{let a=o||(0,wV.parse)(s).root||".",c;if(s===a)c=!1;else{let l=t.get(s);l!==void 0?c=l:c=i((0,wV.dirname)(s),a)}return t.set(s,c),c};r.filter=n?(s,o)=>n(s,o)&&i(ef(s)):s=>i(ef(s))},dGt=r=>{let e=new Bg(r),t=r.file,n;try{let i=LC.default.statSync(t),s=r.maxReadSize||16*1024*1024;if(i.size<s)e.end(LC.default.readFileSync(t));else{let o=0,a=Buffer.allocUnsafe(s);for(n=LC.default.openSync(t,"r");o<i.size;){let c=LC.default.readSync(n,a,0,s,o);o+=c,e.write(a.subarray(0,c))}e.end()}}finally{if(typeof n=="number")try{LC.default.closeSync(n)}catch{}}},pGt=(r,e)=>{let t=new Bg(r),n=r.maxReadSize||16*1024*1024,i=r.file;return new Promise((o,a)=>{t.on("error",a),t.on("end",o),LC.default.stat(i,(c,l)=>{if(c)a(c);else{let u=new IC(i,{readSize:n,size:l.size});u.on("error",a),u.pipe(t)}})})},qC=Jh(dGt,pGt,r=>new Bg(r),r=>new Bg(r),(r,e)=>{e?.length&&Dae(r,e),r.noResume||uGt(r)});var _k=ge(require("fs"),1);var Nm=ge(require("fs"),1);var zae=ge(require("path"),1);var Mae=(r,e,t)=>(r&=4095,t&&(r=(r|384)&-19),e&&(r&256&&(r|=64),r&32&&(r|=8),r&4&&(r|=1)),r);var fBe=require("node:path"),{isAbsolute:mGt,parse:hBe}=fBe.win32,fk=r=>{let e="",t=hBe(r);for(;mGt(r)||t.root;){let n=r.charAt(0)==="/"&&r.slice(0,4)!=="//?/"?"/":t.root;r=r.slice(n.length),e+=n,t=hBe(r)}return[e,r]};var EV=["|","<",">","?",":"],kae=EV.map(r=>String.fromCharCode(61440+r.charCodeAt(0))),hGt=new Map(EV.map((r,e)=>[r,kae[e]])),fGt=new Map(kae.map((r,e)=>[r,EV[e]])),Lae=r=>EV.reduce((e,t)=>e.split(t).join(hGt.get(t)),r),gBe=r=>kae.reduce((e,t)=>e.split(t).join(fGt.get(t)),r);var CBe=(r,e)=>e?(r=Dn(r).replace(/^\.(\/|$)/,""),ef(e)+"/"+r):Dn(r),gGt=16*1024*1024,vBe=Symbol("process"),bBe=Symbol("file"),_Be=Symbol("directory"),Fae=Symbol("symlink"),SBe=Symbol("hardlink"),gk=Symbol("header"),TV=Symbol("read"),jae=Symbol("lstat"),IV=Symbol("onlstat"),Uae=Symbol("onread"),Bae=Symbol("onreadlink"),Gae=Symbol("openfile"),$ae=Symbol("onopenfile"),hb=Symbol("close"),RV=Symbol("mode"),Vae=Symbol("awaitDrain"),qae=Symbol("ondrain"),tf=Symbol("prefix"),yk=class extends yu{path;portable;myuid=process.getuid&&process.getuid()||0;myuser=process.env.USER||"";maxReadSize;linkCache;statCache;preservePaths;cwd;strict;mtime;noPax;noMtime;prefix;fd;blockLen=0;blockRemain=0;buf;pos=0;remain=0;length=0;offset=0;win32;absolute;header;type;linkpath;stat;onWriteEntry;#e=!1;constructor(e,t={}){let n=dk(t);super(),this.path=Dn(e),this.portable=!!n.portable,this.maxReadSize=n.maxReadSize||gGt,this.linkCache=n.linkCache||new Map,this.statCache=n.statCache||new Map,this.preservePaths=!!n.preservePaths,this.cwd=Dn(n.cwd||process.cwd()),this.strict=!!n.strict,this.noPax=!!n.noPax,this.noMtime=!!n.noMtime,this.mtime=n.mtime,this.prefix=n.prefix?Dn(n.prefix):void 0,this.onWriteEntry=n.onWriteEntry,typeof n.onwarn=="function"&&this.on("warn",n.onwarn);let i=!1;if(!this.preservePaths){let[o,a]=fk(this.path);o&&typeof a=="string"&&(this.path=a,i=o)}this.win32=!!n.win32||process.platform==="win32",this.win32&&(this.path=gBe(this.path.replace(/\\/g,"/")),e=e.replace(/\\/g,"/")),this.absolute=Dn(n.absolute||zae.default.resolve(this.cwd,e)),this.path===""&&(this.path="./"),i&&this.warn("TAR_ENTRY_INFO",`stripping ${i} from absolute path`,{entry:this,path:i+this.path});let s=this.statCache.get(this.absolute);s?this[IV](s):this[jae]()}warn(e,t,n={}){return NC(this,e,t,n)}emit(e,...t){return e==="error"&&(this.#e=!0),super.emit(e,...t)}[jae](){Nm.default.lstat(this.absolute,(e,t)=>{if(e)return this.emit("error",e);this[IV](t)})}[IV](e){this.statCache.set(this.absolute,e),this.stat=e,e.isFile()||(e.size=0),this.type=yGt(e),this.emit("stat",e),this[vBe]()}[vBe](){switch(this.type){case"File":return this[bBe]();case"Directory":return this[_Be]();case"SymbolicLink":return this[Fae]();default:return this.end()}}[RV](e){return Mae(e,this.type==="Directory",this.portable)}[tf](e){return CBe(e,this.prefix)}[gk](){if(!this.stat)throw new Error("cannot write header before stat");this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.onWriteEntry?.(this),this.header=new od({path:this[tf](this.path),linkpath:this.type==="Link"&&this.linkpath!==void 0?this[tf](this.linkpath):this.linkpath,mode:this[RV](this.stat.mode),uid:this.portable?void 0:this.stat.uid,gid:this.portable?void 0:this.stat.gid,size:this.stat.size,mtime:this.noMtime?void 0:this.mtime||this.stat.mtime,type:this.type==="Unsupported"?void 0:this.type,uname:this.portable?void 0:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?void 0:this.stat.atime,ctime:this.portable?void 0:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new ub({atime:this.portable?void 0:this.header.atime,ctime:this.portable?void 0:this.header.ctime,gid:this.portable?void 0:this.header.gid,mtime:this.noMtime?void 0:this.mtime||this.header.mtime,path:this[tf](this.path),linkpath:this.type==="Link"&&this.linkpath!==void 0?this[tf](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?void 0:this.header.uid,uname:this.portable?void 0:this.header.uname,dev:this.portable?void 0:this.stat.dev,ino:this.portable?void 0:this.stat.ino,nlink:this.portable?void 0:this.stat.nlink}).encode());let e=this.header?.block;if(!e)throw new Error("failed to encode header");super.write(e)}[_Be](){if(!this.stat)throw new Error("cannot create directory entry without stat");this.path.slice(-1)!=="/"&&(this.path+="/"),this.stat.size=0,this[gk](),this.end()}[Fae](){Nm.default.readlink(this.absolute,(e,t)=>{if(e)return this.emit("error",e);this[Bae](t)})}[Bae](e){this.linkpath=Dn(e),this[gk](),this.end()}[SBe](e){if(!this.stat)throw new Error("cannot create link entry without stat");this.type="Link",this.linkpath=Dn(zae.default.relative(this.cwd,e)),this.stat.size=0,this[gk](),this.end()}[bBe](){if(!this.stat)throw new Error("cannot create file entry without stat");if(this.stat.nlink>1){let e=`${this.stat.dev}:${this.stat.ino}`,t=this.linkCache.get(e);if(t?.indexOf(this.cwd)===0)return this[SBe](t);this.linkCache.set(e,this.absolute)}if(this[gk](),this.stat.size===0)return this.end();this[Gae]()}[Gae](){Nm.default.open(this.absolute,"r",(e,t)=>{if(e)return this.emit("error",e);this[$ae](t)})}[$ae](e){if(this.fd=e,this.#e)return this[hb]();if(!this.stat)throw new Error("should stat before calling onopenfile");this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;let t=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(t),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[TV]()}[TV](){let{fd:e,buf:t,offset:n,length:i,pos:s}=this;if(e===void 0||t===void 0)throw new Error("cannot read file without first opening");Nm.default.read(e,t,n,i,s,(o,a)=>{if(o)return this[hb](()=>this.emit("error",o));this[Uae](a)})}[hb](e=()=>{}){this.fd!==void 0&&Nm.default.close(this.fd,e)}[Uae](e){if(e<=0&&this.remain>0){let i=Object.assign(new Error("encountered unexpected EOF"),{path:this.absolute,syscall:"read",code:"EOF"});return this[hb](()=>this.emit("error",i))}if(e>this.remain){let i=Object.assign(new Error("did not encounter expected EOF"),{path:this.absolute,syscall:"read",code:"EOF"});return this[hb](()=>this.emit("error",i))}if(!this.buf)throw new Error("should have created buffer prior to reading");if(e===this.remain)for(let i=e;i<this.length&&e<this.blockRemain;i++)this.buf[i+this.offset]=0,e++,this.remain++;let t=this.offset===0&&e===this.buf.length?this.buf:this.buf.subarray(this.offset,this.offset+e);this.write(t)?this[qae]():this[Vae](()=>this[qae]())}[Vae](e){this.once("drain",e)}write(e,t,n){if(typeof t=="function"&&(n=t,t=void 0),typeof e=="string"&&(e=Buffer.from(e,typeof t=="string"?t:"utf8")),this.blockRemain<e.length){let i=Object.assign(new Error("writing more data than expected"),{path:this.absolute});return this.emit("error",i)}return this.remain-=e.length,this.blockRemain-=e.length,this.pos+=e.length,this.offset+=e.length,super.write(e,null,n)}[qae](){if(!this.remain)return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),this[hb](e=>e?this.emit("error",e):this.end());if(!this.buf)throw new Error("buffer lost somehow in ONDRAIN");this.offset>=this.length&&(this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[TV]()}},xV=class extends yk{sync=!0;[jae](){this[IV](Nm.default.lstatSync(this.absolute))}[Fae](){this[Bae](Nm.default.readlinkSync(this.absolute))}[Gae](){this[$ae](Nm.default.openSync(this.absolute,"r"))}[TV](){let e=!0;try{let{fd:t,buf:n,offset:i,length:s,pos:o}=this;if(t===void 0||n===void 0)throw new Error("fd and buf must be set in READ method");let a=Nm.default.readSync(t,n,i,s,o);this[Uae](a),e=!1}finally{if(e)try{this[hb](()=>{})}catch{}}}[Vae](e){e()}[hb](e=()=>{}){this.fd!==void 0&&Nm.default.closeSync(this.fd),e()}},OV=class extends yu{blockLen=0;blockRemain=0;buf=0;pos=0;remain=0;length=0;preservePaths;portable;strict;noPax;noMtime;readEntry;type;prefix;path;mode;uid;gid;uname;gname;header;mtime;atime;ctime;linkpath;size;onWriteEntry;warn(e,t,n={}){return NC(this,e,t,n)}constructor(e,t={}){let n=dk(t);super(),this.preservePaths=!!n.preservePaths,this.portable=!!n.portable,this.strict=!!n.strict,this.noPax=!!n.noPax,this.noMtime=!!n.noMtime,this.onWriteEntry=n.onWriteEntry,this.readEntry=e;let{type:i}=e;if(i==="Unsupported")throw new Error("writing entry that should be ignored");this.type=i,this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.prefix=n.prefix,this.path=Dn(e.path),this.mode=e.mode!==void 0?this[RV](e.mode):void 0,this.uid=this.portable?void 0:e.uid,this.gid=this.portable?void 0:e.gid,this.uname=this.portable?void 0:e.uname,this.gname=this.portable?void 0:e.gname,this.size=e.size,this.mtime=this.noMtime?void 0:n.mtime||e.mtime,this.atime=this.portable?void 0:e.atime,this.ctime=this.portable?void 0:e.ctime,this.linkpath=e.linkpath!==void 0?Dn(e.linkpath):void 0,typeof n.onwarn=="function"&&this.on("warn",n.onwarn);let s=!1;if(!this.preservePaths){let[a,c]=fk(this.path);a&&typeof c=="string"&&(this.path=c,s=a)}this.remain=e.size,this.blockRemain=e.startBlockSize,this.onWriteEntry?.(this),this.header=new od({path:this[tf](this.path),linkpath:this.type==="Link"&&this.linkpath!==void 0?this[tf](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?void 0:this.uid,gid:this.portable?void 0:this.gid,size:this.size,mtime:this.noMtime?void 0:this.mtime,type:this.type,uname:this.portable?void 0:this.uname,atime:this.portable?void 0:this.atime,ctime:this.portable?void 0:this.ctime}),s&&this.warn("TAR_ENTRY_INFO",`stripping ${s} from absolute path`,{entry:this,path:s+this.path}),this.header.encode()&&!this.noPax&&super.write(new ub({atime:this.portable?void 0:this.atime,ctime:this.portable?void 0:this.ctime,gid:this.portable?void 0:this.gid,mtime:this.noMtime?void 0:this.mtime,path:this[tf](this.path),linkpath:this.type==="Link"&&this.linkpath!==void 0?this[tf](this.linkpath):this.linkpath,size:this.size,uid:this.portable?void 0:this.uid,uname:this.portable?void 0:this.uname,dev:this.portable?void 0:this.readEntry.dev,ino:this.portable?void 0:this.readEntry.ino,nlink:this.portable?void 0:this.readEntry.nlink}).encode());let o=this.header?.block;if(!o)throw new Error("failed to encode header");super.write(o),e.pipe(this)}[tf](e){return CBe(e,this.prefix)}[RV](e){return Mae(e,this.type==="Directory",this.portable)}write(e,t,n){typeof t=="function"&&(n=t,t=void 0),typeof e=="string"&&(e=Buffer.from(e,typeof t=="string"?t:"utf8"));let i=e.length;if(i>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=i,super.write(e,n)}end(e,t,n){return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),typeof e=="function"&&(n=e,t=void 0,e=void 0),typeof t=="function"&&(n=t,t=void 0),typeof e=="string"&&(e=Buffer.from(e,t??"utf8")),n&&this.once("finish",n),e?super.end(e,n):super.end(n),this}},yGt=r=>r.isFile()?"File":r.isDirectory()?"Directory":r.isSymbolicLink()?"SymbolicLink":"Unsupported";var Xae=ge(require("path"),1);var LV=class{path;absolute;entry;stat;readdir;pending=!1;ignore=!1;piped=!1;constructor(e,t){this.path=e||"./",this.absolute=t}},PBe=Buffer.alloc(1024),AV=Symbol("onStat"),vk=Symbol("ended"),Dm=Symbol("queue"),R0=Symbol("current"),zC=Symbol("process"),bk=Symbol("processing"),wBe=Symbol("processJob"),Mm=Symbol("jobs"),Hae=Symbol("jobDone"),NV=Symbol("addFSEntry"),EBe=Symbol("addTarEntry"),Qae=Symbol("stat"),Yae=Symbol("readdir"),DV=Symbol("onreaddir"),MV=Symbol("pipe"),TBe=Symbol("entry"),Wae=Symbol("entryOpt"),kV=Symbol("writeEntryClass"),IBe=Symbol("write"),Kae=Symbol("ondrain"),fb=class extends yu{opt;cwd;maxReadSize;preservePaths;strict;noPax;prefix;linkCache;statCache;file;portable;zip;readdirCache;noDirRecurse;follow;noMtime;mtime;filter;jobs;[kV];onWriteEntry;[Dm];[Mm]=0;[bk]=!1;[vk]=!1;constructor(e={}){if(super(),this.opt=e,this.file=e.file||"",this.cwd=e.cwd||process.cwd(),this.maxReadSize=e.maxReadSize,this.preservePaths=!!e.preservePaths,this.strict=!!e.strict,this.noPax=!!e.noPax,this.prefix=Dn(e.prefix||""),this.linkCache=e.linkCache||new Map,this.statCache=e.statCache||new Map,this.readdirCache=e.readdirCache||new Map,this.onWriteEntry=e.onWriteEntry,this[kV]=yk,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),this.portable=!!e.portable,e.gzip||e.brotli){if(e.gzip&&e.brotli)throw new TypeError("gzip and brotli are mutually exclusive");if(e.gzip&&(typeof e.gzip!="object"&&(e.gzip={}),this.portable&&(e.gzip.portable=!0),this.zip=new dV(e.gzip)),e.brotli&&(typeof e.brotli!="object"&&(e.brotli={}),this.zip=new hV(e.brotli)),!this.zip)throw new Error("impossible");let t=this.zip;t.on("data",n=>super.write(n)),t.on("end",()=>super.end()),t.on("drain",()=>this[Kae]()),this.on("resume",()=>t.resume())}else this.on("drain",this[Kae]);this.noDirRecurse=!!e.noDirRecurse,this.follow=!!e.follow,this.noMtime=!!e.noMtime,e.mtime&&(this.mtime=e.mtime),this.filter=typeof e.filter=="function"?e.filter:()=>!0,this[Dm]=new E0,this[Mm]=0,this.jobs=Number(e.jobs)||4,this[bk]=!1,this[vk]=!1}[IBe](e){return super.write(e)}add(e){return this.write(e),this}end(e,t,n){return typeof e=="function"&&(n=e,e=void 0),typeof t=="function"&&(n=t,t=void 0),e&&this.add(e),this[vk]=!0,this[zC](),n&&n(),this}write(e){if(this[vk])throw new Error("write after end");return e instanceof T0?this[EBe](e):this[NV](e),this.flowing}[EBe](e){let t=Dn(Xae.default.resolve(this.cwd,e.path));if(!this.filter(e.path,e))e.resume();else{let n=new LV(e.path,t);n.entry=new OV(e,this[Wae](n)),n.entry.on("end",()=>this[Hae](n)),this[Mm]+=1,this[Dm].push(n)}this[zC]()}[NV](e){let t=Dn(Xae.default.resolve(this.cwd,e));this[Dm].push(new LV(e,t)),this[zC]()}[Qae](e){e.pending=!0,this[Mm]+=1;let t=this.follow?"stat":"lstat";_k.default[t](e.absolute,(n,i)=>{e.pending=!1,this[Mm]-=1,n?this.emit("error",n):this[AV](e,i)})}[AV](e,t){this.statCache.set(e.absolute,t),e.stat=t,this.filter(e.path,t)||(e.ignore=!0),this[zC]()}[Yae](e){e.pending=!0,this[Mm]+=1,_k.default.readdir(e.absolute,(t,n)=>{if(e.pending=!1,this[Mm]-=1,t)return this.emit("error",t);this[DV](e,n)})}[DV](e,t){this.readdirCache.set(e.absolute,t),e.readdir=t,this[zC]()}[zC](){if(!this[bk]){this[bk]=!0;for(let e=this[Dm].head;e&&this[Mm]<this.jobs;e=e.next)if(this[wBe](e.value),e.value.ignore){let t=e.next;this[Dm].removeNode(e),e.next=t}this[bk]=!1,this[vk]&&!this[Dm].length&&this[Mm]===0&&(this.zip?this.zip.end(PBe):(super.write(PBe),super.end()))}}get[R0](){return this[Dm]&&this[Dm].head&&this[Dm].head.value}[Hae](e){this[Dm].shift(),this[Mm]-=1,this[zC]()}[wBe](e){if(!e.pending){if(e.entry){e===this[R0]&&!e.piped&&this[MV](e);return}if(!e.stat){let t=this.statCache.get(e.absolute);t?this[AV](e,t):this[Qae](e)}if(e.stat&&!e.ignore){if(!this.noDirRecurse&&e.stat.isDirectory()&&!e.readdir){let t=this.readdirCache.get(e.absolute);if(t?this[DV](e,t):this[Yae](e),!e.readdir)return}if(e.entry=this[TBe](e),!e.entry){e.ignore=!0;return}e===this[R0]&&!e.piped&&this[MV](e)}}}[Wae](e){return{onwarn:(t,n,i)=>this.warn(t,n,i),noPax:this.noPax,cwd:this.cwd,absolute:e.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix,onWriteEntry:this.onWriteEntry}}[TBe](e){this[Mm]+=1;try{return new this[kV](e.path,this[Wae](e)).on("end",()=>this[Hae](e)).on("error",n=>this.emit("error",n))}catch(t){this.emit("error",t)}}[Kae](){this[R0]&&this[R0].entry&&this[R0].entry.resume()}[MV](e){e.piped=!0,e.readdir&&e.readdir.forEach(i=>{let s=e.path,o=s==="./"?"":s.replace(/\/*$/,"/");this[NV](o+i)});let t=e.entry,n=this.zip;if(!t)throw new Error("cannot pipe without source");n?t.on("data",i=>{n.write(i)||t.pause()}):t.on("data",i=>{super.write(i)||t.pause()})}pause(){return this.zip&&this.zip.pause(),super.pause()}warn(e,t,n={}){NC(this,e,t,n)}},FC=class extends fb{sync=!0;constructor(e){super(e),this[kV]=xV}pause(){}resume(){}[Qae](e){let t=this.follow?"statSync":"lstatSync";this[AV](e,_k.default[t](e.absolute))}[Yae](e){this[DV](e,_k.default.readdirSync(e.absolute))}[MV](e){let t=e.entry,n=this.zip;if(e.readdir&&e.readdir.forEach(i=>{let s=e.path,o=s==="./"?"":s.replace(/\/*$/,"/");this[NV](o+i)}),!t)throw new Error("Cannot pipe without source");n?t.on("data",i=>{n.write(i)}):t.on("data",i=>{super[IBe](i)})}};var vGt=(r,e)=>{let t=new FC(r),n=new P0(r.file,{mode:r.mode||438});t.pipe(n),RBe(t,e)},bGt=(r,e)=>{let t=new fb(r),n=new qg(r.file,{mode:r.mode||438});t.pipe(n);let i=new Promise((s,o)=>{n.on("error",o),n.on("close",s),t.on("error",o)});return xBe(t,e),i},RBe=(r,e)=>{e.forEach(t=>{t.charAt(0)==="@"?qC({file:Jae.default.resolve(r.cwd,t.slice(1)),sync:!0,noResume:!0,onReadEntry:n=>r.add(n)}):r.add(t)}),r.end()},xBe=async(r,e)=>{for(let t=0;t<e.length;t++){let n=String(e[t]);n.charAt(0)==="@"?await qC({file:Jae.default.resolve(String(r.cwd),n.slice(1)),noResume:!0,onReadEntry:i=>{r.add(i)}}):r.add(n)}r.end()},_Gt=(r,e)=>{let t=new FC(r);return RBe(t,e),t},SGt=(r,e)=>{let t=new fb(r);return xBe(t,e),t},CGt=Jh(vGt,bGt,_Gt,SGt,(r,e)=>{if(!e?.length)throw new TypeError("no paths specified to add to archive")});var Sce=ge(require("node:fs"),1);var VBe=ge(require("node:assert"),1),_ce=require("node:crypto"),Ai=ge(require("node:fs"),1),nf=ge(require("node:path"),1);var Zae=ge(require("fs"),1),PGt=process.env.__FAKE_PLATFORM__||process.platform,wGt=PGt==="win32",{O_CREAT:EGt,O_TRUNC:TGt,O_WRONLY:IGt}=Zae.default.constants,OBe=Number(process.env.__FAKE_FS_O_FILENAME__)||Zae.default.constants.UV_FS_O_FILEMAP||0,RGt=wGt&&!!OBe,xGt=512*1024,OGt=OBe|TGt|EGt|IGt,ece=RGt?r=>r<xGt?OGt:"w":()=>"w";var Sk=ge(require("node:fs"),1),x0=ge(require("node:path"),1),tce=(r,e,t)=>{try{return Sk.default.lchownSync(r,e,t)}catch(n){if(n?.code!=="ENOENT")throw n}},qV=(r,e,t,n)=>{Sk.default.lchown(r,e,t,i=>{n(i&&i?.code!=="ENOENT"?i:null)})},AGt=(r,e,t,n,i)=>{if(e.isDirectory())rce(x0.default.resolve(r,e.name),t,n,s=>{if(s)return i(s);let o=x0.default.resolve(r,e.name);qV(o,t,n,i)});else{let s=x0.default.resolve(r,e.name);qV(s,t,n,i)}},rce=(r,e,t,n)=>{Sk.default.readdir(r,{withFileTypes:!0},(i,s)=>{if(i){if(i.code==="ENOENT")return n();if(i.code!=="ENOTDIR"&&i.code!=="ENOTSUP")return n(i)}if(i||!s.length)return qV(r,e,t,n);let o=s.length,a=null,c=l=>{if(!a){if(l)return n(a=l);if(--o===0)return qV(r,e,t,n)}};for(let l of s)AGt(r,l,e,t,c)})},NGt=(r,e,t,n)=>{e.isDirectory()&&nce(x0.default.resolve(r,e.name),t,n),tce(x0.default.resolve(r,e.name),t,n)},nce=(r,e,t)=>{let n;try{n=Sk.default.readdirSync(r,{withFileTypes:!0})}catch(i){let s=i;if(s?.code==="ENOENT")return;if(s?.code==="ENOTDIR"||s?.code==="ENOTSUP")return tce(r,e,t);throw s}for(let i of n)NGt(r,i,e,t);return tce(r,e,t)};var ad=ge(require("fs"),1);var ice=require("path");var gb=require("fs"),ap=r=>{if(!r)r={mode:511};else if(typeof r=="object")r={mode:511,...r};else if(typeof r=="number")r={mode:r};else if(typeof r=="string")r={mode:parseInt(r,8)};else throw new TypeError("invalid options argument");let e=r,t=r.fs||{};return r.mkdir=r.mkdir||t.mkdir||gb.mkdir,r.mkdirAsync=r.mkdirAsync?r.mkdirAsync:async(n,i)=>new Promise((s,o)=>e.mkdir(n,i,(a,c)=>a?o(a):s(c))),r.stat=r.stat||t.stat||gb.stat,r.statAsync=r.statAsync?r.statAsync:async n=>new Promise((i,s)=>e.stat(n,(o,a)=>o?s(o):i(a))),r.statSync=r.statSync||t.statSync||gb.statSync,r.mkdirSync=r.mkdirSync||t.mkdirSync||gb.mkdirSync,e};var rf=(r,e,t)=>{let n=(0,ice.dirname)(r),i={...ap(e),recursive:!1};if(n===r)try{return i.mkdirSync(r,i)}catch(s){let o=s;if(o&&o.code!=="EISDIR")throw s;return}try{return i.mkdirSync(r,i),t||r}catch(s){let o=s;if(o&&o.code==="ENOENT")return rf(r,i,rf(n,i,t));if(o&&o.code!=="EEXIST"&&o&&o.code!=="EROFS")throw s;try{if(!i.statSync(r).isDirectory())throw s}catch{throw s}}},Gg=Object.assign(async(r,e,t)=>{let n=ap(e);n.recursive=!1;let i=(0,ice.dirname)(r);return i===r?n.mkdirAsync(r,n).catch(s=>{let o=s;if(o&&o.code!=="EISDIR")throw s}):n.mkdirAsync(r,n).then(()=>t||r,async s=>{let o=s;if(o&&o.code==="ENOENT")return Gg(i,n).then(a=>Gg(r,n,a));if(o&&o.code!=="EEXIST"&&o.code!=="EROFS")throw s;return n.statAsync(r).then(a=>{if(a.isDirectory())return t;throw s},()=>{throw s})})},{sync:rf});var cce=require("path");var sce=require("path"),oce=async(r,e,t)=>{if(t!==e)return r.statAsync(e).then(n=>n.isDirectory()?t:void 0,n=>{let i=n;return i&&i.code==="ENOENT"?oce(r,(0,sce.dirname)(e),e):void 0})},ace=(r,e,t)=>{if(t!==e)try{return r.statSync(e).isDirectory()?t:void 0}catch(n){let i=n;return i&&i.code==="ENOENT"?ace(r,(0,sce.dirname)(e),e):void 0}};var O0=(r,e)=>{let t=ap(e);if(t.recursive=!0,(0,cce.dirname)(r)===r)return t.mkdirSync(r,t);let i=ace(t,r);try{return t.mkdirSync(r,t),i}catch(s){let o=s;if(o&&o.code==="ENOENT")return rf(r,t);throw s}},Ck=Object.assign(async(r,e)=>{let t={...ap(e),recursive:!0};return(0,cce.dirname)(r)===r?await t.mkdirAsync(r,t):oce(t,r).then(i=>t.mkdirAsync(r,t).then(s=>i||s).catch(s=>{let o=s;if(o&&o.code==="ENOENT")return Gg(r,t);throw s}))},{sync:O0});var zV=require("path"),DGt=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,lce=r=>{if(/\0/.test(r))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:r,code:"ERR_INVALID_ARG_VALUE"});if(r=(0,zV.resolve)(r),DGt==="win32"){let e=/[*|"<>?:]/,{root:t}=(0,zV.parse)(r);if(e.test(r.substring(t.length)))throw Object.assign(new Error("Illegal characters in path."),{path:r,code:"EINVAL"})}return r};var FV=require("fs");var MGt=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,uce=MGt.replace(/^v/,"").split("."),ABe=+uce[0]>10||+uce[0]==10&&+uce[1]>=12,Pk=ABe?r=>ap(r).mkdirSync===FV.mkdirSync:()=>!1,jV=Object.assign(ABe?r=>ap(r).mkdir===FV.mkdir:()=>!1,{sync:Pk});var UV=(r,e)=>{r=lce(r);let t=ap(e);return Pk(t)?O0(r,t):rf(r,t)};var NBe=Object.assign(async(r,e)=>{r=lce(r);let t=ap(e);return jV(t)?Ck(r,t):Gg(r,t)},{mkdirpSync:UV,mkdirpNative:Ck,mkdirpNativeSync:O0,mkdirpManual:Gg,mkdirpManualSync:rf,sync:UV,native:Ck,nativeSync:O0,manual:Gg,manualSync:rf,useNative:jV,useNativeSync:Pk});var Ik=ge(require("node:path"),1);var wk=class extends Error{path;code;syscall="chdir";constructor(e,t){super(`${t}: Cannot cd into '${e}'`),this.path=e,this.code=t}get name(){return"CwdError"}};var Ek=class extends Error{path;symlink;syscall="symlink";code="TAR_SYMLINK_ERROR";constructor(e,t){super("TAR_SYMLINK_ERROR: Cannot extract through symbolic link"),this.symlink=e,this.path=t}get name(){return"SymlinkError"}};var BV=(r,e)=>r.get(Dn(e)),Tk=(r,e,t)=>r.set(Dn(e),t),kGt=(r,e)=>{ad.default.stat(r,(t,n)=>{(t||!n.isDirectory())&&(t=new wk(r,t?.code||"ENOTDIR")),e(t)})},DBe=(r,e,t)=>{r=Dn(r);let n=e.umask??18,i=e.mode|448,s=(i&n)!==0,o=e.uid,a=e.gid,c=typeof o=="number"&&typeof a=="number"&&(o!==e.processUid||a!==e.processGid),l=e.preserve,u=e.unlink,d=e.cache,p=Dn(e.cwd),m=(v,_)=>{v?t(v):(Tk(d,r,!0),_&&c?rce(_,o,a,C=>m(C)):s?ad.default.chmod(r,i,t):t())};if(d&&BV(d,r)===!0)return m();if(r===p)return kGt(r,m);if(l)return NBe(r,{mode:i}).then(v=>m(null,v??void 0),m);let y=Dn(Ik.default.relative(p,r)).split("/");GV(p,y,i,d,u,p,void 0,m)},GV=(r,e,t,n,i,s,o,a)=>{if(!e.length)return a(null,o);let c=e.shift(),l=Dn(Ik.default.resolve(r+"/"+c));if(BV(n,l))return GV(l,e,t,n,i,s,o,a);ad.default.mkdir(l,t,MBe(l,e,t,n,i,s,o,a))},MBe=(r,e,t,n,i,s,o,a)=>c=>{c?ad.default.lstat(r,(l,u)=>{if(l)l.path=l.path&&Dn(l.path),a(l);else if(u.isDirectory())GV(r,e,t,n,i,s,o,a);else if(i)ad.default.unlink(r,d=>{if(d)return a(d);ad.default.mkdir(r,t,MBe(r,e,t,n,i,s,o,a))});else{if(u.isSymbolicLink())return a(new Ek(r,r+"/"+e.join("/")));a(c)}}):(o=o||r,GV(r,e,t,n,i,s,o,a))},LGt=r=>{let e=!1,t;try{e=ad.default.statSync(r).isDirectory()}catch(n){t=n?.code}finally{if(!e)throw new wk(r,t??"ENOTDIR")}},kBe=(r,e)=>{r=Dn(r);let t=e.umask??18,n=e.mode|448,i=(n&t)!==0,s=e.uid,o=e.gid,a=typeof s=="number"&&typeof o=="number"&&(s!==e.processUid||o!==e.processGid),c=e.preserve,l=e.unlink,u=e.cache,d=Dn(e.cwd),p=v=>{Tk(u,r,!0),v&&a&&nce(v,s,o),i&&ad.default.chmodSync(r,n)};if(u&&BV(u,r)===!0)return p();if(r===d)return LGt(d),p();if(c)return p(UV(r,n)??void 0);let f=Dn(Ik.default.relative(d,r)).split("/"),y;for(let v=f.shift(),_=d;v&&(_+="/"+v);v=f.shift())if(_=Dn(Ik.default.resolve(_)),!BV(u,_))try{ad.default.mkdirSync(_,n),y=y||_,Tk(u,_,!0)}catch{let P=ad.default.lstatSync(_);if(P.isDirectory()){Tk(u,_,!0);continue}else if(l){ad.default.unlinkSync(_),ad.default.mkdirSync(_,n),y=y||_,Tk(u,_,!0);continue}else if(P.isSymbolicLink())return new Ek(_,_+"/"+f.join("/"))}return p(y)};var dce=Object.create(null),{hasOwnProperty:qGt}=Object.prototype,$V=r=>(qGt.call(dce,r)||(dce[r]=r.normalize("NFD")),dce[r]);var pce=require("node:path");var zGt=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,FGt=zGt==="win32",jGt=r=>r.split("/").slice(0,-1).reduce((t,n)=>{let i=t[t.length-1];return i!==void 0&&(n=(0,pce.join)(i,n)),t.push(n||"/"),t},[]),VV=class{#e=new Map;#t=new Map;#n=new Set;reserve(e,t){e=FGt?["win32 parallelization disabled"]:e.map(i=>ef((0,pce.join)($V(i))).toLowerCase());let n=new Set(e.map(i=>jGt(i)).reduce((i,s)=>i.concat(s)));this.#t.set(t,{dirs:n,paths:e});for(let i of e){let s=this.#e.get(i);s?s.push(t):this.#e.set(i,[t])}for(let i of n){let s=this.#e.get(i);if(!s)this.#e.set(i,[new Set([t])]);else{let o=s[s.length-1];o instanceof Set?o.add(t):s.push(new Set([t]))}}return this.#o(t)}#r(e){let t=this.#t.get(e);if(!t)throw new Error("function does not have any path reservations");return{paths:t.paths.map(n=>this.#e.get(n)),dirs:[...t.dirs].map(n=>this.#e.get(n))}}check(e){let{paths:t,dirs:n}=this.#r(e);return t.every(i=>i&&i[0]===e)&&n.every(i=>i&&i[0]instanceof Set&&i[0].has(e))}#o(e){return this.#n.has(e)||!this.check(e)?!1:(this.#n.add(e),e(()=>this.#a(e)),!0)}#a(e){if(!this.#n.has(e))return!1;let t=this.#t.get(e);if(!t)throw new Error("invalid reservation");let{paths:n,dirs:i}=t,s=new Set;for(let o of n){let a=this.#e.get(o);if(!a||a?.[0]!==e)continue;let c=a[1];if(!c){this.#e.delete(o);continue}if(a.shift(),typeof c=="function")s.add(c);else for(let l of c)s.add(l)}for(let o of i){let a=this.#e.get(o),c=a?.[0];if(!(!a||!(c instanceof Set)))if(c.size===1&&a.length===1){this.#e.delete(o);continue}else if(c.size===1){a.shift();let l=a[0];typeof l=="function"&&s.add(l)}else c.delete(e)}return this.#n.delete(e),s.forEach(o=>this.#o(o)),!0}};var LBe=Symbol("onEntry"),fce=Symbol("checkFs"),qBe=Symbol("checkFs2"),KV=Symbol("pruneCache"),gce=Symbol("isReusable"),cp=Symbol("makeFs"),yce=Symbol("file"),vce=Symbol("directory"),QV=Symbol("link"),zBe=Symbol("symlink"),FBe=Symbol("hardlink"),jBe=Symbol("unsupported"),UBe=Symbol("checkPath"),yb=Symbol("mkdir"),ll=Symbol("onError"),HV=Symbol("pending"),BBe=Symbol("pend"),A0=Symbol("unpend"),mce=Symbol("ended"),hce=Symbol("maybeClose"),bce=Symbol("skip"),Rk=Symbol("doChown"),xk=Symbol("uid"),Ok=Symbol("gid"),Ak=Symbol("checkedCwd"),UGt=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,Nk=UGt==="win32",BGt=1024,GGt=(r,e)=>{if(!Nk)return Ai.default.unlink(r,e);let t=r+".DELETE."+(0,_ce.randomBytes)(16).toString("hex");Ai.default.rename(r,t,n=>{if(n)return e(n);Ai.default.unlink(t,e)})},$Gt=r=>{if(!Nk)return Ai.default.unlinkSync(r);let e=r+".DELETE."+(0,_ce.randomBytes)(16).toString("hex");Ai.default.renameSync(r,e),Ai.default.unlinkSync(e)},GBe=(r,e,t)=>r!==void 0&&r===r>>>0?r:e!==void 0&&e===e>>>0?e:t,$Be=r=>ef(Dn($V(r))).toLowerCase(),VGt=(r,e)=>{e=$Be(e);for(let t of r.keys()){let n=$Be(t);(n===e||n.indexOf(e+"/")===0)&&r.delete(t)}},HGt=r=>{for(let e of r.keys())r.delete(e)},N0=class extends Bg{[mce]=!1;[Ak]=!1;[HV]=0;reservations=new VV;transform;writable=!0;readable=!1;dirCache;uid;gid;setOwner;preserveOwner;processGid;processUid;maxDepth;forceChown;win32;newer;keep;noMtime;preservePaths;unlink;cwd;strip;processUmask;umask;dmode;fmode;chmod;constructor(e={}){if(e.ondone=()=>{this[mce]=!0,this[hce]()},super(e),this.transform=e.transform,this.dirCache=e.dirCache||new Map,this.chmod=!!e.chmod,typeof e.uid=="number"||typeof e.gid=="number"){if(typeof e.uid!="number"||typeof e.gid!="number")throw new TypeError("cannot set owner without number uid and gid");if(e.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=e.uid,this.gid=e.gid,this.setOwner=!0}else this.uid=void 0,this.gid=void 0,this.setOwner=!1;e.preserveOwner===void 0&&typeof e.uid!="number"?this.preserveOwner=!!(process.getuid&&process.getuid()===0):this.preserveOwner=!!e.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():void 0,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():void 0,this.maxDepth=typeof e.maxDepth=="number"?e.maxDepth:BGt,this.forceChown=e.forceChown===!0,this.win32=!!e.win32||Nk,this.newer=!!e.newer,this.keep=!!e.keep,this.noMtime=!!e.noMtime,this.preservePaths=!!e.preservePaths,this.unlink=!!e.unlink,this.cwd=Dn(nf.default.resolve(e.cwd||process.cwd())),this.strip=Number(e.strip)||0,this.processUmask=this.chmod?typeof e.processUmask=="number"?e.processUmask:process.umask():0,this.umask=typeof e.umask=="number"?e.umask:this.processUmask,this.dmode=e.dmode||511&~this.umask,this.fmode=e.fmode||438&~this.umask,this.on("entry",t=>this[LBe](t))}warn(e,t,n={}){return(e==="TAR_BAD_ARCHIVE"||e==="TAR_ABORT")&&(n.recoverable=!1),super.warn(e,t,n)}[hce](){this[mce]&&this[HV]===0&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"))}[UBe](e){let t=Dn(e.path),n=t.split("/");if(this.strip){if(n.length<this.strip)return!1;if(e.type==="Link"){let i=Dn(String(e.linkpath)).split("/");if(i.length>=this.strip)e.linkpath=i.slice(this.strip).join("/");else return!1}n.splice(0,this.strip),e.path=n.join("/")}if(isFinite(this.maxDepth)&&n.length>this.maxDepth)return this.warn("TAR_ENTRY_ERROR","path excessively deep",{entry:e,path:t,depth:n.length,maxDepth:this.maxDepth}),!1;if(!this.preservePaths){if(n.includes("..")||Nk&&/^[a-z]:\.\.$/i.test(n[0]??""))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:e,path:t}),!1;let[i,s]=fk(t);i&&(e.path=String(s),this.warn("TAR_ENTRY_INFO",`stripping ${i} from absolute path`,{entry:e,path:t}))}if(nf.default.isAbsolute(e.path)?e.absolute=Dn(nf.default.resolve(e.path)):e.absolute=Dn(nf.default.resolve(this.cwd,e.path)),!this.preservePaths&&typeof e.absolute=="string"&&e.absolute.indexOf(this.cwd+"/")!==0&&e.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:e,path:Dn(e.path),resolvedPath:e.absolute,cwd:this.cwd}),!1;if(e.absolute===this.cwd&&e.type!=="Directory"&&e.type!=="GNUDumpDir")return!1;if(this.win32){let{root:i}=nf.default.win32.parse(String(e.absolute));e.absolute=i+Lae(String(e.absolute).slice(i.length));let{root:s}=nf.default.win32.parse(e.path);e.path=s+Lae(e.path.slice(s.length))}return!0}[LBe](e){if(!this[UBe](e))return e.resume();switch(VBe.default.equal(typeof e.absolute,"string"),e.type){case"Directory":case"GNUDumpDir":e.mode&&(e.mode=e.mode|448);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[fce](e);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[jBe](e)}}[ll](e,t){e.name==="CwdError"?this.emit("error",e):(this.warn("TAR_ENTRY_ERROR",e,{entry:t}),this[A0](),t.resume())}[yb](e,t,n){DBe(Dn(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:t},n)}[Rk](e){return this.forceChown||this.preserveOwner&&(typeof e.uid=="number"&&e.uid!==this.processUid||typeof e.gid=="number"&&e.gid!==this.processGid)||typeof this.uid=="number"&&this.uid!==this.processUid||typeof this.gid=="number"&&this.gid!==this.processGid}[xk](e){return GBe(this.uid,e.uid,this.processUid)}[Ok](e){return GBe(this.gid,e.gid,this.processGid)}[yce](e,t){let n=typeof e.mode=="number"?e.mode&4095:this.fmode,i=new qg(String(e.absolute),{flags:ece(e.size),mode:n,autoClose:!1});i.on("error",c=>{i.fd&&Ai.default.close(i.fd,()=>{}),i.write=()=>!0,this[ll](c,e),t()});let s=1,o=c=>{if(c){i.fd&&Ai.default.close(i.fd,()=>{}),this[ll](c,e),t();return}--s===0&&i.fd!==void 0&&Ai.default.close(i.fd,l=>{l?this[ll](l,e):this[A0](),t()})};i.on("finish",()=>{let c=String(e.absolute),l=i.fd;if(typeof l=="number"&&e.mtime&&!this.noMtime){s++;let u=e.atime||new Date,d=e.mtime;Ai.default.futimes(l,u,d,p=>p?Ai.default.utimes(c,u,d,m=>o(m&&p)):o())}if(typeof l=="number"&&this[Rk](e)){s++;let u=this[xk](e),d=this[Ok](e);typeof u=="number"&&typeof d=="number"&&Ai.default.fchown(l,u,d,p=>p?Ai.default.chown(c,u,d,m=>o(m&&p)):o())}o()});let a=this.transform&&this.transform(e)||e;a!==e&&(a.on("error",c=>{this[ll](c,e),t()}),e.pipe(a)),a.pipe(i)}[vce](e,t){let n=typeof e.mode=="number"?e.mode&4095:this.dmode;this[yb](String(e.absolute),n,i=>{if(i){this[ll](i,e),t();return}let s=1,o=()=>{--s===0&&(t(),this[A0](),e.resume())};e.mtime&&!this.noMtime&&(s++,Ai.default.utimes(String(e.absolute),e.atime||new Date,e.mtime,o)),this[Rk](e)&&(s++,Ai.default.chown(String(e.absolute),Number(this[xk](e)),Number(this[Ok](e)),o)),o()})}[jBe](e){e.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${e.type}`,{entry:e}),e.resume()}[zBe](e,t){this[QV](e,String(e.linkpath),"symlink",t)}[FBe](e,t){let n=Dn(nf.default.resolve(this.cwd,String(e.linkpath)));this[QV](e,n,"link",t)}[BBe](){this[HV]++}[A0](){this[HV]--,this[hce]()}[bce](e){this[A0](),e.resume()}[gce](e,t){return e.type==="File"&&!this.unlink&&t.isFile()&&t.nlink<=1&&!Nk}[fce](e){this[BBe]();let t=[e.path];e.linkpath&&t.push(e.linkpath),this.reservations.reserve(t,n=>this[qBe](e,n))}[KV](e){e.type==="SymbolicLink"?HGt(this.dirCache):e.type!=="Directory"&&VGt(this.dirCache,String(e.absolute))}[qBe](e,t){this[KV](e);let n=a=>{this[KV](e),t(a)},i=()=>{this[yb](this.cwd,this.dmode,a=>{if(a){this[ll](a,e),n();return}this[Ak]=!0,s()})},s=()=>{if(e.absolute!==this.cwd){let a=Dn(nf.default.dirname(String(e.absolute)));if(a!==this.cwd)return this[yb](a,this.dmode,c=>{if(c){this[ll](c,e),n();return}o()})}o()},o=()=>{Ai.default.lstat(String(e.absolute),(a,c)=>{if(c&&(this.keep||this.newer&&c.mtime>(e.mtime??c.mtime))){this[bce](e),n();return}if(a||this[gce](e,c))return this[cp](null,e,n);if(c.isDirectory()){if(e.type==="Directory"){let l=this.chmod&&e.mode&&(c.mode&4095)!==e.mode,u=d=>this[cp](d??null,e,n);return l?Ai.default.chmod(String(e.absolute),Number(e.mode),u):u()}if(e.absolute!==this.cwd)return Ai.default.rmdir(String(e.absolute),l=>this[cp](l??null,e,n))}if(e.absolute===this.cwd)return this[cp](null,e,n);GGt(String(e.absolute),l=>this[cp](l??null,e,n))})};this[Ak]?s():i()}[cp](e,t,n){if(e){this[ll](e,t),n();return}switch(t.type){case"File":case"OldFile":case"ContiguousFile":return this[yce](t,n);case"Link":return this[FBe](t,n);case"SymbolicLink":return this[zBe](t,n);case"Directory":case"GNUDumpDir":return this[vce](t,n)}}[QV](e,t,n,i){Ai.default[n](t,String(e.absolute),s=>{s?this[ll](s,e):(this[A0](),e.resume()),i()})}},WV=r=>{try{return[null,r()]}catch(e){return[e,null]}},Dk=class extends N0{sync=!0;[cp](e,t){return super[cp](e,t,()=>{})}[fce](e){if(this[KV](e),!this[Ak]){let s=this[yb](this.cwd,this.dmode);if(s)return this[ll](s,e);this[Ak]=!0}if(e.absolute!==this.cwd){let s=Dn(nf.default.dirname(String(e.absolute)));if(s!==this.cwd){let o=this[yb](s,this.dmode);if(o)return this[ll](o,e)}}let[t,n]=WV(()=>Ai.default.lstatSync(String(e.absolute)));if(n&&(this.keep||this.newer&&n.mtime>(e.mtime??n.mtime)))return this[bce](e);if(t||this[gce](e,n))return this[cp](null,e);if(n.isDirectory()){if(e.type==="Directory"){let o=this.chmod&&e.mode&&(n.mode&4095)!==e.mode,[a]=o?WV(()=>{Ai.default.chmodSync(String(e.absolute),Number(e.mode))}):[];return this[cp](a,e)}let[s]=WV(()=>Ai.default.rmdirSync(String(e.absolute)));this[cp](s,e)}let[i]=e.absolute===this.cwd?[]:WV(()=>$Gt(String(e.absolute)));this[cp](i,e)}[yce](e,t){let n=typeof e.mode=="number"?e.mode&4095:this.fmode,i=a=>{let c;try{Ai.default.closeSync(s)}catch(l){c=l}(a||c)&&this[ll](a||c,e),t()},s;try{s=Ai.default.openSync(String(e.absolute),ece(e.size),n)}catch(a){return i(a)}let o=this.transform&&this.transform(e)||e;o!==e&&(o.on("error",a=>this[ll](a,e)),e.pipe(o)),o.on("data",a=>{try{Ai.default.writeSync(s,a,0,a.length)}catch(c){i(c)}}),o.on("end",()=>{let a=null;if(e.mtime&&!this.noMtime){let c=e.atime||new Date,l=e.mtime;try{Ai.default.futimesSync(s,c,l)}catch(u){try{Ai.default.utimesSync(String(e.absolute),c,l)}catch{a=u}}}if(this[Rk](e)){let c=this[xk](e),l=this[Ok](e);try{Ai.default.fchownSync(s,Number(c),Number(l))}catch(u){try{Ai.default.chownSync(String(e.absolute),Number(c),Number(l))}catch{a=a||u}}}i(a)})}[vce](e,t){let n=typeof e.mode=="number"?e.mode&4095:this.dmode,i=this[yb](String(e.absolute),n);if(i){this[ll](i,e),t();return}if(e.mtime&&!this.noMtime)try{Ai.default.utimesSync(String(e.absolute),e.atime||new Date,e.mtime)}catch{}if(this[Rk](e))try{Ai.default.chownSync(String(e.absolute),Number(this[xk](e)),Number(this[Ok](e)))}catch{}t(),e.resume()}[yb](e,t){try{return kBe(Dn(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:t})}catch(n){return n}}[QV](e,t,n,i){let s=`${n}Sync`;try{Ai.default[s](t,String(e.absolute)),i(),e.resume()}catch(o){return this[ll](o,e)}}};var WGt=r=>{let e=new Dk(r),t=r.file,n=Sce.default.statSync(t),i=r.maxReadSize||16*1024*1024;new aV(t,{readSize:i,size:n.size}).pipe(e)},KGt=(r,e)=>{let t=new N0(r),n=r.maxReadSize||16*1024*1024,i=r.file;return new Promise((o,a)=>{t.on("error",a),t.on("close",o),Sce.default.stat(i,(c,l)=>{if(c)a(c);else{let u=new IC(i,{readSize:n,size:l.size});u.on("error",a),u.pipe(t)}})})},Cce=Jh(WGt,KGt,r=>new Dk(r),r=>new N0(r),(r,e)=>{e?.length&&Dae(r,e)});var vu=ge(require("node:fs"),1),Pce=ge(require("node:path"),1);var QGt=(r,e)=>{let t=new FC(r),n=!0,i,s;try{try{i=vu.default.openSync(r.file,"r+")}catch(c){if(c?.code==="ENOENT")i=vu.default.openSync(r.file,"w+");else throw c}let o=vu.default.fstatSync(i),a=Buffer.alloc(512);e:for(s=0;s<o.size;s+=512){for(let u=0,d=0;u<512;u+=d){if(d=vu.default.readSync(i,a,u,a.length-u,s+u),s===0&&a[0]===31&&a[1]===139)throw new Error("cannot append to compressed archives");if(!d)break e}let c=new od(a);if(!c.cksumValid)break;let l=512*Math.ceil((c.size||0)/512);if(s+l+512>o.size)break;s+=l,r.mtimeCache&&c.mtime&&r.mtimeCache.set(String(c.path),c.mtime)}n=!1,YGt(r,t,s,i,e)}finally{if(n)try{vu.default.closeSync(i)}catch{}}},YGt=(r,e,t,n,i)=>{let s=new P0(r.file,{fd:n,start:t});e.pipe(s),JGt(e,i)},XGt=(r,e)=>{e=Array.from(e);let t=new fb(r),n=(s,o,a)=>{let c=(m,f)=>{m?vu.default.close(s,y=>a(m)):a(null,f)},l=0;if(o===0)return c(null,0);let u=0,d=Buffer.alloc(512),p=(m,f)=>{if(m||typeof f>"u")return c(m);if(u+=f,u<512&&f)return vu.default.read(s,d,u,d.length-u,l+u,p);if(l===0&&d[0]===31&&d[1]===139)return c(new Error("cannot append to compressed archives"));if(u<512)return c(null,l);let y=new od(d);if(!y.cksumValid)return c(null,l);let v=512*Math.ceil((y.size??0)/512);if(l+v+512>o||(l+=v+512,l>=o))return c(null,l);r.mtimeCache&&y.mtime&&r.mtimeCache.set(String(y.path),y.mtime),u=0,vu.default.read(s,d,0,512,l,p)};vu.default.read(s,d,0,512,l,p)};return new Promise((s,o)=>{t.on("error",o);let a="r+",c=(l,u)=>{if(l&&l.code==="ENOENT"&&a==="r+")return a="w+",vu.default.open(r.file,a,c);if(l||!u)return o(l);vu.default.fstat(u,(d,p)=>{if(d)return vu.default.close(u,()=>o(d));n(u,p.size,(m,f)=>{if(m)return o(m);let y=new qg(r.file,{fd:u,start:f});t.pipe(y),y.on("error",o),y.on("close",s),ZGt(t,e)})})};vu.default.open(r.file,a,c)})},JGt=(r,e)=>{e.forEach(t=>{t.charAt(0)==="@"?qC({file:Pce.default.resolve(r.cwd,t.slice(1)),sync:!0,noResume:!0,onReadEntry:n=>r.add(n)}):r.add(t)}),r.end()},ZGt=async(r,e)=>{for(let t=0;t<e.length;t++){let n=String(e[t]);n.charAt(0)==="@"?await qC({file:Pce.default.resolve(String(r.cwd),n.slice(1)),noResume:!0,onReadEntry:i=>r.add(i)}):r.add(n)}r.end()},jC=Jh(QGt,XGt,()=>{throw new TypeError("file is required")},()=>{throw new TypeError("file is required")},(r,e)=>{if(!XUe(r))throw new TypeError("file is required");if(r.gzip||r.brotli||r.file.endsWith(".br")||r.file.endsWith(".tbr"))throw new TypeError("cannot append to compressed archives");if(!e?.length)throw new TypeError("no paths specified to add/replace")});var e2t=Jh(jC.syncFile,jC.asyncFile,jC.syncNoFile,jC.asyncNoFile,(r,e=[])=>{jC.validate?.(r,e),t2t(r)}),t2t=r=>{let e=r.filter;r.mtimeCache||(r.mtimeCache=new Map),r.filter=e?(t,n)=>e(t,n)&&!((r.mtimeCache?.get(t)??n.mtime??0)>(n.mtime??0)):(t,n)=>!((r.mtimeCache?.get(t)??n.mtime??0)>(n.mtime??0))};var dGe=ge(uGe()),zk=ge(require("fs")),Fk=ge(require("path")),jk=class{decompressZip(e,t){return new Promise((n,i)=>{dGe.open(e.tmpFile.name,{lazyEntries:!0},(s,o)=>{if(s){t.appendLine(`[ERROR] ${s}`),i(s);return}o.readEntry(),o.on("entry",a=>{if(/\/$/.test(a.fileName)){let c=Fk.join(e.installPath,a.fileName);zk.mkdir(c,{recursive:!0},l=>{if(l){t.appendLine(`[ERROR] Failed to create directory ${c}: ${l}`),i(l);return}o.readEntry()})}else{let c=Fk.join(e.installPath,a.fileName),l=Fk.dirname(c);zk.mkdir(l,{recursive:!0},u=>{if(u){t.appendLine(`[ERROR] Failed to create directory ${l}: ${u}`),i(u);return}o.openReadStream(a,(d,p)=>{if(d){t.appendLine(`[ERROR] ${d}`),i(d);return}let m=zk.createWriteStream(c);m.on("error",f=>{t.appendLine(`[ERROR] Failed to write ${c}: ${f}`),i(f)}),m.on("close",()=>{t.appendLine(`Extracted: ${a.fileName}`),o.readEntry()}),p.on("error",f=>{t.appendLine(`[ERROR] Read error for ${a.fileName}: ${f}`),i(f)}),p.pipe(m)})})}}),o.on("end",()=>{t.appendLine(`Done! Files unpacked.
`),n()}),o.on("error",a=>{t.appendLine(`[ERROR] Zipfile error: ${a}`),i(a)})})})}decompressTar(e,t){let n=0;return Cce({file:e.tmpFile.name,cwd:e.installPath,onentry:()=>{n++},onwarn:i=>{t.appendLine(`[ERROR] ${i}`)}},()=>{t.appendLine(`Done! ${n} files unpacked.
`)})}decompress(e,t){return e.isZipFile?this.decompressZip(e,t):this.decompressTar(e,t)}};var pGe=ge(require("fs")),mGe=ge(require("http")),hGe=ge(require("https")),fGe=require("url");var Uk=class{downloadFile(e,t,n,i){let s=(0,fGe.parse)(e),o=this.getHttpClientOptions(s),a=s.protocol==="http:"?mGe.request:hGe.request;return new Promise((c,l)=>{if(!t.tmpFile||t.tmpFile.fd===0)return l(new Ng("Temporary package file unavailable",t));let u=a(o,d=>{if(d.statusCode===301||d.statusCode===302)return c(this.downloadFile(d.headers.location,t,n,i));if(d.statusCode!==200)return n.appendLine(`failed (error code '${d.statusCode}')`),l(new Ng(d.statusCode.toString(),t));this.handleSuccessfulResponse(t,d,n,i).then(p=>{c()}).catch(p=>{l(p)})});u.on("error",d=>{l(new Ng(`Request error: ${d.code||"NONE"}`,t,d))}),u.end()})}getHttpClientOptions(e){let t={host:e.hostname,path:e.path,agent:void 0};return e.protocol==="https:"&&(t={host:e.hostname,path:e.path,agent:void 0,rejectUnauthorized:!0}),t}handleDataReceivedEvent(e,t,n,i){if(e.downloadedBytes+=t.length,e.packageSize>0){let s=Math.ceil(100*(e.downloadedBytes/e.packageSize));s!==e.downloadPercentage&&(i.updateServiceDownloadingProgress(e.downloadPercentage),e.downloadPercentage=s);let o=Math.ceil(e.downloadPercentage/5);o>e.dots&&(n.append(".".repeat(o-e.dots)),e.dots=o)}}handleSuccessfulResponse(e,t,n,i){return new Promise((s,o)=>{let a={packageSize:parseInt(t.headers["content-length"],10),dots:0,downloadedBytes:0,downloadPercentage:0};n.append(`(${Math.ceil(a.packageSize/1024)} KB) `),t.on("data",l=>{this.handleDataReceivedEvent(a,l,n,i)});let c=pGe.createWriteStream("",{fd:e.tmpFile.fd});t.on("end",()=>{s()}),t.on("error",l=>{o(new Ng(`Response error: ${l.code||"NONE"}`,e,l))}),t.pipe(c,{end:!1})})}};var gGe={service:{downloadUrl:"https://github.com/Microsoft/sqltoolsservice/releases/download/{#version#}/microsoft.sqltools.servicelayer-{#fileName#}",version:"5.0.20250828.1",downloadFileNames:{Windows_86:"win-x86-net8.0.zip",Windows_64:"win-x64-net8.0.zip",Windows_ARM64:"win-arm64-net8.0.zip",OSX_10_11_64:"osx-x64-net8.0.tar.gz",OSX_ARM64:"osx-arm64-net8.0.tar.gz",CentOS_7:"linux-x64-net8.0.tar.gz",Debian_8:"linux-x64-net8.0.tar.gz",Fedora_23:"linux-x64-net8.0.tar.gz",OpenSUSE_13_2:"linux-x64-net8.0.tar.gz",SLES_12_2:"linux-x64-net8.0.tar.gz",RHEL_7:"linux-x64-net8.0.tar.gz",Ubuntu_14:"linux-x64-net8.0.tar.gz",Ubuntu_16:"linux-x64-net8.0.tar.gz",Linux_ARM64:"linux-arm64-net8.0.tar.gz"},installDir:"./sqltoolsservice/{#version#}/{#platform#}",executableFiles:["MicrosoftSqlToolsServiceLayer.exe","MicrosoftSqlToolsServiceLayer","MicrosoftSqlToolsServiceLayer.dll"]}};var Bk=class{_configJsonContent=void 0;_sqlToolsServiceConfigKey;_version;get configJsonContent(){return this._configJsonContent===void 0&&(this._configJsonContent=gGe),this._configJsonContent}constructor(){this._sqlToolsServiceConfigKey=mM,this._version=2}getSqlToolsServiceDownloadUrl(){return this.getSqlToolsConfigValue(n2)}getSqlToolsInstallDirectory(){return this.getSqlToolsConfigValue(e2)}getSqlToolsExecutableFiles(){return this.getSqlToolsConfigValue(t2)}getSqlToolsPackageVersion(){return this.getSqlToolsConfigValue(r2)}useServiceVersion(e){switch(e){case 1:this._sqlToolsServiceConfigKey=Eqe;break;default:this._sqlToolsServiceConfigKey=mM}this._version=e}getServiceVersion(){return this._version}getSqlToolsConfigValue(e){let n=this.configJsonContent[this._sqlToolsServiceConfigKey],i;return n!==void 0&&(i=n[e]),i}getExtensionConfig(e,t){let s=this.configJsonContent[fi][e];return s||(s=t),s}getWorkspaceConfig(e,t){let i=this.configJsonContent[e];return i||(i=t),i}};var Dce=require("vscode");var Gk=class{constructor(e,t,n){this._config=e;this._extensionConfig=t;this._workspaceConfig=n;this._config===void 0&&(this._config=new Bk),this._extensionConfig===void 0&&(this._extensionConfig=Dce.workspace.getConfiguration(fi)),this._workspaceConfig===void 0&&(this._workspaceConfig=Dce.workspace.getConfiguration())}getSqlToolsServiceDownloadUrl(){return this.getSqlToolsConfigValue(n2)}getSqlToolsInstallDirectory(){return this.getSqlToolsConfigValue(e2)}getSqlToolsExecutableFiles(){return this.getSqlToolsConfigValue(t2)}getSqlToolsPackageVersion(){return this.getSqlToolsConfigValue(r2)}useServiceVersion(e){return this._config.useServiceVersion(e)}getServiceVersion(){return this._config.getServiceVersion()}getSqlToolsConfigValue(e){let t=this.getExtensionConfig(`${mM}.${e}`);return t||(t=this._config.getSqlToolsConfigValue(e)),t}getExtensionConfig(e,t){let n=this._extensionConfig.get(e);return n===void 0&&(n=t),n}getWorkspaceConfig(e,t){let n=this._workspaceConfig.get(e);return n===void 0&&(n=t),n}};var UC=ge(require("vscode"));var $k=class r{constructor(e=!1,t=!1,n=void 0){this.installedBeforeInitializing=e;this.isRunning=t;this.serverPath=n}clone(){return new r(this.installedBeforeInitializing,this.isRunning,this.serverPath)}withRunning(e){return new r(this.installedBeforeInitializing,e,this.serverPath)}},oH=class{_numberOfSecondsBeforeHidingMessage=5e3;_statusBarItem=void 0;_onDidChangeActiveTextEditorEvent;_onDidCloseTextDocument;constructor(){this._statusBarItem=UC.window.createStatusBarItem(UC.StatusBarAlignment.Right),this._onDidChangeActiveTextEditorEvent=UC.window.onDidChangeActiveTextEditor(e=>this.onDidChangeActiveTextEditor(e)),this._onDidCloseTextDocument=UC.workspace.onDidCloseTextDocument(e=>this.onDidCloseTextDocument(e))}installingService(){this._statusBarItem.command=void 0,this._statusBarItem.show(),this.showProgress("$(desktop-download) "+gqe)}updateServiceDownloadingProgress(e){this._statusBarItem.text=`$(cloud-download) ${a2} ... ${e}%`,this._statusBarItem.show()}serviceInstalled(){this._statusBarItem.command=void 0,this._statusBarItem.text=pse,this._statusBarItem.show(),setTimeout(()=>{this._statusBarItem.hide()},this._numberOfSecondsBeforeHidingMessage)}serviceInstallationFailed(){this._statusBarItem.command=void 0,this._statusBarItem.text=yqe,this._statusBarItem.show()}showProgress(e){let t=0,n=["|","/","-","\\"];setInterval(()=>{t++,t>3&&(t=0);let i=n[t];this._statusBarItem.text!==pse&&(this._statusBarItem.text=e+" "+i,this._statusBarItem.show())},200)}dispose(){this.destroyStatusBar(),this._onDidChangeActiveTextEditorEvent.dispose(),this._onDidCloseTextDocument.dispose()}hideLastShownStatusBar(){typeof this._statusBarItem<"u"&&this._statusBarItem.hide()}onDidChangeActiveTextEditor(e){this.hideLastShownStatusBar()}onDidCloseTextDocument(e){this.destroyStatusBar()}destroyStatusBar(){typeof this._statusBarItem<"u"&&this._statusBarItem.dispose()}get statusBarItem(){return this._statusBarItem}};var Oa=ge(require("vscode"));var h2t={displayName:"publicCloudDisplayName",id:"azure_publicCloud",clientId:"a69788c6-1d43-44ed-9ca3-b83e194da255",loginEndpoint:"https://login.microsoftonline.com/",portalEndpoint:"https://portal.azure.com",redirectUri:"http://localhost",resources:{windowsManagementResource:{id:"marm",resource:"MicrosoftResourceManagement",endpoint:"https://management.core.windows.net/"},azureManagementResource:{id:"arm",resource:"AzureResourceManagement",endpoint:"https://management.azure.com/"},databaseResource:{id:"sql",resource:"Sql",endpoint:"https://database.windows.net/",dnsSuffix:"database.windows.net",analyticsDnsSuffix:"sql.azuresynapse.net"},azureKeyVaultResource:{id:"vault",resource:"AzureKeyVault",endpoint:"https://vault.azure.net/"}},fabric:{sqlDbDnsSuffix:"database.fabric.microsoft.com",dataWarehouseSuffix:"datawarehouse.fabric.microsoft.com"},scopes:["openid","email","profile","offline_access","https://management.azure.com/user_impersonation"]},f2t=h2t,hs=f2t;function vGe(r){return r.server||(r.server=""),r.database||(r.database=""),r.user||(r.user=""),r.password||(r.password=""),r.connectTimeout||(r.connectTimeout=15),r.commandTimeout||(r.commandTimeout=30),r.applicationName||(r.applicationName=Zke),r.encrypt===void 0||r.encrypt===""||r.encrypt===!0?r.encrypt="Mandatory":r.encrypt===!1&&(r.encrypt="Optional"),b2t(r.server)&&(r.encrypt==="Optional"&&(r.encrypt="Mandatory"),r.connectTimeout<30&&(r.connectTimeout=30)),r}function bGe(r){let e=!0,t=Object.assign({},r);return r.encrypt===!0?t.encrypt="Mandatory":r.encrypt===!1?t.encrypt="Optional":e=!1,{connection:t,updateStatus:e}}function b2t(r){return r?r.endsWith(WLe):!1}function _Ge(r){let e=r;return e.profileName?e.profileName:r.server?r.server:r.connectionString}function SGe(r){return`[${Mce(r)}]`}function Mce(r,e){let t=kce(r),n=Lce(r),i=_2t(r),s=i?`${t} : ${n} : ${i}`:`${t} : ${n}`;return e&&(e===0?s="":e>0&&s.length>e&&(s=s.slice(0,e)+" \u2026")),s}function kce(r){return r.server}function Lce(r,e=!0){let t=r.database||Jd;return e?`$(database) ${t}`:t}function _2t(r,e){return e||(e=""),r.authenticationType===Zd[1]?process.platform==="win32"?process.env.USERDOMAIN+"\\"+process.env.USERNAME:"":r.user?r.user:e}function qce(r,e){let t=r.connectionString?"Connection string: "+r.connectionString+`\r
`:"Server: "+r.server+`\r
Database: `+(r.database?r.database:"<connection default>")+`\r
`+(r.authenticationType!==zG?"User: "+r.user+`\r
`:"")+"Encryption Mode: "+S2t(r.encrypt)+`\r
`;return e&&e.serverVersion&&(t+="Server version: "+e.serverVersion+`\r
`),t}function S2t(r){let e="Mandatory";if(r!==void 0)switch(r.toString().toLowerCase()){case"true":case"Mandatory".toLowerCase():e="Mandatory";break;case"false":case"Optional".toLowerCase():e="Optional";break;case"Strict".toLowerCase():e="Strict";break;default:break}return e}function bu(r){let e=r;if(e.profileName)return e.profileName;{let t=r.database,n=r.server,i=r.authenticationType,s=i;return i===Ya&&(s=r.user),i===Qa&&(s=r.email),(!t||t==="")&&(t=Jd),`${n}, ${t} (${s})`}}function Vk(r){return r?.server===void 0?["Unknown"]:r.server.includes(hs.resources.databaseResource.dnsSuffix)?["Azure","SQL"]:r.server.includes(hs.resources.databaseResource.analyticsDnsSuffix)?["Azure","DataWarehouse"]:r.server.includes(hs.fabric.sqlDbDnsSuffix)?["Fabric","SQL"]:r.server.includes(hs.fabric.dataWarehouseSuffix)?["Fabric","DataWarehouse"]:r.server.endsWith("localhost")||r.server.includes("localhost,")||r.server==="."||r.server.includes(".,")?["Local","SQL"]:["Other"]}var zce=class{statusLanguageFlavor;statusConnection;statusQuery;statusLanguageService;progressTimerId;sqlCmdMode;rowCount;executionTime;currentLanguageServiceStatus;queryTimer;connectionId},BC=class{constructor(e){this._vscodeWrapper=e;this._vscodeWrapper||(this._vscodeWrapper=new gi),this._statusBars={},this._onDidChangeActiveTextEditorEvent=this._vscodeWrapper.onDidChangeActiveTextEditor(t=>this.onDidChangeActiveTextEditor(t)),this._onDidCloseTextDocumentEvent=this._vscodeWrapper.onDidCloseTextDocument(t=>this.onDidCloseTextDocument(t))}_statusBars;_lastShownStatusBar;_onDidChangeActiveTextEditorEvent;_onDidCloseTextDocumentEvent;_connectionStore;dispose(){for(let e in this._statusBars)this._statusBars.hasOwnProperty(e)&&(this._statusBars[e].statusLanguageFlavor.dispose(),this._statusBars[e].statusConnection.dispose(),this._statusBars[e].statusQuery.dispose(),this._statusBars[e].statusLanguageService.dispose(),this._statusBars[e].sqlCmdMode.dispose(),this._statusBars[e].rowCount.dispose(),this._statusBars[e].executionTime.dispose(),clearInterval(this._statusBars[e].progressTimerId),clearInterval(this._statusBars[e].queryTimer),delete this._statusBars[e]);this._onDidChangeActiveTextEditorEvent.dispose(),this._onDidCloseTextDocumentEvent.dispose()}setConnectionStore(e){this._connectionStore=e}createStatusBar(e){let t=new zce;t.statusLanguageFlavor=Oa.window.createStatusBarItem(Oa.StatusBarAlignment.Right,90),t.statusConnection=Oa.window.createStatusBarItem(Oa.StatusBarAlignment.Right),t.statusQuery=Oa.window.createStatusBarItem(Oa.StatusBarAlignment.Right),t.statusQuery.accessibilityInformation={role:"alert",label:""},t.statusLanguageService=Oa.window.createStatusBarItem(Oa.StatusBarAlignment.Right),t.sqlCmdMode=Oa.window.createStatusBarItem(Oa.StatusBarAlignment.Right,90),t.rowCount=Oa.window.createStatusBarItem(Oa.StatusBarAlignment.Right,80),t.executionTime=Oa.window.createStatusBarItem(Oa.StatusBarAlignment.Right,70),this._statusBars[e]=t}destroyStatusBar(e){let t=this._statusBars[e];t&&(t.statusLanguageFlavor&&t.statusLanguageFlavor.dispose(),t.statusConnection&&t.statusConnection.dispose(),t.statusQuery&&t.statusQuery.dispose(),t.statusLanguageService&&t.statusLanguageService.dispose(),t.progressTimerId&&clearInterval(t.progressTimerId),t.queryTimer&&clearInterval(t.queryTimer),t.sqlCmdMode&&t.sqlCmdMode.dispose(),t.rowCount&&t.rowCount.dispose(),t.executionTime&&t.executionTime.dispose(),delete this._statusBars[e])}getStatusBar(e){e in this._statusBars||this.createStatusBar(e);let t=this._statusBars[e];return t.progressTimerId&&clearInterval(t.progressTimerId),t}show(e){let t=this.getStatusBar(e);this.showStatusBarItem(e,t.statusLanguageFlavor),this.showStatusBarItem(e,t.statusConnection),this.showStatusBarItem(e,t.statusQuery),this.showStatusBarItem(e,t.statusLanguageService),this.showStatusBarItem(e,t.sqlCmdMode),this.showStatusBarItem(e,t.rowCount)}notConnected(e){let t=this.getStatusBar(e);t.statusConnection.text=`$(plug) ${gg.disconnectedLabel}`,t.statusConnection.tooltip=gg.notConnectedTooltip,t.statusConnection.command=Fv,t.statusConnection.color=void 0,t.connectionId=void 0,this.showStatusBarItem(e,t.statusConnection),t.statusLanguageService.text="",this.showStatusBarItem(e,t.statusLanguageService),this.showStatusBarItem(e,t.statusLanguageFlavor)}connecting(e,t){let n=this.getStatusBar(e);n.statusConnection.text=`$(loading~spin) ${gg.connectingLabel}`,n.statusConnection.command=rM,n.statusConnection.color=void 0,n.statusConnection.tooltip=yMe+qce(t),n.connectionId=t.id||void 0,this.showStatusBarItem(e,n.statusConnection)}async connectSuccess(e,t,n){let i=this.getStatusBar(e);i.statusConnection.command=lC;let s=Oa.workspace.getConfiguration(fi).get(mqe);i.statusConnection.text=`$(check) ${Mce(t,s)}`,i.statusConnection.tooltip=qce(t,n),i.connectionId=t.id||void 0,i.statusConnection.color=await this.getConnectionColor(i.connectionId),this.showStatusBarItem(e,i.statusConnection),this.sqlCmdModeChanged(e,!1)}async updateConnectionColors(){for(let e of Object.keys(this._statusBars)){let t=this._statusBars[e];t.statusConnection.color=await this.getConnectionColor(t.connectionId)}}async getConnectionColor(e){if(!(!this._connectionStore||!e||this._vscodeWrapper.getConfiguration().get(o2)!==!0))return(await this._connectionStore.getGroupForConnectionId(e))?.color}connectError(e,t,n){let i=this.getStatusBar(e);i.statusConnection.command=Fv,i.statusConnection.text=`$(error) ${gg.connectErrorLabel}`,n.errorNumber&&n.errorMessage&&!oi(n.errorMessage)?i.statusConnection.tooltip=YD+t.server+`
`+vMe+n.errorNumber+`
`+fie+n.errorMessage:i.statusConnection.tooltip=YD+t.server+`
`+fie+n.messages,this.showStatusBarItem(e,i.statusConnection)}executingQuery(e){let t=this.getStatusBar(e);t.statusQuery.command=void 0,t.statusQuery.text=Eie,this.showStatusBarItem(e,t.statusQuery),this.showProgress(e,Eie,t.statusQuery)}executedQuery(e){let t=this.getStatusBar(e);t.statusQuery.text=lke,setTimeout(()=>{t.statusQuery.hide()},200)}setExecutionTime(e,t){let n=this.getStatusBar(e);n.executionTime.text=t,this.showStatusBarItem(e,n.executionTime),clearInterval(n.queryTimer)}cancelingQuery(e){let t=this.getStatusBar(e);t.statusQuery.hide(),t.statusQuery.command=void 0,t.statusQuery.text=gie,this.showStatusBarItem(e,t.statusQuery),this.showProgress(e,gie,t.statusQuery),clearInterval(t.queryTimer)}languageServiceStatusChanged(e,t){let n=this.getStatusBar(e);n.currentLanguageServiceStatus=t,this.updateStatusMessage(t,()=>n.currentLanguageServiceStatus,i=>{n.statusLanguageService.text=i,this.showStatusBarItem(e,n.statusLanguageService)})}languageFlavorChanged(e,t){let n=this.getStatusBar(e);n.statusLanguageFlavor.text=t,n.statusLanguageFlavor.command=nM,this.showStatusBarItem(e,n.statusLanguageFlavor)}sqlCmdModeChanged(e,t=!1){let n=this.getStatusBar(e);n.sqlCmdMode.text=t?"SQLCMD: On":"SQLCMD: Off",n.sqlCmdMode.command=sM,this.showStatusBarItem(e,n.sqlCmdMode)}showRowCount(e,t){let n=this.getStatusBar(e);t&&t.includes("row")&&(n.rowCount.text=t.replace("(","").replace(")","")),this.showStatusBarItem(e,n.rowCount)}hideRowCount(e,t=!1){let n=this.getStatusBar(e);t&&(n.rowCount.text=""),n.rowCount.hide()}updateStatusMessage(e,t,n){switch(e){case tke:setTimeout(()=>{t()!==Pie&&n(eke)},500);break;case Pie:n("");break;case xT:n(bMe);break;case wG:n("");break;default:Tg(`Language service status changed. ${e}`);break}}associateWithExisting(e,t){let n=this.getStatusBar(e);return n?(this._statusBars[t]=n,!0):!1}hideLastShownStatusBar(){typeof this._lastShownStatusBar<"u"&&(this._lastShownStatusBar.statusLanguageFlavor.hide(),this._lastShownStatusBar.statusConnection.hide(),this._lastShownStatusBar.statusQuery.hide(),this._lastShownStatusBar.statusLanguageService.hide(),this._lastShownStatusBar.sqlCmdMode.hide(),this._lastShownStatusBar.rowCount.hide(),this._lastShownStatusBar.executionTime.hide())}onDidChangeActiveTextEditor(e){if(typeof e<"u"){this.hideLastShownStatusBar();let t=e.document.uri.toString(!0),n=this._statusBars[t];n&&(this.showStatusBarItem(t,n.statusLanguageFlavor),this.showStatusBarItem(t,n.statusConnection),this.showStatusBarItem(t,n.statusLanguageService),this.showStatusBarItem(t,n.sqlCmdMode),this.showStatusBarItem(t,n.rowCount),this.showStatusBarItem(t,n.executionTime))}}onDidCloseTextDocument(e){this.destroyStatusBar(e.uri.toString(!0))}showStatusBarItem(e,t){let n=k1e();e===n&&!oi(t.text)?(t.show(),e in this._statusBars&&(this._lastShownStatusBar=this._statusBars[e])):t.hide()}showProgress(e,t,n){if(Oa.workspace.getConfiguration("editor").get("accessibilitySupport")==="on")return;let s=this,o=this.getStatusBar(e);clearInterval(o.queryTimer);let a=0;o.queryTimer=setInterval(()=>{a+=1e3;let c=s.formatMillisecondsToTimeString(a);n.text=t+" "+c,s.showStatusBarItem(e,n)},1e3)}formatMillisecondsToTimeString(e){let t=Math.floor(e/6e4),n=(e%6e4/1e3).toFixed(0);return t+":"+(parseInt(n)<10?"0":"")+n}};var _b=ge(Vi()),Fce;(e=>e.type=new _b.NotificationType("textDocument/intelliSenseReady"))(Fce||={});var jce;(e=>e.type=new _b.NotificationType("textDocument/rebuildIntelliSense"))(jce||={});var Uce;(e=>e.type=new _b.NotificationType("textDocument/statusChanged"))(Uce||={});var Bce;(e=>e.type=new _b.NotificationType("textDocument/nonTSqlFileDetected"))(Bce||={});var k0;(e=>e.type=new _b.NotificationType("connection/languageflavorchanged"))(k0||={});var Gce;(e=>e.type=new _b.RequestType("completion/extLoad"))(Gce||={});var PGe=require("fs"),L0=ge(require("vscode"));async function Hk(r,e){if(e){let t=L0.Uri.joinPath(e,r);try{return await L0.workspace.fs.stat(t),!0}catch{return!1}}else try{return await PGe.promises.access(r),!0}catch{return!1}}async function lH(r,e,t){let n,i=1;if(await Hk(`${e}.${t}`,r)){for(;await Hk(`${e}${i}.${t}`,r);)i+=1;n=L0.Uri.joinPath(r,`${e}${i}.${t}`)}else n=L0.Uri.joinPath(r,`${e}.${t}`);return n}function wGe(){let r="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let t=0;t<32;t++)r+=e.charAt(Math.floor(Math.random()*e.length));return r}var cH=class extends Error{};function EGe(r){return r&&r.server&&r.authenticationType||r.connectionString}function rt(r){return r instanceof Error?typeof r.message=="string"?r.message:"":typeof r=="string"?r:`${JSON.stringify(r,void 0,"	")}`}async function TGe(r){let e=[];for await(let t of r)e.push(t);return e}var RGe=require("process");var IGe="MSSQL_SQLTOOLSSERVICE",$ce=class{constructor(e){this.vscodeWrapper=e;this.vscodeWrapper||(this.vscodeWrapper=new gi)}showOnErrorPrompt(){this.vscodeWrapper.showErrorMessage(vqe,mse).then(e=>{e&&e===mse&&lp.env.openExternal(lp.Uri.parse(ZLe))})}error(e,t,n){return this.showOnErrorPrompt(),af.ErrorAction.Shutdown}closed(){return this.showOnErrorPrompt(),af.CloseAction.DoNotRestart}},Mn=class r{constructor(e,t,n,i,s){this._config=e;this._server=t;this._logger=n;this._statusView=i;this._vscodeWrapper=s}_sqlToolsServicePath=void 0;get sqlToolsServicePath(){return this._sqlToolsServicePath}_logPath;static _instance=void 0;_client=void 0;_resourceClient=void 0;get client(){return this._client}set client(e){this._client=e}get diagnosticCollection(){return this._client.diagnostics}get logger(){return this._logger}static get instance(){if(r._instance===void 0){let e=new Gk,t=new gi,n=Cs.create(t.outputChannel,"SQL Tools Service"),i=new oH,s=new Uk,o=new jk,a=new nk(e,n,i,s,o),c=new jM(a,e,i),l=new BC(t);r._instance=new r(e,c,n,l,t)}return r._instance}initialize(e){return this._logger.appendLine(bqe),this._logPath=e.logUri.fsPath,f0.getCurrent().then(t=>this.initializeForPlatform(t,e))}initializeForPlatform(e,t){return new Promise((n,i)=>{this._logger.appendLine(_qe),this._logger.appendLine(),this._logger.append(`Platform: ${e.toString()}`),e.isValidRuntime?(e.runtimeId?this._logger.appendLine(` (${e.getRuntimeDisplayName()})`):this._logger.appendLine(),this._logger.appendLine(),this.updateServiceVersion(e),this._server.getServerPath(e.runtimeId).then(async s=>{if(s===void 0){this._vscodeWrapper!==void 0&&this._vscodeWrapper.outputChannel.show();let o=await this._server.downloadServerFiles(e.runtimeId);this._sqlToolsServicePath=Wg.dirname(o),await this.initializeLanguageClient(o,t,e.isWindows),await this._client.onReady(),n(new $k(!0,!0,o))}else this._sqlToolsServicePath=Wg.dirname(s),await this.initializeLanguageClient(s,t,e.isWindows),await this._client.onReady(),n(new $k(!1,!0,s))}).catch(s=>{this.logger.logDebug(hse+" "+s),Ll(hse),i(s)})):(Ll(Sqe),i("Invalid Platform"))})}updateServiceVersion(e){e.isMacOS&&e.isMacVersionLessThan("10.12.0")&&this._config.useServiceVersion(1)}getServiceVersion(){return this._config.getServiceVersion()}initializeLanguageConfiguration(){lp.languages.setLanguageConfiguration("sql",{comments:{lineComment:"--",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],__characterPairSupport:{autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"',notIn:["string"]},{open:"'",close:"'",notIn:["string","comment"]}]}})}async initializeLanguageClient(e,t,n){if(e===void 0)throw this.logger.logDebug(fse),new Error(fse);{let i;this.initializeLanguageConfiguration();try{let c=this._config.getSqlToolsExecutableFiles(),l=RGe.env[IGe];if(l){for(let u of c){let d=Wg.join(l,u);if(await Hk(d)){let p=`Using ${u} from ${l}`;lp.window.showInformationMessage(p),console.log(p),i=d;break}}i||console.warn(`Could not find valid SQL Tools Service EXE from ${JSON.stringify(c)} at ${l}, falling back to config`)}}catch(c){console.warn("Unexpected error getting override path for SQL Tools Service client ",c)}let s=this.createServiceLayerServerOptions(i||e);this.client=this.createLanguageClient(s);let o=n?Iqe:Rqe,a=Wg.join(Wg.dirname(e),o);if(i){let c=Wg.dirname(i),l=Wg.join(c,o);if(await Hk(l)){let d=`Using ${l} from ${c}`;lp.window.showInformationMessage(d),console.log(d),a=l}}if(this._resourceClient=this.createResourceClient(a),t!==void 0){let c=this.client.start(),l=this._resourceClient.start();t.subscriptions.push(c),t.subscriptions.push(l)}}}createLanguageClient(e){let t={documentSelector:["sql"],diagnosticCollectionName:"mssql",synchronize:{configurationSection:[fi,Jke]},errorHandler:new $ce(this._vscodeWrapper)},n=new af.LanguageClient(Cqe,e,t);return n.onReady().then(()=>{n.onNotification(Uce.type,this.handleLanguageServiceStatusNotification())}),n}generateResourceServiceServerOptions(e){let t=goe(e,this._logPath,"resourceprovider.log");return{command:e,args:t,transport:af.TransportKind.stdio}}createResourceClient(e){let t=this.generateResourceServiceServerOptions(e);return new af.LanguageClient(Pqe,t,void 0)}handleLanguageServiceStatusNotification(){return e=>{this._statusView.languageServiceStatusChanged(e.ownerUri,e.status)}}createServiceLayerServerOptions(e){let t=[],n=e;e.endsWith(".dll")&&(t=[e],n="dotnet");let i=lp.workspace.getConfiguration(fi);if(i){t=t.concat(goe(e,this._logPath,"sqltools.log")),i[XG]&&t.push("--enable-logging"),t.push("--application-name",HB),t.push("--data-path",OG()),process.env[IGe]&&t.push("--vscode-debug-launch"),zv()&&t.push("--enable-sql-authentication-provider"),Qke()&&t.push("--enable-connection-pooling");let l=lp.env.language;t.push("--locale"),t.push(l)}return{command:n,args:t,transport:af.TransportKind.stdio}}sendRequest(e,t){if(this.client!==void 0)return this.client.sendRequest(e,t)}sendResourceRequest(e,t){if(this._resourceClient!==void 0)return this._resourceClient.sendRequest(e,t)}sendNotification(e,t){this.client!==void 0&&this.client.sendNotification(e,t)}onNotification(e,t){if(this._client!==void 0)return this.client.onNotification(e,t)}onRequest(e,t){if(this._client!==void 0)return this.client.onRequest(e,t)}};var Ca=ge(require("vscode"));var Aa=ge(require("vscode"));var _u=ge(Vi());var Vce;(e=>e.type=new _u.NotificationType("query/complete"))(Vce||={});var Hce;(e=>e.type=new _u.NotificationType("query/batchStart"))(Hce||={});var Wce;(e=>e.type=new _u.NotificationType("query/batchComplete"))(Wce||={});var Kce;(e=>e.type=new _u.NotificationType("query/resultSetAvailable"))(Kce||={});var Qce;(e=>e.type=new _u.NotificationType("query/resultSetUpdated"))(Qce||={});var Yce;(e=>e.type=new _u.NotificationType("query/resultSetComplete"))(Yce||={});var Xce;(e=>e.type=new _u.NotificationType("query/message"))(Xce||={});var Jce;(e=>e.type=new _u.RequestType("query/executeDocumentSelection"))(Jce||={});var Zce;(e=>e.type=new _u.RequestType("query/executedocumentstatement"))(Zce||={});var ele;(e=>e.type=new _u.RequestType("query/subset"))(ele||={});var uH=class{ownerUri;batchIndex;resultSetIndex;rowsStartIndex;rowsCount};var tle;(e=>e.type=new _u.RequestType("query/setexecutionoptions"))(tle||={});var rle;(e=>e.type=new _u.NotificationType("query/connectionUriChanged"))(rle||={});var dH=class r{static _instance;static get instance(){return this._instance??=new r}_queryRunners=new Map;constructor(){this.initialize()}registerRunner(e,t){this._queryRunners.set(t,e)}unregisterRunner(e){this._queryRunners.delete(e)}initialize(){let e=Mn.instance;e.onNotification(Vce.type,this.handleQueryCompleteNotification()),e.onNotification(Hce.type,this.handleBatchStartNotification()),e.onNotification(Wce.type,this.handleBatchCompleteNotification()),e.onNotification(Kce.type,this.handleResultSetAvailableNotification()),e.onNotification(Qce.type,this.handleResultSetUpdatedNotification()),e.onNotification(Yce.type,this.handleResultSetCompleteNotification()),e.onNotification(Xce.type,this.handleMessageNotification())}makeHandler(e,t=!1){return n=>{let i=this._queryRunners.get(n.ownerUri);i&&(e(i,n),t&&this._queryRunners.delete(n.ownerUri))}}handleQueryCompleteNotification(){return this.makeHandler((e,t)=>e.handleQueryComplete(t),!0)}handleBatchStartNotification(){return this.makeHandler((e,t)=>e.handleBatchStart(t))}handleBatchCompleteNotification(){return this.makeHandler((e,t)=>e.handleBatchComplete(t))}handleResultSetAvailableNotification(){return this.makeHandler((e,t)=>e.handleResultSetAvailable(t))}handleResultSetUpdatedNotification(){return this.makeHandler((e,t)=>e.handleResultSetUpdated(t))}handleResultSetCompleteNotification(){return this.makeHandler((e,t)=>e.handleResultSetComplete(t))}handleMessageNotification(){return this.makeHandler((e,t)=>e.handleMessage(t))}};var xGe=ge(Vi()),nle;(e=>e.type=new xGe.RequestType("query/dispose"))(nle||={});var pH=class{ownerUri};var OGe=ge(Vi()),ile;(e=>e.type=new OGe.RequestType("query/cancel"))(ile||={});var j0=ge(require("os"));var M2e=ge(require("vscode"));var k2e=ge(x2e());var Ac=[];for(let r=0;r<256;++r)Ac.push((r+256).toString(16).slice(1));function O2e(r,e=0){return(Ac[r[e+0]]+Ac[r[e+1]]+Ac[r[e+2]]+Ac[r[e+3]]+"-"+Ac[r[e+4]]+Ac[r[e+5]]+"-"+Ac[r[e+6]]+Ac[r[e+7]]+"-"+Ac[r[e+8]]+Ac[r[e+9]]+"-"+Ac[r[e+10]]+Ac[r[e+11]]+Ac[r[e+12]]+Ac[r[e+13]]+Ac[r[e+14]]+Ac[r[e+15]]).toLowerCase()}var A2e=require("crypto"),vH=new Uint8Array(256),yH=vH.length;function ble(){return yH>vH.length-16&&((0,A2e.randomFillSync)(vH),yH=0),vH.slice(yH,yH+=16)}var N2e=require("crypto"),_le={randomUUID:N2e.randomUUID};function vWt(r,e,t){if(_le.randomUUID&&!e&&!r)return _le.randomUUID();r=r||{};let n=r.random??r.rng?.()??ble();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){if(t=t||0,t<0||t+16>e.length)throw new RangeError(`UUID byte range ${t}:${t+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[t+i]=n[i];return e}return O2e(n)}var Sle=vWt;var D2e=M2e.extensions.getExtension(aC).packageJSON,Cle={name:"vscode-mssql",version:D2e.version,aiKey:D2e.aiKey},L2e=new k2e.default(Cle.name,Cle.version,Cle.aiKey);function vt(r,e,t={},n={},i,s){let o=L2e.createActionEvent(r,e).withAdditionalProperties(t).withAdditionalMeasurements(n);i&&(o=o.withConnectionInfo(i)),s&&(o=o.withServerInfo(s)),o.send()}function kr(r,e,t,n=!1,i,s,o={},a={},c,l){let u=L2e.createErrorEvent2(r,e,t,n,i,s).withAdditionalProperties(o).withAdditionalMeasurements(a);c&&(u=u.withConnectionInfo(c)),l&&(u=u.withServerInfo(l)),u.send()}function Fn(r,e,t,n={},i={}){let s=performance.now();t||(t=Sle()),vt(r,e,n,{...i,startTime:Math.round(s)});function o(l,u){vt(r,e,{...l,activityStatus:"Pending"},{...u,timeElapsedMs:Math.round(performance.now()-s)})}function a(l,u,d){vt(r,e,{...u,activityStatus:l},{...d,durationMs:Math.round(performance.now()-s)})}function c(l,u,d,p,m,f){kr(r,e,l,u,d,p,{...m,activityStatus:"Failed"},{...f,durationMs:Math.round(performance.now()-s)})}return{startTime:s,correlationId:t,update:o,end:a,endFailed:c}}var eL=class r{constructor(e,t,n,i,s,o){this._ownerUri=e;this._editorTitle=t;this._statusView=n;this._client=i;this._notificationHandler=s;this._vscodeWrapper=o;i||(this._client=Mn.instance),s||(this._notificationHandler=dH.instance),o||(this._vscodeWrapper=new gi),this._isExecuting=!1,this._totalElapsedMilliseconds=0,this._hasCompleted=!1}_batchSets=[];_batchSetMessages={};_isExecuting;_resultLineOffset;_totalElapsedMilliseconds;_hasCompleted;_isSqlCmd=!1;_uriToQueryPromiseMap=new Map;_uriToQueryStringMap=new Map;static _runningQueries=[];_startEmitter=new Aa.EventEmitter;onStart=this._startEmitter.event;_batchStartEmitter=new Aa.EventEmitter;onBatchStart=this._batchStartEmitter.event;_batchCompleteEmitter=new Aa.EventEmitter;onBatchComplete=this._batchCompleteEmitter.event;_resultSetAvailableEmitter=new Aa.EventEmitter;onResultSetAvailable=this._resultSetAvailableEmitter.event;_resultSetUpdatedEmitter=new Aa.EventEmitter;onResultSetUpdated=this._resultSetUpdatedEmitter.event;_resultSetCompleteEmitter=new Aa.EventEmitter;onResultSetComplete=this._resultSetCompleteEmitter.event;_executionPlanEmitter=new Aa.EventEmitter;onExecutionPlan=this._executionPlanEmitter.event;_messageEmitter=new Aa.EventEmitter;onMessage=this._messageEmitter.event;_completeEmitter=new Aa.EventEmitter;onComplete=this._completeEmitter.event;get uri(){return this._ownerUri}set uri(e){this._ownerUri=e}get title(){return this._editorTitle}set title(e){this._editorTitle=e}get batchSets(){return this._batchSets}set batchSets(e){this._batchSets=e}get batchSetMessages(){return this._batchSetMessages}get isExecutingQuery(){return this._isExecuting}get isSqlCmd(){return this._isSqlCmd}set isSqlCmd(e){this._isSqlCmd=e}get hasCompleted(){return this._hasCompleted}set hasCompleted(e){this._hasCompleted=e}async cancel(){let e={ownerUri:this._ownerUri},t;try{t=await this._client.sendRequest(ile.type,e)}catch(n){this._handleQueryCleanup(sC.queryCancelFailed(n),n);return}return t}async runStatement(e,t){await this.doRunQuery({startLine:e,startColumn:t,endLine:0,endColumn:0},async(n,i)=>{let s={ownerUri:this._ownerUri,line:e,column:t};await this._client.sendRequest(Zce.type,s).then(n,i)})}async runQuery(e,t,n){await this.doRunQuery(e,async(i,s)=>{let o={ownerUri:this._ownerUri,executionPlanOptions:t,querySelection:e},a=await this._vscodeWrapper.openTextDocument(this._vscodeWrapper.parseUri(this._ownerUri)),c;if(e){let l=this._vscodeWrapper.range(this._vscodeWrapper.position(e.startLine,e.startColumn),this._vscodeWrapper.position(e.endLine,e.endColumn));c=a.getText(l)}else c=a.getText();this._uriToQueryStringMap.set(this._ownerUri,c),n&&this._uriToQueryPromiseMap.set(this._ownerUri,n),await this._client.sendRequest(Jce.type,o).then(i,s)})}async doRunQuery(e,t){this._vscodeWrapper.logToOutputChannel(CDe(this._ownerUri)),this._resultLineOffset=e?e.startLine:0,this._isExecuting=!0,this._totalElapsedMilliseconds=0,this._statusView.executingQuery(this.uri),r._runningQueries.push(Aa.Uri.parse(this._ownerUri).fsPath),this.updateRunningQueries(),this._notificationHandler.registerRunner(this,this._ownerUri);let n=s=>{this._startEmitter.fire(this.uri)},i=s=>{throw this._handleQueryCleanup(void 0,s),s};try{await t(n,i)}catch(s){this._statusView.executedQuery(this.uri);let o=s instanceof Error?s.message:String(s);throw this._vscodeWrapper.showErrorMessage("Execution failed: "+o),i(s),s}}removeRunningQuery(){r._runningQueries=r._runningQueries.filter(e=>e!==Aa.Uri.parse(this._ownerUri).fsPath),this.updateRunningQueries()}handleQueryComplete(e){this._vscodeWrapper.logToOutputChannel(PDe(this._ownerUri)),this._isExecuting=!1,this._hasCompleted=!0,this._batchSets=e.batchSummaries,this._batchSets.map(i=>{i.selection&&(i.selection.startLine=i.selection.startLine+this._resultLineOffset,i.selection.endLine=i.selection.endLine+this._resultLineOffset)});let t=this._uriToQueryPromiseMap.get(e.ownerUri);t&&(t.resolve(),this._uriToQueryPromiseMap.delete(e.ownerUri)),this._statusView.executedQuery(e.ownerUri),this._statusView.setExecutionTime(e.ownerUri,bC(this._totalElapsedMilliseconds));let n=this._batchSets.some(i=>i.hasError===!0);this.removeRunningQuery(),this._completeEmitter.fire({totalMilliseconds:bC(this._totalElapsedMilliseconds),hasError:n}),vt("QueryEditor","QueryExecutionCompleted",void 0)}handleBatchStart(e){let t=e.batchSummary;t.selection&&(t.selection.startLine+=this._resultLineOffset,t.selection.endLine+=this._resultLineOffset),t.resultSetSummaries=[],this._batchSetMessages[t.id]=[],this._batchSets[t.id]=t,this._batchStartEmitter.fire(t)}handleBatchComplete(e){let t=e.batchSummary;this._batchSets[t.id]=t;let n=moe(t.executionElapsed)||0;this._totalElapsedMilliseconds+=n,n>0&&this.sendBatchTimeMessage(t.id,bC(n)),this._batchCompleteEmitter.fire(t)}async refreshQueryTab(e){this._isExecuting=!0,this._hasCompleted=!1;for(let t=0;t<this.batchSets.length;t++){let n=this.batchSets[t];this._batchStartEmitter.fire(n);let i=moe(n.executionElapsed)||0;i>0&&this.sendBatchTimeMessage(n.id,bC(i));let s=this._batchSetMessages[t];if(s!==void 0)for(let o=0;o<s.length;++o)this._messageEmitter.fire(s[o]);this._batchCompleteEmitter.fire(n)}return this._statusView.executedQuery(e),this._isExecuting=!1,this._hasCompleted=!0,this._completeEmitter.fire({totalMilliseconds:bC(this._totalElapsedMilliseconds),hasError:!1,isRefresh:!1}),!0}handleResultSetAvailable(e){let t=e.resultSetSummary,n=this._batchSets[t.batchId];n.resultSetSummaries[t.id]||(n.resultSetSummaries[t.id]=t),this._resultSetAvailableEmitter.fire(t)}handleResultSetUpdated(e){let t=e.resultSetSummary,n=this._batchSets[t.batchId];n.resultSetSummaries[t.id]=t,this._resultSetUpdatedEmitter.fire(t)}async handleResultSetComplete(e){let t=e.resultSetSummary,n=this._batchSets[t.batchId];if(n.resultSetSummaries[t.id]=t,this._resultSetCompleteEmitter.fire(t),t.columnInfo?.[0]?.columnName===l2){let i=await this.getRows(0,1,t.batchId,t.id);this._executionPlanEmitter.fire({uri:this.uri,xml:i.resultSubset.rows[0][0].displayValue,batchId:t.batchId,resultId:t.id})}}handleMessage(e){let t=e.message;t.time=new Date(t.time).toLocaleTimeString(),t.batchId>=0&&this._batchSetMessages[t.batchId]!==void 0&&this._batchSetMessages[t.batchId].push(t),this._messageEmitter.fire(t),e.message.isError?this._statusView.hideRowCount(e.ownerUri,!0):this._statusView.showRowCount(e.ownerUri,e.message.message)}async getRows(e,t,n,i){let s=new uH;s.ownerUri=this.uri,s.resultSetIndex=i,s.rowsCount=t,s.rowsStartIndex=e,s.batchIndex=n;try{let o=await this._client.sendRequest(ele.type,s);if(o)return o}catch(o){this._vscodeWrapper.showErrorMessage("Something went wrong getting more rows: "+o.message),Promise.reject(o)}}async dispose(){let e=new pH;e.ownerUri=this.uri;try{await this._client.sendRequest(nle.type,e)}catch(t){this._handleQueryCleanup(sC.queryDisposeFailed(t),t);return}this._handleQueryCleanup()}_handleQueryCleanup(e,t){this._isExecuting=!1,this._hasCompleted=!0,this.removeRunningQuery();let n=this._uriToQueryPromiseMap.get(this._ownerUri);n&&(t?n.reject(t):n.resolve(),this._uriToQueryPromiseMap.delete(this._ownerUri)),this._completeEmitter.fire({totalMilliseconds:bC(this._totalElapsedMilliseconds),hasError:!!t}),this._statusView.executedQuery(this._ownerUri),this._notificationHandler.unregisterRunner(this._ownerUri),e&&this._vscodeWrapper.showErrorMessage(rt(e))}getColumnHeaders(e,t,n){let i,s=this.batchSets[e];return s!==void 0&&(i=s.resultSetSummaries[t].columnInfo.slice(n.fromCell,n.toCell+1).map(a=>a.columnName)),i}async copyHeaders(e,t,n){let i="",s,o;for(let u of n)(s===void 0||u.fromCell<s)&&(s=u.fromCell),(o===void 0||u.toCell>o)&&(o=u.toCell);let a={fromCell:s,toCell:o,fromRow:void 0,toRow:void 0},c=this.getColumnHeaders(e,t,a);i+=c.join("	");let l;process.platform==="darwin"&&(l=process.env.LANG,process.env.LANG="en_US.UTF-8"),await this._vscodeWrapper.clipboardWriteText(i),process.platform==="darwin"&&(process.env.LANG=l)}async copyResults(e,t,n,i){let s="";this.shouldIncludeHeaders(i)&&(s=this.addHeadersToCopyString(s,t,n,e)),e.sort((u,d)=>u.fromRow-d.fromRow);let o=new Map,a=new Map,c=e.map(u=>async()=>{let d=await this.getRows(u.fromRow,u.toRow-u.fromRow+1,t,n);this.getRowMappings(d.resultSubset.rows,u,o,a)}),l=c[0]();for(let u=1;u<c.length;u++)l=l.then(c[u]);await l,s=this.constructCopyString(s,a,o),await this.writeStringToClipboard(s)}async exportCellsToClipboard(e,t,n,i,s){let o="";s&&(o=this.addHeadersToCopyString(o,t,n,i));let a=new Map,c=new Map,l=i.map(d=>async()=>{let p=e;this.getRowMappings(p,d,a,c)}),u=l[0]();for(let d=1;d<l.length;d++)u=u.then(l[d]);await u,o=this.constructCopyString(o,c,a),await this.writeStringToClipboard(o)}getRowMappings(e,t,n,i){let s=0;for(let o of e){let a=s+t.fromRow;n.has(a)?n.get(a).push(t):n.set(a,[t]),i.set(a,o),s+=1}}constructCopyString(e,t,n){let i=t.keys(),s=this.getSelectionEndColumns(t,n),o=s[0],a=s[1];for(let c of i){let l=t.get(c),u=n.get(c);u.sort((d,p)=>d.fromCell<p.fromCell?-1:d.fromCell>p.fromCell?1:0);for(let d=0;d<u.length;d++){let p=u[d];for(let y=o;y<p.fromCell;y++)e+="	";let m=l.slice(p.fromCell,p.toCell+1),f=this.shouldRemoveNewLines()?m.map(y=>this.removeNewLines(y.displayValue)):m.map(y=>y.displayValue);e+=f.join("	");for(let y=p.toCell;y<a;y++)e+="	"}e+=j0.EOL}return e.length>1&&(e=e.substring(0,e.length-j0.EOL.length)),e}addHeadersToCopyString(e,t,n,i){let s,o;for(let l of i)(s===void 0||l.fromCell<s)&&(s=l.fromCell),(o===void 0||l.toCell>o)&&(o=l.toCell);let a={fromCell:s,toCell:o,fromRow:void 0,toRow:void 0},c=this.getColumnHeaders(t,n,a);return e+=c.join("	"),e+=j0.EOL,e}async writeStringToClipboard(e){let t;process.platform==="darwin"&&(t=process.env.LANG,process.env.LANG="en_US.UTF-8"),await this._vscodeWrapper.clipboardWriteText(e),process.platform==="darwin"&&(process.env.LANG=t)}async copyResultsAsCsv(e,t,n,i){let o=this._vscodeWrapper.getConfiguration(fi)[cM]||{},a=o.delimiter||",",c=o.textIdentifier||'"',l=o.lineSeperator||j0.EOL,u="";this.shouldIncludeHeaders(i)&&(u=this.addHeadersToCsvString(u,t,n,e,a,c)),e.sort((y,v)=>y.fromRow-v.fromRow);let d=new Map,p=new Map,m=e.map(y=>async()=>{let v=await this.getRows(y.fromRow,y.toRow-y.fromRow+1,t,n);this.getRowMappings(v.resultSubset.rows,y,d,p)}),f=m[0]();for(let y=1;y<m.length;y++)f=f.then(m[y]);await f,u=this.constructCsvString(u,p,d,a,c,l),await this.writeStringToClipboard(u)}async copyResultsAsJson(e,t,n,i){e.sort((u,d)=>u.fromRow-d.fromRow);let s=new Map,o=new Map,a=e.map(u=>async()=>{let d=await this.getRows(u.fromRow,u.toRow-u.fromRow+1,t,n);this.getRowMappings(d.resultSubset.rows,u,s,o)}),c=a[0]();for(let u=1;u<a.length;u++)c=c.then(a[u]);await c;let l=this.constructJsonString(o,s,t,n,i);await this.writeStringToClipboard(l)}async toggleSqlCmd(){let e={options:{}};e.options.isSqlCmdMode=!this.isSqlCmd;let t={ownerUri:this.uri,options:e};return await this._client.sendRequest(tle.type,t),this._isSqlCmd=!this._isSqlCmd,!0}shouldIncludeHeaders(e){return e!==void 0?e:(e=this._vscodeWrapper.getConfiguration(fi,this.uri).get(iqe),!!e)}shouldRemoveNewLines(){return this._vscodeWrapper.getConfiguration(fi,this.uri).get(aqe)}removeNewLines(e){return e.replace(/(\r\n|\n|\r)/gm,"")}sendBatchTimeMessage(e,t){if(this._vscodeWrapper.getConfiguration(fi,this.uri).get(cqe)){let s={batchId:e,message:ike(t),time:void 0,isError:!1};this._messageEmitter.fire(s)}}getSelectionEndColumns(e,t){let n=e.keys(),i=-1,s=-1;for(let o of n){let a=t.get(o);for(let c=0;c<a.length;c++)(i===-1||a[c].fromCell<i)&&(i=a[c].fromCell),(s===-1||a[c].toCell>s)&&(s=a[c].toCell)}return[i,s]}async setEditorSelection(e){if(this._vscodeWrapper.textDocuments.find(n=>n.uri.toString(!0)===this.uri)){let n=Aa.ViewColumn.One,i=await this._vscodeWrapper.openTextDocument(this._vscodeWrapper.parseUri(this.uri)),s=this._vscodeWrapper.activeTextEditor;s&&(n=s.viewColumn);let o=await this._vscodeWrapper.showTextDocument(i,{viewColumn:n,preserveFocus:!1,preview:!1}),a=new Aa.Selection(e.startLine,e.startColumn,e.endLine,e.endColumn);o.selection=a;return}}getQueryString(e){if(this._uriToQueryStringMap.has(e))return this._uriToQueryStringMap.get(e)}resetHasCompleted(){this._hasCompleted=!1}setHasCompleted(){this._hasCompleted=!0}get totalElapsedMilliseconds(){return this._totalElapsedMilliseconds}updateQueryRunnerUri(e,t){let n={newOwnerUri:t,originalOwnerUri:e};this._client.sendNotification(rle.type,n),this.uri=t}addHeadersToCsvString(e,t,n,i,s,o){let a,c;for(let p of i)(a===void 0||p.fromCell<a)&&(a=p.fromCell),(c===void 0||p.toCell>c)&&(c=p.toCell);let l={fromCell:a,toCell:c,fromRow:void 0,toRow:void 0},d=this.getColumnHeaders(t,n,l).map(p=>this.escapeCsvValue(p,o));return e+=d.join(s),e+=j0.EOL,e}constructCsvString(e,t,n,i,s,o){let a=Array.from(t.keys()).sort((d,p)=>d-p),c=this.getSelectionEndColumns(t,n),l=c[0],u=c[1];for(let d of a){let p=t.get(d),m=n.get(d);m.sort((y,v)=>y.fromCell<v.fromCell?-1:y.fromCell>v.fromCell?1:0);let f=[];for(let y=0;y<m.length;y++){let v=m[y];for(;f.length<v.fromCell-l;)f.push("");let C=p.slice(v.fromCell,v.toCell+1).map(P=>{let w=this.shouldRemoveNewLines()?this.removeNewLines(P.displayValue):P.displayValue;return this.escapeCsvValue(w,s)});f.push(...C)}for(;f.length<u-l+1;)f.push("");e+=f.join(i),e+=o}return e.length>o.length&&(e=e.substring(0,e.length-o.length)),e}constructJsonString(e,t,n,i,s){let o=Array.from(e.keys()).sort((m,f)=>m-f);if(o.length===0)return"[]";let a=this.getSelectionEndColumns(e,t),c=a[0],l=a[1],u={fromCell:c,toCell:l,fromRow:void 0,toRow:void 0},d=this.getColumnHeaders(n,i,u),p=[];for(let m of o){let f=e.get(m),y=t.get(m);y.sort((C,P)=>C.fromCell<P.fromCell?-1:C.fromCell>P.fromCell?1:0);let v={},_=0;for(let C=0;C<y.length;C++){let P=y[C];for(;_<P.fromCell-c;)v[d[_]]=null,_++;let w=f.slice(P.fromCell,P.toCell+1);for(let R of w){let I=this.shouldRemoveNewLines()?this.removeNewLines(R.displayValue):R.displayValue,z=this.parseJsonValue(I);v[d[_]]=z,_++}}for(;_<d.length;)v[d[_]]=null,_++;p.push(v)}return JSON.stringify(p,null,2)}escapeCsvValue(e,t){if(e==null)return"";let n=String(e);return n.includes(",")||n.includes(`
`)||n.includes("\r")||n.includes(t)?(n=n.replace(new RegExp(t,"g"),t+t),t+n+t):n}parseJsonValue(e){return e==null||e===""?null:e.toLowerCase()==="true"?!0:e.toLowerCase()==="false"?!1:!isNaN(Number(e))&&e.trim()!==""?Number(e):e}updateRunningQueries(){Aa.commands.executeCommand("setContext","mssql.runningQueries",r._runningQueries)}};var B0=ge(require("vscode"));var j2e=ge(require("path"));var $C=ge(Vi()),Ple;(e=>e.type=new $C.RequestType("credential/read"))(Ple||={});var U0=class{credentialId;password},wle;(e=>e.type=new $C.RequestType("credential/save"))(wle||={});var Ele;(e=>e.type=new $C.RequestType("credential/delete"))(Ele||={});var tL=class{ownerUri;filePath;batchIndex;resultSetIndex;rowStartIndex;rowEndIndex;columnStartIndex;columnEndIndex},bH=class extends tL{includeHeaders=!0;delimiter=",";lineSeperator=void 0;textIdentifier='"';encoding="utf-8"},_H=class extends tL{},SH=class extends tL{includeHeaders=!0};var Tle;(e=>e.type=new $C.RequestType("query/saveCsv"))(Tle||={});var Ile;(e=>e.type=new $C.RequestType("query/saveJson"))(Ile||={});var Rle;(e=>e.type=new $C.RequestType("query/saveExcel"))(Rle||={});var U2e=ge(F2e()),rL=class{_client;_vscodeWrapper;_uri;_filePath;constructor(e,t){e?this._client=e:this._client=Mn.instance,t?this._vscodeWrapper=t:this._vscodeWrapper=new gi}promptForFilepath(e){let t;B0.Uri.parse(this._uri).scheme==="untitled"?t=void 0:t=B0.Uri.parse(j2e.dirname(this._uri));let n={};e==="csv"?n[oke]=["csv"]:e==="json"?n[ake]=["json"]:e==="excel"&&(n[cke]=["xlsx"]);let i={defaultUri:t,filters:n};return this._vscodeWrapper.showSaveDialog(i).then(s=>{if(s)return s.scheme==="file"?s.fsPath:s.path})}getConfigForCsv(){let t=this._vscodeWrapper.getConfiguration(fi,this._uri)[cM],n=new bH;return t&&(t.includeHeaders!==void 0&&(n.includeHeaders=t.includeHeaders),t.delimiter!==void 0&&(n.delimiter=t.delimiter),t.lineSeparator!==void 0&&(n.lineSeperator=t.lineSeparator),t.textIdentifier!==void 0&&(n.textIdentifier=t.textIdentifier),t.encoding!==void 0&&(n.encoding=t.encoding)),n}getConfigForJson(){let t=this._vscodeWrapper.getConfiguration(fi,this._uri)[sqe];return new _H}getConfigForExcel(){let t=this._vscodeWrapper.getConfiguration(fi,this._uri)[cM],n=new SH;return t&&t.includeHeaders!==void 0&&(n.includeHeaders=t.includeHeaders),n}getParameters(e,t,n,i,s){let o=this,a;return this._filePath=e,i==="csv"?a=o.getConfigForCsv():i==="json"?a=o.getConfigForJson():i==="excel"&&(a=o.getConfigForExcel()),a.filePath=this._filePath,a.ownerUri=this._uri,a.resultSetIndex=n,a.batchIndex=t,this.isSelected(s)&&(a.rowStartIndex=s.fromRow,a.rowEndIndex=s.toRow,a.columnStartIndex=s.fromCell,a.columnEndIndex=s.toCell),a}isSelected(e){return e&&!(e.fromCell===e.toCell&&e.fromRow===e.toRow)}sendRequestToService(e,t,n,i,s){let o=this,a=o.getParameters(e,t,n,i,s),c;return i==="csv"?c=Tle.type:i==="json"?c=Ile.type:i==="excel"&&(c=Rle.type),o._vscodeWrapper.logToOutputChannel(aMe+this._filePath),o._client.sendRequest(c,a).then(l=>{l.messages?(o._vscodeWrapper.showErrorMessage(QD+l.messages),o._vscodeWrapper.logToOutputChannel(QD+l.messages)):(o._vscodeWrapper.showInformationMessage(hie+this._filePath),o._vscodeWrapper.logToOutputChannel(hie+e),o.openSavedFile(o._filePath,i))},l=>{o._vscodeWrapper.showErrorMessage(QD+l.message),o._vscodeWrapper.logToOutputChannel(QD+l.message)})}onSaveResults(e,t,n,i,s){let o=this;return this._uri=e,o.promptForFilepath(i).then(function(a){oi(a)||o.sendRequestToService(a,t,n,i,s?s[0]:void 0)},a=>{o._vscodeWrapper.showErrorMessage(a.message),o._vscodeWrapper.logToOutputChannel(a.message)})}openSavedFile(e,t){let n=this;if(t==="excel")(0,U2e.default)(e,void 0,i=>{i&&n._vscodeWrapper.showErrorMessage(i)});else{let i=B0.Uri.file(e);n._vscodeWrapper.openTextDocument(i).then(s=>{n._vscodeWrapper.showTextDocument(s,{viewColumn:B0.ViewColumn.One,preserveFocus:!1,preview:!1}).then(void 0,o=>{n._vscodeWrapper.showErrorMessage(o)})},s=>{n._vscodeWrapper.showErrorMessage(s)})}}};var Ab=ge(require("vscode"));var Po=ge(lL());var que=(t=>(t.Grid="grid",t.Text="text",t))(que||{});var zue;(e=>e.type=new Po.RequestType("getFilters"))(zue||={});var Fue;(e=>e.type=new Po.RequestType("setFilters"))(Fue||={});var jue;(e=>e.type=new Po.RequestType("getColumnWidths"))(jue||={});var Uue;(e=>e.type=new Po.RequestType("setColumnWidths"))(Uue||={});var Bue;(e=>e.type=new Po.RequestType("showFilterDisabledMessage"))(Bue||={});var Gue;(e=>e.type=new Po.RequestType("copySelection"))(Gue||={});var $ue;(e=>e.type=new Po.RequestType("sendToClipboard"))($ue||={});var Vue;(e=>e.type=new Po.RequestType("copyHeaders"))(Vue||={});var Hue;(e=>e.type=new Po.RequestType("copyWithHeaders"))(Hue||={});var Wue;(e=>e.type=new Po.RequestType("copyAsCsv"))(Wue||={});var Kue;(e=>e.type=new Po.RequestType("copyAsJson"))(Kue||={});var Que;(e=>e.type=new Po.RequestType("setSelectionSummary"))(Que||={});var Yue;(e=>e.type=new Po.RequestType("openInNewTab"))(Yue||={});var uL;(e=>e.type=new Po.RequestType("getWebviewLocation"))(uL||={});var Xue;(e=>e.type=new Po.RequestType("setEditorSelection"))(Xue||={});var Jue;(e=>e.type=new Po.RequestType("saveResults"))(Jue||={});var Zue;(e=>e.type=new Po.RequestType("getRows"))(Zue||={});var ede;(e=>e.type=new Po.NotificationType("setGridScrollPosition"))(ede||={});var tde;(e=>e.type=new Po.RequestType("getGridScrollPosition"))(tde||={});var rde;(e=>e.type=new Po.NotificationType("setPaneScrollPosition"))(rde||={});var nde;(e=>e.type=new Po.RequestType("getGridPaneScrollPosition"))(nde||={});var E$e=ge(require("vscode"));var Ul=ge(require("vscode"));var jl=ge(lL());var FH;(e=>e.type=new jl.NotificationType("onDidChangeColorTheme"))(FH||={});var dL;(t=>{let r=new jl.NotificationType("onDidChangeState");function e(){return r}t.type=e})(dL||={});var sde;(t=>{let r=new jl.RequestType("getState");function e(){return r}t.type=e})(sde||={});var ode;(e=>e.type=new jl.RequestType("getTheme"))(ode||={});var ade;(e=>e.type=new jl.RequestType("getLocalization"))(ade||={});var cde;(e=>e.type=new jl.RequestType("executeCommand"))(cde||={});var lde;(e=>e.type=new jl.RequestType("getPlatform"))(lde||={});var ude;(e=>e.type=new jl.NotificationType("sendActionEvent"))(ude||={});var dde;(e=>e.type=new jl.NotificationType("sendErrorEvent"))(dde||={});var pde;(e=>e.type=new jl.NotificationType("log"))(pde||={});var mde;(e=>{function r(){return new jl.RequestType("action")}e.type=r})(mde||={});var hde;(e=>e.type=new jl.NotificationType("loadStats"))(hde||={});var fde;(e=>e.type=new jl.RequestType("getEOL"))(fde||={});var xb=ge(P$e()),w$e=ge(require("os")),wde=class extends xb.AbstractMessageReader{constructor(t){super();this.logger=t;this._onData=new xb.Emitter}_onData;_disposables=[];_webview;updateWebview(t){if(this._disposables.forEach(n=>n.dispose()),this._disposables=[],this._webview=t,t){let n=this._webview.onDidReceiveMessage(i=>{let{method:s,error:o}=i;this.logger.verbose(`Message received from webview: ${s}`),vt("WebviewController","ReceivedFromWebview",{messageType:s?"request":"response",type:s,isError:o?"true":"false"}),this._onData.fire(i)});this._disposables.push(n)}}listen(t){return this._onData.event(t)}},Ede=class extends xb.AbstractMessageWriter{constructor(t){super();this.logger=t}_webview;updateWebview(t){this._webview=t}write(t){if(this._webview){let{method:n,error:i}=t;this.logger.verbose(`Sending message to webview: ${n}`),this._webview.postMessage(t),vt("WebviewController","SentToWebview",{messageType:n?"request":"response",type:n,isError:i?"true":"false"})}else this.logger.warn("Attempted to write message but webview is not set");return Promise.resolve()}end(){}},J0=class{constructor(e,t,n,i,s){this._context=e;this.vscodeWrapper=t;this._sourceFile=n;this._initialData=i;t||(t=new gi),this.logger=Cs.create(t.outputChannel,s),this._connectionReader=new wde(this.logger),this._connectionWriter=new Ede(this.logger),this.connection=(0,xb.createMessageConnection)(this._connectionReader,this._connectionWriter),this.connection.listen(),this._disposables.push({dispose:()=>{this.connection.dispose(),this._connectionReader.dispose(),this._connectionWriter.dispose()}})}_disposables=[];_isDisposed=!1;_onDisposed=new Ul.EventEmitter;onDisposed=this._onDisposed.event;_state;_isFirstLoad=!0;_loadStartTime=Date.now();_endLoadActivity=Fn("WebviewController","Load");connection;_connectionReader;_connectionWriter;_reducerHandlers=new Map;logger;updateConnectionWebview(e){e&&(this._connectionReader.updateWebview(e),this._connectionWriter.updateWebview(e))}initializeBase(){this.state||(this.state=this._initialData),this._registerDefaultRequestHandlers(),this.setupTheming()}registerDisposable(e){this._disposables.push(e)}_getHtmlTemplate(){let e=wGe();return`
		<!DOCTYPE html>
			<html lang="en">
				<head>
					<meta charset="UTF-8">
					<meta name="viewport" content="width=device-width, initial-scale=1.0">
					<title>mssqlwebview</title>
					<base href="${this._getWebview().asWebviewUri(Ul.Uri.joinPath(this._context.extensionUri,"dist","views")).toString()+"/"}"> <!-- Required for loading relative resources in the webview -->
				<style>
					html, body {
						margin: 0;
						padding: 0px;
  						width: 100%;
  						height: 100%;
					}
				</style>
				</head>
				<body>
					<link rel="stylesheet" href="${this._sourceFile}.css">
					<div id="root"></div>
				  	<script type="module" nonce="${e}" src="${this._sourceFile}.js"></script> <!-- since our bundles are in esm format we need to use type="module" -->
				</body>
			</html>
		`}setupTheming(){this._disposables.push(Ul.window.onDidChangeActiveColorTheme(e=>{this.sendNotification(FH.type,e.kind)})),this.sendNotification(FH.type,Ul.window.activeColorTheme.kind)}_registerDefaultRequestHandlers(){this.onNotification(ude.type,e=>{vt(e.telemetryView,e.telemetryAction,e.additionalProps,e.additionalMeasurements)}),this.onNotification(dde.type,e=>{kr(e.telemetryView,e.telemetryAction,e.error,e.includeErrorMessage,e.errorCode,e.errorType,e.additionalProps,e.additionalMeasurements)}),this.onNotification(pde.type,async e=>{this.logger[e.level??"log"](e.message)}),this.onNotification(hde.type,e=>{let n=e.loadCompleteTimeStamp-this._loadStartTime;this._isFirstLoad&&(console.log(`Load stats for ${this._sourceFile}
Total time: ${n} ms`),this._endLoadActivity.end("Succeeded",{type:this._sourceFile}),this._isFirstLoad=!1)}),this.onRequest(sde.type(),()=>this.state),this.onRequest(ode.type,()=>Ul.window.activeColorTheme.kind),this.onRequest(ade.type,async()=>{if(Ul.l10n.uri?.fsPath){let e=await Ul.workspace.fs.readFile(Ul.l10n.uri);return Buffer.from(e).toString()}else return}),this.onRequest(cde.type,async e=>{if(!e?.command){this.logger.log("No command provided to execute");return}let t=e?.args??[];return await Ul.commands.executeCommand(e.command,...t)}),this.onRequest(lde.type,async()=>process.platform),this.onRequest(mde.type(),async e=>{let t=Fn("WebviewController","Reducer",void 0,{type:e.type}),n=this._reducerHandlers.get(e.type);if(n)try{this.state=await n(this.state,e.payload),t.end("Succeeded")}catch(i){throw t.endFailed(i,!1),i}else throw t.endFailed(new Error(`No reducer registered for action ${e.type}`),!1),new Error(`No reducer registered for action ${e.type}`)}),this.onRequest(fde.type,()=>w$e.default.EOL)}registerReducer(e,t){this._reducerHandlers.set(e,t)}onRequest(e,t){if(this.connection){if(this._isDisposed)throw new Error("Cannot register request handler on disposed controller");this.connection.onRequest(e,t)}}sendRequest(e,t,n){if(this.connection)return this._isDisposed?Promise.reject(new Error("Cannot send request on disposed controller")):this.connection.sendRequest(e,t,n)}sendNotification(e,t){if(!this.connection)return Promise.resolve();if(this._isDisposed)throw new Error("Cannot send notification on disposed controller");return this.connection.sendNotification(e,t)}onNotification(e,t){if(this.connection){if(this._isDisposed)throw new Error("Cannot register notification handler on disposed controller");this.connection.onNotification(e,t)}}get state(){return this._state}set state(e){this._state=e,this.sendNotification(dL.type(),e)}updateState(e){this.state=e??this.state}get isDisposed(){return this._isDisposed}postMessage(e){this._isDisposed||this._getWebview()?.postMessage(e)}dispose(){this._onDisposed.fire(),this._disposables.forEach(e=>e.dispose()),this._isDisposed=!0}};var $H=class extends J0{constructor(t,n,i,s,o){super(t,n,i,o,s);this._viewId=s}_webviewView;_getWebview(){return this._webviewView?.webview}isVisible(){return this._webviewView?.visible}async revealToForeground(){this._webviewView?.webview||await E$e.commands.executeCommand(`${this._viewId}.focus`,{preserveFocus:!0}),this._webviewView?.show(!0)}resolveWebviewView(t,n,i){this._loadStartTime=Date.now(),this._webviewView=t,t.webview.options={enableScripts:!0,localResourceRoots:[this._context.extensionUri]},this._webviewView.webview.html=this._getHtmlTemplate(),this.updateConnectionWebview(this._webviewView.webview),this.initializeBase()}};var N$e=require("crypto");var xde=ge(require("vscode"));var A$e=require("crypto");var QC=ge(require("vscode"));var xi=class{promise;resolve;reject;constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}then(e,t){return this.promise.then(e,t)}};var Uo=class extends J0{constructor(t,n,i,s,o,a){super(t,n,i,o,s);this._options=a;this.createWebviewPanel(),this.initializeBase()}_panel;dialogResult=new xi;createWebviewPanel(){this._panel=QC.window.createWebviewPanel("mssql-react-webview",this._options.title,{viewColumn:this._options.viewColumn,preserveFocus:this._options.preserveFocus},{enableScripts:!0,retainContextWhenHidden:!0,localResourceRoots:[QC.Uri.file(this._context.extensionPath)]}),this._panel.webview.html=this._getHtmlTemplate(),this._panel.iconPath=this._options.iconPath,this.updateConnectionWebview(this._panel.webview),this.registerDisposable(this._panel.onDidDispose(async()=>{let t;if(this._options.showRestorePromptAfterClose&&(t=await this.showRestorePrompt()),t){await t.run();return}this.dispose()}))}_getWebview(){return this._panel.webview}get panel(){return this._panel}revealToForeground(t=QC.ViewColumn.One){this._panel.reveal(t,!0)}async showRestorePrompt(){return await QC.window.showInformationMessage(fg.webviewRestorePrompt(this._options.title),{modal:!0},{title:fg.Restore,run:async()=>{vt("WebviewController","Restore",{},{}),await this.createWebviewPanel(),this._panel.reveal(this._options.viewColumn)}})}set showRestorePromptAfterClose(t){this._options.showRestorePromptAfterClose=t}dispose(){this.dialogResult.resolve(void 0),super.dispose()}};var Bl=ge(require("vscode"));var T$e=require("os"),Ob=ge(require("vscode"));async function VH(r,e){let t=Ob.Uri.file((0,T$e.homedir)()),n=await Ob.window.showSaveDialog({defaultUri:await lH(t,"plan",c2),filters:{[qke]:[`${c2}`]}});return n&&(Ob.workspace.fs.writeFile(n,new TextEncoder().encode(e.sqlPlanContent)),vt("ExecutionPlan","SavePlan")),r}async function HH(r,e){let t=await Ob.workspace.openTextDocument({content:a3t(e.sqlPlanContent),language:"xml"});return Ob.window.showTextDocument(t),r}async function WH(r,e,t){return t.newQuery(e.query),r}async function KH(r,e){return{...r,executionPlanState:{...r.executionPlanState,totalCost:r.executionPlanState.totalCost+=e.addedCost}}}async function I$e(r,e,t,n){let i={...r.executionPlanState},s=performance.now();for(let o of t){let a={graphFileContent:o,graphFileType:`.${c2}`};try{i.executionPlanGraphs=i.executionPlanGraphs.concat((await e.getExecutionPlan(a)).graphs),i.loadState="loaded"}catch(c){return i.loadState="error",i.errorMessage=rt(c),r.executionPlanState=i,kr("ExecutionPlan","OpenExecutionPlan",c,!0),r}}return vt("ExecutionPlan","OpenExecutionPlan",{source:n},{numberOfPlans:r.executionPlanState.executionPlanGraphs.length,loadTimeInMs:performance.now()-s}),r.executionPlanState=i,r.executionPlanState.totalCost=o3t(r),r}function o3t(r){if(!r.executionPlanState.executionPlanGraphs)return r.executionPlanState.loadState="error",0;let e=0;for(let t of r.executionPlanState.executionPlanGraphs)e+=t.root.cost+t.root.subTreeCost;return e}function a3t(r){try{let e="",t=0,n=r.match(/<[^>]*>/g);for(let i of n)i.startsWith("</")&&t--,e+="	".repeat(t)+i+`
`,i.startsWith("<")&&!i.startsWith("</")&&!i.endsWith("/>")&&t++;return e}catch{return r}}var Tde=class r{static instance;store;constructor(){this.store=new Map}static getInstance(){return r.instance||(r.instance=new r),r.instance}set(e,t,n){let i=this.store.get(e);i?(i.set(t,n),this.store.set(e,i)):(i=new Map,i.set(t,n),this.store.set(e,i))}get(e,t){return this.store.get(e)?.get(t)}has(e,t){return this.store.get(e)?.has(t)??!1}delete(e,t){let n=this.store.get(e);if(n){let i=n.delete(t);return n.size===0&&this.store.delete(e),i}return!1}clear(){this.store.clear()}deleteMainKey(e){return this.store.delete(e)}getAll(e){return this.store.get(e)}},c3t=Tde.getInstance(),md=c3t;var YH=ge(require("vscode")),QH=class{async provideDocumentFormattingEdits(e){let t=new YH.Range(e.positionAt(0),e.positionAt(e.getText().length)),n=await l3t(e.getText());return[YH.TextEdit.replace(t,n)]}};async function l3t(r){try{let e=JSON.parse(r);return JSON.stringify(e,null,4)}catch(e){return console.error("Error formatting JSON:",e),r}}function R$e(r,e){let n=e.getConfiguration(fi,r)[JG],i;switch(n){case"current":i=e.activeTextEditor.viewColumn;break;case"end":i=Bl.ViewColumn.Three;break;default:e.isEditingSqlFile?(i=e.activeTextEditor.viewColumn,i===Bl.ViewColumn.One?i=Bl.ViewColumn.Two:i=Bl.ViewColumn.Three):i=Bl.ViewColumn.Two}return i}function XH(r,e){let t=r instanceof eI?r:r.getQueryResultWebviewViewController();r.onRequest(Zue.type,async n=>await t.getSqlOutputContentProvider().rowRequestHandler(n.uri,n.batchId,n.resultId,n.rowStart,n.numberOfRows)),r.onRequest(Xue.type,async n=>{if(!n.uri||!n.selectionData){console.warn(`Invalid setEditorSelection request.  Uri: ${n.uri}; selectionData: ${JSON.stringify(n.selectionData)}`);return}return await t.getSqlOutputContentProvider().editorSelectionRequestHandler(n.uri,n.selectionData)}),r.onRequest(Jue.type,async n=>(vt("QueryResult","SaveResults",{correlationId:e,format:n.format,selection:JSON.stringify(n.selection),origin:n.origin}),await t.getSqlOutputContentProvider().saveResultsRequestHandler(n.uri,n.batchId,n.resultId,n.format,n.selection))),r.onRequest($ue.type,async n=>(vt("QueryResult","CopyResults",{correlationId:e}),t.getSqlOutputContentProvider().sendToClipboard(n.uri,n.data,n.batchId,n.resultId,n.selection,n.headersFlag))),r.onRequest(Gue.type,async n=>(vt("QueryResult","CopyResults",{correlationId:e}),await t.getSqlOutputContentProvider().copyRequestHandler(n.uri,n.batchId,n.resultId,n.selection,!1))),r.onRequest(Hue.type,async n=>(vt("QueryResult","CopyResultsHeaders",{correlationId:e,format:void 0,selection:void 0,origin:void 0}),await t.getSqlOutputContentProvider().copyRequestHandler(n.uri,n.batchId,n.resultId,n.selection,!0))),r.onRequest(Vue.type,async n=>(vt("QueryResult","CopyHeaders",{correlationId:e}),await t.getSqlOutputContentProvider().copyHeadersRequestHandler(n.uri,n.batchId,n.resultId,n.selection))),r.onRequest(Wue.type,async n=>(vt("QueryResult","CopyResults",{correlationId:e,format:"csv"}),await t.getSqlOutputContentProvider().copyAsCsvRequestHandler(n.uri,n.batchId,n.resultId,n.selection,n.includeHeaders))),r.onRequest(Kue.type,async n=>(vt("QueryResult","CopyResults",{correlationId:e,format:"json"}),await t.getSqlOutputContentProvider().copyAsJsonRequestHandler(n.uri,n.batchId,n.resultId,n.selection,n.includeHeaders))),r.onRequest(zue.type,async n=>md.get(n.uri,"filter")),r.onRequest(Fue.type,async n=>{md.set(n.uri,"filter",n.filters)}),r.onRequest(Uue.type,async n=>{md.set(n.uri,"columnWidth",n.columnWidths)}),r.onRequest(jue.type,async n=>md.get(n.uri,"columnWidth")),r.onNotification(ede.type,async n=>{if(n.scrollLeft===0&&n.scrollTop===0)return;let i=md.get(n.uri,"scrollPosition");i||(i=new Map),i.set(n.gridId,{scrollTop:n.scrollTop,scrollLeft:n.scrollLeft}),md.set(n.uri,"scrollPosition",i)}),r.onRequest(tde.type,async n=>{let i=md.get(n.uri,"scrollPosition");if(i&&i.has(n.gridId))return i.get(n.gridId)}),r.onNotification(rde.type,async n=>{n.scrollTop!==0&&md.set(n.uri,"paneScrollPosition",{scrollTop:n.scrollTop})}),r.onRequest(nde.type,async n=>md.get(n.uri,"paneScrollPosition")??{scrollTop:0}),r.onRequest(Que.type,async n=>{(r instanceof Z0?r.getQueryResultWebviewViewController():r).updateSelectionSummaryStatusItem(n.summary)}),r.registerReducer("setResultTab",async(n,i)=>(n.tabStates.resultPaneTab=i.tabId,n)),r.registerReducer("setResultViewMode",async(n,i)=>(n.tabStates?n.tabStates.resultViewMode=i.viewMode:n.tabStates={resultPaneTab:"results",resultViewMode:i.viewMode},n)),r.registerReducer("openFileThroughLink",async(n,i)=>{let s=await Bl.workspace.openTextDocument({content:i.content,language:i.type});if(i.type==="json"){let a=await new QH().provideDocumentFormattingEdits(s),c=new Bl.WorkspaceEdit;c.set(s.uri,a),await Bl.workspace.applyEdit(c)}return Bl.window.showTextDocument(s),n}),r.registerReducer("saveExecutionPlan",async(n,i)=>await VH(n,i)),r.registerReducer("showPlanXml",async(n,i)=>await HH(n,i)),r.registerReducer("showQuery",async(n,i)=>await WH(n,i,t.getUntitledDocumentService())),r.registerReducer("updateTotalCost",async(n,i)=>await KH(n,i)),r.onRequest(Bue.type,async()=>{Bl.window.showInformationMessage(Uke)})}function x$e(r){return Object.keys(r).length}function Rde(r){return r.link?.text?`${r.message}${r.link.text}`:r.message}function JH(){return Bl.workspace.getConfiguration().get(dM)}function O$e(r){let e=0;for(let t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e+=Object.keys(r[t]).length);return e}var Z0=class extends Uo{constructor(t,n,i,s,o,a){super(t,n,"queryResult","queryResult",{resultSetSummaries:{},messages:[],tabStates:{resultPaneTab:"messages"},executionPlanState:{},fontSettings:{}},{title:o,viewColumn:i,preserveFocus:!0,iconPath:{dark:xde.Uri.joinPath(t.extensionUri,"media","revealQueryResult.svg"),light:xde.Uri.joinPath(t.extensionUri,"media","revealQueryResult.svg")}});this._viewColumn=i;this._uri=s;this._queryResultWebviewViewController=a;this.initialize()}_correlationId=(0,A$e.randomUUID)();async initialize(){this.registerRpcHandlers()}registerRpcHandlers(){this.onRequest(uL.type,async()=>"document"),XH(this,this._correlationId)}dispose(){super.dispose(),this._queryResultWebviewViewController.removePanel(this._uri)}revealToForeground(){this.panel.reveal(this._viewColumn,!0)}getQueryResultWebviewViewController(){return this._queryResultWebviewViewController}};var eI=class extends $H{constructor(t,n,i,s,o){super(t,n,"queryResult","queryResult",{resultSetSummaries:{},messages:[],tabStates:{resultPaneTab:"messages"},executionPlanState:{},fontSettings:{}});this.executionPlanService=i;this.untitledSqlDocumentService=s;this._sqlOutputContentProvider=o;this.initialize(),t.subscriptions.push(Ab.window.onDidChangeActiveTextEditor(a=>{let c=a?.document?.uri?.toString(!0);c&&this._queryResultStateMap.has(c)&&!this.hasPanel(c)?this.state=this.getQueryResultState(c):this.showSplashScreen()})),t.subscriptions.push(this.vscodeWrapper.onDidOpenTextDocument(a=>{let c=a.uri.toString(!0);this._queryResultStateMap.has(c)&&this._queryResultStateMap.delete(c)})),t.subscriptions.push(this.vscodeWrapper.onDidChangeConfiguration(a=>{if(a.affectsConfiguration("mssql.resultsFontFamily"))for(let[c,l]of this._queryResultStateMap)l.fontSettings.fontFamily=this.vscodeWrapper.getConfiguration(hn).get("resultsFontFamily"),this._queryResultStateMap.set(c,l);if(a.affectsConfiguration("mssql.resultsFontSize"))for(let[c,l]of this._queryResultStateMap)l.fontSettings.fontSize=this.vscodeWrapper.getConfiguration(hn).get("resultsFontSize")??this.vscodeWrapper.getConfiguration("editor").get("fontSize"),this._queryResultStateMap.set(c,l);if(a.affectsConfiguration("mssql.resultsGrid.autoSizeColumns"))for(let[c,l]of this._queryResultStateMap)l.autoSizeColumns=this.getAutoSizeColumnsConfig(),this._queryResultStateMap.set(c,l);if(a.affectsConfiguration("mssql.resultsGrid.inMemoryDataProcessingThreshold"))for(let[c,l]of this._queryResultStateMap)l.inMemoryDataProcessingThreshold=this.vscodeWrapper.getConfiguration(hn).get(lse),this._queryResultStateMap.set(c,l)}))}_queryResultStateMap=new Map;_queryResultWebviewPanelControllerMap=new Map;_correlationId=(0,N$e.randomUUID)();_selectionSummaryStatusBarItem=Ab.window.createStatusBarItem(Ab.StatusBarAlignment.Right,2);actualPlanStatuses=[];async initialize(){this.registerRpcHandlers()}get isOpenQueryResultsInTabByDefaultEnabled(){return this.vscodeWrapper.getConfiguration().get(dM)}get isDefaultQueryResultToDocumentDoNotShowPromptEnabled(){return this.vscodeWrapper.getConfiguration().get(cse)}get shouldShowDefaultQueryResultToDocumentPrompt(){return!this.isOpenQueryResultsInTabByDefaultEnabled&&!this.isDefaultQueryResultToDocumentDoNotShowPromptEnabled}registerRpcHandlers(){this.onRequest(Yue.type,async t=>{if(this.createPanelController(t.uri),this.shouldShowDefaultQueryResultToDocumentPrompt){let n=await this.vscodeWrapper.showInformationMessage(jke,EG,Oie),i;switch(n){case EG:i="alwaysShowInNewTab";break;case Oie:i="keepInQueryPane";break;default:i="dismissed"}vt("General","OpenQueryResultsInTabByDefaultPrompt",{response:i}),n===EG&&await this.vscodeWrapper.getConfiguration().update(dM,!0,Ab.ConfigurationTarget.Global),await this.vscodeWrapper.getConfiguration().update(cse,!0,Ab.ConfigurationTarget.Global)}}),this.onRequest(uL.type,async()=>"panel"),XH(this,this._correlationId)}showSplashScreen(){this.state={resultSetSummaries:{},messages:[],tabStates:void 0,isExecutionPlan:!1,executionPlanState:{},fontSettings:{fontSize:this.getFontSizeConfig(),fontFamily:this.getFontFamilyConfig()},autoSizeColumns:this.getAutoSizeColumnsConfig(),inMemoryDataProcessingThreshold:this.getInMemoryDataProcessingThresholdConfig()}}async createPanelController(t){let n=R$e(t,this.vscodeWrapper);if(this._queryResultWebviewPanelControllerMap.has(t)){this._queryResultWebviewPanelControllerMap.get(t).revealToForeground();return}let i=new Z0(this._context,this.vscodeWrapper,n,t,this._queryResultStateMap.get(t).title,this);i.state=this.getQueryResultState(t),i.revealToForeground(),this._queryResultWebviewPanelControllerMap.set(t,i),this.showSplashScreen()}addQueryResultState(t,n,i,s){let o={resultSetSummaries:{},messages:[],tabStates:{resultPaneTab:"messages",resultViewMode:this.getDefaultViewModeConfig()},uri:t,title:n,isExecutionPlan:i,actualPlanEnabled:s,...i&&{executionPlanState:{loadState:"loading",executionPlanGraphs:[],totalCost:0,xmlPlans:{}}},fontSettings:{fontSize:this.getFontSizeConfig(),fontFamily:this.getFontFamilyConfig()},autoSizeColumns:this.getAutoSizeColumnsConfig(),inMemoryDataProcessingThreshold:this.getInMemoryDataProcessingThresholdConfig()};this._queryResultStateMap.set(t,o)}getAutoSizeColumnsConfig(){return this.vscodeWrapper.getConfiguration(hn).get(dqe)}getInMemoryDataProcessingThresholdConfig(){return this.vscodeWrapper.getConfiguration(hn).get(lse)}getFontSizeConfig(){return this.vscodeWrapper.getConfiguration(hn).get("resultsFontSize")??this.vscodeWrapper.getConfiguration("editor").get("fontSize")}getFontFamilyConfig(){return this.vscodeWrapper.getConfiguration(hn).get("resultsFontFamily")}getDefaultViewModeConfig(){let t=this.vscodeWrapper.getConfiguration(hn).get("defaultQueryResultsViewMode");return que[t]??"grid"}setQueryResultState(t,n){this._queryResultStateMap.set(t,n)}deleteQueryResultState(t){this._queryResultStateMap.delete(t)}updatePanelState(t){this._queryResultWebviewPanelControllerMap.has(t)&&this._queryResultWebviewPanelControllerMap.get(t).updateState(this.getQueryResultState(t))}async removePanel(t){this._queryResultWebviewPanelControllerMap.has(t)&&(this._queryResultWebviewPanelControllerMap.delete(t),await this._sqlOutputContentProvider.cleanupRunner(t))}hasPanel(t){return this._queryResultWebviewPanelControllerMap.has(t)}revealPanel(t){this.hasPanel(t)&&this._queryResultWebviewPanelControllerMap.get(t).revealToForeground()}getQueryResultState(t){var n=this._queryResultStateMap.get(t);if(!n){let i=new Error(`No query result state found for uri ${t}`);throw kr("QueryResult","GetQueryResultState",i,!1),i}return n}getSqlOutputContentProvider(){return this._sqlOutputContentProvider}getExecutionPlanService(){return this.executionPlanService}setUntitledDocumentService(t){this.untitledSqlDocumentService=t}getUntitledDocumentService(){return this.untitledSqlDocumentService}async copyAllMessagesToClipboard(t){let n=t?this.getQueryResultState(t)?.messages?.map(s=>Rde(s)):this.state?.messages?.map(s=>Rde(s));if(!n)return;let i=n.join(`
`);await this.vscodeWrapper.clipboardWriteText(i)}getNumExecutionPlanResultSets(t,n){let i=x$e(t);if(!n)return i;let s=0;return Object.values(t).forEach(o=>{Object.values(o).forEach(a=>{a.columnInfo[0].columnName===l2&&s++})}),s}updateSelectionSummaryStatusItem(t){t.removeSelectionStats?(this._selectionSummaryStatusBarItem.text="",this._selectionSummaryStatusBarItem.hide()):(t.average?(this._selectionSummaryStatusBarItem.text=CT.numericSelectionSummary(t.average,t.count,t.sum),this._selectionSummaryStatusBarItem.tooltip=CT.numericSelectionSummaryTooltip(t.average,t.count,t.distinctCount,t.max,t.min,t.nullCount,t.sum)):(this._selectionSummaryStatusBarItem.text=CT.nonNumericSelectionSummary(t.count,t.distinctCount,t.nullCount),this._selectionSummaryStatusBarItem.tooltip=this._selectionSummaryStatusBarItem.text),this._selectionSummaryStatusBarItem.show())}};var m3t=M$e().pd,Ode=class{constructor(e){this.queryRunner=e;this.listeners=[]}listeners},Ade=class{shortcuts;messagesDefaultOpen;resultsFontSize;resultsFontFamily},ZH=class{constructor(e,t,n,i,s){this._context=e;this._statusView=t;this._vscodeWrapper=n;this._untitledSqlDocumentService=i;this._executionPlanService=s;n||(this._vscodeWrapper=new gi),this._queryResultWebviewController=new eI(this._context,this._vscodeWrapper,this._executionPlanService,this._untitledSqlDocumentService,this),this._context.subscriptions.push(Ca.window.registerWebviewViewProvider("queryResult",this._queryResultWebviewController)),this._context.subscriptions.push(Ca.commands.registerCommand(sLe,async o=>{let a=o.uri;await this._queryResultWebviewController.copyAllMessagesToClipboard(a)})),this._context.subscriptions.push(Ca.commands.registerCommand(MLe,async o=>{this.onToggleActualPlan(!0)})),this._context.subscriptions.push(Ca.commands.registerCommand(kLe,async o=>{this.onToggleActualPlan(!1)})),this._context.subscriptions.push(Ca.commands.registerCommand(iLe,o=>{this.revealQueryResult(o.toString(!0))}))}_queryResultsMap=new Map;_queryResultWebviewController;_actualPlanStatuses=[];_stateUpdateTimers=new Map;setQueryResultWebviewController(e){this._queryResultWebviewController=e}rowRequestHandler(e,t,n,i,s){return this._queryResultsMap.get(e).queryRunner.getRows(i,s,t,n).then(o=>o.resultSubset)}configRequestHandler(e){let t=this._queryResultsMap.get(e).queryRunner.uri,n=this._vscodeWrapper.getConfiguration(fi,t),i=new Ade;for(let s in ZG)i[s]=n[s];return Promise.resolve(i)}saveResultsRequestHandler(e,t,n,i,s){new rL().onSaveResults(e,t,n,i,s)}openLinkRequestHandler(e,t,n){this.openLink(e,t,n)}copyHeadersRequestHandler(e,t,n,i){this._queryResultsMap.get(e).queryRunner.copyHeaders(t,n,i)}copyRequestHandler(e,t,n,i,s){this._queryResultsMap.get(e).queryRunner.copyResults(i,t,n,s)}sendToClipboard(e,t,n,i,s,o){this._queryResultsMap.get(e).queryRunner.exportCellsToClipboard(t,n,i,s,o)}copyAsCsvRequestHandler(e,t,n,i,s){this._queryResultsMap.get(e).queryRunner.copyResultsAsCsv(i,t,n,s)}copyAsJsonRequestHandler(e,t,n,i,s){this._queryResultsMap.get(e).queryRunner.copyResultsAsJson(i,t,n,s)}editorSelectionRequestHandler(e,t){this._queryResultsMap.get(e).queryRunner.setEditorSelection(t)}showErrorRequestHandler(e){this._vscodeWrapper.showErrorMessage(e)}showWarningRequestHandler(e){this._vscodeWrapper.showWarningMessage(e)}isRunningQuery(e){return this._queryResultsMap.has(e)?this._queryResultsMap.get(e).queryRunner.isExecutingQuery:!1}async runQuery(e,t,n,i,s,o){await this.runQueryCallback(e||this._statusView,t,i,async a=>{a&&await a.runQuery(n,{includeActualExecutionPlanXml:s?.includeActualExecutionPlanXml??this._actualPlanStatuses.includes(t),includeEstimatedExecutionPlanXml:s?.includeEstimatedExecutionPlanXml??!1},o)},s)}async runCurrentStatement(e,t,n,i){await this.runQueryCallback(e||this._statusView,t,i,async s=>{s&&await s.runStatement(n.startLine,n.startColumn)})}async runQueryCallback(e,t,n,i,s){let o=await this.createQueryRunner(e||this._statusView,t,n);this._queryResultWebviewController.addQueryResultState(t,n,s?.includeEstimatedExecutionPlanXml||this._actualPlanStatuses.includes(t)||s?.includeActualExecutionPlanXml,this._actualPlanStatuses.includes(t)),o&&i(o)}createQueryRunner(e,t,n){let i;if(this._queryResultsMap.has(t)){let s=this._queryResultsMap.get(t).queryRunner;if(s.isExecutingQuery){this._vscodeWrapper.showInformationMessage(wDe);return}i=s,i.resetHasCompleted()}else{i=new eL(t,n,e||this._statusView);let s=i.onStart(async f=>{let y=this._queryResultWebviewController.getQueryResultState(i.uri);y.tabStates.resultPaneTab="messages",y.isExecutionPlan=!1,JH()&&await this._queryResultWebviewController.createPanelController(i.uri),this.updateWebviewState(i.uri,y),vt("QueryResult","OpenQueryResult",{defaultLocation:JH()?"tab":"pane"})}),o=i.onResultSetAvailable(async f=>{let y=this._queryResultWebviewController.getQueryResultState(i.uri),v=f.batchId,_=f.id;y.resultSetSummaries[v]||(y.resultSetSummaries[v]={}),y.resultSetSummaries[v][_]=f,O$e(y.resultSetSummaries)===1&&(y.tabStates.resultPaneTab="results"),this.updateWebviewState(i.uri,y)}),a=i.onResultSetUpdated(async f=>{let y=this._queryResultWebviewController.getQueryResultState(i.uri),v=f.batchId,_=f.id;y.resultSetSummaries[v]||(y.resultSetSummaries[v]={}),y.resultSetSummaries[v][_]=f,this.updateWebviewState(i.uri,y)}),c=i.onResultSetComplete(async f=>{let y=this._queryResultWebviewController.getQueryResultState(i.uri),v=f.batchId,_=f.id;y.resultSetSummaries[v]||(y.resultSetSummaries[v]={}),y.resultSetSummaries[v][_]=f,this.updateWebviewState(i.uri,y)}),l=i.onBatchStart(async f=>{let y=new Date().toLocaleTimeString();f.executionElapsed&&f.executionEnd&&(y=new Date(f.executionStart).toLocaleTimeString());let v={message:EDe,selection:f.selection,isError:!1,time:y,link:{text:TDe(f.selection.startLine+1),uri:i.uri}};this._queryResultWebviewController.getQueryResultState(i.uri).messages.push(v),this.scheduleThrottledUpdate(i.uri)}),u=i.onMessage(async f=>{this._queryResultWebviewController.getQueryResultState(i.uri).messages.push(f),this.scheduleThrottledUpdate(i.uri)}),d=i.onComplete(async f=>{let{totalMilliseconds:y,hasError:v,isRefresh:_}=f;_||this._vscodeWrapper.executeCommand(DG,i.uri,v);let C=this._queryResultWebviewController.getQueryResultState(i.uri);C.messages.push({message:uke(y),isError:!1});let P;v?P="messages":C.isExecutionPlan?P="executionPlan":Object.keys(C.resultSetSummaries)?.length>0?P="results":P="messages",C.tabStates.resultPaneTab=P,this.updateWebviewState(i.uri,C)}),p=i.onExecutionPlan(async f=>{let y=await this._executionPlanService.getExecutionPlan({graphFileContent:f.xml,graphFileType:"xml"}),v=this._queryResultWebviewController.getQueryResultState(f.uri),_=v.executionPlanState.executionPlanGraphs;_.push(...y.graphs);let C=v.executionPlanState.xmlPlans;C[`${f.batchId},${f.resultId}`]=f.xml,v.isExecutionPlan=!0,v.executionPlanState={errorMessage:y.errorMessage,executionPlanGraphs:_,loadState:"loaded",totalCost:_.reduce((P,w)=>P+w.root.cost+w.root.subTreeCost,0),xmlPlans:C},this.updateWebviewState(i.uri,v)}),m=new Ode(i);m.listeners.push(s,o,a,c,l,u,d,p),this._queryResultsMap.set(t,m)}return i}async cancelQuery(e){let t=this,n;if(typeof e=="string"?this._queryResultsMap.has(e)&&(n=this._queryResultsMap.get(e).queryRunner):n=e,n===void 0||!n.isExecutingQuery){t._vscodeWrapper.showInformationMessage(RDe);return}this._statusView.cancelingQuery(n.uri);try{await n.cancel()}catch(i){t._vscodeWrapper.showErrorMessage(IDe(rt(i)))}}scheduleThrottledUpdate(e,t=100){if(this._stateUpdateTimers.has(e))return;let n=setTimeout(()=>{try{let i=this._queryResultWebviewController.getQueryResultState(e);this.updateWebviewState(e,i)}finally{this._stateUpdateTimers.delete(e)}},t);this._stateUpdateTimers.set(e,n)}onUntitledFileSaved(e,t){let n=decodeURIComponent(e);if(!this._queryResultsMap.has(n))return;let i=decodeURIComponent(t);this._queryResultsMap.set(i,this._queryResultsMap.get(n)),this._queryResultsMap.delete(n)}async updateQueryRunnerUri(e,t){let n=this.getQueryRunner(e);n&&n.updateQueryRunnerUri(e,t);let i=this._queryResultWebviewController.getQueryResultState(e);i&&(i.uri=t,await this._queryResultWebviewController.sendNotification(dL.type(),i),this._queryResultWebviewController.setQueryResultState(t,i),this._queryResultWebviewController.deleteQueryResultState(e))}async onDidCloseTextDocument(e){let t=e.uri.toString(!0);for(let[n,i]of this._queryResultsMap.entries())t===n&&await this.cleanupRunner(n);this._actualPlanStatuses.includes(t)&&(this._actualPlanStatuses=this._actualPlanStatuses.filter(n=>n!==t),this.updateActualPlanContext())}updateActualPlanContext(){Ca.commands.executeCommand("setContext","mssql.executionPlan.urisWithActualPlanEnabled",this._actualPlanStatuses)}async cleanupRunner(e){let t=this._queryResultsMap.get(e);if(t){let n=this._stateUpdateTimers.get(e);n&&(clearTimeout(n),this._stateUpdateTimers.delete(e)),t.queryRunner.isExecutingQuery?await this.cancelQuery(t.queryRunner):(t.queryRunner.dispose(),t.listeners?.forEach(i=>i.dispose())),this._queryResultsMap.delete(e)}}onToggleActualPlan(e){let t=this._vscodeWrapper.activeTextEditorUri,n=this._actualPlanStatuses;e&&!n.includes(t)?n.push(t):this._actualPlanStatuses=n.filter(i=>i!=t),this.updateActualPlanContext()}openLink(e,t,n){let i=this;if(n==="xml")try{e=m3t.xml(e)}catch{}else if(n==="json"){let s;try{s=JSON.parse(e)}catch{}s&&(e=JSON.stringify(s,void 0,4))}Ca.workspace.openTextDocument({language:n}).then(s=>{Ca.window.showTextDocument(s,2,!1).then(o=>{o.edit(a=>{a.insert(new Ca.Position(0,0),e)}).then(a=>{a||i._vscodeWrapper.showErrorMessage(oMe)})},o=>{i._vscodeWrapper.showErrorMessage(o)})},s=>{i._vscodeWrapper.showErrorMessage(s)})}getQueryRunner(e){if(this._queryResultsMap.has(e))return this._queryResultsMap.get(e).queryRunner}revealQueryResult(e){if(JH()){this._queryResultWebviewController.revealPanel(e);return}this._queryResultWebviewController.getQueryResultState(e)&&!this._queryResultWebviewController.hasPanel(e)?Ca.commands.executeCommand("queryResult.focus",{preserveFocus:!0}):this._queryResultWebviewController.revealPanel(e)}toggleSqlCmd(e){let t=this.getQueryRunner(e);return t?t.toggleSqlCmd().then(n=>n):Promise.resolve(!1)}newResultPaneViewColumn(e){let n=this._vscodeWrapper.getConfiguration(fi,e)[JG],i;switch(n){case"current":i=this._vscodeWrapper.activeTextEditor.viewColumn;break;case"end":i=Ca.ViewColumn.Three;break;default:this._vscodeWrapper.activeTextEditor.viewColumn===Ca.ViewColumn.One?i=Ca.ViewColumn.Two:i=Ca.ViewColumn.Three}return i}set setVscodeWrapper(e){this._vscodeWrapper=e}get getResultsMap(){return this._queryResultsMap}set setResultsMap(e){this._queryResultsMap=e}updateWebviewState(e,t){let n=Ca.window.activeTextEditor?.document.uri.toString(!0);this._queryResultWebviewController.setQueryResultState(e,t),this._queryResultWebviewController.hasPanel(e)?this._queryResultWebviewController.updatePanelState(e):n===e&&(this._queryResultWebviewController.state=t),n===e&&this.revealQueryResult(e)}};var aVe=ge(require("vscode"));var pl=ge(require("vscode"));var eW=ge(Vi()),Nde;(e=>e.type=new eW.RequestType("objectexplorer/createsession"))(Nde||={});var Dde;(e=>e.type=new eW.NotificationType("objectexplorer/sessioncreated"))(Dde||={});var tW=ge(Vi());var Mde;(e=>e.type=new tW.RequestType("objectexplorer/expand"))(Mde||={});var kde;(e=>e.type=new tW.NotificationType("objectexplorer/expandCompleted"))(kde||={});var k$e=ge(Vi());var Lde;(e=>e.type=new k$e.RequestType("objectexplorer/refresh"))(Lde||={});var rW=ge(Vi());var qde;(e=>e.type=new rW.RequestType("objectexplorer/closesession"))(qde||={});var h3t;(e=>e.type=new rW.NotificationType("objectexplorer/sessiondisconnected"))(h3t||={});var Db=ge(require("vscode"));var L$e=ge(require("vscode")),Nb=class{static _extensionUri;static initialize(e){this._extensionUri=e}static getIcon(...e){return L$e.Uri.joinPath(this._extensionUri,"media",...e)}};var Sn=class r{static iconPath(e){return Nb.getIcon("objectTypes",`${e}.svg`)}static getNodeUri(e){let t;return e instanceof hd?t=e.connectionProfile:e.parentNode&&(t=e.parentNode.connectionProfile),t===void 0?"":r.getNodeUriFromProfile(t)}static getNodeUriFromProfile(e){let t;return e.connectionString?(t=e.connectionString.split(";").filter(i=>!i.toLowerCase().includes("password")).join(";"),t):(e.authenticationType===Ya?t=`${e.server}_${e.database}_${e.user}_${e.profileName}`:t=`${e.server}_${e.database}_${e.profileName}`,t)}static getDatabaseName(e){if(e.nodeType===NG||e.nodeType===tLe)return e.connectionProfile.database;for(;e;){if(e.metadata&&e.metadata.metadataTypeName===tqe)return e.metadata.name;e=e.parentNode}return Jd}static isFirewallError(e){return e===40615}static getQualifiedName(e){let t="";if(e.metadata)switch(e.metadata.metadataTypeName){case"Table":case"StoredProcedure":case"View":case"UserDefinedFunction":t=`[${e.metadata.schema}].[${e.metadata.name}]`;break;default:t=`[${e.metadata.name}]`;break}return t}};var hd=class r extends Db.TreeItem{_nodePath;_nodeStatus;_nodeType;_nodeSubType;_isLeaf;_errorMessage;_sessionId;_parentNode;_connectionProfile;_metadata;_filterableProperties;_filters;_originalLabel;_loadingLabel;shouldRefresh=!1;constructor(e,t,n,i,s,o,a,c,l,u,d,p,m){super(e,n),this._originalLabel=e,this.context=t,this._nodePath=i,this._nodeStatus=s,this._nodeType=o,this._sessionId=a,this._parentNode=l,this._connectionProfile=c,this._filterableProperties=u,this._metadata=p,this._filters=m,this._nodeSubType=d,this._nodeSubType?this.iconPath=Sn.iconPath(`${this._nodeType}_${this._nodeSubType}`):this.iconPath=Sn.iconPath(this.nodeType),this.id=this.generateId()}generateId(){return`${this._connectionProfile?.id}-${this._nodePath}-${ec()}`}static fromNodeInfo(e,t,n,i,s,o){let a=o||e.nodeType;return new r(s||e.label,{type:a,filterable:e.filterableProperties?.length>0,hasFilters:!1,subType:e.objectType},e.isLeaf?Db.TreeItemCollapsibleState.None:a===NG?Db.TreeItemCollapsibleState.Expanded:Db.TreeItemCollapsibleState.Collapsed,e.nodePath,e.nodeStatus,a,t,i,n,e.filterableProperties,e.nodeSubType,e.metadata)}get nodePath(){return this._nodePath}get nodeStatus(){return this._nodeStatus}get nodeType(){return this._nodeType}get sessionId(){return this._sessionId}get nodeSubType(){return this._nodeSubType}get isLeaf(){return this._isLeaf}get errorMessage(){return this._errorMessage}get parentNode(){return this._parentNode}get loadingLabel(){return this._loadingLabel}get connectionProfile(){if(this._connectionProfile)return{...this._connectionProfile}}get metadata(){return this._metadata}get filterableProperties(){return this._filterableProperties}get context(){return this._convertToTreeNodeContext(this.contextValue)}get filters(){return this._filters}set nodePath(e){this._nodePath=e}set nodeStatus(e){this._nodeStatus=e}set nodeType(e){this._nodeType=e,this._updateContextValue()}set nodeSubType(e){this._nodeSubType=e}set isLeaf(e){this._isLeaf=e}set errorMessage(e){this._errorMessage=e}set sessionId(e){this._sessionId=e}set parentNode(e){this._parentNode=e}set filterableProperties(e){this._filterableProperties=e,this._updateContextValue()}set filters(e){this._filters=e,this._updateContextValue(),this.label=e.length>0?Db.l10n.t("{0} (filtered)",this._originalLabel):this._originalLabel}set context(e){this.contextValue=this._convertToContextValue(e)}set loadingLabel(e){this._loadingLabel=e}updateConnectionProfile(e){this._connectionProfile=e}updateMetadata(e){this._metadata=e}_updateContextValue(){let e=this.context;e.filterable=this.filterableProperties?.length>0,e.hasFilters=this.filters?.length>0,this.context=e}_convertToTreeNodeContext(e){let t=e.split(","),n={filterable:!1,hasFilters:!1,type:void 0,subType:void 0};return t.forEach(i=>{let s=i.split("=");n[s[0]]=s[1]}),n}_convertToContextValue(e){if(e===void 0)return"";let t="";return Object.keys(e).forEach(n=>{t+=n+"="+e[n]+","}),t}};var iW=ge(require("vscode"));var nW=class extends iW.TreeItem{constructor(){super(Tie,iW.TreeItemCollapsibleState.None),this.command={title:Tie,command:ed},this.iconPath={light:Sn.iconPath("add_light"),dark:Sn.iconPath("add_dark")}}};var oW=ge(require("vscode"));var sW=class extends oW.TreeItem{constructor(t){super(OT,oW.TreeItemCollapsibleState.None);this._parentNode=t;this.command={title:OT,command:MG,arguments:[this]}}get parentNode(){return this._parentNode}};var aW=ge(require("vscode"));var pL=class extends aW.TreeItem{constructor(t){super(OT,aW.TreeItemCollapsibleState.None);this._parentNode=t;this.command={title:OT,command:kG,arguments:[this]}}get parentNode(){return this._parentNode}};var vi=class{static get input(){return"input"}static get password(){return"password"}static get list(){return"list"}static get confirm(){return"confirm"}static get checkbox(){return"checkbox"}static get expand(){return"expand"}};var Os=class r{server;database;user;password;email;accountId;tenantId;port;authenticationType;azureAccountToken;expiresOn;encrypt;trustServerCertificate;hostNameInCertificate;persistSecurityInfo;secureEnclaves;columnEncryptionSetting;attestationProtocol;enclaveAttestationUrl;connectTimeout;commandTimeout;connectRetryCount;connectRetryInterval;applicationName;workstationId;applicationIntent;currentLanguage;pooling;maxPoolSize;minPoolSize;loadBalanceTimeout;replication;attachDbFilename;failoverPartner;multiSubnetFailover;multipleActiveResultSets;packetSize;typeSystemVersion;connectionString;containerName;static createConnectionDetails(e){let t={options:{}};return e.id&&(t.options.id=e.id),t.options.connectionString=e.connectionString,t.options.server=e.server,e.port&&t.options.server.indexOf(",")===-1&&(t.options.server+=","+e.port),t.options.database=e.database,t.options.databaseDisplayName=e.database,t.options.user=e.user||e.email,t.options.password=e.password,t.options.authenticationType=e.authenticationType,t.options.email=e.email,t.options.accountId=e.accountId,t.options.tenantId=e.tenantId,t.options.azureAccountToken=e.azureAccountToken,t.options.expiresOn=e.expiresOn,t.options.encrypt=e.encrypt,t.options.trustServerCertificate=e.trustServerCertificate,t.options.hostNameInCertificate=e.hostNameInCertificate,t.options.persistSecurityInfo=e.persistSecurityInfo,t.options.secureEnclaves=e.secureEnclaves,t.options.columnEncryptionSetting=e.columnEncryptionSetting,t.options.attestationProtocol=e.attestationProtocol,t.options.enclaveAttestationUrl=e.enclaveAttestationUrl,t.options.connectTimeout=e.connectTimeout,t.options.commandTimeout=e.commandTimeout,t.options.connectRetryCount=e.connectRetryCount,t.options.connectRetryInterval=e.connectRetryInterval,t.options.applicationName=e.applicationName,t.options.workstationId=e.workstationId,t.options.applicationIntent=e.applicationIntent,t.options.currentLanguage=e.currentLanguage,t.options.pooling=e.pooling,t.options.maxPoolSize=e.maxPoolSize,t.options.minPoolSize=e.minPoolSize,t.options.loadBalanceTimeout=e.loadBalanceTimeout,t.options.replication=e.replication,t.options.attachDbFilename=e.attachDbFilename,t.options.failoverPartner=e.failoverPartner,t.options.multiSubnetFailover=e.multiSubnetFailover,t.options.multipleActiveResultSets=e.multipleActiveResultSets,t.options.packetSize=e.packetSize,t.options.typeSystemVersion=e.typeSystemVersion,t.options.containerName=e.containerName,t}static createConnectionInfo(e){let t=e.options||{};return{connectionString:t.connectionString,server:t.server,port:t.server?.includes(",")?parseInt(t.server.split(",")[1]):void 0,database:t.database,user:t.user,password:t.password,authenticationType:t.authenticationType,azureAccountToken:t.azureAccountToken,encrypt:t.encrypt,trustServerCertificate:t.trustServerCertificate,hostNameInCertificate:t.hostNameInCertificate,persistSecurityInfo:t.persistSecurityInfo,secureEnclaves:t.secureEnclaves,columnEncryptionSetting:t.columnEncryptionSetting,attestationProtocol:t.attestationProtocol,enclaveAttestationUrl:t.enclaveAttestationUrl,connectTimeout:t.connectTimeout,commandTimeout:t.commandTimeout,connectRetryCount:t.connectRetryCount,connectRetryInterval:t.connectRetryInterval,applicationName:t.applicationName,workstationId:t.workstationId,applicationIntent:t.applicationIntent,currentLanguage:t.currentLanguage,pooling:t.pooling,maxPoolSize:t.maxPoolSize,minPoolSize:t.minPoolSize,loadBalanceTimeout:t.loadBalanceTimeout,replication:t.replication,attachDbFilename:t.attachDbFilename,failoverPartner:t.failoverPartner,multiSubnetFailover:t.multiSubnetFailover,multipleActiveResultSets:t.multipleActiveResultSets,packetSize:t.packetSize,typeSystemVersion:t.typeSystemVersion,email:t.email,accountId:t.accountId,tenantId:t.tenantId,expiresOn:t.expiresOn,containerName:t.containerName}}static removeUndefinedProperties(e){let t=Object.assign({},e);for(let n of Object.keys(t))(t[n]===void 0||t[n]===null)&&delete t[n];return t}static async ensureRequiredPropertiesSet(e,t,n,i,s,o,a,c=!0){let l=await r.getRequiredCredentialValuesQuestions(e,!1,n,o,a),u=Object.assign({},e);return l.push({type:vi.confirm,name:Lv,message:Lv,shouldPrompt:d=>e.connectionString||!c?!1:t?r.isPasswordBasedCredential(e)&&typeof e.savePassword>"u"&&i:r.isPasswordBasedCredential(e)&&typeof e.savePassword>"u",onAnswered:d=>{e.savePassword=d}}),s.prompt(l).then(async d=>{if(d){if(t){let p=e;c&&p.savePassword&&(!i||p.emptyPasswordInput)?await o.removeProfile(p).then(async()=>{await o.saveProfile(p)}):(p.authenticationType!==u.authenticationType||p.savePassword!==u.savePassword||p.password!==u.password)&&c&&await o.removeProfile(p)&&await o.saveProfile(p)}return e}else return})}static async getRequiredCredentialValuesQuestions(e,t,n,i,s){let o=r.getAuthenticationTypesChoice(),a=()=>!!e.connectionString;return[{type:vi.input,name:vG,message:vG,placeHolder:qDe,default:s?s.server:void 0,shouldPrompt:l=>oi(e.server),validate:l=>r.validateRequiredString(vG,l),onAnswered:l=>r.processServerOrConnectionString(l,e)},{type:vi.input,name:sie,message:sie,placeHolder:zDe,default:s?s.database:void 0,shouldPrompt:l=>!a()&&t,onAnswered:l=>e.database=l},{type:vi.expand,name:jDe,message:FDe,choices:o,shouldPrompt:l=>!a()&&oi(e.authenticationType)&&o.length>1,validate:l=>{if(l===ip(1)&&Mn.instance.getServiceVersion()===1)return PG;if(l===ip(3))return},onAnswered:l=>{e.authenticationType=l}},{type:vi.input,name:SG,message:SG,placeHolder:sMe,default:s?s.user:void 0,shouldPrompt:l=>!a()&&r.shouldPromptForUser(e),validate:l=>r.validateRequiredString(SG,l),onAnswered:l=>e.user=l},{type:vi.password,name:yg,message:yg,placeHolder:CG,shouldPrompt:l=>!a()&&r.shouldPromptForPassword(e),validate:l=>{if(n)return r.validateRequiredString(yg,l)},onAnswered:l=>{e&&(e.password=l,typeof e<"u"&&(e.emptyPasswordInput=oi(e.password)))},default:async l=>{if(l.connectionString){if(l.savePassword){let u=await i.lookupPassword(l,!0);l.connectionString=u}}else return await i.lookupPassword(l)}}]}static processServerOrConnectionString(e,t){["data source=","server=","address=","addr=","network address="].some(s=>e.toLowerCase().indexOf(s)!==-1)?t.connectionString=e:t.server=e}static shouldPromptForUser(e){return oi(e.user)&&r.isPasswordBasedCredential(e)}static shouldPromptForPassword(e){let t=e.emptyPasswordInput&&e.savePassword;return oi(e.password)&&r.isPasswordBasedCredential(e)&&!t}static isPasswordBasedCredential(e){let t=e.authenticationType;return typeof e.authenticationType>"u"&&(t=ip(2)),t===ip(2)}static isPasswordBasedConnectionString(e){let t=e.toLowerCase();return(t.includes("user")||t.includes("uid")||t.includes("userid"))&&(t.includes("password")||t.includes("pwd"))&&!t.includes("Integrated Security")}static validateRequiredString(e,t){if(oi(t))return e+fMe}static getAuthenticationTypesChoice(){return[{name:BDe,value:ip(2)},{name:UDe,value:ip(1)},{name:GDe,value:ip(3)}]}};var zde=ge(require("vscode"));var Gl=class r extends Os{profileName;id;groupId;savePassword;emptyPasswordInput;azureAuthType;accountStore;constructor(e){super(),e&&(this.accountId=e.accountId,this.tenantId=e.tenantId,this.authenticationType=e.authenticationType,this.azureAccountToken=e.azureAccountToken,this.expiresOn=e.expiresOn,this.database=e.database,this.email=e.email,this.user=e.email,this.password=e.password,this.server=e.server)}static async createProfile(e,t,n,i,s,o){let a=new r,c=Os.getAuthenticationTypesChoice();c.length===1&&(a.authenticationType=c[0].value);let l=await r.getAccountChoices(s),u;l.unshift({name:KD,value:"addAccount"});let d=[],p=await Os.getRequiredCredentialValuesQuestions(a,!0,!1,t,o);if(p.push({type:vi.confirm,name:Lv,message:Lv,shouldPrompt:()=>!a.connectionString&&Os.isPasswordBasedCredential(a),onAnswered:f=>a.savePassword=f},{type:vi.expand,name:_G,message:wT,choices:l,shouldPrompt:()=>a.isAzureActiveDirectory(),onAnswered:async f=>{if(u=f,f!=="addAccount"){let y=f;a.accountId=y?.key.id,d.push(...y?.properties?.tenants.map(v=>({name:v.displayName,value:v}))),d.length===1&&(a.tenantId=d[0].value.id);try{a=await i.refreshTokenWrapper(a,s,u,hs.resources.databaseResource)}catch(v){console.log(`Refreshing tokens failed: ${v}`)}}else try{a=await i.populateAccountProperties(a,s,hs.resources.databaseResource),a&&zde.window.showInformationMessage(bG(a.email))}catch(y){console.error(`Could not add account: ${y}`),zde.window.showErrorMessage(y)}}},{type:vi.expand,name:TT,message:ET,choices:d,default:o?o.tenantId:void 0,shouldPrompt:()=>a.isAzureActiveDirectory()&&d.length>1&&!zv(),onAnswered:f=>{a.tenantId=f.id}},{type:vi.input,name:mie,message:mie,placeHolder:xn.profileNameTooltip,default:o?o.profileName:void 0,onAnswered:f=>{a.profileName=f||void 0}}),await e.prompt(p,!0)&&a.isValidProfile())return vt("ConnectionPrompt","CreateConnectionResult",{authenticationType:a.authenticationType,passwordSaved:a.savePassword?"true":"false"}),r.addIdIfMissing(a),a}static addIdIfMissing(e){return e&&e.id===void 0?(e.id=ec(),!0):!1}isValidProfile(){return this.connectionString?!0:this.authenticationType?this.authenticationType===Zd[1]||this.authenticationType===Zd[3]?Ig(this.server):Ig(this.server)&&Ig(this.user):!1}isAzureActiveDirectory(){return this.authenticationType===Zd[3]}static getAzureAuthChoices(){return[{name:$De,value:poe(0)},{name:VDe,value:poe(1)}]}static async getAccountChoices(e){let t=await e.getAccounts(),n=[];if(t.length>0)for(let i of t)n.push({name:i?.displayInfo?.displayName,value:i});return n}};var q$e=ge(Vi()),Fde;(e=>e.type=new q$e.RequestType("objectexplorer/getsessionid"))(Fde||={});var mL=ge(require("vscode")),z$e=require("child_process"),As=require("os");var hL=ge(require("path"));var f3t=65535,g3t=4,F$e={isValid:!1,validationMessage:Rr.pleaseChooseUniqueContainerName},j$e={isValid:!1,validationMessage:Rr.pleaseChooseUnusedPort},Xg=Cs.create(mL.window.createOutputChannel(Nqe)),y3t="https://www.docker.com/products/docker-desktop/",v3t="https://learn.microsoft.com/en-us/virtualization/windowscontainers/deploy-containers/set-up-linux-containers",b3t="https://docs.docker.com/desktop/settings-and-maintenance/settings/#general",Bo={CHECK_DOCKER:"docker --version",CHECK_DOCKER_RUNNING:"docker info",GET_DOCKER_PATH:'powershell -Command "(Get-Command docker).Source"',START_DOCKER:r=>({win32:`start "" "${r}"`,darwin:"open -a Docker",linux:"systemctl start docker"}),CHECK_ENGINE:{win32:"docker info --format '{{.OSType}}'",darwin:`cat "${process.env.HOME}/Library/Group Containers/group.com.docker/settings-store.json" | grep '"UseVirtualizationFrameworkRosetta": true' || exit 1`,linux:"docker ps"},SWITCH_ENGINE:r=>`powershell -Command "& \\"${r}\\" -SwitchLinuxEngine"`,GET_CONTAINERS:'docker ps -a --format "{{.ID}}"',GET_CONTAINERS_BY_NAME:'docker ps -a --format "{{.Names}}"',INSPECT:r=>`docker inspect ${r}`,PULL_IMAGE:r=>`docker pull mcr.microsoft.com/mssql/server:${r}`,START_SQL_SERVER:(r,e,t,n,i)=>`docker run -e "ACCEPT_EULA=Y" -e "SA_PASSWORD=${e}" -p ${t}:${1433} --name ${r} ${i?`--hostname ${tI(i)}`:""} -d mcr.microsoft.com/mssql/server:${n}`,CHECK_CONTAINER_RUNNING:r=>`docker ps --filter "name=${tI(r)}" --filter "status=running" --format "{{.Names}}"`,VALIDATE_CONTAINER_NAME:'docker ps -a --format "{{.Names}}"',START_CONTAINER:r=>`docker start "${tI(r)}"`,CHECK_LOGS:(r,e,t)=>`docker logs --since ${t} "${tI(r)}" | ${e==="win32"?'findstr "Recovery is complete"':'grep "Recovery is complete"'}`,CHECK_CONTAINER_READY:"Recovery is complete",STOP_CONTAINER:r=>`docker stop "${tI(r)}"`,DELETE_CONTAINER:r=>{let e=tI(r);return`docker stop "${e}" && docker rm "${e}"`},INSPECT_CONTAINER:r=>`docker inspect ${r}`,GET_SQL_SERVER_CONTAINER_VERSIONS:"curl -s https://mcr.microsoft.com/v2/mssql/server/tags/list"};function U$e(){return[{loadState:"notStarted",argNames:[],headerText:Rr.dockerInstallHeader,bodyText:Rr.dockerInstallBody,errorLink:y3t,errorLinkText:Rr.installDocker,stepAction:C3t},{loadState:"notStarted",argNames:[],headerText:Rr.startDockerHeader,bodyText:Rr.startDockerBody,stepAction:V$e},{loadState:"notStarted",argNames:[],headerText:Rr.startDockerEngineHeader,bodyText:Rr.startDockerEngineBody,errorLink:_3t(),errorLinkText:S3t(),stepAction:P3t},{loadState:"notStarted",argNames:["version"],headerText:Rr.pullImageHeader,bodyText:Rr.pullImageBody,stepAction:w3t},{loadState:"notStarted",argNames:["containerName","password","version","hostname","port"],headerText:Rr.creatingContainerHeader,bodyText:Rr.creatingContainerBody,stepAction:E3t},{loadState:"notStarted",argNames:["containerName"],headerText:Rr.settingUpContainerHeader,bodyText:Rr.settingUpContainerBody,stepAction:W$e},{loadState:"notStarted",argNames:[],headerText:Rr.connectingToContainerHeader,bodyText:Rr.connectingToContainerBody,stepAction:void 0}]}function _3t(){if((0,As.platform)()==="win32"&&(0,As.arch)()===Uv)return v3t;if((0,As.platform)()==="darwin"&&(0,As.arch)()!==Uv)return b3t}function S3t(){if((0,As.platform)()==="win32"&&(0,As.arch)()===Uv)return Rr.configureLinuxContainers;if((0,As.platform)()==="darwin"&&(0,As.arch)()!==Uv)return Rr.configureRosetta}function B$e(r){if(r.length<8||r.length>128)return Rr.passwordLengthError;let e=/[A-Z]/.test(r),t=/[a-z]/.test(r),n=/\d/.test(r),i=/[!@#$%^&*]/.test(r);return[e,t,n,i].filter(Boolean).length<3?Rr.passwordComplexityError:""}function tI(r){return r.replace(/[^a-zA-Z0-9_.-]/g,"")}async function sa(r){return new Promise((e,t)=>{(0,z$e.exec)(r,(n,i)=>{if(n)return t(n);e(i.trim())})})}async function C3t(){try{return await sa(Bo.CHECK_DOCKER),{success:!0}}catch(r){return{success:!1,error:Rr.dockerInstallError,fullErrorText:rt(r)}}}async function P3t(){let r="";if((0,As.platform)()==="darwin"&&(0,As.arch)()===Uv)return{success:!0};if((0,As.platform)()!=="darwin"&&(0,As.arch)()!==Uv)return{success:!1,error:Rr.unsupportedDockerArchitectureError((0,As.arch)())};let e=Bo.CHECK_ENGINE[(0,As.platform)()];if(e===void 0)return{success:!1,error:Rr.unsupportedDockerPlatformError((0,As.platform)())};(0,As.platform)()==="win32"&&(r=await G$e("DockerCli.exe"));try{let t=await sa(e);if((0,As.platform)()==="win32"&&t.trim()!=="'linux'")if(await mL.window.showInformationMessage(Rr.switchToLinuxContainersConfirmation,{modal:!0},wm)===wm)await sa(Bo.SWITCH_ENGINE(r));else throw new Error(Rr.switchToLinuxContainersCanceled);return{success:!0}}catch(t){return{success:!1,error:(0,As.platform)()==="linux"?Rr.linuxDockerPermissionsError:(0,As.platform)()==="darwin"?Rr.rosettaError:Rr.windowsContainersError,fullErrorText:rt(t)}}}async function jde(r){try{let e=await sa(Bo.VALIDATE_CONTAINER_NAME),t=e?e.split(`
`):[],n="";if(r.trim()===""){n=ise;let i=1;for(;t.includes(n);)n=`${ise}_${++i}`}else!t.includes(r)&&/^[a-zA-Z0-9][a-zA-Z0-9_.-]*$/.test(r)&&(n=r);return n}catch{return r}}async function G$e(r){try{let n=(await sa(Bo.GET_DOCKER_PATH)).trim().trim().split(hL.sep),i=n.findIndex((s,o)=>s.toLowerCase()===gse&&n.slice(0,o).some(a=>a.toLowerCase()===gse));if(i>=1){let s=n.slice(0,i+1).join(hL.sep);return hL.join(s,r)}}catch{}return""}function $$e(r){let e=r.substring(0,g3t);return(0,As.platform)()==="darwin"&&(0,As.arch)()!==Uv&&e==="2025"?"2025-CTP2.0-ubuntu-22.04":`${e}-latest`}async function w3t(r){try{return await sa(Bo.PULL_IMAGE($$e(r))),{success:!0}}catch(e){return{success:!1,error:Rr.pullSqlServerContainerImageError,fullErrorText:rt(e)}}}async function E3t(r,e,t,n,i){let s=Bo.START_SQL_SERVER(r,e,i,$$e(t),n);try{return await sa(s),Xg.append(`SQL Server container ${r} started on port ${i}.`),{success:!0,port:i}}catch(o){return{success:!1,error:Rr.startSqlServerContainerError,port:void 0,fullErrorText:rt(o)}}}async function T3t(r){try{return(await sa(Bo.CHECK_CONTAINER_RUNNING(r))).split(`
`).map(n=>n.trim()).includes(r)}catch{return!1}}async function V$e(r,e){try{return await sa(Bo.CHECK_DOCKER_RUNNING),vt("LocalContainers","StartDocker",{dockerStartedThroughExtension:"false"}),{success:!0}}catch{}r&&e&&(r.loadingLabel=Rr.startingDockerLoadingLabel,await e.setLoadingUiForNode(r));let t="";if((0,As.platform)()==="win32"&&(t=await G$e(Aqe),!t))return{success:!1,error:Rr.dockerDesktopPathError};let n=Bo.START_DOCKER(t)[(0,As.platform)()];if(!n)return{success:!1,error:Rr.unsupportedDockerPlatformError((0,As.platform)())};try{Xg.appendLine("Waiting for Docker to start..."),await sa(n);let i=0,s=30,o=2e3;return await new Promise(a=>{let c=setInterval(async()=>{try{await sa(Bo.CHECK_DOCKER_RUNNING),clearInterval(c),Xg.appendLine("Docker started successfully."),vt("LocalContainers","StartDocker",{dockerStartedThroughExtension:"true"}),a({success:!0})}catch(l){++i>=s&&(clearInterval(c),a({success:!1,error:Rr.dockerFailedToStartWithinTimeout,fullErrorText:rt(l)}))}},o)})}catch(i){return{success:!1,error:Rr.dockerFailedToStartWithinTimeout,fullErrorText:rt(i)}}}async function H$e(r,e,t){let n=await Bde(r,e,t);if(!n.success)return kr("LocalContainers","RestartContainer",new Error(n.error),!1,void 0,void 0),!1;if(await T3t(r))return!0;e.loadingLabel=Rr.startingContainerLoadingLabel,await t.setLoadingUiForNode(e),Xg.appendLine(`Restarting container: ${r}`),await sa(Bo.START_CONTAINER(r)),Xg.appendLine(`Container ${r} restarted successfully.`),e.loadingLabel=Rr.readyingContainerLoadingLabel,await t.setLoadingUiForNode(e);let s=await W$e(r);return e.loadingLabel=zn.LoadingNodeLabel,await t.setLoadingUiForNode(e),s.success?(vt("LocalContainers","RestartContainer"),!0):(kr("LocalContainers","RestartContainer",new Error(s.error),!1,void 0,void 0),!1)}async function W$e(r){let n=Date.now(),i=new Date(n).toISOString();return Xg.appendLine(`Checking if container ${r} is ready for connections...`),new Promise(s=>{let o=setInterval(async()=>{try{if((await sa(Bo.CHECK_LOGS(r,(0,As.platform)(),i))).split(`
`).find(u=>u.includes(Bo.CHECK_CONTAINER_READY)))return clearInterval(o),Xg.appendLine(`${r} is ready for connections!`),s({success:!0})}catch{}if(Date.now()-n>3e5)return clearInterval(o),s({success:!1,error:Rr.containerFailedToStartWithinTimeout})},1e3)})}async function K$e(r){try{return await sa(Bo.DELETE_CONTAINER(r)),vt("LocalContainers","DeleteContainer"),!0}catch(e){return kr("LocalContainers","DeleteContainer",e,!1,void 0,void 0),!1}}async function Q$e(r){try{return await sa(Bo.STOP_CONTAINER(r)),vt("LocalContainers","StopContainer"),!0}catch(e){return kr("LocalContainers","StopContainer",e,!1,void 0,void 0),!1}}async function I3t(r){let e=new Set;return await Promise.all(r.map(async t=>{try{(await sa(Bo.INSPECT_CONTAINER(t))).match(/"HostPort":\s*"(\d+)"/g)?.forEach(s=>{let o=s.match(/\d+/);o&&e.add(Number(o[0]))})}catch{}})),e}async function R3t(r,e){(e===aM||e===nse)&&(e+=`,${1433}`);for(let t of r)try{let n=await sa(Bo.INSPECT_CONTAINER(t));if(n.match(/"HostPort":\s*"(\d+)"/g)?.some(s=>e.includes(s.match(/\d+/)?.[0]||""))){let s=n.match(/"Name"\s*:\s*"\/([^"]+)"/);if(s)return s[1]}}catch{}}async function Y$e(r){if(!r.includes(aM)&&!r.includes(nse))return"";try{let t=(await sa(Bo.GET_CONTAINERS)).split(`
`).filter(Boolean);return t.length?await R3t(t,r):void 0}catch{return}}async function Ude(r){try{let t=(await sa(Bo.GET_CONTAINERS)).split(`
`).filter(Boolean);if(!t.length)return r;let n=await I3t(t);for(let i=r;i<=f3t;i++)if(!n.has(i))return i;return-1}catch{return-1}}async function X$e(){try{let r=await sa(Bo.GET_SQL_SERVER_CONTAINER_VERSIONS),t=JSON.parse(r).tags??[],n=[],i=new Set;for(let l of t){if(!l)continue;n.push(l);let u=l.slice(0,4);/^\d{4}$/.test(u)&&i.add(u)}let s=Array.from(i),o=n.length-4,a=n[o],c=s.map(l=>({displayName:Rr.sqlServerVersionImage(l),value:l})).reverse();return c[0].value=a,c}catch(r){return Xg.appendLine(`Error parsing SQL Server container versions: ${rt(r)}`),[]}}async function Bde(r,e,t){let n=await V$e(e,t);return n.success?await x3t(r)?{success:!0}:(e.loadingLabel=zi.error,await t.setLoadingUiForNode(e),await mL.window.showInformationMessage(Rr.containerDoesNotExistError,{modal:!0},VD)===VD&&await t.removeNode(e,!1),{success:!1,error:Rr.containerDoesNotExistError}):(mL.window.showErrorMessage(n.error),n)}async function x3t(r){try{return(await sa(Bo.GET_CONTAINERS_BY_NAME)).split(`
`).map(n=>n.trim()).includes(r)}catch(e){return Xg.appendLine(`Error checking if container exists: ${rt(e)}`),!1}}var uW=ge(require("vscode"));var lW=class extends uW.TreeItem{constructor(t,n){super(zn.ErrorLoadingRefreshToTryAgain,uW.TreeItemCollapsibleState.None);this._parentNode=t;this.tooltip=n,this.iconPath={light:Sn.iconPath("Error_light"),dark:Sn.iconPath("Error_dark")}}get parentNode(){return this._parentNode}};var pW=ge(require("vscode"));var dW=class extends pW.TreeItem{constructor(t){super(zn.NoItems,pW.TreeItemCollapsibleState.None);this._parentNode=t;this.iconPath={light:Sn.iconPath("NoItems_light"),dark:Sn.iconPath("NoItems_dark")}}get parentNode(){return this._parentNode}};var mW=ge(require("vscode"));var Gde="disconnectedServer",nVe="Database",J$e="Server",Z$e="Server_red",A3t="Server_green",eVe="Database_red",N3t="Database_green",tVe="DockerContainer_red",D3t="DockerContainer_green",rVe=r=>{let e=r.database?nVe:void 0;return r.containerName&&(e=rLe),{type:Gde,filterable:!1,hasFilters:!1,subType:e}},zm=class extends hd{constructor(e,t){let n=bu(e);super(n,rVe(e),mW.TreeItemCollapsibleState.Collapsed,t?.nodePath??""+e.id,void 0,Gde,void 0,e,t,void 0,void 0),e.containerName?this.iconPath=Sn.iconPath(tVe):e.database?this.iconPath=Sn.iconPath(eVe):this.iconPath=Sn.iconPath(Z$e)}generateId(){return`${this.connectionProfile.id}_${Date.now()}`}updateToConnectedState(e){let{nodeInfo:t,sessionId:n,parentNode:i,connectionProfile:s}=e;this.context={type:J$e,filterable:t.filterableProperties?.length>0,hasFilters:!1,subType:s.containerName?nLe:s.database?nVe:""},this.collapsibleState=mW.TreeItemCollapsibleState.Expanded,this.nodePath=t.nodePath,this.nodeStatus=t.nodeStatus,this.nodeType=J$e,this.sessionId=n,this.updateConnectionProfile(s),this.parentNode=i,this.filterableProperties=t.filterableProperties,this.updateMetadata(t.metadata),s.containerName?this.iconPath=Sn.iconPath(D3t):s.database?this.iconPath=Sn.iconPath(N3t):this.iconPath=Sn.iconPath(A3t)}updateToDisconnectedState(){if(this.context=rVe(this.connectionProfile),this.collapsibleState=mW.TreeItemCollapsibleState.Collapsed,this.nodePath=void 0,this.nodeStatus=void 0,this.nodeType=Gde,this.sessionId=void 0,this.parentNode=void 0,this.filterableProperties=void 0,!this.connectionProfile.savePassword){let e=this.connectionProfile;e.password="",this.updateConnectionProfile(e)}if(this.connectionProfile.database)this.iconPath=Sn.iconPath(eVe);else{let e=Z$e;this.connectionProfile.containerName&&(e=tVe),this.iconPath=Sn.iconPath(e)}}};var fL=ge(require("vscode"));var oVe="ConnectionGroup",iVe="#424242",sVe="#F6F6F6",fd=class r extends hd{children;_connectionGroup;constructor(e,t=fL.TreeItemCollapsibleState.Expanded){super(e.name,M3t(),t,e.id,void 0,oVe,void 0,void 0,void 0,void 0,void 0),this.children=[],this.id=e.id,this._connectionGroup=e,this.iconPath=this.getIcon(),this.tooltip=e.description}getIcon(){let e=this;function t(n){let i=e._connectionGroup.color??(n?sVe:iVe),s=n?iVe:sVe,o=`<svg width="16" height="16" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><rect id="canvas" x="0" y="0" width="16" height="16" style="fill:${s};fill-opacity:0;fill-rule:nonzero;"/><path id="outline" d="M13.502,14.998l-10,0c-0.827,0 -1.5,-0.673 -1.5,-1.5l-0,-11.996c-0,-0.827 0.673,-1.5 1.5,-1.5l8,0c0.827,0 1.5,0.673 1.5,1.5l-0,2.886l2,1l-0,8.11c-0,0.827 -0.673,1.5 -1.5,1.5Z" style="fill:${s};fill-rule:nonzero;"/><path id="iconBg" d="M14.002,13.498l-0,-7.492l-2,-1l-0,-3.504c-0,-0.277 -0.224,-0.5 -0.5,-0.5l-8,0c-0.276,0 -0.5,0.223 -0.5,0.5l-0,11.996c0,0.275 0.224,0.5 0.5,0.5l10,0c0.276,0 0.5,-0.225 0.5,-0.5Zm-2,-0.496l-0,-6.496l1,0.5l-0,5.996l-1,0Z" style="fill:${i};fill-rule:nonzero;"/><path id="iconFg" d="M13.002,12.998l-1,0l-0,-6.5l1,0.5l-0,6Z" style="fill:${s};fill-rule:nonzero;"/></svg>`;return`data:image/svg+xml;base64,${Buffer.from(o).toString("base64")}`}return{light:fL.Uri.parse(t(!0)),dark:fL.Uri.parse(t(!1))}}get connectionGroup(){if(this._connectionGroup)return{...this._connectionGroup}}addChild(e){let t=e instanceof r,n=this.children.findIndex(i=>{let s=i instanceof r;return t===s?i.label.toString().localeCompare(e.label.toString())>0:t&&!s});if(n===-1){this.children.push(e);return}this.children.splice(n,0,e)}removeChild(e){let t=this.children.indexOf(e);t>-1&&this.children.splice(t,1)}};function M3t(){return{type:oVe,filterable:!1,hasFilters:!1,subType:""}}var fW=ge(require("vscode"));var hW=class extends fW.TreeItem{constructor(){super(ZD,fW.TreeItemCollapsibleState.None),this.command={title:ZD,command:oM},this.iconPath={light:Sn.iconPath("add_light"),dark:Sn.iconPath("add_dark")}}};var gW=class{constructor(e,t,n,i=!0){this._vscodeWrapper=e;this._connectionManager=t;this._refreshCallback=n;this._isRichExperienceEnabled=i;e||(this._vscodeWrapper=new gi),this._client=this._connectionManager.client,this._logger=Cs.create(this._vscodeWrapper.outputChannel,"ObjectExplorerService"),this._treeNodeToChildrenMap=new Map,this._client.onNotification(Dde.type,s=>this.handleSessionCreatedNotification(s)),this._client.onNotification(kde.type,s=>this.handleExpandNodeNotification(s))}_client;_logger;_treeNodeToChildrenMap;_connectionNodes=new Map;_connectionGroupNodes=new Map;get _rootTreeNodeArray(){let e=[],t=this._connectionManager.connectionStore.rootGroupId;if(!this._connectionGroupNodes.has(t))return this._logger.error("Root server group is not defined. Cannot get root nodes for Object Explorer."),[];for(let n of this._connectionGroupNodes.get(t)?.children||[])e.push(n);return e}_pendingSessionCreations=new Map;_pendingExpands=new Map;handleSessionCreatedNotification(e){let t=this._pendingSessionCreations.get(e.sessionId);t?t.resolve(e):this._logger.error(`Session created notification received for sessionId ${e.sessionId} but no promise found.`)}handleExpandNodeNotification(e){let t=this._pendingExpands.get(`${e.sessionId}${e.nodePath}`);t?t.resolve(e):this._logger.error(`Expand node notification received for sessionId ${e.sessionId} but no promise found.`)}async reconnectProfile(e){let t=this.getConnectionNodeFromProfile(e);t&&(t.updateConnectionProfile(e),this.cleanNodeChildren(t),this._refreshCallback(t))}needsAccountRefresh(e,t){let n=t?.includes(" - ")?t.substring(t.indexOf("-")+2):t;return e.errorMessage.includes(WB)||e.errorMessage.includes(KB)||e.errorMessage.includes(QB)||e.errorMessage.includes(zAe)||e.errorMessage.includes(L1e(qAe,n))}async expandNode(e,t,n){let i=Fn("ObjectExplorer","ExpandNode",void 0,{nodeType:e.nodeType,nodeSubType:e.nodeSubType,isRefresh:e.shouldRefresh.toString()});this._logger.verbose(`Expanding node ${e.label} with session ID ${t}`);try{let s={sessionId:t,nodePath:e.nodePath,filters:e.filters},o=new xi;this._pendingExpands.set(`${t}${e.nodePath}`,o);let a;if(e.shouldRefresh?(this._logger.verbose(`Refreshing node ${e.label} with session ID ${t}`),a=await this._connectionManager.client.sendRequest(Lde.type,s)):(this._logger.verbose(`Expanding node ${e.label} with session ID ${t}`),a=await this._connectionManager.client.sendRequest(Mde.type,s)),a){let c=await o;if(this._logger.verbose(`Expand node response: ${JSON.stringify(c)} for sessionId ${t}`),!c){n.resolve(void 0);return}if(c.nodes&&!c.errorMessage){this._logger.verbose(`Received ${c.nodes.length} children for node ${e.label} for sessionId ${t}`);let l=c.nodes.map(u=>hd.fromNodeInfo(u,c.sessionId,e,e.connectionProfile));this._treeNodeToChildrenMap.set(e,l),i.end("Succeeded",void 0,{childrenCount:l.length}),n.resolve(l)}else{c.errorMessage&&(this._logger.error(`Expand node failed: ${c.errorMessage} for sessionId ${t}`),this._vscodeWrapper.showErrorMessage(c.errorMessage));let l=new lW(e,c.errorMessage);this._treeNodeToChildrenMap.set(e,[l]),i.endFailed(new Error(c.errorMessage),!1),n.resolve([l])}return a}else{this._logger.error(`Expand node failed: Didn't receive a response from SQL Tools Service for sessionId ${t}`),await this._vscodeWrapper.showErrorMessage(OMe),n.resolve(void 0);return}}finally{e.shouldRefresh=!1}}cleanNodeChildren(e){if(this._treeNodeToChildrenMap.has(e)){let t=this._treeNodeToChildrenMap.get(e);for(;t.length>0;){let n=t.pop();this._treeNodeToChildrenMap.has(n)&&t.push(...this._treeNodeToChildrenMap.get(n)),this._treeNodeToChildrenMap.delete(n)}this._treeNodeToChildrenMap.delete(e)}}sortByServerName(e){return e.sort((n,i)=>{let s=typeof n.label=="string"?n.label:n.label.label,o=typeof i.label=="string"?i.label:i.label.label;return s.toLowerCase().localeCompare(o.toLowerCase())})}getAddConnectionNodes(){let e=[new nW];return this._isRichExperienceEnabled&&e.push(new hW),e}createSignInNode(e){let t=new sW(e);return this._treeNodeToChildrenMap.set(e,[t]),[t]}async getChildren(e){return e?e instanceof fd?e.children:this.getNodeChildren(e):this.getRootNodes()}async getRootNodes(){let e=Fn("ObjectExplorer","ExpandNode",void 0,{nodeType:"root"}),t=this._connectionManager.connectionStore.rootGroupId,n=await this._connectionManager.connectionStore.readAllConnectionGroups(),i=await this._connectionManager.connectionStore.readAllConnections();if(i.length===0&&n.length===1&&n[0].id===t)return this._logger.verbose("No saved connections or groups found. Showing add connection node."),e.end("Succeeded",void 0,{childrenCount:0}),this.getAddConnectionNodes();let s=new Map,o=new Map,c=pl.workspace.getConfiguration(hn).get(CLe,!1);for(let u of n){let d=c?pl.TreeItemCollapsibleState.Collapsed:pl.TreeItemCollapsibleState.Expanded,p=new fd(u,d);this._connectionGroupNodes.has(u.id)&&(p.id=this._connectionGroupNodes.get(u.id).id),s.set(u.id,p)}for(let u of n)if(u.id!==t)if(u.parentId&&s.has(u.parentId)){let d=s.get(u.parentId),p=s.get(u.id);d&&p?(d.addChild(p),d.id!==t&&(p.parentNode=d)):this._logger.error(`Child group '${u.name}' with ID '${u.id}' does not have a valid parent group (${u.parentId}).`)}else this._logger.error(`Group '${u.name}' with ID '${u.id}' does not have a valid parent group ID.  This should have been corrected when reading server groups from settings.`);for(let u of i)if(u.groupId&&s.has(u.groupId)){let d=s.get(u.groupId),p;this._connectionNodes.has(u.id)?(p=this._connectionNodes.get(u.id),p.updateConnectionProfile(u),p.label=bu(u)):p=new zm(u,d.id===t?void 0:d),p.parentNode=d.id===t?void 0:d,o.set(u.id,p),d.addChild(p)}else this._logger.error(`Connection '${bu(u)}' with ID '${u.id}' does not have a valid group ID.  This should have been corrected when reading connections from settings.`);this._connectionGroupNodes=s,this._connectionNodes=o;let l=[...this._rootTreeNodeArray];return e.end("Succeeded",void 0,{nodeCount:l.length}),l}async getNodeChildren(e){if(e.shouldRefresh)this.cleanNodeChildren(e);else if(this._treeNodeToChildrenMap.has(e))return this._treeNodeToChildrenMap.get(e);return this.getOrCreateNodeChildrenWithSession(e),this.setLoadingUiForNode(e)}async setLoadingUiForNode(e){let t=new pl.TreeItem(e.loadingLabel??zn.LoadingNodeLabel,pl.TreeItemCollapsibleState.None);return t.iconPath=new pl.ThemeIcon("loading~spin"),this._treeNodeToChildrenMap.set(e,[t]),this._refreshCallback(e),this._treeNodeToChildrenMap.get(e)}async getOrCreateNodeChildrenWithSession(e){e.sessionId?await this.expandExistingNode(e):await this.createSessionAndExpandNode(e),this._refreshCallback(e)}async expandExistingNode(e){let t=new xi;await this.expandNode(e,e.sessionId,t);let n=await t;if(n){if(n.length===0){let i=[new dW(e)];return this._treeNodeToChildrenMap.set(e,i),i}return n}else return}async createSessionAndExpandNode(e){let t=await this.createSession(e.connectionProfile);if(t?.shouldRetryOnFailure){setTimeout(()=>void this.reconnectProfile(e.connectionProfile),0);return}if(!t?.sessionId)return this.createSignInNode(e);if(t.connectionNode){let n=this.expandExistingNode(e);return setTimeout(()=>this._refreshCallback(e),0),n}else return this.createSignInNode(e)}async createSession(e){this._rootTreeNodeArray||await this.getRootNodes();let t=Fn("ObjectExplorer","CreateSession",void 0,{connectionType:e?.authenticationType??"newConnection"},void 0),n=await this.prepareConnectionProfile(e);if(!n){this._logger.error("Failed to prepare connection profile");return}let i=Os.createConnectionDetails(n),s=await this._connectionManager.client.sendRequest(Fde.type,i),o=new xi;if(this._pendingSessionCreations.set(s.sessionId,o),await this._connectionManager.client.sendRequest(Nde.type,i)){let c=await o;if(c.success){this._logger.verbose(`Session created successfully with session ID ${c.sessionId}`),this._pendingSessionCreations.delete(s.sessionId);let l=await this.handleSessionCreationSuccess(c,n);return t.end("Succeeded",{connectionType:n.authenticationType}),l}else{this._logger.error(`Session creation failed with error: ${c.errorMessage}`);let l=await this.handleSessionCreationFailure(c,n,t);return t.endFailed(),{sessionId:void 0,connectionNode:void 0,shouldRetryOnFailure:l}}}else return}async prepareConnectionProfile(e){let t=e;if(t||(t=await this._connectionManager.connectionUI.createAndSaveProfile(),vt("ObjectExplorer","CreateConnection",void 0,void 0,e,this._connectionManager.getServerInfo(e))),!t)return;let n=t.connectionString?t.connectionString.match(/^Server=([^;]+)/)?.[1]:t.server;if(n&&!t.containerName){let s=await Y$e(n);s&&(t.containerName=s),await this._connectionManager.connectionStore.saveProfile(t)}if(t.id||(t.id=ec()),t.containerName){vt("LocalContainers","ConnectToContainer");try{let s=this.getConnectionNodeFromProfile(t),o=await H$e(t.containerName,s,this);this._logger.verbose(o?`Failed to restart Docker container "${t.containerName}".`:`Docker container "${t.containerName}" has been restarted.`)}catch(s){this._logger.error(`Error when attempting to ensure container "${t.containerName}" is started.  Attempting to proceed normally.

Error:
${rt(s)}`)}}if(t.connectionString)if(t.savePassword){let s=await this._connectionManager.connectionStore.lookupPassword(t,!0);return t.connectionString=s,t}else return;if(await this._connectionManager.handlePasswordBasedCredentials(t)){if(t.authenticationType===ip(1))return t.azureAccountToken=void 0,t;if(t.authenticationType===Qa){let s=this._connectionManager.azureController,o=await this._connectionManager.accountStore.getAccount(t.accountId),a=!1;return o?s.isSqlAuthProviderEnabled()&&(t.user=o.displayInfo.displayName,t.email=o.displayInfo.email,await this._connectionManager.connectionUI.saveProfile(t),await s.isAccountInCache(o)||(a=!0)):a=!0,!t.azureAccountToken&&(!s.isSqlAuthProviderEnabled()||a)&&this.refreshAccount(o,t),t}return t}}async handleSessionCreationSuccess(e,t){if(!e.success)return;let n=this.getConnectionNodeFromProfile(t),i=!1;n?n.updateConnectionProfile(t):(i=!0,n=new zm(t),this._connectionNodes.set(t.id,n)),n.updateToConnectedState({nodeInfo:e.rootNode,sessionId:e.sessionId,parentNode:n.parentNode,connectionProfile:t});let s=this.getNodeIdentifier(n);!this._connectionManager.isConnected(s)&&!this._connectionManager.isConnecting(s)&&await this._connectionManager.connect(s,n.connectionProfile),i&&this.addConnectionNode(n),await this._connectionManager.handlePasswordStorageOnConnect(t),this._treeNodeToChildrenMap.has(n)&&this._treeNodeToChildrenMap.delete(n);let o=this.getConnectionNodeFromProfile(t);return{sessionId:e.sessionId,connectionNode:o}}async handleSessionCreationFailure(e,t,n){let i=gg.connectErrorLabel,s;if(e.errorNumber&&(n.update({connectionType:t.authenticationType},{errorNumber:e.errorNumber}),s=e.errorNumber),e.errorMessage&&(i+=`: ${e.errorMessage}`),s===-2146893019){this._logger.verbose("Fixing SSL trust server certificate error.");let o=await this._connectionManager.handleSSLError(void 0,t);if(n.update({connectionType:t.authenticationType,errorHandled:"trustServerCertificate",isFixed:o?"true":"false"}),o){let a=this.getConnectionNodeFromProfile(o);return a&&a.updateConnectionProfile(o),!0}}else if(Sn.isFirewallError(e.errorNumber)){let o=await this._connectionManager.firewallService.handleFirewallRule(40615,e.errorMessage);if(o.result&&o.ipAddress){this._logger.verbose(`Firewall rule added for IP address ${o.ipAddress}`);let a=await this._connectionManager.connectionUI.handleFirewallError(t,e);return n.update({connectionType:t.authenticationType,errorHandled:"firewallRule",isFixed:a?"true":"false"}),a?this._logger.verbose(`Firewall rule added for IP address ${o.ipAddress}`):this._logger.error(`Firewall rule not added for IP address ${o.ipAddress}`),a}}else if(t.authenticationType===Qa&&this.needsAccountRefresh(e,t.user)){this._logger.verbose(`Refreshing account token for ${t.accountId}}`);let o=await this._connectionManager.accountStore.getAccount(t.accountId),a=this.refreshAccount(o,t);return n.update({connectionType:t.authenticationType,errorHandled:"refreshAccount",isFixed:a?"true":"false"}),a?this._logger.verbose(`Token refreshed successfully for ${t.accountId}`):this._logger.error(`Token refresh failed for ${t.accountId}`),a}else this._logger.error("Session creation failed: "+i),this._vscodeWrapper.showErrorMessage(i);return!1}async refreshAccount(e,t){let n=async()=>{let i=this._connectionManager.azureController,s=new Gl(t),o=await i.refreshAccessToken(e,this._connectionManager.accountStore,t.tenantId,hs.resources.databaseResource);if(o)t.azureAccountToken=o.token,t.expiresOn=o.expiresOn;else{this._logger.verbose("Access token could not be refreshed for connection profile.");let a=RT;if(await this._vscodeWrapper.showErrorMessage(a,Em)===Em){let l=await i.populateAccountProperties(s,this._connectionManager.accountStore,hs.resources.databaseResource);t.azureAccountToken=l.azureAccountToken,t.expiresOn=l.expiresOn}else{this._logger.error("Credentials not refreshed by user.");return}}};return await new Promise(i=>{pl.window.withProgress({location:pl.ProgressLocation.Notification,title:zn.AzureSignInMessage,cancellable:!0},async(s,o)=>{o.onCancellationRequested(()=>{this._logger.verbose("Azure sign in cancelled by user."),i(!1)});try{await n(),i(!0)}catch(a){this._logger.error("Error refreshing account: "+a),this._vscodeWrapper.showErrorMessage(a.message),i(!1)}})})}async removeNode(e,t=!0){t&&await pl.window.showInformationMessage(zn.NodeDeletionConfirmation(e.label),{modal:!0},zn.NodeDeletionConfirmationYes,zn.NodeDeletionConfirmationNo)!==zn.NodeDeletionConfirmationYes||(await this.disconnectNode(e),this._connectionNodes.has(e.connectionProfile.id)?this._connectionNodes.delete(e.connectionProfile.id):this._logger.error(`Connection node with ID ${e.connectionProfile.id} not found in connection nodes map.`),this._refreshCallback(void 0),await this._connectionManager.connectionStore.removeProfile(e.connectionProfile,!1))}async disconnectNode(e){await this.closeSession(e);let t=this.getNodeIdentifier(e);await this._connectionManager.disconnect(t),this.cleanNodeChildren(e),e.updateToDisconnectedState(),this._treeNodeToChildrenMap.set(e,[new pL(e)])}async removeConnectionNodes(e){let t=[];for(let n of e){let i=this.getConnectionNodeFromProfile(n);i?await this.removeNode(i,!1):t.push(n.id)}return t.length>0&&this._logger.error(`Expected to remove ${e.length} nodes, but did not find: ${t.join(", ")}.`),t.length===0}addDisconnectedNode(e){let t=new zm(e);this.updateNode(t)}addConnectionNode(e){let t=this._connectionNodes.get(e.connectionProfile.id);this._logger.verbose(`${t?"Updating":"Adding"} connection node: ${e.label}`),t&&this._connectionGroupNodes.get(t.connectionProfile.groupId)?.removeChild(t),this._connectionNodes.set(e.connectionProfile.id,e),this._connectionGroupNodes.get(e.connectionProfile.groupId)?.addChild(e)}async closeSession(e){if(!e.sessionId)return;let t={sessionId:e.sessionId},n=await this._connectionManager.client.sendRequest(qde.type,t);if(n&&n.success){n.sessionId!==e.sessionId&&this._logger.error("Session ID mismatch in closeSession() response");let i=this.getNodeIdentifier(e);await this._connectionManager.disconnect(i),this.cleanNodeChildren(e);return}}getNodeIdentifier(e){return e.sessionId?e.sessionId:(this._logger.error("Node does not have a session ID"),Sn.getNodeUri(e))}updateNode(e){e instanceof pL&&(e=k3t(e)),e instanceof fd?this._connectionGroupNodes.set(e.id,e):this._connectionNodes.set(e.connectionProfile.id,e)}addServerGroupNode(e){let t=new fd(e);this.updateNode(t)}getConnectionNodeFromProfile(e){let t=this._connectionNodes.get(e.id);return t||this._logger.verbose(`Connection node not found for profile with ID: ${e.id}`),t}get rootNodeConnectionsOld(){return this._rootTreeNodeArray.map(t=>t.connectionProfile)}get connections(){return[...this._connectionNodes.values()].map(e=>e.connectionProfile)}get connectionGroups(){return[...this._connectionGroupNodes.values()].map(e=>e.connectionGroup)}getConnectionNodeById(e){if(!e)return;let t=this._connectionNodes.get(e);return t||this._logger.error(`Connection node with ID ${e} not found.`),t}getServerGroupNodeById(e){if(!e)return;let t=this._connectionGroupNodes.get(e);return t||this._logger.error(`Server group node with ID ${e} not found.`),t}};function k3t(r){if(r=r.parentNode,!(r instanceof hd))throw pl.window.showErrorMessage(Eke),new Error("Parent node was not TreeNodeInfo.");return r}var yW=class{constructor(e,t,n=!0){this._vscodeWrapper=e;this._isRichExperienceEnabled=n;e||(this._vscodeWrapper=new gi),this._objectExplorerService=new gW(this._vscodeWrapper,t,i=>{this.refresh(i)},this._isRichExperienceEnabled)}_onDidChangeTreeData=new aVe.EventEmitter;onDidChangeTreeData=this._onDidChangeTreeData.event;_objectExplorerService;getParent(e){return e.parentNode}refresh(e){this._onDidChangeTreeData.fire(e)}getTreeItem(e){return e}async getChildren(e){let t=await this._objectExplorerService.getChildren(e);if(t)return t}async setNodeLoading(e){await this._objectExplorerService.setLoadingUiForNode(e)}async createSession(e){return this._objectExplorerService.createSession(e)}async expandNode(e,t,n){return this._objectExplorerService.expandNode(e,t,n)}async removeNode(e,t){t!==void 0?await this._objectExplorerService.removeNode(e,t):await this._objectExplorerService.removeNode(e)}async disconnectNode(e){await this._objectExplorerService.disconnectNode(e),this.refresh(e)}async refreshNode(e){e.shouldRefresh=!0,this._onDidChangeTreeData.fire(e)}async removeConnectionNodes(e){e.length!==0&&(await this._objectExplorerService.removeConnectionNodes(e),this.refresh(void 0))}addDisconnectedNode(e){this._objectExplorerService.addDisconnectedNode(e)}deleteChildrenCache(e){this._objectExplorerService.cleanNodeChildren(e)}get connections(){return this._objectExplorerService.connections}get objectExplorerService(){return this._objectExplorerService}set objectExplorerService(e){this._objectExplorerService=e}};var _Ve=ge(require("util"));var $de=class{_question;_ignoreFocusOut;_vscodeWrapper;constructor(e,t,n){this._question=e,this._ignoreFocusOut=n||!1,this._vscodeWrapper=t}get defaultQuickPickOptions(){return{ignoreFocusOut:this._ignoreFocusOut}}get defaultInputBoxOptions(){return{ignoreFocusOut:this._ignoreFocusOut}}},lf=$de;var gd=Hde()("EscapeException");var vVe=ge(bW()),YC=class extends lf{_options;constructor(e,t,n){super(e,t,n),this._options=this.defaultInputBoxOptions,this._options.prompt=this._question.message}static get promptType(){return"input"}render(){let e=this._question.default?this._question.default:this._question.placeHolder;return this._question.default instanceof Error&&(e=this._question.default.message,this._question.default=void 0),this._options.placeHolder=e,this._question.default&&(this._options.value=this._question.default),this._vscodeWrapper.showInputBox(this._options).then(t=>{if(t===void 0)throw new gd;t===""&&(t=this._question.default||"");let n=this._question.validate?this._question.validate(t||""):void 0;return n?(this._question.default=new Error(`${vVe.warning} ${n}`),this.render()):t})}};var gL=class extends YC{constructor(e,t,n){super(e,t,n),this._options.password=!0}};var yL=class extends lf{constructor(e,t,n){super(e,t,n)}render(){let e=this._question.choices.reduce((n,i)=>(n[i.name||i]=i.value||i,n),{}),t=this.defaultQuickPickOptions;return t.placeHolder=this._question.message,this._vscodeWrapper.showQuickPickStrings(Object.keys(e),t).then(n=>{if(n===void 0)throw new gd;return e[n]})}};var vL=class extends lf{constructor(e,t,n){super(e,t,n)}render(){let e={};e[wm]=!0,e[IT]=!1;let t=this.defaultQuickPickOptions;return t.placeHolder=this._question.message,this._vscodeWrapper.showQuickPickStrings(Object.keys(e),t).then(n=>{if(n===void 0)throw new gd;return e[n]||!1})}};var XC=ge(bW()),bL=class extends lf{constructor(e,t,n){super(e,t,n)}render(){let e=this._question.choices.reduce((i,s)=>{let o=s.name||s;return i[`${s.checked===!0?XC.radioOn:XC.radioOff} ${o}`]=s,i},{}),t=this.defaultQuickPickOptions;t.placeHolder=this._question.message;let n=Object.keys(e);return n.push(XC.tick),this._vscodeWrapper.showQuickPickStrings(n,t).then(i=>{if(i===void 0)throw new gd;return i!==XC.tick?(e[i].checked=!e[i].checked,this.render()):this._question.choices.reduce((s,o)=>(o.checked===!0&&s.push(o.value),s),[])})}};var bVe=ge(bW()),_L=class extends lf{constructor(e,t,n){super(e,t,n)}render(){return this._question.choices[0].label?this.renderQuickPick(this._question.choices):this.renderNameValueChoice(this._question.choices)}renderQuickPick(e){let t=this.defaultQuickPickOptions;return t.placeHolder=this._question.message,this._vscodeWrapper.showQuickPick(e,t).then(n=>{if(n===void 0)throw new gd;return this.validateAndReturn(n||!1)})}renderNameValueChoice(e){let t=this._question.choices.reduce((i,s)=>(i[s.name]=s.value,i),{}),n=this.defaultQuickPickOptions;return n.placeHolder=this._question.message,this._vscodeWrapper.showQuickPickStrings(Object.keys(t),n).then(i=>{if(i===void 0)throw new gd;let s=t[i]||!1;return this.validateAndReturn(s)})}validateAndReturn(e){return this.validate(e)?e:this.render()}validate(e){let t=this._question.validate?this._question.validate(e||""):void 0;return t?(this._question.message=`${bVe.warning} ${t}`,!1):!0}};var SL=class{static createPrompt(e,t,n){switch(e.type||"input"){case"string":case"input":return new YC(e,t,n);case"password":return new gL(e,t,n);case"list":return new yL(e,t,n);case"confirm":return new vL(e,t,n);case"checkbox":return new bL(e,t,n);case"expand":return new _L(e,t,n);default:throw new Error(`Could not find a prompt for question type ${e.type}`)}}};var CL=class{constructor(e){this.vscodeWrapper=e;this.outChannel=this.vscodeWrapper.outputChannel}outChannel;messageLevelFormatters={};logError(e){let t=`error: ${e.message}
    Code - ${e.code}`;this.outChannel.appendLine(t)}formatMessage(e){return`${`${e.level}: (${e.id}) `}${e.message}`}log(e){let t="";if(e&&typeof e.level=="string"){let n=this.formatMessage;this.messageLevelFormatters[e.level]&&(n=this.messageLevelFormatters[e.level]),t=n(e)}else t=_Ve.format(arguments);this.outChannel.appendLine(t)}clearLog(){this.outChannel.clear()}showLog(){this.outChannel.show()}fixQuestion(e){e.type==="checkbox"&&Array.isArray(e.choices)&&(e.choices=e.choices.map(t=>typeof t=="string"?{checked:!1,name:t,value:t}:t))}promptSingle(e,t){let n=[e];return this.prompt(n,t).then(i=>{if(i)return i[e.name]||void 0})}prompt(e,t){let n={};return e.reduce((s,o)=>(this.fixQuestion(o),s.then(()=>SL.createPrompt(o,this.vscodeWrapper,t)).then(a=>!o.shouldPrompt||o.shouldPrompt(n)===!0?a.render().then(async c=>(n[o.name]=c,o.onAnswered&&await o.onAnswered(c),n)):n)),Promise.resolve()).catch(s=>{s instanceof gd||s instanceof TypeError||this.vscodeWrapper.showErrorMessage(s.message)})}promptCallback(e,t){this.prompt(e).then(n=>{t&&t(n)})}};var SVe=ge(require("vscode")),CVe=ge(require("path")),PL=ge(require("os"));var nI=ge(require("vscode")),Wde=ge(require("os"));var JC=class r extends nI.TreeItem{static contextValue="emptyHistoryNode";constructor(){super(LMe,nI.TreeItemCollapsibleState.None),this.contextValue=r.contextValue}},_W=class r extends nI.TreeItem{static _contextValue="queryHistoryNode";_ownerUri;_timeStamp;_isSuccess;_queryString;_connectionLabel;constructor(e,t,n,i,s,o,a){super(e,nI.TreeItemCollapsibleState.None),this._queryString=n,this._ownerUri=i,this._timeStamp=s,this._isSuccess=a,this._connectionLabel=o;let c=this._isSuccess?Nke:Lke;this.tooltip=`${t}${Wde.EOL}${Wde.EOL}${c}`,this.contextValue=r._contextValue,this.initializeIcons()}initializeIcons(){this.iconPath=Nb.getIcon("queryHistory",this._isSuccess?"status_success.svg":"status_error.svg")}get historyNodeLabel(){return typeof this.label=="string"?this.label:this.label.label}get ownerUri(){return this._ownerUri}get timeStamp(){return this._timeStamp}get queryString(){return this._queryString}get connectionLabel(){return this._connectionLabel}};var SW=class{constructor(e){this._prompter=e}convertToQuickPickItem(e){let t=e;return{label:zM(t.queryString,!0).trim(),detail:`${t.connectionLabel}, ${t.timeStamp.toLocaleString()}`,node:t,action:void 0,picked:!1}}showQueryHistoryActions(e){let t=[{label:vie},{label:bie}],n={type:vi.expand,name:"question",message:MMe,choices:t};return this._prompter.promptSingle(n).then(i=>{if(i)return i.label})}showQueryHistoryCommandPalette(e){let t={type:vi.expand,name:"question",message:DMe,choices:e};return this._prompter.promptSingle(t).then(n=>{if(n)return this.showQueryHistoryActions(n.node).then(i=>(i===vie?n.action=1:i===bie&&(n.action=2),n))})}};var CW=class{constructor(e,t,n,i,s,o){this._connectionManager=e;this._outputContentProvider=t;this._vscodeWrapper=n;this._untitledSqlDocumentService=i;this._statusView=s;this._prompter=o;let a=this._vscodeWrapper.getConfiguration(fi);this._queryHistoryLimit=a.get(lqe),this._queryHistoryUI=new SW(this._prompter)}_onDidChangeTreeData=new SVe.EventEmitter;onDidChangeTreeData=this._onDidChangeTreeData.event;_queryHistoryNodes=[new JC];_queryHistoryLimit;_queryHistoryUI;clearAll(){this._queryHistoryNodes=[new JC],this._onDidChangeTreeData.fire(void 0)}refresh(e,t,n){let i=t.toLocaleString(),s=this.createHistoryNodeLabel(e),o=this.createHistoryNodeTooltip(e,i),a=this.getQueryString(e),c=this.getConnectionLabel(e),l=new _W(s,o,a,e,t,c,!n);this._queryHistoryNodes.length===1&&this._queryHistoryNodes[0]instanceof JC&&(this._queryHistoryNodes=[]),this._queryHistoryNodes.push(l),this._queryHistoryNodes.sort((u,d)=>d.timeStamp.getTime()-u.timeStamp.getTime()),this._queryHistoryNodes.length>this._queryHistoryLimit&&this._queryHistoryNodes.shift(),this._onDidChangeTreeData.fire(void 0)}getTreeItem(e){return e}getChildren(e){return this._queryHistoryNodes.length===0&&this._queryHistoryNodes.push(new JC),this._queryHistoryNodes}async showQueryHistoryCommandPalette(){let e=this._queryHistoryNodes.map(n=>this._queryHistoryUI.convertToQuickPickItem(n)),t=await this._queryHistoryUI.showQueryHistoryCommandPalette(e);t&&await this.openQueryHistoryEntry(t.node,t.action===2)}async startQueryHistoryCapture(){await this._vscodeWrapper.setConfiguration(fi,uM,!0)}async pauseQueryHistoryCapture(){await this._vscodeWrapper.setConfiguration(fi,uM,!1)}async openQueryHistoryEntry(e,t=!1){let n=await this._untitledSqlDocumentService.newQuery(e.queryString),i=n.document.uri.toString(!0),s=CVe.basename(n.document.fileName),o=new xi,a=this._connectionManager.getConnectionInfo(e.ownerUri).credentials;if(await this._connectionManager.connect(i,a,o),await o,this._statusView.languageFlavorChanged(i,il),this._statusView.sqlCmdModeChanged(i,!1),t){let c=new xi;await this._outputContentProvider.runQuery(this._statusView,i,void 0,s,{},c),await c,await this._connectionManager.connectionStore.removeRecentlyUsed(a)}}deleteQueryHistoryEntry(e){let t=this._queryHistoryNodes.findIndex(n=>n===e);this._queryHistoryNodes.splice(t,1),this._onDidChangeTreeData.fire(void 0)}get queryHistoryNodes(){return this._queryHistoryNodes}createHistoryNodeLabel(e){let t=zM(this.getQueryString(e)).trim(),n=zM(this.getConnectionLabel(e)).trim();return`${t} : ${n}`}getQueryString(e){return this._outputContentProvider.getQueryRunner(e).getQueryString(e)}getConnectionLabel(e){let n=this._connectionManager.getConnectionInfo(e).credentials,i=`(${n.server}|${n.database})`;return n.authenticationType===Ya&&(i=`${i} : ${n.user}`),i}createHistoryNodeTooltip(e,t){let n=this.getQueryString(e);return`${this.getConnectionLabel(e)}${PL.EOL}${PL.EOL}${t}${PL.EOL}${PL.EOL}${n}`}};var PW=ge(Vi());var Kde;(e=>e.type=new PW.RequestType("scripting/script"))(Kde||={});var Qde;(e=>e.type=new PW.NotificationType("scripting/scriptProgressNotification"))(Qde||={});var PVe=ge(require("vscode")),wW=class r{constructor(e){this._connectionManager=e;this._client=this._connectionManager.client,this._client.onNotification(Qde.type,t=>{if(this._client.logger.verbose(JSON.stringify(t)),t.errorMessage){let n=`Scripting progress error: ${t.errorMessage} - ${t.errorDetails}`;this._client.logger.error(n),PVe.window.showErrorMessage(n)}})}_client;static getScriptCompatibility(e,t){switch(e){case 8:return"Script80Compat";case 9:return"Script90Compat";case 10:return t===50?"Script105Compat":"Script100Compat";case 11:return"Script110Compat";case 12:return"Script120Compat";case 13:return"Script130Compat";case 14:return"Script140Compat";case 15:return"Script150Compat";case 16:return"Script160Compat";case 17:return"Script170Compat";default:return"Script140Compat"}}targetDatabaseEngineEditionMap={0:"SqlServerEnterpriseEdition",1:"SqlServerPersonalEdition",2:"SqlServerStandardEdition",3:"SqlServerEnterpriseEdition",4:"SqlServerExpressEdition",5:"SqlAzureDatabaseEdition",6:"SqlDatawarehouseEdition",7:"SqlServerStretchEdition",8:"SqlManagedInstanceEdition",9:"SqlDatabaseEdgeEdition",11:"SqlOnDemandEdition"};getObjectFromNode(e){let t=e.metadata;return t?{type:t.metadataTypeName,schema:t.schema,name:t.name,parentName:t.parentName,parentTypeName:t.parentTypeName}:void 0}createScriptingParams(e,t,n,i){let s;switch(i){case 0:s="ScriptSelect";break;case 4:s="ScriptDrop";break;case 1:s="ScriptCreate";default:s="ScriptCreate"}let o={scriptCreateDrop:s,typeOfDataToScript:"SchemaOnly",scriptStatistics:"ScriptStatsNone",targetDatabaseEngineEdition:e&&e.engineEditionId?this.targetDatabaseEngineEditionMap[e.engineEditionId]:"SqlServerEnterpriseEdition",targetDatabaseEngineType:e&&e.isCloud?"SqlAzure":"SingleInstance",scriptCompatibilityOption:r.getScriptCompatibility(e?.serverMajorVersion,e?.serverMinorVersion)};return{filePath:void 0,scriptDestination:"ToEditor",connectionString:void 0,scriptingObjects:[t],includeObjectCriteria:void 0,excludeObjectCriteria:void 0,includeSchemas:void 0,excludeSchemas:void 0,includeTypes:void 0,excludeTypes:void 0,scriptOptions:o,connectionDetails:void 0,ownerURI:n,selectScript:void 0,operation:i}}createScriptingParamsFromNode(e,t,n){let i=this._connectionManager.getServerInfo(e.connectionProfile),s=this.getObjectFromNode(e);return this.createScriptingParams(i,s,t,n)}async scriptTreeNode(e,t,n){let i=this.createScriptingParamsFromNode(e,t,n);return this.script(i)}async script(e){return(await this._client.sendRequest(Kde.type,e)).script}};var EW=class{constructor(e,t){this._azureController=e;this._accountStore=t}async addAccount(){return await this._azureController.addAccount(this._accountStore)}async getAccounts(){return await this._accountStore.getAccounts()}async getAccount(e){return this._accountStore.getAccount(e)}async getAccountSecurityToken(e,t){return await this._azureController.getAccountSecurityToken(e,t,hs.resources.azureManagementResource)}async getAccountSessions(e){return await this._azureController.getAccountSessions(e)}};var TW=class{constructor(e,t,n){this._azureController=e;this._azureResourceController=t;this._accountStore=n}async getLocations(e){return await this._azureController.checkAndRefreshToken(e,this._accountStore),await this._azureResourceController.getLocations(e)}async getResourceGroups(e){return await this._azureController.checkAndRefreshToken(e,this._accountStore),await this._azureResourceController.getResourceGroups(e)}async createOrUpdateServer(e,t,n,i){return await this._azureController.checkAndRefreshToken(e,this._accountStore),await this._azureResourceController.createOrUpdateServer(e.subscription.subscriptionId,t,n,i,e.token)}};var uf=ge(Vi()),Yde;(e=>e.type=new uf.RequestType("dacfx/export"))(Yde||={});var Xde;(e=>e.type=new uf.RequestType("dacfx/import"))(Xde||={});var IW;(e=>e.type=new uf.RequestType("dacfx/extract"))(IW||={});var Jde;(e=>e.type=new uf.RequestType("dacfx/deploy"))(Jde||={});var Zde;(e=>e.type=new uf.RequestType("dacfx/generateDeploymentScript"))(Zde||={});var epe;(e=>e.type=new uf.RequestType("dacfx/generateDeployPlan"))(epe||={});var tpe;(e=>e.type=new uf.RequestType("dacfx/getOptionsFromProfile"))(tpe||={});var rpe;(e=>e.type=new uf.RequestType("dacfx/validateStreamingJob"))(rpe||={});var npe;(e=>e.type=new uf.RequestType("dacfx/savePublishProfile"))(npe||={});var RW=class{constructor(e){this._client=e}exportBacpac(e,t,n,i){let s={databaseName:e,packageFilePath:t,ownerUri:n,taskExecutionMode:i};return this._client.sendRequest(Yde.type,s)}importBacpac(e,t,n,i){let s={packageFilePath:e,databaseName:t,ownerUri:n,taskExecutionMode:i};return this._client.sendRequest(Xde.type,s)}extractDacpac(e,t,n,i,s,o){let a={databaseName:e,packageFilePath:t,applicationName:n,applicationVersion:i,ownerUri:s,extractTarget:0,taskExecutionMode:o};return this._client.sendRequest(IW.type,a)}createProjectFromDatabase(e,t,n,i,s,o,a,c){let l={databaseName:e,packageFilePath:t,applicationName:n,applicationVersion:i,ownerUri:s,extractTarget:o,taskExecutionMode:a,includePermissions:c};return this._client.sendRequest(IW.type,l)}deployDacpac(e,t,n,i,s,o,a){let c={packageFilePath:e,databaseName:t,upgradeExisting:n,sqlCommandVariableValues:o?Object.fromEntries(o):void 0,deploymentOptions:a,ownerUri:i,taskExecutionMode:s};return this._client.sendRequest(Jde.type,c)}generateDeployScript(e,t,n,i,s,o){let a={packageFilePath:e,databaseName:t,sqlCommandVariableValues:s?Object.fromEntries(s):void 0,deploymentOptions:o,ownerUri:n,taskExecutionMode:i};return this._client.sendRequest(Zde.type,a)}generateDeployPlan(e,t,n,i){let s={packageFilePath:e,databaseName:t,ownerUri:n,taskExecutionMode:i};return this._client.sendRequest(epe.type,s)}getOptionsFromProfile(e){let t={profilePath:e};return this._client.sendRequest(tpe.type,t)}validateStreamingJob(e,t){let n={packageFilePath:e,createStreamingJobTsql:t};return this._client.sendRequest(rpe.type,n)}savePublishProfile(e,t,n,i,s){let o={profilePath:e,databaseName:t,connectionString:n,sqlCommandVariableValues:i?Object.fromEntries(i):void 0,deploymentOptions:s};return this._client.sendRequest(npe.type,o)}};var jn=ge(Vi()),ipe;(e=>e.type=new jn.RequestType("sqlProjects/createProject"))(ipe||={});var spe;(e=>e.type=new jn.RequestType("sqlProjects/openProject"))(spe||={});var ope;(e=>e.type=new jn.RequestType("sqlProjects/closeProject"))(ope||={});var ape;(e=>e.type=new jn.RequestType("sqlProjects/getCrossPlatformCompatibility"))(ape||={});var cpe;(e=>e.type=new jn.RequestType("sqlProjects/updateProjectForCrossPlatform"))(cpe||={});var lpe;(e=>e.type=new jn.RequestType("sqlProjects/getProjectProperties"))(lpe||={});var upe;(e=>e.type=new jn.RequestType("sqlProjects/setDatabaseSource"))(upe||={});var dpe;(e=>e.type=new jn.RequestType("sqlProjects/setDatabaseSchemaProvider"))(dpe||={});var ppe;(e=>e.type=new jn.RequestType("sqlProjects/addSqlObjectScript"))(ppe||={});var mpe;(e=>e.type=new jn.RequestType("sqlProjects/deleteSqlObjectScript"))(mpe||={});var hpe;(e=>e.type=new jn.RequestType("sqlProjects/excludeSqlObjectScript"))(hpe||={});var fpe;(e=>e.type=new jn.RequestType("sqlProjects/moveSqlObjectScript"))(fpe||={});var gpe;(e=>e.type=new jn.RequestType("sqlProjects/getSqlObjectScripts"))(gpe||={});var ype;(e=>e.type=new jn.RequestType("sqlProjects/addFolder"))(ype||={});var vpe;(e=>e.type=new jn.RequestType("sqlProjects/deleteFolder"))(vpe||={});var bpe;(e=>e.type=new jn.RequestType("sqlProjects/getFolders"))(bpe||={});var _pe;(e=>e.type=new jn.RequestType("sqlProjects/excludeFolder"))(_pe||={});var Spe;(e=>e.type=new jn.RequestType("sqlProjects/moveFolder"))(Spe||={});var Cpe;(e=>e.type=new jn.RequestType("sqlProjects/addPostDeploymentScript"))(Cpe||={});var Ppe;(e=>e.type=new jn.RequestType("sqlProjects/addPreDeploymentScript"))(Ppe||={});var wpe;(e=>e.type=new jn.RequestType("sqlProjects/deletePostDeploymentScript"))(wpe||={});var Epe;(e=>e.type=new jn.RequestType("sqlProjects/deletePreDeploymentScript"))(Epe||={});var Tpe;(e=>e.type=new jn.RequestType("sqlProjects/excludePostDeploymentScript"))(Tpe||={});var Ipe;(e=>e.type=new jn.RequestType("sqlProjects/excludePreDeploymentScript"))(Ipe||={});var Rpe;(e=>e.type=new jn.RequestType("sqlProjects/movePostDeploymentScript"))(Rpe||={});var xpe;(e=>e.type=new jn.RequestType("sqlProjects/movePreDeploymentScript"))(xpe||={});var Ope;(e=>e.type=new jn.RequestType("sqlProjects/getPostDeploymentScripts"))(Ope||={});var Ape;(e=>e.type=new jn.RequestType("sqlProjects/getPreDeploymentScripts"))(Ape||={});var Npe;(e=>e.type=new jn.RequestType("sqlProjects/addNoneItem"))(Npe||={});var Dpe;(e=>e.type=new jn.RequestType("sqlProjects/deleteNoneItem"))(Dpe||={});var Mpe;(e=>e.type=new jn.RequestType("sqlProjects/excludeNoneItem"))(Mpe||={});var kpe;(e=>e.type=new jn.RequestType("sqlProjects/getNoneItems"))(kpe||={});var Lpe;(e=>e.type=new jn.RequestType("sqlProjects/moveNoneItem"))(Lpe||={});var qpe;(e=>e.type=new jn.RequestType("sqlProjects/addSqlCmdVariable"))(qpe||={});var zpe;(e=>e.type=new jn.RequestType("sqlProjects/deleteSqlCmdVariable"))(zpe||={});var Fpe;(e=>e.type=new jn.RequestType("sqlProjects/updateSqlCmdVariable"))(Fpe||={});var jpe;(e=>e.type=new jn.RequestType("sqlProjects/getSqlCmdVariables"))(jpe||={});var Upe;(e=>e.type=new jn.RequestType("sqlprojects/addDacpacReference"))(Upe||={});var Bpe;(e=>e.type=new jn.RequestType("sqlprojects/addSqlProjectReference"))(Bpe||={});var Gpe;(e=>e.type=new jn.RequestType("sqlprojects/addSystemDatabaseReference"))(Gpe||={});var $pe;(e=>e.type=new jn.RequestType("sqlprojects/addNugetPackageReference"))($pe||={});var Vpe;(e=>e.type=new jn.RequestType("sqlprojects/deleteDatabaseReference"))(Vpe||={});var Hpe;(e=>e.type=new jn.RequestType("sqlProjects/getDatabaseReferences"))(Hpe||={});var xW=class{constructor(e){this._client=e}async addDacpacReference(e,t,n,i,s,o){let a={projectUri:e,dacpacPath:t,suppressMissingDependencies:n,databaseVariable:i,serverVariable:s,databaseLiteral:o};return this._client.sendRequest(Upe.type,a)}async addSqlProjectReference(e,t,n,i,s,o,a){let c={projectUri:e,projectPath:t,projectGuid:n,suppressMissingDependencies:i,databaseVariable:s,serverVariable:o,databaseLiteral:a};return this._client.sendRequest(Bpe.type,c)}async addSystemDatabaseReference(e,t,n,i,s){let o={projectUri:e,systemDatabase:t,suppressMissingDependencies:n,referenceType:i,databaseLiteral:s};return this._client.sendRequest(Gpe.type,o)}async addNugetPackageReference(e,t,n,i,s,o,a){let c={projectUri:e,packageName:t,packageVersion:n,suppressMissingDependencies:i,databaseVariable:s,serverVariable:o,databaseLiteral:a};return this._client.sendRequest($pe.type,c)}async deleteDatabaseReference(e,t){let n={projectUri:e,name:t};return this._client.sendRequest(Vpe.type,n)}async addFolder(e,t){let n={projectUri:e,path:t};return this._client.sendRequest(ype.type,n)}async deleteFolder(e,t){let n={projectUri:e,path:t};return this._client.sendRequest(vpe.type,n)}async addPostDeploymentScript(e,t){let n={projectUri:e,path:t};return this._client.sendRequest(Cpe.type,n)}async addPreDeploymentScript(e,t){let n={projectUri:e,path:t};return this._client.sendRequest(Ppe.type,n)}async deletePostDeploymentScript(e,t){let n={projectUri:e,path:t};return this._client.sendRequest(wpe.type,n)}async deletePreDeploymentScript(e,t){let n={projectUri:e,path:t};return this._client.sendRequest(Epe.type,n)}async excludePostDeploymentScript(e,t){let n={projectUri:e,path:t};return this._client.sendRequest(Tpe.type,n)}async excludePreDeploymentScript(e,t){let n={projectUri:e,path:t};return this._client.sendRequest(Ipe.type,n)}async movePostDeploymentScript(e,t,n){let i={projectUri:e,destinationPath:n,path:t};return this._client.sendRequest(Rpe.type,i)}async movePreDeploymentScript(e,t,n){let i={projectUri:e,destinationPath:n,path:t};return this._client.sendRequest(xpe.type,i)}async closeProject(e){let t={projectUri:e};return this._client.sendRequest(ope.type,t)}async createProject(e,t,n,i){let s={projectUri:e,sqlProjectType:t,databaseSchemaProvider:n,buildSdkVersion:i};return this._client.sendRequest(ipe.type,s)}async getCrossPlatformCompatibility(e){let t={projectUri:e};return this._client.sendRequest(ape.type,t)}async openProject(e){let t={projectUri:e};return this._client.sendRequest(spe.type,t)}async updateProjectForCrossPlatform(e){let t={projectUri:e};return this._client.sendRequest(cpe.type,t)}async getProjectProperties(e){let t={projectUri:e};return this._client.sendRequest(lpe.type,t)}async setDatabaseSource(e,t){let n={projectUri:e,databaseSource:t};return this._client.sendRequest(upe.type,n)}async setDatabaseSchemaProvider(e,t){let n={projectUri:e,databaseSchemaProvider:t};return this._client.sendRequest(dpe.type,n)}async addSqlCmdVariable(e,t,n){let i={projectUri:e,name:t,defaultValue:n};return this._client.sendRequest(qpe.type,i)}async deleteSqlCmdVariable(e,t){let n={projectUri:e,name:t};return this._client.sendRequest(zpe.type,n)}async updateSqlCmdVariable(e,t,n){let i={projectUri:e,name:t,defaultValue:n};return this._client.sendRequest(Fpe.type,i)}async addSqlObjectScript(e,t){let n={projectUri:e,path:t};return this._client.sendRequest(ppe.type,n)}async deleteSqlObjectScript(e,t){let n={projectUri:e,path:t};return this._client.sendRequest(mpe.type,n)}async excludeSqlObjectScript(e,t){let n={projectUri:e,path:t};return this._client.sendRequest(hpe.type,n)}async moveSqlObjectScript(e,t,n){let i={projectUri:e,destinationPath:n,path:t};return this._client.sendRequest(fpe.type,i)}async getDatabaseReferences(e){let t={projectUri:e};return this._client.sendRequest(Hpe.type,t)}async getFolders(e){let t={projectUri:e};return this._client.sendRequest(bpe.type,t)}async getPostDeploymentScripts(e){let t={projectUri:e};return this._client.sendRequest(Ope.type,t)}async getPreDeploymentScripts(e){let t={projectUri:e};return this._client.sendRequest(Ape.type,t)}async getSqlCmdVariables(e){let t={projectUri:e};return this._client.sendRequest(jpe.type,t)}async getSqlObjectScripts(e){let t={projectUri:e};return this._client.sendRequest(gpe.type,t)}async excludeFolder(e,t){let n={projectUri:e,path:t};return this._client.sendRequest(_pe.type,n)}async moveFolder(e,t,n){let i={projectUri:e,path:t,destinationPath:n};return this._client.sendRequest(Spe.type,i)}async addNoneItem(e,t){let n={projectUri:e,path:t};return this._client.sendRequest(Npe.type,n)}async deleteNoneItem(e,t){let n={projectUri:e,path:t};return this._client.sendRequest(Dpe.type,n)}async excludeNoneItem(e,t){let n={projectUri:e,path:t};return this._client.sendRequest(Mpe.type,n)}async getNoneItems(e){let t={projectUri:e};return this._client.sendRequest(kpe.type,t)}async moveNoneItem(e,t,n){let i={projectUri:e,destinationPath:n,path:t};return this._client.sendRequest(Lpe.type,i)}};var jm=ge(Vi()),Wpe;(e=>e.type=new jm.RequestType("schemaCompare/compare"))(Wpe||={});var Kpe;(e=>e.type=new jm.RequestType("schemaCompare/generateScript"))(Kpe||={});var Qpe;(e=>e.type=new jm.RequestType("schemaCompare/publishDatabase"))(Qpe||={});var Ype;(e=>e.type=new jm.RequestType("schemaCompare/publishProject"))(Ype||={});var Xpe;(e=>e.type=new jm.RequestType("schemaCompare/getDefaultOptions"))(Xpe||={});var Jpe;(e=>e.type=new jm.RequestType("schemaCompare/includeExcludeAllNodes"))(Jpe||={});var Zpe;(e=>e.type=new jm.RequestType("schemaCompare/includeExcludeNode"))(Zpe||={});var eme;(e=>e.type=new jm.RequestType("schemaCompare/openScmp"))(eme||={});var tme;(e=>e.type=new jm.RequestType("schemaCompare/saveScmp"))(tme||={});var rme;(e=>e.type=new jm.RequestType("schemaCompare/cancel"))(rme||={});var OW=class{constructor(e){this._client=e}compare(e,t,n,i,s){let o={operationId:e,sourceEndpointInfo:t,targetEndpointInfo:n,taskExecutionMode:i,deploymentOptions:s};return this._client.sendRequest(Wpe.type,o)}generateScript(e,t,n,i){let s={operationId:e,targetServerName:t,targetDatabaseName:n,taskExecutionMode:i};return this._client.sendRequest(Kpe.type,s)}publishDatabaseChanges(e,t,n,i){let s={operationId:e,targetServerName:t,targetDatabaseName:n,taskExecutionMode:i};return this._client.sendRequest(Qpe.type,s)}publishProjectChanges(e,t,n,i){let s={operationId:e,targetProjectPath:t,targetFolderStructure:n,taskExecutionMode:i};return this._client.sendRequest(Ype.type,s)}schemaCompareGetDefaultOptions(){let e={};return this._client.sendRequest(Xpe.type,e)}includeExcludeNode(e,t,n,i){let s={operationId:e,diffEntry:t,includeRequest:n,taskExecutionMode:i};return this._client.sendRequest(Zpe.type,s)}includeExcludeAllNodes(e,t,n){let i={operationId:e,includeRequest:t,taskExecutionMode:n};return this._client.sendRequest(Jpe.type,i)}openScmp(e){let t={filePath:e};return this._client.sendRequest(eme.type,t)}saveScmp(e,t,n,i,s,o,a){let c={sourceEndpointInfo:e,targetEndpointInfo:t,taskExecutionMode:n,deploymentOptions:i,scmpFilePath:s,excludedSourceObjects:o,excludedTargetObjects:a};return this._client.sendRequest(tme.type,c)}cancel(e){let t={operationId:e};return this._client.sendRequest(rme.type,t)}};var ZC=ge(require("vscode")),wL=ge(Vi());var wVe;(e=>e.type=new wL.NotificationType("tasks/statuschanged"))(wVe||={});var EVe;(e=>e.type=new wL.NotificationType("tasks/newtaskcreated"))(EVe||={});var TVe;(e=>e.type=new wL.RequestType("tasks/canceltask"))(TVe||={});var AW=class{constructor(e,t){this._client=e;this._untitledSqlDocumentService=t;this._client.onNotification(EVe.type,n=>this.handleTaskCreatedNotification(n)),this._client.onNotification(wVe.type,n=>this.handleTaskChangedNotification(n))}_activeTasks=new Map;cancelTask(e){let t={taskId:e};return this._client.sendRequest(TVe.type,t)}handleTaskCreatedNotification(e){let t={taskInfo:e,progressCallback:()=>{},completionPromise:new xi};ZC.window.withProgress({location:ZC.ProgressLocation.Notification,title:e.name,cancellable:e.isCancelable},async(n,i)=>{t.progressCallback=s=>n.report(s),i.onCancellationRequested(()=>{this.cancelTask(e.taskId)}),await t.completionPromise}),this._activeTasks.set(e.taskId,t)}async handleTaskChangedNotification(e){let t=this._activeTasks.get(e.taskId);if(!t){console.warn(`Status update for unknown task ${e.taskId}`);return}let n=t4t(e.status);if(e.message&&e.message.toLowerCase()!==n.toLowerCase()&&(t.lastMessage=e.message),Z3t(e.status)){this._activeTasks.delete(e.taskId),e.status===5?t.completionPromise.reject(new Error("Task cancelled")):t.completionPromise.resolve();let i=(e.message&&e.message.toLowerCase()!==n.toLowerCase())??t.lastMessage,s=i?Iie(t.taskInfo.name,n,i.toString()):yke(t.taskInfo.name,n);e4t(e.status,s),t.taskInfo.taskExecutionMode===1&&e.script&&await this._untitledSqlDocumentService.newQuery(e.script)}else{let i=e.message&&e.message.toLowerCase()!==n.toLowerCase()?Iie(t.taskInfo.name,n,e.message):n;t.progressCallback({message:i})}}};function Z3t(r){return r===5||r===4||r===2||r===3}function e4t(r,e){r===4?ZC.window.showErrorMessage(e):r===5||r===3?ZC.window.showWarningMessage(e):ZC.window.showInformationMessage(e)}function t4t(r){switch(r){case 5:return Ske;case 4:return vke;case 2:return bke;case 3:return _ke;case 1:return Cke;case 6:return Pke;case 0:return wke;default:return console.warn(`Don't have display string for task status ${r}`),r.toString()}}var qa=ge(require("vscode"));var NW=class{constructor(e,t,n){this._client=e;this._accountStore=t;this._azureController=n}_account=void 0;_isStale;commonTenant={id:"common",displayName:"common"};get account(){return this._account}setAccount(e){this._account=e}get client(){return this._client}convertToAzureAccount(e){let t={displayName:Tqe,id:e.tenantId,userId:e.userId};return{key:{providerId:wqe,id:e.userId},displayInfo:{userId:e.userId,displayName:void 0,accountType:void 0,name:void 0},properties:{tenants:[t],owningTenant:t,azureAuthType:0,providerSettings:hs,isMsAccount:!1},isStale:this._isStale,isSignedIn:!1}}async createSecurityTokenMapping(e,t){let n={};return n[t]={token:(await this.refreshToken(e,t)).token},n}async refreshToken(e,t){return await this._azureController.refreshAccessToken(e,this._accountStore,t,hs.resources.azureManagementResource)}getHomeTenant(e){return e.properties.tenants.find(t=>t.tenantCategory==="Home")??e.properties.tenants[0]??this.commonTenant}};var iI=ge(require("os"));var DW=class{constructor(e,t){this._context=e;this._vscodeWrapper=t;this._logger=Cs.create(this._vscodeWrapper.outputChannel,"AccountStore"),this.initialize().then(()=>{this.initialized.resolve()})}initialized=new xi;_logger;async initialize(){await this.pruneInvalidAccounts()}async getAccounts(){await this.initialized;let e=this._context.globalState.get(jv)??[];return this._logger.info(`Retrieved ${e.length} Entra accounts from account store.`),e}async getAccount(e){await this.initialized;let t,n=this._context.globalState.get(jv);if(!n)throw new Error("No Entra accounts stored");for(let i of n)if(i.key.id===e||i.key.id.startsWith(e)||e.startsWith(i.key.id)){t=i;break}return t}async removeAccount(e){e||this._logger.error("Key must be specified for Entra account removal"),await this.initialized;let t=await this.getAccounts();t=t.filter(n=>n.key.id!==e),await this._context.globalState.update(jv,t)}async addAccount(e){if(!e)return this._logger.error("Empty Entra Account cannot be added to account store."),!1;if(!this.isValidAccount(e))return this._logger.error(`Attemped to add incomplete Entra account: ${JSON.stringify(e)}`),!1;await this.initialized;let t=await this.getAccounts();return t.length>0&&(t=t.filter(n=>n.key.id!==e.key.id)),t.unshift(e),await this._context.globalState.update(jv,t),!0}async pruneInvalidAccounts(){let e=this._context.globalState.get(jv)??[],t=0;e=e.filter(n=>{try{return this.isValidAccount(n)?!0:(t++,this._logger.info(`Unexpected incomplete Entra account; missing either key ID or display info. Removing account from account store: ${JSON.stringify(n)}`),!1)}catch(i){return t++,this._logger.info(`Unexpected incomplete Entra account; removing account from account store.${iI.EOL}Error:${iI.EOL}${rt(i)}${iI.EOL+iI.EOL}Account:${iI.EOL}${JSON.stringify(n)}`),!1}}),t>0&&(await this._context.globalState.update(jv,e),this._vscodeWrapper.showInformationMessage(fG.invalidEntraAccountsRemoved(t)))}async clearAccounts(){let e=[];await this._context.globalState.update(jv,e),this._logger.info("Cleared all saved Entra accounts")}isValidAccount(e){return e.key?.id!==void 0&&e.displayInfo?.displayName!==void 0}};var nme=ge(require("path")),IVe=ge(require("vscode"));var ime=require("fs");var df=class r{constructor(e,t,n,i=xG){this.context=e;this.prompter=t;this._credentialStore=n;this._subscriptionClientFactory=i;this._vscodeWrapper||(this._vscodeWrapper=new gi);let s=this._vscodeWrapper.createOutputChannel(HDe);this.logger=Cs.create(s),this._providerSettings=hs,IVe.workspace.onDidChangeConfiguration(o=>{o.affectsConfiguration(kAe)===!0&&this.handleAuthMapping()})}_providerSettings;_vscodeWrapper;_credentialStoreInitialized=!1;logger;_isSqlAuthProviderEnabled=!1;isSqlAuthProviderEnabled(){return this._isSqlAuthProviderEnabled}async addAccount(e){let t=_g(),n=await this.login(t);return await e.addAccount(n),this.logger.verbose("Account added successfully."),n}async refreshTokenWrapper(e,t,n,i){let s=t.getAccount(n.key.id);if(!s)throw await this._vscodeWrapper.showErrorMessage(vg),new Error(vg);if(this._isSqlAuthProviderEnabled)this.logger.verbose("Account found and SQL Authentication Provider is enabled, access token will not be refreshed by extension.");else{this.logger.verbose(`Account found, refreshing access token for tenant ${e.tenantId}`);let o=await this.refreshAccessToken(s,t,e.tenantId,i);if(!o){let a=RT;return this._vscodeWrapper.showErrorMessage(a,Em).then(async c=>{if(c===Em)return await this.populateAccountProperties(e,t,i)})}e.azureAccountToken=o.token,e.expiresOn=o.expiresOn,e.email=s.displayInfo.email,e.accountId=s.key.id}return e}async getAccountSessions(e){let t=[],n=e.properties.tenants;for(let i of n){let s=i.id,o=await this.getAccountSecurityToken(e,s,hs.resources.azureManagementResource),c=await this._subscriptionClientFactory(o).subscriptions.list(),l=await eM(c,u=>({subscription:u,tenantId:s,account:e,token:o}));t.push(...l)}return t.sort((i,s)=>(i.subscription.displayName||"").localeCompare(s.subscription.displayName||""))}async checkAndRefreshToken(e,t){if(e?.account&&!r.isTokenValid(e.token.token,e.token.expiresOn)){let n=await this.refreshAccessToken(e.account,t,void 0,hs.resources.azureManagementResource);e.token=n,this.logger.verbose(`Access Token refreshed for account: ${e?.account?.key.id}`)}else this.logger.verbose(`Access Token not refreshed for account: ${e?.account?.key.id}`)}static isTokenValid(e,t){return!!e&&!r.isTokenExpired(t)}static isTokenExpired(e){if(!e)return!0;let t=Date.now()/1e3,n=2*60;return e-t<n}async promptForTenantChoice(e,t){let n=e.properties.tenants?.map(s=>({name:s.displayName,value:s}));if(n&&n.length===1){t.tenantId=n[0].value.id;return}let i={type:vi.expand,name:TT,message:ET,choices:n,shouldPrompt:s=>t.isAzureActiveDirectory()&&n.length>1,onAnswered:s=>{t.tenantId=s.id}};await this.prompter.promptSingle(i,!0)}async findOrMakeStoragePath(){let e=this.getDefaultOutputLocation(),t=nme.join(e,AAe);try{await ime.promises.mkdir(e,{recursive:!0})}catch(n){if(n.code!=="EEXIST"){this.logger.error(`Creating the base directory failed... ${n}`);return}}try{await ime.promises.mkdir(t,{recursive:!0})}catch(n){if(n.code!=="EEXIST"){this.logger.error(`Initialization of vscode-mssql storage failed: ${n}`),this.logger.error("Azure accounts will not be available");return}}return this.logger.log("Initialized vscode-mssql storage."),t}getDefaultOutputLocation(){return nme.join(OG(),HB)}};var at={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},ws={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},pp=[at.OPENID_SCOPE,at.PROFILE_SCOPE,at.OFFLINE_ACCESS_SCOPE],sme=[...pp,at.EMAIL_SCOPE],oc={CONTENT_TYPE:"Content-Type",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"};var Um={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},sI={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},Jg={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},oI={PLAIN:"plain",S256:"S256"},RVe={QUERY:"query",FRAGMENT:"fragment"},Mb={...RVe,FORM_POST:"form_post"},Zg={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},aI={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},Go={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},Ns={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"};var EL="appmetadata",xVe="client_info",kb="1",cI={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},$l={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},Na={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},Ki={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},ey={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},MW={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},kW={username:"username",password:"password"},TL={httpSuccess:200,httpBadRequest:400},eP={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},LW={CONFIGURED_MATCHES_DETECTED:"1",CONFIGURED_NO_AUTO_DETECTION:"2",CONFIGURED_NOT_DETECTED:"3",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},Bm={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"};var ome=300;var xL={};Ea(xL,{postRequestFailed:()=>RL,unexpectedError:()=>IL});var IL="unexpected_error",RL="post_request_failed";var qW={[IL]:"Unexpected error in authentication.",[RL]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},OVe={unexpectedError:{code:IL,desc:qW[IL]},postRequestFailed:{code:RL,desc:qW[RL]}},Ei=class r extends Error{constructor(e,t,n){let i=t?`${e}: ${t}`:e;super(i),Object.setPrototypeOf(this,r.prototype),this.errorCode=e||at.EMPTY_STRING,this.errorMessage=t||at.EMPTY_STRING,this.subError=n||at.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}};function ame(r,e){return new Ei(r,e?`${qW[r]} ${e}`:qW[r])}var Pu={};Ea(Pu,{authTimeNotFound:()=>ty,authorizationCodeMissingFromServerResponse:()=>fP,bindingKeyNotRemoved:()=>gP,cannotAppendScopeSet:()=>pP,cannotRemoveEmptyScope:()=>dP,clientInfoDecodingError:()=>Lb,clientInfoEmptyError:()=>tP,deviceCodeExpired:()=>DL,deviceCodePollingCancelled:()=>NL,deviceCodeUnknownError:()=>ML,emptyInputScopeSet:()=>Fb,endSessionEndpointNotSupported:()=>yP,endpointResolutionError:()=>Vl,hashNotDeserialized:()=>sP,invalidAssertion:()=>qL,invalidCacheEnvironment:()=>ny,invalidCacheRecord:()=>mP,invalidClientCredential:()=>zL,invalidState:()=>Gm,keyIdMissing:()=>vP,maxAgeTranspired:()=>cP,methodNotImplemented:()=>$n,missingTenantIdError:()=>BL,multipleMatchingAccounts:()=>AL,multipleMatchingAppMetadata:()=>lP,multipleMatchingTokens:()=>OL,nestedAppAuthBridgeDisabled:()=>GL,networkError:()=>nP,noAccountFound:()=>kL,noAccountInSilentRequest:()=>ry,noCryptoObject:()=>jb,noNetworkConnectivity:()=>jL,nonceMismatch:()=>aP,nullOrEmptyToken:()=>rP,openIdConfigError:()=>iP,requestCannotBeMade:()=>uP,stateMismatch:()=>oP,stateNotFound:()=>zb,tokenClaimsCnfRequiredForSignedJwt:()=>hP,tokenParsingError:()=>qb,tokenRefreshRequired:()=>pf,unexpectedCredentialType:()=>LL,userCanceled:()=>UL,userTimeoutReached:()=>FL});var Lb="client_info_decoding_error",tP="client_info_empty_error",qb="token_parsing_error",rP="null_or_empty_token",Vl="endpoints_resolution_error",nP="network_error",iP="openid_config_error",sP="hash_not_deserialized",Gm="invalid_state",oP="state_mismatch",zb="state_not_found",aP="nonce_mismatch",ty="auth_time_not_found",cP="max_age_transpired",OL="multiple_matching_tokens",AL="multiple_matching_accounts",lP="multiple_matching_appMetadata",uP="request_cannot_be_made",dP="cannot_remove_empty_scope",pP="cannot_append_scopeset",Fb="empty_input_scopeset",NL="device_code_polling_cancelled",DL="device_code_expired",ML="device_code_unknown_error",ry="no_account_in_silent_request",mP="invalid_cache_record",ny="invalid_cache_environment",kL="no_account_found",jb="no_crypto_object",LL="unexpected_credential_type",qL="invalid_assertion",zL="invalid_client_credential",pf="token_refresh_required",FL="user_timeout_reached",hP="token_claims_cnf_required_for_signedjwt",fP="authorization_code_missing_from_server_response",gP="binding_key_not_removed",yP="end_session_endpoint_not_supported",vP="key_id_missing",jL="no_network_connectivity",UL="user_canceled",BL="missing_tenant_id_error",$n="method_not_implemented",GL="nested_app_auth_bridge_disabled";var kn={[Lb]:"The client info could not be parsed/decoded correctly",[tP]:"The client info was empty",[qb]:"Token cannot be parsed",[rP]:"The token is null or empty",[Vl]:"Endpoints cannot be resolved",[nP]:"Network request failed",[iP]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[sP]:"The hash parameters could not be deserialized",[Gm]:"State was not the expected format",[oP]:"State mismatch error",[zb]:"State not found",[aP]:"Nonce mismatch error",[ty]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[cP]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[OL]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[AL]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[lP]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[uP]:"Token request cannot be made without authorization code or refresh token.",[dP]:"Cannot remove null or empty scope from ScopeSet",[pP]:"Cannot append ScopeSet",[Fb]:"Empty input ScopeSet cannot be processed",[NL]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[DL]:"Device code is expired.",[ML]:"Device code stopped polling for unknown reasons.",[ry]:"Please pass an account object, silent flow is not supported without account information",[mP]:"Cache record object was null or undefined.",[ny]:"Invalid environment when attempting to create cache entry",[kL]:"No account found in cache for given key.",[jb]:"No crypto object detected.",[LL]:"Unexpected credential type.",[qL]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[zL]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[pf]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[FL]:"User defined timeout for device code polling reached",[hP]:"Cannot generate a POP jwt if the token_claims are not populated",[fP]:"Server response does not contain an authorization code to proceed",[gP]:"Could not remove the credential's binding key from storage.",[yP]:"The provided authority does not support logout",[vP]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[jL]:"No network connectivity. Check your internet connection.",[UL]:"User cancelled the flow.",[BL]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[$n]:"This method has not been implemented",[GL]:"The nested app auth bridge is disabled"},AVe={clientInfoDecodingError:{code:Lb,desc:kn[Lb]},clientInfoEmptyError:{code:tP,desc:kn[tP]},tokenParsingError:{code:qb,desc:kn[qb]},nullOrEmptyToken:{code:rP,desc:kn[rP]},endpointResolutionError:{code:Vl,desc:kn[Vl]},networkError:{code:nP,desc:kn[nP]},unableToGetOpenidConfigError:{code:iP,desc:kn[iP]},hashNotDeserialized:{code:sP,desc:kn[sP]},invalidStateError:{code:Gm,desc:kn[Gm]},stateMismatchError:{code:oP,desc:kn[oP]},stateNotFoundError:{code:zb,desc:kn[zb]},nonceMismatchError:{code:aP,desc:kn[aP]},authTimeNotFoundError:{code:ty,desc:kn[ty]},maxAgeTranspired:{code:cP,desc:kn[cP]},multipleMatchingTokens:{code:OL,desc:kn[OL]},multipleMatchingAccounts:{code:AL,desc:kn[AL]},multipleMatchingAppMetadata:{code:lP,desc:kn[lP]},tokenRequestCannotBeMade:{code:uP,desc:kn[uP]},removeEmptyScopeError:{code:dP,desc:kn[dP]},appendScopeSetError:{code:pP,desc:kn[pP]},emptyInputScopeSetError:{code:Fb,desc:kn[Fb]},DeviceCodePollingCancelled:{code:NL,desc:kn[NL]},DeviceCodeExpired:{code:DL,desc:kn[DL]},DeviceCodeUnknownError:{code:ML,desc:kn[ML]},NoAccountInSilentRequest:{code:ry,desc:kn[ry]},invalidCacheRecord:{code:mP,desc:kn[mP]},invalidCacheEnvironment:{code:ny,desc:kn[ny]},noAccountFound:{code:kL,desc:kn[kL]},noCryptoObj:{code:jb,desc:kn[jb]},unexpectedCredentialType:{code:LL,desc:kn[LL]},invalidAssertion:{code:qL,desc:kn[qL]},invalidClientCredential:{code:zL,desc:kn[zL]},tokenRefreshRequired:{code:pf,desc:kn[pf]},userTimeoutReached:{code:FL,desc:kn[FL]},tokenClaimsRequired:{code:hP,desc:kn[hP]},noAuthorizationCodeFromServer:{code:fP,desc:kn[fP]},bindingKeyNotRemovedError:{code:gP,desc:kn[gP]},logoutNotSupported:{code:yP,desc:kn[yP]},keyIdMissing:{code:vP,desc:kn[vP]},noNetworkConnectivity:{code:jL,desc:kn[jL]},userCanceledError:{code:UL,desc:kn[UL]},missingTenantIdError:{code:BL,desc:kn[BL]},nestedAppAuthBridgeDisabled:{code:GL,desc:kn[GL]}},iy=class r extends Ei{constructor(e,t){super(e,t?`${kn[e]}: ${t}`:kn[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,r.prototype)}};function xt(r,e){return new iy(r,e)}function Ub(r,e){let t=r4t(r);try{let n=e(t);return JSON.parse(n)}catch{throw xt(qb)}}function r4t(r){if(!r)throw xt(rP);let t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(r);if(!t||t.length<4)throw xt(qb);return t[2]}function zW(r,e){if(e===0||Date.now()-3e5>r+e)throw xt(cP)}var JW={};Ea(JW,{createDiscoveredInstance:()=>yme});var mp={Default:0,Adfs:1,Dsts:2,Ciam:3};function NVe(r){return r.hasOwnProperty("authorization_endpoint")&&r.hasOwnProperty("token_endpoint")&&r.hasOwnProperty("issuer")&&r.hasOwnProperty("jwks_uri")}var lI="redirect_uri_empty",FW="claims_request_parsing_error",uI="authority_uri_insecure",sy="url_parse_error",dI="empty_url_error",pI="empty_input_scopes_error",mI="invalid_prompt_value",Bb="invalid_claims",hI="token_request_empty",fI="logout_request_empty",gI="invalid_code_challenge_method",Gb="pkce_params_missing",bP="invalid_cloud_discovery_metadata",yI="invalid_authority_metadata",vI="untrusted_authority",$b="missing_ssh_jwk",jW="missing_ssh_kid",UW="missing_nonce_authentication_header",BW="invalid_authentication_header",GW="cannot_set_OIDCOptions",$W="cannot_allow_native_broker",VW="authority_mismatch";var wo={[lI]:"A redirect URI is required for all calls, and none has been set.",[FW]:"Could not parse the given claims request object.",[uI]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[sy]:"URL could not be parsed into appropriate segments.",[dI]:"URL was empty or null.",[pI]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[mI]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[Bb]:"Given claims parameter must be a stringified JSON object.",[hI]:"Token request was empty and not found in cache.",[fI]:"The logout request was null or undefined.",[gI]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[Gb]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[bP]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[yI]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[vI]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[$b]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[jW]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[UW]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[BW]:"Invalid authentication header provided",[GW]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[$W]:"Cannot set allowNativeBroker parameter to true when not in AAD protocol mode.",[VW]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."},i4t={redirectUriNotSet:{code:lI,desc:wo[lI]},claimsRequestParsingError:{code:FW,desc:wo[FW]},authorityUriInsecure:{code:uI,desc:wo[uI]},urlParseError:{code:sy,desc:wo[sy]},urlEmptyError:{code:dI,desc:wo[dI]},emptyScopesError:{code:pI,desc:wo[pI]},invalidPrompt:{code:mI,desc:wo[mI]},invalidClaimsRequest:{code:Bb,desc:wo[Bb]},tokenRequestEmptyError:{code:hI,desc:wo[hI]},logoutRequestEmptyError:{code:fI,desc:wo[fI]},invalidCodeChallengeMethod:{code:gI,desc:wo[gI]},invalidCodeChallengeParams:{code:Gb,desc:wo[Gb]},invalidCloudDiscoveryMetadata:{code:bP,desc:wo[bP]},invalidAuthorityMetadata:{code:yI,desc:wo[yI]},untrustedAuthority:{code:vI,desc:wo[vI]},missingSshJwk:{code:$b,desc:wo[$b]},missingSshKid:{code:jW,desc:wo[jW]},missingNonceAuthenticationHeader:{code:UW,desc:wo[UW]},invalidAuthenticationHeader:{code:BW,desc:wo[BW]},cannotSetOIDCOptions:{code:GW,desc:wo[GW]},cannotAllowNativeBroker:{code:$W,desc:wo[$W]},authorityMismatch:{code:VW,desc:wo[VW]}},HW=class r extends Ei{constructor(e){super(e,wo[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,r.prototype)}};function fs(r){return new HW(r)}var $o=class{static isEmptyObj(e){if(e)try{let t=JSON.parse(e);return Object.keys(t).length===0}catch{}return!0}static startsWith(e,t){return e.indexOf(t)===0}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){let t={},n=e.split("&"),i=s=>decodeURIComponent(s.replace(/\+/g," "));return n.forEach(s=>{if(s.trim()){let[o,a]=s.split(/=(.+)/g,2);o&&a&&(t[i(o)]=i(a))}}),t}static trimArrayEntries(e){return e.map(t=>t.trim())}static removeEmptyStringsFromArray(e){return e.filter(t=>!!t)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}};var WW={};Ea(WW,{getDeserializedResponse:()=>cme,stripLeadingHashOrQuery:()=>DVe});function DVe(r){return r.startsWith("#/")?r.substring(2):r.startsWith("#")||r.startsWith("?")?r.substring(1):r}function cme(r){if(!r||r.indexOf("=")<0)return null;try{let e=DVe(r),t=Object.fromEntries(new URLSearchParams(e));if(t.code||t.error||t.error_description||t.state)return t}catch{throw xt(sP)}return null}var ss=class r{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw fs(dI);e.includes("#")||(this._urlString=r.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return $o.endsWith(t,"?")?t=t.slice(0,-1):$o.endsWith(t,"?/")&&(t=t.slice(0,-2)),$o.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw fs(sy)}if(!e.HostNameAndPort||!e.PathSegments)throw fs(sy);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw fs(uI)}static appendQueryString(e,t){return t?e.indexOf("?")<0?`${e}?${t}`:`${e}&${t}`:e}static removeHashFromUrl(e){return r.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){let t=this.getUrlComponents(),n=t.PathSegments;return e&&n.length!==0&&(n[0]===Um.COMMON||n[0]===Um.ORGANIZATIONS)&&(n[0]=e),r.constructAuthorityUriFromObject(t)}getUrlComponents(){let e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw fs(sy);let n={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]},i=n.AbsolutePath.split("/");return i=i.filter(s=>s&&s.length>0),n.PathSegments=i,n.QueryString&&n.QueryString.endsWith("/")&&(n.QueryString=n.QueryString.substring(0,n.QueryString.length-1)),n}static getDomainFromUrl(e){let t=RegExp("^([^:/?#]+://)?([^/?#]*)"),n=e.match(t);if(!n)throw fs(sy);return n[2]}static getAbsoluteUrl(e,t){if(e[0]===at.FORWARD_SLASH){let i=new r(t).getUrlComponents();return i.Protocol+"//"+i.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new r(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!cme(e)}};var kVe={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{tenant_discovery_endpoint:"https://{canonicalAuthority}/v2.0/.well-known/openid-configuration",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},lme=kVe.endpointMetadata,ume=kVe.instanceDiscoveryMetadata,dme=new Set;ume.metadata.forEach(r=>{r.aliases.forEach(e=>{dme.add(e)})});function LVe(r,e){let t,n=r.canonicalAuthority;if(n){let i=new ss(n).getUrlComponents().HostNameAndPort;t=MVe(i,r.cloudDiscoveryMetadata?.metadata,$l.CONFIG,e)||MVe(i,ume.metadata,$l.HARDCODED_VALUES,e)||r.knownAuthorities}return t||[]}function MVe(r,e,t,n){if(n?.trace(`getAliasesFromMetadata called with source: ${t}`),r&&e){let i=$L(e,r);if(i)return n?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${t}, returning aliases`),i.aliases;n?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${t}`)}return null}function qVe(r){return $L(ume.metadata,r)}function $L(r,e){for(let t=0;t<r.length;t++){let n=r[t];if(n.aliases.includes(e))return n}return null}var $m={AAD:"AAD",OIDC:"OIDC"};var Vb={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"};function zVe(r){return r.hasOwnProperty("tenant_discovery_endpoint")&&r.hasOwnProperty("metadata")}function FVe(r){return r.hasOwnProperty("error")&&r.hasOwnProperty("error_description")}var Ze={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",StandardInteractionClientInitializeAuthorizationCodeRequest:"standardInteractionClientInitializeAuthorizationCodeRequest",GetAuthCodeUrl:"getAuthCodeUrl",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",AuthClientCreateQueryString:"authClientCreateQueryString",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues"},Akr=new Map([[Ze.AcquireTokenByCode,"ATByCode"],[Ze.AcquireTokenByRefreshToken,"ATByRT"],[Ze.AcquireTokenSilent,"ATS"],[Ze.AcquireTokenSilentAsync,"ATSAsync"],[Ze.AcquireTokenPopup,"ATPopup"],[Ze.AcquireTokenRedirect,"ATRedirect"],[Ze.CryptoOptsGetPublicKeyThumbprint,"CryptoGetPKThumb"],[Ze.CryptoOptsSignJwt,"CryptoSignJwt"],[Ze.SilentCacheClientAcquireToken,"SltCacheClientAT"],[Ze.SilentIframeClientAcquireToken,"SltIframeClientAT"],[Ze.SilentRefreshClientAcquireToken,"SltRClientAT"],[Ze.SsoSilent,"SsoSlt"],[Ze.StandardInteractionClientGetDiscoveredAuthority,"StdIntClientGetDiscAuth"],[Ze.FetchAccountIdWithNativeBroker,"FetchAccIdWithNtvBroker"],[Ze.NativeInteractionClientAcquireToken,"NtvIntClientAT"],[Ze.BaseClientCreateTokenRequestHeaders,"BaseClientCreateTReqHead"],[Ze.RefreshTokenClientExecutePostToTokenEndpoint,"RTClientExecPost"],[Ze.AuthorizationCodeClientExecutePostToTokenEndpoint,"AuthCodeClientExecPost"],[Ze.BrokerHandhshake,"BrokerHandshake"],[Ze.AcquireTokenByRefreshTokenInBroker,"ATByRTInBroker"],[Ze.AcquireTokenByBroker,"ATByBroker"],[Ze.RefreshTokenClientExecuteTokenRequest,"RTClientExecTReq"],[Ze.RefreshTokenClientAcquireToken,"RTClientAT"],[Ze.RefreshTokenClientAcquireTokenWithCachedRefreshToken,"RTClientATWithCachedRT"],[Ze.RefreshTokenClientAcquireTokenByRefreshToken,"RTClientATByRT"],[Ze.RefreshTokenClientCreateTokenRequestBody,"RTClientCreateTReqBody"],[Ze.AcquireTokenFromCache,"ATFromCache"],[Ze.SilentFlowClientAcquireCachedToken,"SltFlowClientATCached"],[Ze.SilentFlowClientGenerateResultFromCacheRecord,"SltFlowClientGenResFromCache"],[Ze.AcquireTokenBySilentIframe,"ATBySltIframe"],[Ze.InitializeBaseRequest,"InitBaseReq"],[Ze.InitializeSilentRequest,"InitSltReq"],[Ze.InitializeClientApplication,"InitClientApplication"],[Ze.SilentIframeClientTokenHelper,"SIClientTHelper"],[Ze.SilentHandlerInitiateAuthRequest,"SHandlerInitAuthReq"],[Ze.SilentHandlerMonitorIframeForHash,"SltHandlerMonitorIframeForHash"],[Ze.SilentHandlerLoadFrame,"SHandlerLoadFrame"],[Ze.SilentHandlerLoadFrameSync,"SHandlerLoadFrameSync"],[Ze.StandardInteractionClientCreateAuthCodeClient,"StdIntClientCreateAuthCodeClient"],[Ze.StandardInteractionClientGetClientConfiguration,"StdIntClientGetClientConf"],[Ze.StandardInteractionClientInitializeAuthorizationRequest,"StdIntClientInitAuthReq"],[Ze.StandardInteractionClientInitializeAuthorizationCodeRequest,"StdIntClientInitAuthCodeReq"],[Ze.GetAuthCodeUrl,"GetAuthCodeUrl"],[Ze.HandleCodeResponseFromServer,"HandleCodeResFromServer"],[Ze.HandleCodeResponse,"HandleCodeResp"],[Ze.UpdateTokenEndpointAuthority,"UpdTEndpointAuth"],[Ze.AuthClientAcquireToken,"AuthClientAT"],[Ze.AuthClientExecuteTokenRequest,"AuthClientExecTReq"],[Ze.AuthClientCreateTokenRequestBody,"AuthClientCreateTReqBody"],[Ze.AuthClientCreateQueryString,"AuthClientCreateQueryStr"],[Ze.PopTokenGenerateCnf,"PopTGenCnf"],[Ze.PopTokenGenerateKid,"PopTGenKid"],[Ze.HandleServerTokenResponse,"HandleServerTRes"],[Ze.DeserializeResponse,"DeserializeRes"],[Ze.AuthorityFactoryCreateDiscoveredInstance,"AuthFactCreateDiscInst"],[Ze.AuthorityResolveEndpointsAsync,"AuthResolveEndpointsAsync"],[Ze.AuthorityResolveEndpointsFromLocalSources,"AuthResolveEndpointsFromLocal"],[Ze.AuthorityGetCloudDiscoveryMetadataFromNetwork,"AuthGetCDMetaFromNet"],[Ze.AuthorityUpdateCloudDiscoveryMetadata,"AuthUpdCDMeta"],[Ze.AuthorityGetEndpointMetadataFromNetwork,"AuthUpdCDMetaFromNet"],[Ze.AuthorityUpdateEndpointMetadata,"AuthUpdEndpointMeta"],[Ze.AuthorityUpdateMetadataWithRegionalInformation,"AuthUpdMetaWithRegInfo"],[Ze.RegionDiscoveryDetectRegion,"RegDiscDetectReg"],[Ze.RegionDiscoveryGetRegionFromIMDS,"RegDiscGetRegFromIMDS"],[Ze.RegionDiscoveryGetCurrentVersion,"RegDiscGetCurrentVer"],[Ze.AcquireTokenByCodeAsync,"ATByCodeAsync"],[Ze.GetEndpointMetadataFromNetwork,"GetEndpointMetaFromNet"],[Ze.GetCloudDiscoveryMetadataFromNetworkMeasurement,"GetCDMetaFromNet"],[Ze.HandleRedirectPromiseMeasurement,"HandleRedirectPromise"],[Ze.HandleNativeRedirectPromiseMeasurement,"HandleNtvRedirectPromise"],[Ze.UpdateCloudDiscoveryMetadataMeasurement,"UpdateCDMeta"],[Ze.UsernamePasswordClientAcquireToken,"UserPassClientAT"],[Ze.NativeMessageHandlerHandshake,"NtvMsgHandlerHandshake"],[Ze.NativeGenerateAuthResult,"NtvGenAuthRes"],[Ze.RemoveHiddenIframe,"RemoveHiddenIframe"],[Ze.ClearTokensAndKeysWithClaims,"ClearTAndKeysWithClaims"],[Ze.CacheManagerGetRefreshToken,"CacheManagerGetRT"],[Ze.GeneratePkceCodes,"GenPkceCodes"],[Ze.GenerateCodeVerifier,"GenCodeVerifier"],[Ze.GenerateCodeChallengeFromVerifier,"GenCodeChallengeFromVerifier"],[Ze.Sha256Digest,"Sha256Digest"],[Ze.GetRandomValues,"GetRandomValues"]]);var jVe=(r,e,t,n,i)=>(...s)=>{t.trace(`Executing function ${e}`);let o=n?.startMeasurement(e,i);if(i){let a=e+"CallCount";n?.incrementFields({[a]:1},i)}try{let a=r(...s);return o?.end({success:!0}),t.trace(`Returning result from ${e}`),a}catch(a){t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(a))}catch{t.trace("Unable to print error message.")}throw o?.end({success:!1},a),a}},bi=(r,e,t,n,i)=>(...s)=>{t.trace(`Executing function ${e}`);let o=n?.startMeasurement(e,i);if(i){let a=e+"CallCount";n?.incrementFields({[a]:1},i)}return n?.setPreQueueTime(e,i),r(...s).then(a=>(t.trace(`Returning result from ${e}`),o?.end({success:!0}),a)).catch(a=>{t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(a))}catch{t.trace("Unable to print error message.")}throw o?.end({success:!1},a),a})};var VL=class r{constructor(e,t,n,i){this.networkInterface=e,this.logger=t,this.performanceClient=n,this.correlationId=i}async detectRegion(e,t){this.performanceClient?.addQueueMeasurement(Ze.RegionDiscoveryDetectRegion,this.correlationId);let n=e;if(n)t.region_source=eP.ENVIRONMENT_VARIABLE;else{let i=r.IMDS_OPTIONS;try{let s=await bi(this.getRegionFromIMDS.bind(this),Ze.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(at.IMDS_VERSION,i);if(s.status===TL.httpSuccess&&(n=s.body,t.region_source=eP.IMDS),s.status===TL.httpBadRequest){let o=await bi(this.getCurrentVersion.bind(this),Ze.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(i);if(!o)return t.region_source=eP.FAILED_AUTO_DETECTION,null;let a=await bi(this.getRegionFromIMDS.bind(this),Ze.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(o,i);a.status===TL.httpSuccess&&(n=a.body,t.region_source=eP.IMDS)}}catch{return t.region_source=eP.FAILED_AUTO_DETECTION,null}}return n||(t.region_source=eP.FAILED_AUTO_DETECTION),n||null}async getRegionFromIMDS(e,t){return this.performanceClient?.addQueueMeasurement(Ze.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${at.IMDS_ENDPOINT}?api-version=${e}&format=text`,t,at.IMDS_TIMEOUT)}async getCurrentVersion(e){this.performanceClient?.addQueueMeasurement(Ze.RegionDiscoveryGetCurrentVersion,this.correlationId);try{let t=await this.networkInterface.sendGetRequestAsync(`${at.IMDS_ENDPOINT}?format=json`,e);return t.status===TL.httpBadRequest&&t.body&&t.body["newest-versions"]&&t.body["newest-versions"].length>0?t.body["newest-versions"][0]:null}catch{return null}}};VL.IMDS_OPTIONS={headers:{Metadata:"true"}};var Da={};Ea(Da,{createAccessTokenEntity:()=>hme,createIdTokenEntity:()=>mme,createRefreshTokenEntity:()=>fme,generateAppMetadataKey:()=>g4t,generateAuthorityMetadataExpiresAt:()=>QW,generateCredentialKey:()=>HL,isAccessTokenEntity:()=>o4t,isAppMetadataEntity:()=>y4t,isAuthorityMetadataEntity:()=>v4t,isAuthorityMetadataExpired:()=>YW,isCredentialEntity:()=>KW,isIdTokenEntity:()=>a4t,isRefreshTokenEntity:()=>c4t,isServerTelemetryEntity:()=>h4t,isThrottlingEntity:()=>f4t,updateAuthorityEndpointMetadata:()=>_I,updateCloudDiscoveryMetadata:()=>WL});var Dc={};Ea(Dc,{delay:()=>s4t,isTokenExpired:()=>bI,nowSeconds:()=>yd,wasClockTurnedBack:()=>pme});function yd(){return Math.round(new Date().getTime()/1e3)}function bI(r,e){let t=Number(r)||0;return yd()+e>t}function pme(r){return Number(r)>yd()}function s4t(r,e){return new Promise(t=>setTimeout(()=>t(e),r))}function HL(r){return[l4t(r),u4t(r),d4t(r),p4t(r),m4t(r)].join(Go.CACHE_KEY_SEPARATOR).toLowerCase()}function mme(r,e,t,n,i){return{credentialType:Ns.ID_TOKEN,homeAccountId:r,environment:e,clientId:n,secret:t,realm:i}}function hme(r,e,t,n,i,s,o,a,c,l,u,d,p,m,f){let y={homeAccountId:r,credentialType:Ns.ACCESS_TOKEN,secret:t,cachedAt:yd().toString(),expiresOn:o.toString(),extendedExpiresOn:a.toString(),environment:e,clientId:n,realm:i,target:s,tokenType:u||Ki.BEARER};if(d&&(y.userAssertionHash=d),l&&(y.refreshOn=l.toString()),m&&(y.requestedClaims=m,y.requestedClaimsHash=f),y.tokenType?.toLowerCase()!==Ki.BEARER.toLowerCase())switch(y.credentialType=Ns.ACCESS_TOKEN_WITH_AUTH_SCHEME,y.tokenType){case Ki.POP:let v=Ub(t,c);if(!v?.cnf?.kid)throw xt(hP);y.keyId=v.cnf.kid;break;case Ki.SSH:y.keyId=p}return y}function fme(r,e,t,n,i,s,o){let a={credentialType:Ns.REFRESH_TOKEN,homeAccountId:r,environment:e,clientId:n,secret:t};return s&&(a.userAssertionHash=s),i&&(a.familyId=i),o&&(a.expiresOn=o.toString()),a}function KW(r){return r.hasOwnProperty("homeAccountId")&&r.hasOwnProperty("environment")&&r.hasOwnProperty("credentialType")&&r.hasOwnProperty("clientId")&&r.hasOwnProperty("secret")}function o4t(r){return r?KW(r)&&r.hasOwnProperty("realm")&&r.hasOwnProperty("target")&&(r.credentialType===Ns.ACCESS_TOKEN||r.credentialType===Ns.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function a4t(r){return r?KW(r)&&r.hasOwnProperty("realm")&&r.credentialType===Ns.ID_TOKEN:!1}function c4t(r){return r?KW(r)&&r.credentialType===Ns.REFRESH_TOKEN:!1}function l4t(r){return[r.homeAccountId,r.environment].join(Go.CACHE_KEY_SEPARATOR).toLowerCase()}function u4t(r){let e=r.credentialType===Ns.REFRESH_TOKEN&&r.familyId||r.clientId;return[r.credentialType,e,r.realm||""].join(Go.CACHE_KEY_SEPARATOR).toLowerCase()}function d4t(r){return(r.target||"").toLowerCase()}function p4t(r){return(r.requestedClaimsHash||"").toLowerCase()}function m4t(r){return r.tokenType&&r.tokenType.toLowerCase()!==Ki.BEARER.toLowerCase()?r.tokenType.toLowerCase():""}function h4t(r,e){let t=r.indexOf(Na.CACHE_KEY)===0,n=!0;return e&&(n=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),t&&n}function f4t(r,e){let t=!1;r&&(t=r.indexOf(ey.THROTTLING_PREFIX)===0);let n=!0;return e&&(n=e.hasOwnProperty("throttleTime")),t&&n}function g4t({environment:r,clientId:e}){return[EL,r,e].join(Go.CACHE_KEY_SEPARATOR).toLowerCase()}function y4t(r,e){return e?r.indexOf(EL)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function v4t(r,e){return e?r.indexOf(cI.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function QW(){return yd()+cI.REFRESH_TIME_SECONDS}function _I(r,e,t){r.authorization_endpoint=e.authorization_endpoint,r.token_endpoint=e.token_endpoint,r.end_session_endpoint=e.end_session_endpoint,r.issuer=e.issuer,r.endpointsFromNetwork=t,r.jwks_uri=e.jwks_uri}function WL(r,e,t){r.aliases=e.aliases,r.preferred_cache=e.preferred_cache,r.preferred_network=e.preferred_network,r.aliasesFromNetwork=t}function YW(r){return r.expiresAt<=yd()}var oy=class r{constructor(e,t,n,i,s,o,a,c){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=n,this.authorityOptions=i,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=s,this.performanceClient=a,this.correlationId=o,this.managedIdentity=c||!1,this.regionDiscovery=new VL(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(at.CIAM_AUTH_URL))return mp.Ciam;let t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case at.ADFS:return mp.Adfs;case at.DSTS:return mp.Dsts}return mp.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new ss(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw xt(Vl)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw xt(Vl)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw xt(Vl)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw xt(yP);return this.replacePath(this.metadata.end_session_endpoint)}else throw xt(Vl)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw xt(Vl)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw xt(Vl)}canReplaceTenant(e){return e.PathSegments.length===1&&!r.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===mp.Default&&this.protocolMode===$m.AAD}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e,i=new ss(this.metadata.canonical_authority).getUrlComponents(),s=i.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((a,c)=>{let l=s[c];if(c===0&&this.canReplaceTenant(i)){let u=new ss(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];l!==u&&(this.logger.verbose(`Replacing tenant domain name ${l} with id ${u}`),l=u)}a!==l&&(t=t.replace(`/${l}/`,`/${a}/`))}),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){let e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===mp.Adfs||this.protocolMode!==$m.AAD&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(Ze.AuthorityResolveEndpointsAsync,this.correlationId);let e=this.getCurrentMetadataEntity(),t=await bi(this.updateCloudDiscoveryMetadata.bind(this),Ze.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);let n=await bi(this.updateEndpointMetadata.bind(this),Ze.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,t,{source:n}),this.performanceClient?.addFields({cloudDiscoverySource:t,authorityEndpointSource:n},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:QW(),jwks_uri:""}),e}updateCachedMetadata(e,t,n){t!==$l.CACHE&&n?.source!==$l.CACHE&&(e.expiresAt=QW(),e.canonical_authority=this.canonicalAuthority);let i=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(i,e),this.metadata=e}async updateEndpointMetadata(e){this.performanceClient?.addQueueMeasurement(Ze.AuthorityUpdateEndpointMetadata,this.correlationId);let t=this.updateEndpointMetadataFromLocalSources(e);if(t){if(t.source===$l.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&t.metadata){let i=await bi(this.updateMetadataWithRegionalInformation.bind(this),Ze.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(t.metadata);_I(e,i,!1),e.canonical_authority=this.canonicalAuthority}return t.source}let n=await bi(this.getEndpointMetadataFromNetwork.bind(this),Ze.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(n)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(n=await bi(this.updateMetadataWithRegionalInformation.bind(this),Ze.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(n)),_I(e,n,!0),$l.NETWORK;throw xt(iP,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");let t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),_I(e,t,!1),{source:$l.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{let i=this.getEndpointMetadataFromHardcodedValues();if(i)return _I(e,i,!1),{source:$l.HARDCODED_VALUES,metadata:i};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}let n=YW(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!n?(this.logger.verbose("Found endpoint metadata in the cache."),{source:$l.CACHE}):(n&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new ss(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw fs(yI)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(Ze.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);let e={},t=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${t}`);try{let n=await this.networkInterface.sendGetRequestAsync(t,e);return NVe(n.body)?n.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(n){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${n}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in lme?lme[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){this.performanceClient?.addQueueMeasurement(Ze.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);let t=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(t){if(t!==at.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=LW.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=t,r.replaceWithRegionalInformation(e,t);let n=await bi(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),Ze.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(n)return this.regionDiscoveryMetadata.region_outcome=LW.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=n,r.replaceWithRegionalInformation(e,n);this.regionDiscoveryMetadata.region_outcome=LW.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){this.performanceClient?.addQueueMeasurement(Ze.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);let t=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(t)return t;let n=await bi(this.getCloudDiscoveryMetadataFromNetwork.bind(this),Ze.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(n)return WL(e,n,!0),$l.NETWORK;throw fs(vI)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||at.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||at.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||at.NOT_APPLICABLE}`);let t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),WL(e,t,!1),$l.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{let i=qVe(this.hostnameAndPort);if(i)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),WL(e,i,!1),$l.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}let n=YW(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!n?(this.logger.verbose("Found cloud discovery metadata in the cache."),$l.CACHE):(n&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===mp.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),r.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");let e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),t=$L(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),t)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),t;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),fs(bP)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),r.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(Ze.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);let e=`${at.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,t={},n=null;try{let i=await this.networkInterface.sendGetRequestAsync(e,t),s,o;if(zVe(i.body))s=i.body,o=s.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${s.tenant_discovery_endpoint}`);else if(FVe(i.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${i.status}`),s=i.body,s.error===at.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${s.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${s.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),o=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),n=$L(o,this.hostnameAndPort)}catch(i){if(i instanceof Ei)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${i.errorCode}
Error Description: ${i.errorMessage}`);else{let s=i;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${s.name}
Error Description: ${s.message}`)}return null}return n||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),n=r.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),n}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(t=>t&&ss.getDomainFromUrl(t).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,t){let n;if(t&&t.azureCloudInstance!==Vb.None){let i=t.tenant?t.tenant:at.DEFAULT_COMMON_TENANT;n=`${t.azureCloudInstance}/${i}/`}return n||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return at.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw xt(Vl)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return dme.has(e)}static isPublicCloudAuthority(e){return at.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,n){let i=new ss(e);i.validateAsUri();let s=i.getUrlComponents(),o=`${t}.${s.HostNameAndPort}`;this.isPublicCloudAuthority(s.HostNameAndPort)&&(o=`${t}.${at.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);let a=ss.constructAuthorityUriFromObject({...i.getUrlComponents(),HostNameAndPort:o}).urlString;return n?`${a}?${n}`:a}static replaceWithRegionalInformation(e,t){let n={...e};return n.authorization_endpoint=r.buildRegionalAuthorityString(n.authorization_endpoint,t),n.token_endpoint=r.buildRegionalAuthorityString(n.token_endpoint,t),n.end_session_endpoint&&(n.end_session_endpoint=r.buildRegionalAuthorityString(n.end_session_endpoint,t)),n}static transformCIAMAuthority(e){let t=e,i=new ss(e).getUrlComponents();if(i.PathSegments.length===0&&i.HostNameAndPort.endsWith(at.CIAM_AUTH_URL)){let s=i.HostNameAndPort.split(".")[0];t=`${t}${s}${at.AAD_TENANT_DOMAIN_SUFFIX}`}return t}};oy.reservedTenantDomains=new Set(["{tenant}","{tenantid}",Um.COMMON,Um.CONSUMERS,Um.ORGANIZATIONS]);function UVe(r){let n=new ss(r).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(n){case Um.COMMON:case Um.ORGANIZATIONS:case Um.CONSUMERS:return;default:return n}}function XW(r){return r.endsWith(at.FORWARD_SLASH)?r:`${r}${at.FORWARD_SLASH}`}function gme(r){let e=r.cloudDiscoveryMetadata,t;if(e)try{t=JSON.parse(e)}catch{throw fs(bP)}return{canonicalAuthority:r.authority?XW(r.authority):void 0,knownAuthorities:r.knownAuthorities,cloudDiscoveryMetadata:t}}async function yme(r,e,t,n,i,s,o){o?.addQueueMeasurement(Ze.AuthorityFactoryCreateDiscoveredInstance,s);let a=oy.transformCIAMAuthority(XW(r)),c=new oy(a,e,t,n,i,s,o);try{return await bi(c.resolveEndpointsAsync.bind(c),Ze.AuthorityResolveEndpointsAsync,i,o,s)(),c}catch{throw xt(Vl)}}async function ay(r,e,t){return typeof r=="string"?r:r({clientId:e,tokenEndpoint:t})}var KL={};Ea(KL,{ACCESS_TOKEN:()=>S4t,CCS_HEADER:()=>x4t,CLAIMS:()=>Sme,CLIENT_ASSERTION:()=>Vme,CLIENT_ASSERTION_TYPE:()=>Hme,CLIENT_ID:()=>Hb,CLIENT_INFO:()=>T4t,CLIENT_REQUEST_ID:()=>Ame,CLIENT_SECRET:()=>$me,CODE:()=>Ime,CODE_CHALLENGE:()=>Rme,CODE_CHALLENGE_METHOD:()=>xme,CODE_VERIFIER:()=>Ome,DEVICE_CODE:()=>Gme,DOMAIN_HINT:()=>Zme,ERROR:()=>b4t,ERROR_DESCRIPTION:()=>_4t,EXPIRES_IN:()=>P4t,FOCI:()=>R4t,GRANT_TYPE:()=>_me,ID_TOKEN:()=>C4t,ID_TOKEN_HINT:()=>Bme,LOGIN_HINT:()=>Jme,LOGOUT_HINT:()=>Yme,NATIVE_BROKER:()=>Qme,NONCE:()=>Eme,OBO_ASSERTION:()=>Wme,ON_BEHALF_OF:()=>I4t,POST_LOGOUT_URI:()=>Ume,PROMPT:()=>Tme,REDIRECT_URI:()=>vme,REFRESH_TOKEN:()=>Pme,REFRESH_TOKEN_EXPIRES_IN:()=>w4t,REQUESTED_TOKEN_USE:()=>Kme,REQ_CNF:()=>t3,RESPONSE_MODE:()=>bme,RESPONSE_TYPE:()=>ZW,RETURN_SPA_CODE:()=>r3,SCOPE:()=>Cme,SESSION_STATE:()=>E4t,SID:()=>Xme,STATE:()=>wme,TOKEN_TYPE:()=>e3,X_APP_NAME:()=>Fme,X_APP_VER:()=>jme,X_CLIENT_CPU:()=>kme,X_CLIENT_CURR_TELEM:()=>Lme,X_CLIENT_EXTRA_SKU:()=>O4t,X_CLIENT_LAST_TELEM:()=>qme,X_CLIENT_OS:()=>Mme,X_CLIENT_SKU:()=>Nme,X_CLIENT_VER:()=>Dme,X_MS_LIB_CAPABILITY:()=>zme});var Hb="client_id",vme="redirect_uri",ZW="response_type",bme="response_mode",_me="grant_type",Sme="claims",Cme="scope",b4t="error",_4t="error_description",S4t="access_token",C4t="id_token",Pme="refresh_token",P4t="expires_in",w4t="refresh_token_expires_in",wme="state",Eme="nonce",Tme="prompt",E4t="session_state",T4t="client_info",Ime="code",Rme="code_challenge",xme="code_challenge_method",Ome="code_verifier",Ame="client-request-id",Nme="x-client-SKU",Dme="x-client-VER",Mme="x-client-OS",kme="x-client-CPU",Lme="x-client-current-telemetry",qme="x-client-last-telemetry",zme="x-ms-lib-capability",Fme="x-app-name",jme="x-app-ver",Ume="post_logout_redirect_uri",Bme="id_token_hint",Gme="device_code",$me="client_secret",Vme="client_assertion",Hme="client_assertion_type",e3="token_type",t3="req_cnf",Wme="assertion",Kme="requested_token_use",I4t="on_behalf_of",R4t="foci",x4t="X-AnchorMailbox",r3="return_spa_code",Qme="nativebroker",Yme="logout_hint",Xme="sid",Jme="login_hint",Zme="domain_hint",O4t="x-client-xtra-sku";var ehe={createNewGuid:()=>{throw xt($n)},base64Decode:()=>{throw xt($n)},base64Encode:()=>{throw xt($n)},base64UrlEncode:()=>{throw xt($n)},encodeKid:()=>{throw xt($n)},async getPublicKeyThumbprint(){throw xt($n)},async removeTokenBindingKey(){throw xt($n)},async clearKeystore(){throw xt($n)},async signJwt(){throw xt($n)},async hashString(){throw xt($n)}};var Ds;(function(r){r[r.Error=0]="Error",r[r.Warning=1]="Warning",r[r.Info=2]="Info",r[r.Verbose=3]="Verbose",r[r.Trace=4]="Trace"})(Ds||(Ds={}));var mf=class r{constructor(e,t,n){this.level=Ds.Info;let i=()=>{},s=e||r.createDefaultLoggerOptions();this.localCallback=s.loggerCallback||i,this.piiLoggingEnabled=s.piiLoggingEnabled||!1,this.level=typeof s.logLevel=="number"?s.logLevel:Ds.Info,this.correlationId=s.correlationId||at.EMPTY_STRING,this.packageName=t||at.EMPTY_STRING,this.packageVersion=n||at.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Ds.Info}}clone(e,t,n){return new r({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:n||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;let s=`${`[${new Date().toUTCString()}] : [${t.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${Ds[t.logLevel]} - ${e}`;this.executeCallback(t.logLevel,s,t.containsPii||!1)}executeCallback(e,t,n){this.localCallback&&this.localCallback(e,t,n)}error(e,t){this.logMessage(e,{logLevel:Ds.Error,containsPii:!1,correlationId:t||at.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:Ds.Error,containsPii:!0,correlationId:t||at.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:Ds.Warning,containsPii:!1,correlationId:t||at.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:Ds.Warning,containsPii:!0,correlationId:t||at.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:Ds.Info,containsPii:!1,correlationId:t||at.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:Ds.Info,containsPii:!0,correlationId:t||at.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:Ds.Verbose,containsPii:!1,correlationId:t||at.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:Ds.Verbose,containsPii:!0,correlationId:t||at.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:Ds.Trace,containsPii:!1,correlationId:t||at.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:Ds.Trace,containsPii:!0,correlationId:t||at.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}};var n3="@azure/msal-common",SI="14.14.0";var vd=class r{constructor(e){let t=e?$o.trimArrayEntries([...e]):[],n=t?$o.removeEmptyStringsFromArray(t):[];this.validateInputScopes(n),this.scopes=new Set,n.forEach(i=>this.scopes.add(i))}static fromString(e){let n=(e||at.EMPTY_STRING).split(" ");return new r(n)}static createSearchScopes(e){let t=new r(e);return t.containsOnlyOIDCScopes()?t.removeScope(at.OFFLINE_ACCESS_SCOPE):t.removeOIDCScopes(),t}validateInputScopes(e){if(!e||e.length<1)throw fs(pI)}containsScope(e){let t=this.printScopesLowerCase().split(" "),n=new r(t);return e?n.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(t=>this.containsScope(t))}containsOnlyOIDCScopes(){let e=0;return sme.forEach(t=>{this.containsScope(t)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(t=>this.appendScope(t))}catch{throw xt(pP)}}removeScope(e){if(!e)throw xt(dP);this.scopes.delete(e.trim())}removeOIDCScopes(){sme.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw xt(Fb);let t=new Set;return e.scopes.forEach(n=>t.add(n.toLowerCase())),this.scopes.forEach(n=>t.add(n.toLowerCase())),t}intersectingScopeSets(e){if(!e)throw xt(Fb);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();let t=this.unionScopeSets(e),n=e.getScopeCount(),i=this.getScopeCount();return t.size<i+n}getScopeCount(){return this.scopes.size}asArray(){let e=[];return this.scopes.forEach(t=>e.push(t)),e}printScopes(){return this.scopes?this.asArray().join(" "):at.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}};function CI(r,e){if(!r)throw xt(tP);try{let t=e(r);return JSON.parse(t)}catch{throw xt(Lb)}}function cy(r){if(!r)throw xt(Lb);let e=r.split(Go.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?at.EMPTY_STRING:e[1]}}function QL(r,e){return!!r&&!!e&&r===e.split(".")[1]}function YL(r,e,t,n){if(n){let{oid:i,sub:s,tid:o,name:a,tfp:c,acr:l}=n,u=o||c||l||"";return{tenantId:u,localAccountId:i||s||"",name:a,isHomeTenant:QL(u,r)}}else return{tenantId:t,localAccountId:e,isHomeTenant:QL(t,r)}}function i3(r,e,t,n){let i=r;if(e){let{isHomeTenant:s,...o}=e;i={...r,...o}}if(t){let{isHomeTenant:s,...o}=YL(r.homeAccountId,r.localAccountId,r.tenantId,t);return i={...i,...o,idTokenClaims:t,idToken:n},i}return i}function s3(r){return r&&(r.tid||r.tfp||r.acr)||null}var Mc=class r{generateAccountId(){return[this.homeAccountId,this.environment].join(Go.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return r.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){let t=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",t||e.tenantId||""].join(Go.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(e,t,n){let i=new r;t.authorityType===mp.Adfs?i.authorityType=aI.ADFS_ACCOUNT_TYPE:t.protocolMode===$m.AAD?i.authorityType=aI.MSSTS_ACCOUNT_TYPE:i.authorityType=aI.GENERIC_ACCOUNT_TYPE;let s;e.clientInfo&&n&&(s=CI(e.clientInfo,n)),i.clientInfo=e.clientInfo,i.homeAccountId=e.homeAccountId,i.nativeAccountId=e.nativeAccountId;let o=e.environment||t&&t.getPreferredCache();if(!o)throw xt(ny);i.environment=o,i.realm=s?.utid||s3(e.idTokenClaims)||"",i.localAccountId=s?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";let a=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,c=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(i.username=a||c||"",i.name=e.idTokenClaims?.name||"",i.cloudGraphHostName=e.cloudGraphHostName,i.msGraphHost=e.msGraphHost,e.tenantProfiles)i.tenantProfiles=e.tenantProfiles;else{let l=YL(e.homeAccountId,i.localAccountId,i.realm,e.idTokenClaims);i.tenantProfiles=[l]}return i}static createFromAccountInfo(e,t,n){let i=new r;return i.authorityType=e.authorityType||aI.GENERIC_ACCOUNT_TYPE,i.homeAccountId=e.homeAccountId,i.localAccountId=e.localAccountId,i.nativeAccountId=e.nativeAccountId,i.realm=e.tenantId,i.environment=e.environment,i.username=e.username,i.name=e.name,i.cloudGraphHostName=t,i.msGraphHost=n,i.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),i}static generateHomeAccountId(e,t,n,i,s){if(!(t===mp.Adfs||t===mp.Dsts)){if(e)try{let o=CI(e,i.base64Decode);if(o.uid&&o.utid)return`${o.uid}.${o.utid}`}catch{}n.warning("No client info in response")}return s?.sub||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,t,n){if(!e||!t)return!1;let i=!0;if(n){let s=e.idTokenClaims||{},o=t.idTokenClaims||{};i=s.iat===o.iat&&s.nonce===o.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&i}};var o3="cache_quota_exceeded",XL="cache_error_unknown";var the={[o3]:"Exceeded cache storage capacity.",[XL]:"Unexpected error occurred when using cache storage."},PI=class r extends Error{constructor(e,t){let n=t||(the[e]?the[e]:the[XL]);super(`${e}: ${n}`),Object.setPrototypeOf(this,r.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=n}};var Wb=class r{constructor(e,t,n,i){this.clientId=e,this.cryptoImpl=t,this.commonLogger=n.clone(n3,SI),this.staticAuthorityOptions=i}getAllAccounts(e){return this.buildTenantProfiles(this.getAccountsFilteredBy(e||{}),e)}getAccountInfoFilteredBy(e){let t=this.getAllAccounts(e);return t.length>1?t.sort(i=>i.idTokenClaims?-1:1)[0]:t.length===1?t[0]:null}getBaseAccountInfo(e){let t=this.getAccountsFilteredBy(e);return t.length>0?t[0].getAccountInfo():null}buildTenantProfiles(e,t){return e.flatMap(n=>this.getTenantProfilesFromAccountEntity(n,t?.tenantId,t))}getTenantedAccountInfoByFilter(e,t,n,i){let s=null,o;if(i&&!this.tenantProfileMatchesFilter(n,i))return null;let a=this.getIdToken(e,t,n.tenantId);return a&&(o=Ub(a.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(o,i))?null:(s=i3(e,n,o,a?.secret),s)}getTenantProfilesFromAccountEntity(e,t,n){let i=e.getAccountInfo(),s=i.tenantProfiles||new Map,o=this.getTokenKeys();if(t){let c=s.get(t);if(c)s=new Map([[t,c]]);else return[]}let a=[];return s.forEach(c=>{let l=this.getTenantedAccountInfoByFilter(i,o,c,n);l&&a.push(l)}),a}tenantProfileMatchesFilter(e,t){return!(t.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId)||t.name&&e.name!==t.name||t.isHomeTenant!==void 0&&e.isHomeTenant!==t.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,t){return!(t&&(t.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId)||t.loginHint&&!this.matchLoginHintFromTokenClaims(e,t.loginHint)||t.username&&!this.matchUsername(e.preferred_username,t.username)||t.name&&!this.matchName(e,t.name)||t.sid&&!this.matchSid(e,t.sid)))}async saveCacheRecord(e,t,n){if(!e)throw xt(mP);try{e.account&&this.setAccount(e.account),e.idToken&&t?.idToken!==!1&&this.setIdTokenCredential(e.idToken),e.accessToken&&t?.accessToken!==!1&&await this.saveAccessToken(e.accessToken),e.refreshToken&&t?.refreshToken!==!1&&this.setRefreshTokenCredential(e.refreshToken),e.appMetadata&&this.setAppMetadata(e.appMetadata)}catch(i){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),i instanceof Error?(this.commonLogger?.errorPii(`CacheManager.saveCacheRecord: ${i.message}`,n),i.name==="QuotaExceededError"||i.name==="NS_ERROR_DOM_QUOTA_REACHED"||i.message.includes("exceeded the quota")?(this.commonLogger?.error("CacheManager.saveCacheRecord: exceeded storage quota",n),new PI(o3)):new PI(i.name,i.message)):(this.commonLogger?.errorPii(`CacheManager.saveCacheRecord: ${i}`,n),new PI(XL))}}async saveAccessToken(e){let t={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},n=this.getTokenKeys(),i=vd.fromString(e.target),s=[];n.accessToken.forEach(o=>{if(!this.accessTokenKeyMatchesFilter(o,t,!1))return;let a=this.getAccessTokenCredential(o);a&&this.credentialMatchesFilter(a,t)&&vd.fromString(a.target).intersectingScopeSets(i)&&s.push(this.removeAccessToken(o))}),await Promise.all(s),this.setAccessTokenCredential(e)}getAccountsFilteredBy(e){let t=this.getAccountKeys(),n=[];return t.forEach(i=>{if(!this.isAccountKey(i,e.homeAccountId))return;let s=this.getAccount(i,this.commonLogger);if(!s||e.homeAccountId&&!this.matchHomeAccountId(s,e.homeAccountId)||e.username&&!this.matchUsername(s.username,e.username)||e.environment&&!this.matchEnvironment(s,e.environment)||e.realm&&!this.matchRealm(s,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(s,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(s,e.authorityType))return;let o={localAccountId:e?.localAccountId,name:e?.name},a=s.tenantProfiles?.filter(c=>this.tenantProfileMatchesFilter(c,o));a&&a.length===0||n.push(s)}),n}isAccountKey(e,t,n){return!(e.split(Go.CACHE_KEY_SEPARATOR).length<3||t&&!e.toLowerCase().includes(t.toLowerCase())||n&&!e.toLowerCase().includes(n.toLowerCase()))}isCredentialKey(e){if(e.split(Go.CACHE_KEY_SEPARATOR).length<6)return!1;let t=e.toLowerCase();if(t.indexOf(Ns.ID_TOKEN.toLowerCase())===-1&&t.indexOf(Ns.ACCESS_TOKEN.toLowerCase())===-1&&t.indexOf(Ns.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())===-1&&t.indexOf(Ns.REFRESH_TOKEN.toLowerCase())===-1)return!1;if(t.indexOf(Ns.REFRESH_TOKEN.toLowerCase())>-1){let n=`${Ns.REFRESH_TOKEN}${Go.CACHE_KEY_SEPARATOR}${this.clientId}${Go.CACHE_KEY_SEPARATOR}`,i=`${Ns.REFRESH_TOKEN}${Go.CACHE_KEY_SEPARATOR}${kb}${Go.CACHE_KEY_SEPARATOR}`;if(t.indexOf(n.toLowerCase())===-1&&t.indexOf(i.toLowerCase())===-1)return!1}else if(t.indexOf(this.clientId.toLowerCase())===-1)return!1;return!0}credentialMatchesFilter(e,t){return!(t.clientId&&!this.matchClientId(e,t.clientId)||t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash)||typeof t.homeAccountId=="string"&&!this.matchHomeAccountId(e,t.homeAccountId)||t.environment&&!this.matchEnvironment(e,t.environment)||t.realm&&!this.matchRealm(e,t.realm)||t.credentialType&&!this.matchCredentialType(e,t.credentialType)||t.familyId&&!this.matchFamilyId(e,t.familyId)||t.target&&!this.matchTarget(e,t.target)||(t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash||e.credentialType===Ns.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(t.tokenType&&!this.matchTokenType(e,t.tokenType)||t.tokenType===Ki.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId)))}getAppMetadataFilteredBy(e){let t=this.getKeys(),n={};return t.forEach(i=>{if(!this.isAppMetadata(i))return;let s=this.getAppMetadata(i);s&&(e.environment&&!this.matchEnvironment(s,e.environment)||e.clientId&&!this.matchClientId(s,e.clientId)||(n[i]=s))}),n}getAuthorityMetadataByAlias(e){let t=this.getAuthorityMetadataKeys(),n=null;return t.forEach(i=>{if(!this.isAuthorityMetadata(i)||i.indexOf(this.clientId)===-1)return;let s=this.getAuthorityMetadata(i);s&&s.aliases.indexOf(e)!==-1&&(n=s)}),n}async removeAllAccounts(){let e=this.getAccountKeys(),t=[];e.forEach(n=>{t.push(this.removeAccount(n))}),await Promise.all(t)}async removeAccount(e){let t=this.getAccount(e,this.commonLogger);t&&(await this.removeAccountContext(t),this.removeItem(e))}async removeAccountContext(e){let t=this.getTokenKeys(),n=e.generateAccountId(),i=[];t.idToken.forEach(s=>{s.indexOf(n)===0&&this.removeIdToken(s)}),t.accessToken.forEach(s=>{s.indexOf(n)===0&&i.push(this.removeAccessToken(s))}),t.refreshToken.forEach(s=>{s.indexOf(n)===0&&this.removeRefreshToken(s)}),await Promise.all(i)}updateOutdatedCachedAccount(e,t,n){if(t&&t.isSingleTenant()){this.commonLogger?.verbose("updateOutdatedCachedAccount: Found a single-tenant (outdated) account entity in the cache, migrating to multi-tenant account entity");let i=this.getAccountKeys().filter(l=>l.startsWith(t.homeAccountId)),s=[];i.forEach(l=>{let u=this.getCachedAccountEntity(l);u&&s.push(u)});let o=s.find(l=>QL(l.realm,l.homeAccountId))||s[0];o.tenantProfiles=s.map(l=>({tenantId:l.realm,localAccountId:l.localAccountId,name:l.name,isHomeTenant:QL(l.realm,l.homeAccountId)}));let a=r.toObject(new Mc,{...o}),c=a.generateAccountKey();return i.forEach(l=>{l!==c&&this.removeOutdatedAccount(e)}),this.setAccount(a),n?.verbose("Updated an outdated account entity in the cache"),a}return t}async removeAccessToken(e){let t=this.getAccessTokenCredential(e);if(t){if(t.credentialType.toLowerCase()===Ns.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&t.tokenType===Ki.POP){let i=t.keyId;if(i)try{await this.cryptoImpl.removeTokenBindingKey(i)}catch{throw xt(gP)}}return this.removeItem(e)}}removeAppMetadata(){return this.getKeys().forEach(t=>{this.isAppMetadata(t)&&this.removeItem(t)}),!0}readAccountFromCache(e){let t=Mc.generateAccountCacheKey(e);return this.getAccount(t,this.commonLogger)}getIdToken(e,t,n,i,s){this.commonLogger.trace("CacheManager - getIdToken called");let o={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Ns.ID_TOKEN,clientId:this.clientId,realm:n},a=this.getIdTokensByFilter(o,t),c=a.size;if(c<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(c>1){let l=a;if(!n){let u=new Map;a.forEach((p,m)=>{p.realm===e.tenantId&&u.set(m,p)});let d=u.size;if(d<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(d===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),u.values().next().value;l=u}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),l.forEach((u,d)=>{this.removeIdToken(d)}),i&&s&&i.addFields({multiMatchedID:a.size},s),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,t){let n=t&&t.idToken||this.getTokenKeys().idToken,i=new Map;return n.forEach(s=>{if(!this.idTokenKeyMatchesFilter(s,{clientId:this.clientId,...e}))return;let o=this.getIdTokenCredential(s);o&&this.credentialMatchesFilter(o,e)&&i.set(s,o)}),i}idTokenKeyMatchesFilter(e,t){let n=e.toLowerCase();return!(t.clientId&&n.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&n.indexOf(t.homeAccountId.toLowerCase())===-1)}removeIdToken(e){this.removeItem(e)}removeRefreshToken(e){this.removeItem(e)}getAccessToken(e,t,n,i,s,o){this.commonLogger.trace("CacheManager - getAccessToken called");let a=vd.createSearchScopes(t.scopes),c=t.authenticationScheme||Ki.BEARER,l=c&&c.toLowerCase()!==Ki.BEARER.toLowerCase()?Ns.ACCESS_TOKEN_WITH_AUTH_SCHEME:Ns.ACCESS_TOKEN,u={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:l,clientId:this.clientId,realm:i||e.tenantId,target:a,tokenType:c,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},d=n&&n.accessToken||this.getTokenKeys().accessToken,p=[];d.forEach(f=>{if(this.accessTokenKeyMatchesFilter(f,u,!0)){let y=this.getAccessTokenCredential(f);y&&this.credentialMatchesFilter(y,u)&&p.push(y)}});let m=p.length;return m<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):m>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),p.forEach(f=>{this.removeAccessToken(HL(f))}),s&&o&&s.addFields({multiMatchedAT:p.length},o),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),p[0])}accessTokenKeyMatchesFilter(e,t,n){let i=e.toLowerCase();if(t.clientId&&i.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&i.indexOf(t.homeAccountId.toLowerCase())===-1||t.realm&&i.indexOf(t.realm.toLowerCase())===-1||t.requestedClaimsHash&&i.indexOf(t.requestedClaimsHash.toLowerCase())===-1)return!1;if(t.target){let s=t.target.asArray();for(let o=0;o<s.length;o++){if(n&&!i.includes(s[o].toLowerCase()))return!1;if(!n&&i.includes(s[o].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e){let t=this.getTokenKeys(),n=[];return t.accessToken.forEach(i=>{if(!this.accessTokenKeyMatchesFilter(i,e,!0))return;let s=this.getAccessTokenCredential(i);s&&this.credentialMatchesFilter(s,e)&&n.push(s)}),n}getRefreshToken(e,t,n,i,s){this.commonLogger.trace("CacheManager - getRefreshToken called");let o=t?kb:void 0,a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Ns.REFRESH_TOKEN,clientId:this.clientId,familyId:o},c=n&&n.refreshToken||this.getTokenKeys().refreshToken,l=[];c.forEach(d=>{if(this.refreshTokenKeyMatchesFilter(d,a)){let p=this.getRefreshTokenCredential(d);p&&this.credentialMatchesFilter(p,a)&&l.push(p)}});let u=l.length;return u<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(u>1&&i&&s&&i.addFields({multiMatchedRT:u},s),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),l[0])}refreshTokenKeyMatchesFilter(e,t){let n=e.toLowerCase();return!(t.familyId&&n.indexOf(t.familyId.toLowerCase())===-1||!t.familyId&&t.clientId&&n.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&n.indexOf(t.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){let t={environment:e,clientId:this.clientId},n=this.getAppMetadataFilteredBy(t),i=Object.keys(n).map(o=>n[o]),s=i.length;if(s<1)return null;if(s>1)throw xt(lP);return i[0]}isAppMetadataFOCI(e){let t=this.readAppMetadataFromCache(e);return!!(t&&t.familyId===kb)}matchHomeAccountId(e,t){return typeof e.homeAccountId=="string"&&t===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,t){let n=e.oid||e.sub;return t===n}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){return t.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,t){return!!(e&&typeof e=="string"&&t?.toLowerCase()===e.toLowerCase())}matchUserAssertionHash(e,t){return!!(e.userAssertionHash&&t===e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){let i=LVe(this.staticAuthorityOptions,this.commonLogger);if(i.includes(t)&&i.includes(e.environment))return!0}let n=this.getAuthorityMetadataByAlias(t);return!!(n&&n.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!!(e.clientId&&t===e.clientId)}matchFamilyId(e,t){return!!(e.familyId&&t===e.familyId)}matchRealm(e,t){return e.realm?.toLowerCase()===t.toLowerCase()}matchNativeAccountId(e,t){return!!(e.nativeAccountId&&t===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||e.preferred_username===t||e.upn===t}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!!(e.authorityType&&t.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,t){return e.credentialType!==Ns.ACCESS_TOKEN&&e.credentialType!==Ns.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:vd.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!!(e.tokenType&&e.tokenType===t)}matchKeyId(e,t){return!!(e.keyId&&e.keyId===t)}isAppMetadata(e){return e.indexOf(EL)!==-1}isAuthorityMetadata(e){return e.indexOf(cI.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${cI.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,t){for(let n in t)e[n]=t[n];return e}},JL=class extends Wb{setAccount(){throw xt($n)}getAccount(){throw xt($n)}getCachedAccountEntity(){throw xt($n)}setIdTokenCredential(){throw xt($n)}getIdTokenCredential(){throw xt($n)}setAccessTokenCredential(){throw xt($n)}getAccessTokenCredential(){throw xt($n)}setRefreshTokenCredential(){throw xt($n)}getRefreshTokenCredential(){throw xt($n)}setAppMetadata(){throw xt($n)}getAppMetadata(){throw xt($n)}setServerTelemetry(){throw xt($n)}getServerTelemetry(){throw xt($n)}setAuthorityMetadata(){throw xt($n)}getAuthorityMetadata(){throw xt($n)}getAuthorityMetadataKeys(){throw xt($n)}setThrottlingCache(){throw xt($n)}getThrottlingCache(){throw xt($n)}removeItem(){throw xt($n)}getKeys(){throw xt($n)}getAccountKeys(){throw xt($n)}getTokenKeys(){throw xt($n)}async clear(){throw xt($n)}updateCredentialCacheKey(){throw xt($n)}removeOutdatedAccount(){throw xt($n)}};var A4t={tokenRenewalOffsetSeconds:ome,preventCorsPreflight:!1},N4t={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Ds.Info,correlationId:at.EMPTY_STRING},D4t={claimsBasedCachingEnabled:!1},M4t={async sendGetRequestAsync(){throw xt($n)},async sendPostRequestAsync(){throw xt($n)}},k4t={sku:at.SKU,version:SI,cpu:at.EMPTY_STRING,os:at.EMPTY_STRING},L4t={clientSecret:at.EMPTY_STRING,clientAssertion:void 0},q4t={azureCloudInstance:Vb.None,tenant:`${at.DEFAULT_COMMON_TENANT}`},z4t={application:{appName:"",appVersion:""}};function BVe({authOptions:r,systemOptions:e,loggerOptions:t,cacheOptions:n,storageInterface:i,networkInterface:s,cryptoInterface:o,clientCredentials:a,libraryInfo:c,telemetry:l,serverTelemetryManager:u,persistencePlugin:d,serializableCache:p}){let m={...N4t,...t};return{authOptions:F4t(r),systemOptions:{...A4t,...e},loggerOptions:m,cacheOptions:{...D4t,...n},storageInterface:i||new JL(r.clientId,ehe,new mf(m)),networkInterface:s||M4t,cryptoInterface:o||ehe,clientCredentials:a||L4t,libraryInfo:{...k4t,...c},telemetry:{...z4t,...l},serverTelemetryManager:u||null,persistencePlugin:d||null,serializableCache:p||null}}function F4t(r){return{clientCapabilities:[],azureCloudOptions:q4t,skipAuthorityMetadataCache:!1,...r}}function ZL(r){return r.authOptions.authority.options.protocolMode===$m.OIDC}var bd=class r extends Ei{constructor(e,t,n,i,s){super(e,t,n),this.name="ServerError",this.errorNo=i,this.status=s,Object.setPrototypeOf(this,r.prototype)}};var eq=class r{static generateThrottlingStorageKey(e){return`${ey.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,t){let n=r.generateThrottlingStorageKey(t),i=e.getThrottlingCache(n);if(i){if(i.throttleTime<Date.now()){e.removeItem(n);return}throw new bd(i.errorCodes?.join(" ")||at.EMPTY_STRING,i.errorMessage,i.subError)}}static postProcess(e,t,n){if(r.checkResponseStatus(n)||r.checkResponseForRetryAfter(n)){let i={throttleTime:r.calculateThrottleTime(parseInt(n.headers[oc.RETRY_AFTER])),error:n.body.error,errorCodes:n.body.error_codes,errorMessage:n.body.error_description,subError:n.body.suberror};e.setThrottlingCache(r.generateThrottlingStorageKey(t),i)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(oc.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){let t=e<=0?0:e,n=Date.now()/1e3;return Math.floor(Math.min(n+(t||ey.DEFAULT_THROTTLE_TIME_SECONDS),n+ey.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,t,n,i){let s={clientId:t,authority:n.authority,scopes:n.scopes,homeAccountIdentifier:i,claims:n.claims,authenticationScheme:n.authenticationScheme,resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,sshKid:n.sshKid},o=this.generateThrottlingStorageKey(s);e.removeItem(o)}};var a3=class{constructor(e,t){this.networkClient=e,this.cacheManager=t}async sendPostRequest(e,t,n){eq.preProcess(this.cacheManager,e);let i;try{i=await this.networkClient.sendPostRequestAsync(t,n)}catch(s){throw s instanceof Ei?s:xt(nP)}return eq.postProcess(this.cacheManager,e,i),i}};var Hl={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};var hf=class{static validateRedirectUri(e){if(!e)throw fs(lI)}static validatePrompt(e){let t=[];for(let n in Jg)t.push(Jg[n]);if(t.indexOf(e)<0)throw fs(mI)}static validateClaims(e){try{JSON.parse(e)}catch{throw fs(Bb)}}static validateCodeChallengeParams(e,t){if(!e||!t)throw fs(Gb);this.validateCodeChallengeMethod(t)}static validateCodeChallengeMethod(e){if([oI.PLAIN,oI.S256].indexOf(e)<0)throw fs(gI)}};var kc=class{constructor(){this.parameters=new Map}addResponseTypeCode(){this.parameters.set(ZW,encodeURIComponent(at.CODE_RESPONSE_TYPE))}addResponseTypeForTokenAndIdToken(){this.parameters.set(ZW,encodeURIComponent(`${at.TOKEN_RESPONSE_TYPE} ${at.ID_TOKEN_RESPONSE_TYPE}`))}addResponseMode(e){this.parameters.set(bme,encodeURIComponent(e||Mb.QUERY))}addNativeBroker(){this.parameters.set(Qme,encodeURIComponent("1"))}addScopes(e,t=!0,n=pp){t&&!n.includes("openid")&&!e.includes("openid")&&n.push("openid");let i=t?[...e||[],...n]:e||[],s=new vd(i);this.parameters.set(Cme,encodeURIComponent(s.printScopes()))}addClientId(e){this.parameters.set(Hb,encodeURIComponent(e))}addRedirectUri(e){hf.validateRedirectUri(e),this.parameters.set(vme,encodeURIComponent(e))}addPostLogoutRedirectUri(e){hf.validateRedirectUri(e),this.parameters.set(Ume,encodeURIComponent(e))}addIdTokenHint(e){this.parameters.set(Bme,encodeURIComponent(e))}addDomainHint(e){this.parameters.set(Zme,encodeURIComponent(e))}addLoginHint(e){this.parameters.set(Jme,encodeURIComponent(e))}addCcsUpn(e){this.parameters.set(oc.CCS_HEADER,encodeURIComponent(`UPN:${e}`))}addCcsOid(e){this.parameters.set(oc.CCS_HEADER,encodeURIComponent(`Oid:${e.uid}@${e.utid}`))}addSid(e){this.parameters.set(Xme,encodeURIComponent(e))}addClaims(e,t){let n=this.addClientCapabilitiesToClaims(e,t);hf.validateClaims(n),this.parameters.set(Sme,encodeURIComponent(n))}addCorrelationId(e){this.parameters.set(Ame,encodeURIComponent(e))}addLibraryInfo(e){this.parameters.set(Nme,e.sku),this.parameters.set(Dme,e.version),e.os&&this.parameters.set(Mme,e.os),e.cpu&&this.parameters.set(kme,e.cpu)}addApplicationTelemetry(e){e?.appName&&this.parameters.set(Fme,e.appName),e?.appVersion&&this.parameters.set(jme,e.appVersion)}addPrompt(e){hf.validatePrompt(e),this.parameters.set(`${Tme}`,encodeURIComponent(e))}addState(e){e&&this.parameters.set(wme,encodeURIComponent(e))}addNonce(e){this.parameters.set(Eme,encodeURIComponent(e))}addCodeChallengeParams(e,t){if(hf.validateCodeChallengeParams(e,t),e&&t)this.parameters.set(Rme,encodeURIComponent(e)),this.parameters.set(xme,encodeURIComponent(t));else throw fs(Gb)}addAuthorizationCode(e){this.parameters.set(Ime,encodeURIComponent(e))}addDeviceCode(e){this.parameters.set(Gme,encodeURIComponent(e))}addRefreshToken(e){this.parameters.set(Pme,encodeURIComponent(e))}addCodeVerifier(e){this.parameters.set(Ome,encodeURIComponent(e))}addClientSecret(e){this.parameters.set($me,encodeURIComponent(e))}addClientAssertion(e){e&&this.parameters.set(Vme,encodeURIComponent(e))}addClientAssertionType(e){e&&this.parameters.set(Hme,encodeURIComponent(e))}addOboAssertion(e){this.parameters.set(Wme,encodeURIComponent(e))}addRequestTokenUse(e){this.parameters.set(Kme,encodeURIComponent(e))}addGrantType(e){this.parameters.set(_me,encodeURIComponent(e))}addClientInfo(){this.parameters.set(xVe,"1")}addExtraQueryParameters(e){Object.entries(e).forEach(([t,n])=>{!this.parameters.has(t)&&n&&this.parameters.set(t,n)})}addClientCapabilitiesToClaims(e,t){let n;if(!e)n={};else try{n=JSON.parse(e)}catch{throw fs(Bb)}return t&&t.length>0&&(n.hasOwnProperty(sI.ACCESS_TOKEN)||(n[sI.ACCESS_TOKEN]={}),n[sI.ACCESS_TOKEN][sI.XMS_CC]={values:t}),JSON.stringify(n)}addUsername(e){this.parameters.set(kW.username,encodeURIComponent(e))}addPassword(e){this.parameters.set(kW.password,encodeURIComponent(e))}addPopToken(e){e&&(this.parameters.set(e3,Ki.POP),this.parameters.set(t3,encodeURIComponent(e)))}addSshJwk(e){e&&(this.parameters.set(e3,Ki.SSH),this.parameters.set(t3,encodeURIComponent(e)))}addServerTelemetry(e){this.parameters.set(Lme,e.generateCurrentRequestHeaderValue()),this.parameters.set(qme,e.generateLastRequestHeaderValue())}addThrottling(){this.parameters.set(zme,ey.X_MS_LIB_CAPABILITY_VALUE)}addLogoutHint(e){this.parameters.set(Yme,encodeURIComponent(e))}createQueryString(){let e=new Array;return this.parameters.forEach((t,n)=>{e.push(`${n}=${t}`)}),e.join("&")}};var _d=class{constructor(e,t){this.config=BVe(e),this.logger=new mf(this.config.loggerOptions,n3,SI),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.networkManager=new a3(this.networkClient,this.cacheManager),this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){let t={};if(t[oc.CONTENT_TYPE]=at.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case Hl.HOME_ACCOUNT_ID:try{let n=cy(e.credential);t[oc.CCS_HEADER]=`Oid:${n.uid}@${n.utid}`}catch(n){this.logger.verbose("Could not parse home account ID for CCS Header: "+n)}break;case Hl.UPN:t[oc.CCS_HEADER]=`UPN: ${e.credential}`;break}return t}async executePostToTokenEndpoint(e,t,n,i,s,o){o&&this.performanceClient?.addQueueMeasurement(o,s);let a=await this.networkManager.sendPostRequest(i,e,{body:t,headers:n});return this.performanceClient?.addFields({refreshTokenSize:a.body.refresh_token?.length||0,httpVerToken:a.headers?.[oc.X_MS_HTTP_VERSION]||""},s),this.config.serverTelemetryManager&&a.status<500&&a.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),a}async updateAuthority(e,t){this.performanceClient?.addQueueMeasurement(Ze.UpdateTokenEndpointAuthority,t);let n=`https://${e}/${this.authority.tenant}/`,i=await yme(n,this.networkClient,this.cacheManager,this.authority.options,this.logger,t,this.performanceClient);this.authority=i}createTokenQueryParameters(e){let t=new kc;return e.tokenQueryParameters&&t.addExtraQueryParameters(e.tokenQueryParameters),t.createQueryString()}};var _P="no_tokens_found",c3="native_account_unavailable",l3="refresh_token_expired",GVe="interaction_required",$Ve="consent_required",VVe="login_required",SP="bad_token";var HVe=[GVe,$Ve,VVe,SP],U4t=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],u3={[_P]:"No refresh token found in the cache. Please sign-in.",[c3]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[l3]:"Refresh token has expired.",[SP]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."},WVe={noTokensFoundError:{code:_P,desc:u3[_P]},native_account_unavailable:{code:c3,desc:u3[c3]},bad_token:{code:SP,desc:u3[SP]}},Sd=class r extends Ei{constructor(e,t,n,i,s,o,a,c){super(e,t,n),Object.setPrototypeOf(this,r.prototype),this.timestamp=i||at.EMPTY_STRING,this.traceId=s||at.EMPTY_STRING,this.correlationId=o||at.EMPTY_STRING,this.claims=a||at.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=c}};function rhe(r,e,t){let n=!!r&&HVe.indexOf(r)>-1,i=!!t&&U4t.indexOf(t)>-1,s=!!e&&HVe.some(o=>e.indexOf(o)>-1);return n||s||i}function d3(r){return new Sd(r,u3[r])}var p3=class r{static setRequestState(e,t,n){let i=r.generateLibraryState(e,n);return t?`${i}${at.RESOURCE_DELIM}${t}`:i}static generateLibraryState(e,t){if(!e)throw xt(jb);let n={id:e.createNewGuid()};t&&(n.meta=t);let i=JSON.stringify(n);return e.base64Encode(i)}static parseRequestState(e,t){if(!e)throw xt(jb);if(!t)throw xt(Gm);try{let n=t.split(at.RESOURCE_DELIM),i=n[0],s=n.length>1?n.slice(1).join(at.RESOURCE_DELIM):at.EMPTY_STRING,o=e.base64Decode(i),a=JSON.parse(o);return{userRequestState:s||at.EMPTY_STRING,libraryState:a}}catch{throw xt(Gm)}}};var B4t={SW:"sw",UHW:"uhw"},ly=class{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}async generateCnf(e,t){this.performanceClient?.addQueueMeasurement(Ze.PopTokenGenerateCnf,e.correlationId);let n=await bi(this.generateKid.bind(this),Ze.PopTokenGenerateCnf,t,this.performanceClient,e.correlationId)(e),i=this.cryptoUtils.base64UrlEncode(JSON.stringify(n));return{kid:n.kid,reqCnfString:i}}async generateKid(e){return this.performanceClient?.addQueueMeasurement(Ze.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:B4t.SW}}async signPopToken(e,t,n){return this.signPayload(e,t,n)}async signPayload(e,t,n,i){let{resourceRequestMethod:s,resourceRequestUri:o,shrClaims:a,shrNonce:c,shrOptions:l}=n,d=(o?new ss(o):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:yd(),m:s?.toUpperCase(),u:d?.HostNameAndPort,nonce:c||this.cryptoUtils.createNewGuid(),p:d?.AbsolutePath,q:d?.QueryString?[[],d.QueryString]:void 0,client_claims:a||void 0,...i},t,l,n.correlationId)}};var uy=class{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}};function G4t(r){let e="code=",t=r.error_uri?.lastIndexOf(e);return t&&t>=0?r.error_uri?.substring(t+e.length):void 0}var ml=class r{constructor(e,t,n,i,s,o,a){this.clientId=e,this.cacheStorage=t,this.cryptoObj=n,this.logger=i,this.serializableCache=s,this.persistencePlugin=o,this.performanceClient=a}validateServerAuthorizationCodeResponse(e,t){if(!e.state||!t)throw e.state?xt(zb,"Cached State"):xt(zb,"Server State");let n,i;try{n=decodeURIComponent(e.state)}catch{throw xt(Gm,e.state)}try{i=decodeURIComponent(t)}catch{throw xt(Gm,e.state)}if(n!==i)throw xt(oP);if(e.error||e.error_description||e.suberror){let s=G4t(e);throw rhe(e.error,e.error_description,e.suberror)?new Sd(e.error||"",e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||"",s):new bd(e.error||"",e.error_description,e.suberror,s)}}validateTokenResponse(e,t){if(e.error||e.error_description||e.suberror){let n=`Error(s): ${e.error_codes||at.NOT_AVAILABLE} - Timestamp: ${e.timestamp||at.NOT_AVAILABLE} - Description: ${e.error_description||at.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||at.NOT_AVAILABLE} - Trace ID: ${e.trace_id||at.NOT_AVAILABLE}`,i=e.error_codes?.length?e.error_codes[0]:void 0,s=new bd(e.error,n,e.suberror,i,e.status);if(t&&e.status&&e.status>=ws.SERVER_ERROR_RANGE_START&&e.status<=ws.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${s}`);return}else if(t&&e.status&&e.status>=ws.CLIENT_ERROR_RANGE_START&&e.status<=ws.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${s}`);return}throw rhe(e.error,e.error_description,e.suberror)?new Sd(e.error,e.error_description,e.suberror,e.timestamp||at.EMPTY_STRING,e.trace_id||at.EMPTY_STRING,e.correlation_id||at.EMPTY_STRING,e.claims||at.EMPTY_STRING,i):s}}async handleServerTokenResponse(e,t,n,i,s,o,a,c,l){this.performanceClient?.addQueueMeasurement(Ze.HandleServerTokenResponse,e.correlation_id);let u;if(e.id_token){if(u=Ub(e.id_token||at.EMPTY_STRING,this.cryptoObj.base64Decode),s&&s.nonce&&u.nonce!==s.nonce)throw xt(aP);if(i.maxAge||i.maxAge===0){let f=u.auth_time;if(!f)throw xt(ty);zW(f,i.maxAge)}}this.homeAccountIdentifier=Mc.generateHomeAccountId(e.client_info||at.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,u);let d;s&&s.state&&(d=p3.parseRequestState(this.cryptoObj,s.state)),e.key_id=e.key_id||i.sshKid||void 0;let p=this.generateCacheRecord(e,t,n,i,u,o,s),m;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),m=new uy(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(m)),a&&!c&&p.account){let f=p.account.generateAccountKey();if(!this.cacheStorage.getAccount(f,this.logger))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await r.generateAuthenticationResult(this.cryptoObj,t,p,!1,i,u,d,void 0,l)}await this.cacheStorage.saveCacheRecord(p,i.storeInCache,i.correlationId)}finally{this.persistencePlugin&&this.serializableCache&&m&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(m))}return r.generateAuthenticationResult(this.cryptoObj,t,p,!1,i,u,d,e,l)}generateCacheRecord(e,t,n,i,s,o,a){let c=t.getPreferredCache();if(!c)throw xt(ny);let l=s3(s),u,d;e.id_token&&s&&(u=mme(this.homeAccountIdentifier,c,e.id_token,this.clientId,l||""),d=KVe(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,s,e.client_info,c,l,a,void 0,this.logger));let p=null;if(e.access_token){let y=e.scope?vd.fromString(e.scope):new vd(i.scopes||[]),v=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,_=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,C=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,P=n+v,w=P+_,R=C&&C>0?n+C:void 0;p=hme(this.homeAccountIdentifier,c,e.access_token,this.clientId,l||t.tenant||"",y.printScopes(),P,w,this.cryptoObj.base64Decode,R,e.token_type,o,e.key_id,i.claims,i.requestedClaimsHash)}let m=null;if(e.refresh_token){let y;if(e.refresh_token_expires_in){let v=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;y=n+v}m=fme(this.homeAccountIdentifier,c,e.refresh_token,this.clientId,e.foci,o,y)}let f=null;return e.foci&&(f={clientId:this.clientId,environment:c,familyId:e.foci}),{account:d,idToken:u,accessToken:p,refreshToken:m,appMetadata:f}}static async generateAuthenticationResult(e,t,n,i,s,o,a,c,l){let u=at.EMPTY_STRING,d=[],p=null,m,f,y=at.EMPTY_STRING;if(n.accessToken){if(n.accessToken.tokenType===Ki.POP&&!s.popKid){let P=new ly(e),{secret:w,keyId:R}=n.accessToken;if(!R)throw xt(vP);u=await P.signPopToken(w,R,s)}else u=n.accessToken.secret;d=vd.fromString(n.accessToken.target).asArray(),p=new Date(Number(n.accessToken.expiresOn)*1e3),m=new Date(Number(n.accessToken.extendedExpiresOn)*1e3),n.accessToken.refreshOn&&(f=new Date(Number(n.accessToken.refreshOn)*1e3))}n.appMetadata&&(y=n.appMetadata.familyId===kb?kb:"");let v=o?.oid||o?.sub||"",_=o?.tid||"";c?.spa_accountid&&n.account&&(n.account.nativeAccountId=c?.spa_accountid);let C=n.account?i3(n.account.getAccountInfo(),void 0,o,n.idToken?.secret):null;return{authority:t.canonicalAuthority,uniqueId:v,tenantId:_,scopes:d,account:C,idToken:n?.idToken?.secret||"",idTokenClaims:o||{},accessToken:u,fromCache:i,expiresOn:p,extExpiresOn:m,refreshOn:f,correlationId:s.correlationId,requestId:l||at.EMPTY_STRING,familyId:y,tokenType:n.accessToken?.tokenType||at.EMPTY_STRING,state:a?a.userRequestState:at.EMPTY_STRING,cloudGraphHostName:n.account?.cloudGraphHostName||at.EMPTY_STRING,msGraphHost:n.account?.msGraphHost||at.EMPTY_STRING,code:c?.spa_code,fromNativeBroker:!1}}};function KVe(r,e,t,n,i,s,o,a,c,l,u){u?.verbose("setCachedAccount called");let p=r.getAccountKeys().find(_=>_.startsWith(t)),m=null;p&&(m=r.getAccount(p,u));let f=m||Mc.createAccount({homeAccountId:t,idTokenClaims:i,clientInfo:s,environment:o,cloudGraphHostName:c?.cloud_graph_host_name,msGraphHost:c?.msgraph_host,nativeAccountId:l},e,n),y=f.tenantProfiles||[],v=a||f.realm;if(v&&!y.find(_=>_.tenantId===v)){let _=YL(t,f.localAccountId,v,i);y.push(_)}return f.tenantProfiles=y,f}var wI=class extends _d{constructor(e,t){super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async getAuthCodeUrl(e){this.performanceClient?.addQueueMeasurement(Ze.GetAuthCodeUrl,e.correlationId);let t=await bi(this.createAuthCodeUrlQueryString.bind(this),Ze.AuthClientCreateQueryString,this.logger,this.performanceClient,e.correlationId)(e);return ss.appendQueryString(this.authority.authorizationEndpoint,t)}async acquireToken(e,t){if(this.performanceClient?.addQueueMeasurement(Ze.AuthClientAcquireToken,e.correlationId),!e.code)throw xt(uP);let n=yd(),i=await bi(this.executeTokenRequest.bind(this),Ze.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),s=i.headers?.[oc.X_MS_REQUEST_ID],o=new ml(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return o.validateTokenResponse(i.body),bi(o.handleServerTokenResponse.bind(o),Ze.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(i.body,this.authority,n,e,t,void 0,void 0,void 0,s)}handleFragmentResponse(e,t){if(new ml(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null).validateServerAuthorizationCodeResponse(e,t),!e.code)throw xt(fP);return e}getLogoutUri(e){if(!e)throw fs(fI);let t=this.createLogoutUrlQueryString(e);return ss.appendQueryString(this.authority.endSessionEndpoint,t)}async executeTokenRequest(e,t){this.performanceClient?.addQueueMeasurement(Ze.AuthClientExecuteTokenRequest,t.correlationId);let n=this.createTokenQueryParameters(t),i=ss.appendQueryString(e.tokenEndpoint,n),s=await bi(this.createTokenRequestBody.bind(this),Ze.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,t.correlationId)(t),o;if(t.clientInfo)try{let l=CI(t.clientInfo,this.cryptoUtils.base64Decode);o={credential:`${l.uid}${Go.CLIENT_INFO_SEPARATOR}${l.utid}`,type:Hl.HOME_ACCOUNT_ID}}catch(l){this.logger.verbose("Could not parse client info for CCS Header: "+l)}let a=this.createTokenRequestHeaders(o||t.ccsCredential),c={clientId:t.tokenBodyParameters?.clientId||this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid};return bi(this.executePostToTokenEndpoint.bind(this),Ze.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,t.correlationId)(i,s,a,c,t.correlationId,Ze.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(Ze.AuthClientCreateTokenRequestBody,e.correlationId);let t=new kc;if(t.addClientId(e.tokenBodyParameters?.[Hb]||this.config.authOptions.clientId),this.includeRedirectUri?t.addRedirectUri(e.redirectUri):hf.validateRedirectUri(e.redirectUri),t.addScopes(e.scopes,!0,this.oidcDefaultScopes),t.addAuthorizationCode(e.code),t.addLibraryInfo(this.config.libraryInfo),t.addApplicationTelemetry(this.config.telemetry.application),t.addThrottling(),this.serverTelemetryManager&&!ZL(this.config)&&t.addServerTelemetry(this.serverTelemetryManager),e.codeVerifier&&t.addCodeVerifier(e.codeVerifier),this.config.clientCredentials.clientSecret&&t.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let s=this.config.clientCredentials.clientAssertion;t.addClientAssertion(await ay(s.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),t.addClientAssertionType(s.assertionType)}if(t.addGrantType(Zg.AUTHORIZATION_CODE_GRANT),t.addClientInfo(),e.authenticationScheme===Ki.POP){let s=new ly(this.cryptoUtils,this.performanceClient),o;e.popKid?o=this.cryptoUtils.encodeKid(e.popKid):o=(await bi(s.generateCnf.bind(s),Ze.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,t.addPopToken(o)}else if(e.authenticationScheme===Ki.SSH)if(e.sshJwk)t.addSshJwk(e.sshJwk);else throw fs($b);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();t.addCorrelationId(n),(!$o.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities);let i;if(e.clientInfo)try{let s=CI(e.clientInfo,this.cryptoUtils.base64Decode);i={credential:`${s.uid}${Go.CLIENT_INFO_SEPARATOR}${s.utid}`,type:Hl.HOME_ACCOUNT_ID}}catch(s){this.logger.verbose("Could not parse client info for CCS Header: "+s)}else i=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&i)switch(i.type){case Hl.HOME_ACCOUNT_ID:try{let s=cy(i.credential);t.addCcsOid(s)}catch(s){this.logger.verbose("Could not parse home account ID for CCS Header: "+s)}break;case Hl.UPN:t.addCcsUpn(i.credential);break}return e.tokenBodyParameters&&t.addExtraQueryParameters(e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[r3])&&t.addExtraQueryParameters({[r3]:"1"}),t.createQueryString()}async createAuthCodeUrlQueryString(e){this.performanceClient?.addQueueMeasurement(Ze.AuthClientCreateQueryString,e.correlationId);let t=new kc;t.addClientId(e.extraQueryParameters?.[Hb]||this.config.authOptions.clientId);let n=[...e.scopes||[],...e.extraScopesToConsent||[]];t.addScopes(n,!0,this.oidcDefaultScopes),t.addRedirectUri(e.redirectUri);let i=e.correlationId||this.config.cryptoInterface.createNewGuid();if(t.addCorrelationId(i),t.addResponseMode(e.responseMode),t.addResponseTypeCode(),t.addLibraryInfo(this.config.libraryInfo),ZL(this.config)||t.addApplicationTelemetry(this.config.telemetry.application),t.addClientInfo(),e.codeChallenge&&e.codeChallengeMethod&&t.addCodeChallengeParams(e.codeChallenge,e.codeChallengeMethod),e.prompt&&t.addPrompt(e.prompt),e.domainHint&&t.addDomainHint(e.domainHint),e.prompt!==Jg.SELECT_ACCOUNT)if(e.sid&&e.prompt===Jg.NONE)this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),t.addSid(e.sid);else if(e.account){let s=this.extractAccountSid(e.account),o=this.extractLoginHint(e.account);if(o&&e.domainHint&&(this.logger.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),o=null),o){this.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),t.addLoginHint(o);try{let a=cy(e.account.homeAccountId);t.addCcsOid(a)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(s&&e.prompt===Jg.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),t.addSid(s);try{let a=cy(e.account.homeAccountId);t.addCcsOid(a)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),t.addLoginHint(e.loginHint),t.addCcsUpn(e.loginHint);else if(e.account.username){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),t.addLoginHint(e.account.username);try{let a=cy(e.account.homeAccountId);t.addCcsOid(a)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(this.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),t.addLoginHint(e.loginHint),t.addCcsUpn(e.loginHint));else this.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");if(e.nonce&&t.addNonce(e.nonce),e.state&&t.addState(e.state),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities),e.extraQueryParameters&&t.addExtraQueryParameters(e.extraQueryParameters),e.nativeBroker&&(t.addNativeBroker(),e.authenticationScheme===Ki.POP)){let s=new ly(this.cryptoUtils),o;e.popKid?o=this.cryptoUtils.encodeKid(e.popKid):o=(await bi(s.generateCnf.bind(s),Ze.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,t.addPopToken(o)}return t.createQueryString()}createLogoutUrlQueryString(e){let t=new kc;return e.postLogoutRedirectUri&&t.addPostLogoutRedirectUri(e.postLogoutRedirectUri),e.correlationId&&t.addCorrelationId(e.correlationId),e.idTokenHint&&t.addIdTokenHint(e.idTokenHint),e.state&&t.addState(e.state),e.logoutHint&&t.addLogoutHint(e.logoutHint),e.extraQueryParameters&&t.addExtraQueryParameters(e.extraQueryParameters),t.createQueryString()}extractAccountSid(e){return e.idTokenClaims?.sid||null}extractLoginHint(e){return e.idTokenClaims?.login_hint||null}};var $4t=300,Kb=class extends _d{constructor(e,t){super(e,t)}async acquireToken(e){this.performanceClient?.addQueueMeasurement(Ze.RefreshTokenClientAcquireToken,e.correlationId);let t=yd(),n=await bi(this.executeTokenRequest.bind(this),Ze.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),i=n.headers?.[oc.X_MS_REQUEST_ID],s=new ml(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return s.validateTokenResponse(n.body),bi(s.handleServerTokenResponse.bind(s),Ze.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(n.body,this.authority,t,e,void 0,void 0,!0,e.forceCache,i)}async acquireTokenByRefreshToken(e){if(!e)throw fs(hI);if(this.performanceClient?.addQueueMeasurement(Ze.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw xt(ry);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await bi(this.acquireTokenWithCachedRefreshToken.bind(this),Ze.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(n){let i=n instanceof Sd&&n.errorCode===_P,s=n instanceof bd&&n.errorCode===MW.INVALID_GRANT_ERROR&&n.subError===MW.CLIENT_MISMATCH_ERROR;if(i||s)return bi(this.acquireTokenWithCachedRefreshToken.bind(this),Ze.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw n}return bi(this.acquireTokenWithCachedRefreshToken.bind(this),Ze.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,t){this.performanceClient?.addQueueMeasurement(Ze.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);let n=jVe(this.cacheManager.getRefreshToken.bind(this.cacheManager),Ze.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,t,void 0,this.performanceClient,e.correlationId);if(!n)throw d3(_P);if(n.expiresOn&&bI(n.expiresOn,e.refreshTokenExpirationOffsetSeconds||$4t))throw d3(l3);let i={...e,refreshToken:n.secret,authenticationScheme:e.authenticationScheme||Ki.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:Hl.HOME_ACCOUNT_ID}};try{return await bi(this.acquireToken.bind(this),Ze.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(i)}catch(s){if(s instanceof Sd&&s.subError===SP){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");let o=HL(n);this.cacheManager.removeRefreshToken(o)}throw s}}async executeTokenRequest(e,t){this.performanceClient?.addQueueMeasurement(Ze.RefreshTokenClientExecuteTokenRequest,e.correlationId);let n=this.createTokenQueryParameters(e),i=ss.appendQueryString(t.tokenEndpoint,n),s=await bi(this.createTokenRequestBody.bind(this),Ze.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),o=this.createTokenRequestHeaders(e.ccsCredential),a={clientId:e.tokenBodyParameters?.clientId||this.config.authOptions.clientId,authority:t.canonicalAuthority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return bi(this.executePostToTokenEndpoint.bind(this),Ze.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(i,s,o,a,e.correlationId,Ze.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(Ze.RefreshTokenClientCreateTokenRequestBody,e.correlationId);let t=e.correlationId,n=new kc;if(n.addClientId(e.tokenBodyParameters?.[Hb]||this.config.authOptions.clientId),e.redirectUri&&n.addRedirectUri(e.redirectUri),n.addScopes(e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),n.addGrantType(Zg.REFRESH_TOKEN_GRANT),n.addClientInfo(),n.addLibraryInfo(this.config.libraryInfo),n.addApplicationTelemetry(this.config.telemetry.application),n.addThrottling(),this.serverTelemetryManager&&!ZL(this.config)&&n.addServerTelemetry(this.serverTelemetryManager),n.addCorrelationId(t),n.addRefreshToken(e.refreshToken),this.config.clientCredentials.clientSecret&&n.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let i=this.config.clientCredentials.clientAssertion;n.addClientAssertion(await ay(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),n.addClientAssertionType(i.assertionType)}if(e.authenticationScheme===Ki.POP){let i=new ly(this.cryptoUtils,this.performanceClient),s;e.popKid?s=this.cryptoUtils.encodeKid(e.popKid):s=(await bi(i.generateCnf.bind(i),Ze.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,n.addPopToken(s)}else if(e.authenticationScheme===Ki.SSH)if(e.sshJwk)n.addSshJwk(e.sshJwk);else throw fs($b);if((!$o.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case Hl.HOME_ACCOUNT_ID:try{let i=cy(e.ccsCredential.credential);n.addCcsOid(i)}catch(i){this.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case Hl.UPN:n.addCcsUpn(e.ccsCredential.credential);break}return e.tokenBodyParameters&&n.addExtraQueryParameters(e.tokenBodyParameters),n.createQueryString()}};var tq=class extends _d{constructor(e,t){super(e,t)}async acquireToken(e){try{let[t,n]=await this.acquireCachedToken({...e,scopes:e.scopes?.length?e.scopes:[...pp]});return n===Bm.PROACTIVELY_REFRESHED&&(this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),new Kb(this.config,this.performanceClient).acquireTokenByRefreshToken(e).catch(()=>{})),t}catch(t){if(t instanceof iy&&t.errorCode===pf)return new Kb(this.config,this.performanceClient).acquireTokenByRefreshToken(e);throw t}}async acquireCachedToken(e){this.performanceClient?.addQueueMeasurement(Ze.SilentFlowClientAcquireCachedToken,e.correlationId);let t=Bm.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!$o.isEmptyObj(e.claims))throw this.setCacheOutcome(Bm.FORCE_REFRESH_OR_CLAIMS,e.correlationId),xt(pf);if(!e.account)throw xt(ry);let n=e.account.tenantId||UVe(e.authority),i=this.cacheManager.getTokenKeys(),s=this.cacheManager.getAccessToken(e.account,e,i,n,this.performanceClient,e.correlationId);if(s){if(pme(s.cachedAt)||bI(s.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(Bm.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),xt(pf);s.refreshOn&&bI(s.refreshOn,0)&&(t=Bm.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(Bm.NO_CACHED_ACCESS_TOKEN,e.correlationId),xt(pf);let o=e.authority||this.authority.getPreferredCache(),a={account:this.cacheManager.readAccountFromCache(e.account),accessToken:s,idToken:this.cacheManager.getIdToken(e.account,i,n,this.performanceClient,e.correlationId),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(o)};return this.setCacheOutcome(t,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await bi(this.generateResultFromCacheRecord.bind(this),Ze.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(a,e),t]}setCacheOutcome(e,t){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},t),e!==Bm.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,t){this.performanceClient?.addQueueMeasurement(Ze.SilentFlowClientGenerateResultFromCacheRecord,t.correlationId);let n;if(e.idToken&&(n=Ub(e.idToken.secret,this.config.cryptoInterface.base64Decode)),t.maxAge||t.maxAge===0){let i=n?.auth_time;if(!i)throw xt(ty);zW(i,t.maxAge)}return ml.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,n)}};var QVe=",",YVe="|";function V4t(r){let{skus:e,libraryName:t,libraryVersion:n,extensionName:i,extensionVersion:s}=r,o=new Map([[0,[t,n]],[2,[i,s]]]),a=[];if(e?.length){if(a=e.split(QVe),a.length<4)return e}else a=Array.from({length:4},()=>YVe);return o.forEach((c,l)=>{c.length===2&&c[0]?.length&&c[1]?.length&&H4t({skuArr:a,index:l,skuName:c[0],skuVersion:c[1]})}),a.join(QVe)}function H4t(r){let{skuArr:e,index:t,skuName:n,skuVersion:i}=r;t>=e.length||(e[t]=[n,i].join(YVe))}var CP=class r{constructor(e,t){this.cacheOutcome=Bm.NOT_APPLICABLE,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||at.EMPTY_STRING,this.wrapperVer=e.wrapperVer||at.EMPTY_STRING,this.telemetryCacheKey=Na.CACHE_KEY+Go.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){let e=`${this.apiId}${Na.VALUE_SEPARATOR}${this.cacheOutcome}`,t=[this.wrapperSKU,this.wrapperVer],n=this.getNativeBrokerErrorCode();n?.length&&t.push(`broker_error=${n}`);let i=t.join(Na.VALUE_SEPARATOR),s=this.getRegionDiscoveryFields(),o=[e,s].join(Na.VALUE_SEPARATOR);return[Na.SCHEMA_VERSION,o,i].join(Na.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){let e=this.getLastRequests(),t=r.maxErrorsToSend(e),n=e.failedRequests.slice(0,2*t).join(Na.VALUE_SEPARATOR),i=e.errors.slice(0,t).join(Na.VALUE_SEPARATOR),s=e.errors.length,o=t<s?Na.OVERFLOW_TRUE:Na.OVERFLOW_FALSE,a=[s,o].join(Na.VALUE_SEPARATOR);return[Na.SCHEMA_VERSION,e.cacheHits,n,i,a].join(Na.CATEGORY_SEPARATOR)}cacheFailedRequest(e){let t=this.getLastRequests();t.errors.length>=Na.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof Ei?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(Na.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}incrementCacheHits(){let e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits}getLastRequests(){let e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){let e=this.getLastRequests(),t=r.maxErrorsToSend(e),n=e.errors.length;if(t===n)this.cacheManager.removeItem(this.telemetryCacheKey);else{let i={failedRequests:e.failedRequests.slice(t*2),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,i)}}static maxErrorsToSend(e){let t,n=0,i=0,s=e.errors.length;for(t=0;t<s;t++){let o=e.failedRequests[2*t]||at.EMPTY_STRING,a=e.failedRequests[2*t+1]||at.EMPTY_STRING,c=e.errors[t]||at.EMPTY_STRING;if(i+=o.toString().length+a.toString().length+c.length+3,i<Na.MAX_LAST_HEADER_BYTES)n+=1;else break}return n}getRegionDiscoveryFields(){let e=[];return e.push(this.regionUsed||at.EMPTY_STRING),e.push(this.regionSource||at.EMPTY_STRING),e.push(this.regionOutcome||at.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){let t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){let e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e)}static makeExtraSkuString(e){return V4t(e)}};var PP=class{static serializeJSONBlob(e){return JSON.stringify(e)}static serializeAccounts(e){let t={};return Object.keys(e).map(function(n){let i=e[n];t[n]={home_account_id:i.homeAccountId,environment:i.environment,realm:i.realm,local_account_id:i.localAccountId,username:i.username,authority_type:i.authorityType,name:i.name,client_info:i.clientInfo,last_modification_time:i.lastModificationTime,last_modification_app:i.lastModificationApp,tenantProfiles:i.tenantProfiles?.map(s=>JSON.stringify(s))}}),t}static serializeIdTokens(e){let t={};return Object.keys(e).map(function(n){let i=e[n];t[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,realm:i.realm}}),t}static serializeAccessTokens(e){let t={};return Object.keys(e).map(function(n){let i=e[n];t[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,realm:i.realm,target:i.target,cached_at:i.cachedAt,expires_on:i.expiresOn,extended_expires_on:i.extendedExpiresOn,refresh_on:i.refreshOn,key_id:i.keyId,token_type:i.tokenType,requestedClaims:i.requestedClaims,requestedClaimsHash:i.requestedClaimsHash,userAssertionHash:i.userAssertionHash}}),t}static serializeRefreshTokens(e){let t={};return Object.keys(e).map(function(n){let i=e[n];t[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,family_id:i.familyId,target:i.target,realm:i.realm}}),t}static serializeAppMetadata(e){let t={};return Object.keys(e).map(function(n){let i=e[n];t[n]={client_id:i.clientId,environment:i.environment,family_id:i.familyId}}),t}static serializeAllCache(e){return{Account:this.serializeAccounts(e.accounts),IdToken:this.serializeIdTokens(e.idTokens),AccessToken:this.serializeAccessTokens(e.accessTokens),RefreshToken:this.serializeRefreshTokens(e.refreshTokens),AppMetadata:this.serializeAppMetadata(e.appMetadata)}}};var Qb=class{static deserializeJSONBlob(e){return e?JSON.parse(e):{}}static deserializeAccounts(e){let t={};return e&&Object.keys(e).map(function(n){let i=e[n],s={homeAccountId:i.home_account_id,environment:i.environment,realm:i.realm,localAccountId:i.local_account_id,username:i.username,authorityType:i.authority_type,name:i.name,clientInfo:i.client_info,lastModificationTime:i.last_modification_time,lastModificationApp:i.last_modification_app,tenantProfiles:i.tenantProfiles?.map(a=>JSON.parse(a))},o=new Mc;Wb.toObject(o,s),t[n]=o}),t}static deserializeIdTokens(e){let t={};return e&&Object.keys(e).map(function(n){let i=e[n],s={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,realm:i.realm};t[n]=s}),t}static deserializeAccessTokens(e){let t={};return e&&Object.keys(e).map(function(n){let i=e[n],s={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,realm:i.realm,target:i.target,cachedAt:i.cached_at,expiresOn:i.expires_on,extendedExpiresOn:i.extended_expires_on,refreshOn:i.refresh_on,keyId:i.key_id,tokenType:i.token_type,requestedClaims:i.requestedClaims,requestedClaimsHash:i.requestedClaimsHash,userAssertionHash:i.userAssertionHash};t[n]=s}),t}static deserializeRefreshTokens(e){let t={};return e&&Object.keys(e).map(function(n){let i=e[n],s={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,familyId:i.family_id,target:i.target,realm:i.realm};t[n]=s}),t}static deserializeAppMetadata(e){let t={};return e&&Object.keys(e).map(function(n){let i=e[n];t[n]={clientId:i.client_id,environment:i.environment,familyId:i.family_id}}),t}static deserializeAllCache(e){return{accounts:e.Account?this.deserializeAccounts(e.Account):{},idTokens:e.IdToken?this.deserializeIdTokens(e.IdToken):{},accessTokens:e.AccessToken?this.deserializeAccessTokens(e.AccessToken):{},refreshTokens:e.RefreshToken?this.deserializeRefreshTokens(e.RefreshToken):{},appMetadata:e.AppMetadata?this.deserializeAppMetadata(e.AppMetadata):{}}}};var K4t="managed_identity",Q4t=`https://login.microsoftonline.com/${K4t}/`,Wl={AZURE_POD_IDENTITY_AUTHORITY_HOST:"AZURE_POD_IDENTITY_AUTHORITY_HOST",IDENTITY_ENDPOINT:"IDENTITY_ENDPOINT",IDENTITY_HEADER:"IDENTITY_HEADER",IDENTITY_SERVER_THUMBPRINT:"IDENTITY_SERVER_THUMBPRINT",IMDS_ENDPOINT:"IMDS_ENDPOINT",MSI_ENDPOINT:"MSI_ENDPOINT"};var ff={SYSTEM_ASSIGNED:"system-assigned",USER_ASSIGNED_CLIENT_ID:"user-assigned-client-id",USER_ASSIGNED_RESOURCE_ID:"user-assigned-resource-id",USER_ASSIGNED_OBJECT_ID:"user-assigned-object-id"},Kl={GET:"get",POST:"post"},m3={SUCCESS:ws.SUCCESS,SUCCESS_RANGE_START:ws.SUCCESS_RANGE_START,SUCCESS_RANGE_END:ws.SUCCESS_RANGE_END,SERVER_ERROR:ws.SERVER_ERROR};var XVe=32,JVe={SHA256:"sha256"},h3={CV_CHARSET:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~"},hl={MSAL_SKU:"msal.js.node",JWT_BEARER_ASSERTION_TYPE:"urn:ietf:params:oauth:client-assertion-type:jwt-bearer",AUTHORIZATION_PENDING:"authorization_pending",HTTP_PROTOCOL:"http://",LOCALHOST:"localhost"},Yb={acquireTokenSilent:62,acquireTokenByUsernamePassword:371,acquireTokenByDeviceCode:671,acquireTokenByClientCredential:771,acquireTokenByCode:871,acquireTokenByRefreshToken:872},hp={ALGORITHM:"alg",RSA_256:"RS256",PSS_256:"PS256",X5T_256:"x5t#S256",X5T:"x5t",X5C:"x5c",AUDIENCE:"aud",EXPIRATION_TIME:"exp",ISSUER:"iss",SUBJECT:"sub",NOT_BEFORE:"nbf",JWT_ID:"jti"},f3={INTERVAL_MS:100,TIMEOUT_MS:5e3};var Y4t=[ws.NOT_FOUND,ws.REQUEST_TIMEOUT,ws.TOO_MANY_REQUESTS,ws.SERVER_ERROR,ws.SERVICE_UNAVAILABLE,ws.GATEWAY_TIMEOUT];var EI=class{static getNetworkResponse(e,t,n){return{headers:e,body:t,status:n}}static urlToHttpOptions(e){let t={protocol:e.protocol,hostname:e.hostname&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:`${e.pathname||""}${e.search||""}`,href:e.href};return e.port!==""&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=`${decodeURIComponent(e.username)}:${decodeURIComponent(e.password)}`),t}};var g3=ge(require("http"),1),nhe=ge(require("https"),1);var rq=class{constructor(e,t){this.proxyUrl=e||"",this.customAgentOptions=t||{}}async sendGetRequestAsync(e,t,n){return this.proxyUrl?ZVe(e,this.proxyUrl,Kl.GET,t,this.customAgentOptions,n):eHe(e,Kl.GET,t,this.customAgentOptions,n)}async sendPostRequestAsync(e,t){return this.proxyUrl?ZVe(e,this.proxyUrl,Kl.POST,t,this.customAgentOptions):eHe(e,Kl.POST,t,this.customAgentOptions)}},ZVe=(r,e,t,n,i,s)=>{let o=new URL(r),a=new URL(e),c=n?.headers||{},l={host:a.hostname,port:a.port,method:"CONNECT",path:o.hostname,headers:c};i&&Object.keys(i).length&&(l.agent=new g3.default.Agent(i));let u="";if(t===Kl.POST){let p=n?.body||"";u=`Content-Type: application/x-www-form-urlencoded\r
Content-Length: ${p.length}\r
\r
${p}`}else s&&(l.timeout=s);let d=`${t.toUpperCase()} ${o.href} HTTP/1.1\r
Host: ${o.host}\r
Connection: close\r
`+u+`\r
`;return new Promise((p,m)=>{let f=g3.default.request(l);s&&f.on("timeout",()=>{f.destroy(),m(new Error("Request time out"))}),f.end(),f.on("connect",(y,v)=>{let _=y?.statusCode||m3.SERVER_ERROR;(_<m3.SUCCESS_RANGE_START||_>m3.SUCCESS_RANGE_END)&&(f.destroy(),v.destroy(),m(new Error(`Error connecting to proxy. Http status code: ${y.statusCode}. Http status message: ${y?.statusMessage||"Unknown"}`))),v.write(d);let C=[];v.on("data",P=>{C.push(P)}),v.on("end",()=>{let w=Buffer.concat([...C]).toString().split(`\r
`),R=parseInt(w[0].split(" ")[1]),I=w[0].split(" ").slice(2).join(" "),z=w[w.length-1],G=w.slice(1,w.length-2),L=new Map;G.forEach($e=>{let Be=$e.split(new RegExp(/:\s(.*)/s)),Ct=Be[0],Ge=Be[1];try{let pe=JSON.parse(Ge);pe&&typeof pe=="object"&&(Ge=pe)}catch{}L.set(Ct,Ge)});let ee=Object.fromEntries(L),ye=EI.getNetworkResponse(ee,tHe(R,I,ee,z),R);(R<ws.SUCCESS_RANGE_START||R>ws.SUCCESS_RANGE_END)&&ye.body.error!==hl.AUTHORIZATION_PENDING&&f.destroy(),p(ye)}),v.on("error",P=>{f.destroy(),v.destroy(),m(new Error(P.toString()))})}),f.on("error",y=>{f.destroy(),m(new Error(y.toString()))})})},eHe=(r,e,t,n,i)=>{let s=e===Kl.POST,o=t?.body||"",a=new URL(r),c=t?.headers||{},l={method:e,headers:c,...EI.urlToHttpOptions(a)};return n&&Object.keys(n).length&&(l.agent=new nhe.default.Agent(n)),s?l.headers={...l.headers,"Content-Length":o.length}:i&&(l.timeout=i),new Promise((u,d)=>{let p;l.protocol==="http:"?p=g3.default.request(l):p=nhe.default.request(l),s&&p.write(o),i&&p.on("timeout",()=>{p.destroy(),d(new Error("Request time out"))}),p.end(),p.on("response",m=>{let f=m.headers,y=m.statusCode,v=m.statusMessage,_=[];m.on("data",C=>{_.push(C)}),m.on("end",()=>{let C=Buffer.concat([..._]).toString(),P=f,w=EI.getNetworkResponse(P,tHe(y,v,P,C),y);(y<ws.SUCCESS_RANGE_START||y>ws.SUCCESS_RANGE_END)&&w.body.error!==hl.AUTHORIZATION_PENDING&&p.destroy(),u(w)})}),p.on("error",m=>{p.destroy(),d(new Error(m.toString()))})})},tHe=(r,e,t,n)=>{let i;try{i=JSON.parse(n)}catch{let o,a;r>=ws.CLIENT_ERROR_RANGE_START&&r<=ws.CLIENT_ERROR_RANGE_END?(o="client_error",a="A client"):r>=ws.SERVER_ERROR_RANGE_START&&r<=ws.SERVER_ERROR_RANGE_END?(o="server_error",a="A server"):(o="unknown_error",a="An unknown"),i={error:o,error_description:`${a} error occured.
Http status code: ${r}
Http status message: ${e||"Unknown"}
Headers: ${JSON.stringify(t)}`}}return i};var ihe="invalid_file_extension",she="invalid_file_path",nq="invalid_managed_identity_id_type",ohe="invalid_secret",rHe="missing_client_id",nHe="network_unavailable",ahe="platform_not_supported",che="unable_to_create_azure_arc",lhe="unable_to_create_cloud_shell",uhe="unable_to_create_source",dhe="unable_to_read_secret_file",iHe="user_assigned_not_available_at_runtime",phe="www_authenticate_header_missing",mhe="www_authenticate_header_unsupported_format",wP={[Wl.AZURE_POD_IDENTITY_AUTHORITY_HOST]:"azure_pod_identity_authority_host_url_malformed",[Wl.IDENTITY_ENDPOINT]:"identity_endpoint_url_malformed",[Wl.IMDS_ENDPOINT]:"imds_endpoint_url_malformed",[Wl.MSI_ENDPOINT]:"msi_endpoint_url_malformed"};var X4t={[ihe]:"The file path in the WWW-Authenticate header does not contain a .key file.",[she]:"The file path in the WWW-Authenticate header is not in a valid Windows or Linux Format.",[nq]:"More than one ManagedIdentityIdType was provided.",[ohe]:"The secret in the file on the file path in the WWW-Authenticate header is greater than 4096 bytes.",[ahe]:"The platform is not supported by Azure Arc. Azure Arc only supports Windows and Linux.",[rHe]:"A ManagedIdentityId id was not provided.",[wP.AZURE_POD_IDENTITY_AUTHORITY_HOST]:`The Managed Identity's '${Wl.AZURE_POD_IDENTITY_AUTHORITY_HOST}' environment variable is malformed.`,[wP.IDENTITY_ENDPOINT]:`The Managed Identity's '${Wl.IDENTITY_ENDPOINT}' environment variable is malformed.`,[wP.IMDS_ENDPOINT]:`The Managed Identity's '${Wl.IMDS_ENDPOINT}' environment variable is malformed.`,[wP.MSI_ENDPOINT]:`The Managed Identity's '${Wl.MSI_ENDPOINT}' environment variable is malformed.`,[nHe]:"Authentication unavailable. The request to the managed identity endpoint timed out.",[che]:"Azure Arc Managed Identities can only be system assigned.",[lhe]:"Cloud Shell Managed Identities can only be system assigned.",[uhe]:"Unable to create a Managed Identity source based on environment variables.",[dhe]:"Unable to read the secret file.",[iHe]:"Service Fabric user assigned managed identity ClientId or ResourceId is not configurable at runtime.",[phe]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is missing.",[mhe]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is in an unsupported format."},hhe=class r extends Ei{constructor(e){super(e,X4t[e]),this.name="ManagedIdentityError",Object.setPrototypeOf(this,r.prototype)}};function EP(r){return new hhe(r)}var ac={invalidLoopbackAddressType:{code:"invalid_loopback_server_address_type",desc:"Loopback server address is not type string. This is unexpected."},unableToLoadRedirectUri:{code:"unable_to_load_redirectUrl",desc:"Loopback server callback was invoked without a url. This is unexpected."},noAuthCodeInResponse:{code:"no_auth_code_in_response",desc:"No auth code found in the server response. Please check your network trace to determine what happened."},noLoopbackServerExists:{code:"no_loopback_server_exists",desc:"No loopback server exists yet."},loopbackServerAlreadyExists:{code:"loopback_server_already_exists",desc:"Loopback server already exists. Cannot create another."},loopbackServerTimeout:{code:"loopback_server_timeout",desc:"Timed out waiting for auth code listener to be registered."},stateNotFoundError:{code:"state_not_found",desc:"State not found. Please verify that the request originated from msal."},thumbprintMissing:{code:"thumbprint_missing_from_client_certificate",desc:"Client certificate does not contain a SHA-1 or SHA-256 thumbprint."}},wu=class r extends Ei{constructor(e,t){super(e,t),this.name="NodeAuthError"}static createInvalidLoopbackAddressTypeError(){return new r(ac.invalidLoopbackAddressType.code,`${ac.invalidLoopbackAddressType.desc}`)}static createUnableToLoadRedirectUrlError(){return new r(ac.unableToLoadRedirectUri.code,`${ac.unableToLoadRedirectUri.desc}`)}static createNoAuthCodeInResponseError(){return new r(ac.noAuthCodeInResponse.code,`${ac.noAuthCodeInResponse.desc}`)}static createNoLoopbackServerExistsError(){return new r(ac.noLoopbackServerExists.code,`${ac.noLoopbackServerExists.desc}`)}static createLoopbackServerAlreadyExistsError(){return new r(ac.loopbackServerAlreadyExists.code,`${ac.loopbackServerAlreadyExists.desc}`)}static createLoopbackServerTimeoutError(){return new r(ac.loopbackServerTimeout.code,`${ac.loopbackServerTimeout.desc}`)}static createStateNotFoundError(){return new r(ac.stateNotFoundError.code,ac.stateNotFoundError.desc)}static createThumbprintMissingError(){return new r(ac.thumbprintMissing.code,ac.thumbprintMissing.desc)}};var J4t={clientId:at.EMPTY_STRING,authority:at.DEFAULT_AUTHORITY,clientSecret:at.EMPTY_STRING,clientAssertion:at.EMPTY_STRING,clientCertificate:{thumbprint:at.EMPTY_STRING,thumbprintSha256:at.EMPTY_STRING,privateKey:at.EMPTY_STRING,x5c:at.EMPTY_STRING},knownAuthorities:[],cloudDiscoveryMetadata:at.EMPTY_STRING,authorityMetadata:at.EMPTY_STRING,clientCapabilities:[],protocolMode:$m.AAD,azureCloudOptions:{azureCloudInstance:Vb.None,tenant:at.EMPTY_STRING},skipAuthorityMetadataCache:!1},Z4t={claimsBasedCachingEnabled:!1},sHe={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Ds.Info},e6t={loggerOptions:sHe,networkClient:new rq,proxyUrl:at.EMPTY_STRING,customAgentOptions:{},disableInternalRetries:!1},t6t={application:{appName:at.EMPTY_STRING,appVersion:at.EMPTY_STRING}};function fhe({auth:r,broker:e,cache:t,system:n,telemetry:i}){let s={...e6t,networkClient:new rq(n?.proxyUrl,n?.customAgentOptions),loggerOptions:n?.loggerOptions||sHe,disableInternalRetries:n?.disableInternalRetries||!1};if(r.clientCertificate&&!r.clientCertificate.thumbprint&&!r.clientCertificate.thumbprintSha256)throw wu.createStateNotFoundError();return{auth:{...J4t,...r},broker:{...e},cache:{...Z4t,...t},system:{...s,...n},telemetry:{...t6t,...i}}}var oHe=ge(require("crypto")),v3=new Uint8Array(256),y3=v3.length;function ghe(){return y3>v3.length-16&&(oHe.default.randomFillSync(v3),y3=0),v3.slice(y3,y3+=16)}var aHe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function r6t(r){return typeof r=="string"&&aHe.test(r)}var cHe=r6t;var Lc=[];for(let r=0;r<256;++r)Lc.push((r+256).toString(16).substr(1));function n6t(r,e=0){let t=(Lc[r[e+0]]+Lc[r[e+1]]+Lc[r[e+2]]+Lc[r[e+3]]+"-"+Lc[r[e+4]]+Lc[r[e+5]]+"-"+Lc[r[e+6]]+Lc[r[e+7]]+"-"+Lc[r[e+8]]+Lc[r[e+9]]+"-"+Lc[r[e+10]]+Lc[r[e+11]]+Lc[r[e+12]]+Lc[r[e+13]]+Lc[r[e+14]]+Lc[r[e+15]]).toLowerCase();if(!cHe(t))throw TypeError("Stringified UUID is invalid");return t}var lHe=n6t;function i6t(r,e,t){r=r||{};let n=r.random||(r.rng||ghe)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(let i=0;i<16;++i)e[t+i]=n[i];return e}return lHe(n)}var yhe=i6t;var b3=class{generateGuid(){return yhe()}isGuid(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}};var fp=class r{static base64Encode(e,t){return Buffer.from(e,t).toString("base64")}static base64EncodeUrl(e,t){return r.base64Encode(e,t).replace(/=/g,at.EMPTY_STRING).replace(/\+/g,"-").replace(/\//g,"_")}static base64Decode(e){return Buffer.from(e,"base64").toString("utf8")}static base64DecodeUrl(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");for(;t.length%4;)t+="=";return r.base64Decode(t)}};var uHe=ge(require("crypto"),1);var TI=class{sha256(e){return uHe.default.createHash(JVe.SHA256).update(e).digest()}};var dHe=ge(require("crypto"),1);var _3=class{constructor(){this.hashUtils=new TI}async generatePkceCodes(){let e=this.generateCodeVerifier(),t=this.generateCodeChallengeFromVerifier(e);return{verifier:e,challenge:t}}generateCodeVerifier(){let e=[],t=256-256%h3.CV_CHARSET.length;for(;e.length<=XVe;){let i=dHe.default.randomBytes(1)[0];if(i>=t)continue;let s=i%h3.CV_CHARSET.length;e.push(h3.CV_CHARSET[s])}let n=e.join(at.EMPTY_STRING);return fp.base64EncodeUrl(n)}generateCodeChallengeFromVerifier(e){return fp.base64EncodeUrl(this.hashUtils.sha256(e).toString("base64"),"base64")}};var Xb=class{constructor(){this.pkceGenerator=new _3,this.guidGenerator=new b3,this.hashUtils=new TI}base64UrlEncode(){throw new Error("Method not implemented.")}encodeKid(){throw new Error("Method not implemented.")}createNewGuid(){return this.guidGenerator.generateGuid()}base64Encode(e){return fp.base64Encode(e)}base64Decode(e){return fp.base64Decode(e)}generatePkceCodes(){return this.pkceGenerator.generatePkceCodes()}getPublicKeyThumbprint(){throw new Error("Method not implemented.")}removeTokenBindingKey(){throw new Error("Method not implemented.")}clearKeystore(){throw new Error("Method not implemented.")}signJwt(){throw new Error("Method not implemented.")}async hashString(e){return fp.base64EncodeUrl(this.hashUtils.sha256(e).toString("base64"),"base64")}};var II=class extends Wb{constructor(e,t,n,i){super(t,n,e,i),this.cache={},this.changeEmitters=[],this.logger=e}registerChangeEmitter(e){this.changeEmitters.push(e)}emitChange(){this.changeEmitters.forEach(e=>e.call(null))}cacheToInMemoryCache(e){let t={accounts:{},idTokens:{},accessTokens:{},refreshTokens:{},appMetadata:{}};for(let n in e){let i=e[n];if(typeof i=="object")if(i instanceof Mc)t.accounts[n]=i;else if(Da.isIdTokenEntity(i))t.idTokens[n]=i;else if(Da.isAccessTokenEntity(i))t.accessTokens[n]=i;else if(Da.isRefreshTokenEntity(i))t.refreshTokens[n]=i;else if(Da.isAppMetadataEntity(n,i))t.appMetadata[n]=i;else continue}return t}inMemoryCacheToCache(e){let t=this.getCache();return t={...t,...e.accounts,...e.idTokens,...e.accessTokens,...e.refreshTokens,...e.appMetadata},t}getInMemoryCache(){return this.logger.trace("Getting in-memory cache"),this.cacheToInMemoryCache(this.getCache())}setInMemoryCache(e){this.logger.trace("Setting in-memory cache");let t=this.inMemoryCacheToCache(e);this.setCache(t),this.emitChange()}getCache(){return this.logger.trace("Getting cache key-value store"),this.cache}setCache(e){this.logger.trace("Setting cache key value store"),this.cache=e,this.emitChange()}getItem(e){return this.logger.tracePii(`Item key: ${e}`),this.getCache()[e]}setItem(e,t){this.logger.tracePii(`Item key: ${e}`);let n=this.getCache();n[e]=t,this.setCache(n)}getAccountKeys(){let e=this.getInMemoryCache();return Object.keys(e.accounts)}getTokenKeys(){let e=this.getInMemoryCache();return{idToken:Object.keys(e.idTokens),accessToken:Object.keys(e.accessTokens),refreshToken:Object.keys(e.refreshTokens)}}getAccount(e){let t=this.getCachedAccountEntity(e);return t&&Mc.isAccountEntity(t)?this.updateOutdatedCachedAccount(e,t):null}getCachedAccountEntity(e){return this.getItem(e)?Object.assign(new Mc,this.getItem(e)):null}setAccount(e){let t=e.generateAccountKey();this.setItem(t,e)}getIdTokenCredential(e){let t=this.getItem(e);return Da.isIdTokenEntity(t)?t:null}setIdTokenCredential(e){let t=Da.generateCredentialKey(e);this.setItem(t,e)}getAccessTokenCredential(e){let t=this.getItem(e);return Da.isAccessTokenEntity(t)?t:null}setAccessTokenCredential(e){let t=Da.generateCredentialKey(e);this.setItem(t,e)}getRefreshTokenCredential(e){let t=this.getItem(e);return Da.isRefreshTokenEntity(t)?t:null}setRefreshTokenCredential(e){let t=Da.generateCredentialKey(e);this.setItem(t,e)}getAppMetadata(e){let t=this.getItem(e);return Da.isAppMetadataEntity(e,t)?t:null}setAppMetadata(e){let t=Da.generateAppMetadataKey(e);this.setItem(t,e)}getServerTelemetry(e){let t=this.getItem(e);return t&&Da.isServerTelemetryEntity(e,t)?t:null}setServerTelemetry(e,t){this.setItem(e,t)}getAuthorityMetadata(e){let t=this.getItem(e);return t&&Da.isAuthorityMetadataEntity(e,t)?t:null}getAuthorityMetadataKeys(){return this.getKeys().filter(e=>this.isAuthorityMetadata(e))}setAuthorityMetadata(e,t){this.setItem(e,t)}getThrottlingCache(e){let t=this.getItem(e);return t&&Da.isThrottlingEntity(e,t)?t:null}setThrottlingCache(e,t){this.setItem(e,t)}removeItem(e){this.logger.tracePii(`Item key: ${e}`);let t=!1,n=this.getCache();return n[e]&&(delete n[e],t=!0),t&&(this.setCache(n),this.emitChange()),t}removeOutdatedAccount(e){this.removeItem(e)}containsKey(e){return this.getKeys().includes(e)}getKeys(){this.logger.trace("Retrieving all cache keys");let e=this.getCache();return[...Object.keys(e)]}async clear(){this.logger.trace("Clearing cache entries created by MSAL"),this.getKeys().forEach(t=>{this.removeItem(t)}),this.emitChange()}static generateInMemoryCache(e){return Qb.deserializeAllCache(Qb.deserializeJSONBlob(e))}static generateJsonCache(e){return PP.serializeAllCache(e)}updateCredentialCacheKey(e,t){let n=Da.generateCredentialKey(t);if(e!==n){let i=this.getItem(e);if(i)return this.removeItem(e),this.setItem(n,i),this.logger.verbose(`Updated an outdated ${t.credentialType} cache key`),n;this.logger.error(`Attempted to update an outdated ${t.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}};var iq={Account:{},IdToken:{},AccessToken:{},RefreshToken:{},AppMetadata:{}},sq=class{constructor(e,t,n){this.cacheHasChanged=!1,this.storage=e,this.storage.registerChangeEmitter(this.handleChangeEvent.bind(this)),n&&(this.persistence=n),this.logger=t}hasChanged(){return this.cacheHasChanged}serialize(){this.logger.trace("Serializing in-memory cache");let e=PP.serializeAllCache(this.storage.getInMemoryCache());return this.cacheSnapshot?(this.logger.trace("Reading cache snapshot from disk"),e=this.mergeState(JSON.parse(this.cacheSnapshot),e)):this.logger.trace("No cache snapshot to merge"),this.cacheHasChanged=!1,JSON.stringify(e)}deserialize(e){if(this.logger.trace("Deserializing JSON to in-memory cache"),this.cacheSnapshot=e,this.cacheSnapshot){this.logger.trace("Reading cache snapshot from disk");let t=Qb.deserializeAllCache(this.overlayDefaults(JSON.parse(this.cacheSnapshot)));this.storage.setInMemoryCache(t)}else this.logger.trace("No cache snapshot to deserialize")}getKVStore(){return this.storage.getCache()}async getAllAccounts(){this.logger.trace("getAllAccounts called");let e;try{return this.persistence&&(e=new uy(this,!0),await this.persistence.beforeCacheAccess(e)),this.storage.getAllAccounts()}finally{this.persistence&&e&&await this.persistence.afterCacheAccess(e)}}async getAccountByHomeId(e){let t=await this.getAllAccounts();return e&&t&&t.length&&t.filter(n=>n.homeAccountId===e)[0]||null}async getAccountByLocalId(e){let t=await this.getAllAccounts();return e&&t&&t.length&&t.filter(n=>n.localAccountId===e)[0]||null}async removeAccount(e){this.logger.trace("removeAccount called");let t;try{this.persistence&&(t=new uy(this,!0),await this.persistence.beforeCacheAccess(t)),await this.storage.removeAccount(Mc.generateAccountCacheKey(e))}finally{this.persistence&&t&&await this.persistence.afterCacheAccess(t)}}handleChangeEvent(){this.cacheHasChanged=!0}mergeState(e,t){this.logger.trace("Merging in-memory cache with cache snapshot");let n=this.mergeRemovals(e,t);return this.mergeUpdates(n,t)}mergeUpdates(e,t){return Object.keys(t).forEach(n=>{let i=t[n];if(!e.hasOwnProperty(n))i!==null&&(e[n]=i);else{let s=i!==null,o=typeof i=="object",a=!Array.isArray(i),c=typeof e[n]<"u"&&e[n]!==null;s&&o&&a&&c?this.mergeUpdates(e[n],i):e[n]=i}}),e}mergeRemovals(e,t){this.logger.trace("Remove updated entries in cache");let n=e.Account?this.mergeRemovalsDict(e.Account,t.Account):e.Account,i=e.AccessToken?this.mergeRemovalsDict(e.AccessToken,t.AccessToken):e.AccessToken,s=e.RefreshToken?this.mergeRemovalsDict(e.RefreshToken,t.RefreshToken):e.RefreshToken,o=e.IdToken?this.mergeRemovalsDict(e.IdToken,t.IdToken):e.IdToken,a=e.AppMetadata?this.mergeRemovalsDict(e.AppMetadata,t.AppMetadata):e.AppMetadata;return{...e,Account:n,AccessToken:i,RefreshToken:s,IdToken:o,AppMetadata:a}}mergeRemovalsDict(e,t){let n={...e};return Object.keys(e).forEach(i=>{(!t||!t.hasOwnProperty(i))&&delete n[i]}),n}overlayDefaults(e){return this.logger.trace("Overlaying input cache with the default cache"),{Account:{...iq.Account,...e.Account},IdToken:{...iq.IdToken,...e.IdToken},AccessToken:{...iq.AccessToken,...e.AccessToken},RefreshToken:{...iq.RefreshToken,...e.RefreshToken},AppMetadata:{...iq.AppMetadata,...e.AppMetadata}}}};var P4e=ge(tfe(),1);var FI=class r{static fromAssertion(e){let t=new r;return t.jwt=e,t}static fromCertificate(e,t,n){let i=new r;return i.privateKey=t,i.thumbprint=e,i.useSha256=!1,n&&(i.publicCertificate=this.parseCertificate(n)),i}static fromCertificateWithSha256Thumbprint(e,t,n){let i=new r;return i.privateKey=t,i.thumbprint=e,i.useSha256=!0,n&&(i.publicCertificate=this.parseCertificate(n)),i}getJwt(e,t,n){if(this.privateKey&&this.thumbprint)return this.jwt&&!this.isExpired()&&t===this.issuer&&n===this.jwtAudience?this.jwt:this.createJwt(e,t,n);if(this.jwt)return this.jwt;throw xt(Pu.invalidAssertion)}createJwt(e,t,n){this.issuer=t,this.jwtAudience=n;let i=Dc.nowSeconds();this.expirationTime=i+600;let o={alg:this.useSha256?hp.PSS_256:hp.RSA_256},a=this.useSha256?hp.X5T_256:hp.X5T;Object.assign(o,{[a]:fp.base64EncodeUrl(this.thumbprint,"hex")}),this.publicCertificate&&Object.assign(o,{[hp.X5C]:this.publicCertificate});let c={[hp.AUDIENCE]:this.jwtAudience,[hp.EXPIRATION_TIME]:this.expirationTime,[hp.ISSUER]:this.issuer,[hp.SUBJECT]:this.issuer,[hp.NOT_BEFORE]:i,[hp.JWT_ID]:e.createNewGuid()};return this.jwt=P4e.default.sign(c,this.privateKey,{header:o}),this.jwt}isExpired(){return this.expirationTime<Dc.nowSeconds()}static parseCertificate(e){let t=/-----BEGIN CERTIFICATE-----\r*\n(.+?)\r*\n-----END CERTIFICATE-----/gs,n=[],i;for(;(i=t.exec(e))!==null;)n.push(i[1].replace(/\r*\n/g,at.EMPTY_STRING));return n}};var rfe="@azure/msal-node",DP="2.12.0";var Sq=class extends _d{constructor(e){super(e)}async acquireToken(e){this.logger.info("in acquireToken call in username-password client");let t=Dc.nowSeconds(),n=await this.executeTokenRequest(this.authority,e),i=new ml(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(n.body),i.handleServerTokenResponse(n.body,this.authority,t,e)}async executeTokenRequest(e,t){let n=this.createTokenQueryParameters(t),i=ss.appendQueryString(e.tokenEndpoint,n),s=await this.createTokenRequestBody(t),o=this.createTokenRequestHeaders({credential:t.username,type:Hl.UPN}),a={clientId:this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid};return this.executePostToTokenEndpoint(i,s,o,a,t.correlationId)}async createTokenRequestBody(e){let t=new kc;t.addClientId(this.config.authOptions.clientId),t.addUsername(e.username),t.addPassword(e.password),t.addScopes(e.scopes),t.addResponseTypeForTokenAndIdToken(),t.addGrantType(Zg.RESOURCE_OWNER_PASSWORD_GRANT),t.addClientInfo(),t.addLibraryInfo(this.config.libraryInfo),t.addApplicationTelemetry(this.config.telemetry.application),t.addThrottling(),this.serverTelemetryManager&&t.addServerTelemetry(this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();t.addCorrelationId(n),this.config.clientCredentials.clientSecret&&t.addClientSecret(this.config.clientCredentials.clientSecret);let i=this.config.clientCredentials.clientAssertion;return i&&(t.addClientAssertion(await ay(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),t.addClientAssertionType(i.assertionType)),(!$o.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.username&&t.addCcsUpn(e.username),t.createQueryString()}};var jI=class{constructor(e){this.config=fhe(e),this.cryptoProvider=new Xb,this.logger=new mf(this.config.system.loggerOptions,rfe,DP),this.storage=new II(this.logger,this.config.auth.clientId,this.cryptoProvider,gme(this.config.auth)),this.tokenCache=new sq(this.storage,this.logger,this.config.cache.cachePlugin)}async getAuthCodeUrl(e){this.logger.info("getAuthCodeUrl called",e.correlationId);let t={...e,...await this.initializeBaseRequest(e),responseMode:e.responseMode||Mb.QUERY,authenticationScheme:Ki.BEARER},n=await this.buildOauthClientConfiguration(t.authority,t.correlationId,void 0,void 0,e.azureCloudOptions),i=new wI(n);return this.logger.verbose("Auth code client created",t.correlationId),i.getAuthCodeUrl(t)}async acquireTokenByCode(e,t){this.logger.info("acquireTokenByCode called"),e.state&&t&&(this.logger.info("acquireTokenByCode - validating state"),this.validateState(e.state,t.state||""),t={...t,state:""});let n={...e,...await this.initializeBaseRequest(e),authenticationScheme:Ki.BEARER},i=this.initializeServerTelemetryManager(Yb.acquireTokenByCode,n.correlationId);try{let s=await this.buildOauthClientConfiguration(n.authority,n.correlationId,i,void 0,e.azureCloudOptions),o=new wI(s);return this.logger.verbose("Auth code client created",n.correlationId),await o.acquireToken(n,t)}catch(s){throw s instanceof Ei&&s.setCorrelationId(n.correlationId),i.cacheFailedRequest(s),s}}async acquireTokenByRefreshToken(e){this.logger.info("acquireTokenByRefreshToken called",e.correlationId);let t={...e,...await this.initializeBaseRequest(e),authenticationScheme:Ki.BEARER},n=this.initializeServerTelemetryManager(Yb.acquireTokenByRefreshToken,t.correlationId);try{let i=await this.buildOauthClientConfiguration(t.authority,t.correlationId,n,void 0,e.azureCloudOptions),s=new Kb(i);return this.logger.verbose("Refresh token client created",t.correlationId),await s.acquireToken(t)}catch(i){throw i instanceof Ei&&i.setCorrelationId(t.correlationId),n.cacheFailedRequest(i),i}}async acquireTokenSilent(e){let t={...e,...await this.initializeBaseRequest(e),forceRefresh:e.forceRefresh||!1},n=this.initializeServerTelemetryManager(Yb.acquireTokenSilent,t.correlationId,t.forceRefresh);try{let i=await this.buildOauthClientConfiguration(t.authority,t.correlationId,n,void 0,e.azureCloudOptions),s=new tq(i);return this.logger.verbose("Silent flow client created",t.correlationId),await s.acquireToken(t)}catch(i){throw i instanceof Ei&&i.setCorrelationId(t.correlationId),n.cacheFailedRequest(i),i}}async acquireTokenByUsernamePassword(e){this.logger.info("acquireTokenByUsernamePassword called",e.correlationId);let t={...e,...await this.initializeBaseRequest(e)},n=this.initializeServerTelemetryManager(Yb.acquireTokenByUsernamePassword,t.correlationId);try{let i=await this.buildOauthClientConfiguration(t.authority,t.correlationId,n,void 0,e.azureCloudOptions),s=new Sq(i);return this.logger.verbose("Username password client created",t.correlationId),await s.acquireToken(t)}catch(i){throw i instanceof Ei&&i.setCorrelationId(t.correlationId),n.cacheFailedRequest(i),i}}getTokenCache(){return this.logger.info("getTokenCache called"),this.tokenCache}validateState(e,t){if(!e)throw wu.createStateNotFoundError();if(e!==t)throw xt(Pu.stateMismatch)}getLogger(){return this.logger}setLogger(e){this.logger=e}async buildOauthClientConfiguration(e,t,n,i,s){this.logger.verbose("buildOauthClientConfiguration called",t);let o=s||this.config.auth.azureCloudOptions,a=await this.createAuthority(e,t,i,o);return this.logger.info(`Building oauth client configuration with the following authority: ${a.tokenEndpoint}.`,t),n?.updateRegionDiscoveryMetadata(a.regionDiscoveryMetadata),{authOptions:{clientId:this.config.auth.clientId,authority:a,clientCapabilities:this.config.auth.clientCapabilities},loggerOptions:{logLevel:this.config.system.loggerOptions.logLevel,loggerCallback:this.config.system.loggerOptions.loggerCallback,piiLoggingEnabled:this.config.system.loggerOptions.piiLoggingEnabled,correlationId:t},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.cryptoProvider,networkInterface:this.config.system.networkClient,storageInterface:this.storage,serverTelemetryManager:n,clientCredentials:{clientSecret:this.clientSecret,clientAssertion:await this.getClientAssertion(a)},libraryInfo:{sku:hl.MSAL_SKU,version:DP,cpu:process.arch||at.EMPTY_STRING,os:process.platform||at.EMPTY_STRING},telemetry:this.config.telemetry,persistencePlugin:this.config.cache.cachePlugin,serializableCache:this.tokenCache}}async getClientAssertion(e){return this.developerProvidedClientAssertion&&(this.clientAssertion=FI.fromAssertion(await ay(this.developerProvidedClientAssertion,this.config.auth.clientId,e.tokenEndpoint))),this.clientAssertion&&{assertion:this.clientAssertion.getJwt(this.cryptoProvider,this.config.auth.clientId,e.tokenEndpoint),assertionType:hl.JWT_BEARER_ASSERTION_TYPE}}async initializeBaseRequest(e){return this.logger.verbose("initializeRequestScopes called",e.correlationId),e.authenticationScheme&&e.authenticationScheme===Ki.POP&&this.logger.verbose("Authentication Scheme 'pop' is not supported yet, setting Authentication Scheme to 'Bearer' for request",e.correlationId),e.authenticationScheme=Ki.BEARER,this.config.cache.claimsBasedCachingEnabled&&e.claims&&!$o.isEmptyObj(e.claims)&&(e.requestedClaimsHash=await this.cryptoProvider.hashString(e.claims)),{...e,scopes:[...e&&e.scopes||[],...pp],correlationId:e&&e.correlationId||this.cryptoProvider.createNewGuid(),authority:e.authority||this.config.auth.authority}}initializeServerTelemetryManager(e,t,n){let i={clientId:this.config.auth.clientId,correlationId:t,apiId:e,forceRefresh:n||!1};return new CP(i,this.storage)}async createAuthority(e,t,n,i){this.logger.verbose("createAuthority called",t);let s=oy.generateAuthority(e,i),o={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,azureRegionConfiguration:n,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache};return JW.createDiscoveredInstance(s,this.config.system.networkClient,this.storage,o,this.logger,t)}clearCache(){this.storage.clear()}};var w4e=ge(require("http"),1);var Q3=class{async listenForAuthCode(e,t){if(this.server)throw wu.createLoopbackServerAlreadyExistsError();return new Promise((n,i)=>{this.server=w4e.default.createServer((s,o)=>{let a=s.url;if(a){if(a===at.FORWARD_SLASH){o.end(e||"Auth code was successfully acquired. You can close this window now.");return}}else{o.end(t||"Error occurred loading redirectUrl"),i(wu.createUnableToLoadRedirectUrlError());return}let c=this.getRedirectUri(),l=new URL(a,c),u=WW.getDeserializedResponse(l.search)||{};u.code&&(o.writeHead(ws.REDIRECT,{location:c}),o.end()),n(u)}),this.server.listen(0)})}getRedirectUri(){if(!this.server||!this.server.listening)throw wu.createNoLoopbackServerExistsError();let e=this.server.address();if(!e||typeof e=="string"||!e.port)throw this.closeServer(),wu.createInvalidLoopbackAddressTypeError();let t=e&&e.port;return`${hl.HTTP_PROTOCOL}${hl.LOCALHOST}:${t}`}closeServer(){this.server&&(this.server.close(),typeof this.server.closeAllConnections=="function"&&this.server.closeAllConnections(),this.server.unref(),this.server=void 0)}};var Cq=class extends _d{constructor(e){super(e)}async acquireToken(e){let t=await this.getDeviceCode(e);e.deviceCodeCallback(t);let n=Dc.nowSeconds(),i=await this.acquireTokenWithDeviceCode(e,t),s=new ml(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return s.validateTokenResponse(i),s.handleServerTokenResponse(i,this.authority,n,e)}async getDeviceCode(e){let t=this.createExtraQueryParameters(e),n=ss.appendQueryString(this.authority.deviceCodeEndpoint,t),i=this.createQueryString(e),s=this.createTokenRequestHeaders(),o={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return this.executePostRequestToDeviceCodeEndpoint(n,i,s,o)}createExtraQueryParameters(e){let t=new kc;return e.extraQueryParameters&&t.addExtraQueryParameters(e.extraQueryParameters),t.createQueryString()}async executePostRequestToDeviceCodeEndpoint(e,t,n,i){let{body:{user_code:s,device_code:o,verification_uri:a,expires_in:c,interval:l,message:u}}=await this.networkManager.sendPostRequest(i,e,{body:t,headers:n});return{userCode:s,deviceCode:o,verificationUri:a,expiresIn:c,interval:l,message:u}}createQueryString(e){let t=new kc;return t.addScopes(e.scopes),t.addClientId(this.config.authOptions.clientId),e.extraQueryParameters&&t.addExtraQueryParameters(e.extraQueryParameters),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities),t.createQueryString()}continuePolling(e,t,n){if(n)throw this.logger.error("Token request cancelled by setting DeviceCodeRequest.cancel = true"),xt(Pu.deviceCodePollingCancelled);if(t&&t<e&&Dc.nowSeconds()>t)throw this.logger.error(`User defined timeout for device code polling reached. The timeout was set for ${t}`),xt(Pu.userTimeoutReached);if(Dc.nowSeconds()>e)throw t&&this.logger.verbose(`User specified timeout ignored as the device code has expired before the timeout elapsed. The user specified timeout was set for ${t}`),this.logger.error(`Device code expired. Expiration time of device code was ${e}`),xt(Pu.deviceCodeExpired);return!0}async acquireTokenWithDeviceCode(e,t){let n=this.createTokenQueryParameters(e),i=ss.appendQueryString(this.authority.tokenEndpoint,n),s=this.createTokenRequestBody(e,t),o=this.createTokenRequestHeaders(),a=e.timeout?Dc.nowSeconds()+e.timeout:void 0,c=Dc.nowSeconds()+t.expiresIn,l=t.interval*1e3;for(;this.continuePolling(c,a,e.cancel);){let u={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},d=await this.executePostToTokenEndpoint(i,s,o,u,e.correlationId);if(d.body&&d.body.error)if(d.body.error===at.AUTHORIZATION_PENDING)this.logger.info("Authorization pending. Continue polling."),await Dc.delay(l);else throw this.logger.info("Unexpected error in polling from the server"),ame(xL.postRequestFailed,d.body.error);else return this.logger.verbose("Authorization completed successfully. Polling stopped."),d.body}throw this.logger.error("Polling stopped for unknown reasons."),xt(Pu.deviceCodeUnknownError)}createTokenRequestBody(e,t){let n=new kc;n.addScopes(e.scopes),n.addClientId(this.config.authOptions.clientId),n.addGrantType(Zg.DEVICE_CODE_GRANT),n.addDeviceCode(t.deviceCode);let i=e.correlationId||this.config.cryptoInterface.createNewGuid();return n.addCorrelationId(i),n.addClientInfo(),n.addLibraryInfo(this.config.libraryInfo),n.addApplicationTelemetry(this.config.telemetry.application),n.addThrottling(),this.serverTelemetryManager&&n.addServerTelemetry(this.serverTelemetryManager),(!$o.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(e.claims,this.config.authOptions.clientCapabilities),n.createQueryString()}};var Pq=class extends jI{constructor(e){super(e),this.config.broker.nativeBrokerPlugin&&(this.config.broker.nativeBrokerPlugin.isBrokerAvailable?(this.nativeBrokerPlugin=this.config.broker.nativeBrokerPlugin,this.nativeBrokerPlugin.setLogger(this.config.system.loggerOptions)):this.logger.warning("NativeBroker implementation was provided but the broker is unavailable.")),this.skus=CP.makeExtraSkuString({libraryName:hl.MSAL_SKU,libraryVersion:DP})}async acquireTokenByDeviceCode(e){this.logger.info("acquireTokenByDeviceCode called",e.correlationId);let t=Object.assign(e,await this.initializeBaseRequest(e)),n=this.initializeServerTelemetryManager(Yb.acquireTokenByDeviceCode,t.correlationId);try{let i=await this.buildOauthClientConfiguration(t.authority,t.correlationId,n,void 0,e.azureCloudOptions),s=new Cq(i);return this.logger.verbose("Device code client created",t.correlationId),await s.acquireToken(t)}catch(i){throw i instanceof Ei&&i.setCorrelationId(t.correlationId),n.cacheFailedRequest(i),i}}async acquireTokenInteractive(e){let t=e.correlationId||this.cryptoProvider.createNewGuid();this.logger.trace("acquireTokenInteractive called",t);let{openBrowser:n,successTemplate:i,errorTemplate:s,windowHandle:o,loopbackClient:a,...c}=e;if(this.nativeBrokerPlugin){let f={...c,clientId:this.config.auth.clientId,scopes:e.scopes||pp,redirectUri:`${hl.HTTP_PROTOCOL}${hl.LOCALHOST}`,authority:e.authority||this.config.auth.authority,correlationId:t,extraParameters:{...c.extraQueryParameters,...c.tokenQueryParameters,[KL.X_CLIENT_EXTRA_SKU]:this.skus},accountId:c.account?.nativeAccountId};return this.nativeBrokerPlugin.acquireTokenInteractive(f,o)}let{verifier:l,challenge:u}=await this.cryptoProvider.generatePkceCodes(),d=a||new Q3,p={},m=null;try{let f=d.listenForAuthCode(i,s).then(w=>{p=w}).catch(w=>{m=w}),y=await this.waitForRedirectUri(d),v={...c,correlationId:t,scopes:e.scopes||pp,redirectUri:y,responseMode:Mb.QUERY,codeChallenge:u,codeChallengeMethod:oI.S256},_=await this.getAuthCodeUrl(v);if(await n(_),await f,m)throw m;if(p.error)throw new bd(p.error,p.error_description,p.suberror);if(!p.code)throw wu.createNoAuthCodeInResponseError();let C=p.client_info,P={code:p.code,codeVerifier:l,clientInfo:C||at.EMPTY_STRING,...v};return await this.acquireTokenByCode(P)}finally{d.closeServer()}}async acquireTokenSilent(e){let t=e.correlationId||this.cryptoProvider.createNewGuid();if(this.logger.trace("acquireTokenSilent called",t),this.nativeBrokerPlugin){let n={...e,clientId:this.config.auth.clientId,scopes:e.scopes||pp,redirectUri:`${hl.HTTP_PROTOCOL}${hl.LOCALHOST}`,authority:e.authority||this.config.auth.authority,correlationId:t,extraParameters:{...e.tokenQueryParameters,[KL.X_CLIENT_EXTRA_SKU]:this.skus},accountId:e.account.nativeAccountId,forceRefresh:e.forceRefresh||!1};return this.nativeBrokerPlugin.acquireTokenSilent(n)}return super.acquireTokenSilent(e)}async signOut(e){if(this.nativeBrokerPlugin&&e.account.nativeAccountId){let t={clientId:this.config.auth.clientId,accountId:e.account.nativeAccountId,correlationId:e.correlationId||this.cryptoProvider.createNewGuid()};await this.nativeBrokerPlugin.signOut(t)}await this.getTokenCache().removeAccount(e.account)}async getAllAccounts(){if(this.nativeBrokerPlugin){let e=this.cryptoProvider.createNewGuid();return this.nativeBrokerPlugin.getAllAccounts(this.config.auth.clientId,e)}return this.getTokenCache().getAllAccounts()}async waitForRedirectUri(e){return new Promise((t,n)=>{let i=0,s=setInterval(()=>{if(f3.TIMEOUT_MS/f3.INTERVAL_MS<i){clearInterval(s),n(wu.createLoopbackServerTimeoutError());return}try{let o=e.getRedirectUri();clearInterval(s),t(o);return}catch(o){if(o instanceof Ei&&o.errorCode===ac.noLoopbackServerExists.code){i++;return}clearInterval(s),n(o);return}},f3.INTERVAL_MS)})}};var nfe={MANAGED_IDENTITY_CLIENT_ID:"client_id",MANAGED_IDENTITY_OBJECT_ID:"object_id",MANAGED_IDENTITY_RESOURCE_ID:"mi_res_id"},t_=class{constructor(e,t,n,i){this.logger=e,this.nodeStorage=t,this.networkClient=n,this.cryptoProvider=i}async getServerTokenResponseAsync(e,t,n,i){return this.getServerTokenResponse(e)}getServerTokenResponse(e){let t,n;return e.body.expires_on&&(n=e.body.expires_on-Dc.nowSeconds(),n>2*3600&&(t=n/2)),{status:e.status,access_token:e.body.access_token,expires_in:n,scope:e.body.resource,token_type:e.body.token_type,refresh_in:t,correlation_id:e.body.correlation_id||e.body.correlationId,error:typeof e.body.error=="string"?e.body.error:e.body.error?.code,error_description:e.body.message||(typeof e.body.error=="string"?e.body.error_description:e.body.error?.message),error_codes:e.body.error_codes,timestamp:e.body.timestamp,trace_id:e.body.trace_id}}async acquireTokenWithManagedIdentity(e,t,n,i){let s=this.createRequest(e.resource,t),o=s.headers;o[oc.CONTENT_TYPE]=at.URL_FORM_CONTENT_TYPE;let a={headers:o};Object.keys(s.bodyParameters).length&&(a.body=s.computeParametersBodyString());let c=Dc.nowSeconds(),l;try{s.httpMethod===Kl.POST?l=await this.networkClient.sendPostRequestAsync(s.computeUri(),a):l=await this.networkClient.sendGetRequestAsync(s.computeUri(),a)}catch(p){throw p instanceof Ei?p:xt(Pu.networkError)}let u=new ml(t.id,this.nodeStorage,this.cryptoProvider,this.logger,null,null),d=await this.getServerTokenResponseAsync(l,this.networkClient,s,a);return u.validateTokenResponse(d,i),u.handleServerTokenResponse(d,n,c,e)}getManagedIdentityUserAssignedIdQueryParameterKey(e){switch(e){case ff.USER_ASSIGNED_CLIENT_ID:return this.logger.info("[Managed Identity] Adding user assigned client id to the request."),nfe.MANAGED_IDENTITY_CLIENT_ID;case ff.USER_ASSIGNED_RESOURCE_ID:return this.logger.info("[Managed Identity] Adding user assigned resource id to the request."),nfe.MANAGED_IDENTITY_RESOURCE_ID;case ff.USER_ASSIGNED_OBJECT_ID:return this.logger.info("[Managed Identity] Adding user assigned object id to the request."),nfe.MANAGED_IDENTITY_OBJECT_ID;default:throw EP(nq)}}};t_.getValidatedEnvVariableUrlString=(r,e,t,n)=>{try{return new ss(e).urlString}catch{throw n.info(`[Managed Identity] ${t} managed identity is unavailable because the '${r}' environment variable is malformed.`),EP(wP[r])}};var HBr={win32:`${process.env.ProgramData}\\AzureConnectedMachineAgent\\Tokens\\`,linux:"/var/opt/azcmagent/tokens/"};var v5t="/metadata/identity/oauth2/token",nGr=`http://169.254.169.254${v5t}`;var e4=ge(require("vscode"));var I4e=ge(require("url")),sfe=ge(require("vscode"));var MP=class extends Error{constructor(t,n,i){super(t);this.originalMessage=n;this.originalException=i}get originalMessageAndException(){return JSON.stringify({originalMessage:this.originalMessage,originalException:this.originalException},void 0,2)}};var BI=class{constructor(e,t,n,i,s,o){this.providerSettings=e;this.context=t;this.clientApplication=n;this.authType=i;this.vscodeWrapper=s;this.logger=o;this.loginEndpointUrl=this.providerSettings.loginEndpoint??"https://login.microsoftonline.com/",this.redirectUri="http://localhost",this.clientId=this.providerSettings.clientId,this.scopes=[...this.providerSettings.scopes],this.scopesString=this.scopes.join(" "),this.httpHelper=new bg(o)}loginEndpointUrl;redirectUri;scopes;scopesString;clientId;resources;httpHelper;async startLogin(){let e;try{if(this.logger.verbose("Starting login"),!this.providerSettings.resources.windowsManagementResource)throw new Error(XDe(this.providerSettings.displayName));let t=await this.login(YB);if(e=t.authComplete,!t?.response||!t.response?.account)return this.logger.error(`Authentication failed: ${e}`),{canceled:!1};let n={token:t.response.accessToken,key:t.response.account.homeAccountId,tokenType:t.response.tokenType},i=t.response.idTokenClaims,s=await this.hydrateAccount(n,i);return e?.resolve(),s}catch(t){return this.logger.error(`Login failed: ${t}`),t instanceof MP?e?(e.reject(t),this.logger.error(t)):(sfe.window.showErrorMessage(t.message),this.logger.error(t.originalMessageAndException)):this.logger.error(t),{canceled:!1}}}async hydrateAccount(e,t){let n=await this.getTenants(e.token);return this.createAccount(t,e.key,n)}async getToken(e,t,n){let i;try{i=await this.getAccountFromMsalCache(e.key.id)}catch{this.logger.error("Error: Could not fetch account from MSAL cache, re-authentication needed.");let u={id:t,displayName:""};return this.handleInteractionRequired(u,n,!1)}let s=n.endpoint.endsWith("/")?n.endpoint:n.endpoint+"/";if(!e)return this.logger.error("Error: Account not received."),null;t||(t=e.properties.owningTenant.id);let o;n.id===this.providerSettings.resources.windowsManagementResource.id?o=[`${s}user_impersonation`]:o=[`${s}.default`];let a=this.loginEndpointUrl+t;this.logger.info(`Authority URL set to: ${a}`);let c={account:i,authority:a,scopes:o,forceRefresh:!0};try{return await this.clientApplication.acquireTokenSilent(c)}catch(l){if(this.logger.error("Failed to acquireTokenSilent",l),l instanceof Ei&&this.accountNeedsRefresh(l)){let u={id:t,displayName:""};return this.handleInteractionRequired(u,n)}else l.name==="ClientAuthError"&&this.logger.verbose("[ClientAuthError] Failed to silently acquire token");throw this.logger.error(`Failed to silently acquire token, not InteractionRequiredAuthError: ${l.message}`),l}}accountNeedsRefresh(e){return e instanceof Sd||e.errorMessage.includes(WB)||e.errorMessage.includes(QB)||e.errorMessage.includes(KB)}async refreshAccessToken(e,t,n){if(e)try{let i=await this.getToken(e,t,n);if(!i)return e.isStale=!0,e;let s=this.getTokenClaims(i.accessToken);if(!s)return e.isStale=!0,e;let o={key:i.account.homeAccountId,token:i.accessToken,tokenType:i.tokenType,expiresOn:i.account.idTokenClaims.exp};return await this.hydrateAccount(o,s)}catch(i){throw e.isStale=!0,i}else throw this.logger.error("refreshAccessToken: Account not received for refreshing access token."),Error(vg)}async loadTokenCache(){this.clientApplication.getTokenCache().getAllAccounts()}async getAccountFromMsalCache(e){let t=this.clientApplication.getTokenCache();if(!t)return this.logger.error("Error: Could not fetch token cache."),null;let n;return e.includes(".")?n=await t.getAccountByHomeId(e):n=await t.getAccountByLocalId(e),n||(this.logger.error("Error: Could not find account from MSAL Cache."),null)}async getTenants(e){let t=I4e.resolve(this.providerSettings.resources.azureManagementResource.endpoint,"tenants?api-version=2019-11-01");try{this.logger.verbose("Fetching tenants with uri {0}",t);let n=[],s=(await this.httpHelper.makeGetRequest(t,e)).data;if(this.isErrorResponseBodyWithError(s))throw this.logger.error(`Error fetching tenants :${s.error.code} - ${s.error.message}`),new Error(`${s.error.code} - ${s.error.message}`);let o=s.value.map(c=>(c.displayName?n.push(c.displayName):(n.push(c.tenantId),this.logger.info("Tenant display name found empty: {0}",c.tenantId)),{id:c.tenantId,displayName:c.displayName?c.displayName:c.tenantId,userId:e,tenantCategory:c.tenantCategory}));this.logger.verbose(`Tenants: ${n}`);let a=o.findIndex(c=>c.tenantCategory===NAe);if(a>=0){let c=o.splice(a,1);o.unshift(c[0])}return this.logger.verbose(`Filtered Tenants: ${n}`),o}catch(n){throw this.logger.error(`Error fetching tenants :${n}`),n}}isErrorResponseBodyWithError(e){return"error"in e&&e.error}async handleInteractionRequired(e,t,n=!0){let i;if(n){if(i=await this.askUserForInteraction(e,t),i){let s=await this.login(e);return s?.authComplete?.resolve(),s?.response}}else{let s=await this.login(e);return s?.authComplete?.resolve(),s?.response}return null}async askUserForInteraction(e,t){if(!e.displayName&&!e.id)throw new Error("Tenant did not have display name or id");let n={title:WDe,booleanResult:!0},i={title:zi.cancel,isCloseAffordance:!0,booleanResult:!1},s=KDe(t.id),o=await sfe.window.showInformationMessage(s,{modal:!0},n,i);return o?.action&&await o.action(e.id),o?.booleanResult||!1}createAccount(e,t,n){this.logger.verbose(`Token Claims acccount: ${e.name}, TID: ${e.tid}`),n.forEach(p=>{this.logger.verbose(`Tenant ID: ${p.id}, Tenant Name: ${p.displayName}`)});let i="unknown";(e.iss==="https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/"||e.iss===`${this.loginEndpointUrl}72f988bf-86f1-41af-91ab-2d7cd011db47/v2.0`)&&(i="corp"),e?.idp==="live.com"&&(i="msft");let s=e.name??e.preferred_username??e.email??e.unique_name,o=e.preferred_username??e.email??e.unique_name,a=$Ae;e.tid?a=n.find(p=>p.id===e.tid)??{id:e.tid,displayName:"Microsoft Account"}:this.logger.info("Could not find tenant information from tokenClaims, falling back to common Tenant.");let c=s;o&&(c=`${c} - ${o}`);let l;switch(i){case"corp":l=QDe;break;case"msft":l=YDe;break;default:l=c}let u=i==="msft"?"microsoft":"work_school";return{key:{providerId:this.providerSettings.id,id:t,accountVersion:UAe},name:c,displayInfo:{accountType:u,userId:t,contextualDisplayName:l,displayName:c,email:o,name:s},properties:{providerSettings:this.providerSettings,isMsAccount:i==="msft",owningTenant:a,tenants:n,azureAuthType:this.authType},isStale:!1}}getTokenClaims(e){try{let t=e.split(".");return JSON.parse(Buffer.from(t[1],"base64").toString("utf8"))}catch(t){throw new Error("Unable to read token claims: "+JSON.stringify(t))}}toBase64UrlEncoding(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}async clearCredentials(e){try{let t=this.clientApplication.getTokenCache(),n=await this.getAccountFromMsalCache(e.key.id);await t.removeAccount(n)}catch(t){this.logger.error("Error when removing token from cache: ",t)}}async autoOAuthCancelled(){}};var R4e=ge(require("http")),x4e=ge(require("url")),ofe=class extends Error{},J3=class{constructor(e=5*60*1e3){this.autoShutoffTimer=e;this.bumpLastUsed(),this.autoShutoff(),this.server=R4e.createServer((t,n)=>{this.bumpLastUsed();let i=x4e.parse(t.url,!0),s=this.pathMappings.get(i.pathname);if(s)return s(t,i,n);n.writeHead(404),n.end()})}hasStarted;pathMappings=new Map;server;lastUsed;shutoffInterval;bumpLastUsed(){this.lastUsed=Date.now()}async shutdown(){return clearInterval(this.shutoffInterval),new Promise((e,t)=>{this.server.close(n=>{n?t(n):e()})})}async startup(){if(this.hasStarted)throw new ofe;this.hasStarted=!0;let e,t=new Promise((i,s)=>{e=setTimeout(()=>{s(new Error("Timed out waiting for the server to start"))},5e3),this.server.on("listening",()=>{let o=this.server.address();o.port===void 0&&s(new Error("Port was not defined")),i(o.port.toString())}),this.server.on("error",()=>{s(new Error("Server error"))}),this.server.on("close",()=>{s(new Error("Server closed"))}),this.server.listen(0,"127.0.0.1")}),n=()=>{clearTimeout(e)};return t.finally(n),t}on(e,t){this.pathMappings.set(e,t)}autoShutoff(){this.shutoffInterval=setInterval(()=>{Date.now()-this.lastUsed>this.autoShutoffTimer&&(console.log("Shutting off webserver..."),this.shutdown().catch(console.error))},1e3)}};var wq=ge(require("path")),O4e=require("fs"),Z3=class extends BI{constructor(t,n,i,s,o){super(t,n,i,0,s,o);this.providerSettings=t;this.context=n;this.clientApplication=i;this.vscodeWrapper=s;this.logger=o;this.cryptoProvider=new Xb,this.pkceCodes={nonce:"",challengeMethod:BAe,codeVerifier:"",codeChallenge:""}}pkceCodes;cryptoProvider;async login(t){let n,i=new Promise((d,p)=>n={resolve:d,reject:p}),s,o=new J3;try{s=await o.startup()}catch(d){let p=ZDe;throw new MP(p,"Server could not start",d)}await this.createCryptoValuesMsal();let a=`${s},${this.pkceCodes.nonce}`,c,l=this.loginEndpointUrl+t.id;this.logger.info(`Authority URL set to: ${l}`);try{let d;d={scopes:this.scopes,redirectUri:`${this.redirectUri}:${s}/redirect`,codeChallenge:this.pkceCodes.codeChallenge,codeChallengeMethod:this.pkceCodes.challengeMethod,prompt:GAe,authority:l,state:a},c={scopes:this.scopes,redirectUri:`${this.redirectUri}:${s}/redirect`,codeVerifier:this.pkceCodes.codeVerifier,authority:l,code:""};let p=await this.clientApplication.getAuthCodeUrl(d);await e4.env.openExternal(e4.Uri.parse(`http://localhost:${s}/signin?nonce=${encodeURIComponent(this.pkceCodes.nonce)}`));let m=await this.addServerListeners(o,this.pkceCodes.nonce,p,i);c.code=m}catch(d){throw this.logger.error("MSAL: Error requesting auth code",d),new MP("error","Error requesting auth code",d)}let u=await this.clientApplication.acquireTokenByCode(c);if(u)return{response:u,authComplete:n};throw this.logger.error("Failed to acquireTokenByCode"),this.logger.error(`Auth Code Request: ${JSON.stringify(c)}`),Error("Failed to fetch token using auth code")}async addServerListeners(t,n,i,s){let o=wq.join(this.context.extensionPath,"media"),a=async(c,l,u)=>{let d;try{d=await O4e.promises.readFile(l)}catch(p){this.logger.error(p),c.writeHead(400),c.end();return}c.writeHead(200,{"Content-Length":d.length,"Content-Type":u}),c.end(d)};return t.on("/landing.css",(c,l,u)=>{a(u,wq.join(o,"landing.css"),"text/css; charset=utf-8").catch(this.logger.error)}),t.on("/SignIn.svg",(c,l,u)=>{a(u,wq.join(o,"SignIn.svg"),"image/svg+xml").catch(this.logger.error)}),t.on("/signin",(c,l,u)=>{let d=l.query.nonce;if(d=d.replace(/ /g,"+"),d!==n){u.writeHead(400,{"content-type":"text/html"}),u.write(aie),u.end(),this.logger.error("nonce no match",d,n);return}u.writeHead(302,{Location:i}),u.end()}),new Promise((c,l)=>{t.on("/redirect",(u,d,p)=>{let f=(d.query.state??"").split(",");if(f.length!==2){p.writeHead(400,{"content-type":"text/html"}),p.write(cie),p.end(),l(new Error("State mismatch"));return}let y=f[0];p.writeHead(302,{Location:`http://127.0.0.1:${y}/callback${d.search}`}),p.end()}),t.on("/callback",(u,d,p)=>{let m=d.query.state??"",f=d.query.code??"",y=m.split(",");if(y.length!==2){p.writeHead(400,{"content-type":"text/html"}),p.write(cie),p.end(),l(new Error("State mismatch"));return}if(y[1]!==encodeURIComponent(n)){p.writeHead(400,{"content-type":"text/html"}),p.write(aie),p.end(),l(new Error("Nonce mismatch"));return}c(f),s.then(()=>{a(p,wq.join(o,"landing.html"),"text/html; charset=utf-8").catch(console.error)},v=>{p.writeHead(400,{"content-type":"text/html"}),p.write(v.message),p.end()})})})}async createCryptoValuesMsal(){this.pkceCodes.nonce=this.cryptoProvider.createNewGuid();let{verifier:t,challenge:n}=await this.cryptoProvider.generatePkceCodes();this.pkceCodes.codeVerifier=t,this.pkceCodes.codeChallenge=n}};var r4=ge(require("vscode"));var t4=class extends BI{constructor(t,n,i,s,o){super(t,n,i,1,s,o);this.providerSettings=t;this.context=n;this.clientApplication=i;this.vscodeWrapper=s;this.logger=o}async login(t){let n,i=new Promise((c,l)=>n={resolve:c,reject:l}),s=this.loginEndpointUrl+t.id;this.logger.info(`Authority URL set to: ${s}`);let o={scopes:this.scopes,authority:s,deviceCodeCallback:async c=>{await this.displayDeviceCodeScreen(c.message,c.userCode,c.verificationUri)}},a=await this.clientApplication.acquireTokenByDeviceCode(o);return this.logger.pii(`Authentication completed for account: ${a?.account.name}, tenant: ${a?.tenantId}`),this.closeOnceComplete(i).catch(this.logger.error),{response:a,authComplete:n}}async closeOnceComplete(t){await t}async displayDeviceCodeScreen(t,n,i){await this.vscodeWrapper.showInformationMessage(t,die)===die&&(this.vscodeWrapper.clipboardWriteText(n),await r4.env.openExternal(r4.Uri.parse(i)),console.log(t),console.log(n),console.log(i))}};var WI=require("fs"),r_=ge(U4e()),G4e=ge(require("path"));var vfe=ge(require("os")),qP=ge(require("crypto")),B4e=ge(require("vscode"));var Cd=ge(Vi()),d4;(e=>e.type=new Cd.RequestType("connection/connect"))(d4||={});var Iq=class{ownerUri;connection},ufe;(e=>e.type=new Cd.NotificationType("connection/complete"))(ufe||={});var dfe;(e=>e.type=new Cd.RequestType("connection/cancelconnect"))(dfe||={});var c4=class{ownerUri},pfe;(e=>e.type=new Cd.NotificationType("connection/connectionchanged"))(pfe||={});var mfe;(e=>e.type=new Cd.RequestType("connection/disconnect"))(mfe||={});var l4=class{ownerUri},p4;(e=>e.type=new Cd.RequestType("connection/listdatabases"))(p4||={});var Rq=class{ownerUri};var hfe;(e=>e.type=new Cd.RequestType("connection/getconnectionstring"))(hfe||={});var u4=class{ownerUri;connectionDetails;includePassword;includeApplicationName},ffe;(e=>e.type=new Cd.RequestType("connection/parseConnectionString"))(ffe||={});var gfe;(e=>e.type=new Cd.NotificationType("connection/encryptionKeysChanged"))(gfe||={});var yfe;(e=>e.type=new Cd.RequestType("connection/clearpooledconnections"))(yfe||={});var xq;(e=>e.type=new Cd.RequestType("capabilities/list"))(xq||={});var m4=class{constructor(e,t,n,i){this._credentialStore=e;this._vscodeWrapper=t;this._logger=n;this._fileName=i;this._algorithm="aes-256-cbc",this._bufferEncoding="utf16le",this._binaryEncoding="base64",this._ivCredId=`${this._fileName}-iv`,this._keyCredId=`${this._fileName}-key`}_ivCredId;_keyCredId;_algorithm;_bufferEncoding;_binaryEncoding;_ivBuffer;_keyBuffer;async init(){let e=await this.readEncryptionKey(this._ivCredId),t=await this.readEncryptionKey(this._keyCredId);!e||!t?(this._ivBuffer=qP.randomBytes(16),this._keyBuffer=qP.randomBytes(32),(!await this.saveEncryptionKey(this._ivCredId,this._ivBuffer.toString(this._bufferEncoding))||!await this.saveEncryptionKey(this._keyCredId,this._keyBuffer.toString(this._bufferEncoding)))&&(this._logger.error("Encryption keys could not be saved in credential store, this will cause access token persistence issues."),await this.showCredSaveErrorOnWindows())):(this._ivBuffer=Buffer.from(e,this._bufferEncoding),this._keyBuffer=Buffer.from(t,this._bufferEncoding)),zv()&&Mn.instance.sendNotification(gfe.type,{iv:this._ivBuffer.toString(this._bufferEncoding),key:this._keyBuffer.toString(this._bufferEncoding)})}fileSaver=async e=>{(!this._keyBuffer||!this._ivBuffer)&&await this.init();let t=qP.createCipheriv(this._algorithm,this._keyBuffer,this._ivBuffer);return`${t.update(e,"utf8",this._binaryEncoding)}${t.final(this._binaryEncoding)}`};fileOpener=async(e,t)=>{try{(!this._keyBuffer||!this._ivBuffer)&&await this.init();let n=e,i=qP.createDecipheriv(this._algorithm,this._keyBuffer,this._ivBuffer);return`${i.update(n,this._binaryEncoding,"utf8")}${i.final("utf8")}`}catch(n){throw this._logger.error(`FileEncryptionHelper: Error occurred when decrypting data, IV/KEY will be reset: ${n}`),t&&(await this.clearEncryptionKeys(),await this.init()),new Error(`Decryption failed with error: ${n}`)}};getPrefixedCredentialId(e){return`${DAe}|${e}`}async readEncryptionKey(e){return(await this._credentialStore.readCredential(this.getPrefixedCredentialId(e)))?.password}async saveEncryptionKey(e,t){let n=!1,i=this.getPrefixedCredentialId(e);try{await this._credentialStore.saveCredential(i,t).then(s=>{n=s,s&&this._logger.info(`FileEncryptionHelper: Successfully saved encryption key ${i} for persistent cache encryption in system credential store.`)},s=>{throw Error(`FileEncryptionHelper: Could not save encryption key: ${i}: ${s}`)})}catch(s){throw vfe.platform()==="win32"&&this._logger.error("FileEncryptionHelper: Please try cleaning saved credentials from Windows Credential Manager created by Azure Data Studio to allow creating new credentials."),this._logger.error(s),s}return n}async clearEncryptionKeys(){await this.deleteEncryptionKey(this._ivCredId),await this.deleteEncryptionKey(this._keyCredId),this._ivBuffer=void 0,this._keyBuffer=void 0}async deleteEncryptionKey(e){return await this._credentialStore.deleteCredential(e)}async showCredSaveErrorOnWindows(){vfe.platform()==="win32"&&await this._vscodeWrapper.showWarningMessageAdvanced(VMe,void 0,[AT,zi.cancel]).then(async e=>{e===AT&&await B4e.commands.executeCommand("workbench.action.reloadWindow")},e=>{this._logger.error(e)})}};var h4=class{constructor(e,t,n,i,s){this._serviceName=e;this._msalFilePath=t;this._vscodeWrapper=n;this._logger=i;this._credentialStore=s;this._msalFilePath=G4e.join(this._msalFilePath,this._serviceName),this._serviceName=this._serviceName.replace(/-/,"_"),this._fileEncryptionHelper=new m4(this._credentialStore,this._vscodeWrapper,this._logger,this._serviceName),this._logger.verbose(`MsalCachePluginProvider: Using cache path ${t} and serviceName ${e}`)}_lockTaken=!1;_fileEncryptionHelper;getLockfilePath(){return this._msalFilePath+".lockfile"}async unlinkMsalCache(){await WI.promises.unlink(this._msalFilePath)}async clearCacheEncryptionKeys(){await this._fileEncryptionHelper.clearEncryptionKeys()}getCachePlugin(){let e=this.getLockfilePath();return{beforeCacheAccess:async i=>{await this.waitAndLock(e);try{let s=await WI.promises.readFile(this._msalFilePath,{encoding:"utf8"}),o=await this._fileEncryptionHelper.fileOpener(s);try{i.tokenCache.deserialize(o)}catch(a){this._logger.verbose(`MsalCachePlugin: Error occurred when trying to read cache file, file contents will be cleared: ${a.message}`),await WI.promises.unlink(this._msalFilePath)}this._logger.verbose("MsalCachePlugin: Token read from cache successfully.")}catch(s){s.code==="ENOENT"?this._logger.verbose(`MsalCachePlugin: Cache file not found on disk: ${s.code}`):(this._logger.error(`MsalCachePlugin: Failed to read from cache file, file contents will be cleared : ${s}`),await WI.promises.unlink(this._msalFilePath))}finally{r_.unlockSync(e),this._lockTaken=!1}},afterCacheAccess:async i=>{if(i.cacheHasChanged){await this.waitAndLock(e);try{let s=i.tokenCache.serialize(),o=await this._fileEncryptionHelper.fileSaver(s);await WI.promises.writeFile(this._msalFilePath,o,{encoding:"utf8"}),this._logger.verbose("MsalCachePlugin: Token written to cache successfully.")}catch(s){throw this._logger.error(`MsalCachePlugin: Failed to write to cache file. ${s}`),s}finally{r_.unlockSync(e),this._lockTaken=!1}}}}}async waitAndLock(e){r_.checkSync(e)&&!this._lockTaken&&(r_.unlockSync(e),this._logger.verbose("MsalCachePlugin: Stale lockfile found and has been removed."));let i=0;for(;i<=500;)try{r_.lockSync(e),this._lockTaken=!0;break}catch{if(i===500)throw this._logger.error("MsalCachePlugin: Failed to acquire lock on cache file after 500 attempts."),new Error("Failed to acquire lock on cache file after 500 attempts. Please try clearing Access token cache.");i++,this._logger.verbose("MsalCachePlugin: Failed to acquire lock on cache file. Retrying in 100 ms."),await new Promise(o=>setTimeout(()=>o,100))}}};var bfe=require("fs"),$4e=ge(require("path"));var f4=class extends df{_authMappings=new Map;_cachePluginProvider=void 0;clientApplication;getLoggerCallback(){return(e,t,n)=>{if(n)this.logger.pii(t);else switch(e){case Ds.Error:this.logger.error(t);break;case Ds.Info:this.logger.info(t);break;case Ds.Verbose:default:this.logger.verbose(t);break}}}init(){zv()&&(this._isSqlAuthProviderEnabled=!0)}async loadTokenCache(){let e=_g();this._authMappings.has(e)||await this.handleAuthMapping();let t=await this.getAzureAuthInstance(e);await this.clearOldCacheIfExists(),t.loadTokenCache()}async clearTokenCache(){this.clientApplication.clearCache(),await this._cachePluginProvider.unlinkMsalCache(),await this._cachePluginProvider.clearCacheEncryptionKeys()}async clearOldCacheIfExists(){let e=$4e.join(await this.findOrMakeStoragePath(),LAe);try{await bfe.promises.access(e),await bfe.promises.rm(e),this.logger.verbose("Old cache file removed successfully.")}catch(t){t.code!=="ENOENT"&&this.logger.verbose(`Error occurred while removing old cache file: ${t}`)}}async login(e){let n=await(await this.getAzureAuthInstance(e)).startLogin();return n||void 0}async isAccountInCache(e){let t=_g(),n=await this.getAzureAuthInstance(t);return await this.clearOldCacheIfExists(),await n.getAccountFromMsalCache(e.key.id)!==void 0}async getAzureAuthInstance(e){return this._authMappings.has(e)||await this.handleAuthMapping(),this._authMappings.get(e)}async getAccountSecurityToken(e,t,n){let i=await this.getAzureAuthInstance(_g());if(i){this.logger.piiSanitized(`Getting account security token for ${JSON.stringify(e?.key)} (tenant ${t}). Auth Method = ${Sm[e?.properties.azureAuthType]}`,[],[]),t=t||e.properties.owningTenant.id;let s=await i.getToken(e,t,n);if(!s||!s.account||!s.account.idTokenClaims)throw this.logger.error("MSAL: getToken call failed"),Error("Failed to get token");return{key:s.account.homeAccountId,token:s.accessToken,tokenType:s.tokenType,expiresOn:s.account.idTokenClaims.exp}}else throw e?(e.isStale=!0,this.logger.error(`_getAccountSecurityToken: Authentication method not found for account ${e.displayInfo.displayName}`),Error(NMe)):(this.logger.error("_getAccountSecurityToken: Authentication method not found as account not available."),Error(vg))}async refreshAccessToken(e,t,n,i){let s;try{return s=await(await this.getAzureAuthInstance(_g())).refreshAccessToken(e,YB.id,this._providerSettings.resources.windowsManagementResource),s.isStale===!0?void 0:(await t.addAccount(s),await this.getAccountSecurityToken(e,n??e.properties.owningTenant.id,i))}catch(o){if(o instanceof iy&&o.errorCode===FAe)try{return s=await this.login(e.properties.azureAuthType),s.isStale===!0?void 0:(await t.addAccount(s),await this.getAccountSecurityToken(e,n??e.properties.owningTenant.id,i))}catch(a){this._vscodeWrapper.showErrorMessage(a)}if(rt(o).includes(jAe)){if(await this._vscodeWrapper.showErrorMessage(xn.multipleMatchingTokensError(e?.displayInfo?.displayName,n),xn.ClearCacheAndRefreshToken,zi.cancel)===wm)return await this.clearTokenCache(),await this.refreshAccessToken(e,t,n,i)}else this._vscodeWrapper.showErrorMessage(o)}}async populateAccountProperties(e,t,n){let i=await this.addAccount(t);if(e.user=i.displayInfo.displayName,e.email=i.displayInfo.email,e.accountId=i.key.id,this.isSqlAuthProviderEnabled())this.logger.verbose("SQL Authentication Provider is enabled, access token will not be acquired by extension.");else{e.tenantId||await this.promptForTenantChoice(i,e);let s=await this.getAccountSecurityToken(i,e.tenantId,n);if(s)e.azureAccountToken=s.token,e.expiresOn=s.expiresOn;else{let o=wMe;this.logger.error(o),this._vscodeWrapper.showErrorMessage(o)}}return e}async removeAccount(e){await(await this.getAzureAuthInstance(_g())).clearCredentials(e)}async handleAuthMapping(){if(!this.clientApplication){let t=await this.findOrMakeStoragePath();this._cachePluginProvider=new h4(nqe,t,this._vscodeWrapper,this.logger,this._credentialStore);let n={auth:{clientId:this._providerSettings.clientId,authority:"https://login.windows.net/common"},system:{loggerOptions:{loggerCallback:this.getLoggerCallback(),logLevel:Ds.Trace,piiLoggingEnabled:!0}},cache:{cachePlugin:this._cachePluginProvider?.getCachePlugin()}};this.clientApplication=new Pq(n)}this._authMappings.clear();let e=_g();e===0?this._authMappings.set(0,new Z3(this._providerSettings,this.context,this.clientApplication,this._vscodeWrapper,this.logger)):e===1&&this._authMappings.set(1,new t4(this._providerSettings,this.context,this.clientApplication,this._vscodeWrapper,this.logger))}};var g4=class{constructor(e,t){this._context=e;this._client=t;this._client||(this._client=Mn.instance),this._secretStorage=this._context.secrets}_secretStorage;async readCredential(e){let t=new U0;return t.credentialId=e,p$?(t.password=await this._secretStorage.get(e),t):await this._client.sendRequest(Ple.type,t)}async saveCredential(e,t){let n=new U0;return n.credentialId=e,n.password=t,p$&&await this._secretStorage.store(e,t),await this._client.sendRequest(wle.type,n)}async deleteCredential(e){let t=new U0;return t.credentialId=e,p$&&await this._secretStorage.delete(e),await this._client.sendRequest(Ele.type,t)}};var _fe=ge(Vi()),Sfe;(e=>e.type=new _fe.RequestType("resource/createFirewallRule"))(Sfe||={});var Cfe;(e=>e.type=new _fe.RequestType("resource/handleFirewallRule"))(Cfe||={});var wy=ge(require("vscode")),tY=require("vscode"),_Ze=ge(L_e()),SZe=ge(nX());var fZe=ge(require("vscode")),gZe=ge(L_e());var C_=class r extends gZe.VSCodeAzureSubscriptionProvider{static _instance;constructor(){super()}static getInstance(){return r._instance??=new r,r._instance}getSelectedSubscriptions(){return fZe.workspace.getConfiguration().get(dC,[])}async getTenantFilters(){return this.getSelectedSubscriptions().map(e=>e.split("/")[0])}async getSubscriptionFilters(){return this.getSelectedSubscriptions().map(e=>e.split("/")[1])}};var yZe=ge(require("vscode"));function vZe(r){let e=Map.groupBy(r,i=>i.group),t=[];e.has(void 0)&&t.push(...e.get(void 0));let n=Array.from(e.keys()).filter(i=>i!==void 0).sort();for(let i of n)t.push({label:i,kind:yZe.QuickPickItemKind.Separator}),t.push(...e.get(i));return t}var os=class{static async getAccounts(e=!0){let t=[];try{t=Array.from(await wy.authentication.getAccounts((0,_Ze.getConfiguredAuthProviderId)())).sort((n,i)=>n.label.localeCompare(i.label))}catch(n){console.error(`Error fetching VS Code accounts: ${rt(n)}`)}if(e){let n=[];for(let i of t)try{(await C_.getInstance().getTenants(i)).length>0?n.push(i):console.warn(`No tenants found for account ${i.label}; this may indicate that the MSSQL extension does not have permission to use this account.`)}catch(s){console.warn(`Error fetching tenants for ${i.label}; this may indicate that the MSSQL extension does not have permission to use this account.  Error: ${rt(s)}`)}return n}else return t}static async getAccountById(e){return(await this.getAccounts()).find(n=>n.id===e)}static async getAccountByName(e){return(await this.getAccounts()).find(n=>n.label===e)}static async isSignedIn(){return await C_.getInstance().isSignedIn()}static async signIn(e=!1){let t=C_.getInstance();if((e||!await t.isSignedIn())&&!await t.signIn())throw new Error("Azure sign-in was canceled or failed.");return t}static getHomeTenantIdForAccount(e){let t=typeof e=="string"?e:e.id;if(t?.includes("."))return t.split(".")[1]}static async getTenantsForAccount(e){try{return e=typeof e=="string"?await this.getAccountById(e):e,[...await C_.getInstance().getTenants(e)].sort((i,s)=>i.displayName.localeCompare(s.displayName))}catch(t){return console.error("Error fetching tenants for account:",t),[]}}static async getTenant(e,t){return(await this.getTenantsForAccount(e)).find(i=>i.tenantId===t)}static async getSubscriptionsForTenant(e){return(await C_.getInstance().getSubscriptions(!1)).filter(s=>s.tenantId===e.tenantId).map(s=>({subscriptionId:s.subscriptionId,displayName:s.name}))}static async fetchResourcesForSubscription(e){let t=new SZe.ResourceManagementClient(e.credential,e.subscriptionId);return await TGe(t.resources.list())}static async fetchServersFromAzure(e){let t=[],n=await this.fetchResourcesForSubscription(e),i=n.filter(o=>o.type===ghr),s=n.filter(o=>o.type===yhr);for(let o of i)t.push({server:o.name,databases:[],location:o.location,resourceGroup:bZe(o.id,"resourceGroups"),subscription:`${e.name} (${e.subscriptionId})`,uri:vhr(o)});for(let o of s){let a=bZe(o.id,"servers"),c=t.find(l=>l.server===a);c&&c.databases.push(o.name.substring(a.length+1))}return t}};async function CZe(r,e){try{let t=await os.signIn();if(!t)return r.formError=tY.l10n.t("Azure sign in failed."),!1;let n=await wy.window.showQuickPick(fhr(t),{canPickMany:!0,ignoreFocusOut:!0,placeHolder:tY.l10n.t("Select subscriptions")});return n?(await wy.workspace.getConfiguration().update(dC,n.map(i=>`${i.tenantId}/${i.subscriptionId}`),wy.ConfigurationTarget.Global),!0):!1}catch(t){return r.formError=tY.l10n.t("Error loading Azure subscriptions."),e.error(r.formError+`
`+rt(t)),!1}}async function fhr(r){let e=await r.getSubscriptions(!1),t=wy.workspace.getConfiguration().get(dC)?.map(i=>i.split("/")[1]),n=e.map(i=>({label:i.name,description:i.subscriptionId,tenantId:i.tenantId,subscriptionId:i.subscriptionId,picked:t?t.includes(i.subscriptionId):!0,group:i.account.label})).sort((i,s)=>i.label.localeCompare(s.label));return vZe(n)}var ghr="Microsoft.Sql/servers",yhr="Microsoft.Sql/servers/databases";async function q_e(r,e){let t=[];try{return t=await r.getAccounts(),t.map(n=>({displayName:n.displayInfo?.displayName,value:n.key.id}))}catch(n){return e.error(`Error loading Azure accounts: ${rt(n)}`),kr("ConnectionDialog","LoadAzureAccountsForEntraAuth",n,!1,void 0,void 0,void 0,{accountCount:t.length,undefinedAccountCount:t.filter(i=>i===void 0).length,undefinedDisplayInfoCount:t.filter(i=>i!==void 0&&i.displayInfo===void 0).length}),[]}}async function rY(r,e,t){let n=[];if(!e)return t.error("getTenants(): undefined accountId passed."),[];try{let i=await r.getAccount(e);if(!i?.properties?.tenants){let s=i?i.properties?"tenants":"properties":"account",o=`Unable to retrieve tenants for the selected account due to undefined ${s}`;return t.error(o),kr("ConnectionDialog","LoadAzureTenantsForEntraAuth",new Error(o),!0,void 0,`missing_${s}`),[]}return n=i.properties.tenants,n.map(s=>({displayName:s.displayName,value:s.id}))}catch(i){return t.error(`Error loading Azure tenants: ${rt(i)}`),kr("ConnectionDialog","LoadAzureTenantsForEntraAuth",i,!1,void 0,void 0,void 0,{tenant:n.length,undefinedTenantCount:n.filter(s=>s===void 0).length}),[]}}async function PZe(r){let n=(await(await os.signIn()).getSubscriptions({account:await os.getAccountById(r.accountId),tenantId:r.tenantId})).filter(c=>c.tenantId===r.tenantId)[0];if(!n)throw new Error(Zu.errorLoadingAzureAccountInfoForTenantId(r.tenantId));let i=await n.credential.getToken(".default"),s=await n.authentication.getSession(),o={displayInfo:{displayName:s.account.label,userId:s.account.label,name:s.account.label,accountType:s.account.type},key:{providerId:"microsoft",id:s.account.label},isStale:!1,properties:{azureAuthType:0,providerSettings:void 0,isMsAccount:!1,owningTenant:void 0,tenants:[{displayName:n.tenantId,id:n.tenantId,userId:i.token}]}},a={};return a[n.tenantId]={Token:i.token},{account:o,tokenMappings:a}}function bZe(r,e){e.endsWith("/")||(e+="/");let t=r.indexOf(e);if(t===-1)return;t+=e.length;let n=r.indexOf("/",t);return n===-1&&(n=void 0),r.substring(t,n)}function vhr(r){let e=r.kind.includes("analytics")?hs.resources.databaseResource.analyticsDnsSuffix:hs.resources.databaseResource.dnsSuffix;return`${r.name}.${e}`}var nY=class{constructor(e){this.accountService=e}async createFirewallRule(e){return await this.accountService.client.sendResourceRequest(Sfe.type,e)}async handleFirewallRule(e,t){let n={errorCode:e,errorMessage:t,connectionTypeId:il};return await this.accountService.client.sendResourceRequest(Cfe.type,n)}async createFirewallRuleWithVscodeAccount(e,t){let[n,i]=typeof e.ip=="string"?[e.ip,e.ip]:[e.ip.startIp,e.ip.endIp],s,o;try{({account:s,tokenMappings:o}=await PZe(e.azureAccountInfo))}catch(a){let c=new Error(Zu.errorCreatingFirewallRule(`"${e.name}" (${n} - ${i})`,rt(a)));throw c.name="constructAzureAccountForTenant",c}try{let a=await this.createFirewallRule({account:s,firewallRuleName:e.name,startIpAddress:n,endIpAddress:i,serverName:t,securityTokenMappings:o});if(!a.result)throw a.errorMessage}catch(a){let c=new Error(Zu.errorCreatingFirewallRule(`"${e.name}" (${n} - ${i})`,rt(a)));throw c.name="createFirewallRule",c}}};var wZe=ge(require("vscode"));var z_e=Hde()("ValidationException");var iY=class r{constructor(e){this._vscodeWrapper=e;this._vscodeWrapper||(this._vscodeWrapper=new gi),this._logger=Cs.create(this._vscodeWrapper.outputChannel,"ConnectionConfig"),this.initialize()}_logger;initialized=new xi;static RootGroupName="ROOT";_hasDisplayedMissingIdError=!1;async initialize(){await this.assignConnectionGroupMissingIds(),await this.assignConnectionMissingIds(),this.initialized.resolve()}async getConnections(e){await this.initialized;let t=[],n=this.getConnectionsFromSettings();if(n.sort(this.compareConnectionProfile),t=t.concat(n),e){let s=this.getConnectionsFromSettings(Sg.Workspace),o=[];s=s.filter(a=>a.id?!0:(this._hasDisplayedMissingIdError||o.push(a),!1)),o.length>0&&(this._hasDisplayedMissingIdError=!0,this._vscodeWrapper.showErrorMessage(nl.missingConnectionIdsError(o.map(a=>bu(a))))),s.sort(this.compareConnectionProfile),t=t.concat(s)}t.length>0&&(t=t.filter(s=>s.connectionString||s.server&&s.server!==LDe?!0:(this._vscodeWrapper.showErrorMessage(nl.missingConnectionInformation(s.id)),!1)));let i=new Set((await this.getGroups()).map(s=>s.id));return t=t.filter(s=>i.has(s.groupId)?!0:(this._logger.warn(`Connection '${bu(s)}' with ID '${s.id}' has a group ID that does not exist (${s.groupId}) so it is being ignored.  Correct its group ID to keep using this connection.`),!1)),t}async getConnectionById(e){return await this.initialized,(await this.getConnections(!0)).find(n=>n.id===e)}async addConnection(e){this.populateMissingConnectionIds(e);let t=await this.getConnections(!1);return t=t.filter(n=>!QT(n,e)),t.push(e),await this.writeConnectionsToSettings(t)}async removeConnection(e){let t=await this.getConnections(!1),n=this.removeConnectionHelper(e,t);return n&&await this.writeConnectionsToSettings(t),n}async updateConnection(e){let t=await this.getConnections(!1),n=t.findIndex(i=>i.id===e.id);if(n===-1)throw new Error(`Connection with ID ${e.id} not found`);t[n]=e,await this.writeConnectionsToSettings(t)}getRootGroup(){let e=this.getGroupsFromSettings();if(e=e.filter(t=>t.name===r.RootGroupName),e.length===0){this._logger.error("No root connection group found. This should have been fixed at initialization.");return}else if(e.length>1){let t=`Multiple connection groups with name "${r.RootGroupName}" found.  Returning the first one: ${e[0].id}. Delete or rename the others, then restart the extension.`;this._logger.error(t),this._vscodeWrapper.showErrorMessage(t)}return e[0]}async getGroups(e=Sg.Global){return await this.initialized,this.getGroupsFromSettings(e)}getGroupById(e){return this.getGroupsFromSettings(Sg.Global).find(n=>n.id===e)}addGroup(e){e.id||(e.id=ec()),e.parentId||(e.parentId=this.getRootGroup().id);let t=this.getGroupsFromSettings();return t.push(e),this.writeConnectionGroupsToSettings(t)}async removeGroup(e,t="delete"){let n=this.getConnectionsFromSettings(),i=this.getGroupsFromSettings(),s=this.getRootGroup();if(!s)throw new Error("Root group not found when removing group");let o=u=>{let d=new Set;d.add(u);for(let p of i)p.parentId===u&&o(p.id).forEach(f=>d.add(f));return d},a=!1,c,l;if(t==="delete"){let u=o(e);c=n.filter(d=>u.has(d.groupId)?(this._logger.verbose(`Removing connection '${d.id}' because its group '${d.groupId}' was removed`),a=!0,!1):!0),l=i.filter(d=>!u.has(d.id))}else c=n.map(u=>u.groupId===e?(this._logger.verbose(`Moving connection '${u.id}' to root group because its immediate parent group '${e}' was removed`),a=!0,{...u,groupId:s.id}):u),l=i.filter(u=>u.id!==e),l=l.map(u=>u.parentId===e?(this._logger.verbose(`Moving group '${u.id}' to root group because its immediate parent group '${e}' was removed`),{...u,parentId:s.id}):u);return l.length===i.length?(this._logger.error(`Connection group with ID '${e}' not found when removing.`),!1):(a&&await this.writeConnectionsToSettings(c),await this.writeConnectionGroupsToSettings(l),!0)}async updateGroup(e){let t=this.getGroupsFromSettings(),n=t.findIndex(i=>i.id===e.id);if(n===-1)throw Error(`Connection group with ID ${e.id} not found when updating`);return t[n]=e,await this.writeConnectionGroupsToSettings(t)}removeConnectionHelper(e,t){let n=!1;for(let i=t.length-1;i>=0;i--)QT(t[i],e)&&(t.splice(i,1),n=!0);return n}compareConnectionProfile(e,t){let n=e.profileName?e.profileName:e.server?e.server:e.connectionString,i=t.profileName?t.profileName:t.server?t.server:t.connectionString;return n.localeCompare(i)}populateMissingConnectionIds(e){let t=!1;if(e.groupId===void 0){let n=this.getRootGroup();n&&(e.groupId=n.id,t=!0)}return e.id===void 0&&(Gl.addIdIfMissing(e),t=!0),t}async assignConnectionGroupMissingIds(){let e=!1,t=this.getGroupsFromSettings(),n=await this.getRootGroup();n||(n={name:r.RootGroupName,id:ec()},this._logger.logDebug("Adding missing ROOT group to connection groups"),e=!0,t.push(n));for(let i of t)i.id!==n.id&&(i.id||(i.id=ec(),e=!0,this._logger.logDebug(`Adding missing ID to connection group '${i.name}'`)),i.parentId||(i.parentId=n.id,e=!0,this._logger.logDebug(`Adding missing parentId to connection '${i.name}'`)));e&&(this._logger.logDebug(`Updates made to connection groups.  Writing all ${t.length} group(s) to settings.`),await this.writeConnectionGroupsToSettings(t))}async assignConnectionMissingIds(){let e=!1,t=this.getConnectionsFromSettings();for(let n of t)this.populateMissingConnectionIds(n)&&(e=!0,this._logger.logDebug(`Adding missing group ID or connection ID to connection '${bu(n)}'`));e&&(this._logger.logDebug(`Updates made to connection profiles.  Writing all ${t.length} profile(s) to settings.`),await this.writeConnectionsToSettings(t))}getConnectionsFromSettings(e=Sg.Global){return this.getArrayFromSettings(cC,e)}getGroupsFromSettings(e=Sg.Global){return this.getArrayFromSettings(NT,e)}async writeConnectionsToSettings(e){await this._vscodeWrapper.setConfiguration(hn,cC,e)}async writeConnectionGroupsToSettings(e){await this._vscodeWrapper.setConfiguration(hn,NT,e)}getArrayFromSettings(e,t=Sg.Global){let i=this._vscodeWrapper.getConfiguration(hn,this._vscodeWrapper.activeTextEditorUri).inspect(e);return t===Sg.Global?i.globalValue||[]:(i.workspaceValue||[]).concat(i.workspaceFolderValue||[])}};var Ey=class r{constructor(e,t,n,i,s){this._context=e;this._credentialStore=t;this._logger=n;this._connectionConfig=i;this._vscodeWrapper=s;this.vscodeWrapper||(this.vscodeWrapper=new gi),this._logger||(this._logger=Cs.create(this.vscodeWrapper.outputChannel,"ConnectionStore")),this._connectionConfig||(this._connectionConfig=new iY(this.vscodeWrapper))}_sessionPasswords=new Map;get initialized(){return this._connectionConfig.initialized}static get CRED_PREFIX(){return"Microsoft.SqlTools"}static get CRED_SEPARATOR(){return"|"}static get CRED_SERVER_PREFIX(){return"server:"}static get CRED_DB_PREFIX(){return"db:"}static get CRED_USER_PREFIX(){return"user:"}static get CRED_ITEMTYPE_PREFIX(){return"itemtype:"}static get CRED_CONNECTION_STRING_PREFIX(){return"isConnectionString:"}static get CRED_PROFILE_PREFIX(){return"profile_id:"}static get CRED_PROFILE_USER(){return pC[0]}static get CRED_MRU_USER(){return pC[1]}static get shouldSavePasswordUntilRestart(){return wZe.workspace.getConfiguration().get(hqe)}static formatCredentialIdForCred(e,t){if(oi(e))throw new z_e("Missing Connection which is required");let n=r.CRED_PROFILE_USER;t&&(n=pC[t]);let i=e;return i.id?r.formatCredentialIdFromProfileId(i.id,n):r.formatCredentialId(e.server,e.database,e.user,n)}static formatCredentialIdFromProfileId(e,t=r.CRED_PROFILE_USER){let n=[r.CRED_PREFIX];return r.pushIfNonEmpty(e,r.CRED_PROFILE_PREFIX,n),r.pushIfNonEmpty(t,r.CRED_ITEMTYPE_PREFIX,n),n.join(r.CRED_SEPARATOR)}static formatCredentialId(e,t,n,i,s){if(oi(e)&&!s)throw new z_e("Missing Server Name, which is required");let o=[r.CRED_PREFIX];return i||(i=r.CRED_PROFILE_USER),r.pushIfNonEmpty(i,r.CRED_ITEMTYPE_PREFIX,o),r.pushIfNonEmpty(e,r.CRED_SERVER_PREFIX,o),r.pushIfNonEmpty(t,r.CRED_DB_PREFIX,o),r.pushIfNonEmpty(n,r.CRED_USER_PREFIX,o),s&&r.pushIfNonEmpty("true",r.CRED_CONNECTION_STRING_PREFIX,o),o.join(r.CRED_SEPARATOR)}get connectionConfig(){return this._connectionConfig}static pushIfNonEmpty(e,t,n){Ig(e)&&n.push(t.concat(e))}get vscodeWrapper(){return this._vscodeWrapper}set vscodeWrapper(e){this._vscodeWrapper=e}async getPickListItems(){let e=await this.getConnectionQuickpickItems(!1);return e.push({label:`$(add) ${NDe}`,connectionCreds:void 0,quickPickItemType:2}),e}async getProfilePickListItems(e){return await this.loadProfiles(e)}async addSavedPassword(e){let t=this;if(typeof e.connectionCreds.savePassword>"u"||e.connectionCreds.savePassword===!1)return e;if(t.shouldLookupSavedPassword(e.connectionCreds)){let n=r.formatCredentialIdForCred(e.connectionCreds,e.quickPickItemType),i=await t._credentialStore.readCredential(n);if(i)return e.connectionCreds.password=i.password,e;throw new Error("No saved password found")}else return e}async lookupPassword(e,t=!1){let n=e,i,s=r.formatCredentialIdForCred(n,0);if(!n.savePassword&&r.shouldSavePasswordUntilRestart){let c=this._sessionPasswords.get(s);if(c)return c}if(i=await this._credentialStore.readCredential(s),i&&i.password)return vt("Connection","LookupPassword",{isNewFormat:"true",passwordFound:"true"}),i.password;let o=r.formatCredentialId(e.server,e.database,e.user,r.CRED_PROFILE_USER,t),a=await this._credentialStore.readCredential(o);if(a&&a.password)return vt("Connection","LookupPassword",{isNewFormat:"false",passwordFound:"true"}),a.password;n?.savePassword&&vt("Connection","LookupPassword",{passwordFound:"false"})}storeSessionPassword(e,t){if(r.shouldSavePasswordUntilRestart){let n=r.formatCredentialIdForCred(e);this._sessionPasswords.set(n,t)}}shouldLookupSavedPassword(e){return Os.isPasswordBasedCredential(e)?oi(e.password)&&!e.emptyPasswordInput:!1}async saveProfile(e,t){await this._connectionConfig.populateMissingConnectionIds(e);let n;return e.authenticationType===ip(3)?n=Object.assign({},e,{azureAccountToken:""}):t?n=Object.assign({},e):n=Object.assign({},e,{password:""}),await this._connectionConfig.addConnection(n),await this.saveProfilePasswordIfNeeded(e)&&vGe(e),e}getRecentlyUsedConnections(){let e=this._context.globalState.get(lM);return e||(e=[]),e}addRecentlyUsed(e){let t=this;return new Promise((n,i)=>{let s=t.getRecentlyUsedConnections(),o=t.getMaxRecentConnectionsCount();s=s.filter(c=>!QT(c,e));let a=Object.assign({},e,{password:""});s.unshift(a),s.length>o&&(s=s.slice(0,o)),t._context.globalState.update(lM,s).then(async()=>{e.savePassword&&await t.doSaveCredential(e,1),n(void 0)},c=>{i(c)})})}async clearRecentlyUsed(){let e=this.getRecentlyUsedConnections(),t=!0;for(let n of e){let i=r.formatCredentialId(n.server,n.database,n.user,r.CRED_MRU_USER);try{await this._credentialStore.deleteCredential(i)}catch(s){t=!1,this._logger.log(Tke,i,s)}}return await this._context.globalState.update(lM,[]),t}removeRecentlyUsed(e,t=!1){let n=this;return new Promise(async(i,s)=>{let o=n.getRecentlyUsedConnections();if(o=o.filter(a=>!QT(a,e)),e.savePassword&&!t){let a=r.formatCredentialId(e.server,e.database,e.user,r.CRED_MRU_USER);await n._credentialStore.deleteCredential(a)}n._context.globalState.update(lM,o).then(()=>{i(void 0)},a=>{s(a)})})}async saveProfilePasswordIfNeeded(e){return await this.doSaveCredential(e,0)}async saveProfileWithConnectionString(e){return e.connectionString?await this.doSaveCredential(e,0,!0):Promise.resolve(!0)}async doSaveCredential(e,t,n=!1){let i=n?e.connectionString:e.password;if(oi(i))return!0;let s=e,o=r.formatCredentialId(s.server,s.database,s.user,r.CRED_PROFILE_USER);if(s.id)try{await this._credentialStore.deleteCredential(o)}catch{}let a=r.formatCredentialIdForCred(s,t);return s.savePassword?await this._credentialStore.saveCredential(a,i):(r.shouldSavePasswordUntilRestart&&await this.storeSessionPassword(s,i),!0)}async removeProfile(e,t=!1){let n=await this._connectionConfig.removeConnection(e);if(n)return await this.removeRecentlyUsed(e,t),e.savePassword===!0&&!t&&await this.deleteCredential(e),n}createQuickPickItem(e,t){return{label:_Ge(e),description:SGe(e),detail:void 0,connectionCreds:e,quickPickItemType:t}}async deleteCredential(e){let t;t=r.formatCredentialIdForCred(e);let n=await this._credentialStore.deleteCredential(t);if(e.id){let i=r.formatCredentialId(e.server,e.database,e.user,r.CRED_PROFILE_USER);try{await this._credentialStore.deleteCredential(i)}catch{}}return n}async removeProfilePassword(e){let t=e;t.password="",await this.saveProfile(t)}async readAllConnectionGroups(){return await this._connectionConfig.getGroups()}async getGroupForConnectionId(e){let t=await this._connectionConfig.getConnectionById(e);if(t)return this._connectionConfig.getGroupById(t.groupId)}async readAllConnections(e=!1){let t=[],i=(await this._connectionConfig.getConnections(!0)).map(c=>{let l=c;return l.profileSource=0,l});if(t=t.concat(i),e){let c=this.getRecentlyUsedConnections().map(l=>{let u=l;return u.profileSource=1,u});t=t.concat(c)}let s=new Map,o=0;for(let c of t)s.has(c.id)?(o++,this._logger.verbose(`Duplicate connection ID found: ${c.id}. Ignoring duplicate connection.`)):s.set(c.id,c);t=Array.from(s.values());let a=`readAllConnections(): ${t.length} connections found`;return e?a+=` (${i.length} from config, ${t.length-i.length} from recent)`:a+="; excluded recent",o>0&&(a+=`; ${o} duplicate connections ignored`),this._logger.logDebug(a),t}async findMatchingProfile(e){let t=await this.readAllConnections(),n,i=0;for(let s of t){let o=a$.isMatchingConnection(s,e);o>i&&(i=o,n=s)}return{profile:n,score:i}}get rootGroupId(){return this.connectionConfig.getRootGroup().id}async getConnectionQuickpickItems(e=!1){let t=[];return t=(await this.readAllConnections(e)).map(i=>this.createQuickPickItem(i,i.profileSource)),t}async loadProfiles(e){return(await this._connectionConfig.getConnections(e)).map(i=>this.createQuickPickItem(i,0))}getMaxRecentConnectionsCount(){let t=this._vscodeWrapper.getConfiguration(fi)[oqe];return(typeof t!="number"||t<=0)&&(t=5),t}};var TZe=ge(require("vscode"));var j1=ge(require("vscode"));var lO=class extends Uo{constructor(t,n,i,s){super(t,n,"AddFirewallRule","addFirewallRule",{serverName:i.serverName,message:i.errorMessage,clientIp:"",isSignedIn:!1,accounts:[],tenants:{},addFirewallRuleStatus:"notStarted"},{title:i.serverName?GD.addFirewallRuleToServer(i.serverName):GD.addFirewallRule,viewColumn:j1.ViewColumn.One,iconPath:{light:j1.Uri.joinPath(t.extensionUri,"media","database_light.svg"),dark:j1.Uri.joinPath(t.extensionUri,"media","database_dark.svg")}});this.firewallService=s;this.registerRpcHandlers(),this.updateState(),this.initializeDialog(i.errorMessage).then(()=>{this.updateState(),this.initialized.resolve()}).catch(o=>{this.logger.error(`Error initializing AddFirewallRuleWebviewController: ${rt(o)}`),this.initialized.reject(o)})}initialized=new xi;async initializeDialog(t){this.state.isSignedIn=await os.isSignedIn(),this.state.isSignedIn&&await U1(this.state,!1);let n=await this.firewallService.handleFirewallRule(40615,t);n.result||(kr("ConnectionDialog","AddFirewallRule",new Error(t),!0,void 0,void 0),n.ipAddress="0.0.0.0"),this.state.clientIp=n.ipAddress}registerRpcHandlers(){this.registerReducer("closeDialog",async t=>(this.dialogResult.resolve(!1),this.panel.dispose(),t)),this.registerReducer("addFirewallRule",async(t,n)=>{t.addFirewallRuleStatus="loading",this.updateState(t);try{await this.firewallService.createFirewallRuleWithVscodeAccount(n.firewallRuleSpec,this.state.serverName),vt("ConnectionDialog","AddFirewallRule"),this.dialogResult.resolve(!0),await this.panel.dispose()}catch(i){t.message=rt(i),t.addFirewallRuleStatus="error",kr("AddFirewallRule","AddFirewallRule",i,!1,void 0,void 0,{failure:i.Name})}return t}),this.registerReducer("signIntoAzure",async t=>(await U1(t,!0),t))}};async function U1(r,e){let t;try{t=await os.signIn(e)}catch(s){this.logger.error(`Error signing into Azure: ${rt(s)}`),this.vscodeWrapper.showErrorMessage(Zu.errorSigningIntoAzure(rt(s)));return}r.isSignedIn=!0;let n=await os.getAccounts();r.accounts=n.map(s=>({displayName:s.label,accountId:s.id}));let i=await t.getTenants();for(let s of i)s.account.id in r.tenants?r.tenants[s.account.id].push({displayName:s.displayName,tenantId:s.tenantId}):r.tenants[s.account.id]=[{displayName:s.displayName,tenantId:s.tenantId}]}var EZe="CREATE_NEW_GROUP";var sY=class{constructor(e,t,n,i,s,o=!1,a){this._connectionManager=e;this._context=t;this._connectionStore=n;this._accountStore=i;this._prompter=s;this._useLegacyConnectionExperience=o;this._vscodeWrapper=a;this._vscodeWrapper||(this._vscodeWrapper=new gi)}get connectionManager(){return this._connectionManager}get vscodeWrapper(){return this._vscodeWrapper}set vscodeWrapper(e){this._vscodeWrapper=e}async promptForConnection(e,t=!1){return await new Promise((n,i)=>{let s=this.vscodeWrapper.createQuickPick();s.items=e,s.placeholder=ADe,s.matchOnDescription=!0,s.ignoreFocusOut=t,s.canSelectMany=!1,s.busy=!1,s.show(),s.onDidChangeSelection(o=>{o[0]?(s.busy=!0,s.hide(),n(this.handleSelectedConnection(o[0]))):n(void 0)}),s.onDidHide(()=>{s.dispose(),n(void 0)})})}promptLanguageFlavor(){let e=this;return new Promise(async(t,n)=>{let i=[{label:dke,description:hke,providerId:il},{label:pke,description:fke,providerId:tM}],s=await e.promptItemChoice({placeHolder:mke,matchOnDescription:!0},i);t(s?s.providerId:void 0)})}promptItemChoice(e,t){let n={type:vi.expand,name:"question",message:e.placeHolder,matchOptions:e,choices:t};return this._prompter.promptSingle(n,n.matchOptions.ignoreFocusOut)}waitForLanguageModeToBeSqlHelper(e,t){t.getDuration()>1e4?e(!1):this.vscodeWrapper.isEditingSqlFile?e(!0):setTimeout(this.waitForLanguageModeToBeSqlHelper.bind(this,e,t),50)}waitForLanguageModeToBeSql(){let e=this;return new Promise((t,n)=>{let i=new yC;i.start(),e.waitForLanguageModeToBeSqlHelper(t,i)})}promptToCancelConnection(){let e=this;return new Promise((t,n)=>{let i={type:vi.confirm,name:rie,message:rie};e._prompter.promptSingle(i).then(s=>{t(!!s)}).catch(s=>{t(!1)})})}promptForPassword(){let e=this;return new Promise((t,n)=>{let i={type:vi.password,name:yg,message:yg,placeHolder:CG};e._prompter.promptSingle(i).then(s=>{t(s)}).catch(s=>{n(s)})})}async promptToChangeLanguageMode(){let e={type:vi.confirm,name:yie,message:yie};return await this._prompter.promptSingle(e)?(await this._vscodeWrapper.executeCommand("workbench.action.editor.changeLanguageMode"),await this.waitForLanguageModeToBeSql()):!1}showDatabasesOnCurrentServer(e,t){let n=this;return new Promise((i,s)=>{let o=t.map(l=>{let u={};return Object.assign(u,e),u.profileName&&delete u.profileName,u.database=l,{label:l,description:"",detail:"",connectionCreds:u,quickPickItemType:1}}),a={label:rke,description:nke};o.push(a);let c={placeHolder:xDe};n.vscodeWrapper.showQuickPick(o,c).then(l=>{l===a?n.handleDisconnectChoice().then(()=>i(void 0),u=>s(u)):i(typeof l<"u"?l.connectionCreds:void 0)})})}handleDisconnectChoice(){let e=this;return new Promise((t,n)=>{let i={type:vi.confirm,name:wie,message:wie};e._prompter.promptSingle(i).then(s=>{s===!0?e.connectionManager.onDisconnect().then(()=>t(),o=>n(o)):t()},s=>n(s))})}async createProfileWithDifferentCredentials(e){if(!await this.promptForRetryConnectWithDifferentCredentials())return;let n=Object.assign({},e,{user:"",password:"",emptyPasswordInput:!1});return await Os.ensureRequiredPropertiesSet(n,!0,!1,!0,this._prompter,this._connectionStore,e,!1)}handleSelectedConnection(e){return new Promise((t,n)=>{if(e!==void 0){let i;e.quickPickItemType===2?i=this.createAndSaveProfile():i=this.fillOrPromptForMissingInfo(e,!1),i.then(s=>{s||t(void 0),t(s)},s=>n(s))}else t(void 0)})}promptToClearRecentConnectionsList(){let e=this;return new Promise((t,n)=>{let i={type:vi.confirm,name:nie,message:nie};e._prompter.promptSingle(i).then(s=>{t(!!s)}).catch(s=>{t(!1)})})}promptToManageProfiles(){let e=this;return new Promise((t,n)=>{let i=[{name:DDe,value:1},{name:MDe,value:2},{name:kDe,value:3},{name:VD,value:4}],s={type:vi.expand,name:iie,message:iie,choices:i,onAnswered:async o=>{switch(o){case 1:let a=await e.connectionManager.onCreateProfile();t(a);break;case 2:try{await e.promptToClearRecentConnectionsList()?(await e.connectionManager.clearRecentConnectionsList()?e.vscodeWrapper.showInformationMessage(hMe):e.vscodeWrapper.showWarningMessage(Ike),t(!0)):t(!1)}catch(l){n(l)}break;case 3:e.vscodeWrapper.executeCommand("workbench.action.openGlobalSettings").then(()=>{t(!0)});break;case 4:let c=e.connectionManager.onRemoveProfile();t(c);break;default:t(!1);break}}};this._prompter.promptSingle(s)})}async createAndSaveProfile(e=!0){if(this._useLegacyConnectionExperience){let t=await this.promptForCreateProfile();if(t){let n=e?await this.validateAndSaveProfile(t):await this.saveProfile(t);return n&&(e?this.vscodeWrapper.showInformationMessage(mMe):this.vscodeWrapper.showInformationMessage(pMe)),n}}else{TZe.commands.executeCommand(ed);return}}async validateAndSaveProfile(e){let t=this.vscodeWrapper.activeTextEditorUri;if((!t||!this.vscodeWrapper.isEditingSqlFile)&&(t=Sn.getNodeUriFromProfile(e)),await this.connectionManager.connect(t,e))return await this.saveProfile(e);if(this.connectionManager.failedUriToFirewallIpMap.has(t))return await this.addFirewallRule(t,e)?await this.validateAndSaveProfile(e):void 0;if(this.connectionManager.failedUriToSSLMap.has(t)){let i=await this.connectionManager.handleSSLError(t,e);return i?await this.validateAndSaveProfile(i):void 0}else return await this.promptToRetryAndSaveProfile(e)}async validateAndSaveProfileFromDialog(e){return await this.connectionManager.connectDialog(e)}async addFirewallRule(e,t){if(this.connectionManager.failedUriToFirewallIpMap.has(e)){let n=this.connectionManager.failedUriToFirewallIpMap.get(e);if(await this.handleFirewallError(t,n))return this.connectionManager.failedUriToFirewallIpMap.delete(e),!0}return!1}async handleFirewallError(e,t){if(this._useLegacyConnectionExperience){if(e.accountId){let s=await this._accountStore.getAccount(e.accountId);this.connectionManager.accountService.setAccount(s)}else{await this._vscodeWrapper.showInformationMessage(IMe,KD)===KD&&(e=await this.connectionManager.azureController.populateAccountProperties(e,this._accountStore,hs.resources.azureManagementResource));let o=await this._accountStore.getAccount(e.accountId);this.connectionManager.accountService.setAccount(o)}let n=await this.connectionManager.firewallService.handleFirewallRule(t.errorNumber,t.errorMessage),i=n.result;return i&&(i=await this.createFirewallRule(e.server,n.ipAddress)),i}else{t.errorNumber!==40615&&Tg(`handleFirewallError called with non-firewall-error response; error number: '${t.errorNumber}'`);let n=new lO(this._context,this._vscodeWrapper,{serverName:e.server,errorMessage:t.errorMessage},this.connectionManager.firewallService);return n.panel.reveal(),await n.dialogResult===!0}}async getConnectionGroupOptions(){let e=this._connectionManager.connectionStore.rootGroupId,t=await this._connectionManager.connectionStore.readAllConnectionGroups();t=t.filter(a=>a.id!==e);let n=new Map;for(let a of t){let c=n.get(a.name)||0;n.set(a.name,c+1)}let i=new Map(t.map(a=>[a.id,a])),s=a=>{if(!a.parentId||a.parentId===e)return a.name;let c=i.get(a.parentId);return c?`${s(c)} > ${a.name}`:a.name},o=t.map(a=>({displayName:n.get(a.name)>1?s(a):a.name,value:a.id})).sort((a,c)=>a.displayName.localeCompare(c.displayName));return[{displayName:xn.default,value:e},{displayName:xn.createConnectionGroup,value:EZe},...o]}async saveProfile(e){return await this._connectionStore.saveProfile(e)}async promptForCreateProfile(){return await Gl.createProfile(this._prompter,this._connectionStore,this._context,this.connectionManager.azureController,this._accountStore)}async promptToRetryAndSaveProfile(e,t=!1){let n=await this.promptForRetryCreateProfile(e,t);if(n)return await this.validateAndSaveProfile(n)}async promptForRetryCreateProfile(e,t=!1){let n=t?xMe:PMe;if(await this._vscodeWrapper.showErrorMessage(n,XD)===XD)return await Gl.createProfile(this._prompter,this._connectionStore,this._context,this.connectionManager.azureController,this._accountStore,e);throw new cH}async promptForFirewallRuleCreation(e,t){function n(m){return m.toString().padStart(2,"0")}function i(m){return[m.getFullYear(),n(m.getMonth()+1),n(m.getDate())].join("-")+"_"+[n(m.getHours()),n(m.getMinutes()),n(m.getSeconds())].join("-")}let s=await Gl.getAccountChoices(this._accountStore),o=[],a=`ClientIPAddress_${i(new Date)}`,c,l,u,d=[{type:vi.input,name:HD,message:HD,placeHolder:e,default:e,validate:m=>{if(!Number.parseFloat(m)||!m.match(sse))return _ie}},{type:vi.input,name:WD,message:WD,placeHolder:e,validate:m=>{if(!Number.parseFloat(m)||!m.match(sse)||Number.parseFloat(m)>Number.parseFloat(e))return _ie},default:e},{type:vi.input,name:oie,message:oie,placeHolder:a,validate:m=>{if(!m.match(rqe))return kMe;u=m},default:a},{type:vi.expand,name:_G,message:wT,choices:s,onAnswered:async m=>{c=m;let f=m;o.push(...f?.properties?.tenants.map(y=>({name:y.displayName,value:y}))),o.length===1&&(l=o[0].value.id)}},{type:vi.expand,name:TT,message:ET,choices:o,shouldPrompt:()=>o.length>1,onAnswered:m=>{l=m.id}}],p=await this._prompter.prompt(d);if(p)return{account:c,startIpAddress:p[HD]?p[HD]:e,endIpAddress:p[WD]?p[WD]:e,firewallRuleName:u,serverName:t,securityTokenMappings:await this.connectionManager.accountService.createSecurityTokenMapping(c,l)}}async createFirewallRule(e,t){if(await this._vscodeWrapper.showInformationMessage(RMe(t,e),Sie)===Sie){let i=this.connectionManager.firewallService,s=await this.promptForFirewallRuleCreation(t,e);if(s){let o=await i.createFirewallRule(s);return o.result?(this._vscodeWrapper.showInformationMessage(AMe),!0):(Ll(o.errorMessage),!1)}else return!1}else return!1}async promptForRetryConnectWithDifferentCredentials(){return await this._vscodeWrapper.showErrorMessage(EMe,XD)===XD}fillOrPromptForMissingInfo(e,t=!0){if(e.connectionCreds.connectionString)return new Promise((i,s)=>{i(e.connectionCreds)});let n=oi(e.connectionCreds.password);return this._connectionStore.addSavedPassword(e).then(i=>Os.ensureRequiredPropertiesSet(i.connectionCreds,e.quickPickItemType===0,!1,n,this._prompter,this._connectionStore,void 0,t))}async addNewAccount(){return await this.connectionManager.azureController.addAccount(this._accountStore)}async removeProfile(){let e=this,t=await e._connectionStore.getProfilePickListItems(!1),n=await e.selectProfileForRemoval(t),i=n?await e._connectionStore.removeProfile(n):!1;return i&&this._vscodeWrapper.showInformationMessage(dMe),i}selectProfileForRemoval(e){let t=this;if(!e||e.length===0)return this._vscodeWrapper.showErrorMessage(uMe),Promise.resolve(void 0);let n="ChooseProfile",i="ConfirmRemoval",s=[{type:vi.expand,name:n,message:cMe,matchOptions:{matchOnDescription:!0},choices:e},{type:vi.confirm,name:i,message:lMe}];return t._prompter.prompt(s).then(o=>{if(o&&o[i])return o[n].connectionCreds})}};var RZe=ge(require("vscode"));var IZe=ge(Vi());var oY;(e=>e.type=new IZe.RequestType("metadata/list"))(oY||={});var uO=class r{_client;static _metadataCache=new Map;constructor(e){this._client=e||Mn.instance}async searchObjects(e,t,n){try{let i=(t??"").trim();if(!i)return{success:!1,objects:[],error:RZe.l10n.t("Search term cannot be empty")};let s=i.toLowerCase();await this.warmCache(e).catch(()=>{});let o=[];try{o=await this.getOrFetchMetadata(e)}catch{o=[]}return{success:!0,objects:o.filter(l=>{let u=(l.name??"").toLowerCase(),d=(l.schema??"").toLowerCase();return u.includes(s)||d.includes(s)}).map(l=>({name:l.name,schema:l.schema,type:this.friendlyType(l),fullName:l.schema?`${l.schema}.${l.name}`:l.name})).filter(l=>!!l.name)}}catch(i){return{success:!1,objects:[],error:rt(i)}}}static clearCache(e){e?r._metadataCache.delete(e):r._metadataCache.clear()}async warmCache(e){if(r._metadataCache.has(e))return;let t={ownerUri:e};try{let n=await this._client.sendRequest(oY.type,t);r._metadataCache.set(e,n?.metadata??[])}catch{r._metadataCache.set(e,[])}}async getOrFetchMetadata(e){let t=r._metadataCache.get(e);if(t)return t;let n={ownerUri:e},s=(await this._client.sendRequest(oY.type,n))?.metadata??[];return r._metadataCache.set(e,s),s}friendlyType(e){switch(e?.metadataTypeName){case"Table":return"Table";case"View":return"View";case"StoredProcedure":return"Stored Procedure";case"ScalarValuedFunction":return"Scalar Function";case"TableValuedFunction":return"Table-valued Function";default:return e?.metadataTypeName??""}}};function F_e(r,e,t,n){r.sendNotification(k0.type,{uri:e,language:jh,flavor:t}),n.languageFlavorChanged(e,t)}var aY=class{connectionId;credentials;connectHandler;connectionCompleteHandler;serverInfo;connecting;errorNumber;errorMessage;get loginFailed(){return this.errorNumber!==void 0&&this.errorNumber===18456}},B1=class{constructor(e,t,n,i=!1,s,o,a,c,l,u,d){this.context=e;this._useLegacyConnectionExperience=i;this._logger=s;this._client=o;this._vscodeWrapper=a;this._connectionStore=c;this._credentialStore=l;this._connectionUI=u;this._accountStore=d;this._statusView=t,this._connections={},this._connectionCredentialsToServerInfoMap=new Map,this._uriToConnectionPromiseMap=new Map,this._uriToConnectionCompleteParamsMap=new Map,this.client||(this.client=Mn.instance),this.vscodeWrapper||(this.vscodeWrapper=new gi),this._logger||(this._logger=Cs.create(this._vscodeWrapper.outputChannel,"ConnectionManager")),this._credentialStore||(this._credentialStore=new g4(e)),this._connectionStore||(this._connectionStore=new Ey(e,this._credentialStore)),this._accountStore||(this._accountStore=new DW(e,this.vscodeWrapper)),this._connectionUI||(this._connectionUI=new sY(this,e,this._connectionStore,this._accountStore,n,i,this.vscodeWrapper)),this.azureController||(this.azureController=new f4(e,n,this._credentialStore),this.azureController.init()),this._accountService=new NW(this.client,this._accountStore,this.azureController),this._firewallService=new nY(this._accountService),this._failedUriToFirewallIpMap=new Map,this._failedUriToSSLMap=new Map,this.client!==void 0&&(this.client.onNotification(pfe.type,this.handleConnectionChangedNotification()),this.client.onNotification(ufe.type,this.handleConnectionCompleteNotification()),this.client.onNotification(Fce.type,this.handleLanguageServiceUpdateNotification()),this.client.onNotification(Bce.type,this.handleNonTSqlNotification()),this.client.onRequest(sne.type,this.handleSecurityTokenRequest.bind(this))),this.initialize()}_statusView;_connections;_connectionCredentialsToServerInfoMap;_uriToConnectionPromiseMap;_uriToConnectionCompleteParamsMap;_failedUriToFirewallIpMap;_failedUriToSSLMap;_keyVaultTokenCache=new Map;_accountService;_firewallService;azureController;_onConnectionsChangedEmitter=new qa.EventEmitter;onConnectionsChanged=this._onConnectionsChangedEmitter.event;initialized=new xi;async initialize(){await this.connectionStore.initialized,await this.migrateLegacyConnectionProfiles(),this.initialized.resolve()}get vscodeWrapper(){return this._vscodeWrapper}set vscodeWrapper(e){this._vscodeWrapper=e}get activeConnections(){return this._connections}get client(){return this._client}set client(e){this._client=e}get connectionUI(){return this._connectionUI}get statusView(){return this._statusView}set statusView(e){this._statusView=e}get connectionStore(){return this._connectionStore}set connectionStore(e){this._connectionStore=e}get accountStore(){return this._accountStore}set accountStore(e){this._accountStore=e}get connectionCount(){return Object.keys(this._connections).length}get failedUriToFirewallIpMap(){return this._failedUriToFirewallIpMap}get failedUriToSSLMap(){return this._failedUriToSSLMap}get accountService(){return this._accountService}get firewallService(){return this._firewallService}isActiveConnection(e){let t=Object.keys(this._connections).map(n=>this._connections[n].credentials);for(let n of t)if(vC(e,n))return!0;return!1}getUriForConnection(e){for(let t of Object.keys(this._connections))if(vC(this._connections[t].credentials,e))return t}getUriForScmpConnection(e){for(let t of Object.keys(this._connections))if(q1e(this._connections[t].credentials,e))return t}isConnected(e){return e in this._connections&&this._connections[e].connectionId&&Ig(this._connections[e].connectionId)}isConnecting(e){return e in this._connections&&this._connections[e].connecting}async findMatchingProfile(e){return this.connectionStore.findMatchingProfile(e)}async getConnectionString(e,t=!1,n=!0){let i=new u4;return typeof e=="string"?i.ownerUri=e:i.connectionDetails=e,i.includePassword=t,i.includeApplicationName=n,this.client.sendRequest(hfe.type,i)}async parseConnectionString(e){return await this.client.sendRequest(ffe.type,e)}createConnectionDetails(e){return Os.createConnectionDetails(e)}async sendRequest(e,t){return await this.client.sendRequest(e,t)}getConnectionInfo(e){return this._connections[e]}handleLanguageServiceUpdateNotification(){return e=>{this._statusView.languageServiceStatusChanged(e.ownerUri,wG)}}handleNonTSqlNotification(){return async e=>{let t=await this._vscodeWrapper.getConfiguration().get(s2);if(t!==!1)if(t)F_e(Mn.instance,e.ownerUri,tM,this._statusView);else{let n=await qa.window.showInformationMessage(gke,wm,IT);n===wm?(F_e(Mn.instance,e.ownerUri,tM,this._statusView),vt("QueryEditor","DisableLanguageServiceForNonTSqlFiles",{selectedOption:wm}),await this._vscodeWrapper.getConfiguration().update(s2,!0,qa.ConfigurationTarget.Global)):n===IT?(await this._vscodeWrapper.getConfiguration().update(s2,!1,qa.ConfigurationTarget.Global),vt("QueryEditor","DisableLanguageServiceForNonTSqlFiles",{selectedOption:IT})):vt("QueryEditor","DisableLanguageServiceForNonTSqlFiles",{selectedOption:Ake})}}}handleConnectionChangedNotification(){let e=this;return t=>{if(e.isConnected(t.ownerUri)){let n=e._connections[t.ownerUri];n.credentials.server=t.connection.serverName,n.credentials.database=t.connection.databaseName,n.credentials.user=t.connection.userName,e._statusView.connectSuccess(t.ownerUri,n.credentials,n.serverInfo);let i=CMe(t.connection.databaseName,t.ownerUri);e.vscodeWrapper.logToOutputChannel(i)}}}handleConnectionCompleteNotification(){let e=this;return async t=>{let n=t.ownerUri,i=e.getConnectionInfo(n);if(i.connecting=!1,Ig(t.connectionId)){i.credentials.connectionString&&(i.credentials=await this.populateCredentialsFromConnectionString(i.credentials,t.connectionSummary)),this._connectionCredentialsToServerInfoMap.set(i.credentials,t.serverInfo);let s={};Object.assign(s,i.credentials),t.connectionSummary&&t.connectionSummary.databaseName&&(s.database=t.connectionSummary.databaseName),e.handleConnectionSuccess(n,i,s,t),await this.handlePasswordStorageOnConnect(i.credentials);let o=e._uriToConnectionPromiseMap.get(t.ownerUri);o&&(o.resolve(!0),e._uriToConnectionPromiseMap.delete(t.ownerUri));let a=e._uriToConnectionCompleteParamsMap.get(t.ownerUri);a&&(a.resolve(t),e._uriToConnectionCompleteParamsMap.delete(t.ownerUri))}else{let s=e._uriToConnectionPromiseMap.get(t.ownerUri);s&&(t.errorMessage?(await e.handleConnectionErrors(n,i,t),s.reject(t.errorMessage),e._uriToConnectionPromiseMap.delete(t.ownerUri)):t.messages&&(s.reject(t.messages),e._uriToConnectionPromiseMap.delete(t.ownerUri)));let o=e._uriToConnectionCompleteParamsMap.get(t.ownerUri);o&&(o.resolve(t),e._uriToConnectionCompleteParamsMap.delete(t.ownerUri)),await e.handleConnectionErrors(n,i,t)}await e.tryAddMruConnection(i)}}handleConnectionSuccess(e,t,n,i){t.connectionId=i.connectionId,t.serverInfo=i.serverInfo,t.credentials=n,t.errorNumber=void 0,t.errorMessage=void 0,this.statusView.connectSuccess(e,n,t.serverInfo),this.statusView.languageServiceStatusChanged(e,xT),this._vscodeWrapper.logToOutputChannel(QMe(t.credentials.server,e,JSON.stringify(t.serverInfo))),vt("ConnectionPrompt","CreateConnectionResult",void 0,void 0,n,i.serverInfo)}async handleConnectionErrors(e,t,n){if(n.errorNumber&&n.errorMessage&&!oi(n.errorMessage)){if(n.errorNumber===18487||n.errorNumber===18488)Ll(ODe(n.errorNumber,n.errorMessage));else if(n.errorNumber===-2146893019)this._failedUriToSSLMap.set(e,n.errorMessage);else if(n.errorNumber===40615){let i=await this.firewallService.handleFirewallRule(n.errorNumber,n.errorMessage);i.result&&i.ipAddress?this.failedUriToFirewallIpMap.set(e,n):Ll(gG(n.errorNumber,n.errorMessage))}else Ll(gG(n.errorNumber,n.errorMessage));t.errorNumber=n.errorNumber,t.errorMessage=n.errorMessage}else{let i=await f0.getCurrent();if(!i.isWindows&&n.errorMessage&&n.errorMessage.includes("Kerberos")){let s=await this.vscodeWrapper.showErrorMessage(yG(n.errorMessage),JD);s&&s===JD&&await qa.env.openExternal(qa.Uri.parse(JLe))}else if(i.runtimeId==="OSX_10_11_64"&&n.messages.indexOf("Unable to load DLL 'System.Security.Cryptography.Native'")!==-1){let s=await this.vscodeWrapper.showErrorMessage(yG(ZMe),JD);s&&s===JD&&await qa.env.openExternal(qa.Uri.parse(KLe))}else Ll(yG(n.messages))}this.statusView.connectError(e,t.credentials,n),this.vscodeWrapper.logToOutputChannel(YMe(t.credentials.server,n.errorMessage?n.errorMessage:n.messages)),kr("ConnectionPrompt","CreateConnectionResult",new Error(n.errorMessage),!1,n.errorNumber?.toString(),void 0,{containsError:"true"},void 0,t.credentials,n.serverInfo)}async showInstructionTextAsWarning(e,t){let n=await this.vscodeWrapper.showWarningMessageAdvanced(TMe,{modal:!1},[lie,uie,zi.cancel]);n===lie?(e.connectionString&&(e.connectionString=e.connectionString.concat("; Encrypt=true; Trust Server Certificate=true;")),e.encrypt="Mandatory",e.trustServerCertificate=!0,await t(e)):n===uie?(this.vscodeWrapper.openExternal(XLe),await this.showInstructionTextAsWarning(e,t)):n===zi.cancel&&await t(void 0)}async handleSSLError(e,t){let n;return await this.showInstructionTextAsWarning(t,async i=>{if(!i){this.failedUriToSSLMap.delete(e);return}qa.commands.executeCommand(iM,i),n=i}),this.failedUriToSSLMap.delete(e),n}async tryAddMruConnection(e){if(e?.credentials){let t=Object.assign({},e.credentials);try{await this._connectionStore.addRecentlyUsed(t),e.connectHandler(!0)}catch(n){e.connectHandler(!1,n)}}else e.connectHandler(!1)}async populateCredentialsFromConnectionString(e,t){return e.database=t.databaseName,e.user=t.userName,e.server=t.serverName,Os.isPasswordBasedConnectionString(e.connectionString)?(await this._connectionStore.saveProfileWithConnectionString(e),e.connectionString=Ey.formatCredentialId(e.server,e.database,e.user,Ey.CRED_PROFILE_USER,!0),e.authenticationType=Ya,e.savePassword=!0):e.authenticationType=zG,e}clearRecentConnectionsList(){return this.connectionStore.clearRecentlyUsed()}async onChooseDatabase(){let e=this.vscodeWrapper.activeTextEditorUri;if(!this.isConnected(e))return this.vscodeWrapper.showWarningMessage(eie),!1;let t=new Rq;t.ownerUri=e;let n=await this.client.sendRequest(p4.type,t),i=await this.connectionUI.showDatabasesOnCurrentServer(this._connections[e].credentials,n.databaseNames);return i?(this.vscodeWrapper.logToOutputChannel(XMe(i.database,i.server,e)),await this.disconnect(e),await this.connect(e,i),this.vscodeWrapper.logToOutputChannel(Cie(i.database,i.server,e)),this._connections[e].credentials=i,!0):!1}async listDatabases(e){await this.refreshAzureAccountToken(e);let t=new Rq;return t.ownerUri=e,(await this.client.sendRequest(p4.type,t)).databaseNames}async changeDatabase(e){let t=this.vscodeWrapper.activeTextEditorUri;return this.isConnected(t)?(await this.disconnect(t),await this.connect(t,e),this.vscodeWrapper.logToOutputChannel(Cie(e.database,e.server,t)),!0):(this.vscodeWrapper.showWarningMessage(eie),!1)}async onChooseLanguageFlavor(e=!1,t=!1){let n=this._vscodeWrapper.activeTextEditorUri;if(n&&this._vscodeWrapper.isEditingSqlFile){if(e)return Mn.instance.sendNotification(k0.type,{uri:n,language:t?"sqlcmd":"sql",flavor:"MSSQL"}),!0;let i=await this.connectionUI.promptLanguageFlavor();return i?(this.statusView.languageFlavorChanged(n,i),Mn.instance.sendNotification(k0.type,{uri:n,language:"sql",flavor:i}),!0):!1}else return await this._vscodeWrapper.showWarningMessage(PT),!1}onDisconnect(){return this.disconnect(this.vscodeWrapper.activeTextEditorUri)}async disconnect(e){if(this.isConnected(e)){let t=new l4;t.ownerUri=e;let n=await this.client.sendRequest(mfe.type,t);this.statusView&&this.statusView.notConnected(e),n&&this.vscodeWrapper.logToOutputChannel(JMe(e));try{uO.clearCache(e)}catch{}return this.removeActiveConnection(e),qa.commands.executeCommand("setContext","mssql.connections",this._connections),n}else return this.isConnecting(e)&&await this.onCancelConnect(),!0}async showConnectionsAndConnect(e){let t=await this._connectionStore.getPickListItems(),n=await this.connectionUI.promptForConnection(t);if(n){await this.disconnect(e);let i=await this.connect(e,n);if(!await this.handleConnectionResult(i,e,n))return}return n}getServerInfo(e){if(this._connectionCredentialsToServerInfoMap.has(e))return this._connectionCredentialsToServerInfoMap.get(e);for(let t of this._connectionCredentialsToServerInfoMap.keys())if(vC(t,e))return this._connectionCredentialsToServerInfoMap.get(t)}async handleConnectionResult(e,t,n){let i=this._connections[t];if(!e&&i){if(i.loginFailed){let s=await this.connectionUI.createProfileWithDifferentCredentials(n);if(s){let o=await this.connect(t,s);return i=this._connections[t],!o&&i&&i.loginFailed&&Ll(gG(i.errorNumber,i.errorMessage)),o}else return!1}else if(i.errorNumber===40615&&!this._useLegacyConnectionExperience){let s=new lO(this.context,this._vscodeWrapper,{serverName:n.server,errorMessage:i.errorMessage},this.firewallService);return s.panel.reveal(),await s.dialogResult===!0?await this.connect(t,i.credentials):!1}else if(i.errorNumber===-2146893019){let s=await this.handleSSLError(t,n);return s?await this.connect(t,s):!1}}else return!0}async deleteCredential(e){return await this._connectionStore.deleteCredential(e)}async onNewConnection(){let e=this.vscodeWrapper.activeTextEditorUri;if(!e){this.vscodeWrapper.showWarningMessage(PT);return}return!this.vscodeWrapper.isEditingSqlFile&&!await this.connectionUI.promptToChangeLanguageMode()?void 0:await this.showConnectionsAndConnect(e)}async confirmEntraTokenValidity(e){if(e.authenticationType!==Qa||df.isTokenValid(e.azureAccountToken,e.expiresOn))return;let t,n;if(e.accountId)t=await this.accountStore.getAccount(e.accountId),n=new Gl(e);else throw new Error(pie);if(!t)throw new Error(vg);e.user=t.displayInfo.displayName,e.email=t.displayInfo.email,n.user=t.displayInfo.displayName,n.email=t.displayInfo.email;let i=await this.azureController.refreshAccessToken(t,this.accountStore,n.tenantId,hs.resources.databaseResource);if(i)e.azureAccountToken=i.token,e.expiresOn=i.expiresOn;else{let s=RT;if(await this.vscodeWrapper.showErrorMessage(s,Em)===Em)await this.azureController.populateAccountProperties(n,this.accountStore,hs.resources.databaseResource);else throw new Error(pie)}}async handlePasswordBasedCredentials(e){if(Os.isPasswordBasedCredential(e)){let t=e.password;if(oi(t)){if(t=await this.connectionStore.lookupPassword(e),!t&&(t=await this.connectionUI.promptForPassword(),!t))return!1;e.authenticationType!==Qa&&(e.azureAccountToken=void 0),e.password=t}}return!0}async handlePasswordStorageOnConnect(e){await this.connectionStore.saveProfilePasswordIfNeeded(e)}async connect(e,t,n){if(!t.server&&!t.connectionString)throw new Error(tie);return t.authenticationType===Qa&&await this.confirmEntraTokenValidity(t),await this.handlePasswordBasedCredentials(t)?new Promise(async(o,a)=>{if(t.connectionString?.includes(Ey.CRED_PREFIX)&&t.connectionString?.includes("isConnectionString:true")){let d=await this.connectionStore.lookupPassword(t,!0);t.connectionString=d}let c=new aY;c.credentials=t,c.connecting=!0,this.addActiveConnection(e,c),this.statusView&&(this.statusView.languageFlavorChanged(e,il),this.statusView.connecting(e,t),this.statusView.languageFlavorChanged(e,il)),this.vscodeWrapper.logToOutputChannel(qMe(t.server,e)),c.connectHandler=(d,p)=>{p?a(p):(qa.commands.executeCommand("setContext","mssql.connections",this._connections),o(d))};let l=Os.createConnectionDetails(t),u=new Iq;u.ownerUri=e,u.connection=l,this._uriToConnectionPromiseMap.set(u.ownerUri,n);try{await this.client.sendRequest(d4.type,u)?vt("ConnectionManager","Connect",{serverTypes:Vk(t).join(",")}):(kr("ConnectionManager","Connect",new Error("Failed to initiate connection"),!0,void 0,void 0,{serverTypes:Vk(t).join(",")}),o(!1))}catch(d){a(d)}}):!1}async connectDialog(e){if(!e.server&&!e.connectionString)throw new Error(tie);if(e.authenticationType===Qa&&await this.confirmEntraTokenValidity(e),e.connectionString?.includes(Ey.CRED_PREFIX)&&e.connectionString?.includes("isConnectionString:true")){let a=await this.connectionStore.lookupPassword(e,!0);e.connectionString=a}let t=Sn.getNodeUriFromProfile(e),n=new aY;n.credentials=e,n.connecting=!0,n.connectHandler=(a,c)=>{},this._connections[t]=n,this.statusView&&(this.statusView.languageFlavorChanged(t,il),this.statusView.connecting(t,e),this.statusView.languageFlavorChanged(t,il));let i=Os.createConnectionDetails(e),s=new Iq;s.ownerUri=t,s.connection=i;let o=new xi;this._uriToConnectionCompleteParamsMap.set(s.ownerUri,o);try{if(!await this.client.sendRequest(d4.type,s))throw new Error("Failed to connect")}catch{throw new Error("Failed to connect")}return await o}addActiveConnection(e,t){this._connections[e]=t,this._onConnectionsChangedEmitter.fire()}removeActiveConnection(e){delete this._connections[e],this._onConnectionsChangedEmitter.fire()}async onCancelConnect(){await this.connectionUI.promptToCancelConnection()&&await this.cancelConnect()}async cancelConnect(){let e=this.vscodeWrapper.activeTextEditorUri;if(!e||oi(e))return;let t=new c4;t.ownerUri=e,await this.client.sendRequest(dfe.type,t)&&this.statusView.notConnected(e)}onManageProfiles(){return this.connectionUI.promptToManageProfiles()}async onClearPooledConnections(){return await this._client.sendRequest(yfe.type,{})}async onCreateProfile(){let e=this;return!!await e.connectionUI.createAndSaveProfile(e.vscodeWrapper.isEditingSqlFile)}onRemoveProfile(){return this.connectionUI.removeProfile()}async onDidCloseTextDocument(e){let t=e.uri.toString(!0);this.isConnected(t)&&await this.disconnect(t)}onDidOpenTextDocument(e){let t=e.uri.toString(!0);e.languageId==="sql"&&typeof this._connections[t]>"u"&&this.statusView.notConnected(t)}async copyConnectionToFile(e,t,n=!1){if(!this.isConnected(e)||this.isConnected(t))return;let i=this._connections[e].credentials;await this.connect(t,i)&&!n&&await this.disconnect(e)}async refreshAzureAccountToken(e){let t=this.getConnectionInfo(e);if(!t){this.vscodeWrapper.logToOutputChannel(zMe(e));return}let n=this._uriToConnectionPromiseMap.get(e);if(n){this.vscodeWrapper.logToOutputChannel(FMe(e));try{if(await n){this.vscodeWrapper.logToOutputChannel(jMe(e));return}this.vscodeWrapper.logToOutputChannel(UMe(e))}catch(s){this.vscodeWrapper.logToOutputChannel(BMe(e,s))}}let i=t.credentials.expiresOn;if(typeof i=="number"&&!Number.isNaN(i)){if(df.isTokenExpired(i)){this.vscodeWrapper.logToOutputChannel(GMe(t.connectionId,e));try{if(!await this.connect(e,t.credentials))throw this.vscodeWrapper.showErrorMessage(HMe(t.connectionId,e)),new Error("Unable to refresh connection");this.vscodeWrapper.logToOutputChannel(WMe(t.connectionId,e,JSON.stringify(this.getConnectionInfo(e))));return}catch{this.vscodeWrapper.showInformationMessage($Me)}}this.vscodeWrapper.logToOutputChannel(KMe(t.connectionId,e))}}async addAccount(){let e=await this.connectionUI.addNewAccount();return e?this.vscodeWrapper.showInformationMessage(bG(e.displayInfo.displayName)):this.vscodeWrapper.showErrorMessage(eMe),e}async removeAccount(e){let t=[],n=await Gl.getAccountChoices(this._accountStore);if(n.length>0)return t.push({type:vi.expand,name:"account",message:wT,choices:n}),e.prompt(t,!0).then(async i=>{if(i?.account)try{i.account.key?await this._accountStore.removeAccount(i.account.key.id):await this._accountStore.pruneInvalidAccounts(),this.azureController.removeAccount(i.account),this.vscodeWrapper.showInformationMessage(tMe)}catch(s){this.vscodeWrapper.showErrorMessage(rMe(s.message))}});this.vscodeWrapper.showInformationMessage(nMe)}onClearTokenCache(){this.azureController.clearTokenCache(),this.vscodeWrapper.showInformationMessage(iMe)}async migrateLegacyConnectionProfiles(){this._logger.logDebug("Beginning migration of legacy connections");let e=await this.connectionStore.readAllConnections(!1),t={migrated:0,notNeeded:0,error:0};for(let n of e){let i=await this.migrateLegacyConnection(n);t[i]=(t[i]||0)+1}t.migrated>0?this._logger.verbose(`Completed migration of legacy Connection String connections. (${t.migrated} migrated, ${t.notNeeded} not needed, ${t.error} errored)`):this._logger.verbose(`No legacy Connection String connections found to migrate. (${t.notNeeded} not needed, ${t.error} errored)`),vt("General","MigrateLegacyConnections",{},{...t})}async migrateLegacyConnection(e){try{if(oi(e.connectionString))return"notNeeded";let t=e.connectionString;t.includes(Ey.CRED_CONNECTION_STRING_PREFIX)&&(t=await this.connectionStore.lookupPassword(e,!0)??t);let n=await this.parseConnectionString(t),s={...Os.removeUndefinedProperties(Os.createConnectionInfo(n)),...e},o=t.toLowerCase().indexOf("password=");if(o!==-1){let a=o+9,c=t.indexOf(";",a);s.password=t.substring(a,c===-1?void 0:c),s.savePassword=!0}return s.connectionString="",await this.connectionStore.saveProfile(s),"migrated"}catch(t){return this._logger.error(`Error migrating legacy connection with ID ${e.id}: ${rt(t)}`),this.vscodeWrapper.showErrorMessage(nl.errorMigratingLegacyConnection(e.id,rt(t))),kr("General","MigrateLegacyConnections",t,!1),"error"}}getConnectionInfoFromUri(e){if(this._connections[e])return this._connections[e].credentials}async handleSecurityTokenRequest(e){if(this._keyVaultTokenCache.has(JSON.stringify(e))){let s=this._keyVaultTokenCache.get(JSON.stringify(e));if(df.isTokenExpired(s.expiresOn))this._keyVaultTokenCache.delete(JSON.stringify(e));else return{accountKey:s.key,token:s.token}}let t=await this.selectAccount(),n=await this.selectTenantId(t),i=await this.azureController.getAccountSecurityToken(t,n,hs.resources.azureKeyVaultResource);return this._keyVaultTokenCache.set(JSON.stringify(e),i),{accountKey:i.key,token:i.token}}async selectAccount(){let t=this._connections[this._vscodeWrapper.activeTextEditorUri]?.credentials?.accountId,n=await this._accountStore.getAccounts(),i=this.createAccountQuickPickItems(n,t),s=await this.showAccountQuickPick(i);if(!s)throw new Error(nl.noAccountSelected);return s}createAccountQuickPickItems(e,t){let n=e.map(i=>({label:i.key.id===t?nl.currentAccount(i.displayInfo.name):i.displayInfo.name,description:i.displayInfo.email,account:i}));return n.push({label:nl.signInToAzure,description:nl.signInToAzure,account:void 0}),n}async showAccountQuickPick(e){return await new Promise((n,i)=>{let s=qa.window.createQuickPick();s.items=e,s.placeholder=nl.SelectAccountForKeyVault,s.onDidAccept(async()=>{try{let o=s.selectedItems[0];if(!o){n(void 0);return}let a=o.account;s.dispose(),n(a)}catch(o){s.dispose(),i(o)}}),s.show()})}async selectTenantId(e){if(e.properties?.tenants?.length===1)return e.properties.tenants[0].id;let t=e.properties.tenants.map(i=>({label:i.displayName,description:i.id,tenant:i.id})),n=await this.showTenantQuickPick(t);if(!n)throw new Error(nl.NoTenantSelected);return n}async showTenantQuickPick(e){return new Promise((t,n)=>{let i=qa.window.createQuickPick();i.items=e,i.placeholder=nl.SelectTenant,i.onDidAccept(()=>{let s=i.selectedItems[0];s?(i.dispose(),t(s.tenant)):(i.dispose(),t(void 0))}),i.onDidHide(()=>{i.dispose()}),i.show()})}};var cY=ge(require("vscode")),G1=class{constructor(e){this.vscodeWrapper=e;this.setupDocumentCloseListener()}skipCopyConnectionUris=new Set;_ongoingCreates=new Map;_documentCloseDisposable;setupDocumentCloseListener(){this._documentCloseDisposable=cY.workspace.onDidCloseTextDocument(e=>{let t=e.uri.toString();this.skipCopyConnectionUris.has(t)&&this.skipCopyConnectionUris.delete(t)})}dispose(){this._documentCloseDisposable&&this._documentCloseDisposable.dispose()}async waitForOngoingCreates(){let e=Array.from(this._ongoingCreates.values());return Promise.all(e)}async newQuery(e,t=!1){let n=`${Date.now()}-${Math.random()}`;try{let i=new Promise(async s=>{let o=await this.createDocument(e,t);s(o)});return this._ongoingCreates.set(n,i),await i}finally{this._ongoingCreates.delete(n)}}async createDocument(e,t){let n=await this.vscodeWrapper.openMsSqlTextDocument(e),i=await this.vscodeWrapper.showTextDocument(n,{viewColumn:cY.ViewColumn.One,preserveFocus:!1,preview:!1});return t||this.skipCopyConnectionUris.add(i.document.uri.toString()),i}shouldSkipCopyConnection(e){return this.skipCopyConnectionUris.has(e)}};var dw=ge(Vi()),j_e;(e=>e.type=new dw.RequestType("tabledesigner/initialize"))(j_e||={});var U_e;(e=>e.type=new dw.RequestType("tabledesigner/processedit"))(U_e||={});var B_e;(e=>e.type=new dw.RequestType("tabledesigner/publish"))(B_e||={});var G_e;(e=>e.type=new dw.RequestType("tabledesigner/script"))(G_e||={});var $_e;(e=>e.type=new dw.RequestType("tabledesigner/generatepreviewreport"))($_e||={});var V_e;(e=>e.type=new dw.RequestType("tabledesigner/dispose"))(V_e||={});var xZe=ge(require("vscode"));var lY=class{constructor(e){this._sqlToolsClient=e}async initializeTableDesigner(e){try{return await this._sqlToolsClient.sendRequest(j_e.type,e)}catch(t){throw xZe.window.showErrorMessage(rt(t)),this._sqlToolsClient.logger.error(t),t}}async processTableEdit(e,t){try{return await this._sqlToolsClient.sendRequest(U_e.type,{tableInfo:e,tableChangeInfo:t})}catch(n){throw this._sqlToolsClient.logger.error(n),n}}async publishChanges(e){try{return await this._sqlToolsClient.sendRequest(B_e.type,e)}catch(t){throw this._sqlToolsClient.logger.error(t),t}}async generateScript(e){try{return await this._sqlToolsClient.sendRequest(G_e.type,e)}catch(t){throw this._sqlToolsClient.logger.error(t),t}}async generatePreviewReport(e){try{return await this._sqlToolsClient.sendRequest($_e.type,e)}catch(t){throw this._sqlToolsClient.logger.error(t),t}}async disposeTableDesigner(e){try{return await this._sqlToolsClient.sendRequest(V_e.type,e)}catch(t){throw this._sqlToolsClient.logger.error(t),t}}};var eu=ge(require("vscode")),mY=require("crypto");var br=ge(require("vscode"));function Ehr(r){if(!r)return[];let e=[{componentType:"textarea",propertyName:"description",description:br.l10n.t("Description for the table."),componentProperties:{title:br.l10n.t("Description"),width:350}}];return r?.additionalTableProperties&&e.push(...r.additionalTableProperties),e}function Thr(r){if(!r||!r?.columnTableOptions)return[];let e=r.columnTableOptions,t=[{componentType:"input",propertyName:"name",description:br.l10n.t("The name of the column object."),componentProperties:{title:br.l10n.t("Name"),width:150}},{componentType:"input",propertyName:"description",description:br.l10n.t("Displays the description of the column"),componentProperties:{title:br.l10n.t("Description"),width:400}},{componentType:"dropdown",propertyName:"advancedType",description:br.l10n.t("Displays the unified data type (including length, scale and precision) for the column"),componentProperties:{title:br.l10n.t("Data Type"),width:120,isEditable:!0}},{componentType:"dropdown",propertyName:"type",showInPropertiesView:!1,description:br.l10n.t("Displays the data type name for the column"),componentProperties:{title:br.l10n.t("Type"),width:100}},{componentType:"input",propertyName:"length",description:br.l10n.t("The maximum length (in characters) that can be stored in this database object."),componentProperties:{title:br.l10n.t("Length"),width:60}},{componentType:"input",propertyName:"defaultValue",description:br.l10n.t("A predefined global default value for the column or binding."),componentProperties:{title:br.l10n.t("Default Value"),width:150}},{componentType:"checkbox",propertyName:"allowNulls",description:br.l10n.t("Specifies whether the column may have a NULL value."),componentProperties:{title:br.l10n.t("Allow Nulls")}},{componentType:"checkbox",propertyName:"isPrimaryKey",description:br.l10n.t("Specifies whether the column is included in the primary key for the table."),componentProperties:{title:br.l10n.t("Primary Key")}},{componentType:"input",propertyName:"precision",description:br.l10n.t("For numeric data, the maximum number of decimal digits that can be stored in this database object."),componentProperties:{title:br.l10n.t("Precision"),width:60,inputType:"number"}},{componentType:"input",propertyName:"scale",description:br.l10n.t("For numeric data, the maximum number of decimal digits that can be stored in this database object to the right of decimal point."),componentProperties:{title:br.l10n.t("Scale"),width:60,inputType:"number"}}],n=pw(e,["name","advancedType","isPrimaryKey","isIdentity","allowNulls","defaultValue"]),i=[{componentType:"table",propertyName:"columns",showInPropertiesView:!1,componentProperties:{ariaLabel:br.l10n.t("Columns"),columns:n,itemProperties:mw(e,t),objectTypeDisplayName:br.l10n.t("Column"),canAddRows:e.canAddRows,canInsertRows:e.canInsertRows,canMoveRows:e.canMoveRows,canRemoveRows:e.canRemoveRows,removeRowConfirmationMessage:e.removeRowConfirmationMessage,showRemoveRowConfirmation:e.showRemoveRowConfirmation,labelForAddNewButton:e.labelForAddNewButton??br.l10n.t("New Column"),expandedGroups:[Dl.General]}}],s=$1("columns",r.additionalComponents);return s&&i.push(...s),i}function Ihr(r){if(!r||!r.primaryKeyColumnSpecificationTableOptions)return[];let e=[{componentType:"dropdown",propertyName:"column",description:br.l10n.t("The name of the column."),componentProperties:{title:br.l10n.t("Column"),width:150}}],t=[{componentType:"input",propertyName:"primaryKeyName",showInPropertiesView:!1,description:br.l10n.t("Name of the primary key."),componentProperties:{title:br.l10n.t("Name"),width:250}},{componentType:"textarea",propertyName:"primaryKeyDescription",showInPropertiesView:!1,description:br.l10n.t("The description of the primary key."),componentProperties:{title:br.l10n.t("Description"),width:250}}];r.additionalPrimaryKeyProperties&&r.additionalPrimaryKeyProperties.forEach(s=>{let o={...s};o.showInPropertiesView=!1,t.push(o)});let n=r.primaryKeyColumnSpecificationTableOptions;n&&t.push({componentType:"table",propertyName:"primaryKeyColumns",showInPropertiesView:!1,description:br.l10n.t("Columns in the primary key."),componentProperties:{title:br.l10n.t("Primary Key Columns"),ariaLabel:br.l10n.t("Primary Key Columns"),columns:pw(n,["column"]),itemProperties:mw(n,e),objectTypeDisplayName:"",canAddRows:n.canAddRows,canRemoveRows:n.canRemoveRows,removeRowConfirmationMessage:n.removeRowConfirmationMessage,showRemoveRowConfirmation:n.showRemoveRowConfirmation,showItemDetailInPropertiesView:!1,labelForAddNewButton:n.labelForAddNewButton??br.l10n.t("Add Column"),canMoveRows:n.canMoveRows}});let i=$1("primaryKey",r.additionalComponents);return i&&t.push(...i),t}function Rhr(r){if(!r||!r.indexTableOptions)return[];let e=r.indexTableOptions,t=r.indexColumnSpecificationTableOptions,n=[{componentType:"dropdown",propertyName:"column",description:br.l10n.t("The name of the column."),componentProperties:{title:br.l10n.t("Column"),width:100}}],i=[{componentType:"input",propertyName:"name",description:br.l10n.t("The name of the index."),group:Dl.AdvancedOptions,componentProperties:{title:br.l10n.t("Name"),width:200}},{componentType:"input",propertyName:"description",description:br.l10n.t("The description of the index."),group:Dl.AdvancedOptions,componentProperties:{title:br.l10n.t("Description"),width:200}}];t&&i.push({componentType:"table",propertyName:"columns",description:br.l10n.t("The columns of the index."),group:Dl.Columns,componentProperties:{ariaLabel:br.l10n.t("Columns"),columns:pw(t,["column"]),itemProperties:mw(t,n),objectTypeDisplayName:"",canAddRows:t.canAddRows,canRemoveRows:t.canRemoveRows,removeRowConfirmationMessage:t.removeRowConfirmationMessage,showRemoveRowConfirmation:t.showRemoveRowConfirmation,labelForAddNewButton:t.labelForAddNewButton??br.l10n.t("Add Column")}});let s=[];if(e){let a=e.additionalProperties.find(c=>c.propertyName==="includedColumns")?.group;e.additionalProperties.forEach(c=>{c.group||(c.group=Dl.AdvancedOptions)}),s.push({componentType:"table",propertyName:"indexes",showInPropertiesView:!1,componentProperties:{ariaLabel:br.l10n.t("Indexes"),columns:pw(e,["name"]),itemProperties:mw(e,i),objectTypeDisplayName:br.l10n.t("Index"),canAddRows:e.canAddRows,canRemoveRows:e.canRemoveRows,removeRowConfirmationMessage:e.removeRowConfirmationMessage,showRemoveRowConfirmation:e.showRemoveRowConfirmation,labelForAddNewButton:e.labelForAddNewButton??br.l10n.t("New Index"),expandedGroups:[Dl.Columns,a]}})}let o=$1("indexes",r.additionalComponents);return o&&(o.forEach(a=>{if(a.propertyName==="columnStoreIndexes"){let c=a.componentProperties;c.expandedGroups=[Dl.Columns],c.itemProperties.forEach(l=>{l.group||(l.group=Dl.AdvancedOptions)})}}),s.push(...o)),s}function xhr(r){if(!r||!r.foreignKeyTableOptions)return[];let e=r.foreignKeyTableOptions,t=r.foreignKeyColumnMappingTableOptions,n=[{componentType:"dropdown",propertyName:"foreignColumn",componentProperties:{title:br.l10n.t("Foreign Column"),width:150}},{componentType:"dropdown",propertyName:"column",componentProperties:{title:br.l10n.t("Column"),width:150}}],i=[{componentType:"input",propertyName:"name",description:br.l10n.t("The name of the foreign key."),componentProperties:{title:br.l10n.t("Name"),width:300}},{componentType:"input",propertyName:"description",description:br.l10n.t("The description of the foreign key."),componentProperties:{title:br.l10n.t("Description")}},{componentType:"dropdown",propertyName:"foreignTable",description:br.l10n.t("The table which contains the primary or unique key column."),showInPropertiesView:!1,componentProperties:{title:br.l10n.t("Foreign Table"),width:200}},{componentType:"dropdown",propertyName:"onUpdateAction",description:br.l10n.t("The behavior when a user tries to update a row with data that is involved in a foreign key relationship."),componentProperties:{title:br.l10n.t("On Update Action"),width:100}},{componentType:"dropdown",propertyName:"onDeleteAction",description:br.l10n.t("The behavior when a user tries to delete a row with data that is involved in a foreign key relationship."),componentProperties:{title:br.l10n.t("On Delete Action"),width:100}}];t&&i.push({componentType:"table",propertyName:"columns",description:br.l10n.t("The mapping between foreign key columns and primary key columns."),group:br.l10n.t("Columns"),componentProperties:{ariaLabel:br.l10n.t("Columns"),columns:pw(t,["column","foreignColumn"]),itemProperties:mw(t,n),canAddRows:t.canAddRows,canRemoveRows:t.canRemoveRows,removeRowConfirmationMessage:t.removeRowConfirmationMessage,labelForAddNewButton:t.labelForAddNewButton??br.l10n.t("New Column Mapping")}});let s=[];e&&(i.forEach(a=>{a.group||(a.group=Dl.AdvancedOptions)}),e.additionalProperties.forEach(a=>{a.group||(a.group=Dl.AdvancedOptions)}),s.push({componentType:"table",propertyName:"foreignKeys",showInPropertiesView:!1,componentProperties:{ariaLabel:br.l10n.t("Foreign Keys"),columns:pw(e,["name","foreignTable"]),itemProperties:mw(e,i),objectTypeDisplayName:br.l10n.t("Foreign Key"),canAddRows:e.canAddRows,canRemoveRows:e.canRemoveRows,removeRowConfirmationMessage:e.removeRowConfirmationMessage,showRemoveRowConfirmation:e.showRemoveRowConfirmation,labelForAddNewButton:e.labelForAddNewButton??br.l10n.t("New Foreign Key"),expandedGroups:[Dl.Columns]}}));let o=$1("foreignKeys",r.additionalComponents);return o&&s.push(...o),s}function Ohr(r){if(!r||!r.checkConstraintTableOptions)return[];let e=r.checkConstraintTableOptions,t=r.additionalComponents||[],n=[{componentType:"input",propertyName:"name",description:br.l10n.t("The name of the check constraint."),componentProperties:{title:br.l10n.t("Name"),width:200}},{componentType:"input",propertyName:"description",description:br.l10n.t("The description of the check constraint."),componentProperties:{title:br.l10n.t("Description")}},{componentType:"input",propertyName:"expression",description:br.l10n.t("The expression defining the check constraint."),componentProperties:{title:br.l10n.t("Expression"),width:300}}],i=[];e&&i.push({componentType:"table",propertyName:"checkConstraints",showInPropertiesView:!1,componentProperties:{ariaLabel:br.l10n.t("Check Constraints"),columns:pw(e,["name","expression"]),itemProperties:mw(e,n),objectTypeDisplayName:br.l10n.t("Check Constraint"),canAddRows:e.canAddRows,canRemoveRows:e.canRemoveRows,removeRowConfirmationMessage:e.removeRowConfirmationMessage,showRemoveRowConfirmation:e.showRemoveRowConfirmation,labelForAddNewButton:e.labelForAddNewButton??br.l10n.t("New Check Constraint"),expandedGroups:[Dl.General]}});let s=$1("checkConstraints",t);return s&&i.push(...s),i}function uY(r){let e={tabs:[{title:br.l10n.t("Columns"),id:"columns",components:Thr(r)},{title:br.l10n.t("Primary Key"),id:"primaryKey",components:Ihr(r)},{title:br.l10n.t("Indexes"),id:"indexes",components:Rhr(r)},{title:br.l10n.t("Foreign Keys"),id:"foreignKeys",components:xhr(r)},{title:br.l10n.t("Check Constraints"),id:"checkConstraints",components:Ohr(r)}]};for(let t of r.additionalTabs)e.tabs.push({title:t.title,id:t.id,components:t.components});return e.tabs.push({title:br.l10n.t("Advanced Options"),id:"general",components:Ehr(r)}),e}function pw(r,e){return r?(r.propertiesToDisplay.length>0?r.propertiesToDisplay:e)||[]:e}function mw(r,e){return r.additionalProperties&&e.push(...r.additionalProperties),e}function $1(r,e){return e?e.filter(t=>t.tab===r):[]}var lo=ge(require("vscode")),pY=ge(require("os"));var Ahr=.15,dY="nps/sessionCount",AZe="nps/lastSessionDate",H_e="nps/skipVersion",W_e="nps/isCandidate",NZe="nps/never",kp=class r{constructor(e,t){this._context=e;this.vscodeWrapper=t}static _instance;_webviewController;static createInstance(e,t){r._instance=new r(e,t)}static getInstance(){return r._instance}promptUserForNPSFeedback(){this.promptUserForNPSFeedbackAsync().catch(e=>{console.error("Error prompting for NPS feedback:",e)})}async promptUserForNPSFeedbackAsync(){let e=this._context.globalState,t=e.get(dY,0)+1,n=lo.extensions.getExtension(aC).packageJSON.version||"unknown";if(!await this.shouldPromptForFeedback())return;let i={title:rl.takeSurvey,run:async()=>{let c=Q_e();await this.launchSurvey("nps",c),await e.update(W_e,!1),await e.update(H_e,n)}},s={title:zi.remindMeLater,run:async()=>{await e.update(dY,t-3)}},o={title:zi.dontShowAgain,isSecondary:!0,run:async()=>{await e.update(NZe,!0)}};await(await lo.window.showInformationMessage(rl.doYouMindTakingAQuickFeedbackSurvey,i,s,o)||s).run()}async launchSurvey(e,t){let n=t;!this._webviewController||this._webviewController.isDisposed?this._webviewController=new K_e(this._context,this.vscodeWrapper,n):this._webviewController.updateState(n),this._webviewController.revealToForeground();let i=await new Promise(s=>{this._webviewController.onSubmit(o=>{s(o)}),this._webviewController.onCancel(()=>{s({})})});return Nhr(e,i),i}async shouldPromptForFeedback(){let e=this._context.globalState;if(e.get(NZe,!1))return!1;let n=lo.extensions.getExtension(aC).packageJSON.version||"unknown";if(e.get(H_e,"")===n)return!1;let s=new Date().toDateString(),o=e.get(AZe,new Date(0).toDateString());if(s===o)return!1;let a=e.get(dY,0)+1;if(await e.update(AZe,s),await e.update(dY,a),a<5)return!1;let c=e.get(W_e,!1)||Math.random()<Ahr;return await e.update(W_e,c),c?!0:(await e.update(H_e,n),!1)}};function Nhr(r,e){let t=Object.keys(e).reduce((i,s)=>(typeof e[s]=="string"&&(i[s]=e[s]),i),{}),n=Object.keys(e).reduce((i,s)=>(typeof e[s]=="number"&&(i[s]=e[s]),i),{});vt("UserSurvey","SurveySubmit",{surveyId:r,modernFeaturesEnabled:lo.workspace.getConfiguration().get(uC),useLegacyConnectionExperience:lo.workspace.getConfiguration().get(pM),...t},n)}var K_e=class extends Uo{_onSubmit=new lo.EventEmitter;onSubmit=this._onSubmit.event;_onCancel=new lo.EventEmitter;onCancel=this._onCancel.event;constructor(e,t,n){super(e,t,"userSurvey","userSurvey",n,{title:rl.mssqlFeedback,viewColumn:lo.ViewColumn.Active,iconPath:{dark:lo.Uri.joinPath(e.extensionUri,"media","feedback_dark.svg"),light:lo.Uri.joinPath(e.extensionUri,"media","feedback_light.svg")}}),this.registerReducer("submit",async(i,s)=>{if(this._onSubmit.fire(s.answers),this.panel.dispose(),s.answers.nps<7||s.answers.nsat<2){let o=await lo.window.showInformationMessage(rl.fileAnIssuePrompt,rl.submitIssue,zi.cancel);if(vt("UserSurvey","SubmitGithubIssue",{response:o===rl.submitIssue?"submitted":"not submitted"}),o===rl.submitIssue){let c=`https://github.com/microsoft/vscode-mssql/issues/new?labels=User-filed,Triage:%20Needed&body=${encodeURIComponent(Dhr(typeof s.answers.comments=="string"?s.answers.comments:"",e.extension.packageJSON.version||"unknown"))}`;lo.env.openExternal(lo.Uri.parse(c))}}return i}),this.registerReducer("cancel",async i=>(this._onCancel.fire(),this.panel.dispose(),i)),this.registerReducer("openPrivacyStatement",async i=>(lo.env.openExternal(lo.Uri.parse(xqe)),i)),this.panel.onDidDispose(()=>{this._onCancel.fire()})}};function Dhr(r,e){return`**Describe issue:**
${r}

**Steps to Reproduce:**
1.
2.
3.

**Expected Behavior:**


**Actual Behavior:**


----
|Software|Version|
|--|--|
|MSSQL Extension|${e}|
|VS Code|${lo.version}|
|OS|${pY.type()} ${pY.release()}|`}function Q_e(r){return{questions:[{id:"nps",label:r?rl.howLikelyAreYouToRecommendFeature(r):rl.howlikelyAreYouToRecommendMSSQLExtension,type:"nps",required:!0},{id:"nsat",label:r?rl.overallHowStatisfiedAreYouWithFeature(r):rl.overallHowSatisfiedAreYouWithMSSQLExtension,type:"nsat",required:!0},{type:"divider"},{id:"comments",label:rl.whatCanWeDoToImprove,type:"textarea",required:!1,placeholder:rl.privacyDisclaimer}]}}var V1=class extends Uo{constructor(t,n,i,s,o,a,c,l){super(t,n,"tableDesigner","tableDesigner",{apiState:{editState:"NotStarted",generateScriptState:"NotStarted",previewState:"NotStarted",publishState:"NotStarted",initializeState:"Loading"}},{title:"Table Designer",viewColumn:eu.ViewColumn.Active,iconPath:{dark:eu.Uri.joinPath(t.extensionUri,"media","tableDesignerEditor_dark.svg"),light:eu.Uri.joinPath(t.extensionUri,"media","tableDesignerEditor_light.svg")},showRestorePromptAfterClose:!1});this._tableDesignerService=i;this._connectionManager=s;this._untitledSqlDocumentService=o;this._targetNode=a;this._objectExplorerProvider=c;this._objectExplorerTree=l;this.initialize()}_isEdit=!1;_correlationId=(0,mY.randomUUID)();async initialize(){if(!this._targetNode){let c="Unable to find object explorer node";await eu.window.showErrorMessage(c),kr("TableDesigner","Initialize",new Error(c),!0,void 0,"unableToFindObjectExplorerNode");return}this._isEdit=this._targetNode.nodeType==="Table"||this._targetNode.nodeType==="View",this.showRestorePromptAfterClose=!this._isEdit;let t=this.getDatabaseNameForNode(this._targetNode),n=t||"master",i=this._targetNode.connectionProfile;i.database=n;let s;try{let c=await this._connectionManager.createConnectionDetails(i);if(s=await this._connectionManager.getConnectionString(c,!0,!0),!s||s===""){let l="Unable to find connection string for the connection";await eu.window.showErrorMessage(l),kr("TableDesigner","Initialize",new Error(l),!0,void 0,"unableToFindConnectionString");return}}catch(c){let l=c instanceof Error?c:new Error(rt(c));kr("TableDesigner","Initialize",l,!1,void 0,"unableToFindConnectionString"),await eu.window.showErrorMessage("Unable to find connection string for the connection: "+rt(c));return}let o=Fn("TableDesigner","Initialize",this._correlationId,{correlationId:this._correlationId,isEdit:this._isEdit.toString()});await this._connectionManager.confirmEntraTokenValidity(i);let a=i.azureAccountToken?i.azureAccountToken:void 0;try{let c;this._isEdit?c={id:(0,mY.randomUUID)(),isNewTable:!1,title:this._targetNode.label,tooltip:`${i.server} - ${n} - ${this._targetNode.label}`,server:i.server,database:n,connectionString:s,accessToken:a,schema:this._targetNode.metadata.schema,name:this._targetNode.metadata.name}:c={id:(0,mY.randomUUID)(),isNewTable:!0,title:"New Table",tooltip:`${i.server} - ${n} - New Table`,server:i.server,database:n,accessToken:a,connectionString:s},this.panel.title=c.title;let l=await this._tableDesignerService.initializeTableDesigner(c);o.end("Succeeded"),l.tableInfo.database=n??"master",this.state={tableInfo:c,view:uY(l.view),model:l.viewModel,issues:l.issues,isValid:!0,tabStates:{mainPaneTab:"columns",resultPaneTab:"script"},apiState:{...this.state.apiState,initializeState:"Loaded"}}}catch(c){o.endFailed(c,!1),this.state.apiState.initializeState="Error",this.state=this.state}this.registerRpcHandlers()}getDatabaseNameForNode(t){return t.metadata?.metadataTypeName==="Database"?t.metadata.name:t.parentNode?this.getDatabaseNameForNode(t.parentNode):""}dispose(){this._tableDesignerService.disposeTableDesigner(this.state.tableInfo),super.dispose(),vt("TableDesigner","Close",{correlationId:this._correlationId})}registerRpcHandlers(){this.registerReducer("processTableEdit",async(t,n)=>{try{let i=await this._tableDesignerService.processTableEdit(n.table,n.tableChangeInfo);return vt("TableDesigner","Edit",{type:n.tableChangeInfo.type.toString(),source:n.tableChangeInfo.source,correlationId:this._correlationId}),i.issues?.length===0?t.tabStates.resultPaneTab="script":t.tabStates.resultPaneTab="issues",this.showRestorePromptAfterClose=!0,{...t,view:i.view?uY(i.view):t.view,model:i.viewModel,issues:i.issues,isValid:i.isValid,apiState:{...t.apiState,editState:"Loaded"}}}catch(i){let s=i instanceof Error?i:new Error(rt(i));return kr("TableDesigner","Edit",s,!1),eu.window.showErrorMessage(rt(i)),t}}),this.registerReducer("publishChanges",async(t,n)=>{let i=Fn("TableDesigner","Publish",this._correlationId,{correlationId:this._correlationId});this.state={...this.state,apiState:{...this.state.apiState,publishState:"Loading"}};try{let o=await this._tableDesignerService.publishChanges(n.table);i.end("Succeeded"),t={...t,tableInfo:o.newTableInfo,view:uY(o.view),model:o.viewModel,apiState:{...t.apiState,publishState:"Loaded",previewState:"NotStarted"}},this.panel.title=t.tableInfo.title,this.showRestorePromptAfterClose=!1,kp.getInstance().promptUserForNPSFeedback()}catch(o){t={...t,apiState:{...t.apiState,publishState:"Error"},publishingError:o.toString()},i.endFailed(o,!1)}let s=this._targetNode;return this._targetNode.context.subType!=="Tables"&&(s=this._targetNode.parentNode),s&&(await this._objectExplorerTree.reveal(s,{expand:!0,select:!0}),await this._objectExplorerProvider.refreshNode(s)),t}),this.registerReducer("generateScript",async(t,n)=>{this.state={...this.state,apiState:{...this.state.apiState,generateScriptState:"Loading"}};let i=await this._tableDesignerService.generateScript(n.table);return vt("TableDesigner","GenerateScript",{correlationId:this._correlationId}),t={...t,apiState:{...t.apiState,generateScriptState:"Loaded"}},await this._untitledSqlDocumentService.newQuery(i),kp.getInstance().promptUserForNPSFeedback(),t}),this.registerReducer("generatePreviewReport",async(t,n)=>{this.state={...this.state,apiState:{...this.state.apiState,previewState:"Loading",publishState:"NotStarted"},publishingError:void 0};try{let i=await this._tableDesignerService.generatePreviewReport(n.table);t={...t,apiState:{...t.apiState,previewState:i.schemaValidationError?"Error":"Loaded",publishState:"NotStarted"},generatePreviewReportResult:i}}catch(i){t={...t,apiState:{...t.apiState,previewState:"Error",publishState:"NotStarted"},generatePreviewReportResult:{schemaValidationError:rt(i),report:"",mimeType:""}}}return vt("TableDesigner","GenerateScript",{correlationId:this._correlationId}),t}),this.registerReducer("initializeTableDesigner",async t=>(await this.initialize(),t)),this.registerReducer("scriptAsCreate",async t=>(await this._untitledSqlDocumentService.newQuery(t.model.script.value??""),t)),this.registerReducer("copyScriptAsCreateToClipboard",async t=>(await eu.env.clipboard.writeText(t.model.script.value??""),await eu.window.showInformationMessage(zke),t)),this.registerReducer("setTab",async(t,n)=>(t.tabStates.mainPaneTab=n.tabId,t)),this.registerReducer("setPropertiesComponents",async(t,n)=>(t.propertiesPaneData=n.components,t)),this.registerReducer("setResultTab",async(t,n)=>(t.tabStates.resultPaneTab=n.tabId,t)),this.registerReducer("closeDesigner",async t=>(vt("TableDesigner","Close",{correlationId:this._correlationId}),this.panel.dispose(),t)),this.registerReducer("continueEditing",async t=>(this.state.apiState.publishState="NotStarted",vt("TableDesigner","ContinueEditing",{correlationId:this._correlationId}),t)),this.registerReducer("copyPublishErrorToClipboard",async t=>(await eu.env.clipboard.writeText(t.publishingError??""),eu.window.showInformationMessage(Fke),t))}};var tSe=ge(require("os")),Lp=ge(require("vscode")),UZe=ge(kZe());var Y_e=ge(lL()),fY=class{formState={};get connectionProfile(){return this.formState}set connectionProfile(e){this.formState=e}formComponents={};selectedInputMode="parameters";connectionComponents={mainOptions:[],groupedAdvancedOptions:[]};azureAccounts=[];loadingAzureAccountsStatus="notStarted";loadingAzureTenantsStatus="notStarted";azureSubscriptions=[];loadingAzureSubscriptionsStatus="notStarted";azureServers=[];loadingAzureServersStatus="notStarted";savedConnections=[];recentConnections=[];connectionStatus="notStarted";readyToConnect=!1;formError="";dialog;selectedAccountId;azureTenants=[];selectedTenantId;fabricWorkspacesLoadStatus={status:"notStarted"};fabricWorkspaces=[];constructor(e){for(let t in e)t in this&&(this[t]=e[t])}};var X_e;(e=>e.type=new Y_e.RequestType("getConnectionDisplayName"))(X_e||={});var J_e;(e=>e.type=new Y_e.RequestType("getSqlAnalyticsEndpointUriFromFabric"))(J_e||={});var Y1=require("vscode");async function qZe(r,e,t,n){let i=await r.client.sendRequest(xq.type,{}),s=i.capabilities.connectionProvider.options,o=i.capabilities.connectionProvider.groupDisplayNames,a={},c=new Set([...P_.mainOptions,"profileName","groupId"]);for(let l of s)try{a[l.name]={...khr(l),isAdvancedOption:!c.has(l.name),optionCategory:l.groupName,optionCategoryLabel:o[l.groupName]??l.groupName}}catch(u){console.error(`Error loading connection option '${l.name}': ${rt(u)}`),kr("ConnectionDialog","LoadConnectionProperties",u,!0,void 0,void 0,{connectionOptionName:l.name})}return await Lhr(a,await e,await t,await n),a}function zZe(r,e){let t=new Map([["general",void 0],["security",void 0],["resiliency",void 0],["failover",void 0],["pooling",void 0],["context",void 0]]),n=Object.values(r).filter(i=>i.isAdvancedOption&&!e.mainOptions.includes(i.propertyName));for(let i of n)!t.has(i.optionCategory)||t.get(i.optionCategory)===void 0?t.set(i.optionCategory,{groupName:i.optionCategoryLabel,options:[i.propertyName]}):t.get(i.optionCategory).options.push(i.propertyName);return Array.from(t.values())}function khr(r){switch(r.valueType){case"boolean":return{propertyName:r.name,label:r.displayName,required:r.isRequired,type:"checkbox",tooltip:r.description};case"string":return{propertyName:r.name,label:r.displayName,required:r.isRequired,type:"input",tooltip:r.description};case"password":return{propertyName:r.name,label:r.displayName,required:r.isRequired,type:"password",tooltip:r.description};case"number":return{propertyName:r.name,label:r.displayName,required:r.isRequired,type:"input",tooltip:r.description};case"category":return{propertyName:r.name,label:r.displayName,required:r.isRequired,type:"dropdown",tooltip:r.description,options:r.categoryValues.map(t=>({displayName:t.displayName??t.name,value:t.name}))};default:let e=`Unhandled connection option type: ${r.valueType}`;kr("ConnectionDialog","LoadConnectionProperties",new Error(e),!0)}}async function Lhr(r,e,t,n){r.profileName={propertyName:"profileName",label:xn.profileName,required:!1,type:"input",isAdvancedOption:!1},r.groupId=H1(n),r.savePassword={propertyName:"savePassword",label:xn.savePassword,required:!1,type:"checkbox",isAdvancedOption:!1},r.accountId={propertyName:"accountId",label:xn.microsoftAccount,required:!0,type:"dropdown",options:e,placeholder:xn.selectAnAccount,actionButtons:t,validate:(i,s)=>i.connectionProfile.authenticationType==="AzureMFA"&&!s?{isValid:!1,validationMessage:xn.microsoftAccountIsRequired}:{isValid:!0,validationMessage:""},isAdvancedOption:!1},r.tenantId={propertyName:"tenantId",label:xn.tenantId,required:!0,type:"dropdown",options:[],hidden:!0,placeholder:xn.selectATenant,validate:(i,s)=>i.connectionProfile.authenticationType==="AzureMFA"&&!s?{isValid:!1,validationMessage:xn.tenantIdIsRequired}:{isValid:!0,validationMessage:""},isAdvancedOption:!1},r.connectionString={type:"textarea",propertyName:"connectionString",label:xn.connectionString,required:!0,isAdvancedOption:!1},r.server.validate=(i,s)=>s?{isValid:!0,validationMessage:""}:{isValid:!1,validationMessage:xn.serverIsRequired},r.user.validate=(i,s)=>i.connectionProfile.authenticationType==="SqlLogin"&&!s?{isValid:!1,validationMessage:xn.usernameIsRequired}:{isValid:!0,validationMessage:""}}function H1(r){return{propertyName:"groupId",label:xn.connectionGroup,required:!1,type:"searchableDropdown",options:r,isAdvancedOption:!1,placeholder:xn.selectConnectionGroup,searchBoxPlaceholder:xn.searchConnectionGroups}}var dO=class extends Uo{constructor(e,t,n,i,s,o){super(e,t,n,i,s,o),this.registerFormRpcHandlers()}registerFormRpcHandlers(){this.registerReducer("formAction",async(e,t)=>{if(t.event.isAction){let n=this.getFormComponent(this.state,t.event.propertyName);if(n&&n.actionButtons){let i=n.actionButtons.find(s=>s.id===t.event.value);i?.callback&&await i.callback()}}else this.state.formState[t.event.propertyName]=t.event.value,await this.validateForm(this.state.formState,t.event.propertyName,t.event.updateValidation),await this.afterSetFormProperty(t.event.propertyName);return await this.updateItemVisibility(),e})}async validateForm(e,t,n){let i=[],s=this;function o(a){if(!a.validate)return;let c=a.validate(s.state,e[a.propertyName]);n&&(a.validation=c),c.isValid||i.push(a.propertyName)}if(t){let a=this.state.formComponents[t];a&&o(a)}else this.getActiveFormComponents(this.state).map(a=>this.state.formComponents[a]).forEach(a=>{if(a.hidden){a.validation={isValid:!0,validationMessage:""};return}else o(a)});return i}async afterSetFormProperty(e){}getFormComponent(e,t){return this.getActiveFormComponents(e).includes(t)?e.formComponents[t]:void 0}};var W1=ge(require("vscode"));var K1=class extends Uo{constructor(t,n,i,s){super(t,n,"ConnectionGroup","ConnectionGroup",{existingGroupName:s?.name,name:s?.name||"",description:s?.description||"",color:s?.color||"",message:""},{title:s?$D.editExistingGroup(s.name):$D.createNewGroup,viewColumn:W1.ViewColumn.One,iconPath:{light:W1.Uri.joinPath(t.extensionUri,"media","database_light.svg"),dark:W1.Uri.joinPath(t.extensionUri,"media","database_dark.svg")}});this.connectionConfig=i;this.connectionGroupToEdit=s;this.registerRpcHandlers(),this.updateState(),this.initialized.resolve()}initialized=new xi;registerRpcHandlers(){this.registerReducer("closeDialog",async t=>(this.dialogResult.resolve(!1),this.panel.dispose(),t)),this.registerReducer("saveConnectionGroup",async(t,n)=>{try{this.connectionGroupToEdit?(this.logger.verbose("Updating existing connection group",n),await this.connectionConfig.updateGroup({...this.connectionGroupToEdit,name:n.name,description:n.description,color:n.color})):(this.logger.verbose("Creating new connection group",n),await this.connectionConfig.addGroup(FZe(n))),vt("ConnectionGroup","SaveConnectionGroup",{newOrEdit:this.connectionGroupToEdit?"edit":"new"}),this.dialogResult.resolve(!0),await this.panel.dispose()}catch(i){t.message=rt(i),kr("ConnectionGroup","SaveConnectionGroup",i,!0,void 0,void 0,{newOrEdit:this.connectionGroupToEdit?"edit":"new"})}return t})}};function FZe(r){return{name:r.name,description:r.description,color:r.color,id:ec()}}function gY(r){return r.dialog={type:"createConnectionGroup",props:{}},r}async function yY(r,e,t){let n=FZe(r);try{await e.connectionStore.connectionConfig.addGroup(n),vt(t,"SaveConnectionGroup",{newOrEdit:"new"})}catch(i){let s=rt(i);return kr(t,"SaveConnectionGroup",i,!1,void 0,i.Name,{failure:i.Name}),s}return vt(t,"SaveConnectionGroup"),n}var w_=ge(require("vscode"));var Q1={Viewer:0,Member:1,Contributor:2,Admin:3};function eSe(r,e){return Q1[r]>=Q1[e]}var Au=class{static fabricUriBase=w_.Uri.parse("https://api.fabric.microsoft.com/v1/");static fabricScopeUriBase=w_.Uri.parse("https://analysis.windows.net/powerbi/api/");static longRunningOperationCode=202;static defaultRetryInMs=30;static defaultScope=".default";constructor(){}static async getFabricCapacities(e){return(await this.fetchFromFabric("capacities",xs.listingCapacitiesForTenant(e),e)).value}static async getFabricWorkspaces(e){return(await this.fetchFromFabric("workspaces",xs.listingWorkspacesForTenant(e),e)).value}static async getFabricWorkspace(e,t){return await this.fetchFromFabric(`workspaces/${e}`,xs.gettingWorkspace(e),t)}static async getFabricDatabases(e,t){let n=typeof e=="string"?this.getFabricWorkspace(e,t):e,i=typeof e=="string"?e:e.id,s=[];try{let o=await this.fetchFromFabric(`workspaces/${i}/sqlDatabases`,xs.listingSqlDatabasesForWorkspace(i),t),a=await n;s.push(...o.value.map(c=>({id:c.id,server:c.properties.serverFqdn,displayName:c.displayName,database:c.properties.databaseName,workspaceName:a.displayName,type:c.type})))}catch(o){throw console.error("Error processing Fabric databases:",o),o}return s}static async getFabricSqlEndpoints(e,t){let n=typeof e=="string"?this.getFabricWorkspace(e,t):e,i=typeof e=="string"?e:e.id,s=[];try{let o=await this.fetchFromFabric(`workspaces/${i}/sqlEndpoints`,xs.listingSqlEndpointsForWorkspace(i),t),a=await n;s.push(...o.value.map(c=>({id:c.id,server:void 0,displayName:c.displayName,database:"TO VALIDATE",workspaceName:a.displayName,type:c.type})))}catch(o){throw console.error("Error processing Fabric SQL Endpoints:",o),o}return s}static async getFabricSqlEndpointServerUri(e,t,n){try{return(await this.fetchFromFabric(`workspaces/${t}/sqlEndpoints/${e}/connectionString`,xs.gettingConnectionStringForSqlEndpoint(e,t),n)).connectionString}catch(i){throw console.error(`Error fetching server URL for SQL Endpoints: ${rt(i)}`),i}}static async getRolesForWorkspace(e,t){try{return(await this.fetchFromFabric(`workspaces/${e}/roleAssignments`,xs.listingRoleAssignmentsForWorkspace(e),t)).value}catch(n){console.error(n)}}static async getFabricDatabase(e,t,n){return await this.fetchFromFabric(`workspaces/${e}/sqlDatabases/${t}`,xs.gettingFabricDatabase(t),n)}static async createWorkspace(e,t,n,i){return await this.postToFabric("workspaces",{displayName:t,capacityId:e,description:n},xs.createWorkspaceWithCapacity(e),i)}static async createFabricSqlDatabase(e,t,n,i){return await this.postToFabric(`workspaces/${e}/sqlDatabases`,{displayName:t,description:n},xs.createSqlDatabaseForWorkspace(e),i)}static async fetchFromFabric(e,t,n){let i=w_.Uri.joinPath(this.fabricUriBase,e),s=new bg,a=(await this.createScopedFabricSession(n,t))?.accessToken,l=(await s.makeGetRequest(i.toString(),a)).data;if(jZe(l))throw new Error(xs.fabricApiError(l.errorCode,l.message));return l}static async postToFabric(e,t,n,i,s){let o=w_.Uri.joinPath(this.fabricUriBase,e),a=new bg,l=(await this.createScopedFabricSession(i,n,s))?.accessToken,u=await a.makePostRequest(o.toString(),l,t);u.status===this.longRunningOperationCode&&(u=await this.handleLongRunningOperation(u.headers["retry-after"],u.headers.location,a,l));let d=u.data;if(jZe(d))throw new Error(xs.fabricApiError(d.errorCode,d.message));return d}static async handleLongRunningOperation(e,t,n,i){let s=parseInt(e,10)||this.defaultRetryInMs,o;for(;!o||o.data.status==="Running"||o.data.status==="NotStarted";)await new Promise(a=>setTimeout(a,s*1e3)),o=await n.makeGetRequest(t,i);if(o.data.status==="Failed")throw new Error(xs.fabricLongRunningApiError(o.status.toString(),o.data.error));return await n.makeGetRequest(o.headers.location,i)}static async createScopedFabricSession(e,t,n=[this.defaultScope]){let i=n.map(s=>`${this.fabricScopeUriBase}${s}`);return e&&i.push(`VSCODE_TENANT:${e}`),await this.getSession("microsoft",i,{createIfNone:!0,requestReason:t})}static async getSession(e,t,n){if(!n||!n.requestReason.trim())throw new Error("RequestReason required in TokenRequestOptions");if(n.createIfNone&&!n.forceNewSession){let i=await w_.authentication.getSession(e,t,{silent:!0});if(i)return i;n.createIfNone=!1,n.forceNewSession=!0}return n.forceNewSession===!0&&(n.forceNewSession={detail:n.requestReason}),await w_.authentication.getSession(e,t,n)}};function jZe(r){return r&&typeof r=="object"&&typeof r.errorCode=="string"&&typeof r.message=="string"}var qhr=10,P_=class r extends dO{constructor(t,n,i,s,o,a){super(t,n,"connectionDialog","connectionDialog",new fY,{title:xn.connectionDialog,viewColumn:Lp.ViewColumn.Active,iconPath:{dark:Lp.Uri.joinPath(t.extensionUri,"media","connectionDialogEditor_dark.svg"),light:Lp.Uri.joinPath(t.extensionUri,"media","connectionDialogEditor_light.svg")}});this._mainController=i;this._objectExplorerProvider=s;this.registerRpcHandlers(),this.initializeDialog(o,a).then(()=>{this.updateState(),this.initialized.resolve()}).catch(c=>{Lp.window.showErrorMessage(rt(c)),kr("ConnectionDialog","Initialize",c,!0,void 0,"catchAll"),this.initialized.reject(rt(c))})}initialized=new xi;static mainOptions=["server","trustServerCertificate","authenticationType","user","password","savePassword","accountId","tenantId","database","encrypt"];_connectionBeingEdited;_azureSubscriptions;async initializeDialog(t,n){this.state.formComponents=await qZe(this._mainController.connectionManager,q_e(this._mainController.azureAccountService,this.logger),this.getAzureActionButtons(),this.getConnectionGroups(this._mainController)),this.state.connectionComponents={mainOptions:[...r.mainOptions],groupedAdvancedOptions:[]},this.state.connectionComponents.groupedAdvancedOptions=zZe(this.state.formComponents,this.state.connectionComponents),this.loadEmptyConnection(),await this.updateItemVisibility(),this.updateState();try{await this.updateLoadedConnections(this.state),this.updateState()}catch(i){Lp.window.showErrorMessage(rt(i)),kr("ConnectionDialog","Initialize",i,!1,void 0,"loadSavedConnections")}if(t)try{await this.loadConnectionToEdit(t)}catch(i){this.loadEmptyConnection(),Lp.window.showErrorMessage(rt(i)),kr("ConnectionDialog","Initialize",i,!1,void 0,"loadConnectionToEdit")}n&&(this.state.connectionProfile.groupId=n.id),await this.updateItemVisibility()}registerRpcHandlers(){this.registerReducer("setConnectionInputType",async(t,n)=>(this.state.selectedInputMode=n.inputMode,await this.updateItemVisibility(),t.formError="",this.updateState(),t.selectedInputMode==="azureBrowse"?(t.loadingAzureSubscriptionsStatus==="notStarted"||t.loadingAzureSubscriptionsStatus==="error")&&(t.loadingAzureServersStatus==="notStarted"||t.loadingAzureServersStatus==="error")&&await this.loadAllAzureServers(t):t.selectedInputMode==="fabricBrowse"&&(t.connectionProfile.server=void 0,t.connectionProfile.database=void 0,t.connectionProfile.user=void 0,t.fabricWorkspacesLoadStatus={status:"notStarted"},t.fabricWorkspaces=[],t.selectedAccountId||(t.loadingAzureAccountsStatus==="notStarted"||t.loadingAzureAccountsStatus==="error")&&(t.loadingAzureAccountsStatus="loading",this.updateState(t),t.azureAccounts=(await os.getAccounts()).map(i=>({id:i.id,name:i.label})),t.azureAccounts.length===0?t.loadingAzureAccountsStatus="notStarted":(t.selectedAccountId=t.azureAccounts[0].id,t.loadingAzureAccountsStatus="loaded"),this.updateState(t)),t.selectedAccountId&&t.selectedTenantId&&await this.loadFabricWorkspaces(t,t.selectedAccountId,t.selectedTenantId)),t)),this.registerReducer("loadConnection",async(t,n)=>(vt("ConnectionDialog","LoadConnection"),this._connectionBeingEdited=structuredClone(n.connection),this.clearFormError(),this.state.connectionProfile=n.connection,this.state.selectedInputMode="parameters",await this.updateItemVisibility(),await this.handleAzureMFAEdits("azureAuthType"),await this.handleAzureMFAEdits("accountId"),await this.checkReadyToConnect(),t)),this.registerReducer("connect",async t=>this.connectHelper(t)),this.registerReducer("loadAzureServers",async(t,n)=>(await this.loadAzureServersForSubscription(t,n.subscriptionId),t)),this.registerReducer("addFirewallRule",async(t,n)=>{t.dialog.props.addFirewallRuleStatus="loading",this.updateState(t);try{await this._mainController.connectionManager.firewallService.createFirewallRuleWithVscodeAccount(n.firewallRuleSpec,this.state.connectionProfile.server),t.dialog=void 0}catch(i){t.formError=rt(i),t.dialog=void 0,kr("ConnectionDialog","AddFirewallRule",i,!1,void 0,i.Name,{failure:i.Name})}return vt("ConnectionDialog","AddFirewallRule"),t.dialog=void 0,this.updateState(t),await this.connectHelper(t)}),this.registerReducer("createConnectionGroup",async(t,n)=>{let i=await yY(n.connectionGroupSpec,this._mainController.connectionManager,"ConnectionDialog");return typeof i=="string"?t.formError=i:t.connectionProfile.groupId=i.id,t.formComponents.groupId.options=await this._mainController.connectionManager.connectionUI.getConnectionGroupOptions(),t.dialog=void 0,this.updateState(t),await this.connectHelper(t)}),this.registerReducer("openCreateConnectionGroupDialog",async t=>gY(t)),this.registerReducer("closeDialog",async t=>(t.dialog=void 0,t)),this.registerReducer("closeMessage",async t=>(t.formError=void 0,t)),this.registerReducer("filterAzureSubscriptions",async t=>{try{await CZe(t,this.logger)&&await this.loadAllAzureServers(t)}catch(n){this.state.formError=rt(n),kr("ConnectionDialog","FilterAzureSubscriptions",n,!1)}return t}),this.registerReducer("refreshConnectionsList",async t=>(await this.updateLoadedConnections(t),t)),this.registerReducer("deleteSavedConnection",async(t,n)=>(await Lp.window.showQuickPick([zi.delete,zi.cancel],{title:zi.areYouSureYouWantTo(xn.deleteTheSavedConnection(bu(n.connection)))})!==zi.delete||await this._mainController.connectionManager.connectionStore.removeProfile(n.connection)&&await this.updateLoadedConnections(t),t)),this.registerReducer("removeRecentConnection",async(t,n)=>(await this._mainController.connectionManager.connectionStore.removeRecentlyUsed(n.connection),await this.updateLoadedConnections(t),t)),this.registerReducer("loadFromConnectionString",async(t,n)=>{vt("ConnectionDialog","LoadFromConnectionString");try{let i=await this._mainController.connectionManager.parseConnectionString(n.connectionString);return t.connectionProfile=await this.hydrateConnectionDetailsFromProfile(i,t.connectionProfile),t.dialog=void 0,t.connectionProfile.authenticationType==="AzureMFA"&&await this.handleAzureMFAEdits("accountId"),await this.updateItemVisibility(),t}catch(i){this.logger.error("Error parsing connection string: "+rt(i));let s=Y1.l10n.t("Invalid connection string: {0}",rt(i));return t.dialog?.type==="loadFromConnectionString"?t.dialog.connectionStringError=s:t.formError=s,kr("ConnectionDialog","LoadFromConnectionString",i,!1,void 0,void 0),t}}),this.registerReducer("openConnectionStringDialog",async t=>{t.selectedInputMode!=="parameters"&&(t.selectedInputMode="parameters",t.formError=void 0,this.updateState(t));try{let n="";if(!(0,UZe.shallowEqualObjects)(t.connectionProfile,this.getDefaultConnection())){let i=this.cleanConnection(t.connectionProfile),s=this._mainController.connectionManager.createConnectionDetails(i),o=!1;s.options.authenticationType==="AzureMFA"&&s.options.user===void 0&&(s.options.user="",o=!0),n=await this._mainController.connectionManager.getConnectionString(s,!0),o&&n.replace("User Id=;","")}t.dialog={type:"loadFromConnectionString",connectionString:n}}catch(n){this.logger.error("Error generating connection string: "+rt(n)),t.dialog={type:"loadFromConnectionString",connectionString:""}}return t}),this.onRequest(X_e.type,async t=>bu(t)),this.registerReducer("signIntoAzureForFirewallRule",async t=>(t.dialog?.type!=="addFirewallRule"||await U1(t.dialog.props,!0),t)),this.registerReducer("signIntoAzureForBrowse",async(t,n)=>{n.browseTarget==="azureBrowse"&&t.selectedInputMode!=="azureBrowse"&&(t.selectedInputMode="azureBrowse",t.formError=void 0,this.updateState(t)),t.loadingAzureAccountsStatus==="notStarted"&&(t.loadingAzureAccountsStatus="loading",t.loadingAzureTenantsStatus="notStarted",t.azureTenants=[],this.updateState(t));let i=t.azureAccounts.map(s=>s.id);try{await os.signIn(!0)}catch(s){return this.logger.error("Error signing into Azure: "+rt(s)),t.formError=Zu.errorSigningIntoAzure(rt(s)),t}return t.azureAccounts=(await os.getAccounts()).map(s=>({id:s.id,name:s.label})),t.selectedAccountId=t.azureAccounts.find(s=>!i.includes(s.id))?.id,t.loadingAzureAccountsStatus="loaded",this.updateState(t),n.browseTarget==="azureBrowse"&&await this.loadAllAzureServers(t),t}),this.registerReducer("selectAzureAccount",async(t,n)=>{t.selectedAccountId=n.accountId,t.azureTenants=[],t.selectedTenantId="",t.loadingAzureTenantsStatus="loading",this.updateState(t);let i=await os.getAccountById(n.accountId),s=await os.getTenantsForAccount(i);t.azureTenants=s.map(a=>({id:a.tenantId,name:a.displayName}));let o=os.getHomeTenantIdForAccount(i);return t.selectedTenantId=s.find(a=>a.tenantId===o)?o:t.azureTenants.length>0?t.azureTenants[0].id:void 0,t.loadingAzureTenantsStatus="loaded",t}),this.registerReducer("selectAzureTenant",async(t,n)=>{if(t.selectedTenantId=n.tenantId,t.fabricWorkspacesLoadStatus={status:"loading"},t.fabricWorkspaces=[],this.updateState(t),await this.loadFabricWorkspaces(t,t.selectedAccountId,t.selectedTenantId),t.fabricWorkspaces.length<=qhr){this.updateState(t);let i=[];for(let s of t.fabricWorkspaces)i.push(this.loadFabricDatabasesForWorkspace(t,s));await Promise.all(i)}return t}),this.registerReducer("selectFabricWorkspace",async(t,n)=>{let i=t.fabricWorkspaces.find(s=>s.id===n.workspaceId);return this.state.connectionProfile.server="",this.state.connectionProfile.database="",(i&&i.loadStatus.status==="notStarted"||i.loadStatus.status==="error")&&await this.loadFabricDatabasesForWorkspace(t,i),t}),this.onRequest(J_e.type,async t=>{let n=Fn("ConnectionDialog","GetSqlAnalyticsEndpointUrlFromFabric");try{let i=Au.getFabricSqlEndpointServerUri(t.id,t.workspaceId,t.tenantId);return n.end("Succeeded"),i}catch(i){this.logger.error(`Failed to get URL for Fabric SQL Endpoint: ${rt(i)}`),n.endFailed(new Error("Failed to get URL for Fabric SQL Endpoint"),!0);return}})}async afterSetFormProperty(t){await this.handleAzureMFAEdits(t)}async checkReadyToConnect(){let t=await this.validateForm(this.state.connectionProfile,void 0,!1);this.state.readyToConnect=t.length===0}async updateItemVisibility(){let t=[];if(this.state.connectionProfile.authenticationType!=="SqlLogin"&&t.push("user","password","savePassword"),this.state.connectionProfile.authenticationType!=="AzureMFA"&&t.push("accountId","tenantId"),this.state.connectionProfile.authenticationType==="AzureMFA"){let n=[];this.state.connectionProfile.accountId!==void 0&&(n=await rY(this._mainController.azureAccountService,this.state.connectionProfile.accountId,this.logger)),n.length<2&&t.push("tenantId")}for(let n of Object.values(this.state.formComponents))n.hidden=t.includes(n.propertyName);await this.checkReadyToConnect()}getActiveFormComponents(t){return[...t.connectionComponents.mainOptions,"groupId"]}cleanConnection(t){let n=structuredClone(t);for(let i of Object.values(this.state.formComponents))i.hidden&&(n[i.propertyName]=void 0);return n.connectionString=void 0,n.secureEnclaves!=="Enabled"&&(n.attestationProtocol=void 0,n.enclaveAttestationUrl=void 0),n}async loadConnections(){let t=await this._mainController.connectionManager.connectionStore.readAllConnections(!0),n=t.filter(a=>a.profileSource===0),i=t.filter(a=>a.profileSource===1);vt("ConnectionDialog","LoadRecentConnections",void 0,{savedConnectionsCount:n.length,recentConnectionsCount:i.length});let s=this;function o(a,c){return a.map(l=>{try{return s.initializeConnectionForDialog(l)}catch(u){return s.logger.error(`Error initializing ${c} connection: ${rt(u)}`),kr("ConnectionDialog","LoadConnections",u,!1,void 0,void 0,{connectionType:c,authType:l.authenticationType}),Promise.resolve(void 0)}}).filter(l=>l!==void 0)}return{recentConnections:await Promise.all(o(i,"recent")),savedConnections:await Promise.all(o(n,"saved"))}}async updateLoadedConnections(t){let n=await this.loadConnections();t.recentConnections=n.recentConnections,t.savedConnections=n.savedConnections}async validateProfile(t){t||(t=this.state.connectionProfile);let n=this.cleanConnection(t);return await this.validateForm(n)}async connectHelper(t){this.clearFormError(),this.state.connectionStatus="loading",this.updateState();let n=this.cleanConnection(this.state.connectionProfile),i=await this.validateProfile(n);if(i.length>0)return this.state.connectionStatus="error",this.logger.warn("One more more inputs have errors: "+i.join(", ")),t;try{try{let a=await this._mainController.connectionManager.connectDialog(n);if(a.errorMessage)return await this.handleConnectionErrorCodes(a,t)}catch(a){return this.state.formError=rt(a),this.state.connectionStatus="error",kr("ConnectionDialog","CreateConnection",a,!1,void 0,void 0,{connectionInputType:this.state.selectedInputMode,authMode:this.state.connectionProfile.authenticationType}),t}vt("ConnectionDialog","CreateConnection",{result:"success",newOrEditedConnection:this._connectionBeingEdited?"edited":"new",connectionInputType:this.state.selectedInputMode,authMode:this.state.connectionProfile.authenticationType,serverTypes:Vk(this.state.connectionProfile).join(",")}),this._connectionBeingEdited&&(this._mainController.connectionManager.getUriForConnection(this._connectionBeingEdited),await this._objectExplorerProvider.removeConnectionNodes([this._connectionBeingEdited]),await this._mainController.connectionManager.connectionStore.removeProfile(this._connectionBeingEdited)),n=Os.removeUndefinedProperties(n);async function s(a){await a._mainController.connectionManager.connectionStore.saveProfile(n);let c=await a._mainController.createObjectExplorerSession(n);return await a.updateLoadedConnections(t),a.updateState(),c}let o=await s(this);this.state.connectionStatus="loaded";try{await this._mainController.objectExplorerTree.reveal(o,{focus:!0,select:!0,expand:!0})}catch{o=await s(this),await this._mainController.objectExplorerTree.reveal(o,{focus:!0,select:!0,expand:!0})}await this.panel.dispose(),this.dispose(),kp.getInstance().promptUserForNPSFeedback()}catch(s){return this.state.connectionStatus="error",this.state.formError=rt(s),kr("ConnectionDialog","CreateConnection",s,void 0,void 0,void 0,{connectionInputType:this.state.selectedInputMode,authMode:this.state.connectionProfile.authenticationType}),t}return t}async handleConnectionErrorCodes(t,n){if(t.errorNumber===-2146893019)return this.state.connectionStatus="error",this.state.dialog={type:"trustServerCert",message:t.errorMessage},n;if(t.errorNumber===40615){this.state.connectionStatus="error";let i=await this._mainController.connectionManager.firewallService.handleFirewallRule(t.errorNumber,t.errorMessage);i.result||(kr("ConnectionDialog","AddFirewallRule",new Error(t.errorMessage),!0,void 0,"parseIP"),i.ipAddress="0.0.0.0");let s={message:t.errorMessage,clientIp:i.ipAddress,accounts:[],tenants:{},isSignedIn:!0,serverName:this.state.connectionProfile.server,addFirewallRuleStatus:"notStarted"};return s.isSignedIn&&await U1(s,!1),s.isSignedIn=await os.isSignedIn(),this.state.dialog={type:"addFirewallRule",props:s},n}return this.state.formError=t.errorMessage,this.state.connectionStatus="error",vt("ConnectionDialog","CreateConnection",{result:"connectionError",errorNumber:String(t.errorNumber),newOrEditedConnection:this._connectionBeingEdited?"edited":"new",connectionInputType:this.state.selectedInputMode,authMode:this.state.connectionProfile.authenticationType}),n}async loadConnectionToEdit(t){if(t){this._connectionBeingEdited=structuredClone(t);let n=await this.initializeConnectionForDialog(this._connectionBeingEdited);this.state.connectionProfile=n,this.state.selectedInputMode="parameters",this.state.connectionProfile.authenticationType==="AzureMFA"&&await this.handleAzureMFAEdits("accountId"),await this.checkReadyToConnect(),this.updateState()}}getDefaultConnection(){return{authenticationType:"SqlLogin",connectTimeout:30,applicationName:"vscode-mssql",applicationIntent:"ReadWrite"}}loadEmptyConnection(){this.state.connectionProfile=this.getDefaultConnection()}async initializeConnectionForDialog(t){if(oi(t.connectionString)){if(!t.password){let n=await this._mainController.connectionManager.connectionStore.lookupPassword(t,!1);t.password=n}}else this.logger.logDebug("Connection string connection found in Connection Dialog initialization; should have been converted.");return t}async getConnectionGroups(t){return t.connectionManager.connectionUI.getConnectionGroupOptions()}async getAzureActionButtons(){let t=[];if(t.push({label:xn.signIn,id:"azureSignIn",callback:async()=>{let n=await this._mainController.azureAccountService.addAccount();this.logger.verbose(`Added Azure account '${n.displayInfo?.displayName}', ${n.key.id}`);let i=this.getFormComponent(this.state,"accountId");if(!i){this.logger.error("Account component not found");return}i.options=await q_e(this._mainController.azureAccountService,this.logger),this.logger.verbose(`Read ${i.options.length} Azure accounts: ${i.options.map(s=>s.value).join(", ")}`),this.state.connectionProfile.accountId=n.key.id,this.logger.verbose(`Selecting '${n.key.id}'`),this.updateState(),await this.handleAzureMFAEdits("accountId")}}),this.state.connectionProfile.authenticationType==="AzureMFA"&&this.state.connectionProfile.accountId){let n=(await this._mainController.azureAccountService.getAccounts()).find(i=>i.displayInfo.userId===this.state.connectionProfile.accountId);if(n){let i=!1;try{let s=await this._mainController.azureAccountService.getAccountSecurityToken(n,void 0);i=!df.isTokenValid(s.token,s.expiresOn)}catch(s){this.logger.verbose(`Error getting token or checking validity; prompting for refresh. Error: ${rt(s)}`),this.vscodeWrapper.showErrorMessage("Error validating Entra authentication token; you may need to refresh your token."),i=!0}i&&t.push({label:Em,id:"refreshToken",callback:async()=>{let s=(await this._mainController.azureAccountService.getAccounts()).find(o=>o.displayInfo.userId===this.state.connectionProfile.accountId);if(s)try{let o=await this._mainController.azureAccountService.getAccountSecurityToken(s,void 0);this.logger.log("Token refreshed",o.expiresOn)}catch(o){this.logger.error(`Error refreshing token: ${rt(o)}`)}}})}}return t}async handleAzureMFAEdits(t){if(!["accountId","tenantId","authenticationType"].includes(t)||this.state.connectionProfile.authenticationType!=="AzureMFA")return;let i=this.getFormComponent(this.state,"accountId"),s=this.getFormComponent(this.state,"tenantId"),o=[];switch(t){case"accountId":o=await rY(this._mainController.azureAccountService,this.state.connectionProfile.accountId,this.logger),s&&(s.options=o,o.length>0&&!o.find(c=>c.value===this.state.connectionProfile.tenantId)&&(this.state.connectionProfile.tenantId=o[0].value,await this.validateForm(this.state.formState,"tenantId"))),i.actionButtons=await this.getAzureActionButtons();break;case"tenantId":break;case"authenticationType":let a=i.options[0];a&&(this.state.connectionProfile.accountId=a.value),this.state.connectionProfile.accountId&&(o=await rY(this._mainController.azureAccountService,this.state.connectionProfile.accountId,this.logger),s&&(s.options=o,o&&o.length>0&&(this.state.connectionProfile.tenantId=o[0].value))),i.actionButtons=await this.getAzureActionButtons();break}}async loadAzureSubscriptions(t){let n;try{if(t.loadingAzureAccountsStatus="loading",t.loadingAzureTenantsStatus="notStarted",t.azureTenants=[],this.updateState(t),t.formError="",t.azureAccounts=(await os.getAccounts()).map(c=>({id:c.id,name:c.label})),t.loadingAzureAccountsStatus="loaded",this.updateState(t),!t.azureAccounts||t.azureAccounts.length===0)return;let i;try{i=await os.signIn()}catch(c){t.formError=Zu.errorSigningIntoAzure(rt(c));return}t.loadingAzureSubscriptionsStatus="loading",this.updateState();let s=Lp.workspace.getConfiguration().get(dC)!==void 0;n=Fn("ConnectionDialog","LoadAzureSubscriptions"),this._azureSubscriptions=new Map((await i.getSubscriptions(s)).map(c=>[c.subscriptionId,c]));let o=Map.groupBy(Array.from(this._azureSubscriptions.values()),c=>c.tenantId),a=[];for(let c of o.keys())for(let l of o.get(c))a.push({id:l.subscriptionId,name:l.name,loaded:!1});return t.azureSubscriptions=a,t.loadingAzureSubscriptionsStatus="loaded",n.end("Succeeded",void 0,{subscriptionCount:a.length}),this.updateState(),o}catch(i){t.formError=Y1.l10n.t("Error loading Azure subscriptions."),t.loadingAzureSubscriptionsStatus="error",this.logger.error(t.formError+`
`+rt(i)),n?.endFailed(i,!1);return}}async loadAllAzureServers(t){let n=Fn("ConnectionDialog","LoadAzureServers");try{let i=await this.loadAzureSubscriptions(t);if(!i)return;if(i.size===0)t.formError=Y1.l10n.t("No subscriptions available.  Adjust your subscription filters to try again.");else{t.loadingAzureServersStatus="loading",t.azureServers=[],this.updateState();let s=[];for(let o of i.keys())for(let a of i.get(o))s.push(this.loadAzureServersForSubscription(t,a.subscriptionId));await Promise.all(s),n.end("Succeeded",void 0,{subscriptionCount:s.length}),t.loadingAzureServersStatus="loaded";return}}catch(i){t.formError=Y1.l10n.t("Error loading Azure databases."),t.loadingAzureServersStatus="error",this.logger.error(t.formError+tSe.EOL+rt(i)),n.endFailed(i,!1);return}}async loadAzureServersForSubscription(t,n){let i=this._azureSubscriptions.get(n),s=t.azureSubscriptions.find(o=>o.id===n);try{let o=await os.fetchServersFromAzure(i);t.azureServers.push(...o),s.loaded=!0,this.updateState(),this.logger.log(`Loaded ${o.length} servers for subscription ${i.name} (${i.subscriptionId})`)}catch(o){this.logger.error(xn.errorLoadingAzureDatabases(i.name,i.subscriptionId)+tSe.EOL+rt(o)),kr("ConnectionDialog","LoadAzureServers",o,!0,void 0,void 0)}}async loadFabricWorkspaces(t,n,i){let s=Fn("ConnectionDialog","LoadFabricWorkspaces");try{let o=typeof n=="string"?n:n.id,a=await os.getAccountById(o),c=[],l=await os.getTenant(a,i);if(!l){let u=`Failed to get tenant '${i}' for account '${a.label}'.`,d=Zu.failedToGetTenantForAccount(i,a.label);this.logger.error(u),t.fabricWorkspacesLoadStatus={status:"error",message:d},s.endFailed(new Error("Failed to get tenant info from VS Code; may have been user-canceled."),!0,void 0,void 0)}try{let u=await Au.getFabricWorkspaces(l.tenantId);for(let d of u){let p={id:d.id,displayName:d.displayName,databases:[],tenantId:l.tenantId,loadStatus:{status:"notStarted"}};c.push(p)}this.state.fabricWorkspaces=c.sort((d,p)=>d.displayName.localeCompare(p.displayName)),t.fabricWorkspacesLoadStatus={status:"loaded",message:this.state.fabricWorkspaces.length===0?xn.noWorkspacesFound:void 0},s.end("Succeeded",void 0,{workspaceCount:this.state.fabricWorkspaces.length})}catch(u){let d=`Failed to get Fabric workspaces for tenant '${l.displayName} (${l.tenantId})': ${rt(u)}`,p=xs.failedToGetWorkspacesForTenant(l.displayName,l.tenantId);this.logger.error(d),t.fabricWorkspacesLoadStatus={status:"error",message:p},s.endFailed(new Error("Failed to fetch Fabric workspaces"),!0,void 0,void 0)}}catch(o){t.formError=rt(o),s.endFailed(new Error("Failure while getting Fabric workspaces"),!0,void 0,void 0)}}async loadFabricDatabasesForWorkspace(t,n){let i=Fn("ConnectionDialog","LoadDatabases");n.loadStatus={status:"loading"},this.updateState(t);try{let s=[],o=[];try{s.push(...await Au.getFabricDatabases(n.id,n.tenantId))}catch(l){let u=rt(l);this.logger.error(`Error loading Fabric databases for workspace ${n.id}: ${u}`),o.push(u)}let a=s.length,c=o.length>0;try{s.push(...await Au.getFabricSqlEndpoints(n.id,n.tenantId))}catch(l){let u=rt(l);console.error(`Error loading Fabric SQL endpoints for workspace ${n.id}: ${u}`),o.push(u)}n.databases=s.map(l=>({id:l.id,database:l.database,displayName:l.displayName,server:l.server,type:l.type,workspaceId:n.id,workspaceName:n.displayName,tenantId:n.tenantId})),o.length>0?n.loadStatus={status:"error",message:o.join(`
`)}:n.loadStatus={status:"loaded"},n.databases.sort((l,u)=>l.displayName.localeCompare(u.displayName)),i.end("Succeeded",{sqlDbErrored:String(c),sqlAnalyticsEndpointErrored:String(o.length-(c?1:0))},{sqlDbCount:a,sqlAnalyticsEndpointCount:n.databases.length-a}),this.updateState(t)}catch(s){let o=`Failed to load Fabric databases for workspace ${n.id}: ${rt(s)}`;this.logger.error(o),n.loadStatus={status:"error",message:rt(s)},i.endFailed(new Error("Failure while getting Fabric databases"),!0,void 0,void 0)}}clearFormError(){this.state.formError="";for(let t of this.getActiveFormComponents(this.state).map(n=>this.state.formComponents[n]))t.validation=void 0}async hydrateConnectionDetailsFromProfile(t,n){let i=Os.createConnectionInfo(t);if(n.profileName&&(i.profileName=n.profileName),i.applicationName=t.options.applicationName==="sqltools"?n.applicationName||"vscode-mssql":t.options.applicationName,i.savePassword=!!i.password,i.profileName=n.profileName,i.id=n.id,i.groupId=n.groupId,i.authenticationType==="AzureMFA"&&i.user!==void 0){let o=(await this._mainController.azureAccountService.getAccounts()).find(a=>a.displayInfo.email===i.user);o&&(i.accountId=o.displayInfo.userId,i.email=o.displayInfo.email)}return i}};var Ff=ge(require("vscode"));var BZe=require("crypto");var rSe=class extends Uo{_onSubmit=new Ff.EventEmitter;onSubmit=this._onSubmit.event;_onCancel=new Ff.EventEmitter;onCancel=this._onCancel.event;constructor(e,t,n){super(e,t,"objectExplorerFilter","objectExplorerFilter",n??{filterProperties:[],existingFilters:[],nodePath:""},{title:Ff.l10n.t("Object Explorer Filter"),viewColumn:Ff.ViewColumn.Beside,iconPath:{dark:Ff.Uri.joinPath(e.extensionUri,"media","filter_dark.svg"),light:Ff.Uri.joinPath(e.extensionUri,"media","filter_light.svg")}}),this.registerReducer("submit",(i,s)=>(this._onSubmit.fire(s.filters),this.panel.dispose(),i)),this.registerReducer("cancel",i=>(this._onCancel.fire(),this.panel.dispose(),i))}loadData(e){this.state=e}},vY=class{static _filterWebviewController;static async getFilters(e,t,n){return await new Promise((i,s)=>{let o=(0,BZe.randomUUID)();vt("ObjectExplorerFilter","Open",{nodeType:n.nodeType,correlationId:o}),!this._filterWebviewController||this._filterWebviewController.isDisposed?this._filterWebviewController=new rSe(e,t,{filterProperties:n.filterableProperties,existingFilters:n.filters,nodePath:n.nodePath}):this._filterWebviewController.loadData({filterProperties:n.filterableProperties,existingFilters:n.filters,nodePath:n.nodePath}),this._filterWebviewController.revealToForeground(),this._filterWebviewController.onSubmit(a=>{a&&vt("ObjectExplorerFilter","Submit",{nodeType:n.nodeType,correlationId:o,filters:JSON.stringify(a.map(c=>c.name))},{filterCount:a.length}),i(a)}),this._filterWebviewController.onCancel(()=>{vt("ObjectExplorerFilter","Cancel",{nodeType:n.nodeType,correlationId:o}),i(void 0)}),this._filterWebviewController.onDisposed(()=>{vt("ObjectExplorerFilter","Cancel",{nodeType:n.nodeType,correlationId:o}),i(void 0)})})}};var nSe=ge(Vi()),iSe;(e=>e.type=new nSe.RequestType("queryExecutionPlan/getExecutionPlan"))(iSe||={});var zhr;(e=>e.type=new nSe.RequestType("queryExecutionPlan/compareExecutionPlanGraph"))(zhr||={});var bY=class{constructor(e){this._sqlToolsClient=e}async getExecutionPlan(e){try{let t={graphInfo:e};return await this._sqlToolsClient.sendRequest(iSe.type,t)}catch(t){throw this._sqlToolsClient.logger.error(t),t}}};var X1=ge(require("vscode"));var _Y=class extends Uo{constructor(t,n,i,s,o,a){super(t,n,"executionPlan","executionPlan",{executionPlanState:{loadState:"loading",executionPlanGraphs:[],totalCost:0}},{title:`${a}`,viewColumn:X1.ViewColumn.Active,iconPath:{dark:X1.Uri.joinPath(t.extensionUri,"media","executionPlan_dark.svg"),light:X1.Uri.joinPath(t.extensionUri,"media","executionPlan_light.svg")}});this.executionPlanService=i;this.untitledSqlDocumentService=s;this.executionPlanContents=o;this.initialize()}async initialize(){this.state.executionPlanState.loadState="loading",this.updateState(),this.registerRpcHandlers()}registerRpcHandlers(){this.registerReducer("getExecutionPlan",async(t,n)=>(t=await I$e(t,this.executionPlanService,[this.executionPlanContents],"SqlplanFile"),{...t,executionPlanState:{...t.executionPlanState,executionPlanGraphs:this.state.executionPlanState.executionPlanGraphs}})),this.registerReducer("saveExecutionPlan",async(t,n)=>VH(t,n)),this.registerReducer("showPlanXml",async(t,n)=>HH(t,n)),this.registerReducer("showQuery",async(t,n)=>WH(t,n,this.untitledSqlDocumentService)),this.registerReducer("updateTotalCost",async(t,n)=>KH(t,n))}};var hw=ge(require("vscode"));var SY=class{constructor(e,t,n){this.mainController=t;this.client=n;this._logger=Cs.create(e.outputChannel,"MssqlProtocolHandler")}_logger;async handleUri(e){switch(this._logger.info(`URI: ${e.toString()}`),e.path){case"/connect":await this.handleConnectCommand(e);return;case"/openConnectionDialog":await this.handleOpenConnectionDialogCommand(e);return;default:{this._logger.warn(`Unknown URI action '${e.path}'; defaulting to /openConnectionDialog`),this.openConnectionDialog(void 0);return}}}async handleOpenConnectionDialogCommand(e){let t=await this.readProfileFromArgs(e.query);this.openConnectionDialog(t)}async handleConnectCommand(e){let t=await this.readProfileFromArgs(e.query);if(!t){this.openConnectionDialog(t);return}let{profile:n,score:i}=await this.mainController.connectionManager.findMatchingProfile(t);n&&(!t.database||i>=2)?(this._logger.info(`Matching profile found for ${e.query}; connecting...`),await this.connectProfile(n)):(this._logger.info(`No matching profile found for ${e.query}; opening connection dialog...`),this.openConnectionDialog(t))}async connectProfile(e){await hw.window.withProgress({location:hw.ProgressLocation.Notification,title:nl.connectingToProfile(bu(e)),cancellable:!1},async()=>{let t=await this.mainController.createObjectExplorerSession(e);await this.mainController.objectExplorerTree.reveal(t,{focus:!0,select:!0,expand:!0}),await hw.commands.executeCommand("objectExplorer.focus")})}openConnectionDialog(e){hw.commands.executeCommand(ed,e)}async readProfileFromArgs(e){if(!e)return;let n=(await this.client.sendRequest(xq.type,{})).capabilities.connectionProvider.options,i={},s=new URLSearchParams(e),o=s.get("profileName");o&&(i.profileName=o);let a=s.get("connectionString");if(a)return i.connectionString=a,i;let c=n.map(u=>({name:u.name,type:u.valueType}));for(let u of c){let d=u.name,p=s.get(d);if(p==null){d==="savePassword"&&(i[d]=!0);continue}switch(u.type){case"string":case"category":case"password":i[d]=p;break;case"number":let m=parseInt(p);isNaN(m)||(i[d]=m);break;case"boolean":i[d]=p==="true"||p==="1";break;default:break}}let l=i;return l.authenticationType??="SqlLogin",l.savePassword??=!!l.password,l}};var PY=ge(require("vscode"));var CY="application/vnd.code.tree.objectExplorer",sSe="text/plain",wY=class{constructor(e,t){this.connectionStore=t;this._logger=Cs.create(e.outputChannel,"DragAndDrop")}dragMimeTypes=[CY,sSe];dropMimeTypes=[CY];_logger;handleDrag(e,t,n){let i=e[0];if(i instanceof zm||i instanceof fd){let s={name:i.label.toString(),type:i instanceof zm?"connection":"connectionGroup",id:i instanceof zm?i.connectionProfile.id:i.connectionGroup.id,isConnectionOrGroup:!0};t.set(CY,new PY.DataTransferItem(s)),i instanceof zm&&t.set(sSe,new PY.DataTransferItem(Sn.getQualifiedName(i)))}else t.set(sSe,new PY.DataTransferItem(Sn.getQualifiedName(i)))}async handleDrop(e,t,n){let i=await t.get(CY)?.value;if(i)try{if(i.isConnectionOrGroup&&i.type&&i.id&&(e instanceof fd||e===void 0)){let s;if(e===void 0?s={label:"ROOT",id:this.connectionStore.rootGroupId}:s={label:e.label.toString(),id:e.id},this._logger.verbose(`Dragged ${i.type} '${i.name}' (ID: ${i.id}) onto group '${s.label}' (ID: ${s.id})`),i.type==="connection"){let o=await this.connectionStore.connectionConfig.getConnectionById(i.id);o.groupId=s.id,await this.connectionStore.connectionConfig.updateConnection(o)}else{let o=this.connectionStore.connectionConfig.getGroupById(i.id);if(o.id===s.id){this._logger.verbose("Cannot move group into itself; skipping.");return}o.parentId=s.id,await this.connectionStore.connectionConfig.updateGroup(o)}vt("ObjectExplorer","DragAndDrop",{dragType:i.type,dropTarget:e?"connectionGroup":"ROOT"})}}catch(s){this._logger.error("Failed to parse drag metadata:",rt(s)),kr("ObjectExplorer","DragAndDrop",s,!0,void 0,void 0,{dragType:i.type,dropTarget:e?"connectionGroup":"ROOT"})}}};var fw=ge(Vi()),E_;(o=>{let r;(c=>c.type=new fw.RequestType("schemaDesigner/createSession"))(r=o.CreateSession||={});let e;(c=>c.type=new fw.RequestType("schemaDesigner/disposeSession"))(e=o.DisposeSession||={});let t;(c=>c.type=new fw.RequestType("schemaDesigner/generateScript"))(t=o.GenerateScript||={});let n;(c=>c.type=new fw.RequestType("schemaDesigner/getDefinition"))(n=o.GetDefinition||={});let i;(c=>c.type=new fw.RequestType("schemaDesigner/getReport"))(i=o.GetReport||={});let s;(c=>c.type=new fw.RequestType("schemaDesigner/publishSession"))(s=o.PublishSession||={})})(E_||={});var EY=class{constructor(e){this._sqlToolsClient=e}_modelReadyListeners=[];async createSession(e){try{return await this._sqlToolsClient.sendRequest(E_.CreateSession.type,e)}catch(t){throw this._sqlToolsClient.logger.error(t),t}}async disposeSession(e){try{await this._sqlToolsClient.sendRequest(E_.DisposeSession.type,e)}catch(t){throw this._sqlToolsClient.logger.error(t),t}}async getDefinition(e){try{return await this._sqlToolsClient.sendRequest(E_.GetDefinition.type,e)}catch(t){throw this._sqlToolsClient.logger.error(t),t}}async generateScript(e){try{return await this._sqlToolsClient.sendRequest(E_.GenerateScript.type,e)}catch(t){throw this._sqlToolsClient.logger.error(t),t}}async publishSession(e){try{await this._sqlToolsClient.sendRequest(E_.PublishSession.type,e)}catch(t){throw this._sqlToolsClient.logger.error(t),t}}async getReport(e){try{return await this._sqlToolsClient.sendRequest(E_.GetReport.type,e)}catch(t){throw this._sqlToolsClient.logger.error(t),t}}onSchemaReady(e){this._modelReadyListeners.push(e)}};var Ao=ge(require("vscode"));var Ty=ge(require("vscode")),GZe=ge(require("os")),$Ze=ge(require("path")),VZe=require("fs");function Uc(){return ec()}async function oSe(r){let e=Uhr();return r&&await Bhr(r)?r:e}async function HZe(r,e){let t=await Ty.window.showOpenDialog({canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,defaultUri:Ty.Uri.file(r),openLabel:ps.Open,filters:e});return!t||t.length===0?void 0:t[0].fsPath}async function WZe(r,e){let t=await oSe(r);return await HZe(t,e)}async function KZe(){let r=await oSe();return await HZe(r,{"scmp Files":["scmp"]})}async function QZe(){let r=await oSe();return await jhr(r)}async function jhr(r){let e=await Ty.window.showSaveDialog({defaultUri:Ty.Uri.file(r),saveLabel:ps.Save,filters:{"scmp Files":["scmp"]}});if(e)return e.fsPath}function Uhr(){return Ty.workspace.workspaceFolders?Ty.workspace.workspaceFolders[0].uri.fsPath:GZe.homedir()}async function Bhr(r){try{return await VZe.promises.access(r),!0}catch{return!1}}async function YZe(r,e,t,n){return await n.compare(r,t.sourceEndpointInfo,t.targetEndpointInfo,e,t.deploymentOptions)}async function XZe(r,e,t,n){return await n.generateScript(r,t.targetServerName,t.targetDatabaseName,e)}async function aSe(r,e,t,n){return await n.publishDatabaseChanges(r,t.targetServerName,t.targetDatabaseName,e)}async function cSe(r,e,t){let n=$Ze.dirname(e.targetProjectPath);return await t.publishProjectChanges(r,n,e.targetFolderStructure,e.taskExecutionMode)}async function JZe(r){return await r.schemaCompareGetDefaultOptions()}async function ZZe(r,e,t,n){return await n.includeExcludeNode(r,t.diffEntry,t.includeRequest,e)}async function eet(r,e,t,n){return await n.includeExcludeAllNodes(r,t.includeRequest,e)}async function tet(r,e){return await e.openScmp(r)}async function ret(r,e,t,n,i,s,o,a){return await a.saveScmp(r,e,t,n,i,s,o)}async function net(r,e){return await e.cancel(r)}function as(r){switch(r){case 0:return"Database";case 1:return"Dacpac";case 2:return"Project";default:return`Unknown: ${r}`}}var iet=require("util");var TY=class r extends Uo{constructor(t,n,i,s,o,a,c,l,u){super(t,n,"schemaCompare","schemaCompare",{isSqlProjectExtensionInstalled:!1,isComparisonInProgress:!1,isIncludeExcludeAllOperationInProgress:!1,activeServers:{},databases:[],defaultDeploymentOptionsResult:l,intermediaryOptionsResult:void 0,endpointsSwitched:!1,auxiliaryEndpointInfo:void 0,sourceEndpointInfo:void 0,targetEndpointInfo:void 0,scmpSourceExcludes:[],scmpTargetExcludes:[],originalSourceExcludes:new Map,originalTargetExcludes:new Map,sourceTargetSwitched:!1,schemaCompareResult:void 0,generateScriptResultStatus:void 0,publishDatabaseChangesResultStatus:void 0,schemaComparePublishProjectResult:void 0,schemaCompareIncludeExcludeResult:void 0,schemaCompareOpenScmpResult:void 0,saveScmpResultStatus:void 0,cancelResultStatus:void 0,waitingForNewConnection:!1,pendingConnectionEndpointType:null},{title:u,viewColumn:Ao.ViewColumn.Active,iconPath:{dark:Ao.Uri.joinPath(t.extensionUri,"media","schemaCompare_dark.svg"),light:Ao.Uri.joinPath(t.extensionUri,"media","schemaCompare_light.svg")}});this.schemaCompareService=a;this.connectionMgr=c;this.operationId=Uc(),this.logger.info(`SchemaCompareWebViewController created with operation ID: ${this.operationId} - OperationId: ${this.operationId}`),this.start(i,s,o),this.registerRpcHandlers(),this.registerDisposable(this.connectionMgr.onConnectionsChanged(async()=>{let d=this.getActiveServersList();if(this.state.waitingForNewConnection&&this.state.pendingConnectionEndpointType){let p=this.findNewConnections(this.state.activeServers,d);if(p.length>0){this.state.activeServers=d;let m=p[0];await this.autoSelectNewConnection(m,this.state.pendingConnectionEndpointType)}}else this.state.activeServers=d;this.updateState()}))}static SQL_DATABASE_PROJECTS_EXTENSION_ID="ms-mssql.sql-database-projects-vscode";operationId;async start(t,n,i,s=void 0){this.logger.info(`Starting schema comparison with sourceContext type: ${t?typeof t:"undefined"} - OperationId: ${this.operationId}`);let o=await this.resolveEndpointInfo(t),a;n!==void 0&&(a=await this.resolveEndpointInfo(n)),await this.launch(o,a,i,s)}async resolveEndpointInfo(t){if(this.isTreeNodeInfoType(t)){let n=t;if(n?.connectionProfile)return this.logger.verbose(`Using connection profile: ${n.connectionProfile.server} - OperationId: ${this.operationId}`),await this.getEndpointInfoFromConnectionProfile(n.connectionProfile,t)}else{if(t&&typeof t=="string"&&t.endsWith(".dacpac"))return this.logger.verbose(`Using dacpac: ${t} - OperationId: ${this.operationId}`),this.getEndpointInfoFromDacpac(t);if(t&&typeof t=="string"&&t.endsWith(".sqlproj"))return this.logger.verbose(`Using project: ${t} - OperationId: ${this.operationId}`),await this.getEndpointInfoFromProject(t);if(t&&typeof t=="object")return t;this.logger.verbose(`No context provided - OperationId: ${this.operationId}`);return}}async launch(t,n,i=!1,s){if(this.logger.info(`Launching schema comparison with runComparison=${i}, has source=${!!t}, has target=${!!n}, has comparisonResult=${!!s} - OperationId: ${this.operationId}`),i&&s)throw new Error("Cannot both pass a comparison result and request a new comparison be run.");this.state.sourceEndpointInfo=t,this.state.targetEndpointInfo=n,this.updateState(this.state)}async getEndpointInfoFromConnectionProfile(t,n){let i=await this.connectionMgr.getUriForConnection(t),s=t.user;return s||(s=ps.defaultUserName),{endpointType:0,serverDisplayName:`${t.server} (${s})`,serverName:t.server,databaseName:Sn.getDatabaseName(n),ownerUri:i,packageFilePath:"",connectionDetails:void 0,connectionName:t.profileName?t.profileName:"",projectFilePath:"",targetScripts:[],dataSchemaProvider:"",extractTarget:5}}getEndpointInfoFromDacpac(t){return{endpointType:1,serverDisplayName:"",serverName:"",databaseName:"",ownerUri:"",packageFilePath:t,connectionDetails:void 0,projectFilePath:"",targetScripts:[],dataSchemaProvider:"",extractTarget:5}}async getEndpointInfoFromProject(t){return{endpointType:2,projectFilePath:t,extractTarget:5,targetScripts:await this.getProjectScriptFiles(t),dataSchemaProvider:await this.getDatabaseSchemaProvider(t),serverDisplayName:"",serverName:"",databaseName:"",ownerUri:"",packageFilePath:"",connectionDetails:void 0}}async getProjectScriptFiles(t){this.logger.verbose(`Getting project script files for: ${t} - OperationId: ${this.operationId}`);let n=[];try{let i=Ao.extensions.getExtension(r.SQL_DATABASE_PROJECTS_EXTENSION_ID);i?(this.logger.verbose(`SQL Database Projects extension found, activating... - OperationId: ${this.operationId}`),n=await(await i.activate()).getProjectScriptFiles(t),this.logger.verbose(`Retrieved ${n.length} script files from project - OperationId: ${this.operationId}`)):this.logger.warn(`SQL Database Projects extension not found, cannot get project scripts - OperationId: ${this.operationId}`)}catch(i){this.logger.error(`Failed to get project script files: ${rt(i)} - OperationId: ${this.operationId}`),kr("SchemaCompare","GetDatabaseProjectScriptFiles",new Error(`Failed to get project script files: ${rt(i)}`),!0,void 0,void 0,{operationId:this.operationId})}return n}async getDatabaseSchemaProvider(t){this.logger.verbose(`Getting database schema provider for project: ${t} - OperationId: ${this.operationId}`);let n="";try{let i=Ao.extensions.getExtension(r.SQL_DATABASE_PROJECTS_EXTENSION_ID);i?(this.logger.verbose(`SQL Database Projects extension found, activating... - OperationId: ${this.operationId}`),n=await(await i.activate()).getProjectDatabaseSchemaProvider(t),this.logger.verbose(`Retrieved database schema provider: ${n||"empty"} - OperationId: ${this.operationId}`)):this.logger.warn(`SQL Database Projects extension not found, cannot get database schema provider - OperationId: ${this.operationId}`)}catch(i){this.logger.error(`Failed to get database schema provider: ${rt(i)} - OperationId: ${this.operationId}`),kr("SchemaCompare","GetDatabaseProjectSchemaProvider",new Error(`Failed to get database schema provider: ${rt(i)}`),!0,void 0,void 0,{operationId:this.operationId})}return n}isTreeNodeInfoType(t){return t instanceof hd}registerRpcHandlers(){this.registerReducer("isSqlProjectExtensionInstalled",async t=>{this.logger.verbose(`Checking if SQL Database Projects extension is installed - OperationId: ${this.operationId}`);let n=Fn("SchemaCompare","SqlProjectInstalledVerification",Uc(),{operationId:this.operationId}),i=Ao.extensions.getExtension(r.SQL_DATABASE_PROJECTS_EXTENSION_ID);return i?(i.isActive||(this.logger.verbose(`SQL Database Projects extension found but not activated, activating... - OperationId: ${this.operationId}`),await i.activate(),n.update({message:"SQL Database Projects extension activated"})),n.end("Succeeded",{operationId:this.operationId,isSqlProjectExtensionInstalled:"true"}),this.logger.info(`SQL Database Projects extension is installed and activated - OperationId: ${this.operationId}`),t.isSqlProjectExtensionInstalled=!0):(this.logger.info(`SQL Database Projects extension is not installed - OperationId: ${this.operationId}`),n.end("Succeeded",{operationId:this.operationId,isSqlProjectExtensionInstalled:"false"}),t.isSqlProjectExtensionInstalled=!1),this.updateState(t),t}),this.registerReducer("listActiveServers",t=>{this.logger.verbose(`Listing active SQL servers - OperationId: ${this.operationId}`);let n=this.getActiveServersList(),i=Object.keys(n).length;return this.logger.info(`Found ${i} active SQL server connection(s) - OperationId: ${this.operationId}`),vt("SchemaCompare","ListingActiveServers",{operationId:this.operationId,serverCount:i.toString()}),t.activeServers=n,this.updateState(t),t}),this.registerReducer("listDatabasesForActiveServer",async(t,n)=>{this.logger.info(`Listing databases for server connection: ${n.connectionUri} - OperationId: ${this.operationId}`);let i=Fn("SchemaCompare","ListingDatabasesForActiveServer",Uc(),{operationId:this.operationId}),s=[];try{s=await this.connectionMgr.listDatabases(n.connectionUri),this.logger.info(`Found ${s.length} database(s) on server - OperationId: ${this.operationId}`),i.end("Succeeded",{operationId:this.operationId,databaseCount:s.length.toString()})}catch(o){this.logger.error(`Error listing databases: ${rt(o)} - OperationId: ${this.operationId}`),console.error("Error listing databases:",o),i.endFailed(new Error(`Failed to list databases for active server: ${rt(o)}`),!0,void 0,void 0,{operationId:this.operationId})}return t.databases=s,this.updateState(t),t}),this.registerReducer("openAddNewConnectionDialog",(t,n)=>(this.logger.info(`Opening new connection dialog for ${n.endpointType} endpoint - OperationId: ${this.operationId}`),vt("SchemaCompare","AddNewConnectionDialogOpened",{operationId:this.operationId}),t.waitingForNewConnection=!0,t.pendingConnectionEndpointType=n.endpointType,this.logger.verbose(`Executing command: ${ed} - OperationId: ${this.operationId}`),Ao.commands.executeCommand(ed),t)),this.registerReducer("selectFile",async(t,n)=>{this.logger.info(`Selecting ${n.fileType} file for ${n.endpointType} endpoint - OperationId: ${this.operationId}`);let i="";n.endpoint&&(i=n.endpoint.packageFilePath||n.endpoint.projectFilePath,this.logger.verbose(`Using existing file path as starting point: ${i} - OperationId: ${this.operationId}`));let s={Files:[n.fileType]};this.logger.verbose(`Opening file dialog with filters: ${JSON.stringify(s)} - OperationId: ${this.operationId}`);let o=await WZe(i,s);if(o){this.logger.info(`Selected file: ${o} - OperationId: ${this.operationId}`);let a=n.fileType==="dacpac"?this.getEndpointInfoFromDacpac(o):await this.getEndpointInfoFromProject(o);t.auxiliaryEndpointInfo=a,n.fileType==="sqlproj"&&n.endpointType==="target"&&(this.logger.verbose(`Setting extract target to schemaObjectType for target project - OperationId: ${this.operationId}`),t.auxiliaryEndpointInfo.extractTarget=5),this.updateState(t)}else this.logger.info(`File selection canceled by user - OperationId: ${this.operationId}`);return t}),this.registerReducer("confirmSelectedSchema",async(t,n)=>(this.logger.info(`Confirming selected schema for ${n.endpointType} endpoint - OperationId: ${this.operationId}`),n.endpointType==="source"?(this.logger.info(`Setting source endpoint info from auxiliary endpoint info - OperationId: ${this.operationId}`),t.sourceEndpointInfo=t.auxiliaryEndpointInfo):(t.auxiliaryEndpointInfo&&(this.logger.info(`Setting target endpoint info from auxiliary endpoint info - OperationId: ${this.operationId}`),t.targetEndpointInfo=t.auxiliaryEndpointInfo),t.targetEndpointInfo?.endpointType===2&&(this.logger.info(`Setting target extract target to ${n.folderStructure} - OperationId: ${this.operationId}`),t.targetEndpointInfo.extractTarget=this.mapExtractTargetEnum(n.folderStructure))),this.logger.verbose(`Clearing auxiliary endpoint info - OperationId: ${this.operationId}`),t.auxiliaryEndpointInfo=void 0,this.updateState(t),t)),this.registerReducer("confirmSelectedDatabase",(t,n)=>{this.logger.info(`Confirming selected database for ${n.endpointType} endpoint: ${n.databaseName} - OperationId: ${this.operationId}`);let i=this.connectionMgr.activeConnections[n.serverConnectionUri];this.logger.verbose(`Using connection: ${n.serverConnectionUri} - OperationId: ${this.operationId}`);let s=i.credentials,o=s.user;o||(o=ps.defaultUserName,this.logger.verbose(`Using default user name: ${o} - OperationId: ${this.operationId}`));let a={endpointType:0,serverDisplayName:`${s.server} (${o})`,serverName:s.server,databaseName:n.databaseName,ownerUri:n.serverConnectionUri,packageFilePath:"",connectionDetails:void 0,connectionName:s.profileName?s.profileName:"",projectFilePath:"",targetScripts:[],dataSchemaProvider:"",extractTarget:5};return n.endpointType==="source"?(this.logger.info(`Setting as source endpoint - OperationId: ${this.operationId}`),t.sourceEndpointInfo=a):(this.logger.info(`Setting as target endpoint - OperationId: ${this.operationId}`),t.targetEndpointInfo=a),this.updateState(t),t}),this.registerReducer("setIntermediarySchemaOptions",async t=>(this.logger.verbose(`Setting intermediary schema options - OperationId: ${this.operationId}`),t.intermediaryOptionsResult=YT(t.defaultDeploymentOptionsResult),this.logger.info(`Cloned deployment options for editing - OperationId: ${this.operationId}`),this.updateState(t),t)),this.registerReducer("intermediaryIncludeObjectTypesOptionsChanged",(t,n)=>{this.logger.verbose(`Updating object type inclusion option: ${n.key} - OperationId: ${this.operationId}`);let s=t.intermediaryOptionsResult.defaultDeploymentOptions.excludeObjectTypes.value,o=s.findIndex(c=>c.toLowerCase()===n.key.toLowerCase());return o!==-1?(this.logger.info(`Removing object type from exclusion list: ${n.key} - OperationId: ${this.operationId}`),s.splice(o,1)):(this.logger.info(`Adding object type to exclusion list: ${n.key} - OperationId: ${this.operationId}`),s.push(n.key)),this.updateState(t),t}),this.registerReducer("intermediaryIncludeObjectTypesBulkChanged",(t,n)=>{this.logger.verbose(`Bulk updating object type inclusion options: ${n.keys.join(", ")} - OperationId: ${this.operationId}`);let s=t.intermediaryOptionsResult.defaultDeploymentOptions.excludeObjectTypes.value;return n.keys.forEach(o=>{let a=s.findIndex(l=>l.toLowerCase()===o.toLowerCase()),c=a!==-1;n.checked?c&&s.splice(a,1):c||s.push(o)}),this.logger.info(`Bulk changed ${n.keys.length} object types to ${n.checked?"included":"excluded"} - OperationId: ${this.operationId}`),this.updateState(t),t}),this.registerReducer("confirmSchemaOptions",async(t,n)=>{this.logger.info(`Confirming schema comparison options - OperationId: ${this.operationId}`),t.defaultDeploymentOptionsResult.defaultDeploymentOptions=YT(t.intermediaryOptionsResult.defaultDeploymentOptions),this.logger.verbose(`Applied intermediary options to default deployment options - OperationId: ${this.operationId}`),t.intermediaryOptionsResult=void 0,this.updateState(t);let i={title:ps.Yes},s={title:ps.No,isCloseAffordance:!0},o=Fn("SchemaCompare","OptionsChanged",Uc(),{operationId:this.operationId});return this.logger.verbose(`Sent telemetry event for options changed - OperationId: ${this.operationId}`),n.optionsChanged?(this.logger.info(`Options were changed, prompting user to run comparison again - OperationId: ${this.operationId}`),Ao.window.showInformationMessage(ps.optionsChangedMessage,{modal:!0},i,s).then(async a=>{if(a.title===ps.Yes){this.logger.info(`User chose to run comparison with new options - OperationId: ${this.operationId}`),o.update({operationId:this.operationId,message:"User chose to run comparison with new options"});let c={sourceEndpointInfo:t.sourceEndpointInfo,targetEndpointInfo:t.targetEndpointInfo,deploymentOptions:t.defaultDeploymentOptionsResult.defaultDeploymentOptions};await this.schemaCompare(c,t),o.end("Succeeded",{operationId:this.operationId,message:"Comparison run with new options"})}else this.logger.info(`User chose not to run comparison with new options - OperationId: ${this.operationId}`),o.end("Succeeded",{operationId:this.operationId,message:"User chose not to run comparison"})})):(this.logger.info(`No options were changed - OperationId: ${this.operationId}`),o.end("Succeeded",{operationId:this.operationId,message:"No options were changed"})),t}),this.registerReducer("intermediaryGeneralOptionsChanged",(t,n)=>{this.logger.verbose(`Changing general option: ${n.key} - OperationId: ${this.operationId}`);let i=t.intermediaryOptionsResult.defaultDeploymentOptions.booleanOptionsDictionary,s=i[n.key].value;return i[n.key].value=!s,this.logger.info(`Changed option ${n.key} from ${s} to ${!s} - OperationId: ${this.operationId}`),this.updateState(t),t}),this.registerReducer("intermediaryGeneralOptionsBulkChanged",(t,n)=>{this.logger.verbose(`Bulk changing general options: ${n.keys.join(", ")} - OperationId: ${this.operationId}`);let i=t.intermediaryOptionsResult.defaultDeploymentOptions.booleanOptionsDictionary;return n.keys.forEach(s=>{i[s]&&(i[s].value=n.checked)}),this.logger.info(`Bulk changed ${n.keys.length} options to ${n.checked} - OperationId: ${this.operationId}`),this.updateState(t),t}),this.registerReducer("switchEndpoints",async(t,n)=>{this.logger.info(`Switching source and target endpoints - OperationId: ${this.operationId}`);let i=Date.now(),s=Fn("SchemaCompare","Switch",Uc(),{startTime:i.toString(),operationId:this.operationId,oldSourceType:as(n.newSourceEndpointInfo.endpointType),oldTargetType:as(n.newTargetEndpointInfo.endpointType)}),o=as(n.newSourceEndpointInfo.endpointType),a=as(n.newTargetEndpointInfo.endpointType);return this.logger.verbose(`New source endpoint type: ${o} - OperationId: ${this.operationId}`),this.logger.verbose(`New target endpoint type: ${a} - OperationId: ${this.operationId}`),t.sourceEndpointInfo=n.newSourceEndpointInfo,t.targetEndpointInfo=n.newTargetEndpointInfo,t.endpointsSwitched=!0,this.updateState(t),this.logger.info(`Successfully switched endpoints - OperationId: ${this.operationId}`),s.end("Succeeded",{elapsedTime:(Date.now()-i).toString(),operationId:this.operationId,newSourceType:o,newTargetType:a}),t}),this.registerReducer("compare",async(t,n)=>await this.schemaCompare(n,t)),this.registerReducer("generateScript",async(t,n)=>{this.logger.info(`Generating script for schema changes with operation ID: ${this.operationId}`);let i=Date.now(),s=Fn("SchemaCompare","GenerateScript",Uc(),{startTime:i.toString(),operationId:this.operationId,sourceType:as(t.sourceEndpointInfo?.endpointType),targetType:as(t.targetEndpointInfo?.endpointType)});this.logger.verbose(`Starting script generation - OperationId: ${this.operationId}`);let o=await XZe(this.operationId,1,n,this.schemaCompareService);return!o||!o.success?(this.logger.error(`Failed to generate script: ${o?.errorMessage||"Unknown error"} - OperationId: ${this.operationId}`),s.endFailed(new Error(`Failed to generate script: ${o?.errorMessage||"Unknown error"}`),!0,void 0,void 0,{elapsedTime:(Date.now()-i).toString(),operationId:this.operationId}),Ao.window.showErrorMessage(ps.generateScriptErrorMessage(o?.errorMessage))):this.logger.info(`Successfully generated script - OperationId: ${this.operationId}`),s.end("Succeeded",{elapsedTime:(Date.now()-i).toString(),operationId:this.operationId}),t.generateScriptResultStatus=o,t}),this.registerReducer("publishChanges",async(t,n)=>{this.logger.info(`Publishing changes requested with operation ID: ${this.operationId}`),this.logger.verbose(`Target endpoint type: ${as(t.targetEndpointInfo.endpointType)} - OperationId: ${this.operationId}`);let i=Date.now(),s=Fn("SchemaCompare","Publish",Uc(),{startTime:i.toString(),operationId:this.operationId,sourceType:as(t.sourceEndpointInfo.endpointType),targetType:as(t.targetEndpointInfo.endpointType)}),o=ps.Yes;if(await Ao.window.showWarningMessage(ps.areYouSureYouWantToUpdateTheTarget,{modal:!0},o)!==o)return this.logger.info(`User canceled publishing changes - OperationId: ${this.operationId}`),s.end("Canceled",{elapsedTime:(Date.now()-i).toString(),operationId:this.operationId,sourceType:as(t.sourceEndpointInfo.endpointType),targetType:as(t.targetEndpointInfo.endpointType)}),t;if(t.schemaCompareResult&&t.schemaCompareResult.differences){let l=t.schemaCompareResult.differences.filter(p=>p.included),u={0:0,2:0,1:0};l.forEach(p=>{u[p.updateAction]++});let d={numDiffsDeleted:u[0],numDiffsAdded:u[2],numDiffsChanged:u[1]};s.update({operationId:this.operationId,updateActionSummary:JSON.stringify(d)})}this.logger.info(`Starting publish operation to ${as(t.targetEndpointInfo.endpointType)} - OperationId: ${this.operationId}`);let c;try{switch(t.targetEndpointInfo.endpointType){case 0:this.logger.info(`Publishing changes to database ${t.targetEndpointInfo.databaseName} - OperationId: ${this.operationId}`),s.update({publishType:"Database",OperationId:this.operationId}),c=await aSe(this.operationId,0,n,this.schemaCompareService),s.end("Succeeded",{elapsedTime:(Date.now()-i).toString(),operationId:this.operationId,targetType:as(t.targetEndpointInfo.endpointType)});break;case 2:this.logger.info(`Publishing changes to project ${t.targetEndpointInfo.projectFilePath} - OperationId: ${this.operationId}`),s.update({publishType:"Project",OperationId:this.operationId}),c=await cSe(this.operationId,{targetProjectPath:t.targetEndpointInfo.projectFilePath,targetFolderStructure:t.targetEndpointInfo.extractTarget,taskExecutionMode:0},this.schemaCompareService),s.end("Succeeded",{elapsedTime:(Date.now()-i).toString(),operationId:this.operationId,targetType:as(t.targetEndpointInfo.endpointType)});break;case 1:default:let l=`Unsupported SchemaCompareEndpointType: ${as(t.targetEndpointInfo.endpointType)}`;throw this.logger.error(`${l} - OperationId: ${this.operationId}`),s.endFailed(new Error(l),!0,void 0,void 0,{elapsedTime:(Date.now()-i).toString(),operationId:this.operationId,publishType:"Invalid",targetType:as(t.targetEndpointInfo.endpointType)}),new Error(l)}}catch(l){return this.logger.error(`Exception during publish operation: ${rt(l)} - OperationId: ${this.operationId}`),s.endFailed(new Error(`Exception during publish operation: ${rt(l)}`),!0,void 0,void 0,{elapsedTime:(Date.now()-i).toString(),operationId:this.operationId,targetType:as(t.targetEndpointInfo.endpointType)}),Ao.window.showErrorMessage(ps.schemaCompareApplyFailed(rt(l))),t}return!c||!c.success||c.errorMessage?(this.logger.error(`Publish operation failed: ${c?.errorMessage||"Unknown error"} - OperationId: ${this.operationId}`),s.endFailed(void 0,!1,void 0,void 0,{errorMessage:c?.errorMessage,operationId:this.operationId,targetType:as(t.targetEndpointInfo.endpointType)}),Ao.window.showErrorMessage(ps.schemaCompareApplyFailed(c?.errorMessage)),t):(s.end("Succeeded",{endTime:Date.now().toString(),operationId:this.operationId,targetType:as(t.targetEndpointInfo.endpointType)}),t)}),this.registerReducer("publishDatabaseChanges",async(t,n)=>{this.logger.info(`Publishing database changes with operation ID: ${this.operationId}`);let i=Date.now(),s=Fn("SchemaCompare","PublishDatabaseChanges",Uc(),{startTime:i.toString(),operationId:this.operationId});try{let o=await aSe(this.operationId,0,n,this.schemaCompareService);o.success?(this.logger.info(`Successfully published database changes - OperationId: ${this.operationId}`),s.end("Succeeded",{elapsedTime:(Date.now()-i).toString(),operationId:this.operationId})):(this.logger.error(`Failed to publish database changes: ${o.errorMessage||"Unknown error"} - OperationId: ${this.operationId}`),s.endFailed(new Error(`Failed to publish database changes: ${o.errorMessage}`),!0,void 0,void 0,{elapsedTime:(Date.now()-i).toString(),operationId:this.operationId})),t.publishDatabaseChangesResultStatus=o}catch(o){this.logger.error(`Exception during database publish: ${rt(o)} - OperationId: ${this.operationId}`),s.endFailed(new Error(`An exception occurred during database publish: ${rt(o)}`),!0,void 0,void 0,{elapsedTime:(Date.now()-i).toString(),operationId:this.operationId})}return t}),this.registerReducer("publishProjectChanges",async(t,n)=>{this.logger.info(`Publishing project changes with operation ID: ${this.operationId}`),this.logger.verbose(`Target project path: ${n.targetProjectPath} - OperationId: ${this.operationId}`);let i=Date.now(),s=Fn("SchemaCompare","PublishProjectChanges",Uc(),{startTime:i.toString(),operationId:this.operationId});try{let o=await cSe(this.operationId,n,this.schemaCompareService);o.success?(this.logger.info(`Successfully published project changes - OperationId: ${this.operationId}`),s.end("Succeeded",{elapsedTime:(Date.now()-i).toString(),operationId:this.operationId})):(this.logger.error(`Failed to publish project changes: ${o.errorMessage||"Unknown error"} - OperationId: ${this.operationId}`),s.endFailed(new Error(`Failed to publish project changes: ${o.errorMessage}`),!0,void 0,void 0,{elapsedTime:(Date.now()-i).toString(),operationId:this.operationId})),t.schemaComparePublishProjectResult=o}catch(o){this.logger.error(`Exception during project publish: ${rt(o)} - OperationId: ${this.operationId}`),s.endFailed(new Error(`An exception occurred during project publish: ${rt(o)}`),!0,void 0,void 0,{elapsedTime:(Date.now()-i).toString(),operationId:this.operationId})}return t}),this.registerReducer("resetOptions",async t=>{this.logger.info(`Resetting schema compare options to defaults - OperationId: ${this.operationId}`);let n=Date.now(),i=Fn("SchemaCompare","ResetOptions",Uc(),{startTime:n.toString(),operationId:this.operationId});try{let s=await JZe(this.schemaCompareService);this.logger.verbose(`Retrieved default options from schema compare service - OperationId: ${this.operationId}`),i.end("Succeeded",{elapsedTime:(Date.now()-n).toString(),operationId:this.operationId}),t.intermediaryOptionsResult=YT(s),this.logger.info(`Reset options to defaults - OperationId: ${this.operationId}`),this.updateState(t)}catch(s){this.logger.error(`Failed to reset options: ${rt(s)} - OperationId: ${this.operationId}`),i.endFailed(new Error(`Failed to reset options: ${rt(s)}`),!0,void 0,void 0,{elapsedTime:(Date.now()-n).toString(),operationId:this.operationId})}return t}),this.registerReducer("includeExcludeNode",async(t,n)=>{let i=n.diffEntry,s=this.formatEntryName(i.sourceValue?i.sourceValue:i.targetValue);this.logger.info(`${n.includeRequest?"Including":"Excluding"} node: ${s} (ID: ${n.id}) - OperationId: ${this.operationId}`);let o=Date.now(),a=Fn("SchemaCompare","IncludeExcludeNode",Uc(),{startTime:o.toString(),operationId:this.operationId,requestType:n.includeRequest?"Include":"Exclude",diffEntryType:n.diffEntry.name,diffActionType:this.getSchemaUpdateActionString(n.diffEntry.updateAction)}),c=await ZZe(this.operationId,0,n,this.schemaCompareService);if(c.success)this.logger.info(`Successfully ${n.includeRequest?"included":"excluded"} node with ${c.affectedDependencies.length} affected dependencies - OperationId: ${this.operationId}`),a.end("Succeeded",{elapsedTime:(Date.now()-o).toString(),operationId:this.operationId}),t.schemaCompareIncludeExcludeResult=c,t.schemaCompareResult&&(t.schemaCompareResult.differences[n.id].included=n.includeRequest,this.logger.verbose(`Updating affected dependencies in the UI state - OperationId: ${this.operationId}`),c.affectedDependencies.forEach(l=>{let u=t.schemaCompareResult.differences.findIndex(d=>d.sourceValue===l.sourceValue&&d.targetValue===l.targetValue&&d.updateAction===l.updateAction&&d.name===l.name);u!==-1?(this.logger.verbose(`Updated dependency at index ${u} to included=${n.includeRequest} - OperationId: ${this.operationId}`),t.schemaCompareResult.differences[u].included=n.includeRequest):this.logger.warn(`Could not find dependency in schema compare results - OperationId: ${this.operationId}`)})),this.updateState(t);else if(this.logger.warn(`Failed to ${n.includeRequest?"include":"exclude"} node: ${c.errorMessage||"Unknown error"} - OperationId: ${this.operationId}`),c.blockingDependencies){let l=this.formatEntryName(i.sourceValue?i.sourceValue:i.targetValue),u=c.blockingDependencies.map(p=>this.formatEntryName(p.sourceValue?p.sourceValue:p.targetValue)).filter(p=>p!=="");this.logger.warn(`Operation blocked by dependencies: ${u.join(", ")} - OperationId: ${this.operationId}`),a.endFailed(new Error("Operation was blocked by dependencies"),!0,void 0,void 0,{elapsedTime:(Date.now()-o).toString(),operationId:this.operationId,diffEntryType:n.diffEntry.name,diffActionType:this.getSchemaUpdateActionString(n.diffEntry.updateAction)});let d="";u.length>0?d=n.includeRequest?ps.cannotIncludeEntryWithBlockingDependency(l,u.join(", ")):ps.cannotExcludeEntryWithBlockingDependency(l,u.join(", ")):d=n.includeRequest?ps.cannotIncludeEntry(l):ps.cannotExcludeEntry(l),Ao.window.showWarningMessage(d)}else Ao.window.showWarningMessage(c.errorMessage),a.endFailed(new Error(`Failed to ${n.includeRequest?"include":"exclude"} node: ${c.errorMessage||"Unknown error"}`),!0,void 0,void 0,{elapsedTime:(Date.now()-o).toString(),operationId:this.operationId,diffEntryType:n.diffEntry.name,diffActionType:this.getSchemaUpdateActionString(n.diffEntry.updateAction)});return t}),this.registerReducer("includeExcludeAllNodes",async(t,n)=>{this.logger.info(`${n.includeRequest?"Including":"Excluding"} all nodes - OperationId: ${this.operationId}`),t.isIncludeExcludeAllOperationInProgress=!0,this.updateState(t);let i=Date.now(),s=Fn("SchemaCompare","IncludeExcludeAllNodes",Uc(),{startTime:i.toString(),operationId:this.operationId,requestType:n.includeRequest?"Include all":"Exclude all"});try{let o=await eet(this.operationId,0,n,this.schemaCompareService);if(this.state.isIncludeExcludeAllOperationInProgress=!1,o.success){let a=o.allIncludedOrExcludedDifferences.length;this.logger.info(`Successfully ${n.includeRequest?"included":"excluded"} all nodes (${a} differences) - OperationId: ${this.operationId}`),t.schemaCompareResult.differences=o.allIncludedOrExcludedDifferences,s.end("Succeeded",{elapsedTime:(Date.now()-i).toString(),operationId:this.operationId})}else this.logger.error(`Failed to ${n.includeRequest?"include":"exclude"} all nodes: ${o.errorMessage||"Unknown error"} - OperationId: ${this.operationId}`),s.endFailed(new Error(`Failed to ${n.includeRequest?"include":"exclude"} all nodes: ${o.errorMessage||"Unknown error"}`),!0,void 0,void 0,{elapsedTime:(Date.now()-i).toString(),operationId:this.operationId})}catch(o){this.logger.error(`Exception during ${n.includeRequest?"include":"exclude"} all operation: ${rt(o)} - OperationId: ${this.operationId}`),s.endFailed(new Error(rt(o)),!0,void 0,void 0,{elapsedTime:(Date.now()-i).toString(),operationId:this.operationId}),this.state.isIncludeExcludeAllOperationInProgress=!1}return this.updateState(t),t}),this.registerReducer("openScmp",async t=>{this.logger.info(`Opening schema comparison (.scmp) file - OperationId: ${this.operationId}`);let n=await KZe();if(!n)return this.logger.info(`File selection canceled by user - OperationId: ${this.operationId}`),t;this.logger.info(`Selected file: ${n} - OperationId: ${this.operationId}`);let i=Date.now(),s=Fn("SchemaCompare","OpenScmp",Uc(),{startTime:i.toString(),operationId:this.operationId});this.logger.verbose(`Opening schema comparison from file - OperationId: ${this.operationId}`);let o=await tet(n,this.schemaCompareService);return!o||!o.success?(this.logger.error(`Failed to open schema comparison file: ${o?.errorMessage||"Unknown error"} - OperationId: ${this.operationId}`),s.endFailed(new Error(o?.errorMessage||"Unknown error"),!0,void 0,void 0,{elapsedTime:(Date.now()-i).toString(),errorMessage:o?.errorMessage,operationId:this.operationId}),Ao.window.showErrorMessage(ps.openScmpErrorMessage(o?.errorMessage)),t):(this.logger.info(`Successfully opened schema comparison file - OperationId: ${this.operationId}`),t.sourceEndpointInfo=await this.constructEndpointInfo(o.sourceEndpointInfo,"source"),t.targetEndpointInfo=await this.constructEndpointInfo(o.targetEndpointInfo,"target"),t.defaultDeploymentOptionsResult.defaultDeploymentOptions=o.deploymentOptions,t.intermediaryOptionsResult=YT(t.defaultDeploymentOptionsResult),t.scmpSourceExcludes=o.excludedSourceElements,t.scmpTargetExcludes=o.excludedTargetElements,t.sourceTargetSwitched=o.originalTargetName!==t.targetEndpointInfo.databaseName,t.schemaCompareResult=void 0,s.end("Succeeded",{operationId:this.operationId,elapsedTime:(Date.now()-i).toString(),sourceType:as(t.sourceEndpointInfo.endpointType),targetType:as(t.targetEndpointInfo.endpointType)}),t.schemaCompareOpenScmpResult=o,this.updateState(t),t)}),this.registerReducer("saveScmp",async t=>{this.logger.info(`Saving schema comparison (.scmp) file - OperationId: ${this.operationId}`);let n=await QZe();if(!n)return this.logger.info(`Save file operation canceled by user - OperationId: ${this.operationId}`),t;this.logger.info(`Saving schema comparison to: ${n} - OperationId: ${this.operationId}`);let i=this.convertExcludesToObjectIds(t.originalSourceExcludes),s=this.convertExcludesToObjectIds(t.originalTargetExcludes);this.logger.verbose(`Prepared ${i.length} source excludes and ${s.length} target excludes - OperationId: ${this.operationId}`);let o=Date.now(),a=Fn("SchemaCompare","SaveScmp",Uc(),{startTime:o.toString(),operationId:this.operationId,sourceType:as(t.sourceEndpointInfo?.endpointType),targetType:as(t.targetEndpointInfo?.endpointType)});this.logger.verbose(`Calling saveScmp service - OperationId: ${this.operationId}`);let c=await ret(t.sourceEndpointInfo,t.targetEndpointInfo,0,t.defaultDeploymentOptionsResult.defaultDeploymentOptions,n,i,s,this.schemaCompareService);return!c||!c.success?(this.logger.error(`Failed to save schema comparison file: ${c?.errorMessage||"Unknown error"} - OperationId: ${this.operationId}`),a.endFailed(new Error(`Failed to save schema comparison file: ${c?.errorMessage||"Unknown error"}`),!0,void 0,void 0,{elapsedTime:(Date.now()-o).toString(),errorMessage:c?.errorMessage,operationId:this.operationId}),Ao.window.showErrorMessage(ps.saveScmpErrorMessage(c?.errorMessage))):this.logger.info(`Successfully saved schema comparison file - OperationId: ${this.operationId}`),a.end("Succeeded",{operationId:this.operationId,elapsedTime:(Date.now()-o).toString()}),t.saveScmpResultStatus=c,this.updateState(t),t}),this.registerReducer("cancel",async t=>{this.logger.info(`Cancelling schema comparison operation with ID: ${this.operationId}`);let n=Date.now(),i=Fn("SchemaCompare","Cancel",Uc(),{startTime:n.toString(),operationId:this.operationId,sourceType:as(t.sourceEndpointInfo?.endpointType),targetType:as(t.targetEndpointInfo?.endpointType)});try{let s=await net(this.operationId,this.schemaCompareService);if(!s||!s.success)return this.logger.error(`Failed to cancel operation: ${s?.errorMessage||"Unknown error"} - OperationId: ${this.operationId}`),i.endFailed(new Error(`Failed to cancel: ${s?.errorMessage||"unknown error"}`),!0,void 0,void 0,{elapsedTime:(Date.now()-n).toString(),operationId:this.operationId,errorMessage:s?.errorMessage}),Ao.window.showErrorMessage(ps.cancelErrorMessage(s?.errorMessage)),t;this.logger.info(`Successfully cancelled schema comparison operation - OperationId: ${this.operationId}`),i.end("Succeeded",{elapsedTime:(Date.now()-n).toString(),operationId:this.operationId}),t.isComparisonInProgress=!1,t.cancelResultStatus=s,this.updateState(t)}catch(s){this.logger.error(`Exception during cancel operation: ${rt(s)} - OperationId: ${this.operationId}`),i.endFailed(new Error(rt(s)),!0,void 0,void 0,{elapsedTime:(Date.now()-n).toString(),operationId:this.operationId})}return t})}formatEntryName(t){return(0,iet.isNullOrUndefined)(t)||t.length===0?"":t.join(".")}mapExtractTargetEnum(t){switch(t){case"File":return 1;case"Flat":return 2;case"Object Type":return 3;case"Schema":return 4;case"Schema/Object Type":default:return 5}}findNewConnections(t,n){let i=[];for(let s in n)s in t||i.push(s);return i}async autoSelectNewConnection(t,n){this.logger.info(`Auto-selecting new connection for ${n} endpoint: ${t} - OperationId: ${this.operationId}`);try{this.logger.verbose(`Retrieving databases for connection: ${t} - OperationId: ${this.operationId}`);let i=await this.connectionMgr.listDatabases(t);if(this.logger.verbose(`Found ${i.length} databases on server - OperationId: ${this.operationId}`),i.length>0){let s=i[0];this.logger.info(`Auto-selecting database: ${s} - OperationId: ${this.operationId}`);let a=this.connectionMgr.activeConnections[t]?.credentials;if(a){this.logger.verbose(`Creating endpoint info from connection profile: ${a.server} - OperationId: ${this.operationId}`);let c=a.user;c||(c=ps.defaultUserName,this.logger.verbose(`Using default user name: ${c} - OperationId: ${this.operationId}`));let l={endpointType:0,serverDisplayName:`${a.server} (${c})`,serverName:a.server,databaseName:s,ownerUri:t,packageFilePath:"",connectionDetails:void 0,connectionName:a.profileName?a.profileName:"",projectFilePath:"",targetScripts:[],dataSchemaProvider:"",extractTarget:5};n==="source"?(this.logger.info(`Setting connection as source endpoint - OperationId: ${this.operationId}`),this.state.sourceEndpointInfo=l):(this.logger.info(`Setting connection as target endpoint - OperationId: ${this.operationId}`),this.state.targetEndpointInfo=l),this.state.databases=i}else this.logger.warn(`No connection profile found for connection URI: ${t} - OperationId: ${this.operationId}`)}else this.logger.warn(`No databases found for connection: ${t} - OperationId: ${this.operationId}`)}catch(i){this.logger.error(`Error auto-selecting new connection: ${rt(i)} - OperationId: ${this.operationId}`)}finally{this.logger.verbose(`Resetting waiting state - OperationId: ${this.operationId}`),this.state.waitingForNewConnection=!1,this.state.pendingConnectionEndpointType=null}}getActiveServersList(){let t={},n=this.connectionMgr.activeConnections;return Object.keys(n).forEach(i=>{let s=n[i].credentials;t[i]={profileName:s.profileName??"",server:s.server}}),t}async schemaCompare(t,n){this.logger.info(`Starting schema comparison with operation ID: ${this.operationId}`),this.logger.verbose(`Source endpoint type: ${as(t.sourceEndpointInfo.endpointType)} - OperationId: ${this.operationId}`),this.logger.verbose(`Target endpoint type: ${as(t.targetEndpointInfo.endpointType)} - OperationId: ${this.operationId}`),n.isComparisonInProgress=!0,this.updateState(n);let i=Date.now(),s=Fn("SchemaCompare","Compare",Uc(),{startTime:i.toString(),operationId:this.operationId,sourceType:as(t.sourceEndpointInfo.endpointType),targetType:as(t.targetEndpointInfo.endpointType)});t.sourceEndpointInfo.endpointType===2&&(this.logger.logDebug(`Getting project script files for source: ${t.sourceEndpointInfo.projectFilePath} - OperationId: ${this.operationId}`),t.sourceEndpointInfo.targetScripts=await this.getProjectScriptFiles(t.sourceEndpointInfo.projectFilePath)),t.targetEndpointInfo.endpointType===2&&(this.logger.logDebug(`Getting project script files for target: ${t.targetEndpointInfo.projectFilePath} - OperationId: ${this.operationId}`),t.targetEndpointInfo.targetScripts=await this.getProjectScriptFiles(t.targetEndpointInfo.projectFilePath));let o={},a=n.defaultDeploymentOptionsResult.defaultDeploymentOptions.booleanOptionsDictionary;for(let y in a)a.hasOwnProperty(y)&&(o[y]=a[y].value.toString());s.update({operationId:this.operationId,generalOptionsConfig:JSON.stringify(o)});let c=n.defaultDeploymentOptionsResult.defaultDeploymentOptions.objectTypesDictionary,l={};for(let y in c)c.hasOwnProperty(y)&&(l[y]="Included");n.defaultDeploymentOptionsResult.defaultDeploymentOptions.excludeObjectTypes.value.forEach(y=>{let v=Object.keys(c).find(_=>_.toLowerCase()===y.toLowerCase());v&&(l[v]="Excluded")}),s.update({operationId:this.operationId,includeObjectTypesConfig:JSON.stringify(l)}),this.logger.info(`Executing schema comparison with operation ID: ${this.operationId}`);let d=await YZe(this.operationId,0,t,this.schemaCompareService);if(n.isComparisonInProgress=!1,!d||!d.success)return this.logger.error(`Schema comparison failed: ${d?.errorMessage||"Unknown error"} - OperationId: ${this.operationId}`),s.endFailed(new Error(`Schema comparison failed: ${d?.errorMessage||"Unknown error"}`),!0,void 0,void 0,{elapsedTime:(Date.now()-i).toString(),operationId:this.operationId}),Ao.window.showErrorMessage(ps.compareErrorMessage(d?.errorMessage)),n;let p=this.countTargetObjectTypeFrequencies(d.differences),m={};for(let y in p)p.hasOwnProperty(y)&&(m[y]=p[y]);s.update({operationId:this.operationId,compareObjectTypeSummary:JSON.stringify(m)}),this.logger.info(`Schema comparison completed successfully with ${d.differences?.length||0} differences found - OperationId: ${this.operationId}`),s.end("Succeeded",{elapsedTime:(Date.now()-i).toString(),operationId:this.operationId});let f=this.getAllObjectTypeDifferences(d);return this.logger.verbose(`Filtered to ${f.length} object type differences - OperationId: ${this.operationId}`),d.differences=f,n.schemaCompareResult=d,n.endpointsSwitched=!1,this.updateState(n),n}async constructEndpointInfo(t,n){let i,s;if(t&&t.endpointType===0){let o=t.connectionDetails.options;i=this.connectionMgr.getUriForScmpConnection(o);let a=!!i;i||(i=d$().toString(),a=await this.connectionMgr.connect(i,o),a||delete this.connectionMgr.activeConnections[i]);let l=this.connectionMgr.activeConnections[i]?.credentials;a&&i&&l?s={endpointType:0,serverDisplayName:`${o.server} (${l.user||ps.defaultUserName})`,serverName:o.server,databaseName:o.database,ownerUri:i,packageFilePath:"",connectionDetails:void 0,connectionName:l.profileName?l.profileName:"",projectFilePath:"",targetScripts:[],dataSchemaProvider:"",extractTarget:5}:s={endpointType:0,serverDisplayName:"",serverName:"",databaseName:"",ownerUri:"",packageFilePath:"",connectionDetails:void 0,connectionName:"",projectFilePath:"",targetScripts:[],dataSchemaProvider:"",extractTarget:5}}else t.endpointType===2?s={endpointType:t.endpointType,packageFilePath:"",serverDisplayName:"",serverName:"",databaseName:"",ownerUri:"",connectionDetails:void 0,projectFilePath:t.projectFilePath,targetScripts:[],dataSchemaProvider:t.dataSchemaProvider,extractTarget:t.extractTarget}:s={endpointType:t.endpointType===0?0:1,serverDisplayName:"",serverName:"",databaseName:"",ownerUri:"",packageFilePath:t.packageFilePath,connectionDetails:void 0};return s}getAllObjectTypeDifferences(t){this.logger.verbose(`Filtering differences from schema comparison result - OperationId: ${this.operationId}`);let n=[],i=t.differences;return i?(this.logger.verbose(`Processing ${i.length} total differences - OperationId: ${this.operationId}`),i.forEach(s=>{s.differenceType===0&&(s.sourceValue!==null&&s.sourceValue.length>0||s.targetValue!==null&&s.targetValue.length>0)&&(n.push(s),this.logger.logDebug(`Including difference: ${s.name} with update action ${s.updateAction} - OperationId: ${this.operationId}`))}),this.logger.info(`Found ${n.length} object type differences out of ${i.length} total differences - OperationId: ${this.operationId}`),n):(this.logger.warn(`No differences found in schema comparison result - OperationId: ${this.operationId}`),n)}convertExcludesToObjectIds(t){let n=[];return t.forEach(i=>{n.push({nameParts:i.sourceValue?i.sourceValue:i.targetValue,sqlObjectType:`Microsoft.Data.Tools.Schema.Sql.SchemaModel.${i.name}`})}),n}getSchemaUpdateActionString(t){switch(t){case 0:return"Delete";case 1:return"Change";case 2:return"Add";default:return""}}countTargetObjectTypeFrequencies(t){let n={};return t.forEach(i=>{let o=this.extractObjectTypeFromSourceType(i.sourceObjectType||i.targetObjectType)||"Unknown";n[o]=(n[o]||0)+1}),n}extractObjectTypeFromSourceType(t){if(!t)return;let n=t.split(".");return n[n.length-1]||t}};var aet=ge(require("vscode"));var No=ge(require("vscode"));var Zm=ge(lL()),eh;(d=>{let r;(v=>(v[v.CASCADE=0]="CASCADE",v[v.NO_ACTION=1]="NO_ACTION",v[v.SET_NULL=2]="SET_NULL",v[v.SET_DEFAULT=3]="SET_DEFAULT"))(r=d.OnAction||={});let e;(y=>(y[y.Created=0]="Created",y[y.Updated=1]="Updated",y[y.Dropped=2]="Dropped"))(e=d.SchemaDesignerReportTableState||={});let t;(m=>m.type=new Zm.RequestType("publishSession"))(t=d.PublishSessionRequest||={});let n;(m=>m.type=new Zm.NotificationType("closeDesigner"))(n=d.CloseSchemaDesignerNotification||={});let i;(m=>m.type=new Zm.NotificationType("openInEditorWithConnection"))(i=d.OpenInEditorWithConnectionNotification||={});let s;(m=>m.type=new Zm.NotificationType("openInEditor"))(s=d.OpenInEditorNotification||={});let o;(m=>m.type=new Zm.NotificationType("copyToClipboard"))(o=d.CopyToClipboardNotification||={});let a;(m=>m.type=new Zm.RequestType("getReport"))(a=d.GetReportWebviewRequest||={});let c;(m=>m.type=new Zm.NotificationType("exportToFile"))(c=d.ExportToFileNotification||={});let l;(m=>m.type=new Zm.RequestType("getDefinition"))(l=d.GetDefinitionRequest||={});let u;(m=>m.type=new Zm.RequestType("initializeSchemaDesigner"))(u=d.InitializeSchemaDesignerRequest||={})})(eh||={});var oet=require("os");function set(){return No.workspace.getConfiguration().get(dse)}var IY=class extends Uo{constructor(t,n,i,s,o,a,c,l,u,d){super(t,n,"schemaDesigner","schemaDesigner",{enableExpandCollapseButtons:set()},{title:c,viewColumn:No.ViewColumn.One,iconPath:{light:No.Uri.joinPath(t.extensionUri,"media","designSchema_light.svg"),dark:No.Uri.joinPath(t.extensionUri,"media","designSchema_dark.svg")},showRestorePromptAfterClose:!1});this.mainController=i;this.schemaDesignerService=s;this.connectionString=o;this.accessToken=a;this.databaseName=c;this.schemaDesignerCache=l;this.treeNode=u;this.connectionUri=d;this._key=`${this.connectionString}-${this.databaseName}`,this.setupRequestHandlers(),this.setupConfigurationListener()}_sessionId="";_key="";schemaDesignerDetails=void 0;setupRequestHandlers(){this.onRequest(eh.InitializeSchemaDesignerRequest.type,async()=>{let t=Fn("SchemaDesigner","Initialize",void 0,void 0);try{let n;return this.schemaDesignerCache.has(this._key)?n=this.updateCacheItem(void 0,!0).schemaDesignerDetails:(n=await this.schemaDesignerService.createSession({connectionString:this.connectionString,accessToken:this.accessToken,databaseName:this.databaseName}),this.schemaDesignerCache.set(this._key,{schemaDesignerDetails:n,isDirty:!1})),this.schemaDesignerDetails=n,this._sessionId=n.sessionId,t.end("Succeeded",void 0,{tableCount:n?.schema?.tables?.length}),n}catch(n){throw t.endFailed(n,!1),n}}),this.onRequest(eh.GetDefinitionRequest.type,async t=>{let n=Fn("SchemaDesigner","GetDefinition",void 0,{tableCount:t.updatedSchema.tables.length.toString()}),i=await this.schemaDesignerService.getDefinition({updatedSchema:t.updatedSchema,sessionId:this._sessionId});return n.end("Succeeded",void 0,{tableCount:t.updatedSchema.tables.length}),this.updateCacheItem(t.updatedSchema,!0),i}),this.onRequest(eh.GetReportWebviewRequest.type,async t=>{let n=Fn("SchemaDesigner","GetReport",void 0,{tableCount:t.updatedSchema.tables.length.toString()});try{let i=await No.window.withProgress({location:No.ProgressLocation.Notification,title:Fh.GeneratingReport,cancellable:!1},async()=>{let s=await this.schemaDesignerService.getReport({updatedSchema:t.updatedSchema,sessionId:this._sessionId});return this.updateCacheItem(t.updatedSchema,!0),{report:s}});return n.end("Succeeded",{hasSchemaChanged:i.report?.hasSchemaChanged?.toString(),possibleDataLoss:i.report?.dacReport?.possibleDataLoss?.toString(),requireTableRecreation:i.report.dacReport?.requireTableRecreation?.toString(),hasWarnings:i.report?.dacReport?.hasWarnings?.toString()},{tableCount:t.updatedSchema?.tables?.length}),i}catch(i){return n.endFailed(i,!1),{error:i.toString()}}}),this.onRequest(eh.PublishSessionRequest.type,async t=>{let n=Fn("SchemaDesigner","PublishSession",void 0);try{return await this.schemaDesignerService.publishSession({sessionId:this._sessionId}),n.end("Succeeded",void 0,{tableCount:t.schema?.tables?.length}),this.updateCacheItem(void 0,!1),{success:!0}}catch(i){return n.endFailed(i,!1),{success:!1,error:i.toString()}}}),this.onNotification(eh.ExportToFileNotification.type,async t=>{let n=No.workspace.workspaceFolders?.[0]?.uri??No.Uri.file((0,oet.homedir)()),i=await No.window.showSaveDialog({filters:{[t.format]:[t.format]},defaultUri:await lH(n,`schema-${this.databaseName}`,t.format),saveLabel:Fh.Save,title:Fh.SaveAs});if(i)if(vt("SchemaDesigner","ExportToImage",{format:t?.format}),t.format==="svg"){let s=new Uint8Array(Buffer.from(decodeURIComponent(t.fileContents.split(",")[1]),"utf8"));await No.workspace.fs.writeFile(i,s)}else{let s=new Uint8Array(Buffer.from(t.fileContents.split(",")[1],"base64"));No.workspace.fs.writeFile(i,s)}}),this.onNotification(eh.CopyToClipboardNotification.type,async t=>{await No.env.clipboard.writeText(t.text)}),this.onNotification(eh.OpenInEditorNotification.type,async t=>{let n=await this.vscodeWrapper.openMsSqlTextDocument(t.text);await this.vscodeWrapper.showTextDocument(n,{viewColumn:No.ViewColumn.Active,preserveFocus:!0})}),this.onNotification(eh.OpenInEditorWithConnectionNotification.type,()=>{let t=Fn("SchemaDesigner","GenerateScript",void 0);No.window.withProgress({location:No.ProgressLocation.Notification,title:Fh.OpeningPublishScript,cancellable:!1},async()=>{try{let n=await this.schemaDesignerService.generateScript({sessionId:this._sessionId});if(t.end("Succeeded",void 0,n?.script?{scriptLength:n?.script?.length}:{scriptLength:0}),this.treeNode)this.mainController.onNewQuery(this.treeNode,n?.script);else if(this.connectionUri){let i=await this.mainController.untitledSqlDocumentService.newQuery(n?.script);await this.mainController.connectionManager.connect(i.document.uri.toString(!0),this.mainController.connectionManager.getConnectionInfo(this.connectionUri).credentials)}}catch(n){t.endFailed(n,!1),No.window.showErrorMessage(Fh.PublishScriptFailed(rt(n)))}})}),this.onNotification(eh.CloseSchemaDesignerNotification.type,()=>{this.panel.dispose()})}setupConfigurationListener(){let t=No.workspace.onDidChangeConfiguration(n=>{if(n.affectsConfiguration(dse)){let i=set();this.updateState({enableExpandCollapseButtons:i})}});this.registerDisposable(t)}updateCacheItem(t,n){let i=this.schemaDesignerCache.get(this._key);return t&&(this.schemaDesignerDetails.schema=t,i.schemaDesignerDetails.schema=t),i.isDirty=n??i.isDirty,this.schemaDesignerCache.set(this._key,i),i}async dispose(){this.schemaDesignerDetails&&this.updateCacheItem(this.schemaDesignerDetails.schema),super.dispose()}};var gw=class r{static instance;schemaDesigners=new Map;schemaDesignerCache=new Map;static getInstance(){return this.instance||(this.instance=new r),this.instance}constructor(){}async getSchemaDesigner(e,t,n,i,s,o,a){let c,l;if(o){let p=o.connectionProfile;p.database=s;let m=await n.connectionManager.createConnectionDetails(p);await n.connectionManager.confirmEntraTokenValidity(p),c=await n.connectionManager.getConnectionString(m,!0,!0),l=p.azureAccountToken}else if(a){var u=n.connectionManager.getConnectionInfo(a);c=await n.connectionManager.getConnectionString(a,!0,!0),l=u.credentials.azureAccountToken}let d=`${c}-${s}`;if(!this.schemaDesigners.has(d)||this.schemaDesigners.get(d)?.isDisposed){let p=new IY(e,t,n,i,c,l,s,this.schemaDesignerCache,o,a);p.onDisposed(async()=>{if(this.schemaDesigners.delete(d),this.schemaDesignerCache.get(d).isDirty&&await aet.window.showInformationMessage(fg.webviewRestorePrompt(Fh.SchemaDesigner),{modal:!0},fg.Restore)===fg.Restore)return vt("WebviewController","Restore",{},{}),await this.getSchemaDesigner(e,t,n,i,s,o,a);try{i.disposeSession({sessionId:this.schemaDesignerCache.get(d).schemaDesignerDetails.sessionId})}catch(m){console.error(`Error disposing schema designer session: ${m}`)}this.schemaDesignerCache.delete(d)}),this.schemaDesigners.set(d,p)}return this.schemaDesigners.get(d)}};var lSe=ge(Vi());var RY=class{static type=new lSe.RequestType("copilot/getnextmessage")};var xY=class{static type=new lSe.RequestType("copilot/startconversation")};var OY=class{constructor(e){this.sqlToolsClient=e}async startConversation(e,t,n){try{let i={conversationUri:e,connectionUri:t,userText:n};return(await this.sqlToolsClient.sendRequest(xY.type,i)).success}catch(i){throw this.sqlToolsClient.logger.error(i),i}}async getNextMessage(e,t,n,i){try{let s={conversationUri:e,userText:t,tool:n,toolParameters:i};return await this.sqlToolsClient.sendRequest(RY.type,s)}catch(s){throw this.sqlToolsClient.logger.error(s),s}}};var L5r=`@${Uh} Hello!`,cet=`@${Uh} Analyze the performance of this query.
Provide a detailed analysis, including a summary of the execution plan,
potential bottlenecks, and suggestions for optimization.
Make sure to highlight any relevant statistics or metrics that can help in understanding the performance characteristics of the query.
If the query is complex, break down the analysis into smaller parts for better clarity.
Provide a summary of the key findings and recommendations at the end of the analysis.`,uet=`Provide a detailed explanation of the query's purpose, business logic, structure, and functionality.
Make sure to clarify the role of each part of the query and how they contribute to the overall result.
Provide examples or analogies if necessary to help understand the query better.`,det=`@${Uh} Explain this query.
${uet}`,pet=`@${Uh} Explain the selected text of this query.
Provide a detailed explanation of the query's purpose, business logic, structure, and functionality in the context of the query
it is a part of.`,met=`@${Uh} Rewrite this query.
Provide a revised version of the query that provides optimal performance, readability, or maintainability.
Use the database context to ensure correctness. Think hard to find the absolute best version of the query.
Make sure to explain the changes made and the reasons behind them.
If applicable, include any relevant statistics or metrics that can help in understanding the performance characteristics of the revised query.
If the text contains multiple queries, rewrite each query separately.
If the query is already optimal, please let me know that as well.`,het=`@${Uh} Rewrite the selected text of this query.
Provide a revised version of the selected text that improves its performance, readability, or maintainability.
Use the database context to ensure correctness. Think hard to find the absolute best version of the query.
Make sure to explain the changes made and the reasons behind them.
If applicable, include any relevant statistics or metrics that can help in understanding the performance characteristics of the revised query.`,th="Use tools to ",qp={runQuery:`${th}run query: `,explain:`${th}explain this query. ${uet}`,fix:`${th}fix this SQL query: `,optimize:`${th}optimize this SQL query for better performance: `,showDefinition:`${th}show the definition and structure of the specified database object: `,listDatabases:`${th}list all databases available on the current server. `,listSchemas:`${th}list all schemas in the current database. `,listTables:`${th}list all tables in the current database. `,listViews:`${th}list all views in the current database. `,listFunctions:`${th}list all functions in the current database. `,listProcedures:`${th}list all stored procedures in the current database. `};var jf=ge(require("vscode"));var AY=class{constructor(e){this._connectionManager=e;this._disposables.push(this._connectionManager.onConnectionsChanged(()=>{this._codeLensChangedEmitter.fire()}))}_disposables=[];_codeLensChangedEmitter=new jf.EventEmitter;onDidChangeCodeLenses=this._codeLensChangedEmitter.event;provideCodeLenses(e,t){if(!jf.workspace.getConfiguration().get(pqe))return[];let i=this._connectionManager.getConnectionInfo(e.uri.toString(!0)),s=[new jf.CodeLens(new jf.Range(0,0,0,0),{title:i?kce(i.credentials):sC.codeLensConnect,command:Fv})];return i&&s.push(new jf.CodeLens(new jf.Range(0,0,0,0),{title:Lce(i.credentials),command:lC})),s}resolveCodeLens(e,t){}dispose(){this._disposables.forEach(e=>e.dispose()),this._disposables=[]}};var uo=ge(require("vscode"));var fet=ge(Vi());var uSe="mssql.connectionSharing.extensionPermissions";var xd=class extends Error{constructor(t,n,i,s){super(n);this.code=t;this.extensionId=i;this.connectionId=s;this.name="ConnectionSharingError"}},NY=class{constructor(e,t,n,i,s){this._context=e;this._client=t;this._connectionManager=n;this._vscodeWrapper=i;this._scriptingService=s;this._logger=Cs.create(this._vscodeWrapper.outputChannel,"ConnectionSharingService"),this.registerCommands()}_logger;registerCommands(){this._context.subscriptions.push(uo.commands.registerCommand("mssql.connectionSharing.getActiveEditorConnectionId",e=>this.getActiveEditorConnectionId(e))),this._context.subscriptions.push(uo.commands.registerCommand("mssql.connectionSharing.getActiveDatabase",e=>this.getActiveDatabase(e))),this._context.subscriptions.push(uo.commands.registerCommand("mssql.connectionSharing.getDatabaseForConnectionId",(e,t)=>this.getDatabaseForConnectionId(e,t))),this._context.subscriptions.push(uo.commands.registerCommand("mssql.connectionSharing.connect",(e,t,n)=>this.connect(e,t,n))),this._context.subscriptions.push(uo.commands.registerCommand("mssql.connectionSharing.disconnect",e=>this.disconnect(e))),this._context.subscriptions.push(uo.commands.registerCommand("mssql.connectionSharing.isConnected",e=>this.isConnected(e))),this._context.subscriptions.push(uo.commands.registerCommand("mssql.connectionSharing.executeSimpleQuery",(e,t)=>this.executeSimpleQuery(e,t))),this._context.subscriptions.push(uo.commands.registerCommand("mssql.connectionSharing.getServerInfo",e=>this.getServerInfo(e))),this._context.subscriptions.push(uo.commands.registerCommand("mssql.connectionSharing.editConnectionSharingPermissions",async e=>this.editConnectionSharingPermissions(e))),this._context.subscriptions.push(uo.commands.registerCommand("mssql.connectionSharing.listDatabases",e=>this.listDatabases(e))),this._context.subscriptions.push(uo.commands.registerCommand("mssql.connectionSharing.scriptOperation",(e,t,n)=>this.scriptObject(e,t,n))),this._context.subscriptions.push(uo.commands.registerCommand("mssql.connectionSharing.clearAllConnectionSharingPermissions",async()=>{if(await uo.window.showInformationMessage(es.ClearAllPermissions,es.Clear,es.Cancel)!==es.Clear){this._logger.info("User canceled clearing connection sharing permissions.");return}await this.setApprovedExtensions({}),uo.window.showInformationMessage(es.AllPermissionsCleared)}))}async getStoredExtensionPermissions(){let e=await this._context.secrets.get(uSe);if(!e){let t={};return await this.storeExtensionPermissions(t),t}try{return JSON.parse(e)}catch(t){this._logger.error("Failed to parse stored extension permissions:",t);let n={};return await this.storeExtensionPermissions(n),n}}async storeExtensionPermissions(e){await this._context.secrets.store(uSe,JSON.stringify(e))}async getExtensionPermission(e){return(await this.getStoredExtensionPermissions())[e]}async updateExtensionPermission(e,t){let i={...await this.getStoredExtensionPermissions(),[e]:t};await this.storeExtensionPermissions(i)}async setApprovedExtensions(e){await this._context.secrets.store(uSe,JSON.stringify(e))}async requestConnectionSharingPermission(e){this._logger.info(`Requesting connection sharing permission for extension: ${e}`);let t=await this.getExtensionPermission(e);if(t==="approved")return this._logger.info(`Connection sharing already approved for extension: ${e}`),!0;if(t==="denied")return this._logger.info(`Connection sharing denied for extension: ${e}`),!1;this._logger.info(`No existing permission for extension: ${e}, requesting approval`);let n=await uo.window.showInformationMessage(es.connectionSharingRequestNotification(e),{},es.Approve,es.Deny);if(!n)return this._logger.info(`User canceled connection sharing request for extension: ${e}`),!1;switch(n){case"Approve":return this._logger.info(`User approved connection sharing for extension: ${e}`),await this.updateExtensionPermission(e,"approved"),!0;case"Deny":return this._logger.info(`User denied connection sharing for extension: ${e}`),await this.updateExtensionPermission(e,"denied"),!1}}async validateExtensionPermission(e){if(!await this.requestConnectionSharingPermission(e))throw await this.getExtensionPermission(e)==="denied"?new xd("PERMISSION_DENIED",es.permissionDenied(e),e):new xd("PERMISSION_REQUIRED",es.permissionRequired(e),e)}validateConnection(e){if(!e)throw new xd("INVALID_CONNECTION_URI",es.invalidConnectionUri);if(!this._connectionManager.isConnected(e))throw new xd("NO_ACTIVE_CONNECTION",es.connectionNotActive)}getExtensionDisplayName(e){let t=uo.extensions.getExtension(e);return t?`${t.packageJSON.displayName} (${e}), ${t.packageJSON.publisher})`:e}async getActiveEditorConnectionId(e){await this.validateExtensionPermission(e);let t=uo.window.activeTextEditor;if(!t)throw new xd("NO_ACTIVE_EDITOR",es.noActiveEditorError,e);let n=t.document.uri.toString(!0);if(!this._connectionManager.isConnected(n))return;let s=this._connectionManager.getConnectionInfoFromUri(n);if(s)return s.id}async getActiveDatabase(e){await this.validateExtensionPermission(e);let t=uo.window.activeTextEditor;if(!t)throw new xd("NO_ACTIVE_EDITOR",es.noActiveEditorError,e);let n=t.document.uri.toString(!0);if(!this._connectionManager.isConnected(n))return;let s=this._connectionManager.getConnectionInfoFromUri(n);if(s)return s.database}async getDatabaseForConnectionId(e,t){await this.validateExtensionPermission(e);let i=(await this._connectionManager.connectionStore.connectionConfig.getConnections(!1)).find(s=>s.id===t);if(i)return i.database}async connect(e,t,n){await this.validateExtensionPermission(e);let s=(await this._connectionManager.connectionStore.connectionConfig.getConnections(!1)).find(c=>c.id===t);if(!s)throw this._logger.error(`Connection with ID "${t}" not found for extension "${e}".`),new xd("CONNECTION_NOT_FOUND",es.connectionNotFoundError(t),e,t);let o=ec();if(n&&(s.database=n),!await this._connectionManager.connect(o,s))throw this._logger.error(`Failed to establish connection with ID "${t}" for extension "${e}".`),new xd("CONNECTION_FAILED",es.failedToEstablishConnectionError(t),e,t);return this._logger.info(`Successfully connected to database with ID "${t}" for extension "${e}".`),o}disconnect(e){if(!e)throw new xd("INVALID_CONNECTION_URI",es.invalidConnectionUri);this._connectionManager.disconnect(e)}isConnected(e){return e?this._connectionManager.isConnected(e):!1}async executeSimpleQuery(e,t){if(!e)throw this._logger.error("Invalid connection URI provided for query execution."),new xd("INVALID_CONNECTION_URI",es.invalidConnectionUri);if(!this.isConnected(e))throw new xd("NO_ACTIVE_CONNECTION",es.connectionNotActive);return await this._client.sendRequest(new fet.RequestType("query/simpleexecute"),{ownerUri:e,queryString:t})}getServerInfo(e){this._logger.info(`Retrieving server info for connection URI: ${e}`),this.validateConnection(e);let t=this._connectionManager.getConnectionInfoFromUri(e);return this._connectionManager.getServerInfo(t)}async listDatabases(e){return this._logger.info(`Listing databases for connection URI: ${e}`),this.validateConnection(e),await this._connectionManager.listDatabases(e)}async scriptObject(e,t,n){this._logger.info(`Executing script operation "${t}" for connection URI: ${e}`),this.validateConnection(e);let i=this.getServerInfo(e),s=this._scriptingService.createScriptingParams(i,n,e,t);return await this._scriptingService.script(s)}async editConnectionSharingPermissions(e){if(this._logger.info(`Editing connection sharing permissions for extension: ${e??"not specified"}`),!e){this._logger.info("No extension ID provided, prompting user to select an extension.");let o=uo.extensions.all.filter(c=>c.id!==aC).map(c=>({label:this.getExtensionDisplayName(c.id),detail:c.id,description:c.packageJSON.description})),a=await uo.window.showQuickPick(o,{canPickMany:!1,placeHolder:es.SelectAnExtensionToManage,matchOnDescription:!0});if(!a?.detail){this._logger.info("User cancelled the extension selection.");return}this._logger.info(`User selected extension: ${a.detail}`),e=a.detail}let t=await this.getExtensionPermission(e),n=this.getExtensionDisplayName(e);this._logger.info(`Current permission for extension "${n}" (${e}): ${t}`);let i=await uo.window.showQuickPick([{label:t==="approved"?es.GrantAccessCurrent:es.GrantAccess,description:es.AllowThisExtensionToAccessYourConnections,detail:"approved"},{label:t==="denied"?es.DenyAccessCurrent:es.DenyAccess,description:es.BlockThisExtensionFromAccessingYourConnections,detail:"denied"}],{placeHolder:es.SelectNewPermission(n)});if(this._logger.info(`User selected new permission: ${i?.detail}`),!i)return;let s=i.detail;return await this.updateExtensionPermission(e,s),this._logger.info(`Updated permission for extension "${n}" (${e}) to: ${s}`),s}};var get=ge(require("vscode"));var pO=ge(require("vscode"));var Vs=class{toolName;async invoke(e,t){let n=Fn("MssqlCopilot","CopilotAgentModeToolCall",`${e.toolInvocationToken}`,{toolName:this.toolName});try{let i=await this.call(e,t);return n.end("Succeeded"),new pO.LanguageModelToolResult([new pO.LanguageModelTextPart(i)])}catch(i){n.endFailed(i);let s={isError:!0,message:i instanceof Error?i.message:String(i)};return new pO.LanguageModelToolResult([new pO.LanguageModelTextPart(JSON.stringify(s))])}}};var DY=class extends Vs{constructor(t,n){super();this._connectionManager=t;this._showSchema=n}toolName=QG;async call(t,n){let{connectionId:i}=t.input;try{let o=this._connectionManager.getConnectionInfo(i)?.credentials;return o?(await this._showSchema(i,o.database),JSON.stringify({success:!0,message:mt.showSchemaToolSuccessMessage})):JSON.stringify({success:!1,message:mt.noConnectionError(i)})}catch(s){return JSON.stringify({success:!1,message:s instanceof Error?s.message:String(s)})}}async prepareInvocation(t,n){let{connectionId:i}=t.input,s={title:`${hn}: ${mt.showSchemaToolConfirmationTitle}`,message:new get.MarkdownString(mt.showSchemaToolConfirmationMessage(i))};return{invocationMessage:mt.showSchemaToolInvocationMessage(i),confirmationMessages:s}}};var yet=ge(require("vscode"));var vet=require("crypto");var MY=class extends Vs{constructor(t){super();this._connectionManager=t}toolName=FG;async findConnectionWithProperties(t,n,i){let s=await this._connectionManager.connectionStore.readAllConnections();if(t){let o=s.find(a=>a.id===t);return o?{profile:o,matchType:"profileId"}:{profile:void 0,matchType:"profileNotFound"}}if(n){if(i){let a=s.find(c=>c.server===n&&c.database===i);if(a)return{profile:a,matchType:"exactMatch"}}let o=s.find(a=>a.server===n);return o?{profile:o,matchType:"serverMatch"}:{profile:void 0,matchType:"noServerMatch"}}return{profile:void 0,matchType:"invalidInput"}}async call(t,n){let{profileId:i,serverName:s,database:o}=t.input,a=await this.findConnectionWithProperties(i,s,o);if(!a.profile){let p;switch(a.matchType){case"profileNotFound":p=mt.connectToolProfileNotFoundError(i);break;case"noServerMatch":p=mt.connectToolServerNotFoundError(s);break;case"invalidInput":p=mt.connectToolInvalidInputError();break;default:p=mt.connectToolFailMessage}return JSON.stringify({message:p,success:!1})}let c=o||a.profile.database,l=(0,vet.randomUUID)(),u,d;try{let p=a.profile;await this._connectionManager.handlePasswordBasedCredentials(p)?u=await this._connectionManager.connect(l,{...p,database:c}):u=!1,d=u?mt.connectToolSuccessMessage:mt.connectToolFailMessage}catch(p){u=!1,d=rt(p)}return JSON.stringify({success:u,connectionId:l,message:d})}async prepareInvocation(t,n){let{profileId:i,serverName:s,database:o}=t.input,a,c;i?(a=mt.connectToolConfirmationMessageWithProfile(i),c=mt.connectToolInvocationMessageWithProfile(i)):(a=o?mt.connectToolConfirmationMessageWithServerAndDatabase(s,o):mt.connectToolConfirmationMessageWithServerOnly(s),c=o?mt.connectToolInvocationMessageWithServerAndDatabase(s,o):mt.connectToolInvocationMessageWithServerOnly(s));let l={title:`${hn}: ${mt.connectToolConfirmationTitle}`,message:new yet.MarkdownString(a)};return{invocationMessage:c,confirmationMessages:l}}};var bet=ge(require("vscode"));var kY=class extends Vs{constructor(t){super();this._connectionManager=t}toolName=UG;async call(t,n){let s=(await this._connectionManager.connectionStore.readAllConnections(!1)).map(o=>({profileId:o.id,profileName:o.profileName,server:o.server,database:o.database}));return JSON.stringify({servers:s})}async prepareInvocation(t,n){let i={title:`${hn}: ${mt.listServersToolConfirmationTitle}`,message:new bet.MarkdownString(mt.listServersToolConfirmationMessage)};return{invocationMessage:mt.listServersToolInvocationMessage,confirmationMessages:i}}};var _et=ge(require("vscode"));var LY=class extends Vs{constructor(t){super();this._connectionManager=t}toolName=jG;async call(t,n){let{connectionId:i}=t.input;return await this._connectionManager.disconnect(i),JSON.stringify({success:!0})}async prepareInvocation(t,n){let{connectionId:i}=t.input,s={title:`${hn}: ${mt.disconnectToolConfirmationTitle}`,message:new _et.MarkdownString(mt.disconnectToolConfirmationMessage(i))};return{invocationMessage:mt.disconnectToolInvocationMessage(i),confirmationMessages:s}}};var Cet=ge(require("vscode"));var qY=class extends Vs{constructor(t){super();this._connectionManager=t}toolName=YG;async call(t,n){let{connectionId:i}=t.input;try{let o=this._connectionManager.getConnectionInfo(i)?.credentials;if(!o)return JSON.stringify({success:!1,message:mt.noConnectionError(i)});let a={server:o.server,database:o.database,authenticationType:o.authenticationType,user:o.user,email:o.email,accountId:o.accountId,tenantId:o.tenantId,trustServerCertificate:o.trustServerCertificate,applicationIntent:o.applicationIntent};return JSON.stringify({success:!0,connectionInfo:a})}catch(s){return JSON.stringify({success:!1,message:rt(s)})}}async prepareInvocation(t,n){let{connectionId:i}=t.input,s={title:`${hn}: ${mt.getConnectionDetailsToolConfirmationTitle}`,message:new Cet.MarkdownString(mt.getConnectionDetailsToolConfirmationMessage(i))};return{invocationMessage:mt.getConnectionDetailsToolInvocationMessage(i),confirmationMessages:s}}};var Pet=ge(require("vscode"));var zY=class extends Vs{constructor(t){super();this._connectionManager=t}toolName=KG;async call(t,n){let{connectionId:i,database:s}=t.input;try{let a=this._connectionManager.getConnectionInfo(i)?.credentials;if(!a)return JSON.stringify({success:!1,message:mt.noConnectionError(i)});if(!this._connectionManager.isConnected(i))return JSON.stringify({success:!1,message:mt.noConnectionError(i)});let c={...a};return c.database=s,await this._connectionManager.disconnect(i),await this._connectionManager.connect(i,c)?JSON.stringify({success:!0,message:mt.changeDatabaseToolSuccessMessage(s)}):JSON.stringify({success:!1,message:mt.changeDatabaseToolFailMessage(s)})}catch(o){return JSON.stringify({success:!1,message:rt(o)})}}async prepareInvocation(t,n){let{connectionId:i,database:s}=t.input,o={title:`${hn}: ${mt.changeDatabaseToolConfirmationTitle}`,message:new Pet.MarkdownString(mt.changeDatabaseToolConfirmationMessage(i,s))};return{invocationMessage:mt.changeDatabaseToolInvocationMessage(i,s),confirmationMessages:o}}};var wet=ge(require("vscode"));var FY=class extends Vs{constructor(t){super();this._connectionManager=t}toolName=BG;async call(t,n){let{connectionId:i}=t.input;try{if(!this._connectionManager.getConnectionInfo(i)?.credentials)return JSON.stringify({success:!1,message:mt.noConnectionError(i)});let a=await this._connectionManager.listDatabases(i);return JSON.stringify({success:!0,databases:a})}catch(s){return JSON.stringify({success:!1,message:rt(s)})}}async prepareInvocation(t,n){let{connectionId:i}=t.input,s={title:`${hn}: ${mt.listDatabasesToolConfirmationTitle}`,message:new wet.MarkdownString(mt.listDatabasesToolConfirmationMessage(i))};return{invocationMessage:mt.listDatabasesToolInvocationMessage(i),confirmationMessages:s}}};var xet=ge(require("vscode"));var Oet=ge(Vi());var Eet="SELECT CONCAT(SCHEMA_NAME(schema_id), '.', name) AS TableName FROM sys.tables ORDER BY SCHEMA_NAME(schema_id), name",Tet="SELECT CONCAT(SCHEMA_NAME(schema_id), '.', name) AS ViewName FROM sys.views ORDER BY SCHEMA_NAME(schema_id), name",Iet="SELECT name AS SchemaName FROM sys.schemas WHERE name NOT IN ('sys', 'information_schema') ORDER BY name",Ret="SELECT CONCAT(SCHEMA_NAME(schema_id), '.', name) AS FunctionName FROM sys.objects WHERE type IN ('FN', 'IF', 'TF') ORDER BY SCHEMA_NAME(schema_id), name";var jY=class extends Vs{constructor(t,n){super();this._connectionManager=t;this._client=n}toolName=GG;async call(t,n){let{connectionId:i}=t.input;try{if(!this._connectionManager.getConnectionInfo(i)?.credentials)return JSON.stringify({success:!1,message:mt.noConnectionError(i)});let a=await this._client.sendRequest(new Oet.RequestType("query/simpleexecute"),{ownerUri:i,queryString:Eet}),c=this.getTableNamesFromResult(a);return JSON.stringify({success:!0,tables:c})}catch(s){return JSON.stringify({success:!1,message:rt(s)})}}getTableNamesFromResult(t){if(!t||!t.rows||t.rows.length===0)return[];let n=[];for(let i of t.rows)if(i&&i.length>0&&i[0]&&!i[0].isNull){let s=i[0].displayValue.trim();s&&n.push(s)}return n}async prepareInvocation(t,n){let{connectionId:i}=t.input,s={title:`${hn}: ${mt.ListTablesToolConfirmationTitle}`,message:new xet.MarkdownString(mt.ListTablesToolConfirmationMessage(i))};return{invocationMessage:mt.ListTablesToolInvocationMessage(i),confirmationMessages:s}}};var Aet=ge(require("vscode"));var Net=ge(Vi());var UY=class extends Vs{constructor(t,n){super();this._connectionManager=t;this._client=n}toolName=$G;async call(t,n){let{connectionId:i}=t.input;try{if(!this._connectionManager.getConnectionInfo(i)?.credentials)return JSON.stringify({success:!1,message:mt.noConnectionError(i)});let a=await this._client.sendRequest(new Net.RequestType("query/simpleexecute"),{ownerUri:i,queryString:Iet}),c=this.getSchemaNamesFromResult(a);return JSON.stringify({success:!0,schemas:c})}catch(s){return JSON.stringify({success:!1,message:rt(s)})}}getSchemaNamesFromResult(t){if(!t||!t.rows||t.rows.length===0)return[];let n=[];for(let i of t.rows)if(i&&i.length>0&&i[0]&&!i[0].isNull){let s=i[0].displayValue.trim();s&&n.push(s)}return n}async prepareInvocation(t,n){let{connectionId:i}=t.input,s={title:`${hn}: ${mt.ListSchemasToolConfirmationTitle}`,message:new Aet.MarkdownString(mt.ListSchemasToolConfirmationMessage(i))};return{invocationMessage:mt.ListSchemasToolInvocationMessage(i),confirmationMessages:s}}};var Det=ge(require("vscode"));var Met=ge(Vi());var BY=class extends Vs{constructor(t,n){super();this._connectionManager=t;this._client=n}toolName=VG;async call(t,n){let{connectionId:i}=t.input;try{if(!this._connectionManager.getConnectionInfo(i)?.credentials)return JSON.stringify({success:!1,message:mt.noConnectionError(i)});let a=await this._client.sendRequest(new Met.RequestType("query/simpleexecute"),{ownerUri:i,queryString:Tet}),c=this.getViewNamesFromResult(a);return JSON.stringify({success:!0,views:c})}catch(s){return JSON.stringify({success:!1,message:rt(s)})}}getViewNamesFromResult(t){if(!t||!t.rows||t.rows.length===0)return[];let n=[];for(let i of t.rows)if(i&&i.length>0&&i[0]&&!i[0].isNull){let s=i[0].displayValue.trim();s&&n.push(s)}return n}async prepareInvocation(t,n){let{connectionId:i}=t.input,s={title:`${hn}: ${mt.ListViewsToolConfirmationTitle}`,message:new Det.MarkdownString(mt.ListViewsToolConfirmationMessage(i))};return{invocationMessage:mt.ListViewsToolInvocationMessage(i),confirmationMessages:s}}};var ket=ge(require("vscode"));var Let=ge(Vi());var GY=class extends Vs{constructor(t,n){super();this._connectionManager=t;this._client=n}toolName=HG;async call(t,n){let{connectionId:i}=t.input;try{if(!this._connectionManager.getConnectionInfo(i)?.credentials)return JSON.stringify({success:!1,message:mt.noConnectionError(i)});let a=await this._client.sendRequest(new Let.RequestType("query/simpleexecute"),{ownerUri:i,queryString:Ret}),c=this.getFunctionNamesFromResult(a);return JSON.stringify({success:!0,functions:c})}catch(s){return JSON.stringify({success:!1,message:rt(s)})}}getFunctionNamesFromResult(t){if(!t||!t.rows||t.rows.length===0)return[];let n=[];for(let i of t.rows)if(i&&i.length>0&&i[0]&&!i[0].isNull){let s=i[0].displayValue.trim();s&&n.push(s)}return n}async prepareInvocation(t,n){let{connectionId:i}=t.input,s={title:`${hn}: ${mt.ListFunctionsToolConfirmationTitle}`,message:new ket.MarkdownString(mt.ListFunctionsToolConfirmationMessage(i))};return{invocationMessage:mt.ListFunctionsToolInvocationMessage(i),confirmationMessages:s}}};var qet=ge(require("vscode"));var zet=ge(Vi()),$Y=class extends Vs{constructor(t,n){super();this._connectionManager=t;this._client=n}toolName=WG;async call(t,n){let{connectionId:i,query:s}=t.input;try{if(!this._connectionManager.getConnectionInfo(i)?.credentials)return JSON.stringify({success:!1,message:mt.noConnectionError(i)});let c=await this._client.sendRequest(new zet.RequestType("query/simpleexecute"),{ownerUri:i,queryString:s});return JSON.stringify({success:!0,rowCount:c.rowCount,columnInfo:c.columnInfo,rows:c.rows})}catch(o){return JSON.stringify({success:!1,message:rt(o)})}}async prepareInvocation(t,n){let{connectionId:i,query:s}=t.input,o={title:`${hn}: ${mt.RunQueryToolConfirmationTitle}`,message:new qet.MarkdownString(mt.RunQueryToolConfirmationMessage(i,s))};return{invocationMessage:mt.RunQueryToolInvocationMessage(i),confirmationMessages:o}}};var Z1=ge(require("vscode"));var VY=class{loadState="loading";errorMessage;deploymentType=0;dialog;deploymentTypeState={};formState={};formComponents={};formErrors=[];connectionGroupOptions=[]};var HY=class{loadState="loading";errorMessage;dockerSteps=[];formState=void 0;formComponents={};formErrors=[];platform="";dialog;isValidContainerName=!1;isValidPortNumber=!1;isDockerProfileValid=!1;formValidationLoadState="notStarted";currentDockerStep=0;constructor(e){for(let t in e)t in this&&(this[t]=e[t])}},J1=(a=>(a[a.dockerInstallation=0]="dockerInstallation",a[a.startDockerDesktop=1]="startDockerDesktop",a[a.checkDockerEngine=2]="checkDockerEngine",a[a.pullImage=3]="pullImage",a[a.startContainer=4]="startContainer",a[a.checkContainer=5]="checkContainer",a[a.connectToContainer=6]="connectToContainer",a))(J1||{});var jet=require("os");async function Uet(r){let e=Date.now(),t=new HY;t.platform=(0,jet.platform)();let n=await X$e();return t.formComponents=Whr(n,r),t.formState={version:n[0].value,password:"",savePassword:!1,profileName:"",containerName:"",port:void 0,hostname:"",acceptEula:!1,groupId:r[0].value},t.dockerSteps=U$e(),t.loadState="loaded",vt("LocalContainers","StartLocalContainersDeployment",{},{localContainersInitTimeInMs:Date.now()-e}),t}function Bet(r){r.registerReducer("completeDockerStep",async(e,t)=>{let n=e.deploymentTypeState,i=t.dockerStep,s=n.dockerSteps[i];if(s.loadState!=="notStarted")return e;n.dockerSteps[i].loadState="loading",Fet(r,n);let o,a=!1,c=Date.now();if(i===6){let d=await Hhr(n.formState,r.mainController);a=d,d||(s.errorMessage=`${YD} ${n.formState.profileName}`)}else{let d=s.argNames.map(p=>n.formState[p]);o=await s.stepAction(...d),a=o.success,a||(s.errorMessage=o.error,s.fullErrorText=o.fullErrorText)}let l={dockerStep:J1[i],containerVersion:n.formState.version},u={timeToCompleteStepInMs:Date.now()-c};return a?(s.loadState="loaded",vt("LocalContainers","RunDockerStep",l,u)):(s.loadState="error",kr("LocalContainers","RunDockerStep",new Error(s.errorMessage),!0,void 0,void 0,l,u)),n.dockerSteps[i]=s,n.currentDockerStep+=a?1:0,e.deploymentTypeState=n,e}),r.registerReducer("resetDockerStepState",async(e,t)=>{let n=e.deploymentTypeState,i=n.currentDockerStep;return n.dockerSteps[i].loadState="notStarted",vt("LocalContainers","RetryDockerStep",{dockerStep:J1[i]}),e.deploymentTypeState=n,e}),r.registerReducer("checkDockerProfile",async(e,t)=>{let n=e.deploymentTypeState;n.formValidationLoadState="loading",Fet(r,n),n=await $et(n);let i=n.formState.containerName||n.formState.port||n.formState.hostname;return n.formState.containerName||(n.formState.containerName=await jde(n.formState.containerName)),n.formState.port||(n.formState.port=await Ude(1433)),n.isDockerProfileValid=n.formErrors.length===0,n.formValidationLoadState="notStarted",n.isDockerProfileValid&&vt("LocalContainers","SubmitContainerForm",{hasAdvancedOptions:i?"true":"false"}),e.deploymentTypeState=n,e})}async function Get(r,e){return r.formState[e.event.propertyName]=e.event.value,await $et(r,e.event.propertyName)}async function $et(r,e){let t=[],n=e?[r.formComponents[e]]:Object.values(r.formComponents);for(let i of n){if(!i)continue;let s=i.propertyName;if(s==="containerName"){let o=await jde(r.formState[s]);r.isValidContainerName=o!=="",r.isValidContainerName?i.validation={isValid:!0,validationMessage:""}:(i.validation=F$e,t.push(s))}else if(s==="port"){let o=await Vhr(r.formState[s]?.toString());r.isValidPortNumber=o,o?i.validation={isValid:!0,validationMessage:""}:(i.validation=j$e,t.push(s))}else if(i.validate){let o=i.validate(r,r.formState[s]);i.validation=o,o.isValid||t.push(s)}}return r.formErrors=t,r}async function Vhr(r){if(!r)return!0;let e=Number(r);return isNaN(e)||e<=0?!1:await Ude(e)===e}function Vet(r){vt("LocalContainers","FinishLocalContainersDeployment",{currentStep:J1[r.currentDockerStep],currentStepStatus:r.dockerSteps[r.currentDockerStep]?.loadState,currentStepErrorMessage:r.dockerSteps[r.currentDockerStep]?.errorMessage})}async function Hhr(r,e){let t={...r,server:`${aM},${r.port}`,profileName:r.profileName||r.containerName,savePassword:r.savePassword,emptyPasswordInput:!1,authenticationType:Ya,user:Oqe,trustServerCertificate:!0};try{let n=await e.connectionManager.connectionUI.saveProfile(t);await e.createObjectExplorerSession(n)}catch{return!1}return!0}function Whr(r,e){let t=n=>({required:!1,isAdvancedOption:!1,...n});return{version:t({type:"dropdown",propertyName:"version",label:Rr.selectImage,required:!0,tooltip:Rr.selectImageTooltip,options:r}),password:t({type:"password",propertyName:"password",label:yg,required:!0,tooltip:Rr.sqlServerPasswordTooltip,placeholder:Rr.passwordPlaceholder,componentWidth:"500px",validate(n,i){let s=B$e(i.toString());return{isValid:s==="",validationMessage:s}}}),savePassword:t({type:"checkbox",propertyName:"savePassword",label:xn.savePassword,tooltip:Lv,componentWidth:"375px"}),profileName:t({type:"input",propertyName:"profileName",label:xn.profileName,tooltip:xn.profileNameTooltip,placeholder:xn.profileNamePlaceholder}),groupId:t(H1(e)),containerName:t({type:"input",propertyName:"containerName",label:Rr.containerName,isAdvancedOption:!0,tooltip:Rr.containerNameTooltip,placeholder:Rr.containerNamePlaceholder}),port:t({type:"input",propertyName:"port",label:Rr.port,isAdvancedOption:!0,tooltip:Rr.portTooltip,placeholder:Rr.portPlaceholder}),hostname:t({type:"input",propertyName:"hostname",label:Rr.hostname,isAdvancedOption:!0,tooltip:Rr.hostnameTooltip,placeholder:Rr.hostnamePlaceholder}),acceptEula:t({type:"checkbox",propertyName:"acceptEula",label:`<span>
						${zi.accept}
						<a
							href="https://go.microsoft.com/fwlink/?LinkId=746388"
							target="_blank"
						>
							${Rr.termsAndConditions}
						</a>
					</span>`,required:!0,tooltip:Rr.acceptSqlServerEulaTooltip,componentWidth:"600px",validate(n,i){return i?{isValid:!0,validationMessage:""}:{isValid:!1,validationMessage:Rr.acceptSqlServerEula}}})}}function Fet(r,e){r.state.deploymentTypeState=e,r.updateState(r.state)}var WY=class{loadState="loading";errorMessage;formState=void 0;formComponents={};formErrors=[];dialog;workspacesWithPermissions={};workspacesWithoutPermissions={};isWorkspacesErrored=!1;capacityIds=[];userGroupIds=[];deploymentStartTime="";workspaces=[];databaseNamesInWorkspace=[];database=void 0;tenantName="";workspaceName="";formValidationLoadState="notStarted";provisionLoadState="notStarted";connectionLoadState="notStarted";constructor(e){for(let t in e)t in this&&(this[t]=e[t])}};var Yhr=20;async function Wet(r,e,t){let n=Date.now(),i=new WY,o=(await os.getAccounts()).map(d=>({displayName:d.label,value:d.id})),a=o.length>0?o[0].value:"",c="",l=[];if(a!==""){let d=await os.getTenantsForAccount(a);l=d.map(p=>({displayName:p.displayName,value:p.tenantId})),c=dSe(a,d)}i.formState={accountId:a,groupId:e[0].value,tenantId:c,workspace:"",databaseName:"",databaseDescription:""},r.state.deploymentTypeState=i;let u=await Qet(r,t);return i.formComponents=Xhr(o,u,e,l),i.loadState="loaded",vt("FabricProvisioning","StartFabricProvisioningDeployment",{},{localContainersInitTimeInMs:Date.now()-n}),Jet(r),i}function Ket(r){r.registerReducer("reloadFabricEnvironment",async(e,t)=>(e.deploymentTypeState=await Yet(r,t.newTenant),e)),r.registerReducer("handleWorkspaceFormAction",async(e,t)=>{let n=await Het(e.deploymentTypeState,t.workspaceId);return e.deploymentTypeState=n,e.formState=n.formState,e.formErrors=n.formErrors,e}),r.registerReducer("createDatabase",async(e,t)=>{let n=e.deploymentTypeState;if(n.workspaces.length!==0)return n.formValidationLoadState="loading",Od(r,n),n=await Het(n,n.formState.workspace),Od(r,n),n.formErrors=await r.validateDeploymentForm(),n.formErrors.length===0?(tfr(r),n.deploymentStartTime=new Date().toUTCString(),n.tenantName=n.formComponents.tenantId.options.find(i=>i.value===n.formState.tenantId)?.displayName,n.workspaceName=n.formComponents.workspace.options.find(i=>i.value===n.formState.workspace)?.displayName,n.formValidationLoadState="loaded"):n.formValidationLoadState="notStarted",e.deploymentTypeState=n,e})}function Xhr(r,e,t,n){let i=s=>({required:!1,isAdvancedOption:!1,...s});return{accountId:i({propertyName:"accountId",label:xs.fabricAccount,required:!0,type:"dropdown",options:r,placeholder:xn.selectAnAccount,actionButtons:e,validate:(s,o)=>({isValid:!!o,validationMessage:o?"":xs.fabricAccountIsRequired}),isAdvancedOption:!1}),workspace:i({propertyName:"workspace",label:xs.workspace,required:!0,type:"searchableDropdown",options:[],isAdvancedOption:!1,placeholder:xs.selectAWorkspace,searchBoxPlaceholder:xs.searchWorkspaces,validate(s,o){{if(!o)return{isValid:!1,validationMessage:xs.workspaceIsRequired};let a=o in s.workspacesWithPermissions;return{isValid:a,validationMessage:a?"":zh.workspacePermissionsError}}}}),databaseName:i({propertyName:"databaseName",type:"input",required:!0,label:zh.databaseName,isAdvancedOption:!1,placeholder:zh.enterDatabaseName,validate(s,o){{if(!o)return{isValid:!1,validationMessage:zh.databaseNameIsRequired};let a=!s.databaseNamesInWorkspace.includes(o);return{isValid:a,validationMessage:a?"":zh.databaseNameError}}}}),tenantId:i({propertyName:"tenantId",label:xn.tenantId,required:!0,type:"dropdown",options:n,placeholder:xn.selectATenant,validate:(s,o)=>({isValid:!!o,validationMessage:o?"":xn.tenantIdIsRequired})}),databaseDescription:i({propertyName:"databaseDescription",label:zh.databaseDescription,required:!1,type:"input",isAdvancedOption:!0,placeholder:zh.enterDatabaseDescription}),profileName:i({type:"input",propertyName:"profileName",label:xn.profileName,tooltip:xn.profileNameTooltip,placeholder:xn.profileNamePlaceholder}),groupId:i(H1(t))}}async function Qet(r,e){let t="accountId",n=r.state.deploymentTypeState,i=[];return i.push({label:n.formState.accountId===""?xn.signIn:xn.addAccount,id:"azureSignIn",callback:async()=>{await os.signIn(!0);let s=n.formComponents[t];if(!s){e.error("Account component not found");return}let o=await os.getAccounts();s.options=o.map(a=>({displayName:a.label,value:a.id})),e.verbose(`Read ${s.options.length} Azure accounts: ${s.options.map(a=>a.value).join(", ")}`),o.length!==0&&(n.formState.accountId=o[0].id,e.verbose(`Selecting '${o[0].id}'`)),Od(r,n),await Jhr(r,e)}}),i}async function Jhr(r,e){let t=r.state.deploymentTypeState,n=t.formComponents.tenantId,i=await os.getTenantsForAccount(t.formState.accountId),s=i.map(a=>({displayName:a.displayName,value:a.tenantId}));n&&(n.options=s,s.length>0&&!s.find(a=>a.value===t.formState.tenantId)&&(t.formState.tenantId=dSe(t.formState.accountId,i),(await r.validateDeploymentForm("tenantId")).length&&t.formErrors.push("tenantId")));let o=t.formComponents.accountId;o.actionButtons=await Qet(r,e),await Yet(r)}async function Yet(r,e){let t=r.state.deploymentTypeState,n=t.formState.accountId;if(n&&!e){let i=await os.getTenantsForAccount(n),s=i.map(o=>({displayName:o.displayName,value:o.tenantId}));t.formState.tenantId=dSe(n,i),t.formComponents.tenantId.options=s}return t.capacityIds=[],t.userGroupIds=[],t.workspaces=[],t.databaseNamesInWorkspace=[],t.errorMessage="",t.isWorkspacesErrored=!1,Od(r,t),Jet(r,e),t}function Xet(r){return[...Object.values(r.workspacesWithPermissions),...Object.values(r.workspacesWithoutPermissions)].map(t=>{let n=t.id in r.workspacesWithPermissions,i="";return t.hasCapacityPermissionsForProvisioning===!1?i=xs.insufficientCapacityPermissions:n||(i=xs.insufficientWorkspacePermissions),{displayName:t.displayName,value:t.id,color:n?"":"colorNeutralForegroundDisabled",description:i,icon:n?void 0:"Warning20Regular"}})}async function Jet(r,e){let t=r.state.deploymentTypeState;if(t.formState.tenantId===""&&!e)return;let n=Date.now();e=e||t.formState.tenantId;try{await Zhr(r,e);let i=await Au.getFabricWorkspaces(e);t.workspaces=await efr(r,i,"Contributor");let s=Xet(t);t.formComponents.workspace.options=s,t.formState.workspace=s.length>0?s[0].value:"",Od(r,t),vt("FabricProvisioning","GetWorkspaces",{},{numWorkspaces:t.workspaces.length,workspaceLoadTimeInMs:Date.now()-n})}catch(i){console.log(i),t.isWorkspacesErrored=!0,kr("FabricProvisioning","GetWorkspaces",i,!1),Od(r,t)}}async function Zhr(r,e){let t=r.state.deploymentTypeState;if(t.formState.tenantId===""&&!e||t.capacityIds.length!==0)return;let n=Date.now();try{let i=await Au.getFabricCapacities(e||t.formState.tenantId);t.capacityIds=i.map(s=>s.id),Od(r,t),vt("FabricProvisioning","GetWorkspaces",{},{capacitiesLoadTimeInMs:Date.now()-n})}catch(i){throw t.errorMessage=rt(i),kr("FabricProvisioning","LoadCapacities",i,!1),i}}async function Zet(r,e,t){if(r.formState.tenantId===""&&!t)return;e.role="Viewer";let n=Date.now();try{let i=await Au.getRolesForWorkspace(e.id,t||r.formState.tenantId);if(!i)return e;for(let s of i)Q1[s.role]>=Q1[e.role]&&r.userGroupIds.includes(s.id)&&(e.role=s.role);vt("FabricProvisioning","GetWorkspaceRole",{},{workspaceRoleLoadTimeInMs:Date.now()-n})}catch(i){r.errorMessage=rt(i),kr("FabricProvisioning","GetWorkspaceRole",i,!1)}return e}async function efr(r,e,t,n){let i=r.state.deploymentTypeState;if(i.userGroupIds.length===0){let a=i.formState.accountId.split(".")[0],c=await Yke(a);c.length>0&&(i.userGroupIds=c.map(l=>l.id)),i.userGroupIds.push(a)}let s={};for(let a of e)i.workspaces[a.id]=a,a.capacityId&&!i.capacityIds.includes(a.capacityId)?(a.hasCapacityPermissionsForProvisioning=!1,i.workspacesWithoutPermissions[a.id]=a):s[a.id]=a;let o=Date.now();if(Object.keys(s).length<Yhr){let a=await Promise.all(Object.values(s).map(async c=>await Zet(i,c,n)));for(let c of a)eSe(c.role,t)?i.workspacesWithPermissions[c.id]=c:i.workspacesWithoutPermissions[c.id]=c,i.workspaces[c.id]=c;vt("FabricProvisioning","GetPermissionsForWorkspaces",{},{workspacePermissionsLoadTimeInMs:Date.now()-o})}else i.workspacesWithPermissions=s;return Od(r,i),[...Object.values(i.workspacesWithPermissions),...Object.values(i.workspacesWithoutPermissions)]}async function Het(r,e){let t=r.workspacesWithPermissions[e];if(t&&!t.role){delete r.workspacesWithPermissions[t.id];let a=await Zet(r,t,r.formState.tenantId);eSe(a.role,"Contributor")?r.workspacesWithPermissions[a.id]=a:r.workspacesWithoutPermissions[a.id]=a,r.formComponents.workspace.options=Xet(r)}r.formState.workspace=t.id;let n=r.formComponents.workspace,i=n.validate(r,r.formState.workspace);if(n.validation=i,!i.isValid)r.formErrors.push("workspace"),r.databaseNamesInWorkspace=[];else{let a=Date.now(),c=await Au.getFabricDatabases(t,r.formState.tenantId);r.databaseNamesInWorkspace=c.map(l=>l.displayName),vt("FabricProvisioning","GetFabricDatabases",{},{fabricDatabasesLoadTimeInMs:Date.now()-a})}let s=r.formComponents.databaseName,o=s.validate(r,r.formState.databaseName);return s.validation=o,o.isValid||r.formErrors.push("databaseName"),r}async function tfr(r,e){let t=r.state.deploymentTypeState;if(t.formState.tenantId===""&&!e)return;let n=Date.now();t.provisionLoadState="loading",Od(r,t);try{t.database=await Au.createFabricSqlDatabase(t.formState.workspace,t.formState.databaseName,t.formState.databaseDescription,e||t.formState.tenantId),t.provisionLoadState="loaded",Od(r,t),vt("FabricProvisioning","ProvisionFabricDatabase",{},{provisionDatabaseLoadTimeInMs:Date.now()-n}),rfr(r)}catch(i){t.errorMessage=rt(i),t.provisionLoadState="error",Od(r,t),kr("FabricProvisioning","ProvisionFabricDatabase",i,!1)}}async function rfr(r){let e=r.state.deploymentTypeState;if(!e.database)return;let t=Date.now();e.connectionLoadState="loading",Od(r,e);try{let i=(await Au.getFabricDatabase(e.formState.workspace,e.database.id,e.formState.tenantId)).properties.connectionString,s=await r.mainController.connectionManager.parseConnectionString(i),o=await Os.createConnectionInfo(s);o.profileName=e.formState.profileName||e.database.displayName,o.groupId=e.formState.groupId,o.authenticationType="AzureMFA",o.accountId=e.formState.accountId;let a=await r.mainController.connectionManager.connectionUI.saveProfile(o);await r.mainController.createObjectExplorerSession(a),e.connectionLoadState="loaded",vt("FabricProvisioning","ConnectToFabricDatabase",{},{connectToDatabaseLoadTimeInMs:Date.now()-t})}catch(n){e.connectionLoadState="error",e.errorMessage=rt(n),kr("FabricProvisioning","ConnectToFabricDatabase",n,!1)}Od(r,e)}function ett(r){vt("FabricProvisioning","FinishFabricProvisioningDeployment",{formValidationState:r.formValidationLoadState,errorMessage:r.errorMessage,provisionState:r.provisionLoadState,connectionState:r.connectionLoadState})}function Od(r,e){r.state.deploymentTypeState=e,r.updateState(r.state)}function dSe(r,e){if(r===""||e.length===0)return"";let t=os.getHomeTenantIdForAccount(r);return e.some(n=>n.tenantId===t)?t:e.length>0?e[0].tenantId:""}var KY=class extends dO{constructor(t,n,i){super(t,n,"deployment","deployment",new VY,{title:ZD,viewColumn:Z1.ViewColumn.Active,iconPath:{dark:Z1.Uri.joinPath(t.extensionUri,"media","connectionDialogEditor_dark.svg"),light:Z1.Uri.joinPath(t.extensionUri,"media","connectionDialogEditor_light.svg")}});this.mainController=i;this.initialize()}requiredInputs;async initialize(){this.state.connectionGroupOptions=await this.mainController.connectionManager.connectionUI.getConnectionGroupOptions(),this.registerRpcHandlers(),this.state.loadState="loaded",this.updateState()}registerRpcHandlers(){this.registerReducer("initializeDeploymentSpecifics",async(t,n)=>{let i;return t.deploymentType=n.deploymentType,t.deploymentTypeState.loadState="loading",this.updateState(t),n.deploymentType===0?i=await Uet(t.connectionGroupOptions):n.deploymentType===1&&(i=await Wet(this,t.connectionGroupOptions,this.logger)),t.deploymentTypeState=i,t.formState=i.formState,t.formComponents=i.formComponents,t}),this.registerReducer("formAction",async(t,n)=>(t.deploymentType===0?t.deploymentTypeState=await Get(t.deploymentTypeState,n):(t=await this.handleDeploymentFormAction(t,n),t.deploymentTypeState.formState=t.formState,t.deploymentTypeState.formErrors=t.formErrors,t.deploymentTypeState.formComponents=t.formComponents),t)),this.registerReducer("createConnectionGroup",async(t,n)=>{console.log("Creating connection group with spec:",n.connectionGroupSpec);let i=await yY(n.connectionGroupSpec,this.mainController.connectionManager,"ConnectionDialog");return typeof i=="string"?t.formErrors.push(i):t.formState.groupId=i.id,t.formComponents.groupId.options=await this.mainController.connectionManager.connectionUI.getConnectionGroupOptions(),t.dialog=void 0,t.deploymentTypeState.dialog=t.dialog,t}),this.registerReducer("setConnectionGroupDialogState",async(t,n)=>(n.shouldOpen?t=gY(t):t.dialog=void 0,t.deploymentTypeState.dialog=t.dialog,t)),this.registerReducer("dispose",async(t,n)=>(t.deploymentType===0?Vet(t.deploymentTypeState):t.deploymentType===1&&ett(t.deploymentTypeState),this.panel.dispose(),this.dispose(),t)),Bet(this),Ket(this)}async updateItemVisibility(){}getActiveFormComponents(t){return Object.keys(t.formComponents)}async handleDeploymentFormAction(t,n){if(n.event.isAction){let i=t.formComponents[n.event.propertyName];if(i&&i.actionButtons){let s=i.actionButtons.find(o=>o.id===n.event.value);s?.callback&&await s.callback()}}else t.formState[n.event.propertyName]=n.event.value,this.state.deploymentTypeState.formState=t.formState,await this.validateDeploymentForm(n.event.propertyName);return await this.updateItemVisibility(),t}async validateDeploymentForm(t,n){let i=n||this.state.deploymentTypeState,s=[];if(t){let o=i.formComponents[t];if(!o.validate)return s;let a=o.validate(i,i.formState[t]);a.isValid||s.push(t),o.validation=a}else for(let o of Object.keys(i.formState)){let a=i.formComponents[o];if(!a.validate)continue;let c=a.validate(i,i.formState[o]);c.isValid||s.push(o),a.validation=c}return s}};var eF=class{_context;_event=new rtt.EventEmitter;_outputContentProvider;_statusview;_connectionMgr;_prompter;_vscodeWrapper;_initialized=!1;_lastSavedUri;_lastSavedTimer;_lastOpenedUri;_lastOpenedTimer;_untitledSqlDocumentService;_objectExplorerProvider;_queryHistoryProvider;_scriptingService;_queryHistoryRegistered=!1;_availableCommands;sqlTasksService;dacFxService;schemaCompareService;sqlProjectsService;azureAccountService;azureResourceService;tableDesignerService;copilotService;configuration;objectExplorerTree;executionPlanService;schemaDesignerService;connectionSharingService;constructor(e,t,n){this._context=e,t&&(this._connectionMgr=t),this._vscodeWrapper=n??new gi,this._untitledSqlDocumentService=new G1(this._vscodeWrapper),this.configuration=Lt.workspace.getConfiguration(),kp.createInstance(this._context,this._vscodeWrapper)}registerCommand(e){let t=this;this._context.subscriptions.push(Lt.commands.registerCommand(e,()=>t._event.emit(e)))}registerCommandWithArgs(e){let t=this;this._context.subscriptions.push(Lt.commands.registerCommand(e,n=>{t._event.emit(e,n)}))}dispose(){this.deactivate()}async deactivate(){Tg("de-activated."),await this.onDisconnect(),this._statusview.dispose()}get isExperimentalEnabled(){return this.configuration.get(ose)}get isRichExperiencesEnabled(){return this.configuration.get(uC)}get useLegacyConnectionExperience(){return this.configuration.get(pM)}async activate(){if(await this.initialize()){this.registerCommand(Fv),this._event.on(Fv,()=>{this.runAndLogErrors(this.onNewConnection())}),this.registerCommand(rM),this._event.on(rM,()=>{this.runAndLogErrors(this.onDisconnect())}),this.registerCommand(Die),this._event.on(Die,()=>{kp.getInstance().promptUserForNPSFeedback(),this.onRunQuery()}),this.registerCommand(Fie),this._event.on(Fie,async()=>{await this.onManageProfiles()}),this.registerCommand(jie),this._event.on(jie,async()=>{await this.onClearPooledConnections()}),this.registerCommand(oM),this._event.on(oM,()=>{this.onDeployNewDatabase()}),this.registerCommand(Mie),this._event.on(Mie,()=>{this.onRunCurrentStatement()}),this.registerCommand(Lie),this._event.on(Lie,()=>{this.runAndLogErrors(this.onChooseDatabase())}),this.registerCommand(lC),this._event.on(lC,()=>{this.runAndLogErrors(this.onChooseDatabase())}),this.registerCommand(nM),this._event.on(nM,()=>{this.runAndLogErrors(this.onChooseLanguageFlavor())}),this.registerCommand(tse),this._event.on(tse,async()=>{await kp.getInstance().launchSurvey("nps",Q_e())}),this.registerCommand(kie),this._event.on(kie,async()=>{await this.onCancelQuery()}),this.registerCommand(qie),this._event.on(qie,async()=>{await this.launchGettingStartedPage()}),this.registerCommand(zie),this._event.on(zie,()=>this.runAndLogErrors(this.onNewQuery())),this.registerCommand(Uie),this._event.on(Uie,()=>{this.onRebuildIntelliSense()}),this.registerCommandWithArgs(Yie),this._event.on(Yie,a=>{this.onLoadCompletionExtension(a)}),this.registerCommand(sM),this._event.on(sM,async()=>{await this.onToggleSqlCmd()}),this.registerCommand(Xie),this._event.on(Xie,()=>this.removeAadAccount(this._prompter)),this.registerCommand(Jie),this._event.on(Jie,()=>this.addAadAccount()),this.registerCommandWithArgs(Zie),this._event.on(Zie,()=>this.onClearAzureTokenCache()),this.registerCommand(ese),this._event.on(ese,()=>{this.onRunQuery({includeEstimatedExecutionPlanXml:!0})}),this._context.subscriptions.push(Lt.languages.registerCodeLensProvider({language:"sql"},new AY(this._connectionMgr))),this.initializeObjectExplorer(),this.registerCommandWithArgs(iM),this._event.on(iM,a=>{this._connectionMgr.connectionUI.saveProfile(a).then(async()=>{await this.createObjectExplorerSession(a)}).catch(c=>{this._vscodeWrapper.showErrorMessage(c)})}),this.registerCommand(Kie),this._event.on(Kie,()=>{Lt.workspace.getConfiguration().update(LG,!0,!0)}),this.registerCommand(Qie),this._event.on(Qie,()=>{Lt.workspace.getConfiguration().update(LG,!1,!0)}),this.registerCommand(qG),this._event.on(qG,async()=>{await this._vscodeWrapper.getConfiguration().update(uC,!0,Lt.ConfigurationTarget.Global),await Lt.commands.executeCommand("workbench.action.reloadWindow")});let t=async(a,c=void 0)=>{let l=Lt.window.activeTextEditor,u=l?.document.uri.toString(),d=l?.selection.isEmpty||!c?a:c;u&&(this.connectionManager.isConnected(u)||(await this.onNewConnection(),vt("QueryEditor","CreateConnection")),Lt.commands.executeCommand("workbench.action.chat.open",d))};this.registerCommandWithArgs(Hie),this._event.on(Hie,async a=>{vt("MssqlCopilot","ChatWithDatabase");let c=Object.assign({},a.connectionProfile),l=Sn.getDatabaseName(a);l!==c.database&&l!==Jd?c.database=l:l===Jd&&(c.database="");var u=!1;let d=Lt.window.activeTextEditor;if(d){let p=d.document.uri.toString(),m=this._connectionMgr.getConnectionInfo(p);m&&m.credentials.user===c.user&&m.credentials.database===c.database&&(u=!0)}if(!u)if(a.updateConnectionProfile(c),await this.onNewQuery(a),d=Lt.window.activeTextEditor,d)if(d.document.getText().length===0){let m=c.server;await d.edit(f=>{f.insert(new Lt.Position(0,0),`-- @${Uh} Chat Query Editor (${m}:${c.database}:${c.user})
`)})}else console.warn("Chat with database: unable to open editor");else this._vscodeWrapper.showErrorMessage("Chat with database: unable to open editor");d&&Lt.commands.executeCommand("workbench.action.chat.open",`@${Uh} Hello!`)}),this.registerCommandWithArgs(Wie),this._event.on(Wie,async a=>{vt("MssqlCopilot","ChatWithDatabaseInAgentMode");let c=Object.assign({},a.connectionProfile),l=Sn.getDatabaseName(a);l!==c.database&&l!==Jd?c.database=l:l===Jd&&(c.database="");let u=await this.findChatOpenAgentCommand();u?Lt.commands.executeCommand(u,`Connect to ${c.server},${c.database}${c.profileName?` using profile ${c.profileName}`:""}.`):this._vscodeWrapper.showErrorMessage(mt.chatCommandNotAvailable)}),this._context.subscriptions.push(Lt.commands.registerCommand(gLe,async()=>{vt("MssqlCopilot","ExplainQuery"),await t(det,pet)})),this._context.subscriptions.push(Lt.commands.registerCommand(yLe,async()=>{vt("MssqlCopilot","RewriteQuery"),await t(met,het)})),this._context.subscriptions.push(Lt.commands.registerCommand(vLe,async()=>{vt("MssqlCopilot","AnalyzeQueryPerformance"),await t(cet)})),this.initializeQueryHistory(),this.sqlTasksService=new AW(Mn.instance,this._untitledSqlDocumentService),this.dacFxService=new RW(Mn.instance),this.sqlProjectsService=new xW(Mn.instance),this.schemaCompareService=new OW(Mn.instance);let n=new AG;this.azureAccountService=new EW(this._connectionMgr.azureController,this._connectionMgr.accountStore),this.azureResourceService=new TW(this._connectionMgr.azureController,n,this._connectionMgr.accountStore),this.tableDesignerService=new lY(Mn.instance),this.copilotService=new OY(Mn.instance),this.schemaDesignerService=new EY(Mn.instance),this.connectionSharingService=new NY(this._context,this._connectionMgr.client,this._connectionMgr,this._vscodeWrapper,this._scriptingService);let i=new this.ExecutionPlanCustomEditorProvider(this._context,this._vscodeWrapper,this.executionPlanService,this._untitledSqlDocumentService);Lt.window.registerCustomEditorProvider("mssql.executionPlanView",i);let s=this,o={async handleUri(a){await new SY(s._vscodeWrapper,s,s._connectionMgr.client).handleUri(a)}};return Lt.window.registerUriHandler(o),this._vscodeWrapper.onDidCloseTextDocument(async a=>await this.onDidCloseTextDocument(a)),this._vscodeWrapper.onDidOpenTextDocument(a=>this.onDidOpenTextDocument(a)),this._vscodeWrapper.onDidChangeActiveTextEditor(a=>this.onDidChangeActiveTextEditor(a)),this._vscodeWrapper.onDidSaveTextDocument(a=>this.onDidSaveTextDocument(a)),this._vscodeWrapper.onDidChangeConfiguration(a=>this.onDidChangeConfiguration(a)),this.registerLanguageModelTools(),!0}}registerLanguageModelTools(){this._context.subscriptions.push(Lt.lm.registerTool(FG,new MY(this.connectionManager))),this._context.subscriptions.push(Lt.lm.registerTool(jG,new LY(this.connectionManager))),this._context.subscriptions.push(Lt.lm.registerTool(UG,new kY(this.connectionManager))),this._context.subscriptions.push(Lt.lm.registerTool(BG,new FY(this.connectionManager))),this._context.subscriptions.push(Lt.lm.registerTool(YG,new qY(this.connectionManager))),this._context.subscriptions.push(Lt.lm.registerTool(KG,new zY(this.connectionManager))),this._context.subscriptions.push(Lt.lm.registerTool(QG,new DY(this.connectionManager,async(e,t)=>{(await gw.getInstance().getSchemaDesigner(this._context,this._vscodeWrapper,this,this.schemaDesignerService,t,void 0,e)).revealToForeground()}))),this._context.subscriptions.push(Lt.lm.registerTool(GG,new jY(this.connectionManager,Mn.instance))),this._context.subscriptions.push(Lt.lm.registerTool($G,new UY(this.connectionManager,Mn.instance))),this._context.subscriptions.push(Lt.lm.registerTool(VG,new BY(this.connectionManager,Mn.instance))),this._context.subscriptions.push(Lt.lm.registerTool(HG,new GY(this.connectionManager,Mn.instance))),this._context.subscriptions.push(Lt.lm.registerTool(WG,new $Y(this.connectionManager,Mn.instance)))}async scriptNode(e,t,n=!1){let i=async()=>{let o=Sn.getNodeUri(e),a=e.connectionProfile,c=Sn.getDatabaseName(e);if((!this.connectionManager.isConnected(o)||a.database!==c)&&(a.database=c,!this.connectionManager.isConnecting(o))){let v=new xi;await this.connectionManager.connect(o,a,v),await v}let l=await this._scriptingService.scriptTreeNode(e,o,t),d=(await this._untitledSqlDocumentService.newQuery(l)).document.uri.toString(!0),p=this._scriptingService.getObjectFromNode(e),m=`${p.schema}.${p.name}`,f=new xi;if(await this.connectionManager.connect(d,a,f),await f,this._statusview.languageFlavorChanged(d,il),this._statusview.sqlCmdModeChanged(d,!1),n){let v=new xi;await this._outputContentProvider.runQuery(this._statusview,d,void 0,m,void 0,v),await v,await this.connectionManager.connectionStore.removeRecentlyUsed(a)}let y;switch(t){case 0:y="Select";break;case 1:y="Create";break;case 2:y="Insert";break;case 3:y="Update";break;case 4:y="Delete";break;case 5:y="Execute";break;case 6:y="Alter";break;default:y="Unknown";break}vt("QueryEditor","RunQuery",{isScriptExecuted:n.toString(),objectType:e.nodeType,operation:y},void 0,a,this.connectionManager.getServerInfo(a))},s="";switch(t){case 0:s=zn.ScriptSelectLabel;break;case 1:s=zn.ScriptCreateLabel;break;case 2:s=zn.ScriptInsertLabel;break;case 3:s=zn.ScriptUpdateLabel;break;case 4:s=zn.ScriptDeleteLabel;break;case 5:s=zn.ScriptExecuteLabel;break;case 6:s=zn.ScriptAlterLabel;break;default:s=zn.ScriptSelectLabel}await Lt.window.withProgress({location:Lt.ProgressLocation.Notification,title:zn.FetchingScriptLabel(s)},async()=>{let o=Fn("ObjectExplorer","ScriptNode",void 0,{operation:s,nodeType:e.nodeType,subType:e.nodeSubType});try{await i(),o.end("Succeeded")}catch(a){o.endFailed(a,!1)}})}isInitialized(){return this._initialized}async getAvailableCommands(){return this._availableCommands||(this._availableCommands=await Lt.commands.getCommands()),this._availableCommands}async findChatOpenAgentCommand(){let e=await this.getAvailableCommands(),t=[NLe,DLe];for(let n of t)if(e.includes(n))return n}get context(){return this._context}async initialize(){await Mn.instance.initialize(this._context),this._statusview=new BC(this._vscodeWrapper),this._prompter=new CL(this._vscodeWrapper),this.executionPlanService=new bY(Mn.instance),this._outputContentProvider=new ZH(this._context,this._statusview,this._vscodeWrapper,this.untitledSqlDocumentService,this.executionPlanService),this._connectionMgr=new B1(this._context,this._statusview,this._prompter,this.useLegacyConnectionExperience),this.showOnLaunchPrompts();let e=this._vscodeWrapper.activeTextEditor;return e&&this._vscodeWrapper.isEditingSqlFile&&await this.onDidOpenTextDocument(e.document),await this.sanitizeConnectionProfiles(),await this.loadTokenCache(),Tg("activated."),vt("General","Activated",{experimentalFeaturesEnabled:this.isExperimentalEnabled.toString(),modernFeaturesEnabled:this.isRichExperiencesEnabled.toString(),useLegacyConnections:this.useLegacyConnectionExperience.toString()}),await this._connectionMgr.initialized,this._statusview.setConnectionStore(this._connectionMgr.connectionStore),this._initialized=!0,!0}async loadTokenCache(){await this._connectionMgr.azureController.loadTokenCache()}async sanitizeConnectionProfiles(){let e=async(s,o)=>{let a=!1;for(let c of s){c&&c.authenticationType!=="AzureMFA"&&c.azureAccountToken!==void 0&&(c.azureAccountToken=void 0,a=!0),oi(c.password)||(await this.connectionManager.connectionStore.saveProfilePasswordIfNeeded(c),c.password="",a=!0);let l=bGe(c);l.updateStatus&&await this.connectionManager.connectionStore.saveProfile(l.connection)}a&&await this._vscodeWrapper.setConfiguration(hn,cC,s,o)},t=new Map,i=this._vscodeWrapper.getConfiguration(hn,this._vscodeWrapper.activeTextEditorUri).inspect(cC);t.set(Lt.ConfigurationTarget.Global,i.globalValue||[]),t.set(Lt.ConfigurationTarget.Workspace,i.workspaceValue||[]),t.set(Lt.ConfigurationTarget.WorkspaceFolder,i.workspaceFolderValue||[]);for(let s of t.keys())await e(t.get(s),s)}async createObjectExplorerSession(e){let t=!0,n;for(;t;)t=!1,n=await this._objectExplorerProvider.createSession(e),n?.shouldRetryOnFailure&&(t=!0);if(n){let i=await n.connectionNode;if(i)return this._objectExplorerProvider.refresh(void 0),i}}async onSearchObjects(e){try{let t,n;if(e&&e.connectionProfile){if(t=Sn.getNodeUri(e),n=e.connectionProfile.database,!this.connectionManager.isConnected(t)){let H=e.connectionProfile,ee=Sn.getDatabaseName(e);if(ee!==H.database&&(H.database=ee,n=ee),!this.connectionManager.isConnecting(t)){let ye=new xi;await this.connectionManager.connect(t,H,ye),await ye}}}else{let H=this._vscodeWrapper.activeTextEditorUri;if(!H){Lt.window.showErrorMessage(xie);return}let ee=this._connectionMgr.getConnectionInfo(H);if(!ee){Lt.window.showErrorMessage(xie);return}t=H,n=ee.credentials.database}if(!t||t.trim()===""){Lt.window.showErrorMessage(kke);return}let i=new uO(this._connectionMgr.client);await i.warmCache(t).catch(()=>{});let s=Lt.window.createQuickPick();s.placeholder=Dke,s.matchOnDescription=!0,s.matchOnDetail=!0,s.ignoreFocusOut=!0,s.items=[];let o=0,a,c=async(H,ee)=>{let ye=H?.trim();if(!ye){s.items=[];return}let $e=await i.searchObjects(t,ye,n);if(ee===o){if(!$e.success){s.items=[{label:Rie($e.error),description:"",detail:""}];return}if($e.objects.length===0){let Be=Mke(ye);s.items=[{label:Be,description:"",detail:""}];return}s.items=$e.objects.map(Be=>({label:Be.name,description:Be.type,detail:Be.schema?`${Be.schema}.${Be.name}`:Be.name,object:Be}))}},l=s.onDidChangeValue(H=>{o++;let ee=o;a&&clearTimeout(a),s.busy=!0,a=setTimeout(()=>{c(H,ee).finally(()=>{ee===o&&(s.busy=!1)})},200)}),u,d=s.onDidAccept(()=>{u=s.selectedItems?.[0],s.hide()}),p=new Promise(H=>{let ee=s.onDidHide(()=>{ee.dispose(),H()})});if(s.show(),await p,l.dispose(),d.dispose(),s.dispose(),!u||!u.object)return;let m=u.object.type,f=[];m==="Table"||m==="View"?f.push({label:zn.ScriptSelectLabel,op:0},{label:zn.ScriptCreateLabel,op:1}):m==="Stored Procedure"?f.push({label:zn.ScriptExecuteLabel,op:5},{label:zn.ScriptAlterLabel,op:6}):m==="Scalar Function"||m==="Table-valued Function"?f.push({label:zn.ScriptSelectLabel,op:0},{label:zn.ScriptAlterLabel,op:6}):f.push({label:zn.ScriptSelectLabel,op:0});let y=await Lt.window.showQuickPick(f.map(H=>H.label),{placeHolder:zn.FetchingScriptLabel("\u2026"),ignoreFocusOut:!0});if(!y)return;let v=f.find(H=>H.label===y)?.op??0,_=this._connectionMgr.getConnectionInfo(t),C=this._connectionMgr.getServerInfo(_?.credentials),w={type:(H=>{switch(H){case"Table":return"Table";case"View":return"View";case"Stored Procedure":return"StoredProcedure";case"Scalar Function":return"ScalarValuedFunction";case"Table-valued Function":return"TableValuedFunction";default:return H}})(m),schema:u.object.schema,name:u.object.name},R=this._scriptingService.createScriptingParams(C,w,t,v),I=await this._scriptingService.script(R),G=(await this._untitledSqlDocumentService.newQuery(I)).document.uri.toString(!0),L=new xi;await this.connectionManager.connect(G,_?.credentials,L),await L,this._statusview.languageFlavorChanged(G,il),this._statusview.sqlCmdModeChanged(G,!1)}catch(t){Lt.window.showErrorMessage(Rie(rt(t)))}}initializeObjectExplorer(e){let t=this;this._objectExplorerProvider=e??new yW(this._vscodeWrapper,this._connectionMgr,this.isRichExperiencesEnabled),this.objectExplorerTree=Lt.window.createTreeView("objectExplorer",{treeDataProvider:this._objectExplorerProvider,canSelectMany:!1,showCollapseAll:!0,dragAndDropController:new wY(this._vscodeWrapper,this._connectionMgr.connectionStore)}),this._context.subscriptions.push(this.objectExplorerTree),this.registerCommandWithArgs(ed),this._event.on(ed,async i=>{if(this.useLegacyConnectionExperience)await t.createObjectExplorerSession();else{let s,o;i&&(EGe(i)?s=i:i instanceof fd&&(o=i.connectionGroup)),new P_(this._context,this._vscodeWrapper,this,this._objectExplorerProvider,s,o).revealToForeground()}}),this.registerCommandWithArgs(Bie),this._event.on(Bie,i=>{Lt.commands.executeCommand(ed,i)}),this._context.subscriptions.push(Lt.commands.registerCommand(fLe,async i=>{let s=i.connectionProfile,o=Sn.getDatabaseName(i);o!==s.database&&o!==Jd?s.database=o:o===Jd&&(s.database=""),i.updateConnectionProfile(s),await t.onNewQuery(i)})),this._context.subscriptions.push(Lt.commands.registerCommand(bLe,async i=>{await this._objectExplorerProvider.removeNode(i)})),this._context.subscriptions.push(Lt.commands.registerCommand(_Le,async i=>{await this._objectExplorerProvider.refreshNode(i)}));let n=async i=>{this._objectExplorerProvider.deleteChildrenCache(i.parentNode),this._objectExplorerProvider.refresh(i.parentNode)};if(this._context.subscriptions.push(Lt.commands.registerCommand(MG,async i=>{switch(await this._vscodeWrapper.showErrorMessage(zn.FailedOEConnectionError,zn.FailedOEConnectionErrorRetry,zn.FailedOEConnectionErrorUpdate)){case zn.FailedOEConnectionErrorUpdate:new P_(this._context,this._vscodeWrapper,this,this._objectExplorerProvider,i.parentNode.connectionProfile).revealToForeground();break;case zn.FailedOEConnectionErrorRetry:await n(i);break;default:break}})),this._context.subscriptions.push(Lt.commands.registerCommand(kG,async i=>{await n(i)})),this._context.subscriptions.push(Lt.commands.registerCommand(SLe,async i=>{await this._objectExplorerProvider.disconnectNode(i)})),this.registerCommand(Gie),this._event.on(Gie,()=>{new K1(this._context,this._vscodeWrapper,this.connectionManager.connectionStore.connectionConfig).revealToForeground()}),this.registerCommandWithArgs($ie),this._event.on($ie,i=>{new K1(this._context,this._vscodeWrapper,this.connectionManager.connectionStore.connectionConfig,i.connectionGroup).revealToForeground()}),this.registerCommandWithArgs(Vie),this._event.on(Vie,async i=>{if(!(i instanceof fd))return;let s;i.children.length>0?s=await Lt.window.showInformationMessage(zn.ConnectionGroupDeletionConfirmationWithContents(typeof i.label=="string"?i.label:i.label.label),{modal:!0},zn.ConnectionGroupDeleteContents,zn.ConnectionGroupMoveContents):s=await Lt.window.showInformationMessage(zn.ConnectionGroupDeletionConfirmationWithoutContents(typeof i.label=="string"?i.label:i.label.label),{modal:!0},zi.delete),s===zn.ConnectionGroupDeleteContents||s===zi.delete?this.connectionManager.connectionStore.connectionConfig.removeGroup(i.connectionGroup.id,"delete"):s===zn.ConnectionGroupMoveContents&&this.connectionManager.connectionStore.connectionConfig.removeGroup(i.connectionGroup.id,"move")}),this.isRichExperiencesEnabled){this._context.subscriptions.push(Lt.commands.registerCommand(mLe,async(...s)=>{let o,a,c;s.length>=2&&(o=s[0],a=s[1],c=s.length>2&&typeof s[2]=="boolean"?s[2]:!1),await this.onSchemaCompare(o,a,c)})),this._context.subscriptions.push(Lt.commands.registerCommand(hLe,async()=>{await this.onSchemaCompare()})),this._context.subscriptions.push(Lt.commands.registerCommand(zLe,async s=>{new P_(this._context,this._vscodeWrapper,this,this._objectExplorerProvider,s.connectionProfile).revealToForeground()})),this._context.subscriptions.push(Lt.commands.registerCommand(FLe,async s=>{(await gw.getInstance().getSchemaDesigner(this._context,this._vscodeWrapper,this,this.schemaDesignerService,s.metadata.name,s)).revealToForeground()})),this._context.subscriptions.push(Lt.commands.registerCommand(LLe,async s=>{new V1(this._context,this._vscodeWrapper,this.tableDesignerService,this._connectionMgr,this._untitledSqlDocumentService,s,this._objectExplorerProvider,this.objectExplorerTree).revealToForeground()})),this._context.subscriptions.push(Lt.commands.registerCommand(qLe,async s=>{new V1(this._context,this._vscodeWrapper,this.tableDesignerService,this._connectionMgr,this._untitledSqlDocumentService,s,this._objectExplorerProvider,this.objectExplorerTree).revealToForeground()}));let i=async s=>{let o=await vY.getFilters(this._context,this._vscodeWrapper,s);if(o)s.filters=o,s.collapsibleState===Lt.TreeItemCollapsibleState.Collapsed?await this._objectExplorerProvider.refreshNode(s):s.collapsibleState===Lt.TreeItemCollapsibleState.Expanded&&await this._objectExplorerProvider.expandNode(s,s.sessionId,void 0),await this.objectExplorerTree.reveal(s,{select:!0,focus:!0,expand:!0});else{await this.objectExplorerTree.reveal(s,{select:!0,focus:!0});return}};this._context.subscriptions.push(Lt.commands.registerCommand(xLe,i)),this._context.subscriptions.push(Lt.commands.registerCommand(OLe,i)),this._context.subscriptions.push(Lt.commands.registerCommand(ALe,async s=>{s.filters=[],await this._objectExplorerProvider.refreshNode(s),await this.objectExplorerTree.reveal(s,{select:!0,focus:!0,expand:!0})}))}this._scriptingService=new wW(this._connectionMgr),this._context.subscriptions.push(Lt.commands.registerCommand(PLe,async i=>{await this.scriptNode(i,0,!0),kp.getInstance().promptUserForNPSFeedback()})),this._context.subscriptions.push(Lt.commands.registerCommand(wLe,async i=>await this.scriptNode(i,1))),this._context.subscriptions.push(Lt.commands.registerCommand(ELe,async i=>await this.scriptNode(i,4))),this._context.subscriptions.push(Lt.commands.registerCommand(TLe,async i=>await this.scriptNode(i,5))),this._context.subscriptions.push(Lt.commands.registerCommand(ILe,async i=>await this.scriptNode(i,6))),this._context.subscriptions.push(Lt.commands.registerCommand(RLe,async i=>{let s=Sn.getQualifiedName(i);s&&await this._vscodeWrapper.clipboardWriteText(s)})),this._context.subscriptions.push(Lt.commands.registerCommand(BLe,async i=>{if(!(!i||!i.connectionProfile||!await this.isContainerReadyForCommands(i)))try{this._objectExplorerProvider.deleteChildrenCache(i),await this._objectExplorerProvider.setNodeLoading(i),this._objectExplorerProvider.refresh(i),await this.objectExplorerTree.reveal(i,{select:!0,focus:!0,expand:!0}),await this.connectionManager.connectionUI.saveProfile(i.connectionProfile).then(async()=>{await this.createObjectExplorerSession(i.connectionProfile)})}catch{Lt.window.showErrorMessage(Rr.failStartContainer(i.connectionProfile.containerName))}})),this._context.subscriptions.push(Lt.commands.registerCommand(jLe,async i=>{if(!i||!i.connectionProfile||!await this.isContainerReadyForCommands(i))return;let s=i.connectionProfile.containerName;i.loadingLabel=Rr.stoppingContainerLoadingLabel,await this._objectExplorerProvider.setNodeLoading(i),this._objectExplorerProvider.refresh(i),await Q$e(s).then(async o=>{o&&(i.loadingLabel=Rr.startingContainerLoadingLabel,await this._objectExplorerProvider.disconnectNode(i).then(()=>this._objectExplorerProvider.refresh(void 0))),Lt.window.showInformationMessage(o?Rr.stoppedContainerSucessfully(s):Rr.failStopContainer(s))})})),this._context.subscriptions.push(Lt.commands.registerCommand(ULe,async i=>{if(!i||!i.connectionProfile||!await this.isContainerReadyForCommands(i))return;if(await Lt.window.showInformationMessage(Rr.deleteContainerConfirmation(i.connectionProfile.containerName),{modal:!0},zi.delete)===zi.delete){i.loadingLabel=Rr.deletingContainerLoadingLabel,await this._objectExplorerProvider.setNodeLoading(i),this._objectExplorerProvider.refresh(i);let o=i.connectionProfile.containerName,a=await K$e(o);if(Lt.window.showInformationMessage(a?Rr.deletedContainerSucessfully(o):Rr.failDeleteContainer(o)),i.loadingLabel=Rr.startingContainerLoadingLabel,a)return await this._objectExplorerProvider.removeNode(i,!1),this._objectExplorerProvider.refresh(void 0)}}))}initializeQueryHistory(){let e=this._vscodeWrapper.getConfiguration(fi);e.get(i2)&&!this._queryHistoryRegistered&&(this._queryHistoryProvider=new CW(this._connectionMgr,this._outputContentProvider,this._vscodeWrapper,this._untitledSqlDocumentService,this._statusview,this._prompter),this._context.subscriptions.push(Lt.window.registerTreeDataProvider("queryHistory",this._queryHistoryProvider)),this._context.subscriptions.push(Lt.commands.registerCommand(DG,(n,i)=>{e=this._vscodeWrapper.getConfiguration(fi);let s=e.get(i2),o=e.get(uM);if(s&&o){let a=new Date;this._queryHistoryProvider.refresh(n,a,i)}})),this._context.subscriptions.push(Lt.commands.registerCommand(oLe,()=>{this._queryHistoryProvider.clearAll()})),this._context.subscriptions.push(Lt.commands.registerCommand(aLe,n=>{this._queryHistoryProvider.deleteQueryHistoryEntry(n)})),this._context.subscriptions.push(Lt.commands.registerCommand(cLe,async n=>{await this._queryHistoryProvider.openQueryHistoryEntry(n)})),this._context.subscriptions.push(Lt.commands.registerCommand(lLe,async n=>{await this._queryHistoryProvider.openQueryHistoryEntry(n,!0)})),this._context.subscriptions.push(Lt.commands.registerCommand(uLe,async n=>{await this._queryHistoryProvider.startQueryHistoryCapture()})),this._context.subscriptions.push(Lt.commands.registerCommand(dLe,async n=>{await this._queryHistoryProvider.pauseQueryHistoryCapture()})),this._context.subscriptions.push(Lt.commands.registerCommand(pLe,async()=>{await this._queryHistoryProvider.showQueryHistoryCommandPalette()})),this._queryHistoryRegistered=!0)}async onToggleSqlCmd(){let e,t=this._vscodeWrapper.activeTextEditorUri,n=this._outputContentProvider.getQueryRunner(t);if(n)e=n.isSqlCmd;else{e=!1;let i=this._vscodeWrapper.activeTextEditor,s=mO.basename(i.document.fileName);this._outputContentProvider.createQueryRunner(this._statusview,t,s)}await this._outputContentProvider.toggleSqlCmd(this._vscodeWrapper.activeTextEditorUri),await this._connectionMgr.onChooseLanguageFlavor(!0,!e),this._statusview.sqlCmdModeChanged(this._vscodeWrapper.activeTextEditorUri,!e)}async onCancelQuery(){if(!(!this.canRunCommand()||!this.validateTextDocumentHasFocus()))try{let e=this._vscodeWrapper.activeTextEditorUri;await this._outputContentProvider.cancelQuery(e)}catch(e){console.warn(`Unexpected error cancelling query : ${rt(e)}`)}}async onChooseDatabase(){return this.canRunCommand()&&this.validateTextDocumentHasFocus()?await this._connectionMgr.onChooseDatabase():!1}async onChooseLanguageFlavor(){return this.canRunCommand()&&this.validateTextDocumentHasFocus()&&(this._vscodeWrapper.activeTextEditorUri&&this._vscodeWrapper.isEditingSqlFile?this._connectionMgr.onChooseLanguageFlavor():this._vscodeWrapper.showWarningMessage(PT)),!1}async onDisconnect(){if(this.canRunCommand()&&this.validateTextDocumentHasFocus()){let e=this._vscodeWrapper.activeTextEditorUri,t=this._outputContentProvider.getQueryRunner(e);t&&t.isExecutingQuery&&await this._outputContentProvider.cancelQuery(e);let n=await this._connectionMgr.onDisconnect();return n&&Lt.commands.executeCommand("setContext","mssql.editorConnected",!1),n}return!1}async onManageProfiles(){if(this.canRunCommand()){await this._connectionMgr.onManageProfiles();return}}async onClearPooledConnections(){if(this.canRunCommand()){await this._connectionMgr.onClearPooledConnections();return}}async onNewConnection(){if(this.canRunCommand()&&this.validateTextDocumentHasFocus()){let e=await this._connectionMgr.onNewConnection();if(e)return await this.createObjectExplorerSession(e),!0}return!1}onDeployNewDatabase(){vt("Deployment","OpenDeploymentDialog"),new KY(this._context,this._vscodeWrapper,this).revealToForeground()}async connect(e,t,n,i){return this.canRunCommand()&&e&&t&&await this._connectionMgr.connect(e,t,n)?(i&&await this.createObjectExplorerSession(t),!0):!1}onRebuildIntelliSense(){if(this.canRunCommand()&&this.validateTextDocumentHasFocus()){let e=this._vscodeWrapper.activeTextEditorUri;e&&this._vscodeWrapper.isEditingSqlFile?(this._statusview.languageServiceStatusChanged(e,xT),Mn.instance.sendNotification(jce.type,{ownerUri:e})):this._vscodeWrapper.showWarningMessage(PT)}}onLoadCompletionExtension(e){Mn.instance.sendRequest(Gce.type,e)}async onRunCurrentStatement(e){let t=e||this;try{if(!t.canRunCommand())return;if(!t.canRunV2Command()){await this._vscodeWrapper.showErrorMessage(PG);return}if(!t.validateTextDocumentHasFocus()||!await this.checkIsReadyToExecuteQuery())return;let n=t._vscodeWrapper.activeTextEditor,i=t._vscodeWrapper.activeTextEditorUri,s=mO.basename(n.document.fileName);if(n.document.getText(void 0).trim().length===0)return;let o={startLine:n.selection.start.line,startColumn:n.selection.start.character,endLine:0,endColumn:0};await t._outputContentProvider.runCurrentStatement(t._statusview,i,o,s)}catch(n){console.warn(`Unexpected error running current statement : ${n}`)}}async onRunQuery(e){try{if(!this.canRunCommand()||!this.validateTextDocumentHasFocus()||!await this.checkIsReadyToExecuteQuery())return;let t=this._vscodeWrapper.activeTextEditor,n=this._vscodeWrapper.activeTextEditorUri;if(t.selections?.length>1){this._vscodeWrapper.showErrorMessage(Rke);return}this.connectionManager.isConnected(n)||(await this.onNewConnection(),vt("QueryEditor","CreateConnection")),await this._connectionMgr.refreshAzureAccountToken(n);let i=mO.basename(t.document.fileName),s;if(!t.selection.isEmpty){let a=t.selection;s={startLine:a.start.line,startColumn:a.start.character,endLine:a.end.line,endColumn:a.end.character}}let o=t.selection.isEmpty?void 0:t.selection;if(t.document.getText(o).trim().length===0)return;md.deleteMainKey(n),await this._outputContentProvider.runQuery(this._statusview,n,s,i,e)}catch(t){console.warn(`Unexpected error running query : ${t}`)}}async checkIsReadyToExecuteQuery(){return await this.checkForActiveSqlFile()?this._connectionMgr.isConnected(this._vscodeWrapper.activeTextEditorUri)?!0:await this.onNewConnection():!1}runAndLogErrors(e){let t=this;return e.catch(n=>{t._vscodeWrapper.showErrorMessage(gMe+n)})}get connectionManager(){return this._connectionMgr}set connectionManager(e){this._connectionMgr=e}get untitledSqlDocumentService(){return this._untitledSqlDocumentService}set untitledSqlDocumentService(e){this._untitledSqlDocumentService=e}canRunCommand(){return this._connectionMgr===void 0?(Ll(_Me),!1):!0}validateTextDocumentHasFocus(){return this._vscodeWrapper.activeTextEditorUri===void 0?(Ll(ske),!1):!0}async checkForActiveSqlFile(){return this.validateTextDocumentHasFocus()?this._vscodeWrapper.isEditingSqlFile?!0:await this._connectionMgr.connectionUI.promptToChangeLanguageMode():!1}canRunV2Command(){return Mn.instance.getServiceVersion()>1}async showOnLaunchPrompts(){this.shouldShowEnableRichExperiencesPrompt()?this.showEnableRichExperiencesPrompt():this.showFirstLaunchPrompts()}shouldShowEnableRichExperiencesPrompt(){return!(this._vscodeWrapper.getConfiguration().get(ase)||this._vscodeWrapper.getConfiguration().get(uC))}async showEnableRichExperiencesPrompt(){if(!this.shouldShowEnableRichExperiencesPrompt())return;let e=await this._vscodeWrapper.showInformationMessage(Bke(uqe),TG,zi.dontShowAgain),t;switch(e){case TG:t="enableRichExperiences";break;case zi.dontShowAgain:t="dontShowAgain";break;default:t="dismissed"}vt("General","EnableRichExperiencesPrompt",{response:t}),this.doesExtensionLaunchedFileExist(),e===TG?await Lt.commands.executeCommand(qG):e===zi.dontShowAgain&&await this._vscodeWrapper.getConfiguration().update(ase,!0,Lt.ConfigurationTarget.Global)}async showFirstLaunchPrompts(){let e=this;if(!this.doesExtensionLaunchedFileExist()){let t=_De,n=this._vscodeWrapper.showInformationMessage(SDe,t).then(async i=>{i===t&&await e.launchReleaseNotesPage()});await Promise.all([n])}}async launchReleaseNotesPage(){await Lt.env.openExternal(Lt.Uri.parse(YLe))}async launchGettingStartedPage(){await Lt.env.openExternal(Lt.Uri.parse(QLe))}async newQueryFromProfile(e,t,n,i,s){let o=t;if(s&&!n&&await this.createObjectExplorerSession(t),this._statusview.languageFlavorChanged(e,il),o.connectionString&&o.savePassword){let a=await this._connectionMgr.connectionStore.lookupPassword(o,!0);o.connectionString=a}return await this.connectionManager.connect(e,o),this._statusview.sqlCmdModeChanged(e,!1),await this.connectionManager.connectionStore.removeRecentlyUsed(o),vt("ObjectExplorer","NewQuery",{nodeType:i,isContainer:o?.containerName?"true":"false"},void 0,t,this._connectionMgr.getServerInfo(t)),!0}async newQueryFromPrompt(e){let t=await this._connectionMgr.onNewConnection();return t&&await this.createObjectExplorerSession(t),this._statusview.sqlCmdModeChanged(e,!1),vt("CommandPalette","NewQuery",{isContainer:t?.containerName?"true":"false"},void 0,t,this._connectionMgr.getServerInfo(t)),!0}async onNewQuery(e,t){if(!this.canRunCommand())return;let n=Lt.window.activeTextEditor?Lt.window.activeTextEditor.document.uri.toString(!0):void 0,s=(await this._untitledSqlDocumentService.newQuery(t,!0)).document.uri.toString(!0);if(e)return await this.newQueryFromProfile(s,e.connectionProfile,e.sessionId,e.nodeType,!0);if(n){let a=this._connectionMgr.getConnectionInfo(n);if(a)return await this.newQueryFromProfile(s,a.credentials,void 0,"previousEditor",!1)}let o=this.objectExplorerTree.selection?.[0];return o&&o.sessionId?await this.newQueryFromProfile(s,o.connectionProfile,o.sessionId,o.nodeType,!0):await this.newQueryFromPrompt(s)}async onSchemaCompare(e,t,n=!1){let i=await this.schemaCompareService.schemaCompareGetDefaultOptions();new TY(this._context,this._vscodeWrapper,e,t,n,this.schemaCompareService,this._connectionMgr,i,ps.Title).revealToForeground()}doesExtensionLaunchedFileExist(){let e=this._context.asAbsolutePath("extensionlaunched.dat");try{return QY.statSync(e),!0}catch{try{QY.writeFile(e,"launched",n=>{})}catch{}return!1}}async onDidCloseTextDocument(e){if(this._connectionMgr===void 0||e===void 0||e.uri===void 0)return;let t=e.uri.toString(!0),n=e.uri.scheme;this._lastSavedTimer&&this._lastSavedTimer.end(),this._lastOpenedTimer&&this._lastOpenedTimer.end(),this._lastSavedUri&&n===SMe&&this._lastSavedTimer?.getDuration()<50?await this.updateUri(t,this._lastSavedUri):this._lastOpenedUri&&this._lastSavedTimer?.getDuration()<50?await this.updateUri(t,this._lastOpenedUri):(await this._outputContentProvider.onDidCloseTextDocument(e),await this._connectionMgr.onDidCloseTextDocument(e)),this._lastSavedUri=void 0,this._lastSavedTimer=void 0,this._lastOpenedTimer=void 0,this._lastOpenedUri=void 0;let i=Mn.instance.diagnosticCollection;i.has(e.uri)&&i.delete(e.uri),md.deleteMainKey(t)}async updateUri(e,t){await this._connectionMgr.copyConnectionToFile(e,t),await this._outputContentProvider.updateQueryRunnerUri(e,t),this._outputContentProvider.onUntitledFileSaved(e,t)}async onDidOpenTextDocument(e){if(this._connectionMgr===void 0)return;this._connectionMgr.onDidOpenTextDocument(e),await this.untitledSqlDocumentService.waitForOngoingCreates();let t=this._untitledSqlDocumentService.shouldSkipCopyConnection(e.uri.toString(!0));this._previousActiveDocument&&e.languageId===jh&&!t&&this._connectionMgr.copyConnectionToFile(this._previousActiveDocument.uri.toString(!0),e.uri.toString(!0),!0),e&&e.languageId===jh&&this._statusview.languageFlavorChanged(e.uri.toString(!0),il),this._lastOpenedTimer=new yC,this._lastOpenedTimer.start(),e&&e.uri&&(this._lastOpenedUri=e.uri.toString(!0),this._previousActiveDocument=e.languageId===jh?e:void 0)}_previousActiveDocument;onDidChangeActiveTextEditor(e){e?.document&&(this._previousActiveDocument=e.document.languageId===jh?e.document:void 0)}onDidSaveTextDocument(e){if(this._connectionMgr===void 0)return;let t=e.uri.toString(!0);this._lastSavedTimer=new yC,this._lastSavedTimer.start(),this._lastSavedUri=t}onChangeQueryHistoryConfig(){this._vscodeWrapper.getConfiguration(fi).get(i2)&&this.initializeQueryHistory()}async onDidChangeConfiguration(e){if(!e.affectsConfiguration(hn))return;this.onChangeQueryHistoryConfig();let t=await this.onChangeConnectionConfig(e);await this.onChangeGroupBySchemaConfig(e),t&&this._objectExplorerProvider.refresh(void 0),e.affectsConfiguration($Le)&&this.updatePiiLoggingLevel(),[VLe,HLe,ose,uC,pM].some(i=>e.affectsConfiguration(i))&&await this.displayReloadMessage(Oke)}async onChangeGroupBySchemaConfig(e){if(!e.affectsConfiguration(LG))return;let t=!1;(await this._objectExplorerProvider.getChildren()).forEach(n=>{try{this._objectExplorerProvider.refreshNode(n)}catch(i){t=!0,this._connectionMgr.client.logger.error(i)}}),t&&Ll(xke)}async onChangeConnectionConfig(e){if(!e.affectsConfiguration(`mssql.${cC}`)&&!e.affectsConfiguration(`mssql.${NT}`))return!1;let t=!1;e.affectsConfiguration(`mssql.${NT}`)&&(t=!0);let n=await this.connectionManager.connectionStore.connectionConfig.getConnections(!0),i=this._objectExplorerProvider.connections,s=await this.handleRemovedConns(i,n);return t||=s,s=await this.handleAddedConns(i,n),t||=s,t||=await this.checkForMovedConns(n),await this.sanitizeConnectionProfiles(),t&&this._vscodeWrapper.getConfiguration().get(o2)&&this._statusview.updateConnectionColors(),t}async checkForMovedConns(e){for(let t of e)if(t.groupId!==this._objectExplorerProvider.objectExplorerService.getConnectionNodeById(t.id)?.connectionProfile.groupId)return!0;return!1}async handleAddedConns(e,t){let n=!1,i=t.filter(s=>!e.some(o=>vC(s,o)));for(let s of i){let o=s,a=Sn.getNodeUriFromProfile(o);!this.connectionManager.isActiveConnection(s)&&!this.connectionManager.isConnecting(a)&&(this._objectExplorerProvider.addDisconnectedNode(s),n=!0)}return n}async handleRemovedConns(e,t){let n=!1,i=e.filter(s=>!t.some(o=>vC(s,o)));for(let s of i){let o=s;if(this.connectionManager.isActiveConnection(s)){let a=this.connectionManager.getUriForConnection(s);await this.connectionManager.disconnect(a)}await this.connectionManager.connectionStore.removeRecentlyUsed(o),o.authenticationType===Ya&&o.savePassword&&await this.connectionManager.deleteCredential(o)}return await this._objectExplorerProvider.removeConnectionNodes(i),n||=i.length>0,n}updatePiiLoggingLevel(){let e=Lt.workspace.getConfiguration(hn).get(GLe,!1);Mn.instance.logger.piiLogging=e}async displayReloadMessage(e){return await Lt.window.showInformationMessage(e,AT)===AT?(await Lt.commands.executeCommand("workbench.action.reloadWindow"),!0):!1}async isContainerReadyForCommands(e){let t=e.connectionProfile?.containerName;return(await Bde(t,e,this._objectExplorerProvider.objectExplorerService)).success}removeAadAccount(e){this.connectionManager.removeAccount(e)}addAadAccount(){this.connectionManager.addAccount()}onClearAzureTokenCache(){this.connectionManager.onClearTokenCache()}ExecutionPlanCustomEditorProvider=class{constructor(e,t,n,i){this.context=e;this.vscodeWrapper=t;this.executionPlanService=n;this.untitledSqlService=i;this.context=e,this.executionPlanService=n,this.untitledSqlService=i}async resolveCustomTextEditor(e){await this.onOpenExecutionPlanFile(e)}async onOpenExecutionPlanFile(e){let t=e.getText(),n=e.fileName;n=n.substring(n.lastIndexOf(mO.sep)+1),Lt.commands.executeCommand("workbench.action.closeActiveEditor"),new _Y(this.context,this.vscodeWrapper,this.executionPlanService,this.untitledSqlService,t,n).revealToForeground(),vt("ExecutionPlan","Open")}}};var cs=ge(require("vscode"));var zp="> \u26A0\uFE0F",hO="> \u{1F7E2}",ntt="> \u274C",tu="> \u2796";var itt={connect:{type:"simple",requiresConnection:!1,skipConnectionLabels:!0,handler:async(r,e,t)=>(await e.onNewConnection()?r.markdown(`${hO} ${mt.connectedSuccessfully}

`):r.markdown(`${zp} ${mt.failedToConnect}

`),!0)},disconnect:{type:"simple",requiresConnection:!0,skipConnectionLabels:!0,handler:async(r,e,t)=>(t&&(await e.connectionManager.disconnect(t),r.markdown(`${zp} ${mt.disconnectedSuccessfully}

`)),!0)},changeDatabase:{type:"simple",requiresConnection:!0,skipConnectionLabels:!0,handler:async(r,e,t)=>(t&&tF(e,t)?await e.onChooseDatabase()?r.markdown(`${hO} ${mt.databaseChangedSuccessfully}

`):r.markdown(`${zp} ${mt.failedToChangeDatabase}

`):r.markdown(`${zp} ${mt.noActiveConnectionForDatabaseChange}

`),!0)},getConnectionDetails:{type:"simple",requiresConnection:!0,skipConnectionLabels:!0,handler:async(r,e,t)=>{if(t&&tF(e,t)){let n=e.connectionManager.getConnectionInfo(t);if(n){let i=e.connectionManager.getServerInfo(n.credentials),s=`${hO} **${mt.connectionDetails}**  
`;s+=`${tu} **${mt.serverLabel}:** ${n.credentials.server}  
`,s+=`${tu} **${mt.databaseLabel}:** ${n.credentials.database}  
`,s+=`${tu} **${mt.authentication}:** ${n.credentials.authenticationType||mt.sqlLogin}  
`,i&&(i.serverVersion&&(s+=`${tu} **${mt.serverVersion}:** ${i.serverVersion}  
`),i.serverEdition&&(s+=`${tu} **${mt.serverEdition}:** ${i.serverEdition}  
`),i.isCloud!==void 0&&(s+=`${tu} **${mt.cloud}:** ${i.isCloud?mt.yes:mt.no}  
`)),n.credentials.user&&(s+=`${tu} **${mt.user}:** ${n.credentials.user}  
`),s+=`
`,r.markdown(s)}else r.markdown(`${zp} ${mt.noConnectionInformationFound}

`)}else r.markdown(`${zp} ${mt.noActiveConnection}

`);return!0}},runQuery:{type:"prompt",requiresConnection:!0,promptTemplate:qp.runQuery},explain:{type:"prompt",requiresConnection:!0,promptTemplate:qp.explain},fix:{type:"prompt",requiresConnection:!0,promptTemplate:qp.fix},optimize:{type:"prompt",requiresConnection:!0,promptTemplate:qp.optimize},showSchema:{type:"simple",requiresConnection:!0,handler:async(r,e,t)=>{if(t&&tF(e,t)){r.markdown(`\u{1F50D} ${mt.openingSchemaDesigner}

`);let i=e.connectionManager.getConnectionInfo(t)?.credentials;if(!i)return r.markdown(`${zp} ${mt.noConnectionCredentialsFound}

`),!0;(await gw.getInstance().getSchemaDesigner(e.context,new gi,e,e.schemaDesignerService,i.database,void 0,t)).revealToForeground()}else r.markdown(`${zp} ${mt.noActiveConnectionForSchemaView}

`);return!0}},showDefinition:{type:"prompt",requiresConnection:!0,promptTemplate:qp.showDefinition},listServers:{type:"simple",requiresConnection:!1,handler:async(r,e,t)=>{try{let n=await e.connectionManager.connectionStore.readAllConnections(!1);if(!n||n.length===0)r.markdown(`\u{1F4CB} **${mt.availableServers}**

`),r.markdown(`${mt.noSavedConnectionProfilesFound}

`),r.markdown(`${mt.useConnectToCreateNewConnection("/connect")}

`);else{r.markdown(`\u{1F4CB} **${mt.availableServers}**

`);for(let i of n){let s=`${tu} **${i.profileName||mt.unnamedProfile}**
${tu} ${mt.serverLabel}: ${i.server}
${tu} ${mt.databaseLabel}: ${i.database||mt.default}
${tu} ${mt.authentication}: ${i.authenticationType||mt.sqlLogin}

`;r.markdown(s)}r.markdown(`${mt.foundSavedConnectionProfiles(n.length)}

`)}}catch(n){throw n}return!0}},listDatabases:{type:"prompt",requiresConnection:!0,promptTemplate:qp.listDatabases},listSchemas:{type:"prompt",requiresConnection:!0,promptTemplate:qp.listSchemas},listTables:{type:"prompt",requiresConnection:!0,promptTemplate:qp.listTables},listViews:{type:"prompt",requiresConnection:!0,promptTemplate:qp.listViews},listFunctions:{type:"prompt",requiresConnection:!0,promptTemplate:qp.listFunctions},listProcedures:{type:"prompt",requiresConnection:!0,promptTemplate:qp.listProcedures}};function tF(r,e){return e?r.connectionManager.getConnectionInfo(e)!==void 0:!1}function pSe(r){return r?itt[r]?.skipConnectionLabels??!1:!1}function ifr(r){return itt[r]}async function mSe(r,e,t,n){let i=r.command;if(!i)return{handled:!1};let s=ifr(i);if(!s)return{handled:!1};let o={commandName:i,commandType:s.type,requiresConnection:s.requiresConnection.toString(),hasConnection:tF(t,n).toString()};try{return s.requiresConnection&&!tF(t,n)?(vt("MssqlCopilot","ChatCommand",{...o,success:"false",errorType:"noConnection"}),{handled:!0,errorMessage:`${zp} ${mt.noActiveDatabaseConnection}

`}):s.type==="simple"&&s.handler?(await s.handler(e,t,n),vt("MssqlCopilot","ChatCommand",{...o,success:"true"}),{handled:!0}):s.type==="prompt"&&s.promptTemplate?(vt("MssqlCopilot","ChatCommand",{...o,success:"true"}),{handled:!1,promptToAdd:s.promptTemplate}):(vt("MssqlCopilot","ChatCommand",{...o,success:"false",errorType:"unknownCommandType"}),{handled:!1})}catch(a){return kr("MssqlCopilot","ChatCommand",a,!1,void 0,void 0,{...o,success:"false",errorType:"exception"}),{handled:!0,errorMessage:`${ntt} ${rt(a)}

`}}}var stt=(r,e,t,n)=>{let i=(()=>{let _=1;return()=>`conversationUri${_++}`})(),s=(()=>{let _=Cs.create(e.outputChannel,"MssqlCopilot");return()=>_})(),o=async(_,C,P,w)=>{let R=ec(),I=s(),z=i(),G=e.activeTextEditorUri;I.verbose("In handler"),I.logDebug(`Starting new chat conversation: conversion '${z}' with connection '${G}'`);let L=Fn("MssqlCopilot","StartConversation",R,{correlationId:R}),H=[],ee=cs.window.activeTextEditor;I.logDebug(ee?"Active editor found.":"No active editor found.");async function ye(Ge){I.verbose("in findEditorFromReferences");let pe=cs.window.tabGroups.all;function Ie(Ve){I.verbose("in isSqlDocument"),I.logDebug(`Checking if document is SQL: ${Ve.languageId}`);let ut=["sql","mssql"].includes(Ve.languageId);return I.logDebug(`Is SQL document: ${ut?"Yes":"No"}`),I.verbose("Exiting isSqlDocument"),ut}I.info("Checking references...");for(let Ve of Ge){let lt=Ve.value,ut;if(lt instanceof cs.Location?ut=lt.uri:lt instanceof cs.Uri&&(ut=lt),I.logDebug(ut?"Found a reference URI.":"No reference URI found."),ut){I.info("Looking for matching visible editor...");let ce=cs.window.visibleTextEditors.find(ue=>ue.document.uri.toString()===ut?.toString()&&Ie(ue.document));if(ce)return I.info("Returning matching visible editor."),ce;I.info("No matching visible editor found. Checking tab groups...");for(let ue of pe){let Ue=ue.activeTab;if(Ue)try{let ct=Ue.input?.uri||Ue.input?.textEditor?.document?.uri;if(ct&&ct.toString()===ut.toString()){I.info("Found tab URI that matches reference URI.");let jt=cs.window.visibleTextEditors.find(tr=>tr.document.uri.toString()===ct.toString());if(jt&&Ie(jt.document))return I.info("Returning matching SQL editor."),jt}}catch(ct){I.error("Error accessing tab properties:",ct)}}}}I.info("No matching editor found in references. Checking tab groups...");for(let Ve of pe){let lt=Ve.activeTab;if(lt)try{let ut=lt.input.uri||lt.input?.textEditor?.document?.uri;if(ut){let ce=cs.window.visibleTextEditors.find(ue=>ue.document.uri.toString()===ut.toString());if(ce&&Ie(ce.document))return I.info("Returning active SQL editor from tab group."),ce}}catch(ut){I.error("Error accessing tab properties:",ut)}}I.verbose("Exiting findEditorFromReferences"),I.logDebug("No matching editor found in tab groups. Returning undefined.")}if(I.info("Process references using the appropriate editor..."),_.references){let Ge=ee||await ye(_.references);I.info(Ge?"Using editor found.":"No editor found."),G=Ge?.document.uri.toString()??G,I.info(G?"Using the preferred editor's connection URI.":"No connection URI found.");for(let pe of _.references){let Ie=pe.value;if(Ie instanceof cs.Location)if(I.info("value is a Location"),Ge&&Ie.uri.toString()===Ge.document.uri.toString())H.push(`${pe.modelDescription??"ChatResponseReference"}: ${Ge.document.getText(Ie.range)}`);else{I.info("Opening text document");let Ve=await cs.workspace.openTextDocument(Ie.uri);H.push(`${pe.modelDescription??"ChatResponseReference"}: ${Ve.getText(Ie.range)}`)}else if(Ie instanceof cs.Uri){I.info("Value is a URI"),I.info("Opening text document");let Ve=await cs.workspace.openTextDocument(Ie);H.push(`${pe.modelDescription??"ChatResponseReference"}: ${Ve.getText()}`)}else typeof pe.value=="string"&&(I.info("reference value is a string)"),H.push(`${pe.modelDescription??"ChatResponseReference"}: ${pe.value}`))}}let $e=_.prompt.trim(),Be=_.model;try{if(!Be)return I.info("No model found."),L.endFailed(new Error("No chat model found."),!0,void 0,void 0,{correlationId:R}),P.markdown(mt.noModelFound),{metadata:{command:"",correlationId:R}};let Ge=e.getConfiguration().get(use,!1);I.info(Ge?"Debug logging enabled.":"Debug logging disabled."),Ge&&P.progress(mt.usingModel(Be.name,t.languageModelAccessInformation.canSendRequest(Be)));let pe=n.connectionManager.getConnectionInfo(G);if(!G||!pe){I.info("No connection URI/connection was found. Sending prompt to default language model."),L.update({correlationId:R,message:"No connection URI found. Sending prompt to default language model."});let Ue=await mSe(_,P,n,G);return Ue.handled?(Ue.errorMessage&&P.markdown(Ue.errorMessage),{metadata:{command:_.command||"",correlationId:R}}):(pSe(_.command)||P.markdown(`${zp} ${mt.notConnected}

`),Ue.promptToAdd&&($e=Ue.promptToAdd+$e),await y($e,Be,P,w,L,R,I),{metadata:{command:"",correlationId:R}})}var Ct=`${hO} ${mt.connectedTo}  
${tu} ${mt.server(pe.credentials.server)}  
${tu} ${mt.database(pe.credentials.database)}

`;let Ie=await mSe(_,P,n,G);if(Ie.handled)return Ie.errorMessage&&P.markdown(Ie.errorMessage),{metadata:{command:_.command||"",correlationId:R}};if(pSe(_.command)||P.markdown(Ct),Ie.promptToAdd&&($e=Ie.promptToAdd+$e),!await r.startConversation(z,G,$e))return I.info("Failed to start conversation. Sending prompt to default language model."),L.update({correlationId:R,message:"Failed to start conversation. Sending prompt to default language model."}),await y($e,Be,P,w,L,R,I),{metadata:{command:"",correlationId:R}};I.info("Conversation started.");let lt,ut="",ce=!0,ue=!1;for(;ce;){I.logDebug(`Continue polling messages for '${z}'`),ce=!0,(!lt||lt.length===0)&&(lt=[{tool:void 0,parameters:void 0}]),I.info("Processing tool calls and awaiting for the result...");let Ue=await c(P,lt,z,ut,r,R,I);switch(ut="",lt=void 0,z=Ue.conversationUri??z,Ue.messageType){case 1:I.info("Processing complete message..."),L.end("Succeeded",{correlationId:R}),ce=!1;break;case 0:break;case 2:case 3:I.info("Processing LLM message...");let{text:ct,tools:jt,print:tr}=await p(z,Ue,Be,P,w,C,H,R,I);ut=ct,Ue.messageType===2?(lt=jt,ue=tr):ue=!1;break;default:L.endFailed(new Error(`Unhandled message type: ${Ue.messageType}`),!0,void 0,void 0,{correlationId:R}),I.error(`Stopping polling because of Unhandled message type: ${Ue.messageType}`),ce=!1;break}I.logDebug(`Done processing message for '${z}'`),ue&&(P.markdown(ut),ue=!1)}}catch(Ge){v(Ge,P,R,I)}return{metadata:{command:"",correlationId:R}}};async function a(_,C){let P=new Promise((w,R)=>setTimeout(()=>R(new Error("Operation timed out")),C));return Promise.race([_,P])}async function c(_,C,P,w,R,I,z){if(z.verbose("in processToolCalls"),C.length===0)throw kr("MssqlCopilot","Error",new Error("No tools to process."),!0,void 0,void 0,{correlationId:I}),z.error("No tools to process."),new Error(mt.noToolsToProcess);let G;for(let L of C)try{if(z.logDebug(`Getting next message for conversationUri: ${P}`),G=await a(R.getNextMessage(P,w,L.tool,L.parameters),6e4),G.messageType===1){z.logDebug(`Message type is complete for conversationUri: ${P}`);break}}catch(H){z.error("Tool call failed or timed out:",H),kr("MssqlCopilot","Error",H instanceof Error?H:new Error("Unknown tool call error"),!0,void 0,void 0,{correlationId:I,toolName:L?.tool?.functionName||"Unknown"}),_.markdown("\u26A0\uFE0F This message couldn't be processed. If this issue persists, please check the logs and [open an issue](https://aka.ms/vscode-mssql-copilot-feedback) on GitHub for this Preview release."),G=void 0;break}if(!G)throw z.error("All tool calls failed or timed out."),new Error("All tool calls failed or timed out.");return z.logDebug(`Finished processing tool calls for conversationUri: ${P}`),G}function l(_,C,P,w){w.verbose("in prepareRequestMessages");let R=_.requestMessages,I=R.findIndex($e=>$e.role!==0);w.info("Getting initial system messages");let z=R.slice(0,I===-1?R.length:I).map($e=>cs.LanguageModelChatMessage.Assistant($e.text));w.info("Getting history messages");let G="[HISTORY] ",L=C.history.map($e=>{if("prompt"in $e)return cs.LanguageModelChatMessage.User(G+$e.prompt);if("response"in $e&&Array.isArray($e.response)){let Be=$e.response.filter(Ct=>Ct!=null).map(Ct=>{if(Ct&&typeof Ct.value=="object"&&Ct.value!==null&&typeof Ct.value.value=="string")return Ct.value.value;if(Ct&&typeof Ct.value=="function")try{let Ge=Ct.value();return typeof Ge=="object"&&Ge&&typeof Ge.value=="string"?Ge.value:typeof Ge=="string"?Ge:""}catch(Ge){return console.error("Error accessing response value:",Ge),""}return Ct&&typeof Ct.content=="string"?Ct.content:""}).join("");return Be.trim()?cs.LanguageModelChatMessage.Assistant(G+Be):void 0}}).filter($e=>$e!==void 0);w.info("Getting reference messages");let H="[REFERENCE] ",ee=P?P.map($e=>cs.LanguageModelChatMessage.Assistant(H+$e)):[];if(I===-1)return[...z,...L,...ee];w.info("Getting remaining messages...");let ye=R.slice(I).map($e=>$e.role===0?cs.LanguageModelChatMessage.Assistant($e.text):cs.LanguageModelChatMessage.User($e.text));return w.info("Returning combined messages..."),[...z,...L,...ee,...ye]}function u(_,C){return C.verbose("in mapRequestTools..."),_.map(P=>({name:P.functionName,description:P.functionDescription,inputSchema:JSON.parse(P.functionParameters)}))}async function d(_,C,P,w,R){R.verbose("in processResponseParts...");let I=[],z="",G=!1;for await(let L of C.stream)if(L instanceof cs.LanguageModelTextPart)R.info("Part is a language model text part."),z+=L.value,G=!0;else if(L instanceof cs.LanguageModelToolCallPart){R.info("Part is a language model tool call part.");let{sqlTool:H,sqlToolParameters:ee}=await m(P,L,_,w,R);H&&(R.logDebug(`Pushing ${H.functionName} to toolsCalled`),I.push({tool:H,parameters:ee}))}return R.info("Finished processing response parts."),{replyText:z,toolsCalled:I,printTextout:G}}async function p(_,C,P,w,R,I,z,G,L){L.verbose("in handleRequestLLMMessage");let H=u(C.tools,L),ee={justification:"Azure SQL Copilot agent requires access to language model.",tools:[]};C.messageType===2&&(L.info("result.messageType is RequestLLM"),ee.tools=H);let ye=l(C,I,z,L),$e=await P.sendRequest(ye,ee,R),{replyText:Be,toolsCalled:Ct,printTextout:Ge}=await d(w,$e,C.tools,G,L);return L.info("Finished handling request LLM message."),{text:Be,tools:Ct,print:Ge}}async function m(_,C,P,w,R){R.verbose("in processToolCall");let I,z,G=e.getConfiguration().get(use,!1);R.info("Looking up tool");let L=_.find(H=>H.functionName===C.name);if(!L)return R.logDebug(`No tool was found for: ${C.name} - ${JSON.stringify(C.input)}}`),G&&P.markdown(mt.toolLookupFor(C.name,JSON.stringify(C.input))),{sqlTool:I,sqlToolParameters:z};I=L;try{z=JSON.stringify(C.input)}catch(H){throw kr("MssqlCopilot","Error",new Error(`Got invalid tool use parameters: "${JSON.stringify(C.input)}". (${rt(H)})`),!1,void 0,void 0,{correlationId:w}),R.error(`Got invalid tool use parameters: "${JSON.stringify(C.input)}". (${rt(H)})`),new Error(mt.gotInvalidToolUseParameters(JSON.stringify(C.input),rt(H)))}return R.logDebug(`Calling tool: ${L.functionName} with ${z}`),G&&P.progress(mt.callingTool(L.functionName,z)),vt("MssqlCopilot","ToolCall",{toolName:L.functionName,toolDescription:L.functionDescription,correlationId:w}),R.info("Finished processing tool call."),{sqlTool:I,sqlToolParameters:z}}function f(_,C,P,w){w.verbose("in handleLanguageModelError"),w.error("Language Model Error:",rt(_),"Code:",_.code);let I={model_not_found:mt.modelNotFoundError,no_permission:mt.noPermissionError,quote_limit_exceeded:mt.quoteLimitExceededError,off_topic:mt.offTopicError}[_.code]||mt.unexpectedError;kr("MssqlCopilot","Error",new Error(rt(_)),!1,_.code||"Unknown",_.name||"Unknown",{correlationId:P}),C.markdown(I)}async function y(_,C,P,w,R,I,z){z.verbose("in sendToDefaultLanguageModel");try{z.info(`Using ${C.name} to process your request...`),P.progress(mt.usingModelToProcessRequest(C.name));let G=[cs.LanguageModelChatMessage.User(_.trim())],L={justification:"Fallback to default language model from MSSQL agent.",tools:[]};z.info("Sending request to default language model.");let H=await C.sendRequest(G,L,w),ee="";for await(let ye of H.stream)ye instanceof cs.LanguageModelTextPart&&(ee+=ye.value);ee?(z.info("Received response from default language model."),R.end("Succeeded",{correlationId:I,message:"The default language model succeeded."}),P.markdown(ee)):(z.info("No output from the default language model."),R.end("Succeeded",{correlationId:I,message:"The default language model did not return any output."}),P.markdown(mt.languageModelDidNotReturnAnyOutput))}catch(G){R.endFailed(new Error(rt(G)),!1,void 0,void 0,{correlationId:I,errorMessage:"Fallback to default language model call failed."}),z.error("Error in fallback language model call:",rt(G)),P.markdown(mt.errorOccurredWhileProcessingRequest)}z.info("Finished sending request to default language model.")}function v(_,C,P,w){w.verbose("in handleError"),_ instanceof cs.LanguageModelError?f(_,C,P,w):_ instanceof Error?(w.error("Unhandled Error:",{message:_.message,stack:_.stack}),kr("MssqlCopilot","Error",new Error(`An error occurred with: ${rt(_)}`),!1,void 0,void 0,{correlationId:P}),console.error("Unhandled Error:",{message:_.message,stack:_.stack}),C.markdown(mt.errorOccurredWith(_.message))):(w.error("Unknown Error Type:",rt(_)),kr("MssqlCopilot","Error",new Error(`Unknown Error Type: ${rt(_)}`),!1,void 0,void 0,{correlationId:P}),C.markdown(mt.unknownErrorOccurred)),w.info("Finished handling error.")}return o};var ott=require("vscode");var ai;async function sfr(r){let e=new gi;ai=new eF(r,void 0,e),r.subscriptions.push(ai),Nb.initialize(r.extensionUri);let t=Uf.extensions.getExtension("GitHub.copilot");Uf.commands.executeCommand("setContext","mssql.copilot.isGHCInstalled",!!t),Uf.commands.registerCommand("mssql.getControllerForTests",()=>ai),await ai.activate();let n=Uf.chat.createChatParticipant("mssql.agent",stt(ai.copilotService,e,r,ai));n.iconPath=Uf.Uri.joinPath(r.extensionUri,"images","mssql-chat-avatar.jpg");let i=n.onDidReceiveFeedback(s=>{vt("MssqlCopilot","Feedback",{kind:s.kind===ott.ChatResultFeedbackKind.Helpful?"Helpful":"Unhelpful",correlationId:s.result.metadata.correlationId})});return r.subscriptions.push(ai,n,i),{sqlToolsServicePath:Mn.instance.sqlToolsServicePath,promptForConnection:async s=>{let o=await ai.connectionManager.connectionStore.getPickListItems();return ai.connectionManager.connectionUI.promptForConnection(o,s)},connect:async(s,o)=>{let a=d$().toString(),c=new xi;if(!await ai.connect(a,s,c,o))throw ai.connectionManager.failedUriToFirewallIpMap.has(a)?new Q$(a,`Connection request for ${JSON.stringify(s)} failed because of invalid firewall rule settings`):new Error(`Connection request for ${JSON.stringify(s)} failed`);if(!await c)throw new Error(`Connection for ${JSON.stringify(s)} failed`);return a},listDatabases:s=>ai.connectionManager.listDatabases(s),getDatabaseNameFromTreeNode:s=>Sn.getDatabaseName(s),dacFx:ai.dacFxService,schemaCompare:ai.schemaCompareService,sqlProjects:ai.sqlProjectsService,getConnectionString:(s,o,a)=>ai.connectionManager.getConnectionString(s,o,a),promptForFirewallRule:(s,o)=>{let a=new Gl(o);return ai.connectionManager.connectionUI.addFirewallRule(s,a)},azureAccountService:ai.azureAccountService,azureResourceService:ai.azureResourceService,createConnectionDetails:s=>ai.connectionManager.createConnectionDetails(s),sendRequest:async(s,o)=>await ai.connectionManager.sendRequest(s,o),getServerInfo:s=>ai.connectionManager.getServerInfo(s),connectionSharing:{getActiveEditorConnectionId:s=>ai.connectionSharingService.getActiveEditorConnectionId(s),getActiveDatabase:s=>ai.connectionSharingService.getActiveDatabase(s),getDatabaseForConnectionId:(s,o)=>ai.connectionSharingService.getDatabaseForConnectionId(s,o),connect:async(s,o)=>ai.connectionSharingService.connect(s,o),disconnect:s=>ai.connectionSharingService.disconnect(s),isConnected:s=>ai.connectionSharingService.isConnected(s),executeSimpleQuery:(s,o)=>ai.connectionSharingService.executeSimpleQuery(s,o),getServerInfo:s=>ai.connectionSharingService.getServerInfo(s),listDatabases:s=>ai.connectionSharingService.listDatabases(s),scriptObject:(s,o,a)=>ai.connectionSharingService.scriptObject(s,o,a)}}}async function ofr(){ai&&(await ai.deactivate(),ai.dispose())}async function afr(){return ai||await Uf.commands.executeCommand("mssql.getControllerForTests")}0&&(module.exports={activate,controller,deactivate,getController});
/*! Bundled license information:

mime-db/index.js:
  (*!
   * mime-db
   * Copyright(c) 2014 Jonathan Ong
   * MIT Licensed
   *)

mime-types/index.js:
  (*!
   * mime-types
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   *)

tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)

tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)

tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)

tmp/lib/tmp.js:
  (*!
   * Tmp
   *
   * Copyright (c) 2011-2017 KARASZI Istvan <github@spam.raszi.hu>
   *
   * MIT Licensed
   *)

@vscode/extension-telemetry/lib/telemetryReporter.node.min.js:
  (*!
   * 1DS JS SDK Core, 3.2.3
   * Copyright (c) Microsoft and contributors. All rights reserved.
   * (Microsoft Internal Only)
   *)
  (*!
   * 1DS JS SDK POST plugin, 3.2.3
   * Copyright (c) Microsoft and contributors. All rights reserved.
   * (Microsoft Internal Only)
   *)
  (*!
   * Application Insights JavaScript SDK - Core, 2.8.4
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*!
   * Microsoft Application Insights JavaScript SDK - Shim functions, 2.0.1
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*!
   * Microsoft Dynamic Proto Utility, 1.1.6
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

@azure/ms-rest-azure-env/dist/msRestAzureEnv.js:
  (** @license ms-rest-azure-env
   * Copyright (c) Microsoft Corporation. All rights reserved.
   * Licensed under the MIT License. See License.txt in the project root for license information.
   *)

tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)

@azure/msal-node/lib/msal-node.cjs:
  (*! @azure/msal-node v2.14.0 2024-09-20 *)
  (*! @azure/msal-common v14.15.0 2024-09-20 *)

@azure/msal-common/dist/utils/Constants.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/error/AuthErrorCodes.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/error/AuthError.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/error/ClientAuthErrorCodes.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/error/ClientAuthError.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/account/AuthToken.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/authority/AuthorityType.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/authority/OpenIdConfigResponse.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/error/ClientConfigurationErrorCodes.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/error/ClientConfigurationError.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/utils/StringUtils.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/utils/UrlUtils.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/url/UrlString.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/authority/AuthorityMetadata.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/authority/ProtocolMode.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/authority/AuthorityOptions.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/authority/CloudInstanceDiscoveryResponse.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/authority/CloudInstanceDiscoveryErrorResponse.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/telemetry/performance/PerformanceEvent.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/utils/FunctionWrappers.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/authority/RegionDiscovery.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/utils/TimeUtils.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/cache/utils/CacheHelpers.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/authority/Authority.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/authority/AuthorityFactory.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/utils/ClientAssertionUtils.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/constants/AADServerParamKeys.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/crypto/ICrypto.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/logger/Logger.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/packageMetadata.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/request/ScopeSet.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/account/ClientInfo.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/account/AccountInfo.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/account/TokenClaims.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/cache/entities/AccountEntity.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/error/CacheErrorCodes.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/error/CacheError.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/cache/CacheManager.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/config/ClientConfiguration.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/error/ServerError.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/network/ThrottlingUtils.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/network/NetworkManager.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/account/CcsCredential.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/request/RequestValidator.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/request/RequestParameterBuilder.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/client/BaseClient.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/error/InteractionRequiredAuthErrorCodes.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/error/InteractionRequiredAuthError.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/utils/ProtocolUtils.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/crypto/PopTokenGenerator.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/cache/persistence/TokenCacheContext.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/response/ResponseHandler.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/client/AuthorizationCodeClient.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/client/RefreshTokenClient.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/client/SilentFlowClient.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/telemetry/server/ServerTelemetryManager.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-common/dist/index.mjs:
  (*! @azure/msal-common v14.14.0 2024-07-23 *)

@azure/msal-node/dist/cache/serializer/Serializer.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/cache/serializer/Deserializer.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/internals.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/utils/Constants.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/utils/NetworkUtils.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/network/HttpClient.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/error/ManagedIdentityErrorCodes.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/error/ManagedIdentityError.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/config/ManagedIdentityId.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/retry/LinearRetryPolicy.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/network/HttpClientWithRetries.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/error/NodeAuthError.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/config/Configuration.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/crypto/GuidGenerator.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/utils/EncodingUtils.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/crypto/HashUtils.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/crypto/PkceGenerator.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/crypto/CryptoProvider.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/cache/NodeStorage.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/cache/TokenCache.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/client/ClientAssertion.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/packageMetadata.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/client/UsernamePasswordClient.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/client/ClientApplication.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/network/LoopbackClient.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/client/DeviceCodeClient.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/client/PublicClientApplication.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/client/ClientCredentialClient.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/client/OnBehalfOfClient.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/client/ConfidentialClientApplication.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/client/ManagedIdentitySources/BaseManagedIdentitySource.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/config/ManagedIdentityRequestParameters.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/client/ManagedIdentitySources/AppService.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/client/ManagedIdentitySources/AzureArc.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/client/ManagedIdentitySources/CloudShell.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/client/ManagedIdentitySources/Imds.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/client/ManagedIdentitySources/ServiceFabric.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/client/ManagedIdentityClient.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/client/ManagedIdentityApplication.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/cache/distributed/DistributedCachePlugin.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)

@azure/msal-node/dist/index.mjs:
  (*! @azure/msal-node v2.12.0 2024-07-23 *)
*/

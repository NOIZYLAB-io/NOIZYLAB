var Yf=Object.create;var Vi=Object.defineProperty;var Zf=Object.getOwnPropertyDescriptor;var Qf=Object.getOwnPropertyNames;var Jf=Object.getPrototypeOf,ed=Object.prototype.hasOwnProperty;var C=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),td=(t,e)=>{for(var r in e)Vi(t,r,{get:e[r],enumerable:!0})},ol=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Qf(e))!ed.call(t,n)&&n!==r&&Vi(t,n,{get:()=>e[n],enumerable:!(i=Zf(e,n))||i.enumerable});return t};var P=(t,e,r)=>(r=t!=null?Yf(Jf(t)):{},ol(e||!t||!t.__esModule?Vi(r,"default",{value:t,enumerable:!0}):r,t)),rd=t=>ol(Vi({},"__esModule",{value:!0}),t);var Dl=C((F,Sl)=>{F=Sl.exports=z;var U;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?U=function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("SEMVER"),console.log.apply(console,t)}:U=function(){};F.SEMVER_SPEC_VERSION="2.0.0";var Xs=256,Wi=Number.MAX_SAFE_INTEGER||9007199254740991,X=F.re=[],D=F.src=[],k=0,Jt=k++;D[Jt]="0|[1-9]\\d*";var er=k++;D[er]="[0-9]+";var Gs=k++;D[Gs]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var ll=k++;D[ll]="("+D[Jt]+")\\.("+D[Jt]+")\\.("+D[Jt]+")";var cl=k++;D[cl]="("+D[er]+")\\.("+D[er]+")\\.("+D[er]+")";var Vs=k++;D[Vs]="(?:"+D[Jt]+"|"+D[Gs]+")";var Ws=k++;D[Ws]="(?:"+D[er]+"|"+D[Gs]+")";var $s=k++;D[$s]="(?:-("+D[Vs]+"(?:\\."+D[Vs]+")*))";var Ks=k++;D[Ks]="(?:-?("+D[Ws]+"(?:\\."+D[Ws]+")*))";var Hs=k++;D[Hs]="[0-9A-Za-z-]+";var qr=k++;D[qr]="(?:\\+("+D[Hs]+"(?:\\."+D[Hs]+")*))";var Ys=k++,hl="v?"+D[ll]+D[$s]+"?"+D[qr]+"?";D[Ys]="^"+hl+"$";var Zs="[v=\\s]*"+D[cl]+D[Ks]+"?"+D[qr]+"?",Qs=k++;D[Qs]="^"+Zs+"$";var ir=k++;D[ir]="((?:<|>)?=?)";var Hi=k++;D[Hi]=D[er]+"|x|X|\\*";var Gi=k++;D[Gi]=D[Jt]+"|x|X|\\*";var _t=k++;D[_t]="[v=\\s]*("+D[Gi]+")(?:\\.("+D[Gi]+")(?:\\.("+D[Gi]+")(?:"+D[$s]+")?"+D[qr]+"?)?)?";var rr=k++;D[rr]="[v=\\s]*("+D[Hi]+")(?:\\.("+D[Hi]+")(?:\\.("+D[Hi]+")(?:"+D[Ks]+")?"+D[qr]+"?)?)?";var ul=k++;D[ul]="^"+D[ir]+"\\s*"+D[_t]+"$";var fl=k++;D[fl]="^"+D[ir]+"\\s*"+D[rr]+"$";var Qi=k++;D[Qi]="(?:~>?)";var $i=k++;D[$i]="(\\s*)"+D[Qi]+"\\s+";X[$i]=new RegExp(D[$i],"g");var id="$1~",dl=k++;D[dl]="^"+D[Qi]+D[_t]+"$";var ml=k++;D[ml]="^"+D[Qi]+D[rr]+"$";var Ji=k++;D[Ji]="(?:\\^)";var Ki=k++;D[Ki]="(\\s*)"+D[Ji]+"\\s+";X[Ki]=new RegExp(D[Ki],"g");var nd="$1^",pl=k++;D[pl]="^"+D[Ji]+D[_t]+"$";var gl=k++;D[gl]="^"+D[Ji]+D[rr]+"$";var Js=k++;D[Js]="^"+D[ir]+"\\s*("+Zs+")$|^$";var eo=k++;D[eo]="^"+D[ir]+"\\s*("+hl+")$|^$";var Fr=k++;D[Fr]="(\\s*)"+D[ir]+"\\s*("+Zs+"|"+D[_t]+")";X[Fr]=new RegExp(D[Fr],"g");var sd="$1$2$3",yl=k++;D[yl]="^\\s*("+D[_t]+")\\s+-\\s+("+D[_t]+")\\s*$";var wl=k++;D[wl]="^\\s*("+D[rr]+")\\s+-\\s+("+D[rr]+")\\s*$";var El=k++;D[El]="(<|>)?=?\\s*\\*";for(ht=0;ht<k;ht++)U(ht,D[ht]),X[ht]||(X[ht]=new RegExp(D[ht]));var ht;F.parse=kr;function kr(t,e){if(t instanceof z)return t;if(typeof t!="string"||t.length>Xs)return null;var r=e?X[Qs]:X[Ys];if(!r.test(t))return null;try{return new z(t,e)}catch{return null}}F.valid=od;function od(t,e){var r=kr(t,e);return r?r.version:null}F.clean=ad;function ad(t,e){var r=kr(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null}F.SemVer=z;function z(t,e){if(t instanceof z){if(t.loose===e)return t;t=t.version}else if(typeof t!="string")throw new TypeError("Invalid Version: "+t);if(t.length>Xs)throw new TypeError("version is longer than "+Xs+" characters");if(!(this instanceof z))return new z(t,e);U("SemVer",t,e),this.loose=e;var r=t.trim().match(e?X[Qs]:X[Ys]);if(!r)throw new TypeError("Invalid Version: "+t);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Wi||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Wi||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Wi||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(i){if(/^[0-9]+$/.test(i)){var n=+i;if(n>=0&&n<Wi)return n}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}z.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};z.prototype.inspect=function(){return'<SemVer "'+this+'">'};z.prototype.toString=function(){return this.version};z.prototype.compare=function(t){return U("SemVer.compare",this.version,this.loose,t),t instanceof z||(t=new z(t,this.loose)),this.compareMain(t)||this.comparePre(t)};z.prototype.compareMain=function(t){return t instanceof z||(t=new z(t,this.loose)),tr(this.major,t.major)||tr(this.minor,t.minor)||tr(this.patch,t.patch)};z.prototype.comparePre=function(t){if(t instanceof z||(t=new z(t,this.loose)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var e=0;do{var r=this.prerelease[e],i=t.prerelease[e];if(U("prerelease compare",e,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return tr(r,i)}while(++e)};z.prototype.inc=function(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e),this.inc("pre",e);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+t)}return this.format(),this.raw=this.version,this};F.inc=ld;function ld(t,e,r,i){typeof r=="string"&&(i=r,r=void 0);try{return new z(t,r).inc(e,i).version}catch{return null}}F.diff=cd;function cd(t,e){if(to(t,e))return null;var r=kr(t),i=kr(e);if(r.prerelease.length||i.prerelease.length){for(var n in r)if((n==="major"||n==="minor"||n==="patch")&&r[n]!==i[n])return"pre"+n;return"prerelease"}for(var n in r)if((n==="major"||n==="minor"||n==="patch")&&r[n]!==i[n])return n}F.compareIdentifiers=tr;var al=/^[0-9]+$/;function tr(t,e){var r=al.test(t),i=al.test(e);return r&&i&&(t=+t,e=+e),r&&!i?-1:i&&!r?1:t<e?-1:t>e?1:0}F.rcompareIdentifiers=hd;function hd(t,e){return tr(e,t)}F.major=ud;function ud(t,e){return new z(t,e).major}F.minor=fd;function fd(t,e){return new z(t,e).minor}F.patch=dd;function dd(t,e){return new z(t,e).patch}F.compare=We;function We(t,e,r){return new z(t,r).compare(e)}F.compareLoose=md;function md(t,e){return We(t,e,!0)}F.rcompare=bl;function bl(t,e,r){return We(e,t,r)}F.sort=pd;function pd(t,e){return t.sort(function(r,i){return F.compare(r,i,e)})}F.rsort=gd;function gd(t,e){return t.sort(function(r,i){return F.rcompare(r,i,e)})}F.gt=Yi;function Yi(t,e,r){return We(t,e,r)>0}F.lt=Zi;function Zi(t,e,r){return We(t,e,r)<0}F.eq=to;function to(t,e,r){return We(t,e,r)===0}F.neq=xl;function xl(t,e,r){return We(t,e,r)!==0}F.gte=ro;function ro(t,e,r){return We(t,e,r)>=0}F.lte=io;function io(t,e,r){return We(t,e,r)<=0}F.cmp=vl;function vl(t,e,r,i){var n;switch(e){case"===":typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),n=t===r;break;case"!==":typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),n=t!==r;break;case"":case"=":case"==":n=to(t,r,i);break;case"!=":n=xl(t,r,i);break;case">":n=Yi(t,r,i);break;case">=":n=ro(t,r,i);break;case"<":n=Zi(t,r,i);break;case"<=":n=io(t,r,i);break;default:throw new TypeError("Invalid operator: "+e)}return n}F.Comparator=_e;function _e(t,e){if(t instanceof _e){if(t.loose===e)return t;t=t.value}if(!(this instanceof _e))return new _e(t,e);U("comparator",t,e),this.loose=e,this.parse(t),this.semver===Ur?this.value="":this.value=this.operator+this.semver.version,U("comp",this)}var Ur={};_e.prototype.parse=function(t){var e=this.loose?X[Js]:X[eo],r=t.match(e);if(!r)throw new TypeError("Invalid comparator: "+t);this.operator=r[1],this.operator==="="&&(this.operator=""),r[2]?this.semver=new z(r[2],this.loose):this.semver=Ur};_e.prototype.inspect=function(){return'<SemVer Comparator "'+this+'">'};_e.prototype.toString=function(){return this.value};_e.prototype.test=function(t){return U("Comparator.test",t,this.loose),this.semver===Ur?!0:(typeof t=="string"&&(t=new z(t,this.loose)),vl(t,this.operator,this.semver,this.loose))};F.Range=de;function de(t,e){if(t instanceof de&&t.loose===e)return t;if(!(this instanceof de))return new de(t,e);if(this.loose=e,this.raw=t,this.set=t.split(/\s*\|\|\s*/).map(function(r){return this.parseRange(r.trim())},this).filter(function(r){return r.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+t);this.format()}de.prototype.inspect=function(){return'<SemVer Range "'+this.range+'">'};de.prototype.format=function(){return this.range=this.set.map(function(t){return t.join(" ").trim()}).join("||").trim(),this.range};de.prototype.toString=function(){return this.range};de.prototype.parseRange=function(t){var e=this.loose;t=t.trim(),U("range",t,e);var r=e?X[wl]:X[yl];t=t.replace(r,Td),U("hyphen replace",t),t=t.replace(X[Fr],sd),U("comparator trim",t,X[Fr]),t=t.replace(X[$i],id),t=t.replace(X[Ki],nd),t=t.split(/\s+/).join(" ");var i=e?X[Js]:X[eo],n=t.split(" ").map(function(s){return wd(s,e)}).join(" ").split(/\s+/);return this.loose&&(n=n.filter(function(s){return!!s.match(i)})),n=n.map(function(s){return new _e(s,e)}),n};F.toComparators=yd;function yd(t,e){return new de(t,e).set.map(function(r){return r.map(function(i){return i.value}).join(" ").trim().split(" ")})}function wd(t,e){return U("comp",t),t=xd(t,e),U("caret",t),t=Ed(t,e),U("tildes",t),t=Sd(t,e),U("xrange",t),t=Nd(t,e),U("stars",t),t}function oe(t){return!t||t.toLowerCase()==="x"||t==="*"}function Ed(t,e){return t.trim().split(/\s+/).map(function(r){return bd(r,e)}).join(" ")}function bd(t,e){var r=e?X[ml]:X[dl];return t.replace(r,function(i,n,s,o,a){U("tilde",t,i,n,s,o,a);var l;return oe(n)?l="":oe(s)?l=">="+n+".0.0 <"+(+n+1)+".0.0":oe(o)?l=">="+n+"."+s+".0 <"+n+"."+(+s+1)+".0":a?(U("replaceTilde pr",a),a.charAt(0)!=="-"&&(a="-"+a),l=">="+n+"."+s+"."+o+a+" <"+n+"."+(+s+1)+".0"):l=">="+n+"."+s+"."+o+" <"+n+"."+(+s+1)+".0",U("tilde return",l),l})}function xd(t,e){return t.trim().split(/\s+/).map(function(r){return vd(r,e)}).join(" ")}function vd(t,e){U("caret",t,e);var r=e?X[gl]:X[pl];return t.replace(r,function(i,n,s,o,a){U("caret",t,i,n,s,o,a);var l;return oe(n)?l="":oe(s)?l=">="+n+".0.0 <"+(+n+1)+".0.0":oe(o)?n==="0"?l=">="+n+"."+s+".0 <"+n+"."+(+s+1)+".0":l=">="+n+"."+s+".0 <"+(+n+1)+".0.0":a?(U("replaceCaret pr",a),a.charAt(0)!=="-"&&(a="-"+a),n==="0"?s==="0"?l=">="+n+"."+s+"."+o+a+" <"+n+"."+s+"."+(+o+1):l=">="+n+"."+s+"."+o+a+" <"+n+"."+(+s+1)+".0":l=">="+n+"."+s+"."+o+a+" <"+(+n+1)+".0.0"):(U("no pr"),n==="0"?s==="0"?l=">="+n+"."+s+"."+o+" <"+n+"."+s+"."+(+o+1):l=">="+n+"."+s+"."+o+" <"+n+"."+(+s+1)+".0":l=">="+n+"."+s+"."+o+" <"+(+n+1)+".0.0"),U("caret return",l),l})}function Sd(t,e){return U("replaceXRanges",t,e),t.split(/\s+/).map(function(r){return Dd(r,e)}).join(" ")}function Dd(t,e){t=t.trim();var r=e?X[fl]:X[ul];return t.replace(r,function(i,n,s,o,a,l){U("xRange",t,i,n,s,o,a,l);var c=oe(s),u=c||oe(o),f=u||oe(a),p=f;return n==="="&&p&&(n=""),c?n===">"||n==="<"?i="<0.0.0":i="*":n&&p?(u&&(o=0),f&&(a=0),n===">"?(n=">=",u?(s=+s+1,o=0,a=0):f&&(o=+o+1,a=0)):n==="<="&&(n="<",u?s=+s+1:o=+o+1),i=n+s+"."+o+"."+a):u?i=">="+s+".0.0 <"+(+s+1)+".0.0":f&&(i=">="+s+"."+o+".0 <"+s+"."+(+o+1)+".0"),U("xRange return",i),i})}function Nd(t,e){return U("replaceStars",t,e),t.trim().replace(X[El],"")}function Td(t,e,r,i,n,s,o,a,l,c,u,f,p){return oe(r)?e="":oe(i)?e=">="+r+".0.0":oe(n)?e=">="+r+"."+i+".0":e=">="+e,oe(l)?a="":oe(c)?a="<"+(+l+1)+".0.0":oe(u)?a="<"+l+"."+(+c+1)+".0":f?a="<="+l+"."+c+"."+u+"-"+f:a="<="+a,(e+" "+a).trim()}de.prototype.test=function(t){if(!t)return!1;typeof t=="string"&&(t=new z(t,this.loose));for(var e=0;e<this.set.length;e++)if(Od(this.set[e],t))return!0;return!1};function Od(t,e){for(var r=0;r<t.length;r++)if(!t[r].test(e))return!1;if(e.prerelease.length){for(var r=0;r<t.length;r++)if(U(t[r].semver),t[r].semver!==Ur&&t[r].semver.prerelease.length>0){var i=t[r].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}F.satisfies=no;function no(t,e,r){try{e=new de(e,r)}catch{return!1}return e.test(t)}F.maxSatisfying=Rd;function Rd(t,e,r){return t.filter(function(i){return no(i,e,r)}).sort(function(i,n){return bl(i,n,r)})[0]||null}F.validRange=Id;function Id(t,e){try{return new de(t,e).range||"*"}catch{return null}}F.ltr=Cd;function Cd(t,e,r){return so(t,e,"<",r)}F.gtr=_d;function _d(t,e,r){return so(t,e,">",r)}F.outside=so;function so(t,e,r,i){t=new z(t,i),e=new de(e,i);var n,s,o,a,l;switch(r){case">":n=Yi,s=io,o=Zi,a=">",l=">=";break;case"<":n=Zi,s=ro,o=Yi,a="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(no(t,e,i))return!1;for(var c=0;c<e.set.length;++c){var u=e.set[c],f=null,p=null;if(u.forEach(function(y){y.semver===Ur&&(y=new _e(">=0.0.0")),f=f||y,p=p||y,n(y.semver,f.semver,i)?f=y:o(y.semver,p.semver,i)&&(p=y)}),f.operator===a||f.operator===l||(!p.operator||p.operator===a)&&s(t,p.semver))return!1;if(p.operator===l&&o(t,p.semver))return!1}return!0}});var Tl=C(Nl=>{Nl.entityMap={lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\xC0",Aacute:"\xC1",Acirc:"\xC2",Atilde:"\xC3",Auml:"\xC4",Aring:"\xC5",AElig:"\xC6",Ccedil:"\xC7",Egrave:"\xC8",Eacute:"\xC9",Ecirc:"\xCA",Euml:"\xCB",Igrave:"\xCC",Iacute:"\xCD",Icirc:"\xCE",Iuml:"\xCF",ETH:"\xD0",Ntilde:"\xD1",Ograve:"\xD2",Oacute:"\xD3",Ocirc:"\xD4",Otilde:"\xD5",Ouml:"\xD6",Oslash:"\xD8",Ugrave:"\xD9",Uacute:"\xDA",Ucirc:"\xDB",Uuml:"\xDC",Yacute:"\xDD",THORN:"\xDE",szlig:"\xDF",agrave:"\xE0",aacute:"\xE1",acirc:"\xE2",atilde:"\xE3",auml:"\xE4",aring:"\xE5",aelig:"\xE6",ccedil:"\xE7",egrave:"\xE8",eacute:"\xE9",ecirc:"\xEA",euml:"\xEB",igrave:"\xEC",iacute:"\xED",icirc:"\xEE",iuml:"\xEF",eth:"\xF0",ntilde:"\xF1",ograve:"\xF2",oacute:"\xF3",ocirc:"\xF4",otilde:"\xF5",ouml:"\xF6",oslash:"\xF8",ugrave:"\xF9",uacute:"\xFA",ucirc:"\xFB",uuml:"\xFC",yacute:"\xFD",thorn:"\xFE",yuml:"\xFF",nbsp:"\xA0",iexcl:"\xA1",cent:"\xA2",pound:"\xA3",curren:"\xA4",yen:"\xA5",brvbar:"\xA6",sect:"\xA7",uml:"\xA8",copy:"\xA9",ordf:"\xAA",laquo:"\xAB",not:"\xAC",shy:"\xAD\xAD",reg:"\xAE",macr:"\xAF",deg:"\xB0",plusmn:"\xB1",sup2:"\xB2",sup3:"\xB3",acute:"\xB4",micro:"\xB5",para:"\xB6",middot:"\xB7",cedil:"\xB8",sup1:"\xB9",ordm:"\xBA",raquo:"\xBB",frac14:"\xBC",frac12:"\xBD",frac34:"\xBE",iquest:"\xBF",times:"\xD7",divide:"\xF7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220B",prod:"\u220F",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221A",prop:"\u221D",infin:"\u221E",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222A",int:"\u222B",there4:"\u2234",sim:"\u223C",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22A5",sdot:"\u22C5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039A",Lambda:"\u039B",Mu:"\u039C",Nu:"\u039D",Xi:"\u039E",Omicron:"\u039F",Pi:"\u03A0",Rho:"\u03A1",Sigma:"\u03A3",Tau:"\u03A4",Upsilon:"\u03A5",Phi:"\u03A6",Chi:"\u03A7",Psi:"\u03A8",Omega:"\u03A9",alpha:"\u03B1",beta:"\u03B2",gamma:"\u03B3",delta:"\u03B4",epsilon:"\u03B5",zeta:"\u03B6",eta:"\u03B7",theta:"\u03B8",iota:"\u03B9",kappa:"\u03BA",lambda:"\u03BB",mu:"\u03BC",nu:"\u03BD",xi:"\u03BE",omicron:"\u03BF",pi:"\u03C0",rho:"\u03C1",sigmaf:"\u03C2",sigma:"\u03C3",tau:"\u03C4",upsilon:"\u03C5",phi:"\u03C6",chi:"\u03C7",psi:"\u03C8",omega:"\u03C9",thetasym:"\u03D1",upsih:"\u03D2",piv:"\u03D6",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02C6",tilde:"\u02DC",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200C",zwj:"\u200D",lrm:"\u200E",rlm:"\u200F",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201A",ldquo:"\u201C",rdquo:"\u201D",bdquo:"\u201E",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203A",oline:"\u203E",euro:"\u20AC",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21B5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230A",rfloor:"\u230B",loz:"\u25CA",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"}});var Ml=C(ao=>{var oo=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Ol=new RegExp("[\\-\\.0-9"+oo.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),Rl=new RegExp("^"+oo.source+Ol.source+"*(?::"+oo.source+Ol.source+"*)?$"),Br=0,ut=1,nr=2,zr=3,sr=4,or=5,jr=6,en=7;function ar(t,e){this.message=t,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,ar)}ar.prototype=new Error;ar.prototype.name=ar.name;function _l(){}_l.prototype={parse:function(t,e,r){var i=this.domBuilder;i.startDocument(),Ll(e,e={}),Ld(t,e,r,i,this.errorHandler),i.endDocument()}};function Ld(t,e,r,i,n){function s(M){if(M>65535){M-=65536;var I=55296+(M>>10),Y=56320+(M&1023);return String.fromCharCode(I,Y)}else return String.fromCharCode(M)}function o(M){var I=M.slice(1,-1);return I in r?r[I]:I.charAt(0)==="#"?s(parseInt(I.substr(1).replace("x","0x"))):(n.error("entity not found:"+M),M)}function a(M){if(M>N){var I=t.substring(N,M).replace(/&#?\w+;/g,o);p&&l(N),i.characters(I,0,M-N),N=M}}function l(M,I){for(;M>=u&&(I=f.exec(t));)c=I.index,u=c+I[0].length,p.lineNumber++;p.columnNumber=M-c+1}for(var c=0,u=0,f=/.*(?:\r\n?|\n)|.*$/g,p=i.locator,y=[{currentNSMap:e}],S={},N=0;;){try{var T=t.indexOf("<",N);if(T<0){if(!t.substr(N).match(/^\s*$/)){var R=i.doc,K=R.createTextNode(t.substr(N));R.appendChild(K),i.currentElement=K}return}switch(T>N&&a(T),t.charAt(T+1)){case"/":var x=t.indexOf(">",T+3),g=t.substring(T+2,x),m=y.pop();x<0?(g=t.substring(T+2).replace(/[\s<].*/,""),n.error("end tag name: "+g+" is not complete:"+m.tagName),x=T+1+g.length):g.match(/\s</)&&(g=g.replace(/[\s<].*/,""),n.error("end tag name: "+g+" maybe not complete"),x=T+1+g.length);var b=m.localNSMap,h=m.tagName==g,E=h||m.tagName&&m.tagName.toLowerCase()==g.toLowerCase();if(E){if(i.endElement(m.uri,m.localName,g),b)for(var v in b)i.endPrefixMapping(v);h||n.fatalError("end tag name: "+g+" is not match the current start tagName:"+m.tagName)}else y.push(m);x++;break;case"?":p&&l(T),x=kd(t,T,i);break;case"!":p&&l(T),x=Fd(t,T,i,n);break;default:p&&l(T);var d=new Al,w=y[y.length-1].currentNSMap,x=Ad(t,T,d,w,o,n),O=d.length;if(!d.closed&&Pd(t,x,d.tagName,S)&&(d.closed=!0,r.nbsp||n.warning("unclosed xml attribute")),p&&O){for(var _=Il(p,{}),L=0;L<O;L++){var G=d[L];l(G.offset),G.locator=Il(p,{})}i.locator=_,Cl(d,i,w)&&y.push(d),i.locator=p}else Cl(d,i,w)&&y.push(d);d.uri==="http://www.w3.org/1999/xhtml"&&!d.closed?x=Md(t,x,d.tagName,o,i):x++}}catch(M){if(M instanceof ar)throw M;n.error("element parse error: "+M),x=-1}x>N?N=x:a(Math.max(T,N)+1)}}function Il(t,e){return e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber,e}function Ad(t,e,r,i,n,s){function o(y,S,N){y in r.attributeNames&&s.fatalError("Attribute "+y+" redefined"),r.addValue(y,S,N)}for(var a,l,c=++e,u=Br;;){var f=t.charAt(c);switch(f){case"=":if(u===ut)a=t.slice(e,c),u=zr;else if(u===nr)u=zr;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(u===zr||u===ut)if(u===ut&&(s.warning('attribute value must after "="'),a=t.slice(e,c)),e=c+1,c=t.indexOf(f,e),c>0)l=t.slice(e,c).replace(/&#?\w+;/g,n),o(a,l,e-1),u=or;else throw new Error("attribute value no end '"+f+"' match");else if(u==sr)l=t.slice(e,c).replace(/&#?\w+;/g,n),o(a,l,e),s.warning('attribute "'+a+'" missed start quot('+f+")!!"),e=c+1,u=or;else throw new Error('attribute value must after "="');break;case"/":switch(u){case Br:r.setTagName(t.slice(e,c));case or:case jr:case en:u=en,r.closed=!0;case sr:case ut:case nr:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return s.error("unexpected end of input"),u==Br&&r.setTagName(t.slice(e,c)),c;case">":switch(u){case Br:r.setTagName(t.slice(e,c));case or:case jr:case en:break;case sr:case ut:l=t.slice(e,c),l.slice(-1)==="/"&&(r.closed=!0,l=l.slice(0,-1));case nr:u===nr&&(l=a),u==sr?(s.warning('attribute "'+l+'" missed quot(")!'),o(a,l.replace(/&#?\w+;/g,n),e)):((i[""]!=="http://www.w3.org/1999/xhtml"||!l.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+l+'" missed value!! "'+l+'" instead!!'),o(l,l,e));break;case zr:throw new Error("attribute value missed!!")}return c;case"\x80":f=" ";default:if(f<=" ")switch(u){case Br:r.setTagName(t.slice(e,c)),u=jr;break;case ut:a=t.slice(e,c),u=nr;break;case sr:var l=t.slice(e,c).replace(/&#?\w+;/g,n);s.warning('attribute "'+l+'" missed quot(")!!'),o(a,l,e);case or:u=jr;break}else switch(u){case nr:var p=r.tagName;(i[""]!=="http://www.w3.org/1999/xhtml"||!a.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+a+'" missed value!! "'+a+'" instead2!!'),o(a,a,e),e=c,u=ut;break;case or:s.warning('attribute space is required"'+a+'"!!');case jr:u=ut,e=c;break;case zr:u=sr,e=c;break;case en:throw new Error("elements closed character '/' and '>' must be connected to")}}c++}}function Cl(t,e,r){for(var i=t.tagName,n=null,f=t.length;f--;){var s=t[f],o=s.qName,a=s.value,p=o.indexOf(":");if(p>0)var l=s.prefix=o.slice(0,p),c=o.slice(p+1),u=l==="xmlns"&&c;else c=o,l=null,u=o==="xmlns"&&"";s.localName=c,u!==!1&&(n==null&&(n={},Ll(r,r={})),r[u]=n[u]=a,s.uri="http://www.w3.org/2000/xmlns/",e.startPrefixMapping(u,a))}for(var f=t.length;f--;){s=t[f];var l=s.prefix;l&&(l==="xml"&&(s.uri="http://www.w3.org/XML/1998/namespace"),l!=="xmlns"&&(s.uri=r[l||""]))}var p=i.indexOf(":");p>0?(l=t.prefix=i.slice(0,p),c=t.localName=i.slice(p+1)):(l=null,c=t.localName=i);var y=t.uri=r[l||""];if(e.startElement(y,c,i,t),t.closed){if(e.endElement(y,c,i),n)for(l in n)e.endPrefixMapping(l)}else return t.currentNSMap=r,t.localNSMap=n,!0}function Md(t,e,r,i,n){if(/^(?:script|textarea)$/i.test(r)){var s=t.indexOf("</"+r+">",e),o=t.substring(e+1,s);if(/[&<]/.test(o))return/^script$/i.test(r)?(n.characters(o,0,o.length),s):(o=o.replace(/&#?\w+;/g,i),n.characters(o,0,o.length),s)}return e+1}function Pd(t,e,r,i){var n=i[r];return n==null&&(n=t.lastIndexOf("</"+r+">"),n<e&&(n=t.lastIndexOf("</"+r)),i[r]=n),n<e}function Ll(t,e){for(var r in t)e[r]=t[r]}function Fd(t,e,r,i){var n=t.charAt(e+2);switch(n){case"-":if(t.charAt(e+3)==="-"){var s=t.indexOf("-->",e+4);return s>e?(r.comment(t,e+4,s-e-4),s+3):(i.error("Unclosed comment"),-1)}else return-1;default:if(t.substr(e+3,6)=="CDATA["){var s=t.indexOf("]]>",e+9);return r.startCDATA(),r.characters(t,e+9,s-e-9),r.endCDATA(),s+3}var o=qd(t,e),a=o.length;if(a>1&&/!doctype/i.test(o[0][0])){var l=o[1][0],c=!1,u=!1;a>3&&(/^public$/i.test(o[2][0])?(c=o[3][0],u=a>4&&o[4][0]):/^system$/i.test(o[2][0])&&(u=o[3][0]));var f=o[a-1];return r.startDTD(l,c,u),r.endDTD(),f.index+f[0].length}}return-1}function kd(t,e,r){var i=t.indexOf("?>",e);if(i){var n=t.substring(e,i).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(n){var s=n[0].length;return r.processingInstruction(n[1],n[2]),i+2}else return-1}return-1}function Al(){this.attributeNames={}}Al.prototype={setTagName:function(t){if(!Rl.test(t))throw new Error("invalid tagName:"+t);this.tagName=t},addValue:function(t,e,r){if(!Rl.test(t))throw new Error("invalid attribute:"+t);this.attributeNames[t]=this.length,this[this.length++]={qName:t,value:e,offset:r}},length:0,getLocalName:function(t){return this[t].localName},getLocator:function(t){return this[t].locator},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}};function qd(t,e){var r,i=[],n=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(n.lastIndex=e,n.exec(t);r=n.exec(t);)if(i.push(r),r[1])return i}ao.XMLReader=_l;ao.ParseError=ar});var wo=C(Gr=>{function Vr(t,e){for(var r in t)e[r]=t[r]}function ce(t,e){var r=t.prototype;if(!(r instanceof e)){let n=function(){};var i=n;n.prototype=e.prototype,n=new n,Vr(r,n),t.prototype=r=n}r.constructor!=t&&(typeof t!="function"&&console.error("unknow Class:"+t),r.constructor=t)}var Ud="http://www.w3.org/1999/xhtml",he={},De=he.ELEMENT_NODE=1,cr=he.ATTRIBUTE_NODE=2,tn=he.TEXT_NODE=3,Bl=he.CDATA_SECTION_NODE=4,zl=he.ENTITY_REFERENCE_NODE=5,Bd=he.ENTITY_NODE=6,jl=he.PROCESSING_INSTRUCTION_NODE=7,Xl=he.COMMENT_NODE=8,Vl=he.DOCUMENT_NODE=9,Wl=he.DOCUMENT_TYPE_NODE=10,He=he.DOCUMENT_FRAGMENT_NODE=11,zd=he.NOTATION_NODE=12,re={},Z={},Ig=re.INDEX_SIZE_ERR=(Z[1]="Index size error",1),Cg=re.DOMSTRING_SIZE_ERR=(Z[2]="DOMString size error",2),jd=re.HIERARCHY_REQUEST_ERR=(Z[3]="Hierarchy request error",3),_g=re.WRONG_DOCUMENT_ERR=(Z[4]="Wrong document",4),Lg=re.INVALID_CHARACTER_ERR=(Z[5]="Invalid character",5),Ag=re.NO_DATA_ALLOWED_ERR=(Z[6]="No data allowed",6),Mg=re.NO_MODIFICATION_ALLOWED_ERR=(Z[7]="No modification allowed",7),Xd=re.NOT_FOUND_ERR=(Z[8]="Not found",8),Pg=re.NOT_SUPPORTED_ERR=(Z[9]="Not supported",9),Pl=re.INUSE_ATTRIBUTE_ERR=(Z[10]="Attribute in use",10),Fg=re.INVALID_STATE_ERR=(Z[11]="Invalid state",11),kg=re.SYNTAX_ERR=(Z[12]="Syntax error",12),qg=re.INVALID_MODIFICATION_ERR=(Z[13]="Invalid modification",13),Ug=re.NAMESPACE_ERR=(Z[14]="Invalid namespace",14),Bg=re.INVALID_ACCESS_ERR=(Z[15]="Invalid access",15);function Lt(t,e){if(e instanceof Error)var r=e;else r=this,Error.call(this,Z[t]),this.message=Z[t],Error.captureStackTrace&&Error.captureStackTrace(this,Lt);return r.code=t,e&&(this.message=this.message+": "+e),r}Lt.prototype=Error.prototype;Vr(re,Lt);function ft(){}ft.prototype={length:0,item:function(t){return this[t]||null},toString:function(t,e){for(var r=[],i=0;i<this.length;i++)lr(this[i],r,t,e);return r.join("")}};function hr(t,e){this._node=t,this._refresh=e,co(this)}function co(t){var e=t._node._inc||t._node.ownerDocument._inc;if(t._inc!=e){var r=t._refresh(t._node);rc(t,"length",r.length),Vr(r,t),t._inc=e}}hr.prototype.item=function(t){return co(this),this[t]};ce(hr,ft);function rn(){}function Hl(t,e){for(var r=t.length;r--;)if(t[r]===e)return r}function Fl(t,e,r,i){if(i?e[Hl(e,i)]=r:e[e.length++]=r,t){r.ownerElement=t;var n=t.ownerDocument;n&&(i&&$l(n,t,i),Vd(n,t,r))}}function kl(t,e,r){var i=Hl(e,r);if(i>=0){for(var n=e.length-1;i<n;)e[i]=e[++i];if(e.length=n,t){var s=t.ownerDocument;s&&($l(s,t,r),r.ownerElement=null)}}else throw Lt(Xd,new Error(t.tagName+"@"+r))}rn.prototype={length:0,item:ft.prototype.item,getNamedItem:function(t){for(var e=this.length;e--;){var r=this[e];if(r.nodeName==t)return r}},setNamedItem:function(t){var e=t.ownerElement;if(e&&e!=this._ownerElement)throw new Lt(Pl);var r=this.getNamedItem(t.nodeName);return Fl(this._ownerElement,this,t,r),r},setNamedItemNS:function(t){var e=t.ownerElement,r;if(e&&e!=this._ownerElement)throw new Lt(Pl);return r=this.getNamedItemNS(t.namespaceURI,t.localName),Fl(this._ownerElement,this,t,r),r},removeNamedItem:function(t){var e=this.getNamedItem(t);return kl(this._ownerElement,this,e),e},removeNamedItemNS:function(t,e){var r=this.getNamedItemNS(t,e);return kl(this._ownerElement,this,r),r},getNamedItemNS:function(t,e){for(var r=this.length;r--;){var i=this[r];if(i.localName==e&&i.namespaceURI==t)return i}return null}};function Gl(t){if(this._features={},t)for(var e in t)this._features=t[e]}Gl.prototype={hasFeature:function(t,e){var r=this._features[t.toLowerCase()];return!!(r&&(!e||e in r))},createDocument:function(t,e,r){var i=new Wr;if(i.implementation=this,i.childNodes=new ft,i.doctype=r,r&&i.appendChild(r),e){var n=i.createElementNS(t,e);i.appendChild(n)}return i},createDocumentType:function(t,e,r){var i=new po;return i.name=t,i.nodeName=t,i.publicId=e,i.systemId=r,i}};function ie(){}ie.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(t,e){return Yl(this,t,e)},replaceChild:function(t,e){this.insertBefore(t,e),e&&this.removeChild(e)},removeChild:function(t){return Kl(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(t){return lo(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var e=t.nextSibling;e&&e.nodeType==tn&&t.nodeType==tn?(this.removeChild(e),t.appendData(e.data)):(t.normalize(),t=e)}},isSupported:function(t,e){return this.ownerDocument.implementation.hasFeature(t,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(t){for(var e=this;e;){var r=e._nsMap;if(r){for(var i in r)if(r[i]==t)return i}e=e.nodeType==cr?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(t){for(var e=this;e;){var r=e._nsMap;if(r&&t in r)return r[t];e=e.nodeType==cr?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(t){var e=this.lookupPrefix(t);return e==null}};function ql(t){return t=="<"&&"&lt;"||t==">"&&"&gt;"||t=="&"&&"&amp;"||t=='"'&&"&quot;"||"&#"+t.charCodeAt()+";"}Vr(he,ie);Vr(he,ie.prototype);function Xr(t,e){if(e(t))return!0;if(t=t.firstChild)do if(Xr(t,e))return!0;while(t=t.nextSibling)}function Wr(){}function Vd(t,e,r){t&&t._inc++;var i=r.namespaceURI;i=="http://www.w3.org/2000/xmlns/"&&(e._nsMap[r.prefix?r.localName:""]=r.value)}function $l(t,e,r,i){t&&t._inc++;var n=r.namespaceURI;n=="http://www.w3.org/2000/xmlns/"&&delete e._nsMap[r.prefix?r.localName:""]}function ho(t,e,r){if(t&&t._inc){t._inc++;var i=e.childNodes;if(r)i[i.length++]=r;else{for(var n=e.firstChild,s=0;n;)i[s++]=n,n=n.nextSibling;i.length=s}}}function Kl(t,e){var r=e.previousSibling,i=e.nextSibling;return r?r.nextSibling=i:t.firstChild=i,i?i.previousSibling=r:t.lastChild=r,ho(t.ownerDocument,t),e}function Yl(t,e,r){var i=e.parentNode;if(i&&i.removeChild(e),e.nodeType===He){var n=e.firstChild;if(n==null)return e;var s=e.lastChild}else n=s=e;var o=r?r.previousSibling:t.lastChild;n.previousSibling=o,s.nextSibling=r,o?o.nextSibling=n:t.firstChild=n,r==null?t.lastChild=s:r.previousSibling=s;do n.parentNode=t;while(n!==s&&(n=n.nextSibling));return ho(t.ownerDocument||t,t),e.nodeType==He&&(e.firstChild=e.lastChild=null),e}function Wd(t,e){var r=e.parentNode;if(r){var i=t.lastChild;r.removeChild(e);var i=t.lastChild}var i=t.lastChild;return e.parentNode=t,e.previousSibling=i,e.nextSibling=null,i?i.nextSibling=e:t.firstChild=e,t.lastChild=e,ho(t.ownerDocument,t,e),e}Wr.prototype={nodeName:"#document",nodeType:Vl,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,e){if(t.nodeType==He){for(var r=t.firstChild;r;){var i=r.nextSibling;this.insertBefore(r,e),r=i}return t}return this.documentElement==null&&t.nodeType==De&&(this.documentElement=t),Yl(this,t,e),t.ownerDocument=this,t},removeChild:function(t){return this.documentElement==t&&(this.documentElement=null),Kl(this,t)},importNode:function(t,e){return tc(this,t,e)},getElementById:function(t){var e=null;return Xr(this.documentElement,function(r){if(r.nodeType==De&&r.getAttribute("id")==t)return e=r,!0}),e},getElementsByClassName:function(t){var e=new RegExp("(^|\\s)"+t+"(\\s|$)");return new hr(this,function(r){var i=[];return Xr(r.documentElement,function(n){n!==r&&n.nodeType==De&&e.test(n.getAttribute("class"))&&i.push(n)}),i})},createElement:function(t){var e=new ur;e.ownerDocument=this,e.nodeName=t,e.tagName=t,e.childNodes=new ft;var r=e.attributes=new rn;return r._ownerElement=e,e},createDocumentFragment:function(){var t=new sn;return t.ownerDocument=this,t.childNodes=new ft,t},createTextNode:function(t){var e=new uo;return e.ownerDocument=this,e.appendData(t),e},createComment:function(t){var e=new fo;return e.ownerDocument=this,e.appendData(t),e},createCDATASection:function(t){var e=new mo;return e.ownerDocument=this,e.appendData(t),e},createProcessingInstruction:function(t,e){var r=new yo;return r.ownerDocument=this,r.tagName=r.target=t,r.nodeValue=r.data=e,r},createAttribute:function(t){var e=new nn;return e.ownerDocument=this,e.name=t,e.nodeName=t,e.localName=t,e.specified=!0,e},createEntityReference:function(t){var e=new go;return e.ownerDocument=this,e.nodeName=t,e},createElementNS:function(t,e){var r=new ur,i=e.split(":"),n=r.attributes=new rn;return r.childNodes=new ft,r.ownerDocument=this,r.nodeName=e,r.tagName=e,r.namespaceURI=t,i.length==2?(r.prefix=i[0],r.localName=i[1]):r.localName=e,n._ownerElement=r,r},createAttributeNS:function(t,e){var r=new nn,i=e.split(":");return r.ownerDocument=this,r.nodeName=e,r.name=e,r.namespaceURI=t,r.specified=!0,i.length==2?(r.prefix=i[0],r.localName=i[1]):r.localName=e,r}};ce(Wr,ie);function ur(){this._nsMap={}}ur.prototype={nodeType:De,hasAttribute:function(t){return this.getAttributeNode(t)!=null},getAttribute:function(t){var e=this.getAttributeNode(t);return e&&e.value||""},getAttributeNode:function(t){return this.attributes.getNamedItem(t)},setAttribute:function(t,e){var r=this.ownerDocument.createAttribute(t);r.value=r.nodeValue=""+e,this.setAttributeNode(r)},removeAttribute:function(t){var e=this.getAttributeNode(t);e&&this.removeAttributeNode(e)},appendChild:function(t){return t.nodeType===He?this.insertBefore(t,null):Wd(this,t)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,e){var r=this.getAttributeNodeNS(t,e);r&&this.removeAttributeNode(r)},hasAttributeNS:function(t,e){return this.getAttributeNodeNS(t,e)!=null},getAttributeNS:function(t,e){var r=this.getAttributeNodeNS(t,e);return r&&r.value||""},setAttributeNS:function(t,e,r){var i=this.ownerDocument.createAttributeNS(t,e);i.value=i.nodeValue=""+r,this.setAttributeNode(i)},getAttributeNodeNS:function(t,e){return this.attributes.getNamedItemNS(t,e)},getElementsByTagName:function(t){return new hr(this,function(e){var r=[];return Xr(e,function(i){i!==e&&i.nodeType==De&&(t==="*"||i.tagName==t)&&r.push(i)}),r})},getElementsByTagNameNS:function(t,e){return new hr(this,function(r){var i=[];return Xr(r,function(n){n!==r&&n.nodeType===De&&(t==="*"||n.namespaceURI===t)&&(e==="*"||n.localName==e)&&i.push(n)}),i})}};Wr.prototype.getElementsByTagName=ur.prototype.getElementsByTagName;Wr.prototype.getElementsByTagNameNS=ur.prototype.getElementsByTagNameNS;ce(ur,ie);function nn(){}nn.prototype.nodeType=cr;ce(nn,ie);function Hr(){}Hr.prototype={data:"",substringData:function(t,e){return this.data.substring(t,t+e)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,e){this.replaceData(t,0,e)},appendChild:function(t){throw new Error(Z[jd])},deleteData:function(t,e){this.replaceData(t,e,"")},replaceData:function(t,e,r){var i=this.data.substring(0,t),n=this.data.substring(t+e);r=i+r+n,this.nodeValue=this.data=r,this.length=r.length}};ce(Hr,ie);function uo(){}uo.prototype={nodeName:"#text",nodeType:tn,splitText:function(t){var e=this.data,r=e.substring(t);e=e.substring(0,t),this.data=this.nodeValue=e,this.length=e.length;var i=this.ownerDocument.createTextNode(r);return this.parentNode&&this.parentNode.insertBefore(i,this.nextSibling),i}};ce(uo,Hr);function fo(){}fo.prototype={nodeName:"#comment",nodeType:Xl};ce(fo,Hr);function mo(){}mo.prototype={nodeName:"#cdata-section",nodeType:Bl};ce(mo,Hr);function po(){}po.prototype.nodeType=Wl;ce(po,ie);function Zl(){}Zl.prototype.nodeType=zd;ce(Zl,ie);function Ql(){}Ql.prototype.nodeType=Bd;ce(Ql,ie);function go(){}go.prototype.nodeType=zl;ce(go,ie);function sn(){}sn.prototype.nodeName="#document-fragment";sn.prototype.nodeType=He;ce(sn,ie);function yo(){}yo.prototype.nodeType=jl;ce(yo,ie);function Jl(){}Jl.prototype.serializeToString=function(t,e,r){return ec.call(t,e,r)};ie.prototype.toString=ec;function ec(t,e){var r=[],i=this.nodeType==9&&this.documentElement||this,n=i.prefix,s=i.namespaceURI;if(s&&n==null){var n=i.lookupPrefix(s);if(n==null)var o=[{namespace:s,prefix:null}]}return lr(this,r,t,e,o),r.join("")}function Ul(t,e,r){var i=t.prefix||"",n=t.namespaceURI;if(!i&&!n||i==="xml"&&n==="http://www.w3.org/XML/1998/namespace"||n=="http://www.w3.org/2000/xmlns/")return!1;for(var s=r.length;s--;){var o=r[s];if(o.prefix==i)return o.namespace!=n}return!0}function lr(t,e,r,i,n){if(i)if(t=i(t),t){if(typeof t=="string"){e.push(t);return}}else return;switch(t.nodeType){case De:n||(n=[]);var s=n.length,o=t.attributes,a=o.length,S=t.firstChild,l=t.tagName;r=Ud===t.namespaceURI||r,e.push("<",l);for(var c=0;c<a;c++){var u=o.item(c);u.prefix=="xmlns"?n.push({prefix:u.localName,namespace:u.value}):u.nodeName=="xmlns"&&n.push({prefix:"",namespace:u.value})}for(var c=0;c<a;c++){var u=o.item(c);if(Ul(u,r,n)){var f=u.prefix||"",p=u.namespaceURI,y=f?" xmlns:"+f:" xmlns";e.push(y,'="',p,'"'),n.push({prefix:f,namespace:p})}lr(u,e,r,i,n)}if(Ul(t,r,n)){var f=t.prefix||"",p=t.namespaceURI;if(p){var y=f?" xmlns:"+f:" xmlns";e.push(y,'="',p,'"'),n.push({prefix:f,namespace:p})}}if(S||r&&!/^(?:meta|link|img|br|hr|input)$/i.test(l)){if(e.push(">"),r&&/^script$/i.test(l))for(;S;)S.data?e.push(S.data):lr(S,e,r,i,n),S=S.nextSibling;else for(;S;)lr(S,e,r,i,n),S=S.nextSibling;e.push("</",l,">")}else e.push("/>");return;case Vl:case He:for(var S=t.firstChild;S;)lr(S,e,r,i,n),S=S.nextSibling;return;case cr:return e.push(" ",t.name,'="',t.value.replace(/[<&"]/g,ql),'"');case tn:return e.push(t.data.replace(/[<&]/g,ql).replace(/]]>/g,"]]&gt;"));case Bl:return e.push("<![CDATA[",t.data,"]]>");case Xl:return e.push("<!--",t.data,"-->");case Wl:var N=t.publicId,T=t.systemId;if(e.push("<!DOCTYPE ",t.name),N)e.push(" PUBLIC ",N),T&&T!="."&&e.push(" ",T),e.push(">");else if(T&&T!=".")e.push(" SYSTEM ",T,">");else{var R=t.internalSubset;R&&e.push(" [",R,"]"),e.push(">")}return;case jl:return e.push("<?",t.target," ",t.data,"?>");case zl:return e.push("&",t.nodeName,";");default:e.push("??",t.nodeName)}}function tc(t,e,r){var i;switch(e.nodeType){case De:i=e.cloneNode(!1),i.ownerDocument=t;case He:break;case cr:r=!0;break}if(i||(i=e.cloneNode(!1)),i.ownerDocument=t,i.parentNode=null,r)for(var n=e.firstChild;n;)i.appendChild(tc(t,n,r)),n=n.nextSibling;return i}function lo(t,e,r){var i=new e.constructor;for(var n in e){var s=e[n];typeof s!="object"&&s!=i[n]&&(i[n]=s)}switch(e.childNodes&&(i.childNodes=new ft),i.ownerDocument=t,i.nodeType){case De:var o=e.attributes,a=i.attributes=new rn,l=o.length;a._ownerElement=i;for(var c=0;c<l;c++)i.setAttributeNode(lo(t,o.item(c),!0));break;case cr:r=!0}if(r)for(var u=e.firstChild;u;)i.appendChild(lo(t,u,r)),u=u.nextSibling;return i}function rc(t,e,r){t[e]=r}try{if(Object.defineProperty){let t=function(e){switch(e.nodeType){case De:case He:var r=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&r.push(t(e)),e=e.nextSibling;return r.join("");default:return e.nodeValue}};Hd=t,Object.defineProperty(hr.prototype,"length",{get:function(){return co(this),this.$$length}}),Object.defineProperty(ie.prototype,"textContent",{get:function(){return t(this)},set:function(e){switch(this.nodeType){case De:case He:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),rc=function(e,r,i){e["$$"+r]=i}}}catch{}var Hd;Gr.Node=ie;Gr.DOMException=Lt;Gr.DOMImplementation=Gl;Gr.XMLSerializer=Jl});var oc=C(Kr=>{function nc(t){this.options=t||{locator:{}}}nc.prototype.parseFromString=function(t,e){var r=this.options,i=new Kd,n=r.domBuilder||new $r,s=r.errorHandler,o=r.locator,a=r.xmlns||{},l=/\/x?html?$/.test(e),c=l?$d.entityMap:{lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return o&&n.setDocumentLocator(o),i.errorHandler=Gd(s,n,o),i.domBuilder=r.domBuilder||n,l&&(a[""]="http://www.w3.org/1999/xhtml"),a.xml=a.xml||"http://www.w3.org/XML/1998/namespace",t&&typeof t=="string"?i.parse(t,a,c):i.errorHandler.error("invalid doc source"),n.doc};function Gd(t,e,r){if(!t){if(e instanceof $r)return e;t=e}var i={},n=t instanceof Function;r=r||{};function s(o){var a=t[o];!a&&n&&(a=t.length==2?function(l){t(o,l)}:t),i[o]=a&&function(l){a("[xmldom "+o+"]	"+l+Eo(r))}||function(){}}return s("warning"),s("error"),s("fatalError"),i}function $r(){this.cdata=!1}function fr(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}$r.prototype={startDocument:function(){this.doc=new Zd().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,e,r,i){var n=this.doc,s=n.createElementNS(t,r||e),o=i.length;on(this,s),this.currentElement=s,this.locator&&fr(this.locator,s);for(var a=0;a<o;a++){var t=i.getURI(a),l=i.getValue(a),r=i.getQName(a),c=n.createAttributeNS(t,r);this.locator&&fr(i.getLocator(a),c),c.value=c.nodeValue=l,s.setAttributeNode(c)}},endElement:function(t,e,r){var i=this.currentElement,n=i.tagName;this.currentElement=i.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var r=this.doc.createProcessingInstruction(t,e);this.locator&&fr(this.locator,r),on(this,r)},ignorableWhitespace:function(t,e,r){},characters:function(t,e,r){if(t=ic.apply(this,arguments),t){if(this.cdata)var i=this.doc.createCDATASection(t);else var i=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(i):/^\s*$/.test(t)&&this.doc.appendChild(i),this.locator&&fr(this.locator,i)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,r){t=ic.apply(this,arguments);var i=this.doc.createComment(t);this.locator&&fr(this.locator,i),on(this,i)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,r){var i=this.doc.implementation;if(i&&i.createDocumentType){var n=i.createDocumentType(t,e,r);this.locator&&fr(this.locator,n),on(this,n)}},warning:function(t){console.warn("[xmldom warning]	"+t,Eo(this.locator))},error:function(t){console.error("[xmldom error]	"+t,Eo(this.locator))},fatalError:function(t){throw new Yd(t,this.locator)}};function Eo(t){if(t)return`
@`+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function ic(t,e,r){return typeof t=="string"?t.substr(e,r):t.length>=e+r||e?new java.lang.String(t,e,r)+"":t}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(t){$r.prototype[t]=function(){return null}});function on(t,e){t.currentElement?t.currentElement.appendChild(e):t.doc.appendChild(e)}var $d=Tl(),sc=Ml(),Kd=sc.XMLReader,Yd=sc.ParseError,Zd=Kr.DOMImplementation=wo().DOMImplementation;Kr.XMLSerializer=wo().XMLSerializer;Kr.DOMParser=nc;Kr.__DOMHandler=$r});var cc=C(lc=>{var Qd=oc().DOMParser;lc.parse=em;var an=3,ac=4,Jd=8;function bo(t){return t.nodeType===an||t.nodeType===Jd||t.nodeType===ac}function Ge(t){return!t.childNodes||t.childNodes.length===0}function At(t,e){if(!t)throw new Error(e)}function em(t){var e=new Qd().parseFromString(t);At(e.documentElement.nodeName==="plist","malformed document. First element should be <plist>");var r=dr(e.documentElement);return r.length==1&&(r=r[0]),r}function dr(t){var e,r,i,n,s,o,a,l;if(!t)return null;if(t.nodeName==="plist"){if(s=[],Ge(t))return s;for(e=0;e<t.childNodes.length;e++)bo(t.childNodes[e])||s.push(dr(t.childNodes[e]));return s}else if(t.nodeName==="dict"){if(r={},i=null,a=0,Ge(t))return r;for(e=0;e<t.childNodes.length;e++)bo(t.childNodes[e])||(a%2===0?(At(t.childNodes[e].nodeName==="key","Missing key while parsing <dict/>."),i=dr(t.childNodes[e])):(At(t.childNodes[e].nodeName!=="key",'Unexpected key "'+dr(t.childNodes[e])+'" while parsing <dict/>.'),r[i]=dr(t.childNodes[e])),a+=1);return a%2===1&&(r[i]=""),r}else if(t.nodeName==="array"){if(s=[],Ge(t))return s;for(e=0;e<t.childNodes.length;e++)bo(t.childNodes[e])||(o=dr(t.childNodes[e]),o!=null&&s.push(o));return s}else if(t.nodeName!=="#text"){if(t.nodeName==="key")return Ge(t)?"":(At(t.childNodes[0].nodeValue!=="__proto__","__proto__ keys can lead to prototype pollution. More details on CVE-2022-22912"),t.childNodes[0].nodeValue);if(t.nodeName==="string"){if(o="",Ge(t))return o;for(e=0;e<t.childNodes.length;e++){var l=t.childNodes[e].nodeType;(l===an||l===ac)&&(o+=t.childNodes[e].nodeValue)}return o}else{if(t.nodeName==="integer")return At(!Ge(t),'Cannot parse "" as integer.'),parseInt(t.childNodes[0].nodeValue,10);if(t.nodeName==="real"){for(At(!Ge(t),'Cannot parse "" as real.'),o="",e=0;e<t.childNodes.length;e++)t.childNodes[e].nodeType===an&&(o+=t.childNodes[e].nodeValue);return parseFloat(o)}else if(t.nodeName==="data"){if(o="",Ge(t))return Buffer.from(o,"base64");for(e=0;e<t.childNodes.length;e++)t.childNodes[e].nodeType===an&&(o+=t.childNodes[e].nodeValue.replace(/\s+/g,""));return Buffer.from(o,"base64")}else{if(t.nodeName==="date")return At(!Ge(t),'Cannot parse "" as Date.'),new Date(t.childNodes[0].nodeValue);if(t.nodeName==="null")return null;if(t.nodeName==="true")return!0;if(t.nodeName==="false")return!1;throw new Error("Invalid PLIST tag "+t.nodeName)}}}}});var fc=C(ln=>{"use strict";ln.byteLength=rm;ln.toByteArray=nm;ln.fromByteArray=am;var Le=[],be=[],tm=typeof Uint8Array<"u"?Uint8Array:Array,xo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Mt=0,hc=xo.length;Mt<hc;++Mt)Le[Mt]=xo[Mt],be[xo.charCodeAt(Mt)]=Mt;var Mt,hc;be[45]=62;be[95]=63;function uc(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var i=r===e?0:4-r%4;return[r,i]}function rm(t){var e=uc(t),r=e[0],i=e[1];return(r+i)*3/4-i}function im(t,e,r){return(e+r)*3/4-r}function nm(t){var e,r=uc(t),i=r[0],n=r[1],s=new tm(im(t,i,n)),o=0,a=n>0?i-4:i,l;for(l=0;l<a;l+=4)e=be[t.charCodeAt(l)]<<18|be[t.charCodeAt(l+1)]<<12|be[t.charCodeAt(l+2)]<<6|be[t.charCodeAt(l+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return n===2&&(e=be[t.charCodeAt(l)]<<2|be[t.charCodeAt(l+1)]>>4,s[o++]=e&255),n===1&&(e=be[t.charCodeAt(l)]<<10|be[t.charCodeAt(l+1)]<<4|be[t.charCodeAt(l+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function sm(t){return Le[t>>18&63]+Le[t>>12&63]+Le[t>>6&63]+Le[t&63]}function om(t,e,r){for(var i,n=[],s=e;s<r;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),n.push(sm(i));return n.join("")}function am(t){for(var e,r=t.length,i=r%3,n=[],s=16383,o=0,a=r-i;o<a;o+=s)n.push(om(t,o,o+s>a?a:o+s));return i===1?(e=t[r-1],n.push(Le[e>>2]+Le[e<<4&63]+"==")):i===2&&(e=(t[r-2]<<8)+t[r-1],n.push(Le[e>>10]+Le[e>>4&63]+Le[e<<2&63]+"=")),n.join("")}});var Ae=C((dc,dt)=>{(function(){var t,e,r,i,n,s,o,a={}.hasOwnProperty;t=function(l,...c){var u,f,p,y;if(n(Object.assign))Object.assign.apply(null,arguments);else for(u=0,p=c.length;u<p;u++)if(y=c[u],y!=null)for(f in y)a.call(y,f)&&(l[f]=y[f]);return l},n=function(l){return!!l&&Object.prototype.toString.call(l)==="[object Function]"},s=function(l){var c;return!!l&&((c=typeof l)=="function"||c==="object")},r=function(l){return n(Array.isArray)?Array.isArray(l):Object.prototype.toString.call(l)==="[object Array]"},i=function(l){var c;if(r(l))return!l.length;for(c in l)if(a.call(l,c))return!1;return!0},o=function(l){var c,u;return s(l)&&(u=Object.getPrototypeOf(l))&&(c=u.constructor)&&typeof c=="function"&&c instanceof c&&Function.prototype.toString.call(c)===Function.prototype.toString.call(Object)},e=function(l){return n(l.valueOf)?l.valueOf():l},dt.exports.assign=t,dt.exports.isFunction=n,dt.exports.isObject=s,dt.exports.isArray=r,dt.exports.isEmpty=i,dt.exports.isPlainObject=o,dt.exports.getValue=e}).call(dc)});var vo=C((mc,pc)=>{(function(){var t;pc.exports=t=class{hasFeature(r,i){return!0}createDocumentType(r,i,n){throw new Error("This DOM method is not implemented.")}createDocument(r,i,n){throw new Error("This DOM method is not implemented.")}createHTMLDocument(r){throw new Error("This DOM method is not implemented.")}getFeature(r,i){throw new Error("This DOM method is not implemented.")}}}).call(mc)});var wc=C((gc,yc)=>{(function(){var t;yc.exports=t=class{constructor(){}handleError(r){throw new Error(r)}}}).call(gc)});var xc=C((Ec,bc)=>{(function(){var t;bc.exports=t=function(){class e{constructor(i){this.arr=i||[]}item(i){return this.arr[i]||null}contains(i){return this.arr.indexOf(i)!==-1}}return Object.defineProperty(e.prototype,"length",{get:function(){return this.arr.length}}),e}.call(this)}).call(Ec)});var Dc=C((vc,Sc)=>{(function(){var t,e,r;e=wc(),r=xc(),Sc.exports=t=function(){class i{constructor(){var s;this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new e,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=s=Object.create(this.defaultParams)}getParameter(s){return this.params.hasOwnProperty(s)?this.params[s]:null}canSetParameter(s,o){return!0}setParameter(s,o){return o!=null?this.params[s]=o:delete this.params[s]}}return Object.defineProperty(i.prototype,"parameterNames",{get:function(){return new r(Object.keys(this.defaultParams))}}),i}.call(this)}).call(vc)});var W=C((Nc,Tc)=>{(function(){Tc.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(Nc)});var So=C((Oc,Rc)=>{(function(){var t,e,r;t=W(),r=me(),Rc.exports=e=function(){class i{constructor(s,o,a){if(this.parent=s,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),o==null)throw new Error("Missing attribute name. "+this.debugInfo(o));this.name=this.stringify.name(o),this.value=this.stringify.attValue(a),this.type=t.Attribute,this.isId=!1,this.schemaTypeInfo=null}clone(){return Object.create(this)}toString(s){return this.options.writer.attribute(this,this.options.writer.filterOptions(s))}debugInfo(s){return s=s||this.name,s==null?"parent: <"+this.parent.name+">":"attribute: {"+s+"}, parent: <"+this.parent.name+">"}isEqualNode(s){return!(s.namespaceURI!==this.namespaceURI||s.prefix!==this.prefix||s.localName!==this.localName||s.value!==this.value)}}return Object.defineProperty(i.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(i.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(i.prototype,"textContent",{get:function(){return this.value},set:function(n){return this.value=n||""}}),Object.defineProperty(i.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(i.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(i.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(i.prototype,"specified",{get:function(){return!0}}),i}.call(this)}).call(Oc)});var cn=C((Ic,Cc)=>{(function(){var t;Cc.exports=t=function(){class e{constructor(i){this.nodes=i}clone(){return this.nodes=null}getNamedItem(i){return this.nodes[i]}setNamedItem(i){var n;return n=this.nodes[i.nodeName],this.nodes[i.nodeName]=i,n||null}removeNamedItem(i){var n;return n=this.nodes[i],delete this.nodes[i],n||null}item(i){return this.nodes[Object.keys(this.nodes)[i]]||null}getNamedItemNS(i,n){throw new Error("This DOM method is not implemented.")}setNamedItemNS(i){throw new Error("This DOM method is not implemented.")}removeNamedItemNS(i,n){throw new Error("This DOM method is not implemented.")}}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),e}.call(this)}).call(Ic)});var hn=C((_c,Lc)=>{(function(){var t,e,r,i,n,s,o,a,l={}.hasOwnProperty;({isObject:a,isFunction:o,getValue:s}=Ae()),n=me(),t=W(),e=So(),i=cn(),Lc.exports=r=function(){class c extends n{constructor(f,p,y){var S,N,T,R;if(super(f),p==null)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(p),this.type=t.Element,this.attribs={},this.schemaTypeInfo=null,y!=null&&this.attribute(y),f.type===t.Document&&(this.isRoot=!0,this.documentObject=f,f.rootObject=this,f.children)){for(R=f.children,N=0,T=R.length;N<T;N++)if(S=R[N],S.type===t.DocType){S.name=this.name;break}}}clone(){var f,p,y,S;y=Object.create(this),y.isRoot&&(y.documentObject=null),y.attribs={},S=this.attribs;for(p in S)l.call(S,p)&&(f=S[p],y.attribs[p]=f.clone());return y.children=[],this.children.forEach(function(N){var T;return T=N.clone(),T.parent=y,y.children.push(T)}),y}attribute(f,p){var y,S;if(f!=null&&(f=s(f)),a(f))for(y in f)l.call(f,y)&&(S=f[y],this.attribute(y,S));else o(p)&&(p=p.apply()),this.options.keepNullAttributes&&p==null?this.attribs[f]=new e(this,f,""):p!=null&&(this.attribs[f]=new e(this,f,p));return this}removeAttribute(f){var p,y,S;if(f==null)throw new Error("Missing attribute name. "+this.debugInfo());if(f=s(f),Array.isArray(f))for(y=0,S=f.length;y<S;y++)p=f[y],delete this.attribs[p];else delete this.attribs[f];return this}toString(f){return this.options.writer.element(this,this.options.writer.filterOptions(f))}att(f,p){return this.attribute(f,p)}a(f,p){return this.attribute(f,p)}getAttribute(f){return this.attribs.hasOwnProperty(f)?this.attribs[f].value:null}setAttribute(f,p){throw new Error("This DOM method is not implemented."+this.debugInfo())}getAttributeNode(f){return this.attribs.hasOwnProperty(f)?this.attribs[f]:null}setAttributeNode(f){throw new Error("This DOM method is not implemented."+this.debugInfo())}removeAttributeNode(f){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagName(f){throw new Error("This DOM method is not implemented."+this.debugInfo())}getAttributeNS(f,p){throw new Error("This DOM method is not implemented."+this.debugInfo())}setAttributeNS(f,p,y){throw new Error("This DOM method is not implemented."+this.debugInfo())}removeAttributeNS(f,p){throw new Error("This DOM method is not implemented."+this.debugInfo())}getAttributeNodeNS(f,p){throw new Error("This DOM method is not implemented."+this.debugInfo())}setAttributeNodeNS(f){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagNameNS(f,p){throw new Error("This DOM method is not implemented."+this.debugInfo())}hasAttribute(f){return this.attribs.hasOwnProperty(f)}hasAttributeNS(f,p){throw new Error("This DOM method is not implemented."+this.debugInfo())}setIdAttribute(f,p){return this.attribs.hasOwnProperty(f)?this.attribs[f].isId:p}setIdAttributeNS(f,p,y){throw new Error("This DOM method is not implemented."+this.debugInfo())}setIdAttributeNode(f,p){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagName(f){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagNameNS(f,p){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByClassName(f){throw new Error("This DOM method is not implemented."+this.debugInfo())}isEqualNode(f){var p,y,S;if(!super.isEqualNode(f)||f.namespaceURI!==this.namespaceURI||f.prefix!==this.prefix||f.localName!==this.localName||f.attribs.length!==this.attribs.length)return!1;for(p=y=0,S=this.attribs.length-1;0<=S?y<=S:y>=S;p=0<=S?++y:--y)if(!this.attribs[p].isEqualNode(f.attribs[p]))return!1;return!0}}return Object.defineProperty(c.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(c.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(c.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(c.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(c.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(c.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(c.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(c.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new i(this.attribs)),this.attributeMap}}),c}.call(this)}).call(_c)});var Yr=C((Ac,Mc)=>{(function(){var t,e;e=me(),Mc.exports=t=function(){class r extends e{constructor(n){super(n),this.value=""}clone(){return Object.create(this)}substringData(n,s){throw new Error("This DOM method is not implemented."+this.debugInfo())}appendData(n){throw new Error("This DOM method is not implemented."+this.debugInfo())}insertData(n,s){throw new Error("This DOM method is not implemented."+this.debugInfo())}deleteData(n,s){throw new Error("This DOM method is not implemented."+this.debugInfo())}replaceData(n,s,o){throw new Error("This DOM method is not implemented."+this.debugInfo())}isEqualNode(n){return!(!super.isEqualNode(n)||n.data!==this.data)}}return Object.defineProperty(r.prototype,"data",{get:function(){return this.value},set:function(i){return this.value=i||""}}),Object.defineProperty(r.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(r.prototype,"textContent",{get:function(){return this.value},set:function(i){return this.value=i||""}}),r}.call(this)}).call(Ac)});var un=C((Pc,Fc)=>{(function(){var t,e,r;t=W(),r=Yr(),Fc.exports=e=class extends r{constructor(n,s){if(super(n),s==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=t.CData,this.value=this.stringify.cdata(s)}clone(){return Object.create(this)}toString(n){return this.options.writer.cdata(this,this.options.writer.filterOptions(n))}}}).call(Pc)});var fn=C((kc,qc)=>{(function(){var t,e,r;t=W(),e=Yr(),qc.exports=r=class extends e{constructor(n,s){if(super(n),s==null)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=t.Comment,this.value=this.stringify.comment(s)}clone(){return Object.create(this)}toString(n){return this.options.writer.comment(this,this.options.writer.filterOptions(n))}}}).call(kc)});var dn=C((Uc,Bc)=>{(function(){var t,e,r,i;({isObject:i}=Ae()),r=me(),t=W(),Bc.exports=e=class extends r{constructor(s,o,a,l){super(s),i(o)&&({version:o,encoding:a,standalone:l}=o),o||(o="1.0"),this.type=t.Declaration,this.version=this.stringify.xmlVersion(o),a!=null&&(this.encoding=this.stringify.xmlEncoding(a)),l!=null&&(this.standalone=this.stringify.xmlStandalone(l))}toString(s){return this.options.writer.declaration(this,this.options.writer.filterOptions(s))}}}).call(Uc)});var mn=C((zc,jc)=>{(function(){var t,e,r;r=me(),t=W(),jc.exports=e=class extends r{constructor(n,s,o,a,l,c){if(super(n),s==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(o==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(s));if(!a)throw new Error("Missing DTD attribute type. "+this.debugInfo(s));if(!l)throw new Error("Missing DTD attribute default. "+this.debugInfo(s));if(l.indexOf("#")!==0&&(l="#"+l),!l.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(s));if(c&&!l.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(s));this.elementName=this.stringify.name(s),this.type=t.AttributeDeclaration,this.attributeName=this.stringify.name(o),this.attributeType=this.stringify.dtdAttType(a),c&&(this.defaultValue=this.stringify.dtdAttDefault(c)),this.defaultValueType=l}toString(n){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(n))}}}).call(zc)});var pn=C((Xc,Vc)=>{(function(){var t,e,r,i;({isObject:i}=Ae()),r=me(),t=W(),Vc.exports=e=function(){class n extends r{constructor(o,a,l,c){if(super(o),l==null)throw new Error("Missing DTD entity name. "+this.debugInfo(l));if(c==null)throw new Error("Missing DTD entity value. "+this.debugInfo(l));if(this.pe=!!a,this.name=this.stringify.name(l),this.type=t.EntityDeclaration,!i(c))this.value=this.stringify.dtdEntityValue(c),this.internal=!0;else{if(!c.pubID&&!c.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(l));if(c.pubID&&!c.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(l));if(this.internal=!1,c.pubID!=null&&(this.pubID=this.stringify.dtdPubID(c.pubID)),c.sysID!=null&&(this.sysID=this.stringify.dtdSysID(c.sysID)),c.nData!=null&&(this.nData=this.stringify.dtdNData(c.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(l))}}toString(o){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(o))}}return Object.defineProperty(n.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(n.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(n.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(n.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(n.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(n.prototype,"xmlVersion",{get:function(){return null}}),n}.call(this)}).call(Xc)});var gn=C((Wc,Hc)=>{(function(){var t,e,r;r=me(),t=W(),Hc.exports=e=class extends r{constructor(n,s,o){if(super(n),s==null)throw new Error("Missing DTD element name. "+this.debugInfo());o||(o="(#PCDATA)"),Array.isArray(o)&&(o="("+o.join(",")+")"),this.name=this.stringify.name(s),this.type=t.ElementDeclaration,this.value=this.stringify.dtdElementValue(o)}toString(n){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(n))}}}).call(Wc)});var yn=C((Gc,$c)=>{(function(){var t,e,r;r=me(),t=W(),$c.exports=e=function(){class i extends r{constructor(s,o,a){if(super(s),o==null)throw new Error("Missing DTD notation name. "+this.debugInfo(o));if(!a.pubID&&!a.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(o));this.name=this.stringify.name(o),this.type=t.NotationDeclaration,a.pubID!=null&&(this.pubID=this.stringify.dtdPubID(a.pubID)),a.sysID!=null&&(this.sysID=this.stringify.dtdSysID(a.sysID))}toString(s){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(s))}}return Object.defineProperty(i.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(i.prototype,"systemId",{get:function(){return this.sysID}}),i}.call(this)}).call(Gc)});var wn=C((Kc,Yc)=>{(function(){var t,e,r,i,n,s,o,a,l;({isObject:l}=Ae()),a=me(),t=W(),e=mn(),i=pn(),r=gn(),n=yn(),o=cn(),Yc.exports=s=function(){class c extends a{constructor(f,p,y){var S,N,T,R;if(super(f),this.type=t.DocType,f.children){for(R=f.children,N=0,T=R.length;N<T;N++)if(S=R[N],S.type===t.Element){this.name=S.name;break}}this.documentObject=f,l(p)&&({pubID:p,sysID:y}=p),y==null&&([y,p]=[p,y]),p!=null&&(this.pubID=this.stringify.dtdPubID(p)),y!=null&&(this.sysID=this.stringify.dtdSysID(y))}element(f,p){var y;return y=new r(this,f,p),this.children.push(y),this}attList(f,p,y,S,N){var T;return T=new e(this,f,p,y,S,N),this.children.push(T),this}entity(f,p){var y;return y=new i(this,!1,f,p),this.children.push(y),this}pEntity(f,p){var y;return y=new i(this,!0,f,p),this.children.push(y),this}notation(f,p){var y;return y=new n(this,f,p),this.children.push(y),this}toString(f){return this.options.writer.docType(this,this.options.writer.filterOptions(f))}ele(f,p){return this.element(f,p)}att(f,p,y,S,N){return this.attList(f,p,y,S,N)}ent(f,p){return this.entity(f,p)}pent(f,p){return this.pEntity(f,p)}not(f,p){return this.notation(f,p)}up(){return this.root()||this.documentObject}isEqualNode(f){return!(!super.isEqualNode(f)||f.name!==this.name||f.publicId!==this.publicId||f.systemId!==this.systemId)}}return Object.defineProperty(c.prototype,"entities",{get:function(){var u,f,p,y,S;for(y={},S=this.children,f=0,p=S.length;f<p;f++)u=S[f],u.type===t.EntityDeclaration&&!u.pe&&(y[u.name]=u);return new o(y)}}),Object.defineProperty(c.prototype,"notations",{get:function(){var u,f,p,y,S;for(y={},S=this.children,f=0,p=S.length;f<p;f++)u=S[f],u.type===t.NotationDeclaration&&(y[u.name]=u);return new o(y)}}),Object.defineProperty(c.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(c.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(c.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),c}.call(this)}).call(Kc)});var En=C((Zc,Qc)=>{(function(){var t,e,r;t=W(),e=me(),Qc.exports=r=class extends e{constructor(n,s){if(super(n),s==null)throw new Error("Missing raw text. "+this.debugInfo());this.type=t.Raw,this.value=this.stringify.raw(s)}clone(){return Object.create(this)}toString(n){return this.options.writer.raw(this,this.options.writer.filterOptions(n))}}}).call(Zc)});var bn=C((Jc,eh)=>{(function(){var t,e,r;t=W(),e=Yr(),eh.exports=r=function(){class i extends e{constructor(s,o){if(super(s),o==null)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=t.Text,this.value=this.stringify.text(o)}clone(){return Object.create(this)}toString(s){return this.options.writer.text(this,this.options.writer.filterOptions(s))}splitText(s){throw new Error("This DOM method is not implemented."+this.debugInfo())}replaceWholeText(s){throw new Error("This DOM method is not implemented."+this.debugInfo())}}return Object.defineProperty(i.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(i.prototype,"wholeText",{get:function(){var n,s,o;for(o="",s=this.previousSibling;s;)o=s.data+o,s=s.previousSibling;for(o+=this.data,n=this.nextSibling;n;)o=o+n.data,n=n.nextSibling;return o}}),i}.call(this)}).call(Jc)});var xn=C((th,rh)=>{(function(){var t,e,r;t=W(),e=Yr(),rh.exports=r=class extends e{constructor(n,s,o){if(super(n),s==null)throw new Error("Missing instruction target. "+this.debugInfo());this.type=t.ProcessingInstruction,this.target=this.stringify.insTarget(s),this.name=this.target,o&&(this.value=this.stringify.insValue(o))}clone(){return Object.create(this)}toString(n){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(n))}isEqualNode(n){return!(!super.isEqualNode(n)||n.target!==this.target)}}}).call(th)});var Do=C((ih,nh)=>{(function(){var t,e,r;r=me(),t=W(),nh.exports=e=class extends r{constructor(n){super(n),this.type=t.Dummy}clone(){return Object.create(this)}toString(n){return""}}}).call(ih)});var ah=C((sh,oh)=>{(function(){var t;oh.exports=t=function(){class e{constructor(i){this.nodes=i}clone(){return this.nodes=null}item(i){return this.nodes[i]||null}}return Object.defineProperty(e.prototype,"length",{get:function(){return this.nodes.length||0}}),e}.call(this)}).call(sh)});var hh=C((lh,ch)=>{(function(){ch.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(lh)});var me=C((uh,fh)=>{(function(){var t,e,r,i,n,s,o,a,l,c,u,f,p,y,S,N,T,R,K={}.hasOwnProperty,g=[].splice;({isObject:R,isFunction:T,isEmpty:N,getValue:S}=Ae()),a=null,r=null,i=null,n=null,s=null,p=null,y=null,f=null,o=null,e=null,u=null,l=null,t=null,fh.exports=c=function(){class m{constructor(h){this.parent=h,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,a||(a=hn(),r=un(),i=fn(),n=dn(),s=wn(),p=En(),y=bn(),f=xn(),o=Do(),e=W(),u=ah(),l=cn(),t=hh())}setParent(h){var E,v,d,w,x;for(this.parent=h,h&&(this.options=h.options,this.stringify=h.stringify),w=this.children,x=[],v=0,d=w.length;v<d;v++)E=w[v],x.push(E.setParent(this));return x}element(h,E,v){var d,w,x,O,_,L,G,M,I;if(L=null,E===null&&v==null&&([E,v]=[{},null]),E==null&&(E={}),E=S(E),R(E)||([v,E]=[E,v]),h!=null&&(h=S(h)),Array.isArray(h))for(x=0,G=h.length;x<G;x++)w=h[x],L=this.element(w);else if(T(h))L=this.element(h.apply());else if(R(h)){for(_ in h)if(K.call(h,_))if(I=h[_],T(I)&&(I=I.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&_.indexOf(this.stringify.convertAttKey)===0)L=this.attribute(_.substr(this.stringify.convertAttKey.length),I);else if(!this.options.separateArrayItems&&Array.isArray(I)&&N(I))L=this.dummy();else if(R(I)&&N(I))L=this.element(_);else if(!this.options.keepNullNodes&&I==null)L=this.dummy();else if(!this.options.separateArrayItems&&Array.isArray(I))for(O=0,M=I.length;O<M;O++)w=I[O],d={},d[_]=w,L=this.element(d);else R(I)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&_.indexOf(this.stringify.convertTextKey)===0?L=this.element(I):(L=this.element(_),L.element(I)):L=this.element(_,I)}else!this.options.keepNullNodes&&v===null?L=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&h.indexOf(this.stringify.convertTextKey)===0?L=this.text(v):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&h.indexOf(this.stringify.convertCDataKey)===0?L=this.cdata(v):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&h.indexOf(this.stringify.convertCommentKey)===0?L=this.comment(v):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&h.indexOf(this.stringify.convertRawKey)===0?L=this.raw(v):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&h.indexOf(this.stringify.convertPIKey)===0?L=this.instruction(h.substr(this.stringify.convertPIKey.length),v):L=this.node(h,E,v);if(L==null)throw new Error("Could not create any elements with: "+h+". "+this.debugInfo());return L}insertBefore(h,E,v){var d,w,x,O,_;if(h?.type)return x=h,O=E,x.setParent(this),O?(w=children.indexOf(O),_=children.splice(w),children.push(x),Array.prototype.push.apply(children,_)):children.push(x),x;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(h));return w=this.parent.children.indexOf(this),_=this.parent.children.splice(w),d=this.parent.element(h,E,v),Array.prototype.push.apply(this.parent.children,_),d}insertAfter(h,E,v){var d,w,x;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(h));return w=this.parent.children.indexOf(this),x=this.parent.children.splice(w+1),d=this.parent.element(h,E,v),Array.prototype.push.apply(this.parent.children,x),d}remove(){var h,E;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return h=this.parent.children.indexOf(this),g.apply(this.parent.children,[h,h-h+1].concat(E=[])),this.parent}node(h,E,v){var d;return h!=null&&(h=S(h)),E||(E={}),E=S(E),R(E)||([v,E]=[E,v]),d=new a(this,h,E),v!=null&&d.text(v),this.children.push(d),d}text(h){var E;return R(h)&&this.element(h),E=new y(this,h),this.children.push(E),this}cdata(h){var E;return E=new r(this,h),this.children.push(E),this}comment(h){var E;return E=new i(this,h),this.children.push(E),this}commentBefore(h){var E,v,d;return v=this.parent.children.indexOf(this),d=this.parent.children.splice(v),E=this.parent.comment(h),Array.prototype.push.apply(this.parent.children,d),this}commentAfter(h){var E,v,d;return v=this.parent.children.indexOf(this),d=this.parent.children.splice(v+1),E=this.parent.comment(h),Array.prototype.push.apply(this.parent.children,d),this}raw(h){var E;return E=new p(this,h),this.children.push(E),this}dummy(){var h;return h=new o(this),h}instruction(h,E){var v,d,w,x,O;if(h!=null&&(h=S(h)),E!=null&&(E=S(E)),Array.isArray(h))for(x=0,O=h.length;x<O;x++)v=h[x],this.instruction(v);else if(R(h))for(v in h)K.call(h,v)&&(d=h[v],this.instruction(v,d));else T(E)&&(E=E.apply()),w=new f(this,h,E),this.children.push(w);return this}instructionBefore(h,E){var v,d,w;return d=this.parent.children.indexOf(this),w=this.parent.children.splice(d),v=this.parent.instruction(h,E),Array.prototype.push.apply(this.parent.children,w),this}instructionAfter(h,E){var v,d,w;return d=this.parent.children.indexOf(this),w=this.parent.children.splice(d+1),v=this.parent.instruction(h,E),Array.prototype.push.apply(this.parent.children,w),this}declaration(h,E,v){var d,w;return d=this.document(),w=new n(d,h,E,v),d.children.length===0?d.children.unshift(w):d.children[0].type===e.Declaration?d.children[0]=w:d.children.unshift(w),d.root()||d}dtd(h,E){var v,d,w,x,O,_,L,G,M,I;for(d=this.document(),w=new s(d,h,E),M=d.children,x=O=0,L=M.length;O<L;x=++O)if(v=M[x],v.type===e.DocType)return d.children[x]=w,w;for(I=d.children,x=_=0,G=I.length;_<G;x=++_)if(v=I[x],v.isRoot)return d.children.splice(x,0,w),w;return d.children.push(w),w}up(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent}root(){var h;for(h=this;h;){if(h.type===e.Document)return h.rootObject;if(h.isRoot)return h;h=h.parent}}document(){var h;for(h=this;h;){if(h.type===e.Document)return h;h=h.parent}}end(h){return this.document().end(h)}prev(){var h;if(h=this.parent.children.indexOf(this),h<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[h-1]}next(){var h;if(h=this.parent.children.indexOf(this),h===-1||h===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[h+1]}importDocument(h){var E,v,d,w,x;if(v=h.root().clone(),v.parent=this,v.isRoot=!1,this.children.push(v),this.type===e.Document&&(v.isRoot=!0,v.documentObject=this,this.rootObject=v,this.children)){for(x=this.children,d=0,w=x.length;d<w;d++)if(E=x[d],E.type===e.DocType){E.name=v.name;break}}return this}debugInfo(h){var E,v;return h=h||this.name,h==null&&!((E=this.parent)!=null&&E.name)?"":h==null?"parent: <"+this.parent.name+">":(v=this.parent)!=null&&v.name?"node: <"+h+">, parent: <"+this.parent.name+">":"node: <"+h+">"}ele(h,E,v){return this.element(h,E,v)}nod(h,E,v){return this.node(h,E,v)}txt(h){return this.text(h)}dat(h){return this.cdata(h)}com(h){return this.comment(h)}ins(h,E){return this.instruction(h,E)}doc(){return this.document()}dec(h,E,v){return this.declaration(h,E,v)}e(h,E,v){return this.element(h,E,v)}n(h,E,v){return this.node(h,E,v)}t(h){return this.text(h)}d(h){return this.cdata(h)}c(h){return this.comment(h)}r(h){return this.raw(h)}i(h,E){return this.instruction(h,E)}u(){return this.up()}importXMLBuilder(h){return this.importDocument(h)}attribute(h,E){throw new Error("attribute() applies to element nodes only.")}att(h,E){return this.attribute(h,E)}a(h,E){return this.attribute(h,E)}removeAttribute(h){throw new Error("attribute() applies to element nodes only.")}replaceChild(h,E){throw new Error("This DOM method is not implemented."+this.debugInfo())}removeChild(h){throw new Error("This DOM method is not implemented."+this.debugInfo())}appendChild(h){throw new Error("This DOM method is not implemented."+this.debugInfo())}hasChildNodes(){return this.children.length!==0}cloneNode(h){throw new Error("This DOM method is not implemented."+this.debugInfo())}normalize(){throw new Error("This DOM method is not implemented."+this.debugInfo())}isSupported(h,E){return!0}hasAttributes(){return this.attribs.length!==0}compareDocumentPosition(h){var E,v;return E=this,E===h?0:this.document()!==h.document()?(v=t.Disconnected|t.ImplementationSpecific,Math.random()<.5?v|=t.Preceding:v|=t.Following,v):E.isAncestor(h)?t.Contains|t.Preceding:E.isDescendant(h)?t.Contains|t.Following:E.isPreceding(h)?t.Preceding:t.Following}isSameNode(h){throw new Error("This DOM method is not implemented."+this.debugInfo())}lookupPrefix(h){throw new Error("This DOM method is not implemented."+this.debugInfo())}isDefaultNamespace(h){throw new Error("This DOM method is not implemented."+this.debugInfo())}lookupNamespaceURI(h){throw new Error("This DOM method is not implemented."+this.debugInfo())}isEqualNode(h){var E,v,d;if(h.nodeType!==this.nodeType||h.children.length!==this.children.length)return!1;for(E=v=0,d=this.children.length-1;0<=d?v<=d:v>=d;E=0<=d?++v:--v)if(!this.children[E].isEqualNode(h.children[E]))return!1;return!0}getFeature(h,E){throw new Error("This DOM method is not implemented."+this.debugInfo())}setUserData(h,E,v){throw new Error("This DOM method is not implemented."+this.debugInfo())}getUserData(h){throw new Error("This DOM method is not implemented."+this.debugInfo())}contains(h){return h?h===this||this.isDescendant(h):!1}isDescendant(h){var E,v,d,w,x;for(x=this.children,d=0,w=x.length;d<w;d++)if(E=x[d],h===E||(v=E.isDescendant(h),v))return!0;return!1}isAncestor(h){return h.isDescendant(this)}isPreceding(h){var E,v;return E=this.treePosition(h),v=this.treePosition(this),E===-1||v===-1?!1:E<v}isFollowing(h){var E,v;return E=this.treePosition(h),v=this.treePosition(this),E===-1||v===-1?!1:E>v}treePosition(h){var E,v;return v=0,E=!1,this.foreachTreeNode(this.document(),function(d){if(v++,!E&&d===h)return E=!0}),E?v:-1}foreachTreeNode(h,E){var v,d,w,x,O;for(h||(h=this.document()),x=h.children,d=0,w=x.length;d<w;d++){if(v=x[d],O=E(v))return O;if(O=this.foreachTreeNode(v,E),O)return O}}}return Object.defineProperty(m.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(m.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(m.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(m.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(m.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new u(this.children)),this.childNodeList}}),Object.defineProperty(m.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(m.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(m.prototype,"previousSibling",{get:function(){var b;return b=this.parent.children.indexOf(this),this.parent.children[b-1]||null}}),Object.defineProperty(m.prototype,"nextSibling",{get:function(){var b;return b=this.parent.children.indexOf(this),this.parent.children[b+1]||null}}),Object.defineProperty(m.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(m.prototype,"textContent",{get:function(){var b,h,E,v,d;if(this.nodeType===e.Element||this.nodeType===e.DocumentFragment){for(d="",v=this.children,h=0,E=v.length;h<E;h++)b=v[h],b.textContent&&(d+=b.textContent);return d}else return null},set:function(b){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),m}.call(this)}).call(uh)});var No=C((dh,mh)=>{(function(){var t,e={}.hasOwnProperty;mh.exports=t=function(){class r{constructor(n){var s,o,a;this.assertLegalChar=this.assertLegalChar.bind(this),this.assertLegalName=this.assertLegalName.bind(this),n||(n={}),this.options=n,this.options.version||(this.options.version="1.0"),o=n.stringify||{};for(s in o)e.call(o,s)&&(a=o[s],this[s]=a)}name(n){return this.options.noValidation?n:this.assertLegalName(""+n||"")}text(n){return this.options.noValidation?n:this.assertLegalChar(this.textEscape(""+n||""))}cdata(n){return this.options.noValidation?n:(n=""+n||"",n=n.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(n))}comment(n){if(this.options.noValidation)return n;if(n=""+n||"",n.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+n);return this.assertLegalChar(n)}raw(n){return this.options.noValidation?n:""+n||""}attValue(n){return this.options.noValidation?n:this.assertLegalChar(this.attEscape(n=""+n||""))}insTarget(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")}insValue(n){if(this.options.noValidation)return n;if(n=""+n||"",n.match(/\?>/))throw new Error("Invalid processing instruction value: "+n);return this.assertLegalChar(n)}xmlVersion(n){if(this.options.noValidation)return n;if(n=""+n||"",!n.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+n);return n}xmlEncoding(n){if(this.options.noValidation)return n;if(n=""+n||"",!n.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+n);return this.assertLegalChar(n)}xmlStandalone(n){return this.options.noValidation?n:n?"yes":"no"}dtdPubID(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")}dtdSysID(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")}dtdElementValue(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")}dtdAttType(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")}dtdAttDefault(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")}dtdEntityValue(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")}dtdNData(n){return this.options.noValidation?n:this.assertLegalChar(""+n||"")}assertLegalChar(n){var s,o;if(this.options.noValidation)return n;if(this.options.version==="1.0"){if(s=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/g,this.options.invalidCharReplacement!==void 0)n=n.replace(s,this.options.invalidCharReplacement);else if(o=n.match(s))throw new Error(`Invalid character in string: ${n} at index ${o.index}`)}else if(this.options.version==="1.1"){if(s=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/g,this.options.invalidCharReplacement!==void 0)n=n.replace(s,this.options.invalidCharReplacement);else if(o=n.match(s))throw new Error(`Invalid character in string: ${n} at index ${o.index}`)}return n}assertLegalName(n){var s;if(this.options.noValidation)return n;if(n=this.assertLegalChar(n),s=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!n.match(s))throw new Error(`Invalid character in name: ${n}`);return n}textEscape(n){var s;return this.options.noValidation?n:(s=this.options.noDoubleEncoding?/(?!&(lt|gt|amp|apos|quot);)&/g:/&/g,n.replace(s,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))}attEscape(n){var s;return this.options.noValidation?n:(s=this.options.noDoubleEncoding?/(?!&(lt|gt|amp|apos|quot);)&/g:/&/g,n.replace(s,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))}}return r.prototype.convertAttKey="@",r.prototype.convertPIKey="?",r.prototype.convertTextKey="#text",r.prototype.convertCDataKey="#cdata",r.prototype.convertCommentKey="#comment",r.prototype.convertRawKey="#raw",r}.call(this)}).call(dh)});var Zr=C((ph,gh)=>{(function(){gh.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(ph)});var To=C((yh,wh)=>{(function(){var t,e,r,i,n,s,o,a,l,c,u,f,p,y,S,N,T,R={}.hasOwnProperty;({assign:T}=Ae()),t=W(),l=dn(),c=wn(),r=un(),i=fn(),f=hn(),y=En(),S=bn(),p=xn(),u=Do(),n=mn(),s=gn(),o=pn(),a=yn(),e=Zr(),wh.exports=N=class{constructor(g){var m,b,h;g||(g={}),this.options=g,b=g.writer||{};for(m in b)R.call(b,m)&&(h=b[m],this["_"+m]=this[m],this[m]=h)}filterOptions(g){var m,b,h,E,v,d,w,x,O;return g||(g={}),g=T({},this.options,g),m={writer:this},m.pretty=g.pretty||!1,m.allowEmpty=g.allowEmpty||!1,m.indent=(b=g.indent)!=null?b:"  ",m.newline=(h=g.newline)!=null?h:`
`,m.offset=(E=g.offset)!=null?E:0,m.width=(v=g.width)!=null?v:0,m.dontPrettyTextNodes=(d=(w=g.dontPrettyTextNodes)!=null?w:g.dontprettytextnodes)!=null?d:0,m.spaceBeforeSlash=(x=(O=g.spaceBeforeSlash)!=null?O:g.spacebeforeslash)!=null?x:"",m.spaceBeforeSlash===!0&&(m.spaceBeforeSlash=" "),m.suppressPrettyCount=0,m.user={},m.state=e.None,m}indent(g,m,b){var h;return!m.pretty||m.suppressPrettyCount?"":m.pretty&&(h=(b||0)+m.offset+1,h>0)?new Array(h).join(m.indent):""}endline(g,m,b){return!m.pretty||m.suppressPrettyCount?"":m.newline}attribute(g,m,b){var h;return this.openAttribute(g,m,b),m.pretty&&m.width>0?h=g.name+'="'+g.value+'"':h=" "+g.name+'="'+g.value+'"',this.closeAttribute(g,m,b),h}cdata(g,m,b){var h;return this.openNode(g,m,b),m.state=e.OpenTag,h=this.indent(g,m,b)+"<![CDATA[",m.state=e.InsideTag,h+=g.value,m.state=e.CloseTag,h+="]]>"+this.endline(g,m,b),m.state=e.None,this.closeNode(g,m,b),h}comment(g,m,b){var h;return this.openNode(g,m,b),m.state=e.OpenTag,h=this.indent(g,m,b)+"<!-- ",m.state=e.InsideTag,h+=g.value,m.state=e.CloseTag,h+=" -->"+this.endline(g,m,b),m.state=e.None,this.closeNode(g,m,b),h}declaration(g,m,b){var h;return this.openNode(g,m,b),m.state=e.OpenTag,h=this.indent(g,m,b)+"<?xml",m.state=e.InsideTag,h+=' version="'+g.version+'"',g.encoding!=null&&(h+=' encoding="'+g.encoding+'"'),g.standalone!=null&&(h+=' standalone="'+g.standalone+'"'),m.state=e.CloseTag,h+=m.spaceBeforeSlash+"?>",h+=this.endline(g,m,b),m.state=e.None,this.closeNode(g,m,b),h}docType(g,m,b){var h,E,v,d,w;if(b||(b=0),this.openNode(g,m,b),m.state=e.OpenTag,d=this.indent(g,m,b),d+="<!DOCTYPE "+g.root().name,g.pubID&&g.sysID?d+=' PUBLIC "'+g.pubID+'" "'+g.sysID+'"':g.sysID&&(d+=' SYSTEM "'+g.sysID+'"'),g.children.length>0){for(d+=" [",d+=this.endline(g,m,b),m.state=e.InsideTag,w=g.children,E=0,v=w.length;E<v;E++)h=w[E],d+=this.writeChildNode(h,m,b+1);m.state=e.CloseTag,d+="]"}return m.state=e.CloseTag,d+=m.spaceBeforeSlash+">",d+=this.endline(g,m,b),m.state=e.None,this.closeNode(g,m,b),d}element(g,m,b){var h,E,v,d,w,x,O,_,L,G,M,I,Y,Bi,zi,ji,zs,js,Qt;if(b||(b=0),I=!1,this.openNode(g,m,b),m.state=e.OpenTag,Y=this.indent(g,m,b)+"<"+g.name,m.pretty&&m.width>0){_=Y.length,zi=g.attribs;for(M in zi)R.call(zi,M)&&(h=zi[M],Bi=this.attribute(h,m,b),E=Bi.length,_+E>m.width?(Qt=this.indent(g,m,b+1)+Bi,Y+=this.endline(g,m,b)+Qt,_=Qt.length):(Qt=" "+Bi,Y+=Qt,_+=Qt.length))}else{ji=g.attribs;for(M in ji)R.call(ji,M)&&(h=ji[M],Y+=this.attribute(h,m,b))}if(d=g.children.length,w=d===0?null:g.children[0],d===0||g.children.every(function(Xi){return(Xi.type===t.Text||Xi.type===t.Raw||Xi.type===t.CData)&&Xi.value===""}))m.allowEmpty?(Y+=">",m.state=e.CloseTag,Y+="</"+g.name+">"+this.endline(g,m,b)):(m.state=e.CloseTag,Y+=m.spaceBeforeSlash+"/>"+this.endline(g,m,b));else if(m.pretty&&d===1&&(w.type===t.Text||w.type===t.Raw||w.type===t.CData)&&w.value!=null)Y+=">",m.state=e.InsideTag,m.suppressPrettyCount++,I=!0,Y+=this.writeChildNode(w,m,b+1),m.suppressPrettyCount--,I=!1,m.state=e.CloseTag,Y+="</"+g.name+">"+this.endline(g,m,b);else{if(m.dontPrettyTextNodes){for(zs=g.children,x=0,L=zs.length;x<L;x++)if(v=zs[x],(v.type===t.Text||v.type===t.Raw||v.type===t.CData)&&v.value!=null){m.suppressPrettyCount++,I=!0;break}}for(Y+=">"+this.endline(g,m,b),m.state=e.InsideTag,js=g.children,O=0,G=js.length;O<G;O++)v=js[O],Y+=this.writeChildNode(v,m,b+1);m.state=e.CloseTag,Y+=this.indent(g,m,b)+"</"+g.name+">",I&&m.suppressPrettyCount--,Y+=this.endline(g,m,b),m.state=e.None}return this.closeNode(g,m,b),Y}writeChildNode(g,m,b){switch(g.type){case t.CData:return this.cdata(g,m,b);case t.Comment:return this.comment(g,m,b);case t.Element:return this.element(g,m,b);case t.Raw:return this.raw(g,m,b);case t.Text:return this.text(g,m,b);case t.ProcessingInstruction:return this.processingInstruction(g,m,b);case t.Dummy:return"";case t.Declaration:return this.declaration(g,m,b);case t.DocType:return this.docType(g,m,b);case t.AttributeDeclaration:return this.dtdAttList(g,m,b);case t.ElementDeclaration:return this.dtdElement(g,m,b);case t.EntityDeclaration:return this.dtdEntity(g,m,b);case t.NotationDeclaration:return this.dtdNotation(g,m,b);default:throw new Error("Unknown XML node type: "+g.constructor.name)}}processingInstruction(g,m,b){var h;return this.openNode(g,m,b),m.state=e.OpenTag,h=this.indent(g,m,b)+"<?",m.state=e.InsideTag,h+=g.target,g.value&&(h+=" "+g.value),m.state=e.CloseTag,h+=m.spaceBeforeSlash+"?>",h+=this.endline(g,m,b),m.state=e.None,this.closeNode(g,m,b),h}raw(g,m,b){var h;return this.openNode(g,m,b),m.state=e.OpenTag,h=this.indent(g,m,b),m.state=e.InsideTag,h+=g.value,m.state=e.CloseTag,h+=this.endline(g,m,b),m.state=e.None,this.closeNode(g,m,b),h}text(g,m,b){var h;return this.openNode(g,m,b),m.state=e.OpenTag,h=this.indent(g,m,b),m.state=e.InsideTag,h+=g.value,m.state=e.CloseTag,h+=this.endline(g,m,b),m.state=e.None,this.closeNode(g,m,b),h}dtdAttList(g,m,b){var h;return this.openNode(g,m,b),m.state=e.OpenTag,h=this.indent(g,m,b)+"<!ATTLIST",m.state=e.InsideTag,h+=" "+g.elementName+" "+g.attributeName+" "+g.attributeType,g.defaultValueType!=="#DEFAULT"&&(h+=" "+g.defaultValueType),g.defaultValue&&(h+=' "'+g.defaultValue+'"'),m.state=e.CloseTag,h+=m.spaceBeforeSlash+">"+this.endline(g,m,b),m.state=e.None,this.closeNode(g,m,b),h}dtdElement(g,m,b){var h;return this.openNode(g,m,b),m.state=e.OpenTag,h=this.indent(g,m,b)+"<!ELEMENT",m.state=e.InsideTag,h+=" "+g.name+" "+g.value,m.state=e.CloseTag,h+=m.spaceBeforeSlash+">"+this.endline(g,m,b),m.state=e.None,this.closeNode(g,m,b),h}dtdEntity(g,m,b){var h;return this.openNode(g,m,b),m.state=e.OpenTag,h=this.indent(g,m,b)+"<!ENTITY",m.state=e.InsideTag,g.pe&&(h+=" %"),h+=" "+g.name,g.value?h+=' "'+g.value+'"':(g.pubID&&g.sysID?h+=' PUBLIC "'+g.pubID+'" "'+g.sysID+'"':g.sysID&&(h+=' SYSTEM "'+g.sysID+'"'),g.nData&&(h+=" NDATA "+g.nData)),m.state=e.CloseTag,h+=m.spaceBeforeSlash+">"+this.endline(g,m,b),m.state=e.None,this.closeNode(g,m,b),h}dtdNotation(g,m,b){var h;return this.openNode(g,m,b),m.state=e.OpenTag,h=this.indent(g,m,b)+"<!NOTATION",m.state=e.InsideTag,h+=" "+g.name,g.pubID&&g.sysID?h+=' PUBLIC "'+g.pubID+'" "'+g.sysID+'"':g.pubID?h+=' PUBLIC "'+g.pubID+'"':g.sysID&&(h+=' SYSTEM "'+g.sysID+'"'),m.state=e.CloseTag,h+=m.spaceBeforeSlash+">"+this.endline(g,m,b),m.state=e.None,this.closeNode(g,m,b),h}openNode(g,m,b){}closeNode(g,m,b){}openAttribute(g,m,b){}closeAttribute(g,m,b){}}}).call(yh)});var vn=C((Eh,bh)=>{(function(){var t,e;e=To(),bh.exports=t=class extends e{constructor(i){super(i)}document(i,n){var s,o,a,l,c;for(n=this.filterOptions(n),l="",c=i.children,o=0,a=c.length;o<a;o++)s=c[o],l+=this.writeChildNode(s,n,0);return n.pretty&&l.slice(-n.newline.length)===n.newline&&(l=l.slice(0,-n.newline.length)),l}}}).call(Eh)});var Oo=C((xh,vh)=>{(function(){var t,e,r,i,n,s,o,a;({isPlainObject:a}=Ae()),r=vo(),e=Dc(),n=me(),t=W(),o=No(),s=vn(),vh.exports=i=function(){class l extends n{constructor(u){super(null),this.name="#document",this.type=t.Document,this.documentURI=null,this.domConfig=new e,u||(u={}),u.writer||(u.writer=new s),this.options=u,this.stringify=new o(u)}end(u){var f;return f={},u?a(u)&&(f=u,u=this.options.writer):u=this.options.writer,u.document(this,u.filterOptions(f))}toString(u){return this.options.writer.document(this,this.options.writer.filterOptions(u))}createElement(u){throw new Error("This DOM method is not implemented."+this.debugInfo())}createDocumentFragment(){throw new Error("This DOM method is not implemented."+this.debugInfo())}createTextNode(u){throw new Error("This DOM method is not implemented."+this.debugInfo())}createComment(u){throw new Error("This DOM method is not implemented."+this.debugInfo())}createCDATASection(u){throw new Error("This DOM method is not implemented."+this.debugInfo())}createProcessingInstruction(u,f){throw new Error("This DOM method is not implemented."+this.debugInfo())}createAttribute(u){throw new Error("This DOM method is not implemented."+this.debugInfo())}createEntityReference(u){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagName(u){throw new Error("This DOM method is not implemented."+this.debugInfo())}importNode(u,f){throw new Error("This DOM method is not implemented."+this.debugInfo())}createElementNS(u,f){throw new Error("This DOM method is not implemented."+this.debugInfo())}createAttributeNS(u,f){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagNameNS(u,f){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementById(u){throw new Error("This DOM method is not implemented."+this.debugInfo())}adoptNode(u){throw new Error("This DOM method is not implemented."+this.debugInfo())}normalizeDocument(){throw new Error("This DOM method is not implemented."+this.debugInfo())}renameNode(u,f,p){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByClassName(u){throw new Error("This DOM method is not implemented."+this.debugInfo())}createEvent(u){throw new Error("This DOM method is not implemented."+this.debugInfo())}createRange(){throw new Error("This DOM method is not implemented."+this.debugInfo())}createNodeIterator(u,f,p){throw new Error("This DOM method is not implemented."+this.debugInfo())}createTreeWalker(u,f,p){throw new Error("This DOM method is not implemented."+this.debugInfo())}}return Object.defineProperty(l.prototype,"implementation",{value:new r}),Object.defineProperty(l.prototype,"doctype",{get:function(){var c,u,f,p;for(p=this.children,u=0,f=p.length;u<f;u++)if(c=p[u],c.type===t.DocType)return c;return null}}),Object.defineProperty(l.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(l.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(l.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(l.prototype,"xmlEncoding",{get:function(){return this.children.length!==0&&this.children[0].type===t.Declaration?this.children[0].encoding:null}}),Object.defineProperty(l.prototype,"xmlStandalone",{get:function(){return this.children.length!==0&&this.children[0].type===t.Declaration?this.children[0].standalone==="yes":!1}}),Object.defineProperty(l.prototype,"xmlVersion",{get:function(){return this.children.length!==0&&this.children[0].type===t.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(l.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(l.prototype,"origin",{get:function(){return null}}),Object.defineProperty(l.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(l.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(l.prototype,"contentType",{get:function(){return null}}),l}.call(this)}).call(xh)});var Nh=C((Sh,Dh)=>{(function(){var t,e,r,i,n,s,o,a,l,c,u,f,p,y,S,N,T,R,K,g,m,b,h,E={}.hasOwnProperty;({isObject:b,isFunction:m,isPlainObject:h,getValue:g}=Ae()),t=W(),f=Oo(),y=hn(),i=un(),n=fn(),N=En(),K=bn(),S=xn(),c=dn(),u=wn(),s=mn(),a=pn(),o=gn(),l=yn(),r=So(),R=No(),T=vn(),e=Zr(),Dh.exports=p=class{constructor(d,w,x){var O;this.name="?xml",this.type=t.Document,d||(d={}),O={},d.writer?h(d.writer)&&(O=d.writer,d.writer=new T):d.writer=new T,this.options=d,this.writer=d.writer,this.writerOptions=this.writer.filterOptions(O),this.stringify=new R(d),this.onDataCallback=w||function(){},this.onEndCallback=x||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}createChildNode(d){var w,x,O,_,L,G,M,I;switch(d.type){case t.CData:this.cdata(d.value);break;case t.Comment:this.comment(d.value);break;case t.Element:O={},M=d.attribs;for(x in M)E.call(M,x)&&(w=M[x],O[x]=w.value);this.node(d.name,O);break;case t.Dummy:this.dummy();break;case t.Raw:this.raw(d.value);break;case t.Text:this.text(d.value);break;case t.ProcessingInstruction:this.instruction(d.target,d.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+d.constructor.name)}for(I=d.children,L=0,G=I.length;L<G;L++)_=I[L],this.createChildNode(_),_.type===t.Element&&this.up();return this}dummy(){return this}node(d,w,x){if(d==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(d));return this.openCurrent(),d=g(d),w==null&&(w={}),w=g(w),b(w)||([x,w]=[w,x]),this.currentNode=new y(this,d,w),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,x!=null&&this.text(x),this}element(d,w,x){var O,_,L,G,M,I;if(this.currentNode&&this.currentNode.type===t.DocType)this.dtdElement(...arguments);else if(Array.isArray(d)||b(d)||m(d))for(G=this.options.noValidation,this.options.noValidation=!0,I=new f(this.options).element("TEMP_ROOT"),I.element(d),this.options.noValidation=G,M=I.children,_=0,L=M.length;_<L;_++)O=M[_],this.createChildNode(O),O.type===t.Element&&this.up();else this.node(d,w,x);return this}attribute(d,w){var x,O;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(d));if(d!=null&&(d=g(d)),b(d))for(x in d)E.call(d,x)&&(O=d[x],this.attribute(x,O));else m(w)&&(w=w.apply()),this.options.keepNullAttributes&&w==null?this.currentNode.attribs[d]=new r(this,d,""):w!=null&&(this.currentNode.attribs[d]=new r(this,d,w));return this}text(d){var w;return this.openCurrent(),w=new K(this,d),this.onData(this.writer.text(w,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}cdata(d){var w;return this.openCurrent(),w=new i(this,d),this.onData(this.writer.cdata(w,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}comment(d){var w;return this.openCurrent(),w=new n(this,d),this.onData(this.writer.comment(w,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}raw(d){var w;return this.openCurrent(),w=new N(this,d),this.onData(this.writer.raw(w,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}instruction(d,w){var x,O,_,L,G;if(this.openCurrent(),d!=null&&(d=g(d)),w!=null&&(w=g(w)),Array.isArray(d))for(x=0,L=d.length;x<L;x++)O=d[x],this.instruction(O);else if(b(d))for(O in d)E.call(d,O)&&(_=d[O],this.instruction(O,_));else m(w)&&(w=w.apply()),G=new S(this,d,w),this.onData(this.writer.processingInstruction(G,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this}declaration(d,w,x){var O;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return O=new c(this,d,w,x),this.onData(this.writer.declaration(O,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}doctype(d,w,x){if(this.openCurrent(),d==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new u(this,w,x),this.currentNode.rootNodeName=d,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this}dtdElement(d,w){var x;return this.openCurrent(),x=new o(this,d,w),this.onData(this.writer.dtdElement(x,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}attList(d,w,x,O,_){var L;return this.openCurrent(),L=new s(this,d,w,x,O,_),this.onData(this.writer.dtdAttList(L,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}entity(d,w){var x;return this.openCurrent(),x=new a(this,!1,d,w),this.onData(this.writer.dtdEntity(x,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}pEntity(d,w){var x;return this.openCurrent(),x=new a(this,!0,d,w),this.onData(this.writer.dtdEntity(x,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}notation(d,w){var x;return this.openCurrent(),x=new l(this,d,w),this.onData(this.writer.dtdNotation(x,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}up(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this}end(){for(;this.currentLevel>=0;)this.up();return this.onEnd()}openCurrent(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)}openNode(d){var w,x,O,_;if(!d.isOpen){if(!this.root&&this.currentLevel===0&&d.type===t.Element&&(this.root=d),x="",d.type===t.Element){this.writerOptions.state=e.OpenTag,x=this.writer.indent(d,this.writerOptions,this.currentLevel)+"<"+d.name,_=d.attribs;for(O in _)E.call(_,O)&&(w=_[O],x+=this.writer.attribute(w,this.writerOptions,this.currentLevel));x+=(d.children?">":"/>")+this.writer.endline(d,this.writerOptions,this.currentLevel),this.writerOptions.state=e.InsideTag}else this.writerOptions.state=e.OpenTag,x=this.writer.indent(d,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+d.rootNodeName,d.pubID&&d.sysID?x+=' PUBLIC "'+d.pubID+'" "'+d.sysID+'"':d.sysID&&(x+=' SYSTEM "'+d.sysID+'"'),d.children?(x+=" [",this.writerOptions.state=e.InsideTag):(this.writerOptions.state=e.CloseTag,x+=">"),x+=this.writer.endline(d,this.writerOptions,this.currentLevel);return this.onData(x,this.currentLevel),d.isOpen=!0}}closeNode(d){var w;if(!d.isClosed)return w="",this.writerOptions.state=e.CloseTag,d.type===t.Element?w=this.writer.indent(d,this.writerOptions,this.currentLevel)+"</"+d.name+">"+this.writer.endline(d,this.writerOptions,this.currentLevel):w=this.writer.indent(d,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(d,this.writerOptions,this.currentLevel),this.writerOptions.state=e.None,this.onData(w,this.currentLevel),d.isClosed=!0}onData(d,w){return this.documentStarted=!0,this.onDataCallback(d,w+1)}onEnd(){return this.documentCompleted=!0,this.onEndCallback()}debugInfo(d){return d==null?"":"node: <"+d+">"}ele(){return this.element(...arguments)}nod(d,w,x){return this.node(d,w,x)}txt(d){return this.text(d)}dat(d){return this.cdata(d)}com(d){return this.comment(d)}ins(d,w){return this.instruction(d,w)}dec(d,w,x){return this.declaration(d,w,x)}dtd(d,w,x){return this.doctype(d,w,x)}e(d,w,x){return this.element(d,w,x)}n(d,w,x){return this.node(d,w,x)}t(d){return this.text(d)}d(d){return this.cdata(d)}c(d){return this.comment(d)}r(d){return this.raw(d)}i(d,w){return this.instruction(d,w)}att(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList(...arguments):this.attribute(...arguments)}a(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList(...arguments):this.attribute(...arguments)}ent(d,w){return this.entity(d,w)}pent(d,w){return this.pEntity(d,w)}not(d,w){return this.notation(d,w)}}}).call(Sh)});var Rh=C((Th,Oh)=>{(function(){var t,e,r,i,n={}.hasOwnProperty;t=W(),i=To(),e=Zr(),Oh.exports=r=class extends i{constructor(o,a){super(a),this.stream=o}endline(o,a,l){return o.isLastRootNode&&a.state===e.CloseTag?"":super.endline(o,a,l)}document(o,a){var l,c,u,f,p,y,S,N,T;for(S=o.children,c=u=0,p=S.length;u<p;c=++u)l=S[c],l.isLastRootNode=c===o.children.length-1;for(a=this.filterOptions(a),N=o.children,T=[],f=0,y=N.length;f<y;f++)l=N[f],T.push(this.writeChildNode(l,a,0));return T}cdata(o,a,l){return this.stream.write(super.cdata(o,a,l))}comment(o,a,l){return this.stream.write(super.comment(o,a,l))}declaration(o,a,l){return this.stream.write(super.declaration(o,a,l))}docType(o,a,l){var c,u,f,p;if(l||(l=0),this.openNode(o,a,l),a.state=e.OpenTag,this.stream.write(this.indent(o,a,l)),this.stream.write("<!DOCTYPE "+o.root().name),o.pubID&&o.sysID?this.stream.write(' PUBLIC "'+o.pubID+'" "'+o.sysID+'"'):o.sysID&&this.stream.write(' SYSTEM "'+o.sysID+'"'),o.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(o,a,l)),a.state=e.InsideTag,p=o.children,u=0,f=p.length;u<f;u++)c=p[u],this.writeChildNode(c,a,l+1);a.state=e.CloseTag,this.stream.write("]")}return a.state=e.CloseTag,this.stream.write(a.spaceBeforeSlash+">"),this.stream.write(this.endline(o,a,l)),a.state=e.None,this.closeNode(o,a,l)}element(o,a,l){var c,u,f,p,y,S,N,T,R,K,g,m,b,h,E,v;if(l||(l=0),this.openNode(o,a,l),a.state=e.OpenTag,g=this.indent(o,a,l)+"<"+o.name,a.pretty&&a.width>0){N=g.length,b=o.attribs;for(R in b)n.call(b,R)&&(c=b[R],m=this.attribute(c,a,l),u=m.length,N+u>a.width?(v=this.indent(o,a,l+1)+m,g+=this.endline(o,a,l)+v,N=v.length):(v=" "+m,g+=v,N+=v.length))}else{h=o.attribs;for(R in h)n.call(h,R)&&(c=h[R],g+=this.attribute(c,a,l))}if(this.stream.write(g),p=o.children.length,y=p===0?null:o.children[0],p===0||o.children.every(function(d){return(d.type===t.Text||d.type===t.Raw||d.type===t.CData)&&d.value===""}))a.allowEmpty?(this.stream.write(">"),a.state=e.CloseTag,this.stream.write("</"+o.name+">")):(a.state=e.CloseTag,this.stream.write(a.spaceBeforeSlash+"/>"));else if(a.pretty&&p===1&&(y.type===t.Text||y.type===t.Raw||y.type===t.CData)&&y.value!=null)this.stream.write(">"),a.state=e.InsideTag,a.suppressPrettyCount++,K=!0,this.writeChildNode(y,a,l+1),a.suppressPrettyCount--,K=!1,a.state=e.CloseTag,this.stream.write("</"+o.name+">");else{for(this.stream.write(">"+this.endline(o,a,l)),a.state=e.InsideTag,E=o.children,S=0,T=E.length;S<T;S++)f=E[S],this.writeChildNode(f,a,l+1);a.state=e.CloseTag,this.stream.write(this.indent(o,a,l)+"</"+o.name+">")}return this.stream.write(this.endline(o,a,l)),a.state=e.None,this.closeNode(o,a,l)}processingInstruction(o,a,l){return this.stream.write(super.processingInstruction(o,a,l))}raw(o,a,l){return this.stream.write(super.raw(o,a,l))}text(o,a,l){return this.stream.write(super.text(o,a,l))}dtdAttList(o,a,l){return this.stream.write(super.dtdAttList(o,a,l))}dtdElement(o,a,l){return this.stream.write(super.dtdElement(o,a,l))}dtdEntity(o,a,l){return this.stream.write(super.dtdEntity(o,a,l))}dtdNotation(o,a,l){return this.stream.write(super.dtdNotation(o,a,l))}}}).call(Th)});var Ch=C((Ih,mt)=>{(function(){var t,e,r,i,n,s,o,a,l;({assign:a,isFunction:l}=Ae()),r=vo(),i=Oo(),n=Nh(),o=vn(),s=Rh(),t=W(),e=Zr(),mt.exports.create=function(c,u,f,p){var y,S;if(c==null)throw new Error("Root element needs a name.");return p=a({},u,f,p),y=new i(p),S=y.element(c),p.headless||(y.declaration(p),(p.pubID!=null||p.sysID!=null)&&y.dtd(p)),S},mt.exports.begin=function(c,u,f){return l(c)&&([u,f]=[c,u],c={}),u?new n(c,u,f):new i(c)},mt.exports.stringWriter=function(c){return new o(c)},mt.exports.streamWriter=function(c,u){return new s(c,u)},mt.exports.implementation=new r,mt.exports.nodeType=t,mt.exports.writerState=e}).call(Ih)});var Mh=C(Ah=>{var _h=fc(),lm=Ch();Ah.build=um;function cm(t){function e(r){return r<10?"0"+r:r}return t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())+"Z"}var hm=Object.prototype.toString;function Lh(t){var e=hm.call(t).match(/\[object (.*)\]/);return e&&e[1]}function um(t,e){var r={version:"1.0",encoding:"UTF-8"},i={pubid:"-//Apple//DTD PLIST 1.0//EN",sysid:"http://www.apple.com/DTDs/PropertyList-1.0.dtd"},n=lm.create("plist");return n.dec(r.version,r.encoding,r.standalone),n.dtd(i.pubid,i.sysid),n.att("version","1.0"),Ro(t,n),e||(e={}),e.pretty=e.pretty!==!1,n.end(e)}function Ro(t,e){var r,i,n,s=Lh(t);if(s!="Undefined")if(Array.isArray(t))for(e=e.ele("array"),i=0;i<t.length;i++)Ro(t[i],e);else if(Buffer.isBuffer(t))e.ele("data").raw(t.toString("base64"));else if(s=="Object"){e=e.ele("dict");for(n in t)t.hasOwnProperty(n)&&(e.ele("key").txt(n),Ro(t[n],e))}else s=="Number"?(r=t%1===0?"integer":"real",e.ele(r).txt(t.toString())):s=="Date"?e.ele("date").txt(cm(new Date(t))):s=="Boolean"?e.ele(t?"true":"false"):s=="String"?e.ele("string").txt(t):s=="ArrayBuffer"?e.ele("data").raw(_h.fromByteArray(t)):t&&t.buffer&&Lh(t.buffer)=="ArrayBuffer"?e.ele("data").raw(_h.fromByteArray(new Uint8Array(t.buffer),e)):s==="Null"&&e.ele("null").txt("")}});var kh=C(Io=>{var Ph=cc();Object.keys(Ph).forEach(function(t){Io[t]=Ph[t]});var Fh=Mh();Object.keys(Fh).forEach(function(t){Io[t]=Fh[t]})});var mu=C((uy,$e)=>{var j=require("fs"),Tn=require("os"),Q=require("path"),Zh=require("crypto"),Me={fs:j.constants,os:Tn.constants},Qh="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",ru=/XXXXXX/,fm=3,iu=(Me.O_CREAT||Me.fs.O_CREAT)|(Me.O_EXCL||Me.fs.O_EXCL)|(Me.O_RDWR||Me.fs.O_RDWR),dm=Tn.platform()==="win32",mm=Me.EBADF||Me.os.errno.EBADF,pm=Me.ENOENT||Me.os.errno.ENOENT,nu=448,su=384,gm="exit",pr=[],ou=j.rmdirSync.bind(j),au=!1;function ym(t,e){return j.rm(t,{recursive:!0},e)}function lu(t){return j.rmSync(t,{recursive:!0})}function Po(t,e){let r=gr(t,e),i=r[0],n=r[1];Om(i,function(s,o){if(s)return n(s);let a=o.tries;(function l(){try{let c=hu(o);j.stat(c,function(u){if(!u)return a-- >0?l():n(new Error("Could not get a unique tmp filename, max tries reached "+c));n(null,c)})}catch(c){n(c)}})()})}function Fo(t){let e=gr(t),r=e[0],i=Rm(r),n=i.tries;do{let s=hu(i);try{j.statSync(s)}catch{return s}}while(n-- >0);throw new Error("Could not get a unique tmp filename, max tries reached")}function wm(t,e){let r=gr(t,e),i=r[0],n=r[1];Po(i,function(o,a){if(o)return n(o);j.open(a,iu,i.mode||su,function(c,u){if(c)return n(c);if(i.discardDescriptor)return j.close(u,function(p){return n(p,a,void 0,Ao(a,-1,i,!1))});{let f=i.discardDescriptor||i.detachDescriptor;n(null,a,u,Ao(a,f?-1:u,i,!1))}})})}function Em(t){let e=gr(t),r=e[0],i=r.discardDescriptor||r.detachDescriptor,n=Fo(r),s=j.openSync(n,iu,r.mode||su);return r.discardDescriptor&&(j.closeSync(s),s=void 0),{name:n,fd:s,removeCallback:Ao(n,i?-1:s,r,!0)}}function bm(t,e){let r=gr(t,e),i=r[0],n=r[1];Po(i,function(o,a){if(o)return n(o);j.mkdir(a,i.mode||nu,function(c){if(c)return n(c);n(null,a,cu(a,i,!1))})})}function xm(t){let e=gr(t),r=e[0],i=Fo(r);return j.mkdirSync(i,r.mode||nu),{name:i,removeCallback:cu(i,r,!0)}}function vm(t,e){let r=function(i){if(i&&!Mo(i))return e(i);e()};0<=t[0]?j.close(t[0],function(){j.unlink(t[1],r)}):j.unlink(t[1],r)}function Sm(t){let e=null;try{0<=t[0]&&j.closeSync(t[0])}catch(r){if(!Im(r)&&!Mo(r))throw r}finally{try{j.unlinkSync(t[1])}catch(r){Mo(r)||(e=r)}}if(e!==null)throw e}function Ao(t,e,r,i){let n=Nn(Sm,[e,t],i),s=Nn(vm,[e,t],i,n);return r.keep||pr.unshift(n),i?n:s}function cu(t,e,r){let i=e.unsafeCleanup?ym:j.rmdir.bind(j),n=e.unsafeCleanup?lu:ou,s=Nn(n,t,r),o=Nn(i,t,r,s);return e.keep||pr.unshift(s),r?s:o}function Nn(t,e,r,i){let n=!1;return function s(o){if(!n){let a=i||s,l=pr.indexOf(a);return l>=0&&pr.splice(l,1),n=!0,r||t===ou||t===lu?t(e):t(e,o||function(){})}}}function Dm(){if(au)for(;pr.length;)try{pr[0]()}catch{}}function Jh(t){let e=[],r=null;try{r=Zh.randomBytes(t)}catch{r=Zh.pseudoRandomBytes(t)}for(let i=0;i<t;i++)e.push(Qh[r[i]%Qh.length]);return e.join("")}function pe(t){return typeof t>"u"}function gr(t,e){if(typeof t=="function")return[{},t];if(pe(t))return[{},e];let r={};for(let i of Object.getOwnPropertyNames(t))r[i]=t[i];return[r,e]}function Nm(t,e,r){let i=Q.isAbsolute(t)?t:Q.join(e,t);j.stat(i,function(n){n?j.realpath(Q.dirname(i),function(s,o){if(s)return r(s);r(null,Q.join(o,Q.basename(i)))}):j.realpath(Q,r)})}function Tm(t,e){let r=Q.isAbsolute(t)?t:Q.join(e,t);try{return j.statSync(r),j.realpathSync(r)}catch{let n=j.realpathSync(Q.dirname(r));return Q.join(n,Q.basename(r))}}function hu(t){let e=t.tmpdir;if(!pe(t.name))return Q.join(e,t.dir,t.name);if(!pe(t.template))return Q.join(e,t.dir,t.template).replace(ru,Jh(6));let r=[t.prefix?t.prefix:"tmp","-",process.pid,"-",Jh(12),t.postfix?"-"+t.postfix:""].join("");return Q.join(e,t.dir,r)}function uu(t){if(!pe(t.name)){let e=t.name;if(Q.isAbsolute(e))throw new Error(`name option must not contain an absolute path, found "${e}".`);let r=Q.basename(e);if(r===".."||r==="."||r!==e)throw new Error(`name option must not contain a path, found "${e}".`)}if(!pe(t.template)&&!t.template.match(ru))throw new Error(`Invalid template, found "${t.template}".`);if(!pe(t.tries)&&isNaN(t.tries)||t.tries<0)throw new Error(`Invalid tries, found "${t.tries}".`);t.tries=pe(t.name)?t.tries||fm:1,t.keep=!!t.keep,t.detachDescriptor=!!t.detachDescriptor,t.discardDescriptor=!!t.discardDescriptor,t.unsafeCleanup=!!t.unsafeCleanup,t.prefix=pe(t.prefix)?"":t.prefix,t.postfix=pe(t.postfix)?"":t.postfix}function eu(t,e,r,i){if(pe(e))return i(null);Nm(e,r,function(n,s){if(n)return i(n);let o=Q.relative(r,s);if(!s.startsWith(r))return i(new Error(`${t} option must be relative to "${r}", found "${o}".`));i(null,o)})}function tu(t,e,r){if(pe(e))return;let i=Tm(e,r),n=Q.relative(r,i);if(!i.startsWith(r))throw new Error(`${t} option must be relative to "${r}", found "${n}".`);return n}function Om(t,e){_m(t,function(r,i){if(r)return e(r);t.tmpdir=i;try{uu(t,i)}catch(n){return e(n)}eu("dir",t.dir,i,function(n,s){if(n)return e(n);t.dir=pe(s)?"":s,eu("template",t.template,i,function(o,a){if(o)return e(o);t.template=a,e(null,t)})})})}function Rm(t){let e=t.tmpdir=du(t);uu(t,e);let r=tu("dir",t.dir,e);return t.dir=pe(r)?"":r,t.template=tu("template",t.template,e),t}function Im(t){return fu(t,-mm,"EBADF")}function Mo(t){return fu(t,-pm,"ENOENT")}function fu(t,e,r){return dm?t.code===r:t.code===r&&t.errno===e}function Cm(){au=!0}function _m(t,e){return j.realpath(t&&t.tmpdir||Tn.tmpdir(),e)}function du(t){return j.realpathSync(t&&t.tmpdir||Tn.tmpdir())}process.addListener(gm,Dm);Object.defineProperty($e.exports,"tmpdir",{enumerable:!0,configurable:!1,get:function(){return du()}});$e.exports.dir=bm;$e.exports.dirSync=xm;$e.exports.file=wm;$e.exports.fileSync=Em;$e.exports.tmpName=Po;$e.exports.tmpNameSync=Fo;$e.exports.setGracefulCleanup=Cm});var Nf=C((jE,Df)=>{Df.exports=Os;function Os(){this.pending=0,this.max=1/0,this.listeners=[],this.waiting=[],this.error=null}Os.prototype.go=function(t){this.pending<this.max?Sf(this,t):this.waiting.push(t)};Os.prototype.wait=function(t){this.pending===0?t(this.error):this.listeners.push(t)};Os.prototype.hold=function(){return vf(this)};function vf(t){t.pending+=1;var e=!1;return r;function r(n){if(e)throw new Error("callback called twice");if(e=!0,t.error=t.error||n,t.pending-=1,t.waiting.length>0&&t.pending<t.max)Sf(t,t.waiting.shift());else if(t.pending===0){var s=t.listeners;t.listeners=[],s.forEach(i)}}function i(n){n(t.error)}}function Sf(t,e){e(vf(t))}});var Of=C(Li=>{var _i=require("fs"),Rs=require("util"),Za=require("stream"),Tf=Za.Readable,Qa=Za.Writable,lg=Za.PassThrough,cg=Nf(),Is=require("events").EventEmitter;Li.createFromBuffer=hg;Li.createFromFd=ug;Li.BufferSlicer=lt;Li.FdSlicer=at;Rs.inherits(at,Is);function at(t,e){e=e||{},Is.call(this),this.fd=t,this.pend=new cg,this.pend.max=1,this.refCount=0,this.autoClose=!!e.autoClose}at.prototype.read=function(t,e,r,i,n){var s=this;s.pend.go(function(o){_i.read(s.fd,t,e,r,i,function(a,l,c){o(),n(a,l,c)})})};at.prototype.write=function(t,e,r,i,n){var s=this;s.pend.go(function(o){_i.write(s.fd,t,e,r,i,function(a,l,c){o(),n(a,l,c)})})};at.prototype.createReadStream=function(t){return new Cs(this,t)};at.prototype.createWriteStream=function(t){return new _s(this,t)};at.prototype.ref=function(){this.refCount+=1};at.prototype.unref=function(){var t=this;if(t.refCount-=1,t.refCount>0)return;if(t.refCount<0)throw new Error("invalid unref");t.autoClose&&_i.close(t.fd,e);function e(r){r?t.emit("error",r):t.emit("close")}};Rs.inherits(Cs,Tf);function Cs(t,e){e=e||{},Tf.call(this,e),this.context=t,this.context.ref(),this.start=e.start||0,this.endOffset=e.end,this.pos=this.start,this.destroyed=!1}Cs.prototype._read=function(t){var e=this;if(!e.destroyed){var r=Math.min(e._readableState.highWaterMark,t);if(e.endOffset!=null&&(r=Math.min(r,e.endOffset-e.pos)),r<=0){e.destroyed=!0,e.push(null),e.context.unref();return}e.context.pend.go(function(i){if(e.destroyed)return i();var n=Buffer.allocUnsafe(r);_i.read(e.context.fd,n,0,r,e.pos,function(s,o){s?e.destroy(s):o===0?(e.destroyed=!0,e.push(null),e.context.unref()):(e.pos+=o,e.push(n.slice(0,o))),i()})})}};Cs.prototype.destroy=function(t){this.destroyed||(t=t||new Error("stream destroyed"),this.destroyed=!0,this.emit("error",t),this.context.unref())};Rs.inherits(_s,Qa);function _s(t,e){e=e||{},Qa.call(this,e),this.context=t,this.context.ref(),this.start=e.start||0,this.endOffset=e.end==null?1/0:+e.end,this.bytesWritten=0,this.pos=this.start,this.destroyed=!1,this.on("finish",this.destroy.bind(this))}_s.prototype._write=function(t,e,r){var i=this;if(!i.destroyed){if(i.pos+t.length>i.endOffset){var n=new Error("maximum file length exceeded");n.code="ETOOBIG",i.destroy(),r(n);return}i.context.pend.go(function(s){if(i.destroyed)return s();_i.write(i.context.fd,t,0,t.length,i.pos,function(o,a){o?(i.destroy(),s(),r(o)):(i.bytesWritten+=a,i.pos+=a,i.emit("progress"),s(),r())})})}};_s.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.context.unref())};Rs.inherits(lt,Is);function lt(t,e){Is.call(this),e=e||{},this.refCount=0,this.buffer=t,this.maxChunkSize=e.maxChunkSize||Number.MAX_SAFE_INTEGER}lt.prototype.read=function(t,e,r,i,n){if(!(0<=e&&e<=t.length))throw new RangeError("offset outside buffer: 0 <= "+e+" <= "+t.length);if(i<0)throw new RangeError("position is negative: "+i);if(e+r>t.length&&(r=t.length-e),i+r>this.buffer.length&&(r=this.buffer.length-i),r<=0){setImmediate(function(){n(null,0)});return}this.buffer.copy(t,e,i,i+r),setImmediate(function(){n(null,r)})};lt.prototype.write=function(t,e,r,i,n){t.copy(this.buffer,i,e,e+r),setImmediate(function(){n(null,r,t)})};lt.prototype.createReadStream=function(t){t=t||{};var e=new lg(t);e.destroyed=!1,e.start=t.start||0,e.endOffset=t.end,e.pos=e.endOffset||this.buffer.length;for(var r=this.buffer.slice(e.start,e.pos),i=0;;){var n=i+this.maxChunkSize;if(n>=r.length){i<r.length&&e.write(r.slice(i,r.length));break}e.write(r.slice(i,n)),i=n}return e.end(),e.destroy=function(){e.destroyed=!0},e};lt.prototype.createWriteStream=function(t){var e=this;t=t||{};var r=new Qa(t);return r.start=t.start||0,r.endOffset=t.end==null?this.buffer.length:+t.end,r.bytesWritten=0,r.pos=r.start,r.destroyed=!1,r._write=function(i,n,s){if(!r.destroyed){var o=r.pos+i.length;if(o>r.endOffset){var a=new Error("maximum file length exceeded");a.code="ETOOBIG",r.destroyed=!0,s(a);return}i.copy(e.buffer,r.pos,0,i.length),r.bytesWritten+=i.length,r.pos=o,r.emit("progress"),s()}},r.destroy=function(){r.destroyed=!0},r};lt.prototype.ref=function(){this.refCount+=1};lt.prototype.unref=function(){if(this.refCount-=1,this.refCount<0)throw new Error("invalid unref")};function hg(t,e){return new lt(t,e)}function ug(t,e){return new at(t,e)}});var Cf=C((VE,If)=>{var It=require("buffer").Buffer,Ja=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array<"u"&&(Ja=new Int32Array(Ja));function Rf(t){if(It.isBuffer(t))return t;var e=typeof It.alloc=="function"&&typeof It.from=="function";if(typeof t=="number")return e?It.alloc(t):new It(t);if(typeof t=="string")return e?It.from(t):new It(t);throw new Error("input must be buffer, number, or string, received "+typeof t)}function fg(t){var e=Rf(4);return e.writeInt32BE(t,0),e}function el(t,e){t=Rf(t),It.isBuffer(e)&&(e=e.readUInt32BE(0));for(var r=~~e^-1,i=0;i<t.length;i++)r=Ja[(r^t[i])&255]^r>>>8;return r^-1}function tl(){return fg(el.apply(null,arguments))}tl.signed=function(){return el.apply(null,arguments)};tl.unsigned=function(){return el.apply(null,arguments)>>>0};If.exports=tl});var Bf=C(Ee=>{var rl=require("fs"),dg=require("zlib"),_f=Of(),mg=Cf(),Ms=require("util"),Ps=require("events").EventEmitter,Lf=require("stream").Transform,nl=require("stream").PassThrough,pg=require("stream").Writable;Ee.open=gg;Ee.fromFd=Af;Ee.fromBuffer=yg;Ee.fromRandomAccessReader=sl;Ee.dosDateTimeToDate=Ff;Ee.getFileNameLowLevel=kf;Ee.validateFileName=qf;Ee.parseExtraFields=Uf;Ee.ZipFile=Ve;Ee.Entry=Ai;Ee.LocalFileHeader=Pf;Ee.RandomAccessReader=Ct;function gg(t,e,r){typeof e=="function"&&(r=e,e=null),e==null&&(e={}),e.autoClose==null&&(e.autoClose=!0),e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1),r==null&&(r=As),rl.open(t,"r",function(i,n){if(i)return r(i);Af(n,e,function(s,o){s&&rl.close(n,As),r(s,o)})})}function Af(t,e,r){typeof e=="function"&&(r=e,e=null),e==null&&(e={}),e.autoClose==null&&(e.autoClose=!1),e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1),r==null&&(r=As),rl.fstat(t,function(i,n){if(i)return r(i);var s=_f.createFromFd(t,{autoClose:!0});sl(s,n.size,e,r)})}function yg(t,e,r){typeof e=="function"&&(r=e,e=null),e==null&&(e={}),e.autoClose=!1,e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1);var i=_f.createFromBuffer(t,{maxChunkSize:65536});sl(i,t.length,e,r)}function sl(t,e,r,i){typeof r=="function"&&(i=r,r=null),r==null&&(r={}),r.autoClose==null&&(r.autoClose=!0),r.lazyEntries==null&&(r.lazyEntries=!1),r.decodeStrings==null&&(r.decodeStrings=!0);var n=!!r.decodeStrings;if(r.validateEntrySizes==null&&(r.validateEntrySizes=!0),r.strictFileNames==null&&(r.strictFileNames=!1),i==null&&(i=As),typeof e!="number")throw new Error("expected totalSize parameter to be a number");if(e>Number.MAX_SAFE_INTEGER)throw new Error("zip file too large. only file sizes up to 2^52 are supported due to JavaScript's Number type being an IEEE 754 double.");t.ref();var s=22,o=20,a=65535,l=Math.min(o+s+a,e),c=ct(l),u=e-c.length;Pr(t,c,0,l,u,function(f){if(f)return i(f);for(var p=l-s;p>=0;p-=1)if(c.readUInt32LE(p)===101010256){var y=c.subarray(p),S=y.readUInt16LE(4),N=y.readUInt16LE(10),T=y.readUInt32LE(16),R=y.readUInt16LE(20),K=y.length-s;if(R!==K)return i(new Error("Invalid comment length. Expected: "+K+". Found: "+R+". Are there extra bytes at the end of the file? Or is the end of central dir signature `PK\u263A\u263B` in the comment?"));var g=n?Ls(y.subarray(22),!1):y.subarray(22);if(p-o>=0&&c.readUInt32LE(p-o)===117853008){var m=c.subarray(p-o,p-o+o),b=Mr(m,8),h=ct(56);return Pr(t,h,0,h.length,b,function(E){return E?i(E):h.readUInt32LE(0)!==101075792?i(new Error("invalid zip64 end of central directory record signature")):(S=h.readUInt32LE(16),S!==0?i(new Error("multi-disk zip files are not supported: found disk number: "+S)):(N=Mr(h,32),T=Mr(h,48),i(null,new Ve(t,T,e,N,g,r.autoClose,r.lazyEntries,n,r.validateEntrySizes,r.strictFileNames))))})}return S!==0?i(new Error("multi-disk zip files are not supported: found disk number: "+S)):i(null,new Ve(t,T,e,N,g,r.autoClose,r.lazyEntries,n,r.validateEntrySizes,r.strictFileNames))}i(new Error("End of central directory record signature not found. Either not a zip file, or file is truncated."))})}Ms.inherits(Ve,Ps);function Ve(t,e,r,i,n,s,o,a,l,c){var u=this;Ps.call(u),u.reader=t,u.reader.on("error",function(f){Mf(u,f)}),u.reader.once("close",function(){u.emit("close")}),u.readEntryCursor=e,u.fileSize=r,u.entryCount=i,u.comment=n,u.entriesRead=0,u.autoClose=!!s,u.lazyEntries=!!o,u.decodeStrings=!!a,u.validateEntrySizes=!!l,u.strictFileNames=!!c,u.isOpen=!0,u.emittedError=!1,u.lazyEntries||u._readEntry()}Ve.prototype.close=function(){this.isOpen&&(this.isOpen=!1,this.reader.unref())};function Xe(t,e){t.autoClose&&t.close(),Mf(t,e)}function Mf(t,e){t.emittedError||(t.emittedError=!0,t.emit("error",e))}Ve.prototype.readEntry=function(){if(!this.lazyEntries)throw new Error("readEntry() called without lazyEntries:true");this._readEntry()};Ve.prototype._readEntry=function(){var t=this;if(t.entryCount===t.entriesRead){setImmediate(function(){t.autoClose&&t.close(),!t.emittedError&&t.emit("end")});return}if(!t.emittedError){var e=ct(46);Pr(t.reader,e,0,e.length,t.readEntryCursor,function(r){if(r)return Xe(t,r);if(!t.emittedError){var i=new Ai,n=e.readUInt32LE(0);if(n!==33639248)return Xe(t,new Error("invalid central directory file header signature: 0x"+n.toString(16)));if(i.versionMadeBy=e.readUInt16LE(4),i.versionNeededToExtract=e.readUInt16LE(6),i.generalPurposeBitFlag=e.readUInt16LE(8),i.compressionMethod=e.readUInt16LE(10),i.lastModFileTime=e.readUInt16LE(12),i.lastModFileDate=e.readUInt16LE(14),i.crc32=e.readUInt32LE(16),i.compressedSize=e.readUInt32LE(20),i.uncompressedSize=e.readUInt32LE(24),i.fileNameLength=e.readUInt16LE(28),i.extraFieldLength=e.readUInt16LE(30),i.fileCommentLength=e.readUInt16LE(32),i.internalFileAttributes=e.readUInt16LE(36),i.externalFileAttributes=e.readUInt32LE(38),i.relativeOffsetOfLocalHeader=e.readUInt32LE(42),i.generalPurposeBitFlag&64)return Xe(t,new Error("strong encryption is not supported"));t.readEntryCursor+=46,e=ct(i.fileNameLength+i.extraFieldLength+i.fileCommentLength),Pr(t.reader,e,0,e.length,t.readEntryCursor,function(s){if(s)return Xe(t,s);if(!t.emittedError){i.fileNameRaw=e.subarray(0,i.fileNameLength);var o=i.fileNameLength+i.extraFieldLength;i.extraFieldRaw=e.subarray(i.fileNameLength,o),i.fileCommentRaw=e.subarray(o,o+i.fileCommentLength);try{i.extraFields=Uf(i.extraFieldRaw)}catch(N){return Xe(t,N)}if(t.decodeStrings){var a=(i.generalPurposeBitFlag&2048)!==0;i.fileComment=Ls(i.fileCommentRaw,a),i.fileName=kf(i.generalPurposeBitFlag,i.fileNameRaw,i.extraFields,t.strictFileNames);var l=qf(i.fileName);if(l!=null)return Xe(t,new Error(l))}else i.fileComment=i.fileCommentRaw,i.fileName=i.fileNameRaw;i.comment=i.fileComment,t.readEntryCursor+=e.length,t.entriesRead+=1;for(var c=0;c<i.extraFields.length;c++){var u=i.extraFields[c];if(u.id===1){var f=u.data,p=0;if(i.uncompressedSize===4294967295){if(p+8>f.length)return Xe(t,new Error("zip64 extended information extra field does not include uncompressed size"));i.uncompressedSize=Mr(f,p),p+=8}if(i.compressedSize===4294967295){if(p+8>f.length)return Xe(t,new Error("zip64 extended information extra field does not include compressed size"));i.compressedSize=Mr(f,p),p+=8}if(i.relativeOffsetOfLocalHeader===4294967295){if(p+8>f.length)return Xe(t,new Error("zip64 extended information extra field does not include relative header offset"));i.relativeOffsetOfLocalHeader=Mr(f,p),p+=8}break}}if(t.validateEntrySizes&&i.compressionMethod===0){var y=i.uncompressedSize;if(i.isEncrypted()&&(y+=12),i.compressedSize!==y){var S="compressed/uncompressed size mismatch for stored file: "+i.compressedSize+" != "+i.uncompressedSize;return Xe(t,new Error(S))}}t.emit("entry",i),t.lazyEntries||t._readEntry()}})}})}};Ve.prototype.openReadStream=function(t,e,r){var i=this,n=0,s=t.compressedSize;if(r==null&&(r=e,e=null),e==null)e={};else{if(e.decrypt!=null){if(!t.isEncrypted())throw new Error("options.decrypt can only be specified for encrypted entries");if(e.decrypt!==!1)throw new Error("invalid options.decrypt value: "+e.decrypt);if(t.isCompressed()&&e.decompress!==!1)throw new Error("entry is encrypted and compressed, and options.decompress !== false")}if(e.decompress!=null){if(!t.isCompressed())throw new Error("options.decompress can only be specified for compressed entries");if(!(e.decompress===!1||e.decompress===!0))throw new Error("invalid options.decompress value: "+e.decompress)}if(e.start!=null||e.end!=null){if(t.isCompressed()&&e.decompress!==!1)throw new Error("start/end range not allowed for compressed entry without options.decompress === false");if(t.isEncrypted()&&e.decrypt!==!1)throw new Error("start/end range not allowed for encrypted entry without options.decrypt === false")}if(e.start!=null){if(n=e.start,n<0)throw new Error("options.start < 0");if(n>t.compressedSize)throw new Error("options.start > entry.compressedSize")}if(e.end!=null){if(s=e.end,s<0)throw new Error("options.end < 0");if(s>t.compressedSize)throw new Error("options.end > entry.compressedSize");if(s<n)throw new Error("options.end < options.start")}}if(!i.isOpen)return r(new Error("closed"));if(t.isEncrypted()&&e.decrypt!==!1)return r(new Error("entry is encrypted, and options.decrypt !== false"));var o;if(t.compressionMethod===0)o=!1;else if(t.compressionMethod===8)o=e.decompress!=null?e.decompress:!0;else return r(new Error("unsupported compression method: "+t.compressionMethod));i.readLocalFileHeader(t,{minimal:!0},function(a,l){if(a)return r(a);i.openReadStreamLowLevel(l.fileDataStart,t.compressedSize,n,s,o,t.uncompressedSize,r)})};Ve.prototype.openReadStreamLowLevel=function(t,e,r,i,n,s,o){var a=this,l=t+e,c=a.reader.createReadStream({start:t+r,end:t+i}),u=c;if(n){var f=!1,p=dg.createInflateRaw();c.on("error",function(y){setImmediate(function(){f||p.emit("error",y)})}),c.pipe(p),a.validateEntrySizes?(u=new Mi(s),p.on("error",function(y){setImmediate(function(){f||u.emit("error",y)})}),p.pipe(u)):u=p,il(u,function(){f=!0,p!==u&&p.unpipe(u),c.unpipe(p),c.destroy()})}o(null,u)};Ve.prototype.readLocalFileHeader=function(t,e,r){var i=this;r==null&&(r=e,e=null),e==null&&(e={}),i.reader.ref();var n=ct(30);Pr(i.reader,n,0,n.length,t.relativeOffsetOfLocalHeader,function(s){try{if(s)return r(s);var o=n.readUInt32LE(0);if(o!==67324752)return r(new Error("invalid local file header signature: 0x"+o.toString(16)));var a=n.readUInt16LE(26),l=n.readUInt16LE(28),c=t.relativeOffsetOfLocalHeader+30+a+l;if(c+t.compressedSize>i.fileSize)return r(new Error("file data overflows file bounds: "+c+" + "+t.compressedSize+" > "+i.fileSize));if(e.minimal)return r(null,{fileDataStart:c});var u=new Pf;u.fileDataStart=c,u.versionNeededToExtract=n.readUInt16LE(4),u.generalPurposeBitFlag=n.readUInt16LE(6),u.compressionMethod=n.readUInt16LE(8),u.lastModFileTime=n.readUInt16LE(10),u.lastModFileDate=n.readUInt16LE(12),u.crc32=n.readUInt32LE(14),u.compressedSize=n.readUInt32LE(18),u.uncompressedSize=n.readUInt32LE(22),u.fileNameLength=a,u.extraFieldLength=l,n=ct(a+l),i.reader.ref(),Pr(i.reader,n,0,n.length,t.relativeOffsetOfLocalHeader+30,function(f){try{return f?r(f):(u.fileName=n.subarray(0,a),u.extraField=n.subarray(a),r(null,u))}finally{i.reader.unref()}})}finally{i.reader.unref()}})};function Ai(){}Ai.prototype.getLastModDate=function(t){if(t==null&&(t={}),!t.forceDosFormat)for(var e=0;e<this.extraFields.length;e++){var r=this.extraFields[e];if(r.id===21589){var i=r.data;if(i.length<5)continue;var n=i[0],s=1;if(!(n&s))continue;var o=i.readInt32LE(1);return new Date(o*1e3)}else if(r.id===10)for(var i=r.data,a=4;a<i.length+4;){var l=i.readUInt16LE(a);a+=2;var c=i.readUInt16LE(a);if(a+=2,l!==1){a+=c;continue}if(c<8||a+c>i.length)break;var u=4294967296*i.readInt32LE(a+4)+i.readUInt32LE(a),f=u/1e4-116444736e5;return new Date(f)}}return Ff(this.lastModFileDate,this.lastModFileTime,t.timezone)};Ai.prototype.isEncrypted=function(){return(this.generalPurposeBitFlag&1)!==0};Ai.prototype.isCompressed=function(){return this.compressionMethod===8};function Pf(){}function Ff(t,e,r){var i=t&31,n=(t>>5&15)-1,s=(t>>9&127)+1980,o=0,a=(e&31)*2,l=e>>5&63,c=e>>11&31;if(r==null||r==="local")return new Date(s,n,i,c,l,a,o);if(r==="UTC")return new Date(Date.UTC(s,n,i,c,l,a,o));throw new Error("unrecognized options.timezone: "+options.timezone)}function kf(t,e,r,i){for(var n=null,s=0;s<r.length;s++){var o=r[s];if(o.id===28789){if(o.data.length<6||o.data.readUInt8(0)!==1)continue;var a=o.data.readUInt32LE(1);if(mg.unsigned(e)!==a)continue;n=Ls(o.data.subarray(5),!0);break}}if(n==null){var l=(t&2048)!==0;n=Ls(e,l)}return i||(n=n.replace(/\\/g,"/")),n}function qf(t){return t.indexOf("\\")!==-1?"invalid characters in fileName: "+t:/^[a-zA-Z]:/.test(t)||/^\//.test(t)?"absolute path: "+t:t.split("/").indexOf("..")!==-1?"invalid relative path: "+t:null}function Uf(t){for(var e=[],r=0;r<t.length-3;){var i=t.readUInt16LE(r+0),n=t.readUInt16LE(r+2),s=r+4,o=s+n;if(o>t.length)throw new Error("extra field length exceeds extra field buffer size");var a=t.subarray(s,o);e.push({id:i,data:a}),r=o}return e}function Pr(t,e,r,i,n,s){if(i===0)return setImmediate(function(){s(null,ct(0))});t.read(e,r,i,n,function(o,a){if(o)return s(o);if(a<i)return s(new Error("unexpected EOF"));s()})}Ms.inherits(Mi,Lf);function Mi(t){Lf.call(this),this.actualByteCount=0,this.expectedByteCount=t}Mi.prototype._transform=function(t,e,r){if(this.actualByteCount+=t.length,this.actualByteCount>this.expectedByteCount){var i="too many bytes in the stream. expected "+this.expectedByteCount+". got at least "+this.actualByteCount;return r(new Error(i))}r(null,t)};Mi.prototype._flush=function(t){if(this.actualByteCount<this.expectedByteCount){var e="not enough bytes in the stream. expected "+this.expectedByteCount+". got only "+this.actualByteCount;return t(new Error(e))}t()};Ms.inherits(Ct,Ps);function Ct(){Ps.call(this),this.refCount=0}Ct.prototype.ref=function(){this.refCount+=1};Ct.prototype.unref=function(){var t=this;if(t.refCount-=1,t.refCount>0)return;if(t.refCount<0)throw new Error("invalid unref");t.close(e);function e(r){if(r)return t.emit("error",r);t.emit("close")}};Ct.prototype.createReadStream=function(t){t==null&&(t={});var e=t.start,r=t.end;if(e===r){var i=new nl;return setImmediate(function(){i.end()}),i}var n=this._readStreamForRange(e,r),s=!1,o=new Fs(this);n.on("error",function(l){setImmediate(function(){s||o.emit("error",l)})}),il(o,function(){n.unpipe(o),o.unref(),n.destroy()});var a=new Mi(r-e);return o.on("error",function(l){setImmediate(function(){s||a.emit("error",l)})}),il(a,function(){s=!0,o.unpipe(a),o.destroy()}),n.pipe(o).pipe(a)};Ct.prototype._readStreamForRange=function(t,e){throw new Error("not implemented")};Ct.prototype.read=function(t,e,r,i,n){var s=this.createReadStream({start:i,end:i+r}),o=new pg,a=0;o._write=function(l,c,u){l.copy(t,e+a,0,l.length),a+=l.length,u()},o.on("finish",n),s.on("error",function(l){n(l)}),s.pipe(o)};Ct.prototype.close=function(t){setImmediate(t)};Ms.inherits(Fs,nl);function Fs(t){nl.call(this),this.context=t,this.context.ref(),this.unreffedYet=!1}Fs.prototype._flush=function(t){this.unref(),t()};Fs.prototype.unref=function(t){this.unreffedYet||(this.unreffedYet=!0,this.context.unref())};var wg="\0\u263A\u263B\u2665\u2666\u2663\u2660\u2022\u25D8\u25CB\u25D9\u2642\u2640\u266A\u266B\u263C\u25BA\u25C4\u2195\u203C\xB6\xA7\u25AC\u21A8\u2191\u2193\u2192\u2190\u221F\u2194\u25B2\u25BC !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\u2302\xC7\xFC\xE9\xE2\xE4\xE0\xE5\xE7\xEA\xEB\xE8\xEF\xEE\xEC\xC4\xC5\xC9\xE6\xC6\xF4\xF6\xF2\xFB\xF9\xFF\xD6\xDC\xA2\xA3\xA5\u20A7\u0192\xE1\xED\xF3\xFA\xF1\xD1\xAA\xBA\xBF\u2310\xAC\xBD\xBC\xA1\xAB\xBB\u2591\u2592\u2593\u2502\u2524\u2561\u2562\u2556\u2555\u2563\u2551\u2557\u255D\u255C\u255B\u2510\u2514\u2534\u252C\u251C\u2500\u253C\u255E\u255F\u255A\u2554\u2569\u2566\u2560\u2550\u256C\u2567\u2568\u2564\u2565\u2559\u2558\u2552\u2553\u256B\u256A\u2518\u250C\u2588\u2584\u258C\u2590\u2580\u03B1\xDF\u0393\u03C0\u03A3\u03C3\xB5\u03C4\u03A6\u0398\u03A9\u03B4\u221E\u03C6\u03B5\u2229\u2261\xB1\u2265\u2264\u2320\u2321\xF7\u2248\xB0\u2219\xB7\u221A\u207F\xB2\u25A0\xA0";function Ls(t,e){if(e)return t.toString("utf8");for(var r="",i=0;i<t.length;i++)r+=wg[t[i]];return r}function Mr(t,e){var r=t.readUInt32LE(e),i=t.readUInt32LE(e+4);return i*4294967296+r}var ct;typeof Buffer.allocUnsafe=="function"?ct=function(t){return Buffer.allocUnsafe(t)}:ct=function(t){return new Buffer(t)};function il(t,e){typeof t.destroy=="function"?t._destroy=function(r,i){e(),i?.(r)}:t.destroy=e}function As(t){if(t)throw t}});var Ng={};td(Ng,{StubLogger:()=>Us,StubStatusView:()=>qs,getServiceInstallDirectory:()=>Sg,getServiceInstallDirectoryRoot:()=>Dg,installService:()=>vg});module.exports=rd(Ng);var qh=P(require("child_process")),Sn=P(require("fs")),Dn=P(require("os")),Uh=P(Dl()),Bh=P(kh()),mr="unknown";function _o(t){switch(t){case"Windows_64":case"Windows_86":case"Windows_ARM64":return"Windows";case"OSX_10_11_64":case"OSX_ARM64":return"OSX";case"CentOS_7":return"CentOS";case"Debian_8":return"Debian";case"Fedora_23":return"Fedora";case"OpenSUSE_13_2":return"OpenSUSE";case"SLES_12_2":return"SLES";case"RHEL_7":return"RHEL";case"Ubuntu_14":return"Ubuntu14";case"Ubuntu_16":return"Ubuntu16";case"Linux_ARM64":return"Linux";default:return"Unknown"}}var Co=class t{constructor(e,r,i){this.name=e;this.version=r;this.idLike=i}static getCurrent(){return t.fromFilePath("/etc/os-release").catch(()=>t.fromFilePath("/usr/lib/os-release")).catch(()=>Promise.resolve(new t(mr,mr)))}toString(){return`name=${this.name}, version=${this.version}`}static fromFilePath(e){return new Promise((r,i)=>{Sn.readFile(e,"utf8",(n,s)=>{n?i(n):r(t.fromReleaseInfo(s))})})}static fromReleaseInfo(e,r=Dn.EOL){let i=mr,n=mr,s,o=e.split(r);for(let a of o){a=a.trim();let l=a.indexOf("=");if(l>=0){let c=a.substring(0,l),u=a.substring(l+1);if((u.length>1&&u.startsWith('"')&&u.endsWith('"')||u.length>1&&u.startsWith("'")&&u.endsWith("'"))&&(u=u.substring(1,u.length-1)),c==="ID"?i=u:c==="VERSION_ID"?n=u:c==="ID_LIKE"&&(s=u.split(" ")),i!==mr&&n!==mr&&s!==void 0)break}}return new t(i,n,s)}},Qr=class t{constructor(e,r,i=void 0){this.platform=e;this.architecture=r;this.distribution=i;try{this.runtimeId=t.getRuntimeId(e,r,i)}catch{this.runtimeId=void 0}}runtimeId;get isWindows(){return this.platform==="win32"}get isMacOS(){return this.platform==="darwin"}get isLinux(){return this.platform==="linux"}get isValidRuntime(){return this.runtimeId!==void 0&&this.runtimeId!=="Unknown"}getRuntimeDisplayName(){return _o(this.runtimeId)}isMacVersionLessThan(e){if(this.isMacOS)try{let r=Bh.parse(Sn.readFileSync("/System/Library/CoreServices/SystemVersion.plist","utf-8"));if(r&&r.ProductVersion&&Uh.lt(r.ProductVersion,e))return!0}catch{}return!1}toString(){let e=this.platform;return this.architecture&&(e&&(e+=", "),e+=this.architecture),this.distribution&&(e&&(e+=", "),e+=this.distribution.toString()),e}static getCurrent(){let e=Dn.platform(),r,i;switch(e){case"win32":r=t.getWindowsArchitecture(),i=Promise.resolve(void 0);break;case"darwin":r=t.getUnixArchitecture(),i=Promise.resolve(void 0);break;case"linux":r=t.getUnixArchitecture(),i=Co.getCurrent();break;default:throw new Error(`Unsupported platform: ${e}`)}return r.then(n=>i.then(s=>new t(e,n,s)))}static getWindowsArchitecture(){return new Promise((e,r)=>{process.env.PROCESSOR_ARCHITECTURE==="ARM64"?e("arm64"):process.env.PROCESSOR_ARCHITECTURE==="x86"&&process.env.PROCESSOR_ARCHITEW6432===void 0?e("x86"):e("x86_64")})}static getUnixArchitecture(){return t.execChildProcess("uname -m").then(e=>{if(e)return e.trim()})}static execChildProcess(e){return new Promise((r,i)=>{qh.exec(e,{maxBuffer:500*1024},(n,s,o)=>{if(n){i(n);return}if(o&&o.length>0){i(new Error(o));return}r(s)})})}static getRuntimeId(e,r,i){switch(e){case"win32":switch(r){case"x86":return"Windows_86";case"x86_64":return"Windows_64";case"arm64":return"Windows_ARM64";default:}throw new Error(`Unsupported Windows architecture: ${r}`);case"darwin":switch(r){case"x86_64":return"OSX_10_11_64";case"arm64":return"OSX_ARM64";default:}throw new Error(`Unsupported macOS architecture: ${r}`);case"linux":if(r==="x86_64"){let n=t.getRuntimeIdHelper(i.name,i.version);if(n==="Unknown"&&i.idLike&&i.idLike.length>0){for(let s of i.idLike)if(n=t.getRuntimeIdHelper(s,i.version),n!=="Unknown")break}if(n!=="Unknown")return n}else if(r==="aarch64")return"Linux_ARM64";throw new Error(`Unsupported Linux distro: ${i.name}, ${i.version}, ${r}`);default:throw Error("Unsupported platform "+e)}}static getRuntimeIdHelper(e,r){switch(e){case"arch":case"antergos":return"Ubuntu_16";case"ubuntu":if(r.startsWith("14"))return"Ubuntu_14";if(r.startsWith("16"))return"Ubuntu_16";break;case"elementary":case"elementary OS":if(r.startsWith("0.3"))return"Ubuntu_14";if(r.startsWith("0.4"))return"Ubuntu_16";break;case"linuxmint":if(r.startsWith("18")||r.startsWith("19"))return"Ubuntu_16";break;case"centos":case"ol":return"CentOS_7";case"fedora":return"Fedora_23";case"opensuse":return"OpenSUSE_13_2";case"sles":return"SLES_12_2";case"rhel":return"RHEL_7";case"debian":case"deepin":return"Debian_8";case"galliumos":if(r.startsWith("2.0"))return"Ubuntu_16";break;default:return"Ubuntu_16"}return"Ubuntu_16"}};var zh="mssql";var jh="installDir",Xh="executableFiles",Vh="version",Wh="downloadUrl";var Hh="Installing SQL tools service to";var Gh="Downloading";var Lo="service",$h="v1Service";var Yh={service:{downloadUrl:"https://github.com/Microsoft/sqltoolsservice/releases/download/{#version#}/microsoft.sqltools.servicelayer-{#fileName#}",version:"5.0.20250828.1",downloadFileNames:{Windows_86:"win-x86-net8.0.zip",Windows_64:"win-x64-net8.0.zip",Windows_ARM64:"win-arm64-net8.0.zip",OSX_10_11_64:"osx-x64-net8.0.tar.gz",OSX_ARM64:"osx-arm64-net8.0.tar.gz",CentOS_7:"linux-x64-net8.0.tar.gz",Debian_8:"linux-x64-net8.0.tar.gz",Fedora_23:"linux-x64-net8.0.tar.gz",OpenSUSE_13_2:"linux-x64-net8.0.tar.gz",SLES_12_2:"linux-x64-net8.0.tar.gz",RHEL_7:"linux-x64-net8.0.tar.gz",Ubuntu_14:"linux-x64-net8.0.tar.gz",Ubuntu_16:"linux-x64-net8.0.tar.gz",Linux_ARM64:"linux-arm64-net8.0.tar.gz"},installDir:"./sqltoolsservice/{#version#}/{#platform#}",executableFiles:["MicrosoftSqlToolsServiceLayer.exe","MicrosoftSqlToolsServiceLayer","MicrosoftSqlToolsServiceLayer.dll"]}};var Jr=class{_configJsonContent=void 0;_sqlToolsServiceConfigKey;_version;get configJsonContent(){return this._configJsonContent===void 0&&(this._configJsonContent=Yh),this._configJsonContent}constructor(){this._sqlToolsServiceConfigKey=Lo,this._version=2}getSqlToolsServiceDownloadUrl(){return this.getSqlToolsConfigValue(Wh)}getSqlToolsInstallDirectory(){return this.getSqlToolsConfigValue(jh)}getSqlToolsExecutableFiles(){return this.getSqlToolsConfigValue(Xh)}getSqlToolsPackageVersion(){return this.getSqlToolsConfigValue(Vh)}useServiceVersion(e){switch(e){case 1:this._sqlToolsServiceConfigKey=$h;break;default:this._sqlToolsServiceConfigKey=Lo}this._version=e}getServiceVersion(){return this._version}getSqlToolsConfigValue(e){let i=this.configJsonContent[this._sqlToolsServiceConfigKey],n;return i!==void 0&&(n=i[e]),n}getExtensionConfig(e,r){let s=this.configJsonContent[zh][e];return s||(s=r),s}getWorkspaceConfig(e,r){let n=this.configJsonContent[e];return n||(n=r),n}};var yr=P(require("path")),On=P(mu());var Ke=class extends Error{constructor(r,i=void 0,n=void 0){super(r);this.message=r;this.pkg=i;this.innerError=n}};var pu=P(require("fs/promises")),ei=class{constructor(e,r,i,n,s){this._config=e;this._logger=r;this._statusView=i;this._httpClient=n;this._decompressProvider=s;On.setGracefulCleanup()}getDownloadFileName(e){let i=this._config.getSqlToolsConfigValue("downloadFileNames")[e.toString()];if(i===void 0)throw process.platform==="linux"?new Error("Unsupported linux distribution"):new Error(`Unsupported platform: ${process.platform}`);return i}async getOrMakeInstallDirectory(e){let r=this.getInstallDirectoryRoot(),i=this._config.getSqlToolsPackageVersion();r=r.replace("{#version#}",i),r=r.replace("{#platform#}",_o(e));try{await pu.mkdir(r,{recursive:!0})}catch{}return r}getInstallDirectoryRoot(){let e=this._config.getSqlToolsInstallDirectory(),r;return yr.isAbsolute(e)?r=e:r=yr.join(__dirname,"../"+e),r}getGetDownloadUrl(e){let r=this._config.getSqlToolsServiceDownloadUrl(),i=this._config.getSqlToolsPackageVersion();return r=r.replace("{#version#}",i),r=r.replace("{#fileName#}",e),r}async installSQLToolsService(e){let r=this.getDownloadFileName(e),i=await this.getOrMakeInstallDirectory(e);this._logger.appendLine(`${Hh} ${i}.`);let n=this.getGetDownloadUrl(r),s=yr.extname(r)===".zip";this._logger.appendLine(`${Gh} ${n}`);let o={installPath:i,url:n,tmpFile:void 0,isZipFile:s},a=await this.createTempFile(o);o.tmpFile=a;try{await this._httpClient.downloadFile(o.url,o,this._logger,this._statusView),this._logger.logDebug(`Downloaded to ${o.tmpFile.name}...`),this._logger.appendLine(" Done!"),await this.install(o)}catch(l){throw this._logger.appendLine(`[ERROR] ${l}`),l}return!0}createTempFile(e){return new Promise((r,i)=>{On.file({prefix:"package-"},(n,s,o,a)=>{if(n)return i(new Ke("Error from tmp.file",e,n));r({name:s,fd:o,removeCallback:a})})})}install(e){return this._logger.appendLine("Installing ..."),this._statusView.installingService(),new Promise((r,i)=>{this._decompressProvider.decompress(e,this._logger).then(n=>{this._statusView.serviceInstalled(),r()}).catch(n=>{i(n)})})}};var xu=P(require("events"),1),le=P(require("fs"),1);var Mn=require("node:events"),Xo=P(require("node:stream"),1),bu=require("node:string_decoder"),gu=typeof process=="object"&&process?process:{stdout:null,stderr:null},Lm=t=>!!t&&typeof t=="object"&&(t instanceof ue||t instanceof Xo.default||Am(t)||Mm(t)),Am=t=>!!t&&typeof t=="object"&&t instanceof Mn.EventEmitter&&typeof t.pipe=="function"&&t.pipe!==Xo.default.Writable.prototype.pipe,Mm=t=>!!t&&typeof t=="object"&&t instanceof Mn.EventEmitter&&typeof t.write=="function"&&typeof t.end=="function",Ye=Symbol("EOF"),Ze=Symbol("maybeEmitEnd"),pt=Symbol("emittedEnd"),Rn=Symbol("emittingEnd"),ti=Symbol("emittedError"),In=Symbol("closed"),yu=Symbol("read"),Cn=Symbol("flush"),wu=Symbol("flushChunk"),Ne=Symbol("encoding"),wr=Symbol("decoder"),J=Symbol("flowing"),ri=Symbol("paused"),Er=Symbol("resume"),ee=Symbol("buffer"),ae=Symbol("pipes"),te=Symbol("bufferLength"),ko=Symbol("bufferPush"),_n=Symbol("bufferShift"),ne=Symbol("objectMode"),H=Symbol("destroyed"),qo=Symbol("error"),Uo=Symbol("emitData"),Eu=Symbol("emitEnd"),Bo=Symbol("emitEnd2"),Pe=Symbol("async"),zo=Symbol("abort"),Ln=Symbol("aborted"),ii=Symbol("signal"),Pt=Symbol("dataListeners"),ge=Symbol("discarded"),ni=t=>Promise.resolve().then(t),Pm=t=>t(),Fm=t=>t==="end"||t==="finish"||t==="prefinish",km=t=>t instanceof ArrayBuffer||!!t&&typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,qm=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),An=class{src;dest;opts;ondrain;constructor(e,r,i){this.src=e,this.dest=r,this.opts=i,this.ondrain=()=>e[Er](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},jo=class extends An{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,i){super(e,r,i),this.proxyErrors=n=>r.emit("error",n),e.on("error",this.proxyErrors)}},Um=t=>!!t.objectMode,Bm=t=>!t.objectMode&&!!t.encoding&&t.encoding!=="buffer",ue=class extends Mn.EventEmitter{[J]=!1;[ri]=!1;[ae]=[];[ee]=[];[ne];[Ne];[Pe];[wr];[Ye]=!1;[pt]=!1;[Rn]=!1;[In]=!1;[ti]=null;[te]=0;[H]=!1;[ii];[Ln]=!1;[Pt]=0;[ge]=!1;writable=!0;readable=!0;constructor(...e){let r=e[0]||{};if(super(),r.objectMode&&typeof r.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");Um(r)?(this[ne]=!0,this[Ne]=null):Bm(r)?(this[Ne]=r.encoding,this[ne]=!1):(this[ne]=!1,this[Ne]=null),this[Pe]=!!r.async,this[wr]=this[Ne]?new bu.StringDecoder(this[Ne]):null,r&&r.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[ee]}),r&&r.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[ae]});let{signal:i}=r;i&&(this[ii]=i,i.aborted?this[zo]():i.addEventListener("abort",()=>this[zo]()))}get bufferLength(){return this[te]}get encoding(){return this[Ne]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[ne]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[Pe]}set async(e){this[Pe]=this[Pe]||!!e}[zo](){this[Ln]=!0,this.emit("abort",this[ii]?.reason),this.destroy(this[ii]?.reason)}get aborted(){return this[Ln]}set aborted(e){}write(e,r,i){if(this[Ln])return!1;if(this[Ye])throw new Error("write after end");if(this[H])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(i=r,r="utf8"),r||(r="utf8");let n=this[Pe]?ni:Pm;if(!this[ne]&&!Buffer.isBuffer(e)){if(qm(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(km(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[ne]?(this[J]&&this[te]!==0&&this[Cn](!0),this[J]?this.emit("data",e):this[ko](e),this[te]!==0&&this.emit("readable"),i&&n(i),this[J]):e.length?(typeof e=="string"&&!(r===this[Ne]&&!this[wr]?.lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[Ne]&&(e=this[wr].write(e)),this[J]&&this[te]!==0&&this[Cn](!0),this[J]?this.emit("data",e):this[ko](e),this[te]!==0&&this.emit("readable"),i&&n(i),this[J]):(this[te]!==0&&this.emit("readable"),i&&n(i),this[J])}read(e){if(this[H])return null;if(this[ge]=!1,this[te]===0||e===0||e&&e>this[te])return this[Ze](),null;this[ne]&&(e=null),this[ee].length>1&&!this[ne]&&(this[ee]=[this[Ne]?this[ee].join(""):Buffer.concat(this[ee],this[te])]);let r=this[yu](e||null,this[ee][0]);return this[Ze](),r}[yu](e,r){if(this[ne])this[_n]();else{let i=r;e===i.length||e===null?this[_n]():typeof i=="string"?(this[ee][0]=i.slice(e),r=i.slice(0,e),this[te]-=e):(this[ee][0]=i.subarray(e),r=i.subarray(0,e),this[te]-=e)}return this.emit("data",r),!this[ee].length&&!this[Ye]&&this.emit("drain"),r}end(e,r,i){return typeof e=="function"&&(i=e,e=void 0),typeof r=="function"&&(i=r,r="utf8"),e!==void 0&&this.write(e,r),i&&this.once("end",i),this[Ye]=!0,this.writable=!1,(this[J]||!this[ri])&&this[Ze](),this}[Er](){this[H]||(!this[Pt]&&!this[ae].length&&(this[ge]=!0),this[ri]=!1,this[J]=!0,this.emit("resume"),this[ee].length?this[Cn]():this[Ye]?this[Ze]():this.emit("drain"))}resume(){return this[Er]()}pause(){this[J]=!1,this[ri]=!0,this[ge]=!1}get destroyed(){return this[H]}get flowing(){return this[J]}get paused(){return this[ri]}[ko](e){this[ne]?this[te]+=1:this[te]+=e.length,this[ee].push(e)}[_n](){return this[ne]?this[te]-=1:this[te]-=this[ee][0].length,this[ee].shift()}[Cn](e=!1){do;while(this[wu](this[_n]())&&this[ee].length);!e&&!this[ee].length&&!this[Ye]&&this.emit("drain")}[wu](e){return this.emit("data",e),this[J]}pipe(e,r){if(this[H])return e;this[ge]=!1;let i=this[pt];return r=r||{},e===gu.stdout||e===gu.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,i?r.end&&e.end():(this[ae].push(r.proxyErrors?new jo(this,e,r):new An(this,e,r)),this[Pe]?ni(()=>this[Er]()):this[Er]()),e}unpipe(e){let r=this[ae].find(i=>i.dest===e);r&&(this[ae].length===1?(this[J]&&this[Pt]===0&&(this[J]=!1),this[ae]=[]):this[ae].splice(this[ae].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let i=super.on(e,r);if(e==="data")this[ge]=!1,this[Pt]++,!this[ae].length&&!this[J]&&this[Er]();else if(e==="readable"&&this[te]!==0)super.emit("readable");else if(Fm(e)&&this[pt])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[ti]){let n=r;this[Pe]?ni(()=>n.call(this,this[ti])):n.call(this,this[ti])}return i}removeListener(e,r){return this.off(e,r)}off(e,r){let i=super.off(e,r);return e==="data"&&(this[Pt]=this.listeners("data").length,this[Pt]===0&&!this[ge]&&!this[ae].length&&(this[J]=!1)),i}removeAllListeners(e){let r=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[Pt]=0,!this[ge]&&!this[ae].length&&(this[J]=!1)),r}get emittedEnd(){return this[pt]}[Ze](){!this[Rn]&&!this[pt]&&!this[H]&&this[ee].length===0&&this[Ye]&&(this[Rn]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[In]&&this.emit("close"),this[Rn]=!1)}emit(e,...r){let i=r[0];if(e!=="error"&&e!=="close"&&e!==H&&this[H])return!1;if(e==="data")return!this[ne]&&!i?!1:this[Pe]?(ni(()=>this[Uo](i)),!0):this[Uo](i);if(e==="end")return this[Eu]();if(e==="close"){if(this[In]=!0,!this[pt]&&!this[H])return!1;let s=super.emit("close");return this.removeAllListeners("close"),s}else if(e==="error"){this[ti]=i,super.emit(qo,i);let s=!this[ii]||this.listeners("error").length?super.emit("error",i):!1;return this[Ze](),s}else if(e==="resume"){let s=super.emit("resume");return this[Ze](),s}else if(e==="finish"||e==="prefinish"){let s=super.emit(e);return this.removeAllListeners(e),s}let n=super.emit(e,...r);return this[Ze](),n}[Uo](e){for(let i of this[ae])i.dest.write(e)===!1&&this.pause();let r=this[ge]?!1:super.emit("data",e);return this[Ze](),r}[Eu](){return this[pt]?!1:(this[pt]=!0,this.readable=!1,this[Pe]?(ni(()=>this[Bo]()),!0):this[Bo]())}[Bo](){if(this[wr]){let r=this[wr].end();if(r){for(let i of this[ae])i.dest.write(r);this[ge]||super.emit("data",r)}}for(let r of this[ae])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[ne]||(e.dataLength=0);let r=this.promise();return this.on("data",i=>{e.push(i),this[ne]||(e.dataLength+=i.length)}),await r,e}async concat(){if(this[ne])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[Ne]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,r)=>{this.on(H,()=>r(new Error("stream destroyed"))),this.on("error",i=>r(i)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[ge]=!1;let e=!1,r=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return r();let n=this.read();if(n!==null)return Promise.resolve({done:!1,value:n});if(this[Ye])return r();let s,o,a=f=>{this.off("data",l),this.off("end",c),this.off(H,u),r(),o(f)},l=f=>{this.off("error",a),this.off("end",c),this.off(H,u),this.pause(),s({value:f,done:!!this[Ye]})},c=()=>{this.off("error",a),this.off("data",l),this.off(H,u),r(),s({done:!0,value:void 0})},u=()=>a(new Error("stream destroyed"));return new Promise((f,p)=>{o=p,s=f,this.once(H,u),this.once("error",a),this.once("end",c),this.once("data",l)})},throw:r,return:r,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[ge]=!1;let e=!1,r=()=>(this.pause(),this.off(qo,r),this.off(H,r),this.off("end",r),e=!0,{done:!0,value:void 0}),i=()=>{if(e)return r();let n=this.read();return n===null?r():{done:!1,value:n}};return this.once("end",r),this.once(qo,r),this.once(H,r),{next:i,throw:r,return:r,[Symbol.iterator](){return this}}}destroy(e){if(this[H])return e?this.emit("error",e):this.emit(H),this;this[H]=!0,this[ge]=!0,this[ee].length=0,this[te]=0;let r=this;return typeof r.close=="function"&&!this[In]&&r.close(),e?this.emit("error",e):this.emit(H),this}static get isStream(){return Lm}};var zm=le.default.writev,yt=Symbol("_autoClose"),Oe=Symbol("_close"),si=Symbol("_ended"),B=Symbol("_fd"),Vo=Symbol("_finished"),Je=Symbol("_flags"),Wo=Symbol("_flush"),Ko=Symbol("_handleChunk"),Yo=Symbol("_makeBuf"),ai=Symbol("_mode"),Pn=Symbol("_needDrain"),vr=Symbol("_onerror"),Sr=Symbol("_onopen"),Ho=Symbol("_onread"),br=Symbol("_onwrite"),wt=Symbol("_open"),Te=Symbol("_path"),gt=Symbol("_pos"),Fe=Symbol("_queue"),xr=Symbol("_read"),Go=Symbol("_readSize"),Qe=Symbol("_reading"),oi=Symbol("_remain"),$o=Symbol("_size"),Fn=Symbol("_write"),Ft=Symbol("_writing"),kn=Symbol("_defaultFlag"),kt=Symbol("_errored"),qt=class extends ue{[kt]=!1;[B];[Te];[Go];[Qe]=!1;[$o];[oi];[yt];constructor(e,r){if(r=r||{},super(r),this.readable=!0,this.writable=!1,typeof e!="string")throw new TypeError("path must be a string");this[kt]=!1,this[B]=typeof r.fd=="number"?r.fd:void 0,this[Te]=e,this[Go]=r.readSize||16*1024*1024,this[Qe]=!1,this[$o]=typeof r.size=="number"?r.size:1/0,this[oi]=this[$o],this[yt]=typeof r.autoClose=="boolean"?r.autoClose:!0,typeof this[B]=="number"?this[xr]():this[wt]()}get fd(){return this[B]}get path(){return this[Te]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[wt](){le.default.open(this[Te],"r",(e,r)=>this[Sr](e,r))}[Sr](e,r){e?this[vr](e):(this[B]=r,this.emit("open",r),this[xr]())}[Yo](){return Buffer.allocUnsafe(Math.min(this[Go],this[oi]))}[xr](){if(!this[Qe]){this[Qe]=!0;let e=this[Yo]();if(e.length===0)return process.nextTick(()=>this[Ho](null,0,e));le.default.read(this[B],e,0,e.length,null,(r,i,n)=>this[Ho](r,i,n))}}[Ho](e,r,i){this[Qe]=!1,e?this[vr](e):this[Ko](r,i)&&this[xr]()}[Oe](){if(this[yt]&&typeof this[B]=="number"){let e=this[B];this[B]=void 0,le.default.close(e,r=>r?this.emit("error",r):this.emit("close"))}}[vr](e){this[Qe]=!0,this[Oe](),this.emit("error",e)}[Ko](e,r){let i=!1;return this[oi]-=e,e>0&&(i=super.write(e<r.length?r.subarray(0,e):r)),(e===0||this[oi]<=0)&&(i=!1,this[Oe](),super.end()),i}emit(e,...r){switch(e){case"prefinish":case"finish":return!1;case"drain":return typeof this[B]=="number"&&this[xr](),!1;case"error":return this[kt]?!1:(this[kt]=!0,super.emit(e,...r));default:return super.emit(e,...r)}}},qn=class extends qt{[wt](){let e=!0;try{this[Sr](null,le.default.openSync(this[Te],"r")),e=!1}finally{e&&this[Oe]()}}[xr](){let e=!0;try{if(!this[Qe]){this[Qe]=!0;do{let r=this[Yo](),i=r.length===0?0:le.default.readSync(this[B],r,0,r.length,null);if(!this[Ko](i,r))break}while(!0);this[Qe]=!1}e=!1}finally{e&&this[Oe]()}}[Oe](){if(this[yt]&&typeof this[B]=="number"){let e=this[B];this[B]=void 0,le.default.closeSync(e),this.emit("close")}}},et=class extends xu.default{readable=!1;writable=!0;[kt]=!1;[Ft]=!1;[si]=!1;[Fe]=[];[Pn]=!1;[Te];[ai];[yt];[B];[kn];[Je];[Vo]=!1;[gt];constructor(e,r){r=r||{},super(r),this[Te]=e,this[B]=typeof r.fd=="number"?r.fd:void 0,this[ai]=r.mode===void 0?438:r.mode,this[gt]=typeof r.start=="number"?r.start:void 0,this[yt]=typeof r.autoClose=="boolean"?r.autoClose:!0;let i=this[gt]!==void 0?"r+":"w";this[kn]=r.flags===void 0,this[Je]=r.flags===void 0?i:r.flags,this[B]===void 0&&this[wt]()}emit(e,...r){if(e==="error"){if(this[kt])return!1;this[kt]=!0}return super.emit(e,...r)}get fd(){return this[B]}get path(){return this[Te]}[vr](e){this[Oe](),this[Ft]=!0,this.emit("error",e)}[wt](){le.default.open(this[Te],this[Je],this[ai],(e,r)=>this[Sr](e,r))}[Sr](e,r){this[kn]&&this[Je]==="r+"&&e&&e.code==="ENOENT"?(this[Je]="w",this[wt]()):e?this[vr](e):(this[B]=r,this.emit("open",r),this[Ft]||this[Wo]())}end(e,r){return e&&this.write(e,r),this[si]=!0,!this[Ft]&&!this[Fe].length&&typeof this[B]=="number"&&this[br](null,0),this}write(e,r){return typeof e=="string"&&(e=Buffer.from(e,r)),this[si]?(this.emit("error",new Error("write() after end()")),!1):this[B]===void 0||this[Ft]||this[Fe].length?(this[Fe].push(e),this[Pn]=!0,!1):(this[Ft]=!0,this[Fn](e),!0)}[Fn](e){le.default.write(this[B],e,0,e.length,this[gt],(r,i)=>this[br](r,i))}[br](e,r){e?this[vr](e):(this[gt]!==void 0&&typeof r=="number"&&(this[gt]+=r),this[Fe].length?this[Wo]():(this[Ft]=!1,this[si]&&!this[Vo]?(this[Vo]=!0,this[Oe](),this.emit("finish")):this[Pn]&&(this[Pn]=!1,this.emit("drain"))))}[Wo](){if(this[Fe].length===0)this[si]&&this[br](null,0);else if(this[Fe].length===1)this[Fn](this[Fe].pop());else{let e=this[Fe];this[Fe]=[],zm(this[B],e,this[gt],(r,i)=>this[br](r,i))}}[Oe](){if(this[yt]&&typeof this[B]=="number"){let e=this[B];this[B]=void 0,le.default.close(e,r=>r?this.emit("error",r):this.emit("close"))}}},Dr=class extends et{[wt](){let e;if(this[kn]&&this[Je]==="r+")try{e=le.default.openSync(this[Te],this[Je],this[ai])}catch(r){if(r?.code==="ENOENT")return this[Je]="w",this[wt]();throw r}else e=le.default.openSync(this[Te],this[Je],this[ai]);this[Sr](null,e)}[Oe](){if(this[yt]&&typeof this[B]=="number"){let e=this[B];this[B]=void 0,le.default.closeSync(e),this.emit("close")}}[Fn](e){let r=!0;try{this[br](null,le.default.writeSync(this[B],e,0,e.length,this[gt])),r=!1}finally{if(r)try{this[Oe]()}catch{}}}};var Na=P(require("node:path"),1);var Gt=P(require("node:fs"),1),ts=require("path");var jm=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"],["onentry","onReadEntry"]]),vu=t=>!!t.sync&&!!t.file,Su=t=>!t.sync&&!!t.file,Du=t=>!!t.sync&&!t.file,Nu=t=>!t.sync&&!t.file;var Tu=t=>!!t.file;var Xm=t=>{let e=jm.get(t);return e||t},li=(t={})=>{if(!t)return{};let e={};for(let[r,i]of Object.entries(t)){let n=Xm(r);e[n]=i}return e.chmod===void 0&&e.noChmod===!1&&(e.chmod=!0),delete e.noChmod,e};var ke=(t,e,r,i,n)=>Object.assign((s=[],o,a)=>{Array.isArray(s)&&(o=s,s={}),typeof o=="function"&&(a=o,o=void 0),o?o=Array.from(o):o=[];let l=li(s);if(n?.(l,o),vu(l)){if(typeof a=="function")throw new TypeError("callback not supported for sync tar functions");return t(l,o)}else if(Su(l)){let c=e(l,o),u=a||void 0;return u?c.then(()=>u(),u):c}else if(Du(l)){if(typeof a=="function")throw new TypeError("callback not supported for sync tar functions");return r(l,o)}else if(Nu(l)){if(typeof a=="function")throw new TypeError("callback only supported with file option");return i(l,o)}else throw new Error("impossible options??")},{syncFile:t,asyncFile:e,syncNoFile:r,asyncNoFile:i,validate:n});var ju=require("events");var Un=P(require("assert"),1),rt=require("buffer");var Iu=P(require("zlib"),1);var Ou=P(require("zlib"),1),Vm=Ou.default.constants||{ZLIB_VERNUM:4736},tt=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},Vm));var Ru=rt.Buffer.concat,Ut=Symbol("_superWrite"),Nr=class extends Error{code;errno;constructor(e){super("zlib: "+e.message),this.code=e.code,this.errno=e.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+e.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}},Qo=Symbol("flushFlag"),Bn=class extends ue{#e=!1;#r=!1;#i;#s;#n;#t;#o;get sawError(){return this.#e}get handle(){return this.#t}get flushFlag(){return this.#i}constructor(e,r){if(!e||typeof e!="object")throw new TypeError("invalid options for ZlibBase constructor");super(e),this.#i=e.flush??0,this.#s=e.finishFlush??0,this.#n=e.fullFlushFlag??0;try{this.#t=new Iu.default[r](e)}catch(i){throw new Nr(i)}this.#o=i=>{this.#e||(this.#e=!0,this.close(),this.emit("error",i))},this.#t?.on("error",i=>this.#o(new Nr(i))),this.once("end",()=>this.close)}close(){this.#t&&(this.#t.close(),this.#t=void 0,this.emit("close"))}reset(){if(!this.#e)return(0,Un.default)(this.#t,"zlib binding closed"),this.#t.reset?.()}flush(e){this.ended||(typeof e!="number"&&(e=this.#n),this.write(Object.assign(rt.Buffer.alloc(0),{[Qo]:e})))}end(e,r,i){return typeof e=="function"&&(i=e,r=void 0,e=void 0),typeof r=="function"&&(i=r,r=void 0),e&&(r?this.write(e,r):this.write(e)),this.flush(this.#s),this.#r=!0,super.end(i)}get ended(){return this.#r}[Ut](e){return super.write(e)}write(e,r,i){if(typeof r=="function"&&(i=r,r="utf8"),typeof e=="string"&&(e=rt.Buffer.from(e,r)),this.#e)return;(0,Un.default)(this.#t,"zlib binding closed");let n=this.#t._handle,s=n.close;n.close=()=>{};let o=this.#t.close;this.#t.close=()=>{},rt.Buffer.concat=c=>c;let a;try{let c=typeof e[Qo]=="number"?e[Qo]:this.#i;a=this.#t._processChunk(e,c),rt.Buffer.concat=Ru}catch(c){rt.Buffer.concat=Ru,this.#o(new Nr(c))}finally{this.#t&&(this.#t._handle=n,n.close=s,this.#t.close=o,this.#t.removeAllListeners("error"))}this.#t&&this.#t.on("error",c=>this.#o(new Nr(c)));let l;if(a)if(Array.isArray(a)&&a.length>0){let c=a[0];l=this[Ut](rt.Buffer.from(c));for(let u=1;u<a.length;u++)l=this[Ut](a[u])}else l=this[Ut](rt.Buffer.from(a));return i&&i(),l}},zn=class extends Bn{#e;#r;constructor(e,r){e=e||{},e.flush=e.flush||tt.Z_NO_FLUSH,e.finishFlush=e.finishFlush||tt.Z_FINISH,e.fullFlushFlag=tt.Z_FULL_FLUSH,super(e,r),this.#e=e.level,this.#r=e.strategy}params(e,r){if(!this.sawError){if(!this.handle)throw new Error("cannot switch params when binding is closed");if(!this.handle.params)throw new Error("not supported in this implementation");if(this.#e!==e||this.#r!==r){this.flush(tt.Z_SYNC_FLUSH),(0,Un.default)(this.handle,"zlib binding closed");let i=this.handle.flush;this.handle.flush=(n,s)=>{typeof n=="function"&&(s=n,n=this.flushFlag),this.flush(n),s?.()};try{this.handle.params(e,r)}finally{this.handle.flush=i}this.handle&&(this.#e=e,this.#r=r)}}}};var jn=class extends zn{#e;constructor(e){super(e,"Gzip"),this.#e=e&&!!e.portable}[Ut](e){return this.#e?(this.#e=!1,e[9]=255,super[Ut](e)):super[Ut](e)}};var Xn=class extends zn{constructor(e){super(e,"Unzip")}},Vn=class extends Bn{constructor(e,r){e=e||{},e.flush=e.flush||tt.BROTLI_OPERATION_PROCESS,e.finishFlush=e.finishFlush||tt.BROTLI_OPERATION_FINISH,e.fullFlushFlag=tt.BROTLI_OPERATION_FLUSH,super(e,r)}},Wn=class extends Vn{constructor(e){super(e,"BrotliCompress")}},Hn=class extends Vn{constructor(e){super(e,"BrotliDecompress")}};var Tr=class t{tail;head;length=0;static create(e=[]){return new t(e)}constructor(e=[]){for(let r of e)this.push(r)}*[Symbol.iterator](){for(let e=this.head;e;e=e.next)yield e.value}removeNode(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");let r=e.next,i=e.prev;return r&&(r.prev=i),i&&(i.next=r),e===this.head&&(this.head=r),e===this.tail&&(this.tail=i),this.length--,e.next=void 0,e.prev=void 0,e.list=void 0,r}unshiftNode(e){if(e===this.head)return;e.list&&e.list.removeNode(e);let r=this.head;e.list=this,e.next=r,r&&(r.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}pushNode(e){if(e===this.tail)return;e.list&&e.list.removeNode(e);let r=this.tail;e.list=this,e.prev=r,r&&(r.next=e),this.tail=e,this.head||(this.head=e),this.length++}push(...e){for(let r=0,i=e.length;r<i;r++)Gm(this,e[r]);return this.length}unshift(...e){for(var r=0,i=e.length;r<i;r++)$m(this,e[r]);return this.length}pop(){if(!this.tail)return;let e=this.tail.value,r=this.tail;return this.tail=this.tail.prev,this.tail?this.tail.next=void 0:this.head=void 0,r.list=void 0,this.length--,e}shift(){if(!this.head)return;let e=this.head.value,r=this.head;return this.head=this.head.next,this.head?this.head.prev=void 0:this.tail=void 0,r.list=void 0,this.length--,e}forEach(e,r){r=r||this;for(let i=this.head,n=0;i;n++)e.call(r,i.value,n,this),i=i.next}forEachReverse(e,r){r=r||this;for(let i=this.tail,n=this.length-1;i;n--)e.call(r,i.value,n,this),i=i.prev}get(e){let r=0,i=this.head;for(;i&&r<e;r++)i=i.next;if(r===e&&i)return i.value}getReverse(e){let r=0,i=this.tail;for(;i&&r<e;r++)i=i.prev;if(r===e&&i)return i.value}map(e,r){r=r||this;let i=new t;for(let n=this.head;n;)i.push(e.call(r,n.value,this)),n=n.next;return i}mapReverse(e,r){r=r||this;var i=new t;for(let n=this.tail;n;)i.push(e.call(r,n.value,this)),n=n.prev;return i}reduce(e,r){let i,n=this.head;if(arguments.length>1)i=r;else if(this.head)n=this.head.next,i=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=0;n;s++)i=e(i,n.value,s),n=n.next;return i}reduceReverse(e,r){let i,n=this.tail;if(arguments.length>1)i=r;else if(this.tail)n=this.tail.prev,i=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(let s=this.length-1;n;s--)i=e(i,n.value,s),n=n.prev;return i}toArray(){let e=new Array(this.length);for(let r=0,i=this.head;i;r++)e[r]=i.value,i=i.next;return e}toArrayReverse(){let e=new Array(this.length);for(let r=0,i=this.tail;i;r++)e[r]=i.value,i=i.prev;return e}slice(e=0,r=this.length){r<0&&(r+=this.length),e<0&&(e+=this.length);let i=new t;if(r<e||r<0)return i;e<0&&(e=0),r>this.length&&(r=this.length);let n=this.head,s=0;for(s=0;n&&s<e;s++)n=n.next;for(;n&&s<r;s++,n=n.next)i.push(n.value);return i}sliceReverse(e=0,r=this.length){r<0&&(r+=this.length),e<0&&(e+=this.length);let i=new t;if(r<e||r<0)return i;e<0&&(e=0),r>this.length&&(r=this.length);let n=this.length,s=this.tail;for(;s&&n>r;n--)s=s.prev;for(;s&&n>e;n--,s=s.prev)i.push(s.value);return i}splice(e,r=0,...i){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);let n=this.head;for(let o=0;n&&o<e;o++)n=n.next;let s=[];for(let o=0;n&&o<r;o++)s.push(n.value),n=this.removeNode(n);n?n!==this.tail&&(n=n.prev):n=this.tail;for(let o of i)n=Hm(this,n,o);return s}reverse(){let e=this.head,r=this.tail;for(let i=e;i;i=i.prev){let n=i.prev;i.prev=i.next,i.next=n}return this.head=r,this.tail=e,this}};function Hm(t,e,r){let i=e,n=e?e.next:t.head,s=new ci(r,i,n,t);return s.next===void 0&&(t.tail=s),s.prev===void 0&&(t.head=s),t.length++,s}function Gm(t,e){t.tail=new ci(e,t.tail,void 0,t),t.head||(t.head=t.tail),t.length++}function $m(t,e){t.head=new ci(e,void 0,t.head,t),t.tail||(t.tail=t.head),t.length++}var ci=class{list;next;prev;value;constructor(e,r,i,n){this.list=n,this.value=e,r?(r.next=this,this.prev=r):this.prev=void 0,i?(i.prev=this,this.next=i):this.next=void 0}};var jt=require("node:path");var Cu=(t,e)=>{if(Number.isSafeInteger(t))t<0?Ym(t,e):Km(t,e);else throw Error("cannot encode number outside of javascript safe integer range");return e},Km=(t,e)=>{e[0]=128;for(var r=e.length;r>1;r--)e[r-1]=t&255,t=Math.floor(t/256)},Ym=(t,e)=>{e[0]=255;var r=!1;t=t*-1;for(var i=e.length;i>1;i--){var n=t&255;t=Math.floor(t/256),r?e[i-1]=Lu(n):n===0?e[i-1]=0:(r=!0,e[i-1]=Au(n))}},_u=t=>{let e=t[0],r=e===128?Qm(t.subarray(1,t.length)):e===255?Zm(t):null;if(r===null)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(r))throw Error("parsed number outside of javascript safe integer range");return r},Zm=t=>{for(var e=t.length,r=0,i=!1,n=e-1;n>-1;n--){var s=Number(t[n]),o;i?o=Lu(s):s===0?o=s:(i=!0,o=Au(s)),o!==0&&(r-=o*Math.pow(256,e-n-1))}return r},Qm=t=>{for(var e=t.length,r=0,i=e-1;i>-1;i--){var n=Number(t[i]);n!==0&&(r+=n*Math.pow(256,e-i-1))}return r},Lu=t=>(255^t)&255,Au=t=>(255^t)+1&255;var Gn=t=>$n.has(t);var $n=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]),Mu=new Map(Array.from($n).map(t=>[t[1],t[0]]));var ye=class{cksumValid=!1;needPax=!1;nullBlock=!1;block;path;mode;uid;gid;size;cksum;#e="Unsupported";linkpath;uname;gname;devmaj=0;devmin=0;atime;ctime;mtime;charset;comment;constructor(e,r=0,i,n){Buffer.isBuffer(e)?this.decode(e,r||0,i,n):e&&this.#r(e)}decode(e,r,i,n){if(r||(r=0),!e||!(e.length>=r+512))throw new Error("need 512 bytes for header");this.path=Bt(e,r,100),this.mode=Et(e,r+100,8),this.uid=Et(e,r+108,8),this.gid=Et(e,r+116,8),this.size=Et(e,r+124,12),this.mtime=Jo(e,r+136,12),this.cksum=Et(e,r+148,12),n&&this.#r(n,!0),i&&this.#r(i);let s=Bt(e,r+156,1);if(Gn(s)&&(this.#e=s||"0"),this.#e==="0"&&this.path.slice(-1)==="/"&&(this.#e="5"),this.#e==="5"&&(this.size=0),this.linkpath=Bt(e,r+157,100),e.subarray(r+257,r+265).toString()==="ustar\x0000")if(this.uname=Bt(e,r+265,32),this.gname=Bt(e,r+297,32),this.devmaj=Et(e,r+329,8)??0,this.devmin=Et(e,r+337,8)??0,e[r+475]!==0){let a=Bt(e,r+345,155);this.path=a+"/"+this.path}else{let a=Bt(e,r+345,130);a&&(this.path=a+"/"+this.path),this.atime=Jo(e,r+476,12),this.ctime=Jo(e,r+488,12)}let o=8*32;for(let a=r;a<r+148;a++)o+=e[a];for(let a=r+156;a<r+512;a++)o+=e[a];this.cksumValid=o===this.cksum,this.cksum===void 0&&o===8*32&&(this.nullBlock=!0)}#r(e,r=!1){Object.assign(this,Object.fromEntries(Object.entries(e).filter(([i,n])=>!(n==null||i==="path"&&r||i==="linkpath"&&r||i==="global"))))}encode(e,r=0){if(e||(e=this.block=Buffer.alloc(512)),this.#e==="Unsupported"&&(this.#e="0"),!(e.length>=r+512))throw new Error("need 512 bytes for header");let i=this.ctime||this.atime?130:155,n=ep(this.path||"",i),s=n[0],o=n[1];this.needPax=!!n[2],this.needPax=zt(e,r,100,s)||this.needPax,this.needPax=bt(e,r+100,8,this.mode)||this.needPax,this.needPax=bt(e,r+108,8,this.uid)||this.needPax,this.needPax=bt(e,r+116,8,this.gid)||this.needPax,this.needPax=bt(e,r+124,12,this.size)||this.needPax,this.needPax=ea(e,r+136,12,this.mtime)||this.needPax,e[r+156]=this.#e.charCodeAt(0),this.needPax=zt(e,r+157,100,this.linkpath)||this.needPax,e.write("ustar\x0000",r+257,8),this.needPax=zt(e,r+265,32,this.uname)||this.needPax,this.needPax=zt(e,r+297,32,this.gname)||this.needPax,this.needPax=bt(e,r+329,8,this.devmaj)||this.needPax,this.needPax=bt(e,r+337,8,this.devmin)||this.needPax,this.needPax=zt(e,r+345,i,o)||this.needPax,e[r+475]!==0?this.needPax=zt(e,r+345,155,o)||this.needPax:(this.needPax=zt(e,r+345,130,o)||this.needPax,this.needPax=ea(e,r+476,12,this.atime)||this.needPax,this.needPax=ea(e,r+488,12,this.ctime)||this.needPax);let a=8*32;for(let l=r;l<r+148;l++)a+=e[l];for(let l=r+156;l<r+512;l++)a+=e[l];return this.cksum=a,bt(e,r+148,8,this.cksum),this.cksumValid=!0,this.needPax}get type(){return this.#e==="Unsupported"?this.#e:$n.get(this.#e)}get typeKey(){return this.#e}set type(e){let r=String(Mu.get(e));if(Gn(r)||r==="Unsupported")this.#e=r;else if(Gn(e))this.#e=e;else throw new TypeError("invalid entry type: "+e)}},ep=(t,e)=>{let i=t,n="",s,o=jt.posix.parse(t).root||".";if(Buffer.byteLength(i)<100)s=[i,n,!1];else{n=jt.posix.dirname(i),i=jt.posix.basename(i);do Buffer.byteLength(i)<=100&&Buffer.byteLength(n)<=e?s=[i,n,!1]:Buffer.byteLength(i)>100&&Buffer.byteLength(n)<=e?s=[i.slice(0,99),n,!0]:(i=jt.posix.join(jt.posix.basename(n),i),n=jt.posix.dirname(n));while(n!==o&&s===void 0);s||(s=[t.slice(0,99),"",!0])}return s},Bt=(t,e,r)=>t.subarray(e,e+r).toString("utf8").replace(/\0.*/,""),Jo=(t,e,r)=>tp(Et(t,e,r)),tp=t=>t===void 0?void 0:new Date(t*1e3),Et=(t,e,r)=>Number(t[e])&128?_u(t.subarray(e,e+r)):ip(t,e,r),rp=t=>isNaN(t)?void 0:t,ip=(t,e,r)=>rp(parseInt(t.subarray(e,e+r).toString("utf8").replace(/\0.*$/,"").trim(),8)),np={12:8589934591,8:2097151},bt=(t,e,r,i)=>i===void 0?!1:i>np[r]||i<0?(Cu(i,t.subarray(e,e+r)),!0):(sp(t,e,r,i),!1),sp=(t,e,r,i)=>t.write(op(i,r),e,r,"ascii"),op=(t,e)=>ap(Math.floor(t).toString(8),e),ap=(t,e)=>(t.length===e-1?t:new Array(e-t.length-1).join("0")+t+" ")+"\0",ea=(t,e,r,i)=>i===void 0?!1:bt(t,e,r,i.getTime()/1e3),lp=new Array(156).join("\0"),zt=(t,e,r,i)=>i===void 0?!1:(t.write(i+lp,e,r,"utf8"),i.length!==Buffer.byteLength(i)||i.length>r);var Fu=require("node:path");var xt=class t{atime;mtime;ctime;charset;comment;gid;uid;gname;uname;linkpath;dev;ino;nlink;path;size;mode;global;constructor(e,r=!1){this.atime=e.atime,this.charset=e.charset,this.comment=e.comment,this.ctime=e.ctime,this.dev=e.dev,this.gid=e.gid,this.global=r,this.gname=e.gname,this.ino=e.ino,this.linkpath=e.linkpath,this.mtime=e.mtime,this.nlink=e.nlink,this.path=e.path,this.size=e.size,this.uid=e.uid,this.uname=e.uname}encode(){let e=this.encodeBody();if(e==="")return Buffer.allocUnsafe(0);let r=Buffer.byteLength(e),i=512*Math.ceil(1+r/512),n=Buffer.allocUnsafe(i);for(let s=0;s<512;s++)n[s]=0;new ye({path:("PaxHeader/"+(0,Fu.basename)(this.path??"")).slice(0,99),mode:this.mode||420,uid:this.uid,gid:this.gid,size:r,mtime:this.mtime,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime,ctime:this.ctime}).encode(n),n.write(e,512,r,"utf8");for(let s=r+512;s<n.length;s++)n[s]=0;return n}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(e){if(this[e]===void 0)return"";let r=this[e],i=r instanceof Date?r.getTime()/1e3:r,n=" "+(e==="dev"||e==="ino"||e==="nlink"?"SCHILY.":"")+e+"="+i+`
`,s=Buffer.byteLength(n),o=Math.floor(Math.log(s)/Math.log(10))+1;return s+o>=Math.pow(10,o)&&(o+=1),o+s+n}static parse(e,r,i=!1){return new t(cp(hp(e),r),i)}},cp=(t,e)=>e?Object.assign({},e,t):t,hp=t=>t.replace(/\n$/,"").split(`
`).reduce(up,Object.create(null)),up=(t,e)=>{let r=parseInt(e,10);if(r!==Buffer.byteLength(e)+1)return t;e=e.slice((r+" ").length);let i=e.split("="),n=i.shift();if(!n)return t;let s=n.replace(/^SCHILY\.(dev|ino|nlink)/,"$1"),o=i.join("=");return t[s]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(s)?new Date(Number(o)*1e3):/^[0-9]+$/.test(o)?+o:o,t};var fp=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,A=fp!=="win32"?t=>t:t=>t&&t.replace(/\\/g,"/");var Or=class extends ue{extended;globalExtended;header;startBlockSize;blockRemain;remain;type;meta=!1;ignore=!1;path;mode;uid;gid;uname;gname;size=0;mtime;atime;ctime;linkpath;dev;ino;nlink;invalid=!1;absolute;unsupported=!1;constructor(e,r,i){switch(super({}),this.pause(),this.extended=r,this.globalExtended=i,this.header=e,this.remain=e.size??0,this.startBlockSize=512*Math.ceil(this.remain/512),this.blockRemain=this.startBlockSize,this.type=e.type,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}if(!e.path)throw new Error("no path provided for tar.ReadEntry");this.path=A(e.path),this.mode=e.mode,this.mode&&(this.mode=this.mode&4095),this.uid=e.uid,this.gid=e.gid,this.uname=e.uname,this.gname=e.gname,this.size=this.remain,this.mtime=e.mtime,this.atime=e.atime,this.ctime=e.ctime,this.linkpath=e.linkpath?A(e.linkpath):void 0,this.uname=e.uname,this.gname=e.gname,r&&this.#e(r),i&&this.#e(i,!0)}write(e){let r=e.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");let i=this.remain,n=this.blockRemain;return this.remain=Math.max(0,i-r),this.blockRemain=Math.max(0,n-r),this.ignore?!0:i>=r?super.write(e):super.write(e.subarray(0,i))}#e(e,r=!1){e.path&&(e.path=A(e.path)),e.linkpath&&(e.linkpath=A(e.linkpath)),Object.assign(this,Object.fromEntries(Object.entries(e).filter(([i,n])=>!(n==null||i==="path"&&r))))}};var Xt=(t,e,r,i={})=>{t.file&&(i.file=t.file),t.cwd&&(i.cwd=t.cwd),i.code=r instanceof Error&&r.code||e,i.tarCode=e,!t.strict&&i.recoverable!==!1?(r instanceof Error&&(i=Object.assign(r,i),r=r.message),t.emit("warn",e,r,i)):r instanceof Error?t.emit("error",Object.assign(r,i)):t.emit("error",Object.assign(new Error(`${e}: ${r}`),i))};var dp=1024*1024,ta=Buffer.from([31,139]),xe=Symbol("state"),Vt=Symbol("writeEntry"),it=Symbol("readEntry"),ra=Symbol("nextEntry"),ku=Symbol("processEntry"),qe=Symbol("extendedHeader"),hi=Symbol("globalExtendedHeader"),vt=Symbol("meta"),qu=Symbol("emitMeta"),V=Symbol("buffer"),nt=Symbol("queue"),St=Symbol("ended"),ia=Symbol("emittedEnd"),Wt=Symbol("emit"),$=Symbol("unzip"),Kn=Symbol("consumeChunk"),Yn=Symbol("consumeChunkSub"),na=Symbol("consumeBody"),Uu=Symbol("consumeMeta"),Bu=Symbol("consumeHeader"),ui=Symbol("consuming"),sa=Symbol("bufferConcat"),Zn=Symbol("maybeEnd"),Rr=Symbol("writing"),Dt=Symbol("aborted"),Qn=Symbol("onDone"),Ht=Symbol("sawValidEntry"),Jn=Symbol("sawNullBlock"),es=Symbol("sawEOF"),zu=Symbol("closeStream"),mp=()=>!0,st=class extends ju.EventEmitter{file;strict;maxMetaEntrySize;filter;brotli;writable=!0;readable=!1;[nt]=new Tr;[V];[it];[Vt];[xe]="begin";[vt]="";[qe];[hi];[St]=!1;[$];[Dt]=!1;[Ht];[Jn]=!1;[es]=!1;[Rr]=!1;[ui]=!1;[ia]=!1;constructor(e={}){super(),this.file=e.file||"",this.on(Qn,()=>{(this[xe]==="begin"||this[Ht]===!1)&&this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}),e.ondone?this.on(Qn,e.ondone):this.on(Qn,()=>{this.emit("prefinish"),this.emit("finish"),this.emit("end")}),this.strict=!!e.strict,this.maxMetaEntrySize=e.maxMetaEntrySize||dp,this.filter=typeof e.filter=="function"?e.filter:mp;let r=e.file&&(e.file.endsWith(".tar.br")||e.file.endsWith(".tbr"));this.brotli=!e.gzip&&e.brotli!==void 0?e.brotli:r?void 0:!1,this.on("end",()=>this[zu]()),typeof e.onwarn=="function"&&this.on("warn",e.onwarn),typeof e.onReadEntry=="function"&&this.on("entry",e.onReadEntry)}warn(e,r,i={}){Xt(this,e,r,i)}[Bu](e,r){this[Ht]===void 0&&(this[Ht]=!1);let i;try{i=new ye(e,r,this[qe],this[hi])}catch(n){return this.warn("TAR_ENTRY_INVALID",n)}if(i.nullBlock)this[Jn]?(this[es]=!0,this[xe]==="begin"&&(this[xe]="header"),this[Wt]("eof")):(this[Jn]=!0,this[Wt]("nullBlock"));else if(this[Jn]=!1,!i.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:i});else if(!i.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:i});else{let n=i.type;if(/^(Symbolic)?Link$/.test(n)&&!i.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:i});else if(!/^(Symbolic)?Link$/.test(n)&&!/^(Global)?ExtendedHeader$/.test(n)&&i.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:i});else{let s=this[Vt]=new Or(i,this[qe],this[hi]);if(!this[Ht])if(s.remain){let o=()=>{s.invalid||(this[Ht]=!0)};s.on("end",o)}else this[Ht]=!0;s.meta?s.size>this.maxMetaEntrySize?(s.ignore=!0,this[Wt]("ignoredEntry",s),this[xe]="ignore",s.resume()):s.size>0&&(this[vt]="",s.on("data",o=>this[vt]+=o),this[xe]="meta"):(this[qe]=void 0,s.ignore=s.ignore||!this.filter(s.path,s),s.ignore?(this[Wt]("ignoredEntry",s),this[xe]=s.remain?"ignore":"header",s.resume()):(s.remain?this[xe]="body":(this[xe]="header",s.end()),this[it]?this[nt].push(s):(this[nt].push(s),this[ra]())))}}}[zu](){queueMicrotask(()=>this.emit("close"))}[ku](e){let r=!0;if(!e)this[it]=void 0,r=!1;else if(Array.isArray(e)){let[i,...n]=e;this.emit(i,...n)}else this[it]=e,this.emit("entry",e),e.emittedEnd||(e.on("end",()=>this[ra]()),r=!1);return r}[ra](){do;while(this[ku](this[nt].shift()));if(!this[nt].length){let e=this[it];!e||e.flowing||e.size===e.remain?this[Rr]||this.emit("drain"):e.once("drain",()=>this.emit("drain"))}}[na](e,r){let i=this[Vt];if(!i)throw new Error("attempt to consume body without entry??");let n=i.blockRemain??0,s=n>=e.length&&r===0?e:e.subarray(r,r+n);return i.write(s),i.blockRemain||(this[xe]="header",this[Vt]=void 0,i.end()),s.length}[Uu](e,r){let i=this[Vt],n=this[na](e,r);return!this[Vt]&&i&&this[qu](i),n}[Wt](e,r,i){!this[nt].length&&!this[it]?this.emit(e,r,i):this[nt].push([e,r,i])}[qu](e){switch(this[Wt]("meta",this[vt]),e.type){case"ExtendedHeader":case"OldExtendedHeader":this[qe]=xt.parse(this[vt],this[qe],!1);break;case"GlobalExtendedHeader":this[hi]=xt.parse(this[vt],this[hi],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":{let r=this[qe]??Object.create(null);this[qe]=r,r.path=this[vt].replace(/\0.*/,"");break}case"NextFileHasLongLinkpath":{let r=this[qe]||Object.create(null);this[qe]=r,r.linkpath=this[vt].replace(/\0.*/,"");break}default:throw new Error("unknown meta: "+e.type)}}abort(e){this[Dt]=!0,this.emit("abort",e),this.warn("TAR_ABORT",e,{recoverable:!1})}write(e,r,i){if(typeof r=="function"&&(i=r,r=void 0),typeof e=="string"&&(e=Buffer.from(e,typeof r=="string"?r:"utf8")),this[Dt])return i?.(),!1;if((this[$]===void 0||this.brotli===void 0&&this[$]===!1)&&e){if(this[V]&&(e=Buffer.concat([this[V],e]),this[V]=void 0),e.length<ta.length)return this[V]=e,i?.(),!0;for(let a=0;this[$]===void 0&&a<ta.length;a++)e[a]!==ta[a]&&(this[$]=!1);let o=this.brotli===void 0;if(this[$]===!1&&o)if(e.length<512)if(this[St])this.brotli=!0;else return this[V]=e,i?.(),!0;else try{new ye(e.subarray(0,512)),this.brotli=!1}catch{this.brotli=!0}if(this[$]===void 0||this[$]===!1&&this.brotli){let a=this[St];this[St]=!1,this[$]=this[$]===void 0?new Xn({}):new Hn({}),this[$].on("data",c=>this[Kn](c)),this[$].on("error",c=>this.abort(c)),this[$].on("end",()=>{this[St]=!0,this[Kn]()}),this[Rr]=!0;let l=!!this[$][a?"end":"write"](e);return this[Rr]=!1,i?.(),l}}this[Rr]=!0,this[$]?this[$].write(e):this[Kn](e),this[Rr]=!1;let s=this[nt].length?!1:this[it]?this[it].flowing:!0;return!s&&!this[nt].length&&this[it]?.once("drain",()=>this.emit("drain")),i?.(),s}[sa](e){e&&!this[Dt]&&(this[V]=this[V]?Buffer.concat([this[V],e]):e)}[Zn](){if(this[St]&&!this[ia]&&!this[Dt]&&!this[ui]){this[ia]=!0;let e=this[Vt];if(e&&e.blockRemain){let r=this[V]?this[V].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${e.blockRemain} more bytes, only ${r} available)`,{entry:e}),this[V]&&e.write(this[V]),e.end()}this[Wt](Qn)}}[Kn](e){if(this[ui]&&e)this[sa](e);else if(!e&&!this[V])this[Zn]();else if(e){if(this[ui]=!0,this[V]){this[sa](e);let r=this[V];this[V]=void 0,this[Yn](r)}else this[Yn](e);for(;this[V]&&this[V]?.length>=512&&!this[Dt]&&!this[es];){let r=this[V];this[V]=void 0,this[Yn](r)}this[ui]=!1}(!this[V]||this[St])&&this[Zn]()}[Yn](e){let r=0,i=e.length;for(;r+512<=i&&!this[Dt]&&!this[es];)switch(this[xe]){case"begin":case"header":this[Bu](e,r),r+=512;break;case"ignore":case"body":r+=this[na](e,r);break;case"meta":r+=this[Uu](e,r);break;default:throw new Error("invalid state: "+this[xe])}r<i&&(this[V]?this[V]=Buffer.concat([e.subarray(r),this[V]]):this[V]=e.subarray(r))}end(e,r,i){return typeof e=="function"&&(i=e,r=void 0,e=void 0),typeof r=="function"&&(i=r,r=void 0),typeof e=="string"&&(e=Buffer.from(e,r)),i&&this.once("finish",i),this[Dt]||(this[$]?(e&&this[$].write(e),this[$].end()):(this[St]=!0,this.brotli===void 0&&(e=e||Buffer.alloc(0)),e&&this.write(e),this[Zn]())),this}};var Ue=t=>{let e=t.length-1,r=-1;for(;e>-1&&t.charAt(e)==="/";)r=e,e--;return r===-1?t:t.slice(0,r)};var pp=t=>{let e=t.onReadEntry;t.onReadEntry=e?r=>{e(r),r.resume()}:r=>r.resume()},oa=(t,e)=>{let r=new Map(e.map(s=>[Ue(s),!0])),i=t.filter,n=(s,o="")=>{let a=o||(0,ts.parse)(s).root||".",l;if(s===a)l=!1;else{let c=r.get(s);c!==void 0?l=c:l=n((0,ts.dirname)(s),a)}return r.set(s,l),l};t.filter=i?(s,o)=>i(s,o)&&n(Ue(s)):s=>n(Ue(s))},gp=t=>{let e=new st(t),r=t.file,i;try{let n=Gt.default.statSync(r),s=t.maxReadSize||16*1024*1024;if(n.size<s)e.end(Gt.default.readFileSync(r));else{let o=0,a=Buffer.allocUnsafe(s);for(i=Gt.default.openSync(r,"r");o<n.size;){let l=Gt.default.readSync(i,a,0,s,o);o+=l,e.write(a.subarray(0,l))}e.end()}}finally{if(typeof i=="number")try{Gt.default.closeSync(i)}catch{}}},yp=(t,e)=>{let r=new st(t),i=t.maxReadSize||16*1024*1024,n=t.file;return new Promise((o,a)=>{r.on("error",a),r.on("end",o),Gt.default.stat(n,(l,c)=>{if(l)a(l);else{let u=new qt(n,{readSize:i,size:c.size});u.on("error",a),u.pipe(r)}})})},$t=ke(gp,yp,t=>new st(t),t=>new st(t),(t,e)=>{e?.length&&oa(t,e),t.noResume||pp(t)});var yi=P(require("fs"),1);var Re=P(require("fs"),1);var ua=P(require("path"),1);var aa=(t,e,r)=>(t&=4095,r&&(t=(t|384)&-19),e&&(t&256&&(t|=64),t&32&&(t|=8),t&4&&(t|=1)),t);var Vu=require("node:path"),{isAbsolute:wp,parse:Xu}=Vu.win32,fi=t=>{let e="",r=Xu(t);for(;wp(t)||r.root;){let i=t.charAt(0)==="/"&&t.slice(0,4)!=="//?/"?"/":r.root;t=t.slice(i.length),e+=i,r=Xu(t)}return[e,t]};var rs=["|","<",">","?",":"],la=rs.map(t=>String.fromCharCode(61440+t.charCodeAt(0))),Ep=new Map(rs.map((t,e)=>[t,la[e]])),bp=new Map(la.map((t,e)=>[t,rs[e]])),ca=t=>rs.reduce((e,r)=>e.split(r).join(Ep.get(r)),t),Wu=t=>la.reduce((e,r)=>e.split(r).join(bp.get(r)),t);var Zu=(t,e)=>e?(t=A(t).replace(/^\.(\/|$)/,""),Ue(e)+"/"+t):A(t),xp=16*1024*1024,Gu=Symbol("process"),$u=Symbol("file"),Ku=Symbol("directory"),fa=Symbol("symlink"),Yu=Symbol("hardlink"),di=Symbol("header"),is=Symbol("read"),da=Symbol("lstat"),ns=Symbol("onlstat"),ma=Symbol("onread"),pa=Symbol("onreadlink"),ga=Symbol("openfile"),ya=Symbol("onopenfile"),Nt=Symbol("close"),ss=Symbol("mode"),wa=Symbol("awaitDrain"),ha=Symbol("ondrain"),Be=Symbol("prefix"),mi=class extends ue{path;portable;myuid=process.getuid&&process.getuid()||0;myuser=process.env.USER||"";maxReadSize;linkCache;statCache;preservePaths;cwd;strict;mtime;noPax;noMtime;prefix;fd;blockLen=0;blockRemain=0;buf;pos=0;remain=0;length=0;offset=0;win32;absolute;header;type;linkpath;stat;onWriteEntry;#e=!1;constructor(e,r={}){let i=li(r);super(),this.path=A(e),this.portable=!!i.portable,this.maxReadSize=i.maxReadSize||xp,this.linkCache=i.linkCache||new Map,this.statCache=i.statCache||new Map,this.preservePaths=!!i.preservePaths,this.cwd=A(i.cwd||process.cwd()),this.strict=!!i.strict,this.noPax=!!i.noPax,this.noMtime=!!i.noMtime,this.mtime=i.mtime,this.prefix=i.prefix?A(i.prefix):void 0,this.onWriteEntry=i.onWriteEntry,typeof i.onwarn=="function"&&this.on("warn",i.onwarn);let n=!1;if(!this.preservePaths){let[o,a]=fi(this.path);o&&typeof a=="string"&&(this.path=a,n=o)}this.win32=!!i.win32||process.platform==="win32",this.win32&&(this.path=Wu(this.path.replace(/\\/g,"/")),e=e.replace(/\\/g,"/")),this.absolute=A(i.absolute||ua.default.resolve(this.cwd,e)),this.path===""&&(this.path="./"),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path});let s=this.statCache.get(this.absolute);s?this[ns](s):this[da]()}warn(e,r,i={}){return Xt(this,e,r,i)}emit(e,...r){return e==="error"&&(this.#e=!0),super.emit(e,...r)}[da](){Re.default.lstat(this.absolute,(e,r)=>{if(e)return this.emit("error",e);this[ns](r)})}[ns](e){this.statCache.set(this.absolute,e),this.stat=e,e.isFile()||(e.size=0),this.type=vp(e),this.emit("stat",e),this[Gu]()}[Gu](){switch(this.type){case"File":return this[$u]();case"Directory":return this[Ku]();case"SymbolicLink":return this[fa]();default:return this.end()}}[ss](e){return aa(e,this.type==="Directory",this.portable)}[Be](e){return Zu(e,this.prefix)}[di](){if(!this.stat)throw new Error("cannot write header before stat");this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.onWriteEntry?.(this),this.header=new ye({path:this[Be](this.path),linkpath:this.type==="Link"&&this.linkpath!==void 0?this[Be](this.linkpath):this.linkpath,mode:this[ss](this.stat.mode),uid:this.portable?void 0:this.stat.uid,gid:this.portable?void 0:this.stat.gid,size:this.stat.size,mtime:this.noMtime?void 0:this.mtime||this.stat.mtime,type:this.type==="Unsupported"?void 0:this.type,uname:this.portable?void 0:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?void 0:this.stat.atime,ctime:this.portable?void 0:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new xt({atime:this.portable?void 0:this.header.atime,ctime:this.portable?void 0:this.header.ctime,gid:this.portable?void 0:this.header.gid,mtime:this.noMtime?void 0:this.mtime||this.header.mtime,path:this[Be](this.path),linkpath:this.type==="Link"&&this.linkpath!==void 0?this[Be](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?void 0:this.header.uid,uname:this.portable?void 0:this.header.uname,dev:this.portable?void 0:this.stat.dev,ino:this.portable?void 0:this.stat.ino,nlink:this.portable?void 0:this.stat.nlink}).encode());let e=this.header?.block;if(!e)throw new Error("failed to encode header");super.write(e)}[Ku](){if(!this.stat)throw new Error("cannot create directory entry without stat");this.path.slice(-1)!=="/"&&(this.path+="/"),this.stat.size=0,this[di](),this.end()}[fa](){Re.default.readlink(this.absolute,(e,r)=>{if(e)return this.emit("error",e);this[pa](r)})}[pa](e){this.linkpath=A(e),this[di](),this.end()}[Yu](e){if(!this.stat)throw new Error("cannot create link entry without stat");this.type="Link",this.linkpath=A(ua.default.relative(this.cwd,e)),this.stat.size=0,this[di](),this.end()}[$u](){if(!this.stat)throw new Error("cannot create file entry without stat");if(this.stat.nlink>1){let e=`${this.stat.dev}:${this.stat.ino}`,r=this.linkCache.get(e);if(r?.indexOf(this.cwd)===0)return this[Yu](r);this.linkCache.set(e,this.absolute)}if(this[di](),this.stat.size===0)return this.end();this[ga]()}[ga](){Re.default.open(this.absolute,"r",(e,r)=>{if(e)return this.emit("error",e);this[ya](r)})}[ya](e){if(this.fd=e,this.#e)return this[Nt]();if(!this.stat)throw new Error("should stat before calling onopenfile");this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;let r=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(r),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[is]()}[is](){let{fd:e,buf:r,offset:i,length:n,pos:s}=this;if(e===void 0||r===void 0)throw new Error("cannot read file without first opening");Re.default.read(e,r,i,n,s,(o,a)=>{if(o)return this[Nt](()=>this.emit("error",o));this[ma](a)})}[Nt](e=()=>{}){this.fd!==void 0&&Re.default.close(this.fd,e)}[ma](e){if(e<=0&&this.remain>0){let n=Object.assign(new Error("encountered unexpected EOF"),{path:this.absolute,syscall:"read",code:"EOF"});return this[Nt](()=>this.emit("error",n))}if(e>this.remain){let n=Object.assign(new Error("did not encounter expected EOF"),{path:this.absolute,syscall:"read",code:"EOF"});return this[Nt](()=>this.emit("error",n))}if(!this.buf)throw new Error("should have created buffer prior to reading");if(e===this.remain)for(let n=e;n<this.length&&e<this.blockRemain;n++)this.buf[n+this.offset]=0,e++,this.remain++;let r=this.offset===0&&e===this.buf.length?this.buf:this.buf.subarray(this.offset,this.offset+e);this.write(r)?this[ha]():this[wa](()=>this[ha]())}[wa](e){this.once("drain",e)}write(e,r,i){if(typeof r=="function"&&(i=r,r=void 0),typeof e=="string"&&(e=Buffer.from(e,typeof r=="string"?r:"utf8")),this.blockRemain<e.length){let n=Object.assign(new Error("writing more data than expected"),{path:this.absolute});return this.emit("error",n)}return this.remain-=e.length,this.blockRemain-=e.length,this.pos+=e.length,this.offset+=e.length,super.write(e,null,i)}[ha](){if(!this.remain)return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),this[Nt](e=>e?this.emit("error",e):this.end());if(!this.buf)throw new Error("buffer lost somehow in ONDRAIN");this.offset>=this.length&&(this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[is]()}},os=class extends mi{sync=!0;[da](){this[ns](Re.default.lstatSync(this.absolute))}[fa](){this[pa](Re.default.readlinkSync(this.absolute))}[ga](){this[ya](Re.default.openSync(this.absolute,"r"))}[is](){let e=!0;try{let{fd:r,buf:i,offset:n,length:s,pos:o}=this;if(r===void 0||i===void 0)throw new Error("fd and buf must be set in READ method");let a=Re.default.readSync(r,i,n,s,o);this[ma](a),e=!1}finally{if(e)try{this[Nt](()=>{})}catch{}}}[wa](e){e()}[Nt](e=()=>{}){this.fd!==void 0&&Re.default.closeSync(this.fd),e()}},as=class extends ue{blockLen=0;blockRemain=0;buf=0;pos=0;remain=0;length=0;preservePaths;portable;strict;noPax;noMtime;readEntry;type;prefix;path;mode;uid;gid;uname;gname;header;mtime;atime;ctime;linkpath;size;onWriteEntry;warn(e,r,i={}){return Xt(this,e,r,i)}constructor(e,r={}){let i=li(r);super(),this.preservePaths=!!i.preservePaths,this.portable=!!i.portable,this.strict=!!i.strict,this.noPax=!!i.noPax,this.noMtime=!!i.noMtime,this.onWriteEntry=i.onWriteEntry,this.readEntry=e;let{type:n}=e;if(n==="Unsupported")throw new Error("writing entry that should be ignored");this.type=n,this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.prefix=i.prefix,this.path=A(e.path),this.mode=e.mode!==void 0?this[ss](e.mode):void 0,this.uid=this.portable?void 0:e.uid,this.gid=this.portable?void 0:e.gid,this.uname=this.portable?void 0:e.uname,this.gname=this.portable?void 0:e.gname,this.size=e.size,this.mtime=this.noMtime?void 0:i.mtime||e.mtime,this.atime=this.portable?void 0:e.atime,this.ctime=this.portable?void 0:e.ctime,this.linkpath=e.linkpath!==void 0?A(e.linkpath):void 0,typeof i.onwarn=="function"&&this.on("warn",i.onwarn);let s=!1;if(!this.preservePaths){let[a,l]=fi(this.path);a&&typeof l=="string"&&(this.path=l,s=a)}this.remain=e.size,this.blockRemain=e.startBlockSize,this.onWriteEntry?.(this),this.header=new ye({path:this[Be](this.path),linkpath:this.type==="Link"&&this.linkpath!==void 0?this[Be](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?void 0:this.uid,gid:this.portable?void 0:this.gid,size:this.size,mtime:this.noMtime?void 0:this.mtime,type:this.type,uname:this.portable?void 0:this.uname,atime:this.portable?void 0:this.atime,ctime:this.portable?void 0:this.ctime}),s&&this.warn("TAR_ENTRY_INFO",`stripping ${s} from absolute path`,{entry:this,path:s+this.path}),this.header.encode()&&!this.noPax&&super.write(new xt({atime:this.portable?void 0:this.atime,ctime:this.portable?void 0:this.ctime,gid:this.portable?void 0:this.gid,mtime:this.noMtime?void 0:this.mtime,path:this[Be](this.path),linkpath:this.type==="Link"&&this.linkpath!==void 0?this[Be](this.linkpath):this.linkpath,size:this.size,uid:this.portable?void 0:this.uid,uname:this.portable?void 0:this.uname,dev:this.portable?void 0:this.readEntry.dev,ino:this.portable?void 0:this.readEntry.ino,nlink:this.portable?void 0:this.readEntry.nlink}).encode());let o=this.header?.block;if(!o)throw new Error("failed to encode header");super.write(o),e.pipe(this)}[Be](e){return Zu(e,this.prefix)}[ss](e){return aa(e,this.type==="Directory",this.portable)}write(e,r,i){typeof r=="function"&&(i=r,r=void 0),typeof e=="string"&&(e=Buffer.from(e,typeof r=="string"?r:"utf8"));let n=e.length;if(n>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=n,super.write(e,i)}end(e,r,i){return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),typeof e=="function"&&(i=e,r=void 0,e=void 0),typeof r=="function"&&(i=r,r=void 0),typeof e=="string"&&(e=Buffer.from(e,r??"utf8")),i&&this.once("finish",i),e?super.end(e,i):super.end(i),this}},vp=t=>t.isFile()?"File":t.isDirectory()?"Directory":t.isSymbolicLink()?"SymbolicLink":"Unsupported";var Da=P(require("path"),1);var ds=class{path;absolute;entry;stat;readdir;pending=!1;ignore=!1;piped=!1;constructor(e,r){this.path=e||"./",this.absolute=r}},Qu=Buffer.alloc(1024),ls=Symbol("onStat"),pi=Symbol("ended"),Ie=Symbol("queue"),Ir=Symbol("current"),Kt=Symbol("process"),gi=Symbol("processing"),Ju=Symbol("processJob"),Ce=Symbol("jobs"),Ea=Symbol("jobDone"),cs=Symbol("addFSEntry"),ef=Symbol("addTarEntry"),va=Symbol("stat"),Sa=Symbol("readdir"),hs=Symbol("onreaddir"),us=Symbol("pipe"),tf=Symbol("entry"),ba=Symbol("entryOpt"),fs=Symbol("writeEntryClass"),rf=Symbol("write"),xa=Symbol("ondrain"),Tt=class extends ue{opt;cwd;maxReadSize;preservePaths;strict;noPax;prefix;linkCache;statCache;file;portable;zip;readdirCache;noDirRecurse;follow;noMtime;mtime;filter;jobs;[fs];onWriteEntry;[Ie];[Ce]=0;[gi]=!1;[pi]=!1;constructor(e={}){if(super(),this.opt=e,this.file=e.file||"",this.cwd=e.cwd||process.cwd(),this.maxReadSize=e.maxReadSize,this.preservePaths=!!e.preservePaths,this.strict=!!e.strict,this.noPax=!!e.noPax,this.prefix=A(e.prefix||""),this.linkCache=e.linkCache||new Map,this.statCache=e.statCache||new Map,this.readdirCache=e.readdirCache||new Map,this.onWriteEntry=e.onWriteEntry,this[fs]=mi,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),this.portable=!!e.portable,e.gzip||e.brotli){if(e.gzip&&e.brotli)throw new TypeError("gzip and brotli are mutually exclusive");if(e.gzip&&(typeof e.gzip!="object"&&(e.gzip={}),this.portable&&(e.gzip.portable=!0),this.zip=new jn(e.gzip)),e.brotli&&(typeof e.brotli!="object"&&(e.brotli={}),this.zip=new Wn(e.brotli)),!this.zip)throw new Error("impossible");let r=this.zip;r.on("data",i=>super.write(i)),r.on("end",()=>super.end()),r.on("drain",()=>this[xa]()),this.on("resume",()=>r.resume())}else this.on("drain",this[xa]);this.noDirRecurse=!!e.noDirRecurse,this.follow=!!e.follow,this.noMtime=!!e.noMtime,e.mtime&&(this.mtime=e.mtime),this.filter=typeof e.filter=="function"?e.filter:()=>!0,this[Ie]=new Tr,this[Ce]=0,this.jobs=Number(e.jobs)||4,this[gi]=!1,this[pi]=!1}[rf](e){return super.write(e)}add(e){return this.write(e),this}end(e,r,i){return typeof e=="function"&&(i=e,e=void 0),typeof r=="function"&&(i=r,r=void 0),e&&this.add(e),this[pi]=!0,this[Kt](),i&&i(),this}write(e){if(this[pi])throw new Error("write after end");return e instanceof Or?this[ef](e):this[cs](e),this.flowing}[ef](e){let r=A(Da.default.resolve(this.cwd,e.path));if(!this.filter(e.path,e))e.resume();else{let i=new ds(e.path,r);i.entry=new as(e,this[ba](i)),i.entry.on("end",()=>this[Ea](i)),this[Ce]+=1,this[Ie].push(i)}this[Kt]()}[cs](e){let r=A(Da.default.resolve(this.cwd,e));this[Ie].push(new ds(e,r)),this[Kt]()}[va](e){e.pending=!0,this[Ce]+=1;let r=this.follow?"stat":"lstat";yi.default[r](e.absolute,(i,n)=>{e.pending=!1,this[Ce]-=1,i?this.emit("error",i):this[ls](e,n)})}[ls](e,r){this.statCache.set(e.absolute,r),e.stat=r,this.filter(e.path,r)||(e.ignore=!0),this[Kt]()}[Sa](e){e.pending=!0,this[Ce]+=1,yi.default.readdir(e.absolute,(r,i)=>{if(e.pending=!1,this[Ce]-=1,r)return this.emit("error",r);this[hs](e,i)})}[hs](e,r){this.readdirCache.set(e.absolute,r),e.readdir=r,this[Kt]()}[Kt](){if(!this[gi]){this[gi]=!0;for(let e=this[Ie].head;e&&this[Ce]<this.jobs;e=e.next)if(this[Ju](e.value),e.value.ignore){let r=e.next;this[Ie].removeNode(e),e.next=r}this[gi]=!1,this[pi]&&!this[Ie].length&&this[Ce]===0&&(this.zip?this.zip.end(Qu):(super.write(Qu),super.end()))}}get[Ir](){return this[Ie]&&this[Ie].head&&this[Ie].head.value}[Ea](e){this[Ie].shift(),this[Ce]-=1,this[Kt]()}[Ju](e){if(!e.pending){if(e.entry){e===this[Ir]&&!e.piped&&this[us](e);return}if(!e.stat){let r=this.statCache.get(e.absolute);r?this[ls](e,r):this[va](e)}if(e.stat&&!e.ignore){if(!this.noDirRecurse&&e.stat.isDirectory()&&!e.readdir){let r=this.readdirCache.get(e.absolute);if(r?this[hs](e,r):this[Sa](e),!e.readdir)return}if(e.entry=this[tf](e),!e.entry){e.ignore=!0;return}e===this[Ir]&&!e.piped&&this[us](e)}}}[ba](e){return{onwarn:(r,i,n)=>this.warn(r,i,n),noPax:this.noPax,cwd:this.cwd,absolute:e.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix,onWriteEntry:this.onWriteEntry}}[tf](e){this[Ce]+=1;try{return new this[fs](e.path,this[ba](e)).on("end",()=>this[Ea](e)).on("error",i=>this.emit("error",i))}catch(r){this.emit("error",r)}}[xa](){this[Ir]&&this[Ir].entry&&this[Ir].entry.resume()}[us](e){e.piped=!0,e.readdir&&e.readdir.forEach(n=>{let s=e.path,o=s==="./"?"":s.replace(/\/*$/,"/");this[cs](o+n)});let r=e.entry,i=this.zip;if(!r)throw new Error("cannot pipe without source");i?r.on("data",n=>{i.write(n)||r.pause()}):r.on("data",n=>{super.write(n)||r.pause()})}pause(){return this.zip&&this.zip.pause(),super.pause()}warn(e,r,i={}){Xt(this,e,r,i)}},Yt=class extends Tt{sync=!0;constructor(e){super(e),this[fs]=os}pause(){}resume(){}[va](e){let r=this.follow?"statSync":"lstatSync";this[ls](e,yi.default[r](e.absolute))}[Sa](e){this[hs](e,yi.default.readdirSync(e.absolute))}[us](e){let r=e.entry,i=this.zip;if(e.readdir&&e.readdir.forEach(n=>{let s=e.path,o=s==="./"?"":s.replace(/\/*$/,"/");this[cs](o+n)}),!r)throw new Error("Cannot pipe without source");i?r.on("data",n=>{i.write(n)}):r.on("data",n=>{super[rf](n)})}};var Sp=(t,e)=>{let r=new Yt(t),i=new Dr(t.file,{mode:t.mode||438});r.pipe(i),nf(r,e)},Dp=(t,e)=>{let r=new Tt(t),i=new et(t.file,{mode:t.mode||438});r.pipe(i);let n=new Promise((s,o)=>{i.on("error",o),i.on("close",s),r.on("error",o)});return sf(r,e),n},nf=(t,e)=>{e.forEach(r=>{r.charAt(0)==="@"?$t({file:Na.default.resolve(t.cwd,r.slice(1)),sync:!0,noResume:!0,onReadEntry:i=>t.add(i)}):t.add(r)}),t.end()},sf=async(t,e)=>{for(let r=0;r<e.length;r++){let i=String(e[r]);i.charAt(0)==="@"?await $t({file:Na.default.resolve(String(t.cwd),i.slice(1)),noResume:!0,onReadEntry:n=>{t.add(n)}}):t.add(i)}t.end()},Np=(t,e)=>{let r=new Yt(t);return nf(r,e),r},Tp=(t,e)=>{let r=new Tt(t);return sf(r,e),r},Op=ke(Sp,Dp,Np,Tp,(t,e)=>{if(!e?.length)throw new TypeError("no paths specified to add to archive")});var $a=P(require("node:fs"),1);var xf=P(require("node:assert"),1),Ga=require("node:crypto"),q=P(require("node:fs"),1),je=P(require("node:path"),1);var Ta=P(require("fs"),1),Rp=process.env.__FAKE_PLATFORM__||process.platform,Ip=Rp==="win32",{O_CREAT:Cp,O_TRUNC:_p,O_WRONLY:Lp}=Ta.default.constants,of=Number(process.env.__FAKE_FS_O_FILENAME__)||Ta.default.constants.UV_FS_O_FILEMAP||0,Ap=Ip&&!!of,Mp=512*1024,Pp=of|_p|Cp|Lp,Oa=Ap?t=>t<Mp?Pp:"w":()=>"w";var wi=P(require("node:fs"),1),Cr=P(require("node:path"),1),Ra=(t,e,r)=>{try{return wi.default.lchownSync(t,e,r)}catch(i){if(i?.code!=="ENOENT")throw i}},ms=(t,e,r,i)=>{wi.default.lchown(t,e,r,n=>{i(n&&n?.code!=="ENOENT"?n:null)})},Fp=(t,e,r,i,n)=>{if(e.isDirectory())Ia(Cr.default.resolve(t,e.name),r,i,s=>{if(s)return n(s);let o=Cr.default.resolve(t,e.name);ms(o,r,i,n)});else{let s=Cr.default.resolve(t,e.name);ms(s,r,i,n)}},Ia=(t,e,r,i)=>{wi.default.readdir(t,{withFileTypes:!0},(n,s)=>{if(n){if(n.code==="ENOENT")return i();if(n.code!=="ENOTDIR"&&n.code!=="ENOTSUP")return i(n)}if(n||!s.length)return ms(t,e,r,i);let o=s.length,a=null,l=c=>{if(!a){if(c)return i(a=c);if(--o===0)return ms(t,e,r,i)}};for(let c of s)Fp(t,c,e,r,l)})},kp=(t,e,r,i)=>{e.isDirectory()&&Ca(Cr.default.resolve(t,e.name),r,i),Ra(Cr.default.resolve(t,e.name),r,i)},Ca=(t,e,r)=>{let i;try{i=wi.default.readdirSync(t,{withFileTypes:!0})}catch(n){let s=n;if(s?.code==="ENOENT")return;if(s?.code==="ENOTDIR"||s?.code==="ENOTSUP")return Ra(t,e,r);throw s}for(let n of i)kp(t,n,e,r);return Ra(t,e,r)};var we=P(require("fs"),1);var _a=require("path");var Ot=require("fs"),ve=t=>{if(!t)t={mode:511};else if(typeof t=="object")t={mode:511,...t};else if(typeof t=="number")t={mode:t};else if(typeof t=="string")t={mode:parseInt(t,8)};else throw new TypeError("invalid options argument");let e=t,r=t.fs||{};return t.mkdir=t.mkdir||r.mkdir||Ot.mkdir,t.mkdirAsync=t.mkdirAsync?t.mkdirAsync:async(i,n)=>new Promise((s,o)=>e.mkdir(i,n,(a,l)=>a?o(a):s(l))),t.stat=t.stat||r.stat||Ot.stat,t.statAsync=t.statAsync?t.statAsync:async i=>new Promise((n,s)=>e.stat(i,(o,a)=>o?s(o):n(a))),t.statSync=t.statSync||r.statSync||Ot.statSync,t.mkdirSync=t.mkdirSync||r.mkdirSync||Ot.mkdirSync,e};var ze=(t,e,r)=>{let i=(0,_a.dirname)(t),n={...ve(e),recursive:!1};if(i===t)try{return n.mkdirSync(t,n)}catch(s){let o=s;if(o&&o.code!=="EISDIR")throw s;return}try{return n.mkdirSync(t,n),r||t}catch(s){let o=s;if(o&&o.code==="ENOENT")return ze(t,n,ze(i,n,r));if(o&&o.code!=="EEXIST"&&o&&o.code!=="EROFS")throw s;try{if(!n.statSync(t).isDirectory())throw s}catch{throw s}}},ot=Object.assign(async(t,e,r)=>{let i=ve(e);i.recursive=!1;let n=(0,_a.dirname)(t);return n===t?i.mkdirAsync(t,i).catch(s=>{let o=s;if(o&&o.code!=="EISDIR")throw s}):i.mkdirAsync(t,i).then(()=>r||t,async s=>{let o=s;if(o&&o.code==="ENOENT")return ot(n,i).then(a=>ot(t,i,a));if(o&&o.code!=="EEXIST"&&o.code!=="EROFS")throw s;return i.statAsync(t).then(a=>{if(a.isDirectory())return r;throw s},()=>{throw s})})},{sync:ze});var Pa=require("path");var La=require("path"),Aa=async(t,e,r)=>{if(r!==e)return t.statAsync(e).then(i=>i.isDirectory()?r:void 0,i=>{let n=i;return n&&n.code==="ENOENT"?Aa(t,(0,La.dirname)(e),e):void 0})},Ma=(t,e,r)=>{if(r!==e)try{return t.statSync(e).isDirectory()?r:void 0}catch(i){let n=i;return n&&n.code==="ENOENT"?Ma(t,(0,La.dirname)(e),e):void 0}};var _r=(t,e)=>{let r=ve(e);if(r.recursive=!0,(0,Pa.dirname)(t)===t)return r.mkdirSync(t,r);let n=Ma(r,t);try{return r.mkdirSync(t,r),n}catch(s){let o=s;if(o&&o.code==="ENOENT")return ze(t,r);throw s}},Ei=Object.assign(async(t,e)=>{let r={...ve(e),recursive:!0};return(0,Pa.dirname)(t)===t?await r.mkdirAsync(t,r):Aa(r,t).then(n=>r.mkdirAsync(t,r).then(s=>n||s).catch(s=>{let o=s;if(o&&o.code==="ENOENT")return ot(t,r);throw s}))},{sync:_r});var ps=require("path"),qp=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,Fa=t=>{if(/\0/.test(t))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:t,code:"ERR_INVALID_ARG_VALUE"});if(t=(0,ps.resolve)(t),qp==="win32"){let e=/[*|"<>?:]/,{root:r}=(0,ps.parse)(t);if(e.test(t.substring(r.length)))throw Object.assign(new Error("Illegal characters in path."),{path:t,code:"EINVAL"})}return t};var gs=require("fs");var Up=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,ka=Up.replace(/^v/,"").split("."),af=+ka[0]>10||+ka[0]==10&&+ka[1]>=12,bi=af?t=>ve(t).mkdirSync===gs.mkdirSync:()=>!1,ys=Object.assign(af?t=>ve(t).mkdir===gs.mkdir:()=>!1,{sync:bi});var ws=(t,e)=>{t=Fa(t);let r=ve(e);return bi(r)?_r(t,r):ze(t,r)};var lf=Object.assign(async(t,e)=>{t=Fa(t);let r=ve(e);return ys(r)?Ei(t,r):ot(t,r)},{mkdirpSync:ws,mkdirpNative:Ei,mkdirpNativeSync:_r,mkdirpManual:ot,mkdirpManualSync:ze,sync:ws,native:Ei,nativeSync:_r,manual:ot,manualSync:ze,useNative:ys,useNativeSync:bi});var Di=P(require("node:path"),1);var xi=class extends Error{path;code;syscall="chdir";constructor(e,r){super(`${r}: Cannot cd into '${e}'`),this.path=e,this.code=r}get name(){return"CwdError"}};var vi=class extends Error{path;symlink;syscall="symlink";code="TAR_SYMLINK_ERROR";constructor(e,r){super("TAR_SYMLINK_ERROR: Cannot extract through symbolic link"),this.symlink=e,this.path=r}get name(){return"SymlinkError"}};var Es=(t,e)=>t.get(A(e)),Si=(t,e,r)=>t.set(A(e),r),Bp=(t,e)=>{we.default.stat(t,(r,i)=>{(r||!i.isDirectory())&&(r=new xi(t,r?.code||"ENOTDIR")),e(r)})},cf=(t,e,r)=>{t=A(t);let i=e.umask??18,n=e.mode|448,s=(n&i)!==0,o=e.uid,a=e.gid,l=typeof o=="number"&&typeof a=="number"&&(o!==e.processUid||a!==e.processGid),c=e.preserve,u=e.unlink,f=e.cache,p=A(e.cwd),y=(T,R)=>{T?r(T):(Si(f,t,!0),R&&l?Ia(R,o,a,K=>y(K)):s?we.default.chmod(t,n,r):r())};if(f&&Es(f,t)===!0)return y();if(t===p)return Bp(t,y);if(c)return lf(t,{mode:n}).then(T=>y(null,T??void 0),y);let N=A(Di.default.relative(p,t)).split("/");bs(p,N,n,f,u,p,void 0,y)},bs=(t,e,r,i,n,s,o,a)=>{if(!e.length)return a(null,o);let l=e.shift(),c=A(Di.default.resolve(t+"/"+l));if(Es(i,c))return bs(c,e,r,i,n,s,o,a);we.default.mkdir(c,r,hf(c,e,r,i,n,s,o,a))},hf=(t,e,r,i,n,s,o,a)=>l=>{l?we.default.lstat(t,(c,u)=>{if(c)c.path=c.path&&A(c.path),a(c);else if(u.isDirectory())bs(t,e,r,i,n,s,o,a);else if(n)we.default.unlink(t,f=>{if(f)return a(f);we.default.mkdir(t,r,hf(t,e,r,i,n,s,o,a))});else{if(u.isSymbolicLink())return a(new vi(t,t+"/"+e.join("/")));a(l)}}):(o=o||t,bs(t,e,r,i,n,s,o,a))},zp=t=>{let e=!1,r;try{e=we.default.statSync(t).isDirectory()}catch(i){r=i?.code}finally{if(!e)throw new xi(t,r??"ENOTDIR")}},uf=(t,e)=>{t=A(t);let r=e.umask??18,i=e.mode|448,n=(i&r)!==0,s=e.uid,o=e.gid,a=typeof s=="number"&&typeof o=="number"&&(s!==e.processUid||o!==e.processGid),l=e.preserve,c=e.unlink,u=e.cache,f=A(e.cwd),p=T=>{Si(u,t,!0),T&&a&&Ca(T,s,o),n&&we.default.chmodSync(t,i)};if(u&&Es(u,t)===!0)return p();if(t===f)return zp(f),p();if(l)return p(ws(t,i)??void 0);let S=A(Di.default.relative(f,t)).split("/"),N;for(let T=S.shift(),R=f;T&&(R+="/"+T);T=S.shift())if(R=A(Di.default.resolve(R)),!Es(u,R))try{we.default.mkdirSync(R,i),N=N||R,Si(u,R,!0)}catch{let g=we.default.lstatSync(R);if(g.isDirectory()){Si(u,R,!0);continue}else if(c){we.default.unlinkSync(R),we.default.mkdirSync(R,i),N=N||R,Si(u,R,!0);continue}else if(g.isSymbolicLink())return new vi(R,R+"/"+S.join("/"))}return p(N)};var qa=Object.create(null),{hasOwnProperty:jp}=Object.prototype,xs=t=>(jp.call(qa,t)||(qa[t]=t.normalize("NFD")),qa[t]);var Ua=require("node:path");var Xp=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,Vp=Xp==="win32",Wp=t=>t.split("/").slice(0,-1).reduce((r,i)=>{let n=r[r.length-1];return n!==void 0&&(i=(0,Ua.join)(n,i)),r.push(i||"/"),r},[]),vs=class{#e=new Map;#r=new Map;#i=new Set;reserve(e,r){e=Vp?["win32 parallelization disabled"]:e.map(n=>Ue((0,Ua.join)(xs(n))).toLowerCase());let i=new Set(e.map(n=>Wp(n)).reduce((n,s)=>n.concat(s)));this.#r.set(r,{dirs:i,paths:e});for(let n of e){let s=this.#e.get(n);s?s.push(r):this.#e.set(n,[r])}for(let n of i){let s=this.#e.get(n);if(!s)this.#e.set(n,[new Set([r])]);else{let o=s[s.length-1];o instanceof Set?o.add(r):s.push(new Set([r]))}}return this.#n(r)}#s(e){let r=this.#r.get(e);if(!r)throw new Error("function does not have any path reservations");return{paths:r.paths.map(i=>this.#e.get(i)),dirs:[...r.dirs].map(i=>this.#e.get(i))}}check(e){let{paths:r,dirs:i}=this.#s(e);return r.every(n=>n&&n[0]===e)&&i.every(n=>n&&n[0]instanceof Set&&n[0].has(e))}#n(e){return this.#i.has(e)||!this.check(e)?!1:(this.#i.add(e),e(()=>this.#t(e)),!0)}#t(e){if(!this.#i.has(e))return!1;let r=this.#r.get(e);if(!r)throw new Error("invalid reservation");let{paths:i,dirs:n}=r,s=new Set;for(let o of i){let a=this.#e.get(o);if(!a||a?.[0]!==e)continue;let l=a[1];if(!l){this.#e.delete(o);continue}if(a.shift(),typeof l=="function")s.add(l);else for(let c of l)s.add(c)}for(let o of n){let a=this.#e.get(o),l=a?.[0];if(!(!a||!(l instanceof Set)))if(l.size===1&&a.length===1){this.#e.delete(o);continue}else if(l.size===1){a.shift();let c=a[0];typeof c=="function"&&s.add(c)}else l.delete(e)}return this.#i.delete(e),s.forEach(o=>this.#n(o)),!0}};var ff=Symbol("onEntry"),ja=Symbol("checkFs"),df=Symbol("checkFs2"),Ns=Symbol("pruneCache"),Xa=Symbol("isReusable"),Se=Symbol("makeFs"),Va=Symbol("file"),Wa=Symbol("directory"),Ts=Symbol("link"),mf=Symbol("symlink"),pf=Symbol("hardlink"),gf=Symbol("unsupported"),yf=Symbol("checkPath"),Rt=Symbol("mkdir"),se=Symbol("onError"),Ss=Symbol("pending"),wf=Symbol("pend"),Lr=Symbol("unpend"),Ba=Symbol("ended"),za=Symbol("maybeClose"),Ha=Symbol("skip"),Ni=Symbol("doChown"),Ti=Symbol("uid"),Oi=Symbol("gid"),Ri=Symbol("checkedCwd"),Hp=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,Ii=Hp==="win32",Gp=1024,$p=(t,e)=>{if(!Ii)return q.default.unlink(t,e);let r=t+".DELETE."+(0,Ga.randomBytes)(16).toString("hex");q.default.rename(t,r,i=>{if(i)return e(i);q.default.unlink(r,e)})},Kp=t=>{if(!Ii)return q.default.unlinkSync(t);let e=t+".DELETE."+(0,Ga.randomBytes)(16).toString("hex");q.default.renameSync(t,e),q.default.unlinkSync(e)},Ef=(t,e,r)=>t!==void 0&&t===t>>>0?t:e!==void 0&&e===e>>>0?e:r,bf=t=>Ue(A(xs(t))).toLowerCase(),Yp=(t,e)=>{e=bf(e);for(let r of t.keys()){let i=bf(r);(i===e||i.indexOf(e+"/")===0)&&t.delete(r)}},Zp=t=>{for(let e of t.keys())t.delete(e)},Ar=class extends st{[Ba]=!1;[Ri]=!1;[Ss]=0;reservations=new vs;transform;writable=!0;readable=!1;dirCache;uid;gid;setOwner;preserveOwner;processGid;processUid;maxDepth;forceChown;win32;newer;keep;noMtime;preservePaths;unlink;cwd;strip;processUmask;umask;dmode;fmode;chmod;constructor(e={}){if(e.ondone=()=>{this[Ba]=!0,this[za]()},super(e),this.transform=e.transform,this.dirCache=e.dirCache||new Map,this.chmod=!!e.chmod,typeof e.uid=="number"||typeof e.gid=="number"){if(typeof e.uid!="number"||typeof e.gid!="number")throw new TypeError("cannot set owner without number uid and gid");if(e.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=e.uid,this.gid=e.gid,this.setOwner=!0}else this.uid=void 0,this.gid=void 0,this.setOwner=!1;e.preserveOwner===void 0&&typeof e.uid!="number"?this.preserveOwner=!!(process.getuid&&process.getuid()===0):this.preserveOwner=!!e.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():void 0,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():void 0,this.maxDepth=typeof e.maxDepth=="number"?e.maxDepth:Gp,this.forceChown=e.forceChown===!0,this.win32=!!e.win32||Ii,this.newer=!!e.newer,this.keep=!!e.keep,this.noMtime=!!e.noMtime,this.preservePaths=!!e.preservePaths,this.unlink=!!e.unlink,this.cwd=A(je.default.resolve(e.cwd||process.cwd())),this.strip=Number(e.strip)||0,this.processUmask=this.chmod?typeof e.processUmask=="number"?e.processUmask:process.umask():0,this.umask=typeof e.umask=="number"?e.umask:this.processUmask,this.dmode=e.dmode||511&~this.umask,this.fmode=e.fmode||438&~this.umask,this.on("entry",r=>this[ff](r))}warn(e,r,i={}){return(e==="TAR_BAD_ARCHIVE"||e==="TAR_ABORT")&&(i.recoverable=!1),super.warn(e,r,i)}[za](){this[Ba]&&this[Ss]===0&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"))}[yf](e){let r=A(e.path),i=r.split("/");if(this.strip){if(i.length<this.strip)return!1;if(e.type==="Link"){let n=A(String(e.linkpath)).split("/");if(n.length>=this.strip)e.linkpath=n.slice(this.strip).join("/");else return!1}i.splice(0,this.strip),e.path=i.join("/")}if(isFinite(this.maxDepth)&&i.length>this.maxDepth)return this.warn("TAR_ENTRY_ERROR","path excessively deep",{entry:e,path:r,depth:i.length,maxDepth:this.maxDepth}),!1;if(!this.preservePaths){if(i.includes("..")||Ii&&/^[a-z]:\.\.$/i.test(i[0]??""))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:e,path:r}),!1;let[n,s]=fi(r);n&&(e.path=String(s),this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:e,path:r}))}if(je.default.isAbsolute(e.path)?e.absolute=A(je.default.resolve(e.path)):e.absolute=A(je.default.resolve(this.cwd,e.path)),!this.preservePaths&&typeof e.absolute=="string"&&e.absolute.indexOf(this.cwd+"/")!==0&&e.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:e,path:A(e.path),resolvedPath:e.absolute,cwd:this.cwd}),!1;if(e.absolute===this.cwd&&e.type!=="Directory"&&e.type!=="GNUDumpDir")return!1;if(this.win32){let{root:n}=je.default.win32.parse(String(e.absolute));e.absolute=n+ca(String(e.absolute).slice(n.length));let{root:s}=je.default.win32.parse(e.path);e.path=s+ca(e.path.slice(s.length))}return!0}[ff](e){if(!this[yf](e))return e.resume();switch(xf.default.equal(typeof e.absolute,"string"),e.type){case"Directory":case"GNUDumpDir":e.mode&&(e.mode=e.mode|448);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[ja](e);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[gf](e)}}[se](e,r){e.name==="CwdError"?this.emit("error",e):(this.warn("TAR_ENTRY_ERROR",e,{entry:r}),this[Lr](),r.resume())}[Rt](e,r,i){cf(A(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:r},i)}[Ni](e){return this.forceChown||this.preserveOwner&&(typeof e.uid=="number"&&e.uid!==this.processUid||typeof e.gid=="number"&&e.gid!==this.processGid)||typeof this.uid=="number"&&this.uid!==this.processUid||typeof this.gid=="number"&&this.gid!==this.processGid}[Ti](e){return Ef(this.uid,e.uid,this.processUid)}[Oi](e){return Ef(this.gid,e.gid,this.processGid)}[Va](e,r){let i=typeof e.mode=="number"?e.mode&4095:this.fmode,n=new et(String(e.absolute),{flags:Oa(e.size),mode:i,autoClose:!1});n.on("error",l=>{n.fd&&q.default.close(n.fd,()=>{}),n.write=()=>!0,this[se](l,e),r()});let s=1,o=l=>{if(l){n.fd&&q.default.close(n.fd,()=>{}),this[se](l,e),r();return}--s===0&&n.fd!==void 0&&q.default.close(n.fd,c=>{c?this[se](c,e):this[Lr](),r()})};n.on("finish",()=>{let l=String(e.absolute),c=n.fd;if(typeof c=="number"&&e.mtime&&!this.noMtime){s++;let u=e.atime||new Date,f=e.mtime;q.default.futimes(c,u,f,p=>p?q.default.utimes(l,u,f,y=>o(y&&p)):o())}if(typeof c=="number"&&this[Ni](e)){s++;let u=this[Ti](e),f=this[Oi](e);typeof u=="number"&&typeof f=="number"&&q.default.fchown(c,u,f,p=>p?q.default.chown(l,u,f,y=>o(y&&p)):o())}o()});let a=this.transform&&this.transform(e)||e;a!==e&&(a.on("error",l=>{this[se](l,e),r()}),e.pipe(a)),a.pipe(n)}[Wa](e,r){let i=typeof e.mode=="number"?e.mode&4095:this.dmode;this[Rt](String(e.absolute),i,n=>{if(n){this[se](n,e),r();return}let s=1,o=()=>{--s===0&&(r(),this[Lr](),e.resume())};e.mtime&&!this.noMtime&&(s++,q.default.utimes(String(e.absolute),e.atime||new Date,e.mtime,o)),this[Ni](e)&&(s++,q.default.chown(String(e.absolute),Number(this[Ti](e)),Number(this[Oi](e)),o)),o()})}[gf](e){e.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${e.type}`,{entry:e}),e.resume()}[mf](e,r){this[Ts](e,String(e.linkpath),"symlink",r)}[pf](e,r){let i=A(je.default.resolve(this.cwd,String(e.linkpath)));this[Ts](e,i,"link",r)}[wf](){this[Ss]++}[Lr](){this[Ss]--,this[za]()}[Ha](e){this[Lr](),e.resume()}[Xa](e,r){return e.type==="File"&&!this.unlink&&r.isFile()&&r.nlink<=1&&!Ii}[ja](e){this[wf]();let r=[e.path];e.linkpath&&r.push(e.linkpath),this.reservations.reserve(r,i=>this[df](e,i))}[Ns](e){e.type==="SymbolicLink"?Zp(this.dirCache):e.type!=="Directory"&&Yp(this.dirCache,String(e.absolute))}[df](e,r){this[Ns](e);let i=a=>{this[Ns](e),r(a)},n=()=>{this[Rt](this.cwd,this.dmode,a=>{if(a){this[se](a,e),i();return}this[Ri]=!0,s()})},s=()=>{if(e.absolute!==this.cwd){let a=A(je.default.dirname(String(e.absolute)));if(a!==this.cwd)return this[Rt](a,this.dmode,l=>{if(l){this[se](l,e),i();return}o()})}o()},o=()=>{q.default.lstat(String(e.absolute),(a,l)=>{if(l&&(this.keep||this.newer&&l.mtime>(e.mtime??l.mtime))){this[Ha](e),i();return}if(a||this[Xa](e,l))return this[Se](null,e,i);if(l.isDirectory()){if(e.type==="Directory"){let c=this.chmod&&e.mode&&(l.mode&4095)!==e.mode,u=f=>this[Se](f??null,e,i);return c?q.default.chmod(String(e.absolute),Number(e.mode),u):u()}if(e.absolute!==this.cwd)return q.default.rmdir(String(e.absolute),c=>this[Se](c??null,e,i))}if(e.absolute===this.cwd)return this[Se](null,e,i);$p(String(e.absolute),c=>this[Se](c??null,e,i))})};this[Ri]?s():n()}[Se](e,r,i){if(e){this[se](e,r),i();return}switch(r.type){case"File":case"OldFile":case"ContiguousFile":return this[Va](r,i);case"Link":return this[pf](r,i);case"SymbolicLink":return this[mf](r,i);case"Directory":case"GNUDumpDir":return this[Wa](r,i)}}[Ts](e,r,i,n){q.default[i](r,String(e.absolute),s=>{s?this[se](s,e):(this[Lr](),e.resume()),n()})}},Ds=t=>{try{return[null,t()]}catch(e){return[e,null]}},Ci=class extends Ar{sync=!0;[Se](e,r){return super[Se](e,r,()=>{})}[ja](e){if(this[Ns](e),!this[Ri]){let s=this[Rt](this.cwd,this.dmode);if(s)return this[se](s,e);this[Ri]=!0}if(e.absolute!==this.cwd){let s=A(je.default.dirname(String(e.absolute)));if(s!==this.cwd){let o=this[Rt](s,this.dmode);if(o)return this[se](o,e)}}let[r,i]=Ds(()=>q.default.lstatSync(String(e.absolute)));if(i&&(this.keep||this.newer&&i.mtime>(e.mtime??i.mtime)))return this[Ha](e);if(r||this[Xa](e,i))return this[Se](null,e);if(i.isDirectory()){if(e.type==="Directory"){let o=this.chmod&&e.mode&&(i.mode&4095)!==e.mode,[a]=o?Ds(()=>{q.default.chmodSync(String(e.absolute),Number(e.mode))}):[];return this[Se](a,e)}let[s]=Ds(()=>q.default.rmdirSync(String(e.absolute)));this[Se](s,e)}let[n]=e.absolute===this.cwd?[]:Ds(()=>Kp(String(e.absolute)));this[Se](n,e)}[Va](e,r){let i=typeof e.mode=="number"?e.mode&4095:this.fmode,n=a=>{let l;try{q.default.closeSync(s)}catch(c){l=c}(a||l)&&this[se](a||l,e),r()},s;try{s=q.default.openSync(String(e.absolute),Oa(e.size),i)}catch(a){return n(a)}let o=this.transform&&this.transform(e)||e;o!==e&&(o.on("error",a=>this[se](a,e)),e.pipe(o)),o.on("data",a=>{try{q.default.writeSync(s,a,0,a.length)}catch(l){n(l)}}),o.on("end",()=>{let a=null;if(e.mtime&&!this.noMtime){let l=e.atime||new Date,c=e.mtime;try{q.default.futimesSync(s,l,c)}catch(u){try{q.default.utimesSync(String(e.absolute),l,c)}catch{a=u}}}if(this[Ni](e)){let l=this[Ti](e),c=this[Oi](e);try{q.default.fchownSync(s,Number(l),Number(c))}catch(u){try{q.default.chownSync(String(e.absolute),Number(l),Number(c))}catch{a=a||u}}}n(a)})}[Wa](e,r){let i=typeof e.mode=="number"?e.mode&4095:this.dmode,n=this[Rt](String(e.absolute),i);if(n){this[se](n,e),r();return}if(e.mtime&&!this.noMtime)try{q.default.utimesSync(String(e.absolute),e.atime||new Date,e.mtime)}catch{}if(this[Ni](e))try{q.default.chownSync(String(e.absolute),Number(this[Ti](e)),Number(this[Oi](e)))}catch{}r(),e.resume()}[Rt](e,r){try{return uf(A(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:r})}catch(i){return i}}[Ts](e,r,i,n){let s=`${i}Sync`;try{q.default[s](r,String(e.absolute)),n(),e.resume()}catch(o){return this[se](o,e)}}};var Qp=t=>{let e=new Ci(t),r=t.file,i=$a.default.statSync(r),n=t.maxReadSize||16*1024*1024;new qn(r,{readSize:n,size:i.size}).pipe(e)},Jp=(t,e)=>{let r=new Ar(t),i=t.maxReadSize||16*1024*1024,n=t.file;return new Promise((o,a)=>{r.on("error",a),r.on("close",o),$a.default.stat(n,(l,c)=>{if(l)a(l);else{let u=new qt(n,{readSize:i,size:c.size});u.on("error",a),u.pipe(r)}})})},Ka=ke(Qp,Jp,t=>new Ci(t),t=>new Ar(t),(t,e)=>{e?.length&&oa(t,e)});var fe=P(require("node:fs"),1),Ya=P(require("node:path"),1);var eg=(t,e)=>{let r=new Yt(t),i=!0,n,s;try{try{n=fe.default.openSync(t.file,"r+")}catch(l){if(l?.code==="ENOENT")n=fe.default.openSync(t.file,"w+");else throw l}let o=fe.default.fstatSync(n),a=Buffer.alloc(512);e:for(s=0;s<o.size;s+=512){for(let u=0,f=0;u<512;u+=f){if(f=fe.default.readSync(n,a,u,a.length-u,s+u),s===0&&a[0]===31&&a[1]===139)throw new Error("cannot append to compressed archives");if(!f)break e}let l=new ye(a);if(!l.cksumValid)break;let c=512*Math.ceil((l.size||0)/512);if(s+c+512>o.size)break;s+=c,t.mtimeCache&&l.mtime&&t.mtimeCache.set(String(l.path),l.mtime)}i=!1,tg(t,r,s,n,e)}finally{if(i)try{fe.default.closeSync(n)}catch{}}},tg=(t,e,r,i,n)=>{let s=new Dr(t.file,{fd:i,start:r});e.pipe(s),ig(e,n)},rg=(t,e)=>{e=Array.from(e);let r=new Tt(t),i=(s,o,a)=>{let l=(y,S)=>{y?fe.default.close(s,N=>a(y)):a(null,S)},c=0;if(o===0)return l(null,0);let u=0,f=Buffer.alloc(512),p=(y,S)=>{if(y||typeof S>"u")return l(y);if(u+=S,u<512&&S)return fe.default.read(s,f,u,f.length-u,c+u,p);if(c===0&&f[0]===31&&f[1]===139)return l(new Error("cannot append to compressed archives"));if(u<512)return l(null,c);let N=new ye(f);if(!N.cksumValid)return l(null,c);let T=512*Math.ceil((N.size??0)/512);if(c+T+512>o||(c+=T+512,c>=o))return l(null,c);t.mtimeCache&&N.mtime&&t.mtimeCache.set(String(N.path),N.mtime),u=0,fe.default.read(s,f,0,512,c,p)};fe.default.read(s,f,0,512,c,p)};return new Promise((s,o)=>{r.on("error",o);let a="r+",l=(c,u)=>{if(c&&c.code==="ENOENT"&&a==="r+")return a="w+",fe.default.open(t.file,a,l);if(c||!u)return o(c);fe.default.fstat(u,(f,p)=>{if(f)return fe.default.close(u,()=>o(f));i(u,p.size,(y,S)=>{if(y)return o(y);let N=new et(t.file,{fd:u,start:S});r.pipe(N),N.on("error",o),N.on("close",s),ng(r,e)})})};fe.default.open(t.file,a,l)})},ig=(t,e)=>{e.forEach(r=>{r.charAt(0)==="@"?$t({file:Ya.default.resolve(t.cwd,r.slice(1)),sync:!0,noResume:!0,onReadEntry:i=>t.add(i)}):t.add(r)}),t.end()},ng=async(t,e)=>{for(let r=0;r<e.length;r++){let i=String(e[r]);i.charAt(0)==="@"?await $t({file:Ya.default.resolve(String(t.cwd),i.slice(1)),noResume:!0,onReadEntry:n=>t.add(n)}):t.add(i)}t.end()},Zt=ke(eg,rg,()=>{throw new TypeError("file is required")},()=>{throw new TypeError("file is required")},(t,e)=>{if(!Tu(t))throw new TypeError("file is required");if(t.gzip||t.brotli||t.file.endsWith(".br")||t.file.endsWith(".tbr"))throw new TypeError("cannot append to compressed archives");if(!e?.length)throw new TypeError("no paths specified to add/replace")});var sg=ke(Zt.syncFile,Zt.asyncFile,Zt.syncNoFile,Zt.asyncNoFile,(t,e=[])=>{Zt.validate?.(t,e),og(t)}),og=t=>{let e=t.filter;t.mtimeCache||(t.mtimeCache=new Map),t.filter=e?(r,i)=>e(r,i)&&!((t.mtimeCache?.get(r)??i.mtime??0)>(i.mtime??0)):(r,i)=>!((t.mtimeCache?.get(r)??i.mtime??0)>(i.mtime??0))};var zf=P(Bf()),Pi=P(require("fs")),Fi=P(require("path")),ki=class{decompressZip(e,r){return new Promise((i,n)=>{zf.open(e.tmpFile.name,{lazyEntries:!0},(s,o)=>{if(s){r.appendLine(`[ERROR] ${s}`),n(s);return}o.readEntry(),o.on("entry",a=>{if(/\/$/.test(a.fileName)){let l=Fi.join(e.installPath,a.fileName);Pi.mkdir(l,{recursive:!0},c=>{if(c){r.appendLine(`[ERROR] Failed to create directory ${l}: ${c}`),n(c);return}o.readEntry()})}else{let l=Fi.join(e.installPath,a.fileName),c=Fi.dirname(l);Pi.mkdir(c,{recursive:!0},u=>{if(u){r.appendLine(`[ERROR] Failed to create directory ${c}: ${u}`),n(u);return}o.openReadStream(a,(f,p)=>{if(f){r.appendLine(`[ERROR] ${f}`),n(f);return}let y=Pi.createWriteStream(l);y.on("error",S=>{r.appendLine(`[ERROR] Failed to write ${l}: ${S}`),n(S)}),y.on("close",()=>{r.appendLine(`Extracted: ${a.fileName}`),o.readEntry()}),p.on("error",S=>{r.appendLine(`[ERROR] Read error for ${a.fileName}: ${S}`),n(S)}),p.pipe(y)})})}}),o.on("end",()=>{r.appendLine(`Done! Files unpacked.
`),i()}),o.on("error",a=>{r.appendLine(`[ERROR] Zipfile error: ${a}`),n(a)})})})}decompressTar(e,r){let i=0;return Ka({file:e.tmpFile.name,cwd:e.installPath,onentry:()=>{i++},onwarn:n=>{r.appendLine(`[ERROR] ${n}`)}},()=>{r.appendLine(`Done! ${i} files unpacked.
`)})}decompress(e,r){return e.isZipFile?this.decompressZip(e,r):this.decompressTar(e,r)}};var jf=P(require("fs")),Xf=P(require("http")),Vf=P(require("https")),Wf=require("url");var qi=class{downloadFile(e,r,i,n){let s=(0,Wf.parse)(e),o=this.getHttpClientOptions(s),a=s.protocol==="http:"?Xf.request:Vf.request;return new Promise((l,c)=>{if(!r.tmpFile||r.tmpFile.fd===0)return c(new Ke("Temporary package file unavailable",r));let u=a(o,f=>{if(f.statusCode===301||f.statusCode===302)return l(this.downloadFile(f.headers.location,r,i,n));if(f.statusCode!==200)return i.appendLine(`failed (error code '${f.statusCode}')`),c(new Ke(f.statusCode.toString(),r));this.handleSuccessfulResponse(r,f,i,n).then(p=>{l()}).catch(p=>{c(p)})});u.on("error",f=>{c(new Ke(`Request error: ${f.code||"NONE"}`,r,f))}),u.end()})}getHttpClientOptions(e){let r={host:e.hostname,path:e.path,agent:void 0};return e.protocol==="https:"&&(r={host:e.hostname,path:e.path,agent:void 0,rejectUnauthorized:!0}),r}handleDataReceivedEvent(e,r,i,n){if(e.downloadedBytes+=r.length,e.packageSize>0){let s=Math.ceil(100*(e.downloadedBytes/e.packageSize));s!==e.downloadPercentage&&(n.updateServiceDownloadingProgress(e.downloadPercentage),e.downloadPercentage=s);let o=Math.ceil(e.downloadPercentage/5);o>e.dots&&(i.append(".".repeat(o-e.dots)),e.dots=o)}}handleSuccessfulResponse(e,r,i,n){return new Promise((s,o)=>{let a={packageSize:parseInt(r.headers["content-length"],10),dots:0,downloadedBytes:0,downloadPercentage:0};i.append(`(${Math.ceil(a.packageSize/1024)} KB) `),r.on("data",c=>{this.handleDataReceivedEvent(a,c,i,n)});let l=jf.createWriteStream("",{fd:e.tmpFile.fd});r.on("end",()=>{s()}),r.on("error",c=>{o(new Ke(`Response error: ${c.code||"NONE"}`,e,c))}),r.pipe(l,{end:!1})})}};var Hf=P(require("path")),ks=P(require("fs/promises")),Ui=class{constructor(e,r,i){this._downloadProvider=e;this._config=r;this._statusView=i}async findServerPath(e){if((await ks.lstat(e)).isFile())return e;if(this._config!==void 0){let i=this._config.getSqlToolsExecutableFiles();for(let n of i){let s=Hf.join(e,n);try{if(await ks.stat(s))return s}catch{}}}}async getOrDownloadServer(e){let r=await this.getServerPath(e);return r===void 0?this.downloadServerFiles(e):r}async getServerPath(e){let r=await this._downloadProvider.getOrMakeInstallDirectory(e);return this.findServerPath(r)}async downloadServerFiles(e){let r=await this._downloadProvider.getOrMakeInstallDirectory(e);try{return await this._downloadProvider.installSQLToolsService(e),this.findServerPath(r)}catch(i){throw this._statusView.serviceInstallationFailed(),i}}};var qs=class{constructor(e){this._log=e}installingService(){this._log("...")}serviceInstalled(){this._log("Service installed")}serviceInstallationFailed(){this._log("Service installation failed")}updateServiceDownloadingProgress(e){e===100&&this._log("100%")}},Us=class{constructor(e){this._log=e}logDebug(e){this._log(e)}increaseIndent(){}decreaseIndent(){}append(e){this._log(e)}appendLine(e){this._log(e)}},$f=new Jr,Eg=new Us(console.log),Kf=new qs(console.log),bg=new qi,xg=new ki,Bs=new ei($f,Eg,Kf,bg,xg),Gf=new Ui(Bs,$f,Kf);function vg(t){return t===void 0?Qr.getCurrent().then(e=>{if(e.isValidRuntime)return Gf.getOrDownloadServer(e.runtimeId);throw new Error("unsupported runtime")}):Gf.getOrDownloadServer(t)}function Sg(t){return new Promise((e,r)=>{t===void 0?Qr.getCurrent().then(i=>{i.isValidRuntime?e(Bs.getOrMakeInstallDirectory(i.runtimeId)):r("unsupported runtime")}).catch(i=>{r(i)}):e(Bs.getOrMakeInstallDirectory(t))})}function Dg(){let t=Bs.getInstallDirectoryRoot();return t=t.replace("\\{#version#}\\{#platform#}",""),t=t.replace("/{#version#}/{#platform#}",""),t}0&&(module.exports={StubLogger,StubStatusView,getServiceInstallDirectory,getServiceInstallDirectoryRoot,installService});
/*! Bundled license information:

tmp/lib/tmp.js:
  (*!
   * Tmp
   *
   * Copyright (c) 2011-2017 KARASZI Istvan <github@spam.raszi.hu>
   *
   * MIT Licensed
   *)
*/

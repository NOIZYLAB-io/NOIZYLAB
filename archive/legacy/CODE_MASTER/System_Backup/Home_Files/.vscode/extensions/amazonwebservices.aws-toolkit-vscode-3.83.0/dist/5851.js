"use strict";exports.id=5851,exports.ids=[5851],exports.modules={85851:(O,C,t)=>{t.d(C,{fromIni:()=>W});var y=t(93628),u=t(31475),f=t(73230),d=t(27650),l=t(56340);const E=(e,s,n)=>{const r={EcsContainer:async i=>{const{fromHttp:o}=await t.e(5173).then(t.bind(t,15173)),{fromContainerMetadata:v}=await t.e(7927).then(t.bind(t,37927));return n?.debug("@aws-sdk/credential-provider-ini - credential_source is EcsContainer"),async()=>(0,l.c)(o(i??{}),v(i))().then(a)},Ec2InstanceMetadata:async i=>{n?.debug("@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata");const{fromInstanceMetadata:o}=await t.e(7927).then(t.bind(t,37927));return async()=>o(i)().then(a)},Environment:async i=>{n?.debug("@aws-sdk/credential-provider-ini - credential_source is Environment");const{fromEnv:o}=await t.e(8060).then(t.bind(t,55679));return async()=>o(i)().then(a)}};if(e in r)return r[e];throw new f.C(`Unsupported credential source in profile ${s}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:n})},a=e=>(0,d.g)(e,"CREDENTIALS_PROFILE_NAMED_PROVIDER","p"),g=(e,{profile:s="default",logger:n}={})=>Boolean(e)&&typeof e=="object"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(A(e,{profile:s,logger:n})||L(e,{profile:s,logger:n})),A=(e,{profile:s,logger:n})=>{const r=typeof e.source_profile=="string"&&typeof e.credential_source>"u";return r&&n?.debug?.(`    ${s} isAssumeRoleWithSourceProfile source_profile=${e.source_profile}`),r},L=(e,{profile:s,logger:n})=>{const r=typeof e.credential_source=="string"&&typeof e.source_profile>"u";return r&&n?.debug?.(`    ${s} isCredentialSourceProfile credential_source=${e.credential_source}`),r},w=async(e,s,n,r={})=>{n.logger?.debug("@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)");const i=s[e],{source_profile:o,region:v}=i;if(!n.roleAssumer){const{getDefaultRoleAssumer:c}=await t.e(1134).then(t.bind(t,81134));n.roleAssumer=c({...n.clientConfig,credentialProviderLogger:n.logger,parentClientConfig:{...n?.parentClientConfig,region:v??n?.parentClientConfig?.region}},n.clientPlugins)}if(o&&o in r)throw new f.C(`Detected a cycle attempting to resolve credentials for profile ${(0,u.Bz)(n)}. Profiles visited: `+Object.keys(r).join(", "),{logger:n.logger});n.logger?.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${o?`source_profile=[${o}]`:`profile=[${e}]`}`);const R=o?h(o,s,n,{...r,[o]:!0},m(s[o]??{})):(await E(i.credential_source,e,n.logger)(n))();if(m(i))return R.then(c=>(0,d.g)(c,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"));{const c={RoleArn:i.role_arn,RoleSessionName:i.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:i.external_id,DurationSeconds:parseInt(i.duration_seconds||"3600",10)},{mfa_serial:S}=i;if(S){if(!n.mfaCodeProvider)throw new f.C(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:n.logger,tryNextLink:!1});c.SerialNumber=S,c.TokenCode=await n.mfaCodeProvider(S)}const M=await R;return n.roleAssumer(M,c).then(N=>(0,d.g)(N,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"))}},m=e=>!e.role_arn&&!!e.credential_source,F=e=>Boolean(e)&&typeof e=="object"&&typeof e.credential_process=="string",D=async(e,s)=>t.e(1111).then(t.bind(t,71111)).then(({fromProcess:n})=>n({...e,profile:s})().then(r=>(0,d.g)(r,"CREDENTIALS_PROFILE_PROCESS","v"))),x=async(e,s,n={})=>{const{fromSSO:r}=await t.e(5105).then(t.bind(t,55105));return r({profile:e,logger:n.logger,parentClientConfig:n.parentClientConfig,clientConfig:n.clientConfig})().then(i=>s.sso_session?(0,d.g)(i,"CREDENTIALS_PROFILE_SSO","r"):(0,d.g)(i,"CREDENTIALS_PROFILE_SSO_LEGACY","t"))},T=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string"),I=e=>Boolean(e)&&typeof e=="object"&&typeof e.aws_access_key_id=="string"&&typeof e.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1&&["undefined","string"].indexOf(typeof e.aws_account_id)>-1,P=async(e,s)=>{s?.logger?.debug("@aws-sdk/credential-provider-ini - resolveStaticCredentials");const n={accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token,...e.aws_credential_scope&&{credentialScope:e.aws_credential_scope},...e.aws_account_id&&{accountId:e.aws_account_id}};return(0,d.g)(n,"CREDENTIALS_PROFILE","n")},$=e=>Boolean(e)&&typeof e=="object"&&typeof e.web_identity_token_file=="string"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1,j=async(e,s)=>t.e(6929).then(t.bind(t,86929)).then(({fromTokenFile:n})=>n({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:s.roleAssumerWithWebIdentity,logger:s.logger,parentClientConfig:s.parentClientConfig})().then(r=>(0,d.g)(r,"CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN","q"))),h=async(e,s,n,r={},i=!1)=>{const o=s[e];if(Object.keys(r).length>0&&I(o))return P(o,n);if(i||g(o,{profile:e,logger:n.logger}))return w(e,s,n,r);if(I(o))return P(o,n);if($(o))return j(o,n);if(F(o))return D(n,e);if(T(o))return await x(e,o,n);throw new f.C(`Could not resolve credentials using profile: [${e}] in configuration/credentials file(s).`,{logger:n.logger})},W=(e={})=>async({callerClientConfig:s}={})=>{const n={...e,parentClientConfig:{...s,...e.parentClientConfig}};n.logger?.debug("@aws-sdk/credential-provider-ini - fromIni");const r=await(0,y.Y)(n);return h((0,u.Bz)({profile:e.profile??s?.profile}),r,n)}},93628:(O,C,t)=>{t.d(C,{Y:()=>f});var y=t(10336);const u=(...d)=>{const l={};for(const E of d)for(const[a,g]of Object.entries(E))l[a]!==void 0?Object.assign(l[a],g):l[a]=g;return l},f=async d=>{const l=await(0,y.p)(d);return u(l.configFile,l.credentialsFile)}}};

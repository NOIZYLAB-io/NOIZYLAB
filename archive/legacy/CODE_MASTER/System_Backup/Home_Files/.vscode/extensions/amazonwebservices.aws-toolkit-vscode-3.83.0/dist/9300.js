"use strict";var Gs=Object.defineProperty;var Zs=(b,I,c)=>I in b?Gs(b,I,{enumerable:!0,configurable:!0,writable:!0,value:c}):b[I]=c;var S=(b,I,c)=>(Zs(b,typeof I!="symbol"?I+"":I,c),c);exports.id=9300,exports.ids=[9300],exports.modules={29300:(b,I,c)=>{c.d(I,{getDefaultRoleAssumer:()=>Dt,getDefaultRoleAssumerWithWebIdentity:()=>Wt});var $e=c(59133),$t=c(45165),Kt=c(97983),Ke=c(65439),U=c(45429),N=c(64470),kt=c(5655),Z=c(84003),V=c(30924),r=c(27792),_t=c(59433),ke=c(59897);const zt=async(e,s,t)=>({operation:(0,ke.u)(s).operation,region:await(0,ke.t)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function jt(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(s,t)=>({signingProperties:{config:s,context:t}})}}function Ft(e){return{schemeId:"smithy.api#noAuth"}}const Ht=e=>{const s=[];switch(e.operation){case"AssumeRoleWithWebIdentity":{s.push(Ft(e));break}default:s.push(jt(e))}return s},Ot=e=>({...e,stsClientCtor:G}),Lt=e=>{const s=Ot(e);return{...(0,_t.h)(s)}},Mt=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),_e={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};var Ut=c(85485),Nt=c(50696),ze=c(60914),je=c(73637),Vt=c(35399),D=c(44773),Fe=c(6633),Bt=c(69723),Gt=c(78589),Zt=c(17307),He=c(21654),Oe=c(11347),Xt=c(3086),X=c(5559);const Le="required",i="type",l="fn",u="argv",w="ref",Me=!1,J=!0,T="booleanEquals",y="stringEquals",Ue="sigv4",Ne="sts",Ve="us-east-1",m="endpoint",Be="https://sts.{Region}.{PartitionResult#dnsSuffix}",v="tree",W="error",Y="getAttr",Ge={[Le]:!1,[i]:"String"},Q={[Le]:!0,default:!1,[i]:"Boolean"},Ze={[w]:"Endpoint"},Xe={[l]:"isSet",[u]:[{[w]:"Region"}]},g={[w]:"Region"},Je={[l]:"aws.partition",[u]:[g],assign:"PartitionResult"},Ye={[w]:"UseFIPS"},Qe={[w]:"UseDualStack"},p={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:Ue,signingName:Ne,signingRegion:Ve}]},headers:{}},A={},qe={conditions:[{[l]:y,[u]:[g,"aws-global"]}],[m]:p,[i]:m},et={[l]:T,[u]:[Ye,!0]},tt={[l]:T,[u]:[Qe,!0]},st={[l]:Y,[u]:[{[w]:"PartitionResult"},"supportsFIPS"]},nt={[w]:"PartitionResult"},ot={[l]:T,[u]:[!0,{[l]:Y,[u]:[nt,"supportsDualStack"]}]},rt=[{[l]:"isSet",[u]:[Ze]}],it=[et],ct=[tt],Jt={version:"1.0",parameters:{Region:Ge,UseDualStack:Q,UseFIPS:Q,Endpoint:Ge,UseGlobalEndpoint:Q},rules:[{conditions:[{[l]:T,[u]:[{[w]:"UseGlobalEndpoint"},J]},{[l]:"not",[u]:rt},Xe,Je,{[l]:T,[u]:[Ye,Me]},{[l]:T,[u]:[Qe,Me]}],rules:[{conditions:[{[l]:y,[u]:[g,"ap-northeast-1"]}],endpoint:p,[i]:m},{conditions:[{[l]:y,[u]:[g,"ap-south-1"]}],endpoint:p,[i]:m},{conditions:[{[l]:y,[u]:[g,"ap-southeast-1"]}],endpoint:p,[i]:m},{conditions:[{[l]:y,[u]:[g,"ap-southeast-2"]}],endpoint:p,[i]:m},qe,{conditions:[{[l]:y,[u]:[g,"ca-central-1"]}],endpoint:p,[i]:m},{conditions:[{[l]:y,[u]:[g,"eu-central-1"]}],endpoint:p,[i]:m},{conditions:[{[l]:y,[u]:[g,"eu-north-1"]}],endpoint:p,[i]:m},{conditions:[{[l]:y,[u]:[g,"eu-west-1"]}],endpoint:p,[i]:m},{conditions:[{[l]:y,[u]:[g,"eu-west-2"]}],endpoint:p,[i]:m},{conditions:[{[l]:y,[u]:[g,"eu-west-3"]}],endpoint:p,[i]:m},{conditions:[{[l]:y,[u]:[g,"sa-east-1"]}],endpoint:p,[i]:m},{conditions:[{[l]:y,[u]:[g,Ve]}],endpoint:p,[i]:m},{conditions:[{[l]:y,[u]:[g,"us-east-2"]}],endpoint:p,[i]:m},{conditions:[{[l]:y,[u]:[g,"us-west-1"]}],endpoint:p,[i]:m},{conditions:[{[l]:y,[u]:[g,"us-west-2"]}],endpoint:p,[i]:m},{endpoint:{url:Be,properties:{authSchemes:[{name:Ue,signingName:Ne,signingRegion:"{Region}"}]},headers:A},[i]:m}],[i]:v},{conditions:rt,rules:[{conditions:it,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[i]:W},{conditions:ct,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[i]:W},{endpoint:{url:Ze,properties:A,headers:A},[i]:m}],[i]:v},{conditions:[Xe],rules:[{conditions:[Je],rules:[{conditions:[et,tt],rules:[{conditions:[{[l]:T,[u]:[J,st]},ot],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:A,headers:A},[i]:m}],[i]:v},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[i]:W}],[i]:v},{conditions:it,rules:[{conditions:[{[l]:T,[u]:[st,J]}],rules:[{conditions:[{[l]:y,[u]:[{[l]:Y,[u]:[nt,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:A,headers:A},[i]:m},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:A,headers:A},[i]:m}],[i]:v},{error:"FIPS is enabled but this partition does not support FIPS",[i]:W}],[i]:v},{conditions:ct,rules:[{conditions:[ot],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:A,headers:A},[i]:m}],[i]:v},{error:"DualStack is enabled but this partition does not support DualStack",[i]:W}],[i]:v},qe,{endpoint:{url:Be,properties:A,headers:A},[i]:m}],[i]:v}],[i]:v},{error:"Invalid Configuration: Missing Region",[i]:W}]},Yt=new X.kS({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),Qt=(e,s={})=>Yt.get(e,()=>(0,X.sO)(Jt,{endpointParams:e,logger:s.logger}));X.mw.aws=Xt.UF;const qt=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??He.E,base64Encoder:e?.base64Encoder??He.n,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Qt,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??Ht,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:s=>s.getIdentityProvider("aws.auth#sigv4"),signer:new ze.f2},{schemeId:"smithy.api#noAuth",identityProvider:s=>s.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new N.mR}],logger:e?.logger??new r.N4,serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??Zt.D,utf8Decoder:e?.utf8Decoder??Oe.ar,utf8Encoder:e?.utf8Encoder??Oe.Pq});var es=c(88727);const ts=e=>{(0,r.I9)(process.version);const s=(0,es.I)(e),t=()=>s().then(r.lT),n=qt(e);(0,Nt.I)(process.version);const o={profile:e?.profile};return{...n,...e,runtime:"node",defaultsMode:s,bodyLengthChecker:e?.bodyLengthChecker??Bt.n,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,je.pf)({serviceId:n.serviceId,clientVersion:Ut.rE}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:d=>d.getIdentityProvider("aws.auth#sigv4")||(async a=>await e.credentialDefaultProvider(a?.__config||{})()),signer:new ze.f2},{schemeId:"smithy.api#noAuth",identityProvider:d=>d.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new N.mR}],maxAttempts:e?.maxAttempts??(0,D.Z)(V.qs,e),region:e?.region??(0,D.Z)(U.GG,{...U.zH,...o}),requestHandler:Fe.$c.create(e?.requestHandler??t),retryMode:e?.retryMode??(0,D.Z)({...V.kN,default:async()=>(await t()).retryMode||Gt.L0},e),sha256:e?.sha256??Vt.V.bind(null,"sha256"),streamCollector:e?.streamCollector??Fe.kv,useDualstackEndpoint:e?.useDualstackEndpoint??(0,D.Z)(U.e$,o),useFipsEndpoint:e?.useFipsEndpoint??(0,D.Z)(U.Ko,o),userAgentAppId:e?.userAgentAppId??(0,D.Z)(je.hV,o)}};var at=c(58390),q=c(17365);const ss=e=>{const s=e.httpAuthSchemes;let t=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){const d=s.findIndex(a=>a.schemeId===o.schemeId);d===-1?s.push(o):s.splice(d,1,o)},httpAuthSchemes(){return s},setHttpAuthSchemeProvider(o){t=o},httpAuthSchemeProvider(){return t},setCredentials(o){n=o},credentials(){return n}}},ns=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),B=e=>e,os=(e,s)=>{const t={...B((0,at.Rq)(e)),...B((0,r.xA)(e)),...B((0,q.eS)(e)),...B(ss(e))};return s.forEach(n=>n.configure(t)),{...e,...(0,at.$3)(t),...(0,r.uv)(t),...(0,q.jt)(t),...ns(t)}};class G extends r.Kj{constructor(...[t]){const n=ts(t||{}),o=Mt(n),d=(0,Ke.Dc)(o),a=(0,V.$z)(d),f=(0,U.TD)(a),E=(0,$e.OV)(f),P=(0,Z.Co)(E),O=Lt(P),L=os(O,t?.extensions||[]);super(L);S(this,"config");this.config=L,this.middlewareStack.use((0,Ke.sM)(this.config)),this.middlewareStack.use((0,V.ey)(this.config)),this.middlewareStack.use((0,kt.vK)(this.config)),this.middlewareStack.use((0,$e.TC)(this.config)),this.middlewareStack.use((0,$t.Y7)(this.config)),this.middlewareStack.use((0,Kt.n4)(this.config)),this.middlewareStack.use((0,N.wB)(this.config,{httpAuthSchemeParametersProvider:zt,identityProviderConfigProvider:async M=>new N.h$({"aws.auth#sigv4":M.credentials})})),this.middlewareStack.use((0,N.lW)(this.config))}destroy(){super.destroy()}}var dt=c(2818);class R extends r.TJ{constructor(s){super(s),Object.setPrototypeOf(this,R.prototype)}}const lt=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:r.$H}}),rs=e=>({...e,...e.Credentials&&{Credentials:lt(e.Credentials)}});class ee extends R{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t});S(this,"name","ExpiredTokenException");S(this,"$fault","client");Object.setPrototypeOf(this,ee.prototype)}}class te extends R{constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t});S(this,"name","MalformedPolicyDocumentException");S(this,"$fault","client");Object.setPrototypeOf(this,te.prototype)}}class se extends R{constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t});S(this,"name","PackedPolicyTooLargeException");S(this,"$fault","client");Object.setPrototypeOf(this,se.prototype)}}class ne extends R{constructor(t){super({name:"RegionDisabledException",$fault:"client",...t});S(this,"name","RegionDisabledException");S(this,"$fault","client");Object.setPrototypeOf(this,ne.prototype)}}class oe extends R{constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t});S(this,"name","IDPRejectedClaimException");S(this,"$fault","client");Object.setPrototypeOf(this,oe.prototype)}}class re extends R{constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t});S(this,"name","InvalidIdentityTokenException");S(this,"$fault","client");Object.setPrototypeOf(this,re.prototype)}}const is=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:r.$H}}),cs=e=>({...e,...e.Credentials&&{Credentials:lt(e.Credentials)}});class ie extends R{constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t});S(this,"name","IDPCommunicationErrorException");S(this,"$fault","client");Object.setPrototypeOf(this,ie.prototype)}}var as=c(12763),ds=c(62892);const ce=(e,s)=>(0,ds.w)(e,s).then(t=>{if(t.length){const n=new as.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(E,P)=>P.trim()===""&&P.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let o;try{o=n.parse(t,!0)}catch(E){throw E&&typeof E=="object"&&Object.defineProperty(E,"$responseBodyText",{value:t}),E}const d="#text",a=Object.keys(o)[0],f=o[a];return f[d]&&(f[a]=f[d],delete f[d]),(0,r.rm)(f)}return{}}),ls=async(e,s)=>{const t=await ce(e,s);return t.Error&&(t.Error.message=t.Error.message??t.Error.Message),t},Js=(e,s)=>{if(s?.Error?.Code!==void 0)return s.Error.Code;if(s?.Code!==void 0)return s.Code;if(e.statusCode==404)return"NotFound"},us=async(e,s)=>{const t=gt;let n;return n=At({...vs(e,s),[Et]:Os,[St]:pt}),yt(s,t,"/",void 0,n)},ms=async(e,s)=>{const t=gt;let n;return n=At({...Rs(e,s),[Et]:Ls,[St]:pt}),yt(s,t,"/",void 0,n)},hs=async(e,s)=>{if(e.statusCode>=300)return ut(e,s);const t=await ce(e.body,s);let n={};return n=Ds(t.AssumeRoleResult,s),{$metadata:C(e),...n}},fs=async(e,s)=>{if(e.statusCode>=300)return ut(e,s);const t=await ce(e.body,s);let n={};return n=Ws(t.AssumeRoleWithWebIdentityResult,s),{$metadata:C(e),...n}},ut=async(e,s)=>{const t={...e,body:await ls(e.body,s)},n=Ms(e,t.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await ys(t,s);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await Ss(t,s);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await As(t,s);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await Ps(t,s);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await gs(t,s);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await ps(t,s);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await Es(t,s);default:const o=t.body;return Hs({output:e,parsedBody:o.Error,errorCode:n})}},ys=async(e,s)=>{const t=e.body,n=$s(t.Error,s),o=new ee({$metadata:C(e),...n});return(0,r.Mw)(o,t)},gs=async(e,s)=>{const t=e.body,n=Ks(t.Error,s),o=new ie({$metadata:C(e),...n});return(0,r.Mw)(o,t)},ps=async(e,s)=>{const t=e.body,n=ks(t.Error,s),o=new oe({$metadata:C(e),...n});return(0,r.Mw)(o,t)},Es=async(e,s)=>{const t=e.body,n=_s(t.Error,s),o=new re({$metadata:C(e),...n});return(0,r.Mw)(o,t)},Ss=async(e,s)=>{const t=e.body,n=zs(t.Error,s),o=new te({$metadata:C(e),...n});return(0,r.Mw)(o,t)},As=async(e,s)=>{const t=e.body,n=js(t.Error,s),o=new se({$metadata:C(e),...n});return(0,r.Mw)(o,t)},Ps=async(e,s)=>{const t=e.body,n=Fs(t.Error,s),o=new ne({$metadata:C(e),...n});return(0,r.Mw)(o,t)},vs=(e,s)=>{const t={};if(e[F]!=null&&(t[F]=e[F]),e[H]!=null&&(t[H]=e[H]),e[z]!=null){const n=mt(e[z],s);e[z]?.length===0&&(t.PolicyArns=[]),Object.entries(n).forEach(([o,d])=>{const a=`PolicyArns.${o}`;t[a]=d})}if(e[_]!=null&&(t[_]=e[_]),e[k]!=null&&(t[k]=e[k]),e[Ie]!=null){const n=Ts(e[Ie],s);e[Ie]?.length===0&&(t.Tags=[]),Object.entries(n).forEach(([o,d])=>{const a=`Tags.${o}`;t[a]=d})}if(e[xe]!=null){const n=ws(e[xe],s);e[xe]?.length===0&&(t.TransitiveTagKeys=[]),Object.entries(n).forEach(([o,d])=>{const a=`TransitiveTagKeys.${o}`;t[a]=d})}if(e[fe]!=null&&(t[fe]=e[fe]),e[ve]!=null&&(t[ve]=e[ve]),e[Ce]!=null&&(t[Ce]=e[Ce]),e[x]!=null&&(t[x]=e[x]),e[pe]!=null){const n=xs(e[pe],s);e[pe]?.length===0&&(t.ProvidedContexts=[]),Object.entries(n).forEach(([o,d])=>{const a=`ProvidedContexts.${o}`;t[a]=d})}return t},Rs=(e,s)=>{const t={};if(e[F]!=null&&(t[F]=e[F]),e[H]!=null&&(t[H]=e[H]),e[we]!=null&&(t[we]=e[we]),e[Ee]!=null&&(t[Ee]=e[Ee]),e[z]!=null){const n=mt(e[z],s);e[z]?.length===0&&(t.PolicyArns=[]),Object.entries(n).forEach(([o,d])=>{const a=`PolicyArns.${o}`;t[a]=d})}return e[_]!=null&&(t[_]=e[_]),e[k]!=null&&(t[k]=e[k]),t},mt=(e,s)=>{const t={};let n=1;for(const o of e){if(o===null)continue;const d=Is(o,s);Object.entries(d).forEach(([a,f])=>{t[`member.${n}.${a}`]=f}),n++}return t},Is=(e,s)=>{const t={};return e[Te]!=null&&(t[Te]=e[Te]),t},Cs=(e,s)=>{const t={};return e[ge]!=null&&(t[ge]=e[ge]),e[me]!=null&&(t[me]=e[me]),t},xs=(e,s)=>{const t={};let n=1;for(const o of e){if(o===null)continue;const d=Cs(o,s);Object.entries(d).forEach(([a,f])=>{t[`member.${n}.${a}`]=f}),n++}return t},bs=(e,s)=>{const t={};return e[ye]!=null&&(t[ye]=e[ye]),e[be]!=null&&(t[be]=e[be]),t},ws=(e,s)=>{const t={};let n=1;for(const o of e)o!==null&&(t[`member.${n}`]=o,n++);return t},Ts=(e,s)=>{const t={};let n=1;for(const o of e){if(o===null)continue;const d=bs(o,s);Object.entries(d).forEach(([a,f])=>{t[`member.${n}.${a}`]=f}),n++}return t},ht=(e,s)=>{const t={};return e[de]!=null&&(t[de]=(0,r.lK)(e[de])),e[le]!=null&&(t[le]=(0,r.lK)(e[le])),t},Ds=(e,s)=>{const t={};return e[K]!=null&&(t[K]=ft(e[K],s)),e[$]!=null&&(t[$]=ht(e[$],s)),e[j]!=null&&(t[j]=(0,r.xW)(e[j])),e[x]!=null&&(t[x]=(0,r.lK)(e[x])),t},Ws=(e,s)=>{const t={};return e[K]!=null&&(t[K]=ft(e[K],s)),e[Pe]!=null&&(t[Pe]=(0,r.lK)(e[Pe])),e[$]!=null&&(t[$]=ht(e[$],s)),e[j]!=null&&(t[j]=(0,r.xW)(e[j])),e[Se]!=null&&(t[Se]=(0,r.lK)(e[Se])),e[ue]!=null&&(t[ue]=(0,r.lK)(e[ue])),e[x]!=null&&(t[x]=(0,r.lK)(e[x])),t},ft=(e,s)=>{const t={};return e[ae]!=null&&(t[ae]=(0,r.lK)(e[ae])),e[Ae]!=null&&(t[Ae]=(0,r.lK)(e[Ae])),e[Re]!=null&&(t[Re]=(0,r.lK)(e[Re])),e[he]!=null&&(t[he]=(0,r.Y0)((0,r.t_)(e[he]))),t},$s=(e,s)=>{const t={};return e[h]!=null&&(t[h]=(0,r.lK)(e[h])),t},Ks=(e,s)=>{const t={};return e[h]!=null&&(t[h]=(0,r.lK)(e[h])),t},ks=(e,s)=>{const t={};return e[h]!=null&&(t[h]=(0,r.lK)(e[h])),t},_s=(e,s)=>{const t={};return e[h]!=null&&(t[h]=(0,r.lK)(e[h])),t},zs=(e,s)=>{const t={};return e[h]!=null&&(t[h]=(0,r.lK)(e[h])),t},js=(e,s)=>{const t={};return e[h]!=null&&(t[h]=(0,r.lK)(e[h])),t},Fs=(e,s)=>{const t={};return e[h]!=null&&(t[h]=(0,r.lK)(e[h])),t},C=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Ys=(e,s)=>collectBody(e,s).then(t=>s.utf8Encoder(t)),Hs=(0,r.jr)(R),yt=async(e,s,t,n,o)=>{const{hostname:d,protocol:a="https",port:f,path:E}=await e.endpoint(),P={protocol:a,hostname:d,port:f,method:"POST",path:E.endsWith("/")?E.slice(0,-1)+t:E+t,headers:s};return n!==void 0&&(P.hostname=n),o!==void 0&&(P.body=o),new q.Kd(P)},gt={"content-type":"application/x-www-form-urlencoded"},pt="2011-06-15",Et="Action",ae="AccessKeyId",Os="AssumeRole",de="AssumedRoleId",$="AssumedRoleUser",Ls="AssumeRoleWithWebIdentity",le="Arn",ue="Audience",K="Credentials",me="ContextAssertion",k="DurationSeconds",he="Expiration",fe="ExternalId",ye="Key",_="Policy",z="PolicyArns",ge="ProviderArn",pe="ProvidedContexts",Ee="ProviderId",j="PackedPolicySize",Se="Provider",F="RoleArn",H="RoleSessionName",Ae="SecretAccessKey",Pe="SubjectFromWebIdentityToken",x="SourceIdentity",ve="SerialNumber",Re="SessionToken",Ie="Tags",Ce="TokenCode",xe="TransitiveTagKeys",St="Version",be="Value",we="WebIdentityToken",Te="arn",h="message",At=e=>Object.entries(e).map(([s,t])=>(0,r.$6)(s)+"="+(0,r.$6)(t)).join("&"),Ms=(e,s)=>{if(s.Error?.Code!==void 0)return s.Error.Code;if(e.statusCode==404)return"NotFound"};class Pt extends r.uB.classBuilder().ep(_e).m(function(s,t,n,o){return[(0,dt.TM)(n,this.serialize,this.deserialize),(0,Z.rD)(n,s.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,rs).ser(us).de(hs).build(){}class vt extends r.uB.classBuilder().ep(_e).m(function(s,t,n,o){return[(0,dt.TM)(n,this.serialize,this.deserialize),(0,Z.rD)(n,s.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(is,cs).ser(ms).de(fs).build(){}const Us={AssumeRoleCommand:Pt,AssumeRoleWithWebIdentityCommand:vt};class Ns extends G{}(0,r.J1)(Us,Ns);var De=c(1762);const Rt="us-east-1",It=e=>{if(typeof e?.Arn=="string"){const s=e.Arn.split(":");if(s.length>4&&s[4]!=="")return s[4]}},Ct=async(e,s,t)=>{const n=typeof e=="function"?await e():e,o=typeof s=="function"?await s():s;return t?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${n} (provider)`,`${o} (parent client)`,`${Rt} (STS default)`),n??o??Rt},xt=(e,s)=>{let t,n;return async(o,d)=>{if(n=o,!t){const{logger:O=e?.parentClientConfig?.logger,region:L,requestHandler:M=e?.parentClientConfig?.requestHandler,credentialProviderLogger:We}=e,Vs=await Ct(L,e?.parentClientConfig?.region,We),Bs=!wt(M);t=new s({credentialDefaultProvider:()=>async()=>n,region:Vs,requestHandler:Bs?M:void 0,logger:O})}const{Credentials:a,AssumedRoleUser:f}=await t.send(new Pt(d));if(!a||!a.AccessKeyId||!a.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${d.RoleArn}`);const E=It(f),P={accessKeyId:a.AccessKeyId,secretAccessKey:a.SecretAccessKey,sessionToken:a.SessionToken,expiration:a.Expiration,...a.CredentialScope&&{credentialScope:a.CredentialScope},...E&&{accountId:E}};return(0,De.g)(P,"CREDENTIALS_STS_ASSUME_ROLE","i"),P}},bt=(e,s)=>{let t;return async n=>{if(!t){const{logger:E=e?.parentClientConfig?.logger,region:P,requestHandler:O=e?.parentClientConfig?.requestHandler,credentialProviderLogger:L}=e,M=await Ct(P,e?.parentClientConfig?.region,L),We=!wt(O);t=new s({region:M,requestHandler:We?O:void 0,logger:E})}const{Credentials:o,AssumedRoleUser:d}=await t.send(new vt(n));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);const a=It(d),f={accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration,...o.CredentialScope&&{credentialScope:o.CredentialScope},...a&&{accountId:a}};return a&&(0,De.g)(f,"RESOLVED_ACCOUNT_ID","T"),(0,De.g)(f,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),f}},Qs=e=>s=>e({roleAssumer:xt(s,s.stsClientCtor),roleAssumerWithWebIdentity:bt(s,s.stsClientCtor),...s}),wt=e=>e?.metadata?.handlerProtocol==="h2",Tt=(e,s)=>s?class extends e{constructor(n){super(n);for(const o of s)this.middlewareStack.use(o)}}:e,Dt=(e={},s)=>xt(e,Tt(G,s)),Wt=(e={},s)=>bt(e,Tt(G,s)),qs=e=>s=>e({roleAssumer:Dt(s),roleAssumerWithWebIdentity:Wt(s),...s})},85485:b=>{b.exports={rE:"3.730.0"}}};

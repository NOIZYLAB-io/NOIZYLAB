"use strict";exports.id=1111,exports.ids=[1111],exports.modules={71111:(p,l,s)=>{s.r(l),s.d(l,{fromProcess:()=>h});var u=s(93628),f=s(31475),i=s(73230),P=s(35317),x=s(39023),w=s(27650);const E=(r,e,n)=>{if(e.Version!==1)throw Error(`Profile ${r} credential_process did not return Version 1.`);if(e.AccessKeyId===void 0||e.SecretAccessKey===void 0)throw Error(`Profile ${r} credential_process returned invalid credentials.`);if(e.Expiration){const d=new Date;if(new Date(e.Expiration)<d)throw Error(`Profile ${r} credential_process returned expired credentials.`)}let o=e.AccountId;!o&&n?.[r]?.aws_account_id&&(o=n[r].aws_account_id);const t={accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,...e.SessionToken&&{sessionToken:e.SessionToken},...e.Expiration&&{expiration:new Date(e.Expiration)},...e.CredentialScope&&{credentialScope:e.CredentialScope},...o&&{accountId:o}};return(0,w.g)(t,"CREDENTIALS_PROCESS","w"),t},S=async(r,e,n)=>{const o=e[r];if(e[r]){const t=o.credential_process;if(t!==void 0){const d=(0,x.promisify)(P.exec);try{const{stdout:c}=await d(t);let a;try{a=JSON.parse(c.trim())}catch{throw Error(`Profile ${r} credential_process returned invalid JSON.`)}return E(r,a,e)}catch(c){throw new i.C(c.message,{logger:n})}}else throw new i.C(`Profile ${r} did not contain credential_process.`,{logger:n})}else throw new i.C(`Profile ${r} could not be found in shared credentials file.`,{logger:n})},h=(r={})=>async({callerClientConfig:e}={})=>{r.logger?.debug("@aws-sdk/credential-provider-process - fromProcess");const n=await(0,u.Y)(r);return S((0,f.Bz)({profile:r.profile??e?.profile}),n,r.logger)}}};

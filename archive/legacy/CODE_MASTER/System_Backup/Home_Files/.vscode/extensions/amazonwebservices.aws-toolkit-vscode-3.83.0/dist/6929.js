"use strict";exports.id=6929,exports.ids=[6929],exports.modules={86929:(W,d,o)=>{o.r(d),o.d(d,{fromTokenFile:()=>T,fromWebToken:()=>i});var a=o(27650),g=o(73230),E=o(79896);const i=e=>async n=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");const{roleArn:s,roleSessionName:t,webIdentityToken:r,providerId:f,policyArns:y,policy:A,durationSeconds:I}=e;let{roleAssumerWithWebIdentity:l}=e;if(!l){const{getDefaultRoleAssumerWithWebIdentity:m}=await o.e(1134).then(o.bind(o,81134));l=m({...e.clientConfig,credentialProviderLogger:e.logger,parentClientConfig:{...n?.callerClientConfig,...e.parentClientConfig}},e.clientPlugins)}return l({RoleArn:s,RoleSessionName:t??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:r,ProviderId:f,PolicyArns:y,Policy:A,DurationSeconds:I})},c="AWS_WEB_IDENTITY_TOKEN_FILE",S="AWS_ROLE_ARN",N="AWS_ROLE_SESSION_NAME",T=(e={})=>async()=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");const n=e?.webIdentityTokenFile??process.env[c],s=e?.roleArn??process.env[S],t=e?.roleSessionName??process.env[N];if(!n||!s)throw new g.C("Web identity configuration not specified",{logger:e.logger});const r=await i({...e,webIdentityToken:(0,E.readFileSync)(n,{encoding:"ascii"}),roleArn:s,roleSessionName:t})();return n===process.env[c]&&(0,a.g)(r,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h"),r}}};

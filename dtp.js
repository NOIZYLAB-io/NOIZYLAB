'use strict';function a67_0x34c8(){const _0x41c683=['getOwnPropertyNames','window','__importStar','projectName','hasOwnProperty','stack','DtpVsCodeUi','name','perf_hooks','getOwnPropertyDescriptor','188270HcrhkR','common.dtp.errorMessage.noBuildForFilter','statusText','filterId','showWarningMessage','common.dtp.outputChannel.importStartInfo','writable','configurable','staticAnalysisViolations','AbortError','1029930qNudiI','showErrorMessage','abort-controller','common.dtp.progress.fetchingResults.title','getQueryParameters','i18n','clear','filterName','common.dtp.exception.statusErrorNoText','getUrl','onCancellationRequested','selectLatestBuildId','__createBinding','now','213492dSQqoa','fetchApi','Unexpected\x20exception:\x20','3ovdWRN','../../logging','2078272eaGFKm','__esModule','assign','StatusError','./dtp.credentials','DtpClient','CredentialsManagerDtp','Dtp','signal','dtpUrl','globalState','message','create','builds','595596pMlxYb','AbortController','getStoredUsername','LOAD_FROM_DTP_QUERY_PARAMETERS_KEY','finished','252zWKopi','common.loadFromDtpQueryParameters','__setModuleDefault','node-fetch','364215VzbiZl','debug','44xzkodo','clearCredentials','./dtp.ui','default','fields','error','431vKzNoK','finding.codeDuplicates,finding.flowAnalysisPathElements,finding.flowAnalysisPathElements.flowAnalysisAnnotations','common.dtp.import.cancelled','common.dtp.outputChannel.importBuildIdInfo','outputChannel','1398BbCUbS','14VoEsyd','limit','performance','getStoredPat','show','saveParameters','ProgressLocation','Calling\x20showSelectFilterMenu\x20without\x20DTP\x20url/user/password','vscodeUi','executeQuery','toString','FetchError','previousImport','getResultsFromDtp','length','appendLine','vscode','defineProperty','call','buildId'];a67_0x34c8=function(){return _0x41c683;};return a67_0x34c8();}const a67_0x83107f=a67_0x22ed;function a67_0x22ed(_0x286138,_0x4ecf8a){const _0x34c8c8=a67_0x34c8();return a67_0x22ed=function(_0x22ed15,_0x5bd769){_0x22ed15=_0x22ed15-0x1cf;let _0x4d3094=_0x34c8c8[_0x22ed15];return _0x4d3094;},a67_0x22ed(_0x286138,_0x4ecf8a);}(function(_0x349cc4,_0x3c3e4a){const _0xcb2c6d=a67_0x22ed,_0x58329a=_0x349cc4();while(!![]){try{const _0x116b3b=-parseInt(_0xcb2c6d(0x203))/0x1*(parseInt(_0xcb2c6d(0x208))/0x2)+parseInt(_0xcb2c6d(0x1e2))/0x3*(-parseInt(_0xcb2c6d(0x1f2))/0x4)+-parseInt(_0xcb2c6d(0x1fb))/0x5+-parseInt(_0xcb2c6d(0x1d1))/0x6+parseInt(_0xcb2c6d(0x209))/0x7*(parseInt(_0xcb2c6d(0x1e4))/0x8)+-parseInt(_0xcb2c6d(0x1f7))/0x9*(-parseInt(_0xcb2c6d(0x227))/0xa)+parseInt(_0xcb2c6d(0x1fd))/0xb*(-parseInt(_0xcb2c6d(0x1df))/0xc);if(_0x116b3b===_0x3c3e4a)break;else _0x58329a['push'](_0x58329a['shift']());}catch(_0x381c25){_0x58329a['push'](_0x58329a['shift']());}}}(a67_0x34c8,0x4493e));var __createBinding=this&&this[a67_0x83107f(0x1dd)]||(Object[a67_0x83107f(0x1f0)]?function(_0x2015c5,_0x581ced,_0x574eb8,_0x24e5ef){const _0x4d35ff=a67_0x83107f;if(_0x24e5ef===undefined)_0x24e5ef=_0x574eb8;var _0x350191=Object[_0x4d35ff(0x226)](_0x581ced,_0x574eb8);(!_0x350191||('get'in _0x350191?!_0x581ced['__esModule']:_0x350191[_0x4d35ff(0x22d)]||_0x350191[_0x4d35ff(0x22e)]))&&(_0x350191={'enumerable':!![],'get':function(){return _0x581ced[_0x574eb8];}}),Object[_0x4d35ff(0x21a)](_0x2015c5,_0x24e5ef,_0x350191);}:function(_0x335811,_0x2fb57d,_0x8f1f92,_0x4b04e7){if(_0x4b04e7===undefined)_0x4b04e7=_0x8f1f92;_0x335811[_0x4b04e7]=_0x2fb57d[_0x8f1f92];}),__setModuleDefault=this&&this[a67_0x83107f(0x1f9)]||(Object['create']?function(_0x56622a,_0x23f5d7){const _0x1c7f61=a67_0x83107f;Object[_0x1c7f61(0x21a)](_0x56622a,_0x1c7f61(0x200),{'enumerable':!![],'value':_0x23f5d7});}:function(_0x5aecb1,_0x443630){_0x5aecb1['default']=_0x443630;}),__importStar=this&&this[a67_0x83107f(0x21f)]||(function(){var _0xe769d=function(_0x3b5da6){const _0x57d819=a67_0x22ed;return _0xe769d=Object[_0x57d819(0x21d)]||function(_0x32450c){const _0x54df2c=_0x57d819;var _0x4b0439=[];for(var _0x128f9a in _0x32450c)if(Object['prototype'][_0x54df2c(0x221)][_0x54df2c(0x21b)](_0x32450c,_0x128f9a))_0x4b0439[_0x4b0439[_0x54df2c(0x217)]]=_0x128f9a;return _0x4b0439;},_0xe769d(_0x3b5da6);};return function(_0x1f482d){const _0x45a4af=a67_0x22ed;if(_0x1f482d&&_0x1f482d[_0x45a4af(0x1e5)])return _0x1f482d;var _0x28d42f={};if(_0x1f482d!=null){for(var _0x253f0d=_0xe769d(_0x1f482d),_0x245268=0x0;_0x245268<_0x253f0d['length'];_0x245268++)if(_0x253f0d[_0x245268]!==_0x45a4af(0x200))__createBinding(_0x28d42f,_0x1f482d,_0x253f0d[_0x245268]);}return __setModuleDefault(_0x28d42f,_0x1f482d),_0x28d42f;};}());Object[a67_0x83107f(0x21a)](exports,a67_0x83107f(0x1e5),{'value':!![]}),exports[a67_0x83107f(0x1eb)]=void 0x0;const vscode=__importStar(require(a67_0x83107f(0x219))),abort_controller_1=require(a67_0x83107f(0x1d3)),node_fetch_1=require(a67_0x83107f(0x1fa)),pslogging=__importStar(require(a67_0x83107f(0x1e3))),dtp_client_1=require('./dtp.client'),dtp_ui_1=require(a67_0x83107f(0x1ff)),localization_1=require('../../localization'),perf_hooks_1=require(a67_0x83107f(0x225)),dtp_credentials_1=require(a67_0x83107f(0x1e8));class Dtp{[a67_0x83107f(0x207)];[a67_0x83107f(0x1ee)];[a67_0x83107f(0x1f5)]=a67_0x83107f(0x1f8);[a67_0x83107f(0x211)];[a67_0x83107f(0x215)];constructor(_0x477900,_0x5e4293){const _0x50f745=a67_0x83107f;this['outputChannel']=_0x477900,this[_0x50f745(0x1ee)]=_0x5e4293,this[_0x50f745(0x215)]=this[_0x50f745(0x1ee)]['get'](this[_0x50f745(0x1f5)]),this[_0x50f745(0x211)]=new dtp_ui_1[(_0x50f745(0x223))](this[_0x50f745(0x207)]);}async[a67_0x83107f(0x216)](){const _0x10255b=a67_0x83107f;this[_0x10255b(0x207)][_0x10255b(0x1d7)]();let _0x4b2b08,_0x567961;try{const _0x4927de=await this['vscodeUi'][_0x10255b(0x1d5)](this[_0x10255b(0x215)]);if(_0x4927de){_0x567961=perf_hooks_1[_0x10255b(0x20b)][_0x10255b(0x1de)]();const _0x1b39b0=await this['executeQuery'](_0x4927de);_0x1b39b0&&(this[_0x10255b(0x215)]=_0x4927de,this[_0x10255b(0x20e)](_0x4927de)),_0x4b2b08={'status':_0x10255b(0x1f6),'durationMs':perf_hooks_1[_0x10255b(0x20b)][_0x10255b(0x1de)]()-_0x567961,'jsonResults':_0x1b39b0};}}catch(_0x5031d0){if(_0x5031d0 instanceof dtp_client_1[_0x10255b(0x1e7)]){const _0x5244fc=_0x5031d0[_0x10255b(0x229)]?(0x0,localization_1['i18n'])('common.dtp.exception.statusErrorWithText',_0x5031d0['status'][_0x10255b(0x213)](),_0x5031d0[_0x10255b(0x229)]):(0x0,localization_1[_0x10255b(0x1d6)])(_0x10255b(0x1d9),_0x5031d0['status'][_0x10255b(0x213)]());await dtp_credentials_1[_0x10255b(0x1ea)][_0x10255b(0x1fe)](),vscode[_0x10255b(0x21e)][_0x10255b(0x1d2)](_0x5244fc),this[_0x10255b(0x207)][_0x10255b(0x218)](_0x5244fc),this['outputChannel'][_0x10255b(0x20d)]();}else{if(_0x5031d0 instanceof node_fetch_1[_0x10255b(0x214)]){const _0x49ab4b=(0x0,localization_1[_0x10255b(0x1d6)])('common.dtp.exception.fetchError',_0x5031d0[_0x10255b(0x1ef)]);vscode[_0x10255b(0x21e)][_0x10255b(0x1d2)](_0x49ab4b),this[_0x10255b(0x207)][_0x10255b(0x218)](_0x49ab4b),this['outputChannel']['show']();}else{if(_0x5031d0 instanceof Error&&_0x5031d0[_0x10255b(0x224)]===_0x10255b(0x1d0))pslogging[_0x10255b(0x1fc)]('Import\x20cancelled.'),this['outputChannel'][_0x10255b(0x218)]((0x0,localization_1[_0x10255b(0x1d6)])(_0x10255b(0x205))),this[_0x10255b(0x207)][_0x10255b(0x20d)](),_0x567961&&(_0x4b2b08={'status':'cancelled','durationMs':perf_hooks_1['performance'][_0x10255b(0x1de)]()-_0x567961,'jsonResults':undefined});else{pslogging[_0x10255b(0x202)](_0x10255b(0x1e1)+(_0x5031d0[_0x10255b(0x222)]??_0x5031d0));throw _0x5031d0;}}}}return _0x4b2b08;}async[a67_0x83107f(0x212)](_0x3091b0){const _0x143c1c=a67_0x83107f,_0x2c62f8=await dtp_credentials_1['CredentialsManagerDtp'][_0x143c1c(0x1f4)](),_0x37454f=await dtp_credentials_1[_0x143c1c(0x1ea)][_0x143c1c(0x20c)]();if(!_0x37454f||!_0x2c62f8){pslogging[_0x143c1c(0x202)](_0x143c1c(0x210));return;}const _0x2bcfdc=new dtp_client_1[(_0x143c1c(0x1e9))](_0x3091b0[_0x143c1c(0x1ed)],_0x2c62f8,_0x37454f);this[_0x143c1c(0x207)][_0x143c1c(0x218)]((0x0,localization_1[_0x143c1c(0x1d6)])(_0x143c1c(0x22c),_0x2bcfdc[_0x143c1c(0x1da)](),_0x3091b0[_0x143c1c(0x220)],_0x3091b0[_0x143c1c(0x1d8)]));const _0x5829e1=await vscode[_0x143c1c(0x21e)]['withProgress']({'location':vscode[_0x143c1c(0x20f)]['Notification'],'title':(0x0,localization_1[_0x143c1c(0x1d6)])(_0x143c1c(0x1d4)),'cancellable':!![]},async(_0x584caa,_0x2d4e24)=>{const _0x3a06f9=_0x143c1c,_0x5f332e=new abort_controller_1[(_0x3a06f9(0x1f3))]();_0x2d4e24[_0x3a06f9(0x1db)](()=>_0x5f332e['abort']());const _0x9b3152=await this[_0x3a06f9(0x1dc)](_0x2bcfdc,_0x3091b0,_0x5f332e);if(!_0x9b3152)return;this[_0x3a06f9(0x207)][_0x3a06f9(0x218)]((0x0,localization_1[_0x3a06f9(0x1d6)])(_0x3a06f9(0x206),_0x9b3152));const _0x548458=await _0x2bcfdc[_0x3a06f9(0x1e0)]('staticAnalysisFiles',new Map([['filterId',_0x3091b0[_0x3a06f9(0x22a)]],[_0x3a06f9(0x21c),_0x9b3152]]),_0x5f332e[_0x3a06f9(0x1ec)]);if(!_0x548458)return;const _0x338a41=await _0x2bcfdc[_0x3a06f9(0x1e0)](_0x3a06f9(0x1cf),new Map([[_0x3a06f9(0x22a),_0x3091b0[_0x3a06f9(0x22a)]],[_0x3a06f9(0x21c),_0x9b3152],[_0x3a06f9(0x20a),'-1'],[_0x3a06f9(0x201),_0x3a06f9(0x204)]]),_0x5f332e[_0x3a06f9(0x1ec)]);if(!_0x338a41)return;return[_0x548458,_0x338a41];});return _0x5829e1;}async[a67_0x83107f(0x1dc)](_0x48d75f,_0x56ef72,_0x5d9bed){const _0x1983a8=a67_0x83107f,_0x37266f=new Map([[_0x1983a8(0x22a),_0x56ef72['filterId']],[_0x1983a8(0x20a),'1']]),_0x5da490=await _0x48d75f[_0x1983a8(0x1e0)](_0x1983a8(0x1f1),_0x37266f,_0x5d9bed[_0x1983a8(0x1ec)]);if(!_0x5da490)return;if(!_0x5da490['length']){const _0x44e5ef=(0x0,localization_1[_0x1983a8(0x1d6)])(_0x1983a8(0x228),_0x56ef72['filterName']);vscode['window'][_0x1983a8(0x22b)](_0x44e5ef),this[_0x1983a8(0x207)][_0x1983a8(0x218)](_0x44e5ef),this[_0x1983a8(0x207)]['show']();return;}return _0x5da490[0x0]['id'];}['saveParameters'](_0xe3e309){const _0x16c29e=a67_0x83107f,_0x27d1ad=Object[_0x16c29e(0x1e6)]({},_0xe3e309);this[_0x16c29e(0x1ee)]['set'](this[_0x16c29e(0x1f5)],_0x27d1ad);}}exports[a67_0x83107f(0x1eb)]=Dtp;